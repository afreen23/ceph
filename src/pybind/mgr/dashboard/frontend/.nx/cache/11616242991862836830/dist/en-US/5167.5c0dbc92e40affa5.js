(self.webpackChunkceph_dashboard=self.webpackChunkceph_dashboard||[]).push([[5167],{55167:(ve,L,v)=>{v.r(L),v.d(L,{FORMLY_CONFIG:()=>R,FieldArrayType:()=>he,FieldType:()=>P,FieldWrapper:()=>ue,FormlyConfig:()=>C,FormlyField:()=>B,FormlyForm:()=>le,FormlyFormBuilder:()=>A,FormlyModule:()=>Ce,\u0275FormlyAttributes:()=>ce,\u0275FormlyGroup:()=>z,\u0275FormlyTemplate:()=>K,\u0275FormlyValidationMessage:()=>pe,\u0275clone:()=>m,\u0275defineHiddenProp:()=>f,\u0275getFieldValue:()=>_,\u0275hasKey:()=>u,\u0275observe:()=>d,\u0275reverseDeepMerge:()=>x});var o=v(87536),p=v(53648),g=v(95631),b=v(50619),M=v(91974),J=v(5559);const X=["container"];function q(n,t){}const ee=["*"];function te(n,t){1&n&&o.\u0275\u0275element(0,"formly-field",1),2&n&&o.\u0275\u0275property("field",t.$implicit)}const $=["fieldComponent"];function re(n,t,e){if(t.id)return t.id;let s=t.type;return!s&&t.template&&(s="template"),s instanceof o.Type&&(s=s.prototype.constructor.name),[n,s,t.key,e].join("_")}function u(n){return!E(n.key)&&""!==n.key}function O(n){if(!u(n))return[];if(n._keyPath?.key!==n.key){let t=[];if("string"==typeof n.key){const e=-1===n.key.indexOf("[")?n.key:n.key.replace(/\[(\w+)\]/g,".$1");t=-1!==e.indexOf(".")?e.split("."):[e]}else t=Array.isArray(n.key)?n.key.slice(0):[`${n.key}`];f(n,"_keyPath",{key:n.key,path:t})}return n._keyPath.path.slice(0)}const V=["required","pattern","minLength","maxLength","min","max"];function w(n,t){let e=O(n);if(0===e.length)return;let s=n;for(;s.parent;)s=s.parent,e=[...O(s),...e];if(void 0===t&&n.resetOnHide){const r=e.pop();delete e.reduce((a,l)=>a[l]||{},s.model)[r]}else!function ne(n,t,e){for(let s=0;s<t.length-1;s++){const r=t[s];(!n[r]||!F(n[r]))&&(n[r]=/^\d+$/.test(t[s+1])?[]:{}),n=n[r]}n[t[t.length-1]]=m(e)}(s.model,e,t)}function _(n){let t=n.parent?n.parent.model:n.model;for(const e of O(n)){if(!t)return t;t=t[e]}return t}function x(n,...t){return t.forEach(e=>{for(const s in e)E(n[s])||ie(n[s])?n[s]=m(e[s]):oe(n[s],e[s])&&x(n[s],e[s])}),n}function E(n){return null==n}function T(n){return void 0===n}function ie(n){return""===n}function j(n){return"function"==typeof n}function oe(n,t){return F(n)&&F(t)&&Object.getPrototypeOf(n)===Object.getPrototypeOf(t)&&!(Array.isArray(n)||Array.isArray(t))}function F(n){return null!=n&&"object"==typeof n}function m(n){if(!F(n)||(0,g.isObservable)(n)||n instanceof o.TemplateRef||n.changingThisBreaksApplicationSecurity||-1!==["RegExp","FileList","File","Blob"].indexOf(n.constructor.name))return n;if(n instanceof Set)return new Set(n);if(n instanceof Map)return new Map(n);if(n._isAMomentObject&&j(n.clone))return n.clone();if(n instanceof p.AbstractControl)return null;if(n instanceof Date)return new Date(n.getTime());if(Array.isArray(n))return n.slice(0).map(s=>m(s));const t=Object.getPrototypeOf(n);let e=Object.create(t);return e=Object.setPrototypeOf(e,t),Object.keys(n).reduce((s,r)=>{const i=Object.getOwnPropertyDescriptor(n,r);return i.get?Object.defineProperty(s,r,i):s[r]=m(n[r]),s},e)}function f(n,t,e){Object.defineProperty(n,t,{enumerable:!1,writable:!0,configurable:!0}),n[t]=e}function I(n,t,e){let s=[];const r=()=>{s.forEach(a=>a()),s=[]},i=d(n,t,({firstChange:a,currentValue:l})=>{!a&&e(),r(),F(l)&&"Object"===l.constructor.name&&Object.keys(l).forEach(c=>{s.push(I(n,[...t,c],e))})});return()=>{i.unsubscribe(),r()}}function d(n,t,e){n._observers||f(n,"_observers",{});let s=n;for(let l=0;l<t.length-1;l++)(!s[t[l]]||!F(s[t[l]]))&&(s[t[l]]=/^\d+$/.test(t[l+1])?[]:{}),s=s[t[l]];const r=t[t.length-1],i=t.join(".");n._observers[i]||(n._observers[i]={value:s[r],onChange:[]});const a=n._observers[i];if(s[r]!==a.value&&(a.value=s[r]),-1===a.onChange.indexOf(e)&&(a.onChange.push(e),e({currentValue:a.value,firstChange:!0}),a.onChange.length>=1)){const{enumerable:l}=Object.getOwnPropertyDescriptor(s,r)||{enumerable:!0};Object.defineProperty(s,r,{enumerable:l,configurable:!0,get:()=>a.value,set:c=>{if(c!==a.value){const h=a.value;a.value=c,a.onChange.forEach(y=>y({previousValue:h,currentValue:c,firstChange:!1}))}}})}return{setValue(l){a.value=l},unsubscribe(){a.onChange=a.onChange.filter(l=>l!==e),0===a.onChange.length&&delete n._observers[i]}}}function W(n,t){if(t=Array.isArray(t)?t.join("."):t,n.fieldGroup)for(let e=0,s=n.fieldGroup.length;e<s;e++){const r=n.fieldGroup[e],i=Array.isArray(r.key)?r.key.join("."):r.key;if(i===t)return r;if(r.fieldGroup&&(E(i)||0===t.indexOf(`${i}.`))){const a=W(r,E(i)?t:t.slice(i.length+1));if(a)return a}}}function N(n){n._componentRefs?.forEach(t=>{t instanceof o.ComponentRef?t.injector.get(o.ChangeDetectorRef).markForCheck():t.markForCheck()})}const R=new o.InjectionToken("FORMLY_CONFIG");let C=(()=>{class n{constructor(){this.types={},this.validators={},this.wrappers={},this.messages={},this.extras={checkExpressionOn:"modelChange",lazyRender:!0,resetFieldOnHide:!0,renderFormlyFieldElement:!0,showError:e=>e.formControl?.invalid&&(e.formControl?.touched||e.options.parentForm?.submitted||!!e.field.validation?.show)},this.extensions={},this.presets={},this.extensionsByPriority={}}addConfig(e){e.types&&e.types.forEach(s=>this.setType(s)),e.validators&&e.validators.forEach(s=>this.setValidator(s)),e.wrappers&&e.wrappers.forEach(s=>this.setWrapper(s)),e.validationMessages&&e.validationMessages.forEach(s=>this.addValidatorMessage(s.name,s.message)),e.extensions&&this.setSortedExtensions(e.extensions),e.extras&&(this.extras={...this.extras,...e.extras}),e.presets&&(this.presets={...this.presets,...e.presets.reduce((s,r)=>({...s,[r.name]:r.config}),{})})}setType(e){Array.isArray(e)?e.forEach(s=>this.setType(s)):(this.types[e.name]||(this.types[e.name]={name:e.name}),["component","extends","defaultOptions","wrappers"].forEach(s=>{e.hasOwnProperty(s)&&(this.types[e.name][s]=e[s])}))}getType(e,s=!1){if(e instanceof o.Type)return{component:e,name:e.prototype.constructor.name};if(!this.types[e]){if(s)throw new Error(`[Formly Error] The type "${e}" could not be found. Please make sure that is registered through the FormlyModule declaration.`);return null}return this.mergeExtendedType(e),this.types[e]}getMergedField(e={}){const s=this.getType(e.type);if(!s)return;s.defaultOptions&&x(e,s.defaultOptions);const r=s.extends&&this.getType(s.extends).defaultOptions;r&&x(e,r),e?.optionsTypes&&e.optionsTypes.forEach(a=>{const l=this.getType(a).defaultOptions;l&&x(e,l)});const i=this.resolveFieldTypeRef(e);i?.instance?.defaultOptions&&x(e,i.instance.defaultOptions),!e.wrappers&&s.wrappers&&(e.wrappers=[...s.wrappers])}resolveFieldTypeRef(e={}){const s=this.getType(e.type);if(!s)return null;if(!s.component||s._componentRef)return s._componentRef;const{_viewContainerRef:r,_injector:i}=e.options;if(!r||!i)return null;const a=r.createComponent(s.component,{injector:i});f(s,"_componentRef",a);try{a.destroy()}catch(l){console.error(`An error occurred while destroying the Formly component type "${e.type}"`,l)}return s._componentRef}setWrapper(e){this.wrappers[e.name]=e,e.types&&e.types.forEach(s=>{this.setTypeWrapper(s,e.name)})}getWrapper(e){if(e instanceof o.Type)return{component:e,name:e.prototype.constructor.name};if(!this.wrappers[e])throw new Error(`[Formly Error] The wrapper "${e}" could not be found. Please make sure that is registered through the FormlyModule declaration.`);return this.wrappers[e]}setTypeWrapper(e,s){this.types[e]||(this.types[e]={}),this.types[e].wrappers||(this.types[e].wrappers=[]),-1===this.types[e].wrappers.indexOf(s)&&this.types[e].wrappers.push(s)}setValidator(e){this.validators[e.name]=e}getValidator(e){if(!this.validators[e])throw new Error(`[Formly Error] The validator "${e}" could not be found. Please make sure that is registered through the FormlyModule declaration.`);return this.validators[e]}addValidatorMessage(e,s){this.messages[e]=s}getValidatorMessage(e){return this.messages[e]}setSortedExtensions(e){e.forEach(s=>{const r=s.priority??1;this.extensionsByPriority[r]={...this.extensionsByPriority[r],[s.name]:s.extension}}),this.extensions=Object.keys(this.extensionsByPriority).map(Number).sort((s,r)=>s-r).reduce((s,r)=>({...s,...this.extensionsByPriority[r]}),{})}mergeExtendedType(e){if(!this.types[e].extends)return;const s=this.getType(this.types[e].extends);this.types[e].component||(this.types[e].component=s.component),this.types[e].wrappers||(this.types[e].wrappers=s.wrappers)}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275prov=o.\u0275\u0275defineInjectable({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),A=(()=>{class n{constructor(e,s,r,i){this.config=e,this.injector=s,this.viewContainerRef=r,this.parentForm=i}buildForm(e,s=[],r,i){this.build({fieldGroup:s,model:r,form:e,options:i})}build(e){if(!this.config.extensions.core)throw new Error("NgxFormly: missing `forRoot()` call. use `forRoot()` when registering the `FormlyModule`.");e.parent?this._build(e):(this._setOptions(e),function se(n,t){const e=n._updateTreeValidity.bind(n);n._updateTreeValidity=()=>{},t(),n._updateTreeValidity=e}(e.form,()=>{this._build(e);const s=e.options;s.checkExpressions?.(e,!0),s.detectChanges?.(e)}))}_build(e){if(!e)return;const s=Object.values(this.config.extensions);s.forEach(r=>r.prePopulate?.(e)),s.forEach(r=>r.onPopulate?.(e)),e.fieldGroup?.forEach(r=>this._build(r)),s.forEach(r=>r.postPopulate?.(e))}_setOptions(e){e.form=e.form||new p.FormGroup({}),e.model=e.model||{},e.options=e.options||{};const s=e.options;s._viewContainerRef||f(s,"_viewContainerRef",this.viewContainerRef),s._injector||f(s,"_injector",this.injector),s.build||(s._buildForm=()=>{console.warn("Formly: 'options._buildForm' is deprecated since v6.0, use 'options.build' instead."),this.build(e)},s.build=(r=e)=>(this.build(r),r)),!s.parentForm&&this.parentForm&&(f(s,"parentForm",this.parentForm),d(s,["parentForm","submitted"],({firstChange:r})=>{r||(s.checkExpressions(e),s.detectChanges(e))}))}}return n.\u0275fac=function(e){return new(e||n)(o.\u0275\u0275inject(C),o.\u0275\u0275inject(o.Injector),o.\u0275\u0275inject(o.ViewContainerRef,8),o.\u0275\u0275inject(p.FormGroupDirective,8))},n.\u0275prov=o.\u0275\u0275defineInjectable({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();function G(n,t=!1){const e=n.formControl,s=e._fields?e._fields.indexOf(n):-1;-1!==s&&e._fields.splice(s,1);const r=e.parent;if(!r)return;const i={emitEvent:t};if(r instanceof p.FormArray){const a=r.controls.findIndex(l=>l===e);-1!==a&&r.removeAt(a,i)}else if(r instanceof p.FormGroup){const a=O(n),l=a[a.length-1];r.get([l])===e&&r.removeControl(l,i)}e.setParent(null)}function U(n){return n.formControl?n.formControl:!1===n.shareFormControl?null:n.form?.get(O(n))}function H(n,t,e=!1){if((t=t||n.formControl)._fields||f(t,"_fields",[]),-1===t._fields.indexOf(n)&&t._fields.push(n),!n.formControl&&t){f(n,"formControl",t),t.setValidators(null),t.setAsyncValidators(null),n.props.disabled=!!n.props.disabled;const l=d(n,["props","disabled"],({firstChange:c,currentValue:h})=>{c||(h?n.formControl.disable():n.formControl.enable())});t instanceof p.FormControl&&t.registerOnDisabledChange(l.setValue)}if(!n.form||!u(n))return;let s=n.form;const r=O(n),i=_(n);(!E(t.value)||!E(i))&&t.value!==i&&t instanceof p.FormControl&&t.patchValue(i);for(let l=0;l<r.length-1;l++){const c=r[l];s.get([c])||s.setControl(c,new p.FormGroup({}),{emitEvent:e}),s=s.get([c])}const a=r[r.length-1];!n._hide&&s.get([a])!==t&&s.setControl(a,t,{emitEvent:e})}function D(n,t=!1){const e=n.status,s=n.value;n.updateValueAndValidity({emitEvent:!1,onlySelf:t}),e!==n.status&&n.statusChanges.emit(n.status),s!==n.value&&n.valueChanges.emit(n.value)}function Q(n){delete n?._fields,n.setValidators(null),n.setAsyncValidators(null),(n instanceof p.FormGroup||n instanceof p.FormArray)&&Object.values(n.controls).forEach(t=>Q(t))}let K=(()=>{class n{constructor(e){this.ref=e}ngOnChanges(){this.name=this.name||"formly-group"}}return n.\u0275fac=function(e){return new(e||n)(o.\u0275\u0275directiveInject(o.TemplateRef))},n.\u0275dir=o.\u0275\u0275defineDirective({type:n,selectors:[["","formlyTemplate",""]],inputs:{name:[0,"formlyTemplate","name"]},features:[o.\u0275\u0275NgOnChangesFeature]}),n})(),S=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275prov=o.\u0275\u0275defineInjectable({token:n,factory:n.\u0275fac}),n})(),B=(()=>{class n{constructor(e,s,r,i,a){this.config=e,this.renderer=s,this._elementRef=r,this.hostContainerRef=i,this.form=a,this.hostObservers=[],this.componentRefs=[],this.hooksObservers=[],this.detectFieldBuild=!1,this.valueChangesUnsubscribe=()=>{}}get containerRef(){return this.config.extras.renderFormlyFieldElement?this.viewContainerRef:this.hostContainerRef}get elementRef(){return this.config.extras.renderFormlyFieldElement?this._elementRef:this.componentRefs?.[0]instanceof o.ComponentRef?this.componentRefs[0].location:null}ngAfterContentInit(){this.triggerHook("afterContentInit")}ngAfterViewInit(){this.triggerHook("afterViewInit")}ngDoCheck(){this.detectFieldBuild&&this.field&&this.field.options&&this.render()}ngOnInit(){this.triggerHook("onInit")}ngOnChanges(e){this.triggerHook("onChanges",e)}ngOnDestroy(){this.resetRefs(this.field),this.hostObservers.forEach(e=>e.unsubscribe()),this.hooksObservers.forEach(e=>e()),this.valueChangesUnsubscribe(),this.triggerHook("onDestroy")}renderField(e,s,r=[]){if(this.containerRef===e&&(this.resetRefs(this.field),this.containerRef.clear(),r=this.field?.wrappers),r?.length>0){const[i,...a]=r,{component:l}=this.config.getWrapper(i),c=e.createComponent(l);this.attachComponentRef(c,s),d(c.instance,["fieldComponent"],({currentValue:h,previousValue:y,firstChange:Z})=>{if(h){if(y&&y._lContainer===h._lContainer)return;const k=y?y.detach():null;k&&!k.destroyed?h.insert(k):this.renderField(h,s,a),!Z&&c.changeDetectorRef.detectChanges()}})}else if(s?.type){const i=this.form?.templates?.find(l=>l.name===s.type);let a;if(i)a=e.createEmbeddedView(i.ref,{$implicit:s});else{const{component:l}=this.config.getType(s.type,!0);a=e.createComponent(l)}this.attachComponentRef(a,s)}}triggerHook(e,s){if(("onInit"===e||"onChanges"===e&&s.field&&!s.field.firstChange)&&(this.valueChangesUnsubscribe=this.fieldChanges(this.field)),this.field?.hooks?.[e]&&(!s||s.field)){const r=this.field.hooks[e](this.field);if((0,g.isObservable)(r)&&-1!==["onInit","afterContentInit","afterViewInit"].indexOf(e)){const i=r.subscribe();this.hooksObservers.push(()=>i.unsubscribe())}}"onChanges"===e&&s.field&&(this.resetRefs(s.field.previousValue),this.render())}attachComponentRef(e,s){this.componentRefs.push(e),s._componentRefs.push(e),e instanceof o.ComponentRef&&Object.assign(e.instance,{field:s})}render(){if(this.field){if(!this.field.options)return void(this.detectFieldBuild=!0);this.detectFieldBuild=!1,this.hostObservers.forEach(e=>e.unsubscribe()),this.hostObservers=[d(this.field,["hide"],({firstChange:e,currentValue:s})=>{const r=this.containerRef;!1===this.config.extras.lazyRender?(e&&this.renderField(r,this.field),(!e||e&&s)&&this.elementRef&&this.renderer.setStyle(this.elementRef.nativeElement,"display",s?"none":"")):s?(r.clear(),this.field.className&&this.renderer.removeAttribute(this.elementRef.nativeElement,"class")):(this.renderField(r,this.field),this.field.className&&this.renderer.setAttribute(this.elementRef.nativeElement,"class",this.field.className)),!e&&this.field.options.detectChanges(this.field)}),d(this.field,["className"],({firstChange:e,currentValue:s})=>{(!e||e&&s)&&(!this.config.extras.lazyRender||!0!==this.field.hide)&&this.elementRef&&this.renderer.setAttribute(this.elementRef.nativeElement,"class",s)}),...["touched","pristine","status"].map(e=>d(this.field,["formControl",e],({firstChange:s})=>!s&&N(this.field)))]}}resetRefs(e){e&&(e._componentRefs?e._componentRefs=e._componentRefs.filter(s=>-1===this.componentRefs.indexOf(s)):f(this.field,"_componentRefs",[])),this.componentRefs=[]}fieldChanges(e){if(this.valueChangesUnsubscribe(),!e)return()=>{};const s=[I(e,["props"],()=>e.options.detectChanges(e)),I(e.options,["formState"],()=>e.options.detectChanges(e))];for(const r of Object.keys(e._expressions)){const i=d(e,["_expressions",r],({currentValue:a,previousValue:l})=>{l?.subscription&&(l.subscription.unsubscribe(),l.subscription=null),(0,g.isObservable)(a.value$)&&(a.subscription=a.value$.subscribe())});s.push(()=>{e._expressions[r]?.subscription&&e._expressions[r].subscription.unsubscribe(),i.unsubscribe()})}for(const r of[["template"],["fieldGroupClassName"],["validation","show"]]){const i=d(e,r,({firstChange:a})=>!a&&e.options.detectChanges(e));s.push(()=>i.unsubscribe())}if(e.formControl&&!e.fieldGroup){const r=e.formControl;let i=r.valueChanges.pipe((0,b.distinctUntilChanged)((h,y)=>!(h!==y||Array.isArray(h)||F(h))));r.value!==_(e)&&(i=i.pipe((0,b.startWith)(r.value)));const{updateOn:a,debounce:l}=e.modelOptions;(!a||"change"===a)&&l?.default>0&&(i=r.valueChanges.pipe((0,b.debounceTime)(l.default)));const c=i.subscribe(h=>{r._fields?.length>1&&r instanceof p.FormControl&&r.patchValue(h,{emitEvent:!1,onlySelf:!0}),e.parsers?.forEach(y=>h=y(h)),h===e.formControl.value?(u(e)&&w(e,h),e.options.fieldChanges.next({value:h,field:e,type:"valueChanges"})):e.formControl.setValue(h)});s.push(()=>c.unsubscribe())}return()=>s.forEach(r=>r())}}return n.\u0275fac=function(e){return new(e||n)(o.\u0275\u0275directiveInject(C),o.\u0275\u0275directiveInject(o.Renderer2),o.\u0275\u0275directiveInject(o.ElementRef),o.\u0275\u0275directiveInject(o.ViewContainerRef),o.\u0275\u0275directiveInject(S,8))},n.\u0275cmp=o.\u0275\u0275defineComponent({type:n,selectors:[["formly-field"]],viewQuery:function(e,s){if(1&e&&o.\u0275\u0275viewQuery(X,7,o.ViewContainerRef),2&e){let r;o.\u0275\u0275queryRefresh(r=o.\u0275\u0275loadQuery())&&(s.viewContainerRef=r.first)}},inputs:{field:"field"},features:[o.\u0275\u0275NgOnChangesFeature],decls:2,vars:0,consts:[["container",""]],template:function(e,s){1&e&&o.\u0275\u0275template(0,q,0,0,"ng-template",null,0,o.\u0275\u0275templateRefExtractor)},styles:["[_nghost-%COMP%]:empty{display:none}"]}),n})(),le=(()=>{class n{constructor(e,s,r,i){this.builder=e,this.config=s,this.ngZone=r,this.fieldTemplates=i,this.modelChange=new o.EventEmitter,this.field={type:"formly-group"},this._modelChangeValue={},this.valueChangesUnsubscribe=()=>{}}set form(e){this.field.form=e}get form(){return this.field.form}set model(e){this.setField({model:e})}get model(){return this.field.model}set fields(e){this.setField({fieldGroup:e})}get fields(){return this.field.fieldGroup}set options(e){this.setField({options:e})}get options(){return this.field.options}set templates(e){this.fieldTemplates.templates=e}ngDoCheck(){"changeDetectionCheck"===this.config.extras.checkExpressionOn&&this.checkExpressionChange()}ngOnChanges(e){e.fields&&this.form&&Q(this.form),(e.fields||e.form||e.model&&this._modelChangeValue!==e.model.currentValue)&&(this.valueChangesUnsubscribe(),this.builder.build(this.field),this.valueChangesUnsubscribe=this.valueChanges())}ngOnDestroy(){this.valueChangesUnsubscribe()}checkExpressionChange(){this.field.options.checkExpressions?.(this.field)}valueChanges(){this.valueChangesUnsubscribe();const e=this.field.options.fieldChanges.pipe((0,b.filter)(({field:s,type:r})=>u(s)&&"valueChanges"===r),(0,b.switchMap)(()=>this.ngZone.onStable.asObservable().pipe((0,b.take)(1)))).subscribe(()=>this.ngZone.runGuarded(()=>{this.checkExpressionChange(),this.modelChange.emit(this._modelChangeValue=m(this.model))}));return()=>e.unsubscribe()}setField(e){this.config.extras.immutable?this.field={...this.field,...m(e)}:Object.keys(e).forEach(s=>this.field[s]=e[s])}}return n.\u0275fac=function(e){return new(e||n)(o.\u0275\u0275directiveInject(A),o.\u0275\u0275directiveInject(C),o.\u0275\u0275directiveInject(o.NgZone),o.\u0275\u0275directiveInject(S))},n.\u0275cmp=o.\u0275\u0275defineComponent({type:n,selectors:[["formly-form"]],contentQueries:function(e,s,r){if(1&e&&o.\u0275\u0275contentQuery(r,K,4),2&e){let i;o.\u0275\u0275queryRefresh(i=o.\u0275\u0275loadQuery())&&(s.templates=i)}},inputs:{form:"form",model:"model",fields:"fields",options:"options"},outputs:{modelChange:"modelChange"},features:[o.\u0275\u0275ProvidersFeature([A,S]),o.\u0275\u0275NgOnChangesFeature],decls:1,vars:1,consts:[[3,"field"]],template:function(e,s){1&e&&o.\u0275\u0275element(0,"formly-field",0),2&e&&o.\u0275\u0275property("field",s.field)},dependencies:[B],encapsulation:2,changeDetection:0}),n})(),ce=(()=>{class n{constructor(e,s,r){this.renderer=e,this.elementRef=s,this.uiAttributesCache={},this.uiEvents={listeners:[],events:["click","keyup","keydown","keypress","focus","blur","change"],callback:(i,a)=>{switch(i){case"focus":return this.onFocus(a);case"blur":return this.onBlur(a);case"change":return this.onChange(a);default:return this.props[i](this.field,a)}}},this.document=r}get props(){return this.field.props||{}}get fieldAttrElements(){return this.field?._elementRefs||[]}ngOnChanges(e){e.field&&(this.field.name&&this.setAttribute("name",this.field.name),this.uiEvents.listeners.forEach(s=>s()),this.uiEvents.events.forEach(s=>{(this.props?.[s]||-1!==["focus","blur","change"].indexOf(s))&&this.uiEvents.listeners.push(this.renderer.listen(this.elementRef.nativeElement,s,r=>this.uiEvents.callback(s,r)))}),this.props?.attributes&&d(this.field,["props","attributes"],({currentValue:s,previousValue:r})=>{r&&Object.keys(r).forEach(i=>this.removeAttribute(i)),s&&Object.keys(s).forEach(i=>{null!=s[i]&&this.setAttribute(i,s[i])})}),this.detachElementRef(e.field.previousValue),this.attachElementRef(e.field.currentValue),1===this.fieldAttrElements.length&&(!this.id&&this.field.id&&this.setAttribute("id",this.field.id),this.focusObserver=d(this.field,["focus"],({currentValue:s})=>{this.toggleFocus(s)}))),e.id&&this.setAttribute("id",this.id)}ngDoCheck(){if(!this.uiAttributes){const e=this.elementRef.nativeElement;this.uiAttributes=[...V,"tabindex","placeholder","readonly","disabled","step"].filter(s=>!e.hasAttribute||!e.hasAttribute(s))}this.uiAttributes.forEach(e=>{const s=this.props[e];this.uiAttributesCache[e]!==s&&(!this.props.attributes||!this.props.attributes.hasOwnProperty(e.toLowerCase()))&&(this.uiAttributesCache[e]=s,s||0===s?this.setAttribute(e,!0===s?e:`${s}`):this.removeAttribute(e))})}ngOnDestroy(){this.uiEvents.listeners.forEach(e=>e()),this.detachElementRef(this.field),this.focusObserver?.unsubscribe()}toggleFocus(e){const s=this.fieldAttrElements?this.fieldAttrElements[0]:null;if(!s||!s.nativeElement.focus)return;const r=!!this.document.activeElement&&this.fieldAttrElements.some(({nativeElement:i})=>this.document.activeElement===i||i.contains(this.document.activeElement));e&&!r?Promise.resolve().then(()=>s.nativeElement.focus()):!e&&r&&Promise.resolve().then(()=>s.nativeElement.blur())}onFocus(e){this.focusObserver?.setValue(!0),this.props.focus?.(this.field,e)}onBlur(e){this.focusObserver?.setValue(!1),this.props.blur?.(this.field,e)}onHostChange(e){e instanceof Event||this.onChange(e)}onChange(e){this.props.change?.(this.field,e),this.field.formControl?.markAsDirty()}attachElementRef(e){e&&(-1===e._elementRefs?.indexOf(this.elementRef)?e._elementRefs.push(this.elementRef):f(e,"_elementRefs",[this.elementRef]))}detachElementRef(e){const s=e?._elementRefs?this.fieldAttrElements.indexOf(this.elementRef):-1;-1!==s&&e._elementRefs.splice(s,1)}setAttribute(e,s){this.renderer.setAttribute(this.elementRef.nativeElement,e,s)}removeAttribute(e){this.renderer.removeAttribute(this.elementRef.nativeElement,e)}}return n.\u0275fac=function(e){return new(e||n)(o.\u0275\u0275directiveInject(o.Renderer2),o.\u0275\u0275directiveInject(o.ElementRef),o.\u0275\u0275directiveInject(M.DOCUMENT))},n.\u0275dir=o.\u0275\u0275defineDirective({type:n,selectors:[["","formlyAttributes",""]],hostBindings:function(e,s){1&e&&o.\u0275\u0275listener("change",function(i){return s.onHostChange(i)})},inputs:{field:[0,"formlyAttributes","field"],id:"id"},features:[o.\u0275\u0275NgOnChangesFeature]}),n})(),P=(()=>{class n{get model(){return this.field.model}get form(){return this.field.form}get options(){return this.field.options}get key(){return this.field.key}get formControl(){return this.field.formControl}get props(){return this.field.props||{}}get to(){return this.props}get showError(){return this.options.showError(this)}get id(){return this.field.id}get formState(){return this.options.formState||{}}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275dir=o.\u0275\u0275defineDirective({type:n,inputs:{field:"field"}}),n})(),z=(()=>{class n extends P{}return n.\u0275fac=(()=>{let t;return function(s){return(t||(t=o.\u0275\u0275getInheritedFactory(n)))(s||n)}})(),n.\u0275cmp=o.\u0275\u0275defineComponent({type:n,selectors:[["formly-group"]],hostVars:2,hostBindings:function(e,s){2&e&&o.\u0275\u0275classMap(s.field.fieldGroupClassName||"")},features:[o.\u0275\u0275InheritDefinitionFeature],ngContentSelectors:ee,decls:2,vars:1,consts:[[3,"field",4,"ngFor","ngForOf"],[3,"field"]],template:function(e,s){1&e&&(o.\u0275\u0275projectionDef(),o.\u0275\u0275template(0,te,1,1,"formly-field",0),o.\u0275\u0275projection(1)),2&e&&o.\u0275\u0275property("ngForOf",s.field.fieldGroup)},dependencies:[B,M.NgForOf],encapsulation:2,changeDetection:0}),n})(),pe=(()=>{class n{constructor(e){this.config=e}ngOnChanges(){const e=V.map(s=>`templateOptions.${s}`);this.errorMessage$=(0,g.merge)(this.field.formControl.statusChanges,this.field.options?this.field.options.fieldChanges.pipe((0,b.filter)(({field:s,type:r,property:i})=>s===this.field&&"expressionChanges"===r&&(-1!==i.indexOf("validation")||-1!==e.indexOf(i)))):(0,g.of)(null)).pipe((0,b.startWith)(null),(0,b.switchMap)(()=>(0,g.isObservable)(this.errorMessage)?this.errorMessage:(0,g.of)(this.errorMessage)))}get errorMessage(){const e=this.field.formControl;for(const s in e.errors)if(e.errors.hasOwnProperty(s)){let r=this.config.getValidatorMessage(s);if(F(e.errors[s])){if(e.errors[s].errorPath)return;e.errors[s].message&&(r=e.errors[s].message)}return this.field.validation?.messages?.[s]&&(r=this.field.validation.messages[s]),this.field.validators?.[s]?.message&&(r=this.field.validators[s].message),this.field.asyncValidators?.[s]?.message&&(r=this.field.asyncValidators[s].message),"function"==typeof r?r(e.errors[s],this.field):r}}}return n.\u0275fac=function(e){return new(e||n)(o.\u0275\u0275directiveInject(C))},n.\u0275cmp=o.\u0275\u0275defineComponent({type:n,selectors:[["formly-validation-message"]],inputs:{field:"field"},features:[o.\u0275\u0275NgOnChangesFeature],decls:2,vars:3,template:function(e,s){1&e&&(o.\u0275\u0275text(0),o.\u0275\u0275pipe(1,"async")),2&e&&o.\u0275\u0275textInterpolate(o.\u0275\u0275pipeBind1(1,1,s.errorMessage$))},dependencies:[M.AsyncPipe],encapsulation:2,changeDetection:0}),n})(),he=(()=>{class n extends P{onPopulate(e){!e.formControl&&u(e)&&H(e,U(e)||new p.FormArray([],{updateOn:e.modelOptions.updateOn})),e.fieldGroup=e.fieldGroup||[];const s=Array.isArray(e.model)?e.model.length:0;if(e.fieldGroup.length>s)for(let r=e.fieldGroup.length-1;r>=s;--r)G(e.fieldGroup[r],!0),e.fieldGroup.splice(r,1);for(let r=e.fieldGroup.length;r<s;r++){const i={...m("function"==typeof e.fieldArray?e.fieldArray(e):e.fieldArray),key:`${r}`};e.fieldGroup.push(i)}}add(e,s,{markAsDirty:r}={markAsDirty:!0}){e=e??this.field.fieldGroup.length,this.model||w(this.field,[]),this.model.splice(e,0,s?m(s):void 0),this._build(),r&&this.formControl.markAsDirty()}remove(e,{markAsDirty:s}={markAsDirty:!0}){this.model.splice(e,1);const r=this.field.fieldGroup[e];this.field.fieldGroup.splice(e,1),this.field.fieldGroup.forEach((i,a)=>i.key=`${a}`),G(r,!0),this._build(),s&&this.formControl.markAsDirty()}_build(){(this.field.formControl._fields??[this.field]).forEach(s=>this.options.build(s)),this.options.fieldChanges.next({field:this.field,value:_(this.field),type:"valueChanges"})}}return n.\u0275fac=(()=>{let t;return function(s){return(t||(t=o.\u0275\u0275getInheritedFactory(n)))(s||n)}})(),n.\u0275dir=o.\u0275\u0275defineDirective({type:n,features:[o.\u0275\u0275InheritDefinitionFeature]}),n})(),ue=(()=>{class n extends P{set _staticContent(e){this.fieldComponent=e}}return n.\u0275fac=(()=>{let t;return function(s){return(t||(t=o.\u0275\u0275getInheritedFactory(n)))(s||n)}})(),n.\u0275dir=o.\u0275\u0275defineDirective({type:n,viewQuery:function(e,s){if(1&e&&(o.\u0275\u0275viewQuery($,5,o.ViewContainerRef),o.\u0275\u0275viewQuery($,7,o.ViewContainerRef)),2&e){let r;o.\u0275\u0275queryRefresh(r=o.\u0275\u0275loadQuery())&&(s.fieldComponent=r.first),o.\u0275\u0275queryRefresh(r=o.\u0275\u0275loadQuery())&&(s._staticContent=r.first)}},features:[o.\u0275\u0275InheritDefinitionFeature]}),n})(),fe=(()=>{class n extends P{constructor(e){super(),this.sanitizer=e,this.innerHtml={}}get template(){return this.field&&this.field.template!==this.innerHtml.template&&(this.innerHtml={template:this.field.template,content:this.props.safeHtml?this.sanitizer.bypassSecurityTrustHtml(this.field.template):this.field.template}),this.innerHtml.content}}return n.\u0275fac=function(e){return new(e||n)(o.\u0275\u0275directiveInject(J.DomSanitizer))},n.\u0275cmp=o.\u0275\u0275defineComponent({type:n,selectors:[["formly-template"]],features:[o.\u0275\u0275InheritDefinitionFeature],decls:1,vars:1,consts:[[3,"innerHtml"]],template:function(e,s){1&e&&o.\u0275\u0275element(0,"div",0),2&e&&o.\u0275\u0275property("innerHtml",s.template,o.\u0275\u0275sanitizeHtml)},encapsulation:2,changeDetection:0}),n})();class ge{onPopulate(t){if(t._expressions)return;f(t,"_expressions",{}),d(t,["hide"],({currentValue:s,firstChange:r})=>{f(t,"_hide",!!s),(!r||r&&!0===s)&&(t.props.hidden=s,t.options._hiddenFieldsForCheck.push(t))}),t.hideExpression&&d(t,["hideExpression"],({currentValue:s})=>{t._expressions.hide=this.parseExpressions(t,"hide","boolean"==typeof s?()=>s:s)});const e=(s,r)=>{"string"==typeof r||j(r)?t._expressions[s]=this.parseExpressions(t,s,r):r instanceof g.Observable&&(t._expressions[s]={value$:r.pipe((0,b.tap)(i=>{this.evalExpr(t,s,i),t.options.detectChanges(t)}))})};t.expressions=t.expressions||{};for(const s of Object.keys(t.expressions))d(t,["expressions",s],({currentValue:r})=>{e(s,j(r)?(...i)=>r(t,i[3]):r)});t.expressionProperties=t.expressionProperties||{};for(const s of Object.keys(t.expressionProperties))d(t,["expressionProperties",s],({currentValue:r})=>e(s,r))}postPopulate(t){if(!t.parent&&!t.options.checkExpressions){let e=!1;t.options.checkExpressions=(s,r)=>{if(e)return;e=!0;const i=this.checkExpressions(s,r),a=t.options;a._hiddenFieldsForCheck.sort(l=>l.hide?-1:1).forEach(l=>this.changeHideState(l,l.hide,!r)),a._hiddenFieldsForCheck=[],i&&(this.checkExpressions(t),t.options&&t.options.detectChanges&&t.options.detectChanges(t)),e=!1},t.options._checkField=(s,r)=>{console.warn("Formly: 'options._checkField' is deprecated since v6.0, use 'options.checkExpressions' instead."),t.options.checkExpressions(s,r)}}}parseExpressions(t,e,s){let r,i;if(t.parent&&["hide","props.disabled"].includes(e)){const a=l=>"hide"===e?l.hide:l.props.disabled;r=()=>{let l=t.parent;for(;l.parent&&!a(l);)l=l.parent;return a(l)}}return"string"==typeof(s=s||(()=>!1))&&(s=function de(n,t){try{return Function(...t,`return ${n};`)}catch(e){console.error(e)}}(s,["model","formState","field"])),{callback:a=>{try{const l=function me(n,t,e){return"function"==typeof n?n.apply(t,e):!!n}(r?(...c)=>r(t)||s(...c):s,{field:t},[t.model,t.options.formState,t,a]);return!(!a&&(i===l||F(l)&&!(0,g.isObservable)(l)&&JSON.stringify(l)===JSON.stringify(i))||(i=l,this.evalExpr(t,e,l),0))}catch(l){throw l.message=`[Formly Error] [Expression "${e}"] ${l.message}`,l}}}}checkExpressions(t,e=!1){if(!t)return!1;let s=!1;if(t._expressions)for(const r of Object.keys(t._expressions))t._expressions[r].callback?.(e)&&(s=!0);return t.fieldGroup?.forEach(r=>this.checkExpressions(r,e)&&(s=!0)),s}changeDisabledState(t,e){t.fieldGroup&&t.fieldGroup.filter(s=>!s._expressions.hasOwnProperty("props.disabled")).forEach(s=>this.changeDisabledState(s,e)),u(t)&&t.props.disabled!==e&&(t.props.disabled=e)}changeHideState(t,e,s){if(t.fieldGroup&&t.fieldGroup.filter(r=>!r._expressions.hide).forEach(r=>this.changeHideState(r,e,s)),t.formControl&&u(t)){f(t,"_hide",!(!e&&!t.hide));const r=t.formControl;r._fields?.length>1&&D(r),!0!==e||r._fields&&!r._fields.every(i=>!!i._hide)?!1===e&&(t.resetOnHide&&!T(t.defaultValue)&&T(_(t))&&w(t,t.defaultValue),H(t,void 0,!0),t.resetOnHide&&t.fieldArray&&t.fieldGroup?.length!==t.model?.length&&t.options.build(t)):(G(t,!0),s&&t.resetOnHide&&(w(t,void 0),t.formControl.reset({value:void 0,disabled:t.formControl.disabled}),t.options.fieldChanges.next({value:void 0,field:t,type:"valueChanges"}),t.fieldGroup&&t.formControl instanceof p.FormArray&&(t.fieldGroup.length=0)))}t.options.fieldChanges&&t.options.fieldChanges.next({field:t,type:"hidden",value:e})}evalExpr(t,e,s){try{let r=t;const i=this._evalExpressionPath(t,e),a=i.length-1;for(let l=0;l<a;l++)r=r[i[l]];r[i[a]]=s}catch(r){throw r.message=`[Formly Error] [Expression "${e}"] ${r.message}`,r}if(["templateOptions.disabled","props.disabled"].includes(e)&&u(t)&&this.changeDisabledState(t,s),0===e.indexOf("model.")){const r=e.replace(/^model\./,""),i=t?.key===r?t.formControl:t.form.get(r);i&&(!E(i.value)||!E(s))&&i.value!==s&&i.patchValue(s)}this.emitExpressionChanges(t,e,s)}emitExpressionChanges(t,e,s){t.options.fieldChanges&&t.options.fieldChanges.next({field:t,type:"expressionChanges",property:e,value:s})}_evalExpressionPath(t,e){if(t._expressions[e]&&t._expressions[e].paths)return t._expressions[e].paths;let s=[];return-1===e.indexOf("[")?s=e.split("."):e.split(/[[\]]{1,2}/).filter(r=>r).forEach(r=>{const i=r.match(/['|"](.*?)['|"]/);i?s.push(i[1]):s.push(...r.split(".").filter(a=>a))}),t._expressions[e]&&(t._expressions[e].paths=s),s}}class ye{constructor(t){this.config=t}onPopulate(t){this.initFieldValidation(t,"validators"),this.initFieldValidation(t,"asyncValidators")}initFieldValidation(t,e){const s=[];if("validators"===e&&!(t.hasOwnProperty("fieldGroup")&&!u(t))&&s.push(this.getPredefinedFieldValidation(t)),t[e])for(const r of Object.keys(t[e]))"validation"===r?s.push(...t[e].validation.map(i=>this.wrapNgValidatorFn(t,i))):s.push(this.wrapNgValidatorFn(t,t[e][r],r));f(t,"_"+e,s)}getPredefinedFieldValidation(t){let e=[];return V.forEach(s=>d(t,["props",s],({currentValue:r,firstChange:i})=>{e=e.filter(a=>a!==s),null!=r&&!1!==r&&e.push(s),!i&&t.formControl&&D(t.formControl)})),s=>0===e.length?null:p.Validators.compose(e.map(r=>()=>{const i=t.props[r];switch(r){case"required":return p.Validators.required(s);case"pattern":return p.Validators.pattern(i)(s);case"minLength":const a=p.Validators.minLength(i)(s),l=this.config.getValidatorMessage("minlength")||t.validation?.messages?.minlength?"minlength":"minLength";return a?{[l]:a.minlength}:null;case"maxLength":const c=p.Validators.maxLength(i)(s),h=this.config.getValidatorMessage("maxlength")||t.validation?.messages?.maxlength?"maxlength":"maxLength";return c?{[h]:c.maxlength}:null;case"min":return p.Validators.min(i)(s);case"max":return p.Validators.max(i)(s);default:return null}}))(s)}wrapNgValidatorFn(t,e,s){let r;if("string"==typeof e&&(r=m(this.config.getValidator(e))),"object"==typeof e&&e.name&&(r=m(this.config.getValidator(e.name)),e.options&&(r.options=e.options)),"object"==typeof e&&e.expression){const{expression:i,...a}=e;r={name:s,validation:i,options:Object.keys(a).length>0?a:null}}return"function"==typeof e&&(r={name:s,validation:e}),i=>{const a=r.validation(i,t,r.options);return function ae(n){return!!n&&"function"==typeof n.then}(a)?a.then(l=>this.handleAsyncResult(t,s?!!l:l,r)):(0,g.isObservable)(a)?a.pipe((0,b.map)(l=>this.handleAsyncResult(t,s?!!l:l,r))):this.handleResult(t,s?!!a:a,r)}}handleAsyncResult(t,e,s){return t.options.detectChanges(t),this.handleResult(t,e,s)}handleResult(t,e,{name:s,options:r}){"boolean"==typeof e&&(e=e?null:{[s]:r||!0});const i=t.formControl;return i?._childrenErrors?.[s]?.(),F(e)&&Object.keys(e).forEach(a=>{const l=e[a].errorPath?e[a].errorPath:r?.errorPath,c=l?t.formControl.get(l):null;if(c){const{errorPath:h,...y}=e[a];c.setErrors({...c.errors||{},[a]:y}),!i._childrenErrors&&f(i,"_childrenErrors",{}),i._childrenErrors[a]=()=>{const{[a]:Z,...k}=c.errors||{};c.setErrors(0===Object.keys(k).length?null:k)}}}),e}}class be{prePopulate(t){this.root||(this.root=t),t.parent&&Object.defineProperty(t,"form",{get:()=>t.parent.formControl,configurable:!0})}onPopulate(t){t.hasOwnProperty("fieldGroup")&&!u(t)?f(t,"formControl",t.form):this.addFormControl(t)}postPopulate(t){if(this.root===t&&(this.root=null,this.setValidators(t)&&t.parent)){let s=t.parent;for(;s;)(u(s)||!s.parent)&&D(s.formControl,!0),s=s.parent}}addFormControl(t){let e=U(t);if(!e){const s={updateOn:t.modelOptions.updateOn};if(t.fieldGroup)e=new p.FormGroup({},s);else{const r=u(t)?_(t):t.defaultValue;e=new p.FormControl({value:r,disabled:!1},{...s,initialValueIsDefault:!0})}}H(t,e)}setValidators(t,e=!1){!1===e&&u(t)&&t.props?.disabled&&(e=!0);let s=!1;if(t.fieldGroup?.forEach(r=>r&&this.setValidators(r,e)&&(s=!0)),u(t)||!t.parent||!u(t)&&!t.fieldGroup){const{formControl:r}=t;if(r&&(u(t)&&r instanceof p.FormControl&&(e&&r.enabled&&(r.disable({emitEvent:!1,onlySelf:!0}),s=!0),!e&&r.disabled&&(r.enable({emitEvent:!1,onlySelf:!0}),s=!0)),(null===r.validator||null===r.asyncValidator)&&(r.setValidators(()=>{const i=p.Validators.compose(this.mergeValidators(t,"_validators"));return i?i(r):null}),r.setAsyncValidators(()=>{const i=p.Validators.composeAsync(this.mergeValidators(t,"_asyncValidators"));return i?i(r):(0,g.of)(null)}),s=!0),s)){D(r,!0);let i=r.parent;for(let a=1;a<O(t).length;a++)i&&(D(i,!0),i=i.parent)}}return s}mergeValidators(t,e){const s=[],r=t.formControl;return r?._fields?.length>1?r._fields.filter(i=>!i._hide).forEach(i=>s.push(...i[e])):t[e]&&s.push(...t[e]),t.fieldGroup&&t.fieldGroup.filter(i=>i?.fieldGroup&&!u(i)).forEach(i=>s.push(...this.mergeValidators(i,e))),s}}class Fe{constructor(t){this.config=t,this.formId=0}prePopulate(t){const e=t.parent;this.initRootOptions(t),this.initFieldProps(t),e&&(Object.defineProperty(t,"options",{get:()=>e.options,configurable:!0}),Object.defineProperty(t,"model",{get:()=>u(t)&&t.fieldGroup?_(t):e.model,configurable:!0})),Object.defineProperty(t,"get",{value:s=>W(t,s),configurable:!0}),this.getFieldComponentInstance(t).prePopulate?.(t)}onPopulate(t){this.initFieldOptions(t),this.getFieldComponentInstance(t).onPopulate?.(t),t.fieldGroup&&t.fieldGroup.forEach((e,s)=>{e&&(Object.defineProperty(e,"parent",{get:()=>t,configurable:!0}),Object.defineProperty(e,"index",{get:()=>s,configurable:!0})),this.formId++})}postPopulate(t){this.getFieldComponentInstance(t).postPopulate?.(t)}initFieldProps(t){t.props??(t.props=t.templateOptions),Object.defineProperty(t,"templateOptions",{get:()=>t.props,set:e=>t.props=e,configurable:!0})}initRootOptions(t){if(t.parent)return;const e=t.options;t.options.formState=t.options.formState||{},e.showError||(e.showError=this.config.extras.showError),e.fieldChanges||f(e,"fieldChanges",new g.Subject),e._hiddenFieldsForCheck||(e._hiddenFieldsForCheck=[]),e._markForCheck=s=>{console.warn("Formly: 'options._markForCheck' is deprecated since v6.0, use 'options.detectChanges' instead."),e.detectChanges(s)},e.detectChanges=s=>{s._componentRefs&&(s.options.checkExpressions(s),N(s)),s.fieldGroup?.forEach(r=>r&&e.detectChanges(r))},e.resetModel=s=>{s=m(s??e._initialModel),t.model&&(Object.keys(t.model).forEach(r=>delete t.model[r]),Object.assign(t.model,s||{})),e.build(t),t.form.reset(t.model),e.parentForm&&e.parentForm.control===t.formControl&&(e.parentForm.submitted=!1)},e.updateInitialValue=s=>e._initialModel=m(s??t.model),t.options.updateInitialValue()}initFieldOptions(t){if(x(t,{id:re(`formly_${this.formId}`,t,t.index),hooks:{},modelOptions:{},validation:{messages:{}},props:t.type&&u(t)?{label:"",placeholder:"",disabled:!1}:{}}),this.config.extras.resetFieldOnHide&&!1!==t.resetOnHide&&(t.resetOnHide=!0),"formly-template"!==t.type&&(t.template||t.expressions?.template||t.expressionProperties?.template)&&(t.type="formly-template"),!t.type&&t.fieldGroup&&(t.type="formly-group"),t.type&&this.config.getMergedField(t),u(t)&&!T(t.defaultValue)&&T(_(t))){const e=r=>r.hide||r.expressions?.hide||r.hideExpression;let s=!t.resetOnHide||!e(t);if(!e(t)&&t.resetOnHide){let r=t.parent;for(;r&&!e(r);)r=r.parent;s=!r||!e(r)}s&&w(t,t.defaultValue)}t.wrappers=t.wrappers||[]}getFieldComponentInstance(t){const e=()=>{let s=this.config.resolveFieldTypeRef(t);const r=t._componentRefs?.slice(-1)[0];return r instanceof o.ComponentRef&&r?.componentType===s?.componentType&&(s=r),s?.instance};return t._proxyInstance||f(t,"_proxyInstance",new Proxy({},{get:(s,r)=>e()?.[r],set:(s,r,i)=>e()[r]=i})),t._proxyInstance}}function Y(n){return{types:[{name:"formly-group",component:z},{name:"formly-template",component:fe}],extensions:[{name:"core",extension:new Fe(n),priority:-250},{name:"field-validation",extension:new ye(n),priority:-200},{name:"field-form",extension:new be,priority:-150},{name:"field-expression",extension:new ge,priority:-100}]}}let Ce=(()=>{class n{constructor(e,s=[]){s&&s.forEach(r=>e.addConfig(r))}static forRoot(e={}){return{ngModule:n,providers:[{provide:R,multi:!0,useFactory:Y,deps:[C]},{provide:R,useValue:e,multi:!0},C,A]}}static forChild(e={}){return{ngModule:n,providers:[{provide:R,multi:!0,useFactory:Y,deps:[C]},{provide:R,useValue:e,multi:!0},A]}}}return n.\u0275fac=function(e){return new(e||n)(o.\u0275\u0275inject(C),o.\u0275\u0275inject(R,8))},n.\u0275mod=o.\u0275\u0275defineNgModule({type:n}),n.\u0275inj=o.\u0275\u0275defineInjector({imports:[[M.CommonModule]]}),n})()}}]);