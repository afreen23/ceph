(self.webpackChunkceph_dashboard=self.webpackChunkceph_dashboard||[]).push([[3779],{3779:(P,d,o)=>{o.r(d),o.d(d,{FileComponent:()=>m,FileUploader:()=>M,FileUploaderModule:()=>z});var e=o(87536),v=o(53648),p=o(65530),s=o(91974),_=o(64514),f=o(33386),u=o(98920);function x(n,r){1&n&&(e.\u0275\u0275namespaceSVG(),e.\u0275\u0275element(0,"svg",8))}function h(n,r){if(1&n){const t=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"span",4),e.\u0275\u0275template(1,x,1,0,"svg",5),e.\u0275\u0275elementStart(2,"button",6),e.\u0275\u0275listener("click",function(){e.\u0275\u0275restoreView(t);const l=e.\u0275\u0275nextContext();return e.\u0275\u0275resetView(l.remove.emit())})("keyup.enter",function(){e.\u0275\u0275restoreView(t);const l=e.\u0275\u0275nextContext();return e.\u0275\u0275resetView(l.remove.emit())})("keyup.space",function(){e.\u0275\u0275restoreView(t);const l=e.\u0275\u0275nextContext();return e.\u0275\u0275resetView(l.remove.emit())}),e.\u0275\u0275namespaceSVG(),e.\u0275\u0275element(3,"svg",7),e.\u0275\u0275elementEnd()()}if(2&n){const t=e.\u0275\u0275nextContext();e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf",t.isInvalidText),e.\u0275\u0275advance(),e.\u0275\u0275attribute("aria-label",t.translations.REMOVE_BUTTON)}}function I(n,r){1&n&&(e.\u0275\u0275elementStart(0,"span")(1,"div",9),e.\u0275\u0275element(2,"cds-loading",10),e.\u0275\u0275elementEnd()())}function C(n,r){if(1&n&&(e.\u0275\u0275elementStart(0,"span",4),e.\u0275\u0275namespaceSVG(),e.\u0275\u0275element(1,"svg",11),e.\u0275\u0275elementEnd()),2&n){const t=e.\u0275\u0275nextContext();e.\u0275\u0275advance(),e.\u0275\u0275property("ariaLabel",t.translations.CHECKMARK)}}function b(n,r){if(1&n&&(e.\u0275\u0275elementStart(0,"div",12)(1,"div",13),e.\u0275\u0275text(2),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(3,"p",14),e.\u0275\u0275text(4),e.\u0275\u0275elementEnd()()),2&n){const t=e.\u0275\u0275nextContext();e.\u0275\u0275advance(2),e.\u0275\u0275textInterpolate(t.fileItem.invalidTitle),e.\u0275\u0275advance(2),e.\u0275\u0275textInterpolate(t.fileItem.invalidText)}}const T=["fileInput"],F=n=>({"cds--file-browse-btn--disabled":n}),y=n=>({"cds--file__drop-container--drag-over":n});function E(n,r){if(1&n&&(e.\u0275\u0275elementContainerStart(0),e.\u0275\u0275text(1),e.\u0275\u0275elementContainerEnd()),2&n){const t=e.\u0275\u0275nextContext(3);e.\u0275\u0275advance(),e.\u0275\u0275textInterpolate(t.dropText)}}function w(n,r){}function U(n,r){if(1&n&&e.\u0275\u0275template(0,w,0,0,"ng-template",14),2&n){const t=e.\u0275\u0275nextContext(3);e.\u0275\u0275property("ngTemplateOutlet",t.dropText)}}function k(n,r){if(1&n){const t=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"label",11),e.\u0275\u0275listener("keyup.enter",function(){e.\u0275\u0275restoreView(t),e.\u0275\u0275nextContext();const l=e.\u0275\u0275reference(9);return e.\u0275\u0275resetView(l.click())})("keyup.space",function(){e.\u0275\u0275restoreView(t),e.\u0275\u0275nextContext();const l=e.\u0275\u0275reference(9);return e.\u0275\u0275resetView(l.click())}),e.\u0275\u0275elementStart(1,"div",12),e.\u0275\u0275listener("click",function(){e.\u0275\u0275restoreView(t),e.\u0275\u0275nextContext();const l=e.\u0275\u0275reference(9);return e.\u0275\u0275resetView(l.click())})("dragover",function(l){e.\u0275\u0275restoreView(t);const a=e.\u0275\u0275nextContext(2);return e.\u0275\u0275resetView(a.onDragOver(l))})("dragleave",function(l){e.\u0275\u0275restoreView(t);const a=e.\u0275\u0275nextContext(2);return e.\u0275\u0275resetView(a.onDragLeave(l))})("drop",function(l){e.\u0275\u0275restoreView(t);const a=e.\u0275\u0275nextContext(2);return e.\u0275\u0275resetView(a.onDrop(l))}),e.\u0275\u0275template(2,E,2,1,"ng-container",13)(3,U,1,1,null,13),e.\u0275\u0275elementEnd()()}if(2&n){const t=e.\u0275\u0275nextContext(2);e.\u0275\u0275property("ngClass",e.\u0275\u0275pureFunction1(5,F,t.disabled)),e.\u0275\u0275advance(),e.\u0275\u0275property("ngClass",e.\u0275\u0275pureFunction1(7,y,t.dragOver)),e.\u0275\u0275attribute("for",t.fileUploaderId),e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf",!t.isTemplate(t.dropText)),e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf",t.isTemplate(t.dropText))}}function S(n,r){if(1&n){const t=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"button",15),e.\u0275\u0275listener("click",function(){e.\u0275\u0275restoreView(t),e.\u0275\u0275nextContext();const l=e.\u0275\u0275reference(9);return e.\u0275\u0275resetView(l.click())}),e.\u0275\u0275text(1),e.\u0275\u0275elementEnd()}if(2&n){const t=e.\u0275\u0275nextContext(2);e.\u0275\u0275property("cdsButton",t.buttonType)("size",t.size)("disabled",t.disabled),e.\u0275\u0275attribute("for",t.fileUploaderId),e.\u0275\u0275advance(),e.\u0275\u0275textInterpolate1(" ",t.buttonText," ")}}function O(n,r){if(1&n){const t=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementContainerStart(0),e.\u0275\u0275elementStart(1,"cds-file",16),e.\u0275\u0275listener("remove",function(){const l=e.\u0275\u0275restoreView(t).$implicit,a=e.\u0275\u0275nextContext(2);return e.\u0275\u0275resetView(a.removeFile(l))}),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementContainerEnd()}if(2&n){const t=r.$implicit,i=e.\u0275\u0275nextContext(2);e.\u0275\u0275advance(),e.\u0275\u0275property("fileItem",t)("size",i.fileItemSize)}}function V(n,r){if(1&n){const t=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementContainerStart(0),e.\u0275\u0275elementStart(1,"label",3),e.\u0275\u0275text(2),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(3,"p",4),e.\u0275\u0275text(4),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(5,"div",5),e.\u0275\u0275template(6,k,4,9,"label",6)(7,S,2,5,"button",7),e.\u0275\u0275elementStart(8,"input",8,1),e.\u0275\u0275listener("change",function(){e.\u0275\u0275restoreView(t);const l=e.\u0275\u0275nextContext();return e.\u0275\u0275resetView(l.onFilesAdded())}),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(10,"div",9),e.\u0275\u0275template(11,O,2,2,"ng-container",10),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementContainerEnd()}if(2&n){const t=e.\u0275\u0275nextContext();e.\u0275\u0275advance(),e.\u0275\u0275property("for",t.fileUploaderId),e.\u0275\u0275advance(),e.\u0275\u0275textInterpolate(t.title),e.\u0275\u0275advance(2),e.\u0275\u0275textInterpolate(t.description),e.\u0275\u0275advance(2),e.\u0275\u0275property("ngIf",t.drop),e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf",!t.drop),e.\u0275\u0275advance(),e.\u0275\u0275property("accept",t.accept)("id",t.fileUploaderId)("multiple",t.multiple)("disabled",t.disabled),e.\u0275\u0275advance(3),e.\u0275\u0275property("ngForOf",t.files)}}function D(n,r){1&n&&e.\u0275\u0275element(0,"div",17)(1,"div",18)(2,"button",19)}let m=(()=>{class n{constructor(t){this.i18n=t,this.translations=this.i18n.get().FILE_UPLOADER,this.size="lg",this.remove=new e.EventEmitter,this.selectedFile=!0}get isInvalidText(){return this.fileItem.invalidText}get fileSizeSmall(){return"sm"===this.size}get fileSizeMedium(){return"md"===this.size}get fileSizeLarge(){return"lg"===this.size}ngOnDestroy(){this.remove.emit()}}return n.\u0275fac=function(t){return new(t||n)(e.\u0275\u0275directiveInject(p.I18n))},n.\u0275cmp=e.\u0275\u0275defineComponent({type:n,selectors:[["cds-file"],["ibm-file"]],hostVars:10,hostBindings:function(t,i){2&t&&e.\u0275\u0275classProp("cds--file__selected-file",i.selectedFile)("cds--file__selected-file--invalid",i.isInvalidText)("cds--file__selected-file--sm",i.fileSizeSmall)("cds--file__selected-file--md",i.fileSizeMedium)("cds--file__selected-file--lg",i.fileSizeLarge)},inputs:{translations:"translations",fileItem:"fileItem",size:"size"},outputs:{remove:"remove"},decls:6,vars:6,consts:[[1,"cds--file-filename",3,"title"],["class","cds--file__state-container",4,"ngIf"],[4,"ngIf"],["class","cds--form-requirement","role","alert",4,"ngIf"],[1,"cds--file__state-container"],["cdsIcon","warning--filled","class","cds--file--invalid","size","16",4,"ngIf"],["type","button","tabindex","0",1,"cds--file-close",3,"click","keyup.enter","keyup.space"],["cdsIcon","close","size","16"],["cdsIcon","warning--filled","size","16",1,"cds--file--invalid"],[1,"cds--inline-loading__animation"],["size","sm"],["cdsIcon","checkmark--filled","size","16",1,"cds--file-complete",3,"ariaLabel"],["role","alert",1,"cds--form-requirement"],[1,"cds--form-requirement__title"],[1,"cds--form-requirement__supplement"]],template:function(t,i){1&t&&(e.\u0275\u0275elementStart(0,"p",0),e.\u0275\u0275text(1),e.\u0275\u0275elementEnd(),e.\u0275\u0275template(2,h,4,2,"span",1)(3,I,3,0,"span",2)(4,C,2,1,"span",1)(5,b,5,2,"div",3)),2&t&&(e.\u0275\u0275property("title",i.fileItem.file.name),e.\u0275\u0275advance(),e.\u0275\u0275textInterpolate(i.fileItem.file.name),e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf","edit"===i.fileItem.state),e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf","upload"===i.fileItem.state),e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf","complete"===i.fileItem.state),e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf",i.fileItem.invalid))},dependencies:[s.NgIf,f.Loading,u.IconDirective],encapsulation:2}),n})();const g=()=>{};let M=(()=>{class n{constructor(t){this.i18n=t,this.buttonText=this.i18n.get().FILE_UPLOADER.OPEN,this.buttonType="primary",this.accept=[],this.multiple=!0,this.skeleton=!1,this.fileItemSize="lg",this.drop=!1,this.fileUploaderId=`file-uploader-${n.fileUploaderCount}`,this.files=new Set,this.disabled=!1,this.filesChange=new e.EventEmitter,this.dragOver=!1,this.onTouchedCallback=g,this.onChangeCallback=g,n.fileUploaderCount++}get value(){return this.files}set value(t){t!==this.files&&(this.files=t,this.onChangeCallback(t))}onBlur(){this.onTouchedCallback()}get fileList(){return Array.from(this.fileInput.nativeElement.files)}writeValue(t){t!==this.value&&(this.files=t)}createFileItem(t){return{uploaded:!1,state:"edit",invalid:!1,invalidText:"",file:t}}onFilesAdded(){const t=new Set(this.files);this.multiple||t.clear();for(let i of this.fileList){const l=this.createFileItem(i);t.add(l)}this.value=t,this.filesChange.emit(t)}onDragOver(t){t.stopPropagation(),t.preventDefault(),!this.disabled&&(this.dragOver=!0)}onDragLeave(t){t.stopPropagation(),t.preventDefault(),this.dragOver=!1}onDrop(t){if(t.stopPropagation(),t.preventDefault(),this.disabled)return;const i=Array.from(t.dataTransfer.files),l=new Set(this.files);i.filter(({name:a,type:c})=>{const L=a.split(".").pop().replace(/^/,".");return this.accept.includes(c)||this.accept.includes(L)||!this.accept.length}).forEach(a=>{if(!l.size||this.multiple){const c=this.createFileItem(a);l.add(c)}}),this.value=l,this.filesChange.emit(l),this.dragOver=!1}removeFile(t){if(this.files&&this.files.has(t)){const i=new Set(this.files);i.delete(t),this.filesChange.emit(i),this.value=i}this.fileInput.nativeElement.value=""}isTemplate(t){return t instanceof e.TemplateRef}registerOnTouched(t){this.onTouchedCallback=t}registerOnChange(t){this.onChangeCallback=t}setDisabledState(t){this.disabled=t}}return n.fileUploaderCount=0,n.\u0275fac=function(t){return new(t||n)(e.\u0275\u0275directiveInject(p.I18n))},n.\u0275cmp=e.\u0275\u0275defineComponent({type:n,selectors:[["cds-file-uploader"],["ibm-file-uploader"]],viewQuery:function(t,i){if(1&t&&e.\u0275\u0275viewQuery(T,5),2&t){let l;e.\u0275\u0275queryRefresh(l=e.\u0275\u0275loadQuery())&&(i.fileInput=l.first)}},inputs:{buttonText:"buttonText",buttonType:"buttonType",title:"title",description:"description",accept:"accept",multiple:"multiple",skeleton:"skeleton",size:"size",fileItemSize:"fileItemSize",drop:"drop",dropText:"dropText",fileUploaderId:"fileUploaderId",files:"files",disabled:"disabled"},outputs:{filesChange:"filesChange"},features:[e.\u0275\u0275ProvidersFeature([{provide:v.NG_VALUE_ACCESSOR,useExisting:n,multi:!0}])],decls:3,vars:2,consts:[["skeletonTemplate",""],["fileInput",""],[4,"ngIf","ngIfElse"],[1,"cds--file--label",3,"for"],["role","alert",1,"cds--label-description"],[1,"cds--file"],["class","cds--file-browse-btn","tabindex","0",3,"ngClass","keyup.enter","keyup.space",4,"ngIf"],["type","button",3,"cdsButton","size","disabled","click",4,"ngIf"],["type","file","tabindex","-1",1,"cds--file-input",3,"change","accept","id","multiple","disabled"],[1,"cds--file-container"],[4,"ngFor","ngForOf"],["tabindex","0",1,"cds--file-browse-btn",3,"keyup.enter","keyup.space","ngClass"],["role","button",1,"cds--file__drop-container",3,"click","dragover","dragleave","drop","ngClass"],[4,"ngIf"],[3,"ngTemplateOutlet"],["type","button",3,"click","cdsButton","size","disabled"],[3,"remove","fileItem","size"],[1,"cds--skeleton__text",2,"width","100px"],[1,"cds--skeleton__text",2,"width","225px"],["cdsButton","","skeleton","true"]],template:function(t,i){if(1&t&&e.\u0275\u0275template(0,V,12,10,"ng-container",2)(1,D,3,0,"ng-template",null,0,e.\u0275\u0275templateRefExtractor),2&t){const l=e.\u0275\u0275reference(2);e.\u0275\u0275property("ngIf",!i.skeleton)("ngIfElse",l)}},dependencies:[s.NgClass,s.NgForOf,s.NgIf,s.NgTemplateOutlet,_.Button,m],encapsulation:2}),n})(),z=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=e.\u0275\u0275defineNgModule({type:n}),n.\u0275inj=e.\u0275\u0275defineInjector({imports:[s.CommonModule,_.ButtonModule,f.LoadingModule,u.IconModule]}),n})()}}]);