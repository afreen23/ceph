(self.webpackChunkceph_dashboard=self.webpackChunkceph_dashboard||[]).push([[442,3308,927],{97367:(q,y,s)=>{s.d(y,{A:()=>a});var a={elem:"svg",attrs:{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 16 16",fill:"currentColor",width:16,height:16},content:[{elem:"path",attrs:{d:"M8 11L3 6 3.7 5.3 8 9.6 12.3 5.3 13 6z"}}],name:"chevron--down",size:16}},99304:(q,y,s)=>{s.d(y,{A:()=>a});var a={elem:"svg",attrs:{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 32",fill:"currentColor",width:16,height:16},content:[{elem:"path",attrs:{d:"M17.4141 16L24 9.4141 22.5859 8 16 14.5859 9.4143 8 8 9.4141 14.5859 16 8 22.5859 9.4143 24 16 17.4141 22.5859 24 24 22.5859 17.4141 16z"}}],name:"close",size:16}},99062:(q,y,s)=>{s.d(y,{A:()=>a});var a={elem:"svg",attrs:{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 32",fill:"currentColor",width:32,height:32},content:[{elem:"path",attrs:{d:"M17.4141 16L24 9.4141 22.5859 8 16 14.5859 9.4143 8 8 9.4141 14.5859 16 8 22.5859 9.4143 24 16 17.4141 22.5859 24 24 22.5859 17.4141 16z"}}],name:"close",size:32}},22056:(q,y,s)=>{s.d(y,{A:()=>a});var a={elem:"svg",attrs:{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 32",fill:"currentColor",width:16,height:16},content:[{elem:"path",attrs:{d:"M24,14H22V8A6,6,0,0,0,10,8v6H8a2,2,0,0,0-2,2V28a2,2,0,0,0,2,2H24a2,2,0,0,0,2-2V16A2,2,0,0,0,24,14ZM12,8a4,4,0,0,1,8,0v6H12ZM24,28H8V16H24Z"}}],name:"locked",size:16}},55619:(q,y,s)=>{s.d(y,{A:()=>a});var a={elem:"svg",attrs:{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 32",fill:"currentColor",width:32,height:32},content:[{elem:"path",attrs:{d:"M16,22a6,6,0,1,1,6-6A6.0067,6.0067,0,0,1,16,22Zm0-10a4,4,0,1,0,4,4A4.0045,4.0045,0,0,0,16,12Z"}},{elem:"path",attrs:{d:"M16,26a10.0162,10.0162,0,0,1-7.4531-3.3325l1.49-1.334A8,8,0,1,0,16,8V6a10,10,0,0,1,0,20Z"}},{elem:"path",attrs:{d:"M16,30A14,14,0,1,1,30,16,14.0158,14.0158,0,0,1,16,30ZM16,4A12,12,0,1,0,28,16,12.0137,12.0137,0,0,0,16,4Z"}}],name:"progress-bar--round",size:32}},88263:(q,y,s)=>{s.d(y,{A:()=>a});var a={elem:"svg",attrs:{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 32",fill:"currentColor",width:32,height:32},content:[{elem:"path",attrs:{d:"M18,28A12,12,0,1,0,6,16v6.2L2.4,18.6,1,20l6,6,6-6-1.4-1.4L8,22.2V16H8A10,10,0,1,1,18,26Z"}}],name:"reset",size:32}},63566:(q,y,s)=>{s.d(y,{A:()=>a});var a={elem:"svg",attrs:{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 32",fill:"currentColor",width:32,height:32},content:[{elem:"path",attrs:{d:"m16,2c-7.6,0-14,6.4-14,14s6.4,14,14,14,14-6.4,14-14S23.6,2,16,2Zm8,15H8v-2h16v2Z"}},{elem:"path",attrs:{fill:"none",d:"M24 17L8 17 8 15 24 15 24 17z"}}],name:"subtract--filled",size:32}},64441:(q,y,s)=>{s.d(y,{A:()=>a});var a={elem:"svg",attrs:{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 16 16",fill:"currentColor",width:16,height:16},content:[{elem:"path",attrs:{d:"M15.5,7.8C14.3,4.7,11.3,2.6,8,2.5C4.7,2.6,1.7,4.7,0.5,7.8c0,0.1,0,0.2,0,0.3c1.2,3.1,4.1,5.2,7.5,5.3\tc3.3-0.1,6.3-2.2,7.5-5.3C15.5,8.1,15.5,7.9,15.5,7.8z M8,12.5c-2.7,0-5.4-2-6.5-4.5c1-2.5,3.8-4.5,6.5-4.5s5.4,2,6.5,4.5\tC13.4,10.5,10.6,12.5,8,12.5z"}},{elem:"path",attrs:{d:"M8,5C6.3,5,5,6.3,5,8s1.3,3,3,3s3-1.3,3-3S9.7,5,8,5z M8,10c-1.1,0-2-0.9-2-2s0.9-2,2-2s2,0.9,2,2S9.1,10,8,10z"}}],name:"view",size:16}},5501:q=>{function y(e,l,h){e instanceof RegExp&&(e=s(e,h)),l instanceof RegExp&&(l=s(l,h));var R=a(e,l,h);return R&&{start:R[0],end:R[1],pre:h.slice(0,R[0]),body:h.slice(R[0]+e.length,R[1]),post:h.slice(R[1]+l.length)}}function s(e,l){var h=l.match(e);return h?h[0]:null}function a(e,l,h){var R,S,m,v,E,C=h.indexOf(e),d=h.indexOf(l,C+1),u=C;if(C>=0&&d>0){if(e===l)return[C,d];for(R=[],m=h.length;u>=0&&!E;)u==C?(R.push(u),C=h.indexOf(e,u+1)):1==R.length?E=[R.pop(),d]:((S=R.pop())<m&&(m=S,v=d),d=h.indexOf(l,u+1)),u=C<d&&C>=0?C:d;R.length&&(E=[m,v])}return E}q.exports=y,y.range=a},68132:(q,y,s)=>{var a=s(5501);q.exports=function d(f){return f?("{}"===f.substr(0,2)&&(f="\\{\\}"+f.substr(2)),O(function v(f){return f.split("\\\\").join(e).split("\\{").join(l).split("\\}").join(h).split("\\,").join(R).split("\\.").join(S)}(f),!0).map(E)):[]};var e="\0SLASH"+Math.random()+"\0",l="\0OPEN"+Math.random()+"\0",h="\0CLOSE"+Math.random()+"\0",R="\0COMMA"+Math.random()+"\0",S="\0PERIOD"+Math.random()+"\0";function m(f){return parseInt(f,10)==f?parseInt(f,10):f.charCodeAt(0)}function E(f){return f.split(e).join("\\").split(l).join("{").split(h).join("}").split(R).join(",").split(S).join(".")}function C(f){if(!f)return[""];var g=[],P=a("{","}",f);if(!P)return f.split(",");var _=P.body,B=P.post,w=P.pre.split(",");w[w.length-1]+="{"+_+"}";var ie=C(B);return B.length&&(w[w.length-1]+=ie.shift(),w.push.apply(w,ie)),g.push.apply(g,w),g}function u(f){return"{"+f+"}"}function N(f){return/^-?0\d/.test(f)}function M(f,g){return f<=g}function I(f,g){return f>=g}function O(f,g){var P=[],A=a("{","}",f);if(!A)return[f];var _=A.pre,B=A.post.length?O(A.post,!1):[""];if(/\$$/.test(A.pre))for(var w=0;w<B.length;w++)P.push(ie=_+"{"+A.body+"}"+B[w]);else{var me,Ie,Y=/^-?\d+\.\.-?\d+(?:\.\.-?\d+)?$/.test(A.body),V=/^[a-zA-Z]\.\.[a-zA-Z](?:\.\.-?\d+)?$/.test(A.body),L=Y||V,Q=A.body.indexOf(",")>=0;if(!L&&!Q)return A.post.match(/,(?!,).*\}/)?O(f=A.pre+"{"+A.body+h+A.post):[f];if(L)me=A.body.split(/\.\./);else if(1===(me=C(A.body)).length&&1===(me=O(me[0],!1).map(u)).length)return B.map(function(Te){return A.pre+me[0]+Te});if(L){var He=m(me[0]),Ae=m(me[1]),We=Math.max(me[0].length,me[1].length),te=3==me.length?Math.abs(m(me[2])):1,_e=M;Ae<He&&(te*=-1,_e=I);var de=me.some(N);Ie=[];for(var ue=He;_e(ue,Ae);ue+=te){var T;if(V)"\\"===(T=String.fromCharCode(ue))&&(T="");else if(T=String(ue),de){var K=We-T.length;if(K>0){var ce=new Array(K+1).join("0");T=ue<0?"-"+ce+T.slice(1):ce+T}}Ie.push(T)}}else{Ie=[];for(var fe=0;fe<me.length;fe++)Ie.push.apply(Ie,O(me[fe],!1))}for(fe=0;fe<Ie.length;fe++)for(w=0;w<B.length;w++){var ie=_+Ie[fe]+B[w];(!g||L||ie)&&P.push(ie)}}return P}},11378:(q,y,s)=>{s.d(y,{P:()=>g});var a=s(87536),e=s(73651),l=s(19116),h=s(12540),R=s(6783),S=s(18457);let m=(()=>{class P{constructor(_){this.formatter=_,this.bytesLabels=["B","KiB","MiB","GiB","TiB","PiB","EiB","ZiB","YiB"],this.bytesPerSecondLabels=["B/s","KiB/s","MiB/s","GiB/s","TiB/s","PiB/s","EiB/s","ZiB/s","YiB/s"],this.secondsLabels=["ns","\u03bcs","ms","s","ks","Ms"],this.unitlessLabels=["","k","M","G","T","P","E","Z","Y"]}formatFromTo(_,B,w="",ie,Y,V=1){return this.formatter.formatNumberFromTo(_,B,w,ie,Y,V)}formatBytesFromTo(_,B,w,ie=1){return this.formatFromTo(_,B,w,1024,this.bytesLabels,ie)}formatBytesPerSecondFromTo(_,B,w,ie=1){return this.formatFromTo(_,B,w,1024,this.bytesPerSecondLabels,ie)}formatSecondsFromTo(_,B,w,ie=1){return this.formatFromTo(_,B,w,1e3,this.secondsLabels,ie)}formatUnitlessFromTo(_,B,w="",ie=1){return this.formatFromTo(_,B,w,1e3,this.unitlessLabels,ie)}static{this.\u0275fac=function(B){return new(B||P)(a.\u0275\u0275inject(h.k))}}static{this.\u0275prov=a.\u0275\u0275defineInjectable({token:P,factory:P.\u0275fac,providedIn:"root"})}}return P})();s(58793);var E=s(35855),C=s(91974);const d=(P,A)=>({"chart mt-3":P,"mt-3":A}),u=P=>({"d-inline-block text-truncate":P}),N=P=>({width:P});function M(P,A){if(1&P&&(a.\u0275\u0275i18nStart(0,1,2),a.\u0275\u0275elementContainerStart(1),a.\u0275\u0275element(2,"span",13),a.\u0275\u0275elementContainerEnd(),a.\u0275\u0275i18nEnd()),2&P){const _=a.\u0275\u0275nextContext(2).$implicit,B=a.\u0275\u0275nextContext();a.\u0275\u0275advance(2),a.\u0275\u0275property("ngClass",a.\u0275\u0275pureFunction1(4,u,B.truncateLabel))("ngStyle",a.\u0275\u0275pureFunction1(6,N,B.truncateLabel?"10rem":"auto"))("title",_.label),a.\u0275\u0275i18nExp(_.label),a.\u0275\u0275i18nApply(0)}}function I(P,A){if(1&P&&(a.\u0275\u0275i18nStart(0,1,3),a.\u0275\u0275element(1,"div"),a.\u0275\u0275i18nEnd()),2&P){const _=a.\u0275\u0275nextContext(3);a.\u0275\u0275advance(),a.\u0275\u0275i18nExp(_.maxConvertedValue)(_.maxConvertedValueUnits),a.\u0275\u0275i18nApply(0)}}function O(P,A){if(1&P&&(a.\u0275\u0275i18nStart(0,1,1),a.\u0275\u0275elementStart(1,"div",10),a.\u0275\u0275element(2,"div",11),a.\u0275\u0275template(3,M,3,8,"ng-container",12),a.\u0275\u0275element(4,"span"),a.\u0275\u0275template(5,I,2,2,"div",12),a.\u0275\u0275elementEnd(),a.\u0275\u0275i18nEnd()),2&P){const _=a.\u0275\u0275nextContext().$implicit,B=a.\u0275\u0275nextContext();a.\u0275\u0275advance(2),a.\u0275\u0275styleProp("background-color",_.pointBackgroundColor),a.\u0275\u0275advance(),a.\u0275\u0275property("ngIf",!B.chartTitle.includes(_.label)),a.\u0275\u0275advance(2),a.\u0275\u0275property("ngIf",B.maxValue&&_.currentData),a.\u0275\u0275i18nExp((null==_?null:_.currentData)||"N/A")(null==_?null:_.currentDataUnits),a.\u0275\u0275i18nApply(0)}}function f(P,A){if(1&P&&(a.\u0275\u0275elementStart(0,"div"),a.\u0275\u0275i18nStart(1,1),a.\u0275\u0275template(2,O,6,6,"div",9),a.\u0275\u0275i18nEnd(),a.\u0275\u0275elementEnd()),2&P){const _=A.$implicit;a.\u0275\u0275advance(2),a.\u0275\u0275property("ngIf",0!==_.data.length)}}let g=(()=>{class P{constructor(_,B,w,ie,Y,V){this.cssHelper=_,this.dimlessBinary=B,this.dimlessBinaryPerSecond=w,this.dimlessPipe=ie,this.formatter=Y,this.numberFormatter=V,this.labelsArray=[],this.decimals=1,this.truncateLabel=!1,this.isMultiCluster=!1,this.chartData={dataset:[]},this.options={},this.currentChartData={},this.chartAreaBorderPlugin=[{beforeDraw(L){if(!L.options.plugins.borderArea)return;const{ctx:Q,chartArea:{left:me,top:Ie,width:He,height:Ae}}=L;Q.save(),Q.strokeStyle=L.options.plugins.chartAreaBorder.borderColor,Q.lineWidth=L.options.plugins.chartAreaBorder.borderWidth,Q.setLineDash(L.options.plugins.chartAreaBorder.borderDash||[]),Q.lineDashOffset=L.options.plugins.chartAreaBorder.borderDashOffset,Q.strokeRect(me,Ie,He,Ae),Q.restore()}}],this.chartColors=[[this.cssHelper.propertyValue("chart-color-strong-blue"),this.cssHelper.propertyValue("chart-color-translucent-blue")],[this.cssHelper.propertyValue("chart-color-orange"),this.cssHelper.propertyValue("chart-color-translucent-orange")],[this.cssHelper.propertyValue("chart-color-green"),this.cssHelper.propertyValue("chart-color-translucent-green")],[this.cssHelper.propertyValue("chart-color-cyan"),this.cssHelper.propertyValue("chart-color-translucent-cyan")],[this.cssHelper.propertyValue("chart-color-purple"),this.cssHelper.propertyValue("chart-color-translucent-purple")],[this.cssHelper.propertyValue("chart-color-red"),this.cssHelper.propertyValue("chart-color-translucent-red")]],this.options={plugins:{legend:{display:!1},tooltip:{mode:"index",external:function(L){L.tooltip.x=10,L.tooltip.y=0}.bind(this),intersect:!1,displayColors:!0,backgroundColor:this.cssHelper.propertyValue("chart-color-tooltip-background"),callbacks:{title:function(L){return L[0].xLabel},label:L=>" "+L.dataset.label+" - "+L.formattedValue+" "+this.chartDataUnits}},borderArea:!0,chartAreaBorder:{borderColor:this.cssHelper.propertyValue("chart-color-slight-dark-gray"),borderWidth:1}},responsive:!0,maintainAspectRatio:!1,animation:!1,elements:{point:{radius:0}},hover:{intersect:!1},scales:{x:{display:!1,type:"time",grid:{display:!1},time:{tooltipFormat:"DD/MM/YYYY - HH:mm:ss"}},y:{afterFit:L=>L.width=100,grid:{display:!1},beginAtZero:!0,ticks:{maxTicksLimit:4}}}}}ngOnChanges(_){this.updateChartData(_)}ngAfterViewInit(){this.updateChartData(null)}updateChartData(_){this.labelsArray.forEach((B,w)=>{const ie=w%this.chartColors?.length;this.chartData.dataset[w]={label:"",data:[],tension:.2,pointBackgroundColor:this.chartColors[ie][0],backgroundColor:this.chartColors[ie][1],borderColor:this.chartColors[ie][0],borderWidth:1,fill:{target:"origin"}},this.chartData.dataset[w].label=this.labelsArray[w]}),this.setChartTicks(),this.dataArray?.[0]?.length&&(this.dataArray=_?.dataArray?.currentValue||this.dataArray,this.currentChartData=this.chartData,this.dataArray?.forEach((B,w)=>{this.chartData.dataset[w].data=this.formatData(this.dataArray[w]);let ie=this.dataArray?.[w]?.[this.dataArray[w]?.length-1]?this.dataArray[w][this.dataArray[w]?.length-1][1]:0;ie&&([this.currentChartData.dataset[w].currentData,this.currentChartData.dataset[w].currentDataUnits]=this.convertUnits(ie).split(" "),[this.maxConvertedValue,this.maxConvertedValueUnits]=this.convertUnits(this.maxValue).split(" "),this.currentChartData.dataset[w].currentDataValue=ie)}),this.currentChartData.dataset.sort((B,w)=>parseFloat(w.currentDataValue)-parseFloat(B.currentDataValue))),this.chart&&this.chart.chart.update()}formatData(_){let B={};return B=_?.map(w=>({x:1e3*w[0],y:Number(this.convertToChartDataUnits(w[1]).replace(/[^\d,.]+/g,""))})),B}convertToChartDataUnits(_){let B="";return null!==this.chartDataUnits&&(B="B"===this.dataUnits?this.numberFormatter.formatBytesFromTo(_,this.dataUnits,this.chartDataUnits,this.decimals):"B/s"===this.dataUnits?this.numberFormatter.formatBytesPerSecondFromTo(_,this.dataUnits,this.chartDataUnits,this.decimals):"ms"===this.dataUnits?this.numberFormatter.formatSecondsFromTo(_,this.dataUnits,this.chartDataUnits,this.decimals):this.numberFormatter.formatUnitlessFromTo(_,this.dataUnits,this.chartDataUnits,this.decimals)),B}convertUnits(_){let B="";return B="B"===this.dataUnits?this.dimlessBinary.transform(_,this.decimals):"B/s"===this.dataUnits?this.dimlessBinaryPerSecond.transform(_,this.decimals):"ms"===this.dataUnits?this.formatter.format_number(_,1e3,["ms","s"],this.decimals):this.dimlessPipe.transform(_,this.decimals),B}setChartTicks(){if(!this.chart)return void(this.chartDataUnits="");let _=0,B="";const w=this.dataArray?.reduce((Y,V)=>Y.concat(V?.map(L=>L[1])),[]);_=w?Math.max(...w.map(Number)):0,[_,B]=this.convertUnits(_).split(" "),this.chart.chart.options.scales.y.ticks.callback=Y=>0===Y?null:B?`${Y} ${B}`:`${Y}`,this.chartDataUnits=B||"",this.chart.chart.update()}static{this.\u0275fac=function(B){return new(B||P)(a.\u0275\u0275directiveInject(E._),a.\u0275\u0275directiveInject(e.l),a.\u0275\u0275directiveInject(l.w),a.\u0275\u0275directiveInject(S.u),a.\u0275\u0275directiveInject(h.k),a.\u0275\u0275directiveInject(m))}}static{this.\u0275cmp=a.\u0275\u0275defineComponent({type:P,selectors:[["cd-dashboard-area-chart"]],viewQuery:function(B,w){if(1&B&&a.\u0275\u0275viewQuery(R.BaseChartDirective,5),2&B){let ie;a.\u0275\u0275queryRefresh(ie=a.\u0275\u0275loadQuery())&&(w.chart=ie.first)}},inputs:{chartTitle:"chartTitle",maxValue:"maxValue",dataUnits:"dataUnits",dataArray:"dataArray",labelsArray:"labelsArray",decimals:"decimals",truncateLabel:"truncateLabel",isMultiCluster:"isMultiCluster"},features:[a.\u0275\u0275NgOnChangesFeature],decls:9,vars:10,consts:()=>{let _,B;return _=$localize`:␟d53ee43922e019b87825c225bcc105d65cfb7a0e␟6477782095541912338:${"\ufffd0\ufffd"}:INTERPOLATION:`,B=$localize`:␟392f1bddd53736a3b51011bb32185582a6750a34␟9211046903360908239:${"\ufffd*2:1\ufffd\ufffd#1:1\ufffd"}:START_TAG_DIV_2:${"\ufffd#2:1\ufffd"}:START_TAG_DIV:${"[\ufffd/#2:1\ufffd|\ufffd/#1:3\ufffd\ufffd/*5:3\ufffd|\ufffd/#1:1\ufffd\ufffd/*2:1\ufffd]"}:CLOSE_TAG_DIV:${"\ufffd*3:2\ufffd\ufffd#1:2\ufffd"}:START_TAG_NG_CONTAINER:${"\ufffd#2:2\ufffd"}:START_TAG_SPAN:${"\ufffd0:2\ufffd"}:INTERPOLATION:${"[\ufffd/#2:2\ufffd|\ufffd/#4:1\ufffd]"}:CLOSE_TAG_SPAN:: ${"\ufffd/#1:2\ufffd\ufffd/*3:2\ufffd"}:CLOSE_TAG_NG_CONTAINER:${"\ufffd#4:1\ufffd"}:START_TAG_SPAN_1:${"\ufffd0:1\ufffd"}:INTERPOLATION_1: ${"\ufffd1:1\ufffd"}:INTERPOLATION_2:${"[\ufffd/#2:2\ufffd|\ufffd/#4:1\ufffd]"}:CLOSE_TAG_SPAN:${"\ufffd*5:3\ufffd\ufffd#1:3\ufffd"}:START_TAG_DIV_1: used of ${"\ufffd0:3\ufffd"}:INTERPOLATION_3: ${"\ufffd1:3\ufffd"}:INTERPOLATION_4: ${"[\ufffd/#2:1\ufffd|\ufffd/#1:3\ufffd\ufffd/*5:3\ufffd|\ufffd/#1:1\ufffd\ufffd/*2:1\ufffd]"}:CLOSE_TAG_DIV:${"[\ufffd/#2:1\ufffd|\ufffd/#1:3\ufffd\ufffd/*5:3\ufffd|\ufffd/#1:1\ufffd\ufffd/*2:1\ufffd]"}:CLOSE_TAG_DIV:`,B=a.\u0275\u0275i18nPostprocess(B),[_,B,[1,"row","mt-2"],[1,"col-3","d-flex","flex-column","align-self-center"],[1,"chartTitle","pb-2"],[4,"ngFor","ngForOf"],[1,"col-9","d-flex","flex-column"],[3,"ngClass"],["baseChart","",3,"datasets","options","type","plugins"],["class","d-inline-flex align-items-center gap-1",4,"ngIf"],[1,"d-inline-flex","align-items-center","gap-1"],[1,"box"],[4,"ngIf"],[3,"ngClass","ngStyle","title"]]},template:function(B,w){1&B&&(a.\u0275\u0275elementStart(0,"div",2)(1,"div",3),a.\u0275\u0275element(2,"br"),a.\u0275\u0275elementStart(3,"b",4),a.\u0275\u0275i18n(4,0),a.\u0275\u0275elementEnd(),a.\u0275\u0275template(5,f,3,1,"div",5),a.\u0275\u0275elementEnd(),a.\u0275\u0275elementStart(6,"div",6)(7,"div",7),a.\u0275\u0275element(8,"canvas",8),a.\u0275\u0275elementEnd()()()),2&B&&(a.\u0275\u0275advance(4),a.\u0275\u0275i18nExp(w.chartTitle),a.\u0275\u0275i18nApply(4),a.\u0275\u0275advance(),a.\u0275\u0275property("ngForOf",w.currentChartData.dataset),a.\u0275\u0275advance(2),a.\u0275\u0275property("ngClass",a.\u0275\u0275pureFunction2(7,d,!w.isMultiCluster,w.isMultiCluster)),a.\u0275\u0275advance(),a.\u0275\u0275property("datasets",w.chartData.dataset)("options",w.options)("type","line")("plugins",w.chartAreaBorderPlugin))},dependencies:[C.NgClass,C.NgForOf,C.NgIf,C.NgStyle,R.BaseChartDirective],styles:[".chart[_ngcontent-%COMP%]{height:9vh}.box[_ngcontent-%COMP%]{background-color:#0078c8;border:2px double #f0f0f0;height:13px;width:13px}"]})}}return P})()},47830:(q,y,s)=>{s.d(y,{M:()=>d});var a=s(87536),l=s(89939),h=s.n(l),R=s(91974),m=s(90476),v=s(53648);function C(u,N){if(1&u&&(a.\u0275\u0275elementStart(0,"option",3),a.\u0275\u0275text(1),a.\u0275\u0275elementEnd()),2&u){const M=N.$implicit;a.\u0275\u0275property("ngValue",M.value),a.\u0275\u0275advance(),a.\u0275\u0275textInterpolate1("",M.name," ")}}let d=(()=>{class u{constructor(){this.selectedTime=new a.EventEmitter,this.times=[{name:$localize`Last 5 minutes`,value:this.timeToDate(300,1)},{name:$localize`Last 15 minutes`,value:this.timeToDate(900,3)},{name:$localize`Last 30 minutes`,value:this.timeToDate(1800,7)},{name:$localize`Last 1 hour`,value:this.timeToDate(3600,14)},{name:$localize`Last 3 hours`,value:this.timeToDate(10800,42)},{name:$localize`Last 6 hours`,value:this.timeToDate(21600,84)},{name:$localize`Last 12 hours`,value:this.timeToDate(43200,168)},{name:$localize`Last 24 hours`,value:this.timeToDate(86400,336)}],this.time=this.times[3].value}emitTime(){this.selectedTime.emit(this.timeToDate(this.time.end-this.time.start,this.time.step))}timeToDate(M,I){return{start:h()().unix()-M,end:h()().unix(),step:I}}static{this.\u0275fac=function(I){return new(I||u)}}static{this.\u0275cmp=a.\u0275\u0275defineComponent({type:u,selectors:[["cd-dashboard-time-selector"]],outputs:{selectedTime:"selectedTime"},decls:3,vars:2,consts:[[1,"timeSelector"],["id","timepicker","name","timepicker",1,"form-select",3,"ngModelChange","ngModel"],[3,"ngValue",4,"ngFor","ngForOf"],[3,"ngValue"]],template:function(I,O){1&I&&(a.\u0275\u0275elementStart(0,"div",0)(1,"select",1),a.\u0275\u0275twoWayListener("ngModelChange",function(g){return a.\u0275\u0275twoWayBindingSet(O.time,g)||(O.time=g),g}),a.\u0275\u0275listener("ngModelChange",function(){return O.emitTime()}),a.\u0275\u0275template(2,C,2,2,"option",2),a.\u0275\u0275elementEnd()()),2&I&&(a.\u0275\u0275advance(),a.\u0275\u0275twoWayProperty("ngModel",O.time),a.\u0275\u0275advance(),a.\u0275\u0275property("ngForOf",O.times))},dependencies:[R.NgForOf,m.S,v.NgSelectOption,v.\u0275NgSelectMultipleOption,v.SelectControlValueAccessor,v.NgControlStatus,v.NgModel],styles:[".timeSelector[_ngcontent-%COMP%]{position:absolute;right:18px;top:20px;width:12rem}"]})}}return u})()},45518:(q,y,s)=>{s.d(y,{W:()=>P});var a=s(91974),l=s(53648),R=s(76218),m=s(77317),E=s(6783),d=s(487),N=s(93887),M=s(26481),I=s(3600),f=s(87536);let P=(()=>{class A{static{this.\u0275fac=function(w){return new(w||A)}}static{this.\u0275mod=f.\u0275\u0275defineNgModule({type:A})}static{this.\u0275inj=f.\u0275\u0275defineInjector({providers:[(0,E.provideCharts)((0,E.withDefaultRegisterables)())],imports:[M._,a.CommonModule,m.NgbNavModule,N.G,R.RouterModule,m.NgbTooltipModule,l.FormsModule,l.ReactiveFormsModule,d.SimplebarAngularModule,I.ToggletipModule,I.InlineLoadingModule]})}}return A})()},8265:(q,y,s)=>{s.d(y,{q:()=>a});var a=function(e){return e.CEPH="CEPH",e.RGW="RGW",e}(a||{})},38157:(q,y,s)=>{s.d(y,{$:()=>te});var a=s(87536),e=s(22341),l=s(25947),h=s(54372),R=s(19380),S=s(82254),m=s(2361),v=s(98996),E=s(95631),C=s(50619),d=s(62847),u=s(32295),N=s(45843),M=s(91974),I=s(3600),O=s(64333),f=s(70848);function g(_e,oe){if(1&_e&&(a.\u0275\u0275elementContainerStart(0),a.\u0275\u0275elementStart(1,"legend"),a.\u0275\u0275i18nStart(2,0),a.\u0275\u0275pipe(3,"titlecase"),a.\u0275\u0275element(4,"cd-help-text"),a.\u0275\u0275i18nEnd(),a.\u0275\u0275elementEnd(),a.\u0275\u0275element(5,"cd-nfs-list",2),a.\u0275\u0275elementContainerEnd()),2&_e){const de=a.\u0275\u0275nextContext();a.\u0275\u0275advance(4),a.\u0275\u0275i18nExp(a.\u0275\u0275pipeBind1(3,2,de.title)),a.\u0275\u0275i18nApply(2),a.\u0275\u0275advance(),a.\u0275\u0275property("clusterId",de.selection.name)}}let P=(()=>{class _e{constructor(){this.title=$localize`Export`}static{this.\u0275fac=function(ue){return new(ue||_e)}}static{this.\u0275cmp=a.\u0275\u0275defineComponent({type:_e,selectors:[["cd-nfs-cluster-details"]],inputs:{selection:"selection"},decls:1,vars:1,consts:()=>{let de;return de=$localize`:␟073589bd73951f2678de58bbb5666c915ea9a96d␟3328877729245586547: ${"\ufffd0\ufffd"}:INTERPOLATION: ${"\ufffd#4\ufffd"}:START_TAG_CD_HELP_TEXT: Lists exports for a cluster ${"\ufffd/#4\ufffd"}:CLOSE_TAG_CD_HELP_TEXT:`,[de,[4,"ngIf"],[3,"clusterId"]]},template:function(ue,T){1&ue&&a.\u0275\u0275template(0,g,6,4,"ng-container",1),2&ue&&a.\u0275\u0275property("ngIf",!!T.selection)},dependencies:[O.O,M.NgIf,f.J,M.TitleCasePipe]})}}return _e})();const A=["hostnameTpl"],_=["ipAddrTpl"],B=["virtualIpTpl"];function w(_e,oe){if(1&_e&&a.\u0275\u0275element(0,"cd-nfs-cluster-details",7),2&_e){const de=a.\u0275\u0275nextContext(2);a.\u0275\u0275property("selection",de.expandedRow)}}function ie(_e,oe){if(1&_e){const de=a.\u0275\u0275getCurrentView();a.\u0275\u0275elementContainerStart(0),a.\u0275\u0275elementStart(1,"cd-table",4),a.\u0275\u0275listener("setExpandedRow",function(T){a.\u0275\u0275restoreView(de);const K=a.\u0275\u0275nextContext();return a.\u0275\u0275resetView(K.setExpandedRow(T))})("fetchData",function(){a.\u0275\u0275restoreView(de);const T=a.\u0275\u0275nextContext();return a.\u0275\u0275resetView(T.loadData())})("updateSelection",function(T){a.\u0275\u0275restoreView(de);const K=a.\u0275\u0275nextContext();return a.\u0275\u0275resetView(K.updateSelection(T))}),a.\u0275\u0275element(2,"cd-table-actions",5),a.\u0275\u0275template(3,w,1,1,"cd-nfs-cluster-details",6),a.\u0275\u0275elementEnd(),a.\u0275\u0275elementContainerEnd()}if(2&_e){const de=oe.ngIf,ue=a.\u0275\u0275nextContext();a.\u0275\u0275advance(),a.\u0275\u0275property("autoReload",!0)("data",de)("columns",ue.columns)("hasDetails",!0),a.\u0275\u0275advance(),a.\u0275\u0275property("selection",ue.selection)("permission",ue.permission)("tableActions",ue.tableActions)}}function Y(_e,oe){if(1&_e&&(a.\u0275\u0275elementStart(0,"span")(1,"cds-tag",8),a.\u0275\u0275text(2),a.\u0275\u0275elementEnd()()),2&_e){const de=a.\u0275\u0275nextContext().data.row;a.\u0275\u0275advance(2),a.\u0275\u0275textInterpolate2(" ",de.virtual_ip,":",de.port," ")}}function V(_e,oe){if(1&_e&&a.\u0275\u0275template(0,Y,3,2,"span",3),2&_e){const de=oe.data.row;a.\u0275\u0275property("ngIf",de.virtual_ip||de.port)}}function L(_e,oe){if(1&_e&&(a.\u0275\u0275elementStart(0,"span")(1,"cds-tag",8),a.\u0275\u0275text(2),a.\u0275\u0275elementEnd()()),2&_e){const de=a.\u0275\u0275nextContext().$implicit;a.\u0275\u0275advance(2),a.\u0275\u0275textInterpolate2(" ",de.ip,":",de.port," ")}}function Q(_e,oe){if(1&_e&&(a.\u0275\u0275elementStart(0,"span"),a.\u0275\u0275template(1,L,3,2,"span",3),a.\u0275\u0275elementEnd()),2&_e){const de=oe.$implicit;a.\u0275\u0275advance(),a.\u0275\u0275property("ngIf",de.ip||de.port)}}function me(_e,oe){1&_e&&a.\u0275\u0275template(0,Q,2,1,"span",9),2&_e&&a.\u0275\u0275property("ngForOf",oe.data.value)}function Ie(_e,oe){if(1&_e&&(a.\u0275\u0275elementStart(0,"span")(1,"cds-tag",8),a.\u0275\u0275text(2),a.\u0275\u0275elementEnd()()),2&_e){const de=a.\u0275\u0275nextContext().$implicit;a.\u0275\u0275advance(2),a.\u0275\u0275textInterpolate(de.hostname)}}function He(_e,oe){if(1&_e&&(a.\u0275\u0275elementStart(0,"span"),a.\u0275\u0275template(1,Ie,3,1,"span",3),a.\u0275\u0275elementEnd()),2&_e){const de=oe.$implicit;a.\u0275\u0275advance(),a.\u0275\u0275property("ngIf",de.hostname)}}function Ae(_e,oe){1&_e&&a.\u0275\u0275template(0,He,2,1,"span",9),2&_e&&a.\u0275\u0275property("ngForOf",oe.data.value)}let te=(()=>{class _e extends l.D{constructor(de,ue,T,K,ce){super(),this.actionLabels=de,this.ngZone=ue,this.authStorageService=T,this.nfsService=K,this.orchService=ce,this.columns=[],this.selection=new R.y,this.tableActions=[],this.subject=new E.BehaviorSubject([])}ngOnInit(){this.orchService.status().subscribe(de=>{this.orchStatus=de}),this.permission=this.authStorageService.getPermissions().nfs,this.clusters$=this.subject.pipe((0,C.switchMap)(()=>this.nfsService.nfsClusterList())),this.columns=[{name:$localize`Name`,prop:"name",flexGrow:1},{name:$localize`Hostnames`,prop:"backend",flexGrow:2,cellTemplate:this.hostnameTpl},{name:$localize`IP Address`,prop:"backend",flexGrow:2,cellTemplate:this.ipAddrTpl},{name:$localize`Virtual IP Address`,prop:"virtual_ip",flexGrow:1,cellTemplate:this.virtualIpTpl}]}loadData(){this.subject.next([])}updateSelection(de){this.selection=de}static{this.\u0275fac=function(ue){return new(ue||_e)(a.\u0275\u0275directiveInject(h.Ss),a.\u0275\u0275directiveInject(a.NgZone),a.\u0275\u0275directiveInject(S.v),a.\u0275\u0275directiveInject(e.Z),a.\u0275\u0275directiveInject(v.K))}}static{this.\u0275cmp=a.\u0275\u0275defineComponent({type:_e,selectors:[["cd-nfs-cluster"]],viewQuery:function(ue,T){if(1&ue&&(a.\u0275\u0275viewQuery(A,7),a.\u0275\u0275viewQuery(_,7),a.\u0275\u0275viewQuery(B,7)),2&ue){let K;a.\u0275\u0275queryRefresh(K=a.\u0275\u0275loadQuery())&&(T.hostnameTpl=K.first),a.\u0275\u0275queryRefresh(K=a.\u0275\u0275loadQuery())&&(T.ipAddrTpl=K.first),a.\u0275\u0275queryRefresh(K=a.\u0275\u0275loadQuery())&&(T.virtualIpTpl=K.first)}},features:[a.\u0275\u0275ProvidersFeature([{provide:m.E,useValue:new m.E("cephfs/nfs")}]),a.\u0275\u0275InheritDefinitionFeature],decls:8,vars:3,consts:[["virtualIpTpl",""],["ipAddrTpl",""],["hostnameTpl",""],[4,"ngIf"],["columnMode","flex","selectionType","single",3,"setExpandedRow","fetchData","updateSelection","autoReload","data","columns","hasDetails"],[1,"table-actions",3,"selection","permission","tableActions"],[3,"selection",4,"cdTableDetail"],[3,"selection"],["size","md"],[4,"ngFor","ngForOf"]],template:function(ue,T){1&ue&&(a.\u0275\u0275template(0,ie,4,7,"ng-container",3),a.\u0275\u0275pipe(1,"async"),a.\u0275\u0275template(2,V,1,1,"ng-template",null,0,a.\u0275\u0275templateRefExtractor)(4,me,1,1,"ng-template",null,1,a.\u0275\u0275templateRefExtractor)(6,Ae,1,1,"ng-template",null,2,a.\u0275\u0275templateRefExtractor)),2&ue&&a.\u0275\u0275property("ngIf",a.\u0275\u0275pipeBind1(1,1,(null==T.orchStatus?null:T.orchStatus.available)&&T.clusters$))},dependencies:[d.O,u.j,N.N,M.NgForOf,M.NgIf,I.Tag,P,M.AsyncPipe]})}}return _e})()},80299:(q,y,s)=>{s.d(y,{B:()=>Ze});var a=s(73308),e=s(53648),l=s(76218),h=s(29841),R=s.n(h),S=s(95631),m=s(50619),v=s(8265),E=s(22341),C=s(29729),d=s(59876),u=s(54372),N=s(46045),M=s(74902),I=s(43808),O=s(58384),f=s(3687),g=s(85481),P=s(82254),A=s(50813),_=s(87536),B=s(90476),w=s(78708),ie=s(37966),Y=s(51862),V=s(91974),L=s(3600);const Q=["squashHelper"];function me(k,Ee){1&k&&(_.\u0275\u0275elementStart(0,"span",22)(1,"span",23),_.\u0275\u0275i18n(2,5),_.\u0275\u0275elementEnd()())}function Ie(k,Ee){1&k&&(_.\u0275\u0275elementStart(0,"span"),_.\u0275\u0275i18n(1,9),_.\u0275\u0275elementEnd())}function He(k,Ee){1&k&&(_.\u0275\u0275elementStart(0,"span"),_.\u0275\u0275elementContainerStart(1),_.\u0275\u0275i18n(2,10),_.\u0275\u0275elementContainerEnd(),_.\u0275\u0275element(3,"br"),_.\u0275\u0275elementContainerStart(4),_.\u0275\u0275i18n(5,11),_.\u0275\u0275elementContainerEnd(),_.\u0275\u0275text(6," 192.168.0.10, 192.168.1.0/8 "),_.\u0275\u0275elementEnd())}function Ae(k,Ee){if(1&k&&(_.\u0275\u0275elementStart(0,"span",33),_.\u0275\u0275template(1,Ie,2,0,"span",34)(2,He,7,0,"span",34),_.\u0275\u0275elementEnd()),2&k){const G=_.\u0275\u0275nextContext().index,j=_.\u0275\u0275nextContext(),Ce=_.\u0275\u0275reference(4);_.\u0275\u0275advance(),_.\u0275\u0275property("ngIf",j.showError(G,"addresses",Ce,"required")),_.\u0275\u0275advance(),_.\u0275\u0275property("ngIf",j.showError(G,"addresses",Ce,"pattern"))}}function We(k,Ee){if(1&k&&(_.\u0275\u0275i18nStart(0,7,1),_.\u0275\u0275element(1,"option",35),_.\u0275\u0275i18nEnd()),2&k){const G=Ee.$implicit;_.\u0275\u0275advance(),_.\u0275\u0275property("value",G.value),_.\u0275\u0275i18nExp(G.value),_.\u0275\u0275i18nApply(0)}}function te(k,Ee){if(1&k&&(_.\u0275\u0275elementStart(0,"span"),_.\u0275\u0275text(1),_.\u0275\u0275elementEnd()),2&k){const G=_.\u0275\u0275nextContext(2).index,j=_.\u0275\u0275nextContext();_.\u0275\u0275advance(),_.\u0275\u0275textInterpolate1(" ",j.getAccessTypeHelp(G)," ")}}function _e(k,Ee){if(1&k&&_.\u0275\u0275template(0,te,2,1,"span",34),2&k){const G=_.\u0275\u0275nextContext().index,j=_.\u0275\u0275nextContext();_.\u0275\u0275property("ngIf",j.getValue(G,"access_type"))}}function oe(k,Ee){if(1&k&&(_.\u0275\u0275i18nStart(0,8,1),_.\u0275\u0275element(1,"option",35),_.\u0275\u0275i18nEnd()),2&k){const G=Ee.$implicit;_.\u0275\u0275advance(),_.\u0275\u0275property("value",G),_.\u0275\u0275i18nExp(G),_.\u0275\u0275i18nApply(0)}}function de(k,Ee){if(1&k){const G=_.\u0275\u0275getCurrentView();_.\u0275\u0275elementStart(0,"div")(1,"div",14)(2,"h6"),_.\u0275\u0275text(3),_.\u0275\u0275elementStart(4,"cds-icon-button",24),_.\u0275\u0275listener("click",function(){const Ce=_.\u0275\u0275restoreView(G).index,xe=_.\u0275\u0275nextContext();return _.\u0275\u0275resetView(xe.removeClient(Ce))}),_.\u0275\u0275namespaceSVG(),_.\u0275\u0275element(5,"svg",25),_.\u0275\u0275elementEnd()(),_.\u0275\u0275namespaceHTML(),_.\u0275\u0275elementStart(6,"div")(7,"div",12)(8,"cds-text-label",26),_.\u0275\u0275i18nStart(9,6),_.\u0275\u0275element(10,"input",27),_.\u0275\u0275i18nEnd(),_.\u0275\u0275elementEnd(),_.\u0275\u0275template(11,Ae,3,2,"ng-template",null,1,_.\u0275\u0275templateRefExtractor),_.\u0275\u0275elementEnd(),_.\u0275\u0275elementStart(13,"div",12)(14,"cds-select",28),_.\u0275\u0275i18nStart(15,7),_.\u0275\u0275element(16,"option",29),_.\u0275\u0275template(17,We,2,2,"option",30),_.\u0275\u0275i18nEnd(),_.\u0275\u0275elementEnd(),_.\u0275\u0275template(18,_e,1,1,"ng-template",null,2,_.\u0275\u0275templateRefExtractor),_.\u0275\u0275elementEnd(),_.\u0275\u0275elementStart(20,"div",31)(21,"cds-select",32),_.\u0275\u0275i18nStart(22,8),_.\u0275\u0275element(23,"option",29),_.\u0275\u0275template(24,oe,2,2,"option",30),_.\u0275\u0275i18nEnd(),_.\u0275\u0275elementEnd()()()()()}if(2&k){const G=Ee.$implicit,j=Ee.index,Ce=_.\u0275\u0275reference(12),xe=_.\u0275\u0275reference(19),nt=_.\u0275\u0275nextContext();_.\u0275\u0275advance(),_.\u0275\u0275property("formGroup",G),_.\u0275\u0275advance(2),_.\u0275\u0275textInterpolate1(" Client ",j+1," "),_.\u0275\u0275advance(5),_.\u0275\u0275property("invalid",!G.controls.addresses.valid&&G.controls.addresses.dirty)("invalidText",Ce),_.\u0275\u0275advance(2),_.\u0275\u0275property("invalid",!G.controls.addresses.valid&&G.controls.addresses.dirty),_.\u0275\u0275advance(4),_.\u0275\u0275property("helperText",xe),_.\u0275\u0275advance(3),_.\u0275\u0275property("ngForOf",nt.nfsAccessType),_.\u0275\u0275advance(4),_.\u0275\u0275property("helperText",nt.squashHelperTpl),_.\u0275\u0275advance(3),_.\u0275\u0275property("ngForOf",nt.nfsSquash),_.\u0275\u0275i18nExp(nt.getNoSquashDescr()),_.\u0275\u0275i18nApply(22)}}let ue=(()=>{class k{constructor(G){this.nfsService=G,this.nfsSquash=[],this.nfsAccessType=[],this.icons=N.FI}ngOnInit(){this.nfsSquash=Object.keys(this.nfsService.nfsSquash),this.nfsAccessType=this.nfsService.nfsAccessType,R().forEach(this.clients,G=>{this.addClient().patchValue(G)}),this.clientsFormArray=this.form.get("clients")}getNoAccessTypeDescr(){return this.form.getValue("access_type")?`${this.form.getValue("access_type")} ${$localize`(inherited from global config)`}`:$localize`-- Select the access type --`}getAccessTypeHelp(G){const j=this.nfsAccessType.find(Ce=>this.getValue(G,"access_type")===Ce.value);return R().isObjectLike(j)?j.help:""}getNoSquashDescr(){return this.form.getValue("squash")?`${this.form.getValue("squash")} (${$localize`inherited from global config`})`:$localize`-- Select what kind of user id squashing is performed --`}addClient(){this.clientsFormArray=this.form.get("clients");const G="(([0-9]{1,3})\\.([0-9]{1,3})\\.([0-9]{1,3}).([0-9]{1,3})([/](\\d|[1-2]\\d|3[0-2]))?)",Ce=new O.$({addresses:new e.UntypedFormControl("",{validators:[e.Validators.required,e.Validators.pattern(`${G}([ ,]{1,2}${G})*`)]}),access_type:new e.UntypedFormControl(""),squash:new e.UntypedFormControl("")});return this.clientsFormArray.push(Ce),Ce}removeClient(G){this.clientsFormArray=this.form.get("clients"),this.clientsFormArray.removeAt(G)}showError(G,j,Ce,xe){return this.form.controls.clients.controls[G].showError(j,Ce,xe)}getValue(G,j){return this.clientsFormArray=this.form.get("clients"),this.clientsFormArray.at(G).getValue(j)}trackByFn(G){return G}static{this.\u0275fac=function(j){return new(j||k)(_.\u0275\u0275directiveInject(E.Z))}}static{this.\u0275cmp=_.\u0275\u0275defineComponent({type:k,selectors:[["cd-nfs-form-client"]],contentQueries:function(j,Ce,xe){if(1&j&&_.\u0275\u0275contentQuery(xe,Q,7),2&j){let nt;_.\u0275\u0275queryRefresh(nt=_.\u0275\u0275loadQuery())&&(Ce.squashHelperTpl=nt.first)}},inputs:{form:"form",clients:"clients"},decls:14,vars:4,consts:()=>{let G,j,Ce,xe,nt,at,St,vt,Mt;return G=$localize`:␟7ffe39df9d88c972792bd8688b215392deb8313d␟5910845130937645353:Clients`,j=$localize`:␟0660ae339068979854ade34a96546980723dede3␟6031909138548647889:Add clients`,Ce=$localize`:␟f2dae0bda66f6a349444951c0379c28cda47d6d1␟6651663946499178274:Any client can access`,xe=$localize`:␟c973e3f18b35e9b7ba6b0691d64ef4c4db292e8a␟4518058907872594112:Addresses ${"\ufffd#10\ufffd\ufffd/#10\ufffd"}:TAG_INPUT:`,nt=$localize`:␟1922a638b1e0e6c9f05674df449706dc0164c887␟4901972441722317020:Access Type ${"\ufffd#16\ufffd"}:START_TAG_OPTION:No Access Type${"[\ufffd/#16\ufffd|\ufffd/#1:1\ufffd\ufffd/*17:1\ufffd]"}:CLOSE_TAG_OPTION:${"\ufffd*17:1\ufffd\ufffd#1:1\ufffd"}:START_TAG_OPTION_1:${"\ufffd0:1\ufffd"}:INTERPOLATION:${"[\ufffd/#16\ufffd|\ufffd/#1:1\ufffd\ufffd/*17:1\ufffd]"}:CLOSE_TAG_OPTION:`,nt=_.\u0275\u0275i18nPostprocess(nt),at=$localize`:␟8bc956ab18e3bf0a4797dd0d96811953999b93f2␟1265754954327953100:Squash ${"\ufffd#23\ufffd"}:START_TAG_OPTION:${"\ufffd0\ufffd"}:INTERPOLATION:${"[\ufffd/#23\ufffd|\ufffd/#1:1\ufffd\ufffd/*24:1\ufffd]"}:CLOSE_TAG_OPTION:${"\ufffd*24:1\ufffd\ufffd#1:1\ufffd"}:START_TAG_OPTION_1:${"\ufffd0:1\ufffd"}:INTERPOLATION_1:${"[\ufffd/#23\ufffd|\ufffd/#1:1\ufffd\ufffd/*24:1\ufffd]"}:CLOSE_TAG_OPTION:`,at=_.\u0275\u0275i18nPostprocess(at),St=$localize`:␟7cbdabcece469fab89cfa687ab152bca18b97498␟1417693714872528491:This field is required.`,vt=$localize`:␟a5f3f74c0f6925826cb2188576391c0da01a23f0␟8319443009660817074:Must contain one or more comma-separated values`,Mt=$localize`:␟8bb5b2073697f3f4378c44a49b7524934c9268f4␟2032749583415117290:For example:`,[["formDir","ngForm"],["addressesError",""],["accessTypeHelper",""],G,j,Ce,xe,nt,at,St,vt,Mt,[1,"form-item"],[1,"cds--label"],[3,"formGroup"],["class","no-border text-muted",4,"ngIf"],["formArrayName","clients"],[4,"ngFor","ngForOf","ngForTrackBy"],["cdsRow",""],["cdsCol",""],["cdsButton","tertiary","type","button","name","add_client",3,"click"],["cdsIcon","add","size","32",1,"cds--btn__icon"],[1,"no-border","text-muted"],[1,"form-text","text-muted"],["kind","ghost","size","md","data-testid","remove_client","data-toggle","button","title","Remove Client",1,"float-end",3,"click"],["cdsIcon","close","size","32",1,"cds--btn__icon"],["for","addresses","cdRequiredField","Addresses",3,"invalid","invalidText"],["cdsText","","name","addresses","id","addresses","formControlName","addresses","placeholder","192.168.0.10, 192.168.1.0/8",3,"invalid"],["label","Access Type","for","access_type","formControlName","access_type","name","access_type","id","access_type",3,"helperText"],["value",""],[3,"value",4,"ngFor","ngForOf"],[1,"form-group","row"],["label","Squash","for","squash","formControlName","squash","name","squash","id","squash",3,"helperText"],[1,"invalid-feedback"],[4,"ngIf"],[3,"value"]]},template:function(j,Ce){if(1&j){const xe=_.\u0275\u0275getCurrentView();_.\u0275\u0275elementStart(0,"div",12)(1,"legend",13),_.\u0275\u0275i18n(2,3),_.\u0275\u0275elementEnd(),_.\u0275\u0275elementStart(3,"div",14,0),_.\u0275\u0275template(5,me,3,0,"span",15),_.\u0275\u0275elementContainerStart(6,16),_.\u0275\u0275template(7,de,25,10,"div",17),_.\u0275\u0275elementContainerEnd(),_.\u0275\u0275elementStart(8,"div",18)(9,"div",19)(10,"button",20),_.\u0275\u0275listener("click",function(){return _.\u0275\u0275restoreView(xe),_.\u0275\u0275resetView(Ce.addClient())}),_.\u0275\u0275elementContainerStart(11),_.\u0275\u0275i18n(12,4),_.\u0275\u0275elementContainerEnd(),_.\u0275\u0275namespaceSVG(),_.\u0275\u0275element(13,"svg",21),_.\u0275\u0275elementEnd()()()()()}2&j&&(_.\u0275\u0275advance(3),_.\u0275\u0275property("formGroup",Ce.form),_.\u0275\u0275advance(2),_.\u0275\u0275property("ngIf",0===Ce.form.get("clients").value.length),_.\u0275\u0275advance(2),_.\u0275\u0275property("ngForOf",Ce.clientsFormArray.controls)("ngForTrackBy",Ce.trackByFn))},dependencies:[e.NgSelectOption,e.\u0275NgSelectMultipleOption,e.DefaultValueAccessor,e.NgControlStatus,e.NgControlStatusGroup,e.FormGroupDirective,e.FormControlName,e.FormArrayName,B.S,w.C,ie.E,Y.P,V.NgForOf,V.NgIf,L.ColumnDirective,L.RowDirective,L.Select,L.Option,L.TextInputLabelComponent,L.TextInput,L.Button,L.IconButton,L.IconDirective]})}}return k})();var T=s(19560),K=s(57798),ce=s(67588),fe=s(28284),Te=s(70848),Se=s(16619),Ge=s(92805),Ye=s(87837),ct=s(59781),rt=s(56677),De=s(77317),ze=s(37353);const Et=["nfsClients"],Oe=()=>({md:4});function pt(k,Ee){1&k&&(_.\u0275\u0275i18nStart(0,20,1),_.\u0275\u0275element(1,"option",91),_.\u0275\u0275i18nEnd())}function ye(k,Ee){1&k&&(_.\u0275\u0275i18nStart(0,20,2),_.\u0275\u0275element(1,"option",91),_.\u0275\u0275i18nEnd())}function je(k,Ee){1&k&&(_.\u0275\u0275i18nStart(0,20,3),_.\u0275\u0275element(1,"option",91),_.\u0275\u0275i18nEnd())}function ot(k,Ee){if(1&k&&(_.\u0275\u0275i18nStart(0,20,4),_.\u0275\u0275element(1,"option",92),_.\u0275\u0275i18nEnd()),2&k){const G=Ee.$implicit;_.\u0275\u0275advance(),_.\u0275\u0275property("value",G.cluster_id),_.\u0275\u0275i18nExp(G.cluster_id),_.\u0275\u0275i18nApply(0)}}function tt(k,Ee){if(1&k){const G=_.\u0275\u0275getCurrentView();_.\u0275\u0275elementStart(0,"cd-alert-panel",93),_.\u0275\u0275listener("action",function(){_.\u0275\u0275restoreView(G);const Ce=_.\u0275\u0275nextContext(2);return _.\u0275\u0275resetView(Ce.router.navigate(["/services",{outlets:{modal:["create"]}}]))}),_.\u0275\u0275i18n(1,29),_.\u0275\u0275elementEnd()}}function Ft(k,Ee){1&k&&(_.\u0275\u0275elementStart(0,"span"),_.\u0275\u0275i18n(1,30),_.\u0275\u0275elementEnd())}function bt(k,Ee){1&k&&(_.\u0275\u0275elementStart(0,"span",95),_.\u0275\u0275i18n(1,31),_.\u0275\u0275elementEnd())}function wt(k,Ee){if(1&k&&_.\u0275\u0275template(0,bt,2,0,"span",94),2&k){_.\u0275\u0275nextContext();const G=_.\u0275\u0275reference(2),j=_.\u0275\u0275nextContext();_.\u0275\u0275property("ngIf",j.nfsForm.showError("cluster_id",G,"required")||0===(null==j.allClusters?null:j.allClusters.length))}}function zt(k,Ee){if(1&k){const G=_.\u0275\u0275getCurrentView();_.\u0275\u0275elementStart(0,"div",72)(1,"cds-select",96),_.\u0275\u0275listener("valueChange",function(){_.\u0275\u0275restoreView(G);const Ce=_.\u0275\u0275nextContext(2);return _.\u0275\u0275resetView(Ce.onExportTypeChange())}),_.\u0275\u0275elementStart(2,"option",97),_.\u0275\u0275i18n(3,32),_.\u0275\u0275elementEnd(),_.\u0275\u0275elementStart(4,"option",98),_.\u0275\u0275i18n(5,33),_.\u0275\u0275elementEnd()()()}}function Xt(k,Ee){1&k&&(_.\u0275\u0275i18nStart(0,34,1),_.\u0275\u0275element(1,"option",91),_.\u0275\u0275i18nEnd())}function kt(k,Ee){1&k&&(_.\u0275\u0275i18nStart(0,34,2),_.\u0275\u0275element(1,"option",91),_.\u0275\u0275i18nEnd())}function jt(k,Ee){1&k&&(_.\u0275\u0275i18nStart(0,34,3),_.\u0275\u0275element(1,"option",91),_.\u0275\u0275i18nEnd())}function Tt(k,Ee){if(1&k&&(_.\u0275\u0275i18nStart(0,34,4),_.\u0275\u0275element(1,"option",92),_.\u0275\u0275i18nEnd()),2&k){const G=Ee.$implicit;_.\u0275\u0275advance(),_.\u0275\u0275property("value",G.name),_.\u0275\u0275i18nExp(G.name),_.\u0275\u0275i18nApply(0)}}function gt(k,Ee){1&k&&(_.\u0275\u0275elementStart(0,"span",95),_.\u0275\u0275i18n(1,35),_.\u0275\u0275elementEnd())}function it(k,Ee){if(1&k&&_.\u0275\u0275template(0,gt,2,0,"span",94),2&k){_.\u0275\u0275nextContext(2);const G=_.\u0275\u0275reference(2),j=_.\u0275\u0275nextContext();_.\u0275\u0275property("ngIf",j.nfsForm.showError("fs_name",G,"required"))}}function Ke(k,Ee){if(1&k){const G=_.\u0275\u0275getCurrentView();_.\u0275\u0275elementStart(0,"div",72)(1,"cds-select",99),_.\u0275\u0275listener("change",function(){_.\u0275\u0275restoreView(G);const Ce=_.\u0275\u0275nextContext(2);return _.\u0275\u0275resetView(Ce.volumeChangeHandler())}),_.\u0275\u0275i18nStart(2,34),_.\u0275\u0275template(3,Xt,2,0,"option",74)(4,kt,2,0,"option",74)(5,jt,2,0,"option",74)(6,Tt,2,2,"option",75),_.\u0275\u0275i18nEnd(),_.\u0275\u0275elementEnd(),_.\u0275\u0275template(7,it,1,1,"ng-template",null,11,_.\u0275\u0275templateRefExtractor),_.\u0275\u0275elementEnd()}if(2&k){const G=_.\u0275\u0275reference(8),j=_.\u0275\u0275nextContext(2);_.\u0275\u0275advance(),_.\u0275\u0275property("invalid",j.nfsForm.controls.fsal.controls.fs_name.invalid&&j.nfsForm.controls.fsal.controls.fs_name.dirty)("invalidText",G)("skeleton",null===j.allFsNames),_.\u0275\u0275advance(2),_.\u0275\u0275property("ngIf",null===j.allFsNames),_.\u0275\u0275advance(),_.\u0275\u0275property("ngIf",null!==j.allFsNames&&0===j.allFsNames.length),_.\u0275\u0275advance(),_.\u0275\u0275property("ngIf",null!==j.allFsNames&&j.allFsNames.length>0),_.\u0275\u0275advance(),_.\u0275\u0275property("ngForOf",j.allFsNames)}}function dt(k,Ee){1&k&&(_.\u0275\u0275i18nStart(0,36,1),_.\u0275\u0275element(1,"option",91),_.\u0275\u0275i18nEnd())}function Ct(k,Ee){1&k&&(_.\u0275\u0275i18nStart(0,36,2),_.\u0275\u0275element(1,"option",91),_.\u0275\u0275i18nEnd())}function Wt(k,Ee){1&k&&(_.\u0275\u0275i18nStart(0,36,3),_.\u0275\u0275element(1,"option",91),_.\u0275\u0275i18nEnd())}function en(k,Ee){if(1&k&&(_.\u0275\u0275i18nStart(0,36,4),_.\u0275\u0275element(1,"option",92),_.\u0275\u0275i18nEnd()),2&k){const G=Ee.$implicit;_.\u0275\u0275advance(),_.\u0275\u0275property("value",G.user_id),_.\u0275\u0275i18nExp(G.user_id),_.\u0275\u0275i18nApply(0)}}function yt(k,Ee){1&k&&(_.\u0275\u0275elementStart(0,"span",95),_.\u0275\u0275i18n(1,37),_.\u0275\u0275elementEnd())}function mt(k,Ee){if(1&k&&_.\u0275\u0275template(0,yt,2,0,"span",94),2&k){_.\u0275\u0275nextContext(2);const G=_.\u0275\u0275reference(2),j=_.\u0275\u0275nextContext();_.\u0275\u0275property("ngIf",j.nfsForm.showError("user_id",G,"required"))}}function Gt(k,Ee){if(1&k&&(_.\u0275\u0275elementStart(0,"div",72)(1,"cds-select",100),_.\u0275\u0275i18nStart(2,36),_.\u0275\u0275template(3,dt,2,0,"option",74)(4,Ct,2,0,"option",74)(5,Wt,2,0,"option",74)(6,en,2,2,"option",75),_.\u0275\u0275i18nEnd(),_.\u0275\u0275elementEnd(),_.\u0275\u0275template(7,mt,1,1,"ng-template",null,12,_.\u0275\u0275templateRefExtractor),_.\u0275\u0275elementEnd()),2&k){const G=_.\u0275\u0275reference(8),j=_.\u0275\u0275nextContext(2);_.\u0275\u0275advance(),_.\u0275\u0275property("invalid",j.nfsForm.controls.fsal.controls.user_id.invalid&&j.nfsForm.controls.fsal.controls.user_id.dirty)("invalidText",G)("skeleton",null===j.allRGWUsers),_.\u0275\u0275advance(2),_.\u0275\u0275property("ngIf",null===j.allRGWUsers),_.\u0275\u0275advance(),_.\u0275\u0275property("ngIf",null!==j.allRGWUsers&&0===j.allRGWUsers.length),_.\u0275\u0275advance(),_.\u0275\u0275property("ngIf",null!==j.allRGWUsers&&j.allRGWUsers.length>0),_.\u0275\u0275advance(),_.\u0275\u0275property("ngForOf",j.allRGWUsers)}}function Lt(k,Ee){1&k&&(_.\u0275\u0275elementStart(0,"div",72)(1,"cds-checkbox",101),_.\u0275\u0275i18n(2,38),_.\u0275\u0275elementEnd()())}function Pt(k,Ee){1&k&&(_.\u0275\u0275elementStart(0,"span",95),_.\u0275\u0275i18n(1,40),_.\u0275\u0275elementEnd())}function En(k,Ee){if(1&k&&_.\u0275\u0275template(0,Pt,2,0,"span",94),2&k){_.\u0275\u0275nextContext(2);const G=_.\u0275\u0275reference(2),j=_.\u0275\u0275nextContext();_.\u0275\u0275property("ngIf",j.nfsForm.showError("sec_label_xattr",G,"required"))}}function lt(k,Ee){if(1&k&&(_.\u0275\u0275elementStart(0,"div",72)(1,"cds-text-label",102),_.\u0275\u0275i18nStart(2,39),_.\u0275\u0275element(3,"input",103),_.\u0275\u0275i18nEnd(),_.\u0275\u0275elementEnd(),_.\u0275\u0275template(4,En,1,1,"ng-template",null,13,_.\u0275\u0275templateRefExtractor),_.\u0275\u0275elementEnd()),2&k){const G=_.\u0275\u0275reference(5),j=_.\u0275\u0275nextContext(2);_.\u0275\u0275advance(),_.\u0275\u0275property("invalid",j.nfsForm.controls.sec_label_xattr.invalid&&j.nfsForm.controls.sec_label_xattr.dirty)("invalidText",G),_.\u0275\u0275advance(2),_.\u0275\u0275property("invalid",j.nfsForm.controls.sec_label_xattr.invalid&&j.nfsForm.controls.sec_label_xattr.dirty)}}function vn(k,Ee){1&k&&(_.\u0275\u0275i18nStart(0,41,1),_.\u0275\u0275element(1,"option",91),_.\u0275\u0275i18nEnd())}function Kt(k,Ee){1&k&&(_.\u0275\u0275i18nStart(0,41,2),_.\u0275\u0275element(1,"option",91),_.\u0275\u0275i18nEnd())}function dn(k,Ee){if(1&k&&(_.\u0275\u0275i18nStart(0,41,3),_.\u0275\u0275element(1,"option",106),_.\u0275\u0275i18nEnd()),2&k){const G=Ee.$implicit,j=_.\u0275\u0275nextContext(3);_.\u0275\u0275advance(),_.\u0275\u0275property("value",G.name)("selected",G.name===j.nfsForm.get("subvolume_group").value),_.\u0275\u0275i18nExp(G.name),_.\u0275\u0275i18nApply(0)}}function Nt(k,Ee){if(1&k){const G=_.\u0275\u0275getCurrentView();_.\u0275\u0275elementStart(0,"div",72)(1,"cds-select",104),_.\u0275\u0275listener("change",function(){_.\u0275\u0275restoreView(G);const Ce=_.\u0275\u0275nextContext(2);return _.\u0275\u0275resetView(Ce.getSubVol())}),_.\u0275\u0275i18nStart(2,41),_.\u0275\u0275template(3,vn,2,0,"option",74)(4,Kt,2,0,"option",74)(5,dn,2,3,"option",105),_.\u0275\u0275element(6,"option",92),_.\u0275\u0275i18nEnd(),_.\u0275\u0275elementEnd()()}if(2&k){const G=_.\u0275\u0275nextContext(2);_.\u0275\u0275advance(),_.\u0275\u0275property("skeleton",null===G.allsubvolgrps),_.\u0275\u0275advance(2),_.\u0275\u0275property("ngIf",null===G.allsubvolgrps),_.\u0275\u0275advance(),_.\u0275\u0275property("ngIf",null!==G.allsubvolgrps&&G.allsubvolgrps.length>=0),_.\u0275\u0275advance(),_.\u0275\u0275property("ngForOf",G.allsubvolgrps),_.\u0275\u0275advance(),_.\u0275\u0275property("value",G.defaultSubVolGroup),_.\u0275\u0275i18nExp(G.defaultSubVolGroup),_.\u0275\u0275i18nApply(2)}}function gn(k,Ee){1&k&&(_.\u0275\u0275i18nStart(0,42,1),_.\u0275\u0275element(1,"option",91),_.\u0275\u0275i18nEnd())}function Cn(k,Ee){1&k&&(_.\u0275\u0275i18nStart(0,42,2),_.\u0275\u0275element(1,"option",91),_.\u0275\u0275i18nEnd())}function W(k,Ee){1&k&&(_.\u0275\u0275i18nStart(0,42,3),_.\u0275\u0275element(1,"option",91),_.\u0275\u0275i18nEnd())}function Re(k,Ee){if(1&k&&(_.\u0275\u0275i18nStart(0,42,4),_.\u0275\u0275element(1,"option",106),_.\u0275\u0275i18nEnd()),2&k){const G=Ee.$implicit,j=_.\u0275\u0275nextContext(3);_.\u0275\u0275advance(),_.\u0275\u0275property("value",G.name)("selected",G.name===j.nfsForm.get("subvolume").value),_.\u0275\u0275i18nExp(G.name),_.\u0275\u0275i18nApply(0)}}function J(k,Ee){1&k&&(_.\u0275\u0275elementStart(0,"span",95),_.\u0275\u0275i18n(1,43),_.\u0275\u0275elementEnd())}function ut(k,Ee){if(1&k&&_.\u0275\u0275template(0,J,2,0,"span",94),2&k){const G=_.\u0275\u0275nextContext(3);_.\u0275\u0275property("ngIf",G.nfsForm.getValue("subvolume_group")===G.defaultSubVolGroup&&!G.nfsForm.getValue("subvolume"))}}function ht(k,Ee){if(1&k){const G=_.\u0275\u0275getCurrentView();_.\u0275\u0275elementStart(0,"div",107)(1,"cds-select",108),_.\u0275\u0275listener("change",function(){_.\u0275\u0275restoreView(G);const Ce=_.\u0275\u0275nextContext(2);return _.\u0275\u0275resetView(Ce.setSubVolPath())}),_.\u0275\u0275i18nStart(2,42),_.\u0275\u0275template(3,gn,2,0,"option",74)(4,Cn,2,0,"option",74)(5,W,2,0,"option",74)(6,Re,2,3,"option",105),_.\u0275\u0275i18nEnd(),_.\u0275\u0275elementEnd(),_.\u0275\u0275template(7,ut,1,1,"ng-template",null,14,_.\u0275\u0275templateRefExtractor),_.\u0275\u0275elementEnd()}if(2&k){const G=_.\u0275\u0275reference(8),j=_.\u0275\u0275nextContext(2);_.\u0275\u0275advance(),_.\u0275\u0275property("skeleton",null===j.allsubvols)("invalid",j.nfsForm.controls.subvolume.invalid&&j.nfsForm.controls.subvolume.dirty)("invalidText",G),_.\u0275\u0275advance(2),_.\u0275\u0275property("ngIf",null===j.allsubvols),_.\u0275\u0275advance(),_.\u0275\u0275property("ngIf",null!==j.allsubvols&&0===j.allsubvols.length),_.\u0275\u0275advance(),_.\u0275\u0275property("ngIf",null!==j.allsubvols&&j.allsubvols.length>0),_.\u0275\u0275advance(),_.\u0275\u0275property("ngForOf",j.allsubvols)}}function Gn(k,Ee){1&k&&(_.\u0275\u0275elementStart(0,"span",95),_.\u0275\u0275i18n(1,45),_.\u0275\u0275elementEnd())}function Hn(k,Ee){1&k&&(_.\u0275\u0275elementStart(0,"span",95),_.\u0275\u0275i18nStart(1,46),_.\u0275\u0275element(2,"code"),_.\u0275\u0275i18nEnd(),_.\u0275\u0275elementEnd())}function Le(k,Ee){1&k&&(_.\u0275\u0275elementStart(0,"span",95),_.\u0275\u0275i18n(1,47),_.\u0275\u0275elementEnd())}function Vn(k,Ee){1&k&&(_.\u0275\u0275elementStart(0,"span",95),_.\u0275\u0275i18n(1,48),_.\u0275\u0275elementEnd())}function Sn(k,Ee){if(1&k&&_.\u0275\u0275template(0,Gn,2,0,"span",94)(1,Hn,3,0,"span",94)(2,Le,2,0,"span",94)(3,Vn,2,0,"span",94),2&k){_.\u0275\u0275nextContext(2);const G=_.\u0275\u0275reference(2),j=_.\u0275\u0275nextContext();_.\u0275\u0275property("ngIf",j.nfsForm.showError("path",G,"required")),_.\u0275\u0275advance(),_.\u0275\u0275property("ngIf",j.nfsForm.get("path").hasError("isIsolatedSlash")&&j.nfsForm.get("path").touched),_.\u0275\u0275advance(),_.\u0275\u0275property("ngIf",j.nfsForm.showError("path",G,"pattern")),_.\u0275\u0275advance(),_.\u0275\u0275property("ngIf",j.nfsForm.showError("path",G,"pathNameNotAllowed"))}}function un(k,Ee){if(1&k&&(_.\u0275\u0275elementStart(0,"div",72)(1,"cds-text-label",109),_.\u0275\u0275i18nStart(2,44),_.\u0275\u0275element(3,"input",110),_.\u0275\u0275i18nEnd(),_.\u0275\u0275elementEnd(),_.\u0275\u0275template(4,Sn,4,4,"ng-template",null,15,_.\u0275\u0275templateRefExtractor),_.\u0275\u0275elementEnd()),2&k){const G=_.\u0275\u0275reference(5),j=_.\u0275\u0275nextContext(2);_.\u0275\u0275advance(),_.\u0275\u0275property("invalid",j.nfsForm.controls.path.invalid&&j.nfsForm.controls.path.dirty)("invalidText",G),_.\u0275\u0275advance(2),_.\u0275\u0275property("ngbTypeahead",j.pathDataSource)("invalid",j.nfsForm.controls.path.invalid&&j.nfsForm.controls.path.dirty)}}function Qt(k,Ee){1&k&&(_.\u0275\u0275elementStart(0,"span",95),_.\u0275\u0275i18n(1,50),_.\u0275\u0275elementEnd())}function ge(k,Ee){1&k&&(_.\u0275\u0275elementStart(0,"span",95),_.\u0275\u0275i18nStart(1,51),_.\u0275\u0275element(2,"a",113),_.\u0275\u0275i18nEnd(),_.\u0275\u0275elementEnd())}function Ht(k,Ee){if(1&k&&_.\u0275\u0275template(0,Qt,2,0,"span",94)(1,ge,3,0,"span",94),2&k){_.\u0275\u0275nextContext(2);const G=_.\u0275\u0275reference(2),j=_.\u0275\u0275nextContext();_.\u0275\u0275property("ngIf",j.nfsForm.showError("path",G,"required")),_.\u0275\u0275advance(),_.\u0275\u0275property("ngIf",j.nfsForm.showError("path",G,"bucketNameNotAllowed"))}}function Bn(k,Ee){if(1&k&&(_.\u0275\u0275elementStart(0,"div",72)(1,"cds-text-label",111),_.\u0275\u0275i18nStart(2,49),_.\u0275\u0275element(3,"input",112),_.\u0275\u0275i18nEnd(),_.\u0275\u0275elementEnd(),_.\u0275\u0275template(4,Ht,2,2,"ng-template",null,16,_.\u0275\u0275templateRefExtractor),_.\u0275\u0275elementEnd()),2&k){const G=_.\u0275\u0275reference(5),j=_.\u0275\u0275nextContext(2);_.\u0275\u0275advance(),_.\u0275\u0275property("invalid",j.nfsForm.controls.path.invalid&&j.nfsForm.controls.path.dirty)("invalidText",G),_.\u0275\u0275advance(2),_.\u0275\u0275property("ngbTypeahead",j.bucketDataSource)("invalid",j.nfsForm.controls.path.invalid&&j.nfsForm.controls.path.dirty)}}function zn(k,Ee){1&k&&(_.\u0275\u0275elementStart(0,"span",95),_.\u0275\u0275i18n(1,52),_.\u0275\u0275elementEnd())}function Mn(k,Ee){if(1&k&&_.\u0275\u0275template(0,zn,2,0,"span",94),2&k){_.\u0275\u0275nextContext();const G=_.\u0275\u0275reference(2),j=_.\u0275\u0275nextContext();_.\u0275\u0275property("ngIf",j.nfsForm.showError("protocolNfsv3",G,"required")||j.nfsForm.showError("protocolNfsv4",G,"required"))}}function Xn(k,Ee){1&k&&(_.\u0275\u0275elementStart(0,"span"),_.\u0275\u0275i18n(1,54),_.\u0275\u0275elementEnd(),_.\u0275\u0275element(2,"br"),_.\u0275\u0275elementStart(3,"span"),_.\u0275\u0275i18n(4,55),_.\u0275\u0275elementEnd())}function kn(k,Ee){1&k&&(_.\u0275\u0275elementStart(0,"span",95),_.\u0275\u0275i18n(1,56),_.\u0275\u0275elementEnd())}function jn(k,Ee){1&k&&(_.\u0275\u0275elementStart(0,"span",95),_.\u0275\u0275i18n(1,57),_.\u0275\u0275elementEnd())}function Wn(k,Ee){1&k&&(_.\u0275\u0275elementStart(0,"span",95),_.\u0275\u0275i18n(1,58),_.\u0275\u0275elementEnd())}function so(k,Ee){1&k&&(_.\u0275\u0275elementStart(0,"span",95),_.\u0275\u0275i18n(1,59),_.\u0275\u0275elementEnd())}function Kn(k,Ee){if(1&k&&_.\u0275\u0275template(0,kn,2,0,"span",94)(1,jn,2,0,"span",94)(2,Wn,2,0,"span",94)(3,so,2,0,"span",94),2&k){_.\u0275\u0275nextContext(2);const G=_.\u0275\u0275reference(2),j=_.\u0275\u0275nextContext();_.\u0275\u0275property("ngIf",j.nfsForm.showError("pseudo",G,"required")),_.\u0275\u0275advance(),_.\u0275\u0275property("ngIf",j.nfsForm.showError("pseudo",G,"pseudoAlreadyExists")),_.\u0275\u0275advance(),_.\u0275\u0275property("ngIf",j.nfsForm.showError("pseudo",G,"pattern")),_.\u0275\u0275advance(),_.\u0275\u0275property("ngIf",j.nfsForm.showError("pseudo",G,"minlength")&&"/"===j.nfsForm.getValue("pseudo"))}}function Yt(k,Ee){if(1&k&&(_.\u0275\u0275elementStart(0,"div",72)(1,"cds-text-label",114),_.\u0275\u0275i18nStart(2,53),_.\u0275\u0275element(3,"input",115),_.\u0275\u0275i18nEnd(),_.\u0275\u0275elementEnd(),_.\u0275\u0275template(4,Xn,5,0,"ng-template",null,17,_.\u0275\u0275templateRefExtractor)(6,Kn,4,4,"ng-template",null,18,_.\u0275\u0275templateRefExtractor),_.\u0275\u0275elementEnd()),2&k){const G=_.\u0275\u0275reference(5),j=_.\u0275\u0275reference(7),Ce=_.\u0275\u0275nextContext(2);_.\u0275\u0275advance(),_.\u0275\u0275property("helperText",G)("invalid",Ce.nfsForm.controls.pseudo.invalid&&Ce.nfsForm.controls.pseudo.dirty)("invalidText",j),_.\u0275\u0275advance(2),_.\u0275\u0275property("invalid",Ce.nfsForm.controls.pseudo.invalid&&Ce.nfsForm.controls.pseudo.dirty)}}function hn(k,Ee){1&k&&(_.\u0275\u0275i18nStart(0,24,1),_.\u0275\u0275element(1,"option",91),_.\u0275\u0275i18nEnd())}function pn(k,Ee){1&k&&(_.\u0275\u0275i18nStart(0,24,2),_.\u0275\u0275element(1,"option",91),_.\u0275\u0275i18nEnd())}function Jt(k,Ee){if(1&k&&(_.\u0275\u0275i18nStart(0,24,3),_.\u0275\u0275element(1,"option",92),_.\u0275\u0275i18nEnd()),2&k){const G=Ee.$implicit;_.\u0275\u0275advance(),_.\u0275\u0275property("value",G.value),_.\u0275\u0275i18nExp(G.value),_.\u0275\u0275i18nApply(0)}}function Rn(k,Ee){if(1&k&&(_.\u0275\u0275elementStart(0,"span"),_.\u0275\u0275text(1),_.\u0275\u0275elementEnd()),2&k){const G=_.\u0275\u0275nextContext(3);_.\u0275\u0275advance(),_.\u0275\u0275textInterpolate1(" ",G.getAccessTypeHelp(G.nfsForm.getValue("access_type"))," ")}}function On(k,Ee){if(1&k&&_.\u0275\u0275template(0,Rn,2,1,"span",116),2&k){const G=_.\u0275\u0275nextContext(2);_.\u0275\u0275property("ngIf",G.nfsForm.getValue("access_type"))}}function Qn(k,Ee){1&k&&(_.\u0275\u0275elementStart(0,"span"),_.\u0275\u0275i18nStart(1,60),_.\u0275\u0275element(2,"cd-doc",117),_.\u0275\u0275i18nEnd(),_.\u0275\u0275elementEnd())}function Yn(k,Ee){if(1&k&&_.\u0275\u0275template(0,Qn,3,0,"span",116),2&k){const G=_.\u0275\u0275nextContext(2);_.\u0275\u0275property("ngIf","RW"===G.nfsForm.getValue("access_type")&&"RGW"===G.storageBackend)}}function Jn(k,Ee){1&k&&(_.\u0275\u0275elementStart(0,"span",95),_.\u0275\u0275i18n(1,61),_.\u0275\u0275elementEnd())}function Zn(k,Ee){if(1&k&&_.\u0275\u0275template(0,Jn,2,0,"span",94),2&k){_.\u0275\u0275nextContext();const G=_.\u0275\u0275reference(2),j=_.\u0275\u0275nextContext();_.\u0275\u0275property("ngIf",j.nfsForm.showError("access_type",G,"required"))}}function Pn(k,Ee){1&k&&(_.\u0275\u0275i18nStart(0,25,1),_.\u0275\u0275element(1,"option",91),_.\u0275\u0275i18nEnd())}function qn(k,Ee){1&k&&(_.\u0275\u0275i18nStart(0,25,2),_.\u0275\u0275element(1,"option",91),_.\u0275\u0275i18nEnd())}function eo(k,Ee){if(1&k&&(_.\u0275\u0275i18nStart(0,25,3),_.\u0275\u0275element(1,"option",92),_.\u0275\u0275i18nEnd()),2&k){const G=Ee.$implicit;_.\u0275\u0275advance(),_.\u0275\u0275property("value",G),_.\u0275\u0275i18nExp(G),_.\u0275\u0275i18nApply(0)}}function le(k,Ee){1&k&&(_.\u0275\u0275elementStart(0,"span"),_.\u0275\u0275i18n(1,62),_.\u0275\u0275elementEnd())}function ke(k,Ee){1&k&&(_.\u0275\u0275elementStart(0,"span"),_.\u0275\u0275i18n(1,63),_.\u0275\u0275elementEnd())}function ee(k,Ee){1&k&&(_.\u0275\u0275elementStart(0,"span"),_.\u0275\u0275i18n(1,64),_.\u0275\u0275elementEnd())}function $(k,Ee){1&k&&(_.\u0275\u0275elementStart(0,"span"),_.\u0275\u0275i18n(1,65),_.\u0275\u0275elementEnd())}function ne(k,Ee){if(1&k&&_.\u0275\u0275template(0,le,2,0,"span",116)(1,ke,2,0,"span",116)(2,ee,2,0,"span",116)(3,$,2,0,"span",116),2&k){const G=_.\u0275\u0275nextContext(2);_.\u0275\u0275property("ngIf","root_squash"===G.nfsForm.getValue("squash")),_.\u0275\u0275advance(),_.\u0275\u0275property("ngIf","root_id_squash"===G.nfsForm.getValue("squash")),_.\u0275\u0275advance(),_.\u0275\u0275property("ngIf","all_squash"===G.nfsForm.getValue("squash")),_.\u0275\u0275advance(),_.\u0275\u0275property("ngIf","no_root_squash"===G.nfsForm.getValue("squash"))}}function b(k,Ee){1&k&&(_.\u0275\u0275elementStart(0,"span",95),_.\u0275\u0275i18n(1,66),_.\u0275\u0275elementEnd())}function U(k,Ee){if(1&k&&_.\u0275\u0275template(0,b,2,0,"span",94),2&k){_.\u0275\u0275nextContext();const G=_.\u0275\u0275reference(2),j=_.\u0275\u0275nextContext();_.\u0275\u0275property("ngIf",j.nfsForm.showError("squash",G,"required"))}}function z(k,Ee){1&k&&(_.\u0275\u0275elementStart(0,"span",95),_.\u0275\u0275i18n(1,67),_.\u0275\u0275elementEnd())}function se(k,Ee){if(1&k&&_.\u0275\u0275template(0,z,2,0,"span",94),2&k){_.\u0275\u0275nextContext();const G=_.\u0275\u0275reference(2),j=_.\u0275\u0275nextContext();_.\u0275\u0275property("ngIf",j.nfsForm.showError("transportUDP",G,"required")||j.nfsForm.showError("transportTCP",G,"required"))}}function $e(k,Ee){if(1&k&&(_.\u0275\u0275elementStart(0,"cd-alert-panel",118),_.\u0275\u0275text(1),_.\u0275\u0275elementEnd()),2&k){const G=_.\u0275\u0275nextContext(2);_.\u0275\u0275advance(),_.\u0275\u0275textInterpolate1(" ",G.storageBackendError," ")}}function Me(k,Ee){if(1&k){const G=_.\u0275\u0275getCurrentView();_.\u0275\u0275elementContainerStart(0),_.\u0275\u0275elementStart(1,"form",70,0)(3,"div",71),_.\u0275\u0275i18n(4,19),_.\u0275\u0275pipe(5,"titlecase"),_.\u0275\u0275pipe(6,"upperFirst"),_.\u0275\u0275elementEnd(),_.\u0275\u0275elementStart(7,"div",72)(8,"cds-select",73),_.\u0275\u0275i18nStart(9,20),_.\u0275\u0275template(10,pt,2,0,"option",74)(11,ye,2,0,"option",74)(12,je,2,0,"option",74)(13,ot,2,2,"option",75),_.\u0275\u0275i18nEnd(),_.\u0275\u0275elementEnd(),_.\u0275\u0275template(14,tt,2,0,"cd-alert-panel",76)(15,Ft,2,0,"ng-template",null,1,_.\u0275\u0275templateRefExtractor)(17,wt,1,1,"ng-template",null,2,_.\u0275\u0275templateRefExtractor),_.\u0275\u0275elementEnd(),_.\u0275\u0275template(19,zt,6,0,"div",77),_.\u0275\u0275elementStart(20,"div",78),_.\u0275\u0275template(21,Ke,9,7,"div",77)(22,Gt,9,7,"div",77),_.\u0275\u0275elementEnd(),_.\u0275\u0275template(23,Lt,3,0,"div",77)(24,lt,6,3,"div",77)(25,Nt,7,6,"div",77)(26,ht,9,7,"div",79)(27,un,6,4,"div",77)(28,Bn,6,4,"div",77),_.\u0275\u0275elementStart(29,"div",72)(30,"legend",80),_.\u0275\u0275i18n(31,21),_.\u0275\u0275elementEnd(),_.\u0275\u0275elementStart(32,"cds-checkbox",81),_.\u0275\u0275i18n(33,22),_.\u0275\u0275elementEnd(),_.\u0275\u0275elementStart(34,"cds-checkbox",82),_.\u0275\u0275i18n(35,23),_.\u0275\u0275elementEnd(),_.\u0275\u0275template(36,Mn,1,1,"ng-template",null,3,_.\u0275\u0275templateRefExtractor),_.\u0275\u0275elementEnd(),_.\u0275\u0275template(38,Yt,8,4,"div",77),_.\u0275\u0275elementStart(39,"div",72)(40,"cds-select",83),_.\u0275\u0275i18nStart(41,24),_.\u0275\u0275template(42,hn,2,0,"option",74)(43,pn,2,0,"option",74)(44,Jt,2,2,"option",75),_.\u0275\u0275i18nEnd(),_.\u0275\u0275elementEnd(),_.\u0275\u0275template(45,On,1,1,"ng-template",null,4,_.\u0275\u0275templateRefExtractor)(47,Yn,1,1,"ng-template",null,5,_.\u0275\u0275templateRefExtractor)(49,Zn,1,1,"ng-template",null,6,_.\u0275\u0275templateRefExtractor),_.\u0275\u0275elementEnd(),_.\u0275\u0275elementStart(51,"div",72)(52,"cds-select",84),_.\u0275\u0275i18nStart(53,25),_.\u0275\u0275template(54,Pn,2,0,"option",74)(55,qn,2,0,"option",74)(56,eo,2,2,"option",75),_.\u0275\u0275i18nEnd(),_.\u0275\u0275elementEnd(),_.\u0275\u0275template(57,ne,4,4,"ng-template",null,7,_.\u0275\u0275templateRefExtractor)(59,U,1,1,"ng-template",null,8,_.\u0275\u0275templateRefExtractor),_.\u0275\u0275elementEnd(),_.\u0275\u0275elementStart(61,"div",72)(62,"legend",85),_.\u0275\u0275i18n(63,26),_.\u0275\u0275elementEnd(),_.\u0275\u0275elementStart(64,"cds-checkbox",86),_.\u0275\u0275i18n(65,27),_.\u0275\u0275elementEnd(),_.\u0275\u0275elementStart(66,"cds-checkbox",87),_.\u0275\u0275i18n(67,28),_.\u0275\u0275elementEnd(),_.\u0275\u0275template(68,se,1,1,"ng-template",null,9,_.\u0275\u0275templateRefExtractor),_.\u0275\u0275elementEnd(),_.\u0275\u0275element(70,"cd-nfs-form-client",88,10),_.\u0275\u0275template(72,$e,2,1,"cd-alert-panel",89),_.\u0275\u0275elementStart(73,"cd-form-button-panel",90),_.\u0275\u0275pipe(74,"titlecase"),_.\u0275\u0275pipe(75,"upperFirst"),_.\u0275\u0275listener("submitActionEvent",function(){_.\u0275\u0275restoreView(G);const Ce=_.\u0275\u0275nextContext();return _.\u0275\u0275resetView(Ce.submitAction())}),_.\u0275\u0275elementEnd()(),_.\u0275\u0275elementContainerEnd()}if(2&k){const G=_.\u0275\u0275reference(16),j=_.\u0275\u0275reference(18),Ce=_.\u0275\u0275reference(37),xe=_.\u0275\u0275reference(46),nt=_.\u0275\u0275reference(48),at=_.\u0275\u0275reference(50),St=_.\u0275\u0275reference(58),vt=_.\u0275\u0275reference(60),Mt=_.\u0275\u0275reference(69),Fe=_.\u0275\u0275nextContext();_.\u0275\u0275advance(),_.\u0275\u0275property("formGroup",Fe.nfsForm),_.\u0275\u0275advance(5),_.\u0275\u0275i18nExp(_.\u0275\u0275pipeBind1(5,52,Fe.action))(_.\u0275\u0275pipeBind1(6,54,Fe.resource)),_.\u0275\u0275i18nApply(4),_.\u0275\u0275advance(2),_.\u0275\u0275property("invalid",Fe.nfsForm.controls.cluster_id.invalid&&Fe.nfsForm.controls.cluster_id.dirty)("invalidText",j)("skeleton",null===Fe.allClusters)("helperText",G),_.\u0275\u0275advance(2),_.\u0275\u0275property("ngIf",null===Fe.allClusters),_.\u0275\u0275advance(),_.\u0275\u0275property("ngIf",null!==Fe.allClusters&&0===Fe.allClusters.length),_.\u0275\u0275advance(),_.\u0275\u0275property("ngIf",null!==Fe.allClusters&&Fe.allClusters.length>0),_.\u0275\u0275advance(),_.\u0275\u0275property("ngForOf",Fe.allClusters),_.\u0275\u0275advance(),_.\u0275\u0275property("ngIf",0===(null==Fe.allClusters?null:Fe.allClusters.length)),_.\u0275\u0275advance(5),_.\u0275\u0275property("ngIf","RGW"===Fe.storageBackend&&!Fe.isEdit),_.\u0275\u0275advance(2),_.\u0275\u0275property("ngIf","CEPH"===Fe.storageBackend),_.\u0275\u0275advance(),_.\u0275\u0275property("ngIf","RGW"===Fe.storageBackend&&"user"===Fe.nfsForm.getValue("rgw_export_type")),_.\u0275\u0275advance(),_.\u0275\u0275property("ngIf","CEPH"===Fe.storageBackend),_.\u0275\u0275advance(),_.\u0275\u0275property("ngIf",Fe.nfsForm.getValue("security_label")),_.\u0275\u0275advance(),_.\u0275\u0275property("ngIf","CEPH"===Fe.storageBackend&&Fe.nfsForm.getValue("fsal").fs_name&&!Fe.isEdit),_.\u0275\u0275advance(),_.\u0275\u0275property("ngIf","CEPH"===Fe.storageBackend&&Fe.nfsForm.getValue("fsal").fs_name&&!Fe.isEdit),_.\u0275\u0275advance(),_.\u0275\u0275property("ngIf","CEPH"===Fe.storageBackend),_.\u0275\u0275advance(),_.\u0275\u0275property("ngIf","RGW"===Fe.storageBackend&&"bucket"===Fe.nfsForm.getValue("rgw_export_type")),_.\u0275\u0275advance(4),_.\u0275\u0275property("invalid",Fe.nfsForm.controls.protocolNfsv3.invalid&&Fe.nfsForm.controls.protocolNfsv3.dirty)("invalidText",Ce),_.\u0275\u0275advance(2),_.\u0275\u0275property("invalid",Fe.nfsForm.controls.protocolNfsv4.invalid&&Fe.nfsForm.controls.protocolNfsv4.dirty)("invalidText",Ce),_.\u0275\u0275advance(4),_.\u0275\u0275property("ngIf",Fe.nfsForm.getValue("protocolNfsv4")||Fe.nfsForm.getValue("protocolNfsv3")),_.\u0275\u0275advance(2),_.\u0275\u0275property("invalid",Fe.nfsForm.controls.access_type.invalid&&Fe.nfsForm.controls.access_type.dirty)("invalidText",at)("helperText",xe)("warn","RW"===Fe.nfsForm.getValue("access_type")&&"RGW"===Fe.storageBackend)("warnText",nt)("skeleton",null===Fe.nfsAccessType),_.\u0275\u0275advance(2),_.\u0275\u0275property("ngIf",null===Fe.nfsAccessType),_.\u0275\u0275advance(),_.\u0275\u0275property("ngIf",null!==Fe.nfsAccessType&&0===Fe.nfsAccessType.length),_.\u0275\u0275advance(),_.\u0275\u0275property("ngForOf",Fe.nfsAccessType),_.\u0275\u0275advance(8),_.\u0275\u0275property("invalid",Fe.nfsForm.controls.squash.invalid&&Fe.nfsForm.controls.squash.dirty)("invalidText",vt)("skeleton",null===Fe.nfsSquash)("helperText",St),_.\u0275\u0275advance(2),_.\u0275\u0275property("ngIf",null===Fe.nfsSquash),_.\u0275\u0275advance(),_.\u0275\u0275property("ngIf",null!==Fe.nfsSquash&&0===Fe.nfsSquash.length),_.\u0275\u0275advance(),_.\u0275\u0275property("ngForOf",Fe.nfsSquash),_.\u0275\u0275advance(8),_.\u0275\u0275property("invalid",Fe.nfsForm.controls.transportUDP.invalid&&Fe.nfsForm.controls.transportUDP.dirty)("invalidText",Mt),_.\u0275\u0275advance(2),_.\u0275\u0275property("invalid",Fe.nfsForm.controls.transportTCP.invalid&&Fe.nfsForm.controls.transportTCP.dirty)("invalidText",Mt),_.\u0275\u0275advance(4),_.\u0275\u0275property("form",Fe.nfsForm)("clients",Fe.clients),_.\u0275\u0275advance(2),_.\u0275\u0275property("ngIf",!!Fe.storageBackendError),_.\u0275\u0275advance(),_.\u0275\u0275property("form",Fe.nfsForm)("disabled",!!Fe.storageBackendError)("submitText",_.\u0275\u0275pipeBind1(74,56,Fe.action)+" "+_.\u0275\u0275pipeBind1(75,58,Fe.resource))}}let Ze=(()=>{class k extends M.g{constructor(G,j,Ce,xe,nt,at,St,vt,Mt,Fe,Zt,st){super(),this.authStorageService=G,this.nfsService=j,this.subvolService=Ce,this.subvolgrpService=xe,this.route=nt,this.router=at,this.rgwBucketService=St,this.rgwUserService=vt,this.rgwSiteService=Mt,this.formBuilder=Fe,this.taskWrapper=Zt,this.actionLabels=st,this.clients=[],this.isEdit=!1,this.cluster_id=null,this.export_id=null,this.allClusters=null,this.icons=N.FI,this.allFsNames=null,this.allRGWUsers=null,this.storageBackendError=null,this.defaultAccessType={RGW:"RO"},this.nfsAccessType=[],this.nfsSquash=[],this.allsubvolgrps=[],this.allsubvols=[],this.selectedFsName="",this.selectedSubvolGroup="",this.selectedSubvol="",this.defaultSubVolGroup=Se.H,this.pathDataSource=bn=>bn.pipe((0,m.debounceTime)(200),(0,m.distinctUntilChanged)(),(0,m.mergeMap)(mn=>this.getPathTypeahead(mn)),(0,m.map)(mn=>mn)),this.bucketDataSource=bn=>bn.pipe((0,m.debounceTime)(200),(0,m.distinctUntilChanged)(),(0,m.mergeMap)(mn=>this.getBucketTypeahead(mn))),this.permission=this.authStorageService.getPermissions().pool,this.resource=$localize`NFS export`,this.storageBackend=(0,T.C)(this.router.url)}ngOnInit(){this.nfsAccessType=this.nfsService.nfsAccessType,this.nfsSquash=Object.keys(this.nfsService.nfsSquash),this.createForm();const G=[this.nfsService.listClusters()];G.push(this.storageBackend===v.q.RGW?this.rgwSiteService.get("realms"):this.nfsService.filesystems()),this.router.url.startsWith(`/${(0,T.q)(this.storageBackend)}/nfs/edit`)&&(this.isEdit=!0),this.isEdit?(this.action=this.actionLabels.EDIT,this.route.params.subscribe(j=>{this.cluster_id=decodeURIComponent(j.cluster_id),this.export_id=decodeURIComponent(j.export_id),j.rgw_export_type&&(this.nfsForm.get("rgw_export_type").setValue(j.rgw_export_type),j.rgw_export_type===Te.V.BUCKET?this.setBucket():this.setUsers()),G.push(this.nfsService.get(this.cluster_id,this.export_id)),this.getData(G)}),this.nfsForm.get("cluster_id").disable(),this.nfsForm.get("fsal").disable(),this.nfsForm.get("path").disable()):(this.action=this.actionLabels.CREATE,this.route.params.subscribe(j=>{this.selectedFsName=j.fs_name,this.selectedSubvolGroup=j.subvolume_group,j.subvolume&&(this.selectedSubvol=j.subvolume)}),this.storageBackend===v.q.RGW&&(this.nfsForm.get("rgw_export_type").setValue("bucket"),this.setBucket()),this.getData(G))}getData(G){(0,S.forkJoin)(G).subscribe(j=>{this.resolveClusters(j[0]),this.resolveFsals(j[1]),j[2]&&this.resolveModel(j[2]),this.loadingReady()})}volumeChangeHandler(){this.isDefaultSubvolumeGroup()}getSubVol(){var G=this;return(0,a.A)(function*(){const j=G.nfsForm.getValue("fsal").fs_name,Ce=G.nfsForm.getValue("subvolume_group");yield G.setSubVolGrpPath(),(Ce===G.defaultSubVolGroup?G.subvolService.get(j):G.subvolService.get(j,Ce)).subscribe(xe=>{G.allsubvols=xe}),G.setUpVolumeValidation()})()}getSubVolGrp(G){this.subvolgrpService.get(G).subscribe(j=>{this.allsubvolgrps=j})}setSubVolGrpPath(){const G=this.nfsForm.getValue("fsal").fs_name,j=this.nfsForm.getValue("subvolume_group");return new Promise((Ce,xe)=>{j==this.defaultSubVolGroup?this.updatePath("/volumes/"+this.defaultSubVolGroup):""!=j?this.subvolgrpService.info(G,j).pipe((0,m.map)(nt=>nt.path)).subscribe(nt=>{this.updatePath(nt),Ce()},nt=>xe(nt)):(this.updatePath(""),this.setUpVolumeValidation()),Ce()})}isDefaultSubvolumeGroup(){const G=this.nfsForm.getValue("fsal").fs_name;this.getSubVolGrp(G),this.getSubVol(),this.updatePath("/volumes/"+this.defaultSubVolGroup),this.setUpVolumeValidation()}setSubVolPath(){return new Promise((G,j)=>{const Ce=this.nfsForm.getValue("subvolume"),xe=this.nfsForm.getValue("subvolume_group"),nt=this.nfsForm.getValue("fsal").fs_name;this.subvolService.info(nt,Ce,xe===this.defaultSubVolGroup?"":xe).pipe((0,m.map)(at=>at.path)).subscribe(at=>{this.updatePath(at),G()},at=>j(at))})}setUpVolumeValidation(){const G=this.nfsForm.get("subvolume_group").value,j=this.nfsForm.get("subvolume");G==this.defaultSubVolGroup?j?.setValidators([e.Validators.required]):j?.clearValidators(),j?.updateValueAndValidity()}updatePath(G){this.nfsForm.patchValue({path:G})}createForm(){this.nfsForm=new O.$({cluster_id:new e.UntypedFormControl("",{validators:[e.Validators.required]}),path:new e.UntypedFormControl("",{validators:[e.Validators.required,f.xQ.custom("isIsolatedSlash",this.isolatedSlashCondition)]}),protocolNfsv3:new e.UntypedFormControl(!0,{validators:[f.xQ.requiredIf({protocolNfsv4:!1},G=>!G)]}),protocolNfsv4:new e.UntypedFormControl(!0,{validators:[f.xQ.requiredIf({protocolNfsv3:!1},G=>!G)]}),pseudo:new e.UntypedFormControl("",{validators:[f.xQ.requiredIf({protocolNfsv4:!0,protocolNfsv3:!0}),e.Validators.pattern("^/[^><|&()]*$")]}),access_type:new e.UntypedFormControl("RW"),squash:new e.UntypedFormControl(this.nfsSquash[0]),transportUDP:new e.UntypedFormControl(!0,{validators:[f.xQ.requiredIf({transportTCP:!1},G=>!G)]}),transportTCP:new e.UntypedFormControl(!0,{validators:[f.xQ.requiredIf({transportUDP:!1},G=>!G)]}),clients:this.formBuilder.array([]),security_label:new e.UntypedFormControl(!1),fsal:new O.$({name:new e.UntypedFormControl(this.storageBackend,{validators:[e.Validators.required]}),user_id:new e.UntypedFormControl("",{validators:[f.xQ.requiredIf({name:"RGW"})]}),fs_name:new e.UntypedFormControl("",{validators:[f.xQ.requiredIf({name:"CEPH"})]})}),subvolume_group:new e.UntypedFormControl(this.defaultSubVolGroup),subvolume:new e.UntypedFormControl(""),sec_label_xattr:new e.UntypedFormControl("security.selinux",f.xQ.requiredIf({security_label:!0,"fsal.name":"CEPH"})),rgw_export_type:new e.UntypedFormControl(null,f.xQ.requiredIf({"fsal.name":"RGW"}))})}resolveModel(G){"CEPH"===G.fsal.name&&(G.sec_label_xattr=G.fsal.sec_label_xattr),G.protocolNfsv4=-1!==G.protocols.indexOf(4),G.protocolNfsv3=-1!==G.protocols.indexOf(3),delete G.protocols,G.transportTCP=-1!==G.transports.indexOf("TCP"),G.transportUDP=-1!==G.transports.indexOf("UDP"),delete G.transports,Object.entries(this.nfsService.nfsSquash).forEach(([j,Ce])=>{Ce.includes(G.squash)&&(G.squash=j)}),G.clients.forEach(j=>{let Ce="";j.addresses.forEach(xe=>{Ce+=xe+", "}),Ce.length>=2&&(Ce=Ce.substring(0,Ce.length-2)),j.addresses=Ce}),this.nfsForm.patchValue(G),this.setPathValidation(),this.clients=G.clients}resolveClusters(G){this.allClusters=[];for(const j of G)this.allClusters.push({cluster_id:j});!this.isEdit&&this.allClusters.length>0&&this.nfsForm.get("cluster_id").setValue(this.allClusters[0].cluster_id)}resolveFsals(G){this.storageBackend===v.q.RGW?this.resolveRealms(G):this.resolveFilesystems(G),!this.isEdit&&this.storageBackend===v.q.RGW&&this.nfsForm.patchValue({path:"",access_type:this.defaultAccessType[v.q.RGW]})}resolveRouteParams(){R().isEmpty(this.selectedFsName)||(this.nfsForm.patchValue({fsal:{fs_name:this.selectedFsName}}),this.getSubVolGrp(this.selectedFsName)),R().isEmpty(this.selectedSubvolGroup)||(this.nfsForm.patchValue({subvolume_group:this.selectedSubvolGroup}),this.getSubVol()),R().isEmpty(this.selectedSubvol)||(this.nfsForm.patchValue({subvolume:this.selectedSubvol}),this.setSubVolPath())}resolveFilesystems(G){this.allFsNames=G,this.isEdit||this.resolveRouteParams()}resolveRealms(G){0!==G.length&&this.rgwSiteService.isDefaultRealm().pipe((0,m.mergeMap)(j=>{if(!j)throw new Error("Selected realm is not the default.");return(0,S.of)(!0)})).subscribe({error:j=>{const Ce=this.nfsService.nfsFsal.find(xe=>xe.value===this.storageBackend).descr;this.storageBackendError=$localize`${Ce} backend is not available. ${j}`}})}setUsers(){this.nfsForm.get("fsal.user_id").enable(),this.nfsForm.get("path").setValue(""),this.nfsForm.get("path").disable(),this.rgwUserService.list().subscribe(G=>{this.allRGWUsers=G})}setBucket(){this.nfsForm.get("path").enable(),this.nfsForm.get("fsal.user_id").setValue(""),this.nfsForm.get("fsal").disable(),this.setPathValidation()}onExportTypeChange(){this.nfsForm.getValue("rgw_export_type")===Te.V.BUCKET?this.setBucket():this.setUsers()}accessTypeChangeHandler(){const G=this.nfsForm.getValue("name"),j=this.nfsForm.getValue("access_type");this.defaultAccessType[G]=j}isolatedSlashCondition(G){return"/"===G}setPathValidation(){const G=this.nfsForm.get("path");G.setAsyncValidators(this.storageBackend===v.q.RGW?[f.xQ.bucketExistence(!0,this.rgwBucketService)]:[this.pathExistence(!0)]),this.isEdit&&G.markAsDirty()}getAccessTypeHelp(G){const j=this.nfsAccessType.find(Ce=>{if(G===Ce.value)return Ce});return R().isObjectLike(j)?j.help:""}getId(){return R().isString(this.nfsForm.getValue("cluster_id"))&&R().isString(this.nfsForm.getValue("path"))?this.nfsForm.getValue("cluster_id")+":"+this.nfsForm.getValue("path"):""}getPathTypeahead(G){if(!R().isString(G)||"/"===G)return(0,S.of)([]);const j=this.nfsForm.getValue("fsal").fs_name;return this.nfsService.lsDir(j,G).pipe((0,m.map)(Ce=>Ce.paths.filter(xe=>xe.toLowerCase().includes(G)).slice(0,15)),(0,m.catchError)(()=>(0,S.of)([$localize`Error while retrieving paths.`])))}getBucketTypeahead(G){return R().isString(G)&&"/"!==G&&""!==G?this.rgwBucketService.list().pipe((0,m.map)(j=>j.filter(Ce=>Ce.toLowerCase().includes(G)).slice(0,15)),(0,m.catchError)(()=>(0,S.of)([$localize`Error while retrieving bucket names.`]))):(0,S.of)([])}submitAction(){let G;const j=this.buildRequest();G=this.taskWrapper.wrapTaskAroundCall(this.isEdit?{task:new g.O("nfs/edit",{cluster_id:this.cluster_id,export_id:R().parseInt(this.export_id)}),call:this.nfsService.update(this.cluster_id,R().parseInt(this.export_id),j)}:{task:new g.O("nfs/create",{path:j.path,fsal:j.fsal,cluster_id:j.cluster_id}),call:this.nfsService.create(j)}),G.subscribe({error:Ce=>this.setFormErrors(Ce),complete:()=>this.router.navigate([`/${(0,T.q)(this.storageBackend)}/nfs`])})}setFormErrors(G){G.error.detail&&G.error.detail.toString().includes(`Pseudo ${this.nfsForm.getValue("pseudo")} is already in use`)&&this.nfsForm.get("pseudo").setErrors({pseudoAlreadyExists:!0}),this.nfsForm.setErrors({cdSubmitButton:!0})}buildRequest(){const G=R().cloneDeep(this.nfsForm.value);return G.fsal=this.nfsForm.get("fsal").value,this.isEdit&&(G.export_id=R().parseInt(this.export_id),G.path=this.nfsForm.get("path").value,G.fsal.name===v.q.RGW&&(G.fsal.user_id=this.nfsForm.getValue("fsal").user_id)),G.fsal.name===v.q.RGW?(delete G.fsal.fs_name,"bucket"===G.rgw_export_type?delete G.fsal.user_id:G.path=""):delete G.fsal.user_id,delete G.rgw_export_type,delete G.subvolume,delete G.subvolume_group,G.protocols=[],G.protocolNfsv3&&G.protocols.push(3),G.protocolNfsv4&&G.protocols.push(4),!G.protocolNfsv3&&!G.protocolNfsv4&&(G.pseudo=null),delete G.protocolNfsv3,delete G.protocolNfsv4,G.transports=[],G.transportTCP&&G.transports.push("TCP"),delete G.transportTCP,G.transportUDP&&G.transports.push("UDP"),delete G.transportUDP,G.clients.forEach(j=>{j.addresses=R().isString(j.addresses)?R()(j.addresses).split(/[ ,]+/).uniq().filter(Ce=>""!==Ce).value():[],j.squash||(j.squash=G.squash),j.access_type||(j.access_type=G.access_type)}),G.fsal.sec_label_xattr=!1===G.security_label||"RGW"===G.fsal.name?null:G.sec_label_xattr,delete G.sec_label_xattr,G}pathExistence(G){return j=>{if(j.pristine||!j.value)return(0,S.of)({required:!0});const Ce=this.nfsForm.getValue("fsal").fs_name;return this.nfsService.lsDir(Ce,j.value).pipe((0,m.map)(xe=>xe.paths.includes(j.value)===G?null:{pathNameNotAllowed:!0}),(0,m.catchError)(()=>(0,S.of)({pathNameNotAllowed:!0})))}}static{this.\u0275fac=function(j){return new(j||k)(_.\u0275\u0275directiveInject(P.v),_.\u0275\u0275directiveInject(E.Z),_.\u0275\u0275directiveInject(K.v),_.\u0275\u0275directiveInject(ce.W),_.\u0275\u0275directiveInject(l.ActivatedRoute),_.\u0275\u0275directiveInject(l.Router),_.\u0275\u0275directiveInject(C.c),_.\u0275\u0275directiveInject(fe.p),_.\u0275\u0275directiveInject(d.B),_.\u0275\u0275directiveInject(I.$),_.\u0275\u0275directiveInject(A.a),_.\u0275\u0275directiveInject(u.Ss))}}static{this.\u0275cmp=_.\u0275\u0275defineComponent({type:k,selectors:[["cd-nfs-form"]],viewQuery:function(j,Ce){if(1&j&&_.\u0275\u0275viewQuery(Et,7),2&j){let xe;_.\u0275\u0275queryRefresh(xe=_.\u0275\u0275loadQuery())&&(Ce.nfsClients=xe.first)}},features:[_.\u0275\u0275InheritDefinitionFeature],decls:2,vars:3,consts:()=>{let G,j,Ce,xe,nt,at,St,vt,Mt,Fe,Zt,st,bn,mn,si,ro,ri,lo,li,_i,ci,di,_o,co,ui,pi,mi,fi,Ei,gi,Ci,Si,hi,Ti,Fi,vi,Mi,Ri,Oi,Pi,bi,Ni,Ii,Ai,Di,yi,Li,$i,xi,Ui,wi,Gi;return G=$localize`:form title␟fb127ea03835b3230f0ed981c7080e2ccb879621␟3346778808274133574:${"\ufffd0\ufffd"}:INTERPOLATION: ${"\ufffd1\ufffd"}:INTERPOLATION_1:`,j=$localize`:␟83480a36b900bc4e95e91c01284eacd4fde4fcf6␟3185990432229492060:${"\ufffd*10:1\ufffd\ufffd#1:1\ufffd"}:START_TAG_OPTION:Loading...${"[\ufffd/#1:1\ufffd\ufffd/*10:1\ufffd|\ufffd/#1:2\ufffd\ufffd/*11:2\ufffd|\ufffd/#1:3\ufffd\ufffd/*12:3\ufffd|\ufffd/#1:4\ufffd\ufffd/*13:4\ufffd]"}:CLOSE_TAG_OPTION:${"\ufffd*11:2\ufffd\ufffd#1:2\ufffd"}:START_TAG_OPTION_1:-- No cluster available --${"[\ufffd/#1:1\ufffd\ufffd/*10:1\ufffd|\ufffd/#1:2\ufffd\ufffd/*11:2\ufffd|\ufffd/#1:3\ufffd\ufffd/*12:3\ufffd|\ufffd/#1:4\ufffd\ufffd/*13:4\ufffd]"}:CLOSE_TAG_OPTION:${"\ufffd*12:3\ufffd\ufffd#1:3\ufffd"}:START_TAG_OPTION_2:-- Select the cluster --${"[\ufffd/#1:1\ufffd\ufffd/*10:1\ufffd|\ufffd/#1:2\ufffd\ufffd/*11:2\ufffd|\ufffd/#1:3\ufffd\ufffd/*12:3\ufffd|\ufffd/#1:4\ufffd\ufffd/*13:4\ufffd]"}:CLOSE_TAG_OPTION:${"\ufffd*13:4\ufffd\ufffd#1:4\ufffd"}:START_TAG_OPTION_3:${"\ufffd0:4\ufffd"}:INTERPOLATION:${"[\ufffd/#1:1\ufffd\ufffd/*10:1\ufffd|\ufffd/#1:2\ufffd\ufffd/*11:2\ufffd|\ufffd/#1:3\ufffd\ufffd/*12:3\ufffd|\ufffd/#1:4\ufffd\ufffd/*13:4\ufffd]"}:CLOSE_TAG_OPTION:`,j=_.\u0275\u0275i18nPostprocess(j),Ce=$localize`:␟f8c805e248823d07d29015b9923ec5695e1c724b␟1718250287891240070:NFS Protocol (required)`,xe=$localize`:␟2f534178c01ebf1307da2eaeef04bc6801ebc729␟7331033821929503421:NFSv3`,nt=$localize`:␟f5043c0921e709935ab026bb3253ffe1f159fca1␟951840472002626351:NFSv4`,at=$localize`:␟4b1d895023e764d05387f241d20fc60607471ec0␟9096323152606604244:${"\ufffd*42:1\ufffd\ufffd#1:1\ufffd"}:START_TAG_OPTION:Loading...${"[\ufffd/#1:1\ufffd\ufffd/*42:1\ufffd|\ufffd/#1:2\ufffd\ufffd/*43:2\ufffd|\ufffd/#1:3\ufffd\ufffd/*44:3\ufffd]"}:CLOSE_TAG_OPTION:${"\ufffd*43:2\ufffd\ufffd#1:2\ufffd"}:START_TAG_OPTION_1:-- No access type available --${"[\ufffd/#1:1\ufffd\ufffd/*42:1\ufffd|\ufffd/#1:2\ufffd\ufffd/*43:2\ufffd|\ufffd/#1:3\ufffd\ufffd/*44:3\ufffd]"}:CLOSE_TAG_OPTION:${"\ufffd*44:3\ufffd\ufffd#1:3\ufffd"}:START_TAG_OPTION_2:${"\ufffd0:3\ufffd"}:INTERPOLATION:${"[\ufffd/#1:1\ufffd\ufffd/*42:1\ufffd|\ufffd/#1:2\ufffd\ufffd/*43:2\ufffd|\ufffd/#1:3\ufffd\ufffd/*44:3\ufffd]"}:CLOSE_TAG_OPTION:`,at=_.\u0275\u0275i18nPostprocess(at),St=$localize`:␟9be0f69dbc6bf62fb2aa6ce0d33abf403e99dc10␟5689249252736722969:${"\ufffd*54:1\ufffd\ufffd#1:1\ufffd"}:START_TAG_OPTION:Loading...${"[\ufffd/#1:1\ufffd\ufffd/*54:1\ufffd|\ufffd/#1:2\ufffd\ufffd/*55:2\ufffd|\ufffd/#1:3\ufffd\ufffd/*56:3\ufffd]"}:CLOSE_TAG_OPTION:${"\ufffd*55:2\ufffd\ufffd#1:2\ufffd"}:START_TAG_OPTION_1:-- No squash available --${"[\ufffd/#1:1\ufffd\ufffd/*54:1\ufffd|\ufffd/#1:2\ufffd\ufffd/*55:2\ufffd|\ufffd/#1:3\ufffd\ufffd/*56:3\ufffd]"}:CLOSE_TAG_OPTION:${"\ufffd*56:3\ufffd\ufffd#1:3\ufffd"}:START_TAG_OPTION_2:${"\ufffd0:3\ufffd"}:INTERPOLATION:${"[\ufffd/#1:1\ufffd\ufffd/*54:1\ufffd|\ufffd/#1:2\ufffd\ufffd/*55:2\ufffd|\ufffd/#1:3\ufffd\ufffd/*56:3\ufffd]"}:CLOSE_TAG_OPTION:`,St=_.\u0275\u0275i18nPostprocess(St),vt=$localize`:␟665fe4895a29426ef331cb38ce8bc0f50f3ecd1c␟8524896235249438113:Transport Protocol (required)`,Mt=$localize`:␟d2a6ad6e8bc315f07911722c05767ac79c136d99␟3773803671682342506:UDP`,Fe=$localize`:␟9c030f11e0aae9b24d2c048c57f29f590be621df␟4895527102341340626:TCP`,Zt=$localize`:␟e1d0a5d4f422f261d4435b06f5eb957a24ec870d␟3670033105028809395:To create a new NFS cluster, you need to create an NFS Service. `,st=$localize`:␟189032dda9d2a845b22c57f5e6a92131801c6b1b␟836795575511323708: This is the ID of an NFS Service`,bn=$localize`:␟7cbdabcece469fab89cfa687ab152bca18b97498␟1417693714872528491:This field is required.`,mn=$localize`:␟bd197d7773cef10f368f08c53b47979c3df1f22d␟8720332287407681000:Bucket`,si=$localize`:␟e08a77594f3d89311cdf6da5090044270909c194␟2392488717875840729:User`,ro=$localize`:␟2e6db7166e89925117207485479f3277f0ccb7bf␟1888800683759415976:${"\ufffd*3:1\ufffd\ufffd#1:1\ufffd"}:START_TAG_OPTION:Loading...${"[\ufffd/#1:1\ufffd\ufffd/*3:1\ufffd|\ufffd/#1:2\ufffd\ufffd/*4:2\ufffd|\ufffd/#1:3\ufffd\ufffd/*5:3\ufffd|\ufffd/#1:4\ufffd\ufffd/*6:4\ufffd]"}:CLOSE_TAG_OPTION:${"\ufffd*4:2\ufffd\ufffd#1:2\ufffd"}:START_TAG_OPTION_1:-- No CephFS filesystem available --${"[\ufffd/#1:1\ufffd\ufffd/*3:1\ufffd|\ufffd/#1:2\ufffd\ufffd/*4:2\ufffd|\ufffd/#1:3\ufffd\ufffd/*5:3\ufffd|\ufffd/#1:4\ufffd\ufffd/*6:4\ufffd]"}:CLOSE_TAG_OPTION:${"\ufffd*5:3\ufffd\ufffd#1:3\ufffd"}:START_TAG_OPTION_2:-- Select the CephFS filesystem --${"[\ufffd/#1:1\ufffd\ufffd/*3:1\ufffd|\ufffd/#1:2\ufffd\ufffd/*4:2\ufffd|\ufffd/#1:3\ufffd\ufffd/*5:3\ufffd|\ufffd/#1:4\ufffd\ufffd/*6:4\ufffd]"}:CLOSE_TAG_OPTION:${"\ufffd*6:4\ufffd\ufffd#1:4\ufffd"}:START_TAG_OPTION_3:${"\ufffd0:4\ufffd"}:INTERPOLATION:${"[\ufffd/#1:1\ufffd\ufffd/*3:1\ufffd|\ufffd/#1:2\ufffd\ufffd/*4:2\ufffd|\ufffd/#1:3\ufffd\ufffd/*5:3\ufffd|\ufffd/#1:4\ufffd\ufffd/*6:4\ufffd]"}:CLOSE_TAG_OPTION:`,ro=_.\u0275\u0275i18nPostprocess(ro),ri=$localize`:␟7cbdabcece469fab89cfa687ab152bca18b97498␟1417693714872528491:This field is required.`,lo=$localize`:␟b20cd28182ebd16854e052dc9bd6fa917115c353␟6758807954933295946:${"\ufffd*3:1\ufffd\ufffd#1:1\ufffd"}:START_TAG_OPTION:Loading...${"[\ufffd/#1:1\ufffd\ufffd/*3:1\ufffd|\ufffd/#1:2\ufffd\ufffd/*4:2\ufffd|\ufffd/#1:3\ufffd\ufffd/*5:3\ufffd|\ufffd/#1:4\ufffd\ufffd/*6:4\ufffd]"}:CLOSE_TAG_OPTION:${"\ufffd*4:2\ufffd\ufffd#1:2\ufffd"}:START_TAG_OPTION_1:-- No RGW User available --${"[\ufffd/#1:1\ufffd\ufffd/*3:1\ufffd|\ufffd/#1:2\ufffd\ufffd/*4:2\ufffd|\ufffd/#1:3\ufffd\ufffd/*5:3\ufffd|\ufffd/#1:4\ufffd\ufffd/*6:4\ufffd]"}:CLOSE_TAG_OPTION:${"\ufffd*5:3\ufffd\ufffd#1:3\ufffd"}:START_TAG_OPTION_2:-- Select the RGW User --${"[\ufffd/#1:1\ufffd\ufffd/*3:1\ufffd|\ufffd/#1:2\ufffd\ufffd/*4:2\ufffd|\ufffd/#1:3\ufffd\ufffd/*5:3\ufffd|\ufffd/#1:4\ufffd\ufffd/*6:4\ufffd]"}:CLOSE_TAG_OPTION:${"\ufffd*6:4\ufffd\ufffd#1:4\ufffd"}:START_TAG_OPTION_3:${"\ufffd0:4\ufffd"}:INTERPOLATION:${"[\ufffd/#1:1\ufffd\ufffd/*3:1\ufffd|\ufffd/#1:2\ufffd\ufffd/*4:2\ufffd|\ufffd/#1:3\ufffd\ufffd/*5:3\ufffd|\ufffd/#1:4\ufffd\ufffd/*6:4\ufffd]"}:CLOSE_TAG_OPTION:`,lo=_.\u0275\u0275i18nPostprocess(lo),li=$localize`:␟7cbdabcece469fab89cfa687ab152bca18b97498␟1417693714872528491:This field is required.`,_i=$localize`:␟65ce0fa4da1ed55e658aeb31d1644a29f06bb342␟8769962346499199305:Enable security label`,ci=$localize`:␟51d01878afa3272863dcab184a951a65144200db␟5656406151797307301:Security Label ${"\ufffd#3\ufffd\ufffd/#3\ufffd"}:TAG_INPUT:`,di=$localize`:␟7cbdabcece469fab89cfa687ab152bca18b97498␟1417693714872528491:This field is required.`,_o=$localize`:␟b6cd9579e853b75ed934f51afe7b4b11757b4038␟7765830836206651838:${"\ufffd*3:1\ufffd\ufffd#1:1\ufffd"}:START_TAG_OPTION:Loading...${"[\ufffd/#1:1\ufffd\ufffd/*3:1\ufffd|\ufffd/#1:2\ufffd\ufffd/*4:2\ufffd|\ufffd/#1:3\ufffd\ufffd/*5:3\ufffd|\ufffd/#6\ufffd]"}:CLOSE_TAG_OPTION:${"\ufffd*4:2\ufffd\ufffd#1:2\ufffd"}:START_TAG_OPTION_1:-- Select the CephFS subvolume group --${"[\ufffd/#1:1\ufffd\ufffd/*3:1\ufffd|\ufffd/#1:2\ufffd\ufffd/*4:2\ufffd|\ufffd/#1:3\ufffd\ufffd/*5:3\ufffd|\ufffd/#6\ufffd]"}:CLOSE_TAG_OPTION:${"\ufffd*5:3\ufffd\ufffd#1:3\ufffd"}:START_TAG_OPTION_2:${"\ufffd0:3\ufffd"}:INTERPOLATION:${"[\ufffd/#1:1\ufffd\ufffd/*3:1\ufffd|\ufffd/#1:2\ufffd\ufffd/*4:2\ufffd|\ufffd/#1:3\ufffd\ufffd/*5:3\ufffd|\ufffd/#6\ufffd]"}:CLOSE_TAG_OPTION:${"\ufffd#6\ufffd"}:START_TAG_OPTION_3:${"\ufffd0\ufffd"}:INTERPOLATION_1:${"[\ufffd/#1:1\ufffd\ufffd/*3:1\ufffd|\ufffd/#1:2\ufffd\ufffd/*4:2\ufffd|\ufffd/#1:3\ufffd\ufffd/*5:3\ufffd|\ufffd/#6\ufffd]"}:CLOSE_TAG_OPTION:`,_o=_.\u0275\u0275i18nPostprocess(_o),co=$localize`:␟6fd3cc28ad2851be5fccc9d8ea938bf8707bbaa4␟3310615540973626616:${"\ufffd*3:1\ufffd\ufffd#1:1\ufffd"}:START_TAG_OPTION:Loading...${"[\ufffd/#1:1\ufffd\ufffd/*3:1\ufffd|\ufffd/#1:2\ufffd\ufffd/*4:2\ufffd|\ufffd/#1:3\ufffd\ufffd/*5:3\ufffd|\ufffd/#1:4\ufffd\ufffd/*6:4\ufffd]"}:CLOSE_TAG_OPTION:${"\ufffd*4:2\ufffd\ufffd#1:2\ufffd"}:START_TAG_OPTION_1:-- No CephFS subvolume available --${"[\ufffd/#1:1\ufffd\ufffd/*3:1\ufffd|\ufffd/#1:2\ufffd\ufffd/*4:2\ufffd|\ufffd/#1:3\ufffd\ufffd/*5:3\ufffd|\ufffd/#1:4\ufffd\ufffd/*6:4\ufffd]"}:CLOSE_TAG_OPTION:${"\ufffd*5:3\ufffd\ufffd#1:3\ufffd"}:START_TAG_OPTION_2:-- Select the CephFS subvolume --${"[\ufffd/#1:1\ufffd\ufffd/*3:1\ufffd|\ufffd/#1:2\ufffd\ufffd/*4:2\ufffd|\ufffd/#1:3\ufffd\ufffd/*5:3\ufffd|\ufffd/#1:4\ufffd\ufffd/*6:4\ufffd]"}:CLOSE_TAG_OPTION:${"\ufffd*6:4\ufffd\ufffd#1:4\ufffd"}:START_TAG_OPTION_3:${"\ufffd0:4\ufffd"}:INTERPOLATION:${"[\ufffd/#1:1\ufffd\ufffd/*3:1\ufffd|\ufffd/#1:2\ufffd\ufffd/*4:2\ufffd|\ufffd/#1:3\ufffd\ufffd/*5:3\ufffd|\ufffd/#1:4\ufffd\ufffd/*6:4\ufffd]"}:CLOSE_TAG_OPTION:`,co=_.\u0275\u0275i18nPostprocess(co),ui=$localize`:␟9f01be2479d78fbe8221f8f919c2b69de7ca8b1c␟7475901782876834134: This field is required. `,pi=$localize`:␟767052b0c15f5342c3aab23db8893cb3e333f813␟2028047156720099376:Path...`,mi=$localize`:␟9a40de7bc1c775bd554162b0cf317e934c3e4e43␟2694619989969452699:Path ${"\ufffd#3\ufffd\ufffd/#3\ufffd"}:TAG_INPUT:`,fi=$localize`:␟7cbdabcece469fab89cfa687ab152bca18b97498␟1417693714872528491:This field is required.`,Ei=$localize`:␟b387adeed21eb2981a31e53b5adba0c1506dab4e␟8832342422637281277:Export on CephFS volume "${"\ufffd#2\ufffd"}:START_TAG_CODE:/${"\ufffd/#2\ufffd"}:CLOSE_TAG_CODE:" not allowed.`,gi=$localize`:␟5ecc0107badb6625466aaa3f975b5c05276f432f␟4456484902091340535:Path need to start with a '/' and can be followed by a word`,Ci=$localize`:␟9f9d8bd873c34c5ab2d4d0cf995fe5183ab25f6e␟7020723168633652361:The path does not exist in the selected volume.`,Si=$localize`:␟f773d8c1f56a98f62b6b4dd34c5de1529ce09425␟6238514668180011420:Bucket name...`,hi=$localize`:␟9f4bd3974e27deeec09d6f484fd9b876dd42b771␟1529857030323986573:${"\ufffd#3\ufffd\ufffd/#3\ufffd"}:TAG_INPUT:`,Ti=$localize`:␟7cbdabcece469fab89cfa687ab152bca18b97498␟1417693714872528491:This field is required.`,Fi=$localize`:␟6cb87ca65a7a7ca0b38ffce9312fee45fc57671c␟8301262976322008988:The bucket does not exist or is not in the default realm (if multiple realms are configured). To continue, ${"\ufffd#2\ufffd"}:START_LINK:create a new bucket${"\ufffd/#2\ufffd"}:CLOSE_LINK:.`,vi=$localize`:␟7cbdabcece469fab89cfa687ab152bca18b97498␟1417693714872528491:This field is required.`,Mi=$localize`:␟c0a79f77e664a5656b531ef66a2bf2dca224f54f␟4929958956409023267:Pseudo...`,Ri=$localize`:␟9f4bd3974e27deeec09d6f484fd9b876dd42b771␟1529857030323986573:${"\ufffd#3\ufffd\ufffd/#3\ufffd"}:TAG_INPUT:`,Oi=$localize`:␟684bd1d564f974339ca473c087b478e61466dfe4␟1960360317046953641:The position this export occupies in the Pseudo FS. It must be unique.`,Pi=$localize`:␟f3af55f7fd5b1d9e5a53e030c80116dc635bfb9f␟1985656713922997796:By using different Pseudo options, the same Path may be exported multiple times.`,bi=$localize`:␟7cbdabcece469fab89cfa687ab152bca18b97498␟1417693714872528491:This field is required.`,Ni=$localize`:␟5eb719aa900fed3f9d4a1d74bcc158f07f67f684␟3301180412225278597:The pseudo is already in use by another export.`,Ii=$localize`:␟ddf98fcdeeb17643db020d54f42b5e56b5f9a52a␟3127596589032320526:Pseudo needs to start with a '/' and can't contain any of the following: >, <, |, &, ( or ).`,Ai=$localize`:␟dfc7e7e90909761a20e2ca443ecbbad961599c0d␟2102295279423835336:Pseudo path should be an absolute path and it cannot be just '/'`,Di=$localize`:␟b54e24e168a2baa0a9e6e35a1280a8aadc1e54b0␟1355999392306614900:The Object Gateway NFS backend has a number of limitations which will seriously affect applications writing to the share. Please consult the ${"\ufffd#2\ufffd"}:START_TAG_CD_DOC:${"\ufffd/#2\ufffd"}:CLOSE_TAG_CD_DOC:  for details before enabling write access.`,yi=$localize`:␟7cbdabcece469fab89cfa687ab152bca18b97498␟1417693714872528491:This field is required.`,Li=$localize`:␟285f1fb3dded1dd6f4497679df68294ec4954104␟3445048695895366018:Maps the root user on the NFS client to an anonymous user/group with limited privileges. This prevents a root client user from having total control over the NFS export.`,$i=$localize`:␟fc66a4ad20842546dc36fc42e6ea5ae5158e3b05␟1999262095241911035:Maps the root user on the NFS client to an anonymous user/group with limited privileges, preventing root access but retaining non-root group privileges.`,xi=$localize`:␟2cfd9586227d16e12309d35f762d26280b3b3705␟1441684274651464673:Maps all users on the NFS client to an anonymous user/group with limited privileges, ensuring that no user has special privileges on the NFS export.`,Ui=$localize`:␟2181ca58492e8cb82d6f4b21084ad7a23fc739ae␟5798812363363750247:Allows the root user on the NFS client to retain full root privileges on the NFS server, which may pose security risks.`,wi=$localize`:␟7cbdabcece469fab89cfa687ab152bca18b97498␟1417693714872528491:This field is required.`,Gi=$localize`:␟7cbdabcece469fab89cfa687ab152bca18b97498␟1417693714872528491:This field is required.`,[["formDir","ngForm"],["clusterHelperText",""],["clusterError",""],["protocolError",""],["accessTypeHelper",""],["accessTypeWarning",""],["accessTypeError",""],["squashHelper",""],["squashError",""],["transportError",""],["nfsClients",""],["fsNameError",""],["userIdError",""],["secLabelError",""],["subvolumeError",""],["pathError",""],["bucketPathError",""],["pseudoHelper",""],["pseudoError",""],G,j,Ce,xe,nt,at,St,vt,Mt,Fe,Zt,st,bn,mn,si,ro,ri,lo,li,_i,ci,di,_o,co,ui,mi,fi,Ei,gi,Ci,hi,Ti,Fi,vi,Ri,Oi,Pi,bi,Ni,Ii,Ai,Di,yi,Li,$i,xi,Ui,wi,Gi,["cdsCol","",3,"columnNumbers"],[4,"cdFormLoading"],["name","nfsForm","novalidate","",3,"formGroup"],[1,"form-header"],[1,"form-item"],["formControlName","cluster_id","name","cluster_id","for","cluster_id","label","Cluster","cdRequiredField","Cluster","id","cluster_id",3,"invalid","invalidText","skeleton","helperText"],["value","",4,"ngIf"],[3,"value",4,"ngFor","ngForOf"],["type","info","actionName","Create","spacingClass","mt-2",3,"action",4,"ngIf"],["class","form-item",4,"ngIf"],["formGroupName","fsal"],["class","form-group row",4,"ngIf"],["cdRequiredField","NFS Protocol",1,"cds--label"],["formControlName","protocolNfsv3","name","protocolNfsv3","id","protocolNfsv3",3,"invalid","invalidText"],["formControlName","protocolNfsv4","name","protocolNfsv4","id","protocolNfsv4",3,"invalid","invalidText"],["formControlName","access_type","name","access_type","for","access_type","label","Access Type","cdRequiredField","Access Type","id","access_type",3,"invalid","invalidText","helperText","warn","warnText","skeleton"],["formControlName","squash","name","squash","for","squash","label","Squash","cdRequiredField","Squash","id","squash",3,"invalid","invalidText","skeleton","helperText"],["cdRequiredField","Transport Protocol",1,"cds--label"],["formControlName","transportUDP","name","transportUDP","id","transportUDP",3,"invalid","invalidText"],["formControlName","transportTCP","name","transportTCP","id","transportTCP",3,"invalid","invalidText"],[3,"form","clients"],["type","error",4,"ngIf"],["wrappingClass","text-right",3,"submitActionEvent","form","disabled","submitText"],["value",""],[3,"value"],["type","info","actionName","Create","spacingClass","mt-2",3,"action"],["class","invalid-feedback",4,"ngIf"],[1,"invalid-feedback"],["formControlName","rgw_export_type","name","rgw_export_type","label","Type",3,"valueChange"],["value","bucket"],["value","user"],["formControlName","fs_name","name","fs_name","for","fs_name","label","Volume","cdRequiredField","Volume","id","fs_name",3,"change","invalid","invalidText","skeleton"],["formControlName","user_id","name","user_id","for","user_id","label","User","cdRequiredField","User","id","user_id",3,"invalid","invalidText","skeleton"],["formControlName","security_label","name","security_label","id","security_label"],["for","sec_label_xattr",3,"invalid","invalidText"],["cdsText","","name","sec_label_xattr","id","sec_label_xattr","formControlName","sec_label_xattr",3,"invalid"],["formControlName","subvolume_group","name","subvolume_group","for","subvolume_group","label","Subvolume Group","id","subvolume_group",3,"change","skeleton"],[3,"value","selected",4,"ngFor","ngForOf"],[3,"value","selected"],[1,"form-group","row"],["formControlName","subvolume","name","subvolume","for","subvolume","label","Subvolume","id","subvolume",3,"change","skeleton","invalid","invalidText"],["for","path","helperText","A path in a CephFS file system.","cdRequiredField","Path",3,"invalid","invalidText"],["cdsText","","type","text","placeholder",pi,"id","path","name","path","formControlName","path",3,"ngbTypeahead","invalid"],["for","path","cdRequiredField","Bucket",3,"invalid","invalidText"],["cdsText","","type","text","placeholder",Si,"id","path","name","path","formControlName","path",3,"ngbTypeahead","invalid"],["routerLink","/rgw/bucket/create",1,"btn-link"],["for","pseudo","cdRequiredField","Pseudo",3,"helperText","invalid","invalidText"],["cdsText","","type","text","placeholder",Mi,"id","pseudo","name","pseudo","formControlName","pseudo","minlength","2",3,"invalid"],[4,"ngIf"],["section","rgw-nfs"],["type","error"]]},template:function(j,Ce){1&j&&(_.\u0275\u0275elementStart(0,"div",68),_.\u0275\u0275template(1,Me,76,60,"ng-container",69),_.\u0275\u0275elementEnd()),2&j&&(_.\u0275\u0275property("columnNumbers",_.\u0275\u0275pureFunction0(2,Oe)),_.\u0275\u0275advance(),_.\u0275\u0275property("cdFormLoading",Ce.loading))},dependencies:[e.\u0275NgNoValidate,e.NgSelectOption,e.\u0275NgSelectMultipleOption,e.DefaultValueAccessor,e.NgControlStatus,e.NgControlStatusGroup,e.MinLengthValidator,e.FormGroupDirective,e.FormControlName,e.FormGroupName,l.RouterLink,Ge.m,Ye.C,ct.e,rt.G,B.S,w.C,ie.E,Y.P,V.NgForOf,V.NgIf,De.NgbTypeahead,L.ColumnDirective,L.Select,L.Option,L.TextInputLabelComponent,L.TextInput,L.Checkbox,ue,ze.r,V.TitleCasePipe],styles:[".cd-mb[_ngcontent-%COMP%]{margin-bottom:10px}"]})}}return k})()},70848:(q,y,s)=>{s.d(y,{J:()=>Et,V:()=>ze});var a=s(87536),e=s(76218),l=s(29841),h=s.n(l),R=s(22341),S=s(25947),m=s(84821),v=s(54372),E=s(62847),C=s(2148),d=s(46045),u=s(29130),N=s(19380),M=s(85481),I=s(82254),O=s(58510),f=s(50813),g=s(19560),P=s(8265),A=s(94254),_=s(22453),B=s(32295),w=s(45843),ie=s(91974),Y=s(77317),V=s(3600),L=s(37823),Q=s(62988);function me(Oe,pt){if(1&Oe&&a.\u0275\u0275element(0,"cd-table-key-value",11),2&Oe){const ye=a.\u0275\u0275nextContext(2);a.\u0275\u0275property("data",ye.data)}}function Ie(Oe,pt){if(1&Oe&&a.\u0275\u0275element(0,"cd-table",12,1),2&Oe){const ye=a.\u0275\u0275nextContext(2);a.\u0275\u0275property("data",ye.clients)("columns",ye.clientsColumns)}}function He(Oe,pt){if(1&Oe&&(a.\u0275\u0275elementContainerStart(0),a.\u0275\u0275elementStart(1,"nav",5,0),a.\u0275\u0275elementContainerStart(3,6),a.\u0275\u0275elementStart(4,"a",7),a.\u0275\u0275i18n(5,2),a.\u0275\u0275elementEnd(),a.\u0275\u0275template(6,me,1,1,"ng-template",8),a.\u0275\u0275elementContainerEnd(),a.\u0275\u0275elementContainerStart(7,9),a.\u0275\u0275elementStart(8,"a",7),a.\u0275\u0275i18n(9,3),a.\u0275\u0275elementEnd(),a.\u0275\u0275template(10,Ie,2,2,"ng-template",8),a.\u0275\u0275elementContainerEnd(),a.\u0275\u0275elementEnd(),a.\u0275\u0275element(11,"div",10),a.\u0275\u0275elementContainerEnd()),2&Oe){const ye=a.\u0275\u0275reference(2),je=a.\u0275\u0275nextContext();a.\u0275\u0275advance(9),a.\u0275\u0275i18nExp(je.clients.length),a.\u0275\u0275i18nApply(9),a.\u0275\u0275advance(2),a.\u0275\u0275property("ngbNavOutlet",ye)}}let Ae=(()=>{class Oe{constructor(){this.clients=[],this.clientsColumns=[{name:$localize`Addresses`,prop:"addresses",flexGrow:2},{name:$localize`Access Type`,prop:"access_type",flexGrow:1},{name:$localize`Squash`,prop:"squash",flexGrow:1}]}ngOnChanges(){this.selection&&(this.selectedItem=this.selection,this.clients=this.selectedItem.clients,this.data={},this.data[$localize`Cluster`]=this.selectedItem.cluster_id,this.data[$localize`NFS Protocol`]=this.selectedItem.protocols.map(ye=>"NFSv"+ye),this.data[$localize`Pseudo`]=this.selectedItem.pseudo,this.data[$localize`Access Type`]=this.selectedItem.access_type,this.data[$localize`Squash`]=this.selectedItem.squash,this.data[$localize`Transport`]=this.selectedItem.transports,this.data[$localize`Path`]=this.selectedItem.path,"CEPH"===this.selectedItem.fsal.name?(this.data[$localize`Storage Backend`]=$localize`CephFS`,this.data[$localize`CephFS User`]=this.selectedItem.fsal.user_id,this.data[$localize`CephFS Filesystem`]=this.selectedItem.fsal.fs_name,this.data[$localize`Security Label`]=this.selectedItem.fsal.sec_label_xattr):(this.data[$localize`Storage Backend`]=$localize`Object Gateway`,this.data[$localize`Object Gateway User`]=this.selectedItem.fsal.user_id))}static{this.\u0275fac=function(je){return new(je||Oe)}}static{this.\u0275cmp=a.\u0275\u0275defineComponent({type:Oe,selectors:[["cd-nfs-details"]],inputs:{selection:"selection"},features:[a.\u0275\u0275NgOnChangesFeature],decls:1,vars:1,consts:()=>{let ye,je;return ye=$localize`:␟4f8b2bb476981727ab34ed40fde1218361f92c45␟5028777105388019087:Details`,je=$localize`:␟47116253e36f4e38a97ba41b2d3122c6c15ab904␟9142504997758402211:Clients (${"\ufffd0\ufffd"}:INTERPOLATION:)`,[["nav","ngbNav"],["table",""],ye,je,[4,"ngIf"],["ngbNav","","cdStatefulTab","nfs-details",1,"nav-tabs"],["ngbNavItem","details"],["ngbNavLink",""],["ngbNavContent",""],["ngbNavItem","clients"],[3,"ngbNavOutlet"],[3,"data"],["columnMode","flex","identifier","addresses","forceIdentifier","true","selectionType","",3,"data","columns"]]},template:function(je,ot){1&je&&a.\u0275\u0275template(0,He,12,2,"ng-container",4),2&je&&a.\u0275\u0275property("ngIf",ot.selection)},dependencies:[E.O,L.i,Q.B,Y.NgbNavContent,Y.NgbNav,Y.NgbNavItem,Y.NgbNavLink,Y.NgbNavLinkBase,Y.NgbNavOutlet,ie.NgIf]})}}return Oe})();const We=["nfsState"],te=["nfsFsal"],_e=["pathTmpl"],oe=["table"],de=["protocolTpl"],ue=["transportTpl"];function T(Oe,pt){if(1&Oe&&a.\u0275\u0275element(0,"cd-nfs-details",12),2&Oe){const ye=a.\u0275\u0275nextContext();a.\u0275\u0275property("selection",ye.expandedRow)}}function K(Oe,pt){1&Oe&&(a.\u0275\u0275elementContainerStart(0),a.\u0275\u0275i18n(1,5),a.\u0275\u0275elementContainerEnd())}function ce(Oe,pt){1&Oe&&(a.\u0275\u0275elementContainerStart(0),a.\u0275\u0275i18n(1,6),a.\u0275\u0275elementContainerEnd())}function fe(Oe,pt){if(1&Oe&&a.\u0275\u0275template(0,K,2,0,"ng-container",13)(1,ce,2,0,"ng-container",13),2&Oe){const ye=pt.data.value;a.\u0275\u0275property("ngIf","CEPH"===ye.name),a.\u0275\u0275advance(),a.\u0275\u0275property("ngIf","RGW"===ye.name)}}function Te(Oe,pt){if(1&Oe&&(a.\u0275\u0275elementStart(0,"span")(1,"cds-tag",15),a.\u0275\u0275text(2),a.\u0275\u0275elementEnd()()),2&Oe){const ye=pt.$implicit;a.\u0275\u0275advance(2),a.\u0275\u0275textInterpolate1("NFSv",ye,"")}}function Se(Oe,pt){1&Oe&&a.\u0275\u0275template(0,Te,3,1,"span",14),2&Oe&&a.\u0275\u0275property("ngForOf",pt.data.value)}function Ge(Oe,pt){if(1&Oe&&(a.\u0275\u0275elementStart(0,"span")(1,"cds-tag",15),a.\u0275\u0275text(2),a.\u0275\u0275elementEnd()()),2&Oe){const ye=pt.$implicit;a.\u0275\u0275advance(2),a.\u0275\u0275textInterpolate(ye)}}function Ye(Oe,pt){1&Oe&&a.\u0275\u0275template(0,Ge,3,1,"span",14),2&Oe&&a.\u0275\u0275property("ngForOf",pt.data.value)}function ct(Oe,pt){1&Oe&&(a.\u0275\u0275elementStart(0,"span",17),a.\u0275\u0275i18n(1,7),a.\u0275\u0275elementEnd())}function rt(Oe,pt){if(1&Oe&&(a.\u0275\u0275elementStart(0,"span"),a.\u0275\u0275text(1),a.\u0275\u0275elementEnd()),2&Oe){const ye=a.\u0275\u0275nextContext().data.value;a.\u0275\u0275advance(),a.\u0275\u0275textInterpolate(ye)}}function De(Oe,pt){if(1&Oe&&a.\u0275\u0275template(0,ct,2,0,"span",16)(1,rt,2,1,"span",13),2&Oe){const ye=pt.data.value;a.\u0275\u0275property("ngIf",""===ye),a.\u0275\u0275advance(),a.\u0275\u0275property("ngIf",""!==ye)}}var ze=function(Oe){return Oe.BUCKET="bucket",Oe.USER="user",Oe}(ze||{});let Et=(()=>{class Oe extends S.D{constructor(ye,je,ot,tt,Ft,bt,wt){super(),this.authStorageService=ye,this.modalService=je,this.nfsService=ot,this.taskListService=tt,this.taskWrapper=Ft,this.router=bt,this.actionLabels=wt,this.selection=new N.y,this.isDefaultCluster=!1,this.builders={"nfs/create":gt=>({path:gt.path,cluster_id:gt.cluster_id,fsal:gt.fsal})},this.permission=this.authStorageService.getPermissions().nfs,this.fsal=(0,g.C)(this.router.url);const zt=(0,g.q)(this.fsal),Xt=()=>this.selection.first()&&`${encodeURI(this.selection.first().cluster_id)}/${encodeURI(this.selection.first().export_id)}`;this.tableActions=[{permission:"create",icon:d.FI.add,routerLink:()=>`/${zt}/nfs/create`,canBePrimary:gt=>!gt.hasSingleSelection,name:this.actionLabels.CREATE},{permission:"update",icon:d.FI.edit,routerLink:()=>[`/${zt}/nfs/edit/${Xt()}`,{rgw_export_type:this.fsal!==P.q.RGW||h().isEmpty(this.selection?.first()?.path)?ze.USER:ze.BUCKET}],name:this.actionLabels.EDIT},{permission:"delete",icon:d.FI.destroy,click:()=>this.deleteNfsModal(),name:this.actionLabels.DELETE}]}ngOnInit(){this.columns=[{name:$localize`User`,prop:"fsal.user_id",flexGrow:2,cellTransformation:C.x.executing},{name:this.fsal===P.q.CEPH?$localize`Path`:$localize`Bucket`,prop:"path",flexGrow:2,cellTemplate:this.pathTmpl,cellTransformation:C.x.path},{name:$localize`Pseudo`,prop:"pseudo",flexGrow:2},{name:$localize`Cluster`,prop:"cluster_id",flexGrow:2},{name:$localize`Storage Backend`,prop:"fsal",flexGrow:2,cellTemplate:this.nfsFsal},{name:$localize`Access Type`,prop:"access_type",flexGrow:2},{name:$localize`NFS Protocol`,prop:"protocols",flexGrow:2,cellTemplate:this.protocolTpl},{name:$localize`Transports`,prop:"transports",flexGrow:2,cellTemplate:this.transportTpl}],this.taskListService.init(()=>this.nfsService.list(this.clusterId),ye=>this.prepareResponse(ye),ye=>this.exports=ye,()=>this.onFetchError(),this.taskFilter,this.itemFilter,this.builders)}ngOnDestroy(){this.summaryDataSubscription&&this.summaryDataSubscription.unsubscribe()}prepareResponse(ye){let je=[];return ye.filter(tt=>tt.fsal?.name===this.fsal).forEach(tt=>{tt.id=`${tt.cluster_id}:${tt.export_id}`,tt.state="LOADING",je=je.concat(tt)}),je}onFetchError(){this.table.reset(),this.viewCacheStatus={status:u.k.ValueException}}itemFilter(ye,je){return ye.cluster_id===je.metadata.cluster_id&&ye.export_id===je.metadata.export_id}taskFilter(ye){return["nfs/create","nfs/delete","nfs/edit"].includes(ye.name)}updateSelection(ye){this.selection=ye}deleteNfsModal(){const ye=this.selection.first().cluster_id,je=this.selection.first().export_id;this.modalRef=this.modalService.show(m.D,{impact:_.r.high,itemDescription:$localize`NFS export`,itemNames:[`${ye}:${je}`],submitActionObservable:()=>this.taskWrapper.wrapTaskAroundCall({task:new M.O("nfs/delete",{cluster_id:ye,export_id:je}),call:this.nfsService.delete(ye,je)})})}static{this.\u0275fac=function(je){return new(je||Oe)(a.\u0275\u0275directiveInject(I.v),a.\u0275\u0275directiveInject(A.V),a.\u0275\u0275directiveInject(R.Z),a.\u0275\u0275directiveInject(O.D),a.\u0275\u0275directiveInject(f.a),a.\u0275\u0275directiveInject(e.Router),a.\u0275\u0275directiveInject(v.Ss))}}static{this.\u0275cmp=a.\u0275\u0275defineComponent({type:Oe,selectors:[["cd-nfs-list"]],viewQuery:function(je,ot){if(1&je&&(a.\u0275\u0275viewQuery(We,5),a.\u0275\u0275viewQuery(te,7),a.\u0275\u0275viewQuery(_e,7),a.\u0275\u0275viewQuery(oe,7),a.\u0275\u0275viewQuery(de,7),a.\u0275\u0275viewQuery(ue,7)),2&je){let tt;a.\u0275\u0275queryRefresh(tt=a.\u0275\u0275loadQuery())&&(ot.nfsState=tt.first),a.\u0275\u0275queryRefresh(tt=a.\u0275\u0275loadQuery())&&(ot.nfsFsal=tt.first),a.\u0275\u0275queryRefresh(tt=a.\u0275\u0275loadQuery())&&(ot.pathTmpl=tt.first),a.\u0275\u0275queryRefresh(tt=a.\u0275\u0275loadQuery())&&(ot.table=tt.first),a.\u0275\u0275queryRefresh(tt=a.\u0275\u0275loadQuery())&&(ot.protocolTpl=tt.first),a.\u0275\u0275queryRefresh(tt=a.\u0275\u0275loadQuery())&&(ot.transportTpl=tt.first)}},inputs:{clusterId:"clusterId"},features:[a.\u0275\u0275ProvidersFeature([O.D]),a.\u0275\u0275InheritDefinitionFeature],decls:13,vars:6,consts:()=>{let ye,je,ot,tt;return ye=$localize`:␟734c9905951a774870497c5aaae8e3ee833b6196␟8440421106569981118:CephFS`,je=$localize`:␟2190548d236ca5f7bc7ab2bca334b860c5ff2ad4␟3671149880069127721:Object Gateway`,ot=$localize`:␟4a83db97e9a9a5be4283c1ab92ed205a182b5868␟4296659445289095716:All buckets owned by user`,tt=$localize`:␟2ce68fac5384fd3b3ff02cfcc40a82840469e697␟8478631765496814403:*`,[["table",""],["nfsFsal",""],["protocolTpl",""],["transportTpl",""],["pathTmpl",""],ye,je,tt,["columnMode","flex","identifier","id","forceIdentifier","true","selectionType","single",3,"setExpandedRow","updateSelection","data","columns","hasDetails"],[1,"table-actions"],[1,"btn-group",3,"permission","selection","tableActions"],[3,"selection",4,"cdTableDetail"],[3,"selection"],[4,"ngIf"],[4,"ngFor","ngForOf"],["size","md"],["ngbTooltip",ot,4,"ngIf"],["ngbTooltip",ot]]},template:function(je,ot){if(1&je){const tt=a.\u0275\u0275getCurrentView();a.\u0275\u0275elementStart(0,"cd-table",8,0),a.\u0275\u0275listener("setExpandedRow",function(bt){return a.\u0275\u0275restoreView(tt),a.\u0275\u0275resetView(ot.setExpandedRow(bt))})("updateSelection",function(bt){return a.\u0275\u0275restoreView(tt),a.\u0275\u0275resetView(ot.updateSelection(bt))}),a.\u0275\u0275elementStart(2,"div",9),a.\u0275\u0275element(3,"cd-table-actions",10),a.\u0275\u0275elementEnd(),a.\u0275\u0275template(4,T,1,1,"cd-nfs-details",11),a.\u0275\u0275elementEnd(),a.\u0275\u0275template(5,fe,2,2,"ng-template",null,1,a.\u0275\u0275templateRefExtractor)(7,Se,1,1,"ng-template",null,2,a.\u0275\u0275templateRefExtractor)(9,Ye,1,1,"ng-template",null,3,a.\u0275\u0275templateRefExtractor)(11,De,2,2,"ng-template",null,4,a.\u0275\u0275templateRefExtractor)}2&je&&(a.\u0275\u0275property("data",ot.exports)("columns",ot.columns)("hasDetails",!1),a.\u0275\u0275advance(3),a.\u0275\u0275property("permission",ot.permission)("selection",ot.selection)("tableActions",ot.tableActions))},dependencies:[E.O,B.j,w.N,ie.NgForOf,ie.NgIf,Y.NgbTooltip,V.Tag,Ae]})}}return Oe})()},19560:(q,y,s)=>{s.d(y,{C:()=>e,q:()=>l});var a=s(8265);const e=h=>h.startsWith("/rgw/nfs")?a.q.RGW:a.q.CEPH,l=h=>h===a.q.CEPH?"cephfs":"rgw"},44128:(q,y,s)=>{s.d(y,{d:()=>v});var a=s(91974),l=s(76218),R=s(93887),S=s(87536);let v=(()=>{class E{static{this.\u0275fac=function(u){return new(u||E)}}static{this.\u0275mod=S.\u0275\u0275defineNgModule({type:E})}static{this.\u0275inj=S.\u0275\u0275defineInjector({imports:[a.CommonModule,R.G,l.RouterModule]})}}return E})()},85770:(q,y,s)=>{s.d(y,{Y:()=>O});var a=s(87536),e=s(84857),l=s(36618),h=s(95631),R=s(50619),S=s(80697);let m=class oa{constructor(g){this.http=g,this.url="api/perf_counters"}list(){return this.http.get(this.url)}get(g,P){return this.http.get(`${this.url}/${g}/${P}`).pipe((0,R.mergeMap)(A=>(0,h.of)(A.counters)))}static{this.\u0275fac=function(P){return new(P||oa)(a.\u0275\u0275inject(l.HttpClient))}}static{this.\u0275prov=a.\u0275\u0275defineInjectable({token:oa,factory:oa.\u0275fac,providedIn:"root"})}};m=(0,e.__decorate)([S.G,(0,e.__metadata)("design:paramtypes",[l.HttpClient])],m);var v=s(91974),E=s(92805),C=s(62847),d=s(18457);const u=["valueTpl"];function N(f,g){if(1&f&&(a.\u0275\u0275text(0),a.\u0275\u0275pipe(1,"dimless")),2&f){const P=g.data.row;a.\u0275\u0275textInterpolate2(" ",a.\u0275\u0275pipeBind1(1,2,P.value)," ",P.unit," ")}}function M(f,g){if(1&f){const P=a.\u0275\u0275getCurrentView();a.\u0275\u0275elementStart(0,"cd-table",4),a.\u0275\u0275listener("fetchData",function(_){a.\u0275\u0275restoreView(P);const B=a.\u0275\u0275nextContext();return a.\u0275\u0275resetView(B.getCounters(_))}),a.\u0275\u0275template(1,N,2,4,"ng-template",null,1,a.\u0275\u0275templateRefExtractor),a.\u0275\u0275elementEnd()}if(2&f){const P=a.\u0275\u0275nextContext();a.\u0275\u0275property("data",P.counters)("columns",P.columns)("autoSave",!1)}}function I(f,g){1&f&&(a.\u0275\u0275elementStart(0,"cd-alert-panel",5),a.\u0275\u0275i18n(1,2),a.\u0275\u0275elementEnd())}let O=(()=>{class f{constructor(P){this.performanceCounterService=P,this.columns=[],this.counters=[]}ngOnInit(){this.columns=[{name:$localize`Name`,prop:"name",flexGrow:1},{name:$localize`Description`,prop:"description",flexGrow:1},{name:$localize`Value`,prop:"value",cellTemplate:this.valueTpl,flexGrow:1}]}getCounters(P){this.performanceCounterService.get(this.serviceType,this.serviceId).subscribe(A=>{this.counters=A},A=>{404===A.status?(A.preventDefault(),this.counters=null):P.error()})}static{this.\u0275fac=function(A){return new(A||f)(a.\u0275\u0275directiveInject(m))}}static{this.\u0275cmp=a.\u0275\u0275defineComponent({type:f,selectors:[["cd-table-performance-counter"]],viewQuery:function(A,_){if(1&A&&a.\u0275\u0275viewQuery(u,5),2&A){let B;a.\u0275\u0275queryRefresh(B=a.\u0275\u0275loadQuery())&&(_.valueTpl=B.first)}},inputs:{serviceType:"serviceType",serviceId:"serviceId"},decls:3,vars:2,consts:()=>{let P;return P=$localize`:␟ca53d681a9892d6fdbb57ee9676582186515e961␟1620331302033094465:Performance counters not available`,[["warning",""],["valueTpl",""],P,["columnMode","flex",3,"data","columns","autoSave","fetchData",4,"ngIf","ngIfElse"],["columnMode","flex",3,"fetchData","data","columns","autoSave"],["type","warning"]]},template:function(A,_){if(1&A&&a.\u0275\u0275template(0,M,3,3,"cd-table",3)(1,I,2,0,"ng-template",null,0,a.\u0275\u0275templateRefExtractor),2&A){const B=a.\u0275\u0275reference(2);a.\u0275\u0275property("ngIf",_.counters)("ngIfElse",B)}},dependencies:[v.NgIf,E.m,C.O,d.u]})}}return f})()},24192:(q,y,s)=>{s.d(y,{$H:()=>l,B5:()=>h,Oe:()=>e,SX:()=>a,_4:()=>R,do:()=>S});class a{}class e{}class l{}class h{}var R=function(m){return m.ENABLED="enabled",m.FORBIDDEN="forbidden",m.ALLOWED="allowed",m}(R||{}),S=function(m){return m.directional="directional",m.symmetrical="symmetrical",m}(S||{})},13723:(q,y,s)=>{s.d(y,{Hk:()=>l,XG:()=>e,tj:()=>a});const a="rgw";var e=function(h){return h.AmazonS3FullAccess="AmazonS3FullAccess",h.AmazonS3ReadOnlyAccess="AmazonS3ReadOnlyAccess",h}(e||{});const l={[e.AmazonS3FullAccess]:"arn:aws:iam::aws:policy/AmazonS3FullAccess",[e.AmazonS3ReadOnlyAccess]:"arn:aws:iam::aws:policy/AmazonS3ReadOnlyAccess"}},26481:(q,y,s)=>{s.d(y,{_:()=>C});var a=s(91974),l=s(77317),R=s(13421),S=s(10522),m=s(93887),v=s(87536);let C=(()=>{class d{static{this.\u0275fac=function(M){return new(M||d)}}static{this.\u0275mod=v.\u0275\u0275defineNgModule({type:d})}static{this.\u0275inj=v.\u0275\u0275defineInjector({imports:[a.CommonModule,S.h,m.G,l.NgbNavModule,R.Y]})}}return d})()},97421:(q,y,s)=>{s.d(y,{v:()=>S});var a=s(29841),e=s.n(a),l=s(26481);class h{static{this.CATEGORY_CLEAN="clean"}static{this.CATEGORY_WORKING="working"}static{this.CATEGORY_WARNING="warning"}static{this.CATEGORY_UNKNOWN="unknown"}static{this.VALID_CATEGORIES=[h.CATEGORY_CLEAN,h.CATEGORY_WORKING,h.CATEGORY_WARNING,h.CATEGORY_UNKNOWN]}constructor(v){if(this.type=v,!this.isValidType())throw new Error("Wrong placement group category type");this.setTypeStates()}isValidType(){return h.VALID_CATEGORIES.includes(this.type)}setTypeStates(){switch(this.type){case h.CATEGORY_CLEAN:this.states=["active","clean"];break;case h.CATEGORY_WORKING:this.states=["activating","backfill_wait","backfilling","creating","deep","degraded","forced_backfill","forced_recovery","peering","peered","recovering","recovery_wait","repair","scrubbing","snaptrim","snaptrim_wait"];break;case h.CATEGORY_WARNING:this.states=["backfill_toofull","backfill_unfound","down","incomplete","inconsistent","recovery_toofull","recovery_unfound","remapped","snaptrim_error","stale","undersized"];break;default:this.states=[]}}}var R=s(87536);let S=(()=>{class m{constructor(){this.categories=this.createCategories()}getAllTypes(){return h.VALID_CATEGORIES}getTypeByStates(E){const C=this.getPgStatesFromText(E);if(0===C.length)return h.CATEGORY_UNKNOWN;const d=e().zipObject(h.VALID_CATEGORIES,h.VALID_CATEGORIES.map(N=>e().intersection(this.categories[N].states,C).length));if(d[h.CATEGORY_WARNING]>0)return h.CATEGORY_WARNING;const u=d[h.CATEGORY_WORKING];return C.length>d[h.CATEGORY_CLEAN]+u?h.CATEGORY_UNKNOWN:u?h.CATEGORY_WORKING:h.CATEGORY_CLEAN}createCategories(){return e().zipObject(h.VALID_CATEGORIES,h.VALID_CATEGORIES.map(E=>new h(E)))}getPgStatesFromText(E){const C=E.replace(/[^a-z_]+/g," ").trim().split(" ");return e().uniq(C)}static{this.\u0275fac=function(C){return new(C||m)}}static{this.\u0275prov=R.\u0275\u0275defineInjectable({token:m,factory:m.\u0275fac,providedIn:l._})}}return m})()},3907:(q,y,s)=>{s.r(y),s.d(y,{AuthModule:()=>Pn,RoutedAuthModule:()=>eo});var a=s(91974),e=s(53648),l=s(76218),h=s(77317),R=s(13421),S=s(54372),m=s(93887),v=s(95631),E=s(36618),C=s(50619),d=s(87536);let u=(()=>{class le{constructor(ee){this.http=ee}list(){return this.http.get("api/role")}delete(ee){return this.http.delete(`api/role/${ee}`)}get(ee){return this.http.get(`api/role/${ee}`)}create(ee){return this.http.post("api/role",ee)}clone(ee,$){return this.http.post(`api/role/${ee}/clone`,{new_name:$})}update(ee){return this.http.put(`api/role/${ee.name}`,ee)}exists(ee){return this.list().pipe((0,C.mergeMap)($=>{const ne=$.some(b=>b.name===ee);return(0,v.of)(ne)}))}static{this.\u0275fac=function($){return new($||le)(d.\u0275\u0275inject(E.HttpClient))}}static{this.\u0275prov=d.\u0275\u0275defineInjectable({token:le,factory:le.\u0275fac,providedIn:"root"})}}return le})(),N=(()=>{class le{constructor(ee){this.http=ee}list(){return this.http.get("ui-api/scope")}static{this.\u0275fac=function($){return new($||le)(d.\u0275\u0275inject(E.HttpClient))}}static{this.\u0275prov=d.\u0275\u0275defineInjectable({token:le,factory:le.\u0275fac,providedIn:"root"})}}return le})();var M=s(88285),I=s(74902),O=s(58384),f=s(3687),g=s(88701),P=function(le){return le.editing="editing",le}(P||{});class A{}var _=s(59781),B=s(25171),w=s(23603),ie=s(56677),Y=s(90476),V=s(37966),L=s(51862),Q=s(3600),me=s(37353);const Ie=()=>({md:4}),He=le=>({required:le});function Ae(le,ke){1&le&&(d.\u0275\u0275elementStart(0,"span"),d.\u0275\u0275elementContainerStart(1),d.\u0275\u0275i18n(2,5),d.\u0275\u0275elementContainerEnd(),d.\u0275\u0275elementEnd())}function We(le,ke){1&le&&(d.\u0275\u0275elementStart(0,"span"),d.\u0275\u0275elementContainerStart(1),d.\u0275\u0275i18n(2,6),d.\u0275\u0275elementContainerEnd(),d.\u0275\u0275elementEnd())}function te(le,ke){if(1&le&&d.\u0275\u0275template(0,Ae,3,0,"span",19)(1,We,3,0,"span",19),2&le){d.\u0275\u0275nextContext();const ee=d.\u0275\u0275reference(2),$=d.\u0275\u0275nextContext();d.\u0275\u0275property("ngIf",$.roleForm.showError("name",ee,"required")),d.\u0275\u0275advance(),d.\u0275\u0275property("ngIf",$.roleForm.showError("name",ee,"notUnique"))}}function _e(le,ke){if(1&le){const ee=d.\u0275\u0275getCurrentView();d.\u0275\u0275elementContainerStart(0),d.\u0275\u0275elementStart(1,"form",9,0)(3,"div",10),d.\u0275\u0275i18n(4,2),d.\u0275\u0275pipe(5,"titlecase"),d.\u0275\u0275pipe(6,"upperFirst"),d.\u0275\u0275elementEnd(),d.\u0275\u0275elementStart(7,"div",11)(8,"cds-text-label",12),d.\u0275\u0275i18nStart(9,3),d.\u0275\u0275element(10,"span",13)(11,"input",14),d.\u0275\u0275i18nEnd(),d.\u0275\u0275elementEnd(),d.\u0275\u0275template(12,te,2,2,"ng-template",null,1,d.\u0275\u0275templateRefExtractor),d.\u0275\u0275elementEnd(),d.\u0275\u0275elementStart(14,"div",11)(15,"cds-text-label",15),d.\u0275\u0275i18nStart(16,4),d.\u0275\u0275element(17,"input",16),d.\u0275\u0275i18nEnd(),d.\u0275\u0275elementEnd()(),d.\u0275\u0275elementStart(18,"div",11)(19,"cds-text-label"),d.\u0275\u0275text(20,"Permissions"),d.\u0275\u0275elementEnd(),d.\u0275\u0275element(21,"cd-checked-table-form",17),d.\u0275\u0275elementEnd(),d.\u0275\u0275elementStart(22,"div",11)(23,"cd-form-button-panel",18),d.\u0275\u0275pipe(24,"titlecase"),d.\u0275\u0275pipe(25,"upperFirst"),d.\u0275\u0275listener("submitActionEvent",function(){d.\u0275\u0275restoreView(ee);const ne=d.\u0275\u0275nextContext();return d.\u0275\u0275resetView(ne.submit())}),d.\u0275\u0275elementEnd()()(),d.\u0275\u0275elementContainerEnd()}if(2&le){const ee=d.\u0275\u0275reference(13),$=d.\u0275\u0275nextContext();d.\u0275\u0275advance(),d.\u0275\u0275property("formGroup",$.roleForm),d.\u0275\u0275advance(5),d.\u0275\u0275i18nExp(d.\u0275\u0275pipeBind1(5,14,$.action))(d.\u0275\u0275pipeBind1(6,16,$.resource)),d.\u0275\u0275i18nApply(4),d.\u0275\u0275advance(2),d.\u0275\u0275property("invalid",!$.roleForm.controls.name.valid&&$.roleForm.controls.name.dirty)("invalidText",ee),d.\u0275\u0275advance(2),d.\u0275\u0275property("ngClass",d.\u0275\u0275pureFunction1(22,He,$.mode!==$.roleFormMode.editing)),d.\u0275\u0275advance(),d.\u0275\u0275property("invalid",!$.roleForm.controls.name.valid&&$.roleForm.controls.name.dirty),d.\u0275\u0275advance(10),d.\u0275\u0275property("data",$.scopes_permissions)("columns",$.columns)("form",$.roleForm)("scopes",$.scopes)("initialValue",$.initialValue),d.\u0275\u0275advance(2),d.\u0275\u0275property("form",$.roleForm)("submitText",d.\u0275\u0275pipeBind1(24,18,$.action)+" "+d.\u0275\u0275pipeBind1(25,20,$.resource))}}let oe=(()=>{class le extends I.g{constructor(ee,$,ne,b,U,z){super(),this.route=ee,this.router=$,this.roleService=ne,this.scopeService=b,this.notificationService=U,this.actionLabels=z,this.scopes=[],this.scopes_permissions=[],this.initialValue={},this.roleFormMode=P,this.resource=$localize`role`,this.createForm()}createForm(){this.roleForm=new O.$({name:new e.UntypedFormControl("",{validators:[e.Validators.required],asyncValidators:[f.xQ.unique(this.roleService.exists,this.roleService)]}),description:new e.UntypedFormControl(""),scopes_permissions:new e.UntypedFormControl({})})}ngOnInit(){this.columns=[{prop:"scope",name:$localize`All`,flexGrow:2},{prop:"read",name:$localize`Read`,flexGrow:1,cellClass:"text-center"},{prop:"create",name:$localize`Create`,flexGrow:1,cellClass:"text-center"},{prop:"update",name:$localize`Update`,flexGrow:1,cellClass:"text-center"},{prop:"delete",name:$localize`Delete`,flexGrow:1,cellClass:"text-center"}],this.router.url.startsWith("/user-management/roles/edit")?(this.mode=this.roleFormMode.editing,this.action=this.actionLabels.EDIT):this.action=this.actionLabels.CREATE,this.mode===this.roleFormMode.editing?this.initEdit():this.initCreate()}initCreate(){this.scopeService.list().subscribe(ee=>{this.scopes=ee,this.loadingReady()})}initEdit(){this.roleForm.get("name").disable(),this.route.params.subscribe(ee=>{const $=[];$.push(this.scopeService.list()),$.push(this.roleService.get(ee.name)),(0,v.forkJoin)($).subscribe(ne=>{this.scopes=ne[0],["name","description","scopes_permissions"].forEach(b=>this.roleForm.get(b).setValue(ne[1][b])),this.initialValue=ne[1].scopes_permissions,this.loadingReady()})})}getRequest(){const ee=new A;return["name","description","scopes_permissions"].forEach($=>ee[$]=this.roleForm.get($).value),ee}createAction(){const ee=this.getRequest();this.roleService.create(ee).subscribe(()=>{this.notificationService.show(M._.success,$localize`Created role '${ee.name}'`),this.router.navigate(["/user-management/roles"])},()=>{this.roleForm.setErrors({cdSubmitButton:!0})})}editAction(){const ee=this.getRequest();this.roleService.update(ee).subscribe(()=>{this.notificationService.show(M._.success,$localize`Updated role '${ee.name}'`),this.router.navigate(["/user-management/roles"])},()=>{this.roleForm.setErrors({cdSubmitButton:!0})})}submit(){this.mode===this.roleFormMode.editing?this.editAction():this.createAction()}static{this.\u0275fac=function($){return new($||le)(d.\u0275\u0275directiveInject(l.ActivatedRoute),d.\u0275\u0275directiveInject(l.Router),d.\u0275\u0275directiveInject(u),d.\u0275\u0275directiveInject(N),d.\u0275\u0275directiveInject(g.J),d.\u0275\u0275directiveInject(S.Ss))}}static{this.\u0275cmp=d.\u0275\u0275defineComponent({type:le,selectors:[["cd-role-form"]],features:[d.\u0275\u0275InheritDefinitionFeature],decls:2,vars:3,consts:()=>{let ee,$,ne,b,U,z;return ee=$localize`:␟2fecea01ce1d44114ee45144eff6d47a5016a74f␟5451140586403689891:Name...`,$=$localize`:form title␟a90ab37a86361510c6418a0b01e5fb53b18aad60␟4895964714444299563:${"\ufffd0\ufffd"}:INTERPOLATION: ${"\ufffd1\ufffd"}:INTERPOLATION_1: `,ne=$localize`:␟6f6a9a60f4a91c37bcd3e3750fae72a988d8c77c␟3277468724232946823:Name ${"\ufffd#10\ufffd"}:START_TAG_SPAN:${"\ufffd/#10\ufffd"}:CLOSE_TAG_SPAN:${"\ufffd#11\ufffd\ufffd/#11\ufffd"}:TAG_INPUT:`,b=$localize`:␟ecd2f54d9c5b38098d5c776ba5eb3751b4b5f818␟6338266770837897193:Description ${"\ufffd#17\ufffd\ufffd/#17\ufffd"}:TAG_INPUT:`,U=$localize`:␟3dc61dfb7051217af07582ab905ca9cfd7b993e0␟2001824353286790379: This field is required. `,z=$localize`:␟7ef2ea612d91d993018752e9bc1d7d390bcb0db2␟524199260030074351: The chosen name is already in use. `,[["formDir","ngForm"],["nameError",""],$,ne,b,U,z,["cdsCol","",3,"columnNumbers"],[4,"cdFormLoading"],["name","roleForm","novalidate","",3,"formGroup"],[1,"form-header"],[1,"form-item"],["for","name","cdRequiredField","Name",3,"invalid","invalidText"],[3,"ngClass"],["cdsText","","placeholder",ee,"id","name","name","name","formControlName","name","autofocus","",3,"invalid"],["for","name"],["cdsText","","type","text","placeholder","Description..","id","description","name","description","formControlName","description",1,"input-field"],["inputField","scopes_permissions",3,"data","columns","form","scopes","initialValue"],["wrappingClass","text-right",3,"submitActionEvent","form","submitText"],[4,"ngIf"]]},template:function($,ne){1&$&&(d.\u0275\u0275elementStart(0,"div",7),d.\u0275\u0275template(1,_e,26,24,"ng-container",8),d.\u0275\u0275elementEnd()),2&$&&(d.\u0275\u0275property("columnNumbers",d.\u0275\u0275pureFunction0(2,Ie)),d.\u0275\u0275advance(),d.\u0275\u0275property("cdFormLoading",ne.loading))},dependencies:[a.NgClass,a.NgIf,e.\u0275NgNoValidate,e.DefaultValueAccessor,e.NgControlStatus,e.NgControlStatusGroup,e.FormGroupDirective,e.FormControlName,_.e,B.N,w.B,ie.G,Y.S,V.E,L.P,Q.TextInputLabelComponent,Q.TextInput,Q.ColumnDirective,a.TitleCasePipe,me.r],styles:[".datatable-permissions-header-cell-label[_ngcontent-%COMP%], .datatable-permissions-scope-cell-label[_ngcontent-%COMP%]{font-weight:700}"]})}}return le})();var de=s(25947),ue=s(84821),T=s(62431),K=s(2148),ce=s(46045),fe=s(19380),Te=s(76139),Se=s(82254),Ge=s(94254),Ye=s(2361),ct=s(62847),rt=s(32295),De=s(45843),ze=s(29841),Et=s.n(ze);function Oe(le,ke){if(1&le&&(d.\u0275\u0275elementContainerStart(0),d.\u0275\u0275element(1,"cd-table",1),d.\u0275\u0275elementContainerEnd()),2&le){const ee=d.\u0275\u0275nextContext();d.\u0275\u0275advance(),d.\u0275\u0275property("data",ee.scopes_permissions)("columns",ee.columns)("toolHeader",!1)("autoReload",!1)("autoSave",!1)("footer",!1)("limit",0)}}let pt=(()=>{class le{constructor(){this.scopes_permissions=[]}ngOnInit(){this.columns=[{prop:"scope",name:$localize`Scope`,flexGrow:2},{prop:"read",name:$localize`Read`,flexGrow:1,cellClass:"text-left",cellTransformation:K.x.checkIcon},{prop:"create",name:$localize`Create`,flexGrow:1,cellClass:"text-left",cellTransformation:K.x.checkIcon},{prop:"update",name:$localize`Update`,flexGrow:1,cellClass:"text-left",cellTransformation:K.x.checkIcon},{prop:"delete",name:$localize`Delete`,flexGrow:1,cellClass:"text-left",cellTransformation:K.x.checkIcon}]}ngOnChanges(){if(this.selection){this.selectedItem=this.selection;const ee=[];Et().each(this.scopes,$=>{const ne={read:!1,create:!1,update:!1,delete:!1};ne.scope=$,$ in this.selectedItem.scopes_permissions&&Et().each(this.selectedItem.scopes_permissions[$],b=>{ne[b]=!0}),ee.push(ne)}),this.scopes_permissions=ee}}static{this.\u0275fac=function($){return new($||le)}}static{this.\u0275cmp=d.\u0275\u0275defineComponent({type:le,selectors:[["cd-role-details"]],inputs:{selection:"selection",scopes:"scopes"},features:[d.\u0275\u0275NgOnChangesFeature],decls:1,vars:1,consts:[[4,"ngIf"],["columnMode","flex",3,"data","columns","toolHeader","autoReload","autoSave","footer","limit"]],template:function($,ne){1&$&&d.\u0275\u0275template(0,Oe,2,7,"ng-container",0),2&$&&d.\u0275\u0275property("ngIf",ne.selection)},dependencies:[a.NgIf,ct.O],styles:[".fa[_ngcontent-%COMP%]{font-size:large}.fa.fa-square-o[_ngcontent-%COMP%]{color:#ced4da}"]})}}return le})();const ye=()=>({exact:!0});let je=(()=>{class le{constructor(ee){this.router=ee}static{this.\u0275fac=function($){return new($||le)(d.\u0275\u0275directiveInject(l.Router))}}static{this.\u0275cmp=d.\u0275\u0275defineComponent({type:le,selectors:[["cd-user-tabs"]],decls:7,vars:4,consts:()=>{let ee,$;return ee=$localize`:␟4d13a9cd5ed3dcee0eab22cb25198d43886942be␟4555457172864212828:Users`,$=$localize`:␟9610487cbeb5796d34d8601b5ac0c0a65f9e1d19␟795890916060309463:Roles`,[ee,$,[1,"nav","nav-tabs"],[1,"nav-item"],["routerLink","/user-management/users","routerLinkActive","active","ariaCurrentWhenActive","page",1,"nav-link",3,"routerLinkActiveOptions"],["routerLink","/user-management/roles","routerLinkActive","active","ariaCurrentWhenActive","page",1,"nav-link",3,"routerLinkActiveOptions"]]},template:function($,ne){1&$&&(d.\u0275\u0275elementStart(0,"ul",2)(1,"li",3)(2,"a",4),d.\u0275\u0275i18n(3,0),d.\u0275\u0275elementEnd()(),d.\u0275\u0275elementStart(4,"li",3)(5,"a",5),d.\u0275\u0275i18n(6,1),d.\u0275\u0275elementEnd()()()),2&$&&(d.\u0275\u0275advance(2),d.\u0275\u0275property("routerLinkActiveOptions",d.\u0275\u0275pureFunction0(2,ye)),d.\u0275\u0275advance(3),d.\u0275\u0275property("routerLinkActiveOptions",d.\u0275\u0275pureFunction0(3,ye)))},dependencies:[l.RouterLink,l.RouterLinkActive]})}}return le})();function ot(le,ke){if(1&le&&d.\u0275\u0275element(0,"cd-role-details",3),2&le){const ee=d.\u0275\u0275nextContext();d.\u0275\u0275property("selection",ee.expandedRow)("scopes",ee.scopes)}}let Ft=(()=>{class le extends de.D{constructor(ee,$,ne,b,U,z,se,$e){super(),this.roleService=ee,this.scopeService=$,this.emptyPipe=ne,this.authStorageService=b,this.modalService=U,this.notificationService=z,this.urlBuilder=se,this.actionLabels=$e,this.selection=new fe.y,this.permission=this.authStorageService.getPermissions().user,this.tableActions=[{permission:"create",icon:ce.FI.add,routerLink:()=>this.urlBuilder.getCreate(),name:this.actionLabels.CREATE},{permission:"create",icon:ce.FI.clone,name:this.actionLabels.CLONE,disable:()=>!this.selection.hasSingleSelection,click:()=>this.cloneRole()},{permission:"update",icon:ce.FI.edit,disable:()=>!this.selection.hasSingleSelection||this.selection.first().system,routerLink:()=>this.selection.first()&&this.urlBuilder.getEdit(this.selection.first().name),name:this.actionLabels.EDIT},{permission:"delete",icon:ce.FI.destroy,disable:()=>!this.selection.hasSingleSelection||this.selection.first().system,click:()=>this.deleteRoleModal(),name:this.actionLabels.DELETE}]}ngOnInit(){this.columns=[{name:$localize`Name`,prop:"name",flexGrow:3},{name:$localize`Description`,prop:"description",flexGrow:5,pipe:this.emptyPipe},{name:$localize`System Role`,prop:"system",cellClass:"text-left",flexGrow:1,cellTransformation:K.x.checkIcon}]}getRoles(){(0,v.forkJoin)([this.roleService.list(),this.scopeService.list()]).subscribe(ee=>{this.roles=ee[0],this.scopes=ee[1]})}updateSelection(ee){this.selection=ee}deleteRole(ee){this.roleService.delete(ee).subscribe(()=>{this.getRoles(),this.modalService.dismissAll(),this.notificationService.show(M._.success,$localize`Deleted role '${ee}'`)},()=>{this.modalRef.componentInstance.stopLoadingSpinner()})}deleteRoleModal(){const ee=this.selection.first().name;this.modalRef=this.modalService.show(ue.D,{itemDescription:"Role",itemNames:[ee],submitAction:()=>this.deleteRole(ee)})}cloneRole(){const ee=this.selection.first().name;this.modalRef=this.modalService.show(T.b,{fields:[{type:"text",name:"newName",value:`${ee}_clone`,label:$localize`New name`,required:!0}],titleText:$localize`Clone Role`,submitButtonText:$localize`Clone Role`,onSubmit:$=>{this.roleService.clone(ee,$.newName).subscribe(()=>{this.getRoles(),this.notificationService.show(M._.success,$localize`Cloned role '${$.newName}' from '${ee}'`)})}})}static{this.\u0275fac=function($){return new($||le)(d.\u0275\u0275directiveInject(u),d.\u0275\u0275directiveInject(N),d.\u0275\u0275directiveInject(Te.y),d.\u0275\u0275directiveInject(Se.v),d.\u0275\u0275directiveInject(Ge.V),d.\u0275\u0275directiveInject(g.J),d.\u0275\u0275directiveInject(Ye.E),d.\u0275\u0275directiveInject(S.Ss))}}static{this.\u0275cmp=d.\u0275\u0275defineComponent({type:le,selectors:[["cd-role-list"]],features:[d.\u0275\u0275ProvidersFeature([{provide:Ye.E,useValue:new Ye.E("user-management/roles")}]),d.\u0275\u0275InheritDefinitionFeature],decls:4,vars:6,consts:[["columnMode","flex","identifier","name","selectionType","single",3,"setExpandedRow","fetchData","updateSelection","data","columns","hasDetails"],[1,"table-actions",3,"permission","selection","tableActions"],[3,"selection","scopes",4,"cdTableDetail"],[3,"selection","scopes"]],template:function($,ne){1&$&&(d.\u0275\u0275element(0,"cd-user-tabs"),d.\u0275\u0275elementStart(1,"cd-table",0),d.\u0275\u0275listener("setExpandedRow",function(U){return ne.setExpandedRow(U)})("fetchData",function(){return ne.getRoles()})("updateSelection",function(U){return ne.updateSelection(U)}),d.\u0275\u0275element(2,"cd-table-actions",1),d.\u0275\u0275template(3,ot,1,2,"cd-role-details",2),d.\u0275\u0275elementEnd()),2&$&&(d.\u0275\u0275advance(),d.\u0275\u0275property("data",ne.roles)("columns",ne.columns)("hasDetails",!0),d.\u0275\u0275advance(),d.\u0275\u0275property("permission",ne.permission)("selection",ne.selection)("tableActions",ne.tableActions))},dependencies:[ct.O,rt.j,De.N,pt,je]})}}return le})();var bt=s(89939),wt=s.n(bt),zt=s(42902),Xt=s(11549),kt=s(36719),jt=s(34177),Tt=s(66668),gt=s(43808),it=s(65784),Ke=s(76857),dt=function(le){return le.editing="editing",le}(dt||{});class Ct{}var Wt=s(55472),en=s(41861),yt=s(70946);const mt=["removeSelfUserReadUpdatePermissionTpl"],Gt=()=>({md:4}),Lt=le=>({required:le});function Pt(le,ke){1&le&&(d.\u0275\u0275elementStart(0,"span"),d.\u0275\u0275elementContainerStart(1),d.\u0275\u0275i18n(2,13),d.\u0275\u0275elementContainerEnd(),d.\u0275\u0275elementEnd())}function En(le,ke){1&le&&(d.\u0275\u0275elementStart(0,"span"),d.\u0275\u0275elementContainerStart(1),d.\u0275\u0275i18n(2,14),d.\u0275\u0275elementContainerEnd(),d.\u0275\u0275elementEnd())}function lt(le,ke){if(1&le&&d.\u0275\u0275template(0,Pt,3,0,"span",45)(1,En,3,0,"span",45),2&le){d.\u0275\u0275nextContext();const ee=d.\u0275\u0275reference(3),$=d.\u0275\u0275nextContext();d.\u0275\u0275property("ngIf",$.userForm.showError("username",ee,"required")),d.\u0275\u0275advance(),d.\u0275\u0275property("ngIf",$.userForm.showError("username",ee,"notUnique"))}}function vn(le,ke){if(1&le&&(d.\u0275\u0275i18nStart(0,9,1),d.\u0275\u0275element(1,"cd-helper",46),d.\u0275\u0275i18nEnd()),2&le){const ee=d.\u0275\u0275nextContext(2);d.\u0275\u0275advance(),d.\u0275\u0275propertyInterpolate("html",ee.passwordPolicyHelpText)}}function Kt(le,ke){1&le&&(d.\u0275\u0275elementStart(0,"span",48),d.\u0275\u0275i18n(1,15),d.\u0275\u0275elementEnd())}function dn(le,ke){1&le&&(d.\u0275\u0275elementStart(0,"span",48),d.\u0275\u0275i18n(1,16),d.\u0275\u0275elementEnd())}function Nt(le,ke){if(1&le&&(d.\u0275\u0275elementStart(0,"span",48),d.\u0275\u0275text(1),d.\u0275\u0275elementEnd()),2&le){const ee=d.\u0275\u0275nextContext(3);d.\u0275\u0275advance(),d.\u0275\u0275textInterpolate1(" ",ee.passwordValuation," ")}}function gn(le,ke){if(1&le&&d.\u0275\u0275template(0,Kt,2,0,"span",47)(1,dn,2,0,"span",47)(2,Nt,2,1,"span",47),2&le){d.\u0275\u0275nextContext();const ee=d.\u0275\u0275reference(3),$=d.\u0275\u0275nextContext();d.\u0275\u0275property("ngIf",$.userForm.showError("password",ee,"match")),d.\u0275\u0275advance(),d.\u0275\u0275property("ngIf",$.userForm.showError("password",ee,"required")),d.\u0275\u0275advance(),d.\u0275\u0275property("ngIf",$.userForm.showError("password",ee,"passwordPolicy"))}}function Cn(le,ke){1&le&&(d.\u0275\u0275elementStart(0,"span",48),d.\u0275\u0275i18n(1,17),d.\u0275\u0275elementEnd())}function W(le,ke){1&le&&(d.\u0275\u0275elementStart(0,"span",48),d.\u0275\u0275i18n(1,18),d.\u0275\u0275elementEnd())}function Re(le,ke){if(1&le&&d.\u0275\u0275template(0,Cn,2,0,"span",47)(1,W,2,0,"span",47),2&le){d.\u0275\u0275nextContext();const ee=d.\u0275\u0275reference(3),$=d.\u0275\u0275nextContext();d.\u0275\u0275property("ngIf",$.userForm.showError("confirmpassword",ee,"match")),d.\u0275\u0275advance(),d.\u0275\u0275property("ngIf",$.userForm.showError("confirmpassword",ee,"required"))}}function J(le,ke){1&le&&(d.\u0275\u0275elementStart(0,"cd-helper",52)(1,"span"),d.\u0275\u0275text(2," The Dashboard setting defining the expiration interval of passwords is currently set to "),d.\u0275\u0275elementStart(3,"strong"),d.\u0275\u0275text(4,"0"),d.\u0275\u0275elementEnd(),d.\u0275\u0275text(5,". This means if a date is set, the user password will only expire once. "),d.\u0275\u0275elementEnd(),d.\u0275\u0275elementStart(6,"span"),d.\u0275\u0275text(7,"Consider configuring the Dashboard setting "),d.\u0275\u0275elementStart(8,"a",53),d.\u0275\u0275text(9,"USER_PWD_EXPIRATION_SPAN"),d.\u0275\u0275elementEnd(),d.\u0275\u0275text(10," in order to let passwords expire periodically. "),d.\u0275\u0275elementEnd()())}function ut(le,ke){1&le&&(d.\u0275\u0275elementStart(0,"span",48),d.\u0275\u0275i18n(1,19),d.\u0275\u0275elementEnd())}function ht(le,ke){if(1&le&&(d.\u0275\u0275elementStart(0,"div",31)(1,"cds-text-label",49),d.\u0275\u0275text(2),d.\u0275\u0275template(3,J,11,0,"cd-helper",50),d.\u0275\u0275element(4,"cd-date-time-picker",51),d.\u0275\u0275elementEnd(),d.\u0275\u0275template(5,ut,2,0,"span",47),d.\u0275\u0275elementEnd()),2&le){d.\u0275\u0275nextContext();const ee=d.\u0275\u0275reference(3),$=d.\u0275\u0275nextContext();d.\u0275\u0275advance(),d.\u0275\u0275property("ngClass",d.\u0275\u0275pureFunction1(7,Lt,$.pwdExpirationSettings.pwdExpirationSpan>0)),d.\u0275\u0275advance(),d.\u0275\u0275textInterpolate1("","Password Expiration Date"," "),d.\u0275\u0275advance(),d.\u0275\u0275property("ngIf",0==$.pwdExpirationSettings.pwdExpirationSpan),d.\u0275\u0275advance(),d.\u0275\u0275property("control",$.userForm.get("pwdExpirationDate"))("hasTime",!1)("defaultDate",$.passwordexp),d.\u0275\u0275advance(),d.\u0275\u0275property("ngIf",$.userForm.showError("pwdExpirationDate",ee,"required"))}}function Gn(le,ke){1&le&&(d.\u0275\u0275elementStart(0,"span",48),d.\u0275\u0275i18n(1,20),d.\u0275\u0275elementEnd())}function Hn(le,ke){if(1&le&&d.\u0275\u0275template(0,Gn,2,0,"span",47),2&le){d.\u0275\u0275nextContext();const ee=d.\u0275\u0275reference(3),$=d.\u0275\u0275nextContext();d.\u0275\u0275property("ngIf",$.userForm.showError("email",ee,"email"))}}function Le(le,ke){if(1&le&&(d.\u0275\u0275elementStart(0,"div",31)(1,"cds-combo-box",54),d.\u0275\u0275i18nStart(2,21),d.\u0275\u0275element(3,"cds-dropdown-list"),d.\u0275\u0275i18nEnd(),d.\u0275\u0275elementEnd()()),2&le){const ee=d.\u0275\u0275nextContext(2);d.\u0275\u0275advance(),d.\u0275\u0275property("appendInline",!0)("items",ee.allRoles)}}function Vn(le,ke){1&le&&(d.\u0275\u0275elementStart(0,"div",31)(1,"cds-checkbox",55),d.\u0275\u0275i18n(2,22),d.\u0275\u0275elementEnd()())}function Sn(le,ke){1&le&&(d.\u0275\u0275elementStart(0,"div",31)(1,"cds-checkbox",56),d.\u0275\u0275i18n(2,23),d.\u0275\u0275elementEnd()())}function un(le,ke){if(1&le){const ee=d.\u0275\u0275getCurrentView();d.\u0275\u0275elementContainerStart(0),d.\u0275\u0275elementStart(1,"form",29,2)(4,"div",30),d.\u0275\u0275i18n(5,7),d.\u0275\u0275pipe(6,"titlecase"),d.\u0275\u0275pipe(7,"upperFirst"),d.\u0275\u0275elementEnd(),d.\u0275\u0275elementStart(8,"div",31)(9,"cds-text-label",32),d.\u0275\u0275i18nStart(10,8),d.\u0275\u0275element(11,"input",33),d.\u0275\u0275i18nEnd(),d.\u0275\u0275elementEnd(),d.\u0275\u0275template(12,lt,2,2,"ng-template",null,3,d.\u0275\u0275templateRefExtractor),d.\u0275\u0275elementEnd(),d.\u0275\u0275elementStart(14,"div",31)(15,"cds-password-label",34),d.\u0275\u0275i18nStart(16,9),d.\u0275\u0275template(17,vn,2,1,"cd-helper",35),d.\u0275\u0275element(18,"input",36),d.\u0275\u0275i18nEnd(),d.\u0275\u0275elementEnd(),d.\u0275\u0275template(19,gn,3,3,"ng-template",null,4,d.\u0275\u0275templateRefExtractor),d.\u0275\u0275elementEnd(),d.\u0275\u0275elementStart(21,"div",31)(22,"cds-password-label",37),d.\u0275\u0275i18nStart(23,10),d.\u0275\u0275element(24,"input",38),d.\u0275\u0275i18nEnd(),d.\u0275\u0275elementEnd(),d.\u0275\u0275template(25,Re,2,2,"ng-template",null,5,d.\u0275\u0275templateRefExtractor),d.\u0275\u0275elementEnd(),d.\u0275\u0275template(27,ht,6,9,"div",39),d.\u0275\u0275elementStart(28,"div",31)(29,"cds-text-label",40),d.\u0275\u0275i18nStart(30,11),d.\u0275\u0275element(31,"input",41),d.\u0275\u0275i18nEnd(),d.\u0275\u0275elementEnd()(),d.\u0275\u0275elementStart(32,"div",31)(33,"cds-text-label",42),d.\u0275\u0275i18nStart(34,12),d.\u0275\u0275element(35,"input",43),d.\u0275\u0275i18nEnd(),d.\u0275\u0275elementEnd(),d.\u0275\u0275template(36,Hn,1,1,"ng-template",null,6,d.\u0275\u0275templateRefExtractor),d.\u0275\u0275elementEnd(),d.\u0275\u0275template(38,Le,4,2,"div",39)(39,Vn,3,0,"div",39)(40,Sn,3,0,"div",39),d.\u0275\u0275elementStart(41,"cd-form-button-panel",44),d.\u0275\u0275pipe(42,"titlecase"),d.\u0275\u0275pipe(43,"upperFirst"),d.\u0275\u0275listener("submitActionEvent",function(){d.\u0275\u0275restoreView(ee);const ne=d.\u0275\u0275nextContext();return d.\u0275\u0275resetView(ne.submit())}),d.\u0275\u0275elementEnd()(),d.\u0275\u0275elementContainerEnd()}if(2&le){const ee=d.\u0275\u0275reference(13),$=d.\u0275\u0275reference(20),ne=d.\u0275\u0275reference(26),b=d.\u0275\u0275reference(37),U=d.\u0275\u0275nextContext();d.\u0275\u0275advance(),d.\u0275\u0275property("formGroup",U.userForm),d.\u0275\u0275advance(6),d.\u0275\u0275i18nExp(d.\u0275\u0275pipeBind1(6,19,U.action))(d.\u0275\u0275pipeBind1(7,21,U.resource)),d.\u0275\u0275i18nApply(5),d.\u0275\u0275advance(2),d.\u0275\u0275property("invalid",!U.userForm.controls.username.valid&&U.userForm.controls.username.dirty)("invalidText",ee),d.\u0275\u0275advance(2),d.\u0275\u0275property("invalid",!U.userForm.controls.username.valid&&U.userForm.controls.username.dirty),d.\u0275\u0275advance(4),d.\u0275\u0275property("invalid",!U.userForm.controls.password.valid&&U.userForm.controls.password.dirty)("invalidText",$),d.\u0275\u0275advance(2),d.\u0275\u0275property("ngIf",U.passwordPolicyHelpText.length>0),d.\u0275\u0275advance(5),d.\u0275\u0275property("invalid",!U.userForm.controls.confirmpassword.valid&&U.userForm.controls.confirmpassword.dirty)("invalidText",ne),d.\u0275\u0275advance(5),d.\u0275\u0275property("ngIf",!U.authStorageService.isSSO()),d.\u0275\u0275advance(6),d.\u0275\u0275property("invalid",!U.userForm.controls.email.valid&&U.userForm.controls.email.dirty)("invalidText",b),d.\u0275\u0275advance(5),d.\u0275\u0275property("ngIf",U.allRoles),d.\u0275\u0275advance(),d.\u0275\u0275property("ngIf",!U.isCurrentUser()),d.\u0275\u0275advance(),d.\u0275\u0275property("ngIf",!U.isCurrentUser()&&!U.authStorageService.isSSO()),d.\u0275\u0275advance(),d.\u0275\u0275property("form",U.userForm)("submitText",d.\u0275\u0275pipeBind1(42,23,U.action)+" "+d.\u0275\u0275pipeBind1(43,25,U.resource))}}function Qt(le,ke){1&le&&(d.\u0275\u0275elementStart(0,"p")(1,"strong"),d.\u0275\u0275i18n(2,24),d.\u0275\u0275elementEnd()(),d.\u0275\u0275element(3,"br"),d.\u0275\u0275elementStart(4,"p"),d.\u0275\u0275i18n(5,25),d.\u0275\u0275elementEnd(),d.\u0275\u0275elementContainerStart(6),d.\u0275\u0275i18n(7,26),d.\u0275\u0275elementContainerEnd())}function ge(le,ke){if(1&le&&d.\u0275\u0275element(0,"cd-date-time-picker",57),2&le){const ee=d.\u0275\u0275nextContext();d.\u0275\u0275property("control",ee.userForm.get("pwdExpirationDate"))("hasTime",!1)}}let Ht=(()=>{class le extends I.g{constructor(ee,$,ne,b,U,z,se,$e,Me,Ze,k,Ee){super(),this.authService=ee,this.authStorageService=$,this.route=ne,this.router=b,this.modalService=U,this.roleService=z,this.userService=se,this.notificationService=$e,this.actionLabels=Me,this.passwordPolicyService=Ze,this.formBuilder=k,this.settingsService=Ee,this.userFormMode=dt,this.messages=new Tt.z({empty:$localize`There are no roles.`}),this.passwordPolicyHelpText="",this.icons=ce.FI,this.pwdExpirationFormat="YYYY-MM-DD",this.passwordexp=!1,this.resource=$localize`user`,this.createForm(),this.messages=new Tt.z({empty:$localize`There are no roles.`})}createForm(){this.passwordPolicyService.getHelpText().subscribe(ee=>{this.passwordPolicyHelpText=ee}),this.userForm=this.formBuilder.group({username:["",[e.Validators.required],[f.xQ.unique(this.userService.validateUserName,this.userService)]],name:[""],password:["",[],[f.xQ.passwordPolicy(this.userService,()=>this.userForm.getValue("username"),(ee,$,ne)=>{this.passwordStrengthLevelClass=this.passwordPolicyService.mapCreditsToCssClass($),this.passwordValuation=Et().defaultTo(ne,"")})]],confirmpassword:[""],pwdExpirationDate:[""],email:["",[f.xQ.email]],roles:[[]],enabled:[!0,[e.Validators.required]],pwdUpdateRequired:[!0]},{validators:[f.xQ.match("password","confirmpassword")]})}ngOnInit(){this.router.url.startsWith("/user-management/users/edit")?(this.mode=this.userFormMode.editing,this.action=this.actionLabels.EDIT,this.passwordexp=!1):(this.action=this.actionLabels.CREATE,this.passwordexp=!0);const ee=[this.roleService.list(),this.settingsService.getStandardSettings()];(0,v.forkJoin)(ee).subscribe($=>{if(this.allRoles=Et().map($[0],ne=>(ne.enabled=!0,ne.content=`${ne.name}, ${ne.description}`,ne)),this.pwdExpirationSettings=new it.b($[1]),this.mode===this.userFormMode.editing)this.initEdit();else{if(this.pwdExpirationSettings.pwdExpirationSpan>0){const ne=this.userForm.get("pwdExpirationDate"),b=wt()();b.add(this.pwdExpirationSettings.pwdExpirationSpan,"day"),ne.setValue(b.format(this.pwdExpirationFormat)),ne.setValidators([e.Validators.required])}this.loadingReady()}})}initEdit(){this.disableForEdit(),this.route.params.subscribe(ee=>{this.userService.get(ee.username).subscribe(ne=>{this.response=Et().cloneDeep(ne),this.setResponse(ne),this.loadingReady()})})}disableForEdit(){this.userForm.get("username").disable()}setResponse(ee){["username","name","email","roles","enabled","pwdUpdateRequired"].forEach(ne=>this.userForm.get(ne).setValue(ee[ne]));const $=ee.pwdExpirationDate;$?(this.passwordexp=!1,this.userForm.get("pwdExpirationDate").setValue(wt()(1e3*$).format(this.pwdExpirationFormat))):this.passwordexp=!0}getRequest(){const ee=new Ct;["username","password","name","email","roles","enabled","pwdUpdateRequired"].forEach(ne=>{ee[ne]=this.userForm.get(ne).value});const $=this.userForm.get("pwdExpirationDate").value;if($){this.passwordexp=!1;const ne=wt()($,this.pwdExpirationFormat);(this.mode!==this.userFormMode.editing||this.response.pwdExpirationDate!==ne.unix())&&ne.set({hour:23,minute:59,second:59}),ee.pwdExpirationDate=ne.unix()}return ee}createAction(){const ee=this.getRequest();this.userService.create(ee).subscribe(()=>{this.notificationService.show(M._.success,$localize`Created user '${ee.username}'`),this.router.navigate(["/user-management/users"])},()=>{this.userForm.setErrors({cdSubmitButton:!0})})}editAction(){if(this.isUserRemovingNeededRolePermissions()){const ee={titleText:$localize`Update user`,buttonText:$localize`Continue`,bodyTpl:this.removeSelfUserReadUpdatePermissionTpl,onSubmit:()=>{this.modalRef.close(),this.doEditAction()},onCancel:()=>{this.userForm.setErrors({cdSubmitButton:!0}),this.userForm.get("roles").reset(this.userForm.get("roles").value)}};this.modalRef=this.modalService.show(jt.M,ee)}else this.doEditAction()}isCurrentUser(){return this.authStorageService.getUsername()===this.userForm.getValue("username")}isUserChangingRoles(){return this.isCurrentUser()&&this.response&&!Et().isEqual(this.response.roles,this.userForm.getValue("roles"))}isUserRemovingNeededRolePermissions(){return this.isCurrentUser()&&!this.hasUserReadUpdatePermissions(this.userForm.getValue("roles"))}hasUserReadUpdatePermissions(ee=[]){for(const $ of this.allRoles)if(-1!==ee.indexOf($.name)&&$.scopes_permissions.user){const ne=$.scopes_permissions.user;return["read","update"].every(b=>-1!==ne.indexOf(b))}return!1}doEditAction(){const ee=this.getRequest();this.userService.update(ee).subscribe(()=>{this.isUserChangingRoles()?this.authService.logout(()=>{this.notificationService.show(M._.info,$localize`You were automatically logged out because your roles have been changed.`)}):(this.notificationService.show(M._.success,$localize`Updated user '${ee.username}'`),this.router.navigate(["/user-management/users"]))},()=>{this.userForm.setErrors({cdSubmitButton:!0})})}clearExpirationDate(){this.userForm.get("pwdExpirationDate").setValue(void 0)}submit(){this.mode===this.userFormMode.editing?this.editAction():this.createAction()}static{this.\u0275fac=function($){return new($||le)(d.\u0275\u0275directiveInject(zt.u),d.\u0275\u0275directiveInject(Se.v),d.\u0275\u0275directiveInject(l.ActivatedRoute),d.\u0275\u0275directiveInject(l.Router),d.\u0275\u0275directiveInject(Ge.V),d.\u0275\u0275directiveInject(u),d.\u0275\u0275directiveInject(kt.D),d.\u0275\u0275directiveInject(g.J),d.\u0275\u0275directiveInject(S.Ss),d.\u0275\u0275directiveInject(Ke.$),d.\u0275\u0275directiveInject(gt.$),d.\u0275\u0275directiveInject(Xt.h))}}static{this.\u0275cmp=d.\u0275\u0275defineComponent({type:le,selectors:[["cd-user-form"]],viewQuery:function($,ne){if(1&$&&d.\u0275\u0275viewQuery(mt,7),2&$){let b;d.\u0275\u0275queryRefresh(b=d.\u0275\u0275loadQuery())&&(ne.removeSelfUserReadUpdatePermissionTpl=b.first)}},features:[d.\u0275\u0275InheritDefinitionFeature],decls:6,vars:3,consts:()=>{let ee,$,ne,b,U,z,se,$e,Me,Ze,k,Ee,G,j,Ce,xe,nt,at,St,vt,Mt,Fe,Zt;return ee=$localize`:␟d0f98417d1898a07710481ed5757bd2f6086fcce␟3658527748062757833:Username...`,$=$localize`:␟84a641424aae2a309955100886dd7c25c8dadd9a␟2428983624665954611:White spaces at the beginning and end will be trimmed`,ne=$localize`:form title␟a90ab37a86361510c6418a0b01e5fb53b18aad60␟4895964714444299563:${"\ufffd0\ufffd"}:INTERPOLATION: ${"\ufffd1\ufffd"}:INTERPOLATION_1: `,b=$localize`:␟9b81d1565fc336c421fb6d21007dea69c0c80e73␟5802190649108961439:Username ${"\ufffd#11\ufffd\ufffd/#11\ufffd"}:TAG_INPUT:`,U=$localize`:␟f7e5808684efb62214206987dc1f013c04dd1cec␟9064418299331996881:Password ${"\ufffd*17:1\ufffd\ufffd#1:1\ufffd"}:START_TAG_CD_HELPER:${"\ufffd/#1:1\ufffd\ufffd/*17:1\ufffd"}:CLOSE_TAG_CD_HELPER:${"\ufffd#18\ufffd\ufffd/#18\ufffd"}:TAG_INPUT:`,z=$localize`:␟b2ca45e9166224e612c8675c26c8daba9e527d82␟5155653498633865445: Confirm password ${"\ufffd#24\ufffd\ufffd/#24\ufffd"}:TAG_INPUT:`,se=$localize`:␟ec84ec8c5cb1a4abcefc9178e646b1250b6c725a␟381318831057620751: Full Name ${"\ufffd#31\ufffd\ufffd/#31\ufffd"}:TAG_INPUT:`,$e=$localize`:␟9973063d37883da0a3d09a3fe1529b87acadc2b9␟5941153537997503770: Email ${"\ufffd#35\ufffd\ufffd/#35\ufffd"}:TAG_INPUT:`,Me=$localize`:␟2baaf26de6d89a49e51aa5322a3806eec4d3c974␟4348162663561516656: This field is required. `,Ze=$localize`:␟801b64959505a411efe743a0ef42ad9089990ec0␟6676953324371627613: The username already exists. `,k=$localize`:␟7c76f7634857dc8d8e3cfa4d3b80b3d9ef7b6472␟8064620653299814233:Password confirmation doesn't match the password. `,Ee=$localize`:␟7cbdabcece469fab89cfa687ab152bca18b97498␟1417693714872528491:This field is required.`,G=$localize`:␟cbb979e63ba50e0ca3adfa09cbdcaefd0853fca1␟5208015151248745883:Password confirmation doesn't match the password.`,j=$localize`:␟7cbdabcece469fab89cfa687ab152bca18b97498␟1417693714872528491:This field is required.`,Ce=$localize`:␟bd48784de86aedc1d532eebf256712fbaad637b9␟6458079475653544585:This field is required. `,xe=$localize`:␟c522f4284a892ad5ccf31a4d5cfe4b79d5f64f97␟7949963887964877562:Invalid email. `,nt=$localize`:␟8f832e33562e2225e53a2d2db9afc0c430a6eba5␟8987328793693830726:Select Roles...`,at=$localize`:␟12f37de6622cf2e15ac960f3dd14502e8581733a␟2425863206688252134:${"\ufffd#3\ufffd"}:START_TAG_CDS_DROPDOWN_LIST:${"\ufffd/#3\ufffd"}:CLOSE_TAG_CDS_DROPDOWN_LIST:`,St=$localize`:␟c5b7de02720303d51b53e52b5fc49d2633d00058␟2310793936528648555:Enabled `,vt=$localize`:␟8a006436f574a251e691a60814327ae4af2107ff␟5892191717737504117:User must change password at next login `,Mt=$localize`:␟0051a3479d3ba79135c16dc8cc017950a2cce821␟2742479296280482153:You are about to remove "user read / update" permissions from your own user.`,Fe=$localize`:␟af4bf9fcb256853f14cf947eb1deb8d7f176d3f9␟4606622605316013506:If you continue, you will no longer be able to add or remove roles from any user.`,Zt=$localize`:␟7d1dcf2a9146caac0581329acf94806ec69a89a5␟1877522221356492058:Are you sure you want to continue?`,[["removeSelfUserReadUpdatePermissionTpl",""],["popContent",""],["frm","ngForm","formDir","ngForm"],["usernameError",""],["passwordError",""],["confirmpasswordError",""],["emailError",""],ne,b,U,z,se,$e,Me,Ze,k,Ee,G,j,Ce,xe,at,St,vt,Mt,Fe,Zt,["cdsCol","",3,"columnNumbers"],[4,"cdFormLoading"],["novalidate","",3,"formGroup"],[1,"form-header"],[1,"form-item"],["labelInputID","username","cdRequiredField","Username",3,"invalid","invalidText"],["cdsText","","placeholder",ee,"id","username","formControlName","username","autofocus","","ngbTooltip",$,"cdTrim","",3,"invalid"],["labelInputID","password","label","Password...",3,"invalid","invalidText"],["class","text-pre-wrap",3,"html",4,"ngIf"],["cdsPassword","","type","password","placeholder","Password...","id","password","autocomplete","new-password","formControlName","password"],["labelInputID","confirmpassword","label","Confirm password...",3,"invalid","invalidText"],["cdsPassword","","type","password","placeholder","Confirm password...","id","confirmpassword","formControlName","confirmpassword"],["class","form-item",4,"ngIf"],["for","name"],["cdsText","","type","text","placeholder","Full Name...","id","name","formControlName","name"],["for","email",3,"invalid","invalidText"],["cdsText","","type","email","placeholder","Email...","id","email","formControlName","email"],["wrappingClass","text-right",3,"submitActionEvent","form","submitText"],[4,"ngIf"],[1,"text-pre-wrap",3,"html"],["class","invalid-feedback",4,"ngIf"],[1,"invalid-feedback"],[3,"ngClass"],["class","text-pre-wrap",4,"ngIf"],["placeHolder","Password expiration date",3,"control","hasTime","defaultDate"],[1,"text-pre-wrap"],["routerLink","/mgr-modules/edit/dashboard",1,"alert-link"],["label","Roles","type","multi","selectionFeedback","top-after-reopen","for","roles","formControlName","roles","id","roles","placeholder",nt,"itemValueKey","name",3,"appendInline","items"],["id","enabled","formControlName","enabled","name","enabled"],["id","pwdUpdateRequired","formControlName","pwdUpdateRequired","name","pwdUpdateRequired"],[3,"control","hasTime"]]},template:function($,ne){1&$&&(d.\u0275\u0275elementStart(0,"div",27),d.\u0275\u0275template(1,un,44,27,"ng-container",28),d.\u0275\u0275elementEnd(),d.\u0275\u0275template(2,Qt,8,0,"ng-template",null,0,d.\u0275\u0275templateRefExtractor)(4,ge,1,2,"ng-template",null,1,d.\u0275\u0275templateRefExtractor)),2&$&&(d.\u0275\u0275property("columnNumbers",d.\u0275\u0275pureFunction0(2,Gt)),d.\u0275\u0275advance(),d.\u0275\u0275property("cdFormLoading",ne.loading))},dependencies:[a.NgClass,a.NgIf,e.\u0275NgNoValidate,e.DefaultValueAccessor,e.NgControlStatus,e.NgControlStatusGroup,e.FormGroupDirective,e.FormControlName,Wt.m,en.P,_.e,w.B,yt.c,ie.G,Y.S,V.E,L.P,Q.TextInputLabelComponent,Q.PasswordInputLabelComponent,Q.TextInput,Q.PasswordInput,Q.ColumnDirective,Q.Checkbox,l.RouterLink,h.NgbTooltip,Q.ComboBox,Q.DropdownList,a.TitleCasePipe,me.r]})}}return le})();var Bn=s(22453),zn=s(71138),Mn=s(64346);const Xn=["userRolesTpl"],kn=["warningTpl"],jn=["durationTpl"];function Wn(le,ke){if(1&le&&(d.\u0275\u0275elementStart(0,"span"),d.\u0275\u0275text(1),d.\u0275\u0275elementEnd()),2&le){const ee=ke.$implicit,$=ke.last;d.\u0275\u0275advance(),d.\u0275\u0275textInterpolate2(" ",ee,"",$?"":", "," ")}}function so(le,ke){1&le&&d.\u0275\u0275template(0,Wn,2,2,"span",5),2&le&&d.\u0275\u0275property("ngForOf",ke.data.value)}function Kn(le,ke){if(1&le&&(d.\u0275\u0275elementStart(0,"div",6)(1,"div",7),d.\u0275\u0275text(2),d.\u0275\u0275elementEnd()()),2&le){const ee=ke.data.value,$=ke.data.row,ne=d.\u0275\u0275nextContext();d.\u0275\u0275classProp("border-danger",$.remainingDays<ne.expirationDangerAlert)("border-warning",$.remainingDays<ne.expirationWarningAlert&&$.remainingDays>=ne.expirationDangerAlert),d.\u0275\u0275advance(2),d.\u0275\u0275textInterpolate1(" ",ee," ")}}function Yt(le,ke){if(1&le&&d.\u0275\u0275element(0,"i",10),2&le){const ee=d.\u0275\u0275nextContext().data.row,$=d.\u0275\u0275nextContext();d.\u0275\u0275classMap($.icons.warning),d.\u0275\u0275classProp("icon-danger-color",ee.remainingDays<$.expirationDangerAlert)("icon-warning-color",ee.remainingDays<$.expirationWarningAlert&&ee.remainingDays>=$.expirationDangerAlert)}}function hn(le,ke){if(1&le&&(d.\u0275\u0275template(0,Yt,1,7,"i",8),d.\u0275\u0275elementStart(1,"span",9),d.\u0275\u0275pipe(2,"cdDate"),d.\u0275\u0275text(3),d.\u0275\u0275pipe(4,"duration"),d.\u0275\u0275elementEnd()),2&le){const ee=ke.data.value,$=ke.data.row,ne=d.\u0275\u0275nextContext();d.\u0275\u0275property("ngIf",$.remainingDays<ne.expirationWarningAlert),d.\u0275\u0275advance(),d.\u0275\u0275propertyInterpolate("title",d.\u0275\u0275pipeBind1(2,3,ee)),d.\u0275\u0275advance(2),d.\u0275\u0275textInterpolate(d.\u0275\u0275pipeBind1(4,5,$.remainingTimeWithoutSeconds/1e3))}}let Jt=(()=>{class le{constructor(ee,$,ne,b,U,z,se,$e){this.userService=ee,this.emptyPipe=$,this.modalService=ne,this.notificationService=b,this.authStorageService=U,this.urlBuilder=z,this.settingsService=se,this.actionLabels=$e,this.selection=new fe.y,this.icons=ce.FI,this.permission=this.authStorageService.getPermissions().user,this.tableActions=[{permission:"create",icon:ce.FI.add,routerLink:()=>this.urlBuilder.getCreate(),name:this.actionLabels.CREATE},{permission:"update",icon:ce.FI.edit,routerLink:()=>this.selection.first()&&this.urlBuilder.getEdit(this.selection.first().username),name:this.actionLabels.EDIT},{permission:"delete",icon:ce.FI.destroy,click:()=>this.deleteUserModal(),name:this.actionLabels.DELETE}]}ngOnInit(){this.columns=[{name:$localize`Username`,prop:"username",flexGrow:1,cellTemplate:this.warningTpl},{name:$localize`Name`,prop:"name",flexGrow:1,pipe:this.emptyPipe},{name:$localize`Email`,prop:"email",flexGrow:1,pipe:this.emptyPipe},{name:$localize`Roles`,prop:"roles",flexGrow:1,cellTemplate:this.userRolesTpl},{name:$localize`Enabled`,prop:"enabled",flexGrow:1,cellTransformation:K.x.checkIcon},{name:$localize`Password expires`,prop:"pwdExpirationDate",flexGrow:1,cellTemplate:this.durationTpl}],this.settingsService.getValues(["USER_PWD_EXPIRATION_WARNING_1","USER_PWD_EXPIRATION_WARNING_2"]).subscribe($=>{this.expirationWarningAlert=$.USER_PWD_EXPIRATION_WARNING_1,this.expirationDangerAlert=$.USER_PWD_EXPIRATION_WARNING_2})}getUsers(){this.userService.list().subscribe(ee=>{ee.forEach($=>{$.remainingTimeWithoutSeconds=0,$.pwdExpirationDate&&$.pwdExpirationDate>0&&($.pwdExpirationDate=1e3*$.pwdExpirationDate,$.remainingTimeWithoutSeconds=this.getRemainingTimeWithoutSeconds($.pwdExpirationDate),$.remainingDays=this.getRemainingDays($.pwdExpirationDate))}),this.users=ee})}updateSelection(ee){this.selection=ee}deleteUser(ee){this.userService.delete(ee).subscribe(()=>{this.getUsers(),this.modalService.dismissAll(),this.notificationService.show(M._.success,$localize`Deleted user '${ee}'`)},()=>{this.modalRef.componentInstance.stopLoadingSpinner()})}deleteUserModal(){const ee=this.authStorageService.getUsername(),$=this.selection.first().username;ee!==$?this.modalRef=this.modalService.show(ue.D,{impact:Bn.r.high,itemDescription:"User",itemNames:[$],submitAction:()=>this.deleteUser($)}):this.notificationService.show(M._.error,$localize`Failed to delete user '${$}'`,$localize`You are currently logged in as '${$}'.`)}getWarningIconClass(ee){return null===ee||this.expirationWarningAlert>10?"":this.getRemainingDays(ee)<=this.expirationDangerAlert?"icon-danger-color":"icon-warning-color"}getWarningClass(ee){return null===ee||this.expirationWarningAlert>10?"":this.getRemainingDays(ee)<=this.expirationDangerAlert?"border-danger":"border-warning"}getRemainingDays(ee){if(void 0!==ee&&null!=ee)return ee<0?0:Math.max(0,Math.floor(this.getRemainingTime(ee)/864e5))}getRemainingTimeWithoutSeconds(ee){const $=this.getRemainingTime(ee);return 60*Math.floor($/6e4)*1e3}getRemainingTime(ee){return ee-Date.now()}static{this.\u0275fac=function($){return new($||le)(d.\u0275\u0275directiveInject(kt.D),d.\u0275\u0275directiveInject(Te.y),d.\u0275\u0275directiveInject(Ge.V),d.\u0275\u0275directiveInject(g.J),d.\u0275\u0275directiveInject(Se.v),d.\u0275\u0275directiveInject(Ye.E),d.\u0275\u0275directiveInject(Xt.h),d.\u0275\u0275directiveInject(S.Ss))}}static{this.\u0275cmp=d.\u0275\u0275defineComponent({type:le,selectors:[["cd-user-list"]],viewQuery:function($,ne){if(1&$&&(d.\u0275\u0275viewQuery(Xn,7),d.\u0275\u0275viewQuery(kn,7),d.\u0275\u0275viewQuery(jn,7)),2&$){let b;d.\u0275\u0275queryRefresh(b=d.\u0275\u0275loadQuery())&&(ne.userRolesTpl=b.first),d.\u0275\u0275queryRefresh(b=d.\u0275\u0275loadQuery())&&(ne.warningTpl=b.first),d.\u0275\u0275queryRefresh(b=d.\u0275\u0275loadQuery())&&(ne.durationTpl=b.first)}},features:[d.\u0275\u0275ProvidersFeature([{provide:Ye.E,useValue:new Ye.E("user-management/users")}])],decls:9,vars:5,consts:()=>{let ee;return ee=$localize`:␟94f5ab81f04c2db36f5a37ec83693b1d47e2c8aa␟8478245417476296973:User's password is about to expire`,[["userRolesTpl",""],["warningTpl",""],["durationTpl",""],["columnMode","flex","identifier","username","selectionType","single",3,"fetchData","updateSelection","data","columns"],[1,"table-actions",3,"permission","selection","tableActions"],[4,"ngFor","ngForOf"],[1,"border-margin"],[1,"warning-content"],["title",ee,3,"icon-danger-color","icon-warning-color","class",4,"ngIf"],[3,"title"],["title",ee]]},template:function($,ne){if(1&$){const b=d.\u0275\u0275getCurrentView();d.\u0275\u0275element(0,"cd-user-tabs"),d.\u0275\u0275elementStart(1,"cd-table",3),d.\u0275\u0275listener("fetchData",function(){return d.\u0275\u0275restoreView(b),d.\u0275\u0275resetView(ne.getUsers())})("updateSelection",function(z){return d.\u0275\u0275restoreView(b),d.\u0275\u0275resetView(ne.updateSelection(z))}),d.\u0275\u0275element(2,"cd-table-actions",4),d.\u0275\u0275elementEnd(),d.\u0275\u0275template(3,so,1,1,"ng-template",null,0,d.\u0275\u0275templateRefExtractor)(5,Kn,3,5,"ng-template",null,1,d.\u0275\u0275templateRefExtractor)(7,hn,5,7,"ng-template",null,2,d.\u0275\u0275templateRefExtractor)}2&$&&(d.\u0275\u0275advance(),d.\u0275\u0275property("data",ne.users)("columns",ne.columns),d.\u0275\u0275advance(),d.\u0275\u0275property("permission",ne.permission)("selection",ne.selection)("tableActions",ne.tableActions))},dependencies:[a.NgForOf,a.NgIf,ct.O,rt.j,je,zn.Q,Mn.b],styles:[".border-margin[_ngcontent-%COMP%]{border-left:3px solid transparent;height:calc(100% + 10px);margin-bottom:-5px;margin-left:-5px;margin-top:-5px}.warning-content[_ngcontent-%COMP%]{height:100%;padding-bottom:5px;padding-left:5px;padding-top:5px}"]})}}return le})();var Rn=s(97367),On=s(99062),Qn={elem:"svg",attrs:{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 32",fill:"currentColor",width:32,height:32},content:[{elem:"path",attrs:{d:"M16,2A14.1725,14.1725,0,0,0,2,16,14.1725,14.1725,0,0,0,16,30,14.1725,14.1725,0,0,0,30,16,14.1725,14.1725,0,0,0,16,2Zm8,15H17v7H15V17H8V15h7V8h2v7h7Z"}},{elem:"path",attrs:{fill:"none",d:"M24 17L17 17 17 24 15 24 15 17 8 17 8 15 15 15 15 8 17 8 17 15 24 15 24 17z","data-icon-path":"inner-path"}}],name:"add--filled",size:32},Yn=s(63566),Jn=s(88263),Zn=s(64441);let Pn=(()=>{class le{constructor(ee){this.iconService=ee,this.iconService.registerAll([Rn.A,On.A,Qn,Yn.A,Jn.A,Zn.A])}static{this.\u0275fac=function($){return new($||le)(d.\u0275\u0275inject(Q.IconService))}}static{this.\u0275mod=d.\u0275\u0275defineNgModule({type:le})}static{this.\u0275inj=d.\u0275\u0275defineInjector({imports:[a.CommonModule,e.FormsModule,e.ReactiveFormsModule,m.G,Q.UIShellModule,Q.InputModule,Q.GridModule,Q.ButtonModule,Q.IconModule,Q.CheckboxModule,Q.RadioModule,Q.SelectModule,Q.NumberModule,Q.ModalModule,Q.DatePickerModule,Q.TimePickerModule,h.NgbNavModule,h.NgbPopoverModule,R.Y,l.RouterModule,h.NgbModule,Q.IconModule,Q.GridModule,Q.InputModule,Q.ComboBoxModule]})}}return le})();const qn=[{path:"",redirectTo:"users",pathMatch:"full"},{path:"users",data:{breadcrumbs:"Users"},children:[{path:"",component:Jt},{path:S.Qp.CREATE,component:Ht,data:{breadcrumbs:S.yY.CREATE}},{path:`${S.Qp.EDIT}/:username`,component:Ht,data:{breadcrumbs:S.yY.EDIT}}]},{path:"roles",data:{breadcrumbs:"Roles"},children:[{path:"",component:Ft},{path:S.Qp.CREATE,component:oe,data:{breadcrumbs:S.yY.CREATE}},{path:`${S.Qp.EDIT}/:name`,component:oe,data:{breadcrumbs:S.yY.EDIT}}]}];let eo=(()=>{class le{static{this.\u0275fac=function($){return new($||le)}}static{this.\u0275mod=d.\u0275\u0275defineNgModule({type:le})}static{this.\u0275inj=d.\u0275\u0275defineInjector({imports:[Pn,l.RouterModule.forChild(qn)]})}}return le})()},5155:(q,y,s)=>{s.d(y,{DA:()=>R,YW:()=>l,jq:()=>e});var a=s(46045);class e extends Error{}class l extends e{constructor(){super(...arguments),this.header=$localize`Page Not Found`,this.message=$localize`Sorry, we couldn’t find what you were looking for.
  The page you requested may have been changed or moved.`,this.icon=a.FI.warning}}class R extends e{constructor(){super(...arguments),this.header=$localize`User Denied`,this.message=$localize`Sorry, the user does not exist in Ceph.
  You'll be logged out from the Identity Provider when you retry logging in.`,this.icon=a.FI.warning}}},83133:(q,y,s)=>{s.d(y,{O:()=>a});class a{getVersionHeaderValue(l,h){return`application/vnd.ceph.api.v${l}.${h}+json`}}},42902:(q,y,s)=>{s.d(y,{u:()=>u});var a=s(36618),l=s(76218),R=s(29841),m=s(50619),E=s(82254),C=s(87536);let u=(()=>{class N{constructor(I,O,f,g){this.authStorageService=I,this.http=O,this.router=f,this.route=g}check(I){return this.http.post("api/auth/check",{token:I})}login(I){return this.http.post("api/auth",I).pipe((0,m.tap)(O=>{this.authStorageService.set(O.username,O.permissions,O.sso,O.pwdExpirationDate,O.pwdUpdateRequired)}))}logout(I=null){return this.http.post("api/auth/logout",null).subscribe(O=>{if(this.authStorageService.remove(),"oauth2"==O.protocol)return window.location.replace(O.redirect_url);const f=R.get(this.route.snapshot.queryParams,"returnUrl","/login");this.router.navigate([f],{skipLocationChange:!0}),I&&I(),window.location.replace(O.redirect_url)})}static{this.\u0275fac=function(O){return new(O||N)(C.\u0275\u0275inject(E.v),C.\u0275\u0275inject(a.HttpClient),C.\u0275\u0275inject(l.Router),C.\u0275\u0275inject(l.ActivatedRoute))}}static{this.\u0275prov=C.\u0275\u0275defineInjectable({token:N,factory:N.\u0275fac,providedIn:"root"})}}return N})()},28886:(q,y,s)=>{s.d(y,{t:()=>m});var a=s(36618),l=s(83133),h=s(92319),R=s(87536);let m=(()=>{class v extends l.O{constructor(C){super(),this.http=C,this.url="api/service"}list(C,d){const u={headers:{Accept:this.getVersionHeaderValue(2,0)},params:C,observe:"response"};return d&&(u.params=u.params.append("service_name",d)),new h.z(this.http.get(this.url,u))}getDaemons(C){return this.http.get(`${this.url}/${C}/daemons`)}create(C){return this.http.post(this.url,{service_name:C.service_id?`${C.service_type}.${C.service_id}`:C.service_type,service_spec:C},{observe:"response"})}update(C){const d=C.service_id?`${C.service_type}.${C.service_id}`:C.service_type;return this.http.put(`${this.url}/${d}`,{service_name:d,service_spec:C},{observe:"response"})}delete(C){return this.http.delete(`${this.url}/${C}`,{observe:"response"})}getKnownTypes(){return this.http.get(`${this.url}/known_types`)}static{this.\u0275fac=function(d){return new(d||v)(R.\u0275\u0275inject(a.HttpClient))}}static{this.\u0275prov=R.\u0275\u0275defineInjectable({token:v,factory:v.\u0275fac,providedIn:"root"})}}return v})()},67588:(q,y,s)=>{s.d(y,{W:()=>d});var a=s(36618),l=s(95631),R=s(29841),S=s.n(R),m=s(50619),E=s(87536);let d=(()=>{class u{constructor(M){this.http=M,this.baseURL="api/cephfs/subvolume/group"}get(M,I=!0){return this.http.get(`${this.baseURL}/${M}`,{params:{info:I}})}create(M,I,O,f,g,P,A){return this.http.post(this.baseURL,{vol_name:M,group_name:I,pool_layout:O,size:f,uid:g,gid:P,mode:A},{observe:"response"})}info(M,I){return this.http.get(`${this.baseURL}/${M}/info`,{params:{group_name:I}})}exists(M,I){return this.info(I,M).pipe((0,m.mapTo)(!0),(0,m.catchError)(O=>(S().isFunction(O.preventDefault)&&O.preventDefault(),(0,l.of)(!1))))}update(M,I,O){return this.http.put(`${this.baseURL}/${M}`,{group_name:I,size:O})}remove(M,I){return this.http.delete(`${this.baseURL}/${M}`,{params:{group_name:I},observe:"response"})}static{this.\u0275fac=function(I){return new(I||u)(E.\u0275\u0275inject(a.HttpClient))}}static{this.\u0275prov=E.\u0275\u0275defineInjectable({token:u,factory:u.\u0275fac,providedIn:"root"})}}return u})()},57798:(q,y,s)=>{s.d(y,{v:()=>d});var a=s(36618),l=s(95631),R=s(50619),m=s(29841),v=s.n(m),E=s(87536);let d=(()=>{class u{constructor(M){this.http=M,this.baseURL="api/cephfs/subvolume"}get(M,I="",O=!0){return this.http.get(`${this.baseURL}/${M}`,{params:{group_name:I,info:O}})}create(M,I,O,f,g,P,A,_,B){return this.http.post(this.baseURL,{vol_name:M,subvol_name:I,group_name:O,pool_layout:f,size:g,uid:P,gid:A,mode:_,namespace_isolated:B},{observe:"response"})}info(M,I,O=""){return this.http.get(`${this.baseURL}/${M}/info`,{params:{subvol_name:I,group_name:O}})}remove(M,I,O="",f=!1){return this.http.delete(`${this.baseURL}/${M}`,{params:{subvol_name:I,group_name:O,retain_snapshots:f},observe:"response"})}exists(M,I,O=""){return this.info(I,M,O).pipe((0,R.mapTo)(!0),(0,R.catchError)(f=>(v().isFunction(f.preventDefault)&&f.preventDefault(),(0,l.of)(!1))))}existsInFs(M,I=""){return this.http.get(`${this.baseURL}/${M}/exists`,{params:{group_name:I}})}update(M,I,O,f=""){return this.http.put(`${this.baseURL}/${M}`,{subvol_name:I,size:O,group_name:f})}getSnapshots(M,I,O=""){return this.http.get(`${this.baseURL}/snapshot/${M}/${I}`,{params:{group_name:O}})}getSnapshotInfo(M,I,O,f=""){return this.http.get(`${this.baseURL}/snapshot/${I}/${O}/info`,{params:{snap_name:M,group_name:f}})}snapshotExists(M,I,O,f=""){return this.getSnapshotInfo(M,I,O,f).pipe((0,R.mapTo)(!0),(0,R.catchError)(g=>(v().isFunction(g.preventDefault)&&g.preventDefault(),(0,l.of)(!1))))}createSnapshot(M,I,O,f=""){return this.http.post(`${this.baseURL}/snapshot/`,{vol_name:M,subvol_name:O,snap_name:I,group_name:f},{observe:"response"})}deleteSnapshot(M,I,O,f=""){return this.http.delete(`${this.baseURL}/snapshot/${M}/${I}`,{params:{snap_name:O,group_name:f},observe:"response"})}createSnapshotClone(M,I,O,f,g="",P=""){return this.http.post(`${this.baseURL}/snapshot/clone`,{vol_name:M,subvol_name:I,snap_name:O,clone_name:f,group_name:g,target_group_name:P},{observe:"response"})}static{this.\u0275fac=function(I){return new(I||u)(E.\u0275\u0275inject(a.HttpClient))}}static{this.\u0275prov=E.\u0275\u0275defineInjectable({token:u,factory:u.\u0275fac,providedIn:"root"})}}return u})()},10978:(q,y,s)=>{s.d(y,{s:()=>R});var a=s(36618),l=s(87536);let R=(()=>{class S{constructor(v){this.http=v}findValue(v,E){if(v.value)return v.value.find(C=>C.section===E)}getValue(v,E){let C=this.findValue(v,E);if(!C){const d=E.indexOf(".");-1!==d&&(C=this.findValue(v,E.substring(0,d)))}return C||(C=this.findValue(v,"global")),C?C.value:v.default}getConfigData(){return this.http.get("api/cluster_conf/")}get(v){return this.http.get(`api/cluster_conf/${v}`)}filter(v){return this.http.get(`api/cluster_conf/filter?names=${v.join(",")}`)}create(v){return this.http.post("api/cluster_conf/",v)}delete(v,E){return this.http.delete(`api/cluster_conf/${v}?section=${E}`)}bulkCreate(v){return this.http.put("api/cluster_conf/",v)}static{this.\u0275fac=function(E){return new(E||S)(l.\u0275\u0275inject(a.HttpClient))}}static{this.\u0275prov=l.\u0275\u0275defineInjectable({token:S,factory:S.\u0275fac,providedIn:"root"})}}return S})()},17612:(q,y,s)=>{s.d(y,{j:()=>R});var a=s(36618),l=s(87536);let R=(()=>{class S{constructor(v){this.http=v,this.apiPath="api/crush_rule",this.formTooltips={root:$localize`The name of the node under which data should be placed.`,failure_domain:$localize`The type of CRUSH nodes across which we should separate replicas.`,device_class:$localize`The device class on which to place data.`}}create(v){return this.http.post(this.apiPath,v,{observe:"response"})}delete(v){return this.http.delete(`${this.apiPath}/${v}`,{observe:"response"})}getInfo(){return this.http.get(`ui-${this.apiPath}/info`)}static{this.\u0275fac=function(E){return new(E||S)(l.\u0275\u0275inject(a.HttpClient))}}static{this.\u0275prov=l.\u0275\u0275defineInjectable({token:S,factory:S.\u0275fac,providedIn:"root"})}}return S})()},7466:(q,y,s)=>{s.d(y,{I:()=>M});var a=s(36618),l=s(29841),h=s.n(l),R=s(95631),m=s(50619),E=s(83133),C=s(32609),d=s(60156),u=s(87536);let M=(()=>{class I extends E.O{constructor(f,g){super(),this.http=f,this.deviceService=g,this.baseURL="api/host",this.baseUIURL="ui-api/host",this.predefinedLabels=["mon","mgr","osd","mds","rgw","nfs","iscsi","rbd","grafana"]}list(f,g){return f=f.set("facts",g),this.http.get(this.baseURL,{headers:{Accept:this.getVersionHeaderValue(1,2)},params:f,observe:"response"}).pipe((0,m.map)(P=>P.body.map(A=>(A.headers=P.headers,A))))}create(f,g,P,A){return this.http.post(this.baseURL,{hostname:f,addr:g,labels:P,status:A},{observe:"response",headers:{Accept:C.c.cdVersionHeader("0","1")}})}delete(f){return this.http.delete(`${this.baseURL}/${f}`,{observe:"response"})}getDevices(f){return this.http.get(`${this.baseURL}/${f}/devices`).pipe((0,m.map)(g=>g.map(P=>this.deviceService.prepareDevice(P))))}getSmartData(f){return this.http.get(`${this.baseURL}/${f}/smart`)}getDaemons(f){return this.http.get(`${this.baseURL}/${f}/daemons`)}getLabels(){return this.http.get(`${this.baseUIURL}/labels`)}update(f,g=!1,P=[],A=!1,_=!1,B=!1){return this.http.put(`${this.baseURL}/${f}`,{update_labels:g,labels:P,maintenance:A,force:_,drain:B},{headers:{Accept:this.getVersionHeaderValue(0,1)}})}identifyDevice(f,g,P){return this.http.post(`${this.baseURL}/${f}/identify_device`,{device:g,duration:P})}getInventoryParams(f){let g=new a.HttpParams;return f&&(g=g.append("refresh",h().toString(f))),g}getInventory(f,g){const P=this.getInventoryParams(g);return this.http.get(`${this.baseURL}/${f}/inventory`,{params:P})}inventoryList(f){const g=this.getInventoryParams(f);return this.http.get(`${this.baseUIURL}/inventory`,{params:g})}inventoryDeviceList(f,g){let P;return P=f?this.getInventory(f,g).pipe((0,m.toArray)()):this.inventoryList(g),P.pipe((0,m.mergeMap)(A=>{const _=h().flatMap(A,B=>B.devices.map(w=>(w.hostname=B.name,w.uid=w.device_id?`${w.device_id}-${w.hostname}-${w.path}`:`${w.hostname}-${w.path}`,w)));return(0,R.of)(_)}))}getAllHosts(){return this.http.get(`${this.baseUIURL}/list`)}static{this.\u0275fac=function(g){return new(g||I)(u.\u0275\u0275inject(a.HttpClient),u.\u0275\u0275inject(d.g))}}static{this.\u0275prov=u.\u0275\u0275defineInjectable({token:I,factory:I.\u0275fac,providedIn:"root"})}}return I})()},20009:(q,y,s)=>{s.d(y,{a:()=>f});var a=s(36618),l=s(87015),R=s(95631),m=s(88701),v=s(76218),C=s(88285),d=s(50619),N=s(63882),M=s(87536);const O="global";let f=(()=>{class g{constructor(A,_,B,w,ie){this.blockUI=A,this.http=_,this.notificationService=B,this.router=w,this.summaryService=ie,this.url="api/mgr/module",this.updateCompleted$=new R.Subject,this.REFRESH_INTERVAL=2e3}list(){return this.http.get(`${this.url}`)}getConfig(A){return this.http.get(`${this.url}/${A}`)}updateConfig(A,_){return this.http.put(`${this.url}/${A}`,{config:_})}enable(A){return this.http.post(`${this.url}/${A}/enable`,null)}disable(A){return this.http.post(`${this.url}/${A}/disable`,null)}getOptions(A){return this.http.get(`${this.url}/${A}/options`)}updateModuleState(A,_=!1,B=null,w="",ie,Y,V=$localize`Reconnecting, please wait ...`){(_?this.disable(A):this.enable(A)).subscribe({next:()=>{this.updateCompleted$.next()},error:()=>{this.notificationService.suspendToasties(!0),this.blockUI.start(O,V),(0,R.timer)(this.REFRESH_INTERVAL).pipe((0,d.switchMap)(()=>this.list()),(0,d.retryWhen)(Q=>Q.pipe((0,d.tap)(()=>{}),(0,d.delay)(this.REFRESH_INTERVAL)))).subscribe({next:()=>{if(this.notificationService.suspendToasties(!1),this.blockUI.stop(O),B&&B.refreshBtn(),ie&&this.notificationService.show(C._.success,$localize`${ie}`),w){const Q=()=>this.router.navigate([w]);Y?this.router.navigateByUrl("/",{skipLocationChange:!0}).then(Q):Q()}this.updateCompleted$.next(),this.summaryService.startPolling()}})}})}static{this.\u0275fac=function(_){return new(_||g)(M.\u0275\u0275inject(l.BlockUIService),M.\u0275\u0275inject(a.HttpClient),M.\u0275\u0275inject(m.J),M.\u0275\u0275inject(v.Router),M.\u0275\u0275inject(N.E))}}static{this.\u0275prov=M.\u0275\u0275defineInjectable({token:g,factory:g.\u0275fac,providedIn:"root"})}}return g})()},42706:(q,y,s)=>{s.d(y,{J:()=>N});var a=s(36618),l=s(95631),R=s(15643),S=s(50619),v=s(63882),E=s(76218),d=s(87536);let N=(()=>{class M{constructor(O,f,g,P){this.http=O,this.timerService=f,this.summaryService=g,this.router=P,this.TOKEN_CHECK_INTERVAL=6e5,this.msSource=new l.BehaviorSubject(null),this.msData$=this.msSource.asObservable(),this.tokenStatusSource=new l.BehaviorSubject(null),this.tokenStatusSource$=this.tokenStatusSource.asObservable(),this.showDeletionMessage=!1,this.isClusterAddedFlag=!1,this.prometheusConnectionError=[]}startPolling(){return this.timerService.get(()=>this.getCluster(),5e3).subscribe(this.getClusterObserver())}startClusterTokenStatusPolling(){return this.checkAndStartTimer()}checkAndStartTimer(){return this.checkTokenStatus().subscribe(this.getClusterTokenStatusObserver()),this.timerService.get(()=>this.checkTokenStatus(),this.TOKEN_CHECK_INTERVAL).subscribe(this.getClusterTokenStatusObserver())}subscribeClusterTokenStatus(O,f){return this.tokenStatusSource$.pipe((0,S.filter)(g=>!!g)).subscribe(O,f)}refresh(){return this.getCluster().subscribe(this.getClusterObserver())}refreshTokenStatus(){return this.checkTokenStatus().subscribe(this.getClusterTokenStatusObserver())}subscribeOnce(O,f){return this.msData$.pipe((0,S.filter)(g=>!!g),(0,S.first)()).subscribe(O,f)}subscribe(O,f){return this.msData$.pipe((0,S.filter)(g=>!!g)).subscribe(O,f)}setCluster(O){return this.http.put("api/multi-cluster/set_config",{config:O})}getCluster(){return this.http.get("api/multi-cluster/get_config")}deleteCluster(O,f){return this.http.delete(`api/multi-cluster/delete_cluster/${O}/${f}`)}editCluster(O,f,g,P,A=!1,_=""){return this.http.put("api/multi-cluster/edit_cluster",{name:O,url:f,cluster_alias:g,username:P,verify:A,ssl_certificate:_})}addCluster(O,f,g,P,A="",_=!1,B="",w){return this.http.post("api/multi-cluster/auth",{url:O,cluster_alias:f,username:g,password:P,hub_url:A,ssl_verify:_,ssl_certificate:B,ttl:w})}reConnectCluster(O,f,g,P=!1,A="",_,B){const w={url:O,username:f,password:g,ssl_verify:P,ssl_certificate:A,ttl:_};return B&&(w.cluster_token=B),this.http.put("api/multi-cluster/reconnect_cluster",w)}getClusterObserver(){return O=>{this.msSource.next(O)}}getClusterTokenStatusObserver(){return O=>{this.tokenStatusSource.next(O)}}checkTokenStatus(){return this.http.get("api/multi-cluster/check_token_status")}showPrometheusDelayMessage(O){return void 0!==O&&(this.showDeletionMessage=O),this.showDeletionMessage}isClusterAdded(O){return void 0!==O&&(this.isClusterAddedFlag=O),this.isClusterAddedFlag}managePrometheusConnectionError(O){return void 0!==O&&(this.prometheusConnectionError=O),this.prometheusConnectionError}refreshMultiCluster(O){this.refresh(),this.refreshTokenStatus(),this.summaryService.refresh(),O.includes("dashboard")?this.router.navigateByUrl("/pool",{skipLocationChange:!0}).then(()=>{this.router.navigate([O])}):this.router.navigateByUrl("/",{skipLocationChange:!0}).then(()=>{this.router.navigate([O])})}static{this.\u0275fac=function(f){return new(f||M)(d.\u0275\u0275inject(a.HttpClient),d.\u0275\u0275inject(R.H),d.\u0275\u0275inject(v.E),d.\u0275\u0275inject(E.Router))}}static{this.\u0275prov=d.\u0275\u0275defineInjectable({token:M,factory:M.\u0275fac,providedIn:"root"})}}return M})()},22341:(q,y,s)=>{s.d(y,{Z:()=>E});var a=s(36618),l=s(95631),R=s(8265),S=s(83133),m=s(87536);let E=(()=>{class C extends S.O{constructor(u){super(),this.http=u,this.apiPath="api/nfs-ganesha",this.uiApiPath="ui-api/nfs-ganesha",this.nfsAccessType=[{value:"RW",help:$localize`Allows all operations`},{value:"RO",help:$localize`Allows only operations that do not modify the server`},{value:"NONE",help:$localize`Allows no access at all`}],this.nfsFsal=[{value:R.q.CEPH,descr:$localize`CephFS`,disabled:!1},{value:R.q.RGW,descr:$localize`Object Gateway`,disabled:!1}],this.nfsSquash={no_root_squash:["no_root_squash","noidsquash","none"],root_id_squash:["root_id_squash","rootidsquash","rootid"],root_squash:["root_squash","rootsquash","root"],all_squash:["all_squash","allsquash","all","allanonymous","all_anonymous"]}}list(u){return this.http.get(`${this.apiPath}/export`,{params:{cluster_id:u}})}get(u,N){return this.http.get(`${this.apiPath}/export/${u}/${N}`)}create(u){return this.http.post(`${this.apiPath}/export`,u,{headers:{Accept:this.getVersionHeaderValue(2,0)},observe:"response"})}update(u,N,M){return this.http.put(`${this.apiPath}/export/${u}/${N}`,M,{headers:{Accept:this.getVersionHeaderValue(2,0)},observe:"response"})}delete(u,N){return this.http.delete(`${this.apiPath}/export/${u}/${N}`,{headers:{Accept:this.getVersionHeaderValue(2,0)},observe:"response"})}listClusters(){return this.http.get(`${this.apiPath}/cluster`,{headers:{Accept:this.getVersionHeaderValue(0,1)}})}lsDir(u,N){return u?this.http.get(`${this.uiApiPath}/lsdir/${u}?root_dir=${N}`):(0,l.throwError)($localize`Please specify a filesystem volume.`)}fsals(){return this.http.get(`${this.uiApiPath}/fsals`)}filesystems(){return this.http.get(`${this.uiApiPath}/cephfs/filesystems`)}nfsClusterList(){return this.http.get(`${this.apiPath}/cluster`,{headers:{Accept:this.getVersionHeaderValue(0,1)},params:{info:!0}})}static{this.\u0275fac=function(N){return new(N||C)(m.\u0275\u0275inject(a.HttpClient))}}static{this.\u0275prov=m.\u0275\u0275defineInjectable({token:C,factory:C.\u0275fac,providedIn:"root"})}}return C})()},98996:(q,y,s)=>{s.d(y,{K:()=>m});var a=s(36618),l=s(29841),h=s.n(l),R=s(87536);let m=(()=>{class v{constructor(C){this.http=C,this.url="ui-api/orchestrator",this.disableMessages={noOrchestrator:$localize`The feature is disabled because Orchestrator is not available.`,missingFeature:$localize`The Orchestrator backend doesn't support this feature.`}}status(){return this.http.get(`${this.url}/status`)}hasFeature(C,d){return h().every(d,u=>h().get(C.features,`${u}.available`))}getTableActionDisableDesc(C,d){return!!C&&(C.available?!this.hasFeature(C,d)&&this.disableMessages.missingFeature:this.disableMessages.noOrchestrator)}getName(){return this.http.get(`${this.url}/get_name`)}static{this.\u0275fac=function(d){return new(d||v)(R.\u0275\u0275inject(a.HttpClient))}}static{this.\u0275prov=R.\u0275\u0275defineInjectable({token:v,factory:v.\u0275fac,providedIn:"root"})}}return v})()},92319:(q,y,s)=>{s.d(y,{z:()=>l});var a=s(50619);class l{constructor(R){this.observable=R.pipe((0,a.map)(S=>(this.count=Number(S.headers?.get("X-Total-Count")),S.body||S)))}}},59870:(q,y,s)=>{s.d(y,{m:()=>d});var a=s(84857),l=s(36618),R=s(50619),m=s(80697),v=s(77241),E=s(87536);let d=class ia{constructor(N,M){this.http=N,this.rbdConfigurationService=M,this.apiPath="api/pool"}create(N){return this.http.post(this.apiPath,N,{observe:"response"})}update(N){let M;return N.hasOwnProperty("srcpool")?(M=N.srcpool,delete N.srcpool):(M=N.pool,delete N.pool),this.http.put(`${this.apiPath}/${encodeURIComponent(M)}`,N,{observe:"response"})}delete(N){return this.http.delete(`${this.apiPath}/${N}`,{observe:"response"})}get(N){return this.http.get(`${this.apiPath}/${N}`)}getList(){return this.http.get(`${this.apiPath}?stats=true`)}getConfiguration(N){return this.http.get(`${this.apiPath}/${N}/configuration`).pipe((0,R.map)(M=>M.map(I=>Object.assign(I,this.rbdConfigurationService.getOptionByName(I.name)))))}getInfo(){return this.http.get(`ui-${this.apiPath}/info`)}list(N=[]){const M=N.join(",");return this.http.get(`${this.apiPath}?attrs=${M}`).toPromise().then(I=>I)}static{this.\u0275fac=function(M){return new(M||ia)(E.\u0275\u0275inject(l.HttpClient),E.\u0275\u0275inject(v.Q))}}static{this.\u0275prov=E.\u0275\u0275defineInjectable({token:ia,factory:ia.\u0275fac,providedIn:"root"})}};d=(0,a.__decorate)([m.G,(0,a.__metadata)("design:paramtypes",[l.HttpClient,v.Q])],d)},32380:(q,y,s)=>{s.d(y,{o:()=>d});var a=s(36618),l=s(95631),R=s(50619),m=s(89939),v=s.n(m),E=s(87536);let d=(()=>{class u{constructor(M){this.http=M,this.timerTime=3e4,this.lastHourDateObject={start:v()().unix()-3600,end:v()().unix(),step:14},this.baseURL="api/prometheus",this.settingsKey={alertmanager:"ui-api/prometheus/alertmanager-api-host",prometheus:"ui-api/prometheus/prometheus-api-host"},this.settings={}}unsubscribe(){this.timerGetPrometheusDataSub&&this.timerGetPrometheusDataSub.unsubscribe()}getPrometheusData(M){return this.http.get(`${this.baseURL}/data`,{params:M})}getPrometheusQueryData(M){return this.http.get(`${this.baseURL}/prometheus_query_data`,{params:M})}ifAlertmanagerConfigured(M,I){this.ifSettingConfigured(this.settingsKey.alertmanager,M,I)}disableAlertmanagerConfig(){this.disableSetting(this.settingsKey.alertmanager)}ifPrometheusConfigured(M,I){this.ifSettingConfigured(this.settingsKey.prometheus,M,I)}disablePrometheusConfig(){this.disableSetting(this.settingsKey.prometheus)}getAlerts(M=!1,I={}){return I.cluster_filter=M,this.http.get(this.baseURL,{params:I})}getSilences(M={}){return this.http.get(`${this.baseURL}/silences`,{params:M})}getRules(M="all"){return this.http.get(`${this.baseURL}/rules`).pipe((0,R.map)(I=>(["alerting","rewrites"].includes(M)&&I.groups.map(O=>{O.rules=O.rules.filter(f=>f.type===M)}),I)))}setSilence(M){return this.http.post(`${this.baseURL}/silence`,M,{observe:"response"})}expireSilence(M){return this.http.delete(`${this.baseURL}/silence/${M}`,{observe:"response"})}getNotifications(M){return this.http.get(`${this.baseURL}/notifications?from=${M&&M.id?M.id:"last"}`)}ifSettingConfigured(M,I,O){const f=this.settings[M];void 0===f?this.http.get(M).subscribe(g=>{this.settings[M]=this.getSettingsValue(g),this.ifSettingConfigured(M,I,O)},g=>{401!==g.status&&(this.settings[M]="")}):""!==f?I(f):O&&O()}disableSetting(M){this.settings[M]=""}getSettingsValue(M){return M.value||M.instance||""}getGaugeQueryData(M){return this.getPrometheusQueryData({params:M}).pipe((0,R.map)(I=>I),(0,R.catchError)(()=>(0,l.of)({result:[]})))}formatGuageMetric(M){const I=parseFloat(M??"");return isFinite(I)?I:null}getRangeQueriesData(M,I,O,f){return this.ifPrometheusConfigured(()=>{this.timerGetPrometheusDataSub&&this.timerGetPrometheusDataSub.unsubscribe(),this.timerGetPrometheusDataSub=(0,l.timer)(0,this.timerTime).pipe((0,R.switchMap)(()=>{M=this.updateTimeStamp(M);const g=[];for(const P in I)I.hasOwnProperty(P)&&g.push(this.getPrometheusData({params:encodeURIComponent(I[P]),start:M.start,end:M.end,step:M.step}).pipe((0,R.map)(_=>({queryName:P,data:_}))));return(0,l.forkJoin)(g)})).subscribe(g=>{g.forEach(({queryName:P,data:A})=>{O[P]=A.result.length?A.result[0].values:[],void 0!==O[P]&&""!==O[P]&&f&&O[P].forEach(_=>{isNaN(parseFloat(_[1]))&&(_[1]="0")})})})}),O}updateTimeStamp(M){let I={},O=M.end-M.start;return I={start:v()().unix()-O,end:v()().unix(),step:M.step},I}getMultiClusterData(M){return this.http.get(`${this.baseURL}/prometheus_query_data`,{params:M})}getMultiClusterQueryRangeData(M){return this.http.get(`${this.baseURL}/data`,{params:M})}getMultiClusterQueriesData(M,I,O,f,g,P){return new l.Observable(A=>{this.ifPrometheusConfigured(()=>{this.timerGetPrometheusDataSub&&this.timerGetPrometheusDataSub.unsubscribe(),this.timerGetPrometheusDataSub=(0,l.timer)(0,this.timerTime).subscribe(()=>{let _=[],B=[];Object.entries(f).forEach(([w,ie])=>{for(const Y in f[w].queries)if(f[w].queries.hasOwnProperty(Y)&&g.includes(Y)){const V=f[w].queries[Y],L=this.updateTimeStamp(f[w].selectedTime).start,Q=this.updateTimeStamp(f[w].selectedTime).end,me=this.updateTimeStamp(f[w].selectedTime).step;if(O.includes(Y)){const Ie=this.getMultiClusterQueryRangeData({params:encodeURIComponent(V),start:L,end:Q,step:me});_.push(Ie),B.push(Y)}else{const Ie=this.getMultiClusterData({params:encodeURIComponent(V),start:L,end:Q,step:me});_.push(Ie),B.push(Y)}}}),g=P,(0,l.forkJoin)(_).subscribe(w=>{for(let ie=0;ie<w.length;ie++){const Y=w[ie],V=B[ie];Y.result.length&&(M[V]=I.includes(V)?Y.result:Y.result.map(L=>L.value))}A.next(M),A.complete()},w=>{A.error(w)})})})})}static{this.\u0275fac=function(I){return new(I||u)(E.\u0275\u0275inject(a.HttpClient))}}static{this.\u0275prov=E.\u0275\u0275defineInjectable({token:u,factory:u.\u0275fac,providedIn:"root"})}}return u})()},75180:(q,y,s)=>{s.d(y,{U:()=>I});var a=s(84857),l=s(36618),R=s(29841),S=s.n(R),m=s(50619),E=s(83133),C=s(80697),d=s(65218),u=s(77241),N=s(87536);let I=class aa extends E.O{constructor(f,g){super(),this.http=f,this.rbdConfigurationService=g}isRBDPool(f){return-1!==S().indexOf(f.application_metadata,"rbd")&&!f.pool_name.includes("/")}create(f){return this.http.post("api/block/image",f,{observe:"response"})}delete(f){return this.http.delete(`api/block/image/${f.toStringEncoded()}`,{observe:"response"})}update(f,g){return this.http.put(`api/block/image/${f.toStringEncoded()}`,g,{observe:"response"})}get(f){return this.http.get(`api/block/image/${f.toStringEncoded()}`)}list(f){return this.http.get("api/block/image",{params:f,headers:{Accept:this.getVersionHeaderValue(2,0)},observe:"response"}).pipe((0,m.map)(g=>g.body.map(P=>(P.value.map(A=>(A.configuration&&A.configuration.map(_=>Object.assign(_,this.rbdConfigurationService.getOptionByName(_.name))),A)),P.headers=g.headers,P))))}copy(f,g){return this.http.post(`api/block/image/${f.toStringEncoded()}/copy`,g,{observe:"response"})}flatten(f){return this.http.post(`api/block/image/${f.toStringEncoded()}/flatten`,null,{observe:"response"})}defaultFeatures(){return this.http.get("api/block/image/default_features")}cloneFormatVersion(){return this.http.get("api/block/image/clone_format_version")}createSnapshot(f,g,P){const A={snapshot_name:g,mirrorImageSnapshot:P};return this.http.post(`api/block/image/${f.toStringEncoded()}/snap`,A,{observe:"response"})}renameSnapshot(f,g,P){const A={new_snap_name:P};return this.http.put(`api/block/image/${f.toStringEncoded()}/snap/${g}`,A,{observe:"response"})}protectSnapshot(f,g,P){const A={is_protected:P};return this.http.put(`api/block/image/${f.toStringEncoded()}/snap/${g}`,A,{observe:"response"})}rollbackSnapshot(f,g){return this.http.post(`api/block/image/${f.toStringEncoded()}/snap/${g}/rollback`,null,{observe:"response"})}cloneSnapshot(f,g,P){return this.http.post(`api/block/image/${f.toStringEncoded()}/snap/${g}/clone`,P,{observe:"response"})}deleteSnapshot(f,g){return this.http.delete(`api/block/image/${f.toStringEncoded()}/snap/${g}`,{observe:"response"})}listTrash(){return this.http.get("api/block/image/trash/")}createNamespace(f,g){return this.http.post(`api/block/pool/${f}/namespace`,{namespace:g},{observe:"response"})}listNamespaces(f){return this.http.get(`api/block/pool/${f}/namespace/`)}deleteNamespace(f,g){return this.http.delete(`api/block/pool/${f}/namespace/${g}`,{observe:"response"})}moveTrash(f,g){return this.http.post(`api/block/image/${f.toStringEncoded()}/move_trash`,{delay:g},{observe:"response"})}purgeTrash(f){return this.http.post(`api/block/image/trash/purge/?pool_name=${f}`,null,{observe:"response"})}restoreTrash(f,g){return this.http.post(`api/block/image/trash/${f.toStringEncoded()}/restore`,{new_image_name:g},{observe:"response"})}removeTrash(f,g=!1){return this.http.delete(`api/block/image/trash/${f.toStringEncoded()}/?force=${g}`,{observe:"response"})}static{this.\u0275fac=function(g){return new(g||aa)(N.\u0275\u0275inject(l.HttpClient),N.\u0275\u0275inject(u.Q))}}static{this.\u0275prov=N.\u0275\u0275defineInjectable({token:aa,factory:aa.\u0275fac,providedIn:"root"})}};(0,a.__decorate)([(0,a.__param)(1,C.R),(0,a.__metadata)("design:type",Function),(0,a.__metadata)("design:paramtypes",[d.J,String,Boolean]),(0,a.__metadata)("design:returntype",void 0)],I.prototype,"createSnapshot",null),(0,a.__decorate)([(0,a.__param)(2,C.R),(0,a.__metadata)("design:type",Function),(0,a.__metadata)("design:paramtypes",[d.J,String,String]),(0,a.__metadata)("design:returntype",void 0)],I.prototype,"renameSnapshot",null),(0,a.__decorate)([(0,a.__param)(2,C.R),(0,a.__metadata)("design:type",Function),(0,a.__metadata)("design:paramtypes",[d.J,String,Boolean]),(0,a.__metadata)("design:returntype",void 0)],I.prototype,"protectSnapshot",null),(0,a.__decorate)([(0,a.__param)(1,C.R),(0,a.__metadata)("design:type",Function),(0,a.__metadata)("design:paramtypes",[d.J,String]),(0,a.__metadata)("design:returntype",void 0)],I.prototype,"restoreTrash",null),I=(0,a.__decorate)([C.G,(0,a.__metadata)("design:paramtypes",[l.HttpClient,u.Q])],I)},29729:(q,y,s)=>{s.d(y,{c:()=>O});var a=s(84857),l=s(36618),R=s(29841),S=s.n(R),m=s(95631),E=s(50619),d=s(83133),u=s(92919),N=s(80697),M=s(87536);let O=class sa extends d.O{constructor(g,P){super(),this.http=g,this.rgwDaemonService=P,this.url="api/rgw/bucket",this.bucketsSubject=new m.BehaviorSubject([]),this.totalNumObjectsSubject=new m.BehaviorSubject(0),this.totalUsedCapacitySubject=new m.BehaviorSubject(0),this.averageObjectSizeSubject=new m.BehaviorSubject(0),this.buckets$=this.bucketsSubject.asObservable(),this.totalNumObjects$=this.totalNumObjectsSubject.asObservable(),this.totalUsedCapacity$=this.totalUsedCapacitySubject.asObservable(),this.averageObjectSize$=this.averageObjectSizeSubject.asObservable()}fetchAndTransformBuckets(){return this.list(!0).pipe((0,E.map)(g=>{let P=0,A=0,_=0;const B=g.map(w=>this.transformBucket(w));B.forEach(w=>{P+=w?.num_objects||0,A+=w?.bucket_size||0}),_=this.calculateAverageObjectSize(P,A),this.bucketsSubject.next(B),this.totalNumObjectsSubject.next(P),this.totalUsedCapacitySubject.next(A),this.averageObjectSizeSubject.next(_)}))}transformBucket(g){const P=g?.bucket_quota?.max_size??0,A=g?.bucket_quota?.max_objects??0,_=g.usage?.["rgw.main"]?.size_actual||0,B=g.usage?.["rgw.main"]?.num_objects||0;return{...g,bucket_size:_,num_objects:B,size_usage:this.calculateSizeUsage(_,P),object_usage:this.calculateObjectUsage(B,A)}}calculateSizeUsage(g,P){return P>0?g/P:void 0}calculateObjectUsage(g,P){return P>0?g/P:void 0}calculateAverageObjectSize(g,P){return g>0?P/g:0}list(g=!1,P=""){return this.rgwDaemonService.request(A=>(A=A.append("stats",g.toString()),P&&(A=A.append("uid",P)),this.http.get(this.url,{headers:{Accept:this.getVersionHeaderValue(1,1)},params:A})))}get(g){return this.rgwDaemonService.request(P=>this.http.get(`${this.url}/${g}`,{params:P}))}getTotalBucketsAndUsersLength(){return this.rgwDaemonService.request(g=>this.http.get(`ui-${this.url}/buckets_and_users_count`,{params:g}))}create(g,P,A,_,B,w,ie,Y,V,L,Q,me,Ie,He){return this.rgwDaemonService.request(Ae=>{const We={bucket:g,uid:P,zonegroup:A,lock_enabled:String(B),lock_mode:w,lock_retention_period_days:ie,encryption_state:String(Y),encryption_type:V,key_id:L,tags:Q,bucket_policy:me,canned_acl:Ie,replication:He,daemon_name:Ae.get("daemon_name")};return _&&(We.placement_target=_),this.http.post(this.url,null,{params:new l.HttpParams({fromObject:We})})})}update(g,P,A,_,B,w,ie,Y,V,L,Q,me,Ie,He,Ae,We,te){return this.rgwDaemonService.request(_e=>(_e=_e.appendAll({bucket_id:P,uid:A,versioning_state:_,encryption_state:String(B),encryption_type:w,key_id:ie,mfa_delete:Y,mfa_token_serial:V,mfa_token_pin:L,lock_mode:Q,lock_retention_period_days:me,tags:Ie,bucket_policy:He,canned_acl:Ae,replication:We,lifecycle:te}),this.http.put(`${this.url}/${g}`,null,{params:_e})))}delete(g){return this.rgwDaemonService.request(P=>this.http.delete(`${this.url}/${g}`,{params:P}))}exists(g){return this.get(g).pipe((0,E.mapTo)(!0),(0,E.catchError)(P=>(S().isFunction(P.preventDefault)&&P.preventDefault(),(0,m.of)(!1))))}getLockDays(g){return g.lock_retention_period_years>0?Math.floor(365.242*g.lock_retention_period_years):g.lock_retention_period_days||0}setEncryptionConfig(g){const P={...g};return this.rgwDaemonService.request(A=>this.http.put(`${this.url}/setEncryptionConfig`,P,{params:A}))}getEncryption(g){return this.rgwDaemonService.request(P=>this.http.get(`${this.url}/${g}/getEncryption`,{params:P}))}deleteEncryption(g){return this.rgwDaemonService.request(P=>this.http.get(`${this.url}/${g}/deleteEncryption`,{params:P}))}getEncryptionConfig(){return this.rgwDaemonService.request(g=>this.http.get(`${this.url}/getEncryptionConfig`,{params:g}))}setLifecycle(g,P,A,_){return this.rgwDaemonService.request(B=>(B=B.appendAll({bucket_name:g,lifecycle:P,owner:A,tenant:_}),this.http.put(`${this.url}/lifecycle`,null,{params:B})))}getLifecycle(g,P,A){return this.rgwDaemonService.request(_=>(_=_.appendAll({bucket_name:g,owner:P,tenant:A}),this.http.get(`${this.url}/lifecycle`,{params:_})))}updateBucketRateLimit(g,P){return this.http.put(`${this.url}/${g}/ratelimit`,P)}getBucketRateLimit(g){return this.http.get(`${this.url}/${g}/ratelimit`)}getGlobalBucketRateLimit(){return this.http.get(`${this.url}/ratelimit`)}listNotification(g){return this.rgwDaemonService.request(P=>(P=P.appendAll({bucket_name:g}),this.http.get(`${this.url}/notification`,{params:P})))}setNotification(g,P,A){return this.rgwDaemonService.request(_=>(_=_.appendAll({bucket_name:g,notification:P,owner:A}),this.http.put(`${this.url}/notification`,null,{params:_})))}deleteNotification(g,P){return this.rgwDaemonService.request(A=>(A=A.appendAll({bucket_name:g,notification_id:P}),this.http.delete(`${this.url}/notification`,{params:A})))}static{this.\u0275fac=function(P){return new(P||sa)(M.\u0275\u0275inject(l.HttpClient),M.\u0275\u0275inject(u.y))}}static{this.\u0275prov=M.\u0275\u0275defineInjectable({token:sa,factory:sa.\u0275fac,providedIn:"root"})}};O=(0,a.__decorate)([N.G,(0,a.__metadata)("design:paramtypes",[l.HttpClient,u.y])],O)},92919:(q,y,s)=>{s.d(y,{y:()=>M});var a=s(84857),l=s(36618),R=s(29841),S=s.n(R),m=s(95631),E=s(50619),d=s(80697),u=s(87536);let M=class ra{constructor(O){this.http=O,this.url="api/rgw/daemon",this.daemons=new m.BehaviorSubject([]),this.daemons$=this.daemons.asObservable(),this.selectedDaemon=new m.BehaviorSubject(null),this.selectedDaemon$=this.selectedDaemon.asObservable()}list(){return this.http.get(this.url).pipe((0,E.tap)(O=>{this.daemons.next(O);const f=this.selectedDaemon.getValue();(S().isEmpty(f)||void 0===S().find(O,{id:f.id}))&&this.selectDefaultDaemon(O)}))}get(O){return this.http.get(`${this.url}/${O}`)}selectDaemon(O){this.selectedDaemon.next(O)}selectDefaultDaemon(O){if(0===O.length)return null;for(const f of O)if(f.default)return this.selectDaemon(f),f;return this.selectDaemon(O[0]),O[0]}request(O){return this.selectedDaemon.pipe((0,E.mergeMap)(f=>S().isEmpty(f)?this.list().pipe((0,E.mergeMap)(g=>S().isEmpty(g)?(0,m.throwError)("No RGW daemons found!"):this.selectedDaemon$)):(0,m.of)(f)),(0,E.take)(1),(0,E.mergeMap)(f=>{let g=new l.HttpParams;return g=g.append("daemon_name",f.id),O(g)}))}setMultisiteConfig(O,f,g){return this.request(P=>(P=P.appendAll({realm_name:O,zonegroup_name:f,zone_name:g}),this.http.put(`${this.url}/set_multisite_config`,null,{params:P})))}static{this.\u0275fac=function(f){return new(f||ra)(u.\u0275\u0275inject(l.HttpClient))}}static{this.\u0275prov=u.\u0275\u0275defineInjectable({token:ra,factory:ra.\u0275fac,providedIn:"root"})}};M=(0,a.__decorate)([d.G,(0,a.__metadata)("design:paramtypes",[l.HttpClient])],M)},46459:(q,y,s)=>{s.d(y,{A:()=>u});var a=s(36618),l=s(92919),h=s(95631),S=s(50619),v=s(13723),E=s(20009),C=s(87536);let u=(()=>{class N{constructor(I,O,f){this.http=I,this.rgwDaemonService=O,this.mgrModuleService=f,this.uiUrl="ui-api/rgw/multisite",this.url="api/rgw/multisite",this.restartGatewayMessageSource=new h.BehaviorSubject(null),this.restartGatewayMessage$=this.restartGatewayMessageSource.asObservable()}migrate(I,O,f,g){return this.rgwDaemonService.request(P=>(P=P.appendAll({realm_name:I.name,zonegroup_name:O.name,zone_name:f.name,zonegroup_endpoints:O.endpoints,zone_endpoints:f.endpoints,username:g}),this.http.put(`${this.uiUrl}/migrate`,null,{params:P})))}getSyncStatus(){return this.rgwDaemonService.request(I=>this.http.get(`${this.url}/sync_status`,{params:I}))}status(){return this.http.get(`${this.uiUrl}/status`)}getSyncPolicy(I,O,f=!1){let g=new a.HttpParams;return I&&(g=g.append("bucket_name",I)),O&&(g=g.append("zonegroup_name",O)),g=g.append("all_policy",f),this.http.get(`${this.url}/sync-policy`,{params:g})}getSyncPolicyGroup(I,O){let f=new a.HttpParams;return O&&(f=f.append("bucket_name",O)),this.http.get(`${this.url}/sync-policy-group/${I}`,{params:f})}createSyncPolicyGroup(I){return this.http.post(`${this.url}/sync-policy-group`,I)}modifySyncPolicyGroup(I){return this.http.put(`${this.url}/sync-policy-group`,I)}removeSyncPolicyGroup(I,O){let f=new a.HttpParams;return O&&(f=f.append("bucket_name",O)),this.http.delete(`${this.url}/sync-policy-group/${I}`,{params:f})}setUpMultisiteReplication(I,O,f,g,P,A,_,B,w,ie){let Y=(new a.HttpParams).set("realm_name",I).set("zonegroup_name",O).set("zonegroup_endpoints",f).set("zone_name",g).set("zone_endpoints",P).set("username",A);return _&&(Y=Y.set("cluster_fsid",_)),w&&(Y=Y.set("cluster_details",JSON.stringify(w))),B&&(Y=Y.set("replication_zone_name",B)),ie&&(Y=Y.set("selectedRealmName",ie)),this.http.post(`${this.uiUrl}/multisite-replications`,null,{params:Y})}createEditSyncFlow(I){return this.http.put(`${this.url}/sync-flow`,I)}removeSyncFlow(I,O,f,g){let P=new a.HttpParams;return g&&(P=P.append("bucket_name",encodeURIComponent(g))),this.http.delete(`${this.url}/sync-flow/${encodeURIComponent(I)}/${O}/${encodeURIComponent(f)}`,{params:P})}createEditSyncPipe(I,O,f){let g=new a.HttpParams;return O&&(g=g.append("user",O)),f&&(g=g.append("mode",f)),this.http.put(`${this.url}/sync-pipe`,I,{params:g})}removeSyncPipe(I,O,f){let g=new a.HttpParams;return f&&(g=g.append("bucket_name",encodeURIComponent(f))),this.http.delete(`${this.url}/sync-pipe/${encodeURIComponent(O)}/${encodeURIComponent(I)}`,{params:g})}setRestartGatewayMessage(I){this.restartGatewayMessageSource.next(I)}getRgwModuleStatus(){return this.mgrModuleService.list().pipe((0,S.map)(I=>!!I.find(f=>f.name===v.tj)?.enabled))}static{this.\u0275fac=function(O){return new(O||N)(C.\u0275\u0275inject(a.HttpClient),C.\u0275\u0275inject(l.y),C.\u0275\u0275inject(E.a))}}static{this.\u0275prov=C.\u0275\u0275defineInjectable({token:N,factory:N.\u0275fac,providedIn:"root"})}}return N})()},19830:(q,y,s)=>{s.d(y,{$:()=>m});var a=s(36618),l=s(46045),h=s(92919),R=s(87536);let m=(()=>{class v{constructor(C,d){this.http=C,this.rgwDaemonService=d,this.url="api/rgw/realm"}create(C,d){return this.http.post(`${this.url}`,{realm_name:C.name,default:d})}update(C,d,u){return this.http.put(`${this.url}/${C.name}`,{realm_name:C.name,default:d,new_realm_name:u})}list(C){let d=new a.HttpParams;return C&&(d=d.appendAll({replicable:C.toString()})),this.http.get(`${this.url}`,{params:d})}get(C){return this.http.get(`${this.url}/${C.name}`)}getAllRealmsInfo(){return this.http.get(`${this.url}/get_all_realms_info`)}delete(C){let d=new a.HttpParams;return d=d.appendAll({realm_name:C}),this.http.delete(`${this.url}/${C}`,{params:d})}getRealmTree(C,d){let u={},N=[];return u.id=C.id,N.push(C.id),u.name=C.name,u.info=C,u.is_default=C.id===d,u.icon=l.FI.reweight,u.type="realm",{nodes:u,realmIds:N}}importRealmToken(C,d,u,N){return this.http.post(`${this.url}/import_realm_token`,{realm_token:C,zone_name:d,port:u,placement_spec:N})}getRealmTokens(){return this.rgwDaemonService.request(()=>this.http.get(`${this.url}/get_realm_tokens`))}static{this.\u0275fac=function(d){return new(d||v)(R.\u0275\u0275inject(a.HttpClient),R.\u0275\u0275inject(h.y))}}static{this.\u0275prov=R.\u0275\u0275defineInjectable({token:v,factory:v.\u0275fac,providedIn:"root"})}}return v})()},59876:(q,y,s)=>{s.d(y,{B:()=>d});var a=s(84857),l=s(36618),R=s(50619),m=s(92919),v=s(80697),E=s(87536);let d=class la{constructor(N,M){this.http=N,this.rgwDaemonService=M,this.url="api/rgw/site"}get(N){return this.rgwDaemonService.request(M=>(N&&(M=M.append("query",N)),this.http.get(this.url,{params:M})))}isDefaultRealm(){return this.get("default-realm").pipe((0,R.mergeMap)(N=>this.rgwDaemonService.selectedDaemon$.pipe((0,R.map)(M=>M.realm_name===N))))}static{this.\u0275fac=function(M){return new(M||la)(E.\u0275\u0275inject(l.HttpClient),E.\u0275\u0275inject(m.y))}}static{this.\u0275prov=E.\u0275\u0275defineInjectable({token:la,factory:la.\u0275fac,providedIn:"root"})}};d=(0,a.__decorate)([v.G,(0,a.__metadata)("design:paramtypes",[l.HttpClient,m.y])],d)},28284:(q,y,s)=>{s.d(y,{p:()=>I});var a=s(84857),l=s(36618),R=s(29841),S=s.n(R),m=s(95631),E=s(50619),d=s(92919),u=s(80697),N=s(87536);let I=class _a{constructor(f,g){this.http=f,this.rgwDaemonService=g,this.url="api/rgw/user"}list(){return this.enumerate().pipe((0,E.mergeMap)(f=>f.length>0?(0,m.forkJoin)(f.map(g=>this.get(g))):(0,m.of)([])))}enumerate(f=!1){return this.rgwDaemonService.request(g=>(g=g.append("detailed",f),this.http.get(this.url,{params:g})))}enumerateEmail(){return this.rgwDaemonService.request(f=>this.http.get(`${this.url}/get_emails`,{params:f}))}get(f){return this.rgwDaemonService.request(g=>this.http.get(`${this.url}/${f}`,{params:g}))}getQuota(f){return this.rgwDaemonService.request(g=>this.http.get(`${this.url}/${f}/quota`,{params:g}))}create(f){return this.rgwDaemonService.request(g=>(S().keys(f).forEach(P=>{"object"==typeof f[P]&&(f[P]=JSON.stringify(f[P])),g=g.append(P,f[P])}),this.http.post(this.url,null,{params:g})))}update(f,g){return this.rgwDaemonService.request(P=>(S().keys(g).forEach(A=>{"object"==typeof g[A]&&(g[A]=JSON.stringify(g[A])),P=P.append(A,g[A])}),this.http.put(`${this.url}/${f}`,null,{params:P})))}updateQuota(f,g){return this.rgwDaemonService.request(P=>(S().keys(g).forEach(A=>{P=P.append(A,g[A])}),this.http.put(`${this.url}/${f}/quota`,null,{params:P})))}delete(f){return this.rgwDaemonService.request(g=>this.http.delete(`${this.url}/${f}`,{params:g}))}createSubuser(f,g){return this.rgwDaemonService.request(P=>(S().keys(g).forEach(A=>{P=P.append(A,g[A])}),this.http.post(`${this.url}/${f}/subuser`,null,{params:P})))}deleteSubuser(f,g){return this.rgwDaemonService.request(P=>this.http.delete(`${this.url}/${f}/subuser/${g}`,{params:P}))}addCapability(f,g,P){return this.rgwDaemonService.request(A=>(A=(A=A.append("type",g)).append("perm",P),this.http.post(`${this.url}/${f}/capability`,null,{params:A})))}deleteCapability(f,g,P){return this.rgwDaemonService.request(A=>(A=(A=A.append("type",g)).append("perm",P),this.http.delete(`${this.url}/${f}/capability`,{params:A})))}addS3Key(f,g){return this.rgwDaemonService.request(P=>(P=P.append("key_type","s3"),S().keys(g).forEach(A=>{P=P.append(A,g[A])}),this.http.post(`${this.url}/${f}/key`,null,{params:P})))}deleteS3Key(f,g){return this.rgwDaemonService.request(P=>(P=(P=P.append("key_type","s3")).append("access_key",g),this.http.delete(`${this.url}/${f}/key`,{params:P})))}exists(f){return this.get(f).pipe((0,E.mapTo)(!0),(0,E.catchError)(g=>(S().isFunction(g.preventDefault)&&g.preventDefault(),(0,m.of)(!1))))}emailExists(f){return f=decodeURIComponent(f),this.enumerateEmail().pipe((0,E.mergeMap)(g=>{const P=S().indexOf(g,f);return(0,m.of)(-1!==P)}))}updateUserRateLimit(f,g){return this.http.put(`${this.url}/${f}/ratelimit`,g)}getUserRateLimit(f){return this.http.get(`${this.url}/${f}/ratelimit`)}getGlobalUserRateLimit(){return this.http.get(`${this.url}/ratelimit`)}static{this.\u0275fac=function(g){return new(g||_a)(N.\u0275\u0275inject(l.HttpClient),N.\u0275\u0275inject(d.y))}}static{this.\u0275prov=N.\u0275\u0275defineInjectable({token:_a,factory:_a.\u0275fac,providedIn:"root"})}};I=(0,a.__decorate)([u.G,(0,a.__metadata)("design:paramtypes",[l.HttpClient,d.y])],I)},20961:(q,y,s)=>{s.d(y,{w:()=>S});var a=s(36618),l=s(46045),h=s(87536);let S=(()=>{class m{constructor(E){this.http=E,this.url="api/rgw/zone"}create(E,C,d,u,N){let M=new a.HttpParams;return M=M.appendAll({zone_name:E.name,zonegroup_name:C.name,default:d,master:u,zone_endpoints:N,access_key:E.system_key.access_key,secret_key:E.system_key.secret_key}),this.http.post(`${this.url}`,null,{params:M})}list(){return this.http.get(`${this.url}`)}get(E){return this.http.get(`${this.url}/${E.name}`)}getAllZonesInfo(){return this.http.get(`${this.url}/get_all_zones_info`)}delete(E,C,d,u){let N=new a.HttpParams;return N=N.appendAll({zone_name:E,delete_pools:C,pools:Array.from(d.values()),zonegroup_name:u}),this.http.delete(`${this.url}/${E}`,{params:N})}update(E,C,d,u,N,M,I,O,f,g,P,A,_){return this.http.put(`${this.url}/${E.name}`,{zone_name:E.name,zonegroup_name:C.name,new_zone_name:d,default:u,master:N,zone_endpoints:M,access_key:E.system_key.access_key,secret_key:E.system_key.secret_key,placement_target:I,data_pool:O,index_pool:f,data_extra_pool:g,storage_class:P,data_pool_class:A,compression:_})}getZoneTree(E,C,d,u,N){let M={},I=[];M.id=E.id,I.push(E.id),M.name=E.name,M.type="zone",M.name=E.name,M.info=E,M.icon=l.FI.deploy,M.zone_zonegroup=u,M.parent=u?u.name:"",M.second_parent=N?N.name:"",M.is_default=E.id===C,M.endpoints=E.endpoints,M.is_master=!(!u||u.master_zone!==E.id),M.type="zone";const O=d.map(g=>g.name);M.secondary_zone=!O.includes(E.name);const f=d.filter(g=>g.name===E.name);if(f&&f.length>0){const g=f[0].system_key.access_key,P=f[0].system_key.secret_key;M.access_key=g||"",M.secret_key=P||"",M.user=!(!g||""===g)}return""===M.access_key||"null"===M.access_key?(M.show_warning=!0,M.warning_message="Access/Secret keys not found"):M.show_warning=!1,M.endpoints&&0===M.endpoints.length&&(M.show_warning=!0,M.warning_message=M.warning_message+"\nEndpoints not configured"),{nodes:M,zoneIds:I}}getPoolNames(){return this.http.get(`${this.url}/get_pool_names`)}createSystemUser(E,C){return this.http.put(`${this.url}/create_system_user`,{userName:E,zoneName:C})}getUserList(E){let C=new a.HttpParams;return C=C.appendAll({zoneName:E}),this.http.get(`${this.url}/get_user_list`,{params:C})}static{this.\u0275fac=function(C){return new(C||m)(h.\u0275\u0275inject(a.HttpClient))}}static{this.\u0275prov=h.\u0275\u0275defineInjectable({token:m,factory:m.\u0275fac,providedIn:"root"})}}return m})()},3140:(q,y,s)=>{s.d(y,{Z:()=>S});var a=s(36618),l=s(46045),h=s(87536);let S=(()=>{class m{constructor(E){this.http=E,this.url="api/rgw/zonegroup"}create(E,C,d,u){let N=new a.HttpParams;return N=N.appendAll({realm_name:E.name,zonegroup_name:C.name,default:d,master:u,zonegroup_endpoints:C.endpoints}),this.http.post(`${this.url}`,null,{params:N})}update(E,C,d,u,N,M,I){return this.http.put(`${this.url}/${C.name}`,{zonegroup_name:C.name,realm_name:E.name,new_zonegroup_name:d,default:u,master:N,zonegroup_endpoints:C.endpoints,placement_targets:C.placement_targets,remove_zones:M,add_zones:I})}list(){return this.http.get(`${this.url}`)}get(E){return this.http.get(`${this.url}/${E.name}`)}getAllZonegroupsInfo(){return this.http.get(`${this.url}/get_all_zonegroups_info`)}delete(E,C,d){let u=new a.HttpParams;return u=u.appendAll({zonegroup_name:E,delete_pools:C,pools:Array.from(d.values())}),this.http.delete(`${this.url}/${E}`,{params:u})}getZonegroupTree(E,C,d){let u={};return u.id=E.id,u.name=E.name,u.info=E,u.icon=l.FI.cubes,u.is_master=E.is_master,u.parent=d?d.name:"",u.is_default=E.id===C,u.type="zonegroup",u.endpoints=E.endpoints,u.master_zone=E.master_zone,u.zones=E.zones,u.placement_targets=E.placement_targets,u.default_placement=E.default_placement,0===u.endpoints.length&&(u.show_warning=!0,u.warning_message="Endpoints not configured"),u}static{this.\u0275fac=function(C){return new(C||m)(h.\u0275\u0275inject(a.HttpClient))}}static{this.\u0275prov=h.\u0275\u0275defineInjectable({token:m,factory:m.\u0275fac,providedIn:"root"})}}return m})()},11549:(q,y,s)=>{s.d(y,{h:()=>C});var a=s(36618),l=s(29841),h=s.n(l),R=s(50619),m=s(87536);let C=(()=>{class d{constructor(N){this.http=N,this.settings={}}getValues(N){return h().isArray(N)&&(N=N.join(",")),this.http.get(`api/settings?names=${N}`).pipe((0,R.map)(M=>{const I={};return h().forEach(M,O=>{h().set(I,O.name,O.value)}),I}))}ifSettingConfigured(N,M,I,O=!1){const f=this.settings[N];O||void 0===f?this.http.get(N).subscribe(g=>{this.settings[N]=this.getSettingsValue(g),this.ifSettingConfigured(N,M,I)},g=>{401!==g.status&&(this.settings[N]="")}):""!==f?M(f):I&&I()}disableSetting(N){this.settings[N]=""}getSettingsValue(N){return N.value||N.instance||""}validateGrafanaDashboardUrl(N){return this.http.get(`api/grafana/validation/${N}`)}getStandardSettings(){return this.http.get("ui-api/standard_settings")}static{this.\u0275fac=function(M){return new(M||d)(m.\u0275\u0275inject(a.HttpClient))}}static{this.\u0275prov=m.\u0275\u0275defineInjectable({token:d,factory:d.\u0275fac,providedIn:"root"})}}return d})()},36719:(q,y,s)=>{s.d(y,{D:()=>E});var a=s(36618),l=s(95631),R=s(50619),m=s(87536);let E=(()=>{class C{constructor(u){this.http=u}list(){return this.http.get("api/user")}delete(u){return this.http.delete(`api/user/${u}`)}get(u){return this.http.get(`api/user/${u}`)}create(u){return this.http.post("api/user",u)}update(u){return this.http.put(`api/user/${u.username}`,u)}changePassword(u,N,M){return this.http.post(`api/user/${u}/change_password`,{old_password:N,new_password:M})}validateUserName(u){return this.get(u).pipe((0,R.mapTo)(!0),(0,R.catchError)(N=>(N.preventDefault(),(0,l.of)(!1))))}validatePassword(u,N=null,M=null){return this.http.post("api/user/validate_password",{password:u,username:N,old_password:M})}static{this.\u0275fac=function(N){return new(N||C)(m.\u0275\u0275inject(a.HttpClient))}}static{this.\u0275prov=m.\u0275\u0275defineInjectable({token:C,factory:C.\u0275fac,providedIn:"root"})}}return C})()},32609:(q,y,s)=>{s.d(y,{c:()=>l});var a=s(29841),e=s.n(a);class l{static updateChanged(R,S){let m=!1;return Object.keys(S).forEach(v=>{const E=S[v];e().isEqual(E,R[v])||(R[v]=E,m=!0)}),m}static cdVersionHeader(R,S){return`application/vnd.ceph.api.v${R}.${S}+json`}}},35855:(q,y,s)=>{s.d(y,{_:()=>a});class a{propertyValue(l,h){const R=h??document.body;return getComputedStyle(R).getPropertyValue(`--${l}`)}}},25947:(q,y,s)=>{s.d(y,{D:()=>e});var a=s(3912);class e{constructor(h){this.ngZone=h}setExpandedRow(h){this.expandedRow=h}setTableRefreshTimeout(){clearTimeout(this.staleTimeout),this.ngZone.runOutsideAngular(()=>{this.staleTimeout=window.setTimeout(()=>{this.ngZone.run(()=>{this.tableStatus=new a.F("secondary",$localize`The user list data might be stale. If needed, you can manually reload it.`)})},1e4)})}}},2243:(q,y,s)=>{s.d(y,{m:()=>l});var a=s(29130),e=s(3912);class l extends e.F{constructor(R=a.k.ValueOk,S=""){switch(super(),R){case a.k.ValueOk:this.type="ghost",this.msg="";break;case a.k.ValueNone:this.type="primary",this.msg=(S?$localize`Retrieving data for ${S}.`:$localize`Retrieving data.`)+" "+$localize`Please wait...`;break;case a.k.ValueStale:this.type="secondary",this.msg=S?$localize`Displaying previously cached data for ${S}.`:$localize`Displaying previously cached data.`;break;case a.k.ValueException:this.type="danger",this.msg=(S?$localize`Could not load data for ${S}.`:$localize`Could not load data.`)+" "+$localize`Please check the cluster health.`}}}},3912:(q,y,s)=>{s.d(y,{F:()=>a});class a{constructor(l="ghost",h=""){this.type=l,this.msg=h}}},92805:(q,y,s)=>{s.d(y,{m:()=>I});var a=s(87536),l=s(46045),h=s(91974),S=s(90476),m=s(3600);const E=["content"],C=["actionTpl"],d=["*"];function u(O,f){1&O&&a.\u0275\u0275projection(0)}function N(O,f){if(1&O){const g=a.\u0275\u0275getCurrentView();a.\u0275\u0275elementStart(0,"button",5),a.\u0275\u0275listener("click",function(){a.\u0275\u0275restoreView(g);const A=a.\u0275\u0275nextContext(2);return a.\u0275\u0275resetView(A.onAction())}),a.\u0275\u0275i18n(1,2),a.\u0275\u0275elementEnd()}if(2&O){const g=a.\u0275\u0275nextContext(2);a.\u0275\u0275property("title",g.actionName),a.\u0275\u0275advance(),a.\u0275\u0275i18nExp(g.actionName),a.\u0275\u0275i18nApply(1)}}function M(O,f){if(1&O&&a.\u0275\u0275template(0,N,2,2,"button",4),2&O){const g=a.\u0275\u0275nextContext();a.\u0275\u0275property("ngIf",g.actionName)}}let I=(()=>{class O{constructor(){this.title="",this.showTitle=!0,this.size="normal",this.dismissible=!1,this.spacingClass="",this.actionName="",this.lowContrast=!0,this.variant="inline",this.dismissed=new a.EventEmitter,this.action=new a.EventEmitter,this.icons=l.FI}ngOnInit(){const g="danger"===this.type?"error":this.type;switch(this.type){case"warning":this.title=this.title||$localize`Warning`;break;case"error":this.title=this.title||$localize`Error`;break;case"info":this.title=this.title||$localize`Information`;break;case"success":this.title=this.title||$localize`Success`;break;case"danger":this.title=this.title||$localize`Danger`}this.notificationContent={type:g,template:this.alertContent,actionsTemplate:this.actionTpl,showClose:this.dismissible,title:this.showTitle?this.title:"",lowContrast:this.lowContrast,variant:this.variant}}onClose(){this.dismissed.emit()}onAction(){this.action.emit()}static{this.\u0275fac=function(P){return new(P||O)}}static{this.\u0275cmp=a.\u0275\u0275defineComponent({type:O,selectors:[["cd-alert-panel"]],viewQuery:function(P,A){if(1&P&&(a.\u0275\u0275viewQuery(E,7),a.\u0275\u0275viewQuery(C,7)),2&P){let _;a.\u0275\u0275queryRefresh(_=a.\u0275\u0275loadQuery())&&(A.alertContent=_.first),a.\u0275\u0275queryRefresh(_=a.\u0275\u0275loadQuery())&&(A.actionTpl=_.first)}},inputs:{title:"title",type:"type",showTitle:"showTitle",size:"size",dismissible:"dismissible",spacingClass:"spacingClass",actionName:"actionName",lowContrast:"lowContrast",variant:"variant"},outputs:{dismissed:"dismissed",action:"action"},ngContentSelectors:d,decls:5,vars:2,consts:()=>{let g;return g=$localize`:␟a16fd7107343c2d50b1fbde71b4e6ceadaeda635␟5602924004056009780:${"\ufffd0\ufffd"}:INTERPOLATION: `,[["content",""],["actionTpl",""],g,[1,"mb-1","content-theme",3,"close","ngClass","notificationObj"],["cdsActionableButton","","cdsButton","ghost","size","md",3,"title","click",4,"ngIf"],["cdsActionableButton","","cdsButton","ghost","size","md",3,"click","title"]]},template:function(P,A){if(1&P){const _=a.\u0275\u0275getCurrentView();a.\u0275\u0275projectionDef(),a.\u0275\u0275elementStart(0,"cds-actionable-notification",3),a.\u0275\u0275listener("close",function(){return a.\u0275\u0275restoreView(_),a.\u0275\u0275resetView(A.onClose())}),a.\u0275\u0275elementEnd(),a.\u0275\u0275template(1,u,1,0,"ng-template",null,0,a.\u0275\u0275templateRefExtractor)(3,M,1,1,"ng-template",null,1,a.\u0275\u0275templateRefExtractor)}2&P&&a.\u0275\u0275property("ngClass",A.spacingClass)("notificationObj",A.notificationContent)},dependencies:[h.NgClass,h.NgIf,S.S,m.Button,m.ActionableButton,m.ActionableNotification],styles:[".alert-panel-icon[_ngcontent-%COMP%]{padding-right:.5em;vertical-align:top}.alert-panel-title[_ngcontent-%COMP%]{font-weight:700}.alert[_ngcontent-%COMP%]{margin-bottom:0}cds-actionable-notification[_ngcontent-%COMP%]{max-width:100%}"]})}}return O})()},33117:(q,y,s)=>{s.d(y,{X:()=>u});var a=s(91974),l=s(87536),R=s(76218),m=s(54372),v=s(90476),E=s(3600);const d=(N,M)=>({"w-100":N,"w-50 float-end":M});let u=(()=>{class N{constructor(I,O,f){this.location=I,this.actionLabels=O,this.route=f,this.backAction=new l.EventEmitter,this.disabled=!1,this.modalForm=!1,this.showSubmit=!1,this.hasModalOutlet=!1}ngOnInit(){this.name=this.name||this.actionLabels.CANCEL,this.hasModalOutlet="modal"===this.route.outlet}back(){this.disabled||(0===this.backAction.observers.length||this.hasModalOutlet?this.location.back():this.backAction.emit())}static{this.\u0275fac=function(O){return new(O||N)(l.\u0275\u0275directiveInject(a.Location),l.\u0275\u0275directiveInject(m.Ss),l.\u0275\u0275directiveInject(R.ActivatedRoute))}}static{this.\u0275cmp=l.\u0275\u0275defineComponent({type:N,selectors:[["cd-back-button"]],inputs:{name:"name",disabled:"disabled",modalForm:"modalForm",showSubmit:"showSubmit"},outputs:{backAction:"backAction"},decls:2,vars:6,consts:[["aria-label","Back","type","button","size","lg","cdsButton","secondary",1,"w-100","tc_backButton",3,"click","ngClass","disabled"]],template:function(O,f){1&O&&(l.\u0275\u0275elementStart(0,"button",0),l.\u0275\u0275listener("click",function(){return f.back()}),l.\u0275\u0275text(1),l.\u0275\u0275elementEnd()),2&O&&(l.\u0275\u0275property("ngClass",l.\u0275\u0275pureFunction2(3,d,f.modalForm&&f.showSubmit,f.modalForm&&!f.showSubmit))("disabled",f.disabled),l.\u0275\u0275advance(),l.\u0275\u0275textInterpolate1(" ",f.name,"\n"))},dependencies:[a.NgClass,v.S,E.Button]})}}return N})()},78845:(q,y,s)=>{s.d(y,{C:()=>Cn});var a=s(46045),e=function(W){return W.memory="Memory",W.storage="Drive",W.processors="CPU",W.network="Network",W.power="Power supply",W.fans="Fan module",W}(e||{}),l=s(87536),h=s(91974),R=s(76218),S=s(3600),m=s(46765),v=s(63284);const E=(W,Re)=>[W,Re];function C(W,Re){if(1&W&&l.\u0275\u0275i18n(0,8,1),2&W){const J=l.\u0275\u0275nextContext(3);l.\u0275\u0275i18nExp(J.title),l.\u0275\u0275i18nApply(0)}}function d(W,Re){if(1&W&&l.\u0275\u0275i18n(0,8,2),2&W){const J=l.\u0275\u0275nextContext(3);l.\u0275\u0275i18nExp(J.title),l.\u0275\u0275i18nApply(0)}}function u(W,Re){if(1&W&&l.\u0275\u0275i18n(0,8,3),2&W){const J=l.\u0275\u0275nextContext(3);l.\u0275\u0275i18nExp(J.title),l.\u0275\u0275i18nApply(0)}}function N(W,Re){if(1&W&&(l.\u0275\u0275elementStart(0,"a",13),l.\u0275\u0275i18nStart(1,8),l.\u0275\u0275template(2,C,1,1,"ng-template",22)(3,d,1,1,"ng-template",23)(4,u,1,1,"ng-template",24),l.\u0275\u0275i18nEnd(),l.\u0275\u0275elementEnd()),2&W){const J=l.\u0275\u0275nextContext(2);l.\u0275\u0275property("routerLink",J.link)("ngPlural",J.total),l.\u0275\u0275advance(4),l.\u0275\u0275i18nExp(J.total),l.\u0275\u0275i18nApply(1)}}function M(W,Re){if(1&W&&l.\u0275\u0275template(0,N,5,3,"a",21),2&W){const J=l.\u0275\u0275nextContext(),ut=l.\u0275\u0275reference(25);l.\u0275\u0275property("ngIf",J.link&&J.total>0)("ngIfElse",ut)}}function I(W,Re){if(1&W&&(l.\u0275\u0275elementStart(0,"a",14),l.\u0275\u0275text(1),l.\u0275\u0275elementEnd()),2&W){const J=l.\u0275\u0275nextContext(2);l.\u0275\u0275property("routerLink",J.link),l.\u0275\u0275advance(),l.\u0275\u0275textInterpolate1("",J.title," ")}}function O(W,Re){if(1&W&&l.\u0275\u0275template(0,I,2,2,"a",25),2&W){const J=l.\u0275\u0275nextContext(),ut=l.\u0275\u0275reference(25);l.\u0275\u0275property("ngIf",J.link)("ngIfElse",ut)}}function f(W,Re){1&W&&l.\u0275\u0275elementContainer(0)}function g(W,Re){if(1&W&&(l.\u0275\u0275elementContainerStart(0),l.\u0275\u0275template(1,f,1,0,"ng-container",26),l.\u0275\u0275elementContainerEnd()),2&W){l.\u0275\u0275nextContext();const J=l.\u0275\u0275reference(19);l.\u0275\u0275advance(),l.\u0275\u0275property("ngTemplateOutlet",J)}}function P(W,Re){1&W&&l.\u0275\u0275elementContainer(0)}function A(W,Re){if(1&W&&(l.\u0275\u0275elementContainerStart(0),l.\u0275\u0275template(1,P,1,0,"ng-container",26),l.\u0275\u0275elementContainerEnd()),2&W){l.\u0275\u0275nextContext();const J=l.\u0275\u0275reference(17);l.\u0275\u0275advance(),l.\u0275\u0275property("ngTemplateOutlet",J)}}function _(W,Re){1&W&&l.\u0275\u0275elementContainer(0)}function B(W,Re){if(1&W&&(l.\u0275\u0275elementContainerStart(0),l.\u0275\u0275template(1,_,1,0,"ng-container",26),l.\u0275\u0275elementContainerEnd()),2&W){l.\u0275\u0275nextContext();const J=l.\u0275\u0275reference(21);l.\u0275\u0275advance(),l.\u0275\u0275property("ngTemplateOutlet",J)}}function w(W,Re){1&W&&l.\u0275\u0275elementContainer(0)}function ie(W,Re){if(1&W&&(l.\u0275\u0275elementContainerStart(0),l.\u0275\u0275template(1,w,1,0,"ng-container",26),l.\u0275\u0275elementContainerEnd()),2&W){l.\u0275\u0275nextContext();const J=l.\u0275\u0275reference(15);l.\u0275\u0275advance(),l.\u0275\u0275property("ngTemplateOutlet",J)}}function Y(W,Re){if(1&W){const J=l.\u0275\u0275getCurrentView();l.\u0275\u0275elementStart(0,"span",27)(1,"a",28),l.\u0275\u0275listener("click",function(){l.\u0275\u0275restoreView(J);const ht=l.\u0275\u0275nextContext();return l.\u0275\u0275resetView(ht.toggleDropdown())}),l.\u0275\u0275elementEnd()()}if(2&W){const J=l.\u0275\u0275nextContext();l.\u0275\u0275advance(),l.\u0275\u0275attribute("aria-expanded",J.dropdownToggled)}}function V(W,Re){1&W&&l.\u0275\u0275elementContainer(0)}function L(W,Re){if(1&W&&(l.\u0275\u0275elementStart(0,"div"),l.\u0275\u0275element(1,"hr"),l.\u0275\u0275template(2,V,1,0,"ng-container",26),l.\u0275\u0275elementEnd()),2&W){l.\u0275\u0275nextContext();const J=l.\u0275\u0275reference(27);l.\u0275\u0275advance(2),l.\u0275\u0275property("ngTemplateOutlet",J)}}function Q(W,Re){1&W&&l.\u0275\u0275elementContainer(0)}function me(W,Re){if(1&W&&l.\u0275\u0275template(0,Q,1,0,"ng-container",26),2&W){l.\u0275\u0275nextContext(2);const J=l.\u0275\u0275reference(23);l.\u0275\u0275property("ngTemplateOutlet",J)}}function Ie(W,Re){if(1&W&&(l.\u0275\u0275elementStart(0,"span"),l.\u0275\u0275text(1),l.\u0275\u0275elementEnd()),2&W){const J=l.\u0275\u0275nextContext(4);l.\u0275\u0275advance(),l.\u0275\u0275textInterpolate1(" ",J.data.success," ")}}function He(W,Re){if(1&W&&(l.\u0275\u0275elementStart(0,"span"),l.\u0275\u0275text(1),l.\u0275\u0275elementEnd()),2&W){const J=l.\u0275\u0275nextContext(4);l.\u0275\u0275advance(),l.\u0275\u0275textInterpolate1(" ",null==J.data.categoryPgAmount?null:J.data.categoryPgAmount.clean," ")}}function Ae(W,Re){if(1&W&&(l.\u0275\u0275elementStart(0,"span"),l.\u0275\u0275template(1,Ie,2,1,"span",20)(2,He,2,1,"span",20),l.\u0275\u0275element(3,"cd-icon",30),l.\u0275\u0275elementEnd()),2&W){const J=l.\u0275\u0275nextContext(3);l.\u0275\u0275advance(),l.\u0275\u0275property("ngIf",J.data.success||0===J.data.success&&0===J.data.total),l.\u0275\u0275advance(),l.\u0275\u0275property("ngIf",null==J.data.categoryPgAmount?null:J.data.categoryPgAmount.clean)}}function We(W,Re){if(1&W&&(l.\u0275\u0275elementStart(0,"span"),l.\u0275\u0275text(1),l.\u0275\u0275elementEnd()),2&W){const J=l.\u0275\u0275nextContext(4);l.\u0275\u0275advance(),l.\u0275\u0275textInterpolate1(" ",J.data.info," ")}}function te(W,Re){if(1&W&&(l.\u0275\u0275elementStart(0,"span",31),l.\u0275\u0275template(1,We,2,1,"span",20),l.\u0275\u0275element(2,"cd-icon",32),l.\u0275\u0275elementEnd()),2&W){const J=l.\u0275\u0275nextContext(3);l.\u0275\u0275advance(),l.\u0275\u0275property("ngIf",J.data.info)}}function _e(W,Re){if(1&W&&(l.\u0275\u0275elementStart(0,"span"),l.\u0275\u0275text(1),l.\u0275\u0275elementEnd()),2&W){const J=l.\u0275\u0275nextContext(4);l.\u0275\u0275advance(),l.\u0275\u0275textInterpolate1(" ",J.data.warn," ")}}function oe(W,Re){if(1&W&&(l.\u0275\u0275elementStart(0,"span"),l.\u0275\u0275text(1),l.\u0275\u0275elementEnd()),2&W){const J=l.\u0275\u0275nextContext(4);l.\u0275\u0275advance(),l.\u0275\u0275textInterpolate1(" ",null==J.data.categoryPgAmount?null:J.data.categoryPgAmount.warning," ")}}function de(W,Re){if(1&W&&(l.\u0275\u0275elementStart(0,"span",31),l.\u0275\u0275template(1,_e,2,1,"span",20)(2,oe,2,1,"span",20),l.\u0275\u0275element(3,"cd-icon",33),l.\u0275\u0275elementEnd()),2&W){const J=l.\u0275\u0275nextContext(3);l.\u0275\u0275advance(),l.\u0275\u0275property("ngIf",J.data.warn),l.\u0275\u0275advance(),l.\u0275\u0275property("ngIf",null==J.data.categoryPgAmount?null:J.data.categoryPgAmount.warning)}}function ue(W,Re){if(1&W&&(l.\u0275\u0275elementStart(0,"span"),l.\u0275\u0275text(1),l.\u0275\u0275elementEnd()),2&W){const J=l.\u0275\u0275nextContext(4);l.\u0275\u0275advance(),l.\u0275\u0275textInterpolate1(" ",J.data.error," ")}}function T(W,Re){if(1&W&&(l.\u0275\u0275elementStart(0,"span"),l.\u0275\u0275text(1),l.\u0275\u0275elementEnd()),2&W){const J=l.\u0275\u0275nextContext(4);l.\u0275\u0275advance(),l.\u0275\u0275textInterpolate1(" ",null==J.data.categoryPgAmount?null:J.data.categoryPgAmount.unknown," ")}}function K(W,Re){if(1&W&&(l.\u0275\u0275elementStart(0,"span",31),l.\u0275\u0275template(1,ue,2,1,"span",20)(2,T,2,1,"span",20),l.\u0275\u0275element(3,"cd-icon",34),l.\u0275\u0275elementEnd()),2&W){const J=l.\u0275\u0275nextContext(3);l.\u0275\u0275advance(),l.\u0275\u0275property("ngIf",J.data.error),l.\u0275\u0275advance(),l.\u0275\u0275property("ngIf",null==J.data.categoryPgAmount?null:J.data.categoryPgAmount.unknown)}}function ce(W,Re){if(1&W&&(l.\u0275\u0275elementStart(0,"span"),l.\u0275\u0275text(1),l.\u0275\u0275elementEnd()),2&W){const J=l.\u0275\u0275nextContext(4);l.\u0275\u0275advance(),l.\u0275\u0275textInterpolate1(" ",null==J.data.categoryPgAmount?null:J.data.categoryPgAmount.working," ")}}function fe(W,Re){if(1&W&&(l.\u0275\u0275elementStart(0,"span",31),l.\u0275\u0275template(1,ce,2,1,"span",20),l.\u0275\u0275element(2,"i",35),l.\u0275\u0275elementEnd()),2&W){const J=l.\u0275\u0275nextContext(3);l.\u0275\u0275advance(),l.\u0275\u0275property("ngIf",null==J.data.categoryPgAmount?null:J.data.categoryPgAmount.working),l.\u0275\u0275advance(),l.\u0275\u0275property("ngClass",l.\u0275\u0275pureFunction2(2,E,J.icons.spinner,J.icons.spin))}}function Te(W,Re){if(1&W&&l.\u0275\u0275template(0,Ae,4,2,"span",20)(1,te,3,1,"span",29)(2,de,4,2,"span",29)(3,K,4,2,"span",29)(4,fe,3,5,"span",29),2&W){const J=l.\u0275\u0275nextContext(2);l.\u0275\u0275property("ngIf",J.data.success||(null==J.data.categoryPgAmount?null:J.data.categoryPgAmount.clean)||0===J.data.success&&0===J.data.total),l.\u0275\u0275advance(),l.\u0275\u0275property("ngIf",J.data.info),l.\u0275\u0275advance(),l.\u0275\u0275property("ngIf",J.data.warn||(null==J.data.categoryPgAmount?null:J.data.categoryPgAmount.warning)),l.\u0275\u0275advance(),l.\u0275\u0275property("ngIf",J.data.error||(null==J.data.categoryPgAmount?null:J.data.categoryPgAmount.unknown)),l.\u0275\u0275advance(),l.\u0275\u0275property("ngIf",null==J.data.categoryPgAmount?null:J.data.categoryPgAmount.working)}}function Se(W,Re){if(1&W&&l.\u0275\u0275template(0,me,1,1,"ng-container")(1,Te,5,5),2&W){const J=l.\u0275\u0275nextContext();l.\u0275\u0275conditional(null===J.data?0:1)}}function Ge(W,Re){1&W&&l.\u0275\u0275elementContainer(0)}function Ye(W,Re){if(1&W&&l.\u0275\u0275template(0,Ge,1,0,"ng-container",26),2&W){l.\u0275\u0275nextContext(2);const J=l.\u0275\u0275reference(23);l.\u0275\u0275property("ngTemplateOutlet",J)}}function ct(W,Re){if(1&W&&(l.\u0275\u0275elementStart(0,"span"),l.\u0275\u0275text(1),l.\u0275\u0275element(2,"cd-icon",30),l.\u0275\u0275elementEnd()),2&W){const J=l.\u0275\u0275nextContext(3);l.\u0275\u0275advance(),l.\u0275\u0275textInterpolate1(" ",J.data.up," ")}}function rt(W,Re){if(1&W&&(l.\u0275\u0275elementStart(0,"span"),l.\u0275\u0275text(1),l.\u0275\u0275elementStart(2,"span",36),l.\u0275\u0275text(3," up "),l.\u0275\u0275elementEnd()()),2&W){const J=l.\u0275\u0275nextContext(3);l.\u0275\u0275advance(),l.\u0275\u0275textInterpolate1(" ",J.data.up," ")}}function De(W,Re){if(1&W&&(l.\u0275\u0275elementStart(0,"span",31),l.\u0275\u0275text(1),l.\u0275\u0275elementStart(2,"span",36),l.\u0275\u0275text(3," in "),l.\u0275\u0275elementEnd()()),2&W){const J=l.\u0275\u0275nextContext(3);l.\u0275\u0275advance(),l.\u0275\u0275textInterpolate1(" ",J.data.in," ")}}function ze(W,Re){if(1&W&&(l.\u0275\u0275elementStart(0,"span",31),l.\u0275\u0275text(1),l.\u0275\u0275elementStart(2,"span",37),l.\u0275\u0275text(3," down "),l.\u0275\u0275elementEnd()()),2&W){const J=l.\u0275\u0275nextContext(3);l.\u0275\u0275advance(),l.\u0275\u0275textInterpolate1(" ",J.data.down," ")}}function Et(W,Re){if(1&W&&(l.\u0275\u0275elementStart(0,"span",31),l.\u0275\u0275text(1),l.\u0275\u0275elementStart(2,"span",37),l.\u0275\u0275text(3," out "),l.\u0275\u0275elementEnd()()),2&W){const J=l.\u0275\u0275nextContext(3);l.\u0275\u0275advance(),l.\u0275\u0275textInterpolate1(" ",J.data.out," ")}}function Oe(W,Re){if(1&W&&(l.\u0275\u0275elementStart(0,"span",31),l.\u0275\u0275text(1),l.\u0275\u0275elementStart(2,"span",38),l.\u0275\u0275text(3," nearfull"),l.\u0275\u0275elementEnd()()),2&W){const J=l.\u0275\u0275nextContext(3);l.\u0275\u0275advance(),l.\u0275\u0275textInterpolate1(" ",J.data.nearfull," ")}}function pt(W,Re){if(1&W&&(l.\u0275\u0275elementStart(0,"span",31),l.\u0275\u0275text(1),l.\u0275\u0275elementStart(2,"span",39),l.\u0275\u0275text(3," full "),l.\u0275\u0275elementEnd()()),2&W){const J=l.\u0275\u0275nextContext(3);l.\u0275\u0275advance(),l.\u0275\u0275textInterpolate1(" ",J.data.full," ")}}function ye(W,Re){if(1&W&&l.\u0275\u0275template(0,ct,3,1,"span",20)(1,rt,4,1,"span",20)(2,De,4,1,"span",29)(3,ze,4,1,"span",29)(4,Et,4,1,"span",29)(5,Oe,4,1,"span",29)(6,pt,4,1,"span",29),2&W){const J=l.\u0275\u0275nextContext(2);l.\u0275\u0275property("ngIf",J.data.up===J.data.in),l.\u0275\u0275advance(),l.\u0275\u0275property("ngIf",J.data.up!==J.data.in),l.\u0275\u0275advance(),l.\u0275\u0275property("ngIf",J.data.in!==J.data.up),l.\u0275\u0275advance(),l.\u0275\u0275property("ngIf",J.data.down),l.\u0275\u0275advance(),l.\u0275\u0275property("ngIf",J.data.out),l.\u0275\u0275advance(),l.\u0275\u0275property("ngIf",J.data.nearfull),l.\u0275\u0275advance(),l.\u0275\u0275property("ngIf",J.data.full)}}function je(W,Re){if(1&W&&l.\u0275\u0275template(0,Ye,1,1,"ng-container")(1,ye,7,7),2&W){const J=l.\u0275\u0275nextContext();l.\u0275\u0275conditional(null===J.data?0:1)}}function ot(W,Re){1&W&&l.\u0275\u0275elementContainer(0)}function tt(W,Re){if(1&W&&l.\u0275\u0275template(0,ot,1,0,"ng-container",26),2&W){l.\u0275\u0275nextContext(2);const J=l.\u0275\u0275reference(23);l.\u0275\u0275property("ngTemplateOutlet",J)}}function Ft(W,Re){1&W&&l.\u0275\u0275element(0,"cd-icon",30)}function bt(W,Re){if(1&W&&(l.\u0275\u0275elementStart(0,"span",31),l.\u0275\u0275text(1),l.\u0275\u0275element(2,"cd-icon",34),l.\u0275\u0275elementEnd()),2&W){const J=l.\u0275\u0275nextContext(3);l.\u0275\u0275advance(),l.\u0275\u0275textInterpolate1(" ",null==J.data?null:J.data.down," ")}}function wt(W,Re){if(1&W&&(l.\u0275\u0275elementStart(0,"span"),l.\u0275\u0275text(1),l.\u0275\u0275template(2,Ft,1,0,"cd-icon",40),l.\u0275\u0275elementEnd(),l.\u0275\u0275template(3,bt,3,1,"span",29)),2&W){const J=l.\u0275\u0275nextContext(2);l.\u0275\u0275advance(),l.\u0275\u0275textInterpolate1(" ",null==J.data?null:J.data.up," "),l.\u0275\u0275advance(),l.\u0275\u0275property("ngIf",(null==J.data?null:J.data.up)||0===(null==J.data?null:J.data.up)),l.\u0275\u0275advance(),l.\u0275\u0275property("ngIf",null==J.data?null:J.data.down)}}function zt(W,Re){if(1&W&&l.\u0275\u0275template(0,tt,1,1,"ng-container")(1,wt,4,3),2&W){const J=l.\u0275\u0275nextContext();l.\u0275\u0275conditional(null===J.data||null===J.total?0:1)}}function Xt(W,Re){if(1&W&&(l.\u0275\u0275elementStart(0,"span"),l.\u0275\u0275text(1),l.\u0275\u0275element(2,"cd-icon",30),l.\u0275\u0275elementEnd()),2&W){const J=l.\u0275\u0275nextContext(3);l.\u0275\u0275advance(),l.\u0275\u0275textInterpolate1(" ",J.data," ")}}function kt(W,Re){if(1&W&&l.\u0275\u0275template(0,Xt,3,1,"span",41),2&W){l.\u0275\u0275nextContext();const J=l.\u0275\u0275reference(3),ut=l.\u0275\u0275nextContext();l.\u0275\u0275property("ngIf",!ut.dropdownTotalError)("ngIfElse",J)}}function jt(W,Re){1&W&&l.\u0275\u0275elementContainer(0)}function Tt(W,Re){if(1&W&&l.\u0275\u0275template(0,jt,1,0,"ng-container",26),2&W){l.\u0275\u0275nextContext(2);const J=l.\u0275\u0275reference(23);l.\u0275\u0275property("ngTemplateOutlet",J)}}function gt(W,Re){if(1&W&&(l.\u0275\u0275elementStart(0,"span"),l.\u0275\u0275text(1),l.\u0275\u0275element(2,"cd-icon",30),l.\u0275\u0275elementEnd()),2&W){const J=l.\u0275\u0275nextContext(3);l.\u0275\u0275advance(),l.\u0275\u0275textInterpolate1(" ",J.data-J.dropdownTotalError," ")}}function it(W,Re){if(1&W&&(l.\u0275\u0275template(0,gt,3,1,"span",20),l.\u0275\u0275elementStart(1,"span"),l.\u0275\u0275text(2),l.\u0275\u0275element(3,"cd-icon",34),l.\u0275\u0275elementEnd()),2&W){const J=l.\u0275\u0275nextContext(2);l.\u0275\u0275property("ngIf",J.data-J.dropdownTotalError>0),l.\u0275\u0275advance(2),l.\u0275\u0275textInterpolate1(" ",J.dropdownTotalError," ")}}function Ke(W,Re){if(1&W&&l.\u0275\u0275template(0,kt,1,2,"span")(1,Tt,1,1,"ng-container")(2,it,4,2,"ng-template",null,7,l.\u0275\u0275templateRefExtractor),2&W){const J=l.\u0275\u0275nextContext();l.\u0275\u0275conditional(0===J.data||J.data?0:1)}}function dt(W,Re){1&W&&l.\u0275\u0275element(0,"cds-inline-loading")}function Ct(W,Re){if(1&W&&l.\u0275\u0275text(0),2&W){const J=l.\u0275\u0275nextContext(4);l.\u0275\u0275textInterpolate(J.title)}}function Wt(W,Re){if(1&W&&l.\u0275\u0275text(0),2&W){const J=l.\u0275\u0275nextContext(4);l.\u0275\u0275textInterpolate(J.title)}}function en(W,Re){if(1&W&&l.\u0275\u0275text(0),2&W){const J=l.\u0275\u0275nextContext(4);l.\u0275\u0275textInterpolate1("",J.title,"s")}}function yt(W,Re){if(1&W&&(l.\u0275\u0275elementStart(0,"span",42),l.\u0275\u0275text(1),l.\u0275\u0275template(2,Ct,1,1,"ng-template",22)(3,Wt,1,1,"ng-template",23)(4,en,1,1,"ng-template",24),l.\u0275\u0275elementEnd()),2&W){const J=l.\u0275\u0275nextContext(3);l.\u0275\u0275property("ngPlural",J.total),l.\u0275\u0275advance(),l.\u0275\u0275textInterpolate1(" ",J.total," ")}}function mt(W,Re){if(1&W&&l.\u0275\u0275template(0,yt,5,2,"span",43),2&W){const J=l.\u0275\u0275nextContext(2);l.\u0275\u0275property("ngIf",J.total||0===J.total)}}function Gt(W,Re){if(1&W&&(l.\u0275\u0275elementStart(0,"span"),l.\u0275\u0275text(1),l.\u0275\u0275elementEnd()),2&W){const J=l.\u0275\u0275nextContext(2);l.\u0275\u0275advance(),l.\u0275\u0275textInterpolate(J.title)}}function Lt(W,Re){if(1&W&&l.\u0275\u0275template(0,mt,1,1,"span",42)(1,Gt,2,1,"span"),2&W){const J=l.\u0275\u0275nextContext();l.\u0275\u0275conditional(null!==J.data||J.total?0:1)}}function Pt(W,Re){if(1&W&&l.\u0275\u0275i18n(0,9,1),2&W){const J=l.\u0275\u0275nextContext(2).$implicit,ut=l.\u0275\u0275nextContext(2);l.\u0275\u0275i18nExp(ut.hwNames[J.key]),l.\u0275\u0275i18nApply(0)}}function En(W,Re){if(1&W&&l.\u0275\u0275i18n(0,9,2),2&W){const J=l.\u0275\u0275nextContext(2).$implicit,ut=l.\u0275\u0275nextContext(2);l.\u0275\u0275i18nExp(ut.hwNames[J.key]),l.\u0275\u0275i18nApply(0)}}function lt(W,Re){if(1&W&&(l.\u0275\u0275i18n(0,9,3),l.\u0275\u0275pipe(1,"pluralize")),2&W){const J=l.\u0275\u0275nextContext(2).$implicit,ut=l.\u0275\u0275nextContext(2);l.\u0275\u0275advance(),l.\u0275\u0275i18nExp(l.\u0275\u0275pipeBind1(1,1,ut.hwNames[J.key])),l.\u0275\u0275i18nApply(0)}}function vn(W,Re){if(1&W&&(l.\u0275\u0275elementStart(0,"span",42),l.\u0275\u0275i18nStart(1,9),l.\u0275\u0275template(2,Pt,1,1,"ng-template",22)(3,En,1,1,"ng-template",23)(4,lt,2,3,"ng-template",24),l.\u0275\u0275i18nEnd(),l.\u0275\u0275elementEnd()),2&W){const J=l.\u0275\u0275nextContext().$implicit;l.\u0275\u0275property("ngPlural",J.value.total),l.\u0275\u0275advance(4),l.\u0275\u0275i18nExp(J.value.total),l.\u0275\u0275i18nApply(1)}}function Kt(W,Re){1&W&&l.\u0275\u0275element(0,"cd-icon",30)}function dn(W,Re){if(1&W&&(l.\u0275\u0275elementStart(0,"span",49),l.\u0275\u0275text(1),l.\u0275\u0275element(2,"cd-icon",34),l.\u0275\u0275elementEnd()),2&W){const J=l.\u0275\u0275nextContext().$implicit;l.\u0275\u0275advance(),l.\u0275\u0275textInterpolate1(" ",J.value.error," ")}}function Nt(W,Re){if(1&W&&(l.\u0275\u0275elementContainerStart(0),l.\u0275\u0275elementStart(1,"li",10)(2,"div",45)(3,"div",46),l.\u0275\u0275template(4,vn,5,2,"span",43),l.\u0275\u0275elementEnd(),l.\u0275\u0275elementStart(5,"span",47),l.\u0275\u0275text(6),l.\u0275\u0275template(7,Kt,1,0,"cd-icon",40),l.\u0275\u0275elementEnd(),l.\u0275\u0275template(8,dn,3,1,"span",48),l.\u0275\u0275elementEnd()(),l.\u0275\u0275elementContainerEnd()),2&W){const J=Re.$implicit;l.\u0275\u0275advance(4),l.\u0275\u0275property("ngIf",J.value.total),l.\u0275\u0275advance(),l.\u0275\u0275property("ngClass",J.value.error?"me-2":"me-4"),l.\u0275\u0275advance(),l.\u0275\u0275textInterpolate1(" ",J.value.ok," "),l.\u0275\u0275advance(),l.\u0275\u0275property("ngIf",J.value.ok),l.\u0275\u0275advance(),l.\u0275\u0275property("ngIf",J.value.error)}}function gn(W,Re){if(1&W&&(l.\u0275\u0275template(0,Nt,9,5,"ng-container",44),l.\u0275\u0275pipe(1,"keyvalue")),2&W){const J=l.\u0275\u0275nextContext();l.\u0275\u0275property("ngForOf",l.\u0275\u0275pipeBind1(1,1,null==J.dropdownData?null:J.dropdownData.total.category))}}let Cn=(()=>{class W{constructor(){this.data=null,this.summaryType="default",this.hwNames=e,this.icons=a.FI,this.total=null,this.dropdownTotalError=0,this.dropdownToggled=!1}ngOnChanges(){this.total=this.data?.total||0===this.data?.total?this.data?.total:"iscsi"===this.summaryType?this.data?.up+this.data?.down:this.data,this.dropdownData&&"Host"==this.title&&(this.dropdownTotalError=this.dropdownData.host.flawed)}toggleDropdown(){this.dropdownToggled=!this.dropdownToggled}static{this.\u0275fac=function(ut){return new(ut||W)}}static{this.\u0275cmp=l.\u0275\u0275defineComponent({type:W,selectors:[["cd-card-row"]],inputs:{title:"title",link:"link",data:"data",summaryType:"summaryType",dropdownData:"dropdownData"},features:[l.\u0275\u0275NgOnChangesFeature],decls:28,vars:7,consts:()=>{let J,ut;return J=$localize`:␟ad042f49beadf98e10b814dc6a328face505dd6c␟4802629618149945562: ${"\ufffd0\ufffd"}:INTERPOLATION: ${"\ufffd*2:1\ufffd"}:START_TAG_NG_TEMPLATE:${"[\ufffd0:1\ufffd|\ufffd0:2\ufffd|\ufffd0:3\ufffd]"}:INTERPOLATION_1:${"[\ufffd/*2:1\ufffd|\ufffd/*3:2\ufffd|\ufffd/*4:3\ufffd]"}:CLOSE_TAG_NG_TEMPLATE:${"\ufffd*3:2\ufffd"}:START_TAG_NG_TEMPLATE_1:${"[\ufffd0:1\ufffd|\ufffd0:2\ufffd|\ufffd0:3\ufffd]"}:INTERPOLATION_1:${"[\ufffd/*2:1\ufffd|\ufffd/*3:2\ufffd|\ufffd/*4:3\ufffd]"}:CLOSE_TAG_NG_TEMPLATE:${"\ufffd*4:3\ufffd"}:START_TAG_NG_TEMPLATE_2:${"[\ufffd0:1\ufffd|\ufffd0:2\ufffd|\ufffd0:3\ufffd]"}:INTERPOLATION_1:s${"[\ufffd/*2:1\ufffd|\ufffd/*3:2\ufffd|\ufffd/*4:3\ufffd]"}:CLOSE_TAG_NG_TEMPLATE:`,J=l.\u0275\u0275i18nPostprocess(J),ut=$localize`:␟cce9315b407dc5aea4235b133abebc0a229db6f8␟6099484129903853246: ${"\ufffd0\ufffd"}:INTERPOLATION: ${"\ufffd*2:1\ufffd"}:START_TAG_NG_TEMPLATE:${"[\ufffd0:1\ufffd|\ufffd0:2\ufffd]"}:INTERPOLATION_1:${"[\ufffd/*2:1\ufffd|\ufffd/*3:2\ufffd|\ufffd/*4:3\ufffd]"}:CLOSE_TAG_NG_TEMPLATE:${"\ufffd*3:2\ufffd"}:START_TAG_NG_TEMPLATE_1:${"[\ufffd0:1\ufffd|\ufffd0:2\ufffd]"}:INTERPOLATION_1:${"[\ufffd/*2:1\ufffd|\ufffd/*3:2\ufffd|\ufffd/*4:3\ufffd]"}:CLOSE_TAG_NG_TEMPLATE:${"\ufffd*4:3\ufffd"}:START_TAG_NG_TEMPLATE_2:${"\ufffd0:3\ufffd"}:INTERPOLATION_2:${"[\ufffd/*2:1\ufffd|\ufffd/*3:2\ufffd|\ufffd/*4:3\ufffd]"}:CLOSE_TAG_NG_TEMPLATE:`,ut=l.\u0275\u0275i18nPostprocess(ut),[["defaultSummary",""],["osdSummary",""],["iscsiSummary",""],["simplifiedSummary",""],["loadingTpl",""],["noLinkTitle",""],["dropdownTemplate",""],["showErrorNum",""],J,ut,[1,"list-group-item"],[1,"d-flex","pl-1","pb-2","pt-2","position-relative"],[1,"ms-4","me-auto"],[3,"routerLink","ngPlural"],[3,"routerLink"],[1,"me-4"],[3,"ngSwitch"],[4,"ngSwitchCase"],[4,"ngSwitchDefault"],["class","position-absolute end-0 me-2",4,"ngIf"],[4,"ngIf"],[3,"routerLink","ngPlural",4,"ngIf","ngIfElse"],["ngPluralCase","=0"],["ngPluralCase","=1"],["ngPluralCase","other"],[3,"routerLink",4,"ngIf","ngIfElse"],[4,"ngTemplateOutlet"],[1,"position-absolute","end-0","me-2"],["aria-controls","row-dropdwon","role","button",1,"dropdown-toggle",3,"click"],["class","ms-2",4,"ngIf"],["type","success"],[1,"ms-2"],["type","infoCircle"],["type","warning"],["type","danger"],[1,"text-warning",3,"ngClass"],[1,"fw-bold","text-success"],[1,"fw-bold","text-danger","me-2"],[1,"fw-bold","text-warning","me-2"],[1,"fw-bold","text-danger"],["type","success",4,"ngIf"],[4,"ngIf","ngIfElse"],[3,"ngPlural"],[3,"ngPlural",4,"ngIf"],[4,"ngFor","ngForOf"],[1,"d-flex","pb-2","pt-2"],[1,"ms-5","me-auto"],[3,"ngClass"],["class","me-4 ms-2",4,"ngIf"],[1,"me-4","ms-2"]]},template:function(ut,ht){1&ut&&(l.\u0275\u0275element(0,"hr"),l.\u0275\u0275elementStart(1,"li",10)(2,"div",11)(3,"div",12),l.\u0275\u0275template(4,M,1,2,"a",13)(5,O,1,2,"a",14),l.\u0275\u0275elementEnd(),l.\u0275\u0275elementStart(6,"span",15),l.\u0275\u0275elementContainerStart(7,16),l.\u0275\u0275template(8,g,2,1,"ng-container",17)(9,A,2,1,"ng-container",17)(10,B,2,1,"ng-container",17)(11,ie,2,1,"ng-container",18),l.\u0275\u0275elementContainerEnd(),l.\u0275\u0275elementEnd(),l.\u0275\u0275template(12,Y,2,1,"span",19),l.\u0275\u0275elementEnd()(),l.\u0275\u0275template(13,L,3,1,"div",20)(14,Se,2,1,"ng-template",null,0,l.\u0275\u0275templateRefExtractor)(16,je,2,1,"ng-template",null,1,l.\u0275\u0275templateRefExtractor)(18,zt,2,1,"ng-template",null,2,l.\u0275\u0275templateRefExtractor)(20,Ke,4,1,"ng-template",null,3,l.\u0275\u0275templateRefExtractor)(22,dt,1,0,"ng-template",null,4,l.\u0275\u0275templateRefExtractor)(24,Lt,2,1,"ng-template",null,5,l.\u0275\u0275templateRefExtractor)(26,gn,2,3,"ng-template",null,6,l.\u0275\u0275templateRefExtractor)),2&ut&&(l.\u0275\u0275advance(4),l.\u0275\u0275conditional(ht.link&&null!==ht.data||ht.total?4:5),l.\u0275\u0275advance(3),l.\u0275\u0275property("ngSwitch",ht.summaryType),l.\u0275\u0275advance(),l.\u0275\u0275property("ngSwitchCase","iscsi"),l.\u0275\u0275advance(),l.\u0275\u0275property("ngSwitchCase","osd"),l.\u0275\u0275advance(),l.\u0275\u0275property("ngSwitchCase","simplified"),l.\u0275\u0275advance(2),l.\u0275\u0275property("ngIf",ht.dropdownData&&ht.dropdownData.total.total.total>0),l.\u0275\u0275advance(),l.\u0275\u0275property("ngIf",ht.dropdownToggled))},dependencies:[h.NgClass,h.NgForOf,h.NgIf,h.NgTemplateOutlet,h.NgSwitch,h.NgSwitchCase,h.NgSwitchDefault,h.NgPlural,h.NgPluralCase,R.RouterLink,S.InlineLoading,m.R,h.KeyValuePipe,v.n],styles:['.list-group-item[_ngcontent-%COMP%]{border:0;font-size:14px}a.dropdown-toggle[_ngcontent-%COMP%]:after{border:0;content:"\\f054";font-family:ForkAwesome;font-size:1rem;margin-top:.15rem;transition:transform .3s ease-in-out}a.dropdown-toggle[aria-expanded=true][_ngcontent-%COMP%]:after{transform:rotate(90deg)}']})}}return W})()},29947:(q,y,s)=>{s.d(y,{i:()=>f});var a=s(46045),e=s(87536),h=s(91974),S=s(3600);const v=["*",[["",8,"footer"]]],E=["*",".footer"],C=(g,P,A,_,B)=>({"border-0":g,"bg-color":P,shadow:A,"shadow-sm":_,"h-100":B}),d=(g,P)=>({"d-flex align-items-center":g,"justify-content-center":P});function u(g,P){if(1&g&&(e.\u0275\u0275elementStart(0,"span"),e.\u0275\u0275text(1),e.\u0275\u0275elementEnd()),2&g){const A=e.\u0275\u0275nextContext(2);e.\u0275\u0275advance(),e.\u0275\u0275textInterpolate(A.cardTitle)}}function N(g,P){if(1&g&&(e.\u0275\u0275elementStart(0,"h4",6),e.\u0275\u0275template(1,u,2,1,"span",7),e.\u0275\u0275elementEnd()),2&g){const A=e.\u0275\u0275nextContext();e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf",""===A.cardType)}}function M(g,P){if(1&g&&(e.\u0275\u0275elementStart(0,"h4",8),e.\u0275\u0275namespaceSVG(),e.\u0275\u0275element(1,"svg",9),e.\u0275\u0275namespaceHTML(),e.\u0275\u0275elementStart(2,"span",10),e.\u0275\u0275text(3),e.\u0275\u0275elementEnd()()),2&g){const A=e.\u0275\u0275nextContext();e.\u0275\u0275advance(),e.\u0275\u0275property("cdsIcon",A.icons.deploy)("size",A.icons.size20),e.\u0275\u0275advance(2),e.\u0275\u0275textInterpolate(A.cardTitle)}}function I(g,P){if(1&g&&(e.\u0275\u0275elementStart(0,"h5",11),e.\u0275\u0275text(1),e.\u0275\u0275elementEnd()),2&g){const A=e.\u0275\u0275nextContext();e.\u0275\u0275advance(),e.\u0275\u0275textInterpolate1(" ",A.cardTitle," ")}}function O(g,P){1&g&&(e.\u0275\u0275elementStart(0,"div",12),e.\u0275\u0275projection(1,1),e.\u0275\u0275elementEnd())}let f=(()=>{class g{constructor(){this.icons=a.FI,this.cardType="",this.removeBorder=!1,this.shadow=!1,this.cardFooter=!1,this.fullHeight=!1,this.alignItemsCenter=!1,this.justifyContentCenter=!1}static{this.\u0275fac=function(_){return new(_||g)}}static{this.\u0275cmp=e.\u0275\u0275defineComponent({type:g,selectors:[["cd-card"]],inputs:{cardTitle:"cardTitle",cardType:"cardType",removeBorder:"removeBorder",shadow:"shadow",cardFooter:"cardFooter",fullHeight:"fullHeight",alignItemsCenter:"alignItemsCenter",justifyContentCenter:"justifyContentCenter"},ngContentSelectors:E,decls:7,vars:15,consts:[[1,"card","flex-fill",3,"ngClass"],["class","card-title mt-4 ms-4 mb-0",4,"ngIf"],["class","text-center mt-4 mb-0",4,"ngIf"],["class","text-center card-title",4,"ngIf"],[1,"card-body","ps-0","pe-0",3,"ngClass"],["class","card-footer p-0 bg-white",4,"ngIf"],[1,"card-title","mt-4","ms-4","mb-0"],[4,"ngIf"],[1,"text-center","mt-4","mb-0"],[3,"cdsIcon","size"],[1,"badge","badge-info"],[1,"text-center","card-title"],[1,"card-footer","p-0","bg-white"]],template:function(_,B){1&_&&(e.\u0275\u0275projectionDef(v),e.\u0275\u0275elementStart(0,"div",0),e.\u0275\u0275template(1,N,2,1,"h4",1)(2,M,4,3,"h4",2)(3,I,2,1,"h5",3),e.\u0275\u0275elementStart(4,"div",4),e.\u0275\u0275projection(5),e.\u0275\u0275elementEnd(),e.\u0275\u0275template(6,O,2,0,"div",5),e.\u0275\u0275elementEnd()),2&_&&(e.\u0275\u0275property("ngClass",e.\u0275\u0275pureFunction5(6,C,B.removeBorder,"Sync Status Card"===B.cardType,B.shadow,!B.shadow&&"syncCards"!==B.cardType,B.fullHeight)),e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf","zone"!==B.cardType),e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf","zone"===B.cardType),e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf","syncCards"===B.cardType),e.\u0275\u0275advance(),e.\u0275\u0275property("ngClass",e.\u0275\u0275pureFunction2(12,d,B.alignItemsCenter,B.justifyContentCenter)),e.\u0275\u0275advance(2),e.\u0275\u0275property("ngIf",B.cardFooter))},dependencies:[h.NgClass,h.NgIf,S.IconDirective]})}}return g})()},45268:(q,y,s)=>{s.d(y,{h:()=>A});var a=s(91974),e=s(53648),l=s(76218),h=s(77317),R=s(47579),S=s(6783),m=s(487),v=s(3600),E={elem:"svg",attrs:{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 32",fill:"currentColor",width:20,height:20},content:[{elem:"path",attrs:{d:"M2 26H30V28H2zM25.4 9c.8-.8.8-2 0-2.8 0 0 0 0 0 0l-3.6-3.6c-.8-.8-2-.8-2.8 0 0 0 0 0 0 0l-15 15V24h6.4L25.4 9zM20.4 4L24 7.6l-3 3L17.4 7 20.4 4zM6 22v-3.6l10-10 3.6 3.6-10 10H6z"}}],name:"edit",size:20},C={elem:"svg",attrs:{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 32",fill:"currentColor",width:16,height:16},content:[{elem:"path",attrs:{d:"M31 16L24 23 22.59 21.59 28.17 16 22.59 10.41 24 9 31 16zM1 16L8 9 9.41 10.41 3.83 16 9.41 21.59 8 23 1 16z"}},{elem:"path",attrs:{d:"M5.91 15H26.080000000000002V17H5.91z",transform:"rotate(-75 15.996 16)"}}],name:"code",size:16},d=s(21445),u=s(13421),N=s(19093),M={elem:"svg",attrs:{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 16 16",fill:"currentColor",width:16,height:16},content:[{elem:"path",attrs:{d:"M8.5 11L8.5 6.5 6.5 6.5 6.5 7.5 7.5 7.5 7.5 11 6 11 6 12 10 12 10 11zM8 3.5c-.4 0-.8.3-.8.8S7.6 5 8 5c.4 0 .8-.3.8-.8S8.4 3.5 8 3.5z"}},{elem:"path",attrs:{d:"M8,15c-3.9,0-7-3.1-7-7s3.1-7,7-7s7,3.1,7,7S11.9,15,8,15z M8,2C4.7,2,2,4.7,2,8s2.7,6,6,6s6-2.7,6-6S11.3,2,8,2z"}}],name:"information",size:16},I={elem:"svg",attrs:{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 32",fill:"currentColor",width:32,height:32},content:[{elem:"path",attrs:{d:"M28,10V28H10V10H28m0-2H10a2,2,0,0,0-2,2V28a2,2,0,0,0,2,2H28a2,2,0,0,0,2-2V10a2,2,0,0,0-2-2Z"}},{elem:"path",attrs:{d:"M4,18H2V4A2,2,0,0,1,4,2H18V4H4Z"}}],name:"copy",size:32},O={elem:"svg",attrs:{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 16 16",fill:"currentColor",width:16,height:16},content:[{elem:"path",attrs:{d:"M13 7L12.3 6.3 8.5 10.1 8.5 1 7.5 1 7.5 10.1 3.7 6.3 3 7 8 12zM13 12v2H3v-2H2v2l0 0c0 .6.4 1 1 1h10c.6 0 1-.4 1-1l0 0v-2H13z"}}],name:"download",size:16},f={elem:"svg",attrs:{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 32",fill:"currentColor",width:20,height:20},content:[{elem:"path",attrs:{d:"M11 24H21V26H11zM13 28H19V30H13zM16 2A10 10 0 006 12a9.19 9.19 0 003.46 7.62c1 .93 1.54 1.46 1.54 2.38h2c0-1.84-1.11-2.87-2.19-3.86A7.2 7.2 0 018 12a8 8 0 0116 0 7.2 7.2 0 01-2.82 6.14c-1.07 1-2.18 2-2.18 3.86h2c0-.92.53-1.45 1.54-2.39A9.18 9.18 0 0026 12 10 10 0 0016 2z"}}],name:"idea",size:20},g=s(99304),P=s(87536);let A=(()=>{class _{constructor(w){this.iconService=w,this.iconService.registerAll([M,I,E,C,O,f,g.A])}static{this.\u0275fac=function(ie){return new(ie||_)(P.\u0275\u0275inject(v.IconService))}}static{this.\u0275mod=P.\u0275\u0275defineNgModule({type:_})}static{this.\u0275inj=P.\u0275\u0275defineInjector({providers:[(0,S.provideCharts)((0,S.withDefaultRegisterables)())],imports:[a.CommonModule,e.FormsModule,e.ReactiveFormsModule,h.NgbAlertModule,h.NgbPopoverModule,h.NgbProgressbarModule,h.NgbTooltipModule,e.ReactiveFormsModule,u.Y,d.h,h.NgbDropdownModule,R.ClickOutsideModule,m.SimplebarAngularModule,l.RouterModule,h.NgbDatepickerModule,h.NgbTimepickerModule,v.UIShellModule,v.ButtonModule,v.NotificationModule,v.IconModule,v.TooltipModule,v.GridModule,v.AccordionModule,v.LoadingModule,v.ModalModule,v.InputModule,v.NumberModule,v.CheckboxModule,v.DatePickerModule,v.TimePickerModule,v.TimePickerSelectModule,v.DropdownModule,v.SelectModule,v.ComboBoxModule,v.ProgressIndicatorModule,v.PanelModule,N.ChartsModule,v.LayoutModule,v.TilesModule,v.PopoverModule,v.InlineLoadingModule]})}}return _})()},34177:(q,y,s)=>{s.d(y,{M:()=>N});var a=s(87536),l=s(53648),R=s(3600),m=s(91974),E=s(37966),C=s(59781);function d(M,I){1&M&&a.\u0275\u0275elementContainer(0)}function u(M,I){if(1&M&&(a.\u0275\u0275elementStart(0,"p"),a.\u0275\u0275text(1),a.\u0275\u0275elementEnd()),2&M){const O=a.\u0275\u0275nextContext();a.\u0275\u0275advance(),a.\u0275\u0275textInterpolate1(" ",O.description," ")}}let N=(()=>{class M extends R.BaseModal{constructor(O,f,g,P,A,_=!1,B,w,ie,Y=!0,V=!0){super(),this.titleText=O,this.buttonText=f,this.onSubmit=g,this.bodyTpl=P,this.description=A,this.warning=_,this.bodyData=B,this.onCancel=w,this.bodyContext=ie,this.showSubmit=Y,this.showCancel=V,this.canceled=!1,this.confirmationForm=new l.UntypedFormGroup({})}ngOnInit(){if(this.bodyContext=this.bodyContext||{},this.bodyContext.$implicit=this.bodyData,!this.onSubmit)throw new Error("No submit action defined");if(!this.buttonText)throw new Error("No action name defined");if(!this.titleText)throw new Error("No title defined");if(!this.bodyTpl&&!this.description)throw new Error("No description defined")}ngOnDestroy(){this.onCancel&&this.canceled&&this.onCancel()}stopLoadingSpinner(){this.confirmationForm.setErrors({cdSubmitButton:!0})}static{this.\u0275fac=function(f){return new(f||M)(a.\u0275\u0275directiveInject("titleText",8),a.\u0275\u0275directiveInject("buttonText",8),a.\u0275\u0275directiveInject("onSubmit",8),a.\u0275\u0275directiveInject("bodyTpl",8),a.\u0275\u0275directiveInject("description",8),a.\u0275\u0275directiveInject("warning",8),a.\u0275\u0275directiveInject("bodyData",8),a.\u0275\u0275directiveInject("onCancel",8),a.\u0275\u0275directiveInject("bodyContext",8),a.\u0275\u0275directiveInject("showSubmit",8),a.\u0275\u0275directiveInject("showCancel",8))}}static{this.\u0275cmp=a.\u0275\u0275defineComponent({type:M,selectors:[["cd-confirmation-modal"]],features:[a.\u0275\u0275ProvidersFeature([{provide:"warning",useValue:!1},{provide:"showSubmit",useValue:!0},{provide:"showCancel",useValue:!0}]),a.\u0275\u0275InheritDefinitionFeature],decls:10,vars:11,consts:()=>{let O;return O=$localize`:␟282c2923380aa59d750661a75d5a419063499da8␟7142497748033900711:${"\ufffd0\ufffd"}:INTERPOLATION:`,[["formDir","ngForm"],O,["size","sm",3,"overlaySelected","open"],[3,"closeSelect"],["cdsModalHeaderHeading",""],["cdsModalContent",""],["name","confirmationForm","novalidate","",3,"formGroup"],[4,"ngTemplateOutlet","ngTemplateOutletContext"],[4,"ngIf"],[3,"submitActionEvent","form","submitText","showCancel","showSubmit","modalForm"]]},template:function(f,g){if(1&f){const P=a.\u0275\u0275getCurrentView();a.\u0275\u0275elementStart(0,"cds-modal",2),a.\u0275\u0275listener("overlaySelected",function(){return a.\u0275\u0275restoreView(P),a.\u0275\u0275resetView(g.closeModal())}),a.\u0275\u0275elementStart(1,"cds-modal-header",3),a.\u0275\u0275listener("closeSelect",function(){return a.\u0275\u0275restoreView(P),a.\u0275\u0275resetView(g.closeModal())}),a.\u0275\u0275elementStart(2,"h3",4),a.\u0275\u0275i18n(3,1),a.\u0275\u0275elementEnd()(),a.\u0275\u0275elementStart(4,"section",5)(5,"form",6,0),a.\u0275\u0275template(7,d,1,0,"ng-container",7)(8,u,2,1,"p",8),a.\u0275\u0275elementEnd()(),a.\u0275\u0275elementStart(9,"cd-form-button-panel",9),a.\u0275\u0275listener("submitActionEvent",function(){return a.\u0275\u0275restoreView(P),a.\u0275\u0275resetView(g.onSubmit(g.confirmationForm.value))}),a.\u0275\u0275elementEnd()()}2&f&&(a.\u0275\u0275property("open",g.open),a.\u0275\u0275advance(3),a.\u0275\u0275i18nExp(g.titleText),a.\u0275\u0275i18nApply(3),a.\u0275\u0275advance(2),a.\u0275\u0275property("formGroup",g.confirmationForm),a.\u0275\u0275advance(2),a.\u0275\u0275property("ngTemplateOutlet",g.bodyTpl)("ngTemplateOutletContext",g.bodyContext),a.\u0275\u0275advance(),a.\u0275\u0275property("ngIf",g.description),a.\u0275\u0275advance(),a.\u0275\u0275property("form",g.confirmationForm)("submitText",g.buttonText)("showCancel",g.showCancel)("showSubmit",g.showSubmit)("modalForm",!0))},dependencies:[m.NgIf,m.NgTemplateOutlet,l.\u0275NgNoValidate,l.NgControlStatusGroup,l.FormGroupDirective,E.E,R.Modal,R.ModalHeader,R.ModalContent,R.ModalHeaderHeading,C.e]})}}return M})()},50889:(q,y,s)=>{s.d(y,{N:()=>O});var a=s(43809),l=s(74737),R=s(46045),S=s(87536),v=s(91974),C=s(90476),d=s(3600),N=s(46765);const M=f=>({"clipboard-btn-with-text":f});function I(f,g){if(1&f&&(S.\u0275\u0275elementStart(0,"span",1),S.\u0275\u0275text(1),S.\u0275\u0275elementEnd()),2&f){const P=S.\u0275\u0275nextContext();S.\u0275\u0275property("title",P.text),S.\u0275\u0275advance(),S.\u0275\u0275textInterpolate(P.text)}}let O=(()=>{class f{constructor(P){this.toastr=P,this.byId=!0,this.size="md",this.icons=R.FI}getText(){const P=document.getElementById(this.source);return P?.value||P?.textContent}onClick(){try{const P=(0,a.detect)(),A=this.byId?this.getText():this.source,_=()=>{this.toastr.success("Copied text to the clipboard successfully.")};["firefox","ie","ios","safari"].includes(P.name)?navigator.clipboard.writeText(A).then(()=>_()):navigator.permissions.query({name:"clipboard-write"}).then(B=>{("granted"===B.state||"prompt"===B.state)&&navigator.clipboard.writeText(A).then(()=>_())})}catch{this.toastr.error("Failed to copy text to the clipboard.")}}static{this.\u0275fac=function(A){return new(A||f)(S.\u0275\u0275directiveInject(l.ToastrService))}}static{this.\u0275cmp=S.\u0275\u0275defineComponent({type:f,selectors:[["cd-copy-2-clipboard-button"]],hostBindings:function(A,_){1&A&&S.\u0275\u0275listener("click",function(){return _.onClick()})},inputs:{source:"source",byId:"byId",size:"size",text:"text"},decls:3,vars:5,consts:()=>{let P;return P=$localize`:␟4dd200b7f9e19048cf90516843b40964f2af3fe9␟1436915381769138805:Copy to Clipboard`,[["cdsButton","ghost","description",P,1,"clipboard-btn",3,"click","ngClass","size"],["data-toggle","tooltip",1,"cds--type-mono",3,"title"],["type","copy"]]},template:function(A,_){1&A&&(S.\u0275\u0275elementStart(0,"button",0),S.\u0275\u0275listener("click",function(){return _.onClick()}),S.\u0275\u0275template(1,I,2,2,"span",1),S.\u0275\u0275element(2,"cd-icon",2),S.\u0275\u0275elementEnd()),2&A&&(S.\u0275\u0275property("ngClass",S.\u0275\u0275pureFunction1(3,M,_.text))("size",_.size),S.\u0275\u0275advance(),S.\u0275\u0275conditional(_.text?1:-1))},dependencies:[v.NgClass,C.S,d.Button,N.R],styles:[".clipboard-btn[_ngcontent-%COMP%]{border:none;box-shadow:none;outline:none}.clipboard-btn-with-text[_ngcontent-%COMP%]{color:inherit}"]})}}return f})()},41861:(q,y,s)=>{s.d(y,{P:()=>I});var a=s(53648),l=s(77317),R=s(89939),S=s.n(R),m=s(87536),E=s(91974),d=s(3600);function N(O,f){if(1&O){const g=m.\u0275\u0275getCurrentView();m.\u0275\u0275elementStart(0,"cds-timepicker",5),m.\u0275\u0275listener("valueChange",function(A){m.\u0275\u0275restoreView(g);const _=m.\u0275\u0275nextContext(2);return m.\u0275\u0275resetView(_.onModelChange(A))}),m.\u0275\u0275twoWayListener("ngModelChange",function(A){m.\u0275\u0275restoreView(g);const _=m.\u0275\u0275nextContext(2);return m.\u0275\u0275twoWayBindingSet(_.time,A)||(_.time=A),m.\u0275\u0275resetView(A)}),m.\u0275\u0275elementStart(1,"cds-timepicker-select",6),m.\u0275\u0275twoWayListener("ngModelChange",function(A){m.\u0275\u0275restoreView(g);const _=m.\u0275\u0275nextContext(2);return m.\u0275\u0275twoWayBindingSet(_.ampm,A)||(_.ampm=A),m.\u0275\u0275resetView(A)}),m.\u0275\u0275listener("valueChange",function(A){m.\u0275\u0275restoreView(g);const _=m.\u0275\u0275nextContext(2);return m.\u0275\u0275resetView(_.onModelChange(A))}),m.\u0275\u0275elementStart(2,"option",7),m.\u0275\u0275text(3,"AM"),m.\u0275\u0275elementEnd(),m.\u0275\u0275elementStart(4,"option",8),m.\u0275\u0275text(5,"PM"),m.\u0275\u0275elementEnd()()()}if(2&O){const g=m.\u0275\u0275nextContext(2);m.\u0275\u0275twoWayProperty("ngModel",g.time),m.\u0275\u0275property("disabled",g.disabled),m.\u0275\u0275advance(),m.\u0275\u0275twoWayProperty("ngModel",g.ampm),m.\u0275\u0275property("disabled",g.disabled)}}function M(O,f){if(1&O&&(m.\u0275\u0275elementStart(0,"cds-text-label"),m.\u0275\u0275text(1,"Select a time "),m.\u0275\u0275template(2,N,6,4,"cds-timepicker",4),m.\u0275\u0275elementEnd()),2&O){const g=m.\u0275\u0275nextContext();m.\u0275\u0275advance(2),m.\u0275\u0275property("ngIf",g.hasTime)}}let I=(()=>{class O{constructor(g){this.calendar=g,this.hasSeconds=!0,this.hasTime=!0,this.name="",this.helperText="",this.placeHolder="",this.disabled=!1,this.date=[],this.defaultDate=!1}ngOnInit(){this.minDate=this.calendar.getToday(),this.format=this.hasTime?this.hasSeconds?"YYYY-MM-DD HH:mm:ss":"YYYY-MM-DD HH:mm":"YYYY-MM-DD";let g=S()(this.control?.value,this.format);(!g.isValid()||g.isBefore(S()()))&&(g=S()()),this.date.push(this.defaultDate?[]:g.format("YYYY-MM-DD"));const P=g.format("HH:mm:ss");this.time=g.format("hh:mm"),this.ampm=g.hour()>=12?"PM":"AM",this.datetime={date:this.date[0],time:P,ampm:this.ampm},this.onModelChange()}onModelChange(g){if(g)if(0===g.length)this.datetime.date={date:null,time:null,ampm:null};else if(Array.isArray(g))this.datetime.date=S()(g[0]).format("YYYY-MM-DD");else if(g&&["AM","PM"].includes(g)){const P=S()(this.datetime.time,"hh:mm:ss A"),A=P.set("hour",P.hour()%12+("PM"===g?12:0));this.datetime.time=S()(A).format("HH:mm:ss"),this.datetime.ampm=g}else{const P=g;this.datetime.time=S()(`${this.datetime.date} ${P} ${this.datetime.ampm}`).format("HH:mm:ss")}if(this.datetime){const P=S()(`${this.datetime.date} ${this.datetime.time}`).format(this.format);setTimeout(()=>{this.control.setValue(P)})}else setTimeout(()=>{this.control.setValue("")})}static{this.\u0275fac=function(P){return new(P||O)(m.\u0275\u0275directiveInject(l.NgbCalendar))}}static{this.\u0275cmp=m.\u0275\u0275defineComponent({type:O,selectors:[["cd-date-time-picker"]],inputs:{control:"control",hasSeconds:"hasSeconds",hasTime:"hasTime",name:"name",helperText:"helperText",placeHolder:"placeHolder",disabled:"disabled",defaultDate:"defaultDate"},decls:6,vars:6,consts:[["cdsCol",""],["cdsRow","",1,"form-item-append"],["formControlname","expiresAt","dateFormat","Y/m/d","cdsTheme","theme",3,"valueChange","placeholder","value","helperText","disabled"],[4,"ngIf"],["pattern","(1[012]|[0-9]):[0-5][0-9]",3,"ngModel","disabled","valueChange","ngModelChange",4,"ngIf"],["pattern","(1[012]|[0-9]):[0-5][0-9]",3,"valueChange","ngModelChange","ngModel","disabled"],[3,"ngModelChange","valueChange","ngModel","disabled"],["selected","","value","AM"],["value","PM"]],template:function(P,A){1&P&&(m.\u0275\u0275elementStart(0,"div",0)(1,"div",1)(2,"cds-text-label"),m.\u0275\u0275text(3),m.\u0275\u0275elementStart(4,"cds-date-picker",2),m.\u0275\u0275listener("valueChange",function(B){return A.onModelChange(B)}),m.\u0275\u0275elementEnd()(),m.\u0275\u0275template(5,M,3,1,"cds-text-label",3),m.\u0275\u0275elementEnd()()),2&P&&(m.\u0275\u0275advance(3),m.\u0275\u0275textInterpolate1("",A.name," "),m.\u0275\u0275advance(),m.\u0275\u0275property("placeholder",A.placeHolder)("value",A.date)("helperText",A.helperText)("disabled",A.disabled),m.\u0275\u0275advance(),m.\u0275\u0275property("ngIf",A.hasTime))},dependencies:[E.NgIf,a.NgSelectOption,a.\u0275NgSelectMultipleOption,a.NgControlStatus,a.PatternValidator,a.NgModel,d.ColumnDirective,d.RowDirective,d.TextInputLabelComponent,d.DatePicker,d.TimePicker,d.TimePickerSelect,d.Option],styles:[".form-item-append[_ngcontent-%COMP%]{margin-top:1rem}"]})}}return O})()},84821:(q,y,s)=>{s.d(y,{D:()=>_e});var a=s(87536),l=s(53648),R=s(58384),S=s(35141),m=s(3600),E=s(3687),C=s(22453),d=s(91974),N=s(23603),M=s(90476),I=s(37966),O=s(51862),f=s(92805),g=s(59781);const P=oe=>({form:oe});function A(oe,de){1&oe&&a.\u0275\u0275elementContainer(0)}function _(oe,de){if(1&oe&&(a.\u0275\u0275elementStart(0,"cd-alert-panel",26),a.\u0275\u0275i18nStart(1,6),a.\u0275\u0275element(2,"p"),a.\u0275\u0275i18nEnd(),a.\u0275\u0275elementEnd()),2&oe){const ue=a.\u0275\u0275nextContext();a.\u0275\u0275advance(2),a.\u0275\u0275i18nExp(ue.infoMessage),a.\u0275\u0275i18nApply(1)}}function B(oe,de){1&oe&&a.\u0275\u0275elementContainer(0)}function w(oe,de){if(1&oe&&(a.\u0275\u0275elementStart(0,"p"),a.\u0275\u0275i18nStart(1,7),a.\u0275\u0275pipe(2,"lowercase"),a.\u0275\u0275element(3,"strong"),a.\u0275\u0275i18nEnd(),a.\u0275\u0275elementEnd()),2&oe){const ue=a.\u0275\u0275nextContext(2);a.\u0275\u0275advance(3),a.\u0275\u0275i18nExp(a.\u0275\u0275pipeBind1(2,2,ue.actionDescription))(ue.itemNames[0]),a.\u0275\u0275i18nApply(1)}}function ie(oe,de){if(1&oe&&(a.\u0275\u0275elementStart(0,"li")(1,"strong"),a.\u0275\u0275text(2),a.\u0275\u0275elementEnd()()),2&oe){const ue=de.$implicit;a.\u0275\u0275advance(2),a.\u0275\u0275textInterpolate(ue)}}function Y(oe,de){if(1&oe&&(a.\u0275\u0275elementStart(0,"p"),a.\u0275\u0275i18n(1,8),a.\u0275\u0275pipe(2,"lowercase"),a.\u0275\u0275elementEnd(),a.\u0275\u0275elementStart(3,"ul"),a.\u0275\u0275template(4,ie,3,1,"li",27),a.\u0275\u0275elementEnd()),2&oe){const ue=a.\u0275\u0275nextContext(2);a.\u0275\u0275advance(2),a.\u0275\u0275i18nExp(a.\u0275\u0275pipeBind1(2,2,ue.actionDescription)),a.\u0275\u0275i18nApply(1),a.\u0275\u0275advance(2),a.\u0275\u0275property("ngForOf",ue.itemNames)}}function V(oe,de){if(1&oe&&(a.\u0275\u0275elementStart(0,"span"),a.\u0275\u0275template(1,w,4,4,"p",23)(2,Y,5,4,"ng-template",null,4,a.\u0275\u0275templateRefExtractor),a.\u0275\u0275elementEnd()),2&oe){const ue=a.\u0275\u0275reference(3),T=a.\u0275\u0275nextContext();a.\u0275\u0275advance(),a.\u0275\u0275property("ngIf",1===T.itemNames.length)("ngIfElse",ue)}}function L(oe,de){if(1&oe&&(a.\u0275\u0275elementStart(0,"p"),a.\u0275\u0275i18n(1,9),a.\u0275\u0275pipe(2,"lowercase"),a.\u0275\u0275elementEnd()),2&oe){const ue=a.\u0275\u0275nextContext();a.\u0275\u0275advance(2),a.\u0275\u0275i18nExp(a.\u0275\u0275pipeBind1(2,2,ue.actionDescription))(ue.itemDescription),a.\u0275\u0275i18nApply(1)}}function Q(oe,de){1&oe&&a.\u0275\u0275elementContainer(0)}function me(oe,de){1&oe&&(a.\u0275\u0275elementContainerStart(0),a.\u0275\u0275elementStart(1,"cds-checkbox",28),a.\u0275\u0275i18n(2,10),a.\u0275\u0275elementEnd(),a.\u0275\u0275elementContainerEnd()),2&oe&&(a.\u0275\u0275advance(),a.\u0275\u0275property("required",!0))}function Ie(oe,de){1&oe&&(a.\u0275\u0275elementStart(0,"span",32),a.\u0275\u0275elementContainerStart(1),a.\u0275\u0275i18n(2,12),a.\u0275\u0275elementContainerEnd(),a.\u0275\u0275elementEnd())}function He(oe,de){1&oe&&(a.\u0275\u0275elementStart(0,"span",32),a.\u0275\u0275elementContainerStart(1),a.\u0275\u0275i18n(2,13),a.\u0275\u0275elementContainerEnd(),a.\u0275\u0275elementEnd())}function Ae(oe,de){if(1&oe&&a.\u0275\u0275template(0,Ie,3,0,"span",31)(1,He,3,0,"span",31),2&oe){const ue=a.\u0275\u0275nextContext(2),T=a.\u0275\u0275reference(5);a.\u0275\u0275property("ngIf",ue.deletionForm.showError("confirmInput",T,"required")),a.\u0275\u0275advance(),a.\u0275\u0275property("ngIf",ue.deletionForm.showError("confirmInput",T,"matchResource"))}}function We(oe,de){if(1&oe&&(a.\u0275\u0275elementStart(0,"cds-text-label",29),a.\u0275\u0275i18nStart(1,11),a.\u0275\u0275element(2,"input",30),a.\u0275\u0275i18nEnd(),a.\u0275\u0275elementEnd(),a.\u0275\u0275template(3,Ae,2,2,"ng-template",null,5,a.\u0275\u0275templateRefExtractor)),2&oe){const ue=a.\u0275\u0275reference(4),T=a.\u0275\u0275nextContext();a.\u0275\u0275property("invalid",!T.deletionForm.controls.confirmInput.valid&&T.deletionForm.controls.confirmInput.dirty)("invalidText",ue)}}function te(oe,de){if(1&oe&&(a.\u0275\u0275elementStart(0,"h3",33),a.\u0275\u0275i18n(1,14),a.\u0275\u0275pipe(2,"titlecase"),a.\u0275\u0275elementEnd()),2&oe){const ue=a.\u0275\u0275nextContext();a.\u0275\u0275advance(2),a.\u0275\u0275i18nExp(a.\u0275\u0275pipeBind1(2,2,ue.actionDescription))(ue.itemDescription),a.\u0275\u0275i18nApply(1)}}let _e=(()=>{class oe extends m.BaseModal{constructor(ue,T,K,ce="delete",fe,Te,Se,Ge,Ye,ct,rt){super(),this.impact=ue,this.itemDescription=T,this.itemNames=K,this.actionDescription=ce,this.submitAction=fe,this.backAction=Te,this.bodyTemplate=Se,this.bodyContext=Ge,this.infoMessage=Ye,this.submitActionObservable=ct,this.callBackAtionObservable=rt,this.impactEnum=C.r,this.actionDescription=ce||"delete",this.impact=this.impact||C.r.medium}ngOnInit(){const ue={impact:new l.UntypedFormControl(this.impact),confirmation:new l.UntypedFormControl(!1,{validators:[E.xQ.composeIf({impact:C.r.medium},[l.Validators.requiredTrue])]}),confirmInput:new l.UntypedFormControl("",[E.xQ.composeIf({impact:this.impactEnum.high},[this.matchResourceName.bind(this),l.Validators.required])])};if(this.childFormGroup&&(ue.child=this.childFormGroup),this.deletionForm=new R.$(ue),!this.submitAction&&!this.submitActionObservable)throw new Error("No submit action defined")}matchResourceName(ue){return this.itemNames&&ue.value!==String(this.itemNames?.[0])?{matchResource:!0}:null}callSubmitAction(){this.submitActionObservable?this.submitActionObservable().subscribe({error:this.stopLoadingSpinner.bind(this),complete:this.hideModal.bind(this)}):this.submitAction()}callBackAction(){this.callBackAtionObservable?this.callBackAtionObservable().subscribe({error:this.stopLoadingSpinner.bind(this),complete:this.hideModal.bind(this)}):this.backAction()}hideModal(){this.closeModal()}stopLoadingSpinner(){this.deletionForm.setErrors({cdSubmitButton:!0})}static{this.\u0275fac=function(T){return new(T||oe)(a.\u0275\u0275directiveInject("impact",8),a.\u0275\u0275directiveInject("itemDescription",8),a.\u0275\u0275directiveInject("itemNames",8),a.\u0275\u0275directiveInject("actionDescription",8),a.\u0275\u0275directiveInject("submitAction",8),a.\u0275\u0275directiveInject("backAction",8),a.\u0275\u0275directiveInject("bodyTemplate",8),a.\u0275\u0275directiveInject("bodyContext",8),a.\u0275\u0275directiveInject("infoMessage",8),a.\u0275\u0275directiveInject("submitActionObservable",8),a.\u0275\u0275directiveInject("callBackAtionObservable",8))}}static{this.\u0275cmp=a.\u0275\u0275defineComponent({type:oe,selectors:[["cd-deletion-modal"]],viewQuery:function(T,K){if(1&T&&a.\u0275\u0275viewQuery(S._,7),2&T){let ce;a.\u0275\u0275queryRefresh(ce=a.\u0275\u0275loadQuery())&&(K.submitButton=ce.first)}},features:[a.\u0275\u0275InheritDefinitionFeature],decls:21,vars:20,consts:()=>{let ue,T,K,ce,fe,Te,Se,Ge,Ye,ct,rt;return ue=$localize`:␟031532554bf866164e85d3ed985823a7cfcd9232␟6898180829126212409:${"\ufffd#2\ufffd"}:START_PARAGRAPH:${"\ufffd0\ufffd"}:INTERPOLATION:${"\ufffd/#2\ufffd"}:CLOSE_PARAGRAPH:`,T=$localize`:␟6110699a3562eeb15371063c0cf7f6bfd88a0209␟3239867498816051226:Are you sure that you want to ${"\ufffd0\ufffd"}:INTERPOLATION: ${"\ufffd#3\ufffd"}:START_TAG_STRONG:${"\ufffd1\ufffd"}:INTERPOLATION_1:${"\ufffd/#3\ufffd"}:CLOSE_TAG_STRONG:?`,K=$localize`:␟549859e511ba5af0ea03fcaa620c472f08038969␟3079504020955842199:Are you sure that you want to ${"\ufffd0\ufffd"}:INTERPOLATION: the selected items?`,ce=$localize`:␟54839ebc827b73c9dc4e1df731c6d36a85036af7␟898210535510434442:Are you sure that you want to ${"\ufffd0\ufffd"}:INTERPOLATION: the selected ${"\ufffd1\ufffd"}:INTERPOLATION_1:?`,fe=$localize`:␟2be8b7f04f0104d3fad90d079d8202b74f758b9a␟9028260953990145020:Yes, I am sure.`,Te=$localize`:␟0333de11ce64a23e1d4014b5f930f8fa00831ddf␟6813396031694137692:Resource Name`,Se=$localize`:␟4d3345e3b340c7457029d2cfb75e5881eb5aec44␟4390273640017163475:Enter resource name to delete`,Ge=$localize`:␟723004418fdad68bca53d6163d9638a5df10189f␟1009334946544444524:Resource Name ${"\ufffd#2\ufffd\ufffd/#2\ufffd"}:TAG_INPUT:`,Ye=$localize`:␟7cbdabcece469fab89cfa687ab152bca18b97498␟1417693714872528491:This field is required.`,ct=$localize`:␟a8da19abd6f3178fd69717301a953d991e193aec␟7707641451498538087:Enter the correct resource name.`,rt=$localize`:␟8d4868f227a553b2dc99db7c285df13593fe0d3a␟3738161093130758932: ${"\ufffd0\ufffd"}:INTERPOLATION: ${"\ufffd1\ufffd"}:INTERPOLATION_1: `,[["formDir","ngForm"],["noNames",""],["highImpactDeletion",""],["deletionHeading",""],["manyNames",""],["ResourceError",""],ue,T,K,ce,fe,Ge,Ye,ct,rt,["size","sm",3,"overlaySelected","open"],[3,"closeSelect"],[4,"ngTemplateOutlet"],["cdsModalContent",""],["name","deletionForm","novalidate","",3,"formGroup"],["type","info","spacingClass","mb-3",4,"ngIf"],[4,"ngTemplateOutlet","ngTemplateOutletContext"],[1,"question"],[4,"ngIf","ngIfElse"],[1,"form-item"],[3,"submitActionEvent","backActionEvent","form","submitText","modalForm","submitBtnType"],["type","info","spacingClass","mb-3"],[4,"ngFor","ngForOf"],["id","confirmation","formControlName","confirmation","autofocus","","modal-primary-focus","","ariaLabel","confirmation",3,"required"],["label",Te,"labelInputID","resource_name","cdRequiredField","Resource Name",3,"invalid","invalidText"],["cdsText","","type","text","placeholder",Se,"id","resource_name","formControlName","confirmInput"],["class","invalid-feedback",4,"ngIf"],[1,"invalid-feedback"],["cdsModalHeaderHeading",""]]},template:function(T,K){if(1&T){const ce=a.\u0275\u0275getCurrentView();a.\u0275\u0275elementStart(0,"cds-modal",15),a.\u0275\u0275listener("overlaySelected",function(){return a.\u0275\u0275restoreView(ce),a.\u0275\u0275resetView(K.closeModal())}),a.\u0275\u0275elementStart(1,"cds-modal-header",16),a.\u0275\u0275listener("closeSelect",function(){return a.\u0275\u0275restoreView(ce),a.\u0275\u0275resetView(K.closeModal())}),a.\u0275\u0275template(2,A,1,0,"ng-container",17),a.\u0275\u0275elementEnd(),a.\u0275\u0275elementStart(3,"section",18)(4,"form",19,0),a.\u0275\u0275template(6,_,3,1,"cd-alert-panel",20)(7,B,1,0,"ng-container",21),a.\u0275\u0275elementStart(8,"div",22),a.\u0275\u0275template(9,V,4,2,"span",23)(10,L,3,4,"ng-template",null,1,a.\u0275\u0275templateRefExtractor)(12,Q,1,0,"ng-container",21),a.\u0275\u0275elementStart(13,"div",24),a.\u0275\u0275template(14,me,3,1,"ng-container",23)(15,We,5,2,"ng-template",null,2,a.\u0275\u0275templateRefExtractor),a.\u0275\u0275elementEnd()()()(),a.\u0275\u0275elementStart(17,"cd-form-button-panel",25),a.\u0275\u0275pipe(18,"titlecase"),a.\u0275\u0275listener("submitActionEvent",function(){return a.\u0275\u0275restoreView(ce),a.\u0275\u0275resetView(K.callSubmitAction())})("backActionEvent",function(){return a.\u0275\u0275restoreView(ce),a.\u0275\u0275resetView(K.backAction?K.callBackAction():K.hideModal())}),a.\u0275\u0275elementEnd()(),a.\u0275\u0275template(19,te,3,4,"ng-template",null,3,a.\u0275\u0275templateRefExtractor)}if(2&T){const ce=a.\u0275\u0275reference(11),fe=a.\u0275\u0275reference(16),Te=a.\u0275\u0275reference(20);a.\u0275\u0275property("open",K.open),a.\u0275\u0275advance(2),a.\u0275\u0275property("ngTemplateOutlet",Te),a.\u0275\u0275advance(2),a.\u0275\u0275property("formGroup",K.deletionForm),a.\u0275\u0275advance(2),a.\u0275\u0275property("ngIf",K.infoMessage),a.\u0275\u0275advance(),a.\u0275\u0275property("ngTemplateOutlet",K.bodyTemplate)("ngTemplateOutletContext",K.bodyContext),a.\u0275\u0275advance(2),a.\u0275\u0275property("ngIf",K.itemNames)("ngIfElse",ce),a.\u0275\u0275advance(3),a.\u0275\u0275property("ngTemplateOutlet",K.childFormGroupTemplate)("ngTemplateOutletContext",a.\u0275\u0275pureFunction1(18,P,K.deletionForm)),a.\u0275\u0275advance(2),a.\u0275\u0275property("ngIf",K.impact==K.impactEnum.medium)("ngIfElse",fe),a.\u0275\u0275advance(3),a.\u0275\u0275property("form",K.deletionForm)("submitText",a.\u0275\u0275pipeBind1(18,16,K.actionDescription)+" "+K.itemDescription)("modalForm",!0)("submitBtnType","delete"===K.actionDescription||"remove"===K.actionDescription?"danger":"primary")}},dependencies:[d.NgForOf,d.NgIf,d.NgTemplateOutlet,l.\u0275NgNoValidate,l.DefaultValueAccessor,l.NgControlStatus,l.NgControlStatusGroup,l.RequiredValidator,l.FormGroupDirective,l.FormControlName,N.B,M.S,I.E,O.P,m.Modal,m.ModalHeader,m.ModalContent,m.ModalHeaderHeading,m.TextInputLabelComponent,m.TextInput,m.Checkbox,f.m,g.e,d.LowerCasePipe,d.TitleCasePipe],styles:[".modal-body[_ngcontent-%COMP%]   .question[_ngcontent-%COMP%]{margin-top:1em}.modal-body[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{font-weight:700}.modal-body[_ngcontent-%COMP%]   .question[_ngcontent-%COMP%]   .form-check[_ngcontent-%COMP%]{padding-top:7px}"]})}}return oe})()},87837:(q,y,s)=>{s.d(y,{C:()=>h});var a=s(38996),e=s(87536);let h=(()=>{class R{constructor(m){this.docService=m,this.docText=$localize`documentation`}ngOnInit(){this.noSubscribe?this.docUrl=this.docService.urlGenerator(this.section):this.docService.subscribeOnce(this.section,m=>{this.docUrl=m})}static{this.\u0275fac=function(v){return new(v||R)(e.\u0275\u0275directiveInject(a.s))}}static{this.\u0275cmp=e.\u0275\u0275defineComponent({type:R,selectors:[["cd-doc"]],inputs:{section:"section",docText:"docText",noSubscribe:"noSubscribe"},decls:2,vars:2,consts:[["target","_blank",1,"ps-1","pe-1",3,"href"]],template:function(v,E){1&v&&(e.\u0275\u0275elementStart(0,"a",0),e.\u0275\u0275text(1),e.\u0275\u0275elementEnd()),2&v&&(e.\u0275\u0275propertyInterpolate("href",E.docUrl,e.\u0275\u0275sanitizeUrl),e.\u0275\u0275advance(),e.\u0275\u0275textInterpolate(E.docText))}})}}return R})()},95131:(q,y,s)=>{s.d(y,{e:()=>m});var a=s(87536),l=s(3600);const R=["*"];function S(v,E){if(1&v&&(a.\u0275\u0275elementStart(0,"h5",5),a.\u0275\u0275i18n(1,2),a.\u0275\u0275elementEnd()),2&v){const C=a.\u0275\u0275nextContext();a.\u0275\u0275advance(),a.\u0275\u0275i18nExp(C.title),a.\u0275\u0275i18nApply(1)}}let m=(()=>{class v{constructor(){this.title="Advanced",this.showAdvanced=!1}static{this.\u0275fac=function(d){return new(d||v)}}static{this.\u0275cmp=a.\u0275\u0275defineComponent({type:v,selectors:[["cd-form-advanced-fieldset"]],inputs:{title:"title"},ngContentSelectors:R,decls:7,vars:1,consts:()=>{let C,d;return C=$localize`:␟087248800ad42567a76e82ae85d73431f8d9058b␟5089928187302403565:${"\ufffd#4\ufffd"}:START_TAG_NG_CONTENT:${"\ufffd/#4\ufffd"}:CLOSE_TAG_NG_CONTENT:`,d=$localize`:␟045ed332fbb2645493d6955677247db0d1134c2d␟2999396308623228810:${"\ufffd0\ufffd"}:INTERPOLATION:`,[["titleTpl",""],C,d,["size","lg",1,"form-item"],["id","advanced-fieldset",3,"selected","title"],[1,"cds--accordion__title","cd-header"]]},template:function(d,u){if(1&d){const N=a.\u0275\u0275getCurrentView();a.\u0275\u0275projectionDef(),a.\u0275\u0275elementStart(0,"fieldset")(1,"cds-accordion",3)(2,"cds-accordion-item",4),a.\u0275\u0275listener("selected",function(){return a.\u0275\u0275restoreView(N),a.\u0275\u0275resetView(u.showAdvanced=!u.showAdvanced)}),a.\u0275\u0275i18nStart(3,1),a.\u0275\u0275projection(4),a.\u0275\u0275i18nEnd(),a.\u0275\u0275elementEnd()(),a.\u0275\u0275template(5,S,2,1,"ng-template",null,0,a.\u0275\u0275templateRefExtractor),a.\u0275\u0275elementEnd()}if(2&d){const N=a.\u0275\u0275reference(6);a.\u0275\u0275advance(2),a.\u0275\u0275property("title",N)}},dependencies:[l.Accordion,l.AccordionItem]})}}return v})()},59781:(q,y,s)=>{s.d(y,{e:()=>A});var a=s(91974),l=s(87536),R=s(54372),S=s(77867),m=s(35141),v=s(94254),E=s(76218),d=s(3600),N=s(33117);function M(_,B){if(1&_){const w=l.\u0275\u0275getCurrentView();l.\u0275\u0275elementStart(0,"cd-back-button",5),l.\u0275\u0275listener("backAction",function(){l.\u0275\u0275restoreView(w);const Y=l.\u0275\u0275nextContext(2);return l.\u0275\u0275resetView(Y.backAction())}),l.\u0275\u0275elementEnd()}if(2&_){const w=l.\u0275\u0275nextContext(2);l.\u0275\u0275property("name",w.cancelText)}}function I(_,B){if(1&_){const w=l.\u0275\u0275getCurrentView();l.\u0275\u0275elementStart(0,"cd-submit-button",6),l.\u0275\u0275listener("submitAction",function(){l.\u0275\u0275restoreView(w);const Y=l.\u0275\u0275nextContext(2);return l.\u0275\u0275resetView(Y.submitAction())}),l.\u0275\u0275text(1),l.\u0275\u0275elementEnd()}if(2&_){const w=l.\u0275\u0275nextContext(2);l.\u0275\u0275property("disabled",w.disabled)("form",w.form)("ariaLabel",w.submitText)("buttonType",w.submitBtnType),l.\u0275\u0275advance(),l.\u0275\u0275textInterpolate(w.submitText)}}function O(_,B){if(1&_&&(l.\u0275\u0275elementContainerStart(0),l.\u0275\u0275elementStart(1,"div",2),l.\u0275\u0275template(2,M,1,1,"cd-back-button",3)(3,I,2,5,"cd-submit-button",4),l.\u0275\u0275elementEnd(),l.\u0275\u0275elementContainerEnd()),2&_){const w=l.\u0275\u0275nextContext();l.\u0275\u0275advance(),l.\u0275\u0275property("ngClass",w.wrappingClass),l.\u0275\u0275advance(),l.\u0275\u0275property("ngIf",w.showCancel),l.\u0275\u0275advance(),l.\u0275\u0275property("ngIf",w.showSubmit)}}function f(_,B){if(1&_){const w=l.\u0275\u0275getCurrentView();l.\u0275\u0275elementStart(0,"cd-back-button",9),l.\u0275\u0275listener("backAction",function(){l.\u0275\u0275restoreView(w);const Y=l.\u0275\u0275nextContext(2);return l.\u0275\u0275resetView(Y.backAction())}),l.\u0275\u0275elementEnd()}if(2&_){const w=l.\u0275\u0275nextContext(2);l.\u0275\u0275property("name",w.cancelText)("modalForm",w.modalForm)("showSubmit",w.showSubmit)}}function g(_,B){if(1&_){const w=l.\u0275\u0275getCurrentView();l.\u0275\u0275elementStart(0,"cd-submit-button",10),l.\u0275\u0275listener("submitAction",function(){l.\u0275\u0275restoreView(w);const Y=l.\u0275\u0275nextContext(2);return l.\u0275\u0275resetView(Y.submitAction())}),l.\u0275\u0275text(1),l.\u0275\u0275elementEnd()}if(2&_){const w=l.\u0275\u0275nextContext(2);l.\u0275\u0275property("disabled",w.disabled)("form",w.form)("ariaLabel",w.submitText)("modalForm",w.modalForm)("buttonType",w.submitBtnType),l.\u0275\u0275advance(),l.\u0275\u0275textInterpolate(w.submitText)}}function P(_,B){if(1&_&&(l.\u0275\u0275elementStart(0,"cds-modal-footer"),l.\u0275\u0275template(1,f,1,3,"cd-back-button",7)(2,g,2,6,"cd-submit-button",8),l.\u0275\u0275elementEnd()),2&_){const w=l.\u0275\u0275nextContext();l.\u0275\u0275advance(),l.\u0275\u0275property("ngIf",w.showCancel),l.\u0275\u0275advance(),l.\u0275\u0275property("ngIf",w.showSubmit)}}let A=(()=>{class _{constructor(w,ie,Y,V,L){this.location=w,this.actionLabels=ie,this.modalService=Y,this.cdsModalService=V,this.route=L,this.submitActionEvent=new l.EventEmitter,this.backActionEvent=new l.EventEmitter,this.showSubmit=!0,this.showCancel=!0,this.wrappingClass="",this.btnClass="",this.disabled=!1,this.modalForm=!1,this.hasModalOutlet=!1}ngOnInit(){this.submitText=this.submitText||this.actionLabels.CREATE,this.cancelText=this.cancelText||this.actionLabels.CANCEL,this.hasModalOutlet="modal"===this.route.outlet}submitAction(){this.submitActionEvent.emit()}backAction(){0===this.backActionEvent.observers.length?this.modalForm&&this.cdsModalService.hasOpenModals()?this.cdsModalService.dismissAll():this.modalForm&&this.hasModalOutlet?this.location.back():this.modalService.hasOpenModals()?this.modalService.dismissAll():this.location.back():this.backActionEvent.emit()}static{this.\u0275fac=function(ie){return new(ie||_)(l.\u0275\u0275directiveInject(a.Location),l.\u0275\u0275directiveInject(R.Ss),l.\u0275\u0275directiveInject(S.B),l.\u0275\u0275directiveInject(v.V),l.\u0275\u0275directiveInject(E.ActivatedRoute))}}static{this.\u0275cmp=l.\u0275\u0275defineComponent({type:_,selectors:[["cd-form-button-panel"]],viewQuery:function(ie,Y){if(1&ie&&l.\u0275\u0275viewQuery(m._,5),2&ie){let V;l.\u0275\u0275queryRefresh(V=l.\u0275\u0275loadQuery())&&(Y.submitButton=V.first)}},inputs:{form:"form",showSubmit:"showSubmit",showCancel:"showCancel",wrappingClass:"wrappingClass",btnClass:"btnClass",submitText:"submitText",cancelText:"cancelText",disabled:"disabled",modalForm:"modalForm",submitBtnType:"submitBtnType"},outputs:{submitActionEvent:"submitActionEvent",backActionEvent:"backActionEvent"},decls:3,vars:2,consts:[["modalFooter",""],[4,"ngIf","ngIfElse"],[3,"ngClass"],[3,"name","backAction",4,"ngIf"],["data-testid","submitBtn",3,"disabled","form","ariaLabel","buttonType","submitAction",4,"ngIf"],[3,"backAction","name"],["data-testid","submitBtn",3,"submitAction","disabled","form","ariaLabel","buttonType"],["class","w-100",3,"name","modalForm","showSubmit","backAction",4,"ngIf"],["data-testid","submitBtn","class","w-100",3,"disabled","form","ariaLabel","modalForm","buttonType","submitAction",4,"ngIf"],[1,"w-100",3,"backAction","name","modalForm","showSubmit"],["data-testid","submitBtn",1,"w-100",3,"submitAction","disabled","form","ariaLabel","modalForm","buttonType"]],template:function(ie,Y){if(1&ie&&l.\u0275\u0275template(0,O,4,3,"ng-container",1)(1,P,3,2,"ng-template",null,0,l.\u0275\u0275templateRefExtractor),2&ie){const V=l.\u0275\u0275reference(2);l.\u0275\u0275property("ngIf",!Y.modalForm)("ngIfElse",V)}},dependencies:[a.NgClass,a.NgIf,d.ModalFooter,m._,N.X],styles:["cd-form-button-panel[_ngcontent-%COMP%]{width:100%}"]})}}return _})()},62431:(q,y,s)=>{s.d(y,{b:()=>He});var a=s(53648),l=s(3600),R=s(29841),S=s.n(R),m=s(43808),v=s(73651),E=s(12540),C=s(87536),u=s(91974),M=s(23603),I=s(42865),O=s(90476),f=s(37966),g=s(51862),P=s(19271),A=s(59781);function _(Ae,We){if(1&Ae&&(C.\u0275\u0275elementStart(0,"h3",13),C.\u0275\u0275text(1),C.\u0275\u0275elementEnd()),2&Ae){const te=C.\u0275\u0275nextContext();C.\u0275\u0275advance(),C.\u0275\u0275textInterpolate1(" ",te.titleText," ")}}function B(Ae,We){if(1&Ae&&(C.\u0275\u0275elementStart(0,"p",14),C.\u0275\u0275text(1),C.\u0275\u0275elementEnd()),2&Ae){const te=C.\u0275\u0275nextContext();C.\u0275\u0275advance(),C.\u0275\u0275textInterpolate(te.message)}}function w(Ae,We){if(1&Ae&&(C.\u0275\u0275elementStart(0,"cds-text-label",20),C.\u0275\u0275i18nStart(1,1),C.\u0275\u0275element(2,"input",21),C.\u0275\u0275i18nEnd(),C.\u0275\u0275elementEnd()),2&Ae){const te=C.\u0275\u0275nextContext().$implicit,_e=C.\u0275\u0275nextContext();C.\u0275\u0275property("labelInputID",te.name)("invalid",_e.getError(te))("invalidText",_e.getError(te))("cdRequiredField",!0===(null==te?null:te.required)?te.label:""),C.\u0275\u0275advance(2),C.\u0275\u0275property("id",te.name)("name",te.name)("formControlName",te.name)("invalid",_e.getError(te)),C.\u0275\u0275i18nExp(te.label),C.\u0275\u0275i18nApply(1)}}function ie(Ae,We){if(1&Ae&&C.\u0275\u0275element(0,"cds-number",22),2&Ae){const te=C.\u0275\u0275nextContext().$implicit,_e=C.\u0275\u0275nextContext();C.\u0275\u0275property("invalid",_e.getError(te))("invalidText",_e.getError(te))("label",te.label)("cdRequiredField",!0===(null==te?null:te.required)?te.label:"")("formControlName",te.name)("id",te.name)}}function Y(Ae,We){if(1&Ae&&(C.\u0275\u0275elementStart(0,"cds-text-label",20),C.\u0275\u0275i18nStart(1,2),C.\u0275\u0275element(2,"input",23),C.\u0275\u0275i18nEnd(),C.\u0275\u0275elementEnd()),2&Ae){const te=C.\u0275\u0275nextContext().$implicit,_e=C.\u0275\u0275nextContext();C.\u0275\u0275property("labelInputID",te.name)("invalid",_e.getError(te))("invalidText",_e.getError(te))("cdRequiredField",!0===(null==te?null:te.required)?te.label:""),C.\u0275\u0275advance(2),C.\u0275\u0275property("id",te.name)("name",te.name)("formControlName",te.name),C.\u0275\u0275i18nExp(te.label),C.\u0275\u0275i18nApply(1)}}function V(Ae,We){if(1&Ae&&(C.\u0275\u0275i18nStart(0,3,1),C.\u0275\u0275element(1,"option",27),C.\u0275\u0275i18nEnd()),2&Ae){const te=C.\u0275\u0275nextContext(2).$implicit;C.\u0275\u0275advance(),C.\u0275\u0275property("ngValue",null),C.\u0275\u0275i18nExp(null==te||null==te.typeConfig?null:te.typeConfig.placeholder),C.\u0275\u0275i18nApply(0)}}function L(Ae,We){if(1&Ae&&(C.\u0275\u0275i18nStart(0,3,2),C.\u0275\u0275element(1,"option",28),C.\u0275\u0275i18nEnd()),2&Ae){const te=We.$implicit;C.\u0275\u0275advance(),C.\u0275\u0275property("value",te.value),C.\u0275\u0275i18nExp(te.text),C.\u0275\u0275i18nApply(0)}}function Q(Ae,We){if(1&Ae&&(C.\u0275\u0275elementStart(0,"cds-select",24),C.\u0275\u0275i18nStart(1,3),C.\u0275\u0275template(2,V,2,2,"option",25)(3,L,2,2,"option",26),C.\u0275\u0275i18nEnd(),C.\u0275\u0275elementEnd()),2&Ae){const te=C.\u0275\u0275nextContext().$implicit,_e=C.\u0275\u0275nextContext();C.\u0275\u0275property("label",te.label)("for",te.name)("id",te.name)("formControlName",te.name)("options",null==te||null==te.typeConfig?null:te.typeConfig.options)("placeholder",null==te||null==te.typeConfig?null:te.typeConfig.placeholder)("invalid",_e.getError(te))("invalidText",_e.getError(te))("cdRequiredField",!0===(null==te?null:te.required)?te.label:""),C.\u0275\u0275advance(2),C.\u0275\u0275property("ngIf",null==te||null==te.typeConfig?null:te.typeConfig.placeholder),C.\u0275\u0275advance(),C.\u0275\u0275property("ngForOf",null==te||null==te.typeConfig?null:te.typeConfig.options)}}function me(Ae,We){if(1&Ae){const te=C.\u0275\u0275getCurrentView();C.\u0275\u0275elementStart(0,"cds-combo-box",29),C.\u0275\u0275listener("updatedItems",function(oe){C.\u0275\u0275restoreView(te);const de=C.\u0275\u0275nextContext().$implicit;return C.\u0275\u0275resetView(de.typeConfig.options=oe)}),C.\u0275\u0275i18nStart(1,4),C.\u0275\u0275element(2,"cds-dropdown-list"),C.\u0275\u0275i18nEnd(),C.\u0275\u0275elementEnd()}if(2&Ae){const te=C.\u0275\u0275nextContext().$implicit,_e=C.\u0275\u0275nextContext();C.\u0275\u0275property("label",te.label)("for",te.name)("formControlName",te.name)("id",te.name)("invalid",_e.getError(te))("invalidText",_e.getError(te))("appendInline",!1)("items",null==te||null==te.typeConfig?null:te.typeConfig.options)("cdRequiredField",!0===(null==te?null:te.required)?te.label:"")}}function Ie(Ae,We){if(1&Ae&&(C.\u0275\u0275elementContainerStart(0),C.\u0275\u0275elementStart(1,"div",15),C.\u0275\u0275template(2,w,3,9,"cds-text-label",16)(3,ie,1,6,"cds-number",17)(4,Y,3,8,"cds-text-label",16)(5,Q,4,11,"cds-select",18)(6,me,3,9,"cds-combo-box",19),C.\u0275\u0275elementEnd(),C.\u0275\u0275elementContainerEnd()),2&Ae){const te=We.$implicit;C.\u0275\u0275advance(2),C.\u0275\u0275property("ngIf","text"===te.type),C.\u0275\u0275advance(),C.\u0275\u0275property("ngIf","number"===te.type),C.\u0275\u0275advance(),C.\u0275\u0275property("ngIf","binary"===te.type),C.\u0275\u0275advance(),C.\u0275\u0275property("ngIf","select"===te.type),C.\u0275\u0275advance(),C.\u0275\u0275property("ngIf","select-badges"===te.type)}}let He=(()=>{class Ae extends l.BaseModal{constructor(te,_e,oe,de,ue,T,K,ce="",fe){super(),this.formBuilder=te,this.formatter=_e,this.dimlessBinaryPipe=oe,this.titleText=de,this.fields=ue,this.submitButtonText=T,this.onSubmit=K,this.message=ce,this.updateAsyncValidators=fe}ngOnInit(){this.createForm()}createForm(){const te={};this.fields.forEach(_e=>{te[_e.name]=this.createFormControl(_e)}),this.formGroup=this.formBuilder.group(te)}createFormControl(te){let _e=[],oe=[];S().isBoolean(te.required)&&te.required&&_e.push(a.Validators.required),te.validators&&(_e=_e.concat(te.validators)),te.asyncValidators&&(oe=oe.concat(te.asyncValidators));const de=new a.UntypedFormControl(S().defaultTo("binary"===te.type?this.dimlessBinaryPipe.transform(te.value):te.value,null),{validators:_e,asyncValidators:oe});return"select-badges"===te.type&&te.value&&de.setValue(te.value),te.valueChangeListener&&de.valueChanges.subscribe(ue=>{const T=this.updateAsyncValidators(ue);this.updateValidation(te.dependsOn,T)}),de}getError(te){const _e=this.formGroup.get(te.name).errors;return _e?Object.keys(_e)?.map(de=>this.getErrorMessage(de,_e[de],te.errors))?.join("<br>"):""}getErrorMessage(te,_e,oe){if(oe){const de=oe[te];if(de)return de}return["binaryMin","binaryMax"].includes(te)?_e():"required"===te?$localize`This field is required.`:"pattern"===te?$localize`Size must be a number or in a valid format. eg: 5 GiB`:$localize`An error occurred.`}onSubmitForm(te){this.fields.filter(oe=>"binary"===oe.type).map(oe=>oe.name).forEach(oe=>{const de=te[oe];de&&(te[oe]=this.formatter.toBytes(de))}),this.closeModal(),S().isFunction(this.onSubmit)&&this.onSubmit(te)}updateValidation(te,_e){const oe=this.formGroup.get(te);oe.setAsyncValidators(_e),oe.updateValueAndValidity()}static{this.\u0275fac=function(_e){return new(_e||Ae)(C.\u0275\u0275directiveInject(m.$),C.\u0275\u0275directiveInject(E.k),C.\u0275\u0275directiveInject(v.l),C.\u0275\u0275directiveInject("titleText",8),C.\u0275\u0275directiveInject("fields",8),C.\u0275\u0275directiveInject("submitButtonText",8),C.\u0275\u0275directiveInject("onSubmit",8),C.\u0275\u0275directiveInject("message",8),C.\u0275\u0275directiveInject("updateAsyncValidators",8))}}static{this.\u0275cmp=C.\u0275\u0275defineComponent({type:Ae,selectors:[["cd-form-modal"]],features:[C.\u0275\u0275InheritDefinitionFeature],decls:9,vars:9,consts:()=>{let te,_e,oe,de;return te=$localize`:␟d031b2593f99525739232795dcdc68a5c723ece3␟6625350406510726962: ${"\ufffd0\ufffd"}:INTERPOLATION: ${"\ufffd#2\ufffd\ufffd/#2\ufffd"}:TAG_INPUT:`,_e=$localize`:␟d031b2593f99525739232795dcdc68a5c723ece3␟6625350406510726962: ${"\ufffd0\ufffd"}:INTERPOLATION: ${"\ufffd#2\ufffd\ufffd/#2\ufffd"}:TAG_INPUT:`,oe=$localize`:␟19b2f5ad5d100309891ae694e639d5e93b35b191␟7970698934018604280:${"\ufffd*2:1\ufffd\ufffd#1:1\ufffd"}:START_TAG_OPTION: ${"\ufffd0:1\ufffd"}:INTERPOLATION: ${"[\ufffd/#1:1\ufffd\ufffd/*2:1\ufffd|\ufffd/#1:2\ufffd\ufffd/*3:2\ufffd]"}:CLOSE_TAG_OPTION:${"\ufffd*3:2\ufffd\ufffd#1:2\ufffd"}:START_TAG_OPTION_1: ${"\ufffd0:2\ufffd"}:INTERPOLATION_1: ${"[\ufffd/#1:1\ufffd\ufffd/*2:1\ufffd|\ufffd/#1:2\ufffd\ufffd/*3:2\ufffd]"}:CLOSE_TAG_OPTION:`,oe=C.\u0275\u0275i18nPostprocess(oe),de=$localize`:␟e1f562c6d0f39d4e9b167612dad19327a7f3f4a9␟442692580528822602:${"\ufffd#2\ufffd"}:START_TAG_CDS_DROPDOWN_LIST:${"\ufffd/#2\ufffd"}:CLOSE_TAG_CDS_DROPDOWN_LIST:`,[["formDir","ngForm"],te,_e,oe,de,["size","md",3,"overlaySelected","open","hasScrollingContent"],[3,"closeSelect"],["cdsModalHeaderHeading","",4,"ngIf"],["cdsModalContent","","data-testid","modal-content"],["novalidate","",3,"formGroup"],["id","description",4,"ngIf"],[4,"ngFor","ngForOf"],[3,"submitActionEvent","form","submitText","modalForm"],["cdsModalHeaderHeading",""],["id","description"],[1,"form-item"],[3,"labelInputID","invalid","invalidText","cdRequiredField",4,"ngIf"],[3,"invalid","invalidText","label","cdRequiredField","formControlName","id",4,"ngIf"],[3,"label","for","id","formControlName","options","placeholder","invalid","invalidText","cdRequiredField",4,"ngIf"],["type","multi","selectionFeedback","top-after-reopen","itemValueKey","content","cdDynamicInputCombobox","",3,"label","for","formControlName","id","invalid","invalidText","appendInline","items","cdRequiredField","updatedItems",4,"ngIf"],[3,"labelInputID","invalid","invalidText","cdRequiredField"],["cdsText","","type","text","autofocus","",3,"id","name","formControlName","invalid"],[3,"invalid","invalidText","label","cdRequiredField","formControlName","id"],["type","text","cdsText","","cdDimlessBinary","",3,"id","name","formControlName"],[3,"label","for","id","formControlName","options","placeholder","invalid","invalidText","cdRequiredField"],[3,"ngValue",4,"ngIf"],[3,"value",4,"ngFor","ngForOf"],[3,"ngValue"],[3,"value"],["type","multi","selectionFeedback","top-after-reopen","itemValueKey","content","cdDynamicInputCombobox","",3,"updatedItems","label","for","formControlName","id","invalid","invalidText","appendInline","items","cdRequiredField"]]},template:function(_e,oe){if(1&_e){const de=C.\u0275\u0275getCurrentView();C.\u0275\u0275elementStart(0,"cds-modal",5),C.\u0275\u0275listener("overlaySelected",function(){return C.\u0275\u0275restoreView(de),C.\u0275\u0275resetView(oe.closeModal())}),C.\u0275\u0275elementStart(1,"cds-modal-header",6),C.\u0275\u0275listener("closeSelect",function(){return C.\u0275\u0275restoreView(de),C.\u0275\u0275resetView(oe.closeModal())}),C.\u0275\u0275template(2,_,2,1,"h3",7),C.\u0275\u0275elementEnd(),C.\u0275\u0275elementStart(3,"div",8)(4,"form",9,0),C.\u0275\u0275template(6,B,2,1,"p",10)(7,Ie,7,5,"ng-container",11),C.\u0275\u0275elementEnd()(),C.\u0275\u0275elementStart(8,"cd-form-button-panel",12),C.\u0275\u0275listener("submitActionEvent",function(){return C.\u0275\u0275restoreView(de),C.\u0275\u0275resetView(oe.onSubmitForm(oe.formGroup.value))}),C.\u0275\u0275elementEnd()()}2&_e&&(C.\u0275\u0275property("open",oe.open)("hasScrollingContent",!0),C.\u0275\u0275advance(2),C.\u0275\u0275property("ngIf",oe.titleText),C.\u0275\u0275advance(2),C.\u0275\u0275property("formGroup",oe.formGroup),C.\u0275\u0275advance(2),C.\u0275\u0275property("ngIf",oe.message),C.\u0275\u0275advance(),C.\u0275\u0275property("ngForOf",oe.fields),C.\u0275\u0275advance(),C.\u0275\u0275property("form",oe.formGroup)("submitText",oe.submitButtonText)("modalForm",!0))},dependencies:[u.NgForOf,u.NgIf,a.\u0275NgNoValidate,a.NgSelectOption,a.\u0275NgSelectMultipleOption,a.DefaultValueAccessor,a.NgControlStatus,a.NgControlStatusGroup,a.FormGroupDirective,a.FormControlName,M.B,I.Y,O.S,f.E,g.P,P.k,l.Modal,l.ModalHeader,l.ModalContent,l.ModalHeaderHeading,l.TextInputLabelComponent,l.TextInput,l.NumberComponent,l.DropdownList,l.Select,l.Option,l.ComboBox,A.e]})}}return Ae})()},1505:(q,y,s)=>{s.d(y,{c:()=>B});var a=s(5559),l=s(11549),h=s(46045),R=s(87536),m=s(91974),E=s(90476),C=s(23589),d=s(92805),u=s(87837);const N=w=>[w],M=(w,ie)=>[w,ie];function I(w,ie){1&w&&(R.\u0275\u0275elementStart(0,"cd-loading-panel"),R.\u0275\u0275i18n(1,1),R.\u0275\u0275elementEnd())}function O(w,ie){1&w&&(R.\u0275\u0275elementStart(0,"cd-alert-panel",7),R.\u0275\u0275i18nStart(1,2),R.\u0275\u0275element(2,"cd-doc",8),R.\u0275\u0275i18nEnd(),R.\u0275\u0275elementEnd())}function f(w,ie){1&w&&(R.\u0275\u0275elementStart(0,"cd-alert-panel",7),R.\u0275\u0275i18nStart(1,3),R.\u0275\u0275element(2,"cd-doc",8),R.\u0275\u0275i18nEnd(),R.\u0275\u0275elementEnd())}function g(w,ie){if(1&w){const Y=R.\u0275\u0275getCurrentView();R.\u0275\u0275elementStart(0,"div",15)(1,"div",16)(2,"div",17)(3,"button",18),R.\u0275\u0275listener("click",function(){R.\u0275\u0275restoreView(Y);const L=R.\u0275\u0275nextContext(2);return R.\u0275\u0275resetView(L.reset())}),R.\u0275\u0275element(4,"i",19),R.\u0275\u0275elementEnd()(),R.\u0275\u0275elementStart(5,"div",17)(6,"button",20),R.\u0275\u0275listener("click",function(){R.\u0275\u0275restoreView(Y);const L=R.\u0275\u0275nextContext(2);return R.\u0275\u0275resetView(L.showMessage=!L.showMessage)}),R.\u0275\u0275element(7,"i",19),R.\u0275\u0275elementEnd()()()()}if(2&w){const Y=R.\u0275\u0275nextContext(2);R.\u0275\u0275advance(4),R.\u0275\u0275property("ngClass",R.\u0275\u0275pureFunction1(2,N,Y.icons.undo)),R.\u0275\u0275advance(3),R.\u0275\u0275property("ngClass",R.\u0275\u0275pureFunction2(4,M,Y.icons.infoCircle,Y.icons.large))}}function P(w,ie){if(1&w){const Y=R.\u0275\u0275getCurrentView();R.\u0275\u0275elementStart(0,"cd-alert-panel",23),R.\u0275\u0275listener("dismissed",function(){R.\u0275\u0275restoreView(Y);const L=R.\u0275\u0275nextContext(3);return R.\u0275\u0275resetView(L.showMessage=!1)}),R.\u0275\u0275i18nStart(1,4),R.\u0275\u0275element(2,"a",24),R.\u0275\u0275i18nEnd(),R.\u0275\u0275elementEnd()}if(2&w){const Y=R.\u0275\u0275nextContext(3);R.\u0275\u0275advance(2),R.\u0275\u0275property("href",Y.grafanaSrc,R.\u0275\u0275sanitizeUrl)}}function A(w,ie){if(1&w&&(R.\u0275\u0275elementStart(0,"div",21),R.\u0275\u0275template(1,P,3,1,"cd-alert-panel",22),R.\u0275\u0275elementEnd()),2&w){const Y=R.\u0275\u0275nextContext(2);R.\u0275\u0275advance(),R.\u0275\u0275property("ngIf",Y.showMessage)}}function _(w,ie){if(1&w&&(R.\u0275\u0275elementContainerStart(0),R.\u0275\u0275template(1,g,8,7,"div",9),R.\u0275\u0275elementStart(2,"div",10),R.\u0275\u0275template(3,A,2,1,"div",11),R.\u0275\u0275elementEnd(),R.\u0275\u0275elementStart(4,"div",10)(5,"div",12)(6,"div",13),R.\u0275\u0275element(7,"iframe",14,0),R.\u0275\u0275elementEnd()()(),R.\u0275\u0275elementContainerEnd()),2&w){const Y=R.\u0275\u0275nextContext();R.\u0275\u0275advance(),R.\u0275\u0275property("ngIf",Y.showMessage),R.\u0275\u0275advance(2),R.\u0275\u0275property("ngIf",Y.showMessage),R.\u0275\u0275advance(4),R.\u0275\u0275property("src",Y.grafanaSrc,R.\u0275\u0275sanitizeResourceUrl)("ngClass",Y.panelStyle)("title",Y.title)}}let B=(()=>{class w{constructor(Y,V){this.sanitizer=Y,this.settingsService=V,this.grafanaExist=!1,this.mode="&kiosk",this.loading=!0,this.styles={},this.dashboardExist=!0,this.showMessage=!1,this.icons=h.FI,this.DEFAULT_TIME="from=now-1h&to=now",this.grafanaTimes=[{name:$localize`Last 5 minutes`,value:"from=now-5m&to=now"},{name:$localize`Last 15 minutes`,value:"from=now-15m&to=now"},{name:$localize`Last 30 minutes`,value:"from=now-30m&to=now"},{name:$localize`Last 1 hour (Default)`,value:"from=now-1h&to=now"},{name:$localize`Last 3 hours`,value:"from=now-3h&to=now"},{name:$localize`Last 6 hours`,value:"from=now-6h&to=now"},{name:$localize`Last 12 hours`,value:"from=now-12h&to=now"},{name:$localize`Last 24 hours`,value:"from=now-24h&to=now"},{name:$localize`Yesterday`,value:"from=now-1d%2Fd&to=now-1d%2Fd"},{name:$localize`Today so far`,value:"from=now%2Fd&to=now"},{name:$localize`Day before yesterday`,value:"from=now-2d%2Fd&to=now-2d%2Fd"},{name:$localize`Last 2 days`,value:"from=now-2d&to=now"},{name:$localize`This day last week`,value:"from=now-7d%2Fd&to=now-7d%2Fd"},{name:$localize`Previous week`,value:"from=now-1w%2Fw&to=now-1w%2Fw"},{name:$localize`This week so far`,value:"from=now%2Fw&to=now"},{name:$localize`Last 7 days`,value:"from=now-7d&to=now"},{name:$localize`Previous month`,value:"from=now-1M%2FM&to=now-1M%2FM"},{name:$localize`This month so far`,value:"from=now%2FM&to=now"},{name:$localize`Last 30 days`,value:"from=now-30d&to=now"},{name:$localize`Last 90 days`,value:"from=now-90d&to=now"},{name:$localize`Last 6 months`,value:"from=now-6M&to=now"},{name:$localize`Last 1 year`,value:"from=now-1y&to=now"},{name:$localize`Previous year`,value:"from=now-1y%2Fy&to=now-1y%2Fy"},{name:$localize`This year so far`,value:"from=now%2Fy&to=now"},{name:$localize`Last 2 years`,value:"from=now-2y&to=now"},{name:$localize`Last 5 years`,value:"from=now-5y&to=now"}]}ngOnInit(){this.time=this.DEFAULT_TIME,this.styles={one:"grafana_one",two:"grafana_two",three:"grafana_three",four:"grafana_four"},this.datasource="metrics"===this.type?"Dashboard1":"Loki",this.settingsService.ifSettingConfigured("api/grafana/url",Y=>{this.grafanaExist=!0,this.loading=!1,this.baseUrl=Y+"/d/",this.getFrame()}),this.panelStyle=this.styles[this.grafanaStyle]}getFrame(){this.settingsService.validateGrafanaDashboardUrl(this.uid).subscribe(Y=>this.dashboardExist=200===Y||401===Y),this.url="metrics"===this.type?`${this.baseUrl}${this.uid}/${this.grafanaPath}&refresh=2s&var-datasource=${this.datasource}${this.mode}&${this.time}`:`${this.baseUrl.slice(0,-2)}${this.grafanaPath}orgId=1&left={"datasource": "${this.datasource}", "queries": [{"refId": "A"}], "range": {"from": "now-1h", "to": "now"}}${this.mode}`,this.grafanaSrc=this.sanitizer.bypassSecurityTrustResourceUrl(this.url)}onTimepickerChange(){this.grafanaExist&&this.getFrame()}reset(){this.time=this.DEFAULT_TIME,this.grafanaExist&&this.getFrame()}ngOnChanges(){this.grafanaExist&&this.getFrame()}static{this.\u0275fac=function(V){return new(V||w)(R.\u0275\u0275directiveInject(a.DomSanitizer),R.\u0275\u0275directiveInject(l.h))}}static{this.\u0275cmp=R.\u0275\u0275defineComponent({type:w,selectors:[["cd-grafana"]],inputs:{type:"type",grafanaPath:"grafanaPath",grafanaStyle:"grafanaStyle",uid:"uid",title:"title"},features:[R.\u0275\u0275NgOnChangesFeature],decls:4,vars:4,consts:()=>{let Y,V,L,Q,me,Ie;return Y=$localize`:␟c5109325fb160b543f71a51e7511c00575057431␟8571022891891074216:Loading panel data...`,V=$localize`:␟54e85eccd5e82eef02aa550dcd96311a4b10b334␟8020852368367315098:Please consult the ${"\ufffd#2\ufffd"}:START_TAG_CD_DOC:${"\ufffd/#2\ufffd"}:CLOSE_TAG_CD_DOC: on how to configure and enable the monitoring functionality.`,L=$localize`:␟2b704ebe14ea63127a4ac45ab91050472d62aca6␟8615349235188058292:Grafana Dashboard doesn't exist. Please refer to  ${"\ufffd#2\ufffd"}:START_TAG_CD_DOC:${"\ufffd/#2\ufffd"}:CLOSE_TAG_CD_DOC: on how to add dashboards to Grafana.`,Q=$localize`:␟238c1ba845dd7330e8088165275919a1debf1ca3␟6588188798799848745:Reset Settings`,me=$localize`:␟e48501d20810348ebf4982c2b9497fe384eaedfe␟91377515965148095:Show hidden information`,Ie=$localize`:␟59139c13d0d36f6ca38d3e906af2a8471272e2dd␟3068573303343281223:If no embedded Grafana Dashboard appeared below, please follow ${"\ufffd#2\ufffd"}:START_LINK:this link ${"\ufffd/#2\ufffd"}:CLOSE_LINK: to check if Grafana is reachable and there are no HTTPS certificate issues. You may need to reload this page after accepting any Browser certificate exceptions`,[["iframe",""],Y,V,L,Ie,[4,"ngIf"],["type","info",4,"ngIf"],["type","info"],["section","grafana"],["class","row mb-3",4,"ngIf"],[1,"row"],["class","col my-2",4,"ngIf"],[1,"col"],[1,"grafana-container"],["id","iframe","frameborder","0","scrolling","no",1,"grafana",3,"src","ngClass","title"],[1,"row","mb-3"],[1,"col-lg-5","d-flex"],[1,"col-sm-1"],["title",Q,1,"btn","btn-light","ms-3",3,"click"],[3,"ngClass"],["title",me,1,"btn","btn-light","ms-3",3,"click"],[1,"col","my-2"],["type","info","class","mb-3","dismissible","true",3,"dismissed",4,"ngIf"],["type","info","dismissible","true",1,"mb-3",3,"dismissed"],["target","_blank","noopener","","noreferrer","",3,"href"]]},template:function(V,L){1&V&&R.\u0275\u0275template(0,I,2,0,"cd-loading-panel",5)(1,O,3,0,"cd-alert-panel",6)(2,f,3,0,"cd-alert-panel",6)(3,_,9,5,"ng-container",5),2&V&&(R.\u0275\u0275property("ngIf",L.loading&&L.grafanaExist),R.\u0275\u0275advance(),R.\u0275\u0275property("ngIf",!L.grafanaExist),R.\u0275\u0275advance(),R.\u0275\u0275property("ngIf",!L.dashboardExist),R.\u0275\u0275advance(),R.\u0275\u0275property("ngIf",L.grafanaExist&&L.dashboardExist))},dependencies:[m.NgClass,m.NgIf,E.S,C.e,d.m,u.C],styles:[".grafana[_ngcontent-%COMP%]{height:600px;width:100%;z-index:0}.grafana_one[_ngcontent-%COMP%]{height:400px}.grafana_two[_ngcontent-%COMP%]{height:750px}.grafana_three[_ngcontent-%COMP%]{height:900px}.grafana_four[_ngcontent-%COMP%]{height:1160px}.timepicker[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{font-weight:700}.dropdown-menu[_ngcontent-%COMP%]{left:auto;right:20px;top:20px}"]})}}return w})()},64333:(q,y,s)=>{s.d(y,{O:()=>v});var a=s(87536),l=s(91974);const R=["*"];function S(E,C){1&E&&(a.\u0275\u0275elementContainerStart(0),a.\u0275\u0275i18n(1,1),a.\u0275\u0275elementContainerEnd())}function m(E,C){1&E&&a.\u0275\u0275projection(0)}let v=(()=>{class E{constructor(){this.formAllFieldsRequired=!1}static{this.\u0275fac=function(u){return new(u||E)}}static{this.\u0275cmp=a.\u0275\u0275defineComponent({type:E,selectors:[["cd-help-text"]],inputs:{formAllFieldsRequired:"formAllFieldsRequired"},ngContentSelectors:R,decls:4,vars:2,consts:()=>{let d;return d=$localize`:␟3fa8330ff975a86c7d25578cf84716909c11576f␟3286574557857057296: All fields are required, except where marked optional. `,[["contentTpl",""],d,[1,"form-text","text-muted"],[4,"ngIf","ngIfElse"]]},template:function(u,N){if(1&u&&(a.\u0275\u0275projectionDef(),a.\u0275\u0275elementStart(0,"div",2),a.\u0275\u0275template(1,S,2,0,"ng-container",3)(2,m,1,0,"ng-template",null,0,a.\u0275\u0275templateRefExtractor),a.\u0275\u0275elementEnd()),2&u){const M=a.\u0275\u0275reference(3);a.\u0275\u0275advance(),a.\u0275\u0275property("ngIf",N.formAllFieldsRequired)("ngIfElse",M)}},dependencies:[l.NgIf],styles:[".form-text[_ngcontent-%COMP%]{font-size:small}"]})}}return E})()},55472:(q,y,s)=>{s.d(y,{m:()=>N});var a=s(46045),e=function(M){return M.popover="popover",M.tooltip="tooltip",M}(e||{}),l=s(87536),h=s(91974),R=s(3600);const S=["*"];function m(M,I){1&M&&l.\u0275\u0275elementContainer(0)}function v(M,I){if(1&M&&(l.\u0275\u0275elementStart(0,"div",4),l.\u0275\u0275element(1,"div",5),l.\u0275\u0275template(2,m,1,0,"ng-container",6),l.\u0275\u0275elementEnd()),2&M){const O=l.\u0275\u0275nextContext(),f=l.\u0275\u0275reference(5);l.\u0275\u0275advance(),l.\u0275\u0275classMap(O.class),l.\u0275\u0275property("innerHtml",O.html,l.\u0275\u0275sanitizeHtml),l.\u0275\u0275advance(),l.\u0275\u0275property("ngTemplateOutlet",f)}}function E(M,I){if(1&M&&(l.\u0275\u0275elementStart(0,"cds-tooltip",2),l.\u0275\u0275namespaceSVG(),l.\u0275\u0275element(1,"svg",7),l.\u0275\u0275elementEnd()),2&M){const O=l.\u0275\u0275nextContext(),f=l.\u0275\u0275reference(1);l.\u0275\u0275property("description",f)("autoAlign",!0),l.\u0275\u0275advance(),l.\u0275\u0275property("cdsIcon",O.iconType)("size",O.iconSize)}}function C(M,I){1&M&&l.\u0275\u0275elementContainer(0)}function d(M,I){if(1&M){const O=l.\u0275\u0275getCurrentView();l.\u0275\u0275elementStart(0,"div",3)(1,"div",8),l.\u0275\u0275listener("click",function(){l.\u0275\u0275restoreView(O);const g=l.\u0275\u0275nextContext();return l.\u0275\u0275resetView(g.togglePopover())})("keydown.enter",function(){l.\u0275\u0275restoreView(O);const g=l.\u0275\u0275nextContext();return l.\u0275\u0275resetView(g.togglePopover())}),l.\u0275\u0275elementStart(2,"div",9),l.\u0275\u0275namespaceSVG(),l.\u0275\u0275element(3,"svg",7),l.\u0275\u0275elementEnd(),l.\u0275\u0275namespaceHTML(),l.\u0275\u0275elementStart(4,"cds-popover-content")(5,"div",10),l.\u0275\u0275listener("click",function(g){return l.\u0275\u0275restoreView(O),l.\u0275\u0275resetView(g.stopPropagation())}),l.\u0275\u0275template(6,C,1,0,"ng-container",6),l.\u0275\u0275elementEnd()()()()}if(2&M){const O=l.\u0275\u0275nextContext(),f=l.\u0275\u0275reference(5);l.\u0275\u0275property("ngClass",O.class),l.\u0275\u0275advance(),l.\u0275\u0275property("isOpen",O.isPopoverOpen)("autoAlign",!0),l.\u0275\u0275advance(2),l.\u0275\u0275property("cdsIcon",O.iconType)("size",O.iconSize),l.\u0275\u0275advance(3),l.\u0275\u0275property("ngTemplateOutlet",f)}}function u(M,I){1&M&&l.\u0275\u0275projection(0)}let N=(()=>{class M{constructor(){this.icons=a.FI,this.isPopoverOpen=!1,this.helperType=e,this.type=e.tooltip,this.iconSize=this.icons.size16,this.iconType=this.icons.info}togglePopover(){this.isPopoverOpen=!this.isPopoverOpen}closePopover(){this.type===e.popover&&this.isPopoverOpen&&(this.isPopoverOpen=!1)}static{this.\u0275fac=function(f){return new(f||M)}}static{this.\u0275cmp=l.\u0275\u0275defineComponent({type:M,selectors:[["cd-helper"]],inputs:{type:"type",class:"class",html:"html",iconSize:"iconSize",iconType:"iconType"},ngContentSelectors:S,decls:6,vars:1,consts:[["tooltipTemplate",""],["content",""],[3,"description","autoAlign"],[1,"inline-block",3,"ngClass"],[1,"cds--popover-scroll-container"],[3,"innerHtml"],[4,"ngTemplateOutlet"],[3,"cdsIcon","size"],["cdsPopover","","tabindex","0",3,"click","keydown.enter","isOpen","autoAlign"],[1,"popover-trigger"],[1,"cds--popover-scroll-container",3,"click"]],template:function(f,g){1&f&&(l.\u0275\u0275projectionDef(),l.\u0275\u0275template(0,v,3,4,"ng-template",null,0,l.\u0275\u0275templateRefExtractor)(2,E,2,4,"cds-tooltip",2)(3,d,7,6,"div",3)(4,u,1,0,"ng-template",null,1,l.\u0275\u0275templateRefExtractor)),2&f&&(l.\u0275\u0275advance(2),l.\u0275\u0275conditional(g.type===g.helperType.tooltip?2:3))},dependencies:[h.NgClass,h.NgTemplateOutlet,R.IconDirective,R.Tooltip,R.PopoverContainer,R.PopoverContent],styles:["cds-tooltip[_ngcontent-%COMP%]{margin-left:5px}.inline-block[_ngcontent-%COMP%]{display:inline-block}"]})}}return M})()},46765:(q,y,s)=>{s.d(y,{R:()=>S});var a=s(46045),e=s(87536),h=s(3600);let S=(()=>{class m{constructor(){this.size=a.lK.size16}ngOnInit(){this.icon=a.FI[this.type]}static{this.\u0275fac=function(C){return new(C||m)}}static{this.\u0275cmp=e.\u0275\u0275defineComponent({type:m,selectors:[["cd-icon"]],inputs:{type:"type",size:"size"},decls:1,vars:4,consts:[[3,"cdsIcon","size"]],template:function(C,d){1&C&&(e.\u0275\u0275namespaceSVG(),e.\u0275\u0275element(0,"svg",0)),2&C&&(e.\u0275\u0275classMap(d.type+"-icon"),e.\u0275\u0275property("cdsIcon",d.icon)("size",d.size))},dependencies:[h.IconDirective],styles:[".success-icon[_ngcontent-%COMP%]{color:var(--cds-support-success, #24a148)}.danger-icon[_ngcontent-%COMP%]{color:var(--cds-support-error, #da1e28)}.infoCircle-icon[_ngcontent-%COMP%]{color:var(--cds-support-info, #0043ce)}.warning-icon[_ngcontent-%COMP%]{color:var(--cds-support-caution-major, #ff832b)}"]})}}return m})()},23589:(q,y,s)=>{s.d(y,{e:()=>C});var a=s(46045),e=s(87536),h=s(91974),S=s(77317);const v=["*"],E=(d,u)=>[d,u];let C=(()=>{class d{constructor(){this.icons=a.FI}static{this.\u0275fac=function(M){return new(M||d)}}static{this.\u0275cmp=e.\u0275\u0275defineComponent({type:d,selectors:[["cd-loading-panel"]],ngContentSelectors:v,decls:4,vars:5,consts:[["type","info",3,"dismissible"],["aria-hidden","true",1,"me-2",3,"ngClass"]],template:function(M,I){1&M&&(e.\u0275\u0275projectionDef(),e.\u0275\u0275elementStart(0,"ngb-alert",0)(1,"strong"),e.\u0275\u0275element(2,"i",1),e.\u0275\u0275elementEnd(),e.\u0275\u0275projection(3),e.\u0275\u0275elementEnd()),2&M&&(e.\u0275\u0275property("dismissible",!1),e.\u0275\u0275advance(2),e.\u0275\u0275property("ngClass",e.\u0275\u0275pureFunction2(2,E,I.icons.spinner,I.icons.spin)))},dependencies:[h.NgClass,S.NgbAlert]})}}return d})()},69081:(q,y,s)=>{s.d(y,{z:()=>u});var a=s(87536),l=s(76218),m=(s(77317),s(91974)),E=s(90476);const C=[[["",8,"modal-title"]],[["",8,"modal-content"]]],d=[".modal-title",".modal-content"];let u=(()=>{class N{constructor(I){this.router=I,this.hide=new a.EventEmitter}close(){this.pageURL?this.router.navigate([this.pageURL,{outlets:{modal:null}}]):this.modalRef?.close(),this.hide.emit()}static{this.\u0275fac=function(O){return new(O||N)(a.\u0275\u0275directiveInject(l.Router))}}static{this.\u0275cmp=a.\u0275\u0275defineComponent({type:N,selectors:[["cd-modal"]],inputs:{modalRef:"modalRef",pageURL:"pageURL"},outputs:{hide:"hide"},ngContentSelectors:d,decls:8,vars:2,consts:[[3,"ngClass"],[1,"modal-content","content-theme"],[1,"modal-header"],[1,"modal-title","float-start"],["type","button","aria-label","Close",1,"btn-close","float-end",3,"click"]],template:function(O,f){1&O&&(a.\u0275\u0275projectionDef(C),a.\u0275\u0275elementStart(0,"div",0)(1,"div",0)(2,"div",1)(3,"div",2)(4,"h4",3),a.\u0275\u0275projection(5),a.\u0275\u0275elementEnd(),a.\u0275\u0275elementStart(6,"button",4),a.\u0275\u0275listener("click",function(){return f.close()}),a.\u0275\u0275elementEnd()(),a.\u0275\u0275projection(7,1),a.\u0275\u0275elementEnd()()()),2&O&&(a.\u0275\u0275property("ngClass",f.pageURL?"modal":""),a.\u0275\u0275advance(),a.\u0275\u0275property("ngClass",f.pageURL?"modal-dialog":""))},dependencies:[m.NgClass,E.S],styles:['.content-theme[_ngcontent-%COMP%]{--cds-ai-aura-end: rgba(255, 255, 255, 0);--cds-ai-aura-hover-background: #edf5ff;--cds-ai-aura-hover-end: rgba(255, 255, 255, 0);--cds-ai-aura-hover-start: rgba(69, 137, 255, .32);--cds-ai-aura-start: rgba(69, 137, 255, .1);--cds-ai-aura-start-sm: rgba(69, 137, 255, .16);--cds-ai-border-end: #78a9ff;--cds-ai-border-start: rgba(166, 200, 255, .64);--cds-ai-border-strong: #4589ff;--cds-ai-drop-shadow: rgba(15, 98, 254, .1);--cds-ai-inner-shadow: rgba(69, 137, 255, .1);--cds-ai-overlay: rgba(0, 17, 65, .5);--cds-ai-popover-background: #ffffff;--cds-ai-popover-caret-bottom: #78a9ff;--cds-ai-popover-caret-bottom-background: #eaf1ff;--cds-ai-popover-caret-bottom-background-actions: #e9effa;--cds-ai-popover-caret-center: #a0c3ff;--cds-ai-popover-shadow-outer-01: rgba(0, 67, 206, .06);--cds-ai-popover-shadow-outer-02: rgba(0, 0, 0, .04);--cds-ai-skeleton-background: #d0e2ff;--cds-ai-skeleton-element-background: #4589ff;--cds-background: #f4f4f4;--cds-background-active: rgba(141, 141, 141, .5);--cds-background-brand: #374249;--cds-background-hover: rgba(141, 141, 141, .12);--cds-background-inverse: #f8f9fa;--cds-background-inverse-hover: #dee2e6;--cds-background-selected: rgba(141, 141, 141, .2);--cds-background-selected-hover: rgba(141, 141, 141, .32);--cds-border-disabled: #c6c6c6;--cds-border-interactive: #25828e;--cds-border-inverse: #161616;--cds-border-strong-01: #8d8d8d;--cds-border-strong-02: #8d8d8d;--cds-border-strong-03: #8d8d8d;--cds-border-subtle-00: #c6c6c6;--cds-border-subtle-01: #e0e0e0;--cds-border-subtle-02: #c6c6c6;--cds-border-subtle-03: #e0e0e0;--cds-border-subtle-selected-01: #c6c6c6;--cds-border-subtle-selected-02: #c6c6c6;--cds-border-subtle-selected-03: #c6c6c6;--cds-border-tile-01: #a8a8a8;--cds-border-tile-02: #c6c6c6;--cds-border-tile-03: #a8a8a8;--cds-chat-avatar-agent: #393939;--cds-chat-avatar-bot: #6f6f6f;--cds-chat-avatar-user: #0f62fe;--cds-chat-bubble-agent: #ffffff;--cds-chat-bubble-border: #e0e0e0;--cds-chat-bubble-user: #e0e0e0;--cds-chat-button: #0f62fe;--cds-chat-button-active: rgba(141, 141, 141, .5);--cds-chat-button-hover: rgba(141, 141, 141, .12);--cds-chat-button-selected: rgba(141, 141, 141, .2);--cds-chat-button-text-hover: #0043ce;--cds-chat-button-text-selected: #525252;--cds-chat-header-background: #ffffff;--cds-chat-prompt-background: #ffffff;--cds-chat-prompt-border-end: rgba(244, 244, 244, 0);--cds-chat-prompt-border-start: #f4f4f4;--cds-chat-shell-background: #ffffff;--cds-field-01: #f4f4f4;--cds-field-02: #f4f4f4;--cds-field-03: #ffffff;--cds-field-hover-01: #e8e8e8;--cds-field-hover-02: #e8e8e8;--cds-field-hover-03: #e8e8e8;--cds-focus: #25828e;--cds-focus-inset: #aee3ea;--cds-focus-inverse: #5ec7d5;--cds-highlight: #d0e2ff;--cds-icon-disabled: rgba(22, 22, 22, .25);--cds-icon-interactive: #0f62fe;--cds-icon-inverse: #ffffff;--cds-icon-on-color: #ffffff;--cds-icon-on-color-disabled: #8d8d8d;--cds-icon-primary: #161616;--cds-icon-secondary: #343a40;--cds-interactive: #25828e;--cds-layer-01: #f8f9fa;--cds-layer-02: #f4f4f4;--cds-layer-03: #ffffff;--cds-layer-accent-01: #e0e0e0;--cds-layer-accent-02: #e0e0e0;--cds-layer-accent-03: #e0e0e0;--cds-layer-accent-active-01: #a8a8a8;--cds-layer-accent-active-02: #a8a8a8;--cds-layer-accent-active-03: #a8a8a8;--cds-layer-accent-hover-01: #d1d1d1;--cds-layer-accent-hover-02: #d1d1d1;--cds-layer-accent-hover-03: #d1d1d1;--cds-layer-active-01: #c6c6c6;--cds-layer-active-02: #c6c6c6;--cds-layer-active-03: #c6c6c6;--cds-layer-background-01: #f4f4f4;--cds-layer-background-02: #ffffff;--cds-layer-background-03: #f4f4f4;--cds-layer-hover-01: #e0e0e0;--cds-layer-hover-02: #e8e8e8;--cds-layer-hover-03: #e8e8e8;--cds-layer-selected-01: #e0e0e0;--cds-layer-selected-02: #e0e0e0;--cds-layer-selected-03: #e0e0e0;--cds-layer-selected-disabled: #8d8d8d;--cds-layer-selected-hover-01: #d1d1d1;--cds-layer-selected-hover-02: #d1d1d1;--cds-layer-selected-hover-03: #d1d1d1;--cds-layer-selected-inverse: #161616;--cds-link-inverse: #374249;--cds-link-inverse-active: #f4f4f4;--cds-link-inverse-hover: #a6c8ff;--cds-link-inverse-visited: #be95ff;--cds-link-primary: #25828e;--cds-link-primary-hover: #374249;--cds-link-secondary: #374249;--cds-link-visited: #374249;--cds-overlay: rgba(22, 22, 22, .5);--cds-shadow: rgba(0, 0, 0, .3);--cds-skeleton-background: #e8e8e8;--cds-skeleton-element: #c6c6c6;--cds-support-caution-major: #ff832b;--cds-support-caution-minor: #f1c21b;--cds-support-caution-undefined: #8a3ffc;--cds-support-error: #da1e28;--cds-support-error-inverse: #fa4d56;--cds-support-info: #25828e;--cds-support-info-inverse: #4589ff;--cds-support-success: #24a148;--cds-support-success-inverse: #42be65;--cds-support-warning: #f1c21b;--cds-support-warning-inverse: #f1c21b;--cds-text-disabled: #adb5bd;--cds-text-error: #da1e28;--cds-text-helper: #6f6f6f;--cds-text-inverse: #343a40;--cds-text-on-color: #ffffff;--cds-text-on-color-disabled: #8d8d8d;--cds-text-placeholder: rgba(22, 22, 22, .4);--cds-text-primary: #343a40;--cds-text-secondary: #343a40;--cds-toggle-off: #8d8d8d;--cds-spacing-01: .125rem;--cds-spacing-02: .25rem;--cds-spacing-03: .5rem;--cds-spacing-04: .75rem;--cds-spacing-05: 1rem;--cds-spacing-06: 1.5rem;--cds-spacing-07: 2rem;--cds-spacing-08: 2.5rem;--cds-spacing-09: 3rem;--cds-spacing-10: 4rem;--cds-spacing-11: 5rem;--cds-spacing-12: 6rem;--cds-spacing-13: 10rem;--cds-fluid-spacing-01: 0;--cds-fluid-spacing-02: 2vw;--cds-fluid-spacing-03: 5vw;--cds-fluid-spacing-04: 10vw;--cds-caption-01-font-size: .75rem;--cds-caption-01-font-weight: 400;--cds-caption-01-line-height: 1.33333;--cds-caption-01-letter-spacing: .32px;--cds-caption-02-font-size: .875rem;--cds-caption-02-font-weight: 400;--cds-caption-02-line-height: 1.28572;--cds-caption-02-letter-spacing: .32px;--cds-label-01-font-size: .75rem;--cds-label-01-font-weight: 400;--cds-label-01-line-height: 1.33333;--cds-label-01-letter-spacing: .32px;--cds-label-02-font-size: .875rem;--cds-label-02-font-weight: 400;--cds-label-02-line-height: 1.28572;--cds-label-02-letter-spacing: .16px;--cds-helper-text-01-font-size: .75rem;--cds-helper-text-01-line-height: 1.33333;--cds-helper-text-01-letter-spacing: .32px;--cds-helper-text-02-font-size: .875rem;--cds-helper-text-02-font-weight: 400;--cds-helper-text-02-line-height: 1.28572;--cds-helper-text-02-letter-spacing: .16px;--cds-body-short-01-font-size: .875rem;--cds-body-short-01-font-weight: 400;--cds-body-short-01-line-height: 1.28572;--cds-body-short-01-letter-spacing: .16px;--cds-body-short-02-font-size: 1rem;--cds-body-short-02-font-weight: 400;--cds-body-short-02-line-height: 1.375;--cds-body-short-02-letter-spacing: 0;--cds-body-long-01-font-size: .875rem;--cds-body-long-01-font-weight: 400;--cds-body-long-01-line-height: 1.42857;--cds-body-long-01-letter-spacing: .16px;--cds-body-long-02-font-size: 1rem;--cds-body-long-02-font-weight: 400;--cds-body-long-02-line-height: 1.5;--cds-body-long-02-letter-spacing: 0;--cds-code-01-font-family: "IBM Plex Mono", system-ui, -apple-system, BlinkMacSystemFont, ".SFNSText-Regular", monospace;--cds-code-01-font-size: .75rem;--cds-code-01-font-weight: 400;--cds-code-01-line-height: 1.33333;--cds-code-01-letter-spacing: .32px;--cds-code-02-font-family: "IBM Plex Mono", system-ui, -apple-system, BlinkMacSystemFont, ".SFNSText-Regular", monospace;--cds-code-02-font-size: .875rem;--cds-code-02-font-weight: 400;--cds-code-02-line-height: 1.42857;--cds-code-02-letter-spacing: .32px;--cds-heading-01-font-size: .875rem;--cds-heading-01-font-weight: 600;--cds-heading-01-line-height: 1.42857;--cds-heading-01-letter-spacing: .16px;--cds-heading-02-font-size: 1rem;--cds-heading-02-font-weight: 600;--cds-heading-02-line-height: 1.5;--cds-heading-02-letter-spacing: 0;--cds-productive-heading-01-font-size: .875rem;--cds-productive-heading-01-font-weight: 600;--cds-productive-heading-01-line-height: 1.28572;--cds-productive-heading-01-letter-spacing: .16px;--cds-productive-heading-02-font-size: 1rem;--cds-productive-heading-02-font-weight: 600;--cds-productive-heading-02-line-height: 1.375;--cds-productive-heading-02-letter-spacing: 0;--cds-productive-heading-03-font-size: 1.25rem;--cds-productive-heading-03-font-weight: 400;--cds-productive-heading-03-line-height: 1.4;--cds-productive-heading-03-letter-spacing: 0;--cds-productive-heading-04-font-size: 1.75rem;--cds-productive-heading-04-font-weight: 400;--cds-productive-heading-04-line-height: 1.28572;--cds-productive-heading-04-letter-spacing: 0;--cds-productive-heading-05-font-size: 2rem;--cds-productive-heading-05-font-weight: 400;--cds-productive-heading-05-line-height: 1.25;--cds-productive-heading-05-letter-spacing: 0;--cds-productive-heading-06-font-size: 2.625rem;--cds-productive-heading-06-font-weight: 300;--cds-productive-heading-06-line-height: 1.199;--cds-productive-heading-06-letter-spacing: 0;--cds-productive-heading-07-font-size: 3.375rem;--cds-productive-heading-07-font-weight: 300;--cds-productive-heading-07-line-height: 1.19;--cds-productive-heading-07-letter-spacing: 0;--cds-expressive-paragraph-01-font-size: 1.5rem;--cds-expressive-paragraph-01-font-weight: 300;--cds-expressive-paragraph-01-line-height: 1.334;--cds-expressive-paragraph-01-letter-spacing: 0;--cds-expressive-heading-01-font-size: .875rem;--cds-expressive-heading-01-font-weight: 600;--cds-expressive-heading-01-line-height: 1.42857;--cds-expressive-heading-01-letter-spacing: .16px;--cds-expressive-heading-02-font-size: 1rem;--cds-expressive-heading-02-font-weight: 600;--cds-expressive-heading-02-line-height: 1.5;--cds-expressive-heading-02-letter-spacing: 0;--cds-expressive-heading-03-font-size: 1.25rem;--cds-expressive-heading-03-font-weight: 400;--cds-expressive-heading-03-line-height: 1.4;--cds-expressive-heading-03-letter-spacing: 0;--cds-expressive-heading-04-font-size: 1.75rem;--cds-expressive-heading-04-font-weight: 400;--cds-expressive-heading-04-line-height: 1.28572;--cds-expressive-heading-04-letter-spacing: 0;--cds-expressive-heading-05-font-size: 2rem;--cds-expressive-heading-05-font-weight: 400;--cds-expressive-heading-05-line-height: 1.25;--cds-expressive-heading-05-letter-spacing: 0;--cds-expressive-heading-06-font-size: 2rem;--cds-expressive-heading-06-font-weight: 600;--cds-expressive-heading-06-line-height: 1.25;--cds-expressive-heading-06-letter-spacing: 0;--cds-quotation-01-font-family: "IBM Plex Serif", system-ui, -apple-system, BlinkMacSystemFont, ".SFNSText-Regular", serif;--cds-quotation-01-font-size: 1.25rem;--cds-quotation-01-font-weight: 400;--cds-quotation-01-line-height: 1.3;--cds-quotation-01-letter-spacing: 0;--cds-quotation-02-font-family: "IBM Plex Serif", system-ui, -apple-system, BlinkMacSystemFont, ".SFNSText-Regular", serif;--cds-quotation-02-font-size: 2rem;--cds-quotation-02-font-weight: 300;--cds-quotation-02-line-height: 1.25;--cds-quotation-02-letter-spacing: 0;--cds-display-01-font-size: 2.625rem;--cds-display-01-font-weight: 300;--cds-display-01-line-height: 1.19;--cds-display-01-letter-spacing: 0;--cds-display-02-font-size: 2.625rem;--cds-display-02-font-weight: 600;--cds-display-02-line-height: 1.19;--cds-display-02-letter-spacing: 0;--cds-display-03-font-size: 2.625rem;--cds-display-03-font-weight: 300;--cds-display-03-line-height: 1.19;--cds-display-03-letter-spacing: 0;--cds-display-04-font-size: 2.625rem;--cds-display-04-font-weight: 300;--cds-display-04-line-height: 1.19;--cds-display-04-letter-spacing: 0;--cds-legal-01-font-size: .75rem;--cds-legal-01-font-weight: 400;--cds-legal-01-line-height: 1.33333;--cds-legal-01-letter-spacing: .32px;--cds-legal-02-font-size: .875rem;--cds-legal-02-font-weight: 400;--cds-legal-02-line-height: 1.28572;--cds-legal-02-letter-spacing: .16px;--cds-body-compact-01-font-size: .875rem;--cds-body-compact-01-font-weight: 400;--cds-body-compact-01-line-height: 1.28572;--cds-body-compact-01-letter-spacing: .16px;--cds-body-compact-02-font-size: 1rem;--cds-body-compact-02-font-weight: 400;--cds-body-compact-02-line-height: 1.375;--cds-body-compact-02-letter-spacing: 0;--cds-heading-compact-01-font-size: .875rem;--cds-heading-compact-01-font-weight: 600;--cds-heading-compact-01-line-height: 1.28572;--cds-heading-compact-01-letter-spacing: .16px;--cds-heading-compact-02-font-size: 1rem;--cds-heading-compact-02-font-weight: 600;--cds-heading-compact-02-line-height: 1.375;--cds-heading-compact-02-letter-spacing: 0;--cds-body-01-font-size: .875rem;--cds-body-01-font-weight: 400;--cds-body-01-line-height: 1.42857;--cds-body-01-letter-spacing: .16px;--cds-body-02-font-size: 1rem;--cds-body-02-font-weight: 400;--cds-body-02-line-height: 1.5;--cds-body-02-letter-spacing: 0;--cds-heading-03-font-size: 1.25rem;--cds-heading-03-font-weight: 400;--cds-heading-03-line-height: 1.4;--cds-heading-03-letter-spacing: 0;--cds-heading-04-font-size: 1.75rem;--cds-heading-04-font-weight: 400;--cds-heading-04-line-height: 1.28572;--cds-heading-04-letter-spacing: 0;--cds-heading-05-font-size: 2rem;--cds-heading-05-font-weight: 400;--cds-heading-05-line-height: 1.25;--cds-heading-05-letter-spacing: 0;--cds-heading-06-font-size: 2.625rem;--cds-heading-06-font-weight: 300;--cds-heading-06-line-height: 1.199;--cds-heading-06-letter-spacing: 0;--cds-heading-07-font-size: 3.375rem;--cds-heading-07-font-weight: 300;--cds-heading-07-line-height: 1.19;--cds-heading-07-letter-spacing: 0;--cds-fluid-heading-03-font-size: 1.25rem;--cds-fluid-heading-03-font-weight: 400;--cds-fluid-heading-03-line-height: 1.4;--cds-fluid-heading-03-letter-spacing: 0;--cds-fluid-heading-04-font-size: 1.75rem;--cds-fluid-heading-04-font-weight: 400;--cds-fluid-heading-04-line-height: 1.28572;--cds-fluid-heading-04-letter-spacing: 0;--cds-fluid-heading-05-font-size: 2rem;--cds-fluid-heading-05-font-weight: 400;--cds-fluid-heading-05-line-height: 1.25;--cds-fluid-heading-05-letter-spacing: 0;--cds-fluid-heading-06-font-size: 2rem;--cds-fluid-heading-06-font-weight: 600;--cds-fluid-heading-06-line-height: 1.25;--cds-fluid-heading-06-letter-spacing: 0;--cds-fluid-paragraph-01-font-size: 1.5rem;--cds-fluid-paragraph-01-font-weight: 300;--cds-fluid-paragraph-01-line-height: 1.334;--cds-fluid-paragraph-01-letter-spacing: 0;--cds-fluid-quotation-01-font-family: "IBM Plex Serif", system-ui, -apple-system, BlinkMacSystemFont, ".SFNSText-Regular", serif;--cds-fluid-quotation-01-font-size: 1.25rem;--cds-fluid-quotation-01-font-weight: 400;--cds-fluid-quotation-01-line-height: 1.3;--cds-fluid-quotation-01-letter-spacing: 0;--cds-fluid-quotation-02-font-family: "IBM Plex Serif", system-ui, -apple-system, BlinkMacSystemFont, ".SFNSText-Regular", serif;--cds-fluid-quotation-02-font-size: 2rem;--cds-fluid-quotation-02-font-weight: 300;--cds-fluid-quotation-02-line-height: 1.25;--cds-fluid-quotation-02-letter-spacing: 0;--cds-fluid-display-01-font-size: 2.625rem;--cds-fluid-display-01-font-weight: 300;--cds-fluid-display-01-line-height: 1.19;--cds-fluid-display-01-letter-spacing: 0;--cds-fluid-display-02-font-size: 2.625rem;--cds-fluid-display-02-font-weight: 600;--cds-fluid-display-02-line-height: 1.19;--cds-fluid-display-02-letter-spacing: 0;--cds-fluid-display-03-font-size: 2.625rem;--cds-fluid-display-03-font-weight: 300;--cds-fluid-display-03-line-height: 1.19;--cds-fluid-display-03-letter-spacing: 0;--cds-fluid-display-04-font-size: 2.625rem;--cds-fluid-display-04-font-weight: 300;--cds-fluid-display-04-line-height: 1.19;--cds-fluid-display-04-letter-spacing: 0;--cds-active-danger: #750e13;--cds-active-light-ui: #c6c6c6;--cds-active-primary: #002d9c;--cds-active-secondary: #6f6f6f;--cds-active-tertiary: #002d9c;--cds-active-ui: #c6c6c6;--cds-button-separator: #e0e0e0;--cds-danger-01: #da1e28;--cds-danger-02: #da1e28;--cds-decorative-01: #e0e0e0;--cds-disabled-01: #ffffff;--cds-disabled-02: #c6c6c6;--cds-disabled-03: #8d8d8d;--cds-hover-danger: #b81921;--cds-hover-field: #e5e5e5;--cds-hover-light-ui: #e5e5e5;--cds-hover-primary: #0353e9;--cds-hover-primary-text: #0043ce;--cds-hover-row: #e5e5e5;--cds-hover-secondary: #4c4c4c;--cds-hover-selected-ui: #cacaca;--cds-hover-tertiary: #0353e9;--cds-hover-ui: #e5e5e5;--cds-icon-01: #161616;--cds-icon-02: #525252;--cds-icon-03: #ffffff;--cds-interactive-01: #0f62fe;--cds-interactive-02: #393939;--cds-interactive-03: #0f62fe;--cds-interactive-04: #0f62fe;--cds-inverse-01: #ffffff;--cds-inverse-02: #393939;--cds-inverse-focus-ui: #ffffff;--cds-inverse-hover-ui: #4c4c4c;--cds-inverse-link: #78a9ff;--cds-inverse-support-01: #fa4d56;--cds-inverse-support-02: #42be65;--cds-inverse-support-03: #f1c21b;--cds-inverse-support-04: #4589ff;--cds-link-01: #0f62fe;--cds-link-02: #0043ce;--cds-overlay-01: rgba(22, 22, 22, .5);--cds-selected-light-ui: #e0e0e0;--cds-selected-ui: #e0e0e0;--cds-skeleton-01: #e5e5e5;--cds-skeleton-02: #c6c6c6;--cds-support-01: #da1e28;--cds-support-02: #198038;--cds-support-03: #f1c21b;--cds-support-04: #0043ce;--cds-text-01: #161616;--cds-text-02: #525252;--cds-text-03: #a8a8a8;--cds-text-04: #ffffff;--cds-text-05: #6f6f6f;--cds-ui-01: #ffffff;--cds-ui-02: #f4f4f4;--cds-ui-03: #e0e0e0;--cds-ui-04: #8d8d8d;--cds-ui-05: #161616;--cds-ui-background: #f4f4f4;--cds-visited-link: #8a3ffc;--cds-layer: var(--cds-layer-01, #f4f4f4);--cds-layer-active: var(--cds-layer-active-01, #c6c6c6);--cds-layer-background: var(--cds-layer-background-01, #ffffff);--cds-layer-hover: var(--cds-layer-hover-01, #e8e8e8);--cds-layer-selected: var(--cds-layer-selected-01, #e0e0e0);--cds-layer-selected-hover: var(--cds-layer-selected-hover-01, #d1d1d1);--cds-layer-accent: var(--cds-layer-accent-01, #e0e0e0);--cds-layer-accent-hover: var(--cds-layer-accent-hover-01, #d1d1d1);--cds-layer-accent-active: var(--cds-layer-accent-active-01, #a8a8a8);--cds-field: var(--cds-field-01, #f4f4f4);--cds-field-hover: var(--cds-field-hover-01, #e8e8e8);--cds-border-subtle: var(--cds-border-subtle-00, #e0e0e0);--cds-border-subtle-selected: var(--cds-border-subtle-selected-01, #c6c6c6);--cds-border-strong: var(--cds-border-strong-01, #8d8d8d);--cds-border-tile: var(--cds-border-tile-01, #c6c6c6)}@media screen and (-ms-high-contrast: active),(forced-colors: active){.content-theme[_ngcontent-%COMP%]{--cds-icon-primary: ButtonText;--cds-icon-secondary: ButtonText;--cds-icon-interactive: ButtonText;--cds-icon-disabled: GrayText;--cds-icon-on-color-disabled: GrayText;--cds-icon-inverse: SelectedItemText;--cds-icon-on-color: SelectedItemText;--cds-button-disabled: GrayText;--cds-interactive: ButtonText;--cds-link-primary: LinkText;--cds-link-primary-hover: LinkText;--cds-link-secondary: LinkText;--cds-link-inverse: SelectedItemText;--cds-link-inverse-hover: SelectedItemText;--cds-link-inverse-visited: SelectedItemText;--cds-link-visited: VisitedText;--cds-background-selected: SelectedItem;--cds-background-selected-hover: SelectedItem;--cds-background-inverse: SelectedItem;--cds-layer-selected-inverse: SelectedItem}}.modal-header[_ngcontent-%COMP%]{background-color:#e9ecef;border-bottom:1px solid #ced4da;border-radius:5px 5px 0 0}  cd-modal .modal-footer{background-color:#e9ecef;border-bottom:1px solid #ced4da;border-radius:0 0 5px 5px}  cd-modal .modal-body{max-height:70vh;overflow-x:hidden;overflow-y:auto}  cd-modal .modal-content{display:table}button.close[_ngcontent-%COMP%]{outline:none}']})}}return N})()},55989:(q,y,s)=>{s.d(y,{X:()=>B});var a=s(46045),e=s(87536),h=s(91974),S=s(77317);const v=w=>({"mt-3":w}),E=(w,ie)=>[w,ie],C=(w,ie,Y)=>[w,ie,Y],d=()=>["mt-3","mb-4"];function u(w,ie){if(1&w&&e.\u0275\u0275element(0,"i",17),2&w){const Y=e.\u0275\u0275nextContext(2);e.\u0275\u0275property("ngClass",e.\u0275\u0275pureFunction2(1,E,Y.icons.large,Y.icons.spinner))}}function N(w,ie){if(1&w&&e.\u0275\u0275element(0,"i",17),2&w){const Y=e.\u0275\u0275nextContext(2);e.\u0275\u0275property("ngClass",e.\u0275\u0275pureFunction3(1,C,Y.icons.large,Y.icons.spin,Y.icons.spinner))}}function M(w,ie){if(1&w&&(e.\u0275\u0275elementStart(0,"h3",15),e.\u0275\u0275template(1,u,1,4,"i",16)(2,N,1,5,"ng-template",null,0,e.\u0275\u0275templateRefExtractor),e.\u0275\u0275elementEnd()),2&w){const Y=e.\u0275\u0275reference(3),V=e.\u0275\u0275nextContext();e.\u0275\u0275property("ngClass",e.\u0275\u0275pureFunction1(3,v,"in-progress"===V.status&&V.isPaused)),e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf","in-progress"===V.status&&V.isPaused)("ngIfElse",Y)}}function I(w,ie){if(1&w&&(e.\u0275\u0275elementStart(0,"h3",15),e.\u0275\u0275text(1),e.\u0275\u0275elementEnd()),2&w){const Y=e.\u0275\u0275nextContext();e.\u0275\u0275property("ngClass","in-progress"===Y.status&&Y.isPaused?e.\u0275\u0275pureFunction0(2,d):"mt-2"),e.\u0275\u0275advance(),e.\u0275\u0275textInterpolate1(" ",Y.label," ")}}function O(w,ie){if(1&w&&(e.\u0275\u0275elementStart(0,"h5",18),e.\u0275\u0275text(1),e.\u0275\u0275elementEnd()),2&w){const Y=e.\u0275\u0275nextContext();e.\u0275\u0275advance(),e.\u0275\u0275textInterpolate1(" ",Y.subLabel," ")}}function f(w,ie){if(1&w&&(e.\u0275\u0275elementStart(0,"h5",18),e.\u0275\u0275text(1),e.\u0275\u0275elementEnd()),2&w){const Y=e.\u0275\u0275nextContext();e.\u0275\u0275advance(),e.\u0275\u0275textInterpolate1(" ",Y.description," ")}}function g(w,ie){if(1&w&&(e.\u0275\u0275elementStart(0,"p",19),e.\u0275\u0275text(1),e.\u0275\u0275elementEnd()),2&w){const Y=e.\u0275\u0275nextContext();e.\u0275\u0275advance(),e.\u0275\u0275textInterpolate1(" ",Y.subDescription," ")}}function P(w,ie){if(1&w&&(e.\u0275\u0275elementContainerStart(0),e.\u0275\u0275i18nStart(1,1),e.\u0275\u0275element(2,"span",20),e.\u0275\u0275i18nEnd(),e.\u0275\u0275elementContainerEnd()),2&w){const Y=e.\u0275\u0275nextContext();e.\u0275\u0275advance(2),e.\u0275\u0275i18nExp(Y.actionName)(Y.completedItems),e.\u0275\u0275i18nApply(1)}}function A(w,ie){if(1&w&&(e.\u0275\u0275elementStart(0,"h4",21),e.\u0275\u0275text(1),e.\u0275\u0275elementEnd()),2&w){const Y=e.\u0275\u0275nextContext();e.\u0275\u0275advance(),e.\u0275\u0275textInterpolate1(" ",Y.helperText," ")}}function _(w,ie){if(1&w&&(e.\u0275\u0275elementStart(0,"h5",22),e.\u0275\u0275text(1),e.\u0275\u0275elementEnd()),2&w){const Y=e.\u0275\u0275nextContext();e.\u0275\u0275advance(),e.\u0275\u0275textInterpolate1(" ",Y.footerText," ")}}let B=(()=>{class w{constructor(){this.icons=a.FI}static{this.\u0275fac=function(V){return new(V||w)}}static{this.\u0275cmp=e.\u0275\u0275defineComponent({type:w,selectors:[["cd-progress"]],inputs:{value:"value",label:"label",status:"status",description:"description",subLabel:"subLabel",subDescription:"subDescription",completedItems:"completedItems",actionName:"actionName",helperText:"helperText",footerText:"footerText",isPaused:"isPaused"},decls:17,vars:12,consts:()=>{let Y;return Y=$localize`:␟34284a1320026d7385148b552bcffa9f44f76d3b␟3434207754914170130: Finished ${"\ufffd0\ufffd"}:INTERPOLATION:: ${"\ufffd#2\ufffd"}:START_TAG_SPAN: ${"\ufffd1\ufffd"}:INTERPOLATION_1: ${"\ufffd/#2\ufffd"}:CLOSE_TAG_SPAN:`,[["spinningIcon",""],Y,[1,"d-flex","flex-column","justify-content-center","align-items-center","bold"],["class","text-center",3,"ngClass",4,"ngIf"],["class","text-center mt-3",4,"ngIf"],["class","text-center text-muted mt-3",4,"ngIf"],[1,"w-50","row","h-100","d-flex","justify-content-center","align-items-center","mt-4"],[1,"text-center","w-75"],[4,"ngIf"],[1,"mt-2"],["type","info",3,"value","striped","animated"],[1,"card-text","text-muted"],[1,"float-end"],["class","text-center m-2",4,"ngIf"],["class","text-center mt-2",4,"ngIf"],[1,"text-center",3,"ngClass"],[3,"ngClass",4,"ngIf","ngIfElse"],[3,"ngClass"],[1,"text-center","mt-3"],[1,"text-center","text-muted","mt-3"],[1,"text-success"],[1,"text-center","m-2"],[1,"text-center","mt-2"]]},template:function(V,L){1&V&&(e.\u0275\u0275elementStart(0,"div",2),e.\u0275\u0275elementContainerStart(1),e.\u0275\u0275template(2,M,4,5,"h3",3)(3,I,2,3,"h3",3)(4,O,2,1,"h5",4)(5,f,2,1,"h5",4)(6,g,2,1,"p",5),e.\u0275\u0275elementContainerEnd(),e.\u0275\u0275elementStart(7,"div",6)(8,"div",7),e.\u0275\u0275template(9,P,3,2,"ng-container",8),e.\u0275\u0275elementStart(10,"div",9),e.\u0275\u0275element(11,"ngb-progressbar",10),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(12,"p",11)(13,"span",12),e.\u0275\u0275text(14),e.\u0275\u0275elementEnd()()(),e.\u0275\u0275template(15,A,2,1,"h4",13)(16,_,2,1,"h5",14),e.\u0275\u0275elementEnd()()),2&V&&(e.\u0275\u0275advance(2),e.\u0275\u0275property("ngIf",!L.value||"upgrading"===L.actionName),e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf",L.label),e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf",L.subLabel&&"in-progress"===L.status&&!L.isPaused),e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf",L.description),e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf",L.subDescription),e.\u0275\u0275advance(3),e.\u0275\u0275property("ngIf",L.completedItems&&L.completedItems.length>0),e.\u0275\u0275advance(2),e.\u0275\u0275property("value",L.value)("striped",!0)("animated",!L.isPaused),e.\u0275\u0275advance(3),e.\u0275\u0275textInterpolate1("",L.value||0," %"),e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf",L.helperText),e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf",L.footerText))},dependencies:[h.NgClass,h.NgIf,S.NgbProgressbar]})}}return w})()},48693:(q,y,s)=>{s.d(y,{U:()=>u});var a=s(87536),l=s(46045),h=s(66668),R=s(92619),S=s(91974),v=s(3600);const C=["cdSelect"];function d(N,M){if(1&N){const I=a.\u0275\u0275getCurrentView();a.\u0275\u0275elementStart(0,"span")(1,"span",4)(2,"span",5),a.\u0275\u0275text(3),a.\u0275\u0275elementEnd(),a.\u0275\u0275elementStart(4,"a",6),a.\u0275\u0275listener("click",function(){const f=a.\u0275\u0275restoreView(I).$implicit;a.\u0275\u0275nextContext();const g=a.\u0275\u0275reference(1);return a.\u0275\u0275resetView(g.removeItem(f))}),a.\u0275\u0275namespaceSVG(),a.\u0275\u0275element(5,"svg",7),a.\u0275\u0275elementEnd()()()}if(2&N){const I=M.$implicit,O=a.\u0275\u0275nextContext();a.\u0275\u0275advance(3),a.\u0275\u0275textInterpolate(I),a.\u0275\u0275advance(2),a.\u0275\u0275property("cdsIcon",O.icons.destroy)("size",O.icons.size20)}}let u=(()=>{class N{constructor(){this.data=[],this.options=[],this.messages=new h.z({}),this.customBadges=!1,this.customBadgeValidators=[],this.selection=new a.EventEmitter,this.icons=l.FI}static{this.\u0275fac=function(O){return new(O||N)}}static{this.\u0275cmp=a.\u0275\u0275defineComponent({type:N,selectors:[["cd-select-badges"]],viewQuery:function(O,f){if(1&O&&a.\u0275\u0275viewQuery(C,7),2&O){let g;a.\u0275\u0275queryRefresh(g=a.\u0275\u0275loadQuery())&&(f.cdSelect=g.first)}},inputs:{data:"data",options:"options",messages:"messages",selectionLimit:"selectionLimit",customBadges:"customBadges",customBadgeValidators:"customBadgeValidators"},outputs:{selection:"selection"},decls:4,vars:9,consts:[["cdSelect",""],["elemClass","me-2 select-menu-edit",3,"selection","data","options","messages","selectionLimit","customBadges","customBadgeValidators"],[1,"cds-info-color",3,"cdsIcon","size"],[4,"ngFor","ngForOf"],[1,"badge","badge-dark","me-2"],[1,"me-2"],[1,"badge-remove",3,"click"],[1,"cds-white",3,"cdsIcon","size"]],template:function(O,f){if(1&O){const g=a.\u0275\u0275getCurrentView();a.\u0275\u0275elementStart(0,"cd-select",1,0),a.\u0275\u0275listener("selection",function(A){return a.\u0275\u0275restoreView(g),a.\u0275\u0275resetView(f.selection.emit(A))}),a.\u0275\u0275namespaceSVG(),a.\u0275\u0275element(2,"svg",2),a.\u0275\u0275elementEnd(),a.\u0275\u0275template(3,d,6,3,"span",3)}2&O&&(a.\u0275\u0275property("data",f.data)("options",f.options)("messages",f.messages)("selectionLimit",f.selectionLimit)("customBadges",f.customBadges)("customBadgeValidators",f.customBadgeValidators),a.\u0275\u0275advance(2),a.\u0275\u0275property("cdsIcon",f.icons.edit)("size",f.icons.size20),a.\u0275\u0275advance(),a.\u0275\u0275property("ngForOf",f.data))},dependencies:[S.NgForOf,v.IconDirective,R.w],styles:[".badge-remove[_ngcontent-%COMP%]{color:#fff}i.fa-pencil[_ngcontent-%COMP%]{font-size:1.1rem}"]})}}return N})()},66668:(q,y,s)=>{s.d(y,{z:()=>l});var a=s(29841),e=s.n(a);class l{constructor(R){this.customValidations={},this.empty=$localize`No items selected.`,this.selectionLimit={tooltip:$localize`Deselect item to select again`,text:$localize`Selection limit reached`},this.filter=$localize`Filter tags`,this.add=$localize`Add badge`,this.noOptions=$localize`There are no items available.`,e().merge(this,R)}}},31345:(q,y,s)=>{s.d(y,{O:()=>a});class a{constructor(l,h,R,S=!0){this.selected=l,this.name=h,this.description=R,this.enabled=S}}},92619:(q,y,s)=>{s.d(y,{w:()=>We});var a=s(87536),l=s(53648),R=s(29841),S=s.n(R),m=s(46045),v=s(58384),E=s(66668),C=s(31345),d=s(91974),N=s(77317),I=s(90476),O=s(10142),f=s(37966);const g=["*"],P=te=>({"help-block disabled":te}),A=te=>[te];function _(te,_e){if(1&te&&(a.\u0275\u0275elementStart(0,"span",12),a.\u0275\u0275text(1),a.\u0275\u0275elementEnd()),2&te){const oe=a.\u0275\u0275nextContext().$implicit,de=a.\u0275\u0275nextContext(2);a.\u0275\u0275advance(),a.\u0275\u0275textInterpolate1(" ",de.messages.customValidations[oe]," ")}}function B(te,_e){if(1&te&&(a.\u0275\u0275elementContainerStart(0),a.\u0275\u0275template(1,_,2,1,"span",11),a.\u0275\u0275elementContainerEnd()),2&te){const oe=_e.$implicit;a.\u0275\u0275nextContext();const de=a.\u0275\u0275reference(1),ue=a.\u0275\u0275nextContext();a.\u0275\u0275advance(),a.\u0275\u0275property("ngIf",ue.form.showError("filter",de)&&ue.filter.hasError(oe))}}function w(te,_e){if(1&te&&a.\u0275\u0275element(0,"i",18),2&te){const oe=a.\u0275\u0275nextContext(3);a.\u0275\u0275property("ngClass",a.\u0275\u0275pureFunction1(1,A,oe.icons.check))}}function ie(te,_e){if(1&te&&(a.\u0275\u0275elementContainerStart(0),a.\u0275\u0275element(1,"br"),a.\u0275\u0275elementStart(2,"small",19),a.\u0275\u0275text(3),a.\u0275\u0275elementEnd(),a.\u0275\u0275elementContainerEnd()),2&te){const oe=a.\u0275\u0275nextContext().$implicit;a.\u0275\u0275advance(3),a.\u0275\u0275textInterpolate1(" ",oe.description,"\xa0 ")}}function Y(te,_e){if(1&te){const oe=a.\u0275\u0275getCurrentView();a.\u0275\u0275elementStart(0,"div",13),a.\u0275\u0275listener("click",function(){const ue=a.\u0275\u0275restoreView(oe).$implicit,T=a.\u0275\u0275nextContext(2);return a.\u0275\u0275resetView(T.triggerSelection(ue))}),a.\u0275\u0275elementStart(1,"div",14),a.\u0275\u0275template(2,w,1,3,"i",15),a.\u0275\u0275text(3," \xa0 "),a.\u0275\u0275elementEnd(),a.\u0275\u0275elementStart(4,"div",16),a.\u0275\u0275text(5),a.\u0275\u0275template(6,ie,4,1,"ng-container",17),a.\u0275\u0275elementEnd()()}if(2&te){const oe=_e.$implicit,de=a.\u0275\u0275nextContext(2);a.\u0275\u0275property("ngClass",a.\u0275\u0275pureFunction1(4,P,!(de.data.length!==de.selectionLimit&&oe.enabled||oe.selected))),a.\u0275\u0275advance(2),a.\u0275\u0275property("ngIf",oe.selected),a.\u0275\u0275advance(3),a.\u0275\u0275textInterpolate1(" ",oe.name," "),a.\u0275\u0275advance(),a.\u0275\u0275property("ngIf",oe.description)}}function V(te,_e){if(1&te){const oe=a.\u0275\u0275getCurrentView();a.\u0275\u0275elementStart(0,"div",20),a.\u0275\u0275listener("click",function(){a.\u0275\u0275restoreView(oe);const ue=a.\u0275\u0275nextContext(2);return a.\u0275\u0275resetView(ue.addCustomOption())}),a.\u0275\u0275elementStart(1,"div",14),a.\u0275\u0275element(2,"i",18),a.\u0275\u0275text(3," \xa0 "),a.\u0275\u0275elementEnd(),a.\u0275\u0275elementStart(4,"div",16),a.\u0275\u0275text(5),a.\u0275\u0275elementEnd()()}if(2&te){const oe=a.\u0275\u0275nextContext(2);a.\u0275\u0275advance(2),a.\u0275\u0275property("ngClass",a.\u0275\u0275pureFunction1(3,A,oe.icons.tag)),a.\u0275\u0275advance(3),a.\u0275\u0275textInterpolate2(" ",oe.messages.add," '",oe.filter.value,"' ")}}function L(te,_e){if(1&te&&(a.\u0275\u0275elementStart(0,"span",23),a.\u0275\u0275text(1),a.\u0275\u0275elementEnd()),2&te){const oe=a.\u0275\u0275nextContext(3);a.\u0275\u0275property("ngbTooltip",oe.messages.selectionLimit.tooltip),a.\u0275\u0275advance(),a.\u0275\u0275textInterpolate1(" ",oe.messages.selectionLimit.text," ")}}function Q(te,_e){if(1&te&&(a.\u0275\u0275elementStart(0,"div",21),a.\u0275\u0275template(1,L,2,2,"span",22),a.\u0275\u0275elementEnd()),2&te){const oe=a.\u0275\u0275nextContext(2);a.\u0275\u0275advance(),a.\u0275\u0275property("ngIf",oe.data.length===oe.selectionLimit)}}function me(te,_e){if(1&te){const oe=a.\u0275\u0275getCurrentView();a.\u0275\u0275elementStart(0,"form",5,1)(2,"div")(3,"input",6),a.\u0275\u0275listener("keyup",function(ue){a.\u0275\u0275restoreView(oe);const T=a.\u0275\u0275nextContext();return a.\u0275\u0275resetView(13===ue.keyCode?T.selectOption():T.updateFilter())}),a.\u0275\u0275elementEnd(),a.\u0275\u0275template(4,B,2,1,"ng-container",7),a.\u0275\u0275elementEnd()(),a.\u0275\u0275template(5,Y,7,6,"div",8)(6,V,6,5,"div",9)(7,Q,2,1,"div",10)}if(2&te){const oe=a.\u0275\u0275nextContext();a.\u0275\u0275property("formGroup",oe.form),a.\u0275\u0275advance(3),a.\u0275\u0275property("placeholder",oe.messages.filter),a.\u0275\u0275advance(),a.\u0275\u0275property("ngForOf",oe.Object.keys(oe.messages.customValidations)),a.\u0275\u0275advance(),a.\u0275\u0275property("ngForOf",oe.filteredOptions),a.\u0275\u0275advance(),a.\u0275\u0275property("ngIf",oe.isCreatable()),a.\u0275\u0275advance(),a.\u0275\u0275property("ngIf",oe.data.length===oe.selectionLimit)}}function Ie(te,_e){if(1&te&&(a.\u0275\u0275elementStart(0,"a",24),a.\u0275\u0275projection(1),a.\u0275\u0275elementEnd()),2&te){const oe=a.\u0275\u0275nextContext(),de=a.\u0275\u0275reference(1);a.\u0275\u0275property("ngClass",oe.elemClass)("ngbPopover",de)}}function He(te,_e){if(1&te&&(a.\u0275\u0275elementStart(0,"span",25),a.\u0275\u0275text(1),a.\u0275\u0275elementEnd()),2&te){const oe=a.\u0275\u0275nextContext();a.\u0275\u0275advance(),a.\u0275\u0275textInterpolate1(" ",oe.messages.empty,"\n")}}function Ae(te,_e){if(1&te&&(a.\u0275\u0275elementStart(0,"span",25),a.\u0275\u0275text(1),a.\u0275\u0275elementEnd()),2&te){const oe=a.\u0275\u0275nextContext();a.\u0275\u0275advance(),a.\u0275\u0275textInterpolate1(" ",oe.messages.noOptions,"\n")}}let We=(()=>{class te{constructor(){this.data=[],this.options=[],this.messages=new E.z({}),this.customBadges=!1,this.customBadgeValidators=[],this.selection=new a.EventEmitter,this.Object=Object,this.filteredOptions=[],this.icons=m.FI}ngOnInit(){this.initFilter(),this.data.length>0&&this.initMissingOptions(),this.options=S().sortBy(this.options,["name"]),this.updateOptions()}initFilter(){this.filter=new l.UntypedFormControl("",{validators:this.customBadgeValidators}),this.form=new v.$({filter:this.filter}),this.filteredOptions=[...this.options||[]]}initMissingOptions(){const oe=this.options.map(ue=>ue.name);this.data.filter(ue=>-1===oe.indexOf(ue)).forEach(ue=>this.addOption(ue)),this.forceOptionsToReflectData()}addOption(oe){this.options.push(new C.O(!1,oe,"")),this.options=S().sortBy(this.options,["name"]),this.triggerSelection(this.options.find(de=>de.name===oe))}triggerSelection(oe){!oe||this.selectionLimit&&!oe.selected&&this.data.length>=this.selectionLimit||(oe.selected=!oe.selected,this.updateOptions(),this.selection.emit({option:oe}))}updateOptions(){this.data.splice(0,this.data.length),this.options.forEach(oe=>{oe.selected&&this.data.push(oe.name)}),this.updateFilter()}updateFilter(){this.filteredOptions=this.options.filter(oe=>oe.name.includes(this.filter.value))}forceOptionsToReflectData(){this.options.forEach(oe=>{-1!==this.data.indexOf(oe.name)&&(oe.selected=!0)})}ngOnChanges(){this.filter&&this.updateFilter(),this.options&&this.data&&0!==this.data.length&&this.forceOptionsToReflectData()}selectOption(){0===this.filteredOptions.length?this.addCustomOption():(this.triggerSelection(this.filteredOptions[0]),this.resetFilter())}addCustomOption(){this.isCreatable()&&(this.addOption(this.filter.value),this.resetFilter())}isCreatable(){return this.customBadges&&this.filter.valid&&this.filter.value.length>0&&this.filteredOptions.every(oe=>oe.name!==this.filter.value)}resetFilter(){this.filter.setValue(""),this.updateFilter()}removeItem(oe){this.triggerSelection(this.options.find(de=>de.name===oe&&de.selected))}static{this.\u0275fac=function(de){return new(de||te)}}static{this.\u0275cmp=a.\u0275\u0275defineComponent({type:te,selectors:[["cd-select"]],inputs:{elemClass:"elemClass",data:"data",options:"options",messages:"messages",selectionLimit:"selectionLimit",customBadges:"customBadges",customBadgeValidators:"customBadgeValidators"},outputs:{selection:"selection"},features:[a.\u0275\u0275NgOnChangesFeature],ngContentSelectors:g,decls:5,vars:3,consts:[["popTemplate",""],["formDir","ngForm"],["class","select-menu-edit float-start","data-testid","select-menu-edit",3,"ngClass","ngbPopover",4,"ngIf"],["class","form-text text-muted float-start",4,"ngIf"],["class","form-text text-muted  float-start",4,"ngIf"],["name","form","novalidate","",3,"formGroup"],["type","text","formControlName","filter",1,"form-control","text-center",3,"keyup","placeholder"],[4,"ngFor","ngForOf"],["class","select-menu-item",3,"ngClass","click",4,"ngFor","ngForOf"],["class","select-menu-item",3,"click",4,"ngIf"],["class","is-invalid",4,"ngIf"],["class","invalid-feedback text-center d-block",4,"ngIf"],[1,"invalid-feedback","text-center","d-block"],[1,"select-menu-item",3,"click","ngClass"],[1,"select-menu-item-icon"],["aria-hidden","true",3,"ngClass",4,"ngIf"],[1,"select-menu-item-content"],[4,"ngIf"],["aria-hidden","true",3,"ngClass"],[1,"form-text","text-muted"],[1,"select-menu-item",3,"click"],[1,"is-invalid"],["class","form-text text-muted text-center text-warning",3,"ngbTooltip",4,"ngIf"],[1,"form-text","text-muted","text-center","text-warning",3,"ngbTooltip"],["data-testid","select-menu-edit",1,"select-menu-edit","float-start",3,"ngClass","ngbPopover"],[1,"form-text","text-muted","float-start"]],template:function(de,ue){1&de&&(a.\u0275\u0275projectionDef(),a.\u0275\u0275template(0,me,8,6,"ng-template",null,0,a.\u0275\u0275templateRefExtractor)(2,Ie,2,2,"a",2)(3,He,2,1,"span",3)(4,Ae,2,1,"span",4)),2&de&&(a.\u0275\u0275advance(2),a.\u0275\u0275property("ngIf",ue.customBadges||ue.options.length>0),a.\u0275\u0275advance(),a.\u0275\u0275property("ngIf",0===ue.data.length&&!(!ue.customBadges&&0===ue.options.length)),a.\u0275\u0275advance(),a.\u0275\u0275property("ngIf",!ue.customBadges&&0===ue.options.length))},dependencies:[d.NgClass,d.NgForOf,d.NgIf,l.\u0275NgNoValidate,l.DefaultValueAccessor,l.NgControlStatus,l.NgControlStatusGroup,l.FormGroupDirective,l.FormControlName,N.NgbPopover,N.NgbTooltip,I.S,O.a,f.E],styles:[".select-menu-item[_ngcontent-%COMP%]{border-bottom:1px solid rgba(0,0,0,.09);cursor:pointer;display:block;font-size:1rem}.select-menu-item[_ngcontent-%COMP%]:hover{background-color:#e9ecef}.select-menu-item-icon[_ngcontent-%COMP%]{float:left;padding:.5em;width:3em}.select-menu-item-content[_ngcontent-%COMP%]{padding:.5em}.select-menu-item-content[_ngcontent-%COMP%]   .form-text[_ngcontent-%COMP%]{display:flex}"]})}}return te})()},5661:(q,y,s)=>{s.d(y,{B:()=>d});var a=s(87536),l=s(6783),R=s(77847),S=s(73651),m=s(91974);const E=["sparkCanvas"],C=["sparkTooltip"];let d=(()=>{class u{constructor(M){this.dimlessBinaryPipe=M,this.style={height:"30px",width:"100px"},this.options={plugins:{legend:{display:!1},tooltip:{enabled:!1,mode:"index",intersect:!1,custom:void 0,callbacks:{label:I=>{if(I.parsed)return this.isBinary?this.dimlessBinaryPipe.transform(I.parsed.y):I.parsed.y},title:()=>""}}},animation:{duration:0},responsive:!0,maintainAspectRatio:!1,elements:{line:{borderWidth:1}},scales:{y:{display:!1},x:{display:!1}}},this.datasets=[{data:[],backgroundColor:"rgba(40,140,234,0.2)",borderColor:"rgba(40,140,234,1)",pointBackgroundColor:"rgba(40,140,234,1)",pointBorderColor:"#fff",pointHoverBackgroundColor:"#fff",pointHoverBorderColor:"rgba(40,140,234,0.8)"}],this.labels=[],this.chartData={datasets:this.datasets,labels:this.labels}}ngOnInit(){const O=new R.I(this.chartCanvasRef,this.chartTooltipRef,(f,g)=>g+f.caretX+"px",f=>f.caretY-f.height-6-5+"px");O.customColors={backgroundColor:this.datasets[0].pointBackgroundColor,borderColor:this.datasets[0].pointBorderColor},this.options.plugins.tooltip.external=f=>{O.customTooltips(f)}}ngOnChanges(M){this.chartData.datasets[0].data=M.data.currentValue,this.chartData.labels=[...Array(M.data.currentValue.length).fill("")],this.chart&&this.chart.chart.update()}static{this.\u0275fac=function(I){return new(I||u)(a.\u0275\u0275directiveInject(S.l))}}static{this.\u0275cmp=a.\u0275\u0275defineComponent({type:u,selectors:[["cd-sparkline"]],viewQuery:function(I,O){if(1&I&&(a.\u0275\u0275viewQuery(E,7),a.\u0275\u0275viewQuery(C,7),a.\u0275\u0275viewQuery(l.BaseChartDirective,5)),2&I){let f;a.\u0275\u0275queryRefresh(f=a.\u0275\u0275loadQuery())&&(O.chartCanvasRef=f.first),a.\u0275\u0275queryRefresh(f=a.\u0275\u0275loadQuery())&&(O.chartTooltipRef=f.first),a.\u0275\u0275queryRefresh(f=a.\u0275\u0275loadQuery())&&(O.chart=f.first)}},inputs:{data:"data",style:"style",isBinary:"isBinary"},features:[a.\u0275\u0275NgOnChangesFeature],decls:6,vars:4,consts:[["sparkCanvas",""],["sparkTooltip",""],[1,"chart-container",3,"ngStyle"],["baseChart","",3,"data","options","type"],[1,"chartjs-tooltip"]],template:function(I,O){1&I&&(a.\u0275\u0275elementStart(0,"div",2),a.\u0275\u0275element(1,"canvas",3,0),a.\u0275\u0275elementStart(3,"div",4,1),a.\u0275\u0275element(5,"table"),a.\u0275\u0275elementEnd()()),2&I&&(a.\u0275\u0275property("ngStyle",O.style),a.\u0275\u0275advance(),a.\u0275\u0275property("data",O.chartData)("options",O.options)("type","line"))},dependencies:[m.NgStyle,l.BaseChartDirective],styles:['.chart-container[_ngcontent-%COMP%]{cursor:pointer;margin:auto;overflow:visible;position:absolute}canvas[_ngcontent-%COMP%]{user-select:none}.chartjs-tooltip[_ngcontent-%COMP%]{background:#000000b3;border-radius:3px;color:#fff;font-family:Helvetica Neue,Helvetica,Arial,sans-serif!important;opacity:0;pointer-events:none;position:absolute;transform:translate(-50%);transition:all .1s ease}.chartjs-tooltip.transform-left[_ngcontent-%COMP%]{transform:translate(-10%)}.chartjs-tooltip.transform-left[_ngcontent-%COMP%]:after{left:10%}.chartjs-tooltip.transform-right[_ngcontent-%COMP%]{transform:translate(-90%)}.chartjs-tooltip.transform-right[_ngcontent-%COMP%]:after{left:90%}.chartjs-tooltip[_ngcontent-%COMP%]:after{border-color:#000 transparent transparent transparent;border-style:solid;border-width:5px;content:" ";left:50%;margin-left:-5px;position:absolute;top:100%}  .chartjs-tooltip-key{display:inline-block;height:10px;margin-right:10px;width:10px}.chart-container[_ngcontent-%COMP%]{position:static!important}']})}}return u})()},35141:(q,y,s)=>{s.d(y,{_:()=>O});var a=s(87536),l=s(53648),R=s(29841),S=s.n(R),m=s(46045),v=s(91974),C=s(90476),d=s(3600);const N=["*"],M=f=>({"w-100":f});function I(f,g){if(1&f&&a.\u0275\u0275element(0,"cds-loading",2),2&f){const P=a.\u0275\u0275nextContext();a.\u0275\u0275property("isActive",P.loading)("overlay",!1)}}let O=(()=>{class f{constructor(P){this.elRef=P,this.type="submit",this.disabled=!1,this.buttonType="primary",this.modalForm=!1,this.submitAction=new a.EventEmitter,this.loading=!1,this.icons=m.FI}ngOnInit(){this.form?.statusChanges.subscribe(()=>{S().has(this.form.errors,"cdSubmitButton")&&(this.loading=!1,S().unset(this.form.errors,"cdSubmitButton"),this.form instanceof l.AbstractControl&&this.form.updateValueAndValidity())})}submit(P){this.focusButton(),this.form instanceof l.FormGroupDirective&&this.form.onSubmit(P),this.form?.invalid?this.focusInvalid():(this.loading=!0,this.submitAction.emit())}focusButton(){this.elRef.nativeElement.offsetParent.querySelector(`button[type="${this.type}"]`).focus()}focusInvalid(){const P=this.elRef.nativeElement.offsetParent.querySelector("input.ng-invalid, select.ng-invalid");P&&P.focus()}static{this.\u0275fac=function(A){return new(A||f)(a.\u0275\u0275directiveInject(a.ElementRef))}}static{this.\u0275cmp=a.\u0275\u0275defineComponent({type:f,selectors:[["cd-submit-button"]],inputs:{form:"form",type:"type",disabled:"disabled",btnClass:"btnClass",ariaLabel:"ariaLabel",buttonType:"buttonType",modalForm:"modalForm"},outputs:{submitAction:"submitAction"},ngContentSelectors:N,decls:3,vars:8,consts:[["size","lg","modal-primary-focus","",1,"tc_submitButton",3,"click","type","ngClass","disabled","cdsButton"],["size","sm",3,"isActive","overlay",4,"ngIf"],["size","sm",3,"isActive","overlay"]],template:function(A,_){1&A&&(a.\u0275\u0275projectionDef(),a.\u0275\u0275elementStart(0,"button",0),a.\u0275\u0275listener("click",function(w){return _.submit(w)}),a.\u0275\u0275projection(1),a.\u0275\u0275template(2,I,1,2,"cds-loading",1),a.\u0275\u0275elementEnd()),2&A&&(a.\u0275\u0275property("type",_.type)("ngClass",a.\u0275\u0275pureFunction1(6,M,_.modalForm))("disabled",_.loading||_.disabled)("cdsButton",_.buttonType),a.\u0275\u0275attribute("aria-label",_.ariaLabel),a.\u0275\u0275advance(2),a.\u0275\u0275property("ngIf",_.loading))},dependencies:[v.NgClass,v.NgIf,C.S,d.Button,d.Loading],styles:["cds-loading[_ngcontent-%COMP%]{margin-left:.5rem}"]})}}return f})()},68316:(q,y,s)=>{s.d(y,{o:()=>I});var a=s(87536),e=s(19093);const l={[e.Statuses.SUCCESS]:"cds-support-success",[e.Statuses.WARNING]:"cds-support-warning",[e.Statuses.DANGER]:"cds-support-error"};var h=s(73651),R=s(18457),S=s(35855),m=s(91974);function v(O,f){1&O&&a.\u0275\u0275elementContainer(0)}function E(O,f){if(1&O&&(a.\u0275\u0275elementContainerStart(0),a.\u0275\u0275template(1,v,1,0,"ng-container",7),a.\u0275\u0275elementContainerEnd()),2&O){const g=a.\u0275\u0275nextContext(2);a.\u0275\u0275advance(),a.\u0275\u0275property("ngTemplateOutlet",g.customLabel)}}function C(O,f){if(1&O&&(a.\u0275\u0275elementContainerStart(0),a.\u0275\u0275i18n(1,2),a.\u0275\u0275elementContainerEnd()),2&O){const g=a.\u0275\u0275nextContext(2);a.\u0275\u0275advance(),a.\u0275\u0275i18nExp(g.customLabel),a.\u0275\u0275i18nApply(1)}}function d(O,f){if(1&O&&(a.\u0275\u0275elementContainerStart(0),a.\u0275\u0275template(1,E,2,1,"ng-container",6)(2,C,2,1,"ng-template",null,1,a.\u0275\u0275templateRefExtractor),a.\u0275\u0275elementContainerEnd()),2&O){const g=a.\u0275\u0275reference(3),P=a.\u0275\u0275nextContext();a.\u0275\u0275advance(),a.\u0275\u0275property("ngIf",P.isCustomLabelTemplate)("ngIfElse",g)}}function u(O,f){if(1&O&&a.\u0275\u0275element(0,"ibm-meter-chart",8),2&O){const g=a.\u0275\u0275nextContext();a.\u0275\u0275property("data",g.data)("options",g.options)}}function N(O,f){if(1&O&&(a.\u0275\u0275elementStart(0,"span"),a.\u0275\u0275i18n(1,3),a.\u0275\u0275elementEnd()),2&O){const g=a.\u0275\u0275nextContext();a.\u0275\u0275advance(),a.\u0275\u0275i18nExp(g.noDataText),a.\u0275\u0275i18nApply(1)}}let I=(()=>{class O{constructor(g,P,A,_){this.elementRef=g,this.cssHelper=P,this.dimlessPipe=A,this.dimlessBinaryPipe=_,this.total=0,this.used=0,this.title="",this.isBinary=!0,this.decimals=2,this.height="2rem",this.width="15rem",this.totalUnit="B",this.animations=!1,this.legendEnabled=!1,this.toolbarEnabled=!1,this.noDataText="-",this.enablePercentageLabel=!0,this.customLabel="",this.tooltipOptions={},this.data=[],this.options={}}get isCustomLabelTemplate(){return this.customLabel instanceof a.TemplateRef}ngOnInit(){const g=[{group:this.title||"",value:this.used}];let P=[];this.warningThreshold&&this.errorThreshold&&(P=[{range:[this.total*this.warningThreshold,this.total*this.errorThreshold],status:e.Statuses.WARNING},{range:[this.total*this.errorThreshold,this.total],status:e.Statuses.DANGER}]);const A=this.customColorScale||{[this.title||""]:this.getStatusFromThresholds(this.used,P)},_={legend:{enabled:this.legendEnabled},toolbar:{enabled:this.toolbarEnabled},tooltip:{enabled:!0,...this.tooltipOptions,customHTML:this.tooltipOptions?.customHTML||(()=>this.defaultTooltip())},animations:this.animations,height:this.height,width:this.width,color:{scale:A},meter:{showLabels:!this.customLabel,proportional:{total:this.total,unit:this.totalUnit,totalFormatter:()=>this.getTotalFormatter(),breakdownFormatter:()=>this.getBreakdownFormatter()}}};P.length>0&&(_.meter={..._.meter,status:{ranges:P}}),this.data=g,this.options=_}getStatusFromThresholds(g,P){for(const A of P){const[_,B]=A.range;if(g>=_&&g<B)return this.getCssVariableValue(l[A.status])}return this.getCssVariableValue("primary")}getCssVariableValue(g){return this.cssHelper.propertyValue(g,this.elementRef.nativeElement)}formatValue(g){return this.isBinary?this.dimlessBinaryPipe.transform(g,this.decimals):this.dimlessPipe.transform(g,this.decimals)}defaultTooltip(){return`<div class="meter-tooltip">\n      <div><strong>Used:</strong> ${this.formatValue(this.used)}</div>\n      <div><strong>Available:</strong> ${this.formatValue(this.total-this.used)}</div>\n      <div><strong>Total:</strong> ${this.formatValue(this.total)}</div>\n    </div>`}getTotalFormatter(){return this.customTotalFormatter?this.customTotalFormatter(this.total):this.enablePercentageLabel&&this.total>0?"":$localize`${this.formatValue(this.total)} total`}getBreakdownFormatter(){if(this.customBreakdownFormatter)return this.customBreakdownFormatter({used:this.used,total:this.total});if(this.enablePercentageLabel&&this.total>0){const g=this.used/this.total*100;return g<.01?"0%":`${g.toFixed(this.decimals)}%`}return $localize`${this.formatValue(this.used)} used`}static{this.\u0275fac=function(P){return new(P||O)(a.\u0275\u0275directiveInject(a.ElementRef),a.\u0275\u0275directiveInject(S._),a.\u0275\u0275directiveInject(R.u),a.\u0275\u0275directiveInject(h.l))}}static{this.\u0275cmp=a.\u0275\u0275defineComponent({type:O,selectors:[["cd-usage-bar"]],inputs:{total:"total",used:"used",title:"title",warningThreshold:"warningThreshold",errorThreshold:"errorThreshold",isBinary:"isBinary",decimals:"decimals",height:"height",width:"width",totalUnit:"totalUnit",animations:"animations",legendEnabled:"legendEnabled",toolbarEnabled:"toolbarEnabled",noDataText:"noDataText",enablePercentageLabel:"enablePercentageLabel",customLabel:"customLabel",tooltipOptions:"tooltipOptions",customColorScale:"customColorScale",customTotalFormatter:"customTotalFormatter",customBreakdownFormatter:"customBreakdownFormatter"},decls:4,vars:3,consts:()=>{let g,P;return g=$localize`:␟7b3a060d2b5ccf9f59c7729fd9d41d3f65e1a790␟8163125410779533465:${"\ufffd0\ufffd"}:INTERPOLATION:`,P=$localize`:␟63927d6910908afb36b9a03aa954c25a62a6fd16␟4543865327901177611:${"\ufffd0\ufffd"}:INTERPOLATION:`,[["noDataFound",""],["stringLabel",""],g,P,[4,"ngIf"],[3,"data","options",4,"ngIf","ngIfElse"],[4,"ngIf","ngIfElse"],[4,"ngTemplateOutlet"],[3,"data","options"]]},template:function(P,A){if(1&P&&a.\u0275\u0275template(0,d,4,2,"ng-container",4)(1,u,1,2,"ibm-meter-chart",5)(2,N,2,1,"ng-template",null,0,a.\u0275\u0275templateRefExtractor),2&P){const _=a.\u0275\u0275reference(3);a.\u0275\u0275property("ngIf",A.customLabel),a.\u0275\u0275advance(),a.\u0275\u0275property("ngIf",A.used>=0&&A.total>0)("ngIfElse",_)}},dependencies:[m.NgIf,m.NgTemplateOutlet,e.MeterChartComponent],styles:[".cds--cc--chart-wrapper text{font-size:var(--cds-heading-01-font-size, .875rem);font-weight:var(--cds-heading-01-font-weight, 600);line-height:var(--cds-heading-01-line-height, 1.42857);letter-spacing:var(--cds-heading-01-letter-spacing, .16px);font-family:inherit;font-weight:400}  .meter-tooltip{font-size:var(--cds-helper-text-01-font-size, .75rem);line-height:var(--cds-helper-text-01-line-height, 1.33333);letter-spacing:var(--cds-helper-text-01-letter-spacing, .32px);padding-top:.25rem}  .meter-tooltip div{padding-bottom:.25rem}"]})}}return O})()},80893:(q,y,s)=>{s.d(y,{t:()=>S});var a=s(87536),l=s(53075),h=s(3600);let S=(()=>{class m{constructor(E){this.stepsService=E,this.stepsTitle?.forEach((C,d)=>{C.onClick=()=>this.currentStep.stepIndex=d})}ngOnInit(){this.initializeSteps()}ngOnChanges(E){E.stepsTitle&&!E.stepsTitle.isFirstChange()&&this.initializeSteps()}initializeSteps(){this.stepsService.setTotalSteps(this.stepsTitle.length),this.steps=this.stepsService.getSteps(),this.currentStepSub=this.stepsService.getCurrentStep().subscribe(E=>{this.currentStep=E})}onStepClick(E){this.stepsService.setCurrentStep(E)}ngOnDestroy(){this.currentStepSub.unsubscribe()}static{this.\u0275fac=function(C){return new(C||m)(a.\u0275\u0275directiveInject(l.m))}}static{this.\u0275cmp=a.\u0275\u0275defineComponent({type:m,selectors:[["cd-wizard"]],inputs:{stepsTitle:"stepsTitle"},features:[a.\u0275\u0275NgOnChangesFeature],decls:2,vars:2,consts:[[1,"indicator"],["orientation","vertical",3,"steps","current"]],template:function(C,d){1&C&&(a.\u0275\u0275elementStart(0,"div",0),a.\u0275\u0275element(1,"cds-progress-indicator",1),a.\u0275\u0275elementEnd()),2&C&&(a.\u0275\u0275advance(),a.\u0275\u0275property("steps",d.stepsTitle)("current",null==d.currentStep?null:d.currentStep.stepIndex))},dependencies:[h.ProgressIndicator],styles:["cd-wizard{width:15%}.card-body[_ngcontent-%COMP%]{padding-left:0}span.circle-step[_ngcontent-%COMP%]{background:#adb5bd;border-radius:.8em;color:#fff;display:inline-block;font-weight:700;line-height:1.6em;margin-right:5px;text-align:center;width:1.6em}span.circle-step.active[_ngcontent-%COMP%]{background-color:#25828e}.nav-pills[_ngcontent-%COMP%]   .nav-link[_ngcontent-%COMP%]{background-color:#fff;color:#343a40}.nav-pills[_ngcontent-%COMP%]   .nav-link.active[_ngcontent-%COMP%]{color:#25828e}"]})}}return m})()},54372:(q,y,s)=>{s.d(y,{BF:()=>C,D5:()=>h,Qp:()=>R,Ss:()=>m,Vv:()=>v,YV:()=>E,eN:()=>d,m3:()=>u,qA:()=>N,yY:()=>S});var a=s(45312),e=s(87536);class h{static{this.organization="ceph"}static{this.projectName="Ceph Dashboard"}static{this.defaultUser="dashboard"}static{this.license="Free software (LGPL 2.1)."}static{this.copyright="Copyright(c) "+a.c.year+" Ceph contributors."}static{this.cephLogo="assets/Ceph_Logo.svg"}}var R=function(M){return M.CREATE="create",M.EDIT="edit",M.UPDATE="update",M.REMOVE="remove",M.DELETE="delete",M.ADD="add",M.COPY="copy",M.CLONE="clone",M.RECREATE="recreate",M.EXPIRE="expire",M.RESTART="Restart",M}(R||{}),S=function(M){return M.CREATE="Create",M.DELETE="Delete",M.ADD="Add",M.REMOVE="Remove",M.EDIT="Edit",M.CANCEL="Cancel",M.COPY="Copy",M.CLONE="Clone",M.UPDATE="Update",M.EVICT="Evict",M.SHOW="Show",M.RECREATE="Recreate",M.EXPIRE="Expire",M.START="Start",M.STOP="Stop",M.REDEPLOY="Redeploy",M.RESTART="Restart",M}(S||{});let m=(()=>{class M{constructor(){this.CREATE=$localize`Create`,this.EXPORT=$localize`Export`,this.IMPORT=$localize`Import`,this.SETUP_MULTISITE_REPLICATION=$localize`Setup Multi-site Replication`,this.MIGRATE=$localize`Migrate`,this.DELETE=$localize`Delete`,this.ADD=$localize`Add`,this.SET=$localize`Set`,this.SUBMIT=$localize`Submit`,this.REMOVE=$localize`Remove`,this.UNSET=$localize`Unset`,this.EDIT=$localize`Edit`,this.UPDATE=$localize`Update`,this.CANCEL=$localize`Cancel`,this.PREVIEW=$localize`Preview`,this.MOVE=$localize`Move`,this.NEXT=$localize`Next`,this.BACK=$localize`Back`,this.CLONE=$localize`Clone`,this.COPY=$localize`Copy`,this.DEEP_SCRUB=$localize`Deep Scrub`,this.DESTROY=$localize`Destroy`,this.EVICT=$localize`Evict`,this.FLATTEN=$localize`Flatten`,this.MARK_DOWN=$localize`Mark Down`,this.MARK_IN=$localize`Mark In`,this.MARK_LOST=$localize`Mark Lost`,this.MARK_OUT=$localize`Mark Out`,this.PROTECT=$localize`Protect`,this.PURGE=$localize`Purge`,this.RENAME=$localize`Rename`,this.RESTORE=$localize`Restore`,this.REWEIGHT=$localize`Reweight`,this.ROLLBACK=$localize`Rollback`,this.SCRUB=$localize`Scrub`,this.SHOW=$localize`Show`,this.TIERING=$localize`Tiering`,this.TRASH=$localize`Move to Trash`,this.UNPROTECT=$localize`Unprotect`,this.CHANGE=$localize`Change`,this.FLAGS=$localize`Flags`,this.ENTER_MAINTENANCE=$localize`Enter Maintenance`,this.EXIT_MAINTENANCE=$localize`Exit Maintenance`,this.AUTHORIZE=$localize`Authorize`,this.START_DRAIN=$localize`Start Drain`,this.STOP_DRAIN=$localize`Stop Drain`,this.RESYNC=$localize`Resync`,this.RECREATE=$localize`Recreate`,this.EXPIRE=$localize`Expire`,this.START=$localize`Start`,this.STOP=$localize`Stop`,this.REDEPLOY=$localize`Redeploy`,this.RESTART=$localize`Restart`,this.REMOVE_SCHEDULING=$localize`Remove Scheduling`,this.PROMOTE=$localize`Promote`,this.DEMOTE=$localize`Demote`,this.START_UPGRADE=$localize`Start Upgrade`,this.ACTIVATE=$localize`Activate`,this.DEACTIVATE=$localize`Deactivate`,this.ATTACH=$localize`Attach`,this.CONNECT=$localize`Connect`,this.DISCONNECT=$localize`Disconnect`,this.RECONNECT=$localize`Reconnect`,this.EXPAND_CLUSTER=$localize`Expand Cluster`,this.NFS_EXPORT=$localize`Create NFS Export`}static{this.\u0275fac=function(f){return new(f||M)}}static{this.\u0275prov=e.\u0275\u0275defineInjectable({token:M,factory:M.\u0275fac,providedIn:"root"})}}return M})(),v=(()=>{class M{constructor(){this.CREATED=$localize`Created`,this.DELETED=$localize`Deleted`,this.ADDED=$localize`Added`,this.REMOVED=$localize`Removed`,this.EDITED=$localize`Edited`,this.CANCELED=$localize`Canceled`,this.PREVIEWED=$localize`Previewed`,this.MOVED=$localize`Moved`,this.CLONED=$localize`Cloned`,this.COPIED=$localize`Copied`,this.DEEP_SCRUBBED=$localize`Deep Scrubbed`,this.DESTROYED=$localize`Destroyed`,this.FLATTENED=$localize`Flattened`,this.MARKED_DOWN=$localize`Marked Down`,this.MARKED_IN=$localize`Marked In`,this.MARKED_LOST=$localize`Marked Lost`,this.MARKED_OUT=$localize`Marked Out`,this.PROTECTED=$localize`Protected`,this.PURGED=$localize`Purged`,this.RENAMED=$localize`Renamed`,this.RESTORED=$localize`Restored`,this.REWEIGHTED=$localize`Reweighted`,this.ROLLED_BACK=$localize`Rolled back`,this.SCRUBBED=$localize`Scrubbed`,this.SHOWED=$localize`Showed`,this.TRASHED=$localize`Moved to Trash`,this.UNPROTECTED=$localize`Unprotected`,this.CHANGE=$localize`Change`,this.RECREATED=$localize`Recreated`,this.EXPIRED=$localize`Expired`,this.START=$localize`Start`,this.STOP=$localize`Stop`,this.REDEPLOY=$localize`Redeploy`,this.RESTART=$localize`Restart`}static{this.\u0275fac=function(f){return new(f||M)}}static{this.\u0275prov=e.\u0275\u0275defineInjectable({token:M,factory:M.\u0275fac,providedIn:"root"})}}return M})(),E=(()=>{class M{constructor(){this.TIMER_SERVICE_PERIOD=5e3}static{this.\u0275fac=function(f){return new(f||M)}}static{this.\u0275prov=e.\u0275\u0275defineInjectable({token:M,factory:M.\u0275fac,providedIn:"root"})}}return M})();const C=["TLSv1.2","TLSv1.3"],d=["ECDHE","ECDSA","AES128","GCM","SHA256","RSA","AES256","SHA384","CHACHA20","POLY1305","DHE"],u="user",N="ceph version"},16619:(q,y,s)=>{s.d(y,{H:()=>a});const a="_nogroup"},25171:(q,y,s)=>{s.d(y,{N:()=>I});var a=s(87536),h=(s(58384),s(29841)),R=s.n(h),S=s(3600),v=s(62847);const E=["headerPermissionCheckboxTpl"],C=["cellScopeCheckboxTpl"],d=["cellPermissionCheckboxTpl"];function u(O,f){if(1&O){const g=a.\u0275\u0275getCurrentView();a.\u0275\u0275elementStart(0,"div",7)(1,"cds-checkbox",8),a.\u0275\u0275listener("checkedChange",function(A){const _=a.\u0275\u0275restoreView(g),B=_.data.column,w=_.data.row,ie=a.\u0275\u0275nextContext();return a.\u0275\u0275resetView(ie.onClickCellCheckbox(w.scope,B.prop,A))}),a.\u0275\u0275i18nStart(2,3),a.\u0275\u0275element(3,"span",9),a.\u0275\u0275i18nEnd(),a.\u0275\u0275elementEnd()()}if(2&O){const g=f.data.row,P=f.data.value,A=a.\u0275\u0275nextContext();a.\u0275\u0275advance(),a.\u0275\u0275propertyInterpolate1("id","scope_",g.scope,""),a.\u0275\u0275property("checked",A.isRowChecked(g.scope))("disabled",A.isDisabled),a.\u0275\u0275advance(2),a.\u0275\u0275propertyInterpolate1("for","scope_",g.scope,""),a.\u0275\u0275i18nExp(P),a.\u0275\u0275i18nApply(2)}}function N(O,f){if(1&O){const g=a.\u0275\u0275getCurrentView();a.\u0275\u0275elementStart(0,"div",7)(1,"cds-checkbox",8),a.\u0275\u0275listener("checkedChange",function(A){const _=a.\u0275\u0275restoreView(g),B=_.data.column,w=_.data.row,ie=a.\u0275\u0275nextContext();return a.\u0275\u0275resetView(ie.onClickCellCheckbox(w.scope,B.prop,A))}),a.\u0275\u0275i18nStart(2,4),a.\u0275\u0275element(3,"span",10),a.\u0275\u0275i18nEnd(),a.\u0275\u0275elementEnd()()}if(2&O){const g=f.data.column,P=f.data.row,A=f.data.value,_=a.\u0275\u0275nextContext();a.\u0275\u0275advance(),a.\u0275\u0275property("id",P.scope+"-"+g.prop)("checked",A)("disabled",_.isDisabled),a.\u0275\u0275advance(2),a.\u0275\u0275property("for",P.scope+"-"+g.prop)}}function M(O,f){if(1&O){const g=a.\u0275\u0275getCurrentView();a.\u0275\u0275elementStart(0,"div",7)(1,"cds-checkbox",11),a.\u0275\u0275listener("checkedChange",function(A){const _=a.\u0275\u0275restoreView(g).data,B=a.\u0275\u0275nextContext();return a.\u0275\u0275resetView(B.onClickHeaderCheckbox(_.prop,A))}),a.\u0275\u0275i18nStart(2,5),a.\u0275\u0275element(3,"span",12),a.\u0275\u0275i18nEnd(),a.\u0275\u0275elementEnd()()}if(2&O){const g=f.data,P=a.\u0275\u0275nextContext();a.\u0275\u0275advance(),a.\u0275\u0275propertyInterpolate1("id","header_",g.prop,""),a.\u0275\u0275property("disabled",P.isDisabled)("checked",P.isHeaderChecked(g.prop)),a.\u0275\u0275advance(2),a.\u0275\u0275propertyInterpolate1("for","header_",g.prop,""),a.\u0275\u0275i18nExp(g.name),a.\u0275\u0275i18nApply(2)}}let I=(()=>{class O{constructor(){this.scopes=[],this.isTableForOctalMode=!1,this.initialValue={},this.isDisabled=!1}ngOnInit(){this.columns.forEach(g=>{"All"===g.name?(g.cellTemplate=this.cellScopeCheckboxTpl,g.headerTemplate=this.headerPermissionCheckboxTpl):(g.cellTemplate=this.cellPermissionCheckboxTpl,g.headerTemplate=this.headerPermissionCheckboxTpl),g.sortable=!1}),this.listenToChanges(),this.form.get(this.inputField).setValue(this.initialValue)}listenToChanges(){this.form.get(this.inputField).valueChanges.subscribe(g=>{const P=[];R().each(this.scopes,A=>{const _={read:!1,write:!1,execute:!1};_.scope=A,A in g&&R().each(g[A],B=>{_[B]=!0}),P.push(_)}),this.data=P})}isRowChecked(g){const P=R().find(this.data,A=>A.scope===g);return!R().isUndefined(P)&&(this.isTableForOctalMode?P.read&&P.write&&P.execute:P.read&&P.create&&P.update&&P.delete)}isHeaderChecked(g){let P=[g];return"scope"===g&&this.isTableForOctalMode?P=["read","write","execute"]:"scope"===g&&(P=["read","create","update","delete"]),P.every(A=>this.data.every(_=>_[A]))}onClickCellCheckbox(g,P,A=null){const _=R().cloneDeep(this.form.getValue(this.inputField));let B=[P];"scope"===P&&this.isTableForOctalMode?B=["read","write","execute"]:"scope"===P&&(B=["read","create","update","delete"]),g in _||(_[g]=[]),A||!0===A||!R().isEqual(B.sort(),R().intersection(_[g],B).sort())?_[g]=R().union(_[g],B):(_[g]=R().difference(_[g],B),R().isEmpty(_[g])&&R().unset(_,g)),this.form.get(this.inputField).setValue(_)}onClickHeaderCheckbox(g,P){const A=R().cloneDeep(this.form.getValue(this.inputField));let _=[g];"scope"===g&&this.isTableForOctalMode?_=["read","write","execute"]:"scope"===g&&(_=["read","create","update","delete"]),R().each(_,B=>{R().each(this.scopes,w=>{!0===P?A[w]=R().union(A[w],[B]):(A[w]=R().difference(A[w],[B]),R().isEmpty(A[w])&&R().unset(A,w))})}),this.form.get(this.inputField).setValue(A)}static{this.\u0275fac=function(P){return new(P||O)}}static{this.\u0275cmp=a.\u0275\u0275defineComponent({type:O,selectors:[["cd-checked-table-form"]],viewQuery:function(P,A){if(1&P&&(a.\u0275\u0275viewQuery(E,7),a.\u0275\u0275viewQuery(C,7),a.\u0275\u0275viewQuery(d,7)),2&P){let _;a.\u0275\u0275queryRefresh(_=a.\u0275\u0275loadQuery())&&(A.headerPermissionCheckboxTpl=_.first),a.\u0275\u0275queryRefresh(_=a.\u0275\u0275loadQuery())&&(A.cellScopeCheckboxTpl=_.first),a.\u0275\u0275queryRefresh(_=a.\u0275\u0275loadQuery())&&(A.cellPermissionCheckboxTpl=_.first)}},inputs:{data:"data",columns:"columns",form:"form",inputField:"inputField",scopes:"scopes",isTableForOctalMode:"isTableForOctalMode",initialValue:"initialValue",isDisabled:"isDisabled"},decls:7,vars:8,consts:()=>{let g,P,A;return g=$localize`:␟ed5d1901f9cf65fbd8f04a5a3452b872434c2faa␟1885912126043351057:${"\ufffd#3\ufffd"}:START_TAG_SPAN:${"\ufffd0\ufffd"}:INTERPOLATION:${"\ufffd/#3\ufffd"}:CLOSE_TAG_SPAN:`,P=$localize`:␟c05918db80bce130142bf863a622d874d20d13a8␟1158979871499063135:${"\ufffd#3\ufffd"}:START_TAG_SPAN:${"\ufffd/#3\ufffd"}:CLOSE_TAG_SPAN:`,A=$localize`:␟6346a3c0f9d4106b5d5398bf4f4eaacc695423ae␟4525113308813294861:${"\ufffd#3\ufffd"}:START_TAG_SPAN:${"\ufffd0\ufffd"}:INTERPOLATION:${"\ufffd/#3\ufffd"}:CLOSE_TAG_SPAN:`,[["cellScopeCheckboxTpl",""],["cellPermissionCheckboxTpl",""],["headerPermissionCheckboxTpl",""],g,P,A,["columnMode","flex","size","xs",3,"data","columns","toolHeader","autoReload","autoSave","footer","layer","limit"],[1,"m-2"],[3,"checkedChange","id","checked","disabled"],[1,"datatable-permissions-scope-cell-label","custom-control-label",3,"for"],[1,"custom-control-label",3,"for"],[3,"checkedChange","id","disabled","checked"],[1,"datatable-permissions-header-cell-label","custom-control-label",3,"for"]]},template:function(P,A){1&P&&(a.\u0275\u0275element(0,"cd-table",6),a.\u0275\u0275template(1,u,4,7,"ng-template",null,0,a.\u0275\u0275templateRefExtractor)(3,N,4,4,"ng-template",null,1,a.\u0275\u0275templateRefExtractor)(5,M,4,7,"ng-template",null,2,a.\u0275\u0275templateRefExtractor)),2&P&&a.\u0275\u0275property("data",A.data)("columns",A.columns)("toolHeader",!1)("autoReload",!1)("autoSave",!1)("footer",!1)("layer",0)("limit",0)},dependencies:[S.Checkbox,v.O]})}}return O})()},19907:(q,y,s)=>{s.d(y,{M:()=>ue});var a=s(87536),e=s(76218),l=s(2155),h=s(15643),R=s(36618);let S=(()=>{class T{constructor(ce){this.http=ce}export(ce){return this.http.post("api/cluster/user/export",{entities:ce})}static{this.\u0275fac=function(fe){return new(fe||T)(a.\u0275\u0275inject(R.HttpClient))}}static{this.\u0275prov=a.\u0275\u0275defineInjectable({token:T,factory:T.\u0275fac,providedIn:"root"})}}return T})();var m=s(34177),v=s(19380),E=s(85481),C=s(82254),d=s(50813),u=s(84821),N=s(94254),M=s(91974),I=s(50889),O=s(62847),f=s(32295),g=s(45843),P=s(71138),A=s(64346);const _=["badgeDictTpl"],B=["dateTpl"],w=["durationTpl"],ie=["exportDataModalTpl"],Y=()=>({exact:!0});function V(T,K){if(1&T&&(a.\u0275\u0275elementStart(0,"li",10)(1,"a",11),a.\u0275\u0275i18n(2,4),a.\u0275\u0275elementEnd()()),2&T){const ce=K.$implicit;a.\u0275\u0275advance(),a.\u0275\u0275property("routerLink",ce.url)("routerLinkActiveOptions",a.\u0275\u0275pureFunction0(3,Y)),a.\u0275\u0275advance(),a.\u0275\u0275i18nExp(ce.name),a.\u0275\u0275i18nApply(2)}}function L(T,K){if(1&T&&(a.\u0275\u0275elementStart(0,"ul",8),a.\u0275\u0275template(1,V,3,4,"li",9),a.\u0275\u0275elementEnd()),2&T){const ce=a.\u0275\u0275nextContext();a.\u0275\u0275advance(),a.\u0275\u0275property("ngForOf",ce.tabs)}}function Q(T,K){if(1&T&&(a.\u0275\u0275elementStart(0,"tr")(1,"td",18),a.\u0275\u0275i18n(2,5),a.\u0275\u0275elementEnd(),a.\u0275\u0275elementStart(3,"td")(4,"pre"),a.\u0275\u0275text(5),a.\u0275\u0275elementEnd()()()),2&T){const ce=K.$implicit,fe=a.\u0275\u0275nextContext(4);a.\u0275\u0275advance(2),a.\u0275\u0275i18nExp(ce),a.\u0275\u0275i18nApply(2),a.\u0275\u0275advance(3),a.\u0275\u0275textInterpolate(fe.expandedRow[ce])}}function me(T,K){if(1&T&&(a.\u0275\u0275elementStart(0,"table",16)(1,"tbody"),a.\u0275\u0275template(2,Q,6,2,"tr",17),a.\u0275\u0275elementEnd()()),2&T){const ce=a.\u0275\u0275nextContext(3);a.\u0275\u0275advance(2),a.\u0275\u0275property("ngForOf",ce.meta.detail_columns)}}function Ie(T,K){1&T&&(a.\u0275\u0275elementContainerStart(0),a.\u0275\u0275template(1,me,3,1,"table",15),a.\u0275\u0275elementContainerEnd())}function He(T,K){if(1&T){const ce=a.\u0275\u0275getCurrentView();a.\u0275\u0275elementContainerStart(0),a.\u0275\u0275elementStart(1,"cd-table",12),a.\u0275\u0275pipe(2,"async"),a.\u0275\u0275listener("setExpandedRow",function(Te){a.\u0275\u0275restoreView(ce);const Se=a.\u0275\u0275nextContext();return a.\u0275\u0275resetView(Se.setExpandedRow(Te))})("updateSelection",function(Te){a.\u0275\u0275restoreView(ce);const Se=a.\u0275\u0275nextContext();return a.\u0275\u0275resetView(Se.updateSelection(Te))}),a.\u0275\u0275elementStart(3,"div",13),a.\u0275\u0275element(4,"cd-table-actions",14),a.\u0275\u0275elementEnd(),a.\u0275\u0275template(5,Ie,2,0,"ng-container",7),a.\u0275\u0275elementEnd(),a.\u0275\u0275elementContainerEnd()}if(2&T){const ce=a.\u0275\u0275nextContext();a.\u0275\u0275advance(),a.\u0275\u0275property("data",a.\u0275\u0275pipeBind1(2,10,ce.data$))("columns",ce.meta.table.columns)("columnMode",ce.meta.table.columnMode)("hasDetails",ce.meta.detail_columns.length>0)("selectionType",ce.meta.table.selectionType)("toolHeader",ce.meta.table.toolHeader),a.\u0275\u0275advance(3),a.\u0275\u0275property("permission",ce.permission)("selection",ce.selection)("tableActions",ce.meta.actions),a.\u0275\u0275advance(),a.\u0275\u0275property("ngIf",ce.expandedRow&&ce.meta.detail_columns.length>0)}}function Ae(T,K){1&T&&(a.\u0275\u0275elementContainerStart(0),a.\u0275\u0275text(1,"\xa0"),a.\u0275\u0275elementContainerEnd())}function We(T,K){if(1&T&&(a.\u0275\u0275elementStart(0,"span")(1,"span",19),a.\u0275\u0275text(2),a.\u0275\u0275elementEnd(),a.\u0275\u0275template(3,Ae,2,0,"ng-container",7),a.\u0275\u0275elementEnd()),2&T){const ce=K.$implicit,fe=K.last;a.\u0275\u0275advance(2),a.\u0275\u0275textInterpolate2("",ce.key,": ",ce.value,""),a.\u0275\u0275advance(),a.\u0275\u0275property("ngIf",!fe)}}function te(T,K){1&T&&(a.\u0275\u0275template(0,We,4,3,"span",17),a.\u0275\u0275pipe(1,"keyvalue")),2&T&&a.\u0275\u0275property("ngForOf",a.\u0275\u0275pipeBind1(1,1,K.data.value))}function _e(T,K){if(1&T&&(a.\u0275\u0275elementStart(0,"span"),a.\u0275\u0275text(1),a.\u0275\u0275pipe(2,"cdDate"),a.\u0275\u0275elementEnd()),2&T){const ce=K.data.value;a.\u0275\u0275advance(),a.\u0275\u0275textInterpolate(a.\u0275\u0275pipeBind1(2,1,ce))}}function oe(T,K){if(1&T&&(a.\u0275\u0275elementStart(0,"span"),a.\u0275\u0275text(1),a.\u0275\u0275pipe(2,"duration"),a.\u0275\u0275elementEnd()),2&T){const ce=K.data.value;a.\u0275\u0275advance(),a.\u0275\u0275textInterpolate(a.\u0275\u0275pipeBind1(2,1,ce))}}function de(T,K){if(1&T&&(a.\u0275\u0275elementStart(0,"div",20)(1,"textarea",21),a.\u0275\u0275text(2),a.\u0275\u0275elementEnd(),a.\u0275\u0275element(3,"cd-copy-2-clipboard-button",22),a.\u0275\u0275elementEnd()),2&T){const ce=a.\u0275\u0275nextContext();a.\u0275\u0275advance(2),a.\u0275\u0275textInterpolate(ce.modalState.authExportData)}}let ue=(()=>{class T{constructor(ce,fe,Te,Se,Ge,Ye,ct,rt){this.authStorageService=ce,this.timerService=fe,this.dataGatewayService=Te,this.taskWrapper=Se,this.cephUserService=Ge,this.activatedRoute=Ye,this.modalService=ct,this.router=rt,this.selection=new v.y,this.expandedRow={},this.tabs={},this.modalState={},this.permissions=this.authStorageService.getPermissions()}ngOnInit(){this.activatedRoute.data.subscribe(ce=>{const fe=ce.resource;this.tabs=ce.tabs,this.dataGatewayService.list(`ui-${fe}`).subscribe(Te=>this.processMeta(Te)),this.data$=this.timerService.get(()=>this.dataGatewayService.list(fe))}),this.activatedRoute.data.subscribe(ce=>{this.resource=ce.resource})}processMeta(ce){var Se;this.permission=this.permissions[(Se=ce.permissions[0],Se.split("-").reduce((Ge,Ye,ct)=>0===ct?Ye.toLowerCase():`${Ge}${Ye.charAt(0).toUpperCase()}${Ye.substr(1).toLowerCase()}`,""))];const Te={badgeDict:this.badgeDictTpl,date:this.dateTpl,duration:this.durationTpl};ce.table.columns.forEach((Se,Ge)=>{void 0!==Se.cellTemplate&&(ce.table.columns[Ge].cellTemplate=Te[Se.cellTemplate])}),ce.table.columns=ce.table.columns.filter(Se=>!Se.isHidden),this.meta=ce;for(let Se=0;Se<this.meta.actions.length;Se++){let Ge=this.meta.actions[Se];Ge.disable&&(Ge.disable=Ye=>!Ye.hasSelection),""!==Ge.click.toString()&&(Ge.click=this[this.meta.actions[Se].click.toString()].bind(this))}}delete(){const ce=this.selection.first()[this.meta.columnKey];this.modalRef=this.modalService.show(u.D,{itemDescription:$localize`${this.meta.resource}`,itemNames:[ce],submitAction:()=>{this.taskWrapper.wrapTaskAroundCall({task:new E.O("crud-component/id",ce),call:this.dataGatewayService.delete(this.resource,ce)}).subscribe({error:()=>{this.modalRef.closeModal()},complete:()=>{this.modalRef.closeModal()}})}})}updateSelection(ce){this.selection=ce}setExpandedRow(ce){for(let fe=0;fe<this.meta.detail_columns.length;fe++){let Te=this.meta.detail_columns[fe],Se=ce?.[Te];this.expandedRow[Te]=this.formatColumnDetails(Se)}}edit(){let ce="";this.selection.hasSelection&&(ce=this.selection.first()[this.meta.columnKey]);const fe=this.meta.actions.find(Te=>"Edit"===Te.name);this.router.navigate([fe.routerLink],{queryParams:{key:ce}})}authExport(){let ce=[];this.selection.selected.forEach(fe=>ce.push(fe.entity)),this.cephUserService.export(ce).subscribe(fe=>{const Te={titleText:$localize`Ceph user export data`,buttonText:$localize`Close`,bodyTpl:this.authxEportTpl,showSubmit:!0,showCancel:!1,onSubmit:()=>{this.modalRef.closeModal()}};this.modalState.authExportData=fe.trim(),this.modalRef=this.modalService.show(m.M,Te)})}stringReplacer(ce,fe){try{return JSON.parse(fe)}catch{return fe}}formatColumnDetails(ce){return Array.isArray(ce)||"string"==typeof ce?JSON.stringify(ce,this.stringReplacer,2):ce}static{this.\u0275fac=function(fe){return new(fe||T)(a.\u0275\u0275directiveInject(C.v),a.\u0275\u0275directiveInject(h.H),a.\u0275\u0275directiveInject(l.w),a.\u0275\u0275directiveInject(d.a),a.\u0275\u0275directiveInject(S),a.\u0275\u0275directiveInject(e.ActivatedRoute),a.\u0275\u0275directiveInject(N.V),a.\u0275\u0275directiveInject(e.Router))}}static{this.\u0275cmp=a.\u0275\u0275defineComponent({type:T,selectors:[["cd-crud-table"]],viewQuery:function(fe,Te){if(1&fe&&(a.\u0275\u0275viewQuery(_,5),a.\u0275\u0275viewQuery(B,5),a.\u0275\u0275viewQuery(w,5),a.\u0275\u0275viewQuery(ie,5)),2&fe){let Se;a.\u0275\u0275queryRefresh(Se=a.\u0275\u0275loadQuery())&&(Te.badgeDictTpl=Se.first),a.\u0275\u0275queryRefresh(Se=a.\u0275\u0275loadQuery())&&(Te.dateTpl=Se.first),a.\u0275\u0275queryRefresh(Se=a.\u0275\u0275loadQuery())&&(Te.durationTpl=Se.first),a.\u0275\u0275queryRefresh(Se=a.\u0275\u0275loadQuery())&&(Te.authxEportTpl=Se.first)}},decls:10,vars:2,consts:()=>{let ce,fe;return ce=$localize`:␟9abe0f4ee25c28e1341ca07c72a85e36d159a6e6␟2291880261723239747:${"\ufffd0\ufffd"}:INTERPOLATION:`,fe=$localize`:␟3657eb4778c80da69e8c3a96c8be652d4b2bd55b␟2413401287443136581:${"\ufffd0\ufffd"}:INTERPOLATION:`,[["badgeDictTpl",""],["dateTpl",""],["durationTpl",""],["exportDataModalTpl",""],ce,fe,["class","nav nav-tabs",4,"ngIf"],[4,"ngIf"],[1,"nav","nav-tabs"],["class","nav-item",4,"ngFor","ngForKeyvalue","ngForOf"],[1,"nav-item"],["routerLinkActive","active","ariaCurrentWhenActive","page",1,"nav-link",3,"routerLink","routerLinkActiveOptions"],[3,"setExpandedRow","updateSelection","data","columns","columnMode","hasDetails","selectionType","toolHeader"],[1,"table-actions"],["id","crud-table-actions",1,"btn-group",3,"permission","selection","tableActions"],["class","cds--data-table--sort cds--data-table--no-border cds--data-table cds--data-table--md",4,"cdTableDetail"],[1,"cds--data-table--sort","cds--data-table--no-border","cds--data-table","cds--data-table--md"],[4,"ngFor","ngForOf"],[1,"bold"],[1,"badge","badge-background-primary"],[1,"d-flex","flex-column","align-items-center","w-100","gap-3"],["readonly","","id","authExportArea",1,"form-control","w-100","bg-light","height-400"],["source","authExportArea",1,"align-self-end"]]},template:function(fe,Te){1&fe&&a.\u0275\u0275template(0,L,2,1,"ul",6)(1,He,6,12,"ng-container",7)(2,te,2,3,"ng-template",null,0,a.\u0275\u0275templateRefExtractor)(4,_e,3,3,"ng-template",null,1,a.\u0275\u0275templateRefExtractor)(6,oe,3,3,"ng-template",null,2,a.\u0275\u0275templateRefExtractor)(8,de,4,1,"ng-template",null,3,a.\u0275\u0275templateRefExtractor),2&fe&&(a.\u0275\u0275property("ngIf",Te.tabs),a.\u0275\u0275advance(),a.\u0275\u0275property("ngIf",Te.meta))},dependencies:[M.NgForOf,M.NgIf,I.N,e.RouterLink,e.RouterLinkActive,O.O,f.j,g.N,M.AsyncPipe,M.KeyValuePipe,P.Q,A.b],styles:[".height-400[_ngcontent-%COMP%]{height:400px}"]})}}return T})()},10522:(q,y,s)=>{s.d(y,{h:()=>T});var a=s(91974),e=s(76218),l=s(77317),h=s(3600),R={elem:"svg",attrs:{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 32",fill:"currentColor",width:16,height:16},content:[{elem:"path",attrs:{d:"M17 15L17 8 15 8 15 15 8 15 8 17 15 17 15 24 17 24 17 17 24 17 24 15z"}}],name:"add",size:16},S={elem:"svg",attrs:{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 32",fill:"currentColor",width:16,height:16},content:[{elem:"path",attrs:{d:"M18,28H14a2,2,0,0,1-2-2V18.41L4.59,11A2,2,0,0,1,4,9.59V6A2,2,0,0,1,6,4H26a2,2,0,0,1,2,2V9.59A2,2,0,0,1,27.41,11L20,18.41V26A2,2,0,0,1,18,28ZM6,6V9.59l8,8V26h4V17.59l8-8V6Z"}}],name:"filter",size:16},m={elem:"svg",attrs:{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 32",fill:"currentColor",width:16,height:16},content:[{elem:"path",attrs:{d:"M12 10H6.78A11 11 0 0127 16h2A13 13 0 006 7.68V4H4v8h8zM20 22h5.22A11 11 0 015 16H3a13 13 0 0023 8.32V28h2V20H20z"}}],name:"renew",size:16},v={elem:"svg",attrs:{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 32",fill:"currentColor",width:16,height:16},content:[{elem:"path",attrs:{d:"M8 18H12V20H8zM14 18H18V20H14zM8 14H12V16H8zM14 22H18V24H14zM20 14H24V16H20zM20 22H24V24H20z"}},{elem:"path",attrs:{d:"M27,3H5A2.0025,2.0025,0,0,0,3,5V27a2.0025,2.0025,0,0,0,2,2H27a2.0025,2.0025,0,0,0,2-2V5A2.0025,2.0025,0,0,0,27,3Zm0,2,0,4H5V5ZM5,27V11H27l0,16Z"}}],name:"data-table",size:16},E={elem:"svg",attrs:{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 32",fill:"currentColor",width:16,height:16},content:[{elem:"path",attrs:{d:"M13 24L4 15 5.414 13.586 13 21.171 26.586 7.586 28 9 13 24z"}}],name:"checkmark",size:16},C=s(99304),d={elem:"svg",attrs:{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 16 16",fill:"currentColor",width:16,height:16},content:[{elem:"path",attrs:{d:"M6 15L6 14 2.7 14 7 9.7 6.3 9 2 13.3 2 10 1 10 1 15zM10 1L10 2 13.3 2 9 6.3 9.7 7 14 2.7 14 6 15 6 15 1z"}}],name:"maximize",size:16},u={elem:"svg",attrs:{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 32",fill:"currentColor",width:16,height:16},content:[{elem:"path",attrs:{d:"M24 12L16 22 8 12z"}}],name:"caret--down",size:16},N=s(53648),M=s(45451),I=s(25002),O=s(45268),f=s(13421),g=s(8990),P=s(27202),A=s(90876),_=s(87536),B=s(11145),w=s(10142);const ie=["textArea"];let Y=(()=>{class K extends M.FieldType{constructor(fe){super(),this.textAreaJsonFormatterService=fe}onChange(){this.textAreaJsonFormatterService.format(this.textArea)}static{this.\u0275fac=function(Te){return new(Te||K)(_.\u0275\u0275directiveInject(B.C))}}static{this.\u0275cmp=_.\u0275\u0275defineComponent({type:K,selectors:[["cd-formly-textarea-type"]],viewQuery:function(Te,Se){if(1&Te&&_.\u0275\u0275viewQuery(ie,5),2&Te){let Ge;_.\u0275\u0275queryRefresh(Ge=_.\u0275\u0275loadQuery())&&(Se.textArea=Ge.first)}},features:[_.\u0275\u0275InheritDefinitionFeature],decls:2,vars:6,consts:[["textArea",""],[1,"form-control",3,"change","formControl","cols","rows","formlyAttributes"]],template:function(Te,Se){if(1&Te){const Ge=_.\u0275\u0275getCurrentView();_.\u0275\u0275elementStart(0,"textarea",1,0),_.\u0275\u0275listener("change",function(){return _.\u0275\u0275restoreView(Ge),_.\u0275\u0275resetView(Se.onChange())}),_.\u0275\u0275elementEnd()}2&Te&&(_.\u0275\u0275classProp("is-invalid",Se.showError),_.\u0275\u0275property("formControl",Se.formControl)("cols",Se.props.cols)("rows",Se.props.rows)("formlyAttributes",Se.field))},dependencies:[w.a,N.DefaultValueAccessor,N.NgControlStatus,N.FormControlDirective,M.\u0275FormlyAttributes]})}}return K})();var V=s(59342),L=s(55472);function Q(K,ce){1&K&&(_.\u0275\u0275elementStart(0,"span",10),_.\u0275\u0275text(1,"*"),_.\u0275\u0275elementEnd())}function me(K,ce){if(1&K&&(_.\u0275\u0275elementStart(0,"cd-helper"),_.\u0275\u0275element(1,"span",11),_.\u0275\u0275elementEnd()),2&K){const fe=_.\u0275\u0275nextContext(3);_.\u0275\u0275advance(),_.\u0275\u0275property("innerHTML",fe.helper,_.\u0275\u0275sanitizeHtml)}}function Ie(K,ce){if(1&K&&(_.\u0275\u0275elementStart(0,"label",8),_.\u0275\u0275text(1),_.\u0275\u0275template(2,Q,2,0,"span",9)(3,me,2,1,"cd-helper",3),_.\u0275\u0275elementEnd()),2&K){const fe=_.\u0275\u0275nextContext(2);_.\u0275\u0275attribute("for",fe.id),_.\u0275\u0275advance(),_.\u0275\u0275textInterpolate1(" ",fe.props.label," "),_.\u0275\u0275advance(),_.\u0275\u0275property("ngIf",fe.props.required&&!0!==fe.props.hideRequiredMarker),_.\u0275\u0275advance(),_.\u0275\u0275property("ngIf",fe.helper)}}function He(K,ce){if(1&K&&(_.\u0275\u0275elementStart(0,"div",6),_.\u0275\u0275template(1,Ie,4,4,"label",7),_.\u0275\u0275elementEnd()),2&K){const fe=_.\u0275\u0275nextContext();_.\u0275\u0275advance(),_.\u0275\u0275property("ngIf",fe.props.label&&!0!==fe.props.hideLabel)}}function Ae(K,ce){if(1&K&&(_.\u0275\u0275elementContainerStart(0),_.\u0275\u0275elementContainer(1,12),_.\u0275\u0275elementContainerEnd()),2&K){_.\u0275\u0275nextContext();const fe=_.\u0275\u0275reference(1);_.\u0275\u0275advance(),_.\u0275\u0275property("ngTemplateOutlet",fe)}}function We(K,ce){if(1&K&&(_.\u0275\u0275elementContainerStart(0),_.\u0275\u0275elementContainer(1,12),_.\u0275\u0275elementContainerEnd()),2&K){_.\u0275\u0275nextContext();const fe=_.\u0275\u0275reference(1);_.\u0275\u0275advance(),_.\u0275\u0275property("ngTemplateOutlet",fe)}}function te(K,ce){if(1&K&&(_.\u0275\u0275elementStart(0,"div",13),_.\u0275\u0275element(1,"formly-validation-message",14),_.\u0275\u0275elementEnd()),2&K){const fe=_.\u0275\u0275nextContext();_.\u0275\u0275styleProp("display","block"),_.\u0275\u0275advance(),_.\u0275\u0275property("field",fe.field)}}function _e(K,ce){if(1&K&&(_.\u0275\u0275elementStart(0,"small",15),_.\u0275\u0275text(1),_.\u0275\u0275elementEnd()),2&K){const fe=_.\u0275\u0275nextContext();_.\u0275\u0275advance(),_.\u0275\u0275textInterpolate(fe.props.description)}}let oe=(()=>{class K extends M.FieldWrapper{get helper(){return(0,V.y)(this.field)?.help||""}static{this.\u0275fac=(()=>{let fe;return function(Se){return(fe||(fe=_.\u0275\u0275getInheritedFactory(K)))(Se||K)}})()}static{this.\u0275cmp=_.\u0275\u0275defineComponent({type:K,selectors:[["cd-formly-input-wrapper"]],features:[_.\u0275\u0275InheritDefinitionFeature],decls:9,vars:8,consts:[["labelTemplate",""],["fieldComponent",""],[1,"mb-3"],[4,"ngIf"],["class","invalid-feedback",3,"display",4,"ngIf"],["class","form-text text-muted",4,"ngIf"],[1,"d-flex","align-items-center"],["class","form-label",4,"ngIf"],[1,"form-label"],["aria-hidden","true",4,"ngIf"],["aria-hidden","true"],[3,"innerHTML"],[3,"ngTemplateOutlet"],[1,"invalid-feedback"],[3,"field"],[1,"form-text","text-muted"]],template:function(Te,Se){1&Te&&(_.\u0275\u0275template(0,He,2,1,"ng-template",null,0,_.\u0275\u0275templateRefExtractor),_.\u0275\u0275elementStart(2,"div",2),_.\u0275\u0275template(3,Ae,2,1,"ng-container",3),_.\u0275\u0275elementContainer(4,null,1),_.\u0275\u0275template(6,We,2,1,"ng-container",3)(7,te,2,3,"div",4)(8,_e,2,1,"small",5),_.\u0275\u0275elementEnd()),2&Te&&(_.\u0275\u0275advance(2),_.\u0275\u0275classProp("form-floating","floating"===Se.props.labelPosition)("has-error",Se.showError),_.\u0275\u0275advance(),_.\u0275\u0275property("ngIf","floating"!==Se.props.labelPosition),_.\u0275\u0275advance(3),_.\u0275\u0275property("ngIf","floating"===Se.props.labelPosition),_.\u0275\u0275advance(),_.\u0275\u0275property("ngIf",Se.showError),_.\u0275\u0275advance(),_.\u0275\u0275property("ngIf",Se.props.description))},dependencies:[a.NgIf,a.NgTemplateOutlet,L.m,M.\u0275FormlyValidationMessage]})}}return K})(),de=(()=>{class K{constructor(){this.onChange=fe=>{},this.onTouched=()=>{}}writeValue(fe){}registerOnChange(fe){this.onChange=fe}registerOnTouched(fe){this.onTouched=fe}static{this.\u0275fac=function(Te){return new(Te||K)}}static{this.\u0275dir=_.\u0275\u0275defineDirective({type:K,selectors:[["input","type","file"]],hostBindings:function(Te,Se){1&Te&&_.\u0275\u0275listener("change",function(Ye){return Se.onChange(Ye.target.files)})("input",function(Ye){return Se.onChange(Ye.target.files)})("blur",function(){return Se.onTouched()})},features:[_.\u0275\u0275ProvidersFeature([{provide:N.NG_VALUE_ACCESSOR,useExisting:K,multi:!0}])]})}}return K})(),ue=(()=>{class K extends M.FieldType{static{this.\u0275fac=(()=>{let fe;return function(Se){return(fe||(fe=_.\u0275\u0275getInheritedFactory(K)))(Se||K)}})()}static{this.\u0275cmp=_.\u0275\u0275defineComponent({type:K,selectors:[["cd-formly-file-type"]],features:[_.\u0275\u0275InheritDefinitionFeature],decls:1,vars:2,consts:[["type","file",3,"formControl","formlyAttributes"]],template:function(Te,Se){1&Te&&_.\u0275\u0275element(0,"input",0),2&Te&&_.\u0275\u0275property("formControl",Se.formControl)("formlyAttributes",Se.field)},dependencies:[N.DefaultValueAccessor,N.NgControlStatus,N.FormControlDirective,M.\u0275FormlyAttributes,de]})}}return K})(),T=(()=>{class K{constructor(fe){this.iconService=fe,this.iconService.registerAll([R,S,m,v,E,C.A,d,u])}static{this.\u0275fac=function(Te){return new(Te||K)(_.\u0275\u0275inject(h.IconService))}}static{this.\u0275mod=_.\u0275\u0275defineNgModule({type:K})}static{this.\u0275inj=_.\u0275\u0275defineInjector({imports:[a.CommonModule,N.FormsModule,l.NgbDropdownModule,l.NgbTooltipModule,f.Y,O.h,e.RouterModule,N.ReactiveFormsModule,M.FormlyModule.forRoot({types:[{name:"array",component:g.o},{name:"object",component:A.G},{name:"input",component:P.R,wrappers:["input-wrapper"]},{name:"textarea",component:Y,wrappers:["input-wrapper"]},{name:"file",component:ue,wrappers:["input-wrapper"]}],validationMessages:[{name:"required",message:"This field is required"},{name:"json",message:"This field is not a valid json document"},{name:"rgwRoleName",message:'Role name must contain letters, numbers or the following valid special characters "_+=,.@-]+" (pattern: [0-9a-zA-Z_+=,.@-]+)'},{name:"rgwRolePath",message:'Role path must start and finish with a slash "/". (pattern: (/)|(/[!-~]+/))'},{name:"file_size",message:"File size must not exceed 4KiB"},{name:"rgwRoleSessionDuration",message:"This field must be a number and should be a value from 1 hour to 12 hour"}],wrappers:[{name:"input-wrapper",component:oe}]}),I.FormlyBootstrapModule,h.TableModule,h.ButtonModule,h.IconModule,h.CheckboxModule,h.PaginationModule,h.DialogModule,h.ThemeModule,h.SelectModule,h.TagModule,h.LayerModule]})}}return K})()},45843:(q,y,s)=>{s.d(y,{N:()=>l});var a=s(87536);let l=(()=>{class h{constructor(S){this.template=S}static{this.\u0275fac=function(m){return new(m||h)(a.\u0275\u0275directiveInject(a.TemplateRef))}}static{this.\u0275dir=a.\u0275\u0275defineDirective({type:h,selectors:[["","cdTableDetail",""]]})}}return h})()},32295:(q,y,s)=>{s.d(y,{j:()=>Y});var a=s(87536),l=s(29841),h=s.n(l),R=s(46045),S=s(91974),v=s(76218),C=s(3600);const u=V=>({x:V,y:65}),N=()=>({x:105,y:0});function M(V,L){if(1&V){const Q=a.\u0275\u0275getCurrentView();a.\u0275\u0275elementStart(0,"button",11),a.\u0275\u0275listener("click",function(){a.\u0275\u0275restoreView(Q);const Ie=a.\u0275\u0275nextContext(2);return a.\u0275\u0275resetView(Ie.useClickAction(Ie.currentAction))}),a.\u0275\u0275elementStart(1,"span"),a.\u0275\u0275i18n(2,4),a.\u0275\u0275elementEnd(),a.\u0275\u0275namespaceSVG(),a.\u0275\u0275element(3,"svg",12),a.\u0275\u0275elementEnd()}if(2&V){const Q=a.\u0275\u0275nextContext(2);a.\u0275\u0275propertyInterpolate("title",Q.useDisableDesc(Q.currentAction)),a.\u0275\u0275property("cdsButton",Q.currentAction.buttonKind)("disabled",Q.disableSelectionAction(Q.currentAction))("routerLink",Q.useRouterLink(Q.currentAction))("preserveFragment",Q.currentAction.preserveFragment?"":null),a.\u0275\u0275attribute("aria-label",Q.currentAction.name),a.\u0275\u0275advance(2),a.\u0275\u0275i18nExp(Q.currentAction.name),a.\u0275\u0275i18nApply(2)}}function I(V,L){if(1&V){const Q=a.\u0275\u0275getCurrentView();a.\u0275\u0275elementStart(0,"cds-overflow-menu-option",17),a.\u0275\u0275listener("click",function(){a.\u0275\u0275restoreView(Q);const Ie=a.\u0275\u0275nextContext().$implicit,He=a.\u0275\u0275nextContext(4);return a.\u0275\u0275resetView(He.useClickAction(Ie))}),a.\u0275\u0275i18n(1,5),a.\u0275\u0275elementEnd()}if(2&V){const Q=a.\u0275\u0275nextContext().$implicit,me=a.\u0275\u0275nextContext(4);a.\u0275\u0275classMap(me.toClassName(Q)),a.\u0275\u0275propertyInterpolate("title",me.useDisableDesc(Q)),a.\u0275\u0275property("routerLink",me.useRouterLink(Q))("preserveFragment",Q.preserveFragment?"":null)("disabled",me.disableSelectionAction(Q)),a.\u0275\u0275attribute("aria-label",Q.name),a.\u0275\u0275advance(),a.\u0275\u0275i18nExp(Q.name),a.\u0275\u0275i18nApply(1)}}function O(V,L){if(1&V&&(a.\u0275\u0275elementContainerStart(0),a.\u0275\u0275template(1,I,2,9,"cds-overflow-menu-option",16),a.\u0275\u0275elementContainerEnd()),2&V){const Q=L.$implicit,me=a.\u0275\u0275nextContext(4);a.\u0275\u0275advance(),a.\u0275\u0275property("ngIf",me.currentAction!==Q)}}function f(V,L){if(1&V&&a.\u0275\u0275template(0,O,2,1,"ng-container",15),2&V){const Q=a.\u0275\u0275nextContext(3);a.\u0275\u0275property("ngForOf",Q.dropDownActions)}}function g(V,L){if(1&V&&(a.\u0275\u0275elementContainerStart(0),a.\u0275\u0275elementStart(1,"button",13),a.\u0275\u0275namespaceSVG(),a.\u0275\u0275element(2,"svg",14),a.\u0275\u0275elementEnd(),a.\u0275\u0275template(3,f,1,1,"ng-template",null,3,a.\u0275\u0275templateRefExtractor),a.\u0275\u0275elementContainerEnd()),2&V){const Q=a.\u0275\u0275reference(4),me=a.\u0275\u0275nextContext(2);a.\u0275\u0275advance(),a.\u0275\u0275property("offset",a.\u0275\u0275pureFunction1(5,u,-210))("cdsOverflowMenu",Q),a.\u0275\u0275attribute("aria-label",me.dropDownOnly),a.\u0275\u0275advance(),a.\u0275\u0275property("cdsIcon",me.icons.downArrow)("size",me.icons.size16)}}function P(V,L){if(1&V&&(a.\u0275\u0275elementContainerStart(0),a.\u0275\u0275template(1,M,4,7,"button",9)(2,g,5,7,"ng-container",10),a.\u0275\u0275elementContainerEnd()),2&V){const Q=a.\u0275\u0275nextContext();a.\u0275\u0275advance(),a.\u0275\u0275property("ngIf",Q.currentAction&&Q.tableActions.length>0),a.\u0275\u0275advance(),a.\u0275\u0275property("ngIf",Q.primaryDropDown)}}function A(V,L){if(1&V&&(a.\u0275\u0275elementStart(0,"button",18),a.\u0275\u0275namespaceSVG(),a.\u0275\u0275element(1,"svg",19),a.\u0275\u0275elementEnd()),2&V){const Q=a.\u0275\u0275nextContext();a.\u0275\u0275property("cdsButton",Q.currentAction.buttonKind)}}function _(V,L){if(1&V){const Q=a.\u0275\u0275getCurrentView();a.\u0275\u0275elementStart(0,"cds-overflow-menu-option",17),a.\u0275\u0275listener("click",function(){a.\u0275\u0275restoreView(Q);const Ie=a.\u0275\u0275nextContext().$implicit,He=a.\u0275\u0275nextContext(2);return a.\u0275\u0275resetView(He.useClickAction(Ie))}),a.\u0275\u0275i18n(1,6),a.\u0275\u0275elementEnd()}if(2&V){const Q=a.\u0275\u0275nextContext().$implicit,me=a.\u0275\u0275nextContext(2);a.\u0275\u0275classMap(me.toClassName(Q)),a.\u0275\u0275propertyInterpolate("title",me.useDisableDesc(Q)),a.\u0275\u0275property("routerLink",me.useRouterLink(Q))("preserveFragment",Q.preserveFragment?"":null)("disabled",me.disableSelectionAction(Q)),a.\u0275\u0275attribute("aria-label",Q.name),a.\u0275\u0275advance(),a.\u0275\u0275i18nExp(Q.name),a.\u0275\u0275i18nApply(1)}}function B(V,L){if(1&V&&(a.\u0275\u0275elementContainerStart(0),a.\u0275\u0275template(1,_,2,9,"cds-overflow-menu-option",16),a.\u0275\u0275elementContainerEnd()),2&V){const Q=L.$implicit,me=a.\u0275\u0275nextContext(2);a.\u0275\u0275advance(),a.\u0275\u0275property("ngIf",me.currentAction!==Q)}}function w(V,L){if(1&V&&(a.\u0275\u0275elementStart(0,"cds-overflow-menu",20),a.\u0275\u0275template(1,B,2,1,"ng-container",15),a.\u0275\u0275elementEnd()),2&V){const Q=a.\u0275\u0275nextContext(),me=a.\u0275\u0275reference(6);a.\u0275\u0275property("customTrigger",me)("flip",!0)("offset",a.\u0275\u0275pureFunction0(4,N)),a.\u0275\u0275advance(),a.\u0275\u0275property("ngForOf",Q.dropDownActions)}}function ie(V,L){if(1&V&&(a.\u0275\u0275elementStart(0,"button",21)(1,"span"),a.\u0275\u0275i18n(2,7),a.\u0275\u0275elementEnd(),a.\u0275\u0275namespaceSVG(),a.\u0275\u0275element(3,"svg",19),a.\u0275\u0275elementEnd()),2&V){const Q=a.\u0275\u0275nextContext();a.\u0275\u0275advance(2),a.\u0275\u0275i18nExp(Q.dropDownOnly),a.\u0275\u0275i18nApply(2)}}let Y=(()=>{class V{constructor(){this.btnColor="accent",this.primaryDropDown=!1,this.dropDownActions=[],this.icons=R.FI}ngOnInit(){this.removeActionsWithNoPermissions(),this.onSelectionChange()}ngOnChanges(Q){Q.selection&&this.onSelectionChange()}onSelectionChange(){this.updateDropDownActions(),this.updateCurrentAction()}toClassName(Q){return Q.name.replace(/ /g,"-").replace(/[^a-z-]/gi,"").toLowerCase()}removeActionsWithNoPermissions(){if(!this.permission)return void(this.tableActions=[]);const Q=Object.keys(this.permission).filter(me=>this.permission[me]);this.tableActions=this.tableActions.filter(me=>Q.includes(me.permission))}updateDropDownActions(){this.dropDownActions=this.tableActions.filter(Q=>Q.visible?Q.visible(this.selection):Q)}updateCurrentAction(){this.dropDownOnly?this.currentAction=void 0:("create"===this.dropDownActions?.[0]?.permission||1===this.dropDownActions.length)&&(this.currentAction=this.dropDownActions[0])}useRouterLink(Q){if(Q.routerLink&&!this.disableSelectionAction(Q))return h().isString(Q.routerLink)?Q.routerLink:Q.routerLink()}disableSelectionAction(Q){const me=Q.disable;if(me)return!!me(this.selection);const Ie=Q.permission,He=this.selection.hasSingleSelection&&this.selection.first();return!(!["update","delete"].includes(Ie)||He&&!He.cdExecuting)}useClickAction(Q){return!this.disableSelectionAction(Q)&&Q.click&&Q.click()}useDisableDesc(Q){if(Q.disable){const me=Q.disable(this.selection);return h().isString(me)?me:Q.title?Q.title:void 0}if(Q.title)return Q.title}static{this.\u0275fac=function(me){return new(me||V)}}static{this.\u0275cmp=a.\u0275\u0275defineComponent({type:V,selectors:[["cd-table-actions"]],inputs:{permission:"permission",selection:"selection",tableActions:"tableActions",btnColor:"btnColor",dropDownOnly:"dropDownOnly",primaryDropDown:"primaryDropDown"},features:[a.\u0275\u0275NgOnChangesFeature],decls:7,vars:2,consts:()=>{let Q,me,Ie,He;return Q=$localize`:␟e6e29d12239d0998520e139e07d5850cd8546c66␟559818500867311163:${"\ufffd0\ufffd"}:INTERPOLATION:`,me=$localize`:␟c905fdc2badafe72893c94f6799867028f9f628d␟2481180018305690696: ${"\ufffd0\ufffd"}:INTERPOLATION: `,Ie=$localize`:␟381f8dfc8a23bdb90e5c77a154a80b591f84d62a␟1906550384624637940: ${"\ufffd0\ufffd"}:INTERPOLATION: `,He=$localize`:␟84ba0a5273fba879e68024ac9d9d3ee1b420adf7␟397178088696167226:${"\ufffd0\ufffd"}:INTERPOLATION:`,[["caret",""],["dropDownOnlyTpl",""],["customTrigger",""],["overflowMenuTpl",""],Q,me,Ie,He,[4,"ngIf","ngIfElse"],["type","button","data-testid","primary-action",3,"cdsButton","title","disabled","routerLink","preserveFragment","click",4,"ngIf"],[4,"ngIf"],["type","button","data-testid","primary-action",3,"click","cdsButton","title","disabled","routerLink","preserveFragment"],["cdsIcon","add","size","16",1,"cds--btn__icon"],["data-testid","table-action-btn",1,"primary-dropdown-btn",3,"offset","cdsOverflowMenu"],[3,"cdsIcon","size"],[4,"ngFor","ngForOf"],["data-testid","table-action-option-btn",3,"class","title","routerLink","preserveFragment","disabled","click",4,"ngIf"],["data-testid","table-action-option-btn",3,"click","title","routerLink","preserveFragment","disabled"],[1,"caret-btn",3,"cdsButton"],["cdsIcon","caret--down","size","16",1,"cds--btn__icon"],["data-testid","table-action-btn",1,"d-flex","justify-content-end",3,"customTrigger","flip","offset"],["cdsButton","tertiary"]]},template:function(me,Ie){if(1&me&&a.\u0275\u0275template(0,P,3,2,"ng-container",8)(1,A,2,1,"ng-template",null,0,a.\u0275\u0275templateRefExtractor)(3,w,2,5,"ng-template",null,1,a.\u0275\u0275templateRefExtractor)(5,ie,4,1,"ng-template",null,2,a.\u0275\u0275templateRefExtractor),2&me){const He=a.\u0275\u0275reference(4);a.\u0275\u0275property("ngIf",!Ie.dropDownOnly)("ngIfElse",He)}},dependencies:[S.NgForOf,S.NgIf,v.RouterLink,C.Button,C.IconDirective,C.OverflowMenu,C.OverflowMenuDirective,C.OverflowMenuOption],styles:["button.disabled[_ngcontent-%COMP%]{color:#adb5bd;cursor:default!important;pointer-events:auto}button.dropdown-item[_ngcontent-%COMP%]:hover{background-color:#dee2e6}.action-icon[_ngcontent-%COMP%]{padding-right:1.5rem}.action-label[_ngcontent-%COMP%]{font-weight:700}  .cds--toolbar-content .cds--overflow-menu{inline-size:auto!important}.primary-dropdown-btn[_ngcontent-%COMP%]{align-items:center;background-color:#25828e;border:0;display:flex;fill:#fff;height:3rem;justify-content:center;width:3rem}"]})}}return V})()},37823:(q,y,s)=>{s.d(y,{i:()=>E});var a=s(87536),l=s(29841),h=s.n(l),R=s(2148),S=s(71138),m=s(62847);const v=()=>[];let E=(()=>{class C{constructor(u){this.datePipe=u,this.autoReload=5e3,this.renderObjects=!1,this.appendParentKey=!0,this.hideEmpty=!1,this.hideKeys=[],this.columns=[],this.fetchData=new a.EventEmitter}ngOnInit(){this.columns=[{prop:"key",flexGrow:1,cellTransformation:R.x.bold},{prop:"value",flexGrow:3}],this.customCss&&(this.columns[1].cellTransformation=R.x.classAdding),this.fetchData.observers.length>0&&this.table.fetchData.subscribe(()=>{this.fetchData.emit()}),this.useData()}ngOnChanges(){this.useData()}useData(){if(!this.data)return;let u=this.makePairs(this.data);this.hideKeys&&(u=u.filter(N=>!this.hideKeys.includes(N.key))),this.tableData=u}makePairs(u){let N=[];if(u){if(h().isArray(u))N=this.makePairsFromArray(u);else{if(!h().isObject(u))throw new Error("Wrong data format");N=this.makePairsFromObject(u)}return N=N.map(M=>(M.value=this.convertValue(M.value),M)).filter(M=>null!==M.value),h().sortBy(this.renderObjects?this.insertFlattenObjects(N):N,"key")}}makePairsFromArray(u){let N=[];const M=u[0];if(h().isArray(M)){if(2!==M.length)throw new Error(`Array contains too many elements (${M.length}). Needs to be of type [string, any][]`);N=u.map(I=>({key:I[0],value:I[1]}))}else h().isObject(M)&&(N=h().has(M,"key")&&h().has(M,"value")?[...u]:u.reduce((I,O)=>I.concat(this.makePairsFromObject(O)),N));return N}makePairsFromObject(u){return Object.keys(u).map(N=>({key:N,value:u[N]}))}insertFlattenObjects(u){return h().flattenDeep(u.map(N=>{const M=N.value,I=h().isObject(M);return!I||h().isEmpty(M)?(I&&(N.value=""),N):this.splitItemIntoItems(N)}))}splitItemIntoItems(u){return this.makePairs(u.value).map(N=>(this.appendParentKey&&(N.key=u.key+" "+N.key),N))}convertValue(u){if(h().isArray(u)){if(h().isEmpty(u)&&this.hideEmpty)return null;u=u.map(N=>h().isObject(N)?JSON.stringify(N):N).join(", ")}else if(h().isObject(u)){if(this.hideEmpty&&h().isEmpty(u)||!this.renderObjects)return null}else if(h().isString(u)){if(""===u&&this.hideEmpty)return null;this.isDate(u)&&(u=this.datePipe.transform(u)||u)}return u}isDate(u){const N="[ -:.TZ]",M="\\d{2}"+N;return u.match(new RegExp("^\\d{4}"+N+M+M+M+M+M+"\\d*Z?$"))}static{this.\u0275fac=function(N){return new(N||C)(a.\u0275\u0275directiveInject(S.Q))}}static{this.\u0275cmp=a.\u0275\u0275defineComponent({type:C,selectors:[["cd-table-key-value"]],viewQuery:function(N,M){if(1&N&&a.\u0275\u0275viewQuery(m.O,7),2&N){let I;a.\u0275\u0275queryRefresh(I=a.\u0275\u0275loadQuery())&&(M.table=I.first)}},inputs:{data:"data",autoReload:"autoReload",renderObjects:"renderObjects",appendParentKey:"appendParentKey",hideEmpty:"hideEmpty",hideKeys:"hideKeys",customCss:"customCss"},outputs:{fetchData:"fetchData"},features:[a.\u0275\u0275NgOnChangesFeature],decls:3,vars:10,consts:[["table",""],[1,"table-scroller"],["columnMode","flex",3,"data","columns","toolHeader","autoReload","customCss","autoSave","header","footer","limit"]],template:function(N,M){1&N&&(a.\u0275\u0275elementStart(0,"div",1),a.\u0275\u0275element(1,"cd-table",2,0),a.\u0275\u0275elementEnd()),2&N&&(a.\u0275\u0275advance(),a.\u0275\u0275property("data",M.tableData||a.\u0275\u0275pureFunction0(9,v))("columns",M.columns)("toolHeader",!1)("autoReload",M.autoReload)("customCss",M.customCss)("autoSave",!1)("header",!1)("footer",!1)("limit",0))},dependencies:[m.O],styles:[".table-scroller[_ngcontent-%COMP%]{height:100%;max-height:40vh;overflow:auto}"]})}}return C})()},62847:(q,y,s)=>{s.d(y,{O:()=>ee});var a=s(87536),l=s(3600),R=s(29841),S=s.n(R),m=s(95631),E=s(3912),C=s(2148),d=s(46045),u=s(48856),N=s(19380),M=s(15643),I=s(32295),O=s(45843),f=s(50619),P=s(67120),A=s(91974),B=s(53648),ie=s(77317),V=s(5661),L=s(50889),Q=s(76218),Ie=s(88427),He=s(1820),Ae=s(18457),We=s(39113),te=s(71138),_e=s(72358),oe=s(60980),de=s(73231),ue=s(45757);const T=["tableCellBoldTpl"],K=["sparklineTpl"],ce=["routerLinkTpl"],fe=["checkIconTpl"],Te=["perSecondTpl"],Se=["executingTpl"],Ge=["classAddingTpl"],Ye=["badgeTpl"],ct=["mapTpl"],rt=["truncateTpl"],De=["timeAgoTpl"],ze=["rowDetailsTpl"],Et=["rowSelectionTpl"],Oe=["pathTpl"],pt=["tooltipTpl"],ye=["copyTpl"],je=["defaultValueTpl"],ot=["rowDetailTpl"],tt=["tableActionTpl"],Ft=[[["",8,"table-actions"]]],bt=[".table-actions"],wt=()=>[],zt=()=>({SINGLE:"1 item selected",MULTIPLE:"{{count}} items selected"}),Xt=()=>({x:3,y:0}),kt=$=>({"cds--toolbar-action__icon":!0,reload:$}),jt=$=>[$],Tt=($,ne)=>[$,ne];function gt($,ne){if(1&$&&(a.\u0275\u0275elementStart(0,"p",41),a.\u0275\u0275i18n(1,22),a.\u0275\u0275elementEnd()),2&$){const b=a.\u0275\u0275nextContext(2);a.\u0275\u0275advance(),a.\u0275\u0275i18nExp(b.headerDescription),a.\u0275\u0275i18nApply(1)}}function it($,ne){if(1&$&&(a.\u0275\u0275elementStart(0,"cds-table-header")(1,"h4",39),a.\u0275\u0275i18n(2,21),a.\u0275\u0275elementEnd(),a.\u0275\u0275template(3,gt,2,1,"p",40),a.\u0275\u0275elementEnd()),2&$){const b=a.\u0275\u0275nextContext();a.\u0275\u0275advance(2),a.\u0275\u0275i18nExp(b.headerTitle),a.\u0275\u0275i18nApply(2),a.\u0275\u0275advance(),a.\u0275\u0275property("ngIf",b.headerDescription)}}function Ke($,ne){if(1&$){const b=a.\u0275\u0275getCurrentView();a.\u0275\u0275elementStart(0,"button",49),a.\u0275\u0275listener("click",function(){a.\u0275\u0275restoreView(b);const z=a.\u0275\u0275nextContext().$implicit,se=a.\u0275\u0275nextContext(3);return a.\u0275\u0275resetView(se.tableActions.useClickAction(z))}),a.\u0275\u0275i18n(1,23),a.\u0275\u0275elementEnd()}if(2&$){const b=a.\u0275\u0275nextContext().$implicit;a.\u0275\u0275nextContext(2);const U=a.\u0275\u0275reference(1),z=a.\u0275\u0275nextContext();a.\u0275\u0275classMap(z.tableActions.toClassName(b)),a.\u0275\u0275propertyInterpolate("title",z.tableActions.useDisableDesc(b)),a.\u0275\u0275property("tabindex",U.selected?0:-1)("routerLink",z.tableActions.useRouterLink(b))("preserveFragment",b.preserveFragment?"":null)("disabled",z.tableActions.disableSelectionAction(b)),a.\u0275\u0275attribute("aria-label",b.name),a.\u0275\u0275advance(),a.\u0275\u0275i18nExp(b.name),a.\u0275\u0275i18nApply(1)}}function dt($,ne){if(1&$&&(a.\u0275\u0275elementContainerStart(0),a.\u0275\u0275template(1,Ke,2,10,"button",48),a.\u0275\u0275elementContainerEnd()),2&$){const b=ne.$implicit,U=a.\u0275\u0275nextContext(3);a.\u0275\u0275advance(),a.\u0275\u0275property("ngIf",U.tableActions.currentAction!==b)}}function Ct($,ne){if(1&$&&(a.\u0275\u0275elementStart(0,"cds-table-toolbar-actions"),a.\u0275\u0275template(1,dt,2,1,"ng-container",47),a.\u0275\u0275elementEnd()),2&$){const b=a.\u0275\u0275nextContext(2);a.\u0275\u0275advance(),a.\u0275\u0275property("ngForOf",null==b.tableActions?null:b.tableActions.dropDownActions)}}function Wt($,ne){if(1&$){const b=a.\u0275\u0275getCurrentView();a.\u0275\u0275elementStart(0,"cds-table-toolbar-search",50),a.\u0275\u0275twoWayListener("ngModelChange",function(z){a.\u0275\u0275restoreView(b);const se=a.\u0275\u0275nextContext(2);return a.\u0275\u0275twoWayBindingSet(se.search,z)||(se.search=z),a.\u0275\u0275resetView(z)}),a.\u0275\u0275listener("valueChange",function(z){a.\u0275\u0275restoreView(b);const se=a.\u0275\u0275nextContext(2);return a.\u0275\u0275resetView(se.updateFilter(z))})("clear",function(){a.\u0275\u0275restoreView(b);const z=a.\u0275\u0275nextContext(2);return a.\u0275\u0275resetView(z.onClearSearch())}),a.\u0275\u0275elementEnd()}if(2&$){const b=a.\u0275\u0275nextContext(2);a.\u0275\u0275property("expandable",!1),a.\u0275\u0275twoWayProperty("ngModel",b.search)}}function en($,ne){if(1&$&&(a.\u0275\u0275elementContainerStart(0),a.\u0275\u0275elementStart(1,"option",55),a.\u0275\u0275text(2),a.\u0275\u0275elementEnd(),a.\u0275\u0275elementContainerEnd()),2&$){const b=ne.$implicit,U=a.\u0275\u0275nextContext(3);a.\u0275\u0275advance(),a.\u0275\u0275property("value",b.column.name)("selected",b.column.name===U.selectedFilter.column.name),a.\u0275\u0275advance(),a.\u0275\u0275textInterpolate(b.column.name)}}function yt($,ne){1&$&&(a.\u0275\u0275elementStart(0,"option"),a.\u0275\u0275i18n(1,24),a.\u0275\u0275elementEnd())}function mt($,ne){if(1&$&&(a.\u0275\u0275elementContainerStart(0),a.\u0275\u0275elementStart(1,"option",55),a.\u0275\u0275text(2),a.\u0275\u0275elementEnd(),a.\u0275\u0275elementContainerEnd()),2&$){const b=ne.$implicit,U=a.\u0275\u0275nextContext(3);a.\u0275\u0275advance(),a.\u0275\u0275property("value",b.raw)("selected",b.raw===(null==U.selectedFilter||null==U.selectedFilter.value?null:U.selectedFilter.value.raw)),a.\u0275\u0275advance(),a.\u0275\u0275textInterpolate(b.formatted)}}function Gt($,ne){if(1&$){const b=a.\u0275\u0275getCurrentView();a.\u0275\u0275elementContainerStart(0),a.\u0275\u0275elementStart(1,"div",51),a.\u0275\u0275namespaceSVG(),a.\u0275\u0275element(2,"svg",52),a.\u0275\u0275elementEnd(),a.\u0275\u0275namespaceHTML(),a.\u0275\u0275elementStart(3,"cds-select",53),a.\u0275\u0275listener("valueChange",function(z){a.\u0275\u0275restoreView(b);const se=a.\u0275\u0275nextContext(2);return a.\u0275\u0275resetView(se.onSelectFilter(z))}),a.\u0275\u0275template(4,en,3,3,"ng-container",47),a.\u0275\u0275elementEnd(),a.\u0275\u0275elementStart(5,"cds-select",54),a.\u0275\u0275listener("valueChange",function(z){a.\u0275\u0275restoreView(b);const se=a.\u0275\u0275nextContext(2);return a.\u0275\u0275resetView(se.onChangeFilter(z))}),a.\u0275\u0275template(6,yt,2,0,"option",31)(7,mt,3,3,"ng-container",47),a.\u0275\u0275elementEnd(),a.\u0275\u0275elementContainerEnd()}if(2&$){const b=a.\u0275\u0275nextContext(2);a.\u0275\u0275advance(2),a.\u0275\u0275property("cdsIcon",b.icons.filter)("size",b.icons.size16),a.\u0275\u0275advance(2),a.\u0275\u0275property("ngForOf",b.columnFilters),a.\u0275\u0275advance(2),a.\u0275\u0275property("ngIf",!b.selectedFilter.value),a.\u0275\u0275advance(),a.\u0275\u0275property("ngForOf",b.selectedFilter.options)}}function Lt($,ne){if(1&$){const b=a.\u0275\u0275getCurrentView();a.\u0275\u0275elementStart(0,"cds-icon-button",56),a.\u0275\u0275listener("click",function(){a.\u0275\u0275restoreView(b);const z=a.\u0275\u0275nextContext(2);return a.\u0275\u0275resetView(z.refreshBtn())}),a.\u0275\u0275namespaceSVG(),a.\u0275\u0275element(1,"svg",57),a.\u0275\u0275elementEnd()}if(2&$){const b=a.\u0275\u0275nextContext(2);a.\u0275\u0275property("kind",b.status.type)("disabled",!(null!=b.fetchData&&null!=b.fetchData.observers&&b.fetchData.observers.length))("title",b.status.msg)("description",b.status.msg),a.\u0275\u0275advance(),a.\u0275\u0275property("cdsIcon",b.icons.refresh)("size",b.icons.size16)("ngClass",a.\u0275\u0275pureFunction1(7,kt,b.loadingIndicator))}}function Pt($,ne){if(1&$){const b=a.\u0275\u0275getCurrentView();a.\u0275\u0275elementStart(0,"cds-checkbox",60),a.\u0275\u0275listener("checkedChange",function(){a.\u0275\u0275restoreView(b);const z=a.\u0275\u0275nextContext().$implicit,se=a.\u0275\u0275nextContext(3);return a.\u0275\u0275resetView(se.toggleColumn(z))}),a.\u0275\u0275text(1),a.\u0275\u0275elementEnd()}if(2&$){const b=a.\u0275\u0275nextContext().$implicit,U=a.\u0275\u0275nextContext(3);a.\u0275\u0275propertyInterpolate2("id","",b.prop,"",U.tableName,""),a.\u0275\u0275propertyInterpolate2("name","",b.prop,"",U.tableName,""),a.\u0275\u0275property("checked",!(null!=b&&b.isHidden)),a.\u0275\u0275advance(),a.\u0275\u0275textInterpolate1("",b.name," ")}}function En($,ne){if(1&$&&(a.\u0275\u0275elementContainerStart(0),a.\u0275\u0275template(1,Pt,2,8,"cds-checkbox",59),a.\u0275\u0275elementContainerEnd()),2&$){const b=ne.$implicit;a.\u0275\u0275advance(),a.\u0275\u0275property("ngIf",!(null!=b&&b.isInvisible))}}function lt($,ne){if(1&$){const b=a.\u0275\u0275getCurrentView();a.\u0275\u0275elementStart(0,"div",58),a.\u0275\u0275listener("click",function(z){return a.\u0275\u0275restoreView(b),a.\u0275\u0275resetView(z.stopPropagation())}),a.\u0275\u0275template(1,En,2,1,"ng-container",47),a.\u0275\u0275elementEnd()}if(2&$){const b=a.\u0275\u0275nextContext(2);a.\u0275\u0275property("cdsTheme",b.theme),a.\u0275\u0275advance(),a.\u0275\u0275property("ngForOf",b.localColumns)}}function vn($,ne){if(1&$){const b=a.\u0275\u0275getCurrentView();a.\u0275\u0275elementStart(0,"cds-table-toolbar",42,19),a.\u0275\u0275listener("cancel",function(){a.\u0275\u0275restoreView(b);const z=a.\u0275\u0275nextContext();return a.\u0275\u0275resetView(z.onBatchActionsCancel())}),a.\u0275\u0275template(2,Ct,2,1,"cds-table-toolbar-actions",31),a.\u0275\u0275elementStart(3,"cds-table-toolbar-content"),a.\u0275\u0275template(4,Wt,1,2,"cds-table-toolbar-search",43)(5,Gt,8,5,"ng-container",31)(6,Lt,2,9,"cds-icon-button",44),a.\u0275\u0275elementStart(7,"button",45),a.\u0275\u0275namespaceSVG(),a.\u0275\u0275element(8,"svg",46),a.\u0275\u0275elementEnd(),a.\u0275\u0275template(9,lt,2,2,"ng-template",null,20,a.\u0275\u0275templateRefExtractor),a.\u0275\u0275projection(11),a.\u0275\u0275elementEnd()()}if(2&$){const b=a.\u0275\u0275reference(10),U=a.\u0275\u0275nextContext();a.\u0275\u0275property("model","multiClick"===U.selectionType?U.model:a.\u0275\u0275pureFunction0(11,wt))("batchText",a.\u0275\u0275pureFunction0(12,zt)),a.\u0275\u0275advance(2),a.\u0275\u0275property("ngIf",(null==U.tableActions?null:U.tableActions.dropDownActions.length)>0),a.\u0275\u0275advance(2),a.\u0275\u0275property("ngIf",U.searchField),a.\u0275\u0275advance(),a.\u0275\u0275property("ngIf",0!==U.columnFilters.length),a.\u0275\u0275advance(),a.\u0275\u0275property("ngIf",(null==U.fetchData||null==U.fetchData.observers?null:U.fetchData.observers.length)>0),a.\u0275\u0275advance(),a.\u0275\u0275property("cdsOverflowMenu",b)("flip",!0)("offset",a.\u0275\u0275pureFunction0(13,Xt)),a.\u0275\u0275advance(),a.\u0275\u0275property("cdsIcon",U.icons.dataTable)("size",U.icons.size16)}}function Kt($,ne){if(1&$){const b=a.\u0275\u0275getCurrentView();a.\u0275\u0275elementStart(0,"cds-tag",65)(1,"span",66),a.\u0275\u0275text(2),a.\u0275\u0275elementEnd(),a.\u0275\u0275elementStart(3,"button",67),a.\u0275\u0275listener("click",function(){a.\u0275\u0275restoreView(b);const z=a.\u0275\u0275nextContext().$implicit,se=a.\u0275\u0275nextContext(2);return a.\u0275\u0275resetView(se.onChangeFilter(z))}),a.\u0275\u0275namespaceSVG(),a.\u0275\u0275element(4,"svg",52),a.\u0275\u0275elementEnd()()}if(2&$){const b=a.\u0275\u0275nextContext().$implicit,U=a.\u0275\u0275nextContext(2);a.\u0275\u0275advance(2),a.\u0275\u0275textInterpolate2("",b.column.name,": ",b.value.formatted,""),a.\u0275\u0275advance(2),a.\u0275\u0275property("cdsIcon",U.icons.destroy)("size",U.icons.size16)}}function dn($,ne){if(1&$&&(a.\u0275\u0275elementContainerStart(0),a.\u0275\u0275template(1,Kt,5,4,"cds-tag",64),a.\u0275\u0275elementContainerEnd()),2&$){const b=ne.$implicit;a.\u0275\u0275advance(),a.\u0275\u0275property("ngIf",b.value)}}function Nt($,ne){if(1&$){const b=a.\u0275\u0275getCurrentView();a.\u0275\u0275elementStart(0,"div",61)(1,"div",62),a.\u0275\u0275template(2,dn,2,1,"ng-container",47),a.\u0275\u0275elementStart(3,"button",63),a.\u0275\u0275listener("click",function(z){a.\u0275\u0275restoreView(b);const se=a.\u0275\u0275nextContext();return a.\u0275\u0275resetView(se.onClearFilters(z))}),a.\u0275\u0275elementContainerStart(4),a.\u0275\u0275i18n(5,25),a.\u0275\u0275elementContainerEnd(),a.\u0275\u0275elementEnd()()()}if(2&$){const b=a.\u0275\u0275nextContext();a.\u0275\u0275advance(2),a.\u0275\u0275property("ngForOf",b.columnFilters)}}function gn($,ne){if(1&$){const b=a.\u0275\u0275getCurrentView();a.\u0275\u0275elementStart(0,"tr",72),a.\u0275\u0275listener("selectRow",function(){a.\u0275\u0275restoreView(b);const z=a.\u0275\u0275nextContext().index,se=a.\u0275\u0275nextContext(2);return a.\u0275\u0275resetView(se.onSelect(z))})("deselectRow",function(){a.\u0275\u0275restoreView(b);const z=a.\u0275\u0275nextContext().index,se=a.\u0275\u0275nextContext(2);return a.\u0275\u0275resetView(se.onDeselect(z))})("expandRow",function(){a.\u0275\u0275restoreView(b);const z=a.\u0275\u0275nextContext().index,se=a.\u0275\u0275nextContext(2);return a.\u0275\u0275resetView(se.model.expandRow(z,!se.model.isRowExpanded(z)))})("rowClick",function(){a.\u0275\u0275restoreView(b);const z=a.\u0275\u0275nextContext().index,se=a.\u0275\u0275nextContext(2);return a.\u0275\u0275resetView(se.onSelect(z))}),a.\u0275\u0275elementEnd()}if(2&$){const b=a.\u0275\u0275nextContext(),U=b.$implicit,z=b.index,se=a.\u0275\u0275nextContext(2);a.\u0275\u0275property("model",se.model)("row",U)("size",se.size)("selected",se.model.isRowSelected(z))("expandable",se.model.isRowExpandable(z))("expanded",se.model.isRowExpanded(z))("showSelectionColumn",se.showSelectionColumn)("skeleton",se.loadingIndicator)}}function Cn($,ne){if(1&$&&a.\u0275\u0275element(0,"tr",73),2&$){const b=a.\u0275\u0275nextContext(),U=b.$implicit,z=b.index,se=a.\u0275\u0275nextContext(2);a.\u0275\u0275property("row",U)("expanded",se.model.isRowExpanded(z))("skeleton",se.loadingIndicator)}}function W($,ne){if(1&$&&a.\u0275\u0275element(0,"tr",75),2&$){const b=ne.$implicit,U=a.\u0275\u0275nextContext(2).index,z=a.\u0275\u0275nextContext(2);a.\u0275\u0275property("model",z.model)("showSelectionColumnCheckbox",!1)("showSelectionColumn",z.showSelectionColumn)("row",b)("size",z.size)("selected",z.model.isRowSelected(U))("skeleton",z.loadingIndicator)}}function Re($,ne){if(1&$&&(a.\u0275\u0275elementContainerStart(0),a.\u0275\u0275template(1,W,1,7,"tr",74),a.\u0275\u0275elementContainerEnd()),2&$){const b=a.\u0275\u0275nextContext().$implicit,U=a.\u0275\u0275nextContext(2);a.\u0275\u0275advance(),a.\u0275\u0275property("ngForOf",U.firstExpandedDataInRow(b))}}function J($,ne){if(1&$&&(a.\u0275\u0275elementContainerStart(0),a.\u0275\u0275template(1,gn,1,8,"tr",70)(2,Cn,1,3,"tr",71)(3,Re,2,1,"ng-container",31),a.\u0275\u0275elementContainerEnd()),2&$){const b=ne.$implicit,U=ne.index,z=a.\u0275\u0275nextContext(2);a.\u0275\u0275advance(),a.\u0275\u0275property("ngIf",!z.model.isRowFiltered(U)),a.\u0275\u0275advance(),a.\u0275\u0275property("ngIf",z.model.isRowExpandable(U)&&!z.shouldExpandAsTable(b)&&!z.model.isRowFiltered(U)),a.\u0275\u0275advance(),a.\u0275\u0275property("ngIf",z.model.isRowExpandable(U)&&z.shouldExpandAsTable(b)&&z.model.isRowExpanded(U)&&!z.model.isRowFiltered(U))}}function ut($,ne){if(1&$&&(a.\u0275\u0275elementStart(0,"tbody",68),a.\u0275\u0275template(1,J,4,3,"ng-container",69),a.\u0275\u0275elementEnd()),2&$){const b=a.\u0275\u0275nextContext();a.\u0275\u0275property("enableSingleSelect",b.enableSingleSelect)("skeleton",b.loadingIndicator),a.\u0275\u0275advance(),a.\u0275\u0275property("ngForOf",b.model.data)("ngForTrackBy",b.trackByFn.bind(b,b.identifier))}}function ht($,ne){if(1&$&&(a.\u0275\u0275elementStart(0,"td",78)(1,"span",79),a.\u0275\u0275i18n(2,26),a.\u0275\u0275elementEnd()()),2&$){const b=a.\u0275\u0275nextContext(2);a.\u0275\u0275attribute("colspan",b.visibleColumns.length+2)}}function Gn($,ne){if(1&$&&(a.\u0275\u0275elementStart(0,"tbody")(1,"tr",76),a.\u0275\u0275template(2,ht,3,1,"td",77),a.\u0275\u0275elementEnd()()),2&$){const b=a.\u0275\u0275nextContext();a.\u0275\u0275advance(2),a.\u0275\u0275property("ngIf",!(null!=b.rows&&b.rows.length||b.loadingIndicator))}}function Hn($,ne){}function Le($,ne){if(1&$){const b=a.\u0275\u0275getCurrentView();a.\u0275\u0275elementStart(0,"div",81),a.\u0275\u0275listener("mouseenter",function(z){a.\u0275\u0275restoreView(b);const se=a.\u0275\u0275nextContext(2);return a.\u0275\u0275resetView(se.onRowDetailHover(z))}),a.\u0275\u0275template(1,Hn,0,0,"ng-template",82),a.\u0275\u0275elementEnd()}if(2&$){const b=a.\u0275\u0275nextContext(2);a.\u0275\u0275advance(),a.\u0275\u0275property("ngTemplateOutlet",b.rowDetail.template)}}function Vn($,ne){if(1&$&&a.\u0275\u0275template(0,Le,2,1,"div",80),2&$){const b=ne.data,U=a.\u0275\u0275nextContext();a.\u0275\u0275property("ngIf",b[U.identifier]===(null==U.expanded?null:U.expanded[U.identifier]))}}function Sn($,ne){if(1&$&&(a.\u0275\u0275elementStart(0,"span",83),a.\u0275\u0275text(1),a.\u0275\u0275elementEnd()),2&$){const b=ne.data.value,U=ne.data.column;a.\u0275\u0275property("ngClass",null==U?null:U.cellClass),a.\u0275\u0275advance(),a.\u0275\u0275textInterpolate(b)}}function un($,ne){if(1&$){const b=a.\u0275\u0275getCurrentView();a.\u0275\u0275elementStart(0,"cds-overflow-menu-option",87),a.\u0275\u0275listener("click",function(){a.\u0275\u0275restoreView(b);const z=a.\u0275\u0275nextContext().$implicit,se=a.\u0275\u0275nextContext(3);return a.\u0275\u0275resetView(se.tableActions.useClickAction(z))}),a.\u0275\u0275i18n(1,27),a.\u0275\u0275elementEnd()}if(2&$){const b=a.\u0275\u0275nextContext().$implicit,U=a.\u0275\u0275nextContext(3);a.\u0275\u0275classMap(U.tableActions.toClassName(b)),a.\u0275\u0275propertyInterpolate("title",U.tableActions.useDisableDesc(b)),a.\u0275\u0275property("routerLink",U.tableActions.useRouterLink(b))("preserveFragment",b.preserveFragment?"":null)("disabled",U.tableActions.disableSelectionAction(b)),a.\u0275\u0275attribute("aria-label",b.name),a.\u0275\u0275advance(),a.\u0275\u0275i18nExp(b.name),a.\u0275\u0275i18nApply(1)}}function Qt($,ne){if(1&$&&(a.\u0275\u0275elementContainerStart(0),a.\u0275\u0275template(1,un,2,9,"cds-overflow-menu-option",86),a.\u0275\u0275elementContainerEnd()),2&$){const b=ne.$implicit,U=a.\u0275\u0275nextContext(3);a.\u0275\u0275advance(),a.\u0275\u0275property("ngIf",U.tableActions.currentAction!==b)}}function ge($,ne){if(1&$&&(a.\u0275\u0275elementStart(0,"cds-overflow-menu",85),a.\u0275\u0275template(1,Qt,2,1,"ng-container",47),a.\u0275\u0275elementEnd()),2&$){const b=a.\u0275\u0275nextContext(2);a.\u0275\u0275property("flip",!0),a.\u0275\u0275advance(),a.\u0275\u0275property("ngForOf",null==b.tableActions?null:b.tableActions.dropDownActions)}}function Ht($,ne){if(1&$&&a.\u0275\u0275template(0,ge,2,2,"cds-overflow-menu",84),2&$){const b=a.\u0275\u0275nextContext();a.\u0275\u0275property("ngIf",(null==b.tableActions?null:b.tableActions.dropDownActions.length)>1&&"multiClick"!==b.selectionType)}}function Bn($,ne){if(1&$&&(a.\u0275\u0275elementStart(0,"strong"),a.\u0275\u0275text(1),a.\u0275\u0275elementEnd()),2&$){const b=ne.data.value;a.\u0275\u0275advance(),a.\u0275\u0275textInterpolate(b)}}function zn($,ne){if(1&$&&(a.\u0275\u0275elementStart(0,"div",88),a.\u0275\u0275element(1,"cd-sparkline",89),a.\u0275\u0275elementEnd()),2&$){const b=ne.data.row,U=ne.data.value;a.\u0275\u0275advance(),a.\u0275\u0275property("data",U)("isBinary",b.cdIsBinary)}}function Mn($,ne){if(1&$&&(a.\u0275\u0275elementStart(0,"a",90),a.\u0275\u0275text(1),a.\u0275\u0275elementEnd()),2&$){const b=ne.data.row,U=ne.data.value;a.\u0275\u0275property("routerLink",a.\u0275\u0275pureFunction1(3,jt,b.cdLink))("queryParams",b.cdParams),a.\u0275\u0275advance(),a.\u0275\u0275textInterpolate(U)}}function Xn($,ne){if(1&$&&(a.\u0275\u0275element(0,"i",91),a.\u0275\u0275pipe(1,"boolean")),2&$){const b=ne.data.value,U=a.\u0275\u0275nextContext();a.\u0275\u0275property("ngClass",a.\u0275\u0275pureFunction1(4,jt,U.icons.check))("hidden",!a.\u0275\u0275pipeBind1(1,2,b))}}function kn($,ne){1&$&&(a.\u0275\u0275text(0),a.\u0275\u0275pipe(1,"dimless")),2&$&&a.\u0275\u0275textInterpolate1(" ",a.\u0275\u0275pipeBind1(1,1,ne.data.value)," /s\n")}function jn($,ne){if(1&$&&a.\u0275\u0275element(0,"i",83),2&$){const b=a.\u0275\u0275nextContext(2);a.\u0275\u0275property("ngClass",a.\u0275\u0275pureFunction2(1,Tt,b.icons.spinner,b.icons.spin))}}function Wn($,ne){if(1&$&&(a.\u0275\u0275elementStart(0,"span",83),a.\u0275\u0275text(1),a.\u0275\u0275elementEnd()),2&$){const b=a.\u0275\u0275nextContext(),U=b.data.column,z=b.data.row;a.\u0275\u0275property("ngClass",null!=U&&null!=U.customTemplateConfig&&U.customTemplateConfig.executingClass?null==U?null:U.customTemplateConfig.executingClass:"text-muted italic"),a.\u0275\u0275advance(),a.\u0275\u0275textInterpolate1("(",z.cdExecuting,")")}}function so($,ne){if(1&$&&(a.\u0275\u0275template(0,jn,1,4,"i",92),a.\u0275\u0275elementStart(1,"span",83),a.\u0275\u0275text(2),a.\u0275\u0275elementEnd(),a.\u0275\u0275template(3,Wn,2,2,"span",92)),2&$){const b=ne.data.column,U=ne.data.row,z=ne.data.value;a.\u0275\u0275property("ngIf",U.cdExecuting),a.\u0275\u0275advance(),a.\u0275\u0275property("ngClass",null==b||null==b.customTemplateConfig?null:b.customTemplateConfig.valueClass),a.\u0275\u0275advance(),a.\u0275\u0275textInterpolate1(" ",z," "),a.\u0275\u0275advance(),a.\u0275\u0275property("ngIf",U.cdExecuting)}}function Kn($,ne){if(1&$&&(a.\u0275\u0275elementStart(0,"span"),a.\u0275\u0275pipe(1,"pipeFunction"),a.\u0275\u0275text(2),a.\u0275\u0275elementEnd()),2&$){const b=ne.data.value,U=a.\u0275\u0275nextContext();a.\u0275\u0275classMap(a.\u0275\u0275pipeBind3(1,4,b,U.useCustomClass,U)),a.\u0275\u0275advance(2),a.\u0275\u0275textInterpolate(b)}}function Yt($,ne){if(1&$&&(a.\u0275\u0275elementStart(0,"span",94),a.\u0275\u0275text(1),a.\u0275\u0275elementEnd()),2&$){const b=a.\u0275\u0275nextContext().$implicit,U=a.\u0275\u0275nextContext().data.column;a.\u0275\u0275property("ngClass",null!=U&&null!=U.customTemplateConfig&&U.customTemplateConfig.map&&null!=U&&null!=U.customTemplateConfig&&null!=U.customTemplateConfig.map[b]&&U.customTemplateConfig.map[b].class?U.customTemplateConfig.map[b].class:null!=U&&null!=U.customTemplateConfig&&U.customTemplateConfig.class?U.customTemplateConfig.class:"badge-primary"),a.\u0275\u0275advance(),a.\u0275\u0275textInterpolate1(" ",null!=U&&null!=U.customTemplateConfig&&U.customTemplateConfig.map&&null!=U&&null!=U.customTemplateConfig&&null!=U.customTemplateConfig.map[b]&&U.customTemplateConfig.map[b].value?U.customTemplateConfig.map[b].value:null!=U&&null!=U.customTemplateConfig&&U.customTemplateConfig.prefix?U.customTemplateConfig.prefix+b:b," ")}}function hn($,ne){1&$&&(a.\u0275\u0275elementStart(0,"span"),a.\u0275\u0275text(1,"\xa0"),a.\u0275\u0275elementEnd())}function pn($,ne){if(1&$&&(a.\u0275\u0275elementStart(0,"span"),a.\u0275\u0275template(1,Yt,2,2,"span",93)(2,hn,2,0,"span",31),a.\u0275\u0275elementEnd()),2&$){const b=ne.$implicit,U=ne.last,z=a.\u0275\u0275nextContext().data.column;a.\u0275\u0275advance(),a.\u0275\u0275property("ngIf",null!=z&&null!=z.customTemplateConfig&&z.customTemplateConfig.map&&null!=z&&null!=z.customTemplateConfig&&null!=z.customTemplateConfig.map[b]&&z.customTemplateConfig.map[b].value?z.customTemplateConfig.map[b].value:null!=z&&null!=z.customTemplateConfig&&z.customTemplateConfig.prefix?z.customTemplateConfig.prefix+b:b),a.\u0275\u0275advance(),a.\u0275\u0275property("ngIf",!U)}}function Jt($,ne){1&$&&(a.\u0275\u0275template(0,pn,3,2,"span",47),a.\u0275\u0275pipe(1,"array")),2&$&&a.\u0275\u0275property("ngForOf",a.\u0275\u0275pipeBind1(1,1,ne.data.value))}function Rn($,ne){if(1&$&&(a.\u0275\u0275elementStart(0,"span"),a.\u0275\u0275text(1),a.\u0275\u0275pipe(2,"map"),a.\u0275\u0275elementEnd()),2&$){const b=ne.data.column,U=ne.data.value;a.\u0275\u0275advance(),a.\u0275\u0275textInterpolate(a.\u0275\u0275pipeBind2(2,1,U,null==b?null:b.customTemplateConfig))}}function On($,ne){if(1&$&&(a.\u0275\u0275elementStart(0,"span")(1,"span",95),a.\u0275\u0275i18nAttributes(2,29),a.\u0275\u0275i18n(3,28),a.\u0275\u0275elementEnd()()),2&$){const b=ne.$implicit,U=a.\u0275\u0275nextContext(),z=U.data.column,se=U.data.value;a.\u0275\u0275advance(),a.\u0275\u0275classMap(null!=z&&null!=z.customTemplateConfig&&z.customTemplateConfig.map&&null!=z&&null!=z.customTemplateConfig&&null!=z.customTemplateConfig.map[b]&&z.customTemplateConfig.map[b].class?z.customTemplateConfig.map[b].class:""),a.\u0275\u0275i18nExp(null!=z&&null!=z.customTemplateConfig&&z.customTemplateConfig.map&&null!=z&&null!=z.customTemplateConfig&&null!=z.customTemplateConfig.map[b]&&z.customTemplateConfig.map[b].tooltip?z.customTemplateConfig.map[b].tooltip:""),a.\u0275\u0275i18nApply(2),a.\u0275\u0275advance(2),a.\u0275\u0275i18nExp(se),a.\u0275\u0275i18nApply(3)}}function Qn($,ne){1&$&&(a.\u0275\u0275template(0,On,4,5,"span",47),a.\u0275\u0275pipe(1,"array")),2&$&&a.\u0275\u0275property("ngForOf",a.\u0275\u0275pipeBind1(1,1,ne.data.value))}function Yn($,ne){if(1&$&&(a.\u0275\u0275elementStart(0,"span",96),a.\u0275\u0275text(1),a.\u0275\u0275pipe(2,"truncate"),a.\u0275\u0275elementEnd()),2&$){const b=ne.data.column,U=ne.data.value;a.\u0275\u0275property("title",U),a.\u0275\u0275advance(),a.\u0275\u0275textInterpolate(a.\u0275\u0275pipeBind3(2,2,U,null==b||null==b.customTemplateConfig?null:b.customTemplateConfig.length,null==b||null==b.customTemplateConfig?null:b.customTemplateConfig.omission))}}function Jn($,ne){if(1&$){const b=a.\u0275\u0275getCurrentView();a.\u0275\u0275elementStart(0,"a",97),a.\u0275\u0275listener("click",function(z){const se=a.\u0275\u0275restoreView(b),$e=se.data.row,Me=se.data.expanded,Ze=a.\u0275\u0275nextContext();return a.\u0275\u0275resetView(Ze.toggleExpandRow($e,Me,z))}),a.\u0275\u0275elementEnd()}if(2&$){const b=ne.data.expanded;a.\u0275\u0275classProp("expand-collapse-icon-right",!b)("expand-collapse-icon-down",b)}}function Zn($,ne){if(1&$&&(a.\u0275\u0275elementStart(0,"span",96),a.\u0275\u0275pipe(1,"cdDate"),a.\u0275\u0275text(2),a.\u0275\u0275pipe(3,"relativeDate"),a.\u0275\u0275elementEnd()),2&$){const b=ne.data.value;a.\u0275\u0275property("title",a.\u0275\u0275pipeBind1(1,2,b)),a.\u0275\u0275advance(2),a.\u0275\u0275textInterpolate(a.\u0275\u0275pipeBind1(3,4,b))}}function Pn($,ne){if(1&$&&(a.\u0275\u0275element(0,"cd-copy-2-clipboard-button",99),a.\u0275\u0275pipe(1,"path")),2&$){const b=a.\u0275\u0275nextContext().data.value;a.\u0275\u0275propertyInterpolate("text",a.\u0275\u0275pipeBind1(1,3,b)),a.\u0275\u0275property("source",b)("byId",!1)}}function qn($,ne){1&$&&a.\u0275\u0275template(0,Pn,2,5,"cd-copy-2-clipboard-button",98),2&$&&a.\u0275\u0275property("ngIf",ne.data.value)}function eo($,ne){if(1&$&&a.\u0275\u0275element(0,"cd-copy-2-clipboard-button",101),2&$){const b=a.\u0275\u0275nextContext().data.value,U=a.\u0275\u0275nextContext();a.\u0275\u0275property("source",b)("byId",!1)("size",U.lg)("text",b)}}function le($,ne){1&$&&a.\u0275\u0275template(0,eo,1,4,"cd-copy-2-clipboard-button",100),2&$&&a.\u0275\u0275property("ngIf",ne.data.value)}let ee=(()=>{class ${set expanded(b){this._expanded=b,this.setExpandedRow.emit(b)}get expanded(){return this._expanded}get sortable(){return!!this.userConfig?.sorts}get noData(){return!this.rows?.length&&!this.loadingIndicator}get showSelectionColumn(){return"multiClick"===this.selectionType}get enableSingleSelect(){return"single"===this.selectionType}set localColumns(b){this._localColumns=this.getTableColumnsWithNames(b)}get localColumns(){return this._localColumns}set tableColumns(b){const U=this.getTableColumnsWithNames(b);this._tableColumns=U,this._tableHeaders.next(U)}get tableColumns(){return this._tableColumns}get visibleColumns(){return this.localColumns?.filter?.(b=>!b.isHidden)}getTableColumnsWithNames(b){return b.map(U=>U?.name?U:{...U,name:U?.prop?this.deCamelCase(String(U?.prop)):""})}deCamelCase(b){return b.replace(/([A-Z])/g,U=>` ${U}`).replace(/^./,U=>U.toUpperCase())}set rows(b){this._rows=b,this.doPagination({page:this.model.currentPage,size:this.model.pageLength,filteredData:b}),this.model.totalDataLength=this.serverSide?this.count:b?.length||0}get rows(){return this._rows}get columnFiltered(){return S().some(this.columnFilters,b=>void 0!==b.value)}constructor(b,U){this.cdRef=b,this.timerService=U,this.columnMode="flex",this.onlyActionHeader=!1,this.toolHeader=!0,this.searchField=!0,this.header=!0,this.footer=!0,this.limit=10,this.maxLimit=9999,this.hasDetails=!1,this.showInlineActions=!0,this.autoReload=5e3,this.identifier="id",this.forceIdentifier=!1,this.selectionType=void 0,this.updateSelectionOnRefresh="onChange",this.updateExpandedOnRefresh="onChange",this.autoSave=!0,this.searchableObjects=!1,this.extraFilterableColumns=[],this.status=new E.F,this.serverSide=!1,this.size="md",this.count=0,this.fetchData=new a.EventEmitter,this.updateSelection=new a.EventEmitter,this.setExpandedRow=new a.EventEmitter,this.columnFiltersChanged=new a.EventEmitter,this.selection=new N.y,this._expanded=void 0,this.selectAllCheckbox=!1,this.selectAllCheckboxSomeSelected=!1,this.model=new l.TableModel,this.icons=d.FI,this.cellTemplates={},this.search="",this._rows=[],this._dataset=new m.BehaviorSubject([]),this._tableHeaders=new m.BehaviorSubject([]),this._subscriptions=new m.Subscription,this.loadingIndicator=!0,this.userConfig={},this.localStorage=window.localStorage,this.updating=!1,this.columnFilters=[],this.previousRows=new Map,this.paginate=S().cond([[z=>z.page<=1,z=>({start:0,end:z.size})],[z=>z.page>=z.filteredData.length,z=>({start:0,end:z.filteredData.length})],[z=>z.page>=z.filteredData.length&&z.page*z.size>z.filteredData.length,z=>({start:0,end:z.filteredData.length})],[z=>z.page*z.size>z.filteredData.length,z=>({start:(z.page-1)*z.size,end:z.filteredData.length})],[S().stubTrue,z=>({start:(z.page-1)*z.size,end:z.page*z.size})]])}static prepareSearch(b){return(b=b.toLowerCase().replace(/,/g,"")).match(/['"][^'"]+['"]/)&&(b=b.replace(/['"][^'"]+['"]/g,U=>U.replace(/(['"])([^'"]+)(['"])/g,"$2").replace(/ /g,"+"))),b.split(" ").filter(U=>U)}ngAfterViewInit(){this.showInlineActions&&this.tableActions?.dropDownActions?.length&&(this.tableColumns=[...this.tableColumns,{name:"",prop:"",className:"w25",sortable:!1,cellTemplate:this.tableActionTpl}]);const b=this._tableHeaders.pipe((0,f.map)(Me=>Me.map(Ze=>new l.TableHeaderItem({data:Ze?.headerTemplate?{...Ze}:Ze.name,title:Ze.name,template:Ze?.headerTemplate,className:S().isString(Ze?.cellClass)?`${Ze?.cellClass}`:`${Ze?.className}`,visible:!Ze.isHidden,sortable:!!S().isNil(Ze.sortable)||Ze.sortable})))).subscribe({next:Me=>this.model.header=Me}),U=this._dataset.pipe((0,f.filter)(Me=>!!Me?.length||(this.model.data=[],!1))).subscribe({next:Me=>{const Ze=Me.map(j=>{const Ce=j?.id??j?.[this.identifier],xe=this.previousRows.get(Ce),nt=this.tableColumns.map((at,St)=>{const vt=S().get(j,at?.prop);let Fe=xe?.[St];const Zt=Fe?.data?.value,st=at.pipe?at.pipe.transform(at?.prop?vt:j):vt;return Fe&&!S().isEqual(Zt,st)&&(Fe.data.value=st,Fe.data.row=j,Fe.data.column={...at,...j},0===St&&this.hasDetails&&(Fe.expandedData=j,Fe.expandedTemplate=this.rowDetailTpl)),Fe??new l.TableItem({selected:j,data:{value:st,row:j,column:{...at,...j}},template:at.cellTemplate||this.defaultValueTpl,...0===St&&this.hasDetails?{expandedData:j,expandedTemplate:this.rowDetailTpl}:{}})});return this.previousRows.set(Ce,nt),nt}),k=this.model.data.map(j=>j?.[0]?.data?.row),Ee=Me;(!S().isEqual(k,Ee)||this.model.data.length!==Ze.length)&&(this.model.data=Ze)}}),z=this.model.rowsExpandedChange.subscribe({next:Me=>{this.model.rowsExpanded.every(Ze=>!Ze)?this.expanded=void 0:(this.expanded=S().get(this.model.data?.[Me],[0,"selected"]),this.model.rowsExpanded=this.model.rowsExpanded.map((Ze,k)=>k===Me))}}),se=this.model.rowsSelectedChange.subscribe(()=>this.updateSelectAllCheckbox()),$e=this.model.dataChange.subscribe(()=>{this.updateSelectAllCheckbox()});this._subscriptions.add(b),this._subscriptions.add(U),this._subscriptions.add(z),this._subscriptions.add(se),this._subscriptions.add($e)}ngOnInit(){if(this.localColumns=S().clone(this.columns),this.serverSide&&(this.reloadData=S().debounce(this.reloadData,1e3)),this._addTemplates(),!this.sorts){const b=-1!==S().findIndex(this.localColumns,["prop",this.identifier]);this.sorts=this.createSortingDefinition(b?this.identifier:this.localColumns[0].prop+""),!b&&!this.forceIdentifier&&(this.identifier=this.localColumns[0].prop+"")}if(this.initUserConfig(),this.localColumns.forEach(b=>{b.cellTransformation&&(b.cellTemplate=this.cellTemplates[b.cellTransformation]),b.flexGrow||(b.flexGrow=b.prop+""===this.identifier?1:2),b.resizeable||(b.resizeable=!1)}),this.filterHiddenColumns(),this.initColumnFilters(),this.updateColumnFilterOptions(),this.updateSelection.emit(new N.y),this.fetchData.observers.length>0){this.loadingIndicator=!0;const b=this.fetchData.subscribe({next:()=>this.cdRef.detectChanges(),complete:()=>this.loadingIndicator=!1});this._subscriptions.add(b)}S().isInteger(this.autoReload)&&this.autoReload>0?this.reloadSubscriber=this.timerService.get(()=>(0,m.of)(0),this.autoReload).subscribe(()=>{this.reloadData()}):this.autoReload?this.useData():this.reloadData()}onRowDetailHover(b){b.target.closest("tr").previousElementSibling.classList.remove("cds--expandable-row--hover"),b.target.closest("tr").previousElementSibling.classList.remove("cds--data-table--selected")}initUserConfig(){this.autoSave&&(this.tableName=this._calculateUniqueTableName(this.localColumns),this._loadUserConfig(),this._initUserConfigAutoSave()),(10!==this.limit||!this.userConfig.limit)&&(this.userConfig.limit=this.limit),this.userConfig.offset>=0||(this.userConfig.offset=this.model.currentPage-1),this.userConfig.search||(this.userConfig.search=this.search),this.userConfig.sorts||(this.userConfig.sorts=this.sorts),this.userConfig.columns?this.userConfig.columns.forEach(b=>{for(let U=0;U<this.localColumns.length;U++)this.localColumns[U].prop===b.prop&&(this.localColumns[U].isHidden=b.isHidden)}):this.updateUserColumns()}_calculateUniqueTableName(b){const U=z=>{if(!S().isString(z))return 0;let se=0;for(let $e=0;$e<z.length;$e++)se+=z.charCodeAt($e)*$e;return se};return b.reduce((z,se,$e)=>(U(se.prop)+U(se.name))*($e+1)+z,0).toString()}_loadUserConfig(){const b=this.localStorage.getItem(this.tableName);b&&(this.userConfig=JSON.parse(b))}_initUserConfigAutoSave(){const b=new m.Observable(this._initUserConfigProxy.bind(this));this.saveSubscriber=b.subscribe(this._saveUserConfig.bind(this))}_initUserConfigProxy(b){this.userConfig=new Proxy(this.userConfig,{set:(U,z,se)=>(U[z]=se,b.next(U),!0)})}_saveUserConfig(b){this.localStorage.setItem(this.tableName,JSON.stringify(b))}updateUserColumns(){this.userConfig.columns=this.localColumns.map(b=>({prop:b.prop,name:b.name,isHidden:!!b.isHidden}))}filterHiddenColumns(){this.tableColumns=this.localColumns}initColumnFilters(){let b=S().filter(this.localColumns,{filterable:!0});b=[...b,...this.extraFilterableColumns],this.columnFilters=b.map(U=>({column:U,options:[],value:U.filterInitValue?this.createColumnFilterOption(U.filterInitValue,U.pipe):void 0})),this.selectedFilter=S().first(this.columnFilters)}createColumnFilterOption(b,U){return{raw:S().toString(b),formatted:U?U.transform(b):S().toString(b)}}updateColumnFilterOptions(){this.columnFilters.forEach(b=>{let U=[];if(S().isUndefined(b.column.filterOptions)){const se=S().filter(S().map(this.data,b.column.prop),$e=>S().isString($e)&&""!==$e||S().isBoolean($e)||S().isFinite($e)||S().isDate($e));U=S().sortedUniq(se.sort())}else U=b.column.filterOptions;const z=U.map(se=>this.createColumnFilterOption(se,b.column.pipe));b.value&&S().isUndefined(S().find(z,{raw:b.value.raw}))&&(b.value=void 0),b.options=z})}onSelectFilter(b){const U=this.columnFilters.find(z=>z.column.name===b);this.selectedFilter=U}onChangeFilter(b){const U=this.selectedFilter.options.find(z=>z.raw===b);this.selectedFilter.value=S().isEqual(this.selectedFilter.value,U)?void 0:U,this.updateFilter()}doColumnFiltering(){const b=[];let U=S().isArray(this.data)?[...this.data]:[],z=[];return this.columnFilters.forEach(se=>{if(void 0===se.value)return;b.push({name:se.column.name,prop:se.column.prop,value:se.value});const $e=S().partition(U,Me=>{const Ze=S().get(Me,se.column.prop);return S().isUndefined(se.column.filterPredicate)?`${Ze}`===se.value.raw:se.column.filterPredicate(Me,se.value.raw)});U=$e[0],z=[...z,...$e[1]]}),this.columnFiltersChanged.emit({filters:b,data:U,dataOut:z}),S().forEach(this.selection.selected,se=>{void 0===S().find(U,{[this.identifier]:se[this.identifier]})&&(this.selection=new N.y,this.updateSelection.emit(S().clone(this.selection)))}),U}ngOnDestroy(){this.reloadSubscriber&&this.reloadSubscriber.unsubscribe(),this.saveSubscriber&&this.saveSubscriber.unsubscribe(),this._subscriptions.unsubscribe()}_addTemplates(){this.cellTemplates.bold=this.tableCellBoldTpl,this.cellTemplates.checkIcon=this.checkIconTpl,this.cellTemplates.sparkline=this.sparklineTpl,this.cellTemplates.routerLink=this.routerLinkTpl,this.cellTemplates.perSecond=this.perSecondTpl,this.cellTemplates.executing=this.executingTpl,this.cellTemplates.classAdding=this.classAddingTpl,this.cellTemplates.badge=this.badgeTpl,this.cellTemplates.map=this.mapTpl,this.cellTemplates.truncate=this.truncateTpl,this.cellTemplates.timeAgo=this.timeAgoTpl,this.cellTemplates.path=this.pathTpl,this.cellTemplates.tooltip=this.tooltipTpl,this.cellTemplates.copy=this.copyTpl}useCustomClass(b){if(!this.customCss)throw new Error("Custom classes are not set!");const U=Object.keys(this.customCss),z=Object.values(this.customCss).map((se,$e)=>(S().isFunction(se)&&se(b)||se===b)&&U[$e]).filter(se=>se).join(" ");return S().isEmpty(z)?void 0:z}ngOnChanges(b){b?.data?.currentValue&&this.useData()}setLimit(b){const U=Number(b.target.value);U>0&&(this.maxLimit&&U>this.maxLimit?(this.userConfig.limit=this.maxLimit,b.srcElement.value=this.maxLimit):this.userConfig.limit=U),this.serverSide&&this.reloadData()}reloadData(){if(!this.updating){this.status=new E.F;const b=new u.n(()=>{b.errorConfig.displayError&&(this.status=new E.F("danger",$localize`Failed to load data.`)),b.errorConfig.resetData&&(this.data=[]),this.useData()});if(b.pageInfo.offset=this.userConfig.offset,b.pageInfo.limit=this.userConfig.limit,b.search=this.userConfig.search,this.userConfig.sorts?.length){const U=this.userConfig.sorts[0];b.sort=`${"desc"===U.dir?"-":"+"}${U.prop}`}this.fetchData.emit(b),this.updating=!0}}refreshBtn(){this.loadingIndicator=!0,this.reloadData()}onPageChange(b){this.model.currentPage=b,this.userConfig.offset=this.model.currentPage-1,this.userConfig.limit=this.model.pageLength,this.serverSide?this.reloadData():this.doPagination({})}doPagination({page:b=this.model.currentPage,size:U=this.model.pageLength,filteredData:z=this.rows}){if(this.serverSide)return void this._dataset.next(z);if(0===this.limit)return this.model.currentPage=1,this.model.pageLength=z.length||1,void this._dataset.next(z);const{start:se,end:$e}=this.paginate({page:b,size:U,filteredData:z}),Me=z?.slice?.(se,$e);this._dataset.next(Me)}rowIdentity(){return b=>{const U=b[this.identifier];if(S().isUndefined(U))throw new Error(`Wrong identifier "${this.identifier}" -> "${U}"`);return U}}useData(){this.data&&(this.updateColumnFilterOptions(),this.updateFilter(),this.reset(),this.doSorting(),this.updateSelected(),this.updateExpanded(),this.toggleExpandRow())}reset(){this.loadingIndicator=!1,this.updating=!1}updateSelected(){if(!this.selection?.selected?.length)return;const b=new Set;if(this.selection.selected.forEach(z=>{for(const se of this.data)z[this.identifier]===se[this.identifier]&&b.add(se)}),0===b.size)return;const U=Array.from(b.values());U?.forEach?.(z=>{const se=this.model.data.findIndex($e=>S().get($e,[0,"selected",this.identifier])===z[this.identifier]);se>-1&&this.model.selectRow(se,!0)}),("onChange"!==this.updateSelectionOnRefresh||!S().isEqual(this.selection.selected,U))&&(this.selection.selected=U,"never"!==this.updateSelectionOnRefresh&&this.updateSelection.emit(S().clone(this.selection)))}updateExpanded(){if(S().isUndefined(this.expanded)||"never"===this.updateExpandedOnRefresh)return;const b=this.expanded[this.identifier],U=S().find(this.data,z=>b===z[this.identifier]);"onChange"===this.updateExpandedOnRefresh&&S().isEqual(this.expanded,U)||(this.expanded=U)}_toggleSelection(b,U){const z=S().get(this.model.data?.[b],[0,"selected"]);this.selection.selected=U?[...this.selection.selected,z]:this.selection.selected.filter(se=>se[this.identifier]!==z[this.identifier])}onSelect(b){const U=S().get(this.model.data?.[b],[0,"selected"]);"single"===this.selectionType?(this.model.selectAll(!1),this.selection.selected=[U]):this.selection.selected=[...this.selection.selected,U],this.model.selectRow(b,!0),this.updateSelection.emit(this.selection)}onSelectAll(){this.model.selectAll(!this.selectAllCheckbox&&!this.selectAllCheckboxSomeSelected),this.model.rowsSelected.forEach((b,U)=>this._toggleSelection(U,b)),this.updateSelection.emit(this.selection),this.cdRef.detectChanges()}onDeselect(b){this.model.selectRow(b,!1),"single"!==this.selectionType&&(this._toggleSelection(b,!1),this.updateSelection.emit(this.selection))}onDeselectAll(){this.model.selectAll(!1),this.model.rowsSelected.forEach((b,U)=>this._toggleSelection(U,b)),this.updateSelection.emit(this.selection)}onBatchActionsCancel(){this.model.selectAll(!1),this.model.rowsSelected.forEach((b,U)=>this._toggleSelection(U,!1))}toggleColumn(b){const U=b.prop,z=!b.isHidden;z&&1===this.visibleColumns.length?b.isHidden=!0:(S().find(this.localColumns,se=>se.prop===U).isHidden=z,this.updateColumns())}updateColumns(){this.updateUserColumns(),this.filterHiddenColumns();const b=this.userConfig.sorts[0].prop;S().find(this.visibleColumns,U=>U.prop===b)||(this.userConfig.sorts=this.createSortingDefinition(this.visibleColumns[0].prop)),this.showInlineActions&&this.tableActions?.dropDownActions?.length&&(this.tableColumns=[...this.tableColumns,{name:"",prop:"",className:"w25",sortable:!1,cellTemplate:this.tableActionTpl}]),this.cdRef.detectChanges()}createSortingDefinition(b){return[{prop:b,dir:P.v.asc}]}changeSorting(b){if(!this.model?.header?.[b])return;const U=this.tableColumns?.[b]?.prop;if(this.model.header[b].sorted)this.model.header[b].descending=this.model.header[b].ascending;else{const $e=this.userConfig?.sorts?.find?.(Me=>Me.prop===U)?.dir;this.model.header[b].ascending="asc"===$e,this.model.header[b].descending="desc"===$e}this.userConfig.sorts=[{dir:this.model.header[b].ascending?P.v.asc:P.v.desc,prop:U}],this.serverSide&&(this.userConfig.offset=0,this.reloadData()),this.doSorting(b)}doSorting(b){const U=b||this.visibleColumns?.findIndex?.(Me=>Me.prop===this.userConfig?.sorts?.[0]?.prop);if(S().isNil(U)||U<0||!this.model?.header?.[U])return;const z=this.tableColumns?.[U]?.prop,se=this.userConfig?.sorts?.find?.(Me=>Me.prop===z)?.dir;this.model.header[U].ascending="asc"===se,this.model.header[U].descending="desc"===se;const $e=this.rows.slice();$e.sort((Me,Ze)=>{const k=S().get(Me,z),Ee=S().get(Ze,z);return k>Ee?this.model.header[U].descending?-1:1:Ee>k?this.model.header[U].descending?1:-1:0}),this.model.header[U].sorted=!0,this.rows=$e.slice()}onClearSearch(){this.search="",this.expanded=void 0,this.updateFilter()}onClearFilters(){this.columnFilters.forEach(b=>{b.value=void 0}),this.selectedFilter=S().first(this.columnFilters),this.updateFilter()}updateFilter(){if(this.serverSide)this.userConfig.search!==this.search&&(this.userConfig.offset=0,this.userConfig.limit=this.limit,this.userConfig.search=this.search,this.updating=!1,this.reloadData()),this.rows=this.data;else{let b=0!==this.columnFilters.length?this.doColumnFiltering():this.data;if(this.search.length>0&&b?.length){const U=this.localColumns.filter(z=>z.cellTransformation!==C.x.sparkline);b=this.subSearch(b,$.prepareSearch(this.search),U)}this.rows=b}}subSearch(b,U,z){if(0===U.length||0===b.length)return b;const se=U.pop().replace(/\+/g," ").split(":"),$e=[...z];return 2===se.length&&(z=$e.filter(Me=>-1!==Me.name.toLowerCase().indexOf(se[0]))),b=this.basicDataSearch(S().last(se),b,z),this.subSearch(b,U,$e)}basicDataSearch(b,U,z){return 0===b.length?U:U.filter(se=>z.filter($e=>{let Me=S().get(se,$e.prop);if(S().isUndefined($e.pipe)||(Me=$e.pipe.transform(Me)),S().isUndefined(Me)||S().isNull(Me))return!1;if(S().isArray(Me)?Me=Me.join(" "):(S().isNumber(Me)||S().isBoolean(Me))&&(Me=Me.toString()),S().isObjectLike(Me)){if(!this.searchableObjects)return!1;Me=JSON.stringify(Me)}return-1!==Me.toLowerCase().indexOf(b)}).length>0)}getRowClass(){return()=>({clickable:!S().isUndefined(this.selectionType)})}toggleExpandRow(){if(S().isNil(this.expanded))return;const b=this.model.data.findIndex(U=>{const z=S().get(U,[0,"selected",this.identifier]),se=this.expanded?.[this.identifier];return S().isEqual(z,se)});b<0||(this.model.rowsExpanded=this.model.rowsExpanded.map((U,z)=>z===b))}firstExpandedDataInRow(b){const U=b.find(z=>z.expandedData);return U&&U.expandedData}shouldExpandAsTable(b){return b.some(U=>U.expandAsTable)}isRowExpandable(b){return this.model.data[b].some(U=>U&&U.expandedData)}trackByFn(b,U,z){return S().get(z,[0,"data","row",b])?.toString?.()||z}updateSelectAllCheckbox(){const b=this.model.selectedRowsCount();b<=0?(this.selectAllCheckbox=!1,this.selectAllCheckboxSomeSelected=!1):b<this.model.data.length?(this.selectAllCheckbox=!0,this.selectAllCheckboxSomeSelected=!0):(this.selectAllCheckbox=!0,this.selectAllCheckboxSomeSelected=!1)}static{this.\u0275fac=function(U){return new(U||$)(a.\u0275\u0275directiveInject(a.ChangeDetectorRef),a.\u0275\u0275directiveInject(M.H))}}static{this.\u0275cmp=a.\u0275\u0275defineComponent({type:$,selectors:[["cd-table"]],contentQueries:function(U,z,se){if(1&U&&(a.\u0275\u0275contentQuery(se,O.N,5),a.\u0275\u0275contentQuery(se,I.j,5)),2&U){let $e;a.\u0275\u0275queryRefresh($e=a.\u0275\u0275loadQuery())&&(z.rowDetail=$e.first),a.\u0275\u0275queryRefresh($e=a.\u0275\u0275loadQuery())&&(z.tableActions=$e.first)}},viewQuery:function(U,z){if(1&U&&(a.\u0275\u0275viewQuery(T,7),a.\u0275\u0275viewQuery(K,7),a.\u0275\u0275viewQuery(ce,7),a.\u0275\u0275viewQuery(fe,7),a.\u0275\u0275viewQuery(Te,7),a.\u0275\u0275viewQuery(Se,7),a.\u0275\u0275viewQuery(Ge,7),a.\u0275\u0275viewQuery(Ye,7),a.\u0275\u0275viewQuery(ct,7),a.\u0275\u0275viewQuery(rt,7),a.\u0275\u0275viewQuery(De,7),a.\u0275\u0275viewQuery(ze,7),a.\u0275\u0275viewQuery(Et,7),a.\u0275\u0275viewQuery(Oe,7),a.\u0275\u0275viewQuery(pt,7),a.\u0275\u0275viewQuery(ye,7),a.\u0275\u0275viewQuery(je,7),a.\u0275\u0275viewQuery(ot,7),a.\u0275\u0275viewQuery(tt,7)),2&U){let se;a.\u0275\u0275queryRefresh(se=a.\u0275\u0275loadQuery())&&(z.tableCellBoldTpl=se.first),a.\u0275\u0275queryRefresh(se=a.\u0275\u0275loadQuery())&&(z.sparklineTpl=se.first),a.\u0275\u0275queryRefresh(se=a.\u0275\u0275loadQuery())&&(z.routerLinkTpl=se.first),a.\u0275\u0275queryRefresh(se=a.\u0275\u0275loadQuery())&&(z.checkIconTpl=se.first),a.\u0275\u0275queryRefresh(se=a.\u0275\u0275loadQuery())&&(z.perSecondTpl=se.first),a.\u0275\u0275queryRefresh(se=a.\u0275\u0275loadQuery())&&(z.executingTpl=se.first),a.\u0275\u0275queryRefresh(se=a.\u0275\u0275loadQuery())&&(z.classAddingTpl=se.first),a.\u0275\u0275queryRefresh(se=a.\u0275\u0275loadQuery())&&(z.badgeTpl=se.first),a.\u0275\u0275queryRefresh(se=a.\u0275\u0275loadQuery())&&(z.mapTpl=se.first),a.\u0275\u0275queryRefresh(se=a.\u0275\u0275loadQuery())&&(z.truncateTpl=se.first),a.\u0275\u0275queryRefresh(se=a.\u0275\u0275loadQuery())&&(z.timeAgoTpl=se.first),a.\u0275\u0275queryRefresh(se=a.\u0275\u0275loadQuery())&&(z.rowDetailsTpl=se.first),a.\u0275\u0275queryRefresh(se=a.\u0275\u0275loadQuery())&&(z.rowSelectionTpl=se.first),a.\u0275\u0275queryRefresh(se=a.\u0275\u0275loadQuery())&&(z.pathTpl=se.first),a.\u0275\u0275queryRefresh(se=a.\u0275\u0275loadQuery())&&(z.tooltipTpl=se.first),a.\u0275\u0275queryRefresh(se=a.\u0275\u0275loadQuery())&&(z.copyTpl=se.first),a.\u0275\u0275queryRefresh(se=a.\u0275\u0275loadQuery())&&(z.defaultValueTpl=se.first),a.\u0275\u0275queryRefresh(se=a.\u0275\u0275loadQuery())&&(z.rowDetailTpl=se.first),a.\u0275\u0275queryRefresh(se=a.\u0275\u0275loadQuery())&&(z.tableActionTpl=se.first)}},inputs:{headerTitle:"headerTitle",headerDescription:"headerDescription",data:"data",columns:"columns",sorts:"sorts",columnMode:"columnMode",onlyActionHeader:"onlyActionHeader",toolHeader:"toolHeader",searchField:"searchField",header:"header",footer:"footer",limit:"limit",maxLimit:"maxLimit",hasDetails:"hasDetails",showInlineActions:"showInlineActions",autoReload:"autoReload",identifier:"identifier",forceIdentifier:"forceIdentifier",selectionType:"selectionType",updateSelectionOnRefresh:"updateSelectionOnRefresh",updateExpandedOnRefresh:"updateExpandedOnRefresh",autoSave:"autoSave",searchableObjects:"searchableObjects",customCss:"customCss",extraFilterableColumns:"extraFilterableColumns",status:"status",serverSide:"serverSide",size:"size",count:"count",layer:"layer",theme:"theme"},outputs:{fetchData:"fetchData",updateSelection:"updateSelection",setExpandedRow:"setExpandedRow",columnFiltersChanged:"columnFiltersChanged"},features:[a.\u0275\u0275NgOnChangesFeature],ngContentSelectors:bt,decls:46,vars:24,consts:()=>{let b,U,z,se,$e,Me,Ze,k,Ee,G;return b=$localize`:␟4c462a5943a2d5f9073ab62a358c679599fdf1cb␟8383750411705964009: ${"\ufffd0\ufffd"}:INTERPOLATION: `,U=$localize`:␟5a548cdf722556fb947841f1e1127d1b789b81c9␟4849193465151578488: ${"\ufffd0\ufffd"}:INTERPOLATION: `,z=$localize`:␟00335c647338fa7bdd51f43386d8c975b0a154e9␟6479229347012594386: ${"\ufffd0\ufffd"}:INTERPOLATION: `,se=$localize`:␟16d449549ab7bc61caf3d636372a4a56b5870383␟3184700926171002527:Any`,$e=$localize`:␟1e5e23363e949f7dcbaf034bdb141a561132a10e␟6559246822757089203:Clear filters`,Me=$localize`:␟fb6f6996aecb9bd904931ceaf8acf6f0477d276f␟2186214574359585705:No data to display`,Ze=$localize`:␟e524bc47a7e386413b7233dd3749d8615caf4a1e␟2525689140568150553: ${"\ufffd0\ufffd"}:INTERPOLATION: `,k=$localize`:␟6da82099aa7f3675961c1ca6642f196b6a542c65␟5012017817209984358:${"\ufffd0\ufffd"}:INTERPOLATION:`,Ee=$localize`:␟e34abafac646f7c1ba0467f79b2dba47c673759d␟1244975218403222993: ${"\ufffd0\ufffd"}:INTERPOLATION: `,G=$localize`:␟2a3dab422cc892db037db8632bb84a6bf496e2d1␟330692511973460057:Expand/Collapse Row`,[["noDataTemplate",""],["rowDetailTpl",""],["defaultValueTpl",""],["tableActionTpl",""],["tableCellBoldTpl",""],["sparklineTpl",""],["routerLinkTpl",""],["checkIconTpl",""],["perSecondTpl",""],["executingTpl",""],["classAddingTpl",""],["badgeTpl",""],["mapTpl",""],["tooltipTpl",""],["truncateTpl",""],["rowDetailsTpl",""],["timeAgoTpl",""],["pathTpl",""],["copyTpl",""],["toolbar",""],["showHideColumnsRef",""],b,U,z,se,$e,Me,Ze,Ee,["ngbTooltip",k],[1,"content-theme",3,"cdsLayer","cdsTheme"],[4,"ngIf"],[3,"model","batchText","cancel",4,"ngIf"],["class","d-flex justify-content-end align-items-center filter-tags",4,"ngIf"],["cdsTable","",3,"sortable","noBorder","size","striped","skeleton"],["cdsTableHead","",3,"deselectAll","selectAll","sort","sortable","model","selectAllCheckbox","selectAllCheckboxSomeSelected","showSelectionColumn","enableSingleSelect","skeleton","stickyHeader"],["cdsTableBody","",3,"enableSingleSelect","skeleton",4,"ngIf","ngIfElse"],[3,"selectPage","model","disabled","skeleton","pageInputDisabled"],["ngx-datatable-cell-template",""],["cdsTableHeaderTitle",""],["cdsTableHeaderDescription","",4,"ngIf"],["cdsTableHeaderDescription",""],[3,"cancel","model","batchText"],["aria-label","search",3,"expandable","ngModel","ngModelChange","valueChange","clear",4,"ngIf"],["class","toolbar-action","placement","bottom",3,"kind","disabled","title","description","click",4,"ngIf"],["cdsButton","ghost","placement","bottom",1,"toolbar-action",3,"cdsOverflowMenu","flip","offset"],[1,"cds--toolbar-action__icon",3,"cdsIcon","size"],[4,"ngFor","ngForOf"],["cdsButton","primary",3,"tabindex","class","title","routerLink","preserveFragment","disabled","click",4,"ngIf"],["cdsButton","primary",3,"click","tabindex","title","routerLink","preserveFragment","disabled"],["aria-label","search",3,"ngModelChange","valueChange","clear","expandable","ngModel"],[1,"d-inline-flex","position-relative"],[3,"cdsIcon","size"],["display","inline","id","filter_name",3,"valueChange"],["display","inline","id","filter_option",3,"valueChange"],[3,"value","selected"],["placement","bottom",1,"toolbar-action",3,"click","kind","disabled","title","description"],[3,"cdsIcon","size","ngClass"],[1,"vstack","gap-3","p-3",3,"click","cdsTheme"],[3,"id","name","checked","checkedChange",4,"ngIf"],[3,"checkedChange","id","name","checked"],[1,"d-flex","justify-content-end","align-items-center","filter-tags"],[1,"d-flex","gap-2"],["cdsButton","ghost",3,"click"],["type","outline","class","align-self-center",4,"ngIf"],["type","outline",1,"align-self-center"],[1,"me-2"],[1,"cds--tag__close-icon",3,"click"],["cdsTableBody","",3,"enableSingleSelect","skeleton"],[4,"ngFor","ngForOf","ngForTrackBy"],["cdsTableRow","",3,"model","row","size","selected","expandable","expanded","showSelectionColumn","skeleton","selectRow","deselectRow","expandRow","rowClick",4,"ngIf"],["cdsTableExpandedRow","","cdsExpandedRowHover","",3,"row","expanded","skeleton",4,"ngIf"],["cdsTableRow","",3,"selectRow","deselectRow","expandRow","rowClick","model","row","size","selected","expandable","expanded","showSelectionColumn","skeleton"],["cdsTableExpandedRow","","cdsExpandedRowHover","",3,"row","expanded","skeleton"],["cdsTableRow","",3,"model","showSelectionColumnCheckbox","showSelectionColumn","row","size","selected","skeleton",4,"ngFor","ngForOf"],["cdsTableRow","",3,"model","showSelectionColumnCheckbox","showSelectionColumn","row","size","selected","skeleton"],["cdstablerow",""],["class","no-data","cdstabledata","",4,"ngIf"],["cdstabledata","",1,"no-data"],[1,"d-flex","justify-content-center","align-items-center"],["data-testid","datatable-row-detail",3,"mouseenter",4,"ngIf"],["data-testid","datatable-row-detail",3,"mouseenter"],[3,"ngTemplateOutlet"],[3,"ngClass"],["data-testid","table-action-btn","class","d-flex justify-content-end",3,"flip",4,"ngIf"],["data-testid","table-action-btn",1,"d-flex","justify-content-end",3,"flip"],["data-testid","table-action-option-btn",3,"class","title","routerLink","preserveFragment","disabled","click",4,"ngIf"],["data-testid","table-action-option-btn",3,"click","title","routerLink","preserveFragment","disabled"],[1,"position-relative"],[3,"data","isBinary"],[3,"routerLink","queryParams"],[3,"ngClass","hidden"],[3,"ngClass",4,"ngIf"],["class","badge",3,"ngClass",4,"ngIf"],[1,"badge",3,"ngClass"],[6,"ngbTooltip"],["data-toggle","tooltip",3,"title"],["href","javascript:void(0)","title",G,1,"expand-collapse-icon","tc_expand-collapse",3,"click"],["size","lg",3,"source","byId","text",4,"ngIf"],["size","lg",3,"source","byId","text"],[3,"source","byId","size","text",4,"ngIf"],[3,"source","byId","size","text"]]},template:function(U,z){if(1&U){const se=a.\u0275\u0275getCurrentView();a.\u0275\u0275projectionDef(Ft),a.\u0275\u0275elementStart(0,"cds-table-container",30),a.\u0275\u0275template(1,it,4,2,"cds-table-header",31)(2,vn,12,14,"cds-table-toolbar",32)(3,Nt,6,1,"div",33),a.\u0275\u0275elementStart(4,"table",34)(5,"thead",35),a.\u0275\u0275listener("deselectAll",function(){return a.\u0275\u0275restoreView(se),a.\u0275\u0275resetView(z.onDeselectAll())})("selectAll",function(){return a.\u0275\u0275restoreView(se),a.\u0275\u0275resetView(z.onSelectAll())})("sort",function(Me){return a.\u0275\u0275restoreView(se),a.\u0275\u0275resetView(z.changeSorting(Me))}),a.\u0275\u0275elementEnd(),a.\u0275\u0275template(6,ut,2,4,"tbody",36),a.\u0275\u0275elementEnd(),a.\u0275\u0275elementStart(7,"cds-pagination",37),a.\u0275\u0275listener("selectPage",function(Me){return a.\u0275\u0275restoreView(se),a.\u0275\u0275resetView(z.onPageChange(Me))}),a.\u0275\u0275elementEnd()(),a.\u0275\u0275template(8,Gn,3,1,"ng-template",null,0,a.\u0275\u0275templateRefExtractor)(10,Vn,1,1,"ng-template",null,1,a.\u0275\u0275templateRefExtractor)(12,Sn,2,2,"ng-template",null,2,a.\u0275\u0275templateRefExtractor)(14,Ht,1,1,"ng-template",null,3,a.\u0275\u0275templateRefExtractor)(16,Bn,2,1,"ng-template",null,4,a.\u0275\u0275templateRefExtractor)(18,zn,2,2,"ng-template",null,5,a.\u0275\u0275templateRefExtractor)(20,Mn,2,5,"ng-template",null,6,a.\u0275\u0275templateRefExtractor)(22,Xn,2,6,"ng-template",null,7,a.\u0275\u0275templateRefExtractor)(24,kn,2,3,"ng-template",null,8,a.\u0275\u0275templateRefExtractor)(26,so,4,4,"ng-template",null,9,a.\u0275\u0275templateRefExtractor)(28,Kn,3,8,"ng-template",null,10,a.\u0275\u0275templateRefExtractor)(30,Jt,2,3,"ng-template",null,11,a.\u0275\u0275templateRefExtractor)(32,Rn,3,4,"ng-template",null,12,a.\u0275\u0275templateRefExtractor)(34,Qn,2,3,"ng-template",null,13,a.\u0275\u0275templateRefExtractor)(36,Yn,3,6,"ng-template",null,14,a.\u0275\u0275templateRefExtractor)(38,Jn,1,4,"ng-template",38,15,a.\u0275\u0275templateRefExtractor)(40,Zn,4,6,"ng-template",null,16,a.\u0275\u0275templateRefExtractor)(42,qn,1,1,"ng-template",null,17,a.\u0275\u0275templateRefExtractor)(44,le,1,1,"ng-template",null,18,a.\u0275\u0275templateRefExtractor)}if(2&U){const se=a.\u0275\u0275reference(9);a.\u0275\u0275property("cdsLayer",z.layer)("cdsTheme",z.theme),a.\u0275\u0275advance(),a.\u0275\u0275property("ngIf",z.headerTitle),a.\u0275\u0275advance(),a.\u0275\u0275property("ngIf",z.toolHeader),a.\u0275\u0275advance(),a.\u0275\u0275property("ngIf",z.toolHeader&&z.columnFiltered),a.\u0275\u0275advance(),a.\u0275\u0275property("sortable",z.sortable)("noBorder",!1)("size",z.size)("striped",!1)("skeleton",z.loadingIndicator),a.\u0275\u0275advance(),a.\u0275\u0275property("sortable",z.sortable)("model",z.model)("selectAllCheckbox",z.selectAllCheckbox)("selectAllCheckboxSomeSelected",z.selectAllCheckboxSomeSelected)("showSelectionColumn",z.showSelectionColumn)("enableSingleSelect",z.enableSingleSelect)("skeleton",z.loadingIndicator)("stickyHeader",!1),a.\u0275\u0275advance(),a.\u0275\u0275property("ngIf",!z.noData)("ngIfElse",se),a.\u0275\u0275advance(),a.\u0275\u0275property("model",z.model)("disabled",0===z.limit)("skeleton",z.loadingIndicator)("pageInputDisabled",0===z.limit)}},dependencies:[A.NgClass,A.NgForOf,A.NgIf,A.NgTemplateOutlet,B.NgSelectOption,B.\u0275NgSelectMultipleOption,B.NgControlStatus,B.NgModel,ie.NgbTooltip,V.B,L.N,Q.RouterLink,l.TableToolbar,l.TableContainer,l.TableHeader,l.TableHeaderTitle,l.TableHeaderDescription,l.TableToolbarActions,l.TableToolbarSearch,l.TableToolbarContent,l.ExpandedRowHover,l.TableDirective,l.TableHead,l.TableBody,l.TableRowComponent,l.TableExpandedRow,l.Button,l.IconButton,l.IconDirective,l.Checkbox,l.Pagination,l.OverflowMenu,l.OverflowMenuDirective,l.OverflowMenuOption,l.ThemeDirective,l.Select,l.Option,l.Tag,l.LayerDirective,Ie.S,He.F,Ae.u,We.D,te.Q,_e.r,oe.H,de.i,ue.N],styles:["@keyframes _ngcontent-%COMP%_progress-loading{0%{left:-200px;width:15%}50%{width:30%}70%{width:70%}80%{left:50%}95%{left:120%}to{left:100%}}.reload[_ngcontent-%COMP%]{animation-duration:2.5s;animation-iteration-count:infinite;animation-name:_ngcontent-%COMP%_spin;animation-timing-function:linear}@keyframes _ngcontent-%COMP%_spin{0%{transform:rotate(0)}to{transform:rotate(360deg)}}.no-data[_ngcontent-%COMP%]{font-size:1.1rem;height:5rem}  .table-actions{display:flex;flex-flow:row-reverse;gap:.1em}.filter-tags[_ngcontent-%COMP%]{background-color:var(--cds-layer-accent);border-bottom:1px solid var(--cds-layer-active);color:var(--cds-text-primary)}  div.cds--batch-actions.cds--batch-actions--active{background-color:#25828e}  div.cds--batch-summary{background-color:#25828e}"],changeDetection:0})}}return $})()},80697:(q,y,s)=>{s.d(y,{G:()=>l,R:()=>h});var a=s(29841),e=s.n(a);function l(...m){switch(m.length){case 1:return R.apply(void 0,m);case 3:return S.apply(void 0,m);default:throw new Error}}function h(m,v,E){const C=`__ignore_${v}`;Array.isArray(m[C])?m[C].push(E):m[C]=[E]}function R(m){for(const v of Object.getOwnPropertyNames(m.prototype)){const E=Object.getOwnPropertyDescriptor(m.prototype,v);!(E.value instanceof Function)||"constructor"===v||(S(m.prototype,v,E),Object.defineProperty(m.prototype,v,E))}}function S(m,v,E){void 0===E&&(E=Object.getOwnPropertyDescriptor(m,v));const C=E.value;E.value=function(){const u=m[`__ignore_${v}`]||[],N=[];for(let I=0;I<arguments.length;I++)N[I]=e().isString(arguments[I])&&-1===u.indexOf(I)?encodeURIComponent(arguments[I]):arguments[I];return C.apply(this,N)}}},71656:(q,y,s)=>{s.d(y,{V:()=>S});var a=s(87536),l=s(29841),h=s.n(l),R=s(82254);let S=(()=>{class m{constructor(E,C,d){this.templateRef=E,this.viewContainer=C,this.authStorageService=d,this.cdScopeMatchAll=!0}set cdScope(E){this.permissions=this.authStorageService.getPermissions(),this.isAuthorized(E)?this.viewContainer.createEmbeddedView(this.templateRef):this.viewContainer.clear()}isAuthorized(E){const C=this.cdScopeMatchAll?h().every:h().some;return h().isString(E)?h().get(this.permissions,[E,"read"],!1):h().isArray(E)?C(E,d=>this.permissions[d].read):!!h().isObject(E)&&C(E,(d,u)=>C(d,N=>this.permissions[u][N]))}static{this.\u0275fac=function(C){return new(C||m)(a.\u0275\u0275directiveInject(a.TemplateRef),a.\u0275\u0275directiveInject(a.ViewContainerRef),a.\u0275\u0275directiveInject(R.v))}}static{this.\u0275dir=a.\u0275\u0275defineDirective({type:m,selectors:[["","cdScope",""]],inputs:{cdScope:"cdScope",cdScopeMatchAll:"cdScopeMatchAll"}})}}return m})()},23603:(q,y,s)=>{s.d(y,{B:()=>R});var a=s(87536),l=s(29841),h=s.n(l);let R=(()=>{class S{constructor(v){this.elementRef=v,this.focus=!0}ngAfterViewInit(){const v=this.elementRef.nativeElement;this.focus&&h().isFunction(v.focus)&&v.focus()}set autofocus(v){h().isBoolean(v)?this.focus=v:h().isFunction(v)&&(this.focus=v())}static{this.\u0275fac=function(E){return new(E||S)(a.\u0275\u0275directiveInject(a.ElementRef))}}static{this.\u0275dir=a.\u0275\u0275defineDirective({type:S,selectors:[["","autofocus",""]],inputs:{autofocus:"autofocus"}})}}return S})()},42865:(q,y,s)=>{s.d(y,{Y:()=>E});var a=s(87536),l=s(53648),R=s(29841),S=s.n(R),m=s(73651),v=s(12540);let E=(()=>{class C{constructor(u,N,M,I){this.elementRef=u,this.control=N,this.dimlessBinaryPipe=M,this.formatter=I,this.ngModelChange=new a.EventEmitter,this.el=this.elementRef.nativeElement}ngOnInit(){this.setValue(this.el.value)}setValue(u){/^[\d.]+$/.test(u)?u+=this.defaultUnit||"m":u&&(this.control.control.setValue(u),this.control.control.addValidators(l.Validators.pattern(/^[a-zA-Z\d. ]+$/)),this.control.control.updateValueAndValidity());const N=this.formatter.toBytes(u),M=this.round(N);this.el.value=this.dimlessBinaryPipe.transform(M),null!==N?(this.ngModelChange.emit(this.el.value),this.control.control.setValue(this.el.value)):(this.ngModelChange.emit(null),this.control.control.setValue(null))}round(u){if(null!==u&&0!==u){if(!S().isUndefined(this.minBytes)&&u<this.minBytes)return this.minBytes;if(!S().isUndefined(this.maxBytes)&&u>this.maxBytes)return this.maxBytes;if(!S().isUndefined(this.roundPower)){const N=Math.round(Math.log(u)/Math.log(this.roundPower));return Math.pow(this.roundPower,N)}}return u}onBlur(u){this.setValue(u)}static{this.\u0275fac=function(N){return new(N||C)(a.\u0275\u0275directiveInject(a.ElementRef),a.\u0275\u0275directiveInject(l.NgControl),a.\u0275\u0275directiveInject(m.l),a.\u0275\u0275directiveInject(v.k))}}static{this.\u0275dir=a.\u0275\u0275defineDirective({type:C,selectors:[["","cdDimlessBinary",""]],hostBindings:function(N,M){1&N&&a.\u0275\u0275listener("blur",function(O){return M.onBlur(O.target.value)})},inputs:{minBytes:"minBytes",maxBytes:"maxBytes",roundPower:"roundPower",defaultUnit:"defaultUnit"},outputs:{ngModelChange:"ngModelChange"}})}}return C})()},21445:(q,y,s)=>{s.d(y,{h:()=>R});var a=s(53648),l=s(87536);let R=(()=>{class S{static{this.\u0275fac=function(E){return new(E||S)}}static{this.\u0275mod=l.\u0275\u0275defineNgModule({type:S})}static{this.\u0275inj=l.\u0275\u0275defineInjector({imports:[a.ReactiveFormsModule]})}}return S})()},19271:(q,y,s)=>{s.d(y,{k:()=>S});var a=s(87536),e=s(95631);let l=(()=>{class m{constructor(){this.searchSubject=new e.Subject}emit(E){this.searchSubject.next(E)}static{this.\u0275fac=function(C){return new(C||m)}}static{this.\u0275prov=a.\u0275\u0275defineInjectable({token:m,factory:m.\u0275fac,providedIn:"root"})}}return m})();var h=s(50619);let S=(()=>{class m{constructor(E){this.combBoxService=E,this.updatedItems=new a.EventEmitter,this.searchSubject=new e.Subject,this.selectedItems=[]}ngOnInit(){this.searchSubscription=this.searchSubject.pipe((0,h.debounceTime)(300),(0,h.distinctUntilChanged)()).subscribe(E=>{this.items=this.items.map(d=>{const u=this.selectedItems.some(N=>N.content===d.content);return{...d,selected:u}}),this.items.some(d=>d.content===E)||(this.items=this.items.concat({content:E,name:E})),this.updatedItems.emit(this.items),this.combBoxService.emit({searchString:E})})}onInput(E){E.length>1&&this.searchSubject.next(E)}onSelected(E){this.selectedItems=E}ngOnDestroy(){this.searchSubscription.unsubscribe(),this.searchSubject.complete()}static{this.\u0275fac=function(C){return new(C||m)(a.\u0275\u0275directiveInject(l))}}static{this.\u0275dir=a.\u0275\u0275defineDirective({type:m,selectors:[["","cdDynamicInputCombobox",""]],hostBindings:function(C,d){1&C&&a.\u0275\u0275listener("search",function(N){return d.onInput(N)})("selected",function(N){return d.onSelected(N)})},inputs:{items:"items"},outputs:{updatedItems:"updatedItems"}})}}return m})()},90476:(q,y,s)=>{s.d(y,{S:()=>R});var a=s(87536),l=s(82254),h=s(24689);let R=(()=>{class S{constructor(v,E,C){this.formScope=v,this.authStorageService=E,this.elementRef=C}ngAfterViewInit(){this.permissions=this.authStorageService.getPermissions();const v=this.formScope?.cdFormScope;v&&!this.permissions?.[v]?.update&&(this.elementRef.nativeElement.disabled=!0)}static{this.\u0275fac=function(E){return new(E||S)(a.\u0275\u0275directiveInject(h.q,8),a.\u0275\u0275directiveInject(l.v),a.\u0275\u0275directiveInject(a.ElementRef))}}static{this.\u0275dir=a.\u0275\u0275defineDirective({type:S,selectors:[["input",3,"cdNoFormInputDisable",""],["select",3,"cdNoFormInputDisable",""],["button",3,"cdNoFormInputDisable",""],["","cdFormInputDisable",""]]})}}return S})()},56677:(q,y,s)=>{s.d(y,{G:()=>S});var a=s(87536),l=s(92805),h=s(23589),R=s(74902);let S=(()=>{class m{constructor(E,C){this.templateRef=E,this.viewContainer=C}set cdFormLoading(E){let C;switch(this.viewContainer.clear(),E){case R.r.Loading:C=this.resolveNgContent($localize`Loading form data...`),this.viewContainer.createComponent(h.e,{projectableNodes:C});break;case R.r.Ready:this.viewContainer.createEmbeddedView(this.templateRef);break;case R.r.Error:C=this.resolveNgContent($localize`Form data could not be loaded.`),this.viewContainer.createComponent(l.m,{projectableNodes:C}).instance.type="error"}}resolveNgContent(E){return[[document.createTextNode(E)]]}static{this.\u0275fac=function(C){return new(C||m)(a.\u0275\u0275directiveInject(a.TemplateRef),a.\u0275\u0275directiveInject(a.ViewContainerRef))}}static{this.\u0275dir=a.\u0275\u0275defineDirective({type:m,selectors:[["","cdFormLoading",""]],inputs:{cdFormLoading:"cdFormLoading"}})}}return m})()},24689:(q,y,s)=>{s.d(y,{q:()=>l});var a=s(87536);let l=(()=>{class h{static{this.\u0275fac=function(m){return new(m||h)}}static{this.\u0275dir=a.\u0275\u0275defineDirective({type:h,selectors:[["","cdFormScope",""]],inputs:{cdFormScope:"cdFormScope"}})}}return h})()},10142:(q,y,s)=>{s.d(y,{a:()=>S});var a=s(53648),l=s(87536);let S=(()=>{class m{get validClass(){return!!this.control&&this.control.valid&&(this.control.touched||this.control.dirty)}get invalidClass(){return!!this.control&&this.control.invalid&&this.control.touched&&this.control.dirty}get path(){return function R(m,v){return[...v.path,m]}(this.formControlName,this.parent)}get control(){return this.formDirective&&this.formDirective.getControl(this)}get formDirective(){return this.parent?this.parent.formDirective:null}constructor(E){this.parent=E}static{this.\u0275fac=function(C){return new(C||m)(l.\u0275\u0275directiveInject(a.ControlContainer,13))}}static{this.\u0275dir=l.\u0275\u0275defineDirective({type:m,selectors:[["",8,"form-control"],["",8,"form-check-input"],["",8,"custom-control-input"]],hostVars:4,hostBindings:function(C,d){2&C&&l.\u0275\u0275classProp("is-valid",d.validClass)("is-invalid",d.invalidClass)},inputs:{formControlName:"formControlName",formControl:"formControl"}})}}return m})()},78708:(q,y,s)=>{s.d(y,{C:()=>R});var a=s(87536),l=s(53648);let R=(()=>{class S{get hasErrors(){return this.formControlNames.some(v=>!v.valid&&v.dirty&&v.touched)&&!this.validationDisabled}get hasSuccess(){return!this.formControlNames.some(v=>!v.valid)&&this.formControlNames.some(v=>v.dirty&&v.touched)&&!this.validationDisabled}constructor(v){this.elRef=v,this.validationDisabled=!1}get label(){const v=this.elRef.nativeElement.querySelector("label");return v&&v.textContent?v.textContent.trim():"This field"}get isDirtyAndTouched(){return this.formControlNames.some(v=>v.dirty&&v.touched)}static{this.\u0275fac=function(E){return new(E||S)(a.\u0275\u0275directiveInject(a.ElementRef))}}static{this.\u0275dir=a.\u0275\u0275defineDirective({type:S,selectors:[["",8,"form-group"]],contentQueries:function(E,C,d){if(1&E&&a.\u0275\u0275contentQuery(d,l.FormControlName,4),2&E){let u;a.\u0275\u0275queryRefresh(u=a.\u0275\u0275loadQuery())&&(C.formControlNames=u)}},hostVars:4,hostBindings:function(E,C){2&E&&a.\u0275\u0275classProp("has-error",C.hasErrors)("has-success",C.hasSuccess)},inputs:{validationDisabled:"validationDisabled"}})}}return S})()},37966:(q,y,s)=>{s.d(y,{E:()=>R});var a=s(87536),l=s(53648);let R=(()=>{class S{constructor(){this.validSubmit=new a.EventEmitter}onSubmit(){this.markAsTouchedAndDirty(this.formGroup),this.formGroup.valid&&this.validSubmit.emit(this.formGroup.value)}markAsTouchedAndDirty(v){v instanceof l.UntypedFormGroup?Object.keys(v.controls).forEach(E=>this.markAsTouchedAndDirty(v.controls[E])):v instanceof l.UntypedFormArray?v.controls.forEach(E=>this.markAsTouchedAndDirty(E)):v instanceof l.UntypedFormControl&&v.enabled&&(v.markAsDirty(),v.markAsTouched(),v.updateValueAndValidity())}static{this.\u0275fac=function(E){return new(E||S)}}static{this.\u0275dir=a.\u0275\u0275defineDirective({type:S,selectors:[["","formGroup",""]],hostBindings:function(E,C){1&E&&a.\u0275\u0275listener("submit",function(){return C.onSubmit()})},inputs:{formGroup:"formGroup"},outputs:{validSubmit:"validSubmit"}})}}return S})()},2087:(q,y,s)=>{s.d(y,{O:()=>l});var a=s(87536);let l=(()=>{class h{constructor(S,m){this.elementRef=S,this.renderer=m}ngAfterViewInit(){if(!this.label||this.skeleton)return;const S=this.elementRef.nativeElement.querySelector(".cds--label");S&&this.renderer.setProperty(S,"textContent",`${this.label} (optional)`)}static{this.\u0275fac=function(m){return new(m||h)(a.\u0275\u0275directiveInject(a.ElementRef),a.\u0275\u0275directiveInject(a.Renderer2))}}static{this.\u0275dir=a.\u0275\u0275defineDirective({type:h,selectors:[["","cdOptionalField",""]],inputs:{label:[0,"cdOptionalField","label"],skeleton:"skeleton"}})}}return h})()},12302:(q,y,s)=>{s.d(y,{h:()=>l});var a=s(87536);let l=(()=>{class h{constructor(S,m){this.elementRef=S,this.renderer=m}ngOnInit(){this.renderer.setAttribute(this.elementRef.nativeElement,"tabindex","-1"),this.iElement=this.renderer.createElement("i"),this.renderer.addClass(this.iElement,"fa"),this.renderer.appendChild(this.elementRef.nativeElement,this.iElement),this.update()}getInputElement(){return document.getElementById(this.cdPasswordButton)}update(){const S=this.getInputElement();S&&"text"===S.type?(this.renderer.removeClass(this.iElement,"fa-eye"),this.renderer.addClass(this.iElement,"fa-eye-slash")):(this.renderer.removeClass(this.iElement,"fa-eye-slash"),this.renderer.addClass(this.iElement,"fa-eye"))}onClick(){const S=this.getInputElement();S.type="password"===S.type?"text":"password",this.update()}static{this.\u0275fac=function(m){return new(m||h)(a.\u0275\u0275directiveInject(a.ElementRef),a.\u0275\u0275directiveInject(a.Renderer2))}}static{this.\u0275dir=a.\u0275\u0275defineDirective({type:h,selectors:[["","cdPasswordButton",""]],hostBindings:function(m,v){1&m&&a.\u0275\u0275listener("click",function(){return v.onClick()})},inputs:{cdPasswordButton:"cdPasswordButton"}})}}return h})()},51862:(q,y,s)=>{s.d(y,{P:()=>l});var a=s(87536);let l=(()=>{class h{constructor(S,m){this.elementRef=S,this.renderer=m}ngAfterViewInit(){if(!this.label||this.skeleton)return;const S=this.elementRef.nativeElement.querySelector(".cds--label");S&&this.renderer.setProperty(S,"textContent",`${this.label} (required)`)}static{this.\u0275fac=function(m){return new(m||h)(a.\u0275\u0275directiveInject(a.ElementRef),a.\u0275\u0275directiveInject(a.Renderer2))}}static{this.\u0275dir=a.\u0275\u0275defineDirective({type:h,selectors:[["","cdRequiredField",""]],inputs:{label:[0,"cdRequiredField","label"],skeleton:"skeleton"}})}}return h})()},62988:(q,y,s)=>{s.d(y,{B:()=>R});var a=s(77317),l=s(87536);let R=(()=>{class S{constructor(v){this.nav=v,this.cdStatefulTabDefault="",this.localStorage=window.localStorage}ngOnInit(){const v=this.cdStatefulTabDefault||this.localStorage.getItem(`tabset_${this.cdStatefulTab}`);v&&this.nav.select(v)}onNavChange(v){this.cdStatefulTab&&v.nextId&&this.localStorage.setItem(`tabset_${this.cdStatefulTab}`,v.nextId)}static{this.\u0275fac=function(E){return new(E||S)(l.\u0275\u0275directiveInject(a.NgbNav,9))}}static{this.\u0275dir=l.\u0275\u0275defineDirective({type:S,selectors:[["","cdStatefulTab",""]],hostBindings:function(E,C){1&E&&l.\u0275\u0275listener("navChange",function(u){return C.onNavChange(u)})},inputs:{cdStatefulTab:"cdStatefulTab",cdStatefulTabDefault:"cdStatefulTabDefault"}})}}return S})()},70946:(q,y,s)=>{s.d(y,{c:()=>m});var a=s(53648),l=s(29841),h=s.n(l),R=s(87536);let m=(()=>{class v{constructor(C){this.ngControl=C}onInput(C){this.setValue(C)}setValue(C){C=h().isString(C)?C.trim():C,this.ngControl.control.setValue(C)}static{this.\u0275fac=function(d){return new(d||v)(R.\u0275\u0275directiveInject(a.NgControl))}}static{this.\u0275dir=R.\u0275\u0275defineDirective({type:v,selectors:[["","cdTrim",""]],hostBindings:function(d,u){1&d&&R.\u0275\u0275listener("input",function(M){return u.onInput(M.target.value)})}})}}return v})()},67120:(q,y,s)=>{s.d(y,{v:()=>a});var a=function(e){return e.asc="asc",e.desc="desc",e}(a||{})},2148:(q,y,s)=>{s.d(y,{x:()=>a});var a=function(e){return e.bold="bold",e.sparkline="sparkline",e.perSecond="perSecond",e.checkIcon="checkIcon",e.routerLink="routerLink",e.executing="executing",e.classAdding="classAdding",e.badge="badge",e.map="map",e.truncate="truncate",e.timeAgo="timeAgo",e.path="path",e.tooltip="tooltip",e.copy="copy",e}(a||{})},67344:(q,y,s)=>{s.d(y,{Ri:()=>R,dR:()=>a,sj:()=>h,td:()=>S,xg:()=>l,xm:()=>e});var a=function(m){return m.USEDCAPACITY="ceph_cluster_total_used_bytes",m.WRITEIOPS="sum(rate(ceph_pool_wr[1m]))",m.READIOPS="sum(rate(ceph_pool_rd[1m]))",m.READLATENCY="avg_over_time(ceph_osd_apply_latency_ms[1m])",m.WRITELATENCY="avg_over_time(ceph_osd_commit_latency_ms[1m])",m.READCLIENTTHROUGHPUT="sum(rate(ceph_pool_rd_bytes[1m]))",m.WRITECLIENTTHROUGHPUT="sum(rate(ceph_pool_wr_bytes[1m]))",m.RECOVERYBYTES="sum(rate(ceph_osd_recovery_bytes[1m]))",m}(a||{}),e=function(m){return m.OSD_NEARFULL="ceph_osd_nearfull_ratio",m.OSD_FULL="ceph_osd_full_ratio",m}(e||{}),l=function(m){return m.RGW_REQUEST_PER_SECOND="sum(rate(ceph_rgw_req[1m]))",m.AVG_GET_LATENCY="(sum(rate(ceph_rgw_op_get_obj_lat_sum[1m])) / sum(rate(ceph_rgw_op_get_obj_lat_count[1m]))) * 1000",m.AVG_PUT_LATENCY="(sum(rate(ceph_rgw_op_put_obj_lat_sum[1m])) / sum(rate(ceph_rgw_op_put_obj_lat_count[1m]))) * 1000",m.GET_BANDWIDTH="sum(rate(ceph_rgw_op_get_obj_bytes[1m]))",m.PUT_BANDWIDTH="sum(rate(ceph_rgw_op_put_obj_bytes[1m]))",m}(l||{}),h=function(m){return m.ALERTS_COUNT='count(ALERTS{alertstate="firing"}) or vector(0)',m.CLUSTER_COUNT="count(ceph_health_status) or vector(0)",m.HEALTH_OK_COUNT="count(ceph_health_status==0) or vector(0)",m.HEALTH_WARNING_COUNT="count(ceph_health_status==1) or vector(0)",m.HEALTH_ERROR_COUNT="count(ceph_health_status==2) or vector(0)",m.TOTAL_CLUSTERS_CAPACITY="sum(ceph_cluster_total_bytes) or vector(0)",m.TOTAL_USED_CAPACITY="sum(ceph_cluster_by_class_total_used_bytes) or vector(0)",m.HEALTH_STATUS="ceph_health_status",m.MGR_METADATA="ceph_mgr_metadata",m.TOTAL_CAPACITY="ceph_cluster_total_bytes",m.USED_CAPACITY="ceph_cluster_total_used_bytes",m.POOLS="count by (cluster) (ceph_pool_metadata) or vector(0)",m.OSDS="count by (cluster) (ceph_osd_metadata) or vector(0)",m.CRITICAL_ALERTS_COUNT='count(ALERTS{alertstate="firing",severity="critical"}) or vector(0)',m.WARNING_ALERTS_COUNT='count(ALERTS{alertstate="firing",severity="warning"}) or vector(0)',m.ALERTS='ALERTS{alertstate="firing"}',m.HOSTS="sum by (hostname, cluster) (group by (hostname, cluster) (ceph_osd_metadata)) or vector(0)",m.TOTAL_HOSTS="count by (cluster) (ceph_osd_metadata) or vector(0)",m.CLUSTER_ALERTS='count by (cluster) (ALERTS{alertstate="firing"}) or vector(0)',m.FEDERATE_UP_METRIC="up",m}(h||{}),R=function(m){return m.CLUSTER_CAPACITY_UTILIZATION="topk(5, ceph_cluster_total_used_bytes)",m.CLUSTER_IOPS_UTILIZATION="topk(5, sum by (cluster) (rate(ceph_pool_wr[1m])) + sum by (cluster) (rate(ceph_pool_rd[1m])) )",m.CLUSTER_THROUGHPUT_UTILIZATION="topk(5, sum by (cluster) (rate(ceph_pool_wr_bytes[1m])) + sum by (cluster) (rate(ceph_pool_rd_bytes[1m])) )",m}(R||{}),S=function(m){return m.POOL_CAPACITY_UTILIZATION="topk(5, ceph_pool_bytes_used/ceph_pool_max_avail * on(pool_id, cluster) group_left(instance, name) ceph_pool_metadata)",m.POOL_IOPS_UTILIZATION="topk(5, (rate(ceph_pool_rd[1m]) + rate(ceph_pool_wr[1m])) * on(pool_id, cluster) group_left(instance, name) ceph_pool_metadata )",m.POOL_THROUGHPUT_UTILIZATION="topk(5, (irate(ceph_pool_rd_bytes[1m]) + irate(ceph_pool_wr_bytes[1m])) * on(pool_id, cluster) group_left(instance, name) ceph_pool_metadata )",m}(S||{})},22453:(q,y,s)=>{s.d(y,{r:()=>a});var a=function(e){return e.medium="medium",e.high="high",e}(a||{})},62739:(q,y,s)=>{s.d(y,{L:()=>e,m:()=>a});var a=function(l){return l.HEALTH_ERR="fa fa-exclamation-circle",l.HEALTH_WARN="fa fa-exclamation-triangle",l.HEALTH_OK="fa fa-check-circle",l}(a||{}),e=function(l){return l.critical="danger",l.warning="warning",l.info="info",l}(e||{})},46045:(q,y,s)=>{s.d(y,{FI:()=>a,lK:()=>e});var a=function(h){return h.add="add",h.addCircle="add--filled",h.minusCircle="subtract--alt",h.edit="edit",h.destroy="close",h.exchange="arrows--horizontal",h.copy="copy",h.clipboard="copy--file",h.flatten="unlink",h.trash="trash-can",h.lock="locked",h.unlock="unlocked",h.clone="fa fa-clone",h.undo="fa fa-undo",h.search="search",h.start="fa fa-play",h.stop="fa fa-stop",h.analyse="fa fa-stethoscope",h.deepCheck="settings",h.cogs="fa fa-cogs",h.reweight="scales",h.up="arrow--up",h.left="arrow--left",h.right="arrow--right",h.down="arrow--down",h.erase="fa fa-eraser",h.expand="maximize",h.user="user",h.users="user--multiple",h.share="share",h.key="password",h.warning="warning--alt--filled",h.info="information",h.infoCircle="information--filled",h.questionCircle="help",h.danger="warning--filled",h.success="checkmark--filled",h.check="checkmark",h.show="view",h.paragraph="fa fa-paragraph",h.terminal="fa fa-terminal",h.magic="fa fa-magic",h.hourglass="fa fa-hourglass-o",h.filledHourglass="fa fa-hourglass",h.table="fa fa-table",h.spinner="fa fa-spinner",h.refresh="renew",h.bullseye="fa fa-bullseye",h.disk="fa fa-hdd-o",h.server="fa fa-server",h.filter="filter",h.lineChart="analytics",h.signOut="fa fa-sign-out",h.circle="dot-mark",h.bell="notification",h.mute="notification--off",h.leftArrow="caret--left",h.rightArrow="caret--right",h.downArrow="caret--down",h.flag="fa fa-flag",h.clearFilters="close--filled",h.download="download",h.upload="fa fa-upload",h.code="code",h.document="document",h.wrench="tools",h.enter="fa fa-sign-in",h.exit="fa fa-sign-out",h.restart="fa fa-history",h.deploy="cube",h.cubes="fa fa-cubes",h.sitemap="fa fa-sitemap",h.database="fa fa-database",h.bars="fa fa-bars",h.navicon="fa fa-navicon",h.areaChart="fa fa-area-chart",h.eye="fa fa-eye",h.calendar="fa fa-calendar",h.externalUrl="fa fa-external-link",h.nfsExport="fa fa-server",h.launch="launch",h.parentChild="parent-child",h.dataTable="data-table",h.idea="idea",h.userAccessLocked="user--access-locked",h.size16="16",h.size20="20",h.size24="24",h.size32="32",h.large="fa fa-lg",h.large2x="fa fa-2x",h.large3x="fa fa-3x",h.stack="fa fa-stack",h.stack1x="fa fa-stack-1x",h.stack2x="fa fa-stack-2x",h.pulse="fa fa-pulse",h.spin="fa fa-spin",h.inverse="fa fa-inverse",h}(a||{}),e=function(h){return h.size16="16",h.size20="20",h.size24="24",h.size32="32",h}(e||{})},88285:(q,y,s)=>{s.d(y,{_:()=>a});var a=function(e){return e[e.error=0]="error",e[e.info=1]="info",e[e.success=2]="success",e}(a||{})},29130:(q,y,s)=>{s.d(y,{k:()=>a});var a=function(e){return e[e.ValueOk=0]="ValueOk",e[e.ValueStale=1]="ValueStale",e[e.ValueNone=2]="ValueNone",e[e.ValueException=3]="ValueException",e}(a||{})},43808:(q,y,s)=>{s.d(y,{$:()=>S});var a=s(53648),l=s(58384),h=s(87536);let S=(()=>{class m extends a.UntypedFormBuilder{group(E,C=null){const d=super.group(E,C);return new l.$(d.controls,d.validator,d.asyncValidator)}static{this.\u0275fac=(()=>{let E;return function(d){return(E||(E=h.\u0275\u0275getInheritedFactory(m)))(d||m)}})()}static{this.\u0275prov=h.\u0275\u0275defineInjectable({token:m,factory:m.\u0275fac,providedIn:"root"})}}return m})()},58384:(q,y,s)=>{s.d(y,{$:()=>l});var a=s(53648);class l extends a.UntypedFormGroup{constructor(R,S,m){super(R,S,m),this.controls=R}get(R){const S=this._get(R);if(!S)throw new Error(`Control '${R}' could not be found!`);return S}_get(R){return super.get(R)||Object.values(this.controls).filter(S=>S.get).map(S=>S instanceof l?S._get(R):S.get(R)).find(S=>!!S)}getValue(R){return this.get(R).value}silentSet(R,S){this.get(R).setValue(S,{emitEvent:!1})}showError(R,S,m){const v=this.get(R);return(S?.submitted||v.dirty)&&(m?v.hasError(m):v.invalid)}}},74902:(q,y,s)=>{s.d(y,{g:()=>h,r:()=>l});var a=s(3600),l=function(R){return R[R.Loading=0]="Loading",R[R.Ready=1]="Ready",R[R.Error=2]="Error",R[R.None=3]="None",R}(l||{});class h extends a.BaseModal{constructor(){super(),this.loading=l.Loading}loadingStart(){this.loading=l.Loading}loadingReady(){this.loading=l.Ready}loadingError(){this.loading=l.Error}loadingNone(){this.loading=l.None}}},3687:(q,y,s)=>{s.d(y,{xF:()=>N,xQ:()=>I});var a=s(53648),l=s(29841),h=s.n(l),R=s(95631),m=s(50619),E=s(73651),C=s(12540),d=s(50390),u=s.n(d);function N(O){return null==O||0===O.length}class I{static email(f){return N(f.value)?null:a.Validators.email(f)}static ip(f=0){const g=/^((25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\.){3}(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)$/i,P=/^(?:[a-f0-9]{1,4}:){7}[a-f0-9]{1,4}$/i;return a.Validators.pattern(4===f?g:6===f?P:new RegExp(g.source+"|"+P.source))}static number(f=!0){return a.Validators.pattern(f?/^-?[0-9]+$/i:/^[0-9]+$/i)}static decimalNumber(f=!0){return a.Validators.pattern(f?/^-?[0-9]+(.[0-9]+)?$/i:/^[0-9]+(.[0-9]+)?$/i)}static sslCert(){return a.Validators.pattern(/^-----BEGIN CERTIFICATE-----(\n|\r|\f)((.+)?((\n|\r|\f).+)*)(\n|\r|\f)-----END CERTIFICATE-----[\n\r\f]*$/)}static sslPrivKey(){return a.Validators.pattern(/^-----BEGIN RSA PRIVATE KEY-----(\n|\r|\f)((.+)?((\n|\r|\f).+)*)(\n|\r|\f)-----END RSA PRIVATE KEY-----[\n\r\f]*$/)}static pemCert(){return a.Validators.pattern(/^-----BEGIN .+-----$.+^-----END .+-----$/ms)}static requiredIf(f,g){let P=!1;return A=>(!P&&A.parent&&(Object.keys(f).forEach(B=>{A.parent.get(B).valueChanges.subscribe(()=>{A.updateValueAndValidity({emitEvent:!1})})}),P=!0),Object.keys(f).every(B=>{if(!A.parent)return!1;const w=A.parent.get(B).value,ie=f[B];if(h().isObjectLike(ie)){let Y=!1;switch(ie.op){case"empty":Y=h().isEmpty(w);break;case"!empty":Y=!h().isEmpty(w);break;case"equal":Y=w===ie.arg1;break;case"!equal":Y=w!==ie.arg1;break;case"minLength":h().isString(w)&&(Y=w.length>=ie.arg1);break;case"minValue":h().isNumber(w)&&(Y=w>=ie.arg1)}return Y}return w===ie})&&(h().isFunction(g)?g.call(g,A.value):N(A.value))?{required:!0}:null)}static composeIf(f,g){let P=!1;return A=>(!P&&A.parent&&(Object.keys(f).forEach(_=>{A.parent.get(_).valueChanges.subscribe(()=>{A.updateValueAndValidity({emitEvent:!1})})}),P=!0),Object.keys(f).every(_=>A.parent&&A.parent.get(_).value===f[_])?a.Validators.compose(g)(A):null)}static custom(f,g){return P=>{const A=g.call(this,P.value);return A?{[f]:A}:null}}static validateIf(f,g,P,A=[],_=[]){P=P.concat(A),f.setValidators(B=>g.call(this)?a.Validators.compose(P)(B):A.length>0?a.Validators.compose(A)(B):null),_.forEach(B=>{B.valueChanges.subscribe(()=>{f.updateValueAndValidity({emitEvent:!1})})})}static match(f,g){return P=>{const A=P.get(f),_=P.get(g);if(!A||!_)return null;if(A.value!==_.value)_.setErrors({match:!0});else if(_.hasError("match")){const w=_.errors;h().unset(w,"match"),_.setErrors(h().isEmpty(h().keys(w))?null:w)}return null}}static unique(f,g=null,P,A=!1,..._){let B;return w=>w.pristine||N(w.value)?(0,R.of)(null):(B=w.value,h().isFunction(P)&&null!==P()&&""!==P()&&(B=A?`${w.value}$${P()}`:`${P()}$${w.value}`),(0,R.timer)(500).pipe((0,m.switchMapTo)(f.call(g,B,..._)),(0,m.map)(ie=>ie?{notUnique:!0}:null),(0,m.take)(1)))}static uuid(f=!1){const g=/^[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}$/i;return P=>P.pristine&&P.untouched||!f&&!P.value||g.test(P.value)?null:{invalidUuid:"This is not a valid UUID"}}static binaryMin(f){return g=>{const P=new C.k,A=(new C.k).toBytes(g.value);if(f<=A)return null;const _=new E.l(P).transform(f);return{binaryMin:()=>$localize`Size has to be at least ${_} or more`}}}static binaryMax(f){return g=>{const P=new C.k,A=P.toBytes(g.value);if(f>=A)return null;const _=new E.l(P).transform(f);return{binaryMax:()=>$localize`Size has to be at most ${_} or less`}}}static passwordPolicy(f,g,P){return A=>{if(A.pristine||""===A.value)return h().isFunction(P)&&P(!0,0),(0,R.of)(null);let _;return h().isFunction(g)&&(_=g()),(0,R.timer)(500).pipe((0,m.switchMapTo)(h().invoke(f,"validatePassword",A.value,_)),(0,m.map)(B=>(h().isFunction(P)&&P(B.valid,B.credits,B.valuation),B.valid?null:{passwordPolicy:!0})),(0,m.take)(1))}}static bucketName(){return f=>{if(f.pristine||!f.value)return(0,R.of)({required:!0});const g=[];let P;return g.push(()=>{const B=f.value;let w=!0;return(/^((25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\.){3}(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)$/i.test(B)||/^(?:[a-f0-9]{1,4}:){7}[a-f0-9]{1,4}$/i.test(B))&&(P="ipAddress",w=!1),w}),g.push(A=>h().inRange(A.length,3,64)?!!/^[0-9a-z.-]+$/.test(f.value)||(P="bucketNameInvalid",!1):(P="shouldBeInRange",!1)),g.push(A=>{const _=h().split(A,".");return h().every(_,B=>B!==h().toLower(B)||B.includes("_")?(P="containsUpperCase",!1):/^[0-9a-z-]+$/.test(B)?h().every([0,B.length-1],w=>(P="lowerCaseOrNumber",/[a-z]/.test(B[w])||h().isInteger(h().parseInt(B[w])))):(P="onlyLowerCaseAndNumbers",!1))}),h().every(g,A=>A(f.value))?(0,R.of)(null):(0,R.of)((()=>{switch(P){case"onlyLowerCaseAndNumbers":return{onlyLowerCaseAndNumbers:!0};case"shouldBeInRange":return{shouldBeInRange:!0};case"ipAddress":return{ipAddress:!0};case"containsUpperCase":return{containsUpperCase:!0};case"lowerCaseOrNumber":return{lowerCaseOrNumber:!0};default:return{bucketNameInvalid:!0}}})())}}static bucketExistence(f,g){return P=>P.pristine||!P.value?(0,R.of)({required:!0}):(0,R.timer)(500).pipe((0,m.switchMapTo)(g.exists(P.value)),(0,m.map)(A=>A===f?null:{bucketNameNotAllowed:!0}))}static json(){return f=>{if(!f.value)return null;try{return JSON.parse(f.value),null}catch{return{invalidJson:!0}}}}static xml(){return f=>f.value&&(new DOMParser).parseFromString(f.value,"application/xml").querySelector("parsererror")?{invalidXml:!0}:null}static jsonOrXml(){return f=>{if(!f.value)return null;if(f.value.trim().startsWith("<"))return(new DOMParser).parseFromString(f.value,"application/xml").querySelector("parsererror")?{invalidXml:!0}:null;try{return JSON.parse(f.value),null}catch{return{invalidJson:!0}}}}static oauthAddressTest(){const f=/^((\d{1,3}\.){3}\d{1,3}|([a-zA-Z0-9-_]+\.)*[a-zA-Z0-9-_]+)/;return g=>{if(!g.value)return null;if(!g.value.includes(":"))return{invalidAddress:!0};const[P,A]=g.value.split(":"),_=f.test(P),B=Number(A)>=0&&Number(A)<=65535;return{invalidAddress:!(_&&B)}}}static url(f){const g=f.value;return h().isEmpty(g)?null:(g.includes(",")?g.split(","):[g]).filter(_=>!u().isURL(_,{require_protocol:!0,allow_underscores:!0,require_tld:!1})&&!u().isIP(_)).length>0?{invalidURL:!0}:null}}},9300:(q,y,s)=>{s.d(y,{u:()=>w});var a=s(73308),e=s(76218),h=s(2155),R=s(50813),S=s(85481),m=s(91974),E=s(53648),d=s(50619),N=s(29841),M=s.n(N),I=s(87536),f=s(59781),g=s(45451);const A=ie=>({formState:ie});function _(ie,Y){if(1&ie){const V=I.\u0275\u0275getCurrentView();I.\u0275\u0275elementStart(0,"form",6),I.\u0275\u0275listener("ngSubmit",function(){I.\u0275\u0275restoreView(V);const Q=I.\u0275\u0275nextContext().ngIf,me=I.\u0275\u0275nextContext();return I.\u0275\u0275resetView(me.submit(me.model,Q.taskInfo))}),I.\u0275\u0275elementStart(1,"div",7),I.\u0275\u0275element(2,"formly-form",8),I.\u0275\u0275elementEnd(),I.\u0275\u0275elementStart(3,"div",9)(4,"cd-form-button-panel",10),I.\u0275\u0275listener("submitActionEvent",function(){I.\u0275\u0275restoreView(V);const Q=I.\u0275\u0275nextContext().ngIf,me=I.\u0275\u0275nextContext();return I.\u0275\u0275resetView(me.submit(me.model,Q.taskInfo))}),I.\u0275\u0275elementEnd()()()}if(2&ie){const V=I.\u0275\u0275nextContext().ngIf,L=I.\u0275\u0275nextContext();I.\u0275\u0275property("formGroup",L.form),I.\u0275\u0275advance(2),I.\u0275\u0275property("form",L.form)("fields",V.controlSchema)("model",L.model)("options",I.\u0275\u0275pureFunction1(8,A,V.uiSchema)),I.\u0275\u0275advance(2),I.\u0275\u0275property("form",L.formDir)("submitText",V.title)("disabled",!L.form.valid)}}function B(ie,Y){if(1&ie&&(I.\u0275\u0275elementStart(0,"div",3)(1,"div",4),I.\u0275\u0275i18n(2,0),I.\u0275\u0275elementEnd(),I.\u0275\u0275template(3,_,5,10,"form",5),I.\u0275\u0275elementEnd()),2&ie){const V=Y.ngIf;I.\u0275\u0275advance(2),I.\u0275\u0275i18nExp(V.title),I.\u0275\u0275i18nApply(2),I.\u0275\u0275advance(),I.\u0275\u0275property("ngIf",V.uiSchema)}}let w=(()=>{class ie{constructor(V,L,Q,me,Ie){this.dataGatewayService=V,this.activatedRoute=L,this.taskWrapper=Q,this.location=me,this.router=Ie,this.model={},this.task={message:"",id:""},this.form=new E.UntypedFormGroup({}),this.key=""}ngOnInit(){this.activatedRoute.queryParamMap.subscribe(V=>{this.formUISchema$=this.activatedRoute.data.pipe((0,d.mergeMap)(Q=>{this.resource=Q.resource||this.resource;const me="/"+this.activatedRoute.snapshot.url.join("/"),Ie=V.get("key")||"";return this.dataGatewayService.form(`ui-${this.resource}`,me,Ie)})),this.formUISchema$.subscribe(Q=>{this.methodType=Q.methodType,this.model=Q.model}),this.urlFormName=this.router.url.split("/").pop();const L=this.urlFormName.indexOf("?");L>0&&(this.urlFormName=this.urlFormName.substring(0,L))})}readFileAsText(V){return(0,a.A)(function*(){let L=new FileReader,Q="";return yield new Promise(me=>{L.onload=Ie=>{Q=L.result.toString(),me(!0)},L.readAsText(V)}),Q})()}preSubmit(V){var L=this;return(0,a.A)(function*(){for(const[Q,me]of Object.entries(V))if(me instanceof FileList){let Ie=me[0],He=yield L.readFileAsText(Ie);V[Q]=He}})()}submit(V,L){var Q=this;return(0,a.A)(function*(){if(V){let me={};M().forEach(L.metadataFields,Ie=>{me[Ie]=V[Ie]}),me.__message=L.message,yield Q.preSubmit(V),Q.taskWrapper.wrapTaskAroundCall({task:new S.O(`crud-component/${Q.urlFormName}`,me),call:Q.dataGatewayService.submit(Q.resource,V,Q.methodType)}).subscribe({complete:()=>{Q.location.back()}})}})()}static{this.\u0275fac=function(L){return new(L||ie)(I.\u0275\u0275directiveInject(h.w),I.\u0275\u0275directiveInject(e.ActivatedRoute),I.\u0275\u0275directiveInject(R.a),I.\u0275\u0275directiveInject(m.Location),I.\u0275\u0275directiveInject(e.Router))}}static{this.\u0275cmp=I.\u0275\u0275defineComponent({type:ie,selectors:[["cd-crud-form"]],decls:3,vars:3,consts:()=>{let V;return V=$localize`:form title␟45e4757488844a6001b4726cd59c8dc42387ae3e␟1086284591946142810:${"\ufffd0\ufffd"}:INTERPOLATION:`,[V,[1,"cd-col-form"],["class","card pb-0",4,"ngIf"],[1,"card","pb-0"],[1,"card-header"],[3,"formGroup","ngSubmit",4,"ngIf"],[3,"ngSubmit","formGroup"],[1,"card-body","position-relative"],[3,"form","fields","model","options"],[1,"card-footer"],["wrappingClass","text-right",3,"submitActionEvent","form","submitText","disabled"]]},template:function(L,Q){1&L&&(I.\u0275\u0275elementStart(0,"div",1),I.\u0275\u0275template(1,B,4,2,"div",2),I.\u0275\u0275pipe(2,"async"),I.\u0275\u0275elementEnd()),2&L&&(I.\u0275\u0275advance(),I.\u0275\u0275property("ngIf",I.\u0275\u0275pipeBind1(2,1,Q.formUISchema$)))},dependencies:[m.NgIf,E.\u0275NgNoValidate,E.NgControlStatusGroup,f.e,E.FormGroupDirective,g.FormlyForm,m.AsyncPipe],styles:["json-schema-form label.control-label.hidden{display:none}  json-schema-form .form-group.schema-form-submit p{display:none}  json-schema-form legend{font-weight:100!important}  json-schema-form .card-footer{border:1px solid rgba(0,0,0,.125);left:-1px;width:-webkit-fill-available;width:-moz-available}"]})}}return ie})()},8990:(q,y,s)=>{s.d(y,{o:()=>O});var a=s(45451),l=s(29841),R=s(46045),S=s(87536),v=s(91974);function C(f,g){if(1&f&&(S.\u0275\u0275elementStart(0,"legend",9),S.\u0275\u0275i18n(1,0),S.\u0275\u0275elementEnd()),2&f){const P=S.\u0275\u0275nextContext();S.\u0275\u0275advance(),S.\u0275\u0275i18nExp(P.props.label),S.\u0275\u0275i18nApply(1)}}function d(f,g){if(1&f&&(S.\u0275\u0275elementStart(0,"p"),S.\u0275\u0275i18n(1,1),S.\u0275\u0275elementEnd()),2&f){const P=S.\u0275\u0275nextContext();S.\u0275\u0275advance(),S.\u0275\u0275i18nExp(P.props.description),S.\u0275\u0275i18nApply(1)}}function u(f,g){if(1&f){const P=S.\u0275\u0275getCurrentView();S.\u0275\u0275elementStart(0,"button",13),S.\u0275\u0275listener("click",function(){S.\u0275\u0275restoreView(P);const _=S.\u0275\u0275nextContext().index,B=S.\u0275\u0275nextContext();return S.\u0275\u0275resetView(B.remove(_))}),S.\u0275\u0275element(1,"i",14),S.\u0275\u0275elementEnd()}if(2&f){const P=S.\u0275\u0275nextContext(2);S.\u0275\u0275advance(),S.\u0275\u0275property("ngClass",P.icons.trash)}}function N(f,g){if(1&f){const P=S.\u0275\u0275getCurrentView();S.\u0275\u0275elementStart(0,"div",10),S.\u0275\u0275element(1,"formly-field",11),S.\u0275\u0275elementStart(2,"div",12)(3,"button",13),S.\u0275\u0275listener("click",function(){S.\u0275\u0275restoreView(P);const _=S.\u0275\u0275nextContext();return S.\u0275\u0275resetView(_.addWrapper())}),S.\u0275\u0275element(4,"i",14),S.\u0275\u0275elementEnd(),S.\u0275\u0275template(5,u,2,1,"button",15),S.\u0275\u0275elementEnd()()}if(2&f){const P=g.$implicit,A=S.\u0275\u0275nextContext();S.\u0275\u0275advance(),S.\u0275\u0275property("field",P),S.\u0275\u0275advance(3),S.\u0275\u0275property("ngClass",A.icons.add),S.\u0275\u0275advance(),S.\u0275\u0275property("ngIf",!1!==P.props.removable)}}function M(f,g){if(1&f){const P=S.\u0275\u0275getCurrentView();S.\u0275\u0275elementStart(0,"div",16)(1,"button",17),S.\u0275\u0275listener("click",function(){S.\u0275\u0275restoreView(P);const _=S.\u0275\u0275nextContext();return S.\u0275\u0275resetView(_.addWrapper())}),S.\u0275\u0275i18nStart(2,2),S.\u0275\u0275element(3,"i",14),S.\u0275\u0275i18nEnd(),S.\u0275\u0275elementEnd()()}if(2&f){const P=S.\u0275\u0275nextContext();S.\u0275\u0275advance(3),S.\u0275\u0275property("ngClass",P.icons.add),S.\u0275\u0275i18nExp(P.props.label),S.\u0275\u0275i18nApply(2)}}function I(f,g){if(1&f&&(S.\u0275\u0275elementStart(0,"span",18),S.\u0275\u0275element(1,"formly-validation-message",19),S.\u0275\u0275elementEnd()),2&f){const P=S.\u0275\u0275nextContext();S.\u0275\u0275advance(),S.\u0275\u0275property("field",P.field)}}let O=(()=>{class f extends a.FieldArrayType{constructor(){super(...arguments),this.icons=R.FI}ngOnInit(){this.propagateTemplateOptions()}addWrapper(){this.add(),this.propagateTemplateOptions()}propagateTemplateOptions(){(0,l.forEach)(this.field.fieldGroup,P=>{"object"==P.type&&(P.props.templateOptions=this.props.templateOptions.objectTemplateOptions)})}static{this.\u0275fac=(()=>{let P;return function(_){return(P||(P=S.\u0275\u0275getInheritedFactory(f)))(_||f)}})()}static{this.\u0275cmp=S.\u0275\u0275defineComponent({type:f,selectors:[["cd-formly-array-type"]],features:[S.\u0275\u0275InheritDefinitionFeature],decls:6,vars:5,consts:()=>{let P,A,_;return P=$localize`:␟f124d8a600e88a7b9300bfdf66acc6fca16885b5␟4980505052150524488:${"\ufffd0\ufffd"}:INTERPOLATION:`,A=$localize`:␟fb297f5839ad020a53874818ccc997c86472b399␟4780807890552181554:${"\ufffd0\ufffd"}:INTERPOLATION:`,_=$localize`:␟ab0701b56284ec4615610273df41c5e48da7216e␟2168715863162585756:${"\ufffd#3\ufffd"}:START_ITALIC_TEXT:${"\ufffd/#3\ufffd"}:CLOSE_ITALIC_TEXT: Add ${"\ufffd0\ufffd"}:INTERPOLATION: `,[P,A,_,[1,"mb-3"],["class","cd-header mt-1",4,"ngIf"],[4,"ngIf"],["class","d-flex",4,"ngFor","ngForOf"],["class","text-right",4,"ngIf"],["class","invalid-feedback","role","alert",4,"ngIf"],[1,"cd-header","mt-1"],[1,"d-flex"],[1,"col",3,"field"],[1,"action-btn"],["type","button",1,"btn","btn-light","ms-1",3,"click"],[3,"ngClass"],["class","btn btn-light ms-1","type","button",3,"click",4,"ngIf"],[1,"text-right"],["type","button",1,"btn","btn-light",3,"click"],["role","alert",1,"invalid-feedback"],[3,"field"]]},template:function(A,_){1&A&&(S.\u0275\u0275elementStart(0,"div",3),S.\u0275\u0275template(1,C,2,1,"legend",4)(2,d,2,1,"p",5)(3,N,6,3,"div",6)(4,M,4,2,"div",7)(5,I,2,1,"span",8),S.\u0275\u0275elementEnd()),2&A&&(S.\u0275\u0275advance(),S.\u0275\u0275property("ngIf",_.props.label),S.\u0275\u0275advance(),S.\u0275\u0275property("ngIf",_.props.description),S.\u0275\u0275advance(),S.\u0275\u0275property("ngForOf",_.field.fieldGroup),S.\u0275\u0275advance(),S.\u0275\u0275property("ngIf",0===_.field.fieldGroup.length),S.\u0275\u0275advance(),S.\u0275\u0275property("ngIf",_.showError&&_.formControl.errors))},dependencies:[v.NgClass,v.NgForOf,v.NgIf,a.FormlyField,a.\u0275FormlyValidationMessage],styles:[".action-btn[_ngcontent-%COMP%]{margin-top:2.4rem}"]})}}return f})()},27202:(q,y,s)=>{s.d(y,{R:()=>m});var a=s(45451),l=s(87536),R=s(53648);let m=(()=>{class v extends a.FieldType{static{this.\u0275fac=(()=>{let C;return function(u){return(C||(C=l.\u0275\u0275getInheritedFactory(v)))(u||v)}})()}static{this.\u0275cmp=l.\u0275\u0275defineComponent({type:v,selectors:[["cd-formly-input-type"]],features:[l.\u0275\u0275InheritDefinitionFeature],decls:1,vars:2,consts:[[1,"form-control","col-form-input",3,"formControl","formlyAttributes"]],template:function(d,u){1&d&&l.\u0275\u0275element(0,"input",0),2&d&&l.\u0275\u0275property("formControl",u.formControl)("formlyAttributes",u.field)},dependencies:[R.DefaultValueAccessor,R.NgControlStatus,R.FormControlDirective,a.\u0275FormlyAttributes]})}}return v})()},90876:(q,y,s)=>{s.d(y,{G:()=>d});var a=s(45451),l=s(87536),R=s(91974);function m(u,N){if(1&u&&(l.\u0275\u0275elementStart(0,"legend",8),l.\u0275\u0275i18n(1,0),l.\u0275\u0275elementEnd()),2&u){const M=l.\u0275\u0275nextContext();l.\u0275\u0275advance(),l.\u0275\u0275i18nExp(M.props.label),l.\u0275\u0275i18nApply(1)}}function v(u,N){if(1&u&&(l.\u0275\u0275elementStart(0,"p"),l.\u0275\u0275i18n(1,1),l.\u0275\u0275elementEnd()),2&u){const M=l.\u0275\u0275nextContext();l.\u0275\u0275advance(),l.\u0275\u0275i18nExp(M.props.description),l.\u0275\u0275i18nApply(1)}}function E(u,N){if(1&u&&(l.\u0275\u0275elementStart(0,"div",9),l.\u0275\u0275element(1,"formly-validation-message",10),l.\u0275\u0275elementEnd()),2&u){const M=l.\u0275\u0275nextContext();l.\u0275\u0275advance(),l.\u0275\u0275property("field",M.field)}}function C(u,N){1&u&&l.\u0275\u0275element(0,"formly-field",11),2&u&&l.\u0275\u0275property("field",N.$implicit)}let d=(()=>{class u extends a.FieldType{get inputClass(){const M=this.props.templateOptions?.layoutType,I="d-flex justify-content-center align-content-stretch gap-3";return"row"==M?I+" flex-row":I+" flex-column"}static{this.\u0275fac=(()=>{let M;return function(O){return(M||(M=l.\u0275\u0275getInheritedFactory(u)))(O||u)}})()}static{this.\u0275cmp=l.\u0275\u0275defineComponent({type:u,selectors:[["cd-formly-object-type"]],features:[l.\u0275\u0275InheritDefinitionFeature],decls:6,vars:5,consts:()=>{let M,I;return M=$localize`:␟f124d8a600e88a7b9300bfdf66acc6fca16885b5␟4980505052150524488:${"\ufffd0\ufffd"}:INTERPOLATION:`,I=$localize`:␟fb297f5839ad020a53874818ccc997c86472b399␟4780807890552181554:${"\ufffd0\ufffd"}:INTERPOLATION:`,[M,I,[1,"mb-3"],["class","cd-col-form-label",4,"ngIf"],[4,"ngIf"],["class","alert alert-danger","role","alert",4,"ngIf"],[3,"ngClass"],["class","flex-grow-1",3,"field",4,"ngFor","ngForOf"],[1,"cd-col-form-label"],["role","alert",1,"alert","alert-danger"],[3,"field"],[1,"flex-grow-1",3,"field"]]},template:function(I,O){1&I&&(l.\u0275\u0275elementStart(0,"div",2),l.\u0275\u0275template(1,m,2,1,"legend",3)(2,v,2,1,"p",4)(3,E,2,1,"div",5),l.\u0275\u0275elementStart(4,"div",6),l.\u0275\u0275template(5,C,1,1,"formly-field",7),l.\u0275\u0275elementEnd()()),2&I&&(l.\u0275\u0275advance(),l.\u0275\u0275property("ngIf",O.props.label),l.\u0275\u0275advance(),l.\u0275\u0275property("ngIf",O.props.description),l.\u0275\u0275advance(),l.\u0275\u0275property("ngIf",O.showError&&O.formControl.errors),l.\u0275\u0275advance(),l.\u0275\u0275property("ngClass",O.inputClass),l.\u0275\u0275advance(),l.\u0275\u0275property("ngForOf",O.field.fieldGroup))},dependencies:[R.NgClass,R.NgForOf,R.NgIf,a.FormlyField,a.\u0275FormlyValidationMessage]})}}return u})()},59342:(q,y,s)=>{s.d(y,{y:()=>m,n:()=>v});var a=s(29841);function e(E){return new Promise((C,d)=>{E.value instanceof FileList&&(E.value[0].size>4096&&C({file_size:!0}),C(null)),C({not_a_file:!0})})}function l(E){return new Promise((C,d)=>{try{JSON.parse(E.value),C(null)}catch{C({json:!0})}})}function h(E){return new Promise((C,d)=>{E.value.match("^((/)|(/[!-~]+/))$")&&C(null),C({rgwRolePath:!0})})}function R(E){return new Promise((C,d)=>{E.value.match("^[0-9a-zA-Z_+=,.@-]+$")&&C(null),C({rgwRoleName:!0})})}function S(E){return new Promise((C,d)=>{E.value.match("^[0-9.]+$")&&E.value<=12&&E.value>=1&&C(null),C({rgwRoleSessionDuration:!0})})}function m(E,C=void 0){const d=C||E.options?.formState;return d?d.find(u=>u.key==E.key):{}}function v(E,C){const d=m(E,C);let u=[];(0,a.forEach)(d.validators,N=>{switch(N){case"json":u.push(l);break;case"rgwRoleName":u.push(R);break;case"rgwRolePath":u.push(h);break;case"file":u.push(e);break;case"rgwRoleSessionDuration":u.push(S)}}),E.asyncValidators={validation:u}}},84268:(q,y,s)=>{s.d(y,{p:()=>h,v:()=>l});var a=s(46045),e=s(88285);class l{constructor(S=e._.info,m,v,E,C="Ceph"){this.type=S,this.title=m,this.message=v,this.options=E,this.application=C,this.isFinishedTask=!1,this.classes={Ceph:"ceph-icon",Prometheus:"prometheus-icon"},this.applicationClass=this.classes[this.application]}}class h extends l{constructor(S=new l){super(S.type,S.title,S.message,S.options,S.application),this.config=S,this.alertSilenced=!1,this.textClasses=["text-danger","text-info","text-success"],this.iconClasses=[a.FI.warning,a.FI.info,a.FI.check],this.borderClasses=["border-danger","border-info","border-success"],delete this.config,this.timestamp=(new Date).toJSON(),this.iconClass=this.iconClasses[this.type],this.textClass=this.textClasses[this.type],this.borderClass=this.borderClasses[this.type],this.isFinishedTask=S.isFinishedTask}}},65784:(q,y,s)=>{s.d(y,{b:()=>a});class a{constructor(l){this.pwdExpirationSpan=0,this.pwdExpirationSpan=l.user_pwd_expiration_span,this.pwdExpirationWarning1=l.user_pwd_expiration_warning_1,this.pwdExpirationWarning2=l.user_pwd_expiration_warning_2}}},48856:(q,y,s)=>{s.d(y,{n:()=>h});var a=s(36618);class l{constructor(){this.offset=0,this.limit=10,this.pageSize=10}}class h{constructor(S){this.errorConfig={resetData:!0,displayError:!0},this.pageInfo=new l,this.search="",this.sort="+name",this.error=S}toParams(){return Number.isNaN(this.pageInfo.offset)&&(this.pageInfo.offset=0),null===this.pageInfo.limit&&(this.pageInfo.limit=0),this.search||(this.search=""),(!this.sort||this.sort.length<2)&&(this.sort="+name"),new a.HttpParams({fromObject:{offset:String(this.pageInfo.offset*this.pageInfo.limit),limit:String(this.pageInfo.limit),search:this.search,sort:this.sort}})}}},19380:(q,y,s)=>{s.d(y,{y:()=>a});class a{constructor(l){this._selected=[],l&&(this._selected=l),this.update()}update(){this.hasSelection=this._selected.length>0,this.hasSingleSelection=1===this._selected.length,this.hasMultiSelection=this._selected.length>1}set selected(l){this._selected=l,this.update()}get selected(){return this._selected}add(l){this._selected.push(l),this.update()}first(){return this.hasSelection?this._selected[0]:null}}},77847:(q,y,s)=>{s.d(y,{I:()=>a});class a{constructor(l,h,R,S){this.customColors={backgroundColor:void 0,borderColor:void 0},this.checkOffset=!1,this.chartEl=l.nativeElement,this.getStyleLeft=R,this.getStyleTop=S,this.tooltipEl=h.nativeElement}customTooltips(l){const h=l.tooltip;if(0===h.opacity)return void(this.tooltipEl.style.opacity=0);if(this.tooltipEl.classList.remove("above","below","no-transform"),this.tooltipEl.classList.add(h.yAlign?h.yAlign:"no-transform"),h.body){const m=h.title||[],v=h.body.map(d=>d.lines);let E="<thead>";m.forEach(d=>{E+="<tr><th>"+this.getTitle(d)+"</th></tr>"}),E+="</thead><tbody>",v.forEach((d,u)=>{const N=h.labelColors[u];let M="background:"+(this.customColors.backgroundColor||N.backgroundColor);M+="; border-color:"+(this.customColors.borderColor||N.borderColor),M+="; border-width: 2px",E+='<tr><td nowrap><span class="chartjs-tooltip-key" style="'+M+'"></span>'+this.getBody(d)+"</td></tr>"}),E+="</tbody>",this.tooltipEl.querySelector("table").innerHTML=E}const R=this.chartEl.offsetTop,S=this.chartEl.offsetLeft;if(this.checkOffset){const m=h.width/2;this.tooltipEl.classList.remove("transform-left"),this.tooltipEl.classList.remove("transform-right"),h.caretX-m<0?this.tooltipEl.classList.add("transform-left"):h.caretX+m>this.chartEl.width&&this.tooltipEl.classList.add("transform-right")}this.tooltipEl.style.left=this.getStyleLeft(h,S),this.tooltipEl.style.top=this.getStyleTop(h,R),this.tooltipEl.style.opacity=1,this.tooltipEl.style.fontFamily=h._fontFamily,this.tooltipEl.style.fontSize=h.fontSize,this.tooltipEl.style.fontStyle=h._fontStyle,this.tooltipEl.style.padding="6px 6px"}getBody(l){return l}getTitle(l){return l}}},6107:(q,y,s)=>{s.d(y,{M:()=>a,T:()=>e});var a=function(l){return l[l.global=0]="global",l[l.pool=1]="pool",l[l.image=2]="image",l}(a||{}),e=function(l){return l[l.bps=0]="bps",l[l.iops=1]="iops",l[l.milliseconds=2]="milliseconds",l}(e||{})},12959:(q,y,s)=>{s.d(y,{G:()=>e});var a=s(5772);class e extends a.Y{}},85481:(q,y,s)=>{s.d(y,{O:()=>e});var a=s(5772);class e extends a.Y{}},65218:(q,y,s)=>{s.d(y,{J:()=>a});class a{static fromString(l){const h=l.split("/");return new this(h[0],h.length>=3?h[1]:null,h.length>=3?h[2]:h[1])}constructor(l,h,R){this.poolName=l,this.namespace=h,this.imageName=R}getNameSpace(){return this.namespace?`${this.namespace}/`:""}toString(){return`${this.poolName}/${this.getNameSpace()}${this.imageName}`}toStringEncoded(){return encodeURIComponent(`${this.poolName}/${this.getNameSpace()}${this.imageName}`)}}},5772:(q,y,s)=>{s.d(y,{Y:()=>a});class a{constructor(l,h){this.name=l,this.metadata=h}}},88427:(q,y,s)=>{s.d(y,{S:()=>R});var a=s(29841),e=s.n(a),l=s(87536);let R=(()=>{class S{transform(v,E=!1){let C=v;return(!e().isArray(v)||e().isArray(v)&&E)&&(C=[v]),C}static{this.\u0275fac=function(E){return new(E||S)}}static{this.\u0275pipe=l.\u0275\u0275definePipe({name:"array",type:S,pure:!0})}}return S})()},91822:(q,y,s)=>{s.d(y,{s:()=>l});var a=s(87536);let l=(()=>{class h{transform(S,m=$localize`Yes`,v=$localize`No`){return S?m:v}static{this.\u0275fac=function(m){return new(m||h)}}static{this.\u0275pipe=a.\u0275\u0275definePipe({name:"booleanText",type:h,pure:!0})}}return h})()},1820:(q,y,s)=>{s.d(y,{F:()=>l});var a=s(87536);let l=(()=>{class h{transform(S){let m=!1;switch(S){case!0:case 1:case"y":case"yes":case"t":case"true":case"on":case"1":m=!0}return m}static{this.\u0275fac=function(m){return new(m||h)}}static{this.\u0275pipe=a.\u0275\u0275definePipe({name:"boolean",type:h,pure:!0})}}return h})()},71138:(q,y,s)=>{s.d(y,{Q:()=>m});var a=s(29841),e=s.n(a),l=s(89939),h=s.n(l),R=s(87536);let m=(()=>{class v{constructor(){}transform(C){if(null===C||""===C)return"";let d;const u=h()().utcOffset();return e().isNumber(C)?d=h().parseZone(h().unix(C)).utc().utcOffset(u).local().format("D/M/YY hh:mm A"):(C=C?.replace?.("Z",""),d=h().parseZone(C).utc().utcOffset(u).local().format("D/M/YY hh:mm A")),d}static{this.\u0275fac=function(d){return new(d||v)}}static{this.\u0275pipe=R.\u0275\u0275definePipe({name:"cdDate",type:v,pure:!0})}}return v})()},2464:(q,y,s)=>{s.d(y,{N:()=>l});var a=s(87536);let l=(()=>{class h{transform(S){const m=/ceph version\s+[^ ]+\s+\(.+\)\s+(.+)\s+\((.+)\)/.exec(S);return m?"dev"===m[2]?"main":m[1]:S}static{this.\u0275fac=function(m){return new(m||h)}}static{this.\u0275pipe=a.\u0275\u0275definePipe({name:"cephReleaseName",type:h,pure:!0})}}return h})()},16748:(q,y,s)=>{s.d(y,{Z:()=>l});var a=s(87536);let l=(()=>{class h{transform(S){const m=/ceph version\s+([^ ]+)\s+\(.+\)/.exec(S);return m?m[1]:S}static{this.\u0275fac=function(m){return new(m||h)}}static{this.\u0275pipe=a.\u0275\u0275definePipe({name:"cephShortVersion",type:h,pure:!0})}}return h})()},33488:(q,y,s)=>{s.d(y,{E:()=>h});var a=s(12540),e=s(87536);let h=(()=>{class R{constructor(m){this.formatter=m}transform(m,v=1){return this.formatter.format_number(m,1024,["B/m","KiB/m","MiB/m","GiB/m","TiB/m","PiB/m","EiB/m","ZiB/m","YiB/m"],v)}static{this.\u0275fac=function(v){return new(v||R)(e.\u0275\u0275directiveInject(a.k,16))}}static{this.\u0275pipe=e.\u0275\u0275definePipe({name:"dimlessBinaryPerMinute",type:R,pure:!0})}}return R})()},19116:(q,y,s)=>{s.d(y,{w:()=>h});var a=s(12540),e=s(87536);let h=(()=>{class R{constructor(m){this.formatter=m}transform(m,v=1){return this.formatter.format_number(m,1024,["B/s","KiB/s","MiB/s","GiB/s","TiB/s","PiB/s","EiB/s","ZiB/s","YiB/s"],v)}static{this.\u0275fac=function(v){return new(v||R)(e.\u0275\u0275directiveInject(a.k,16))}}static{this.\u0275pipe=e.\u0275\u0275definePipe({name:"dimlessBinaryPerSecond",type:R,pure:!0})}}return R})()},73651:(q,y,s)=>{s.d(y,{l:()=>h});var a=s(12540),e=s(87536);let h=(()=>{class R{constructor(m){this.formatter=m}transform(m,v=1){return this.formatter.format_number(m,1024,["B","KiB","MiB","GiB","TiB","PiB","EiB","ZiB","YiB"],v)}static{this.\u0275fac=function(v){return new(v||R)(e.\u0275\u0275directiveInject(a.k,16))}}static{this.\u0275pipe=e.\u0275\u0275definePipe({name:"dimlessBinary",type:R,pure:!0})}}return R})()},18457:(q,y,s)=>{s.d(y,{u:()=>h});var a=s(12540),e=s(87536);let h=(()=>{class R{constructor(m){this.formatter=m}transform(m,v=1){return this.formatter.format_number(m,1e3,["","k","M","G","T","P","E","Z","Y"],v)}static{this.\u0275fac=function(v){return new(v||R)(e.\u0275\u0275directiveInject(a.k,16))}}static{this.\u0275pipe=e.\u0275\u0275definePipe({name:"dimless",type:R,pure:!0})}}return R})()},64346:(q,y,s)=>{s.d(y,{b:()=>l});var a=s(87536);let l=(()=>{class h{transform(S){if(null===S||S<=0)return"";const m=[[`${Math.floor(S/31536e3)}`,"years"],[`${Math.floor(S%31536e3/86400)}`,"days"],[`${Math.floor(S%86400/3600)}`,"hours"],[`${Math.floor(S%3600/60)}`,"minutes"],[`${Math.floor(S%60)}`,"seconds"]];let v="";for(let E=0,C=m.length;E<C;E++)"0"!==m[E][0]&&(v+=" "+m[E][0]+" "+("1"===m[E][0]?m[E][1].substr(0,m[E][1].length-1):m[E][1]));return v.trim()||"1 second"}static{this.\u0275fac=function(m){return new(m||h)}}static{this.\u0275pipe=a.\u0275\u0275definePipe({name:"duration",type:h,pure:!1})}}return h})()},76139:(q,y,s)=>{s.d(y,{y:()=>R});var a=s(29841),e=s.n(a),l=s(87536);let R=(()=>{class S{transform(v){return e().isUndefined(v)||e().isNull(v)?"-":e().isNaN(v)?"N/A":v}static{this.\u0275fac=function(E){return new(E||S)}}static{this.\u0275pipe=l.\u0275\u0275definePipe({name:"empty",type:S,pure:!0})}}return S})()},57452:(q,y,s)=>{s.d(y,{w:()=>h});var a=s(62739),e=s(87536);let h=(()=>{class R{transform(m){return Object.keys(a.m).includes(m)?a.m[m]:""}static{this.\u0275fac=function(v){return new(v||R)}}static{this.\u0275pipe=e.\u0275\u0275definePipe({name:"healthIcon",type:R,pure:!0})}}return R})()},25081:(q,y,s)=>{s.d(y,{U:()=>l});var a=s(87536);let l=(()=>{class h{transform(S){return`${S} IOPS`}static{this.\u0275fac=function(m){return new(m||h)}}static{this.\u0275pipe=a.\u0275\u0275definePipe({name:"iops",type:h,pure:!0})}}return h})()},82680:(q,y,s)=>{s.d(y,{k:()=>l});var a=s(87536);let l=(()=>{class h{transform(S){return"user:rbd"===S?"user:rbd (tcmu-runner)":S}static{this.\u0275fac=function(m){return new(m||h)}}static{this.\u0275pipe=a.\u0275\u0275definePipe({name:"iscsiBackstore",type:h,pure:!0})}}return h})()},47782:(q,y,s)=>{s.d(y,{r:()=>l});var a=s(87536);let l=(()=>{class h{transform(S){return S.join(", ")}static{this.\u0275fac=function(m){return new(m||h)}}static{this.\u0275pipe=a.\u0275\u0275definePipe({name:"join",type:h,pure:!0})}}return h})()},71521:(q,y,s)=>{s.d(y,{H:()=>l});var a=s(87536);let l=(()=>{class h{transform(S){return"[DBG]"===S?"debug":"[INF]"===S?"info":"[WRN]"===S?"warn":"[ERR]"===S?"err":""}static{this.\u0275fac=function(m){return new(m||h)}}static{this.\u0275pipe=a.\u0275\u0275definePipe({name:"logPriority",type:h,pure:!0})}}return h})()},72358:(q,y,s)=>{s.d(y,{r:()=>R});var a=s(29841),e=s.n(a),l=s(87536);let R=(()=>{class S{transform(v,E){return e().isPlainObject(E)?e().get(E,v,v):v}static{this.\u0275fac=function(E){return new(E||S)}}static{this.\u0275pipe=l.\u0275\u0275definePipe({name:"map",type:S,pure:!0})}}return S})()},49658:(q,y,s)=>{s.d(y,{n:()=>l});var a=s(87536);let l=(()=>{class h{transform(S){return`${S} MB/s`}static{this.\u0275fac=function(m){return new(m||h)}}static{this.\u0275pipe=a.\u0275\u0275definePipe({name:"mbpersecond",type:h,pure:!0})}}return h})()},71721:(q,y,s)=>{s.d(y,{Z:()=>R});var a=s(29841),e=s.n(a),l=s(87536);let R=(()=>{class S{transform(v){if(!v)return null;let E=0,C=0,d=0,u=0,N=0;return e().each(v.standbys,()=>{d+=1}),v.standbys&&!v.filesystems?(C=d,E=0):0===v.filesystems.length?E=0:(e().each(v.filesystems,O=>{e().each(O.mdsmap.info,f=>{"up:standby-replay"===f.state?N+=1:u+=1})}),E=u,C=d+N),{success:E,info:C,total:E+C}}static{this.\u0275fac=function(E){return new(E||S)}}static{this.\u0275pipe=l.\u0275\u0275definePipe({name:"mdsSummary",type:S,pure:!0})}}return S})()},32357:(q,y,s)=>{s.d(y,{j:()=>R});var a=s(29841),e=s.n(a),l=s(87536);let R=(()=>{class S{transform(v){if(!v)return null;let E;(e().isUndefined(v.active_name)?"":`${$localize`active daemon`}: ${v.active_name}`).length>0&&(E=1);const d=v.standbys.length;return{success:E,info:d,total:E+d}}static{this.\u0275fac=function(E){return new(E||S)}}static{this.\u0275pipe=l.\u0275\u0275definePipe({name:"mgrSummary",type:S,pure:!0})}}return S})()},7752:(q,y,s)=>{s.d(y,{f:()=>l});var a=s(87536);let l=(()=>{class h{transform(S){return`${S} ms`}static{this.\u0275fac=function(m){return new(m||h)}}static{this.\u0275pipe=a.\u0275\u0275definePipe({name:"milliseconds",type:h,pure:!0})}}return h})()},91653:(q,y,s)=>{s.d(y,{z:()=>R});var a=s(29841),e=s.n(a),l=s(87536);let R=(()=>{class S{transform(v,E){return""===v?e().defaultTo(E,$localize`n/a`):v}static{this.\u0275fac=function(E){return new(E||S)}}static{this.\u0275pipe=l.\u0275\u0275definePipe({name:"notAvailable",type:S,pure:!0})}}return S})()},37006:(q,y,s)=>{s.d(y,{I:()=>l});var a=s(87536);let l=(()=>{class h{transform(S,m=!1){if(!S)return[];const v=[],E=["---","--x","-w-","-wx","r--","r-x","rw-","rwx"],d=S.toString(8).padStart(7,"0").split(""),u=this.getFileTypeSymbol(parseInt(d[1]+d[2])),N=E[parseInt(d[4])],M=E[parseInt(d[5])],I=E[parseInt(d[6])];return m?{owner:this.getItem(N),group:this.getItem(M),others:this.getItem(I)}:("directory"!==u&&v.push({content:u,class:"badge-primary me-1"}),"---"!==N&&v.push({content:`owner: ${N}`,class:"badge-primary me-1"}),"---"!==M&&v.push({content:`group: ${M}`,class:"badge-primary me-1"}),"---"!==I&&v.push({content:`others: ${I}`,class:"badge-primary me-1"}),0===v.length?[{content:"no permissions",class:"badge-warning me-1",toolTip:`owner: ${N}, group: ${M}, others: ${I}`}]:v)}getFileTypeSymbol(S){switch(S){case 1:return"fifo";case 2:return"character";case 4:return"directory";case 6:return"block";case 10:return"regular";case 12:return"symbolic-link";default:return"-"}}getItem(S){const m=[];return S.includes("r")&&m.push("read"),S.includes("w")&&m.push("write"),S.includes("x")&&m.push("execute"),m}static{this.\u0275fac=function(m){return new(m||h)}}static{this.\u0275pipe=a.\u0275\u0275definePipe({name:"octalToHumanReadable",type:h,pure:!0})}}return h})()},2475:(q,y,s)=>{s.d(y,{i:()=>l});var a=s(87536);let l=(()=>{class h{transform(S){const m=parseInt(S,10);return isNaN(m)?S:S+(1===Math.floor(m/10)?"th":m%10==1?"st":m%10==2?"nd":m%10==3?"rd":"th")}static{this.\u0275fac=function(m){return new(m||h)}}static{this.\u0275pipe=a.\u0275\u0275definePipe({name:"ordinal",type:h,pure:!0})}}return h})()},68945:(q,y,s)=>{s.d(y,{n:()=>R});var a=s(29841),e=s.n(a),l=s(87536);let R=(()=>{class S{transform(v){if(!v)return null;let E=0,C=0,d=0,u=0;return e().each(v.osds,O=>{O.in&&E++,O.up&&C++,O.state.includes("nearfull")&&d++,O.state.includes("full")&&u++}),{total:v.osds.length,down:v.osds.length-C,out:v.osds.length-E,up:C,in:E,nearfull:d,full:u}}static{this.\u0275fac=function(E){return new(E||S)}}static{this.\u0275pipe=l.\u0275\u0275definePipe({name:"osdSummary",type:S,pure:!0})}}return S})()},73231:(q,y,s)=>{s.d(y,{i:()=>l});var a=s(87536);let l=(()=>{class h{transform(S){if(!S)return"";const m=S.toString().split("/");return""===m[0]?(m.shift(),`/${m[0]}/.../${m[m.length-1]}`):`${m[0]}/.../${m[m.length-1]}`}static{this.\u0275fac=function(m){return new(m||h)}}static{this.\u0275pipe=a.\u0275\u0275definePipe({name:"path",type:h,pure:!0})}}return h})()},45757:(q,y,s)=>{s.d(y,{N:()=>l});var a=s(87536);let l=(()=>{class h{transform(S,m,v){return v?m.call(v,S):m(S)}static{this.\u0275fac=function(m){return new(m||h)}}static{this.\u0275pipe=a.\u0275\u0275definePipe({name:"pipeFunction",type:h,pure:!0})}}return h})()},13421:(q,y,s)=>{s.d(y,{Y:()=>te});var a=s(91974),e=s(88427),l=s(91822),h=s(1820),R=s(71138),S=s(2464),m=s(16748),v=s(19116),E=s(73651),C=s(18457),d=s(64346),u=s(76139),N=s(87536);let M=(()=>{class _e{transform(de){return encodeURIComponent(de)}static{this.\u0275fac=function(ue){return new(ue||_e)}}static{this.\u0275pipe=N.\u0275\u0275definePipe({name:"encodeUri",type:_e,pure:!0})}}return _e})();var I=s(57452),O=s(25081),f=s(82680),g=s(47782),P=s(71521),A=s(72358),_=s(71721),B=s(32357),w=s(7752),ie=s(91653),Y=s(2475),V=s(68945),L=s(39113),Q=s(56921),me=s(60980),Ie=s(37353),He=s(37006),Ae=s(49658),We=s(33488);let te=(()=>{class _e{static{this.\u0275fac=function(ue){return new(ue||_e)}}static{this.\u0275mod=N.\u0275\u0275defineNgModule({type:_e})}static{this.\u0275inj=N.\u0275\u0275defineInjector({providers:[e.S,h.F,l.s,a.DatePipe,m.Z,S.N,E.l,v.w,C.u,L.D,f.k,g.r,P.H,R.Q,u.y,M,Y.i,O.U,w.f,ie.z,Ie.r,d.b,A.r,me.H,Q.b,I.w,B.j,_.Z,V.n,He.I,Ae.n,We.E],imports:[a.CommonModule]})}}return _e})()},63284:(q,y,s)=>{s.d(y,{n:()=>l});var a=s(87536);let l=(()=>{class h{transform(S,m){return m<=1?S:S.endsWith("y")?S.slice(0,-1)+"ies":S+"s"}static{this.\u0275fac=function(m){return new(m||h)}}static{this.\u0275pipe=a.\u0275\u0275definePipe({name:"pluralize",type:h,pure:!0})}}return h})()},39113:(q,y,s)=>{s.d(y,{D:()=>m});var a=s(29841),e=s.n(a),l=s(89939),h=s.n(l),R=s(87536);h().updateLocale("en",{relativeTime:{future:$localize`in %s`,past:$localize`%s ago`,s:$localize`a few seconds`,ss:$localize`%d seconds`,m:$localize`a minute`,mm:$localize`%d minutes`,h:$localize`an hour`,hh:$localize`%d hours`,d:$localize`a day`,dd:$localize`%d days`,w:$localize`a week`,ww:$localize`%d weeks`,M:$localize`a month`,MM:$localize`%d months`,y:$localize`a year`,yy:$localize`%d years`}});let m=(()=>{class v{transform(C,d=!0){let u;const N=h()().utcOffset();if(u=e().isNumber(C)?h().parseZone(h().unix(C)).utc().utcOffset(N).local():h().parseZone(C).utc().utcOffset(N).local(),!u.isValid())return"";let M=u.fromNow();return d&&(M=e().upperFirst(M)),M}static{this.\u0275fac=function(d){return new(d||v)}}static{this.\u0275pipe=R.\u0275\u0275definePipe({name:"relativeDate",type:v,pure:!1})}}return v})()},56921:(q,y,s)=>{s.d(y,{b:()=>R});var a=s(87536),l=s(5559);let R=(()=>{class S{constructor(v){this.domSanitizer=v}transform(v){return this.domSanitizer.sanitize(a.SecurityContext.HTML,v)}static{this.\u0275fac=function(E){return new(E||S)(a.\u0275\u0275directiveInject(l.DomSanitizer,16))}}static{this.\u0275pipe=a.\u0275\u0275definePipe({name:"sanitizeHtml",type:S,pure:!0})}}return S})()},60980:(q,y,s)=>{s.d(y,{H:()=>R});var a=s(29841),e=s.n(a),l=s(87536);let R=(()=>{class S{transform(v,E,C){return e().isString(v)?(C=e().defaultTo(C,""),e().truncate(v,{length:E,omission:C})):v}static{this.\u0275fac=function(E){return new(E||S)}}static{this.\u0275pipe=l.\u0275\u0275definePipe({name:"truncate",type:S,pure:!0})}}return S})()},37353:(q,y,s)=>{s.d(y,{r:()=>R});var a=s(29841),e=s.n(a),l=s(87536);let R=(()=>{class S{transform(v){return e().upperFirst(v)}static{this.\u0275fac=function(E){return new(E||S)}}static{this.\u0275pipe=l.\u0275\u0275definePipe({name:"upperFirst",type:S,pure:!0})}}return S})()},72394:(q,y,s)=>{s.d(y,{g:()=>R});var a=s(95631),l=s(50619);function R(){const S=(0,a.fromEvent)(document,"visibilitychange").pipe((0,l.shareReplay)({refCount:!0,bufferSize:1})),[m,v]=(0,a.partition)(S,()=>"visible"===document.visibilityState);return function(E){return E.pipe((0,l.takeUntil)(v),(0,l.repeatWhen)(()=>m))}}},42676:(q,y,s)=>{s.d(y,{r:()=>S});var a=s(76218),l=s(82254),h=s(87536);let S=(()=>{class m{constructor(E,C){this.router=E,this.authStorageService=C}canActivate(E,C){return!!this.authStorageService.isLoggedIn()||(this.router.navigate(["/login"],{queryParams:{returnUrl:C.url}}),!1)}canActivateChild(E,C){return this.canActivate(E,C)}static{this.\u0275fac=function(C){return new(C||m)(h.\u0275\u0275inject(a.Router),h.\u0275\u0275inject(l.v))}}static{this.\u0275prov=h.\u0275\u0275defineInjectable({token:m,factory:m.\u0275fac,providedIn:"root"})}}return m})()},82254:(q,y,s)=>{s.d(y,{v:()=>R});var a=s(95631);class e{constructor(m=[]){["read","create","update","delete"].forEach(v=>this[v]=m.includes(v))}}class l{constructor(m){this.hosts=new e(m.hosts),this.configOpt=new e(m["config-opt"]),this.pool=new e(m.pool),this.osd=new e(m.osd),this.monitor=new e(m.monitor),this.rbdImage=new e(m["rbd-image"]),this.iscsi=new e(m.iscsi),this.nvmeof=new e(m["nvme-of"]),this.rbdMirroring=new e(m["rbd-mirroring"]),this.rgw=new e(m.rgw),this.cephfs=new e(m.cephfs),this.manager=new e(m.manager),this.log=new e(m.log),this.user=new e(m.user),this.grafana=new e(m.grafana),this.prometheus=new e(m.prometheus),this.nfs=new e(m["nfs-ganesha"]),this.smb=new e(m.smb)}}var h=s(87536);let R=(()=>{class S{constructor(){this.isPwdDisplayedSource=new a.BehaviorSubject(!1),this.isPwdDisplayed$=this.isPwdDisplayedSource.asObservable()}set(v,E={},C=!1,d=null,u=!1){localStorage.setItem("dashboard_username",v),localStorage.setItem("dashboard_permissions",JSON.stringify(new l(E))),localStorage.setItem("user_pwd_expiration_date",String(d)),localStorage.setItem("user_pwd_update_required",String(u)),localStorage.setItem("sso",String(C))}remove(){localStorage.removeItem("dashboard_username"),localStorage.removeItem("user_pwd_expiration_data"),localStorage.removeItem("user_pwd_update_required")}isLoggedIn(){return null!==localStorage.getItem("dashboard_username")}getUsername(){return localStorage.getItem("dashboard_username")}getPermissions(){return JSON.parse(localStorage.getItem("dashboard_permissions")||JSON.stringify(new l({})))}getPwdExpirationDate(){return Number(localStorage.getItem("user_pwd_expiration_date"))}getPwdUpdateRequired(){return"true"===localStorage.getItem("user_pwd_update_required")}isSSO(){return"true"===localStorage.getItem("sso")}static{this.\u0275fac=function(E){return new(E||S)}}static{this.\u0275prov=h.\u0275\u0275defineInjectable({token:S,factory:S.\u0275fac,providedIn:"root"})}}return S})()},54980:(q,y,s)=>{s.d(y,{Z:()=>l});var a=s(87536);let l=(()=>{class h{constructor(){}static getCount(S){return Number(S.headers?.get("X-Total-Count"))}static{this.\u0275fac=function(m){return new(m||h)}}static{this.\u0275prov=a.\u0275\u0275defineInjectable({token:h,factory:h.\u0275fac,providedIn:"root"})}}return h})()},2155:(q,y,s)=>{s.d(y,{w:()=>m});var a=s(36618),e=s(50619),l=s(38875),h=s(59342),R=s(87536);let S=(()=>{class v{constructor(C){this.formlyJsonschema=C}processJsonSchemaForm(C,d){let u=0;for(;u<C.forms.length&&C.forms[u].path!=d;)u++;u%=C.forms.length;const N=C.forms[u].control_schema.title,M=C.forms[u].ui_schema;let O=this.formlyJsonschema.toFieldConfig(C.forms[u].control_schema).fieldGroup;for(let A=0;A<O.length;A++)for(let _=0;_<M.length;_++)O[A].key==M[_].key&&(O[A].props.templateOptions=M[_].templateOptions,O[A].props.readonly=M[_].readonly,(0,h.n)(O[A],M));return{title:N,uiSchema:M,controlSchema:O,taskInfo:{metadataFields:C.forms[u].task_info.metadataFields,message:C.forms[u].task_info.message},methodType:C.forms[u].method_type,model:C.forms[u].model||{}}}static{this.\u0275fac=function(d){return new(d||v)(R.\u0275\u0275inject(l.FormlyJsonschema))}}static{this.\u0275prov=R.\u0275\u0275defineInjectable({token:v,factory:v.\u0275fac,providedIn:"root"})}}return v})(),m=(()=>{class v{constructor(C,d){this.http=C,this.crudFormAdapater=d,this.cache={}}list(C){const d=this.getCacheable(C,"get");if(void 0===this.cache[d]){const{url:u,version:N}=this.getUrlAndVersion(C);this.cache[d]=this.http.get(u,{headers:{Accept:`application/vnd.ceph.api.v${N}+json`}})}return this.cache[d]}submit(C,d,u){const{url:N,version:M}=this.getUrlAndVersion(C);return this.http[u](N,d,{headers:{Accept:`application/vnd.ceph.api.v${M}+json`}})}delete(C,d){const{url:u,version:N}=this.getUrlAndVersion(C);return this.http.delete(`${u}/${d}`,{headers:{Accept:`application/vnd.ceph.api.v${N}+json`},observe:"response"})}form(C,d,u=""){const N=this.getCacheable(C,"get",u),M={model_key:u};if(void 0===this.cache[N]){const{url:I,version:O}=this.getUrlAndVersion(C);this.cache[N]=this.http.get(I,{headers:{Accept:`application/vnd.ceph.api.v${O}+json`},params:M})}return this.cache[N].pipe((0,e.map)(I=>this.crudFormAdapater.processJsonSchemaForm(I,d)))}model(C,d){const u=this.getCacheable(C,"get");if(void 0===this.cache[u]){const{url:N,version:M}=this.getUrlAndVersion(C);this.cache[u]=this.http.get(`${N}/model`,{headers:{Accept:`application/vnd.ceph.api.v${M}+json`},params:d})}return this.cache[u]}getCacheable(C,d,u=""){return C+d+u}getUrlAndVersion(C){const d=C.match(/(?<url>[^@]+)(?:@(?<version>.+))?/);return{url:d.groups.url.split(".").join("/"),version:d.groups.version||"1.0"}}static{this.\u0275fac=function(d){return new(d||v)(R.\u0275\u0275inject(a.HttpClient),R.\u0275\u0275inject(S))}}static{this.\u0275prov=R.\u0275\u0275defineInjectable({token:v,factory:v.\u0275fac,providedIn:"root"})}}return v})()},60156:(q,y,s)=>{s.d(y,{g:()=>R});var a=s(89939),e=s.n(a),l=s(87536);let R=(()=>{class S{calculateAdditionalData(v){if(!v.life_expectancy_min||!v.life_expectancy_max)return v.state="unknown",v;const E=M=>!!Number.parseFloat(M),C=(M,I)=>M&&I&&E(M)&&E(I)?e().duration(e()(M).diff(e()(I))).asWeeks():null,d=e().duration(e()(e().now()).diff(e()(v.life_expectancy_stamp))).asWeeks(),u=C(v.life_expectancy_max,v.life_expectancy_stamp),N=C(v.life_expectancy_min,v.life_expectancy_stamp);return v.state=d>1?"stale":null!==u&&u<=2?"bad":null!==N&&N<=4?"warning":"good",v.life_expectancy_weeks={max:null!==u?Math.round(u):null,min:null!==N?Math.round(N):null},v}readable(v){return v.readableDaemons=v.daemons.join(" "),v}prepareDevice(v){return this.readable(this.calculateAdditionalData(v))}static{this.\u0275fac=function(E){return new(E||S)}}static{this.\u0275prov=l.\u0275\u0275defineInjectable({token:S,factory:S.\u0275fac,providedIn:"root"})}}return S})()},38996:(q,y,s)=>{s.d(y,{s:()=>E});var a=s(95631),l=s(50619),R=s(2464),S=s(63882),m=s(87536);let E=(()=>{class C{constructor(u,N){this.summaryservice=u,this.cephReleaseNamePipe=N,this.releaseDataSource=new a.BehaviorSubject(null),this.releaseData$=this.releaseDataSource.asObservable(),this.summaryservice.subscribeOnce(M=>{const I=this.cephReleaseNamePipe.transform(M.version);this.releaseDataSource.next(I)})}urlGenerator(u,N="main"){const I=`https://docs.ceph.com/en/${"main"===N?"latest":N}/`,O="https://ceph.io";return{iscsi:`${I}mgr/dashboard/#enabling-iscsi-management`,prometheus:`${I}mgr/dashboard/#enabling-prometheus-alerting`,"nfs-ganesha":`${I}mgr/dashboard/#configuring-nfs-ganesha-in-the-dashboard`,"rgw-nfs":`${I}radosgw/nfs`,rgw:`${I}mgr/dashboard/#enabling-the-object-gateway-management-frontend`,"rgw-multisite":`${I}/radosgw/multisite/#failover-and-disaster-recovery`,multisite:`${I}/radosgw/multisite`,dashboard:`${I}mgr/dashboard`,grafana:`${I}mgr/dashboard/#enabling-the-embedding-of-grafana-dashboards`,orch:`${I}mgr/orchestrator`,pgs:"https://old.ceph.com/pgcalc",help:`${O}/en/users/`,security:`${O}/en/security/`,trademarks:`${O}/en/trademarks/`,"dashboard-landing-page-status":`${I}mgr/dashboard/#dashboard-landing-page-status`,"dashboard-landing-page-performance":`${I}mgr/dashboard/#dashboard-landing-page-performance`,"dashboard-landing-page-capacity":`${I}mgr/dashboard/#dashboard-landing-page-capacity`}[u]}subscribeOnce(u,N,M){return this.releaseData$.pipe((0,l.filter)(I=>!!I),(0,l.map)(I=>this.urlGenerator(u,I)),(0,l.first)()).subscribe(N,M)}static{this.\u0275fac=function(N){return new(N||C)(m.\u0275\u0275inject(S.E),m.\u0275\u0275inject(R.N))}}static{this.\u0275prov=m.\u0275\u0275defineInjectable({token:C,factory:C.\u0275fac,providedIn:"root"})}}return C})()},1811:(q,y,s)=>{s.d(y,{k:()=>m});var a=s(50619),l=s(5155),h=s(40988),R=s(87536);let m=(()=>{class v{constructor(C){this.featureToggles=C}canActivate(C){return this.featureToggles.get().pipe((0,a.map)(d=>{if(!1===d[C.routeConfig.path])throw new l.YW;return!0}))}canActivateChild(C){return this.canActivate(C.parent)}static{this.\u0275fac=function(d){return new(d||v)(R.\u0275\u0275inject(h.b))}}static{this.\u0275prov=R.\u0275\u0275defineInjectable({token:v,factory:v.\u0275fac,providedIn:"root"})}}return v})()},40988:(q,y,s)=>{s.d(y,{b:()=>m});var a=s(36618),l=s(15643),h=s(87536);let m=(()=>{class v{constructor(C,d){this.http=C,this.timerService=d,this.API_URL="api/feature_toggles",this.REFRESH_INTERVAL=3e4,this.featureToggleMap$=this.timerService.get(()=>this.http.get(this.API_URL),this.REFRESH_INTERVAL)}get(){return this.featureToggleMap$}static{this.\u0275fac=function(d){return new(d||v)(h.\u0275\u0275inject(a.HttpClient),h.\u0275\u0275inject(l.H))}}static{this.\u0275prov=h.\u0275\u0275defineInjectable({token:v,factory:v.\u0275fac,providedIn:"root"})}}return v})()},12540:(q,y,s)=>{s.d(y,{k:()=>S});var a=s(29841),e=s.n(a),l=s(3687),h=s(87536);let S=(()=>{class m{format_number(E,C,d,u=1){if(e().isString(E)&&(E=Number(E)),!e().isNumber(E))return"-";if(e().isNaN(E))return"N/A";let N=E<1?0:Math.floor(Math.log(E)/Math.log(C));N=N>=d.length?d.length-1:N;let M=e().round(E/Math.pow(C,N),u).toString();return""===M?"-":(""!==d[N]&&(M=`${M} ${d[N]}`),M)}formatNumberFromTo(E,C="",d="",u,N,M=1){if(e().isString(E)&&(E=Number(E)),!e().isNumber(E)||!N)return"-";const I=N.map(P=>P.toLowerCase());if(!I.includes(C.toLowerCase())||!I.includes(d.toLowerCase()))return`${E} ${C}`;const O=I.indexOf(C.toLowerCase())-I.indexOf(d.toLocaleLowerCase()),f=O>0?E*Math.pow(u,O):E/Math.pow(u,Math.abs(O));let g=e().round(f,M).toString();return g=`${g} ${d}`,g}toBytes(E,C=null){const u=["b","k","m","g","t","p","e","z","y"],N=RegExp("^(\\d+(.\\d+)?) ?(["+u.join("")+"]?(b|ib|B/s|B/m|iB/m)?)?$","i").exec(E);if(null===N)return C;let M=parseFloat(N[1]);return e().isString(N[3])&&(M*=Math.pow(1024,u.indexOf(N[3].toLowerCase()[0]))),Math.round(M)}toMilliseconds(E){const d=/^\s*(\d+)\s*(ms)?\s*$/i.exec(E);return null!==d?+d[1]:0}toIops(E){const d=/^\s*(\d+)\s*(IOPS)?\s*$/i.exec(E);return null!==d?+d[1]:0}toOctalPermission(E){const C=["owner","group","others"];let d="";for(const u of C){let N=0;const M=E[u];M&&(M.includes("read")&&(N+=4),M.includes("write")&&(N+=2),M.includes("execute")&&(N+=1)),d+=N.toString()}return d}performValidation(E,C,d,u){return(0,l.xF)(E.value)?null:null===RegExp(C,"i").exec(E.value)||"quota"==u&&(new m).toBytes(E.value)<1024?d:null}iopmMaxSizeValidator(E){const d=/^\s*(\d+)$/i.exec(E.value);return(0,l.xF)(E.value)?null:null==d||E.value.toString()?.length>18?{rateOpsMaxSize:!0}:null}static{this.\u0275fac=function(C){return new(C||m)}}static{this.\u0275prov=h.\u0275\u0275defineInjectable({token:m,factory:m.\u0275fac,providedIn:"root"})}}return m})()},94254:(q,y,s)=>{s.d(y,{V:()=>R});var a=s(3600),l=s(87536);let R=(()=>{class S{constructor(v){this.modalService=v}show(v,E={}){const C=this.modalService.create({component:v,inputs:E});return this.modalRef=C.injector.get(v),this.modalRef}hasOpenModals(){return this.modalService.placeholderService.hasComponentRef}dismissAll(){this.modalService.destroy()}stopLoadingSpinner(v){this.modalRef[v].setErrors({cdSubmitButton:!0})}static{this.\u0275fac=function(E){return new(E||S)(l.\u0275\u0275inject(a.ModalService))}}static{this.\u0275prov=l.\u0275\u0275defineInjectable({token:S,factory:S.\u0275fac,providedIn:"root"})}}return S})()},77867:(q,y,s)=>{s.d(y,{B:()=>R});var a=s(77317),l=s(87536);let R=(()=>{class S{constructor(v){this.modal=v}show(v,E,C){const d=this.modal.open(v,C);return E&&Object.assign(d.componentInstance,E),d}dismissAll(){this.modal.dismissAll()}hasOpenModals(){return this.modal.hasOpenModals()}static{this.\u0275fac=function(E){return new(E||S)(l.\u0275\u0275inject(a.NgbModal))}}static{this.\u0275prov=l.\u0275\u0275defineInjectable({token:S,factory:S.\u0275fac,providedIn:"root"})}}return S})()},6955:(q,y,s)=>{s.d(y,{x:()=>N});var a=s(36618),l=s(76218),R=s(95631),m=s(50619),E=s(20009),C=s(46045),d=s(87536);let N=(()=>{class M{static{this.ALLOWLIST=["501"]}constructor(O,f,g){this.http=O,this.router=f,this.mgrModuleService=g}canActivate(O){return this.doCheck(O)}canActivateChild(O){return this.doCheck(O)}doCheck(O){if(O.url.length>0&&M.ALLOWLIST.includes(O.url[0].path))return(0,R.of)(!0);const f=O.data.moduleStatusGuardConfig;let g=!1;return f.backend&&this.mgrModuleService.getConfig("orchestrator").subscribe(P=>{g=f.backend===P.orchestrator},()=>(this.router.navigate([f.redirectTo]),(0,R.of)(!1))),this.http.get(`ui-api/${f.uiApiPath}/status`).pipe((0,m.map)(P=>(!P.available&&!g&&this.router.navigate([f.redirectTo||""],{state:{header:f.header,message:P.message,section:f.section,section_info:f.section_info,button_name:f.button_name,button_route:f.button_route,button_title:f.button_title,secondary_button_name:f.secondary_button_name,secondary_button_route:f.secondary_button_route,secondary_button_title:f.secondary_button_title,module_name:f.module_name,navigate_to:f.navigate_to,uiConfig:f.uiConfig,uiApiPath:f.uiApiPath,icon:C.FI.wrench,component:f.component}}),P.available)),(0,m.catchError)(()=>(this.router.navigate([f.redirectTo]),(0,R.of)(!1))))}static{this.\u0275fac=function(f){return new(f||M)(d.\u0275\u0275inject(a.HttpClient),d.\u0275\u0275inject(l.Router),d.\u0275\u0275inject(E.a))}}static{this.\u0275prov=d.\u0275\u0275defineInjectable({token:M,factory:M.\u0275fac,providedIn:"root"})}}return M})()},88701:(q,y,s)=>{s.d(y,{J:()=>N});var a=s(29841),e=s.n(a),l=s(74737),R=s(95631),m=s(88285),v=s(84268),E=s(71138),C=s(66527),d=s(87536);let N=(()=>{class M{constructor(O,f,g){this.toastr=O,this.taskMessageService=f,this.cdDatePipe=g,this.hideToasties=!1,this.dataSource=new R.BehaviorSubject([]),this.data$=this.dataSource.asObservable(),this.sidebarSubject=new R.Subject,this.queued=[],this.KEY="cdNotifications";const P=localStorage.getItem(this.KEY);let A=[];e().isString(P)&&(A=JSON.parse(P,(_,B)=>e().isPlainObject(B)?e().assign(new v.p,B):B)),this.dataSource.next(A)}removeAll(){localStorage.removeItem(this.KEY),this.dataSource.next([])}remove(O){const f=this.dataSource.getValue();f.splice(O,1),this.dataSource.next(f),localStorage.setItem(this.KEY,JSON.stringify(f))}save(O){const f=this.dataSource.getValue();for(f.push(O),f.sort((g,P)=>g.timestamp>P.timestamp?-1:1);f.length>10;)f.pop();this.dataSource.next(f),localStorage.setItem(this.KEY,JSON.stringify(f))}show(O,f,g,P,A){return window.setTimeout(()=>{let _;_=e().isFunction(O)?O():e().isObject(O)?O:new v.v(O,f,g,P,A),this.queueToShow(_)},10)}queueToShow(O){this.cancel(this.queuedTimeoutId),this.queued.find(f=>e().isEqual(f,O))||this.queued.push(O),this.queuedTimeoutId=window.setTimeout(()=>{this.showQueued()},500)}showQueued(){this.getUnifiedTitleQueue().forEach(O=>{const f=new v.p(O);f.isFinishedTask||this.save(f),this.showToasty(f)})}getUnifiedTitleQueue(){return Object.values(this.queueShiftByTitle()).map(O=>{const f=O[0];return O.length>1&&(f.message="<ul>"+O.map(g=>`<li>${g.message}</li>`).join("")+"</ul>"),f})}queueShiftByTitle(){const O={};let f;for(;f=this.queued.shift();)O[f.title]||(O[f.title]=[]),O[f.title].push(f);return O}showToasty(O){this.hideToasties||this.toastr[["error","info","success"][O.type]]((O.message?O.message+"<br>":"")+this.renderTimeAndApplicationHtml(O),O.title,O.options)}renderTimeAndApplicationHtml(O){return`<small class="date">${this.cdDatePipe.transform(O.timestamp)}</small><i class="float-end custom-icon ${O.applicationClass}" title="${O.application}"></i>`}notifyTask(O,f=!0){const g=this.finishedTaskToNotification(O,f);return g.isFinishedTask=!0,this.show(g)}finishedTaskToNotification(O,f=!0){let g;return g=O.success&&f?new v.v(m._.success,this.taskMessageService.getSuccessTitle(O)):new v.v(m._.error,this.taskMessageService.getErrorTitle(O),this.taskMessageService.getErrorMessage(O)),g.isFinishedTask=!0,g}cancel(O){window.clearTimeout(O)}suspendToasties(O){this.hideToasties=O}toggleSidebar(O=!1){this.sidebarSubject.next(O)}static{this.\u0275fac=function(f){return new(f||M)(d.\u0275\u0275inject(l.ToastrService),d.\u0275\u0275inject(C.i),d.\u0275\u0275inject(E.Q))}}static{this.\u0275prov=d.\u0275\u0275defineInjectable({token:M,factory:M.\u0275fac,providedIn:"root"})}}return M})()},76857:(q,y,s)=>{s.d(y,{$:()=>m});var a=s(29841),e=s.n(a),l=s(50619),h=s(11549);class R{constructor(E){this.pwdPolicyEnabled=E.pwd_policy_enabled,this.pwdPolicyMinLength=E.pwd_policy_min_length,this.pwdPolicyCheckLengthEnabled=E.pwd_policy_check_length_enabled,this.pwdPolicyCheckOldpwdEnabled=E.pwd_policy_check_oldpwd_enabled,this.pwdPolicyCheckUsernameEnabled=E.pwd_policy_check_username_enabled,this.pwdPolicyCheckExclusionListEnabled=E.pwd_policy_check_exclusion_list_enabled,this.pwdPolicyCheckRepetitiveCharsEnabled=E.pwd_policy_check_repetitive_chars_enabled,this.pwdPolicyCheckSequentialCharsEnabled=E.pwd_policy_check_sequential_chars_enabled,this.pwdPolicyCheckComplexityEnabled=E.pwd_policy_check_complexity_enabled}}var S=s(87536);let m=(()=>{class v{constructor(C){this.settingsService=C}getHelpText(){return this.settingsService.getStandardSettings().pipe((0,l.map)(C=>{const d=new R(C);let u=[];if(d.pwdPolicyEnabled){u.push($localize`Required rules for passwords:`);const N={pwdPolicyCheckLengthEnabled:$localize`Must contain at least ${d.pwdPolicyMinLength} characters`,pwdPolicyCheckOldpwdEnabled:$localize`Must not be the same as the previous one`,pwdPolicyCheckUsernameEnabled:$localize`Cannot contain the username`,pwdPolicyCheckExclusionListEnabled:$localize`Cannot contain any configured keyword`,pwdPolicyCheckRepetitiveCharsEnabled:$localize`Cannot contain any repetitive characters e.g. "aaa"`,pwdPolicyCheckSequentialCharsEnabled:$localize`Cannot contain any sequential characters e.g. "abc"`,pwdPolicyCheckComplexityEnabled:$localize`Must consist of characters from the following groups:
  * Alphabetic a-z, A-Z
  * Numbers 0-9
  * Special chars: !"#$%& '()*+,-./:;<=>?@[\\]^_\`{{|}}~
  * Any other characters (signs)`};u=u.concat(e().keys(N).filter(M=>e().get(d,M)).map(M=>"- "+e().get(N,M)))}return u.join("\n")}))}mapCreditsToCssClass(C){let d="very-strong";return C<10?d="too-weak":C<15?d="weak":C<20?d="ok":C<25&&(d="strong"),d}static{this.\u0275fac=function(d){return new(d||v)(S.\u0275\u0275inject(h.h))}}static{this.\u0275prov=S.\u0275\u0275defineInjectable({token:v,factory:v.\u0275fac,providedIn:"root"})}}return v})()},77241:(q,y,s)=>{s.d(y,{Q:()=>h});var a=s(6107),e=s(87536);let h=(()=>{class R{constructor(){this.sections=[{heading:$localize`Quality of Service`,class:"quality-of-service",options:[{name:"rbd_qos_bps_limit",displayName:$localize`BPS Limit`,description:$localize`The desired limit of IO bytes per second.`,type:a.T.bps},{name:"rbd_qos_iops_limit",displayName:$localize`IOPS Limit`,description:$localize`The desired limit of IO operations per second.`,type:a.T.iops},{name:"rbd_qos_read_bps_limit",displayName:$localize`Read BPS Limit`,description:$localize`The desired limit of read bytes per second.`,type:a.T.bps},{name:"rbd_qos_read_iops_limit",displayName:$localize`Read IOPS Limit`,description:$localize`The desired limit of read operations per second.`,type:a.T.iops},{name:"rbd_qos_write_bps_limit",displayName:$localize`Write BPS Limit`,description:$localize`The desired limit of write bytes per second.`,type:a.T.bps},{name:"rbd_qos_write_iops_limit",displayName:$localize`Write IOPS Limit`,description:$localize`The desired limit of write operations per second.`,type:a.T.iops},{name:"rbd_qos_bps_burst",displayName:$localize`BPS Burst`,description:$localize`The desired burst limit of IO bytes.`,type:a.T.bps},{name:"rbd_qos_iops_burst",displayName:$localize`IOPS Burst`,description:$localize`The desired burst limit of IO operations.`,type:a.T.iops},{name:"rbd_qos_read_bps_burst",displayName:$localize`Read BPS Burst`,description:$localize`The desired burst limit of read bytes.`,type:a.T.bps},{name:"rbd_qos_read_iops_burst",displayName:$localize`Read IOPS Burst`,description:$localize`The desired burst limit of read operations.`,type:a.T.iops},{name:"rbd_qos_write_bps_burst",displayName:$localize`Write BPS Burst`,description:$localize`The desired burst limit of write bytes.`,type:a.T.bps},{name:"rbd_qos_write_iops_burst",displayName:$localize`Write IOPS Burst`,description:$localize`The desired burst limit of write operations.`,type:a.T.iops}]}]}static getOptionsFromSections(m){return m.map(v=>v.options).reduce((v,E)=>v.concat(E))}filterConfigOptionsByName(m){return R.getOptionsFromSections(this.sections).filter(v=>v.name===m)}getOptionValueByName(m,v,E=""){const C=this.filterConfigOptionsByName(m);return 1===C.length?C.pop()[v]:E}getWritableSections(){return this.sections.map(m=>(m.options=m.options.filter(v=>!v.readOnly),m))}getOptionFields(){return R.getOptionsFromSections(this.sections)}getWritableOptionFields(){return R.getOptionsFromSections(this.getWritableSections())}getOptionByName(m){return this.filterConfigOptionsByName(m).pop()}getDisplayName(m){return this.getOptionValueByName(m,"displayName")}getDescription(m){return this.getOptionValueByName(m,"description")}static{this.\u0275fac=function(v){return new(v||R)}}static{this.\u0275prov=e.\u0275\u0275defineInjectable({token:R,factory:R.\u0275fac,providedIn:"root"})}}return R})()},61065:(q,y,s)=>{s.d(y,{s:()=>R});var a=s(87536),l=s(95631);let R=(()=>{class S{constructor(v){this.ngZone=v,this.intervalDataSource=new l.BehaviorSubject(null),this.intervalData$=this.intervalDataSource.asObservable();const E=parseInt(sessionStorage.getItem("dashboard_interval"),10)||5e3;this.setRefreshInterval(E)}setRefreshInterval(v){this.intervalTime=v,sessionStorage.setItem("dashboard_interval",v.toString()),this.intervalSubscription&&this.intervalSubscription.unsubscribe(),this.ngZone.runOutsideAngular(()=>{this.intervalSubscription=(0,l.interval)(this.intervalTime).subscribe(()=>this.ngZone.run(()=>{this.intervalDataSource.next(this.intervalTime)}))})}getRefreshInterval(){return this.intervalTime}ngOnDestroy(){this.intervalSubscription&&this.intervalSubscription.unsubscribe()}static{this.\u0275fac=function(E){return new(E||S)(a.\u0275\u0275inject(a.NgZone))}}static{this.\u0275prov=a.\u0275\u0275defineInjectable({token:S,factory:S.\u0275fac,providedIn:"root"})}}return S})()},63882:(q,y,s)=>{s.d(y,{E:()=>u});var a=s(36618),l=s(29841),h=s.n(l),R=s(95631),m=s(50619),E=s(15643),C=s(87536);let u=(()=>{class N{constructor(I,O){this.http=I,this.timerService=O,this.REFRESH_INTERVAL=5e3,this.summaryDataSource=new R.BehaviorSubject(null),this.summaryData$=this.summaryDataSource.asObservable()}startPolling(){return this.timerService.get(()=>this.retrieveSummaryObservable(),this.REFRESH_INTERVAL).subscribe(this.retrieveSummaryObserver())}refresh(){return this.retrieveSummaryObservable().subscribe(this.retrieveSummaryObserver())}retrieveSummaryObservable(){return this.http.get("api/summary")}retrieveSummaryObserver(){return I=>{this.summaryDataSource.next(I)}}subscribeOnce(I,O){return this.summaryData$.pipe((0,m.filter)(f=>!!f),(0,m.first)()).subscribe(I,O)}subscribe(I,O){return this.summaryData$.pipe((0,m.filter)(f=>!!f)).subscribe(I,O)}addRunningTask(I){const O=this.summaryDataSource.getValue();O&&(h().isArray(O.executing_tasks)?O.executing_tasks.find(g=>g.name===I.name&&h().isEqual(g.metadata,I.metadata))||O.executing_tasks.push(I):O.executing_tasks=[I],this.summaryDataSource.next(O))}static{this.\u0275fac=function(O){return new(O||N)(C.\u0275\u0275inject(a.HttpClient),C.\u0275\u0275inject(E.H))}}static{this.\u0275prov=C.\u0275\u0275defineInjectable({token:N,factory:N.\u0275fac,providedIn:"root"})}}return N})()},58510:(q,y,s)=>{s.d(y,{D:()=>R});var a=s(63882),e=s(66527),l=s(87536);let R=(()=>{class S{constructor(v,E){this.taskMessageService=v,this.summaryService=E}init(v,E,C,d,u,N,M){this.getUpdate=v,this.preProcessing=E,this.setList=C,this.onFetchError=d,this.taskFilter=u,this.itemFilter=N,this.builders=M||{},this.summaryDataSubscription=this.summaryService.subscribe(I=>{this.summary=I,this.fetch()},this.onFetchError)}fetch(v=null){this.getUpdate(v).subscribe(E=>{this.updateData(E,this.summary?.executing_tasks.filter(this.taskFilter))},this.onFetchError)}updateData(v,E){const C=this.preProcessing?this.preProcessing(v):v;this.addMissing(C,E),C.forEach(d=>{const u=E.filter(N=>this.itemFilter(d,N));d.cdExecuting=this.getTaskAction(u)}),this.setList(C)}addMissing(v,E){const C=this.builders.default;E?.forEach(d=>{const u=v.find(M=>this.itemFilter(M,d)),N=this.builders[d.name];!u&&(N||C)&&v.push(N?N(d.metadata):C(d.metadata))})}getTaskAction(v){if(0!==v.length)return v.map(E=>{const C=E.progress?` ${E.progress}%`:"";return this.taskMessageService.getRunningText(E)+"..."+C}).join(", ")}ngOnDestroy(){this.summaryDataSubscription&&this.summaryDataSubscription.unsubscribe()}static{this.\u0275fac=function(E){return new(E||S)(l.\u0275\u0275inject(e.i),l.\u0275\u0275inject(a.E))}}static{this.\u0275prov=l.\u0275\u0275defineInjectable({token:S,factory:S.\u0275fac})}}return S})()},60977:(q,y,s)=>{s.d(y,{C:()=>S});var a=s(29841),e=s.n(a),l=s(87536);class R{constructor(v,E,C){this.name=v,this.metadata=E,this.onTaskFinished=C}}let S=(()=>{class m{constructor(){this.subscriptions=[]}init(E){return E.subscribe(C=>{const d=C.executing_tasks,u=C.finished_tasks,N=[];for(const M of this.subscriptions){const I=this._getTask(M,u),O=this._getTask(M,d);null!==I&&null===O&&M.onTaskFinished(I),null!==O&&N.push(M),this.subscriptions=N}})}subscribe(E,C,d){this.subscriptions.push(new R(E,C,d))}_getTask(E,C){for(const d of C)if(d.name===E.name&&e().isEqual(d.metadata,E.metadata))return d;return null}static{this.\u0275fac=function(C){return new(C||m)}}static{this.\u0275prov=l.\u0275\u0275defineInjectable({token:m,factory:m.\u0275fac,providedIn:"root"})}}return m})()},66527:(q,y,s)=>{s.d(y,{i:()=>E});var a=s(29841),e=s.n(a),l=function(C){return C.auth="Login",C.cephfs="CephFS",C.rbd="RBD",C.pool="Pool",C.osd="OSD",C.role="Role",C.user="User",C}(l||{}),h=s(65218),R=s(63284),S=s(87536);class m{constructor(d,u,N){this.running=d,this.failure=u,this.success=N}}class v{failure(d){return $localize`Failed to ${this.operation.failure} ${this.involves(d)}`}running(d){return`${this.operation.running} ${this.involves(d)}`}success(d){return`${this.operation.success} ${this.involves(d)}`}constructor(d,u,N){this.operation=d,this.involves=u,this.errors=N||(()=>({}))}}let E=(()=>{class C{constructor(){this.defaultMessage=this.newTaskMessage(new m($localize`Executing`,$localize`execute`,$localize`Executed`),u=>u&&(l[u.component]||u.component)||$localize`unknown task`,()=>({})),this.pluralize=(new R.n).transform,this.commonOperations={create:new m($localize`Creating`,$localize`create`,$localize`Created`),update:new m($localize`Updating`,$localize`update`,$localize`Updated`),delete:new m($localize`Deleting`,$localize`delete`,$localize`Deleted`),add:new m($localize`Adding`,$localize`add`,$localize`Added`),remove:new m($localize`Removing`,$localize`remove`,$localize`Removed`),import:new m($localize`Importing`,$localize`import`,$localize`Imported`),activate:new m($localize`Importing`,$localize`activate`,$localize`Activated`),deactivate:new m($localize`Importing`,$localize`deactivate`,$localize`Deactivated`)},this.rbd={default:u=>$localize`RBD '${u.image_spec}'`,create:u=>{const N=new h.J(u.pool_name,u.namespace,u.image_name).toString();return $localize`RBD '${N}'`},child:u=>{const N=new h.J(u.child_pool_name,u.child_namespace,u.child_image_name).toString();return $localize`RBD '${N}'`},destination:u=>{const N=new h.J(u.dest_pool_name,u.dest_namespace,u.dest_image_name).toString();return $localize`RBD '${N}'`},snapshot:u=>$localize`RBD snapshot '${u.image_spec}@${u.snapshot_name}'`},this.rbd_mirroring={site_name:()=>$localize`mirroring site name`,bootstrap:()=>$localize`bootstrap token`,pool:u=>$localize`mirror mode for pool '${u.pool_name}'`,pool_peer:u=>$localize`mirror peer for pool '${u.pool_name}'`},this.grafana={update_dashboards:()=>$localize`all dashboards`},this.messages={"host/add":this.newTaskMessage(this.commonOperations.add,u=>this.host(u)),"host/remove":this.newTaskMessage(this.commonOperations.remove,u=>this.host(u)),"host/identify_device":this.newTaskMessage(new m($localize`Identifying`,$localize`identify`,$localize`Identified`),u=>$localize`device '${u.device}' on host '${u.hostname}'`),"osd/create":this.newTaskMessage(this.commonOperations.create,u=>$localize`OSDs (DriveGroups: ${u.tracking_id})`),"osd/delete":this.newTaskMessage(this.commonOperations.delete,u=>this.osd(u)),"pool/create":this.newTaskMessage(this.commonOperations.create,u=>this.pool(u),u=>({17:$localize`Name is already used by ${this.pool(u)}.`})),"pool/edit":this.newTaskMessage(this.commonOperations.update,u=>this.pool(u),u=>({17:$localize`Name is already used by ${this.pool(u)}.`})),"pool/delete":this.newTaskMessage(this.commonOperations.delete,u=>this.pool(u)),"ecp/create":this.newTaskMessage(this.commonOperations.create,u=>this.ecp(u),u=>({17:$localize`Name is already used by ${this.ecp(u)}.`})),"ecp/delete":this.newTaskMessage(this.commonOperations.delete,u=>this.ecp(u)),"crushRule/create":this.newTaskMessage(this.commonOperations.create,u=>this.crushRule(u),u=>({17:$localize`Name is already used by ${this.crushRule(u)}.`})),"crushRule/delete":this.newTaskMessage(this.commonOperations.delete,u=>this.crushRule(u)),"rbd/create":this.newTaskMessage(this.commonOperations.create,this.rbd.create,u=>({17:$localize`Name is already used by ${this.rbd.create(u)}.`})),"rbd/edit":this.newTaskMessage(this.commonOperations.update,this.rbd.default,u=>({17:$localize`Name is already used by ${this.rbd.default(u)}.`})),"rbd/delete":this.newTaskMessage(this.commonOperations.delete,this.rbd.default,u=>({16:$localize`${this.rbd.default(u)} is busy.`,39:$localize`${this.rbd.default(u)} contains snapshots.`})),"rbd/clone":this.newTaskMessage(new m($localize`Cloning`,$localize`clone`,$localize`Cloned`),this.rbd.child,u=>({17:$localize`Name is already used by ${this.rbd.child(u)}.`,22:$localize`Snapshot of ${this.rbd.child(u)} must be protected.`})),"rbd/copy":this.newTaskMessage(new m($localize`Copying`,$localize`copy`,$localize`Copied`),this.rbd.destination,u=>({17:$localize`Name is already used by ${this.rbd.destination(u)}.`})),"rbd/flatten":this.newTaskMessage(new m($localize`Flattening`,$localize`flatten`,$localize`Flattened`),this.rbd.default),"rbd/snap/create":this.newTaskMessage(this.commonOperations.create,this.rbd.snapshot,u=>({17:$localize`Name is already used by ${this.rbd.snapshot(u)}.`})),"rbd/snap/edit":this.newTaskMessage(this.commonOperations.update,this.rbd.snapshot,u=>({16:$localize`Cannot unprotect ${this.rbd.snapshot(u)} because it contains child images.`})),"rbd/snap/delete":this.newTaskMessage(this.commonOperations.delete,this.rbd.snapshot,u=>({16:$localize`Cannot delete ${this.rbd.snapshot(u)} because it's protected.`})),"rbd/snap/rollback":this.newTaskMessage(new m($localize`Rolling back`,$localize`rollback`,$localize`Rolled back`),this.rbd.snapshot),"rbd/trash/move":this.newTaskMessage(new m($localize`Moving`,$localize`move`,$localize`Moved`),u=>$localize`image '${u.image_spec}' to trash`,()=>({2:$localize`Could not find image.`})),"rbd/trash/restore":this.newTaskMessage(new m($localize`Restoring`,$localize`restore`,$localize`Restored`),u=>$localize`image '${u.image_id_spec}' into '${u.new_image_name}'`,u=>({17:$localize`Image name '${u.new_image_name}' is already in use.`})),"rbd/trash/remove":this.newTaskMessage(new m($localize`Deleting`,$localize`delete`,$localize`Deleted`),u=>$localize`image '${u.image_id_spec}'`),"rbd/trash/purge":this.newTaskMessage(new m($localize`Purging`,$localize`purge`,$localize`Purged`),u=>{let N=$localize`all pools`;return u.pool_name&&(N=`'${u.pool_name}'`),$localize`images from ${N}`}),"rbd/mirroring/site_name/edit":this.newTaskMessage(this.commonOperations.update,this.rbd_mirroring.site_name,()=>({})),"rbd/mirroring/bootstrap/create":this.newTaskMessage(this.commonOperations.create,this.rbd_mirroring.bootstrap,()=>({})),"rbd/mirroring/bootstrap/import":this.newTaskMessage(this.commonOperations.import,this.rbd_mirroring.bootstrap,()=>({})),"rbd/mirroring/pool/edit":this.newTaskMessage(this.commonOperations.update,this.rbd_mirroring.pool,()=>({16:$localize`Cannot disable mirroring because it contains a peer.`})),"rbd/mirroring/peer/add":this.newTaskMessage(this.commonOperations.create,this.rbd_mirroring.pool_peer,()=>({})),"rbd/mirroring/peer/edit":this.newTaskMessage(this.commonOperations.update,this.rbd_mirroring.pool_peer,()=>({})),"rbd/mirroring/peer/delete":this.newTaskMessage(this.commonOperations.delete,this.rbd_mirroring.pool_peer,()=>({})),"rgw/bucket/delete":this.newTaskMessage(this.commonOperations.delete,u=>$localize`${u.bucket_names[0]}`),"rgw/bucket/notification/delete":this.newTaskMessage(this.commonOperations.delete,u=>$localize`${u.notification_id[0]}`),"rgw/accounts":this.newTaskMessage(this.commonOperations.delete,u=>$localize`${`account '${u.account_names[0]}'`}`),"rgw/multisite/sync-policy/delete":this.newTaskMessage(this.commonOperations.delete,u=>$localize`${u.group_names.length>1?"selected policy groups":`policy group '${u.group_names[0]}'`}`),"rgw/multisite/sync-flow/delete":this.newTaskMessage(this.commonOperations.delete,u=>$localize`${u.flow_ids.length>1?"selected Flow":`Flow '${u.flow_ids[0]}'`}`),"rgw/multisite/sync-pipe/delete":this.newTaskMessage(this.commonOperations.delete,u=>$localize`${u.pipe_ids.length>1?"selected pipe":`Pipe '${u.pipe_ids[0]}'`}`),"rgw/zonegroup/storage-class":this.newTaskMessage(this.commonOperations.remove,u=>this.rgwStorageClass(u)),"iscsi/target/create":this.newTaskMessage(this.commonOperations.create,u=>this.iscsiTarget(u)),"iscsi/target/edit":this.newTaskMessage(this.commonOperations.update,u=>this.iscsiTarget(u)),"iscsi/target/delete":this.newTaskMessage(this.commonOperations.delete,u=>this.iscsiTarget(u)),"nvmeof/subsystem/create":this.newTaskMessage(this.commonOperations.create,u=>this.nvmeofSubsystem(u)),"nvmeof/subsystem/delete":this.newTaskMessage(this.commonOperations.delete,u=>this.nvmeofSubsystem(u)),"nvmeof/listener/create":this.newTaskMessage(this.commonOperations.create,u=>this.nvmeofListener(u)),"nvmeof/listener/delete":this.newTaskMessage(this.commonOperations.delete,u=>this.nvmeofListener(u)),"nvmeof/namespace/create":this.newTaskMessage(this.commonOperations.create,u=>this.nvmeofNamespace(u)),"nvmeof/namespace/edit":this.newTaskMessage(this.commonOperations.update,u=>this.nvmeofNamespace(u)),"nvmeof/namespace/delete":this.newTaskMessage(this.commonOperations.delete,u=>this.nvmeofNamespace(u)),"nvmeof/initiator/add":this.newTaskMessage(this.commonOperations.add,u=>this.nvmeofInitiator(u)),"nvmeof/initiator/remove":this.newTaskMessage(this.commonOperations.remove,u=>this.nvmeofInitiator(u)),"nfs/create":this.newTaskMessage(this.commonOperations.create,u=>this.nfs(u)),"nfs/edit":this.newTaskMessage(this.commonOperations.update,u=>this.nfs(u)),"nfs/delete":this.newTaskMessage(this.commonOperations.delete,u=>this.nfs(u)),"rgw/topic/delete":this.newTaskMessage(this.commonOperations.delete,u=>this.topic(u)),"grafana/dashboards/update":this.newTaskMessage(this.commonOperations.update,this.grafana.update_dashboards,()=>({})),"service/create":this.newTaskMessage(this.commonOperations.create,u=>this.service(u)),"service/edit":this.newTaskMessage(this.commonOperations.update,u=>this.service(u)),"service/delete":this.newTaskMessage(this.commonOperations.delete,u=>this.service(u)),"crud-component/create":this.newTaskMessage(this.commonOperations.create,u=>this.crudMessage(u)),"crud-component/edit":this.newTaskMessage(this.commonOperations.update,u=>this.crudMessage(u)),"crud-component/import":this.newTaskMessage(this.commonOperations.import,u=>this.crudMessage(u)),"crud-component/id":this.newTaskMessage(this.commonOperations.delete,u=>this.crudMessageId(u)),"cephfs/create":this.newTaskMessage(this.commonOperations.create,u=>this.volume(u)),"cephfs/edit":this.newTaskMessage(this.commonOperations.update,u=>this.volume(u)),"cephfs/auth":this.newTaskMessage(this.commonOperations.update,u=>this.auth(u)),"cephfs/remove":this.newTaskMessage(this.commonOperations.remove,u=>this.volume(u)),"cephfs/subvolume/create":this.newTaskMessage(this.commonOperations.create,u=>this.subvolume(u)),"cephfs/subvolume/edit":this.newTaskMessage(this.commonOperations.update,u=>this.subvolume(u)),"cephfs/subvolume/remove":this.newTaskMessage(this.commonOperations.remove,u=>this.subvolume(u)),"cephfs/subvolume/group/create":this.newTaskMessage(this.commonOperations.create,u=>this.subvolumegroup(u)),"cephfs/subvolume/group/edit":this.newTaskMessage(this.commonOperations.update,u=>this.subvolumegroup(u)),"cephfs/subvolume/group/remove":this.newTaskMessage(this.commonOperations.remove,u=>this.subvolumegroup(u)),"cephfs/subvolume/snapshot/create":this.newTaskMessage(this.commonOperations.create,u=>this.snapshot(u)),"cephfs/subvolume/snapshot/delete":this.newTaskMessage(this.commonOperations.delete,u=>this.snapshot(u)),"cephfs/snapshot/schedule/create":this.newTaskMessage(this.commonOperations.add,u=>this.snapshotSchedule(u)),"cephfs/snapshot/schedule/edit":this.newTaskMessage(this.commonOperations.update,u=>this.snapshotSchedule(u)),"cephfs/snapshot/schedule/delete":this.newTaskMessage(this.commonOperations.delete,u=>this.snapshotSchedule(u)),"cephfs/snapshot/schedule/activate":this.newTaskMessage(this.commonOperations.activate,u=>this.snapshotSchedule(u)),"cephfs/snapshot/schedule/deactivate":this.newTaskMessage(this.commonOperations.deactivate,u=>this.snapshotSchedule(u)),"cephfs/smb/cluster/create":this.newTaskMessage(this.commonOperations.create,u=>this.smbCluster(u)),"cephfs/smb/cluster/edit":this.newTaskMessage(this.commonOperations.update,u=>this.smbCluster(u)),"cephfs/smb/cluster/delete":this.newTaskMessage(this.commonOperations.delete,u=>this.smbCluster(u)),"cephfs/smb/share/create":this.newTaskMessage(this.commonOperations.create,u=>this.smbShare(u)),"cephfs/smb/share/edit":this.newTaskMessage(this.commonOperations.update,u=>this.smbShare(u)),"cephfs/smb/share/delete":this.newTaskMessage(this.commonOperations.delete,u=>this.smbShare(u)),"cephfs/smb/active-directory/create":this.newTaskMessage(this.commonOperations.create,u=>this.smbJoinAuth(u)),"cephfs/smb/active-directory/edit":this.newTaskMessage(this.commonOperations.update,u=>this.smbJoinAuth(u)),"cephfs/smb/active-directory/delete":this.newTaskMessage(this.commonOperations.delete,u=>this.smbJoinAuth(u)),"cephfs/smb/standalone/create":this.newTaskMessage(this.commonOperations.create,u=>this.smbUsersgroups(u)),"cephfs/smb/standalone/edit":this.newTaskMessage(this.commonOperations.update,u=>this.smbUsersgroups(u)),"cephfs/smb/standalone/delete":this.newTaskMessage(this.commonOperations.delete,u=>this.smbUsersgroups(u))}}newTaskMessage(u,N,M){return new v(u,N,M)}host(u){return $localize`host '${u.hostname}'`}osd(u){return $localize`OSD '${u.svc_id}'`}pool(u){return $localize`pool '${u.pool_name}'`}ecp(u){return $localize`erasure code profile '${u.name}'`}crushRule(u){return $localize`crush rule '${u.name}'`}iscsiTarget(u){return $localize`target '${u.target_iqn}'`}nvmeofSubsystem(u){return $localize`subsystem '${u.nqn}'`}nvmeofListener(u){return $localize`listener '${u.host_name} for subsystem ${u.nqn}`}nvmeofNamespace(u){return u?.nsid?$localize`namespace ${u.nsid} for subsystem '${u.nqn}'`:$localize`${u.nsCount} ${this.pluralize("namespace",u.nsCount)} for subsystem '${u.nqn}'`}nvmeofInitiator(u){return $localize`${this.pluralize("initiator",u.plural)} for subsystem ${u.nqn}`}nfs(u){return $localize`NFS '${u.cluster_id}\:${u.export_id?u.export_id:u.path}'`}smbCluster(u){return $localize`SMB cluster  '${u.cluster_id}'`}smbShare(u){return $localize`SMB share '${u?.share_id}'`}smbJoinAuth(u){return $localize`SMB active directory access resource '${u.authId}'`}smbUsersgroups(u){return $localize`SMB users and groups access resource '${u.usersGroupsId}'`}topic(u){return $localize`Topic  '${u.name}'`}notification(u){return $localize`Notification  '${u.name}'`}service(u){return $localize`service '${u.service_name}'`}rgwStorageClass(u){return $localize`Tiering Storage Class  '${u.storage_class}'`}crudMessage(u){let N=u.__message;return e().forEach(u,(M,I)=>{"__message"!=I&&(N=N.replace("{"+I+"}",M))}),$localize`${N}`}volume(u){return $localize`'${u.volumeName}'`}auth(u){return $localize`client.${u.clientId} authorization successfully`}subvolume(u){return $localize`subvolume '${u.subVolumeName}'`}subvolumegroup(u){return $localize`subvolume group '${u.subvolumegroupName}'`}snapshot(u){return $localize`snapshot '${u.snapshotName}'`}snapshotSchedule(u){return $localize`snapshot schedule for path '${u?.path}'`}crudMessageId(u){return $localize`${u}`}_getTaskTitle(u){return u.name&&u.name.startsWith("progress/")?this.newTaskMessage(new m(u.name.replace("progress/",""),"",u.name.replace("progress/","")),N=>""):this.messages[u.name]||this.defaultMessage}getSuccessTitle(u){return this._getTaskTitle(u).success(u.metadata)}getErrorMessage(u){return this._getTaskTitle(u).errors(u.metadata)[u.exception.code]||u.exception.detail}getErrorTitle(u){return this._getTaskTitle(u).failure(u.metadata)}getRunningTitle(u){return this._getTaskTitle(u).running(u.metadata)}getRunningText(u){return this._getTaskTitle(u).operation.running}static{this.\u0275fac=function(N){return new(N||C)}}static{this.\u0275prov=S.\u0275\u0275defineInjectable({token:C,factory:C.\u0275fac,providedIn:"root"})}}return C})()},50813:(q,y,s)=>{s.d(y,{a:()=>u});var a=s(95631),l=s(88285),h=s(84268),R=s(12959),S=s(88701),m=s(63882),v=s(60977),E=s(66527),C=s(87536);let u=(()=>{class N{constructor(I,O,f,g){this.notificationService=I,this.summaryService=O,this.taskMessageService=f,this.taskManagerService=g}wrapTaskAroundCall({task:I,call:O}){return new a.Observable(f=>{O.subscribe(g=>{202===g.status?this._handleExecutingTasks(I):(this.summaryService.refresh(),I.success=!0,this.notificationService.notifyTask(I))},g=>{I.success=!1,I.exception=g.error,f.error(g)},()=>{f.complete()})})}_handleExecutingTasks(I){const O=new h.v(l._.info,this.taskMessageService.getRunningTitle(I));O.isFinishedTask=!0,this.notificationService.show(O);const f=new R.G(I.name,I.metadata);this.summaryService.addRunningTask(f),this.taskManagerService.subscribe(f.name,f.metadata,g=>{this.notificationService.notifyTask(g)})}static{this.\u0275fac=function(O){return new(O||N)(C.\u0275\u0275inject(S.J),C.\u0275\u0275inject(m.E),C.\u0275\u0275inject(E.i),C.\u0275\u0275inject(v.C))}}static{this.\u0275prov=C.\u0275\u0275defineInjectable({token:N,factory:N.\u0275fac,providedIn:"root"})}}return N})()},11145:(q,y,s)=>{s.d(y,{C:()=>l});var a=s(87536);let l=(()=>{class h{constructor(){}format(S){const m=S?.nativeElement?.value;try{const v=JSON.stringify(JSON.parse(m),null,2);S.nativeElement.value=v,S.nativeElement.style.height="auto";const d=20*v.split("\n").length;S.nativeElement.style.height=d+"px"}catch{}}static{this.\u0275fac=function(m){return new(m||h)}}static{this.\u0275prov=a.\u0275\u0275defineInjectable({token:h,factory:h.\u0275fac,providedIn:"root"})}}return h})()},15643:(q,y,s)=>{s.d(y,{H:()=>E});var a=s(95631),e=s(50619),l=s(72394),h=s(87536);class R{constructor(d){this.zone=d,this.scheduler=a.asyncScheduler}now(){return this.scheduler.now()}}let S=(()=>{class C extends R{constructor(u){super(u)}schedule(...u){return this.zone.runOutsideAngular(()=>this.scheduler.schedule.apply(this.scheduler,u))}static{this.\u0275fac=function(N){return new(N||C)(h.\u0275\u0275inject(h.NgZone))}}static{this.\u0275prov=h.\u0275\u0275defineInjectable({token:C,factory:C.\u0275fac,providedIn:"root"})}}return C})(),m=(()=>{class C extends R{constructor(u){super(u)}schedule(...u){return this.zone.run(()=>this.scheduler.schedule.apply(this.scheduler,u))}static{this.\u0275fac=function(N){return new(N||C)(h.\u0275\u0275inject(h.NgZone))}}static{this.\u0275prov=h.\u0275\u0275defineInjectable({token:C,factory:C.\u0275fac,providedIn:"root"})}}return C})(),v=(()=>{class C{constructor(u,N){this.leave=u,this.enter=N}static{this.\u0275fac=function(N){return new(N||C)(h.\u0275\u0275inject(S),h.\u0275\u0275inject(m))}}static{this.\u0275prov=h.\u0275\u0275defineInjectable({token:C,factory:C.\u0275fac,providedIn:"root"})}}return C})(),E=(()=>{class C{constructor(u){this.ngZone=u,this.DEFAULT_REFRESH_INTERVAL=5e3,this.DEFAULT_DUE_TIME=0}get(u,N=this.DEFAULT_REFRESH_INTERVAL,M=this.DEFAULT_DUE_TIME){return(0,a.timer)(M,N,this.ngZone.leave).pipe((0,e.observeOn)(this.ngZone.enter),(0,e.switchMap)(u),(0,e.shareReplay)({refCount:!0,bufferSize:1}),(0,l.g)())}static{this.\u0275fac=function(N){return new(N||C)(h.\u0275\u0275inject(v))}}static{this.\u0275prov=h.\u0275\u0275defineInjectable({token:C,factory:C.\u0275fac,providedIn:"root"})}}return C})()},30540:(q,y,s)=>{s.d(y,{X:()=>R});var a=s(29841),e=s.n(a),l=s(87536);let R=(()=>{class S{constructor(){}findNode(v,E,C="id"){let d=null;return E.some(u=>d=e().get(u,C)===v?u:this.findNode(v,u.children||[],C)),d}expandNode(v,E){const C=e().cloneDeep(v),d=(M,I)=>M.map(O=>O.id===I.id?{...O,expanded:!0}:(O.children&&(O.children=d(O.children,I)),O));let u=d(C,E),N=this.findNode(E?.value?.parent,C);for(;N;)u=d(u,N),N=this.findNode(N?.value?.parent,C);return u}static{this.\u0275fac=function(E){return new(E||S)}}static{this.\u0275prov=l.\u0275\u0275defineInjectable({token:S,factory:S.\u0275fac,providedIn:"root"})}}return S})()},2361:(q,y,s)=>{s.d(y,{E:()=>h});var a=s(91974),l=s(54372);class h{constructor(S){this.base=S}static concatURLSegments(S){return S.reduce(a.Location.joinWithSlash)}static buildURL(S,...m){return h.concatURLSegments([...S?["/"]:[],...m])}getURL(S,m=!0,...v){return h.buildURL(m,this.base,S,...v)}getCreate(S=!0){return this.getURL(l.Qp.CREATE,S)}getCreateFrom(S,m=!0){return this.getURL(l.Qp.CREATE,m,S)}getDelete(S=!0){return this.getURL(l.Qp.DELETE,S)}getEdit(S,m=!0){return this.getURL(l.Qp.EDIT,m,S)}getUpdate(S,m=!0){return this.getURL(l.Qp.UPDATE,m,S)}getAdd(S=!0){return this.getURL(l.Qp.ADD,S)}getRemove(S=!0){return this.getURL(l.Qp.REMOVE,S)}getRecreate(S,m=!0){return this.getURL(l.Qp.RECREATE,m,S)}}},53075:(q,y,s)=>{s.d(y,{m:()=>S});var a=s(95631),l=s(87536);const R=[{stepIndex:0,isComplete:!1}];let S=(()=>{class m{constructor(){this.currentStep$=new a.BehaviorSubject(null),this.steps$=new a.BehaviorSubject(R),this.currentStep$.next(this.steps$.value[0])}setTotalSteps(E){const C=[];for(let d=0;d<E;d++)C.push({stepIndex:d,isComplete:!1});this.steps$=new a.BehaviorSubject(C)}setCurrentStep(E){this.currentStep$.next(E)}getCurrentStep(){return this.currentStep$.asObservable()}getSteps(){return this.steps$.asObservable()}moveToNextStep(){this.currentStep$.next(this.steps$.value[this.currentStep$.value.stepIndex+1])}moveToPreviousStep(){this.currentStep$.next(this.steps$.value[this.currentStep$.value.stepIndex-1])}isLastStep(){return this.currentStep$.value?.stepIndex===this.steps$.value.length-1}isFirstStep(){return 0===this.currentStep$.value?.stepIndex}static{this.\u0275fac=function(C){return new(C||m)}}static{this.\u0275prov=l.\u0275\u0275defineInjectable({token:m,factory:m.\u0275fac,providedIn:"root"})}}return m})()},93887:(q,y,s)=>{s.d(y,{G:()=>ie});var a=s(91974),l=s(53648),R=s(45451),m=s(25002),E=s(35855),C=s(45268),d=s(10522),u=s(21445),N=s(13421),M=s(42676),I=s(82254),O=s(12540),f=s(8990),g=s(90876),P=s(27202),A=s(87015),B=s(87536);let ie=(()=>{class Y{static{this.\u0275fac=function(Q){return new(Q||Y)}}static{this.\u0275mod=B.\u0275\u0275defineNgModule({type:Y})}static{this.\u0275inj=B.\u0275\u0275defineInjector({providers:[I.v,M.r,O.k,E._,A.BlockUIService],imports:[a.CommonModule,N.Y,C.h,d.h,u.h,l.ReactiveFormsModule,R.FormlyModule.forRoot({types:[{name:"array",component:f.o},{name:"object",component:g.G},{name:"input",component:P.R}],validationMessages:[{name:"required",message:"This field is required"}]}),m.FormlyBootstrapModule,A.BlockUIModule.forRoot(),C.h,N.Y,d.h,u.h]})}}return Y})()},50442:(q,y,s)=>{var a=s(5559),e=s(87536),l=s(91974),h=s(36618),R=s(98356),S=s(74737),m=s(76218),v=s(29841),E=s.n(v),C=s(84857),d=s(80697),u=s(50619);let N=class ca{constructor(c){this.http=c,this.baseURL="api/cephfs",this.baseUiURL="ui-api/cephfs"}list(){return this.http.get(`${this.baseURL}`)}lsDir(c,t,o=2){let i=`${this.baseUiURL}/${c}/ls_dir?depth=${o}`;return t&&(i+=`&path=${encodeURIComponent(t)}`),this.http.get(i).pipe((0,u.shareReplay)())}getCephfs(c){return this.http.get(`${this.baseURL}/${c}`)}getTabs(c){return this.http.get(`ui-api/cephfs/${c}/tabs`)}getClients(c){return this.http.get(`${this.baseURL}/${c}/clients`)}evictClient(c,t){return this.http.delete(`${this.baseURL}/${c}/client/${t}`)}getMdsCounters(c){return this.http.get(`${this.baseURL}/${c}/mds_counters`)}getFsRootDirectory(c){return this.http.get(`${this.baseURL}/${c}/get_root_directory`)}mkSnapshot(c,t,o){let i=new h.HttpParams;return i=i.append("path",t),E().isUndefined(o)||(i=i.append("name",o)),this.http.post(`${this.baseURL}/${c}/snapshot`,null,{params:i})}rmSnapshot(c,t,o){let i=new h.HttpParams;return i=i.append("path",t),i=i.append("name",o),this.http.delete(`${this.baseURL}/${c}/snapshot`,{params:i})}quota(c,t,o){let i=new h.HttpParams;return i=i.append("path",t),this.http.put(`${this.baseURL}/${c}/quota`,o,{observe:"response",params:i})}create(c,t,o="",i=""){return this.http.post(this.baseURL,{name:c,service_spec:t,data_pool:o,metadata_pool:i},{observe:"response"})}isCephFsPool(c){return-1!==E().indexOf(c.application_metadata,"cephfs")&&!c.pool_name.includes("/")}remove(c){return this.http.delete(`${this.baseURL}/remove/${c}`,{observe:"response"})}rename(c,t){return this.http.put(`${this.baseURL}/rename`,{name:c,new_name:t},{observe:"response"})}setAuth(c,t,o,i){return this.http.put(`${this.baseURL}/auth`,{fs_name:c,client_id:`client.${t}`,caps:o,root_squash:i})}getUsedPools(){return this.http.get(`${this.baseUiURL}/used-pools`)}static{this.\u0275fac=function(t){return new(t||ca)(e.\u0275\u0275inject(h.HttpClient))}}static{this.\u0275prov=e.\u0275\u0275defineInjectable({token:ca,factory:ca.\u0275fac,providedIn:"root"})}};N=(0,C.__decorate)([d.G,(0,C.__metadata)("design:paramtypes",[h.HttpClient])],N);var M=s(10978),I=s(25947),O=s(2148),f=s(54372),g=s(46045),P=s(84821),A=s(19380),_=s(82254),B=s(2361),w=s(50813),ie=s(85481),Y=s(88701),V=s(77317),L=s(3600),Q=s(59781),me=s(50889);const Ie=n=>({"text-wrap":n});function He(n,c){if(1&n&&(e.\u0275\u0275elementStart(0,"span",4),e.\u0275\u0275text(1,"\n      "),e.\u0275\u0275elementStart(2,"span",5),e.\u0275\u0275text(3),e.\u0275\u0275elementEnd(),e.\u0275\u0275text(4,"\n      "),e.\u0275\u0275element(5,"cd-copy-2-clipboard-button",6),e.\u0275\u0275text(6,"\n    "),e.\u0275\u0275elementEnd()),2&n){const t=c.$implicit,o=e.\u0275\u0275nextContext(2);e.\u0275\u0275advance(2),e.\u0275\u0275property("ngClass",e.\u0275\u0275pureFunction1(4,Ie,o.textWrap)),e.\u0275\u0275advance(),e.\u0275\u0275textInterpolate(t),e.\u0275\u0275advance(2),e.\u0275\u0275property("source",t)("byId",!1)}}function Ae(n,c){if(1&n&&(e.\u0275\u0275elementContainerStart(0),e.\u0275\u0275elementStart(1,"pre",2),e.\u0275\u0275text(2,"    "),e.\u0275\u0275template(3,He,7,6,"span",3),e.\u0275\u0275text(4,"\n  "),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementContainerEnd()),2&n){const t=e.\u0275\u0275nextContext();e.\u0275\u0275advance(3),e.\u0275\u0275property("ngForOf",t.codes)}}function We(n,c){if(1&n&&(e.\u0275\u0275elementStart(0,"pre",7),e.\u0275\u0275text(1,"    "),e.\u0275\u0275elementStart(2,"span",5),e.\u0275\u0275text(3),e.\u0275\u0275elementEnd(),e.\u0275\u0275text(4,"\n    "),e.\u0275\u0275element(5,"cd-copy-2-clipboard-button",6),e.\u0275\u0275text(6,"\n  "),e.\u0275\u0275elementEnd()),2&n){const t=e.\u0275\u0275nextContext();e.\u0275\u0275advance(2),e.\u0275\u0275property("ngClass",e.\u0275\u0275pureFunction1(4,Ie,t.textWrap)),e.\u0275\u0275advance(),e.\u0275\u0275textInterpolate(t.codes),e.\u0275\u0275advance(2),e.\u0275\u0275property("source",t.codes)("byId",!1)}}let te=(()=>{class n{constructor(){this.textWrap=!1,this.grayBg=!1}static{this.\u0275fac=function(o){return new(o||n)}}static{this.\u0275cmp=e.\u0275\u0275defineComponent({type:n,selectors:[["cd-code-block"]],inputs:{codes:"codes",textWrap:"textWrap",grayBg:"grayBg"},decls:3,vars:2,consts:[["singleCodeBlock",""],[4,"ngIf","ngIfElse"],["id","bigCodeBlock"],["class","d-flex px-2 py-3 align-items-center justify-content-between text-dark",4,"ngFor","ngForOf"],[1,"d-flex","px-2","py-3","align-items-center","justify-content-between","text-dark"],[3,"ngClass"],[3,"source","byId"],["id","singleCodeBlock",1,"d-flex","px-2","py-3","align-items-center","justify-content-between","text-dark"]],template:function(o,i){if(1&o&&e.\u0275\u0275template(0,Ae,5,1,"ng-container",1)(1,We,7,6,"ng-template",null,0,e.\u0275\u0275templateRefExtractor),2&o){const r=e.\u0275\u0275reference(2);e.\u0275\u0275property("ngIf",i.codes.length>1)("ngIfElse",r)}},dependencies:[l.NgClass,l.NgForOf,l.NgIf,me.N],styles:["pre[_ngcontent-%COMP%]{background-color:var(--gray-200);border-radius:.5rem}"]})}}return n})();const _e=["mountDetailsTpl"],oe=n=>[n];let de=(()=>{class n extends L.BaseModal{constructor(t){super(),this.activeModal=t,this.MOUNT_DIRECTORY="<MOUNT_DIRECTORY>"}ngOnInit(){this.mount=`sudo mount -t ceph <CLIENT_USER>@${this.mountData?.fsId}.${this.mountData?.fsName}=${this.mountData?.rootPath} ${this.MOUNT_DIRECTORY}`,this.fuse=`sudo ceph-fuse  ${this.MOUNT_DIRECTORY} -r ${this.mountData?.rootPath} --client_mds_namespace=${this.mountData?.fsName}`,this.nfs=`sudo mount -t nfs -o port=<PORT> <IP of active_nfs daemon>:<export_name> ${this.MOUNT_DIRECTORY}`}cancel(){this.closeModal()}static{this.\u0275fac=function(o){return new(o||n)(e.\u0275\u0275directiveInject(V.NgbActiveModal))}}static{this.\u0275cmp=e.\u0275\u0275defineComponent({type:n,selectors:[["cd-cephfs-mount-details"]],viewQuery:function(o,i){if(1&o&&e.\u0275\u0275viewQuery(_e,7),2&o){let r;e.\u0275\u0275queryRefresh(r=e.\u0275\u0275loadQuery())&&(i.mountDetailsTpl=r.first)}},features:[e.\u0275\u0275InheritDefinitionFeature],decls:15,vars:12,consts:()=>{let t,o,i,r;return t=$localize`:␟b71e3978ce17adca9d2c7f48670f5e76c0fa7797␟5644115040935740836: Attach commands `,o=$localize`:␟c0d9f85e384e672c9dc7a1a534cc0ae04df46061␟6105654291415432475: Using Mount command `,i=$localize`:␟8ef098553d92f46c3c26756efc92cf6f73c5726e␟7379242548105460995: Using FUSE command `,r=$localize`:␟27c29e7bca95bab4f6bd9e29e292fafb4157cd31␟6536029073310425543: Using NFS Command `,[t,o,i,r,["size","md",3,"overlaySelected","open"],[3,"closeSelect"],["cdsModalHeaderHeading",""],[1,"cds--modal-content"],[1,"fw-bold"],["textWrap","true",3,"codes"],[3,"backAction","modalForm","showSubmit"]]},template:function(o,i){1&o&&(e.\u0275\u0275elementStart(0,"cds-modal",4),e.\u0275\u0275listener("overlaySelected",function(){return i.closeModal()}),e.\u0275\u0275elementStart(1,"cds-modal-header",5),e.\u0275\u0275listener("closeSelect",function(){return i.closeModal()}),e.\u0275\u0275elementStart(2,"h3",6),e.\u0275\u0275i18n(3,0),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(4,"div",7)(5,"h5",8),e.\u0275\u0275i18n(6,1),e.\u0275\u0275elementEnd(),e.\u0275\u0275element(7,"cd-code-block",9),e.\u0275\u0275elementStart(8,"h5",8),e.\u0275\u0275i18n(9,2),e.\u0275\u0275elementEnd(),e.\u0275\u0275element(10,"cd-code-block",9),e.\u0275\u0275elementStart(11,"h5",8),e.\u0275\u0275i18n(12,3),e.\u0275\u0275elementEnd(),e.\u0275\u0275element(13,"cd-code-block",9),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(14,"cd-form-button-panel",10),e.\u0275\u0275listener("backAction",function(){return i.cancel()}),e.\u0275\u0275elementEnd()()),2&o&&(e.\u0275\u0275property("open",i.open),e.\u0275\u0275advance(7),e.\u0275\u0275property("codes",e.\u0275\u0275pureFunction1(6,oe,i.mount)),e.\u0275\u0275advance(3),e.\u0275\u0275property("codes",e.\u0275\u0275pureFunction1(8,oe,i.fuse)),e.\u0275\u0275advance(3),e.\u0275\u0275property("codes",e.\u0275\u0275pureFunction1(10,oe,i.nfs)),e.\u0275\u0275advance(),e.\u0275\u0275property("modalForm",!0)("showSubmit",!1))},dependencies:[Q.e,te,L.Modal,L.ModalHeader,L.ModalHeaderHeading]})}}return n})(),ue=(()=>{class n{constructor(t){this.http=t}getFullHealth(){return this.http.get("api/health/full")}getMinimalHealth(){return this.http.get("api/health/minimal")}getClusterCapacity(){return this.http.get("api/health/get_cluster_capacity")}getClusterFsid(){return this.http.get("api/health/get_cluster_fsid")}getOrchestratorName(){return this.http.get("api/health/get_orchestrator_name")}getTelemetryStatus(){return this.http.get("api/health/get_telemetry_status")}static{this.\u0275fac=function(o){return new(o||n)(e.\u0275\u0275inject(h.HttpClient))}}static{this.\u0275prov=e.\u0275\u0275defineInjectable({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();var T=s(53648),K=s(95631);let fe=(()=>{class n{constructor(t){this.cephFsService=t,this._directoryStoreSubject=new K.BehaviorSubject({}),this.directoryStore$=this._directoryStoreSubject.asObservable(),this.stopDirectoryPolling=new K.Subject,this.isLoading=!0}loadDirectories(t,o="/",i=3){this.directoryStore$.pipe((0,u.filter)(r=>!r[t]),(0,u.switchMap)(()=>(0,K.timer)(0,6e5).pipe((0,u.switchMap)(()=>this.cephFsService.lsDir(t,o,i).pipe((0,u.tap)(r=>{this.isLoading=!1,this._directoryStoreSubject.next({[t]:r})}))),(0,u.retry)(),(0,u.share)(),(0,u.takeUntil)(this.stopDirectoryPolling)))).subscribe()}search(t,o,i=5){return this.directoryStore$.pipe((0,u.map)(r=>{const p=new RegExp(t,"gi");return r[o].filter(D=>p.test(D.path)).map(D=>D.path).slice(0,i)}))}stopPollingDictories(){this.stopDirectoryPolling.next()}static{this.\u0275fac=function(o){return new(o||n)(e.\u0275\u0275inject(N))}}static{this.\u0275prov=e.\u0275\u0275defineInjectable({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();var Te=s(74902),Se=s(58384),Ge=s(94254),Ye=s(64333),ct=s(23603),rt=s(56677),De=s(90476),ze=s(37966),Et=s(51862),Oe=s(37353);function pt(n,c){1&n&&(e.\u0275\u0275elementStart(0,"span",31),e.\u0275\u0275i18n(1,10),e.\u0275\u0275elementEnd())}function ye(n,c){if(1&n&&e.\u0275\u0275template(0,pt,2,0,"span",30),2&n){e.\u0275\u0275nextContext();const t=e.\u0275\u0275reference(3),o=e.\u0275\u0275nextContext();e.\u0275\u0275property("ngIf",o.form.showError("fsName",t,"required"))}}function je(n,c){if(1&n){const t=e.\u0275\u0275getCurrentView();e.\u0275\u0275text(0," You can manage users from "),e.\u0275\u0275elementStart(1,"a",32),e.\u0275\u0275listener("click",function(){e.\u0275\u0275restoreView(t);const i=e.\u0275\u0275nextContext(2);return e.\u0275\u0275resetView(i.closeModal())}),e.\u0275\u0275text(2,"Ceph Users"),e.\u0275\u0275elementEnd(),e.\u0275\u0275text(3," page ")}}function ot(n,c){1&n&&(e.\u0275\u0275elementStart(0,"span",31),e.\u0275\u0275i18n(1,11),e.\u0275\u0275elementEnd())}function tt(n,c){if(1&n&&e.\u0275\u0275template(0,ot,2,0,"span",30),2&n){e.\u0275\u0275nextContext();const t=e.\u0275\u0275reference(3),o=e.\u0275\u0275nextContext();e.\u0275\u0275property("ngIf",o.form.showError("userId",t,"required"))}}function Ft(n,c){1&n&&(e.\u0275\u0275elementStart(0,"span",31),e.\u0275\u0275i18n(1,12),e.\u0275\u0275elementEnd())}function bt(n,c){if(1&n&&e.\u0275\u0275template(0,Ft,2,0,"span",30),2&n){e.\u0275\u0275nextContext();const t=e.\u0275\u0275reference(3),o=e.\u0275\u0275nextContext();e.\u0275\u0275property("ngIf",o.form.showError("directory",t,"required"))}}function wt(n,c){if(1&n&&(e.\u0275\u0275elementStart(0,"cd-help-text"),e.\u0275\u0275text(1),e.\u0275\u0275elementEnd()),2&n){const t=e.\u0275\u0275nextContext().$implicit;e.\u0275\u0275advance(),e.\u0275\u0275textInterpolate1(" ",t.description," ")}}function zt(n,c){if(1&n&&(e.\u0275\u0275elementContainerStart(0),e.\u0275\u0275elementStart(1,"cds-checkbox",33),e.\u0275\u0275text(2),e.\u0275\u0275pipe(3,"titlecase"),e.\u0275\u0275template(4,wt,2,1,"cd-help-text",34),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementContainerEnd()),2&n){const t=c.$implicit;e.\u0275\u0275advance(),e.\u0275\u0275property("id",t.name)("name",t.name)("formControlName",t.name),e.\u0275\u0275advance(),e.\u0275\u0275textInterpolate1(" ",e.\u0275\u0275pipeBind1(3,5,t.name)," "),e.\u0275\u0275advance(2),e.\u0275\u0275property("ngIf",t.description)}}function Xt(n,c){if(1&n){const t=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementContainerStart(0),e.\u0275\u0275elementStart(1,"section",17)(2,"form",18,0)(4,"div",19)(5,"cds-text-label",20),e.\u0275\u0275i18nStart(6,6),e.\u0275\u0275element(7,"input",21),e.\u0275\u0275i18nEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275template(8,ye,1,1,"ng-template",null,1,e.\u0275\u0275templateRefExtractor),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(10,"div",19)(11,"cds-text-label",22),e.\u0275\u0275i18nStart(12,7),e.\u0275\u0275element(13,"input",23)(14,"input",24),e.\u0275\u0275i18nEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275template(15,je,4,0,"ng-template",null,2,e.\u0275\u0275templateRefExtractor)(17,tt,1,1,"ng-template",null,3,e.\u0275\u0275templateRefExtractor),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(19,"div",19)(20,"cds-text-label",25),e.\u0275\u0275i18nStart(21,8),e.\u0275\u0275element(22,"input",26),e.\u0275\u0275i18nEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275template(23,bt,1,1,"ng-template",null,4,e.\u0275\u0275templateRefExtractor),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(25,"div",19)(26,"fieldset")(27,"label",27),e.\u0275\u0275i18n(28,9),e.\u0275\u0275elementEnd(),e.\u0275\u0275template(29,zt,5,7,"ng-container",28),e.\u0275\u0275elementEnd()()()(),e.\u0275\u0275elementStart(30,"cd-form-button-panel",29),e.\u0275\u0275pipe(31,"titlecase"),e.\u0275\u0275listener("submitActionEvent",function(){e.\u0275\u0275restoreView(t);const i=e.\u0275\u0275nextContext();return e.\u0275\u0275resetView(i.onSubmit())}),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementContainerEnd()}if(2&n){const t=e.\u0275\u0275reference(9),o=e.\u0275\u0275reference(16),i=e.\u0275\u0275reference(18),r=e.\u0275\u0275reference(24),p=e.\u0275\u0275nextContext();e.\u0275\u0275advance(2),e.\u0275\u0275property("formGroup",p.form),e.\u0275\u0275advance(3),e.\u0275\u0275property("invalid",!p.form.controls.fsName.valid&&p.form.controls.fsName.dirty)("invalidText",t),e.\u0275\u0275advance(2),e.\u0275\u0275property("invalid",!p.form.controls.fsName.valid&&p.form.controls.fsName.dirty),e.\u0275\u0275advance(4),e.\u0275\u0275property("helperText",o)("invalid",!p.form.controls.userId.valid&&p.form.controls.userId.dirty)("invalidText",i),e.\u0275\u0275advance(3),e.\u0275\u0275property("invalid",!p.form.controls.userId.valid&&p.form.controls.userId.dirty),e.\u0275\u0275advance(6),e.\u0275\u0275property("invalid",!p.form.controls.directory.valid&&p.form.controls.directory.dirty)("invalidText",r)("skeleton",p.directoryStore.isLoading),e.\u0275\u0275advance(2),e.\u0275\u0275property("placeholder",p.directoryStore.isLoading?"":"Directory path")("skeleton",p.directoryStore.isLoading)("invalid",!p.form.controls.directory.valid&&p.form.controls.directory.dirty)("ngbTypeahead",p.search),e.\u0275\u0275advance(7),e.\u0275\u0275property("ngForOf",p.clientPermissions),e.\u0275\u0275advance(),e.\u0275\u0275property("form",p.form)("submitText",e.\u0275\u0275pipeBind1(31,19,p.action))("modalForm",!0)}}let jt=(()=>{class n extends Te.g{constructor(t,o,i,r,p,F,D,x){super(),this.actionLabels=t,this.directoryStore=o,this.cephfsService=i,this.taskWrapper=r,this.modalService=p,this.changeDetectorRef=F,this.fsName=D,this.id=x,this.isDefaultSubvolumeGroup=!1,this.isSubvolume=!1,this.icons=g.FI,this.clientPermissions=[{name:"read",description:$localize`Read permission is the minimum givable access`},{name:"write",description:$localize`Permission to set layouts or quotas, write access needed`},{name:"quota",description:$localize`Permission to set layouts or quotas, write access needed`},{name:"snapshot",description:$localize`Permission to create or delete snapshots, write access needed`},{name:"rootSquash",description:$localize`Safety measure to prevent scenarios such as accidental sudo rm -rf /path`}],this.search=H=>H.pipe((0,u.debounceTime)(300),(0,u.distinctUntilChanged)(),(0,u.switchMap)(X=>this.directoryStore.search(X,this.id).pipe((0,u.catchError)(()=>(0,K.of)([]))))),this.action=this.actionLabels.UPDATE,this.resource=$localize`access`}ngAfterViewInit(){this.changeDetectorRef.detectChanges()}ngOnInit(){this.directoryStore.loadDirectories(this.id,"/",3),this.createForm(),this.loadingReady(),this.form.get("directory").disable()}createForm(){this.form=new Se.$({fsName:new T.FormControl({value:this.fsName,disabled:!0},{validators:[T.Validators.required]}),directory:new T.FormControl(void 0,{updateOn:"blur",validators:[T.Validators.required]}),userId:new T.FormControl(void 0,{validators:[T.Validators.required]}),read:new T.FormControl({value:!0,disabled:!0},{validators:[T.Validators.required]}),write:new T.FormControl(void 0),snapshot:new T.FormControl({value:!1,disabled:!0}),quota:new T.FormControl({value:!1,disabled:!0}),rootSquash:new T.FormControl(void 0)})}onSubmit(){const t=this.form.getValue("userId"),o=[this.form.getValue("directory"),this.transformPermissions()],i=this.form.getValue("rootSquash");this.taskWrapper.wrapTaskAroundCall({task:new ie.O("cephfs/auth",{clientId:t}),call:this.cephfsService.setAuth(this.fsName,t,o,i)}).subscribe({error:()=>this.form.setErrors({cdSubmitButton:!0}),complete:()=>{this.modalService.dismissAll()}})}transformPermissions(){const t=this.form.getValue("write"),o=this.form.getValue("snapshot");return`r${t?"w":""}${this.form.getValue("quota")?"p":""}${o?"s":""}`}toggleFormControl(){const t=this.form.get("snapshot"),o=this.form.get("quota");t.disabled?t.enable():t.disable(),o.disabled?o.enable():o.disable()}static{this.\u0275fac=function(o){return new(o||n)(e.\u0275\u0275directiveInject(f.Ss),e.\u0275\u0275directiveInject(fe),e.\u0275\u0275directiveInject(N),e.\u0275\u0275directiveInject(w.a),e.\u0275\u0275directiveInject(Ge.V),e.\u0275\u0275directiveInject(e.ChangeDetectorRef),e.\u0275\u0275directiveInject("fsName",8),e.\u0275\u0275directiveInject("id",8))}}static{this.\u0275cmp=e.\u0275\u0275defineComponent({type:n,selectors:[["cd-cephfs-auth-modal"]],features:[e.\u0275\u0275InheritDefinitionFeature],decls:7,vars:8,consts:()=>{let t,o,i,r,p,F,D,x,H,X,Z;return t=$localize`:␟fb127ea03835b3230f0ed981c7080e2ccb879621␟3346778808274133574:${"\ufffd0\ufffd"}:INTERPOLATION: ${"\ufffd1\ufffd"}:INTERPOLATION_1:`,o=$localize`:␟2fecea01ce1d44114ee45144eff6d47a5016a74f␟5451140586403689891:Name...`,i=$localize`:␟2fecea01ce1d44114ee45144eff6d47a5016a74f␟5451140586403689891:Name...`,r=$localize`:␟3eeab96c6140147b145ff2005d1bb8ed2763709f␟827891333349149741:Path to restrict access to`,p=$localize`:␟6bcc5a40c7d2e882440e36fc81e9711fe82a6da1␟8021764855175733495:FS name ${"\ufffd#7\ufffd\ufffd/#7\ufffd"}:TAG_INPUT:`,F=$localize`:␟2ea56900ce0a6cb6d1740cb9a624684cc31271dd␟5295054868828749294:User ID ${"\ufffd#13\ufffd\ufffd/#13\ufffd"}:TAG_INPUT:${"\ufffd#14\ufffd\ufffd/#14\ufffd"}:TAG_INPUT_1:`,D=$localize`:␟2bdadc765959d013f0661e656884d5ea020bff1c␟3038934722661796355:Directory ${"\ufffd#22\ufffd\ufffd/#22\ufffd"}:TAG_INPUT:`,x=$localize`:␟70f45880fce6ac5d8e468e25e82aefbba8098cfe␟7314814725704332646:Permissions`,H=$localize`:␟7cbdabcece469fab89cfa687ab152bca18b97498␟1417693714872528491:This field is required.`,X=$localize`:␟7cbdabcece469fab89cfa687ab152bca18b97498␟1417693714872528491:This field is required.`,Z=$localize`:␟7cbdabcece469fab89cfa687ab152bca18b97498␟1417693714872528491:This field is required.`,[["formDir","ngForm"],["fsNameError",""],["userIdHelperText",""],["userIdError",""],["directoryError",""],t,p,F,D,x,H,X,Z,["size","md",3,"overlaySelected","open"],[3,"closeSelect"],["cdsModalHeaderHeading",""],[4,"cdFormLoading"],[1,"cds--modal-content"],["name","form",3,"formGroup"],[1,"form-item"],["for","fsName","cdRequiredField","FS name",3,"invalid","invalidText"],["cdsText","","placeholder",o,"id","fsName","name","fsName","formControlName","fsName","size","sm","autofocus","",3,"invalid"],["for","userId","cdRequiredField","User ID",3,"helperText","invalid","invalidText"],["cdsText","","value","client.","readonly",""],["cdsText","","placeholder",i,"id","userId","name","userId","formControlName","userId",3,"invalid"],["for","directory","cdRequiredField","Directory","helperText",r,3,"invalid","invalidText","skeleton"],["cdsText","","type","text","id","directory","name","directory","formControlName","directory",3,"placeholder","skeleton","invalid","ngbTypeahead"],[1,"cds--label"],[4,"ngFor","ngForOf"],[3,"submitActionEvent","form","submitText","modalForm"],["class","invalid-feedback",4,"ngIf"],[1,"invalid-feedback"],["routerLink","/ceph-users",3,"click"],[3,"id","name","formControlName"],[4,"ngIf"]]},template:function(o,i){1&o&&(e.\u0275\u0275elementStart(0,"cds-modal",13),e.\u0275\u0275listener("overlaySelected",function(){return i.closeModal()}),e.\u0275\u0275elementStart(1,"cds-modal-header",14),e.\u0275\u0275listener("closeSelect",function(){return i.closeModal()}),e.\u0275\u0275elementStart(2,"h3",15),e.\u0275\u0275i18n(3,5),e.\u0275\u0275pipe(4,"titlecase"),e.\u0275\u0275pipe(5,"upperFirst"),e.\u0275\u0275elementEnd()(),e.\u0275\u0275template(6,Xt,32,21,"ng-container",16),e.\u0275\u0275elementEnd()),2&o&&(e.\u0275\u0275property("open",i.open),e.\u0275\u0275advance(5),e.\u0275\u0275i18nExp(e.\u0275\u0275pipeBind1(4,4,i.action))(e.\u0275\u0275pipeBind1(5,6,i.resource)),e.\u0275\u0275i18nApply(3),e.\u0275\u0275advance(),e.\u0275\u0275property("cdFormLoading",i.loading))},dependencies:[l.NgForOf,l.NgIf,Q.e,Ye.O,ct.B,rt.G,De.S,ze.E,Et.P,m.RouterLink,T.\u0275NgNoValidate,T.DefaultValueAccessor,T.NgControlStatus,T.NgControlStatusGroup,T.FormGroupDirective,T.FormControlName,V.NgbTypeahead,L.TextInputLabelComponent,L.TextInput,L.Checkbox,L.Modal,L.ModalHeader,L.ModalHeaderHeading,l.TitleCasePipe,Oe.r]})}}return n})();var Tt=s(22453),gt=s(1505),it=s(92805),Ke=s(62847),dt=s(32295),Ct=s(45843),Wt=s(2243),en=s(29130),yt=s(62988),mt=s(73651),Gt=s(18457),Lt=s(68316),Pt=s(37823),En=s(89939),lt=s.n(En),Kt=(s(58793),s(75721)),dn=s(77847),Nt=s(6783);const gn=["chartCanvas"],Cn=["chartTooltip"];let W=(()=>{class n{constructor(){this.lhsCounter="mds_mem.ino",this.rhsCounter="mds_server.handle_client_request",this.chart={datasets:[{label:this.lhsCounter,yAxisID:"LHS",data:[],tension:.1,fill:{target:"origin"}},{label:this.rhsCounter,yAxisID:"RHS",data:[],tension:.1,fill:{target:"origin"}}],options:{plugins:{title:{text:"",display:!0},tooltip:{enabled:!1,mode:"index",intersect:!1,position:"nearest",callbacks:{title:t=>{let o="";return t.length>0&&(o=t[0].label),lt()(o).format("LTS")}}},legend:{position:"top"}},responsive:!0,maintainAspectRatio:!1,scales:{x:{position:"top",type:"time",time:{displayFormats:{quarter:"MMM YYYY"}},ticks:{maxRotation:0}},LHS:{type:"linear",position:"left"},RHS:{type:"linear",position:"right"}}},chartType:"line"},Kt.Chart.register(...Kt.registerables)}ngOnInit(){E().isUndefined(this.mdsCounter)||(this.setChartTooltip(),this.updateChart())}ngOnChanges(){E().isUndefined(this.mdsCounter)||this.updateChart()}setChartTooltip(){const t=new dn.I(this.chartCanvas,this.chartTooltip,i=>i.caretX+"px",i=>i.caretY-i.height-23+"px");t.checkOffset=!0;const o={title:{text:this.mdsCounter.name},tooltip:{external:i=>t.customTooltips(i)}};E().merge(this.chart,{options:{plugins:o}})}updateChart(){const t=[{data:this.convertTimeSeries(this.mdsCounter[this.lhsCounter])},{data:this.deltaTimeSeries(this.mdsCounter[this.rhsCounter])}];E().merge(this.chart,{datasets:t}),this.chart.datasets=[...this.chart.datasets]}convertTimeSeries(t){const o=[];return E().each(t,i=>{o.push({x:1e3*i[0],y:i[1]})}),o.shift(),o}deltaTimeSeries(t){let o,i=t[0];const r=[];for(o=1;o<t.length;o++){const p=t[o];r.push({x:1e3*p[0],y:p[1]-i[1]}),i=p}return r}static{this.\u0275fac=function(o){return new(o||n)}}static{this.\u0275cmp=e.\u0275\u0275defineComponent({type:n,selectors:[["cd-cephfs-chart"]],viewQuery:function(o,i){if(1&o&&(e.\u0275\u0275viewQuery(gn,7),e.\u0275\u0275viewQuery(Cn,7)),2&o){let r;e.\u0275\u0275queryRefresh(r=e.\u0275\u0275loadQuery())&&(i.chartCanvas=r.first),e.\u0275\u0275queryRefresh(r=e.\u0275\u0275loadQuery())&&(i.chartTooltip=r.first)}},inputs:{mdsCounter:"mdsCounter"},features:[e.\u0275\u0275NgOnChangesFeature],decls:6,vars:3,consts:[["chartCanvas",""],["chartTooltip",""],[1,"chart-container"],["baseChart","",3,"datasets","options","type"],[1,"chartjs-tooltip"]],template:function(o,i){1&o&&(e.\u0275\u0275elementStart(0,"div",2),e.\u0275\u0275element(1,"canvas",3,0),e.\u0275\u0275elementStart(3,"div",4,1),e.\u0275\u0275element(5,"table"),e.\u0275\u0275elementEnd()()),2&o&&(e.\u0275\u0275advance(),e.\u0275\u0275property("datasets",i.chart.datasets)("options",i.chart.options)("type",i.chart.chartType))},dependencies:[Nt.BaseChartDirective],styles:['.chart-container[_ngcontent-%COMP%]{cursor:pointer;margin:auto;overflow:visible;position:absolute}canvas[_ngcontent-%COMP%]{user-select:none}.chartjs-tooltip[_ngcontent-%COMP%]{background:#000000b3;border-radius:3px;color:#fff;font-family:Helvetica Neue,Helvetica,Arial,sans-serif!important;opacity:0;pointer-events:none;position:absolute;transform:translate(-50%);transition:all .1s ease}.chartjs-tooltip.transform-left[_ngcontent-%COMP%]{transform:translate(-10%)}.chartjs-tooltip.transform-left[_ngcontent-%COMP%]:after{left:10%}.chartjs-tooltip.transform-right[_ngcontent-%COMP%]{transform:translate(-90%)}.chartjs-tooltip.transform-right[_ngcontent-%COMP%]:after{left:90%}.chartjs-tooltip[_ngcontent-%COMP%]:after{border-color:#000 transparent transparent transparent;border-style:solid;border-width:5px;content:" ";left:50%;margin-left:-5px;position:absolute;top:100%}  .chartjs-tooltip-key{display:inline-block;height:10px;margin-right:10px;width:10px}.chart-container[_ngcontent-%COMP%]{height:500px;margin-bottom:20px;position:relative;width:100%}']})}}return n})();const Re=["poolUsageTpl"],J=["activityTmpl"];function ut(n,c){if(1&n&&(e.\u0275\u0275elementStart(0,"div",6)(1,"div",12),e.\u0275\u0275element(2,"cd-cephfs-chart",13),e.\u0275\u0275elementEnd()()),2&n){const t=c.$implicit;e.\u0275\u0275advance(2),e.\u0275\u0275property("mdsCounter",t)}}function ht(n,c){if(1&n&&e.\u0275\u0275element(0,"cd-usage-bar",14),2&n){const t=c.data.row;e.\u0275\u0275property("total",t.size)("used",t.used)("title",t.pool_name)}}function Gn(n,c){1&n&&(e.\u0275\u0275text(0),e.\u0275\u0275pipe(1,"dimless")),2&n&&e.\u0275\u0275textInterpolate2(" ","standby-replay"===c.data.row.state?"Evts":"Reqs",": ",e.\u0275\u0275pipeBind1(1,2,c.data.value)," /s\n")}let Hn=(()=>{class n{constructor(t,o){this.dimlessBinary=t,this.dimless=o,this.standbys=[],this.objectValues=Object.values}ngOnChanges(){this.setStandbys()}setStandbys(){this.standbys=[{key:$localize`Standby daemons`,value:this.data.standbys}]}ngOnInit(){this.columns={ranks:[{prop:"rank",name:$localize`Rank`},{prop:"state",name:$localize`State`},{prop:"mds",name:$localize`Daemon`},{prop:"activity",name:$localize`Activity`,cellTemplate:this.activityTmpl},{prop:"dns",name:$localize`Dentries`,pipe:this.dimless},{prop:"inos",name:$localize`Inodes`,pipe:this.dimless},{prop:"dirs",name:$localize`Dirs`,pipe:this.dimless},{prop:"caps",name:$localize`Caps`,pipe:this.dimless}],pools:[{prop:"pool",name:$localize`Pool`},{prop:"type",name:$localize`Type`},{prop:"size",name:$localize`Size`,pipe:this.dimlessBinary},{name:$localize`Usage`,cellTemplate:this.poolUsageTpl,comparator:(t,o,i,r)=>{const p=i.used/i.avail,F=r.used/r.avail;return p===F?0:p>F?1:-1}}]}}trackByFn(t,o){return o.name}static{this.\u0275fac=function(o){return new(o||n)(e.\u0275\u0275directiveInject(mt.l),e.\u0275\u0275directiveInject(Gt.u))}}static{this.\u0275cmp=e.\u0275\u0275defineComponent({type:n,selectors:[["cd-cephfs-detail"]],viewQuery:function(o,i){if(1&o&&(e.\u0275\u0275viewQuery(Re,7),e.\u0275\u0275viewQuery(J,7)),2&o){let r;e.\u0275\u0275queryRefresh(r=e.\u0275\u0275loadQuery())&&(i.poolUsageTpl=r.first),e.\u0275\u0275queryRefresh(r=e.\u0275\u0275loadQuery())&&(i.activityTmpl=r.first)}},inputs:{data:"data"},features:[e.\u0275\u0275NgOnChangesFeature],decls:19,vars:9,consts:()=>{let t,o,i,r;return t=$localize`:␟0c1e17956453ad772dbe82d6946f62748c692f3e␟1479454036301620775:Ranks`,o=$localize`:␟92899fa68e8ca108912163ff58edc8540e453787␟8231861638104479971:Pools`,i=$localize`:␟2b24e0b0b1629d2e8a51b9da7c75d6e6379f4bc4␟3728117452833208180:Standbys`,r=$localize`:␟50df62325726db950523a5be1c78b8905fcc25d4␟6852105836099396203:MDS performance counters`,[["poolUsageTpl",""],["activityTmpl",""],t,o,i,r,[1,"row"],[1,"col-sm-8"],[3,"data","columns","toolHeader"],[1,"col-sm-4"],[3,"data"],["class","row",4,"ngFor","ngForOf","ngForTrackBy"],[1,"col-md-12"],[3,"mdsCounter"],[3,"total","used","title"]]},template:function(o,i){1&o&&(e.\u0275\u0275elementStart(0,"div",6)(1,"div",7)(2,"legend"),e.\u0275\u0275i18n(3,2),e.\u0275\u0275elementEnd(),e.\u0275\u0275element(4,"cd-table",8),e.\u0275\u0275elementStart(5,"legend"),e.\u0275\u0275i18n(6,3),e.\u0275\u0275elementEnd(),e.\u0275\u0275element(7,"cd-table",8),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(8,"div",9)(9,"legend"),e.\u0275\u0275i18n(10,4),e.\u0275\u0275elementEnd(),e.\u0275\u0275element(11,"cd-table-key-value",10),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(12,"legend"),e.\u0275\u0275i18n(13,5),e.\u0275\u0275elementEnd(),e.\u0275\u0275template(14,ut,3,1,"div",11)(15,ht,1,3,"ng-template",null,0,e.\u0275\u0275templateRefExtractor)(17,Gn,2,4,"ng-template",null,1,e.\u0275\u0275templateRefExtractor)),2&o&&(e.\u0275\u0275advance(4),e.\u0275\u0275property("data",i.data.ranks)("columns",i.columns.ranks)("toolHeader",!1),e.\u0275\u0275advance(3),e.\u0275\u0275property("data",i.data.pools)("columns",i.columns.pools)("toolHeader",!1),e.\u0275\u0275advance(4),e.\u0275\u0275property("data",i.standbys),e.\u0275\u0275advance(3),e.\u0275\u0275property("ngForOf",i.objectValues(i.data.mdsCounters))("ngForTrackBy",i.trackByFn))},dependencies:[l.NgForOf,Lt.o,Ke.O,Pt.i,W,Gt.u],styles:[".progress[_ngcontent-%COMP%]{margin-bottom:0}"]})}}return n})();var Le=s(88285);let Vn=(()=>{class n extends L.BaseModal{constructor(t,o,i,r,p){super(),this.cephfsService=t,this.modalService=o,this.notificationService=i,this.authStorageService=r,this.actionLabels=p,this.triggerApiUpdate=new e.EventEmitter,this.selection=new A.y,this.permission=this.authStorageService.getPermissions().cephfs,this.tableActions=[{permission:"update",icon:g.FI.signOut,click:()=>this.evictClientModal(),name:this.actionLabels.EVICT}]}ngOnInit(){this.columns=[{prop:"id",name:$localize`id`},{prop:"type",name:$localize`type`},{prop:"state",name:$localize`state`},{prop:"version",name:$localize`version`},{prop:"hostname",name:$localize`Host`},{prop:"root",name:$localize`root`}]}updateSelection(t){this.selection=t}evictClient(t){this.cephfsService.evictClient(this.id,t).subscribe(()=>{this.triggerApiUpdate.emit(),this.closeModal(),this.notificationService.show(Le._.success,$localize`Evicted client '${t}'`)},()=>{this.modalRef.componentInstance.stopLoadingSpinner()})}evictClientModal(){const t=this.selection.first().id;this.modalRef=this.modalService.show(P.D,{itemDescription:"client",itemNames:[t],actionDescription:"evict",submitAction:()=>this.evictClient(t)})}static{this.\u0275fac=function(o){return new(o||n)(e.\u0275\u0275directiveInject(N),e.\u0275\u0275directiveInject(Ge.V),e.\u0275\u0275directiveInject(Y.J),e.\u0275\u0275directiveInject(_.v),e.\u0275\u0275directiveInject(f.Ss))}}static{this.\u0275cmp=e.\u0275\u0275defineComponent({type:n,selectors:[["cd-cephfs-clients"]],inputs:{id:"id",clients:"clients"},outputs:{triggerApiUpdate:"triggerApiUpdate"},features:[e.\u0275\u0275InheritDefinitionFeature],decls:2,vars:7,consts:[["selectionType","single",3,"fetchData","updateSelection","data","columns","status","autoReload"],[1,"table-actions",3,"permission","selection","tableActions"]],template:function(o,i){1&o&&(e.\u0275\u0275elementStart(0,"cd-table",0),e.\u0275\u0275listener("fetchData",function(){return i.triggerApiUpdate.emit()})("updateSelection",function(p){return i.updateSelection(p)}),e.\u0275\u0275element(1,"cd-table-actions",1),e.\u0275\u0275elementEnd()),2&o&&(e.\u0275\u0275property("data",i.clients.data)("columns",i.columns)("status",i.clients.status)("autoReload",-1),e.\u0275\u0275advance(),e.\u0275\u0275property("permission",i.permission)("selection",i.selection)("tableActions",i.tableActions))},dependencies:[Ke.O,dt.j]})}}return n})();var Sn=s(73308),un=s(34177),Qt=s(62431),ge=s(3687),Ht=s(71138),Bn=s(30540);const zn=["origin"],Mn=(n,c)=>[n,c];function Xn(n,c){if(1&n&&(e.\u0275\u0275elementStart(0,"div"),e.\u0275\u0275element(1,"i",8),e.\u0275\u0275elementEnd()),2&n){const t=e.\u0275\u0275nextContext();e.\u0275\u0275advance(),e.\u0275\u0275property("ngClass",e.\u0275\u0275pureFunction2(1,Mn,t.icons.spinner,t.icons.spin))}}function kn(n,c){if(1&n){const t=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementContainerStart(0),e.\u0275\u0275elementStart(1,"legend"),e.\u0275\u0275i18n(2,2),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(3,"cd-table",17),e.\u0275\u0275listener("updateSelection",function(i){e.\u0275\u0275restoreView(t);const r=e.\u0275\u0275nextContext(2);return e.\u0275\u0275resetView(r.quota.updateSelection(i))}),e.\u0275\u0275element(4,"cd-table-actions",18),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementContainerEnd()}if(2&n){const t=e.\u0275\u0275nextContext(2);e.\u0275\u0275advance(3),e.\u0275\u0275property("data",t.settings)("columns",t.quota.columns)("limit",0)("footer",!1)("onlyActionHeader",!0)("forceIdentifier",!0)("toolHeader",!1),e.\u0275\u0275advance(),e.\u0275\u0275property("permission",t.permission)("selection",t.quota.selection)("tableActions",t.quota.tableActions)}}function jn(n,c){if(1&n){const t=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"div",13)(1,"div",5)(2,"div",6),e.\u0275\u0275text(3),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(4,"div",14),e.\u0275\u0275template(5,kn,5,10,"ng-container",11),e.\u0275\u0275elementStart(6,"legend"),e.\u0275\u0275i18n(7,1),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(8,"cd-table",15),e.\u0275\u0275listener("updateSelection",function(i){e.\u0275\u0275restoreView(t);const r=e.\u0275\u0275nextContext();return e.\u0275\u0275resetView(r.snapshot.updateSelection(i))}),e.\u0275\u0275element(9,"cd-table-actions",16),e.\u0275\u0275elementEnd()()()()}if(2&n){const t=e.\u0275\u0275nextContext();e.\u0275\u0275advance(3),e.\u0275\u0275textInterpolate1(" ",t.selectedDir.path," "),e.\u0275\u0275advance(2),e.\u0275\u0275property("ngIf","/"!==t.selectedDir.path),e.\u0275\u0275advance(3),e.\u0275\u0275property("data",t.selectedDir.snapshots)("columns",t.snapshot.columns),e.\u0275\u0275advance(),e.\u0275\u0275property("permission",t.permission)("selection",t.snapshot.selection)("tableActions",t.snapshot.tableActions)}}function Wn(n,c){if(1&n){const t=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"span",19),e.\u0275\u0275listener("click",function(){const i=e.\u0275\u0275restoreView(t).data.value,r=e.\u0275\u0275nextContext();return e.\u0275\u0275resetView(r.selectOrigin(i))}),e.\u0275\u0275text(1),e.\u0275\u0275elementEnd()}if(2&n){const t=c.data.value;e.\u0275\u0275advance(),e.\u0275\u0275textInterpolate(t)}}let Kn=(()=>{class n{constructor(t,o,i,r,p,F,D,x){this.authStorageService=t,this.modalService=o,this.cephfsService=i,this.cdDatePipe=r,this.actionLabels=p,this.notificationService=F,this.dimlessBinaryPipe=D,this.treeViewService=x,this.icons=g.FI,this.loadingIndicator=!1,this.loading={},this.nodes=[]}selectNode(t){var o=this;return(0,Sn.A)(function*(){o.selectedDir=o.getDirectory(t),"/"!==t.id&&(o.setSettings(t),yield o.updateDirectory(t.id),o.nodes=o.treeViewService.expandNode(o.nodes,t))})()}ngOnInit(){this.permission=this.authStorageService.getPermissions().cephfs,this.setUpQuotaTable(),this.setUpSnapshotTable()}setUpQuotaTable(){this.quota={columns:[{prop:"row.name",name:$localize`Name`,flexGrow:1},{prop:"row.value",name:$localize`Value`,sortable:!1,flexGrow:1},{prop:"row.originPath",name:$localize`Origin`,sortable:!1,cellTemplate:this.originTmpl,flexGrow:1}],selection:new A.y,updateSelection:t=>{this.quota.selection=t},tableActions:[{name:this.actionLabels.SET,icon:g.FI.edit,permission:"update",visible:t=>!t.hasSelection||t.first()&&0===t.first().dirValue,click:()=>this.updateQuotaModal()},{name:this.actionLabels.UPDATE,icon:g.FI.edit,permission:"update",visible:t=>t.first()&&t.first().dirValue>0,click:()=>this.updateQuotaModal()},{name:this.actionLabels.UNSET,icon:g.FI.destroy,permission:"update",disable:t=>!t.hasSelection||t.first()&&0===t.first().dirValue,click:()=>this.unsetQuotaModal()}]}}setUpSnapshotTable(){this.snapshot={columns:[{prop:"name",name:$localize`Name`,flexGrow:1},{prop:"path",name:$localize`Path`,flexGrow:1.5,cellTransformation:O.x.path},{prop:"created",name:$localize`Created`,flexGrow:1,pipe:this.cdDatePipe}],selection:new A.y,updateSelection:t=>{this.snapshot.selection=t},tableActions:[{name:this.actionLabels.CREATE,icon:g.FI.add,permission:"create",canBePrimary:t=>!t.hasSelection,click:()=>this.createSnapshot(),disable:()=>this.disableCreateSnapshot()},{name:this.actionLabels.DELETE,icon:g.FI.destroy,permission:"delete",click:()=>this.deleteSnapshotModal()}]}}disableCreateSnapshot(){const t=this.selectedDir.path.split("/").slice(1);return t.length>=4&&"volumes"===t[0]&&$localize`Cannot create snapshots for files/folders in the subvolume ${t[2]}`}ngOnChanges(){this.selectedDir=void 0,this.dirs=[],this.requestedPaths=[],this.nodeIds={},this.id&&(this.setRootNode(),this.firstCall())}setRootNode(){this.nodes=[{name:"/",label:"/",id:"/",expanded:!0}]}firstCall(){var t=this;setTimeout((0,Sn.A)(function*(){yield t.updateDirectory("/")}),10)}updateDirectory(t){if(this.unsetLoadingIndicator(),this.requestedPaths.includes(t)){if(!0===this.loading[t])return}else this.requestedPaths.push(t);return new Promise(o=>{this.setLoadingIndicator(t,!0),this.cephfsService.lsDir(this.id,t).subscribe(i=>{this.updateTreeStructure(i),this.updateQuotaTable(),this.updateTree(),o(this.getChildren(t)),this.setLoadingIndicator(t,!1);const r=!!this.treeViewService.findNode(!0,this.nodes,"active");"/"===t&&!r&&this.treeComponent.select.emit(this.getNode("/"))})})}setLoadingIndicator(t,o){this.loading[t]=o,this.unsetLoadingIndicator()}getSubDirectories(t,o=this.dirs){return o.filter(i=>i.parent===t)}getChildren(t){const o=this.getSubTree(t);return E().sortBy(this.getSubDirectories(t),"path").map(i=>this.createNode(i,o))}createNode(t,o){if(this.nodeIds[t.path]=t,o||this.getSubTree(t.parent),"/volumes"===t.path){const i=this.treeViewService.findNode("/volumes",this.nodes);i&&this.treeComponent.select.emit(i)}return{label:t.name,name:t.name,id:t.path,expanded:"/volumes"===t.path,children:this.getSubDirectories(t.path,o).map(this.toNode),value:{parent:t?.parent}}}getSubTree(t){return this.dirs.filter(o=>o.parent&&o.parent.startsWith(t))}setSettings(t){const o=(i,r)=>i?r?r(i):i:"";this.settings=[this.getQuota(t,"max_files",o),this.getQuota(t,"max_bytes",i=>o(i,r=>this.dimlessBinaryPipe.transform(r)))]}getQuota(t,o,i){const r=t.id;t=this.getOrigin(t,o);const p=this.getDirectory(t),F=p.quotas[o];let D=F,x=p.path;if(t.id===r)if("/"===t.value?.parent)D=0;else{const H=this.getParent(this.dirs,t.value?.parent);if(H){const X=this.getDirectory(this.getOrigin(H,o));D=X.quotas[o],x=X.path}}return{row:{name:"max_bytes"===o?$localize`Max size`:$localize`Max files`,value:i(F),originPath:F?p.path:""},quotaKey:o,dirValue:this.nodeIds[r].quotas[o],nextTreeMaximum:{value:D,path:D?x:""}}}getOrigin(t,o){const i=this.getParent(this.dirs,t.value?.parent);if(i&&"/"!==i?.id){const r=this.getQuotaFromTree(t,o),p=this.getOrigin(i,o),F=this.getQuotaFromTree(p,o);return 0===r||0!==F&&F<r?p:t}return t}getQuotaFromTree(t,o){return this.getDirectory(t).quotas[o]}getDirectory(t){return this.nodeIds[t.id]}selectOrigin(t){this.treeComponent.select.emit(this.getNode(t))}getNode(t){return this.treeViewService.findNode(t,this.nodes)}updateQuotaModal(){const t=this.selectedDir.path,o=this.quota.selection.first(),i=o.nextTreeMaximum,r=o.quotaKey,p=o.dirValue;this.modalService.show(Qt.b,{titleText:this.getModalQuotaTitle(0===p?this.actionLabels.SET:this.actionLabels.UPDATE,t),message:i.value?$localize`The inherited ${this.getQuotaValueFromPathMsg(i.value,i.path)} is the maximum value to be used.`:void 0,fields:[this.getQuotaFormField(o.row.name,r,p,i.value)],submitButtonText:$localize`Save`,onSubmit:F=>this.updateQuota(F)})}getModalQuotaTitle(t,o){return $localize`${t} CephFS ${this.getQuotaName()} quota for '${o}'`}getQuotaName(){return this.isBytesQuotaSelected()?$localize`size`:$localize`files`}isBytesQuotaSelected(){return"max_bytes"===this.quota.selection.first().quotaKey}getQuotaValueFromPathMsg(t,o){return t=this.isBytesQuotaSelected()?this.dimlessBinaryPipe.transform(t):t,$localize`${this.getQuotaName()} quota ${t} from '${o}'`}getQuotaFormField(t,o,i,r){const p="max_bytes"===o,F=[p?ge.xQ.binaryMin(0):T.Validators.min(0)];r&&F.push(p?ge.xQ.binaryMax(r):T.Validators.max(r));const D={type:p?"binary":"number",label:t,name:o,value:i,validators:F,required:!0};return p||(D.errors={min:$localize`Value has to be at least 0 or more`,max:$localize`Value has to be at most ${r} or less`}),D}updateQuota(t,o){const i=this.selectedDir.path,r=this.quota.selection.first().quotaKey,p=0===this.selectedDir.quotas[r]?this.actionLabels.SET:0===t[r]?this.actionLabels.UNSET:$localize`Updated`;this.cephfsService.quota(this.id,i,t).subscribe(()=>{o&&o(),this.notificationService.show(Le._.success,this.getModalQuotaTitle(p,i)),this.forceDirRefresh()})}unsetQuotaModal(){const t=this.selectedDir.path,o=this.quota.selection.first(),i=o.quotaKey,r=o.nextTreeMaximum,p=o.dirValue,F=this.getQuotaValueFromPathMsg(r.value,r.path),D=r.value>0?r.value>p?$localize`in order to inherit ${F}`:$localize`which isn't used because of the inheritance of ${F}`:$localize`in order to have no quota on the directory`;this.modalService.show(un.M,{titleText:this.getModalQuotaTitle(this.actionLabels.UNSET,t),buttonText:this.actionLabels.UNSET,description:$localize`${this.actionLabels.UNSET} ${this.getQuotaValueFromPathMsg(p,t)} ${D}.`,onSubmit:()=>this.updateQuota({[i]:0},()=>this.modalService.dismissAll())})}createSnapshot(){const t=this.selectedDir.path;this.modalService.show(Qt.b,{titleText:$localize`Create Snapshot`,message:$localize`Please enter the name of the snapshot.`,fields:[{type:"text",name:"name",value:`${lt()().toISOString(!0)}`,required:!0,validators:[this.validateValue.bind(this)]}],submitButtonText:$localize`Create Snapshot`,onSubmit:o=>{this.alreadyExists?this.notificationService.show(Le._.error,$localize`Snapshot name '${o.name}' is already in use. Please use another name.`):this.cephfsService.mkSnapshot(this.id,t,o.name).subscribe(i=>{this.notificationService.show(Le._.success,$localize`Created snapshot '${i}' for '${t}'`),this.forceDirRefresh()})}})}validateValue(t){this.alreadyExists=this.selectedDir.snapshots.some(o=>o.name===t.value)}forceDirRefresh(t){if(!t){const i=this.selectedDir;if(!i)throw new Error("This function can only be called without path if an selection was made");const r=this.getNode(t=i.parent?i.parent:i.path);this.treeComponent.select.emit(r);const p=this.getNode(i.path);return void this.treeComponent.select.emit(p)}const o=this.getNode(t);this.treeComponent.select.emit(o)}updateTreeStructure(t){const o=(r,p)=>{const F=r.filter(x=>x.parent===p),D=F.map(x=>x.path);return{children:F,paths:D}};E().uniq(t.map(r=>r.parent).sort()).forEach(r=>{const p=o(t,r),F=o(this.dirs,r);F.children.forEach(D=>{p.paths.includes(D.path)||this.removeOldDirectory(D)}),p.children.forEach(D=>{F.paths.includes(D.path)?this.updateExistingDirectory(F.children,D):this.addNewDirectory(D)})})}removeOldDirectory(t){const o=t.path;E().remove(this.dirs,i=>i.path===o),delete this.nodeIds[o],this.updateDirectoriesParentNode(t)}updateDirectoriesParentNode(t){const o=t.parent;if(!o)return;const i=this.getNode(o);if(!i)return;const r=this.getChildren(o);i.children=r}addNewDirectory(t){this.dirs.push(t),this.nodeIds[t.path]=t,this.updateDirectoriesParentNode(t)}updateExistingDirectory(t,o){const i=t.find(r=>r.path===o.path);Object.assign(i,o)}updateQuotaTable(){const t=this.selectedDir?this.getNode(this.selectedDir.path):void 0;t&&"/"!==t.id&&this.setSettings(t)}updateTree(t=!1){this.loadingIndicator&&!t||(this.nodes=[...this.nodes])}deleteSnapshotModal(){this.modalService.show(P.D,{impact:Tt.r.high,itemDescription:$localize`CephFs Snapshot`,itemNames:this.snapshot.selection.selected.map(t=>t.name),submitAction:()=>this.deleteSnapshot()})}deleteSnapshot(){const t=this.selectedDir.path;this.snapshot.selection.selected.forEach(o=>{const i=o.name;this.cephfsService.rmSnapshot(this.id,t,i).subscribe(()=>{this.notificationService.show(Le._.success,$localize`Deleted snapshot '${i}' for '${t}'`)})}),this.modalService.dismissAll(),this.forceDirRefresh()}refreshAllDirectories(){this.loadingIndicator=!0,this.requestedPaths.map(o=>this.forceDirRefresh(o));const t=setInterval(()=>{this.updateTree(!0),this.loadingIndicator||clearInterval(t)},3e3)}unsetLoadingIndicator(){this.loadingIndicator&&(clearTimeout(this.loadingTimeout),this.loadingTimeout=setTimeout(()=>{if(Object.values(this.loading).some(o=>o))return this.unsetLoadingIndicator();this.loadingIndicator=!1,this.updateTree()},3e3))}toNode(t){return{id:t.path,label:t.name,children:[],expanded:!1,value:{parent:t?.parent}}}getParent(t,o){const i=t?.find?.(r=>r.path===o);return i?this.toNode(i):null}static{this.\u0275fac=function(o){return new(o||n)(e.\u0275\u0275directiveInject(_.v),e.\u0275\u0275directiveInject(Ge.V),e.\u0275\u0275directiveInject(N),e.\u0275\u0275directiveInject(Ht.Q),e.\u0275\u0275directiveInject(f.Ss),e.\u0275\u0275directiveInject(Y.J),e.\u0275\u0275directiveInject(mt.l),e.\u0275\u0275directiveInject(Bn.X))}}static{this.\u0275cmp=e.\u0275\u0275defineComponent({type:n,selectors:[["cd-cephfs-directories"]],viewQuery:function(o,i){if(1&o&&(e.\u0275\u0275viewQuery(L.TreeViewComponent,5),e.\u0275\u0275viewQuery(zn,7)),2&o){let r;e.\u0275\u0275queryRefresh(r=e.\u0275\u0275loadQuery())&&(i.treeComponent=r.first),e.\u0275\u0275queryRefresh(r=e.\u0275\u0275loadQuery())&&(i.originTmpl=r.first)}},inputs:{id:"id"},features:[e.\u0275\u0275NgOnChangesFeature],decls:12,vars:11,consts:()=>{let t,o;return t=$localize`:␟f21b1d17b6c5042bb5805516eee37fde33739dd8␟633791246656795624:Snapshots`,o=$localize`:␟8bb8293aa8161433778762ae025ffd5e7c85795e␟8133124082907931904:Quotas`,[["origin",""],t,o,[1,"row"],[1,"col-sm-4","pe-0"],[1,"card"],[1,"card-header"],["type","button",1,"btn","btn-light","pull-right",3,"click"],[3,"ngClass"],[1,"card-body","card-tree"],[3,"select","tree"],[4,"ngIf"],["class","col-sm-8 metadata",4,"ngIf"],[1,"col-sm-8","metadata"],[1,"card-body"],["identifier","name","forceIdentifier","true","selectionType","single",3,"updateSelection","data","columns"],[1,"table-actions",3,"permission","selection","tableActions"],["selectionType","single","identifier","quotaKey",3,"updateSelection","data","columns","limit","footer","onlyActionHeader","forceIdentifier","toolHeader"],[1,"only-table-actions",3,"permission","selection","tableActions"],[1,"quota-origin",3,"click"]]},template:function(o,i){if(1&o){const r=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"div",3)(1,"div",4)(2,"div",5)(3,"div",6)(4,"button",7),e.\u0275\u0275listener("click",function(){return e.\u0275\u0275restoreView(r),e.\u0275\u0275resetView(i.refreshAllDirectories())}),e.\u0275\u0275element(5,"i",8),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(6,"div",9)(7,"cds-tree-view",10),e.\u0275\u0275listener("select",function(F){return e.\u0275\u0275restoreView(r),e.\u0275\u0275resetView(i.selectNode(F))}),e.\u0275\u0275elementEnd(),e.\u0275\u0275template(8,Xn,2,4,"div",11),e.\u0275\u0275elementEnd()()(),e.\u0275\u0275template(9,jn,10,7,"div",12),e.\u0275\u0275elementEnd(),e.\u0275\u0275template(10,Wn,2,1,"ng-template",null,0,e.\u0275\u0275templateRefExtractor)}2&o&&(e.\u0275\u0275advance(4),e.\u0275\u0275classProp("disabled",i.loadingIndicator),e.\u0275\u0275advance(),e.\u0275\u0275classProp("fa-spin",i.loadingIndicator),e.\u0275\u0275property("ngClass",e.\u0275\u0275pureFunction2(8,Mn,i.icons.large,i.icons.refresh)),e.\u0275\u0275advance(2),e.\u0275\u0275property("tree",i.nodes),e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf",i.loadingIndicator),e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf",i.selectedDir))},dependencies:[l.NgClass,l.NgIf,Ke.O,dt.j,De.S,L.TreeViewComponent],styles:["cd-cephfs-directories tree-root .tree-children{overflow:inherit}.quota-origin[_ngcontent-%COMP%]{color:#25828e;cursor:pointer}.quota-origin[_ngcontent-%COMP%]:hover{color:#212529}.card-tree[_ngcontent-%COMP%]{height:50vh;overflow-y:auto}"]})}}return n})();var Yt=s(57798),hn=s(12540),pn=s(37006),Jt=s(67588),Rn=s(25171),On=s(42865);function Qn(n,c){1&n&&(e.\u0275\u0275elementStart(0,"span",41),e.\u0275\u0275i18n(1,11),e.\u0275\u0275elementEnd())}function Yn(n,c){1&n&&(e.\u0275\u0275elementStart(0,"span",41),e.\u0275\u0275i18n(1,12),e.\u0275\u0275elementEnd())}function Jn(n,c){1&n&&(e.\u0275\u0275elementStart(0,"span",41),e.\u0275\u0275i18n(1,13),e.\u0275\u0275elementEnd())}function Zn(n,c){if(1&n&&e.\u0275\u0275template(0,Qn,2,0,"span",40)(1,Yn,2,0,"span",40)(2,Jn,2,0,"span",40),2&n){e.\u0275\u0275nextContext();const t=e.\u0275\u0275reference(3),o=e.\u0275\u0275nextContext();e.\u0275\u0275property("ngIf",o.subvolumeForm.showError("subvolumeName",t,"required")),e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf",o.subvolumeForm.showError("subvolumeName",t,"notUnique")),e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf",o.subvolumeForm.showError("subvolumeName",t,"pattern"))}}function Pn(n,c){if(1&n&&(e.\u0275\u0275elementStart(0,"option",44),e.\u0275\u0275text(1),e.\u0275\u0275elementEnd()),2&n){const t=c.$implicit;e.\u0275\u0275property("value",t.name),e.\u0275\u0275advance(),e.\u0275\u0275textInterpolate(t.name)}}function qn(n,c){if(1&n&&(e.\u0275\u0275elementStart(0,"cds-select",42)(1,"option",43),e.\u0275\u0275i18n(2,14),e.\u0275\u0275elementEnd(),e.\u0275\u0275template(3,Pn,2,2,"option",31),e.\u0275\u0275elementEnd()),2&n){const t=c.ngIf;e.\u0275\u0275advance(3),e.\u0275\u0275property("ngForOf",t)}}function eo(n,c){1&n&&(e.\u0275\u0275elementStart(0,"span",41),e.\u0275\u0275i18n(1,15),e.\u0275\u0275elementEnd())}function le(n,c){if(1&n&&e.\u0275\u0275template(0,eo,2,0,"span",40),2&n){e.\u0275\u0275nextContext();const t=e.\u0275\u0275reference(3),o=e.\u0275\u0275nextContext();e.\u0275\u0275property("ngIf",o.subvolumeForm.showError("size",t,"pattern"))}}function ke(n,c){if(1&n&&(e.\u0275\u0275elementStart(0,"option",44),e.\u0275\u0275text(1),e.\u0275\u0275elementEnd()),2&n){const t=c.$implicit;e.\u0275\u0275property("value",t.pool),e.\u0275\u0275advance(),e.\u0275\u0275textInterpolate(t.pool)}}function ee(n,c){if(1&n){const t=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementContainerStart(0),e.\u0275\u0275elementStart(1,"div",20)(2,"form",21,0)(4,"div",22)(5,"cds-text-label",23),e.\u0275\u0275i18nStart(6,4),e.\u0275\u0275element(7,"input",24),e.\u0275\u0275i18nEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275template(8,Zn,3,3,"ng-template",null,1,e.\u0275\u0275templateRefExtractor),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(10,"div",22)(11,"cds-text-label",25),e.\u0275\u0275i18nStart(12,5),e.\u0275\u0275element(13,"input",26),e.\u0275\u0275i18nEnd(),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(14,"div",22),e.\u0275\u0275template(15,qn,4,1,"cds-select",27),e.\u0275\u0275pipe(16,"async"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(17,"div",22)(18,"cds-text-label",28),e.\u0275\u0275i18nStart(19,6),e.\u0275\u0275element(20,"input",29),e.\u0275\u0275i18nEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275template(21,le,1,1,"ng-template",null,2,e.\u0275\u0275templateRefExtractor),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(23,"div",22)(24,"cds-select",30),e.\u0275\u0275template(25,ke,2,2,"option",31),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(26,"div",22)(27,"cds-text-label",32),e.\u0275\u0275i18nStart(28,7),e.\u0275\u0275element(29,"input",33),e.\u0275\u0275i18nEnd(),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(30,"div",22)(31,"cds-text-label",34),e.\u0275\u0275i18nStart(32,8),e.\u0275\u0275element(33,"input",35),e.\u0275\u0275i18nEnd(),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(34,"div",22)(35,"label",36),e.\u0275\u0275i18n(36,9),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(37,"cd-help-text"),e.\u0275\u0275text(38,"Permissions for the directory. Default mode is 755 which is rwxr-xr-x"),e.\u0275\u0275elementEnd(),e.\u0275\u0275element(39,"cd-checked-table-form",37),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(40,"div",22)(41,"cds-checkbox",38),e.\u0275\u0275i18nStart(42,10),e.\u0275\u0275element(43,"cd-help-text"),e.\u0275\u0275i18nEnd(),e.\u0275\u0275elementEnd()()()(),e.\u0275\u0275elementStart(44,"cd-form-button-panel",39),e.\u0275\u0275pipe(45,"titlecase"),e.\u0275\u0275pipe(46,"upperFirst"),e.\u0275\u0275listener("submitActionEvent",function(){e.\u0275\u0275restoreView(t);const i=e.\u0275\u0275nextContext();return e.\u0275\u0275resetView(i.submit())}),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementContainerEnd()}if(2&n){const t=e.\u0275\u0275reference(9),o=e.\u0275\u0275reference(22),i=e.\u0275\u0275nextContext();e.\u0275\u0275advance(2),e.\u0275\u0275property("formGroup",i.subvolumeForm),e.\u0275\u0275advance(3),e.\u0275\u0275property("invalid",i.subvolumeForm.controls.subvolumeName.invalid&&i.subvolumeForm.controls.subvolumeName.dirty)("invalidText",t),e.\u0275\u0275advance(2),e.\u0275\u0275property("invalid",i.subvolumeForm.controls.subvolumeName.invalid&&i.subvolumeForm.controls.subvolumeName.dirty)("autofocus",!0),e.\u0275\u0275advance(8),e.\u0275\u0275property("ngIf",e.\u0275\u0275pipeBind1(16,20,i.subVolumeGroups$)),e.\u0275\u0275advance(3),e.\u0275\u0275property("invalid",i.subvolumeForm.controls.size.invalid&&i.subvolumeForm.controls.size.dirty)("invalidText",o),e.\u0275\u0275advance(2),e.\u0275\u0275property("invalid",i.subvolumeForm.controls.size.invalid&&i.subvolumeForm.controls.size.dirty),e.\u0275\u0275advance(5),e.\u0275\u0275property("ngForOf",i.dataPools),e.\u0275\u0275advance(14),e.\u0275\u0275property("data",i.scopePermissions)("columns",i.columns)("form",i.subvolumeForm)("isTableForOctalMode",!0)("initialValue",i.initialMode)("scopes",i.scopes)("isDisabled",i.isEdit),e.\u0275\u0275advance(5),e.\u0275\u0275property("form",i.subvolumeForm)("submitText",e.\u0275\u0275pipeBind1(45,22,i.action)+" "+e.\u0275\u0275pipeBind1(46,24,i.resource))("modalForm",!0)}}let $=(()=>{class n extends Te.g{constructor(t,o,i,r,p,F,D,x,H,X,Z,re=!1){super(),this.actionLabels=t,this.taskWrapper=o,this.cephFsSubvolumeService=i,this.cephFsSubvolumeGroupService=r,this.formatter=p,this.dimlessBinary=F,this.octalToHumanReadable=D,this.fsName=x,this.subVolumeName=H,this.subVolumeGroupName=X,this.pools=Z,this.isEdit=re,this.scopePermissions=[],this.initialMode={owner:["read","write","execute"],group:["read","execute"],others:["read","execute"]},this.scopes=["owner","group","others"],this.resource=$localize`Subvolume`}ngOnInit(){this.action=this.actionLabels.CREATE,this.columns=[{prop:"scope",name:$localize`All`,flexGrow:.5},{prop:"read",name:$localize`Read`,flexGrow:.5,cellClass:"text-center"},{prop:"write",name:$localize`Write`,flexGrow:.5,cellClass:"text-center"},{prop:"execute",name:$localize`Execute`,flexGrow:.5,cellClass:"text-center"}],this.subVolumeGroups$=this.cephFsSubvolumeGroupService.get(this.fsName),this.dataPools=this.pools.filter(t=>"data"===t.type),this.createForm(),this.isEdit?this.populateForm():this.loadingReady()}createForm(){this.subvolumeForm=new Se.$({volumeName:new T.FormControl({value:this.fsName,disabled:!0}),subvolumeName:new T.FormControl("",{validators:[T.Validators.required,T.Validators.pattern(/^[.A-Za-z0-9_-]+$/)],asyncValidators:[ge.xQ.unique(this.cephFsSubvolumeService.exists,this.cephFsSubvolumeService,null,null,this.fsName,this.subVolumeGroupName)]}),subvolumeGroupName:new T.FormControl(this.subVolumeGroupName),pool:new T.FormControl(this.dataPools[0]?.pool,{validators:[T.Validators.required]}),size:new T.FormControl(null,{updateOn:"blur"}),uid:new T.FormControl(null),gid:new T.FormControl(null),mode:new T.FormControl({}),isolatedNamespace:new T.FormControl(!1)})}populateForm(){this.action=this.actionLabels.EDIT,this.cephFsSubvolumeService.info(this.fsName,this.subVolumeName,this.subVolumeGroupName).subscribe(t=>{this.subvolumeForm.get("subvolumeName").disable(),this.subvolumeForm.get("subvolumeGroupName").disable(),this.subvolumeForm.get("pool").disable(),this.subvolumeForm.get("uid").disable(),this.subvolumeForm.get("gid").disable(),this.subvolumeForm.get("isolatedNamespace").disable(),this.subvolumeForm.get("subvolumeName").setValue(this.subVolumeName),this.subvolumeForm.get("subvolumeGroupName").setValue(this.subVolumeGroupName),"infinite"!==t.bytes_quota&&this.subvolumeForm.get("size").setValue(this.dimlessBinary.transform(t.bytes_quota)),this.subvolumeForm.get("uid").setValue(t.uid),this.subvolumeForm.get("gid").setValue(t.gid),this.subvolumeForm.get("isolatedNamespace").setValue(t.pool_namespace),this.initialMode=this.octalToHumanReadable.transform(t.mode,!0),this.loadingReady()})}submit(){const t=this.subvolumeForm.getValue("subvolumeName"),o=this.subvolumeForm.getValue("subvolumeGroupName"),i=this.subvolumeForm.getValue("pool"),r=this.formatter.toBytes(this.subvolumeForm.getValue("size"))||0,p=this.subvolumeForm.getValue("uid"),F=this.subvolumeForm.getValue("gid"),D=this.formatter.toOctalPermission(this.subvolumeForm.getValue("mode")),x=this.subvolumeForm.getValue("isolatedNamespace");if(this.isEdit){const H=0===r?"infinite":r;this.taskWrapper.wrapTaskAroundCall({task:new ie.O("cephfs/subvolume/"+f.Qp.EDIT,{subVolumeName:t}),call:this.cephFsSubvolumeService.update(this.fsName,t,String(H),o)}).subscribe({error:()=>{this.subvolumeForm.setErrors({cdSubmitButton:!0})},complete:()=>{this.closeModal()}})}else this.taskWrapper.wrapTaskAroundCall({task:new ie.O("cephfs/subvolume/"+f.Qp.CREATE,{subVolumeName:t}),call:this.cephFsSubvolumeService.create(this.fsName,t,o,i,String(r),p,F,D,x)}).subscribe({error:()=>{this.subvolumeForm.setErrors({cdSubmitButton:!0})},complete:()=>{this.closeModal()}})}static{this.\u0275fac=function(o){return new(o||n)(e.\u0275\u0275directiveInject(f.Ss),e.\u0275\u0275directiveInject(w.a),e.\u0275\u0275directiveInject(Yt.v),e.\u0275\u0275directiveInject(Jt.W),e.\u0275\u0275directiveInject(hn.k),e.\u0275\u0275directiveInject(mt.l),e.\u0275\u0275directiveInject(pn.I),e.\u0275\u0275directiveInject("fsName",8),e.\u0275\u0275directiveInject("subVolumeName",8),e.\u0275\u0275directiveInject("subVolumeGroupName",8),e.\u0275\u0275directiveInject("pools",8),e.\u0275\u0275directiveInject("isEdit",8))}}static{this.\u0275cmp=e.\u0275\u0275defineComponent({type:n,selectors:[["cd-cephfs-subvolume-form"]],features:[e.\u0275\u0275InheritDefinitionFeature],decls:7,vars:9,consts:()=>{let t,o,i,r,p,F,D,x,H,X,Z,re,pe,be,Pe,he;return t=$localize`:␟fb127ea03835b3230f0ed981c7080e2ccb879621␟3346778808274133574:${"\ufffd0\ufffd"}:INTERPOLATION: ${"\ufffd1\ufffd"}:INTERPOLATION_1:`,o=$localize`:␟492b46633749d05dc2e2dd51858f7ef8d59c2835␟5082538775333860868:The size of the subvolume is specified by setting a quota on it.
                          If left blank or put 0, then quota will be infinite`,i=$localize`:␟f0016bd458baa88284a658ce9eeda42d8ad88d2c␟2739243284262593813:e.g., 10GiB`,r=$localize`:␟5408f26ef48cea5b1042cc20781616622cc83bc5␟6004297985262322523:By default, the data_pool_layout of the parent directory is selected.`,p=$localize`:␟da6954d55a46943dd77159d65e5b81f51b0e3acb␟271472573961202879:Name ${"\ufffd#7\ufffd\ufffd/#7\ufffd"}:TAG_INPUT:`,F=$localize`:␟627d77d777327b116ab0ef83e42e4274c52c3852␟1262752371183267813:Volume name ${"\ufffd#13\ufffd\ufffd/#13\ufffd"}:TAG_INPUT:`,D=$localize`:␟cf68b93f7ce07de1b3d9f7429a8a29595c4fe302␟5881817813163804952:Size ${"\ufffd#20\ufffd\ufffd/#20\ufffd"}:TAG_INPUT:`,x=$localize`:␟24bd69b6c334472d0aaefe8ade289310e3e65564␟3314973177575788995:UID ${"\ufffd#29\ufffd\ufffd/#29\ufffd"}:TAG_INPUT:`,H=$localize`:␟20d558ebd10cbfb1955896b2a49341b49951dc9d␟2433505658977168644:GID ${"\ufffd#33\ufffd\ufffd/#33\ufffd"}:TAG_INPUT:`,X=$localize`:␟b04e4b4ddc6dfdc6fd2b1c1bb789333a51cf89b3␟7479570597537922716:Mode `,Z=$localize`:␟fe7eacde51a5b173e7e38b9617b62397cca3c8eb␟221283384507506510:Isolated Namespace ${"\ufffd#43\ufffd"}:START_TAG_CD_HELP_TEXT:To create subvolume in a separate RADOS namespace.${"\ufffd/#43\ufffd"}:CLOSE_TAG_CD_HELP_TEXT:`,re=$localize`:␟7cbdabcece469fab89cfa687ab152bca18b97498␟1417693714872528491:This field is required.`,pe=$localize`:␟dbd47f1d6bb17fd684f8dedf1a8cbdd44598a06f␟3785790205088434409:The subvolume already exists.`,be=$localize`:␟ec736eca11b59b7eae93df6b3b014db532d0da90␟8030242829118993503:Subvolume name can only contain letters, numbers, '.', '-' or '_'`,Pe=$localize`:␟ff7cee38a2259526c519f878e71b964f41db4348␟5607669932062416162:Default`,he=$localize`:␟25db023269cd62168393b201f615ec90e07f3df8␟4749416028992272245:Size must be a number or in a valid format. eg: 5 GiB`,[["formDir","ngForm"],["subvolumeNameError",""],["sizeError",""],t,p,F,D,x,H,X,Z,re,pe,be,Pe,he,["size","lg",3,"overlaySelected","open","hasScrollingContent"],[3,"closeSelect"],["cdsModalHeaderHeading",""],[4,"cdFormLoading"],["cdsModalContent",""],["name","subvolumeForm","novalidate","",3,"formGroup"],[1,"form-item"],["label","Name","for","subvolumeName","cdRequiredField","Name",3,"invalid","invalidText"],["cdsText","","type","text","placeholder","Subvolume name...","id","subvolumeName","name","subvolumeName","formControlName","subvolumeName","modal-primary-focus","",3,"invalid","autofocus"],["label","Volume name","for","volumeName"],["cdsText","","type","text","id","volumeName","name","volumeName","formControlName","volumeName"],["label","Subvolume group","for","subvolumeGroupName","formControlName","subvolumeGroupName","name","subvolumeGroupName","id","subvolumeGroupName",4,"ngIf"],["label","Size","for","size","helperText",o,3,"invalid","invalidText"],["cdsText","","type","text","id","size","name","size","formControlName","size","placeholder",i,"defaultUnit","GiB","cdDimlessBinary","",3,"invalid"],["label","CephFS Pools","for","pool","formControlName","pool","name","pool","id","pool","helperText",r],[3,"value",4,"ngFor","ngForOf"],["label","UID","for","uid"],["cdsText","","type","number","placeholder","Subvolume UID...","id","uid","name","uid","formControlName","uid"],["label","GID","for","gid"],["cdsText","","type","number","placeholder","Subvolume GID...","id","gid","name","gid","formControlName","gid"],["for","mode",1,"cds--label"],["inputField","mode",3,"data","columns","form","isTableForOctalMode","initialValue","scopes","isDisabled"],["id","isolatedNamespace","name","isolatedNamespace","formControlName","isolatedNamespace"],[3,"submitActionEvent","form","submitText","modalForm"],["class","invalid-feedback",4,"ngIf"],[1,"invalid-feedback"],["label","Subvolume group","for","subvolumeGroupName","formControlName","subvolumeGroupName","name","subvolumeGroupName","id","subvolumeGroupName"],["value",""],[3,"value"]]},template:function(o,i){1&o&&(e.\u0275\u0275elementStart(0,"cds-modal",16),e.\u0275\u0275listener("overlaySelected",function(){return i.closeModal()}),e.\u0275\u0275elementStart(1,"cds-modal-header",17),e.\u0275\u0275listener("closeSelect",function(){return i.closeModal()}),e.\u0275\u0275elementStart(2,"h3",18),e.\u0275\u0275i18n(3,3),e.\u0275\u0275pipe(4,"titlecase"),e.\u0275\u0275pipe(5,"upperFirst"),e.\u0275\u0275elementEnd()(),e.\u0275\u0275template(6,ee,47,26,"ng-container",19),e.\u0275\u0275elementEnd()),2&o&&(e.\u0275\u0275property("open",i.open)("hasScrollingContent",!0),e.\u0275\u0275advance(5),e.\u0275\u0275i18nExp(e.\u0275\u0275pipeBind1(4,5,i.action))(e.\u0275\u0275pipeBind1(5,7,i.resource)),e.\u0275\u0275i18nApply(3),e.\u0275\u0275advance(),e.\u0275\u0275property("cdFormLoading",i.loading))},dependencies:[l.NgForOf,l.NgIf,Q.e,Ye.O,Rn.N,ct.B,On.Y,rt.G,De.S,ze.E,Et.P,T.\u0275NgNoValidate,T.NgSelectOption,T.\u0275NgSelectMultipleOption,T.DefaultValueAccessor,T.NumberValueAccessor,T.NgControlStatus,T.NgControlStatusGroup,T.FormGroupDirective,T.FormControlName,L.TextInputLabelComponent,L.TextInput,L.Checkbox,L.Select,L.Option,L.Modal,L.ModalHeader,L.ModalContent,L.ModalHeaderHeading,l.AsyncPipe,l.TitleCasePipe,Oe.r]})}}return n})();var ne=s(16619),b=s(55472);let U=(()=>{class n{constructor(){this.cssClasses=["badge-cd-label-green","badge-cd-label-cyan","badge-cd-label-purple","badge-cd-label-light-blue","badge-cd-label-gold","badge-cd-label-light-green"]}transform(t){let o=0,i=0;if(t)for(let r=0;r<t.length;r++)i=t.charCodeAt(r),o=Math.abs((o<<5)-o+i);return this.cssClasses[o%this.cssClasses.length]}static{this.\u0275fac=function(o){return new(o||n)}}static{this.\u0275pipe=e.\u0275\u0275definePipe({name:"colorClassFromText",type:n,pure:!0})}}return n})();function z(n,c){if(1&n&&(e.\u0275\u0275elementStart(0,"span",2),e.\u0275\u0275pipe(1,"colorClassFromText"),e.\u0275\u0275text(2),e.\u0275\u0275elementEnd()),2&n){const t=e.\u0275\u0275nextContext();e.\u0275\u0275classMapInterpolate1("badge badge-",t.value,""),e.\u0275\u0275propertyInterpolate("ngClass",e.\u0275\u0275pipeBind1(1,6,t.value)),e.\u0275\u0275property("ngbTooltip",t.tooltipText),e.\u0275\u0275advance(2),e.\u0275\u0275textInterpolate1(" ",t.value,"\n")}}function se(n,c){if(1&n&&(e.\u0275\u0275elementStart(0,"span"),e.\u0275\u0275text(1),e.\u0275\u0275elementEnd()),2&n){const t=e.\u0275\u0275nextContext();e.\u0275\u0275classMapInterpolate2("badge badge-background-primary badge-",t.key,"-",t.value,""),e.\u0275\u0275advance(),e.\u0275\u0275textInterpolate2(" ",t.key,": ",t.value," ")}}let $e=(()=>{class n{static{this.\u0275fac=function(o){return new(o||n)}}static{this.\u0275cmp=e.\u0275\u0275defineComponent({type:n,selectors:[["cd-label"]],inputs:{key:"key",value:"value",tooltipText:"tooltipText"},decls:3,vars:2,consts:[["key_value",""],[3,"class","ngClass","ngbTooltip",4,"ngIf","ngIfElse"],[3,"ngClass","ngbTooltip"]],template:function(o,i){if(1&o&&e.\u0275\u0275template(0,z,3,8,"span",1)(1,se,2,6,"ng-template",null,0,e.\u0275\u0275templateRefExtractor),2&o){const r=e.\u0275\u0275reference(2);e.\u0275\u0275property("ngIf",!i.key)("ngIfElse",r)}},dependencies:[l.NgClass,l.NgIf,V.NgbTooltip,U]})}}return n})();var Me=s(10142);function Ze(n,c){if(1&n&&(e.\u0275\u0275elementStart(0,"h3"),e.\u0275\u0275i18n(1,0),e.\u0275\u0275elementEnd()),2&n){const t=e.\u0275\u0275nextContext(2);e.\u0275\u0275advance(),e.\u0275\u0275i18nExp(t.title),e.\u0275\u0275i18nApply(1)}}function k(n,c){if(1&n){const t=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"a",9),e.\u0275\u0275listener("click",function(){e.\u0275\u0275restoreView(t);const i=e.\u0275\u0275nextContext(3);return e.\u0275\u0275resetView(i.selectItem())}),e.\u0275\u0275text(1,"_nogroup"),e.\u0275\u0275elementEnd()}if(2&n){const t=e.\u0275\u0275nextContext(3);e.\u0275\u0275classProp("active",!t.activeItem)}}function Ee(n,c){if(1&n){const t=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"a",10),e.\u0275\u0275listener("click",function(){e.\u0275\u0275restoreView(t);const i=e.\u0275\u0275nextContext().$implicit,r=e.\u0275\u0275nextContext(2);return e.\u0275\u0275resetView(r.selectItem(i))}),e.\u0275\u0275text(1),e.\u0275\u0275elementEnd()}if(2&n){const t=e.\u0275\u0275nextContext().$implicit,o=e.\u0275\u0275nextContext(2);e.\u0275\u0275classProp("active",t===o.activeItem),e.\u0275\u0275advance(),e.\u0275\u0275textInterpolate(t)}}function G(n,c){if(1&n&&(e.\u0275\u0275elementStart(0,"li",6),e.\u0275\u0275template(1,k,2,2,"a",7)(2,Ee,2,3,"a",8),e.\u0275\u0275elementEnd()),2&n){const t=c.$implicit;e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf",""===t),e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf",""!==t)}}function j(n,c){if(1&n){const t=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementContainerStart(0),e.\u0275\u0275template(1,Ze,2,1,"h3",1),e.\u0275\u0275elementStart(2,"input",2),e.\u0275\u0275listener("keyup",function(){e.\u0275\u0275restoreView(t);const i=e.\u0275\u0275nextContext();return e.\u0275\u0275resetView(i.updateFilter())}),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(3,"div",3)(4,"ul",4),e.\u0275\u0275template(5,G,3,2,"li",5),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementContainerEnd()}if(2&n){const t=e.\u0275\u0275nextContext();e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf",t.title),e.\u0275\u0275advance(),e.\u0275\u0275property("id",t.inputIdentifier),e.\u0275\u0275advance(3),e.\u0275\u0275property("ngForOf",t.filteredItems)("ngForTrackBy",t.trackByFn)}}let Ce=(()=>{class n{constructor(){this.emitFilteredItems=new e.EventEmitter,this.emitActiveItem=new e.EventEmitter,this.activeItem=""}ngOnInit(){this.filteredItems=this.items,!this.activeItem&&this.items.length&&this.selectItem(this.items[0])}updateFilter(){const t=document.getElementById(this.inputIdentifier);this.filteredItems=this.items.filter(o=>o.includes(t.value))}selectItem(t=""){this.activeItem=t,this.emitActiveItem.emit(t)}trackByFn(t){return t}static{this.\u0275fac=function(o){return new(o||n)}}static{this.\u0275cmp=e.\u0275\u0275defineComponent({type:n,selectors:[["cd-vertical-navigation"]],inputs:{items:"items",title:"title",inputIdentifier:"inputIdentifier"},outputs:{emitFilteredItems:"emitFilteredItems",emitActiveItem:"emitActiveItem"},decls:1,vars:1,consts:()=>{let t;return t=$localize`:␟045ed332fbb2645493d6955677247db0d1134c2d␟2999396308623228810:${"\ufffd0\ufffd"}:INTERPOLATION:`,[t,[4,"ngIf"],["type","text","placeholder","Filter by name...",1,"form-control","text-center","mb-2",3,"keyup","id"],[1,"overflow-auto"],[1,"nav","flex-column","nav-pills"],["class","nav-item",4,"ngFor","ngForOf","ngForTrackBy"],[1,"nav-item"],["class","nav-link",3,"active","click",4,"ngIf"],["class","nav-link text-decoration-none text-break",3,"active","click",4,"ngIf"],[1,"nav-link",3,"click"],[1,"nav-link","text-decoration-none","text-break",3,"click"]]},template:function(o,i){1&o&&e.\u0275\u0275template(0,j,6,4,"ng-container",1),2&o&&e.\u0275\u0275property("ngIf",i.items.length)},dependencies:[l.NgForOf,l.NgIf,De.S,Me.a],styles:[".overflow-auto[_ngcontent-%COMP%]{max-height:50vh}"]})}}return n})();var xe=s(78708);const nt=["quotaUsageTpl"],at=["typeTpl"],St=["modeToHumanReadableTpl"],vt=["nameTpl"],Mt=["quotaSizeTpl"],Fe=["removeTmpl"],Zt=(n,c)=>[n,c];function st(n,c){if(1&n){const t=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"div",14)(1,"cd-vertical-navigation",15),e.\u0275\u0275listener("emitActiveItem",function(i){e.\u0275\u0275restoreView(t);const r=e.\u0275\u0275nextContext();return e.\u0275\u0275resetView(r.selectSubVolumeGroup(i))}),e.\u0275\u0275elementEnd()()}if(2&n){const t=e.\u0275\u0275nextContext();e.\u0275\u0275advance(),e.\u0275\u0275property("items",t.subvolumeGroupList)}}function bn(n,c){if(1&n&&e.\u0275\u0275element(0,"cd-usage-bar",17),2&n){const t=e.\u0275\u0275nextContext().data.row;e.\u0275\u0275property("total",t.info.bytes_quota)("used",t.info.bytes_used)("title",t.name)}}function mn(n,c){if(1&n&&(e.\u0275\u0275elementStart(0,"span",19),e.\u0275\u0275text(1),e.\u0275\u0275pipe(2,"dimlessBinary"),e.\u0275\u0275elementEnd()),2&n){const t=e.\u0275\u0275nextContext(2).data.row;e.\u0275\u0275advance(),e.\u0275\u0275textInterpolate1(" ",e.\u0275\u0275pipeBind1(2,1,t.info.bytes_used),"")}}function si(n,c){if(1&n&&e.\u0275\u0275template(0,mn,3,3,"span",18),2&n){const t=e.\u0275\u0275nextContext().data.row;e.\u0275\u0275property("ngIf","undefined"===t.info.bytes_pcent)}}function ro(n,c){if(1&n&&e.\u0275\u0275template(0,bn,1,3,"cd-usage-bar",16)(1,si,1,1,"ng-template",null,5,e.\u0275\u0275templateRefExtractor),2&n){const t=c.data.row,o=e.\u0275\u0275reference(2);e.\u0275\u0275property("ngIf",t.info.bytes_pcent&&"undefined"!==t.info.bytes_pcent)("ngIfElse",o)}}function ri(n,c){1&n&&e.\u0275\u0275element(0,"cd-label",20),2&n&&e.\u0275\u0275property("value",c.data.value)}function lo(n,c){if(1&n&&(e.\u0275\u0275elementStart(0,"span",22),e.\u0275\u0275text(1),e.\u0275\u0275elementEnd()),2&n){const t=c.$implicit;e.\u0275\u0275property("ngClass",t.class)("ngbTooltip",t.toolTip),e.\u0275\u0275advance(),e.\u0275\u0275textInterpolate1(" ",t.content," ")}}function li(n,c){1&n&&(e.\u0275\u0275template(0,lo,2,3,"span",21),e.\u0275\u0275pipe(1,"octalToHumanReadable")),2&n&&e.\u0275\u0275property("ngForOf",e.\u0275\u0275pipeBind1(1,1,c.data.value))}function _i(n,c){if(1&n&&(e.\u0275\u0275elementStart(0,"span"),e.\u0275\u0275element(1,"i",27),e.\u0275\u0275elementEnd()),2&n){const t=e.\u0275\u0275nextContext().data.row,o=e.\u0275\u0275nextContext();e.\u0275\u0275advance(),e.\u0275\u0275propertyInterpolate1("ngbTooltip","",t.name," is ready to use"),e.\u0275\u0275property("ngClass",e.\u0275\u0275pureFunction2(3,Zt,o.icons.success,o.icons.large))}}function ci(n,c){if(1&n&&e.\u0275\u0275element(0,"i",28),2&n){const t=e.\u0275\u0275nextContext().data.row,o=e.\u0275\u0275nextContext();e.\u0275\u0275propertyInterpolate1("ngbTooltip","",t.name," is removed after retaining the snapshots"),e.\u0275\u0275property("ngClass",e.\u0275\u0275pureFunction2(3,Zt,o.icons.warning,o.icons.large))}}function di(n,c){if(1&n&&e.\u0275\u0275element(0,"cd-label",20),2&n){const t=e.\u0275\u0275nextContext().data.row;e.\u0275\u0275property("value",null==t||null==t.info?null:t.info.type)}}function _o(n,c){if(1&n&&e.\u0275\u0275element(0,"cd-label",29),2&n){const t=e.\u0275\u0275nextContext().data.row;e.\u0275\u0275property("tooltipText",null==t||null==t.info?null:t.info.pool_namespace)}}function co(n,c){if(1&n&&(e.\u0275\u0275elementStart(0,"span",23),e.\u0275\u0275text(1),e.\u0275\u0275elementEnd(),e.\u0275\u0275template(2,_i,2,6,"span",24)(3,ci,1,6,"ng-template",null,6,e.\u0275\u0275templateRefExtractor)(5,di,1,1,"cd-label",25)(6,_o,1,1,"cd-label",26)),2&n){const t=c.data.row,o=e.\u0275\u0275reference(4);e.\u0275\u0275advance(),e.\u0275\u0275textInterpolate(t.name),e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf","complete"===(null==t||null==t.info?null:t.info.state))("ngIfElse",o),e.\u0275\u0275advance(3),e.\u0275\u0275property("ngIf","subvolume"!==(null==t||null==t.info?null:t.info.type)),e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf",null==t||null==t.info?null:t.info.pool_namespace)}}function ui(n,c){if(1&n&&(e.\u0275\u0275elementStart(0,"cd-alert-panel",37),e.\u0275\u0275text(1),e.\u0275\u0275elementEnd()),2&n){const t=e.\u0275\u0275nextContext(2);e.\u0275\u0275advance(),e.\u0275\u0275textInterpolate1(" ",t.errorMessage," ")}}function pi(n,c){if(1&n&&(e.\u0275\u0275elementContainerStart(0,30)(1,31),e.\u0275\u0275template(2,ui,2,1,"cd-alert-panel",32),e.\u0275\u0275elementStart(3,"div",33)(4,"div",34),e.\u0275\u0275element(5,"input",35),e.\u0275\u0275elementStart(6,"label",36),e.\u0275\u0275i18nStart(7,7),e.\u0275\u0275element(8,"cd-helper"),e.\u0275\u0275i18nEnd(),e.\u0275\u0275elementEnd()()(),e.\u0275\u0275elementContainerEnd()()),2&n){const t=c.form,o=e.\u0275\u0275nextContext();e.\u0275\u0275property("formGroup",t),e.\u0275\u0275advance(2),e.\u0275\u0275property("ngIf",o.errorMessage.length>1)}}let mi=(()=>{class n extends Te.g{constructor(t,o,i,r,p,F,D){super(),this.cephfsSubVolumeService=t,this.actionLabels=o,this.modalService=i,this.authStorageService=r,this.taskWrapper=p,this.cephfsSubvolumeGroupService=F,this.healthService=D,this.columns=[],this.selection=new A.y,this.icons=g.FI,this.errorMessage="",this.selectedName="",this.subject=new K.BehaviorSubject([]),this.groupsSubject=new K.BehaviorSubject([]),this.subvolumeGroupList=[],this.subVolumesList=[],this.activeGroupName="",this.permissions=this.authStorageService.getPermissions()}ngOnInit(){this.columns=[{name:$localize`Name`,prop:"name",flexGrow:1,cellTemplate:this.nameTpl},{name:$localize`Data Pool`,prop:"info.data_pool",flexGrow:.7,cellTransformation:O.x.badge,customTemplateConfig:{class:"badge-background-primary"}},{name:$localize`Usage`,prop:"info.bytes_pcent",flexGrow:.7,cellTemplate:this.quotaUsageTpl,cellClass:"text-right"},{name:$localize`Path`,prop:"info.path",flexGrow:1,cellTransformation:O.x.path},{name:$localize`Mode`,prop:"info.mode",flexGrow:.5,cellTemplate:this.modeToHumanReadableTpl},{name:$localize`Created`,prop:"info.created_at",flexGrow:.5,cellTransformation:O.x.timeAgo}],this.tableActions=[{name:this.actionLabels.CREATE,permission:"create",icon:g.FI.add,click:()=>this.openModal()},{name:this.actionLabels.EDIT,permission:"update",icon:g.FI.edit,click:()=>this.openModal(!0)},{name:this.actionLabels.ATTACH,permission:"read",icon:g.FI.bars,disable:()=>!this.selection?.hasSelection,click:()=>this.showAttachInfo()},{name:this.actionLabels.NFS_EXPORT,permission:"create",icon:g.FI.nfsExport,routerLink:()=>["/cephfs/nfs/create",this.fsName,E().isEmpty(this.activeGroupName)?ne.H:this.activeGroupName,{subvolume:this.selection?.first()?.name}],disable:()=>!this.selection?.hasSingleSelection},{name:this.actionLabels.REMOVE,permission:"delete",icon:g.FI.destroy,click:()=>this.removeSubVolumeModal()}],this.subVolumeGroups$=this.groupsSubject.pipe((0,u.switchMap)(()=>this.cephfsSubvolumeGroupService.get(this.fsName,!1).pipe((0,u.tap)(t=>{this.subvolumeGroupList=t.map(o=>o.name),this.subvolumeGroupList.unshift("")}),(0,u.catchError)(()=>(this.context.error(),(0,K.of)(null))))))}fetchData(){this.subject.next([])}ngOnChanges(t){t.fsName&&(this.subject.next([]),this.groupsSubject.next([]))}updateSelection(t){this.selection=t}showAttachInfo(){const t=this.selection?.selected?.[0];this.healthService.getClusterFsid().subscribe({next:o=>{this.modalRef=this.modalService.show(de,{onSubmit:()=>this.modalRef.close(),mountData:{fsId:o,fsName:this.fsName,rootPath:t.info.path}})}})}openModal(t=!1){this.modalService.show($,{fsName:this.fsName,subVolumeName:this.selection?.first()?.name,subVolumeGroupName:this.activeGroupName,pools:this.pools,isEdit:t})}removeSubVolumeModal(){this.removeForm=new Se.$({retainSnapshots:new T.FormControl(!1)}),this.errorMessage="",this.selectedName=this.selection.first().name,this.modalService.show(P.D,{impact:Tt.r.high,actionDescription:"remove",itemNames:[this.selectedName],itemDescription:"Subvolume",childFormGroup:this.removeForm,childFormGroupTemplate:this.removeTmpl,submitAction:()=>this.taskWrapper.wrapTaskAroundCall({task:new ie.O("cephfs/subvolume/remove",{subVolumeName:this.selectedName}),call:this.cephfsSubVolumeService.remove(this.fsName,this.selectedName,this.activeGroupName,this.removeForm.getValue("retainSnapshots"))}).subscribe({complete:()=>this.modalService.dismissAll(),error:t=>{this.modalRef.componentInstance.stopLoadingSpinner(),this.errorMessage=t.error.detail}})})}selectSubVolumeGroup(t){this.activeGroupName=t,this.getSubVolumes()}getSubVolumes(){this.subVolumes$=this.subject.pipe((0,u.switchMap)(()=>this.cephfsSubVolumeService.get(this.fsName,this.activeGroupName).pipe((0,u.catchError)(()=>(this.context?.error(),(0,K.of)(null))))))}static{this.\u0275fac=function(o){return new(o||n)(e.\u0275\u0275directiveInject(Yt.v),e.\u0275\u0275directiveInject(f.Ss),e.\u0275\u0275directiveInject(Ge.V),e.\u0275\u0275directiveInject(_.v),e.\u0275\u0275directiveInject(w.a),e.\u0275\u0275directiveInject(Jt.W),e.\u0275\u0275directiveInject(ue))}}static{this.\u0275cmp=e.\u0275\u0275defineComponent({type:n,selectors:[["cd-cephfs-subvolume-list"]],viewQuery:function(o,i){if(1&o&&(e.\u0275\u0275viewQuery(nt,7),e.\u0275\u0275viewQuery(at,7),e.\u0275\u0275viewQuery(St,7),e.\u0275\u0275viewQuery(vt,7),e.\u0275\u0275viewQuery(Mt,7),e.\u0275\u0275viewQuery(Fe,7)),2&o){let r;e.\u0275\u0275queryRefresh(r=e.\u0275\u0275loadQuery())&&(i.quotaUsageTpl=r.first),e.\u0275\u0275queryRefresh(r=e.\u0275\u0275loadQuery())&&(i.typeTpl=r.first),e.\u0275\u0275queryRefresh(r=e.\u0275\u0275loadQuery())&&(i.modeToHumanReadableTpl=r.first),e.\u0275\u0275queryRefresh(r=e.\u0275\u0275loadQuery())&&(i.nameTpl=r.first),e.\u0275\u0275queryRefresh(r=e.\u0275\u0275loadQuery())&&(i.quotaSizeTpl=r.first),e.\u0275\u0275queryRefresh(r=e.\u0275\u0275loadQuery())&&(i.removeTmpl=r.first)}},inputs:{fsName:"fsName",pools:"pools"},features:[e.\u0275\u0275InheritDefinitionFeature,e.\u0275\u0275NgOnChangesFeature],decls:18,vars:11,consts:()=>{let t,o;return t=$localize`:␟963d5259b684b8a4b60d3d0256f0b609c0dc7783␟8125916572042430518:Quota limit is not set`,o=$localize`:␟58e30271d585dbad2ddd09826a227c01f469826b␟5714834682768134941:Retain snapshots ${"\ufffd#8\ufffd"}:START_TAG_CD_HELPER:The subvolume can be removed retaining existing snapshots using this option. If snapshots are retained, the subvolume is considered empty for all operations not involving the retained snapshots.${"\ufffd/#8\ufffd"}:CLOSE_TAG_CD_HELPER:`,[["quotaUsageTpl",""],["typeTpl",""],["modeToHumanReadableTpl",""],["nameTpl",""],["removeTmpl",""],["noLimitTpl",""],["snapshotRetainedTpl",""],o,[1,"row"],["class","col-sm-2",4,"ngIf"],[1,"col-10","vertical-line"],["columnMode","flex","selectionType","single",3,"fetchData","updateSelection","data","columns","hasDetails"],[1,"table-actions"],["id","cephfs-subvolume-actions",1,"btn-group",3,"permission","selection","tableActions"],[1,"col-sm-2"],["title","Groups","inputIdentifier","group-filter",3,"emitActiveItem","items"],["decimals","2",3,"total","used","title",4,"ngIf","ngIfElse"],["decimals","2",3,"total","used","title"],["ngbTooltip",t,4,"ngIf"],["ngbTooltip",t],[3,"value"],[3,"ngClass","ngbTooltip",4,"ngFor","ngForOf"],[3,"ngClass","ngbTooltip"],[1,"fw-bold"],[4,"ngIf","ngIfElse"],[3,"value",4,"ngIf"],["value","namespaced",3,"tooltipText",4,"ngIf"],[1,"text-success",3,"ngClass","ngbTooltip"],[1,"text-warning",3,"ngClass","ngbTooltip"],["value","namespaced",3,"tooltipText"],[3,"formGroup"],["formGroupName","child"],["type","error",4,"ngIf"],[1,"form-group"],[1,"custom-control","custom-checkbox"],["type","checkbox","name","retainSnapshots","id","retainSnapshots","formControlName","retainSnapshots",1,"custom-control-input"],["for","retainSnapshots",1,"custom-control-label"],["type","error"]]},template:function(o,i){if(1&o){const r=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"div",8),e.\u0275\u0275template(1,st,2,1,"div",9),e.\u0275\u0275pipe(2,"async"),e.\u0275\u0275elementStart(3,"div",10)(4,"cd-table",11),e.\u0275\u0275pipe(5,"async"),e.\u0275\u0275listener("fetchData",function(){return e.\u0275\u0275restoreView(r),e.\u0275\u0275resetView(i.fetchData())})("updateSelection",function(F){return e.\u0275\u0275restoreView(r),e.\u0275\u0275resetView(i.updateSelection(F))}),e.\u0275\u0275elementStart(6,"div",12),e.\u0275\u0275element(7,"cd-table-actions",13),e.\u0275\u0275elementEnd()()()(),e.\u0275\u0275template(8,ro,3,2,"ng-template",null,0,e.\u0275\u0275templateRefExtractor)(10,ri,1,1,"ng-template",null,1,e.\u0275\u0275templateRefExtractor)(12,li,2,3,"ng-template",null,2,e.\u0275\u0275templateRefExtractor)(14,co,7,5,"ng-template",null,3,e.\u0275\u0275templateRefExtractor)(16,pi,9,2,"ng-template",null,4,e.\u0275\u0275templateRefExtractor)}2&o&&(e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf",e.\u0275\u0275pipeBind1(2,7,i.subVolumeGroups$)),e.\u0275\u0275advance(3),e.\u0275\u0275property("data",e.\u0275\u0275pipeBind1(5,9,i.subVolumes$))("columns",i.columns)("hasDetails",!1),e.\u0275\u0275advance(3),e.\u0275\u0275property("permission",i.permissions.cephfs)("selection",i.selection)("tableActions",i.tableActions))},dependencies:[l.NgClass,l.NgForOf,l.NgIf,b.m,Lt.o,it.m,$e,Ce,Ke.O,dt.j,De.S,Me.a,xe.C,ze.E,T.CheckboxControlValueAccessor,T.NgControlStatus,T.NgControlStatusGroup,T.FormGroupDirective,T.FormControlName,T.FormGroupName,V.NgbTooltip,l.AsyncPipe,mt.l,pn.I]})}}return n})();function fi(n,c){1&n&&(e.\u0275\u0275elementStart(0,"span",37),e.\u0275\u0275i18n(1,10),e.\u0275\u0275elementEnd())}function Ei(n,c){1&n&&(e.\u0275\u0275elementStart(0,"span",37),e.\u0275\u0275i18n(1,11),e.\u0275\u0275elementEnd())}function gi(n,c){1&n&&(e.\u0275\u0275elementStart(0,"span",37),e.\u0275\u0275i18n(1,12),e.\u0275\u0275elementEnd())}function Ci(n,c){if(1&n&&e.\u0275\u0275template(0,fi,2,0,"span",36)(1,Ei,2,0,"span",36)(2,gi,2,0,"span",36),2&n){e.\u0275\u0275nextContext();const t=e.\u0275\u0275reference(3),o=e.\u0275\u0275nextContext();e.\u0275\u0275property("ngIf",o.subvolumegroupForm.showError("subvolumegroupName",t,"required")),e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf",o.subvolumegroupForm.showError("subvolumegroupName",t,"notUnique")),e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf",o.subvolumegroupForm.showError("subvolumegroupName",t,"pattern"))}}function Si(n,c){1&n&&(e.\u0275\u0275elementStart(0,"span",37),e.\u0275\u0275i18n(1,13),e.\u0275\u0275elementEnd())}function hi(n,c){if(1&n&&e.\u0275\u0275template(0,Si,2,0,"span",36),2&n){e.\u0275\u0275nextContext();const t=e.\u0275\u0275reference(3),o=e.\u0275\u0275nextContext();e.\u0275\u0275property("ngIf",o.subvolumegroupForm.showError("size",t,"pattern"))}}function Ti(n,c){if(1&n&&(e.\u0275\u0275elementStart(0,"option",38),e.\u0275\u0275text(1),e.\u0275\u0275elementEnd()),2&n){const t=c.$implicit;e.\u0275\u0275property("value",t.pool),e.\u0275\u0275advance(),e.\u0275\u0275textInterpolate(t.pool)}}function Fi(n,c){if(1&n){const t=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementContainerStart(0),e.\u0275\u0275elementStart(1,"div",18)(2,"form",19,0)(4,"div",20)(5,"cds-text-label",21),e.\u0275\u0275i18nStart(6,4),e.\u0275\u0275element(7,"input",22),e.\u0275\u0275i18nEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275template(8,Ci,3,3,"ng-template",null,1,e.\u0275\u0275templateRefExtractor),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(10,"div",20)(11,"cds-text-label",23),e.\u0275\u0275i18nStart(12,5),e.\u0275\u0275element(13,"input",24),e.\u0275\u0275i18nEnd(),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(14,"div",20)(15,"cds-text-label",25),e.\u0275\u0275i18nStart(16,6),e.\u0275\u0275element(17,"input",26),e.\u0275\u0275i18nEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275template(18,hi,1,1,"ng-template",null,2,e.\u0275\u0275templateRefExtractor),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(20,"div",20)(21,"cds-select",27),e.\u0275\u0275template(22,Ti,2,2,"option",28),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(23,"div",20)(24,"cds-text-label",29),e.\u0275\u0275i18nStart(25,7),e.\u0275\u0275element(26,"input",30),e.\u0275\u0275i18nEnd(),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(27,"div",20)(28,"cds-text-label",31),e.\u0275\u0275i18nStart(29,8),e.\u0275\u0275element(30,"input",32),e.\u0275\u0275i18nEnd(),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(31,"div",20)(32,"label",33),e.\u0275\u0275i18n(33,9),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(34,"cd-help-text"),e.\u0275\u0275text(35,"Permissions for the directory. Default mode is 755 which is rwxr-xr-x"),e.\u0275\u0275elementEnd(),e.\u0275\u0275element(36,"cd-checked-table-form",34),e.\u0275\u0275elementEnd()()(),e.\u0275\u0275elementStart(37,"cd-form-button-panel",35),e.\u0275\u0275pipe(38,"titlecase"),e.\u0275\u0275pipe(39,"upperFirst"),e.\u0275\u0275listener("submitActionEvent",function(){e.\u0275\u0275restoreView(t);const i=e.\u0275\u0275nextContext();return e.\u0275\u0275resetView(i.submit())}),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementContainerEnd()}if(2&n){const t=e.\u0275\u0275reference(9),o=e.\u0275\u0275reference(19),i=e.\u0275\u0275nextContext();e.\u0275\u0275advance(2),e.\u0275\u0275property("formGroup",i.subvolumegroupForm),e.\u0275\u0275advance(3),e.\u0275\u0275property("invalid",i.subvolumegroupForm.controls.subvolumegroupName.invalid&&i.subvolumegroupForm.controls.subvolumegroupName.dirty)("invalidText",t),e.\u0275\u0275advance(2),e.\u0275\u0275property("invalid",i.subvolumegroupForm.controls.subvolumegroupName.invalid&&i.subvolumegroupForm.controls.subvolumegroupName.dirty),e.\u0275\u0275advance(8),e.\u0275\u0275property("invalid",i.subvolumegroupForm.controls.size.invalid&&i.subvolumegroupForm.controls.size.dirty)("invalidText",o),e.\u0275\u0275advance(2),e.\u0275\u0275property("invalid",i.subvolumegroupForm.controls.size.invalid&&i.subvolumegroupForm.controls.size.dirty),e.\u0275\u0275advance(5),e.\u0275\u0275property("ngForOf",i.dataPools),e.\u0275\u0275advance(14),e.\u0275\u0275property("data",i.scopePermissions)("columns",i.columns)("form",i.subvolumegroupForm)("isTableForOctalMode",!0)("initialValue",i.initialMode)("scopes",i.scopes)("isDisabled",i.isEdit),e.\u0275\u0275advance(),e.\u0275\u0275property("form",i.subvolumegroupForm)("submitText",e.\u0275\u0275pipeBind1(38,18,i.action)+" "+e.\u0275\u0275pipeBind1(39,20,i.resource))("modalForm",!0)}}let vi=(()=>{class n extends Te.g{constructor(t,o,i,r,p,F,D,x,H,X=!1){super(),this.actionLabels=t,this.taskWrapper=o,this.cephfsSubvolumeGroupService=i,this.formatter=r,this.dimlessBinary=p,this.octalToHumanReadable=F,this.fsName=D,this.subvolumegroupName=x,this.pools=H,this.isEdit=X,this.scopePermissions=[],this.initialMode={owner:["read","write","execute"],group:["read","execute"],others:["read","execute"]},this.scopes=["owner","group","others"],this.resource=$localize`subvolume group`}ngOnInit(){this.action=this.actionLabels.CREATE,this.columns=[{prop:"scope",name:$localize`All`,flexGrow:.5},{prop:"read",name:$localize`Read`,flexGrow:.5,cellClass:"text-center"},{prop:"write",name:$localize`Write`,flexGrow:.5,cellClass:"text-center"},{prop:"execute",name:$localize`Execute`,flexGrow:.5,cellClass:"text-center"}],this.dataPools=this.pools.filter(t=>"data"===t.type),this.createForm(),this.isEdit?this.populateForm():this.loadingReady()}createForm(){this.subvolumegroupForm=new Se.$({volumeName:new T.FormControl({value:this.fsName,disabled:!0}),subvolumegroupName:new T.FormControl("",{validators:[T.Validators.required,T.Validators.pattern(/^[.A-Za-z0-9_-]+$/)],asyncValidators:[ge.xQ.unique(this.cephfsSubvolumeGroupService.exists,this.cephfsSubvolumeGroupService,null,null,this.fsName)]}),pool:new T.FormControl(this.dataPools[0]?.pool,{validators:[T.Validators.required]}),size:new T.FormControl(null,{updateOn:"blur"}),uid:new T.FormControl(null),gid:new T.FormControl(null),mode:new T.FormControl({})})}populateForm(){this.action=this.actionLabels.EDIT,this.cephfsSubvolumeGroupService.info(this.fsName,this.subvolumegroupName).subscribe(t=>{this.subvolumegroupForm.get("subvolumegroupName").disable(),this.subvolumegroupForm.get("subvolumegroupName").setValue(this.subvolumegroupName),"infinite"!==t.bytes_quota&&this.subvolumegroupForm.get("size").setValue(this.dimlessBinary.transform(t.bytes_quota)),this.subvolumegroupForm.get("uid").setValue(t.uid),this.subvolumegroupForm.get("gid").setValue(t.gid),this.initialMode=this.octalToHumanReadable.transform(t.mode,!0),this.loadingReady()})}submit(){const t=this.subvolumegroupForm.getValue("subvolumegroupName"),o=this.subvolumegroupForm.getValue("pool"),i=this.formatter.toBytes(this.subvolumegroupForm.getValue("size"))||0,r=this.subvolumegroupForm.getValue("uid"),p=this.subvolumegroupForm.getValue("gid"),F=this.formatter.toOctalPermission(this.subvolumegroupForm.getValue("mode"));this.isEdit?this.taskWrapper.wrapTaskAroundCall({task:new ie.O("cephfs/subvolume/group/"+f.Qp.EDIT,{subvolumegroupName:t}),call:this.cephfsSubvolumeGroupService.create(this.fsName,t,o,String(i),r,p,F)}).subscribe({error:()=>{this.subvolumegroupForm.setErrors({cdSubmitButton:!0})},complete:()=>{this.closeModal()}}):this.taskWrapper.wrapTaskAroundCall({task:new ie.O("cephfs/subvolume/group/"+f.Qp.CREATE,{subvolumegroupName:t}),call:this.cephfsSubvolumeGroupService.create(this.fsName,t,o,String(i),r,p,F)}).subscribe({error:()=>{this.subvolumegroupForm.setErrors({cdSubmitButton:!0})},complete:()=>{this.closeModal()}})}static{this.\u0275fac=function(o){return new(o||n)(e.\u0275\u0275directiveInject(f.Ss),e.\u0275\u0275directiveInject(w.a),e.\u0275\u0275directiveInject(Jt.W),e.\u0275\u0275directiveInject(hn.k),e.\u0275\u0275directiveInject(mt.l),e.\u0275\u0275directiveInject(pn.I),e.\u0275\u0275directiveInject("fsName",8),e.\u0275\u0275directiveInject("subvolumegroupName",8),e.\u0275\u0275directiveInject("pools",8),e.\u0275\u0275directiveInject("isEdit",8))}}static{this.\u0275cmp=e.\u0275\u0275defineComponent({type:n,selectors:[["cd-cephfs-subvolumegroup-form"]],features:[e.\u0275\u0275InheritDefinitionFeature],decls:7,vars:9,consts:()=>{let t,o,i,r,p,F,D,x,H,X,Z,re,pe,be,Pe;return t=$localize`:␟fb127ea03835b3230f0ed981c7080e2ccb879621␟3346778808274133574:${"\ufffd0\ufffd"}:INTERPOLATION: ${"\ufffd1\ufffd"}:INTERPOLATION_1:`,o=$localize`:␟6df5486c9d526e51d0618fdc4558abe004307ee1␟8253929787559373446:Subvolume group name...`,i=$localize`:␟492b46633749d05dc2e2dd51858f7ef8d59c2835␟5082538775333860868:The size of the subvolume is specified by setting a quota on it.
                          If left blank or put 0, then quota will be infinite`,r=$localize`:␟f0016bd458baa88284a658ce9eeda42d8ad88d2c␟2739243284262593813:e.g., 10GiB`,p=$localize`:␟5408f26ef48cea5b1042cc20781616622cc83bc5␟6004297985262322523:By default, the data_pool_layout of the parent directory is selected.`,F=$localize`:␟da6954d55a46943dd77159d65e5b81f51b0e3acb␟271472573961202879:Name ${"\ufffd#7\ufffd\ufffd/#7\ufffd"}:TAG_INPUT:`,D=$localize`:␟bc10faea89ab159ba5724d6f4863196d7ac6c9ab␟6253438817097773454:Volume name ${"\ufffd#13\ufffd\ufffd/#13\ufffd"}:TAG_INPUT:`,x=$localize`:␟cf68b93f7ce07de1b3d9f7429a8a29595c4fe302␟5881817813163804952:Size ${"\ufffd#17\ufffd\ufffd/#17\ufffd"}:TAG_INPUT:`,H=$localize`:␟24bd69b6c334472d0aaefe8ade289310e3e65564␟3314973177575788995:UID ${"\ufffd#26\ufffd\ufffd/#26\ufffd"}:TAG_INPUT:`,X=$localize`:␟20d558ebd10cbfb1955896b2a49341b49951dc9d␟2433505658977168644:GID ${"\ufffd#30\ufffd\ufffd/#30\ufffd"}:TAG_INPUT:`,Z=$localize`:␟b04e4b4ddc6dfdc6fd2b1c1bb789333a51cf89b3␟7479570597537922716:Mode `,re=$localize`:␟7cbdabcece469fab89cfa687ab152bca18b97498␟1417693714872528491:This field is required.`,pe=$localize`:␟4a67528e98485cefec44731707c4863da1619bb9␟5661299791362108018:The subvolume group already exists.`,be=$localize`:␟ec736eca11b59b7eae93df6b3b014db532d0da90␟8030242829118993503:Subvolume name can only contain letters, numbers, '.', '-' or '_'`,Pe=$localize`:␟25db023269cd62168393b201f615ec90e07f3df8␟4749416028992272245:Size must be a number or in a valid format. eg: 5 GiB`,[["formDir","ngForm"],["subvolumegroupNameError",""],["sizeError",""],t,F,D,x,H,X,Z,re,pe,be,Pe,["size","lg",3,"overlaySelected","open","hasScrollingContent"],[3,"closeSelect"],["cdsModalHeaderHeading",""],[4,"cdFormLoading"],["cdsModalContent",""],["name","subvolumegroupForm","novalidate","",3,"formGroup"],[1,"form-item"],["label","Name","for","subvolumegroupName","cdRequiredField","Name",3,"invalid","invalidText"],["cdsText","","type","text","placeholder",o,"id","subvolumegroupName","name","subvolumegroupName","formControlName","subvolumegroupName","modal-primary-focus","",3,"invalid"],["label","Volume name","for","volumeName"],["cdsText","","type","text","id","volumeName","name","volumeName","formControlName","volumeName"],["label","Size","for","size","helperText",i,3,"invalid","invalidText"],["cdsText","","type","text","id","size","name","size","formControlName","size","placeholder",r,"defaultUnit","GiB","cdDimlessBinary","",3,"invalid"],["label","CephFS Pools","for","pool","formControlName","pool","name","pool","id","pool","helperText",p],[3,"value",4,"ngFor","ngForOf"],["label","UID","for","uid"],["cdsText","","type","number","placeholder","Subvolume UID...","id","uid","name","uid","formControlName","uid"],["label","GID","for","gid"],["cdsText","","type","number","placeholder","Subvolume group GID...","id","gid","name","gid","formControlName","gid"],["for","mode",1,"cds--label"],["inputField","mode",3,"data","columns","form","isTableForOctalMode","initialValue","scopes","isDisabled"],[3,"submitActionEvent","form","submitText","modalForm"],["class","invalid-feedback",4,"ngIf"],[1,"invalid-feedback"],[3,"value"]]},template:function(o,i){1&o&&(e.\u0275\u0275elementStart(0,"cds-modal",14),e.\u0275\u0275listener("overlaySelected",function(){return i.closeModal()}),e.\u0275\u0275elementStart(1,"cds-modal-header",15),e.\u0275\u0275listener("closeSelect",function(){return i.closeModal()}),e.\u0275\u0275elementStart(2,"h3",16),e.\u0275\u0275i18n(3,3),e.\u0275\u0275pipe(4,"titlecase"),e.\u0275\u0275pipe(5,"upperFirst"),e.\u0275\u0275elementEnd()(),e.\u0275\u0275template(6,Fi,40,22,"ng-container",17),e.\u0275\u0275elementEnd()),2&o&&(e.\u0275\u0275property("open",i.open)("hasScrollingContent",!0),e.\u0275\u0275advance(5),e.\u0275\u0275i18nExp(e.\u0275\u0275pipeBind1(4,5,i.action))(e.\u0275\u0275pipeBind1(5,7,i.resource)),e.\u0275\u0275i18nApply(3),e.\u0275\u0275advance(),e.\u0275\u0275property("cdFormLoading",i.loading))},dependencies:[l.NgForOf,l.NgIf,Q.e,Ye.O,Rn.N,On.Y,rt.G,De.S,ze.E,Et.P,T.\u0275NgNoValidate,T.NgSelectOption,T.\u0275NgSelectMultipleOption,T.DefaultValueAccessor,T.NumberValueAccessor,T.NgControlStatus,T.NgControlStatusGroup,T.FormGroupDirective,T.FormControlName,L.TextInputLabelComponent,L.TextInput,L.Select,L.Option,L.Modal,L.ModalHeader,L.ModalContent,L.ModalHeaderHeading,l.TitleCasePipe,Oe.r]})}}return n})();const Mi=["quotaUsageTpl"],Ri=["typeTpl"],Oi=["modeToHumanReadableTpl"],Pi=["nameTpl"],bi=["quotaSizeTpl"];function Ni(n,c){if(1&n){const t=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"cd-table",6),e.\u0275\u0275listener("fetchData",function(){e.\u0275\u0275restoreView(t);const i=e.\u0275\u0275nextContext(2);return e.\u0275\u0275resetView(i.fetchData())})("updateSelection",function(i){e.\u0275\u0275restoreView(t);const r=e.\u0275\u0275nextContext(2);return e.\u0275\u0275resetView(r.updateSelection(i))}),e.\u0275\u0275elementStart(1,"div",7),e.\u0275\u0275element(2,"cd-table-actions",8),e.\u0275\u0275elementEnd()()}if(2&n){const t=e.\u0275\u0275nextContext().ngIf,o=e.\u0275\u0275nextContext();e.\u0275\u0275property("data",t)("columns",o.columns)("hasDetails",!1),e.\u0275\u0275advance(2),e.\u0275\u0275property("permission",o.permissions.cephfs)("selection",o.selection)("tableActions",o.tableActions)}}function Ii(n,c){if(1&n&&(e.\u0275\u0275elementContainerStart(0),e.\u0275\u0275template(1,Ni,3,6,"cd-table",5),e.\u0275\u0275elementContainerEnd()),2&n){const t=c.ngIf;e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf",t)}}function Ai(n,c){if(1&n&&e.\u0275\u0275element(0,"cd-usage-bar",10),2&n){const t=e.\u0275\u0275nextContext().data.row;e.\u0275\u0275property("total",t.info.bytes_quota)("used",t.info.bytes_used)("title",t.name)}}function Di(n,c){if(1&n&&(e.\u0275\u0275elementStart(0,"span",12),e.\u0275\u0275text(1),e.\u0275\u0275pipe(2,"dimlessBinary"),e.\u0275\u0275elementEnd()),2&n){const t=e.\u0275\u0275nextContext(2).data.row;e.\u0275\u0275advance(),e.\u0275\u0275textInterpolate1(" ",e.\u0275\u0275pipeBind1(2,1,t.info.bytes_used),"")}}function yi(n,c){if(1&n&&e.\u0275\u0275template(0,Di,3,3,"span",11),2&n){const t=e.\u0275\u0275nextContext().data.row;e.\u0275\u0275property("ngIf","undefined"===t.info.bytes_pcent)}}function Li(n,c){if(1&n&&e.\u0275\u0275template(0,Ai,1,3,"cd-usage-bar",9)(1,yi,1,1,"ng-template",null,3,e.\u0275\u0275templateRefExtractor),2&n){const t=c.data.row,o=e.\u0275\u0275reference(2);e.\u0275\u0275property("ngIf",t.info.bytes_pcent&&"undefined"!==t.info.bytes_pcent)("ngIfElse",o)}}function $i(n,c){1&n&&e.\u0275\u0275element(0,"cd-label",13),2&n&&e.\u0275\u0275property("value",c.data.value)}function xi(n,c){if(1&n&&(e.\u0275\u0275elementStart(0,"span",15),e.\u0275\u0275text(1),e.\u0275\u0275elementEnd()),2&n){const t=c.$implicit;e.\u0275\u0275property("ngClass",t.class)("ngbTooltip",t.toolTip),e.\u0275\u0275advance(),e.\u0275\u0275textInterpolate1(" ",t.content," ")}}function Ui(n,c){1&n&&(e.\u0275\u0275template(0,xi,2,3,"span",14),e.\u0275\u0275pipe(1,"octalToHumanReadable")),2&n&&e.\u0275\u0275property("ngForOf",e.\u0275\u0275pipeBind1(1,1,c.data.value))}let wi=(()=>{class n{constructor(t,o,i,r,p,F){this.cephfsSubvolumeGroup=t,this.actionLabels=o,this.modalService=i,this.authStorageService=r,this.taskWrapper=p,this.cdsModalService=F,this.selection=new A.y,this.icons=g.FI,this.subject=new K.BehaviorSubject([]),this.permissions=this.authStorageService.getPermissions()}ngOnInit(){this.columns=[{name:$localize`Name`,prop:"name",flexGrow:.6,cellTransformation:O.x.bold},{name:$localize`Data Pool`,prop:"info.data_pool",flexGrow:.7,cellTransformation:O.x.badge,customTemplateConfig:{class:"badge-background-primary"}},{name:$localize`Usage`,prop:"info.bytes_pcent",flexGrow:.7,cellTemplate:this.quotaUsageTpl,cellClass:"text-right"},{name:$localize`Mode`,prop:"info.mode",flexGrow:.5,cellTemplate:this.modeToHumanReadableTpl},{name:$localize`Created`,prop:"info.created_at",flexGrow:.5,cellTransformation:O.x.timeAgo}],this.tableActions=[{name:this.actionLabels.CREATE,permission:"create",icon:g.FI.add,click:()=>this.openModal(),canBePrimary:t=>!t.hasSelection},{name:this.actionLabels.EDIT,permission:"update",icon:g.FI.edit,click:()=>this.openModal(!0)},{name:this.actionLabels.NFS_EXPORT,permission:"create",icon:g.FI.nfsExport,routerLink:()=>["/cephfs/nfs/create",this.fsName,this.selection?.first()?.name],disable:()=>!this.selection.hasSingleSelection},{name:this.actionLabels.REMOVE,permission:"delete",icon:g.FI.destroy,click:()=>this.removeSubVolumeModal()}],this.subvolumeGroup$=this.subject.pipe((0,u.switchMap)(()=>this.cephfsSubvolumeGroup.get(this.fsName).pipe((0,u.catchError)(()=>(this.context.error(),(0,K.of)(null))))),(0,u.shareReplay)(1))}fetchData(){this.subject.next([])}ngOnChanges(t){t.fsName&&this.subject.next([])}updateSelection(t){this.selection=t}openModal(t=!1){this.modalService.show(vi,{fsName:this.fsName,subvolumegroupName:this.selection?.first()?.name,pools:this.pools,isEdit:t})}removeSubVolumeModal(){const t=this.selection.first().name;this.cdsModalService.show(P.D,{impact:Tt.r.high,itemDescription:"subvolume group",itemNames:[t],actionDescription:"remove",submitActionObservable:()=>this.taskWrapper.wrapTaskAroundCall({task:new ie.O("cephfs/subvolume/group/remove",{subvolumegroupName:t}),call:this.cephfsSubvolumeGroup.remove(this.fsName,t)})})}static{this.\u0275fac=function(o){return new(o||n)(e.\u0275\u0275directiveInject(Jt.W),e.\u0275\u0275directiveInject(f.Ss),e.\u0275\u0275directiveInject(Ge.V),e.\u0275\u0275directiveInject(_.v),e.\u0275\u0275directiveInject(w.a),e.\u0275\u0275directiveInject(Ge.V))}}static{this.\u0275cmp=e.\u0275\u0275defineComponent({type:n,selectors:[["cd-cephfs-subvolume-group"]],viewQuery:function(o,i){if(1&o&&(e.\u0275\u0275viewQuery(Mi,7),e.\u0275\u0275viewQuery(Ri,7),e.\u0275\u0275viewQuery(Oi,7),e.\u0275\u0275viewQuery(Pi,7),e.\u0275\u0275viewQuery(bi,7)),2&o){let r;e.\u0275\u0275queryRefresh(r=e.\u0275\u0275loadQuery())&&(i.quotaUsageTpl=r.first),e.\u0275\u0275queryRefresh(r=e.\u0275\u0275loadQuery())&&(i.typeTpl=r.first),e.\u0275\u0275queryRefresh(r=e.\u0275\u0275loadQuery())&&(i.modeToHumanReadableTpl=r.first),e.\u0275\u0275queryRefresh(r=e.\u0275\u0275loadQuery())&&(i.nameTpl=r.first),e.\u0275\u0275queryRefresh(r=e.\u0275\u0275loadQuery())&&(i.quotaSizeTpl=r.first)}},inputs:{fsName:"fsName",pools:"pools"},features:[e.\u0275\u0275NgOnChangesFeature],decls:8,vars:3,consts:()=>{let t;return t=$localize`:␟963d5259b684b8a4b60d3d0256f0b609c0dc7783␟8125916572042430518:Quota limit is not set`,[["quotaUsageTpl",""],["typeTpl",""],["modeToHumanReadableTpl",""],["noLimitTpl",""],[4,"ngIf"],["columnMode","flex","selectionType","single",3,"data","columns","hasDetails","fetchData","updateSelection",4,"ngIf"],["columnMode","flex","selectionType","single",3,"fetchData","updateSelection","data","columns","hasDetails"],[1,"table-actions"],["id","cephfs-subvolumegropup-actions",1,"btn-group",3,"permission","selection","tableActions"],["decimals","2",3,"total","used","title",4,"ngIf","ngIfElse"],["decimals","2",3,"total","used","title"],["ngbTooltip",t,4,"ngIf"],["ngbTooltip",t],[3,"value"],[3,"ngClass","ngbTooltip",4,"ngFor","ngForOf"],[3,"ngClass","ngbTooltip"]]},template:function(o,i){1&o&&(e.\u0275\u0275template(0,Ii,2,1,"ng-container",4),e.\u0275\u0275pipe(1,"async"),e.\u0275\u0275template(2,Li,3,2,"ng-template",null,0,e.\u0275\u0275templateRefExtractor)(4,$i,1,1,"ng-template",null,1,e.\u0275\u0275templateRefExtractor)(6,Ui,2,3,"ng-template",null,2,e.\u0275\u0275templateRefExtractor)),2&o&&e.\u0275\u0275property("ngIf",e.\u0275\u0275pipeBind1(1,1,i.subvolumeGroup$))},dependencies:[l.NgClass,l.NgForOf,l.NgIf,Lt.o,$e,Ke.O,dt.j,V.NgbTooltip,l.AsyncPipe,mt.l,pn.I]})}}return n})();function Gi(n,c){1&n&&(e.\u0275\u0275elementStart(0,"span",22),e.\u0275\u0275i18n(1,5),e.\u0275\u0275elementEnd())}function Ve(n,c){1&n&&(e.\u0275\u0275elementStart(0,"span",22),e.\u0275\u0275i18n(1,6),e.\u0275\u0275elementEnd())}function F_(n,c){if(1&n&&e.\u0275\u0275template(0,Gi,2,0,"span",21)(1,Ve,2,0,"span",21),2&n){e.\u0275\u0275nextContext();const t=e.\u0275\u0275reference(2),o=e.\u0275\u0275nextContext();e.\u0275\u0275property("ngIf",o.snapshotForm.showError("snapshotName",t,"required")),e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf",o.snapshotForm.showError("snapshotName",t,"notUnique"))}}function v_(n,c){1&n&&(e.\u0275\u0275elementStart(0,"option",27),e.\u0275\u0275text(1,"Default"),e.\u0275\u0275elementEnd())}function M_(n,c){if(1&n&&(e.\u0275\u0275elementStart(0,"option",28),e.\u0275\u0275text(1),e.\u0275\u0275elementEnd()),2&n){const t=e.\u0275\u0275nextContext().$implicit;e.\u0275\u0275property("value",t),e.\u0275\u0275advance(),e.\u0275\u0275textInterpolate(t)}}function R_(n,c){if(1&n&&(e.\u0275\u0275elementContainerStart(0),e.\u0275\u0275template(1,v_,2,0,"option",25)(2,M_,2,2,"option",26),e.\u0275\u0275elementContainerEnd()),2&n){const t=c.$implicit;e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf",""==t),e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf",""!==t)}}function O_(n,c){if(1&n&&(e.\u0275\u0275elementStart(0,"cds-select",23),e.\u0275\u0275template(1,R_,3,2,"ng-container",24),e.\u0275\u0275elementEnd()),2&n){const t=e.\u0275\u0275nextContext(2);e.\u0275\u0275advance(),e.\u0275\u0275property("ngForOf",t.subVolumeGroups)}}function P_(n,c){if(1&n&&(e.\u0275\u0275elementStart(0,"option",28),e.\u0275\u0275text(1),e.\u0275\u0275elementEnd()),2&n){const t=c.$implicit;e.\u0275\u0275property("value",t.name),e.\u0275\u0275advance(),e.\u0275\u0275textInterpolate(t.name)}}function b_(n,c){if(1&n){const t=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"div",13)(1,"cds-select",29),e.\u0275\u0275listener("registerOnChange",function(){e.\u0275\u0275restoreView(t);const i=e.\u0275\u0275nextContext(2);return e.\u0275\u0275resetView(i.resetValidators(i.selection.value))}),e.\u0275\u0275template(2,P_,2,2,"option",30),e.\u0275\u0275elementEnd()()}if(2&n){const t=c.ngIf;e.\u0275\u0275advance(2),e.\u0275\u0275property("ngForOf",t)}}function N_(n,c){if(1&n){const t=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementContainerStart(0),e.\u0275\u0275elementStart(1,"form",11,0)(3,"div",12)(4,"div",13)(5,"cds-text-label",14),e.\u0275\u0275i18nStart(6,3),e.\u0275\u0275element(7,"input",15),e.\u0275\u0275i18nEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275template(8,F_,2,2,"ng-template",null,1,e.\u0275\u0275templateRefExtractor),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(10,"div",13)(11,"cds-text-label",16),e.\u0275\u0275i18nStart(12,4),e.\u0275\u0275element(13,"input",17),e.\u0275\u0275i18nEnd(),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(14,"div",13),e.\u0275\u0275template(15,O_,2,1,"cds-select",18),e.\u0275\u0275elementEnd(),e.\u0275\u0275template(16,b_,3,1,"div",19),e.\u0275\u0275pipe(17,"async"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(18,"cd-form-button-panel",20),e.\u0275\u0275pipe(19,"titlecase"),e.\u0275\u0275pipe(20,"upperFirst"),e.\u0275\u0275listener("submitActionEvent",function(){e.\u0275\u0275restoreView(t);const i=e.\u0275\u0275nextContext();return e.\u0275\u0275resetView(i.submit())}),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementContainerEnd()}if(2&n){const t=e.\u0275\u0275reference(9),o=e.\u0275\u0275nextContext();e.\u0275\u0275advance(),e.\u0275\u0275property("formGroup",o.snapshotForm),e.\u0275\u0275advance(4),e.\u0275\u0275property("invalid",o.snapshotForm.controls.snapshotName.invalid&&o.snapshotForm.controls.snapshotName.dirty)("invalidText",t),e.\u0275\u0275advance(2),e.\u0275\u0275property("invalid",o.snapshotForm.controls.snapshotName.invalid&&o.snapshotForm.controls.snapshotName.dirty),e.\u0275\u0275advance(8),e.\u0275\u0275property("ngIf",o.subVolumeGroups),e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf",e.\u0275\u0275pipeBind1(17,9,o.subVolumes$)),e.\u0275\u0275advance(2),e.\u0275\u0275property("form",o.snapshotForm)("submitText",e.\u0275\u0275pipeBind1(19,11,o.action)+" "+e.\u0275\u0275pipeBind1(20,13,o.resource))("modalForm",!0)}}let I_=(()=>{class n extends Te.g{constructor(t,o,i,r,p,F,D=!1){super(),this.actionLabels=t,this.taskWrapper=o,this.cephFsSubvolumeService=i,this.fsName=r,this.subVolumeName=p,this.subVolumeGroupName=F,this.isEdit=D,this.resource=$localize`snapshot`,this.action=this.actionLabels.CREATE}ngOnInit(){this.createForm(),this.subVolumes$=this.cephFsSubvolumeService.get(this.fsName,this.subVolumeGroupName,!1),this.loadingReady()}createForm(){this.snapshotForm=new Se.$({snapshotName:new T.FormControl(lt()().toISOString(!0),{validators:[T.Validators.required],asyncValidators:[ge.xQ.unique(this.cephFsSubvolumeService.snapshotExists,this.cephFsSubvolumeService,null,null,this.fsName,this.subVolumeName,this.subVolumeGroupName)]}),volumeName:new T.FormControl({value:this.fsName,disabled:!0}),subVolumeName:new T.FormControl(this.subVolumeName),subvolumeGroupName:new T.FormControl(this.subVolumeGroupName)})}onSelectionChange(t){this.subVolumeGroupName=t,this.subVolumes$=this.cephFsSubvolumeService.get(this.fsName,this.subVolumeGroupName,!1),this.subVolumes$.subscribe(o=>{this.subVolumeName=o[0].name,this.snapshotForm.get("subVolumeName").setValue(this.subVolumeName),this.resetValidators()})}resetValidators(t){this.subVolumeName=t,this.snapshotForm.get("snapshotName").setAsyncValidators(ge.xQ.unique(this.cephFsSubvolumeService.snapshotExists,this.cephFsSubvolumeService,null,null,this.fsName,this.subVolumeName,this.subVolumeGroupName)),this.snapshotForm.get("snapshotName").updateValueAndValidity()}submit(){const t=this.snapshotForm.getValue("snapshotName"),o=this.snapshotForm.getValue("subVolumeName"),i=this.snapshotForm.getValue("subvolumeGroupName"),r=this.snapshotForm.getValue("volumeName");this.taskWrapper.wrapTaskAroundCall({task:new ie.O("cephfs/subvolume/snapshot/"+f.Qp.CREATE,{snapshotName:t}),call:this.cephFsSubvolumeService.createSnapshot(r,t,o,i)}).subscribe({error:()=>this.snapshotForm.setErrors({cdSubmitButton:!0}),complete:()=>this.closeModal()})}static{this.\u0275fac=function(o){return new(o||n)(e.\u0275\u0275directiveInject(f.Ss),e.\u0275\u0275directiveInject(w.a),e.\u0275\u0275directiveInject(Yt.v),e.\u0275\u0275directiveInject("fsName",8),e.\u0275\u0275directiveInject("subVolumeName",8),e.\u0275\u0275directiveInject("subVolumeGroupName",8),e.\u0275\u0275directiveInject("isEdit",8))}}static{this.\u0275cmp=e.\u0275\u0275defineComponent({type:n,selectors:[["cd-cephfs-subvolume-snapshots-form"]],features:[e.\u0275\u0275InheritDefinitionFeature],decls:7,vars:8,consts:()=>{let t,o,i,r,p;return t=$localize`:␟fb127ea03835b3230f0ed981c7080e2ccb879621␟3346778808274133574:${"\ufffd0\ufffd"}:INTERPOLATION: ${"\ufffd1\ufffd"}:INTERPOLATION_1:`,o=$localize`:␟3188d5e2d2a44e06dadc5989e95d6351b30df385␟631150425318217291:${"\ufffd#7\ufffd\ufffd/#7\ufffd"}:TAG_INPUT:`,i=$localize`:␟bc10faea89ab159ba5724d6f4863196d7ac6c9ab␟6253438817097773454:Volume name ${"\ufffd#13\ufffd\ufffd/#13\ufffd"}:TAG_INPUT:`,r=$localize`:␟7cbdabcece469fab89cfa687ab152bca18b97498␟1417693714872528491:This field is required.`,p=$localize`:␟5c0f4f2ebd0c9bab3358feca9e7f3a3dcc35fde1␟3953023281433618930:The snapshot already exists.`,[["formDir","ngForm"],["snapshotNameError",""],t,o,i,r,p,["size","lg",3,"overlaySelected","open"],[3,"closeSelect"],["cdsModalHeaderHeading",""],[4,"cdFormLoading"],["name","snapshotForm","novalidate","",3,"formGroup"],["cdsModalContent",""],[1,"form-item"],["label","Name","for","snapshotName","cdRequiredField","Name",3,"invalid","invalidText"],["cdsText","","type","text","placeholder","Snapshot name...","id","snapshotName","name","snapshotName","formControlName","snapshotName","autofocus","","modal-primary-focus","",3,"invalid"],["label","Volume name","for","volumeName"],["cdsText","","type","text","id","volumeName","name","volumeName","formControlName","volumeName"],["label","Subvolume group","for","subvolumeGroupName","formControlName","subvolumeGroupName","name","subvolumeGroupName","id","subvolumeGroupName",4,"ngIf"],["class","form-item",4,"ngIf"],[3,"submitActionEvent","form","submitText","modalForm"],["class","invalid-feedback",4,"ngIf"],[1,"invalid-feedback"],["label","Subvolume group","for","subvolumeGroupName","formControlName","subvolumeGroupName","name","subvolumeGroupName","id","subvolumeGroupName"],[4,"ngFor","ngForOf"],["value","",4,"ngIf"],[3,"value",4,"ngIf"],["value",""],[3,"value"],["label","Subvolume","id","subVolumeName","name","subVolumeName","formControlName","subVolumeName",3,"registerOnChange"],[3,"value",4,"ngFor","ngForOf"]]},template:function(o,i){1&o&&(e.\u0275\u0275elementStart(0,"cds-modal",7),e.\u0275\u0275listener("overlaySelected",function(){return i.closeModal()}),e.\u0275\u0275elementStart(1,"cds-modal-header",8),e.\u0275\u0275listener("closeSelect",function(){return i.closeModal()}),e.\u0275\u0275elementStart(2,"h3",9),e.\u0275\u0275i18n(3,2),e.\u0275\u0275pipe(4,"titlecase"),e.\u0275\u0275pipe(5,"upperFirst"),e.\u0275\u0275elementEnd()(),e.\u0275\u0275template(6,N_,21,15,"ng-container",10),e.\u0275\u0275elementEnd()),2&o&&(e.\u0275\u0275property("open",i.open),e.\u0275\u0275advance(5),e.\u0275\u0275i18nExp(e.\u0275\u0275pipeBind1(4,4,i.action))(e.\u0275\u0275pipeBind1(5,6,i.resource)),e.\u0275\u0275i18nApply(3),e.\u0275\u0275advance(),e.\u0275\u0275property("cdFormLoading",i.loading))},dependencies:[l.NgForOf,l.NgIf,Q.e,ct.B,rt.G,De.S,ze.E,Et.P,T.\u0275NgNoValidate,T.NgSelectOption,T.\u0275NgSelectMultipleOption,T.DefaultValueAccessor,T.NgControlStatus,T.NgControlStatusGroup,T.FormGroupDirective,T.FormControlName,L.TextInputLabelComponent,L.TextInput,L.Select,L.Option,L.Modal,L.ModalHeader,L.ModalContent,L.ModalHeaderHeading,l.AsyncPipe,l.TitleCasePipe,Oe.r]})}}return n})();var Xa=s(23589);function A_(n,c){1&n&&(e.\u0275\u0275elementContainerStart(0),e.\u0275\u0275elementStart(1,"cd-loading-panel")(2,"span"),e.\u0275\u0275i18n(3,1),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementContainerEnd())}function D_(n,c){if(1&n){const t=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"div",10)(1,"cd-vertical-navigation",11),e.\u0275\u0275listener("emitActiveItem",function(i){e.\u0275\u0275restoreView(t);const r=e.\u0275\u0275nextContext(2);return e.\u0275\u0275resetView(r.selectSubVolume(i))}),e.\u0275\u0275elementEnd()()}if(2&n){const t=e.\u0275\u0275nextContext(2);e.\u0275\u0275advance(),e.\u0275\u0275property("items",t.subVolumesList)}}function y_(n,c){if(1&n){const t=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"div",12)(1,"cd-table",13),e.\u0275\u0275pipe(2,"async"),e.\u0275\u0275listener("fetchData",function(){e.\u0275\u0275restoreView(t);const i=e.\u0275\u0275nextContext(2);return e.\u0275\u0275resetView(i.fetchData())})("updateSelection",function(i){e.\u0275\u0275restoreView(t);const r=e.\u0275\u0275nextContext(2);return e.\u0275\u0275resetView(r.updateSelection(i))}),e.\u0275\u0275elementStart(3,"div",14),e.\u0275\u0275element(4,"cd-table-actions",15),e.\u0275\u0275elementEnd()()()}if(2&n){const t=e.\u0275\u0275nextContext(2);e.\u0275\u0275advance(),e.\u0275\u0275property("data",e.\u0275\u0275pipeBind1(2,6,t.snapshots$))("columns",t.columns)("hasDetails",!1),e.\u0275\u0275advance(3),e.\u0275\u0275property("permission",t.permissions.cephfs)("selection",t.selection)("tableActions",t.tableActions)}}function L_(n,c){if(1&n){const t=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"div",5)(1,"div",6)(2,"cd-vertical-navigation",7),e.\u0275\u0275listener("emitActiveItem",function(i){e.\u0275\u0275restoreView(t);const r=e.\u0275\u0275nextContext();return e.\u0275\u0275resetView(r.selectSubVolumeGroup(i))}),e.\u0275\u0275elementEnd()(),e.\u0275\u0275template(3,D_,2,1,"div",8),e.\u0275\u0275pipe(4,"async"),e.\u0275\u0275template(5,y_,5,8,"div",9),e.\u0275\u0275elementEnd()}if(2&n){const t=e.\u0275\u0275nextContext();e.\u0275\u0275advance(2),e.\u0275\u0275property("items",t.subvolumeGroupList),e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf",e.\u0275\u0275pipeBind1(4,3,t.subVolumes$)),e.\u0275\u0275advance(2),e.\u0275\u0275property("ngIf",t.isSubVolumesAvailable)}}function $_(n,c){1&n&&(e.\u0275\u0275elementStart(0,"cd-alert-panel",17),e.\u0275\u0275i18n(1,2),e.\u0275\u0275elementEnd())}function x_(n,c){if(1&n&&e.\u0275\u0275template(0,$_,2,0,"cd-alert-panel",16),2&n){const t=e.\u0275\u0275nextContext();e.\u0275\u0275property("ngIf",!t.isLoading)}}let U_=(()=>{class n{constructor(t,o,i,r,p,F,D,x){this.cephfsSubvolumeGroupService=t,this.cephfsSubvolumeService=o,this.actionLabels=i,this.modalService=r,this.authStorageService=p,this.cdDatePipe=F,this.taskWrapper=D,this.notificationService=x,this.columns=[],this.selection=new A.y,this.snapshotSubject=new K.BehaviorSubject([]),this.subVolumeSubject=new K.BehaviorSubject([]),this.subvolumeGroupList=[],this.activeGroupName="",this.activeSubVolumeName="",this.isSubVolumesAvailable=!1,this.isLoading=!0,this.observables=[],this.allGroups=[],this.permissions=this.authStorageService.getPermissions()}ngOnInit(){this.columns=[{name:$localize`Name`,prop:"name",flexGrow:1},{name:$localize`Created`,prop:"info.created_at",flexGrow:1,pipe:this.cdDatePipe},{name:$localize`Pending Clones`,prop:"info.has_pending_clones",flexGrow:.5,cellTransformation:O.x.badge,customTemplateConfig:{map:{no:{class:"badge-success"},yes:{class:"badge-info"}}}}],this.tableActions=[{name:this.actionLabels.CREATE,permission:"create",icon:g.FI.add,click:()=>this.openModal()},{name:this.actionLabels.CLONE,permission:"create",icon:g.FI.clone,disable:()=>!this.selection.hasSingleSelection,click:()=>this.cloneModal()},{name:this.actionLabels.REMOVE,permission:"delete",icon:g.FI.destroy,disable:()=>!this.selection.hasSingleSelection,click:()=>this.deleteSnapshot()}],this.cephfsSubvolumeGroupService.get(this.fsName).pipe((0,u.switchMap)(t=>{t.unshift({name:""}),this.allGroups=Array.from(t).map(i=>({value:i.name,text:""===i.name?ne.H:i.name}));const o=t.map(i=>this.cephfsSubvolumeService.existsInFs(this.fsName,i.name).pipe((0,u.switchMap)(r=>(r&&this.subvolumeGroupList.push(i.name),(0,K.of)(r)))));return(0,K.forkJoin)(o)})).subscribe(()=>{this.subvolumeGroupList.length&&(this.isSubVolumesAvailable=!0),this.isLoading=!1})}ngOnChanges(t){t.fsName&&this.subVolumeSubject.next([])}selectSubVolumeGroup(t){this.activeGroupName=t,this.getSubVolumes()}selectSubVolume(t){this.activeSubVolumeName=t,this.getSubVolumesSnapshot()}getSubVolumes(){this.subVolumes$=this.subVolumeSubject.pipe((0,u.switchMap)(()=>this.cephfsSubvolumeService.get(this.fsName,this.activeGroupName,!1).pipe((0,u.tap)(t=>{this.subVolumesList=t.map(o=>o.name),this.activeSubVolumeName=t[0].name,this.getSubVolumesSnapshot()}))))}getSubVolumesSnapshot(){this.snapshots$=this.snapshotSubject.pipe((0,u.switchMap)(()=>this.cephfsSubvolumeService.getSnapshots(this.fsName,this.activeSubVolumeName,this.activeGroupName).pipe((0,u.catchError)(()=>(this.context.error(),(0,K.of)(null))))),(0,u.shareReplay)(1))}fetchData(){this.snapshotSubject.next([])}openModal(t=!1){this.modalService.show(I_,{fsName:this.fsName,subVolumeName:this.activeSubVolumeName,subVolumeGroupName:this.activeGroupName,subVolumeGroups:this.subvolumeGroupList,isEdit:t})}updateSelection(t){this.selection=t}deleteSnapshot(){const t=this.selection.first().name,o=this.activeSubVolumeName,i=this.activeGroupName,r=this.fsName;this.modalRef=this.modalService.show(P.D,{impact:Tt.r.high,actionDescription:"remove",itemNames:[t],itemDescription:"Snapshot",submitAction:()=>this.taskWrapper.wrapTaskAroundCall({task:new ie.O("cephfs/subvolume/snapshot/delete",{fsName:r,subVolumeName:o,subVolumeGroupName:i,snapshotName:t}),call:this.cephfsSubvolumeService.deleteSnapshot(r,o,t,i)}).subscribe({complete:()=>this.modalService.dismissAll(),error:()=>this.modalRef.componentInstance.stopLoadingSpinner()})})}cloneModal(){const t=`clone_${lt()().toISOString(!0)}`;this.modalService.show(Qt.b,{titleText:$localize`Create clone`,fields:[{type:"text",name:"cloneName",value:t,label:$localize`Name`,validators:[T.Validators.required,T.Validators.pattern(/^[.A-Za-z0-9_+:-]+$/)],asyncValidators:[ge.xQ.unique(this.cephfsSubvolumeService.exists,this.cephfsSubvolumeService,null,null,this.fsName,this.activeGroupName)],required:!0,errors:{pattern:$localize`Allowed characters are letters, numbers, '.', '-', '+', ':' or '_'`,notUnique:$localize`A subvolume or clone with this name already exists.`}},{type:"select",name:"groupName",value:this.activeGroupName,label:$localize`Group name`,valueChangeListener:!0,dependsOn:"cloneName",typeConfig:{options:this.allGroups}}],submitButtonText:$localize`Create Clone`,updateAsyncValidators:o=>ge.xQ.unique(this.cephfsSubvolumeService.exists,this.cephfsSubvolumeService,null,null,this.fsName,o),onSubmit:o=>{this.cephfsSubvolumeService.createSnapshotClone(this.fsName,this.activeSubVolumeName,this.selection.first().name,o.cloneName,this.activeGroupName,o.groupName).subscribe(()=>this.notificationService.show(Le._.success,$localize`Created Clone "${o.cloneName}" successfully.`))}})}static{this.\u0275fac=function(o){return new(o||n)(e.\u0275\u0275directiveInject(Jt.W),e.\u0275\u0275directiveInject(Yt.v),e.\u0275\u0275directiveInject(f.Ss),e.\u0275\u0275directiveInject(Ge.V),e.\u0275\u0275directiveInject(_.v),e.\u0275\u0275directiveInject(Ht.Q),e.\u0275\u0275directiveInject(w.a),e.\u0275\u0275directiveInject(Y.J))}}static{this.\u0275cmp=e.\u0275\u0275defineComponent({type:n,selectors:[["cd-cephfs-subvolume-snapshots-list"]],inputs:{fsName:"fsName"},features:[e.\u0275\u0275NgOnChangesFeature],decls:4,vars:3,consts:()=>{let t,o;return t=$localize`:␟a20570a85b5462a9e3336dd597c4669bce0b37a0␟7195373565084659071:Loading snapshots...`,o=$localize`:␟8158426fce2d88cf1f1476c13f97b0add7a49c12␟7273995873413204970:No subvolumes are present. Please create subvolumes to manage snapshots.`,[["noGroupsTpl",""],t,o,[4,"ngIf"],["class","row",4,"ngIf","ngIfElse"],[1,"row"],[1,"col-sm-2"],["title","Groups","inputIdentifier","group-filter",3,"emitActiveItem","items"],["class","col-sm-2 vertical-line",4,"ngIf"],["class","col-8 vertical-line",4,"ngIf"],[1,"col-sm-2","vertical-line"],["title","Subvolumes","inputIdentifier","subvol-filter",3,"emitActiveItem","items"],[1,"col-8","vertical-line"],["columnMode","flex","selectionType","single",3,"fetchData","updateSelection","data","columns","hasDetails"],[1,"table-actions"],["id","cephfs-snapshot-actions",1,"btn-group",3,"permission","selection","tableActions"],["type","info",4,"ngIf"],["type","info"]]},template:function(o,i){if(1&o&&e.\u0275\u0275template(0,A_,4,0,"ng-container",3)(1,L_,6,5,"div",4)(2,x_,1,1,"ng-template",null,0,e.\u0275\u0275templateRefExtractor),2&o){const r=e.\u0275\u0275reference(3);e.\u0275\u0275property("ngIf",i.isLoading),e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf",i.isSubVolumesAvailable)("ngIfElse",r)}},dependencies:[l.NgIf,Xa.e,it.m,Ce,Ke.O,dt.j,l.AsyncPipe]})}}return n})();var ua=function(n){return n.Hourly="h",n.Daily="d",n.Weekly="w",n.Monthly="M",n.Yearly="Y",n}(ua||{}),ka=function(n){return n.h="hour",n.d="day",n.w="week",n.M="month",n.Y="year",n}(ka||{}),ja=function(n){return n.h="hours",n.d="days",n.w="weeks",n.M="months",n.Y="years",n}(ja||{}),uo=function(n){return n.Hourly="h",n.Daily="d",n.Weekly="w",n.Monthly="M",n.Yearly="y",n["lastest snapshots"]="n",n}(uo||{}),Wa=function(n){return n.h="Hourly",n.d="Daily",n.w="Weekly",n.M="Monthly",n.m="Minutely",n.y="Yearly",n.n="lastest snapshots",n}(Wa||{});let Ka=(()=>{class n{constructor(t){this.http=t,this.baseURL="api/cephfs"}create(t){return this.http.post(`${this.baseURL}/snapshot/schedule`,t,{observe:"response"})}update({fs:t,path:o,...i}){return this.http.put(`${this.baseURL}/snapshot/schedule/${t}/${encodeURIComponent(o)}`,i,{observe:"response"})}activate({fs:t,path:o,...i}){return this.http.post(`${this.baseURL}/snapshot/schedule/${t}/${encodeURIComponent(o)}/activate`,i,{observe:"response"})}deactivate({fs:t,path:o,...i}){return this.http.post(`${this.baseURL}/snapshot/schedule/${t}/${encodeURIComponent(o)}/deactivate`,i,{observe:"response"})}delete({fs:t,path:o,schedule:i,start:r,retentionPolicy:p,subvol:F,group:D}){let x=`${this.baseURL}/snapshot/schedule/${t}/${encodeURIComponent(o)}/delete_snapshot?schedule=${i}&start=${encodeURIComponent(r)}`;return p&&(x+=`&retention_policy=${p}`),F&&D&&(x+=`&subvol=${encodeURIComponent(F)}&group=${encodeURIComponent(D)}`),this.http.delete(x)}checkScheduleExists(t,o,i,r,p=!1){return this.getSnapshotScheduleList(t,o,!1).pipe((0,u.map)(F=>F.filter(x=>p?x.path.startsWith(t):x.path===t).findIndex(x=>x.schedule===`${i}${r}`)>-1),(0,u.catchError)(()=>(0,K.of)(!1)))}checkRetentionPolicyExists(t,o,i,r=[],p=!1){return this.getSnapshotSchedule(t,o,!1).pipe((0,u.map)(F=>{let D=-1,x=!1;const H=F.findIndex(Z=>p?Z.path.startsWith(t):Z.path===t),X=i?.length?(0,v.intersection)(Object.keys(F?.[H]?.retention).filter(Z=>!r.includes(Z)),i):[];return x=!!X?.length,X?.forEach(Z=>D=i.indexOf(Z)),{exists:x,errorIndex:D}}),(0,u.catchError)(()=>(0,K.of)({exists:!1,errorIndex:-1})))}getSnapshotSchedule(t,o,i=!0){return this.http.get(`${this.baseURL}/snapshot/schedule/${o}?path=${t}&recursive=${i}`).pipe((0,u.catchError)(()=>(0,K.of)([])))}getSnapshotScheduleList(t,o,i=!0){return this.getSnapshotSchedule(t,o,i).pipe((0,u.map)(r=>(0,v.uniqWith)(r.map(p=>({...p,scheduleCopy:this.parseScheduleCopy(p.schedule),status:p.active?"Active":"Inactive",subvol:p?.subvol,retentionCopy:this.parseRetentionCopy(p?.retention),retention:Object.values(p?.retention||[])?.length?Object.entries(p.retention)?.map?.(([F,D])=>`${D}${F}`).join(" "):"-"})),v.isEqual)))}parseScheduleCopy(t){const o=t.split(""),i=Number(o.filter(F=>!isNaN(Number(F))).join("")),r=o[o.length-1];return $localize`Every ${i>1?i+" ":""}${i>1?ja[r]:ka[r]}`}parseRetentionCopy(t){return t?Object.entries(t).map(([o,i])=>$localize`${i} ${Wa[o]}`.toLocaleLowerCase()):["-"]}static{this.\u0275fac=function(o){return new(o||n)(e.\u0275\u0275inject(h.HttpClient))}}static{this.\u0275prov=e.\u0275\u0275defineInjectable({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();var Nn=s(20009),Qa=s(41861);const w_=()=>({lg:8}),G_=()=>({lg:7}),H_=()=>({lg:1});function V_(n,c){1&n&&(e.\u0275\u0275i18nStart(0,6,1),e.\u0275\u0275elementContainer(1),e.\u0275\u0275i18nEnd())}function B_(n,c){1&n&&(e.\u0275\u0275elementStart(0,"span",35),e.\u0275\u0275i18n(1,8),e.\u0275\u0275elementEnd())}function z_(n,c){1&n&&(e.\u0275\u0275elementStart(0,"span",35),e.\u0275\u0275i18n(1,9),e.\u0275\u0275elementEnd())}function X_(n,c){if(1&n&&e.\u0275\u0275template(0,B_,2,0,"span",26)(1,z_,2,0,"span",26),2&n){e.\u0275\u0275nextContext();const t=e.\u0275\u0275reference(3),o=e.\u0275\u0275nextContext();e.\u0275\u0275property("ngIf",o.snapScheduleForm.showError("directory",t,"required")),e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf",o.snapScheduleForm.showError("directory",t,"notUnique"))}}function k_(n,c){1&n&&(e.\u0275\u0275elementStart(0,"span",35),e.\u0275\u0275i18n(1,10),e.\u0275\u0275elementEnd())}function j_(n,c){if(1&n&&(e.\u0275\u0275elementStart(0,"option",38),e.\u0275\u0275text(1),e.\u0275\u0275elementEnd()),2&n){const t=c.$implicit;e.\u0275\u0275property("value",t[1]),e.\u0275\u0275advance(),e.\u0275\u0275textInterpolate1("",t[0]," ")}}function W_(n,c){if(1&n&&(e.\u0275\u0275elementStart(0,"cds-select",36),e.\u0275\u0275template(1,j_,2,2,"option",37),e.\u0275\u0275elementEnd()),2&n){e.\u0275\u0275nextContext();const t=e.\u0275\u0275reference(19),o=e.\u0275\u0275nextContext();e.\u0275\u0275property("invalid",!o.snapScheduleForm.controls.repeatFrequency.valid&&o.snapScheduleForm.controls.repeatFrequency.dirty)("invalidText",t),e.\u0275\u0275advance(),e.\u0275\u0275property("ngForOf",o.repeatFrequencies)}}function K_(n,c){1&n&&(e.\u0275\u0275elementStart(0,"span",35),e.\u0275\u0275i18n(1,11),e.\u0275\u0275elementEnd())}function Q_(n,c){if(1&n&&e.\u0275\u0275template(0,K_,2,0,"span",26),2&n){e.\u0275\u0275nextContext();const t=e.\u0275\u0275reference(3),o=e.\u0275\u0275nextContext();e.\u0275\u0275property("ngIf",o.snapScheduleForm.showError("repeatFrequency",t,"notUnique"))}}function Y_(n,c){1&n&&(e.\u0275\u0275elementStart(0,"span",35),e.\u0275\u0275i18n(1,12),e.\u0275\u0275elementEnd())}function J_(n,c){1&n&&(e.\u0275\u0275elementStart(0,"span",35),e.\u0275\u0275i18n(1,13),e.\u0275\u0275elementEnd())}function Z_(n,c){if(1&n&&e.\u0275\u0275template(0,Y_,2,0,"span",26)(1,J_,2,0,"span",26),2&n){e.\u0275\u0275nextContext();const t=e.\u0275\u0275reference(3),o=e.\u0275\u0275nextContext();e.\u0275\u0275property("ngIf",o.snapScheduleForm.showError("repeatInterval",t,"required")),e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf",o.snapScheduleForm.showError("repeatInterval",t,"min"))}}function q_(n,c){if(1&n&&(e.\u0275\u0275elementStart(0,"option",38),e.\u0275\u0275text(1),e.\u0275\u0275elementEnd()),2&n){const t=c.$implicit;e.\u0275\u0275property("value",t[1]),e.\u0275\u0275advance(),e.\u0275\u0275textInterpolate(t[0])}}function ec(n,c){if(1&n&&(e.\u0275\u0275elementStart(0,"cds-select",47),e.\u0275\u0275template(1,q_,2,2,"option",37),e.\u0275\u0275elementEnd()),2&n){const t=e.\u0275\u0275nextContext(3);e.\u0275\u0275advance(),e.\u0275\u0275property("ngForOf",t.retentionFrequencies)}}function tc(n,c){1&n&&(e.\u0275\u0275elementStart(0,"span",35),e.\u0275\u0275i18n(1,14),e.\u0275\u0275elementEnd())}function nc(n,c){if(1&n&&e.\u0275\u0275template(0,tc,2,0,"span",26),2&n){const t=e.\u0275\u0275nextContext().index,o=e.\u0275\u0275nextContext(2);e.\u0275\u0275property("ngIf",o.snapScheduleForm.controls.retentionPolicies.controls[t].invalid)}}function oc(n,c){if(1&n){const t=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementContainerStart(0,39)(1,40),e.\u0275\u0275elementStart(2,"div",27)(3,"div",41),e.\u0275\u0275element(4,"cds-number",42),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(5,"div",41),e.\u0275\u0275template(6,ec,2,1,"cds-select",43),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(7,"div",44)(8,"cds-icon-button",45),e.\u0275\u0275listener("click",function(){const i=e.\u0275\u0275restoreView(t).index,r=e.\u0275\u0275nextContext(2);return e.\u0275\u0275resetView(r.removeRetentionPolicy(i))}),e.\u0275\u0275namespaceSVG(),e.\u0275\u0275element(9,"svg",46),e.\u0275\u0275elementEnd()()(),e.\u0275\u0275template(10,nc,1,1,"ng-template",null,4,e.\u0275\u0275templateRefExtractor),e.\u0275\u0275elementContainerEnd()()}if(2&n){const t=c.index,o=e.\u0275\u0275reference(11),i=e.\u0275\u0275nextContext(2);e.\u0275\u0275advance(),e.\u0275\u0275property("formGroupName",t),e.\u0275\u0275advance(2),e.\u0275\u0275property("columnNumbers",e.\u0275\u0275pureFunction0(12,w_)),e.\u0275\u0275advance(),e.\u0275\u0275property("id","retentionInterval"+t)("name","retentionInterval"+t)("formControlName","retentionInterval")("label","Retention policy")("min",1)("invalid",i.snapScheduleForm.controls.retentionPolicies.controls[t].invalid&&i.snapScheduleForm.controls.retentionPolicies.dirty)("invalidText",o),e.\u0275\u0275advance(),e.\u0275\u0275property("columnNumbers",e.\u0275\u0275pureFunction0(13,G_)),e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf",i.retentionFrequencies),e.\u0275\u0275advance(),e.\u0275\u0275property("columnNumbers",e.\u0275\u0275pureFunction0(14,H_))}}function ic(n,c){if(1&n){const t=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementContainerStart(0),e.\u0275\u0275elementStart(1,"div",19)(2,"form",20,0)(4,"div",21)(5,"cds-text-label",22),e.\u0275\u0275i18nStart(6,6),e.\u0275\u0275template(7,V_,2,0,"ng-container",23),e.\u0275\u0275element(8,"input",24),e.\u0275\u0275i18nEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275template(9,X_,2,2,"ng-template",null,1,e.\u0275\u0275templateRefExtractor),e.\u0275\u0275elementEnd(),e.\u0275\u0275element(11,"cd-date-time-picker",25),e.\u0275\u0275template(12,k_,2,0,"span",26),e.\u0275\u0275elementStart(13,"div",27)(14,"div",28),e.\u0275\u0275element(15,"cds-number",29),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(16,"div",28),e.\u0275\u0275template(17,W_,2,3,"cds-select",30)(18,Q_,1,1,"ng-template",null,2,e.\u0275\u0275templateRefExtractor)(20,Z_,2,2,"ng-template",null,3,e.\u0275\u0275templateRefExtractor),e.\u0275\u0275elementEnd()(),e.\u0275\u0275template(22,oc,12,15,"ng-container",31),e.\u0275\u0275elementStart(23,"div",21)(24,"button",32),e.\u0275\u0275listener("click",function(){e.\u0275\u0275restoreView(t);const i=e.\u0275\u0275nextContext();return e.\u0275\u0275resetView(i.addRetentionPolicy())}),e.\u0275\u0275i18nStart(25,7),e.\u0275\u0275namespaceSVG(),e.\u0275\u0275element(26,"svg",33),e.\u0275\u0275i18nEnd(),e.\u0275\u0275elementEnd()()()(),e.\u0275\u0275namespaceHTML(),e.\u0275\u0275elementStart(27,"cd-form-button-panel",34),e.\u0275\u0275pipe(28,"titlecase"),e.\u0275\u0275pipe(29,"upperFirst"),e.\u0275\u0275listener("submitActionEvent",function(){e.\u0275\u0275restoreView(t);const i=e.\u0275\u0275nextContext();return e.\u0275\u0275resetView(i.submit())}),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementContainerEnd()}if(2&n){const t=e.\u0275\u0275reference(3),o=e.\u0275\u0275reference(10),i=e.\u0275\u0275reference(21),r=e.\u0275\u0275nextContext();e.\u0275\u0275advance(2),e.\u0275\u0275property("formGroup",r.snapScheduleForm),e.\u0275\u0275advance(3),e.\u0275\u0275property("invalid",r.snapScheduleForm.controls.directory.invalid&&r.snapScheduleForm.controls.directory.dirty)("invalidText",o)("skeleton",r.directoryStore.isLoading),e.\u0275\u0275advance(2),e.\u0275\u0275property("ngIf",!r.directoryStore.isLoading),e.\u0275\u0275advance(),e.\u0275\u0275property("ngbTypeahead",r.search)("invalid",r.snapScheduleForm.controls.directory.invalid&&r.snapScheduleForm.controls.directory.dirty)("placeholder",r.directoryStore.isLoading?"":"Directory path")("skeleton",r.directoryStore.isLoading),e.\u0275\u0275advance(3),e.\u0275\u0275property("control",r.snapScheduleForm.get("startDate"))("disabled",r.isEdit),e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf",r.snapScheduleForm.showError("startDate",t,"required")),e.\u0275\u0275advance(3),e.\u0275\u0275property("id","repeatInterval")("name","repeatInterval")("formControlName","repeatInterval")("label","Schedule")("min",1)("invalid",!r.snapScheduleForm.controls.repeatInterval.valid&&r.snapScheduleForm.controls.repeatInterval.dirty)("invalidText",i),e.\u0275\u0275advance(2),e.\u0275\u0275property("ngIf",r.repeatFrequencies),e.\u0275\u0275advance(5),e.\u0275\u0275property("ngForOf",r.retentionPolicies.controls),e.\u0275\u0275advance(5),e.\u0275\u0275property("form",r.snapScheduleForm)("submitText",e.\u0275\u0275pipeBind1(28,24,r.action)+" "+e.\u0275\u0275pipeBind1(29,26,r.resource))("modalForm",!0)}}let ac=(()=>{class n extends Te.g{constructor(t,o,i,r,p,F,D,x,H,X,Z,re,pe,be=!1){super(),this.actionLabels=t,this.snapScheduleService=o,this.taskWrapper=i,this.cd=r,this.directoryStore=p,this.subvolumeService=F,this.fsName=D,this.id=x,this.path=H,this.schedule=X,this.retention=Z,this.start=re,this.status=pe,this.isEdit=be,this.icons=g.FI,this.repeatFrequencies=Object.entries(ua),this.retentionFrequencies=Object.entries(uo),this.retentionPoliciesToRemove=[],this.isDefaultSubvolumeGroup=!1,this.isSubvolume=!1,this.search=he=>he.pipe((0,u.debounceTime)(300),(0,u.distinctUntilChanged)(),(0,u.switchMap)(Ue=>this.directoryStore.search(Ue,this.id).pipe((0,u.catchError)(()=>(0,K.of)([]))))),this.resource=$localize`Snapshot schedule`;const Pe=new Date;this.minDate=`${Pe.getUTCFullYear()}-${Pe.getUTCMonth()+1}-${Pe.getUTCDate()}`}ngOnInit(){this.action=this.actionLabels.CREATE,this.directoryStore.loadDirectories(this.id,"/",3),this.createForm(),this.isEdit?this.populateForm():this.loadingReady(),this.snapScheduleForm.get("directory").valueChanges.pipe((0,u.filter)(()=>!this.isEdit),(0,u.debounceTime)(300),(0,u.tap)(()=>{this.isSubvolume=!1}),(0,u.tap)(t=>{this.subvolumeGroup=t?.split?.("/")?.[2],this.subvolume=t?.split?.("/")?.[3]}),(0,u.filter)(()=>!!this.subvolume&&!!this.subvolumeGroup),(0,u.tap)(()=>{this.isSubvolume=!!this.subvolume&&!!this.subvolumeGroup,this.snapScheduleForm.get("repeatFrequency").setErrors(null)}),(0,u.mergeMap)(()=>this.subvolumeService.exists(this.subvolume,this.fsName,this.subvolumeGroup===ne.H?"":this.subvolumeGroup).pipe((0,u.tap)(t=>this.isSubvolume=t),(0,u.tap)(t=>this.isDefaultSubvolumeGroup=t&&this.subvolumeGroup===ne.H))),(0,u.filter)(t=>t),(0,u.mergeMap)(()=>this.subvolumeService.info(this.fsName,this.subvolume,this.subvolumeGroup===ne.H?"":this.subvolumeGroup).pipe((0,u.pluck)("path"))),(0,u.filter)(t=>t!==this.snapScheduleForm.get("directory").value)).subscribe({next:t=>this.snapScheduleForm.get("directory").setValue(t)})}get retentionPolicies(){return this.snapScheduleForm.get("retentionPolicies")}populateForm(){this.action=this.actionLabels.EDIT,this.snapScheduleService.getSnapshotSchedule(this.path,this.fsName,!1).subscribe({next:t=>{const o=t.find(p=>p.path===this.path),i=lt()().utcOffset(),r=lt().parseZone(o.start).utc().utcOffset(i).local().format("YYYY-MM-DD HH:mm:ss");this.snapScheduleForm.get("directory").disable(),this.snapScheduleForm.get("directory").setValue(o.path),this.snapScheduleForm.get("startDate").disable(),this.snapScheduleForm.get("startDate").setValue(r),this.snapScheduleForm.get("repeatInterval").disable(),this.snapScheduleForm.get("repeatInterval").setValue(o.schedule.split("")?.[0]),this.snapScheduleForm.get("repeatFrequency").disable(),this.snapScheduleForm.get("repeatFrequency").setValue(o.schedule.split("")?.[1]),o.retention&&Object.entries(o.retention).forEach(([p,F],D)=>{const x=Object.keys(uo)[Object.values(uo).indexOf(p)];this.retentionPolicies.push(new T.FormGroup({retentionInterval:new T.FormControl(F),retentionFrequency:new T.FormControl(uo[x])})),this.retentionPolicies.controls[D].get("retentionInterval").disable(),this.retentionPolicies.controls[D].get("retentionFrequency").disable()}),this.loadingReady()}})}createForm(){this.snapScheduleForm=new Se.$({directory:new T.FormControl(void 0,{updateOn:"blur",validators:[T.Validators.required]}),startDate:new T.FormControl(this.minDate,{validators:[T.Validators.required]}),repeatInterval:new T.FormControl(1,{validators:[T.Validators.required,T.Validators.min(1)]}),repeatFrequency:new T.FormControl(ua.Daily,{validators:[T.Validators.required]}),retentionPolicies:new T.FormArray([])},{asyncValidators:[this.validateSchedule(),this.validateRetention()]})}addRetentionPolicy(){this.retentionPolicies.push(new T.FormGroup({retentionInterval:new T.FormControl(1),retentionFrequency:new T.FormControl(uo.Daily)})),this.cd.detectChanges()}removeRetentionPolicy(t){if(this.isEdit&&this.retentionPolicies.at(t).disabled){const o=this.retentionPolicies.at(t).value;this.retentionPoliciesToRemove.push(o)}this.retentionPolicies.removeAt(t),this.retentionPolicies.controls.forEach(o=>o.get("retentionFrequency").updateValueAndValidity()),this.cd.detectChanges()}convertNumberToString(t,o=2,i="0"){return(0,v.padStart)(t.toString(),o,i)}parseDatetime(t,o){return t&&o?`${t.year}-${this.convertNumberToString(t.month)}-${this.convertNumberToString(t.day)}T${this.convertNumberToString(o.hour)}:${this.convertNumberToString(o.minute)}:${this.convertNumberToString(o.second)}`:null}parseSchedule(t,o){return`${t}${o}`}parseRetentionPolicies(t){return t?.filter(o=>null!==o?.retentionInterval&&null!==o?.retentionFrequency)?.map?.(o=>`${o.retentionInterval}-${o.retentionFrequency}`).join("|")}submit(){this.validateSchedule()(this.snapScheduleForm).subscribe({next:()=>{if(this.snapScheduleForm.invalid)return void this.snapScheduleForm.setErrors({cdSubmitButton:!0});const t=this.snapScheduleForm.value;if(this.isEdit){const o=this.snapScheduleForm.get("retentionPolicies").controls?.filter(r=>!r.get("retentionInterval").disabled&&!r.get("retentionFrequency").disabled).map(r=>({retentionInterval:r.get("retentionInterval").value,retentionFrequency:r.get("retentionFrequency").value})),i={fs:this.fsName,path:this.path,subvol:this.subvol,group:this.group,retention_to_add:this.parseRetentionPolicies(o)||null,retention_to_remove:this.parseRetentionPolicies(this.retentionPoliciesToRemove)||null};this.taskWrapper.wrapTaskAroundCall({task:new ie.O("cephfs/snapshot/schedule/"+f.Qp.EDIT,{path:this.path}),call:this.snapScheduleService.update(i)}).subscribe({error:()=>{this.snapScheduleForm.setErrors({cdSubmitButton:!0})},complete:()=>{this.closeModal()}})}else{const o={fs:this.fsName,path:t.directory,snap_schedule:this.parseSchedule(t?.repeatInterval,t?.repeatFrequency),start:new Date(t?.startDate.replace(/\//g,"-").replace(" ","T")).toISOString().slice(0,19)},i=this.parseRetentionPolicies(t?.retentionPolicies);i&&(o.retention_policy=i),this.isSubvolume&&(o.subvol=this.subvolume),this.isSubvolume&&!this.isDefaultSubvolumeGroup&&(o.group=this.subvolumeGroup),this.taskWrapper.wrapTaskAroundCall({task:new ie.O("cephfs/snapshot/schedule/"+f.Qp.CREATE,{path:o.path}),call:this.snapScheduleService.create(o)}).subscribe({error:()=>{this.snapScheduleForm.setErrors({cdSubmitButton:!0})},complete:()=>{this.closeModal()}})}}})}validateSchedule(){return t=>{const o=t.get("directory"),i=t.get("repeatFrequency"),r=t.get("repeatInterval");return this.isEdit?(0,K.of)(null):(0,K.timer)(300).pipe((0,u.switchMap)(()=>this.snapScheduleService.checkScheduleExists(o?.value,this.fsName,r?.value,i?.value,this.isSubvolume).pipe((0,u.map)(p=>(p?(i?.markAsDirty(),i?.setErrors({notUnique:!0},{emitEvent:!0})):i?.setErrors(null),null)))))}}getFormArrayItem(t,o,i,r){return t.get(o)?.controls?.[r]?.get?.(i)}validateRetention(){return t=>(0,K.timer)(300).pipe((0,u.switchMap)(()=>{const o=t.get("retentionPolicies").controls?.map(i=>i.get("retentionFrequency").value);return(0,v.uniq)(o)?.length!==o?.length?(this.getFormArrayItem(t,"retentionPolicies","retentionFrequency",o.length-1)?.setErrors?.({notUnique:!0}),null):this.snapScheduleService.checkRetentionPolicyExists(t.get("directory").value,this.fsName,o,this.retentionPoliciesToRemove?.map?.(i=>i.retentionFrequency)||[],!!this.subvolume).pipe((0,u.map)(({exists:i,errorIndex:r})=>(i?this.getFormArrayItem(t,"retentionPolicies","retentionFrequency",r)?.setErrors?.({notUnique:!0}):t.get("retentionPolicies").controls?.forEach?.((p,F)=>{this.getFormArrayItem(t,"retentionPolicies","retentionFrequency",F)?.setErrors?.(null)}),null)))}))}static{this.\u0275fac=function(o){return new(o||n)(e.\u0275\u0275directiveInject(f.Ss),e.\u0275\u0275directiveInject(Ka),e.\u0275\u0275directiveInject(w.a),e.\u0275\u0275directiveInject(e.ChangeDetectorRef),e.\u0275\u0275directiveInject(fe),e.\u0275\u0275directiveInject(Yt.v),e.\u0275\u0275directiveInject("fsName",8),e.\u0275\u0275directiveInject("id",8),e.\u0275\u0275directiveInject("path",8),e.\u0275\u0275directiveInject("schedule",8),e.\u0275\u0275directiveInject("retention",8),e.\u0275\u0275directiveInject("start",8),e.\u0275\u0275directiveInject("status",8),e.\u0275\u0275directiveInject("isEdit",8))}}static{this.\u0275cmp=e.\u0275\u0275defineComponent({type:n,selectors:[["cd-cephfs-snapshotschedule-form"]],features:[e.\u0275\u0275InheritDefinitionFeature],decls:7,vars:9,consts:()=>{let t,o,i,r,p,F,D,x,H,X;return t=$localize`:␟4f4837945d87a6a300c5cf65952b67c63ecea04d␟6489333028848455182: ${"\ufffd0\ufffd"}:INTERPOLATION: ${"\ufffd1\ufffd"}:INTERPOLATION_1: `,o=$localize`:␟348ee7190a5fbaa2e4d8e314f29c899e39bb0476␟2899317511658635851:${"\ufffd*7:1\ufffd\ufffd#1:1\ufffd"}:START_TAG_NG_CONTAINER:Directory (required)${"\ufffd/#1:1\ufffd\ufffd/*7:1\ufffd"}:CLOSE_TAG_NG_CONTAINER:${"\ufffd#8\ufffd\ufffd/#8\ufffd"}:TAG_INPUT:`,i=$localize`:␟9ab6159b2a0abc0cd1744415edd41efb1cce16ae␟284572899171298268: Add retention policy ${"\ufffd#26\ufffd"}:START_TAG__SVG_SVG:${"\ufffd/#26\ufffd"}:CLOSE_TAG__SVG_SVG:`,r=$localize`:␟7cbdabcece469fab89cfa687ab152bca18b97498␟1417693714872528491:This field is required.`,p=$localize`:␟311f1408da67e0c4520e370018832f30ca702e18␟9202536922992506497:A snapshot schedule for this path already exists.`,F=$localize`:␟7cbdabcece469fab89cfa687ab152bca18b97498␟1417693714872528491:This field is required.`,D=$localize`:␟c8ae4855db6ab0a33964638479365691a9d03132␟3700079381057027984:This schedule already exists for the selected directory.`,x=$localize`:␟7cbdabcece469fab89cfa687ab152bca18b97498␟1417693714872528491:This field is required.`,H=$localize`:␟a0cb3d8ceecb3f17a64557fe9ab3cf5bb04b4a77␟8728625014039073107:Choose a value greater than 0.`,X=$localize`:␟28bb59ba8eca0eb596875ae352ed68e2db4ba91f␟8678689939950791758:This retention policy already exists for the selected directory.`,[["formDir","ngForm"],["directoryError",""],["repeatFrequencyError",""],["repeatIntervalError",""],["retentionPolicyError",""],t,o,i,r,p,F,D,x,H,X,["size","lg",3,"overlaySelected","open","hasScrollingContent"],[3,"closeSelect"],["cdsModalHeaderHeading",""],[4,"cdFormLoading"],["cdsModalContent",""],["name","snapScheduleForm","novalidate","",3,"formGroup"],[1,"form-item"],["for","directory","cdRequiredField","Directory","modal-primary-focus","",3,"invalid","invalidText","skeleton"],[4,"ngIf"],["cdsText","","type","text","formControlName","directory","name","directory",3,"ngbTypeahead","invalid","placeholder","skeleton"],["name","Start Date","helperText","The time zone is assumed to be UTC",3,"control","disabled"],["class","invalid-feedback",4,"ngIf"],["cdsRow","",1,"form-item","form-item-append"],["cdsCol",""],["cdRequiredField","Schedule",3,"id","name","formControlName","label","min","invalid","invalidText"],["id","repeatFrequency","name","repeatFrequency","formControlName","repeatFrequency","label","Frequency",3,"invalid","invalidText",4,"ngIf"],["formArrayName","retentionPolicies",4,"ngFor","ngForOf"],["cdsButton","tertiary","type","button",3,"click"],["cdsIcon","add","size","32","icon","",1,"cds--btn__icon"],[3,"submitActionEvent","form","submitText","modalForm"],[1,"invalid-feedback"],["id","repeatFrequency","name","repeatFrequency","formControlName","repeatFrequency","label","Frequency",3,"invalid","invalidText"],[3,"value",4,"ngFor","ngForOf"],[3,"value"],["formArrayName","retentionPolicies"],[3,"formGroupName"],["cdsCol","",3,"columnNumbers"],[3,"id","name","formControlName","label","min","invalid","invalidText"],["id","retentionFrequency","name","retentionFrequency","formControlName","retentionFrequency","label","Frequency",4,"ngIf"],["cdsCol","",1,"item-action-btn",3,"columnNumbers"],["kind","danger","size","sm",3,"click"],["cdsIcon","trash-can","size","32",1,"cds--btn__icon"],["id","retentionFrequency","name","retentionFrequency","formControlName","retentionFrequency","label","Frequency"]]},template:function(o,i){1&o&&(e.\u0275\u0275elementStart(0,"cds-modal",15),e.\u0275\u0275listener("overlaySelected",function(){return i.closeModal()}),e.\u0275\u0275elementStart(1,"cds-modal-header",16),e.\u0275\u0275listener("closeSelect",function(){return i.closeModal()}),e.\u0275\u0275elementStart(2,"h3",17),e.\u0275\u0275i18n(3,5),e.\u0275\u0275pipe(4,"titlecase"),e.\u0275\u0275pipe(5,"upperFirst"),e.\u0275\u0275elementEnd()(),e.\u0275\u0275template(6,ic,30,28,"ng-container",18),e.\u0275\u0275elementEnd()),2&o&&(e.\u0275\u0275property("open",i.open)("hasScrollingContent",!0),e.\u0275\u0275advance(5),e.\u0275\u0275i18nExp(e.\u0275\u0275pipeBind1(4,5,i.action))(e.\u0275\u0275pipeBind1(5,7,i.resource)),e.\u0275\u0275i18nApply(3),e.\u0275\u0275advance(),e.\u0275\u0275property("cdFormLoading",i.loading))},dependencies:[l.NgForOf,l.NgIf,Qa.P,Q.e,rt.G,De.S,ze.E,Et.P,T.\u0275NgNoValidate,T.NgSelectOption,T.\u0275NgSelectMultipleOption,T.DefaultValueAccessor,T.NgControlStatus,T.NgControlStatusGroup,T.FormGroupDirective,T.FormControlName,T.FormGroupName,T.FormArrayName,V.NgbTypeahead,L.ColumnDirective,L.RowDirective,L.TextInputLabelComponent,L.TextInput,L.Select,L.Option,L.Modal,L.ModalHeader,L.ModalContent,L.ModalHeaderHeading,L.Button,L.IconButton,L.NumberComponent,L.IconDirective,l.TitleCasePipe,Oe.r]})}}return n})();var sc=s(73231);const rc=["pathTpl"],lc=["retentionTpl"],_c=["subvolTpl"],Za=(n,c)=>[n,c];function cc(n,c){if(1&n){const t=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"cd-alert-panel",9),e.\u0275\u0275listener("action",function(){e.\u0275\u0275restoreView(t);const i=e.\u0275\u0275nextContext();return e.\u0275\u0275resetView(i.enableSnapshotSchedule())}),e.\u0275\u0275i18n(1,6),e.\u0275\u0275elementEnd()}}function dc(n,c){if(1&n&&(e.\u0275\u0275elementStart(0,"span"),e.\u0275\u0275element(1,"i",12),e.\u0275\u0275elementEnd()),2&n){let t;const o=e.\u0275\u0275nextContext().data.row,i=e.\u0275\u0275nextContext();e.\u0275\u0275advance(),e.\u0275\u0275propertyInterpolate1("ngbTooltip","",null==o.pathForSelection||null==o.pathForSelection.split||null==(t=o.pathForSelection.split("@"))?null:t[0]," is active"),e.\u0275\u0275property("ngClass",e.\u0275\u0275pureFunction2(3,Za,i.icons.success,i.icons.large))}}function uc(n,c){if(1&n&&e.\u0275\u0275element(0,"i",13),2&n){let t;const o=e.\u0275\u0275nextContext().data.row,i=e.\u0275\u0275nextContext();e.\u0275\u0275propertyInterpolate1("ngbTooltip","",null==o.pathForSelection||null==o.pathForSelection.split||null==(t=o.pathForSelection.split("@"))?null:t[0]," has been deactivated"),e.\u0275\u0275property("ngClass",e.\u0275\u0275pureFunction2(3,Za,i.icons.warning,i.icons.large))}}function pc(n,c){if(1&n&&e.\u0275\u0275element(0,"cd-copy-2-clipboard-button",15),2&n){let t,o;const i=e.\u0275\u0275nextContext(2).data.row,r=e.\u0275\u0275nextContext();e.\u0275\u0275property("source",null==i.pathForSelection||null==i.pathForSelection.split||null==(t=i.pathForSelection.split("@"))?null:t[0])("byId",!1)("size",r.lg)("text",null==i.pathForSelection||null==i.pathForSelection.split||null==(o=i.pathForSelection.split("@"))?null:o[0])}}function mc(n,c){if(1&n&&e.\u0275\u0275template(0,pc,1,4,"cd-copy-2-clipboard-button",14),2&n){const t=e.\u0275\u0275nextContext().data.row;e.\u0275\u0275property("ngIf",t.pathForSelection)}}function fc(n,c){if(1&n&&(e.\u0275\u0275elementStart(0,"span",10),e.\u0275\u0275text(1),e.\u0275\u0275pipe(2,"path"),e.\u0275\u0275elementEnd(),e.\u0275\u0275template(3,dc,2,6,"span",11)(4,uc,1,6,"ng-template",null,4,e.\u0275\u0275templateRefExtractor)(6,mc,1,1,"ng-template",null,5,e.\u0275\u0275templateRefExtractor)),2&n){let t;const o=c.data.row,i=e.\u0275\u0275reference(5),r=e.\u0275\u0275nextContext();e.\u0275\u0275property("ngbTooltip",r.fullpathTpl),e.\u0275\u0275advance(),e.\u0275\u0275textInterpolate1(" ",e.\u0275\u0275pipeBind1(2,4,null==o.pathForSelection||null==o.pathForSelection.split||null==(t=o.pathForSelection.split("@"))?null:t[0])," "),e.\u0275\u0275advance(2),e.\u0275\u0275property("ngIf",o.active)("ngIfElse",i)}}function Ec(n,c){if(1&n&&(e.\u0275\u0275elementStart(0,"li"),e.\u0275\u0275text(1),e.\u0275\u0275elementEnd()),2&n){const t=c.$implicit;e.\u0275\u0275advance(),e.\u0275\u0275textInterpolate(t)}}function gc(n,c){if(1&n&&(e.\u0275\u0275elementStart(0,"ul"),e.\u0275\u0275template(1,Ec,2,1,"li",16),e.\u0275\u0275elementEnd()),2&n){const t=e.\u0275\u0275nextContext().data.row;e.\u0275\u0275advance(),e.\u0275\u0275property("ngForOf",t.retentionCopy)}}function Cc(n,c){if(1&n&&e.\u0275\u0275template(0,gc,2,1,"ul",11),2&n){const t=c.data.row;e.\u0275\u0275nextContext();const o=e.\u0275\u0275reference(9);e.\u0275\u0275property("ngIf",t.retentionCopy.length)("ngIfElse",o)}}function Sc(n,c){if(1&n&&(e.\u0275\u0275elementStart(0,"span"),e.\u0275\u0275text(1),e.\u0275\u0275elementEnd()),2&n){const t=e.\u0275\u0275nextContext().data.row;e.\u0275\u0275advance(),e.\u0275\u0275textInterpolate1(" ",t.subvol," ")}}function hc(n,c){if(1&n&&e.\u0275\u0275template(0,Sc,2,1,"span",11),2&n){const t=c.data.row;e.\u0275\u0275nextContext();const o=e.\u0275\u0275reference(9);e.\u0275\u0275property("ngIf",t.subvol)("ngIfElse",o)}}function Tc(n,c){1&n&&e.\u0275\u0275text(0,"-")}function Fc(n,c){if(1&n){const t=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"cd-table",17),e.\u0275\u0275pipe(1,"async"),e.\u0275\u0275listener("fetchData",function(){e.\u0275\u0275restoreView(t);const i=e.\u0275\u0275nextContext();return e.\u0275\u0275resetView(i.fetchData())})("updateSelection",function(i){e.\u0275\u0275restoreView(t);const r=e.\u0275\u0275nextContext();return e.\u0275\u0275resetView(r.updateSelection(i))}),e.\u0275\u0275elementStart(2,"div",18),e.\u0275\u0275element(3,"cd-table-actions",19),e.\u0275\u0275pipe(4,"async"),e.\u0275\u0275elementEnd()()}if(2&n){const t=e.\u0275\u0275nextContext();e.\u0275\u0275property("data",e.\u0275\u0275pipeBind1(1,6,t.snapshotSchedules$))("columns",t.columns)("hasDetails",!1),e.\u0275\u0275advance(3),e.\u0275\u0275property("permission",t.permissions.cephfs)("selection",t.selection)("tableActions",e.\u0275\u0275pipeBind1(4,8,t.tableActions$))}}let vc=(()=>{class n extends Te.g{constructor(t,o,i,r,p,F){super(),this.snapshotScheduleService=t,this.authStorageService=o,this.modalService=i,this.mgrModuleService=r,this.actionLabels=p,this.taskWrapper=F,this.subject$=new K.BehaviorSubject([]),this.snapScheduleModuleStatus$=new K.BehaviorSubject(!1),this.columns=[],this.tableActions$=new K.BehaviorSubject([]),this.selection=new A.y,this.errorMessage="",this.selectedName="",this.icons=g.FI,this.MODULE_NAME="snap_schedule",this.ENABLE_MODULE_TIMER=2e3,this.permissions=this.authStorageService.getPermissions()}ngOnChanges(t){t.fsName&&this.subject$.next([])}ngOnInit(){this.tableActions=[{name:this.actionLabels.CREATE,permission:"create",icon:g.FI.add,click:()=>this.openModal(!1)},{name:this.actionLabels.EDIT,permission:"update",icon:g.FI.edit,click:()=>this.openModal(!0)},{name:this.actionLabels.DELETE,permission:"delete",icon:g.FI.trash,click:()=>this.deleteSnapshotSchedule()}],this.moduleServiceListSub=this.mgrModuleService.list().pipe((0,u.map)(t=>t.find(o=>o?.name===this.MODULE_NAME))).subscribe({next:t=>this.snapScheduleModuleStatus$.next(t?.enabled)}),this.snapshotSchedules$=this.subject$.pipe((0,u.switchMap)(()=>this.snapScheduleModuleStatus$.pipe((0,u.switchMap)(t=>t?this.snapshotScheduleService.getSnapshotScheduleList("/",this.fsName).pipe((0,u.map)(o=>o.map(i=>({...i,pathForSelection:`${i.path}@${i.schedule}`})))):(0,K.of)([])),(0,u.shareReplay)(1)))),this.columns=[{prop:"pathForSelection",name:$localize`Path`,flexGrow:3,cellTemplate:this.pathTpl},{prop:"path",isHidden:!0,isInvisible:!0},{prop:"subvol",name:$localize`Subvolume`,cellTemplate:this.subvolTpl},{prop:"scheduleCopy",name:$localize`Repeat interval`},{prop:"schedule",isHidden:!0,isInvisible:!0},{prop:"retentionCopy",name:$localize`Retention policy`,cellTemplate:this.retentionTpl},{prop:"retention",isHidden:!0,isInvisible:!0},{prop:"created_count",name:$localize`Created Count`},{prop:"pruned_count",name:$localize`Deleted Count`},{prop:"start",name:$localize`Start time`,cellTransformation:O.x.timeAgo},{prop:"created",name:$localize`Created`,cellTransformation:O.x.timeAgo}],this.tableActions$.next(this.tableActions)}ngOnDestroy(){this.moduleServiceListSub.unsubscribe()}fetchData(){this.subject$.next([])}updateSelection(t){if(this.selection=t,!this.selection.hasSelection)return;const o=this.selection.first()?.active;this.tableActions$.next([...this.tableActions,{name:o?this.actionLabels.DEACTIVATE:this.actionLabels.ACTIVATE,permission:"update",icon:o?g.FI.warning:g.FI.success,click:()=>o?this.deactivateSnapshotSchedule():this.activateSnapshotSchedule()}])}openModal(t=!1){this.modalService.show(ac,{fsName:this.fsName,id:this.id,path:this.selection?.first()?.path,schedule:this.selection?.first()?.schedule,retention:this.selection?.first()?.retention,start:this.selection?.first()?.start,status:this.selection?.first()?.status,isEdit:t})}enableSnapshotSchedule(){this.mgrModuleService.updateModuleState(this.MODULE_NAME,!1,null,"","Enabled Snapshot Schedule Module")}deactivateSnapshotSchedule(){const{path:t,start:o,fs:i,schedule:r,subvol:p,group:F}=this.selection.first();this.modalRef=this.modalService.show(P.D,{itemDescription:$localize`snapshot schedule`,actionDescription:this.actionLabels.DEACTIVATE,submitActionObservable:()=>this.taskWrapper.wrapTaskAroundCall({task:new ie.O("cephfs/snapshot/schedule/deactivate",{path:t}),call:this.snapshotScheduleService.deactivate({path:t,schedule:r,start:o,fs:i,subvol:p,group:F})})})}activateSnapshotSchedule(){const{path:t,start:o,fs:i,schedule:r,subvol:p,group:F}=this.selection.first();this.modalRef=this.modalService.show(P.D,{itemDescription:$localize`snapshot schedule`,actionDescription:this.actionLabels.ACTIVATE,submitActionObservable:()=>this.taskWrapper.wrapTaskAroundCall({task:new ie.O("cephfs/snapshot/schedule/activate",{path:t}),call:this.snapshotScheduleService.activate({path:t,schedule:r,start:o,fs:i,subvol:p,group:F})})})}deleteSnapshotSchedule(){const{path:t,start:o,fs:i,schedule:r,subvol:p,group:F,retention:D}=this.selection.first(),x=D?.split(/\s/gi)?.filter(H=>!!H)?.map(H=>{const X=H.substring(H.length-1);return`${H.substring(0,H.length-1)}-${X}`})?.join("|");this.modalRef=this.modalService.show(P.D,{itemDescription:$localize`snapshot schedule`,submitActionObservable:()=>this.taskWrapper.wrapTaskAroundCall({task:new ie.O("cephfs/snapshot/schedule/"+f.Qp.DELETE,{path:t}),call:this.snapshotScheduleService.delete({path:t,schedule:r,start:o,fs:i,retentionPolicy:x,subvol:p,group:F})})})}static{this.\u0275fac=function(o){return new(o||n)(e.\u0275\u0275directiveInject(Ka),e.\u0275\u0275directiveInject(_.v),e.\u0275\u0275directiveInject(Ge.V),e.\u0275\u0275directiveInject(Nn.a),e.\u0275\u0275directiveInject(f.Ss),e.\u0275\u0275directiveInject(w.a))}}static{this.\u0275cmp=e.\u0275\u0275defineComponent({type:n,selectors:[["cd-cephfs-snapshotschedule-list"]],viewQuery:function(o,i){if(1&o&&(e.\u0275\u0275viewQuery(rc,7),e.\u0275\u0275viewQuery(lc,7),e.\u0275\u0275viewQuery(_c,7)),2&o){let r;e.\u0275\u0275queryRefresh(r=e.\u0275\u0275loadQuery())&&(i.pathTpl=r.first),e.\u0275\u0275queryRefresh(r=e.\u0275\u0275loadQuery())&&(i.retentionTpl=r.first),e.\u0275\u0275queryRefresh(r=e.\u0275\u0275loadQuery())&&(i.subvolTpl=r.first)}},inputs:{fsName:"fsName",id:"id"},features:[e.\u0275\u0275InheritDefinitionFeature,e.\u0275\u0275NgOnChangesFeature],decls:12,vars:6,consts:()=>{let t;return t=$localize`:␟856acea24c477cff9b16c0d5256781bdf19ce052␟9052053309952716760: In order to access the snapshot scheduler feature, the snap_scheduler module must be enabled
`,[["pathTpl",""],["retentionTpl",""],["subvolTpl",""],["noDataTpl",""],["inactiveStatusTpl",""],["fullpathForSelectionTpl",""],t,["type","info","spacingClass","mb-3","class","align-items-center","actionName","Enable",3,"action",4,"ngIf"],["columnMode","flex","selectionType","single",3,"data","columns","hasDetails","fetchData","updateSelection",4,"ngIf"],["type","info","spacingClass","mb-3","actionName","Enable",1,"align-items-center",3,"action"],["triggers","click:blur",1,"fw-bold",3,"ngbTooltip"],[4,"ngIf","ngIfElse"],[1,"text-success",3,"ngClass","ngbTooltip"],[1,"text-warning",3,"ngClass","ngbTooltip"],[3,"source","byId","size","text",4,"ngIf"],[3,"source","byId","size","text"],[4,"ngFor","ngForOf"],["columnMode","flex","selectionType","single",3,"fetchData","updateSelection","data","columns","hasDetails"],[1,"table-actions"],[1,"btn-group",3,"permission","selection","tableActions"]]},template:function(o,i){1&o&&(e.\u0275\u0275template(0,cc,2,0,"cd-alert-panel",7),e.\u0275\u0275pipe(1,"async"),e.\u0275\u0275template(2,fc,8,6,"ng-template",null,0,e.\u0275\u0275templateRefExtractor)(4,Cc,1,2,"ng-template",null,1,e.\u0275\u0275templateRefExtractor)(6,hc,1,2,"ng-template",null,2,e.\u0275\u0275templateRefExtractor)(8,Tc,1,0,"ng-template",null,3,e.\u0275\u0275templateRefExtractor)(10,Fc,5,10,"cd-table",8),e.\u0275\u0275pipe(11,"async")),2&o&&(e.\u0275\u0275property("ngIf",!1===e.\u0275\u0275pipeBind1(1,2,i.snapScheduleModuleStatus$)),e.\u0275\u0275advance(10),e.\u0275\u0275property("ngIf",e.\u0275\u0275pipeBind1(11,4,i.snapScheduleModuleStatus$)))},dependencies:[l.NgClass,l.NgForOf,l.NgIf,it.m,me.N,Ke.O,dt.j,V.NgbTooltip,l.AsyncPipe,sc.i],styles:["ul[_ngcontent-%COMP%]{list-style:none;padding:0}"]})}}return n})();function Mc(n,c){if(1&n&&e.\u0275\u0275element(0,"cd-cephfs-detail",23),2&n){const t=e.\u0275\u0275nextContext(2);e.\u0275\u0275property("data",t.details)}}function Rc(n,c){if(1&n&&e.\u0275\u0275element(0,"cd-cephfs-directories",24),2&n){const t=e.\u0275\u0275nextContext(2);e.\u0275\u0275property("id",t.id)}}function Oc(n,c){if(1&n&&e.\u0275\u0275element(0,"cd-cephfs-subvolume-list",25),2&n){const t=e.\u0275\u0275nextContext(2);e.\u0275\u0275property("fsName",t.selection.mdsmap.fs_name)("pools",t.details.pools)("id",t.id)}}function Pc(n,c){if(1&n&&e.\u0275\u0275element(0,"cd-cephfs-subvolume-group",26),2&n){const t=e.\u0275\u0275nextContext(2);e.\u0275\u0275property("fsName",t.selection.mdsmap.fs_name)("pools",t.details.pools)}}function bc(n,c){if(1&n&&e.\u0275\u0275element(0,"cd-cephfs-subvolume-snapshots-list",27),2&n){const t=e.\u0275\u0275nextContext(2);e.\u0275\u0275property("fsName",t.selection.mdsmap.fs_name)}}function Nc(n,c){if(1&n&&e.\u0275\u0275element(0,"cd-cephfs-snapshotschedule-list",28),2&n){const t=e.\u0275\u0275nextContext(2);e.\u0275\u0275property("fsName",t.selection.mdsmap.fs_name)("id",t.id)}}function Ic(n,c){if(1&n){const t=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"cd-cephfs-clients",29),e.\u0275\u0275listener("triggerApiUpdate",function(){e.\u0275\u0275restoreView(t);const i=e.\u0275\u0275nextContext(2);return e.\u0275\u0275resetView(i.refresh())}),e.\u0275\u0275elementEnd()}if(2&n){const t=e.\u0275\u0275nextContext(2);e.\u0275\u0275property("id",t.id)("clients",t.clients)}}function Ac(n,c){if(1&n&&e.\u0275\u0275element(0,"cd-grafana",30),2&n){const t=e.\u0275\u0275nextContext(2);e.\u0275\u0275property("grafanaPath","ceph-filesystem-overview?var-name="+t.details.name)("type","metrics")}}function Dc(n,c){if(1&n){const t=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementContainerStart(0),e.\u0275\u0275elementStart(1,"nav",10,0),e.\u0275\u0275listener("navChange",function(){e.\u0275\u0275restoreView(t);const i=e.\u0275\u0275nextContext();return e.\u0275\u0275resetView(i.softRefresh())}),e.\u0275\u0275elementContainerStart(3,11),e.\u0275\u0275elementStart(4,"a",12),e.\u0275\u0275i18n(5,1),e.\u0275\u0275elementEnd(),e.\u0275\u0275template(6,Mc,1,1,"ng-template",13),e.\u0275\u0275elementContainerEnd(),e.\u0275\u0275elementContainerStart(7,14),e.\u0275\u0275elementStart(8,"a",12),e.\u0275\u0275i18n(9,2),e.\u0275\u0275elementEnd(),e.\u0275\u0275template(10,Rc,1,1,"ng-template",13),e.\u0275\u0275elementContainerEnd(),e.\u0275\u0275elementContainerStart(11,15),e.\u0275\u0275elementStart(12,"a",12),e.\u0275\u0275i18n(13,3),e.\u0275\u0275elementEnd(),e.\u0275\u0275template(14,Oc,1,3,"ng-template",13),e.\u0275\u0275elementContainerEnd(),e.\u0275\u0275elementContainerStart(15,16),e.\u0275\u0275elementStart(16,"a",12),e.\u0275\u0275i18n(17,4),e.\u0275\u0275elementEnd(),e.\u0275\u0275template(18,Pc,1,2,"ng-template",13),e.\u0275\u0275elementContainerEnd(),e.\u0275\u0275elementContainerStart(19,17),e.\u0275\u0275elementStart(20,"a",12),e.\u0275\u0275i18n(21,5),e.\u0275\u0275elementEnd(),e.\u0275\u0275template(22,bc,1,1,"ng-template",13),e.\u0275\u0275elementContainerEnd(),e.\u0275\u0275elementContainerStart(23,18),e.\u0275\u0275elementStart(24,"a",12),e.\u0275\u0275i18n(25,6),e.\u0275\u0275elementEnd(),e.\u0275\u0275template(26,Nc,1,2,"ng-template",13),e.\u0275\u0275elementContainerEnd(),e.\u0275\u0275elementContainerStart(27,19),e.\u0275\u0275elementStart(28,"a",12),e.\u0275\u0275elementContainerStart(29),e.\u0275\u0275i18n(30,7),e.\u0275\u0275elementContainerEnd(),e.\u0275\u0275elementStart(31,"span",20),e.\u0275\u0275text(32),e.\u0275\u0275elementEnd()(),e.\u0275\u0275template(33,Ic,1,2,"ng-template",13),e.\u0275\u0275elementContainerEnd(),e.\u0275\u0275elementContainerStart(34,21),e.\u0275\u0275elementStart(35,"a",12),e.\u0275\u0275i18n(36,8),e.\u0275\u0275elementEnd(),e.\u0275\u0275template(37,Ac,1,2,"ng-template",13),e.\u0275\u0275elementContainerEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275element(38,"div",22),e.\u0275\u0275elementContainerEnd()}if(2&n){const t=e.\u0275\u0275reference(2),o=e.\u0275\u0275nextContext();e.\u0275\u0275advance(32),e.\u0275\u0275textInterpolate(o.clients.data.length),e.\u0275\u0275advance(6),e.\u0275\u0275property("ngbNavOutlet",t)}}let yc=(()=>{class n{constructor(t,o,i){this.ngZone=t,this.authStorageService=o,this.cephfsService=i,this.clients={data:[],status:new Wt.m(en.k.ValueNone)},this.details={standbys:"",pools:[],ranks:[],mdsCounters:{},name:""},this.grafanaPermission=this.authStorageService.getPermissions().grafana}ngOnChanges(){this.selection?this.selection.id!==this.id&&this.setupSelected(this.selection.id,this.selection.mdsmap.info):this.unsubscribeInterval()}setupSelected(t,o){this.id=t;const i=E().first(Object.values(o));this.grafanaId=i&&i.name,this.details={standbys:"",pools:[],ranks:[],mdsCounters:{},name:""},this.clients={data:[],status:new Wt.m(en.k.ValueNone)},this.updateInterval()}updateInterval(){this.unsubscribeInterval(),this.subscribeInterval()}unsubscribeInterval(){this.reloadSubscriber&&this.reloadSubscriber.unsubscribe()}subscribeInterval(){this.ngZone.runOutsideAngular(()=>this.reloadSubscriber=(0,K.timer)(0,5e3).subscribe(()=>this.ngZone.run(()=>this.refresh())))}refresh(){this.cephfsService.getTabs(this.id).subscribe(t=>{this.data=t,this.softRefresh()},()=>{this.clients.status=new Wt.m(en.k.ValueException)})}softRefresh(){const t=E().cloneDeep(this.data);this.clients=t?.clients,this.clients.status=new Wt.m(this.clients?.status),this.details={standbys:t.standbys,pools:t.pools,ranks:t.ranks,mdsCounters:t.mds_counters,name:t.name}}ngOnDestroy(){this.unsubscribeInterval()}static{this.\u0275fac=function(o){return new(o||n)(e.\u0275\u0275directiveInject(e.NgZone),e.\u0275\u0275directiveInject(_.v),e.\u0275\u0275directiveInject(N))}}static{this.\u0275cmp=e.\u0275\u0275defineComponent({type:n,selectors:[["cd-cephfs-tabs"]],inputs:{selection:"selection"},features:[e.\u0275\u0275NgOnChangesFeature],decls:1,vars:1,consts:()=>{let t,o,i,r,p,F,D,x,H;return t=$localize`:␟4f8b2bb476981727ab34ed40fde1218361f92c45␟5028777105388019087:Details`,o=$localize`:␟6e213942c6354b9cbe7a650f0f1499bfc1000fb6␟82336768138700283:Directories`,i=$localize`:␟d5439bc4a2c71a425d5f84aa5b748ccccd5da1f0␟9171559241736080580:Subvolumes`,r=$localize`:␟ef87412ef5ebf5b6a82d4dbbe8cb2409f25e8d41␟3068368447042821094:Subvolume groups`,p=$localize`:␟f21b1d17b6c5042bb5805516eee37fde33739dd8␟633791246656795624:Snapshots`,F=$localize`:␟d74a1cf833386ae9083dba595b6f43b55dbaae8e␟2236965457470700363:Snapshot schedules`,D=$localize`:␟7ffe39df9d88c972792bd8688b215392deb8313d␟5910845130937645353:Clients`,x=$localize`:␟e95ae009d0bdb45fcc656e8b65248cf7396080d5␟2614607010577950577:Overview`,H=$localize`:␟b2c9b3141c3cb41f65910207b5304a8d61aa41a9␟8532744276442658971:CephFS performance`,[["nav","ngbNav"],t,o,i,r,p,F,D,x,[4,"ngIf"],["ngbNav","","cdStatefulTab","cephfs-tabs",1,"nav-tabs",3,"navChange"],["ngbNavItem","details"],["ngbNavLink",""],["ngbNavContent",""],["ngbNavItem","directories"],["ngbNavItem","subvolumes"],["ngbNavItem","subvolume-groups"],["ngbNavItem","snapshots"],["ngbNavItem","snapshot-schedules"],["ngbNavItem","clients"],[1,"badge","badge-pill","badge-tab","ms-1"],["ngbNavItem","performance-details"],[3,"ngbNavOutlet"],[3,"data"],[3,"id"],[3,"fsName","pools","id"],[3,"fsName","pools"],[3,"fsName"],[3,"fsName","id"],[3,"triggerApiUpdate","id","clients"],["title",H,"uid","718Bruins","grafanaStyle","one",3,"grafanaPath","type"]]},template:function(o,i){1&o&&e.\u0275\u0275template(0,Dc,39,2,"ng-container",9),2&o&&e.\u0275\u0275property("ngIf",i.selection)},dependencies:[l.NgIf,gt.c,yt.B,V.NgbNavContent,V.NgbNav,V.NgbNavItem,V.NgbNavLink,V.NgbNavLinkBase,V.NgbNavOutlet,Hn,Vn,Kn,mi,wi,U_,vc]})}}return n})();const Lc=["deleteTpl"];function $c(n,c){if(1&n&&e.\u0275\u0275element(0,"cd-cephfs-tabs",11),2&n){const t=e.\u0275\u0275nextContext(2);e.\u0275\u0275property("selection",t.expandedRow)}}function xc(n,c){if(1&n){const t=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"cd-table",7),e.\u0275\u0275listener("fetchData",function(i){e.\u0275\u0275restoreView(t);const r=e.\u0275\u0275nextContext();return e.\u0275\u0275resetView(r.loadFilesystems(i))})("setExpandedRow",function(i){e.\u0275\u0275restoreView(t);const r=e.\u0275\u0275nextContext();return e.\u0275\u0275resetView(r.setExpandedRow(i))})("updateSelection",function(i){e.\u0275\u0275restoreView(t);const r=e.\u0275\u0275nextContext();return e.\u0275\u0275resetView(r.updateSelection(i))}),e.\u0275\u0275template(1,$c,1,1,"cd-cephfs-tabs",8),e.\u0275\u0275elementStart(2,"div",9),e.\u0275\u0275element(3,"cd-table-actions",10),e.\u0275\u0275elementEnd()()}if(2&n){const t=e.\u0275\u0275nextContext();e.\u0275\u0275property("data",t.filesystems)("columns",t.columns)("hasDetails",!0),e.\u0275\u0275advance(3),e.\u0275\u0275property("permission",t.permissions.cephfs)("selection",t.selection)("tableActions",t.tableActions)}}function Uc(n,c){1&n&&(e.\u0275\u0275elementStart(0,"cd-alert-panel",12),e.\u0275\u0275i18n(1,3),e.\u0275\u0275elementEnd())}function wc(n,c){1&n&&e.\u0275\u0275element(0,"cd-grafana",14),2&n&&e.\u0275\u0275property("grafanaPath","ceph-filesystem-overview?")("type","metrics")}function Gc(n,c){if(1&n&&e.\u0275\u0275template(0,wc,1,2,"cd-grafana",13),2&n){const t=e.\u0275\u0275nextContext();e.\u0275\u0275property("ngIf",t.permissions.grafana.read)}}let Vc=(()=>{class n extends I.D{constructor(t,o,i,r,p,F,D,x,H,X,Z){super(),this.authStorageService=t,this.cephfsService=o,this.actionLabels=i,this.router=r,this.urlBuilder=p,this.configurationService=F,this.modalService=D,this.taskWrapper=x,this.notificationService=H,this.healthService=X,this.cdsModalService=Z,this.filesystems=[],this.selection=new A.y,this.icons=g.FI,this.monAllowPoolDelete=!1,this.permissions=this.authStorageService.getPermissions()}ngOnInit(){this.columns=[{name:$localize`Name`,prop:"mdsmap.fs_name",flexGrow:2},{name:$localize`Enabled`,prop:"mdsmap.enabled",flexGrow:2,cellTransformation:O.x.checkIcon},{name:$localize`Created`,prop:"mdsmap.created",flexGrow:1,cellTransformation:O.x.timeAgo}],this.tableActions=[{name:this.actionLabels.CREATE,permission:"create",icon:g.FI.add,click:()=>this.router.navigate([this.urlBuilder.getCreate()]),canBePrimary:t=>!t.hasSelection},{name:this.actionLabels.EDIT,permission:"update",icon:g.FI.edit,click:()=>this.router.navigate([this.urlBuilder.getEdit(String(this.selection.first().id))])},{name:this.actionLabels.AUTHORIZE,permission:"update",icon:g.FI.edit,click:()=>this.authorizeModal()},{name:this.actionLabels.ATTACH,permission:"read",icon:g.FI.bars,disable:()=>!this.selection?.hasSelection,click:()=>this.showAttachInfo()},{permission:"delete",icon:g.FI.destroy,click:()=>this.removeVolumeModal(),name:this.actionLabels.REMOVE,disable:this.getDisableDesc.bind(this)}],this.permissions.configOpt.read&&this.configurationService.get("mon_allow_pool_delete").subscribe(t=>{if(E().has(t,"value")){const o=E().find(t.value,i=>"mon"===i.section)||{value:!1};this.monAllowPoolDelete="true"===o.value}})}loadFilesystems(t){this.cephfsService.list().subscribe(o=>{this.filesystems=o},()=>{t.error()})}updateSelection(t){this.selection=t}showAttachInfo(){const t=this.selection?.selected?.[0];this.cephfsService.getFsRootDirectory(t.id).pipe((0,u.switchMap)(o=>this.healthService.getClusterFsid().pipe((0,u.map)(i=>({clusterId:i,fs:o}))))).subscribe({next:o=>{this.modalRef=this.modalService.show(de,{onSubmit:()=>this.modalRef.close(),mountData:{fsId:o.clusterId,fsName:t?.mdsmap?.fs_name,rootPath:o.fs.path}})}})}removeVolumeModal(){const t=this.selection.first().mdsmap.fs_name;this.cdsModalService.show(P.D,{impact:Tt.r.high,itemDescription:"File System",itemNames:[t],actionDescription:"remove",bodyTemplate:this.deleteTpl,submitActionObservable:()=>this.taskWrapper.wrapTaskAroundCall({task:new ie.O("cephfs/remove",{volumeName:t}),call:this.cephfsService.remove(t)})})}getDisableDesc(){return!this.selection?.hasSelection||!this.monAllowPoolDelete&&$localize`File System deletion is disabled by the mon_allow_pool_delete configuration setting.`}authorizeModal(){const t=this.selection?.selected?.[0];this.modalService.show(jt,{fsName:t.mdsmap.fs_name,id:t.id})}static{this.\u0275fac=function(o){return new(o||n)(e.\u0275\u0275directiveInject(_.v),e.\u0275\u0275directiveInject(N),e.\u0275\u0275directiveInject(f.Ss),e.\u0275\u0275directiveInject(m.Router),e.\u0275\u0275directiveInject(B.E),e.\u0275\u0275directiveInject(M.s),e.\u0275\u0275directiveInject(Ge.V),e.\u0275\u0275directiveInject(w.a),e.\u0275\u0275directiveInject(Y.J),e.\u0275\u0275directiveInject(ue),e.\u0275\u0275directiveInject(Ge.V))}}static{this.\u0275cmp=e.\u0275\u0275defineComponent({type:n,selectors:[["cd-cephfs-list"]],viewQuery:function(o,i){if(1&o&&e.\u0275\u0275viewQuery(Lc,7),2&o){let r;e.\u0275\u0275queryRefresh(r=e.\u0275\u0275loadQuery())&&(i.deleteTpl=r.first)}},features:[e.\u0275\u0275ProvidersFeature([{provide:B.E,useValue:new B.E("cephfs/fs")}]),e.\u0275\u0275InheritDefinitionFeature],decls:9,vars:6,consts:()=>{let t,o,i,r;return t=$localize`:␟475a35c44ebf9915bd5c528f63f0520a4ce31a9c␟8798773671738403562:File systems`,o=$localize`:␟e95ae009d0bdb45fcc656e8b65248cf7396080d5␟2614607010577950577:Overview`,i=$localize`:␟2a53b8619479b209e721882de3d2fedd3227ba3a␟2902938361826347377: This will remove its data and metadata pools. It'll also remove the MDS daemon associated with the volume. `,r=$localize`:␟cf865ecb6e781de04bbd464c9a89b1a7b5f0567f␟7695855201984025346:CephFS Overview`,[["fileSystemListContent",""],["deleteTpl",""],["grafanaContent",""],i,[3,"type","followFocus","isNavigation","cacheActive"],["heading",t,3,"tabContent"],["heading",o,3,"tabContent"],["columnMode","flex","identifier","id","forceIdentifier","true","selectionType","single",3,"fetchData","setExpandedRow","updateSelection","data","columns","hasDetails"],[3,"selection",4,"cdTableDetail"],[1,"table-actions"],["id","cephfs-actions",1,"btn-group",3,"permission","selection","tableActions"],[3,"selection"],["type","danger"],["title",r,"uid","718Bruins","grafanaStyle","two",3,"grafanaPath","type",4,"ngIf"],["title",r,"uid","718Bruins","grafanaStyle","two",3,"grafanaPath","type"]]},template:function(o,i){if(1&o&&(e.\u0275\u0275elementStart(0,"cds-tabs",4),e.\u0275\u0275element(1,"cds-tab",5)(2,"cds-tab",6),e.\u0275\u0275elementEnd(),e.\u0275\u0275template(3,xc,4,6,"ng-template",null,0,e.\u0275\u0275templateRefExtractor)(5,Uc,2,0,"ng-template",null,1,e.\u0275\u0275templateRefExtractor)(7,Gc,1,1,"ng-template",null,2,e.\u0275\u0275templateRefExtractor)),2&o){const r=e.\u0275\u0275reference(4),p=e.\u0275\u0275reference(8);e.\u0275\u0275property("type","contained")("followFocus",!0)("isNavigation",!1)("cacheActive",!0),e.\u0275\u0275advance(),e.\u0275\u0275property("tabContent",r),e.\u0275\u0275advance(),e.\u0275\u0275property("tabContent",p)}},dependencies:[l.NgIf,gt.c,it.m,Ke.O,dt.j,Ct.N,L.Tabs,L.Tab,yc]})}}return n})(),to=(()=>{class n{static{this.knownTypes=[{name:"uint",inputType:"number",humanReadable:"Unsigned integer value",defaultMin:0,patternHelpText:"The entered value needs to be an unsigned number.",isNumberType:!0,allowsNegative:!1},{name:"int",inputType:"number",humanReadable:"Integer value",patternHelpText:"The entered value needs to be a number.",isNumberType:!0,allowsNegative:!0},{name:"size",inputType:"number",humanReadable:"Unsigned integer value (>=16bit)",defaultMin:0,patternHelpText:"The entered value needs to be a unsigned number.",isNumberType:!0,allowsNegative:!1},{name:"secs",inputType:"number",humanReadable:"Number of seconds",defaultMin:1,patternHelpText:"The entered value needs to be a number >= 1.",isNumberType:!0,allowsNegative:!1},{name:"float",inputType:"number",humanReadable:"Double value",patternHelpText:"The entered value needs to be a number or decimal.",isNumberType:!0,allowsNegative:!0},{name:"str",inputType:"text",humanReadable:"Text",isNumberType:!1},{name:"addr",inputType:"text",humanReadable:"IPv4 or IPv6 address",patternHelpText:"The entered value needs to be a valid IP address.",isNumberType:!1},{name:"uuid",inputType:"text",humanReadable:"UUID",patternHelpText:"The entered value is not a valid UUID, e.g.: 67dcac9f-2c03-4d6c-b7bd-1210b3a259a8",isNumberType:!1},{name:"bool",inputType:"checkbox",humanReadable:"Boolean value",isNumberType:!1}]}static getType(t){const o=E().find(this.knownTypes,i=>i.name===t);if(void 0!==o)return o;throw new Error('Found unknown type "'+t+'" for config option.')}static getTypeValidators(t){const o=n.getType(t.type);if("bool"===o.name||"str"===o.name)return;const i={validators:[],patternHelpText:o.patternHelpText};return o.isNumberType?(t.max&&""!==t.max&&(i.max=t.max,i.validators.push(T.Validators.max(t.max))),t.min&&""!==t.min?(i.min=t.min,i.validators.push(T.Validators.min(t.min))):"defaultMin"in o&&(i.min=o.defaultMin,i.validators.push(T.Validators.min(o.defaultMin))),i.validators.push("float"===t.type?ge.xQ.decimalNumber():ge.xQ.number(o.allowsNegative))):"addr"===t.type?i.validators=[ge.xQ.ip()]:"uuid"===t.type&&(i.validators=[ge.xQ.uuid()]),i}static getTypeStep(t,o){if(["uint","int","size","secs"].includes(t))return 1;if("float"===t){if(null!==o&&-1!==o.toString().indexOf(".")){const p=o.toString().split(".");return Math.pow(10,-p[1].length)}return.1}}}return n})();class Bc{constructor(){this.value=[],this.force_update=!1}}function zc(n,c){1&n&&(e.\u0275\u0275elementStart(0,"div",20)(1,"label",21),e.\u0275\u0275i18n(2,3),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(3,"div",22)(4,"textarea",30),e.\u0275\u0275text(5,"            "),e.\u0275\u0275elementEnd()()())}function Xc(n,c){1&n&&(e.\u0275\u0275elementStart(0,"div",20)(1,"label",21),e.\u0275\u0275i18n(2,4),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(3,"div",22)(4,"textarea",31),e.\u0275\u0275text(5,"            "),e.\u0275\u0275elementEnd()()())}function kc(n,c){1&n&&(e.\u0275\u0275elementStart(0,"div",20)(1,"label",21),e.\u0275\u0275i18n(2,5),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(3,"div",22),e.\u0275\u0275element(4,"input",32),e.\u0275\u0275elementEnd()())}function jc(n,c){1&n&&(e.\u0275\u0275elementStart(0,"div",20)(1,"label",21),e.\u0275\u0275i18n(2,6),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(3,"div",22),e.\u0275\u0275element(4,"input",33),e.\u0275\u0275elementEnd()())}function Wc(n,c){if(1&n&&(e.\u0275\u0275elementStart(0,"span",35)(1,"span",36),e.\u0275\u0275text(2),e.\u0275\u0275elementEnd()()),2&n){const t=c.$implicit;e.\u0275\u0275advance(2),e.\u0275\u0275textInterpolate(t)}}function Kc(n,c){if(1&n&&(e.\u0275\u0275elementStart(0,"div",20)(1,"label",21),e.\u0275\u0275i18n(2,7),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(3,"div",22),e.\u0275\u0275template(4,Wc,3,1,"span",34),e.\u0275\u0275elementEnd()()),2&n){const t=e.\u0275\u0275nextContext(2);e.\u0275\u0275advance(4),e.\u0275\u0275property("ngForOf",t.configForm.getValue("services"))}}function Qc(n,c){if(1&n&&(e.\u0275\u0275elementStart(0,"div",20)(1,"label",37),e.\u0275\u0275text(2),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(3,"div",22)(4,"select",38)(5,"option",39),e.\u0275\u0275i18n(6,8),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(7,"option",39),e.\u0275\u0275i18n(8,9),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(9,"option",39),e.\u0275\u0275i18n(10,10),e.\u0275\u0275elementEnd()()()()),2&n){const t=e.\u0275\u0275nextContext().$implicit;e.\u0275\u0275advance(),e.\u0275\u0275property("for",t),e.\u0275\u0275advance(),e.\u0275\u0275textInterpolate1("",t," "),e.\u0275\u0275advance(2),e.\u0275\u0275property("formControlName",t),e.\u0275\u0275advance(),e.\u0275\u0275property("ngValue",null),e.\u0275\u0275advance(2),e.\u0275\u0275property("ngValue",!0),e.\u0275\u0275advance(2),e.\u0275\u0275property("ngValue",!1)}}function Yc(n,c){if(1&n&&(e.\u0275\u0275elementStart(0,"span",42),e.\u0275\u0275text(1),e.\u0275\u0275elementEnd()),2&n){const t=e.\u0275\u0275nextContext(4);e.\u0275\u0275advance(),e.\u0275\u0275textInterpolate1(" ",t.patternHelpText," ")}}function Jc(n,c){if(1&n&&(e.\u0275\u0275elementStart(0,"span",42),e.\u0275\u0275text(1),e.\u0275\u0275elementEnd()),2&n){const t=e.\u0275\u0275nextContext(4);e.\u0275\u0275advance(),e.\u0275\u0275textInterpolate1(" ",t.patternHelpText," ")}}function Zc(n,c){if(1&n&&(e.\u0275\u0275elementStart(0,"span",42),e.\u0275\u0275i18n(1,11),e.\u0275\u0275elementEnd()),2&n){const t=e.\u0275\u0275nextContext(4);e.\u0275\u0275advance(),e.\u0275\u0275i18nExp(t.maxValue),e.\u0275\u0275i18nApply(1)}}function qc(n,c){if(1&n&&(e.\u0275\u0275elementStart(0,"span",42),e.\u0275\u0275i18n(1,12),e.\u0275\u0275elementEnd()),2&n){const t=e.\u0275\u0275nextContext(4);e.\u0275\u0275advance(),e.\u0275\u0275i18nExp(t.minValue),e.\u0275\u0275i18nApply(1)}}function ed(n,c){if(1&n&&(e.\u0275\u0275elementStart(0,"div",20)(1,"label",37),e.\u0275\u0275text(2),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(3,"div",22),e.\u0275\u0275element(4,"input",40),e.\u0275\u0275template(5,Yc,2,1,"span",41)(6,Jc,2,1,"span",41)(7,Zc,2,1,"span",41)(8,qc,2,1,"span",41),e.\u0275\u0275elementEnd()()),2&n){const t=e.\u0275\u0275nextContext().$implicit;e.\u0275\u0275nextContext();const o=e.\u0275\u0275reference(2),i=e.\u0275\u0275nextContext();e.\u0275\u0275advance(),e.\u0275\u0275property("for",t),e.\u0275\u0275advance(),e.\u0275\u0275textInterpolate1("",t," "),e.\u0275\u0275advance(2),e.\u0275\u0275property("type",i.inputType)("id",t)("placeholder",i.humanReadableType)("formControlName",t)("step",i.getStep(i.type,i.configForm.getValue(t))),e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf",i.configForm.showError(t,o,"pattern")),e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf",i.configForm.showError(t,o,"invalidUuid")),e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf",i.configForm.showError(t,o,"max")),e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf",i.configForm.showError(t,o,"min"))}}function td(n,c){if(1&n&&(e.\u0275\u0275elementContainerStart(0),e.\u0275\u0275template(1,Qc,11,6,"div",24)(2,ed,9,11,"div",24),e.\u0275\u0275elementContainerEnd()),2&n){const t=e.\u0275\u0275nextContext(2);e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf","bool"===t.type),e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf","bool"!==t.type)}}function nd(n,c){if(1&n){const t=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"div",14)(1,"form",15,0)(3,"div",16)(4,"div",17),e.\u0275\u0275elementContainerStart(5,18),e.\u0275\u0275text(6,"Edit"),e.\u0275\u0275elementContainerEnd(),e.\u0275\u0275text(7),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(8,"div",19)(9,"div",20)(10,"label",21),e.\u0275\u0275i18n(11,1),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(12,"div",22),e.\u0275\u0275element(13,"input",23),e.\u0275\u0275elementEnd()(),e.\u0275\u0275template(14,zc,6,0,"div",24)(15,Xc,6,0,"div",24)(16,kc,5,0,"div",24)(17,jc,5,0,"div",24)(18,Kc,5,1,"div",24),e.\u0275\u0275elementStart(19,"div",25)(20,"h3",26),e.\u0275\u0275i18n(21,2),e.\u0275\u0275elementEnd(),e.\u0275\u0275template(22,td,3,2,"ng-container",27),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(23,"div",28)(24,"cd-form-button-panel",29),e.\u0275\u0275listener("submitActionEvent",function(){e.\u0275\u0275restoreView(t);const i=e.\u0275\u0275nextContext();return e.\u0275\u0275resetView(i.forceUpdate?i.openCriticalConfirmModal():i.submit())}),e.\u0275\u0275elementEnd()()()()()}if(2&n){const t=e.\u0275\u0275nextContext();e.\u0275\u0275advance(),e.\u0275\u0275property("formGroup",t.configForm),e.\u0275\u0275advance(6),e.\u0275\u0275textInterpolate1(" ",t.configForm.getValue("name")," "),e.\u0275\u0275advance(7),e.\u0275\u0275property("ngIf",t.configForm.getValue("desc")),e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf",t.configForm.getValue("long_desc")),e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf",""!==t.configForm.getValue("default")),e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf",""!==t.configForm.getValue("daemon_default")),e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf",t.configForm.getValue("services").length>0),e.\u0275\u0275advance(4),e.\u0275\u0275property("ngForOf",t.availSections),e.\u0275\u0275advance(2),e.\u0275\u0275property("form",t.configForm)("submitText",t.actionLabels.UPDATE)}}let id=(()=>{class n extends Te.g{constructor(t,o,i,r,p,F){super(),this.actionLabels=t,this.route=o,this.router=i,this.configService=r,this.notificationService=p,this.modalService=F,this.availSections=["global","mon","mgr","osd","mds","client"],this.createForm()}createForm(){const t={name:new T.UntypedFormControl({value:null}),desc:new T.UntypedFormControl({value:null}),long_desc:new T.UntypedFormControl({value:null}),values:new T.UntypedFormGroup({}),default:new T.UntypedFormControl({value:null}),daemon_default:new T.UntypedFormControl({value:null}),services:new T.UntypedFormControl([])};this.availSections.forEach(o=>{t.values.addControl(o,new T.UntypedFormControl(null))}),this.configForm=new Se.$(t)}ngOnInit(){this.route.params.subscribe(t=>{this.configService.get(t.name).subscribe(i=>{this.setResponse(i),this.loadingReady()})})}getValidators(t){const o=to.getTypeValidators(t);if(o)return this.patternHelpText=o.patternHelpText,"max"in o&&""!==o.max&&(this.maxValue=o.max),"min"in o&&""!==o.min&&(this.minValue=o.min),o.validators}getStep(t,o){return to.getTypeStep(t,o)}setResponse(t){this.response=t;const o=this.getValidators(t);this.configForm.get("name").setValue(t.name),this.configForm.get("desc").setValue(t.desc),this.configForm.get("long_desc").setValue(t.long_desc),this.configForm.get("default").setValue(t.default),this.configForm.get("daemon_default").setValue(t.daemon_default),this.configForm.get("services").setValue(t.services),this.response.value&&this.response.value.forEach(r=>{let p=null;p="true"===r.value||"false"!==r.value&&r.value,this.configForm.get("values").get(r.section).setValue(p)}),this.forceUpdate=!this.response.can_update_at_runtime&&t.name.includes("rgw"),this.availSections.forEach(r=>{this.configForm.get("values").get(r).setValidators(o)});const i=to.getType(t.type);this.type=i.name,this.inputType=i.inputType,this.humanReadableType=i.humanReadable}createRequest(){const t=[];if(this.availSections.forEach(o=>{const i=this.configForm.getValue(o);null!==i&&t.push({section:o,value:i})}),!E().isEqual(this.response.value,t)){const o=new Bc;return o.name=this.configForm.getValue("name"),o.value=t,this.forceUpdate&&(o.force_update=this.forceUpdate),o}return null}openCriticalConfirmModal(){this.modalService.show(P.D,{buttonText:$localize`Force Edit`,actionDescription:$localize`force edit`,itemDescription:$localize`configuration`,infoMessage:"Updating this configuration might require restarting the client",submitAction:()=>{this.modalService.dismissAll(),this.submit()}})}submit(){const t=this.createRequest();t&&this.configService.create(t).subscribe(()=>{this.notificationService.show(Le._.success,$localize`Updated config option ${t.name}`),this.router.navigate(["/configuration"])},()=>{this.configForm.setErrors({cdSubmitButton:!0})}),this.router.navigate(["/configuration"])}static{this.\u0275fac=function(o){return new(o||n)(e.\u0275\u0275directiveInject(f.Ss),e.\u0275\u0275directiveInject(m.ActivatedRoute),e.\u0275\u0275directiveInject(m.Router),e.\u0275\u0275directiveInject(M.s),e.\u0275\u0275directiveInject(Y.J),e.\u0275\u0275directiveInject(Ge.V))}}static{this.\u0275cmp=e.\u0275\u0275defineComponent({type:n,selectors:[["cd-configuration-form"]],features:[e.\u0275\u0275InheritDefinitionFeature],decls:1,vars:1,consts:()=>{let t,o,i,r,p,F,D,x,H,X,Z,re;return t=$localize`:␟cff1428d10d59d14e45edec3c735a27b5482db59␟8953033926734869941:Name`,o=$localize`:␟809b0c848932a41318f77a2aace904ef429c13f4␟1805506778275601584:Values`,i=$localize`:␟eec715de352a6b114713b30b640d319fa78207a0␟4902817035128594900:Description`,r=$localize`:␟4ad112ce9bcd55dfd137792a86afe1b5a5b13cf8␟6130151799505109360:Long description`,p=$localize`:␟ff7cee38a2259526c519f878e71b964f41db4348␟5607669932062416162:Default`,F=$localize`:␟33e1c1d9fc05ca3f62fcc8a1170fc31ebae4229c␟6482135781715515974:Daemon default`,D=$localize`:␟419d940613972cc3fae9c8ea0a4306dbf80616e5␟7143579180750436311:Services`,x=$localize`:␟5894f7158499fdb89527af50c9f1cf7d4c95cad6␟4806606239259832590:-- Default --`,H=$localize`:␟514f6e12d035a6d9b00de6b3e55c18b73488da07␟8510110714273600559:true`,X=$localize`:␟774f5e6a183dea08393789b6f72e86afad729419␟1444040760165348386:false`,Z=$localize`:␟82029b6db704c56a2aa3e82ac555b8655356b077␟7780292290002908449:The entered value is too high! It must not be greater than ${"\ufffd0\ufffd"}:INTERPOLATION:.`,re=$localize`:␟8ed8b3967a7326b81b191c9f490006e6a6777a9a␟3654125295495321381:The entered value is too low! It must not be lower than ${"\ufffd0\ufffd"}:INTERPOLATION:.`,[["formDir","ngForm"],t,o,i,r,p,F,D,x,H,X,Z,re,["class","cd-col-form",4,"cdFormLoading"],[1,"cd-col-form"],["name","configForm","novalidate","",3,"formGroup"],[1,"card"],[1,"card-header"],["i18",""],[1,"card-body"],[1,"form-group","row"],[1,"cd-col-form-label"],[1,"cd-col-form-input"],["type","text","id","name","formControlName","name","readonly","",1,"form-control"],["class","form-group row",4,"ngIf"],["formGroupName","values"],[1,"cd-header"],[4,"ngFor","ngForOf"],[1,"card-footer"],["wrappingClass","text-right",3,"submitActionEvent","form","submitText"],["id","desc","formControlName","desc","readonly","",1,"form-control","resize-vertical"],["id","long_desc","formControlName","long_desc","readonly","",1,"form-control","resize-vertical"],["type","text","id","default","formControlName","default","readonly","",1,"form-control"],["type","text","id","daemon_default","formControlName","daemon_default","readonly","",1,"form-control"],["class","form-component-badge",4,"ngFor","ngForOf"],[1,"form-component-badge"],[1,"badge","badge-dark"],[1,"cd-col-form-label",3,"for"],["id","pool","name","pool",1,"form-select",3,"formControlName"],[3,"ngValue"],[1,"form-control",3,"type","id","placeholder","formControlName","step"],["class","invalid-feedback",4,"ngIf"],[1,"invalid-feedback"]]},template:function(o,i){1&o&&e.\u0275\u0275template(0,nd,25,10,"div",13),2&o&&e.\u0275\u0275property("cdFormLoading",i.loading)},dependencies:[l.NgForOf,l.NgIf,Q.e,rt.G,De.S,Me.a,xe.C,ze.E,T.\u0275NgNoValidate,T.NgSelectOption,T.\u0275NgSelectMultipleOption,T.DefaultValueAccessor,T.SelectControlValueAccessor,T.NgControlStatus,T.NgControlStatusGroup,T.FormGroupDirective,T.FormControlName,T.FormGroupName],styles:[".form-component-badge[_ngcontent-%COMP%]{display:block;height:34px}.form-component-badge[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{margin-top:7px}.resize-vertical[_ngcontent-%COMP%]{resize:vertical}"]})}}return n})();var ad=s(91822);function sd(n,c){if(1&n&&(e.\u0275\u0275elementStart(0,"span"),e.\u0275\u0275text(1),e.\u0275\u0275element(2,"br"),e.\u0275\u0275elementEnd()),2&n){const t=c.$implicit,o=c.last;e.\u0275\u0275advance(),e.\u0275\u0275textInterpolate3(" ",t.section,": ",t.value,"",o?"":",","")}}function rd(n,c){if(1&n&&(e.\u0275\u0275elementStart(0,"span")(1,"span",23)(2,"span",24),e.\u0275\u0275text(3),e.\u0275\u0275pipe(4,"uppercase"),e.\u0275\u0275elementEnd()()()),2&n){const t=c.$implicit,o=e.\u0275\u0275nextContext(2);e.\u0275\u0275advance(),e.\u0275\u0275propertyInterpolate("title",o.flags[t]),e.\u0275\u0275advance(2),e.\u0275\u0275textInterpolate(e.\u0275\u0275pipeBind1(4,2,t))}}function ld(n,c){if(1&n&&(e.\u0275\u0275elementStart(0,"span")(1,"span",24),e.\u0275\u0275text(2),e.\u0275\u0275elementEnd()()),2&n){const t=c.$implicit;e.\u0275\u0275advance(2),e.\u0275\u0275textInterpolate(t)}}function _d(n,c){if(1&n&&(e.\u0275\u0275elementContainerStart(0),e.\u0275\u0275elementStart(1,"table",18)(2,"tbody")(3,"tr")(4,"td",19),e.\u0275\u0275i18n(5,0),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(6,"td",20),e.\u0275\u0275text(7),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(8,"tr")(9,"td",21),e.\u0275\u0275i18n(10,1),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(11,"td"),e.\u0275\u0275text(12),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(13,"tr")(14,"td",21),e.\u0275\u0275i18n(15,2),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(16,"td"),e.\u0275\u0275text(17),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(18,"tr")(19,"td",21),e.\u0275\u0275i18n(20,3),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(21,"td"),e.\u0275\u0275template(22,sd,3,3,"span",22),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(23,"tr")(24,"td",21),e.\u0275\u0275i18n(25,4),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(26,"td"),e.\u0275\u0275text(27),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(28,"tr")(29,"td",21),e.\u0275\u0275i18n(30,5),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(31,"td"),e.\u0275\u0275text(32),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(33,"tr")(34,"td",21),e.\u0275\u0275i18n(35,6),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(36,"td"),e.\u0275\u0275text(37),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(38,"tr")(39,"td",21),e.\u0275\u0275i18n(40,7),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(41,"td"),e.\u0275\u0275text(42),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(43,"tr")(44,"td",21),e.\u0275\u0275i18n(45,8),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(46,"td"),e.\u0275\u0275text(47),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(48,"tr")(49,"td",21),e.\u0275\u0275i18n(50,9),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(51,"td"),e.\u0275\u0275template(52,rd,5,4,"span",22),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(53,"tr")(54,"td",21),e.\u0275\u0275i18n(55,10),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(56,"td"),e.\u0275\u0275template(57,ld,3,1,"span",22),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(58,"tr")(59,"td",21),e.\u0275\u0275i18n(60,11),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(61,"td"),e.\u0275\u0275text(62),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(63,"tr")(64,"td",21),e.\u0275\u0275i18n(65,12),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(66,"td"),e.\u0275\u0275text(67),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(68,"tr")(69,"td",21),e.\u0275\u0275i18n(70,13),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(71,"td"),e.\u0275\u0275text(72),e.\u0275\u0275pipe(73,"booleanText"),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(74,"tr")(75,"td",21),e.\u0275\u0275i18n(76,14),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(77,"td"),e.\u0275\u0275text(78),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(79,"tr")(80,"td",21),e.\u0275\u0275i18n(81,15),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(82,"td"),e.\u0275\u0275text(83),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(84,"tr")(85,"td",21),e.\u0275\u0275i18n(86,16),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(87,"td"),e.\u0275\u0275text(88),e.\u0275\u0275elementEnd()()()(),e.\u0275\u0275elementContainerEnd()),2&n){const t=e.\u0275\u0275nextContext();e.\u0275\u0275advance(7),e.\u0275\u0275textInterpolate(t.selection.name),e.\u0275\u0275advance(5),e.\u0275\u0275textInterpolate(t.selection.desc),e.\u0275\u0275advance(5),e.\u0275\u0275textInterpolate(t.selection.long_desc),e.\u0275\u0275advance(5),e.\u0275\u0275property("ngForOf",t.selection.value),e.\u0275\u0275advance(5),e.\u0275\u0275textInterpolate(t.selection.default),e.\u0275\u0275advance(5),e.\u0275\u0275textInterpolate(t.selection.daemon_default),e.\u0275\u0275advance(5),e.\u0275\u0275textInterpolate(t.selection.type),e.\u0275\u0275advance(5),e.\u0275\u0275textInterpolate(t.selection.min),e.\u0275\u0275advance(5),e.\u0275\u0275textInterpolate(t.selection.max),e.\u0275\u0275advance(5),e.\u0275\u0275property("ngForOf",t.selection.flags),e.\u0275\u0275advance(5),e.\u0275\u0275property("ngForOf",t.selection.services),e.\u0275\u0275advance(5),e.\u0275\u0275textInterpolate(t.selection.source),e.\u0275\u0275advance(5),e.\u0275\u0275textInterpolate(t.selection.level),e.\u0275\u0275advance(5),e.\u0275\u0275textInterpolate(e.\u0275\u0275pipeBind1(73,17,t.selection.can_update_at_runtime)),e.\u0275\u0275advance(6),e.\u0275\u0275textInterpolate(t.selection.tags),e.\u0275\u0275advance(5),e.\u0275\u0275textInterpolate(t.selection.enum_values),e.\u0275\u0275advance(5),e.\u0275\u0275textInterpolate(t.selection.see_also)}}let cd=(()=>{class n{constructor(){this.flags={runtime:$localize`The value can be updated at runtime.`,no_mon_update:$localize`Daemons/clients do not pull this value from the
      monitor config database. We disallow setting this option via 'ceph config
      set ...'. This option should be configured via ceph.conf or via the
      command line.`,startup:$localize`Option takes effect only during daemon startup.`,cluster_create:$localize`Option only affects cluster creation.`,create:$localize`Option only affects daemon creation.`}}ngOnChanges(){this.selection&&(this.selection.services=E().split(this.selection.services,","))}static{this.\u0275fac=function(o){return new(o||n)}}static{this.\u0275cmp=e.\u0275\u0275defineComponent({type:n,selectors:[["cd-configuration-details"]],inputs:{selection:"selection"},features:[e.\u0275\u0275NgOnChangesFeature],decls:1,vars:1,consts:()=>{let t,o,i,r,p,F,D,x,H,X,Z,re,pe,be,Pe,he,Ue;return t=$localize`:␟cff1428d10d59d14e45edec3c735a27b5482db59␟8953033926734869941:Name`,o=$localize`:␟eec715de352a6b114713b30b640d319fa78207a0␟4902817035128594900:Description`,i=$localize`:␟4ad112ce9bcd55dfd137792a86afe1b5a5b13cf8␟6130151799505109360:Long description`,r=$localize`:␟26fb5f81b3581f06b9210defb0e71dc69a67e819␟2712010257983367841:Current values`,p=$localize`:␟ff7cee38a2259526c519f878e71b964f41db4348␟5607669932062416162:Default`,F=$localize`:␟33e1c1d9fc05ca3f62fcc8a1170fc31ebae4229c␟6482135781715515974:Daemon default`,D=$localize`:␟f61c6867295f3b53d23557021f2f4e0aa1d0b8fc␟8650499415827640724:Type`,x=$localize`:␟9abcd7c82643d60c22733470463f74e4a54bc069␟4912803901980915876:Min`,H=$localize`:␟c3ced4d162a0a55ee233a187ce7208ba5e922418␟3667949571823271511:Max`,X=$localize`:␟920617c6a1a4805e53bcb5af6a9c76f8387e89c6␟2870788902465061969:Flags`,Z=$localize`:␟419d940613972cc3fae9c8ea0a4306dbf80616e5␟7143579180750436311:Services`,re=$localize`:␟6834fa6b43d1ecbdf147c48dd9c4d72f1484571d␟9155608366859514313:Source`,pe=$localize`:␟a446fb0eb11fbffcac805ece5a2d306d24e733d8␟3733215288982610673:Level`,be=$localize`:␟39f2fb094e9b2eda13163fa3f3a31594cf9c1307␟156919104722494837:Can be updated at runtime (editable)`,Pe=$localize`:␟cafc87479686947e2590b9f588a88040aeaf660b␟7886570921510760899:Tags`,he=$localize`:␟ab0089ef47af61ca1d137bc908b96c290dfd9287␟4019384818635807349:Enum values`,Ue=$localize`:␟819476f1264f1659f38e86f6abb542141b184832␟3538946315854308688:See also`,[t,o,i,r,p,F,D,x,H,X,Z,re,pe,be,Pe,he,Ue,[4,"ngIf"],["data-testid","config-details-table",1,"cds--data-table--sort","cds--data-table--no-border","cds--data-table","cds--data-table--md"],[1,"bold","w-25"],[1,"w-75"],[1,"bold"],[4,"ngFor","ngForOf"],[3,"title"],[1,"badge","badge-dark","me-2"]]},template:function(o,i){1&o&&e.\u0275\u0275template(0,_d,89,19,"ng-container",17),2&o&&e.\u0275\u0275property("ngIf",i.selection)},dependencies:[l.NgForOf,l.NgIf,l.UpperCasePipe,ad.s]})}}return n})();const dd=["confValTpl"],ud=["confFlagTpl"];function pd(n,c){if(1&n&&e.\u0275\u0275element(0,"cd-configuration-details",4),2&n){const t=e.\u0275\u0275nextContext();e.\u0275\u0275property("selection",t.expandedRow)}}function md(n,c){if(1&n&&(e.\u0275\u0275elementStart(0,"span"),e.\u0275\u0275text(1),e.\u0275\u0275element(2,"br"),e.\u0275\u0275elementEnd()),2&n){const t=c.$implicit,o=c.last;e.\u0275\u0275advance(),e.\u0275\u0275textInterpolate3(" ",t.section,": ",t.value,"",o?"":",","")}}function fd(n,c){if(1&n&&(e.\u0275\u0275elementStart(0,"span"),e.\u0275\u0275template(1,md,3,3,"span",6),e.\u0275\u0275elementEnd()),2&n){const t=e.\u0275\u0275nextContext().data.value;e.\u0275\u0275advance(),e.\u0275\u0275property("ngForOf",t)}}function Ed(n,c){1&n&&e.\u0275\u0275template(0,fd,2,1,"span",5),2&n&&e.\u0275\u0275property("ngIf",c.data.value)}let Cd=(()=>{class n extends I.D{constructor(t,o,i){super(),this.authStorageService=t,this.configurationService=o,this.actionLabels=i,this.data=[],this.icons=g.FI,this.selection=new A.y,this.filters=[{name:$localize`Modified`,prop:"modified",filterOptions:[$localize`yes`,$localize`no`],filterInitValue:$localize`yes`,filterPredicate:(F,D)=>!!("yes"===D&&F.hasOwnProperty("value")||"no"===D&&!F.hasOwnProperty("value"))},{name:$localize`Level`,prop:"level",filterOptions:["basic","advanced","dev"],filterPredicate:(F,D)=>{let x;var X;return(X=x||(x={}))[X.basic=0]="basic",X[X.advanced=1]="advanced",X[X.dev=2]="dev",x[F.level]<=x[D]}},{name:$localize`Service`,prop:"services",filterOptions:["mon","mgr","osd","mds","common","mds_client","rgw"],filterPredicate:(F,D)=>F.services.includes(D)},{name:$localize`Source`,prop:"source",filterOptions:["mon"],filterPredicate:(F,D)=>!!F.hasOwnProperty("source")&&F.source.includes(D)}],this.permission=this.authStorageService.getPermissions().configOpt;const r=()=>this.selection.first()&&`${encodeURIComponent(this.selection.first().name)}`;this.tableActions=[{permission:"update",icon:g.FI.edit,routerLink:()=>`/configuration/edit/${r()}`,name:this.actionLabels.EDIT,disable:()=>!this.isEditable(this.selection)}]}ngOnInit(){this.columns=[{canAutoResize:!0,prop:"name",name:$localize`Name`},{prop:"desc",name:$localize`Description`,cellClass:"wrap"},{prop:"value",name:$localize`Current value`,cellClass:"wrap",cellTemplate:this.confValTpl},{prop:"default",name:$localize`Default`,cellClass:"wrap"},{prop:"can_update_at_runtime",name:$localize`Editable`,cellTransformation:O.x.checkIcon,flexGrow:.4,cellClass:"text-center"}]}updateSelection(t){this.selection=t}getConfigurationList(t){this.configurationService.getConfigData().subscribe(o=>{this.data=o},()=>{t.error()})}isEditable(t){return 1===t.selected.length&&(!!this.selection.selected[0].name.includes("rgw")||this.selection.selected[0].can_update_at_runtime)}static{this.\u0275fac=function(o){return new(o||n)(e.\u0275\u0275directiveInject(_.v),e.\u0275\u0275directiveInject(M.s),e.\u0275\u0275directiveInject(f.Ss))}}static{this.\u0275cmp=e.\u0275\u0275defineComponent({type:n,selectors:[["cd-configuration"]],viewQuery:function(o,i){if(1&o&&(e.\u0275\u0275viewQuery(dd,7),e.\u0275\u0275viewQuery(ud,5)),2&o){let r;e.\u0275\u0275queryRefresh(r=e.\u0275\u0275loadQuery())&&(i.confValTpl=r.first),e.\u0275\u0275queryRefresh(r=e.\u0275\u0275loadQuery())&&(i.confFlagTpl=r.first)}},features:[e.\u0275\u0275InheritDefinitionFeature],decls:5,vars:7,consts:[["confValTpl",""],["selectionType","single",3,"fetchData","setExpandedRow","updateSelection","data","columns","extraFilterableColumns","hasDetails"],[1,"table-actions",3,"permission","selection","tableActions"],[3,"selection",4,"cdTableDetail"],[3,"selection"],[4,"ngIf"],[4,"ngFor","ngForOf"]],template:function(o,i){if(1&o){const r=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"cd-table",1),e.\u0275\u0275listener("fetchData",function(F){return e.\u0275\u0275restoreView(r),e.\u0275\u0275resetView(i.getConfigurationList(F))})("setExpandedRow",function(F){return e.\u0275\u0275restoreView(r),e.\u0275\u0275resetView(i.setExpandedRow(F))})("updateSelection",function(F){return e.\u0275\u0275restoreView(r),e.\u0275\u0275resetView(i.updateSelection(F))}),e.\u0275\u0275element(1,"cd-table-actions",2),e.\u0275\u0275template(2,pd,1,1,"cd-configuration-details",3),e.\u0275\u0275elementEnd(),e.\u0275\u0275template(3,Ed,1,1,"ng-template",null,0,e.\u0275\u0275templateRefExtractor)}2&o&&(e.\u0275\u0275property("data",i.data)("columns",i.columns)("extraFilterableColumns",i.filters)("hasDetails",!0),e.\u0275\u0275advance(),e.\u0275\u0275property("permission",i.permission)("selection",i.selection)("tableActions",i.tableActions))},dependencies:[l.NgForOf,l.NgIf,Ke.O,dt.j,Ct.N,cd],styles:[".filter[_ngcontent-%COMP%]{padding-right:8px}.fa-stack[_ngcontent-%COMP%]{font-size:.79rem}.fa-stack[_ngcontent-%COMP%]   .fa-stack-1x[_ngcontent-%COMP%]{margin-left:8px;margin-top:5px}  cd-configuration td[cdstabledata].wrap{word-break:break-all}"]})}}return n})(),Sd=(()=>{class n{constructor(t){this.http=t,this.baseURL="api/cluster"}getStatus(){return this.http.get(`${this.baseURL}`,{headers:{Accept:"application/vnd.ceph.api.v0.1+json"}})}updateStatus(t){return this.http.put(`${this.baseURL}`,{status:t},{headers:{Accept:"application/vnd.ceph.api.v0.1+json"}})}static{this.\u0275fac=function(o){return new(o||n)(e.\u0275\u0275inject(h.HttpClient))}}static{this.\u0275prov=e.\u0275\u0275defineInjectable({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();var Vt=s(7466),hd=s(60156),Td=s(92319);class Fd{constructor(c,t=1,o=0){return{params:c,headers:{Accept:`application/vnd.ceph.api.v${t}.${o}+json`},observe:"response"}}}let It=(()=>{class n{constructor(t,o){this.http=t,this.deviceService=o,this.path="api/osd",this.uiPath="ui-api/osd",this.osdDevices=[],this.isDeployementModeSimple=!0,this.osdRecvSpeedModalPriorities={KNOWN_PRIORITIES:[{name:null,text:$localize`-- Select the priority --`,values:{osd_max_backfills:null,osd_recovery_max_active:null,osd_recovery_max_single_start:null,osd_recovery_sleep:null}},{name:"low",text:$localize`Low`,values:{osd_max_backfills:1,osd_recovery_max_active:1,osd_recovery_max_single_start:1,osd_recovery_sleep:.5}},{name:"default",text:$localize`Default`,values:{osd_max_backfills:1,osd_recovery_max_active:3,osd_recovery_max_single_start:1,osd_recovery_sleep:0}},{name:"high",text:$localize`High`,values:{osd_max_backfills:4,osd_recovery_max_active:4,osd_recovery_max_single_start:4,osd_recovery_sleep:0}}]}}create(t,o,i="drive_groups"){return this.http.post(this.path,{method:i,data:t,tracking_id:o},{observe:"response"})}getList(t){return new Td.z(this.http.get(this.path,new Fd(t,1,1)))}getOsdSettings(){return this.http.get(`${this.path}/settings`,{headers:{Accept:"application/vnd.ceph.api.v0.1+json"}})}getDetails(t){return this.http.get(`${this.path}/${t}`)}getSmartData(t){return this.http.get(`${this.path}/${t}/smart`)}scrub(t,o){return this.http.post(`${this.path}/${t}/scrub?deep=${o}`,null)}getDeploymentOptions(){return this.http.get(`${this.uiPath}/deployment_options`)}getFlags(){return this.http.get(`${this.path}/flags`)}updateFlags(t){return this.http.put(`${this.path}/flags`,{flags:t})}updateIndividualFlags(t,o){return this.http.put(`${this.path}/flags/individual`,{flags:t,ids:o})}markOut(t){return this.http.put(`${this.path}/${t}/mark`,{action:"out"})}markIn(t){return this.http.put(`${this.path}/${t}/mark`,{action:"in"})}markDown(t){return this.http.put(`${this.path}/${t}/mark`,{action:"down"})}reweight(t,o){return this.http.post(`${this.path}/${t}/reweight`,{weight:o})}update(t,o){return this.http.put(`${this.path}/${t}`,{device_class:o})}markLost(t){return this.http.put(`${this.path}/${t}/mark`,{action:"lost"})}purge(t){return this.http.post(`${this.path}/${t}/purge`,null)}destroy(t){return this.http.post(`${this.path}/${t}/destroy`,null)}delete(t,o,i){return this.http.delete(`${this.path}/${t}`,{observe:"response",params:{preserve_id:o?"true":"false",force:i?"true":"false"}})}safeToDestroy(t){return this.http.get(`${this.path}/safe_to_destroy?ids=${t}`)}safeToDelete(t){return this.http.get(`${this.path}/safe_to_delete?svc_ids=${t}`)}getDevices(t){return this.http.get(`${this.path}/${t}/devices`).pipe((0,u.map)(o=>o.map(i=>this.deviceService.prepareDevice(i))))}static{this.\u0275fac=function(o){return new(o||n)(e.\u0275\u0275inject(h.HttpClient),e.\u0275\u0275inject(hd.g))}}static{this.\u0275prov=e.\u0275\u0275defineInjectable({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();var Do=s(48856),pa=s(53075);class qa{constructor(){this.reset(),this.formatterService=new hn.k,this.deviceSelectionAttrs={"sys_api.vendor":{name:"vendor"},"sys_api.model":{name:"model"},device_id:{name:"device_id"},human_readable_type:{name:"rotational",formatter:c=>"hdd"===c.toLowerCase()},"sys_api.size":{name:"size",formatter:c=>this.formatterService.format_number(c,1024,["B","KB","MB","GB","TB","PB"]).replace(" ","")}}}reset(){this.spec={service_type:"osd",service_id:`dashboard-${E().now()}`}}setName(c){this.spec.service_id=c}setHostPattern(c){this.spec.host_pattern=c}setDeviceSelection(c,t){const o=`${c}_devices`;this.spec[o]={},t.forEach(i=>{const r=this.deviceSelectionAttrs[i.prop];r&&(this.spec[o][r.name]=r.formatter?r.formatter(i.value.raw):i.value.raw)})}clearDeviceSelection(c){delete this.spec[`${c}_devices`]}setSlots(c,t){const o=`${c}_slots`;0===t?delete this.spec[o]:this.spec[o]=t}setFeature(c,t){t?this.spec[c]=!0:delete this.spec[c]}}var vd=s(33117),Md=s(80893),yo=s(28886),tn=s(98996),$t=function(n){return n.HOST_LIST="get_hosts",n.HOST_ADD="add_host",n.HOST_REMOVE="remove_host",n.HOST_LABEL_ADD="add_host_label",n.HOST_LABEL_REMOVE="remove_host_label",n.HOST_MAINTENANCE_ENTER="enter_host_maintenance",n.HOST_MAINTENANCE_EXIT="exit_host_maintenance",n.HOST_FACTS="get_facts",n.HOST_DRAIN="drain_host",n.SERVICE_LIST="describe_service",n.SERVICE_CREATE="apply",n.SERVICE_EDIT="apply",n.SERVICE_DELETE="remove_service",n.SERVICE_RELOAD="service_action",n.DAEMON_LIST="list_daemons",n.OSD_GET_REMOVE_STATUS="remove_osds_status",n.OSD_CREATE="apply_drivegroups",n.OSD_DELETE="remove_osds",n.DEVICE_LIST="get_inventory",n.DEVICE_BLINK_LIGHT="blink_device_light",n}($t||{}),po=s(39113),qt=s(77867);let Rd=(()=>{class n{transform(t){if(E().isUndefined(t))return $localize`no spec`;if(E().get(t,"unmanaged",!1))return $localize`unmanaged`;const o=[],i=E().get(t,"placement.hosts"),r=E().get(t,"placement.count"),p=E().get(t,"placement.label"),F=E().get(t,"placement.host_pattern");return E().isArray(i)&&o.push(...i),E().isNumber(r)&&o.push($localize`count:${r}`),E().isString(p)&&o.push($localize`label:${p}`),E().isString(F)&&o.push(F),o.join(";")}static{this.\u0275fac=function(o){return new(o||n)}}static{this.\u0275pipe=e.\u0275\u0275definePipe({name:"placement",type:n,pure:!0})}}return n})();var es=s(46459),ma=s(19830),ts=s(20961),ns=s(3140),nn=s(24192),xt=s(69081);function Od(n,c){1&n&&(e.\u0275\u0275elementStart(0,"span",25),e.\u0275\u0275i18n(1,5),e.\u0275\u0275elementEnd())}function Pd(n,c){1&n&&(e.\u0275\u0275elementStart(0,"span",25),e.\u0275\u0275i18n(1,6),e.\u0275\u0275elementEnd())}function bd(n,c){1&n&&(e.\u0275\u0275elementStart(0,"span",25),e.\u0275\u0275i18n(1,7),e.\u0275\u0275elementEnd())}let Nd=(()=>{class n{constructor(t,o,i,r,p,F,D,x){this.activeModal=t,this.actionLabels=o,this.rgwMultisiteService=i,this.rgwZoneService=r,this.notificationService=p,this.rgwZonegroupService=F,this.rgwRealmService=D,this.modalService=x,this.sub=new K.Subscription,this.submitAction=new e.EventEmitter,this.createForm()}createForm(){this.createMultisiteEntitiesForm=new Se.$({realmName:new T.FormControl(null,{validators:[T.Validators.required]}),zonegroupName:new T.FormControl(null,{validators:[T.Validators.required]}),zoneName:new T.FormControl(null,{validators:[T.Validators.required]})})}submit(){const t=this.createMultisiteEntitiesForm.value;this.realm=new nn.SX,this.realm.name=t.realmName,this.zonegroup=new nn.Oe,this.zonegroup.name=t.zonegroupName,this.zonegroup.endpoints="",this.zone=new nn.$H,this.zone.name=t.zoneName,this.zone.endpoints="",this.zone.system_key=new nn.B5,this.zone.system_key.access_key="",this.zone.system_key.secret_key="",this.rgwRealmService.create(this.realm,!0).toPromise().then(()=>{this.rgwZonegroupService.create(this.realm,this.zonegroup,!0,!0).toPromise().then(()=>{this.rgwZoneService.create(this.zone,this.zonegroup,!0,!0,this.zone.endpoints).toPromise().then(()=>{this.notificationService.show(Le._.success,$localize`Realm/Zonegroup/Zone created successfully`),this.submitAction.emit(),this.activeModal.close()}).catch(()=>{this.notificationService.show(Le._.error,$localize`Realm/Zonegroup/Zone creation failed`)})})})}static{this.\u0275fac=function(o){return new(o||n)(e.\u0275\u0275directiveInject(V.NgbActiveModal),e.\u0275\u0275directiveInject(f.Ss),e.\u0275\u0275directiveInject(es.A),e.\u0275\u0275directiveInject(ts.w),e.\u0275\u0275directiveInject(Y.J),e.\u0275\u0275directiveInject(ns.Z),e.\u0275\u0275directiveInject(ma.$),e.\u0275\u0275directiveInject(qt.B))}}static{this.\u0275cmp=e.\u0275\u0275defineComponent({type:n,selectors:[["cd-create-rgw-service-entities"]],outputs:{submitAction:"submitAction"},decls:29,vars:6,consts:()=>{let t,o,i,r,p,F,D;return t=$localize`:form title␟12bc43471dd62dce35cdb2199fd886695d8c1d66␟4813719353395511341:Create Realm/Zone Group/Zone `,o=$localize`:␟1b5ae35d753824820b370dc45362aeabbd0ec18d␟2317799298267426958:Realm Name`,i=$localize`:␟4e441008994226032fc08dc6aa5295451e317e22␟9179322500224757581:Zone Group Name`,r=$localize`:␟9908ce895693044630b8188ac54903ccdde33f2f␟2331642177230896856:Zone Name`,p=$localize`:␟7cbdabcece469fab89cfa687ab152bca18b97498␟1417693714872528491:This field is required.`,F=$localize`:␟7cbdabcece469fab89cfa687ab152bca18b97498␟1417693714872528491:This field is required.`,D=$localize`:␟7cbdabcece469fab89cfa687ab152bca18b97498␟1417693714872528491:This field is required.`,[["formDir","ngForm"],t,o,i,r,p,F,D,[3,"modalRef"],[1,"modal-title"],[1,"modal-content"],["name","createMultisiteEntitiesForm","novalidate","",3,"formGroup"],[1,"modal-body"],["type","info","spacingClass","mb-3"],[1,"form-group","row"],["for","realmName",1,"cd-col-form-label","required"],[1,"cd-col-form-input"],["type","text","placeholder","Realm name...","id","realmName","name","realmName","formControlName","realmName",1,"form-control"],["class","invalid-feedback",4,"ngIf"],["for","zonegroupName",1,"cd-col-form-label","required"],["type","text","placeholder","Zone group name...","id","zonegroupName","name","zonegroupName","formControlName","zonegroupName",1,"form-control"],["for","zoneName",1,"cd-col-form-label","required"],["type","text","placeholder","Zone name...","id","zoneName","name","zoneName","formControlName","zoneName",1,"form-control"],[1,"modal-footer"],[3,"submitActionEvent","form"],[1,"invalid-feedback"]]},template:function(o,i){if(1&o){const r=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"cd-modal",8),e.\u0275\u0275elementContainerStart(1,9),e.\u0275\u0275i18n(2,1),e.\u0275\u0275elementContainerEnd(),e.\u0275\u0275elementContainerStart(3,10),e.\u0275\u0275elementStart(4,"form",11,0)(6,"div",12)(7,"cd-alert-panel",13),e.\u0275\u0275text(8,"The realm/zone group/zone created will be set as default and master. "),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(9,"div",14)(10,"label",15),e.\u0275\u0275i18n(11,2),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(12,"div",16),e.\u0275\u0275element(13,"input",17),e.\u0275\u0275template(14,Od,2,0,"span",18),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(15,"div",14)(16,"label",19),e.\u0275\u0275i18n(17,3),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(18,"div",16),e.\u0275\u0275element(19,"input",20),e.\u0275\u0275template(20,Pd,2,0,"span",18),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(21,"div",14)(22,"label",21),e.\u0275\u0275i18n(23,4),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(24,"div",16),e.\u0275\u0275element(25,"input",22),e.\u0275\u0275template(26,bd,2,0,"span",18),e.\u0275\u0275elementEnd()()(),e.\u0275\u0275elementStart(27,"div",23)(28,"cd-form-button-panel",24),e.\u0275\u0275listener("submitActionEvent",function(){return e.\u0275\u0275restoreView(r),e.\u0275\u0275resetView(i.submit())}),e.\u0275\u0275elementEnd()()(),e.\u0275\u0275elementContainerEnd(),e.\u0275\u0275elementEnd()}if(2&o){const r=e.\u0275\u0275reference(5);e.\u0275\u0275property("modalRef",i.activeModal),e.\u0275\u0275advance(4),e.\u0275\u0275property("formGroup",i.createMultisiteEntitiesForm),e.\u0275\u0275advance(10),e.\u0275\u0275property("ngIf",i.createMultisiteEntitiesForm.showError("realmName",r,"required")),e.\u0275\u0275advance(6),e.\u0275\u0275property("ngIf",i.createMultisiteEntitiesForm.showError("zonegroupName",r,"required")),e.\u0275\u0275advance(6),e.\u0275\u0275property("ngIf",i.createMultisiteEntitiesForm.showError("zoneName",r,"required")),e.\u0275\u0275advance(2),e.\u0275\u0275property("form",i.createMultisiteEntitiesForm)}},dependencies:[l.NgIf,xt.z,it.m,Q.e,De.S,Me.a,xe.C,ze.E,T.\u0275NgNoValidate,T.DefaultValueAccessor,T.NgControlStatus,T.NgControlStatusGroup,T.FormGroupDirective,T.FormControlName]})}}return n})();var os=s(59870),Id=s(75180),fa=s(66668),Ad=s(31345),At=s(43808),Ea=s(15643),Dd=s(48693),Lo=s(12302);const Hi=()=>["mgmt-gateway"],yd=()=>["rgw","iscsi","ingress","oauth2-proxy","mgmt-gateway"],Vi=()=>["ingress"],no=n=>({required:n}),is=()=>["mds","rgw","nfs","iscsi","nvmeof","smb","ingress"],as=()=>["iscsi"],Ld=()=>["V2c","V3"],$d=()=>["SHA","MD5"],xd=()=>["DES","AES"],Ud=()=>["rgw","ingress"];function wd(n,c){if(1&n){const t=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"cd-alert-panel",204),e.\u0275\u0275i18nStart(1,6),e.\u0275\u0275elementStart(2,"a",205),e.\u0275\u0275listener("click",function(){e.\u0275\u0275restoreView(t);const i=e.\u0275\u0275nextContext();return e.\u0275\u0275resetView(i.createMultisiteSetup())}),e.\u0275\u0275elementEnd(),e.\u0275\u0275i18nEnd(),e.\u0275\u0275elementEnd()}}function Gd(n,c){1&n&&(e.\u0275\u0275elementStart(0,"cd-alert-panel",204),e.\u0275\u0275i18n(1,7),e.\u0275\u0275elementEnd())}function Hd(n,c){if(1&n&&(e.\u0275\u0275elementStart(0,"cd-alert-panel",204),e.\u0275\u0275i18n(1,8),e.\u0275\u0275elementEnd()),2&n){const t=e.\u0275\u0275nextContext();e.\u0275\u0275advance(),e.\u0275\u0275i18nExp(t.currentURL)(t.port)(t.currentURL)(t.port),e.\u0275\u0275i18nApply(1)}}function Vd(n,c){1&n&&(e.\u0275\u0275elementStart(0,"cd-alert-panel",206),e.\u0275\u0275i18nStart(1,9),e.\u0275\u0275element(2,"a",207),e.\u0275\u0275i18nEnd(),e.\u0275\u0275elementEnd())}function Bd(n,c){if(1&n&&(e.\u0275\u0275elementStart(0,"option",208),e.\u0275\u0275text(1),e.\u0275\u0275elementEnd()),2&n){const t=c.$implicit;e.\u0275\u0275property("value",t),e.\u0275\u0275advance(),e.\u0275\u0275textInterpolate1(" ",t," ")}}function zd(n,c){1&n&&(e.\u0275\u0275elementStart(0,"span",209),e.\u0275\u0275i18n(1,10),e.\u0275\u0275elementEnd())}function Xd(n,c){1&n&&(e.\u0275\u0275elementStart(0,"option",192),e.\u0275\u0275i18n(1,12),e.\u0275\u0275elementEnd()),2&n&&e.\u0275\u0275property("ngValue",null)}function kd(n,c){1&n&&(e.\u0275\u0275elementStart(0,"option",192),e.\u0275\u0275i18n(1,13),e.\u0275\u0275elementEnd()),2&n&&e.\u0275\u0275property("ngValue",null)}function jd(n,c){1&n&&(e.\u0275\u0275elementStart(0,"option",192),e.\u0275\u0275i18n(1,14),e.\u0275\u0275elementEnd()),2&n&&e.\u0275\u0275property("ngValue",null)}function Wd(n,c){if(1&n&&(e.\u0275\u0275elementStart(0,"option",208),e.\u0275\u0275text(1),e.\u0275\u0275elementEnd()),2&n){const t=c.$implicit;e.\u0275\u0275property("value",t.service_name),e.\u0275\u0275advance(),e.\u0275\u0275textInterpolate(t.service_name)}}function Kd(n,c){1&n&&(e.\u0275\u0275elementStart(0,"span",209),e.\u0275\u0275i18n(1,15),e.\u0275\u0275elementEnd())}function Qd(n,c){if(1&n){const t=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"div",188)(1,"label",210),e.\u0275\u0275i18n(2,11),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(3,"div",190)(4,"select",211),e.\u0275\u0275listener("change",function(){e.\u0275\u0275restoreView(t);const i=e.\u0275\u0275nextContext();return e.\u0275\u0275resetView(i.prePopulateId())}),e.\u0275\u0275template(5,Xd,2,1,"option",212)(6,kd,2,1,"option",212)(7,jd,2,1,"option",212)(8,Wd,2,2,"option",193),e.\u0275\u0275elementEnd(),e.\u0275\u0275template(9,Kd,2,0,"span",194),e.\u0275\u0275elementEnd()()}if(2&n){const t=e.\u0275\u0275nextContext(),o=e.\u0275\u0275reference(7);e.\u0275\u0275advance(),e.\u0275\u0275property("ngClass",e.\u0275\u0275pureFunction1(7,no,e.\u0275\u0275pureFunction0(6,Vi).includes(t.serviceForm.controls.service_type.value))),e.\u0275\u0275advance(4),e.\u0275\u0275property("ngIf",null===t.services),e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf",null!==t.services&&0===t.services.length),e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf",null!==t.services&&t.services.length>0),e.\u0275\u0275advance(),e.\u0275\u0275property("ngForOf",t.services),e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf",t.serviceForm.showError("backend_service",o,"required"))}}function Yd(n,c){1&n&&(e.\u0275\u0275elementStart(0,"option",192),e.\u0275\u0275i18n(1,18),e.\u0275\u0275elementEnd()),2&n&&e.\u0275\u0275property("ngValue",null)}function Jd(n,c){1&n&&(e.\u0275\u0275elementStart(0,"option",192),e.\u0275\u0275i18n(1,19),e.\u0275\u0275elementEnd()),2&n&&e.\u0275\u0275property("ngValue",null)}function Zd(n,c){1&n&&(e.\u0275\u0275elementStart(0,"option",192),e.\u0275\u0275i18n(1,20),e.\u0275\u0275elementEnd()),2&n&&e.\u0275\u0275property("ngValue",null)}function qd(n,c){if(1&n&&(e.\u0275\u0275elementStart(0,"option",208),e.\u0275\u0275text(1),e.\u0275\u0275elementEnd()),2&n){const t=c.$implicit;e.\u0275\u0275property("value",t.pool_name),e.\u0275\u0275advance(),e.\u0275\u0275textInterpolate(t.pool_name)}}function eu(n,c){1&n&&(e.\u0275\u0275elementStart(0,"span",209),e.\u0275\u0275i18n(1,21),e.\u0275\u0275elementEnd())}function tu(n,c){if(1&n){const t=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"div",188)(1,"label",213),e.\u0275\u0275i18n(2,16),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(3,"div",190)(4,"select",214),e.\u0275\u0275listener("change",function(){e.\u0275\u0275restoreView(t);const i=e.\u0275\u0275nextContext();return e.\u0275\u0275resetView(i.setNvmeServiceId())}),e.\u0275\u0275template(5,Yd,2,1,"option",212)(6,Jd,2,1,"option",212)(7,Zd,2,1,"option",212)(8,qd,2,2,"option",193),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(9,"cd-help-text"),e.\u0275\u0275i18n(10,17),e.\u0275\u0275elementEnd(),e.\u0275\u0275template(11,eu,2,0,"span",194),e.\u0275\u0275elementEnd()()}if(2&n){const t=e.\u0275\u0275nextContext(),o=e.\u0275\u0275reference(7);e.\u0275\u0275advance(5),e.\u0275\u0275property("ngIf",null===t.rbdPools),e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf",t.rbdPools&&0===t.rbdPools.length),e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf",t.rbdPools&&t.rbdPools.length>0),e.\u0275\u0275advance(),e.\u0275\u0275property("ngForOf",t.rbdPools),e.\u0275\u0275advance(3),e.\u0275\u0275property("ngIf",t.serviceForm.showError("pool",o,"required"))}}function nu(n,c){1&n&&(e.\u0275\u0275elementStart(0,"span",209),e.\u0275\u0275i18n(1,24),e.\u0275\u0275elementEnd())}function ou(n,c){if(1&n){const t=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"div",188)(1,"label",215)(2,"span"),e.\u0275\u0275i18n(3,22),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(4,"div",190)(5,"div",216)(6,"input",217),e.\u0275\u0275listener("change",function(){e.\u0275\u0275restoreView(t);const i=e.\u0275\u0275nextContext();return e.\u0275\u0275resetView(i.setNvmeServiceId())}),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(7,"cd-help-text"),e.\u0275\u0275i18n(8,23),e.\u0275\u0275elementEnd(),e.\u0275\u0275template(9,nu,2,0,"span",194),e.\u0275\u0275elementEnd()()}if(2&n){const t=e.\u0275\u0275nextContext(),o=e.\u0275\u0275reference(7);e.\u0275\u0275advance(9),e.\u0275\u0275property("ngIf",t.serviceForm.showError("service_id",o,"required"))}}function iu(n,c){if(1&n&&(e.\u0275\u0275elementStart(0,"span",221),e.\u0275\u0275i18n(1,26),e.\u0275\u0275elementEnd()),2&n){const t=e.\u0275\u0275nextContext(2);e.\u0275\u0275advance(),e.\u0275\u0275i18nExp(t.serviceForm.controls.service_type.value),e.\u0275\u0275i18nApply(1)}}function au(n,c){1&n&&(e.\u0275\u0275elementStart(0,"span",209),e.\u0275\u0275i18n(1,27),e.\u0275\u0275elementEnd())}function su(n,c){1&n&&(e.\u0275\u0275elementStart(0,"span",209),e.\u0275\u0275i18n(1,28),e.\u0275\u0275elementEnd())}function ru(n,c){1&n&&(e.\u0275\u0275elementStart(0,"span",209),e.\u0275\u0275i18n(1,29),e.\u0275\u0275elementEnd())}function lu(n,c){if(1&n&&(e.\u0275\u0275elementStart(0,"div",188)(1,"label",218)(2,"span"),e.\u0275\u0275i18n(3,25),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(4,"div",190)(5,"div",216),e.\u0275\u0275template(6,iu,2,1,"span",219),e.\u0275\u0275element(7,"input",220),e.\u0275\u0275elementEnd(),e.\u0275\u0275template(8,au,2,0,"span",194)(9,su,2,0,"span",194)(10,ru,2,0,"span",194),e.\u0275\u0275elementEnd()()),2&n){const t=e.\u0275\u0275nextContext(),o=e.\u0275\u0275reference(7);e.\u0275\u0275advance(),e.\u0275\u0275property("ngClass",e.\u0275\u0275pureFunction1(6,no,e.\u0275\u0275pureFunction0(5,is).includes(t.serviceForm.controls.service_type.value))),e.\u0275\u0275advance(5),e.\u0275\u0275property("ngIf",t.serviceForm.controls.service_type.value&&e.\u0275\u0275pureFunction0(8,is).includes(t.serviceForm.controls.service_type.value)),e.\u0275\u0275advance(2),e.\u0275\u0275property("ngIf",t.serviceForm.showError("service_id",o,"required")),e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf",t.serviceForm.showError("service_id",o,"uniqueName")),e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf",t.serviceForm.showError("service_id",o,"mdsPattern"))}}function _u(n,c){1&n&&(e.\u0275\u0275elementStart(0,"option",225),e.\u0275\u0275i18n(1,31),e.\u0275\u0275elementEnd())}function cu(n,c){if(1&n&&(e.\u0275\u0275elementStart(0,"option",208),e.\u0275\u0275text(1),e.\u0275\u0275elementEnd()),2&n){const t=c.$implicit;e.\u0275\u0275property("value",t.name),e.\u0275\u0275advance(),e.\u0275\u0275textInterpolate1(" ",t.name," ")}}function du(n,c){if(1&n&&(e.\u0275\u0275elementStart(0,"div",188)(1,"label",222),e.\u0275\u0275i18n(2,30),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(3,"div",190)(4,"select",223),e.\u0275\u0275template(5,_u,2,0,"option",224)(6,cu,2,2,"option",193),e.\u0275\u0275elementEnd()()()),2&n){const t=e.\u0275\u0275nextContext();e.\u0275\u0275advance(4),e.\u0275\u0275attribute("disabled",!(0!==t.realmList.length&&!t.editing)||null),e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf",0===t.realmList.length),e.\u0275\u0275advance(),e.\u0275\u0275property("ngForOf",t.realmList)}}function uu(n,c){if(1&n&&(e.\u0275\u0275elementStart(0,"option",208),e.\u0275\u0275text(1),e.\u0275\u0275elementEnd()),2&n){const t=c.$implicit;e.\u0275\u0275property("value",t.name),e.\u0275\u0275advance(),e.\u0275\u0275textInterpolate1(" ",t.name," ")}}function pu(n,c){if(1&n&&(e.\u0275\u0275elementStart(0,"div",188)(1,"label",226),e.\u0275\u0275i18n(2,32),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(3,"div",190)(4,"select",227),e.\u0275\u0275template(5,uu,2,2,"option",193),e.\u0275\u0275elementEnd()()()),2&n){const t=e.\u0275\u0275nextContext();e.\u0275\u0275advance(4),e.\u0275\u0275attribute("disabled",!(0!==t.zonegroupList.length&&!t.editing)||null),e.\u0275\u0275advance(),e.\u0275\u0275property("ngForOf",t.zonegroupList)}}function mu(n,c){if(1&n&&(e.\u0275\u0275elementStart(0,"option",208),e.\u0275\u0275text(1),e.\u0275\u0275elementEnd()),2&n){const t=c.$implicit;e.\u0275\u0275property("value",t.name),e.\u0275\u0275advance(),e.\u0275\u0275textInterpolate1(" ",t.name," ")}}function fu(n,c){if(1&n&&(e.\u0275\u0275elementStart(0,"div",188)(1,"label",228),e.\u0275\u0275i18n(2,33),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(3,"div",190)(4,"select",229),e.\u0275\u0275template(5,mu,2,2,"option",193),e.\u0275\u0275elementEnd()()()),2&n){const t=e.\u0275\u0275nextContext();e.\u0275\u0275advance(4),e.\u0275\u0275attribute("disabled",!(0!==t.zoneList.length&&!t.editing)||null),e.\u0275\u0275advance(),e.\u0275\u0275property("ngForOf",t.zoneList)}}function Eu(n,c){if(1&n){const t=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"div",188)(1,"label",230),e.\u0275\u0275i18n(2,34),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(3,"div",190)(4,"select",231),e.\u0275\u0275listener("change",function(i){e.\u0275\u0275restoreView(t);const r=e.\u0275\u0275nextContext();return e.\u0275\u0275resetView(r.onPlacementChange(i.target.value))}),e.\u0275\u0275elementStart(5,"option",232),e.\u0275\u0275i18n(6,35),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(7,"option",233),e.\u0275\u0275i18n(8,36),e.\u0275\u0275elementEnd()()()()}}function gu(n,c){1&n&&(e.\u0275\u0275elementStart(0,"span",209),e.\u0275\u0275i18n(1,38),e.\u0275\u0275elementEnd())}function Cu(n,c){if(1&n){const t=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"div",188)(1,"label",234),e.\u0275\u0275i18n(2,37),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(3,"div",190)(4,"input",235),e.\u0275\u0275listener("focus",function(i){e.\u0275\u0275restoreView(t);const r=e.\u0275\u0275nextContext();return e.\u0275\u0275resetView(r.labelFocus.next(i.target.value))})("click",function(i){e.\u0275\u0275restoreView(t);const r=e.\u0275\u0275nextContext();return e.\u0275\u0275resetView(r.labelClick.next(i.target.value))}),e.\u0275\u0275elementEnd(),e.\u0275\u0275template(5,gu,2,0,"span",194),e.\u0275\u0275elementEnd()()}if(2&n){const t=e.\u0275\u0275nextContext(),o=e.\u0275\u0275reference(7);e.\u0275\u0275advance(4),e.\u0275\u0275property("ngbTypeahead",t.searchLabels),e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf",t.serviceForm.showError("label",o,"required"))}}function Su(n,c){if(1&n&&(e.\u0275\u0275elementStart(0,"div",188)(1,"label",236),e.\u0275\u0275i18n(2,39),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(3,"div",190),e.\u0275\u0275element(4,"cd-select-badges",237),e.\u0275\u0275elementEnd()()),2&n){const t=e.\u0275\u0275nextContext();e.\u0275\u0275advance(4),e.\u0275\u0275property("data",t.serviceForm.controls.hosts.value)("options",t.hosts.options)("messages",t.hosts.messages)}}function hu(n,c){1&n&&(e.\u0275\u0275elementStart(0,"span",209),e.\u0275\u0275i18n(1,42),e.\u0275\u0275elementEnd())}function Tu(n,c){1&n&&(e.\u0275\u0275elementStart(0,"span",209),e.\u0275\u0275i18n(1,43),e.\u0275\u0275elementEnd())}function Fu(n,c){if(1&n&&(e.\u0275\u0275elementStart(0,"div",188)(1,"label",238)(2,"span"),e.\u0275\u0275i18n(3,40),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(4,"div",190),e.\u0275\u0275element(5,"input",239),e.\u0275\u0275elementStart(6,"cd-help-text"),e.\u0275\u0275i18n(7,41),e.\u0275\u0275elementEnd(),e.\u0275\u0275template(8,hu,2,0,"span",194)(9,Tu,2,0,"span",194),e.\u0275\u0275elementEnd()()),2&n){const t=e.\u0275\u0275nextContext(),o=e.\u0275\u0275reference(7);e.\u0275\u0275advance(8),e.\u0275\u0275property("ngIf",t.serviceForm.showError("count",o,"min")),e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf",t.serviceForm.showError("count",o,"pattern"))}}function vu(n,c){1&n&&(e.\u0275\u0275elementStart(0,"span",209),e.\u0275\u0275i18n(1,45),e.\u0275\u0275elementEnd())}function Mu(n,c){1&n&&(e.\u0275\u0275elementStart(0,"span",209),e.\u0275\u0275i18n(1,46),e.\u0275\u0275elementEnd())}function Ru(n,c){1&n&&(e.\u0275\u0275elementStart(0,"span",209),e.\u0275\u0275i18n(1,47),e.\u0275\u0275elementEnd())}function Ou(n,c){if(1&n&&(e.\u0275\u0275elementContainerStart(0),e.\u0275\u0275elementStart(1,"div",188)(2,"label",240),e.\u0275\u0275i18n(3,44),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(4,"div",190),e.\u0275\u0275element(5,"input",241),e.\u0275\u0275template(6,vu,2,0,"span",194)(7,Mu,2,0,"span",194)(8,Ru,2,0,"span",194),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementContainerEnd()),2&n){const t=e.\u0275\u0275nextContext(),o=e.\u0275\u0275reference(7);e.\u0275\u0275advance(6),e.\u0275\u0275property("ngIf",t.serviceForm.showError("rgw_frontend_port",o,"pattern")),e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf",t.serviceForm.showError("rgw_frontend_port",o,"min")),e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf",t.serviceForm.showError("rgw_frontend_port",o,"max"))}}function Pu(n,c){1&n&&(e.\u0275\u0275elementStart(0,"option",192),e.\u0275\u0275i18n(1,49),e.\u0275\u0275elementEnd()),2&n&&e.\u0275\u0275property("ngValue",null)}function bu(n,c){1&n&&(e.\u0275\u0275elementStart(0,"option",192),e.\u0275\u0275i18n(1,50),e.\u0275\u0275elementEnd()),2&n&&e.\u0275\u0275property("ngValue",null)}function Nu(n,c){1&n&&(e.\u0275\u0275elementStart(0,"option",192),e.\u0275\u0275i18n(1,51),e.\u0275\u0275elementEnd()),2&n&&e.\u0275\u0275property("ngValue",null)}function Iu(n,c){if(1&n&&(e.\u0275\u0275elementStart(0,"option",208),e.\u0275\u0275text(1),e.\u0275\u0275elementEnd()),2&n){const t=c.$implicit;e.\u0275\u0275property("value",t.pool_name),e.\u0275\u0275advance(),e.\u0275\u0275textInterpolate(t.pool_name)}}function Au(n,c){1&n&&(e.\u0275\u0275elementStart(0,"span",209),e.\u0275\u0275i18n(1,52),e.\u0275\u0275elementEnd())}function Du(n,c){if(1&n&&(e.\u0275\u0275elementStart(0,"div",188)(1,"label",213),e.\u0275\u0275i18n(2,48),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(3,"div",190)(4,"select",242),e.\u0275\u0275template(5,Pu,2,1,"option",212)(6,bu,2,1,"option",212)(7,Nu,2,1,"option",212)(8,Iu,2,2,"option",193),e.\u0275\u0275elementEnd(),e.\u0275\u0275template(9,Au,2,0,"span",194),e.\u0275\u0275elementEnd()()),2&n){const t=e.\u0275\u0275nextContext(),o=e.\u0275\u0275reference(7);e.\u0275\u0275advance(5),e.\u0275\u0275property("ngIf",null===t.pools),e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf",t.pools&&0===t.pools.length),e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf",t.pools&&t.pools.length>0),e.\u0275\u0275advance(),e.\u0275\u0275property("ngForOf",t.pools),e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf",t.serviceForm.showError("pool",o,"required"))}}function yu(n,c){1&n&&(e.\u0275\u0275elementStart(0,"span",209),e.\u0275\u0275i18n(1,59),e.\u0275\u0275elementEnd())}function Lu(n,c){1&n&&(e.\u0275\u0275elementStart(0,"span",209),e.\u0275\u0275i18n(1,60),e.\u0275\u0275elementEnd())}function $u(n,c){1&n&&(e.\u0275\u0275elementStart(0,"span",209),e.\u0275\u0275i18n(1,61),e.\u0275\u0275elementEnd())}function xu(n,c){1&n&&(e.\u0275\u0275elementStart(0,"span",209),e.\u0275\u0275i18n(1,62),e.\u0275\u0275elementEnd())}function Uu(n,c){1&n&&(e.\u0275\u0275elementStart(0,"span",209),e.\u0275\u0275i18n(1,63),e.\u0275\u0275elementEnd())}function wu(n,c){if(1&n&&(e.\u0275\u0275elementContainerStart(0),e.\u0275\u0275elementStart(1,"div",188)(2,"label",243)(3,"span"),e.\u0275\u0275i18n(4,53),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(5,"cd-helper")(6,"span"),e.\u0275\u0275i18n(7,54),e.\u0275\u0275elementEnd(),e.\u0275\u0275element(8,"br"),e.\u0275\u0275elementStart(9,"span"),e.\u0275\u0275i18nStart(10,55),e.\u0275\u0275element(11,"b"),e.\u0275\u0275i18nEnd(),e.\u0275\u0275elementEnd()()(),e.\u0275\u0275elementStart(12,"div",190),e.\u0275\u0275element(13,"input",244),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(14,"div",188)(15,"label",245),e.\u0275\u0275i18n(16,56),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(17,"div",190),e.\u0275\u0275element(18,"input",246),e.\u0275\u0275template(19,yu,2,0,"span",194)(20,Lu,2,0,"span",194)(21,$u,2,0,"span",194),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(22,"div",188)(23,"label",247),e.\u0275\u0275i18n(24,57),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(25,"div",190),e.\u0275\u0275element(26,"input",248),e.\u0275\u0275template(27,xu,2,0,"span",194),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(28,"div",188)(29,"label",249),e.\u0275\u0275i18n(30,58),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(31,"div",190)(32,"div",216),e.\u0275\u0275element(33,"input",250)(34,"button",251)(35,"cd-copy-2-clipboard-button",252),e.\u0275\u0275template(36,Uu,2,0,"span",194),e.\u0275\u0275elementEnd()()(),e.\u0275\u0275elementContainerEnd()),2&n){const t=e.\u0275\u0275nextContext(),o=e.\u0275\u0275reference(7);e.\u0275\u0275advance(19),e.\u0275\u0275property("ngIf",t.serviceForm.showError("api_port",o,"pattern")),e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf",t.serviceForm.showError("api_port",o,"min")),e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf",t.serviceForm.showError("api_port",o,"max")),e.\u0275\u0275advance(2),e.\u0275\u0275property("ngClass",e.\u0275\u0275pureFunction1(8,no,e.\u0275\u0275pureFunction0(7,as).includes(t.serviceForm.controls.service_type.value))),e.\u0275\u0275advance(4),e.\u0275\u0275property("ngIf",t.serviceForm.showError("api_user",o,"required")),e.\u0275\u0275advance(2),e.\u0275\u0275property("ngClass",e.\u0275\u0275pureFunction1(11,no,e.\u0275\u0275pureFunction0(10,as).includes(t.serviceForm.controls.service_type.value))),e.\u0275\u0275advance(7),e.\u0275\u0275property("ngIf",t.serviceForm.showError("api_password",o,"required"))}}function Gu(n,c){1&n&&(e.\u0275\u0275elementStart(0,"span",209),e.\u0275\u0275i18n(1,76),e.\u0275\u0275elementEnd())}function Hu(n,c){1&n&&(e.\u0275\u0275elementStart(0,"span",209),e.\u0275\u0275i18n(1,77),e.\u0275\u0275elementEnd())}function Vu(n,c){1&n&&(e.\u0275\u0275elementStart(0,"span",209),e.\u0275\u0275i18n(1,78),e.\u0275\u0275elementEnd())}function Bu(n,c){if(1&n&&(e.\u0275\u0275elementStart(0,"div",197),e.\u0275\u0275element(1,"input",268),e.\u0275\u0275elementStart(2,"label",269),e.\u0275\u0275i18n(3,79),e.\u0275\u0275elementEnd()()),2&n){const t=c.$implicit;e.\u0275\u0275advance(),e.\u0275\u0275propertyInterpolate("name",t),e.\u0275\u0275propertyInterpolate("id",t),e.\u0275\u0275propertyInterpolate("formControlName",t),e.\u0275\u0275advance(),e.\u0275\u0275propertyInterpolate("for",t),e.\u0275\u0275advance(),e.\u0275\u0275i18nExp(t),e.\u0275\u0275i18nApply(3)}}function zu(n,c){if(1&n&&(e.\u0275\u0275elementContainerStart(0),e.\u0275\u0275elementStart(1,"div",188)(2,"label",253),e.\u0275\u0275i18nStart(3,64),e.\u0275\u0275elementStart(4,"cd-helper"),e.\u0275\u0275element(5,"span"),e.\u0275\u0275elementEnd(),e.\u0275\u0275i18nEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(6,"div",190),e.\u0275\u0275element(7,"input",254),e.\u0275\u0275template(8,Gu,2,0,"span",194),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(9,"div",188)(10,"label",255)(11,"span"),e.\u0275\u0275i18n(12,65),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(13,"cd-helper"),e.\u0275\u0275i18n(14,66),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(15,"div",190),e.\u0275\u0275element(16,"input",256),e.\u0275\u0275template(17,Hu,2,0,"span",194)(18,Vu,2,0,"span",194),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(19,"div",257)(20,"label",258),e.\u0275\u0275i18nStart(21,67),e.\u0275\u0275elementStart(22,"cd-helper"),e.\u0275\u0275element(23,"span"),e.\u0275\u0275elementEnd(),e.\u0275\u0275i18nEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(24,"div",190),e.\u0275\u0275template(25,Bu,4,5,"div",259),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(26,"div",188)(27,"label",260)(28,"span"),e.\u0275\u0275i18n(29,68),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(30,"cd-helper"),e.\u0275\u0275i18nStart(31,69),e.\u0275\u0275element(32,"span")(33,"br")(34,"span"),e.\u0275\u0275i18nEnd(),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(35,"div",190),e.\u0275\u0275element(36,"input",261),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(37,"div",188)(38,"label",262)(39,"span"),e.\u0275\u0275i18n(40,70),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(41,"cd-helper"),e.\u0275\u0275i18nStart(42,71),e.\u0275\u0275element(43,"span")(44,"br")(45,"span"),e.\u0275\u0275i18nEnd(),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(46,"div",190),e.\u0275\u0275element(47,"input",263),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(48,"div",188)(49,"label",264)(50,"span"),e.\u0275\u0275i18n(51,72),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(52,"cd-helper"),e.\u0275\u0275i18nStart(53,73),e.\u0275\u0275element(54,"span")(55,"br")(56,"span"),e.\u0275\u0275i18nEnd(),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(57,"div",190),e.\u0275\u0275element(58,"input",265),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(59,"div",188)(60,"label",266)(61,"span"),e.\u0275\u0275i18n(62,74),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(63,"cd-helper"),e.\u0275\u0275i18nStart(64,75),e.\u0275\u0275element(65,"span")(66,"br")(67,"span"),e.\u0275\u0275i18nEnd(),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(68,"div",190),e.\u0275\u0275element(69,"input",267),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementContainerEnd()),2&n){const t=e.\u0275\u0275nextContext(),o=e.\u0275\u0275reference(7);e.\u0275\u0275advance(8),e.\u0275\u0275property("ngIf",t.serviceForm.showError("cluster_id",o,"required")),e.\u0275\u0275advance(9),e.\u0275\u0275property("ngIf",t.serviceForm.showError("config_uri",o,"required")),e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf",t.serviceForm.showError("config_uri",o,"configUriPattern")),e.\u0275\u0275advance(7),e.\u0275\u0275property("ngForOf",t.smbFeaturesList)}}function Xu(n,c){1&n&&(e.\u0275\u0275elementStart(0,"span",209),e.\u0275\u0275i18n(1,86),e.\u0275\u0275elementEnd())}function ku(n,c){1&n&&(e.\u0275\u0275elementStart(0,"span",209),e.\u0275\u0275i18n(1,87),e.\u0275\u0275elementEnd())}function ju(n,c){1&n&&(e.\u0275\u0275elementStart(0,"span",209),e.\u0275\u0275i18n(1,88),e.\u0275\u0275elementEnd())}function Wu(n,c){1&n&&(e.\u0275\u0275elementStart(0,"span",209),e.\u0275\u0275i18n(1,89),e.\u0275\u0275elementEnd())}function Ku(n,c){1&n&&(e.\u0275\u0275elementStart(0,"span",209),e.\u0275\u0275i18n(1,90),e.\u0275\u0275elementEnd())}function Qu(n,c){1&n&&(e.\u0275\u0275elementStart(0,"span",209),e.\u0275\u0275i18n(1,91),e.\u0275\u0275elementEnd())}function Yu(n,c){1&n&&(e.\u0275\u0275elementStart(0,"span",209),e.\u0275\u0275i18n(1,92),e.\u0275\u0275elementEnd())}function Ju(n,c){1&n&&(e.\u0275\u0275elementStart(0,"span",209),e.\u0275\u0275i18n(1,93),e.\u0275\u0275elementEnd())}function Zu(n,c){1&n&&(e.\u0275\u0275elementStart(0,"span",209),e.\u0275\u0275i18n(1,94),e.\u0275\u0275elementEnd())}function qu(n,c){1&n&&(e.\u0275\u0275elementStart(0,"div",188)(1,"label",276)(2,"span"),e.\u0275\u0275i18n(3,95),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(4,"cd-helper")(5,"span"),e.\u0275\u0275i18n(6,96),e.\u0275\u0275elementEnd()()(),e.\u0275\u0275elementStart(7,"div",190),e.\u0275\u0275element(8,"input",277),e.\u0275\u0275elementEnd()())}function ep(n,c){if(1&n&&(e.\u0275\u0275elementContainerStart(0),e.\u0275\u0275elementStart(1,"div",188)(2,"label",270)(3,"span"),e.\u0275\u0275i18n(4,80),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(5,"cd-helper")(6,"span"),e.\u0275\u0275i18n(7,81),e.\u0275\u0275elementEnd()()(),e.\u0275\u0275elementStart(8,"div",190),e.\u0275\u0275element(9,"input",271),e.\u0275\u0275template(10,Xu,2,0,"span",194),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(11,"div",188)(12,"label",272)(13,"span"),e.\u0275\u0275i18n(14,82),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(15,"cd-helper")(16,"span"),e.\u0275\u0275i18n(17,83),e.\u0275\u0275elementEnd()()(),e.\u0275\u0275elementStart(18,"div",190),e.\u0275\u0275element(19,"input",273),e.\u0275\u0275template(20,ku,2,0,"span",194)(21,ju,2,0,"span",194)(22,Wu,2,0,"span",194)(23,Ku,2,0,"span",194),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(24,"div",188)(25,"label",274)(26,"span"),e.\u0275\u0275i18n(27,84),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(28,"cd-helper")(29,"span"),e.\u0275\u0275i18n(30,85),e.\u0275\u0275elementEnd()()(),e.\u0275\u0275elementStart(31,"div",190),e.\u0275\u0275element(32,"input",275),e.\u0275\u0275template(33,Qu,2,0,"span",194)(34,Yu,2,0,"span",194)(35,Ju,2,0,"span",194)(36,Zu,2,0,"span",194),e.\u0275\u0275elementEnd()(),e.\u0275\u0275template(37,qu,9,0,"div",195),e.\u0275\u0275elementContainerEnd()),2&n){const t=e.\u0275\u0275nextContext(),o=e.\u0275\u0275reference(7);e.\u0275\u0275advance(2),e.\u0275\u0275property("ngClass",e.\u0275\u0275pureFunction1(14,no,e.\u0275\u0275pureFunction0(13,Vi).includes(t.serviceForm.controls.service_type.value))),e.\u0275\u0275advance(8),e.\u0275\u0275property("ngIf",t.serviceForm.showError("virtual_ip",o,"required")),e.\u0275\u0275advance(2),e.\u0275\u0275property("ngClass",e.\u0275\u0275pureFunction1(17,no,e.\u0275\u0275pureFunction0(16,Vi).includes(t.serviceForm.controls.service_type.value))),e.\u0275\u0275advance(8),e.\u0275\u0275property("ngIf",t.serviceForm.showError("frontend_port",o,"pattern")),e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf",t.serviceForm.showError("frontend_port",o,"min")),e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf",t.serviceForm.showError("frontend_port",o,"max")),e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf",t.serviceForm.showError("frontend_port",o,"required")),e.\u0275\u0275advance(2),e.\u0275\u0275property("ngClass",e.\u0275\u0275pureFunction1(20,no,e.\u0275\u0275pureFunction0(19,Vi).includes(t.serviceForm.controls.service_type.value))),e.\u0275\u0275advance(8),e.\u0275\u0275property("ngIf",t.serviceForm.showError("monitor_port",o,"pattern")),e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf",t.serviceForm.showError("monitor_port",o,"min")),e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf",t.serviceForm.showError("monitor_port",o,"max")),e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf",t.serviceForm.showError("monitor_port",o,"required")),e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf",!t.serviceForm.controls.unmanaged.value)}}function tp(n,c){if(1&n&&(e.\u0275\u0275elementStart(0,"option",208),e.\u0275\u0275text(1),e.\u0275\u0275elementEnd()),2&n){const t=c.$implicit;e.\u0275\u0275property("value",t),e.\u0275\u0275advance(),e.\u0275\u0275textInterpolate(t)}}function np(n,c){1&n&&(e.\u0275\u0275elementStart(0,"span",209),e.\u0275\u0275i18n(1,102),e.\u0275\u0275elementEnd())}function op(n,c){1&n&&(e.\u0275\u0275elementStart(0,"span",209),e.\u0275\u0275i18n(1,103),e.\u0275\u0275elementEnd())}function ip(n,c){1&n&&(e.\u0275\u0275elementStart(0,"span",209),e.\u0275\u0275i18nStart(1,104),e.\u0275\u0275element(2,"strong"),e.\u0275\u0275i18nEnd(),e.\u0275\u0275elementEnd())}function ap(n,c){1&n&&(e.\u0275\u0275elementStart(0,"span",209),e.\u0275\u0275i18n(1,107),e.\u0275\u0275elementEnd())}function sp(n,c){1&n&&(e.\u0275\u0275elementStart(0,"span",209),e.\u0275\u0275i18nStart(1,108),e.\u0275\u0275element(2,"strong"),e.\u0275\u0275i18nEnd(),e.\u0275\u0275elementEnd())}function rp(n,c){if(1&n&&(e.\u0275\u0275elementStart(0,"div",188)(1,"label",282)(2,"span"),e.\u0275\u0275i18n(3,105),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(4,"cd-helper")(5,"span"),e.\u0275\u0275i18n(6,106),e.\u0275\u0275elementEnd()()(),e.\u0275\u0275elementStart(7,"div",190),e.\u0275\u0275element(8,"input",283),e.\u0275\u0275template(9,ap,2,0,"span",194)(10,sp,3,0,"span",194),e.\u0275\u0275elementEnd()()),2&n){const t=e.\u0275\u0275nextContext(2),o=e.\u0275\u0275reference(7);e.\u0275\u0275advance(9),e.\u0275\u0275property("ngIf",t.serviceForm.showError("engine_id",o,"required")),e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf",t.serviceForm.showError("engine_id",o,"snmpEngineIdPattern"))}}function lp(n,c){if(1&n&&(e.\u0275\u0275elementStart(0,"option",208),e.\u0275\u0275text(1),e.\u0275\u0275elementEnd()),2&n){const t=c.$implicit;e.\u0275\u0275property("value",t),e.\u0275\u0275advance(),e.\u0275\u0275textInterpolate1(" ",t," ")}}function _p(n,c){1&n&&(e.\u0275\u0275elementStart(0,"span",209),e.\u0275\u0275i18n(1,111),e.\u0275\u0275elementEnd())}function cp(n,c){if(1&n&&(e.\u0275\u0275elementStart(0,"div",188)(1,"label",284),e.\u0275\u0275i18n(2,109),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(3,"div",190)(4,"select",285)(5,"option",192),e.\u0275\u0275i18n(6,110),e.\u0275\u0275elementEnd(),e.\u0275\u0275template(7,lp,2,2,"option",193),e.\u0275\u0275elementEnd(),e.\u0275\u0275template(8,_p,2,0,"span",194),e.\u0275\u0275elementEnd()()),2&n){const t=e.\u0275\u0275nextContext(2),o=e.\u0275\u0275reference(7);e.\u0275\u0275advance(5),e.\u0275\u0275property("ngValue",null),e.\u0275\u0275advance(2),e.\u0275\u0275property("ngForOf",e.\u0275\u0275pureFunction0(3,$d)),e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf",t.serviceForm.showError("auth_protocol",o,"required"))}}function dp(n,c){if(1&n&&(e.\u0275\u0275elementStart(0,"option",208),e.\u0275\u0275text(1),e.\u0275\u0275elementEnd()),2&n){const t=c.$implicit;e.\u0275\u0275property("value",t),e.\u0275\u0275advance(),e.\u0275\u0275textInterpolate1(" ",t," ")}}function up(n,c){1&n&&(e.\u0275\u0275elementStart(0,"div",188)(1,"label",286),e.\u0275\u0275i18n(2,112),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(3,"div",190)(4,"select",287)(5,"option",192),e.\u0275\u0275i18n(6,113),e.\u0275\u0275elementEnd(),e.\u0275\u0275template(7,dp,2,2,"option",193),e.\u0275\u0275elementEnd()()()),2&n&&(e.\u0275\u0275advance(5),e.\u0275\u0275property("ngValue",null),e.\u0275\u0275advance(2),e.\u0275\u0275property("ngForOf",e.\u0275\u0275pureFunction0(2,xd)))}function pp(n,c){1&n&&(e.\u0275\u0275elementStart(0,"span",209),e.\u0275\u0275i18n(1,115),e.\u0275\u0275elementEnd())}function mp(n,c){if(1&n&&(e.\u0275\u0275elementStart(0,"div",188)(1,"label",288)(2,"span"),e.\u0275\u0275i18n(3,114),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(4,"div",190),e.\u0275\u0275element(5,"input",289),e.\u0275\u0275template(6,pp,2,0,"span",194),e.\u0275\u0275elementEnd()()),2&n){const t=e.\u0275\u0275nextContext(2),o=e.\u0275\u0275reference(7);e.\u0275\u0275advance(6),e.\u0275\u0275property("ngIf",t.serviceForm.showError("snmp_community",o,"required"))}}function fp(n,c){1&n&&(e.\u0275\u0275elementStart(0,"span",209),e.\u0275\u0275i18n(1,117),e.\u0275\u0275elementEnd())}function Ep(n,c){if(1&n&&(e.\u0275\u0275elementStart(0,"div",188)(1,"label",290)(2,"span"),e.\u0275\u0275i18n(3,116),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(4,"div",190),e.\u0275\u0275element(5,"input",291),e.\u0275\u0275template(6,fp,2,0,"span",194),e.\u0275\u0275elementEnd()()),2&n){const t=e.\u0275\u0275nextContext(2),o=e.\u0275\u0275reference(7);e.\u0275\u0275advance(6),e.\u0275\u0275property("ngIf",t.serviceForm.showError("snmp_v3_auth_username",o,"required"))}}function gp(n,c){1&n&&(e.\u0275\u0275elementStart(0,"span",209),e.\u0275\u0275i18n(1,119),e.\u0275\u0275elementEnd())}function Cp(n,c){if(1&n&&(e.\u0275\u0275elementStart(0,"div",188)(1,"label",292)(2,"span"),e.\u0275\u0275i18n(3,118),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(4,"div",190),e.\u0275\u0275element(5,"input",293),e.\u0275\u0275template(6,gp,2,0,"span",194),e.\u0275\u0275elementEnd()()),2&n){const t=e.\u0275\u0275nextContext(2),o=e.\u0275\u0275reference(7);e.\u0275\u0275advance(6),e.\u0275\u0275property("ngIf",t.serviceForm.showError("snmp_v3_auth_password",o,"required"))}}function Sp(n,c){1&n&&(e.\u0275\u0275elementStart(0,"span",209),e.\u0275\u0275i18n(1,121),e.\u0275\u0275elementEnd())}function hp(n,c){if(1&n&&(e.\u0275\u0275elementStart(0,"div",188)(1,"label",294)(2,"span"),e.\u0275\u0275i18n(3,120),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(4,"div",190),e.\u0275\u0275element(5,"input",295),e.\u0275\u0275template(6,Sp,2,0,"span",194),e.\u0275\u0275elementEnd()()),2&n){const t=e.\u0275\u0275nextContext(2),o=e.\u0275\u0275reference(7);e.\u0275\u0275advance(6),e.\u0275\u0275property("ngIf",t.serviceForm.showError("snmp_v3_priv_password",o,"required"))}}function Tp(n,c){if(1&n){const t=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementContainerStart(0),e.\u0275\u0275elementStart(1,"div",188)(2,"label",278),e.\u0275\u0275i18n(3,97),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(4,"div",190)(5,"select",279),e.\u0275\u0275listener("change",function(){e.\u0275\u0275restoreView(t);const i=e.\u0275\u0275nextContext();return e.\u0275\u0275resetView(i.clearValidations())}),e.\u0275\u0275elementStart(6,"option",192),e.\u0275\u0275i18n(7,98),e.\u0275\u0275elementEnd(),e.\u0275\u0275template(8,tp,2,2,"option",193),e.\u0275\u0275elementEnd(),e.\u0275\u0275template(9,np,2,0,"span",194),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(10,"div",188)(11,"label",280)(12,"span"),e.\u0275\u0275i18n(13,99),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(14,"cd-helper")(15,"span"),e.\u0275\u0275i18n(16,100),e.\u0275\u0275elementEnd()()(),e.\u0275\u0275elementStart(17,"div",190),e.\u0275\u0275element(18,"input",281),e.\u0275\u0275template(19,op,2,0,"span",194)(20,ip,3,0,"span",194),e.\u0275\u0275elementEnd()(),e.\u0275\u0275template(21,rp,11,2,"div",195)(22,cp,9,4,"div",195)(23,up,8,3,"div",195),e.\u0275\u0275elementStart(24,"fieldset")(25,"legend"),e.\u0275\u0275i18n(26,101),e.\u0275\u0275elementEnd(),e.\u0275\u0275template(27,mp,7,1,"div",195)(28,Ep,7,1,"div",195)(29,Cp,7,1,"div",195)(30,hp,7,1,"div",195),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementContainerEnd()}if(2&n){const t=e.\u0275\u0275nextContext(),o=e.\u0275\u0275reference(7);e.\u0275\u0275advance(6),e.\u0275\u0275property("ngValue",null),e.\u0275\u0275advance(2),e.\u0275\u0275property("ngForOf",e.\u0275\u0275pureFunction0(12,Ld)),e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf",t.serviceForm.showError("snmp_version",o,"required")),e.\u0275\u0275advance(10),e.\u0275\u0275property("ngIf",t.serviceForm.showError("snmp_destination",o,"required")),e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf",t.serviceForm.showError("snmp_destination",o,"snmpDestinationPattern")),e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf","V3"===t.serviceForm.controls.snmp_version.value),e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf","V3"===t.serviceForm.controls.snmp_version.value),e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf","V3"===t.serviceForm.controls.snmp_version.value),e.\u0275\u0275advance(4),e.\u0275\u0275property("ngIf","V2c"===t.serviceForm.controls.snmp_version.value),e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf","V3"===t.serviceForm.controls.snmp_version.value),e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf","V3"===t.serviceForm.controls.snmp_version.value),e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf","V3"===t.serviceForm.controls.snmp_version.value&&null!=t.serviceForm.controls.privacy_protocol.value)}}function Fp(n,c){1&n&&(e.\u0275\u0275elementStart(0,"span",209),e.\u0275\u0275i18n(1,136),e.\u0275\u0275elementEnd())}function vp(n,c){1&n&&(e.\u0275\u0275elementStart(0,"span",209),e.\u0275\u0275i18n(1,137),e.\u0275\u0275elementEnd())}function Mp(n,c){1&n&&(e.\u0275\u0275elementStart(0,"span",209),e.\u0275\u0275i18n(1,138),e.\u0275\u0275elementEnd())}function Rp(n,c){1&n&&(e.\u0275\u0275elementStart(0,"span",209),e.\u0275\u0275i18n(1,139),e.\u0275\u0275elementEnd())}function Op(n,c){1&n&&(e.\u0275\u0275elementStart(0,"span",209),e.\u0275\u0275i18n(1,140),e.\u0275\u0275elementEnd())}function Pp(n,c){1&n&&(e.\u0275\u0275elementStart(0,"span",209),e.\u0275\u0275i18n(1,141),e.\u0275\u0275elementEnd())}function bp(n,c){if(1&n&&(e.\u0275\u0275elementContainerStart(0),e.\u0275\u0275elementStart(1,"div",188)(2,"label",296)(3,"span"),e.\u0275\u0275i18n(4,122),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(5,"div",190),e.\u0275\u0275element(6,"input",297),e.\u0275\u0275elementStart(7,"cd-help-text"),e.\u0275\u0275i18n(8,123),e.\u0275\u0275elementEnd(),e.\u0275\u0275template(9,Fp,2,0,"span",194),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(10,"div",188)(11,"label",298)(12,"span"),e.\u0275\u0275i18n(13,124),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(14,"div",190),e.\u0275\u0275element(15,"input",299),e.\u0275\u0275elementStart(16,"cd-help-text"),e.\u0275\u0275i18n(17,125),e.\u0275\u0275elementEnd(),e.\u0275\u0275template(18,vp,2,0,"span",194),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(19,"div",188)(20,"label",300)(21,"span"),e.\u0275\u0275i18n(22,126),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(23,"div",190)(24,"div",216),e.\u0275\u0275element(25,"input",301),e.\u0275\u0275elementStart(26,"span",302),e.\u0275\u0275element(27,"button",303)(28,"cd-copy-2-clipboard-button",304),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(29,"cd-help-text"),e.\u0275\u0275i18n(30,127),e.\u0275\u0275elementEnd(),e.\u0275\u0275template(31,Mp,2,0,"span",194),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(32,"div",188)(33,"label",305)(34,"span"),e.\u0275\u0275i18n(35,128),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(36,"div",190),e.\u0275\u0275element(37,"input",306),e.\u0275\u0275elementStart(38,"cd-help-text"),e.\u0275\u0275i18n(39,129),e.\u0275\u0275elementEnd(),e.\u0275\u0275template(40,Rp,2,0,"span",194)(41,Op,2,0,"span",194),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(42,"div",188)(43,"label",307)(44,"span"),e.\u0275\u0275i18n(45,130),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(46,"div",190),e.\u0275\u0275element(47,"input",308),e.\u0275\u0275elementStart(48,"cd-help-text"),e.\u0275\u0275i18n(49,131),e.\u0275\u0275elementEnd(),e.\u0275\u0275template(50,Pp,2,0,"span",194),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(51,"div",188)(52,"label",309)(53,"span"),e.\u0275\u0275i18n(54,132),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(55,"div",190),e.\u0275\u0275element(56,"input",310),e.\u0275\u0275elementStart(57,"cd-help-text"),e.\u0275\u0275i18n(58,133),e.\u0275\u0275elementEnd()()(),e.\u0275\u0275elementStart(59,"div",188)(60,"label",311)(61,"span"),e.\u0275\u0275i18n(62,134),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(63,"div",190),e.\u0275\u0275element(64,"input",312),e.\u0275\u0275elementStart(65,"cd-help-text"),e.\u0275\u0275i18n(66,135),e.\u0275\u0275elementEnd()()(),e.\u0275\u0275elementContainerEnd()),2&n){const t=e.\u0275\u0275nextContext(),o=e.\u0275\u0275reference(7);e.\u0275\u0275advance(9),e.\u0275\u0275property("ngIf",t.serviceForm.showError("provider_display_name",o,"required")),e.\u0275\u0275advance(9),e.\u0275\u0275property("ngIf",t.serviceForm.showError("client_id",o,"required")),e.\u0275\u0275advance(13),e.\u0275\u0275property("ngIf",t.serviceForm.showError("client_secret",o,"required")),e.\u0275\u0275advance(9),e.\u0275\u0275property("ngIf",t.serviceForm.showError("oidc_issuer_url",o,"required")),e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf",t.serviceForm.showError("oidc_issuer_url",o,"validUrl")),e.\u0275\u0275advance(9),e.\u0275\u0275property("ngIf",t.serviceForm.showError("https_address",o,"invalidAddress"))}}function Np(n,c){1&n&&(e.\u0275\u0275elementStart(0,"span",209),e.\u0275\u0275i18n(1,148),e.\u0275\u0275elementEnd())}function Ip(n,c){1&n&&(e.\u0275\u0275elementStart(0,"span",209),e.\u0275\u0275i18n(1,149),e.\u0275\u0275elementEnd())}function Ap(n,c){1&n&&(e.\u0275\u0275elementStart(0,"span",209),e.\u0275\u0275i18n(1,150),e.\u0275\u0275elementEnd())}function Dp(n,c){1&n&&(e.\u0275\u0275elementStart(0,"span",209),e.\u0275\u0275i18n(1,151),e.\u0275\u0275elementEnd())}function yp(n,c){if(1&n&&(e.\u0275\u0275elementContainerStart(0),e.\u0275\u0275elementStart(1,"div",188)(2,"label",313),e.\u0275\u0275i18n(3,142),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(4,"div",190),e.\u0275\u0275element(5,"input",314),e.\u0275\u0275template(6,Np,2,0,"span",194)(7,Ip,2,0,"span",194)(8,Ap,2,0,"span",194),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(9,"div",315)(10,"fieldset")(11,"label",316),e.\u0275\u0275i18n(12,143),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(13,"cds-checkbox",317),e.\u0275\u0275text(14," Enable "),e.\u0275\u0275elementStart(15,"cd-help-text"),e.\u0275\u0275i18n(16,144),e.\u0275\u0275elementEnd()()()(),e.\u0275\u0275elementStart(17,"div",315)(18,"cds-combo-box",318),e.\u0275\u0275i18nStart(19,145),e.\u0275\u0275element(20,"cds-dropdown-list"),e.\u0275\u0275i18nEnd(),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(21,"div",188)(22,"label",319)(23,"span"),e.\u0275\u0275i18n(24,146),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(25,"div",190)(26,"div",216),e.\u0275\u0275element(27,"input",320),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(28,"cd-help-text"),e.\u0275\u0275i18nStart(29,147),e.\u0275\u0275element(30,"a",321),e.\u0275\u0275i18nEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275template(31,Dp,2,0,"span",194),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementContainerEnd()),2&n){const t=e.\u0275\u0275nextContext(),o=e.\u0275\u0275reference(7);e.\u0275\u0275advance(6),e.\u0275\u0275property("ngIf",t.serviceForm.showError("port",o,"pattern")),e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf",t.serviceForm.showError("port",o,"min")),e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf",t.serviceForm.showError("port",o,"max")),e.\u0275\u0275advance(10),e.\u0275\u0275property("appendInline",!0)("items",t.sslProtocolsItems),e.\u0275\u0275advance(13),e.\u0275\u0275property("ngIf",t.serviceForm.showError("ssl_ciphers",o,"invalidPattern"))}}function Lp(n,c){1&n&&(e.\u0275\u0275elementContainerStart(0),e.\u0275\u0275elementStart(1,"div",188)(2,"div",196)(3,"div",197),e.\u0275\u0275element(4,"input",322),e.\u0275\u0275elementStart(5,"label",323),e.\u0275\u0275i18n(6,152),e.\u0275\u0275elementEnd()()()(),e.\u0275\u0275elementContainerEnd())}function $p(n,c){1&n&&(e.\u0275\u0275elementStart(0,"span",209),e.\u0275\u0275i18n(1,155),e.\u0275\u0275elementEnd())}function xp(n,c){1&n&&(e.\u0275\u0275elementStart(0,"span",209),e.\u0275\u0275i18n(1,156),e.\u0275\u0275elementEnd())}function Up(n,c){if(1&n){const t=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"div",188)(1,"label",324)(2,"span"),e.\u0275\u0275i18n(3,153),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(4,"cd-helper"),e.\u0275\u0275i18n(5,154),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(6,"div",190)(7,"textarea",325),e.\u0275\u0275text(8,"              "),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(9,"input",326),e.\u0275\u0275listener("change",function(i){e.\u0275\u0275restoreView(t);const r=e.\u0275\u0275nextContext(2);return e.\u0275\u0275resetView(r.fileUpload(i.target.files,"ssl_cert"))}),e.\u0275\u0275elementEnd(),e.\u0275\u0275template(10,$p,2,0,"span",194)(11,xp,2,0,"span",194),e.\u0275\u0275elementEnd()()}if(2&n){const t=e.\u0275\u0275nextContext(2),o=e.\u0275\u0275reference(7);e.\u0275\u0275advance(10),e.\u0275\u0275property("ngIf",t.serviceForm.showError("ssl_cert",o,"required")),e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf",t.serviceForm.showError("ssl_cert",o,"pattern"))}}function wp(n,c){1&n&&(e.\u0275\u0275elementStart(0,"span",209),e.\u0275\u0275i18n(1,159),e.\u0275\u0275elementEnd())}function Gp(n,c){1&n&&(e.\u0275\u0275elementStart(0,"span",209),e.\u0275\u0275i18n(1,160),e.\u0275\u0275elementEnd())}function Hp(n,c){if(1&n){const t=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"div",188)(1,"label",327)(2,"span"),e.\u0275\u0275i18n(3,157),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(4,"cd-helper"),e.\u0275\u0275i18n(5,158),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(6,"div",190)(7,"textarea",328),e.\u0275\u0275text(8,"              "),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(9,"input",326),e.\u0275\u0275listener("change",function(i){e.\u0275\u0275restoreView(t);const r=e.\u0275\u0275nextContext(2);return e.\u0275\u0275resetView(r.fileUpload(i.target.files,"ssl_key"))}),e.\u0275\u0275elementEnd(),e.\u0275\u0275template(10,wp,2,0,"span",194)(11,Gp,2,0,"span",194),e.\u0275\u0275elementEnd()()}if(2&n){const t=e.\u0275\u0275nextContext(2),o=e.\u0275\u0275reference(7);e.\u0275\u0275advance(10),e.\u0275\u0275property("ngIf",t.serviceForm.showError("ssl_key",o,"required")),e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf",t.serviceForm.showError("ssl_key",o,"pattern"))}}function Vp(n,c){if(1&n&&(e.\u0275\u0275elementContainerStart(0),e.\u0275\u0275template(1,Lp,7,0,"ng-container",200)(2,Up,12,2,"div",195)(3,Hp,12,2,"div",195),e.\u0275\u0275elementContainerEnd()),2&n){const t=e.\u0275\u0275nextContext();e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf",!e.\u0275\u0275pureFunction0(3,Hi).includes(t.serviceForm.controls.service_type.value)),e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf",t.serviceForm.controls.ssl.value||e.\u0275\u0275pureFunction0(4,Hi).includes(t.serviceForm.controls.service_type.value)),e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf",t.serviceForm.controls.ssl.value&&!e.\u0275\u0275pureFunction0(5,Ud).includes(t.serviceForm.controls.service_type.value)||e.\u0275\u0275pureFunction0(6,Hi).includes(t.serviceForm.controls.service_type.value))}}function Bp(n,c){1&n&&(e.\u0275\u0275elementStart(0,"span",209),e.\u0275\u0275i18n(1,164),e.\u0275\u0275elementEnd())}function zp(n,c){1&n&&(e.\u0275\u0275elementStart(0,"span",209),e.\u0275\u0275i18n(1,165),e.\u0275\u0275elementEnd())}function Xp(n,c){1&n&&(e.\u0275\u0275elementStart(0,"span",209),e.\u0275\u0275i18n(1,166),e.\u0275\u0275elementEnd())}function kp(n,c){1&n&&(e.\u0275\u0275elementStart(0,"span",209),e.\u0275\u0275i18n(1,167),e.\u0275\u0275elementEnd())}function jp(n,c){if(1&n&&(e.\u0275\u0275elementContainerStart(0),e.\u0275\u0275elementStart(1,"div",188)(2,"label",329)(3,"span"),e.\u0275\u0275i18n(4,161),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(5,"cd-helper")(6,"span"),e.\u0275\u0275i18n(7,162),e.\u0275\u0275elementEnd()()(),e.\u0275\u0275elementStart(8,"div",190),e.\u0275\u0275element(9,"input",330),e.\u0275\u0275template(10,Bp,2,0,"span",194)(11,zp,2,0,"span",194)(12,Xp,2,0,"span",194)(13,kp,2,0,"span",194),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(14,"div",188)(15,"label",331),e.\u0275\u0275i18nStart(16,163),e.\u0275\u0275element(17,"span")(18,"cd-helper"),e.\u0275\u0275i18nEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(19,"div",190)(20,"div",216),e.\u0275\u0275element(21,"input",332),e.\u0275\u0275elementStart(22,"span",302),e.\u0275\u0275element(23,"button",333)(24,"cd-copy-2-clipboard-button",334),e.\u0275\u0275elementEnd()()()(),e.\u0275\u0275elementContainerEnd()),2&n){const t=e.\u0275\u0275nextContext(),o=e.\u0275\u0275reference(7);e.\u0275\u0275advance(10),e.\u0275\u0275property("ngIf",t.serviceForm.showError("grafana_port",o,"pattern")),e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf",t.serviceForm.showError("grafana_port",o,"min")),e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf",t.serviceForm.showError("grafana_port",o,"max")),e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf",t.serviceForm.showError("grafana_port",o,"required")),e.\u0275\u0275advance(8),e.\u0275\u0275attribute("disabled",!!t.editing||null)}}function Wp(n,c){1&n&&(e.\u0275\u0275elementStart(0,"cd-alert-panel",206),e.\u0275\u0275i18n(1,168),e.\u0275\u0275elementEnd())}function Kp(n,c){1&n&&(e.\u0275\u0275elementStart(0,"div",188)(1,"div",196)(2,"div",197),e.\u0275\u0275element(3,"input",335),e.\u0275\u0275elementStart(4,"label",336),e.\u0275\u0275i18n(5,169),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(6,"cd-help-text"),e.\u0275\u0275i18n(7,170),e.\u0275\u0275elementEnd()()()())}function Qp(n,c){1&n&&(e.\u0275\u0275elementStart(0,"span",209),e.\u0275\u0275i18n(1,172),e.\u0275\u0275elementEnd())}function Yp(n,c){if(1&n){const t=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"div",188)(1,"label",337)(2,"span"),e.\u0275\u0275i18n(3,171),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(4,"div",190),e.\u0275\u0275element(5,"textarea",338),e.\u0275\u0275elementStart(6,"input",326),e.\u0275\u0275listener("change",function(i){e.\u0275\u0275restoreView(t);const r=e.\u0275\u0275nextContext();return e.\u0275\u0275resetView(r.fileUpload(i.target.files,"root_ca_cert"))}),e.\u0275\u0275elementEnd(),e.\u0275\u0275template(7,Qp,2,0,"span",194),e.\u0275\u0275elementEnd()()}if(2&n){const t=e.\u0275\u0275nextContext(),o=e.\u0275\u0275reference(7);e.\u0275\u0275advance(7),e.\u0275\u0275property("ngIf",t.serviceForm.showError("root_ca_cert",o,"required"))}}function Jp(n,c){1&n&&(e.\u0275\u0275elementStart(0,"span",209),e.\u0275\u0275i18n(1,174),e.\u0275\u0275elementEnd())}function Zp(n,c){if(1&n){const t=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"div",188)(1,"label",339)(2,"span"),e.\u0275\u0275i18n(3,173),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(4,"div",190),e.\u0275\u0275element(5,"textarea",340),e.\u0275\u0275elementStart(6,"input",326),e.\u0275\u0275listener("change",function(i){e.\u0275\u0275restoreView(t);const r=e.\u0275\u0275nextContext();return e.\u0275\u0275resetView(r.fileUpload(i.target.files,"client_cert"))}),e.\u0275\u0275elementEnd(),e.\u0275\u0275template(7,Jp,2,0,"span",194),e.\u0275\u0275elementEnd()()}if(2&n){const t=e.\u0275\u0275nextContext(),o=e.\u0275\u0275reference(7);e.\u0275\u0275advance(7),e.\u0275\u0275property("ngIf",t.serviceForm.showError("client_cert",o,"required"))}}function qp(n,c){1&n&&(e.\u0275\u0275elementStart(0,"span",209),e.\u0275\u0275i18n(1,176),e.\u0275\u0275elementEnd())}function em(n,c){if(1&n){const t=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"div",188)(1,"label",341)(2,"span"),e.\u0275\u0275i18n(3,175),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(4,"div",190),e.\u0275\u0275element(5,"textarea",342),e.\u0275\u0275elementStart(6,"input",326),e.\u0275\u0275listener("change",function(i){e.\u0275\u0275restoreView(t);const r=e.\u0275\u0275nextContext();return e.\u0275\u0275resetView(r.fileUpload(i.target.files,"client_key"))}),e.\u0275\u0275elementEnd(),e.\u0275\u0275template(7,qp,2,0,"span",194),e.\u0275\u0275elementEnd()()}if(2&n){const t=e.\u0275\u0275nextContext(),o=e.\u0275\u0275reference(7);e.\u0275\u0275advance(7),e.\u0275\u0275property("ngIf",t.serviceForm.showError("client_key",o,"required"))}}function tm(n,c){1&n&&(e.\u0275\u0275elementStart(0,"span",209),e.\u0275\u0275i18n(1,178),e.\u0275\u0275elementEnd())}function nm(n,c){if(1&n){const t=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"div",188)(1,"label",343)(2,"span"),e.\u0275\u0275i18n(3,177),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(4,"div",190),e.\u0275\u0275element(5,"textarea",344),e.\u0275\u0275elementStart(6,"input",326),e.\u0275\u0275listener("change",function(i){e.\u0275\u0275restoreView(t);const r=e.\u0275\u0275nextContext();return e.\u0275\u0275resetView(r.fileUpload(i.target.files,"server_cert"))}),e.\u0275\u0275elementEnd(),e.\u0275\u0275template(7,tm,2,0,"span",194),e.\u0275\u0275elementEnd()()}if(2&n){const t=e.\u0275\u0275nextContext(),o=e.\u0275\u0275reference(7);e.\u0275\u0275advance(7),e.\u0275\u0275property("ngIf",t.serviceForm.showError("server_cert",o,"required"))}}function om(n,c){1&n&&(e.\u0275\u0275elementStart(0,"span",209),e.\u0275\u0275i18n(1,180),e.\u0275\u0275elementEnd())}function im(n,c){if(1&n){const t=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"div",188)(1,"label",345)(2,"span"),e.\u0275\u0275i18n(3,179),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(4,"div",190),e.\u0275\u0275element(5,"textarea",346),e.\u0275\u0275elementStart(6,"input",326),e.\u0275\u0275listener("change",function(i){e.\u0275\u0275restoreView(t);const r=e.\u0275\u0275nextContext();return e.\u0275\u0275resetView(r.fileUpload(i.target.files,"server_key"))}),e.\u0275\u0275elementEnd(),e.\u0275\u0275template(7,om,2,0,"span",194),e.\u0275\u0275elementEnd()()}if(2&n){const t=e.\u0275\u0275nextContext(),o=e.\u0275\u0275reference(7);e.\u0275\u0275advance(7),e.\u0275\u0275property("ngIf",t.serviceForm.showError("server_key",o,"required"))}}let Bi=(()=>{class n extends Te.g{constructor(t,o,i,r,p,F,D,x,H,X,Z,re,pe,be,Pe,he,Ue){super(),this.actionLabels=t,this.cephServiceService=o,this.formBuilder=i,this.hostService=r,this.poolService=p,this.rbdService=F,this.router=D,this.taskWrapperService=x,this.timerService=H,this.timerServiceVariable=X,this.rgwRealmService=Z,this.rgwZonegroupService=re,this.rgwZoneService=pe,this.rgwMultisiteService=be,this.route=Pe,this.activeModal=he,this.modalService=Ue,this.sub=new K.Subscription,this.MDS_SVC_ID_PATTERN=/^[a-zA-Z_.-][a-zA-Z0-9_.-]*$/,this.SNMP_DESTINATION_PATTERN=/^[^\:]+:[0-9]/,this.SNMP_ENGINE_ID_PATTERN=/^[0-9A-Fa-f]{10,64}/g,this.INGRESS_SUPPORTED_SERVICE_TYPES=["rgw","nfs"],this.SMB_CONFIG_URI_PATTERN=/^(http:|https:|rados:|rados:mon-config-key:)/,this.OAUTH2_ISSUER_URL_PATTERN=/^(https?:\/\/)?([a-zA-Z0-9-]+(\.[a-zA-Z0-9-]+)+)(:[0-9]{1,5})?(\/.*)?$/,this.SSL_CIPHERS_PATTERN=/^[a-zA-Z0-9\-:]+$/,this.DEFAULT_SSL_PROTOCOL_ITEM=[{content:"TLSv1.3",selected:!0}],this.hiddenServices=[],this.editing=!1,this.serviceTypes=[],this.serviceIds=[],this.labelClick=new K.Subject,this.labelFocus=new K.Subject,this.services=[],this.multisiteInfo=[],this.defaultRealmId="",this.defaultZonegroupId="",this.defaultZoneId="",this.realmList=[],this.zonegroupList=[],this.zoneList=[],this.showRealmCreationForm=!1,this.smbFeaturesList=["domain"],this.port=443,this.sslProtocolsItems=Object.values(f.BF).map(ve=>({content:ve,selected:!0})),this.sslCiphersItems=Object.values(f.eN).map(ve=>({content:ve,selected:!1})),this.showMgmtGatewayMessage=!1,this.searchLabels=ve=>(0,K.merge)(ve.pipe((0,u.debounceTime)(200),(0,u.distinctUntilChanged)()),this.labelFocus,this.labelClick.pipe((0,u.filter)(()=>!this.typeahead.isPopupOpen()))).pipe((0,u.map)(Xe=>this.labels.filter(_t=>_t.toLowerCase().indexOf(Xe.toLowerCase())>-1).slice(0,10))),this.resource=$localize`service`,this.hosts={options:[],messages:new fa.z({empty:$localize`There are no hosts.`,filter:$localize`Filter hosts`})},this.createForm()}createForm(){this.serviceForm=this.formBuilder.group({service_type:[null,[T.Validators.required]],service_id:[null,[ge.xQ.composeIf({service_type:"mds"},[T.Validators.required,ge.xQ.custom("mdsPattern",t=>!E().isEmpty(t)&&!this.MDS_SVC_ID_PATTERN.test(t))]),ge.xQ.requiredIf({service_type:"nfs"}),ge.xQ.requiredIf({service_type:"iscsi"}),ge.xQ.requiredIf({service_type:"nvmeof"}),ge.xQ.requiredIf({service_type:"ingress"}),ge.xQ.requiredIf({service_type:"smb"}),ge.xQ.composeIf({service_type:"rgw"},[T.Validators.required]),ge.xQ.custom("uniqueName",t=>this.serviceIds&&this.serviceIds.includes(t))]],placement:["hosts"],label:[null,[ge.xQ.requiredIf({placement:"label",unmanaged:!1})]],hosts:[[]],count:[null,[ge.xQ.number(!1)]],unmanaged:[!1],pool:[null,[ge.xQ.requiredIf({service_type:"iscsi"}),ge.xQ.requiredIf({service_type:"nvmeof"})]],group:["default",ge.xQ.requiredIf({service_type:"nvmeof"})],enable_mtls:[!1],root_ca_cert:[null,[ge.xQ.composeIf({service_type:"nvmeof",enable_mtls:!0},[T.Validators.required])]],client_cert:[null,[ge.xQ.composeIf({service_type:"nvmeof",enable_mtls:!0},[T.Validators.required])]],client_key:[null,[ge.xQ.composeIf({service_type:"nvmeof",enable_mtls:!0},[T.Validators.required])]],server_cert:[null,[ge.xQ.composeIf({service_type:"nvmeof",enable_mtls:!0},[T.Validators.required])]],server_key:[null,[ge.xQ.composeIf({service_type:"nvmeof",enable_mtls:!0},[T.Validators.required])]],rgw_frontend_port:[null,[ge.xQ.number(!1)]],realm_name:[null],zonegroup_name:[null],zone_name:[null],trusted_ip_list:[null],api_port:[null,[ge.xQ.number(!1)]],api_user:[null,[ge.xQ.requiredIf({service_type:"iscsi",unmanaged:!1})]],api_password:[null,[ge.xQ.requiredIf({service_type:"iscsi",unmanaged:!1})]],cluster_id:[null,[ge.xQ.requiredIf({service_type:"smb"})]],features:new Se.$(this.smbFeaturesList.reduce((t,o)=>(t[o]=new T.UntypedFormControl(!1),t),{})),config_uri:[null,[ge.xQ.composeIf({service_type:"smb"},[T.Validators.required,ge.xQ.custom("configUriPattern",t=>!E().isEmpty(t)&&!this.SMB_CONFIG_URI_PATTERN.test(t))])]],custom_dns:[null],join_sources:[null],user_sources:[null],include_ceph_users:[null],backend_service:[null,[ge.xQ.requiredIf({service_type:"ingress"})]],virtual_ip:[null,[ge.xQ.requiredIf({service_type:"ingress"})]],frontend_port:[null,[ge.xQ.number(!1),ge.xQ.requiredIf({service_type:"ingress"})]],monitor_port:[null,[ge.xQ.number(!1),ge.xQ.requiredIf({service_type:"ingress"})]],virtual_interface_networks:[null],ssl_protocols:[this.DEFAULT_SSL_PROTOCOL_ITEM],ssl_ciphers:[null,[ge.xQ.custom("invalidPattern",t=>!E().isEmpty(t)&&!this.SSL_CIPHERS_PATTERN.test(t))]],ssl:[!1],ssl_cert:["",[ge.xQ.composeIf({service_type:"rgw",unmanaged:!1,ssl:!0},[T.Validators.required,ge.xQ.pemCert()]),ge.xQ.composeIf({service_type:"iscsi",unmanaged:!1,ssl:!0},[T.Validators.required,ge.xQ.sslCert()]),ge.xQ.composeIf({service_type:"ingress",unmanaged:!1,ssl:!0},[T.Validators.required,ge.xQ.pemCert()]),ge.xQ.composeIf({service_type:"oauth2-proxy",unmanaged:!1,ssl:!0},[T.Validators.required,ge.xQ.sslCert()]),ge.xQ.composeIf({service_type:"mgmt-gateway",unmanaged:!1,ssl:!1},[ge.xQ.sslCert()])]],ssl_key:["",[ge.xQ.composeIf({service_type:"iscsi",unmanaged:!1,ssl:!0},[T.Validators.required,ge.xQ.sslPrivKey()]),ge.xQ.composeIf({service_type:"oauth2-proxy",unmanaged:!1,ssl:!0},[T.Validators.required,ge.xQ.sslPrivKey()]),ge.xQ.composeIf({service_type:"mgmt-gateway",unmanaged:!1,ssl:!1},[ge.xQ.sslPrivKey()])]],enable_auth:[null],port:[443,[ge.xQ.number(!1)]],snmp_version:[null,[ge.xQ.requiredIf({service_type:"snmp-gateway"})]],snmp_destination:[null,{validators:[ge.xQ.requiredIf({service_type:"snmp-gateway"}),ge.xQ.custom("snmpDestinationPattern",t=>!E().isEmpty(t)&&!this.SNMP_DESTINATION_PATTERN.test(t))]}],engine_id:[null,[ge.xQ.requiredIf({service_type:"snmp-gateway"}),ge.xQ.custom("snmpEngineIdPattern",t=>!E().isEmpty(t)&&!this.SNMP_ENGINE_ID_PATTERN.test(t))]],auth_protocol:["SHA",[ge.xQ.requiredIf({service_type:"snmp-gateway"})]],privacy_protocol:[null],snmp_community:[null,[ge.xQ.requiredIf({snmp_version:"V2c"})]],snmp_v3_auth_username:[null,[ge.xQ.requiredIf({service_type:"snmp-gateway"})]],snmp_v3_auth_password:[null,[ge.xQ.requiredIf({service_type:"snmp-gateway"})]],snmp_v3_priv_password:[null,[ge.xQ.requiredIf({privacy_protocol:{op:"!empty"}})]],grafana_port:[null,[ge.xQ.number(!1)]],grafana_admin_password:[null],provider_display_name:["My OIDC provider",[ge.xQ.requiredIf({service_type:"oauth2-proxy"})]],client_id:[null,[ge.xQ.requiredIf({service_type:"oauth2-proxy"})]],client_secret:[null,[ge.xQ.requiredIf({service_type:"oauth2-proxy"})]],oidc_issuer_url:[null,[ge.xQ.requiredIf({service_type:"oauth2-proxy"}),ge.xQ.custom("validUrl",t=>!E().isEmpty(t)&&!this.OAUTH2_ISSUER_URL_PATTERN.test(t))]],https_address:[null,[ge.xQ.oauthAddressTest()]],redirect_url:[null],allowlist_domains:[null]})}resolveRoute(){this.router.url.includes("services/(modal:create")?(this.pageURL="services",this.route.params.subscribe(t=>{t?.type&&(this.serviceType=t.type,this.serviceForm.get("service_type").setValue(this.serviceType))})):this.router.url.includes("services/(modal:edit")&&(this.editing=!0,this.pageURL="services",this.route.params.subscribe(t=>{this.serviceName=t.name,this.serviceType=t.type}))}ngOnInit(){this.action=this.actionLabels.CREATE,this.resolveRoute(),this.cephServiceService.list(new h.HttpParams({fromObject:{limit:-1,offset:0}})).observable.subscribe(t=>{this.serviceList=t,this.services=t.filter(o=>this.INGRESS_SUPPORTED_SERVICE_TYPES.includes(o.service_type))}),this.cephServiceService.getKnownTypes().subscribe(t=>{this.hiddenServices.push("osd","container"),this.serviceTypes=E().difference(t,this.hiddenServices).sort()}),this.hostService.getAllHosts().subscribe(t=>{const o=[];E().forEach(t,i=>{if(E().get(i,"sources.orchestrator",!1)){const r=new Ad.O(!1,E().get(i,"hostname"),"");o.push(r)}}),this.hosts.options=[...o]}),this.hostService.getLabels().subscribe(t=>{this.labels=t}),this.poolService.getList().subscribe(t=>{this.pools=t,this.rbdPools=this.pools.filter(this.rbdService.isRBDPool),!this.editing&&this.serviceType&&this.onServiceTypeChange(this.serviceType)}),this.editing&&(this.action=this.actionLabels.EDIT,this.disableForEditing(this.serviceType),this.cephServiceService.list(new h.HttpParams({fromObject:{limit:-1,offset:0}}),this.serviceName).observable.subscribe(t=>{if(["service_type","service_id","unmanaged"].forEach(i=>{this.serviceForm.get(i).setValue(t[0][i])}),!t[0].unmanaged){const i=Object.keys(t[0].placement)[0];let r;r=["hosts","label"].indexOf(i)>=0?i:"hosts",this.serviceForm.get("placement").setValue(r),this.serviceForm.get("count").setValue(t[0].placement.count),t[0]?.placement[r]&&this.serviceForm.get(r).setValue(t[0]?.placement[r])}switch(this.serviceType){case"iscsi":["pool","api_password","api_user","trusted_ip_list","api_port"].forEach(H=>{this.serviceForm.get(H).setValue(t[0].spec[H])}),this.serviceForm.get("ssl").setValue(t[0].spec?.api_secure),t[0].spec?.api_secure&&(this.serviceForm.get("ssl_cert").setValue(t[0].spec?.ssl_cert),this.serviceForm.get("ssl_key").setValue(t[0].spec?.ssl_key));break;case"nvmeof":this.serviceForm.get("pool").setValue(t[0].spec.pool),this.serviceForm.get("group").setValue(t[0].spec.group),this.serviceForm.get("enable_mtls").setValue(t[0].spec?.enable_auth),this.serviceForm.get("root_ca_cert").setValue(t[0].spec?.root_ca_cert),this.serviceForm.get("client_cert").setValue(t[0].spec?.client_cert),this.serviceForm.get("client_key").setValue(t[0].spec?.client_key),this.serviceForm.get("server_cert").setValue(t[0].spec?.server_cert),this.serviceForm.get("server_key").setValue(t[0].spec?.server_key);break;case"rgw":this.serviceForm.get("rgw_frontend_port").setValue(t[0].spec?.rgw_frontend_port),this.setRgwFields(t[0].spec?.rgw_realm,t[0].spec?.rgw_zonegroup,t[0].spec?.rgw_zone),this.serviceForm.get("ssl").setValue(t[0].spec?.ssl),t[0].spec?.ssl&&this.serviceForm.get("ssl_cert").setValue(t[0].spec?.rgw_frontend_ssl_certificate);break;case"ingress":["backend_service","virtual_ip","frontend_port","monitor_port","virtual_interface_networks","ssl"].forEach(H=>{this.serviceForm.get(H).setValue(t[0].spec[H])}),t[0].spec?.ssl&&(this.serviceForm.get("ssl_cert").setValue(t[0].spec?.ssl_cert),this.serviceForm.get("ssl_key").setValue(t[0].spec?.ssl_key));break;case"mgmt-gateway":let p=window.location.href.split(":");if(this.currentURL=p[0]+p[1],this.port=t[0].spec?.port,t[0].spec?.ssl_protocols){let H=[];for(const X of t[0].spec.ssl_protocols)H.push({content:X,selected:!0});this.serviceForm.get("ssl_protocols").setValue(H)}t[0].spec?.ssl_ciphers&&this.serviceForm.get("ssl_ciphers").setValue(t[0].spec?.ssl_ciphers.join(":")),t[0].spec?.ssl_cert&&this.serviceForm.get("ssl_cert").setValue(t[0].spec.ssl_cert),t[0].spec?.ssl_key&&this.serviceForm.get("ssl_key").setValue(t[0].spec.ssl_key),t[0].spec?.enable_auth&&this.serviceForm.get("enable_auth").setValue(t[0].spec.enable_auth),t[0].spec?.port&&this.serviceForm.get("port").setValue(t[0].spec.port);break;case"smb":["cluster_id","config_uri","features","join_sources","user_sources","custom_dns","include_ceph_users"].forEach(H=>{"features"===H?t[0].spec?.features&&t[0].spec.features.forEach(X=>{this.serviceForm.get(`features.${X}`).setValue(!0)}):this.serviceForm.get(H).setValue(t[0].spec[H])});break;case"snmp-gateway":["snmp_version","snmp_destination"].forEach(H=>{this.serviceForm.get(H).setValue(t[0].spec[H])}),"V3"===this.serviceForm.getValue("snmp_version")?["engine_id","auth_protocol","privacy_protocol","snmp_v3_auth_username","snmp_v3_auth_password","snmp_v3_priv_password"].forEach(X=>{null!==X&&("snmp_v3_auth_username"===X||"snmp_v3_auth_password"===X||"snmp_v3_priv_password"===X?this.serviceForm.get(X).setValue(t[0].spec.credentials[X]):this.serviceForm.get(X).setValue(t[0].spec[X]))}):this.serviceForm.get("snmp_community").setValue(t[0].spec.credentials.snmp_community);break;case"grafana":this.serviceForm.get("grafana_port").setValue(t[0].spec.port),this.serviceForm.get("grafana_admin_password").setValue(t[0].spec.initial_admin_password);break;case"oauth2-proxy":["https_address","provider_display_name","client_id","client_secret","oidc_issuer_url","redirect_url","allowlist_domains"].forEach(H=>{this.serviceForm.get(H).setValue(t[0].spec[H])}),t[0].spec?.ssl&&(this.serviceForm.get("ssl_cert").setValue(t[0].spec?.ssl_cert),this.serviceForm.get("ssl_key").setValue(t[0].spec?.ssl_key))}})),this.detectChanges()}detectChanges(){const t=this.serviceForm.get("service_type");t&&t.valueChanges.subscribe(o=>{if("mgmt-gateway"===o){const i=this.serviceForm.get("port");i&&i.valueChanges.subscribe(F=>{this.showMgmtGatewayMessage=!0});const r=this.serviceForm.get("ssl_protocols");r&&r.valueChanges.subscribe(F=>{this.showMgmtGatewayMessage=!0});const p=this.serviceForm.get("ssl_ciphers");p&&p.valueChanges.subscribe(F=>{this.showMgmtGatewayMessage=!0})}})}getDefaultsEntitiesForRgw(t,o,i){const r=this.realmList.find(X=>X.id===t),p=this.zonegroupList.find(X=>X.id===o),F=this.zoneList.find(X=>X.id===i),D=void 0!==r?r.name:null,x=void 0!==p?p.name:"default",H=void 0!==F?F.name:"default";if("default"===x&&!this.zonegroupNames.includes(x)){const X=new nn.Oe;X.name="default",this.zonegroupList.push(X)}if("default"===H&&!this.zoneNames.includes(H)){const X=new nn.$H;X.name="default",this.zoneList.push(X)}return{defaultRealmName:D,defaultZonegroupName:x,defaultZoneName:H}}getDefaultPlacementCount(t){switch(t){case"mon":this.serviceForm.get("count").setValue(5);break;case"mgr":case"mds":case"rgw":case"ingress":case"rbd-mirror":this.serviceForm.get("count").setValue(2);break;case"iscsi":case"cephfs-mirror":case"nfs":case"grafana":case"alertmanager":case"prometheus":case"loki":case"container":case"snmp-gateway":case"elastic-serach":case"jaeger-collector":case"jaeger-query":case"smb":case"oauth2-proxy":case"mgmt-gateway":this.serviceForm.get("count").setValue(1);break;default:this.serviceForm.get("count").setValue(null)}}setRgwFields(t,o,i){const r=[this.rgwRealmService.getAllRealmsInfo(),this.rgwZonegroupService.getAllZonegroupsInfo(),this.rgwZoneService.getAllZonesInfo()];this.sub=(0,K.forkJoin)(r).subscribe(p=>{if(this.multisiteInfo=p,this.realmList=void 0!==this.multisiteInfo[0]&&this.multisiteInfo[0].hasOwnProperty("realms")?this.multisiteInfo[0].realms:[],this.zonegroupList=void 0!==this.multisiteInfo[1]&&this.multisiteInfo[1].hasOwnProperty("zonegroups")?this.multisiteInfo[1].zonegroups:[],this.zoneList=void 0!==this.multisiteInfo[2]&&this.multisiteInfo[2].hasOwnProperty("zones")?this.multisiteInfo[2].zones:[],this.realmNames=this.realmList.map(F=>F.name),this.zonegroupNames=this.zonegroupList.map(F=>F.name),this.zoneNames=this.zoneList.map(F=>F.name),this.defaultRealmId=p[0].default_realm,this.defaultZonegroupId=p[1].default_zonegroup,this.defaultZoneId=p[2].default_zone,this.defaultsInfo=this.getDefaultsEntitiesForRgw(this.defaultRealmId,this.defaultZonegroupId,this.defaultZoneId),this.editing){if(t&&!this.realmNames.includes(t)){const F=new nn.SX;F.name=t,this.realmList.push(F)}if(o&&!this.zonegroupNames.includes(o)){const F=new nn.Oe;F.name=o,this.zonegroupList.push(F)}if(i&&!this.zoneNames.includes(i)){const F=new nn.$H;F.name=i,this.zoneList.push(F)}void 0===o&&void 0===i&&(o="default",i="default"),this.serviceForm.get("realm_name").setValue(t),this.serviceForm.get("zonegroup_name").setValue(o),this.serviceForm.get("zone_name").setValue(i)}else this.serviceForm.get("realm_name").setValue(this.defaultsInfo.defaultRealmName),this.serviceForm.get("zonegroup_name").setValue(this.defaultsInfo.defaultZonegroupName),this.serviceForm.get("zone_name").setValue(this.defaultsInfo.defaultZoneName);this.showRealmCreationForm=0===this.realmList.length},p=>{const F=new nn.$H;F.name="default";const D=new nn.Oe;D.name="default",this.zoneList.push(F),this.zonegroupList.push(D)})}setNvmeServiceId(){const t=this.serviceForm.get("pool").value,o=this.serviceForm.get("group").value;t&&o?this.serviceForm.get("service_id").setValue(`${t}.${o}`):t?this.serviceForm.get("service_id").setValue(t):o?this.serviceForm.get("service_id").setValue(o):this.serviceForm.get("service_id").setValue(null)}setNvmeDefaultPool(){const t=this.rbdPools?.find(o=>"rbd"===o.pool_name)?.pool_name||this.rbdPools?.[0].pool_name;this.serviceForm.get("pool").setValue(t)}requiresServiceId(t){return["mds","rgw","nfs","iscsi","nvmeof","smb","ingress"].includes(t)}setServiceId(t){const o=this.requiresServiceId(t);o&&"nvmeof"===t?(this.setNvmeDefaultPool(),this.setNvmeServiceId()):o?this.serviceForm.get("service_id").setValue(null):this.serviceForm.get("service_id").setValue(t)}onServiceTypeChange(t){if(this.setServiceId(t),this.serviceIds=this.serviceList?.filter(o=>o.service_type===t).map(o=>o.service_id),this.getDefaultPlacementCount(t),"rgw"===t&&this.setRgwFields(),"mgmt-gateway"===t){let o=window.location.href.split(":");this.currentURL=o[0]+o[1],this.serviceForm.get("count").disable()}else this.serviceForm.get("count").enable()}onPlacementChange(t){"label"===t&&this.serviceForm.get("count").setValue(null)}disableForEditing(t){switch(["service_type","service_id"].forEach(i=>{this.serviceForm.get(i).disable()}),t){case"ingress":this.serviceForm.get("backend_service").disable();break;case"nvmeof":this.serviceForm.get("pool").disable(),this.serviceForm.get("group").disable()}}fileUpload(t,o){const i=t[0],r=new FileReader;r.addEventListener("load",p=>{const F=this.serviceForm.get(o);F.setValue(p.target.result),F.markAsDirty(),F.markAsTouched(),F.updateValueAndValidity()}),r.readAsText(i,"utf8")}prePopulateId(){const t=this.serviceForm.get("service_id"),o=this.serviceForm.getValue("backend_service");t.reset({value:o,disabled:!0})}onSubmit(){const t=this,o=this.serviceForm.getRawValue(),i=o.service_type;let r=`service/${f.Qp.CREATE}`;this.editing&&(r=`service/${f.Qp.EDIT}`);const p={service_type:i,placement:{},unmanaged:o.unmanaged};"rgw"===i&&(p.rgw_realm=o.realm_name?o.realm_name:null,p.rgw_zonegroup="default"!==o.zonegroup_name?o.zonegroup_name:null,p.rgw_zone="default"!==o.zone_name?o.zone_name:null);const F=o.service_id;let D=i;switch(E().isString(F)&&!E().isEmpty(F)&&F!==i&&(D=`${i}.${F}`,p.service_id=F),i){case"ingress":p.backend_service=o.backend_service,p.service_id=o.backend_service,E().isNumber(o.frontend_port)&&o.frontend_port>0&&(p.frontend_port=o.frontend_port),E().isString(o.virtual_ip)&&!E().isEmpty(o.virtual_ip)&&(p.virtual_ip=o.virtual_ip.trim()),E().isNumber(o.monitor_port)&&o.monitor_port>0&&(p.monitor_port=o.monitor_port);break;case"nvmeof":p.pool=o.pool,p.group=o.group,p.enable_auth=o.enable_mtls,o.enable_mtls&&(p.root_ca_cert=o.root_ca_cert,p.client_cert=o.client_cert,p.client_key=o.client_key,p.server_cert=o.server_cert,p.server_key=o.server_key);break;case"iscsi":p.pool=o.pool;break;case"smb":p.cluster_id=o.cluster_id?.trim(),p.config_uri=o.config_uri?.trim();for(const x in o.features)o.features[x]&&(p.features=p.features||[]).push(x);p.custom_dns=o.custom_dns?.trim(),p.join_sources=o.join_sources?.trim(),p.user_sources=o.user_sources?.trim(),p.include_ceph_users=o.include_ceph_users?.trim();break;case"snmp-gateway":p.credentials={},p.snmp_version=o.snmp_version,p.snmp_destination=o.snmp_destination,"V3"===o.snmp_version?(p.engine_id=o.engine_id,p.auth_protocol=o.auth_protocol,p.credentials.snmp_v3_auth_username=o.snmp_v3_auth_username,p.credentials.snmp_v3_auth_password=o.snmp_v3_auth_password,null!==o.privacy_protocol&&(p.privacy_protocol=o.privacy_protocol,p.credentials.snmp_v3_priv_password=o.snmp_v3_priv_password)):p.credentials.snmp_community=o.snmp_community}if(!o.unmanaged){switch(o.placement){case"hosts":o.hosts.length>0&&(p.placement.hosts=o.hosts);break;case"label":p.placement.label=o.label}switch(E().isNumber(o.count)&&o.count>0&&(p.placement.count=o.count),i){case"rgw":E().isNumber(o.rgw_frontend_port)&&o.rgw_frontend_port>0&&(p.rgw_frontend_port=o.rgw_frontend_port),p.ssl=o.ssl,o.ssl&&(p.rgw_frontend_ssl_certificate=o.ssl_cert?.trim());break;case"iscsi":E().isString(o.trusted_ip_list)&&!E().isEmpty(o.trusted_ip_list)&&(p.trusted_ip_list=o.trusted_ip_list.trim()),E().isNumber(o.api_port)&&o.api_port>0&&(p.api_port=o.api_port),p.api_user=o.api_user,p.api_password=o.api_password,p.api_secure=o.ssl,o.ssl&&(p.ssl_cert=o.ssl_cert?.trim(),p.ssl_key=o.ssl_key?.trim());break;case"ingress":p.ssl=o.ssl,o.ssl&&(p.ssl_cert=o.ssl_cert?.trim(),p.ssl_key=o.ssl_key?.trim()),p.virtual_interface_networks=o.virtual_interface_networks;break;case"mgmt-gateway":if(p.ssl_cert=o.ssl_cert?.trim(),p.ssl_key=o.ssl_key?.trim(),p.enable_auth=o.enable_auth,p.port=o.port,443===p.port&&delete p.port,p.ssl_protocols=[],o.ssl_protocols!=this.DEFAULT_SSL_PROTOCOL_ITEM)for(const x of Object.keys(o.ssl_protocols))p.ssl_protocols.push(o.ssl_protocols[x].content);p.ssl_ciphers=o.ssl_ciphers?.trim().split(":");break;case"grafana":p.port=o.grafana_port,p.initial_admin_password=o.grafana_admin_password;break;case"oauth2-proxy":p.provider_display_name=o.provider_display_name?.trim(),p.client_id=o.client_id?.trim(),p.client_secret=o.client_secret?.trim(),p.oidc_issuer_url=o.oidc_issuer_url?.trim(),p.https_address=o.https_address?.trim(),p.redirect_url=o.redirect_url?.trim(),p.allowlist_domains=o.allowlist_domains.split(",").map(x=>x.trim()),o.ssl&&(p.ssl_cert=o.ssl_cert?.trim(),p.ssl_key=o.ssl_key?.trim())}}this.taskWrapperService.wrapTaskAroundCall({task:new ie.O(r,{service_name:D}),call:this.editing?this.cephServiceService.update(p):this.cephServiceService.create(p)}).subscribe({error(){t.serviceForm.setErrors({cdSubmitButton:!0})},complete:()=>{"services"===this.pageURL?this.router.navigate([this.pageURL,{outlets:{modal:null}}]):this.activeModal.close()}})}clearValidations(){const t=this.serviceForm.getValue("snmp_version"),o=this.serviceForm.getValue("privacy_protocol");"V3"===t?this.serviceForm.get("snmp_community").clearValidators():(this.serviceForm.get("engine_id").clearValidators(),this.serviceForm.get("auth_protocol").clearValidators(),this.serviceForm.get("privacy_protocol").clearValidators(),this.serviceForm.get("snmp_v3_auth_username").clearValidators(),this.serviceForm.get("snmp_v3_auth_password").clearValidators()),null===o&&this.serviceForm.get("snmp_v3_priv_password").clearValidators()}createMultisiteSetup(){this.bsModalRef=this.modalService.show(Nd,{size:"lg"}),this.bsModalRef.componentInstance.submitAction.subscribe(()=>{this.setRgwFields()})}static{this.\u0275fac=function(o){return new(o||n)(e.\u0275\u0275directiveInject(f.Ss),e.\u0275\u0275directiveInject(yo.t),e.\u0275\u0275directiveInject(At.$),e.\u0275\u0275directiveInject(Vt.I),e.\u0275\u0275directiveInject(os.m),e.\u0275\u0275directiveInject(Id.U),e.\u0275\u0275directiveInject(m.Router),e.\u0275\u0275directiveInject(w.a),e.\u0275\u0275directiveInject(Ea.H),e.\u0275\u0275directiveInject(f.YV),e.\u0275\u0275directiveInject(ma.$),e.\u0275\u0275directiveInject(ns.Z),e.\u0275\u0275directiveInject(ts.w),e.\u0275\u0275directiveInject(es.A),e.\u0275\u0275directiveInject(m.ActivatedRoute),e.\u0275\u0275directiveInject(V.NgbActiveModal),e.\u0275\u0275directiveInject(qt.B))}}static{this.\u0275cmp=e.\u0275\u0275defineComponent({type:n,selectors:[["cd-service-form"]],viewQuery:function(o,i){if(1&o&&e.\u0275\u0275viewQuery(V.NgbTypeahead,5),2&o){let r;e.\u0275\u0275queryRefresh(r=e.\u0275\u0275loadQuery())&&(i.typeahead=r.first)}},inputs:{hiddenServices:"hiddenServices",editing:"editing",serviceName:"serviceName",serviceType:"serviceType"},features:[e.\u0275\u0275InheritDefinitionFeature],decls:63,vars:52,consts:()=>{let t,o,i,r,p,F,D,x,H,X,Z,re,pe,be,Pe,he,Ue,ve,Xe,_t,ft,we,qe,Rt,Ot,Je,Dt,et,sn,rn,ln,Bt,_n,cn,Qe,In,An,Dn,yn,Ln,Fn,$n,xn,Un,wn,Be,jo,Wo,Ko,Qo,Yo,Fo,vo,Mo,Jo,Zo,qo,Ro,Oo,ei,ao,Po,bo,No,Io,Ao,ti,ni,oi,ii,ai,Ne,Cr,Sr,qi,hr,ea,Tr,ta,Fr,na,vr,Mr,Rr,Or,Pr,br,Nr,Ir,Ar,Dr,yr,Lr,$r,xr,Ur,wr,Gr,Hr,Vr,Br,zr,Xr,kr,jr,Wr,Kr,Qr,Yr,Jr,Zr,qr,el,tl,nl,ol,il,al,sl,rl,ll,_l,cl,dl,ul,pl,ml,fl,El,gl,Cl,Sl,hl,Tl,Fl,vl,Ml,Rl,Ol,Pl,bl,Nl,Il,Al,Dl,yl,Ll,$l,xl,Ul,wl,Gl,Hl,Vl,Bl,zl,Xl,kl,jl,Wl,Kl,Ql,Yl,Jl,Zl,ql,e_,t_,n_,o_,i_,a_,s_,r_,l_,__,c_,d_,u_,p_,m_,f_,E_,g_,C_,S_,h_,T_;return t=$localize`:␟fb127ea03835b3230f0ed981c7080e2ccb879621␟3346778808274133574:${"\ufffd0\ufffd"}:INTERPOLATION: ${"\ufffd1\ufffd"}:INTERPOLATION_1:`,o=$localize`:␟f61c6867295f3b53d23557021f2f4e0aa1d0b8fc␟8650499415827640724:Type`,i=$localize`:␟3214a1f3a4c3e89a848b4ec59adeeda3b913c396␟1048340649879334463:-- Select a service type --`,r=$localize`:␟83d5d7edd8a0be253c4e93ad4c3efe86d9ac520f␟6334966869524707420:Unmanaged`,p=$localize`:␟ef6e93484490f84860872b0c46a3214194bd8e2f␟5303541482012261945:If Unmanaged is selected, the orchestrator will not start or stop any daemons associated with this service. Placement and all other properties will be ignored.`,F=$localize`:␟a4d113febae4471acad75214da773631a453771f␟5121772990212218425:${"\ufffd#2\ufffd"}:START_LINK: Click here${"\ufffd/#2\ufffd"}:CLOSE_LINK: to create a new Realm/Zone Group/Zone `,D=$localize`:␟7e31779772e519318de1c3f56f737a743535e266␟173545519118712216: Authentication must be enabled in an active \`mgtm-gateway\` service to enable Single Sign-On(SSO) with \`oauth2-proxy\` `,x=$localize`:␟ae1e5f2b8323ca1a377bfcd58bc80df9055205ed␟3666298808684320010: With an active mgmt-gateway service, the dashboard will continue to be served on ${"[\ufffd0\ufffd|\ufffd2\ufffd]"}:INTERPOLATION::${"[\ufffd1\ufffd|\ufffd3\ufffd]"}:INTERPOLATION_1: and all other services will be accessible from ${"[\ufffd0\ufffd|\ufffd2\ufffd]"}:INTERPOLATION::${"[\ufffd1\ufffd|\ufffd3\ufffd]"}:INTERPOLATION_1:/service_name `,x=e.\u0275\u0275i18nPostprocess(x),H=$localize`:␟b858419f3e3cda4f615fc654c9b0da05fea4c3e5␟6275350867580172288: SMB service management is intended for advanced users only. For most scenarios, it is recommended to use the SMB module instead. To manage SMB clusters and shares, please visit the ${"\ufffd#2\ufffd"}:START_LINK:SMB page${"\ufffd/#2\ufffd"}:CLOSE_LINK:. `,X=$localize`:␟7cbdabcece469fab89cfa687ab152bca18b97498␟1417693714872528491:This field is required.`,Z=$localize`:␟f32579a9fd19d93c083175284ee3426d78751c33␟9118175771763301648:Backend Service`,re=$localize`:␟94516fa213706c67ce5a5b5765681d7fb032033a␟3894950702316166331:Loading...`,pe=$localize`:␟c2937074aed12b8158e929c58747a8216433b72b␟7441632044691946087:-- No service available --`,be=$localize`:␟cc554a79a4854e3f92fdf687c62a699a9f0fc340␟6695816287448659622:-- Select an existing service --`,Pe=$localize`:␟7cbdabcece469fab89cfa687ab152bca18b97498␟1417693714872528491:This field is required.`,he=$localize`:␟d43e2b5eda5f168c6eb5ee505729db317c7509db␟6193108880005871084:Block Pool`,Ue=$localize`:␟dce0e356d2b550cd7f17db209fb76f6d05d76ba3␟5475379690689308691: An RBD application-enabled pool in which the gateway configuration can be managed. `,ve=$localize`:␟94516fa213706c67ce5a5b5765681d7fb032033a␟3894950702316166331:Loading...`,Xe=$localize`:␟be7ae8d347aaeb5c3df28d82365bc6b84f576f43␟5376852313208156123:-- No block pools available --`,_t=$localize`:␟ef83ec9c304a89d45650e580dcdc2978c37b3a83␟7859304693598053124:-- Select a pool --`,ft=$localize`:␟7cbdabcece469fab89cfa687ab152bca18b97498␟1417693714872528491:This field is required.`,we=$localize`:␟de31685e1ee2f51b2d31b376653ad4a7e5406104␟1255339738217085471:Group Name`,qe=$localize`:␟3cb6c5ae8b3540744a9c6b74cf0ec483fe2bda06␟2932775528398414084: The name of the gateway group. `,Rt=$localize`:␟7cbdabcece469fab89cfa687ab152bca18b97498␟1417693714872528491:This field is required.`,Ot=$localize`:␟27634638ac68edd16b5a107ea29e52e1bab80b25␟8604852007710946848:Service Name`,Je=$localize`:␟c66432dc299dcc6973741d842ee5c51664a11b68␟7477292313755335330:${"\ufffd0\ufffd"}:INTERPOLATION:. `,Dt=$localize`:␟7cbdabcece469fab89cfa687ab152bca18b97498␟1417693714872528491:This field is required.`,et=$localize`:␟770007f2963dec275d1a2d6797730144a6d6d99b␟7364958330935178357:This service id is already in use.`,sn=$localize`:␟6c47c42f19c77ad4d7080634614320b2f805bb61␟3451345365331244307:MDS service id must start with a letter and contain alphanumeric characters or '.', '-', and '_'`,rn=$localize`:␟838805f188595c747b909a3882b9979c42a85c59␟3840481991104643295:Realm`,ln=$localize`:␟ffeedf2f4c2abb17a93121a23a46d1656ad25c01␟7611330259764311267:-- No realm available --`,Bt=$localize`:␟13e761b7724da4bbdf6ba26c491f4798dad9241c␟6148052126949932311:Zone Group`,_n=$localize`:␟da45a344c97a4cedae594570102577146f5d9670␟4378147649219625174:Zone`,cn=$localize`:␟c15fa461935e0f600bc5d1660af1da67f024fc2a␟5869780110608474933:Placement`,Qe=$localize`:␟099b441d49333b3c6d30b36dc0a4763e64c78920␟4435206372750903836:Hosts`,In=$localize`:␟863226cffd5b66a6fee9810a9282a5006d6ef576␟4077520913910941990:Label`,An=$localize`:␟863226cffd5b66a6fee9810a9282a5006d6ef576␟4077520913910941990:Label`,Dn=$localize`:␟7cbdabcece469fab89cfa687ab152bca18b97498␟1417693714872528491:This field is required.`,yn=$localize`:␟099b441d49333b3c6d30b36dc0a4763e64c78920␟4435206372750903836:Hosts`,Ln=$localize`:␟06412bce0f4fe4311193e9763666089bf9d980da␟8177873832400820695:Count`,Fn=$localize`:␟4176f7597814f783652d4e2212ba75e17a3b5efe␟632724199545622255:Number of deamons that will be deployed`,$n=$localize`:␟ee1a29cc658e4fa891be762d7bae96139b57c8f4␟8734993421339261707:The value must be at least 1.`,xn=$localize`:␟eae7086660cf1e38c7194a2c49ff52cc656f90f5␟4304943972618871159:The entered value needs to be a number.`,Un=$localize`:␟cb2741a46e3560f6bc6dfd99d385e86b08b26d72␟6117946241126833991:Port`,wn=$localize`:␟eae7086660cf1e38c7194a2c49ff52cc656f90f5␟4304943972618871159:The entered value needs to be a number.`,Be=$localize`:␟ee1a29cc658e4fa891be762d7bae96139b57c8f4␟8734993421339261707:The value must be at least 1.`,jo=$localize`:␟a23ed3598cca5285606675b6cb2536a56b411ade␟734228889689400302:The value cannot exceed 65535.`,Wo=$localize`:␟e70fcca5a99575cffef3ff8cbd5e69f06ffd0f1c␟7101197021456818771:Pool`,Ko=$localize`:␟94516fa213706c67ce5a5b5765681d7fb032033a␟3894950702316166331:Loading...`,Qo=$localize`:␟2d8ebdc326e6b9ff35feee3f762b7ab39c02d78f␟1930073306629708829:-- No pools available --`,Yo=$localize`:␟ef83ec9c304a89d45650e580dcdc2978c37b3a83␟7859304693598053124:-- Select a pool --`,Fo=$localize`:␟7cbdabcece469fab89cfa687ab152bca18b97498␟1417693714872528491:This field is required.`,vo=$localize`:␟84b675705324741b954615fedf2417d4d873b0b6␟1568221314488942524:Trusted IPs`,Mo=$localize`:␟b543e7c787cc48c2938cbce2d14c6afea5a598df␟7080907844223799144:Comma separated list of IP addresses.`,Jo=$localize`:␟1039ea40da18a6453d9c1adc72a35aed099029d0␟6501588770588980110:Please add the ${"\ufffd#11\ufffd"}:START_BOLD_TEXT:Ceph Manager${"\ufffd/#11\ufffd"}:CLOSE_BOLD_TEXT: IP addresses here, otherwise the iSCSI gateways can't be reached.`,Zo=$localize`:␟cb2741a46e3560f6bc6dfd99d385e86b08b26d72␟6117946241126833991:Port`,qo=$localize`:␟e08a77594f3d89311cdf6da5090044270909c194␟2392488717875840729:User`,Ro=$localize`:␟c32ef07f8803a223a83ed17024b38e8d82292407␟1431416938026210429:Password`,Oo=$localize`:␟eae7086660cf1e38c7194a2c49ff52cc656f90f5␟4304943972618871159:The entered value needs to be a number.`,ei=$localize`:␟ee1a29cc658e4fa891be762d7bae96139b57c8f4␟8734993421339261707:The value must be at least 1.`,ao=$localize`:␟a23ed3598cca5285606675b6cb2536a56b411ade␟734228889689400302:The value cannot exceed 65535.`,Po=$localize`:␟7cbdabcece469fab89cfa687ab152bca18b97498␟1417693714872528491:This field is required.`,bo=$localize`:␟7cbdabcece469fab89cfa687ab152bca18b97498␟1417693714872528491:This field is required.`,No=$localize`:␟c14ad7c4a8b6e593ed4520bdee63c6492e76c9d5␟9205907420411818817:foo`,Io=$localize`:␟f9197f6a5eb597bbf648aa79a7658a86a258e3f1␟4538842168406843474:rados://.smb/foo/scc.toml`,Ao=$localize`:␟084d964bf76b0de65aeac14b11b8e412f09c3996␟4300861096504031528:192.168.76.204`,ti=$localize`:␟d3d1f785fe24e397f08a7327e8d4362fe2968104␟1074518375503605451:rados:mon-config-key:smb/config/foo/join1.json`,ni=$localize`:␟574b3d05b652f801fe61d2bd9dd79111c38a381d␟7951431684184237950:rados:mon-config-key:smb/config/foo/join2.json`,oi=$localize`:␟ca7a02b0f5f569b139c8da289c98a3de5dab5594␟2850201221969345861:client.smb.fs.cluster.foo`,ii=$localize`:␟88cd6b14c7115a5976982ceb7633569a7a797e3a␟4312544483018964666: Cluster id ${"\ufffd#4\ufffd"}:START_TAG_CD_HELPER:${"\ufffd#5\ufffd"}:START_TAG_SPAN:A short name identifying the SMB “cluster”. In this case a cluster is simply a management unit of one or more Samba services sharing a common configuration, and may not provide actual clustering or availability mechanisms.${"\ufffd/#5\ufffd"}:CLOSE_TAG_SPAN:${"\ufffd/#4\ufffd"}:CLOSE_TAG_CD_HELPER:`,ai=$localize`:␟75c319610fab55fe7bd5009e3e0c0bb651de5c7e␟1365322849596217376:Config URI`,Ne=$localize`:␟2c4889eb20073985072079a11a7775cfa8d27762␟5315609511301269655: Configuration source that should be loaded by the samba-container as the primary configuration file. `,Cr=$localize`:␟0a5e5f833bee6738cb1de380dfd98137029a2e23␟2730739836010453793:Features ${"\ufffd#22\ufffd"}:START_TAG_CD_HELPER:${"\ufffd#23\ufffd"}:START_TAG_SPAN:Pre-defined terms enabling specific deployment characteristics.${"\ufffd/#23\ufffd"}:CLOSE_TAG_SPAN:${"\ufffd/#22\ufffd"}:CLOSE_TAG_CD_HELPER:`,Sr=$localize`:␟66546c148121d319648680ed4d8b87530270dd28␟8172302997473741295:Custom DNS`,qi=$localize`:␟5f766a30c910e65171042948f2a196904a0534c8␟2211019810658032007:${"[\ufffd#32\ufffd|\ufffd#34\ufffd]"}:START_TAG_SPAN:Comma separated list of DNSs.${"[\ufffd/#32\ufffd|\ufffd/#34\ufffd]"}:CLOSE_TAG_SPAN:${"\ufffd#33\ufffd\ufffd/#33\ufffd"}:LINE_BREAK:${"[\ufffd#32\ufffd|\ufffd#34\ufffd]"}:START_TAG_SPAN:A list of IP addresses that will be used as the DNS servers for a Samba container.${"[\ufffd/#32\ufffd|\ufffd/#34\ufffd]"}:CLOSE_TAG_SPAN:`,qi=e.\u0275\u0275i18nPostprocess(qi),hr=$localize`:␟23176f0e4e65f1e09b9cb455d9082071a1b986ef␟2496448389183430934:Join sources`,ea=$localize`:␟aa037259df4f7076b0da141ba8a9d45d29f35f7e␟3480109293787075835:${"[\ufffd#43\ufffd|\ufffd#45\ufffd]"}:START_TAG_SPAN:Comma separated list of URIs.${"[\ufffd/#43\ufffd|\ufffd/#45\ufffd]"}:CLOSE_TAG_SPAN:${"\ufffd#44\ufffd\ufffd/#44\ufffd"}:LINE_BREAK:${"[\ufffd#43\ufffd|\ufffd#45\ufffd]"}:START_TAG_SPAN:A list of values that will be used to identify where authentication data that will be used to perform domain joins are located.${"[\ufffd/#43\ufffd|\ufffd/#45\ufffd]"}:CLOSE_TAG_SPAN:`,ea=e.\u0275\u0275i18nPostprocess(ea),Tr=$localize`:␟3e497cf4086ff45b844b56e95a5525b25bd1130a␟4086703183428085748:User sources`,ta=$localize`:␟a72bd24bc5e62108f3d09a4940722c8b6f88c84e␟2639882069706962698:${"[\ufffd#54\ufffd|\ufffd#56\ufffd]"}:START_TAG_SPAN:Comma separated list of URIs.${"[\ufffd/#54\ufffd|\ufffd/#56\ufffd]"}:CLOSE_TAG_SPAN:${"\ufffd#55\ufffd\ufffd/#55\ufffd"}:LINE_BREAK:${"[\ufffd#54\ufffd|\ufffd#56\ufffd]"}:START_TAG_SPAN:A list of pseudo-uris containing data the samba-container can use to create users (and/or groups). A ceph based samba container may typically use a rados uri or a mon config-key store uri ${"[\ufffd/#54\ufffd|\ufffd/#56\ufffd]"}:CLOSE_TAG_SPAN:`,ta=e.\u0275\u0275i18nPostprocess(ta),Fr=$localize`:␟164e774eb80cccd0034ff5f9f7155c6928dd0280␟103684022884344569:Ceph users`,na=$localize`:␟98bae0d522aec8d54bfd561b787fa9fb997b147f␟1689111809181462016:${"[\ufffd#65\ufffd|\ufffd#67\ufffd]"}:START_TAG_SPAN:Comma separated list of Ceph users.${"[\ufffd/#65\ufffd|\ufffd/#67\ufffd]"}:CLOSE_TAG_SPAN:${"\ufffd#66\ufffd\ufffd/#66\ufffd"}:LINE_BREAK:${"[\ufffd#65\ufffd|\ufffd#67\ufffd]"}:START_TAG_SPAN:A list of cephx user names that the Samba Containers may use.${"[\ufffd/#65\ufffd|\ufffd/#67\ufffd]"}:CLOSE_TAG_SPAN:`,na=e.\u0275\u0275i18nPostprocess(na),vr=$localize`:␟7cbdabcece469fab89cfa687ab152bca18b97498␟1417693714872528491:This field is required.`,Mr=$localize`:␟7cbdabcece469fab89cfa687ab152bca18b97498␟1417693714872528491:This field is required.`,Rr=$localize`:␟7eab68d7f8158358670468c7aa3ae58872af793c␟5375329423696268496:The value must start with either 'http:', 'https:', 'rados:' or 'rados:mon-config-key:'`,Or=$localize`:␟fe607381a7484b3fc03239de03d91676ac652283␟3451089663791994236:${"\ufffd0\ufffd"}:INTERPOLATION: `,Pr=$localize`:␟6265b64c17a1e19775769489bfd0b152fa1f3ba1␟180255038389553248:Virtual IP`,br=$localize`:␟61893fde6e9e05a6b91619d501edaa7962b438ff␟3960600678060729667:The virtual IP address and subnet (in CIDR notation) where the ingress service will be available.`,Nr=$localize`:␟ece04ddf7e96f445415ebd90d93c455e03e8cf53␟3328660234842620246:Frontend Port`,Ir=$localize`:␟ae6fd97454d184b374984c9ff808176ece54f0dd␟605069602269765772:The port used to access the ingress service.`,Ar=$localize`:␟1261eacf161f75efc9dfea84dd97b4a466b89aa1␟9040550999593589195:Monitor Port`,Dr=$localize`:␟4df6281ed630ba96f09790a46a7fe0ec0e666bb6␟1400002020316091076:The port used by haproxy for load balancer status.`,yr=$localize`:␟7cbdabcece469fab89cfa687ab152bca18b97498␟1417693714872528491:This field is required.`,Lr=$localize`:␟eae7086660cf1e38c7194a2c49ff52cc656f90f5␟4304943972618871159:The entered value needs to be a number.`,$r=$localize`:␟ee1a29cc658e4fa891be762d7bae96139b57c8f4␟8734993421339261707:The value must be at least 1.`,xr=$localize`:␟a23ed3598cca5285606675b6cb2536a56b411ade␟734228889689400302:The value cannot exceed 65535.`,Ur=$localize`:␟7cbdabcece469fab89cfa687ab152bca18b97498␟1417693714872528491:This field is required.`,wr=$localize`:␟eae7086660cf1e38c7194a2c49ff52cc656f90f5␟4304943972618871159:The entered value needs to be a number.`,Gr=$localize`:␟ee1a29cc658e4fa891be762d7bae96139b57c8f4␟8734993421339261707:The value must be at least 1.`,Hr=$localize`:␟a23ed3598cca5285606675b6cb2536a56b411ade␟734228889689400302:The value cannot exceed 65535.`,Vr=$localize`:␟7cbdabcece469fab89cfa687ab152bca18b97498␟1417693714872528491:This field is required.`,Br=$localize`:␟8ce24ae1d792ed2846ba57e7ed6397a802caeff5␟1654039843671236185:CIDR Networks`,zr=$localize`:␟7c13184af0c09e3bad77daa5f4869138708d26b2␟486061004020332325:A list of networks to identify which network interface to use for the virtual IP address.`,Xr=$localize`:␟8fe73a4787b8068b2ba61f54ab7e0f9af2ea1fc9␟2724055831234181057:Version`,kr=$localize`:␟6a6855d17f6b9820bb9709870efdcc7da99552d3␟2965988003720319790:-- Select SNMP version --`,jr=$localize`:␟a7369891e88cd613e45a39b55a282c97776d05f5␟1866048779551574162:Destination`,Wr=$localize`:␟f09a5d334a73a4b5ba031d7fa65151cad5ec7133␟2259906991408679021:Must be of the format hostname:port.`,Kr=$localize`:␟b48c81465d14465b95826b99e05acfabef1814c6␟4294913753867242891:Credentials`,Qr=$localize`:␟7cbdabcece469fab89cfa687ab152bca18b97498␟1417693714872528491:This field is required.`,Yr=$localize`:␟7cbdabcece469fab89cfa687ab152bca18b97498␟1417693714872528491:This field is required.`,Jr=$localize`:␟b68c79ffe3af1db88180454fbc2fa880a51ccf52␟1269863128449531501:The value does not match the pattern: ${"\ufffd#2\ufffd"}:START_TAG_STRONG:hostname:port${"\ufffd/#2\ufffd"}:CLOSE_TAG_STRONG:`,Zr=$localize`:␟2c90ad98a026d781ab729911873767e549d78f99␟585398440253191289:Engine Id`,qr=$localize`:␟0d39d015ebd667fb6bddf08bb0e5b3faa6cf044c␟1768627592320233424:Unique identifier for the device (in hex).`,el=$localize`:␟7cbdabcece469fab89cfa687ab152bca18b97498␟1417693714872528491:This field is required.`,tl=$localize`:␟1514cda7dc49062c5c532427245ce47c4954bc32␟291747419596021669:The value does not match the pattern: ${"\ufffd#2\ufffd"}:START_TAG_STRONG:Must be in hexadecimal and length must be multiple of 2 with min value = 10 amd max value = 64.${"\ufffd/#2\ufffd"}:CLOSE_TAG_STRONG:`,nl=$localize`:␟2b2d628c51192ade0044212b409c758c20f9c021␟3432973823727457116:Auth Protocol`,ol=$localize`:␟fc8bb2315a5101770a752b18e03b5c730539397c␟8330226014050781181:-- Select auth protocol --`,il=$localize`:␟7cbdabcece469fab89cfa687ab152bca18b97498␟1417693714872528491:This field is required.`,al=$localize`:␟6777f99fd13e03874afe26ba7289dc9fc211af04␟8155775132230140797:Privacy Protocol`,sl=$localize`:␟70512b7c13bce85b3928920b29fafbd59a853383␟8825510421013440742:-- Select privacy protocol --`,rl=$localize`:␟a4ea0163c25c818aab982072b1b8d5ab585e9a5a␟2665113862968938778:SNMP Community`,ll=$localize`:␟7cbdabcece469fab89cfa687ab152bca18b97498␟1417693714872528491:This field is required.`,_l=$localize`:␟08c74dc9762957593b91f6eb5d65efdfc975bf48␟5248717555542428023:Username`,cl=$localize`:␟7cbdabcece469fab89cfa687ab152bca18b97498␟1417693714872528491:This field is required.`,dl=$localize`:␟c32ef07f8803a223a83ed17024b38e8d82292407␟1431416938026210429:Password`,ul=$localize`:␟7cbdabcece469fab89cfa687ab152bca18b97498␟1417693714872528491:This field is required.`,pl=$localize`:␟948758e1412bb2ecdb98e3a4f1cbb6d7458456f2␟8255877266497322342:Encryption`,ml=$localize`:␟7cbdabcece469fab89cfa687ab152bca18b97498␟1417693714872528491:This field is required.`,fl=$localize`:␟0fcb05ce1eb40cc8da7d76a7192341e2902b2f09␟2721823117340085840:My OIDC Provider`,El=$localize`:␟d47dc11527224ad4bf218a4a72cda2136fbd9b6a␟1395901222609454425:Provider display name`,gl=$localize`:␟62a0350e73307835d7361ce6b755a02fb94ba670␟4140665708580168410:The display name for the identity provider (IdP) in the UI.`,Cl=$localize`:␟152344a93fb1022382cc1a10e38e4290019224e4␟5273501066845923426:Client ID`,Sl=$localize`:␟5ae0da0d281051bdde0af4e0696ee2426b6491f3␟7171866982651940105:The client ID for authenticating with the IdP.`,hl=$localize`:␟fc6b6dfdff61a608cf778c85e2419d301f826a14␟6535310354973070697:Client secret`,Tl=$localize`:␟243accef1ec73f5287f1e513842d21cb61b8f4b7␟1843516441518659832:The client secret for authenticating with the IdP.`,Fl=$localize`:␟45cb4569ee10d4216ddf35e58b4d5fcd74d29d32␟6080732874552998599:OIDC Issuer URL`,vl=$localize`:␟ef289f2342c30dc11a9cb176b41ecd214a691509␟5576549312701254463:The URL of the OpenID Connect (OIDC) issuer.`,Ml=$localize`:␟d6c301bf4a221ceb63b2ae2a8723635387fe65ec␟1722297763909100417:Https address`,Rl=$localize`:␟58bbd21b0a2731f6bd65b3679c00656c723ec00e␟1639891029962790631:The address for HTTPS connections as [IP|Hostname]:port.`,Ol=$localize`:␟27cee417dff3329b8f0da96d98b4d53cec1b1384␟6762090905776336676:Redirect URL`,Pl=$localize`:␟2a0f7548c0de47060cbbdda85d46fa2fc3254c1a␟3382362105805439265:The URL the oauth2-proxy service will redirect to after a successful login.`,bl=$localize`:␟3d805dd854f9f7444311e239441e80f257da314a␟8097513771076229780:Allowlist domains`,Nl=$localize`:␟4b12478d9d000c00eff7329784f4d344518f36b3␟8753423252318594678:Comma separated list of domains to be allowed to redirect to, used for login or logout.`,Il=$localize`:␟7cbdabcece469fab89cfa687ab152bca18b97498␟1417693714872528491:This field is required.`,Al=$localize`:␟7cbdabcece469fab89cfa687ab152bca18b97498␟1417693714872528491:This field is required.`,Dl=$localize`:␟7cbdabcece469fab89cfa687ab152bca18b97498␟1417693714872528491:This field is required.`,yl=$localize`:␟7cbdabcece469fab89cfa687ab152bca18b97498␟1417693714872528491:This field is required.`,Ll=$localize`:␟1842a2ad96a1ab1714428d0eb0f26b8d5ed05885␟7663929228794823405:Invalid url.`,$l=$localize`:␟63b0450809f57eeb77de17932b1d31e48bbb6432␟3628125971148081825:Format must be [IP|Hostname]:port and the port between 0 and 65535`,xl=$localize`:␟dcc149912be47c39652bd71b54c19b5a51b5fe4d␟3624376051002573942:Select protocols...`,Ul=$localize`:␟cb2741a46e3560f6bc6dfd99d385e86b08b26d72␟6117946241126833991:Port`,wl=$localize`:␟ed72606056198896f46c65d0dbbe854d04f3de47␟8966698274727122602:Authentication`,Gl=$localize`:␟70cb6ff7931e92718699e80bb46b9e06d80aea08␟5208108791734940530: Allows to enable authentication through an external Identity Provider (IdP) using Single Sign-On (SSO) `,Hl=$localize`:␟564b4b8f89f519d273ecfb74464f4d798d939d43␟5443197147973612827:${"\ufffd#20\ufffd"}:START_TAG_CDS_DROPDOWN_LIST:${"\ufffd/#20\ufffd"}:CLOSE_TAG_CDS_DROPDOWN_LIST:`,Vl=$localize`:␟9f2ac74452ff63bd0b4fe610ae209a57f4a31ce7␟493572442383919797:SSL ciphers`,Bl=$localize`:␟f062a3668af7d79104a59e14aa02d8e2396d0c37␟3158867007683663727:Default cipher list used: ${"\ufffd#30\ufffd"}:START_LINK:https://ssl-config.mozilla.org/#server=nginx${"\ufffd/#30\ufffd"}:CLOSE_LINK:`,zl=$localize`:␟eae7086660cf1e38c7194a2c49ff52cc656f90f5␟4304943972618871159:The entered value needs to be a number.`,Xl=$localize`:␟ee1a29cc658e4fa891be762d7bae96139b57c8f4␟8734993421339261707:The value must be at least 1.`,kl=$localize`:␟a23ed3598cca5285606675b6cb2536a56b411ade␟734228889689400302:The value cannot exceed 65535.`,jl=$localize`:␟1150c8ca5bbdcc79f24ac975e43d282868b6ab6f␟8971993228034097111:Invalid cipher suite. Each cipher must be separated by '-' and each cipher suite must be separated by ':'`,Wl=$localize`:␟e65610b5d940367f1ff6b57772b96e94e35fe202␟3719080555538542367:SSL`,Kl=$localize`:␟9e37e0d06148c7708e88b4a1eb412babbe1a4afc␟7164856686778871055:Certificate`,Ql=$localize`:␟295ae4f632322098deca8a3ddfbc7aeaabb5423b␟2542310435779389885:The SSL certificate in PEM format.`,Yl=$localize`:␟7cbdabcece469fab89cfa687ab152bca18b97498␟1417693714872528491:This field is required.`,Jl=$localize`:␟464272c069fe56f6c50f41f426a25b2a42c95ba5␟1254586342390366472:Invalid SSL certificate.`,Zl=$localize`:␟0596d06bf1f8a15d4bfe56226971ecdd78013b1f␟8131917609184053070:Private key`,ql=$localize`:␟ded15dc55104994c0230189f34dff84a4955aafb␟7135968420581975132:The SSL private key in PEM format.`,e_=$localize`:␟7cbdabcece469fab89cfa687ab152bca18b97498␟1417693714872528491:This field is required.`,t_=$localize`:␟19bdc1597d815b456793ff87c89af4257a85a103␟8430297957628908174:Invalid SSL private key.`,n_=$localize`:␟3c2be3a11365966818184c92dc86f831d1fb1e3c␟9076922112337217207:Grafana Port`,o_=$localize`:␟d7f1edc26a283a7b1736128ee8a86cb84ce2606e␟3178326942014426612:The default port used by grafana.`,i_=$localize`:␟54e547abea2483827b48b12f1d054f314f5b1ba3␟1598054543669056810:${"\ufffd#17\ufffd"}:START_TAG_SPAN:Grafana Password${"\ufffd/#17\ufffd"}:CLOSE_TAG_SPAN:${"\ufffd#18\ufffd"}:START_TAG_CD_HELPER:The password of the default Grafana Admin. Set once on first-run.${"\ufffd/#18\ufffd"}:CLOSE_TAG_CD_HELPER:`,a_=$localize`:␟eae7086660cf1e38c7194a2c49ff52cc656f90f5␟4304943972618871159:The entered value needs to be a number.`,s_=$localize`:␟ee1a29cc658e4fa891be762d7bae96139b57c8f4␟8734993421339261707:The value must be at least 1.`,r_=$localize`:␟a23ed3598cca5285606675b6cb2536a56b411ade␟734228889689400302:The value cannot exceed 65535.`,l_=$localize`:␟7cbdabcece469fab89cfa687ab152bca18b97498␟1417693714872528491:This field is required.`,__=$localize`:␟4ffe074d49b30a8941a18bc9e59be4305e2b8c8c␟340270807572941949: Modifying the default settings could lead to a weaker security configuration `,c_=$localize`:␟948758e1412bb2ecdb98e3a4f1cbb6d7458456f2␟8255877266497322342:Encryption`,d_=$localize`:␟b9b9c7a23d09f316d73f4c9c639aede34792bd01␟5617303671838801222:Enables mutual TLS (mTLS) between the client and the gateway server.`,u_=$localize`:␟6d955d6734c317eb42c3f351a61ead8df2aee039␟4869272173380443575:Root CA certificate`,p_=$localize`:␟7cbdabcece469fab89cfa687ab152bca18b97498␟1417693714872528491:This field is required.`,m_=$localize`:␟c49419c4b91f0eea51540741063118518ec8cd57␟2186845636964836828:Client CA certificate`,f_=$localize`:␟7cbdabcece469fab89cfa687ab152bca18b97498␟1417693714872528491:This field is required.`,E_=$localize`:␟bb3327e44a028331c06725d2f09329fab7ef04d3␟4341856182704535428:Client key`,g_=$localize`:␟7cbdabcece469fab89cfa687ab152bca18b97498␟1417693714872528491:This field is required.`,C_=$localize`:␟0e529a411e39be5d590f0ac8f1cb54192ed22bf4␟8903080947625325336:Gateway server certificate`,S_=$localize`:␟7cbdabcece469fab89cfa687ab152bca18b97498␟1417693714872528491:This field is required.`,h_=$localize`:␟0023b37fdfff2ae7dfac0435a98c2abd37986e51␟8542951791427845177:Gateway server key`,T_=$localize`:␟7cbdabcece469fab89cfa687ab152bca18b97498␟1417693714872528491:This field is required.`,[["frm","ngForm"],t,o,i,r,p,F,D,x,H,X,Z,re,pe,be,Pe,he,Ue,ve,Xe,_t,ft,we,qe,Rt,Ot,Je,Dt,et,sn,rn,ln,Bt,_n,cn,Qe,In,An,Dn,yn,Ln,Fn,$n,xn,Un,wn,Be,jo,Wo,Ko,Qo,Yo,Fo,vo,Mo,Jo,Zo,qo,Ro,Oo,ei,ao,Po,bo,ii,ai,Ne,Cr,Sr,qi,hr,ea,Tr,ta,Fr,na,vr,Mr,Rr,Or,Pr,br,Nr,Ir,Ar,Dr,yr,Lr,$r,xr,Ur,wr,Gr,Hr,Vr,Br,zr,Xr,kr,jr,Wr,Kr,Qr,Yr,Jr,Zr,qr,el,tl,nl,ol,il,al,sl,rl,ll,_l,cl,dl,ul,pl,ml,El,gl,Cl,Sl,hl,Tl,Fl,vl,Ml,Rl,Ol,Pl,bl,Nl,Il,Al,Dl,yl,Ll,$l,Ul,wl,Gl,Hl,Vl,Bl,zl,Xl,kl,jl,Wl,Kl,Ql,Yl,Jl,Zl,ql,e_,t_,n_,o_,i_,a_,s_,r_,l_,__,c_,d_,u_,p_,m_,f_,E_,g_,C_,S_,h_,T_,[3,"pageURL","modalRef"],[1,"modal-title"],[1,"modal-content"],["novalidate","",3,"formGroup"],[1,"modal-body"],["type","info","spacingClass","mb-3",4,"ngIf"],["type","warning","spacingClass","mb-3",4,"ngIf"],[1,"form-group","row"],["for","service_type",1,"cd-col-form-label","required"],[1,"cd-col-form-input"],["id","service_type","name","service_type","formControlName","service_type",1,"form-select",3,"change"],[3,"ngValue"],[3,"value",4,"ngFor","ngForOf"],["class","invalid-feedback",4,"ngIf"],["class","form-group row",4,"ngIf"],[1,"cd-col-form-offset"],[1,"custom-control","custom-checkbox"],["id","unmanaged","type","checkbox","formControlName","unmanaged",1,"custom-control-input"],["for","unmanaged",1,"custom-control-label","m-0"],[4,"ngIf"],[1,"modal-footer"],[1,"text-right"],[3,"submitActionEvent","form","submitText"],["type","info","spacingClass","mb-3"],[1,"text-decoration-underline",3,"click"],["type","warning","spacingClass","mb-3"],["routerLink","/cephfs/smb"],[3,"value"],[1,"invalid-feedback"],["for","backend_service",1,"cd-col-form-label",3,"ngClass"],["id","backend_service","name","backend_service","formControlName","backend_service",1,"form-select",3,"change"],[3,"ngValue",4,"ngIf"],["for","pool",1,"cd-col-form-label","required"],["id","pool","name","pool","formControlName","pool",1,"form-select",3,"change"],["for","group",1,"cd-col-form-label","required"],[1,"input-group"],["id","group","type","text","formControlName","group",1,"form-control",3,"change"],["for","service_id",1,"cd-col-form-label",3,"ngClass"],["class","input-group-text","for","userId",4,"ngIf"],["id","service_id","type","text","formControlName","service_id",1,"form-control"],["for","userId",1,"input-group-text"],["for","realm_name",1,"cd-col-form-label"],["id","realm_name","formControlName","realm_name","name","realm_name",1,"form-select"],["selected","",4,"ngIf"],["selected",""],["for","zonegroup_name",1,"cd-col-form-label"],["id","zonegroup_name","formControlName","zonegroup_name","name","zonegroup_name",1,"form-select"],["for","zone_name",1,"cd-col-form-label"],["id","zone_name","formControlName","zone_name","name","zone_name",1,"form-select"],["for","placement",1,"cd-col-form-label"],["id","placement","formControlName","placement",1,"form-select",3,"change"],["value","hosts"],["value","label"],["for","label",1,"cd-col-form-label"],["id","label","type","text","formControlName","label",1,"form-control",3,"focus","click","ngbTypeahead"],["for","hosts",1,"cd-col-form-label"],["id","hosts",3,"data","options","messages"],["for","count",1,"cd-col-form-label"],["id","count","type","number","formControlName","count","min","1",1,"form-control"],["for","rgw_frontend_port",1,"cd-col-form-label"],["id","rgw_frontend_port","type","number","formControlName","rgw_frontend_port","min","1","max","65535",1,"form-control"],["id","pool","name","pool","formControlName","pool",1,"form-select"],["for","trusted_ip_list",1,"cd-col-form-label"],["id","trusted_ip_list","type","text","formControlName","trusted_ip_list",1,"form-control"],["for","api_port",1,"cd-col-form-label"],["id","api_port","type","number","formControlName","api_port","min","1","max","65535",1,"form-control"],["for","api_user",1,"cd-col-form-label",3,"ngClass"],["id","api_user","type","text","formControlName","api_user",1,"form-control"],["for","api_password",1,"cd-col-form-label",3,"ngClass"],["id","api_password","type","password","autocomplete","new-password","formControlName","api_password",1,"form-control"],["type","button","cdPasswordButton","api_password",1,"btn","btn-light"],["source","api_password"],["for","cluster_id",1,"cd-col-form-label","required"],["id","cluster_id","type","text","formControlName","cluster_id","placeholder",No,1,"form-control"],["for","config_uri",1,"cd-col-form-label","required"],["id","config_uri","type","text","formControlName","config_uri","placeholder",Io,1,"form-control"],["formGroupName","features",1,"form-group","row"],["for","features",1,"cd-col-form-label"],["class","custom-control custom-checkbox",4,"ngFor","ngForOf"],["for","custom_dns",1,"cd-col-form-label"],["id","custom_dns","type","text","formControlName","custom_dns","placeholder",Ao,1,"form-control"],["for","join_sources",1,"cd-col-form-label"],["id","join_sources","type","text","formControlName","join_sources","placeholder",ti,1,"form-control"],["for","user_sources",1,"cd-col-form-label"],["id","user_sources","type","text","formControlName","user_sources","placeholder",ni,1,"form-control"],["for","include_ceph_users",1,"cd-col-form-label"],["id","include_ceph_users","type","text","formControlName","include_ceph_users","placeholder",oi,1,"form-control"],["type","checkbox",1,"custom-control-input",3,"name","id","formControlName"],[1,"custom-control-label",3,"for"],["for","virtual_ip",1,"cd-col-form-label",3,"ngClass"],["id","virtual_ip","type","text","formControlName","virtual_ip",1,"form-control"],["for","frontend_port",1,"cd-col-form-label",3,"ngClass"],["id","frontend_port","type","number","formControlName","frontend_port","min","1","max","65535",1,"form-control"],["for","monitor_port",1,"cd-col-form-label",3,"ngClass"],["id","monitor_port","type","number","formControlName","monitor_port","min","1","max","65535",1,"form-control"],["for","virtual_interface_networks",1,"cd-col-form-label"],["id","virtual_interface_networks","type","text","formControlName","virtual_interface_networks",1,"form-control"],["for","snmp_version",1,"cd-col-form-label","required"],["id","snmp_version","name","snmp_version","formControlName","snmp_version",1,"form-select",3,"change"],["for","snmp_destination",1,"cd-col-form-label","required"],["id","snmp_destination","type","text","formControlName","snmp_destination",1,"form-control"],["for","engine_id",1,"cd-col-form-label","required"],["id","engine_id","type","text","formControlName","engine_id",1,"form-control"],["for","auth_protocol",1,"cd-col-form-label","required"],["id","auth_protocol","name","auth_protocol","formControlName","auth_protocol",1,"form-select"],["for","privacy_protocol",1,"cd-col-form-label"],["id","privacy_protocol","name","privacy_protocol","formControlName","privacy_protocol",1,"form-select"],["for","snmp_community",1,"cd-col-form-label","required"],["id","snmp_community","type","text","formControlName","snmp_community",1,"form-control"],["for","snmp_v3_auth_username",1,"cd-col-form-label","required"],["id","snmp_v3_auth_username","type","text","formControlName","snmp_v3_auth_username",1,"form-control"],["for","snmp_v3_auth_password",1,"cd-col-form-label","required"],["id","snmp_v3_auth_password","type","password","formControlName","snmp_v3_auth_password",1,"form-control"],["for","snmp_v3_priv_password",1,"cd-col-form-label","required"],["id","snmp_v3_priv_password","type","password","formControlName","snmp_v3_priv_password",1,"form-control"],["for","provider_display_name",1,"cd-col-form-label","required"],["id","provider_display_name","type","text","formControlName","provider_display_name","placeholder",fl,1,"form-control"],["for","client_id",1,"cd-col-form-label","required"],["id","client_id","type","text","formControlName","client_id","placeholder","oauth2-client",1,"form-control"],["for","client_secret",1,"cd-col-form-label","required"],["id","client_secret","type","password","formControlName","client_secret",1,"form-control"],[1,"input-group-append"],["type","button","cdPasswordButton","client_secret",1,"btn","btn-light"],["source","client_secret"],["for","oidc_issuer_url",1,"cd-col-form-label","required"],["id","oidc_issuer_url","type","text","formControlName","oidc_issuer_url","placeholder","https://<IdPs-domain>/realms/<realm-name>",1,"form-control"],["for","https_address",1,"cd-col-form-label"],["id","https_address","type","text","formControlName","https_address","placeholder","0.0.0.0:4180",1,"form-control"],["for","redirect_url",1,"cd-col-form-label"],["id","redirect_url","type","text","formControlName","redirect_url","placeholder","https://<IP|Hostname>:4180/oauth2/callback",1,"form-control"],["for","allowlist_domains",1,"cd-col-form-label"],["id","allowlist_domains","type","text","formControlName","allowlist_domains","placeholder","domain1.com,192.168.100.1:8080",1,"form-control"],["for","port",1,"cd-col-form-label"],["id","port","type","number","formControlName","port","min","1","max","65535",1,"form-control"],[1,"form-item"],["for","pools",1,"cds--label"],["id","enable_auth","name","enable_auth","formControlName","enable_auth"],["type","multi","label","SSL protocols","selectionFeedback","top-after-reopen","for","ssl_protocols","name","ssl_protocols","formControlName","ssl_protocols","id","ssl_protocols","placeholder",xl,3,"appendInline","items"],["for","ssl_ciphers",1,"cd-col-form-label"],["id","ssl_ciphers","type","text","formControlName","ssl_ciphers","placeholder","ECDHE-ECDSA-AES128-GCM-SHA256:ECDHE-RSA-AES128-GCM-SHA256",1,"form-control"],["href","https://ssl-config.mozilla.org/#server=nginx","target","_blank"],["id","ssl","type","checkbox","formControlName","ssl",1,"custom-control-input"],["for","ssl",1,"custom-control-label"],["for","ssl_cert",1,"cd-col-form-label"],["id","ssl_cert","formControlName","ssl_cert","rows","5",1,"form-control","resize-vertical","text-monospace","text-pre"],["type","file",3,"change"],["for","ssl_key",1,"cd-col-form-label"],["id","ssl_key","formControlName","ssl_key","rows","5",1,"form-control","resize-vertical","text-monospace","text-pre"],["for","grafana_port",1,"cd-col-form-label"],["id","grafana_port","type","number","formControlName","grafana_port","min","1","max","65535",1,"form-control"],["for","grafana_admin_password",1,"cd-col-form-label"],["id","grafana_admin_password","type","password","autocomplete","new-password","formControlName","grafana_admin_password",1,"form-control"],["type","button","cdPasswordButton","grafana_admin_password",1,"btn","btn-light"],["source","grafana_admin_password"],["id","enable_mtls","type","checkbox","formControlName","enable_mtls",1,"custom-control-input"],["for","enable_mtls",1,"custom-control-label"],["for","root_ca_cert",1,"cd-col-form-label","required"],["id","root_ca_cert","formControlName","root_ca_cert","rows","5",1,"form-control","resize-vertical","text-monospace","text-pre"],["for","client_cert",1,"cd-col-form-label","required"],["id","client_cert","formControlName","client_cert","rows","5",1,"form-control","resize-vertical","text-monospace","text-pre"],["for","client_key",1,"cd-col-form-label","required"],["id","client_key","formControlName","client_key","rows","5",1,"form-control","resize-vertical","text-monospace","text-pre"],["for","server_cert",1,"cd-col-form-label","required"],["id","server_cert","formControlName","server_cert","rows","5",1,"form-control","resize-vertical","text-monospace","text-pre"],["for","server_key",1,"cd-col-form-label","required"],["id","server_key","formControlName","server_key","rows","5",1,"form-control","resize-vertical","text-monospace","text-pre"]]},template:function(o,i){if(1&o){const r=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"cd-modal",181)(1,"span",182),e.\u0275\u0275i18n(2,1),e.\u0275\u0275pipe(3,"titlecase"),e.\u0275\u0275pipe(4,"upperFirst"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementContainerStart(5,183),e.\u0275\u0275elementStart(6,"form",184,0)(8,"div",185),e.\u0275\u0275template(9,wd,3,0,"cd-alert-panel",186)(10,Gd,2,0,"cd-alert-panel",186)(11,Hd,2,4,"cd-alert-panel",186)(12,Vd,3,0,"cd-alert-panel",187),e.\u0275\u0275elementStart(13,"div",188)(14,"label",189),e.\u0275\u0275i18n(15,2),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(16,"div",190)(17,"select",191),e.\u0275\u0275listener("change",function(F){return e.\u0275\u0275restoreView(r),e.\u0275\u0275resetView(i.onServiceTypeChange(F.target.value))}),e.\u0275\u0275elementStart(18,"option",192),e.\u0275\u0275i18n(19,3),e.\u0275\u0275elementEnd(),e.\u0275\u0275template(20,Bd,2,2,"option",193),e.\u0275\u0275elementEnd(),e.\u0275\u0275template(21,zd,2,0,"span",194),e.\u0275\u0275elementEnd()(),e.\u0275\u0275template(22,Qd,10,9,"div",195)(23,tu,12,5,"div",195)(24,ou,10,1,"div",195)(25,lu,11,9,"div",195)(26,du,7,3,"div",195)(27,pu,6,2,"div",195)(28,fu,6,2,"div",195),e.\u0275\u0275elementStart(29,"div",188)(30,"div",196)(31,"div",197),e.\u0275\u0275element(32,"input",198),e.\u0275\u0275elementStart(33,"label",199),e.\u0275\u0275i18n(34,4),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(35,"cd-help-text"),e.\u0275\u0275i18n(36,5),e.\u0275\u0275elementEnd()()()(),e.\u0275\u0275template(37,Eu,9,0,"div",195)(38,Cu,6,2,"div",195)(39,Su,5,3,"div",195)(40,Fu,10,2,"div",195)(41,Ou,9,3,"ng-container",200)(42,Du,10,5,"div",195)(43,wu,37,13,"ng-container",200)(44,zu,70,4,"ng-container",200)(45,ep,38,22,"ng-container",200)(46,Tp,31,13,"ng-container",200)(47,bp,67,6,"ng-container",200)(48,yp,32,6,"ng-container",200)(49,Vp,4,7,"ng-container",200)(50,jp,25,5,"ng-container",200)(51,Wp,2,0,"cd-alert-panel",187)(52,Kp,8,0,"div",195)(53,Yp,8,1,"div",195)(54,Zp,8,1,"div",195)(55,em,8,1,"div",195)(56,nm,8,1,"div",195)(57,im,8,1,"div",195),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(58,"div",201)(59,"div",202)(60,"cd-form-button-panel",203),e.\u0275\u0275pipe(61,"titlecase"),e.\u0275\u0275pipe(62,"upperFirst"),e.\u0275\u0275listener("submitActionEvent",function(){return e.\u0275\u0275restoreView(r),e.\u0275\u0275resetView(i.onSubmit())}),e.\u0275\u0275elementEnd()()()(),e.\u0275\u0275elementContainerEnd(),e.\u0275\u0275elementEnd()}if(2&o){const r=e.\u0275\u0275reference(7);e.\u0275\u0275property("pageURL",i.pageURL)("modalRef",i.activeModal),e.\u0275\u0275advance(4),e.\u0275\u0275i18nExp(e.\u0275\u0275pipeBind1(3,42,i.action))(e.\u0275\u0275pipeBind1(4,44,i.resource)),e.\u0275\u0275i18nApply(2),e.\u0275\u0275advance(2),e.\u0275\u0275property("formGroup",i.serviceForm),e.\u0275\u0275advance(3),e.\u0275\u0275property("ngIf","rgw"===i.serviceForm.controls.service_type.value&&i.showRealmCreationForm),e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf","oauth2-proxy"===i.serviceForm.controls.service_type.value),e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf","mgmt-gateway"===i.serviceForm.controls.service_type.value),e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf","smb"===i.serviceForm.controls.service_type.value),e.\u0275\u0275advance(6),e.\u0275\u0275property("ngValue",null),e.\u0275\u0275advance(2),e.\u0275\u0275property("ngForOf",i.serviceTypes),e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf",i.serviceForm.showError("service_type",r,"required")),e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf","ingress"===i.serviceForm.controls.service_type.value),e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf","nvmeof"===i.serviceForm.controls.service_type.value),e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf","nvmeof"===i.serviceForm.controls.service_type.value),e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf","snmp-gateway"!==i.serviceForm.controls.service_type.value),e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf","rgw"===i.serviceForm.controls.service_type.value),e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf","rgw"===i.serviceForm.controls.service_type.value),e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf","rgw"===i.serviceForm.controls.service_type.value),e.\u0275\u0275advance(9),e.\u0275\u0275property("ngIf",!i.serviceForm.controls.unmanaged.value),e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf",!i.serviceForm.controls.unmanaged.value&&"label"===i.serviceForm.controls.placement.value),e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf",!i.serviceForm.controls.unmanaged.value&&"hosts"===i.serviceForm.controls.placement.value),e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf",!i.serviceForm.controls.unmanaged.value&&"nvmeof"!==i.serviceForm.controls.service_type.value),e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf",!i.serviceForm.controls.unmanaged.value&&"rgw"===i.serviceForm.controls.service_type.value),e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf","iscsi"===i.serviceForm.controls.service_type.value),e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf",!i.serviceForm.controls.unmanaged.value&&"iscsi"===i.serviceForm.controls.service_type.value),e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf","smb"===i.serviceForm.controls.service_type.value),e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf","ingress"===i.serviceForm.controls.service_type.value),e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf","snmp-gateway"===i.serviceForm.controls.service_type.value),e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf","oauth2-proxy"===i.serviceForm.controls.service_type.value),e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf",!i.serviceForm.controls.unmanaged.value&&e.\u0275\u0275pureFunction0(50,Hi).includes(i.serviceForm.controls.service_type.value)),e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf",!i.serviceForm.controls.unmanaged.value&&e.\u0275\u0275pureFunction0(51,yd).includes(i.serviceForm.controls.service_type.value)),e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf","grafana"===i.serviceForm.controls.service_type.value),e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf","mgmt-gateway"===i.serviceForm.controls.service_type.value&&i.showMgmtGatewayMessage),e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf","nvmeof"===i.serviceForm.controls.service_type.value),e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf",i.serviceForm.controls.enable_mtls.value),e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf",i.serviceForm.controls.enable_mtls.value),e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf",i.serviceForm.controls.enable_mtls.value),e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf",i.serviceForm.controls.enable_mtls.value),e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf",i.serviceForm.controls.enable_mtls.value),e.\u0275\u0275advance(3),e.\u0275\u0275property("form",i.serviceForm)("submitText",e.\u0275\u0275pipeBind1(61,46,i.action)+" "+e.\u0275\u0275pipeBind1(62,48,i.resource))}},dependencies:[l.NgClass,l.NgForOf,l.NgIf,b.m,Dd.U,xt.z,it.m,me.N,Q.e,Ye.O,Lo.h,De.S,Me.a,xe.C,ze.E,m.RouterLink,T.\u0275NgNoValidate,T.NgSelectOption,T.\u0275NgSelectMultipleOption,T.DefaultValueAccessor,T.NumberValueAccessor,T.CheckboxControlValueAccessor,T.SelectControlValueAccessor,T.NgControlStatus,T.NgControlStatusGroup,T.MinValidator,T.MaxValidator,T.FormGroupDirective,T.FormControlName,T.FormGroupName,V.NgbTypeahead,L.ComboBox,L.DropdownList,L.Checkbox,l.TitleCasePipe,Oe.r]})}}return n})();var mo=s(11549),fo=s(87837);function am(n,c){1&n&&(e.\u0275\u0275elementStart(0,"cd-alert-panel",4),e.\u0275\u0275i18n(1,1),e.\u0275\u0275elementEnd())}function sm(n,c){1&n&&(e.\u0275\u0275elementStart(0,"cd-alert-panel",4),e.\u0275\u0275i18nStart(1,2),e.\u0275\u0275element(2,"cd-doc",5),e.\u0275\u0275i18nEnd(),e.\u0275\u0275elementEnd())}let zi=(()=>{class n{static{this.\u0275fac=function(o){return new(o||n)}}static{this.\u0275cmp=e.\u0275\u0275defineComponent({type:n,selectors:[["cd-orchestrator-doc-panel"]],inputs:{missingFeatures:"missingFeatures"},decls:3,vars:2,consts:()=>{let t,o;return t=$localize`:␟b20e42ac4354d449f2718428b5390933eef0c1b9␟6510790372326434578:The feature is not supported in the current Orchestrator.`,o=$localize`:␟6b7e6de186b1b1e666f4199babcd6a3d1d5806bd␟686825529221823082:Orchestrator is not available. Please consult the ${"\ufffd#2\ufffd"}:START_TAG_CD_DOC:${"\ufffd/#2\ufffd"}:CLOSE_TAG_CD_DOC: on how to configure and enable the functionality.`,[["elseBlock",""],t,o,["type","info",4,"ngIf","ngIfElse"],["type","info"],["section","orch"]]},template:function(o,i){if(1&o&&e.\u0275\u0275template(0,am,2,0,"cd-alert-panel",3)(1,sm,3,0,"ng-template",null,0,e.\u0275\u0275templateRefExtractor),2&o){const r=e.\u0275\u0275reference(2);e.\u0275\u0275property("ngIf",i.missingFeatures)("ngIfElse",r)}},dependencies:[l.NgIf,it.m,fo.C]})}}return n})(),Xi=class da{constructor(c){this.http=c,this.url="api/daemon"}action(c,t){return this.http.put(`${this.url}/${c}`,{action:t,container_image:null},{headers:{Accept:"application/vnd.ceph.api.v0.1+json"},observe:"response"})}list(c){return this.http.get(this.url,{params:{daemon_types:c}})}static{this.\u0275fac=function(t){return new(t||da)(e.\u0275\u0275inject(h.HttpClient))}}static{this.\u0275prov=e.\u0275\u0275defineInjectable({token:da,factory:da.\u0275fac,providedIn:"root"})}};Xi=(0,C.__decorate)([d.G,(0,C.__metadata)("design:paramtypes",[h.HttpClient])],Xi);var ss=s(45757);const rm=["statusTpl"],lm=["listTpl"],_m=["cpuTpl"],cm=["daemonsTable"];function dm(n,c){1&n&&e.\u0275\u0275element(0,"cd-orchestrator-doc-panel")}function um(n,c){1&n&&e.\u0275\u0275elementContainer(0)}function pm(n,c){if(1&n&&(e.\u0275\u0275elementStart(0,"div"),e.\u0275\u0275template(1,um,1,0,"ng-container",13),e.\u0275\u0275elementEnd()),2&n){e.\u0275\u0275nextContext();const t=e.\u0275\u0275reference(9);e.\u0275\u0275advance(),e.\u0275\u0275property("ngTemplateOutlet",t)}}function mm(n,c){1&n&&e.\u0275\u0275elementContainer(0)}function fm(n,c){if(1&n&&e.\u0275\u0275template(0,mm,1,0,"ng-container",13),2&n){e.\u0275\u0275nextContext(2);const t=e.\u0275\u0275reference(9);e.\u0275\u0275property("ngTemplateOutlet",t)}}function Em(n,c){if(1&n){const t=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"cd-table",21,6),e.\u0275\u0275listener("fetchData",function(i){e.\u0275\u0275restoreView(t);const r=e.\u0275\u0275nextContext(3);return e.\u0275\u0275resetView(r.getServices(i))}),e.\u0275\u0275elementEnd()}if(2&n){const t=e.\u0275\u0275nextContext(3);e.\u0275\u0275property("data",t.services)("columns",t.serviceColumns)}}function gm(n,c){if(1&n&&e.\u0275\u0275template(0,Em,2,2,"cd-table",20),2&n){const t=e.\u0275\u0275nextContext(2);e.\u0275\u0275property("ngIf",t.hasOrchestrator)}}function Cm(n,c){if(1&n&&(e.\u0275\u0275elementContainerStart(0),e.\u0275\u0275elementStart(1,"nav",14,5),e.\u0275\u0275elementContainerStart(3,15),e.\u0275\u0275elementStart(4,"a",16),e.\u0275\u0275i18n(5,9),e.\u0275\u0275elementEnd(),e.\u0275\u0275template(6,fm,1,1,"ng-template",17),e.\u0275\u0275elementContainerEnd(),e.\u0275\u0275elementContainerStart(7,18),e.\u0275\u0275elementStart(8,"a",16),e.\u0275\u0275i18n(9,10),e.\u0275\u0275elementEnd(),e.\u0275\u0275template(10,gm,1,1,"ng-template",17),e.\u0275\u0275elementContainerEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275element(11,"div",19),e.\u0275\u0275elementContainerEnd()),2&n){const t=e.\u0275\u0275reference(2);e.\u0275\u0275advance(11),e.\u0275\u0275property("ngbNavOutlet",t)}}function Sm(n,c){if(1&n&&(e.\u0275\u0275elementStart(0,"span",22),e.\u0275\u0275pipe(1,"pipeFunction"),e.\u0275\u0275text(2),e.\u0275\u0275elementEnd()),2&n){const t=c.data.row,o=e.\u0275\u0275nextContext();e.\u0275\u0275property("ngClass",e.\u0275\u0275pipeBind2(1,2,t,o.getStatusClass)),e.\u0275\u0275advance(2),e.\u0275\u0275textInterpolate1(" ",t.status_desc," ")}}function hm(n,c){if(1&n&&(e.\u0275\u0275elementStart(0,"span"),e.\u0275\u0275namespaceSVG(),e.\u0275\u0275element(1,"svg",28),e.\u0275\u0275elementEnd()),2&n){const t=e.\u0275\u0275nextContext(4);e.\u0275\u0275advance(),e.\u0275\u0275property("cdsIcon",t.icons.infoCircle)("size",t.icons.size16)}}function Tm(n,c){if(1&n&&(e.\u0275\u0275elementStart(0,"span"),e.\u0275\u0275namespaceSVG(),e.\u0275\u0275element(1,"svg",29),e.\u0275\u0275elementEnd()),2&n){const t=e.\u0275\u0275nextContext(4);e.\u0275\u0275advance(),e.\u0275\u0275property("cdsIcon",t.icons.warning)("size",t.icons.size16)}}function Fm(n,c){if(1&n&&(e.\u0275\u0275elementStart(0,"li",26)(1,"b"),e.\u0275\u0275text(2),e.\u0275\u0275pipe(3,"relativeDate"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(4,"span",27),e.\u0275\u0275text(5),e.\u0275\u0275elementEnd(),e.\u0275\u0275element(6,"br"),e.\u0275\u0275template(7,hm,2,2,"span",11)(8,Tm,2,2,"span",11),e.\u0275\u0275text(9),e.\u0275\u0275elementEnd()),2&n){const t=c.$implicit;e.\u0275\u0275advance(2),e.\u0275\u0275textInterpolate1("",e.\u0275\u0275pipeBind1(3,5,t.created)," - "),e.\u0275\u0275advance(3),e.\u0275\u0275textInterpolate(t.subject),e.\u0275\u0275advance(2),e.\u0275\u0275property("ngIf","INFO"===t.level),e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf","ERROR"===t.level),e.\u0275\u0275advance(),e.\u0275\u0275textInterpolate1(" ",t.message," ")}}function vm(n,c){if(1&n&&(e.\u0275\u0275elementStart(0,"ul",24),e.\u0275\u0275template(1,Fm,10,7,"li",25),e.\u0275\u0275elementEnd()),2&n){const t=e.\u0275\u0275nextContext().data.value,o=e.\u0275\u0275nextContext();e.\u0275\u0275advance(),e.\u0275\u0275property("ngForOf",t)("ngForTrackBy",o.trackByFn)}}function Mm(n,c){1&n&&(e.\u0275\u0275elementStart(0,"div",26)(1,"span"),e.\u0275\u0275text(2,"No data available"),e.\u0275\u0275elementEnd()())}function Rm(n,c){if(1&n&&e.\u0275\u0275template(0,vm,2,2,"ul",23)(1,Mm,3,0,"ng-template",null,7,e.\u0275\u0275templateRefExtractor),2&n){const t=c.data.value,o=e.\u0275\u0275reference(2);e.\u0275\u0275property("ngIf",null==t?null:t.length)("ngIfElse",o)}}function Om(n,c){if(1&n){const t=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"cd-table",31,8),e.\u0275\u0275listener("fetchData",function(i){e.\u0275\u0275restoreView(t);const r=e.\u0275\u0275nextContext(2);return e.\u0275\u0275resetView(r.getDaemons(i))})("updateSelection",function(i){e.\u0275\u0275restoreView(t);const r=e.\u0275\u0275nextContext(2);return e.\u0275\u0275resetView(r.updateSelection(i))}),e.\u0275\u0275element(2,"cd-table-actions",32),e.\u0275\u0275elementEnd()}if(2&n){const t=e.\u0275\u0275nextContext(2);e.\u0275\u0275property("data",t.daemons)("columns",t.columns),e.\u0275\u0275advance(2),e.\u0275\u0275property("selection",t.selection)("permission",t.permissions.hosts)("tableActions",t.tableActions)}}function Pm(n,c){if(1&n&&e.\u0275\u0275template(0,Om,3,5,"cd-table",30),2&n){const t=e.\u0275\u0275nextContext();e.\u0275\u0275property("ngIf",t.hasOrchestrator)}}function bm(n,c){if(1&n&&e.\u0275\u0275element(0,"cd-usage-bar",33),2&n){const t=c.data.row,o=e.\u0275\u0275nextContext();e.\u0275\u0275property("total",o.total)("calculatePerc",!1)("used",t.cpu_percentage)("isBinary",!1)}}let rs=(()=>{class n{constructor(t,o,i,r,p,F,D,x,H,X){this.hostService=t,this.cephServiceService=o,this.orchService=i,this.relativeDatePipe=r,this.dimlessBinary=p,this.actionLabels=F,this.authStorageService=D,this.daemonService=x,this.notificationService=H,this.cdRef=X,this.hiddenColumns=[],this.total=100,this.warningThreshold=.8,this.errorThreshold=.9,this.icons=g.FI,this.daemons=[],this.services=[],this.columns=[],this.serviceColumns=[],this.selection=new A.y,this.hasOrchestrator=!1,this.showDocPanel=!1}ngOnInit(){this.permissions=this.authStorageService.getPermissions(),this.tableActions=[{permission:"update",icon:g.FI.start,click:()=>this.daemonAction("start"),name:this.actionLabels.START,disable:()=>this.actionDisabled("start")},{permission:"update",icon:g.FI.stop,click:()=>this.daemonAction("stop"),name:this.actionLabels.STOP,disable:()=>this.actionDisabled("stop")},{permission:"update",icon:g.FI.restart,click:()=>this.daemonAction("restart"),name:this.actionLabels.RESTART,disable:()=>this.actionDisabled("restart")},{permission:"update",icon:g.FI.deploy,click:()=>this.daemonAction("redeploy"),name:this.actionLabels.REDEPLOY,disable:()=>this.actionDisabled("redeploy")}],this.columns=[{name:$localize`Hostname`,prop:"hostname",flexGrow:2,filterable:!0},{name:$localize`Daemon name`,prop:"daemon_name",flexGrow:1,filterable:!0},{name:$localize`Version`,prop:"version",flexGrow:1,filterable:!0},{name:$localize`Status`,prop:"status_desc",flexGrow:1,filterable:!0,cellTemplate:this.statusTpl},{name:$localize`Last Refreshed`,prop:"last_refresh",pipe:this.relativeDatePipe,flexGrow:1},{name:$localize`CPU Usage`,prop:"cpu_percentage",flexGrow:1,cellTemplate:this.cpuTpl},{name:$localize`Memory Usage`,prop:"memory_usage",flexGrow:1,pipe:this.dimlessBinary,cellClass:"text-right"},{name:$localize`Daemon Events`,prop:"events",flexGrow:2,cellTemplate:this.listTpl}],this.serviceColumns=[{name:$localize`Service Events`,prop:"events",flexGrow:5,cellTemplate:this.listTpl}],this.orchService.status().subscribe(t=>{this.hasOrchestrator=t.available,this.showDocPanel=!t.available}),this.columns=this.columns.filter(t=>!this.hiddenColumns.includes(t.prop)),setTimeout(()=>{this.cdRef.detectChanges()},1e3)}ngOnChanges(){E().isUndefined(this.daemonsTable)||this.daemonsTable.reloadData()}ngAfterViewInit(){this.daemonsTableTplsSub=this.daemonsTableTpls.changes.subscribe(t=>{this.daemonsTable=t.first})}ngOnDestroy(){this.daemonsTableTplsSub&&this.daemonsTableTplsSub.unsubscribe(),this.serviceSub&&this.serviceSub.unsubscribe()}getStatusClass(t){return E().get({"-1":"badge-danger",0:"badge-warning",1:"badge-success"},t.status,"badge-dark")}getDaemons(t){let o;if(this.hostname)o=this.hostService.getDaemons(this.hostname);else{if(!this.serviceName)return void(this.daemons=[]);o=this.cephServiceService.getDaemons(this.serviceName)}o.subscribe(i=>{this.daemons=i,this.sortDaemonEvents()},()=>{this.daemons=[],t.error()})}sortDaemonEvents(){this.daemons.forEach(t=>{t.events?.sort((o,i)=>new Date(i.created).getTime()-new Date(o.created).getTime())})}getServices(t){this.serviceSub=this.cephServiceService.list(new h.HttpParams({fromObject:{limit:-1,offset:0}}),this.serviceName).observable.subscribe(o=>{this.services=o},()=>{this.services=[],t.error()})}trackByFn(t,o){return o.created}updateSelection(t){this.selection=t}daemonAction(t){this.daemonService.action(this.selection.first()?.daemon_name,t).pipe((0,u.take)(1)).subscribe({next:o=>{this.notificationService.show(Le._.success,`Daemon ${t} scheduled`,o.body.toString())},error:o=>{this.notificationService.show(Le._.error,"Daemon action failed",o.body.toString())}})}actionDisabled(t){if(this.selection?.hasSelection){const o=this.selection.selected[0];if("mon"===o.daemon_type||"mgr"===o.daemon_type)return!0;switch(t){case"start":if("running"===o.status_desc)return!0;break;case"stop":if("stopped"===o.status_desc)return!0}return!1}return!0}static{this.\u0275fac=function(o){return new(o||n)(e.\u0275\u0275directiveInject(Vt.I),e.\u0275\u0275directiveInject(yo.t),e.\u0275\u0275directiveInject(tn.K),e.\u0275\u0275directiveInject(po.D),e.\u0275\u0275directiveInject(mt.l),e.\u0275\u0275directiveInject(f.Ss),e.\u0275\u0275directiveInject(_.v),e.\u0275\u0275directiveInject(Xi),e.\u0275\u0275directiveInject(Y.J),e.\u0275\u0275directiveInject(e.ChangeDetectorRef))}}static{this.\u0275cmp=e.\u0275\u0275defineComponent({type:n,selectors:[["cd-service-daemon-list"]],viewQuery:function(o,i){if(1&o&&(e.\u0275\u0275viewQuery(rm,7),e.\u0275\u0275viewQuery(lm,7),e.\u0275\u0275viewQuery(_m,7),e.\u0275\u0275viewQuery(cm,5)),2&o){let r;e.\u0275\u0275queryRefresh(r=e.\u0275\u0275loadQuery())&&(i.statusTpl=r.first),e.\u0275\u0275queryRefresh(r=e.\u0275\u0275loadQuery())&&(i.listTpl=r.first),e.\u0275\u0275queryRefresh(r=e.\u0275\u0275loadQuery())&&(i.cpuTpl=r.first),e.\u0275\u0275queryRefresh(r=e.\u0275\u0275loadQuery())&&(i.daemonsTableTpls=r)}},inputs:{serviceName:"serviceName",hostname:"hostname",hiddenColumns:"hiddenColumns",flag:"flag"},features:[e.\u0275\u0275NgOnChangesFeature],decls:12,vars:3,consts:()=>{let t,o;return t=$localize`:␟9e24f9e2d42104ffc01599db4d566d1cc518f9e6␟1419569261746199221:Daemons`,o=$localize`:␟0cb3aa7e9fea1d445a1a9d7797ab17e6ac6fe13b␟3907644935670421963:Service Events`,[["serviceDetailsTpl",""],["statusTpl",""],["listTpl",""],["serviceDaemonDetailsTpl",""],["cpuTpl",""],["nav","ngbNav"],["serviceTable",""],["noEventsAvailable",""],["daemonsTable",""],t,o,[4,"ngIf"],[4,"ngIf","ngIfElse"],[4,"ngTemplateOutlet"],["ngbNav","","cdStatefulTab","service-details",1,"nav-tabs"],["ngbNavItem","details"],["ngbNavLink",""],["ngbNavContent",""],["ngbNavItem","service_events"],[3,"ngbNavOutlet"],["columnMode","flex",3,"data","columns","fetchData",4,"ngIf"],["columnMode","flex",3,"fetchData","data","columns"],[1,"badge",3,"ngClass"],["class","list-group list-group-flush",4,"ngIf","ngIfElse"],[1,"list-group","list-group-flush"],["class","list-group-item",4,"ngFor","ngForOf","ngForTrackBy"],[1,"list-group-item"],[1,"badge","badge-info"],[1,"cds-info-color",3,"cdsIcon","size"],[1,"cds-warning-color",3,"cdsIcon","size"],["selectionType","single","columnMode","flex","identifier","daemon_name",3,"data","columns","fetchData","updateSelection",4,"ngIf"],["selectionType","single","columnMode","flex","identifier","daemon_name",3,"fetchData","updateSelection","data","columns"],["id","service-daemon-list-actions",1,"table-actions",3,"selection","permission","tableActions"],[3,"total","calculatePerc","used","isBinary"]]},template:function(o,i){if(1&o&&e.\u0275\u0275template(0,dm,1,0,"cd-orchestrator-doc-panel",11)(1,pm,2,1,"div",12)(2,Cm,12,1,"ng-template",null,0,e.\u0275\u0275templateRefExtractor)(4,Sm,3,5,"ng-template",null,1,e.\u0275\u0275templateRefExtractor)(6,Rm,3,2,"ng-template",null,2,e.\u0275\u0275templateRefExtractor)(8,Pm,1,1,"ng-template",null,3,e.\u0275\u0275templateRefExtractor)(10,bm,1,4,"ng-template",null,4,e.\u0275\u0275templateRefExtractor),2&o){const r=e.\u0275\u0275reference(3);e.\u0275\u0275property("ngIf",i.showDocPanel),e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf","hostDetails"===i.flag)("ngIfElse",r)}},dependencies:[l.NgClass,l.NgForOf,l.NgIf,l.NgTemplateOutlet,V.NgbNavContent,V.NgbNav,V.NgbNavItem,V.NgbNavLink,V.NgbNavLinkBase,V.NgbNavOutlet,Lt.o,zi,Ke.O,dt.j,yt.B,L.IconDirective,po.D,ss.N],styles:[".fa-info-circle[_ngcontent-%COMP%]{color:#25828e}.fa-exclamation-triangle[_ngcontent-%COMP%]{color:#dc3545}.list-group-item[_ngcontent-%COMP%]{background-color:transparent;border-width:0}"]})}}return n})();function Nm(n,c){if(1&n&&(e.\u0275\u0275elementContainerStart(0),e.\u0275\u0275element(1,"cd-service-daemon-list",1),e.\u0275\u0275elementContainerEnd()),2&n){const t=e.\u0275\u0275nextContext();e.\u0275\u0275advance(),e.\u0275\u0275property("serviceName",t.selection.service_name)}}let Im=(()=>{class n{static{this.\u0275fac=function(o){return new(o||n)}}static{this.\u0275cmp=e.\u0275\u0275defineComponent({type:n,selectors:[["cd-service-details"]],inputs:{permissions:"permissions",selection:"selection"},decls:1,vars:1,consts:[[4,"ngIf"],[3,"serviceName"]],template:function(o,i){1&o&&e.\u0275\u0275template(0,Nm,2,1,"ng-container",0),2&o&&e.\u0275\u0275property("ngIf",i.selection)},dependencies:[l.NgIf,rs]})}}return n})();const Am=["runningTpl"],Dm=["urlTpl"];function ym(n,c){1&n&&e.\u0275\u0275element(0,"cd-orchestrator-doc-panel")}function Lm(n,c){if(1&n&&e.\u0275\u0275element(0,"cd-service-details",9),2&n){const t=e.\u0275\u0275nextContext(2);e.\u0275\u0275property("permissions",t.permissions)("selection",t.expandedRow)}}function $m(n,c){if(1&n){const t=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementContainerStart(0),e.\u0275\u0275elementStart(1,"cd-table",6),e.\u0275\u0275listener("fetchData",function(i){e.\u0275\u0275restoreView(t);const r=e.\u0275\u0275nextContext();return e.\u0275\u0275resetView(r.getServices(i))})("setExpandedRow",function(i){e.\u0275\u0275restoreView(t);const r=e.\u0275\u0275nextContext();return e.\u0275\u0275resetView(r.setExpandedRow(i))})("updateSelection",function(i){e.\u0275\u0275restoreView(t);const r=e.\u0275\u0275nextContext();return e.\u0275\u0275resetView(r.updateSelection(i))}),e.\u0275\u0275element(2,"cd-table-actions",7),e.\u0275\u0275template(3,Lm,1,2,"cd-service-details",8),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementContainerEnd()}if(2&n){const t=e.\u0275\u0275nextContext();e.\u0275\u0275advance(),e.\u0275\u0275property("data",t.services)("columns",t.columns)("autoReload",5e3)("hasDetails",t.hasDetails)("serverSide",!0)("count",t.count),e.\u0275\u0275advance(),e.\u0275\u0275property("permission",t.permissions.hosts)("selection",t.selection)("tableActions",t.tableActions)}}function xm(n,c){if(1&n&&(e.\u0275\u0275namespaceSVG(),e.\u0275\u0275element(0,"svg",12)),2&n){const t=e.\u0275\u0275nextContext(2);e.\u0275\u0275property("cdsIcon",t.icons.warning)("size",t.icons.size16)}}function Um(n,c){if(1&n&&(e.\u0275\u0275elementStart(0,"span",10),e.\u0275\u0275text(1),e.\u0275\u0275elementEnd(),e.\u0275\u0275template(2,xm,1,2,"svg",11)),2&n){const t=c.data.value;e.\u0275\u0275advance(),e.\u0275\u0275textInterpolate2(" ",t.running," / ",t.size," "),e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf",0==t.running||0==t.size)}}function wm(n,c){if(1&n&&(e.\u0275\u0275elementStart(0,"a",15),e.\u0275\u0275text(1),e.\u0275\u0275namespaceSVG(),e.\u0275\u0275element(2,"svg",16),e.\u0275\u0275elementEnd()),2&n){const t=e.\u0275\u0275nextContext(2).data.row,o=e.\u0275\u0275nextContext();e.\u0275\u0275property("href",o.serviceUrls[t.service_type],e.\u0275\u0275sanitizeUrl),e.\u0275\u0275advance(),e.\u0275\u0275textInterpolate1(" ",t.service_name," "),e.\u0275\u0275advance(),e.\u0275\u0275property("cdsIcon",o.icons.launch)("size",o.icons.size16)}}function Gm(n,c){if(1&n&&(e.\u0275\u0275elementStart(0,"a",15),e.\u0275\u0275text(1),e.\u0275\u0275namespaceSVG(),e.\u0275\u0275element(2,"svg",16),e.\u0275\u0275elementEnd()),2&n){const t=e.\u0275\u0275nextContext(2).data.row,o=e.\u0275\u0275nextContext();e.\u0275\u0275property("href",t.service_type,e.\u0275\u0275sanitizeUrl),e.\u0275\u0275advance(),e.\u0275\u0275textInterpolate1(" ",t.service_name," "),e.\u0275\u0275advance(),e.\u0275\u0275property("cdsIcon",o.icons.launch)("size",o.icons.size16)}}function Hm(n,c){if(1&n&&(e.\u0275\u0275elementContainerStart(0),e.\u0275\u0275template(1,wm,3,4,"a",14)(2,Gm,3,4,"ng-template",null,3,e.\u0275\u0275templateRefExtractor),e.\u0275\u0275elementContainerEnd()),2&n){const t=e.\u0275\u0275reference(3),o=e.\u0275\u0275nextContext(2);e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf",!o.isMgmtGateway)("ngIfElse",t)}}function Vm(n,c){if(1&n&&e.\u0275\u0275text(0),2&n){const t=e.\u0275\u0275nextContext().data.row;e.\u0275\u0275textInterpolate(t.service_name)}}function Bm(n,c){if(1&n&&e.\u0275\u0275template(0,Hm,4,2,"ng-container",13)(1,Vm,1,1,"ng-template",null,2,e.\u0275\u0275templateRefExtractor),2&n){const t=c.data.row,o=e.\u0275\u0275reference(2),i=e.\u0275\u0275nextContext();e.\u0275\u0275property("ngIf",i.serviceUrls[t.service_type])("ngIfElse",o)}}const ga="services";let ls=(()=>{class n extends I.D{constructor(t,o,i,r,p,F,D,x,H,X){super(),this.actionLabels=t,this.authStorageService=o,this.modalService=i,this.orchService=r,this.cephServiceService=p,this.relativeDatePipe=F,this.taskWrapperService=D,this.router=x,this.settingsService=H,this.cdsModalService=X,this.hiddenColumns=[],this.hiddenServices=[],this.hasDetails=!0,this.routedModal=!0,this.showDocPanel=!1,this.count=0,this.actionOrchFeatures={create:[$t.SERVICE_CREATE],update:[$t.SERVICE_EDIT],delete:[$t.SERVICE_DELETE]},this.columns=[],this.services=[],this.isLoadingServices=!1,this.selection=new A.y,this.icons=g.FI,this.serviceUrls={grafana:"",prometheus:"",alertmanager:""},this.isMgmtGateway=!1,this.permissions=this.authStorageService.getPermissions(),this.tableActions=[{permission:"create",icon:g.FI.add,click:()=>this.openModal(),name:this.actionLabels.CREATE,canBePrimary:Z=>!Z.hasSelection},{permission:"update",icon:g.FI.edit,click:()=>this.openModal(!0),name:this.actionLabels.EDIT,disable:Z=>this.getDisable("update",Z)},{permission:"delete",icon:g.FI.destroy,click:()=>this.deleteAction(),name:this.actionLabels.DELETE,disable:Z=>this.getDisable("delete",Z)}]}openModal(t=!1){if(this.routedModal)this.router.navigate(t?[ga,{outlets:{modal:[f.Qp.EDIT,this.selection.first().service_type,this.selection.first().service_name]}}]:[ga,{outlets:{modal:[f.Qp.CREATE]}}]);else{let o={};o=t?{serviceName:this.selection.first()?.service_name,serviceType:this.selection?.first()?.service_type,hiddenServices:this.hiddenServices,editing:t}:{hiddenServices:this.hiddenServices,editing:t},this.bsModalRef=this.modalService.show(Bi,o,{size:"lg"})}}ngOnInit(){const t=[{name:$localize`Service`,prop:"service_name",flexGrow:1,cellTemplate:this.urlTpl},{name:$localize`Placement`,prop:"",pipe:new Rd,flexGrow:2},{name:$localize`Running`,prop:"status",flexGrow:1,cellTemplate:this.runningTpl},{name:$localize`Last Refreshed`,prop:"status.last_refresh",pipe:this.relativeDatePipe,flexGrow:1},{name:$localize`Ports`,prop:"status.ports",flexGrow:1,cellTransformation:O.x.map,customTemplateConfig:{undefined:"-","":"-"}}];this.columns=t.filter(o=>!this.hiddenColumns.includes(o.prop)),this.orchService.status().subscribe(o=>{this.orchStatus=o,this.showDocPanel=!o.available}),this.isMgmtGateway||(this.configureServiceUrl("api/grafana/url","grafana"),this.configureServiceUrl("ui-api/prometheus/prometheus-api-host","prometheus"),this.configureServiceUrl("ui-api/prometheus/alertmanager-api-host","alertmanager"))}ngOnChanges(){this.orchStatus?.available&&(this.services=[],this.table.reloadData())}getDisable(t,o){return"delete"===t&&!o?.hasSingleSelection||"update"===t&&["osd","container"].indexOf(this.selection.first()?.service_type)>=0||this.orchService.getTableActionDisableDesc(this.orchStatus,this.actionOrchFeatures[t])}getServices(t){if(this.isLoadingServices)return;this.isLoadingServices=!0;const o=this.cephServiceService.list(t.toParams());o.observable.subscribe(i=>{this.services=i,this.count=o.count,this.services=this.services.filter(r=>("mgmt-gateway"===r.service_type&&r.status.running&&(this.isMgmtGateway=!0),!this.hiddenServices.includes(r.service_name))),this.isLoadingServices=!1},()=>{this.isLoadingServices=!1,this.services=[],t.error()}),this.isMgmtGateway&&!this.services.find(i=>"mgmt-gateway"!==i.service_type&&i.status.running>0)&&(this.isMgmtGateway=!1)}updateSelection(t){this.selection=t}deleteAction(){const t=this.selection.first();this.cdsModalService.show(P.D,{itemDescription:$localize`Service`,itemNames:[t.service_name],actionDescription:"delete",submitActionObservable:()=>this.taskWrapperService.wrapTaskAroundCall({task:new ie.O(`service/${f.Qp.DELETE}`,{service_name:t.service_name}),call:this.cephServiceService.delete(t.service_name)}).pipe((0,u.delay)(5e3))})}configureServiceUrl(t,o){this.settingsService.ifSettingConfigured(t,i=>{this.serviceUrls[o]=i})}static{this.\u0275fac=function(o){return new(o||n)(e.\u0275\u0275directiveInject(f.Ss),e.\u0275\u0275directiveInject(_.v),e.\u0275\u0275directiveInject(qt.B),e.\u0275\u0275directiveInject(tn.K),e.\u0275\u0275directiveInject(yo.t),e.\u0275\u0275directiveInject(po.D),e.\u0275\u0275directiveInject(w.a),e.\u0275\u0275directiveInject(m.Router),e.\u0275\u0275directiveInject(mo.h),e.\u0275\u0275directiveInject(Ge.V))}}static{this.\u0275cmp=e.\u0275\u0275defineComponent({type:n,selectors:[["cd-services"]],viewQuery:function(o,i){if(1&o&&(e.\u0275\u0275viewQuery(Ke.O,7),e.\u0275\u0275viewQuery(Am,7),e.\u0275\u0275viewQuery(Dm,7)),2&o){let r;e.\u0275\u0275queryRefresh(r=e.\u0275\u0275loadQuery())&&(i.table=r.first),e.\u0275\u0275queryRefresh(r=e.\u0275\u0275loadQuery())&&(i.runningTpl=r.first),e.\u0275\u0275queryRefresh(r=e.\u0275\u0275loadQuery())&&(i.urlTpl=r.first)}},inputs:{hostname:"hostname",hiddenColumns:"hiddenColumns",hiddenServices:"hiddenServices",hasDetails:"hasDetails",routedModal:"routedModal"},features:[e.\u0275\u0275ProvidersFeature([{provide:B.E,useValue:new B.E(ga)}]),e.\u0275\u0275InheritDefinitionFeature,e.\u0275\u0275NgOnChangesFeature],decls:7,vars:2,consts:[["runningTpl",""],["urlTpl",""],["noUrl",""],["mgmtGateway",""],[4,"ngIf"],["name","modal"],["identifier","service_name","forceIdentifier","true","columnMode","flex","selectionType","single",3,"fetchData","setExpandedRow","updateSelection","data","columns","autoReload","hasDetails","serverSide","count"],[1,"table-actions",3,"permission","selection","tableActions"],[3,"permissions","selection",4,"cdTableDetail"],[3,"permissions","selection"],["ngbTooltip","Service instances running out of the total number of services requested."],["class","cds-warning-color",3,"cdsIcon","size",4,"ngIf"],[1,"cds-warning-color",3,"cdsIcon","size"],[4,"ngIf","ngIfElse"],["target","_blank",3,"href",4,"ngIf","ngIfElse"],["target","_blank",3,"href"],[1,"cds-info-color",3,"cdsIcon","size"]],template:function(o,i){1&o&&(e.\u0275\u0275template(0,ym,1,0,"cd-orchestrator-doc-panel",4)(1,$m,4,9,"ng-container",4),e.\u0275\u0275element(2,"router-outlet",5),e.\u0275\u0275template(3,Um,3,3,"ng-template",null,0,e.\u0275\u0275templateRefExtractor)(5,Bm,3,2,"ng-template",null,1,e.\u0275\u0275templateRefExtractor)),2&o&&(e.\u0275\u0275property("ngIf",i.showDocPanel),e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf",null==i.orchStatus?null:i.orchStatus.available))},dependencies:[l.NgIf,zi,Ke.O,dt.j,Ct.N,m.RouterOutlet,V.NgbTooltip,L.IconDirective,Im]})}}return n})();var _s=function(n){return n.COST_CAPACITY="cost_capacity",n.THROUGHPUT="throughput_optimized",n.IOPS="iops_optimized",n}(_s||{});let zm=(()=>{class n{constructor(t,o,i,r,p){this.activeModal=t,this.actionLabels=o,this.formBuilder=i,this.osdService=r,this.taskWrapper=p,this.driveGroups=[],this.submitAction=new e.EventEmitter,this.action=o.CREATE,this.createForm()}createForm(){this.formGroup=this.formBuilder.group({})}onSubmit(){const t=E().join(E().map(this.driveGroups,"service_id"),", ");this.taskWrapper.wrapTaskAroundCall({task:new ie.O("osd/"+f.Qp.CREATE,{tracking_id:t}),call:this.osdService.create(this.driveGroups,t)}).subscribe({error:()=>{this.formGroup.setErrors({cdSubmitButton:!0})},complete:()=>{this.submitAction.emit(),this.activeModal.close()}})}static{this.\u0275fac=function(o){return new(o||n)(e.\u0275\u0275directiveInject(V.NgbActiveModal),e.\u0275\u0275directiveInject(f.Ss),e.\u0275\u0275directiveInject(At.$),e.\u0275\u0275directiveInject(It),e.\u0275\u0275directiveInject(w.a))}}static{this.\u0275cmp=e.\u0275\u0275defineComponent({type:n,selectors:[["cd-osd-creation-preview-modal"]],inputs:{driveGroups:"driveGroups"},outputs:{submitAction:"submitAction"},decls:15,vars:9,consts:()=>{let t,o;return t=$localize`:␟4383e9662ea19839c7499b2128d43a195e564317␟6079562771771919783:OSD creation preview`,o=$localize`:␟366225c51e0b00bcb1c55795a0dc5e81c455f84e␟5240877643020092892:DriveGroups`,[["frm","ngForm"],t,o,[3,"modalRef"],[1,"modal-title"],[1,"modal-content"],["novalidate","",3,"formGroup"],[1,"modal-body"],[1,"modal-footer"],[3,"submitActionEvent","form","submitText"]]},template:function(o,i){if(1&o){const r=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"cd-modal",3),e.\u0275\u0275elementContainerStart(1,4),e.\u0275\u0275i18n(2,1),e.\u0275\u0275elementContainerEnd(),e.\u0275\u0275elementContainerStart(3,5),e.\u0275\u0275elementStart(4,"form",6,0)(6,"div",7)(7,"h4"),e.\u0275\u0275i18n(8,2),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(9,"pre"),e.\u0275\u0275text(10),e.\u0275\u0275pipe(11,"json"),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(12,"div",8)(13,"cd-form-button-panel",9),e.\u0275\u0275pipe(14,"titlecase"),e.\u0275\u0275listener("submitActionEvent",function(){return e.\u0275\u0275restoreView(r),e.\u0275\u0275resetView(i.onSubmit())}),e.\u0275\u0275elementEnd()()(),e.\u0275\u0275elementContainerEnd(),e.\u0275\u0275elementEnd()}2&o&&(e.\u0275\u0275property("modalRef",i.activeModal),e.\u0275\u0275advance(4),e.\u0275\u0275property("formGroup",i.formGroup),e.\u0275\u0275advance(6),e.\u0275\u0275textInterpolate(e.\u0275\u0275pipeBind1(11,5,i.driveGroups)),e.\u0275\u0275advance(3),e.\u0275\u0275property("form",i.formGroup)("submitText",e.\u0275\u0275pipeBind1(14,7,i.action)))},dependencies:[xt.z,Q.e,ze.E,T.\u0275NgNoValidate,T.NgControlStatusGroup,T.FormGroupDirective,l.JsonPipe,l.TitleCasePipe]})}}return n})(),Ca=(()=>{class n{constructor(t,o,i,r,p,F){this.authStorageService=t,this.dimlessBinary=o,this.modalService=i,this.notificationService=r,this.orchService=p,this.hostService=F,this.devices=[],this.showAvailDeviceOnly=!1,this.hiddenColumns=[],this.hostname="",this.diskType="",this.filterColumns=["hostname","human_readable_type","available","sys_api.vendor","sys_api.model","sys_api.size"],this.selectionType=void 0,this.filterChange=new e.EventEmitter,this.fetchInventory=new e.EventEmitter,this.icons=g.FI,this.columns=[],this.selection=new A.y,this.orchStatus=void 0,this.actionOrchFeatures={identify:[$t.DEVICE_BLINK_LIGHT]}}ngOnInit(){this.permission=this.authStorageService.getPermissions().osd,this.tableActions=[{permission:"update",icon:g.FI.show,click:()=>this.identifyDevice(),name:$localize`Identify`,disable:o=>this.getDisable("identify",o),canBePrimary:o=>!o.hasSingleSelection,visible:()=>E().isString(this.selectionType)}];const t=[{name:$localize`Hostname`,prop:"hostname",flexGrow:1},{name:$localize`Device path`,prop:"path",flexGrow:1},{name:$localize`Type`,prop:"human_readable_type",flexGrow:1,cellTransformation:O.x.badge,customTemplateConfig:{map:{hdd:{value:"HDD",class:"badge-hdd"},ssd:{value:"SSD",class:"badge-ssd"}}}},{name:$localize`Available`,prop:"available",flexGrow:1,cellClass:"text-center",cellTransformation:O.x.checkIcon},{name:$localize`Vendor`,prop:"sys_api.vendor",flexGrow:1},{name:$localize`Model`,prop:"sys_api.model",flexGrow:1},{name:$localize`Size`,prop:"sys_api.size",flexGrow:1,pipe:this.dimlessBinary},{name:$localize`OSDs`,prop:"osd_ids",flexGrow:1,cellTransformation:O.x.badge,customTemplateConfig:{class:"badge-dark",prefix:"osd."}}];this.columns=t.filter(o=>!this.hiddenColumns.includes(o.prop)),E().forEach(this.filterColumns,o=>{const i=E().find(this.columns,{prop:o});i&&(i.filterable=!0),"human_readable_type"===i?.prop&&"ssd"===this.diskType&&(i.filterInitValue=this.diskType),"hostname"===i?.prop&&this.hostname&&(i.filterInitValue=this.hostname)}),this.fetchInventory.observers.length>0&&(this.fetchInventorySub=this.table.fetchData.subscribe(()=>{this.fetchInventory.emit()}))}getDevices(){this.showAvailDeviceOnly?this.hostService.inventoryDeviceList().subscribe(t=>{this.devices=E().filter(t,"available"),this.devices=[...this.devices]},()=>{this.devices=[]}):this.devices=[...this.devices]}ngOnDestroy(){this.fetchInventorySub&&this.fetchInventorySub.unsubscribe()}onColumnFiltersChanged(t){this.filterChange.emit(t)}getDisable(t,o){return!o.hasSingleSelection||this.orchService.getTableActionDisableDesc(this.orchStatus,this.actionOrchFeatures[t])}updateSelection(t){this.selection=t}identifyDevice(){const t=this.selection.first(),o=t.hostname,i=t.path||t.device_id;this.modalService.show(Qt.b,{titleText:$localize`Identify device ${i}`,message:$localize`Please enter the duration how long to blink the LED.`,fields:[{type:"select",name:"duration",value:300,required:!0,typeConfig:{options:[{text:$localize`1 minute`,value:60},{text:$localize`2 minutes`,value:120},{text:$localize`5 minutes`,value:300},{text:$localize`10 minutes`,value:600},{text:$localize`15 minutes`,value:900}]}}],submitButtonText:$localize`Execute`,onSubmit:r=>{this.hostService.identifyDevice(o,i,r.duration).subscribe(()=>{this.notificationService.show(Le._.success,$localize`Identifying '${i}' started on host '${o}'`)})}})}static{this.\u0275fac=function(o){return new(o||n)(e.\u0275\u0275directiveInject(_.v),e.\u0275\u0275directiveInject(mt.l),e.\u0275\u0275directiveInject(Ge.V),e.\u0275\u0275directiveInject(Y.J),e.\u0275\u0275directiveInject(tn.K),e.\u0275\u0275directiveInject(Vt.I))}}static{this.\u0275cmp=e.\u0275\u0275defineComponent({type:n,selectors:[["cd-inventory-devices"]],viewQuery:function(o,i){if(1&o&&e.\u0275\u0275viewQuery(Ke.O,7),2&o){let r;e.\u0275\u0275queryRefresh(r=e.\u0275\u0275loadQuery())&&(i.table=r.first)}},inputs:{devices:"devices",showAvailDeviceOnly:"showAvailDeviceOnly",hiddenColumns:"hiddenColumns",hostname:"hostname",diskType:"diskType",filterColumns:"filterColumns",selectionType:"selectionType",orchStatus:"orchStatus"},outputs:{filterChange:"filterChange",fetchInventory:"fetchInventory"},decls:2,vars:8,consts:[["identifier","uid","columnMode","flex",3,"fetchData","updateSelection","columnFiltersChanged","data","columns","forceIdentifier","selectionType","searchField"],[1,"table-actions",3,"permission","selection","tableActions"]],template:function(o,i){1&o&&(e.\u0275\u0275elementStart(0,"cd-table",0),e.\u0275\u0275listener("fetchData",function(){return i.getDevices()})("updateSelection",function(p){return i.updateSelection(p)})("columnFiltersChanged",function(p){return i.onColumnFiltersChanged(p)}),e.\u0275\u0275element(1,"cd-table-actions",1),e.\u0275\u0275elementEnd()),2&o&&(e.\u0275\u0275property("data",i.devices)("columns",i.columns)("forceIdentifier",!0)("selectionType",i.selectionType)("searchField",!1),e.\u0275\u0275advance(),e.\u0275\u0275property("permission",i.permission)("selection",i.selection)("tableActions",i.tableActions))},dependencies:[Ke.O,dt.j],styles:[".filter[_ngcontent-%COMP%]{padding-right:8px}.fa-stack[_ngcontent-%COMP%]{font-size:.79rem}.fa-stack[_ngcontent-%COMP%]   .fa-stack-1x[_ngcontent-%COMP%]{margin-left:8px;margin-top:5px}"]})}}return n})();const Xm=["inventoryDevices"],km=()=>["available","osd_ids"];function jm(n,c){if(1&n&&(e.\u0275\u0275elementStart(0,"span",17),e.\u0275\u0275text(1),e.\u0275\u0275elementEnd()),2&n){const t=c.$implicit;e.\u0275\u0275advance(),e.\u0275\u0275textInterpolate1(" ",t," ")}}function Wm(n,c){if(1&n&&(e.\u0275\u0275elementStart(0,"cd-alert-panel",15),e.\u0275\u0275elementContainerStart(1),e.\u0275\u0275i18n(2,3),e.\u0275\u0275elementContainerEnd(),e.\u0275\u0275template(3,jm,2,1,"span",16),e.\u0275\u0275elementEnd()),2&n){const t=e.\u0275\u0275nextContext();e.\u0275\u0275property("showTitle",!1),e.\u0275\u0275advance(3),e.\u0275\u0275property("ngForOf",t.requiredFilters)}}function Km(n,c){if(1&n&&(e.\u0275\u0275elementStart(0,"div")(1,"p",18)(2,"span"),e.\u0275\u0275i18n(3,4),e.\u0275\u0275pipe(4,"dimlessBinary"),e.\u0275\u0275elementEnd()()()),2&n){const t=e.\u0275\u0275nextContext();e.\u0275\u0275advance(4),e.\u0275\u0275i18nExp(t.filteredDevices.length)(e.\u0275\u0275pipeBind1(4,2,t.capacity)),e.\u0275\u0275i18nApply(3)}}let Qm=(()=>{class n{constructor(t,o,i,r,p){this.formBuilder=t,this.cdRef=o,this.activeModal=i,this.actionLabels=r,this.wizardStepService=p,this.submitAction=new e.EventEmitter,this.icons=g.FI,this.filterColumns=[],this.devices=[],this.filteredDevices=[],this.capacity=0,this.canSubmit=!1,this.requiredFilters=[],this.action=r.ADD,this.createForm()}ngAfterViewInit(){const t=E().filter(this.inventoryDevices.columns,o=>this.filterColumns.includes(o.prop)&&"hostname"!==o.prop);setTimeout(()=>{this.requiredFilters=E().map(t,"name")},0)}createForm(){this.formGroup=this.formBuilder.group({})}onFilterChange(t){if(this.capacity=0,this.canSubmit=!1,E().isEmpty(t.filters))this.filteredDevices=[],this.event=void 0;else{const o=t.filters.filter(i=>"hostname"!==i.prop);this.canSubmit=!E().isEmpty(o),this.filteredDevices=t.data,this.capacity=E().sumBy(this.filteredDevices,"sys_api.size"),this.event=t}this.cdRef.detectChanges()}onSubmit(){this.submitAction.emit(this.event),this.activeModal.close()}static{this.\u0275fac=function(o){return new(o||n)(e.\u0275\u0275directiveInject(At.$),e.\u0275\u0275directiveInject(e.ChangeDetectorRef),e.\u0275\u0275directiveInject(V.NgbActiveModal),e.\u0275\u0275directiveInject(f.Ss),e.\u0275\u0275directiveInject(pa.m))}}static{this.\u0275cmp=e.\u0275\u0275defineComponent({type:n,selectors:[["cd-osd-devices-selection-modal"]],viewQuery:function(o,i){if(1&o&&e.\u0275\u0275viewQuery(Xm,5),2&o){let r;e.\u0275\u0275queryRefresh(r=e.\u0275\u0275loadQuery())&&(i.inventoryDevices=r.first)}},outputs:{submitAction:"submitAction"},decls:14,vars:16,consts:()=>{let t,o,i;return t=$localize`:␟8edc89137d0d8c5667a2f03230beafae45e58429␟6940517647806021958:${"\ufffd0\ufffd"}:INTERPOLATION: devices`,o=$localize`:␟eba28e1805b18f7c8ae2e4bc15dcf063b10b3822␟8660075096431095478:At least one of these filters must be applied in order to proceed:`,i=$localize`:␟93389aa2fe2bea50bf89554ee51b28f87ee2fb50␟7112734180309214773:Number of devices: ${"\ufffd0\ufffd"}:INTERPOLATION:. Raw capacity: ${"\ufffd1\ufffd"}:INTERPOLATION_1:.`,[["frm","ngForm"],["inventoryDevices",""],t,o,i,[3,"modalRef"],[1,"modal-title"],[1,"modal-content"],["novalidate","",3,"formGroup"],[1,"modal-body"],["type","warning","size","slim",3,"showTitle",4,"ngIf"],[3,"filterChange","devices","filterColumns","hostname","diskType","hiddenColumns"],[4,"ngIf"],[1,"modal-footer"],[3,"submitActionEvent","form","disabled","submitText"],["type","warning","size","slim",3,"showTitle"],["class","badge badge-dark ms-2",4,"ngFor","ngForOf"],[1,"badge","badge-dark","ms-2"],[1,"text-center"]]},template:function(o,i){if(1&o){const r=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"cd-modal",5),e.\u0275\u0275elementContainerStart(1,6),e.\u0275\u0275i18n(2,2),e.\u0275\u0275elementContainerEnd(),e.\u0275\u0275elementContainerStart(3,7),e.\u0275\u0275elementStart(4,"form",8,0)(6,"div",9),e.\u0275\u0275template(7,Wm,4,2,"cd-alert-panel",10),e.\u0275\u0275elementStart(8,"cd-inventory-devices",11,1),e.\u0275\u0275listener("filterChange",function(F){return e.\u0275\u0275restoreView(r),e.\u0275\u0275resetView(i.onFilterChange(F))}),e.\u0275\u0275elementEnd(),e.\u0275\u0275template(10,Km,5,4,"div",12),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(11,"div",13)(12,"cd-form-button-panel",14),e.\u0275\u0275pipe(13,"titlecase"),e.\u0275\u0275listener("submitActionEvent",function(){return e.\u0275\u0275restoreView(r),e.\u0275\u0275resetView(i.onSubmit())}),e.\u0275\u0275elementEnd()()(),e.\u0275\u0275elementContainerEnd(),e.\u0275\u0275elementEnd()}2&o&&(e.\u0275\u0275property("modalRef",i.activeModal),e.\u0275\u0275advance(2),e.\u0275\u0275i18nExp(i.deviceType),e.\u0275\u0275i18nApply(2),e.\u0275\u0275advance(2),e.\u0275\u0275property("formGroup",i.formGroup),e.\u0275\u0275advance(3),e.\u0275\u0275property("ngIf",!i.canSubmit),e.\u0275\u0275advance(),e.\u0275\u0275property("devices",i.devices)("filterColumns",i.filterColumns)("hostname",i.hostname)("diskType",i.diskType)("hiddenColumns",e.\u0275\u0275pureFunction0(15,km)),e.\u0275\u0275advance(2),e.\u0275\u0275property("ngIf",i.canSubmit),e.\u0275\u0275advance(2),e.\u0275\u0275property("form",i.formGroup)("disabled",!i.canSubmit||0===i.filteredDevices.length)("submitText",e.\u0275\u0275pipeBind1(13,13,i.action)))},dependencies:[l.NgForOf,l.NgIf,xt.z,it.m,Q.e,ze.E,T.\u0275NgNoValidate,T.NgControlStatusGroup,T.FormGroupDirective,Ca,l.TitleCasePipe,mt.l]})}}return n})();const Ym=()=>["available","osd_ids"],Jm=()=>[];function Zm(n,c){1&n&&(e.\u0275\u0275elementStart(0,"span"),e.\u0275\u0275i18n(1,2),e.\u0275\u0275elementEnd())}function qm(n,c){1&n&&(e.\u0275\u0275elementStart(0,"span"),e.\u0275\u0275i18n(1,3),e.\u0275\u0275elementEnd())}function e1(n,c){1&n&&(e.\u0275\u0275elementStart(0,"span"),e.\u0275\u0275i18n(1,4),e.\u0275\u0275elementEnd())}function t1(n,c){if(1&n){const t=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementContainerStart(0),e.\u0275\u0275elementStart(1,"button",13),e.\u0275\u0275listener("click",function(){e.\u0275\u0275restoreView(t);const i=e.\u0275\u0275nextContext();return e.\u0275\u0275resetView(i.showSelectionModal())}),e.\u0275\u0275namespaceSVG(),e.\u0275\u0275element(2,"svg",14),e.\u0275\u0275namespaceHTML(),e.\u0275\u0275elementContainerStart(3),e.\u0275\u0275i18n(4,5),e.\u0275\u0275elementContainerEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementContainerEnd()}if(2&n){const t=e.\u0275\u0275nextContext();e.\u0275\u0275advance(),e.\u0275\u0275property("title",t.addButtonTooltip)("disabled",0===t.availDevices.length||!t.canSelect||t.expansionCanSelect),e.\u0275\u0275advance(),e.\u0275\u0275property("cdsIcon",t.icons.add)("size",t.icons.size16)}}function n1(n,c){if(1&n&&(e.\u0275\u0275elementStart(0,"span")(1,"span",20),e.\u0275\u0275text(2),e.\u0275\u0275elementEnd()()),2&n){const t=c.$implicit;e.\u0275\u0275advance(2),e.\u0275\u0275textInterpolate2("",t.name,": ",t.value.formatted,"")}}function o1(n,c){if(1&n&&(e.\u0275\u0275elementStart(0,"div",21)(1,"span"),e.\u0275\u0275i18n(2,7),e.\u0275\u0275pipe(3,"dimlessBinary"),e.\u0275\u0275elementEnd()()),2&n){const t=e.\u0275\u0275nextContext(2);e.\u0275\u0275advance(3),e.\u0275\u0275i18nExp(e.\u0275\u0275pipeBind1(3,1,t.capacity)),e.\u0275\u0275i18nApply(2)}}function i1(n,c){if(1&n){const t=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"div",15),e.\u0275\u0275template(1,n1,3,2,"span",16),e.\u0275\u0275elementStart(2,"a",17),e.\u0275\u0275listener("click",function(){return e.\u0275\u0275restoreView(t),e.\u0275\u0275nextContext().clearDevices(),e.\u0275\u0275resetView(!1)}),e.\u0275\u0275namespaceSVG(),e.\u0275\u0275element(3,"svg",14),e.\u0275\u0275namespaceHTML(),e.\u0275\u0275elementContainerStart(4),e.\u0275\u0275i18n(5,6),e.\u0275\u0275elementContainerEnd(),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(6,"div"),e.\u0275\u0275element(7,"cd-inventory-devices",18),e.\u0275\u0275elementEnd(),e.\u0275\u0275template(8,o1,4,3,"div",19)}if(2&n){const t=e.\u0275\u0275nextContext();e.\u0275\u0275advance(),e.\u0275\u0275property("ngForOf",t.appliedFilters),e.\u0275\u0275advance(2),e.\u0275\u0275property("cdsIcon",t.icons.clearFilters)("size",t.icons.size16),e.\u0275\u0275advance(4),e.\u0275\u0275property("devices",t.devices)("hiddenColumns",e.\u0275\u0275pureFunction0(7,Ym))("filterColumns",e.\u0275\u0275pureFunction0(8,Jm)),e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf","data"===t.type)}}let a1=(()=>{class n{constructor(t,o,i){this.modalService=t,this.osdService=o,this.router=i,this.selected=new e.EventEmitter,this.cleared=new e.EventEmitter,this.icons=g.FI,this.devices=[],this.capacity=0,this.appliedFilters=new Array,this.expansionCanSelect=!1,this.tooltips={noAvailDevices:$localize`No available devices`,addPrimaryFirst:$localize`Please add primary devices first`,addByFilters:$localize`Add devices by using filters`},this.isOsdPage=this.router.url.includes("/osd")}ngOnInit(){this.isOsdPage||(this.devices=this.osdService?.osdDevices[this.type]?this.osdService.osdDevices[this.type]:[],this.capacity=E().sumBy(this.devices,"sys_api.size"),this.expansionCanSelect=!!this.osdService?.osdDevices&&this.osdService?.osdDevices.disableSelect),this.updateAddButtonTooltip()}ngOnChanges(){this.updateAddButtonTooltip()}showSelectionModal(){this.modalService.show(Qm,{hostname:this.hostname,deviceType:this.name,diskType:"Primary"===this.name?"hdd":"ssd",devices:this.availDevices,filterColumns:["hostname","human_readable_type","sys_api.vendor","sys_api.model","sys_api.size"]},{size:"xl"}).componentInstance.submitAction.subscribe(p=>{this.devices=p.data,this.capacity=E().sumBy(this.devices,"sys_api.size"),this.appliedFilters=p.filters;const F=E().assign({type:this.type},p);this.isOsdPage||(this.osdService.osdDevices[this.type]=this.devices,this.osdService.osdDevices.disableSelect=this.canSelect||this.devices.length===this.availDevices.length,this.osdService.osdDevices[this.type].capacity=this.capacity),this.selected.emit(F)})}updateAddButtonTooltip(){this.addButtonTooltip="data"===this.type&&0===this.availDevices.length?this.tooltips.noAvailDevices:this.canSelect?0===this.availDevices.length?this.tooltips.noAvailDevices:this.tooltips.addByFilters:this.tooltips.addPrimaryFirst}clearDevices(){this.isOsdPage||(this.expansionCanSelect=!1,this.osdService.osdDevices.disableSelect=!1,this.osdService.osdDevices=[]);const t={type:this.type,clearedDevices:[...this.devices]};this.devices=[],this.cleared.emit(t)}static{this.\u0275fac=function(o){return new(o||n)(e.\u0275\u0275directiveInject(qt.B),e.\u0275\u0275directiveInject(It),e.\u0275\u0275directiveInject(m.Router))}}static{this.\u0275cmp=e.\u0275\u0275defineComponent({type:n,selectors:[["cd-osd-devices-selection-groups"]],inputs:{type:"type",name:"name",hostname:"hostname",availDevices:"availDevices",canSelect:"canSelect"},outputs:{selected:"selected",cleared:"cleared"},features:[e.\u0275\u0275NgOnChangesFeature],decls:12,vars:6,consts:()=>{let t,o,i,r,p,F,D;return t=$localize`:␟ccb4f84edc0b4e76415bb3f9b73d725b06683af3␟3255654659214623812:${"\ufffd0\ufffd"}:INTERPOLATION: devices`,o=$localize`:␟60cb3d01e5ddf266ecb4271007a1c3d0f3efdc22␟5163131577317458158:The primary storage devices. These devices contain all OSD data.`,i=$localize`:␟b432e04886d0d1fd84f740477383051f85addcf2␟767820422593095690:Write-Ahead-Log devices. These devices are used for BlueStore’s internal journal. It is only useful to use a WAL device if the device is faster than the primary device (e.g. NVME devices or SSDs). If there is only a small amount of fast storage available (e.g., less than a gigabyte), we recommend using it as a WAL device.`,r=$localize`:␟b87e181ab9e8393aa5ed759dd3d53836e32c8ffe␟4555212462061875010:DB devices can be used for storing BlueStore’s internal metadata. It is only helpful to provision a DB device if it is faster than the primary device (e.g. NVME devices or SSD).`,p=$localize`:␟f6755cff4957d5c3c89bafce5651f1b6fa2b1fd9␟3249513483374643425:Add`,F=$localize`:␟99ee4faa69cd2ea8e3678c1f557c0ff1f05aae46␟8700121026680200191:Clear`,D=$localize`:␟7e0fd3c7af0630f93befa6234a693a32a61084e0␟6923249034352347568:Raw capacity: ${"\ufffd0\ufffd"}:INTERPOLATION:`,[["blockClearDevices",""],t,o,i,r,p,F,D,[1,"form-group","row"],["for","createDeleteButton",1,"cd-col-form-label"],[4,"ngIf"],[1,"cd-col-form-input"],[4,"ngIf","ngIfElse"],["type","button","data-toggle","tooltip",1,"btn","btn-light",3,"click","title","disabled"],[3,"cdsIcon","size"],[1,"pb-2","my-2","border-bottom"],[4,"ngFor","ngForOf"],["href","",1,"tc_clearSelections",3,"click"],[3,"devices","hiddenColumns","filterColumns"],["class","float-end",4,"ngIf"],[1,"badge","badge-dark","me-2"],[1,"float-end"]]},template:function(o,i){if(1&o&&(e.\u0275\u0275elementStart(0,"div",8)(1,"label",9),e.\u0275\u0275elementContainerStart(2),e.\u0275\u0275i18n(3,1),e.\u0275\u0275elementContainerEnd(),e.\u0275\u0275elementStart(4,"cd-helper"),e.\u0275\u0275template(5,Zm,2,0,"span",10)(6,qm,2,0,"span",10)(7,e1,2,0,"span",10),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(8,"div",11),e.\u0275\u0275template(9,t1,5,4,"ng-container",12)(10,i1,9,9,"ng-template",null,0,e.\u0275\u0275templateRefExtractor),e.\u0275\u0275elementEnd()()),2&o){const r=e.\u0275\u0275reference(11);e.\u0275\u0275advance(3),e.\u0275\u0275i18nExp(i.name),e.\u0275\u0275i18nApply(3),e.\u0275\u0275advance(2),e.\u0275\u0275property("ngIf","data"===i.type),e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf","wal"===i.type),e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf","db"===i.type),e.\u0275\u0275advance(2),e.\u0275\u0275property("ngIf",0===i.devices.length)("ngIfElse",r)}},dependencies:[l.NgForOf,l.NgIf,b.m,De.S,xe.C,L.IconDirective,Ca,mt.l],styles:[".tc_clearSelections[_ngcontent-%COMP%]{text-decoration:none}"]})}}return n})();const s1=["dataDeviceSelectionGroups"],r1=["walDeviceSelectionGroups"],l1=["dbDeviceSelectionGroups"],_1=["previewButtonPanel"],cs=n=>({collapsed:n}),ds=n=>({show:n});function c1(n,c){1&n&&e.\u0275\u0275element(0,"cd-orchestrator-doc-panel")}function d1(n,c){if(1&n&&(e.\u0275\u0275elementStart(0,"div",45),e.\u0275\u0275i18n(1,9),e.\u0275\u0275pipe(2,"titlecase"),e.\u0275\u0275pipe(3,"upperFirst"),e.\u0275\u0275elementEnd()),2&n){const t=e.\u0275\u0275nextContext(2);e.\u0275\u0275advance(3),e.\u0275\u0275i18nExp(e.\u0275\u0275pipeBind1(2,2,t.action))(e.\u0275\u0275pipeBind1(3,4,t.resource)),e.\u0275\u0275i18nApply(1)}}function u1(n,c){1&n&&(e.\u0275\u0275elementStart(0,"cd-alert-panel",46),e.\u0275\u0275i18n(1,10),e.\u0275\u0275elementEnd())}function p1(n,c){if(1&n){const t=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"div",47)(1,"div",48)(2,"input",49),e.\u0275\u0275listener("change",function(){e.\u0275\u0275restoreView(t);const i=e.\u0275\u0275nextContext(2);return e.\u0275\u0275resetView(i.emitDeploymentSelection())}),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(3,"label",50),e.\u0275\u0275i18nStart(4,11),e.\u0275\u0275elementStart(5,"cd-helper"),e.\u0275\u0275element(6,"span"),e.\u0275\u0275elementEnd(),e.\u0275\u0275i18nEnd(),e.\u0275\u0275elementEnd()()()}if(2&n){const t=c.$implicit,o=e.\u0275\u0275nextContext(2);e.\u0275\u0275advance(2),e.\u0275\u0275property("id",t)("value",t),e.\u0275\u0275attribute("disabled",null==o.deploymentOptions||!o.deploymentOptions.options[t].available||null),e.\u0275\u0275advance(),e.\u0275\u0275property("id","label_"+t)("for",t),e.\u0275\u0275advance(3),e.\u0275\u0275i18nExp(null==o.deploymentOptions?null:o.deploymentOptions.options[t].title)((null==o.deploymentOptions?null:o.deploymentOptions.recommended_option)===t?"(Recommended)":"")(null==o.deploymentOptions?null:o.deploymentOptions.options[t].desc),e.\u0275\u0275i18nApply(4)}}function m1(n,c){1&n&&(e.\u0275\u0275elementStart(0,"span",56),e.\u0275\u0275i18n(1,15),e.\u0275\u0275elementEnd())}function f1(n,c){if(1&n&&(e.\u0275\u0275elementStart(0,"div",51)(1,"label",52),e.\u0275\u0275elementContainerStart(2),e.\u0275\u0275i18n(3,12),e.\u0275\u0275elementContainerEnd(),e.\u0275\u0275elementStart(4,"cd-helper")(5,"span"),e.\u0275\u0275i18n(6,13),e.\u0275\u0275elementEnd(),e.\u0275\u0275element(7,"br"),e.\u0275\u0275elementStart(8,"span"),e.\u0275\u0275i18n(9,14),e.\u0275\u0275elementEnd()()(),e.\u0275\u0275elementStart(10,"div",53),e.\u0275\u0275element(11,"input",54),e.\u0275\u0275template(12,m1,2,0,"span",55),e.\u0275\u0275elementEnd()()),2&n){e.\u0275\u0275nextContext();const t=e.\u0275\u0275reference(4),o=e.\u0275\u0275nextContext();e.\u0275\u0275advance(12),e.\u0275\u0275property("ngIf",o.form.showError("walSlots",t,"min"))}}function E1(n,c){1&n&&(e.\u0275\u0275elementStart(0,"span",56),e.\u0275\u0275i18n(1,19),e.\u0275\u0275elementEnd())}function g1(n,c){if(1&n&&(e.\u0275\u0275elementStart(0,"div",51)(1,"label",57),e.\u0275\u0275elementContainerStart(2),e.\u0275\u0275i18n(3,16),e.\u0275\u0275elementContainerEnd(),e.\u0275\u0275elementStart(4,"cd-helper")(5,"span"),e.\u0275\u0275i18n(6,17),e.\u0275\u0275elementEnd(),e.\u0275\u0275element(7,"br"),e.\u0275\u0275elementStart(8,"span"),e.\u0275\u0275i18n(9,18),e.\u0275\u0275elementEnd()()(),e.\u0275\u0275elementStart(10,"div",53),e.\u0275\u0275element(11,"input",58),e.\u0275\u0275template(12,E1,2,0,"span",55),e.\u0275\u0275elementEnd()()),2&n){e.\u0275\u0275nextContext();const t=e.\u0275\u0275reference(4),o=e.\u0275\u0275nextContext();e.\u0275\u0275advance(12),e.\u0275\u0275property("ngIf",o.form.showError("dbSlots",t,"min"))}}function C1(n,c){if(1&n){const t=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"div",59)(1,"input",60),e.\u0275\u0275listener("change",function(){e.\u0275\u0275restoreView(t);const i=e.\u0275\u0275nextContext(2);return e.\u0275\u0275resetView(i.emitDeploymentSelection())}),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(2,"label",61),e.\u0275\u0275text(3),e.\u0275\u0275elementEnd()()}if(2&n){const t=c.$implicit;e.\u0275\u0275advance(),e.\u0275\u0275propertyInterpolate("id",t.key),e.\u0275\u0275propertyInterpolate("name",t.key),e.\u0275\u0275propertyInterpolate("formControlName",t.key),e.\u0275\u0275advance(),e.\u0275\u0275propertyInterpolate("for",t.key),e.\u0275\u0275advance(),e.\u0275\u0275textInterpolate(t.desc)}}function S1(n,c){if(1&n){const t=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"div",62)(1,"cd-form-button-panel",63,4),e.\u0275\u0275listener("submitActionEvent",function(){e.\u0275\u0275restoreView(t);const i=e.\u0275\u0275nextContext(2);return e.\u0275\u0275resetView(i.submit())}),e.\u0275\u0275elementEnd()()}if(2&n){e.\u0275\u0275nextContext();const t=e.\u0275\u0275reference(23),o=e.\u0275\u0275nextContext();e.\u0275\u0275advance(),e.\u0275\u0275property("form",o.form)("disabled",0===t.devices.length&&!o.simpleDeployment)("submitText",o.simpleDeployment?"Create OSDs":o.actionLabels.PREVIEW)}}function h1(n,c){if(1&n){const t=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"div",22),e.\u0275\u0275template(1,d1,4,6,"div",23),e.\u0275\u0275elementStart(2,"div",24)(3,"form",25,0),e.\u0275\u0275template(5,u1,2,0,"cd-alert-panel",26),e.\u0275\u0275elementStart(6,"div",27)(7,"div",28)(8,"h2",29)(9,"button",30),e.\u0275\u0275listener("click",function(){e.\u0275\u0275restoreView(t);const i=e.\u0275\u0275nextContext();return e.\u0275\u0275resetView(i.emitDeploymentMode())}),e.\u0275\u0275i18n(10,5),e.\u0275\u0275elementEnd()()(),e.\u0275\u0275elementStart(11,"div",31)(12,"div",32),e.\u0275\u0275template(13,p1,7,8,"div",33),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(14,"div",28)(15,"h2",29)(16,"button",34),e.\u0275\u0275listener("click",function(){e.\u0275\u0275restoreView(t);const i=e.\u0275\u0275nextContext();return e.\u0275\u0275resetView(i.emitDeploymentMode())}),e.\u0275\u0275i18n(17,6),e.\u0275\u0275elementEnd()()(),e.\u0275\u0275elementStart(18,"div",31)(19,"div",32)(20,"div",35)(21,"fieldset")(22,"cd-osd-devices-selection-groups",36,1),e.\u0275\u0275listener("selected",function(i){e.\u0275\u0275restoreView(t);const r=e.\u0275\u0275nextContext();return e.\u0275\u0275resetView(r.onDevicesSelected(i))})("cleared",function(i){e.\u0275\u0275restoreView(t);const r=e.\u0275\u0275nextContext();return e.\u0275\u0275resetView(r.onDevicesCleared(i))}),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(24,"fieldset")(25,"legend"),e.\u0275\u0275i18n(26,7),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(27,"cd-osd-devices-selection-groups",37,2),e.\u0275\u0275listener("selected",function(i){e.\u0275\u0275restoreView(t);const r=e.\u0275\u0275nextContext();return e.\u0275\u0275resetView(r.onDevicesSelected(i))})("cleared",function(i){e.\u0275\u0275restoreView(t);const r=e.\u0275\u0275nextContext();return e.\u0275\u0275resetView(r.onDevicesCleared(i))}),e.\u0275\u0275elementEnd(),e.\u0275\u0275template(29,f1,13,1,"div",38),e.\u0275\u0275elementStart(30,"cd-osd-devices-selection-groups",39,3),e.\u0275\u0275listener("selected",function(i){e.\u0275\u0275restoreView(t);const r=e.\u0275\u0275nextContext();return e.\u0275\u0275resetView(r.onDevicesSelected(i))})("cleared",function(i){e.\u0275\u0275restoreView(t);const r=e.\u0275\u0275nextContext();return e.\u0275\u0275resetView(r.onDevicesCleared(i))}),e.\u0275\u0275elementEnd(),e.\u0275\u0275template(32,g1,13,1,"div",38),e.\u0275\u0275elementEnd()()()(),e.\u0275\u0275elementStart(33,"div",28)(34,"h2",29)(35,"button",40),e.\u0275\u0275i18n(36,8),e.\u0275\u0275elementEnd()()(),e.\u0275\u0275elementStart(37,"div",41)(38,"div",32)(39,"div",42),e.\u0275\u0275template(40,C1,4,5,"div",43),e.\u0275\u0275elementEnd()()()()()(),e.\u0275\u0275template(41,S1,3,3,"div",44),e.\u0275\u0275elementEnd()}if(2&n){const t=e.\u0275\u0275reference(23),o=e.\u0275\u0275reference(28),i=e.\u0275\u0275reference(31),r=e.\u0275\u0275nextContext();e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf",!r.hideTitle),e.\u0275\u0275advance(2),e.\u0275\u0275property("formGroup",r.form),e.\u0275\u0275advance(2),e.\u0275\u0275property("ngIf",!(null!=r.deploymentOptions&&r.deploymentOptions.recommended_option)),e.\u0275\u0275advance(4),e.\u0275\u0275property("ngClass",e.\u0275\u0275pureFunction1(20,cs,!r.simpleDeployment)),e.\u0275\u0275advance(2),e.\u0275\u0275property("ngClass",e.\u0275\u0275pureFunction1(22,ds,r.simpleDeployment)),e.\u0275\u0275advance(2),e.\u0275\u0275property("ngForOf",r.optionNames),e.\u0275\u0275advance(3),e.\u0275\u0275property("ngClass",e.\u0275\u0275pureFunction1(24,cs,r.simpleDeployment)),e.\u0275\u0275advance(2),e.\u0275\u0275property("ngClass",e.\u0275\u0275pureFunction1(26,ds,!r.simpleDeployment)),e.\u0275\u0275advance(4),e.\u0275\u0275property("availDevices",r.availDevices)("canSelect",0!==r.availDevices.length),e.\u0275\u0275advance(5),e.\u0275\u0275property("availDevices",r.availDevices)("canSelect",0!==t.devices.length)("hostname",r.hostname),e.\u0275\u0275advance(2),e.\u0275\u0275property("ngIf",0!==o.devices.length),e.\u0275\u0275advance(),e.\u0275\u0275property("availDevices",r.availDevices)("canSelect",0!==t.devices.length)("hostname",r.hostname),e.\u0275\u0275advance(2),e.\u0275\u0275property("ngIf",0!==i.devices.length),e.\u0275\u0275advance(8),e.\u0275\u0275property("ngForOf",r.featureList),e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf",!r.hideSubmitBtn)}}let us=(()=>{class n extends Te.g{constructor(t,o,i,r,p,F,D,x){super(),this.actionLabels=t,this.authStorageService=o,this.orchService=i,this.hostService=r,this.router=p,this.modalService=F,this.osdService=D,this.taskWrapper=x,this.hideTitle=!1,this.hideSubmitBtn=!1,this.emitDriveGroup=new e.EventEmitter,this.emitDeploymentOption=new e.EventEmitter,this.emitMode=new e.EventEmitter,this.icons=g.FI,this.columns=[],this.allDevices=[],this.availDevices=[],this.dataDeviceFilters=[],this.dbDeviceFilters=[],this.walDeviceFilters=[],this.hostname="",this.driveGroup=new qa,this.featureList=[],this.hasOrchestrator=!0,this.simpleDeployment=!0,this.optionNames=Object.values(_s),this.resource=$localize`OSDs`,this.action=this.actionLabels.CREATE,this.features={encrypted:{key:"encrypted",desc:$localize`Encryption`}},this.featureList=E().map(this.features,(H,X)=>Object.assign(H,{key:X})),this.createForm()}ngOnInit(){this.orchService.status().subscribe(t=>{this.hasOrchestrator=t.available,t.available?this.getDataDevices():this.loadingNone()}),this.osdService.getDeploymentOptions().subscribe(t=>{this.deploymentOptions=t,this.osdService.selectedFormValues||this.form.get("deploymentOption").setValue(this.deploymentOptions?.recommended_option),this.deploymentOptions?.recommended_option&&this.enableFeatures()}),this.osdService.selectedFormValues&&(this.form=E().cloneDeep(this.osdService.selectedFormValues),this.form.get("deploymentOption").setValue(this.osdService.selectedFormValues.value?.deploymentOption)),this.simpleDeployment=this.osdService.isDeployementModeSimple,this.form.get("walSlots").valueChanges.subscribe(t=>this.setSlots("wal",t)),this.form.get("dbSlots").valueChanges.subscribe(t=>this.setSlots("db",t)),E().each(this.features,t=>{this.form.get("features").get(t.key).valueChanges.subscribe(o=>this.featureFormUpdate(t.key,o))})}createForm(){this.form=new Se.$({walSlots:new T.UntypedFormControl(0),dbSlots:new T.UntypedFormControl(0),features:new Se.$(this.featureList.reduce((t,o)=>(t[o.key]=new T.UntypedFormControl({value:!1,disabled:!0}),t),{})),deploymentOption:new T.UntypedFormControl(0)})}getDataDevices(){this.hostService.inventoryDeviceList().subscribe(t=>{this.allDevices=E().filter(t,"available"),this.availDevices=[...this.allDevices],this.loadingReady()},()=>{this.allDevices=[],this.availDevices=[],this.loadingError()})}setSlots(t,o){"number"==typeof o&&o>=0&&this.driveGroup.setSlots(t,o)}featureFormUpdate(t,o){this.driveGroup.setFeature(t,o)}enableFeatures(){this.featureList.forEach(t=>{this.form.get(t.key).enable({emitEvent:!1})})}disableFeatures(){this.featureList.forEach(t=>{const o=this.form.get(t.key);o.disable({emitEvent:!1}),o.setValue(!1,{emitEvent:!1})})}onDevicesSelected(t){if(this.availDevices=t.dataOut,"data"===t.type){const o=E().find(t.filters,{prop:"hostname"});o?(this.hostname=o.value.raw,this.availDevices=t.dataOut.filter(i=>i.hostname===this.hostname),this.driveGroup.setHostPattern(this.hostname)):this.driveGroup.setHostPattern("*"),this.enableFeatures()}this.driveGroup.setDeviceSelection(t.type,t.filters),this.emitDriveGroup.emit(this.driveGroup)}onDevicesCleared(t){"data"===t.type?(this.hostname="",this.availDevices=[...this.allDevices],this.walDeviceSelectionGroups.devices=[],this.dbDeviceSelectionGroups.devices=[],this.disableFeatures(),this.driveGroup.reset(),this.form.get("walSlots").setValue(0,{emitEvent:!1}),this.form.get("dbSlots").setValue(0,{emitEvent:!1})):(this.availDevices=[...this.availDevices,...t.clearedDevices],this.driveGroup.clearDeviceSelection(t.type),this.form.get(`${t.type}Slots`).setValue(0,{emitEvent:!1}))}emitDeploymentSelection(){const t=this.form.get("deploymentOption").value,o=this.form.get("encrypted").value;this.emitDeploymentOption.emit({option:t,encrypted:o})}emitDeploymentMode(){this.simpleDeployment=!this.simpleDeployment,this.simpleDeployment||0!==this.dataDeviceSelectionGroups.devices.length?this.enableFeatures():this.disableFeatures(),this.emitMode.emit(this.simpleDeployment)}submit(){if(this.simpleDeployment){const i={option:this.form.get("deploymentOption").value,encrypted:this.form.get("encrypted").value},p=`${this.deploymentOptions.options[i.option].title} deployment`;this.taskWrapper.wrapTaskAroundCall({task:new ie.O("osd/"+f.Qp.CREATE,{tracking_id:p}),call:this.osdService.create([i],p,"predefined")}).subscribe({complete:()=>{this.router.navigate(["/osd"])}})}else{const t=this.authStorageService.getUsername();this.driveGroup.setName(`dashboard-${t}-${E().now()}`),this.modalService.show(zm,{driveGroups:[this.driveGroup.spec]}).componentInstance.submitAction.subscribe(()=>{this.router.navigate(["/osd"])}),this.previewButtonPanel.submitButton.loading=!1}}ngOnDestroy(){this.osdService.selectedFormValues=E().cloneDeep(this.form),this.osdService.isDeployementModeSimple=0===this.dataDeviceSelectionGroups?.devices?.length}static{this.\u0275fac=function(o){return new(o||n)(e.\u0275\u0275directiveInject(f.Ss),e.\u0275\u0275directiveInject(_.v),e.\u0275\u0275directiveInject(tn.K),e.\u0275\u0275directiveInject(Vt.I),e.\u0275\u0275directiveInject(m.Router),e.\u0275\u0275directiveInject(qt.B),e.\u0275\u0275directiveInject(It),e.\u0275\u0275directiveInject(w.a))}}static{this.\u0275cmp=e.\u0275\u0275defineComponent({type:n,selectors:[["cd-osd-form"]],viewQuery:function(o,i){if(1&o&&(e.\u0275\u0275viewQuery(s1,5),e.\u0275\u0275viewQuery(r1,5),e.\u0275\u0275viewQuery(l1,5),e.\u0275\u0275viewQuery(_1,5)),2&o){let r;e.\u0275\u0275queryRefresh(r=e.\u0275\u0275loadQuery())&&(i.dataDeviceSelectionGroups=r.first),e.\u0275\u0275queryRefresh(r=e.\u0275\u0275loadQuery())&&(i.walDeviceSelectionGroups=r.first),e.\u0275\u0275queryRefresh(r=e.\u0275\u0275loadQuery())&&(i.dbDeviceSelectionGroups=r.first),e.\u0275\u0275queryRefresh(r=e.\u0275\u0275loadQuery())&&(i.previewButtonPanel=r.first)}},inputs:{hideTitle:"hideTitle",hideSubmitBtn:"hideSubmitBtn"},outputs:{emitDriveGroup:"emitDriveGroup",emitDeploymentOption:"emitDeploymentOption",emitMode:"emitMode"},features:[e.\u0275\u0275InheritDefinitionFeature],decls:2,vars:2,consts:()=>{let t,o,i,r,p,F,D,x,H,X,Z,re,pe,be,Pe;return t=$localize`:␟f071e2e2eacdbc0c086f20034b62eab631ac4744␟4851641033405243436:Deployment Options`,o=$localize`:␟52c3f2cd68f059e49dfc3cc4b6ed60d56de618cf␟3119794609322363234:Advanced Mode`,i=$localize`:␟43ecf6bee2aebc07b0aad6dc1fe13e38d14687fa␟3068413638564398802:Shared devices`,r=$localize`:␟6cdb1fea93d77c07950c0c76c6e0ad79ebbef084␟6599364831830861985:Features`,p=$localize`:form title|Example\: Create Pool@@formTitle␟f1553045110d959c485a73c7f40f26fcc28b975b␟6476422032353420938:${"\ufffd0\ufffd"}:INTERPOLATION: ${"\ufffd1\ufffd"}:INTERPOLATION_1:`,F=$localize`:␟134b2900b2e9e070f3ecf56b344f0f5355673a34␟300590679166957139: No devices(HDD, SSD or NVME) were found. Creation of OSDs will remain disabled until devices are added. `,D=$localize`:␟13473b2df7b2156a22d98cae1558d43c4f7d5d9a␟5085286005356674689:${"\ufffd0\ufffd"}:INTERPOLATION: ${"\ufffd1\ufffd"}:INTERPOLATION_1: ${"\ufffd#5\ufffd"}:START_TAG_CD_HELPER:${"\ufffd#6\ufffd"}:START_TAG_SPAN:${"\ufffd2\ufffd"}:INTERPOLATION_2:${"\ufffd/#6\ufffd"}:CLOSE_TAG_SPAN:${"\ufffd/#5\ufffd"}:CLOSE_TAG_CD_HELPER:`,x=$localize`:␟7a1c376f6f1b37de4c318ff2106255ba6c0f5b0b␟3067321700107184111:WAL slots`,H=$localize`:␟73811a6f37b63e6b0e491e221bfa21e9dea8a87a␟5193677607387731461:How many OSDs per WAL device.`,X=$localize`:␟0c67a7ac4762ef1cc855056c6b4daab93e53a0a5␟3373497724718235601:Specify 0 to let Orchestrator backend decide it.`,Z=$localize`:␟7bda9362e06e6c67341b4a8425b0d29d6b84464b␟1255369660111528301:Value should be greater than or equal to 0`,re=$localize`:␟324c2b10152b9dd908222bb0b71f61beb60a30c5␟5566222513626093422:DB slots`,pe=$localize`:␟c23cf12ef9c76f37fc7a4b7ae3e00fb0f68b6e26␟1350815912323046421:How many OSDs per DB device.`,be=$localize`:␟0c67a7ac4762ef1cc855056c6b4daab93e53a0a5␟3373497724718235601:Specify 0 to let Orchestrator backend decide it.`,Pe=$localize`:␟7bda9362e06e6c67341b4a8425b0d29d6b84464b␟1255369660111528301:Value should be greater than or equal to 0`,[["formDir","ngForm"],["dataDeviceSelectionGroups",""],["walDeviceSelectionGroups",""],["dbDeviceSelectionGroups",""],["previewButtonPanel",""],t,o,i,r,p,F,D,x,H,X,Z,re,pe,be,Pe,[4,"ngIf"],["class","card",4,"cdFormLoading"],[1,"card"],["class","card-header",4,"ngIf"],[1,"card-body","ms-2"],["name","form","novalidate","",3,"formGroup"],["type","warning","class","mx-3",4,"ngIf"],[1,"accordion"],[1,"accordion-item"],[1,"accordion-header"],["type","button","data-toggle","collapse","aria-label","toggle deployment options",1,"accordion-button",3,"click","ngClass"],[1,"accordion-collapse","collapse",3,"ngClass"],[1,"accordion-body"],["class","pt-3 pb-3",4,"ngFor","ngForOf"],["type","button","aria-label","toggle advanced mode",1,"accordion-button",3,"click","ngClass"],[1,"card-body"],["name","Primary","type","data",3,"selected","cleared","availDevices","canSelect"],["name","WAL","type","wal",3,"selected","cleared","availDevices","canSelect","hostname"],["class","form-group row",4,"ngIf"],["name","DB","type","db",3,"selected","cleared","availDevices","canSelect","hostname"],["type","button","data-toggle","collapse","aria-label","features","aria-expanded","true",1,"accordion-button"],[1,"accordion-collapse","collapse","show"],["formGroupName","features",1,"pt-3","pb-3"],["class","custom-control custom-checkbox",4,"ngFor","ngForOf"],["class","card-footer",4,"ngIf"],[1,"card-header"],["type","warning",1,"mx-3"],[1,"pt-3","pb-3"],[1,"custom-control","form-check","custom-control-inline"],["type","radio","name","deploymentOption","formControlName","deploymentOption",1,"form-check-input",3,"change","id","value"],[1,"form-check-label",3,"id","for"],[1,"form-group","row"],["for","walSlots",1,"cd-col-form-label"],[1,"cd-col-form-input"],["id","walSlots","name","walSlots","type","number","min","0","formControlName","walSlots",1,"form-control"],["class","invalid-feedback",4,"ngIf"],[1,"invalid-feedback"],["for","dbSlots",1,"cd-col-form-label"],["id","dbSlots","name","dbSlots","type","number","min","0","formControlName","dbSlots",1,"form-control"],[1,"custom-control","custom-checkbox"],["type","checkbox",1,"custom-control-input",3,"change","id","name","formControlName"],[1,"custom-control-label",3,"for"],[1,"card-footer"],["wrappingClass","text-right",3,"submitActionEvent","form","disabled","submitText"]]},template:function(o,i){1&o&&e.\u0275\u0275template(0,c1,1,0,"cd-orchestrator-doc-panel",20)(1,h1,42,28,"div",21),2&o&&(e.\u0275\u0275property("ngIf",!i.hasOrchestrator),e.\u0275\u0275advance(),e.\u0275\u0275property("cdFormLoading",i.loading))},dependencies:[l.NgClass,l.NgForOf,l.NgIf,b.m,it.m,zi,Q.e,rt.G,De.S,Me.a,xe.C,ze.E,T.\u0275NgNoValidate,T.DefaultValueAccessor,T.NumberValueAccessor,T.CheckboxControlValueAccessor,T.RadioControlValueAccessor,T.NgControlStatus,T.NgControlStatusGroup,T.MinValidator,T.FormGroupDirective,T.FormControlName,T.FormGroupName,a1,l.TitleCasePipe,Oe.r]})}}return n})();var ps=s(76139),T1=s(54980),F1=s(68132),ms=s.n(F1),fs=s(19271);function v1(n,c){1&n&&(e.\u0275\u0275elementStart(0,"span",30),e.\u0275\u0275elementContainerStart(1),e.\u0275\u0275i18n(2,9),e.\u0275\u0275elementContainerEnd(),e.\u0275\u0275elementEnd())}function M1(n,c){1&n&&(e.\u0275\u0275elementStart(0,"span",30),e.\u0275\u0275elementContainerStart(1),e.\u0275\u0275i18n(2,10),e.\u0275\u0275elementContainerEnd(),e.\u0275\u0275elementEnd())}function R1(n,c){if(1&n&&e.\u0275\u0275template(0,v1,3,0,"span",29)(1,M1,3,0,"span",29),2&n){e.\u0275\u0275nextContext();const t=e.\u0275\u0275reference(2),o=e.\u0275\u0275nextContext();e.\u0275\u0275property("ngIf",o.hostForm.showError("hostname",t,"required")),e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf",o.hostForm.showError("hostname",t,"uniqueName"))}}function O1(n,c){1&n&&(e.\u0275\u0275elementStart(0,"span"),e.\u0275\u0275elementContainerStart(1),e.\u0275\u0275i18n(2,12),e.\u0275\u0275elementContainerEnd(),e.\u0275\u0275elementEnd())}function P1(n,c){if(1&n&&e.\u0275\u0275template(0,O1,3,0,"span",27),2&n){e.\u0275\u0275nextContext(2);const t=e.\u0275\u0275reference(2),o=e.\u0275\u0275nextContext();e.\u0275\u0275property("ngIf",o.hostForm.showError("addr",t,"pattern"))}}function b1(n,c){1&n&&(e.\u0275\u0275elementStart(0,"div",20)(1,"cds-text-label",31),e.\u0275\u0275i18nStart(2,11),e.\u0275\u0275element(3,"input",32),e.\u0275\u0275i18nEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275template(4,P1,1,1,"ng-template",null,2,e.\u0275\u0275templateRefExtractor),e.\u0275\u0275elementEnd())}function N1(n,c){1&n&&(e.\u0275\u0275elementStart(0,"div")(1,"cds-checkbox",33),e.\u0275\u0275i18n(2,13),e.\u0275\u0275elementEnd()())}function I1(n,c){if(1&n){const t=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementContainerStart(0),e.\u0275\u0275elementStart(1,"form",18,0)(3,"div",19)(4,"div",20)(5,"cds-text-label",21),e.\u0275\u0275elementContainerStart(6),e.\u0275\u0275i18n(7,4),e.\u0275\u0275elementContainerEnd(),e.\u0275\u0275elementStart(8,"input",22),e.\u0275\u0275listener("keyup",function(){e.\u0275\u0275restoreView(t);const i=e.\u0275\u0275nextContext();return e.\u0275\u0275resetView(i.checkHostNameValue())}),e.\u0275\u0275elementEnd()(),e.\u0275\u0275template(9,R1,2,2,"ng-template",null,1,e.\u0275\u0275templateRefExtractor),e.\u0275\u0275elementStart(11,"cd-help-text"),e.\u0275\u0275text(12," To add multiple hosts at once, you can enter: "),e.\u0275\u0275elementStart(13,"ul",23)(14,"li",24),e.\u0275\u0275i18nStart(15,5),e.\u0275\u0275element(16,"b"),e.\u0275\u0275i18nEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(17,"li",24),e.\u0275\u0275i18nStart(18,6),e.\u0275\u0275element(19,"b"),e.\u0275\u0275i18nEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(20,"li",24),e.\u0275\u0275i18nStart(21,7),e.\u0275\u0275element(22,"b"),e.\u0275\u0275i18nEnd(),e.\u0275\u0275elementEnd()()()(),e.\u0275\u0275template(23,b1,6,0,"div",25),e.\u0275\u0275elementStart(24,"div",20)(25,"cds-combo-box",26),e.\u0275\u0275listener("updatedItems",function(i){e.\u0275\u0275restoreView(t);const r=e.\u0275\u0275nextContext();return e.\u0275\u0275resetView(r.labelsOption=i)}),e.\u0275\u0275i18nStart(26,8),e.\u0275\u0275element(27,"cds-dropdown-list"),e.\u0275\u0275i18nEnd(),e.\u0275\u0275elementEnd()(),e.\u0275\u0275template(28,N1,3,0,"div",27),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(29,"cd-form-button-panel",28),e.\u0275\u0275pipe(30,"titlecase"),e.\u0275\u0275pipe(31,"upperFirst"),e.\u0275\u0275listener("submitActionEvent",function(){e.\u0275\u0275restoreView(t);const i=e.\u0275\u0275nextContext();return e.\u0275\u0275resetView(i.submit())}),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementContainerEnd()}if(2&n){const t=e.\u0275\u0275reference(10),o=e.\u0275\u0275nextContext();e.\u0275\u0275advance(),e.\u0275\u0275property("formGroup",o.hostForm),e.\u0275\u0275advance(4),e.\u0275\u0275property("invalid",!o.hostForm.controls.hostname.valid&&o.hostForm.controls.hostname.dirty)("invalidText",t),e.\u0275\u0275advance(3),e.\u0275\u0275property("invalid",!o.hostForm.controls.hostname.valid&&o.hostForm.controls.hostname.dirty),e.\u0275\u0275advance(15),e.\u0275\u0275property("ngIf",!o.hostPattern),e.\u0275\u0275advance(2),e.\u0275\u0275property("appendInline",!0)("items",o.labelsOption),e.\u0275\u0275advance(3),e.\u0275\u0275property("ngIf",!o.hideMaintenance),e.\u0275\u0275advance(),e.\u0275\u0275property("form",o.hostForm)("submitText",e.\u0275\u0275pipeBind1(30,11,o.action)+" "+e.\u0275\u0275pipeBind1(31,13,o.resource))("modalForm",!0)}}const ki="hosts";let Es=(()=>{class n extends Te.g{constructor(t,o,i,r,p,F){super(),this.router=t,this.actionLabels=o,this.hostService=i,this.taskWrapper=r,this.route=p,this.hideMaintenance=F,this.open=!1,this.hostnameArray=[],this.hostPattern=!1,this.labelsOption=[],this.messages=new fa.z({empty:$localize`There are no labels.`,filter:$localize`Filter or add labels`,add:$localize`Add label`}),this.resource=$localize`host`,this.action=this.actionLabels.ADD}ngOnInit(){this.router.url.includes(ki)&&(this.pageURL=ki),this.open="modal"===this.route.outlet,this.createForm();const t=new Do.n(()=>{});this.hostService.list(t.toParams(),"false").subscribe(o=>{this.hostnames=o.map(i=>i.hostname),this.loadingReady()}),this.hostService.getLabels().subscribe(o=>{const i=new Set(o.concat(this.hostService.predefinedLabels));this.labelsOption=Array.from(i).map(r=>({name:r,content:r}))})}checkHostNameValue(){this.hostPattern=!!this.hostForm.get("hostname").value.match(/[()\[\]{},]/g)}createForm(){this.hostForm=new Se.$({hostname:new T.UntypedFormControl("",{validators:[T.Validators.required,ge.xQ.custom("uniqueName",t=>this.hostnames&&-1!==this.hostnames.indexOf(t))]}),addr:new T.UntypedFormControl("",{validators:[ge.xQ.ip()]}),labels:new T.UntypedFormControl([]),maintenance:new T.UntypedFormControl})}isCommaSeparatedPattern(t){return t.includes(",")}isRangeTypePattern(t){return t.includes("[")&&t.includes("]")&&!t.match(/(?![^(]*\)),/g)}replaceBraces(t){return t.replace(/(\d)\s*-\s*(\d)/g,"$1..$2").replace(/\(/g,"{").replace(/\)/g,"}").replace(/\[/g,"{").replace(/]/g,"}")}checkHostNamePattern(t){if(this.isRangeTypePattern(t)){const o=this.replaceBraces(t);this.hostnameArray=ms()(o)}else if(this.isCommaSeparatedPattern(t)){let o=[];o=t.split(","),o.forEach(i=>{if(this.isRangeTypePattern(i)){const r=this.replaceBraces(i);this.hostnameArray=this.hostnameArray.concat(ms()(r))}else this.hostnameArray.push(i)})}else this.hostnameArray.push(t)}submit(){const t=this.hostForm.get("hostname").value;this.checkHostNamePattern(t),this.addr=this.hostForm.get("addr").value,this.status=this.hostForm.get("maintenance").value?"maintenance":"",this.allLabels=this.hostForm.get("labels").value,this.pageURL!==ki&&!this.allLabels.includes("_no_schedule")&&this.allLabels.push("_no_schedule"),this.hostnameArray.forEach(o=>{this.taskWrapper.wrapTaskAroundCall({task:new ie.O("host/"+f.Qp.ADD,{hostname:o}),call:this.hostService.create(o,this.addr,this.allLabels,this.status)}).subscribe({error:()=>{this.hostForm.setErrors({cdSubmitButton:!0})},complete:()=>{this.closeModal()}})})}closeModal(){this.pageURL===ki?this.router.navigate([this.pageURL,{outlets:{modal:null}}]):this.open=!1}static{this.\u0275fac=function(o){return new(o||n)(e.\u0275\u0275directiveInject(m.Router),e.\u0275\u0275directiveInject(f.Ss),e.\u0275\u0275directiveInject(Vt.I),e.\u0275\u0275directiveInject(w.a),e.\u0275\u0275directiveInject(m.ActivatedRoute),e.\u0275\u0275directiveInject("hideMaintenance",8))}}static{this.\u0275cmp=e.\u0275\u0275defineComponent({type:n,selectors:[["cd-host-form"]],features:[e.\u0275\u0275InheritDefinitionFeature],decls:7,vars:9,consts:()=>{let t,o,i,r,p,F,D,x,H,X,Z,re;return t=$localize`:␟fb127ea03835b3230f0ed981c7080e2ccb879621␟3346778808274133574:${"\ufffd0\ufffd"}:INTERPOLATION: ${"\ufffd1\ufffd"}:INTERPOLATION_1:`,o=$localize`:␟6b9daf5320db23ad0225feb5e8964fdc6d94d50b␟4341225277764240869:Select Labels...`,i=$localize`:␟e1a688aad6950c764739ca17eb73de43fb7c0dcd␟6582118866508236276:Hostname (required)`,r=$localize`:␟ca7b8a2113f494a3e865a901b507840cf1f3fdd9␟6623159123141970639:a comma-separated list of hostnames ${"\ufffd#16\ufffd"}:START_BOLD_TEXT:(e.g.: example-01,example-02,example-03)${"\ufffd/#16\ufffd"}:CLOSE_BOLD_TEXT:,`,p=$localize`:␟28ea3c4ca072116cf75bae31a2c4b6bfbfb80ce5␟4356971291210753369:a range expression ${"\ufffd#19\ufffd"}:START_BOLD_TEXT:(e.g.: example-[01-03].ceph)${"\ufffd/#19\ufffd"}:CLOSE_BOLD_TEXT:,`,F=$localize`:␟33662848b0cad0ae464345865e7b0bd06698bd89␟8993308271254034834:a comma separated range expression ${"\ufffd#22\ufffd"}:START_BOLD_TEXT:(e.g.: example-[01-05].lab.com,example2-[1-4].lab.com,example3-[001-006].lab.com)${"\ufffd/#22\ufffd"}:CLOSE_BOLD_TEXT:`,D=$localize`:␟12f37de6622cf2e15ac960f3dd14502e8581733a␟2425863206688252134:${"\ufffd#27\ufffd"}:START_TAG_CDS_DROPDOWN_LIST:${"\ufffd/#27\ufffd"}:CLOSE_TAG_CDS_DROPDOWN_LIST:`,x=$localize`:␟9739656bb5643ced5c52a9aa90588cab8c10852a␟6410945776428459192: This field is required. `,H=$localize`:␟678fd938d7b7e0171c438ea28aa4d3b50f88e817␟1375137808282281836: The chosen hostname is already in use. `,X=$localize`:␟0a557dec73c10c78e2d6d85aff6d8acefbc6e752␟2560375339761004895:Network address ${"\ufffd#3\ufffd\ufffd/#3\ufffd"}:TAG_INPUT:`,Z=$localize`:␟5fcdddff5d945926d2e5ffc15ca048c8e3d2aac7␟5549714954988391291: The value is not a valid IP address. `,re=$localize`:␟8e653762da6d533b48daa16fe2091ff4528363ff␟6123843242847757855:Maintenance Mode `,[["formDir","ngForm"],["hostnameError",""],["hostaddrError",""],t,i,r,p,F,D,x,H,X,Z,re,["size","md",3,"open","hasScrollingContent"],[3,"closeSelect"],["cdsModalHeaderHeading",""],[4,"cdFormLoading"],["name","hostForm","novalidate","",3,"formGroup"],["cdsModalContent",""],[1,"form-item"],["for","hostname",3,"invalid","invalidText"],["cdsText","","type","text","placeholder","mon-123","id","hostname","name","hostname","formControlName","hostname","autofocus","",3,"keyup","invalid"],["cdsList",""],["cdsListItem",""],["class","form-item",4,"ngIf"],["label","Labels","type","multi","selectionFeedback","top-after-reopen","for","labels","name","labels","formControlName","labels","placeholder",o,"itemValueKey","content","id","labels","cdDynamicInputCombobox","",3,"updatedItems","appendInline","items"],[4,"ngIf"],[3,"submitActionEvent","form","submitText","modalForm"],["class","invalid-feedback",4,"ngIf"],[1,"invalid-feedback"],["label","Network address","for","addr"],["cdsText","","type","text","placeholder","192.168.0.1","id","addr","name","addr","formControlName","addr"],["id","maintenance","type","checkbox","formControlName","maintenance"]]},template:function(o,i){1&o&&(e.\u0275\u0275elementStart(0,"cds-modal",14)(1,"cds-modal-header",15),e.\u0275\u0275listener("closeSelect",function(){return i.closeModal()}),e.\u0275\u0275elementStart(2,"h3",16),e.\u0275\u0275i18n(3,3),e.\u0275\u0275pipe(4,"titlecase"),e.\u0275\u0275pipe(5,"upperFirst"),e.\u0275\u0275elementEnd()(),e.\u0275\u0275template(6,I1,32,15,"ng-container",17),e.\u0275\u0275elementEnd()),2&o&&(e.\u0275\u0275property("open",i.open)("hasScrollingContent",!0),e.\u0275\u0275advance(5),e.\u0275\u0275i18nExp(e.\u0275\u0275pipeBind1(4,5,i.action))(e.\u0275\u0275pipeBind1(5,7,i.resource)),e.\u0275\u0275i18nApply(3),e.\u0275\u0275advance(),e.\u0275\u0275property("cdFormLoading",i.loading))},dependencies:[l.NgIf,Q.e,Ye.O,ct.B,rt.G,De.S,ze.E,fs.k,T.\u0275NgNoValidate,T.DefaultValueAccessor,T.NgControlStatus,T.NgControlStatusGroup,T.FormGroupDirective,T.FormControlName,L.ComboBox,L.DropdownList,L.Checkbox,L.TextInputLabelComponent,L.TextInput,L.Modal,L.ModalHeader,L.ModalContent,L.ModalHeaderHeading,L.ListItemDirective,L.List,l.TitleCasePipe,Oe.r]})}}return n})();var A1=s(91653);const D1=["deviceLocation"],y1=["daemonName"],L1=["lifeExpectancy"],$1=["lifeExpectancyTimestamp"],x1=n=>({daemons:n});function U1(n,c){if(1&n&&e.\u0275\u0275element(0,"cd-table",10),2&n){const t=e.\u0275\u0275nextContext();e.\u0275\u0275property("data",t.devices)("columns",t.columns)}}function w1(n,c){1&n&&(e.\u0275\u0275elementStart(0,"cd-alert-panel",11),e.\u0275\u0275i18n(1,6),e.\u0275\u0275elementEnd())}function G1(n,c){if(1&n&&e.\u0275\u0275element(0,"cd-label",14),2&n){const t=e.\u0275\u0275nextContext().$implicit;e.\u0275\u0275property("value",t.dev)}}function H1(n,c){if(1&n&&(e.\u0275\u0275elementContainerStart(0),e.\u0275\u0275template(1,G1,1,1,"cd-label",13),e.\u0275\u0275elementContainerEnd()),2&n){const t=c.$implicit,o=e.\u0275\u0275nextContext(2);e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf",t.host===o.hostname)}}function V1(n,c){1&n&&e.\u0275\u0275template(0,H1,2,1,"ng-container",12),2&n&&e.\u0275\u0275property("ngForOf",c.data.value)}function B1(n,c){if(1&n&&e.\u0275\u0275elementContainer(0,15),2&n){const t=c.data.value,o=e.\u0275\u0275nextContext(),i=e.\u0275\u0275reference(7),r=e.\u0275\u0275reference(9);e.\u0275\u0275property("ngTemplateOutlet",null!==o.osdId?i:r)("ngTemplateOutletContext",e.\u0275\u0275pureFunction1(2,x1,t))}}function z1(n,c){if(1&n&&e.\u0275\u0275element(0,"cd-label",14),2&n){const t=e.\u0275\u0275nextContext().$implicit;e.\u0275\u0275property("value",t)}}function X1(n,c){if(1&n&&(e.\u0275\u0275elementContainerStart(0),e.\u0275\u0275template(1,z1,1,1,"cd-label",13),e.\u0275\u0275elementContainerEnd()),2&n){const t=c.$implicit,o=e.\u0275\u0275nextContext(2);e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf",t.includes(o.osdId))}}function k1(n,c){1&n&&e.\u0275\u0275template(0,X1,2,1,"ng-container",12),2&n&&e.\u0275\u0275property("ngForOf",c.daemons)}function j1(n,c){if(1&n&&(e.\u0275\u0275elementContainerStart(0),e.\u0275\u0275element(1,"cd-label",16),e.\u0275\u0275elementContainerEnd()),2&n){const t=c.$implicit;e.\u0275\u0275advance(),e.\u0275\u0275property("value",t)}}function W1(n,c){1&n&&e.\u0275\u0275template(0,j1,2,1,"ng-container",12),2&n&&e.\u0275\u0275property("ngForOf",c.daemons)}function K1(n,c){1&n&&(e.\u0275\u0275elementStart(0,"span"),e.\u0275\u0275i18n(1,7),e.\u0275\u0275pipe(2,"notAvailable"),e.\u0275\u0275elementEnd()),2&n&&(e.\u0275\u0275advance(2),e.\u0275\u0275i18nExp(e.\u0275\u0275pipeBind1(2,1,"")),e.\u0275\u0275i18nApply(1))}function Q1(n,c){if(1&n&&(e.\u0275\u0275elementStart(0,"span"),e.\u0275\u0275text(1),e.\u0275\u0275pipe(2,"i18nPlural"),e.\u0275\u0275elementEnd()),2&n){const t=e.\u0275\u0275nextContext().data.value,o=e.\u0275\u0275nextContext();e.\u0275\u0275advance(),e.\u0275\u0275textInterpolate1("> ",e.\u0275\u0275pipeBind2(2,1,t.min,o.translationMapping),"")}}function Y1(n,c){if(1&n&&(e.\u0275\u0275elementStart(0,"span"),e.\u0275\u0275text(1),e.\u0275\u0275pipe(2,"i18nPlural"),e.\u0275\u0275elementEnd()),2&n){const t=e.\u0275\u0275nextContext().data.value,o=e.\u0275\u0275nextContext();e.\u0275\u0275advance(),e.\u0275\u0275textInterpolate1("< ",e.\u0275\u0275pipeBind2(2,1,t.max,o.translationMapping),"")}}function J1(n,c){if(1&n&&(e.\u0275\u0275elementStart(0,"span"),e.\u0275\u0275text(1),e.\u0275\u0275pipe(2,"i18nPlural"),e.\u0275\u0275elementEnd()),2&n){const t=e.\u0275\u0275nextContext().data.value,o=e.\u0275\u0275nextContext();e.\u0275\u0275advance(),e.\u0275\u0275textInterpolate2("",t.min," to ",e.\u0275\u0275pipeBind2(2,2,t.max,o.translationMapping),"")}}function Z1(n,c){if(1&n&&e.\u0275\u0275template(0,K1,3,3,"span",17)(1,Q1,3,4,"span",17)(2,Y1,3,4,"span",17)(3,J1,3,5,"span",17),2&n){const t=c.data.value;e.\u0275\u0275property("ngIf",!(null!=t&&t.life_expectancy_enabled)),e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf",(null==t?null:t.min)&&!(null!=t&&t.max)),e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf",(null==t?null:t.max)&&!(null!=t&&t.min)),e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf",(null==t?null:t.max)&&(null==t?null:t.min))}}function q1(n,c){1&n&&e.\u0275\u0275text(0),2&n&&e.\u0275\u0275textInterpolate1(" ",c.data.value,"\n")}let gs=(()=>{class n{constructor(t,o,i){this.hostService=t,this.datePipe=o,this.osdService=i,this.hostname="",this.osdId=null,this.osdList=!1,this.devices=null,this.columns=[],this.translationMapping={"=1":"# week",other:"# weeks"}}ngOnInit(){this.columns=[{prop:"devid",name:$localize`Device ID`,minWidth:200},{prop:"state",name:$localize`State of Health`,flexGrow:1,cellTransformation:O.x.badge,customTemplateConfig:{map:{good:{value:$localize`Good`,class:"badge-success"},warning:{value:$localize`Warning`,class:"badge-warning"},bad:{value:$localize`Bad`,class:"badge-danger"},stale:{value:$localize`Stale`,class:"badge-info"},unknown:{value:$localize`Unknown`,class:"badge-dark"}}}},{prop:"life_expectancy_weeks",name:$localize`Life Expectancy`,cellTemplate:this.lifeExpectancyTemplate},{prop:"life_expectancy_stamp",name:$localize`Prediction Creation Date`,cellTemplate:this.lifeExpectancyTimestampTemplate,pipe:this.datePipe,isHidden:!0},{prop:"location",name:$localize`Device Name`,cellTemplate:this.locationTemplate},{prop:"daemons",name:$localize`Daemons`,cellTemplate:this.daemonNameTemplate}]}ngOnChanges(){const t=o=>this.devices=o;this.osdList&&null!==this.osdId?this.osdService.getDevices(this.osdId).subscribe(t):this.hostname&&this.hostService.getDevices(this.hostname).subscribe(t)}static{this.\u0275fac=function(o){return new(o||n)(e.\u0275\u0275directiveInject(Vt.I),e.\u0275\u0275directiveInject(l.DatePipe),e.\u0275\u0275directiveInject(It))}}static{this.\u0275cmp=e.\u0275\u0275defineComponent({type:n,selectors:[["cd-device-list"]],viewQuery:function(o,i){if(1&o&&(e.\u0275\u0275viewQuery(D1,7),e.\u0275\u0275viewQuery(y1,7),e.\u0275\u0275viewQuery(L1,7),e.\u0275\u0275viewQuery($1,7)),2&o){let r;e.\u0275\u0275queryRefresh(r=e.\u0275\u0275loadQuery())&&(i.locationTemplate=r.first),e.\u0275\u0275queryRefresh(r=e.\u0275\u0275loadQuery())&&(i.daemonNameTemplate=r.first),e.\u0275\u0275queryRefresh(r=e.\u0275\u0275loadQuery())&&(i.lifeExpectancyTemplate=r.first),e.\u0275\u0275queryRefresh(r=e.\u0275\u0275loadQuery())&&(i.lifeExpectancyTimestampTemplate=r.first)}},inputs:{hostname:"hostname",osdId:"osdId",osdList:"osdList"},features:[e.\u0275\u0275NgOnChangesFeature],decls:14,vars:2,consts:()=>{let t,o;return t=$localize`:␟ac54c18c1b520e948095c83a3a1025f02ce6dcc6␟4487918765515499493:Neither hostname nor OSD ID given`,o=$localize`:␟1c47dd653a2fbf9206c6e84b2d916df6acc55ab9␟4229228789025320155:${"\ufffd0\ufffd"}:INTERPOLATION:`,[["deviceLocation",""],["daemonName",""],["osdIdDaemon",""],["readableDaemons",""],["lifeExpectancy",""],["lifeExpectancyTimestamp",""],t,o,[3,"data","columns",4,"ngIf"],["type","warning",4,"ngIf"],[3,"data","columns"],["type","warning"],[4,"ngFor","ngForOf"],[3,"value",4,"ngIf"],[3,"value"],[3,"ngTemplateOutlet","ngTemplateOutletContext"],[1,"me-1",3,"value"],[4,"ngIf"]]},template:function(o,i){1&o&&e.\u0275\u0275template(0,U1,1,2,"cd-table",8)(1,w1,2,0,"cd-alert-panel",9)(2,V1,1,1,"ng-template",null,0,e.\u0275\u0275templateRefExtractor)(4,B1,1,4,"ng-template",null,1,e.\u0275\u0275templateRefExtractor)(6,k1,1,1,"ng-template",null,2,e.\u0275\u0275templateRefExtractor)(8,W1,1,1,"ng-template",null,3,e.\u0275\u0275templateRefExtractor)(10,Z1,4,4,"ng-template",null,4,e.\u0275\u0275templateRefExtractor)(12,q1,1,1,"ng-template",null,5,e.\u0275\u0275templateRefExtractor),2&o&&(e.\u0275\u0275property("ngIf",i.hostname||null!==i.osdId),e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf",""===i.hostname&&null===i.osdId))},dependencies:[l.NgForOf,l.NgIf,l.NgTemplateOutlet,Ke.O,it.m,$e,l.I18nPluralPipe,A1.z]})}}return n})();const ef=["innerNav"];function tf(n,c){1&n&&(e.\u0275\u0275elementStart(0,"cd-alert-panel",21),e.\u0275\u0275i18n(1,6),e.\u0275\u0275elementEnd())}function nf(n,c){1&n&&(e.\u0275\u0275elementStart(0,"cd-alert-panel",22),e.\u0275\u0275i18n(1,7),e.\u0275\u0275elementEnd())}function of(n,c){1&n&&(e.\u0275\u0275elementStart(0,"cd-alert-panel",24),e.\u0275\u0275i18n(1,8),e.\u0275\u0275elementEnd())}function af(n,c){if(1&n&&(e.\u0275\u0275elementContainerStart(0),e.\u0275\u0275elementStart(1,"cd-alert-panel",31),e.\u0275\u0275text(2),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementContainerEnd()),2&n){const t=e.\u0275\u0275nextContext(2).$implicit;e.\u0275\u0275advance(2),e.\u0275\u0275textInterpolate(t.value.userMessage)}}function sf(n,c){1&n&&(e.\u0275\u0275elementStart(0,"cd-alert-panel",33),e.\u0275\u0275i18n(1,9),e.\u0275\u0275elementEnd())}function rf(n,c){1&n&&(e.\u0275\u0275elementContainerStart(0),e.\u0275\u0275elementStart(1,"cd-alert-panel",34),e.\u0275\u0275i18n(2,10),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementContainerEnd())}function lf(n,c){1&n&&(e.\u0275\u0275elementStart(0,"cd-alert-panel",35),e.\u0275\u0275i18n(1,11),e.\u0275\u0275elementEnd())}function _f(n,c){if(1&n&&e.\u0275\u0275template(0,rf,3,0,"ng-container",17)(1,lf,2,0,"ng-template",null,4,e.\u0275\u0275templateRefExtractor),2&n){const t=e.\u0275\u0275reference(2),o=e.\u0275\u0275nextContext(3).$implicit;e.\u0275\u0275property("ngIf",o.value.info.smart_status.passed)("ngIfElse",t)}}function cf(n,c){if(1&n&&(e.\u0275\u0275template(0,sf,2,0,"cd-alert-panel",32),e.\u0275\u0275pipe(1,"pipeFunction"),e.\u0275\u0275template(2,_f,3,2,"ng-template",null,3,e.\u0275\u0275templateRefExtractor)),2&n){const t=e.\u0275\u0275reference(3),o=e.\u0275\u0275nextContext(2).$implicit,i=e.\u0275\u0275nextContext(4);e.\u0275\u0275property("ngIf",e.\u0275\u0275pipeBind2(1,2,null==o.value.info?null:o.value.info.smart_status,i.isEmpty))("ngIfElse",t)}}function df(n,c){if(1&n&&e.\u0275\u0275element(0,"cd-table-key-value",39),2&n){const t=e.\u0275\u0275nextContext(4).$implicit;e.\u0275\u0275property("renderObjects",!0)("data",t.value.info)}}function uf(n,c){1&n&&(e.\u0275\u0275elementStart(0,"cd-alert-panel",40),e.\u0275\u0275i18n(1,14),e.\u0275\u0275elementEnd())}function pf(n,c){if(1&n&&(e.\u0275\u0275template(0,df,1,2,"cd-table-key-value",37),e.\u0275\u0275pipe(1,"pipeFunction"),e.\u0275\u0275template(2,uf,2,0,"cd-alert-panel",38),e.\u0275\u0275pipe(3,"pipeFunction")),2&n){const t=e.\u0275\u0275nextContext(3).$implicit,o=e.\u0275\u0275nextContext(4);e.\u0275\u0275property("ngIf",!e.\u0275\u0275pipeBind2(1,2,t.value.info,o.isEmpty)),e.\u0275\u0275advance(2),e.\u0275\u0275property("ngIf",e.\u0275\u0275pipeBind2(3,5,t.value.info,o.isEmpty))}}function mf(n,c){if(1&n&&e.\u0275\u0275element(0,"cd-table",44),2&n){const t=e.\u0275\u0275nextContext(4).$implicit,o=e.\u0275\u0275nextContext(4);e.\u0275\u0275property("data",t.value.smart.attributes.table)("columns",o.smartDataColumns)}}function ff(n,c){if(1&n&&e.\u0275\u0275element(0,"cd-table-key-value",45),2&n){const t=e.\u0275\u0275nextContext(4).$implicit;e.\u0275\u0275property("renderObjects",!0)("data",t.value.smart)}}function Ef(n,c){if(1&n&&e.\u0275\u0275element(0,"cd-table-key-value",45),2&n){const t=e.\u0275\u0275nextContext(4).$implicit;e.\u0275\u0275property("renderObjects",!0)("data",t.value.smart.nvmeData)}}function gf(n,c){1&n&&(e.\u0275\u0275elementStart(0,"cd-alert-panel",46),e.\u0275\u0275i18n(1,15),e.\u0275\u0275elementEnd())}function Cf(n,c){if(1&n&&e.\u0275\u0275template(0,mf,1,2,"cd-table",41)(1,ff,1,2,"cd-table-key-value",42)(2,Ef,1,2,"cd-table-key-value",42)(3,gf,2,0,"cd-alert-panel",43),2&n){const t=e.\u0275\u0275nextContext(3).$implicit;e.\u0275\u0275property("ngIf",null==t.value.smart?null:t.value.smart.attributes),e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf",null==t.value.smart?null:t.value.smart.scsi_error_counter_log),e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf",null==t.value.smart?null:t.value.smart.nvmeData),e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf",!(null!=t.value.smart&&t.value.smart.attributes||null!=t.value.smart&&t.value.smart.nvmeData||null!=t.value.smart&&t.value.smart.scsi_error_counter_log))}}function Sf(n,c){if(1&n&&(e.\u0275\u0275elementContainerStart(0),e.\u0275\u0275elementStart(1,"nav",25,5)(3,"li",36)(4,"a",29),e.\u0275\u0275i18n(5,12),e.\u0275\u0275elementEnd(),e.\u0275\u0275template(6,pf,4,8,"ng-template",30),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(7,"li",36)(8,"a",29),e.\u0275\u0275i18n(9,13),e.\u0275\u0275elementEnd(),e.\u0275\u0275template(10,Cf,4,4,"ng-template",30),e.\u0275\u0275elementEnd()(),e.\u0275\u0275element(11,"div",27),e.\u0275\u0275elementContainerEnd()),2&n){const t=e.\u0275\u0275reference(2);e.\u0275\u0275advance(3),e.\u0275\u0275property("ngbNavItem",1),e.\u0275\u0275advance(4),e.\u0275\u0275property("ngbNavItem",2),e.\u0275\u0275advance(4),e.\u0275\u0275property("ngbNavOutlet",t)}}function hf(n,c){if(1&n&&(e.\u0275\u0275template(0,af,3,1,"ng-container",17)(1,cf,4,5,"ng-template",null,2,e.\u0275\u0275templateRefExtractor)(3,Sf,12,3,"ng-container",20),e.\u0275\u0275pipe(4,"pipeFunction"),e.\u0275\u0275pipe(5,"pipeFunction")),2&n){const t=e.\u0275\u0275reference(2),o=e.\u0275\u0275nextContext().$implicit,i=e.\u0275\u0275nextContext(4);e.\u0275\u0275property("ngIf",o.value.error)("ngIfElse",t),e.\u0275\u0275advance(3),e.\u0275\u0275property("ngIf",!e.\u0275\u0275pipeBind2(4,3,o.value.info,i.isEmpty)||!e.\u0275\u0275pipeBind2(5,6,o.value.smart,i.isEmpty))}}function Tf(n,c){if(1&n&&(e.\u0275\u0275elementContainerStart(0,28),e.\u0275\u0275elementStart(1,"a",29),e.\u0275\u0275text(2),e.\u0275\u0275elementEnd(),e.\u0275\u0275template(3,hf,6,9,"ng-template",30),e.\u0275\u0275elementContainerEnd()),2&n){const t=c.$implicit;e.\u0275\u0275advance(2),e.\u0275\u0275textInterpolate2("",t.value.device," (",t.value.identifier,")")}}function Ff(n,c){if(1&n&&(e.\u0275\u0275elementContainerStart(0),e.\u0275\u0275elementStart(1,"nav",25,1),e.\u0275\u0275template(3,Tf,4,2,"ng-container",26),e.\u0275\u0275pipe(4,"keyvalue"),e.\u0275\u0275elementEnd(),e.\u0275\u0275element(5,"div",27),e.\u0275\u0275elementContainerEnd()),2&n){const t=e.\u0275\u0275reference(2),o=e.\u0275\u0275nextContext(3);e.\u0275\u0275advance(3),e.\u0275\u0275property("ngForOf",e.\u0275\u0275pipeBind1(4,2,o.data)),e.\u0275\u0275advance(2),e.\u0275\u0275property("ngbNavOutlet",t)}}function vf(n,c){if(1&n&&(e.\u0275\u0275elementContainerStart(0),e.\u0275\u0275template(1,of,2,0,"cd-alert-panel",23),e.\u0275\u0275pipe(2,"pipeFunction"),e.\u0275\u0275template(3,Ff,6,4,"ng-container",20),e.\u0275\u0275pipe(4,"pipeFunction"),e.\u0275\u0275elementContainerEnd()),2&n){const t=e.\u0275\u0275nextContext(2);e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf",e.\u0275\u0275pipeBind2(2,2,t.data,t.isEmpty)),e.\u0275\u0275advance(2),e.\u0275\u0275property("ngIf",!e.\u0275\u0275pipeBind2(4,5,t.data,t.isEmpty))}}function Mf(n,c){if(1&n&&(e.\u0275\u0275elementContainerStart(0),e.\u0275\u0275template(1,tf,2,0,"cd-alert-panel",18)(2,nf,2,0,"cd-alert-panel",19)(3,vf,5,8,"ng-container",20),e.\u0275\u0275elementContainerEnd()),2&n){const t=e.\u0275\u0275nextContext();e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf",t.error),e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf",t.incompatible),e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf",!t.error&&!t.incompatible)}}function Rf(n,c){1&n&&(e.\u0275\u0275elementStart(0,"cd-loading-panel"),e.\u0275\u0275i18n(1,16),e.\u0275\u0275elementEnd())}let Cs=(()=>{class n{constructor(t,o){this.osdService=t,this.hostService=o,this.osdId=null,this.hostname=null,this.loading=!1,this.incompatible=!1,this.error=!1,this.data={},this.isEmpty=E().isEmpty}isSmartError(t){return void 0!==E().get(t,"error")}isNvmeSmartData(t){return"nvme"===E().get(t,"device.protocol","").toLowerCase()}isAtaSmartData(t){return"ata"===E().get(t,"device.protocol","").toLowerCase()}isIscsiSmartData(t){return"scsi"===E().get(t,"device.protocol","").toLowerCase()}fetchData(t){const o={};E().each(t,(i,r)=>{if(this.isSmartError(i)){let p="";p=-22===i.smartctl_error_code?$localize`Smartctl has received an unknown argument \
(error code ${i.smartctl_error_code}). \
You may be using an incompatible version of smartmontools. Version >= 7.0 of \
smartmontools is required to successfully retrieve data.`:$localize`An error with error code ${i.smartctl_error_code} occurred.`,o[r]={error:i.error,smartctl_error_code:i.smartctl_error_code,smartctl_output:i.smartctl_output,userMessage:p,device:i.dev,identifier:i.nvme_vendor}}else 1!==i.json_format_version[0]?this.incompatible=!0:this.isAtaSmartData(i)?o[r]=this.extractAtaData(i):this.isIscsiSmartData(i)?o[r]=this.extractIscsiData(i):this.isNvmeSmartData(i)&&(o[r]=this.extractNvmeData(i))}),this.data=o,this.loading=!1}extractNvmeData(t){return{info:E().omitBy(t,(i,r)=>["nvme_smart_health_information_log"].includes(r)),smart:{nvmeData:t.nvme_smart_health_information_log},device:t.device.name,identifier:t.serial_number}}extractIscsiData(t){const o=E().omitBy(t,(i,r)=>["scsi_error_counter_log","scsi_grown_defect_list"].includes(r));return{info:o,smart:{scsi_error_counter_log:t.scsi_error_counter_log,scsi_grown_defect_list:t.scsi_grown_defect_list},device:o.device.name,identifier:o.serial_number}}extractAtaData(t){const o=E().omitBy(t,(i,r)=>["ata_smart_attributes","ata_smart_selective_self_test_log","ata_smart_data"].includes(r));return{info:o,smart:{attributes:t.ata_smart_attributes,data:t.ata_smart_data},device:o.device.name,identifier:o.serial_number}}updateData(){this.loading=!0,null!==this.osdId?this.osdService.getSmartData(this.osdId).subscribe({next:this.fetchData.bind(this),error:t=>{t.preventDefault(),this.error=t,this.loading=!1}}):null!==this.hostname&&this.hostService.getSmartData(this.hostname).subscribe({next:this.fetchData.bind(this),error:t=>{t.preventDefault(),this.error=t,this.loading=!1}})}ngOnInit(){this.smartDataColumns=[{prop:"id",name:$localize`ID`},{prop:"name",name:$localize`Name`},{prop:"raw.value",name:$localize`Raw`},{prop:"thresh",name:$localize`Threshold`},{prop:"value",name:$localize`Value`},{prop:"when_failed",name:$localize`When Failed`},{prop:"worst",name:$localize`Worst`}],this.scsiSmartDataColumns=[{prop:"correction_algorithm_invocations",name:$localize`Correction Algorithm Invocations`},{prop:"errors_corrected_by_eccdelayed",name:$localize`Errors Corrected by ECC (Delayed)`},{prop:"errors_corrected_by_eccfast",name:$localize`Errors Corrected by ECC (Fast)`},{prop:"errors_corrected_by_rereads_rewrites",name:$localize`Errors Corrected by Rereads/Rewrites`},{prop:"gigabytes_processed",name:$localize`Gigabytes Processed`},{prop:"total_errors_corrected",name:$localize`Total Errors Corrected`},{prop:"total_uncorrected_errors",name:$localize`Total Errors Uncorrected`}]}ngOnChanges(t){this.data={},t.osdId?this.osdId=t.osdId.currentValue:t.hostname&&(this.hostname=t.hostname.currentValue),this.updateData()}static{this.\u0275fac=function(o){return new(o||n)(e.\u0275\u0275directiveInject(It),e.\u0275\u0275directiveInject(Vt.I))}}static{this.\u0275cmp=e.\u0275\u0275defineComponent({type:n,selectors:[["cd-smart-list"]],viewQuery:function(o,i){if(1&o&&e.\u0275\u0275viewQuery(ef,5),2&o){let r;e.\u0275\u0275queryRefresh(r=e.\u0275\u0275loadQuery())&&(i.nav=r.first)}},inputs:{osdId:"osdId",hostname:"hostname"},features:[e.\u0275\u0275NgOnChangesFeature],decls:3,vars:2,consts:()=>{let t,o,i,r,p,F,D,x,H,X,Z,re,pe,be;return t=$localize`:␟4f635b3cb0600409a2ad44a5bd1863c699e6a01c␟4420333239786935295:Failed to retrieve SMART data.`,o=$localize`:␟a8a3f354bd640299068edd912f4bb5325264f250␟4251524768433153835:The data received has the JSON format version 2.x and is currently incompatible with the dashboard.`,i=$localize`:␟04f8a3c7e8ac610e6581960162cc15f55a16696a␟8567623508567043877:No SMART data available.`,r=$localize`:␟a185c9b97513b3882604ea9bab60edbfac945c15␟4086816540824573235:SMART overall-health self-assessment test result`,p=$localize`:␟290e4c9ad42dc6e9176656c864a5faed8053f406␟4097761430561209267:unknown`,F=$localize`:␟a185c9b97513b3882604ea9bab60edbfac945c15␟4086816540824573235:SMART overall-health self-assessment test result`,D=$localize`:␟3a03d3c2e459f8f8fa7202c0fce465d6165f9e2b␟2124672565465036433:passed`,x=$localize`:␟a185c9b97513b3882604ea9bab60edbfac945c15␟4086816540824573235:SMART overall-health self-assessment test result`,H=$localize`:␟41435d5a5692c8e412c74deaee95d99dbd3617e1␟4083337005045748464:failed`,X=$localize`:␟ddd5dd6d930030096ea617f62c82b648a0dd9484␟7078108784316509044:Device Information`,Z=$localize`:␟20cb12827cbe559a7b1da6fdae96041b3b5c3c55␟5647116476288417812:SMART`,re=$localize`:␟6e149c483d88cfcff11d1c5db85e84af7c3149c4␟7488562694849083032:No device information available for this device.`,pe=$localize`:␟380295f37caea93701d071485a38ef0bdba57133␟116944113746873653:No SMART data available for this device.`,be=$localize`:␟5758c3f16f8749f0f4e2a787f02e8b4da246102f␟6108301014917874675:SMART data is loading.`,[["isLoading",""],["nav","ngbNav"],["noError",""],["hasSmartStatus",""],["selfTestFailed",""],["innerNav","ngbNav"],t,o,i,p,D,H,X,Z,re,pe,be,[4,"ngIf","ngIfElse"],["type","error",4,"ngIf"],["type","warning",4,"ngIf"],[4,"ngIf"],["type","error"],["type","warning"],["type","info",4,"ngIf"],["type","info"],["ngbNav","",1,"nav-tabs"],["ngbNavItem","",4,"ngFor","ngForOf"],[3,"ngbNavOutlet"],["ngbNavItem",""],["ngbNavLink",""],["ngbNavContent",""],["id","alert-error","type","warning"],["id","alert-self-test-unknown","size","slim","type","warning","title",r,4,"ngIf","ngIfElse"],["id","alert-self-test-unknown","size","slim","type","warning","title",r],["id","alert-self-test-passed","size","slim","type","info","title",F],["id","alert-self-test-failed","size","slim","type","warning","title",x],[3,"ngbNavItem"],[3,"renderObjects","data",4,"ngIf"],["id","alert-device-info-unavailable","type","info",4,"ngIf"],[3,"renderObjects","data"],["id","alert-device-info-unavailable","type","info"],["updateSelectionOnRefresh","never",3,"data","columns",4,"ngIf"],["updateSelectionOnRefresh","never",3,"renderObjects","data",4,"ngIf"],["id","alert-device-smart-data-unavailable","type","info",4,"ngIf"],["updateSelectionOnRefresh","never",3,"data","columns"],["updateSelectionOnRefresh","never",3,"renderObjects","data"],["id","alert-device-smart-data-unavailable","type","info"]]},template:function(o,i){if(1&o&&e.\u0275\u0275template(0,Mf,4,3,"ng-container",17)(1,Rf,2,0,"ng-template",null,0,e.\u0275\u0275templateRefExtractor),2&o){const r=e.\u0275\u0275reference(2);e.\u0275\u0275property("ngIf",!i.loading)("ngIfElse",r)}},dependencies:[l.NgForOf,l.NgIf,Ke.O,Pt.i,Xa.e,it.m,V.NgbNavContent,V.NgbNav,V.NgbNavItem,V.NgbNavItemRole,V.NgbNavLink,V.NgbNavLinkBase,V.NgbNavOutlet,l.KeyValuePipe,ss.N]})}}return n})();const Of=()=>[],Pf=()=>["hostname"];function bf(n,c){1&n&&e.\u0275\u0275element(0,"cd-orchestrator-doc-panel")}function Nf(n,c){if(1&n){const t=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementContainerStart(0),e.\u0275\u0275elementStart(1,"legend"),e.\u0275\u0275i18n(2,0),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(3,"div",2)(4,"div",3)(5,"cd-inventory-devices",4),e.\u0275\u0275listener("fetchInventory",function(){e.\u0275\u0275restoreView(t);const i=e.\u0275\u0275nextContext();return e.\u0275\u0275resetView(i.refresh())}),e.\u0275\u0275elementEnd()()(),e.\u0275\u0275elementContainerEnd()}if(2&n){const t=e.\u0275\u0275nextContext();e.\u0275\u0275advance(5),e.\u0275\u0275property("devices",t.devices)("hiddenColumns",void 0===t.hostname?e.\u0275\u0275pureFunction0(3,Of):e.\u0275\u0275pureFunction0(4,Pf))("orchStatus",t.orchStatus)}}let Ss=(()=>{class n{constructor(t,o,i){this.orchService=t,this.hostService=o,this.ngZone=i,this.reloadInterval=5e3,this.firstRefresh=!0,this.icons=g.FI,this.showDocPanel=!1,this.devices=[]}ngOnInit(){this.orchService.status().subscribe(t=>{this.orchStatus=t,this.showDocPanel=!t.available,t.available&&this.ngZone.runOutsideAngular(()=>{this.reloadSubscriber=(0,K.timer)(this.reloadInterval,this.reloadInterval).subscribe(()=>{this.ngZone.run(()=>{this.getInventory(!1)})})})})}ngOnDestroy(){this.reloadSubscriber?.unsubscribe()}ngOnChanges(){this.orchStatus?.available&&(this.devices=[],this.getInventory(!1))}getInventory(t){""!==this.hostname&&this.hostService.inventoryDeviceList(this.hostname,t).subscribe(o=>{this.devices=o},()=>{this.devices=[]})}refresh(){this.getInventory(!this.firstRefresh),this.firstRefresh=!1}static{this.\u0275fac=function(o){return new(o||n)(e.\u0275\u0275directiveInject(tn.K),e.\u0275\u0275directiveInject(Vt.I),e.\u0275\u0275directiveInject(e.NgZone))}}static{this.\u0275cmp=e.\u0275\u0275defineComponent({type:n,selectors:[["cd-inventory"]],inputs:{hostname:"hostname"},features:[e.\u0275\u0275NgOnChangesFeature],decls:2,vars:2,consts:()=>{let t;return t=$localize`:␟17137bac47e1e020d139256ded0006a671966e73␟2981276866614410645:Physical Disks`,[t,[4,"ngIf"],[1,"row"],[1,"col-md-12"],["selectionType","single",3,"fetchInventory","devices","hiddenColumns","orchStatus"]]},template:function(o,i){1&o&&e.\u0275\u0275template(0,bf,1,0,"cd-orchestrator-doc-panel",1)(1,Nf,6,5,"ng-container",1),2&o&&(e.\u0275\u0275property("ngIf",i.showDocPanel),e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf",null==i.orchStatus?null:i.orchStatus.available))},dependencies:[l.NgIf,zi,Ca]})}}return n})();const If=()=>["hostname"];function Af(n,c){if(1&n&&e.\u0275\u0275element(0,"cd-device-list",18),2&n){const t=e.\u0275\u0275nextContext(2);e.\u0275\u0275property("hostname",t.selection.hostname)}}function Df(n,c){if(1&n&&e.\u0275\u0275element(0,"cd-inventory",18),2&n){const t=e.\u0275\u0275nextContext(3);e.\u0275\u0275property("hostname",t.selectedHostname)}}function yf(n,c){1&n&&(e.\u0275\u0275elementContainerStart(0,19),e.\u0275\u0275elementStart(1,"a",11),e.\u0275\u0275i18n(2,4),e.\u0275\u0275elementEnd(),e.\u0275\u0275template(3,Df,1,1,"ng-template",12),e.\u0275\u0275elementContainerEnd())}function Lf(n,c){if(1&n&&e.\u0275\u0275element(0,"cd-service-daemon-list",21),2&n){const t=e.\u0275\u0275nextContext(3);e.\u0275\u0275property("hostname",t.selectedHostname)("hiddenColumns",e.\u0275\u0275pureFunction0(2,If))}}function $f(n,c){1&n&&(e.\u0275\u0275elementContainerStart(0,20),e.\u0275\u0275elementStart(1,"a",11),e.\u0275\u0275i18n(2,5),e.\u0275\u0275elementEnd(),e.\u0275\u0275template(3,Lf,1,3,"ng-template",12),e.\u0275\u0275elementContainerEnd())}function xf(n,c){if(1&n&&e.\u0275\u0275element(0,"cd-grafana",23),2&n){const t=e.\u0275\u0275nextContext(3);e.\u0275\u0275property("grafanaPath","host-details?var-ceph_hosts="+t.selectedHostname)("type","metrics")}}function Uf(n,c){1&n&&(e.\u0275\u0275elementContainerStart(0,22),e.\u0275\u0275elementStart(1,"a",11),e.\u0275\u0275i18n(2,6),e.\u0275\u0275elementEnd(),e.\u0275\u0275template(3,xf,1,2,"ng-template",12),e.\u0275\u0275elementContainerEnd())}function wf(n,c){if(1&n&&e.\u0275\u0275element(0,"cd-smart-list",18),2&n){const t=e.\u0275\u0275nextContext(3);e.\u0275\u0275property("hostname",t.selectedHostname)}}function Gf(n,c){if(1&n&&e.\u0275\u0275template(0,wf,1,1,"cd-smart-list",24),2&n){const t=e.\u0275\u0275nextContext(2),o=e.\u0275\u0275reference(2);e.\u0275\u0275property("ngIf",t.selectedHostname)("ngIfElse",o)}}function Hf(n,c){if(1&n&&(e.\u0275\u0275elementContainerStart(0),e.\u0275\u0275elementStart(1,"nav",9,1),e.\u0275\u0275elementContainerStart(3,10),e.\u0275\u0275elementStart(4,"a",11),e.\u0275\u0275i18n(5,2),e.\u0275\u0275elementEnd(),e.\u0275\u0275template(6,Af,1,1,"ng-template",12),e.\u0275\u0275elementContainerEnd(),e.\u0275\u0275template(7,yf,4,0,"ng-container",13)(8,$f,4,0,"ng-container",14)(9,Uf,4,0,"ng-container",15),e.\u0275\u0275elementContainerStart(10,16),e.\u0275\u0275elementStart(11,"a",11),e.\u0275\u0275i18n(12,3),e.\u0275\u0275elementEnd(),e.\u0275\u0275template(13,Gf,1,2,"ng-template",12),e.\u0275\u0275elementContainerEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275element(14,"div",17),e.\u0275\u0275elementContainerEnd()),2&n){const t=e.\u0275\u0275reference(2),o=e.\u0275\u0275nextContext();e.\u0275\u0275advance(7),e.\u0275\u0275property("ngIf",o.permissions.hosts.read),e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf",o.permissions.hosts.read),e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf",o.permissions.grafana.read),e.\u0275\u0275advance(5),e.\u0275\u0275property("ngbNavOutlet",t)}}function Vf(n,c){1&n&&(e.\u0275\u0275elementStart(0,"cd-alert-panel",25),e.\u0275\u0275i18n(1,7),e.\u0275\u0275elementEnd())}let Bf=(()=>{class n{get selectedHostname(){return void 0!==this.selection?this.selection.hostname:null}static{this.\u0275fac=function(o){return new(o||n)}}static{this.\u0275cmp=e.\u0275\u0275defineComponent({type:n,selectors:[["cd-host-details"]],inputs:{permissions:"permissions",selection:"selection"},decls:3,vars:1,consts:()=>{let t,o,i,r,p,F,D;return t=$localize`:␟3e24569eca61d598c8b01defbbbb1fa8bd5222bc␟3719027099325959755:Devices`,o=$localize`:␟deba10b7279a589d01e919ea11f43c79ca1773e3␟1216614938441503693:Device health`,i=$localize`:␟17137bac47e1e020d139256ded0006a671966e73␟2981276866614410645:Physical Disks`,r=$localize`:␟9e24f9e2d42104ffc01599db4d566d1cc518f9e6␟1419569261746199221:Daemons`,p=$localize`:␟fbbaf5cb02ed419e79a27072478f716a4666a99d␟9041763226911499160:Performance Details`,F=$localize`:␟b23193979284e10491d9a08f9b90ea6e46a66a2d␟5509679498537118466:Host details`,D=$localize`:␟3d87fc20ea8e5f0f0500ba5d5061b345be78ec5e␟3836829849465327960:No hostname found.`,[["noHostname",""],["nav","ngbNav"],t,o,i,r,p,D,[4,"ngIf"],["ngbNav","","cdStatefulTab","host-details",1,"nav-tabs"],["ngbNavItem","devices"],["ngbNavLink",""],["ngbNavContent",""],["ngbNavItem","inventory",4,"ngIf"],["ngbNavItem","daemons",4,"ngIf"],["ngbNavItem","performance-details",4,"ngIf"],["ngbNavItem","device-health"],[3,"ngbNavOutlet"],[3,"hostname"],["ngbNavItem","inventory"],["ngbNavItem","daemons"],["flag","hostDetails",3,"hostname","hiddenColumns"],["ngbNavItem","performance-details"],["title",F,"uid","rtOg0AiWz","grafanaStyle","four",3,"grafanaPath","type"],[3,"hostname",4,"ngIf","ngIfElse"],["type","error"]]},template:function(o,i){1&o&&e.\u0275\u0275template(0,Hf,15,4,"ng-container",8)(1,Vf,2,0,"ng-template",null,0,e.\u0275\u0275templateRefExtractor),2&o&&e.\u0275\u0275property("ngIf",i.selection)},dependencies:[l.NgIf,V.NgbNavContent,V.NgbNav,V.NgbNavItem,V.NgbNavLink,V.NgbNavLinkBase,V.NgbNavOutlet,gt.c,it.m,yt.B,gs,Cs,Ss,rs]})}}return n})();const zf=["servicesTpl"],Xf=["hostMetricTmpl"],kf=["hostDimlessTmpl"],jf=["maintenanceConfirmTpl"],Wf=["orchTmpl"],Kf=["flashTmpl"],Qf=["hostNameTpl"];function Yf(n,c){if(1&n&&e.\u0275\u0275element(0,"cd-host-details",27),2&n){const t=e.\u0275\u0275nextContext(2);e.\u0275\u0275property("permissions",t.permissions)("selection",t.expandedRow)}}function Jf(n,c){if(1&n){const t=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"cd-table",22,8),e.\u0275\u0275listener("fetchData",function(i){e.\u0275\u0275restoreView(t);const r=e.\u0275\u0275nextContext();return e.\u0275\u0275resetView(r.getHosts(i))})("setExpandedRow",function(i){e.\u0275\u0275restoreView(t);const r=e.\u0275\u0275nextContext();return e.\u0275\u0275resetView(r.setExpandedRow(i))})("updateSelection",function(i){e.\u0275\u0275restoreView(t);const r=e.\u0275\u0275nextContext();return e.\u0275\u0275resetView(r.updateSelection(i))}),e.\u0275\u0275elementStart(2,"div",23),e.\u0275\u0275element(3,"cd-table-actions",24)(4,"cd-table-actions",25),e.\u0275\u0275elementEnd(),e.\u0275\u0275template(5,Yf,1,2,"cd-host-details",26),e.\u0275\u0275elementEnd()}if(2&n){const t=e.\u0275\u0275nextContext();e.\u0275\u0275property("data",t.hosts)("columns",t.columns)("searchableObjects",!0)("hasDetails",t.hasTableDetails)("serverSide",!0)("count",t.count)("maxLimit",25)("toolHeader",!t.hideToolHeader),e.\u0275\u0275advance(3),e.\u0275\u0275property("permission",t.permissions.hosts)("selection",t.selection)("tableActions",t.tableActions),e.\u0275\u0275advance(),e.\u0275\u0275property("permission",t.permissions.hosts)("selection",t.selection)("tableActions",t.expandClusterActions)}}function Zf(n,c){1&n&&e.\u0275\u0275elementContainer(0,16)}function qf(n,c){1&n&&e.\u0275\u0275element(0,"cd-grafana",28),2&n&&e.\u0275\u0275property("grafanaPath","host-overview?")("type","metrics")}function eE(n,c){1&n&&(e.\u0275\u0275elementContainerStart(0,16),e.\u0275\u0275elementStart(1,"a",17),e.\u0275\u0275i18n(2,10),e.\u0275\u0275elementEnd(),e.\u0275\u0275template(3,qf,1,2,"ng-template",18),e.\u0275\u0275elementContainerEnd())}function tE(n,c){if(1&n&&(e.\u0275\u0275elementStart(0,"span"),e.\u0275\u0275element(1,"cd-label",30),e.\u0275\u0275elementEnd()),2&n){const t=c.$implicit;e.\u0275\u0275advance(),e.\u0275\u0275property("key",t.type)("value",t.count)}}function nE(n,c){1&n&&e.\u0275\u0275template(0,tE,2,2,"span",29),2&n&&e.\u0275\u0275property("ngForOf",c.data.value)}function oE(n,c){if(1&n&&(e.\u0275\u0275elementStart(0,"span",33),e.\u0275\u0275text(1),e.\u0275\u0275elementEnd()),2&n){const t=e.\u0275\u0275nextContext().data.row;e.\u0275\u0275advance(),e.\u0275\u0275textInterpolate1(" (",t.addr,") ")}}function iE(n,c){if(1&n&&(e.\u0275\u0275elementStart(0,"span",31),e.\u0275\u0275text(1),e.\u0275\u0275elementEnd(),e.\u0275\u0275element(2,"br"),e.\u0275\u0275template(3,oE,2,1,"span",32)),2&n){const t=c.data.row;e.\u0275\u0275property("ngClass",t),e.\u0275\u0275advance(),e.\u0275\u0275textInterpolate1(" ",t.hostname," "),e.\u0275\u0275advance(2),e.\u0275\u0275property("ngIf",t.addr)}}function aE(n,c){if(1&n&&(e.\u0275\u0275elementStart(0,"ul")(1,"li"),e.\u0275\u0275i18n(2,11),e.\u0275\u0275elementEnd()()),2&n){const t=e.\u0275\u0275nextContext().$implicit;e.\u0275\u0275advance(2),e.\u0275\u0275i18nExp(t),e.\u0275\u0275i18nApply(2)}}function sE(n,c){if(1&n&&(e.\u0275\u0275elementStart(0,"div"),e.\u0275\u0275template(1,aE,3,1,"ul",34),e.\u0275\u0275elementEnd()),2&n){const t=c.last,o=e.\u0275\u0275nextContext(2);e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf",!t||"1"===o.errorMessage.length)}}function rE(n,c){1&n&&(e.\u0275\u0275elementContainerStart(0),e.\u0275\u0275i18n(1,12),e.\u0275\u0275elementContainerEnd())}function lE(n,c){if(1&n&&e.\u0275\u0275template(0,sE,2,1,"div",29)(1,rE,2,0,"ng-container",34),2&n){const t=e.\u0275\u0275nextContext();e.\u0275\u0275property("ngForOf",t.errorMessage),e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf",t.showSubmit)}}function _E(n,c){if(1&n&&(e.\u0275\u0275elementStart(0,"div")(1,"span"),e.\u0275\u0275text(2),e.\u0275\u0275elementEnd()()),2&n){const t=e.\u0275\u0275nextContext().data.value;e.\u0275\u0275advance(2),e.\u0275\u0275textInterpolate(t)}}function cE(n,c){1&n&&(e.\u0275\u0275elementStart(0,"div")(1,"span",35),e.\u0275\u0275text(2,"-"),e.\u0275\u0275elementEnd()())}function dE(n,c){if(1&n&&e.\u0275\u0275template(0,_E,3,1,"div",34)(1,cE,3,0,"div",34),2&n){const t=c.data.value,o=e.\u0275\u0275nextContext();e.\u0275\u0275property("ngIf",o.validValue(t)),e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf",!o.validValue(t))}}function uE(n,c){1&n&&(e.\u0275\u0275elementStart(0,"div")(1,"span",35),e.\u0275\u0275text(2,"-"),e.\u0275\u0275elementEnd()())}function pE(n,c){if(1&n&&(e.\u0275\u0275elementStart(0,"div")(1,"span"),e.\u0275\u0275text(2),e.\u0275\u0275pipe(3,"dimlessBinary"),e.\u0275\u0275elementEnd()()),2&n){const t=e.\u0275\u0275nextContext().data.value;e.\u0275\u0275advance(2),e.\u0275\u0275textInterpolate(e.\u0275\u0275pipeBind1(3,1,t))}}function mE(n,c){if(1&n&&e.\u0275\u0275template(0,uE,3,0,"div",34)(1,pE,4,3,"div",34),2&n){const t=c.data.value,o=e.\u0275\u0275nextContext();e.\u0275\u0275property("ngIf",!o.validValue(t)),e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf",o.validValue(t))}}function fE(n,c){1&n&&(e.\u0275\u0275elementStart(0,"span",36),e.\u0275\u0275i18n(1,13),e.\u0275\u0275elementEnd())}function EE(n,c){1&n&&(e.\u0275\u0275elementStart(0,"span",37),e.\u0275\u0275i18n(1,14),e.\u0275\u0275elementEnd())}let Sa=(()=>{class n extends I.D{constructor(t,o,i,r,p,F,D,x,H){super(),this.authStorageService=t,this.emptyPipe=o,this.hostService=i,this.actionLabels=r,this.taskWrapper=p,this.router=F,this.notificationService=D,this.orchService=x,this.cdsModalService=H,this.sub=new K.Subscription,this.hiddenColumns=[],this.hideMaintenance=!1,this.hasTableDetails=!0,this.hideToolHeader=!1,this.showGeneralActionsOnly=!1,this.showExpandClusterBtn=!0,this.showInlineActions=!0,this.columns=[],this.hosts=[],this.isLoadingHosts=!1,this.cdParams={fromLink:"/hosts"},this.selection=new A.y,this.isExecuting=!1,this.icons=g.FI,this.tableContext=null,this.count=5,this.messages={nonOrchHost:$localize`The feature is disabled because the selected host is not managed by Orchestrator.`},this.actionOrchFeatures={add:[$t.HOST_ADD],edit:[$t.HOST_LABEL_ADD,$t.HOST_LABEL_REMOVE],remove:[$t.HOST_REMOVE],maintenance:[$t.HOST_MAINTENANCE_ENTER,$t.HOST_MAINTENANCE_EXIT],drain:[$t.HOST_DRAIN]},this.permissions=this.authStorageService.getPermissions(),this.expandClusterActions=[{name:this.actionLabels.EXPAND_CLUSTER,permission:"create",buttonKind:"secondary",icon:g.FI.expand,routerLink:"/expand-cluster",disable:X=>this.getDisable("add",X),visible:()=>this.showExpandClusterBtn}],this.tableActions=[{name:this.actionLabels.ADD,permission:"create",icon:g.FI.add,click:()=>this.router.url.includes("/hosts")?this.router.navigate(["hosts",{outlets:{modal:[f.Qp.ADD]}}]):this.bsModalRef=this.cdsModalService.show(Es,{hideMaintenance:this.hideMaintenance}),disable:X=>this.getDisable("add",X)},{name:this.actionLabels.EDIT,permission:"update",icon:g.FI.edit,click:()=>this.editAction(),disable:X=>this.getDisable("edit",X)},{name:this.actionLabels.START_DRAIN,permission:"update",icon:g.FI.exit,click:()=>this.hostDrain(),disable:X=>this.getDisable("drain",X)||!this.enableDrainBtn,visible:()=>!this.showGeneralActionsOnly&&this.enableDrainBtn},{name:this.actionLabels.STOP_DRAIN,permission:"update",icon:g.FI.exit,click:()=>this.hostDrain(!0),disable:X=>this.getDisable("drain",X)||this.enableDrainBtn,visible:()=>!this.showGeneralActionsOnly&&!this.enableDrainBtn},{name:this.actionLabels.REMOVE,permission:"delete",icon:g.FI.destroy,click:()=>this.deleteAction(),disable:X=>this.getDisable("remove",X)},{name:this.actionLabels.ENTER_MAINTENANCE,permission:"update",icon:g.FI.enter,click:()=>this.hostMaintenance(),disable:X=>this.getDisable("maintenance",X)||this.isExecuting||this.enableMaintenanceBtn,visible:()=>!this.showGeneralActionsOnly&&!this.enableMaintenanceBtn},{name:this.actionLabels.EXIT_MAINTENANCE,permission:"update",icon:g.FI.exit,click:()=>this.hostMaintenance(),disable:X=>this.getDisable("maintenance",X)||this.isExecuting||!this.enableMaintenanceBtn,visible:()=>!this.showGeneralActionsOnly&&this.enableMaintenanceBtn}]}ngOnInit(){this.columns=[{name:$localize`Hostname`,prop:"hostname",flexGrow:1,cellTemplate:this.hostNameTpl},{name:$localize`Service Instances`,prop:"service_instances",flexGrow:1.5,cellTemplate:this.servicesTpl},{name:$localize`Labels`,prop:"labels",flexGrow:1,cellTransformation:O.x.badge,customTemplateConfig:{class:"badge-dark"}},{name:$localize`Status`,prop:"status",flexGrow:.8,cellTransformation:O.x.badge,customTemplateConfig:{map:{maintenance:{class:"badge-warning"},available:{class:"badge-success"}}}},{name:$localize`Model`,prop:"model",flexGrow:1},{name:$localize`CPUs`,prop:"cpu_count",cellTemplate:this.hostMetricTmpl,flexGrow:.3},{name:$localize`Cores`,prop:"cpu_cores",cellTemplate:this.hostMetricTmpl,flexGrow:.3},{name:$localize`Total Memory`,prop:"memory_total_bytes",cellTemplate:this.hostDimlessTmpl,flexGrow:.4},{name:$localize`Raw Capacity`,prop:"raw_capacity",cellTemplate:this.hostDimlessTmpl,flexGrow:.5},{name:$localize`HDDs`,prop:"hdd_count",cellTemplate:this.hostMetricTmpl,flexGrow:.3},{name:$localize`Flash`,prop:"flash_count",headerTemplate:this.flashTmpl,cellTemplate:this.hostMetricTmpl,flexGrow:.3},{name:$localize`NICs`,prop:"nic_count",cellTemplate:this.hostMetricTmpl,flexGrow:.3}],this.columns=this.columns.filter(t=>!this.hiddenColumns.includes(t.prop))}ngOnDestroy(){this.sub.unsubscribe()}updateSelection(t){this.selection=t,this.enableMaintenanceBtn=!1,this.enableDrainBtn=!1,this.selection.hasSelection&&("maintenance"===this.selection.first().status&&(this.enableMaintenanceBtn=!0),this.selection.first().labels.includes("_no_schedule")||(this.enableDrainBtn=!0))}editAction(){this.hostService.getLabels().subscribe(t=>{const o=this.selection.first(),i=new Set(t.concat(this.hostService.predefinedLabels)),r=Array.from(i).map(p=>({content:p,selected:o.labels.includes(p)}));this.cdsModalService.show(Qt.b,{titleText:$localize`Edit Host: ${o.hostname}`,fields:[{type:"select-badges",name:"labels",value:o.labels,label:$localize`Labels`,typeConfig:{customBadges:!0,options:r,messages:new fa.z({empty:$localize`There are no labels.`,filter:$localize`Filter or add labels`,add:$localize`Add label`})}}],submitButtonText:$localize`Edit Host`,onSubmit:p=>{this.hostService.update(o.hostname,!0,p.labels).subscribe(()=>{this.notificationService.show(Le._.success,$localize`Updated Host "${o.hostname}"`),this.table.refreshBtn()})}})})}hostMaintenance(){this.isExecuting=!0;const t=this.selection.first();"maintenance"!==t.status?this.hostService.update(t.hostname,!1,[],!0).subscribe(()=>{this.isExecuting=!1,this.notificationService.show(Le._.success,$localize`"${t.hostname}" moved to maintenance`),this.table.refreshBtn()},o=>{if(this.isExecuting=!1,this.errorMessage=o.error.detail.split(/\n/),o.preventDefault(),!o.error.detail.includes("WARNING")||o.error.detail.includes("It is NOT safe to stop")||o.error.detail.includes("ALERT")||o.error.detail.includes("unsafe to stop"))this.notificationService.show(Le._.error,$localize`"${t.hostname}" cannot be put into maintenance`,$localize`${o.error.detail}`);else{const i={titleText:$localize`Warning`,buttonText:$localize`Continue`,warning:!0,bodyTpl:this.maintenanceConfirmTpl,showSubmit:!0,onSubmit:()=>{this.hostService.update(t.hostname,!1,[],!0,!0).subscribe(()=>this.cdsModalService.dismissAll(),()=>this.cdsModalService.dismissAll())}};this.modalRef=this.cdsModalService.show(un.M,i)}}):this.hostService.update(t.hostname,!1,[],!0).subscribe(()=>{this.isExecuting=!1,this.notificationService.show(Le._.success,$localize`"${t.hostname}" has exited maintenance`),this.table.refreshBtn()})}hostDrain(t=!1){const o=this.selection.first();if(t){const i=o.labels.indexOf("_no_schedule",0);o.labels.splice(i,1),this.hostService.update(o.hostname,!0,o.labels).subscribe(()=>{this.notificationService.show(Le._.info,$localize`"${o.hostname}" stopped draining`),this.table.refreshBtn()})}else this.hostService.update(o.hostname,!1,[],!1,!1,!0).subscribe(()=>{this.notificationService.show(Le._.info,$localize`"${o.hostname}" started draining`),this.table.refreshBtn()})}getDisable(t,o){if("remove"===t||"edit"===t||"maintenance"===t||"drain"===t){if(!o?.hasSingleSelection)return!0;if(!E().every(o.selected,"sources.orchestrator"))return this.messages.nonOrchHost}return this.orchService.getTableActionDisableDesc(this.orchStatus,this.actionOrchFeatures[t])}deleteAction(){const t=this.selection.first().hostname;this.modalRef=this.cdsModalService.show(P.D,{impact:Tt.r.high,itemDescription:"Host",itemNames:[t],actionDescription:"remove",submitActionObservable:()=>this.taskWrapper.wrapTaskAroundCall({task:new ie.O("host/remove",{hostname:t}),call:this.hostService.delete(t)})})}checkHostsFactsAvailable(){const t=this.orchStatus.features;return!E().isEmpty(t)&&!!t.get_facts.available}transformHostsData(){if(this.checkHostsFactsAvailable())E().forEach(this.hosts,t=>{t.memory_total_bytes=this.emptyPipe.transform(1024*t.memory_total_kb),t.raw_capacity=this.emptyPipe.transform(t.hdd_capacity_bytes+t.flash_capacity_bytes)});else for(let t=4;t<this.columns.length;t++)this.columns[t].cellTemplate=this.orchTmpl}getHosts(t){null!==t&&(this.tableContext=t),null==this.tableContext&&(this.tableContext=new Do.n(()=>{})),!this.isLoadingHosts&&(this.isLoadingHosts=!0,this.sub=this.orchService.status().pipe((0,u.mergeMap)(o=>{this.orchStatus=o;const i=this.checkHostsFactsAvailable();return this.hostService.list(this.tableContext?.toParams(),i.toString())})).subscribe(o=>{this.hosts=o,this.hosts.forEach(i=>{""===i.status&&(i.status="available")}),this.transformHostsData(),this.isLoadingHosts=!1,this.count=this.hosts.length>0?T1.Z.getCount(o[0]):0},()=>{this.isLoadingHosts=!1,t.error()}))}validValue(t){return Number(t)==t&&t%1==0&&null!=t&&""!==t}static{this.\u0275fac=function(o){return new(o||n)(e.\u0275\u0275directiveInject(_.v),e.\u0275\u0275directiveInject(ps.y),e.\u0275\u0275directiveInject(Vt.I),e.\u0275\u0275directiveInject(f.Ss),e.\u0275\u0275directiveInject(w.a),e.\u0275\u0275directiveInject(m.Router),e.\u0275\u0275directiveInject(Y.J),e.\u0275\u0275directiveInject(tn.K),e.\u0275\u0275directiveInject(Ge.V))}}static{this.\u0275cmp=e.\u0275\u0275defineComponent({type:n,selectors:[["cd-hosts"]],viewQuery:function(o,i){if(1&o&&(e.\u0275\u0275viewQuery(Ke.O,5),e.\u0275\u0275viewQuery(zf,7),e.\u0275\u0275viewQuery(Xf,7),e.\u0275\u0275viewQuery(kf,7),e.\u0275\u0275viewQuery(jf,7),e.\u0275\u0275viewQuery(Wf,7),e.\u0275\u0275viewQuery(Kf,7),e.\u0275\u0275viewQuery(Qf,7)),2&o){let r;e.\u0275\u0275queryRefresh(r=e.\u0275\u0275loadQuery())&&(i.table=r.first),e.\u0275\u0275queryRefresh(r=e.\u0275\u0275loadQuery())&&(i.servicesTpl=r.first),e.\u0275\u0275queryRefresh(r=e.\u0275\u0275loadQuery())&&(i.hostMetricTmpl=r.first),e.\u0275\u0275queryRefresh(r=e.\u0275\u0275loadQuery())&&(i.hostDimlessTmpl=r.first),e.\u0275\u0275queryRefresh(r=e.\u0275\u0275loadQuery())&&(i.maintenanceConfirmTpl=r.first),e.\u0275\u0275queryRefresh(r=e.\u0275\u0275loadQuery())&&(i.orchTmpl=r.first),e.\u0275\u0275queryRefresh(r=e.\u0275\u0275loadQuery())&&(i.flashTmpl=r.first),e.\u0275\u0275queryRefresh(r=e.\u0275\u0275loadQuery())&&(i.hostNameTpl=r.first)}},inputs:{hiddenColumns:"hiddenColumns",hideMaintenance:"hideMaintenance",hasTableDetails:"hasTableDetails",hideToolHeader:"hideToolHeader",showGeneralActionsOnly:"showGeneralActionsOnly",showExpandClusterBtn:"showExpandClusterBtn",showInlineActions:"showInlineActions"},features:[e.\u0275\u0275ProvidersFeature([{provide:B.E,useValue:new B.E("hosts")}]),e.\u0275\u0275InheritDefinitionFeature],decls:24,vars:3,consts:()=>{let t,o,i,r,p,F,D,x,H;return t=$localize`:␟40661476cb24c89d8b06614998e31d5fbe84eeb6␟5440662980011100752:Hosts List`,o=$localize`:␟5e7f4b1ca49e8d217bd0e12c6f7d6b6a2ade2c18␟4352555506458562289:Overall Performance`,i=$localize`:␟e3638e813c6a583c5e345f61c2d9e3526fe1b2ff␟5619607829369837504:Host overview`,r=$localize`:␟b7a4e1e5a316f8547af1d6d2311a5cec8c5c1d87␟3960101812844258040:${"\ufffd0\ufffd"}:INTERPOLATION:`,p=$localize`:␟7d1dcf2a9146caac0581329acf94806ec69a89a5␟1877522221356492058:Are you sure you want to continue?`,F=$localize`:␟e6e8e8844e9e7a7b626a4699c08b6c0c81297a7b␟2418120038454196116:Data will be available only if Orchestrator is available.`,D=$localize`:␟37a0c0fffef57ba4b1fe7bf2318fc9211267286e␟8590109102084543521:-`,x=$localize`:␟d4baf526199fed59071adf555271791283adc408␟221246938472929738:SSD, NVMEs`,H=$localize`:␟22d5531d79f0d7269a0a752e56a848807dd37095␟1889285841762768492:Flash`,[["nav","ngbNav"],["servicesTpl",""],["hostNameTpl",""],["maintenanceConfirmTpl",""],["hostMetricTmpl",""],["hostDimlessTmpl",""],["orchTmpl",""],["flashTmpl",""],["table",""],t,o,r,p,D,H,["ngbNav","",1,"nav-tabs"],["ngbNavItem",""],["ngbNavLink",""],["ngbNavContent",""],["ngbNavItem","",4,"ngIf"],[3,"ngbNavOutlet"],["name","modal"],["columnMode","flex","selectionType","single",3,"fetchData","setExpandedRow","updateSelection","data","columns","searchableObjects","hasDetails","serverSide","count","maxLimit","toolHeader"],[1,"table-actions"],["id","host-actions",1,"btn-group",3,"permission","selection","tableActions"],["btnColor","light",1,"btn-group",3,"permission","selection","tableActions"],[3,"permissions","selection",4,"cdTableDetail"],[3,"permissions","selection"],["title",i,"uid","y0KGL0iZz","grafanaStyle","two",3,"grafanaPath","type"],[4,"ngFor","ngForOf"],[1,"me-1",3,"key","value"],[3,"ngClass"],["class","text-muted fst-italic",4,"ngIf"],[1,"text-muted","fst-italic"],[4,"ngIf"],["ngbTooltip","Not available. Data could not be fetched from Ceph"],["ngbTooltip",F],["ngbTooltip",x]]},template:function(o,i){if(1&o&&(e.\u0275\u0275elementStart(0,"nav",15,0),e.\u0275\u0275elementContainerStart(2,16),e.\u0275\u0275elementStart(3,"a",17),e.\u0275\u0275i18n(4,9),e.\u0275\u0275elementEnd(),e.\u0275\u0275template(5,Jf,6,14,"ng-template",18),e.\u0275\u0275elementContainerEnd(),e.\u0275\u0275template(6,Zf,1,0,"ng-container",19)(7,eE,4,0,"ng-container",19),e.\u0275\u0275elementEnd(),e.\u0275\u0275element(8,"div",20),e.\u0275\u0275template(9,nE,1,1,"ng-template",null,1,e.\u0275\u0275templateRefExtractor)(11,iE,4,3,"ng-template",null,2,e.\u0275\u0275templateRefExtractor)(13,lE,2,2,"ng-template",null,3,e.\u0275\u0275templateRefExtractor)(15,dE,2,2,"ng-template",null,4,e.\u0275\u0275templateRefExtractor)(17,mE,2,2,"ng-template",null,5,e.\u0275\u0275templateRefExtractor)(19,fE,2,0,"ng-template",null,6,e.\u0275\u0275templateRefExtractor)(21,EE,2,0,"ng-template",null,7,e.\u0275\u0275templateRefExtractor),e.\u0275\u0275element(23,"router-outlet",21)),2&o){const r=e.\u0275\u0275reference(1);e.\u0275\u0275advance(6),e.\u0275\u0275property("ngIf",i.permissions.grafana.read),e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf",i.permissions.grafana.read),e.\u0275\u0275advance(),e.\u0275\u0275property("ngbNavOutlet",r)}},dependencies:[l.NgClass,l.NgForOf,l.NgIf,V.NgbNavContent,V.NgbNav,V.NgbNavItem,V.NgbNavLink,V.NgbNavLinkBase,V.NgbNavOutlet,gt.c,$e,Ke.O,dt.j,Ct.N,m.RouterOutlet,V.NgbTooltip,Bf,mt.l]})}}return n})();const gE=()=>["service_instances","status"];function CE(n,c){if(1&n&&(e.\u0275\u0275elementStart(0,"tr")(1,"td")(2,"dl")(3,"dt")(4,"p"),e.\u0275\u0275i18n(5,6),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(6,"dd")(7,"p"),e.\u0275\u0275i18n(8,7),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(9,"dd")(10,"p"),e.\u0275\u0275i18n(11,8),e.\u0275\u0275elementEnd()()()(),e.\u0275\u0275elementStart(12,"td",18)(13,"p"),e.\u0275\u0275text(14),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(15,"p"),e.\u0275\u0275text(16),e.\u0275\u0275pipe(17,"dimlessBinary"),e.\u0275\u0275elementEnd()()()),2&n){const t=e.\u0275\u0275nextContext();e.\u0275\u0275advance(14),e.\u0275\u0275textInterpolate(t.totalDevices),e.\u0275\u0275advance(2),e.\u0275\u0275textInterpolate1(" ",e.\u0275\u0275pipeBind1(17,2,t.totalCapacity),"")}}function SE(n,c){if(1&n&&(e.\u0275\u0275elementStart(0,"tr")(1,"td")(2,"dl")(3,"dt")(4,"p"),e.\u0275\u0275i18n(5,9),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(6,"dd")(7,"p"),e.\u0275\u0275i18n(8,10),e.\u0275\u0275elementEnd()()()()()),2&n){const t=e.\u0275\u0275nextContext();e.\u0275\u0275advance(8),e.\u0275\u0275i18nExp(t.deploymentDescText),e.\u0275\u0275i18nApply(8)}}let hE=(()=>{class n{constructor(t,o,i,r,p){this.wizardStepsService=t,this.cephServiceService=o,this.dimlessBinary=i,this.hostService=r,this.osdService=p,this.hosts=[],this.totalCapacity=0,this.services=[],this.totalCPUs=0,this.totalMemory=0,this.isSimpleDeployment=!0}ngOnInit(){let t=0,o=0,i=0,r=0,p=0,F=0;this.isSimpleDeployment=this.osdService.isDeployementModeSimple;const D=new Do.n(()=>{});this.hostService.list(D.toParams(),"true").subscribe(x=>{this.hosts=x,this.hostsCount=this.hosts.length,E().forEach(this.hosts,H=>{this.totalCPUs=this.totalCPUs+H.cpu_count,this.totalMemory=this.totalMemory+1024*H.memory_total_kb}),this.totalMemory=this.dimlessBinary.transform(this.totalMemory)}),this.osdService.osdDevices.data&&(t=this.osdService.osdDevices.data?.length,o=this.osdService.osdDevices.data.capacity),this.osdService.osdDevices.wal&&(i=this.osdService.osdDevices.wal?.length,r=this.osdService.osdDevices.wal.capacity),this.osdService.osdDevices.db&&(p=this.osdService.osdDevices.db?.length,F=this.osdService.osdDevices.db.capacity),this.isSimpleDeployment&&this.osdService.getDeploymentOptions().subscribe(x=>{E().isEmpty(x)||Object.keys(x.options).forEach(H=>{this.osdService.selectedFormValues&&this.osdService.selectedFormValues.get("deploymentOption").value===H&&(this.deploymentDescText=x.options[H].desc)})}),this.totalDevices=t+i+p,this.osdService.osdDevices.totalDevices=this.totalDevices,this.totalCapacity=o+r+F}static{this.\u0275fac=function(o){return new(o||n)(e.\u0275\u0275directiveInject(pa.m),e.\u0275\u0275directiveInject(yo.t),e.\u0275\u0275directiveInject(mt.l),e.\u0275\u0275directiveInject(Vt.I),e.\u0275\u0275directiveInject(It))}}static{this.\u0275cmp=e.\u0275\u0275defineComponent({type:n,selectors:[["cd-create-cluster-review"]],decls:32,vars:16,consts:()=>{let t,o,i,r,p,F,D,x,H,X;return t=$localize`:␟62b266042bac4c3a2eff4834e40fb9dc4767a709␟1672833822498778562:Cluster Resources`,o=$localize`:␟099b441d49333b3c6d30b36dc0a4763e64c78920␟4435206372750903836:Hosts`,i=$localize`:␟fb6f3e2a26f3a6f2bc33f91adcd60502dbe5adac␟4027647877328291519:CPUs`,r=$localize`:␟58d4a9814864741040bc5905b6a368836e683f76␟1548129644093494406:Memory`,p=$localize`:␟dbb81e566a861d4aa0a094366e4083e50863ee92␟4553130505019039520:Host Details`,F=$localize`:␟57e6e608ece53a26f6d509c90ed4f83e467741af␟271534463283595544:Storage Capacity`,D=$localize`:␟19ece2cb2b9097c0f75af8e62b4b3b25d399a006␟2869934204931600128:Number of devices`,x=$localize`:␟b161e3d25fd1b42a781f4e923a58a94925988ddf␟2961293007857933370:Raw capacity`,H=$localize`:␟57e6e608ece53a26f6d509c90ed4f83e467741af␟271534463283595544:Storage Capacity`,X=$localize`:␟d1ef212ae133e173d7773798b16375bf8a39f040␟7995425020012633103:${"\ufffd0\ufffd"}:INTERPOLATION:`,[["simpleDeploymentTextTpl",""],t,o,i,r,p,F,D,x,H,X,["cdsRow",""],["cdsCol",""],[1,"cd-header"],[1,"cds--data-table--sort","cds--data-table--no-border","cds--data-table","cds--data-table--md"],[1,"bold"],[4,"ngIf","ngIfElse"],[3,"hiddenColumns","hideToolHeader","hasTableDetails","showGeneralActionsOnly","showExpandClusterBtn","showInlineActions"],[1,"pt-5"]]},template:function(o,i){if(1&o&&(e.\u0275\u0275elementStart(0,"div",11)(1,"div",12)(2,"fieldset")(3,"legend",13),e.\u0275\u0275i18n(4,1),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(5,"table",14)(6,"tbody")(7,"tr")(8,"td",15),e.\u0275\u0275i18n(9,2),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(10,"td"),e.\u0275\u0275text(11),e.\u0275\u0275elementEnd()(),e.\u0275\u0275template(12,CE,18,4,"tr",16),e.\u0275\u0275elementStart(13,"tr")(14,"td",15),e.\u0275\u0275i18n(15,3),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(16,"td"),e.\u0275\u0275text(17),e.\u0275\u0275pipe(18,"empty"),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(19,"tr")(20,"td",15),e.\u0275\u0275i18n(21,4),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(22,"td"),e.\u0275\u0275text(23),e.\u0275\u0275pipe(24,"empty"),e.\u0275\u0275elementEnd()()()()()()(),e.\u0275\u0275elementStart(25,"div",11)(26,"div",12)(27,"legend",13),e.\u0275\u0275i18n(28,5),e.\u0275\u0275elementEnd(),e.\u0275\u0275element(29,"cd-hosts",17),e.\u0275\u0275elementEnd()(),e.\u0275\u0275template(30,SE,9,1,"ng-template",null,0,e.\u0275\u0275templateRefExtractor)),2&o){const r=e.\u0275\u0275reference(31);e.\u0275\u0275advance(11),e.\u0275\u0275textInterpolate(i.hostsCount),e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf",!i.isSimpleDeployment)("ngIfElse",r),e.\u0275\u0275advance(5),e.\u0275\u0275textInterpolate(e.\u0275\u0275pipeBind1(18,11,i.totalCPUs)),e.\u0275\u0275advance(6),e.\u0275\u0275textInterpolate(e.\u0275\u0275pipeBind1(24,13,i.totalMemory)),e.\u0275\u0275advance(6),e.\u0275\u0275property("hiddenColumns",e.\u0275\u0275pureFunction0(15,gE))("hideToolHeader",!0)("hasTableDetails",!1)("showGeneralActionsOnly",!0)("showExpandClusterBtn",!1)("showInlineActions",!1)}},dependencies:[l.NgIf,L.ColumnDirective,L.RowDirective,Sa,mt.l,ps.y],styles:["cd-hosts[_ngcontent-%COMP%]     .nav{display:none}"]})}}return n})();const TE=["skipConfirmTpl"],FE=()=>({lg:2,md:2,sm:2}),vE=()=>({lg:14,md:14,sm:14}),ME=()=>["service_instances"],RE=()=>["mon","mgr","crash","agent"],OE=()=>["status.running","status.size","status.last_refresh"];function PE(n,c){if(1&n){const t=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"div",15)(1,"div",16)(2,"div",17),e.\u0275\u0275element(3,"img",18),e.\u0275\u0275elementStart(4,"h3",19),e.\u0275\u0275i18n(5,1),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(6,"div",20)(7,"h4",21),e.\u0275\u0275i18n(8,2),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(9,"div",21)(10,"button",22),e.\u0275\u0275listener("click",function(){e.\u0275\u0275restoreView(t);const i=e.\u0275\u0275nextContext();return e.\u0275\u0275resetView(i.createCluster())}),e.\u0275\u0275i18n(11,3),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(12,"button",23),e.\u0275\u0275listener("click",function(){e.\u0275\u0275restoreView(t);const i=e.\u0275\u0275nextContext();return e.\u0275\u0275resetView(i.skipClusterCreation())}),e.\u0275\u0275i18n(13,4),e.\u0275\u0275elementEnd()()()()()()}if(2&n){const t=e.\u0275\u0275nextContext();e.\u0275\u0275advance(3),e.\u0275\u0275property("src",t.projectConstants.cephLogo,e.\u0275\u0275sanitizeUrl),e.\u0275\u0275advance(2),e.\u0275\u0275i18nExp(t.projectConstants.projectName),e.\u0275\u0275i18nApply(5)}}function bE(n,c){1&n&&(e.\u0275\u0275elementStart(0,"div",35)(1,"h4",36),e.\u0275\u0275i18n(2,7),e.\u0275\u0275elementEnd(),e.\u0275\u0275element(3,"cd-hosts",37),e.\u0275\u0275elementEnd()),2&n&&(e.\u0275\u0275advance(3),e.\u0275\u0275property("hiddenColumns",e.\u0275\u0275pureFunction0(5,ME))("hideMaintenance",!0)("hasTableDetails",!1)("showGeneralActionsOnly",!0)("showExpandClusterBtn",!1))}function NE(n,c){if(1&n){const t=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"div",35)(1,"h4",36),e.\u0275\u0275i18n(2,8),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(3,"div",38)(4,"cd-osd-form",39),e.\u0275\u0275listener("emitDriveGroup",function(i){e.\u0275\u0275restoreView(t);const r=e.\u0275\u0275nextContext(2);return e.\u0275\u0275resetView(r.setDriveGroup(i))})("emitDeploymentOption",function(i){e.\u0275\u0275restoreView(t);const r=e.\u0275\u0275nextContext(2);return e.\u0275\u0275resetView(r.setDeploymentOptions(i))})("emitMode",function(i){e.\u0275\u0275restoreView(t);const r=e.\u0275\u0275nextContext(2);return e.\u0275\u0275resetView(r.setDeploymentMode(i))}),e.\u0275\u0275elementEnd()()()}2&n&&(e.\u0275\u0275advance(4),e.\u0275\u0275property("hideTitle",!0)("hideSubmitBtn",!0))}function IE(n,c){1&n&&(e.\u0275\u0275elementStart(0,"div",35)(1,"h4",36),e.\u0275\u0275i18n(2,9),e.\u0275\u0275elementEnd(),e.\u0275\u0275element(3,"cd-services",40),e.\u0275\u0275elementEnd()),2&n&&(e.\u0275\u0275advance(3),e.\u0275\u0275property("hasDetails",!1)("hiddenServices",e.\u0275\u0275pureFunction0(4,RE))("hiddenColumns",e.\u0275\u0275pureFunction0(5,OE))("routedModal",!1))}function AE(n,c){1&n&&(e.\u0275\u0275elementStart(0,"div",35),e.\u0275\u0275element(1,"cd-create-cluster-review"),e.\u0275\u0275elementEnd())}function DE(n,c){if(1&n){const t=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"button",41),e.\u0275\u0275listener("click",function(){e.\u0275\u0275restoreView(t);const i=e.\u0275\u0275nextContext(2);return e.\u0275\u0275resetView(i.onSkip())}),e.\u0275\u0275i18n(1,10),e.\u0275\u0275elementEnd()}}function yE(n,c){if(1&n){const t=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"div",24)(1,"div",25)(2,"div",26),e.\u0275\u0275i18n(3,5),e.\u0275\u0275elementEnd(),e.\u0275\u0275element(4,"cd-wizard",27),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(5,"div",28),e.\u0275\u0275elementContainerStart(6,29),e.\u0275\u0275template(7,bE,4,6,"div",30)(8,NE,5,2,"div",30)(9,IE,4,6,"div",30)(10,AE,2,0,"div",30),e.\u0275\u0275elementContainerEnd(),e.\u0275\u0275elementStart(11,"div",31),e.\u0275\u0275template(12,DE,2,0,"button",32),e.\u0275\u0275elementStart(13,"cd-back-button",33),e.\u0275\u0275listener("backAction",function(){e.\u0275\u0275restoreView(t);const i=e.\u0275\u0275nextContext();return e.\u0275\u0275resetView(i.onPreviousStep())}),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(14,"button",34),e.\u0275\u0275listener("click",function(){e.\u0275\u0275restoreView(t);const i=e.\u0275\u0275nextContext();return e.\u0275\u0275resetView(i.onNextStep())}),e.\u0275\u0275i18n(15,6),e.\u0275\u0275elementEnd()()()()}if(2&n){const t=e.\u0275\u0275nextContext();e.\u0275\u0275advance(),e.\u0275\u0275property("columnNumbers",e.\u0275\u0275pureFunction0(11,FE)),e.\u0275\u0275advance(3),e.\u0275\u0275property("stepsTitle",t.stepTitles),e.\u0275\u0275advance(),e.\u0275\u0275property("columnNumbers",e.\u0275\u0275pureFunction0(12,vE)),e.\u0275\u0275advance(),e.\u0275\u0275property("ngSwitch",null==t.currentStep?null:t.currentStep.stepIndex),e.\u0275\u0275advance(),e.\u0275\u0275property("ngSwitchCase",0),e.\u0275\u0275advance(),e.\u0275\u0275property("ngSwitchCase",1),e.\u0275\u0275advance(),e.\u0275\u0275property("ngSwitchCase",2),e.\u0275\u0275advance(),e.\u0275\u0275property("ngSwitchCase",3),e.\u0275\u0275advance(2),e.\u0275\u0275property("ngIf","Create OSDs"===(null==t.stepTitles[null==t.currentStep?null:t.currentStep.stepIndex]?null:t.stepTitles[null==t.currentStep?null:t.currentStep.stepIndex].label)),e.\u0275\u0275advance(),e.\u0275\u0275property("name",t.showCancelButtonLabel()),e.\u0275\u0275advance(2),e.\u0275\u0275i18nExp(t.showSubmitButtonLabel()),e.\u0275\u0275i18nApply(15)}}function LE(n,c){1&n&&(e.\u0275\u0275elementStart(0,"span"),e.\u0275\u0275i18nStart(1,11),e.\u0275\u0275element(2,"strong"),e.\u0275\u0275i18nEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(3,"div",42),e.\u0275\u0275i18n(4,12),e.\u0275\u0275elementEnd())}let $E=(()=>{class n{constructor(t,o,i,r,p,F,D,x,H,X,Z,re,pe){this.authStorageService=t,this.wizardStepsService=o,this.router=i,this.hostService=r,this.notificationService=p,this.actionLabels=F,this.clusterService=D,this.modalService=x,this.taskWrapper=H,this.osdService=X,this.route=Z,this.location=re,this.changeDetectorRef=pe,this.projectConstants=f.D5,this.stepTitles=[{label:"Add Hosts"},{label:"Create OSDs",complete:!1},{label:"Create Services",complete:!1},{label:"Review",complete:!1}],this.startClusterCreation=!1,this.observables=[],this.driveGroup=new qa,this.driveGroups=[],this.selectedOption={},this.simpleDeployment=!0,this.stepsToSkip={},this.submitAction=new e.EventEmitter,this.permissions=this.authStorageService.getPermissions(),this.currentStepSub=this.wizardStepsService.getCurrentStep().subscribe(be=>{this.currentStep=be}),this.currentStep.stepIndex=0}ngAfterViewInit(){this.changeDetectorRef.detectChanges()}ngOnInit(){this.stepTitles.forEach((t,o)=>{t.onClick=()=>this.currentStep.stepIndex=o}),this.route.queryParams.subscribe(t=>{const o=t.welcome;o&&(this.startClusterCreation=o)}),this.osdService.getDeploymentOptions().subscribe(t=>{this.deploymentOption=t,this.selectedOption={option:t.recommended_option,encrypted:!1}}),this.stepTitles.forEach(t=>{this.stepsToSkip[t.label]=!1})}onStepClick(t){this.wizardStepsService.setCurrentStep(t)}createCluster(){this.startClusterCreation=!1}skipClusterCreation(){const t={titleText:$localize`Warning`,buttonText:$localize`Continue`,warning:!0,bodyTpl:this.skipConfirmTpl,showSubmit:!0,onSubmit:()=>{this.clusterService.updateStatus("POST_INSTALLED").subscribe({error:()=>this.modalService.dismissAll(),complete:()=>{this.notificationService.show(Le._.info,$localize`Cluster expansion skipped by user`),this.router.navigate(["/dashboard"]),this.modalService.dismissAll()}})}};this.modalService.show(un.M,t)}onSubmit(){if(!this.stepsToSkip["Add Hosts"]){const t=new Do.n(()=>{});this.hostService.list(t.toParams(),"false").subscribe(o=>{o.forEach(i=>{const r=i.labels.indexOf("_no_schedule",0);r>-1&&(i.labels.splice(r,1),this.observables.push(this.hostService.update(i.hostname,!0,i.labels)))}),(0,K.forkJoin)(this.observables).pipe((0,u.finalize)(()=>this.clusterService.updateStatus("POST_INSTALLED").subscribe(()=>{this.notificationService.show(Le._.success,$localize`Cluster expansion was successful`),this.router.navigate(["/dashboard"])}))).subscribe({error:i=>i.preventDefault()})})}if(!this.stepsToSkip["Create OSDs"]){if(this.driveGroup){const t=this.authStorageService.getUsername();this.driveGroup.setName(`dashboard-${t}-${E().now()}`),this.driveGroups.push(this.driveGroup.spec)}if(this.simpleDeployment){const t=this.deploymentOption?.options[this.selectedOption.option].title,o=$localize`${t} deployment`;this.taskWrapper.wrapTaskAroundCall({task:new ie.O("osd/"+f.Qp.CREATE,{tracking_id:o}),call:this.osdService.create([this.selectedOption],o,"predefined")}).subscribe({error:i=>i.preventDefault(),complete:()=>{this.submitAction.emit()}})}else if(this.osdService.osdDevices.totalDevices>0){this.driveGroup.setFeature("encrypted",this.selectedOption.encrypted);const t=E().join(E().map(this.driveGroups,"service_id"),", ");this.taskWrapper.wrapTaskAroundCall({task:new ie.O("osd/"+f.Qp.CREATE,{tracking_id:t}),call:this.osdService.create(this.driveGroups,t)}).subscribe({error:o=>o.preventDefault(),complete:()=>{this.submitAction.emit(),this.osdService.osdDevices=[]}})}}}setDriveGroup(t){this.driveGroup=t}setDeploymentOptions(t){this.selectedOption=t}setDeploymentMode(t){this.simpleDeployment=t}onNextStep(){this.wizardStepsService.isLastStep()?this.onSubmit():(this.wizardStepsService.getCurrentStep().subscribe(t=>{this.currentStep=t}),this.wizardStepsService.moveToNextStep())}onPreviousStep(){this.wizardStepsService.isFirstStep()?this.location.back():this.wizardStepsService.moveToPreviousStep()}onSkip(){this.stepsToSkip[this.stepTitles[this.currentStep.stepIndex].label]=!0,this.onNextStep()}showSubmitButtonLabel(){return this.wizardStepsService.isLastStep()?$localize`Expand Cluster`:this.actionLabels.NEXT}showCancelButtonLabel(){return this.wizardStepsService.isFirstStep()?this.actionLabels.CANCEL:this.actionLabels.BACK}ngOnDestroy(){this.currentStepSub.unsubscribe(),this.osdService.selectedFormValues=null}static{this.\u0275fac=function(o){return new(o||n)(e.\u0275\u0275directiveInject(_.v),e.\u0275\u0275directiveInject(pa.m),e.\u0275\u0275directiveInject(m.Router),e.\u0275\u0275directiveInject(Vt.I),e.\u0275\u0275directiveInject(Y.J),e.\u0275\u0275directiveInject(f.Ss),e.\u0275\u0275directiveInject(Sd),e.\u0275\u0275directiveInject(Ge.V),e.\u0275\u0275directiveInject(w.a),e.\u0275\u0275directiveInject(It),e.\u0275\u0275directiveInject(m.ActivatedRoute),e.\u0275\u0275directiveInject(l.Location),e.\u0275\u0275directiveInject(e.ChangeDetectorRef))}}static{this.\u0275cmp=e.\u0275\u0275defineComponent({type:n,selectors:[["cd-create-cluster"]],viewQuery:function(o,i){if(1&o&&e.\u0275\u0275viewQuery(TE,7),2&o){let r;e.\u0275\u0275queryRefresh(r=e.\u0275\u0275loadQuery())&&(i.skipConfirmTpl=r.first)}},outputs:{submitAction:"submitAction"},decls:4,vars:2,consts:()=>{let t,o,i,r,p,F,D,x,H,X,Z,re;return t=$localize`:␟453dc2810080a744223faac6da2b3ee9ed63a583␟5329259221155114698:Welcome to ${"\ufffd0\ufffd"}:INTERPOLATION:`,o=$localize`:␟d1eec874e1928ca53baa9914781ce203b5f72b0c␟1475639034324532424:Please expand your cluster first`,i=$localize`:␟a2195fd96b0a00f560449b50bd032e6d9b357730␟2176230351113290618:Expand Cluster`,r=$localize`:␟eb075d0450deb6f381616f7da4b9244ced843053␟4563965495368336177:Skip`,p=$localize`:␟a2195fd96b0a00f560449b50bd032e6d9b357730␟2176230351113290618:Expand Cluster`,F=$localize`:␟176873b4533ddeabf95992cbd7b91b9d01c6d557␟5965337929506718932:${"\ufffd0\ufffd"}:INTERPOLATION:`,D=$localize`:␟55b6ce65571b8893440a4fc92776570f8fe7cc97␟1627256310175522287:Add Hosts`,x=$localize`:␟162f763675c24b557a60eba0758558222369e0c7␟7104564575539526708:Create OSDs`,H=$localize`:␟fef7a7b8db05c351c5287db48488abca530bdb54␟8922582554481662245:Create Services`,X=$localize`:␟eb075d0450deb6f381616f7da4b9244ced843053␟4563965495368336177:Skip`,Z=$localize`:␟1ed90ec4409b9f6b552982d96f89db27259e763c␟692120749391861296:You are about to skip the cluster expansion process. You’ll need to ${"\ufffd#2\ufffd"}:START_TAG_STRONG:navigate through the menu to add hosts and services.${"\ufffd/#2\ufffd"}:CLOSE_TAG_STRONG:`,re=$localize`:␟7d1dcf2a9146caac0581329acf94806ec69a89a5␟1877522221356492058:Are you sure you want to continue?`,[["skipConfirmTpl",""],t,o,i,r,p,F,D,x,H,X,Z,re,["class","container h-75",4,"ngIf"],["cdsRow","","class","form",4,"ngIf"],[1,"container","h-75"],["cdsRow","",1,"h-100","justify-content-center","align-items-center"],[1,"blank-page"],["alt","Ceph",1,"img-fluid","mx-auto","d-block",3,"src"],[1,"text-center","m-2"],[1,"m-4"],[1,"text-center"],["cdsButton","primary","name","expand-cluster","aria-label","Expand Cluster",3,"click"],["cdsButton","secondary","name","skip-cluster-creation","aria-label","Skip",3,"click"],["cdsRow","",1,"form"],["cdsCol","",1,"indicator-wrapper",3,"columnNumbers"],[1,"form-header"],[3,"stepsTitle"],["cdsCol","",3,"columnNumbers"],[3,"ngSwitch"],["class","ms-5",4,"ngSwitchCase"],["cdsRow","",1,"m-5"],["cdsButton","secondary","class","me-3","id","skipStepBtn","aria-label","Skip this step",3,"click",4,"ngIf"],["buttonType","secondary","aria-label","Close",3,"backAction","name"],["cdsButton","primary","aria-label","Next",3,"click"],[1,"ms-5"],[1,"title"],[3,"hiddenColumns","hideMaintenance","hasTableDetails","showGeneralActionsOnly","showExpandClusterBtn"],[1,"alignForm"],[3,"emitDriveGroup","emitDeploymentOption","emitMode","hideTitle","hideSubmitBtn"],[3,"hasDetails","hiddenServices","hiddenColumns","routedModal"],["cdsButton","secondary","id","skipStepBtn","aria-label","Skip this step",1,"me-3",3,"click"],[1,"mt-4"]]},template:function(o,i){1&o&&e.\u0275\u0275template(0,PE,14,2,"div",13)(1,yE,16,13,"div",14)(2,LE,5,0,"ng-template",null,0,e.\u0275\u0275templateRefExtractor),2&o&&(e.\u0275\u0275property("ngIf",i.startClusterCreation),e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf",!i.startClusterCreation))},dependencies:[l.NgIf,l.NgSwitch,l.NgSwitchCase,vd.X,Md.t,De.S,L.ColumnDirective,L.RowDirective,L.Button,ls,us,hE,Sa],styles:[".container-fluid[_ngcontent-%COMP%]{align-items:flex-start;display:flex;padding-left:0;width:100%}cd-hosts[_ngcontent-%COMP%]     .nav{display:none}cd-osd-form[_ngcontent-%COMP%]     .card{border:0}cd-osd-form[_ngcontent-%COMP%]     .accordion{margin-left:-1.5rem}"]})}}return n})();var xE=s(17612);const UE=["tree"],wE=["badge"],GE=(n,c,t)=>[n,c,t],HE=(n,c)=>({node:n,depth:c}),VE=n=>({"type-osd":n}),BE=()=>["in","up"],zE=()=>["down","out","destroyed"],XE=(n,c)=>({"badge-success":n,"badge-danger":c}),kE=n=>({node:n,depth:0});function jE(n,c){if(1&n&&e.\u0275\u0275element(0,"i",14),2&n){const t=e.\u0275\u0275nextContext();e.\u0275\u0275property("ngClass",e.\u0275\u0275pureFunction3(1,GE,t.icons.large,t.icons.spinner,t.icons.spin))}}function WE(n,c){1&n&&e.\u0275\u0275elementContainer(0)}function KE(n,c){if(1&n&&(e.\u0275\u0275elementContainerStart(0),e.\u0275\u0275template(1,WE,1,0,"ng-container",17),e.\u0275\u0275elementContainerEnd()),2&n){const t=c.$implicit,o=e.\u0275\u0275nextContext(2).depth;e.\u0275\u0275nextContext();const i=e.\u0275\u0275reference(12);e.\u0275\u0275advance(),e.\u0275\u0275property("ngTemplateOutlet",i)("ngTemplateOutletContext",e.\u0275\u0275pureFunction2(2,HE,t,o+1))}}function QE(n,c){if(1&n&&(e.\u0275\u0275elementContainerStart(0),e.\u0275\u0275template(1,KE,2,5,"ng-container",12),e.\u0275\u0275elementContainerEnd()),2&n){const t=e.\u0275\u0275nextContext().node;e.\u0275\u0275advance(),e.\u0275\u0275property("ngForOf",t.children)}}function YE(n,c){if(1&n&&(e.\u0275\u0275elementStart(0,"cds-tree-node",15),e.\u0275\u0275template(1,QE,2,1,"ng-container",16),e.\u0275\u0275elementEnd()),2&n){const t=c.node,o=c.depth;e.\u0275\u0275property("node",t)("depth",o),e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf",(null==t?null:t.children)&&(null==t||null==t.children?null:t.children.length))}}function JE(n,c){if(1&n&&(e.\u0275\u0275elementStart(0,"span",20),e.\u0275\u0275text(1),e.\u0275\u0275elementEnd()),2&n){const t=e.\u0275\u0275nextContext().$implicit;e.\u0275\u0275property("ngClass",e.\u0275\u0275pureFunction2(4,XE,e.\u0275\u0275pureFunction0(2,BE).includes(null==t?null:t.status),e.\u0275\u0275pureFunction0(3,zE).includes(null==t?null:t.status))),e.\u0275\u0275advance(),e.\u0275\u0275textInterpolate1(" ",t.status," ")}}function ZE(n,c){if(1&n&&(e.\u0275\u0275template(0,JE,2,7,"span",18),e.\u0275\u0275elementStart(1,"span"),e.\u0275\u0275text(2,"\xa0"),e.\u0275\u0275elementEnd(),e.\u0275\u0275element(3,"span",19)),2&n){const t=c.$implicit;e.\u0275\u0275property("ngIf",null==t?null:t.status),e.\u0275\u0275advance(3),e.\u0275\u0275property("ngClass",e.\u0275\u0275pureFunction1(3,VE,"osd"===(null==t?null:t.type)))("innerHTML",null==t?null:t.name,e.\u0275\u0275sanitizeHtml)}}function qE(n,c){1&n&&e.\u0275\u0275elementContainer(0)}function eg(n,c){if(1&n&&(e.\u0275\u0275elementContainerStart(0),e.\u0275\u0275template(1,qE,1,0,"ng-container",17),e.\u0275\u0275elementContainerEnd()),2&n){const t=c.$implicit;e.\u0275\u0275nextContext();const o=e.\u0275\u0275reference(12);e.\u0275\u0275advance(),e.\u0275\u0275property("ngTemplateOutlet",o)("ngTemplateOutletContext",e.\u0275\u0275pureFunction1(2,kE,t))}}function tg(n,c){if(1&n&&(e.\u0275\u0275elementStart(0,"div",21)(1,"legend"),e.\u0275\u0275text(2),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(3,"div"),e.\u0275\u0275element(4,"cd-table-key-value",22),e.\u0275\u0275elementEnd()()),2&n){const t=e.\u0275\u0275nextContext();e.\u0275\u0275advance(2),e.\u0275\u0275textInterpolate(t.metadataTitle),e.\u0275\u0275advance(2),e.\u0275\u0275property("data",t.metadata)}}let ng=(()=>{class n{constructor(t,o){this.crushRuleService=t,this.timerService=o,this.sub=new K.Subscription,this.icons=g.FI,this.loadingIndicator=!0,this.nodes=[],this.metadataKeyMap={}}ngOnInit(){this.sub=this.timerService.get(()=>this.crushRuleService.getInfo(),5e3).subscribe(t=>{this.loadingIndicator=!1,this.nodes=this.abstractTreeData(t)})}ngOnDestroy(){this.sub.unsubscribe()}abstractTreeData(t){const o=t.nodes||[],i=t.roots||[],r={};if(0===o.length)return[{label:"No nodes!"}];const p=[];return o.reverse().forEach(D=>{i.includes(D.id)&&p.push(D.id),r[D.id]=this.generateTreeLeaf(D,r)}),p.map(D=>r[D])}generateTreeLeaf(t,o){const i=t.id;this.metadataKeyMap[i]=t;const r=t.name+" ("+t.type+")",p=t.status,F=[],D={label:this.labelTpl,labelContext:{name:r,status:p,type:t?.type},value:r,id:i,expanded:!0,name:r,status:p,cdId:i,type:t.type};return t?.children?.length&&(t.children.sort().forEach(x=>{F.push(o[x])}),D.children=F),D}onNodeSelected(t){if(void 0!==t.id){const{name:o,type:i,status:r,...p}=this.metadataKeyMap[Number(t.id)];this.metadata=p,this.metadataTitle=o+" ("+i+")"}else delete this.metadata,delete this.metadataTitle}static{this.\u0275fac=function(o){return new(o||n)(e.\u0275\u0275directiveInject(xE.j),e.\u0275\u0275directiveInject(Ea.H))}}static{this.\u0275cmp=e.\u0275\u0275defineComponent({type:n,selectors:[["cd-crushmap"]],viewQuery:function(o,i){if(1&o&&(e.\u0275\u0275viewQuery(UE,5),e.\u0275\u0275viewQuery(wE,5)),2&o){let r;e.\u0275\u0275queryRefresh(r=e.\u0275\u0275loadQuery())&&(i.tree=r.first),e.\u0275\u0275queryRefresh(r=e.\u0275\u0275loadQuery())&&(i.labelTpl=r.first)}},decls:17,vars:4,consts:()=>{let t;return t=$localize`:␟738de688b22fba5d0dc7a5e549996838dddad0ee␟7959354849604681218:CRUSH map viewer`,[["tree",""],["nodeTemplateRef",""],["badge",""],t,[1,"row"],[1,"col-sm-12","col-lg-12"],[1,"card"],[1,"card-header"],[1,"card-body"],[1,"col-sm-6","col-lg-6","tree-container"],[3,"ngClass",4,"ngIf"],[3,"select","isMultiSelect"],[4,"ngFor","ngForOf"],["class","col-sm-6 col-lg-6 metadata",4,"ngIf"],[3,"ngClass"],[3,"node","depth"],[4,"ngIf"],[4,"ngTemplateOutlet","ngTemplateOutletContext"],["class","badge",3,"ngClass",4,"ngIf"],[1,"node-name",3,"ngClass","innerHTML"],[1,"badge",3,"ngClass"],[1,"col-sm-6","col-lg-6","metadata"],[3,"data"]]},template:function(o,i){if(1&o){const r=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"div",4)(1,"div",5)(2,"div",6)(3,"div",7),e.\u0275\u0275i18n(4,3),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(5,"div",8)(6,"div",4)(7,"div",9),e.\u0275\u0275template(8,jE,1,5,"i",10),e.\u0275\u0275elementStart(9,"cds-tree-view",11,0),e.\u0275\u0275listener("select",function(F){return e.\u0275\u0275restoreView(r),e.\u0275\u0275resetView(i.onNodeSelected(F))}),e.\u0275\u0275template(11,YE,2,3,"ng-template",null,1,e.\u0275\u0275templateRefExtractor)(13,ZE,4,5,"ng-template",null,2,e.\u0275\u0275templateRefExtractor)(15,eg,2,4,"ng-container",12),e.\u0275\u0275elementEnd()(),e.\u0275\u0275template(16,tg,5,2,"div",13),e.\u0275\u0275elementEnd()()()()()}2&o&&(e.\u0275\u0275advance(8),e.\u0275\u0275property("ngIf",i.loadingIndicator),e.\u0275\u0275advance(),e.\u0275\u0275property("isMultiSelect",!1),e.\u0275\u0275advance(6),e.\u0275\u0275property("ngForOf",i.nodes),e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf",i.metadata))},dependencies:[l.NgClass,l.NgForOf,l.NgIf,l.NgTemplateOutlet,Pt.i,L.TreeViewComponent,L.TreeNodeComponent],styles:[".tree-container[_ngcontent-%COMP%]{height:calc(100vh - 200px);overflow-y:auto}"]})}}return n})(),og=(()=>{class n{constructor(t){this.http=t}getLogs(){return this.http.get("api/logs/all")}validateDashboardUrl(t){return this.http.get(`api/grafana/validation/${t}`)}static{this.\u0275fac=function(o){return new(o||n)(e.\u0275\u0275inject(h.HttpClient))}}static{this.\u0275prov=e.\u0275\u0275defineInjectable({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();var ig=s(30833);let ag=(()=>{class n{download(t,o){(0,ig.saveAs)(new Blob([t]),o)}static{this.\u0275fac=function(o){return new(o||n)}}static{this.\u0275prov=e.\u0275\u0275defineInjectable({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();function sg(n,c){if(1&n){const t=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"button",5),e.\u0275\u0275listener("click",function(){e.\u0275\u0275restoreView(t);const i=e.\u0275\u0275nextContext();return e.\u0275\u0275resetView(i.download("json"))}),e.\u0275\u0275namespaceSVG(),e.\u0275\u0275element(1,"svg",2),e.\u0275\u0275namespaceHTML(),e.\u0275\u0275elementStart(2,"span"),e.\u0275\u0275text(3,"\xa0JSON"),e.\u0275\u0275elementEnd()()}if(2&n){const t=e.\u0275\u0275nextContext();e.\u0275\u0275advance(),e.\u0275\u0275property("cdsIcon",t.icons.code)}}function rg(n,c){if(1&n){const t=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"button",5),e.\u0275\u0275listener("click",function(){e.\u0275\u0275restoreView(t);const i=e.\u0275\u0275nextContext();return e.\u0275\u0275resetView(i.download())}),e.\u0275\u0275namespaceSVG(),e.\u0275\u0275element(1,"svg",2),e.\u0275\u0275namespaceHTML(),e.\u0275\u0275elementStart(2,"span"),e.\u0275\u0275text(3,"\xa0Text"),e.\u0275\u0275elementEnd()()}if(2&n){const t=e.\u0275\u0275nextContext();e.\u0275\u0275advance(),e.\u0275\u0275property("cdsIcon",t.icons.document)}}let Ts=(()=>{class n{constructor(t){this.textToDownloadService=t,this.title=$localize`Download`,this.icons=g.FI}download(t){this.fileName=`${this.fileName}_${(new Date).toLocaleDateString()}`,"json"===t?this.textToDownloadService.download(JSON.stringify(this.objectItem,null,2),`${this.fileName}.json`):this.textToDownloadService.download(this.textItem,`${this.fileName}.txt`)}static{this.\u0275fac=function(o){return new(o||n)(e.\u0275\u0275directiveInject(ag))}}static{this.\u0275cmp=e.\u0275\u0275defineComponent({type:n,selectors:[["cd-download-button"]],inputs:{objectItem:"objectItem",textItem:"textItem",fileName:"fileName",title:"title"},decls:7,vars:4,consts:[["ngbDropdown","","placement","bottom-right"],["type","button","ngbDropdownToggle","",1,"btn","btn-light","dropdown-toggle-split",3,"title"],["size","16",3,"cdsIcon"],["ngbDropdownMenu",""],["ngbDropdownItem","",3,"click",4,"ngIf"],["ngbDropdownItem","",3,"click"]],template:function(o,i){1&o&&(e.\u0275\u0275elementStart(0,"div",0)(1,"button",1),e.\u0275\u0275namespaceSVG(),e.\u0275\u0275element(2,"svg",2),e.\u0275\u0275text(3,"\xa0 "),e.\u0275\u0275elementEnd(),e.\u0275\u0275namespaceHTML(),e.\u0275\u0275elementStart(4,"div",3),e.\u0275\u0275template(5,sg,4,1,"button",4)(6,rg,4,1,"button",4),e.\u0275\u0275elementEnd()()),2&o&&(e.\u0275\u0275advance(),e.\u0275\u0275property("title",i.title),e.\u0275\u0275advance(),e.\u0275\u0275property("cdsIcon",i.icons.download),e.\u0275\u0275advance(3),e.\u0275\u0275property("ngIf",i.objectItem),e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf",i.textItem))},dependencies:[l.NgIf,De.S,V.NgbDropdown,V.NgbDropdownToggle,V.NgbDropdownMenu,V.NgbDropdownItem,V.NgbDropdownButtonItem,L.IconDirective]})}}return n})();var lg=s(71521);let _g=(()=>{class n{transform(t,o){if(!o)return t;o=this.escapeRegExp(o);const i=new RegExp(o,"gi");return t.match(i)?t.replace(i,"<mark>$&</mark>"):t}escapeRegExp(t){return t.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}static{this.\u0275fac=function(o){return new(o||n)}}static{this.\u0275pipe=e.\u0275\u0275definePipe({name:"searchHighlight",type:n,pure:!0})}}return n})();const cg=n=>({"overflow-auto":n});function dg(n,c){1&n&&e.\u0275\u0275elementContainer(0)}function ug(n,c){if(1&n&&e.\u0275\u0275element(0,"cd-download-button",33),2&n){const t=e.\u0275\u0275nextContext(5);e.\u0275\u0275property("objectItem",t.clog)("textItem",t.clogText)}}function pg(n,c){if(1&n&&e.\u0275\u0275element(0,"cd-copy-2-clipboard-button",34),2&n){const t=e.\u0275\u0275nextContext(5);e.\u0275\u0275property("source",t.clogText)("byId",!1)}}function mg(n,c){if(1&n&&(e.\u0275\u0275elementStart(0,"div",30),e.\u0275\u0275template(1,ug,1,2,"cd-download-button",31)(2,pg,1,2,"cd-copy-2-clipboard-button",32),e.\u0275\u0275elementEnd()),2&n){const t=e.\u0275\u0275nextContext(4);e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf",t.showDownloadCopyButton),e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf",t.showDownloadCopyButton)}}function fg(n,c){if(1&n&&(e.\u0275\u0275elementStart(0,"p")(1,"span",35),e.\u0275\u0275text(2),e.\u0275\u0275pipe(3,"cdDate"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(4,"span"),e.\u0275\u0275pipe(5,"logPriority"),e.\u0275\u0275text(6),e.\u0275\u0275elementEnd(),e.\u0275\u0275element(7,"span",36),e.\u0275\u0275pipe(8,"searchHighlight"),e.\u0275\u0275elementEnd()),2&n){const t=c.$implicit,o=e.\u0275\u0275nextContext(4);e.\u0275\u0275advance(2),e.\u0275\u0275textInterpolate(e.\u0275\u0275pipeBind1(3,6,t.stamp)),e.\u0275\u0275advance(2),e.\u0275\u0275classMapInterpolate1("priority ",e.\u0275\u0275pipeBind1(5,8,t.priority),""),e.\u0275\u0275advance(2),e.\u0275\u0275textInterpolate(t.priority),e.\u0275\u0275advance(),e.\u0275\u0275property("innerHTML",e.\u0275\u0275pipeBind2(8,10,t.message,o.search),e.\u0275\u0275sanitizeHtml)}}function Eg(n,c){1&n&&e.\u0275\u0275elementContainer(0)}function gg(n,c){if(1&n&&(e.\u0275\u0275elementStart(0,"div",25),e.\u0275\u0275template(1,mg,3,2,"div",26),e.\u0275\u0275elementStart(2,"div",27),e.\u0275\u0275template(3,fg,9,13,"p",28)(4,Eg,1,0,"ng-container",29),e.\u0275\u0275elementEnd()()),2&n){const t=e.\u0275\u0275nextContext(3),o=e.\u0275\u0275reference(4);e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf",t.clog.length&&t.showClusterLogs),e.\u0275\u0275advance(),e.\u0275\u0275property("ngClass",e.\u0275\u0275pureFunction1(5,cg,t.scrollable)),e.\u0275\u0275advance(),e.\u0275\u0275property("ngForOf",t.clog),e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf",0!==t.clog.length)("ngIfElse",o)}}function Cg(n,c){if(1&n&&e.\u0275\u0275template(0,gg,5,7,"div",24),2&n){const t=e.\u0275\u0275nextContext(2);e.\u0275\u0275property("ngIf",t.clog)}}function Sg(n,c){if(1&n&&e.\u0275\u0275element(0,"cd-download-button",39),2&n){const t=e.\u0275\u0275nextContext(5);e.\u0275\u0275property("objectItem",t.audit_log)("textItem",t.auditLogText)}}function hg(n,c){if(1&n&&e.\u0275\u0275element(0,"cd-copy-2-clipboard-button",34),2&n){const t=e.\u0275\u0275nextContext(5);e.\u0275\u0275property("source",t.auditLogText)("byId",!1)}}function Tg(n,c){if(1&n&&(e.\u0275\u0275elementStart(0,"div",30),e.\u0275\u0275template(1,Sg,1,2,"cd-download-button",38)(2,hg,1,2,"cd-copy-2-clipboard-button",32),e.\u0275\u0275elementEnd()),2&n){const t=e.\u0275\u0275nextContext(4);e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf",t.showDownloadCopyButton),e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf",t.showDownloadCopyButton)}}function Fg(n,c){if(1&n&&(e.\u0275\u0275elementStart(0,"p")(1,"span",35),e.\u0275\u0275text(2),e.\u0275\u0275pipe(3,"cdDate"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(4,"span"),e.\u0275\u0275pipe(5,"logPriority"),e.\u0275\u0275text(6),e.\u0275\u0275elementEnd(),e.\u0275\u0275element(7,"span",36),e.\u0275\u0275pipe(8,"searchHighlight"),e.\u0275\u0275elementEnd()),2&n){const t=c.$implicit,o=e.\u0275\u0275nextContext(4);e.\u0275\u0275advance(2),e.\u0275\u0275textInterpolate(e.\u0275\u0275pipeBind1(3,6,t.stamp)),e.\u0275\u0275advance(2),e.\u0275\u0275classMapInterpolate1("priority ",e.\u0275\u0275pipeBind1(5,8,t.priority),""),e.\u0275\u0275advance(2),e.\u0275\u0275textInterpolate(t.priority),e.\u0275\u0275advance(),e.\u0275\u0275property("innerHTML",e.\u0275\u0275pipeBind2(8,10,t.message,o.search),e.\u0275\u0275sanitizeHtml)}}function vg(n,c){1&n&&e.\u0275\u0275elementContainer(0)}function Mg(n,c){if(1&n&&(e.\u0275\u0275elementStart(0,"div",25),e.\u0275\u0275template(1,Tg,3,2,"div",26),e.\u0275\u0275elementStart(2,"div",37),e.\u0275\u0275template(3,Fg,9,13,"p",28)(4,vg,1,0,"ng-container",29),e.\u0275\u0275elementEnd()()),2&n){const t=e.\u0275\u0275nextContext(3),o=e.\u0275\u0275reference(4);e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf",t.audit_log.length),e.\u0275\u0275advance(2),e.\u0275\u0275property("ngForOf",t.audit_log),e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf",0!==t.audit_log.length)("ngIfElse",o)}}function Rg(n,c){if(1&n&&e.\u0275\u0275template(0,Mg,5,4,"div",24),2&n){const t=e.\u0275\u0275nextContext(2);e.\u0275\u0275property("ngIf",t.audit_log&&t.showAuditLogs)}}function Og(n,c){1&n&&(e.\u0275\u0275elementStart(0,"div"),e.\u0275\u0275element(1,"cd-grafana",40),e.\u0275\u0275elementEnd()),2&n&&(e.\u0275\u0275advance(),e.\u0275\u0275property("grafanaPath","explore?")("type","logs"))}function Pg(n,c){if(1&n&&(e.\u0275\u0275elementContainerStart(0),e.\u0275\u0275template(1,Og,2,2,"div",29),e.\u0275\u0275pipe(2,"async"),e.\u0275\u0275elementContainerEnd()),2&n){const t=e.\u0275\u0275nextContext(3),o=e.\u0275\u0275reference(6);e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf",e.\u0275\u0275pipeBind1(2,2,t.promtailServiceStatus$))("ngIfElse",o)}}function bg(n,c){if(1&n&&(e.\u0275\u0275template(0,Pg,3,4,"ng-container",29),e.\u0275\u0275pipe(1,"async")),2&n){const t=e.\u0275\u0275nextContext(2),o=e.\u0275\u0275reference(6);e.\u0275\u0275property("ngIf",e.\u0275\u0275pipeBind1(1,2,t.showDaemonLogs&&t.lokiServiceStatus$))("ngIfElse",o)}}function Ng(n,c){if(1&n&&(e.\u0275\u0275elementStart(0,"div"),e.\u0275\u0275template(1,dg,1,0,"ng-container",16),e.\u0275\u0275elementStart(2,"nav",17,3),e.\u0275\u0275elementContainerStart(4,18),e.\u0275\u0275elementStart(5,"a",19),e.\u0275\u0275i18n(6,5),e.\u0275\u0275elementEnd(),e.\u0275\u0275template(7,Cg,1,1,"ng-template",20),e.\u0275\u0275elementContainerEnd(),e.\u0275\u0275elementContainerStart(8,21),e.\u0275\u0275elementStart(9,"a",19),e.\u0275\u0275i18n(10,6),e.\u0275\u0275elementEnd(),e.\u0275\u0275template(11,Rg,1,1,"ng-template",20),e.\u0275\u0275elementContainerEnd(),e.\u0275\u0275elementContainerStart(12,22),e.\u0275\u0275elementStart(13,"a",19),e.\u0275\u0275i18n(14,7),e.\u0275\u0275elementEnd(),e.\u0275\u0275template(15,bg,2,4,"ng-template",20),e.\u0275\u0275elementContainerEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275element(16,"div",23),e.\u0275\u0275elementEnd()),2&n){const t=e.\u0275\u0275reference(3),o=e.\u0275\u0275nextContext(),i=e.\u0275\u0275reference(2);e.\u0275\u0275advance(),e.\u0275\u0275property("ngTemplateOutlet",i),e.\u0275\u0275advance(),e.\u0275\u0275property("cdStatefulTabDefault",o.defaultTab)("hidden",!o.showNavLinks),e.\u0275\u0275advance(14),e.\u0275\u0275property("ngbNavOutlet",t)}}function Ig(n,c){if(1&n&&(e.\u0275\u0275elementStart(0,"option",62),e.\u0275\u0275text(1),e.\u0275\u0275elementEnd()),2&n){const t=c.$implicit;e.\u0275\u0275property("value",t.value),e.\u0275\u0275advance(),e.\u0275\u0275textInterpolate(t.name)}}function Ag(n,c){if(1&n){const t=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"div",42)(1,"div",43)(2,"div",44)(3,"label",45),e.\u0275\u0275i18n(4,8),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(5,"select",46),e.\u0275\u0275twoWayListener("ngModelChange",function(i){e.\u0275\u0275restoreView(t);const r=e.\u0275\u0275nextContext(2);return e.\u0275\u0275twoWayBindingSet(r.priority,i)||(r.priority=i),e.\u0275\u0275resetView(i)}),e.\u0275\u0275listener("ngModelChange",function(){e.\u0275\u0275restoreView(t);const i=e.\u0275\u0275nextContext(2);return e.\u0275\u0275resetView(i.filterLogs())}),e.\u0275\u0275template(6,Ig,2,2,"option",47),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(7,"div",48)(8,"label",49),e.\u0275\u0275i18n(9,9),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(10,"div",50)(11,"span",51),e.\u0275\u0275namespaceSVG(),e.\u0275\u0275element(12,"svg",52),e.\u0275\u0275elementEnd(),e.\u0275\u0275namespaceHTML(),e.\u0275\u0275elementStart(13,"input",53),e.\u0275\u0275twoWayListener("ngModelChange",function(i){e.\u0275\u0275restoreView(t);const r=e.\u0275\u0275nextContext(2);return e.\u0275\u0275twoWayBindingSet(r.search,i)||(r.search=i),e.\u0275\u0275resetView(i)}),e.\u0275\u0275listener("keyup",function(){e.\u0275\u0275restoreView(t);const i=e.\u0275\u0275nextContext(2);return e.\u0275\u0275resetView(i.filterLogs())}),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(14,"button",54),e.\u0275\u0275listener("click",function(){e.\u0275\u0275restoreView(t);const i=e.\u0275\u0275nextContext(2);return e.\u0275\u0275resetView(i.clearSearchKey())}),e.\u0275\u0275namespaceSVG(),e.\u0275\u0275element(15,"svg",52),e.\u0275\u0275elementEnd()()(),e.\u0275\u0275namespaceHTML(),e.\u0275\u0275elementStart(16,"div",48)(17,"label",55),e.\u0275\u0275i18n(18,10),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(19,"div",50)(20,"input",56,4),e.\u0275\u0275listener("click",function(){e.\u0275\u0275restoreView(t);const i=e.\u0275\u0275reference(21);return e.\u0275\u0275resetView(i.open())}),e.\u0275\u0275twoWayListener("ngModelChange",function(i){e.\u0275\u0275restoreView(t);const r=e.\u0275\u0275nextContext(2);return e.\u0275\u0275twoWayBindingSet(r.selectedDate,i)||(r.selectedDate=i),e.\u0275\u0275resetView(i)}),e.\u0275\u0275listener("ngModelChange",function(){e.\u0275\u0275restoreView(t);const i=e.\u0275\u0275nextContext(2);return e.\u0275\u0275resetView(i.filterLogs())}),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(22,"button",54),e.\u0275\u0275listener("click",function(){e.\u0275\u0275restoreView(t);const i=e.\u0275\u0275nextContext(2);return e.\u0275\u0275resetView(i.clearDate())}),e.\u0275\u0275namespaceSVG(),e.\u0275\u0275element(23,"svg",52),e.\u0275\u0275elementEnd()()(),e.\u0275\u0275namespaceHTML(),e.\u0275\u0275elementStart(24,"div",57)(25,"label",58),e.\u0275\u0275i18n(26,11),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(27,"div",59)(28,"ngb-timepicker",60),e.\u0275\u0275twoWayListener("ngModelChange",function(i){e.\u0275\u0275restoreView(t);const r=e.\u0275\u0275nextContext(2);return e.\u0275\u0275twoWayBindingSet(r.startTime,i)||(r.startTime=i),e.\u0275\u0275resetView(i)}),e.\u0275\u0275listener("ngModelChange",function(){e.\u0275\u0275restoreView(t);const i=e.\u0275\u0275nextContext(2);return e.\u0275\u0275resetView(i.filterLogs())}),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(29,"span",61),e.\u0275\u0275text(30,"\xa0\u2014\xa0"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(31,"ngb-timepicker",60),e.\u0275\u0275twoWayListener("ngModelChange",function(i){e.\u0275\u0275restoreView(t);const r=e.\u0275\u0275nextContext(2);return e.\u0275\u0275twoWayBindingSet(r.endTime,i)||(r.endTime=i),e.\u0275\u0275resetView(i)}),e.\u0275\u0275listener("ngModelChange",function(){e.\u0275\u0275restoreView(t);const i=e.\u0275\u0275nextContext(2);return e.\u0275\u0275resetView(i.filterLogs())}),e.\u0275\u0275elementEnd()()()()()}if(2&n){const t=e.\u0275\u0275nextContext(2);e.\u0275\u0275advance(5),e.\u0275\u0275twoWayProperty("ngModel",t.priority),e.\u0275\u0275advance(),e.\u0275\u0275property("ngForOf",t.priorities),e.\u0275\u0275advance(6),e.\u0275\u0275property("cdsIcon",t.icons.search)("size",t.icons.size16),e.\u0275\u0275advance(),e.\u0275\u0275twoWayProperty("ngModel",t.search),e.\u0275\u0275advance(2),e.\u0275\u0275property("cdsIcon",t.icons.destroy)("size",t.icons.size16),e.\u0275\u0275advance(5),e.\u0275\u0275property("maxDate",t.maxDate),e.\u0275\u0275twoWayProperty("ngModel",t.selectedDate),e.\u0275\u0275advance(3),e.\u0275\u0275property("cdsIcon",t.icons.destroy)("size",t.icons.size16),e.\u0275\u0275advance(5),e.\u0275\u0275property("spinners",!1),e.\u0275\u0275twoWayProperty("ngModel",t.startTime),e.\u0275\u0275advance(3),e.\u0275\u0275property("spinners",!1),e.\u0275\u0275twoWayProperty("ngModel",t.endTime)}}function Dg(n,c){if(1&n&&e.\u0275\u0275template(0,Ag,32,15,"div",41),2&n){const t=e.\u0275\u0275nextContext();e.\u0275\u0275property("ngIf",t.showFilterTools)}}function yg(n,c){if(1&n){const t=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"span"),e.\u0275\u0275i18n(1,12),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(2,"span"),e.\u0275\u0275text(3,"\xa0"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(4,"a",63),e.\u0275\u0275listener("click",function(){e.\u0275\u0275restoreView(t);const i=e.\u0275\u0275nextContext();return e.\u0275\u0275resetView(i.resetFilter())}),e.\u0275\u0275i18n(5,13),e.\u0275\u0275elementEnd()}}function Lg(n,c){1&n&&(e.\u0275\u0275elementStart(0,"cd-alert-panel",64),e.\u0275\u0275elementContainerStart(1),e.\u0275\u0275i18n(2,14),e.\u0275\u0275elementContainerEnd(),e.\u0275\u0275elementEnd())}let ha=(()=>{class n{constructor(t,o,i,r){this.logsService=t,this.cephService=o,this.datePipe=i,this.ngZone=r,this.showClusterLogs=!0,this.showAuditLogs=!0,this.showDaemonLogs=!0,this.showNavLinks=!0,this.showFilterTools=!0,this.showDownloadCopyButton=!0,this.defaultTab="",this.scrollable=!1,this.icons=g.FI,this.priorities=[{name:"Debug",value:"[DBG]"},{name:"Info",value:"[INF]"},{name:"Warning",value:"[WRN]"},{name:"Error",value:"[ERR]"},{name:"All",value:"All"}],this.priority="All",this.search="",this.startTime={hour:0,minute:0},this.endTime={hour:23,minute:59},this.maxDate={year:(new Date).getFullYear(),month:(new Date).getMonth()+1,day:(new Date).getDate()}}ngOnInit(){this.getInfo(),this.ngZone.runOutsideAngular(()=>{this.getDaemonDetails(),this.interval=window.setInterval(()=>{this.ngZone.run(()=>{this.getInfo()})},5e3)})}ngOnDestroy(){clearInterval(this.interval)}getDaemonDetails(){this.lokiServiceStatus$=this.cephService.getDaemons("loki").pipe((0,u.map)(t=>t.length>0&&1===t[0].status)),this.promtailServiceStatus$=this.cephService.getDaemons("promtail").pipe((0,u.map)(t=>t.length>0&&1===t[0].status))}getInfo(){this.logsService.getLogs().subscribe(t=>{this.contentData=t,this.clogText=this.logToText(this.contentData.clog),this.auditLogText=this.logToText(this.contentData.audit_log),this.filterLogs()})}abstractFilters(){const t=this.priority,o=this.search.toLowerCase();let i;if(this.selectedDate){const X=this.selectedDate.month,Z=this.selectedDate.day;i=`${this.selectedDate.year}-${X<=9?`0${X}`:`${X}`}-${Z<=9?`0${Z}`:`${Z}`}`}else i="";return{priority:t,key:o,yearMonthDay:i,sTime:60*(this.startTime?.hour??0)+(this.startTime?.minute??0),eTime:60*(this.endTime?.hour??23)+(this.endTime?.minute??59)}}filterExecutor(t,o){return t.filter(i=>{const r=this.datePipe.transform(i.stamp,"mediumTime"),p=parseInt(r.split(":")[0],10),F=parseInt(r.split(":")[1],10);let D,x,H;return D="All"===o.priority?i.priority:o.priority,x=o.yearMonthDay?o.yearMonthDay:i.stamp,H=60*p+F,i.priority===D&&-1!==i.message.toLowerCase().indexOf(o.key)&&-1!==i.stamp.indexOf(x)&&H>=o.sTime&&H<=o.eTime})}filterLogs(){const t=this.abstractFilters();this.clog=this.filterExecutor(this.contentData.clog,t),this.audit_log=this.filterExecutor(this.contentData.audit_log,t)}clearSearchKey(){this.search="",this.filterLogs()}clearDate(){this.selectedDate=null,this.filterLogs()}resetFilter(){return this.priority="All",this.search="",this.selectedDate=null,this.startTime={hour:0,minute:0},this.endTime={hour:23,minute:59},this.filterLogs(),!1}logToText(t){let o="";for(const i of Object.keys(t))o=o+this.datePipe.transform(t[i].stamp,"medium")+"\t"+t[i].priority+"\t"+t[i].message+"\n";return o}static{this.\u0275fac=function(o){return new(o||n)(e.\u0275\u0275directiveInject(og),e.\u0275\u0275directiveInject(yo.t),e.\u0275\u0275directiveInject(l.DatePipe),e.\u0275\u0275directiveInject(e.NgZone))}}static{this.\u0275cmp=e.\u0275\u0275defineComponent({type:n,selectors:[["cd-logs"]],inputs:{showClusterLogs:"showClusterLogs",showAuditLogs:"showAuditLogs",showDaemonLogs:"showDaemonLogs",showNavLinks:"showNavLinks",showFilterTools:"showFilterTools",showDownloadCopyButton:"showDownloadCopyButton",defaultTab:"defaultTab",scrollable:"scrollable"},decls:7,vars:1,consts:()=>{let t,o,i,r,p,F,D,x,H,X,Z,re;return t=$localize`:␟d556ab48a65722b400e497f61737f553ee0f89e2␟694218511917002641:Cluster Logs`,o=$localize`:␟5f966baffd188be0e8adc2d7067b86e55fc9b9de␟6537626382528513237:Audit Logs`,i=$localize`:␟64f352a2fd5f00c05d969b4b6b32097b0d77bd4a␟5105719795575360904:Daemon Logs`,r=$localize`:␟508a91443aae9e64535807c941bfb03c558eab53␟6468695765708474503:Daemon logs`,p=$localize`:␟4193c9eb868aeec119b78a14795241e0aa5e8b60␟5025143942124016193:Priority:`,F=$localize`:␟1d78ca51eab260ce3fd917d39190d64df5229b6e␟5292065013807821991:Keyword:`,D=$localize`:␟05fa0bded36de6e73a1fa44838b627349dace044␟6899410641137821757:Date:`,x=$localize`:␟85a400388de1899b1917138cf7e5286376f72847␟1500099262662584579:Time range:`,H=$localize`:␟de0478286b8b5a939db54e9e5282405364ad2d61␟6342747174053289708:No log entries found. Please try to select different filter options.`,X=$localize`:␟1c7479674d91142b785b9547a87e5fb51cb16108␟5075715582456144452:Reset filter.`,Z=$localize`:␟bc83a8f0cd0ca46da3f91cb019a0e12cfa829148␟3502868328570384452:Loki/Promtail service not running`,re=$localize`:␟bb02379ceed805703f74c6c7748655b701932409␟8452819103811021600:Please start the loki and promtail service to see these logs.`,[["logFiltersTpl",""],["noEntriesTpl",""],["daemonLogsTpl",""],["nav","ngbNav"],["d","ngbDatepicker"],t,o,i,p,F,D,x,H,X,re,[4,"ngIf"],[4,"ngTemplateOutlet"],["ngbNav","","cdStatefulTab","logs",1,"nav-tabs",3,"cdStatefulTabDefault","hidden"],["ngbNavItem","cluster-logs"],["ngbNavLink",""],["ngbNavContent",""],["ngbNavItem","audit-logs"],["ngbNavItem","daemon-logs"],[3,"ngbNavOutlet"],["class","card bg-light mb-3",4,"ngIf"],[1,"card","bg-light","mb-3"],["class","btn-group","role","group",4,"ngIf"],[1,"card-body",3,"ngClass"],[4,"ngFor","ngForOf"],[4,"ngIf","ngIfElse"],["role","group",1,"btn-group"],["fileName","cluster_log",3,"objectItem","textItem",4,"ngIf"],[3,"source","byId",4,"ngIf"],["fileName","cluster_log",3,"objectItem","textItem"],[3,"source","byId"],[1,"timestamp"],[1,"message",3,"innerHTML"],[1,"card-body"],["fileName","audit_log",3,"objectItem","textItem",4,"ngIf"],["fileName","audit_log",3,"objectItem","textItem"],["title",r,"uid","CrAHE0iZz","grafanaStyle","three",3,"grafanaPath","type"],["class","row mb-3",4,"ngIf"],[1,"row","mb-3"],[1,"col-lg-10","d-flex"],[1,"col-sm-1","me-3"],["for","logs-priority",1,"fw-bold"],["id","logs-priority",1,"form-select",3,"ngModelChange","ngModel"],[3,"value",4,"ngFor","ngForOf"],[1,"col-md-3","me-3"],["for","logs-keyword",1,"fw-bold"],[1,"input-group"],[1,"input-group-text"],[3,"cdsIcon","size"],["id","logs-keyword","type","text",1,"form-control",3,"ngModelChange","keyup","ngModel"],["type","button","title","Clear",1,"btn","btn-light",3,"click"],["for","logs-date",1,"fw-bold"],["id","logs-date","placeholder","YYYY-MM-DD","ngbDatepicker","",1,"form-control",3,"click","ngModelChange","maxDate","ngModel"],[1,"col-md-5"],[1,"fw-bold"],[1,"d-flex"],[3,"ngModelChange","spinners","ngModel"],[1,"mt-2"],[3,"value"],["href","#",3,"click"],["type","info","title",Z]]},template:function(o,i){1&o&&e.\u0275\u0275template(0,Ng,17,4,"div",15)(1,Dg,1,1,"ng-template",null,0,e.\u0275\u0275templateRefExtractor)(3,yg,6,0,"ng-template",null,1,e.\u0275\u0275templateRefExtractor)(5,Lg,3,0,"ng-template",null,2,e.\u0275\u0275templateRefExtractor),2&o&&e.\u0275\u0275property("ngIf",i.contentData)},dependencies:[l.NgClass,l.NgForOf,l.NgIf,l.NgTemplateOutlet,V.NgbNavContent,V.NgbNav,V.NgbNavItem,V.NgbNavLink,V.NgbNavLinkBase,V.NgbNavOutlet,gt.c,it.m,me.N,Ts,yt.B,De.S,Me.a,T.NgSelectOption,T.\u0275NgSelectMultipleOption,T.DefaultValueAccessor,T.SelectControlValueAccessor,T.NgControlStatus,T.NgModel,V.NgbTimepicker,V.NgbInputDatepicker,L.IconDirective,l.AsyncPipe,lg.H,Ht.Q,_g],styles:["p[_ngcontent-%COMP%]{font-family:monospace}.card[_ngcontent-%COMP%]   .btn-group[_ngcontent-%COMP%]{margin-top:-57px;position:absolute;right:0}.card[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{display:flex}.card[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]:last-child{margin-bottom:0}.card[_ngcontent-%COMP%]   .timestamp[_ngcontent-%COMP%]{flex-shrink:0;font-weight:700}.card[_ngcontent-%COMP%]   .priority[_ngcontent-%COMP%]{margin-left:.5rem}.card[_ngcontent-%COMP%]   .message[_ngcontent-%COMP%]{margin-left:1rem}.card[_ngcontent-%COMP%]   .err[_ngcontent-%COMP%]{color:#dc3545}.card[_ngcontent-%COMP%]   .warn[_ngcontent-%COMP%]{color:#d48200}.card[_ngcontent-%COMP%]   .info[_ngcontent-%COMP%]{color:#25828e}.card[_ngcontent-%COMP%]   .debug[_ngcontent-%COMP%]{color:#495057}  cd-logs ngb-timepicker input.ngb-tp-input{width:3.5rem!important}.card-body.overflow-auto[_ngcontent-%COMP%]{height:50vh}"]})}}return n})();const $g=()=>["addr","str","uuid"],xg=()=>["uint","int","size","secs"];function Ug(n,c){if(1&n&&(e.\u0275\u0275elementStart(0,"cd-helper"),e.\u0275\u0275text(1),e.\u0275\u0275pipe(2,"upperFirst"),e.\u0275\u0275elementEnd()),2&n){const t=e.\u0275\u0275nextContext().$implicit;e.\u0275\u0275advance(),e.\u0275\u0275textInterpolate1(" ",e.\u0275\u0275pipeBind1(2,1,t.value.long_desc||t.value.desc)," ")}}function wg(n,c){if(1&n&&(e.\u0275\u0275elementStart(0,"div",23)(1,"div",24),e.\u0275\u0275element(2,"input",25)(3,"label",26),e.\u0275\u0275elementEnd()()),2&n){const t=e.\u0275\u0275nextContext().$implicit;e.\u0275\u0275advance(2),e.\u0275\u0275propertyInterpolate("id",t.value.name),e.\u0275\u0275propertyInterpolate("formControlName",t.value.name),e.\u0275\u0275advance(),e.\u0275\u0275propertyInterpolate("for",t.value.name)}}function Gg(n,c){if(1&n&&e.\u0275\u0275element(0,"input",30),2&n){const t=e.\u0275\u0275nextContext(2).$implicit;e.\u0275\u0275propertyInterpolate("id",t.value.name),e.\u0275\u0275propertyInterpolate("formControlName",t.value.name)}}function Hg(n,c){if(1&n&&(e.\u0275\u0275elementStart(0,"option",33),e.\u0275\u0275text(1),e.\u0275\u0275elementEnd()),2&n){const t=c.$implicit;e.\u0275\u0275property("ngValue",t),e.\u0275\u0275advance(),e.\u0275\u0275textInterpolate1(" ",t," ")}}function Vg(n,c){if(1&n&&(e.\u0275\u0275elementStart(0,"select",31),e.\u0275\u0275template(1,Hg,2,2,"option",32),e.\u0275\u0275elementEnd()),2&n){const t=e.\u0275\u0275nextContext(2).$implicit;e.\u0275\u0275propertyInterpolate("id",t.value.name),e.\u0275\u0275propertyInterpolate("formControlName",t.value.name),e.\u0275\u0275advance(),e.\u0275\u0275property("ngForOf",t.value.enum_allowed)}}function Bg(n,c){1&n&&(e.\u0275\u0275elementStart(0,"span",34),e.\u0275\u0275i18n(1,2),e.\u0275\u0275elementEnd())}function zg(n,c){1&n&&(e.\u0275\u0275elementStart(0,"span",34),e.\u0275\u0275i18n(1,3),e.\u0275\u0275elementEnd())}function Xg(n,c){if(1&n&&(e.\u0275\u0275elementStart(0,"div",23),e.\u0275\u0275template(1,Gg,1,2,"input",27)(2,Vg,2,3,"select",28)(3,Bg,2,0,"span",29)(4,zg,2,0,"span",29),e.\u0275\u0275elementEnd()),2&n){const t=e.\u0275\u0275nextContext().$implicit;e.\u0275\u0275nextContext();const o=e.\u0275\u0275reference(2),i=e.\u0275\u0275nextContext();e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf",0===t.value.enum_allowed.length),e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf",t.value.enum_allowed.length>0),e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf",i.mgrModuleForm.showError(t.value.name,o,"invalidUuid")),e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf",i.mgrModuleForm.showError(t.value.name,o,"pattern"))}}function kg(n,c){1&n&&(e.\u0275\u0275elementStart(0,"span",34),e.\u0275\u0275i18n(1,4),e.\u0275\u0275elementEnd())}function jg(n,c){if(1&n&&(e.\u0275\u0275elementStart(0,"span",34),e.\u0275\u0275i18n(1,5),e.\u0275\u0275elementEnd()),2&n){const t=e.\u0275\u0275nextContext(2).$implicit;e.\u0275\u0275advance(),e.\u0275\u0275i18nExp(t.value.max),e.\u0275\u0275i18nApply(1)}}function Wg(n,c){if(1&n&&(e.\u0275\u0275elementStart(0,"span",34),e.\u0275\u0275i18n(1,6),e.\u0275\u0275elementEnd()),2&n){const t=e.\u0275\u0275nextContext(2).$implicit;e.\u0275\u0275advance(),e.\u0275\u0275i18nExp(t.value.min),e.\u0275\u0275i18nApply(1)}}function Kg(n,c){1&n&&(e.\u0275\u0275elementStart(0,"span",34),e.\u0275\u0275i18n(1,7),e.\u0275\u0275elementEnd())}function Qg(n,c){if(1&n&&(e.\u0275\u0275elementStart(0,"div",23),e.\u0275\u0275element(1,"input",35),e.\u0275\u0275template(2,kg,2,0,"span",29)(3,jg,2,1,"span",29)(4,Wg,2,1,"span",29)(5,Kg,2,0,"span",29),e.\u0275\u0275elementEnd()),2&n){const t=e.\u0275\u0275nextContext().$implicit;e.\u0275\u0275nextContext();const o=e.\u0275\u0275reference(2),i=e.\u0275\u0275nextContext();e.\u0275\u0275advance(),e.\u0275\u0275propertyInterpolate("id",t.value.name),e.\u0275\u0275propertyInterpolate("formControlName",t.value.name),e.\u0275\u0275propertyInterpolate("min",t.value.min),e.\u0275\u0275propertyInterpolate("max",t.value.max),e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf",i.mgrModuleForm.showError(t.value.name,o,"required")),e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf",i.mgrModuleForm.showError(t.value.name,o,"max")),e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf",i.mgrModuleForm.showError(t.value.name,o,"min")),e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf",i.mgrModuleForm.showError(t.value.name,o,"pattern"))}}function Yg(n,c){1&n&&(e.\u0275\u0275elementStart(0,"span",34),e.\u0275\u0275i18n(1,8),e.\u0275\u0275elementEnd())}function Jg(n,c){1&n&&(e.\u0275\u0275elementStart(0,"span",34),e.\u0275\u0275i18n(1,9),e.\u0275\u0275elementEnd())}function Zg(n,c){if(1&n&&(e.\u0275\u0275elementStart(0,"div",23),e.\u0275\u0275element(1,"input",36),e.\u0275\u0275template(2,Yg,2,0,"span",29)(3,Jg,2,0,"span",29),e.\u0275\u0275elementEnd()),2&n){const t=e.\u0275\u0275nextContext().$implicit;e.\u0275\u0275nextContext();const o=e.\u0275\u0275reference(2),i=e.\u0275\u0275nextContext();e.\u0275\u0275advance(),e.\u0275\u0275propertyInterpolate("id",t.value.name),e.\u0275\u0275propertyInterpolate("formControlName",t.value.name),e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf",i.mgrModuleForm.showError(t.value.name,o,"required")),e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf",i.mgrModuleForm.showError(t.value.name,o,"pattern"))}}function qg(n,c){if(1&n&&(e.\u0275\u0275elementStart(0,"div",19)(1,"label",20),e.\u0275\u0275text(2),e.\u0275\u0275template(3,Ug,3,3,"cd-helper",21),e.\u0275\u0275elementEnd(),e.\u0275\u0275template(4,wg,4,3,"div",22)(5,Xg,5,4,"div",22)(6,Qg,6,8,"div",22)(7,Zg,4,4,"div",22),e.\u0275\u0275elementEnd()),2&n){const t=c.$implicit;e.\u0275\u0275advance(),e.\u0275\u0275propertyInterpolate("for",t.value.name),e.\u0275\u0275advance(),e.\u0275\u0275textInterpolate1(" ",t.value.name," "),e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf",t.value.long_desc||t.value.desc),e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf","bool"===t.value.type),e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf",e.\u0275\u0275pureFunction0(7,$g).includes(t.value.type)),e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf",e.\u0275\u0275pureFunction0(8,xg).includes(t.value.type)),e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf","float"===t.value.type)}}function eC(n,c){if(1&n){const t=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"div",11)(1,"form",12,0)(3,"div",13)(4,"div",14),e.\u0275\u0275i18n(5,1),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(6,"div",15),e.\u0275\u0275template(7,qg,8,9,"div",16),e.\u0275\u0275pipe(8,"keyvalue"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(9,"div",17)(10,"cd-form-button-panel",18),e.\u0275\u0275listener("submitActionEvent",function(){e.\u0275\u0275restoreView(t);const i=e.\u0275\u0275nextContext();return e.\u0275\u0275resetView(i.onSubmit())}),e.\u0275\u0275elementEnd()()()()()}if(2&n){const t=e.\u0275\u0275nextContext();e.\u0275\u0275advance(),e.\u0275\u0275property("formGroup",t.mgrModuleForm),e.\u0275\u0275advance(6),e.\u0275\u0275property("ngForOf",e.\u0275\u0275pipeBind1(8,4,t.moduleOptions)),e.\u0275\u0275advance(3),e.\u0275\u0275property("form",t.mgrModuleForm)("submitText",t.actionLabels.UPDATE)}}let tC=(()=>{class n extends Te.g{constructor(t,o,i,r,p,F){super(),this.actionLabels=t,this.route=o,this.router=i,this.formBuilder=r,this.mgrModuleService=p,this.notificationService=F,this.moduleName="",this.moduleOptions=[]}ngOnInit(){this.route.params.subscribe(t=>{this.moduleName=decodeURIComponent(t.name);const o=[this.mgrModuleService.getOptions(this.moduleName),this.mgrModuleService.getConfig(this.moduleName)];(0,K.forkJoin)(o).subscribe(i=>{this.moduleOptions=i[0],this.createForm(),this.mgrModuleForm.setValue(i[1]),this.loadingReady()},i=>{this.loadingError()})})}getValidators(t){const o=[];switch(t.type){case"addr":o.push(ge.xQ.ip());break;case"uint":case"int":case"size":case"secs":o.push(T.Validators.required);break;case"str":E().isNumber(t.min)&&o.push(T.Validators.minLength(t.min)),E().isNumber(t.max)&&o.push(T.Validators.maxLength(t.max));break;case"float":o.push(T.Validators.required),o.push(ge.xQ.decimalNumber());break;case"uuid":o.push(ge.xQ.uuid())}return o}createForm(){const t={};E().forEach(this.moduleOptions,o=>{t[o.name]=[o.default_value,this.getValidators(o)]}),this.mgrModuleForm=this.formBuilder.group(t)}goToListView(){this.router.navigate(["/mgr-modules"])}onSubmit(){if(this.mgrModuleForm.pristine)return void this.goToListView();const t={};E().forEach(this.moduleOptions,o=>{const i=this.mgrModuleForm.get(o.name);i.dirty&&i.valid&&(t[o.name]=i.value)}),this.mgrModuleService.updateConfig(this.moduleName,t).subscribe(()=>{this.notificationService.show(Le._.success,$localize`Updated options for module '${this.moduleName}'.`),this.goToListView()},()=>{this.mgrModuleForm.setErrors({cdSubmitButton:!0})})}static{this.\u0275fac=function(o){return new(o||n)(e.\u0275\u0275directiveInject(f.Ss),e.\u0275\u0275directiveInject(m.ActivatedRoute),e.\u0275\u0275directiveInject(m.Router),e.\u0275\u0275directiveInject(At.$),e.\u0275\u0275directiveInject(Nn.a),e.\u0275\u0275directiveInject(Y.J))}}static{this.\u0275cmp=e.\u0275\u0275defineComponent({type:n,selectors:[["cd-mgr-module-form"]],features:[e.\u0275\u0275InheritDefinitionFeature],decls:1,vars:1,consts:()=>{let t,o,i,r,p,F,D,x,H;return t=$localize`:␟31a9c2870a934b594d1390146c489f76440859ea␟1526176299457740995:Edit Manager module`,o=$localize`:␟46e09b8290d3d0afdb6baa2021395b0570606a31␟5426674809015034087:The entered value is not a valid UUID, e.g.: 67dcac9f-2c03-4d6c-b7bd-1210b3a259a8`,i=$localize`:␟7aacd038b39cfd347107d01d1dc27f5cb3e0951c␟723235580272131986:The entered value needs to be a valid IP address.`,r=$localize`:␟7cbdabcece469fab89cfa687ab152bca18b97498␟1417693714872528491:This field is required.`,p=$localize`:␟f19106149f4b07a0d721f9d317afed393cb7bd93␟8655063041944904434:The entered value is too high! It must be lower or equal to ${"\ufffd0\ufffd"}:INTERPOLATION:.`,F=$localize`:␟6d33c40ef9a6c3bf0888df831b25e41e65f9d15b␟8618667851715974888:The entered value is too low! It must be greater or equal to ${"\ufffd0\ufffd"}:INTERPOLATION:.`,D=$localize`:␟eae7086660cf1e38c7194a2c49ff52cc656f90f5␟4304943972618871159:The entered value needs to be a number.`,x=$localize`:␟7cbdabcece469fab89cfa687ab152bca18b97498␟1417693714872528491:This field is required.`,H=$localize`:␟a73376e04b4fb3a20734c8c39743fba32e6676ce␟2627729647763945523:The entered value needs to be a number or decimal.`,[["frm","ngForm"],t,o,i,r,p,F,D,x,H,["class","cd-col-form",4,"cdFormLoading"],[1,"cd-col-form"],["name","mgrModuleForm","novalidate","",3,"formGroup"],[1,"card"],[1,"card-header"],[1,"card-body"],["class","form-group row",4,"ngFor","ngForOf"],[1,"card-footer"],["wrappingClass","text-right",3,"submitActionEvent","form","submitText"],[1,"form-group","row"],[1,"cd-col-form-label",3,"for"],[4,"ngIf"],["class","cd-col-form-input",4,"ngIf"],[1,"cd-col-form-input"],[1,"custom-control","custom-checkbox"],["type","checkbox",1,"custom-control-input",3,"id","formControlName"],[1,"custom-control-label",3,"for"],["class","form-control","type","text",3,"id","formControlName",4,"ngIf"],["class","form-select",3,"id","formControlName",4,"ngIf"],["class","invalid-feedback",4,"ngIf"],["type","text",1,"form-control",3,"id","formControlName"],[1,"form-select",3,"id","formControlName"],[3,"ngValue",4,"ngFor","ngForOf"],[3,"ngValue"],[1,"invalid-feedback"],["type","number",1,"form-control",3,"id","formControlName","min","max"],["type","number",1,"form-control",3,"id","formControlName"]]},template:function(o,i){1&o&&e.\u0275\u0275template(0,eC,11,6,"div",10),2&o&&e.\u0275\u0275property("cdFormLoading",i.loading)},dependencies:[l.NgForOf,l.NgIf,T.\u0275NgNoValidate,T.NgSelectOption,T.\u0275NgSelectMultipleOption,T.DefaultValueAccessor,T.NumberValueAccessor,T.CheckboxControlValueAccessor,T.SelectControlValueAccessor,T.NgControlStatus,T.NgControlStatusGroup,T.MinValidator,T.MaxValidator,T.FormGroupDirective,T.FormControlName,b.m,Q.e,rt.G,De.S,Me.a,xe.C,ze.E,l.KeyValuePipe,Oe.r]})}}return n})();function nC(n,c){if(1&n&&(e.\u0275\u0275elementContainerStart(0),e.\u0275\u0275element(1,"cd-table-key-value",1),e.\u0275\u0275elementContainerEnd()),2&n){const t=e.\u0275\u0275nextContext();e.\u0275\u0275advance(),e.\u0275\u0275property("data",t.module_config)}}let oC=(()=>{class n{constructor(t){this.mgrModuleService=t}ngOnChanges(){this.selection&&this.mgrModuleService.getConfig(this.selection.name).subscribe(t=>{this.module_config=t})}static{this.\u0275fac=function(o){return new(o||n)(e.\u0275\u0275directiveInject(Nn.a))}}static{this.\u0275cmp=e.\u0275\u0275defineComponent({type:n,selectors:[["cd-mgr-module-details"]],inputs:{selection:"selection"},features:[e.\u0275\u0275NgOnChangesFeature],decls:1,vars:1,consts:[[4,"ngIf"],[3,"data"]],template:function(o,i){1&o&&e.\u0275\u0275template(0,nC,2,1,"ng-container",0),2&o&&e.\u0275\u0275property("ngIf",i.selection)},dependencies:[l.NgIf,Pt.i]})}}return n})();function iC(n,c){if(1&n&&e.\u0275\u0275element(0,"cd-mgr-module-details",4),2&n){const t=e.\u0275\u0275nextContext();e.\u0275\u0275property("selection",t.expandedRow)}}let aC=(()=>{class n extends I.D{constructor(t,o){super(),this.authStorageService=t,this.mgrModuleService=o,this.columns=[],this.modules=[],this.selection=new A.y,this.permission=this.authStorageService.getPermissions().configOpt,this.columns=[{name:$localize`Name`,prop:"name",flexGrow:1},{name:$localize`Enabled`,prop:"enabled",flexGrow:1,cellClass:"text-center",cellTransformation:O.x.checkIcon},{name:$localize`Always-On`,prop:"always_on",flexGrow:1,cellClass:"text-center",cellTransformation:O.x.checkIcon}];const i=()=>this.selection.first()&&encodeURIComponent(this.selection.first().name);this.tableActions=[{name:$localize`Edit`,permission:"update",disable:()=>!this.selection.hasSelection||0===Object.values(this.selection.first().options).length,routerLink:()=>`/mgr-modules/edit/${i()}`,icon:g.FI.edit},{name:$localize`Enable`,permission:"update",click:()=>this.updateModuleState(),disable:()=>this.isTableActionDisabled("enabled"),icon:g.FI.start},{name:$localize`Disable`,permission:"update",click:()=>this.updateModuleState(),disable:()=>this.getTableActionDisabledDesc(),icon:g.FI.stop}]}getModuleList(t){this.mgrModuleService.list().subscribe(o=>{this.modules=o},()=>{t.error()})}updateSelection(t){this.selection=t}isTableActionDisabled(t){if(!this.selection.hasSelection)return!0;const o=this.selection.first();if("dashboard"===o.name||o.always_on)return!0;switch(t){case"enabled":return o.enabled;case"disabled":return!o.enabled}}getTableActionDisabledDesc(){return this.selection.first()?.always_on?$localize`This Manager module is always on.`:this.isTableActionDisabled("disabled")}updateModuleState(){if(!this.selection.hasSelection)return;const t=this.selection.first();this.mgrModuleService.updateModuleState(t.name,t.enabled,this.table)}static{this.\u0275fac=function(o){return new(o||n)(e.\u0275\u0275directiveInject(_.v),e.\u0275\u0275directiveInject(Nn.a))}}static{this.\u0275cmp=e.\u0275\u0275defineComponent({type:n,selectors:[["cd-mgr-module-list"]],viewQuery:function(o,i){if(1&o&&e.\u0275\u0275viewQuery(Ke.O,7),2&o){let r;e.\u0275\u0275queryRefresh(r=e.\u0275\u0275loadQuery())&&(i.table=r.first)}},features:[e.\u0275\u0275InheritDefinitionFeature],decls:4,vars:7,consts:[["table",""],["columnMode","flex","selectionType","single","identifier","module",3,"setExpandedRow","updateSelection","fetchData","autoReload","data","columns","hasDetails"],[1,"table-actions",3,"permission","selection","tableActions"],[3,"selection",4,"cdTableDetail"],[3,"selection"]],template:function(o,i){if(1&o){const r=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"cd-table",1,0),e.\u0275\u0275listener("setExpandedRow",function(F){return e.\u0275\u0275restoreView(r),e.\u0275\u0275resetView(i.setExpandedRow(F))})("updateSelection",function(F){return e.\u0275\u0275restoreView(r),e.\u0275\u0275resetView(i.updateSelection(F))})("fetchData",function(F){return e.\u0275\u0275restoreView(r),e.\u0275\u0275resetView(i.getModuleList(F))}),e.\u0275\u0275element(2,"cd-table-actions",2),e.\u0275\u0275template(3,iC,1,1,"cd-mgr-module-details",3),e.\u0275\u0275elementEnd()}2&o&&(e.\u0275\u0275property("autoReload",!1)("data",i.modules)("columns",i.columns)("hasDetails",!0),e.\u0275\u0275advance(2),e.\u0275\u0275property("permission",i.permission)("selection",i.selection)("tableActions",i.tableActions))},dependencies:[Ke.O,dt.j,Ct.N,oC]})}}return n})(),sC=(()=>{class n{constructor(t){this.http=t}getMonitor(){return this.http.get("api/monitor")}static{this.\u0275fac=function(o){return new(o||n)(e.\u0275\u0275inject(h.HttpClient))}}static{this.\u0275prov=e.\u0275\u0275defineInjectable({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();function rC(n,c){if(1&n&&(e.\u0275\u0275elementStart(0,"table",18)(1,"tbody")(2,"tr")(3,"td",19),e.\u0275\u0275i18n(4,3),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(5,"td"),e.\u0275\u0275text(6),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(7,"tr")(8,"td",19),e.\u0275\u0275i18n(9,4),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(10,"td"),e.\u0275\u0275text(11),e.\u0275\u0275pipe(12,"relativeDate"),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(13,"tr")(14,"td",19),e.\u0275\u0275i18n(15,5),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(16,"td"),e.\u0275\u0275text(17),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(18,"tr")(19,"td",19),e.\u0275\u0275i18n(20,6),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(21,"td"),e.\u0275\u0275text(22),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(23,"tr")(24,"td",19),e.\u0275\u0275i18n(25,7),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(26,"td"),e.\u0275\u0275text(27),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(28,"tr")(29,"td",19),e.\u0275\u0275i18n(30,8),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(31,"td"),e.\u0275\u0275text(32),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(33,"tr")(34,"td",19),e.\u0275\u0275i18n(35,9),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(36,"td"),e.\u0275\u0275text(37),e.\u0275\u0275elementEnd()()()()),2&n){const t=e.\u0275\u0275nextContext();e.\u0275\u0275advance(6),e.\u0275\u0275textInterpolate(t.mon_status.monmap.fsid),e.\u0275\u0275advance(5),e.\u0275\u0275textInterpolate(e.\u0275\u0275pipeBind1(12,7,t.mon_status.monmap.modified)),e.\u0275\u0275advance(6),e.\u0275\u0275textInterpolate(t.mon_status.monmap.epoch),e.\u0275\u0275advance(5),e.\u0275\u0275textInterpolate(t.mon_status.features.quorum_con),e.\u0275\u0275advance(5),e.\u0275\u0275textInterpolate(t.mon_status.features.quorum_mon),e.\u0275\u0275advance(5),e.\u0275\u0275textInterpolate(t.mon_status.features.required_con),e.\u0275\u0275advance(5),e.\u0275\u0275textInterpolate(t.mon_status.features.required_mon)}}let lC=(()=>{class n{constructor(t){this.monitorService=t,this.inQuorum={columns:[{prop:"name",name:$localize`Name`,cellTransformation:O.x.routerLink},{prop:"rank",name:$localize`Rank`},{prop:"public_addr",name:$localize`Public Address`},{prop:"cdOpenSessions",name:$localize`Open Sessions`,cellTransformation:O.x.sparkline,comparator:(o,i)=>{const r=E().last(o),p=E().last(i);return r&&p&&r!==p?r>p?1:-1:0}}]},this.notInQuorum={columns:[{prop:"name",name:$localize`Name`,cellTransformation:O.x.routerLink},{prop:"rank",name:$localize`Rank`},{prop:"public_addr",name:$localize`Public Address`}]}}refresh(){this.monitorService.getMonitor().subscribe(t=>{t.in_quorum.map(o=>(o.cdOpenSessions=o.stats.num_sessions.map(i=>i[1]),o.cdLink="/perf_counters/mon/"+o.name,o.cdParams={fromLink:"/monitor"},o)),t.out_quorum.map(o=>(o.cdLink="/perf_counters/mon/"+o.name,o.cdParams={fromLink:"/monitor"},o)),this.inQuorum.data=[...t.in_quorum],this.notInQuorum.data=[...t.out_quorum],this.mon_status=t.mon_status})}static{this.\u0275fac=function(o){return new(o||n)(e.\u0275\u0275directiveInject(sC))}}static{this.\u0275cmp=e.\u0275\u0275defineComponent({type:n,selectors:[["cd-monitor"]],decls:15,vars:5,consts:()=>{let t,o,i,r,p,F,D,x,H,X;return t=$localize`:␟81b97b8ea996ad1e4f9fca8415021850214884b1␟5611592591303869712:Status`,o=$localize`:␟b3abe9eac5bcd94a54c8da93b312e085ec512e74␟2027256029092857733:In Quorum`,i=$localize`:␟ba4b748a676e1f217ce1e736fb7ec1215e677bae␟8740880580618468199:Not In Quorum`,r=$localize`:␟57ec6032f5618d4a9f16eb950ad23d2ce7c24b54␟8383963176033565854:Cluster ID`,p=$localize`:␟67d7facc3fec5f8a49ab9ba0a245872184264ce5␟468581621900329767:monmap modified`,F=$localize`:␟d4906731aaf2b94b4f547646c9bfe58bb77951b6␟7855517482361234533:monmap epoch`,D=$localize`:␟bd4ee06ffdc46d9dfbd0c0c4f81399021c680056␟6259516567890139825:quorum con`,x=$localize`:␟1176c7db8a8276ccb44cc3d42e2c28d9fa6c6596␟8482413158052149178:quorum mon`,H=$localize`:␟530ef677a09d681b3ab68cb0760494b3ae72a77c␟5804650887321678997:required con`,X=$localize`:␟a91558e0d506c32021c31843f8f168899fc65cbf␟75767560032534755:required mon`,[t,o,i,r,p,F,D,x,H,X,[1,"row"],[1,"col-lg-4"],[1,"cd-header"],["class","cds--data-table--sort cds--data-table--no-border cds--data-table cds--data-table--md",4,"ngIf"],[1,"col-lg-8"],[1,"in-quorum","cd-header"],[3,"data","columns"],[3,"fetchData","data","columns"],[1,"cds--data-table--sort","cds--data-table--no-border","cds--data-table","cds--data-table--md"],[1,"bold"]]},template:function(o,i){1&o&&(e.\u0275\u0275elementStart(0,"div",10)(1,"div",11)(2,"fieldset")(3,"legend",12),e.\u0275\u0275i18n(4,0),e.\u0275\u0275elementEnd(),e.\u0275\u0275template(5,rC,38,9,"table",13),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(6,"div",14)(7,"legend",15),e.\u0275\u0275i18n(8,1),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(9,"div"),e.\u0275\u0275element(10,"cd-table",16),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(11,"legend",15),e.\u0275\u0275i18n(12,2),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(13,"div")(14,"cd-table",17),e.\u0275\u0275listener("fetchData",function(){return i.refresh()}),e.\u0275\u0275elementEnd()()()()),2&o&&(e.\u0275\u0275advance(5),e.\u0275\u0275property("ngIf",i.mon_status),e.\u0275\u0275advance(5),e.\u0275\u0275property("data",i.inQuorum.data)("columns",i.inQuorum.columns),e.\u0275\u0275advance(4),e.\u0275\u0275property("data",i.notInQuorum.data)("columns",i.notInQuorum.columns))},dependencies:[l.NgIf,Ke.O,po.D]})}}return n})();class Fs{}function _C(n,c){if(1&n&&(e.\u0275\u0275elementStart(0,"span",19),e.\u0275\u0275i18n(1,3),e.\u0275\u0275elementEnd()),2&n){const t=e.\u0275\u0275nextContext(2);e.\u0275\u0275property("ngbTooltip",t.clusterWideTooltip)}}function cC(n,c){1&n&&e.\u0275\u0275element(0,"hr",20)}function dC(n,c){if(1&n){const t=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"div",13)(1,"input",14),e.\u0275\u0275listener("change",function(){const i=e.\u0275\u0275restoreView(t).$implicit,r=e.\u0275\u0275nextContext();return e.\u0275\u0275resetView(r.changeValue(i))}),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(2,"label",15)(3,"strong"),e.\u0275\u0275text(4),e.\u0275\u0275elementEnd(),e.\u0275\u0275template(5,_C,2,1,"span",16),e.\u0275\u0275element(6,"br"),e.\u0275\u0275elementStart(7,"span",17),e.\u0275\u0275text(8),e.\u0275\u0275elementEnd()(),e.\u0275\u0275template(9,cC,1,0,"hr",18),e.\u0275\u0275elementEnd()}if(2&n){const t=c.$implicit,o=c.last;e.\u0275\u0275advance(),e.\u0275\u0275property("checked",t.value)("indeterminate",t.indeterminate)("name",t.code)("id",t.code),e.\u0275\u0275advance(),e.\u0275\u0275property("for",t.code),e.\u0275\u0275advance(2),e.\u0275\u0275textInterpolate(t.name),e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf",t.clusterWide),e.\u0275\u0275advance(3),e.\u0275\u0275textInterpolate(t.description),e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf",!o)}}let uC=(()=>{class n{constructor(t,o,i,r,p){this.activeModal=t,this.actionLabels=o,this.authStorageService=i,this.osdService=r,this.notificationService=p,this.initialSelection=[],this.osdFlagsForm=new T.UntypedFormGroup({}),this.flags=[{code:"noup",name:$localize`No Up`,description:$localize`OSDs are not allowed to start`,value:!1,clusterWide:!1,indeterminate:!1},{code:"nodown",name:$localize`No Down`,description:$localize`OSD failure reports are being ignored, such that the monitors will not mark OSDs down`,value:!1,clusterWide:!1,indeterminate:!1},{code:"noin",name:$localize`No In`,description:$localize`OSDs that were previously marked out will not be marked back in when they start`,value:!1,clusterWide:!1,indeterminate:!1},{code:"noout",name:$localize`No Out`,description:$localize`OSDs will not automatically be marked out after the configured interval`,value:!1,clusterWide:!1,indeterminate:!1}],this.clusterWideTooltip=$localize`The flag has been enabled for the entire cluster.`,this.permissions=this.authStorageService.getPermissions()}ngOnInit(){const t=this.selected.length;this.osdService.getFlags().subscribe(o=>{const i=this.getActivatedIndivFlags();this.flags.forEach(r=>{const p=i[r.code];o.includes(r.code)&&(r.clusterWide=!0),p===t?r.value=!0:p>0&&(r.indeterminate=!0)}),this.initialSelection=E().cloneDeep(this.flags)})}getActivatedIndivFlags(){const t={};return this.flags.forEach(o=>{t[o.code]=0}),[].concat(...this.selected.map(o=>o.state)).map(o=>{Object.keys(t).includes(o)&&(t[o]=t[o]+1)}),t}changeValue(t){t.value=!t.value,t.indeterminate=!1}resetSelection(){this.flags=E().cloneDeep(this.initialSelection)}submitAction(){const t={};this.flags.forEach(i=>{t[i.code]=i.indeterminate?null:i.value});const o=this.selected.map(i=>i.osd);this.osdService.updateIndividualFlags(t,o).subscribe(()=>{this.notificationService.show(Le._.success,$localize`Updated OSD Flags`),this.activeModal.close()},()=>{this.activeModal.close()})}static{this.\u0275fac=function(o){return new(o||n)(e.\u0275\u0275directiveInject(V.NgbActiveModal),e.\u0275\u0275directiveInject(f.Ss),e.\u0275\u0275directiveInject(_.v),e.\u0275\u0275directiveInject(It),e.\u0275\u0275directiveInject(Y.J))}}static{this.\u0275cmp=e.\u0275\u0275defineComponent({type:n,selectors:[["cd-osd-flags-indiv-modal"]],decls:12,vars:6,consts:()=>{let t,o,i;return t=$localize`:␟b6b27c16ddf33b855412c82069dca8120bd3a68a␟2988036888607431567:Individual OSD Flags`,o=$localize`:␟e2a3f211cea2cbadb29b6df93e544440b6b68d3e␟7629422865403582133:Restore previous selection`,i=$localize`:␟dba0ed9ba355a3bd3296c0bef3bb518744a51a89␟300820688504209818:Cluster-wide`,[["formDir","ngForm"],t,o,i,[3,"modalRef"],[1,"modal-title"],[1,"modal-content"],["name","osdFlagsForm","novalidate","",3,"formGroup"],[1,"modal-body","osd-modal"],["class","custom-control custom-checkbox",4,"ngFor","ngForOf"],[1,"modal-footer"],["type","button",1,"btn","btn-light",3,"click"],[3,"submitActionEvent","form","showSubmit","submitText"],[1,"custom-control","custom-checkbox"],["type","checkbox",1,"custom-control-input",3,"change","checked","indeterminate","name","id"],["ng-class","['tc_' + key]",1,"custom-control-label",3,"for"],["class","badge badge-hdd ms-2",3,"ngbTooltip",4,"ngIf"],[1,"form-text","text-muted"],["class","m-1",4,"ngIf"],[1,"badge","badge-hdd","ms-2",3,"ngbTooltip"],[1,"m-1"]]},template:function(o,i){if(1&o){const r=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"cd-modal",4),e.\u0275\u0275elementContainerStart(1,5),e.\u0275\u0275i18n(2,1),e.\u0275\u0275elementContainerEnd(),e.\u0275\u0275elementContainerStart(3,6),e.\u0275\u0275elementStart(4,"form",7,0)(6,"div",8),e.\u0275\u0275template(7,dC,10,9,"div",9),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(8,"div",10)(9,"button",11),e.\u0275\u0275listener("click",function(){return e.\u0275\u0275restoreView(r),e.\u0275\u0275resetView(i.resetSelection())}),e.\u0275\u0275i18n(10,2),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(11,"cd-form-button-panel",12),e.\u0275\u0275listener("submitActionEvent",function(){return e.\u0275\u0275restoreView(r),e.\u0275\u0275resetView(i.submitAction())}),e.\u0275\u0275elementEnd()()(),e.\u0275\u0275elementContainerEnd(),e.\u0275\u0275elementEnd()}2&o&&(e.\u0275\u0275property("modalRef",i.activeModal),e.\u0275\u0275advance(4),e.\u0275\u0275property("formGroup",i.osdFlagsForm),e.\u0275\u0275advance(3),e.\u0275\u0275property("ngForOf",i.flags),e.\u0275\u0275advance(4),e.\u0275\u0275property("form",i.osdFlagsForm)("showSubmit",i.permissions.osd.update)("submitText",i.actionLabels.UPDATE))},dependencies:[l.NgForOf,l.NgIf,xt.z,Q.e,De.S,Me.a,ze.E,T.\u0275NgNoValidate,T.NgControlStatusGroup,T.FormGroupDirective,V.NgbTooltip]})}}return n})();var Ta=s(24689);function pC(n,c){1&n&&e.\u0275\u0275element(0,"hr",15)}function mC(n,c){if(1&n){const t=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"div",10)(1,"input",11),e.\u0275\u0275listener("change",function(){const i=e.\u0275\u0275restoreView(t).$implicit;return e.\u0275\u0275resetView(i.value=!i.value)}),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(2,"label",12)(3,"strong"),e.\u0275\u0275text(4),e.\u0275\u0275elementEnd(),e.\u0275\u0275element(5,"br"),e.\u0275\u0275elementStart(6,"span",13),e.\u0275\u0275text(7),e.\u0275\u0275elementEnd()(),e.\u0275\u0275template(8,pC,1,0,"hr",14),e.\u0275\u0275elementEnd()}if(2&n){const t=c.$implicit,o=c.last;e.\u0275\u0275advance(),e.\u0275\u0275property("checked",t.value)("name",t.code)("id",t.code)("disabled",t.disabled),e.\u0275\u0275advance(),e.\u0275\u0275property("for",t.code),e.\u0275\u0275advance(2),e.\u0275\u0275textInterpolate(t.name),e.\u0275\u0275advance(3),e.\u0275\u0275textInterpolate(t.description),e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf",!o)}}let fC=(()=>{class n{constructor(t,o,i,r,p){this.activeModal=t,this.actionLabels=o,this.authStorageService=i,this.osdService=r,this.notificationService=p,this.osdFlagsForm=new T.UntypedFormGroup({}),this.allFlags={noin:{code:"noin",name:$localize`No In`,value:!1,description:$localize`OSDs that were previously marked out will not be marked back in when they start`},noout:{code:"noout",name:$localize`No Out`,value:!1,description:$localize`OSDs will not automatically be marked out after the configured interval`},noup:{code:"noup",name:$localize`No Up`,value:!1,description:$localize`OSDs are not allowed to start`},nodown:{code:"nodown",name:$localize`No Down`,value:!1,description:$localize`OSD failure reports are being ignored, such that the monitors will not mark OSDs down`},pause:{code:"pause",name:$localize`Pause`,value:!1,description:$localize`Pauses reads and writes`},noscrub:{code:"noscrub",name:$localize`No Scrub`,value:!1,description:$localize`Scrubbing is disabled`},"nodeep-scrub":{code:"nodeep-scrub",name:$localize`No Deep Scrub`,value:!1,description:$localize`Deep Scrubbing is disabled`},nobackfill:{code:"nobackfill",name:$localize`No Backfill`,value:!1,description:$localize`Backfilling of PGs is suspended`},norebalance:{code:"norebalance",name:$localize`No Rebalance`,value:!1,description:$localize`OSD will choose not to backfill unless PG is also degraded`},norecover:{code:"norecover",name:$localize`No Recover`,value:!1,description:$localize`Recovery of PGs is suspended`},sortbitwise:{code:"sortbitwise",name:$localize`Bitwise Sort`,value:!1,description:$localize`Use bitwise sort`,disabled:!0},purged_snapdirs:{code:"purged_snapdirs",name:$localize`Purged Snapdirs`,value:!1,description:$localize`OSDs have converted snapsets`,disabled:!0},recovery_deletes:{code:"recovery_deletes",name:$localize`Recovery Deletes`,value:!1,description:$localize`Deletes performed during recovery instead of peering`,disabled:!0},pglog_hardlimit:{code:"pglog_hardlimit",name:$localize`PG Log Hard Limit`,value:!1,description:$localize`Puts a hard limit on pg log length`,disabled:!0}},this.unknownFlags=[],this.permissions=this.authStorageService.getPermissions()}ngOnInit(){this.osdService.getFlags().subscribe(t=>{t.forEach(o=>{this.allFlags[o]?this.allFlags[o].value=!0:this.unknownFlags.push(o)}),this.flags=E().toArray(this.allFlags)})}submitAction(){const t=this.flags.filter(o=>o.value).map(o=>o.code).concat(this.unknownFlags);this.osdService.updateFlags(t).subscribe(()=>{this.notificationService.show(Le._.success,$localize`Updated OSD Flags`),this.activeModal.close()},()=>{this.activeModal.close()})}static{this.\u0275fac=function(o){return new(o||n)(e.\u0275\u0275directiveInject(V.NgbActiveModal),e.\u0275\u0275directiveInject(f.Ss),e.\u0275\u0275directiveInject(_.v),e.\u0275\u0275directiveInject(It),e.\u0275\u0275directiveInject(Y.J))}}static{this.\u0275cmp=e.\u0275\u0275defineComponent({type:n,selectors:[["cd-osd-flags-modal"]],decls:10,vars:6,consts:()=>{let t;return t=$localize`:␟5ef50ba2514414f799d4c8fc36067a251904ba81␟9119922393697848507:Cluster-wide OSD Flags`,[["formDir","ngForm"],t,[3,"modalRef"],[1,"modal-title"],[1,"modal-content"],["name","osdFlagsForm","novalidate","","cdFormScope","osd",3,"formGroup"],[1,"modal-body","osd-modal"],["class","custom-control custom-checkbox",4,"ngFor","ngForOf"],[1,"modal-footer"],[3,"submitActionEvent","form","showSubmit","submitText"],[1,"custom-control","custom-checkbox"],["type","checkbox",1,"custom-control-input",3,"change","checked","name","id","disabled"],["ng-class","['tc_' + key]",1,"custom-control-label",3,"for"],[1,"form-text","text-muted"],["class","m-1",4,"ngIf"],[1,"m-1"]]},template:function(o,i){if(1&o){const r=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"cd-modal",2),e.\u0275\u0275elementContainerStart(1,3),e.\u0275\u0275i18n(2,1),e.\u0275\u0275elementContainerEnd(),e.\u0275\u0275elementContainerStart(3,4),e.\u0275\u0275elementStart(4,"form",5,0)(6,"div",6),e.\u0275\u0275template(7,mC,9,8,"div",7),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(8,"div",8)(9,"cd-form-button-panel",9),e.\u0275\u0275listener("submitActionEvent",function(){return e.\u0275\u0275restoreView(r),e.\u0275\u0275resetView(i.submitAction())}),e.\u0275\u0275elementEnd()()(),e.\u0275\u0275elementContainerEnd(),e.\u0275\u0275elementEnd()}2&o&&(e.\u0275\u0275property("modalRef",i.activeModal),e.\u0275\u0275advance(4),e.\u0275\u0275property("formGroup",i.osdFlagsForm),e.\u0275\u0275advance(3),e.\u0275\u0275property("ngForOf",i.flags),e.\u0275\u0275advance(2),e.\u0275\u0275property("form",i.osdFlagsForm)("showSubmit",i.permissions.osd.update)("submitText",i.actionLabels.UPDATE))},dependencies:[l.NgForOf,l.NgIf,xt.z,Q.e,De.S,Ta.q,Me.a,ze.E,T.\u0275NgNoValidate,T.NgControlStatusGroup,T.FormGroupDirective]})}}return n})();const EC=n=>[n];function gC(n,c){if(1&n&&(e.\u0275\u0275elementStart(0,"cd-helper"),e.\u0275\u0275text(1),e.\u0275\u0275elementEnd()),2&n){const t=e.\u0275\u0275nextContext(2).$implicit;e.\u0275\u0275advance(),e.\u0275\u0275textInterpolate1(" ",t.long_desc,"")}}function CC(n,c){if(1&n&&(e.\u0275\u0275elementStart(0,"div",6)(1,"label",7)(2,"b"),e.\u0275\u0275text(3),e.\u0275\u0275elementEnd(),e.\u0275\u0275element(4,"br"),e.\u0275\u0275elementStart(5,"span",8),e.\u0275\u0275text(6),e.\u0275\u0275template(7,gC,2,1,"cd-helper",9),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(8,"div",10)(9,"div",11),e.\u0275\u0275element(10,"input",12)(11,"label",13),e.\u0275\u0275elementEnd()()()),2&n){const t=e.\u0275\u0275nextContext().$implicit;e.\u0275\u0275advance(),e.\u0275\u0275property("for",t.name),e.\u0275\u0275advance(2),e.\u0275\u0275textInterpolate(t.text),e.\u0275\u0275advance(3),e.\u0275\u0275textInterpolate1(" ",t.desc," "),e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf",t.long_desc),e.\u0275\u0275advance(3),e.\u0275\u0275property("id",t.name)("formControlName",t.name),e.\u0275\u0275advance(),e.\u0275\u0275property("for",t.name)}}function SC(n,c){if(1&n&&(e.\u0275\u0275elementStart(0,"cd-helper"),e.\u0275\u0275text(1),e.\u0275\u0275elementEnd()),2&n){const t=e.\u0275\u0275nextContext(2).$implicit;e.\u0275\u0275advance(),e.\u0275\u0275textInterpolate1(" ",t.long_desc,"")}}function hC(n,c){if(1&n){const t=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"button",18),e.\u0275\u0275listener("click",function(){e.\u0275\u0275restoreView(t);const i=e.\u0275\u0275nextContext(2).$implicit,r=e.\u0275\u0275nextContext();return e.\u0275\u0275resetView(r.resetValue(i.name))}),e.\u0275\u0275element(1,"i",19),e.\u0275\u0275elementEnd()}if(2&n){const t=e.\u0275\u0275nextContext(3);e.\u0275\u0275advance(),e.\u0275\u0275property("ngClass",e.\u0275\u0275pureFunction1(1,EC,t.icons.erase))}}function TC(n,c){if(1&n&&(e.\u0275\u0275elementStart(0,"span",20),e.\u0275\u0275text(1),e.\u0275\u0275elementEnd()),2&n){const t=e.\u0275\u0275nextContext(2).$implicit;e.\u0275\u0275advance(),e.\u0275\u0275textInterpolate1(" ",t.additionalTypeInfo.patternHelpText,"")}}function FC(n,c){if(1&n&&(e.\u0275\u0275elementStart(0,"span",20),e.\u0275\u0275text(1),e.\u0275\u0275elementEnd()),2&n){const t=e.\u0275\u0275nextContext(2).$implicit;e.\u0275\u0275advance(),e.\u0275\u0275textInterpolate1(" ",t.additionalTypeInfo.patternHelpText,"")}}function vC(n,c){if(1&n&&(e.\u0275\u0275elementStart(0,"span",20),e.\u0275\u0275i18n(1,0),e.\u0275\u0275elementEnd()),2&n){const t=e.\u0275\u0275nextContext(2).$implicit;e.\u0275\u0275advance(),e.\u0275\u0275i18nExp(t.maxValue),e.\u0275\u0275i18nApply(1)}}function MC(n,c){if(1&n&&(e.\u0275\u0275elementStart(0,"span",20),e.\u0275\u0275i18n(1,1),e.\u0275\u0275elementEnd()),2&n){const t=e.\u0275\u0275nextContext(2).$implicit;e.\u0275\u0275advance(),e.\u0275\u0275i18nExp(t.minValue),e.\u0275\u0275i18nApply(1)}}function RC(n,c){if(1&n&&(e.\u0275\u0275elementStart(0,"div",6)(1,"label",7),e.\u0275\u0275text(2),e.\u0275\u0275element(3,"br"),e.\u0275\u0275elementStart(4,"span",8),e.\u0275\u0275text(5),e.\u0275\u0275template(6,SC,2,1,"cd-helper",9),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(7,"div",10)(8,"div",14),e.\u0275\u0275element(9,"input",15),e.\u0275\u0275template(10,hC,2,3,"button",16),e.\u0275\u0275elementEnd(),e.\u0275\u0275template(11,TC,2,1,"span",17)(12,FC,2,1,"span",17)(13,vC,2,1,"span",17)(14,MC,2,1,"span",17),e.\u0275\u0275elementEnd()()),2&n){const t=e.\u0275\u0275nextContext().$implicit,o=e.\u0275\u0275nextContext();e.\u0275\u0275advance(),e.\u0275\u0275property("for",t.name),e.\u0275\u0275advance(),e.\u0275\u0275textInterpolate1("",t.text," "),e.\u0275\u0275advance(3),e.\u0275\u0275textInterpolate1(" ",t.desc," "),e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf",t.long_desc),e.\u0275\u0275advance(3),e.\u0275\u0275property("type",t.additionalTypeInfo.inputType)("id",t.name)("placeholder",t.additionalTypeInfo.humanReadable)("formControlName",t.name)("step",o.getStep(t.type,o.optionsForm.getValue(t.name))),e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf",o.optionsFormShowReset),e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf",o.optionsForm.showError(t.name,o.optionsFormDir,"pattern")),e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf",o.optionsForm.showError(t.name,o.optionsFormDir,"invalidUuid")),e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf",o.optionsForm.showError(t.name,o.optionsFormDir,"max")),e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf",o.optionsForm.showError(t.name,o.optionsFormDir,"min"))}}function OC(n,c){1&n&&e.\u0275\u0275element(0,"hr",21)}function PC(n,c){if(1&n&&(e.\u0275\u0275elementStart(0,"div"),e.\u0275\u0275template(1,CC,12,7,"div",4)(2,RC,15,14,"div",4)(3,OC,1,0,"hr",5),e.\u0275\u0275elementEnd()),2&n){const t=c.$implicit,o=c.last;e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf","bool"===t.type),e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf","bool"!==t.type),e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf",!o)}}let bC=(()=>{class n{constructor(t){this.configService=t,this.optionNames=[],this.optionsForm=new Se.$({}),this.optionsFormDir=new T.NgForm([],[]),this.optionsFormGroupName="",this.optionsFormShowReset=!0,this.icons=g.FI,this.options=[],this.optionsFormGroup=new Se.$({})}static optionNameToText(t){const o=["mon","mgr","osd","mds","client"];return t.split("_").filter((i,r)=>0!==r||!o.includes(i)).map(i=>i.charAt(0).toUpperCase()+i.substring(1)).join(" ")}ngOnInit(){this.createForm(),this.loadStoredData()}createForm(){this.optionsForm.addControl(this.optionsFormGroupName,this.optionsFormGroup),this.optionNames.forEach(t=>{this.optionsFormGroup.addControl(t,new T.UntypedFormControl(null))})}getStep(t,o){return to.getTypeStep(t,o)}loadStoredData(){this.configService.filter(this.optionNames).subscribe(t=>{this.options=t.map(o=>{const i=this.optionsForm.get(o.name),r=to.getTypeValidators(o);return o.additionalTypeInfo=to.getType(o.type),o.text=n.optionNameToText(o.name),o.value=E().find(o.value,p=>"osd"===p.section),o.value&&i.setValue("bool"===o.additionalTypeInfo.name?"true"===o.value.value:o.value.value),r&&(o.patternHelpText=r.patternHelpText,"max"in r&&""!==r.max&&(o.maxValue=r.max),"min"in r&&""!==r.min&&(o.minValue=r.min),i.setValidators(r.validators)),o})})}saveValues(){const t={};return this.optionNames.forEach(o=>{const i=this.optionsForm.getValue(o);null!==i&&""!==i&&(t[o]={section:"osd",value:i})}),this.configService.bulkCreate({options:t})}resetValue(t){this.configService.delete(t,"osd").subscribe(()=>{this.optionsForm.get(t).reset()})}static{this.\u0275fac=function(o){return new(o||n)(e.\u0275\u0275directiveInject(M.s))}}static{this.\u0275cmp=e.\u0275\u0275defineComponent({type:n,selectors:[["cd-config-option"]],inputs:{optionNames:"optionNames",optionsForm:"optionsForm",optionsFormDir:"optionsFormDir",optionsFormGroupName:"optionsFormGroupName",optionsFormShowReset:"optionsFormShowReset"},decls:2,vars:2,consts:()=>{let t,o,i;return t=$localize`:␟6c947210e2d162b6225083d18820ab602f58cd2d␟1423995964683265961:Remove the custom configuration value. The default configuration will be inherited and used instead.`,o=$localize`:␟454ee9cb60b00446a8fb147fd2cc5eb836320586␟6379768697525276989:The entered value is too high! It must not be greater than ${"\ufffd0\ufffd"}:INTERPOLATION:.`,i=$localize`:␟7fc8a22825131e028336f60ef909ccbd96059703␟3754071702087122993:The entered value is too low! It must not be lower than ${"\ufffd0\ufffd"}:INTERPOLATION:.`,[o,i,[3,"formGroup"],[4,"ngFor","ngForOf"],["class","form-group row pt-2",4,"ngIf"],["class","my-2",4,"ngIf"],[1,"form-group","row","pt-2"],[1,"cd-col-form-label",3,"for"],[1,"text-muted"],[4,"ngIf"],[1,"cd-col-form-input"],[1,"custom-control","custom-checkbox"],["type","checkbox",1,"custom-control-input",3,"id","formControlName"],[1,"custom-control-label",3,"for"],[1,"input-group"],[1,"form-control",3,"type","id","placeholder","formControlName","step"],["class","btn btn-light","type","button","data-toggle","button","title",t,3,"click",4,"ngIf"],["class","invalid-feedback",4,"ngIf"],["type","button","data-toggle","button","title",t,1,"btn","btn-light",3,"click"],["aria-hidden","true",3,"ngClass"],[1,"invalid-feedback"],[1,"my-2"]]},template:function(o,i){1&o&&(e.\u0275\u0275elementStart(0,"div",2),e.\u0275\u0275template(1,PC,4,3,"div",3),e.\u0275\u0275elementEnd()),2&o&&(e.\u0275\u0275property("formGroup",i.optionsFormGroup),e.\u0275\u0275advance(),e.\u0275\u0275property("ngForOf",i.options))},dependencies:[l.NgClass,l.NgForOf,l.NgIf,T.DefaultValueAccessor,T.CheckboxControlValueAccessor,T.NgControlStatus,T.NgControlStatusGroup,T.FormGroupDirective,T.FormControlName,De.S,Me.a,xe.C,ze.E,b.m],styles:[".custom-checkbox[_ngcontent-%COMP%]   label[_ngcontent-%COMP%], .custom-checkbox[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{cursor:pointer}.col-form-label[_ngcontent-%COMP%]{text-align:left}"]})}}return n})(),vs=(()=>{class n{static{this.basicOptions=["osd_scrub_during_recovery","osd_scrub_begin_hour","osd_scrub_end_hour","osd_scrub_begin_week_day","osd_scrub_end_week_day","osd_scrub_min_interval","osd_scrub_max_interval","osd_deep_scrub_interval","osd_scrub_auto_repair","osd_max_scrubs","osd_scrub_priority","osd_scrub_sleep"]}static{this.advancedOptions=["osd_scrub_auto_repair_num_errors","osd_debug_deep_scrub_sleep","osd_deep_scrub_keys","osd_deep_scrub_large_omap_object_key_threshold","osd_deep_scrub_large_omap_object_value_sum_threshold","osd_deep_scrub_randomize_ratio","osd_deep_scrub_stride","osd_deep_scrub_update_digest_min_age","osd_requested_scrub_priority","osd_scrub_backoff_ratio","osd_scrub_chunk_max","osd_scrub_chunk_min","osd_scrub_cost","osd_scrub_interval_randomize_ratio","osd_scrub_invalid_stats","osd_scrub_load_threshold","osd_scrub_max_preemptions","osd_shallow_scrub_chunk_max","osd_shallow_scrub_chunk_min"]}}return n})();const NC=["basicOptionsValues"],IC=["advancedOptionsValues"];function AC(n,c){if(1&n){const t=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"a",18),e.\u0275\u0275listener("click",function(){e.\u0275\u0275restoreView(t);const i=e.\u0275\u0275nextContext();return e.\u0275\u0275resetView(i.advancedEnabled=!0)}),e.\u0275\u0275i18n(1,4),e.\u0275\u0275elementEnd()}}function DC(n,c){if(1&n&&(e.\u0275\u0275elementStart(0,"div")(1,"h3",19),e.\u0275\u0275i18n(2,5),e.\u0275\u0275elementEnd(),e.\u0275\u0275element(3,"cd-config-option",11,2),e.\u0275\u0275elementEnd()),2&n){const t=e.\u0275\u0275nextContext(),o=e.\u0275\u0275reference(7);e.\u0275\u0275advance(3),e.\u0275\u0275property("optionNames",t.advancedOptions)("optionsForm",t.osdPgScrubForm)("optionsFormDir",o)("optionsFormGroupName","advancedFormGroup")}}let yC=(()=>{class n{constructor(t,o,i,r){this.activeModal=t,this.authStorageService=o,this.notificationService=i,this.actionLabels=r,this.basicOptions=vs.basicOptions,this.advancedOptions=vs.advancedOptions,this.advancedEnabled=!1,this.osdPgScrubForm=new Se.$({}),this.resource=$localize`PG scrub options`,this.action=this.actionLabels.EDIT,this.permissions=this.authStorageService.getPermissions()}submitAction(){const t=[this.basicOptionsValues.saveValues()];this.advancedOptionsValues&&t.push(this.advancedOptionsValues.saveValues()),(0,K.forkJoin)(t).subscribe(()=>{this.notificationService.show(Le._.success,$localize`Updated PG scrub options`),this.activeModal.close()},()=>{this.activeModal.close()})}static{this.\u0275fac=function(o){return new(o||n)(e.\u0275\u0275directiveInject(V.NgbActiveModal),e.\u0275\u0275directiveInject(_.v),e.\u0275\u0275directiveInject(Y.J),e.\u0275\u0275directiveInject(f.Ss))}}static{this.\u0275cmp=e.\u0275\u0275defineComponent({type:n,selectors:[["cd-osd-pg-scrub-modal"]],viewQuery:function(o,i){if(1&o&&(e.\u0275\u0275viewQuery(NC,7),e.\u0275\u0275viewQuery(IC,5)),2&o){let r;e.\u0275\u0275queryRefresh(r=e.\u0275\u0275loadQuery())&&(i.basicOptionsValues=r.first),e.\u0275\u0275queryRefresh(r=e.\u0275\u0275loadQuery())&&(i.advancedOptionsValues=r.first)}},decls:19,vars:21,consts:()=>{let t,o,i;return t=$localize`:form title␟fb127ea03835b3230f0ed981c7080e2ccb879621␟3346778808274133574:${"\ufffd0\ufffd"}:INTERPOLATION: ${"\ufffd1\ufffd"}:INTERPOLATION_1:`,o=$localize`:␟1cfe07dac5b4ee1c464eb24225ddeb4f1d24076a␟5943692975122361417:Advanced...`,i=$localize`:␟b1ef1c12ddcee305353623919ef02778569f5454␟2731027584190859351:Advanced configuration options`,[["formDir","ngForm"],["basicOptionsValues",""],["advancedOptionsValues",""],t,o,i,[3,"modalRef"],[1,"modal-title"],[1,"modal-content"],["novalidate","","cdFormScope","osd",3,"formGroup"],[1,"modal-body","osd-modal"],[3,"optionNames","optionsForm","optionsFormDir","optionsFormGroupName"],[1,"row"],[1,"col-sm-12"],["class","pull-right margin-right-md",3,"click",4,"ngIf"],[4,"ngIf"],[1,"modal-footer"],[3,"submitActionEvent","form","showSubmit","submitText"],[1,"pull-right","margin-right-md",3,"click"],[1,"page-header"]]},template:function(o,i){if(1&o){const r=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"cd-modal",6),e.\u0275\u0275elementContainerStart(1,7),e.\u0275\u0275i18n(2,3),e.\u0275\u0275pipe(3,"titlecase"),e.\u0275\u0275pipe(4,"upperFirst"),e.\u0275\u0275elementContainerEnd(),e.\u0275\u0275elementContainerStart(5,8),e.\u0275\u0275elementStart(6,"form",9,0)(8,"div",10),e.\u0275\u0275element(9,"cd-config-option",11,1),e.\u0275\u0275elementStart(11,"div",12)(12,"div",13),e.\u0275\u0275template(13,AC,2,0,"a",14),e.\u0275\u0275elementEnd()(),e.\u0275\u0275template(14,DC,5,4,"div",15),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(15,"div",16)(16,"cd-form-button-panel",17),e.\u0275\u0275pipe(17,"titlecase"),e.\u0275\u0275pipe(18,"upperFirst"),e.\u0275\u0275listener("submitActionEvent",function(){return e.\u0275\u0275restoreView(r),e.\u0275\u0275resetView(i.submitAction())}),e.\u0275\u0275elementEnd()()(),e.\u0275\u0275elementContainerEnd(),e.\u0275\u0275elementEnd()}if(2&o){const r=e.\u0275\u0275reference(7);e.\u0275\u0275property("modalRef",i.activeModal),e.\u0275\u0275advance(4),e.\u0275\u0275i18nExp(e.\u0275\u0275pipeBind1(3,13,i.action))(e.\u0275\u0275pipeBind1(4,15,i.resource)),e.\u0275\u0275i18nApply(2),e.\u0275\u0275advance(2),e.\u0275\u0275property("formGroup",i.osdPgScrubForm),e.\u0275\u0275advance(3),e.\u0275\u0275property("optionNames",i.basicOptions)("optionsForm",i.osdPgScrubForm)("optionsFormDir",r)("optionsFormGroupName","basicFormGroup"),e.\u0275\u0275advance(4),e.\u0275\u0275property("ngIf",!i.advancedEnabled),e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf",i.advancedEnabled),e.\u0275\u0275advance(2),e.\u0275\u0275property("form",i.osdPgScrubForm)("showSubmit",i.permissions.configOpt.update)("submitText",e.\u0275\u0275pipeBind1(17,17,i.action)+" "+e.\u0275\u0275pipeBind1(18,19,i.resource))}},dependencies:[l.NgIf,xt.z,bC,Q.e,Ta.q,ze.E,T.\u0275NgNoValidate,T.NgControlStatusGroup,T.FormGroupDirective,l.TitleCasePipe,Oe.r]})}}return n})();const LC=n=>({required:n});function $C(n,c){if(1&n&&(e.\u0275\u0275elementStart(0,"option",27),e.\u0275\u0275text(1),e.\u0275\u0275elementEnd()),2&n){const t=c.$implicit;e.\u0275\u0275property("value",t.name),e.\u0275\u0275advance(),e.\u0275\u0275textInterpolate1(" ",t.text," ")}}function xC(n,c){1&n&&(e.\u0275\u0275elementStart(0,"span",28),e.\u0275\u0275i18n(1,4),e.\u0275\u0275elementEnd())}function UC(n,c){if(1&n&&(e.\u0275\u0275elementStart(0,"cd-helper"),e.\u0275\u0275text(1),e.\u0275\u0275elementEnd()),2&n){const t=e.\u0275\u0275nextContext().$implicit;e.\u0275\u0275advance(),e.\u0275\u0275textInterpolate(t.value.desc)}}function wC(n,c){1&n&&(e.\u0275\u0275elementStart(0,"span",28),e.\u0275\u0275i18n(1,5),e.\u0275\u0275elementEnd())}function GC(n,c){if(1&n&&(e.\u0275\u0275elementStart(0,"span",28),e.\u0275\u0275i18n(1,6),e.\u0275\u0275elementEnd()),2&n){const t=e.\u0275\u0275nextContext().$implicit;e.\u0275\u0275advance(),e.\u0275\u0275i18nExp(t.value.patternHelpText),e.\u0275\u0275i18nApply(1)}}function HC(n,c){if(1&n&&(e.\u0275\u0275elementStart(0,"span",28),e.\u0275\u0275i18n(1,7),e.\u0275\u0275elementEnd()),2&n){const t=e.\u0275\u0275nextContext().$implicit;e.\u0275\u0275advance(),e.\u0275\u0275i18nExp(t.value.maxValue),e.\u0275\u0275i18nApply(1)}}function VC(n,c){if(1&n&&(e.\u0275\u0275elementStart(0,"span",28),e.\u0275\u0275i18n(1,8),e.\u0275\u0275elementEnd()),2&n){const t=e.\u0275\u0275nextContext().$implicit;e.\u0275\u0275advance(),e.\u0275\u0275i18nExp(t.value.minValue),e.\u0275\u0275i18nApply(1)}}function BC(n,c){if(1&n&&(e.\u0275\u0275elementStart(0,"div",14)(1,"label",29)(2,"span",30),e.\u0275\u0275text(3),e.\u0275\u0275elementEnd(),e.\u0275\u0275template(4,UC,2,1,"cd-helper",31),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(5,"div",16),e.\u0275\u0275element(6,"input",32),e.\u0275\u0275template(7,wC,2,0,"span",19)(8,GC,2,1,"span",19)(9,HC,2,1,"span",19)(10,VC,2,1,"span",19),e.\u0275\u0275elementEnd()()),2&n){const t=c.$implicit,o=e.\u0275\u0275nextContext(),i=e.\u0275\u0275reference(5);e.\u0275\u0275advance(),e.\u0275\u0275property("for",t.key),e.\u0275\u0275advance(),e.\u0275\u0275property("ngClass",e.\u0275\u0275pureFunction1(11,LC,o.osdRecvSpeedForm.getValue("customizePriority"))),e.\u0275\u0275advance(),e.\u0275\u0275textInterpolate1(" ",t.value.text," "),e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf",t.value.desc),e.\u0275\u0275advance(2),e.\u0275\u0275property("id",t.key)("formControlName",t.key)("readonly",!o.osdRecvSpeedForm.getValue("customizePriority")),e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf",o.osdRecvSpeedForm.getValue("customizePriority")&&o.osdRecvSpeedForm.showError(t.key,i,"required")),e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf",o.osdRecvSpeedForm.getValue("customizePriority")&&o.osdRecvSpeedForm.showError(t.key,i,"pattern")),e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf",o.osdRecvSpeedForm.getValue("customizePriority")&&o.osdRecvSpeedForm.showError(t.key,i,"max")),e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf",o.osdRecvSpeedForm.getValue("customizePriority")&&o.osdRecvSpeedForm.showError(t.key,i,"min"))}}let zC=(()=>{class n{constructor(t,o,i,r,p,F){this.activeModal=t,this.actionLabels=o,this.authStorageService=i,this.configService=r,this.notificationService=p,this.osdService=F,this.priorities=[],this.priorityAttrs={},this.permissions=this.authStorageService.getPermissions(),this.priorities=this.osdService.osdRecvSpeedModalPriorities.KNOWN_PRIORITIES,this.osdRecvSpeedForm=new Se.$({priority:new T.UntypedFormControl(null,{validators:[T.Validators.required]}),customizePriority:new T.UntypedFormControl(!1)}),this.priorityAttrs={osd_max_backfills:{text:$localize`Max Backfills`,desc:"",patternHelpText:"",maxValue:void 0,minValue:void 0},osd_recovery_max_active:{text:$localize`Recovery Max Active`,desc:"",patternHelpText:"",maxValue:void 0,minValue:void 0},osd_recovery_max_single_start:{text:$localize`Recovery Max Single Start`,desc:"",patternHelpText:"",maxValue:void 0,minValue:void 0},osd_recovery_sleep:{text:$localize`Recovery Sleep`,desc:"",patternHelpText:"",maxValue:void 0,minValue:void 0}},Object.keys(this.priorityAttrs).forEach(D=>{this.osdRecvSpeedForm.addControl(D,new T.UntypedFormControl(null,{validators:[T.Validators.required]}))})}ngOnInit(){this.configService.filter(Object.keys(this.priorityAttrs)).subscribe(t=>{const o=this.getCurrentValues(t);this.detectPriority(o.values,i=>{this.setPriority(i)}),this.setDescription(o.configOptions),this.setValidators(o.configOptions)})}detectPriority(t,o){const i=E().find(this.priorities,r=>E().isEqual(r.values,t));return this.osdRecvSpeedForm.controls.customizePriority.setValue(!1),i?o(i):4===Object.entries(t).length?(this.osdRecvSpeedForm.controls.customizePriority.setValue(!0),o(Object({name:"custom",text:$localize`Custom`,values:t}))):o(this.priorities[0])}getCurrentValues(t){const o={values:{},configOptions:[]};return t.forEach(i=>{o.configOptions.push(i),"value"in i?i.value.forEach(r=>{"osd"===r.section&&(o.values[i.name]=Number(r.value))}):"default"in i&&null!==i.default&&(o.values[i.name]=Number(i.default))}),o}setDescription(t){t.forEach(o=>{""!==o.desc&&(this.priorityAttrs[o.name].desc=o.desc)})}setPriority(t){const o=E().find(this.priorities,i=>"custom"===i.name);"custom"===t.name?o||this.priorities.push(t):o&&this.priorities.splice(this.priorities.indexOf(o),1),this.osdRecvSpeedForm.controls.priority.setValue(t.name),Object.entries(t.values).forEach(([i,r])=>{this.osdRecvSpeedForm.controls[i].setValue(r)})}setValidators(t){t.forEach(o=>{const i=to.getTypeValidators(o);i?(i.validators.push(T.Validators.required),"max"in i&&""!==i.max&&(this.priorityAttrs[o.name].maxValue=i.max),"min"in i&&""!==i.min&&(this.priorityAttrs[o.name].minValue=i.min),this.priorityAttrs[o.name].patternHelpText=i.patternHelpText,this.osdRecvSpeedForm.controls[o.name].setValidators(i.validators)):this.osdRecvSpeedForm.controls[o.name].setValidators(T.Validators.required)})}onCustomizePriorityChange(){const t={};if(Object.keys(this.priorityAttrs).forEach(o=>{t[o]=this.osdRecvSpeedForm.getValue(o)}),this.osdRecvSpeedForm.getValue("customizePriority")){const o={name:"custom",text:$localize`Custom`,values:t};this.setPriority(o)}else this.detectPriority(t,o=>{this.setPriority(o)})}onPriorityChange(t){const o=E().find(this.priorities,i=>i.name===t)||this.priorities[0];this.osdRecvSpeedForm.get("customizePriority").setValue(!1),this.setPriority(o)}submitAction(){const t={};Object.keys(this.priorityAttrs).forEach(o=>{t[o]={section:"osd",value:this.osdRecvSpeedForm.getValue(o)}}),this.configService.bulkCreate({options:t}).subscribe(()=>{this.notificationService.show(Le._.success,$localize`Updated OSD recovery speed priority '${this.osdRecvSpeedForm.getValue("priority")}'`),this.activeModal.close()},()=>{this.activeModal.close()})}static{this.\u0275fac=function(o){return new(o||n)(e.\u0275\u0275directiveInject(V.NgbActiveModal),e.\u0275\u0275directiveInject(f.Ss),e.\u0275\u0275directiveInject(_.v),e.\u0275\u0275directiveInject(M.s),e.\u0275\u0275directiveInject(Y.J),e.\u0275\u0275directiveInject(It))}}static{this.\u0275cmp=e.\u0275\u0275defineComponent({type:n,selectors:[["cd-osd-recv-speed-modal"]],decls:24,vars:10,consts:()=>{let t,o,i,r,p,F,D,x;return t=$localize`:␟c35f9c5f268a514b970cc55e9a5dc4bed0988e7f␟3566078749659760261:OSD Recovery Priority`,o=$localize`:␟b74af38005e8a8914e45af2ec412e11ceafef8b6␟2734022681675842051:Priority`,i=$localize`:␟c2f48f04b379bfba133825747adfd238d511412e␟5783945771957026158:Customize priority values`,r=$localize`:␟7cbdabcece469fab89cfa687ab152bca18b97498␟1417693714872528491:This field is required.`,p=$localize`:␟4aa19de2a2b54cbda39e9c62917b23044c087776␟751124305869330542:This field is required!`,F=$localize`:␟b699e94bf376491bd50b70a98531071c737eaf40␟1401779760991943921:${"\ufffd0\ufffd"}:INTERPOLATION:`,D=$localize`:␟98fe13e7ad6c2b80375d204b47858ded83f80e15␟6939928849308865685:The entered value is too high! It must not be greater than ${"\ufffd0\ufffd"}:INTERPOLATION:.`,x=$localize`:␟5423a3c111be47fc5a1bfe46ceb58c81c84db691␟4314201049807256403:The entered value is too low! It must not be lower than ${"\ufffd0\ufffd"}:INTERPOLATION:.`,[["formDir","ngForm"],t,o,i,r,p,F,D,x,[3,"modalRef"],[1,"modal-title"],[1,"modal-content"],["novalidate","","cdFormScope","osd",3,"formGroup"],[1,"modal-body"],[1,"form-group","row"],["for","priority",1,"cd-col-form-label","required"],[1,"cd-col-form-input"],["formControlName","priority","id","priority",1,"form-select",3,"change"],[3,"value",4,"ngFor","ngForOf"],["class","invalid-feedback",4,"ngIf"],[1,"cd-col-form-offset"],[1,"custom-control","custom-checkbox"],["formControlName","customizePriority","id","customizePriority","name","customizePriority","type","checkbox",1,"custom-control-input",3,"change"],["for","customizePriority",1,"custom-control-label"],["class","form-group row",4,"ngFor","ngForOf"],[1,"modal-footer"],[3,"submitActionEvent","form","submitText","showSubmit"],[3,"value"],[1,"invalid-feedback"],[1,"cd-col-form-label",3,"for"],[3,"ngClass"],[4,"ngIf"],["type","number",1,"form-control",3,"id","formControlName","readonly"]]},template:function(o,i){if(1&o){const r=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"cd-modal",9),e.\u0275\u0275elementContainerStart(1,10),e.\u0275\u0275i18n(2,1),e.\u0275\u0275elementContainerEnd(),e.\u0275\u0275elementContainerStart(3,11),e.\u0275\u0275elementStart(4,"form",12,0)(6,"div",13)(7,"div",14)(8,"label",15),e.\u0275\u0275i18n(9,2),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(10,"div",16)(11,"select",17),e.\u0275\u0275listener("change",function(F){return e.\u0275\u0275restoreView(r),e.\u0275\u0275resetView(i.onPriorityChange(F.target.value))}),e.\u0275\u0275template(12,$C,2,2,"option",18),e.\u0275\u0275elementEnd(),e.\u0275\u0275template(13,xC,2,0,"span",19),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(14,"div",14)(15,"div",20)(16,"div",21)(17,"input",22),e.\u0275\u0275listener("change",function(){return e.\u0275\u0275restoreView(r),e.\u0275\u0275resetView(i.onCustomizePriorityChange())}),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(18,"label",23),e.\u0275\u0275i18n(19,3),e.\u0275\u0275elementEnd()()()(),e.\u0275\u0275template(20,BC,11,13,"div",24),e.\u0275\u0275pipe(21,"keyvalue"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(22,"div",25)(23,"cd-form-button-panel",26),e.\u0275\u0275listener("submitActionEvent",function(){return e.\u0275\u0275restoreView(r),e.\u0275\u0275resetView(i.submitAction())}),e.\u0275\u0275elementEnd()()(),e.\u0275\u0275elementContainerEnd(),e.\u0275\u0275elementEnd()}if(2&o){const r=e.\u0275\u0275reference(5);e.\u0275\u0275property("modalRef",i.activeModal),e.\u0275\u0275advance(4),e.\u0275\u0275property("formGroup",i.osdRecvSpeedForm),e.\u0275\u0275advance(8),e.\u0275\u0275property("ngForOf",i.priorities),e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf",i.osdRecvSpeedForm.showError("priority",r,"required")),e.\u0275\u0275advance(7),e.\u0275\u0275property("ngForOf",e.\u0275\u0275pipeBind1(21,8,i.priorityAttrs)),e.\u0275\u0275advance(3),e.\u0275\u0275property("form",i.osdRecvSpeedForm)("submitText",i.actionLabels.UPDATE)("showSubmit",i.permissions.configOpt.update)}},dependencies:[l.NgClass,l.NgForOf,l.NgIf,b.m,xt.z,Q.e,De.S,Ta.q,Me.a,xe.C,ze.E,T.\u0275NgNoValidate,T.NgSelectOption,T.\u0275NgSelectMultipleOption,T.DefaultValueAccessor,T.NumberValueAccessor,T.CheckboxControlValueAccessor,T.SelectControlValueAccessor,T.NgControlStatus,T.NgControlStatusGroup,T.FormGroupDirective,T.FormControlName,l.KeyValuePipe]})}}return n})();function XC(n,c){1&n&&(e.\u0275\u0275elementStart(0,"span"),e.\u0275\u0275i18n(1,1),e.\u0275\u0275elementEnd())}function kC(n,c){1&n&&(e.\u0275\u0275elementStart(0,"span"),e.\u0275\u0275i18n(1,2),e.\u0275\u0275elementEnd())}function jC(n,c){if(1&n&&(e.\u0275\u0275elementStart(0,"span",15),e.\u0275\u0275template(1,XC,2,0,"span",16)(2,kC,2,0,"span",16),e.\u0275\u0275elementEnd()),2&n){const t=e.\u0275\u0275nextContext();e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf",null==t.weight.errors?null:t.weight.errors.required),e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf",(null==t.weight.errors?null:t.weight.errors.max)||(null==t.weight.errors?null:t.weight.errors.min))}}let WC=(()=>{class n{constructor(t,o,i,r){this.actionLabels=t,this.activeModal=o,this.osdService=i,this.fb=r,this.currentWeight=1}get weight(){return this.reweightForm.get("weight")}ngOnInit(){this.reweightForm=this.fb.group({weight:this.fb.control(this.currentWeight,[T.Validators.required])})}reweight(){this.osdService.reweight(this.osdId,this.reweightForm.value.weight).subscribe(()=>this.activeModal.close())}static{this.\u0275fac=function(o){return new(o||n)(e.\u0275\u0275directiveInject(f.Ss),e.\u0275\u0275directiveInject(V.NgbActiveModal),e.\u0275\u0275directiveInject(It),e.\u0275\u0275directiveInject(At.$))}}static{this.\u0275cmp=e.\u0275\u0275defineComponent({type:n,selectors:[["cd-osd-reweight-modal"]],decls:14,vars:7,consts:()=>{let t,o,i;return t=$localize`:␟5251a4355cece3075db43f15d69a24a0f8485707␟6324192010317168396:Reweight OSD: ${"\ufffd0\ufffd"}:INTERPOLATION:`,o=$localize`:␟7cbdabcece469fab89cfa687ab152bca18b97498␟1417693714872528491:This field is required.`,i=$localize`:␟67650b2998db48201b2c6176cbfef51e7211ccaa␟3021746341506860835:The value needs to be between 0 and 1.`,[t,o,i,[3,"modalRef"],[1,"modal-title"],[1,"modal-content"],[3,"formGroup"],[1,"modal-body"],[1,"row"],["for","weight",1,"cd-col-form-label"],[1,"cd-col-form-input"],["id","weight","type","number","step","0.1","formControlName","weight","min","0","max","1",1,"form-control",3,"value"],["class","invalid-feedback",4,"ngIf"],[1,"modal-footer"],[3,"submitActionEvent","form","submitText"],[1,"invalid-feedback"],[4,"ngIf"]]},template:function(o,i){1&o&&(e.\u0275\u0275elementStart(0,"cd-modal",3),e.\u0275\u0275elementContainerStart(1,4),e.\u0275\u0275i18n(2,0),e.\u0275\u0275elementContainerEnd(),e.\u0275\u0275elementContainerStart(3,5),e.\u0275\u0275elementStart(4,"form",6)(5,"div",7)(6,"div",8)(7,"label",9),e.\u0275\u0275text(8,"Weight"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(9,"div",10),e.\u0275\u0275element(10,"input",11),e.\u0275\u0275template(11,jC,3,2,"span",12),e.\u0275\u0275elementEnd()()(),e.\u0275\u0275elementStart(12,"div",13)(13,"cd-form-button-panel",14),e.\u0275\u0275listener("submitActionEvent",function(){return i.reweight()}),e.\u0275\u0275elementEnd()()(),e.\u0275\u0275elementContainerEnd(),e.\u0275\u0275elementEnd()),2&o&&(e.\u0275\u0275property("modalRef",i.activeModal),e.\u0275\u0275advance(2),e.\u0275\u0275i18nExp(i.osdId),e.\u0275\u0275i18nApply(2),e.\u0275\u0275advance(2),e.\u0275\u0275property("formGroup",i.reweightForm),e.\u0275\u0275advance(6),e.\u0275\u0275property("value",i.currentWeight),e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf",i.weight.errors),e.\u0275\u0275advance(2),e.\u0275\u0275property("form",i.reweightForm)("submitText",i.actionLabels.REWEIGHT))},dependencies:[l.NgIf,xt.z,Q.e,De.S,Me.a,ze.E,T.\u0275NgNoValidate,T.DefaultValueAccessor,T.NumberValueAccessor,T.NgControlStatus,T.NgControlStatusGroup,T.MinValidator,T.MaxValidator,T.FormGroupDirective,T.FormControlName]})}}return n})();var Fa=s(47782);let KC=(()=>{class n{constructor(t,o,i,r,p){this.activeModal=t,this.actionLabels=o,this.osdService=i,this.notificationService=r,this.joinPipe=p,this.selected=[]}ngOnInit(){this.scrubForm=new T.UntypedFormGroup({})}scrub(){(0,K.forkJoin)(this.selected.map(t=>this.osdService.scrub(t,this.deep))).subscribe(()=>{this.notificationService.show(Le._.success,$localize`${this.deep?"Deep scrub":"Scrub"} was initialized in the following OSD(s): ${this.joinPipe.transform(this.selected)}`),this.activeModal.close()},()=>this.activeModal.close())}static{this.\u0275fac=function(o){return new(o||n)(e.\u0275\u0275directiveInject(V.NgbActiveModal),e.\u0275\u0275directiveInject(f.Ss),e.\u0275\u0275directiveInject(It),e.\u0275\u0275directiveInject(Y.J),e.\u0275\u0275directiveInject(Fa.r))}}static{this.\u0275cmp=e.\u0275\u0275defineComponent({type:n,selectors:[["cd-osd-scrub-modal"]],decls:13,vars:9,consts:()=>{let t,o,i,r;return t=$localize`:␟62b73a34ba65b3073e3560dce828a16d7fd3c0f4␟2979848377804191209:{VAR_SELECT, select, true {Deep } other {}}`,t=e.\u0275\u0275i18nPostprocess(t,{VAR_SELECT:"\ufffd0\ufffd"}),o=$localize`:␟8f077ceb52c967a8fe2de9ef0a9d65d72badf186␟7255171847164332814:OSDs ${t}:ICU:Scrub`,i=$localize`:␟fad3dc421817a16dd6c46c1a0c36de619a8d776e␟7954353552762937351:{VAR_SELECT, select, true {deep } other {}}`,i=e.\u0275\u0275i18nPostprocess(i,{VAR_SELECT:"\ufffd0\ufffd"}),r=$localize`:␟c00119503aad4012b77049eee41293338f67756c␟9150304455653253740:You are about to apply a ${i}:ICU:scrub to the OSD(s): ${"\ufffd#9\ufffd"}:START_TAG_STRONG:${"\ufffd1\ufffd"}:INTERPOLATION:${"\ufffd/#9\ufffd"}:CLOSE_TAG_STRONG:.`,[["formDir","ngForm"],o,r,[3,"modalRef"],[1,"modal-title"],[1,"modal-content"],["name","scrubForm","novalidate","",3,"formGroup"],[1,"modal-body"],[1,"modal-footer"],[3,"submitActionEvent","form","submitText"]]},template:function(o,i){if(1&o){const r=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"cd-modal",3)(1,"span",4),e.\u0275\u0275i18n(2,1),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementContainerStart(3,5),e.\u0275\u0275elementStart(4,"form",6,0)(6,"div",7)(7,"p"),e.\u0275\u0275i18nStart(8,2),e.\u0275\u0275element(9,"strong"),e.\u0275\u0275pipe(10,"join"),e.\u0275\u0275i18nEnd(),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(11,"div",8)(12,"cd-form-button-panel",9),e.\u0275\u0275listener("submitActionEvent",function(){return e.\u0275\u0275restoreView(r),e.\u0275\u0275resetView(i.scrub())}),e.\u0275\u0275elementEnd()()(),e.\u0275\u0275elementContainerEnd(),e.\u0275\u0275elementEnd()}2&o&&(e.\u0275\u0275property("modalRef",i.activeModal),e.\u0275\u0275advance(2),e.\u0275\u0275i18nExp(i.deep),e.\u0275\u0275i18nApply(2),e.\u0275\u0275advance(2),e.\u0275\u0275property("formGroup",i.scrubForm),e.\u0275\u0275advance(6),e.\u0275\u0275i18nExp(i.deep)(e.\u0275\u0275pipeBind1(10,7,i.selected)),e.\u0275\u0275i18nApply(8),e.\u0275\u0275advance(2),e.\u0275\u0275property("form",i.scrubForm)("submitText",i.actionLabels.UPDATE))},dependencies:[xt.z,Q.e,ze.E,T.\u0275NgNoValidate,T.NgControlStatusGroup,T.FormGroupDirective,Fa.r]})}}return n})();var Ms=s(85770);function QC(n,c){if(1&n&&e.\u0275\u0275element(0,"cd-device-list",20),2&n){const t=e.\u0275\u0275nextContext(2);e.\u0275\u0275property("osdId",null==t.osd?null:t.osd.id)("hostname",null==t.selection?null:t.selection.host.name)("osdList",!0)}}function YC(n,c){if(1&n&&e.\u0275\u0275element(0,"cd-table-key-value",21),2&n){const t=e.\u0275\u0275nextContext(2);e.\u0275\u0275property("data",null==t.osd||null==t.osd.details?null:t.osd.details.osd_map)}}function JC(n,c){if(1&n){const t=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"cd-table-key-value",23),e.\u0275\u0275listener("fetchData",function(){e.\u0275\u0275restoreView(t);const i=e.\u0275\u0275nextContext(3);return e.\u0275\u0275resetView(i.refresh())}),e.\u0275\u0275elementEnd()}if(2&n){const t=e.\u0275\u0275nextContext(3);e.\u0275\u0275property("data",null==t.osd||null==t.osd.details?null:t.osd.details.osd_metadata)}}function ZC(n,c){1&n&&(e.\u0275\u0275elementStart(0,"cd-alert-panel",24),e.\u0275\u0275i18n(1,7),e.\u0275\u0275elementEnd())}function qC(n,c){if(1&n&&e.\u0275\u0275template(0,JC,1,1,"cd-table-key-value",22)(1,ZC,2,0,"ng-template",null,1,e.\u0275\u0275templateRefExtractor),2&n){const t=e.\u0275\u0275reference(2),o=e.\u0275\u0275nextContext(2);e.\u0275\u0275property("ngIf",null==o.osd||null==o.osd.details?null:o.osd.details.osd_metadata)("ngIfElse",t)}}function eS(n,c){if(1&n&&e.\u0275\u0275element(0,"cd-smart-list",25),2&n){const t=e.\u0275\u0275nextContext(2);e.\u0275\u0275property("osdId",null==t.osd?null:t.osd.id)}}function tS(n,c){if(1&n&&e.\u0275\u0275element(0,"cd-table-performance-counter",27),2&n){const t=e.\u0275\u0275nextContext(3);e.\u0275\u0275property("serviceId",null==t.osd?null:t.osd.id)}}function nS(n,c){if(1&n&&e.\u0275\u0275template(0,tS,1,1,"cd-table-performance-counter",26),2&n){const t=e.\u0275\u0275nextContext(2);e.\u0275\u0275property("ngIf",null==t.osd?null:t.osd.details)}}function oS(n,c){if(1&n&&e.\u0275\u0275element(0,"cd-grafana",29),2&n){const t=e.\u0275\u0275nextContext(3);e.\u0275\u0275property("grafanaPath","osd-device-details?var-osd=osd."+t.osd.id)("type","metrics")}}function iS(n,c){1&n&&(e.\u0275\u0275elementContainerStart(0,28),e.\u0275\u0275elementStart(1,"a",12),e.\u0275\u0275i18n(2,8),e.\u0275\u0275elementEnd(),e.\u0275\u0275template(3,oS,1,2,"ng-template",13),e.\u0275\u0275elementContainerEnd())}function aS(n,c){if(1&n&&(e.\u0275\u0275elementContainerStart(0),e.\u0275\u0275elementStart(1,"nav",10,0),e.\u0275\u0275elementContainerStart(3,11),e.\u0275\u0275elementStart(4,"a",12),e.\u0275\u0275i18n(5,2),e.\u0275\u0275elementEnd(),e.\u0275\u0275template(6,QC,1,3,"ng-template",13),e.\u0275\u0275elementContainerEnd(),e.\u0275\u0275elementContainerStart(7,14),e.\u0275\u0275elementStart(8,"a",12),e.\u0275\u0275i18n(9,3),e.\u0275\u0275elementEnd(),e.\u0275\u0275template(10,YC,1,1,"ng-template",13),e.\u0275\u0275elementContainerEnd(),e.\u0275\u0275elementContainerStart(11,15),e.\u0275\u0275elementStart(12,"a",12),e.\u0275\u0275i18n(13,4),e.\u0275\u0275elementEnd(),e.\u0275\u0275template(14,qC,3,2,"ng-template",13),e.\u0275\u0275elementContainerEnd(),e.\u0275\u0275elementContainerStart(15,16),e.\u0275\u0275elementStart(16,"a",12),e.\u0275\u0275i18n(17,5),e.\u0275\u0275elementEnd(),e.\u0275\u0275template(18,eS,1,1,"ng-template",13),e.\u0275\u0275elementContainerEnd(),e.\u0275\u0275elementContainerStart(19,17),e.\u0275\u0275elementStart(20,"a",12),e.\u0275\u0275i18n(21,6),e.\u0275\u0275elementEnd(),e.\u0275\u0275template(22,nS,1,1,"ng-template",13),e.\u0275\u0275elementContainerEnd(),e.\u0275\u0275template(23,iS,4,0,"ng-container",18),e.\u0275\u0275elementEnd(),e.\u0275\u0275element(24,"div",19),e.\u0275\u0275elementContainerEnd()),2&n){const t=e.\u0275\u0275reference(2),o=e.\u0275\u0275nextContext();e.\u0275\u0275advance(23),e.\u0275\u0275property("ngIf",o.grafanaPermission.read),e.\u0275\u0275advance(),e.\u0275\u0275property("ngbNavOutlet",t)}}let sS=(()=>{class n{constructor(t,o){this.osdService=t,this.authStorageService=o,this.grafanaPermission=this.authStorageService.getPermissions().grafana}ngOnChanges(){this.osd?.id!==this.selection?.id&&(this.osd=this.selection),E().isNumber(this.osd?.id)&&this.refresh()}refresh(){this.osdService.getDetails(this.osd.id).subscribe(t=>{this.osd.details=t})}static{this.\u0275fac=function(o){return new(o||n)(e.\u0275\u0275directiveInject(It),e.\u0275\u0275directiveInject(_.v))}}static{this.\u0275cmp=e.\u0275\u0275defineComponent({type:n,selectors:[["cd-osd-details"]],inputs:{selection:"selection"},features:[e.\u0275\u0275NgOnChangesFeature],decls:1,vars:1,consts:()=>{let t,o,i,r,p,F,D,x;return t=$localize`:␟3e24569eca61d598c8b01defbbbb1fa8bd5222bc␟3719027099325959755:Devices`,o=$localize`:␟91853167141c37b58868f3b0421383dd72fa8a01␟4068300703604461295:Attributes (OSD map)`,i=$localize`:␟f721a500a68c357e8f2a01e60510f6a01e4ba529␟218403386307979629:Metadata`,r=$localize`:␟deba10b7279a589d01e919ea11f43c79ca1773e3␟1216614938441503693:Device health`,p=$localize`:␟d24e28e19c5703d7c6be44f4eb595a6a43b618ed␟4226660880930907514:Performance counter`,F=$localize`:␟97842f379e1d4157ac3ab0661b90c352e7cb72d5␟4117360728845651462:Metadata not available`,D=$localize`:␟fbbaf5cb02ed419e79a27072478f716a4666a99d␟9041763226911499160:Performance Details`,x=$localize`:␟e131c949f7a39d0a56d3ae07494d097733c1b15a␟529114310049247118:OSD details`,[["nav","ngbNav"],["noMetaData",""],t,o,i,r,p,F,D,[4,"ngIf"],["ngbNav","","id","tabset-osd-details","cdStatefulTab","osd-details",1,"nav-tabs"],["ngbNavItem","devices"],["ngbNavLink",""],["ngbNavContent",""],["ngbNavItem","attributes"],["ngbNavItem","metadata"],["ngbNavItem","device-health"],["ngbNavItem","performance-counter"],["ngbNavItem","performance-details",4,"ngIf"],[3,"ngbNavOutlet"],[3,"osdId","hostname","osdList"],[3,"data"],[3,"data","fetchData",4,"ngIf","ngIfElse"],[3,"fetchData","data"],["type","warning"],[3,"osdId"],["serviceType","osd",3,"serviceId",4,"ngIf"],["serviceType","osd",3,"serviceId"],["ngbNavItem","performance-details"],["title",x,"uid","CrAHE0iZz","grafanaStyle","three",3,"grafanaPath","type"]]},template:function(o,i){1&o&&e.\u0275\u0275template(0,aS,25,2,"ng-container",9),2&o&&e.\u0275\u0275property("ngIf",i.selection)},dependencies:[l.NgIf,Ms.Y,V.NgbNavContent,V.NgbNav,V.NgbNavItem,V.NgbNavLink,V.NgbNavLinkBase,V.NgbNavOutlet,gt.c,it.m,Pt.i,yt.B,gs,Cs]})}}return n})();const rS=["osdUsageTpl"],lS=["markOsdConfirmationTpl"],_S=["criticalConfirmationTpl"],cS=["reweightBodyTpl"],dS=["safeToDestroyBodyTpl"],uS=["deleteOsdExtraTpl"],pS=["flagsTpl"],mS=()=>({read:!0});function fS(n,c){if(1&n&&e.\u0275\u0275element(0,"cd-osd-details",27),2&n){const t=e.\u0275\u0275nextContext(2);e.\u0275\u0275property("selection",t.expandedRow)}}function ES(n,c){if(1&n){const t=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"cd-table",22),e.\u0275\u0275listener("fetchData",function(i){e.\u0275\u0275restoreView(t);const r=e.\u0275\u0275nextContext();return e.\u0275\u0275resetView(r.getOsdList(i))})("setExpandedRow",function(i){e.\u0275\u0275restoreView(t);const r=e.\u0275\u0275nextContext();return e.\u0275\u0275resetView(r.setExpandedRow(i))})("updateSelection",function(i){e.\u0275\u0275restoreView(t);const r=e.\u0275\u0275nextContext();return e.\u0275\u0275resetView(r.updateSelection(i))}),e.\u0275\u0275elementStart(1,"div",23),e.\u0275\u0275element(2,"cd-table-actions",24)(3,"cd-table-actions",25),e.\u0275\u0275elementEnd(),e.\u0275\u0275template(4,fS,1,1,"cd-osd-details",26),e.\u0275\u0275elementEnd()}if(2&n){const t=e.\u0275\u0275nextContext();e.\u0275\u0275property("data",t.osds)("columns",t.columns)("hasDetails",!0)("updateSelectionOnRefresh","never")("serverSide",!0)("count",t.count),e.\u0275\u0275advance(2),e.\u0275\u0275property("permission",t.permissions.osd)("selection",t.selection)("tableActions",t.tableActions),e.\u0275\u0275advance(),e.\u0275\u0275property("permission",e.\u0275\u0275pureFunction0(12,mS))("selection",t.selection)("tableActions",t.clusterWideActions)}}function gS(n,c){1&n&&e.\u0275\u0275element(0,"cd-grafana",28),2&n&&e.\u0275\u0275property("grafanaPath","osd-overview?")("type","metrics")}function CS(n,c){1&n&&(e.\u0275\u0275elementContainerStart(0,17),e.\u0275\u0275elementStart(1,"a",18),e.\u0275\u0275i18n(2,7),e.\u0275\u0275elementEnd(),e.\u0275\u0275template(3,gS,1,2,"ng-template",19),e.\u0275\u0275elementContainerEnd())}function SS(n,c){if(1&n&&(e.\u0275\u0275elementContainerStart(0),e.\u0275\u0275i18nStart(1,8),e.\u0275\u0275element(2,"strong"),e.\u0275\u0275pipe(3,"join"),e.\u0275\u0275element(4,"strong"),e.\u0275\u0275i18nEnd(),e.\u0275\u0275elementContainerEnd()),2&n){const t=c.markActionDescription,o=c.osdIds;e.\u0275\u0275advance(4),e.\u0275\u0275i18nExp(e.\u0275\u0275pipeBind1(3,2,o))(t),e.\u0275\u0275i18nApply(1)}}function hS(n,c){if(1&n&&(e.\u0275\u0275elementStart(0,"li"),e.\u0275\u0275i18n(1,11),e.\u0275\u0275pipe(2,"join"),e.\u0275\u0275elementEnd()),2&n){const t=e.\u0275\u0275nextContext(2).active,o=e.\u0275\u0275nextContext();e.\u0275\u0275advance(2),e.\u0275\u0275i18nExp(o.selection.hasSingleSelection)(e.\u0275\u0275pipeBind1(2,3,t))(1===t.length),e.\u0275\u0275i18nApply(1)}}function TS(n,c){if(1&n&&(e.\u0275\u0275elementStart(0,"li"),e.\u0275\u0275i18n(1,12),e.\u0275\u0275pipe(2,"join"),e.\u0275\u0275elementEnd()),2&n){const t=e.\u0275\u0275nextContext(2).missingStats,o=e.\u0275\u0275nextContext();e.\u0275\u0275advance(2),e.\u0275\u0275i18nExp(o.selection.hasSingleSelection)(e.\u0275\u0275pipeBind1(2,2,t)),e.\u0275\u0275i18nApply(1)}}function FS(n,c){if(1&n&&(e.\u0275\u0275elementStart(0,"li"),e.\u0275\u0275i18n(1,13),e.\u0275\u0275pipe(2,"join"),e.\u0275\u0275elementEnd()),2&n){const t=e.\u0275\u0275nextContext(2).storedPgs,o=e.\u0275\u0275nextContext();e.\u0275\u0275advance(2),e.\u0275\u0275i18nExp(o.selection.hasSingleSelection)(e.\u0275\u0275pipeBind1(2,2,t)),e.\u0275\u0275i18nApply(1)}}function vS(n,c){if(1&n&&(e.\u0275\u0275elementStart(0,"li"),e.\u0275\u0275text(1),e.\u0275\u0275elementEnd()),2&n){const t=e.\u0275\u0275nextContext(2).message;e.\u0275\u0275advance(),e.\u0275\u0275textInterpolate1(" ",t," ")}}function MS(n,c){if(1&n&&(e.\u0275\u0275elementStart(0,"div",30)(1,"cd-alert-panel",31)(2,"span"),e.\u0275\u0275i18n(3,10),e.\u0275\u0275elementEnd(),e.\u0275\u0275element(4,"br"),e.\u0275\u0275elementStart(5,"ul",32),e.\u0275\u0275template(6,hS,3,5,"li",33)(7,TS,3,4,"li",33)(8,FS,3,4,"li",33)(9,vS,2,1,"li",33),e.\u0275\u0275elementEnd()()()),2&n){const t=e.\u0275\u0275nextContext(),o=t.message,i=t.active,r=t.missingStats,p=t.storedPgs,F=t.actionDescription,D=e.\u0275\u0275nextContext();e.\u0275\u0275advance(3),e.\u0275\u0275i18nExp(D.selection.hasSingleSelection)(F),e.\u0275\u0275i18nApply(3),e.\u0275\u0275advance(3),e.\u0275\u0275property("ngIf",i.length>0),e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf",r.length>0),e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf",p.length>0),e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf",o)}}function RS(n,c){if(1&n&&(e.\u0275\u0275elementStart(0,"div",30)(1,"cd-alert-panel",34)(2,"span"),e.\u0275\u0275i18n(3,14),e.\u0275\u0275elementEnd()()()),2&n){const t=e.\u0275\u0275nextContext(2);e.\u0275\u0275advance(3),e.\u0275\u0275i18nExp(t.selection.hasSingleSelection),e.\u0275\u0275i18nApply(3)}}function OS(n,c){if(1&n&&(e.\u0275\u0275template(0,MS,10,6,"div",29)(1,RS,4,1,"div",29),e.\u0275\u0275elementContainerStart(2),e.\u0275\u0275i18nStart(3,9),e.\u0275\u0275element(4,"strong"),e.\u0275\u0275pipe(5,"join"),e.\u0275\u0275element(6,"strong"),e.\u0275\u0275i18nEnd(),e.\u0275\u0275elementContainerEnd()),2&n){const t=c.safeToPerform,o=c.actionDescription,i=c.osdIds;e.\u0275\u0275property("ngIf",!t),e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf",t),e.\u0275\u0275advance(5),e.\u0275\u0275i18nExp(e.\u0275\u0275pipeBind1(5,4,i))(o),e.\u0275\u0275i18nApply(3)}}function PS(n,c){if(1&n&&(e.\u0275\u0275elementStart(0,"span",37),e.\u0275\u0275text(1),e.\u0275\u0275elementEnd()),2&n){const t=c.$implicit;e.\u0275\u0275advance(),e.\u0275\u0275textInterpolate(t)}}function bS(n,c){if(1&n&&(e.\u0275\u0275elementStart(0,"span",38),e.\u0275\u0275text(1),e.\u0275\u0275elementEnd()),2&n){const t=c.$implicit;e.\u0275\u0275advance(),e.\u0275\u0275textInterpolate(t)}}function NS(n,c){if(1&n&&e.\u0275\u0275template(0,PS,2,1,"span",35)(1,bS,2,1,"span",36),2&n){const t=c.data.row;e.\u0275\u0275property("ngForOf",t.cdClusterFlags),e.\u0275\u0275advance(),e.\u0275\u0275property("ngForOf",t.cdIndivFlags)}}function IS(n,c){if(1&n&&e.\u0275\u0275element(0,"cd-usage-bar",39),2&n){const t=c.data.row,o=e.\u0275\u0275nextContext();e.\u0275\u0275property("title","osd "+t.osd)("total",t.stats.stat_bytes)("used",t.stats.stat_bytes_used)("warningThreshold",o.osdSettings.nearfull_ratio)("errorThreshold",o.osdSettings.full_ratio)}}function AS(n,c){1&n&&(e.\u0275\u0275elementContainerStart(0,40)(1,41),e.\u0275\u0275elementStart(2,"div",42)(3,"div",43),e.\u0275\u0275element(4,"input",44),e.\u0275\u0275elementStart(5,"label",45),e.\u0275\u0275i18n(6,15),e.\u0275\u0275elementEnd()()(),e.\u0275\u0275elementContainerEnd()()),2&n&&e.\u0275\u0275property("formGroup",c.form)}let yS=(()=>{class n extends I.D{static collectStates(t){const o=[t.in?"in":"out"];return t.up?o.push("up"):t.state.includes("destroyed")?o.push("destroyed"):o.push("down"),o}constructor(t,o,i,r,p,F,D,x,H,X,Z){super(),this.authStorageService=t,this.osdService=o,this.dimlessBinaryPipe=i,this.modalService=r,this.urlBuilder=p,this.router=F,this.taskWrapper=D,this.actionLabels=x,this.notificationService=H,this.orchService=X,this.cdsModalService=Z,this.icons=g.FI,this.osdSettings=new Fs,this.count=0,this.selection=new A.y,this.osds=[],this.disabledFlags=["sortbitwise","purged_snapdirs","recovery_deletes","pglog_hardlimit"],this.indivFlagNames=["noup","nodown","noin","noout"],this.actionOrchFeatures={create:[$t.OSD_CREATE],delete:[$t.OSD_DELETE]},this.permissions=this.authStorageService.getPermissions(),this.tableActions=[{name:this.actionLabels.CREATE,permission:"create",icon:g.FI.add,click:()=>this.router.navigate([this.urlBuilder.getCreate()]),disable:re=>this.getDisable("create",re),canBePrimary:re=>!re.hasSelection},{name:this.actionLabels.EDIT,permission:"update",icon:g.FI.edit,click:()=>this.editAction()},{name:this.actionLabels.FLAGS,permission:"update",icon:g.FI.flag,click:()=>this.configureFlagsIndivAction(),disable:()=>!this.hasOsdSelected},{name:this.actionLabels.SCRUB,permission:"update",icon:g.FI.analyse,click:()=>this.scrubAction(!1),disable:()=>!this.hasOsdSelected,canBePrimary:re=>re.hasSelection},{name:this.actionLabels.DEEP_SCRUB,permission:"update",icon:g.FI.deepCheck,click:()=>this.scrubAction(!0),disable:()=>!this.hasOsdSelected},{name:this.actionLabels.REWEIGHT,permission:"update",click:()=>this.reweight(),disable:()=>!this.hasOsdSelected||!this.selection.hasSingleSelection,icon:g.FI.reweight},{name:this.actionLabels.MARK_OUT,permission:"update",click:()=>this.showConfirmationModal($localize`out`,this.osdService.markOut),disable:()=>this.isNotSelectedOrInState("out"),icon:g.FI.left},{name:this.actionLabels.MARK_IN,permission:"update",click:()=>this.showConfirmationModal($localize`in`,this.osdService.markIn),disable:()=>this.isNotSelectedOrInState("in"),icon:g.FI.right},{name:this.actionLabels.MARK_DOWN,permission:"update",click:()=>this.showConfirmationModal($localize`down`,this.osdService.markDown),disable:()=>this.isNotSelectedOrInState("down"),icon:g.FI.down},{name:this.actionLabels.MARK_LOST,permission:"delete",click:()=>this.showCriticalConfirmationModal($localize`Mark`,$localize`OSD lost`,$localize`marked lost`,re=>this.osdService.safeToDestroy(JSON.stringify(re)),"is_safe_to_destroy",this.osdService.markLost),disable:()=>this.isNotSelectedOrInState("up"),icon:g.FI.flatten},{name:this.actionLabels.PURGE,permission:"delete",click:()=>this.showCriticalConfirmationModal($localize`Purge`,$localize`OSD`,$localize`purged`,re=>this.osdService.safeToDestroy(JSON.stringify(re)),"is_safe_to_destroy",re=>(this.selection=new A.y,this.osdService.purge(re))),disable:()=>this.isNotSelectedOrInState("up"),icon:g.FI.erase},{name:this.actionLabels.DESTROY,permission:"delete",click:()=>this.showCriticalConfirmationModal($localize`destroy`,$localize`OSD`,$localize`destroyed`,re=>this.osdService.safeToDestroy(JSON.stringify(re)),"is_safe_to_destroy",re=>(this.selection=new A.y,this.osdService.destroy(re))),disable:()=>this.isNotSelectedOrInState("up"),icon:g.FI.clearFilters},{name:this.actionLabels.DELETE,permission:"delete",click:()=>this.delete(),disable:re=>this.getDisable("delete",re),icon:g.FI.destroy}]}ngOnInit(){this.clusterWideActions=[{name:$localize`Flags`,icon:g.FI.flag,click:()=>this.configureFlagsAction(),permission:"read",visible:()=>this.permissions.osd.read},{name:$localize`Recovery Priority`,icon:g.FI.deepCheck,click:()=>this.configureQosParamsAction(),permission:"read",visible:()=>this.permissions.configOpt.read},{name:$localize`PG scrub`,icon:g.FI.analyse,click:()=>this.configurePgScrubAction(),permission:"read",visible:()=>this.permissions.configOpt.read}],this.columns=[{prop:"id",name:$localize`ID`,flexGrow:1,cellTransformation:O.x.executing,customTemplateConfig:{valueClass:"bold"}},{prop:"host.name",name:$localize`Host`},{prop:"collectedStates",name:$localize`Status`,flexGrow:1,cellTransformation:O.x.badge,customTemplateConfig:{map:{in:{class:"badge-success"},up:{class:"badge-success"},down:{class:"badge-danger"},out:{class:"badge-danger"},destroyed:{class:"badge-danger"}}}},{prop:"tree.device_class",name:$localize`Device class`,flexGrow:1.2,cellTransformation:O.x.badge,customTemplateConfig:{map:{hdd:{class:"badge-hdd"},ssd:{class:"badge-ssd"}}}},{prop:"stats.numpg",name:$localize`PGs`,flexGrow:1},{prop:"stats.stat_bytes",name:$localize`Size`,flexGrow:1,pipe:this.dimlessBinaryPipe},{prop:"state",name:$localize`Flags`,cellTemplate:this.flagsTpl},{prop:"stats.usage",name:$localize`Usage`,cellTemplate:this.osdUsageTpl},{prop:"stats_history.out_bytes",name:$localize`Read bytes`,cellTransformation:O.x.sparkline},{prop:"stats_history.in_bytes",name:$localize`Write bytes`,cellTransformation:O.x.sparkline},{prop:"stats.op_r",name:$localize`Read ops`,cellTransformation:O.x.perSecond},{prop:"stats.op_w",name:$localize`Write ops`,cellTransformation:O.x.perSecond}],this.orchService.status().subscribe(t=>this.orchStatus=t),this.osdService.getOsdSettings().pipe((0,u.take)(1)).subscribe(t=>{this.osdSettings=t})}getDisable(t,o){if("delete"===t){if(!o.hasSelection)return!0;if(E().some(this.getSelectedOsds(),r=>{const p=E().get(r,"operational_status");return"deleting"===p||"unmanaged"===p}))return!0}return this.orchService.getTableActionDisableDesc(this.orchStatus,this.actionOrchFeatures[t])}getSelectedOsdIds(){const t=this.osds.map(o=>o.id);return this.selection.selected.map(o=>o.id).filter(o=>t.includes(o)).sort()}getSelectedOsds(){return this.osds.filter(t=>!E().isUndefined(t)&&this.getSelectedOsdIds().includes(t.id))}get hasOsdSelected(){return this.getSelectedOsdIds().length>0}updateSelection(t){this.selection=t}isNotSelectedOrInState(t){const o=this.getSelectedOsds();if(0===o.length)return!0;switch(t){case"in":return o.some(i=>1===i.in);case"out":return o.some(i=>1!==i.in);case"down":return o.some(i=>1!==i.up);case"up":return o.some(i=>1===i.up)}}getOsdList(t){t||(t=new Do.n);const o=this.osdService.getList(t.toParams()),i=[o.observable,this.osdService.getFlags()];(0,K.forkJoin)(i).subscribe(r=>{this.osds=r[0].map(p=>{this.count=o.count,p.collectedStates=n.collectStates(p),p.stats_history.out_bytes=p.stats_history.op_out_bytes.map(D=>D[1]),p.stats_history.in_bytes=p.stats_history.op_in_bytes.map(D=>D[1]),p.stats.usage=p.stats.stat_bytes_used/p.stats.stat_bytes,p.cdIsBinary=!0,p.cdIndivFlags=p.state.filter(D=>this.indivFlagNames.includes(D)),p.cdClusterFlags=r[1].filter(D=>!this.disabledFlags.includes(D));const F=E().get(p,"operational_status","unmanaged");return"unmanaged"!==F&&"working"!==F&&(p.cdExecuting=F),p})})}editAction(){const t=E().filter(this.osds,["id",this.selection.first().id]).pop();this.cdsModalService.show(Qt.b,{titleText:$localize`Edit OSD: ${t.id}`,fields:[{type:"text",name:"deviceClass",value:t.tree.device_class,label:$localize`Device class`,required:!0}],submitButtonText:$localize`Edit OSD`,onSubmit:o=>{this.osdService.update(t.id,o.deviceClass).subscribe(()=>{this.notificationService.show(Le._.success,$localize`Updated OSD '${t.id}'`),this.getOsdList()})}})}scrubAction(t){if(!this.hasOsdSelected)return;const o={selected:this.getSelectedOsdIds(),deep:t};this.bsModalRef=this.modalService.show(KC,o)}configureFlagsAction(){this.bsModalRef=this.modalService.show(fC)}configureFlagsIndivAction(){const t={selected:this.getSelectedOsds()};this.bsModalRef=this.modalService.show(uC,t)}showConfirmationModal(t,o){const i=this.getSelectedOsdIds();this.bsModalRef=this.cdsModalService.show(un.M,{titleText:$localize`Mark OSD ${t}`,buttonText:$localize`Mark ${t}`,bodyTpl:this.markOsdConfirmationTpl,bodyContext:{markActionDescription:t,osdIds:i},onSubmit:()=>{(0,K.forkJoin)(this.getSelectedOsdIds().map(r=>o.call(this.osdService,r))).subscribe(()=>this.cdsModalService.dismissAll())}})}reweight(){const t=this.osds.filter(o=>o.id===this.selection.first().id).pop();this.bsModalRef=this.modalService.show(WC,{currentWeight:t.weight,osdId:t.id})}delete(){const t=new Se.$({preserve:new T.UntypedFormControl(!1)});this.showCriticalConfirmationModal($localize`delete`,$localize`OSD`,$localize`deleted`,o=>this.osdService.safeToDelete(JSON.stringify(o)),"is_safe_to_delete",o=>(this.selection=new A.y,this.taskWrapper.wrapTaskAroundCall({task:new ie.O("osd/"+f.Qp.DELETE,{svc_id:o}),call:this.osdService.delete(o,t.value.preserve,!0)})),!0,t,this.deleteOsdExtraTpl)}showCriticalConfirmationModal(t,o,i,r,p,F,D=!1,x,H){r(this.getSelectedOsdIds()).subscribe(X=>{const Z=this.getSelectedOsdIds();this.cdsModalService.show(P.D,{impact:Tt.r.high,itemNames:Z,actionDescription:t,itemDescription:o,bodyTemplate:this.criticalConfirmationTpl,bodyContext:{safeToPerform:X[p],message:X.message,active:X.active,missingStats:X.missing_stats,storedPgs:X.stored_pgs,actionDescription:i,osdIds:Z},childFormGroup:x,childFormGroupTemplate:H,submitAction:()=>{const re=(0,K.forkJoin)(this.getSelectedOsdIds().map(pe=>F.call(this.osdService,pe)));D?re.subscribe({error:()=>{this.getOsdList(),this.cdsModalService.dismissAll()},complete:()=>this.cdsModalService.dismissAll()}):re.subscribe(()=>{this.getOsdList(),this.cdsModalService.dismissAll()},()=>this.cdsModalService.dismissAll())}})})}configureQosParamsAction(){this.bsModalRef=this.modalService.show(zC)}configurePgScrubAction(){this.bsModalRef=this.modalService.show(yC,void 0,{size:"lg"})}static{this.\u0275fac=function(o){return new(o||n)(e.\u0275\u0275directiveInject(_.v),e.\u0275\u0275directiveInject(It),e.\u0275\u0275directiveInject(mt.l),e.\u0275\u0275directiveInject(qt.B),e.\u0275\u0275directiveInject(B.E),e.\u0275\u0275directiveInject(m.Router),e.\u0275\u0275directiveInject(w.a),e.\u0275\u0275directiveInject(f.Ss),e.\u0275\u0275directiveInject(Y.J),e.\u0275\u0275directiveInject(tn.K),e.\u0275\u0275directiveInject(Ge.V))}}static{this.\u0275cmp=e.\u0275\u0275defineComponent({type:n,selectors:[["cd-osd-list"]],viewQuery:function(o,i){if(1&o&&(e.\u0275\u0275viewQuery(rS,7),e.\u0275\u0275viewQuery(lS,7),e.\u0275\u0275viewQuery(_S,7),e.\u0275\u0275viewQuery(cS,5),e.\u0275\u0275viewQuery(dS,5),e.\u0275\u0275viewQuery(uS,5),e.\u0275\u0275viewQuery(pS,7)),2&o){let r;e.\u0275\u0275queryRefresh(r=e.\u0275\u0275loadQuery())&&(i.osdUsageTpl=r.first),e.\u0275\u0275queryRefresh(r=e.\u0275\u0275loadQuery())&&(i.markOsdConfirmationTpl=r.first),e.\u0275\u0275queryRefresh(r=e.\u0275\u0275loadQuery())&&(i.criticalConfirmationTpl=r.first),e.\u0275\u0275queryRefresh(r=e.\u0275\u0275loadQuery())&&(i.reweightBodyTpl=r.first),e.\u0275\u0275queryRefresh(r=e.\u0275\u0275loadQuery())&&(i.safeToDestroyBodyTpl=r.first),e.\u0275\u0275queryRefresh(r=e.\u0275\u0275loadQuery())&&(i.deleteOsdExtraTpl=r.first),e.\u0275\u0275queryRefresh(r=e.\u0275\u0275loadQuery())&&(i.flagsTpl=r.first)}},features:[e.\u0275\u0275ProvidersFeature([{provide:B.E,useValue:new B.E("osd")}]),e.\u0275\u0275InheritDefinitionFeature],decls:18,vars:2,consts:()=>{let t,o,i,r,p,F,D,x,H,X,Z,re,pe,be,Pe,he,Ue;return t=$localize`:␟b49d7877d24112d4bdfce9256edf61a007fae888␟9126395685432055070:OSDs List`,o=$localize`:␟5e7f4b1ca49e8d217bd0e12c6f7d6b6a2ade2c18␟4352555506458562289:Overall Performance`,i=$localize`:␟c28928777637a3fedd51548fe6f992062a8e5c49␟9037065948276788684:OSD list`,r=$localize`:␟172ada0fcf6490b24a897517e9f4299215873ff8␟5366399235782587742:${"[\ufffd#2\ufffd|\ufffd#4\ufffd]"}:START_TAG_STRONG:OSD(s) ${"\ufffd0\ufffd"}:INTERPOLATION:${"[\ufffd/#2\ufffd|\ufffd/#4\ufffd]"}:CLOSE_TAG_STRONG: will be marked ${"[\ufffd#2\ufffd|\ufffd#4\ufffd]"}:START_TAG_STRONG:${"\ufffd1\ufffd"}:INTERPOLATION_1:${"[\ufffd/#2\ufffd|\ufffd/#4\ufffd]"}:CLOSE_TAG_STRONG: if you proceed.`,r=e.\u0275\u0275i18nPostprocess(r),p=$localize`:␟e0e217fd717c5b1f5c17f00c5b174de855acbef0␟394323388873095701:${"[\ufffd#4\ufffd|\ufffd#6\ufffd]"}:START_TAG_STRONG:OSD ${"\ufffd0\ufffd"}:INTERPOLATION:${"[\ufffd/#4\ufffd|\ufffd/#6\ufffd]"}:CLOSE_TAG_STRONG: will be ${"[\ufffd#4\ufffd|\ufffd#6\ufffd]"}:START_TAG_STRONG:${"\ufffd1\ufffd"}:INTERPOLATION_1:${"[\ufffd/#4\ufffd|\ufffd/#6\ufffd]"}:CLOSE_TAG_STRONG: if you proceed.`,p=e.\u0275\u0275i18nPostprocess(p),F=$localize`:␟74bd20d5f558d14cb2fa41ae863cf09c47d02018␟1718318886409002413:{VAR_SELECT, select, true {OSD is} other {OSDs are}}`,F=e.\u0275\u0275i18nPostprocess(F,{VAR_SELECT:"\ufffd0\ufffd"}),D=$localize`:␟63d32d7f76854e1e9ae9bf7dc4a7bc8474d42e81␟2529003778276897064: The ${F}:ICU: not safe to be ${"\ufffd1\ufffd"}:INTERPOLATION:! `,x=$localize`:␟84da651a3572c57f7ff7058a93f3a4ddb207c1e3␟6643339058890129805:{VAR_SELECT, select, true {} other {{INTERPOLATION} : }}`,x=e.\u0275\u0275i18nPostprocess(x,{INTERPOLATION:"\ufffd1\ufffd",VAR_SELECT:"\ufffd0\ufffd"}),H=$localize`:␟19a2892320d36f6564eac566181f172a7b5e5095␟8956999485109550420:{VAR_SELECT, select, true {it} other {them}}`,H=e.\u0275\u0275i18nPostprocess(H,{VAR_SELECT:"\ufffd2\ufffd"}),X=$localize`:␟e61bb47a6620ca875fafedd98e27aaf6b9ccc74e␟4377005327341801944: ${x}:ICU: Some PGs are currently mapped to ${H}:ICU_1:. `,Z=$localize`:␟99995c77855e9db9b73b753996e89b42559182cf␟6848028529746774204:{VAR_SELECT, select, true {} other {{INTERPOLATION} : }}`,Z=e.\u0275\u0275i18nPostprocess(Z,{INTERPOLATION:"\ufffd1\ufffd",VAR_SELECT:"\ufffd0\ufffd"}),re=$localize`:␟77d6a8692f206450f53add13b190b7048ad831bd␟3274901826987148156: ${Z}:ICU: There are no reported stats and not all PGs are active and clean. `,pe=$localize`:␟f6562d13915a4033e6c88865b30a1a5d6f6a2237␟1859179011858344355:{VAR_SELECT, select, true {OSD} other {{INTERPOLATION} : OSDs }}`,pe=e.\u0275\u0275i18nPostprocess(pe,{INTERPOLATION:"\ufffd1\ufffd",VAR_SELECT:"\ufffd0\ufffd"}),be=$localize`:␟2212125f66acf6aef016f9c340b1eae7971e22c2␟2728144920561178685: ${pe}:ICU: still store some PG data and not all PGs are active and clean. `,Pe=$localize`:␟74bd20d5f558d14cb2fa41ae863cf09c47d02018␟1718318886409002413:{VAR_SELECT, select, true {OSD is} other {OSDs are}}`,Pe=e.\u0275\u0275i18nPostprocess(Pe,{VAR_SELECT:"\ufffd0\ufffd"}),he=$localize`:␟e4976fa92a4959b6621c7f3967e6799bff68e8d8␟7202137443689242113: The ${Pe}:ICU: safe to destroy without reducing data durability. `,Ue=$localize`:␟8cf121660bed7098516a1efe85831d6f415a9411␟7139122103035207580:Preserve OSD ID(s) for replacement.`,[["nav","ngbNav"],["markOsdConfirmationTpl",""],["criticalConfirmationTpl",""],["flagsTpl",""],["osdUsageTpl",""],["deleteOsdExtraTpl",""],t,o,r,p,D,X,re,be,he,Ue,["ngbNav","",1,"nav-tabs"],["ngbNavItem",""],["ngbNavLink",""],["ngbNavContent",""],["ngbNavItem","",4,"ngIf"],[3,"ngbNavOutlet"],["selectionType","multiClick",3,"fetchData","setExpandedRow","updateSelection","data","columns","hasDetails","updateSelectionOnRefresh","serverSide","count"],[1,"table-actions"],["id","osd-actions",1,"btn-group",3,"permission","selection","tableActions"],["dropDownOnly","Cluster-wide configuration","btnColor","light","id","cluster-wide-actions",1,"btn-group",3,"permission","selection","tableActions"],[3,"selection",4,"cdTableDetail"],[3,"selection"],["title",i,"uid","lo02I1Aiz","grafanaStyle","four",3,"grafanaPath","type"],["class","danger mb-3",4,"ngIf"],[1,"danger","mb-3"],["type","warning"],[1,"mb-0","ps-4"],[4,"ngIf"],["type","info"],["class","badge badge-hdd me-1",4,"ngFor","ngForOf"],["class","badge badge-info me-1",4,"ngFor","ngForOf"],[1,"badge","badge-hdd","me-1"],[1,"badge","badge-info","me-1"],[3,"title","total","used","warningThreshold","errorThreshold"],[3,"formGroup"],["formGroupName","child"],[1,"form-group"],[1,"custom-control","custom-checkbox"],["type","checkbox","name","preserve","id","preserve","formControlName","preserve",1,"custom-control-input"],["for","preserve",1,"custom-control-label"]]},template:function(o,i){if(1&o&&(e.\u0275\u0275elementStart(0,"nav",16,0),e.\u0275\u0275elementContainerStart(2,17),e.\u0275\u0275elementStart(3,"a",18),e.\u0275\u0275i18n(4,6),e.\u0275\u0275elementEnd(),e.\u0275\u0275template(5,ES,5,13,"ng-template",19),e.\u0275\u0275elementContainerEnd(),e.\u0275\u0275template(6,CS,4,0,"ng-container",20),e.\u0275\u0275elementEnd(),e.\u0275\u0275element(7,"div",21),e.\u0275\u0275template(8,SS,5,4,"ng-template",null,1,e.\u0275\u0275templateRefExtractor)(10,OS,7,6,"ng-template",null,2,e.\u0275\u0275templateRefExtractor)(12,NS,2,2,"ng-template",null,3,e.\u0275\u0275templateRefExtractor)(14,IS,1,5,"ng-template",null,4,e.\u0275\u0275templateRefExtractor)(16,AS,7,1,"ng-template",null,5,e.\u0275\u0275templateRefExtractor)),2&o){const r=e.\u0275\u0275reference(1);e.\u0275\u0275advance(6),e.\u0275\u0275property("ngIf",i.permissions.grafana.read),e.\u0275\u0275advance(),e.\u0275\u0275property("ngbNavOutlet",r)}},dependencies:[l.NgForOf,l.NgIf,V.NgbNavContent,V.NgbNav,V.NgbNavItem,V.NgbNavLink,V.NgbNavLinkBase,V.NgbNavOutlet,Lt.o,gt.c,it.m,Ke.O,dt.j,Ct.N,De.S,Me.a,xe.C,ze.E,T.CheckboxControlValueAccessor,T.NgControlStatus,T.NgControlStatusGroup,T.FormGroupDirective,T.FormControlName,T.FormGroupName,sS,Fa.r]})}}return n})();var fn=s(32380);let ji=(()=>{class n extends I.D{constructor(t){super(),this.prometheusService=t,this.isPrometheusConfigured=!1,this.isAlertmanagerConfigured=!1}ngOnInit(){this.prometheusService.ifAlertmanagerConfigured(()=>{this.isAlertmanagerConfigured=!0}),this.prometheusService.ifPrometheusConfigured(()=>{this.isPrometheusConfigured=!0})}static{this.\u0275fac=function(o){return new(o||n)(e.\u0275\u0275directiveInject(fn.o))}}static{this.\u0275dir=e.\u0275\u0275defineDirective({type:n,features:[e.\u0275\u0275InheritDefinitionFeature]})}}return n})();var va=s(84268);let Rs=(()=>{class n{constructor(t){this.notificationService=t}sendNotifications(t){t.forEach(o=>this.notificationService.show(o))}convertToCustomAlerts(t){return E().uniqWith(t.map(o=>({status:E().isObject(o.status)?o.status.state:this.getPrometheusNotificationStatus(o),name:o.labels.alertname,url:o.generatorURL,description:o.annotations.description,fingerprint:E().isObject(o.status)&&o.fingerprint})),E().isEqual)}getPrometheusNotificationStatus(t){const o=t.status;return"firing"===o?"active":o}convertAlertToNotification(t){return new va.v(this.formatType(t.status),`${t.name} (${t.status})`,this.appendSourceLink(t,t.description),void 0,"Prometheus")}formatType(t){return Le._[E().findKey({error:["firing","active"],info:["suppressed","unprocessed"],success:["resolved"]},i=>i.includes(t))]}appendSourceLink(t,o){return`${o} <a href="${t.url}" target="_blank"><svg cdsIcon="${g.FI.lineChart}" size="${g.FI.size16}" ></svg></a>`}static{this.\u0275fac=function(o){return new(o||n)(e.\u0275\u0275inject(Y.J))}}static{this.\u0275prov=e.\u0275\u0275defineInjectable({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})(),Eo=(()=>{class n{constructor(t,o){this.alertFormatter=t,this.prometheusService=o,this.canAlertsBeNotified=!1,this.rulesSubject=new K.BehaviorSubject([]),this.rules$=this.rulesSubject.asObservable(),this.alerts=[]}getAlerts(t){this.prometheusService.ifAlertmanagerConfigured(()=>{this.prometheusService.getAlerts(t).subscribe(o=>this.handleAlerts(o),o=>{[404,504].includes(o.status)&&this.prometheusService.disableAlertmanagerConfig()})})}getRules(){this.prometheusService.ifPrometheusConfigured(()=>{this.prometheusService.getRules("alerting").subscribe(t=>{const o=t.groups.reduce((i,r)=>i.concat(r.rules.map(p=>(p.group=r.name,p))),[]);this.rulesSubject.next(o)})})}refresh(t){this.getAlerts(t)}handleAlerts(t){this.canAlertsBeNotified&&this.notifyOnAlertChanges(t,this.alerts),this.activeAlerts=E().reduce(t,(o,i)=>"active"===i.status.state?++o:o,0),this.activeCriticalAlerts=E().reduce(t,(o,i)=>"active"===i.status.state&&"critical"===i.labels.severity?++o:o,0),this.activeWarningAlerts=E().reduce(t,(o,i)=>"active"===i.status.state&&"warning"===i.labels.severity?++o:o,0),this.alerts=t.reverse().sort((o,i)=>o.labels.severity.localeCompare(i.labels.severity)),this.canAlertsBeNotified=!0}notifyOnAlertChanges(t,o){const i=this.getChangedAlerts(this.alertFormatter.convertToCustomAlerts(t),this.alertFormatter.convertToCustomAlerts(o)),p=E().filter(i,F=>"suppressed"!==F.status).map(F=>this.alertFormatter.convertAlertToNotification(F));this.alertFormatter.sendNotifications(p)}getChangedAlerts(t,o){return E().differenceWith(t,o,E().isEqual).concat(this.getVanishedAlerts(t,o))}getVanishedAlerts(t,o){return E().differenceWith(o,t,(i,r)=>i.fingerprint===r.fingerprint).map(i=>(i.status="resolved",i))}static{this.\u0275fac=function(o){return new(o||n)(e.\u0275\u0275inject(Rs),e.\u0275\u0275inject(fn.o))}}static{this.\u0275prov=e.\u0275\u0275defineInjectable({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();const Ma=()=>({exact:!0});function LS(n,c){if(1&n&&(e.\u0275\u0275i18nStart(0,0,1),e.\u0275\u0275element(1,"small",10),e.\u0275\u0275i18nEnd()),2&n){const t=e.\u0275\u0275nextContext();e.\u0275\u0275advance(),e.\u0275\u0275i18nExp(t.prometheusAlertService.activeCriticalAlerts),e.\u0275\u0275i18nApply(0)}}function $S(n,c){if(1&n&&(e.\u0275\u0275i18nStart(0,0,2),e.\u0275\u0275element(1,"small",11),e.\u0275\u0275i18nEnd()),2&n){const t=e.\u0275\u0275nextContext();e.\u0275\u0275advance(),e.\u0275\u0275i18nExp(t.prometheusAlertService.activeWarningAlerts),e.\u0275\u0275i18nApply(0)}}let Ra=(()=>{class n{constructor(t){this.prometheusAlertService=t}static{this.\u0275fac=function(o){return new(o||n)(e.\u0275\u0275directiveInject(Eo))}}static{this.\u0275cmp=e.\u0275\u0275defineComponent({type:n,selectors:[["cd-prometheus-tabs"]],decls:12,vars:8,consts:()=>{let t,o,i;return t=$localize`:␟ac07bb1f917a39f678f74b7683780ecb7da8a0e0␟4126206677062426675:Active Alerts ${"\ufffd*4:1\ufffd\ufffd#1:1\ufffd"}:START_SMALL_TEXT:${"\ufffd0:1\ufffd"}:INTERPOLATION:${"[\ufffd/#1:1\ufffd\ufffd/*4:1\ufffd|\ufffd/#1:2\ufffd\ufffd/*5:2\ufffd]"}:CLOSE_SMALL_TEXT:${"\ufffd*5:2\ufffd\ufffd#1:2\ufffd"}:START_SMALL_TEXT_1:${"\ufffd0:2\ufffd"}:INTERPOLATION_1:${"[\ufffd/#1:1\ufffd\ufffd/*4:1\ufffd|\ufffd/#1:2\ufffd\ufffd/*5:2\ufffd]"}:CLOSE_SMALL_TEXT:`,t=e.\u0275\u0275i18nPostprocess(t),o=$localize`:␟9fe218829514884cdd0ca2300573a4e0428c324f␟8154453727027523235:Alerts`,i=$localize`:␟aa0c44aa1e5727061baa91e954f77e2f5f9a37c9␟6646103385727562519:Silences`,[t,o,i,[1,"nav","nav-tabs"],[1,"nav-item"],["routerLink","/monitoring/active-alerts","routerLinkActive","active","ariaCurrentWhenActive","page",1,"nav-link",3,"routerLinkActiveOptions"],["class","badge badge-danger ms-1",4,"ngIf"],["class","badge badge-warning ms-1",4,"ngIf"],["routerLink","/monitoring/alerts","routerLinkActive","active","ariaCurrentWhenActive","page",1,"nav-link",3,"routerLinkActiveOptions"],["routerLink","/monitoring/silences","routerLinkActive","active","ariaCurrentWhenActive","page",1,"nav-link",3,"routerLinkActiveOptions"],[1,"badge","badge-danger","ms-1"],[1,"badge","badge-warning","ms-1"]]},template:function(o,i){1&o&&(e.\u0275\u0275elementStart(0,"ul",3)(1,"li",4)(2,"a",5),e.\u0275\u0275i18nStart(3,0),e.\u0275\u0275template(4,LS,2,1,"small",6)(5,$S,2,1,"small",7),e.\u0275\u0275i18nEnd(),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(6,"li",4)(7,"a",8),e.\u0275\u0275i18n(8,1),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(9,"li",4)(10,"a",9),e.\u0275\u0275i18n(11,2),e.\u0275\u0275elementEnd()()()),2&o&&(e.\u0275\u0275advance(2),e.\u0275\u0275property("routerLinkActiveOptions",e.\u0275\u0275pureFunction0(5,Ma)),e.\u0275\u0275advance(2),e.\u0275\u0275property("ngIf",i.prometheusAlertService.activeCriticalAlerts>0),e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf",i.prometheusAlertService.activeWarningAlerts>0),e.\u0275\u0275advance(2),e.\u0275\u0275property("routerLinkActiveOptions",e.\u0275\u0275pureFunction0(6,Ma)),e.\u0275\u0275advance(3),e.\u0275\u0275property("routerLinkActiveOptions",e.\u0275\u0275pureFunction0(7,Ma)))},dependencies:[l.NgIf,m.RouterLink,m.RouterLinkActive]})}}return n})();const xS=["externalLinkTpl"];function US(n,c){1&n&&(e.\u0275\u0275elementStart(0,"cd-alert-panel",4),e.\u0275\u0275i18nStart(1,1),e.\u0275\u0275element(2,"cd-doc",5),e.\u0275\u0275i18nEnd(),e.\u0275\u0275elementEnd())}function wS(n,c){if(1&n&&e.\u0275\u0275element(0,"cd-table-key-value",10),2&n){const t=e.\u0275\u0275nextContext(3);e.\u0275\u0275property("renderObjects",!0)("hideEmpty",!0)("appendParentKey",!1)("data",t.expandedRow)("customCss",t.customCss)("autoReload",!1)}}function GS(n,c){1&n&&(e.\u0275\u0275elementContainerStart(0),e.\u0275\u0275template(1,wS,1,6,"cd-table-key-value",9),e.\u0275\u0275elementContainerEnd())}function HS(n,c){if(1&n){const t=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"cd-table",6),e.\u0275\u0275listener("setExpandedRow",function(i){e.\u0275\u0275restoreView(t);const r=e.\u0275\u0275nextContext();return e.\u0275\u0275resetView(r.setExpandedRow(i))})("updateSelection",function(i){e.\u0275\u0275restoreView(t);const r=e.\u0275\u0275nextContext();return e.\u0275\u0275resetView(r.updateSelection(i))}),e.\u0275\u0275element(1,"cd-table-actions",7),e.\u0275\u0275template(2,GS,2,0,"ng-container",8),e.\u0275\u0275elementEnd()}if(2&n){const t=e.\u0275\u0275nextContext();e.\u0275\u0275property("data",t.prometheusAlertService.alerts)("columns",t.columns)("forceIdentifier",!0)("customCss",t.customCss)("hasDetails",!0),e.\u0275\u0275advance(),e.\u0275\u0275property("permission",t.permission)("selection",t.selection)("tableActions",t.tableActions),e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf",t.expandedRow)}}function VS(n,c){if(1&n&&(e.\u0275\u0275elementStart(0,"a",11),e.\u0275\u0275namespaceSVG(),e.\u0275\u0275element(1,"svg",12),e.\u0275\u0275text(2," Source "),e.\u0275\u0275elementEnd()),2&n){const t=c.data.value,o=e.\u0275\u0275nextContext();e.\u0275\u0275property("href",t,e.\u0275\u0275sanitizeUrl),e.\u0275\u0275advance(),e.\u0275\u0275property("cdsIcon",o.icons.lineChart)("size",o.icons.size16)}}let zS=(()=>{class n extends ji{constructor(t,o,i,r){super(r),this.authStorageService=t,this.prometheusAlertService=o,this.urlBuilder=i,this.selection=new A.y,this.icons=g.FI,this.permission=this.authStorageService.getPermissions().prometheus,this.tableActions=[{permission:"create",canBePrimary:p=>p.hasSingleSelection,disable:p=>!p.hasSingleSelection||p.first().cdExecuting,icon:g.FI.add,routerLink:()=>"/monitoring"+this.urlBuilder.getCreateFrom(this.selection.first().fingerprint),name:$localize`Create Silence`}]}ngOnInit(){super.ngOnInit(),this.columns=[{name:$localize`Name`,prop:"labels.alertname",cellClass:"fw-bold",flexGrow:2},{name:$localize`Summary`,prop:"annotations.summary",flexGrow:3},{name:$localize`Severity`,prop:"labels.severity",flexGrow:1,cellTransformation:O.x.badge,customTemplateConfig:{map:{critical:{class:"badge-danger"},warning:{class:"badge-warning"}}}},{name:$localize`State`,prop:"status.state",flexGrow:1,cellTransformation:O.x.badge,customTemplateConfig:{map:{active:{class:"badge-info"},unprocessed:{class:"badge-warning"},suppressed:{class:"badge-dark"}}}},{name:$localize`Started`,prop:"startsAt",cellTransformation:O.x.timeAgo,flexGrow:1},{name:$localize`URL`,prop:"generatorURL",flexGrow:1,sortable:!1,cellTemplate:this.externalLinkTpl}],this.prometheusAlertService.getAlerts(!0)}updateSelection(t){this.selection=t}static{this.\u0275fac=function(o){return new(o||n)(e.\u0275\u0275directiveInject(_.v),e.\u0275\u0275directiveInject(Eo),e.\u0275\u0275directiveInject(B.E),e.\u0275\u0275directiveInject(fn.o))}}static{this.\u0275cmp=e.\u0275\u0275defineComponent({type:n,selectors:[["cd-active-alert-list"]],viewQuery:function(o,i){if(1&o&&e.\u0275\u0275viewQuery(xS,7),2&o){let r;e.\u0275\u0275queryRefresh(r=e.\u0275\u0275loadQuery())&&(i.externalLinkTpl=r.first)}},features:[e.\u0275\u0275ProvidersFeature([{provide:B.E,useValue:new B.E("silences")}]),e.\u0275\u0275InheritDefinitionFeature],decls:5,vars:2,consts:()=>{let t;return t=$localize`:␟e5ea46d3b8c087be7516773c0a72d79746f6032d␟6076383047066830528:To see all active Prometheus alerts, please provide the URL to the API of Prometheus' Alertmanager as described in the ${"\ufffd#2\ufffd"}:START_TAG_CD_DOC:${"\ufffd/#2\ufffd"}:CLOSE_TAG_CD_DOC:.`,[["externalLinkTpl",""],t,["type","info",4,"ngIf"],["identifier","fingerprint","selectionType","single",3,"data","columns","forceIdentifier","customCss","hasDetails","setExpandedRow","updateSelection",4,"ngIf"],["type","info"],["section","prometheus"],["identifier","fingerprint","selectionType","single",3,"setExpandedRow","updateSelection","data","columns","forceIdentifier","customCss","hasDetails"],[1,"table-actions",3,"permission","selection","tableActions"],[4,"ngIf"],[3,"renderObjects","hideEmpty","appendParentKey","data","customCss","autoReload",4,"cdTableDetail"],[3,"renderObjects","hideEmpty","appendParentKey","data","customCss","autoReload"],["target","_blank",3,"href"],[3,"cdsIcon","size"]]},template:function(o,i){1&o&&(e.\u0275\u0275element(0,"cd-prometheus-tabs"),e.\u0275\u0275template(1,US,3,0,"cd-alert-panel",2)(2,HS,3,9,"cd-table",3)(3,VS,3,3,"ng-template",null,0,e.\u0275\u0275templateRefExtractor)),2&o&&(e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf",!i.isAlertmanagerConfigured),e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf",i.isAlertmanagerConfigured))},dependencies:[l.NgIf,it.m,fo.C,Ke.O,Pt.i,dt.j,Ct.N,L.IconDirective,Ra]})}}return n})();var Oa=s(64346);function XS(n,c){1&n&&(e.\u0275\u0275elementStart(0,"cd-alert-panel",3),e.\u0275\u0275i18nStart(1,0),e.\u0275\u0275element(2,"cd-doc",4),e.\u0275\u0275i18nEnd(),e.\u0275\u0275elementEnd())}function kS(n,c){if(1&n&&e.\u0275\u0275element(0,"cd-table-key-value",8),2&n){const t=e.\u0275\u0275nextContext(3);e.\u0275\u0275property("data",t.expandedRow)("renderObjects",!0)("hideKeys",t.hideKeys)}}function jS(n,c){1&n&&(e.\u0275\u0275elementContainerStart(0),e.\u0275\u0275template(1,kS,1,3,"cd-table-key-value",7),e.\u0275\u0275elementContainerEnd())}function WS(n,c){if(1&n){const t=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"cd-table",5),e.\u0275\u0275listener("setExpandedRow",function(i){e.\u0275\u0275restoreView(t);const r=e.\u0275\u0275nextContext();return e.\u0275\u0275resetView(r.setExpandedRow(i))})("updateSelection",function(i){e.\u0275\u0275restoreView(t);const r=e.\u0275\u0275nextContext();return e.\u0275\u0275resetView(r.updateSelection(i))}),e.\u0275\u0275template(1,jS,2,0,"ng-container",6),e.\u0275\u0275elementEnd()}if(2&n){const t=e.\u0275\u0275nextContext();e.\u0275\u0275property("data",t.rules)("columns",t.columns)("selectionType","single")("hasDetails",!0),e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf",t.expandedRow)}}let KS=(()=>{class n extends ji{constructor(t,o){super(o),this.prometheusAlertService=t,this.selection=new A.y,this.rules=[],this.hideKeys=["alerts","type"]}ngOnInit(){super.ngOnInit(),this.prometheusAlertService.getRules(),this.rulesSubscription=this.prometheusAlertService.rules$.subscribe(t=>{this.rules=t}),this.columns=[{prop:"name",name:$localize`Name`,cellClass:"fw-bold",flexGrow:2},{prop:"labels.severity",name:$localize`Severity`,flexGrow:1,cellTransformation:O.x.badge,customTemplateConfig:{map:{critical:{class:"badge-danger"},warning:{class:"badge-warning"}}}},{prop:"group",name:$localize`Group`,flexGrow:1,cellTransformation:O.x.badge},{prop:"duration",name:$localize`Duration`,pipe:new Oa.b,flexGrow:1},{prop:"query",name:$localize`Query`,isHidden:!0,flexGrow:1},{prop:"annotations.summary",name:$localize`Summary`,flexGrow:3}]}updateSelection(t){this.selection=t}ngOnDestroy(){this.rulesSubscription.unsubscribe()}static{this.\u0275fac=function(o){return new(o||n)(e.\u0275\u0275directiveInject(Eo),e.\u0275\u0275directiveInject(fn.o))}}static{this.\u0275cmp=e.\u0275\u0275defineComponent({type:n,selectors:[["cd-rules-list"]],features:[e.\u0275\u0275InheritDefinitionFeature],decls:3,vars:2,consts:()=>{let t;return t=$localize`:␟e51cb11d7c42e86517841db1f6029034c8150156␟3961415353470115523:To see all configured Prometheus alerts, please provide the URL to the API of Prometheus as described in the  ${"\ufffd#2\ufffd"}:START_TAG_CD_DOC:${"\ufffd/#2\ufffd"}:CLOSE_TAG_CD_DOC:.`,[t,["type","info",4,"ngIf"],[3,"data","columns","selectionType","hasDetails","setExpandedRow","updateSelection",4,"ngIf"],["type","info"],["section","prometheus"],[3,"setExpandedRow","updateSelection","data","columns","selectionType","hasDetails"],[4,"ngIf"],[3,"data","renderObjects","hideKeys",4,"cdTableDetail"],[3,"data","renderObjects","hideKeys"]]},template:function(o,i){1&o&&(e.\u0275\u0275element(0,"cd-prometheus-tabs"),e.\u0275\u0275template(1,XS,3,0,"cd-alert-panel",1)(2,WS,2,5,"cd-table",2)),2&o&&(e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf",!i.isPrometheusConfigured),e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf",i.isPrometheusConfigured))},dependencies:[l.NgIf,it.m,fo.C,Ke.O,Pt.i,Ct.N,Ra]})}}return n})();var Pa=s(5155);let ba=(()=>{class n{constructor(){this.valueAttributePath={alertname:"name",instance:"alerts.0.labels.instance",job:"alerts.0.labels.job",severity:"labels.severity"}}singleMatch(t,o){return this.multiMatch([t],o)}multiMatch(t,o){if(!t.some(i=>i.isRegex))return t.forEach(i=>{o=this.getMatchedRules(i,o)}),this.describeMatch(o)}getMatchedRules(t,o){const i=this.getAttributePath(t.name);return o.filter(r=>E().get(r,i)===t.value)}describeMatch(t){let o=0;return t.forEach(i=>o+=i.alerts.length),{status:this.getMatchText(t.length,o),cssClass:o?"has-success":"has-warning"}}getAttributePath(t){return this.valueAttributePath[t]}getMatchText(t,o){const i={noRule:$localize`Your matcher seems to match no currently defined rule or active alert.`,noAlerts:$localize`no active alerts`,alert:$localize`1 active alert`,alerts:$localize`${o} active alerts`,rule:$localize`Matches 1 rule`,rules:$localize`Matches ${t} rules`};return t?$localize`${t>1?i.rules:i.rule} with ${o?o>1?i.alerts:i.alert:i.noAlerts}.`:i.noRule}static{this.\u0275fac=function(o){return new(o||n)}}static{this.\u0275prov=e.\u0275\u0275defineInjectable({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})(),QS=(()=>{class n{calculateDuration(t,o){const i=+t,r=+o,p=this.getDuration(Math.abs(i-r));return i>r?"-"+p:p}getDuration(t){const o=new Date(t),i=o.getUTCHours(),r=o.getUTCMinutes(),F=(D,x)=>D&&D+x;return[F(Math.floor(t/864e5),"d"),F(i,"h"),F(r,"m")].filter(D=>D).join(" ")}calculateDate(t,o,i){const r=+t;if(E().isNaN(r))return;const p=this.getDurationMs(o)*(i?-1:1);return new Date(r+p)}getDurationMs(t){return 6e4*(60*(24*this.getNumbersFromString(t,"d")+this.getNumbersFromString(t,"h"))+this.getNumbersFromString(t,"m"))}getNumbersFromString(t,o){const i=t.match(new RegExp(`[0-9 ]+${o}`,"i"));return i?parseInt(i[0],10):0}static{this.\u0275fac=function(o){return new(o||n)}}static{this.\u0275prov=e.\u0275\u0275defineInjectable({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();function YS(n,c){if(1&n&&(e.\u0275\u0275elementStart(0,"option",30),e.\u0275\u0275text(1),e.\u0275\u0275elementEnd()),2&n){const t=c.$implicit;e.\u0275\u0275property("value",t),e.\u0275\u0275advance(),e.\u0275\u0275textInterpolate1(" ",t," ")}}function JS(n,c){1&n&&(e.\u0275\u0275elementStart(0,"span",31),e.\u0275\u0275i18n(1,7),e.\u0275\u0275elementEnd())}function ZS(n,c){1&n&&(e.\u0275\u0275elementStart(0,"span",31),e.\u0275\u0275i18n(1,8),e.\u0275\u0275elementEnd())}function qS(n,c){if(1&n&&(e.\u0275\u0275elementStart(0,"div",32)(1,"span"),e.\u0275\u0275text(2),e.\u0275\u0275elementEnd()()),2&n){const t=e.\u0275\u0275nextContext();e.\u0275\u0275classMapInterpolate1("cd-col-form-offset ",t.matcherMatch.cssClass,""),e.\u0275\u0275advance(),e.\u0275\u0275classMapInterpolate1("text-muted ",t.matcherMatch.cssClass,""),e.\u0275\u0275advance(),e.\u0275\u0275textInterpolate1(" ",t.matcherMatch.status," ")}}let eh=(()=>{class n{constructor(t,o,i,r){this.formBuilder=t,this.silenceMatcher=o,this.activeModal=i,this.actionLabels=r,this.submitAction=new e.EventEmitter,this.editMode=!1,this.nameAttributes=["alertname","instance","job","severity"],this.possibleValues=[],this.matcherMatch=void 0,this.valueClick=new K.Subject,this.valueFocus=new K.Subject,this.search=p=>(0,K.merge)(p.pipe((0,u.debounceTime)(200),(0,u.distinctUntilChanged)()),this.valueFocus,this.valueClick.pipe((0,u.filter)(()=>!this.typeahead.isPopupOpen()))).pipe((0,u.map)(F=>(""===F?this.possibleValues:this.possibleValues.filter(D=>D.toLowerCase().indexOf(F.toLowerCase())>-1)).slice(0,10))),this.createForm(),this.subscribeToChanges()}createForm(){this.form=this.formBuilder.group({name:[null,[T.Validators.required]],value:[{value:"",disabled:!0},[T.Validators.required]],isRegex:new T.UntypedFormControl(!1)})}subscribeToChanges(){this.form.get("name").valueChanges.subscribe(t=>{null!==t?(this.setPossibleValues(t),this.form.get("value").enable()):this.form.get("value").disable()}),this.form.get("value").valueChanges.subscribe(t=>{const o=this.form.value;o.value=t,this.matcherMatch=this.silenceMatcher.singleMatch(o,this.rules)})}setPossibleValues(t){this.possibleValues=E().sortedUniq(this.rules.map(o=>E().get(o,this.silenceMatcher.getAttributePath(t))).filter(o=>o))}getMode(){return this.editMode?this.actionLabels.EDIT:this.actionLabels.ADD}preFillControls(t){this.form.setValue(t)}onSubmit(){this.submitAction.emit(this.form.value),this.activeModal.close()}static{this.\u0275fac=function(o){return new(o||n)(e.\u0275\u0275directiveInject(At.$),e.\u0275\u0275directiveInject(ba),e.\u0275\u0275directiveInject(V.NgbActiveModal),e.\u0275\u0275directiveInject(f.Ss))}}static{this.\u0275cmp=e.\u0275\u0275defineComponent({type:n,selectors:[["cd-silence-matcher-modal"]],viewQuery:function(o,i){if(1&o&&e.\u0275\u0275viewQuery(V.NgbTypeahead,7),2&o){let r;e.\u0275\u0275queryRefresh(r=e.\u0275\u0275loadQuery())&&(i.typeahead=r.first)}},outputs:{submitAction:"submitAction"},decls:32,vars:11,consts:()=>{let t,o,i,r,p,F,D,x;return t=$localize`:␟78af6a5e6e4d305557054b64d10f9f9446d8043d␟4490634877766743178:{VAR_SELECT, select, true {Edit} other {Add}}`,t=e.\u0275\u0275i18nPostprocess(t,{VAR_SELECT:"\ufffd0\ufffd"}),o=$localize`:␟b2404fa8e80946d0ce3d0ae369b51cb26ec28d42␟1197304261393808270:${t}:ICU: Matcher`,i=$localize`:␟cff1428d10d59d14e45edec3c735a27b5482db59␟8953033926734869941:Name`,r=$localize`:␟9c25e04f554875dc2625a78ba0fc56c6010cd0d3␟2568530683178009178:-- Select an attribute to match against --`,p=$localize`:␟5049e204c14c648691ac775a64fb504467aeb549␟6555318547274416232:Value`,F=$localize`:␟77fc5c63497fc031ddc97645484e3d94ad27766c␟6019895715758759494:Use regular expression`,D=$localize`:␟4aa19de2a2b54cbda39e9c62917b23044c087776␟751124305869330542:This field is required!`,x=$localize`:␟4aa19de2a2b54cbda39e9c62917b23044c087776␟751124305869330542:This field is required!`,[["formDir","ngForm"],["instance","ngbTypeahead"],o,i,r,p,F,D,x,[3,"modalRef"],[1,"modal-title"],[1,"modal-content"],["novalidate","",1,"form",3,"formGroup"],[1,"modal-body"],[1,"form-group","row"],["for","name",1,"cd-col-form-label","required"],[1,"cd-col-form-input"],["id","name","formControlName","name","name","name",1,"form-select"],[3,"ngValue"],[3,"value",4,"ngFor","ngForOf"],["class","help-block",4,"ngIf"],["for","value",1,"cd-col-form-label","required"],["id","value","type","text","formControlName","value",1,"form-control",3,"focus","click","ngbTypeahead"],["id","match-state",3,"class",4,"ngIf"],[1,"cd-col-form-offset"],[1,"custom-control","custom-checkbox"],["type","checkbox","formControlName","isRegex","name","is-regex","id","is-regex",1,"custom-control-input"],["for","is-regex",1,"custom-control-label"],[1,"modal-footer"],[3,"submitActionEvent","form","submitText"],[3,"value"],[1,"help-block"],["id","match-state"]]},template:function(o,i){if(1&o){const r=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"cd-modal",9)(1,"span",10),e.\u0275\u0275i18n(2,2),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementContainerStart(3,11),e.\u0275\u0275elementStart(4,"form",12,0)(6,"div",13)(7,"div",14)(8,"label",15),e.\u0275\u0275i18n(9,3),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(10,"div",16)(11,"select",17)(12,"option",18),e.\u0275\u0275i18n(13,4),e.\u0275\u0275elementEnd(),e.\u0275\u0275template(14,YS,2,2,"option",19),e.\u0275\u0275elementEnd(),e.\u0275\u0275template(15,JS,2,0,"span",20),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(16,"div",14)(17,"label",21),e.\u0275\u0275i18n(18,5),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(19,"div",16)(20,"input",22,1),e.\u0275\u0275listener("focus",function(F){return e.\u0275\u0275restoreView(r),e.\u0275\u0275resetView(i.valueFocus.next(F.target.value))})("click",function(F){return e.\u0275\u0275restoreView(r),e.\u0275\u0275resetView(i.valueClick.next(F.target.value))}),e.\u0275\u0275elementEnd(),e.\u0275\u0275template(22,ZS,2,0,"span",20),e.\u0275\u0275elementEnd(),e.\u0275\u0275template(23,qS,3,7,"div",23),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(24,"div",14)(25,"div",24)(26,"div",25),e.\u0275\u0275element(27,"input",26),e.\u0275\u0275elementStart(28,"label",27),e.\u0275\u0275i18n(29,6),e.\u0275\u0275elementEnd()()()()(),e.\u0275\u0275elementStart(30,"div",28)(31,"cd-form-button-panel",29),e.\u0275\u0275listener("submitActionEvent",function(){return e.\u0275\u0275restoreView(r),e.\u0275\u0275resetView(i.onSubmit())}),e.\u0275\u0275elementEnd()()(),e.\u0275\u0275elementContainerEnd(),e.\u0275\u0275elementEnd()}if(2&o){const r=e.\u0275\u0275reference(5);e.\u0275\u0275property("modalRef",i.activeModal),e.\u0275\u0275advance(2),e.\u0275\u0275i18nExp(i.editMode),e.\u0275\u0275i18nApply(2),e.\u0275\u0275advance(2),e.\u0275\u0275property("formGroup",i.form),e.\u0275\u0275advance(8),e.\u0275\u0275property("ngValue",null),e.\u0275\u0275advance(2),e.\u0275\u0275property("ngForOf",i.nameAttributes),e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf",i.form.showError("name",r,"required")),e.\u0275\u0275advance(5),e.\u0275\u0275property("ngbTypeahead",i.search),e.\u0275\u0275advance(2),e.\u0275\u0275property("ngIf",i.form.showError("value",r,"required")),e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf",i.form.getValue("value")&&!i.form.getValue("isRegex")&&i.matcherMatch),e.\u0275\u0275advance(8),e.\u0275\u0275property("form",i.form)("submitText",i.getMode())}},dependencies:[l.NgForOf,l.NgIf,xt.z,Q.e,De.S,Me.a,xe.C,ze.E,T.\u0275NgNoValidate,T.NgSelectOption,T.\u0275NgSelectMultipleOption,T.DefaultValueAccessor,T.CheckboxControlValueAccessor,T.SelectControlValueAccessor,T.NgControlStatus,T.NgControlStatusGroup,T.FormGroupDirective,T.FormControlName,V.NgbTypeahead]})}}return n})();const th=n=>({"btn-warning":n}),nh=(n,c)=>({"text-warning":n,"text-danger":c}),oh=(n,c)=>({index:n,matcher:c});function ih(n,c){if(1&n&&(e.\u0275\u0275elementStart(0,"i",62),e.\u0275\u0275text(1,"~"),e.\u0275\u0275elementEnd()),2&n){const t=e.\u0275\u0275nextContext(2).$implicit;e.\u0275\u0275property("ngbTooltip",t.tooltip)}}function ah(n,c){1&n&&(e.\u0275\u0275elementStart(0,"i",63),e.\u0275\u0275text(1,"="),e.\u0275\u0275elementEnd())}function sh(n,c){if(1&n&&(e.\u0275\u0275elementStart(0,"span",59),e.\u0275\u0275template(1,ih,2,1,"i",60)(2,ah,2,0,"i",61),e.\u0275\u0275elementEnd()),2&n){const t=e.\u0275\u0275nextContext().$implicit,o=e.\u0275\u0275nextContext().matcher;e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf",o[t.attribute]),e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf",!o[t.attribute])}}function rh(n,c){if(1&n&&(e.\u0275\u0275elementContainerStart(0),e.\u0275\u0275element(1,"input",64),e.\u0275\u0275elementContainerEnd()),2&n){const t=e.\u0275\u0275nextContext().$implicit,o=e.\u0275\u0275nextContext(),i=o.matcher,r=o.index;e.\u0275\u0275advance(),e.\u0275\u0275propertyInterpolate2("id","matcher-",t.attribute,"-",r,""),e.\u0275\u0275property("value",i[t.attribute])}}function lh(n,c){if(1&n&&(e.\u0275\u0275elementContainerStart(0),e.\u0275\u0275template(1,sh,3,2,"span",58)(2,rh,2,4,"ng-container",26),e.\u0275\u0275elementContainerEnd()),2&n){const t=c.$implicit;e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf","isRegex"===t.attribute),e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf","isRegex"!==t.attribute)}}function _h(n,c){if(1&n){const t=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"div",53),e.\u0275\u0275template(1,lh,3,2,"ng-container",44),e.\u0275\u0275elementStart(2,"button",54),e.\u0275\u0275listener("click",function(){const i=e.\u0275\u0275restoreView(t).index,r=e.\u0275\u0275nextContext();return e.\u0275\u0275resetView(r.showMatcherModal(i))}),e.\u0275\u0275namespaceSVG(),e.\u0275\u0275element(3,"svg",55),e.\u0275\u0275elementEnd(),e.\u0275\u0275namespaceHTML(),e.\u0275\u0275elementStart(4,"button",56),e.\u0275\u0275listener("click",function(){const i=e.\u0275\u0275restoreView(t).index,r=e.\u0275\u0275nextContext();return e.\u0275\u0275resetView(r.deleteMatcher(i))}),e.\u0275\u0275namespaceSVG(),e.\u0275\u0275element(5,"svg",55),e.\u0275\u0275elementEnd()(),e.\u0275\u0275namespaceHTML(),e.\u0275\u0275element(6,"span",57)}if(2&n){const t=c.index,o=e.\u0275\u0275nextContext();e.\u0275\u0275advance(),e.\u0275\u0275property("ngForOf",o.matcherConfig),e.\u0275\u0275advance(),e.\u0275\u0275propertyInterpolate1("id","matcher-edit-",t,""),e.\u0275\u0275advance(),e.\u0275\u0275property("cdsIcon",o.icons.edit)("size",o.icons.size16),e.\u0275\u0275advance(),e.\u0275\u0275propertyInterpolate1("id","matcher-delete-",t,""),e.\u0275\u0275advance(),e.\u0275\u0275property("cdsIcon",o.icons.trash)("size",o.icons.size16)}}function ch(n,c){1&n&&(e.\u0275\u0275elementStart(0,"cd-helper"),e.\u0275\u0275i18n(1,15),e.\u0275\u0275elementEnd())}function dh(n,c){1&n&&(e.\u0275\u0275elementStart(0,"span",65),e.\u0275\u0275i18n(1,16),e.\u0275\u0275elementEnd())}function uh(n,c){1&n&&(e.\u0275\u0275elementStart(0,"span",65),e.\u0275\u0275i18n(1,17),e.\u0275\u0275elementEnd())}function ph(n,c){1&n&&(e.\u0275\u0275elementStart(0,"span",65),e.\u0275\u0275i18n(1,18),e.\u0275\u0275elementEnd())}function mh(n,c){1&n&&(e.\u0275\u0275elementStart(0,"span",65),e.\u0275\u0275i18n(1,19),e.\u0275\u0275elementEnd())}function fh(n,c){1&n&&(e.\u0275\u0275elementStart(0,"span",65),e.\u0275\u0275i18n(1,20),e.\u0275\u0275elementEnd())}function Eh(n,c){if(1&n&&(e.\u0275\u0275elementStart(0,"h5",66)(1,"strong"),e.\u0275\u0275i18n(2,21),e.\u0275\u0275elementEnd()()),2&n){e.\u0275\u0275nextContext();const t=e.\u0275\u0275reference(4);e.\u0275\u0275property("ngClass",e.\u0275\u0275pureFunction2(1,nh,!t.submitted,t.submitted))}}function gh(n,c){1&n&&e.\u0275\u0275elementContainer(0)}function Ch(n,c){if(1&n&&(e.\u0275\u0275elementStart(0,"span"),e.\u0275\u0275template(1,gh,1,0,"ng-container",67),e.\u0275\u0275elementEnd()),2&n){const t=c.$implicit,o=c.index;e.\u0275\u0275nextContext();const i=e.\u0275\u0275reference(1);e.\u0275\u0275advance(),e.\u0275\u0275property("ngTemplateOutlet",i)("ngTemplateOutletContext",e.\u0275\u0275pureFunction2(2,oh,o,t))}}function Sh(n,c){if(1&n&&(e.\u0275\u0275elementStart(0,"div",68)(1,"span"),e.\u0275\u0275text(2),e.\u0275\u0275elementEnd()()),2&n){const t=e.\u0275\u0275nextContext();e.\u0275\u0275classMapInterpolate1("cd-col-form-offset ",t.matcherMatch.cssClass,""),e.\u0275\u0275advance(),e.\u0275\u0275classMapInterpolate1("text-muted ",t.matcherMatch.cssClass,""),e.\u0275\u0275advance(),e.\u0275\u0275textInterpolate1(" ",t.matcherMatch.status," ")}}function hh(n,c){if(1&n&&e.\u0275\u0275element(0,"cd-date-time-picker",69),2&n){const t=e.\u0275\u0275nextContext();e.\u0275\u0275property("control",t.form.get("startsAt"))("hasSeconds",!1)}}function Th(n,c){if(1&n&&e.\u0275\u0275element(0,"cd-date-time-picker",69),2&n){const t=e.\u0275\u0275nextContext();e.\u0275\u0275property("control",t.form.get("endsAt"))("hasSeconds",!1)}}let go=(()=>{class n{constructor(t,o,i,r,p,F,D,x,H,X,Z){this.router=t,this.authStorageService=o,this.formBuilder=i,this.prometheusService=r,this.notificationService=p,this.route=F,this.timeDiff=D,this.modalService=x,this.silenceMatcher=H,this.actionLabels=X,this.succeededLabels=Z,this.icons=g.FI,this.matchName="",this.matchValue="",this.recreate=!1,this.edit=!1,this.resource=$localize`silence`,this.matchers=[],this.matcherMatch=void 0,this.matcherConfig=[{tooltip:$localize`Attribute name`,attribute:"name"},{tooltip:$localize`Regular expression`,attribute:"isRegex"},{tooltip:$localize`Value`,attribute:"value"}],this.datetimeFormat="YYYY-MM-DD HH:mm",this.isNavigate=!0,this.init()}init(){this.chooseMode(),this.authenticate(),this.createForm(),this.setupDates(),this.getData()}chooseMode(){this.edit=this.router.url.startsWith("/monitoring/silences/edit"),this.recreate=this.router.url.startsWith("/monitoring/silences/recreate"),this.action=this.edit?this.actionLabels.EDIT:this.recreate?this.actionLabels.RECREATE:this.actionLabels.CREATE}authenticate(){if(this.permission=this.authStorageService.getPermissions().prometheus,!this.permission.read||!(this.edit?this.permission.update:this.permission.create))throw new Pa.YW}createForm(){const t=ge.xQ.custom("format",o=>!(""===o||lt()(o,this.datetimeFormat).isValid()));this.form=this.formBuilder.group({startsAt:["",[T.Validators.required,t]],duration:["2h",[T.Validators.min(1)]],endsAt:["",[T.Validators.required,t]],createdBy:[this.authStorageService.getUsername(),[T.Validators.required]],comment:[null,[T.Validators.required]]},{validators:ge.xQ.custom("matcherRequired",()=>0===this.matchers.length)})}setupDates(){const t=lt()().format(this.datetimeFormat);this.form.silentSet("startsAt",t),this.updateDate(),this.subscribeDateChanges()}updateDate(t){const o=lt()(this.form.getValue(t?"endsAt":"startsAt"),this.datetimeFormat).toDate(),i=this.timeDiff.calculateDate(o,this.form.getValue("duration"),t);if(i){const r=lt()(i).format(this.datetimeFormat);this.form.silentSet(t?"startsAt":"endsAt",r)}}subscribeDateChanges(){this.form.get("startsAt").valueChanges.subscribe(()=>{this.onDateChange()}),this.form.get("duration").valueChanges.subscribe(()=>{this.updateDate()}),this.form.get("endsAt").valueChanges.subscribe(()=>{this.onDateChange(!0)})}onDateChange(t){const o=lt()(this.form.getValue("startsAt"),this.datetimeFormat),i=lt()(this.form.getValue("endsAt"),this.datetimeFormat);o.isBefore(i)?this.updateDuration():this.updateDate(t)}updateDuration(){const t=lt()(this.form.getValue("startsAt"),this.datetimeFormat).toDate(),o=lt()(this.form.getValue("endsAt"),this.datetimeFormat).toDate();this.form.silentSet("duration",this.timeDiff.calculateDuration(t,o))}getData(){this.getRules(),this.getModeSpecificData()}getRules(){return this.prometheusService.ifPrometheusConfigured(()=>this.prometheusService.getRules().subscribe(t=>{this.rules=t.groups.reduce((o,i)=>E().concat(o,i.rules),[])},()=>{this.prometheusService.disablePrometheusConfig(),this.rules=[]}),()=>{this.rules=[],this.notificationService.show(Le._.info,$localize`Please add your Prometheus host to the dashboard configuration and refresh the page`,void 0,void 0,"Prometheus")}),this.rules}getModeSpecificData(){this.route.params.subscribe(t=>{t.id&&(this.edit||this.recreate?this.prometheusService.getSilences().subscribe(o=>{const i=E().find(o,["id",t.id]);E().isUndefined(i)||this.fillFormWithSilence(i)}):this.prometheusService.getAlerts().subscribe(o=>{const i=E().find(o,["fingerprint",t.id]);E().isUndefined(i)||this.fillFormByAlert(i)}))})}fillFormWithSilence(t){this.id=t.id,this.edit&&(["startsAt","endsAt"].forEach(o=>this.form.silentSet(o,lt()(t[o]).format(this.datetimeFormat))),this.updateDuration()),["createdBy","comment"].forEach(o=>this.form.silentSet(o,t[o])),this.matchers=t.matchers,this.validateMatchers()}validateMatchers(){this.rules?(this.matcherMatch=this.silenceMatcher.multiMatch(this.matchers,this.rules),this.form.markAsDirty(),this.form.updateValueAndValidity()):window.setTimeout(()=>this.validateMatchers(),100)}fillFormByAlert(t){this.setMatcher({name:"alertname",value:t.labels.alertname,isRegex:!1})}setMatcher(t,o){E().isNumber(o)?this.matchers[o]=t:this.matchers.push(t),this.validateMatchers()}showMatcherModal(t){const i=this.modalService.show(eh).componentInstance;i.rules=this.rules,E().isNumber(t)&&(i.editMode=!0,i.preFillControls(this.matchers[t])),i.submitAction.subscribe(r=>{this.setMatcher(r,t)})}deleteMatcher(t){this.matchers.splice(t,1),this.validateMatchers()}submit(t){this.form.invalid||this.prometheusService.setSilence(this.getSubmitData()).subscribe(o=>{t&&(t.silenceId=o.body.silenceId),this.isNavigate&&this.router.navigate(["/monitoring/silences"]),this.notificationService.show(Le._.success,this.getNotificationTile(this.matchers),void 0,void 0,"Prometheus"),this.matchers=[]},()=>this.form.setErrors({cdSubmitButton:!0}))}getSubmitData(){const t=this.form.value;return delete t.duration,t.startsAt=lt()(t.startsAt,this.datetimeFormat).toISOString(),t.endsAt=lt()(t.endsAt,this.datetimeFormat).toISOString(),t.matchers=this.matchers,this.edit&&(t.id=this.id),t}getNotificationTile(t){let o;o=this.edit?this.succeededLabels.EDITED:this.recreate?this.succeededLabels.RECREATED:this.succeededLabels.CREATED;let i="";for(const r of t)i=i.concat(` ${r.name} - ${r.value},`);return`${o} ${this.resource} for ${i.slice(0,-1)}`}static{this.\u0275fac=function(o){return new(o||n)(e.\u0275\u0275directiveInject(m.Router),e.\u0275\u0275directiveInject(_.v),e.\u0275\u0275directiveInject(At.$),e.\u0275\u0275directiveInject(fn.o),e.\u0275\u0275directiveInject(Y.J),e.\u0275\u0275directiveInject(m.ActivatedRoute),e.\u0275\u0275directiveInject(QS),e.\u0275\u0275directiveInject(qt.B),e.\u0275\u0275directiveInject(ba),e.\u0275\u0275directiveInject(f.Ss),e.\u0275\u0275directiveInject(f.Vv))}}static{this.\u0275cmp=e.\u0275\u0275defineComponent({type:n,selectors:[["cd-prometheus-form"]],decls:71,vars:29,consts:()=>{let t,o,i,r,p,F,D,x,H,X,Z,re,pe,be,Pe,he,Ue,ve;return t=$localize`:␟fb127ea03835b3230f0ed981c7080e2ccb879621␟3346778808274133574:${"\ufffd0\ufffd"}:INTERPOLATION: ${"\ufffd1\ufffd"}:INTERPOLATION_1:`,o=$localize`:␟a20424156b8816671f61879f0574a4f27d7b16b9␟1043390381565182083:Creator`,i=$localize`:␟5a5d7ee2acbfa9c91ab7f41d26bda9ff0cafe42f␟2662644497259948010:Comment`,r=$localize`:␟4c11aad490b2d53fdae30b3807beabf79306752c␟3770761673682962465:Start time`,p=$localize`:␟32856b1e8e339b747b21e313e2fe65a51fd450bb␟851901607865498897:If the start time lies in the past the creation time will be used`,F=$localize`:␟a02ea1d4e7424ca989929da5e598f379940fdbf2␟7410432243549869948:Duration`,D=$localize`:␟2f4e35e36f4d3c62e2c17df41730b6dee4afc4b9␟3029887440722063094:End time`,x=$localize`:␟992123459137d45c15df5548bc9682aad835c04b␟133947232251217266:Matchers`,H=$localize`:␟ef765bd80c4806c51c891908c07a24bc76f019eb␟7045831295346420833:Add matcher`,X=$localize`:␟28f86ffd419b869711aa13f5e5ff54be6d70731c␟7585826646011739428:Edit`,Z=$localize`:␟826b25211922a1b46436589233cb6f1a163d89b7␟7022070615528435141:Delete`,re=$localize`:␟a3ba06aba047605af8ea1718ec1ba153b7db12a2␟8844130335538491294:Editing a silence will expire the old silence and recreate it as a new silence`,pe=$localize`:␟4aa19de2a2b54cbda39e9c62917b23044c087776␟751124305869330542:This field is required!`,be=$localize`:␟4aa19de2a2b54cbda39e9c62917b23044c087776␟751124305869330542:This field is required!`,Pe=$localize`:␟4aa19de2a2b54cbda39e9c62917b23044c087776␟751124305869330542:This field is required!`,he=$localize`:␟4aa19de2a2b54cbda39e9c62917b23044c087776␟751124305869330542:This field is required!`,Ue=$localize`:␟4aa19de2a2b54cbda39e9c62917b23044c087776␟751124305869330542:This field is required!`,ve=$localize`:␟3e023166c55833d5a13f4143e3dbe372befe1b4e␟8198049509360132735:A silence requires at least one matcher`,[["matcherTpl",""],["formDir","ngForm"],["ps","ngbPopover"],["pe","ngbPopover"],["popStart",""],["popEnd",""],t,o,i,r,p,F,D,x,H,re,pe,be,Pe,he,Ue,ve,[1,"cd-col-form"],["name","form","novalidate","",1,"form",3,"formGroup"],[1,"card"],[1,"card-header"],[4,"ngIf"],[1,"card-body"],[1,"form-group","row"],["for","created-by",1,"cd-col-form-label","required"],[1,"cd-col-form-input"],["formControlName","createdBy","id","created-by","name","created-by","type","text",1,"form-control"],["class","invalid-feedback",4,"ngIf"],["for","comment",1,"cd-col-form-label","required"],["formControlName","comment","id","comment","name","comment","type","text",1,"form-control"],["for","starts-at",1,"cd-col-form-label"],[1,"required"],["formControlName","startsAt","triggers","manual",1,"form-control",3,"click","keypress","ngbPopover"],["for","duration",1,"cd-col-form-label","required"],["formControlName","duration","id","duration","name","duration","type","text",1,"form-control"],["for","ends-at",1,"cd-col-form-label","required"],["formControlName","endsAt","triggers","manual",1,"form-control",3,"click","keypress","ngbPopover"],[1,"cd-col-form-offset"],[3,"ngClass",4,"ngIf"],[4,"ngFor","ngForOf"],[1,"row"],[1,"col-12"],["type","button","id","add-matcher",1,"btn","btn-light","float-end","my-3",3,"click","ngClass"],[3,"cdsIcon","size"],["id","match-state",3,"class",4,"ngIf"],[1,"card-footer"],[1,"text-right"],[3,"submitActionEvent","form","submitText"],[1,"input-group","my-2"],["type","button","ngbTooltip",X,1,"btn","btn-light",3,"click","id"],[1,"cds-info-color",3,"cdsIcon","size"],["type","button","ngbTooltip",Z,1,"btn","btn-light",3,"click","id"],[1,"help-block"],["class","input-group-text",4,"ngIf"],[1,"input-group-text"],[3,"ngbTooltip",4,"ngIf"],["ngbTooltip","Equals",4,"ngIf"],[3,"ngbTooltip"],["ngbTooltip","Equals"],["type","text","disabled","","readonly","",1,"form-control",3,"id","value"],[1,"invalid-feedback"],[3,"ngClass"],[4,"ngTemplateOutlet","ngTemplateOutletContext"],["id","match-state"],[3,"control","hasSeconds"]]},template:function(o,i){if(1&o){const r=e.\u0275\u0275getCurrentView();e.\u0275\u0275template(0,_h,7,9,"ng-template",null,0,e.\u0275\u0275templateRefExtractor),e.\u0275\u0275elementStart(2,"div",22)(3,"form",23,1)(5,"div",24)(6,"div",25)(7,"span"),e.\u0275\u0275i18n(8,6),e.\u0275\u0275pipe(9,"titlecase"),e.\u0275\u0275pipe(10,"upperFirst"),e.\u0275\u0275elementEnd(),e.\u0275\u0275template(11,ch,2,0,"cd-helper",26),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(12,"div",27)(13,"div",28)(14,"label",29),e.\u0275\u0275i18n(15,7),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(16,"div",30),e.\u0275\u0275element(17,"input",31),e.\u0275\u0275template(18,dh,2,0,"span",32),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(19,"div",28)(20,"label",33),e.\u0275\u0275i18n(21,8),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(22,"div",30)(23,"textarea",34),e.\u0275\u0275text(24,"            "),e.\u0275\u0275elementEnd(),e.\u0275\u0275template(25,uh,2,0,"span",32),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(26,"div",28)(27,"label",35)(28,"span",36),e.\u0275\u0275i18n(29,9),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(30,"cd-helper"),e.\u0275\u0275i18n(31,10),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(32,"div",30)(33,"input",37,2),e.\u0275\u0275listener("click",function(){e.\u0275\u0275restoreView(r);const F=e.\u0275\u0275reference(34);return e.\u0275\u0275resetView(F.open())})("keypress",function(){e.\u0275\u0275restoreView(r);const F=e.\u0275\u0275reference(34);return e.\u0275\u0275resetView(F.close())}),e.\u0275\u0275elementEnd(),e.\u0275\u0275template(35,ph,2,0,"span",32),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(36,"div",28)(37,"label",38),e.\u0275\u0275i18n(38,11),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(39,"div",30),e.\u0275\u0275element(40,"input",39),e.\u0275\u0275template(41,mh,2,0,"span",32),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(42,"div",28)(43,"label",40),e.\u0275\u0275i18n(44,12),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(45,"div",30)(46,"input",41,3),e.\u0275\u0275listener("click",function(){e.\u0275\u0275restoreView(r);const F=e.\u0275\u0275reference(47);return e.\u0275\u0275resetView(F.open())})("keypress",function(){e.\u0275\u0275restoreView(r);const F=e.\u0275\u0275reference(47);return e.\u0275\u0275resetView(F.close())}),e.\u0275\u0275elementEnd(),e.\u0275\u0275template(48,fh,2,0,"span",32),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(49,"fieldset")(50,"legend",36),e.\u0275\u0275i18n(51,13),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(52,"div",42),e.\u0275\u0275template(53,Eh,3,4,"h5",43)(54,Ch,2,5,"span",44),e.\u0275\u0275elementStart(55,"div",45)(56,"div",46)(57,"button",47),e.\u0275\u0275listener("click",function(){return e.\u0275\u0275restoreView(r),e.\u0275\u0275resetView(i.showMatcherModal())}),e.\u0275\u0275namespaceSVG(),e.\u0275\u0275element(58,"svg",48),e.\u0275\u0275namespaceHTML(),e.\u0275\u0275elementContainerStart(59),e.\u0275\u0275i18n(60,14),e.\u0275\u0275elementContainerEnd(),e.\u0275\u0275elementEnd()()()(),e.\u0275\u0275template(61,Sh,3,7,"div",49),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(62,"div",50)(63,"div",51)(64,"cd-form-button-panel",52),e.\u0275\u0275pipe(65,"titlecase"),e.\u0275\u0275pipe(66,"upperFirst"),e.\u0275\u0275listener("submitActionEvent",function(){return e.\u0275\u0275restoreView(r),e.\u0275\u0275resetView(i.submit())}),e.\u0275\u0275elementEnd()()()()()(),e.\u0275\u0275template(67,hh,1,2,"ng-template",null,4,e.\u0275\u0275templateRefExtractor)(69,Th,1,2,"ng-template",null,5,e.\u0275\u0275templateRefExtractor)}if(2&o){const r=e.\u0275\u0275reference(4),p=e.\u0275\u0275reference(68),F=e.\u0275\u0275reference(70);e.\u0275\u0275advance(3),e.\u0275\u0275property("formGroup",i.form),e.\u0275\u0275advance(7),e.\u0275\u0275i18nExp(e.\u0275\u0275pipeBind1(9,19,i.action))(e.\u0275\u0275pipeBind1(10,21,i.resource)),e.\u0275\u0275i18nApply(8),e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf",i.edit),e.\u0275\u0275advance(7),e.\u0275\u0275property("ngIf",i.form.showError("createdBy",r,"required")),e.\u0275\u0275advance(7),e.\u0275\u0275property("ngIf",i.form.showError("comment",r,"required")),e.\u0275\u0275advance(8),e.\u0275\u0275property("ngbPopover",p),e.\u0275\u0275advance(2),e.\u0275\u0275property("ngIf",i.form.showError("startsAt",r,"required")),e.\u0275\u0275advance(6),e.\u0275\u0275property("ngIf",i.form.showError("duration",r,"required")),e.\u0275\u0275advance(5),e.\u0275\u0275property("ngbPopover",F),e.\u0275\u0275advance(2),e.\u0275\u0275property("ngIf",i.form.showError("endsAt",r,"required")),e.\u0275\u0275advance(5),e.\u0275\u0275property("ngIf",0===i.matchers.length),e.\u0275\u0275advance(),e.\u0275\u0275property("ngForOf",i.matchers),e.\u0275\u0275advance(3),e.\u0275\u0275property("ngClass",e.\u0275\u0275pureFunction1(27,th,r.submitted&&0===i.matchers.length)),e.\u0275\u0275advance(),e.\u0275\u0275property("cdsIcon",i.icons.add)("size",i.icons.size16),e.\u0275\u0275advance(3),e.\u0275\u0275property("ngIf",i.matchers.length&&i.matcherMatch),e.\u0275\u0275advance(3),e.\u0275\u0275property("form",i.form)("submitText",e.\u0275\u0275pipeBind1(65,23,i.action)+" "+e.\u0275\u0275pipeBind1(66,25,i.resource))}},dependencies:[l.NgClass,l.NgForOf,l.NgIf,l.NgTemplateOutlet,b.m,Qa.P,Q.e,De.S,Me.a,xe.C,ze.E,T.\u0275NgNoValidate,T.DefaultValueAccessor,T.NgControlStatus,T.NgControlStatusGroup,T.FormGroupDirective,T.FormControlName,V.NgbTooltip,V.NgbPopover,L.IconDirective,l.TitleCasePipe,Oe.r],styles:["textarea[_ngcontent-%COMP%]{resize:vertical}"]})}}return n})();var Fh=s(67120);function vh(n,c){1&n&&(e.\u0275\u0275elementStart(0,"cd-alert-panel",3),e.\u0275\u0275i18nStart(1,0),e.\u0275\u0275element(2,"cd-doc",4),e.\u0275\u0275i18nEnd(),e.\u0275\u0275elementEnd())}function Mh(n,c){if(1&n&&e.\u0275\u0275element(0,"cd-table-key-value",9),2&n){const t=e.\u0275\u0275nextContext(3);e.\u0275\u0275property("renderObjects",!0)("hideEmpty",!0)("appendParentKey",!1)("data",t.expandedRow)("customCss",t.customCss)("autoReload",!1)}}function Rh(n,c){1&n&&(e.\u0275\u0275elementContainerStart(0),e.\u0275\u0275template(1,Mh,1,6,"cd-table-key-value",8),e.\u0275\u0275elementContainerEnd())}function Oh(n,c){if(1&n){const t=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"cd-table",5),e.\u0275\u0275listener("setExpandedRow",function(i){e.\u0275\u0275restoreView(t);const r=e.\u0275\u0275nextContext();return e.\u0275\u0275resetView(r.setExpandedRow(i))})("fetchData",function(){e.\u0275\u0275restoreView(t);const i=e.\u0275\u0275nextContext();return e.\u0275\u0275resetView(i.refresh())})("updateSelection",function(i){e.\u0275\u0275restoreView(t);const r=e.\u0275\u0275nextContext();return e.\u0275\u0275resetView(r.updateSelection(i))}),e.\u0275\u0275element(1,"cd-table-actions",6),e.\u0275\u0275template(2,Rh,2,0,"ng-container",7),e.\u0275\u0275elementEnd()}if(2&n){const t=e.\u0275\u0275nextContext();e.\u0275\u0275property("data",t.silences)("columns",t.columns)("forceIdentifier",!0)("customCss",t.customCss)("sorts",t.sorts)("hasDetails",!0),e.\u0275\u0275advance(),e.\u0275\u0275property("permission",t.permission)("selection",t.selection)("tableActions",t.tableActions),e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf",t.expandedRow)}}let bh=(()=>{class n extends ji{constructor(t,o,i,r,p,F,D,x,H,X){super(X),this.authStorageService=t,this.cdDatePipe=o,this.modalService=i,this.notificationService=r,this.urlBuilder=p,this.actionLabels=F,this.succeededLabels=D,this.silenceFormComponent=x,this.silenceMatcher=H,this.silences=[],this.selection=new A.y,this.customCss={"badge badge-danger":"active","badge badge-warning":"pending","badge badge-default":"expired"},this.sorts=[{prop:"endsAt",dir:Fh.v.desc}],this.permission=this.authStorageService.getPermissions().prometheus;const Z=re=>re.first()&&re.first().status&&"expired"===re.first().status.state;this.tableActions=[{permission:"create",icon:g.FI.add,routerLink:()=>this.urlBuilder.getCreate(),canBePrimary:re=>!re.hasSingleSelection,name:this.actionLabels.CREATE},{permission:"create",canBePrimary:re=>re.hasSingleSelection&&Z(re),disable:re=>!re.hasSingleSelection||re.first().cdExecuting||re.first().cdExecuting&&Z(re)||!Z(re),icon:g.FI.copy,routerLink:()=>this.urlBuilder.getRecreate(this.selection.first().id),name:this.actionLabels.RECREATE},{permission:"update",icon:g.FI.edit,canBePrimary:re=>re.hasSingleSelection&&!Z(re),disable:re=>!re.hasSingleSelection||re.first().cdExecuting||re.first().cdExecuting&&!Z(re)||Z(re),routerLink:()=>this.urlBuilder.getEdit(this.selection.first().id),name:this.actionLabels.EDIT},{permission:"delete",icon:g.FI.trash,canBePrimary:re=>re.hasSingleSelection&&!Z(re),disable:re=>!re.hasSingleSelection||re.first().cdExecuting||Z(re),click:()=>this.expireSilence(),name:this.actionLabels.EXPIRE}],this.columns=[{name:$localize`ID`,prop:"id",flexGrow:3},{name:$localize`Alerts Silenced`,prop:"silencedAlerts",flexGrow:3,cellTransformation:O.x.badge},{name:$localize`Created by`,prop:"createdBy",flexGrow:2},{name:$localize`Started`,prop:"startsAt",pipe:this.cdDatePipe},{name:$localize`Updated`,prop:"updatedAt",pipe:this.cdDatePipe},{name:$localize`Ends`,prop:"endsAt",pipe:this.cdDatePipe},{name:$localize`Status`,prop:"status.state",cellTransformation:O.x.classAdding}]}refresh(){this.prometheusService.ifAlertmanagerConfigured(()=>{this.prometheusService.getSilences().subscribe(t=>{this.silences=t;const o=t.filter(i=>"expired"!==i.status.state);this.getAlerts(o)},()=>{this.prometheusService.disableAlertmanagerConfig()})})}updateSelection(t){this.selection=t}getAlerts(t){const o=this.silenceFormComponent.getRules();t.forEach(i=>{i.matchers.forEach(r=>{this.rules=this.silenceMatcher.getMatchedRules(r,o);const p=[];for(const F of this.rules)p.push(F.name);i.silencedAlerts=p})})}expireSilence(){const t=this.selection.first().id,o=$localize`Silence`,i="Prometheus";this.modalRef=this.modalService.show(P.D,{itemDescription:o,itemNames:[t],actionDescription:this.actionLabels.EXPIRE,submitActionObservable:()=>new K.Observable(r=>{this.prometheusService.expireSilence(t).subscribe(()=>{this.notificationService.show(Le._.success,`${this.succeededLabels.EXPIRED} ${o} ${t}`,void 0,void 0,i)},p=>{p.application=i,r.error(p)},()=>{r.complete(),this.refresh()})})})}static{this.\u0275fac=function(o){return new(o||n)(e.\u0275\u0275directiveInject(_.v),e.\u0275\u0275directiveInject(Ht.Q),e.\u0275\u0275directiveInject(Ge.V),e.\u0275\u0275directiveInject(Y.J),e.\u0275\u0275directiveInject(B.E),e.\u0275\u0275directiveInject(f.Ss),e.\u0275\u0275directiveInject(f.Vv),e.\u0275\u0275directiveInject(go),e.\u0275\u0275directiveInject(ba),e.\u0275\u0275directiveInject(fn.o))}}static{this.\u0275cmp=e.\u0275\u0275defineComponent({type:n,selectors:[["cd-silences-list"]],features:[e.\u0275\u0275ProvidersFeature([{provide:B.E,useValue:new B.E("monitoring/silences")},go]),e.\u0275\u0275InheritDefinitionFeature],decls:3,vars:2,consts:()=>{let t;return t=$localize`:␟bce6b6095fe6984a01acc79ebf18720ab71bfce6␟3285601031315357601:To enable Silences, please provide the URL to the API of the Prometheus' Alertmanager as described in the  ${"\ufffd#2\ufffd"}:START_TAG_CD_DOC:${"\ufffd/#2\ufffd"}:CLOSE_TAG_CD_DOC:.`,[t,["type","info",4,"ngIf"],["selectionType","single",3,"data","columns","forceIdentifier","customCss","sorts","hasDetails","setExpandedRow","fetchData","updateSelection",4,"ngIf"],["type","info"],["section","prometheus"],["selectionType","single",3,"setExpandedRow","fetchData","updateSelection","data","columns","forceIdentifier","customCss","sorts","hasDetails"],[1,"table-actions",3,"permission","selection","tableActions"],[4,"ngIf"],[3,"renderObjects","hideEmpty","appendParentKey","data","customCss","autoReload",4,"cdTableDetail"],[3,"renderObjects","hideEmpty","appendParentKey","data","customCss","autoReload"]]},template:function(o,i){1&o&&(e.\u0275\u0275element(0,"cd-prometheus-tabs"),e.\u0275\u0275template(1,vh,3,0,"cd-alert-panel",1)(2,Oh,3,10,"cd-table",2)),2&o&&(e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf",!i.isAlertmanagerConfigured),e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf",i.isAlertmanagerConfigured))},dependencies:[l.NgIf,it.m,fo.C,Ke.O,Pt.i,dt.j,Ct.N,Ra]})}}return n})(),Nh=(()=>{class n{constructor(t){this.http=t,this.url="api/telemetry"}getReport(){return this.http.get(`${this.url}/report`)}enable(t=!0){const o={enable:t};return t&&(o.license_name="sharing-1-0"),this.http.put(`${this.url}`,o)}static{this.\u0275fac=function(o){return new(o||n)(e.\u0275\u0275inject(h.HttpClient))}}static{this.\u0275prov=e.\u0275\u0275defineInjectable({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})(),Na=(()=>{class n{constructor(){this.visible=!1,this.update=new e.EventEmitter}setVisibility(t){this.visible=t,this.update.emit(t)}static{this.\u0275fac=function(o){return new(o||n)}}static{this.\u0275prov=e.\u0275\u0275defineInjectable({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();function Ih(n,c){if(1&n){const t=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"div"),e.\u0275\u0275text(1," The plugin is already "),e.\u0275\u0275elementStart(2,"b"),e.\u0275\u0275text(3,"enabled"),e.\u0275\u0275elementEnd(),e.\u0275\u0275text(4,". Click "),e.\u0275\u0275elementStart(5,"b"),e.\u0275\u0275text(6,"Deactivate"),e.\u0275\u0275elementEnd(),e.\u0275\u0275text(7," to disable it.\xa0 "),e.\u0275\u0275elementStart(8,"button",78),e.\u0275\u0275listener("click",function(){e.\u0275\u0275restoreView(t);const i=e.\u0275\u0275nextContext(3);return e.\u0275\u0275resetView(i.disableModule("The Telemetry module has been disabled successfully."))}),e.\u0275\u0275i18n(9,31),e.\u0275\u0275elementEnd()()}}function Ah(n,c){1&n&&(e.\u0275\u0275elementContainerStart(0),e.\u0275\u0275elementStart(1,"legend"),e.\u0275\u0275elementContainerStart(2),e.\u0275\u0275i18n(3,32),e.\u0275\u0275elementContainerEnd(),e.\u0275\u0275elementStart(4,"cd-helper"),e.\u0275\u0275i18n(5,33),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(6,"div",52)(7,"label",79),e.\u0275\u0275i18n(8,34),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(9,"div",54),e.\u0275\u0275element(10,"input",80),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(11,"div",52)(12,"label",81),e.\u0275\u0275i18n(13,35),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(14,"div",54),e.\u0275\u0275element(15,"input",82),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(16,"div",52)(17,"label",83),e.\u0275\u0275i18n(18,36),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(19,"div",54),e.\u0275\u0275element(20,"input",84),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementContainerEnd())}function Dh(n,c){1&n&&(e.\u0275\u0275elementStart(0,"span",85),e.\u0275\u0275i18n(1,37),e.\u0275\u0275elementEnd())}function yh(n,c){if(1&n){const t=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"div")(1,"form",46,0)(3,"div",47)(4,"div",48),e.\u0275\u0275i18n(5,2),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(6,"div",49)(7,"p"),e.\u0275\u0275i18nStart(8,3),e.\u0275\u0275element(9,"br")(10,"a",50)(11,"br")(12,"br")(13,"b"),e.\u0275\u0275i18nEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275template(14,Ih,10,0,"div",51),e.\u0275\u0275elementStart(15,"legend"),e.\u0275\u0275i18n(16,4),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(17,"p"),e.\u0275\u0275i18n(18,5),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(19,"div",52)(20,"label",53),e.\u0275\u0275elementContainerStart(21),e.\u0275\u0275i18n(22,6),e.\u0275\u0275elementContainerEnd(),e.\u0275\u0275elementStart(23,"cd-helper"),e.\u0275\u0275elementContainerStart(24),e.\u0275\u0275i18n(25,7),e.\u0275\u0275elementContainerEnd(),e.\u0275\u0275elementStart(26,"ul")(27,"li"),e.\u0275\u0275i18n(28,8),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(29,"li"),e.\u0275\u0275i18n(30,9),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(31,"li"),e.\u0275\u0275i18n(32,10),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(33,"li"),e.\u0275\u0275i18n(34,11),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(35,"li"),e.\u0275\u0275i18n(36,12),e.\u0275\u0275elementEnd()()()(),e.\u0275\u0275elementStart(37,"div",54)(38,"div",55),e.\u0275\u0275element(39,"input",56)(40,"label",57),e.\u0275\u0275elementEnd()()(),e.\u0275\u0275elementStart(41,"div",52)(42,"label",58),e.\u0275\u0275elementContainerStart(43),e.\u0275\u0275i18n(44,13),e.\u0275\u0275elementContainerEnd(),e.\u0275\u0275elementStart(45,"cd-helper"),e.\u0275\u0275elementContainerStart(46),e.\u0275\u0275i18n(47,14),e.\u0275\u0275elementContainerEnd(),e.\u0275\u0275elementStart(48,"ul")(49,"li"),e.\u0275\u0275i18n(50,15),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(51,"li"),e.\u0275\u0275i18n(52,16),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(53,"li"),e.\u0275\u0275i18n(54,17),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(55,"li"),e.\u0275\u0275i18n(56,18),e.\u0275\u0275elementEnd()()()(),e.\u0275\u0275elementStart(57,"div",54)(58,"div",55),e.\u0275\u0275element(59,"input",59)(60,"label",60),e.\u0275\u0275elementEnd()()(),e.\u0275\u0275elementStart(61,"div",52)(62,"label",61),e.\u0275\u0275elementContainerStart(63),e.\u0275\u0275i18n(64,19),e.\u0275\u0275elementContainerEnd(),e.\u0275\u0275element(65,"cd-helper",62),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(66,"div",54)(67,"div",55),e.\u0275\u0275element(68,"input",63)(69,"label",64),e.\u0275\u0275elementEnd()()(),e.\u0275\u0275elementStart(70,"div",52)(71,"label",65),e.\u0275\u0275elementContainerStart(72),e.\u0275\u0275i18n(73,20),e.\u0275\u0275elementContainerEnd(),e.\u0275\u0275elementStart(74,"cd-helper"),e.\u0275\u0275elementContainerStart(75),e.\u0275\u0275i18n(76,21),e.\u0275\u0275elementContainerEnd(),e.\u0275\u0275elementStart(77,"ul")(78,"li"),e.\u0275\u0275text(79,"Cluster description"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(80,"li"),e.\u0275\u0275text(81,"Contact email address"),e.\u0275\u0275elementEnd()()()(),e.\u0275\u0275elementStart(82,"div",54)(83,"div",55)(84,"input",66),e.\u0275\u0275listener("click",function(){e.\u0275\u0275restoreView(t);const i=e.\u0275\u0275nextContext(2);return e.\u0275\u0275resetView(i.toggleIdent())}),e.\u0275\u0275elementEnd(),e.\u0275\u0275element(85,"label",67),e.\u0275\u0275elementEnd()()(),e.\u0275\u0275elementStart(86,"div",52)(87,"label",68),e.\u0275\u0275elementContainerStart(88),e.\u0275\u0275i18n(89,22),e.\u0275\u0275elementContainerEnd(),e.\u0275\u0275elementStart(90,"cd-helper"),e.\u0275\u0275elementContainerStart(91),e.\u0275\u0275i18n(92,23),e.\u0275\u0275elementContainerEnd(),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(93,"div",54)(94,"div",55),e.\u0275\u0275element(95,"input",69)(96,"label",70),e.\u0275\u0275elementEnd()()(),e.\u0275\u0275template(97,Ah,21,0,"ng-container",51),e.\u0275\u0275elementStart(98,"legend"),e.\u0275\u0275i18n(99,24),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(100,"div",52)(101,"label",71),e.\u0275\u0275elementContainerStart(102),e.\u0275\u0275i18n(103,25),e.\u0275\u0275elementContainerEnd(),e.\u0275\u0275elementStart(104,"cd-helper"),e.\u0275\u0275i18n(105,26),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(106,"div",54),e.\u0275\u0275element(107,"input",72),e.\u0275\u0275template(108,Dh,2,0,"span",73),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(109,"div",52)(110,"label",74),e.\u0275\u0275elementContainerStart(111),e.\u0275\u0275i18n(112,27),e.\u0275\u0275elementContainerEnd(),e.\u0275\u0275elementStart(113,"cd-helper")(114,"p"),e.\u0275\u0275i18n(115,28),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(116,"p"),e.\u0275\u0275i18n(117,29),e.\u0275\u0275elementEnd()()(),e.\u0275\u0275elementStart(118,"div",54),e.\u0275\u0275element(119,"input",75),e.\u0275\u0275elementEnd()(),e.\u0275\u0275element(120,"br"),e.\u0275\u0275elementStart(121,"p"),e.\u0275\u0275i18nStart(122,30),e.\u0275\u0275element(123,"b"),e.\u0275\u0275i18nEnd(),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(124,"div",76)(125,"div",77)(126,"button",78),e.\u0275\u0275listener("click",function(){e.\u0275\u0275restoreView(t);const i=e.\u0275\u0275nextContext(2);return e.\u0275\u0275resetView(i.next())}),e.\u0275\u0275elementContainerStart(127),e.\u0275\u0275text(128),e.\u0275\u0275elementContainerEnd(),e.\u0275\u0275elementEnd()()()()()()}if(2&n){const t=e.\u0275\u0275reference(2),o=e.\u0275\u0275nextContext(2);e.\u0275\u0275advance(),e.\u0275\u0275property("formGroup",o.configForm),e.\u0275\u0275advance(4),e.\u0275\u0275i18nExp(o.step),e.\u0275\u0275i18nApply(5),e.\u0275\u0275advance(8),e.\u0275\u0275i18nExp(o.sendToUrl)(o.sendToDeviceUrl),e.\u0275\u0275i18nApply(8),e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf",o.moduleEnabled),e.\u0275\u0275advance(83),e.\u0275\u0275property("ngIf",o.showContactInfo),e.\u0275\u0275advance(11),e.\u0275\u0275property("ngIf",o.configForm.showError("interval",t,"min")),e.\u0275\u0275advance(20),e.\u0275\u0275textInterpolate(o.actionLabels.NEXT)}}function Lh(n,c){if(1&n){const t=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"div")(1,"form",86,1)(3,"div",47)(4,"div",48),e.\u0275\u0275i18n(5,38),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(6,"div",49)(7,"div",52)(8,"label",87),e.\u0275\u0275i18nStart(9,39),e.\u0275\u0275element(10,"cd-helper",88),e.\u0275\u0275i18nEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(11,"div",54),e.\u0275\u0275element(12,"input",89),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(13,"div",52)(14,"label",90),e.\u0275\u0275i18nStart(15,40),e.\u0275\u0275elementStart(16,"cd-helper",91),e.\u0275\u0275element(17,"em"),e.\u0275\u0275elementEnd(),e.\u0275\u0275i18nEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(18,"div",54),e.\u0275\u0275element(19,"textarea",92),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(20,"div",52)(21,"div",93)(22,"div",94),e.\u0275\u0275element(23,"cd-download-button",95)(24,"cd-copy-2-clipboard-button",96),e.\u0275\u0275elementEnd()()(),e.\u0275\u0275elementStart(25,"div",52)(26,"div",93)(27,"div",55),e.\u0275\u0275element(28,"input",97),e.\u0275\u0275elementStart(29,"label",98),e.\u0275\u0275i18nStart(30,41),e.\u0275\u0275element(31,"a",99),e.\u0275\u0275i18nEnd(),e.\u0275\u0275elementEnd()()()()(),e.\u0275\u0275elementStart(32,"div",76)(33,"div",77)(34,"cd-form-button-panel",100),e.\u0275\u0275listener("submitActionEvent",function(){e.\u0275\u0275restoreView(t);const i=e.\u0275\u0275nextContext(2);return e.\u0275\u0275resetView(i.onSubmit())})("backActionEvent",function(){e.\u0275\u0275restoreView(t);const i=e.\u0275\u0275nextContext(2);return e.\u0275\u0275resetView(i.back())}),e.\u0275\u0275elementEnd()()()()()()}if(2&n){const t=e.\u0275\u0275nextContext(2);e.\u0275\u0275advance(),e.\u0275\u0275property("formGroup",t.previewForm),e.\u0275\u0275advance(4),e.\u0275\u0275i18nExp(t.step),e.\u0275\u0275i18nApply(5),e.\u0275\u0275advance(18),e.\u0275\u0275property("objectItem",t.report),e.\u0275\u0275advance(11),e.\u0275\u0275property("form",t.previewForm)("submitText",t.actionLabels.UPDATE)("cancelText",t.actionLabels.BACK)}}function $h(n,c){if(1&n&&(e.\u0275\u0275elementStart(0,"div",43),e.\u0275\u0275elementContainerStart(1,44),e.\u0275\u0275template(2,yh,129,8,"div",45)(3,Lh,35,6,"div",45),e.\u0275\u0275elementContainerEnd(),e.\u0275\u0275elementEnd()),2&n){const t=e.\u0275\u0275nextContext();e.\u0275\u0275advance(),e.\u0275\u0275property("ngSwitch",t.step),e.\u0275\u0275advance(),e.\u0275\u0275property("ngSwitchCase",1),e.\u0275\u0275advance(),e.\u0275\u0275property("ngSwitchCase",2)}}let xh=(()=>{class n extends Te.g{constructor(t,o,i,r,p,F,D){super(),this.actionLabels=t,this.formBuilder=o,this.mgrModuleService=i,this.notificationService=r,this.router=p,this.telemetryService=F,this.telemetryNotificationService=D,this.licenseAgrmt=!1,this.options={},this.newConfig={},this.configResp={},this.requiredFields=["channel_basic","channel_crash","channel_device","channel_ident","channel_perf","interval","proxy","contact","description","organization"],this.contactInfofields=["contact","description","organization"],this.report=void 0,this.reportId=void 0,this.sendToUrl="",this.sendToDeviceUrl="",this.step=1}ngOnInit(){const t=[this.mgrModuleService.getOptions("telemetry"),this.mgrModuleService.getConfig("telemetry")];(0,K.forkJoin)(t).subscribe(o=>{const i=o[1];this.moduleEnabled=i.enabled,this.sendToUrl=i.url,this.sendToDeviceUrl=i.device_url,this.showContactInfo=i.channel_ident,this.options=E().pick(o[0],this.requiredFields),this.configResp=E().pick(i,this.requiredFields),this.createConfigForm(),this.configForm.setValue(this.configResp),this.loadingReady()},o=>{this.loadingError()})}createConfigForm(){const t={};E().forEach(Object.values(this.options),o=>{t[o.name]=[o.default_value,this.getValidators(o)]}),this.configForm=this.formBuilder.group(t)}replacer(t,o){if(("ranges"===t||"values"===t)&&Array.isArray(o)){const i=[];for(let r=0;r<o.length;r++)i.push(JSON.stringify(o[r]));return i}return o}replacerTest(t){return JSON.stringify(t,this.replacer,2)}formatReport(){let t={};t=JSON.parse(JSON.stringify(this.report));const o=["perf_counters","stats_per_pool","stats_per_pg","io_rate","osd_perf_histograms","mempool","heap_stats","rocksdb_stats"];for(let i=0;i<o.length;i++){const r=o[i];r in t.report&&delete t.report[r]}return JSON.stringify(t,null,2)}formatReportTest(t){let o={};o=JSON.parse(JSON.stringify(t));const i=["perf_counters","stats_per_pool","stats_per_pg","io_rate","osd_perf_histograms","mempool","heap_stats","rocksdb_stats"];for(let r=0;r<i.length;r++){const p=i[r];p in o&&delete o[p]}return JSON.stringify(o,null,2)}createPreviewForm(){const t={report:this.formatReport(),reportId:this.reportId,licenseAgrmt:[this.licenseAgrmt,T.Validators.requiredTrue]};this.previewForm=this.formBuilder.group(t)}getValidators(t){const o=[];switch(t.type){case"int":o.push(T.Validators.required);break;case"str":E().isNumber(t.min)&&o.push(T.Validators.minLength(t.min)),E().isNumber(t.max)&&o.push(T.Validators.maxLength(t.max))}return o}updateReportFromConfig(t={}){const o=this.report.report.channels_available,i=[];for(const r of o)t[`channel_${r}`]&&i.push(r);this.report.report.channels=i;for(const r of this.contactInfofields)this.report.report[r]=t[r]}getReport(){this.loadingStart(),this.telemetryService.getReport().subscribe(t=>{this.report=t,this.reportId=t.report.report_id,this.updateReportFromConfig(this.newConfig),this.createPreviewForm(),this.loadingReady(),this.step++},t=>{this.loadingError()})}toggleIdent(){this.showContactInfo=!this.showContactInfo}buildReport(){this.newConfig={};for(const t of Object.values(this.options)){const o=this.configForm.get(t.name);if(!o.valid)return void this.configForm.setErrors({cdSubmitButton:!0});this.newConfig[t.name]=o.value}if(!this.newConfig.channel_ident)for(const t of this.contactInfofields)this.newConfig[t]="";this.getReport()}disableModule(t=null,o=null){this.telemetryService.enable(!1).subscribe(()=>{this.telemetryNotificationService.setVisibility(!0),t&&this.notificationService.show(Le._.success,t),o?o():this.router.navigate([""])})}next(){this.buildReport()}back(){this.step--}getChangedConfig(){const t={};return E().forEach(this.requiredFields,o=>{E().isEqual(this.configResp[o],this.newConfig[o])||(t[o]=this.newConfig[o])}),t}onSubmit(){const t=this.getChangedConfig(),o=[this.telemetryService.enable(),this.mgrModuleService.updateConfig("telemetry",t)];(0,K.forkJoin)(o).subscribe(()=>{this.telemetryNotificationService.setVisibility(!1),this.notificationService.show(Le._.success,$localize`The Telemetry module has been configured and activated successfully.`)},()=>{this.telemetryNotificationService.setVisibility(!1),this.notificationService.show(Le._.error,$localize`An Error occurred while updating the Telemetry module configuration.\
             Please Try again`),this.previewForm.setErrors({cdSubmitButton:!0})},()=>{this.newConfig={},this.router.navigate([""])})}static{this.\u0275fac=function(o){return new(o||n)(e.\u0275\u0275directiveInject(f.Ss),e.\u0275\u0275directiveInject(At.$),e.\u0275\u0275directiveInject(Nn.a),e.\u0275\u0275directiveInject(Y.J),e.\u0275\u0275directiveInject(m.Router),e.\u0275\u0275directiveInject(Nh),e.\u0275\u0275directiveInject(Na))}}static{this.\u0275cmp=e.\u0275\u0275defineComponent({type:n,selectors:[["cd-telemetry"]],features:[e.\u0275\u0275InheritDefinitionFeature],decls:1,vars:1,consts:()=>{let t,o,i,r,p,F,D,x,H,X,Z,re,pe,be,Pe,he,Ue,ve,Xe,_t,ft,we,qe,Rt,Ot,Je,Dt,et,sn,rn,ln,Bt,_n,cn,Qe,In,An,Dn,yn,Ln,Fn,$n,xn,Un,wn;return t=$localize`:␟d4bc37bcbbcea881a269b4063b3d93dec8ee67d5␟6793153369279741287:Includes information about device metrics like anonymized SMART metrics.`,o=$localize`:␟013f48ee777d2e53e2bcba36e1a99fcbb7ef8cb6␟2328356528618262112:Step ${"\ufffd0\ufffd"}:INTERPOLATION: of 2: Telemetry report configuration`,i=$localize`:␟a09b723a928774bff707973c99999dcf3d84a349␟233862545252579563:The telemetry module sends anonymous data about this Ceph cluster back to the Ceph developers to help understand how Ceph is used and what problems users may be experiencing.${"[\ufffd#9\ufffd\ufffd/#9\ufffd|\ufffd#11\ufffd\ufffd/#11\ufffd|\ufffd#12\ufffd\ufffd/#12\ufffd]"}:LINE_BREAK: This data is visualized on ${"\ufffd#10\ufffd"}:START_LINK:public dashboards${"\ufffd/#10\ufffd"}:CLOSE_LINK: that allow the community to quickly see summary statistics on how many clusters are reporting, their total capacity and OSD count, and version distribution trends.${"[\ufffd#9\ufffd\ufffd/#9\ufffd|\ufffd#11\ufffd\ufffd/#11\ufffd|\ufffd#12\ufffd\ufffd/#12\ufffd]"}:LINE_BREAK:${"[\ufffd#9\ufffd\ufffd/#9\ufffd|\ufffd#11\ufffd\ufffd/#11\ufffd|\ufffd#12\ufffd\ufffd/#12\ufffd]"}:LINE_BREAK: The data being reported does ${"\ufffd#13\ufffd"}:START_BOLD_TEXT:not${"\ufffd/#13\ufffd"}:CLOSE_BOLD_TEXT: contain any sensitive data like pool names, object names, object contents, hostnames, or device serial numbers. It contains counters and statistics on how the cluster has been deployed, the version of Ceph, the distribution of the hosts and other parameters which help the project to gain a better understanding of the way Ceph is used. The data is sent secured to ${"\ufffd0\ufffd"}:INTERPOLATION: and ${"\ufffd1\ufffd"}:INTERPOLATION_1: (device report).`,i=e.\u0275\u0275i18nPostprocess(i),r=$localize`:␟807cf11e6ac1cde912496f764c176bdfdd6b7e19␟8181077408762380407:Channels`,p=$localize`:␟e25b17c0b4ef361b6a05aaec2bbd2b7e86680458␟2095911212141385872:The telemetry report is broken down into several "channels", each with a different type of information that can be configured below.`,F=$localize`:␟380ab580741bec31346978e7cab8062d6970408d␟8643289769990675407:Basic`,D=$localize`:␟dd898057f0add35258a5fb5c90d792c5e2147452␟2461334957566205099:Includes basic information about the cluster:`,x=$localize`:␟da213e9ba8a86b453d04f794f58c9803f7b062b1␟1264253237213565088:Capacity of the cluster`,H=$localize`:␟72d5fe31d9e13239bdd223d0bbd289a1b1903e86␟4640478341399959545:Number of monitors, managers, OSDs, MDSs, object gateways, or other daemons`,X=$localize`:␟1a3eb7834b4baf412f8863d14883972897d9acb7␟2379293336766790608:Software version currently being used`,Z=$localize`:␟34881ae65482ffa74ccb4043fb2622e48ed146d5␟8373569334930627819:Number and types of RADOS pools and CephFS file systems`,re=$localize`:␟696f8f5ea7a9cf6125b9a3af160981fda363552d␟7599661511944029087:Names of configuration options that have been changed from their default (but not their values)`,pe=$localize`:␟34292940316300d09abe5e675d452fae199f626b␟2270204257025474297:Crash`,be=$localize`:␟7620e332b7dea1e832158e85847255eb4d9e6bbc␟2827413062128067838:Includes information about daemon crashes:`,Pe=$localize`:␟c1aa4306a6e840fe35b70c9b07d38ce85f281cfa␟1395984943987054584:Type of daemon`,he=$localize`:␟f4f2cbedb4b14b68bc9f390e3391445c1b6682da␟2602501653412734093:Version of the daemon`,Ue=$localize`:␟2d62603cdc75645ea873fc8f7f69c32b5f4a2aa9␟6844490652554412096:Operating system (OS distribution, kernel version)`,ve=$localize`:␟84facf84a73631d66e9a4e0bc1c40097b9d14742␟8860979684593515849:Stack trace identifying where in the Ceph code the crash occurred`,Xe=$localize`:␟ea64d4177bd648e1a20c92669e6857762b811d8c␟7292902857194439444:Device`,_t=$localize`:␟37de70e8ba539187d0171a38dad2a63c323096eb␟318013158029874600:Ident`,ft=$localize`:␟7b126025440f118cd02ce78362d61a5001c27617␟1178238425295883028:Includes user-provided identifying information about the cluster:`,we=$localize`:␟80db09210a3fc15db703eca80b778e3584e8a388␟3927132423423535672:Perf`,qe=$localize`:␟af795a33889f2404ed9d87e52e7e4a034ba1110d␟5859285416449471463:Includes various performance metrics of a cluster.`,Rt=$localize`:␟339878da255ab55447c43afef8d9b2f9753bf5f6␟8360107325291301836:Advanced Settings`,Ot=$localize`:␟7d49310535abb3792d8c9c991dd0d990d73d29af␟3350676806684249188:Interval`,Je=$localize`:␟91317562c9dfefbdd5973faf11d217f571d073c7␟5162976593582389281:The module compiles and sends a new report every 24 hours by default. You can adjust this interval by setting a different number of hours.`,Dt=$localize`:␟a92e437fac14b4010c4515b31c55a311d026a57f␟3719584865242260706:Proxy`,et=$localize`:␟6de03357358c7eff62aca486508bb5c2046e0669␟8035895215155992042:If the cluster cannot directly connect to the configured telemetry endpoint (default telemetry.ceph.com), you can configure a HTTP/HTTPS proxy server by e.g. adding https://10.0.0.1:8080`,sn=$localize`:␟5687a733af051bfca97dbffba282e39fbb9b8c8f␟8996428303774913048:You can also include a user:pass if needed e.g. https://ceph:telemetry@10.0.0.1:8080`,rn=$localize`:␟4e6430c68df43ea65e4145972b01186fba40f26a␟1547062305025079259:${"\ufffd#123\ufffd"}:START_BOLD_TEXT:Note:${"\ufffd/#123\ufffd"}:CLOSE_BOLD_TEXT: By clicking 'Next' you will first see a preview of the report content before you can activate the automatic submission of your data.`,ln=$localize`:␟c95505b5a74151a0c235b19b9c41db7983205ba7␟5322473252816589112:Deactivate`,Bt=$localize`:␟632cac1e025b77b2d77fed16ad22a410ddacab9e␟4835857533517480308:My first Ceph cluster`,_n=$localize`:␟e8fda44e2c5bb51860f26cd9c2730f9ae1db9869␟5243233792859835904:Organization name`,cn=$localize`:␟62c6e9aecff7e04ef7d36fdee4ab4fb285a7a2b5␟4090160044021470261:Contact Information`,Qe=$localize`:␟61ba9a84051b3f470122e59cf5a746552b378269␟4455236519027994893:Submitting any contact information is completely optional and disabled by default.`,In=$localize`:␟34746fb1c7f3d2194d99652bdff89e6e14c9c4f4␟7922989125096435449:Contact`,An=$localize`:␟eec715de352a6b114713b30b640d319fa78207a0␟4902817035128594900:Description`,Dn=$localize`:␟f3a58c8a81b9ffda26a154eae25a422c9f7de37b␟3076687427621376223:Organization`,yn=$localize`:␟a12cf4cf71ef3161a024382ab542cf0eba094504␟8651761196575627468:The entered value is too low! It must be greater or equal to 8.`,Ln=$localize`:␟4060e92658964e356a0992a900c8aa811c2cfec0␟7563744243826344144:A randomized UUID to identify a particular cluster over the course of several telemetry reports.`,Fn=$localize`:␟3de417f739c336284c42904552e81e8d852daecc␟5142467587507961588:The actual telemetry data that will be submitted.`,$n=$localize`:␟8d8d878f8d60905e1306c225716305a331b784c8␟2030655936054404301:Step ${"\ufffd0\ufffd"}:INTERPOLATION: of 2: Telemetry report preview`,xn=$localize`:␟e23d0064b6474f309c74e1c928cc0920f479d9a5␟3255415445858439645:Report ID ${"\ufffd#10\ufffd"}:START_TAG_CD_HELPER:${"\ufffd/#10\ufffd"}:CLOSE_TAG_CD_HELPER:`,Un=$localize`:␟56b6318f2651cafe065d000db84917f7f915baf0␟5613894435191026408:Report preview ${"\ufffd#16\ufffd"}:START_TAG_CD_HELPER:${"\ufffd#17\ufffd"}:START_EMPHASISED_TEXT:Note: Please select 'Download' to view the full report, including metrics from the perf channel.${"\ufffd/#17\ufffd"}:CLOSE_EMPHASISED_TEXT:${"\ufffd/#16\ufffd"}:CLOSE_TAG_CD_HELPER:`,wn=$localize`:␟933a2b6f087670ff42c95876e6ecfb2faa3e3867␟8421869848223160586:I agree to my telemetry data being submitted under the ${"\ufffd#31\ufffd"}:START_LINK:Community Data License Agreement - Sharing - Version 1.0${"\ufffd/#31\ufffd"}:CLOSE_LINK:`,[["formDir","ngForm"],["frm","ngForm"],o,i,r,p,F,D,x,H,X,Z,re,pe,be,Pe,he,Ue,ve,Xe,_t,ft,we,qe,Rt,Ot,Je,Dt,et,sn,rn,ln,cn,Qe,In,An,Dn,yn,$n,xn,Un,wn,["class","cd-col-form",4,"cdFormLoading"],[1,"cd-col-form"],[3,"ngSwitch"],[4,"ngSwitchCase"],["name","form","novalidate","",3,"formGroup"],[1,"card"],[1,"card-header"],[1,"card-body"],["href","https://telemetry-public.ceph.com/"],[4,"ngIf"],[1,"form-group","row"],["for","channel_basic",1,"cd-col-form-label"],[1,"cd-col-form-input"],[1,"custom-control","custom-checkbox"],["type","checkbox","id","channel_basic","formControlName","channel_basic",1,"custom-control-input"],["for","channel_basic",1,"custom-control-label"],["for","channel_crash",1,"cd-col-form-label"],["type","checkbox","id","channel_crash","formControlName","channel_crash",1,"custom-control-input"],["for","channel_crash",1,"custom-control-label"],["for","channel_device",1,"cd-col-form-label"],["html",t],["type","checkbox","id","channel_device","formControlName","channel_device",1,"custom-control-input"],["for","channel_device",1,"custom-control-label"],["for","channel_ident",1,"cd-col-form-label"],["type","checkbox","id","channel_ident","formControlName","channel_ident",1,"custom-control-input",3,"click"],["for","channel_ident",1,"custom-control-label"],["for","channel_perf",1,"cd-col-form-label"],["type","checkbox","id","channel_perf","formControlName","channel_perf",1,"custom-control-input"],["for","channel_perf",1,"custom-control-label"],["for","interval",1,"cd-col-form-label"],["id","interval","type","number","formControlName","interval","min","8",1,"form-control"],["class","invalid-feedback",4,"ngIf"],["for","proxy",1,"cd-col-form-label"],["id","proxy","type","text","formControlName","proxy","placeholder","https://10.0.0.1:8080",1,"form-control"],[1,"card-footer"],[1,"button-group","text-right"],["type","button",1,"btn","btn-light",3,"click"],["for","contact",1,"cd-col-form-label"],["id","contact","type","text","formControlName","contact","placeholder","Example User <user@example.com>",1,"form-control"],["for","description",1,"cd-col-form-label"],["id","description","type","text","formControlName","description","placeholder",Bt,1,"form-control"],["for","organization",1,"cd-col-form-label"],["id","organization","type","text","formControlName","organization","placeholder",_n,1,"form-control"],[1,"invalid-feedback"],["name","previewForm","novalidate","",3,"formGroup"],["for","reportId",1,"cd-col-form-label"],["html",Ln],["type","text","id","reportId","formControlName","reportId","readonly","",1,"form-control"],["for","report",1,"cd-col-form-label"],["html",Fn],["id","report","formControlName","report","rows","15","readonly","",1,"form-control"],[1,"cd-col-form-offset"],["role","group",1,"btn-group"],["fileName","telemetry_report",3,"objectItem"],["source","report"],["type","checkbox","id","licenseAgrmt","name","licenseAgrmt","formControlName","licenseAgrmt",1,"custom-control-input"],["for","licenseAgrmt",1,"custom-control-label"],["href","https://cdla.io/sharing-1-0/"],[3,"submitActionEvent","backActionEvent","form","submitText","cancelText"]]},template:function(o,i){1&o&&e.\u0275\u0275template(0,$h,4,3,"div",42),2&o&&e.\u0275\u0275property("cdFormLoading",i.loading)},dependencies:[l.NgIf,l.NgSwitch,l.NgSwitchCase,b.m,me.N,Ts,Q.e,rt.G,De.S,Me.a,xe.C,ze.E,T.\u0275NgNoValidate,T.DefaultValueAccessor,T.NumberValueAccessor,T.CheckboxControlValueAccessor,T.NgControlStatus,T.NgControlStatusGroup,T.MinValidator,T.FormGroupDirective,T.FormControlName]})}}return n})();var $o=s(40988),xo=s(61065);function Uh(n,c){if(1&n&&(e.\u0275\u0275elementStart(0,"option",7),e.\u0275\u0275text(1),e.\u0275\u0275elementEnd()),2&n){const t=c.$implicit,o=e.\u0275\u0275nextContext();e.\u0275\u0275property("value",o.intervalList[t]),e.\u0275\u0275advance(),e.\u0275\u0275textInterpolate(t)}}let wh=(()=>{class n{constructor(t){this.refreshIntervalService=t,this.intervalList={"5 s":5e3,"10 s":1e4,"15 s":15e3,"30 s":3e4,"1 min":6e4,"3 min":18e4,"5 min":3e5},this.intervalKeys=Object.keys(this.intervalList)}ngOnInit(){this.selectedInterval=this.refreshIntervalService.getRefreshInterval()||5e3}changeRefreshInterval(t){this.refreshIntervalService.setRefreshInterval(t)}static{this.\u0275fac=function(o){return new(o||n)(e.\u0275\u0275directiveInject(xo.s))}}static{this.\u0275cmp=e.\u0275\u0275defineComponent({type:n,selectors:[["cd-refresh-selector"]],decls:8,vars:2,consts:()=>{let t;return t=$localize`:␟c8d1785038d461ec66b5799db21864182b35900a␟1102717806459547726:Refresh`,[t,[1,"container-fluid"],[1,"row"],[1,"col-sm-1","d-flex","float-end"],["for","refreshInterval",1,"col-form-label","my-0","mx-2","float-end"],["id","refreshInterval","name","refreshInterval",1,"form-select","float-end",3,"change","ngModelChange","ngModel"],[3,"value",4,"ngFor","ngForOf"],[3,"value"]]},template:function(o,i){1&o&&(e.\u0275\u0275elementStart(0,"div",1)(1,"div",2)(2,"form")(3,"div",3)(4,"label",4),e.\u0275\u0275i18n(5,0),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(6,"select",5),e.\u0275\u0275listener("change",function(p){return i.changeRefreshInterval(p.target.value)}),e.\u0275\u0275twoWayListener("ngModelChange",function(p){return e.\u0275\u0275twoWayBindingSet(i.selectedInterval,p)||(i.selectedInterval=p),p}),e.\u0275\u0275template(7,Uh,2,2,"option",6),e.\u0275\u0275elementEnd()()()()()),2&o&&(e.\u0275\u0275advance(6),e.\u0275\u0275twoWayProperty("ngModel",i.selectedInterval),e.\u0275\u0275advance(),e.\u0275\u0275property("ngForOf",i.intervalKeys))},dependencies:[l.NgForOf,T.\u0275NgNoValidate,T.NgSelectOption,T.\u0275NgSelectMultipleOption,T.SelectControlValueAccessor,T.NgControlStatus,T.NgControlStatusGroup,T.NgModel,T.NgForm,De.S,L.Option]})}}return n})();var Ut=s(67344),on=s(63882),Gh=s(62739);let Hh=(()=>{class n{constructor(t){this.http=t,this.baseURL="api/hardware"}getSummary(t=[]){return this.http.get(`${this.baseURL}/summary`,{params:{categories:t},headers:{Accept:"application/vnd.ceph.api.v0.1+json"}})}static{this.\u0275fac=function(o){return new(o||n)(e.\u0275\u0275inject(h.HttpClient))}}static{this.\u0275prov=e.\u0275\u0275defineInjectable({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();var Uo=function(n){return n.HEALTH_ERR="health-color-error",n.HEALTH_WARN="health-color-warning",n.HEALTH_OK="health-color-healthy",n}(Uo||{}),oo=s(35855);let Wi=(()=>{class n{constructor(t){this.cssHelper=t}transform(t){return Object.keys(Uo).includes(t)?{color:this.cssHelper.propertyValue(Uo[t])}:null}static{this.\u0275fac=function(o){return new(o||n)(e.\u0275\u0275directiveInject(oo._,16))}}static{this.\u0275pipe=e.\u0275\u0275definePipe({name:"healthColor",type:n,pure:!0})}}return n})();const Vh=n=>[n];function Bh(n,c){1&n&&e.\u0275\u0275elementContainer(0)}function zh(n,c){if(1&n&&(e.\u0275\u0275elementStart(0,"div"),e.\u0275\u0275text(1),e.\u0275\u0275elementEnd()),2&n){const t=c.$implicit,o=c.last;e.\u0275\u0275advance(),e.\u0275\u0275textInterpolate2(" ",t," ",o?"":", "," ")}}function Xh(n,c){if(1&n&&(e.\u0275\u0275elementStart(0,"div",6)(1,"cd-help-text")(2,"b"),e.\u0275\u0275text(3,"Failed Daemons:"),e.\u0275\u0275elementEnd(),e.\u0275\u0275template(4,zh,2,2,"div",3),e.\u0275\u0275elementEnd()()),2&n){const t=e.\u0275\u0275nextContext().$implicit,o=e.\u0275\u0275nextContext();e.\u0275\u0275advance(4),e.\u0275\u0275property("ngForOf",o.getFailedDaemons(t.detail))}}function kh(n,c){if(1&n&&(e.\u0275\u0275elementStart(0,"div")(1,"cd-help-text"),e.\u0275\u0275text(2),e.\u0275\u0275elementEnd()()),2&n){const t=c.$implicit;e.\u0275\u0275advance(2),e.\u0275\u0275textInterpolate(null==t?null:t.message)}}function jh(n,c){if(1&n&&(e.\u0275\u0275elementStart(0,"li")(1,"span",4),e.\u0275\u0275pipe(2,"healthColor"),e.\u0275\u0275text(3),e.\u0275\u0275elementEnd(),e.\u0275\u0275text(4),e.\u0275\u0275element(5,"br"),e.\u0275\u0275template(6,Xh,5,1,"div",5)(7,kh,3,1,"div",3),e.\u0275\u0275elementEnd()),2&n){const t=c.$implicit;e.\u0275\u0275advance(),e.\u0275\u0275classProp("health-warn-description","HEALTH_WARN"===t.severity),e.\u0275\u0275property("ngStyle",e.\u0275\u0275pipeBind1(2,7,t.severity)),e.\u0275\u0275advance(2),e.\u0275\u0275textInterpolate1(" ",t.type,""),e.\u0275\u0275advance(),e.\u0275\u0275textInterpolate1(": ",t.summary.message," "),e.\u0275\u0275advance(2),e.\u0275\u0275property("ngIf","CEPHADM_FAILED_DAEMON"===t.type),e.\u0275\u0275advance(),e.\u0275\u0275property("ngForOf",null==t?null:t.detail)}}function Wh(n,c){if(1&n&&(e.\u0275\u0275elementContainerStart(0),e.\u0275\u0275elementStart(1,"p",8),e.\u0275\u0275i18nStart(2,1),e.\u0275\u0275element(3,"i",9)(4,"a",10),e.\u0275\u0275i18nEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementContainerEnd()),2&n){const t=e.\u0275\u0275nextContext(2);e.\u0275\u0275advance(3),e.\u0275\u0275property("ngClass",e.\u0275\u0275pureFunction1(1,Vh,t.icons.infoCircle))}}function Kh(n,c){if(1&n&&e.\u0275\u0275template(0,Wh,5,3,"ng-container",7),2&n){const t=e.\u0275\u0275nextContext();e.\u0275\u0275property("ngIf",t.permissions.log.read)}}let Ia=(()=>{class n{constructor(t){this.authStorageService=t,this.icons=g.FI,this.permissions=this.authStorageService.getPermissions()}getFailedDaemons(t){return t.map(o=>o.message.split("daemon ")?.[1].split(" on ")[0])}static{this.\u0275fac=function(o){return new(o||n)(e.\u0275\u0275directiveInject(_.v))}}static{this.\u0275cmp=e.\u0275\u0275defineComponent({type:n,selectors:[["cd-health-checks"]],inputs:{healthData:"healthData"},decls:5,vars:2,consts:()=>{let t;return t=$localize`:␟44ecac93d67c6a671198091c2270354f80322327␟7900217280460384102:${"\ufffd#3\ufffd"}:START_ITALIC_TEXT:${"\ufffd/#3\ufffd"}:CLOSE_ITALIC_TEXT: See ${"\ufffd#4\ufffd"}:START_LINK:Logs${"\ufffd/#4\ufffd"}:CLOSE_LINK: for more details.`,[["logsLink",""],t,[4,"ngTemplateOutlet"],[4,"ngFor","ngForOf"],[3,"ngStyle"],["class","failed-daemons",4,"ngIf"],[1,"failed-daemons"],[4,"ngIf"],[1,"logs-link"],[3,"ngClass"],["routerLink","/logs"]]},template:function(o,i){if(1&o&&(e.\u0275\u0275template(0,Bh,1,0,"ng-container",2),e.\u0275\u0275elementStart(1,"ul"),e.\u0275\u0275template(2,jh,8,9,"li",3),e.\u0275\u0275elementEnd(),e.\u0275\u0275template(3,Kh,1,1,"ng-template",null,0,e.\u0275\u0275templateRefExtractor)),2&o){const r=e.\u0275\u0275reference(4);e.\u0275\u0275property("ngTemplateOutlet",r),e.\u0275\u0275advance(2),e.\u0275\u0275property("ngForOf",i.healthData)}},dependencies:[l.NgClass,l.NgForOf,l.NgIf,l.NgTemplateOutlet,l.NgStyle,Ye.O,Wi]})}}return n})();var Aa=s(29947),Qh=s(78845),Yh=s(83133);const Jh=["class","component"],Zh=n=>({required:n});function qh(n,c){1&n&&(e.\u0275\u0275elementStart(0,"cd-alert-panel",20),e.\u0275\u0275i18n(1,2),e.\u0275\u0275elementEnd())}function eT(n,c){1&n&&(e.\u0275\u0275elementStart(0,"option",29),e.\u0275\u0275i18n(1,4),e.\u0275\u0275elementEnd())}function tT(n,c){1&n&&(e.\u0275\u0275elementStart(0,"option",30),e.\u0275\u0275i18n(1,5),e.\u0275\u0275elementEnd()),2&n&&e.\u0275\u0275property("ngValue",null)}function nT(n,c){1&n&&(e.\u0275\u0275elementStart(0,"option",30),e.\u0275\u0275i18n(1,6),e.\u0275\u0275elementEnd()),2&n&&e.\u0275\u0275property("ngValue",null)}function oT(n,c){if(1&n&&(e.\u0275\u0275elementStart(0,"option",31),e.\u0275\u0275text(1),e.\u0275\u0275elementEnd()),2&n){const t=c.$implicit;e.\u0275\u0275property("value",t),e.\u0275\u0275advance(),e.\u0275\u0275textInterpolate(t)}}function iT(n,c){1&n&&(e.\u0275\u0275elementStart(0,"span",32),e.\u0275\u0275i18n(1,7),e.\u0275\u0275elementEnd())}function aT(n,c){if(1&n&&(e.\u0275\u0275elementStart(0,"div",21)(1,"label",22),e.\u0275\u0275i18n(2,3),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(3,"div",23)(4,"select",24),e.\u0275\u0275template(5,eT,2,0,"option",25)(6,tT,2,1,"option",26)(7,nT,2,1,"option",26)(8,oT,2,2,"option",27),e.\u0275\u0275elementEnd(),e.\u0275\u0275template(9,iT,2,0,"span",28),e.\u0275\u0275elementEnd()()),2&n){const t=e.\u0275\u0275nextContext(),o=e.\u0275\u0275reference(7);e.\u0275\u0275advance(),e.\u0275\u0275property("ngClass",e.\u0275\u0275pureFunction1(6,Zh,!t.showImageField)),e.\u0275\u0275advance(4),e.\u0275\u0275property("ngIf",null===t.versions),e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf",null!==t.versions&&0===t.versions.length),e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf",null!==t.versions&&t.versions.length>0),e.\u0275\u0275advance(),e.\u0275\u0275property("ngForOf",t.versions),e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf",t.upgradeForm.showError("availableVersions",o,"required"))}}function sT(n,c){if(1&n){const t=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"div",21)(1,"div",33)(2,"div",34)(3,"input",35),e.\u0275\u0275listener("click",function(){e.\u0275\u0275restoreView(t);const i=e.\u0275\u0275nextContext();return e.\u0275\u0275resetView(i.useImage())}),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(4,"label",36),e.\u0275\u0275i18n(5,8),e.\u0275\u0275elementEnd()()()()}}function rT(n,c){1&n&&(e.\u0275\u0275elementStart(0,"span",32),e.\u0275\u0275i18n(1,10),e.\u0275\u0275elementEnd())}function lT(n,c){if(1&n&&(e.\u0275\u0275elementStart(0,"div",21)(1,"label",37),e.\u0275\u0275i18n(2,9),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(3,"div",23),e.\u0275\u0275element(4,"input",38),e.\u0275\u0275template(5,rT,2,0,"span",28),e.\u0275\u0275elementEnd()()),2&n){const t=e.\u0275\u0275nextContext(),o=e.\u0275\u0275reference(7);e.\u0275\u0275advance(5),e.\u0275\u0275property("ngIf",t.upgradeForm.showError("customImageName",o,"required"))}}let _T=(()=>{class n{constructor(t,o,i,r,p){this.actionLabels=t,this.authStorageService=o,this.activeModal=i,this.upgradeService=r,this.notificationService=p,this.icons=g.FI,this.showImageField=!1,this.permission=this.authStorageService.getPermissions().configOpt}ngOnInit(){if(this.upgradeForm=new Se.$({availableVersions:new T.FormControl(null,[T.Validators.required]),useImage:new T.FormControl(!1),customImageName:new T.FormControl(null)}),void 0===this.versions){this.upgradeForm.get("availableVersions").clearValidators();const o=this.upgradeForm.get("customImageName");o.setValidators(T.Validators.required),o.updateValueAndValidity()}}startUpgrade(){const t=this.upgradeForm.getValue("availableVersions"),o=this.upgradeForm.getValue("customImageName");this.upgradeService.start(t,o).subscribe({next:()=>{this.notificationService.show(Le._.success,$localize`Started upgrading the cluster`)},error:i=>{this.upgradeForm.setErrors({cdSubmitButton:!0}),this.notificationService.show(Le._.error,$localize`Failed to start the upgrade`,i)},complete:()=>{this.activeModal.close()}})}useImage(){this.showImageField=!this.showImageField;const t=this.upgradeForm.get("availableVersions"),o=this.upgradeForm.get("customImageName");this.showImageField?(t.disable(),t.clearValidators(),o.setValidators(T.Validators.required),o.updateValueAndValidity()):(t.enable(),t.setValidators(T.Validators.required),t.updateValueAndValidity(),o.clearValidators())}static{this.\u0275fac=function(o){return new(o||n)(e.\u0275\u0275directiveInject(f.Ss),e.\u0275\u0275directiveInject(_.v),e.\u0275\u0275directiveInject(V.NgbActiveModal),e.\u0275\u0275directiveInject(Ki),e.\u0275\u0275directiveInject(Y.J))}}static{this.\u0275cmp=e.\u0275\u0275defineComponent({type:n,selectors:[["cd-upgrade-start-modal",8,"component"]],attrs:Jh,decls:15,vars:8,consts:()=>{let t,o,i,r,p,F,D,x,H,X;return t=$localize`:␟c4cc929a04d4de2120fecc4ce1e9e25bcc1fa0b6␟9167888988735666462:Upgrade Cluster`,o=$localize`:␟de74da8be0a128f41fa14677f2743aa001858728␟5823760626052237620:Make sure to put the correct image. Passing an incorrect image can lead the cluster into an undesired state.`,i=$localize`:␟a8a224e3261e07898b41b8bd24b3fffe29cde0a9␟1947869876969745692:New Version`,r=$localize`:␟94516fa213706c67ce5a5b5765681d7fb032033a␟3894950702316166331:Loading...`,p=$localize`:␟d60ed43e0dfd611ccb8d778cebcc1d1b37b410a3␟3621788484170235878:-- No version available --`,F=$localize`:␟92273d1f212306c6d676815d973251648b33198f␟7315599446685328804:-- Select a version --`,D=$localize`:␟4aa19de2a2b54cbda39e9c62917b23044c087776␟751124305869330542:This field is required!`,x=$localize`:␟f1aa3724abb31ac9adc778e4808c0fd991a9a098␟982450577009850795:Use image`,H=$localize`:␟a5f9ba9bb9faa8284bcadb1cdbc6aaf969e9c4bb␟3012906865384504293:Image`,X=$localize`:␟4aa19de2a2b54cbda39e9c62917b23044c087776␟751124305869330542:This field is required!`,[["formDir","ngForm"],t,o,i,r,p,F,D,x,H,X,[3,"modalRef"],[1,"modal-title"],[1,"modal-content"],["name","upgradeForm","novalidate","",1,"form",3,"formGroup"],[1,"modal-body"],["type","warning","spacingClass","mb-3",4,"ngIf"],["class","form-group row",4,"ngIf"],[1,"modal-footer"],[3,"submitActionEvent","form","submitText"],["type","warning","spacingClass","mb-3"],[1,"form-group","row"],["for","availableVersions",1,"cd-col-form-label",3,"ngClass"],[1,"cd-col-form-input"],["id","availableVersions","name","availableVersions","formControlName","availableVersions",1,"form-select"],["ngValue","null",4,"ngIf"],[3,"ngValue",4,"ngIf"],[3,"value",4,"ngFor","ngForOf"],["class","invalid-feedback",4,"ngIf"],["ngValue","null"],[3,"ngValue"],[3,"value"],[1,"invalid-feedback"],[1,"cd-col-form-offset"],[1,"custom-control","custom-checkbox"],["type","checkbox","id","useImage","name","useImage","formControlName","useImage",1,"custom-control-input",3,"click"],["for","useImage",1,"custom-control-label"],["for","customImageName",1,"cd-col-form-label","required"],["type","text","id","customImageName","name","customImageName","formControlName","customImageName",1,"form-control"]]},template:function(o,i){if(1&o){const r=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"cd-modal",11),e.\u0275\u0275elementContainerStart(1,12)(2),e.\u0275\u0275i18n(3,1),e.\u0275\u0275elementContainerEnd(),e.\u0275\u0275text(4,"\xa0 "),e.\u0275\u0275elementContainerEnd(),e.\u0275\u0275elementContainerStart(5,13),e.\u0275\u0275elementStart(6,"form",14,0)(8,"div",15),e.\u0275\u0275template(9,qh,2,0,"cd-alert-panel",16)(10,aT,10,8,"div",17)(11,sT,6,0,"div",17)(12,lT,6,1,"div",17),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(13,"div",18)(14,"cd-form-button-panel",19),e.\u0275\u0275listener("submitActionEvent",function(){return e.\u0275\u0275restoreView(r),e.\u0275\u0275resetView(i.startUpgrade())}),e.\u0275\u0275elementEnd()()(),e.\u0275\u0275elementContainerEnd(),e.\u0275\u0275elementEnd()}2&o&&(e.\u0275\u0275property("modalRef",i.activeModal),e.\u0275\u0275advance(6),e.\u0275\u0275property("formGroup",i.upgradeForm),e.\u0275\u0275advance(3),e.\u0275\u0275property("ngIf",i.showImageField),e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf",i.versions),e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf",i.versions),e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf",i.showImageField||!i.versions),e.\u0275\u0275advance(2),e.\u0275\u0275property("form",i.upgradeForm)("submitText",i.actionLabels.START_UPGRADE))},dependencies:[l.NgClass,l.NgForOf,l.NgIf,xt.z,it.m,Q.e,De.S,Me.a,xe.C,ze.E,T.\u0275NgNoValidate,T.NgSelectOption,T.\u0275NgSelectMultipleOption,T.DefaultValueAccessor,T.CheckboxControlValueAccessor,T.SelectControlValueAccessor,T.NgControlStatus,T.NgControlStatusGroup,T.FormGroupDirective,T.FormControlName]})}}return n})(),Ki=(()=>{class n extends Yh.O{constructor(t,o,i){super(),this.http=t,this.summaryService=o,this.modalService=i,this.baseURL="api/cluster/upgrade",this.upgradableServiceTypes=["mgr","mon","crash","osd","mds","rgw","rbd-mirror","cephfs-mirror","iscsi","nfs"]}list(){return this.http.get(this.baseURL).pipe((0,u.map)(t=>this.versionAvailableForUpgrades(t)))}versionAvailableForUpgrades(t){let o="";this.summaryService.subscribe(r=>{o=r.version.replace("ceph version ","").split("-")[0]});const i=t.versions.filter(r=>{const p=o.split("."),F=r.split(".");return p[0]===F[0]&&(p[1]<F[1]||p[2]<F[2])});return t.versions=i.sort(),t}start(t,o){return this.http.post(`${this.baseURL}/start`,{image:o,version:t})}pause(){return this.http.put(`${this.baseURL}/pause`,null)}resume(){return this.http.put(`${this.baseURL}/resume`,null)}stop(){return this.http.put(`${this.baseURL}/stop`,null)}status(){return this.http.get(`${this.baseURL}/status`)}listCached(){return this._listData$||(this._listData$=this.list().pipe((0,u.tap)(t=>this._upgradableVersions=t.versions),(0,u.shareReplay)(1))),this._listData$}startUpgradeModal(){return this.modalService.show(_T,{versions:this._upgradableVersions})}static{this.\u0275fac=function(o){return new(o||n)(e.\u0275\u0275inject(h.HttpClient),e.\u0275\u0275inject(on.E),e.\u0275\u0275inject(qt.B))}}static{this.\u0275prov=e.\u0275\u0275defineInjectable({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();const dT=(n,c)=>[n,c];function uT(n,c){1&n&&(e.\u0275\u0275elementStart(0,"h5"),e.\u0275\u0275i18n(1,2),e.\u0275\u0275elementEnd())}function pT(n,c){if(1&n&&(e.\u0275\u0275elementStart(0,"a",6),e.\u0275\u0275i18nStart(1,3),e.\u0275\u0275element(2,"i",7),e.\u0275\u0275i18nEnd(),e.\u0275\u0275elementEnd()),2&n){const t=e.\u0275\u0275nextContext(3);e.\u0275\u0275advance(2),e.\u0275\u0275property("ngClass",e.\u0275\u0275pureFunction2(2,dT,t.icons.spin,t.icons.spinner)),e.\u0275\u0275i18nExp(null==t.executingTask?null:t.executingTask.progress),e.\u0275\u0275i18nApply(1)}}function mT(n,c){if(1&n&&(e.\u0275\u0275elementContainerStart(0),e.\u0275\u0275template(1,uT,2,0,"h5",5)(2,pT,3,5,"ng-template",null,1,e.\u0275\u0275templateRefExtractor),e.\u0275\u0275elementContainerEnd()),2&n){const t=e.\u0275\u0275reference(3),o=e.\u0275\u0275nextContext().ngIf;e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf",o.is_paused)("ngIfElse",t)}}function fT(n,c){if(1&n&&(e.\u0275\u0275elementStart(0,"div"),e.\u0275\u0275template(1,mT,4,2,"ng-container",5),e.\u0275\u0275elementEnd()),2&n){const t=c.ngIf;e.\u0275\u0275nextContext();const o=e.\u0275\u0275reference(3);e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf",t.is_paused||t.in_progress)("ngIfElse",o)}}function ET(n,c){if(1&n){const t=e.\u0275\u0275getCurrentView();e.\u0275\u0275i18nStart(0,4,1),e.\u0275\u0275elementStart(1,"h5",10),e.\u0275\u0275listener("click",function(){e.\u0275\u0275restoreView(t);const i=e.\u0275\u0275nextContext(3);return e.\u0275\u0275resetView(i.upgradeModal())}),e.\u0275\u0275element(2,"i",7),e.\u0275\u0275elementEnd(),e.\u0275\u0275i18nEnd()}if(2&n){const t=e.\u0275\u0275nextContext(3);e.\u0275\u0275advance(2),e.\u0275\u0275property("ngClass",t.icons.up)}}function gT(n,c){if(1&n&&(e.\u0275\u0275elementStart(0,"div"),e.\u0275\u0275i18nStart(1,4),e.\u0275\u0275template(2,ET,3,1,"h5",9),e.\u0275\u0275i18nEnd(),e.\u0275\u0275elementEnd()),2&n){const t=c.ngIf;e.\u0275\u0275advance(2),e.\u0275\u0275property("ngIf",t.versions.length>0)}}function CT(n,c){if(1&n&&(e.\u0275\u0275template(0,gT,3,1,"div",8),e.\u0275\u0275pipe(1,"async")),2&n){const t=e.\u0275\u0275nextContext();e.\u0275\u0275property("ngIf",e.\u0275\u0275pipeBind1(1,1,t.upgradeInfo$))}}let ST=(()=>{class n{constructor(t,o,i){this.orchestratorService=t,this.summaryService=o,this.upgradeService=i,this.orchAvailable=!1,this.subs=new K.Subscription,this.icons=g.FI}ngOnInit(){this.orchestratorService.status().subscribe(t=>{this.orchAvailable=t.available,this.orchAvailable&&t.upgrade_status?.available&&(this.upgradeInfo$=this.upgradeService.listCached(),this.upgradeStatus$=this.upgradeService.status())}),this.subs.add(this.summaryService.subscribe(t=>{this.executingTask=t.executing_tasks.filter(o=>o.name.includes("progress/Upgrade"))[0]}))}ngOnDestroy(){this.subs?.unsubscribe()}upgradeModal(){this.upgradeModalRef=this.upgradeService.startUpgradeModal()}static{this.\u0275fac=function(o){return new(o||n)(e.\u0275\u0275directiveInject(tn.K),e.\u0275\u0275directiveInject(on.E),e.\u0275\u0275directiveInject(Ki))}}static{this.\u0275cmp=e.\u0275\u0275defineComponent({type:n,selectors:[["cd-upgradable"]],decls:4,vars:4,consts:()=>{let t,o,i;return t=$localize`:␟a9abcc47e24626de26276ac8c2f2391d8df46927␟6235792372980983990: Upgrade is paused `,o=$localize`:␟42300878b5534740d12736430a5dad6ee510eb7d␟1923020101905032993:${"\ufffd#2\ufffd"}:START_ITALIC_TEXT:${"\ufffd/#2\ufffd"}:CLOSE_ITALIC_TEXT: Upgrading ${"\ufffd0\ufffd"}:INTERPOLATION:% `,i=$localize`:␟f40994dc42978115b72215d52d09636247b2c937␟2308409352243989693:${"\ufffd*2:1\ufffd\ufffd#1:1\ufffd"}:START_HEADING_LEVEL5:${"\ufffd#2:1\ufffd"}:START_ITALIC_TEXT:${"\ufffd/#2:1\ufffd"}:CLOSE_ITALIC_TEXT: Upgrade available ${"\ufffd/#1:1\ufffd\ufffd/*2:1\ufffd"}:CLOSE_HEADING_LEVEL5:`,[["isUpgradable",""],["inProgress",""],t,o,i,[4,"ngIf","ngIfElse"],["href","#/upgrade/progress"],[3,"ngClass"],[4,"ngIf"],[3,"click",4,"ngIf"],[3,"click"]]},template:function(o,i){if(1&o&&(e.\u0275\u0275template(0,fT,2,2,"div",5),e.\u0275\u0275pipe(1,"async"),e.\u0275\u0275template(2,CT,2,3,"ng-template",null,0,e.\u0275\u0275templateRefExtractor)),2&o){const r=e.\u0275\u0275reference(3);e.\u0275\u0275property("ngIf",e.\u0275\u0275pipeBind1(1,2,i.upgradeStatus$))("ngIfElse",r)}},dependencies:[l.NgClass,l.NgIf,l.AsyncPipe]})}}return n})();var Da=s(487);let Os=(()=>{class n{constructor(t,o){this.cssHelper=t,this.dimlessBinary=o,this.highThreshold=0,this.lowThreshold=0,this.doughnutChartPlugins=[{id:"center_text",beforeDraw(i){const r=new oo._,p="Helvetica Neue, Helvetica, Arial, sans-serif";Kt.defaults.font.family=p;const F=i.ctx;if(!i.options.plugins.center_text||!i.data.datasets[0].label)return;F.save();const D=i.data.datasets[0].label[0].split("\n"),x=(i.chartArea.left+i.chartArea.right)/2,H=(i.chartArea.top+i.chartArea.bottom)/2;F.textAlign="center",F.textBaseline="middle",F.font=`24px ${p}`,F.fillText(D[0],x,H-10),D.length>1&&(F.font=`14px ${p}`,F.fillStyle=r.propertyValue("chart-color-center-text-description"),F.fillText(D[1],x,H+10)),F.restore()}}],this.chartConfig={chartType:"doughnut",labels:[],dataset:[{label:null,backgroundColor:[this.cssHelper.propertyValue("chart-color-light-gray"),this.cssHelper.propertyValue("chart-color-slight-dark-gray"),this.cssHelper.propertyValue("chart-color-dark-gray")]},{label:null,borderWidth:0,backgroundColor:[this.cssHelper.propertyValue("chart-color-blue"),this.cssHelper.propertyValue("chart-color-white")]}],options:{cutout:"70%",events:["click","mouseout","touchstart"],aspectRatio:2,plugins:{center_text:!0,legend:{display:!0,position:"right",labels:{boxWidth:10,usePointStyle:!1,generateLabels:i=>{let r=i.data.labels.slice(0,this.chartConfig.labels.length);return r[0]={text:$localize`Used: ${i.data.datasets[1].data[2]}`,fillStyle:i.data.datasets[1].backgroundColor[0],strokeStyle:i.data.datasets[1].backgroundColor[0]},i.data.datasets[0].data?.length&&(r[1]={text:$localize`Warning: ${i.data.datasets[0].data[0]}%`,fillStyle:i.data.datasets[0].backgroundColor[1],strokeStyle:i.data.datasets[0].backgroundColor[1]},r[2]={text:$localize`Danger: ${i.data.datasets[0].data[0]+i.data.datasets[0].data[1]}%`,fillStyle:i.data.datasets[0].backgroundColor[2],strokeStyle:i.data.datasets[0].backgroundColor[2]}),r}}},tooltip:{enabled:!0,displayColors:!1,backgroundColor:this.cssHelper.propertyValue("chart-color-tooltip-background"),cornerRadius:0,bodyFontSize:14,bodyFontStyle:"600",position:"nearest",xPadding:12,yPadding:12,filter:i=>1===i.datasetIndex,callbacks:{label:(i,r)=>{let p=r.labels[i.index];return p.includes("%")||(p=`${p} (${r.datasets[i.datasetIndex].data[i.index]}%)`),p}}},title:{display:!1}}}}}ngOnInit(){this.prepareRawUsage(this.chartConfig,this.data)}ngOnChanges(){this.prepareRawUsage(this.chartConfig,this.data)}prepareRawUsage(t,o){const i=100*this.lowThreshold,r=100*this.highThreshold,p="string"==typeof o.max?parseFloat(o.max):o.max,F="string"==typeof o.current?parseFloat(o.current):o.current,D=this.calcPercentage(p-F,p),x=this.calcPercentage(F,p);this.color=r>0&&x>=r?"chart-color-red":i>0&&x>=i?"chart-color-yellow":"chart-color-blue",r>0&&i>0?t.dataset[0].data=[Math.round(i),Math.round(Math.abs(i-r)),Math.round(100-r)]:t.dataset[1].backgroundColor[1]=this.cssHelper.propertyValue("chart-color-light-gray"),t.dataset[1].data=[x,D,this.dimlessBinary.transform(o.current)],t.dataset[1].backgroundColor[0]=this.cssHelper.propertyValue(this.color),t.dataset[0].label=[`${x}%\nof ${this.dimlessBinary.transform(o.max)}`]}calcPercentage(t,o){return E().isNumber(t)&&E().isNumber(o)&&0!==o?Math.ceil(t/o*100*100)/100:0}static{this.\u0275fac=function(o){return new(o||n)(e.\u0275\u0275directiveInject(oo._),e.\u0275\u0275directiveInject(mt.l))}}static{this.\u0275cmp=e.\u0275\u0275defineComponent({type:n,selectors:[["cd-dashboard-pie"]],inputs:{data:"data",highThreshold:"highThreshold",lowThreshold:"lowThreshold"},features:[e.\u0275\u0275NgOnChangesFeature],decls:6,vars:5,consts:[["chartCanvas",""],["chartTooltip",""],[1,"chart-container","d-flex","align-items-center","justify-content-center"],["baseChart","",1,"chart-canvas",3,"datasets","type","options","labels","plugins"],[1,"chartjs-tooltip"]],template:function(o,i){1&o&&(e.\u0275\u0275elementStart(0,"div",2),e.\u0275\u0275element(1,"canvas",3,0),e.\u0275\u0275elementStart(3,"div",4,1),e.\u0275\u0275element(5,"table"),e.\u0275\u0275elementEnd()()),2&o&&(e.\u0275\u0275advance(),e.\u0275\u0275property("datasets",i.chartConfig.dataset)("type",i.chartConfig.chartType)("options",i.chartConfig.options)("labels",i.chartConfig.labels)("plugins",i.doughnutChartPlugins))},dependencies:[Nt.BaseChartDirective],styles:['.chart-container[_ngcontent-%COMP%]{cursor:pointer;margin:auto;overflow:visible;position:absolute}canvas[_ngcontent-%COMP%]{user-select:none}.chartjs-tooltip[_ngcontent-%COMP%]{background:#000000b3;border-radius:3px;color:#fff;font-family:Helvetica Neue,Helvetica,Arial,sans-serif!important;opacity:0;pointer-events:none;position:absolute;transform:translate(-50%);transition:all .1s ease}.chartjs-tooltip.transform-left[_ngcontent-%COMP%]{transform:translate(-10%)}.chartjs-tooltip.transform-left[_ngcontent-%COMP%]:after{left:10%}.chartjs-tooltip.transform-right[_ngcontent-%COMP%]{transform:translate(-90%)}.chartjs-tooltip.transform-right[_ngcontent-%COMP%]:after{left:90%}.chartjs-tooltip[_ngcontent-%COMP%]:after{border-color:#000 transparent transparent transparent;border-style:solid;border-width:5px;content:" ";left:50%;margin-left:-5px;position:absolute;top:100%}  .chartjs-tooltip-key{display:inline-block;height:10px;margin-right:10px;width:10px}.chart-container[_ngcontent-%COMP%]{height:100%;margin-left:auto;margin-right:auto;position:unset;width:100%}.chart-canvas[_ngcontent-%COMP%]{height:100%;margin-left:auto;margin-right:auto;max-height:100%;max-width:100%;position:unset;width:100%}']})}}return n})();var Ps=s(11378),bs=s(47830),hT=s(57452),Ns=s(32357),TT=s(71721),FT=s(68945),Is=s(97421);let vT=(()=>{class n{constructor(t){this.pgCategoryService=t}transform(t){if(!t)return null;const o={};let i=0;return E().forEach(t.statuses,(r,p)=>{const F=this.pgCategoryService.getTypeByStates(p);E().isUndefined(o[F])&&(o[F]=0),o[F]+=r,i+=r}),{categoryPgAmount:o,total:i}}static{this.\u0275fac=function(o){return new(o||n)(e.\u0275\u0275directiveInject(Is.v,16))}}static{this.\u0275pipe=e.\u0275\u0275definePipe({name:"pgSummary",type:n,pure:!0})}}return n})();const As=()=>["Reads","Writes"],Co=(n,c)=>[n,c],MT=()=>["Apply","Commit"],RT=()=>["Recovery Throughput"],So=n=>[n],Ds=n=>({active:n}),OT=(n,c)=>({max:n,current:c}),PT=()=>["Used Capacity"],ys=(n,c,t)=>[n,c,t];function bT(n,c){if(1&n&&(e.\u0275\u0275elementStart(0,"span")(1,"dt"),e.\u0275\u0275text(2,"Managed By"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(3,"dd")(4,"a",20),e.\u0275\u0275text(5),e.\u0275\u0275element(6,"i",18),e.\u0275\u0275elementEnd()()()),2&n){const t=e.\u0275\u0275nextContext().ngIf;e.\u0275\u0275advance(4),e.\u0275\u0275property("href",t.MANAGED_BY_CLUSTERS[0].url,e.\u0275\u0275sanitizeUrl),e.\u0275\u0275advance(),e.\u0275\u0275textInterpolate1(" ",t.MANAGED_BY_CLUSTERS[0].fsid," ")}}function NT(n,c){if(1&n&&(e.\u0275\u0275elementContainerStart(0),e.\u0275\u0275template(1,bT,7,2,"span",21),e.\u0275\u0275elementContainerEnd()),2&n){const t=c.ngIf;e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf",t.MANAGED_BY_CLUSTERS.length>0)}}function IT(n,c){if(1&n&&e.\u0275\u0275element(0,"cd-card-row",61),2&n){const t=e.\u0275\u0275nextContext(2);e.\u0275\u0275property("data",t.rgwCount)}}function AT(n,c){if(1&n&&(e.\u0275\u0275element(0,"cd-card-row",62),e.\u0275\u0275pipe(1,"mdsSummary")),2&n){const t=e.\u0275\u0275nextContext(2);e.\u0275\u0275property("data",e.\u0275\u0275pipeBind1(1,1,t.mdsMap))}}function DT(n,c){if(1&n&&e.\u0275\u0275element(0,"cd-card-row",63),2&n){const t=e.\u0275\u0275nextContext(2);e.\u0275\u0275property("data",t.iscsiMap)}}function yT(n,c){if(1&n&&(e.\u0275\u0275elementContainerStart(0),e.\u0275\u0275element(1,"cd-card-row",52),e.\u0275\u0275pipe(2,"async"),e.\u0275\u0275pipe(3,"async"),e.\u0275\u0275element(4,"cd-card-row",53)(5,"cd-card-row",54),e.\u0275\u0275pipe(6,"mgrSummary"),e.\u0275\u0275element(7,"cd-card-row",55),e.\u0275\u0275pipe(8,"osdSummary"),e.\u0275\u0275element(9,"cd-card-row",56)(10,"cd-card-row",57),e.\u0275\u0275pipe(11,"pgSummary"),e.\u0275\u0275template(12,IT,1,1,"cd-card-row",58)(13,AT,2,3,"cd-card-row",59)(14,DT,1,1,"cd-card-row",60),e.\u0275\u0275elementContainerEnd()),2&n){const t=c.ngIf,o=e.\u0275\u0275nextContext();e.\u0275\u0275advance(),e.\u0275\u0275property("data",o.hostsCount)("dropdownData",e.\u0275\u0275pipeBind1(2,10,o.isHardwareEnabled$)&&e.\u0275\u0275pipeBind1(3,12,o.hardwareSummary$)),e.\u0275\u0275advance(3),e.\u0275\u0275property("data",null==o.monMap?null:o.monMap.monmap.mons.length),e.\u0275\u0275advance(),e.\u0275\u0275property("data",e.\u0275\u0275pipeBind1(6,14,o.mgrMap)),e.\u0275\u0275advance(2),e.\u0275\u0275property("data",e.\u0275\u0275pipeBind1(8,16,o.osdMap)),e.\u0275\u0275advance(2),e.\u0275\u0275property("data",null==o.poolStatus?null:o.poolStatus.length),e.\u0275\u0275advance(),e.\u0275\u0275property("data",e.\u0275\u0275pipeBind1(11,18,o.pgStatus)),e.\u0275\u0275advance(2),e.\u0275\u0275property("ngIf",t.rgw),e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf",t.cephfs),e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf",t.iscsi)}}function LT(n,c){1&n&&(e.\u0275\u0275elementStart(0,"div",64)(1,"a",65),e.\u0275\u0275i18n(2,5),e.\u0275\u0275elementEnd()())}function $T(n,c){if(1&n&&(e.\u0275\u0275element(0,"i",66),e.\u0275\u0275pipe(1,"healthIcon"),e.\u0275\u0275pipe(2,"healthColor")),2&n){const t=e.\u0275\u0275nextContext();e.\u0275\u0275property("ngClass",e.\u0275\u0275pureFunction2(7,Co,e.\u0275\u0275pipeBind1(1,3,t.healthData.status),t.icons.large2x))("ngStyle",e.\u0275\u0275pipeBind1(2,5,t.healthData.status))("title",t.healthData.status)}}function xT(n,c){1&n&&(e.\u0275\u0275elementStart(0,"span",67),e.\u0275\u0275i18n(1,6),e.\u0275\u0275elementEnd())}function UT(n,c){1&n&&(e.\u0275\u0275elementStart(0,"a",68),e.\u0275\u0275i18n(1,7),e.\u0275\u0275elementEnd())}function wT(n,c){if(1&n&&e.\u0275\u0275element(0,"cd-health-checks",69),2&n){const t=e.\u0275\u0275nextContext();e.\u0275\u0275property("healthData",t.healthData.checks)}}function GT(n,c){if(1&n&&(e.\u0275\u0275elementStart(0,"div",70),e.\u0275\u0275element(1,"i",71),e.\u0275\u0275elementStart(2,"span",67),e.\u0275\u0275i18n(3,8),e.\u0275\u0275elementEnd()()),2&n){const t=e.\u0275\u0275nextContext();e.\u0275\u0275advance(),e.\u0275\u0275property("ngClass",e.\u0275\u0275pureFunction2(1,Co,t.icons.danger,t.icons.large2x))}}function HT(n,c){if(1&n){const t=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"button",82),e.\u0275\u0275listener("click",function(){e.\u0275\u0275restoreView(t);const i=e.\u0275\u0275nextContext(2);return e.\u0275\u0275resetView(i.toggleAlertsWindow("critical"))}),e.\u0275\u0275element(1,"i",83),e.\u0275\u0275elementStart(2,"span"),e.\u0275\u0275text(3),e.\u0275\u0275elementEnd()()}if(2&n){const t=e.\u0275\u0275nextContext(2);e.\u0275\u0275property("ngClass",e.\u0275\u0275pureFunction1(3,Ds,"critical"===t.alertType)),e.\u0275\u0275advance(),e.\u0275\u0275property("ngClass",e.\u0275\u0275pureFunction1(5,So,t.icons.danger)),e.\u0275\u0275advance(2),e.\u0275\u0275textInterpolate(t.prometheusAlertService.activeCriticalAlerts)}}function VT(n,c){if(1&n){const t=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"button",84),e.\u0275\u0275listener("click",function(){e.\u0275\u0275restoreView(t);const i=e.\u0275\u0275nextContext(2);return e.\u0275\u0275resetView(i.toggleAlertsWindow("warning"))}),e.\u0275\u0275element(1,"i",83),e.\u0275\u0275elementStart(2,"span"),e.\u0275\u0275text(3),e.\u0275\u0275elementEnd()()}if(2&n){const t=e.\u0275\u0275nextContext(2);e.\u0275\u0275property("ngClass",e.\u0275\u0275pureFunction1(3,Ds,"warning"===t.alertType)),e.\u0275\u0275advance(),e.\u0275\u0275property("ngClass",e.\u0275\u0275pureFunction1(5,So,t.icons.infoCircle)),e.\u0275\u0275advance(2),e.\u0275\u0275textInterpolate(t.prometheusAlertService.activeWarningAlerts)}}function BT(n,c){1&n&&e.\u0275\u0275elementContainer(0)}function zT(n,c){if(1&n&&(e.\u0275\u0275elementStart(0,"section",72)(1,"div",73)(2,"span",74),e.\u0275\u0275i18n(3,9),e.\u0275\u0275elementEnd(),e.\u0275\u0275template(4,HT,4,7,"button",75)(5,VT,4,7,"button",76),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(6,"div",77),e.\u0275\u0275element(7,"hr",78),e.\u0275\u0275elementStart(8,"ngx-simplebar",79)(9,"div",80),e.\u0275\u0275template(10,BT,1,0,"ng-container",81),e.\u0275\u0275elementEnd()()()()),2&n){const t=e.\u0275\u0275nextContext(),o=e.\u0275\u0275reference(70);e.\u0275\u0275advance(4),e.\u0275\u0275property("ngIf",null==t.prometheusAlertService?null:t.prometheusAlertService.activeCriticalAlerts),e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf",null==t.prometheusAlertService?null:t.prometheusAlertService.activeWarningAlerts),e.\u0275\u0275advance(3),e.\u0275\u0275property("options",t.simplebar),e.\u0275\u0275advance(2),e.\u0275\u0275property("ngTemplateOutlet",o)}}function XT(n,c){if(1&n&&(e.\u0275\u0275elementContainerStart(0,16),e.\u0275\u0275element(1,"cd-dashboard-pie",85),e.\u0275\u0275elementContainerEnd()),2&n){const t=e.\u0275\u0275nextContext();e.\u0275\u0275advance(),e.\u0275\u0275property("data",e.\u0275\u0275pureFunction2(3,OT,t.capacity.total_bytes,t.capacity.total_used_raw_bytes))("lowThreshold",t.capacityCardData.osdNearfull)("highThreshold",t.capacityCardData.osdFull)}}function kT(n,c){if(1&n&&(e.\u0275\u0275elementContainerStart(0),e.\u0275\u0275element(1,"cd-dashboard-area-chart",86),e.\u0275\u0275elementContainerEnd()),2&n){const t=e.\u0275\u0275nextContext();e.\u0275\u0275advance(),e.\u0275\u0275property("maxValue",t.capacity.total_bytes)("labelsArray",e.\u0275\u0275pureFunction0(3,PT))("dataArray",e.\u0275\u0275pureFunction1(4,So,t.queriesResults.USEDCAPACITY))}}function jT(n,c){if(1&n&&(e.\u0275\u0275elementStart(0,"div",83)(1,"div",89)(2,"div",90)(3,"div",91)(4,"span",83),e.\u0275\u0275element(5,"i",83)(6,"i",83),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(7,"div",92)(8,"div",93)(9,"h6",94),e.\u0275\u0275text(10),e.\u0275\u0275elementEnd(),e.\u0275\u0275element(11,"p",95),e.\u0275\u0275elementStart(12,"p",96)(13,"small",97),e.\u0275\u0275pipe(14,"cdDate"),e.\u0275\u0275i18n(15,10),e.\u0275\u0275pipe(16,"relativeDate"),e.\u0275\u0275elementEnd()()()()()(),e.\u0275\u0275element(17,"hr",98),e.\u0275\u0275elementEnd()),2&n){const t=e.\u0275\u0275nextContext().$implicit,o=e.\u0275\u0275nextContext(2);e.\u0275\u0275property("ngClass",e.\u0275\u0275pureFunction1(13,So,"border-"+o.alertClass[t.labels.severity])),e.\u0275\u0275advance(4),e.\u0275\u0275property("ngClass",e.\u0275\u0275pureFunction3(15,ys,o.icons.stack,o.icons.large,"text-"+o.alertClass[t.labels.severity])),e.\u0275\u0275advance(),e.\u0275\u0275property("ngClass",e.\u0275\u0275pureFunction2(19,Co,o.icons.circle,o.icons.stack2x)),e.\u0275\u0275advance(),e.\u0275\u0275property("ngClass",e.\u0275\u0275pureFunction3(22,ys,o.icons.stack1x,o.icons.inverse,o.icons.warning)),e.\u0275\u0275advance(4),e.\u0275\u0275textInterpolate(t.labels.alertname),e.\u0275\u0275advance(),e.\u0275\u0275property("innerHtml",t.annotations.description,e.\u0275\u0275sanitizeHtml)("ngbTooltip",t.annotations.description),e.\u0275\u0275advance(2),e.\u0275\u0275property("title",e.\u0275\u0275pipeBind1(14,9,t.startsAt)),e.\u0275\u0275advance(3),e.\u0275\u0275i18nExp(e.\u0275\u0275pipeBind1(16,11,t.startsAt)),e.\u0275\u0275i18nApply(15)}}function WT(n,c){if(1&n&&(e.\u0275\u0275elementContainerStart(0),e.\u0275\u0275template(1,jT,18,26,"div",88),e.\u0275\u0275elementContainerEnd()),2&n){const t=c.$implicit,o=e.\u0275\u0275nextContext(2);e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf","active"===t.status.state&&t.labels.severity===o.alertType||!o.alertType)}}function KT(n,c){if(1&n&&e.\u0275\u0275template(0,WT,2,1,"ng-container",87),2&n){const t=e.\u0275\u0275nextContext();e.\u0275\u0275property("ngForOf",t.prometheusAlertService.alerts)("ngForTrackBy",t.trackByFn)}}function QT(n,c){if(1&n&&(e.\u0275\u0275elementContainerStart(0),e.\u0275\u0275elementStart(1,"p",99),e.\u0275\u0275i18nStart(2,11),e.\u0275\u0275element(3,"i",83)(4,"a",100),e.\u0275\u0275i18nEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementContainerEnd()),2&n){const t=e.\u0275\u0275nextContext(2);e.\u0275\u0275advance(3),e.\u0275\u0275property("ngClass",e.\u0275\u0275pureFunction1(1,So,t.icons.infoCircle))}}function YT(n,c){if(1&n&&e.\u0275\u0275template(0,QT,5,3,"ng-container",21),2&n){const t=e.\u0275\u0275nextContext();e.\u0275\u0275property("ngIf",t.permissions.log.read)}}function JT(n,c){1&n&&e.\u0275\u0275element(0,"cds-inline-loading")}let ZT=(()=>{class n extends ji{constructor(t,o,i,r,p,F,D,x,H,X,Z){super(D),this.summaryService=t,this.orchestratorService=o,this.authStorageService=i,this.featureToggles=r,this.healthService=p,this.settingsService=F,this.prometheusService=D,this.mgrModuleService=x,this.refreshIntervalService=H,this.prometheusAlertService=X,this.hardwareService=Z,this.detailsCardData={},this.capacityCardData={osdNearfull:null,osdFull:null},this.interval=new K.Subscription,this.icons=g.FI,this.flexHeight=!0,this.simplebar={autoHide:!0},this.alertClass=Gh.L,this.categoryPgAmount={},this.totalPgs=0,this.queriesResults={USEDCAPACITY:[],IPS:[],OPS:[],READLATENCY:[],WRITELATENCY:[],READCLIENTTHROUGHPUT:[],WRITECLIENTTHROUGHPUT:[],RECOVERYBYTES:[],READIOPS:[],WRITEIOPS:[]},this.telemetryURL="https://telemetry-public.ceph.com/",this.origin=window.location.origin,this.hardwareEnabled=!1,this.hasHardwareError=!1,this.hardwareSubject=new K.BehaviorSubject([]),this.subs=new K.Subscription,this.destroy$=new K.Subject,this.hostsCount=null,this.monMap=null,this.mgrMap=null,this.osdMap=null,this.poolStatus=null,this.pgStatus=null,this.rgwCount=null,this.mdsMap=null,this.iscsiMap=null,this.permissions=this.authStorageService.getPermissions(),this.enabledFeature$=this.featureToggles.get()}ngOnInit(){super.ngOnInit(),this.permissions.configOpt.read&&(this.isHardwareEnabled$=this.getHardwareConfig(),this.hardwareSummary$=this.hardwareSubject.pipe((0,u.switchMap)(()=>this.hardwareService.getSummary().pipe((0,u.switchMap)(t=>(this.hasHardwareError=t.host.flawed,(0,K.of)(t)))))),this.managedByConfig$=this.settingsService.getValues("MANAGED_BY_CLUSTERS")),this.loadInventories(),this.refreshIntervalObs(()=>this.healthService.getClusterCapacity()).subscribe({next:t=>{this.capacity=t}}),this.getPrometheusData(this.prometheusService.lastHourDateObject),this.getDetailsCardData(),this.getTelemetryReport(),this.getCapacityCardData(),this.prometheusAlertService.getAlerts(!0)}getTelemetryText(){return this.telemetryEnabled?"Cluster telemetry is active":"Cluster telemetry is inactive. To Activate the Telemetry,        click settings icon on top navigation bar and select        Telemetry configration."}ngOnDestroy(){this.prometheusService.unsubscribe(),this.subs?.unsubscribe(),this.destroy$.next(),this.destroy$.complete()}toggleAlertsWindow(t){this.alertType=this.alertType===t?null:t}getDetailsCardData(){this.healthService.getClusterFsid().subscribe(t=>{this.detailsCardData.fsid=t}),this.orchestratorService.getName().subscribe(t=>{this.detailsCardData.orchestrator=t}),this.subs.add(this.summaryService.subscribe(t=>{const o=t.version.replace("ceph version ","").split(" ");this.detailsCardData.cephVersion=o[0]+" "+o.slice(2,o.length).join(" ")}))}getPrometheusData(t){this.queriesResults=this.prometheusService.getRangeQueriesData(t,Ut.dR,this.queriesResults)}getCapacityQueryValues(t){let o=null,i=null;return t?.[0]?.metric?.__name__===Ut.xm.OSD_FULL?(o=t[0]?.value?.[1],i=t[1]?.value?.[1]):(o=t?.[1]?.value?.[1],i=t?.[0]?.value?.[1]),[o,i]}getCapacityCardData(){this.prometheusService.getGaugeQueryData(`{__name__=~"${Ut.xm.OSD_FULL}|${Ut.xm.OSD_NEARFULL}"}`).subscribe(o=>{const[i,r]=this.getCapacityQueryValues(o?.result);this.capacityCardData.osdFull=this.prometheusService.formatGuageMetric(i),this.capacityCardData.osdNearfull=this.prometheusService.formatGuageMetric(r)})}getTelemetryReport(){this.healthService.getTelemetryStatus().subscribe(t=>{this.telemetryEnabled=t})}trackByFn(t){return t}getHardwareConfig(){return this.mgrModuleService.getConfig("cephadm").pipe((0,u.switchMap)(t=>(this.hardwareEnabled=t?.hw_monitoring,(0,K.of)(t?.hw_monitoring))))}refreshIntervalObs(t){return this.refreshIntervalService.intervalData$.pipe((0,u.exhaustMap)(()=>t().pipe((0,u.catchError)(()=>K.EMPTY))),(0,u.takeUntil)(this.destroy$))}loadInventories(){this.refreshIntervalObs(()=>this.healthService.getMinimalHealth()).subscribe({next:t=>{this.hostsCount=t.hosts,this.monMap=t.mon_status,this.mgrMap=t.mgr_map,this.osdMap=t.osd_map,this.poolStatus=t.pools,this.pgStatus=t.pg_info,this.rgwCount=t.rgw,this.mdsMap=t.fs_map,this.iscsiMap=t.iscsi_daemons,this.healthData=t.health,this.enabledFeature$=this.featureToggles.get()}})}static{this.\u0275fac=function(o){return new(o||n)(e.\u0275\u0275directiveInject(on.E),e.\u0275\u0275directiveInject(tn.K),e.\u0275\u0275directiveInject(_.v),e.\u0275\u0275directiveInject($o.b),e.\u0275\u0275directiveInject(ue),e.\u0275\u0275directiveInject(mo.h),e.\u0275\u0275directiveInject(fn.o),e.\u0275\u0275directiveInject(Nn.a),e.\u0275\u0275directiveInject(xo.s),e.\u0275\u0275directiveInject(Eo),e.\u0275\u0275directiveInject(Hh))}}static{this.\u0275cmp=e.\u0275\u0275defineComponent({type:n,selectors:[["cd-dashboard-v3"]],features:[e.\u0275\u0275InheritDefinitionFeature],decls:75,vars:54,consts:()=>{let t,o,i,r,p,F,D,x,H,X;return t=$localize`:␟cdc7bb7b9053d50044276afe403479b43432af7d␟3924172365439893484:${"\ufffd0\ufffd"}:INTERPOLATION:`,o=$localize`:␟fdb7d2c026db56c39d4820ef3014a22e1dda20dd␟6787839162049105208: View alerts `,i=$localize`:␟f4d1dd59b039ad818d9da7e29a773e10e41d9821␟2944102521023817891:Cluster`,r=$localize`:␟b033ed95dac1ebe10c2c5972eddc8d5164e7b981␟5041009913692950588:Cluster `,p=$localize`:␟62a52ff1f366fe788f2b71aa6432bc5e5ad2e013␟8331204292092693335:Hardware`,F=$localize`:␟b2832b0d3c8c95fdb2dbb18951170568da9e4154␟3425367071066107827:Danger`,D=$localize`:␟a8059e31694578c1b0344a76a345357dd60e8f01␟6759205696902713848:Warning`,x=$localize`:␟9fe218829514884cdd0ca2300573a4e0428c324f␟8154453727027523235:Alerts`,H=$localize`:␟fdb6f37415114ce5ec1cba2afdb33b671ac9a627␟6319864979153601056:Active since: ${"\ufffd0\ufffd"}:INTERPOLATION:`,X=$localize`:␟44ecac93d67c6a671198091c2270354f80322327␟7900217280460384102:${"\ufffd#3\ufffd"}:START_ITALIC_TEXT:${"\ufffd/#3\ufffd"}:CLOSE_ITALIC_TEXT: See ${"\ufffd#4\ufffd"}:START_LINK:Logs${"\ufffd/#4\ufffd"}:CLOSE_LINK: for more details.`,[["healthCheck",""],["alertsCard",""],["logsLink",""],["loadingTpl",""],t,o,i,r,p,x,H,X,[1,"container-fluid","p-4"],[1,"row","d-flex","flex-row","ps-3"],[1,"col-sm-3","d-flex","flex-column","ps-2"],["cardTitle","Details","aria-label","Details card",1,"details"],[1,"ms-4","me-4"],["routerLink","/api-docs","target","_blank"],[1,"fa","fa-external-link"],[1,"badge",3,"ngClass","ngbTooltip"],["target","_blank",3,"href"],[4,"ngIf"],["cardTitle","Inventory","aria-label","Inventory card",1,"pt-4"],[1,"col-sm-9","ps-0"],[1,"row"],[1,"col-sm-8"],["cardTitle","Status","aria-label","Status card",1,"status",3,"alignItemsCenter","cardFooter","fullHeight"],["class","viewAlert",4,"ngIf"],[1,"d-flex","flex-column","ms-4","me-4","mt-4","mb-4"],[1,"d-flex","flex-row","col-md-3","ms-4"],[3,"ngClass","ngStyle","title",4,"ngIf","ngIfElse"],["class","ms-2 mt-n1 lead",4,"ngIf"],[3,"dropShadow","autoAlign"],["cdsToggletipButton",""],["class","ms-2 mt-n1 lead text-primary","popoverClass","info-card-popover-cluster-status",4,"ngIf"],["cdsToggletipContent",""],[1,"cds--popover-scroll-container"],[3,"healthData",4,"ngIf"],[1,"d-flex","flex-column","col-md-3"],["class","d-flex flex-row",4,"ngIf"],["class","footer alerts",4,"ngIf"],[1,"col-sm-4","ps-0"],["cardTitle","Capacity","aria-label","Capacity card",3,"fullHeight"],["class","ms-4 me-4",4,"ngIf"],[1,"col-sm-12","d-flex","flex-column","pt-4"],["cardTitle","Cluster Utilization","aria-label","Cluster utilization card"],[1,"ms-4","me-4","mt-0"],[3,"selectedTime"],["chartTitle","IOPS","dataUnits","","decimals","0",3,"labelsArray","dataArray"],["chartTitle","OSD Latencies","dataUnits","ms","decimals","2",3,"labelsArray","dataArray"],["chartTitle","Client Throughput","dataUnits","B/s","decimals","2",3,"labelsArray","dataArray"],["chartTitle","Recovery Throughput","dataUnits","B/s","decimals","2",3,"labelsArray","dataArray"],["link","/hosts","title","Host","summaryType","simplified",3,"data","dropdownData"],["link","/monitor","title","Monitor","summaryType","simplified",3,"data"],["title","Manager",3,"data"],["link","/osd","title","OSD","summaryType","osd",3,"data"],["link","/pool","title","Pool","summaryType","simplified",3,"data"],["title","PG",3,"data"],["link","/rgw/daemon","title","Object Gateway","summaryType","simplified","id","rgw-item",3,"data",4,"ngIf"],["title","Metadata Server","id","mds-item",3,"data",4,"ngIf"],["link","/iscsi/daemon","title","iSCSI Gateway","summaryType","iscsi","id","iscsi-item",3,"data",4,"ngIf"],["link","/rgw/daemon","title","Object Gateway","summaryType","simplified","id","rgw-item",3,"data"],["title","Metadata Server","id","mds-item",3,"data"],["link","/iscsi/daemon","title","iSCSI Gateway","summaryType","iscsi","id","iscsi-item",3,"data"],[1,"viewAlert"],["href","#/monitoring/active-alerts"],[3,"ngClass","ngStyle","title"],[1,"ms-2","mt-n1","lead"],["popoverClass","info-card-popover-cluster-status",1,"ms-2","mt-n1","lead","text-primary"],[3,"healthData"],[1,"d-flex","flex-row"],[1,"text-danger",3,"ngClass"],[1,"footer","alerts"],[1,"d-flex","flex-wrap","ms-4","me-4","mb-3","mt-3"],[1,"pt-2"],["class","btn btn-outline-danger rounded-pill ms-2","title",F,"id","dangerAlerts",3,"ngClass","click",4,"ngIf"],["class","btn btn-outline-warning rounded-pill ms-2","title",D,"id","warningAlerts",3,"ngClass","click",4,"ngIf"],[1,"alerts-section","pt-0"],[1,"mt-1","mb-0"],[3,"options"],[1,"card-body","p-0"],[4,"ngTemplateOutlet"],["title",F,"id","dangerAlerts",1,"btn","btn-outline-danger","rounded-pill","ms-2",3,"click","ngClass"],[3,"ngClass"],["title",D,"id","warningAlerts",1,"btn","btn-outline-warning","rounded-pill","ms-2",3,"click","ngClass"],[3,"data","lowThreshold","highThreshold"],["chartTitle","Used Capacity (RAW)","dataUnits","B",3,"maxValue","labelsArray","dataArray"],[4,"ngFor","ngForOf","ngForTrackBy"],[3,"ngClass",4,"ngIf"],[1,"card","tc_alerts","border-0","pt-3"],[1,"row","no-gutters","ps-2"],[1,"col-sm-1","text-center"],[1,"col-md-11","ps-0"],[1,"card-body","ps-0","pe-1","pb-1","pt-0"],[1,"card-title","bold"],[1,"card-text","me-3","mb-0","text-truncate",3,"innerHtml","ngbTooltip"],[1,"card-text","text-muted","me-3"],[1,"date",3,"title"],[1,"mt-0","mb-0"],[1,"logs-link"],["routerLink","/logs"]]},template:function(o,i){if(1&o){const r=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"div",12)(1,"div",13)(2,"div",14)(3,"cd-card",15)(4,"dl",16)(5,"dt"),e.\u0275\u0275text(6,"Cluster ID"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(7,"dd"),e.\u0275\u0275text(8),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(9,"dt"),e.\u0275\u0275text(10,"Orchestrator"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(11,"dd"),e.\u0275\u0275i18n(12,4),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(13,"dt"),e.\u0275\u0275text(14,"Ceph version"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(15,"dd"),e.\u0275\u0275text(16),e.\u0275\u0275element(17,"cd-upgradable"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(18,"dt"),e.\u0275\u0275text(19,"Cluster API"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(20,"dd")(21,"a",17),e.\u0275\u0275text(22),e.\u0275\u0275element(23,"i",18),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementContainerStart(24),e.\u0275\u0275elementStart(25,"dt"),e.\u0275\u0275text(26,"Telemetry Dashboard "),e.\u0275\u0275elementStart(27,"span",19),e.\u0275\u0275text(28),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(29,"dd")(30,"a",20),e.\u0275\u0275text(31),e.\u0275\u0275element(32,"i",18),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementContainerEnd(),e.\u0275\u0275template(33,NT,2,1,"ng-container",21),e.\u0275\u0275pipe(34,"async"),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(35,"cd-card",22),e.\u0275\u0275template(36,yT,15,20,"ng-container",21),e.\u0275\u0275pipe(37,"async"),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(38,"div",23)(39,"div",24)(40,"div",25)(41,"cd-card",26),e.\u0275\u0275template(42,LT,3,0,"div",27),e.\u0275\u0275elementStart(43,"div",28)(44,"div",29),e.\u0275\u0275template(45,$T,3,10,"i",30)(46,xT,2,0,"span",31),e.\u0275\u0275elementStart(47,"cds-toggletip",32)(48,"div",33),e.\u0275\u0275template(49,UT,2,0,"a",34),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(50,"div",35,0)(52,"div",36),e.\u0275\u0275template(53,wT,1,1,"cd-health-checks",37),e.\u0275\u0275elementEnd()()()()(),e.\u0275\u0275elementStart(54,"div",38),e.\u0275\u0275template(55,GT,4,4,"div",39),e.\u0275\u0275elementEnd(),e.\u0275\u0275template(56,zT,11,4,"section",40),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(57,"div",41)(58,"cd-card",42),e.\u0275\u0275template(59,XT,2,6,"ng-container",43),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(60,"div",44)(61,"cd-card",45)(62,"div",46)(63,"cd-dashboard-time-selector",47),e.\u0275\u0275listener("selectedTime",function(F){return e.\u0275\u0275restoreView(r),e.\u0275\u0275resetView(i.getPrometheusData(F))}),e.\u0275\u0275elementEnd(),e.\u0275\u0275template(64,kT,2,6,"ng-container",21),e.\u0275\u0275element(65,"cd-dashboard-area-chart",48)(66,"cd-dashboard-area-chart",49)(67,"cd-dashboard-area-chart",50)(68,"cd-dashboard-area-chart",51),e.\u0275\u0275elementEnd()()()()()()(),e.\u0275\u0275template(69,KT,1,2,"ng-template",null,1,e.\u0275\u0275templateRefExtractor)(71,YT,1,1,"ng-template",null,2,e.\u0275\u0275templateRefExtractor)(73,JT,1,0,"ng-template",null,3,e.\u0275\u0275templateRefExtractor)}if(2&o){const r=e.\u0275\u0275reference(74);e.\u0275\u0275advance(8),e.\u0275\u0275textInterpolate(i.detailsCardData.fsid),e.\u0275\u0275advance(4),e.\u0275\u0275i18nExp(i.detailsCardData.orchestrator||"Orchestrator is not available"),e.\u0275\u0275i18nApply(12),e.\u0275\u0275advance(4),e.\u0275\u0275textInterpolate1(" ",i.detailsCardData.cephVersion," "),e.\u0275\u0275advance(6),e.\u0275\u0275textInterpolate1(" ",i.origin,"/api-docs "),e.\u0275\u0275advance(5),e.\u0275\u0275property("ngClass",i.telemetryEnabled?"badge-success":"badge-secondary")("ngbTooltip",i.getTelemetryText()),e.\u0275\u0275advance(),e.\u0275\u0275textInterpolate1(" ",i.telemetryEnabled?"Active":"Inactive"," "),e.\u0275\u0275advance(2),e.\u0275\u0275property("href",i.telemetryURL,e.\u0275\u0275sanitizeUrl),e.\u0275\u0275advance(),e.\u0275\u0275textInterpolate1(" ",i.telemetryURL," "),e.\u0275\u0275advance(2),e.\u0275\u0275property("ngIf",e.\u0275\u0275pipeBind1(34,35,i.managedByConfig$)),e.\u0275\u0275advance(3),e.\u0275\u0275property("ngIf",e.\u0275\u0275pipeBind1(37,37,i.enabledFeature$)),e.\u0275\u0275advance(5),e.\u0275\u0275property("alignItemsCenter",!0)("cardFooter",i.isAlertmanagerConfigured&&i.prometheusAlertService.alerts.length)("fullHeight",!0),e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf",i.prometheusAlertService.alerts.length),e.\u0275\u0275advance(3),e.\u0275\u0275property("ngIf",null==i.healthData?null:i.healthData.status)("ngIfElse",r),e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf",!(null!=i.healthData&&null!=i.healthData.checks&&i.healthData.checks.length)),e.\u0275\u0275advance(),e.\u0275\u0275property("dropShadow",!0)("autoAlign",!0),e.\u0275\u0275advance(2),e.\u0275\u0275property("ngIf",null==i.healthData||null==i.healthData.checks?null:i.healthData.checks.length),e.\u0275\u0275advance(4),e.\u0275\u0275property("ngIf",null==i.healthData?null:i.healthData.checks),e.\u0275\u0275advance(2),e.\u0275\u0275property("ngIf",i.hasHardwareError),e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf",i.isAlertmanagerConfigured&&i.prometheusAlertService.alerts.length),e.\u0275\u0275advance(2),e.\u0275\u0275property("fullHeight",!0),e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf",i.capacity),e.\u0275\u0275advance(5),e.\u0275\u0275property("ngIf",i.capacity),e.\u0275\u0275advance(),e.\u0275\u0275property("labelsArray",e.\u0275\u0275pureFunction0(39,As))("dataArray",e.\u0275\u0275pureFunction2(40,Co,i.queriesResults.READIOPS,i.queriesResults.WRITEIOPS)),e.\u0275\u0275advance(),e.\u0275\u0275property("labelsArray",e.\u0275\u0275pureFunction0(43,MT))("dataArray",e.\u0275\u0275pureFunction2(44,Co,i.queriesResults.READLATENCY,i.queriesResults.WRITELATENCY)),e.\u0275\u0275advance(),e.\u0275\u0275property("labelsArray",e.\u0275\u0275pureFunction0(47,As))("dataArray",e.\u0275\u0275pureFunction2(48,Co,i.queriesResults.READCLIENTTHROUGHPUT,i.queriesResults.WRITECLIENTTHROUGHPUT)),e.\u0275\u0275advance(),e.\u0275\u0275property("labelsArray",e.\u0275\u0275pureFunction0(51,RT))("dataArray",e.\u0275\u0275pureFunction1(52,So,i.queriesResults.RECOVERYBYTES))}},dependencies:[Ia,l.NgClass,l.NgForOf,l.NgIf,l.NgTemplateOutlet,l.NgStyle,Aa.i,Qh.C,ST,De.S,m.RouterLink,V.NgbTooltip,Da.SimplebarAngularComponent,L.Toggletip,L.ToggletipButton,L.ToggletipContent,L.InlineLoading,Os,Ps.P,bs.M,l.AsyncPipe,Wi,po.D,Ht.Q,hT.w,Ns.j,TT.Z,FT.n,vT],styles:[".details[_ngcontent-%COMP%]{font-size:larger}.details[_ngcontent-%COMP%]   dt[_ngcontent-%COMP%]{margin-bottom:.3rem}.details[_ngcontent-%COMP%]   dd[_ngcontent-%COMP%]{margin-bottom:.8rem}.status[_ngcontent-%COMP%]   .viewAlert[_ngcontent-%COMP%]{position:absolute;right:2rem;top:2rem}.alerts[_ngcontent-%COMP%]   ngx-simplebar[_ngcontent-%COMP%]{height:13.5rem;overflow-x:hidden}.alerts[_ngcontent-%COMP%]   .text-truncate[_ngcontent-%COMP%]{-webkit-box-orient:vertical;display:-webkit-box;-webkit-line-clamp:2;white-space:normal}"]})}}return n})();const qT=["chartCanvas"],e2=["chartTooltip"];let t2=(()=>{class n{constructor(t,o,i){this.dimlessBinary=t,this.dimless=o,this.cssHelper=i,this.config={},this.isBytesData=!1,this.showLabelAsTooltip=!1,this.prepareFn=new e.EventEmitter,this.doughnutChartPlugins=[{id:"center_text",beforeDraw(r){const p=new oo._,F="Helvetica Neue, Helvetica, Arial, sans-serif";Kt.defaults.font.family=F;const D=r.ctx;if(!r.options.plugins.center_text||!r.data.datasets[0].label)return;D.save();const x=r.data.datasets[0].label.split("\n"),H=(r.chartArea.left+r.chartArea.right)/2,X=(r.chartArea.top+r.chartArea.bottom)/2;D.textAlign="center",D.textBaseline="middle",D.font=`24px ${F}`,D.fillStyle=p.propertyValue("chart-color-center-text"),D.fillText(x[0],H,X-10),x.length>1&&(D.font=`14px ${F}`,D.fillStyle=p.propertyValue("chart-color-center-text-description"),D.fillText(x[1],H,X+10)),D.restore()}}],this.chartConfig={chartType:"doughnut",dataset:[{label:null,borderWidth:0,backgroundColor:[this.cssHelper.propertyValue("chart-color-green"),this.cssHelper.propertyValue("chart-color-yellow"),this.cssHelper.propertyValue("chart-color-orange"),this.cssHelper.propertyValue("chart-color-red"),this.cssHelper.propertyValue("chart-color-blue")]}],options:{cutout:"90%",events:["click","mouseout","touchstart"],aspectRatio:2,plugins:{center_text:!0,legend:{display:!0,position:"right",labels:{boxWidth:10,usePointStyle:!1}},tooltips:{enabled:!0,displayColors:!1,backgroundColor:this.cssHelper.propertyValue("chart-color-tooltip-background"),cornerRadius:0,bodyFontSize:14,bodyFontStyle:"600",position:"nearest",xPadding:12,yPadding:12,callbacks:{label:(r,p)=>{let F=p.labels[r.index];return F.includes("%")||(F=`${F} (${p.datasets[r.datasetIndex].data[r.index]}%)`),F}}},title:{display:!1}}}}}ngOnInit(){new dn.I(this.chartCanvasRef,this.chartTooltipRef,(r,p)=>p+r.caretX+"px",(r,p)=>p+r.caretY-r.height-10+"px").getBody=r=>this.getChartTooltipBody(r),E().merge(this.chartConfig,this.config),this.prepareFn.emit([this.chartConfig,this.data])}ngOnChanges(){this.prepareFn.emit([this.chartConfig,this.data]),this.setChartSliceBorderWidth()}getChartTooltipBody(t){const o=t[0].split(": ");return this.showLabelAsTooltip?o[0]:(o[1]=this.isBytesData?this.dimlessBinary.transform(o[1]):this.dimless.transform(o[1]),o.join(": "))}setChartSliceBorderWidth(){let t=0;E().forEach(this.chartConfig.dataset[0].data,function(o){o>0&&(t+=1)}),this.chartConfig.dataset[0].borderWidth=t>1?1:0}static{this.\u0275fac=function(o){return new(o||n)(e.\u0275\u0275directiveInject(mt.l),e.\u0275\u0275directiveInject(Gt.u),e.\u0275\u0275directiveInject(oo._))}}static{this.\u0275cmp=e.\u0275\u0275defineComponent({type:n,selectors:[["cd-health-pie"]],viewQuery:function(o,i){if(1&o&&(e.\u0275\u0275viewQuery(qT,7),e.\u0275\u0275viewQuery(e2,7)),2&o){let r;e.\u0275\u0275queryRefresh(r=e.\u0275\u0275loadQuery())&&(i.chartCanvasRef=r.first),e.\u0275\u0275queryRefresh(r=e.\u0275\u0275loadQuery())&&(i.chartTooltipRef=r.first)}},inputs:{data:"data",config:"config",isBytesData:"isBytesData",tooltipFn:"tooltipFn",showLabelAsTooltip:"showLabelAsTooltip"},outputs:{prepareFn:"prepareFn"},features:[e.\u0275\u0275NgOnChangesFeature],decls:5,vars:5,consts:[["chartCanvas",""],["chartTooltip",""],[1,"chart-container"],["baseChart","",1,"chart-canvas",3,"datasets","type","options","labels","plugins"],[1,"chartjs-tooltip"]],template:function(o,i){1&o&&(e.\u0275\u0275elementStart(0,"div",2),e.\u0275\u0275element(1,"canvas",3,0)(3,"div",4,1),e.\u0275\u0275elementEnd()),2&o&&(e.\u0275\u0275advance(),e.\u0275\u0275property("datasets",i.chartConfig.dataset)("type",i.chartConfig.chartType)("options",i.chartConfig.options)("labels",i.chartConfig.labels)("plugins",i.doughnutChartPlugins))},dependencies:[Nt.BaseChartDirective],styles:['.chart-container[_ngcontent-%COMP%]{cursor:pointer;margin:auto;overflow:visible;position:absolute}canvas[_ngcontent-%COMP%]{user-select:none}.chartjs-tooltip[_ngcontent-%COMP%]{background:#000000b3;border-radius:3px;color:#fff;font-family:Helvetica Neue,Helvetica,Arial,sans-serif!important;opacity:0;pointer-events:none;position:absolute;transform:translate(-50%);transition:all .1s ease}.chartjs-tooltip.transform-left[_ngcontent-%COMP%]{transform:translate(-10%)}.chartjs-tooltip.transform-left[_ngcontent-%COMP%]:after{left:10%}.chartjs-tooltip.transform-right[_ngcontent-%COMP%]{transform:translate(-90%)}.chartjs-tooltip.transform-right[_ngcontent-%COMP%]:after{left:90%}.chartjs-tooltip[_ngcontent-%COMP%]:after{border-color:#000 transparent transparent transparent;border-style:solid;border-width:5px;content:" ";left:50%;margin-left:-5px;position:absolute;top:100%}  .chartjs-tooltip-key{display:inline-block;height:10px;margin-right:10px;width:10px}.chart-container[_ngcontent-%COMP%]{height:100%;margin-left:auto;margin-right:auto;position:unset;width:100%}.chart-canvas[_ngcontent-%COMP%]{height:100%;margin-left:auto;margin-right:auto;max-height:100%;max-width:100%;position:unset;width:100%}']})}}return n})();const n2=["*"];function o2(n,c){if(1&n&&(e.\u0275\u0275elementStart(0,"a",6),e.\u0275\u0275text(1),e.\u0275\u0275elementEnd()),2&n){const t=e.\u0275\u0275nextContext();e.\u0275\u0275property("routerLink",t.link),e.\u0275\u0275advance(),e.\u0275\u0275textInterpolate(t.cardTitle)}}function i2(n,c){if(1&n&&e.\u0275\u0275text(0),2&n){const t=e.\u0275\u0275nextContext();e.\u0275\u0275textInterpolate1(" ",t.cardTitle," ")}}let a2=(()=>{class n{constructor(){this.cardClass=""}static{this.\u0275fac=function(o){return new(o||n)}}static{this.\u0275cmp=e.\u0275\u0275defineComponent({type:n,selectors:[["cd-info-card"]],inputs:{cardTitle:"cardTitle",link:"link",cardClass:"cardClass",contentClass:"contentClass"},ngContentSelectors:n2,decls:8,vars:4,consts:[["noLinkTitle",""],[1,"card","shadow-sm",3,"ngClass"],[1,"card-body","d-flex","align-items-center","justify-content-center"],[1,"card-title","m-4"],[3,"routerLink",4,"ngIf","ngIfElse"],[1,"card-text","text-center",3,"ngClass"],[3,"routerLink"]],template:function(o,i){if(1&o&&(e.\u0275\u0275projectionDef(),e.\u0275\u0275elementStart(0,"div",1)(1,"div",2)(2,"h4",3),e.\u0275\u0275template(3,o2,2,2,"a",4)(4,i2,1,1,"ng-template",null,0,e.\u0275\u0275templateRefExtractor),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(6,"div",5),e.\u0275\u0275projection(7),e.\u0275\u0275elementEnd()()()),2&o){const r=e.\u0275\u0275reference(5);e.\u0275\u0275property("ngClass",i.cardClass),e.\u0275\u0275advance(3),e.\u0275\u0275property("ngIf",i.link)("ngIfElse",r),e.\u0275\u0275advance(3),e.\u0275\u0275property("ngClass",i.contentClass)}},dependencies:[l.NgClass,l.NgIf,m.RouterLink],styles:[".card[_ngcontent-%COMP%]{font-size:12px;border:.5px solid #dee2e6;border-radius:3px;height:100%}@media screen and (min-width: 320px){.card[_ngcontent-%COMP%]{font-size:calc(12px + 9 * (100vw - 320px) / 1728)}}@media screen and (min-width: 2048px){.card[_ngcontent-%COMP%]{font-size:21px}}.card[_ngcontent-%COMP%]   .card-body[_ngcontent-%COMP%]{padding-top:40px!important}.card[_ngcontent-%COMP%]   .card-body[_ngcontent-%COMP%]   .card-title[_ngcontent-%COMP%]{left:-.6rem;position:absolute;top:-.3rem}.card[_ngcontent-%COMP%]   .card-body[_ngcontent-%COMP%]   .card-title[_ngcontent-%COMP%] > a[_ngcontent-%COMP%]{color:#25828e}.no-center[_ngcontent-%COMP%]{left:unset;position:unset;top:unset;transform:unset}.content-highlight[_ngcontent-%COMP%]{font-weight:700}"]})}}return n})();const s2=["*"];let r2=(()=>{class n{constructor(){this.icons=g.FI}static{this.\u0275fac=function(o){return new(o||n)}}static{this.\u0275cmp=e.\u0275\u0275defineComponent({type:n,selectors:[["cd-info-group"]],inputs:{groupTitle:"groupTitle"},ngContentSelectors:s2,decls:12,vars:8,consts:()=>{let t,o;return t=$localize`:␟16bd21c1b48036d54c6a595f5cff2540cfba7f60␟858192247408211331:here`,o=$localize`:␟9ae065c4c8cdcd73371c579bcd0b2779f201f143␟5198100637238571041:For an overview of ${"\ufffd0\ufffd"}:INTERPOLATION: widgets click ${"\ufffd#8\ufffd"}:START_TAG_CD_DOC:${"\ufffd/#8\ufffd"}:CLOSE_TAG_CD_DOC:`,[o,[1,"row"],[1,"info-group-title"],["data-testid","group-title"],["iconClass","fa fa-info-circle fa-2xs"],[1,"text-center"],["docText",t,3,"section"]]},template:function(o,i){1&o&&(e.\u0275\u0275projectionDef(),e.\u0275\u0275elementStart(0,"div",1)(1,"div",2)(2,"span",3),e.\u0275\u0275text(3),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(4,"cd-helper",4)(5,"div",5),e.\u0275\u0275i18nStart(6,0),e.\u0275\u0275pipe(7,"lowercase"),e.\u0275\u0275element(8,"cd-doc",6),e.\u0275\u0275pipe(9,"lowercase"),e.\u0275\u0275i18nEnd(),e.\u0275\u0275elementEnd()()()(),e.\u0275\u0275elementStart(10,"div",1),e.\u0275\u0275projection(11),e.\u0275\u0275elementEnd()),2&o&&(e.\u0275\u0275advance(3),e.\u0275\u0275textInterpolate(i.groupTitle),e.\u0275\u0275advance(5),e.\u0275\u0275propertyInterpolate1("section","dashboard-landing-page-",e.\u0275\u0275pipeBind1(9,4,i.groupTitle),""),e.\u0275\u0275advance(),e.\u0275\u0275i18nExp(e.\u0275\u0275pipeBind1(7,6,i.groupTitle)),e.\u0275\u0275i18nApply(6))},dependencies:[b.m,fo.C,l.LowerCasePipe],styles:[".info-group-title[_ngcontent-%COMP%]{font-size:1.75rem;margin:0 0 .5vw}.popover-icon[_ngcontent-%COMP%]{color:#25828e}.popover-icon[_ngcontent-%COMP%]:focus{box-shadow:none}"]})}}return n})();var ya=function(n){return n.HEALTH_ERR="error",n.HEALTH_WARN="warning",n.HEALTH_OK="ok",n}(ya||{});let Ls=(()=>{class n{transform(t){return Object.keys(ya).includes(t)?ya[t]:null}static{this.\u0275fac=function(o){return new(o||n)}}static{this.\u0275pipe=e.\u0275\u0275definePipe({name:"healthLabel",type:n,pure:!0})}}return n})(),l2=(()=>{class n{transform(t){return t?$localize`${t.monmap.mons.length.toString()} (quorum \
${t.quorum.join(", ")})`:""}static{this.\u0275fac=function(o){return new(o||n)}}static{this.\u0275pipe=e.\u0275\u0275definePipe({name:"monSummary",type:n,pure:!0})}}return n})(),_2=(()=>{class n{transform(t){if(!t)return"";let o=0,i=0,r=0,p=0;E().each(t.osds,H=>{H.in&&o++,H.up&&i++,H.state.includes("nearfull")&&r++,H.state.includes("full")&&p++});const F=[{content:`${t.osds.length} ${$localize`total`}`,class:""}];F.push({content:"",class:"card-text-line-break"}),F.push({content:`${i} ${$localize`up`}, ${o} ${$localize`in`}`,class:""});const D=t.osds.length-i,x=t.osds.length-o;if(D>0||x>0){F.push({content:"",class:"card-text-line-break"});const H=D>0?`${D} ${$localize`down`}`:"",Z=x>0?`${x} ${$localize`out`}`:"";F.push({content:`${H}${D>0&&x>0?", ":""}${Z}`,class:"card-text-error"})}return r>0&&F.push({content:"",class:"card-text-line-break"},{content:`${r} ${$localize`near full`}`,class:"card-text-error"},{content:"",class:"card-text-line-break"}),p>0&&F.push({content:`${p} ${$localize`full`}`,class:"card-text-error"}),F}static{this.\u0275fac=function(o){return new(o||n)}}static{this.\u0275pipe=e.\u0275\u0275definePipe({name:"osdDashboardSummary",type:n,pure:!0})}}return n})(),c2=(()=>{class n{transform(t){if(!t)return"";let o=$localize`n/a`;const i=E().isUndefined(t.active_name)?"":`${$localize`active daemon`}: ${t.active_name}`;i.length>0&&(o="1");const r=t.standbys.map(x=>x.name).join(", "),p=r?`${$localize`standby daemons`}: ${r}`:"",F=t.standbys.length,D=[{content:`${o} ${$localize`active`}`,class:"popover-info",titleText:i}];return D.push({content:"",class:"card-text-line-break",titleText:""}),D.push({content:`${F} ${$localize`standby`}`,class:"popover-info",titleText:p}),D}static{this.\u0275fac=function(o){return new(o||n)}}static{this.\u0275pipe=e.\u0275\u0275definePipe({name:"mgrDashboardSummary",type:n,pure:!0})}}return n})(),d2=(()=>{class n{transform(t){if(!t)return"";let o="",i="",r=0,p=0,F=0;E().each(t.standbys,()=>{r+=1}),t.standbys&&!t.filesystems?(o=`${r} ${$localize`up`}`,i=$localize`no filesystems`):0===t.filesystems.length?o=$localize`no filesystems`:(E().each(t.filesystems,be=>{E().each(be.mdsmap.info,Pe=>{"up:standby-replay"===Pe.state?F+=1:p+=1})}),o=`${p} ${$localize`active`}`,i=`${r+F} ${$localize`standby`}`);const D=t.standbys.map(be=>be.name).join(", "),x=D?`${$localize`standby daemons`}: ${D}`:"",H=t.filesystems?t.filesystems.length:0,Z=Object.values(H>0?t.filesystems[0].mdsmap.info:{}).map(be=>be.name).join(", ");let re=Z?`${$localize`active daemon`}: ${Z}`:"";!p&&H>0&&(re=`${F} ${$localize`standbyReplay`}`);const pe=[{content:o,class:"popover-info",titleText:re}];return i&&(pe.push({content:"",class:"card-text-line-break",titleText:""}),pe.push({content:i,class:"popover-info",titleText:x})),pe}static{this.\u0275fac=function(o){return new(o||n)}}static{this.\u0275pipe=e.\u0275\u0275definePipe({name:"mdsDashboardSummary",type:n,pure:!0})}}return n})();const u2=n=>({"card-text-error":n}),p2=n=>[n];function m2(n,c){1&n&&e.\u0275\u0275element(0,"i",25)}function f2(n,c){if(1&n&&(e.\u0275\u0275elementContainerStart(0),e.\u0275\u0275elementStart(1,"cds-toggletip",18)(2,"div",19)(3,"span",20),e.\u0275\u0275pipe(4,"healthColor"),e.\u0275\u0275text(5),e.\u0275\u0275pipe(6,"healthLabel"),e.\u0275\u0275pipe(7,"uppercase"),e.\u0275\u0275template(8,m2,1,0,"i",21),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(9,"div",22)(10,"div",23),e.\u0275\u0275element(11,"cd-health-checks",24),e.\u0275\u0275elementEnd()()(),e.\u0275\u0275elementContainerEnd()),2&n){const t=e.\u0275\u0275nextContext(4);e.\u0275\u0275advance(),e.\u0275\u0275property("dropShadow",!0)("autoAlign",!0),e.\u0275\u0275advance(2),e.\u0275\u0275property("ngStyle",e.\u0275\u0275pipeBind1(4,6,t.healthData.health.status)),e.\u0275\u0275advance(2),e.\u0275\u0275textInterpolate1(" ",e.\u0275\u0275pipeBind1(7,10,e.\u0275\u0275pipeBind1(6,8,t.healthData.health.status))," "),e.\u0275\u0275advance(3),e.\u0275\u0275property("ngIf","HEALTH_OK"!==(null==t.healthData.health?null:t.healthData.health.status)),e.\u0275\u0275advance(3),e.\u0275\u0275property("healthData",t.healthData)}}function E2(n,c){if(1&n&&(e.\u0275\u0275elementContainerStart(0),e.\u0275\u0275elementStart(1,"div",26),e.\u0275\u0275pipe(2,"healthColor"),e.\u0275\u0275text(3),e.\u0275\u0275pipe(4,"healthLabel"),e.\u0275\u0275pipe(5,"uppercase"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementContainerEnd()),2&n){const t=e.\u0275\u0275nextContext(4);e.\u0275\u0275advance(),e.\u0275\u0275property("ngStyle",e.\u0275\u0275pipeBind1(2,2,null==t.healthData?null:t.healthData.health.status)),e.\u0275\u0275advance(2),e.\u0275\u0275textInterpolate1(" ",e.\u0275\u0275pipeBind1(5,6,e.\u0275\u0275pipeBind1(4,4,null==t.healthData?null:t.healthData.health.status))," ")}}function g2(n,c){if(1&n&&(e.\u0275\u0275elementStart(0,"cd-info-card",16),e.\u0275\u0275template(1,f2,12,12,"ng-container",17)(2,E2,6,8,"ng-container",17),e.\u0275\u0275elementEnd()),2&n){const t=e.\u0275\u0275nextContext(3);e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf",(null==t.healthData.health||null==t.healthData.health.checks?null:t.healthData.health.checks.length)>0),e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf",!(null!=t.healthData&&null!=t.healthData.health&&null!=t.healthData.health.checks&&t.healthData.health.checks.length))}}function C2(n,c){if(1&n&&(e.\u0275\u0275elementStart(0,"cd-info-card",27),e.\u0275\u0275text(1),e.\u0275\u0275elementEnd()),2&n){const t=e.\u0275\u0275nextContext(3);e.\u0275\u0275advance(),e.\u0275\u0275textInterpolate1(" ",null==t.healthData?null:t.healthData.hosts," total ")}}function S2(n,c){if(1&n&&(e.\u0275\u0275elementStart(0,"cd-info-card",28),e.\u0275\u0275text(1),e.\u0275\u0275pipe(2,"monSummary"),e.\u0275\u0275elementEnd()),2&n){const t=e.\u0275\u0275nextContext(3);e.\u0275\u0275advance(),e.\u0275\u0275textInterpolate1(" ",e.\u0275\u0275pipeBind1(2,1,null==t.healthData?null:t.healthData.mon_status)," ")}}function h2(n,c){if(1&n&&(e.\u0275\u0275elementStart(0,"span",31),e.\u0275\u0275text(1),e.\u0275\u0275elementEnd()),2&n){const t=c.$implicit;e.\u0275\u0275property("ngClass",t.class),e.\u0275\u0275advance(),e.\u0275\u0275textInterpolate1(" ",t.content," ")}}function T2(n,c){if(1&n&&(e.\u0275\u0275elementStart(0,"cd-info-card",29),e.\u0275\u0275template(1,h2,2,2,"span",30),e.\u0275\u0275elementEnd()),2&n){const t=c.ngIf;e.\u0275\u0275advance(),e.\u0275\u0275property("ngForOf",t)}}function F2(n,c){if(1&n&&(e.\u0275\u0275elementStart(0,"span",34),e.\u0275\u0275text(1),e.\u0275\u0275elementEnd()),2&n){const t=c.$implicit;e.\u0275\u0275property("ngClass",t.class)("title",null!=t.titleText?t.titleText:""),e.\u0275\u0275advance(),e.\u0275\u0275textInterpolate1(" ",t.content," ")}}function v2(n,c){if(1&n&&(e.\u0275\u0275elementStart(0,"cd-info-card",32),e.\u0275\u0275template(1,F2,2,3,"span",33),e.\u0275\u0275pipe(2,"mgrDashboardSummary"),e.\u0275\u0275elementEnd()),2&n){const t=e.\u0275\u0275nextContext(3);e.\u0275\u0275advance(),e.\u0275\u0275property("ngForOf",e.\u0275\u0275pipeBind1(2,1,null==t.healthData?null:t.healthData.mgr_map))}}function M2(n,c){if(1&n&&(e.\u0275\u0275elementStart(0,"cd-info-card",35),e.\u0275\u0275text(1),e.\u0275\u0275elementEnd()),2&n){const t=e.\u0275\u0275nextContext(3);e.\u0275\u0275advance(),e.\u0275\u0275textInterpolate1(" ",null==t.healthData?null:t.healthData.rgw," total ")}}function R2(n,c){if(1&n&&(e.\u0275\u0275elementStart(0,"span",34),e.\u0275\u0275text(1),e.\u0275\u0275elementEnd()),2&n){const t=c.$implicit;e.\u0275\u0275property("ngClass",t.class)("title",null!==t.titleText?t.titleText:""),e.\u0275\u0275advance(),e.\u0275\u0275textInterpolate1(" ",t.content," ")}}function O2(n,c){if(1&n&&(e.\u0275\u0275elementStart(0,"cd-info-card",36),e.\u0275\u0275template(1,R2,2,3,"span",33),e.\u0275\u0275elementEnd()),2&n){const t=c.ngIf;e.\u0275\u0275property("contentClass",(t.length>1?"text-area-size-2":"")+" content-highlight"),e.\u0275\u0275advance(),e.\u0275\u0275property("ngForOf",t)}}function P2(n,c){if(1&n&&(e.\u0275\u0275elementStart(0,"cd-info-card",37),e.\u0275\u0275text(1),e.\u0275\u0275element(2,"span",38),e.\u0275\u0275text(3),e.\u0275\u0275elementStart(4,"span",31),e.\u0275\u0275text(5),e.\u0275\u0275elementEnd()()),2&n){const t=e.\u0275\u0275nextContext(3);e.\u0275\u0275advance(),e.\u0275\u0275textInterpolate1(" ",(null==t.healthData?null:t.healthData.iscsi_daemons.up)+(null==t.healthData?null:t.healthData.iscsi_daemons.down)," total "),e.\u0275\u0275advance(2),e.\u0275\u0275textInterpolate1(" ",null==t.healthData?null:t.healthData.iscsi_daemons.up," up, "),e.\u0275\u0275advance(),e.\u0275\u0275property("ngClass",e.\u0275\u0275pureFunction1(4,u2,(null==t.healthData?null:t.healthData.iscsi_daemons.down)>0)),e.\u0275\u0275advance(),e.\u0275\u0275textInterpolate1("",null==t.healthData?null:t.healthData.iscsi_daemons.down," down")}}function b2(n,c){if(1&n&&(e.\u0275\u0275elementStart(0,"cd-info-group",7),e.\u0275\u0275template(1,g2,3,2,"cd-info-card",8)(2,C2,2,1,"cd-info-card",9)(3,S2,3,3,"cd-info-card",10)(4,T2,2,1,"cd-info-card",11),e.\u0275\u0275pipe(5,"osdDashboardSummary"),e.\u0275\u0275template(6,v2,3,3,"cd-info-card",12)(7,M2,2,1,"cd-info-card",13)(8,O2,2,2,"cd-info-card",14),e.\u0275\u0275pipe(9,"mdsDashboardSummary"),e.\u0275\u0275template(10,P2,6,6,"cd-info-card",15),e.\u0275\u0275elementEnd()),2&n){const t=e.\u0275\u0275nextContext().ngIf,o=e.\u0275\u0275nextContext();e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf",null==o.healthData.health?null:o.healthData.health.status),e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf",null!=(null==o.healthData?null:o.healthData.hosts)),e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf",null==o.healthData?null:o.healthData.mon_status),e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf",e.\u0275\u0275pipeBind1(5,8,null==o.healthData?null:o.healthData.osd_map)),e.\u0275\u0275advance(2),e.\u0275\u0275property("ngIf",null==o.healthData?null:o.healthData.mgr_map),e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf",(null==t?null:t.rgw)&&null!=(null==o.healthData?null:o.healthData.rgw)),e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf",e.\u0275\u0275pipeBind1(9,10,(null==t?null:t.cephfs)&&(null==o.healthData?null:o.healthData.fs_map))),e.\u0275\u0275advance(2),e.\u0275\u0275property("ngIf",(null==t?null:t.iscsi)&&null!=(null==o.healthData?null:o.healthData.iscsi_daemons))}}function N2(n,c){if(1&n){const t=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"cd-info-card",45)(1,"cd-health-pie",46),e.\u0275\u0275listener("prepareFn",function(i){e.\u0275\u0275restoreView(t);const r=e.\u0275\u0275nextContext(3);return e.\u0275\u0275resetView(r.prepareRawUsage(i[0],i[1]))}),e.\u0275\u0275elementEnd()()}if(2&n){const t=e.\u0275\u0275nextContext(3);e.\u0275\u0275advance(),e.\u0275\u0275property("data",t.healthData)("config",t.rawCapacityChartConfig)("isBytesData",!0)}}function I2(n,c){if(1&n){const t=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"cd-info-card",47)(1,"cd-health-pie",48),e.\u0275\u0275listener("prepareFn",function(i){e.\u0275\u0275restoreView(t);const r=e.\u0275\u0275nextContext(3);return e.\u0275\u0275resetView(r.prepareObjects(i[0],i[1]))}),e.\u0275\u0275elementEnd()()}if(2&n){const t=e.\u0275\u0275nextContext(3);e.\u0275\u0275advance(),e.\u0275\u0275property("data",t.healthData)}}function A2(n,c){1&n&&e.\u0275\u0275elementContainer(0)}function D2(n,c){if(1&n&&(e.\u0275\u0275elementStart(0,"li"),e.\u0275\u0275text(1),e.\u0275\u0275elementEnd()),2&n){const t=c.$implicit;e.\u0275\u0275advance(),e.\u0275\u0275textInterpolate2(" ",t.key,": ",t.value," ")}}function y2(n,c){if(1&n){const t=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"cd-info-card",49)(1,"div",50)(2,"div",51)(3,"cd-health-pie",52),e.\u0275\u0275listener("prepareFn",function(i){e.\u0275\u0275restoreView(t);const r=e.\u0275\u0275nextContext(3);return e.\u0275\u0275resetView(r.preparePgStatus(i[0],i[1]))}),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(4,"cds-popover-content")(5,"div",23),e.\u0275\u0275template(6,A2,1,0,"ng-container",53),e.\u0275\u0275elementStart(7,"ul"),e.\u0275\u0275template(8,D2,2,2,"li",54),e.\u0275\u0275pipe(9,"keyvalue"),e.\u0275\u0275elementEnd()()()()()}if(2&n){e.\u0275\u0275nextContext(2);const t=e.\u0275\u0275reference(5),o=e.\u0275\u0275nextContext();e.\u0275\u0275advance(),e.\u0275\u0275property("dropShadow",!0),e.\u0275\u0275advance(2),e.\u0275\u0275property("data",o.healthData)("config",o.pgStatusChartConfig),e.\u0275\u0275advance(3),e.\u0275\u0275property("ngTemplateOutlet",t),e.\u0275\u0275advance(2),e.\u0275\u0275property("ngForOf",e.\u0275\u0275pipeBind1(9,5,o.healthData.pg_info.statuses))}}function L2(n,c){if(1&n&&(e.\u0275\u0275elementStart(0,"cd-info-card",55),e.\u0275\u0275text(1),e.\u0275\u0275elementEnd()),2&n){const t=e.\u0275\u0275nextContext(3);e.\u0275\u0275advance(),e.\u0275\u0275textInterpolate1(" ",null==t.healthData?null:t.healthData.pools.length," ")}}function $2(n,c){if(1&n&&(e.\u0275\u0275elementStart(0,"cd-info-card",56),e.\u0275\u0275text(1),e.\u0275\u0275pipe(2,"dimless"),e.\u0275\u0275elementEnd()),2&n){const t=e.\u0275\u0275nextContext(3);e.\u0275\u0275advance(),e.\u0275\u0275textInterpolate1(" ",e.\u0275\u0275pipeBind1(2,1,null==t.healthData?null:t.healthData.pg_info.pgs_per_osd)," ")}}function x2(n,c){if(1&n&&(e.\u0275\u0275elementStart(0,"cd-info-group",39),e.\u0275\u0275template(1,N2,2,3,"cd-info-card",40)(2,I2,2,1,"cd-info-card",41)(3,y2,10,7,"cd-info-card",42)(4,L2,2,1,"cd-info-card",43)(5,$2,3,3,"cd-info-card",44),e.\u0275\u0275elementEnd()),2&n){const t=e.\u0275\u0275nextContext(2);e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf",null==t.healthData?null:t.healthData.df),e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf",null!=(null==t.healthData||null==t.healthData.pg_info||null==t.healthData.pg_info.object_stats?null:t.healthData.pg_info.object_stats.num_objects)),e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf",t.healthData.pg_info),e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf",null==t.healthData?null:t.healthData.pools),e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf",null==t.healthData?null:t.healthData.pg_info)}}function U2(n,c){if(1&n){const t=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"cd-info-card",62)(1,"cd-health-pie",52),e.\u0275\u0275listener("prepareFn",function(i){e.\u0275\u0275restoreView(t);const r=e.\u0275\u0275nextContext(3);return e.\u0275\u0275resetView(r.prepareReadWriteRatio(i[0],i[1]))}),e.\u0275\u0275elementEnd()()}if(2&n){const t=e.\u0275\u0275nextContext(3);e.\u0275\u0275advance(),e.\u0275\u0275property("data",t.healthData)("config",t.clientStatsConfig)}}function w2(n,c){if(1&n){const t=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"cd-info-card",63)(1,"cd-health-pie",52),e.\u0275\u0275listener("prepareFn",function(i){e.\u0275\u0275restoreView(t);const r=e.\u0275\u0275nextContext(3);return e.\u0275\u0275resetView(r.prepareClientThroughput(i[0],i[1]))}),e.\u0275\u0275elementEnd()()}if(2&n){const t=e.\u0275\u0275nextContext(3);e.\u0275\u0275advance(),e.\u0275\u0275property("data",t.healthData)("config",t.clientStatsConfig)}}function G2(n,c){if(1&n&&(e.\u0275\u0275elementStart(0,"cd-info-card",64),e.\u0275\u0275text(1),e.\u0275\u0275pipe(2,"dimlessBinary"),e.\u0275\u0275elementEnd()),2&n){const t=e.\u0275\u0275nextContext(3);e.\u0275\u0275advance(),e.\u0275\u0275textInterpolate1(" ",e.\u0275\u0275pipeBind1(2,1,null==t.healthData?null:t.healthData.client_perf.recovering_bytes_per_sec)+"/s"," ")}}function H2(n,c){if(1&n&&(e.\u0275\u0275elementStart(0,"cd-info-card",65),e.\u0275\u0275text(1),e.\u0275\u0275elementEnd()),2&n){const t=e.\u0275\u0275nextContext(3);e.\u0275\u0275advance(),e.\u0275\u0275textInterpolate1(" ",null==t.healthData?null:t.healthData.scrub_status," ")}}function V2(n,c){if(1&n&&(e.\u0275\u0275elementStart(0,"cd-info-group",57),e.\u0275\u0275template(1,U2,2,2,"cd-info-card",58)(2,w2,2,2,"cd-info-card",59)(3,G2,3,3,"cd-info-card",60)(4,H2,2,1,"cd-info-card",61),e.\u0275\u0275elementEnd()),2&n){const t=e.\u0275\u0275nextContext(2);e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf",null==t.healthData?null:t.healthData.client_perf),e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf",null==t.healthData?null:t.healthData.client_perf),e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf",null==t.healthData?null:t.healthData.client_perf),e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf",null==t.healthData?null:t.healthData.scrub_status)}}function B2(n,c){if(1&n&&(e.\u0275\u0275elementContainerStart(0),e.\u0275\u0275elementStart(1,"p",66),e.\u0275\u0275i18nStart(2,1),e.\u0275\u0275element(3,"i",31)(4,"a",67),e.\u0275\u0275i18nEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementContainerEnd()),2&n){const t=e.\u0275\u0275nextContext(3);e.\u0275\u0275advance(3),e.\u0275\u0275property("ngClass",e.\u0275\u0275pureFunction1(1,p2,t.icons.infoCircle))}}function z2(n,c){if(1&n&&e.\u0275\u0275template(0,B2,5,3,"ng-container",17),2&n){const t=e.\u0275\u0275nextContext(2);e.\u0275\u0275property("ngIf",null==t.permissions||null==t.permissions.log?null:t.permissions.log.read)}}function X2(n,c){if(1&n&&(e.\u0275\u0275elementStart(0,"div",3),e.\u0275\u0275template(1,b2,11,12,"cd-info-group",4)(2,x2,6,5,"cd-info-group",5)(3,V2,5,4,"cd-info-group",6)(4,z2,1,1,"ng-template",null,0,e.\u0275\u0275templateRefExtractor),e.\u0275\u0275elementEnd()),2&n){const t=e.\u0275\u0275nextContext();e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf",(null==t.healthData||null==t.healthData.health?null:t.healthData.health.status)||(null==t.healthData?null:t.healthData.mon_status)||(null==t.healthData?null:t.healthData.osd_map)||(null==t.healthData?null:t.healthData.mgr_map)||null!=(null==t.healthData?null:t.healthData.hosts)||null!=(null==t.healthData?null:t.healthData.rgw)||(null==t.healthData?null:t.healthData.fs_map)||null!=(null==t.healthData?null:t.healthData.iscsi_daemons)),e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf",(null==t.healthData?null:t.healthData.pools)||(null==t.healthData?null:t.healthData.df)||(null==t.healthData?null:t.healthData.pg_info)),e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf",(null==t.healthData?null:t.healthData.client_perf)||(null==t.healthData?null:t.healthData.scrub_status))}}let k2=(()=>{class n{constructor(t,o,i,r,p,F,D,x,H){this.healthService=t,this.osdService=o,this.authStorageService=i,this.pgCategoryService=r,this.featureToggles=p,this.refreshIntervalService=F,this.dimlessBinary=D,this.dimless=x,this.cssHelper=H,this.osdSettings=new Fs,this.interval=new K.Subscription,this.icons=g.FI,this.clientStatsConfig={},this.rawCapacityChartConfig={},this.pgStatusChartConfig={options:{events:[""]}},this.permissions=this.authStorageService.getPermissions(),this.enabledFeature$=this.featureToggles.get()}ngOnInit(){this.clientStatsConfig={dataset:[{backgroundColor:[this.cssHelper.propertyValue("chart-color-cyan"),this.cssHelper.propertyValue("chart-color-purple")]}]},this.rawCapacityChartConfig={dataset:[{backgroundColor:[this.cssHelper.propertyValue("chart-color-blue"),this.cssHelper.propertyValue("chart-color-gray")]}]},this.interval=this.refreshIntervalService.intervalData$.subscribe(()=>{this.getHealth()}),this.osdService.getOsdSettings().pipe((0,u.take)(1)).subscribe(t=>{this.osdSettings=t})}ngOnDestroy(){this.interval.unsubscribe()}getHealth(){this.healthService.getMinimalHealth().subscribe(t=>{this.healthData=t})}prepareReadWriteRatio(t){const o=[],i=[],r=this.healthData.client_perf.write_op_per_sec+this.healthData.client_perf.read_op_per_sec;o.push(`${$localize`Reads`}: ${this.dimless.transform(this.healthData.client_perf.read_op_per_sec)} ${$localize`/s`}`),i.push(this.calcPercentage(this.healthData.client_perf.read_op_per_sec,r)),o.push(`${$localize`Writes`}: ${this.dimless.transform(this.healthData.client_perf.write_op_per_sec)} ${$localize`/s`}`),i.push(this.calcPercentage(this.healthData.client_perf.write_op_per_sec,r)),t.labels=o,t.dataset[0].data=i,t.dataset[0].label=`${this.dimless.transform(r)}\n${$localize`IOPS`}`}prepareClientThroughput(t){const o=[],i=[],r=this.healthData.client_perf.read_bytes_sec+this.healthData.client_perf.write_bytes_sec;o.push(`${$localize`Reads`}: ${this.dimlessBinary.transform(this.healthData.client_perf.read_bytes_sec)}${$localize`/s`}`),i.push(this.calcPercentage(this.healthData.client_perf.read_bytes_sec,r)),o.push(`${$localize`Writes`}: ${this.dimlessBinary.transform(this.healthData.client_perf.write_bytes_sec)}${$localize`/s`}`),i.push(this.calcPercentage(this.healthData.client_perf.write_bytes_sec,r)),t.labels=o,t.dataset[0].data=i,t.dataset[0].label=`${this.dimlessBinary.transform(r).replace(" ","\n")}${$localize`/s`}`}prepareRawUsage(t,o){const i=this.calcPercentage(o.df.stats.total_bytes-o.df.stats.total_used_raw_bytes,o.df.stats.total_bytes),r=this.calcPercentage(o.df.stats.total_used_raw_bytes,o.df.stats.total_bytes),p=this.osdSettings.nearfull_ratio,F=this.osdSettings.nearfull_ratio;this.color=p>=0&&r/100>=p?"chart-color-red":F>=0&&r/100>=F?"chart-color-yellow":"chart-color-blue",this.rawCapacityChartConfig.dataset[0].backgroundColor[0]=this.cssHelper.propertyValue(this.color),t.dataset[0].data=[r,i],t.labels=[`${$localize`Used`}: ${this.dimlessBinary.transform(o.df.stats.total_used_raw_bytes)}`,`${$localize`Avail.`}: ${this.dimlessBinary.transform(o.df.stats.total_bytes-o.df.stats.total_used_raw_bytes)}`],t.dataset[0].label=`${r}%\nof ${this.dimlessBinary.transform(o.df.stats.total_bytes)}`}preparePgStatus(t,o){const i={};let r=0;E().forEach(o.pg_info.statuses,(p,F)=>{const D=this.pgCategoryService.getTypeByStates(F);E().isUndefined(i[D])&&(i[D]=0),i[D]+=p,r+=p});for(const p of this.pgCategoryService.getAllTypes())E().isUndefined(i[p])&&(i[p]=0);t.dataset[0].data=this.pgCategoryService.getAllTypes().map(p=>this.calcPercentage(i[p],r)),t.labels=[`${$localize`Clean`}: ${this.dimless.transform(i.clean)}`,`${$localize`Working`}: ${this.dimless.transform(i.working)}`,`${$localize`Warning`}: ${this.dimless.transform(i.warning)}`,`${$localize`Unknown`}: ${this.dimless.transform(i.unknown)}`],t.dataset[0].label=`${r}\n${$localize`PGs`}`}prepareObjects(t,o){const i=o.pg_info.object_stats.num_object_copies,p=this.calcPercentage(i-o.pg_info.object_stats.num_objects_misplaced-o.pg_info.object_stats.num_objects_degraded-o.pg_info.object_stats.num_objects_unfound,i),F=this.calcPercentage(o.pg_info.object_stats.num_objects_misplaced,i),D=this.calcPercentage(o.pg_info.object_stats.num_objects_degraded,i),x=this.calcPercentage(o.pg_info.object_stats.num_objects_unfound,i);t.labels=[`${$localize`Healthy`}: ${p}%`,`${$localize`Misplaced`}: ${F}%`,`${$localize`Degraded`}: ${D}%`,`${$localize`Unfound`}: ${x}%`],t.dataset[0].data=[p,F,D,x],t.dataset[0].label=`${this.dimless.transform(o.pg_info.object_stats.num_objects)}\n${$localize`objects`}`}isClientReadWriteChartShowable(){return(this.healthData.client_perf.read_op_per_sec||0)+(this.healthData.client_perf.write_op_per_sec||0)>0}calcPercentage(t,o){return E().isNumber(t)&&E().isNumber(o)&&0!==o?Math.ceil(t/o*100*100)/100:0}static{this.\u0275fac=function(o){return new(o||n)(e.\u0275\u0275directiveInject(ue),e.\u0275\u0275directiveInject(It),e.\u0275\u0275directiveInject(_.v),e.\u0275\u0275directiveInject(Is.v),e.\u0275\u0275directiveInject($o.b),e.\u0275\u0275directiveInject(xo.s),e.\u0275\u0275directiveInject(mt.l),e.\u0275\u0275directiveInject(Gt.u),e.\u0275\u0275directiveInject(oo._))}}static{this.\u0275cmp=e.\u0275\u0275defineComponent({type:n,selectors:[["cd-health"]],decls:2,vars:3,consts:()=>{let t,o,i,r,p,F,D,x,H,X,Z,re,pe,be,Pe,he,Ue,ve,Xe,_t,ft;return t=$localize`:␟81b97b8ea996ad1e4f9fca8415021850214884b1␟5611592591303869712:Status`,o=$localize`:␟ce9dfdc6dccb28dc75a78c704e09dc18fb02dcfa␟7825570888384392250:Capacity`,i=$localize`:␟3cc9c2ae277393b3946b38c088dabff671b1ee1b␟1322586333669103999:Performance`,r=$localize`:␟73caac4265ea7314ff061e5a1d78a6361a6dd3b8␟6920224523921471777:Cluster Status`,p=$localize`:␟099b441d49333b3c6d30b36dc0a4763e64c78920␟4435206372750903836:Hosts`,F=$localize`:␟624f596cc3320f5e0a0d7c7346c364e5af9bdd8c␟5808753866335051996:Monitors`,D=$localize`:␟1a9183778f2c6473d7ccb080f651caa01faaf70c␟6024104799101504292:OSDs`,x=$localize`:␟c34287a0423968dac8a41463b80855a0ff789403␟410466951836488908:Managers`,H=$localize`:␟946ac5dea9921dc09d7b0a63b89535371f283b19␟1903142680384619113:Object Gateways`,X=$localize`:␟ff03fa5bcf37c4da46ad736c1f7d03f959e8ba9a␟7290157164080770321:Metadata Servers`,Z=$localize`:␟d817609ba4993eba859409ab71e566168f4d5f5a␟6586588838044688448:iSCSI Gateways`,re=$localize`:␟88f383269db2d32cccee9e936fe549dccb9fdbf4␟1939212557812454069:Raw Capacity`,pe=$localize`:␟afdb601c16162f2c798b16a2920955f1cc6a20aa␟7531602241051125940:Objects`,be=$localize`:␟498a109c6e9e94f1966de01aa0326f7f0ac6fb52␟5232365108332422324:PG Status`,Pe=$localize`:␟92899fa68e8ca108912163ff58edc8540e453787␟8231861638104479971:Pools`,he=$localize`:␟c5f8a813f91a11af99132e4beafc136cfc13d73b␟506046765639867851:PGs per OSD`,Ue=$localize`:␟32efd1c3f70e3c5244239de97a2cc95d98534a14␟432995555566140473:Client Read/Write`,ve=$localize`:␟52213660b2454d139ada3079a42ec6caf3c3c01e␟6224391446608458197:Client Throughput`,Xe=$localize`:␟275485415092cbae3a9f3cbb786ebe283cacfdd5␟1283020143505912089:Recovery Throughput`,_t=$localize`:␟35416fcdf9cb33d2b299d3f2028c390454b55d02␟5322576343768853305:Scrubbing`,ft=$localize`:␟e10f112a3fbdf8010309035c0b0d556666336c4b␟7539315472519057940:${"\ufffd#3\ufffd"}:START_ITALIC_TEXT:${"\ufffd/#3\ufffd"}:CLOSE_ITALIC_TEXT: See ${"\ufffd#4\ufffd"}:START_LINK:Logs${"\ufffd/#4\ufffd"}:CLOSE_LINK: for more details. `,[["logsLink",""],ft,["class","container-fluid",4,"ngIf"],[1,"container-fluid"],["groupTitle",t,4,"ngIf"],["groupTitle",o,4,"ngIf"],["groupTitle",i,4,"ngIf"],["groupTitle",t],["cardTitle",r,"class","cd-status-card","contentClass","content-highlight",4,"ngIf"],["cardTitle",p,"link","/hosts","class","cd-status-card","contentClass","content-highlight",4,"ngIf"],["cardTitle",F,"link","/monitor","class","cd-status-card","contentClass","content-highlight",4,"ngIf"],["cardTitle",D,"link","/osd","class","cd-status-card","contentClass","content-highlight",4,"ngIf"],["cardTitle",x,"class","cd-status-card","contentClass","content-highlight",4,"ngIf"],["cardTitle",H,"link","/rgw/daemon","class","cd-status-card","contentClass","content-highlight",4,"ngIf"],["cardTitle",X,"class","cd-status-card",3,"contentClass",4,"ngIf"],["cardTitle",Z,"link","/block/iscsi","class","cd-status-card","contentClass","content-highlight",4,"ngIf"],["cardTitle",r,"contentClass","content-highlight",1,"cd-status-card"],[4,"ngIf"],[3,"dropShadow","autoAlign"],["cdsToggletipButton",""],[1,"info-card-content-clickable",3,"ngStyle"],["class","fa fa-exclamation-triangle",4,"ngIf"],["cdsToggletipContent",""],[1,"cds--popover-scroll-container"],[3,"healthData"],[1,"fa","fa-exclamation-triangle"],[3,"ngStyle"],["cardTitle",p,"link","/hosts","contentClass","content-highlight",1,"cd-status-card"],["cardTitle",F,"link","/monitor","contentClass","content-highlight",1,"cd-status-card"],["cardTitle",D,"link","/osd","contentClass","content-highlight",1,"cd-status-card"],[3,"ngClass",4,"ngFor","ngForOf"],[3,"ngClass"],["cardTitle",x,"contentClass","content-highlight",1,"cd-status-card"],[3,"ngClass","title",4,"ngFor","ngForOf"],[3,"ngClass","title"],["cardTitle",H,"link","/rgw/daemon","contentClass","content-highlight",1,"cd-status-card"],["cardTitle",X,1,"cd-status-card",3,"contentClass"],["cardTitle",Z,"link","/block/iscsi","contentClass","content-highlight",1,"cd-status-card"],[1,"card-text-line-break"],["groupTitle",o],["cardTitle",re,"class","cd-capacity-card cd-chart-card","contentClass","content-chart",4,"ngIf"],["cardTitle",pe,"class","cd-capacity-card cd-chart-card","contentClass","content-chart",4,"ngIf"],["cardTitle",be,"class","cd-capacity-card cd-chart-card","contentClass","content-chart",4,"ngIf"],["cardTitle",Pe,"link","/pool","class","cd-capacity-card","contentClass","content-highlight",4,"ngIf"],["cardTitle",he,"class","cd-capacity-card","contentClass","content-highlight",4,"ngIf"],["cardTitle",re,"contentClass","content-chart",1,"cd-capacity-card","cd-chart-card"],[3,"prepareFn","data","config","isBytesData"],["cardTitle",pe,"contentClass","content-chart",1,"cd-capacity-card","cd-chart-card"],[3,"prepareFn","data"],["cardTitle",be,"contentClass","content-chart",1,"cd-capacity-card","cd-chart-card"],["cdsPopover","","placement","bottom",1,"pg-status-popover-wrapper",3,"dropShadow"],[1,"popover-trigger"],[3,"prepareFn","data","config"],[4,"ngTemplateOutlet"],[4,"ngFor","ngForOf"],["cardTitle",Pe,"link","/pool","contentClass","content-highlight",1,"cd-capacity-card"],["cardTitle",he,"contentClass","content-highlight",1,"cd-capacity-card"],["groupTitle",i],["cardTitle",Ue,"class","cd-performance-card cd-chart-card","contentClass","content-chart",4,"ngIf"],["cardTitle",ve,"class","cd-performance-card cd-chart-card","contentClass","content-chart",4,"ngIf"],["cardTitle",Xe,"class","cd-performance-card","contentClass","content-highlight",4,"ngIf"],["cardTitle",_t,"class","cd-performance-card","contentClass","content-highlight",4,"ngIf"],["cardTitle",Ue,"contentClass","content-chart",1,"cd-performance-card","cd-chart-card"],["cardTitle",ve,"contentClass","content-chart",1,"cd-performance-card","cd-chart-card"],["cardTitle",Xe,"contentClass","content-highlight",1,"cd-performance-card"],["cardTitle",_t,"contentClass","content-highlight",1,"cd-performance-card"],[1,"logs-link"],["routerLink","/logs"]]},template:function(o,i){1&o&&(e.\u0275\u0275template(0,X2,6,3,"div",2),e.\u0275\u0275pipe(1,"async")),2&o&&e.\u0275\u0275property("ngIf",e.\u0275\u0275pipeBind1(1,1,i.healthData&&i.enabledFeature$))},dependencies:[Ia,l.NgClass,l.NgForOf,l.NgIf,l.NgTemplateOutlet,l.NgStyle,m.RouterLink,L.Toggletip,L.ToggletipButton,L.ToggletipContent,t2,a2,r2,l.AsyncPipe,l.UpperCasePipe,l.KeyValuePipe,mt.l,Wi,Ls,Gt.u,l2,_2,c2,d2],styles:['cd-info-card[_ngcontent-%COMP%]{padding:0 .5vw}  cd-health .pg-status-popover-wrapper{position:relative}  cd-health .pg-status-popover-wrapper .popover{max-height:20vh;max-width:unset!important;min-width:unset!important;position:absolute;width:116%}  cd-health .pg-status-popover-wrapper .popover .popover-body{font-size:1rem;max-height:19vh;max-width:100%}.logs-link[_ngcontent-%COMP%]{text-align:center}.logs-link[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{color:#25828e}.card-text-error[_ngcontent-%COMP%]{color:#c9190b;display:inline}.card-text-line-break[_ngcontent-%COMP%]:after{content:"\\a";white-space:pre}.popover-info[_ngcontent-%COMP%]:hover{cursor:pointer}']})}}return n})();function j2(n,c){1&n&&(e.\u0275\u0275elementContainerStart(0,4),e.\u0275\u0275element(1,"cd-refresh-selector")(2,"cd-health",5),e.\u0275\u0275elementContainerEnd())}function W2(n,c){1&n&&e.\u0275\u0275element(0,"cd-dashboard-v3")}let K2=(()=>{class n{constructor(t){this.featureToggles=t,this.enabledFeature$=this.featureToggles.get()}static{this.\u0275fac=function(o){return new(o||n)(e.\u0275\u0275directiveInject($o.b))}}static{this.\u0275cmp=e.\u0275\u0275defineComponent({type:n,selectors:[["cd-dashboard"]],decls:7,vars:4,consts:[["dashboardV3",""],["aria-label","Dashboard"],["href","#main",1,"sr-only"],["class","main-padding",4,"ngIf","ngIfElse"],[1,"main-padding"],["id","main"]],template:function(o,i){if(1&o&&(e.\u0275\u0275elementStart(0,"main",1)(1,"a",2),e.\u0275\u0275text(2,"skip to content"),e.\u0275\u0275elementEnd(),e.\u0275\u0275template(3,j2,3,0,"ng-container",3),e.\u0275\u0275pipe(4,"async"),e.\u0275\u0275template(5,W2,1,0,"ng-template",null,0,e.\u0275\u0275templateRefExtractor),e.\u0275\u0275elementEnd()),2&o){let r;const p=e.\u0275\u0275reference(6);e.\u0275\u0275advance(3),e.\u0275\u0275property("ngIf",!1===(null==(r=e.\u0275\u0275pipeBind1(4,2,i.enabledFeature$))?null:r.dashboard))("ngIfElse",p)}},dependencies:[l.NgIf,wh,ZT,k2,l.AsyncPipe],styles:["main[_ngcontent-%COMP%]:has(cd-health){padding-top:20px}"]})}}return n})();var La=s(80299);let Q2=(()=>{class n{static{this.defaultFromLink="/hosts"}constructor(t){this.route=t,this.route.queryParams.subscribe(o=>{this.fromLink=o.fromLink||n.defaultFromLink}),this.route.params.subscribe(o=>{this.serviceId=decodeURIComponent(o.id),this.serviceType=o.type})}static{this.\u0275fac=function(o){return new(o||n)(e.\u0275\u0275directiveInject(m.ActivatedRoute))}}static{this.\u0275cmp=e.\u0275\u0275defineComponent({type:n,selectors:[["cd-performance-counter"]],decls:3,vars:4,consts:[[3,"serviceType","serviceId"]],template:function(o,i){1&o&&(e.\u0275\u0275elementStart(0,"legend"),e.\u0275\u0275text(1),e.\u0275\u0275elementEnd(),e.\u0275\u0275element(2,"cd-table-performance-counter",0)),2&o&&(e.\u0275\u0275advance(),e.\u0275\u0275textInterpolate2("",i.serviceType,".",i.serviceId,""),e.\u0275\u0275advance(),e.\u0275\u0275property("serviceType",i.serviceType)("serviceId",i.serviceId))},dependencies:[Ms.Y]})}}return n})();var $a=s(42902),xa=s(36719),$s=s(76857);function Y2(n,c){1&n&&(e.\u0275\u0275elementStart(0,"span",35),e.\u0275\u0275i18n(1,5),e.\u0275\u0275elementEnd())}function J2(n,c){1&n&&(e.\u0275\u0275elementStart(0,"span",35),e.\u0275\u0275i18n(1,6),e.\u0275\u0275elementEnd())}function Z2(n,c){if(1&n&&e.\u0275\u0275element(0,"cd-helper",36),2&n){const t=e.\u0275\u0275nextContext();e.\u0275\u0275propertyInterpolate("html",t.passwordPolicyHelpText)}}function q2(n,c){1&n&&(e.\u0275\u0275elementStart(0,"span",35),e.\u0275\u0275i18n(1,7),e.\u0275\u0275elementEnd())}function eF(n,c){1&n&&(e.\u0275\u0275elementStart(0,"span",35),e.\u0275\u0275i18n(1,8),e.\u0275\u0275elementEnd())}function tF(n,c){if(1&n&&(e.\u0275\u0275elementStart(0,"span",35),e.\u0275\u0275text(1),e.\u0275\u0275elementEnd()),2&n){const t=e.\u0275\u0275nextContext();e.\u0275\u0275advance(),e.\u0275\u0275textInterpolate1(" ",t.passwordValuation," ")}}function nF(n,c){1&n&&(e.\u0275\u0275elementStart(0,"span",35),e.\u0275\u0275i18n(1,9),e.\u0275\u0275elementEnd())}function oF(n,c){1&n&&(e.\u0275\u0275elementStart(0,"span",35),e.\u0275\u0275i18n(1,10),e.\u0275\u0275elementEnd())}let xs=(()=>{class n{constructor(t,o,i,r,p,F,D){this.actionLabels=t,this.notificationService=o,this.userService=i,this.authStorageService=r,this.formBuilder=p,this.router=F,this.passwordPolicyService=D,this.passwordPolicyHelpText="",this.icons=g.FI,this.action=this.actionLabels.CHANGE,this.resource=$localize`password`,this.createForm()}createForm(){this.passwordPolicyService.getHelpText().subscribe(t=>{this.passwordPolicyHelpText=t}),this.userForm=this.formBuilder.group({oldpassword:[null,[T.Validators.required,ge.xQ.custom("notmatch",()=>this.userForm&&this.userForm.getValue("newpassword")===this.userForm.getValue("oldpassword"))]],newpassword:[null,[T.Validators.required,ge.xQ.custom("notmatch",()=>this.userForm&&this.userForm.getValue("oldpassword")===this.userForm.getValue("newpassword"))],[ge.xQ.passwordPolicy(this.userService,()=>this.authStorageService.getUsername(),(t,o,i)=>{this.passwordStrengthLevelClass=this.passwordPolicyService.mapCreditsToCssClass(o),this.passwordValuation=E().defaultTo(i,"")})]],confirmnewpassword:[null,[T.Validators.required]]},{validators:[ge.xQ.match("newpassword","confirmnewpassword")]})}onSubmit(){if(this.userForm.pristine)return;const t=this.authStorageService.getUsername(),o=this.userForm.getValue("oldpassword"),i=this.userForm.getValue("newpassword");this.userService.changePassword(t,o,i).subscribe(()=>this.onPasswordChange(),()=>{this.userForm.setErrors({cdSubmitButton:!0})})}onPasswordChange(){this.notificationService.show(Le._.success,$localize`Updated user password"`),this.router.navigate(["/login"])}static{this.\u0275fac=function(o){return new(o||n)(e.\u0275\u0275directiveInject(f.Ss),e.\u0275\u0275directiveInject(Y.J),e.\u0275\u0275directiveInject(xa.D),e.\u0275\u0275directiveInject(_.v),e.\u0275\u0275directiveInject(At.$),e.\u0275\u0275directiveInject(m.Router),e.\u0275\u0275directiveInject($s.$))}}static{this.\u0275cmp=e.\u0275\u0275defineComponent({type:n,selectors:[["cd-user-password-form"]],decls:45,vars:25,consts:()=>{let t,o,i,r,p,F,D,x,H,X;return t=$localize`:form title␟fb127ea03835b3230f0ed981c7080e2ccb879621␟3346778808274133574:${"\ufffd0\ufffd"}:INTERPOLATION: ${"\ufffd1\ufffd"}:INTERPOLATION_1:`,o=$localize`:␟0eb15f32b2b92d7f3103ef3ff032621888a8dc32␟1098197662533219874:Old password`,i=$localize`:␟e70e209561583f360b1e9cefd2cbb1fe434b6229␟3588415639242079458:New password`,r=$localize`:␟ede41f01c781b168a783cfcefc6fb67d48780d9b␟8656126574213649581:Confirm new password`,p=$localize`:␟7cbdabcece469fab89cfa687ab152bca18b97498␟1417693714872528491:This field is required.`,F=$localize`:␟1cf42e491adc166a337a960eb84d03c0c3f677c8␟375290007173071549:The old and new passwords must be different.`,D=$localize`:␟7cbdabcece469fab89cfa687ab152bca18b97498␟1417693714872528491:This field is required.`,x=$localize`:␟1cf42e491adc166a337a960eb84d03c0c3f677c8␟375290007173071549:The old and new passwords must be different.`,H=$localize`:␟7cbdabcece469fab89cfa687ab152bca18b97498␟1417693714872528491:This field is required.`,X=$localize`:␟90163a3d3746819aef42e829f4446331232f3b66␟4031281862997212020:Password confirmation doesn't match the new password.`,[["frm","ngForm"],t,o,i,r,p,F,D,x,H,X,[1,"cd-col-form"],["novalidate","",3,"formGroup"],[1,"card"],[1,"card-header"],[1,"card-body"],[1,"form-group","row"],["for","oldpassword",1,"cd-col-form-label","required"],[1,"cd-col-form-input"],[1,"input-group"],["type","password","placeholder","Old password...","id","oldpassword","formControlName","oldpassword","autocomplete","new-password","autofocus","",1,"form-control"],["cdPasswordButton","oldpassword",1,"btn","btn-light"],["class","invalid-feedback",4,"ngIf"],["for","newpassword",1,"cd-col-form-label"],[1,"required"],["class","text-pre-wrap",3,"html",4,"ngIf"],["type","password","placeholder","Password...","id","newpassword","autocomplete","new-password","formControlName","newpassword",1,"form-control"],["type","button","cdPasswordButton","newpassword",1,"btn","btn-light"],[1,"password-strength-level"],["data-toggle","tooltip",3,"title"],["for","confirmnewpassword",1,"cd-col-form-label","required"],["type","password","autocomplete","new-password","placeholder","Confirm new password...","id","confirmnewpassword","formControlName","confirmnewpassword",1,"form-control"],["cdPasswordButton","confirmnewpassword",1,"btn","btn-light"],[1,"card-footer"],["wrappingClass","text-right",3,"submitActionEvent","form","submitText"],[1,"invalid-feedback"],[1,"text-pre-wrap",3,"html"]]},template:function(o,i){if(1&o){const r=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"div",11)(1,"form",12,0)(3,"div",13)(4,"div",14),e.\u0275\u0275i18n(5,1),e.\u0275\u0275pipe(6,"titlecase"),e.\u0275\u0275pipe(7,"upperFirst"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(8,"div",15)(9,"div",16)(10,"label",17),e.\u0275\u0275i18n(11,2),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(12,"div",18)(13,"div",19),e.\u0275\u0275element(14,"input",20)(15,"button",21),e.\u0275\u0275elementEnd(),e.\u0275\u0275template(16,Y2,2,0,"span",22)(17,J2,2,0,"span",22),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(18,"div",16)(19,"label",23)(20,"span",24),e.\u0275\u0275i18n(21,3),e.\u0275\u0275elementEnd(),e.\u0275\u0275template(22,Z2,1,1,"cd-helper",25),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(23,"div",18)(24,"div",19),e.\u0275\u0275element(25,"input",26)(26,"button",27),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(27,"div",28),e.\u0275\u0275element(28,"div",29),e.\u0275\u0275elementEnd(),e.\u0275\u0275template(29,q2,2,0,"span",22)(30,eF,2,0,"span",22)(31,tF,2,1,"span",22),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(32,"div",16)(33,"label",30),e.\u0275\u0275i18n(34,4),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(35,"div",18)(36,"div",19),e.\u0275\u0275element(37,"input",31)(38,"button",32),e.\u0275\u0275elementEnd(),e.\u0275\u0275template(39,nF,2,0,"span",22)(40,oF,2,0,"span",22),e.\u0275\u0275elementEnd()()(),e.\u0275\u0275elementStart(41,"div",33)(42,"cd-form-button-panel",34),e.\u0275\u0275pipe(43,"titlecase"),e.\u0275\u0275pipe(44,"upperFirst"),e.\u0275\u0275listener("submitActionEvent",function(){return e.\u0275\u0275restoreView(r),e.\u0275\u0275resetView(i.onSubmit())}),e.\u0275\u0275elementEnd()()()()()}if(2&o){const r=e.\u0275\u0275reference(2);e.\u0275\u0275advance(),e.\u0275\u0275property("formGroup",i.userForm),e.\u0275\u0275advance(6),e.\u0275\u0275i18nExp(e.\u0275\u0275pipeBind1(6,17,i.action))(e.\u0275\u0275pipeBind1(7,19,i.resource)),e.\u0275\u0275i18nApply(5),e.\u0275\u0275advance(9),e.\u0275\u0275property("ngIf",i.userForm.showError("oldpassword",r,"required")),e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf",i.userForm.showError("oldpassword",r,"notmatch")),e.\u0275\u0275advance(5),e.\u0275\u0275property("ngIf",i.passwordPolicyHelpText.length>0),e.\u0275\u0275advance(6),e.\u0275\u0275classMap(i.passwordStrengthLevelClass),e.\u0275\u0275propertyInterpolate("title",i.passwordValuation),e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf",i.userForm.showError("newpassword",r,"required")),e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf",i.userForm.showError("newpassword",r,"notmatch")),e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf",i.userForm.showError("newpassword",r,"passwordPolicy")),e.\u0275\u0275advance(8),e.\u0275\u0275property("ngIf",i.userForm.showError("confirmnewpassword",r,"required")),e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf",i.userForm.showError("confirmnewpassword",r,"match")),e.\u0275\u0275advance(2),e.\u0275\u0275property("form",i.userForm)("submitText",e.\u0275\u0275pipeBind1(43,21,i.action)+" "+e.\u0275\u0275pipeBind1(44,23,i.resource))}},dependencies:[l.NgIf,T.\u0275NgNoValidate,T.DefaultValueAccessor,T.NgControlStatus,T.NgControlStatusGroup,T.FormGroupDirective,T.FormControlName,b.m,Q.e,ct.B,Lo.h,De.S,Me.a,xe.C,ze.E,l.TitleCasePipe,Oe.r],styles:["#oldpassword.is-valid[_ngcontent-%COMP%]{background-image:unset;border-color:#ced4da}"]})}}return n})();function iF(n,c){1&n&&(e.\u0275\u0275elementStart(0,"span",22),e.\u0275\u0275i18n(1,3),e.\u0275\u0275elementEnd())}function aF(n,c){1&n&&(e.\u0275\u0275elementStart(0,"span",22),e.\u0275\u0275i18n(1,4),e.\u0275\u0275elementEnd())}function sF(n,c){1&n&&(e.\u0275\u0275elementStart(0,"span",22),e.\u0275\u0275i18n(1,5),e.\u0275\u0275elementEnd())}function rF(n,c){1&n&&(e.\u0275\u0275elementStart(0,"span",22),e.\u0275\u0275i18n(1,6),e.\u0275\u0275elementEnd())}function lF(n,c){if(1&n&&(e.\u0275\u0275elementStart(0,"span",22),e.\u0275\u0275text(1),e.\u0275\u0275elementEnd()),2&n){const t=e.\u0275\u0275nextContext();e.\u0275\u0275advance(),e.\u0275\u0275textInterpolate1(" ",t.passwordValuation," ")}}function _F(n,c){1&n&&(e.\u0275\u0275elementStart(0,"span",22),e.\u0275\u0275i18n(1,7),e.\u0275\u0275elementEnd())}function cF(n,c){1&n&&(e.\u0275\u0275elementStart(0,"span",22),e.\u0275\u0275i18n(1,8),e.\u0275\u0275elementEnd())}let dF=(()=>{class n extends xs{constructor(t,o,i,r,p,F,D,x){super(t,o,i,r,p,F,D),this.actionLabels=t,this.notificationService=o,this.userService=i,this.authStorageService=r,this.formBuilder=p,this.router=F,this.passwordPolicyService=D,this.authService=x}onPasswordChange(){this.authService.logout()}onCancel(){this.authService.logout()}static{this.\u0275fac=function(o){return new(o||n)(e.\u0275\u0275directiveInject(f.Ss),e.\u0275\u0275directiveInject(Y.J),e.\u0275\u0275directiveInject(xa.D),e.\u0275\u0275directiveInject(_.v),e.\u0275\u0275directiveInject(At.$),e.\u0275\u0275directiveInject(m.Router),e.\u0275\u0275directiveInject($s.$),e.\u0275\u0275directiveInject($a.u))}}static{this.\u0275cmp=e.\u0275\u0275defineComponent({type:n,selectors:[["cd-login-password-form"]],features:[e.\u0275\u0275InheritDefinitionFeature],decls:31,vars:19,consts:()=>{let t,o,i,r,p,F,D,x;return t=$localize`:␟d06ae77f9ec46a4cdd49e7e76c73a411aaf2ee38␟4121268730818319434:Please set a new password.`,o=$localize`:␟8b5b3566e88438f51bd5f6caf6c090ed565ba5ed␟5496405262759480684:You will be redirected to the login page afterwards.`,i=$localize`:␟7cbdabcece469fab89cfa687ab152bca18b97498␟1417693714872528491:This field is required.`,r=$localize`:␟1cf42e491adc166a337a960eb84d03c0c3f677c8␟375290007173071549:The old and new passwords must be different.`,p=$localize`:␟7cbdabcece469fab89cfa687ab152bca18b97498␟1417693714872528491:This field is required.`,F=$localize`:␟1cf42e491adc166a337a960eb84d03c0c3f677c8␟375290007173071549:The old and new passwords must be different.`,D=$localize`:␟7cbdabcece469fab89cfa687ab152bca18b97498␟1417693714872528491:This field is required.`,x=$localize`:␟90163a3d3746819aef42e829f4446331232f3b66␟4031281862997212020:Password confirmation doesn't match the new password.`,[["frm","ngForm"],t,o,i,r,p,F,D,x,["novalidate","",3,"formGroup"],[1,"form-group","has-feedback"],[1,"input-group"],["type","password","placeholder","Old password...","id","oldpassword","formControlName","oldpassword","autocomplete","new-password","autofocus","",1,"form-control"],["cdPasswordButton","oldpassword",1,"btn","btn-outline-light","btn-password"],["class","invalid-feedback",4,"ngIf"],["type","password","placeholder","New password...","id","newpassword","autocomplete","new-password","formControlName","newpassword",1,"form-control"],["type","button","cdPasswordButton","newpassword",1,"btn","btn-outline-light","btn-password"],[1,"password-strength-level"],["data-toggle","tooltip",3,"title"],["type","password","autocomplete","new-password","placeholder","Confirm new password...","id","confirmnewpassword","formControlName","confirmnewpassword",1,"form-control"],["cdPasswordButton","confirmnewpassword",1,"btn","btn-outline-light","btn-password"],["wrappingClass","text-right",3,"submitActionEvent","backActionEvent","form","disabled","submitText"],[1,"invalid-feedback"]]},template:function(o,i){if(1&o){const r=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"div")(1,"h2"),e.\u0275\u0275i18n(2,1),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(3,"h4"),e.\u0275\u0275i18n(4,2),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(5,"form",9,0)(7,"div",10)(8,"div",11),e.\u0275\u0275element(9,"input",12)(10,"button",13),e.\u0275\u0275elementEnd(),e.\u0275\u0275template(11,iF,2,0,"span",14)(12,aF,2,0,"span",14),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(13,"div",10)(14,"div",11),e.\u0275\u0275element(15,"input",15)(16,"button",16),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(17,"div",17),e.\u0275\u0275element(18,"div",18),e.\u0275\u0275elementEnd(),e.\u0275\u0275template(19,sF,2,0,"span",14)(20,rF,2,0,"span",14)(21,lF,2,1,"span",14),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(22,"div",10)(23,"div",11),e.\u0275\u0275element(24,"input",19)(25,"button",20),e.\u0275\u0275elementEnd(),e.\u0275\u0275template(26,_F,2,0,"span",14)(27,cF,2,0,"span",14),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(28,"cd-form-button-panel",21),e.\u0275\u0275pipe(29,"titlecase"),e.\u0275\u0275pipe(30,"upperFirst"),e.\u0275\u0275listener("submitActionEvent",function(){return e.\u0275\u0275restoreView(r),e.\u0275\u0275resetView(i.onSubmit())})("backActionEvent",function(){return e.\u0275\u0275restoreView(r),e.\u0275\u0275resetView(i.onCancel())}),e.\u0275\u0275elementEnd()()()}if(2&o){const r=e.\u0275\u0275reference(6);e.\u0275\u0275advance(5),e.\u0275\u0275property("formGroup",i.userForm),e.\u0275\u0275advance(6),e.\u0275\u0275property("ngIf",i.userForm.showError("oldpassword",r,"required")),e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf",i.userForm.showError("oldpassword",r,"notmatch")),e.\u0275\u0275advance(6),e.\u0275\u0275classMap(i.passwordStrengthLevelClass),e.\u0275\u0275propertyInterpolate("title",i.passwordValuation),e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf",i.userForm.showError("newpassword",r,"required")),e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf",i.userForm.showError("newpassword",r,"notmatch")),e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf",i.userForm.showError("newpassword",r,"passwordPolicy")),e.\u0275\u0275advance(5),e.\u0275\u0275property("ngIf",i.userForm.showError("confirmnewpassword",r,"required")),e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf",i.userForm.showError("confirmnewpassword",r,"match")),e.\u0275\u0275advance(),e.\u0275\u0275property("form",i.userForm)("disabled",i.userForm.invalid)("submitText",e.\u0275\u0275pipeBind1(29,15,i.action)+" "+e.\u0275\u0275pipeBind1(30,17,i.resource))}},dependencies:[l.NgIf,T.\u0275NgNoValidate,T.DefaultValueAccessor,T.NgControlStatus,T.NgControlStatusGroup,T.FormGroupDirective,T.FormControlName,Q.e,ct.B,Lo.h,De.S,Me.a,xe.C,ze.E,l.TitleCasePipe,Oe.r],styles:["cd-login-password-form h4{margin:0 0 30px}  cd-login-password-form .form-group{background-color:#2e373d;border-left:4px solid #fff}  cd-login-password-form .form-group:focus-within{border-left:4px solid #25828e}  cd-login-password-form .btn-password,   cd-login-password-form .btn-password:focus,   cd-login-password-form .form-control,   cd-login-password-form .form-control:focus{background-color:#2e373d;border:0;box-shadow:none;color:#f8f9fa;filter:none;outline:none}  cd-login-password-form .form-control::placeholder{color:#6c757d}  cd-login-password-form .btn-password:focus{outline-color:#25828e}  cd-login-password-form button.btn:not(:first-child){margin-left:5px}@keyframes _ngcontent-%COMP%_autofill{to{background-color:#2e373d;color:#f8f9fa}}input[_ngcontent-%COMP%]:-webkit-autofill{animation-fill-mode:both;animation-name:_ngcontent-%COMP%_autofill;border-radius:0;box-shadow:0 0 0 1000px #2e373d inset;-webkit-text-fill-color:#f8f9fa;-webkit-transition-property:none;transition-property:none}.invalid-feedback[_ngcontent-%COMP%]{padding-left:9px}.is-invalid.cd-form-control[_ngcontent-%COMP%]{border-color:transparent}#oldpassword.is-valid[_ngcontent-%COMP%]{background-image:unset;border-color:transparent}"]})}}return n})();class uF{}function pF(n,c){1&n&&(e.\u0275\u0275elementStart(0,"div",23),e.\u0275\u0275i18n(1,5),e.\u0275\u0275elementEnd())}function mF(n,c){1&n&&(e.\u0275\u0275elementStart(0,"div",23),e.\u0275\u0275i18n(1,6),e.\u0275\u0275elementEnd())}function fF(n,c){if(1&n){const t=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"div",8)(1,"h1",9),e.\u0275\u0275text(2,"Ceph login"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(3,"form",10,0),e.\u0275\u0275listener("ngSubmit",function(){e.\u0275\u0275restoreView(t);const i=e.\u0275\u0275nextContext();return e.\u0275\u0275resetView(i.login())}),e.\u0275\u0275elementStart(5,"div",11)(6,"label",12),e.\u0275\u0275i18n(7,3),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(8,"input",13,1),e.\u0275\u0275twoWayListener("ngModelChange",function(i){e.\u0275\u0275restoreView(t);const r=e.\u0275\u0275nextContext();return e.\u0275\u0275twoWayBindingSet(r.model.username,i)||(r.model.username=i),e.\u0275\u0275resetView(i)}),e.\u0275\u0275elementEnd(),e.\u0275\u0275template(10,pF,2,0,"div",14),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(11,"div",15)(12,"div",16)(13,"div",17)(14,"label",18),e.\u0275\u0275i18n(15,4),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(16,"input",19,2),e.\u0275\u0275twoWayListener("ngModelChange",function(i){e.\u0275\u0275restoreView(t);const r=e.\u0275\u0275nextContext();return e.\u0275\u0275twoWayBindingSet(r.model.password,i)||(r.model.password=i),e.\u0275\u0275resetView(i)}),e.\u0275\u0275elementEnd(),e.\u0275\u0275template(18,mF,2,0,"div",14),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(19,"span",20),e.\u0275\u0275element(20,"button",21),e.\u0275\u0275elementEnd()()(),e.\u0275\u0275element(21,"input",22),e.\u0275\u0275elementEnd()()}if(2&n){const t=e.\u0275\u0275reference(4),o=e.\u0275\u0275reference(9),i=e.\u0275\u0275reference(17),r=e.\u0275\u0275nextContext();e.\u0275\u0275advance(8),e.\u0275\u0275twoWayProperty("ngModel",r.model.username),e.\u0275\u0275attribute("aria-invalid",o.invalid),e.\u0275\u0275advance(2),e.\u0275\u0275property("ngIf",(t.submitted||o.dirty)&&o.invalid),e.\u0275\u0275advance(6),e.\u0275\u0275twoWayProperty("ngModel",r.model.password),e.\u0275\u0275attribute("aria-invalid",i.invalid),e.\u0275\u0275advance(2),e.\u0275\u0275property("ngIf",(t.submitted||i.dirty)&&i.invalid),e.\u0275\u0275advance(3),e.\u0275\u0275property("disabled",t.invalid)}}let EF=(()=>{class n{constructor(t,o,i,r,p){this.authService=t,this.authStorageService=o,this.modalService=i,this.route=r,this.router=p,this.model=new uF,this.isLoginActive=!1,this.postInstalled=!1}ngOnInit(){if(this.authStorageService.isLoggedIn())this.router.navigate([""]);else{this.modalService.dismissAll();let t=null;if(-1!==window.location.hash.indexOf("access_token=")){t=window.location.hash.split("access_token=")[1];const o=window.location.toString();window.history.replaceState({},document.title,o.split("?")[0])}this.authService.check(t).subscribe(o=>{o.login_url?(this.postInstalled="POST_INSTALLED"===o.cluster_status,"#/login"===o.login_url?this.isLoginActive=!0:window.location.replace(o.login_url)):(this.authStorageService.set(o.username,o.permissions,o.sso,o.pwdExpirationDate),this.router.navigate([""]))})}}login(){localStorage.setItem("cluster_api_url",window.location.origin),this.authService.login(this.model).subscribe(()=>{const t=this.postInstalled?"/":"/expand-cluster";let o=E().get(this.route.snapshot.queryParams,"returnUrl",t);!this.postInstalled&&"/dashboard"===this.route.snapshot.queryParams.returnUrl&&(o="/expand-cluster"),"/expand-cluster"==o?this.router.navigate([o],{queryParams:{welcome:!0}}):this.router.navigate([o])})}static{this.\u0275fac=function(o){return new(o||n)(e.\u0275\u0275directiveInject($a.u),e.\u0275\u0275directiveInject(_.v),e.\u0275\u0275directiveInject(qt.B),e.\u0275\u0275directiveInject(m.ActivatedRoute),e.\u0275\u0275directiveInject(m.Router))}}static{this.\u0275cmp=e.\u0275\u0275defineComponent({type:n,selectors:[["cd-login"]],decls:1,vars:1,consts:()=>{let t,o,i,r,p;return t=$localize`:␟f093d9574ab746b231504bd2cbb65f04bd7b00db␟2336550011721758066:Log in`,o=$localize`:␟08c74dc9762957593b91f6eb5d65efdfc975bf48␟5248717555542428023:Username`,i=$localize`:␟c32ef07f8803a223a83ed17024b38e8d82292407␟1431416938026210429:Password`,r=$localize`:␟0070e83d11da39d6f4bb95065c2675db1610b419␟3702338872876040900:Username is required`,p=$localize`:␟1e20f8b8a4706526c9024cc2f39d568345d100dc␟205044832662301680:Password is required`,[["loginForm","ngForm"],["username","ngModel"],["password","ngModel"],o,i,r,p,["class","container",4,"ngIf"],[1,"container"],[1,"sr-only"],["name","loginForm","novalidate","",3,"ngSubmit"],[1,"form-group","has-feedback","d-flex","flex-column","py-3"],["for","username",1,"ps-3"],["id","username","name","username","type","text","aria-labelledby","username","required","","autofocus","",1,"form-control","ps-3",3,"ngModelChange","ngModel"],["class","invalid-feedback ps-3",4,"ngIf"],["id","password-div",1,"form-group","has-feedback"],[1,"input-group","d-flex","flex-nowrap"],[1,"d-flex","flex-column","flex-grow-1","py-3"],["for","password",1,"ps-3"],["id","password","name","password","type","password","aria-labelledby","password","required","",1,"form-control","ps-3",3,"ngModelChange","ngModel"],[1,"form-group-append"],["type","button","cdPasswordButton","password","aria-label","toggle-password",1,"btn","btn-outline-light","btn-password","h-100","px-4"],["type","submit","value",t,1,"btn","btn-accent","px-5","py-2",3,"disabled"],[1,"invalid-feedback","ps-3"]]},template:function(o,i){1&o&&e.\u0275\u0275template(0,fF,22,7,"div",7),2&o&&e.\u0275\u0275property("ngIf",i.isLoginActive)},dependencies:[l.NgIf,T.\u0275NgNoValidate,T.DefaultValueAccessor,T.NgControlStatus,T.NgControlStatusGroup,T.RequiredValidator,T.NgModel,T.NgForm,ct.B,Lo.h,De.S,Me.a,xe.C],styles:["cd-login .form-group{background-color:#2e373d;border-left:4px solid #fff;height:auto;margin-bottom:2rem}  cd-login .form-group:focus-within{border-left:4px solid #25828e}  cd-login .btn-password,   cd-login .btn-password:focus,   cd-login .form-control,   cd-login .form-control:focus{background-color:#2e373d;border:0;box-shadow:none;color:#f8f9fa;filter:none;outline:none}  cd-login label{color:#adb5bd}  cd-login .btn-password:focus{outline-color:#25828e}@keyframes _ngcontent-%COMP%_autofill{to{background-color:#2e373d;color:#f8f9fa}}input[_ngcontent-%COMP%]:-webkit-autofill{animation-fill-mode:both;animation-name:_ngcontent-%COMP%_autofill;border-radius:0;box-shadow:0 0 0 1000px #2e373d inset;-webkit-text-fill-color:#f8f9fa;-webkit-transition-property:none;transition-property:none}"]})}}return n})();var Us=s(38996);function gF(n,c){if(1&n&&(e.\u0275\u0275elementStart(0,"h4",23),e.\u0275\u0275text(1),e.\u0275\u0275elementEnd()),2&n){const t=e.\u0275\u0275nextContext(2);e.\u0275\u0275advance(),e.\u0275\u0275textInterpolate(t.message)}}function CF(n,c){if(1&n&&(e.\u0275\u0275elementStart(0,"h4"),e.\u0275\u0275i18nStart(1,4),e.\u0275\u0275element(2,"a",24),e.\u0275\u0275i18nEnd(),e.\u0275\u0275elementEnd()),2&n){const t=e.\u0275\u0275nextContext(2);e.\u0275\u0275advance(2),e.\u0275\u0275propertyInterpolate("href",t.docUrl,e.\u0275\u0275sanitizeUrl),e.\u0275\u0275i18nExp(t.sectionInfo),e.\u0275\u0275i18nApply(1)}}function SF(n,c){if(1&n&&(e.\u0275\u0275elementStart(0,"div"),e.\u0275\u0275namespaceSVG(),e.\u0275\u0275element(1,"svg",19),e.\u0275\u0275namespaceHTML(),e.\u0275\u0275elementStart(2,"div",20)(3,"h3")(4,"b"),e.\u0275\u0275text(5),e.\u0275\u0275elementEnd()(),e.\u0275\u0275template(6,gF,2,1,"h4",21)(7,CF,3,2,"h4",22),e.\u0275\u0275elementEnd()()),2&n){const t=e.\u0275\u0275nextContext();e.\u0275\u0275advance(),e.\u0275\u0275property("cdsIcon",t.icon),e.\u0275\u0275advance(4),e.\u0275\u0275textInterpolate(t.header),e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf",t.header!==t.message),e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf",t.section)}}function hF(n,c){if(1&n&&(e.\u0275\u0275elementStart(0,"button",28),e.\u0275\u0275i18n(1,5),e.\u0275\u0275elementEnd()),2&n){const t=e.\u0275\u0275nextContext(2);e.\u0275\u0275property("routerLink",t.buttonRoute),e.\u0275\u0275advance(),e.\u0275\u0275i18nExp(t.buttonName),e.\u0275\u0275i18nApply(1)}}function TF(n,c){if(1&n&&(e.\u0275\u0275elementStart(0,"button",29),e.\u0275\u0275i18n(1,6),e.\u0275\u0275elementEnd()),2&n){const t=e.\u0275\u0275nextContext(2);e.\u0275\u0275property("routerLink",t.secondaryButtonRoute),e.\u0275\u0275advance(),e.\u0275\u0275i18nExp(t.secondaryButtonName),e.\u0275\u0275i18nApply(1)}}function FF(n,c){if(1&n&&(e.\u0275\u0275elementStart(0,"div",25),e.\u0275\u0275template(1,hF,2,2,"button",26)(2,TF,2,2,"button",27),e.\u0275\u0275elementEnd()),2&n){const t=e.\u0275\u0275nextContext(),o=e.\u0275\u0275reference(11);e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf",!t.uiConfig)("ngIfElse",o),e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf",t.secondaryButtonName&&t.secondaryButtonRoute)}}function vF(n,c){if(1&n){const t=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"button",31),e.\u0275\u0275listener("click",function(){e.\u0275\u0275restoreView(t);const i=e.\u0275\u0275nextContext(2);return e.\u0275\u0275resetView(i.doConfigure())}),e.\u0275\u0275i18n(1,7),e.\u0275\u0275elementEnd()}if(2&n){const t=e.\u0275\u0275nextContext(2);e.\u0275\u0275attribute("title",t.buttonTitle),e.\u0275\u0275advance(),e.\u0275\u0275i18nExp(t.buttonName),e.\u0275\u0275i18nApply(1)}}function MF(n,c){if(1&n&&e.\u0275\u0275template(0,vF,2,2,"button",30),2&n){const t=e.\u0275\u0275nextContext();e.\u0275\u0275property("ngIf",t.uiConfig)}}function RF(n,c){1&n&&(e.\u0275\u0275element(0,"i",32),e.\u0275\u0275elementStart(1,"div",20)(2,"h3"),e.\u0275\u0275i18nStart(3,8),e.\u0275\u0275element(4,"b"),e.\u0275\u0275i18nEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(5,"h4",17),e.\u0275\u0275i18n(6,9),e.\u0275\u0275elementEnd()())}function OF(n,c){1&n&&(e.\u0275\u0275elementStart(0,"div",20)(1,"button",34),e.\u0275\u0275i18n(2,10),e.\u0275\u0275elementEnd()()),2&n&&(e.\u0275\u0275advance(),e.\u0275\u0275property("routerLink","/dashboard"))}function PF(n,c){if(1&n&&e.\u0275\u0275template(0,OF,3,1,"div",33),2&n){const t=e.\u0275\u0275nextContext(),o=e.\u0275\u0275reference(17);e.\u0275\u0275property("ngIf",!t.module_name)("ngIfElse",o)}}function bF(n,c){if(1&n){const t=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"div",20)(1,"button",31),e.\u0275\u0275listener("click",function(){e.\u0275\u0275restoreView(t);const i=e.\u0275\u0275nextContext(2);return e.\u0275\u0275resetView(i.enableModule())}),e.\u0275\u0275i18n(2,11),e.\u0275\u0275pipe(3,"upperFirst"),e.\u0275\u0275elementEnd()()}if(2&n){const t=e.\u0275\u0275nextContext(2);e.\u0275\u0275advance(3),e.\u0275\u0275i18nExp(e.\u0275\u0275pipeBind1(3,1,t.module_name)),e.\u0275\u0275i18nApply(2)}}function NF(n,c){if(1&n&&e.\u0275\u0275template(0,bF,4,3,"div",35),2&n){const t=e.\u0275\u0275nextContext();e.\u0275\u0275property("ngIf",t.module_name&&!(t.buttonName&&t.buttonRoute))}}let IF=(()=>{class n{constructor(t,o,i,r,p){this.router=t,this.docService=o,this.http=i,this.notificationService=r,this.mgrModuleService=p,this.icons=g.FI}ngOnInit(){this.fetchData(),this.routerSubscription=this.router.events.pipe((0,u.filter)(t=>t instanceof m.NavigationEnd)).subscribe(()=>{this.fetchData()})}doConfigure(){this.http.post(`ui-api/${this.uiApiPath}/configure`,{}).subscribe({next:()=>{this.notificationService.show(Le._.info,`Configuring ${this.component}`)},error:t=>{this.notificationService.show(Le._.error,t)},complete:()=>{setTimeout(()=>{this.router.navigate([this.uiApiPath]),this.notificationService.show(Le._.success,`Configured ${this.component}`)},3e3)}})}unloadHandler(t){t.returnValue=!1}fetchData(){try{this.router.onSameUrlNavigation="reload",this.message=history.state.message,this.header=history.state.header,this.section=history.state.section,this.sectionInfo=history.state.section_info,this.icon=history.state.icon,this.source=history.state.source,this.uiConfig=history.state.uiConfig,this.uiApiPath=history.state.uiApiPath,this.buttonRoute=history.state.button_route,this.buttonName=history.state.button_name,this.buttonTitle=history.state.button_title,this.secondaryButtonRoute=history.state.secondary_button_route,this.secondaryButtonName=history.state.secondary_button_name,this.secondaryButtonTitle=history.state.secondary_button_title,this.module_name=history.state.module_name,this.navigateTo=history.state.navigate_to,this.component=history.state.component,this.docUrl=this.docService.urlGenerator(this.section)}catch{this.router.navigate(["/error"])}}ngOnDestroy(){this.routerSubscription&&this.routerSubscription.unsubscribe()}enableModule(){this.mgrModuleService.updateModuleState(this.module_name,!1,null,this.navigateTo)}static{this.\u0275fac=function(o){return new(o||n)(e.\u0275\u0275directiveInject(m.Router),e.\u0275\u0275directiveInject(Us.s),e.\u0275\u0275directiveInject(h.HttpClient),e.\u0275\u0275directiveInject(Y.J),e.\u0275\u0275directiveInject(Nn.a))}}static{this.\u0275cmp=e.\u0275\u0275defineComponent({type:n,selectors:[["cd-error"]],hostBindings:function(o,i){1&o&&e.\u0275\u0275listener("beforeunload",function(p){return i.unloadHandler(p)},!1,e.\u0275\u0275resolveWindow)},decls:18,vars:4,consts:()=>{let t,o,i,r,p,F,D,x;return t=$localize`:␟b15757073939841801fc3c3c839af1882829a9c4␟5570657156373972295:Please consult the ${"\ufffd#2\ufffd"}:START_LINK:documentation${"\ufffd/#2\ufffd"}:CLOSE_LINK: on how to configure and enable the ${"\ufffd0\ufffd"}:INTERPOLATION: management functionality. `,o=$localize`:␟be666bc5a0be8b856c17b898558aa5100d2ccbc2␟4023507003396591575:${"\ufffd0\ufffd"}:INTERPOLATION:`,i=$localize`:␟a774bdd01e5e4d2c5fc10de1e3f5b16b1d82e820␟4770993055380265810:${"\ufffd0\ufffd"}:INTERPOLATION:`,r=$localize`:␟be666bc5a0be8b856c17b898558aa5100d2ccbc2␟4023507003396591575:${"\ufffd0\ufffd"}:INTERPOLATION:`,p=$localize`:␟235c355afdcbf72953a15d7fc8d0d9e7a6619f46␟3677913959983517457:${"\ufffd#4\ufffd"}:START_BOLD_TEXT:Page not Found${"\ufffd/#4\ufffd"}:CLOSE_BOLD_TEXT:`,F=$localize`:␟c94fe6b6bb45c0ed0b0b71b9f5d49da4acb93b9e␟6939657640773799522:Sorry, we couldn’t find what you were looking for. The page you requested may have been changed or moved.`,D=$localize`:␟9d57ca7cab78c6f0d27e0d890cb8cf1515e4e30a␟7796668756144544818:Go To Dashboard`,x=$localize`:␟7b3eaae877071472c0b8fcfeb4e219da84d943eb␟3138693236773700941:Enable ${"\ufffd0\ufffd"}:INTERPOLATION: module`,[["configureButtonTpl",""],["elseBlock",""],["dashboardButton",""],["enableButton",""],t,o,i,r,p,F,D,x,["target","_blank"],[1,"container","h-75"],[1,"row","h-100","justify-content-center","align-items-center"],[1,"blank-page"],[4,"ngIf","ngIfElse"],[1,"mt-4"],["class","text-center",4,"ngIf","ngIfElse"],[1,"cds-info-color","cds-icon--size-10",3,"cdsIcon"],[1,"mt-4","text-center"],["class","mt-3",4,"ngIf"],[4,"ngIf"],[1,"mt-3"],[3,"href"],[1,"text-center"],["class","btn btn-primary ms-1",3,"routerLink",4,"ngIf","ngIfElse"],["class","btn btn-light ms-1",3,"routerLink",4,"ngIf"],[1,"btn","btn-primary","ms-1",3,"routerLink"],[1,"btn","btn-light","ms-1",3,"routerLink"],["class","btn btn-primary",3,"click",4,"ngIf"],[1,"btn","btn-primary",3,"click"],[1,"fa","fa-exclamation-triangle","mx-auto","d-block","text-danger"],["class","mt-4 text-center",4,"ngIf","ngIfElse"],[1,"btn","btn-primary",3,"routerLink"],["class","mt-4 text-center",4,"ngIf"]]},template:function(o,i){if(1&o&&(e.\u0275\u0275elementStart(0,"head")(1,"title"),e.\u0275\u0275text(2,"Error Page"),e.\u0275\u0275elementEnd(),e.\u0275\u0275element(3,"base",12),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(4,"div",13)(5,"div",14)(6,"div",15),e.\u0275\u0275template(7,SF,8,4,"div",16),e.\u0275\u0275elementStart(8,"div",17),e.\u0275\u0275template(9,FF,3,3,"div",18),e.\u0275\u0275elementEnd()()()(),e.\u0275\u0275template(10,MF,1,1,"ng-template",null,0,e.\u0275\u0275templateRefExtractor)(12,RF,7,0,"ng-template",null,1,e.\u0275\u0275templateRefExtractor)(14,PF,1,2,"ng-template",null,2,e.\u0275\u0275templateRefExtractor)(16,NF,1,1,"ng-template",null,3,e.\u0275\u0275templateRefExtractor)),2&o){const r=e.\u0275\u0275reference(13),p=e.\u0275\u0275reference(15);e.\u0275\u0275advance(7),e.\u0275\u0275property("ngIf",i.header&&i.message)("ngIfElse",r),e.\u0275\u0275advance(2),e.\u0275\u0275property("ngIf",i.buttonName&&i.buttonRoute||i.uiConfig)("ngIfElse",p)}},dependencies:[l.NgIf,m.RouterLink,De.S,Oe.r],styles:["h4[_ngcontent-%COMP%]{color:#495057}i[_ngcontent-%COMP%]{font-size:6em;margin-top:120px}.fa-lock[_ngcontent-%COMP%]{color:#dc3545}.fa-wrench[_ngcontent-%COMP%]{color:#25828e}"]})}}return n})(),AF=(()=>{class n{static{this.\u0275fac=function(o){return new(o||n)}}static{this.\u0275cmp=e.\u0275\u0275defineComponent({type:n,selectors:[["cd-blank-layout"]],decls:1,vars:0,template:function(o,i){1&o&&e.\u0275\u0275element(0,"router-outlet")},dependencies:[m.RouterOutlet]})}}return n})();var ws=s(45312);let DF=(()=>{class n{constructor(t,o){this.http=t,this.localeId=o}getLocale(){return this.localeId||ws.c.default_lang}setLocale(t){document.cookie=`cd-lang=${t}`}getLanguages(){return this.http.get("ui-api/langs")}static{this.\u0275fac=function(o){return new(o||n)(e.\u0275\u0275inject(h.HttpClient),e.\u0275\u0275inject(e.LOCALE_ID))}}static{this.\u0275prov=e.\u0275\u0275defineInjectable({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();var Ua=function(n){return n.cs="\u010ce\u0161tina",n.de="Deutsch",n["en-US"]="English",n.es="Espa\xf1ol",n.fr="Fran\xe7ais",n.id="Bahasa Indonesia",n.it="Italiano",n.ja="\u65e5\u672c\u8a9e",n.ko="\ud55c\uad6d\uc5b4",n.pl="Polski",n.pt="Portugu\xeas (brasileiro)",n["zh-Hans"]="\u4e2d\u6587 (\u7b80\u4f53)",n["zh-Hant"]="\u4e2d\u6587 (\u7e41\u9ad4\uff09",n}(Ua||{});function yF(n,c){if(1&n){const t=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementContainerStart(0),e.\u0275\u0275elementStart(1,"cds-header-item",2),e.\u0275\u0275listener("click",function(){const i=e.\u0275\u0275restoreView(t).$implicit,r=e.\u0275\u0275nextContext();return e.\u0275\u0275resetView(r.changeLanguage(i.key))}),e.\u0275\u0275text(2),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementContainerEnd()}if(2&n){const t=c.$implicit;e.\u0275\u0275advance(2),e.\u0275\u0275textInterpolate(t.value)}}let Gs=(()=>{class n{constructor(t){this.languageService=t,this.allLanguages=Ua,this.supportedLanguages={}}ngOnInit(){this.selectedLanguage=this.languageService.getLocale(),this.languageService.getLanguages().subscribe(t=>{this.supportedLanguages=E().pick(Ua,t)})}reloadWindow(){window.location.reload()}changeLanguage(t){this.languageService.setLocale(t),this.reloadWindow()}static{this.\u0275fac=function(o){return new(o||n)(e.\u0275\u0275directiveInject(DF))}}static{this.\u0275cmp=e.\u0275\u0275defineComponent({type:n,selectors:[["cd-language-selector"]],decls:3,vars:4,consts:[[3,"title"],[4,"ngFor","ngForOf"],[3,"click"]],template:function(o,i){1&o&&(e.\u0275\u0275elementStart(0,"cds-header-menu",0),e.\u0275\u0275template(1,yF,3,1,"ng-container",1),e.\u0275\u0275pipe(2,"keyvalue"),e.\u0275\u0275elementEnd()),2&o&&(e.\u0275\u0275property("title",i.allLanguages[i.selectedLanguage]),e.\u0275\u0275advance(),e.\u0275\u0275property("ngForOf",e.\u0275\u0275pipeBind1(2,2,i.supportedLanguages)))},dependencies:[l.NgForOf,L.HeaderItem,L.HeaderMenu,l.KeyValuePipe]})}}return n})(),LF=(()=>{class n{constructor(t){this.http=t,this.baseUiURL="ui-api/login/custom_banner"}getBannerText(){return this.http.get(this.baseUiURL)}static{this.\u0275fac=function(o){return new(o||n)(e.\u0275\u0275inject(h.HttpClient))}}static{this.\u0275prov=e.\u0275\u0275defineInjectable({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();function $F(n,c){if(1&n&&(e.\u0275\u0275elementStart(0,"p",1),e.\u0275\u0275text(1),e.\u0275\u0275elementEnd()),2&n){const t=c.ngIf;e.\u0275\u0275advance(),e.\u0275\u0275textInterpolate(t)}}let xF=(()=>{class n{constructor(t){this.customLoginBannerService=t}ngOnInit(){this.bannerText$=this.customLoginBannerService.getBannerText()}static{this.\u0275fac=function(o){return new(o||n)(e.\u0275\u0275directiveInject(LF))}}static{this.\u0275cmp=e.\u0275\u0275defineComponent({type:n,selectors:[["cd-custom-login-banner"]],decls:2,vars:3,consts:[["class","login-text",4,"ngIf"],[1,"login-text"]],template:function(o,i){1&o&&(e.\u0275\u0275template(0,$F,2,1,"p",0),e.\u0275\u0275pipe(1,"async")),2&o&&e.\u0275\u0275property("ngIf",e.\u0275\u0275pipeBind1(1,1,i.bannerText$))},dependencies:[l.NgIf,l.AsyncPipe],styles:[".login-text[_ngcontent-%COMP%]{font-weight:700;margin:0;padding:12px 20% 12px 12px}"]})}}return n})();function UF(n,c){if(1&n&&(e.\u0275\u0275elementStart(0,"li",12)(1,"cd-doc",13),e.\u0275\u0275i18nAttributes(2,0),e.\u0275\u0275elementEnd()()),2&n){const t=c.$implicit;e.\u0275\u0275advance(),e.\u0275\u0275propertyInterpolate("section",t.section),e.\u0275\u0275i18nExp(t.text),e.\u0275\u0275i18nApply(2)}}let wF=(()=>{class n{constructor(){this.docItems=[{section:"help",text:$localize`Help`},{section:"security",text:$localize`Security`},{section:"trademarks",text:$localize`Trademarks`}]}static{this.\u0275fac=function(o){return new(o||n)}}static{this.\u0275cmp=e.\u0275\u0275defineComponent({type:n,selectors:[["cd-login-layout"]],decls:16,vars:1,consts:()=>{let t;return t=$localize`:␟f286db6ac9482dbf567bc491d49a6eade444895a␟8974677874811784530:${"\ufffd0\ufffd"}:INTERPOLATION:`,[["docText",t],[1,"login","full-height"],[1,"navbar","p-4"],[1,"navbar-brand"],[1,"form-inline"],[1,"container"],[1,"row","full-height"],[1,"col-sm-12","col-md-6","d-sm-block","login-form"],[1,"col-sm-12","col-md-6","d-sm-block","branding-info"],["src","assets/Ceph_Ceph_Logo_with_text_white.svg","alt","Ceph",1,"img-fluid","pb-3"],[1,"list-inline"],["class","list-inline-item p-3",4,"ngFor","ngForOf"],[1,"list-inline-item","p-3"],["noSubscribe","true",3,"section",6,"docText"]]},template:function(o,i){1&o&&(e.\u0275\u0275elementStart(0,"main",1)(1,"header")(2,"nav",2),e.\u0275\u0275element(3,"a",3),e.\u0275\u0275elementStart(4,"div",4),e.\u0275\u0275element(5,"cd-language-selector"),e.\u0275\u0275elementEnd()()(),e.\u0275\u0275elementStart(6,"section")(7,"div",5)(8,"div",6)(9,"div",7),e.\u0275\u0275element(10,"router-outlet"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(11,"div",8),e.\u0275\u0275element(12,"img",9),e.\u0275\u0275elementStart(13,"ul",10),e.\u0275\u0275template(14,UF,3,2,"li",11),e.\u0275\u0275elementEnd(),e.\u0275\u0275element(15,"cd-custom-login-banner"),e.\u0275\u0275elementEnd()()()()()),2&o&&(e.\u0275\u0275advance(14),e.\u0275\u0275property("ngForOf",i.docItems))},dependencies:[l.NgForOf,m.RouterOutlet,Gs,fo.C,xF],styles:["cd-login-layout .login{background-color:#374249;background-image:url(ceph_background.3fbdf95cd52530d7.gif);background-position:right bottom;background-repeat:no-repeat;color:#f8f9fa}  cd-login-layout .login header{position:absolute;width:100vw}  cd-login-layout .login header .navbar .dropdown-menu{margin-top:.2rem}  cd-login-layout .login header .navbar .dropdown-menu li a:hover{background-color:#25828e}  cd-login-layout .login section{display:inline-flex;min-height:100vh;width:100vw}  cd-login-layout .login .list-inline{margin-bottom:0;margin-left:17%}  cd-login-layout .login a{color:#fff}  cd-login-layout .login a:hover{color:#adb5bd}@media screen and (min-width: 576px){  cd-login-layout .login .login-form,   cd-login-layout .login .branding-info{padding-top:30vh}}@media screen and (max-width: 767px){  cd-login-layout .login .login-form{padding-top:10vh}  cd-login-layout .login .branding-info{padding-top:0}}"]})}}return n})();var wo=s(42706);let Hs=(()=>{class n{constructor(t,o,i){this.document=t,this.summaryService=o,this.cssHelper=i}init(){this.url=this.document.getElementById("cdFavicon")?.getAttribute("href"),this.sub=this.summaryService.subscribe(t=>{this.changeIcon(t.health_status)})}changeIcon(t){if(t===this.oldStatus)return;this.oldStatus=t;const o=this.document.getElementById("cdFavicon"),p=this.document.createElement("canvas");p.width=16,p.height=16;const F=p.getContext("2d"),D=this.document.createElement("img");D.src=this.url,D.onload=()=>{F.drawImage(D,0,0,16,16),Object.keys(Uo).includes(t)&&(F.save(),F.globalCompositeOperation="destination-out",F.beginPath(),F.arc(p.width-4,4,6,0,2*Math.PI),F.fill(),F.restore(),F.beginPath(),F.arc(p.width-4,4,4,0,2*Math.PI),F.fillStyle=this.cssHelper.propertyValue(Uo[t]),F.fill()),o.setAttribute("href",p.toDataURL("image/png"))}}ngOnDestroy(){this.changeIcon(),this.sub?.unsubscribe()}static{this.\u0275fac=function(o){return new(o||n)(e.\u0275\u0275inject(l.DOCUMENT),e.\u0275\u0275inject(on.E),e.\u0275\u0275inject(oo._))}}static{this.\u0275prov=e.\u0275\u0275defineInjectable({token:n,factory:n.\u0275fac})}}return n})();var GF=s(60977);let HF=(()=>{class n{constructor(t){this.http=t,this.url="ui-api/motd"}get(){return this.http.get(this.url)}static{this.\u0275fac=function(o){return new(o||n)(e.\u0275\u0275inject(h.HttpClient))}}static{this.\u0275prov=e.\u0275\u0275defineInjectable({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();var VF=s(72394);let Vs=(()=>{class n{constructor(t){this.motdService=t,this.motdSource=new K.BehaviorSubject(null),this.localStorageKey="dashboard_motd_hidden",this.motd$=this.motdSource.asObservable(),this.subscription=(0,K.of)(!0).pipe((0,u.mergeMap)(()=>this.motdService.get()),(0,u.catchError)(o=>(v.isFunction(o.preventDefault)&&o.preventDefault(),K.EMPTY)),(0,u.tap)(o=>this.processResponse(o)),(0,u.delay)(6e4),(0,u.repeat)(),(0,VF.g)()).subscribe()}ngOnDestroy(){this.subscription.unsubscribe()}hide(){const t=this.motdSource.getValue();if(t){const o=`${t.severity}:${t.md5}`;switch(t.severity){case"info":localStorage.setItem(this.localStorageKey,o),sessionStorage.removeItem(this.localStorageKey);break;case"warning":sessionStorage.setItem(this.localStorageKey,o),localStorage.removeItem(this.localStorageKey)}}this.motdSource.next(null)}processResponse(t){const o=sessionStorage.getItem(this.localStorageKey)||localStorage.getItem(this.localStorageKey);let i=v.isNull(o);if(!i&&t){const[r,p]=o.split(":");(r!==t.severity||p!==t.md5)&&(i=!0,sessionStorage.removeItem(this.localStorageKey),localStorage.removeItem(this.localStorageKey))}i&&this.motdSource.next(t)}static{this.\u0275fac=function(o){return new(o||n)(e.\u0275\u0275inject(HF))}}static{this.\u0275prov=e.\u0275\u0275defineInjectable({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();var Bs=s(87015),BF=s(17245);let wa=(()=>{class n{constructor(t){this.cookieService=t}setToken(t,o){this.cookieService.set(t,o,null,null,null,!0,"Strict")}getToken(t){return this.cookieService.get(t)}deleteToken(t){this.cookieService.delete(t)}static{this.\u0275fac=function(o){return new(o||n)(e.\u0275\u0275inject(BF.CookieService))}}static{this.\u0275prov=e.\u0275\u0275defineInjectable({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();var zF=s(36757);let XF=(()=>{class n{constructor(t,o){this.alertFormatter=t,this.prometheusService=o,this.backendFailure=!1,this.notifications=[]}refresh(){this.backendFailure||this.prometheusService.getNotifications(E().last(this.notifications)).subscribe(t=>this.handleNotifications(t),()=>this.backendFailure=!0)}handleNotifications(t){0!==t.length&&(this.notifications.length>0&&this.alertFormatter.sendNotifications(E().flatten(t.map(o=>this.formatNotification(o)))),this.notifications=this.notifications.concat(t))}formatNotification(t){return this.alertFormatter.convertToCustomAlerts(t.alerts).map(o=>this.alertFormatter.convertAlertToNotification(o))}static{this.\u0275fac=function(o){return new(o||n)(e.\u0275\u0275inject(Rs),e.\u0275\u0275inject(fn.o))}}static{this.\u0275prov=e.\u0275\u0275defineInjectable({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();var kF=s(66527),jF=s(47579);const zs=(n,c,t)=>[n,c,t],WF=(n,c)=>[n,c],KF=n=>[n];function QF(n,c){if(1&n&&(e.\u0275\u0275elementStart(0,"div")(1,"div",14)(2,"div",15)(3,"div",16)(4,"span",17),e.\u0275\u0275namespaceSVG(),e.\u0275\u0275element(5,"svg",18),e.\u0275\u0275elementEnd()(),e.\u0275\u0275namespaceHTML(),e.\u0275\u0275elementStart(6,"div",19)(7,"div",20)(8,"h6",21),e.\u0275\u0275text(9),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(10,"div",22),e.\u0275\u0275element(11,"ngb-progressbar",23),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(12,"p",24)(13,"small",25),e.\u0275\u0275text(14),e.\u0275\u0275pipe(15,"cdDate"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(16,"span",26),e.\u0275\u0275text(17),e.\u0275\u0275elementEnd()()()()()(),e.\u0275\u0275element(18,"hr"),e.\u0275\u0275elementEnd()),2&n){const t=c.$implicit,o=e.\u0275\u0275nextContext(2);e.\u0275\u0275advance(5),e.\u0275\u0275property("cdsIcon",o.icons.circle)("size",o.icons.size16),e.\u0275\u0275advance(4),e.\u0275\u0275textInterpolate(t.description),e.\u0275\u0275advance(2),e.\u0275\u0275property("value",null==t?null:t.progress)("striped",!0)("animated",!0),e.\u0275\u0275advance(3),e.\u0275\u0275textInterpolate1(" ",e.\u0275\u0275pipeBind1(15,8,t.begin_time)," "),e.\u0275\u0275advance(3),e.\u0275\u0275textInterpolate1(" ",t.progress||0," % ")}}function YF(n,c){if(1&n&&e.\u0275\u0275template(0,QF,19,10,"div",13),2&n){const t=e.\u0275\u0275nextContext();e.\u0275\u0275property("ngForOf",t.executingTasks)("ngForTrackBy",t.trackByFn)}}function JF(n,c){if(1&n){const t=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"button",39),e.\u0275\u0275listener("click",function(){e.\u0275\u0275restoreView(t);const i=e.\u0275\u0275nextContext().$implicit,r=e.\u0275\u0275nextContext(3);return e.\u0275\u0275resetView(r.silence(i))}),e.\u0275\u0275namespaceSVG(),e.\u0275\u0275element(1,"svg",18),e.\u0275\u0275elementEnd()}if(2&n){const t=e.\u0275\u0275nextContext(4);e.\u0275\u0275advance(),e.\u0275\u0275property("cdsIcon",t.icons.mute)("size",t.icons.size16)}}function ZF(n,c){if(1&n){const t=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"button",40),e.\u0275\u0275listener("click",function(){e.\u0275\u0275restoreView(t);const i=e.\u0275\u0275nextContext().$implicit,r=e.\u0275\u0275nextContext(3);return e.\u0275\u0275resetView(r.expire(i))}),e.\u0275\u0275namespaceSVG(),e.\u0275\u0275element(1,"svg",18),e.\u0275\u0275elementEnd()}if(2&n){const t=e.\u0275\u0275nextContext(4);e.\u0275\u0275advance(),e.\u0275\u0275property("cdsIcon",t.icons.bell)("size",t.icons.size16)}}function qF(n,c){if(1&n&&(e.\u0275\u0275elementContainerStart(0),e.\u0275\u0275elementStart(1,"small"),e.\u0275\u0275elementContainerStart(2),e.\u0275\u0275i18n(3,5),e.\u0275\u0275elementContainerEnd(),e.\u0275\u0275text(4),e.\u0275\u0275pipe(5,"duration"),e.\u0275\u0275elementEnd(),e.\u0275\u0275element(6,"br"),e.\u0275\u0275elementContainerEnd()),2&n){const t=e.\u0275\u0275nextContext().$implicit;e.\u0275\u0275advance(4),e.\u0275\u0275textInterpolate1(" ",e.\u0275\u0275pipeBind1(5,1,t.duration)," ")}}function e0(n,c){if(1&n){const t=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"div",30)(1,"div",31)(2,"div",15)(3,"div",16)(4,"span",30),e.\u0275\u0275element(5,"i",30)(6,"i",30),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(7,"div",32)(8,"div",20)(9,"button",33),e.\u0275\u0275listener("click",function(i){const r=e.\u0275\u0275restoreView(t).index;return e.\u0275\u0275nextContext(3).remove(r),e.\u0275\u0275resetView(i.stopPropagation())}),e.\u0275\u0275namespaceSVG(),e.\u0275\u0275element(10,"svg",18),e.\u0275\u0275elementEnd(),e.\u0275\u0275template(11,JF,2,2,"button",34)(12,ZF,2,2,"button",35),e.\u0275\u0275namespaceHTML(),e.\u0275\u0275elementStart(13,"h6",21),e.\u0275\u0275text(14),e.\u0275\u0275elementEnd(),e.\u0275\u0275element(15,"p",36),e.\u0275\u0275elementStart(16,"p",24),e.\u0275\u0275template(17,qF,7,3,"ng-container",27),e.\u0275\u0275elementStart(18,"small",37),e.\u0275\u0275pipe(19,"cdDate"),e.\u0275\u0275text(20),e.\u0275\u0275pipe(21,"relativeDate"),e.\u0275\u0275elementEnd(),e.\u0275\u0275element(22,"i",38),e.\u0275\u0275elementEnd()()()()(),e.\u0275\u0275element(23,"hr"),e.\u0275\u0275elementEnd()}if(2&n){const t=c.$implicit,o=e.\u0275\u0275nextContext(3);e.\u0275\u0275property("ngClass",t.borderClass),e.\u0275\u0275advance(4),e.\u0275\u0275property("ngClass",e.\u0275\u0275pureFunction3(19,zs,o.icons.stack,o.icons.large,t.textClass)),e.\u0275\u0275advance(),e.\u0275\u0275property("ngClass",e.\u0275\u0275pureFunction2(23,WF,o.icons.circle,o.icons.stack2x)),e.\u0275\u0275advance(),e.\u0275\u0275property("ngClass",e.\u0275\u0275pureFunction3(26,zs,o.icons.stack1x,o.icons.inverse,t.iconClass)),e.\u0275\u0275advance(4),e.\u0275\u0275property("cdsIcon",o.icons.trash)("size",o.icons.size16),e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf","Prometheus"===t.application&&2!==t.type&&!t.alertSilenced),e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf","Prometheus"===t.application&&2!==t.type&&t.alertSilenced),e.\u0275\u0275advance(2),e.\u0275\u0275textInterpolate(t.title),e.\u0275\u0275advance(),e.\u0275\u0275property("innerHtml",t.message,e.\u0275\u0275sanitizeHtml),e.\u0275\u0275advance(2),e.\u0275\u0275property("ngIf",t.duration),e.\u0275\u0275advance(),e.\u0275\u0275property("title",e.\u0275\u0275pipeBind1(19,15,t.timestamp)),e.\u0275\u0275advance(2),e.\u0275\u0275textInterpolate(e.\u0275\u0275pipeBind1(21,17,t.timestamp)),e.\u0275\u0275advance(2),e.\u0275\u0275property("ngClass",e.\u0275\u0275pureFunction1(30,KF,t.applicationClass))("title",t.application)}}function t0(n,c){if(1&n){const t=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementContainerStart(0),e.\u0275\u0275elementStart(1,"button",28),e.\u0275\u0275listener("click",function(i){return e.\u0275\u0275restoreView(t),e.\u0275\u0275nextContext(2).removeAll(),e.\u0275\u0275resetView(i.stopPropagation())}),e.\u0275\u0275namespaceSVG(),e.\u0275\u0275element(2,"svg",18),e.\u0275\u0275text(3," \xa0 "),e.\u0275\u0275namespaceHTML(),e.\u0275\u0275elementContainerStart(4),e.\u0275\u0275i18n(5,4),e.\u0275\u0275elementContainerEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275element(6,"hr"),e.\u0275\u0275template(7,e0,24,32,"div",29),e.\u0275\u0275elementContainerEnd()}if(2&n){const t=e.\u0275\u0275nextContext(2);e.\u0275\u0275advance(2),e.\u0275\u0275property("cdsIcon",t.icons.trash)("size",t.icons.size16),e.\u0275\u0275advance(5),e.\u0275\u0275property("ngForOf",t.notifications)}}function n0(n,c){if(1&n&&e.\u0275\u0275template(0,t0,8,3,"ng-container",27),2&n){const t=e.\u0275\u0275nextContext();e.\u0275\u0275property("ngIf",t.notifications.length>0)}}function o0(n,c){1&n&&(e.\u0275\u0275elementStart(0,"div")(1,"div",41),e.\u0275\u0275i18n(2,6),e.\u0275\u0275elementEnd()())}function i0(n,c){if(1&n&&e.\u0275\u0275template(0,o0,3,0,"div",27),2&n){const t=e.\u0275\u0275nextContext();e.\u0275\u0275property("ngIf",0===t.notifications.length&&0===t.executingTasks.length)}}function a0(n,c){1&n&&e.\u0275\u0275elementContainer(0)}function s0(n,c){1&n&&e.\u0275\u0275elementContainer(0)}function r0(n,c){1&n&&e.\u0275\u0275elementContainer(0)}let l0=(()=>{class n{constructor(t,o,i,r,p,F,D,x,H,X){this.notificationService=t,this.summaryService=o,this.taskMessageService=i,this.prometheusNotificationService=r,this.succeededLabels=p,this.authStorageService=F,this.prometheusAlertService=D,this.prometheusService=x,this.ngZone=H,this.cdRef=X,this.isSidebarOpened=!1,this.executingTasks=[],this.subs=new K.Subscription,this.icons=g.FI,this.last_task="",this.mutex=new zF.Mutex,this.simplebar={autoHide:!1},this.notifications=[]}ngOnDestroy(){window.clearInterval(this.interval),window.clearTimeout(this.timeout),this.subs.unsubscribe()}ngOnInit(){this.last_task=window.localStorage.getItem("last_task");const t=this.authStorageService.getPermissions();t.prometheus.read&&t.configOpt.read&&(this.triggerPrometheusAlerts(),this.ngZone.runOutsideAngular(()=>{this.interval=window.setInterval(()=>{this.ngZone.run(()=>{this.triggerPrometheusAlerts()})},5e3)})),this.subs.add(this.notificationService.data$.subscribe(o=>{this.notifications=E().orderBy(o,["timestamp"],["desc"]),this.cdRef.detectChanges()})),this.subs.add(this.notificationService.sidebarSubject.subscribe(o=>{this.isSidebarOpened=!o&&!this.isSidebarOpened,window.clearTimeout(this.timeout),this.timeout=window.setTimeout(()=>{this.cdRef.detectChanges()},0)})),this.subs.add(this.summaryService.subscribe(o=>{this._handleTasks(o.executing_tasks),this.mutex.acquire().then(i=>{E().filter(o.finished_tasks,r=>!this.last_task||lt()(r.end_time).isAfter(this.last_task)).forEach(r=>{const p=this.notificationService.finishedTaskToNotification(r,r.success),F=new va.p(p);F.timestamp=r.end_time,F.duration=r.duration,(!this.last_task||lt()(r.end_time).isAfter(this.last_task))&&(this.last_task=r.end_time,window.localStorage.setItem("last_task",this.last_task)),this.notificationService.save(F)}),this.cdRef.detectChanges(),i()})}))}_handleTasks(t){for(const o of t)o.description=this.taskMessageService.getRunningTitle(o);this.executingTasks=t}triggerPrometheusAlerts(){this.prometheusAlertService.refresh(!0),this.prometheusNotificationService.refresh()}removeAll(){this.notificationService.removeAll()}remove(t){this.notificationService.remove(t)}closeSidebar(){this.isSidebarOpened=!1}trackByFn(t){return t}silence(t){const o="YYYY-MM-DD HH:mm",i=$localize`silence`,r={name:"alertname",value:t.title.split(" ")[0],isRegex:!1},p={matchers:[r],startsAt:lt()(lt()().format(o)).toISOString(),endsAt:lt()(lt()().add(2,"hours").format(o)).toISOString(),createdBy:this.authStorageService.getUsername(),comment:"Silence created from the alert notification"};let F="";t.alertSilenced=!0,F=F.concat(` ${r.name} - ${r.value},`);const D=`${this.succeededLabels.CREATED} ${i} for ${F.slice(0,-1)}`;this.prometheusService.setSilence(p).subscribe(x=>{t&&(t.silenceId=x.body.silenceId),this.notificationService.show(Le._.success,D,void 0,void 0,"Prometheus")})}expire(t){t.alertSilenced=!1,this.prometheusService.expireSilence(t.silenceId).subscribe(()=>{this.notificationService.show(Le._.success,`${this.succeededLabels.EXPIRED} ${t.silenceId}`,void 0,void 0,"Prometheus")},o=>{o.application="Prometheus"})}static{this.\u0275fac=function(o){return new(o||n)(e.\u0275\u0275directiveInject(Y.J),e.\u0275\u0275directiveInject(on.E),e.\u0275\u0275directiveInject(kF.i),e.\u0275\u0275directiveInject(XF),e.\u0275\u0275directiveInject(f.Vv),e.\u0275\u0275directiveInject(_.v),e.\u0275\u0275directiveInject(Eo),e.\u0275\u0275directiveInject(fn.o),e.\u0275\u0275directiveInject(e.NgZone),e.\u0275\u0275directiveInject(e.ChangeDetectorRef))}}static{this.\u0275cmp=e.\u0275\u0275defineComponent({type:n,selectors:[["cd-notifications-sidebar"]],hostVars:2,hostBindings:function(o,i){2&o&&e.\u0275\u0275classProp("active",i.isSidebarOpened)},decls:16,vars:5,consts:()=>{let t,o,i,r,p,F,D;return t=$localize`:␟0a23e992f6c6e169a38b2b7338b4e5e803b52e0d␟2585429450328251089:Tasks and Notifications`,o=$localize`:␟7e52e9143145e1db5146258de81eae018a407b31␟6219288588962415681:Clear notifications`,i=$localize`:␟b0b07bb6b7ff21ede439dd04eaf8872d1ecb84d8␟5231270867791726531:Remove notification`,r=$localize`:␟149fe519b5889008c9208739c711d6c85d5fe0ab␟29836899177300565:Silence Alert`,p=$localize`:␟f023beceb4b9213a14b0f80a9dd472eb59b87174␟239145694936384171:Expire Silence`,F=$localize`:␟e17a1d75189da843f541f7764f188f2b19a97df2␟4220765745195024064:Duration:`,D=$localize`:␟0d4b37c6675c5b436a54c43d6716eec835e1aa7f␟4164297423243333029:There are no notifications.`,[["tasksTpl",""],["notificationsTpl",""],["emptyTpl",""],t,o,F,D,[1,"card",3,"clickOutside","clickOutsideEnabled"],[1,"card-header"],["tabindex","-1","type","button","title","close",1,"btn-close","float-end",3,"click"],[3,"options"],[1,"card-body"],[4,"ngTemplateOutlet"],[4,"ngFor","ngForOf","ngForTrackBy"],[1,"card","tc_task","border-0"],[1,"row","no-gutters"],[1,"col-md-2","text-center"],[1,"text-info"],[3,"cdsIcon","size"],[1,"col-md-9"],[1,"card-body","p-1"],[1,"card-title","bold"],[1,"mb-1"],["type","info",3,"value","striped","animated"],[1,"card-text","text-muted"],[1,"date","float-start"],[1,"float-end"],[4,"ngIf"],["type","button",1,"btn","btn-light","btn-block",3,"click"],[3,"ngClass",4,"ngFor","ngForOf"],[3,"ngClass"],[1,"card","tc_notification","border-0"],[1,"col-md-10"],["title",i,1,"btn","btn-link","float-end","mt-0","pt-0",3,"click"],["class","btn btn-link float-end text-muted mute m-0 p-0","title",r,3,"click",4,"ngIf"],["class","btn btn-link float-end text-muted mute m-0 p-0","title",p,3,"click",4,"ngIf"],[1,"card-text",3,"innerHtml"],[1,"date",3,"title"],[1,"float-end","custom-icon",3,"ngClass","title"],["title",r,1,"btn","btn-link","float-end","text-muted","mute","m-0","p-0",3,"click"],["title",p,1,"btn","btn-link","float-end","text-muted","mute","m-0","p-0",3,"click"],[1,"message","text-center"]]},template:function(o,i){if(1&o){const r=e.\u0275\u0275getCurrentView();e.\u0275\u0275template(0,YF,1,2,"ng-template",null,0,e.\u0275\u0275templateRefExtractor)(2,n0,1,1,"ng-template",null,1,e.\u0275\u0275templateRefExtractor)(4,i0,1,1,"ng-template",null,2,e.\u0275\u0275templateRefExtractor),e.\u0275\u0275elementStart(6,"div",7),e.\u0275\u0275listener("clickOutside",function(){return e.\u0275\u0275restoreView(r),e.\u0275\u0275resetView(i.closeSidebar())}),e.\u0275\u0275elementStart(7,"div",8),e.\u0275\u0275elementContainerStart(8),e.\u0275\u0275i18n(9,3),e.\u0275\u0275elementContainerEnd(),e.\u0275\u0275elementStart(10,"button",9),e.\u0275\u0275listener("click",function(){return e.\u0275\u0275restoreView(r),e.\u0275\u0275resetView(i.closeSidebar())}),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(11,"ngx-simplebar",10)(12,"div",11),e.\u0275\u0275template(13,a0,1,0,"ng-container",12)(14,s0,1,0,"ng-container",12)(15,r0,1,0,"ng-container",12),e.\u0275\u0275elementEnd()()()}if(2&o){const r=e.\u0275\u0275reference(1),p=e.\u0275\u0275reference(3),F=e.\u0275\u0275reference(5);e.\u0275\u0275advance(6),e.\u0275\u0275property("clickOutsideEnabled",i.isSidebarOpened),e.\u0275\u0275advance(5),e.\u0275\u0275property("options",i.simplebar),e.\u0275\u0275advance(2),e.\u0275\u0275property("ngTemplateOutlet",r),e.\u0275\u0275advance(),e.\u0275\u0275property("ngTemplateOutlet",p),e.\u0275\u0275advance(),e.\u0275\u0275property("ngTemplateOutlet",F)}},dependencies:[l.NgClass,l.NgForOf,l.NgIf,l.NgTemplateOutlet,V.NgbProgressbar,De.S,jF.ClickOutsideDirective,Da.SimplebarAngularComponent,L.IconDirective,po.D,Ht.Q,Oa.b],styles:["[_nghost-%COMP%]{bottom:10px;max-width:90vw;position:fixed;right:-350px;top:53px;transition:all .6s;width:350px;z-index:9}.active[_nghost-%COMP%]{right:20px}.card[_ngcontent-%COMP%]{height:100%}.card-body[_ngcontent-%COMP%]{padding-left:0;padding-right:5px;padding-top:3px}ngx-simplebar[_ngcontent-%COMP%]{height:calc(100% - 42.2px)}.separator[_ngcontent-%COMP%]{background-color:#e9ecef;color:#6c757d;font-size:1rem;padding:5px 12px}.btn-block[_ngcontent-%COMP%]{width:98%}.btn-link[_ngcontent-%COMP%]   .fa-trash-o[_ngcontent-%COMP%]{color:#000}table[_ngcontent-%COMP%]{width:100%}.row[_ngcontent-%COMP%]{margin-left:0;margin-right:0;padding-bottom:1rem;padding-top:1rem}hr[_ngcontent-%COMP%]{margin-bottom:2px;margin-top:2px}"],changeDetection:0})}}return n})();const _0=n=>({running:n});function c0(n,c){1&n&&e.\u0275\u0275element(0,"span",5)}let d0=(()=>{class n{constructor(t,o){this.notificationService=t,this.summaryService=o,this.icons=g.FI,this.hasRunningTasks=!1,this.hasNotifications=!1,this.subs=new K.Subscription}ngOnInit(){this.subs.add(this.summaryService.subscribe(t=>{this.hasRunningTasks=t.executing_tasks.length>0})),this.subs.add(this.notificationService.data$.subscribe(t=>{this.hasNotifications=t.length>0}))}ngOnDestroy(){this.subs.unsubscribe()}static{this.\u0275fac=function(o){return new(o||n)(e.\u0275\u0275directiveInject(Y.J),e.\u0275\u0275directiveInject(on.E))}}static{this.\u0275cmp=e.\u0275\u0275defineComponent({type:n,selectors:[["cd-notifications"]],decls:5,vars:4,consts:()=>{let t,o;return t=$localize`:␟0a23e992f6c6e169a38b2b7338b4e5e803b52e0d␟2585429450328251089:Tasks and Notifications`,o=$localize`:␟0a23e992f6c6e169a38b2b7338b4e5e803b52e0d␟2585429450328251089:Tasks and Notifications`,[o,["title",t,3,"ngClass"],["cdsIcon","notification","size","20","title","notification"],["class","dot",4,"ngIf"],[1,"d-md-none"],[1,"dot"]]},template:function(o,i){1&o&&(e.\u0275\u0275elementStart(0,"a",1),e.\u0275\u0275namespaceSVG(),e.\u0275\u0275element(1,"svg",2),e.\u0275\u0275template(2,c0,1,0,"span",3),e.\u0275\u0275namespaceHTML(),e.\u0275\u0275elementStart(3,"span",4),e.\u0275\u0275i18n(4,0),e.\u0275\u0275elementEnd()()),2&o&&(e.\u0275\u0275property("ngClass",e.\u0275\u0275pureFunction1(2,_0,i.hasRunningTasks)),e.\u0275\u0275advance(2),e.\u0275\u0275property("ngIf",i.hasNotifications))},dependencies:[l.NgClass,l.NgIf,L.IconDirective],styles:[".running[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{color:#25828e}.running[_ngcontent-%COMP%]:hover   i[_ngcontent-%COMP%]{color:#fff}a[_ngcontent-%COMP%]   .dot[_ngcontent-%COMP%]{background-color:#2b99a8;border:2px solid #374249;border-radius:50%;height:11px;position:absolute;right:17px;top:10px;width:10px}a[_ngcontent-%COMP%]:hover   .dot[_ngcontent-%COMP%]{background-color:#fff;border-color:#2b99a8}"]})}}return n})(),u0=(()=>{class n{constructor(t){this.http=t,this.baseUIURL="api/feedback"}isKeyExist(){return this.http.get("ui-api/feedback/api_key/exist")}createIssue(t,o,i,r,p){return this.http.post("api/feedback",{project:t,tracker:o,subject:i,description:r,api_key:p},{headers:{Accept:"application/vnd.ceph.api.v0.1+json"}})}static{this.\u0275fac=function(o){return new(o||n)(e.\u0275\u0275inject(h.HttpClient))}}static{this.\u0275prov=e.\u0275\u0275defineInjectable({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();function p0(n,c){if(1&n){const t=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"cd-alert-panel",38),e.\u0275\u0275i18nStart(1,8),e.\u0275\u0275elementStart(2,"a",39),e.\u0275\u0275listener("click",function(){e.\u0275\u0275restoreView(t);const i=e.\u0275\u0275nextContext();return e.\u0275\u0275resetView(i.redirect())}),e.\u0275\u0275elementEnd(),e.\u0275\u0275i18nEnd(),e.\u0275\u0275elementEnd()}}function m0(n,c){1&n&&(e.\u0275\u0275elementStart(0,"span",43),e.\u0275\u0275i18n(1,10),e.\u0275\u0275elementEnd())}function f0(n,c){1&n&&(e.\u0275\u0275elementStart(0,"span",43),e.\u0275\u0275i18n(1,11),e.\u0275\u0275elementEnd())}function E0(n,c){if(1&n&&(e.\u0275\u0275elementStart(0,"div",40)(1,"label",41),e.\u0275\u0275i18n(2,9),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(3,"div",25),e.\u0275\u0275element(4,"input",42),e.\u0275\u0275template(5,m0,2,0,"span",29)(6,f0,2,0,"span",29),e.\u0275\u0275elementEnd()()),2&n){const t=e.\u0275\u0275nextContext(),o=e.\u0275\u0275reference(5);e.\u0275\u0275advance(5),e.\u0275\u0275property("ngIf",t.feedbackForm.showError("api_key",o,"required")),e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf",t.feedbackForm.showError("api_key",o,"invalidApiKey"))}}function g0(n,c){if(1&n&&(e.\u0275\u0275elementStart(0,"option",44),e.\u0275\u0275text(1),e.\u0275\u0275elementEnd()),2&n){const t=c.$implicit;e.\u0275\u0275property("value",t),e.\u0275\u0275advance(),e.\u0275\u0275textInterpolate(t)}}function C0(n,c){1&n&&(e.\u0275\u0275elementStart(0,"span",43),e.\u0275\u0275i18n(1,12),e.\u0275\u0275elementEnd())}function S0(n,c){if(1&n&&(e.\u0275\u0275elementStart(0,"option",44),e.\u0275\u0275text(1),e.\u0275\u0275elementEnd()),2&n){const t=c.$implicit;e.\u0275\u0275property("value",t),e.\u0275\u0275advance(),e.\u0275\u0275textInterpolate(t)}}function h0(n,c){1&n&&(e.\u0275\u0275elementStart(0,"span",43),e.\u0275\u0275i18n(1,13),e.\u0275\u0275elementEnd())}function T0(n,c){1&n&&(e.\u0275\u0275elementStart(0,"span",43),e.\u0275\u0275i18n(1,14),e.\u0275\u0275elementEnd())}function F0(n,c){1&n&&(e.\u0275\u0275elementStart(0,"span",43),e.\u0275\u0275i18n(1,15),e.\u0275\u0275elementEnd())}let v0=(()=>{class n{constructor(t,o,i,r,p,F){this.feedbackService=t,this.activeModal=o,this.actionLabels=i,this.secondaryModal=r,this.notificationService=p,this.router=F,this.title="Feedback",this.project=["dashboard","block","objects","file_system","ceph_manager","orchestrator","ceph_volume","core_ceph"],this.tracker=["bug","feature"],this.isAPIKeySet=!1,this.isFeedbackEnabled=!0}ngOnInit(){this.createForm(),this.keySub=this.feedbackService.isKeyExist().subscribe({next:t=>{this.isAPIKeySet=t,this.isAPIKeySet&&this.feedbackForm.get("api_key").clearValidators()},error:()=>{this.isFeedbackEnabled=!1,this.feedbackForm.disable()}})}createForm(){this.feedbackForm=new Se.$({project:new T.UntypedFormControl("",T.Validators.required),tracker:new T.UntypedFormControl("",T.Validators.required),subject:new T.UntypedFormControl("",T.Validators.required),description:new T.UntypedFormControl("",T.Validators.required),api_key:new T.UntypedFormControl("",T.Validators.required)})}ngOnDestroy(){this.keySub.unsubscribe()}onSubmit(){this.feedbackService.createIssue(this.feedbackForm.controls.project.value,this.feedbackForm.controls.tracker.value,this.feedbackForm.controls.subject.value,this.feedbackForm.controls.description.value,this.feedbackForm.controls.api_key.value).subscribe({next:t=>{this.notificationService.show(Le._.success,$localize`Issue successfully created on Ceph Issue tracker`,`Go to the tracker: <a href="https://tracker.ceph.com/issues/${t.message.issue.id}" target="_blank"> ${t.message.issue.id} </a>`)},error:()=>{this.feedbackForm.get("api_key").setErrors({invalidApiKey:!0}),this.feedbackForm.setErrors({cdSubmitButton:!0})},complete:()=>{this.activeModal.close()}})}redirect(){this.activeModal.close(),this.router.navigate(["/mgr-modules"])}static{this.\u0275fac=function(o){return new(o||n)(e.\u0275\u0275directiveInject(u0),e.\u0275\u0275directiveInject(V.NgbActiveModal),e.\u0275\u0275directiveInject(f.Ss),e.\u0275\u0275directiveInject(V.NgbModal),e.\u0275\u0275directiveInject(Y.J),e.\u0275\u0275directiveInject(m.Router))}}static{this.\u0275cmp=e.\u0275\u0275defineComponent({type:n,selectors:[["cd-feedback"]],decls:42,vars:12,consts:()=>{let t,o,i,r,p,F,D,x,H,X,Z,re,pe,be,Pe;return t=$localize`:␟9df5e237f3fd0322db7b61097eba221e5517b93b␟3889192220307199156:Report an issue`,o=$localize`:␟c660f51d0a809bdffb6939f4c4459858abc2288b␟2651912264744301649:Project name`,i=$localize`:␟348b7b123fb4a6f145a5c485b7c46da55a10e7de␟208900831031752301:-- Select a project --`,r=$localize`:␟b2c47a0b64e43a8d592dd1ddac8b4ae1bf0fad25␟2456511013791497391:Tracker`,p=$localize`:␟ed2068f32cb361d731f70efcb0cec770be75d656␟7156385088155573022:-- Select a tracker --`,F=$localize`:␟4b0ca852bafa5037c4e64c7b18f9cd1e14b799de␟9127604588498960753:Subject`,D=$localize`:␟eec715de352a6b114713b30b640d319fa78207a0␟4902817035128594900:Description`,x=$localize`:␟6d32536a0a1d31ae4a9f5b4c8c80b557de191fe5␟366220122123488147:Feedback module is not enabled. Please enable it from ${"\ufffd#2\ufffd"}:START_LINK:Cluster-> Manager Modules.${"\ufffd/#2\ufffd"}:CLOSE_LINK:`,H=$localize`:␟f9640491e408177fb205a849c01772d8b9ba4e7e␟4885900247611181996:Ceph Tracker API Key`,X=$localize`:␟c09dbf49c81e614e7dcd06bfd2820afcef95fcd5␟728691479868717683:Ceph Tracker API key is required.`,Z=$localize`:␟9108897bc069bf143eb817be990ff2362cf90fc1␟2623008326536469596:Ceph Tracker API key is invalid.`,re=$localize`:␟9372de61877f8e545973af01665d96336c2bf354␟734302967336146005:Project name is required.`,pe=$localize`:␟65396d2b4d00b78b54ad92fcfbabd7958cfb88f7␟2367373933484256227:Tracker name is required.`,be=$localize`:␟dd7609d918d98e831ecbbe99879489ce3b6e82e6␟1292968119875230500:Subject is required.`,Pe=$localize`:␟8b49c52315ea545a3b62d127fbe3515910bfa5cd␟2512365026527188575:Description is required.`,[["formDir","ngForm"],t,o,i,r,p,F,D,x,H,X,Z,re,pe,be,Pe,[3,"modalRef"],[1,"modal-title"],[1,"modal-content"],["name","feedbackForm",3,"formGroup"],[1,"modal-body"],["type","error",4,"ngIf"],["class","form-group row mt-3",4,"ngIf"],[1,"form-group","row"],["for","project",1,"cd-col-form-label","required"],[1,"cd-col-form-input"],["id","project","formControlName","project",1,"form-control"],["ngValue",""],[3,"value",4,"ngFor","ngForOf"],["class","invalid-feedback",4,"ngIf"],["for","tracker",1,"cd-col-form-label","required"],["id","tracker","formControlName","tracker",1,"form-control"],["for","subject",1,"cd-col-form-label","required"],["id","subject","type","text","formControlName","subject","placeholder","Add issue title",1,"form-control"],["for","description",1,"cd-col-form-label","required"],["id","description","type","text","formControlName","description","placeholder","Add issue description",1,"form-control"],[1,"modal-footer"],["wrappingClass","text-right",3,"submitActionEvent","form","submitText"],["type","error"],[3,"click"],[1,"form-group","row","mt-3"],["for","api_key",1,"cd-col-form-label","required"],["id","api_key","type","password","formControlName","api_key","placeholder","Add Ceph tracker API key",1,"form-control"],[1,"invalid-feedback"],[3,"value"]]},template:function(o,i){if(1&o){const r=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"cd-modal",16)(1,"div",17),e.\u0275\u0275i18n(2,1),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(3,"div",18)(4,"form",19,0)(6,"div",20),e.\u0275\u0275template(7,p0,3,0,"cd-alert-panel",21)(8,E0,7,2,"div",22),e.\u0275\u0275elementStart(9,"div",23)(10,"label",24),e.\u0275\u0275i18n(11,2),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(12,"div",25)(13,"select",26)(14,"option",27),e.\u0275\u0275i18n(15,3),e.\u0275\u0275elementEnd(),e.\u0275\u0275template(16,g0,2,2,"option",28),e.\u0275\u0275elementEnd(),e.\u0275\u0275template(17,C0,2,0,"span",29),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(18,"div",23)(19,"label",30),e.\u0275\u0275i18n(20,4),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(21,"div",25)(22,"select",31)(23,"option",27),e.\u0275\u0275i18n(24,5),e.\u0275\u0275elementEnd(),e.\u0275\u0275template(25,S0,2,2,"option",28),e.\u0275\u0275elementEnd(),e.\u0275\u0275template(26,h0,2,0,"span",29),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(27,"div",23)(28,"label",32),e.\u0275\u0275i18n(29,6),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(30,"div",25),e.\u0275\u0275element(31,"input",33),e.\u0275\u0275template(32,T0,2,0,"span",29),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(33,"div",23)(34,"label",34),e.\u0275\u0275i18n(35,7),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(36,"div",25)(37,"textarea",35),e.\u0275\u0275text(38,"            "),e.\u0275\u0275elementEnd(),e.\u0275\u0275template(39,F0,2,0,"span",29),e.\u0275\u0275elementEnd()()(),e.\u0275\u0275elementStart(40,"div",36)(41,"cd-form-button-panel",37),e.\u0275\u0275listener("submitActionEvent",function(){return e.\u0275\u0275restoreView(r),e.\u0275\u0275resetView(i.onSubmit())}),e.\u0275\u0275elementEnd()()()()()}if(2&o){const r=e.\u0275\u0275reference(5);e.\u0275\u0275property("modalRef",i.activeModal),e.\u0275\u0275advance(4),e.\u0275\u0275property("formGroup",i.feedbackForm),e.\u0275\u0275advance(3),e.\u0275\u0275property("ngIf",!i.isFeedbackEnabled),e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf",!i.isAPIKeySet),e.\u0275\u0275advance(8),e.\u0275\u0275property("ngForOf",i.project),e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf",i.feedbackForm.showError("project",r,"required")),e.\u0275\u0275advance(8),e.\u0275\u0275property("ngForOf",i.tracker),e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf",i.feedbackForm.showError("tracker",r,"required")),e.\u0275\u0275advance(6),e.\u0275\u0275property("ngIf",i.feedbackForm.showError("subject",r,"required")),e.\u0275\u0275advance(7),e.\u0275\u0275property("ngIf",i.feedbackForm.showError("description",r,"required")),e.\u0275\u0275advance(2),e.\u0275\u0275property("form",i.feedbackForm)("submitText",i.actionLabels.SUBMIT)}},dependencies:[l.NgForOf,l.NgIf,xt.z,it.m,Q.e,De.S,Me.a,xe.C,ze.E,T.\u0275NgNoValidate,T.NgSelectOption,T.\u0275NgSelectMultipleOption,T.DefaultValueAccessor,T.SelectControlValueAccessor,T.NgControlStatus,T.NgControlStatusGroup,T.FormGroupDirective,T.FormControlName]})}}return n})();var M0=s(43809),Xs=function(n){return n.DASHBOARD_USRENAME="dashboard_username",n}(Xs||{});let R0=(()=>{class n{constructor(t,o,i,r){this.activeModal=t,this.summaryService=o,this.userService=i,this.authStorageService=r,this.userPermission=this.authStorageService.getPermissions().user}ngOnInit(){this.projectConstants=f.D5,this.hostAddr=window.location.hostname,this.modalVariables=this.setVariables(),this.subs=this.summaryService.subscribe(t=>{const o=t.version.replace(`${f.qA} `,"").split(" ");this.hostAddr=t.mgr_host.replace(/(^\w+:|^)\/\//,"").replace(/\/$/,""),this.versionNumber=o[0],this.versionHash=o[1],this.versionName=o.slice(2,o.length).join(" ")})}ngOnDestroy(){this.subs.unsubscribe()}setVariables(){const t=$localize`Not available`,o={};o.user=localStorage.getItem(Xs.DASHBOARD_USRENAME),o.role=f.m3,this.userPermission.read&&this.userService.get(o.user).subscribe(r=>{o.role=r.roles});const i=(0,M0.detect)();return o.browserName=i&&i.name?i.name:t,o.browserVersion=i&&i.version?i.version:t,o.browserOS=i&&i.os?i.os:t,o}static{this.\u0275fac=function(o){return new(o||n)(e.\u0275\u0275directiveInject(V.NgbActiveModal),e.\u0275\u0275directiveInject(on.E),e.\u0275\u0275directiveInject(xa.D),e.\u0275\u0275directiveInject(_.v))}}static{this.\u0275cmp=e.\u0275\u0275defineComponent({type:n,selectors:[["cd-about"]],decls:44,vars:13,consts:()=>{let t,o,i,r,p,F,D,x;return t=$localize`:␟f4e529ae5ffd73001d1ff4bbdeeb0a72e342e5c8␟7819314041543176992:Close`,o=$localize`:␟8fe73a4787b8068b2ba61f54ab7e0f9af2ea1fc9␟2724055831234181057:Version`,i=$localize`:␟9ee8ff9ec37d57698af22c58d6fe3585a50f0348␟3293300766783401194:Ceph Manager`,r=$localize`:␟e08a77594f3d89311cdf6da5090044270909c194␟2392488717875840729:User`,p=$localize`:␟ea23921000c2420f43488e431629943790e3b984␟905150179853267182:User Role`,F=$localize`:␟3711301a1b9e1890b056fd7e47bea62877df9352␟5855712980171403039:Browser`,D=$localize`:␟8319ba35cd46f05a9c090167bce10a49472e54bb␟6469011143009414758:Browser Version`,x=$localize`:␟819a770bf32aa290ba58ad1e7712b21d83559b4a␟8611927475785298767:Browser OS`,[o,i,r,p,F,D,x,[1,"about-container"],[1,"modal-header"],["type","button","aria-label",t,1,"btn-close","float-end",3,"click"],[1,"modal-body"],["src","assets/Ceph_Ceph_Logo_with_text_red_white.svg",1,"ceph-logo",3,"alt"],[1,"product-versions"],[1,"modal-footer"],[1,"text-left"]]},template:function(o,i){1&o&&(e.\u0275\u0275elementStart(0,"div",7)(1,"div",8)(2,"button",9),e.\u0275\u0275listener("click",function(){return i.activeModal.close()}),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(3,"div",10),e.\u0275\u0275element(4,"img",11),e.\u0275\u0275elementStart(5,"h3")(6,"strong"),e.\u0275\u0275text(7),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(8,"div",12)(9,"strong"),e.\u0275\u0275i18n(10,0),e.\u0275\u0275elementEnd(),e.\u0275\u0275element(11,"br"),e.\u0275\u0275text(12),e.\u0275\u0275element(13,"br"),e.\u0275\u0275text(14),e.\u0275\u0275elementEnd(),e.\u0275\u0275element(15,"br"),e.\u0275\u0275elementStart(16,"dl")(17,"dt"),e.\u0275\u0275i18n(18,1),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(19,"dd"),e.\u0275\u0275text(20),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(21,"dt"),e.\u0275\u0275i18n(22,2),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(23,"dd"),e.\u0275\u0275text(24),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(25,"dt"),e.\u0275\u0275i18n(26,3),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(27,"dd"),e.\u0275\u0275text(28),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(29,"dt"),e.\u0275\u0275i18n(30,4),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(31,"dd"),e.\u0275\u0275text(32),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(33,"dt"),e.\u0275\u0275i18n(34,5),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(35,"dd"),e.\u0275\u0275text(36),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(37,"dt"),e.\u0275\u0275i18n(38,6),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(39,"dd"),e.\u0275\u0275text(40),e.\u0275\u0275elementEnd()()(),e.\u0275\u0275elementStart(41,"div",13)(42,"div",14),e.\u0275\u0275text(43),e.\u0275\u0275elementEnd()()()),2&o&&(e.\u0275\u0275advance(4),e.\u0275\u0275propertyInterpolate("alt",i.projectConstants.organization),e.\u0275\u0275advance(3),e.\u0275\u0275textInterpolate(i.projectConstants.projectName),e.\u0275\u0275advance(5),e.\u0275\u0275textInterpolate2(" ",i.versionNumber," ",i.versionHash," "),e.\u0275\u0275advance(2),e.\u0275\u0275textInterpolate1(" ",i.versionName," "),e.\u0275\u0275advance(6),e.\u0275\u0275textInterpolate(i.hostAddr),e.\u0275\u0275advance(4),e.\u0275\u0275textInterpolate(i.modalVariables.user),e.\u0275\u0275advance(4),e.\u0275\u0275textInterpolate(i.modalVariables.role),e.\u0275\u0275advance(4),e.\u0275\u0275textInterpolate(i.modalVariables.browserName),e.\u0275\u0275advance(4),e.\u0275\u0275textInterpolate(i.modalVariables.browserVersion),e.\u0275\u0275advance(4),e.\u0275\u0275textInterpolate(i.modalVariables.browserOS),e.\u0275\u0275advance(3),e.\u0275\u0275textInterpolate2(" ",i.projectConstants.copyright," ",i.projectConstants.license," "))},dependencies:[De.S],styles:[".about-container[_ngcontent-%COMP%]{background-color:#374249;background-image:url(ceph_background.3fbdf95cd52530d7.gif);background-position:right bottom;background-repeat:no-repeat;color:#fff;text-shadow:1px 1px #374249}.product-versions[_ngcontent-%COMP%]{margin-top:30px}.product-versions[_ngcontent-%COMP%]   strong[_ngcontent-%COMP%]{margin-right:10px}.modal-header[_ngcontent-%COMP%]{border-bottom:0}.modal-header[_ngcontent-%COMP%]   .close[_ngcontent-%COMP%]{color:#fff;font-size:2em}.modal-body[_ngcontent-%COMP%]{padding-left:80px;padding-right:80px}.ceph-logo[_ngcontent-%COMP%]{margin-bottom:30px;width:25%}.modal-footer[_ngcontent-%COMP%]{border-top:0;display:block;padding:15px 80px 35px}"]})}}return n})();const O0=n=>({"cds--overflow-menu-options__btn":!0,disabled:n});function P0(n,c){1&n&&(e.\u0275\u0275namespaceSVG(),e.\u0275\u0275element(0,"svg",11),e.\u0275\u0275namespaceHTML(),e.\u0275\u0275elementStart(1,"span",12),e.\u0275\u0275i18n(2,5),e.\u0275\u0275elementEnd())}let b0=(()=>{class n{constructor(t,o){this.modalService=t,this.docService=o,this.icons=g.FI}ngOnInit(){this.docService.subscribeOnce("dashboard",t=>{this.docsUrl=t})}openAboutModal(){this.modalRef=this.modalService.show(R0,null,{size:"lg"})}openFeedbackModal(){this.bsModalRef=this.modalService.show(v0,null,{size:"lg"})}static{this.\u0275fac=function(o){return new(o||n)(e.\u0275\u0275directiveInject(qt.B),e.\u0275\u0275directiveInject(Us.s))}}static{this.\u0275cmp=e.\u0275\u0275defineComponent({type:n,selectors:[["cd-dashboard-help"]],decls:15,vars:6,consts:()=>{let t,o,i,r,p,F;return t=$localize`:␟d12014926d832cd4290d1ec455ee6e7c9abc6a0c␟1358538890185832368:Documentation ${"\ufffd#4\ufffd"}:START_TAG__SVG_SVG:${"\ufffd/#4\ufffd"}:CLOSE_TAG__SVG_SVG:`,o=$localize`:␟40601d802babd92a10b85b1086881f1b6cbd8658␟6256148965555344065:API ${"\ufffd#8\ufffd"}:START_TAG__SVG_SVG:${"\ufffd/#8\ufffd"}:CLOSE_TAG__SVG_SVG:`,i=$localize`:␟004b222ff9ef9dd4771b777950ca1d0e4cd4348a␟1726363342938046830:About`,r=$localize`:␟99d32038c1e53d712f664f91e932073dbe7c6906␟8844725458780481757:Report an issue...`,p=$localize`:␟85b79c9064aed1ead31ace985f31aa1363f6bdaf␟7911416166208830577:Help`,F=$localize`:␟85b79c9064aed1ead31ace985f31aa1363f6bdaf␟7911416166208830577:Help`,[["customTrigger",""],t,o,i,r,F,[3,"customTrigger","flip"],["target","_blank",3,"ngClass","href"],["cdsIcon","launch","size","16",1,"ms-2"],["routerLink","/api-docs","target","_blank",1,"cds--overflow-menu-options__btn"],[3,"click"],["cdsIcon","help","size","20","title",p,"role","button"],[1,"d-md-none"]]},template:function(o,i){if(1&o){const r=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"cds-overflow-menu",6)(1,"li")(2,"a",7),e.\u0275\u0275i18nStart(3,1),e.\u0275\u0275namespaceSVG(),e.\u0275\u0275element(4,"svg",8),e.\u0275\u0275i18nEnd(),e.\u0275\u0275elementEnd()(),e.\u0275\u0275namespaceHTML(),e.\u0275\u0275elementStart(5,"li")(6,"a",9),e.\u0275\u0275i18nStart(7,2),e.\u0275\u0275namespaceSVG(),e.\u0275\u0275element(8,"svg",8),e.\u0275\u0275i18nEnd(),e.\u0275\u0275elementEnd()(),e.\u0275\u0275namespaceHTML(),e.\u0275\u0275elementStart(9,"cds-overflow-menu-option",10),e.\u0275\u0275listener("click",function(){return e.\u0275\u0275restoreView(r),e.\u0275\u0275resetView(i.openAboutModal())}),e.\u0275\u0275i18n(10,3),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(11,"cds-overflow-menu-option",10),e.\u0275\u0275listener("click",function(){return e.\u0275\u0275restoreView(r),e.\u0275\u0275resetView(i.openFeedbackModal())}),e.\u0275\u0275i18n(12,4),e.\u0275\u0275elementEnd()(),e.\u0275\u0275template(13,P0,3,0,"ng-template",null,0,e.\u0275\u0275templateRefExtractor)}if(2&o){const r=e.\u0275\u0275reference(14);e.\u0275\u0275property("customTrigger",r)("flip",!0),e.\u0275\u0275advance(2),e.\u0275\u0275propertyInterpolate("href",i.docsUrl,e.\u0275\u0275sanitizeUrl),e.\u0275\u0275property("ngClass",e.\u0275\u0275pureFunction1(4,O0,!i.docsUrl))}},dependencies:[l.NgClass,m.RouterLink,L.IconDirective,L.OverflowMenu,L.OverflowMenuOption]})}}return n})();function N0(n,c){1&n&&(e.\u0275\u0275elementStart(0,"li",5)(1,"button",8),e.\u0275\u0275i18n(2,2),e.\u0275\u0275elementEnd()())}function I0(n,c){1&n&&(e.\u0275\u0275namespaceSVG(),e.\u0275\u0275element(0,"svg",11))}function A0(n,c){if(1&n&&(e.\u0275\u0275template(0,I0,1,0,"svg",9),e.\u0275\u0275elementStart(1,"span",10),e.\u0275\u0275i18n(2,3),e.\u0275\u0275elementEnd()),2&n){const t=e.\u0275\u0275nextContext();e.\u0275\u0275property("ngIf",t.userPermission.read)}}let D0=(()=>{class n{constructor(t){this.authStorageService=t;const o=this.authStorageService.getPermissions();this.userPermission=o.user,this.configOptPermission=o.configOpt}static{this.\u0275fac=function(o){return new(o||n)(e.\u0275\u0275directiveInject(_.v))}}static{this.\u0275cmp=e.\u0275\u0275defineComponent({type:n,selectors:[["cd-administration"]],decls:7,vars:3,consts:()=>{let t,o,i;return t=$localize`:␟a79aab4ef674bf3f6532292107c0054302236e0f␟8065364602296216021:User management`,o=$localize`:␟197e0246502ca64d0de0df0d5c2deec51d41ff45␟1283731802765869123:Telemetry configuration`,i=$localize`:␟1481ecd21e760ac919a24e26cf790acd82e40199␟3218272724598704604:Dashboard Settings`,[["customTrigger",""],t,o,i,[3,"customTrigger","flip"],[1,"cds--overflow-menu-options__option","mb-2"],["routerLink","/user-management",1,"cds--overflow-menu-options__btn"],["class","cds--overflow-menu-options__option mb-2",4,"ngIf"],["routerLink","/telemetry",1,"cds--overflow-menu-options__btn"],["cdsIcon","settings","size","20","title","user",4,"ngIf"],[1,"d-md-none"],["cdsIcon","settings","size","20","title","user"]]},template:function(o,i){if(1&o&&(e.\u0275\u0275elementStart(0,"cds-overflow-menu",4)(1,"li",5)(2,"button",6),e.\u0275\u0275i18n(3,1),e.\u0275\u0275elementEnd()(),e.\u0275\u0275template(4,N0,3,0,"li",7),e.\u0275\u0275elementEnd(),e.\u0275\u0275template(5,A0,3,1,"ng-template",null,0,e.\u0275\u0275templateRefExtractor)),2&o){const r=e.\u0275\u0275reference(6);e.\u0275\u0275property("customTrigger",r)("flip",!0),e.\u0275\u0275advance(4),e.\u0275\u0275property("ngIf",i.configOptPermission.read)}},dependencies:[l.NgIf,m.RouterLink,De.S,L.IconDirective,L.OverflowMenu]})}}return n})();function y0(n,c){1&n&&(e.\u0275\u0275elementStart(0,"button",13),e.\u0275\u0275i18nStart(1,3),e.\u0275\u0275namespaceSVG(),e.\u0275\u0275element(2,"svg",14),e.\u0275\u0275i18nEnd(),e.\u0275\u0275elementEnd())}function L0(n,c){1&n&&(e.\u0275\u0275namespaceSVG(),e.\u0275\u0275element(0,"svg",15),e.\u0275\u0275namespaceHTML(),e.\u0275\u0275elementStart(1,"span",16),e.\u0275\u0275i18n(2,4),e.\u0275\u0275elementEnd())}let $0=(()=>{class n{constructor(t,o){this.authStorageService=t,this.authService=o,this.icons=g.FI}ngOnInit(){this.username=this.authStorageService.getUsername(),this.sso=this.authStorageService.isSSO()}logout(){this.authService.logout()}static{this.\u0275fac=function(o){return new(o||n)(e.\u0275\u0275directiveInject(_.v),e.\u0275\u0275directiveInject($a.u))}}static{this.\u0275cmp=e.\u0275\u0275defineComponent({type:n,selectors:[["cd-identity"]],decls:12,vars:4,consts:()=>{let t,o,i,r;return t=$localize`:␟58f541a6bc6e06fed76bcc31fd9694151f468eec␟7665199518770852207:${"\ufffd#3\ufffd"}:START_TAG_DIV:Logged in as ${"\ufffd0\ufffd"}:INTERPOLATION: ${"\ufffd/#3\ufffd"}:CLOSE_TAG_DIV:`,o=$localize`:␟1d2c392c770188744c8663327b22d161bde55b4e␟2070470613128717734:${"\ufffd#9\ufffd"}:START_TAG__SVG_SVG:${"\ufffd/#9\ufffd"}:CLOSE_TAG__SVG_SVG:Log out `,i=$localize`:␟945448988a638180c5429d7737d1dc5f2252db81␟5458077113971333026:${"\ufffd#2\ufffd"}:START_TAG__SVG_SVG:${"\ufffd/#2\ufffd"}:CLOSE_TAG__SVG_SVG:Change password `,r=$localize`:␟049dfd9fe6c78914ad58cf89ac6a631fca28ec74␟4885999659884855287:Logged in user`,[["customTrigger",""],t,o,i,r,[3,"customTrigger","flip"],["disabled","true",1,"show","cds--overflow-menu-options__option","cds--overflow-menu-options__option--disabled","my-2"],[1,"cds--overflow-menu-options__btn"],[1,"cds--overflow-menu-options__option","cds--overflow-menu--divider","mb-2"],["routerLink","/user-profile/edit","class","cds--overflow-menu-options__btn",4,"ngIf"],[1,"cds--overflow-menu-options__option","mb-2"],["data-testid","logout",1,"cds--overflow-menu-options__btn",3,"click"],["cdsIcon","logout","size","16",1,"me-2"],["routerLink","/user-profile/edit",1,"cds--overflow-menu-options__btn"],["cdsIcon","locked","size","16",1,"me-2"],["cdsIcon","user--filled","size","20","title","user"],[1,"d-md-none"]]},template:function(o,i){if(1&o){const r=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"cds-overflow-menu",5)(1,"li",6),e.\u0275\u0275i18nStart(2,1),e.\u0275\u0275element(3,"div",7),e.\u0275\u0275i18nEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(4,"li",8),e.\u0275\u0275template(5,y0,3,0,"button",9),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(6,"li",10)(7,"button",11),e.\u0275\u0275listener("click",function(){return e.\u0275\u0275restoreView(r),e.\u0275\u0275resetView(i.logout())}),e.\u0275\u0275i18nStart(8,2),e.\u0275\u0275namespaceSVG(),e.\u0275\u0275element(9,"svg",12),e.\u0275\u0275i18nEnd(),e.\u0275\u0275elementEnd()()(),e.\u0275\u0275template(10,L0,3,0,"ng-template",null,0,e.\u0275\u0275templateRefExtractor)}if(2&o){const r=e.\u0275\u0275reference(11);e.\u0275\u0275property("customTrigger",r)("flip",!0),e.\u0275\u0275advance(3),e.\u0275\u0275i18nExp(i.username),e.\u0275\u0275i18nApply(2),e.\u0275\u0275advance(2),e.\u0275\u0275property("ngIf",!i.sso)}},dependencies:[l.NgIf,m.RouterLink,De.S,L.IconDirective,L.OverflowMenu]})}}return n})();const x0=["sidenavContainer"],U0=["*"],w0=n=>({active:n}),G0=n=>({active:n,"content-theme":!0});function H0(n,c){if(1&n){const t=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementContainerStart(0),e.\u0275\u0275elementStart(1,"cds-header-item",50),e.\u0275\u0275listener("click",function(){const i=e.\u0275\u0275restoreView(t).$implicit,r=e.\u0275\u0275nextContext(2);return e.\u0275\u0275resetView(r.onClusterSelection(i.value))}),e.\u0275\u0275text(2),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementContainerEnd()}if(2&n){const t=c.$implicit;e.\u0275\u0275advance(),e.\u0275\u0275classProp("disabled",1===t.value.cluster_connection_status),e.\u0275\u0275advance(),e.\u0275\u0275textInterpolate3(" ",t.value.name," - ",null==t.value?null:t.value.cluster_alias," - ",null==t.value?null:t.value.user," ")}}function V0(n,c){if(1&n&&(e.\u0275\u0275elementStart(0,"cds-header-navigation",47)(1,"cds-header-menu",48),e.\u0275\u0275template(2,H0,3,5,"ng-container",49),e.\u0275\u0275pipe(3,"keyvalue"),e.\u0275\u0275elementEnd()()),2&n){const t=e.\u0275\u0275nextContext();e.\u0275\u0275advance(),e.\u0275\u0275property("title",t.currentClusterName),e.\u0275\u0275advance(),e.\u0275\u0275property("ngForOf",e.\u0275\u0275pipeBind1(3,3,t.clustersMap))("ngForTrackBy",t.trackByFn)}}function B0(n,c){1&n&&(e.\u0275\u0275elementStart(0,"div",41),e.\u0275\u0275element(1,"cd-administration"),e.\u0275\u0275elementEnd())}function z0(n,c){1&n&&(e.\u0275\u0275elementStart(0,"a",51),e.\u0275\u0275element(1,"img",52),e.\u0275\u0275elementEnd())}function X0(n,c){1&n&&e.\u0275\u0275elementContainer(0)}function k0(n,c){1&n&&(e.\u0275\u0275elementStart(0,"cds-sidenav-menu",64),e.\u0275\u0275namespaceSVG(),e.\u0275\u0275element(1,"svg",65),e.\u0275\u0275namespaceHTML(),e.\u0275\u0275elementStart(2,"cds-sidenav-item",66)(3,"span"),e.\u0275\u0275i18n(4,4),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(5,"cds-sidenav-item",67)(6,"span"),e.\u0275\u0275i18n(7,5),e.\u0275\u0275elementEnd()()()),2&n&&(e.\u0275\u0275advance(2),e.\u0275\u0275property("useRouter",!0),e.\u0275\u0275advance(3),e.\u0275\u0275property("useRouter",!0))}function j0(n,c){1&n&&(e.\u0275\u0275elementStart(0,"cds-sidenav-item",76)(1,"span"),e.\u0275\u0275i18n(2,6),e.\u0275\u0275elementEnd()()),2&n&&e.\u0275\u0275property("useRouter",!0)}function W0(n,c){1&n&&(e.\u0275\u0275elementStart(0,"cds-sidenav-item",77)(1,"span"),e.\u0275\u0275i18n(2,7),e.\u0275\u0275elementEnd()()),2&n&&e.\u0275\u0275property("useRouter",!0)}function K0(n,c){1&n&&(e.\u0275\u0275elementStart(0,"cds-sidenav-item",78)(1,"span"),e.\u0275\u0275i18n(2,8),e.\u0275\u0275elementEnd()()),2&n&&e.\u0275\u0275property("useRouter",!0)}function Q0(n,c){1&n&&(e.\u0275\u0275elementStart(0,"cds-sidenav-item",79)(1,"span"),e.\u0275\u0275i18n(2,9),e.\u0275\u0275elementEnd()()),2&n&&e.\u0275\u0275property("useRouter",!0)}function Y0(n,c){1&n&&(e.\u0275\u0275elementStart(0,"cds-sidenav-item",80)(1,"span"),e.\u0275\u0275i18n(2,10),e.\u0275\u0275elementEnd()()),2&n&&e.\u0275\u0275property("useRouter",!0)}function J0(n,c){1&n&&(e.\u0275\u0275elementStart(0,"cds-sidenav-item",81)(1,"span"),e.\u0275\u0275i18n(2,11),e.\u0275\u0275elementEnd()()),2&n&&e.\u0275\u0275property("useRouter",!0)}function Z0(n,c){if(1&n&&(e.\u0275\u0275elementStart(0,"cds-sidenav-menu",68),e.\u0275\u0275namespaceSVG(),e.\u0275\u0275element(1,"svg",69),e.\u0275\u0275template(2,j0,3,1,"cds-sidenav-item",70)(3,W0,3,1,"cds-sidenav-item",71)(4,K0,3,1,"cds-sidenav-item",72)(5,Q0,3,1,"cds-sidenav-item",73)(6,Y0,3,1,"cds-sidenav-item",74)(7,J0,3,1,"cds-sidenav-item",75),e.\u0275\u0275elementEnd()),2&n){const t=e.\u0275\u0275nextContext(3);e.\u0275\u0275advance(2),e.\u0275\u0275property("ngIf",t.permissions.pool.read),e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf",t.permissions.hosts.read),e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf",t.permissions.osd.read),e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf",t.permissions.hosts.read),e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf",t.permissions.osd.read),e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf",t.permissions.monitor.read)}}function q0(n,c){1&n&&(e.\u0275\u0275elementStart(0,"cds-sidenav-item",88)(1,"span"),e.\u0275\u0275i18n(2,13),e.\u0275\u0275elementEnd()()),2&n&&e.\u0275\u0275property("useRouter",!0)}function e8(n,c){if(1&n&&(e.\u0275\u0275i18nStart(0,14,1),e.\u0275\u0275element(1,"small",92),e.\u0275\u0275i18nEnd()),2&n){const t=e.\u0275\u0275nextContext(5);e.\u0275\u0275advance(),e.\u0275\u0275i18nExp(null==t.summaryData||null==t.summaryData.rbd_mirroring?null:t.summaryData.rbd_mirroring.warnings),e.\u0275\u0275i18nApply(0)}}function t8(n,c){if(1&n&&(e.\u0275\u0275i18nStart(0,14,2),e.\u0275\u0275element(1,"small",93),e.\u0275\u0275i18nEnd()),2&n){const t=e.\u0275\u0275nextContext(5);e.\u0275\u0275advance(),e.\u0275\u0275i18nExp(null==t.summaryData||null==t.summaryData.rbd_mirroring?null:t.summaryData.rbd_mirroring.errors),e.\u0275\u0275i18nApply(0)}}function n8(n,c){if(1&n&&(e.\u0275\u0275elementStart(0,"cds-sidenav-item",89)(1,"span"),e.\u0275\u0275i18nStart(2,14),e.\u0275\u0275template(3,e8,2,1,"small",90)(4,t8,2,1,"small",91),e.\u0275\u0275i18nEnd(),e.\u0275\u0275elementEnd()()),2&n){const t=e.\u0275\u0275nextContext(4);e.\u0275\u0275property("useRouter",!0),e.\u0275\u0275advance(3),e.\u0275\u0275property("ngIf",0!==(null==t.summaryData||null==t.summaryData.rbd_mirroring?null:t.summaryData.rbd_mirroring.warnings)),e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf",0!==(null==t.summaryData||null==t.summaryData.rbd_mirroring?null:t.summaryData.rbd_mirroring.errors))}}function o8(n,c){1&n&&(e.\u0275\u0275elementStart(0,"cds-sidenav-item",94)(1,"span"),e.\u0275\u0275i18n(2,15),e.\u0275\u0275elementEnd()()),2&n&&e.\u0275\u0275property("useRouter",!0)}function i8(n,c){if(1&n&&(e.\u0275\u0275elementStart(0,"cds-sidenav-menu",82),e.\u0275\u0275namespaceSVG(),e.\u0275\u0275element(1,"svg",83),e.\u0275\u0275template(2,q0,3,1,"cds-sidenav-item",84)(3,n8,5,3,"cds-sidenav-item",85)(4,o8,3,1,"cds-sidenav-item",86),e.\u0275\u0275namespaceHTML(),e.\u0275\u0275elementStart(5,"cds-sidenav-item",87)(6,"span"),e.\u0275\u0275i18n(7,12),e.\u0275\u0275elementEnd()()()),2&n){const t=e.\u0275\u0275nextContext().ngIf,o=e.\u0275\u0275nextContext(2);e.\u0275\u0275advance(2),e.\u0275\u0275property("ngIf",o.permissions.rbdImage.read&&t.rbd),e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf",o.permissions.rbdMirroring.read&&t.mirroring),e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf",o.permissions.iscsi.read&&t.iscsi),e.\u0275\u0275advance(),e.\u0275\u0275property("useRouter",!0)}}function a8(n,c){1&n&&(e.\u0275\u0275elementStart(0,"cds-sidenav-item",106)(1,"span"),e.\u0275\u0275i18n(2,24),e.\u0275\u0275elementEnd()()),2&n&&e.\u0275\u0275property("useRouter",!0)}function s8(n,c){if(1&n&&(e.\u0275\u0275elementStart(0,"cds-sidenav-menu",95),e.\u0275\u0275namespaceSVG(),e.\u0275\u0275element(1,"svg",96),e.\u0275\u0275namespaceHTML(),e.\u0275\u0275elementStart(2,"cds-sidenav-item",97)(3,"span"),e.\u0275\u0275i18n(4,16),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(5,"cds-sidenav-item",98)(6,"span"),e.\u0275\u0275i18n(7,17),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(8,"cds-sidenav-item",99)(9,"span"),e.\u0275\u0275i18n(10,18),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(11,"cds-sidenav-item",100)(12,"span"),e.\u0275\u0275i18n(13,19),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(14,"cds-sidenav-item",101)(15,"span"),e.\u0275\u0275i18n(16,20),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(17,"cds-sidenav-item",102)(18,"span"),e.\u0275\u0275i18n(19,21),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(20,"cds-sidenav-item",103)(21,"span"),e.\u0275\u0275i18n(22,22),e.\u0275\u0275elementEnd()(),e.\u0275\u0275template(23,a8,3,1,"cds-sidenav-item",104),e.\u0275\u0275elementStart(24,"cds-sidenav-item",105)(25,"span"),e.\u0275\u0275i18n(26,23),e.\u0275\u0275elementEnd()()()),2&n){const t=e.\u0275\u0275nextContext().ngIf,o=e.\u0275\u0275nextContext(2);e.\u0275\u0275advance(2),e.\u0275\u0275property("useRouter",!0),e.\u0275\u0275advance(3),e.\u0275\u0275property("useRouter",!0),e.\u0275\u0275advance(3),e.\u0275\u0275property("useRouter",!0),e.\u0275\u0275advance(3),e.\u0275\u0275property("useRouter",!0),e.\u0275\u0275advance(3),e.\u0275\u0275property("useRouter",!0),e.\u0275\u0275advance(3),e.\u0275\u0275property("useRouter",!0),e.\u0275\u0275advance(3),e.\u0275\u0275property("useRouter",!0),e.\u0275\u0275advance(3),e.\u0275\u0275property("ngIf",o.permissions.nfs.read&&t.nfs),e.\u0275\u0275advance(),e.\u0275\u0275property("useRouter",!0)}}function r8(n,c){1&n&&(e.\u0275\u0275elementStart(0,"cds-sidenav-item",112)(1,"span"),e.\u0275\u0275i18n(2,25),e.\u0275\u0275elementEnd()()),2&n&&e.\u0275\u0275property("useRouter",!0)}function l8(n,c){1&n&&(e.\u0275\u0275elementStart(0,"cds-sidenav-item",113)(1,"span"),e.\u0275\u0275i18n(2,26),e.\u0275\u0275elementEnd()()),2&n&&e.\u0275\u0275property("useRouter",!0)}function _8(n,c){1&n&&(e.\u0275\u0275elementStart(0,"cds-sidenav-item",114)(1,"span"),e.\u0275\u0275i18n(2,27),e.\u0275\u0275elementEnd()()),2&n&&e.\u0275\u0275property("useRouter",!0)}function c8(n,c){if(1&n&&(e.\u0275\u0275elementStart(0,"cds-sidenav-menu",107),e.\u0275\u0275namespaceSVG(),e.\u0275\u0275element(1,"svg",108),e.\u0275\u0275template(2,r8,3,1,"cds-sidenav-item",109)(3,l8,3,1,"cds-sidenav-item",110)(4,_8,3,1,"cds-sidenav-item",111),e.\u0275\u0275elementEnd()),2&n){const t=e.\u0275\u0275nextContext().ngIf,o=e.\u0275\u0275nextContext(2);e.\u0275\u0275advance(2),e.\u0275\u0275property("ngIf",o.permissions.cephfs.read&&t.cephfs),e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf",o.permissions.nfs.read&&t.nfs),e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf",o.permissions.smb.read)}}function d8(n,c){1&n&&(e.\u0275\u0275elementStart(0,"cds-sidenav-item",119)(1,"span"),e.\u0275\u0275i18n(2,28),e.\u0275\u0275elementEnd()()),2&n&&e.\u0275\u0275property("useRouter",!0)}function u8(n,c){if(1&n&&(e.\u0275\u0275i18nStart(0,29,1),e.\u0275\u0275element(1,"small",123),e.\u0275\u0275i18nEnd()),2&n){const t=e.\u0275\u0275nextContext(5);e.\u0275\u0275advance(),e.\u0275\u0275i18nExp(t.prometheusAlertService.activeCriticalAlerts),e.\u0275\u0275i18nApply(0)}}function p8(n,c){if(1&n&&(e.\u0275\u0275i18nStart(0,29,2),e.\u0275\u0275element(1,"small",124),e.\u0275\u0275i18nEnd()),2&n){const t=e.\u0275\u0275nextContext(5);e.\u0275\u0275advance(),e.\u0275\u0275i18nExp(t.prometheusAlertService.activeWarningAlerts),e.\u0275\u0275i18nApply(0)}}function m8(n,c){if(1&n&&(e.\u0275\u0275elementStart(0,"cds-sidenav-item",120)(1,"span"),e.\u0275\u0275i18nStart(2,29),e.\u0275\u0275elementContainer(3),e.\u0275\u0275template(4,u8,2,1,"small",121)(5,p8,2,1,"small",122),e.\u0275\u0275i18nEnd(),e.\u0275\u0275elementEnd()()),2&n){const t=e.\u0275\u0275nextContext(4);e.\u0275\u0275property("useRouter",!0),e.\u0275\u0275advance(4),e.\u0275\u0275property("ngIf",t.prometheusAlertService.activeCriticalAlerts>0),e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf",t.prometheusAlertService.activeWarningAlerts>0)}}function f8(n,c){if(1&n&&(e.\u0275\u0275elementStart(0,"cds-sidenav-menu",115),e.\u0275\u0275namespaceSVG(),e.\u0275\u0275element(1,"svg",116),e.\u0275\u0275template(2,d8,3,1,"cds-sidenav-item",117)(3,m8,6,3,"cds-sidenav-item",118),e.\u0275\u0275elementEnd()),2&n){const t=e.\u0275\u0275nextContext(3);e.\u0275\u0275advance(2),e.\u0275\u0275property("ngIf",t.permissions.log.read),e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf",t.permissions.prometheus.read)}}function E8(n,c){1&n&&(e.\u0275\u0275elementStart(0,"cds-sidenav-item",132)(1,"span"),e.\u0275\u0275i18n(2,30),e.\u0275\u0275elementEnd()()),2&n&&e.\u0275\u0275property("useRouter",!0)}function g8(n,c){1&n&&(e.\u0275\u0275elementStart(0,"cds-sidenav-item",133)(1,"span"),e.\u0275\u0275i18n(2,31),e.\u0275\u0275elementEnd()()),2&n&&e.\u0275\u0275property("useRouter",!0)}function C8(n,c){1&n&&(e.\u0275\u0275elementStart(0,"cds-sidenav-item",134)(1,"span"),e.\u0275\u0275i18n(2,32),e.\u0275\u0275elementEnd()()),2&n&&e.\u0275\u0275property("useRouter",!0)}function S8(n,c){1&n&&(e.\u0275\u0275elementStart(0,"cds-sidenav-item",135)(1,"span"),e.\u0275\u0275i18n(2,33),e.\u0275\u0275elementEnd()()),2&n&&e.\u0275\u0275property("useRouter",!0)}function h8(n,c){1&n&&(e.\u0275\u0275elementStart(0,"cds-sidenav-item",136)(1,"span"),e.\u0275\u0275i18n(2,34),e.\u0275\u0275elementEnd()()),2&n&&e.\u0275\u0275property("useRouter",!0)}function T8(n,c){if(1&n&&(e.\u0275\u0275elementStart(0,"cds-sidenav-menu",125),e.\u0275\u0275namespaceSVG(),e.\u0275\u0275element(1,"svg",126),e.\u0275\u0275template(2,E8,3,1,"cds-sidenav-item",127)(3,g8,3,1,"cds-sidenav-item",128)(4,C8,3,1,"cds-sidenav-item",129)(5,S8,3,1,"cds-sidenav-item",130)(6,h8,3,1,"cds-sidenav-item",131),e.\u0275\u0275elementEnd()),2&n){const t=e.\u0275\u0275nextContext(3);e.\u0275\u0275advance(2),e.\u0275\u0275property("ngIf",t.permissions.hosts.read),e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf",t.permissions.configOpt.read),e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf",t.permissions.configOpt.read),e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf",t.permissions.configOpt.read),e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf",t.permissions.configOpt.read)}}function F8(n,c){if(1&n){const t=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementContainerStart(0),e.\u0275\u0275elementStart(1,"cds-sidenav",54,2),e.\u0275\u0275listener("click",function(i){e.\u0275\u0275restoreView(t);const r=e.\u0275\u0275nextContext(2);return e.\u0275\u0275resetView(r.onMenuClick(i))}),e.\u0275\u0275elementStart(3,"cds-sidenav-item",55),e.\u0275\u0275namespaceSVG(),e.\u0275\u0275element(4,"svg",56),e.\u0275\u0275namespaceHTML(),e.\u0275\u0275elementStart(5,"span"),e.\u0275\u0275i18n(6,3),e.\u0275\u0275elementEnd()(),e.\u0275\u0275template(7,k0,8,2,"cds-sidenav-menu",57)(8,Z0,8,6,"cds-sidenav-menu",58)(9,i8,8,4,"cds-sidenav-menu",59)(10,s8,27,9,"cds-sidenav-menu",60)(11,c8,5,3,"cds-sidenav-menu",61)(12,f8,4,2,"cds-sidenav-menu",62)(13,T8,7,5,"cds-sidenav-menu",63),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementContainerEnd()}if(2&n){const t=c.ngIf,o=e.\u0275\u0275nextContext(2);e.\u0275\u0275advance(),e.\u0275\u0275property("expanded",o.showMenuSidebar),e.\u0275\u0275advance(2),e.\u0275\u0275property("useRouter",!0),e.\u0275\u0275advance(4),e.\u0275\u0275property("ngIf",o.permissions.configOpt.read),e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf",o.permissions.hosts.read||o.permissions.monitor.read||o.permissions.osd.read||o.permissions.pool.read),e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf",(o.permissions.rbdImage.read||o.permissions.rbdMirroring.read||o.permissions.iscsi.read)&&(t.rbd||t.mirroring||t.iscsi)),e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf",o.permissions.rgw.read&&t.rgw),e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf",o.permissions.nfs.read&&t.nfs||o.permissions.cephfs.read&&t.cephfs||o.permissions.smb.read),e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf",o.permissions.log.read||o.permissions.prometheus.read),e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf",o.permissions.configOpt.read||o.permissions.hosts.read)}}function v8(n,c){if(1&n&&(e.\u0275\u0275template(0,F8,14,9,"ng-container",53),e.\u0275\u0275pipe(1,"async")),2&n){const t=e.\u0275\u0275nextContext();e.\u0275\u0275property("ngIf",e.\u0275\u0275pipeBind1(1,1,t.enabledFeature$))}}let M8=(()=>{class n{constructor(t,o,i,r,p,F,D,x,H){this.notificationService=t,this.authStorageService=o,this.multiClusterService=i,this.router=r,this.summaryService=p,this.featureToggles=F,this.prometheusAlertService=D,this.cookieService=x,this.settingsService=H,this.clusterDetails=[],this.clusterTokenStatus={},this.rightSidebarOpen=!1,this.showMenuSidebar=!0,this.simplebar={autoHide:!1},this.displayedSubMenu={},this.subs=new K.Subscription,this.clustersMap=new Map,this.permissions=this.authStorageService.getPermissions(),this.enabledFeature$=this.featureToggles.get()}ngOnInit(){this.subs.add(this.multiClusterService.subscribe(t=>{const o=t.config;o&&(this.clustersMap.clear(),Object.keys(o).forEach(i=>{o[i].forEach(p=>{this.clustersMap.set(`${p.url}-${p.user}`,p),this.checkClusterConnectionStatus()})}),this.selectedCluster=this.clustersMap.get(`${t.current_url}-${t.current_user}`)||{},this.currentClusterName=`${this.selectedCluster?.name} - ${this.selectedCluster?.cluster_alias} - ${this.selectedCluster?.user}`)})),this.subs.add(this.summaryService.subscribe(t=>{this.summaryData=t})),this.subs.add(this.multiClusterService.subscribeClusterTokenStatus(t=>{this.clusterTokenStatus=t,this.checkClusterConnectionStatus()}))}ngOnDestroy(){this.subs.unsubscribe()}checkClusterConnectionStatus(){this.clustersMap.forEach((t,o)=>{const i=this.clusterTokenStatus[t.name],r=i?i.status:0,p=i?i.user:t.user;this.clustersMap.set(o,{...t,cluster_connection_status:r,user:p}),"local-cluster"===t.cluster_alias&&this.clustersMap.set(o,{...t,cluster_connection_status:0,user:p})})}blockHealthColor(){if(this.summaryData&&this.summaryData.rbd_mirroring){if(this.summaryData.rbd_mirroring.errors>0)return{color:"#f4926c"};if(this.summaryData.rbd_mirroring.warnings>0)return{color:"#f0ad4e"}}}onMenuClick(t){const o=t.target;if(!(o instanceof HTMLElement))return;const i=o.closest("cds-sidenav-menu");if(i){const r=i.getBoundingClientRect();(r.top<0||r.bottom>window.innerHeight)&&i.scrollIntoView({behavior:"smooth",block:"nearest"})}}toggleSubMenu(t){this.displayedSubMenu[t]=!this.displayedSubMenu[t]}toggleRightSidebar(){this.rightSidebarOpen=!this.rightSidebarOpen}onClusterSelection(t){this.multiClusterService.setCluster(t).subscribe(o=>{"local-cluster"===t.cluster_alias?localStorage.setItem("cluster_api_url",""):(localStorage.setItem("current_cluster_name",`${t.name}-${t.user}`),localStorage.setItem("cluster_api_url",t.url)),this.selectedCluster=this.clustersMap.get(`${t.url}-${t.user}`)||{};const i=o.config;i&&"object"==typeof i&&Object.keys(i).forEach(r=>{i[r].forEach(F=>{const D=F.name,H=F.user;D===this.selectedCluster.name&&H===this.selectedCluster.user&&"local-cluster"!==F.cluster_alias&&this.cookieService.setToken(`${D}-${H}`,F.token)})})},()=>{},()=>{this.settingsService.ifSettingConfigured("api/grafana/url",()=>{},()=>{},!0);const o=this.router.url.split("?")[0];this.multiClusterService.refreshMultiCluster(o)})}toggleSidebar(){this.notificationService.toggleSidebar()}trackByFn(t){return t}static{this.\u0275fac=function(o){return new(o||n)(e.\u0275\u0275directiveInject(Y.J),e.\u0275\u0275directiveInject(_.v),e.\u0275\u0275directiveInject(wo.J),e.\u0275\u0275directiveInject(m.Router),e.\u0275\u0275directiveInject(on.E),e.\u0275\u0275directiveInject($o.b),e.\u0275\u0275directiveInject(Eo),e.\u0275\u0275directiveInject(wa),e.\u0275\u0275directiveInject(mo.h))}}static{this.\u0275cmp=e.\u0275\u0275defineComponent({type:n,selectors:[["cd-navigation"]],viewQuery:function(o,i){if(1&o&&e.\u0275\u0275viewQuery(x0,5),2&o){let r;e.\u0275\u0275queryRefresh(r=e.\u0275\u0275loadQuery())&&(i.sidenavContainer=r.first)}},ngContentSelectors:U0,decls:24,vars:11,consts:()=>{let t,o,i,r,p,F,D,x,H,X,Z,re,pe,be,Pe,he,Ue,ve,Xe,_t,ft,we,qe,Rt,Ot,Je,Dt,et,sn,rn,ln,Bt,_n,cn,Qe,In,An,Dn,yn,Ln,Fn,$n,xn,Un,wn,Be,jo,Wo,Ko,Qo,Yo,Fo,vo,Mo,Jo,Zo,qo,Ro,Oo,ei,ao,Po,bo,No,Io,Ao,ti,ni,oi,ii,ai;return t=$localize`:␟f65253954b66e929a8b4d5ecaf61f9129f8cec64␟6570363013146073520:Dashboard`,o=$localize`:␟a1c7fcb176269a1ee593e35046ac8ba625db4216␟6485831342596637679:Multi-Cluster`,i=$localize`:␟f4d1dd59b039ad818d9da7e29a773e10e41d9821␟2944102521023817891:Cluster`,r=$localize`:␟7f5d0c10614e8a34f0e2dad33a0568277c50cf69␟420763834450076269:Block`,p=$localize`:␟a3c95219829b1b12ce2674f49df3a1a195407cfc␟3381412717703555378:Object`,F=$localize`:␟48139a8f408fb79f24e82673e89e23c2ac314f23␟8455204924704616723:File`,D=$localize`:␟84c5b4fda8b090c113677785818523e1e0761699␟503359249737927668:Observability`,x=$localize`:␟b7648e7aced164498aa843b5c4e8f2f1c36a7919␟7844706011418789951:Administration`,H=$localize`:␟d8f19bddce3ad7ddadacf370d2e25da484b75d45␟232162745328253994: Dashboard`,X=$localize`:␟e95ae009d0bdb45fcc656e8b65248cf7396080d5␟2614607010577950577:Overview`,Z=$localize`:␟62efb34e984d84f7428821489b6d287845768dc9␟8805886553284695598:Manage Clusters`,re=$localize`:␟e95ae009d0bdb45fcc656e8b65248cf7396080d5␟2614607010577950577:Overview`,pe=$localize`:␟62efb34e984d84f7428821489b6d287845768dc9␟8805886553284695598:Manage Clusters`,be=$localize`:␟92899fa68e8ca108912163ff58edc8540e453787␟8231861638104479971:Pools`,Pe=$localize`:␟099b441d49333b3c6d30b36dc0a4763e64c78920␟4435206372750903836:Hosts`,he=$localize`:␟1a9183778f2c6473d7ccb080f651caa01faaf70c␟6024104799101504292:OSDs`,Ue=$localize`:␟17137bac47e1e020d139256ded0006a671966e73␟2981276866614410645:Physical Disks`,ve=$localize`:␟e9ce932d4a827ce0320d64128251b35bb0623e18␟8815412682602520629:CRUSH Map`,Xe=$localize`:␟624f596cc3320f5e0a0d7c7346c364e5af9bdd8c␟5808753866335051996:Monitors`,_t=$localize`:␟92899fa68e8ca108912163ff58edc8540e453787␟8231861638104479971:Pools`,ft=$localize`:␟099b441d49333b3c6d30b36dc0a4763e64c78920␟4435206372750903836:Hosts`,we=$localize`:␟1a9183778f2c6473d7ccb080f651caa01faaf70c␟6024104799101504292:OSDs`,qe=$localize`:␟17137bac47e1e020d139256ded0006a671966e73␟2981276866614410645:Physical Disks`,Rt=$localize`:␟e9ce932d4a827ce0320d64128251b35bb0623e18␟8815412682602520629:CRUSH Map`,Ot=$localize`:␟624f596cc3320f5e0a0d7c7346c364e5af9bdd8c␟5808753866335051996:Monitors`,Je=$localize`:␟b73f7f5060fb22a1e9ec462b1bb02493fa3ab866␟414887388288176527:Images`,Dt=$localize`:␟3c2562ba992127203dcfd014010b03cb7b8113c6␟3154623626913350957:Mirroring`,et=$localize`:␟811c241d56601b91ef26735b770e64428089b950␟4207854631702822864:iSCSI`,sn=$localize`:␟1ba9ae4994f6f9b6e6580875a6f8151d60c7c034␟81470534686266676:NVMe/TCP`,rn=$localize`:␟1ba9ae4994f6f9b6e6580875a6f8151d60c7c034␟81470534686266676:NVMe/TCP`,ln=$localize`:␟b73f7f5060fb22a1e9ec462b1bb02493fa3ab866␟414887388288176527:Images`,Bt=$localize`:␟e3b22c8765a5fd03af3c5d6c1e8476d35d6efc04␟7960488158323688099:Mirroring ${"\ufffd*3:1\ufffd\ufffd#1:1\ufffd"}:START_SMALL_TEXT:${"\ufffd0:1\ufffd"}:INTERPOLATION:${"[\ufffd/#1:1\ufffd\ufffd/*3:1\ufffd|\ufffd/#1:2\ufffd\ufffd/*4:2\ufffd]"}:CLOSE_SMALL_TEXT:${"\ufffd*4:2\ufffd\ufffd#1:2\ufffd"}:START_SMALL_TEXT_1:${"\ufffd0:2\ufffd"}:INTERPOLATION_1:${"[\ufffd/#1:1\ufffd\ufffd/*3:1\ufffd|\ufffd/#1:2\ufffd\ufffd/*4:2\ufffd]"}:CLOSE_SMALL_TEXT:`,Bt=e.\u0275\u0275i18nPostprocess(Bt),_n=$localize`:␟811c241d56601b91ef26735b770e64428089b950␟4207854631702822864:iSCSI`,cn=$localize`:␟e95ae009d0bdb45fcc656e8b65248cf7396080d5␟2614607010577950577:Overview`,Qe=$localize`:␟4d13a9cd5ed3dcee0eab22cb25198d43886942be␟4555457172864212828:Users`,In=$localize`:␟9515520496da83179d8b08132f00f575512a1f40␟4310421644728026112:Buckets`,An=$localize`:␟e4d9a764b49b6bebf77ac91f40c9fda401052ce8␟7741102765121622071:Topics`,Dn=$localize`:␟bf402445636acc83bf52682343402e7696df851f␟5985785846683222538:Tiering`,yn=$localize`:␟c146f67148c471f9c8f998a9f9e047fb46780842␟839372701448845895:Multi-site`,Ln=$localize`:␟8a9910cd114c1deb9af74f6f99b4173403965bf2␟5130480165747305341:Gateways`,Fn=$localize`:␟a24eabd99ea5af20f5f94c4484649cd30370042b␟8376409679195641689:NFS`,$n=$localize`:␟4a41f824a35ba01d5bd7be61aa06b3e8145209d0␟3008420115644088420:Configuration`,xn=$localize`:␟e95ae009d0bdb45fcc656e8b65248cf7396080d5␟2614607010577950577:Overview`,Un=$localize`:␟4d13a9cd5ed3dcee0eab22cb25198d43886942be␟4555457172864212828:Users`,wn=$localize`:␟9515520496da83179d8b08132f00f575512a1f40␟4310421644728026112:Buckets`,Be=$localize`:␟e4d9a764b49b6bebf77ac91f40c9fda401052ce8␟7741102765121622071:Topics`,jo=$localize`:␟bf402445636acc83bf52682343402e7696df851f␟5985785846683222538:Tiering`,Wo=$localize`:␟c146f67148c471f9c8f998a9f9e047fb46780842␟839372701448845895:Multi-site`,Ko=$localize`:␟8a9910cd114c1deb9af74f6f99b4173403965bf2␟5130480165747305341:Gateways`,Qo=$localize`:␟4a41f824a35ba01d5bd7be61aa06b3e8145209d0␟3008420115644088420:Configuration`,Yo=$localize`:␟a24eabd99ea5af20f5f94c4484649cd30370042b␟8376409679195641689:NFS`,Fo=$localize`:␟5276fc60d54d667116babb723641b21281d37271␟8522370853206981739:File Systems`,vo=$localize`:␟a24eabd99ea5af20f5f94c4484649cd30370042b␟8376409679195641689:NFS`,Mo=$localize`:␟b6bcb1accc6a67274dec422093a25dd313ffa21e␟2293401351402345061:SMB`,Jo=$localize`:␟5276fc60d54d667116babb723641b21281d37271␟8522370853206981739:File Systems`,Zo=$localize`:␟a24eabd99ea5af20f5f94c4484649cd30370042b␟8376409679195641689:NFS`,qo=$localize`:␟b6bcb1accc6a67274dec422093a25dd313ffa21e␟2293401351402345061:SMB`,Ro=$localize`:␟eb3d5aefff38a814b76da74371cbf02c0789a1ef␟4804785061014590286:Logs`,Oo=$localize`:␟9fe218829514884cdd0ca2300573a4e0428c324f␟8154453727027523235:Alerts`,ei=$localize`:␟eb3d5aefff38a814b76da74371cbf02c0789a1ef␟4804785061014590286:Logs`,ao=$localize`:␟f0c6ac59171dee8a5312c7de7fb09cd1e24887ea␟5654772077742514064:${"\ufffd#3\ufffd"}:START_TAG_NG_CONTAINER:Alerts${"\ufffd/#3\ufffd"}:CLOSE_TAG_NG_CONTAINER:${"\ufffd*4:1\ufffd\ufffd#1:1\ufffd"}:START_SMALL_TEXT:${"\ufffd0:1\ufffd"}:INTERPOLATION:${"[\ufffd/#1:1\ufffd\ufffd/*4:1\ufffd|\ufffd/#1:2\ufffd\ufffd/*5:2\ufffd]"}:CLOSE_SMALL_TEXT:${"\ufffd*5:2\ufffd\ufffd#1:2\ufffd"}:START_SMALL_TEXT_1:${"\ufffd0:2\ufffd"}:INTERPOLATION_1:${"[\ufffd/#1:1\ufffd\ufffd/*4:1\ufffd|\ufffd/#1:2\ufffd\ufffd/*5:2\ufffd]"}:CLOSE_SMALL_TEXT:`,ao=e.\u0275\u0275i18nPostprocess(ao),Po=$localize`:␟419d940613972cc3fae9c8ea0a4306dbf80616e5␟7143579180750436311:Services`,bo=$localize`:␟f147d0f7f965cccee2e77294cba8e1b88021fa08␟2849750161085431718:Upgrade`,No=$localize`:␟1fa0812351addefa245f0960fda26dc3da5be5ea␟5076331095618329654:Ceph Users`,Io=$localize`:␟e7b2bc4b86de6e96d353f6bf2b4d793ea3a19ba0␟4180442944663807003:Manager Modules`,Ao=$localize`:␟4a41f824a35ba01d5bd7be61aa06b3e8145209d0␟3008420115644088420:Configuration`,ti=$localize`:␟419d940613972cc3fae9c8ea0a4306dbf80616e5␟7143579180750436311:Services`,ni=$localize`:␟f147d0f7f965cccee2e77294cba8e1b88021fa08␟2849750161085431718:Upgrade`,oi=$localize`:␟1fa0812351addefa245f0960fda26dc3da5be5ea␟5076331095618329654:Ceph Users`,ii=$localize`:␟e7b2bc4b86de6e96d353f6bf2b4d793ea3a19ba0␟4180442944663807003:Manager Modules`,ai=$localize`:␟4a41f824a35ba01d5bd7be61aa06b3e8145209d0␟3008420115644088420:Configuration`,[["brandTemplate",""],["cd_menu",""],["sidenavContainer",""],H,re,pe,_t,ft,we,qe,Rt,Ot,rn,ln,Bt,_n,xn,Un,wn,Be,jo,Wo,Ko,Qo,Yo,Jo,Zo,qo,ei,ao,ti,ni,oi,ii,ai,[1,"cd-navbar-main"],["name","Ceph Dashboard",1,"cd-navbar-top",3,"brand"],["data-testid","main-menu-toggler",3,"selected","active"],["class","cluster-switcher",4,"ngIf"],[1,"d-flex"],[1,"cds--btn","cds--btn--icon-only","cds--header__action",3,"click"],[1,"cds--btn","cds--btn--icon-only","cds--header__action"],["class","cds--btn cds--btn--icon-only cds--header__action",4,"ngIf"],[1,"wrapper"],["id","sidebar",3,"ngClass"],[4,"ngTemplateOutlet"],["id","content",3,"ngClass"],[1,"cluster-switcher"],["data-testid","selected-cluster",3,"title"],[4,"ngFor","ngForOf","ngForTrackBy"],["data-testid","select-a-cluster",3,"click"],["routerLink","/dashboard",1,"cds--header__name","navbar-brand","ms-3"],["src","assets/Ceph_Ceph_Logo_with_text_white.svg","alt","Ceph"],[4,"ngIf"],[1,"mt-5",3,"click","expanded"],["route","/dashboard","title",t,1,"nav-item","tc_menuitem_dashboard",3,"useRouter"],["cdsIcon","template","icon","","size","20"],["title",o,4,"ngIf"],["title",i,"class","tc_menuitem_cluster",4,"ngIf"],["title",r,"class","tc_menuitem_block",4,"ngIf"],["title",p,"class","nav-item tc_menuitem_rgw",4,"ngIf"],["title",F,"class","tc_menuitem_file",4,"ngIf"],["title",D,"class","tc_menuitem_observe",4,"ngIf"],["title",x,"class","tc_menuitem_admin",4,"ngIf"],["title",o],["cdsIcon","edge-cluster","icon","","size","20"],["route","/multi-cluster/overview","title",X,1,"tc_submenuitem","tc_submenuitem_multiCluster_overview",3,"useRouter"],["route","/multi-cluster/manage-clusters","title",Z,1,"tc_submenuitem","tc_submenuitem_multiCluster_manage_clusters",3,"useRouter"],["title",i,1,"tc_menuitem_cluster"],["cdsIcon","web-services--cluster","icon","","size","20"],["route","/pool","title",be,"class","tc_submenuitem tc_submenuitem_cluster_pool",3,"useRouter",4,"ngIf"],["route","/hosts","title",Pe,"class","tc_submenuitem tc_submenuitem_cluster_hosts",3,"useRouter",4,"ngIf"],["route","/osd","title",he,"class","tc_submenuitem tc_submenuitem_cluster_osds",3,"useRouter",4,"ngIf"],["route","/inventory","title",Ue,"class","tc_submenuitem tc_submenuitem_cluster_inventory",3,"useRouter",4,"ngIf"],["route","/crush-map","title",ve,"class","tc_submenuitem tc_submenuitem_cluster_crush",3,"useRouter",4,"ngIf"],["route","/monitor","title",Xe,"class","tc_submenuitem tc_submenuitem_cluster_monitor",3,"useRouter",4,"ngIf"],["route","/pool","title",be,1,"tc_submenuitem","tc_submenuitem_cluster_pool",3,"useRouter"],["route","/hosts","title",Pe,1,"tc_submenuitem","tc_submenuitem_cluster_hosts",3,"useRouter"],["route","/osd","title",he,1,"tc_submenuitem","tc_submenuitem_cluster_osds",3,"useRouter"],["route","/inventory","title",Ue,1,"tc_submenuitem","tc_submenuitem_cluster_inventory",3,"useRouter"],["route","/crush-map","title",ve,1,"tc_submenuitem","tc_submenuitem_cluster_crush",3,"useRouter"],["route","/monitor","title",Xe,1,"tc_submenuitem","tc_submenuitem_cluster_monitor",3,"useRouter"],["title",r,1,"tc_menuitem_block"],["cdsIcon","datastore","icon","","size","20"],["route","/block/rbd","title",Je,"class","tc_submenuitem tc_submenuitem_block_images",3,"useRouter",4,"ngIf"],["route","/block/mirroring","title",Dt,"class","tc_submenuitem tc_submenuitem_block_mirroring",3,"useRouter",4,"ngIf"],["route","/block/iscsi","title",et,"class","tc_submenuitem tc_submenuitem_block_iscsi",3,"useRouter",4,"ngIf"],["route","/block/nvmeof","title",sn,1,"tc_submenuitem","tc_submenuitem_block_nvme",3,"useRouter"],["route","/block/rbd","title",Je,1,"tc_submenuitem","tc_submenuitem_block_images",3,"useRouter"],["route","/block/mirroring","title",Dt,1,"tc_submenuitem","tc_submenuitem_block_mirroring",3,"useRouter"],["class","badge badge-warning",4,"ngIf"],["class","badge badge-danger",4,"ngIf"],[1,"badge","badge-warning"],[1,"badge","badge-danger"],["route","/block/iscsi","title",et,1,"tc_submenuitem","tc_submenuitem_block_iscsi",3,"useRouter"],["title",p,1,"nav-item","tc_menuitem_rgw"],["cdsIcon","object-storage","icon","","size","20"],["route","/rgw/overview","title",cn,1,"tc_submenuitem","tc_submenuitem_rgw_overview",3,"useRouter"],["route","/rgw/user","title",Qe,1,"tc_submenuitem","tc_submenuitem_rgw_users",3,"useRouter"],["route","/rgw/bucket","title",In,1,"tc_submenuitem","tc_submenuitem_rgw_buckets",3,"useRouter"],["route","/rgw/topic","title",An,1,"tc_submenuitem","tc_submenuitem_rgw_topics",3,"useRouter"],["route","/rgw/tiering","title",Dn,1,"tc_submenuitem","tc_submenuitem_rgw_tiering",3,"useRouter"],["route","/rgw/multisite","title",yn,1,"tc_submenuitem","tc_submenuitem_rgw_multi-site",3,"useRouter"],["route","/rgw/daemon","title",Ln,1,"tc_submenuitem","tc_submenuitem_rgw_daemons",3,"useRouter"],["route","/rgw/nfs","title",Fn,"class","tc_submenuitem tc_submenuitem_rgw_nfs",3,"useRouter",4,"ngIf"],["route","/rgw/configuration","title",$n,1,"tc_submenuitem","tc_submenuitem_rgw_configuration",3,"useRouter"],["route","/rgw/nfs","title",Fn,1,"tc_submenuitem","tc_submenuitem_rgw_nfs",3,"useRouter"],["title",F,1,"tc_menuitem_file"],["cdsIcon","file-storage","icon","","size","20"],["route","/cephfs/fs","title",Fo,"class","tc_submenuitem tc_submenuitem_file_cephfs",3,"useRouter",4,"ngIf"],["route","/cephfs/nfs","title",vo,"class","tc_submenuitem tc_submenuitem_file_nfs",3,"useRouter",4,"ngIf"],["route","/cephfs/smb","title",Mo,"class","tc_submenuitem tc_submenuitem_file_smb",3,"useRouter",4,"ngIf"],["route","/cephfs/fs","title",Fo,1,"tc_submenuitem","tc_submenuitem_file_cephfs",3,"useRouter"],["route","/cephfs/nfs","title",vo,1,"tc_submenuitem","tc_submenuitem_file_nfs",3,"useRouter"],["route","/cephfs/smb","title",Mo,1,"tc_submenuitem","tc_submenuitem_file_smb",3,"useRouter"],["title",D,1,"tc_menuitem_observe"],["cdsIcon","observed--hail","icon","","size","20"],["route","/logs","title",Ro,"class","tc_submenuitem tc_submenuitem_observe_log",3,"useRouter",4,"ngIf"],["route","/monitoring","title",Oo,"class","tc_submenuitem tc_submenuitem_observe_monitoring",3,"useRouter",4,"ngIf"],["route","/logs","title",Ro,1,"tc_submenuitem","tc_submenuitem_observe_log",3,"useRouter"],["route","/monitoring","title",Oo,1,"tc_submenuitem","tc_submenuitem_observe_monitoring",3,"useRouter"],["class","badge badge-danger ms-1",4,"ngIf"],["class","badge badge-warning ms-1",4,"ngIf"],[1,"badge","badge-danger","ms-1"],[1,"badge","badge-warning","ms-1"],["title",x,1,"tc_menuitem_admin"],["cdsIcon","network--admin-control","icon","","size","20"],["route","/services/","title",Po,"class","tc_submenuitem tc_submenuitem_admin_services",3,"useRouter",4,"ngIf"],["route","/upgrade","title",bo,"class","tc_submenuitem tc_submenuitem_admin_upgrade",3,"useRouter",4,"ngIf"],["route","/ceph-users","title",No,"class","tc_submenuitem tc_submenuitem_admin_users",3,"useRouter",4,"ngIf"],["route","/mgr-modules","title",Io,"class","tc_submenuitem tc_submenuitem_admin_modules",3,"useRouter",4,"ngIf"],["route","/configuration","title",Ao,"class","tc_submenuitem tc_submenuitem_admin_configuration",3,"useRouter",4,"ngIf"],["route","/services/","title",Po,1,"tc_submenuitem","tc_submenuitem_admin_services",3,"useRouter"],["route","/upgrade","title",bo,1,"tc_submenuitem","tc_submenuitem_admin_upgrade",3,"useRouter"],["route","/ceph-users","title",No,1,"tc_submenuitem","tc_submenuitem_admin_users",3,"useRouter"],["route","/mgr-modules","title",Io,1,"tc_submenuitem","tc_submenuitem_admin_modules",3,"useRouter"],["route","/configuration","title",Ao,1,"tc_submenuitem","tc_submenuitem_admin_configuration",3,"useRouter"]]},template:function(o,i){if(1&o){const r=e.\u0275\u0275getCurrentView();e.\u0275\u0275projectionDef(),e.\u0275\u0275elementStart(0,"div",35),e.\u0275\u0275element(1,"cd-notifications-sidebar"),e.\u0275\u0275elementStart(2,"cds-header",36)(3,"cds-hamburger",37),e.\u0275\u0275listener("selected",function(){return e.\u0275\u0275restoreView(r),e.\u0275\u0275resetView(i.showMenuSidebar=!i.showMenuSidebar)}),e.\u0275\u0275elementEnd(),e.\u0275\u0275template(4,V0,4,5,"cds-header-navigation",38),e.\u0275\u0275elementStart(5,"cds-header-global")(6,"cds-header-navigation"),e.\u0275\u0275element(7,"cd-language-selector",39),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(8,"div",40),e.\u0275\u0275listener("click",function(){return e.\u0275\u0275restoreView(r),e.\u0275\u0275resetView(i.toggleSidebar())}),e.\u0275\u0275element(9,"cd-notifications"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(10,"div",41),e.\u0275\u0275element(11,"cd-dashboard-help"),e.\u0275\u0275elementEnd(),e.\u0275\u0275template(12,B0,2,0,"div",42),e.\u0275\u0275elementStart(13,"div",41),e.\u0275\u0275element(14,"cd-identity"),e.\u0275\u0275elementEnd()()(),e.\u0275\u0275template(15,z0,2,0,"ng-template",null,0,e.\u0275\u0275templateRefExtractor),e.\u0275\u0275elementStart(17,"div",43)(18,"nav",44),e.\u0275\u0275template(19,X0,1,0,"ng-container",45),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(20,"div",46),e.\u0275\u0275projection(21),e.\u0275\u0275elementEnd()(),e.\u0275\u0275template(22,v8,2,3,"ng-template",null,1,e.\u0275\u0275templateRefExtractor),e.\u0275\u0275elementEnd()}if(2&o){const r=e.\u0275\u0275reference(16),p=e.\u0275\u0275reference(23);e.\u0275\u0275advance(2),e.\u0275\u0275property("brand",r),e.\u0275\u0275advance(),e.\u0275\u0275property("active",i.showMenuSidebar),e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf",(null==i.clustersMap?null:i.clustersMap.size)>1),e.\u0275\u0275advance(8),e.\u0275\u0275property("ngIf",i.permissions.user.read),e.\u0275\u0275advance(6),e.\u0275\u0275property("ngClass",e.\u0275\u0275pureFunction1(7,w0,!i.showMenuSidebar)),e.\u0275\u0275advance(),e.\u0275\u0275property("ngTemplateOutlet",p),e.\u0275\u0275advance(),e.\u0275\u0275property("ngClass",e.\u0275\u0275pureFunction1(9,G0,!i.showMenuSidebar))}},dependencies:[l.NgClass,l.NgForOf,l.NgIf,l.NgTemplateOutlet,m.RouterLink,l0,Gs,L.Header,L.HeaderItem,L.HeaderMenu,L.HeaderNavigation,L.HeaderGlobal,L.Hamburger,L.SideNav,L.SideNavItem,L.SideNavMenu,L.IconDirective,d0,b0,D0,$0,l.AsyncPipe,l.KeyValuePipe],styles:[".cd-navbar-main[_ngcontent-%COMP%]{height:100%;overflow:hidden}.navbar-brand[_ngcontent-%COMP%], .navbar-brand[_ngcontent-%COMP%]:hover{color:#e9ecef;height:auto;padding:0}.navbar-brand[_ngcontent-%COMP%] > img[_ngcontent-%COMP%]{height:25px}cds-header-item[_ngcontent-%COMP%]{width:500px}.cluster-switcher[_ngcontent-%COMP%]{margin-left:6rem}  .cds--header__menu-title[aria-expanded=true]+.cds--header__menu{max-height:300px;overflow-x:hidden;overflow-y:auto;width:auto}  cd-navigation .cd-navbar-top .cd-navbar-brand{background:#374249;border-top:4px solid #25828e}  cd-navigation .cd-navbar-top .cd-navbar-brand .navbar-brand,   cd-navigation .cd-navbar-top .cd-navbar-brand .navbar-brand:hover{color:#e9ecef;height:auto;padding:0}  cd-navigation .cd-navbar-top .cd-navbar-brand .navbar-brand>img{height:25px}  cd-navigation .cd-navbar-top .cd-navbar-brand .navbar-toggler{border:0}  cd-navigation .cd-navbar-top .cd-navbar-brand .navbar-toggler:focus,   cd-navigation .cd-navbar-top .cd-navbar-brand .navbar-toggler:hover{outline:0}  cd-navigation .cd-navbar-top .cd-navbar-brand .navbar-toggler .fa-navicon{color:#e9ecef}  cd-navigation .cd-navbar-top .cd-navbar-brand .navbar-collapse{padding:0}  cd-navigation .cd-navbar-top .cd-navbar-brand .cd-navbar-utility>.active>a{background-color:#25828e;color:#e9ecef}  cd-navigation .cd-navbar-top .cd-navbar-brand .cd-navbar-utility>li>.open>a,   cd-navigation .cd-navbar-top .cd-navbar-brand .cd-navbar-utility>li>.open>a:focus,   cd-navigation .cd-navbar-top .cd-navbar-brand .cd-navbar-utility>li>.open>a:hover{background-color:transparent;border-color:transparent;color:#e9ecef}  cd-navigation .cd-navbar-top .navbar-nav>li>.cd-navbar>[ngbDropdown]>a,   cd-navigation .cd-navbar-top .navbar-nav>li>.cd-navbar>a,   cd-navigation .cd-navbar-top .navbar-nav>li>a{color:#e9ecef;display:block;line-height:1;padding:13.5px 18px!important;position:relative;text-decoration:none}  cd-navigation .cd-navbar-top .navbar-nav .nav-link,   cd-navigation .cd-navbar-top .navbar-nav .nav-link:hover{color:#e9ecef}  cd-navigation .cd-navbar-top .navbar-nav>li>.cd-navbar>[ngbDropdown]>a:hover,   cd-navigation .cd-navbar-top .navbar-nav>li>.cd-navbar>[ngbDropdown].open>a,   cd-navigation .cd-navbar-top .navbar-nav>li>.cd-navbar>a:hover,   cd-navigation .cd-navbar-top .navbar-nav>li>a:hover,   cd-navigation .cd-navbar-top .navbar-nav>li:hover{background-color:#25828e}  cd-navigation .cd-navbar-top .navbar-nav>.open>.cd-navbar>[ngbDropdown]>a,   cd-navigation .cd-navbar-top .navbar-nav>.open>.cd-navbar>[ngbDropdown]>a:hover,   cd-navigation .cd-navbar-top .navbar-nav>.open>.cd-navbar>a,   cd-navigation .cd-navbar-top .navbar-nav>.open>.cd-navbar>a:focus,   cd-navigation .cd-navbar-top .navbar-nav>.open>.cd-navbar>a:hover,   cd-navigation .cd-navbar-top .navbar-nav>.open>.cd-navbar>li>a:focus,   cd-navigation .cd-navbar-top .navbar-nav>.open>a,   cd-navigation .cd-navbar-top .navbar-nav>.open>a:focus,   cd-navigation .cd-navbar-top .navbar-nav>.open>a:hover{background-color:transparent;border-color:transparent;color:#e9ecef}  cd-navigation .cd-navbar-top .no-hover:hover{background-color:#374249!important}@media (min-width: 768px){  cd-navigation .cd-navbar-top .cd-navbar-utility{border-bottom:0;font-size:1.1rem;position:absolute;right:0;top:0}}@media (max-width: 767px){  cd-navigation .cd-navbar-top .navbar-nav{margin:0}  cd-navigation .cd-navbar-top .navbar-nav .fa{margin-right:.5em}  cd-navigation .cd-navbar-top .navbar-nav .open .dropdown-menu{background-color:#25828e;border:0;padding-bottom:0;padding-top:0}  cd-navigation .cd-navbar-top .navbar-nav .open .dropdown-menu>li>a{color:#e9ecef;padding:5px 15px 5px 35px}  cd-navigation .cd-navbar-top .navbar-nav .open .dropdown-menu>.active>a{background-color:#25828e}  cd-navigation .cd-navbar-top .navbar-nav>li>a:hover{background-color:#25828e}}  cd-navigation .cd-navbar-top .cd-context-bar{background-color:#fff;color:#374249;cursor:pointer}  cd-navigation .cd-navbar-top .dropdown-text{font-size:small;font-weight:600}.wrapper[_ngcontent-%COMP%]{display:flex;height:100%;width:100%}.wrapper[_ngcontent-%COMP%]   #sidebar[_ngcontent-%COMP%]{bottom:0;height:auto;left:0;overflow-y:auto;position:relative;transition:all .3s;width:16rem;z-index:999}.wrapper[_ngcontent-%COMP%]   #sidebar.active[_ngcontent-%COMP%]{margin-left:-16rem}#content[_ngcontent-%COMP%]{bottom:0;position:relative;right:0;transition:all .3s;width:calc(100% - 16rem)}#content.active[_ngcontent-%COMP%]{width:100vw}"]})}}return n})();class Qi{resolve(c){const t=c.routeConfig.data,o=null===t.path?null:this.getFullPath(c);return(0,K.of)([{text:"string"==typeof t.breadcrumbs?t.breadcrumbs:t.breadcrumbs.text||t.text||o,path:o,disableSplit:t.disableSplit||!1}])}getFullPath(c){return c.pathFromRoot.reduce((r,p)=>r+p.url.reduce((r,p)=>r+"/"+p.path,""),"")}}function R8(n,c){if(1&n&&(e.\u0275\u0275elementStart(0,"cds-breadcrumb-item",5),e.\u0275\u0275text(1),e.\u0275\u0275elementEnd()),2&n){const t=e.\u0275\u0275nextContext().$implicit;e.\u0275\u0275propertyInterpolate1("href","#/",t.path,""),e.\u0275\u0275advance(),e.\u0275\u0275textInterpolate1(" ",t.text," ")}}function O8(n,c){if(1&n&&(e.\u0275\u0275elementStart(0,"cds-breadcrumb-item",6),e.\u0275\u0275text(1),e.\u0275\u0275elementEnd()),2&n){const t=e.\u0275\u0275nextContext().$implicit;e.\u0275\u0275advance(),e.\u0275\u0275textInterpolate1(" ",t.text," ")}}function P8(n,c){if(1&n&&(e.\u0275\u0275elementContainerStart(0),e.\u0275\u0275template(1,R8,2,3,"cds-breadcrumb-item",3)(2,O8,2,1,"cds-breadcrumb-item",4),e.\u0275\u0275elementContainerEnd()),2&n){const t=c.$implicit,o=c.last;e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf",!o&&null!==t.path),e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf",o||null===t.path)}}function b8(n,c){if(1&n&&(e.\u0275\u0275elementStart(0,"cds-breadcrumb",1),e.\u0275\u0275template(1,P8,3,2,"ng-container",2),e.\u0275\u0275elementEnd()),2&n){const t=e.\u0275\u0275nextContext();e.\u0275\u0275property("noTrailingSlash",!0),e.\u0275\u0275advance(),e.\u0275\u0275property("ngForOf",t.crumbs)}}let N8=(()=>{class n{constructor(t,o,i){this.router=t,this.injector=o,this.titleService=i,this.crumbs=[],this.finished=!1,this.defaultResolver=new Qi,this.subscription=this.router.events.pipe((0,u.filter)(r=>r instanceof m.NavigationStart)).subscribe(()=>{this.finished=!1}),this.subscription=this.router.events.pipe((0,u.filter)(r=>r instanceof m.NavigationEnd)).subscribe(()=>{this._resolveCrumbs(t.routerState.snapshot.root).pipe((0,u.mergeMap)(p=>p),(0,u.distinct)(p=>p.text),(0,u.toArray)(),(0,u.mergeMap)(p=>{const F=this.postProcess(p);return this.wrapIntoObservable(F).pipe((0,u.first)())})).subscribe(p=>{this.finished=!0,this.crumbs=p;const F=this.getTitleFromCrumbs(this.crumbs);this.titleService.setTitle(F)})})}ngOnDestroy(){this.subscription.unsubscribe()}_resolveCrumbs(t){let o;const i=t.routeConfig&&t.routeConfig.data;if(i&&i.breadcrumbs){let r;r=i.breadcrumbs.prototype instanceof Qi?this.injector.get(i.breadcrumbs):this.defaultResolver;const p=r.resolve(t);o=this.wrapIntoObservable(p).pipe((0,u.first)())}else o=(0,K.of)([]);return t.firstChild&&(o=(0,K.concat)(o,this._resolveCrumbs(t.firstChild))),o}postProcess(t){const o=[];return t.forEach(i=>{const r=i.text.split("/");if(!i.disableSplit&&r.length>1){i.text=r[r.length-1];for(let p=0;p<r.length-1;p++)o.push({text:r[p],path:null})}o.push(i)}),o}isPromise(t){return t&&"function"==typeof t.then}wrapIntoObservable(t){return t instanceof K.Observable?t:this.isPromise(t)?(0,K.from)(Promise.resolve(t)):(0,K.of)(t)}getTitleFromCrumbs(t){const o=t.map(i=>i.text||"").join(" > ");return o.length>0?`${f.D5.projectName}: ${o}`:f.D5.projectName}static{this.\u0275fac=function(o){return new(o||n)(e.\u0275\u0275directiveInject(m.Router),e.\u0275\u0275directiveInject(e.Injector),e.\u0275\u0275directiveInject(a.Title))}}static{this.\u0275cmp=e.\u0275\u0275defineComponent({type:n,selectors:[["cd-breadcrumbs"]],decls:1,vars:1,consts:[[3,"noTrailingSlash",4,"ngIf"],[3,"noTrailingSlash"],[4,"ngFor","ngForOf"],[3,"href",4,"ngIf"],["data-testid","active-breadcrumb-item",4,"ngIf"],[3,"href"],["data-testid","active-breadcrumb-item"]],template:function(o,i){1&o&&e.\u0275\u0275template(0,b8,2,2,"cds-breadcrumb",0),2&o&&e.\u0275\u0275property("ngIf",i.crumbs.length)},dependencies:[l.NgForOf,l.NgIf,L.Breadcrumb,L.BreadcrumbItemComponent]})}}return n})();var I8=s(65784);function A8(n,c){1&n&&(e.\u0275\u0275elementStart(0,"div"),e.\u0275\u0275i18nStart(1,0),e.\u0275\u0275element(2,"strong")(3,"a",5),e.\u0275\u0275i18nEnd(),e.\u0275\u0275elementEnd())}function D8(n,c){if(1&n&&(e.\u0275\u0275elementStart(0,"div"),e.\u0275\u0275i18nStart(1,1),e.\u0275\u0275element(2,"strong")(3,"a",5),e.\u0275\u0275i18nEnd(),e.\u0275\u0275elementEnd()),2&n){const t=e.\u0275\u0275nextContext(2);e.\u0275\u0275advance(3),e.\u0275\u0275i18nExp(t.expirationDays),e.\u0275\u0275i18nApply(1)}}function y8(n,c){if(1&n){const t=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"cd-alert-panel",3),e.\u0275\u0275listener("dismissed",function(){e.\u0275\u0275restoreView(t);const i=e.\u0275\u0275nextContext();return e.\u0275\u0275resetView(i.onDismissed())}),e.\u0275\u0275template(1,A8,4,0,"div",4)(2,D8,4,1,"div",4),e.\u0275\u0275elementEnd()}if(2&n){const t=e.\u0275\u0275nextContext();e.\u0275\u0275property("type",t.alertType)("showTitle",!1)("dismissible","danger"!==t.alertType),e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf",0===t.expirationDays),e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf",t.expirationDays>0)}}let L8=(()=>{class n{constructor(t,o){this.settingsService=t,this.authStorageService=o,this.displayNotification=!1}ngOnInit(){this.settingsService.getStandardSettings().subscribe(t=>{this.pwdExpirationSettings=new I8.b(t);const o=this.authStorageService.getPwdExpirationDate();o&&(this.expirationDays=this.getExpirationDays(o),this.alertType=this.expirationDays<=this.pwdExpirationSettings.pwdExpirationWarning2?"danger":"warning",this.displayNotification=this.expirationDays<=this.pwdExpirationSettings.pwdExpirationWarning1,this.authStorageService.isPwdDisplayedSource.next(this.displayNotification))})}ngOnDestroy(){this.authStorageService.isPwdDisplayedSource.next(!1)}getExpirationDays(t){const o=new Date,i=new Date(1e3*t);return Math.floor((i.valueOf()-o.valueOf())/864e5)}onDismissed(){this.authStorageService.isPwdDisplayedSource.next(!1),this.displayNotification=!1}static{this.\u0275fac=function(o){return new(o||n)(e.\u0275\u0275directiveInject(mo.h),e.\u0275\u0275directiveInject(_.v))}}static{this.\u0275cmp=e.\u0275\u0275defineComponent({type:n,selectors:[["cd-pwd-expiration-notification"]],decls:1,vars:1,consts:()=>{let t,o;return t=$localize`:␟20b3d45b0c08a2951a9974fa20505e4de95250c9␟472267744094945158:Your password will expire in ${"\ufffd#2\ufffd"}:START_TAG_STRONG:less than 1${"\ufffd/#2\ufffd"}:CLOSE_TAG_STRONG: day. Click ${"\ufffd#3\ufffd"}:START_LINK:here${"\ufffd/#3\ufffd"}:CLOSE_LINK: to change it now.`,o=$localize`:␟c2f34088c155e40ffb23770a465a65868ce772b2␟8522753988196412773:Your password will expire in ${"\ufffd#2\ufffd"}:START_TAG_STRONG:${"\ufffd0\ufffd"}:INTERPOLATION:${"\ufffd/#2\ufffd"}:CLOSE_TAG_STRONG: day(s). Click ${"\ufffd#3\ufffd"}:START_LINK:here${"\ufffd/#3\ufffd"}:CLOSE_LINK: to change it now.`,[t,o,["class","no-margin-bottom","size","slim",3,"type","showTitle","dismissible","dismissed",4,"ngIf"],["size","slim",1,"no-margin-bottom",3,"dismissed","type","showTitle","dismissible"],[4,"ngIf"],["routerLink","/user-profile/edit",1,"alert-link"]]},template:function(o,i){1&o&&e.\u0275\u0275template(0,y8,3,5,"cd-alert-panel",2),2&o&&e.\u0275\u0275property("ngIf",i.displayNotification)},dependencies:[l.NgIf,m.RouterLink,it.m],styles:[".no-margin-bottom[_ngcontent-%COMP%]{margin-bottom:0}"]})}}return n})();function $8(n,c){if(1&n){const t=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"cd-alert-panel",2),e.\u0275\u0275listener("dismissed",function(){e.\u0275\u0275restoreView(t);const i=e.\u0275\u0275nextContext();return e.\u0275\u0275resetView(i.onDismissed())}),e.\u0275\u0275elementStart(1,"div"),e.\u0275\u0275i18nStart(2,0),e.\u0275\u0275element(3,"a",3)(4,"a",4),e.\u0275\u0275i18nEnd(),e.\u0275\u0275elementEnd()()}if(2&n){const t=e.\u0275\u0275nextContext();e.\u0275\u0275property("showTitle",!1)("type",t.notificationSeverity)("dismissible","danger"!==t.notificationSeverity)}}let x8=(()=>{class n{constructor(t,o,i,r){this.mgrModuleService=t,this.authStorageService=o,this.notificationService=i,this.telemetryNotificationService=r,this.displayNotification=!1,this.notificationSeverity="warning"}ngOnInit(){if(this.telemetryNotificationService.update.subscribe(t=>{this.displayNotification=t}),!this.isNotificationHidden()){const t=this.authStorageService.getPermissions().configOpt;E().every(Object.values(t))&&this.mgrModuleService.getConfig("telemetry").subscribe(o=>{o.enabled||this.telemetryNotificationService.setVisibility(!0)})}}ngOnDestroy(){this.telemetryNotificationService.setVisibility(!1)}isNotificationHidden(){return"true"===localStorage.getItem("telemetry_notification_hidden")}onDismissed(){this.telemetryNotificationService.setVisibility(!1),localStorage.setItem("telemetry_notification_hidden","true"),this.notificationService.show(Le._.success,$localize`Telemetry activation reminder muted`,$localize`You can activate the module on the Telemetry configuration \
page (<b>Dashboard Settings</b> -> <b>Telemetry configuration</b>) at any time.`)}static{this.\u0275fac=function(o){return new(o||n)(e.\u0275\u0275directiveInject(Nn.a),e.\u0275\u0275directiveInject(_.v),e.\u0275\u0275directiveInject(Y.J),e.\u0275\u0275directiveInject(Na))}}static{this.\u0275cmp=e.\u0275\u0275defineComponent({type:n,selectors:[["cd-telemetry-notification"]],decls:1,vars:1,consts:()=>{let t;return t=$localize`:␟e6702323d3760e3db0e2e785d567469d18beb120␟7766337847372882412:The Ceph community needs your help to continue improving: please ${"\ufffd#3\ufffd"}:START_LINK:Activate${"[\ufffd/#3\ufffd|\ufffd/#4\ufffd]"}:CLOSE_LINK: the ${"\ufffd#4\ufffd"}:START_LINK_1:Telemetry${"[\ufffd/#3\ufffd|\ufffd/#4\ufffd]"}:CLOSE_LINK: module.`,t=e.\u0275\u0275i18nPostprocess(t),[t,["class","no-margin-bottom","size","slim",3,"showTitle","type","dismissible","dismissed",4,"ngIf"],["size","slim",1,"no-margin-bottom",3,"dismissed","showTitle","type","dismissible"],["routerLink","/telemetry",1,"btn","activate-button","alert-link","activate-text"],["href","https://docs.ceph.com/en/latest/mgr/telemetry/"]]},template:function(o,i){1&o&&e.\u0275\u0275template(0,$8,5,3,"cd-alert-panel",1),2&o&&e.\u0275\u0275property("ngIf",i.displayNotification)},dependencies:[l.NgIf,m.RouterLink,it.m],styles:[".no-margin-bottom[_ngcontent-%COMP%]{font-size:.875rem;margin-bottom:0}.activate-button[_ngcontent-%COMP%]{background-color:#fcecba;border:#495057 solid .5px;border-radius:10%;padding:.1rem .4rem}.activate-text[_ngcontent-%COMP%]{color:#495057;font-weight:700}a[_ngcontent-%COMP%]{color:#1a5d66;font-weight:700}"]})}}return n})();var U8=s(56921);function w8(n,c){if(1&n){const t=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"cd-alert-panel",1),e.\u0275\u0275listener("dismissed",function(){e.\u0275\u0275restoreView(t);const i=e.\u0275\u0275nextContext();return e.\u0275\u0275resetView(i.onDismissed())}),e.\u0275\u0275element(1,"span",2),e.\u0275\u0275pipe(2,"sanitizeHtml"),e.\u0275\u0275elementEnd()}if(2&n){const t=e.\u0275\u0275nextContext();e.\u0275\u0275property("showTitle",!1)("type",t.motd.severity)("dismissible","danger"!==t.motd.severity),e.\u0275\u0275advance(),e.\u0275\u0275property("innerHTML",e.\u0275\u0275pipeBind1(2,4,t.motd.message),e.\u0275\u0275sanitizeHtml)}}let G8=(()=>{class n{constructor(t){this.motdNotificationService=t,this.motd=void 0}ngOnInit(){this.subscription=this.motdNotificationService.motd$.subscribe(t=>{this.motd=t})}ngOnDestroy(){this.subscription.unsubscribe()}onDismissed(){this.motdNotificationService.hide()}static{this.\u0275fac=function(o){return new(o||n)(e.\u0275\u0275directiveInject(Vs))}}static{this.\u0275cmp=e.\u0275\u0275defineComponent({type:n,selectors:[["cd-motd"]],decls:1,vars:1,consts:[["size","slim",3,"showTitle","type","dismissible","dismissed",4,"ngIf"],["size","slim",3,"dismissed","showTitle","type","dismissible"],[3,"innerHTML"]],template:function(o,i){1&o&&e.\u0275\u0275template(0,w8,3,6,"cd-alert-panel",0),2&o&&e.\u0275\u0275property("ngIf",i.motd)},dependencies:[l.NgIf,it.m,U8.b]})}}return n})();var H8=s(92919);const V8=(n,c,t)=>({ftMap:n,daemons:c,selectedDaemon:t});function B8(n,c){if(1&n){const t=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementContainerStart(0),e.\u0275\u0275elementStart(1,"button",8),e.\u0275\u0275listener("click",function(){const i=e.\u0275\u0275restoreView(t).$implicit,r=e.\u0275\u0275nextContext(3);return e.\u0275\u0275resetView(r.onDaemonSelection(i))}),e.\u0275\u0275text(2),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementContainerEnd()}if(2&n){const t=c.$implicit;e.\u0275\u0275advance(2),e.\u0275\u0275textInterpolate2(" ",t.id," ( ",t.zonegroup_name," ) ")}}function z8(n,c){if(1&n&&(e.\u0275\u0275elementContainerStart(0),e.\u0275\u0275elementStart(1,"div",2)(2,"span",3),e.\u0275\u0275i18n(3,0),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(4,"div",4)(5,"button",5),e.\u0275\u0275text(6),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(7,"div",6),e.\u0275\u0275template(8,B8,3,2,"ng-container",7),e.\u0275\u0275elementEnd()()(),e.\u0275\u0275elementContainerEnd()),2&n){const t=e.\u0275\u0275nextContext().ngIf;e.\u0275\u0275advance(6),e.\u0275\u0275textInterpolate2(" ",t.selectedDaemon.id," ( ",t.selectedDaemon.zonegroup_name," ) "),e.\u0275\u0275advance(2),e.\u0275\u0275property("ngForOf",t.daemons)}}function X8(n,c){if(1&n&&(e.\u0275\u0275elementContainerStart(0),e.\u0275\u0275template(1,z8,9,3,"ng-container",1),e.\u0275\u0275elementContainerEnd()),2&n){const t=c.ngIf,o=e.\u0275\u0275nextContext();e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf",t.ftMap&&t.ftMap.rgw&&o.permissions.rgw.read&&o.isRgwRoute&&t.daemons.length>1)}}let k8=(()=>{class n{constructor(t,o,i,r,p){this.authStorageService=t,this.featureToggles=o,this.router=i,this.timerService=r,this.rgwDaemonService=p,this.REFRESH_INTERVAL=5e3,this.subs=new K.Subscription,this.rgwUrlPrefix="/rgw",this.rgwUserUrlPrefix="/rgw/user",this.rgwRoleUrlPrefix="/rgw/roles",this.rgwBuckerUrlPrefix="/rgw/bucket",this.rgwAccountsUrlPrefix="/rgw/accounts",this.isRgwRoute=document.location.href.includes(this.rgwUserUrlPrefix)||document.location.href.includes(this.rgwBuckerUrlPrefix)||document.location.href.includes(this.rgwRoleUrlPrefix)||document.location.href.includes(this.rgwAccountsUrlPrefix)}ngOnInit(){this.permissions=this.authStorageService.getPermissions(),this.featureToggleMap$=this.featureToggles.get(),this.subs.add(this.router.events.pipe((0,u.filter)(t=>t instanceof m.NavigationEnd)).subscribe(()=>this.isRgwRoute=[this.rgwBuckerUrlPrefix,this.rgwUserUrlPrefix,this.rgwRoleUrlPrefix,this.rgwAccountsUrlPrefix].some(t=>this.router.url.startsWith(t)))),this.subs.add(this.timerService.get(()=>this.isRgwRoute?this.rgwDaemonService.list():K.NEVER,this.REFRESH_INTERVAL).subscribe())}ngOnDestroy(){this.subs.unsubscribe()}onDaemonSelection(t){this.rgwDaemonService.selectDaemon(t),this.reloadData()}reloadData(){const t=this.router.url;this.router.navigateByUrl(this.rgwUrlPrefix,{skipLocationChange:!0}).finally(()=>{this.router.navigate([t])})}static{this.\u0275fac=function(o){return new(o||n)(e.\u0275\u0275directiveInject(_.v),e.\u0275\u0275directiveInject($o.b),e.\u0275\u0275directiveInject(m.Router),e.\u0275\u0275directiveInject(Ea.H),e.\u0275\u0275directiveInject(H8.y))}}static{this.\u0275cmp=e.\u0275\u0275defineComponent({type:n,selectors:[["cd-context"]],decls:4,vars:11,consts:()=>{let t,o;return t=$localize`:␟c53062af97ebda2a03f905698f58e524ecf8b968␟6081879025331158306:Select Object Gateway`,o=$localize`:␟ced3246fa3db31be0f7da06648463f29ba378fbe␟1937058824153361154:Selected Object Gateway:`,[o,[4,"ngIf"],[1,"cd-context-bar","pt-3","pb-3"],[1,"me-1"],["ngbDropdown","","placement","bottom-left",1,"d-inline-block","ms-2"],["ngbDropdownToggle","","title",t,1,"btn","btn-outline-info","ctx-bar-selected-rgw-daemon"],["ngbDropdownMenu",""],[4,"ngFor","ngForOf"],["ngbDropdownItem","",1,"ctx-bar-available-rgw-daemon",3,"click"]]},template:function(o,i){1&o&&(e.\u0275\u0275template(0,X8,2,1,"ng-container",1),e.\u0275\u0275pipe(1,"async"),e.\u0275\u0275pipe(2,"async"),e.\u0275\u0275pipe(3,"async")),2&o&&e.\u0275\u0275property("ngIf",e.\u0275\u0275pureFunction3(7,V8,e.\u0275\u0275pipeBind1(1,1,i.featureToggleMap$),e.\u0275\u0275pipeBind1(2,3,i.rgwDaemonService.daemons$),e.\u0275\u0275pipeBind1(3,5,i.rgwDaemonService.selectedDaemon$)))},dependencies:[l.NgForOf,l.NgIf,V.NgbDropdown,V.NgbDropdownToggle,V.NgbDropdownMenu,V.NgbDropdownItem,V.NgbDropdownButtonItem,De.S,l.AsyncPipe],styles:[".cd-context-bar[_ngcontent-%COMP%]{border-bottom:1px solid #dee2e6}"]})}}return n})();const j8=(n,c)=>({dashboard:n,"rgw-dashboard":c}),W8=(n,c)=>({"ms-4 me-4":n,"m-3":c});let K8=(()=>{class n{get class(){return"top-notification-"+this.notifications.length}constructor(t,o,i,r,p,F,D,x){this.router=t,this.summaryService=o,this.taskManagerService=i,this.multiClusterService=r,this.faviconService=p,this.authStorageService=F,this.telemetryNotificationService=D,this.motdNotificationService=x,this.notifications=[],this.subs=new K.Subscription,this.permissions=this.authStorageService.getPermissions()}ngOnInit(){this.permissions.configOpt.read&&(this.subs.add(this.multiClusterService.startPolling()),this.subs.add(this.multiClusterService.startClusterTokenStatusPolling())),this.subs.add(this.summaryService.startPolling()),this.subs.add(this.taskManagerService.init(this.summaryService)),this.subs.add(this.authStorageService.isPwdDisplayed$.subscribe(t=>{this.showTopNotification("isPwdDisplayed",t)})),this.subs.add(this.telemetryNotificationService.update.subscribe(t=>{this.showTopNotification("telemetryNotificationEnabled",t)})),this.subs.add(this.motdNotificationService.motd$.subscribe(t=>{this.showTopNotification("motdNotificationEnabled",E().isPlainObject(t))})),this.faviconService.init()}showTopNotification(t,o){if(o)this.notifications.includes(t)||this.notifications.push(t);else{const i=this.notifications.indexOf(t);i>=0&&this.notifications.splice(i,1)}}ngOnDestroy(){this.subs.unsubscribe()}static{this.\u0275fac=function(o){return new(o||n)(e.\u0275\u0275directiveInject(m.Router),e.\u0275\u0275directiveInject(on.E),e.\u0275\u0275directiveInject(GF.C),e.\u0275\u0275directiveInject(wo.J),e.\u0275\u0275directiveInject(Hs),e.\u0275\u0275directiveInject(_.v),e.\u0275\u0275directiveInject(Na),e.\u0275\u0275directiveInject(Vs))}}static{this.\u0275cmp=e.\u0275\u0275defineComponent({type:n,selectors:[["cd-workbench-layout"]],hostVars:2,hostBindings:function(o,i){2&o&&e.\u0275\u0275classMap(i.class)},features:[e.\u0275\u0275ProvidersFeature([Hs])],decls:11,vars:8,consts:[["name","global"],[1,"container-fluid","h-100",3,"ngClass"],[1,"cd-alert-container",3,"ngClass"]],template:function(o,i){1&o&&(e.\u0275\u0275elementStart(0,"block-ui",0)(1,"cd-navigation")(2,"div",1)(3,"div",2),e.\u0275\u0275element(4,"cd-pwd-expiration-notification")(5,"cd-telemetry-notification")(6,"cd-motd"),e.\u0275\u0275elementEnd(),e.\u0275\u0275element(7,"cd-context")(8,"cd-breadcrumbs")(9,"router-outlet")(10,"cds-placeholder"),e.\u0275\u0275elementEnd()()()),2&o&&(e.\u0275\u0275advance(2),e.\u0275\u0275property("ngClass",e.\u0275\u0275pureFunction2(2,j8,"/dashboard"==i.router.url||"/dashboard_3"==i.router.url||"/multi-cluster/overview"==i.router.url,"/rgw/overview"==i.router.url)),e.\u0275\u0275advance(),e.\u0275\u0275property("ngClass",e.\u0275\u0275pureFunction2(5,W8,"/dashboard"==i.router.url||"/dashboard_3"==i.router.url||"/multi-cluster/overview"==i.router.url,"/rgw/overview"==i.router.url)))},dependencies:[Bs.BlockUIComponent,l.NgClass,M8,N8,m.RouterOutlet,L8,x8,G8,L.Placeholder,k8],styles:[".dashboard[_ngcontent-%COMP%]{background-color:#e9ecef;margin:0;padding:0 0 48px}.container-fluid[_ngcontent-%COMP%]{overflow:auto;padding-bottom:100px;padding-top:48px}.rgw-dashboard[_ngcontent-%COMP%]{background-color:#e9ecef}.cd-alert-container[_ngcontent-%COMP%]{display:flex;flex-direction:column}"]})}}return n})();var Q8=s(96143),Y8=s.n(Q8);let J8=(()=>{class n{ngOnInit(){Y8()({url:window.location.origin+"/docs/openapi.json",dom_id:"#swagger-ui",layout:"BaseLayout"})}static{this.\u0275fac=function(o){return new(o||n)}}static{this.\u0275cmp=e.\u0275\u0275defineComponent({type:n,selectors:[["cd-api-docs"]],decls:1,vars:0,consts:[["id","swagger-ui",1,"apiDocs"]],template:function(o,i){1&o&&e.\u0275\u0275element(0,"div",0)},styles:[".apiDocs[_ngcontent-%COMP%]{background:#f8f9fa;font-size:18px!important;margin-top:-48px!important}"]})}}return n})();var Ga=s(9300),Z8=s(19907),ks=s(42676);let js=(()=>{class n{constructor(t,o){this.router=t,this.authStorageService=o}canActivate(t,o){return!(this.authStorageService.isLoggedIn()&&!this.authStorageService.isSSO()&&this.authStorageService.getPwdUpdateRequired()&&(this.router.navigate(["/login-change-password"],{queryParams:{returnUrl:o.url}}),1))}canActivateChild(t,o){return this.canActivate(t,o)}static{this.\u0275fac=function(o){return new(o||n)(e.\u0275\u0275inject(m.Router),e.\u0275\u0275inject(_.v))}}static{this.\u0275prov=e.\u0275\u0275defineInjectable({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();var Ha=s(1811),io=s(6955);let Ws=(()=>{class n{constructor(t){this.authStorageService=t}canActivate(){if(!this.authStorageService.isSSO())return!0;throw new Pa.DA}canActivateChild(){return this.canActivate()}static{this.\u0275fac=function(o){return new(o||n)(e.\u0275\u0275inject(_.v))}}static{this.\u0275prov=e.\u0275\u0275defineInjectable({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();var q8=s(71656);const ho=n=>[n],Yi=(n,c)=>[n,c];function ev(n,c){if(1&n&&(e.\u0275\u0275elementStart(0,"h5"),e.\u0275\u0275i18nStart(1,13),e.\u0275\u0275element(2,"i",48),e.\u0275\u0275i18nEnd(),e.\u0275\u0275elementEnd()),2&n){const t=e.\u0275\u0275nextContext(5);e.\u0275\u0275advance(2),e.\u0275\u0275property("ngClass",e.\u0275\u0275pureFunction1(2,ho,t.icons.spinner)),e.\u0275\u0275i18nExp(null==t.executingTasks?null:t.executingTasks.progress),e.\u0275\u0275i18nApply(1)}}function tv(n,c){if(1&n&&(e.\u0275\u0275elementStart(0,"h5"),e.\u0275\u0275i18nStart(1,14),e.\u0275\u0275element(2,"i",48),e.\u0275\u0275i18nEnd(),e.\u0275\u0275elementEnd()),2&n){const t=e.\u0275\u0275nextContext(5);e.\u0275\u0275advance(2),e.\u0275\u0275property("ngClass",e.\u0275\u0275pureFunction2(2,Yi,t.icons.spin,t.icons.spinner)),e.\u0275\u0275i18nExp(null==t.executingTasks?null:t.executingTasks.progress),e.\u0275\u0275i18nApply(1)}}function nv(n,c){if(1&n&&(e.\u0275\u0275elementContainerStart(0),e.\u0275\u0275elementStart(1,"div",46),e.\u0275\u0275template(2,ev,3,4,"h5",37),e.\u0275\u0275elementStart(3,"a",47),e.\u0275\u0275i18n(4,12),e.\u0275\u0275elementEnd()(),e.\u0275\u0275template(5,tv,3,5,"ng-template",null,9,e.\u0275\u0275templateRefExtractor),e.\u0275\u0275elementContainerEnd()),2&n){const t=e.\u0275\u0275reference(6),o=e.\u0275\u0275nextContext().ngIf;e.\u0275\u0275advance(2),e.\u0275\u0275property("ngIf",o.is_paused)("ngIfElse",t)}}function ov(n,c){if(1&n&&(e.\u0275\u0275elementStart(0,"cd-card",45),e.\u0275\u0275template(1,nv,7,2,"ng-container",37),e.\u0275\u0275elementEnd()),2&n){const t=c.ngIf;e.\u0275\u0275nextContext();const o=e.\u0275\u0275reference(29);e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf",t.in_progress)("ngIfElse",o)}}function iv(n,c){1&n&&e.\u0275\u0275element(0,"i",55)}function av(n,c){if(1&n&&(e.\u0275\u0275elementStart(0,"cds-toggletip",49),e.\u0275\u0275pipe(1,"healthColor"),e.\u0275\u0275elementStart(2,"div",50),e.\u0275\u0275text(3),e.\u0275\u0275pipe(4,"healthLabel"),e.\u0275\u0275pipe(5,"uppercase"),e.\u0275\u0275template(6,iv,1,0,"i",51),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(7,"div",52)(8,"div",53),e.\u0275\u0275element(9,"cd-health-checks",54),e.\u0275\u0275elementEnd()()()),2&n){const t=e.\u0275\u0275nextContext().ngIf;e.\u0275\u0275property("ngStyle",e.\u0275\u0275pipeBind1(1,6,t.health.status))("dropShadow",!0)("autoAlign",!0),e.\u0275\u0275advance(3),e.\u0275\u0275textInterpolate1(" ",e.\u0275\u0275pipeBind1(5,10,e.\u0275\u0275pipeBind1(4,8,t.health.status))," "),e.\u0275\u0275advance(3),e.\u0275\u0275property("ngIf","HEALTH_OK"!==(null==t.health?null:t.health.status)),e.\u0275\u0275advance(3),e.\u0275\u0275property("healthData",t.health.checks)}}function sv(n,c){if(1&n&&(e.\u0275\u0275elementContainerStart(0),e.\u0275\u0275elementStart(1,"div",56),e.\u0275\u0275pipe(2,"healthColor"),e.\u0275\u0275text(3),e.\u0275\u0275pipe(4,"healthLabel"),e.\u0275\u0275pipe(5,"uppercase"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementContainerEnd()),2&n){const t=e.\u0275\u0275nextContext().ngIf;e.\u0275\u0275advance(),e.\u0275\u0275property("ngStyle",e.\u0275\u0275pipeBind1(2,2,t.health.status)),e.\u0275\u0275advance(2),e.\u0275\u0275textInterpolate1(" ",e.\u0275\u0275pipeBind1(5,6,e.\u0275\u0275pipeBind1(4,4,t.health.status))," ")}}function rv(n,c){if(1&n&&e.\u0275\u0275element(0,"i",57),2&n){const t=e.\u0275\u0275nextContext(3);e.\u0275\u0275property("ngClass",e.\u0275\u0275pureFunction1(1,ho,t.icons.success))}}function lv(n,c){if(1&n&&(e.\u0275\u0275elementContainerStart(0),e.\u0275\u0275elementStart(1,"dt",58),e.\u0275\u0275i18n(2,16),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(3,"dd",59),e.\u0275\u0275text(4),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(5,"dt",58),e.\u0275\u0275i18n(6,17),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(7,"dd",59),e.\u0275\u0275text(8),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementContainerEnd()),2&n){const t=c.ngIf;e.\u0275\u0275advance(4),e.\u0275\u0275textInterpolate(t.image),e.\u0275\u0275advance(4),e.\u0275\u0275textInterpolate(t.registry)}}function _v(n,c){if(1&n&&(e.\u0275\u0275elementStart(0,"dl",42)(1,"dt",58),e.\u0275\u0275i18n(2,15),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(3,"dd",59),e.\u0275\u0275text(4),e.\u0275\u0275elementEnd(),e.\u0275\u0275template(5,lv,9,2,"ng-container",37),e.\u0275\u0275pipe(6,"async"),e.\u0275\u0275elementEnd()),2&n){const t=c.ngIf,o=e.\u0275\u0275nextContext(3),i=e.\u0275\u0275reference(8);e.\u0275\u0275advance(4),e.\u0275\u0275textInterpolate(t),e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf",e.\u0275\u0275pipeBind1(6,3,o.info$))("ngIfElse",i)}}function cv(n,c){if(1&n&&(e.\u0275\u0275elementContainerStart(0),e.\u0275\u0275elementStart(1,"legend",43),e.\u0275\u0275i18n(2,18),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(3,"div"),e.\u0275\u0275element(4,"cd-table",60,10),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementContainerEnd()),2&n){const t=c.ngIf,o=e.\u0275\u0275nextContext(3);e.\u0275\u0275advance(4),e.\u0275\u0275property("data",t)("columns",o.columns)("limit",5)}}function dv(n,c){if(1&n){const t=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementContainerStart(0),e.\u0275\u0275elementStart(1,"div",62),e.\u0275\u0275pipe(2,"mgrSummary"),e.\u0275\u0275elementStart(3,"button",63),e.\u0275\u0275pipe(4,"mgrSummary"),e.\u0275\u0275listener("click",function(){e.\u0275\u0275restoreView(t);const i=e.\u0275\u0275nextContext().ngIf,r=e.\u0275\u0275nextContext(4);return e.\u0275\u0275resetView(r.upgradeNow(i.versions[i.versions.length-1]))}),e.\u0275\u0275i18n(5,19),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(6,"a",64),e.\u0275\u0275listener("click",function(){e.\u0275\u0275restoreView(t);const i=e.\u0275\u0275nextContext(5);return e.\u0275\u0275resetView(i.startUpgradeModal())}),e.\u0275\u0275i18n(7,20),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementContainerEnd()}if(2&n){let t,o;const i=e.\u0275\u0275nextContext().ngIf,r=e.\u0275\u0275nextContext(2).ngIf;e.\u0275\u0275advance(),e.\u0275\u0275property("ngbTooltip",(null==(t=e.\u0275\u0275pipeBind1(2,3,r.mgr_map))?null:t.total)<=1?"To upgrade, you need minimum 2 mgr daemons.":""),e.\u0275\u0275advance(2),e.\u0275\u0275property("disabled",(null==(o=e.\u0275\u0275pipeBind1(4,5,r.mgr_map))?null:o.total)<=1),e.\u0275\u0275advance(2),e.\u0275\u0275i18nExp(i.versions[i.versions.length-1]),e.\u0275\u0275i18nApply(5)}}function uv(n,c){if(1&n&&(e.\u0275\u0275elementStart(0,"div",35),e.\u0275\u0275template(1,dv,8,7,"ng-container",37),e.\u0275\u0275elementEnd()),2&n){const t=c.ngIf;e.\u0275\u0275nextContext(4);const o=e.\u0275\u0275reference(2);e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf",t.versions.length>0)("ngIfElse",o)}}function pv(n,c){if(1&n&&(e.\u0275\u0275template(0,uv,2,2,"div",61),e.\u0275\u0275pipe(1,"async")),2&n){const t=e.\u0275\u0275nextContext(3),o=e.\u0275\u0275reference(6);e.\u0275\u0275property("ngIf",e.\u0275\u0275pipeBind1(1,2,t.info$))("ngIfElse",o)}}function mv(n,c){if(1&n&&(e.\u0275\u0275elementContainerStart(0),e.\u0275\u0275template(1,ov,2,2,"cd-card",33),e.\u0275\u0275pipe(2,"async"),e.\u0275\u0275elementStart(3,"cd-card",34)(4,"div",35)(5,"h5"),e.\u0275\u0275text(6),e.\u0275\u0275elementEnd()()(),e.\u0275\u0275elementStart(7,"cd-card",36)(8,"div",35),e.\u0275\u0275template(9,av,10,12,"ng-template",null,7,e.\u0275\u0275templateRefExtractor)(11,sv,6,8,"ng-container",37),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(12,"cd-card",38)(13,"div",35)(14,"h5"),e.\u0275\u0275template(15,rv,1,3,"i",39),e.\u0275\u0275pipe(16,"mgrSummary"),e.\u0275\u0275text(17),e.\u0275\u0275pipe(18,"mgrSummary"),e.\u0275\u0275elementEnd()()(),e.\u0275\u0275elementStart(19,"div",40),e.\u0275\u0275template(20,_v,7,5,"dl",41),e.\u0275\u0275pipe(21,"async"),e.\u0275\u0275elementStart(22,"div",42),e.\u0275\u0275template(23,cv,6,3,"ng-container",32),e.\u0275\u0275pipe(24,"async"),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(25,"legend",43),e.\u0275\u0275i18n(26,11),e.\u0275\u0275elementEnd(),e.\u0275\u0275element(27,"cd-logs",44),e.\u0275\u0275template(28,pv,2,4,"ng-template",null,8,e.\u0275\u0275templateRefExtractor),e.\u0275\u0275elementContainerEnd()),2&n){let t,o;const i=c.ngIf,r=e.\u0275\u0275reference(10),p=e.\u0275\u0275nextContext(2),F=e.\u0275\u0275reference(4);e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf",e.\u0275\u0275pipeBind1(2,15,p.upgradeStatus$)),e.\u0275\u0275advance(5),e.\u0275\u0275textInterpolate(p.version),e.\u0275\u0275advance(5),e.\u0275\u0275property("ngIf",!(null!=i.health&&null!=i.health.checks&&i.health.checks.length))("ngIfElse",r),e.\u0275\u0275advance(4),e.\u0275\u0275property("ngIf",(null==(t=e.\u0275\u0275pipeBind1(16,17,i.mgr_map))?null:t.total)>1)("ngIfElse",F),e.\u0275\u0275advance(2),e.\u0275\u0275textInterpolate1(" ",null==(o=e.\u0275\u0275pipeBind1(18,19,i.mgr_map))?null:o.total," "),e.\u0275\u0275advance(3),e.\u0275\u0275property("ngIf",e.\u0275\u0275pipeBind1(21,21,p.fsid$)),e.\u0275\u0275advance(3),e.\u0275\u0275property("ngIf",e.\u0275\u0275pipeBind1(24,23,p.daemons$)),e.\u0275\u0275advance(4),e.\u0275\u0275property("showAuditLogs",!1)("showDaemonLogs",!1)("showNavLinks",!1)("showFilterTools",!1)("showDownloadCopyButton",!1)("scrollable",!0)}}function fv(n,c){if(1&n&&(e.\u0275\u0275elementStart(0,"div",31),e.\u0275\u0275template(1,mv,30,25,"ng-container",32),e.\u0275\u0275pipe(2,"async"),e.\u0275\u0275elementEnd()),2&n){const t=e.\u0275\u0275nextContext();e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf",e.\u0275\u0275pipeBind1(2,1,t.healthData$))}}function Ev(n,c){if(1&n){const t=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"span",65),e.\u0275\u0275i18nStart(1,21),e.\u0275\u0275element(2,"i",57),e.\u0275\u0275i18nEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(3,"a",66),e.\u0275\u0275listener("click",function(){e.\u0275\u0275restoreView(t);const i=e.\u0275\u0275nextContext();return e.\u0275\u0275resetView(i.startUpgradeModal())}),e.\u0275\u0275i18n(4,22),e.\u0275\u0275elementEnd()}if(2&n){const t=e.\u0275\u0275nextContext();e.\u0275\u0275advance(2),e.\u0275\u0275property("ngClass",e.\u0275\u0275pureFunction1(1,ho,t.icons.success))}}function gv(n,c){if(1&n&&e.\u0275\u0275element(0,"i",67),2&n){const t=e.\u0275\u0275nextContext();e.\u0275\u0275property("ngClass",e.\u0275\u0275pureFunction1(1,ho,t.icons.warning))}}function Cv(n,c){if(1&n&&(e.\u0275\u0275elementStart(0,"div",35)(1,"button",68),e.\u0275\u0275i18nStart(2,23),e.\u0275\u0275element(3,"i",48),e.\u0275\u0275i18nEnd(),e.\u0275\u0275elementEnd()()),2&n){const t=e.\u0275\u0275nextContext(2);e.\u0275\u0275advance(),e.\u0275\u0275property("disabled",!0),e.\u0275\u0275advance(2),e.\u0275\u0275property("ngClass",e.\u0275\u0275pureFunction2(2,Yi,t.icons.spin,t.icons.spinner))}}function Sv(n,c){if(1&n&&e.\u0275\u0275template(0,Cv,4,5,"div",61),2&n){const t=e.\u0275\u0275nextContext(),o=e.\u0275\u0275reference(10);e.\u0275\u0275property("ngIf",!t.errorMessage)("ngIfElse",o)}}function hv(n,c){if(1&n&&(e.\u0275\u0275elementStart(0,"div",42)(1,"span",70),e.\u0275\u0275i18nStart(2,24),e.\u0275\u0275element(3,"i",48),e.\u0275\u0275i18nEnd(),e.\u0275\u0275elementEnd()()),2&n){const t=e.\u0275\u0275nextContext(2);e.\u0275\u0275advance(3),e.\u0275\u0275property("ngClass",e.\u0275\u0275pureFunction2(1,Yi,t.icons.spin,t.icons.spinner))}}function Tv(n,c){if(1&n&&e.\u0275\u0275template(0,hv,4,4,"div",69),2&n){const t=e.\u0275\u0275nextContext(),o=e.\u0275\u0275reference(12);e.\u0275\u0275property("ngIf",!t.errorMessage)("ngIfElse",o)}}function Fv(n,c){if(1&n){const t=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"div",35)(1,"span",71),e.\u0275\u0275i18nStart(2,25),e.\u0275\u0275element(3,"i",48),e.\u0275\u0275i18nEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(4,"a",66),e.\u0275\u0275listener("click",function(){e.\u0275\u0275restoreView(t);const i=e.\u0275\u0275nextContext();return e.\u0275\u0275resetView(i.startUpgradeModal())}),e.\u0275\u0275i18n(5,26),e.\u0275\u0275elementEnd()()}if(2&n){const t=e.\u0275\u0275nextContext();e.\u0275\u0275advance(3),e.\u0275\u0275property("ngClass",e.\u0275\u0275pureFunction1(2,ho,t.icons.danger)),e.\u0275\u0275i18nExp(t.errorMessage),e.\u0275\u0275i18nApply(2)}}function vv(n,c){if(1&n&&(e.\u0275\u0275elementStart(0,"span",72),e.\u0275\u0275i18nStart(1,27),e.\u0275\u0275element(2,"i",48),e.\u0275\u0275i18nEnd(),e.\u0275\u0275elementEnd()),2&n){const t=e.\u0275\u0275nextContext();e.\u0275\u0275advance(2),e.\u0275\u0275property("ngClass",e.\u0275\u0275pureFunction1(1,ho,t.icons.danger))}}function Mv(n,c){if(1&n&&(e.\u0275\u0275elementStart(0,"div",46)(1,"h5"),e.\u0275\u0275i18nStart(2,28),e.\u0275\u0275element(3,"i",48),e.\u0275\u0275i18nEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(4,"a",47),e.\u0275\u0275i18n(5,29),e.\u0275\u0275elementEnd()()),2&n){const t=e.\u0275\u0275nextContext();e.\u0275\u0275advance(3),e.\u0275\u0275property("ngClass",e.\u0275\u0275pureFunction2(2,Yi,t.icons.spin,t.icons.spinner)),e.\u0275\u0275i18nExp(null==t.executingTasks?null:t.executingTasks.progress),e.\u0275\u0275i18nApply(2)}}let Rv=(()=>{class n{constructor(t,o,i,r,p,F,D){this.summaryService=t,this.upgradeService=o,this.healthService=i,this.daemonService=r,this.notificationService=p,this.router=F,this.refreshIntervalService=D,this.interval=new K.Subscription,this.columns=[],this.icons=g.FI,this.subject=new K.ReplaySubject,this.subs=new K.Subscription}ngOnInit(){this.upgradeStatus$=this.subject.pipe((0,u.switchMap)(()=>this.upgradeService.status()),(0,u.shareReplay)(1)),this.columns=[{name:$localize`Daemon name`,prop:"daemon_name",flexGrow:1,filterable:!0},{name:$localize`Version`,prop:"version",flexGrow:1,filterable:!0}],this.subs.add(this.summaryService.subscribe(t=>{const o=t.version.replace("ceph version ","").split("-");this.version=o[0],this.executingTasks=t.executing_tasks.filter(i=>i.name.includes("progress/Upgrade"))[0]})),this.interval=this.refreshIntervalService.intervalData$.subscribe(()=>{this.fetchStatus()}),this.info$=this.upgradeService.listCached().pipe((0,u.catchError)(t=>(t.preventDefault(),this.errorMessage=$localize`Not retrieving upgrades`,this.notificationService.show(Le._.error,this.errorMessage,t.error.detail||t.error.message),(0,K.of)(null)))),this.healthData$=this.healthService.getMinimalHealth(),this.daemons$=this.daemonService.list(this.upgradeService.upgradableServiceTypes),this.fsid$=this.healthService.getClusterFsid()}startUpgradeModal(){this.modalRef=this.upgradeService.startUpgradeModal()}fetchStatus(){this.subject.next()}upgradeNow(t){this.upgradeService.start(t).subscribe({error:o=>{this.notificationService.show(Le._.error,$localize`Failed to start the upgrade`,o)},complete:()=>{this.notificationService.show(Le._.success,$localize`Started upgrading the cluster`),this.fetchStatus(),this.router.navigate(["/upgrade/progress"])}})}ngOnDestroy(){this.interval?.unsubscribe(),this.subs?.unsubscribe()}static{this.\u0275fac=function(o){return new(o||n)(e.\u0275\u0275directiveInject(on.E),e.\u0275\u0275directiveInject(Ki),e.\u0275\u0275directiveInject(ue),e.\u0275\u0275directiveInject(Xi),e.\u0275\u0275directiveInject(Y.J),e.\u0275\u0275directiveInject(m.Router),e.\u0275\u0275directiveInject(xo.s))}}static{this.\u0275cmp=e.\u0275\u0275defineComponent({type:n,selectors:[["cd-upgrade"]],decls:15,vars:1,consts:()=>{let t,o,i,r,p,F,D,x,H,X,Z,re,pe,be,Pe,he,Ue,ve,Xe,_t,ft,we,qe,Rt,Ot,Je,Dt;return t=$localize`:␟a8a224e3261e07898b41b8bd24b3fffe29cde0a9␟1947869876969745692:New Version`,o=$localize`:␟a8a224e3261e07898b41b8bd24b3fffe29cde0a9␟1947869876969745692:New Version`,i=$localize`:␟9a1bd0840d2c3901d359e4a58a9c73545b7e9598␟3764903568985562955:Current Version`,r=$localize`:␟9a1bd0840d2c3901d359e4a58a9c73545b7e9598␟3764903568985562955:Current Version`,p=$localize`:␟73caac4265ea7314ff061e5a1d78a6361a6dd3b8␟6920224523921471777:Cluster Status`,F=$localize`:␟73caac4265ea7314ff061e5a1d78a6361a6dd3b8␟6920224523921471777:Cluster Status`,D=$localize`:␟c8ae59a07e0b775f3a1af3d8733224e4639d7a5b␟519998761053137675:MGR Count`,x=$localize`:␟c8ae59a07e0b775f3a1af3d8733224e4639d7a5b␟519998761053137675:MGR Count`,H=$localize`:␟4e8589665654cf937f709b9959bf5f2d3877e0be␟7721207555072740710:Cluster logs`,X=$localize`:␟c46808a9d05bef8880a74455a58bb5ffb824e982␟1661958078457595489:View Details...`,Z=$localize`:␟1be83694322aaa5956597a488e158584f258d21d␟8359916602638736432:${"\ufffd#2\ufffd"}:START_ITALIC_TEXT:${"\ufffd/#2\ufffd"}:CLOSE_ITALIC_TEXT: Upgrade is paused ${"\ufffd0\ufffd"}:INTERPOLATION:%`,re=$localize`:␟7756b45c6c0ed75fb98318736c99043fd1da97d2␟3958229507981755370:${"\ufffd#2\ufffd"}:START_ITALIC_TEXT:${"\ufffd/#2\ufffd"}:CLOSE_ITALIC_TEXT: Upgrading ${"\ufffd0\ufffd"}:INTERPOLATION:% `,pe=$localize`:␟0dc3f50cd3d80ba6b6146adae3a600b4d6d85622␟6537109231492111576:Cluster FSID`,be=$localize`:␟49b424ae28d4bafe1fed602816e1e6c55ad4286e␟4245661272644988642:Release Image`,Pe=$localize`:␟276c8c848441a8f43b585ecde05dce217685a244␟8956629690682741547:Registry`,he=$localize`:␟ddadd3d34e33ed67b2e1a24428c33e365d61461a␟8558263151156627910:Daemon versions`,Ue=$localize`:␟3be94dd51ddf8d3188e31a5d3dcb071314442870␟1844901545725631761:Upgrade to ${"\ufffd0\ufffd"}:INTERPOLATION:`,ve=$localize`:␟9474e2da044f83fe5172c4306684dfbd3afb1778␟5653808017867684650:Select another version...`,Xe=$localize`:␟8c37d8080bac58e45834f79f1b71a2a07b1398fc␟1464475165334392760:${"\ufffd#2\ufffd"}:START_ITALIC_TEXT:${"\ufffd/#2\ufffd"}:CLOSE_ITALIC_TEXT: Cluster is up-to-date `,_t=$localize`:␟308ba2922985a9f4bf749056644eeb256ff381e2␟6900962976935725026:Upgrade using custom image...`,ft=$localize`:␟600ed9adbd7c9aa6f5e4584fe40c51c522bca5f2␟5090880615139945144:Checking for upgrades ${"\ufffd#3\ufffd"}:START_ITALIC_TEXT:${"\ufffd/#3\ufffd"}:CLOSE_ITALIC_TEXT:`,we=$localize`:␟516206233d06e9835536cd886aeb1d0c95694cb6␟2964236440425890837:Fetching registry informations ${"\ufffd#3\ufffd"}:START_ITALIC_TEXT:${"\ufffd/#3\ufffd"}:CLOSE_ITALIC_TEXT:`,qe=$localize`:␟dc75ffeb8c5d60c7c3f4cc3a3f48c2c3da194d22␟790886321230514397:${"\ufffd#3\ufffd"}:START_ITALIC_TEXT:${"\ufffd/#3\ufffd"}:CLOSE_ITALIC_TEXT: ${"\ufffd0\ufffd"}:INTERPOLATION: `,Rt=$localize`:␟308ba2922985a9f4bf749056644eeb256ff381e2␟6900962976935725026:Upgrade using custom image...`,Ot=$localize`:␟584342c52d131aaac16203e4b55a697d94fb4da5␟1894079334507469054:${"\ufffd#2\ufffd"}:START_ITALIC_TEXT:${"\ufffd/#2\ufffd"}:CLOSE_ITALIC_TEXT: Failed to fetch registry informations `,Je=$localize`:␟406b07d19ad78e89312478f4d79188ee8a4863ed␟2371943402242622336:${"\ufffd#3\ufffd"}:START_ITALIC_TEXT:${"\ufffd/#3\ufffd"}:CLOSE_ITALIC_TEXT: Upgrade in progress ${"\ufffd0\ufffd"}:INTERPOLATION:%`,Dt=$localize`:␟c46808a9d05bef8880a74455a58bb5ffb824e982␟1661958078457595489:View Details...`,[["noUpgradesAvailable",""],["warningIcon",""],["checkingForUpgradeStatus",""],["loadingDetails",""],["upgradeStatusError",""],["upgradeInfoError",""],["upgradeProgress",""],["healthWarningAndError",""],["upgradeStatusTpl",""],["inProgress",""],["daemonsTable",""],H,X,Z,re,pe,be,Pe,he,Ue,ve,Xe,_t,ft,we,qe,Rt,Ot,Je,Dt,["class","row h-25",4,"cdScope"],[1,"row","h-25"],[4,"ngIf"],["class","col-sm-3 px-3 d-flex","cardTitle",t,"aria-label",o,"id","newVersionAvailable",4,"ngIf"],["cardTitle",i,"aria-label",r,"id","currentVersion",1,"col-sm-3","px-3","d-flex"],[1,"d-flex","flex-column","justify-content-center","align-items-center"],["cardTitle",p,"aria-label",F,"id","clusterStatus",1,"col-sm-3","px-3","d-flex"],[4,"ngIf","ngIfElse"],["cardTitle",D,"aria-label",x,"id","mgrCount",1,"col-sm-3","px-3","d-flex"],["class","text-success",3,"ngClass",4,"ngIf","ngIfElse"],[1,"d-flex","mt-3"],["class","w-50",4,"ngIf"],[1,"w-50"],[1,"cd-header"],["defaultTab","cluster-logs",3,"showAuditLogs","showDaemonLogs","showNavLinks","showFilterTools","showDownloadCopyButton","scrollable"],["cardTitle",t,"aria-label",o,"id","newVersionAvailable",1,"col-sm-3","px-3","d-flex"],[1,"d-flex","flex-column","justify-content-center","align-items-center","mt-2"],["routerLink","/upgrade/progress",1,"mt-2","link-primary","mb-2"],[3,"ngClass"],[1,"info-card-content-clickable","mt-1",3,"ngStyle","dropShadow","autoAlign"],["cdsToggletipButton",""],["class","fa fa-exclamation-triangle",4,"ngIf"],["cdsToggletipContent",""],[1,"cds--popover-scroll-container"],[3,"healthData"],[1,"fa","fa-exclamation-triangle"],[3,"ngStyle"],[1,"text-success",3,"ngClass"],[1,"bold","mt-5"],[1,"mt-2"],["selectionType","single","columnMode","flex",3,"data","columns","limit"],["class","d-flex flex-column justify-content-center align-items-center",4,"ngIf","ngIfElse"],[3,"ngbTooltip"],["id","upgrade","aria-label","Upgrade now",1,"btn","btn-accent","mt-2",3,"click","disabled"],[1,"mt-2","link-primary","mb-2",3,"click"],["id","no-upgrades-available",1,"mt-1"],[1,"link-primary","mb-2",3,"click"],["title","To upgrade, you need minimum 2 mgr daemons.",1,"text-warning",3,"ngClass"],["id","upgrade","aria-label","Upgrade now",1,"btn","btn-accent","mt-2","mb-4",3,"disabled"],["class","w-50",4,"ngIf","ngIfElse"],[1,"text-info","justify-content-center","align-items-center"],["id","upgrade-status-error",1,"text-danger","mt-2","mb-4"],[1,"text-danger","justify-content-center","align-items-center"]]},template:function(o,i){1&o&&e.\u0275\u0275template(0,fv,3,3,"div",30)(1,Ev,5,3,"ng-template",null,0,e.\u0275\u0275templateRefExtractor)(3,gv,1,3,"ng-template",null,1,e.\u0275\u0275templateRefExtractor)(5,Sv,1,2,"ng-template",null,2,e.\u0275\u0275templateRefExtractor)(7,Tv,1,2,"ng-template",null,3,e.\u0275\u0275templateRefExtractor)(9,Fv,6,4,"ng-template",null,4,e.\u0275\u0275templateRefExtractor)(11,vv,3,3,"ng-template",null,5,e.\u0275\u0275templateRefExtractor)(13,Mv,6,5,"ng-template",null,6,e.\u0275\u0275templateRefExtractor),2&o&&e.\u0275\u0275property("cdScope","configOpt")},dependencies:[l.NgClass,l.NgIf,l.NgStyle,Aa.i,Ke.O,De.S,q8.V,m.RouterLink,V.NgbTooltip,Ia,L.Toggletip,L.ToggletipButton,L.ToggletipContent,ha,l.AsyncPipe,l.UpperCasePipe,Wi,Ls,Ns.j]})}}return n})();const Ov=["crushInfoTabs"],Pv=["crushDeletionBtn"],bv=["ecpInfoTabs"],Nv=["ecpDeletionBtn"],Iv=()=>({md:4}),Ks=n=>[n];function Av(n,c){1&n&&(e.\u0275\u0275elementStart(0,"cd-alert-panel",39),e.\u0275\u0275i18n(1,7),e.\u0275\u0275elementEnd())}function Dv(n,c){if(1&n&&(e.\u0275\u0275elementContainerStart(0),e.\u0275\u0275template(1,Av,2,0,"cd-alert-panel",34),e.\u0275\u0275elementContainerEnd()),2&n){const t=e.\u0275\u0275nextContext(3);e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf",!t.editing)}}function yv(n,c){if(1&n&&(e.\u0275\u0275elementStart(0,"cd-alert-panel",39),e.\u0275\u0275i18nStart(1,8),e.\u0275\u0275element(2,"p")(3,"cd-code-block",40)(4,"cd-code-block",40),e.\u0275\u0275i18nEnd(),e.\u0275\u0275elementEnd()),2&n){const t=e.\u0275\u0275nextContext(3);e.\u0275\u0275advance(3),e.\u0275\u0275property("codes",e.\u0275\u0275pureFunction1(2,Ks,t.fsFailCmd)),e.\u0275\u0275advance(),e.\u0275\u0275property("codes",e.\u0275\u0275pureFunction1(4,Ks,t.fsSetCmd))}}function Lv(n,c){1&n&&(e.\u0275\u0275elementStart(0,"span",42),e.\u0275\u0275i18n(1,9),e.\u0275\u0275elementEnd())}function $v(n,c){1&n&&(e.\u0275\u0275elementStart(0,"span",42),e.\u0275\u0275i18n(1,10),e.\u0275\u0275elementEnd())}function xv(n,c){if(1&n&&e.\u0275\u0275template(0,Lv,2,0,"span",41)(1,$v,2,0,"span",41),2&n){e.\u0275\u0275nextContext();const t=e.\u0275\u0275reference(3),o=e.\u0275\u0275nextContext(2);e.\u0275\u0275property("ngIf",o.form.showError("name",t,"required")),e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf",o.form.showError("name",t,"pattern"))}}function Uv(n,c){1&n&&(e.\u0275\u0275elementStart(0,"cd-alert-panel",45),e.\u0275\u0275i18n(1,12),e.\u0275\u0275elementEnd())}function wv(n,c){if(1&n&&(e.\u0275\u0275elementStart(0,"div",32)(1,"cds-checkbox",43),e.\u0275\u0275i18nStart(2,11),e.\u0275\u0275element(3,"cd-help-text"),e.\u0275\u0275i18nEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275template(4,Uv,2,0,"cd-alert-panel",44),e.\u0275\u0275elementEnd()),2&n){const t=e.\u0275\u0275nextContext(3);e.\u0275\u0275advance(4),e.\u0275\u0275property("ngIf",t.pools.length<2)}}function Gv(n,c){1&n&&(e.\u0275\u0275elementStart(0,"cds-text-label",48),e.\u0275\u0275i18nStart(1,13),e.\u0275\u0275element(2,"input",49),e.\u0275\u0275i18nEnd(),e.\u0275\u0275elementEnd())}function Hv(n,c){1&n&&(e.\u0275\u0275elementStart(0,"option",53),e.\u0275\u0275i18n(1,14),e.\u0275\u0275elementEnd()),2&n&&e.\u0275\u0275property("ngValue",null)}function Vv(n,c){1&n&&(e.\u0275\u0275elementStart(0,"option",53),e.\u0275\u0275i18n(1,15),e.\u0275\u0275elementEnd()),2&n&&e.\u0275\u0275property("ngValue",null)}function Bv(n,c){1&n&&(e.\u0275\u0275elementStart(0,"option",53),e.\u0275\u0275i18n(1,16),e.\u0275\u0275elementEnd()),2&n&&e.\u0275\u0275property("ngValue",null)}function zv(n,c){if(1&n&&(e.\u0275\u0275elementStart(0,"option",54),e.\u0275\u0275text(1),e.\u0275\u0275elementEnd()),2&n){const t=c.$implicit;e.\u0275\u0275property("value",null==t?null:t.pool_name),e.\u0275\u0275advance(),e.\u0275\u0275textInterpolate(null==t?null:t.pool_name)}}function Xv(n,c){if(1&n){const t=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"cds-select",50),e.\u0275\u0275listener("valueChange",function(i){e.\u0275\u0275restoreView(t);const r=e.\u0275\u0275nextContext(4);return e.\u0275\u0275resetView(r.onPoolChange(i))}),e.\u0275\u0275template(1,Hv,2,1,"option",51)(2,Vv,2,1,"option",51)(3,Bv,2,1,"option",51)(4,zv,2,2,"option",52),e.\u0275\u0275elementEnd()}if(2&n){e.\u0275\u0275nextContext();const t=e.\u0275\u0275reference(4),o=e.\u0275\u0275nextContext(3);e.\u0275\u0275property("invalid",!o.form.controls.dataPool.valid&&o.form.controls.dataPool.dirty)("invalidText",t),e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf",null===o.dataPools),e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf",null!==o.dataPools&&0===(null==o.dataPools?null:o.dataPools.length)),e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf",null!==o.dataPools&&(null==o.dataPools?null:o.dataPools.length)>0),e.\u0275\u0275advance(),e.\u0275\u0275property("ngForOf",o.dataPools)}}function kv(n,c){1&n&&(e.\u0275\u0275elementStart(0,"span",42),e.\u0275\u0275i18n(1,17),e.\u0275\u0275elementEnd())}function jv(n,c){if(1&n&&e.\u0275\u0275template(0,kv,2,0,"span",41),2&n){e.\u0275\u0275nextContext(2);const t=e.\u0275\u0275reference(3),o=e.\u0275\u0275nextContext(2);e.\u0275\u0275property("ngIf",o.form.showError("dataPool",t,"required"))}}function Wv(n,c){if(1&n&&(e.\u0275\u0275elementStart(0,"div",32),e.\u0275\u0275template(1,Gv,3,0,"cds-text-label",46)(2,Xv,5,6,"cds-select",47)(3,jv,1,1,"ng-template",null,2,e.\u0275\u0275templateRefExtractor),e.\u0275\u0275elementEnd()),2&n){const t=e.\u0275\u0275nextContext(3);e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf",t.editing),e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf",!t.editing)}}function Kv(n,c){1&n&&(e.\u0275\u0275elementStart(0,"cds-text-label",57),e.\u0275\u0275i18nStart(1,18),e.\u0275\u0275element(2,"input",58),e.\u0275\u0275i18nEnd(),e.\u0275\u0275elementEnd())}function Qv(n,c){1&n&&(e.\u0275\u0275elementStart(0,"option",53),e.\u0275\u0275i18n(1,19),e.\u0275\u0275elementEnd()),2&n&&e.\u0275\u0275property("ngValue",null)}function Yv(n,c){1&n&&(e.\u0275\u0275elementStart(0,"option",53),e.\u0275\u0275i18n(1,20),e.\u0275\u0275elementEnd()),2&n&&e.\u0275\u0275property("ngValue",null)}function Jv(n,c){1&n&&(e.\u0275\u0275elementStart(0,"option",53),e.\u0275\u0275i18n(1,21),e.\u0275\u0275elementEnd()),2&n&&e.\u0275\u0275property("ngValue",null)}function Zv(n,c){if(1&n&&(e.\u0275\u0275elementStart(0,"option",54),e.\u0275\u0275text(1),e.\u0275\u0275elementEnd()),2&n){const t=c.$implicit;e.\u0275\u0275property("value",null==t?null:t.pool_name),e.\u0275\u0275advance(),e.\u0275\u0275textInterpolate(null==t?null:t.pool_name)}}function qv(n,c){if(1&n){const t=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"cds-select",59),e.\u0275\u0275listener("valueChange",function(i){e.\u0275\u0275restoreView(t);const r=e.\u0275\u0275nextContext(4);return e.\u0275\u0275resetView(r.onPoolChange(i,!0))}),e.\u0275\u0275template(1,Qv,2,1,"option",51)(2,Yv,2,1,"option",51)(3,Jv,2,1,"option",51)(4,Zv,2,2,"option",52),e.\u0275\u0275elementEnd()}if(2&n){e.\u0275\u0275nextContext();const t=e.\u0275\u0275reference(4),o=e.\u0275\u0275nextContext(3);e.\u0275\u0275property("invalid",!o.form.controls.metadataPool.valid&&o.form.controls.metadataPool.dirty)("invalidText",t),e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf",null===o.metadatPools),e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf",null!==o.metadatPools&&0===(null==o.metadatPools?null:o.metadatPools.length)),e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf",null!==o.metadatPools&&(null==o.metadatPools?null:o.metadatPools.length)>0),e.\u0275\u0275advance(),e.\u0275\u0275property("ngForOf",o.metadatPools)}}function e3(n,c){1&n&&(e.\u0275\u0275elementStart(0,"span",42),e.\u0275\u0275i18n(1,22),e.\u0275\u0275elementEnd())}function t3(n,c){if(1&n&&e.\u0275\u0275template(0,e3,2,0,"span",41),2&n){e.\u0275\u0275nextContext(2);const t=e.\u0275\u0275reference(3),o=e.\u0275\u0275nextContext(2);e.\u0275\u0275property("ngIf",o.form.showError("metadataPool",t,"required"))}}function n3(n,c){if(1&n&&(e.\u0275\u0275elementStart(0,"div",32),e.\u0275\u0275template(1,Kv,3,0,"cds-text-label",55)(2,qv,5,6,"cds-select",56)(3,t3,1,1,"ng-template",null,3,e.\u0275\u0275templateRefExtractor),e.\u0275\u0275elementEnd()),2&n){const t=e.\u0275\u0275nextContext(3);e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf",t.editing),e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf",!t.editing)}}function o3(n,c){1&n&&(e.\u0275\u0275elementStart(0,"div",32)(1,"cds-select",60),e.\u0275\u0275i18nStart(2,23),e.\u0275\u0275element(3,"option",61)(4,"option",62),e.\u0275\u0275i18nEnd(),e.\u0275\u0275elementEnd()())}function i3(n,c){1&n&&(e.\u0275\u0275elementStart(0,"span",42),e.\u0275\u0275i18n(1,25),e.\u0275\u0275elementEnd())}function a3(n,c){if(1&n&&e.\u0275\u0275template(0,i3,2,0,"span",41),2&n){e.\u0275\u0275nextContext(4);const t=e.\u0275\u0275reference(2),o=e.\u0275\u0275nextContext(2);e.\u0275\u0275property("ngIf",o.form.showError("label",t,"required"))}}function s3(n,c){if(1&n){const t=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"div",32)(1,"cds-combo-box",63),e.\u0275\u0275listener("selected",function(i){e.\u0275\u0275restoreView(t);const r=e.\u0275\u0275nextContext(5);return e.\u0275\u0275resetView(r.multiSelector(i,"label"))})("updatedItems",function(i){e.\u0275\u0275restoreView(t);const r=e.\u0275\u0275nextContext().ngIf;return e.\u0275\u0275resetView(r.labels=i)}),e.\u0275\u0275i18nStart(2,24),e.\u0275\u0275element(3,"cds-dropdown-list"),e.\u0275\u0275i18nEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275template(4,a3,1,1,"ng-template",null,4,e.\u0275\u0275templateRefExtractor),e.\u0275\u0275elementEnd()}if(2&n){const t=e.\u0275\u0275reference(5),o=e.\u0275\u0275nextContext().ngIf,i=e.\u0275\u0275nextContext(4);e.\u0275\u0275advance(),e.\u0275\u0275property("appendInline",!0)("items",o.labels)("invalid",i.form.controls.label.invalid&&i.form.controls.label.dirty)("invalidText",t)}}function r3(n,c){if(1&n){const t=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"div",32)(1,"cds-combo-box",64),e.\u0275\u0275listener("selected",function(i){e.\u0275\u0275restoreView(t);const r=e.\u0275\u0275nextContext(5);return e.\u0275\u0275resetView(r.multiSelector(i,"hosts"))}),e.\u0275\u0275i18nStart(2,26),e.\u0275\u0275element(3,"cds-dropdown-list"),e.\u0275\u0275i18nEnd(),e.\u0275\u0275elementEnd()()}if(2&n){const t=e.\u0275\u0275nextContext().ngIf;e.\u0275\u0275advance(),e.\u0275\u0275property("appendInline",!0)("items",t.hosts)}}function l3(n,c){if(1&n&&(e.\u0275\u0275elementContainerStart(0),e.\u0275\u0275template(1,s3,6,4,"div",37)(2,r3,4,2,"div",37),e.\u0275\u0275elementContainerEnd()),2&n){const t=e.\u0275\u0275nextContext(4);e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf","label"===t.form.controls.placement.value&&!t.editing),e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf","hosts"===t.form.controls.placement.value&&!t.editing)}}function _3(n,c){if(1&n&&(e.\u0275\u0275elementContainerStart(0),e.\u0275\u0275template(1,o3,5,0,"div",37)(2,l3,3,2,"ng-container",33),e.\u0275\u0275pipe(3,"async"),e.\u0275\u0275elementContainerEnd()),2&n){const t=e.\u0275\u0275nextContext(3);e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf",!t.editing),e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf",e.\u0275\u0275pipeBind1(3,2,t.hostsAndLabels$))}}function c3(n,c){if(1&n){const t=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementContainerStart(0),e.\u0275\u0275elementStart(1,"form",30,0)(4,"div",31),e.\u0275\u0275i18n(5,5),e.\u0275\u0275pipe(6,"titlecase"),e.\u0275\u0275pipe(7,"upperFirst"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(8,"div",32),e.\u0275\u0275template(9,Dv,2,1,"ng-container",33)(10,yv,5,6,"cd-alert-panel",34),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(11,"div",32)(12,"cds-text-label",35),e.\u0275\u0275i18nStart(13,6),e.\u0275\u0275element(14,"input",36),e.\u0275\u0275i18nEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275template(15,xv,2,2,"ng-template",null,1,e.\u0275\u0275templateRefExtractor),e.\u0275\u0275elementEnd(),e.\u0275\u0275template(17,wv,5,1,"div",37)(18,Wv,5,2,"div",37)(19,n3,5,2,"div",37)(20,_3,4,4,"ng-container",33),e.\u0275\u0275elementStart(21,"cd-form-button-panel",38),e.\u0275\u0275pipe(22,"titlecase"),e.\u0275\u0275pipe(23,"upperFirst"),e.\u0275\u0275listener("submitActionEvent",function(){e.\u0275\u0275restoreView(t);const i=e.\u0275\u0275nextContext(2);return e.\u0275\u0275resetView(i.submit())}),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementContainerEnd()}if(2&n){let t,o;const i=e.\u0275\u0275reference(3),r=e.\u0275\u0275reference(16),p=e.\u0275\u0275nextContext().ngIf,F=e.\u0275\u0275nextContext();e.\u0275\u0275advance(),e.\u0275\u0275property("formGroup",F.form),e.\u0275\u0275advance(6),e.\u0275\u0275i18nExp(e.\u0275\u0275pipeBind1(6,15,F.action))(e.\u0275\u0275pipeBind1(7,17,F.resource)),e.\u0275\u0275i18nApply(5),e.\u0275\u0275advance(2),e.\u0275\u0275property("ngIf",!p.available),e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf",F.editing&&F.disableRename),e.\u0275\u0275advance(2),e.\u0275\u0275property("invalid",!F.form.controls.name.valid&&F.form.controls.name.dirty)("invalidText",r),e.\u0275\u0275advance(2),e.\u0275\u0275property("invalid",!F.form.controls.name.valid&&F.form.controls.name.dirty),e.\u0275\u0275advance(3),e.\u0275\u0275property("ngIf",!F.editing),e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf",(null==(t=F.form.get("customPools"))?null:t.value)||F.editing),e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf",(null==(o=F.form.get("customPools"))?null:o.value)||F.editing),e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf",p.available),e.\u0275\u0275advance(),e.\u0275\u0275property("form",i)("submitText",e.\u0275\u0275pipeBind1(22,19,F.action)+" "+e.\u0275\u0275pipeBind1(23,21,F.resource))("disabled",!!F.editing&&F.disableRename)}}function d3(n,c){if(1&n&&(e.\u0275\u0275elementStart(0,"div",28),e.\u0275\u0275template(1,c3,24,23,"ng-container",29),e.\u0275\u0275elementEnd()),2&n){const t=e.\u0275\u0275nextContext();e.\u0275\u0275property("columnNumbers",e.\u0275\u0275pureFunction0(2,Iv)),e.\u0275\u0275advance(),e.\u0275\u0275property("cdFormLoading",t.loading)}}let Qs=(()=>{class n extends Te.g{constructor(t,o,i,r,p,F,D,x,H){super(),this.router=t,this.taskWrapperService=o,this.orchService=i,this.formBuilder=r,this.actionLabels=p,this.hostService=F,this.cephfsService=D,this.route=x,this.poolService=H,this.labelFocus=new K.Subject,this.labelClick=new K.Subject,this.icons=g.FI,this.disableRename=!0,this.pools=[],this.dataPools=[],this.metadatPools=[],this.selectedLabels=[],this.selectedHosts=[],this.editing=this.router.url.startsWith(`/cephfs/fs/${f.Qp.EDIT}`),this.action=this.editing?this.actionLabels.EDIT:this.actionLabels.CREATE,this.resource=$localize`File System`,this.createForm()}createForm(){this.form=this.formBuilder.group({name:new T.FormControl("",{validators:[T.Validators.pattern(/^(?:[.][A-Za-z0-9_-]+|[A-Za-z][.A-Za-z0-9_-]*)$/),T.Validators.required]}),placement:[""],hosts:[[]],label:[null,[ge.xQ.requiredIf({placement:"label",unmanaged:!1})]],unmanaged:[!1],customPools:[!1],dataPool:[null,ge.xQ.requiredIf({customPools:!0})],metadataPool:[null,ge.xQ.requiredIf({customPools:!0})]}),this.orchService.status().subscribe(t=>{this.hasOrchestrator=t.available,this.form.get("placement").setValue(this.hasOrchestrator?"hosts":"")})}ngOnInit(){this.editing?(this.route.params.subscribe(t=>{this.fsId=Number(t.id)}),this.cephfsService.getCephfs(this.fsId).subscribe(t=>{this.currentVolumeName=t.cephfs.name,this.form.get("name").setValue(this.currentVolumeName);const o=t.cephfs.pools.find(r=>"data"===r.type)?.pool||"",i=t.cephfs.pools.find(r=>"metadata"===r.type)?.pool||"";this.form.get("dataPool").setValue(o),this.form.get("metadataPool").setValue(i),this.form.get("dataPool").disable(),this.form.get("metadataPool").disable(),this.disableRename=!(!t.cephfs.flags.joinable&&t.cephfs.flags.refuse_client_session),this.disableRename&&(this.form.get("name").disable(),this.fsFailCmd=`ceph fs fail ${this.currentVolumeName}`,this.fsSetCmd=`ceph fs set ${this.currentVolumeName} refuse_client_session true`)})):((0,K.forkJoin)({usedPools:this.cephfsService.getUsedPools(),pools:this.poolService.getList()}).subscribe(({usedPools:t,pools:o})=>{const i=Object.values(o).filter(r=>this.cephfsService.isCephFsPool(r)&&!t.includes(r.pool)&&"erasure"!==r.type&&0===r.stats.bytes_used.latest);i.length<2&&this.form.get("customPools").disable(),this.pools=i,this.metadatPools=this.dataPools=this.pools}),this.hostsAndLabels$=(0,K.forkJoin)({hosts:this.hostService.getAllHosts(),labels:this.hostService.getLabels()}).pipe((0,u.map)(({hosts:t,labels:o})=>({hosts:t.map(i=>({content:i.hostname})),labels:o.map(i=>({content:i}))})))),this.orchStatus$=this.orchService.status(),this.loadingReady()}onPoolChange(t,o=!1){o?this.dataPools=this.pools.filter(i=>i.pool_name!==t):this.metadatPools=this.pools.filter(i=>i.pool_name!=t)}multiSelector(t,o){"label"===o?this.selectedLabels=t.map(i=>i.content):this.selectedHosts=t.map(i=>i.content)}submit(){const t=this.form.get("name").value,o="cephfs";if(this.editing)this.taskWrapperService.wrapTaskAroundCall({task:new ie.O(`${o}/${f.Qp.EDIT}`,{volumeName:t}),call:this.cephfsService.rename(this.currentVolumeName,t)}).subscribe({error:()=>{this.form.setErrors({cdSubmitButton:!0})},complete:()=>{this.router.navigate([`${o}/fs`])}});else{let i=this.form.getRawValue();const r={placement:{},unmanaged:i.unmanaged};switch(i.placement){case"hosts":i.hosts.length>0&&(r.placement.hosts=this.selectedHosts);break;case"label":r.placement.label=this.selectedLabels}const p=i.dataPool,F=i.metadataPool,D=this;this.taskWrapperService.wrapTaskAroundCall({task:new ie.O(`${o}/${f.Qp.CREATE}`,{volumeName:t}),call:this.cephfsService.create(this.form.get("name").value,r,p,F)}).subscribe({error(){D.form.setErrors({cdSubmitButton:!0})},complete:()=>{this.router.navigate([`${o}/fs`])}})}}static{this.\u0275fac=function(o){return new(o||n)(e.\u0275\u0275directiveInject(m.Router),e.\u0275\u0275directiveInject(w.a),e.\u0275\u0275directiveInject(tn.K),e.\u0275\u0275directiveInject(At.$),e.\u0275\u0275directiveInject(f.Ss),e.\u0275\u0275directiveInject(Vt.I),e.\u0275\u0275directiveInject(N),e.\u0275\u0275directiveInject(m.ActivatedRoute),e.\u0275\u0275directiveInject(os.m))}}static{this.\u0275cmp=e.\u0275\u0275defineComponent({type:n,selectors:[["cd-cephfs-form"]],viewQuery:function(o,i){if(1&o&&(e.\u0275\u0275viewQuery(Ov,5),e.\u0275\u0275viewQuery(Pv,5),e.\u0275\u0275viewQuery(bv,5),e.\u0275\u0275viewQuery(Nv,5),e.\u0275\u0275viewQuery(V.NgbTypeahead,5)),2&o){let r;e.\u0275\u0275queryRefresh(r=e.\u0275\u0275loadQuery())&&(i.crushInfoTabs=r.first),e.\u0275\u0275queryRefresh(r=e.\u0275\u0275loadQuery())&&(i.crushDeletionBtn=r.first),e.\u0275\u0275queryRefresh(r=e.\u0275\u0275loadQuery())&&(i.ecpInfoTabs=r.first),e.\u0275\u0275queryRefresh(r=e.\u0275\u0275loadQuery())&&(i.ecpDeletionBtn=r.first),e.\u0275\u0275queryRefresh(r=e.\u0275\u0275loadQuery())&&(i.typeahead=r.first)}},features:[e.\u0275\u0275InheritDefinitionFeature],decls:2,vars:3,consts:()=>{let t,o,i,r,p,F,D,x,H,X,Z,re,pe,be,Pe,he,Ue,ve,Xe,_t,ft,we,qe,Rt,Ot;return t=$localize`:␟2fecea01ce1d44114ee45144eff6d47a5016a74f␟5451140586403689891:Name...`,o=$localize`:form title|Example\: Create Volume@@formTitle␟f1553045110d959c485a73c7f40f26fcc28b975b␟6476422032353420938:${"\ufffd0\ufffd"}:INTERPOLATION: ${"\ufffd1\ufffd"}:INTERPOLATION_1:`,i=$localize`:␟da6954d55a46943dd77159d65e5b81f51b0e3acb␟271472573961202879:Name ${"\ufffd#14\ufffd\ufffd/#14\ufffd"}:TAG_INPUT:`,r=$localize`:␟e53642c64b30a139b0100cdaeb916dfa99c5121b␟1064985665190199138:Orchestrator is not configured. Deploy MDS daemons manually after creating the volume.`,p=$localize`:␟fb61f2a15ac0cdecf43e11e2853017610b3537fa␟1785718670960871621:${"\ufffd#2\ufffd"}:START_PARAGRAPH:The File System can only be renamed if it is shutdown and \`refuse_client_session\` is set to true. Follow the steps below in the command line and refresh the page:${"\ufffd/#2\ufffd"}:CLOSE_PARAGRAPH:${"\ufffd#3\ufffd"}:START_TAG_CD_CODE_BLOCK:${"[\ufffd/#3\ufffd|\ufffd/#4\ufffd]"}:CLOSE_TAG_CD_CODE_BLOCK:${"\ufffd#4\ufffd"}:START_TAG_CD_CODE_BLOCK_1:${"[\ufffd/#3\ufffd|\ufffd/#4\ufffd]"}:CLOSE_TAG_CD_CODE_BLOCK:`,p=e.\u0275\u0275i18nPostprocess(p),F=$localize`:␟4aa19de2a2b54cbda39e9c62917b23044c087776␟751124305869330542:This field is required!`,D=$localize`:␟a89b4773ed0b7b46e8d6253688fc169450b689e4␟7748633494745704752:File System name should start with a letter or dot (.) and can only contain letters, numbers, '.', '-' or '_'`,x=$localize`:␟40a5ef8917223147d80b277c2e3b4ef70c0914b8␟8012972623161649488:Use existing pools ${"\ufffd#3\ufffd"}:START_TAG_CD_HELP_TEXT:Allows you to use replicated pools with 'cephfs' application tag that are already created.${"\ufffd/#3\ufffd"}:CLOSE_TAG_CD_HELP_TEXT:`,H=$localize`:␟f07197b7fb00b2ab1ecb96abe2a06da1c9ab39ae␟7510516771678077309: You need to have atleast 2 pools that are empty, applied with cephfs label and not erasure-coded. `,X=$localize`:␟1e46c0cc719c40bc5259bca930727f148baeae6a␟1442960771726995940:Data pool ${"\ufffd#2\ufffd\ufffd/#2\ufffd"}:TAG_INPUT:`,Z=$localize`:␟94516fa213706c67ce5a5b5765681d7fb032033a␟3894950702316166331:Loading...`,re=$localize`:␟10a3ac903c294af036af44c4c6c42aa38b67ad9c␟1099705632275022801:-- No cephfs pools available --`,pe=$localize`:␟ef83ec9c304a89d45650e580dcdc2978c37b3a83␟7859304693598053124:-- Select a pool --`,be=$localize`:␟4aa19de2a2b54cbda39e9c62917b23044c087776␟751124305869330542:This field is required!`,Pe=$localize`:␟23605a50eb40cbd0acbbfbb0d2a90ef59f83ce68␟1967847259239645404:Metadata pool ${"\ufffd#2\ufffd\ufffd/#2\ufffd"}:TAG_INPUT:`,he=$localize`:␟94516fa213706c67ce5a5b5765681d7fb032033a␟3894950702316166331:Loading...`,Ue=$localize`:␟10a3ac903c294af036af44c4c6c42aa38b67ad9c␟1099705632275022801:-- No cephfs pools available --`,ve=$localize`:␟ef83ec9c304a89d45650e580dcdc2978c37b3a83␟7859304693598053124:-- Select a pool --`,Xe=$localize`:␟4aa19de2a2b54cbda39e9c62917b23044c087776␟751124305869330542:This field is required!`,_t=$localize`:␟437a96bebd51cf4113f3ef22cfc37c10ed622a41␟1330247170077883594:${"\ufffd#3\ufffd"}:START_TAG_OPTION:Hosts${"[\ufffd/#3\ufffd|\ufffd/#4\ufffd]"}:CLOSE_TAG_OPTION:${"\ufffd#4\ufffd"}:START_TAG_OPTION_1:Labels${"[\ufffd/#3\ufffd|\ufffd/#4\ufffd]"}:CLOSE_TAG_OPTION:`,_t=e.\u0275\u0275i18nPostprocess(_t),ft=$localize`:␟3d9607d23bb1ab0f64c3fc1135e097f8245b4035␟122880915385959769:Select labels...`,we=$localize`:␟564b4b8f89f519d273ecfb74464f4d798d939d43␟5443197147973612827:${"\ufffd#3\ufffd"}:START_TAG_CDS_DROPDOWN_LIST:${"\ufffd/#3\ufffd"}:CLOSE_TAG_CDS_DROPDOWN_LIST:`,qe=$localize`:␟7cbdabcece469fab89cfa687ab152bca18b97498␟1417693714872528491:This field is required.`,Rt=$localize`:␟4501e9c3311db8dcacc36b5402e666bbb2b6a7ac␟93017366433182313:Select hosts...`,Ot=$localize`:␟564b4b8f89f519d273ecfb74464f4d798d939d43␟5443197147973612827:${"\ufffd#3\ufffd"}:START_TAG_CDS_DROPDOWN_LIST:${"\ufffd/#3\ufffd"}:CLOSE_TAG_CDS_DROPDOWN_LIST:`,[["frm","ngForm","formDir","ngForm"],["nameError",""],["dataPoolError",""],["metadataPoolError",""],["labelError",""],o,i,r,p,F,D,x,H,X,Z,re,pe,be,Pe,he,Ue,ve,Xe,_t,we,qe,Ot,["cdsCol","",3,"columnNumbers",4,"ngIf"],["cdsCol","",3,"columnNumbers"],[4,"cdFormLoading"],["novalidate","",3,"formGroup"],[1,"form-header"],[1,"form-item"],[4,"ngIf"],["type","info","spacingClass","mb-2",4,"ngIf"],["for","name","cdRequiredField","Name",3,"invalid","invalidText"],["cdsText","","placeholder",t,"id","name","name","name","formControlName","name","autofocus","",3,"invalid"],["class","form-item",4,"ngIf"],["wrappingClass","text-right",3,"submitActionEvent","form","submitText","disabled"],["type","info","spacingClass","mb-2"],[3,"codes"],["class","invalid-feedback",4,"ngIf"],[1,"invalid-feedback"],["id","customPools","name","customPools","formControlName","customPools"],["type","info","spacingClass","mt-1",4,"ngIf"],["type","info","spacingClass","mt-1"],["for","dataPool",4,"ngIf"],["label","Data pool","for","dataPool","name","dataPool","id","dataPool","formControlName","dataPool","cdRequiredField","Data pool",3,"invalid","invalidText","valueChange",4,"ngIf"],["for","dataPool"],["cdsText","","type","text","placeholder","Pool name...","id","dataPool","name","dataPool","formControlName","dataPool"],["label","Data pool","for","dataPool","name","dataPool","id","dataPool","formControlName","dataPool","cdRequiredField","Data pool",3,"valueChange","invalid","invalidText"],[3,"ngValue",4,"ngIf"],[3,"value",4,"ngFor","ngForOf"],[3,"ngValue"],[3,"value"],["for","metadataPool",4,"ngIf"],["label","Metadata pool","for","metadataPool","name","metadataPool","id","metadataPool","formControlName","metadataPool","cdRequiredField","Metadata pool",3,"invalid","invalidText","valueChange",4,"ngIf"],["for","metadataPool"],["cdsText","","type","text","placeholder","Pool name...","id","metadataPool","name","metadataPool","formControlName","metadataPool"],["label","Metadata pool","for","metadataPool","name","metadataPool","id","metadataPool","formControlName","metadataPool","cdRequiredField","Metadata pool",3,"valueChange","invalid","invalidText"],["label","Placement","for","placement","formControlName","placement","name","placement","id","placement"],["value","hosts"],["value","label"],["type","multi","selectionFeedback","top-after-reopen","label","Label","for","label","name","label","formControlName","label","id","label","placeholder",ft,"cdRequiredField","Label","cdDynamicInputCombobox","",3,"selected","updatedItems","appendInline","items","invalid","invalidText"],["type","multi","selectionFeedback","top-after-reopen","label","Hosts","for","hosts","name","hosts","formControlName","hosts","id","hosts","placeholder",Rt,3,"selected","appendInline","items"]]},template:function(o,i){1&o&&(e.\u0275\u0275template(0,d3,2,3,"div",27),e.\u0275\u0275pipe(1,"async")),2&o&&e.\u0275\u0275property("ngIf",e.\u0275\u0275pipeBind1(1,1,i.orchStatus$))},dependencies:[l.NgForOf,l.NgIf,it.m,Q.e,te,Ye.O,ct.B,rt.G,De.S,ze.E,Et.P,fs.k,T.\u0275NgNoValidate,T.NgSelectOption,T.\u0275NgSelectMultipleOption,T.DefaultValueAccessor,T.NgControlStatus,T.NgControlStatusGroup,T.FormGroupDirective,T.FormControlName,L.ColumnDirective,L.TextInputLabelComponent,L.TextInput,L.Checkbox,L.Select,L.Option,L.DropdownList,L.ComboBox,l.AsyncPipe,l.TitleCasePipe,Oe.r]})}}return n})();var u3=s(55989);function p3(n,c){if(1&n){const t=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"button",14),e.\u0275\u0275listener("click",function(){e.\u0275\u0275restoreView(t);const i=e.\u0275\u0275nextContext(2);return e.\u0275\u0275resetView(i.pauseUpgrade())}),e.\u0275\u0275i18n(1,2),e.\u0275\u0275elementEnd()}}function m3(n,c){if(1&n){const t=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"button",15),e.\u0275\u0275listener("click",function(){e.\u0275\u0275restoreView(t);const i=e.\u0275\u0275nextContext(2);return e.\u0275\u0275resetView(i.resumeUpgrade())}),e.\u0275\u0275i18n(1,3),e.\u0275\u0275elementEnd()}}function f3(n,c){if(1&n){const t=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"button",16),e.\u0275\u0275listener("click",function(){e.\u0275\u0275restoreView(t);const i=e.\u0275\u0275nextContext(2);return e.\u0275\u0275resetView(i.stopUpgradeModal())}),e.\u0275\u0275i18n(1,4),e.\u0275\u0275elementEnd()}}function E3(n,c){if(1&n&&(e.\u0275\u0275elementStart(0,"div"),e.\u0275\u0275elementContainerStart(1),e.\u0275\u0275element(2,"cd-progress",8),e.\u0275\u0275elementStart(3,"div",9)(4,"button",10),e.\u0275\u0275i18n(5,1),e.\u0275\u0275elementEnd(),e.\u0275\u0275template(6,p3,2,0,"button",11)(7,m3,2,0,"button",12)(8,f3,2,0,"button",13),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementContainerEnd(),e.\u0275\u0275elementEnd()),2&n){const t=c.ngIf,o=e.\u0275\u0275nextContext();e.\u0275\u0275advance(2),e.\u0275\u0275property("value",null==o.executingTask?null:o.executingTask.progress)("label",null==o.executingTask?null:o.executingTask.description)("status",t.in_progress?"in-progress":"paused")("subLabel",t.which)("completedItems",t.services_complete)("actionName","upgrading")("helperText",t.progress)("footerText",t.message)("isPaused",t.is_paused),e.\u0275\u0275advance(4),e.\u0275\u0275property("ngIf",t.in_progress&&!t.is_paused),e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf",t.in_progress&&t.is_paused),e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf",t.in_progress)}}let g3=(()=>{class n{constructor(t,o,i,r,p,F,D){this.authStorageService=t,this.upgradeService=o,this.notificationService=i,this.modalService=r,this.summaryService=p,this.router=F,this.refreshIntervalService=D,this.icons=g.FI,this.interval=new K.Subscription,this.subject=new K.ReplaySubject,this.permission=this.authStorageService.getPermissions().configOpt}ngOnInit(){this.upgradeStatus$=this.subject.pipe((0,u.switchMap)(()=>this.upgradeService.status()),(0,u.tap)(t=>{t.in_progress||this.router.navigate(["/upgrade"])}),(0,u.shareReplay)(1)),this.interval=this.refreshIntervalService.intervalData$.subscribe(()=>{this.fetchStatus()}),this.summaryService.subscribe(t=>{this.executingTask=t.executing_tasks.filter(o=>o.name.includes("progress/Upgrade"))[0]})}pauseUpgrade(){this.upgradeService.pause().subscribe({error:t=>{this.notificationService.show(Le._.error,$localize`Failed to pause the upgrade`,t)},complete:()=>{this.notificationService.show(Le._.success,$localize`The upgrade is paused`),this.fetchStatus()}})}fetchStatus(){this.subject.next()}resumeUpgrade(t=!1){this.upgradeService.resume().subscribe({error:o=>{this.notificationService.show(Le._.error,$localize`Failed to resume the upgrade`,o)},complete:()=>{this.fetchStatus(),this.notificationService.show(Le._.success,$localize`Upgrade is resumed`),t&&this.modalRef.close()}})}stopUpgradeModal(){this.pauseUpgrade(),this.modalRef=this.modalService.show(P.D,{itemDescription:"Upgrade",actionDescription:"stop",submitAction:()=>this.stopUpgrade(),callBackAtionObservable:()=>this.resumeUpgrade(!0)})}stopUpgrade(){this.modalRef.close(),this.upgradeService.stop().subscribe({error:t=>{this.notificationService.show(Le._.error,$localize`Failed to stop the upgrade`,t)},complete:()=>{this.notificationService.show(Le._.success,$localize`The upgrade is stopped`),this.router.navigate(["/upgrade"])}})}ngOnDestroy(){this.interval?.unsubscribe()}static{this.\u0275fac=function(o){return new(o||n)(e.\u0275\u0275directiveInject(_.v),e.\u0275\u0275directiveInject(Ki),e.\u0275\u0275directiveInject(Y.J),e.\u0275\u0275directiveInject(Ge.V),e.\u0275\u0275directiveInject(on.E),e.\u0275\u0275directiveInject(m.Router),e.\u0275\u0275directiveInject(xo.s))}}static{this.\u0275cmp=e.\u0275\u0275defineComponent({type:n,selectors:[["cd-upgrade-progress"]],decls:5,vars:9,consts:()=>{let t,o,i,r,p;return t=$localize`:␟4e8589665654cf937f709b9959bf5f2d3877e0be␟7721207555072740710:Cluster logs`,o=$localize`:␟cda31dbd724cf5f4fa7a4274d9120651490c8a8c␟8890553633144307762:Back`,i=$localize`:␟b2838c6165a9672a17db188f4dd9676574353dd8␟9042260521669277115:Pause`,r=$localize`:␟4cd979821c89535df23df1c8ac8f260673610d90␟7182974689040833178:Resume`,p=$localize`:␟1d0d5c9a36e72bd9643ff1ede69736ae063d652b␟3133539296286953705:Stop`,[t,o,i,r,p,[4,"ngIf"],[1,"cd-header"],["defaultTab","cluster-logs",3,"showAuditLogs","showDaemonLogs","showNavLinks","showFilterTools","showDownloadCopyButton","scrollable"],[3,"value","label","status","subLabel","completedItems","actionName","helperText","footerText","isPaused"],[1,"text-center","mt-3"],["aria-label","Go back","routerLink","/upgrade",1,"btn","btn-light"],["class","btn btn-light m-2","aria-label","Pause Upgrade",3,"click",4,"ngIf"],["class","btn btn-light m-2","aria-label","Resume Upgrade",3,"click",4,"ngIf"],["class","btn btn-danger","aria-label","Stop Upgrade",3,"click",4,"ngIf"],["aria-label","Pause Upgrade",1,"btn","btn-light","m-2",3,"click"],["aria-label","Resume Upgrade",1,"btn","btn-light","m-2",3,"click"],["aria-label","Stop Upgrade",1,"btn","btn-danger",3,"click"]]},template:function(o,i){1&o&&(e.\u0275\u0275template(0,E3,9,12,"div",5),e.\u0275\u0275pipe(1,"async"),e.\u0275\u0275elementStart(2,"legend",6),e.\u0275\u0275i18n(3,0),e.\u0275\u0275elementEnd(),e.\u0275\u0275element(4,"cd-logs",7)),2&o&&(e.\u0275\u0275property("ngIf",e.\u0275\u0275pipeBind1(1,7,i.upgradeStatus$)),e.\u0275\u0275advance(4),e.\u0275\u0275property("showAuditLogs",!1)("showDaemonLogs",!1)("showNavLinks",!1)("showFilterTools",!1)("showDownloadCopyButton",!1)("scrollable",!0))},dependencies:[l.NgIf,u3.X,De.S,m.RouterLink,ha,l.AsyncPipe]})}}return n})();function C3(n,c){if(1&n&&(e.\u0275\u0275elementStart(0,"cd-alert-panel",44),e.\u0275\u0275i18n(1,5),e.\u0275\u0275elementEnd()),2&n){const t=e.\u0275\u0275nextContext();e.\u0275\u0275advance(),e.\u0275\u0275i18nExp(t.connectionMessage),e.\u0275\u0275i18nApply(1)}}function S3(n,c){if(1&n&&(e.\u0275\u0275elementStart(0,"cd-alert-panel",45),e.\u0275\u0275i18n(1,6),e.\u0275\u0275elementEnd()),2&n){const t=e.\u0275\u0275nextContext();e.\u0275\u0275advance(),e.\u0275\u0275i18nExp(t.connectionMessage),e.\u0275\u0275i18nApply(1)}}function h3(n,c){1&n&&(e.\u0275\u0275elementStart(0,"span",46),e.\u0275\u0275i18n(1,7),e.\u0275\u0275elementEnd())}function T3(n,c){1&n&&(e.\u0275\u0275elementStart(0,"span",46),e.\u0275\u0275i18n(1,8),e.\u0275\u0275elementEnd())}function F3(n,c){1&n&&(e.\u0275\u0275elementStart(0,"span",46),e.\u0275\u0275i18n(1,9),e.\u0275\u0275elementEnd())}function v3(n,c){1&n&&(e.\u0275\u0275elementStart(0,"span",46),e.\u0275\u0275i18n(1,10),e.\u0275\u0275elementEnd())}function M3(n,c){1&n&&(e.\u0275\u0275elementStart(0,"span",46),e.\u0275\u0275i18n(1,11),e.\u0275\u0275elementEnd())}function R3(n,c){1&n&&(e.\u0275\u0275elementStart(0,"span",46),e.\u0275\u0275i18n(1,13),e.\u0275\u0275elementEnd())}function O3(n,c){1&n&&(e.\u0275\u0275elementStart(0,"span",46),e.\u0275\u0275i18n(1,14),e.\u0275\u0275elementEnd())}function P3(n,c){if(1&n&&(e.\u0275\u0275elementStart(0,"div",29)(1,"label",47),e.\u0275\u0275i18n(2,12),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(3,"div",32),e.\u0275\u0275element(4,"input",48),e.\u0275\u0275template(5,R3,2,0,"span",34)(6,O3,2,0,"span",34),e.\u0275\u0275elementEnd()()),2&n){const t=e.\u0275\u0275nextContext(),o=e.\u0275\u0275reference(6);e.\u0275\u0275advance(5),e.\u0275\u0275property("ngIf",t.remoteClusterForm.showError("username",o,"required")),e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf",t.remoteClusterForm.showError("username",o,"uniqueUrlandUser"))}}function b3(n,c){1&n&&(e.\u0275\u0275elementStart(0,"span",46),e.\u0275\u0275i18n(1,16),e.\u0275\u0275elementEnd())}function N3(n,c){if(1&n&&(e.\u0275\u0275elementStart(0,"div",29)(1,"label",49),e.\u0275\u0275i18n(2,15),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(3,"div",32)(4,"div",50),e.\u0275\u0275element(5,"input",51),e.\u0275\u0275elementStart(6,"span",52),e.\u0275\u0275element(7,"button",53)(8,"cd-copy-2-clipboard-button",54),e.\u0275\u0275elementEnd(),e.\u0275\u0275template(9,b3,2,0,"span",34),e.\u0275\u0275elementEnd()()()),2&n){const t=e.\u0275\u0275nextContext(),o=e.\u0275\u0275reference(6);e.\u0275\u0275advance(9),e.\u0275\u0275property("ngIf",t.remoteClusterForm.showError("password",o,"requiredNotEdit"))}}function I3(n,c){1&n&&(e.\u0275\u0275elementStart(0,"div",29)(1,"label",55),e.\u0275\u0275i18n(2,17),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(3,"div",32)(4,"select",56)(5,"option",57),e.\u0275\u0275text(6,"1 day"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(7,"option",58),e.\u0275\u0275text(8,"1 week"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(9,"option",59),e.\u0275\u0275text(10,"15 days"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(11,"option",60),e.\u0275\u0275text(12,"30 days"),e.\u0275\u0275elementEnd()()()()),2&n&&(e.\u0275\u0275advance(9),e.\u0275\u0275property("selected",!0))}function A3(n,c){1&n&&(e.\u0275\u0275elementStart(0,"span",46),e.\u0275\u0275i18n(1,20),e.\u0275\u0275elementEnd())}function D3(n,c){1&n&&(e.\u0275\u0275elementStart(0,"span",46),e.\u0275\u0275i18n(1,21),e.\u0275\u0275elementEnd())}function y3(n,c){if(1&n){const t=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"div",29)(1,"label",61)(2,"span"),e.\u0275\u0275i18n(3,18),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(4,"cd-helper"),e.\u0275\u0275i18n(5,19),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(6,"div",32)(7,"textarea",62),e.\u0275\u0275text(8,"            "),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(9,"input",63),e.\u0275\u0275listener("change",function(i){e.\u0275\u0275restoreView(t);const r=e.\u0275\u0275nextContext();return e.\u0275\u0275resetView(r.fileUpload(i.target.files,"ssl_cert"))}),e.\u0275\u0275elementEnd(),e.\u0275\u0275template(10,A3,2,0,"span",34)(11,D3,2,0,"span",34),e.\u0275\u0275elementEnd()()}if(2&n){const t=e.\u0275\u0275nextContext(),o=e.\u0275\u0275reference(6);e.\u0275\u0275advance(10),e.\u0275\u0275property("ngIf",t.remoteClusterForm.showError("ssl_cert",o,"required")),e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf",t.remoteClusterForm.showError("ssl_cert",o,"pattern"))}}let Ys=(()=>{class n{constructor(t,o,i,r){this.activeModal=t,this.actionLabels=o,this.notificationService=i,this.multiClusterService=r,this.submitAction=new e.EventEmitter,this.endpoints=/^((https?:\/\/)|(www.))(?:([a-zA-Z]+)|(\d+\.\d+.\d+.\d+)):\d{2,5}\/?$/,this.ipv4Rgx=/^((25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\.){3}(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)$/i,this.ipv6Rgx=/^(?:[a-f0-9]{1,4}:){7}[a-f0-9]{1,4}$/i,this.clusterApiUrlCmd="ceph mgr services",this.connectionMessage="",this.subs=new K.Subscription,this.subs.add(this.multiClusterService.subscribe(p=>{this.hubUrl=p.hub_url})),this.createForm()}ngOnInit(){"edit"===this.action&&(this.remoteClusterForm.get("remoteClusterUrl").setValue(this.cluster.url),this.remoteClusterForm.get("clusterAlias").setValue(this.cluster.cluster_alias),this.remoteClusterForm.get("ssl").setValue(this.cluster.ssl_verify),this.remoteClusterForm.get("ssl_cert").setValue(this.cluster.ssl_certificate)),"reconnect"===this.action&&(this.remoteClusterForm.get("remoteClusterUrl").setValue(this.cluster.url),this.remoteClusterForm.get("remoteClusterUrl").disable(),this.remoteClusterForm.get("clusterAlias").setValue(this.cluster.cluster_alias),this.remoteClusterForm.get("clusterAlias").disable(),this.remoteClusterForm.get("username").setValue(this.cluster.user),this.remoteClusterForm.get("username").disable(),this.remoteClusterForm.get("ssl").setValue(this.cluster.ssl_verify),this.remoteClusterForm.get("ssl_cert").setValue(this.cluster.ssl_certificate)),[this.clusterAliasNames,this.clusterUrls,this.clusterUsers]=["cluster_alias","url","user"].map(t=>this.clustersData?.map(o=>o[t]))}createForm(){this.remoteClusterForm=new Se.$({username:new T.FormControl("",[ge.xQ.custom("uniqueUrlandUser",t=>{let o="";return this.remoteClusterForm&&this.remoteClusterForm.getValue("remoteClusterUrl")&&this.remoteClusterForm.getValue("remoteClusterUrl").endsWith("/")?o=this.remoteClusterForm.getValue("remoteClusterUrl").slice(0,-1):this.remoteClusterForm&&(o=this.remoteClusterForm.getValue("remoteClusterUrl")),this.remoteClusterForm&&this.clusterUrls?.includes(o)&&this.clusterUsers?.includes(t)})]),password:new T.FormControl(null,ge.xQ.custom("requiredNotEdit",t=>"edit"!==this.action&&!t)),remoteClusterUrl:new T.FormControl(null,{validators:[ge.xQ.custom("endpoint",t=>!(E().isEmpty(t)||this.endpoints.test(t)||this.ipv4Rgx.test(t)||this.ipv6Rgx.test(t))),ge.xQ.custom("hubUrlCheck",t=>"connect"===this.action&&t?.includes(this.hubUrl)),T.Validators.required]}),clusterAlias:new T.FormControl(null,{validators:[T.Validators.required,ge.xQ.custom("uniqueName",t=>("connect"===this.action||"edit"===this.action)&&this.clusterAliasNames&&-1!==this.clusterAliasNames.indexOf(t)&&this.cluster?.cluster_alias&&this.cluster.cluster_alias!==t)]}),ssl:new T.FormControl(!1),ttl:new T.FormControl(15),ssl_cert:new T.FormControl("",{validators:[ge.xQ.requiredIf({ssl:!0})]})})}ngOnDestroy(){this.subs.unsubscribe()}handleError(t){this.connectionVerified=!1,this.connectionMessage=t.error.detail,this.remoteClusterForm.setErrors({cdSubmitButton:!0}),this.notificationService.show(Le._.error,$localize`Connection to the cluster failed`)}handleSuccess(t){this.notificationService.show(Le._.success,t),this.submitAction.emit(),this.activeModal.close()}convertToHours(t){return 24*t}onSubmit(){const t=this.remoteClusterForm.getValue("remoteClusterUrl"),o=t.endsWith("/")?t.slice(0,-1):t,i=this.remoteClusterForm.getValue("clusterAlias"),r=this.remoteClusterForm.getValue("username"),p=this.remoteClusterForm.getValue("password"),F=this.remoteClusterForm.getValue("ssl"),D=this.convertToHours(this.remoteClusterForm.getValue("ttl")),x=this.remoteClusterForm.getValue("ssl_cert")?.trim(),H={error:X=>this.handleError(X),next:X=>{!0===X&&this.handleSuccess($localize`Cluster connected successfully`)}};switch(this.action){case"edit":this.subs.add(this.multiClusterService.editCluster(this.cluster.name,t,i,this.cluster.user,F,x).subscribe({...H,complete:()=>this.handleSuccess($localize`Cluster updated successfully`)}));break;case"reconnect":this.subs.add(this.multiClusterService.reConnectCluster(o,r,p,F,x,D).subscribe(H));break;case"connect":this.subs.add(this.multiClusterService.addCluster(o,i,r,p,window.location.origin,F,x,D).subscribe(H))}}fileUpload(t,o){const i=t[0],r=new FileReader;r.addEventListener("load",p=>{const F=this.remoteClusterForm.get(o);F.setValue(p.target.result),F.markAsDirty(),F.markAsTouched(),F.updateValueAndValidity()}),r.readAsText(i,"utf8")}static{this.\u0275fac=function(o){return new(o||n)(e.\u0275\u0275directiveInject(V.NgbActiveModal),e.\u0275\u0275directiveInject(f.Ss),e.\u0275\u0275directiveInject(Y.J),e.\u0275\u0275directiveInject(wo.J))}}static{this.\u0275cmp=e.\u0275\u0275defineComponent({type:n,selectors:[["cd-multi-cluster-form"]],outputs:{submitAction:"submitAction"},decls:43,vars:23,consts:()=>{let t,o,i,r,p,F,D,x,H,X,Z,re,pe,be,Pe,he,Ue,ve,Xe,_t,ft;return t=$localize`:form title␟1ea03cf319d475346ce6bbf491eb03ba9760e996␟8834462133037639969:${"\ufffd0\ufffd"}:INTERPOLATION: Cluster `,o=$localize`:␟dfacd7c0191ed3bbcf5e5cd956673321007978d7␟8588754221957390289:Cluster API URL ${"\ufffd#13\ufffd"}:START_TAG_CD_HELPER:${"\ufffd#14\ufffd"}:START_TAG_SPAN:${"\ufffd#15\ufffd"}:START_PARAGRAPH:Enter the Dashboard API URL. You can retrieve it from the CLI with: ${"\ufffd#16\ufffd"}:START_BOLD_TEXT:${"\ufffd0\ufffd"}:INTERPOLATION: ${"\ufffd/#16\ufffd"}:CLOSE_BOLD_TEXT:${"\ufffd#17\ufffd"}:START_TAG_CD_COPY_2_CLIPBOARD_BUTTON:${"\ufffd/#17\ufffd"}:CLOSE_TAG_CD_COPY_2_CLIPBOARD_BUTTON:${"\ufffd/#15\ufffd"}:CLOSE_PARAGRAPH:${"\ufffd/#14\ufffd"}:CLOSE_TAG_SPAN:${"\ufffd/#13\ufffd"}:CLOSE_TAG_CD_HELPER:`,i=$localize`:␟84b332975fecd6be7563ff7d11e34a05ae1f23b2␟3891232920520327881:Alias Name `,r=$localize`:␟e65610b5d940367f1ff6b57772b96e94e35fe202␟3719080555538542367:SSL`,p=$localize`:␟9836134ed990ad29c0798632cdb350f2d1211d09␟1715938483542441972:${"\ufffd0\ufffd"}:INTERPOLATION: `,F=$localize`:␟9836134ed990ad29c0798632cdb350f2d1211d09␟1715938483542441972:${"\ufffd0\ufffd"}:INTERPOLATION: `,D=$localize`:␟6677a284506dcf6201fed26a6ed02b2915c14c40␟7131096244859777088:This field is required. `,x=$localize`:␟160cb2dcb9904d11743c6d87c9eb72fec656047d␟824879346706243653:Please enter a valid URL. `,H=$localize`:␟97fe5b33080997fa06d317249ac32ec2f58cb97a␟4272439137134621695:The hub cluster cannot be connected. `,X=$localize`:␟6677a284506dcf6201fed26a6ed02b2915c14c40␟7131096244859777088:This field is required. `,Z=$localize`:␟3a68502ac202deaffdccb0f88f27c8deac4f5792␟7369837024638725477:The chosen alias name is already in use. `,re=$localize`:␟7bbc67d3539b7da78ed194f3c54bb78630481131␟2159977639883146258:Username `,pe=$localize`:␟6677a284506dcf6201fed26a6ed02b2915c14c40␟7131096244859777088:This field is required. `,be=$localize`:␟a866ec9028a3d4e9a345bced7702cce40294e808␟930416690021658775:A cluster with the chosen user is already connected. `,Pe=$localize`:␟225140c22f6ece1fccfad6d72cd06c69ef59ff18␟2419566667443718905:Password `,he=$localize`:␟d63091c3831d4fa7ed9740ed11c8de71569b4b42␟5519798962638785377:This field is required. `,Ue=$localize`:␟648e5d718d53d138d405a05c654235869bca5ada␟4068999398559359504:Login Expiration`,ve=$localize`:␟9e37e0d06148c7708e88b4a1eb412babbe1a4afc␟7164856686778871055:Certificate`,Xe=$localize`:␟295ae4f632322098deca8a3ddfbc7aeaabb5423b␟2542310435779389885:The SSL certificate in PEM format.`,_t=$localize`:␟7cbdabcece469fab89cfa687ab152bca18b97498␟1417693714872528491:This field is required.`,ft=$localize`:␟464272c069fe56f6c50f41f426a25b2a42c95ba5␟1254586342390366472:Invalid SSL certificate.`,[["frm","ngForm"],t,o,i,r,p,F,D,x,H,X,Z,re,pe,be,Pe,he,Ue,ve,Xe,_t,ft,[3,"modalRef"],[1,"modal-title"],[1,"modal-content"],["name","remoteClusterForm",3,"formGroup"],[1,"modal-body"],["type","error","spacingClass","mb-3",4,"ngIf"],["type","success","spacingClass","mb-3",4,"ngIf"],[1,"form-group","row"],["for","remoteClusterUrl",1,"cd-col-form-label","required"],[3,"source","byId"],[1,"cd-col-form-input"],["type","text","placeholder","https://localhost:4202","id","remoteClusterUrl","name","remoteClusterUrl","formControlName","remoteClusterUrl",1,"form-control"],["class","invalid-feedback",4,"ngIf"],["for","clusterAlias",1,"cd-col-form-label","required"],["id","clusterAlias","name","clusterAlias","type","text","placeholder","Name/Text to uniquely identify cluster","formControlName","clusterAlias",1,"form-control"],["class","form-group row",4,"ngIf"],[1,"cd-col-form-offset"],[1,"custom-control","custom-checkbox"],["id","ssl","type","checkbox","formControlName","ssl",1,"custom-control-input"],["for","ssl",1,"custom-control-label"],[1,"modal-footer"],[3,"submitActionEvent","submitText","form"],["type","error","spacingClass","mb-3"],["type","success","spacingClass","mb-3"],[1,"invalid-feedback"],["for","username",1,"cd-col-form-label","required"],["id","username","name","username","type","text","formControlName","username",1,"form-control"],["for","password",1,"cd-col-form-label","required"],[1,"input-group"],["id","password","name","password","type","password","formControlName","password",1,"form-control"],[1,"input-group-button"],["type","button","cdPasswordButton","password",1,"btn","btn-light"],["source","password"],["for","ttl",1,"cd-col-form-label"],["id","ttl","formControlName","ttl","name","ttl",1,"form-select"],["value","1"],["value","7"],["value","15",3,"selected"],["value","30"],["for","ssl_cert",1,"cd-col-form-label"],["id","ssl_cert","formControlName","ssl_cert","rows","5",1,"form-control","resize-vertical","text-monospace","text-pre"],["type","file",3,"change"]]},template:function(o,i){if(1&o){const r=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"cd-modal",22),e.\u0275\u0275elementContainerStart(1,23),e.\u0275\u0275i18n(2,1),e.\u0275\u0275pipe(3,"titlecase"),e.\u0275\u0275elementContainerEnd(),e.\u0275\u0275elementContainerStart(4,24),e.\u0275\u0275elementStart(5,"form",25,0)(7,"div",26),e.\u0275\u0275template(8,C3,2,1,"cd-alert-panel",27)(9,S3,2,1,"cd-alert-panel",28),e.\u0275\u0275elementStart(10,"div",29)(11,"label",30),e.\u0275\u0275i18nStart(12,2),e.\u0275\u0275elementStart(13,"cd-helper")(14,"span")(15,"p"),e.\u0275\u0275element(16,"b")(17,"cd-copy-2-clipboard-button",31),e.\u0275\u0275elementEnd()()(),e.\u0275\u0275i18nEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(18,"div",32),e.\u0275\u0275element(19,"input",33),e.\u0275\u0275template(20,h3,2,0,"span",34)(21,T3,2,0,"span",34)(22,F3,2,0,"span",34),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(23,"div",29)(24,"label",35),e.\u0275\u0275i18n(25,3),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(26,"div",32),e.\u0275\u0275element(27,"input",36),e.\u0275\u0275template(28,v3,2,0,"span",34)(29,M3,2,0,"span",34),e.\u0275\u0275elementEnd()(),e.\u0275\u0275template(30,P3,7,2,"div",37)(31,N3,10,1,"div",37)(32,I3,13,1,"div",37),e.\u0275\u0275elementStart(33,"div",29)(34,"div",38)(35,"div",39),e.\u0275\u0275element(36,"input",40),e.\u0275\u0275elementStart(37,"label",41),e.\u0275\u0275i18n(38,4),e.\u0275\u0275elementEnd()()()(),e.\u0275\u0275template(39,y3,12,2,"div",37),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(40,"div",42)(41,"cd-form-button-panel",43),e.\u0275\u0275pipe(42,"titlecase"),e.\u0275\u0275listener("submitActionEvent",function(){return e.\u0275\u0275restoreView(r),e.\u0275\u0275resetView(i.onSubmit())}),e.\u0275\u0275elementEnd()()(),e.\u0275\u0275elementContainerEnd(),e.\u0275\u0275elementEnd()}if(2&o){const r=e.\u0275\u0275reference(6);e.\u0275\u0275property("modalRef",i.activeModal),e.\u0275\u0275advance(3),e.\u0275\u0275i18nExp(e.\u0275\u0275pipeBind1(3,19,i.action)),e.\u0275\u0275i18nApply(2),e.\u0275\u0275advance(2),e.\u0275\u0275property("formGroup",i.remoteClusterForm),e.\u0275\u0275advance(3),e.\u0275\u0275property("ngIf",void 0!==i.connectionVerified&&!i.connectionVerified&&"Connection refused"!==i.connectionMessage),e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf",void 0!==i.connectionVerified&&i.connectionVerified),e.\u0275\u0275advance(8),e.\u0275\u0275property("source",i.clusterApiUrlCmd)("byId",!1),e.\u0275\u0275i18nExp(i.clusterApiUrlCmd),e.\u0275\u0275i18nApply(12),e.\u0275\u0275advance(3),e.\u0275\u0275property("ngIf",i.remoteClusterForm.showError("remoteClusterUrl",r,"required")),e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf",i.remoteClusterForm.showError("remoteClusterUrl",r,"endpoint")),e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf",i.remoteClusterForm.showError("remoteClusterUrl",r,"hubUrlCheck")),e.\u0275\u0275advance(6),e.\u0275\u0275property("ngIf",i.remoteClusterForm.showError("clusterAlias",r,"required")),e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf",i.remoteClusterForm.showError("clusterAlias",r,"uniqueName")),e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf","edit"!==i.action),e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf","edit"!==i.action),e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf","edit"!==i.action),e.\u0275\u0275advance(7),e.\u0275\u0275property("ngIf",i.remoteClusterForm.controls.ssl.value),e.\u0275\u0275advance(2),e.\u0275\u0275property("submitText",e.\u0275\u0275pipeBind1(42,21,i.action)+" Cluster")("form",i.remoteClusterForm)}},dependencies:[l.NgIf,b.m,xt.z,it.m,me.N,Q.e,Lo.h,De.S,Me.a,xe.C,ze.E,T.\u0275NgNoValidate,T.NgSelectOption,T.\u0275NgSelectMultipleOption,T.DefaultValueAccessor,T.CheckboxControlValueAccessor,T.SelectControlValueAccessor,T.NgControlStatus,T.NgControlStatusGroup,T.FormGroupDirective,T.FormControlName,l.TitleCasePipe]})}}return n})();const L3=["*"];function $3(n,c){if(1&n&&(e.\u0275\u0275elementStart(0,"div",2)(1,"div",3)(2,"span",4),e.\u0275\u0275i18n(3,0),e.\u0275\u0275elementEnd()()()),2&n){const t=e.\u0275\u0275nextContext();e.\u0275\u0275advance(3),e.\u0275\u0275i18nExp(t.groupTitle),e.\u0275\u0275i18nApply(3)}}let x3=(()=>{class n{constructor(){this.groupTitle=""}static{this.\u0275fac=function(o){return new(o||n)}}static{this.\u0275cmp=e.\u0275\u0275defineComponent({type:n,selectors:[["cd-card-group"]],inputs:{groupTitle:"groupTitle"},ngContentSelectors:L3,decls:3,vars:1,consts:()=>{let t;return t=$localize`:␟3fa8b53814a8ea83f23810880443faab2ec5720a␟4997154650464221557:${"\ufffd0\ufffd"}:INTERPOLATION:`,[t,["class","row",4,"ngIf"],[1,"row"],[1,"info-group-title"],["data-testid","group-title"]]},template:function(o,i){1&o&&(e.\u0275\u0275projectionDef(),e.\u0275\u0275template(0,$3,4,1,"div",1),e.\u0275\u0275elementStart(1,"div",2),e.\u0275\u0275projection(2),e.\u0275\u0275elementEnd()),2&o&&e.\u0275\u0275property("ngIf",i.groupTitle)},dependencies:[l.NgIf],styles:[".info-group-title[_ngcontent-%COMP%]{font-size:1.75rem;margin:0 0 .5vw}"]})}}return n})();const U3=["clusterUsageTpl"],w3=["nameTpl"],G3=(n,c)=>[n,c],H3=(n,c,t)=>[n,c,t],V3=n=>({"text-danger":n}),B3=(n,c)=>({max:n,current:c});function z3(n,c){1&n&&(e.\u0275\u0275elementStart(0,"div",15)(1,"h3",16),e.\u0275\u0275text(2,"Connect Cluster"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(3,"h4",17),e.\u0275\u0275text(4,'Upgrade your current cluster to a multi-cluster setup effortlessly. Click on the "Connect Cluster" button to begin the process.'),e.\u0275\u0275elementEnd()())}function X3(n,c){if(1&n&&(e.\u0275\u0275elementStart(0,"div",15)(1,"h4",17),e.\u0275\u0275text(2,"This cluster is already managed by cluster - "),e.\u0275\u0275elementStart(3,"a",18),e.\u0275\u0275text(4),e.\u0275\u0275element(5,"i",19),e.\u0275\u0275elementEnd()()()),2&n){const t=e.\u0275\u0275nextContext().ngIf;e.\u0275\u0275advance(3),e.\u0275\u0275property("href",t.MANAGED_BY_CLUSTERS[0].url,e.\u0275\u0275sanitizeUrl),e.\u0275\u0275advance(),e.\u0275\u0275textInterpolate1(" ",t.MANAGED_BY_CLUSTERS[0].fsid," ")}}function k3(n,c){if(1&n){const t=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"div",20)(1,"div",21)(2,"button",22),e.\u0275\u0275listener("click",function(){e.\u0275\u0275restoreView(t);const i=e.\u0275\u0275nextContext(3);return e.\u0275\u0275resetView(i.openRemoteClusterInfoModal())}),e.\u0275\u0275element(3,"i",23),e.\u0275\u0275text(4," Connect Cluster "),e.\u0275\u0275elementEnd()()()}if(2&n){const t=e.\u0275\u0275nextContext(3);e.\u0275\u0275advance(3),e.\u0275\u0275property("ngClass",t.icons.add)}}function j3(n,c){if(1&n&&(e.\u0275\u0275elementContainerStart(0,9),e.\u0275\u0275elementStart(1,"div",10)(2,"div",11),e.\u0275\u0275element(3,"i",12),e.\u0275\u0275template(4,z3,5,0,"div",13)(5,X3,6,2,"div",13)(6,k3,5,1,"div",14),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementContainerEnd()),2&n){const t=c.ngIf,o=e.\u0275\u0275nextContext(2);e.\u0275\u0275advance(3),e.\u0275\u0275property("ngClass",e.\u0275\u0275pureFunction2(4,G3,o.icons.large,o.icons.wrench)),e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf",0===t.MANAGED_BY_CLUSTERS.length),e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf",t.MANAGED_BY_CLUSTERS.length>0),e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf",0===t.MANAGED_BY_CLUSTERS.length)}}function W3(n,c){if(1&n&&(e.\u0275\u0275template(0,j3,7,7,"ng-container",8),e.\u0275\u0275pipe(1,"async")),2&n){const t=e.\u0275\u0275nextContext();e.\u0275\u0275property("ngIf",e.\u0275\u0275pipeBind1(1,1,t.managedByConfig$))}}function K3(n,c){if(1&n&&(e.\u0275\u0275elementStart(0,"div",24)(1,"span",25)(2,"a",26),e.\u0275\u0275text(3),e.\u0275\u0275elementEnd()()()),2&n){const t=e.\u0275\u0275nextContext();e.\u0275\u0275advance(),e.\u0275\u0275propertyInterpolate("title",t.cluster),e.\u0275\u0275advance(2),e.\u0275\u0275textInterpolate1(" ",t.cluster," ")}}function Q3(n,c){if(1&n&&(e.\u0275\u0275elementStart(0,"div",9)(1,"div",10)(2,"div",11),e.\u0275\u0275element(3,"i",12),e.\u0275\u0275elementStart(4,"p",27),e.\u0275\u0275i18n(5,4),e.\u0275\u0275elementEnd()()()()),2&n){const t=e.\u0275\u0275nextContext();e.\u0275\u0275advance(3),e.\u0275\u0275property("ngClass",e.\u0275\u0275pureFunction3(1,H3,t.icons.large3x,t.icons.spinner,t.icons.spin))}}function Y3(n,c){if(1&n&&(e.\u0275\u0275i18nStart(0,5,1),e.\u0275\u0275elementStart(1,"div")(2,"p"),e.\u0275\u0275element(3,"strong")(4,"br")(5,"strong")(6,"br")(7,"strong")(8,"br"),e.\u0275\u0275elementEnd()(),e.\u0275\u0275i18nEnd()),2&n){const t=c.$implicit;e.\u0275\u0275advance(8),e.\u0275\u0275i18nExp(t.cluster_alias)(t.cluster_name)(t.reconnectionError?t.reconnectionError:"Security configuration error"),e.\u0275\u0275i18nApply(0)}}function J3(n,c){if(1&n){const t=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"cd-alert-panel",49),e.\u0275\u0275listener("dismissed",function(){e.\u0275\u0275restoreView(t);const i=e.\u0275\u0275nextContext(4);return e.\u0275\u0275resetView(i.onDismissed())}),e.\u0275\u0275i18nStart(1,5),e.\u0275\u0275elementStart(2,"div")(3,"p"),e.\u0275\u0275element(4,"strong"),e.\u0275\u0275elementEnd(),e.\u0275\u0275template(5,Y3,9,3,"div",50),e.\u0275\u0275elementEnd(),e.\u0275\u0275i18nEnd(),e.\u0275\u0275elementEnd()}if(2&n){const t=e.\u0275\u0275nextContext(4);e.\u0275\u0275property("showTitle",!1)("dismissible",!0),e.\u0275\u0275advance(5),e.\u0275\u0275property("ngForOf",t.prometheusConnectionErrors)}}function Z3(n,c){if(1&n){const t=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"cd-alert-panel",51),e.\u0275\u0275listener("dismissed",function(){e.\u0275\u0275restoreView(t);const i=e.\u0275\u0275nextContext(4);return e.\u0275\u0275resetView(i.onDismissed())}),e.\u0275\u0275i18nStart(1,6),e.\u0275\u0275element(2,"p"),e.\u0275\u0275i18nEnd(),e.\u0275\u0275elementEnd()}2&n&&e.\u0275\u0275property("showTitle",!1)("dismissible",!0)}function q3(n,c){if(1&n&&(e.\u0275\u0275elementStart(0,"h3"),e.\u0275\u0275text(1),e.\u0275\u0275elementEnd()),2&n){const t=e.\u0275\u0275nextContext(5);e.\u0275\u0275advance(),e.\u0275\u0275textInterpolate(t.queriesResults.CLUSTER_COUNT[0][1])}}function eM(n,c){if(1&n&&(e.\u0275\u0275elementStart(0,"h3",56),e.\u0275\u0275element(1,"i",39),e.\u0275\u0275text(2),e.\u0275\u0275elementEnd()),2&n){const t=e.\u0275\u0275nextContext(5);e.\u0275\u0275advance(),e.\u0275\u0275property("ngClass",t.icons.danger),e.\u0275\u0275advance(),e.\u0275\u0275textInterpolate1(" ",t.queriesResults.HEALTH_ERROR_COUNT[0][1]," ")}}function tM(n,c){if(1&n&&(e.\u0275\u0275elementStart(0,"h3",57),e.\u0275\u0275element(1,"i",39),e.\u0275\u0275text(2),e.\u0275\u0275elementEnd()),2&n){const t=e.\u0275\u0275nextContext(5);e.\u0275\u0275advance(),e.\u0275\u0275property("ngClass",t.icons.warning),e.\u0275\u0275advance(),e.\u0275\u0275textInterpolate1(" ",t.queriesResults.HEALTH_WARNING_COUNT[0][1]," ")}}function nM(n,c){if(1&n&&(e.\u0275\u0275elementStart(0,"h3",56),e.\u0275\u0275element(1,"i",39),e.\u0275\u0275text(2),e.\u0275\u0275elementEnd()),2&n){const t=e.\u0275\u0275nextContext(5);e.\u0275\u0275advance(),e.\u0275\u0275property("ngClass",t.icons.danger),e.\u0275\u0275advance(),e.\u0275\u0275textInterpolate1(" ",t.queriesResults.HEALTH_ERROR_COUNT[0][1]," ")}}function oM(n,c){if(1&n&&(e.\u0275\u0275elementStart(0,"h3",58),e.\u0275\u0275element(1,"i",39),e.\u0275\u0275text(2),e.\u0275\u0275elementEnd()),2&n){const t=e.\u0275\u0275nextContext(5);e.\u0275\u0275advance(),e.\u0275\u0275property("ngClass",t.icons.success),e.\u0275\u0275advance(),e.\u0275\u0275textInterpolate1(" ",t.queriesResults.HEALTH_OK_COUNT[0][1]," ")}}function iM(n,c){if(1&n&&(e.\u0275\u0275elementStart(0,"cd-card",52)(1,"span",21),e.\u0275\u0275template(2,q3,2,1,"h3",7)(3,eM,3,2,"h3",53)(4,tM,3,2,"h3",54)(5,nM,3,2,"h3",53)(6,oM,3,2,"h3",55),e.\u0275\u0275elementEnd()()),2&n){const t=e.\u0275\u0275nextContext(4);e.\u0275\u0275property("fullHeight",!0),e.\u0275\u0275advance(2),e.\u0275\u0275property("ngIf","0"===t.queriesResults.HEALTH_ERROR_COUNT[0][1]&&"0"===t.queriesResults.HEALTH_OK_COUNT[0][1]&&"0"===t.queriesResults.HEALTH_WARNING_COUNT[0][1]),e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf","0"!==t.queriesResults.HEALTH_ERROR_COUNT[0][1]),e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf","0"!==t.queriesResults.HEALTH_WARNING_COUNT[0][1]),e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf","0"!==t.queriesResults.HEALTH_ERROR_COUNT[0][1]),e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf","0"!==t.queriesResults.HEALTH_OK_COUNT[0][1])}}function aM(n,c){if(1&n&&(e.\u0275\u0275elementStart(0,"h3"),e.\u0275\u0275text(1),e.\u0275\u0275elementEnd()),2&n){const t=e.\u0275\u0275nextContext(5);e.\u0275\u0275advance(),e.\u0275\u0275textInterpolate1(" ",t.queriesResults.ALERTS_COUNT[0][1]," ")}}function sM(n,c){if(1&n&&(e.\u0275\u0275elementStart(0,"h3",56),e.\u0275\u0275element(1,"i",39),e.\u0275\u0275text(2),e.\u0275\u0275elementEnd()),2&n){const t=e.\u0275\u0275nextContext(5);e.\u0275\u0275advance(),e.\u0275\u0275property("ngClass",t.icons.danger),e.\u0275\u0275advance(),e.\u0275\u0275textInterpolate1(" ",t.queriesResults.CRITICAL_ALERTS_COUNT[0][1]," ")}}function rM(n,c){if(1&n&&(e.\u0275\u0275elementStart(0,"h3",57),e.\u0275\u0275element(1,"i",39),e.\u0275\u0275text(2),e.\u0275\u0275elementEnd()),2&n){const t=e.\u0275\u0275nextContext(5);e.\u0275\u0275advance(),e.\u0275\u0275property("ngClass",t.icons.warning),e.\u0275\u0275advance(),e.\u0275\u0275textInterpolate1(" ",t.queriesResults.WARNING_ALERTS_COUNT[0][1]," ")}}function lM(n,c){if(1&n&&(e.\u0275\u0275elementStart(0,"cd-card",59)(1,"span",21),e.\u0275\u0275template(2,aM,2,1,"h3",7)(3,sM,3,2,"h3",53)(4,rM,3,2,"h3",54),e.\u0275\u0275elementEnd()()),2&n){const t=e.\u0275\u0275nextContext(4);e.\u0275\u0275property("fullHeight",!0),e.\u0275\u0275advance(2),e.\u0275\u0275property("ngIf","0"===t.queriesResults.CRITICAL_ALERTS_COUNT[0][1]&&"0"===t.queriesResults.WARNING_ALERTS_COUNT[0][1]),e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf","0"!==t.queriesResults.CRITICAL_ALERTS_COUNT[0][1]),e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf","0"!==t.queriesResults.WARNING_ALERTS_COUNT[0][1])}}function _M(n,c){if(1&n&&e.\u0275\u0275element(0,"i",39),2&n){const t=e.\u0275\u0275nextContext(4);e.\u0275\u0275property("ngClass",t.icons.danger)}}function cM(n,c){if(1&n&&(e.\u0275\u0275elementStart(0,"cd-card",60)(1,"span",21)(2,"h3"),e.\u0275\u0275text(3),e.\u0275\u0275elementEnd()()()),2&n){const t=e.\u0275\u0275nextContext(4);e.\u0275\u0275advance(3),e.\u0275\u0275textInterpolate(t.queriesResults.TOTAL_HOSTS[0][1])}}function dM(n,c){if(1&n&&(e.\u0275\u0275elementStart(0,"cd-card",61),e.\u0275\u0275elementContainerStart(1,62),e.\u0275\u0275element(2,"cd-dashboard-pie",63),e.\u0275\u0275elementContainerEnd(),e.\u0275\u0275elementEnd()),2&n){const t=e.\u0275\u0275nextContext(4);e.\u0275\u0275advance(2),e.\u0275\u0275property("data",e.\u0275\u0275pureFunction2(1,B3,t.queriesResults.TOTAL_CLUSTERS_CAPACITY[0][1],t.queriesResults.TOTAL_USED_CAPACITY[0][1]))}}function uM(n,c){if(1&n&&e.\u0275\u0275element(0,"cd-dashboard-area-chart",70),2&n){const t=e.\u0275\u0275nextContext(5);e.\u0275\u0275property("labelsArray",t.capacityLabels)("dataArray",t.capacityValues)("truncateLabel",!0)}}function pM(n,c){if(1&n&&e.\u0275\u0275element(0,"cd-dashboard-area-chart",71),2&n){const t=e.\u0275\u0275nextContext(5);e.\u0275\u0275property("labelsArray",t.iopsLabels)("dataArray",t.iopsValues)("truncateLabel",!0)}}function mM(n,c){if(1&n&&e.\u0275\u0275element(0,"cd-dashboard-area-chart",72),2&n){const t=e.\u0275\u0275nextContext(5);e.\u0275\u0275property("labelsArray",t.throughputLabels)("dataArray",t.throughputValues)("truncateLabel",!0)}}function fM(n,c){if(1&n){const t=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"cd-card",64)(1,"div",65)(2,"cd-dashboard-time-selector",66),e.\u0275\u0275listener("selectedTime",function(i){e.\u0275\u0275restoreView(t);const r=e.\u0275\u0275nextContext(4);return e.\u0275\u0275resetView(r.getPrometheusData(i,"clusterUtilization"))}),e.\u0275\u0275elementEnd(),e.\u0275\u0275template(3,uM,1,3,"cd-dashboard-area-chart",67)(4,pM,1,3,"cd-dashboard-area-chart",68)(5,mM,1,3,"cd-dashboard-area-chart",69),e.\u0275\u0275elementEnd()()}if(2&n){const t=e.\u0275\u0275nextContext(4);e.\u0275\u0275property("cardTitle","Top "+t.COUNT_OF_UTILIZATION_CHARTS+" Cluster Utilization")("fullHeight",!0),e.\u0275\u0275advance(3),e.\u0275\u0275property("ngIf",t.capacityLabels&&t.capacityValues),e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf",t.iopsLabels&&t.iopsValues),e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf",t.throughputLabels&&t.throughputLabels)}}function EM(n,c){if(1&n&&e.\u0275\u0275element(0,"cd-table",73),2&n){const t=e.\u0275\u0275nextContext(4);e.\u0275\u0275property("data",t.clusters)("columns",t.columns)("limit",5)}}function gM(n,c){if(1&n&&e.\u0275\u0275element(0,"cd-dashboard-area-chart",78),2&n){const t=e.\u0275\u0275nextContext(5);e.\u0275\u0275property("labelsArray",t.poolCapacityLabels)("dataArray",t.poolCapacityValues)("truncateLabel",!0)}}function CM(n,c){if(1&n&&e.\u0275\u0275element(0,"cd-dashboard-area-chart",79),2&n){const t=e.\u0275\u0275nextContext(5);e.\u0275\u0275property("labelsArray",t.poolIOPSLabels)("dataArray",t.poolIOPSValues)("truncateLabel",!0)}}function SM(n,c){if(1&n&&e.\u0275\u0275element(0,"cd-dashboard-area-chart",80),2&n){const t=e.\u0275\u0275nextContext(5);e.\u0275\u0275property("labelsArray",t.poolThroughputLabels)("dataArray",t.poolThroughputValues)("truncateLabel",!0)}}function hM(n,c){if(1&n){const t=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"cd-card",74)(1,"div",65)(2,"cd-dashboard-time-selector",66),e.\u0275\u0275listener("selectedTime",function(i){e.\u0275\u0275restoreView(t);const r=e.\u0275\u0275nextContext(4);return e.\u0275\u0275resetView(r.getPrometheusData(i,"poolUtilization"))}),e.\u0275\u0275elementEnd(),e.\u0275\u0275template(3,gM,1,3,"cd-dashboard-area-chart",75)(4,CM,1,3,"cd-dashboard-area-chart",76)(5,SM,1,3,"cd-dashboard-area-chart",77),e.\u0275\u0275elementEnd()()}if(2&n){const t=e.\u0275\u0275nextContext(4);e.\u0275\u0275property("cardTitle","Top "+t.COUNT_OF_UTILIZATION_CHARTS+" Pools Utilization"),e.\u0275\u0275advance(3),e.\u0275\u0275property("ngIf",t.poolCapacityLabels&&t.poolCapacityValues),e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf",t.poolIOPSLabels&&t.poolIOPSValues),e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf",t.poolThroughputLabels&&t.poolThroughputValues)}}function TM(n,c){if(1&n&&(e.\u0275\u0275elementContainerStart(0),e.\u0275\u0275template(1,J3,6,3,"cd-alert-panel",31)(2,Z3,3,2,"cd-alert-panel",32),e.\u0275\u0275elementStart(3,"cd-card-group")(4,"div",33)(5,"div",34),e.\u0275\u0275template(6,iM,7,6,"cd-card",35)(7,lM,5,4,"cd-card",36),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(8,"div",37)(9,"cd-card",38)(10,"span",21)(11,"h3",39),e.\u0275\u0275template(12,_M,1,1,"i",40),e.\u0275\u0275text(13),e.\u0275\u0275elementEnd()()(),e.\u0275\u0275template(14,cM,4,1,"cd-card",41),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(15,"div",37),e.\u0275\u0275template(16,dM,3,4,"cd-card",42),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(17,"div",43),e.\u0275\u0275template(18,fM,6,5,"cd-card",44),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(19,"cd-card-group")(20,"div",45),e.\u0275\u0275template(21,EM,1,3,"cd-table",46),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(22,"cd-card-group")(23,"div",47)(24,"div",34),e.\u0275\u0275template(25,hM,6,4,"cd-card",48),e.\u0275\u0275elementEnd()()(),e.\u0275\u0275elementContainerEnd()),2&n){const t=e.\u0275\u0275nextContext(3);e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf",t.prometheusConnectionErrors.length>0),e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf",t.showDeletionMessage),e.\u0275\u0275advance(4),e.\u0275\u0275property("ngIf",t.queriesResults.CLUSTER_COUNT&&t.queriesResults.CLUSTER_COUNT[0]),e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf",t.queriesResults.ALERTS_COUNT&&t.queriesResults.ALERTS_COUNT[0]),e.\u0275\u0275advance(4),e.\u0275\u0275property("ngClass",e.\u0275\u0275pureFunction1(12,V3,t.connectionErrorsCount>0)),e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf",t.connectionErrorsCount>0),e.\u0275\u0275advance(),e.\u0275\u0275textInterpolate1(" ",t.connectionErrorsCount," "),e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf",t.queriesResults.TOTAL_HOSTS&&t.queriesResults.TOTAL_HOSTS[0]),e.\u0275\u0275advance(2),e.\u0275\u0275property("ngIf",t.queriesResults.TOTAL_CLUSTERS_CAPACITY&&t.queriesResults.TOTAL_CLUSTERS_CAPACITY[0]&&t.queriesResults.TOTAL_USED_CAPACITY&&t.queriesResults.TOTAL_USED_CAPACITY[0]),e.\u0275\u0275advance(2),e.\u0275\u0275property("ngIf",t.clusters),e.\u0275\u0275advance(3),e.\u0275\u0275property("ngIf",t.clusters),e.\u0275\u0275advance(4),e.\u0275\u0275property("ngIf",t.clusters)}}function FM(n,c){if(1&n&&(e.\u0275\u0275elementStart(0,"div",29),e.\u0275\u0275template(1,TM,26,14,"ng-container",30),e.\u0275\u0275elementEnd()),2&n){const t=e.\u0275\u0275nextContext(2),o=e.\u0275\u0275reference(5);e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf",!t.loading)("ngIfElse",o)}}function vM(n,c){if(1&n&&(e.\u0275\u0275elementContainerStart(0),e.\u0275\u0275template(1,FM,2,2,"div",28),e.\u0275\u0275elementContainerEnd()),2&n){const t=c.ngIf,o=e.\u0275\u0275nextContext(),i=e.\u0275\u0275reference(1);e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf",o.isMultiCluster&&0===t.MANAGED_BY_CLUSTERS.length)("ngIfElse",i)}}function MM(n,c){if(1&n&&e.\u0275\u0275element(0,"cd-usage-bar",81),2&n){const t=c.data.row;e.\u0275\u0275property("total",t.total_capacity)("used",t.used_capacity)}}let RM=(()=>{class n{constructor(t,o,i,r,p,F){this.multiClusterService=t,this.settingsService=o,this.modalService=i,this.router=r,this.prometheusService=p,this.notificationService=F,this.COUNT_OF_UTILIZATION_CHARTS=5,this.columns=[],this.queriesResults={ALERTS_COUNT:0,CLUSTER_COUNT:0,HEALTH_OK_COUNT:0,HEALTH_WARNING_COUNT:0,HEALTH_ERROR_COUNT:0,TOTAL_CLUSTERS_CAPACITY:0,TOTAL_USED_CAPACITY:0,CLUSTER_CAPACITY_UTILIZATION:0,CLUSTER_IOPS_UTILIZATION:0,CLUSTER_THROUGHPUT_UTILIZATION:0,POOL_CAPACITY_UTILIZATION:0,POOL_IOPS_UTILIZATION:0,POOL_THROUGHPUT_UTILIZATION:0,TOTAL_CAPACITY:0,USED_CAPACITY:0,HOSTS:0,POOLS:0,OSDS:0,CLUSTER_ALERTS:0,version:"",FEDERATE_UP_METRIC:0},this.subs=new K.Subscription,this.dashboardClustersMap=new Map,this.icons=g.FI,this.loading=!0,this.isMultiCluster=!0,this.clusterTokenStatus={},this.clusters=[],this.connectionErrorsCount=0,this.capacityLabels=[],this.iopsLabels=[],this.throughputLabels=[],this.poolIOPSLabels=[],this.poolCapacityLabels=[],this.poolThroughputLabels=[],this.capacityValues=[],this.iopsValues=[],this.throughputValues=[],this.poolIOPSValues=[],this.poolCapacityValues=[],this.poolThroughputValues=[],this.showDeletionMessage=!1,this.isClusterAdded=!1,this.PROMETHEUS_DELAY=2e4,this.LOAD_DELAY=5e3,this.CLUSTERS_REFRESH_INTERVAL=3e4,this.multiClusterQueries={},this.prometheusConnectionErrors=[],this.multiClusterQueries={cluster:{queries:Ut.Ri,selectedTime:this.prometheusService.lastHourDateObject},pool:{queries:Ut.td,selectedTime:this.prometheusService.lastHourDateObject},all:{queries:Ut.sj,selectedTime:this.prometheusService.lastHourDateObject}}}ngOnInit(){this.columns=[{prop:"cluster",name:$localize`Cluster Name`,flexGrow:2,cellTemplate:this.nameTpl},{prop:"cluster_connection_status",name:$localize`Connection`,flexGrow:2,cellTransformation:O.x.badge,customTemplateConfig:{map:{1:{value:"DISCONNECTED",class:"badge-danger"},0:{value:"CONNECTED",class:"badge-success"},2:{value:"CHECKING..",class:"badge-info"}}}},{prop:"status",name:$localize`Status`,flexGrow:1,cellTransformation:O.x.badge,customTemplateConfig:{map:{1:{value:"WARN",class:"badge-warning"},0:{value:"OK",class:"badge-success"},2:{value:"ERROR",class:"badge-danger"}}}},{prop:"alert",name:$localize`Alerts`,flexGrow:1},{prop:"version",name:$localize`Version`,flexGrow:2},{prop:"usage",name:$localize`Usage`,cellTemplate:this.clusterUsageTpl,flexGrow:1},{prop:"pools",name:$localize`Pools`,flexGrow:1},{prop:"hosts",name:$localize`Hosts`,flexGrow:1},{prop:"osds",name:$localize`OSDs`,flexGrow:1}],this.subs.add(this.multiClusterService.subscribe(t=>{this.isMultiCluster=Object.keys(t.config).length>1,this.clusterDetailsArray=Object.values(t.config).flat();const o=t.hub_url;for(const i in t.config)if(t.config.hasOwnProperty(i)){const r=t.config[i][0];if(o===r.url){this.localClusterName=r.name;break}}})),this.managedByConfig$=this.settingsService.getValues("MANAGED_BY_CLUSTERS"),this.subs.add(this.multiClusterService.subscribeClusterTokenStatus(t=>{this.clusterTokenStatus=t})),this.isClusterAdded=this.multiClusterService.isClusterAdded(),this.isClusterAdded?setTimeout(()=>{this.getPrometheusData(this.prometheusService.lastHourDateObject),this.multiClusterService.isClusterAdded(!1)},this.PROMETHEUS_DELAY):(this.showDeletionMessage=this.multiClusterService.showPrometheusDelayMessage(),this.showDeletionMessage?setTimeout(()=>{this.getPrometheusData(this.prometheusService.lastHourDateObject)},this.LOAD_DELAY):this.getPrometheusData(this.prometheusService.lastHourDateObject))}openRemoteClusterInfoModal(){this.bsModalRef=this.modalService.show(Ys,{action:"connect"},{size:"lg"}),this.bsModalRef.componentInstance.submitAction.subscribe(()=>{this.loading=!0,setTimeout(()=>{const o=this.router.url.split("?")[0];this.multiClusterService.refreshMultiCluster(o),this.getPrometheusData(this.prometheusService.lastHourDateObject)},this.PROMETHEUS_DELAY)})}getPrometheusData(t,o){const i=Object.keys(Ut.Ri).concat(Object.keys(Ut.td)),r=Object.keys(Ut.sj).concat(Object.keys(Ut.Ri).concat(Object.keys(Ut.td)));let F=r;o&&("poolUtilization"===o&&(this.multiClusterQueries.pool.selectedTime=t,F=Object.keys(Ut.td)),"clusterUtilization"===o&&(this.multiClusterQueries.cluster.selectedTime=t,F=Object.keys(Ut.Ri))),this.prometheusService.getMultiClusterQueriesData(this.queriesResults,["ALERTS","MGR_METADATA","HEALTH_STATUS","TOTAL_CAPACITY","USED_CAPACITY","POOLS","OSDS","CLUSTER_CAPACITY_UTILIZATION","CLUSTER_IOPS_UTILIZATION","CLUSTER_THROUGHPUT_UTILIZATION","POOL_CAPACITY_UTILIZATION","POOL_IOPS_UTILIZATION","POOL_THROUGHPUT_UTILIZATION","HOSTS","CLUSTER_ALERTS","FEDERATE_UP_METRIC"],i,this.multiClusterQueries,F,r).subscribe(D=>{this.queriesResults=D,this.loading=!1,this.alerts=this.queriesResults.ALERTS,this.getAlertsInfo(),this.getClustersInfo(),this.interval=setInterval(()=>{this.getClustersInfo()},this.CLUSTERS_REFRESH_INTERVAL)})}getAlertsInfo(){const t=[];this.alerts?.forEach(o=>{const i=o.metric;t.push({alertName:i.alertname,cluster:i.cluster,alertState:i.alertstate,severity:i.severity})}),this.alerts=t}getClustersInfo(){const t=[];this.queriesResults.TOTAL_CAPACITY?.forEach((o,i)=>{const r=o.metric.cluster,p=parseInt(o.value[1]),F=this.findCluster(this.queriesResults?.MGR_METADATA,r),D=this.getVersion(F.metric.ceph_version),x=this.findClusterData(this.queriesResults?.USED_CAPACITY,r),H=this.findClusterData(this.queriesResults?.POOLS,r),X=this.findClusterData(this.queriesResults?.HOSTS,r),Z=this.findClusterData(this.queriesResults?.CLUSTER_ALERTS,r),re=this.findClusterData(this.queriesResults?.OSDS,r),pe=this.findClusterData(this.queriesResults?.HEALTH_STATUS,r),be=p-x,Pe=`federate_${i+1}`,he=this.queriesResults?.FEDERATE_UP_METRIC.filter(Ue=>Ue.metric.job===Pe);this.checkFederateMetricsStatus(he),t.push({cluster:r.trim(),status:pe,alert:Z,total_capacity:p,used_capacity:x,available_capacity:be,pools:H,osds:re,hosts:X,version:D,cluster_connection_status:2})}),this.clusterTokenStatus&&(t.forEach(o=>{o.cluster_connection_status=this.clusterTokenStatus[o.cluster]?.status,o.cluster===this.localClusterName&&(o.cluster_connection_status=0)}),this.connectionErrorsCount=t.filter(o=>1===o.cluster_connection_status).length),this.clusters=t,this.capacityLabels=this.generateQueryLabel(this.queriesResults.CLUSTER_CAPACITY_UTILIZATION),this.iopsLabels=this.generateQueryLabel(this.queriesResults.CLUSTER_IOPS_UTILIZATION),this.throughputLabels=this.generateQueryLabel(this.queriesResults.CLUSTER_THROUGHPUT_UTILIZATION),this.poolCapacityLabels=this.generateQueryLabel(this.queriesResults.POOL_CAPACITY_UTILIZATION,!0),this.poolIOPSLabels=this.generateQueryLabel(this.queriesResults.POOL_IOPS_UTILIZATION,!0),this.poolThroughputLabels=this.generateQueryLabel(this.queriesResults.POOL_THROUGHPUT_UTILIZATION,!0),this.capacityValues=this.getQueryValues(this.queriesResults.CLUSTER_CAPACITY_UTILIZATION),this.iopsValues=this.getQueryValues(this.queriesResults.CLUSTER_IOPS_UTILIZATION),this.throughputValues=this.getQueryValues(this.queriesResults.CLUSTER_THROUGHPUT_UTILIZATION),this.poolCapacityValues=this.getQueryValues(this.queriesResults.POOL_CAPACITY_UTILIZATION),this.poolIOPSValues=this.getQueryValues(this.queriesResults.POOL_IOPS_UTILIZATION),this.poolThroughputValues=this.getQueryValues(this.queriesResults.POOL_THROUGHPUT_UTILIZATION)}checkFederateMetricsStatus(t){!t||0===t.length||(this.prometheusConnectionErrors=[],t.forEach(o=>{const i=o.metric.instance,r=i.split(":")[0],p=i.split(":")[1],F=o.value[1];this.clusterDetailsArray?.forEach(D=>{if(D.name!==this.localClusterName){const x=D.prometheus_url.replace(/^(http:\/\/|https:\/\/)/,""),H=x.split(":")[0],X=x.split(":")[1]?x.split(":")[1]:"443";!this.prometheusConnectionErrors.find(re=>re.url===D.url)&&r===H&&p===X&&"0"===F&&(this.prometheusConnectionErrors.push({cluster_name:D.name,cluster_alias:D.cluster_alias,url:D.url}),this.multiClusterService.reConnectCluster(D.url,D.user,null,D.ssl_verify,D.ssl_certificate,D.ttl,D.token).subscribe({error:re=>{const pe=re.error.detail,be=this.prometheusConnectionErrors.findIndex(Pe=>Pe.url===D.url);-1!==be&&(this.prometheusConnectionErrors[be].reconnectionError=pe)},next:re=>{if(!0===re){const pe=$localize`Cluster re-connected successfully`;this.notificationService.show(Le._.success,pe),this.prometheusConnectionErrors=this.prometheusConnectionErrors.filter(be=>be.url!==D.url)}}}))}})}))}findClusterData(t,o){const i=this.findCluster(t,o);return parseInt(i?.value[1]||0)}findCluster(t,o){return t.find(i=>i?.metric?.cluster===o)}getVersion(t){const o=t.replace("ceph version ","").split(" ");return o[0]+" "+o.slice(2,o.length).join(" ")}generateQueryLabel(t,o=!1,i=this.COUNT_OF_UTILIZATION_CHARTS){let r=[];for(let p=0;p<i;p++){let F="";t[p]&&(F=t[p]?.metric?.cluster,o&&(F=t[p]?.metric?.name+" - "+F)),r.push(F)}return r}getQueryValues(t,o=this.COUNT_OF_UTILIZATION_CHARTS){let i=[];for(let r=0;r<o;r++)t[r]&&i.push(t[r]?.values);return i}onDismissed(){this.showDeletionMessage=!1,this.multiClusterService.showPrometheusDelayMessage(!1)}ngOnDestroy(){this.subs.unsubscribe(),clearInterval(this.interval),this.prometheusService.unsubscribe()}static{this.\u0275fac=function(o){return new(o||n)(e.\u0275\u0275directiveInject(wo.J),e.\u0275\u0275directiveInject(mo.h),e.\u0275\u0275directiveInject(qt.B),e.\u0275\u0275directiveInject(m.Router),e.\u0275\u0275directiveInject(fn.o),e.\u0275\u0275directiveInject(Y.J))}}static{this.\u0275cmp=e.\u0275\u0275defineComponent({type:n,selectors:[["cd-multi-cluster"]],viewQuery:function(o,i){if(1&o&&(e.\u0275\u0275viewQuery(U3,7),e.\u0275\u0275viewQuery(w3,7)),2&o){let r;e.\u0275\u0275queryRefresh(r=e.\u0275\u0275loadQuery())&&(i.clusterUsageTpl=r.first),e.\u0275\u0275queryRefresh(r=e.\u0275\u0275loadQuery())&&(i.nameTpl=r.first)}},decls:10,vars:3,consts:()=>{let t,o,i;return t=$localize`:␟2612b68642ad955fa2e85aaccdd253b4e51884a2␟451381945440864383:Loading data, Please wait...`,o=$localize`:␟35704a33880a4d8852896e0a986cb9d06072d7ff␟6410307000965024485:${"\ufffd#2\ufffd"}:START_TAG_DIV_1:${"[\ufffd#3\ufffd|\ufffd#2:1\ufffd]"}:START_PARAGRAPH:${"[\ufffd#4\ufffd|\ufffd#3:1\ufffd|\ufffd#5:1\ufffd|\ufffd#7:1\ufffd]"}:START_TAG_STRONG:Could not retrieve metrics from the following clusters:${"[\ufffd/#4\ufffd|\ufffd/#3:1\ufffd|\ufffd/#5:1\ufffd|\ufffd/#7:1\ufffd]"}:CLOSE_TAG_STRONG:${"[\ufffd/#3\ufffd|\ufffd/#2:1\ufffd]"}:CLOSE_PARAGRAPH:${"\ufffd*5:1\ufffd\ufffd#1:1\ufffd"}:START_TAG_DIV:${"[\ufffd#3\ufffd|\ufffd#2:1\ufffd]"}:START_PARAGRAPH:${"[\ufffd#4\ufffd|\ufffd#3:1\ufffd|\ufffd#5:1\ufffd|\ufffd#7:1\ufffd]"}:START_TAG_STRONG:Cluster Name:${"[\ufffd/#4\ufffd|\ufffd/#3:1\ufffd|\ufffd/#5:1\ufffd|\ufffd/#7:1\ufffd]"}:CLOSE_TAG_STRONG: ${"\ufffd0:1\ufffd"}:INTERPOLATION:${"[\ufffd#4:1\ufffd\ufffd/#4:1\ufffd|\ufffd#6:1\ufffd\ufffd/#6:1\ufffd|\ufffd#8:1\ufffd\ufffd/#8:1\ufffd]"}:LINE_BREAK:${"[\ufffd#4\ufffd|\ufffd#3:1\ufffd|\ufffd#5:1\ufffd|\ufffd#7:1\ufffd]"}:START_TAG_STRONG:Cluster ID:${"[\ufffd/#4\ufffd|\ufffd/#3:1\ufffd|\ufffd/#5:1\ufffd|\ufffd/#7:1\ufffd]"}:CLOSE_TAG_STRONG: ${"\ufffd1:1\ufffd"}:INTERPOLATION_1:${"[\ufffd#4:1\ufffd\ufffd/#4:1\ufffd|\ufffd#6:1\ufffd\ufffd/#6:1\ufffd|\ufffd#8:1\ufffd\ufffd/#8:1\ufffd]"}:LINE_BREAK:${"[\ufffd#4\ufffd|\ufffd#3:1\ufffd|\ufffd#5:1\ufffd|\ufffd#7:1\ufffd]"}:START_TAG_STRONG:Issue:${"[\ufffd/#4\ufffd|\ufffd/#3:1\ufffd|\ufffd/#5:1\ufffd|\ufffd/#7:1\ufffd]"}:CLOSE_TAG_STRONG: ${"\ufffd2:1\ufffd"}:INTERPOLATION_2:${"[\ufffd#4:1\ufffd\ufffd/#4:1\ufffd|\ufffd#6:1\ufffd\ufffd/#6:1\ufffd|\ufffd#8:1\ufffd\ufffd/#8:1\ufffd]"}:LINE_BREAK:${"[\ufffd/#3\ufffd|\ufffd/#2:1\ufffd]"}:CLOSE_PARAGRAPH:${"[\ufffd/#1:1\ufffd\ufffd/*5:1\ufffd|\ufffd/#2\ufffd]"}:CLOSE_TAG_DIV:${"[\ufffd/#1:1\ufffd\ufffd/*5:1\ufffd|\ufffd/#2\ufffd]"}:CLOSE_TAG_DIV:`,o=e.\u0275\u0275i18nPostprocess(o),i=$localize`:␟af21ed6b33e55db84aa5c6e8641e8a5c970debf6␟4150787490400457983:${"\ufffd#2\ufffd"}:START_PARAGRAPH:Please note that the data for the disconnected cluster will be visible for a duration of ~ 5 minutes. After this period, it will be automatically removed.${"\ufffd/#2\ufffd"}:CLOSE_PARAGRAPH:`,[["emptyCluster",""],["nametpl",""],["loadingTpl",""],["clusterUsageTpl",""],t,o,i,[4,"ngIf"],["class","container h-75",4,"ngIf"],[1,"container","h-75"],[1,"row","h-100","justify-content-center","align-items-center"],[1,"blank-page"],[1,"mx-auto","d-block",3,"ngClass"],["class","mt-4 text-center",4,"ngIf"],["class","mt-4",4,"ngIf"],[1,"mt-4","text-center"],[1,"fw-bold"],[1,"mt-3"],["target","_blank",3,"href"],[1,"fa","fa-external-link"],[1,"mt-4"],[1,"text-center"],[1,"btn","btn-primary",3,"click"],[1,"mx-auto",3,"ngClass"],["cdstabledata",""],[3,"title"],["href","#"],[1,"text-center","mt-3"],["class","container-fluid h-100 p-4",4,"ngIf","ngIfElse"],[1,"container-fluid","h-100","p-4"],[4,"ngIf","ngIfElse"],["type","error","spacingClass","mb-3","size","slim",3,"showTitle","dismissible","dismissed",4,"ngIf"],["type","info","spacingClass","mb-3","size","slim",3,"showTitle","dismissible","dismissed",4,"ngIf"],[1,"col-lg-4"],[1,"row"],["cardTitle","Clusters","class","col-sm-6 m-0 p-0 ps-4 pe-2","aria-label","Clusters",3,"fullHeight",4,"ngIf"],["cardTitle","Alerts","class","col-sm-6 m-0 p-0 ps-2 pe-2","aria-label","Alerts",3,"fullHeight",4,"ngIf"],[1,"row","pt-3"],["cardTitle","Connection Errors","aria-label","Connection Errors",1,"col-sm-6","m-0","p-0","ps-4","pe-2"],[3,"ngClass"],[3,"ngClass",4,"ngIf"],["cardTitle","Hosts","class","col-sm-6 m-0 p-0 ps-2 pe-2","aria-label","Total number of hosts",4,"ngIf"],["cardTitle","Capacity","class","col-sm-12 m-0 p-0 ps-4 pe-2","aria-label","Capacity card",4,"ngIf"],[1,"col-sm-8","ps-2"],["aria-label","Cluster Utilization card",3,"cardTitle","fullHeight",4,"ngIf"],[1,"col-lg-12","mt-3","m-0","p-0","ps-4","pe-4"],[3,"data","columns","limit",4,"ngIf"],[1,"col-lg-12","mb-4","m-0","p-0","ps-4","pe-4"],["aria-label","Pools Utilization card",3,"cardTitle",4,"ngIf"],["type","error","spacingClass","mb-3","size","slim",3,"dismissed","showTitle","dismissible"],[4,"ngFor","ngForOf"],["type","info","spacingClass","mb-3","size","slim",3,"dismissed","showTitle","dismissible"],["cardTitle","Clusters","aria-label","Clusters",1,"col-sm-6","m-0","p-0","ps-4","pe-2",3,"fullHeight"],["class","text-danger",4,"ngIf"],["class","text-warning",4,"ngIf"],["class","text-success",4,"ngIf"],[1,"text-danger"],[1,"text-warning"],[1,"text-success"],["cardTitle","Alerts","aria-label","Alerts",1,"col-sm-6","m-0","p-0","ps-2","pe-2",3,"fullHeight"],["cardTitle","Hosts","aria-label","Total number of hosts",1,"col-sm-6","m-0","p-0","ps-2","pe-2"],["cardTitle","Capacity","aria-label","Capacity card",1,"col-sm-12","m-0","p-0","ps-4","pe-2"],[1,"ms-4","me-4"],["lowThreshold",".95","highThreshold",".99",3,"data"],["aria-label","Cluster Utilization card",3,"cardTitle","fullHeight"],[1,"ms-4","me-4","mt-0"],[3,"selectedTime"],["chartTitle","Capacity","isMultiCluster","true","dataUnits","B",3,"labelsArray","dataArray","truncateLabel",4,"ngIf"],["chartTitle","IOPS","isMultiCluster","true","dataUnits","","decimals","0",3,"labelsArray","dataArray","truncateLabel",4,"ngIf"],["chartTitle","Throughput","isMultiCluster","true","dataUnits","B/s","decimals","2",3,"labelsArray","dataArray","truncateLabel",4,"ngIf"],["chartTitle","Capacity","isMultiCluster","true","dataUnits","B",3,"labelsArray","dataArray","truncateLabel"],["chartTitle","IOPS","isMultiCluster","true","dataUnits","","decimals","0",3,"labelsArray","dataArray","truncateLabel"],["chartTitle","Throughput","isMultiCluster","true","dataUnits","B/s","decimals","2",3,"labelsArray","dataArray","truncateLabel"],[3,"data","columns","limit"],["aria-label","Pools Utilization card",3,"cardTitle"],["chartTitle","Capacity","dataUnits","B","isMultiCluster","true",3,"labelsArray","dataArray","truncateLabel",4,"ngIf"],["chartTitle","IOPS","dataUnits","","decimals","0","isMultiCluster","true",3,"labelsArray","dataArray","truncateLabel",4,"ngIf"],["chartTitle","Client Throughput","dataUnits","B/s","decimals","2","isMultiCluster","true",3,"labelsArray","dataArray","truncateLabel",4,"ngIf"],["chartTitle","Capacity","dataUnits","B","isMultiCluster","true",3,"labelsArray","dataArray","truncateLabel"],["chartTitle","IOPS","dataUnits","","decimals","0","isMultiCluster","true",3,"labelsArray","dataArray","truncateLabel"],["chartTitle","Client Throughput","dataUnits","B/s","decimals","2","isMultiCluster","true",3,"labelsArray","dataArray","truncateLabel"],[3,"total","used"]]},template:function(o,i){1&o&&(e.\u0275\u0275template(0,W3,2,3,"ng-template",null,0,e.\u0275\u0275templateRefExtractor)(2,K3,4,2,"ng-template",null,1,e.\u0275\u0275templateRefExtractor)(4,Q3,6,5,"ng-template",null,2,e.\u0275\u0275templateRefExtractor)(6,vM,2,2,"ng-container",7),e.\u0275\u0275pipe(7,"async"),e.\u0275\u0275template(8,MM,1,2,"ng-template",null,3,e.\u0275\u0275templateRefExtractor)),2&o&&(e.\u0275\u0275advance(6),e.\u0275\u0275property("ngIf",e.\u0275\u0275pipeBind1(7,1,i.managedByConfig$)))},dependencies:[l.NgClass,l.NgForOf,l.NgIf,Lt.o,it.m,Aa.i,x3,Ke.O,De.S,Ps.P,bs.M,Os,l.AsyncPipe],styles:[".fa-wrench[_ngcontent-%COMP%]{color:#25828e;font-size:6em}"]})}}return n})();function OM(n,c){if(1&n&&e.\u0275\u0275element(0,"cd-grafana",9),2&n){const t=e.\u0275\u0275nextContext(3);e.\u0275\u0275property("grafanaPath","ceph-cluster?var-cluster="+t.selectedClusterFsid)("type","metrics")}}function PM(n,c){1&n&&(e.\u0275\u0275elementContainerStart(0,6),e.\u0275\u0275elementStart(1,"a",7),e.\u0275\u0275i18n(2,1),e.\u0275\u0275elementEnd(),e.\u0275\u0275template(3,OM,1,2,"ng-template",8),e.\u0275\u0275elementContainerEnd())}function bM(n,c){if(1&n&&(e.\u0275\u0275elementContainerStart(0),e.\u0275\u0275elementStart(1,"nav",3,0),e.\u0275\u0275template(3,PM,4,0,"ng-container",4),e.\u0275\u0275elementEnd(),e.\u0275\u0275element(4,"div",5),e.\u0275\u0275elementContainerEnd()),2&n){const t=e.\u0275\u0275reference(2),o=e.\u0275\u0275nextContext();e.\u0275\u0275advance(3),e.\u0275\u0275property("ngIf",o.permissions.grafana.read),e.\u0275\u0275advance(),e.\u0275\u0275property("ngbNavOutlet",t)}}let Js=(()=>{class n{get selectedClusterFsid(){return void 0!==this.selection?this.selection.name:null}static{this.\u0275fac=function(o){return new(o||n)}}static{this.\u0275cmp=e.\u0275\u0275defineComponent({type:n,selectors:[["cd-multi-cluster-details"]],inputs:{permissions:"permissions",selection:"selection"},decls:1,vars:1,consts:()=>{let t,o;return t=$localize`:␟fbbaf5cb02ed419e79a27072478f716a4666a99d␟9041763226911499160:Performance Details`,o=$localize`:␟b62b6a95e00b7590aa0794c2d328f13d0d186b42␟7408615628195212314:Cluster details`,[["nav","ngbNav"],t,[4,"ngIf"],["ngbNav","","id","tabset-multi-cluster-details","cdStatefulTab","multi-cluster-details",1,"nav-tabs"],["ngbNavItem","performance-details",4,"ngIf"],[3,"ngbNavOutlet"],["ngbNavItem","performance-details"],["ngbNavLink","","routerLink","performance-details"],["ngbNavContent",""],["title",o,"uid","edtb0oxdq","grafanaStyle","four",3,"grafanaPath","type"]]},template:function(o,i){1&o&&e.\u0275\u0275template(0,bM,5,2,"ng-container",2),2&o&&e.\u0275\u0275property("ngIf",i.selection)},dependencies:[l.NgIf,V.NgbNavContent,V.NgbNav,V.NgbNavItem,V.NgbNavLink,V.NgbNavLinkBase,V.NgbNavOutlet,gt.c,yt.B,m.RouterLink]})}}return n})();const NM=["urlTpl"],IM=["durationTpl"],AM=(n,c)=>[n,c];function DM(n,c){if(1&n&&(e.\u0275\u0275elementContainerStart(0,8),e.\u0275\u0275elementStart(1,"div",9)(2,"div",10),e.\u0275\u0275element(3,"i",11),e.\u0275\u0275elementStart(4,"div",12)(5,"h4",13),e.\u0275\u0275text(6,"This cluster is already managed by cluster - "),e.\u0275\u0275elementStart(7,"a",14),e.\u0275\u0275text(8),e.\u0275\u0275element(9,"i",15),e.\u0275\u0275elementEnd()()()()(),e.\u0275\u0275elementContainerEnd()),2&n){const t=c.ngIf,o=e.\u0275\u0275nextContext(2);e.\u0275\u0275advance(3),e.\u0275\u0275property("ngClass",e.\u0275\u0275pureFunction2(3,AM,o.icons.large,o.icons.wrench)),e.\u0275\u0275advance(4),e.\u0275\u0275property("href",t.MANAGED_BY_CLUSTERS[0].url,e.\u0275\u0275sanitizeUrl),e.\u0275\u0275advance(),e.\u0275\u0275textInterpolate1(" ",t.MANAGED_BY_CLUSTERS[0].fsid," ")}}function yM(n,c){if(1&n&&(e.\u0275\u0275template(0,DM,10,6,"ng-container",7),e.\u0275\u0275pipe(1,"async")),2&n){const t=e.\u0275\u0275nextContext();e.\u0275\u0275property("ngIf",e.\u0275\u0275pipeBind1(1,1,t.managedByConfig$))}}function LM(n,c){if(1&n&&e.\u0275\u0275element(0,"cd-multi-cluster-details",25),2&n){const t=e.\u0275\u0275nextContext(4);e.\u0275\u0275property("permissions",t.permissions)("selection",t.expandedRow)}}function $M(n,c){if(1&n){const t=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"cd-table",22,4),e.\u0275\u0275listener("fetchData",function(){e.\u0275\u0275restoreView(t);const i=e.\u0275\u0275nextContext(3);return e.\u0275\u0275resetView(i.refresh())})("setExpandedRow",function(i){e.\u0275\u0275restoreView(t);const r=e.\u0275\u0275nextContext(3);return e.\u0275\u0275resetView(r.setExpandedRow(i))})("updateSelection",function(i){e.\u0275\u0275restoreView(t);const r=e.\u0275\u0275nextContext(3);return e.\u0275\u0275resetView(r.updateSelection(i))}),e.\u0275\u0275element(2,"cd-table-actions",23),e.\u0275\u0275template(3,LM,1,2,"cd-multi-cluster-details",24),e.\u0275\u0275elementEnd()}if(2&n){const t=e.\u0275\u0275nextContext(3);e.\u0275\u0275property("data",t.data)("columns",t.columns)("hasDetails",!0)("maxLimit",25),e.\u0275\u0275advance(2),e.\u0275\u0275property("permission",t.permissions.user)("selection",t.selection)("tableActions",t.tableActions)}}function xM(n,c){if(1&n&&(e.\u0275\u0275elementStart(0,"div")(1,"nav",17,3),e.\u0275\u0275elementContainerStart(3,18),e.\u0275\u0275elementStart(4,"a",19),e.\u0275\u0275i18n(5,5),e.\u0275\u0275elementEnd(),e.\u0275\u0275template(6,$M,4,7,"ng-template",20),e.\u0275\u0275elementContainerEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275element(7,"div",21),e.\u0275\u0275elementEnd()),2&n){const t=e.\u0275\u0275reference(2);e.\u0275\u0275advance(7),e.\u0275\u0275property("ngbNavOutlet",t)}}function UM(n,c){if(1&n&&(e.\u0275\u0275elementContainerStart(0),e.\u0275\u0275template(1,xM,8,1,"div",16),e.\u0275\u0275elementContainerEnd()),2&n){const t=c.ngIf;e.\u0275\u0275nextContext();const o=e.\u0275\u0275reference(1);e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf",0===t.MANAGED_BY_CLUSTERS.length)("ngIfElse",o)}}function wM(n,c){if(1&n&&(e.\u0275\u0275elementStart(0,"a",14),e.\u0275\u0275text(1),e.\u0275\u0275element(2,"i",15),e.\u0275\u0275elementEnd()),2&n){const t=c.data.row;e.\u0275\u0275property("href",t.url,e.\u0275\u0275sanitizeUrl),e.\u0275\u0275advance(),e.\u0275\u0275textInterpolate1(" ",null!=t&&null!=t.url&&t.url.endsWith("/")?null==t||null==t.url?null:t.url.slice(0,-1):t.url," ")}}function GM(n,c){if(1&n&&e.\u0275\u0275element(0,"i",28),2&n){const t=e.\u0275\u0275nextContext(2).data.row,o=e.\u0275\u0275nextContext();e.\u0275\u0275classMap(o.icons.warning),e.\u0275\u0275classProp("icon-danger-color",t.remainingDays<2)("icon-warning-color",t.remainingDays<8)}}function HM(n,c){if(1&n&&(e.\u0275\u0275elementStart(0,"span"),e.\u0275\u0275template(1,GM,1,7,"i",26),e.\u0275\u0275elementStart(2,"span",27),e.\u0275\u0275text(3),e.\u0275\u0275pipe(4,"duration"),e.\u0275\u0275elementEnd()()),2&n){const t=e.\u0275\u0275nextContext().data.row;e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf",t.remainingDays<8),e.\u0275\u0275advance(),e.\u0275\u0275propertyInterpolate("title",t.expiryDate),e.\u0275\u0275advance(),e.\u0275\u0275textInterpolate(e.\u0275\u0275pipeBind1(4,3,t.remainingTimeWithoutSeconds/1e3))}}function VM(n,c){if(1&n&&(e.\u0275\u0275elementStart(0,"span"),e.\u0275\u0275element(1,"i",29),e.\u0275\u0275elementStart(2,"span",30),e.\u0275\u0275text(3,"Token expired"),e.\u0275\u0275elementEnd()()),2&n){const t=e.\u0275\u0275nextContext(2);e.\u0275\u0275advance(),e.\u0275\u0275classMap(t.icons.danger)}}function BM(n,c){1&n&&(e.\u0275\u0275elementStart(0,"span"),e.\u0275\u0275text(1,"N/A"),e.\u0275\u0275elementEnd())}function zM(n,c){if(1&n&&e.\u0275\u0275template(0,HM,5,5,"span",6)(1,VM,4,3,"span",6)(2,BM,2,0,"span",6),2&n){const t=c.data.row;e.\u0275\u0275property("ngIf",t.remainingTimeWithoutSeconds>0&&"local-cluster"!==t.cluster_alias),e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf",t.remainingTimeWithoutSeconds<=0&&t.remainingDays<=0&&"local-cluster"!==t.cluster_alias),e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf","local-cluster"===t.cluster_alias)}}let XM=(()=>{class n extends I.D{constructor(t,o,i,r,p,F,D,x,H,X){super(),this.multiClusterService=t,this.router=o,this.actionLabels=i,this.notificationService=r,this.authStorageService=p,this.modalService=F,this.cookieService=D,this.settingsService=x,this.cdsModalService=H,this.route=X,this.subs=new K.Subscription,this.clusterTokenStatus={},this.columns=[],this.selection=new A.y,this.clustersTokenMap=new Map,this.icons=g.FI,this.prometheusConnectionError=[],this.tableActions=[{permission:"create",icon:g.FI.add,name:this.actionLabels.CONNECT,disable:Z=>this.getDisable("connect",Z),click:()=>this.openRemoteClusterInfoModal("connect")},{permission:"update",icon:g.FI.edit,name:this.actionLabels.EDIT,disable:Z=>this.getDisable("edit",Z),click:()=>this.openRemoteClusterInfoModal("edit")},{permission:"update",icon:g.FI.refresh,name:this.actionLabels.RECONNECT,disable:Z=>this.getDisable("reconnect",Z),click:()=>this.openRemoteClusterInfoModal("reconnect")},{permission:"delete",icon:g.FI.destroy,name:this.actionLabels.DISCONNECT,disable:Z=>this.getDisable("disconnect",Z),click:()=>this.openDeleteClusterModal()}],this.permissions=this.authStorageService.getPermissions()}ngOnInit(){this.subs.add(this.multiClusterService.subscribe(t=>{if(t&&t.config){this.hubUrl=t.hub_url,this.currentUrl=t.current_url;const o=Object.values(t.config).flat();this.data=o,this.checkClusterConnectionStatus(),this.data.forEach(i=>{i.remainingTimeWithoutSeconds=0,i.ttl&&i.ttl>0&&(i.ttl=1e3*i.ttl,i.remainingTimeWithoutSeconds=this.getRemainingTimeWithoutSeconds(i.ttl),i.remainingDays=this.getRemainingDays(i.ttl),i.expiryDate=new Date(Date.now()+i.ttl).toLocaleString())})}})),this.columns=[{prop:"cluster_alias",name:$localize`Alias`,flexGrow:2},{prop:"cluster_connection_status",name:$localize`Connection`,flexGrow:2,cellTransformation:O.x.badge,customTemplateConfig:{map:{1:{value:"DISCONNECTED",class:"badge-danger"},0:{value:"CONNECTED",class:"badge-success"},2:{value:"CHECKING..",class:"badge-info"}}}},{prop:"name",name:$localize`FSID`,flexGrow:2},{prop:"url",name:$localize`URL`,flexGrow:2,cellTemplate:this.urlTpl},{prop:"user",name:$localize`User`,flexGrow:2},{prop:"ttl",name:$localize`Token expires`,flexGrow:2,cellTemplate:this.durationTpl}],this.subs.add(this.multiClusterService.subscribeClusterTokenStatus(t=>{this.clusterTokenStatus=t,this.checkClusterConnectionStatus()})),this.managedByConfig$=this.settingsService.getValues("MANAGED_BY_CLUSTERS")}ngOnDestroy(){this.subs.unsubscribe()}getRemainingDays(t){if(void 0!==t&&null!=t)return t<0?0:Math.max(0,Math.floor(t/864e5))}getRemainingTimeWithoutSeconds(t){return 60*Math.floor(t/6e4)*1e3}checkClusterConnectionStatus(){this.clusterTokenStatus&&this.data&&this.data.forEach(t=>{const o=this.clusterTokenStatus[t.name];void 0!==o?(t.cluster_connection_status=o.status,t.ttl=o.time_left):t.cluster_connection_status=2,"local-cluster"===t.cluster_alias&&(t.cluster_connection_status=0)})}openRemoteClusterInfoModal(t){const o={clustersData:this.data,action:t,cluster:this.selection.first()};this.bsModalRef=this.modalService.show(Ys,o,{size:"xl"}),this.bsModalRef.componentInstance.submitAction.subscribe(()=>{const i=this.router.url.split("?")[0];this.multiClusterService.refreshMultiCluster(i),this.checkClusterConnectionStatus(),this.multiClusterService.isClusterAdded(!0)})}openDeleteClusterModal(){const t=this.selection.first();this.modalRef=this.cdsModalService.show(P.D,{infoMessage:$localize`Please note that the data for the disconnected cluster will be visible for a duration of ~ 5 minutes. After this period, it will be automatically removed.`,actionDescription:$localize`Disconnect`,itemDescription:$localize`Cluster`,itemNames:[t.cluster_alias+" - "+t.user],submitAction:()=>this.multiClusterService.deleteCluster(t.name,t.user).subscribe(()=>{this.cookieService.deleteToken(`${t.name}-${t.user}`),this.multiClusterService.showPrometheusDelayMessage(!0),this.cdsModalService.dismissAll(),this.notificationService.show(Le._.success,$localize`Disconnected cluster '${t.cluster_alias}'`);const o=this.router.url.split("?")[0];this.multiClusterService.refreshMultiCluster(o)})})}getDisable(t,o){return this.hubUrl!==this.currentUrl?$localize`Please switch to the local-cluster to ${t} a remote cluster`:o.hasSelection||"connect"===t?!(!o.hasSingleSelection||"local-cluster"!==o.first().cluster_alias||"connect"===t)&&$localize`Cannot ${t} local cluster`:$localize`Please select one or more clusters to ${t}`}updateSelection(t){this.selection=t}setExpandedRow(t){super.setExpandedRow(t),this.router.navigate(["performance-details"],{relativeTo:this.route})}refresh(){this.multiClusterService.refresh()}static{this.\u0275fac=function(o){return new(o||n)(e.\u0275\u0275directiveInject(wo.J),e.\u0275\u0275directiveInject(m.Router),e.\u0275\u0275directiveInject(f.Ss),e.\u0275\u0275directiveInject(Y.J),e.\u0275\u0275directiveInject(_.v),e.\u0275\u0275directiveInject(qt.B),e.\u0275\u0275directiveInject(wa),e.\u0275\u0275directiveInject(mo.h),e.\u0275\u0275directiveInject(Ge.V),e.\u0275\u0275directiveInject(m.ActivatedRoute))}}static{this.\u0275cmp=e.\u0275\u0275defineComponent({type:n,selectors:[["cd-multi-cluster-list"]],viewQuery:function(o,i){if(1&o&&(e.\u0275\u0275viewQuery(Ke.O,5),e.\u0275\u0275viewQuery(NM,7),e.\u0275\u0275viewQuery(IM,7)),2&o){let r;e.\u0275\u0275queryRefresh(r=e.\u0275\u0275loadQuery())&&(i.table=r.first),e.\u0275\u0275queryRefresh(r=e.\u0275\u0275loadQuery())&&(i.urlTpl=r.first),e.\u0275\u0275queryRefresh(r=e.\u0275\u0275loadQuery())&&(i.durationTpl=r.first)}},features:[e.\u0275\u0275InheritDefinitionFeature],decls:8,vars:3,consts:()=>{let t,o,i;return t=$localize`:␟ea0b31ae82070b88a2fceb730c510cbb73bff0a8␟5997773833823444252:Clusters List`,o=$localize`:␟873371924258ad0d0083b76911c0733b92ad2bff␟8191974628331929656:Cluster's token is about to expire`,i=$localize`:␟85f909a8b3dbb2932cb2307481dd69581302f4e6␟3381646268065105768:Cluster's token has expired`,[["emptyCluster",""],["urlTpl",""],["durationTpl",""],["nav","ngbNav"],["table",""],t,[4,"ngIf"],["class","container h-75",4,"ngIf"],[1,"container","h-75"],[1,"row","h-100","justify-content-center","align-items-center"],[1,"blank-page"],[1,"mx-auto","d-block",3,"ngClass"],[1,"mt-4","text-center"],[1,"mt-3"],["target","_blank",3,"href"],[1,"fa","fa-external-link"],[4,"ngIf","ngIfElse"],["ngbNav","",1,"nav-tabs"],["ngbNavItem",""],["ngbNavLink",""],["ngbNavContent",""],[3,"ngbNavOutlet"],["columnMode","flex","selectionType","single",3,"fetchData","setExpandedRow","updateSelection","data","columns","hasDetails","maxLimit"],["id","cluster-actions",1,"table-actions",3,"permission","selection","tableActions"],[3,"permissions","selection",4,"cdTableDetail"],[3,"permissions","selection"],["title",o,3,"icon-danger-color","icon-warning-color","class",4,"ngIf"],[3,"title"],["title",o],["title",i],[1,"text-danger"]]},template:function(o,i){1&o&&(e.\u0275\u0275template(0,yM,2,3,"ng-template",null,0,e.\u0275\u0275templateRefExtractor)(2,UM,2,2,"ng-container",6),e.\u0275\u0275pipe(3,"async"),e.\u0275\u0275template(4,wM,3,2,"ng-template",null,1,e.\u0275\u0275templateRefExtractor)(6,zM,3,3,"ng-template",null,2,e.\u0275\u0275templateRefExtractor)),2&o&&(e.\u0275\u0275advance(2),e.\u0275\u0275property("ngIf",e.\u0275\u0275pipeBind1(3,1,i.managedByConfig$)))},dependencies:[l.NgClass,l.NgIf,V.NgbNavContent,V.NgbNav,V.NgbNavItem,V.NgbNavLink,V.NgbNavLinkBase,V.NgbNavOutlet,Ke.O,dt.j,Ct.N,Js,l.AsyncPipe,Oa.b],styles:[".fa-wrench[_ngcontent-%COMP%]{color:#25828e;font-size:6em}"]})}}return n})();const Go={Default:"default",Always:"always",Never:"never"};var YM=s(23301);const Zs="application/yaml",qs="application/json";let Tn=(()=>{class n{constructor(t,o){this.http=t,this.notificationService=o,this.baseURL="api/smb",this.modalDataSubject=new K.Subject,this.modalData$=this.modalDataSubject.asObservable(),this.dataUploader=(0,e.signal)(null)}passData(t){this.modalDataSubject.next(t)}setDataUploaded(t){this.dataUploader.set(t)}uploadData(t){const o=t.values().next().value?.file;if(!o)return;if(o.type!==Zs&&o.type!==qs)return void this.notificationService.show(Le._.error,$localize`Invalid file type: only .json or .yaml accepted`);const i=new FileReader;i.onload=r=>{const p=r.target?.result;let F;try{o.type===Zs?F=YM.load(p):o.type===qs&&(F=JSON.parse(p))}catch(D){this.notificationService.show(Le._.error,$localize`${D.message}`)}this.setDataUploaded(F)},i.readAsText(o)}listClusters(){return this.http.get(`${this.baseURL}/cluster`)}createCluster(t){return this.http.post(`${this.baseURL}/cluster`,t)}removeCluster(t){return this.http.delete(`${this.baseURL}/cluster/${t}`,{observe:"response"})}listShares(t){return this.http.get(`${this.baseURL}/share?cluster_id=${t}`)}listJoinAuths(){return this.http.get(`${this.baseURL}/joinauth`)}listUsersGroups(){return this.http.get(`${this.baseURL}/usersgroups`)}createShare(t){return this.http.post(`${this.baseURL}/share`,t)}getShare(t,o){return this.http.get(`${this.baseURL}/share/${t}/${o}`)}deleteShare(t,o){return this.http.delete(`${this.baseURL}/share/${t}/${o}`,{observe:"response"})}getJoinAuth(t){return this.http.get(`${this.baseURL}/joinauth/${t}`)}getUsersGroups(t){return this.http.get(`${this.baseURL}/usersgroups/${t}`)}createJoinAuth(t){return this.http.post(`${this.baseURL}/joinauth`,{join_auth:t})}createUsersGroups(t){return this.http.post(`${this.baseURL}/usersgroups`,{usersgroups:t})}deleteJoinAuth(t){return this.http.delete(`${this.baseURL}/joinauth/${t}`,{observe:"response"})}deleteUsersgroups(t){return this.http.delete(`${this.baseURL}/usersgroups/${t}`,{observe:"response"})}getCluster(t){return this.http.get(`${this.baseURL}/cluster/${t}`)}static{this.\u0275fac=function(o){return new(o||n)(e.\u0275\u0275inject(h.HttpClient),e.\u0275\u0275inject(Y.J))}}static{this.\u0275prov=e.\u0275\u0275defineInjectable({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();var Vo=function(n){return n.cluster="cluster",n.activeDirectory="active-directory",n.standalone="standalone",n.overview="overview",n}(Vo||{});let Zi=(()=>{class n{constructor(t){this.router=t,this.activeTab=Vo.cluster}ngOnInit(){const t=this.router.url;this.activeTab=Object.values(Vo).find(o=>t.includes(o))||Vo.cluster}onSelected(t){this.selectedTab=t,this.router.navigate([`cephfs/smb/${t}`])}get Tabs(){return Vo}static{this.\u0275fac=function(o){return new(o||n)(e.\u0275\u0275directiveInject(m.Router))}}static{this.\u0275cmp=e.\u0275\u0275defineComponent({type:n,selectors:[["cd-smb-tabs"]],decls:5,vars:5,consts:()=>{let t,o,i,r;return t=$localize`:␟f4d1dd59b039ad818d9da7e29a773e10e41d9821␟2944102521023817891:Cluster`,o=$localize`:␟ba2d34a26d51cc899e2775365dfd02f2754c8a8e␟1993356963818031105:Active Directory`,i=$localize`:␟7b8ea73c8b3fbf1d30d862b7b49933af2a97daf3␟8707550193898847846:Standalone`,r=$localize`:␟e95ae009d0bdb45fcc656e8b65248cf7396080d5␟2614607010577950577:Overview`,[["type","contained","followFocus","true","isNavigation","true",3,"cacheActive"],["heading",t,3,"selected","active"],["heading",o,3,"selected","active"],["heading",i,3,"selected","active"],["heading",r,3,"selected","active"]]},template:function(o,i){1&o&&(e.\u0275\u0275elementStart(0,"cds-tabs",0)(1,"cds-tab",1),e.\u0275\u0275listener("selected",function(){return i.onSelected(i.Tabs.cluster)}),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(2,"cds-tab",2),e.\u0275\u0275listener("selected",function(){return i.onSelected(i.Tabs.activeDirectory)}),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(3,"cds-tab",3),e.\u0275\u0275listener("selected",function(){return i.onSelected(i.Tabs.standalone)}),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(4,"cds-tab",4),e.\u0275\u0275listener("selected",function(){return i.onSelected(i.Tabs.overview)}),e.\u0275\u0275elementEnd()()),2&o&&(e.\u0275\u0275property("cacheActive",!1),e.\u0275\u0275advance(),e.\u0275\u0275property("active",i.activeTab===i.Tabs.cluster),e.\u0275\u0275advance(),e.\u0275\u0275property("active",i.activeTab===i.Tabs.activeDirectory),e.\u0275\u0275advance(),e.\u0275\u0275property("active",i.activeTab===i.Tabs.standalone),e.\u0275\u0275advance(),e.\u0275\u0275property("active",i.activeTab===i.Tabs.overview))},dependencies:[L.Tabs,L.Tab]})}}return n})();const Bo="cephfs/smb/active-directory";let ZM=(()=>{class n{constructor(t,o,i,r,p,F,D){this.router=t,this.urlBuilder=o,this.authStorageService=i,this.actionLabels=r,this.smbService=p,this.modalService=F,this.taskWrapper=D,this.subject$=new K.BehaviorSubject([]),this.selection=new A.y,this.permission=this.authStorageService.getPermissions().smb}ngOnInit(){this.columns=[{name:$localize`Name`,prop:"auth_id",flexGrow:2},{name:$localize`Username`,prop:"auth.username",flexGrow:2},{name:$localize`Linked to cluster`,prop:"linked_to_cluster",flexGrow:2}],this.tableActions=[{name:`${this.actionLabels.CREATE} AD`,permission:"create",icon:g.FI.add,click:()=>this.router.navigate([this.urlBuilder.getCreate()]),canBePrimary:t=>!t.hasSelection},{name:this.actionLabels.EDIT,permission:"update",icon:g.FI.edit,click:()=>this.router.navigate([this.urlBuilder.getEdit(String(this.selection.first().auth_id))])},{name:this.actionLabels.DELETE,permission:"update",icon:g.FI.destroy,click:()=>this.openDeleteModal()}],this.joinAuth$=this.subject$.pipe((0,u.switchMap)(()=>this.smbService.listJoinAuths().pipe((0,u.catchError)(()=>(this.context.error(),(0,K.of)(null))))))}loadJoinAuth(){this.subject$.next([])}openDeleteModal(){const t=this.selection.first().auth_id;this.modalService.show(P.D,{itemDescription:$localize`Active directory access resource`,itemNames:[t],submitActionObservable:()=>this.taskWrapper.wrapTaskAroundCall({task:new ie.O(`${Bo}/${f.Qp.DELETE}`,{authId:t}),call:this.smbService.deleteJoinAuth(t)})})}updateSelection(t){this.selection=t}static{this.\u0275fac=function(o){return new(o||n)(e.\u0275\u0275directiveInject(m.Router),e.\u0275\u0275directiveInject(B.E),e.\u0275\u0275directiveInject(_.v),e.\u0275\u0275directiveInject(f.Ss),e.\u0275\u0275directiveInject(Tn),e.\u0275\u0275directiveInject(Ge.V),e.\u0275\u0275directiveInject(w.a))}}static{this.\u0275cmp=e.\u0275\u0275defineComponent({type:n,selectors:[["cd-smb-join-auth-list"]],features:[e.\u0275\u0275ProvidersFeature([{provide:B.E,useValue:new B.E(Bo)}])],decls:5,vars:8,consts:[["headerTitle","Active directory access resources","headerDescription","Logical management units for authorization on active directory (AD) servers","columnMode","flex","selectionType","single",3,"fetchData","updateSelection","data","columns","hasDetails"],[1,"table-actions"],[3,"permission","selection","tableActions"]],template:function(o,i){1&o&&(e.\u0275\u0275element(0,"cd-smb-tabs"),e.\u0275\u0275elementStart(1,"cd-table",0),e.\u0275\u0275pipe(2,"async"),e.\u0275\u0275listener("fetchData",function(){return i.loadJoinAuth()})("updateSelection",function(p){return i.updateSelection(p)}),e.\u0275\u0275elementStart(3,"div",1),e.\u0275\u0275element(4,"cd-table-actions",2),e.\u0275\u0275elementEnd()()),2&o&&(e.\u0275\u0275advance(),e.\u0275\u0275property("data",e.\u0275\u0275pipeBind1(2,6,i.joinAuth$))("columns",i.columns)("hasDetails",!1),e.\u0275\u0275advance(3),e.\u0275\u0275property("permission",i.permission)("selection",i.selection)("tableActions",i.tableActions))},dependencies:[Ke.O,dt.j,Zi,l.AsyncPipe]})}}return n})();const qM=()=>({lg:14}),eR=()=>({lg:1});function tR(n,c){1&n&&(e.\u0275\u0275elementStart(0,"span",22),e.\u0275\u0275elementContainerStart(1),e.\u0275\u0275i18n(2,5),e.\u0275\u0275elementContainerEnd(),e.\u0275\u0275elementEnd())}function nR(n,c){if(1&n&&e.\u0275\u0275template(0,tR,3,0,"span",21),2&n){e.\u0275\u0275nextContext();const t=e.\u0275\u0275reference(3),o=e.\u0275\u0275nextContext();e.\u0275\u0275property("ngIf",o.domainSettingsForm.showError("realm",t,"required"))}}function oR(n,c){if(1&n&&(e.\u0275\u0275elementStart(0,"option",32),e.\u0275\u0275text(1),e.\u0275\u0275elementEnd()),2&n){const t=c.$implicit;e.\u0275\u0275property("value",t.auth_id),e.\u0275\u0275advance(),e.\u0275\u0275textInterpolate(t.auth_id)}}function iR(n,c){1&n&&(e.\u0275\u0275elementStart(0,"span",22),e.\u0275\u0275elementContainerStart(1),e.\u0275\u0275i18n(2,9),e.\u0275\u0275elementContainerEnd(),e.\u0275\u0275elementEnd())}function aR(n,c){if(1&n){const t=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"div",35)(1,"cds-icon-button",36),e.\u0275\u0275listener("click",function(){e.\u0275\u0275restoreView(t);const i=e.\u0275\u0275nextContext().index,r=e.\u0275\u0275nextContext(3);return e.\u0275\u0275resetView(r.removeJoinSource(i))}),e.\u0275\u0275namespaceSVG(),e.\u0275\u0275element(2,"svg",37),e.\u0275\u0275elementEnd()()}2&n&&e.\u0275\u0275property("columnNumbers",e.\u0275\u0275pureFunction0(1,eR))}function sR(n,c){if(1&n&&(e.\u0275\u0275elementContainerStart(0,27)(1,28),e.\u0275\u0275elementStart(2,"div",29)(3,"div",30)(4,"cds-select",31)(5,"option",32),e.\u0275\u0275i18n(6,8),e.\u0275\u0275elementEnd(),e.\u0275\u0275template(7,oR,2,2,"option",33),e.\u0275\u0275elementEnd(),e.\u0275\u0275template(8,iR,3,0,"ng-template",null,2,e.\u0275\u0275templateRefExtractor),e.\u0275\u0275elementEnd(),e.\u0275\u0275template(10,aR,3,2,"div",34),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementContainerEnd()()),2&n){const t=c.index,o=e.\u0275\u0275reference(9),i=e.\u0275\u0275nextContext().ngIf,r=e.\u0275\u0275nextContext(2);e.\u0275\u0275advance(),e.\u0275\u0275property("formGroupName",t),e.\u0275\u0275advance(2),e.\u0275\u0275property("columnNumbers",e.\u0275\u0275pureFunction0(7,qM)),e.\u0275\u0275advance(),e.\u0275\u0275property("invalid",(null==r.domainSettingsForm.controls?null:r.domainSettingsForm.controls.join_sources.controls[t].invalid)&&(null==r.domainSettingsForm.controls?null:r.domainSettingsForm.controls.join_sources.controls[t].controls.ref.dirty))("invalidText",o),e.\u0275\u0275advance(),e.\u0275\u0275property("value",null),e.\u0275\u0275advance(2),e.\u0275\u0275property("ngForOf",i),e.\u0275\u0275advance(3),e.\u0275\u0275property("ngIf",t>0)}}function rR(n,c){if(1&n){const t=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"div",16),e.\u0275\u0275template(1,sR,11,8,"ng-container",23),e.\u0275\u0275elementStart(2,"div",16)(3,"button",24),e.\u0275\u0275listener("click",function(){e.\u0275\u0275restoreView(t);const i=e.\u0275\u0275nextContext(2);return e.\u0275\u0275resetView(i.addJoinSource())}),e.\u0275\u0275i18nStart(4,6),e.\u0275\u0275namespaceSVG(),e.\u0275\u0275element(5,"svg",25),e.\u0275\u0275i18nEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275namespaceHTML(),e.\u0275\u0275elementStart(6,"button",24),e.\u0275\u0275listener("click",function(){e.\u0275\u0275restoreView(t);const i=e.\u0275\u0275nextContext(2);return e.\u0275\u0275resetView(i.navigateCreateJoinSource())}),e.\u0275\u0275i18nStart(7,7),e.\u0275\u0275namespaceSVG(),e.\u0275\u0275element(8,"svg",26),e.\u0275\u0275i18nEnd(),e.\u0275\u0275elementEnd()()()}if(2&n){const t=e.\u0275\u0275nextContext(2);e.\u0275\u0275advance(),e.\u0275\u0275property("ngForOf",t.join_sources.controls)}}function lR(n,c){if(1&n){const t=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementContainerStart(0),e.\u0275\u0275elementStart(1,"div",14)(2,"form",15,0)(4,"div",16)(5,"cds-text-label",17),e.\u0275\u0275i18nStart(6,4),e.\u0275\u0275element(7,"input",18),e.\u0275\u0275i18nEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275template(8,nR,1,1,"ng-template",null,1,e.\u0275\u0275templateRefExtractor),e.\u0275\u0275elementEnd(),e.\u0275\u0275template(10,rR,9,1,"div",19),e.\u0275\u0275pipe(11,"async"),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(12,"cd-form-button-panel",20),e.\u0275\u0275pipe(13,"titlecase"),e.\u0275\u0275pipe(14,"upperFirst"),e.\u0275\u0275listener("submitActionEvent",function(){e.\u0275\u0275restoreView(t);const i=e.\u0275\u0275nextContext();return e.\u0275\u0275resetView(i.submit())}),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementContainerEnd()}if(2&n){const t=e.\u0275\u0275reference(9),o=e.\u0275\u0275nextContext();e.\u0275\u0275advance(2),e.\u0275\u0275property("formGroup",o.domainSettingsForm),e.\u0275\u0275advance(3),e.\u0275\u0275property("invalid",!o.domainSettingsForm.controls.realm.valid&&o.domainSettingsForm.controls.realm.dirty)("invalidText",t),e.\u0275\u0275advance(5),e.\u0275\u0275property("ngIf",e.\u0275\u0275pipeBind1(11,7,o.joinAuths$)),e.\u0275\u0275advance(2),e.\u0275\u0275property("form",o.domainSettingsForm)("submitText",e.\u0275\u0275pipeBind1(13,9,o.action)+" "+e.\u0275\u0275pipeBind1(14,11,o.resource))("modalForm",!0)}}let _R=(()=>{class n extends Te.g{constructor(t,o,i,r,p,F,D,x,H,X){super(),this.activeModal=t,this.actionLabels=o,this.rgwRealmService=i,this.notificationService=r,this.smbService=p,this.cd=F,this.router=D,this.action=x,this.resource=H,this.domainSettingsObject=X,this.action=this.actionLabels.UPDATE,this.resource=$localize`Active Directory (AD) parameters`}createForm(){this.domainSettingsForm=new Se.$({realm:new T.UntypedFormControl("",{validators:[T.Validators.required,ge.xQ.custom("uniqueName",t=>this.realmNames&&-1!==this.realmNames.indexOf(t))]}),join_sources:new T.FormArray([])})}ngOnInit(){this.createForm(),this.loadingReady(),this.joinAuths$=this.smbService.listJoinAuths(),this.domainSettingsForm.get("realm").setValue(this.domainSettingsObject?.realm);const t=this.domainSettingsForm.get("join_sources");this.domainSettingsObject?.join_sources&&this.domainSettingsObject.join_sources.forEach(o=>{t.push(this.newJoinSource(o))}),this.domainSettingsObject?this.action=this.actionLabels.EDIT:this.addJoinSource()}submit(){this.smbService.passData(this.domainSettingsForm.value),this.closeModal()}get join_sources(){return this.domainSettingsForm.get("join_sources")}newJoinSource(t){return new T.FormGroup({ref:new T.FormControl(t?.ref||null,T.Validators.required)})}addJoinSource(){this.join_sources.push(this.newJoinSource()),this.cd.detectChanges()}navigateCreateJoinSource(){this.closeModal(),this.router.navigate([`${Bo}/${f.Qp.CREATE}`])}removeJoinSource(t){const o=this.domainSettingsForm.get("join_sources");t>=0&&t<o.length&&o.removeAt(t),this.cd.detectChanges()}static{this.\u0275fac=function(o){return new(o||n)(e.\u0275\u0275directiveInject(V.NgbActiveModal),e.\u0275\u0275directiveInject(f.Ss),e.\u0275\u0275directiveInject(ma.$),e.\u0275\u0275directiveInject(Y.J),e.\u0275\u0275directiveInject(Tn),e.\u0275\u0275directiveInject(e.ChangeDetectorRef),e.\u0275\u0275directiveInject(m.Router),e.\u0275\u0275directiveInject("action",8),e.\u0275\u0275directiveInject("resource",8),e.\u0275\u0275directiveInject("domainSettingsObject",8))}}static{this.\u0275cmp=e.\u0275\u0275defineComponent({type:n,selectors:[["cd-smb-domain-setting-modal"]],features:[e.\u0275\u0275InheritDefinitionFeature],decls:7,vars:9,consts:()=>{let t,o,i,r,p,F,D,x;return t=$localize`:␟fb127ea03835b3230f0ed981c7080e2ccb879621␟3346778808274133574:${"\ufffd0\ufffd"}:INTERPOLATION: ${"\ufffd1\ufffd"}:INTERPOLATION_1:`,o=$localize`:␟188b92609243f4018eedb9b7097f6f5c645e7eb1␟4758626824172261727:Realm Name ${"\ufffd#7\ufffd\ufffd/#7\ufffd"}:TAG_INPUT:`,i=$localize`:␟9739656bb5643ced5c52a9aa90588cab8c10852a␟6410945776428459192: This field is required. `,r=$localize`:␟ed100493e5e5fcff8092999cccead033d1f85608␟4713748521192366124: Add AD access resource ${"\ufffd#5\ufffd"}:START_TAG__SVG_SVG:${"\ufffd/#5\ufffd"}:CLOSE_TAG__SVG_SVG:`,p=$localize`:␟d31eb7f1e152d7c689345c96bb8442d7d4fc6fd2␟1866987522512962001: Create AD access resource ${"\ufffd#8\ufffd"}:START_TAG__SVG_SVG:${"\ufffd/#8\ufffd"}:CLOSE_TAG__SVG_SVG:`,F=$localize`:␟38d68c2883d6ef94108a128a13d432af6ad45417␟5112457323180529286:Active Directory access resources`,D=$localize`:␟16b85e32568a3c3c7aade5adb5f22498ad6c8a40␟2995761817734423675:-- List of AD access resources -- `,x=$localize`:␟9739656bb5643ced5c52a9aa90588cab8c10852a␟6410945776428459192: This field is required. `,[["formDir","ngForm"],["realmNameError",""],["joinSourceError",""],t,o,i,r,p,D,x,["size","md",3,"overlaySelected","open","hasScrollingContent"],[3,"closeSelect"],["cdsModalHeaderHeading",""],[4,"cdFormLoading"],["cdsModalContent",""],["name","domainSettingsForm","novalidate","",3,"formGroup"],[1,"form-item"],["label","realm",3,"invalid","invalidText"],["cdsText","","type","text","formControlName","realm","autofocus",""],["class","form-item",4,"ngIf"],[3,"submitActionEvent","form","submitText","modalForm"],["class","invalid-feedback",4,"ngIf"],[1,"invalid-feedback"],["formArrayName","join_sources",4,"ngFor","ngForOf"],["cdsButton","tertiary","type","button",3,"click"],["cdsIcon","add","size","32","icon","",1,"cds--btn__icon"],["cdsIcon","launch","size","16",1,"cds--btn__icon"],["formArrayName","join_sources"],[3,"formGroupName"],["cdsRow","",1,"form-item","form-item-append"],["cdsCol","",3,"columnNumbers"],["label",F,"formControlName","ref",3,"invalid","invalidText"],[3,"value"],[3,"value",4,"ngFor","ngForOf"],["cdsCol","","class","item-action-btn spacing",3,"columnNumbers",4,"ngIf"],["cdsCol","",1,"item-action-btn","spacing",3,"columnNumbers"],["kind","danger","size","sm",3,"click"],["cdsIcon","trash-can","size","32",1,"cds--btn__icon"]]},template:function(o,i){1&o&&(e.\u0275\u0275elementStart(0,"cds-modal",10),e.\u0275\u0275listener("overlaySelected",function(){return i.closeModal()}),e.\u0275\u0275elementStart(1,"cds-modal-header",11),e.\u0275\u0275listener("closeSelect",function(){return i.closeModal()}),e.\u0275\u0275elementStart(2,"h3",12),e.\u0275\u0275i18n(3,3),e.\u0275\u0275pipe(4,"titlecase"),e.\u0275\u0275pipe(5,"upperFirst"),e.\u0275\u0275elementEnd()(),e.\u0275\u0275template(6,lR,15,13,"ng-container",13),e.\u0275\u0275elementEnd()),2&o&&(e.\u0275\u0275property("open",i.open)("hasScrollingContent",!0),e.\u0275\u0275advance(5),e.\u0275\u0275i18nExp(e.\u0275\u0275pipeBind1(4,5,i.action))(e.\u0275\u0275pipeBind1(5,7,i.resource)),e.\u0275\u0275i18nApply(3),e.\u0275\u0275advance(),e.\u0275\u0275property("cdFormLoading",i.loading))},dependencies:[l.NgForOf,l.NgIf,Q.e,ct.B,rt.G,De.S,ze.E,T.\u0275NgNoValidate,T.NgSelectOption,T.\u0275NgSelectMultipleOption,T.DefaultValueAccessor,T.NgControlStatus,T.NgControlStatusGroup,T.FormGroupDirective,T.FormControlName,T.FormGroupName,T.FormArrayName,L.ColumnDirective,L.RowDirective,L.Select,L.Option,L.TextInputLabelComponent,L.TextInput,L.Modal,L.ModalHeader,L.ModalContent,L.ModalHeaderHeading,L.Button,L.IconButton,L.IconDirective,l.AsyncPipe,l.TitleCasePipe,Oe.r],styles:[".spacing[_ngcontent-%COMP%]{margin-top:1.5rem}"]})}}return n})();const cR=["table"];function dR(n,c){if(1&n){const t=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementContainerStart(0),e.\u0275\u0275elementStart(1,"cd-table",1),e.\u0275\u0275listener("fetchData",function(){e.\u0275\u0275restoreView(t);const i=e.\u0275\u0275nextContext();return e.\u0275\u0275resetView(i.loadSMBShares())})("updateSelection",function(i){e.\u0275\u0275restoreView(t);const r=e.\u0275\u0275nextContext();return e.\u0275\u0275resetView(r.updateSelection(i))}),e.\u0275\u0275elementStart(2,"div",2),e.\u0275\u0275element(3,"cd-table-actions",3),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementContainerEnd()}if(2&n){const t=c.ngIf,o=e.\u0275\u0275nextContext();e.\u0275\u0275advance(),e.\u0275\u0275property("data",t)("columns",o.columns)("hasDetails",!1),e.\u0275\u0275advance(2),e.\u0275\u0275property("permission",o.permission)("selection",o.selection)("tableActions",o.tableActions)}}const zo="cephfs/smb/share";let uR=(()=>{class n{constructor(t,o,i,r,p){this.authStorageService=t,this.actionLabels=o,this.smbService=i,this.taskWrapper=r,this.modalService=p,this.selection=new A.y,this.subject$=new K.BehaviorSubject([]),this.permission=this.authStorageService.getPermissions().smb}ngOnInit(){this.columns=[{name:$localize`ID`,prop:"share_id",flexGrow:2},{name:$localize`Name`,prop:"name",flexGrow:2},{name:$localize`File System`,prop:"cephfs.volume",flexGrow:2},{name:$localize`Path`,prop:"cephfs.path",cellTransformation:O.x.path,flexGrow:2},{name:$localize`Subvolume group`,prop:"cephfs.subvolumegroup",flexGrow:2},{name:$localize`Subvolume`,prop:"cephfs.subvolume",flexGrow:2},{name:$localize`Provider`,prop:"cephfs.provider",flexGrow:2}],this.tableActions=[{name:`${this.actionLabels.CREATE}`,permission:"create",icon:g.FI.add,routerLink:()=>[`/${zo}/${f.Qp.CREATE}`,this.clusterId],canBePrimary:t=>!t.hasSingleSelection},{name:this.actionLabels.EDIT,permission:"update",icon:g.FI.edit,routerLink:()=>[`/${zo}/${f.Qp.EDIT}`,this.clusterId,this.selection.first().name]},{permission:"delete",icon:g.FI.destroy,click:()=>this.deleteShareModal(),name:this.actionLabels.DELETE}],this.smbShares$=this.subject$.pipe((0,u.switchMap)(()=>this.smbService.listShares(this.clusterId).pipe((0,u.catchError)(()=>(this.context.error(),(0,K.of)(null))))))}loadSMBShares(){this.subject$.next([])}updateSelection(t){this.selection=t}deleteShareModal(){const t=this.selection.first().cluster_id,o=this.selection.first().share_id,i=this.selection.first().name;this.modalRef=this.modalService.show(P.D,{itemDescription:$localize`SMB Share`,itemNames:[`Share: ${o} (${i}) from cluster: ${t}`],submitActionObservable:()=>this.taskWrapper.wrapTaskAroundCall({task:new ie.O(`${zo}/${f.Qp.DELETE}`,{share_id:o}),call:this.smbService.deleteShare(t,o)})})}static{this.\u0275fac=function(o){return new(o||n)(e.\u0275\u0275directiveInject(_.v),e.\u0275\u0275directiveInject(f.Ss),e.\u0275\u0275directiveInject(Tn),e.\u0275\u0275directiveInject(w.a),e.\u0275\u0275directiveInject(Ge.V))}}static{this.\u0275cmp=e.\u0275\u0275defineComponent({type:n,selectors:[["cd-smb-share-list"]],viewQuery:function(o,i){if(1&o&&e.\u0275\u0275viewQuery(cR,7),2&o){let r;e.\u0275\u0275queryRefresh(r=e.\u0275\u0275loadQuery())&&(i.table=r.first)}},inputs:{clusterId:"clusterId"},decls:2,vars:3,consts:[[4,"ngIf"],["headerTitle","Shares","headerDescription","Logical unit hosted by the cluster that maps to the given CephFS volume and path","columnMode","flex","selectionType","single",3,"fetchData","updateSelection","data","columns","hasDetails"],[1,"table-actions"],[1,"btn-group",3,"permission","selection","tableActions"]],template:function(o,i){1&o&&(e.\u0275\u0275template(0,dR,4,6,"ng-container",0),e.\u0275\u0275pipe(1,"async")),2&o&&e.\u0275\u0275property("ngIf",e.\u0275\u0275pipeBind1(1,1,i.smbShares$))},dependencies:[l.NgIf,Ke.O,dt.j,l.AsyncPipe]})}}return n})();function pR(n,c){if(1&n&&(e.\u0275\u0275elementContainerStart(0),e.\u0275\u0275element(1,"cd-smb-share-list",1),e.\u0275\u0275elementContainerEnd()),2&n){const t=e.\u0275\u0275nextContext();e.\u0275\u0275advance(),e.\u0275\u0275property("clusterId",t.selection.cluster_id)}}let mR=(()=>{class n{static{this.\u0275fac=function(o){return new(o||n)}}static{this.\u0275cmp=e.\u0275\u0275defineComponent({type:n,selectors:[["cd-smb-cluster-tabs"]],inputs:{selection:"selection"},decls:1,vars:1,consts:[[4,"ngIf"],[3,"clusterId"]],template:function(o,i){1&o&&e.\u0275\u0275template(0,pR,2,1,"ng-container",0),2&o&&e.\u0275\u0275property("ngIf",i.selection)},dependencies:[l.NgIf,uR]})}}return n})();const fR=["table"];function ER(n,c){if(1&n&&e.\u0275\u0275element(0,"cd-smb-cluster-tabs",5),2&n){const t=e.\u0275\u0275nextContext(2);e.\u0275\u0275property("selection",t.expandedRow)}}function gR(n,c){if(1&n){const t=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementContainerStart(0),e.\u0275\u0275elementStart(1,"cd-table",1),e.\u0275\u0275listener("setExpandedRow",function(i){e.\u0275\u0275restoreView(t);const r=e.\u0275\u0275nextContext();return e.\u0275\u0275resetView(r.setExpandedRow(i))})("fetchData",function(i){e.\u0275\u0275restoreView(t);const r=e.\u0275\u0275nextContext();return e.\u0275\u0275resetView(r.loadSMBCluster(i))})("updateSelection",function(i){e.\u0275\u0275restoreView(t);const r=e.\u0275\u0275nextContext();return e.\u0275\u0275resetView(r.updateSelection(i))}),e.\u0275\u0275elementStart(2,"div",2),e.\u0275\u0275element(3,"cd-table-actions",3),e.\u0275\u0275elementEnd(),e.\u0275\u0275template(4,ER,1,1,"cd-smb-cluster-tabs",4),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementContainerEnd()}if(2&n){const t=c.ngIf,o=e.\u0275\u0275nextContext();e.\u0275\u0275advance(),e.\u0275\u0275property("data",t)("columns",o.columns)("hasDetails",!0),e.\u0275\u0275advance(2),e.\u0275\u0275property("permission",o.permission)("selection",o.selection)("tableActions",o.tableActions)}}const To="cephfs/smb/cluster";let er=(()=>{class n extends I.D{constructor(t,o,i,r,p,F){super(),this.authStorageService=t,this.actionLabels=o,this.smbService=i,this.modalService=r,this.taskWrapper=p,this.urlBuilder=F,this.subject$=new K.BehaviorSubject([]),this.selection=new A.y,this.permission=this.authStorageService.getPermissions().smb}ngOnInit(){this.columns=[{name:$localize`Name`,prop:"cluster_id",flexGrow:2},{name:$localize`Authentication Mode`,prop:"auth_mode",flexGrow:2}],this.tableActions=[{name:`${this.actionLabels.CREATE} cluster`,permission:"create",icon:g.FI.add,routerLink:()=>this.urlBuilder.getCreate(),canBePrimary:t=>!t.hasSingleSelection},{name:this.actionLabels.EDIT,permission:"update",icon:g.FI.edit,routerLink:()=>this.selection.first()&&this.urlBuilder.getEdit(this.selection.first().cluster_id)},{permission:"delete",icon:g.FI.destroy,click:()=>this.removeSMBClusterModal(),name:this.actionLabels.DELETE}],this.smbClusters$=this.subject$.pipe((0,u.switchMap)(()=>this.smbService.listClusters()?.pipe((0,u.catchError)(()=>(this.context.error(),(0,K.of)(null))))))}loadSMBCluster(){this.subject$.next([])}updateSelection(t){this.selection=t}removeSMBClusterModal(){const t=this.selection.first().cluster_id;this.modalService.show(P.D,{itemDescription:$localize`Cluster`,itemNames:[t],submitActionObservable:()=>this.taskWrapper.wrapTaskAroundCall({task:new ie.O(`${To}/${f.Qp.DELETE}`,{cluster_id:t}),call:this.smbService.removeCluster(t)})})}static{this.\u0275fac=function(o){return new(o||n)(e.\u0275\u0275directiveInject(_.v),e.\u0275\u0275directiveInject(f.Ss),e.\u0275\u0275directiveInject(Tn),e.\u0275\u0275directiveInject(Ge.V),e.\u0275\u0275directiveInject(w.a),e.\u0275\u0275directiveInject(B.E))}}static{this.\u0275cmp=e.\u0275\u0275defineComponent({type:n,selectors:[["cd-smb-cluster-list"]],viewQuery:function(o,i){if(1&o&&e.\u0275\u0275viewQuery(fR,7),2&o){let r;e.\u0275\u0275queryRefresh(r=e.\u0275\u0275loadQuery())&&(i.table=r.first)}},features:[e.\u0275\u0275ProvidersFeature([{provide:B.E,useValue:new B.E(To)}]),e.\u0275\u0275InheritDefinitionFeature],decls:3,vars:3,consts:[[4,"ngIf"],["headerTitle","Clusters","headerDescription","Logical management units that may map to one or more managed Samba service","columnMode","flex","selectionType","single",3,"setExpandedRow","fetchData","updateSelection","data","columns","hasDetails"],[1,"table-actions"],[1,"btn-group",3,"permission","selection","tableActions"],[3,"selection",4,"cdTableDetail"],[3,"selection"]],template:function(o,i){1&o&&(e.\u0275\u0275element(0,"cd-smb-tabs"),e.\u0275\u0275template(1,gR,5,6,"ng-container",0),e.\u0275\u0275pipe(2,"async")),2&o&&(e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf",e.\u0275\u0275pipeBind1(2,1,i.smbClusters$)))},dependencies:[l.NgIf,Ke.O,dt.j,Ct.N,mR,Zi,l.AsyncPipe]})}}return n})(),CR=(()=>{class n{ngOnInit(){this.columns=[{name:$localize`Username`,prop:"name",flexGrow:2}]}static{this.\u0275fac=function(o){return new(o||n)}}static{this.\u0275cmp=e.\u0275\u0275defineComponent({type:n,selectors:[["cd-smb-usersgroups-details"]],inputs:{selection:"selection"},decls:3,vars:4,consts:()=>{let t;return t=$localize`:␟4d13a9cd5ed3dcee0eab22cb25198d43886942be␟4555457172864212828:Users`,[["type","contained","followFocus","true","isNavigation","true",3,"cacheActive"],["heading",t],["columnMode","flex","selectionType","single",3,"data","columns","hasDetails"]]},template:function(o,i){1&o&&(e.\u0275\u0275elementStart(0,"cds-tabs",0)(1,"cds-tab",1),e.\u0275\u0275element(2,"cd-table",2),e.\u0275\u0275elementEnd()()),2&o&&(e.\u0275\u0275property("cacheActive",!1),e.\u0275\u0275advance(2),e.\u0275\u0275property("data",null==i.selection?null:i.selection.values.users)("columns",i.columns)("hasDetails",!1))},dependencies:[Ke.O,L.Tabs,L.Tab]})}}return n})();const SR=["groupsNamesTpl"];function hR(n,c){if(1&n&&e.\u0275\u0275element(0,"cd-smb-usersgroups-details",6),2&n){const t=e.\u0275\u0275nextContext(2);e.\u0275\u0275property("selection",t.expandedRow)}}function TR(n,c){if(1&n){const t=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementContainerStart(0),e.\u0275\u0275elementStart(1,"cd-table",2),e.\u0275\u0275listener("setExpandedRow",function(i){e.\u0275\u0275restoreView(t);const r=e.\u0275\u0275nextContext();return e.\u0275\u0275resetView(r.setExpandedRow(i))})("fetchData",function(){e.\u0275\u0275restoreView(t);const i=e.\u0275\u0275nextContext();return e.\u0275\u0275resetView(i.loadUsersGroups())})("updateSelection",function(i){e.\u0275\u0275restoreView(t);const r=e.\u0275\u0275nextContext();return e.\u0275\u0275resetView(r.updateSelection(i))}),e.\u0275\u0275elementStart(2,"div",3),e.\u0275\u0275element(3,"cd-table-actions",4),e.\u0275\u0275elementEnd(),e.\u0275\u0275template(4,hR,1,1,"cd-smb-usersgroups-details",5),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementContainerEnd()}if(2&n){const t=c.ngIf,o=e.\u0275\u0275nextContext();e.\u0275\u0275advance(),e.\u0275\u0275property("data",t)("columns",o.columns)("hasDetails",!0),e.\u0275\u0275advance(2),e.\u0275\u0275property("permission",o.permission)("selection",o.selection)("tableActions",o.tableActions)}}function FR(n,c){if(1&n&&(e.\u0275\u0275elementStart(0,"cds-tag",8),e.\u0275\u0275text(1),e.\u0275\u0275elementEnd()),2&n){const t=c.$implicit;e.\u0275\u0275advance(),e.\u0275\u0275textInterpolate1(" ",null==t?null:t.name," ")}}function vR(n,c){if(1&n&&e.\u0275\u0275template(0,FR,2,1,"cds-tag",7),2&n){const t=c.data.row;e.\u0275\u0275property("ngForOf",null==t?null:t.values.groups)}}const Xo="cephfs/smb/standalone";let MR=(()=>{class n extends I.D{constructor(t,o,i,r,p,F,D){super(),this.router=t,this.urlBuilder=o,this.authStorageService=i,this.actionLabels=r,this.smbService=p,this.modalService=F,this.taskWrapper=D,this.subject$=new K.BehaviorSubject([]),this.selection=new A.y,this.permission=this.authStorageService.getPermissions().smb}ngOnInit(){this.columns=[{name:$localize`Name`,prop:"users_groups_id",flexGrow:2},{name:$localize`Number of users`,prop:"values.users.length",flexGrow:2},{name:$localize`Groups`,prop:"values.groups",cellTemplate:this.groupsNamesTpl,flexGrow:2},{name:$localize`Linked to cluster`,prop:"values.linked_to_cluster",flexGrow:2}],this.tableActions=[{name:`${this.actionLabels.CREATE} standalone`,permission:"create",icon:g.FI.add,click:()=>this.router.navigate([this.urlBuilder.getCreate()]),canBePrimary:t=>!t.hasSelection},{name:this.actionLabels.EDIT,permission:"update",icon:g.FI.edit,click:()=>this.router.navigate([this.urlBuilder.getEdit(String(this.selection.first().users_groups_id))])},{name:this.actionLabels.DELETE,permission:"delete",icon:g.FI.destroy,click:()=>this.openDeleteModal()}],this.usersGroups$=this.subject$.pipe((0,u.switchMap)(()=>this.smbService.listUsersGroups().pipe((0,u.catchError)(()=>(this.context.error(),(0,K.of)(null))))))}loadUsersGroups(){this.subject$.next([])}openDeleteModal(){const t=this.selection.first().users_groups_id;this.modalService.show(P.D,{itemDescription:$localize`Users and groups access resource`,itemNames:[t],submitActionObservable:()=>this.taskWrapper.wrapTaskAroundCall({task:new ie.O(`${Xo}/${f.Qp.DELETE}`,{usersGroupsId:t}),call:this.smbService.deleteUsersgroups(t)})})}updateSelection(t){this.selection=t}static{this.\u0275fac=function(o){return new(o||n)(e.\u0275\u0275directiveInject(m.Router),e.\u0275\u0275directiveInject(B.E),e.\u0275\u0275directiveInject(_.v),e.\u0275\u0275directiveInject(f.Ss),e.\u0275\u0275directiveInject(Tn),e.\u0275\u0275directiveInject(Ge.V),e.\u0275\u0275directiveInject(w.a))}}static{this.\u0275cmp=e.\u0275\u0275defineComponent({type:n,selectors:[["cd-smb-users-list"]],viewQuery:function(o,i){if(1&o&&e.\u0275\u0275viewQuery(SR,7),2&o){let r;e.\u0275\u0275queryRefresh(r=e.\u0275\u0275loadQuery())&&(i.groupsNamesTpl=r.first)}},features:[e.\u0275\u0275ProvidersFeature([{provide:B.E,useValue:new B.E(Xo)}]),e.\u0275\u0275InheritDefinitionFeature],decls:5,vars:3,consts:[["groupsNamesTpl",""],[4,"ngIf"],["headerTitle","Standalone access resoruces","headerDescription","Logical management units for authorization on Standalone servers","columnMode","flex","selectionType","single",3,"setExpandedRow","fetchData","updateSelection","data","columns","hasDetails"],[1,"table-actions"],[3,"permission","selection","tableActions"],[3,"selection",4,"cdTableDetail"],[3,"selection"],["size","md",4,"ngFor","ngForOf"],["size","md"]],template:function(o,i){1&o&&(e.\u0275\u0275element(0,"cd-smb-tabs"),e.\u0275\u0275template(1,TR,5,6,"ng-container",1),e.\u0275\u0275pipe(2,"async"),e.\u0275\u0275template(3,vR,1,1,"ng-template",null,0,e.\u0275\u0275templateRefExtractor)),2&o&&(e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf",e.\u0275\u0275pipeBind1(2,1,i.usersGroups$)))},dependencies:[l.NgForOf,l.NgIf,Ke.O,dt.j,Ct.N,L.Tag,CR,Zi,l.AsyncPipe]})}}return n})();var RR=s(95131);const OR=()=>({md:4}),PR=()=>({md:12}),tr=()=>({lg:14}),Ba=()=>({lg:1}),nr=()=>({lg:7});function bR(n,c){1&n&&(e.\u0275\u0275elementStart(0,"span",56),e.\u0275\u0275i18n(1,12),e.\u0275\u0275elementEnd())}function NR(n,c){if(1&n&&e.\u0275\u0275template(0,bR,2,0,"span",55),2&n){e.\u0275\u0275nextContext();const t=e.\u0275\u0275reference(2),o=e.\u0275\u0275nextContext(2);e.\u0275\u0275property("ngIf",o.smbForm.showError("cluster_id",t,"required"))}}function IR(n,c){1&n&&(e.\u0275\u0275elementStart(0,"span",56),e.\u0275\u0275i18n(1,13),e.\u0275\u0275elementEnd())}function AR(n,c){if(1&n&&e.\u0275\u0275template(0,IR,2,0,"span",55),2&n){e.\u0275\u0275nextContext();const t=e.\u0275\u0275reference(2),o=e.\u0275\u0275nextContext(2);e.\u0275\u0275property("ngIf",o.smbForm.showError("auth_mode",t,"required"))}}function DR(n,c){1&n&&(e.\u0275\u0275elementStart(0,"span",56),e.\u0275\u0275i18n(1,15),e.\u0275\u0275elementEnd())}function yR(n,c){if(1&n){const t=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"div",37)(1,"div",57)(2,"cds-text-label",58),e.\u0275\u0275i18nStart(3,14),e.\u0275\u0275elementStart(4,"div",59)(5,"input",60),e.\u0275\u0275listener("click",function(){e.\u0275\u0275restoreView(t);const i=e.\u0275\u0275nextContext(3);return e.\u0275\u0275resetView(i.editDomainSettingsModal())}),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(6,"cds-icon-button",61),e.\u0275\u0275listener("click",function(){e.\u0275\u0275restoreView(t);const i=e.\u0275\u0275nextContext(3);return e.\u0275\u0275resetView(i.editDomainSettingsModal())}),e.\u0275\u0275namespaceSVG(),e.\u0275\u0275element(7,"svg",62),e.\u0275\u0275elementEnd(),e.\u0275\u0275namespaceHTML(),e.\u0275\u0275elementStart(8,"cds-icon-button",63),e.\u0275\u0275listener("click",function(){e.\u0275\u0275restoreView(t);const i=e.\u0275\u0275nextContext(3);return e.\u0275\u0275resetView(i.deleteDomainSettingsModal())}),e.\u0275\u0275namespaceSVG(),e.\u0275\u0275element(9,"svg",64),e.\u0275\u0275elementEnd()(),e.\u0275\u0275i18nEnd(),e.\u0275\u0275elementEnd()(),e.\u0275\u0275template(10,DR,2,0,"span",55),e.\u0275\u0275namespaceHTML(),e.\u0275\u0275element(11,"div"),e.\u0275\u0275elementEnd()}if(2&n){const t=e.\u0275\u0275nextContext(3);e.\u0275\u0275advance(),e.\u0275\u0275property("columnNumbers",e.\u0275\u0275pureFunction0(4,PR)),e.\u0275\u0275advance(4),e.\u0275\u0275property("value",null==t.domainSettingsObject?null:t.domainSettingsObject.realm)("invalid",!t.smbForm.controls.domain_settings.valid&&t.smbForm.controls.domain_settings.dirty&&t.smbForm.controls.domain_settings.touched),e.\u0275\u0275advance(5),e.\u0275\u0275property("ngIf",t.smbForm.get("domain_settings").hasError("required")&&t.smbForm.controls.domain_settings.touched)}}function LR(n,c){if(1&n&&(e.\u0275\u0275elementStart(0,"option",69),e.\u0275\u0275text(1),e.\u0275\u0275elementEnd()),2&n){const t=c.$implicit;e.\u0275\u0275property("value",t.users_groups_id),e.\u0275\u0275advance(),e.\u0275\u0275textInterpolate(t.users_groups_id)}}function $R(n,c){1&n&&(e.\u0275\u0275elementStart(0,"span",56),e.\u0275\u0275i18n(1,17),e.\u0275\u0275elementEnd())}function xR(n,c){if(1&n){const t=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"cds-icon-button",73),e.\u0275\u0275listener("click",function(){e.\u0275\u0275restoreView(t);const i=e.\u0275\u0275nextContext(2).index,r=e.\u0275\u0275nextContext(3);return e.\u0275\u0275resetView(r.removeUserGroupSetting(i))}),e.\u0275\u0275namespaceSVG(),e.\u0275\u0275element(1,"svg",74),e.\u0275\u0275elementEnd()}}function UR(n,c){if(1&n&&(e.\u0275\u0275elementStart(0,"div",67)(1,"div",33)(2,"cds-select",68)(3,"option",69),e.\u0275\u0275i18n(4,16),e.\u0275\u0275elementEnd(),e.\u0275\u0275template(5,LR,2,2,"option",70),e.\u0275\u0275elementEnd(),e.\u0275\u0275template(6,$R,2,0,"ng-template",null,3,e.\u0275\u0275templateRefExtractor),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(8,"div",71),e.\u0275\u0275template(9,xR,2,0,"cds-icon-button",72),e.\u0275\u0275elementEnd()()),2&n){const t=c.ngIf,o=e.\u0275\u0275reference(7),i=e.\u0275\u0275nextContext().index,r=e.\u0275\u0275nextContext(3);e.\u0275\u0275advance(),e.\u0275\u0275property("columnNumbers",e.\u0275\u0275pureFunction0(8,tr)),e.\u0275\u0275advance(),e.\u0275\u0275property("formControlName",i)("invalid",r.smbForm.controls.joinSources.controls[i].invalid&&r.smbForm.controls.joinSources.controls[i].dirty)("invalidText",o),e.\u0275\u0275advance(),e.\u0275\u0275property("value",null),e.\u0275\u0275advance(2),e.\u0275\u0275property("ngForOf",t),e.\u0275\u0275advance(3),e.\u0275\u0275property("columnNumbers",e.\u0275\u0275pureFunction0(9,Ba)),e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf",i>0)}}function wR(n,c){if(1&n&&(e.\u0275\u0275elementContainerStart(0,65),e.\u0275\u0275template(1,UR,10,10,"div",66),e.\u0275\u0275pipe(2,"async"),e.\u0275\u0275elementContainerEnd()),2&n){const t=e.\u0275\u0275nextContext(3);e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf",e.\u0275\u0275pipeBind1(2,1,"user"===t.smbForm.get("auth_mode").value&&t.usersGroups$))}}function GR(n,c){if(1&n){const t=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"div",37)(1,"button",49),e.\u0275\u0275listener("click",function(){e.\u0275\u0275restoreView(t);const i=e.\u0275\u0275nextContext(3);return e.\u0275\u0275resetView(i.addUserGroupSetting())}),e.\u0275\u0275i18nStart(2,18),e.\u0275\u0275namespaceSVG(),e.\u0275\u0275element(3,"svg",50),e.\u0275\u0275i18nEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275namespaceHTML(),e.\u0275\u0275elementStart(4,"button",49),e.\u0275\u0275listener("click",function(){e.\u0275\u0275restoreView(t);const i=e.\u0275\u0275nextContext(3);return e.\u0275\u0275resetView(i.navigateCreateUsersGroups())}),e.\u0275\u0275i18nStart(5,19),e.\u0275\u0275namespaceSVG(),e.\u0275\u0275element(6,"svg",75),e.\u0275\u0275i18nEnd(),e.\u0275\u0275elementEnd()()}}function HR(n,c){1&n&&(e.\u0275\u0275elementStart(0,"span",56),e.\u0275\u0275i18n(1,23),e.\u0275\u0275elementEnd())}function VR(n,c){if(1&n&&e.\u0275\u0275template(0,HR,2,0,"span",55),2&n){e.\u0275\u0275nextContext(4);const t=e.\u0275\u0275reference(2),o=e.\u0275\u0275nextContext(2);e.\u0275\u0275property("ngIf",o.smbForm.showError("label",t,"required"))}}function BR(n,c){if(1&n){const t=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"div",37)(1,"cds-combo-box",79),e.\u0275\u0275listener("selected",function(i){e.\u0275\u0275restoreView(t);const r=e.\u0275\u0275nextContext(5);return e.\u0275\u0275resetView(r.multiSelector(i,"label"))}),e.\u0275\u0275i18nStart(2,22),e.\u0275\u0275element(3,"cds-dropdown-list"),e.\u0275\u0275i18nEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275template(4,VR,1,1,"ng-template",null,4,e.\u0275\u0275templateRefExtractor),e.\u0275\u0275elementEnd()}if(2&n){const t=e.\u0275\u0275reference(5),o=e.\u0275\u0275nextContext().ngIf,i=e.\u0275\u0275nextContext(4);e.\u0275\u0275advance(),e.\u0275\u0275property("appendInline",!0)("items",o.labels)("invalid",i.smbForm.controls.label.invalid&&i.smbForm.controls.label.dirty)("invalidText",t)}}function zR(n,c){if(1&n){const t=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"div",37)(1,"cds-combo-box",80),e.\u0275\u0275listener("selected",function(i){e.\u0275\u0275restoreView(t);const r=e.\u0275\u0275nextContext(5);return e.\u0275\u0275resetView(r.multiSelector(i,"hosts"))}),e.\u0275\u0275i18nStart(2,24),e.\u0275\u0275element(3,"cds-dropdown-list"),e.\u0275\u0275i18nEnd(),e.\u0275\u0275elementEnd()()}if(2&n){const t=e.\u0275\u0275nextContext().ngIf;e.\u0275\u0275advance(),e.\u0275\u0275property("appendInline",!0)("items",t.hosts)}}function XR(n,c){if(1&n&&(e.\u0275\u0275elementContainerStart(0),e.\u0275\u0275template(1,BR,6,4,"div",43)(2,zR,4,2,"div",43),e.\u0275\u0275elementContainerEnd()),2&n){const t=e.\u0275\u0275nextContext(4);e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf","label"===t.smbForm.controls.placement.value),e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf","hosts"===t.smbForm.controls.placement.value)}}function kR(n,c){if(1&n&&(e.\u0275\u0275elementContainerStart(0),e.\u0275\u0275elementStart(1,"div",37)(2,"cds-select",76)(3,"option",77),e.\u0275\u0275i18n(4,20),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(5,"option",78),e.\u0275\u0275i18n(6,21),e.\u0275\u0275elementEnd()()(),e.\u0275\u0275template(7,XR,3,2,"ng-container",46),e.\u0275\u0275pipe(8,"async"),e.\u0275\u0275elementContainerEnd()),2&n){const t=e.\u0275\u0275nextContext(3);e.\u0275\u0275advance(7),e.\u0275\u0275property("ngIf",e.\u0275\u0275pipeBind1(8,1,t.hostsAndLabels$))}}function jR(n,c){if(1&n){const t=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementContainerStart(0,81),e.\u0275\u0275elementStart(1,"div",67)(2,"div",33)(3,"cds-text-label",82),e.\u0275\u0275i18nStart(4,25),e.\u0275\u0275element(5,"input",83),e.\u0275\u0275i18nEnd(),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(6,"div",71)(7,"cds-icon-button",73),e.\u0275\u0275listener("click",function(){const i=e.\u0275\u0275restoreView(t).index,r=e.\u0275\u0275nextContext(3);return e.\u0275\u0275resetView(r.removeCustomDNS(i))}),e.\u0275\u0275namespaceSVG(),e.\u0275\u0275element(8,"svg",74),e.\u0275\u0275elementEnd()()(),e.\u0275\u0275elementContainerEnd()}if(2&n){const t=c.index;e.\u0275\u0275advance(2),e.\u0275\u0275property("columnNumbers",e.\u0275\u0275pureFunction0(3,tr)),e.\u0275\u0275advance(3),e.\u0275\u0275property("formControlName",t),e.\u0275\u0275advance(),e.\u0275\u0275property("columnNumbers",e.\u0275\u0275pureFunction0(4,Ba))}}function WR(n,c){if(1&n&&(e.\u0275\u0275elementStart(0,"option"),e.\u0275\u0275i18n(1,26),e.\u0275\u0275pipe(2,"upperFirst"),e.\u0275\u0275elementEnd()),2&n){const t=c.$implicit;e.\u0275\u0275advance(2),e.\u0275\u0275i18nExp(e.\u0275\u0275pipeBind1(2,1,t)),e.\u0275\u0275i18nApply(1)}}function KR(n,c){1&n&&(e.\u0275\u0275elementStart(0,"span",56),e.\u0275\u0275elementContainerStart(1),e.\u0275\u0275i18n(2,29),e.\u0275\u0275elementContainerEnd(),e.\u0275\u0275elementEnd())}function QR(n,c){if(1&n){const t=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementContainerStart(0,84)(1,85),e.\u0275\u0275elementStart(2,"div",67)(3,"div",33)(4,"cds-text-label",86),e.\u0275\u0275i18nStart(5,27),e.\u0275\u0275element(6,"input",87),e.\u0275\u0275i18nEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275template(7,KR,3,0,"ng-template",null,5,e.\u0275\u0275templateRefExtractor),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(9,"div",33)(10,"cds-text-label",88),e.\u0275\u0275i18nStart(11,28),e.\u0275\u0275element(12,"input",89),e.\u0275\u0275i18nEnd(),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(13,"div",71)(14,"cds-icon-button",73),e.\u0275\u0275listener("click",function(){const i=e.\u0275\u0275restoreView(t).index,r=e.\u0275\u0275nextContext(3);return e.\u0275\u0275resetView(r.removePublicAddrs(i))}),e.\u0275\u0275namespaceSVG(),e.\u0275\u0275element(15,"svg",74),e.\u0275\u0275elementEnd()()(),e.\u0275\u0275elementContainerEnd()()}if(2&n){const t=c.index,o=e.\u0275\u0275reference(8),i=e.\u0275\u0275nextContext(3);e.\u0275\u0275advance(),e.\u0275\u0275property("formGroupName",t),e.\u0275\u0275advance(2),e.\u0275\u0275property("columnNumbers",e.\u0275\u0275pureFunction0(7,nr)),e.\u0275\u0275advance(),e.\u0275\u0275property("invalid",(null==i.smbForm||null==i.smbForm.controls.public_addrs?null:i.smbForm.controls.public_addrs.controls[t].controls.address.invalid)&&(null==i.smbForm||null==i.smbForm.controls.public_addrs?null:i.smbForm.controls.public_addrs.controls[t].controls.address.dirty))("invalidText",o),e.\u0275\u0275advance(2),e.\u0275\u0275property("invalid",(null==i.smbForm?null:i.smbForm.controls.public_addrs.controls[t].controls.address.invalid)&&(null==i.smbForm||null==i.smbForm.controls.public_addrs?null:i.smbForm.controls.public_addrs.controls[t].controls.address.dirty)),e.\u0275\u0275advance(3),e.\u0275\u0275property("columnNumbers",e.\u0275\u0275pureFunction0(8,nr)),e.\u0275\u0275advance(4),e.\u0275\u0275property("columnNumbers",e.\u0275\u0275pureFunction0(9,Ba))}}function YR(n,c){if(1&n){const t=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"div",37)(1,"button",49),e.\u0275\u0275listener("click",function(){e.\u0275\u0275restoreView(t);const i=e.\u0275\u0275nextContext(3);return e.\u0275\u0275resetView(i.addPublicAddrs())}),e.\u0275\u0275i18nStart(2,30),e.\u0275\u0275namespaceSVG(),e.\u0275\u0275element(3,"svg",50),e.\u0275\u0275i18nEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275namespaceHTML(),e.\u0275\u0275elementStart(4,"cd-helper"),e.\u0275\u0275i18n(5,31),e.\u0275\u0275elementEnd()()}}function JR(n,c){if(1&n){const t=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementContainerStart(0),e.\u0275\u0275elementStart(1,"form",35,0)(3,"div",36),e.\u0275\u0275i18n(4,6),e.\u0275\u0275pipe(5,"titlecase"),e.\u0275\u0275pipe(6,"upperFirst"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(7,"div",37)(8,"cds-text-label",38),e.\u0275\u0275i18nStart(9,7),e.\u0275\u0275element(10,"input",39),e.\u0275\u0275i18nEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275template(11,NR,1,1,"ng-template",null,1,e.\u0275\u0275templateRefExtractor),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(13,"div",37)(14,"cds-select",40),e.\u0275\u0275listener("change",function(){e.\u0275\u0275restoreView(t);const i=e.\u0275\u0275nextContext(2);return e.\u0275\u0275resetView(i.onAuthModeChange())}),e.\u0275\u0275elementStart(15,"option",41),e.\u0275\u0275i18n(16,8),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(17,"option",42),e.\u0275\u0275i18n(18,9),e.\u0275\u0275elementEnd()(),e.\u0275\u0275template(19,AR,1,1,"ng-template",null,2,e.\u0275\u0275templateRefExtractor),e.\u0275\u0275elementEnd(),e.\u0275\u0275template(21,yR,12,5,"div",43)(22,wR,3,3,"ng-container",44)(23,GR,7,0,"div",43),e.\u0275\u0275elementStart(24,"cd-form-advanced-fieldset",45),e.\u0275\u0275template(25,kR,9,3,"ng-container",46),e.\u0275\u0275elementStart(26,"div",37),e.\u0275\u0275element(27,"cds-number",47),e.\u0275\u0275elementEnd(),e.\u0275\u0275template(28,jR,9,5,"ng-container",48),e.\u0275\u0275elementStart(29,"div",37)(30,"button",49),e.\u0275\u0275listener("click",function(){e.\u0275\u0275restoreView(t);const i=e.\u0275\u0275nextContext(2);return e.\u0275\u0275resetView(i.addCustomDns())}),e.\u0275\u0275i18nStart(31,10),e.\u0275\u0275namespaceSVG(),e.\u0275\u0275element(32,"svg",50),e.\u0275\u0275i18nEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275namespaceHTML(),e.\u0275\u0275elementStart(33,"cd-helper"),e.\u0275\u0275i18n(34,11),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(35,"div",37)(36,"cds-select",51),e.\u0275\u0275template(37,WR,3,3,"option",52),e.\u0275\u0275elementEnd()(),e.\u0275\u0275template(38,QR,16,10,"ng-container",53)(39,YR,6,0,"div",43),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(40,"cd-form-button-panel",54),e.\u0275\u0275pipe(41,"titlecase"),e.\u0275\u0275pipe(42,"upperFirst"),e.\u0275\u0275listener("submitActionEvent",function(){e.\u0275\u0275restoreView(t);const i=e.\u0275\u0275nextContext(2);return e.\u0275\u0275resetView(i.submitAction())}),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementContainerEnd()}if(2&n){const t=e.\u0275\u0275reference(12),o=e.\u0275\u0275reference(20),i=e.\u0275\u0275nextContext().ngIf,r=e.\u0275\u0275nextContext();e.\u0275\u0275advance(),e.\u0275\u0275property("formGroup",r.smbForm),e.\u0275\u0275advance(5),e.\u0275\u0275i18nExp(e.\u0275\u0275pipeBind1(5,24,r.action))(e.\u0275\u0275pipeBind1(6,26,r.resource)),e.\u0275\u0275i18nApply(4),e.\u0275\u0275advance(2),e.\u0275\u0275property("disabled",r.isEdit)("invalid",r.smbForm.controls.cluster_id.invalid&&r.smbForm.controls.cluster_id.dirty)("invalidText",t),e.\u0275\u0275advance(2),e.\u0275\u0275property("invalid",r.smbForm.controls.cluster_id.invalid&&r.smbForm.controls.cluster_id.dirty),e.\u0275\u0275advance(4),e.\u0275\u0275property("invalid",r.smbForm.controls.auth_mode.invalid&&r.smbForm.controls.auth_mode.dirty)("invalidText",o)("disabled",r.isEdit),e.\u0275\u0275advance(7),e.\u0275\u0275property("ngIf","active-directory"===r.smbForm.get("auth_mode").value),e.\u0275\u0275advance(),e.\u0275\u0275property("ngForOf",r.joinSources.controls),e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf","user"===r.smbForm.get("auth_mode").value),e.\u0275\u0275advance(2),e.\u0275\u0275property("ngIf",i.available),e.\u0275\u0275advance(2),e.\u0275\u0275property("id","count")("formControlName","count")("label","Count")("min",1),e.\u0275\u0275advance(),e.\u0275\u0275property("ngForOf",r.custom_dns.controls),e.\u0275\u0275advance(9),e.\u0275\u0275property("ngForOf",r.allClustering),e.\u0275\u0275advance(),e.\u0275\u0275property("ngForOf",r.public_addrs.controls),e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf",r.smbForm.get("count").value>1&&r.smbForm.get("clustering").value.toLowerCase()==r.CLUSTERING.Default||r.smbForm.get("clustering").value.toLowerCase()==r.CLUSTERING.Always),e.\u0275\u0275advance(),e.\u0275\u0275property("form",r.smbForm)("submitText",e.\u0275\u0275pipeBind1(41,28,r.action)+" "+e.\u0275\u0275pipeBind1(42,30,r.resource))}}function ZR(n,c){if(1&n&&(e.\u0275\u0275elementStart(0,"div",33),e.\u0275\u0275template(1,JR,43,32,"ng-container",34),e.\u0275\u0275elementEnd()),2&n){const t=e.\u0275\u0275nextContext();e.\u0275\u0275property("columnNumbers",e.\u0275\u0275pureFunction0(2,OR)),e.\u0275\u0275advance(),e.\u0275\u0275property("cdFormLoading",t.loading)}}let or=(()=>{class n extends Te.g{constructor(t,o,i,r,p,F,D,x,H,X){super(),this.hostService=t,this.formBuilder=o,this.smbService=i,this.actionLabels=r,this.orchService=p,this.modalService=F,this.taskWrapperService=D,this.router=x,this.cd=H,this.route=X,this.allClustering=[],this.CLUSTERING=Go,this.selectedLabels=[],this.selectedHosts=[],this.icons=g.FI,this.isEdit=!1,this.resource=$localize`Cluster`,this.modalData$=this.smbService.modalData$}ngOnInit(){this.action=this.actionLabels.CREATE,this.usersGroups$=this.smbService.listUsersGroups(),this.router.url.startsWith(`/${To}/${f.Qp.EDIT}`)&&(this.isEdit=!0),this.smbService.modalData$.subscribe(t=>{this.domainSettingsObject=t,this.smbForm.get("domain_settings").setValue(t?.realm)}),this.hostsAndLabels$=(0,K.forkJoin)({hosts:this.hostService.getAllHosts(),labels:this.hostService.getLabels()}).pipe((0,u.map)(({hosts:t,labels:o})=>({hosts:t.map(i=>({content:i.hostname})),labels:o.map(i=>({content:i}))}))),this.createForm(),this.isEdit?(this.action=this.actionLabels.EDIT,this.smbForm.get("cluster_id").disable(),this.smbForm.get("auth_mode").disable(),this.route.params.subscribe(t=>{this.cluster_id=t.cluster_id}),this.smbService.getCluster(this.cluster_id).subscribe(t=>{this.clusterResponse=t;const o=this.clusterResponse.custom_dns,i=this.smbForm.get("custom_dns"),r=this.smbForm.get("joinSources"),p=this.clusterResponse.public_addrs,F=this.smbForm.get("public_addrs");if(this.clusterResponse.clustering){const D=this.clusterResponse.clustering,H=(new Oe.r).transform(D);this.smbForm.get("clustering").setValue(H||"")}if(o?.length&&o.forEach(D=>{i.push(new T.FormControl(D))}),"active-directory"==this.clusterResponse.auth_mode)this.domainSettingsObject=this.clusterResponse?.domain_settings,this.smbForm.get("domain_settings").setValue(this.domainSettingsObject.realm);else if(this.clusterResponse.user_group_settings&&this.clusterResponse.user_group_settings.length>0){this.clusterResponse.user_group_settings.forEach(x=>{r.push(new T.FormControl(x.ref))});const D=this.clusterResponse.user_group_settings.map(x=>x.ref);r.setValue(D)}this.smbForm.get("cluster_id").setValue(this.clusterResponse.cluster_id),this.smbForm.get("auth_mode").setValue(this.clusterResponse.auth_mode),this.clusterResponse.placement.count&&this.smbForm.get("count").setValue(this.clusterResponse.placement.count),p?.length&&p.forEach(D=>{F.push(this.formBuilder.group({address:[D.address,T.Validators.required],destination:[D.destination||""]}))})})):(this.action=this.actionLabels.CREATE,this.hostsAndLabels$=(0,K.forkJoin)({hosts:this.hostService.getAllHosts(),labels:this.hostService.getLabels()}).pipe((0,u.map)(({hosts:t,labels:o})=>({hosts:t.map(i=>({content:i.hostname})),labels:o.map(i=>({content:i}))})))),this.orchStatus$=this.orchService.status(),this.allClustering=Object.values(Go),this.loadingReady(),this.isEdit||this.onAuthModeChange()}createForm(){this.smbForm=this.formBuilder.group({cluster_id:new T.FormControl("",{validators:[T.Validators.required]}),auth_mode:["active-directory",{validators:[T.Validators.required]}],domain_settings:[null],placement:[{}],hosts:[[]],label:[null,[ge.xQ.requiredIf({placement:"label"})]],count:[1],custom_dns:new T.FormArray([]),joinSources:new T.FormArray([]),clustering:new T.UntypedFormControl(Go.Default.charAt(0).toUpperCase()+Go.Default.slice(1)),public_addrs:new T.FormArray([])}),this.orchService.status().subscribe(t=>{this.hasOrchestrator=t.available,this.smbForm.get("placement").setValue(this.hasOrchestrator?"hosts":"")})}multiSelector(t,o){"hosts"===o?this.selectedHosts=t.map(i=>i.content):this.selectedLabels=t.map(i=>i.content)}onAuthModeChange(){const t=this.smbForm.get("auth_mode").value,o=this.smbForm.get("domain_settings"),i=this.smbForm.get("joinSources");if("active-directory"===t)i&&i.clear(),o&&(o.setValidators(T.Validators.required),o.updateValueAndValidity()),i&&(i.clearValidators(),i.updateValueAndValidity());else if("user"===t){const r=new T.FormControl(null,T.Validators.required);i.push(r),o&&(o.setValue(""),this.domainSettingsObject={realm:"",join_sources:[]}),o.setErrors(null),i.setValidators(T.Validators.required),o&&(o.clearValidators(),o.updateValueAndValidity())}else i&&(i.clearValidators(),i.clear(),i.updateValueAndValidity())}submitAction(){const t=this.smbForm.get("domain_settings"),o=this.smbForm.get("auth_mode").value,i=this.smbForm.getRawValue(),r={placement:{}};switch(i.placement){case"hosts":i.hosts.length>0&&(r.placement.hosts=this.selectedHosts);break;case"label":r.placement.label=this.selectedLabels}if("active-directory"===o&&!t.value)return t.setErrors({required:!0}),void this.smbForm.markAllAsTouched();this.handleTaskRequest(this.isEdit?f.Qp.EDIT:f.Qp.CREATE)}handleTaskRequest(t){const o=this.buildRequest(),i=this,r=this.smbForm.get("cluster_id").value;this.taskWrapperService.wrapTaskAroundCall({task:new ie.O(`${To}/${t}`,{cluster_id:r}),call:this.smbService.createCluster(o)}).subscribe({complete:()=>{this.router.navigate([To])},error:()=>{i.smbForm.setErrors({cdSubmitButton:!0})}})}buildRequest(){const t=this.smbForm.getRawValue(),o=E().cloneDeep(this.smbForm.value),i=this.smbForm.get("cluster_id")?.value,r=this.smbForm.get("auth_mode")?.value,F=(this.domainSettingsObject?.join_sources||[]).filter(X=>X.ref).map(X=>({ref:X.ref,sourceType:"resource"})).map(X=>({sourceType:"resource",ref:X.ref})),D={realm:this.domainSettingsObject?.realm,join_sources:F},x={cluster_resource:{resource_type:"ceph.smb.cluster",cluster_id:i,auth_mode:r}};D&&D.join_sources.length>0&&(x.cluster_resource.domain_settings=D),o.joinSources?.length>0&&(x.cluster_resource.user_group_settings=o.joinSources.map(X=>({source_type:"resource",ref:X})));const H=this.getPlacementSpec(t);return H&&(x.cluster_resource.placement=H),o.custom_dns?.length>0&&(x.cluster_resource.custom_dns=o.custom_dns),o.public_addrs?.length>0&&(x.cluster_resource.public_addrs=o.public_addrs.map(X=>X.destination?X:{address:X.address})),o.clustering&&o.clustering.toLowerCase()!==Go.Default&&(x.cluster_resource.clustering=o.clustering.toLowerCase()),o.placement.count&&(x.cluster_resource.count=o.placement.count),x}getPlacementSpec(t){const o={placement:{}};switch(o.placement.count=t.count,t.placement){case"hosts":t.hosts.length>0&&(o.placement.hosts=this.selectedHosts,o.placement.count=t.count);break;case"label":o.placement.label=this.selectedLabels,o.placement.count=t.count}return o.placement}editDomainSettingsModal(){this.modalService.show(_R,{domainSettingsObject:this.domainSettingsObject})}deleteDomainSettingsModal(){this.smbForm.get("domain_settings")?.setValue(""),this.domainSettingsObject={realm:"",join_sources:[]}}get joinSources(){return this.smbForm.get("joinSources")}get custom_dns(){return this.smbForm.get("custom_dns")}get public_addrs(){return this.smbForm.get("public_addrs")}addUserGroupSetting(){const t=new T.FormControl(null,T.Validators.required);this.joinSources.push(t)}navigateCreateUsersGroups(){this.router.navigate([`${Xo}/${f.Qp.CREATE}`])}addCustomDns(){const t=new T.FormControl("",T.Validators.required);this.custom_dns.push(t)}addPublicAddrs(){const t=this.formBuilder.group({address:["",T.Validators.required],destination:[""]});this.public_addrs.push(t)}removeUserGroupSetting(t){this.joinSources.removeAt(t),this.cd.detectChanges()}removeCustomDNS(t){this.custom_dns.removeAt(t),this.cd.detectChanges()}removePublicAddrs(t){this.public_addrs.removeAt(t),this.cd.detectChanges()}static{this.\u0275fac=function(o){return new(o||n)(e.\u0275\u0275directiveInject(Vt.I),e.\u0275\u0275directiveInject(At.$),e.\u0275\u0275directiveInject(Tn),e.\u0275\u0275directiveInject(f.Ss),e.\u0275\u0275directiveInject(tn.K),e.\u0275\u0275directiveInject(Ge.V),e.\u0275\u0275directiveInject(w.a),e.\u0275\u0275directiveInject(m.Router),e.\u0275\u0275directiveInject(e.ChangeDetectorRef),e.\u0275\u0275directiveInject(m.ActivatedRoute))}}static{this.\u0275cmp=e.\u0275\u0275defineComponent({type:n,selectors:[["cd-smb-cluster-form"]],features:[e.\u0275\u0275InheritDefinitionFeature],decls:2,vars:3,consts:()=>{let t,o,i,r,p,F,D,x,H,X,Z,re,pe,be,Pe,he,Ue,ve,Xe,_t,ft,we,qe,Rt,Ot,Je,Dt,et,sn,rn,ln,Bt,_n,cn;return t=$localize`:␟82d34d54f1ea7de52b884a999d0a137d37117857␟4428221823397382435:Unique identifier`,o=$localize`:␟50290d7bbbd43f59108f079db0cc3a53e72d88d1␟6382904838281799792:Active-directory authentication for domain member servers and User authentication for
          Stand-alone servers configuration.`,i=$localize`:␟2e9bd82e9e03c501b46e426dc3cf5cdb3330c37d␟1367314238051405550:Default value indicates that clustering should be enabled if the placement count value is any value other than 1. Always value enables clustering regardless of the placement count. Never value disables clustering regardless of the placement count. `,r=$localize`:form title␟1ba7de58697f500e9c007c9fcbfb7941dc7e31bf␟2710086666908884806: ${"\ufffd0\ufffd"}:INTERPOLATION: ${"\ufffd1\ufffd"}:INTERPOLATION_1: `,p=$localize`:␟7ad8b11fa374b19bc974f8045658e3dfc137176a␟6846620205646165880:Cluster Name ${"\ufffd#10\ufffd\ufffd/#10\ufffd"}:TAG_INPUT:`,F=$localize`:␟ba2d34a26d51cc899e2775365dfd02f2754c8a8e␟1993356963818031105:Active Directory`,D=$localize`:␟e08a77594f3d89311cdf6da5090044270909c194␟2392488717875840729:User`,x=$localize`:␟c35c4fd574103aba7399e3bfda6ea67c59600872␟6129046386020784930: Add custom DNS ${"\ufffd#32\ufffd"}:START_TAG__SVG_SVG:${"\ufffd/#32\ufffd"}:CLOSE_TAG__SVG_SVG:`,H=$localize`:␟280bb2849f075c2b8c0cdfa0f99546eb6a19be5b␟7305288618292461635:One or more IP Addresses that will be applied to the Samba containers to override the default DNS resolver(s). This option is intended to be used when the host Ceph node is not configured to resolve DNS entries within AD domain(s). `,X=$localize`:␟7cbdabcece469fab89cfa687ab152bca18b97498␟1417693714872528491:This field is required.`,Z=$localize`:␟7cbdabcece469fab89cfa687ab152bca18b97498␟1417693714872528491:This field is required.`,re=$localize`:␟105377b6dad99f02514532f6dae82b8cbfc1e2ea␟4745032032122904475:Active Directory (AD) Settings ${"\ufffd#4\ufffd"}:START_TAG_DIV:${"\ufffd#5\ufffd\ufffd/#5\ufffd"}:TAG_INPUT:${"\ufffd#6\ufffd"}:START_TAG_CDS_ICON_BUTTON:${"\ufffd#7\ufffd"}:START_TAG__SVG_SVG:${"[\ufffd/#7\ufffd|\ufffd/#9\ufffd]"}:CLOSE_TAG__SVG_SVG:${"[\ufffd/#6\ufffd|\ufffd/#8\ufffd]"}:CLOSE_TAG_CDS_ICON_BUTTON:${"\ufffd#8\ufffd"}:START_TAG_CDS_ICON_BUTTON_1:${"\ufffd#9\ufffd"}:START_TAG__SVG_SVG_1:${"[\ufffd/#7\ufffd|\ufffd/#9\ufffd]"}:CLOSE_TAG__SVG_SVG:${"[\ufffd/#6\ufffd|\ufffd/#8\ufffd]"}:CLOSE_TAG_CDS_ICON_BUTTON:${"\ufffd/#4\ufffd"}:CLOSE_TAG_DIV:`,re=e.\u0275\u0275i18nPostprocess(re),pe=$localize`:␟7c8a1d646d5a9c13de4ac1a279f19968a5f9a749␟2153425599468942151:Specify the Realm and AD access resources in the Domain Settings field.`,be=$localize`:␟44b82155dbad877ed8563d892a4bb68c9dabe12c␟1627585007717165508:Standalone user access resources`,Pe=$localize`:␟16709653b5e33b45e1acdf1bd7db75c2227ba215␟4458838291106169831:-- List of users and groups access resources -- `,he=$localize`:␟7cbdabcece469fab89cfa687ab152bca18b97498␟1417693714872528491:This field is required.`,Ue=$localize`:␟5c4713293d6ba54cc28f863615917e8619372c9f␟2346206786497212057: Add user group ${"\ufffd#3\ufffd"}:START_TAG__SVG_SVG:${"\ufffd/#3\ufffd"}:CLOSE_TAG__SVG_SVG:`,ve=$localize`:␟463ed250a524bf60dbba043187f276b642ba73dd␟2564415069043733480: Create user group ${"\ufffd#6\ufffd"}:START_TAG__SVG_SVG:${"\ufffd/#6\ufffd"}:CLOSE_TAG__SVG_SVG:`,Xe=$localize`:␟099b441d49333b3c6d30b36dc0a4763e64c78920␟4435206372750903836:Hosts`,_t=$localize`:␟2af7efecfae8d7fed3b07f718a623eca1ad8163f␟546766753072101168:Labels`,ft=$localize`:␟3d9607d23bb1ab0f64c3fc1135e097f8245b4035␟122880915385959769:Select labels...`,we=$localize`:␟703fc967e5ce3acef391de91b1de7e403963bf5a␟7264473783888258492:${"\ufffd#3\ufffd"}:START_TAG_CDS_DROPDOWN_LIST:${"\ufffd/#3\ufffd"}:CLOSE_TAG_CDS_DROPDOWN_LIST:`,qe=$localize`:␟7cbdabcece469fab89cfa687ab152bca18b97498␟1417693714872528491:This field is required.`,Rt=$localize`:␟4501e9c3311db8dcacc36b5402e666bbb2b6a7ac␟93017366433182313:Select hosts...`,Ot=$localize`:␟703fc967e5ce3acef391de91b1de7e403963bf5a␟7264473783888258492:${"\ufffd#3\ufffd"}:START_TAG_CDS_DROPDOWN_LIST:${"\ufffd/#3\ufffd"}:CLOSE_TAG_CDS_DROPDOWN_LIST:`,Je=$localize`:␟5bab0ead2ebc2ca8ac2eec5d5701f74e2dca0ce2␟4113343954412553332:DNS ${"\ufffd#5\ufffd\ufffd/#5\ufffd"}:TAG_INPUT:`,Dt=$localize`:␟5e02164017653e560d9cb950f440d2ec8bccb33b␟6220856264180364737:${"\ufffd0\ufffd"}:INTERPOLATION:`,et=$localize`:␟0851e64cdd246359a8c937c0803432a364a6bf1b␟5803907980033265831:This address will be assigned to one of the host's network devices and managed automatically.`,sn=$localize`:␟1d7c0e87814804bdc83e7198b0493dab4abe88e4␟1768690392673546919:Defines where the system will assign the managed IPs. Each string value must be a network address.`,rn=$localize`:␟403d8fe6d7ca348b6ad1cc772c3726bb4a0b7eb2␟3138609162743276360:Address ${"\ufffd#6\ufffd\ufffd/#6\ufffd"}:TAG_INPUT:`,ln=$localize`:␟82df6ae3dbb06e5d6be8d590f86774291a8f961c␟7259006207122714212:Destination ${"\ufffd#12\ufffd\ufffd/#12\ufffd"}:TAG_INPUT:`,Bt=$localize`:␟9739656bb5643ced5c52a9aa90588cab8c10852a␟6410945776428459192: This field is required. `,_n=$localize`:␟d7d8f4758f0585115e524dbd23105decd89edc12␟3272703550605329960: Add public address ${"\ufffd#3\ufffd"}:START_TAG__SVG_SVG:${"\ufffd/#3\ufffd"}:CLOSE_TAG__SVG_SVG:`,cn=$localize`:␟d74a4a5716c9ced2179efaf7fdbd5a0e10fe417d␟1588543127313806524:Assign virtual IP addresses that will be managed by the clustering subsystem and may automatically move between nodes running Samba containers.`,[["formDir","ngForm"],["clusterError",""],["authModeError",""],["ugError",""],["labelError",""],["addressError",""],r,p,F,D,x,H,X,Z,re,pe,Pe,he,Ue,ve,Xe,_t,we,qe,Ot,Je,Dt,rn,ln,Bt,_n,cn,["cdsCol","",3,"columnNumbers",4,"ngIf"],["cdsCol","",3,"columnNumbers"],[4,"cdFormLoading"],["name","smbForm","novalidate","",3,"formGroup"],[1,"form-header"],[1,"form-item"],["labelInputID","cluster_id","helperText",t,"cdRequiredField","Cluster Name",3,"disabled","invalid","invalidText"],["cdsText","","type","text","id","cluster_id","formControlName","cluster_id",3,"invalid"],["formControlName","auth_mode","label","Authentication Mode","cdRequiredField","Authentication Mode","id","auth_mode","helperText",o,3,"change","invalid","invalidText","disabled"],["value","active-directory"],["value","user"],["class","form-item",4,"ngIf"],["formArrayName","joinSources",4,"ngFor","ngForOf"],["title","Service specifications"],[4,"ngIf"],[3,"id","formControlName","label","min"],["formArrayName","custom_dns",4,"ngFor","ngForOf"],["cdsButton","tertiary","type","button",3,"click"],["cdsIcon","add","size","32","icon","",1,"cds--btn__icon"],["formControlName","clustering","for","clustering","label","Clustering","id","clustering","helperText",i],[4,"ngFor","ngForOf"],["formArrayName","public_addrs",4,"ngFor","ngForOf"],["wrappingClass","text-right",3,"submitActionEvent","form","submitText"],["class","invalid-feedback",4,"ngIf"],[1,"invalid-feedback"],["cdsCol","",1,"d-flex",3,"columnNumbers"],["labelInputID","domain_settings","cdRequiredField","Domain Settings"],[1,"cds-input-group"],["cdsText","","type","text","id","domain_settings","formControlName","domain_settings",3,"click","value","invalid"],["kind","ghost","size","md",3,"click"],["cdsIcon","edit","size","32","icon","",1,"cds--btn__icon"],["kind","danger","size","md",3,"click"],["cdsIcon","trash-can","size","32","icon","",1,"cds--btn__icon"],["formArrayName","joinSources"],["cdsRow","","class","form-item form-item-append",4,"ngIf"],["cdsRow","",1,"form-item","form-item-append"],["label",be,3,"formControlName","invalid","invalidText"],[3,"value"],[3,"value",4,"ngFor","ngForOf"],["cdsCol","",1,"item-action-btn","spacing",3,"columnNumbers"],["kind","danger","size","sm",3,"click",4,"ngIf"],["kind","danger","size","sm",3,"click"],["cdsIcon","trash-can","size","32",1,"cds--btn__icon"],["cdsIcon","launch","size","32",1,"cds--btn__icon"],["label","Placement","for","placement","formControlName","placement","id","placement"],["value","hosts"],["value","label"],["type","multi","selectionFeedback","top-after-reopen","label","Label","formControlName","label","id","label","placeholder",ft,"cdRequiredField","Label",3,"selected","appendInline","items","invalid","invalidText"],["type","multi","selectionFeedback","top-after-reopen","label","Hosts","formControlName","hosts","id","hosts","placeholder",Rt,3,"selected","appendInline","items"],["formArrayName","custom_dns"],["for","custom_dns"],["cdsText","","placeholder","192.168.76.204",3,"formControlName"],["formArrayName","public_addrs"],[3,"formGroupName"],["for","public_addrs","helperText",et,"cdrequiredField","",3,"invalid","invalidText"],["cdsText","","type","text","formControlName","address","placeholder","192.168.4.51/24",3,"invalid"],["for","public_addrs","helperText",sn],["cdsText","","type","text","formControlName","destination","placeholder","192.168.4.0/24"]]},template:function(o,i){1&o&&(e.\u0275\u0275template(0,ZR,2,3,"div",32),e.\u0275\u0275pipe(1,"async")),2&o&&e.\u0275\u0275property("ngIf",e.\u0275\u0275pipeBind1(1,1,i.orchStatus$))},dependencies:[l.NgForOf,l.NgIf,b.m,Q.e,RR.e,rt.G,De.S,ze.E,Et.P,T.\u0275NgNoValidate,T.NgSelectOption,T.\u0275NgSelectMultipleOption,T.DefaultValueAccessor,T.NgControlStatus,T.NgControlStatusGroup,T.FormGroupDirective,T.FormControlName,T.FormGroupName,T.FormArrayName,L.ColumnDirective,L.RowDirective,L.Select,L.Option,L.TextInputLabelComponent,L.TextInput,L.DropdownList,L.Button,L.IconButton,L.NumberComponent,L.ComboBox,L.IconDirective,l.AsyncPipe,l.TitleCasePipe,Oe.r],styles:[".spacing[_ngcontent-%COMP%]{margin-top:1.5rem}"]})}}return n})();var qR=s(22341);const eO=()=>({md:4});function tO(n,c){1&n&&(e.\u0275\u0275elementStart(0,"span",45),e.\u0275\u0275i18n(1,10),e.\u0275\u0275elementEnd())}function nO(n,c){if(1&n&&e.\u0275\u0275template(0,tO,2,0,"span",44),2&n){e.\u0275\u0275nextContext();const t=e.\u0275\u0275reference(2),o=e.\u0275\u0275nextContext();e.\u0275\u0275property("ngIf",o.smbShareForm.showError("share_id",t,"required"))}}function oO(n,c){1&n&&(e.\u0275\u0275elementStart(0,"option",46),e.\u0275\u0275i18n(1,11),e.\u0275\u0275elementEnd())}function iO(n,c){1&n&&(e.\u0275\u0275elementStart(0,"option",46),e.\u0275\u0275i18n(1,12),e.\u0275\u0275elementEnd())}function aO(n,c){if(1&n&&(e.\u0275\u0275elementStart(0,"option",47),e.\u0275\u0275i18n(1,13),e.\u0275\u0275elementEnd()),2&n){const t=c.$implicit;e.\u0275\u0275property("value",t.name),e.\u0275\u0275advance(),e.\u0275\u0275i18nExp(t.name),e.\u0275\u0275i18nApply(1)}}function sO(n,c){1&n&&(e.\u0275\u0275elementStart(0,"span",45),e.\u0275\u0275i18n(1,14),e.\u0275\u0275elementEnd())}function rO(n,c){if(1&n&&e.\u0275\u0275template(0,sO,2,0,"span",44),2&n){e.\u0275\u0275nextContext();const t=e.\u0275\u0275reference(2),o=e.\u0275\u0275nextContext();e.\u0275\u0275property("ngIf",o.smbShareForm.showError("volume",t,"required"))}}function lO(n,c){1&n&&(e.\u0275\u0275elementStart(0,"option",46),e.\u0275\u0275i18n(1,15),e.\u0275\u0275elementEnd())}function _O(n,c){1&n&&(e.\u0275\u0275elementStart(0,"option",46),e.\u0275\u0275i18n(1,16),e.\u0275\u0275elementEnd())}function cO(n,c){if(1&n&&(e.\u0275\u0275elementStart(0,"option",50),e.\u0275\u0275i18n(1,17),e.\u0275\u0275elementEnd()),2&n){const t=c.$implicit,o=e.\u0275\u0275nextContext(3);e.\u0275\u0275property("value",t.name)("selected",t.name===o.smbShareForm.get("subvolume_group").value),e.\u0275\u0275advance(),e.\u0275\u0275i18nExp(t.name),e.\u0275\u0275i18nApply(1)}}function dO(n,c){if(1&n){const t=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"div",27)(1,"cds-select",48),e.\u0275\u0275listener("change",function(){e.\u0275\u0275restoreView(t);const i=e.\u0275\u0275nextContext(2);return e.\u0275\u0275resetView(i.getSubVol())}),e.\u0275\u0275template(2,lO,2,0,"option",31)(3,_O,2,0,"option",31)(4,cO,2,3,"option",49),e.\u0275\u0275elementEnd()()}if(2&n){const t=e.\u0275\u0275nextContext(2);e.\u0275\u0275advance(),e.\u0275\u0275property("skeleton",null===t.allsubvolgrps),e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf",null===t.allsubvolgrps),e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf",null!==t.allsubvolgrps&&t.allsubvolgrps.length>=0),e.\u0275\u0275advance(),e.\u0275\u0275property("ngForOf",t.allsubvolgrps)}}function uO(n,c){1&n&&(e.\u0275\u0275elementStart(0,"option",46),e.\u0275\u0275i18n(1,18),e.\u0275\u0275elementEnd())}function pO(n,c){1&n&&(e.\u0275\u0275elementStart(0,"option",46),e.\u0275\u0275i18n(1,19),e.\u0275\u0275elementEnd())}function mO(n,c){1&n&&(e.\u0275\u0275elementStart(0,"option",46),e.\u0275\u0275i18n(1,20),e.\u0275\u0275elementEnd())}function fO(n,c){if(1&n&&(e.\u0275\u0275elementStart(0,"option",50),e.\u0275\u0275i18n(1,21),e.\u0275\u0275elementEnd()),2&n){const t=c.$implicit,o=e.\u0275\u0275nextContext(3);e.\u0275\u0275property("value",t.name)("selected",t.name===o.smbShareForm.get("subvolume").value),e.\u0275\u0275advance(),e.\u0275\u0275i18nExp(t.name),e.\u0275\u0275i18nApply(1)}}function EO(n,c){if(1&n){const t=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"div",51)(1,"cds-select",52),e.\u0275\u0275listener("change",function(){e.\u0275\u0275restoreView(t);const i=e.\u0275\u0275nextContext(2);return e.\u0275\u0275resetView(i.setSubVolPath())}),e.\u0275\u0275template(2,uO,2,0,"option",31)(3,pO,2,0,"option",31)(4,mO,2,0,"option",31)(5,fO,2,3,"option",49),e.\u0275\u0275elementEnd()()}if(2&n){const t=e.\u0275\u0275nextContext(2);e.\u0275\u0275advance(),e.\u0275\u0275property("skeleton",null===t.allsubvols),e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf",null===t.allsubvols),e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf",null!==t.allsubvols&&0===t.allsubvols.length),e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf",null!==t.allsubvols&&t.allsubvols.length>0),e.\u0275\u0275advance(),e.\u0275\u0275property("ngForOf",t.allsubvols)}}function gO(n,c){1&n&&(e.\u0275\u0275elementStart(0,"span",45),e.\u0275\u0275i18n(1,22),e.\u0275\u0275elementEnd())}function CO(n,c){if(1&n&&e.\u0275\u0275template(0,gO,2,0,"span",44),2&n){e.\u0275\u0275nextContext();const t=e.\u0275\u0275reference(2),o=e.\u0275\u0275nextContext();e.\u0275\u0275property("ngIf",o.smbShareForm.showError("inputPath",t,"required"))}}function SO(n,c){if(1&n){const t=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementContainerStart(0),e.\u0275\u0275elementStart(1,"form",25,0)(3,"div",26),e.\u0275\u0275i18n(4,4),e.\u0275\u0275pipe(5,"titlecase"),e.\u0275\u0275pipe(6,"upperFirst"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(7,"div",27)(8,"cds-text-label",28),e.\u0275\u0275i18nStart(9,5),e.\u0275\u0275element(10,"input",29),e.\u0275\u0275i18nEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275template(11,nO,1,1,"ng-template",null,1,e.\u0275\u0275templateRefExtractor),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(13,"div",27)(14,"cds-select",30),e.\u0275\u0275listener("change",function(){e.\u0275\u0275restoreView(t);const i=e.\u0275\u0275nextContext();return e.\u0275\u0275resetView(i.volumeChangeHandler())}),e.\u0275\u0275template(15,oO,2,0,"option",31)(16,iO,2,0,"option",31)(17,aO,2,2,"option",32),e.\u0275\u0275elementEnd(),e.\u0275\u0275template(18,rO,1,1,"ng-template",null,2,e.\u0275\u0275templateRefExtractor),e.\u0275\u0275elementEnd(),e.\u0275\u0275template(20,dO,5,4,"div",33)(21,EO,6,5,"div",34),e.\u0275\u0275elementStart(22,"div",35)(23,"div",36)(24,"cds-text-label",37),e.\u0275\u0275i18nStart(25,6),e.\u0275\u0275element(26,"input",38),e.\u0275\u0275i18nEnd(),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(27,"div",36)(28,"cds-text-label",39),e.\u0275\u0275i18nStart(29,7),e.\u0275\u0275element(30,"input",40),e.\u0275\u0275i18nEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275template(31,CO,1,1,"ng-template",null,3,e.\u0275\u0275templateRefExtractor),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(33,"div",27)(34,"cds-checkbox",41),e.\u0275\u0275i18nStart(35,8),e.\u0275\u0275element(36,"cd-help-text"),e.\u0275\u0275i18nEnd(),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(37,"div",27)(38,"cds-checkbox",42),e.\u0275\u0275i18nStart(39,9),e.\u0275\u0275element(40,"cd-help-text"),e.\u0275\u0275i18nEnd(),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(41,"cd-form-button-panel",43),e.\u0275\u0275pipe(42,"titlecase"),e.\u0275\u0275pipe(43,"upperFirst"),e.\u0275\u0275listener("submitActionEvent",function(){e.\u0275\u0275restoreView(t);const i=e.\u0275\u0275nextContext();return e.\u0275\u0275resetView(i.submitAction())}),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementContainerEnd()}if(2&n){const t=e.\u0275\u0275reference(12),o=e.\u0275\u0275reference(19),i=e.\u0275\u0275reference(32),r=e.\u0275\u0275nextContext();e.\u0275\u0275advance(),e.\u0275\u0275property("formGroup",r.smbShareForm),e.\u0275\u0275advance(5),e.\u0275\u0275i18nExp(e.\u0275\u0275pipeBind1(5,18,r.action))(e.\u0275\u0275pipeBind1(6,20,r.resource)),e.\u0275\u0275i18nApply(4),e.\u0275\u0275advance(2),e.\u0275\u0275property("invalid",r.smbShareForm.controls.share_id.invalid&&r.smbShareForm.controls.share_id.dirty)("invalidText",t),e.\u0275\u0275advance(2),e.\u0275\u0275property("invalid",r.smbShareForm.controls.share_id.invalid&&r.smbShareForm.controls.share_id.dirty),e.\u0275\u0275advance(4),e.\u0275\u0275property("invalid",r.smbShareForm.controls.volume.invalid&&r.smbShareForm.controls.volume.dirty)("invalidText",o),e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf",0===(null==r.allFsNames?null:r.allFsNames.length)),e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf",null!==r.allFsNames&&(null==r.allFsNames?null:r.allFsNames.length)>0),e.\u0275\u0275advance(),e.\u0275\u0275property("ngForOf",r.allFsNames),e.\u0275\u0275advance(3),e.\u0275\u0275property("ngIf",r.smbShareForm.getValue("volume")),e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf",r.smbShareForm.getValue("volume")),e.\u0275\u0275advance(7),e.\u0275\u0275property("invalid",r.smbShareForm.controls.inputPath.invalid&&r.smbShareForm.controls.inputPath.dirty)("invalidText",i),e.\u0275\u0275advance(2),e.\u0275\u0275property("invalid",r.smbShareForm.controls.inputPath.invalid&&r.smbShareForm.controls.inputPath.dirty),e.\u0275\u0275advance(11),e.\u0275\u0275property("form",r.smbShareForm)("submitText",e.\u0275\u0275pipeBind1(42,22,r.action)+" "+e.\u0275\u0275pipeBind1(43,24,r.resource))}}let ir=(()=>{class n extends Te.g{constructor(t,o,i,r,p,F,D,x,H){super(),this.formBuilder=t,this.smbService=o,this.actionLabels=i,this.nfsService=r,this.subvolgrpService=p,this.subvolService=F,this.taskWrapperService=D,this.router=x,this.route=H,this.allFsNames=[],this.allsubvolgrps=[],this.allsubvols=[],this.isEdit=!1,this.resource=$localize`Share`,this.isEdit=this.router.url.startsWith(`/${zo}/${f.Qp.EDIT}`),this.action=this.isEdit?this.actionLabels.EDIT:this.actionLabels.CREATE}ngOnInit(){this.route.params.subscribe(t=>{this.share_id=t.shareId,this.clusterId=t.clusterId}),this.nfsService.filesystems().subscribe(t=>{this.allFsNames=t}),this.createForm(),this.isEdit&&this.smbService.getShare(this.clusterId,this.share_id).subscribe(t=>{this.shareResponse=t,this.smbShareForm.get("share_id").setValue(this.shareResponse.share_id),this.smbShareForm.get("share_id").disable(),this.smbShareForm.get("volume").setValue(this.shareResponse.cephfs.volume),this.smbShareForm.get("subvolume_group").setValue(this.shareResponse.cephfs.subvolumegroup),this.smbShareForm.get("subvolume").setValue(this.shareResponse.cephfs.subvolume),this.smbShareForm.get("inputPath").setValue(this.shareResponse.cephfs.path),this.shareResponse.readonly&&this.smbShareForm.get("readonly").setValue(this.shareResponse.readonly),this.shareResponse.browseable&&this.smbShareForm.get("browseable").setValue(this.shareResponse.browseable),this.getSubVolGrp(this.shareResponse.cephfs.volume)}),this.loadingReady()}createForm(){this.smbShareForm=this.formBuilder.group({share_id:new T.FormControl("",{validators:[T.Validators.required]}),volume:new T.FormControl("",{validators:[T.Validators.required]}),subvolume_group:new T.FormControl(""),subvolume:new T.FormControl(""),prefixedPath:new T.FormControl({value:"",disabled:!0}),inputPath:new T.FormControl("/",{validators:[T.Validators.required]}),browseable:new T.FormControl(!0),readonly:new T.FormControl(!1)})}volumeChangeHandler(){const t=this.smbShareForm.getValue("volume");this.smbShareForm.patchValue({subvolume_group:"",subvolume:"",prefixedPath:""}),this.allsubvols=[],t&&this.getSubVolGrp(t)}getSubVolGrp(t){this.smbShareForm.patchValue({subvolume_group:"",subvolume:""}),t&&this.subvolgrpService.get(t).subscribe(o=>{if(this.allsubvolgrps=o,this.isEdit){const i=this.shareResponse.cephfs.subvolumegroup;if(i&&t===this.shareResponse.cephfs.volume){const r=this.allsubvolgrps.find(p=>p.name===i);r&&(this.smbShareForm.get("subvolume_group").setValue(r.name),this.getSubVol())}}})}getSubVol(){var t=this;return(0,Sn.A)(function*(){const o=t.smbShareForm.getValue("volume"),i=t.smbShareForm.getValue("subvolume_group");t.smbShareForm.patchValue({subvolume:"",prefixedPath:""}),t.allsubvols=[],o&&i&&(yield t.setSubVolPath(),t.subvolService.get(o,i,!1).subscribe(r=>{if(t.allsubvols=r,t.isEdit){const p=t.shareResponse.cephfs.subvolume;if(p&&t.shareResponse.cephfs.subvolumegroup){const F=t.allsubvols.find(D=>D.name===p);F&&(t.smbShareForm.get("subvolume").setValue(F.name),t.setSubVolPath())}}}))})()}setSubVolPath(){return new Promise((t,o)=>{const i=this.smbShareForm.getValue("volume"),r=this.smbShareForm.getValue("subvolume_group")||"",p=this.smbShareForm.getValue("subvolume");this.subvolService.info(i,p,r).pipe((0,u.map)(F=>F.path)).subscribe(F=>{this.updatePath(F),t()},F=>o(F))})}updatePath(t){this.smbShareForm.patchValue({prefixedPath:t})}buildRequest(){const t=E().cloneDeep(this.smbShareForm.value),o=t.inputPath,i=this.smbShareForm.get("share_id")?.value;return{share_resource:{resource_type:"ceph.smb.share",cluster_id:this.clusterId,share_id:i,cephfs:{volume:t.volume,path:o,subvolumegroup:t.subvolume_group,subvolume:t.subvolume,provider:"samba-vfs"},browseable:t.browseable,readonly:t.readonly}}}submitAction(){this.handleTaskRequest(this.isEdit?f.Qp.EDIT:f.Qp.CREATE)}handleTaskRequest(t){const o=this.buildRequest(),i=this,r=this.smbShareForm.get("share_id").value;this.taskWrapperService.wrapTaskAroundCall({task:new ie.O(`${zo}/${t}`,{share_id:r}),call:this.smbService.createShare(o)}).subscribe({complete:()=>{this.router.navigate([To])},error:()=>{i.smbShareForm.setErrors({cdSubmitButton:!0})}})}static{this.\u0275fac=function(o){return new(o||n)(e.\u0275\u0275directiveInject(At.$),e.\u0275\u0275directiveInject(Tn),e.\u0275\u0275directiveInject(f.Ss),e.\u0275\u0275directiveInject(qR.Z),e.\u0275\u0275directiveInject(Jt.W),e.\u0275\u0275directiveInject(Yt.v),e.\u0275\u0275directiveInject(w.a),e.\u0275\u0275directiveInject(m.Router),e.\u0275\u0275directiveInject(m.ActivatedRoute))}}static{this.\u0275cmp=e.\u0275\u0275defineComponent({type:n,selectors:[["cd-smb-share-form"]],features:[e.\u0275\u0275InheritDefinitionFeature],decls:2,vars:3,consts:()=>{let t,o,i,r,p,F,D,x,H,X,Z,re,pe,be,Pe,he,Ue,ve,Xe,_t,ft,we;return t=$localize`:␟b2987c3fe9ec7f1fc15b80e49702b97e0c976826␟5076580982884091652:Unique share identifier`,o=$localize`:␟796e42bec8a6996607cf1f3e80235b86d695804a␟434404492084234684:Volume`,i=$localize`:form title␟1ba7de58697f500e9c007c9fcbfb7941dc7e31bf␟2710086666908884806: ${"\ufffd0\ufffd"}:INTERPOLATION: ${"\ufffd1\ufffd"}:INTERPOLATION_1: `,r=$localize`:␟36cd840c40e22cae38cac3b016f76d3653cb58b1␟3072099684302211378:Share Name ${"\ufffd#10\ufffd\ufffd/#10\ufffd"}:TAG_INPUT:`,p=$localize`:␟f5028fe3044b29de271195f82d6b432e90dcfdbb␟6218961307654229597:Prefixed Path ${"\ufffd#26\ufffd\ufffd/#26\ufffd"}:TAG_INPUT:`,F=$localize`:␟d974edd82bdff3f410dd7945fc74988db425b258␟2660954174169239815:Input Path ${"\ufffd#30\ufffd\ufffd/#30\ufffd"}:TAG_INPUT:`,D=$localize`:␟cae9a59c0d03ebc75927a86566267357f533a1b0␟1893808613013205416:Browseable ${"\ufffd#36\ufffd"}:START_TAG_CD_HELP_TEXT:If selected the share will be included in share listings visible to clients.${"\ufffd/#36\ufffd"}:CLOSE_TAG_CD_HELP_TEXT:`,x=$localize`:␟098141e1f8c43f39fae77380af235f74df4b437d␟4547382881140984593:Readonly ${"\ufffd#40\ufffd"}:START_TAG_CD_HELP_TEXT:If selected no clients are permitted to write to the share.${"\ufffd/#40\ufffd"}:CLOSE_TAG_CD_HELP_TEXT:`,H=$localize`:␟7cbdabcece469fab89cfa687ab152bca18b97498␟1417693714872528491:This field is required.`,X=$localize`:␟ff3ec73af627306363fb3581634bf67c1847b838␟3086112051114251192: -- No filesystem available -- `,Z=$localize`:␟0525dba7fa5f04596604921fd9911f068393d0be␟127552433558763760: -- Select the filesystem -- `,re=$localize`:␟f48922c15168cb5c499ce170cd899352fb9fdc2b␟4927005754691217481: ${"\ufffd0\ufffd"}:INTERPOLATION: `,pe=$localize`:␟7cbdabcece469fab89cfa687ab152bca18b97498␟1417693714872528491:This field is required.`,be=$localize`:␟5df1e615defb3b6ae1702413f98abc49b84cd2d0␟7871454229448491365:Subvolume Group`,Pe=$localize`:␟94516fa213706c67ce5a5b5765681d7fb032033a␟3894950702316166331:Loading...`,he=$localize`:␟f622ad2788eb707c23a1bef5cd6e67b39c0531fb␟465534890939031674: -- Select the CephFS subvolume group -- `,Ue=$localize`:␟6a80b80c8e9ed38708bd812c0499e0ee71627f98␟6337909307217858513: ${"\ufffd0\ufffd"}:INTERPOLATION: `,ve=$localize`:␟94516fa213706c67ce5a5b5765681d7fb032033a␟3894950702316166331:Loading...`,Xe=$localize`:␟0dc1bc118acec4eb474752c6e17cb73824bf9688␟7149832043220069159: -- No SMB subvolume available -- `,_t=$localize`:␟85a76fd0f6f0c8054ec70b056c687a622caf8b3f␟7014057842306829986: -- Select the SMB subvolume -- `,ft=$localize`:␟293a5f6b11f6c938a4f6fc6c8c94dcf18c53fb58␟3244881336408261036: ${"\ufffd0\ufffd"}:INTERPOLATION: `,we=$localize`:␟7cbdabcece469fab89cfa687ab152bca18b97498␟1417693714872528491:This field is required.`,[["formDir","ngForm"],["shareError",""],["volumeError",""],["pathError",""],i,r,p,F,D,x,H,X,Z,re,pe,Pe,he,Ue,ve,Xe,_t,ft,we,["cdsCol","",3,"columnNumbers"],[4,"cdFormLoading"],["name","smbShareForm","novalidate","",3,"formGroup"],[1,"form-header"],[1,"form-item"],["labelInputID","share_id","helperText",t,"cdRequiredField","Share Name",3,"invalid","invalidText"],["cdsText","","type","text","id","share_id","formControlName","share_id",3,"invalid"],["formControlName","volume","label",o,"cdRequiredField","Volume","id","volume",3,"change","invalid","invalidText"],["value","",4,"ngIf"],[3,"value",4,"ngFor","ngForOf"],["class","form-item",4,"ngIf"],["class","form-group row",4,"ngIf"],["cdsRow","",1,"form-item","form-item-append"],["cdsCol",""],["labelInputID","prefixedPath","helperText","A path is a relative path."],["cdsText","","type","text","id","prefixedPath","formControlName","prefixedPath"],["labelInputID","inputPath","helperText","A relative path in a cephFS file system.","cdRequiredField","Path",3,"invalid","invalidText"],["cdsText","","type","text","id","inputPath","formControlName","inputPath",3,"invalid"],["id","browseable","formControlName","browseable"],["id","readonly","formControlName","readonly"],["wrappingClass","text-right",3,"submitActionEvent","form","submitText"],["class","invalid-feedback",4,"ngIf"],[1,"invalid-feedback"],["value",""],[3,"value"],["formControlName","subvolume_group","label",be,"id","subvolume_group",3,"change","skeleton"],[3,"value","selected",4,"ngFor","ngForOf"],[3,"value","selected"],[1,"form-group","row"],["formControlName","subvolume","label","Subvolume","id","subvolume",3,"change","skeleton"]]},template:function(o,i){1&o&&(e.\u0275\u0275elementStart(0,"div",23),e.\u0275\u0275template(1,SO,44,26,"ng-container",24),e.\u0275\u0275elementEnd()),2&o&&(e.\u0275\u0275property("columnNumbers",e.\u0275\u0275pureFunction0(2,eO)),e.\u0275\u0275advance(),e.\u0275\u0275property("cdFormLoading",i.loading))},dependencies:[l.NgForOf,l.NgIf,Q.e,Ye.O,rt.G,De.S,xe.C,ze.E,Et.P,T.\u0275NgNoValidate,T.NgSelectOption,T.\u0275NgSelectMultipleOption,T.DefaultValueAccessor,T.NgControlStatus,T.NgControlStatusGroup,T.FormGroupDirective,T.FormControlName,L.ColumnDirective,L.RowDirective,L.Select,L.Option,L.TextInputLabelComponent,L.TextInput,L.Checkbox,l.TitleCasePipe,Oe.r]})}}return n})();var ar=s(2087);const hO=()=>({md:4});function TO(n,c){1&n&&(e.\u0275\u0275elementStart(0,"span",25),e.\u0275\u0275i18n(1,8),e.\u0275\u0275elementEnd())}function FO(n,c){if(1&n&&e.\u0275\u0275template(0,TO,2,0,"span",24),2&n){const t=e.\u0275\u0275nextContext();e.\u0275\u0275property("ngIf",t.form.showError("authId",t.form,"required"))}}function vO(n,c){1&n&&(e.\u0275\u0275elementStart(0,"span",25),e.\u0275\u0275i18n(1,9),e.\u0275\u0275elementEnd())}function MO(n,c){if(1&n&&e.\u0275\u0275template(0,vO,2,0,"span",24),2&n){const t=e.\u0275\u0275nextContext();e.\u0275\u0275property("ngIf",t.form.showError("username",t.form,"required"))}}function RO(n,c){1&n&&(e.\u0275\u0275elementStart(0,"span",25),e.\u0275\u0275i18n(1,10),e.\u0275\u0275elementEnd())}function OO(n,c){if(1&n&&e.\u0275\u0275template(0,RO,2,0,"span",24),2&n){const t=e.\u0275\u0275nextContext();e.\u0275\u0275property("ngIf",t.form.showError("password",t.form,"required"))}}function PO(n,c){if(1&n&&(e.\u0275\u0275elementStart(0,"option",27),e.\u0275\u0275text(1),e.\u0275\u0275elementEnd()),2&n){const t=c.$implicit;e.\u0275\u0275property("value",t.cluster_id),e.\u0275\u0275advance(),e.\u0275\u0275textInterpolate(t.cluster_id)}}function bO(n,c){if(1&n&&(e.\u0275\u0275elementStart(0,"div",15)(1,"cds-select",26)(2,"option",27),e.\u0275\u0275i18n(3,11),e.\u0275\u0275elementEnd(),e.\u0275\u0275template(4,PO,2,2,"option",28),e.\u0275\u0275elementEnd()()),2&n){const t=c.ngIf;e.\u0275\u0275advance(2),e.\u0275\u0275property("value",null),e.\u0275\u0275advance(2),e.\u0275\u0275property("ngForOf",t)}}let sr=(()=>{class n extends Te.g{constructor(t,o,i,r,p,F,D){super(),this.actionLabels=t,this.taskWrapperService=o,this.formBuilder=i,this.smbService=r,this.router=p,this.route=F,this.location=D,this.icons=g.FI,this.editing=this.router.url.startsWith(`/${Bo}/${f.Qp.EDIT}`),this.resource=$localize`Active directory (AD) access resource`}ngOnInit(){if(this.action=this.actionLabels.CREATE,this.smbClusters$=this.smbService.listClusters(),this.createForm(),this.editing){let t;this.action=this.actionLabels.UPDATE,this.form.get("authId").disable(),this.route.params.subscribe(o=>{t=o.authId}),this.smbService.getJoinAuth(t).subscribe(o=>{this.form.get("authId").setValue(o.auth_id),this.form.get("username").setValue(o.auth.username),this.form.get("password").setValue(o.auth.password),this.form.get("linkedToCluster").setValue(o.linked_to_cluster)})}}createForm(){this.form=this.formBuilder.group({authId:new T.FormControl("",{validators:[T.Validators.required]}),username:new T.FormControl("",{validators:[T.Validators.required]}),password:new T.FormControl("",{validators:[T.Validators.required]}),linkedToCluster:new T.FormControl(null)})}submit(){const t=this.form.getValue("authId"),p={resource_type:"ceph.smb.join.auth",auth_id:t,auth:{username:this.form.getValue("username"),password:this.form.getValue("password")},linked_to_cluster:this.form.getValue("linkedToCluster")},F=this;this.taskWrapperService.wrapTaskAroundCall({task:new ie.O(`${Bo}/${this.editing?f.Qp.EDIT:f.Qp.CREATE}`,{authId:t}),call:this.smbService.createJoinAuth(p)}).subscribe({error(){F.form.setErrors({cdSubmitButton:!0})},complete:()=>{this.location.back()}})}static{this.\u0275fac=function(o){return new(o||n)(e.\u0275\u0275directiveInject(f.Ss),e.\u0275\u0275directiveInject(w.a),e.\u0275\u0275directiveInject(At.$),e.\u0275\u0275directiveInject(Tn),e.\u0275\u0275directiveInject(m.Router),e.\u0275\u0275directiveInject(m.ActivatedRoute),e.\u0275\u0275directiveInject(l.Location))}}static{this.\u0275cmp=e.\u0275\u0275defineComponent({type:n,selectors:[["cd-smb-join-auth-form"]],features:[e.\u0275\u0275InheritDefinitionFeature],decls:30,vars:27,consts:()=>{let t,o,i,r,p,F,D,x,H,X,Z;return t=$localize`:␟82d34d54f1ea7de52b884a999d0a137d37117857␟4428221823397382435:Unique identifier`,o=$localize`:form title␟d60e1082e26ae4e941496b9eb5159f11884ebbea␟4121622089917993051: ${"\ufffd0\ufffd"}:INTERPOLATION: ${"\ufffd1\ufffd"}:INTERPOLATION_1: `,i=$localize`:␟4dcacddd1842570a0f95c9045d06c32bc55bdbe5␟6358454702773190484:Active directory access resource name ${"\ufffd#10\ufffd\ufffd/#10\ufffd"}:TAG_INPUT:`,r=$localize`:␟d7f2e99bb2c5518ecffc9eab1d3be0725ab2d8d3␟1406935024394251620:Username ${"\ufffd#16\ufffd\ufffd/#16\ufffd"}:TAG_INPUT:`,p=$localize`:␟df54111cf27035920a5309fb41463bf12d43dd71␟2415263773913506633:Password ${"\ufffd#22\ufffd\ufffd/#22\ufffd"}:TAG_INPUT:`,F=$localize`:␟7cbdabcece469fab89cfa687ab152bca18b97498␟1417693714872528491:This field is required.`,D=$localize`:␟bd48784de86aedc1d532eebf256712fbaad637b9␟6458079475653544585:This field is required. `,x=$localize`:␟bd48784de86aedc1d532eebf256712fbaad637b9␟6458079475653544585:This field is required. `,H=$localize`:␟36c33f15120990ef797f0872d103298465668134␟1244333495777619029:Linked to cluster`,X=$localize`:␟134099720bc6138a8c2926ab35b9e97aedc6129d␟2357065464307851329:This resource may only be used with the linked cluster and will automatically be removed when the linked cluster is removed.`,Z=$localize`:␟c3222c9d6f55ef51818000c4e61da930836f17c8␟8816186728382148320:-- List of clusters -- `,[["formDir","ngForm"],["jaError",""],["usernameError",""],["passwordError",""],o,i,r,p,F,D,x,Z,["cdsCol","",3,"columnNumbers"],["name","form","novalidate","",3,"formGroup"],[1,"form-header"],[1,"form-item"],["for","authId","helperText",t,3,"invalid","invalidText"],["cdsText","","type","text","id","authId","name","authId","formControlName","authId",3,"invalid"],["for","username",3,"invalid","invalidText"],["cdsText","","type","text","id","username","name","username","formControlName","username",3,"invalid"],["for","password",3,"invalid","invalidText"],["cdsPassword","","type","password","id","password","name","password","formControlName","password",3,"invalid"],["class","form-item",4,"ngIf"],["wrappingClass","text-right",3,"submitActionEvent","form","submitText"],["class","invalid-feedback",4,"ngIf"],[1,"invalid-feedback"],["label",H,"formControlName","linkedToCluster","name","linkedToCluster","cdOptionalField","Linked to cluster","helperText",X],[3,"value"],[3,"value",4,"ngFor","ngForOf"]]},template:function(o,i){if(1&o){const r=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"div",12)(1,"form",13,0)(3,"div",14),e.\u0275\u0275i18n(4,4),e.\u0275\u0275pipe(5,"titlecase"),e.\u0275\u0275pipe(6,"upperFirst"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(7,"div",15)(8,"cds-text-label",16),e.\u0275\u0275i18nStart(9,5),e.\u0275\u0275element(10,"input",17),e.\u0275\u0275i18nEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275template(11,FO,1,1,"ng-template",null,1,e.\u0275\u0275templateRefExtractor),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(13,"div",15)(14,"cds-text-label",18),e.\u0275\u0275i18nStart(15,6),e.\u0275\u0275element(16,"input",19),e.\u0275\u0275i18nEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275template(17,MO,1,1,"ng-template",null,2,e.\u0275\u0275templateRefExtractor),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(19,"div",15)(20,"cds-password-label",20),e.\u0275\u0275i18nStart(21,7),e.\u0275\u0275element(22,"input",21),e.\u0275\u0275i18nEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275template(23,OO,1,1,"ng-template",null,3,e.\u0275\u0275templateRefExtractor),e.\u0275\u0275elementEnd(),e.\u0275\u0275template(25,bO,5,2,"div",22),e.\u0275\u0275pipe(26,"async"),e.\u0275\u0275elementStart(27,"cd-form-button-panel",23),e.\u0275\u0275pipe(28,"titlecase"),e.\u0275\u0275pipe(29,"upperFirst"),e.\u0275\u0275listener("submitActionEvent",function(){return e.\u0275\u0275restoreView(r),e.\u0275\u0275resetView(i.submit())}),e.\u0275\u0275elementEnd()()()}if(2&o){const r=e.\u0275\u0275reference(12),p=e.\u0275\u0275reference(18),F=e.\u0275\u0275reference(24);e.\u0275\u0275property("columnNumbers",e.\u0275\u0275pureFunction0(26,hO)),e.\u0275\u0275advance(),e.\u0275\u0275property("formGroup",i.form),e.\u0275\u0275advance(5),e.\u0275\u0275i18nExp(e.\u0275\u0275pipeBind1(5,16,i.action))(e.\u0275\u0275pipeBind1(6,18,i.resource)),e.\u0275\u0275i18nApply(4),e.\u0275\u0275advance(2),e.\u0275\u0275property("invalid",i.form.controls.authId.invalid&&i.form.controls.authId.dirty)("invalidText",r),e.\u0275\u0275advance(2),e.\u0275\u0275property("invalid",i.form.controls.authId.invalid&&i.form.controls.authId.dirty),e.\u0275\u0275advance(4),e.\u0275\u0275property("invalid",i.form.controls.username.invalid&&i.form.controls.username.dirty)("invalidText",p),e.\u0275\u0275advance(2),e.\u0275\u0275property("invalid",i.form.controls.username.invalid&&i.form.controls.username.dirty),e.\u0275\u0275advance(4),e.\u0275\u0275property("invalid",i.form.controls.password.invalid&&i.form.controls.password.dirty)("invalidText",F),e.\u0275\u0275advance(2),e.\u0275\u0275property("invalid",i.form.controls.password.invalid&&i.form.controls.password.dirty),e.\u0275\u0275advance(3),e.\u0275\u0275property("ngIf",e.\u0275\u0275pipeBind1(26,20,i.smbClusters$)),e.\u0275\u0275advance(2),e.\u0275\u0275property("form",i.form)("submitText",e.\u0275\u0275pipeBind1(28,22,i.action)+" "+e.\u0275\u0275pipeBind1(29,24,i.resource))}},dependencies:[l.NgForOf,l.NgIf,Q.e,De.S,ze.E,ar.O,T.\u0275NgNoValidate,T.NgSelectOption,T.\u0275NgSelectMultipleOption,T.DefaultValueAccessor,T.NgControlStatus,T.NgControlStatusGroup,T.FormGroupDirective,T.FormControlName,L.ColumnDirective,L.Select,L.Option,L.TextInputLabelComponent,L.PasswordInputLabelComponent,L.TextInput,L.PasswordInput,l.AsyncPipe,l.TitleCasePipe,Oe.r]})}}return n})();const NO=()=>({md:4}),IO=()=>["yaml","json"],rr=()=>({lg:7}),lr=()=>({lg:1}),AO=()=>({lg:14});function DO(n,c){if(1&n){const t=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"cds-file-uploader",28),e.\u0275\u0275listener("filesChange",function(i){e.\u0275\u0275restoreView(t);const r=e.\u0275\u0275nextContext();return e.\u0275\u0275resetView(r.smbService.uploadData(i))}),e.\u0275\u0275elementEnd()}2&n&&e.\u0275\u0275property("accept",e.\u0275\u0275pureFunction0(2,IO))("multiple",!1)}function yO(n,c){1&n&&(e.\u0275\u0275elementStart(0,"span",30),e.\u0275\u0275i18n(1,8),e.\u0275\u0275elementEnd())}function LO(n,c){if(1&n&&e.\u0275\u0275template(0,yO,2,0,"span",29),2&n){const t=e.\u0275\u0275nextContext();e.\u0275\u0275property("ngIf",t.form.showError("usersGroupsId",t.form,"required"))}}function $O(n,c){if(1&n&&(e.\u0275\u0275elementStart(0,"option",32),e.\u0275\u0275text(1),e.\u0275\u0275elementEnd()),2&n){const t=c.$implicit;e.\u0275\u0275property("value",t.cluster_id),e.\u0275\u0275advance(),e.\u0275\u0275textInterpolate1("",t.cluster_id," ")}}function xO(n,c){if(1&n&&(e.\u0275\u0275elementStart(0,"div",19)(1,"cds-select",31)(2,"option",32),e.\u0275\u0275i18n(3,9),e.\u0275\u0275elementEnd(),e.\u0275\u0275template(4,$O,2,2,"option",33),e.\u0275\u0275elementEnd()()),2&n){const t=c.ngIf;e.\u0275\u0275advance(2),e.\u0275\u0275property("value",null),e.\u0275\u0275advance(2),e.\u0275\u0275property("ngForOf",t)}}function UO(n,c){1&n&&(e.\u0275\u0275elementStart(0,"span",30),e.\u0275\u0275i18n(1,12),e.\u0275\u0275elementEnd())}function wO(n,c){1&n&&(e.\u0275\u0275elementStart(0,"span",30),e.\u0275\u0275i18n(1,13),e.\u0275\u0275elementEnd())}function GO(n,c){if(1&n){const t=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"cds-icon-button",43),e.\u0275\u0275listener("click",function(){e.\u0275\u0275restoreView(t);const i=e.\u0275\u0275nextContext().index,r=e.\u0275\u0275nextContext();return e.\u0275\u0275resetView(r.removeUser(i))}),e.\u0275\u0275namespaceSVG(),e.\u0275\u0275element(1,"svg",44),e.\u0275\u0275elementEnd()}}function HO(n,c){if(1&n&&(e.\u0275\u0275elementContainerStart(0,34)(1,35),e.\u0275\u0275elementStart(2,"div",36)(3,"div",15)(4,"cds-text-label",37),e.\u0275\u0275i18nStart(5,10),e.\u0275\u0275element(6,"input",38),e.\u0275\u0275i18nEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275template(7,UO,2,0,"ng-template",null,2,e.\u0275\u0275templateRefExtractor),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(9,"div",15)(10,"cds-password-label",39),e.\u0275\u0275i18nStart(11,11),e.\u0275\u0275element(12,"input",40),e.\u0275\u0275i18nEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275template(13,wO,2,0,"ng-template",null,3,e.\u0275\u0275templateRefExtractor),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(15,"div",41),e.\u0275\u0275template(16,GO,2,0,"cds-icon-button",42),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementContainerEnd()()),2&n){const t=c.index,o=e.\u0275\u0275reference(8),i=e.\u0275\u0275reference(14),r=e.\u0275\u0275nextContext();e.\u0275\u0275advance(),e.\u0275\u0275property("formGroupName",t),e.\u0275\u0275advance(2),e.\u0275\u0275property("columnNumbers",e.\u0275\u0275pureFunction0(11,rr)),e.\u0275\u0275advance(),e.\u0275\u0275property("invalid",r.form.controls.users.controls[t].controls.name.invalid&&r.form.controls.users.controls[t].controls.name.dirty)("invalidText",o),e.\u0275\u0275advance(2),e.\u0275\u0275property("invalid",r.form.controls.users.controls[t].controls.name.invalid&&r.form.controls.users.controls[t].controls.name.dirty),e.\u0275\u0275advance(3),e.\u0275\u0275property("columnNumbers",e.\u0275\u0275pureFunction0(12,rr)),e.\u0275\u0275advance(),e.\u0275\u0275property("invalid",r.form.controls.users.controls[t].controls.password.invalid&&r.form.controls.users.controls[t].controls.password.dirty)("invalidText",i),e.\u0275\u0275advance(2),e.\u0275\u0275property("invalid",r.form.controls.users.controls[t].controls.password.invalid&&r.form.controls.users.controls[t].controls.password.dirty),e.\u0275\u0275advance(3),e.\u0275\u0275property("columnNumbers",e.\u0275\u0275pureFunction0(13,lr)),e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf",t>0)}}function VO(n,c){if(1&n){const t=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementContainerStart(0,45)(1,35),e.\u0275\u0275elementStart(2,"div",36)(3,"div",15)(4,"cds-text-label",46),e.\u0275\u0275i18nStart(5,14),e.\u0275\u0275element(6,"input",47),e.\u0275\u0275i18nEnd(),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(7,"div",41)(8,"cds-icon-button",43),e.\u0275\u0275listener("click",function(){const i=e.\u0275\u0275restoreView(t).index,r=e.\u0275\u0275nextContext();return e.\u0275\u0275resetView(r.removeGroup(i))}),e.\u0275\u0275namespaceSVG(),e.\u0275\u0275element(9,"svg",44),e.\u0275\u0275elementEnd()()(),e.\u0275\u0275elementContainerEnd()()}if(2&n){const t=c.index;e.\u0275\u0275advance(),e.\u0275\u0275property("formGroupName",t),e.\u0275\u0275advance(2),e.\u0275\u0275property("columnNumbers",e.\u0275\u0275pureFunction0(3,AO)),e.\u0275\u0275advance(4),e.\u0275\u0275property("columnNumbers",e.\u0275\u0275pureFunction0(4,lr))}}let _r=(()=>{class n extends Te.g{constructor(t,o,i,r,p,F,D,x){super(),this.actionLabels=t,this.taskWrapperService=o,this.formBuilder=i,this.smbService=r,this.router=p,this.cd=F,this.route=D,this.location=x,this.icons=g.FI,this.hideUploader=!1,this.uploadedData=(0,e.computed)(()=>this.smbService.dataUploader()),this.editing=this.router.url.startsWith(`/${Xo}/${f.Qp.EDIT}`),this.resource=$localize`users and groups access resource`,(0,e.effect)(()=>{const H=this.uploadedData();H&&(this.fillForm(H),this.hideUploader=!0)})}ngOnInit(){if(this.action=this.actionLabels.CREATE,this.smbClusters$=this.smbService.listClusters(),this.createForm(),this.editing){let t;this.action=this.actionLabels.UPDATE,this.form.get("usersGroupsId").disable(),this.route.params.subscribe(o=>{t=o.usersGroupsId}),this.smbService.getUsersGroups(t).subscribe(o=>{this.fillForm(o)})}else this.addUser()}ngOnDestroy(){this.smbService.setDataUploaded(null)}fillForm(t){this.form.get("usersGroupsId").setValue(t.users_groups_id),this.form.get("linkedToCluster").setValue(t.linked_to_cluster),this.users.controls.forEach(o=>{!o.controls.name.value&&o.controls.password&&(o.patchValue({name:t.values.users[0].name,password:t.values.users[0].password}),t.values.users.shift())}),this.groups.controls.forEach(o=>{o.controls.name.value||(o.patchValue({name:t.values.users[0].name}),t.values.groups.shift())}),t.values.users.forEach(o=>{this.addUser(o)}),t.values.groups.forEach(o=>{this.addGroup(o)})}createForm(){this.form=this.formBuilder.group({usersGroupsId:new T.FormControl("",{validators:[T.Validators.required]}),linkedToCluster:new T.FormControl(null),users:new T.FormArray([]),groups:new T.FormArray([])})}submit(){const t=this.form.getValue("usersGroupsId"),o=this.form.getValue("linkedToCluster"),p={resource_type:"ceph.smb.usersgroups",users_groups_id:t,values:{users:this.form.getValue("users"),groups:this.form.getValue("groups")},linked_to_cluster:o},F=this;this.taskWrapperService.wrapTaskAroundCall({task:new ie.O(`${Xo}/${this.editing?f.Qp.EDIT:f.Qp.CREATE}`,{usersGroupsId:t}),call:this.smbService.createUsersGroups(p)}).subscribe({error(){F.form.setErrors({cdSubmitButton:!0})},complete:()=>{this.location.back()}})}get users(){return this.form.get("users")}get groups(){return this.form.get("groups")}newUser(t){return this.formBuilder.group({name:[t?t.name:"",T.Validators.required],password:[t?t.password:"",[T.Validators.required]]})}newGroup(t){return this.formBuilder.group({name:[t?t.name:""]})}addUser(t){this.users.push(this.newUser(t))}addGroup(t){this.groups.push(this.newGroup(t))}removeUser(t){this.users.removeAt(t),this.cd.detectChanges()}removeGroup(t){this.groups.removeAt(t),this.cd.detectChanges()}static{this.\u0275fac=function(o){return new(o||n)(e.\u0275\u0275directiveInject(f.Ss),e.\u0275\u0275directiveInject(w.a),e.\u0275\u0275directiveInject(At.$),e.\u0275\u0275directiveInject(Tn),e.\u0275\u0275directiveInject(m.Router),e.\u0275\u0275directiveInject(e.ChangeDetectorRef),e.\u0275\u0275directiveInject(m.ActivatedRoute),e.\u0275\u0275directiveInject(l.Location))}}static{this.\u0275cmp=e.\u0275\u0275defineComponent({type:n,selectors:[["cd-smb-usersgroups-form"]],features:[e.\u0275\u0275InheritDefinitionFeature],decls:29,vars:23,consts:()=>{let t,o,i,r,p,F,D,x,H,X,Z,re,pe,be,Pe,he,Ue;return t=$localize`:␟5ad17b1183ea785002dda9b4495fabab47ae814c␟7820947219007649553:Upload Users and Groups`,o=$localize`:␟59e7be21e7c147f7709848c665a2cd1fcb811f34␟8807743287021792989:only .json and .yaml files are supported`,i=$localize`:␟675dab3b559a01440aad8b72638199c3211a9152␟7885408875388628440:Add from file`,r=$localize`:␟82d34d54f1ea7de52b884a999d0a137d37117857␟4428221823397382435:Unique identifier`,p=$localize`:form title␟d60e1082e26ae4e941496b9eb5159f11884ebbea␟4121622089917993051: ${"\ufffd0\ufffd"}:INTERPOLATION: ${"\ufffd1\ufffd"}:INTERPOLATION_1: `,F=$localize`:␟54f93278f38dae5e80271c72bac0321075d9fc7c␟7115311400636669914:Users and groups access resource name ${"\ufffd#11\ufffd\ufffd/#11\ufffd"}:TAG_INPUT:`,D=$localize`:␟0507fe6d2ed358766623b49143991d150adc5491␟3109538967934605984:Add User ${"\ufffd#20\ufffd"}:START_TAG__SVG_SVG:${"\ufffd/#20\ufffd"}:CLOSE_TAG__SVG_SVG:`,x=$localize`:␟edf78a4446f9878a2ea7f90c798fedbe06066996␟5179296423728659644: Add Group ${"\ufffd#25\ufffd"}:START_TAG__SVG_SVG:${"\ufffd/#25\ufffd"}:CLOSE_TAG__SVG_SVG:`,H=$localize`:␟7cbdabcece469fab89cfa687ab152bca18b97498␟1417693714872528491:This field is required.`,X=$localize`:␟36c33f15120990ef797f0872d103298465668134␟1244333495777619029:Linked to cluster`,Z=$localize`:␟134099720bc6138a8c2926ab35b9e97aedc6129d␟2357065464307851329:This resource may only be used with the linked cluster and will automatically be removed when the linked cluster is removed.`,re=$localize`:␟c3222c9d6f55ef51818000c4e61da930836f17c8␟8816186728382148320:-- List of clusters -- `,pe=$localize`:␟6a4f65c3c6527f3e592b547e401cad892f7d3fa8␟3679069228155622543:Username ${"\ufffd#6\ufffd\ufffd/#6\ufffd"}:TAG_INPUT:`,be=$localize`:␟a72d1407213409af9f1add0bb096da5980c8953c␟7523990069347670255:Password ${"\ufffd#12\ufffd\ufffd/#12\ufffd"}:TAG_INPUT:`,Pe=$localize`:␟7cbdabcece469fab89cfa687ab152bca18b97498␟1417693714872528491:This field is required.`,he=$localize`:␟7cbdabcece469fab89cfa687ab152bca18b97498␟1417693714872528491:This field is required.`,Ue=$localize`:␟aa2640fef0b9a5878c0afb7be533fa2a666cf062␟4115773452539537260:Group ${"\ufffd#6\ufffd\ufffd/#6\ufffd"}:TAG_INPUT:`,[["formDir","ngForm"],["usersgroupsError",""],["usersNameError",""],["usersPasswordError",""],p,F,D,x,H,re,pe,be,Pe,he,Ue,["cdsCol","",3,"columnNumbers"],["name","form","novalidate","",3,"formGroup"],[1,"form-header"],["title",t,"description",o,"buttonText",i,"buttonType","primary","size","md",3,"accept","multiple","filesChange",4,"ngIf"],[1,"form-item"],["for","usersGroupsId","helperText",r,3,"invalid","invalidText"],["cdsText","","type","text","id","usersGroupsId","name","usersGroupsId","formControlName","usersGroupsId"],["class","form-item",4,"ngIf"],["formArrayName","users",4,"ngFor","ngForOf"],["cdsButton","tertiary","type","button",3,"click"],["cdsIcon","add","size","32","icon","",1,"cds--btn__icon"],["formArrayName","groups",4,"ngFor","ngForOf"],["wrappingClass","text-right",3,"submitActionEvent","form","submitText"],["title",t,"description",o,"buttonText",i,"buttonType","primary","size","md",3,"filesChange","accept","multiple"],["class","invalid-feedback",4,"ngIf"],[1,"invalid-feedback"],["label",X,"formControlName","linkedToCluster","name","linkedToCluster","helperText",Z,"cdOptionalField","Linked to cluster"],[3,"value"],[3,"value",4,"ngFor","ngForOf"],["formArrayName","users"],[3,"formGroupName"],["cdsRow","",1,"form-item","form-item-append"],["for","name",3,"invalid","invalidText"],["cdsText","","type","text","formControlName","name",3,"invalid"],["for","password",3,"invalid","invalidText"],["cdsPassword","","type","password","label","Password","formControlName","password",3,"invalid"],["cdsCol","",1,"item-action-btn","spacing",3,"columnNumbers"],["kind","danger","size","sm",3,"click",4,"ngIf"],["kind","danger","size","sm",3,"click"],["cdsIcon","trash-can","size","32",1,"cds--btn__icon"],["formArrayName","groups"],["for","name"],["cdsText","","type","text","formControlName","name"]]},template:function(o,i){if(1&o){const r=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"div",15)(1,"form",16,0)(3,"div",17),e.\u0275\u0275i18n(4,4),e.\u0275\u0275pipe(5,"titlecase"),e.\u0275\u0275pipe(6,"upperFirst"),e.\u0275\u0275elementEnd(),e.\u0275\u0275template(7,DO,1,3,"cds-file-uploader",18),e.\u0275\u0275elementStart(8,"div",19)(9,"cds-text-label",20),e.\u0275\u0275i18nStart(10,5),e.\u0275\u0275element(11,"input",21),e.\u0275\u0275i18nEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275template(12,LO,1,1,"ng-template",null,1,e.\u0275\u0275templateRefExtractor),e.\u0275\u0275elementEnd(),e.\u0275\u0275template(14,xO,5,2,"div",22),e.\u0275\u0275pipe(15,"async"),e.\u0275\u0275template(16,HO,17,14,"ng-container",23),e.\u0275\u0275elementStart(17,"div",19)(18,"button",24),e.\u0275\u0275listener("click",function(){return e.\u0275\u0275restoreView(r),e.\u0275\u0275resetView(i.addUser())}),e.\u0275\u0275i18nStart(19,6),e.\u0275\u0275namespaceSVG(),e.\u0275\u0275element(20,"svg",25),e.\u0275\u0275i18nEnd(),e.\u0275\u0275elementEnd()(),e.\u0275\u0275template(21,VO,10,5,"ng-container",26),e.\u0275\u0275namespaceHTML(),e.\u0275\u0275elementStart(22,"div",19)(23,"button",24),e.\u0275\u0275listener("click",function(){return e.\u0275\u0275restoreView(r),e.\u0275\u0275resetView(i.addGroup())}),e.\u0275\u0275i18nStart(24,7),e.\u0275\u0275namespaceSVG(),e.\u0275\u0275element(25,"svg",25),e.\u0275\u0275i18nEnd(),e.\u0275\u0275elementEnd()(),e.\u0275\u0275namespaceHTML(),e.\u0275\u0275elementStart(26,"cd-form-button-panel",27),e.\u0275\u0275pipe(27,"titlecase"),e.\u0275\u0275pipe(28,"upperFirst"),e.\u0275\u0275listener("submitActionEvent",function(){return e.\u0275\u0275restoreView(r),e.\u0275\u0275resetView(i.submit())}),e.\u0275\u0275elementEnd()()()}if(2&o){const r=e.\u0275\u0275reference(13);e.\u0275\u0275property("columnNumbers",e.\u0275\u0275pureFunction0(22,NO)),e.\u0275\u0275advance(),e.\u0275\u0275property("formGroup",i.form),e.\u0275\u0275advance(5),e.\u0275\u0275i18nExp(e.\u0275\u0275pipeBind1(5,12,i.action))(e.\u0275\u0275pipeBind1(6,14,i.resource)),e.\u0275\u0275i18nApply(4),e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf",!i.editing&&!i.hideUploader),e.\u0275\u0275advance(2),e.\u0275\u0275property("invalid",i.form.controls.usersGroupsId.invalid&&i.form.controls.usersGroupsId.dirty)("invalidText",r),e.\u0275\u0275advance(5),e.\u0275\u0275property("ngIf",e.\u0275\u0275pipeBind1(15,16,i.smbClusters$)),e.\u0275\u0275advance(2),e.\u0275\u0275property("ngForOf",i.users.controls),e.\u0275\u0275advance(5),e.\u0275\u0275property("ngForOf",i.groups.controls),e.\u0275\u0275advance(5),e.\u0275\u0275property("form",i.form)("submitText",e.\u0275\u0275pipeBind1(27,18,i.action)+" "+e.\u0275\u0275pipeBind1(28,20,i.resource))}},dependencies:[l.NgForOf,l.NgIf,Q.e,De.S,ze.E,ar.O,T.\u0275NgNoValidate,T.NgSelectOption,T.\u0275NgSelectMultipleOption,T.DefaultValueAccessor,T.NgControlStatus,T.NgControlStatusGroup,T.FormGroupDirective,T.FormControlName,T.FormGroupName,T.FormArrayName,L.ColumnDirective,L.RowDirective,L.Select,L.Option,L.FileUploader,L.TextInputLabelComponent,L.PasswordInputLabelComponent,L.TextInput,L.PasswordInput,L.Button,L.IconButton,L.IconDirective,l.AsyncPipe,l.TitleCasePipe,Oe.r],styles:[".spacing[_ngcontent-%COMP%]{margin-top:1.5rem}"]})}}return n})();var BO=s(38157);let zO=(()=>{class n{static{this.\u0275fac=function(o){return new(o||n)}}static{this.\u0275cmp=e.\u0275\u0275defineComponent({type:n,selectors:[["cd-smb-overview"]],decls:2,vars:2,consts:()=>{let t;return t=$localize`:␟31adfdaba63e32077f7113d82dcaefc45ad8b805␟1629123255622673390:SMB overview`,[["title",t,"uid","feem6ehrmi2o0b","grafanaStyle","two",3,"grafanaPath","type"]]},template:function(o,i){1&o&&e.\u0275\u0275element(0,"cd-smb-tabs")(1,"cd-grafana",0),2&o&&(e.\u0275\u0275advance(),e.\u0275\u0275property("grafanaPath","smb-overview?")("type","metrics"))},dependencies:[gt.c,Zi]})}}return n})(),cr=(()=>{class n extends Qi{resolve(t){const o=[],i=t.queryParams.fromLink||null;let r="";switch(i){case"/monitor":r="Monitors";break;case"/hosts":r="Hosts"}return o.push({text:"Cluster",path:null}),o.push({text:r,path:i}),o.push({text:"Performance Counters",path:""}),o}static{this.\u0275fac=(()=>{let t;return function(i){return(t||(t=e.\u0275\u0275getInheritedFactory(n)))(i||n)}})()}static{this.\u0275prov=e.\u0275\u0275defineInjectable({token:n,factory:n.\u0275fac})}}return n})(),dr=(()=>{class n extends Qi{resolve(t){const o=t.params.name;return[{text:`${E().startCase(o)}/Edit`,path:o}]}static{this.\u0275fac=(()=>{let t;return function(i){return(t||(t=e.\u0275\u0275getInheritedFactory(n)))(i||n)}})()}static{this.\u0275prov=e.\u0275\u0275defineInjectable({token:n,factory:n.\u0275fac})}}return n})();const XO=[{path:"",redirectTo:"dashboard",pathMatch:"full"},{path:"api-docs",component:J8},{path:"",component:K8,canActivate:[ks.r,js],canActivateChild:[ks.r,js],children:[{path:"dashboard",component:K2},{path:"error",component:IF},{path:"expand-cluster",component:$E,canActivate:[io.x],data:{moduleStatusGuardConfig:{uiApiPath:"orchestrator",redirectTo:"dashboard",backend:"cephadm"},breadcrumbs:"Cluster/Expand Cluster"}},{path:"hosts",component:Sa,data:{breadcrumbs:"Cluster/Hosts"},children:[{path:f.Qp.ADD,component:Es,outlet:"modal"}]},{path:"ceph-users",component:Z8.M,data:{breadcrumbs:"Administration/Ceph Users",resource:"api.cluster.user@1.0"}},{path:"cluster/user/create",component:Ga.u,data:{breadcrumbs:"Administration/Ceph Users/Create",resource:"api.cluster.user@1.0"}},{path:"cluster/user/import",component:Ga.u,data:{breadcrumbs:"Administration/Ceph Users/Import",resource:"api.cluster.user@1.0"}},{path:"cluster/user/edit",component:Ga.u,data:{breadcrumbs:"Administration/Ceph Users/Edit",resource:"api.cluster.user@1.0"}},{path:"monitor",component:lC,data:{breadcrumbs:"Cluster/Monitors"}},{path:"services",component:ls,canActivate:[io.x],data:{moduleStatusGuardConfig:{uiApiPath:"orchestrator",redirectTo:"error",section:"orch",section_info:"Orchestrator",header:"Orchestrator is not available"},breadcrumbs:"Administration/Services"},children:[{path:f.Qp.CREATE,component:Bi,outlet:"modal"},{path:`${f.Qp.CREATE}/:type`,component:Bi,outlet:"modal"},{path:`${f.Qp.EDIT}/:type/:name`,component:Bi,outlet:"modal"}]},{path:"multi-cluster",children:[{path:"overview",component:RM},{path:"manage-clusters",component:XM,data:{breadcrumbs:"Multi-Cluster/Manage Clusters"},children:[{path:"performance-details",component:Js}]}]},{path:"inventory",canActivate:[io.x],component:Ss,data:{moduleStatusGuardConfig:{uiApiPath:"orchestrator",redirectTo:"error",section:"orch",section_info:"Orchestrator",header:"Orchestrator is not available"},breadcrumbs:"Cluster/Physical Disks"}},{path:"osd",data:{breadcrumbs:"Cluster/OSDs"},children:[{path:"",component:yS},{path:f.Qp.CREATE,component:us,data:{breadcrumbs:f.yY.CREATE}}]},{path:"configuration",data:{breadcrumbs:"Administration/Configuration"},children:[{path:"",component:Cd},{path:"edit/:name",component:id,data:{breadcrumbs:f.yY.EDIT}}]},{path:"crush-map",component:ng,data:{breadcrumbs:"Cluster/CRUSH map"}},{path:"logs",component:ha,data:{breadcrumbs:"Observability/Logs"}},{path:"telemetry",component:xh,data:{breadcrumbs:"Telemetry configuration"}},{path:"monitoring",data:{breadcrumbs:"Observability/Alerts"},children:[{path:"",redirectTo:"active-alerts",pathMatch:"full"},{path:"active-alerts",data:{breadcrumbs:"Active Alerts"},component:zS},{path:"alerts",data:{breadcrumbs:"Alerts"},component:KS},{path:"silences",data:{breadcrumbs:"Silences"},children:[{path:"",component:bh},{path:f.Qp.CREATE,component:go,data:{breadcrumbs:`${f.yY.CREATE} Silence`}},{path:`${f.Qp.CREATE}/:id`,component:go,data:{breadcrumbs:f.yY.CREATE}},{path:`${f.Qp.EDIT}/:id`,component:go,data:{breadcrumbs:f.yY.EDIT}},{path:`${f.Qp.RECREATE}/:id`,component:go,data:{breadcrumbs:f.yY.RECREATE}}]}]},{path:"upgrade",canActivate:[io.x],data:{moduleStatusGuardConfig:{uiApiPath:"orchestrator",redirectTo:"error",backend:"cephadm",section:"orch",section_info:"Orchestrator",header:"Orchestrator is not available"},breadcrumbs:"Administration/Upgrade"},children:[{path:"",component:Rv},{path:"progress",component:g3,data:{breadcrumbs:"Progress"}}]},{path:"perf_counters/:type/:id",component:Q2,data:{breadcrumbs:cr}},{path:"mgr-modules",data:{breadcrumbs:"Administrator/Manager Modules"},children:[{path:"",component:aC},{path:"edit/:name",component:tC,data:{breadcrumbs:dr}}]},{path:"pool",data:{breadcrumbs:"Cluster/Pools"},loadChildren:()=>Promise.all([s.e(5598),s.e(7529)]).then(s.bind(s,77529)).then(n=>n.RoutedPoolModule)},{path:"block",data:{breadcrumbs:!0,text:"Block",path:null},loadChildren:()=>s.e(5598).then(s.bind(s,25598)).then(n=>n.RoutedBlockModule)},{path:"cephfs",canActivate:[Ha.k],children:[{path:"fs",component:Vc,data:{breadcrumbs:"File/File Systems"}},{path:`fs/${f.Qp.CREATE}`,component:Qs,data:{breadcrumbs:f.yY.CREATE}},{path:`fs/${f.Qp.EDIT}/:id`,component:Qs,data:{breadcrumbs:f.yY.EDIT}},{path:"nfs",canActivateChild:[Ha.k,io.x],data:{moduleStatusGuardConfig:{uiApiPath:"nfs-ganesha",redirectTo:"error",section:"nfs-ganesha",section_info:"NFS GANESHA",header:"NFS-Ganesha is not configured"},breadcrumbs:"File/NFS"},children:[{path:"",component:BO.$},{path:`${f.Qp.CREATE}/:fs_name/:subvolume_group`,component:La.B,data:{breadcrumbs:f.yY.CREATE}},{path:`${f.Qp.CREATE}`,component:La.B,data:{breadcrumbs:f.yY.CREATE}},{path:`${f.Qp.EDIT}/:cluster_id/:export_id`,component:La.B,data:{breadcrumbs:f.yY.EDIT}}]},{path:"smb",canActivate:[io.x],data:{moduleStatusGuardConfig:{uiApiPath:"smb",redirectTo:"error",header:"SMB module is not enabled",module_name:"smb",navigate_to:"cephfs/smb"},breadcrumbs:"File/SMB"},children:[{path:"",component:er},{path:"cluster",data:{breadcrumbs:"Cluster"},children:[{path:"",component:er},{path:`${f.Qp.CREATE}`,component:or,data:{breadcrumbs:f.yY.CREATE}},{path:`${f.Qp.EDIT}/:cluster_id`,component:or,data:{breadcrumbs:f.yY.EDIT}}]},{path:"active-directory",data:{breadcrumbs:"Active Directory"},children:[{path:"",component:ZM},{path:`${f.Qp.CREATE}`,component:sr,data:{breadcrumbs:f.yY.CREATE}},{path:`${f.Qp.EDIT}/:authId`,component:sr,data:{breadcrumbs:f.yY.EDIT}}]},{path:"standalone",data:{breadcrumbs:"Standalone"},children:[{path:"",component:MR},{path:`${f.Qp.CREATE}`,component:_r,data:{breadcrumbs:f.yY.CREATE}},{path:`${f.Qp.EDIT}/:usersGroupsId`,component:_r}]},{path:"overview",component:zO,data:{breadcrumbs:"Overview"}},{path:`share/${f.Qp.CREATE}/:clusterId`,component:ir,data:{breadcrumbs:f.yY.CREATE}},{path:`share/${f.Qp.EDIT}/:clusterId/:shareId`,component:ir,data:{breadcrumbs:f.yY.EDIT}}]}]},{path:"rgw",canActivate:[Ha.k,io.x],data:{moduleStatusGuardConfig:{uiApiPath:"rgw",redirectTo:"error",section:"rgw",section_info:"Object Gateway",header:"The Object Gateway Service is not configured"},breadcrumbs:!0,text:"Object",path:null},loadChildren:()=>s.e(2031).then(s.bind(s,2031)).then(n=>n.RoutedRgwModule)},{path:"user-management",data:{breadcrumbs:"User management",path:null},loadChildren:()=>Promise.resolve().then(s.bind(s,3907)).then(n=>n.RoutedAuthModule)},{path:"user-profile",data:{breadcrumbs:"User profile",path:null},children:[{path:f.Qp.EDIT,component:xs,canActivate:[Ws],data:{breadcrumbs:f.yY.EDIT}}]}]},{path:"",component:wF,children:[{path:"login",component:EF},{path:"login-change-password",component:dF,canActivate:[Ws]}]},{path:"",component:AF,children:[{path:"**",redirectTo:"/error"}]}];let ko=(()=>{class n{static{this.\u0275fac=function(o){return new(o||n)}}static{this.\u0275mod=e.\u0275\u0275defineNgModule({type:n})}static{this.\u0275inj=e.\u0275\u0275defineInjector({providers:[dr,cr],imports:[m.RouterModule.forRoot(XO,{useHash:!0,preloadingStrategy:m.PreloadAllModules}),m.RouterModule]})}}return n})(),kO=(()=>{class n{constructor(t,o){t.autoClose="outside",t.container="body",t.placement="bottom",o.container="body"}static{this.\u0275fac=function(o){return new(o||n)(e.\u0275\u0275directiveInject(V.NgbPopoverConfig),e.\u0275\u0275directiveInject(V.NgbTooltipConfig))}}static{this.\u0275cmp=e.\u0275\u0275defineComponent({type:n,selectors:[["cd-root"]],decls:1,vars:0,template:function(o,i){1&o&&e.\u0275\u0275element(0,"router-outlet")},dependencies:[m.RouterOutlet]})}}return n})();var an=s(93887),ur=s(10522),jO={elem:"svg",attrs:{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 32",fill:"currentColor",width:32,height:32},content:[{elem:"path",attrs:{d:"M17 15L17 8 15 8 15 15 8 15 8 17 15 17 15 24 17 24 17 17 24 17 24 15z"}}],name:"add",size:32},WO={elem:"svg",attrs:{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 32",fill:"currentColor",width:32,height:32},content:[{elem:"path",attrs:{d:"M26,28H6a2.0027,2.0027,0,0,1-2-2V6A2.0027,2.0027,0,0,1,6,4H16V6H6V26H26V16h2V26A2.0027,2.0027,0,0,1,26,28Z"}},{elem:"path",attrs:{d:"M20 2L20 4 26.586 4 18 12.586 19.414 14 28 5.414 28 12 30 12 30 2 20 2z"}}],name:"launch",size:32},za=s(99062),KO={elem:"svg",attrs:{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 32",fill:"currentColor",width:32,height:32},content:[{elem:"path",attrs:{d:"M12 12H14V24H12zM18 12H20V24H18z"}},{elem:"path",attrs:{d:"M4 6V8H6V28a2 2 0 002 2H24a2 2 0 002-2V8h2V6zM8 28V8H24V28zM12 2H20V4H12z"}}],name:"trash-can",size:32};let QO=(()=>{class n{constructor(t){this.iconService=t,this.iconService.registerAll([jO,WO,za.A,KO])}static{this.\u0275fac=function(o){return new(o||n)(e.\u0275\u0275inject(L.IconService))}}static{this.\u0275mod=e.\u0275\u0275defineNgModule({type:n})}static{this.\u0275inj=e.\u0275\u0275defineInjector({providers:[(0,Nt.provideCharts)((0,Nt.withDefaultRegisterables)())],imports:[l.CommonModule,an.G,ko,L.TreeviewModule,V.NgbNavModule,T.FormsModule,T.ReactiveFormsModule,V.NgbTypeaheadModule,V.NgbTooltipModule,ur.h,V.NgbDatepickerModule,V.NgbTimepickerModule,V.NgbTypeaheadModule,L.GridModule,L.InputModule,L.CheckboxModule,L.SelectModule,L.DropdownModule,L.ModalModule,L.PlaceholderModule,L.DatePickerModule,L.TimePickerModule,L.ButtonModule,L.NumberModule,L.LayoutModule,L.ComboBoxModule,L.IconModule,L.TabsModule]})}}return n})();var YO={elem:"svg",attrs:{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 32",fill:"currentColor",width:16,height:16},content:[{elem:"path",attrs:{d:"M4,2H2V28a2,2,0,0,0,2,2H30V28H4Z"}},{elem:"path",attrs:{d:"M30,9H23v2h3.59L19,18.59l-4.29-4.3a1,1,0,0,0-1.42,0L6,21.59,7.41,23,14,16.41l4.29,4.3a1,1,0,0,0,1.42,0L28,12.41V16h2Z"}}],name:"analytics",size:16},JO={elem:"svg",attrs:{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 16 16",fill:"currentColor",width:16,height:16},content:[{elem:"path",attrs:{d:"M8,1C4.1,1,1,4.1,1,8s3.1,7,7,7s7-3.1,7-7S11.9,1,8,1z M10.7,11.5L8,8.8l-2.7,2.7l-0.8-0.8L7.2,8L4.5,5.3l0.8-0.8L8,7.2\tl2.7-2.7l0.8,0.8L8.8,8l2.7,2.7L10.7,11.5z"}}],name:"close--filled",size:16},ZO=s(55619),qO=s(13421),pr=s(44128),mr=s(26481);let e4=(()=>{class n{static{this.\u0275fac=function(o){return new(o||n)}}static{this.\u0275mod=e.\u0275\u0275defineNgModule({type:n})}static{this.\u0275inj=e.\u0275\u0275defineInjector({imports:[ko,l.CommonModule,T.ReactiveFormsModule,an.G,V.NgbNavModule]})}}return n})();var fr=s(45518);let Er=(()=>{class n{constructor(t){this.iconService=t,this.iconService.registerAll([YO,JO,ZO.A])}static{this.\u0275fac=function(o){return new(o||n)(e.\u0275\u0275inject(L.IconService))}}static{this.\u0275mod=e.\u0275\u0275defineNgModule({type:n})}static{this.\u0275inj=e.\u0275\u0275defineInjector({providers:[V.NgbActiveModal],imports:[l.CommonModule,pr.d,V.NgbNavModule,an.G,m.RouterModule,T.FormsModule,T.ReactiveFormsModule,V.NgbTooltipModule,e4,V.NgbTypeaheadModule,V.NgbTimepickerModule,L.TreeviewModule,mr._,V.NgbDatepickerModule,V.NgbPopoverModule,V.NgbDropdownModule,qO.Y,V.NgbProgressbarModule,fr.W,L.ComboBoxModule,L.DropdownModule,L.CheckboxModule,L.GridModule,L.ProgressIndicatorModule,L.ButtonModule,L.InputModule,L.ModalModule,L.ListModule,L.ToggletipModule,L.IconModule]})}}return n})(),t4=(()=>{class n{static{this.\u0275fac=function(o){return new(o||n)}}static{this.\u0275mod=e.\u0275\u0275defineNgModule({type:n})}static{this.\u0275inj=e.\u0275\u0275defineInjector({providers:[(0,Nt.provideCharts)((0,Nt.withDefaultRegisterables)())],imports:[mr._,l.CommonModule,V.NgbNavModule,an.G,m.RouterModule,T.FormsModule,T.ReactiveFormsModule,fr.W,L.ToggletipModule]})}}return n})(),n4=(()=>{class n{constructor(t){this.iconService=t,this.iconService.registerAll([za.A])}static{this.\u0275fac=function(o){return new(o||n)(e.\u0275\u0275inject(L.IconService))}}static{this.\u0275mod=e.\u0275\u0275defineNgModule({type:n})}static{this.\u0275inj=e.\u0275\u0275defineInjector({imports:[T.ReactiveFormsModule,m.RouterModule,an.G,V.NgbNavModule,l.CommonModule,V.NgbTypeaheadModule,V.NgbTooltipModule,L.GridModule,L.TagModule,L.SelectModule,L.InputModule,L.RadioModule,L.CheckboxModule,L.ButtonModule,L.IconModule,L.TabsModule,Er]})}}return n})(),o4=(()=>{class n{constructor(t){this.iconService=t,this.iconService.registerAll([za.A])}static{this.\u0275fac=function(o){return new(o||n)(e.\u0275\u0275inject(L.IconService))}}static{this.\u0275mod=e.\u0275\u0275defineNgModule({type:n})}static{this.\u0275inj=e.\u0275\u0275defineInjector({imports:[m.RouterModule,l.CommonModule,an.G,ko,l.CommonModule,T.FormsModule,T.ReactiveFormsModule,ur.h,L.GridModule,L.SelectModule,L.TabsModule,L.TagModule,L.FileUploaderModule,L.InputModule,L.CheckboxModule,L.SelectModule,L.DropdownModule,L.ModalModule,L.PlaceholderModule,L.ButtonModule,L.NumberModule,L.LayoutModule,L.ComboBoxModule,L.IconModule]})}}return n})(),i4=(()=>{class n{static{this.\u0275fac=function(o){return new(o||n)}}static{this.\u0275mod=e.\u0275\u0275defineNgModule({type:n})}static{this.\u0275inj=e.\u0275\u0275defineInjector({imports:[l.CommonModule,Er,t4,pr.d,QO,n4,o4,an.G]})}}return n})();var a4=s(3907),s4={elem:"svg",attrs:{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 32",fill:"currentColor",width:20,height:20},content:[{elem:"path",attrs:{d:"M6 30H26V25a7.0082 7.0082 0 00-7-7H13a7.0082 7.0082 0 00-7 7zM9 9a7 7 0 107-7A7 7 0 009 9z"}}],name:"user--filled",size:20},r4={elem:"svg",attrs:{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 32",fill:"currentColor",width:20,height:20},content:[{elem:"path",attrs:{d:"M27,16.76c0-.25,0-.5,0-.76s0-.51,0-.77l1.92-1.68A2,2,0,0,0,29.3,11L26.94,7a2,2,0,0,0-1.73-1,2,2,0,0,0-.64.1l-2.43.82a11.35,11.35,0,0,0-1.31-.75l-.51-2.52a2,2,0,0,0-2-1.61H13.64a2,2,0,0,0-2,1.61l-.51,2.52a11.48,11.48,0,0,0-1.32.75L7.43,6.06A2,2,0,0,0,6.79,6,2,2,0,0,0,5.06,7L2.7,11a2,2,0,0,0,.41,2.51L5,15.24c0,.25,0,.5,0,.76s0,.51,0,.77L3.11,18.45A2,2,0,0,0,2.7,21L5.06,25a2,2,0,0,0,1.73,1,2,2,0,0,0,.64-.1l2.43-.82a11.35,11.35,0,0,0,1.31.75l.51,2.52a2,2,0,0,0,2,1.61h4.72a2,2,0,0,0,2-1.61l.51-2.52a11.48,11.48,0,0,0,1.32-.75l2.42.82a2,2,0,0,0,.64.1,2,2,0,0,0,1.73-1L29.3,21a2,2,0,0,0-.41-2.51ZM25.21,24l-3.43-1.16a8.86,8.86,0,0,1-2.71,1.57L18.36,28H13.64l-.71-3.55a9.36,9.36,0,0,1-2.7-1.57L6.79,24,4.43,20l2.72-2.4a8.9,8.9,0,0,1,0-3.13L4.43,12,6.79,8l3.43,1.16a8.86,8.86,0,0,1,2.71-1.57L13.64,4h4.72l.71,3.55a9.36,9.36,0,0,1,2.7,1.57L25.21,8,27.57,12l-2.72,2.4a8.9,8.9,0,0,1,0,3.13L27.57,20Z"}},{elem:"path",attrs:{d:"M16,22a6,6,0,1,1,6-6A5.94,5.94,0,0,1,16,22Zm0-10a3.91,3.91,0,0,0-4,4,3.91,3.91,0,0,0,4,4,3.91,3.91,0,0,0,4-4A3.91,3.91,0,0,0,16,12Z"}}],name:"settings",size:20},l4={elem:"svg",attrs:{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 32",fill:"currentColor",width:20,height:20},content:[{elem:"path",attrs:{d:"M16,2A14,14,0,1,0,30,16,14,14,0,0,0,16,2Zm0,26A12,12,0,1,1,28,16,12,12,0,0,1,16,28Z"}},{elem:"circle",attrs:{cx:"16",cy:"23.5",r:"1.5"}},{elem:"path",attrs:{d:"M17,8H15.5A4.49,4.49,0,0,0,11,12.5V13h2v-.5A2.5,2.5,0,0,1,15.5,10H17a2.5,2.5,0,0,1,0,5H15v4.5h2V17a4.5,4.5,0,0,0,0-9Z"}}],name:"help",size:20},_4={elem:"svg",attrs:{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 32",fill:"currentColor",width:20,height:20},content:[{elem:"path",attrs:{d:"M28.7071,19.293,26,16.5859V13a10.0136,10.0136,0,0,0-9-9.9492V1H15V3.0508A10.0136,10.0136,0,0,0,6,13v3.5859L3.2929,19.293A1,1,0,0,0,3,20v3a1,1,0,0,0,1,1h7v.7768a5.152,5.152,0,0,0,4.5,5.1987A5.0057,5.0057,0,0,0,21,25V24h7a1,1,0,0,0,1-1V20A1,1,0,0,0,28.7071,19.293ZM19,25a3,3,0,0,1-6,0V24h6Zm8-3H5V20.4141L7.707,17.707A1,1,0,0,0,8,17V13a8,8,0,0,1,16,0v4a1,1,0,0,0,.293.707L27,20.4141Z"}}],name:"notification",size:20},c4={elem:"svg",attrs:{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 16 16",fill:"currentColor",width:16,height:16},content:[{elem:"path",attrs:{d:"M13,14H3c-0.6,0-1-0.4-1-1V3c0-0.6,0.4-1,1-1h5v1H3v10h10V8h1v5C14,13.6,13.6,14,13,14z"}},{elem:"path",attrs:{d:"M10 1L10 2 13.3 2 9 6.3 9.7 7 14 2.7 14 6 15 6 15 1z"}}],name:"launch",size:16},d4={elem:"svg",attrs:{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 32",fill:"currentColor",width:20,height:20},content:[{elem:"path",attrs:{d:"M26 6v4H6V6H26m0-2H6A2 2 0 004 6v4a2 2 0 002 2H26a2 2 0 002-2V6a2 2 0 00-2-2zM10 16V26H6V16h4m0-2H6a2 2 0 00-2 2V26a2 2 0 002 2h4a2 2 0 002-2V16a2 2 0 00-2-2zM26 16V26H16V16H26m0-2H16a2 2 0 00-2 2V26a2 2 0 002 2H26a2 2 0 002-2V16a2 2 0 00-2-2z"}}],name:"template",size:20},u4={elem:"svg",attrs:{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 32",fill:"currentColor",width:20,height:20},content:[{elem:"path",attrs:{d:"M16 26c-.2559 0-.512-.0977-.707-.2928l-3-3c-.1953-.1953-.293-.4512-.293-.7071s.0977-.5118.293-.7072l3-3c.1951-.1952.451-.2928.707-.2928s.512.0977.707.2928l3 3c.1953.1953.293.4512.293.7071s-.0977.5118-.293.7072l-3 3c-.1951.1952-.4512.2928-.707.2928zm-1.5857-4l1.5857 1.5858 1.5857-1.5858-1.5857-1.5858-1.5857 1.5858zM22 20c-.2559 0-.512-.0977-.707-.2928l-3-3c-.1953-.1953-.293-.4512-.293-.7071s.0977-.5118.293-.7072l3-3c.1951-.1952.451-.2928.707-.2928s.512.0977.707.2928l3 3c.1953.1953.293.4512.293.7071s-.0977.5118-.293.7072l-3 3c-.1951.1952-.4512.2928-.707.2928zm-1.5857-4l1.5857 1.5858 1.5857-1.5858-1.5857-1.5858-1.5857 1.5858zM16 14c-.2559 0-.512-.0977-.707-.2928l-3-3c-.1953-.1953-.293-.4512-.293-.7071s.0977-.5118.293-.7072l3-3c.1951-.1952.451-.2928.707-.2928s.512.0977.707.2928l3 3c.1953.1953.293.4512.293.7071s-.0977.5118-.293.7072l-3 3c-.1951.1952-.4512.2928-.707.2928zm-1.5857-4l1.5857 1.5858 1.5857-1.5858-1.5857-1.5858-1.5857 1.5858zM10 20c-.2559 0-.512-.0977-.707-.2928l-3-3c-.1953-.1953-.293-.4512-.293-.7071s.0977-.5118.293-.7072l3-3c.1951-.1952.451-.2928.707-.2928s.512.0977.707.2928l3 3c.1953.1953.293.4512.293.7071s-.0977.5118-.293.7072l-3 3c-.1951.1952-.4512.2928-.707.2928zm-1.5857-4l1.5857 1.5858 1.5857-1.5858-1.5857-1.5858-1.5857 1.5858z"}},{elem:"path",attrs:{d:"m16,1c-.1741,0-.3481.0454-.5039.1362L3.4961,8.1362c-.3071.1792-.4961.5081-.4961.8638v14c0,.3557.189.6846.4961.8638l12,7c.1558.0908.3298.1362.5039.1362s.3481-.0454.5039-.1362l11-6.4166-1.0078-1.7275-10.4961,6.1227-11-6.4166v-12.8513L16,3.1577l11,6.4166v7.4257h2v-8c0-.3557-.189-.6846-.4961-.8638L16.5039,1.1362c-.1558-.0908-.3298-.1362-.5039-.1362Z"}}],name:"web-services--cluster",size:20},p4={elem:"svg",attrs:{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 32",fill:"currentColor",width:20,height:20},content:[{elem:"path",attrs:{d:"M16 7a3 3 0 113-3A3.0033 3.0033 0 0116 7zm0-4a1 1 0 101 1A1.001 1.001 0 0016 3zM11 30a3 3 0 113-3A3.0033 3.0033 0 0111 30zm0-4a1 1 0 101 1A1.001 1.001 0 0011 26zM7 11a3 3 0 113-3A3.0033 3.0033 0 017 11zM7 7A1 1 0 108 8 1.001 1.001 0 007 7zM21 30a3 3 0 113-3A3.0033 3.0033 0 0121 30zm0-4a1 1 0 101 1A1.001 1.001 0 0021 26zM25 11a3 3 0 113-3A3.0033 3.0033 0 0125 11zm0-4a1 1 0 101 1A1.001 1.001 0 0025 7zM4 21a3 3 0 113-3A3.0033 3.0033 0 014 21zm0-4a1 1 0 101 1A1.001 1.001 0 004 17zM28 21a3 3 0 113-3A3.0033 3.0033 0 0128 21zm0-4a1 1 0 101 1A1.001 1.001 0 0028 17zM16 22a6 6 0 116-6A6.0069 6.0069 0 0116 22zm0-10a4 4 0 104 4A4.0045 4.0045 0 0016 12z"}}],name:"edge-cluster",size:20},m4={elem:"svg",attrs:{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 32",fill:"currentColor",width:20,height:20},content:[{elem:"circle",attrs:{cx:"23",cy:"23",r:"1"}},{elem:"path",attrs:{d:"M8 22H20V24H8z"}},{elem:"circle",attrs:{cx:"23",cy:"9",r:"1"}},{elem:"path",attrs:{d:"M8 8H20V10H8z"}},{elem:"path",attrs:{d:"M26,14a2,2,0,0,0,2-2V6a2,2,0,0,0-2-2H6A2,2,0,0,0,4,6v6a2,2,0,0,0,2,2H8v4H6a2,2,0,0,0-2,2v6a2,2,0,0,0,2,2H26a2,2,0,0,0,2-2V20a2,2,0,0,0-2-2H24V14ZM6,6H26v6H6ZM26,26H6V20H26Zm-4-8H10V14H22Z"}}],name:"datastore",size:20},f4={elem:"svg",attrs:{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 32",fill:"currentColor",width:20,height:20},content:[{elem:"path",attrs:{d:"M28,20H26v2h2v6H4V22H14V20H4a2.0023,2.0023,0,0,0-2,2v6a2.0023,2.0023,0,0,0,2,2H28a2.0023,2.0023,0,0,0,2-2V22A2.0023,2.0023,0,0,0,28,20Z"}},{elem:"circle",attrs:{cx:"7",cy:"25",r:"1"}},{elem:"path",attrs:{d:"M30 8H22v6H16v8h8V16h6zM22 20H18V16h4zm6-6H24V10h4zM18 10H10V2h8zM12 8h4V4H12z"}}],name:"object-storage",size:20},E4={elem:"svg",attrs:{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 32",fill:"currentColor",width:20,height:20},content:[{elem:"path",attrs:{d:"M28,20H26v2h2v6H4V22H6V20H4a2.0024,2.0024,0,0,0-2,2v6a2.0024,2.0024,0,0,0,2,2H28a2.0024,2.0024,0,0,0,2-2V22A2.0024,2.0024,0,0,0,28,20Z"}},{elem:"circle",attrs:{cx:"7",cy:"25",r:"1"}},{elem:"path",attrs:{d:"M22.707,7.293l-5-5A1,1,0,0,0,17,2H11A2.0023,2.0023,0,0,0,9,4V20a2.0023,2.0023,0,0,0,2,2H21a2.0023,2.0023,0,0,0,2-2V8A1,1,0,0,0,22.707,7.293ZM20.5857,8H17V4.4141ZM11,20V4h4V8a2.0023,2.0023,0,0,0,2,2h4V20Z"}}],name:"file-storage",size:20},g4={elem:"svg",attrs:{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 32",fill:"currentColor",width:20,height:20},content:[{elem:"path",attrs:{d:"M4,18A12,12,0,1,0,16,6H12V1L6,7l6,6V8h4A10,10,0,1,1,6,18Z"}},{elem:"circle",attrs:{cx:"13.5",cy:"23.5",r:"1.5"}},{elem:"circle",attrs:{cx:"10.5",cy:"19.5",r:"1.5"}},{elem:"circle",attrs:{cx:"16.5",cy:"19.5",r:"1.5"}},{elem:"path",attrs:{d:"M11.964 14.5H17.036V16.499H11.964z",transform:"rotate(-45 14.5 15.5)"}},{elem:"path",attrs:{d:"M17.964 14.5H23.035999999999998V16.499H17.964z",transform:"rotate(-45 20.5 15.5)"}}],name:"observed--hail",size:20},C4={elem:"svg",attrs:{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 32",fill:"currentColor",width:20,height:20},content:[{elem:"path",attrs:{d:"M27 20.415L25.586 19 23 21.587 20.414 19 19 20.415 21.586 23 19 25.586 20.414 27 23 24.414 25.586 27 27 25.586 24.414 23 27 20.415zM24 4a4.0045 4.0045 0 00-4 4 3.951 3.951 0 00.5669 2.019L10.019 20.5669A3.9521 3.9521 0 008 20a4 4 0 104 4 3.951 3.951 0 00-.5669-2.019L21.981 11.4331A3.9521 3.9521 0 0024 12a4 4 0 000-8zM8 26a2 2 0 112-2A2.0023 2.0023 0 018 26zM24 10a2 2 0 112-2A2.0023 2.0023 0 0124 10zM8 11.18L5.41 8.59 4 10 8 14 15 7 13.59 5.59 8 11.18z"}}],name:"network--admin-control",size:20},S4=s(22056),h4={elem:"svg",attrs:{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 32",fill:"currentColor",width:16,height:16},content:[{elem:"path",attrs:{d:"M6,30H18a2.0023,2.0023,0,0,0,2-2V25H18v3H6V4H18V7h2V4a2.0023,2.0023,0,0,0-2-2H6A2.0023,2.0023,0,0,0,4,4V28A2.0023,2.0023,0,0,0,6,30Z"}},{elem:"path",attrs:{d:"M20.586 20.586L24.172 17 10 17 10 15 24.172 15 20.586 11.414 22 10 28 16 22 22 20.586 20.586z"}}],name:"logout",size:16};let gr=(()=>{class n{constructor(t){this.iconService=t,this.iconService.registerAll([s4,r4,l4,_4,c4,d4,u4,p4,m4,f4,E4,g4,C4,S4.A,h4])}static{this.\u0275fac=function(o){return new(o||n)(e.\u0275\u0275inject(L.IconService))}}static{this.\u0275mod=e.\u0275\u0275defineNgModule({type:n})}static{this.\u0275inj=e.\u0275\u0275defineInjector({imports:[l.CommonModule,a4.AuthModule,V.NgbCollapseModule,V.NgbDropdownModule,ko,an.G,Da.SimplebarAngularModule,m.RouterModule,L.UIShellModule,L.IconModule,L.ThemeModule,L.DialogModule,L.GridModule,L.BreadcrumbModule]})}}return n})(),T4=(()=>{class n{static{this.\u0275fac=function(o){return new(o||n)}}static{this.\u0275mod=e.\u0275\u0275defineNgModule({type:n})}static{this.\u0275inj=e.\u0275\u0275defineInjector({imports:[Bs.BlockUIModule.forRoot(),l.CommonModule,gr,V.NgbDropdownModule,m.RouterModule,an.G,L.PlaceholderModule,gr]})}}return n})();var F4=s(32609);let v4=(()=>{class n{constructor(t,o,i,r){this.router=t,this.notificationService=o,this.authStorageService=i,this.cookieService=r}intercept(t,o){const i=t.headers.get("Accept");let r;const p=window.location.origin;r=i&&i.startsWith("application/vnd.ceph.api.v")?t.clone():t.clone({setHeaders:{Accept:F4.c.cdVersionHeader("1","0")}});let F=localStorage.getItem("cluster_api_url");if(F&&!F.endsWith("/")&&(F+="/"),!this.router.url.split("?")[0].includes("login")&&!["api/auth/login","api/auth/logout","api/multi-cluster/set_config","api/multi-cluster/get_config","api/multi-cluster/auth"].includes(t.url)&&F&&!F.includes(p)){const H=this.cookieService.getToken(localStorage.getItem("current_cluster_name"));r=r.clone({url:`${F}${r.url}`,setHeaders:{"Access-Control-Allow-Origin":p,Authorization:`Bearer ${H}`}})}return o.handle(r).pipe((0,u.catchError)(H=>{if(H instanceof h.HttpErrorResponse){let X;switch(H.status){case 400:const Z=new ie.O,re=H.error.task;E().isPlainObject(re)?(re.metadata.component=re.metadata.component||H.error.component,Z.name=re.name,Z.metadata=re.metadata):Z.metadata=H.error,Z.success=!1,Z.exception=H.error,X=this.notificationService.notifyTask(Z);break;case 401:this.authStorageService.remove(),this.router.navigate(["/login"]);break;case 403:this.router.navigate(["error"],{state:{message:$localize`Sorry, you don’t have permission to view this page or resource.`,header:$localize`Access Denied`,icon:"fa fa-lock",source:"forbidden"}});break;default:X=this.prepareNotification(H)}H.preventDefault=()=>{this.notificationService.cancel(X)},H.ignoreStatusCode=function(Z){this.status===Z&&this.preventDefault()}}return(0,K.throwError)(H)}))}prepareNotification(t){return this.notificationService.show(()=>{let o="";return E().isPlainObject(t.error)&&E().isString(t.error.detail)?o=t.error.detail:E().isString(t.error)?o=t.error:E().isString(t.message)&&(o=t.message),new va.v(Le._.error,`${t.status} - ${t.statusText}`,o,void 0,t.application)})}static{this.\u0275fac=function(o){return new(o||n)(e.\u0275\u0275inject(m.Router),e.\u0275\u0275inject(Y.J),e.\u0275\u0275inject(_.v),e.\u0275\u0275inject(wa))}}static{this.\u0275prov=e.\u0275\u0275defineInjectable({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})(),M4=(()=>{class n{constructor(t){this.http=t}jsError(t,o,i){return this.http.post("ui-api/logging/js-error",{url:t,message:o,stack:i})}static{this.\u0275fac=function(o){return new(o||n)(e.\u0275\u0275inject(h.HttpClient))}}static{this.\u0275prov=e.\u0275\u0275defineInjectable({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})(),R4=(()=>{class n{constructor(t,o){this.injector=t,this.router=o}handleError(t){const o=this.injector.get(M4),i=window.location.href;if(o.jsError(i,t&&t.message,t&&t.stack).subscribe(),!(t.rejection instanceof Pa.jq))throw t;setTimeout(()=>this.router.navigate(["error"],{state:{message:t.rejection.message,header:t.rejection.header,icon:t.rejection.icon}}),50)}static{this.\u0275fac=function(o){return new(o||n)(e.\u0275\u0275inject(e.Injector),e.\u0275\u0275inject(m.Router))}}static{this.\u0275prov=e.\u0275\u0275defineInjectable({token:n,factory:n.\u0275fac})}}return n})(),O4=(()=>{class n{static{this.\u0275fac=function(o){return new(o||n)}}static{this.\u0275mod=e.\u0275\u0275defineNgModule({type:n,bootstrap:[kO]})}static{this.\u0275inj=e.\u0275\u0275defineInjector({providers:[{provide:e.ErrorHandler,useClass:R4},{provide:h.HTTP_INTERCEPTORS,useClass:v4,multi:!0},{provide:l.APP_BASE_HREF,useValue:"/"+(window.location.pathname.split("/",1)[1]||"")},(0,h.provideHttpClient)((0,h.withInterceptorsFromDi)())],imports:[a.BrowserModule,R.BrowserAnimationsModule,S.ToastrModule.forRoot({positionClass:"toast-top-right",preventDuplicates:!0,enableHtml:!0}),ko,T4,an.G,i4,an.G]})}}return n})();ws.c.production&&(0,e.enableProdMode)(),a.platformBrowser().bootstrapModule(O4).then(n=>{if((0,e.isDevMode)()){const t=n.injector.get(e.ApplicationRef).components[0];(0,a.enableDebugTools)(t)}}).catch(n=>console.error(n))},45312:(q,y,s)=>{s.d(y,{c:()=>a});const a={default_lang:"en-US",production:!0,year:"2025"}},73308:(q,y,s)=>{function a(l,h,R,S,m,v,E){try{var C=l[v](E),d=C.value}catch(u){return void R(u)}C.done?h(d):Promise.resolve(d).then(S,m)}function e(l){return function(){var h=this,R=arguments;return new Promise(function(S,m){var v=l.apply(h,R);function E(d){a(v,S,m,E,C,"next",d)}function C(d){a(v,S,m,E,C,"throw",d)}E(void 0)})}}s.d(y,{A:()=>e})}}]);