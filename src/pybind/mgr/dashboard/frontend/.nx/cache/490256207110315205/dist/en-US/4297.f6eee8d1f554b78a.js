(self.webpackChunkceph_dashboard=self.webpackChunkceph_dashboard||[]).push([[4297],{24297:(O,d,r)=>{r.r(d),r.d(d,{Slider:()=>F,SliderModule:()=>A});var t=r(87536),_=r(53648),u=r(94274),o=r(91974);const m=["track"],p=["filledTrack"],f=["range"],g=["thumbs"],v=[[["","minLabel",""]],[["","maxLabel",""]],[["input"]]],b=["[minLabel]","[maxLabel]","input"],y=i=>({"cds--slider-container--readonly":i}),x=(i,a)=>({"cds--slider--disabled":i,"cds--slider--readonly":a}),C=i=>({"cds--label--disabled":i}),h=i=>({insetInlineStart:i});function w(i,a){if(1&i&&(t.\u0275\u0275elementContainerStart(0),t.\u0275\u0275text(1),t.\u0275\u0275elementContainerEnd()),2&i){const e=t.\u0275\u0275nextContext(3);t.\u0275\u0275advance(),t.\u0275\u0275textInterpolate(e.label)}}function S(i,a){}function k(i,a){if(1&i&&t.\u0275\u0275template(0,S,0,0,"ng-template",15),2&i){const e=t.\u0275\u0275nextContext(3);t.\u0275\u0275property("ngTemplateOutlet",e.label)}}function T(i,a){if(1&i&&(t.\u0275\u0275elementStart(0,"label",14),t.\u0275\u0275template(1,w,2,1,"ng-container",10)(2,k,1,1,null,10),t.\u0275\u0275elementEnd()),2&i){const e=t.\u0275\u0275nextContext(2);t.\u0275\u0275property("for",e.id)("id",e.labelId)("ngClass",t.\u0275\u0275pureFunction1(5,C,e.disabled)),t.\u0275\u0275advance(),t.\u0275\u0275property("ngIf",!e.isTemplate(e.label)),t.\u0275\u0275advance(),t.\u0275\u0275property("ngIf",e.isTemplate(e.label))}}function E(i,a){if(1&i){const e=t.\u0275\u0275getCurrentView();t.\u0275\u0275elementContainerStart(0),t.\u0275\u0275elementStart(1,"div",16)(2,"div",17,4),t.\u0275\u0275listener("mousedown",function(s){t.\u0275\u0275restoreView(e);const l=t.\u0275\u0275nextContext(2);return t.\u0275\u0275resetView(l.onMouseDown(s))})("keydown",function(s){t.\u0275\u0275restoreView(e);const l=t.\u0275\u0275nextContext(2);return t.\u0275\u0275resetView(l.onKeyDown(s))}),t.\u0275\u0275elementEnd()(),t.\u0275\u0275elementContainerEnd()}if(2&i){const e=t.\u0275\u0275nextContext(2);t.\u0275\u0275advance(),t.\u0275\u0275property("ngStyle",t.\u0275\u0275pureFunction1(3,h,100*e.getFractionComplete(e.value)+"%")),t.\u0275\u0275advance(),t.\u0275\u0275property("id",e.id),t.\u0275\u0275attribute("aria-labelledby",e.labelId)}}function I(i,a){if(1&i){const e=t.\u0275\u0275getCurrentView();t.\u0275\u0275elementStart(0,"div",16)(1,"div",17,4),t.\u0275\u0275listener("mousedown",function(s){const l=t.\u0275\u0275restoreView(e).index,c=t.\u0275\u0275nextContext(3);return t.\u0275\u0275resetView(c.onMouseDown(s,l))})("keydown",function(s){const l=t.\u0275\u0275restoreView(e).index,c=t.\u0275\u0275nextContext(3);return t.\u0275\u0275resetView(c.onKeyDown(s,l))}),t.\u0275\u0275elementEnd()()}if(2&i){const e=a.$implicit,n=a.index,s=t.\u0275\u0275nextContext(3);t.\u0275\u0275property("ngStyle",t.\u0275\u0275pureFunction1(3,h,100*s.getFractionComplete(e)+"%")),t.\u0275\u0275advance(),t.\u0275\u0275property("id",s.id+(n>0?"-"+n:"")),t.\u0275\u0275attribute("aria-labelledby",s.labelId)}}function M(i,a){if(1&i&&(t.\u0275\u0275elementContainerStart(0),t.\u0275\u0275template(1,I,3,5,"div",18),t.\u0275\u0275elementContainerEnd()),2&i){const e=t.\u0275\u0275nextContext(2);t.\u0275\u0275advance(),t.\u0275\u0275property("ngForOf",e.value)("ngForTrackBy",e.trackThumbsBy)}}function R(i,a){if(1&i){const e=t.\u0275\u0275getCurrentView();t.\u0275\u0275elementContainerStart(0),t.\u0275\u0275template(1,T,3,7,"label",6),t.\u0275\u0275elementStart(2,"div",7)(3,"label",8),t.\u0275\u0275projection(4),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(5,"div",9),t.\u0275\u0275listener("click",function(s){t.\u0275\u0275restoreView(e);const l=t.\u0275\u0275nextContext();return t.\u0275\u0275resetView(l.onClick(s))}),t.\u0275\u0275template(6,E,4,5,"ng-container",10)(7,M,2,2,"ng-container",10),t.\u0275\u0275element(8,"div",11,1)(10,"div",12,2)(12,"input",13,3),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(14,"label",8),t.\u0275\u0275projection(15,1),t.\u0275\u0275elementEnd(),t.\u0275\u0275projection(16,2),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementContainerEnd()}if(2&i){const e=t.\u0275\u0275nextContext();t.\u0275\u0275advance(),t.\u0275\u0275property("ngIf",e.label),t.\u0275\u0275advance(),t.\u0275\u0275property("ngClass",t.\u0275\u0275pureFunction1(11,y,e.readonly)),t.\u0275\u0275advance(),t.\u0275\u0275property("id",e.bottomRangeId),t.\u0275\u0275advance(2),t.\u0275\u0275property("ngClass",t.\u0275\u0275pureFunction2(13,x,e.disabled,e.readonly)),t.\u0275\u0275advance(),t.\u0275\u0275property("ngIf",!e.isRange()),t.\u0275\u0275advance(),t.\u0275\u0275property("ngIf",e.isRange()),t.\u0275\u0275advance(5),t.\u0275\u0275property("step",e.step)("min",e.min)("max",e.max)("value",e.value.toString()),t.\u0275\u0275advance(2),t.\u0275\u0275property("id",e.topRangeId)}}function D(i,a){1&i&&t.\u0275\u0275element(0,"label",24)}function V(i,a){if(1&i&&(t.\u0275\u0275template(0,D,1,0,"label",19),t.\u0275\u0275elementStart(1,"div",20),t.\u0275\u0275element(2,"span",21),t.\u0275\u0275elementStart(3,"div",22),t.\u0275\u0275element(4,"div",23)(5,"div",11)(6,"div",12),t.\u0275\u0275elementEnd(),t.\u0275\u0275element(7,"span",21),t.\u0275\u0275elementEnd()),2&i){const e=t.\u0275\u0275nextContext();t.\u0275\u0275property("ngIf",e.label)}}let F=(()=>{class i{constructor(e,n,s){this.elementRef=e,this.eventService=n,this.changeDetection=s,this.step=1,this.id="slider-"+i.count++,this.shiftMultiplier=4,this.skeleton=!1,this.disableArrowKeys=!1,this.valueChange=new t.EventEmitter,this.hostClass=!0,this.labelId=`${this.id}-label`,this.bottomRangeId=`${this.id}-bottom-range`,this.topRangeId=`${this.id}-top-range`,this.fractionComplete=0,this.isMouseDown=!1,this._min=0,this._max=100,this._value=[this.min],this._previousValue=[this.min],this._disabled=!1,this._readonly=!1,this._focusedThumbIndex=0,this.propagateChange=l=>{},this.onTouched=()=>{}}set min(e){e&&(this._min=e,this.value=this.value)}get min(){return this._min}set max(e){e&&(this._max=e,this.value=this.value)}get max(){return this._max}set value(e){e||(e=[this.min]),("number"==typeof e||"string"==typeof e)&&(e=[Number(e)]),e[0]<this.min&&(e[0]=this.min),e[0]>this.max&&(e[0]=this.max),this.isRange()&&(this._previousValue[0]!==e[0]&&(e[0]>e[1]-this.step?e[0]=e[1]-this.step:e[0]>this.max?e[0]=this.max:e[0]<this.min&&(e[0]=this.min)),this._previousValue[1]!==e[1]&&(e[1]>this.max?e[1]=this.max:e[1]<this._value[0]+this.step?e[1]=this._value[0]+this.step:e[1]<this.min&&(e[1]=this.min))),this._previousValue=[...this._value],this._value=[...e],this.isRange()&&this.filledTrack?this.updateTrackRangeWidth():this.filledTrack&&(this.filledTrack.nativeElement.style.transform=`translate(0%, -50%) ${this.scaleX(this.getFractionComplete(e[0]))}`),this.inputs&&this.inputs.length&&this.inputs.forEach((s,l)=>{s.value=this._value[l].toString()});const n=this.isRange()?e:e[0];this.propagateChange(n),this.valueChange.emit(n)}get value(){return this.isRange()?this._value:this._value[0]}set disabled(e){this._disabled=e;const n=this.getInputs();n&&n.length>0&&n.forEach(s=>s.disabled=e)}get disabled(){return this._disabled}set readonly(e){this._readonly=e;const n=this.getInputs();n&&n.length>0&&n.forEach(s=>s.readOnly=e)}get readonly(){return this._readonly}ngAfterViewInit(){this.eventService.onDocument("mousemove",this.onMouseMove.bind(this)),this.eventService.onDocument("mouseup",this.onMouseUp.bind(this)),this.changeDetection.detectChanges(),this.inputs=this.getInputs(),this.inputs&&this.inputs.length>0&&this.inputs.forEach((e,n)=>{e.type="number",e.classList.add("cds--slider-text-input"),e.classList.add("cds--text-input"),e.setAttribute("aria-labelledby",`${this.bottomRangeId} ${this.topRangeId}`),e.value=n<this._value.length?this._value[n].toString():this.max.toString(),this.eventService.on(e,"change",s=>this.onChange(s,n)),0===n&&this.eventService.on(e,"focus",this.onFocus.bind(this))})}trackThumbsBy(e,n){return e}registerOnChange(e){this.propagateChange=e}registerOnTouched(e){this.onTouched=e}writeValue(e){this.value=e}getFractionComplete(e){if(!this.track)return 0;const n=this.track.nativeElement.getBoundingClientRect().width;return this.convertToPx(e)/n}scaleX(e){return`scaleX(${e})`}convertToValue(e){const n=this.max-this.min,s=this.track.nativeElement.getBoundingClientRect().width;return Math.round(n*(e/s)/this.step)*this.step+this.min}convertToPx(e){if(!this.track)return 0;const n=this.track.nativeElement.getBoundingClientRect().width;return e>=this.max?n:e<=this.min?0:Math.round(n*((e-this.min)/(this.max-this.min)))}incrementValue(e=1,n=0){this._value[n]=this._value[n]+this.step*e,this.value=this.value}decrementValue(e=1,n=0){this._value[n]=this._value[n]-this.step*e,this.value=this.value}isRange(){return this._value.length>1}updateTrackRangeWidth(){const e=this.getFractionComplete(this._value[0]),n=this.getFractionComplete(this._value[1]);this.filledTrack.nativeElement.style.transform=`translate(${100*e}%, -50%) ${this.scaleX(n-e)}`}onChange(e,n){this._value[n]=Number(e.target.value),this.value=this.value}onClick(e){if(this.disabled||this.readonly)return;const n=this.track.nativeElement.getBoundingClientRect().left,s=this.convertToValue(e.clientX-n);this.isRange()?Math.abs(this._value[0]-s)<Math.abs(this._value[1]-s)?this._value[0]=s:this._value[1]=s:this._value[0]=s,this.value=this.value}onFocus({target:e}){e.select()}onMouseMove(e){if(this.disabled||this.readonly||!this.isMouseDown)return;const n=this.track.nativeElement.getBoundingClientRect();let s;e.clientX-n.left<=n.width&&e.clientX-n.left>=0&&(s=this.convertToValue(e.clientX-n.left)),e.clientX-n.left>n.width&&(s=this.max),e.clientX-n.left<0&&(s=this.min),void 0!==s&&(this._value[this._focusedThumbIndex]=s,this.value=this.value)}onMouseDown(e,n=0){e.preventDefault(),!this.disabled&&!this.readonly&&(this._focusedThumbIndex=n,this.thumbs.toArray()[n].nativeElement.focus(),this.isMouseDown=!0)}onMouseUp(){this.isMouseDown=!1}onKeyDown(e,n=0){if(this.disableArrowKeys||this.readonly)return;const s=e.shiftKey?this.shiftMultiplier:1;"ArrowLeft"===e.key||"ArrowDown"===e.key?(this.decrementValue(s,n),this.thumbs.toArray()[n].nativeElement.focus(),e.preventDefault()):("ArrowRight"===e.key||"ArrowUp"===e.key)&&(this.incrementValue(s,n),this.thumbs.toArray()[n].nativeElement.focus(),e.preventDefault())}isTemplate(e){return e instanceof t.TemplateRef}getInputs(){return this.elementRef.nativeElement.querySelectorAll("input:not([type=range])")}}return i.count=0,i.\u0275fac=function(e){return new(e||i)(t.\u0275\u0275directiveInject(t.ElementRef),t.\u0275\u0275directiveInject(u.EventService),t.\u0275\u0275directiveInject(t.ChangeDetectorRef))},i.\u0275cmp=t.\u0275\u0275defineComponent({type:i,selectors:[["cds-slider"],["ibm-slider"]],viewQuery:function(e,n){if(1&e&&(t.\u0275\u0275viewQuery(m,5),t.\u0275\u0275viewQuery(p,5),t.\u0275\u0275viewQuery(f,5),t.\u0275\u0275viewQuery(g,5)),2&e){let s;t.\u0275\u0275queryRefresh(s=t.\u0275\u0275loadQuery())&&(n.track=s.first),t.\u0275\u0275queryRefresh(s=t.\u0275\u0275loadQuery())&&(n.filledTrack=s.first),t.\u0275\u0275queryRefresh(s=t.\u0275\u0275loadQuery())&&(n.range=s.first),t.\u0275\u0275queryRefresh(s=t.\u0275\u0275loadQuery())&&(n.thumbs=s)}},hostVars:2,hostBindings:function(e,n){2&e&&t.\u0275\u0275classProp("cds--form-item",n.hostClass)},inputs:{min:"min",max:"max",step:"step",value:"value",id:"id",shiftMultiplier:"shiftMultiplier",skeleton:"skeleton",label:"label",disableArrowKeys:"disableArrowKeys",disabled:"disabled",readonly:"readonly"},outputs:{valueChange:"valueChange"},features:[t.\u0275\u0275ProvidersFeature([{provide:_.NG_VALUE_ACCESSOR,useExisting:i,multi:!0}])],ngContentSelectors:b,decls:3,vars:2,consts:[["skeletonTemplate",""],["track",""],["filledTrack",""],["range",""],["thumbs",""],[4,"ngIf","ngIfElse"],["class","cds--label",3,"for","id","ngClass",4,"ngIf"],[1,"cds--slider-container",3,"ngClass"],[1,"cds--slider__range-label",3,"id"],[1,"cds--slider",3,"click","ngClass"],[4,"ngIf"],[1,"cds--slider__track"],[1,"cds--slider__filled-track"],["aria-label","slider","type","range",1,"cds--slider__input",3,"step","min","max","value"],[1,"cds--label",3,"for","id","ngClass"],[3,"ngTemplateOutlet"],[1,"cds--slider__thumb-wrapper",3,"ngStyle"],["role","slider","tabindex","0",1,"cds--slider__thumb",3,"mousedown","keydown","id"],["class","cds--slider__thumb-wrapper",3,"ngStyle",4,"ngFor","ngForOf","ngForTrackBy"],["class","cds--label cds--skeleton",4,"ngIf"],[1,"cds--slider-container","cds--skeleton"],[1,"cds--slider__range-label"],[1,"cds--slider"],[1,"cds--slider__thumb"],[1,"cds--label","cds--skeleton"]],template:function(e,n){if(1&e&&(t.\u0275\u0275projectionDef(v),t.\u0275\u0275template(0,R,17,16,"ng-container",5)(1,V,8,1,"ng-template",null,0,t.\u0275\u0275templateRefExtractor)),2&e){const s=t.\u0275\u0275reference(2);t.\u0275\u0275property("ngIf",!n.skeleton)("ngIfElse",s)}},dependencies:[o.NgClass,o.NgForOf,o.NgIf,o.NgTemplateOutlet,o.NgStyle],encapsulation:2}),i})(),A=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=t.\u0275\u0275defineNgModule({type:i}),i.\u0275inj=t.\u0275\u0275defineInjector({imports:[o.CommonModule,u.UtilsModule]}),i})()}}]);