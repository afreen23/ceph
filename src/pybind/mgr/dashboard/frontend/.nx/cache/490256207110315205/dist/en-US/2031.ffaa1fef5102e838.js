(self.webpackChunkceph_dashboard=self.webpackChunkceph_dashboard||[]).push([[2031],{2031:(DC,fn,g)=>{g.r(fn),g.d(fn,{RgwModule:()=>Oo,RoutedRgwModule:()=>$C});var E=g(91974),l=g(53648),Q=g(76218),v=g(77317),Go=g(13421),P=g(54372),No=g(19907),Ao=g(1811),ho=g(6955),bo=g(93887),vo=g(44128),e=g(87536),At=g(29841),A=g.n(At),U=g(95631),Sn=g(53501),Le=g(29729),Fn=g(59876),Rt=g(28284),y=g(46045),w=g(88285),tt=g(74902),Ge=g(43808),M=g(3687),ne=g(88701),ye=function(n){return n.VAULT="vault",n.KMIP="kmip",n}(ye||{}),Jt=function(n){return n.Token="token",n.Agent="agent",n}(Jt||{}),en=function(n){return n.KV="kv",n.Transit="transit",n}(en||{}),Ne=function(n){return n.SSE_S3="s3",n.SSE_KMS="kms",n}(Ne||{});const Ut={kmsProviders:[ye.VAULT,ye.KMIP],authMethods:[Jt.Token,Jt.Agent],secretEngines:[en.KV,en.Transit]};var kt=function(n){return n.ENABLED="Enabled",n.DISABLED="Disabled",n}(kt||{}),Fe=function(n){return n.Read="Read",n.Write="Write",n.All="Read and write",n.FullControl="Full control",n}(Fe||{}),Ae=function(n){return n.Owner="Owner",n.Everyone="Everyone",n.AuthenticatedUsers="Authenticated Users",n}(Ae||{}),zt=function(n){return n.ENABLED="Enabled",n.SUSPENDED="Suspended",n}(zt||{}),d=g(3600),_e=g(59781),Ct=g(23603),Y=g(90476),oe=g(37966),Qe=g(51862);function Lo(n,i){1&n&&(e.\u0275\u0275elementStart(0,"span",21),e.\u0275\u0275i18n(1,4),e.\u0275\u0275elementEnd())}function yo(n,i){1&n&&(e.\u0275\u0275elementStart(0,"span",21),e.\u0275\u0275i18n(1,5),e.\u0275\u0275elementEnd())}function $o(n,i){1&n&&(e.\u0275\u0275elementStart(0,"span",21),e.\u0275\u0275i18n(1,6),e.\u0275\u0275elementEnd())}function Do(n,i){if(1&n&&e.\u0275\u0275template(0,Lo,2,0,"span",20)(1,yo,2,0,"span",20)(2,$o,2,0,"span",20),2&n){const t=e.\u0275\u0275nextContext(),o=e.\u0275\u0275reference(5);e.\u0275\u0275property("ngIf",t.form.showError("key",o,"required")),e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf",t.form.showError("key",o,"unique")),e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf",t.form.showError("key",o,"maxLength"))}}function Wo(n,i){1&n&&(e.\u0275\u0275elementStart(0,"span",21),e.\u0275\u0275i18n(1,7),e.\u0275\u0275elementEnd())}function xo(n,i){1&n&&(e.\u0275\u0275elementStart(0,"span",21),e.\u0275\u0275i18n(1,8),e.\u0275\u0275elementEnd())}function wo(n,i){if(1&n&&e.\u0275\u0275template(0,Wo,2,0,"span",20)(1,xo,2,0,"span",20),2&n){const t=e.\u0275\u0275nextContext(),o=e.\u0275\u0275reference(5);e.\u0275\u0275property("ngIf",t.form.showError("value",o,"required")),e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf",t.form.showError("value",o,"maxLength"))}}let Uo=(()=>{class n extends d.BaseModal{constructor(t,o){super(),this.formBuilder=t,this.actionLabels=o,this.submitAction=new e.EventEmitter,this.editMode=!1,this.createForm()}createForm(){this.form=this.formBuilder.group({key:[null,[l.Validators.required,M.xQ.custom("unique",t=>!(A().isEmpty(t)&&!this.currentKeyTags)&&this.storedKey!==t&&this.currentKeyTags.includes(t)),M.xQ.custom("maxLength",t=>!A().isEmpty(t)&&t.length>128)]],value:[null,[l.Validators.required,M.xQ.custom("maxLength",t=>!A().isEmpty(t)&&t.length>128)]]})}onSubmit(){this.submitAction.emit(this.form.value),this.closeModal()}getMode(){return this.editMode?this.actionLabels.EDIT:this.actionLabels.ADD}fillForm(t){this.form.setValue(t)}static{this.\u0275fac=function(o){return new(o||n)(e.\u0275\u0275directiveInject(Ge.$),e.\u0275\u0275directiveInject(P.Ss))}}static{this.\u0275cmp=e.\u0275\u0275defineComponent({type:n,selectors:[["cd-bucket-tag-modal"]],outputs:{submitAction:"submitAction"},features:[e.\u0275\u0275InheritDefinitionFeature],decls:20,vars:14,consts:()=>{let t,o,_,a,r,s;return t="" + "\ufffd0\ufffd" + " Tag",o="This field is required.",_="This key must be unique.",a="Length of the key must be maximum of 128 characters",r="This field is required.",s="Length of the value must be a maximum of 128 characters",[["formDir","ngForm"],["keyError",""],["valueError",""],t,o,_,a,r,s,["size","md",3,"overlaySelected","open","hasScrollingContent"],[3,"closeSelect"],["cdsModalHeaderHeading",""],[1,"form",3,"formGroup"],["cdsModalContent",""],[1,"form-item"],["label","Key","for","key","cdRequiredField","Key",3,"invalid","invalidText"],["cdsText","","type","text","id","key","name","key","formControlName","key","modal-primary-focus","",3,"invalid","autofocus"],["label","Value","for","value","cdRequiredField","Value",3,"invalid","invalidText"],["cdsText","","type","text","id","value","name","value","formControlName","value",3,"invalid"],[3,"submitActionEvent","form","submitText","modalForm"],["class","invalid-feedback",4,"ngIf"],[1,"invalid-feedback"]]},template:function(o,_){if(1&o){const a=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"cds-modal",9),e.\u0275\u0275listener("overlaySelected",function(){return e.\u0275\u0275restoreView(a),e.\u0275\u0275resetView(_.closeModal())}),e.\u0275\u0275elementStart(1,"cds-modal-header",10),e.\u0275\u0275listener("closeSelect",function(){return e.\u0275\u0275restoreView(a),e.\u0275\u0275resetView(_.closeModal())}),e.\u0275\u0275elementStart(2,"h3",11),e.\u0275\u0275i18n(3,3),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(4,"form",12,0)(6,"div",13)(7,"div",14)(8,"cds-text-label",15),e.\u0275\u0275text(9,"Key "),e.\u0275\u0275element(10,"input",16),e.\u0275\u0275elementEnd(),e.\u0275\u0275template(11,Do,3,3,"ng-template",null,1,e.\u0275\u0275templateRefExtractor),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(13,"div",14)(14,"cds-text-label",17),e.\u0275\u0275text(15,"Value "),e.\u0275\u0275element(16,"input",18),e.\u0275\u0275elementEnd(),e.\u0275\u0275template(17,wo,2,2,"ng-template",null,2,e.\u0275\u0275templateRefExtractor),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(19,"cd-form-button-panel",19),e.\u0275\u0275listener("submitActionEvent",function(){return e.\u0275\u0275restoreView(a),e.\u0275\u0275resetView(_.onSubmit())}),e.\u0275\u0275elementEnd()()()}if(2&o){const a=e.\u0275\u0275reference(12),r=e.\u0275\u0275reference(18);e.\u0275\u0275property("open",_.open)("hasScrollingContent",!1),e.\u0275\u0275advance(3),e.\u0275\u0275i18nExp(_.getMode()),e.\u0275\u0275i18nApply(3),e.\u0275\u0275advance(),e.\u0275\u0275property("formGroup",_.form),e.\u0275\u0275advance(4),e.\u0275\u0275property("invalid",_.form.controls.key.invalid&&_.form.controls.key.dirty)("invalidText",a),e.\u0275\u0275advance(2),e.\u0275\u0275property("invalid",_.form.controls.key.invalid&&_.form.controls.key.dirty)("autofocus",!0),e.\u0275\u0275advance(4),e.\u0275\u0275property("invalid",_.form.controls.value.invalid&&_.form.controls.value.dirty)("invalidText",r),e.\u0275\u0275advance(2),e.\u0275\u0275property("invalid",_.form.controls.value.invalid&&_.form.controls.value.dirty),e.\u0275\u0275advance(3),e.\u0275\u0275property("form",_.form)("submitText",_.getMode())("modalForm",!0)}},dependencies:[E.NgIf,_e.e,Ct.B,Y.S,oe.E,Qe.P,l.\u0275NgNoValidate,l.DefaultValueAccessor,l.NgControlStatus,l.NgControlStatusGroup,l.FormGroupDirective,l.FormControlName,d.Modal,d.ModalHeader,d.ModalContent,d.ModalHeaderHeading,d.TextInputLabelComponent,d.TextInput]})}}return n})();var Mn=g(11145),xe=g(46459),$e=g(92919),K=g(50619);let ko=(()=>{class n{constructor(){}format(t){if(!t.nativeElement?.value)return;const o=t.nativeElement.value,a=(new DOMParser).parseFromString(o,"application/xml"),c=20*a.getElementsByTagName("*").length;t.nativeElement.style.height=c+"px",a.querySelector("parsererror")}static{this.\u0275fac=function(o){return new(o||n)}}static{this.\u0275prov=e.\u0275\u0275defineInjectable({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();var we=g(12540),Pe=g(92805),ae=g(64333),tn=g(33488);let zo=(()=>{class n{constructor(t,o,_,a){this.elementRef=t,this.control=o,this.dimlessBinaryPerMinutePipe=_,this.formatter=a,this.ngModelChange=new e.EventEmitter,this.el=this.elementRef.nativeElement}ngOnInit(){this.setValue(this.el.value),this.ngDataReady&&this.ngDataReady.subscribe(()=>this.setValue(this.el.value))}setValue(t){if(""===t)return this.ngModelChange.emit(t),void this.control.control.setValue(t);/^[\d.]+$/.test(t)&&(t+=this.defaultUnit||"m");const o=this.formatter.toBytes(t,0),_=this.round(o);this.el.value=this.dimlessBinaryPerMinutePipe.transform(_),null!==o?(this.ngModelChange.emit(this.el.value),this.control.control.setValue(this.el.value)):(this.ngModelChange.emit(null),this.control.control.setValue(null))}round(t){if(null!==t&&0!==t){if(!A().isUndefined(this.minBytes)&&t<this.minBytes)return this.minBytes;if(!A().isUndefined(this.maxBytes)&&t>this.maxBytes)return this.maxBytes;if(!A().isUndefined(this.roundPower)){const o=Math.round(Math.log(t)/Math.log(this.roundPower));return Math.pow(this.roundPower,o)}}return t}onBlur(t){this.setValue(t)}static{this.\u0275fac=function(o){return new(o||n)(e.\u0275\u0275directiveInject(e.ElementRef),e.\u0275\u0275directiveInject(l.NgControl),e.\u0275\u0275directiveInject(tn.E),e.\u0275\u0275directiveInject(we.k))}}static{this.\u0275dir=e.\u0275\u0275defineDirective({type:n,selectors:[["","cdDimlessBinaryPerMinute",""]],hostBindings:function(o,_){1&o&&e.\u0275\u0275listener("blur",function(r){return _.onBlur(r.target.value)})},inputs:{ngDataReady:"ngDataReady",minBytes:"minBytes",maxBytes:"maxBytes",roundPower:"roundPower",defaultUnit:"defaultUnit"},outputs:{ngModelChange:"ngModelChange"}})}}return n})();function Ho(n,i){1&n&&(e.\u0275\u0275i18nStart(0,5,1),e.\u0275\u0275element(1,"cd-help-text"),e.\u0275\u0275i18nEnd())}function Xo(n,i){1&n&&(e.\u0275\u0275i18nStart(0,5,2),e.\u0275\u0275element(1,"cd-help-text"),e.\u0275\u0275i18nEnd())}function Bo(n,i){if(1&n&&(e.\u0275\u0275elementStart(0,"div",36),e.\u0275\u0275element(1,"div",37),e.\u0275\u0275elementStart(2,"div",38)(3,"div")(4,"cd-alert-panel",39),e.\u0275\u0275i18nStart(5,8),e.\u0275\u0275elementStart(6,"div"),e.\u0275\u0275element(7,"span",40)(8,"br"),e.\u0275\u0275pipe(9,"dimlessBinaryPerMinute"),e.\u0275\u0275element(10,"br")(11,"br"),e.\u0275\u0275pipe(12,"dimlessBinaryPerMinute"),e.\u0275\u0275element(13,"br"),e.\u0275\u0275elementEnd(),e.\u0275\u0275i18nEnd(),e.\u0275\u0275elementEnd()()()()),2&n){const t=e.\u0275\u0275nextContext(2);e.\u0275\u0275advance(13),e.\u0275\u0275i18nExp(e.\u0275\u0275pipeBind1(9,4,t.globalRateLimit.max_read_bytes))(t.globalRateLimit.max_read_ops)(e.\u0275\u0275pipeBind1(12,6,t.globalRateLimit.max_write_bytes))(t.globalRateLimit.max_write_ops),e.\u0275\u0275i18nApply(5)}}function Vo(n,i){1&n&&(e.\u0275\u0275elementStart(0,"div",33)(1,"cds-checkbox",41),e.\u0275\u0275elementContainerStart(2),e.\u0275\u0275i18n(3,9),e.\u0275\u0275elementContainerEnd(),e.\u0275\u0275elementStart(4,"cd-help-text"),e.\u0275\u0275i18n(5,10),e.\u0275\u0275elementEnd()()())}function Zo(n,i){1&n&&(e.\u0275\u0275elementStart(0,"span",44),e.\u0275\u0275i18n(1,11),e.\u0275\u0275elementEnd())}function Ko(n,i){1&n&&(e.\u0275\u0275elementStart(0,"span",44),e.\u0275\u0275i18n(1,12),e.\u0275\u0275elementEnd())}function qo(n,i){1&n&&(e.\u0275\u0275elementStart(0,"span",44),e.\u0275\u0275i18n(1,13),e.\u0275\u0275elementEnd())}function jo(n,i){if(1&n&&e.\u0275\u0275template(0,Zo,2,0,"span",43)(1,Ko,2,0,"span",43)(2,qo,2,0,"span",43),2&n){e.\u0275\u0275nextContext(2);const t=e.\u0275\u0275reference(6),o=e.\u0275\u0275nextContext();e.\u0275\u0275property("ngIf",o.form.showError("rate_limit_max_readOps",t,"required")),e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf",o.form.showError("rate_limit_max_readOps",t,"rateOpsMaxSize")),e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf",o.form.showError("rate_limit_max_readOps",t,"min"))}}function Yo(n,i){if(1&n&&(e.\u0275\u0275elementStart(0,"div",33),e.\u0275\u0275element(1,"cds-number",42),e.\u0275\u0275template(2,jo,3,3,"ng-template",null,1,e.\u0275\u0275templateRefExtractor),e.\u0275\u0275elementEnd()),2&n){const t=e.\u0275\u0275reference(3),o=e.\u0275\u0275nextContext(2);e.\u0275\u0275advance(),e.\u0275\u0275property("invalid",o.form.controls.rate_limit_max_readOps.invalid&&o.form.controls.rate_limit_max_readOps.dirty)("invalidText",t)}}function Qo(n,i){1&n&&(e.\u0275\u0275elementStart(0,"div",33)(1,"cds-checkbox",45),e.\u0275\u0275elementContainerStart(2),e.\u0275\u0275i18n(3,14),e.\u0275\u0275elementContainerEnd(),e.\u0275\u0275elementStart(4,"cd-help-text"),e.\u0275\u0275i18n(5,15),e.\u0275\u0275elementEnd()()())}function Jo(n,i){1&n&&(e.\u0275\u0275elementStart(0,"span",44),e.\u0275\u0275i18n(1,16),e.\u0275\u0275elementEnd())}function e_(n,i){1&n&&(e.\u0275\u0275elementStart(0,"span",44),e.\u0275\u0275i18n(1,17),e.\u0275\u0275elementEnd())}function t_(n,i){1&n&&(e.\u0275\u0275elementStart(0,"span",44),e.\u0275\u0275i18n(1,18),e.\u0275\u0275elementEnd())}function n_(n,i){if(1&n&&e.\u0275\u0275template(0,Jo,2,0,"span",43)(1,e_,2,0,"span",43)(2,t_,2,0,"span",43),2&n){e.\u0275\u0275nextContext(2);const t=e.\u0275\u0275reference(6),o=e.\u0275\u0275nextContext();e.\u0275\u0275property("ngIf",o.form.showError("rate_limit_max_writeOps",t,"required")),e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf",o.form.showError("rate_limit_max_writeOps",t,"rateOpsMaxSize")),e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf",o.form.showError("rate_limit_max_writeOps",t,"min"))}}function o_(n,i){if(1&n&&(e.\u0275\u0275elementStart(0,"div",33),e.\u0275\u0275element(1,"cds-number",46),e.\u0275\u0275template(2,n_,3,3,"ng-template",null,2,e.\u0275\u0275templateRefExtractor),e.\u0275\u0275elementEnd()),2&n){const t=e.\u0275\u0275reference(3),o=e.\u0275\u0275nextContext(2);e.\u0275\u0275advance(),e.\u0275\u0275property("invalid",o.form.controls.rate_limit_max_writeOps.invalid&&o.form.controls.rate_limit_max_writeOps.dirty)("invalidText",t)}}function __(n,i){1&n&&(e.\u0275\u0275elementStart(0,"div",33)(1,"cds-checkbox",47),e.\u0275\u0275elementContainerStart(2),e.\u0275\u0275i18n(3,19),e.\u0275\u0275elementContainerEnd(),e.\u0275\u0275elementStart(4,"cd-help-text"),e.\u0275\u0275i18n(5,20),e.\u0275\u0275elementEnd()()())}function i_(n,i){1&n&&(e.\u0275\u0275elementStart(0,"span",44),e.\u0275\u0275i18n(1,21),e.\u0275\u0275elementEnd())}function a_(n,i){1&n&&(e.\u0275\u0275elementStart(0,"span",44),e.\u0275\u0275i18n(1,22),e.\u0275\u0275elementEnd())}function r_(n,i){1&n&&(e.\u0275\u0275elementStart(0,"span",44),e.\u0275\u0275i18n(1,23),e.\u0275\u0275elementEnd())}function l_(n,i){if(1&n&&e.\u0275\u0275template(0,i_,2,0,"span",43)(1,a_,2,0,"span",43)(2,r_,2,0,"span",43),2&n){e.\u0275\u0275nextContext(2);const t=e.\u0275\u0275reference(6),o=e.\u0275\u0275nextContext();e.\u0275\u0275property("ngIf",o.form.showError("rate_limit_max_readBytes",t,"required")),e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf",o.form.showError("rate_limit_max_readBytes",t,"rateByteMaxSize")),e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf",o.form.showError("rate_limit_max_readBytes",t,"min"))}}function s_(n,i){if(1&n&&(e.\u0275\u0275elementStart(0,"div",33)(1,"cds-text-label",48),e.\u0275\u0275element(2,"input",49),e.\u0275\u0275elementEnd(),e.\u0275\u0275template(3,l_,3,3,"ng-template",null,3,e.\u0275\u0275templateRefExtractor),e.\u0275\u0275elementEnd()),2&n){const t=e.\u0275\u0275reference(4),o=e.\u0275\u0275nextContext(2);e.\u0275\u0275advance(),e.\u0275\u0275property("invalid",o.form.controls.rate_limit_max_readBytes.invalid&&o.form.controls.rate_limit_max_readBytes.dirty)("invalidText",t),e.\u0275\u0275advance(),e.\u0275\u0275property("invalid",o.form.controls.rate_limit_max_readBytes.invalid&&o.form.controls.rate_limit_max_readBytes.dirty)}}function c_(n,i){1&n&&(e.\u0275\u0275elementStart(0,"div",33)(1,"cds-checkbox",50),e.\u0275\u0275elementContainerStart(2),e.\u0275\u0275i18n(3,24),e.\u0275\u0275elementContainerEnd(),e.\u0275\u0275elementStart(4,"cd-help-text"),e.\u0275\u0275i18n(5,25),e.\u0275\u0275elementEnd()()())}function d_(n,i){1&n&&(e.\u0275\u0275elementStart(0,"span",44),e.\u0275\u0275i18n(1,26),e.\u0275\u0275elementEnd())}function u_(n,i){1&n&&(e.\u0275\u0275elementStart(0,"span",44),e.\u0275\u0275i18n(1,27),e.\u0275\u0275elementEnd())}function p_(n,i){1&n&&(e.\u0275\u0275elementStart(0,"span",44),e.\u0275\u0275i18n(1,28),e.\u0275\u0275elementEnd())}function m_(n,i){if(1&n&&e.\u0275\u0275template(0,d_,2,0,"span",43)(1,u_,2,0,"span",43)(2,p_,2,0,"span",43),2&n){e.\u0275\u0275nextContext(2);const t=e.\u0275\u0275reference(6),o=e.\u0275\u0275nextContext();e.\u0275\u0275property("ngIf",o.form.showError("rate_limit_max_readBytes",t,"required")),e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf",o.form.showError("rate_limit_max_readBytes",t,"rateByteMaxSize")),e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf",o.form.showError("rate_limit_max_readBytes",t,"min"))}}function T_(n,i){if(1&n&&(e.\u0275\u0275elementStart(0,"div",33)(1,"cds-text-label",51),e.\u0275\u0275element(2,"input",52),e.\u0275\u0275elementEnd(),e.\u0275\u0275template(3,m_,3,3,"ng-template",null,4,e.\u0275\u0275templateRefExtractor),e.\u0275\u0275elementEnd()),2&n){const t=e.\u0275\u0275reference(4),o=e.\u0275\u0275nextContext(2);e.\u0275\u0275advance(),e.\u0275\u0275property("invalid",o.form.controls.rate_limit_max_writeBytes.invalid&&o.form.controls.rate_limit_max_writeBytes.dirty)("invalidText",t),e.\u0275\u0275advance(),e.\u0275\u0275property("invalid",o.form.controls.rate_limit_max_writeBytes.invalid&&o.form.controls.rate_limit_max_writeBytes.dirty)}}function g_(n,i){if(1&n&&(e.\u0275\u0275elementStart(0,"fieldset")(1,"legend",30),e.\u0275\u0275i18nStart(2,5),e.\u0275\u0275template(3,Ho,2,0,"cd-help-text",29)(4,Xo,2,0,"cd-help-text",29),e.\u0275\u0275i18nEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(5,"form",31,0),e.\u0275\u0275template(7,Bo,14,8,"div",32),e.\u0275\u0275elementStart(8,"div",33)(9,"cds-checkbox",34),e.\u0275\u0275elementContainerStart(10),e.\u0275\u0275i18n(11,6),e.\u0275\u0275elementContainerEnd(),e.\u0275\u0275elementStart(12,"cd-help-text"),e.\u0275\u0275i18n(13,7),e.\u0275\u0275elementEnd()()(),e.\u0275\u0275template(14,Vo,6,0,"div",35)(15,Yo,4,2,"div",35)(16,Qo,6,0,"div",35)(17,o_,4,2,"div",35)(18,__,6,0,"div",35)(19,s_,5,3,"div",35)(20,c_,6,0,"div",35)(21,T_,5,3,"div",35),e.\u0275\u0275elementEnd()()),2&n){const t=e.\u0275\u0275nextContext();e.\u0275\u0275advance(3),e.\u0275\u0275property("ngIf","user"===t.type),e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf","bucket"===t.type),e.\u0275\u0275advance(),e.\u0275\u0275property("formGroup",t.form),e.\u0275\u0275advance(2),e.\u0275\u0275property("ngIf",!!t.globalRateLimit&&t.globalRateLimit.enabled),e.\u0275\u0275advance(7),e.\u0275\u0275property("ngIf",t.form.controls.rate_limit_enabled.value),e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf",t.form.controls.rate_limit_enabled.value&&!t.form.getValue("rate_limit_max_readOps_unlimited")),e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf",t.form.controls.rate_limit_enabled.value),e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf",t.form.controls.rate_limit_enabled.value&&!t.form.getValue("rate_limit_max_writeOps_unlimited")),e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf",t.form.controls.rate_limit_enabled.value),e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf",t.form.controls.rate_limit_enabled.value&&!t.form.getValue("rate_limit_max_readBytes_unlimited")),e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf",t.form.controls.rate_limit_enabled.value),e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf",t.form.controls.rate_limit_enabled.value&&!t.form.getValue("rate_limit_max_writeBytes_unlimited"))}}let Ht=(()=>{class n{set allowBid(t){this.bid=t,this.isEditing&&this.bid&&"bucket"==this.type&&this.getRateLimitFormValues()}constructor(t,o,_,a){this.formBuilder=t,this.rgwUserService=o,this.rgwBucketService=_,this.notificationService=a,this.formValue=new e.EventEmitter,this.rateLimitFormGroup=new e.EventEmitter}ngOnInit(){"user"===this.type?(this.rgwUserService.getGlobalUserRateLimit().subscribe(t=>{t&&void 0!==t.user_ratelimit&&(this.globalRateLimit=t.user_ratelimit)},t=>{this.notificationService.show(w._.error,t)}),this.isEditing&&this.getRateLimitFormValues()):this.rgwBucketService.getGlobalBucketRateLimit().subscribe(t=>{t&&void 0!==t.bucket_ratelimit&&(this.globalRateLimit=t.bucket_ratelimit)},t=>{this.notificationService.show(w._.error,t)}),this.form=this.formBuilder.group({rate_limit_enabled:[!1],rate_limit_max_readOps_unlimited:[!0],rate_limit_max_readOps:[null,[M.xQ.composeIf({rate_limit_enabled:!0,rate_limit_max_readOps_unlimited:!1},[l.Validators.required,this.rateLimitIopmMaxSizeValidator])]],rate_limit_max_writeOps_unlimited:[!0],rate_limit_max_writeOps:[null,[M.xQ.composeIf({rate_limit_enabled:!0,rate_limit_max_writeOps_unlimited:!1},[l.Validators.required,this.rateLimitIopmMaxSizeValidator])]],rate_limit_max_readBytes_unlimited:[!0],rate_limit_max_readBytes:[null,[M.xQ.composeIf({rate_limit_enabled:!0,rate_limit_max_readBytes_unlimited:!1},[l.Validators.required,this.rateLimitBytesMaxSizeValidator])]],rate_limit_max_writeBytes_unlimited:[!0],rate_limit_max_writeBytes:[null,[M.xQ.composeIf({rate_limit_enabled:!0,rate_limit_max_writeBytes_unlimited:!1},[l.Validators.required,this.rateLimitBytesMaxSizeValidator])]]})}populateFormValues(t){this.form.get("rate_limit_enabled").setValue(t.enabled),this._setRateLimitProperty("rate_limit_max_readBytes","rate_limit_max_readBytes_unlimited",t.max_read_bytes),this._setRateLimitProperty("rate_limit_max_writeBytes","rate_limit_max_writeBytes_unlimited",t.max_write_bytes),this._setRateLimitProperty("rate_limit_max_readOps","rate_limit_max_readOps_unlimited",t.max_read_ops),this._setRateLimitProperty("rate_limit_max_writeOps","rate_limit_max_writeOps_unlimited",t.max_write_ops)}getRateLimitFormValues(){"user"===this.type?this.rgwUserService.getUserRateLimit(this.id).subscribe(t=>{this.populateFormValues(t.user_ratelimit)},t=>{this.notificationService.show(w._.error,t)}):this.rgwBucketService.getBucketRateLimit(this.bid).subscribe(t=>{this.populateFormValues(t.bucket_ratelimit)},t=>{this.notificationService.show(w._.error,t)})}rateLimitBytesMaxSizeValidator(t){return(new we.k).performValidation(t,"^(\\d+(\\.\\d+)?)\\s*(B/m|K(B|iB/m)?|M(B|iB/m)?|G(B|iB/m)?|T(B|iB/m)?|P(B|iB/m)?)?$",{rateByteMaxSize:!0})}rateLimitIopmMaxSizeValidator(t){return(new we.k).iopmMaxSizeValidator(t)}getRateLimitFormValue(){return this._isRateLimitFormDirty()?this._getRateLimitArgs():null}ngAfterViewInit(){this.rateLimitFormGroup.emit(this.form)}_isRateLimitFormDirty(){return["rate_limit_enabled","rate_limit_max_readOps_unlimited","rate_limit_max_readOps","rate_limit_max_writeOps_unlimited","rate_limit_max_writeOps","rate_limit_max_readBytes_unlimited","rate_limit_max_readBytes","rate_limit_max_writeBytes_unlimited","rate_limit_max_writeBytes"].some(t=>this.form.get(t).dirty)}_getRateLimitArgs(){const t={enabled:this.form.getValue("rate_limit_enabled"),max_read_ops:0,max_write_ops:0,max_read_bytes:0,max_write_bytes:0};return this.form.getValue("rate_limit_max_readOps_unlimited")||(t.max_read_ops=this.form.getValue("rate_limit_max_readOps")),this.form.getValue("rate_limit_max_writeOps_unlimited")||(t.max_write_ops=this.form.getValue("rate_limit_max_writeOps")),this.form.getValue("rate_limit_max_readBytes_unlimited")||(t.max_read_bytes=(new we.k).toBytes(this.form.getValue("rate_limit_max_readBytes"))),this.form.getValue("rate_limit_max_writeBytes_unlimited")||(t.max_write_bytes=(new we.k).toBytes(this.form.getValue("rate_limit_max_writeBytes"))),t}_setRateLimitProperty(t,o,_){0===_?(this.form.get(o).setValue(!0),this.form.get(t).setValue("")):(this.form.get(o).setValue(!1),this.form.get(t).setValue(_))}static{this.\u0275fac=function(o){return new(o||n)(e.\u0275\u0275directiveInject(Ge.$),e.\u0275\u0275directiveInject(Rt.p),e.\u0275\u0275directiveInject(Le.c),e.\u0275\u0275directiveInject(ne.J))}}static{this.\u0275cmp=e.\u0275\u0275defineComponent({type:n,selectors:[["cd-rgw-rate-limit"]],inputs:{type:"type",isEditing:"isEditing",id:"id",allowBid:"allowBid"},outputs:{formValue:"formValue",rateLimitFormGroup:"rateLimitFormGroup"},decls:1,vars:1,consts:()=>{let t,o,_,a,r,s,c,u,p,T,f,G,S,O,C,b,N,k,z,$,X,B,V,Z,F,I,te,J,j,ee;return t=" Rate Limit " + "\ufffd*3:1\ufffd\ufffd#1:1\ufffd" + " The User Rate Limit controls the max read/write operations and data per minute for each user. " + "[\ufffd/#1:1\ufffd\ufffd/*3:1\ufffd|\ufffd/#1:2\ufffd\ufffd/*4:2\ufffd]" + "" + "\ufffd*4:2\ufffd\ufffd#1:2\ufffd" + " The Bucket Rate Limit controls the max read/write operations and data per minute for each bucket. " + "[\ufffd/#1:1\ufffd\ufffd/*3:1\ufffd|\ufffd/#1:2\ufffd\ufffd/*4:2\ufffd]" + "",t=e.\u0275\u0275i18nPostprocess(t),o="Enabled",_="Toggle to enable or disable the rate limit settings.",a="" + "\ufffd#6\ufffd" + "" + "\ufffd#7\ufffd" + "Global Rate Limit" + "\ufffd/#7\ufffd" + "" + "[\ufffd#8\ufffd\ufffd/#8\ufffd|\ufffd#10\ufffd\ufffd/#10\ufffd|\ufffd#11\ufffd\ufffd/#11\ufffd|\ufffd#13\ufffd\ufffd/#13\ufffd]" + "Max. read bytes : " + "\ufffd0\ufffd" + " " + "[\ufffd#8\ufffd\ufffd/#8\ufffd|\ufffd#10\ufffd\ufffd/#10\ufffd|\ufffd#11\ufffd\ufffd/#11\ufffd|\ufffd#13\ufffd\ufffd/#13\ufffd]" + "Max. read ops : " + "\ufffd1\ufffd" + " " + "[\ufffd#8\ufffd\ufffd/#8\ufffd|\ufffd#10\ufffd\ufffd/#10\ufffd|\ufffd#11\ufffd\ufffd/#11\ufffd|\ufffd#13\ufffd\ufffd/#13\ufffd]" + "Max. write bytes : " + "\ufffd2\ufffd" + " " + "[\ufffd#8\ufffd\ufffd/#8\ufffd|\ufffd#10\ufffd\ufffd/#10\ufffd|\ufffd#11\ufffd\ufffd/#11\ufffd|\ufffd#13\ufffd\ufffd/#13\ufffd]" + "Max. write ops : " + "\ufffd3\ufffd" + " " + "\ufffd/#6\ufffd" + "",a=e.\u0275\u0275i18nPostprocess(a),r="Unlimited read ops",s="Select this box to allow unlimited read operations.",c="Maximum read ops",u="Limits the number of read operations per minute for a user.",p="This field is required.",T="The value is not valid.",f="Enter a positive number.",G="Unlimited write ops",S="Select this box to allow unlimited write operations.",O="Maximum write ops",C="Limits the number of write operations per minute for a user.",b="This field is required.",N="The value is not valid.",k="Enter a positive number.",z="Unlimited read bytes",$="Select this box to allow unlimited read bytes.",X="Limits the number of read bytes per minute for a user.",B="This field is required.",V="The value is not valid.",Z="Enter a positive number.",F="Unlimited write bytes",I="Select this box to allow unlimited write bytes.",te="Limits the number of write bytes per minute for a user.",J="This field is required.",j="The value is not valid.",ee="Enter a positive number.",[["frm","ngForm"],["rateLimitMaxReadOpsError",""],["rateLimitMaxWriteOpsError",""],["maxReadBytesError",""],["maxWriteBytesError",""],t,o,_,a,r,s,p,T,f,G,S,b,N,k,z,$,B,V,Z,F,I,J,j,ee,[4,"ngIf"],[1,"cd-header"],["name","form","novalidate","",3,"formGroup"],["class","row",4,"ngIf"],[1,"form-item"],["id","rate_limit_enabled","formControlName","rate_limit_enabled"],["class","form-item",4,"ngIf"],[1,"row"],[1,"col-3"],[1,"col-9"],["type","info","id","global-ratelimit-info",1,"me-1"],[1,"bold"],["id","rate_limit_max_readOps_unlimited","formControlName","rate_limit_max_readOps_unlimited"],["id","rate_limit_max_readOps","formControlName","rate_limit_max_readOps","label",c,"cdRequiredField","Maximum read ops","helperText",u,3,"invalid","invalidText"],["class","invalid-feedback",4,"ngIf"],[1,"invalid-feedback"],["id","rate_limit_max_writeOps_unlimited","formControlName","rate_limit_max_writeOps_unlimited"],["id","rate_limit_max_writeOps","formControlName","rate_limit_max_writeOps","label",O,"cdRequiredField","Maximum write ops","helperText",C,3,"invalid","invalidText"],["id","rate_limit_max_readBytes_unlimited","formControlName","rate_limit_max_readBytes_unlimited"],["labelInputID","rate_limit_max_readBytes","cdRequiredField","Maximum read bytes","helperText",X,3,"invalid","invalidText"],["cdsText","","id","rate_limit_max_readBytes","formControlName","rate_limit_max_readBytes","defaultUnit","b","cdDimlessBinaryPerMinute","",3,"invalid"],["id","rate_limit_max_writeBytes_unlimited","formControlName","rate_limit_max_writeBytes_unlimited"],["labelInputID","rate_limit_max_writeBytes","cdRequiredField","Maximum write bytes","helperText",te,3,"invalid","invalidText"],["cdsText","","id","rate_limit_max_writeBytes","formControlName","rate_limit_max_writeBytes","defaultUnit","b","cdDimlessBinaryPerMinute","",3,"invalid"]]},template:function(o,_){1&o&&e.\u0275\u0275template(0,g_,22,12,"fieldset",29),2&o&&e.\u0275\u0275property("ngIf",_.type)},dependencies:[E.NgIf,Pe.m,ae.O,Y.S,oe.E,Qe.P,zo,l.\u0275NgNoValidate,l.DefaultValueAccessor,l.NgControlStatus,l.NgControlStatusGroup,l.FormGroupDirective,l.FormControlName,d.TextInputLabelComponent,d.TextInput,d.Checkbox,d.NumberComponent,tn.E]})}}return n})();var he=g(94254),nn=g(36618);let ht=(()=>{class n{constructor(t,o){this.http=t,this.rgwDaemonService=o,this.url="api/rgw/accounts"}list(t){return this.rgwDaemonService.request(o=>(t&&(o=o.append("detailed",t)),this.http.get(this.url,{params:o})))}get(t){return this.rgwDaemonService.request(o=>(t&&(o=o.append("account_id",t)),this.http.get(`${this.url}/get`,{params:o})))}create(t){return this.rgwDaemonService.request(o=>this.http.post(this.url,t,{params:o}))}modify(t){return this.rgwDaemonService.request(o=>this.http.put(`${this.url}/set`,t,{params:o}))}remove(t){return this.rgwDaemonService.request(o=>this.http.delete(`${this.url}/${t}`,{params:o}))}setQuota(t,o){return this.http.put(`${this.url}/${t}/quota`,o)}static{this.\u0275fac=function(o){return new(o||n)(e.\u0275\u0275inject(nn.HttpClient),e.\u0275\u0275inject($e.y))}}static{this.\u0275prov=e.\u0275\u0275defineInjectable({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();var E_=g(23589),on=g(95131),ft=g(56677),Ie=g(37353);const R_=["bucketPolicyTextArea"],C_=["lifecycleTextArea"],f_=()=>({md:4}),S_=(n,i)=>({status:n,isDefaultZg:i}),F_=(n,i)=>({index:n,tag:i});function M_(n,i){1&n&&(e.\u0275\u0275elementStart(0,"div",84)(1,"cds-text-label",112),e.\u0275\u0275i18nStart(2,32),e.\u0275\u0275element(3,"input",113),e.\u0275\u0275i18nEnd(),e.\u0275\u0275elementEnd()())}function P_(n,i){1&n&&(e.\u0275\u0275elementStart(0,"span",115),e.\u0275\u0275i18n(1,33),e.\u0275\u0275elementEnd())}function I_(n,i){1&n&&(e.\u0275\u0275elementStart(0,"span",115),e.\u0275\u0275i18n(1,34),e.\u0275\u0275elementEnd())}function O_(n,i){1&n&&(e.\u0275\u0275elementStart(0,"span",115),e.\u0275\u0275i18n(1,35),e.\u0275\u0275elementEnd())}function G_(n,i){1&n&&(e.\u0275\u0275elementStart(0,"span",115),e.\u0275\u0275i18n(1,36),e.\u0275\u0275elementEnd())}function N_(n,i){1&n&&(e.\u0275\u0275elementStart(0,"span",115),e.\u0275\u0275i18n(1,37),e.\u0275\u0275elementEnd())}function A_(n,i){1&n&&(e.\u0275\u0275elementStart(0,"span",115),e.\u0275\u0275i18n(1,38),e.\u0275\u0275elementEnd())}function h_(n,i){1&n&&(e.\u0275\u0275elementStart(0,"span",115),e.\u0275\u0275i18n(1,39),e.\u0275\u0275elementEnd())}function b_(n,i){1&n&&(e.\u0275\u0275elementStart(0,"span",115),e.\u0275\u0275i18n(1,40),e.\u0275\u0275elementEnd())}function v_(n,i){if(1&n&&e.\u0275\u0275template(0,P_,2,0,"span",114)(1,I_,2,0,"span",114)(2,O_,2,0,"span",114)(3,G_,2,0,"span",114)(4,N_,2,0,"span",114)(5,A_,2,0,"span",114)(6,h_,2,0,"span",114)(7,b_,2,0,"span",114),2&n){e.\u0275\u0275nextContext();const t=e.\u0275\u0275reference(2),o=e.\u0275\u0275nextContext();e.\u0275\u0275property("ngIf",o.bucketForm.showError("bid",t,"required")),e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf",o.bucketForm.showError("bid",t,"bucketNameInvalid")),e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf",o.bucketForm.showError("bid",t,"bucketNameNotAllowed")),e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf",o.bucketForm.showError("bid",t,"containsUpperCase")),e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf",o.bucketForm.showError("bid",t,"lowerCaseOrNumber")),e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf",o.bucketForm.showError("bid",t,"ipAddress")),e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf",o.bucketForm.showError("bid",t,"onlyLowerCaseAndNumbers")),e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf",o.bucketForm.showError("bid",t,"shouldBeInRange"))}}function L_(n,i){1&n&&(e.\u0275\u0275elementStart(0,"cds-checkbox",87),e.\u0275\u0275i18n(1,41),e.\u0275\u0275elementEnd())}function y_(n,i){1&n&&(e.\u0275\u0275i18nStart(0,42,1),e.\u0275\u0275element(1,"option",120),e.\u0275\u0275i18nEnd()),2&n&&(e.\u0275\u0275advance(),e.\u0275\u0275property("ngValue",null))}function $_(n,i){1&n&&(e.\u0275\u0275i18nStart(0,42,2),e.\u0275\u0275element(1,"option",121),e.\u0275\u0275i18nEnd())}function D_(n,i){if(1&n&&(e.\u0275\u0275i18nStart(0,42,3),e.\u0275\u0275element(1,"option",122),e.\u0275\u0275i18nEnd()),2&n){const t=i.$implicit;e.\u0275\u0275advance(),e.\u0275\u0275property("value",t.uid),e.\u0275\u0275i18nExp(t.uid),e.\u0275\u0275i18nApply(0)}}function W_(n,i){1&n&&(e.\u0275\u0275elementStart(0,"span",115),e.\u0275\u0275i18n(1,43),e.\u0275\u0275elementEnd())}function x_(n,i){if(1&n&&e.\u0275\u0275template(0,W_,2,0,"span",114),2&n){e.\u0275\u0275nextContext(2);const t=e.\u0275\u0275reference(2),o=e.\u0275\u0275nextContext();e.\u0275\u0275property("ngIf",o.bucketForm.showError("accountUser",t,"required"))}}function w_(n,i){1&n&&(e.\u0275\u0275elementStart(0,"cd-alert-panel",123),e.\u0275\u0275i18n(1,44),e.\u0275\u0275elementEnd())}function U_(n,i){if(1&n&&(e.\u0275\u0275elementStart(0,"div",84)(1,"cds-select",116),e.\u0275\u0275i18nStart(2,42),e.\u0275\u0275template(3,y_,2,1,"option",117)(4,$_,2,0,"option",118)(5,D_,2,2,"option",108),e.\u0275\u0275i18nEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275template(6,x_,1,1,"ng-template",null,8,e.\u0275\u0275templateRefExtractor)(8,w_,2,0,"cd-alert-panel",119),e.\u0275\u0275elementEnd()),2&n){const t=e.\u0275\u0275reference(7),o=e.\u0275\u0275nextContext(2);e.\u0275\u0275advance(),e.\u0275\u0275property("invalidText",t)("invalid",!o.bucketForm.controls.accountUser.valid&&o.bucketForm.controls.accountUser.dirty),e.\u0275\u0275advance(2),e.\u0275\u0275property("ngIf",null===o.accountusers),e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf",null!==o.accountusers),e.\u0275\u0275advance(),e.\u0275\u0275property("ngForOf",o.accountUsers),e.\u0275\u0275advance(3),e.\u0275\u0275property("ngIf",o.bucketForm.get("accountUser").disabled)}}function k_(n,i){1&n&&(e.\u0275\u0275i18nStart(0,45,1),e.\u0275\u0275element(1,"option",120),e.\u0275\u0275i18nEnd()),2&n&&(e.\u0275\u0275advance(),e.\u0275\u0275property("ngValue",null))}function z_(n,i){1&n&&(e.\u0275\u0275i18nStart(0,45,2),e.\u0275\u0275element(1,"option",121),e.\u0275\u0275i18nEnd())}function H_(n,i){if(1&n&&(e.\u0275\u0275i18nStart(0,45,3),e.\u0275\u0275element(1,"option",122),e.\u0275\u0275i18nEnd()),2&n){const t=i.$implicit;e.\u0275\u0275advance(),e.\u0275\u0275property("value",t.uid),e.\u0275\u0275i18nExp(t.uid),e.\u0275\u0275i18nApply(0)}}function X_(n,i){1&n&&(e.\u0275\u0275elementStart(0,"span",115),e.\u0275\u0275i18n(1,46),e.\u0275\u0275elementEnd())}function B_(n,i){if(1&n&&e.\u0275\u0275template(0,X_,2,0,"span",114),2&n){e.\u0275\u0275nextContext(2);const t=e.\u0275\u0275reference(2),o=e.\u0275\u0275nextContext();e.\u0275\u0275property("ngIf",o.bucketForm.showError("owner",t,"required"))}}function V_(n,i){if(1&n&&(e.\u0275\u0275elementStart(0,"div",84)(1,"cds-select",124),e.\u0275\u0275i18nStart(2,45),e.\u0275\u0275template(3,k_,2,1,"option",117)(4,z_,2,0,"option",118)(5,H_,2,2,"option",108),e.\u0275\u0275i18nEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275template(6,B_,1,1,"ng-template",null,9,e.\u0275\u0275templateRefExtractor),e.\u0275\u0275elementEnd()),2&n){const t=e.\u0275\u0275reference(7),o=e.\u0275\u0275nextContext(2);e.\u0275\u0275advance(),e.\u0275\u0275property("invalidText",t)("invalid",!o.bucketForm.controls.owner.valid&&o.bucketForm.controls.owner.dirty),e.\u0275\u0275advance(2),e.\u0275\u0275property("ngIf",null===o.owners),e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf",null!==o.owners),e.\u0275\u0275advance(),e.\u0275\u0275property("ngForOf",o.owners)}}function Z_(n,i){if(1&n){const t=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"fieldset")(1,"div",84)(2,"legend",89),e.\u0275\u0275i18n(3,47),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(4,"cds-checkbox",125),e.\u0275\u0275listener("checkedChange",function(){e.\u0275\u0275restoreView(t);const _=e.\u0275\u0275nextContext(2);return e.\u0275\u0275resetView(_.setMfaDeleteValidators())}),e.\u0275\u0275i18nStart(5,48),e.\u0275\u0275elementStart(6,"cd-help-text"),e.\u0275\u0275element(7,"span"),e.\u0275\u0275elementEnd(),e.\u0275\u0275i18nEnd(),e.\u0275\u0275elementEnd()()()}}function K_(n,i){1&n&&(e.\u0275\u0275elementStart(0,"span",115),e.\u0275\u0275i18n(1,52),e.\u0275\u0275elementEnd())}function q_(n,i){if(1&n&&e.\u0275\u0275template(0,K_,2,0,"span",114),2&n){e.\u0275\u0275nextContext(3);const t=e.\u0275\u0275reference(2),o=e.\u0275\u0275nextContext();e.\u0275\u0275property("ngIf",o.bucketForm.showError("mfa-token-serial",t,"required"))}}function j_(n,i){if(1&n&&(e.\u0275\u0275elementStart(0,"div",84)(1,"cds-text-label",127),e.\u0275\u0275i18nStart(2,51),e.\u0275\u0275element(3,"input",128),e.\u0275\u0275i18nEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275template(4,q_,1,1,"ng-template",null,10,e.\u0275\u0275templateRefExtractor),e.\u0275\u0275elementEnd()),2&n){const t=e.\u0275\u0275reference(5),o=e.\u0275\u0275nextContext(3);e.\u0275\u0275advance(),e.\u0275\u0275property("invalid",!o.bucketForm.controls["mfa-token-serial"].valid&&o.bucketForm.controls["mfa-token-serial"].dirty)("invalidText",t),e.\u0275\u0275advance(2),e.\u0275\u0275property("invalid",!o.bucketForm.controls["mfa-token-serial"].valid&&o.bucketForm.controls["mfa-token-serial"].dirty)}}function Y_(n,i){1&n&&(e.\u0275\u0275elementStart(0,"span",115),e.\u0275\u0275i18n(1,54),e.\u0275\u0275elementEnd())}function Q_(n,i){if(1&n&&e.\u0275\u0275template(0,Y_,2,0,"span",114),2&n){e.\u0275\u0275nextContext(3);const t=e.\u0275\u0275reference(2),o=e.\u0275\u0275nextContext();e.\u0275\u0275property("ngIf",o.bucketForm.showError("mfa-token-pin",t,"required"))}}function J_(n,i){if(1&n&&(e.\u0275\u0275elementStart(0,"div",84)(1,"cds-text-label",129),e.\u0275\u0275i18nStart(2,53),e.\u0275\u0275element(3,"input",130),e.\u0275\u0275i18nEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275template(4,Q_,1,1,"ng-template",null,11,e.\u0275\u0275templateRefExtractor),e.\u0275\u0275elementEnd()),2&n){const t=e.\u0275\u0275reference(5),o=e.\u0275\u0275nextContext(3);e.\u0275\u0275advance(),e.\u0275\u0275property("invalid",!o.bucketForm.controls["mfa-token-pin"].valid&&o.bucketForm.controls["mfa-token-pin"].dirty)("invalidText",t),e.\u0275\u0275advance(2),e.\u0275\u0275property("invalid",!o.bucketForm.controls["mfa-token-pin"].valid&&o.bucketForm.controls["mfa-token-pin"].dirty)}}function ei(n,i){if(1&n){const t=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"fieldset")(1,"div",84)(2,"legend",89),e.\u0275\u0275i18n(3,49),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(4,"cds-checkbox",126),e.\u0275\u0275listener("checkedChange",function(){e.\u0275\u0275restoreView(t);const _=e.\u0275\u0275nextContext(2);return e.\u0275\u0275resetView(_.setMfaDeleteValidators())}),e.\u0275\u0275i18n(5,50),e.\u0275\u0275elementEnd()(),e.\u0275\u0275template(6,j_,6,3,"div",83)(7,J_,6,3,"div",83),e.\u0275\u0275elementEnd()}if(2&n){const t=e.\u0275\u0275nextContext(2);e.\u0275\u0275advance(6),e.\u0275\u0275property("ngIf",t.areMfaCredentialsRequired()),e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf",t.areMfaCredentialsRequired())}}function ti(n,i){1&n&&(e.\u0275\u0275elementStart(0,"span"),e.\u0275\u0275i18n(1,58),e.\u0275\u0275elementEnd())}function ni(n,i){1&n&&(e.\u0275\u0275elementStart(0,"span"),e.\u0275\u0275i18n(1,59),e.\u0275\u0275elementEnd())}function oi(n,i){if(1&n&&e.\u0275\u0275template(0,ti,2,0,"span",88)(1,ni,2,0,"span",88),2&n){const t=e.\u0275\u0275nextContext(4);e.\u0275\u0275property("ngIf","COMPLIANCE"===t.bucketForm.getValue("lock_mode")),e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf","GOVERNANCE"===t.bucketForm.getValue("lock_mode"))}}function _i(n,i){if(1&n&&(e.\u0275\u0275elementStart(0,"div",84)(1,"cds-select",134),e.\u0275\u0275i18nStart(2,57),e.\u0275\u0275element(3,"option",135)(4,"option",136),e.\u0275\u0275i18nEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275template(5,oi,2,2,"ng-template",null,12,e.\u0275\u0275templateRefExtractor),e.\u0275\u0275elementEnd()),2&n){const t=e.\u0275\u0275reference(6);e.\u0275\u0275advance(),e.\u0275\u0275property("helperText",t)}}function ii(n,i){1&n&&(e.\u0275\u0275elementStart(0,"span",115),e.\u0275\u0275i18n(1,60),e.\u0275\u0275elementEnd())}function ai(n,i){1&n&&(e.\u0275\u0275elementStart(0,"span",115),e.\u0275\u0275i18n(1,61),e.\u0275\u0275elementEnd())}function ri(n,i){if(1&n&&e.\u0275\u0275template(0,ii,2,0,"span",114)(1,ai,2,0,"span",114),2&n){e.\u0275\u0275nextContext(3);const t=e.\u0275\u0275reference(2),o=e.\u0275\u0275nextContext();e.\u0275\u0275property("ngIf",o.bucketForm.showError("lock_retention_period_days",t,"pattern")),e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf",o.bucketForm.showError("lock_retention_period_days",t,"lockDays"))}}function li(n,i){if(1&n&&(e.\u0275\u0275elementStart(0,"div",84),e.\u0275\u0275element(1,"cds-number",137),e.\u0275\u0275template(2,ri,2,2,"ng-template",null,13,e.\u0275\u0275templateRefExtractor),e.\u0275\u0275elementEnd()),2&n){const t=e.\u0275\u0275reference(3),o=e.\u0275\u0275nextContext(3);e.\u0275\u0275advance(),e.\u0275\u0275property("invalid",o.bucketForm.controls.lock_retention_period_days.invalid&&o.bucketForm.controls.lock_retention_period_days.dirty)("invalidText",t)}}function si(n,i){1&n&&(e.\u0275\u0275elementStart(0,"cd-alert-panel",138),e.\u0275\u0275text(1," Bucket Versioning can't be disabled when Object Locking is enabled. "),e.\u0275\u0275elementEnd())}function ci(n,i){1&n&&(e.\u0275\u0275elementStart(0,"cd-alert-panel",139),e.\u0275\u0275text(1," Enabling Object Locking will allow the configuration of GOVERNANCE or COMPLIANCE modes, which will help ensure that an object version cannot be overwritten or deleted for the specified period. "),e.\u0275\u0275elementEnd())}function di(n,i){if(1&n&&(e.\u0275\u0275elementStart(0,"fieldset")(1,"div",84)(2,"legend",89),e.\u0275\u0275i18nStart(3,55),e.\u0275\u0275element(4,"cd-help-text"),e.\u0275\u0275i18nEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(5,"cds-checkbox",131),e.\u0275\u0275i18nStart(6,56),e.\u0275\u0275elementStart(7,"cd-help-text"),e.\u0275\u0275element(8,"span"),e.\u0275\u0275elementEnd(),e.\u0275\u0275i18nEnd(),e.\u0275\u0275elementEnd()(),e.\u0275\u0275template(9,_i,7,1,"div",83)(10,li,4,2,"div",83)(11,si,2,0,"cd-alert-panel",132)(12,ci,2,0,"cd-alert-panel",133),e.\u0275\u0275elementEnd()),2&n){const t=e.\u0275\u0275nextContext(2);e.\u0275\u0275advance(5),e.\u0275\u0275property("disabled",t.editing),e.\u0275\u0275advance(4),e.\u0275\u0275property("ngIf",t.bucketForm.getValue("lock_enabled")),e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf",t.bucketForm.getValue("lock_enabled")),e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf",t.bucketForm.getValue("lock_enabled")),e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf",t.bucketForm.getValue("lock_enabled"))}}function ui(n,i){1&n&&(e.\u0275\u0275i18nStart(0,62,1),e.\u0275\u0275element(1,"option",120),e.\u0275\u0275i18nEnd()),2&n&&(e.\u0275\u0275advance(),e.\u0275\u0275property("ngValue",null))}function pi(n,i){1&n&&(e.\u0275\u0275i18nStart(0,62,2),e.\u0275\u0275element(1,"option",120),e.\u0275\u0275i18nEnd()),2&n&&(e.\u0275\u0275advance(),e.\u0275\u0275property("ngValue",null))}function mi(n,i){if(1&n&&(e.\u0275\u0275i18nStart(0,62,3),e.\u0275\u0275element(1,"option",122),e.\u0275\u0275i18nEnd()),2&n){const t=i.$implicit;e.\u0275\u0275advance(),e.\u0275\u0275property("value",t),e.\u0275\u0275i18nExp(t),e.\u0275\u0275i18nApply(0)}}function Ti(n,i){1&n&&(e.\u0275\u0275elementStart(0,"span",115),e.\u0275\u0275i18n(1,64),e.\u0275\u0275elementEnd())}function gi(n,i){if(1&n&&e.\u0275\u0275template(0,Ti,2,0,"span",114),2&n){e.\u0275\u0275nextContext(3);const t=e.\u0275\u0275reference(2),o=e.\u0275\u0275nextContext();e.\u0275\u0275property("ngIf",o.bucketForm.showError("kms_provider",t,"required"))}}function Ei(n,i){1&n&&(e.\u0275\u0275elementStart(0,"span",115),e.\u0275\u0275i18n(1,65),e.\u0275\u0275elementEnd())}function Ri(n,i){if(1&n&&e.\u0275\u0275template(0,Ei,2,0,"span",114),2&n){e.\u0275\u0275nextContext(3);const t=e.\u0275\u0275reference(2),o=e.\u0275\u0275nextContext();e.\u0275\u0275property("ngIf",o.bucketForm.showError("keyId",t,"required"))}}function Ci(n,i){if(1&n&&(e.\u0275\u0275elementStart(0,"div")(1,"div",84)(2,"cds-select",143),e.\u0275\u0275i18nStart(3,62),e.\u0275\u0275template(4,ui,2,1,"option",117)(5,pi,2,1,"option",117)(6,mi,2,2,"option",108),e.\u0275\u0275i18nEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275template(7,gi,1,1,"ng-template",null,14,e.\u0275\u0275templateRefExtractor),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(9,"div",84)(10,"cds-text-label",144),e.\u0275\u0275i18nStart(11,63),e.\u0275\u0275element(12,"input",145),e.\u0275\u0275i18nEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275template(13,Ri,1,1,"ng-template",null,15,e.\u0275\u0275templateRefExtractor),e.\u0275\u0275elementEnd()()),2&n){const t=e.\u0275\u0275reference(8),o=e.\u0275\u0275reference(14),_=e.\u0275\u0275nextContext(3);e.\u0275\u0275advance(2),e.\u0275\u0275property("invalidText",t)("invalid",!_.bucketForm.controls.kms_provider.valid&&_.bucketForm.controls.kms_provider.dirty),e.\u0275\u0275advance(2),e.\u0275\u0275property("ngIf",null===_.kmsProviders),e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf",null!==_.kmsProviders),e.\u0275\u0275advance(),e.\u0275\u0275property("ngForOf",_.kmsProviders),e.\u0275\u0275advance(4),e.\u0275\u0275property("invalid",!_.bucketForm.controls.keyId.valid&&_.bucketForm.controls.keyId.dirty)("invalidText",o),e.\u0275\u0275advance(2),e.\u0275\u0275property("invalid",!_.bucketForm.controls.keyId.valid&&_.bucketForm.controls.keyId.dirty)}}function fi(n,i){if(1&n&&(e.\u0275\u0275elementStart(0,"div")(1,"div",84)(2,"cds-radio-group",140)(3,"cds-radio",141),e.\u0275\u0275text(4,"SSE-S3"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(5,"cds-radio",142),e.\u0275\u0275text(6,"Connect to an external key management service"),e.\u0275\u0275elementEnd()()(),e.\u0275\u0275template(7,Ci,15,8,"div",88),e.\u0275\u0275elementEnd()),2&n){const t=e.\u0275\u0275nextContext(2);e.\u0275\u0275advance(3),e.\u0275\u0275property("disabled",!t.s3Configured),e.\u0275\u0275advance(2),e.\u0275\u0275property("disabled",!t.kmsConfigured),e.\u0275\u0275advance(2),e.\u0275\u0275property("ngIf","aws:kms"===t.bucketForm.getValue("encryption_type"))}}function Si(n,i){1&n&&(e.\u0275\u0275elementStart(0,"cd-alert-panel",148),e.\u0275\u0275i18n(1,67),e.\u0275\u0275elementEnd())}function Fi(n,i){if(1&n&&(e.\u0275\u0275elementContainerStart(0),e.\u0275\u0275elementStart(1,"cds-checkbox",146),e.\u0275\u0275i18nStart(2,66),e.\u0275\u0275element(3,"cd-help-text"),e.\u0275\u0275i18nEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275template(4,Si,2,0,"cd-alert-panel",147),e.\u0275\u0275elementContainerEnd()),2&n){const t=i.ngIf,o=e.\u0275\u0275nextContext(2);e.\u0275\u0275advance(),e.\u0275\u0275property("disabled",!t.isDefaultZg&&!t.status.available),e.\u0275\u0275advance(3),e.\u0275\u0275property("ngIf",!o.editing)}}function Mi(n,i){1&n&&e.\u0275\u0275elementContainer(0)}function Pi(n,i){if(1&n&&(e.\u0275\u0275elementStart(0,"span"),e.\u0275\u0275template(1,Mi,1,0,"ng-container",149),e.\u0275\u0275elementEnd()),2&n){const t=i.$implicit,o=i.index;e.\u0275\u0275nextContext(2);const _=e.\u0275\u0275reference(2);e.\u0275\u0275advance(),e.\u0275\u0275property("ngTemplateOutlet",_)("ngTemplateOutletContext",e.\u0275\u0275pureFunction2(2,F_,o,t))}}function Ii(n,i){1&n&&(e.\u0275\u0275elementStart(0,"span",115),e.\u0275\u0275i18n(1,68),e.\u0275\u0275elementEnd())}function Oi(n,i){if(1&n&&e.\u0275\u0275template(0,Ii,2,0,"span",114),2&n){e.\u0275\u0275nextContext();const t=e.\u0275\u0275reference(2),o=e.\u0275\u0275nextContext();e.\u0275\u0275property("ngIf",o.bucketForm.showError("bucket_policy",t,"invalidJson"))}}function Gi(n,i){1&n&&(e.\u0275\u0275elementStart(0,"span",115),e.\u0275\u0275i18n(1,72),e.\u0275\u0275elementEnd())}function Ni(n,i){1&n&&(e.\u0275\u0275elementStart(0,"span",115),e.\u0275\u0275i18n(1,73),e.\u0275\u0275elementEnd())}function Ai(n,i){if(1&n&&e.\u0275\u0275template(0,Gi,2,0,"span",114)(1,Ni,2,0,"span",114),2&n){e.\u0275\u0275nextContext(2);const t=e.\u0275\u0275reference(2),o=e.\u0275\u0275nextContext();e.\u0275\u0275property("ngIf",o.bucketForm.showError("lifecycle",t,"invalidJson")),e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf",o.bucketForm.showError("lifecycle",t,"invalidXml"))}}function hi(n,i){if(1&n){const t=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"div",84)(1,"cds-textarea-label",100),e.\u0275\u0275i18nStart(2,69),e.\u0275\u0275elementStart(3,"textarea",150,16),e.\u0275\u0275listener("change",function(){e.\u0275\u0275restoreView(t);const _=e.\u0275\u0275nextContext(2);return e.\u0275\u0275resetView(_.textAreaOnChange("lifecycle"))}),e.\u0275\u0275elementEnd(),e.\u0275\u0275element(5,"cd-help-text"),e.\u0275\u0275i18nEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275template(6,Ai,2,2,"ng-template",null,17,e.\u0275\u0275templateRefExtractor),e.\u0275\u0275elementStart(8,"div",95)(9,"div",96)(10,"cds-button-set",102)(11,"button",151),e.\u0275\u0275listener("click",function(){e.\u0275\u0275restoreView(t);const _=e.\u0275\u0275nextContext(2);return e.\u0275\u0275resetView(_.openUrl("https://docs.aws.amazon.com/cli/latest/reference/s3api/put-bucket-lifecycle.html#examples"))}),e.\u0275\u0275i18nStart(12,70),e.\u0275\u0275namespaceSVG(),e.\u0275\u0275element(13,"svg",99),e.\u0275\u0275i18nEnd(),e.\u0275\u0275elementEnd()()(),e.\u0275\u0275namespaceHTML(),e.\u0275\u0275elementStart(14,"div",96)(15,"cds-button-set",104)(16,"button",152),e.\u0275\u0275listener("click",function(){e.\u0275\u0275restoreView(t);const _=e.\u0275\u0275nextContext(2);return e.\u0275\u0275resetView(_.clearTextArea("lifecycle","{}"))}),e.\u0275\u0275i18nStart(17,71),e.\u0275\u0275namespaceSVG(),e.\u0275\u0275element(18,"svg",99),e.\u0275\u0275i18nEnd(),e.\u0275\u0275elementEnd()()()()()}if(2&n){const t=e.\u0275\u0275reference(7),o=e.\u0275\u0275nextContext(2);e.\u0275\u0275advance(),e.\u0275\u0275property("invalid",!o.bucketForm.controls.lifecycle.valid&&o.bucketForm.controls.lifecycle.dirty)("invalidText",t),e.\u0275\u0275advance(12),e.\u0275\u0275property("cdsIcon",o.icons.launch)("size",o.icons.size16),e.\u0275\u0275advance(5),e.\u0275\u0275property("cdsIcon",o.icons.destroy)("size",o.icons.size16)}}function bi(n,i){if(1&n&&(e.\u0275\u0275i18nStart(0,31,1),e.\u0275\u0275element(1,"option",122),e.\u0275\u0275i18nEnd()),2&n){const t=i.$implicit;e.\u0275\u0275advance(),e.\u0275\u0275property("value",t),e.\u0275\u0275i18nExp(t),e.\u0275\u0275i18nApply(0)}}function vi(n,i){1&n&&(e.\u0275\u0275elementStart(0,"span",115),e.\u0275\u0275i18n(1,74),e.\u0275\u0275elementEnd())}function Li(n,i){if(1&n&&e.\u0275\u0275template(0,vi,2,0,"span",114),2&n){e.\u0275\u0275nextContext();const t=e.\u0275\u0275reference(2),o=e.\u0275\u0275nextContext();e.\u0275\u0275property("ngIf",o.bucketForm.showError("grantee",t,"required"))}}function yi(n,i){if(1&n&&(e.\u0275\u0275elementStart(0,"option",122),e.\u0275\u0275i18n(1,75),e.\u0275\u0275elementEnd()),2&n){const t=i.$implicit;e.\u0275\u0275property("value",t),e.\u0275\u0275advance(),e.\u0275\u0275i18nExp(t),e.\u0275\u0275i18nApply(1)}}function $i(n,i){1&n&&(e.\u0275\u0275elementStart(0,"span",115),e.\u0275\u0275i18n(1,76),e.\u0275\u0275elementEnd())}function Di(n,i){if(1&n&&e.\u0275\u0275template(0,$i,2,0,"span",114),2&n){e.\u0275\u0275nextContext();const t=e.\u0275\u0275reference(2),o=e.\u0275\u0275nextContext();e.\u0275\u0275property("ngIf",o.bucketForm.showError("aclPermission",t,"required"))}}function Wi(n,i){1&n&&(e.\u0275\u0275i18nStart(0,77,1),e.\u0275\u0275element(1,"option",120),e.\u0275\u0275i18nEnd()),2&n&&(e.\u0275\u0275advance(),e.\u0275\u0275property("ngValue",null))}function xi(n,i){1&n&&(e.\u0275\u0275i18nStart(0,77,2),e.\u0275\u0275element(1,"option",120),e.\u0275\u0275i18nEnd()),2&n&&(e.\u0275\u0275advance(),e.\u0275\u0275property("ngValue",null))}function wi(n,i){if(1&n&&(e.\u0275\u0275i18nStart(0,77,3),e.\u0275\u0275element(1,"option",122),e.\u0275\u0275i18nEnd()),2&n){const t=i.$implicit;e.\u0275\u0275advance(),e.\u0275\u0275property("value",t.name),e.\u0275\u0275i18nExp(t.description),e.\u0275\u0275i18nApply(0)}}function Ui(n,i){if(1&n&&(e.\u0275\u0275elementStart(0,"div",84)(1,"cds-select",153),e.\u0275\u0275i18nStart(2,77),e.\u0275\u0275template(3,Wi,2,1,"option",117)(4,xi,2,1,"option",117)(5,wi,2,2,"option",108),e.\u0275\u0275i18nEnd(),e.\u0275\u0275elementEnd()()),2&n){const t=e.\u0275\u0275nextContext(2);e.\u0275\u0275advance(3),e.\u0275\u0275property("ngIf",null===t.placementTargets),e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf",null!==t.placementTargets),e.\u0275\u0275advance(),e.\u0275\u0275property("ngForOf",t.placementTargets)}}function ki(n,i){if(1&n){const t=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"div",80)(1,"form",81,2)(3,"div",82),e.\u0275\u0275i18n(4,18),e.\u0275\u0275pipe(5,"titlecase"),e.\u0275\u0275pipe(6,"upperFirst"),e.\u0275\u0275elementEnd(),e.\u0275\u0275template(7,M_,4,0,"div",83),e.\u0275\u0275elementStart(8,"div",84)(9,"cds-text-label",85),e.\u0275\u0275i18nStart(10,19),e.\u0275\u0275element(11,"input",86),e.\u0275\u0275i18nEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275template(12,v_,8,8,"ng-template",null,3,e.\u0275\u0275templateRefExtractor),e.\u0275\u0275elementEnd(),e.\u0275\u0275template(14,L_,2,0,"cds-checkbox",87)(15,U_,9,6,"div",84)(16,V_,8,5,"div",84)(17,Z_,8,0,"fieldset",88)(18,ei,8,2,"fieldset",88)(19,di,13,5,"fieldset",88),e.\u0275\u0275elementStart(20,"fieldset")(21,"div",84)(22,"legend",89),e.\u0275\u0275i18n(23,20),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(24,"cds-checkbox",90),e.\u0275\u0275i18nStart(25,21),e.\u0275\u0275elementStart(26,"cd-help-text",91)(27,"span"),e.\u0275\u0275element(28,"a",92),e.\u0275\u0275elementEnd()(),e.\u0275\u0275i18nEnd(),e.\u0275\u0275elementEnd()(),e.\u0275\u0275template(29,fi,8,3,"div",88),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(30,"fieldset")(31,"div",84)(32,"legend",89),e.\u0275\u0275i18n(33,22),e.\u0275\u0275elementEnd(),e.\u0275\u0275template(34,Fi,5,2,"ng-container",93),e.\u0275\u0275pipe(35,"async"),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(36,"fieldset")(37,"legend",89),e.\u0275\u0275i18nStart(38,23),e.\u0275\u0275element(39,"cd-help-text"),e.\u0275\u0275i18nEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275template(40,Pi,2,5,"span",94),e.\u0275\u0275elementStart(41,"div",95)(42,"div",96)(43,"cds-tooltip",97)(44,"button",98),e.\u0275\u0275listener("click",function(){e.\u0275\u0275restoreView(t);const _=e.\u0275\u0275nextContext();return e.\u0275\u0275resetView(_.showTagModal())}),e.\u0275\u0275elementContainerStart(45),e.\u0275\u0275i18n(46,24),e.\u0275\u0275elementContainerEnd(),e.\u0275\u0275namespaceSVG(),e.\u0275\u0275element(47,"svg",99),e.\u0275\u0275elementEnd()()()()(),e.\u0275\u0275namespaceHTML(),e.\u0275\u0275elementStart(48,"fieldset")(49,"div",84)(50,"legend",89),e.\u0275\u0275i18n(51,25),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(52,"cds-textarea-label",100),e.\u0275\u0275i18nStart(53,26),e.\u0275\u0275elementStart(54,"textarea",101,4),e.\u0275\u0275listener("change",function(){e.\u0275\u0275restoreView(t);const _=e.\u0275\u0275nextContext();return e.\u0275\u0275resetView(_.textAreaOnChange("bucket_policy"))}),e.\u0275\u0275elementEnd(),e.\u0275\u0275i18nEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275template(56,Oi,1,1,"ng-template",null,5,e.\u0275\u0275templateRefExtractor),e.\u0275\u0275elementStart(58,"div",95)(59,"div",96)(60,"cds-button-set",102)(61,"button",103),e.\u0275\u0275listener("click",function(){e.\u0275\u0275restoreView(t);const _=e.\u0275\u0275nextContext();return e.\u0275\u0275resetView(_.openUrl("https://docs.aws.amazon.com/AmazonS3/latest/userguide/example-bucket-policies.html?icmpid=docs_amazons3_console"))}),e.\u0275\u0275i18nStart(62,27),e.\u0275\u0275namespaceSVG(),e.\u0275\u0275element(63,"svg",99),e.\u0275\u0275i18nEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275namespaceHTML(),e.\u0275\u0275elementStart(64,"button",103),e.\u0275\u0275listener("click",function(){e.\u0275\u0275restoreView(t);const _=e.\u0275\u0275nextContext();return e.\u0275\u0275resetView(_.openUrl("https://awspolicygen.s3.amazonaws.com/policygen.html"))}),e.\u0275\u0275i18nStart(65,28),e.\u0275\u0275namespaceSVG(),e.\u0275\u0275element(66,"svg",99),e.\u0275\u0275i18nEnd(),e.\u0275\u0275elementEnd()()(),e.\u0275\u0275namespaceHTML(),e.\u0275\u0275elementStart(67,"div",96)(68,"cds-button-set",104)(69,"button",105),e.\u0275\u0275listener("click",function(){e.\u0275\u0275restoreView(t);const _=e.\u0275\u0275nextContext();return e.\u0275\u0275resetView(_.clearTextArea("bucket_policy","{}"))}),e.\u0275\u0275i18nStart(70,29),e.\u0275\u0275namespaceSVG(),e.\u0275\u0275element(71,"svg",99),e.\u0275\u0275i18nEnd(),e.\u0275\u0275elementEnd()()()()(),e.\u0275\u0275template(72,hi,19,6,"div",83),e.\u0275\u0275namespaceHTML(),e.\u0275\u0275elementStart(73,"div",84)(74,"cds-text-label"),e.\u0275\u0275i18nStart(75,30),e.\u0275\u0275element(76,"cd-help-text"),e.\u0275\u0275i18nEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(77,"div",106)(78,"div",96)(79,"cds-select",107),e.\u0275\u0275listener("valueChange",function(){e.\u0275\u0275restoreView(t);const _=e.\u0275\u0275nextContext();return e.\u0275\u0275resetView(_.onSelectionFilter())}),e.\u0275\u0275i18nStart(80,31),e.\u0275\u0275template(81,bi,2,2,"option",108),e.\u0275\u0275i18nEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275template(82,Li,1,1,"ng-template",null,6,e.\u0275\u0275templateRefExtractor),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(84,"div",96)(85,"cds-select",109),e.\u0275\u0275template(86,yi,2,2,"option",108),e.\u0275\u0275elementEnd(),e.\u0275\u0275template(87,Di,1,1,"ng-template",null,7,e.\u0275\u0275templateRefExtractor),e.\u0275\u0275elementEnd()()()(),e.\u0275\u0275elementStart(89,"cd-form-advanced-fieldset"),e.\u0275\u0275template(90,Ui,6,3,"div",83),e.\u0275\u0275elementStart(91,"cd-rgw-rate-limit",110),e.\u0275\u0275listener("rateLimitFormGroup",function(_){e.\u0275\u0275restoreView(t);const a=e.\u0275\u0275nextContext();return e.\u0275\u0275resetView(a.rateLimitFormInit(_))}),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(92,"cd-form-button-panel",111),e.\u0275\u0275pipe(93,"titlecase"),e.\u0275\u0275pipe(94,"upperFirst"),e.\u0275\u0275listener("submitActionEvent",function(){e.\u0275\u0275restoreView(t);const _=e.\u0275\u0275nextContext();return e.\u0275\u0275resetView(_.submit())}),e.\u0275\u0275elementEnd()()()}if(2&n){const t=e.\u0275\u0275reference(13),o=e.\u0275\u0275reference(57),_=e.\u0275\u0275reference(83),a=e.\u0275\u0275reference(88),r=e.\u0275\u0275nextContext(),s=e.\u0275\u0275reference(4);e.\u0275\u0275property("columnNumbers",e.\u0275\u0275pureFunction0(57,f_)),e.\u0275\u0275advance(),e.\u0275\u0275property("formGroup",r.bucketForm),e.\u0275\u0275advance(5),e.\u0275\u0275i18nExp(e.\u0275\u0275pipeBind1(5,47,r.action))(e.\u0275\u0275pipeBind1(6,49,r.resource)),e.\u0275\u0275i18nApply(4),e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf",r.editing),e.\u0275\u0275advance(2),e.\u0275\u0275property("invalid",!r.bucketForm.controls.bid.valid&&r.bucketForm.controls.bid.dirty)("invalidText",t),e.\u0275\u0275advance(2),e.\u0275\u0275property("readonly",r.editing)("autofocus",!r.editing)("invalid",!r.bucketForm.controls.bid.valid&&r.bucketForm.controls.bid.dirty),e.\u0275\u0275advance(3),e.\u0275\u0275conditional(r.accounts.length&&r.accountUsers.length>0?14:-1),e.\u0275\u0275advance(),e.\u0275\u0275conditional(r.bucketForm.get("isAccountOwner").value?15:16),e.\u0275\u0275advance(2),e.\u0275\u0275property("ngIf",r.editing),e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf",r.editing),e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf",!r.editing||r.editing&&r.bucketForm.getValue("lock_enabled")),e.\u0275\u0275advance(5),e.\u0275\u0275property("disabled",!r.kmsConfigured&&!r.s3Configured),e.\u0275\u0275advance(5),e.\u0275\u0275property("ngIf",r.bucketForm.getValue("encryption_enabled")),e.\u0275\u0275advance(5),e.\u0275\u0275property("ngIf",e.\u0275\u0275pureFunction2(58,S_,r.multisiteStatus$,e.\u0275\u0275pipeBind1(35,51,r.isDefaultZoneGroup$)))("ngIfElse",s),e.\u0275\u0275advance(6),e.\u0275\u0275property("ngForOf",r.tags),e.\u0275\u0275advance(3),e.\u0275\u0275property("description",r.tags.length>19?"Maximum of 20 tags reached":"")("highContrast",!0)("caret",!0),e.\u0275\u0275advance(),e.\u0275\u0275property("disabled",r.tags.length>19),e.\u0275\u0275advance(3),e.\u0275\u0275property("cdsIcon",r.icons.add)("size",r.icons.size16),e.\u0275\u0275advance(5),e.\u0275\u0275property("invalid",!r.bucketForm.controls.bucket_policy.valid&&r.bucketForm.controls.bucket_policy.dirty)("invalidText",o),e.\u0275\u0275advance(11),e.\u0275\u0275property("cdsIcon",r.icons.launch)("size",r.icons.size16),e.\u0275\u0275advance(3),e.\u0275\u0275property("cdsIcon",r.icons.launch)("size",r.icons.size16),e.\u0275\u0275advance(5),e.\u0275\u0275property("cdsIcon",r.icons.destroy)("size",r.icons.size16),e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf",r.editing),e.\u0275\u0275advance(7),e.\u0275\u0275property("invalid",!r.bucketForm.controls.grantee.valid&&r.bucketForm.controls.grantee.dirty)("invalidText",_),e.\u0275\u0275advance(2),e.\u0275\u0275property("ngForOf",r.grantees),e.\u0275\u0275advance(4),e.\u0275\u0275property("invalid",!r.bucketForm.controls.aclPermission.valid&&r.bucketForm.controls.aclPermission.dirty)("invalidText",a),e.\u0275\u0275advance(),e.\u0275\u0275property("ngForOf",r.aclPermissions),e.\u0275\u0275advance(4),e.\u0275\u0275property("ngIf",!r.editing),e.\u0275\u0275advance(),e.\u0275\u0275property("type","bucket")("isEditing",r.editing)("allowBid",r.bucketForm.getValue("bid")),e.\u0275\u0275advance(),e.\u0275\u0275property("form",r.bucketForm)("submitText",e.\u0275\u0275pipeBind1(93,53,r.action)+" "+e.\u0275\u0275pipeBind1(94,55,r.resource))}}function zi(n,i){if(1&n&&(e.\u0275\u0275elementContainerStart(0),e.\u0275\u0275element(1,"input",158),e.\u0275\u0275elementContainerEnd()),2&n){const t=i.$implicit,o=e.\u0275\u0275nextContext(),_=o.tag,a=o.index;e.\u0275\u0275advance(),e.\u0275\u0275propertyInterpolate2("id","tag-",t.attribute,"-",a,""),e.\u0275\u0275property("ngbTooltip",t.attribute)("value",_[t.attribute])}}function Hi(n,i){if(1&n){const t=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"div",154),e.\u0275\u0275template(1,zi,2,5,"ng-container",94),e.\u0275\u0275elementStart(2,"cds-icon-button",155),e.\u0275\u0275listener("click",function(){const _=e.\u0275\u0275restoreView(t).index,a=e.\u0275\u0275nextContext();return e.\u0275\u0275resetView(a.showTagModal(_))}),e.\u0275\u0275namespaceSVG(),e.\u0275\u0275element(3,"svg",156),e.\u0275\u0275elementEnd(),e.\u0275\u0275namespaceHTML(),e.\u0275\u0275elementStart(4,"cds-icon-button",157),e.\u0275\u0275listener("click",function(){const _=e.\u0275\u0275restoreView(t).index,a=e.\u0275\u0275nextContext();return e.\u0275\u0275resetView(a.deleteTag(_))}),e.\u0275\u0275namespaceSVG(),e.\u0275\u0275element(5,"svg",156),e.\u0275\u0275elementEnd()()}if(2&n){const t=e.\u0275\u0275nextContext();e.\u0275\u0275advance(),e.\u0275\u0275property("ngForOf",t.tagConfig),e.\u0275\u0275advance(2),e.\u0275\u0275property("cdsIcon",t.icons.edit)("size",t.icons.size16),e.\u0275\u0275advance(2),e.\u0275\u0275property("cdsIcon",t.icons.trash)("size",t.icons.size16)}}function Xi(n,i){1&n&&(e.\u0275\u0275elementStart(0,"cd-loading-panel"),e.\u0275\u0275i18n(1,78),e.\u0275\u0275elementEnd())}let Pn=(()=>{class n extends tt.g{get isVersioningEnabled(){return this.bucketForm.getValue("versioning")}get isMfaDeleteEnabled(){return this.bucketForm.getValue("mfa-delete")}constructor(t,o,_,a,r,s,c,u,p,T,f,G,S,O,C){super(),this.route=t,this.router=o,this.formBuilder=_,this.rgwBucketService=a,this.rgwSiteService=r,this.modalService=s,this.rgwUserService=c,this.notificationService=u,this.textAreaJsonFormatterService=p,this.textAreaXmlFormatterService=T,this.actionLabels=f,this.changeDetectorRef=G,this.rgwMultisiteService=S,this.rgwDaemonService=O,this.rgwAccountsService=C,this.editing=!1,this.owners=null,this.accounts=[],this.accountUsers=[],this.kmsProviders=null,this.placementTargets=[],this.isVersioningAlreadyEnabled=!1,this.isMfaDeleteAlreadyEnabled=!1,this.icons=y.FI,this.kmsConfigured=!1,this.s3Configured=!1,this.tags=[],this.dirtyTags=!1,this.tagConfig=[{attribute:"key"},{attribute:"value"}],this.grantees=[Ae.Owner,Ae.Everyone,Ae.AuthenticatedUsers],this.aclPermissions=[Fe.FullControl],this.editing=this.router.url.startsWith(`/rgw/bucket/${P.Qp.EDIT}`),this.action=this.editing?this.actionLabels.EDIT:this.actionLabels.CREATE,this.resource="bucket",this.createForm()}ngAfterViewChecked(){this.changeDetectorRef.detectChanges(),this.textAreaOnChange(this.bucketPolicyTextArea),this.textAreaOnChange(this.lifecycleTextArea)}createForm(){const t=this,o=M.xQ.custom("lockDays",()=>{if(!t.bucketForm||!A().get(t.bucketForm.getRawValue(),"lock_enabled"))return!1;const _=Number(t.bucketForm.getValue("lock_retention_period_days"));return!Number.isInteger(_)||0===_});this.bucketForm=this.formBuilder.group({id:[null],bid:[null,[l.Validators.required],this.editing?[]:[M.xQ.bucketName(),M.xQ.bucketExistence(!1,this.rgwBucketService)]],owner:[null,[M.xQ.requiredIf({isAccountOwner:!1})]],kms_provider:["vault"],"placement-target":[null],versioning:[null],"mfa-delete":[null],"mfa-token-serial":[""],"mfa-token-pin":[""],lock_enabled:[{value:!1,disabled:this.editing}],encryption_enabled:[null],encryption_type:[null,[M.xQ.requiredIf({encryption_enabled:!0})]],keyId:[null,[M.xQ.requiredIf({encryption_type:"aws:kms",encryption_enabled:!0})]],lock_mode:["COMPLIANCE"],lock_retention_period_days:[10,[M.xQ.number(!1),o]],bucket_policy:["{}",M.xQ.json()],lifecycle:["{}",M.xQ.jsonOrXml()],grantee:[Ae.Owner,[l.Validators.required]],aclPermission:[[Fe.FullControl],[l.Validators.required]],replication:[!1],isAccountOwner:[!1],accountUser:[null,[M.xQ.requiredIf({isAccountOwner:!0})]]})}ngOnInit(){const t={owners:this.rgwUserService.enumerate(!0),accounts:this.rgwAccountsService.list()};this.multisiteStatus$=this.rgwMultisiteService.status(),this.isDefaultZoneGroup$=this.rgwDaemonService.selectedDaemon$.pipe((0,K.switchMap)(o=>this.rgwSiteService.get("default-zonegroup").pipe((0,K.map)(_=>o.zonegroup_id===_)))),this.kmsProviders=Ut.kmsProviders,this.rgwBucketService.getEncryptionConfig().subscribe(o=>{this.s3Configured=o.s3&&Object.keys(o.s3).length>0,this.kmsConfigured=o.kms&&Object.keys(o.kms).length>0,this.kmsConfigured&&this.s3Configured?this.bucketForm.get("encryption_type").setValue(""):this.kmsConfigured?this.bucketForm.get("encryption_type").setValue("aws:kms"):this.s3Configured?this.bucketForm.get("encryption_type").setValue("AES256"):this.bucketForm.get("encryption_type").setValue("")}),this.editing||(t.getPlacementTargets=this.rgwSiteService.get("placement-targets")),this.route.params.subscribe(o=>{let _="";if(o.hasOwnProperty("owner")&&(_=decodeURIComponent(o.owner)),o.hasOwnProperty("bid")){const a=decodeURIComponent(o.bid);t.getBid=this.rgwBucketService.get(a)}(0,U.forkJoin)(t).subscribe(a=>{if(this.accounts=a.accounts,this.accountUsers=a.owners.filter(r=>r.account_id),this.owners=a.owners.filter(r=>!r.account_id),a.getPlacementTargets){const r=a.getPlacementTargets;this.zonegroup=r.zonegroup,A().forEach(r.placement_targets,s=>{s.description=`${s.name} (${"pool"}: ${s.data_pool})`,this.placementTargets.push(s)}),1===this.placementTargets.length&&this.bucketForm.get("placement-target").setValue(this.placementTargets[0].name)}if(a.getBid){const r=a.getBid,s=A().clone(this.bucketForm.getRawValue());let c=A().pick(r,A().keys(s));if(c.lock_retention_period_days=this.rgwBucketService.getLockDays(r),c["placement-target"]=r.placement_rule,c.versioning=r.versioning===zt.ENABLED,c["mfa-delete"]=r.mfa_delete===kt.ENABLED,c.encryption_enabled="Enabled"===r.encryption,r.tagset)for(const[u,p]of Object.entries(r.tagset))this.tags.push({key:u,value:p.toString()});if(c=A().merge(s,c),this.editing&&([c.grantee,c.aclPermission]=this.aclXmlToFormValues(r.acl,r.owner),c.lifecycle=JSON.stringify(r.lifecycle||{})),this.bucketForm.setValue(c),this.editing){const u=a.owners.map(p=>p.uid);if(!u.includes(c.owner)){const p=Object.assign({uid:_},u.find(T=>T.uid===P.D5.defaultUser));this.accountUsers.push(p),this.bucketForm.get("isAccountOwner").setValue(!0),this.bucketForm.get("isAccountOwner").disable(),this.bucketForm.get("accountUser").setValue(_),this.bucketForm.get("accountUser").disable()}this.isVersioningAlreadyEnabled=this.isVersioningEnabled,this.isMfaDeleteAlreadyEnabled=this.isMfaDeleteEnabled,this.setMfaDeleteValidators(),c.lock_enabled&&this.bucketForm.controls.versioning.disable(),c.bucket_policy&&this.bucketForm.get("bucket_policy").setValue(JSON.stringify(c.bucket_policy,null,2)),c.replication&&("Enabled"===c.replication?.Rule?.Status?this.bucketForm.get("replication").setValue(!0):this.bucketForm.get("replication").setValue(!1)),this.filterAclPermissions()}}this.loadingReady()})})}goToListView(){this.router.navigate(["/rgw/bucket"])}rateLimitFormInit(t){this.bucketForm.addControl("rateLimit",t)}submit(){if(this.bucketForm.pristine&&this.rateLimitComponent.form.pristine)return void this.goToListView();if(this.bucketForm.pending)return void this.bucketForm.setErrors({cdSubmitButton:!0});null==this.bucketForm.getValue("encryption_enabled")&&(this.bucketForm.get("encryption_enabled").setValue(!1),this.bucketForm.get("encryption_type").setValue(null));const t=this.bucketForm.value,o=this.tagsToXML(this.tags),_=this.getBucketPolicy(),a=this.permissionToCannedAcl();if(this.editing){const r=this.getVersioningStatus(),s=this.getMfaDeleteStatus();let c;c=this.bucketForm.get("accountUser").disabled?"":t.isAccountOwner?this.accountUsers.filter(p=>t.accountUser===p.uid)[0]?.account_id??t.owner:t.owner,this.rgwBucketService.update(t.bid,t.id,c,r,t.encryption_enabled,t.encryption_type,t.keyId,s,t["mfa-token-serial"],t["mfa-token-pin"],t.lock_mode,t.lock_retention_period_days,o,_,a,t.replication,t.lifecycle).subscribe(()=>{this.notificationService.show(w._.success,"Updated Object Gateway bucket '" + t.bid + "'."),this.updateBucketRateLimit(),this.goToListView()},()=>{this.bucketForm.setErrors({cdSubmitButton:!0})})}else this.rgwBucketService.create(t.bid,t.isAccountOwner?t.accountUser:t.owner,this.zonegroup,t["placement-target"],t.lock_enabled,t.lock_mode,t.lock_retention_period_days,t.encryption_enabled,t.encryption_type,t.keyId,o,_,a,t.replication).subscribe(()=>{this.notificationService.show(w._.success,"Created Object Gateway bucket '" + t.bid + "'"),this.goToListView(),this.updateBucketRateLimit()},()=>{this.bucketForm.setErrors({cdSubmitButton:!0})})}updateBucketRateLimit(){const t=this.bucketForm.getValue("owner")||"",o=this.bucketForm.getValue("bid");let _;const a=t.includes("$"),r=o.includes("/");_=r&&a?o:a?`${t.split("$")[0]}/${o}`:r?o.split("/")[1]:o;const s=this.rateLimitComponent.getRateLimitFormValue();s&&this.rgwBucketService.updateBucketRateLimit(_,s).subscribe(()=>{},c=>{this.notificationService.show(w._.error,c)})}areMfaCredentialsRequired(){return this.isMfaDeleteEnabled!==this.isMfaDeleteAlreadyEnabled||this.isMfaDeleteAlreadyEnabled&&this.isVersioningEnabled!==this.isVersioningAlreadyEnabled}setMfaDeleteValidators(){const t=this.bucketForm.get("mfa-token-serial"),o=this.bucketForm.get("mfa-token-pin");this.areMfaCredentialsRequired()?(t.setValidators(l.Validators.required),o.setValidators(l.Validators.required)):(t.setValidators(null),o.setValidators(null)),t.updateValueAndValidity(),o.updateValueAndValidity()}getVersioningStatus(){return this.isVersioningEnabled?zt.ENABLED:zt.SUSPENDED}getMfaDeleteStatus(){return this.isMfaDeleteEnabled?kt.ENABLED:kt.DISABLED}getBucketPolicy(){return this.bucketForm.getValue("bucket_policy")||"{}"}fileUpload(t,o){const _=t[0];(new FileReader).addEventListener("load",()=>{const r=this.bucketForm.get(o);r.setValue(_),r.markAsDirty(),r.markAsTouched(),r.updateValueAndValidity()})}textAreaOnChange(t){t?.nativeElement?.value?.startsWith?.("<")?this.textAreaXmlFormatterService.format(t):this.textAreaJsonFormatterService.format(t)}openUrl(t){window.open(t,"_blank")}clearTextArea(t,o=""){this.bucketForm.get(t).setValue(o),this.bucketForm.markAsDirty(),this.bucketForm.updateValueAndValidity()}showTagModal(t){const _=this.modalService.show(Uo);_.currentKeyTags=this.tags.map(a=>a.key),A().isNumber(t)&&(_.editMode=!0,_.fillForm(this.tags[t]),_.storedKey=this.tags[t].key),_.submitAction.subscribe(a=>{this.setTag(a,t)})}deleteTag(t){this.tags.splice(t,1),this.dirtyTags=!0,this.bucketForm.markAsDirty(),this.bucketForm.updateValueAndValidity()}setTag(t,o){A().isNumber(o)?this.tags[o]=t:this.tags.push(t),this.dirtyTags=!0,this.bucketForm.markAsDirty(),this.bucketForm.updateValueAndValidity()}tagsToXML(t){if(!this.dirtyTags&&0===t.length)return"";let o="<Tagging><TagSet>";for(const _ of t){o+="<Tag>";for(const a in _)"key"===a?o+=`<Key>${_[a]}</Key>`:"value"===a&&(o+=`<Value>${_[a]}</Value>`);o+="</Tag>"}return o+="</TagSet></Tagging>",o}aclXmlToFormValues(t,o){const _=new Sn.Parser({explicitArray:!1,trim:!0});let a=Fe.FullControl,r=Ae.Owner;return _.parseString(t,(s,c)=>{if(s)return null;const u=c.AccessControlPolicy.AccessControlList.Grant;for(let p=0;p<u.length;p++)u[p].Grantee.ID!==o&&(u[p].Grantee.URI&&u[p].Grantee.URI.includes("AllUsers")?(r=Ae.Everyone,a="READ"===u[p].Permission&&a!==Fe.Write?Fe.Read:" WRITE"===u[p].Permission&&a!==Fe.Read?Fe.Write:Fe.All):u[p].Grantee.URI&&u[p].Grantee.URI.includes("AuthenticatedUsers")&&(r=Ae.AuthenticatedUsers,a=Fe.Read))}),[r,a]}onSelectionFilter(){this.filterAclPermissions(),this.bucketForm.get("aclPermission").setValue(this.aclPermissions[0])}filterAclPermissions(){switch(this.bucketForm.get("grantee").value){case Ae.Owner:this.aclPermissions=[Fe.FullControl];break;case Ae.Everyone:this.aclPermissions=[Fe.Read,Fe.All];break;case Ae.AuthenticatedUsers:this.aclPermissions=[Fe.Read]}}permissionToCannedAcl(){const t=this.bucketForm.get("grantee").value,o=this.bucketForm.get("aclPermission").value;switch(t){case Ae.Everyone:return o===Fe.Read?"public-read":"public-read-write";case Ae.AuthenticatedUsers:return"authenticated-read";default:return"private"}}static{this.\u0275fac=function(o){return new(o||n)(e.\u0275\u0275directiveInject(Q.ActivatedRoute),e.\u0275\u0275directiveInject(Q.Router),e.\u0275\u0275directiveInject(Ge.$),e.\u0275\u0275directiveInject(Le.c),e.\u0275\u0275directiveInject(Fn.B),e.\u0275\u0275directiveInject(he.V),e.\u0275\u0275directiveInject(Rt.p),e.\u0275\u0275directiveInject(ne.J),e.\u0275\u0275directiveInject(Mn.C),e.\u0275\u0275directiveInject(ko),e.\u0275\u0275directiveInject(P.Ss),e.\u0275\u0275directiveInject(e.ChangeDetectorRef),e.\u0275\u0275directiveInject(xe.A),e.\u0275\u0275directiveInject($e.y),e.\u0275\u0275directiveInject(ht))}}static{this.\u0275cmp=e.\u0275\u0275defineComponent({type:n,selectors:[["cd-rgw-bucket-form"]],viewQuery:function(o,_){if(1&o&&(e.\u0275\u0275viewQuery(R_,5),e.\u0275\u0275viewQuery(C_,5),e.\u0275\u0275viewQuery(Ht,5)),2&o){let a;e.\u0275\u0275queryRefresh(a=e.\u0275\u0275loadQuery())&&(_.bucketPolicyTextArea=a.first),e.\u0275\u0275queryRefresh(a=e.\u0275\u0275loadQuery())&&(_.lifecycleTextArea=a.first),e.\u0275\u0275queryRefresh(a=e.\u0275\u0275loadQuery())&&(_.rateLimitComponent=a.first)}},features:[e.\u0275\u0275InheritDefinitionFeature],decls:5,vars:1,consts:()=>{let t,o,_,a,r,s,c,u,p,T,f,G,S,O,C,b,N,k,z,$,X,B,V,Z,F,I,te,J,j,ee,D,ie,W,x,de,ue,pe,me,Te,ge,Ee,le,Re,Ce,fe,Se,R,Ze,ve,Ke,qe,L,it,at,rt,lt,st,ct,dt,ut,pt,mt,Tt,gt,Ye,Et;return t="Name...",o="" + "\ufffd0\ufffd" + " " + "\ufffd1\ufffd" + "",_="Name " + "\ufffd#11\ufffd\ufffd/#11\ufffd" + "",a="Encryption",r="Enable " + "\ufffd#26\ufffd" + "" + "\ufffd#27\ufffd" + "Enables encryption for the objects in the bucket. To enable encryption on a bucket you need to set the configuration values for SSE-S3 or SSE-KMS. To set the configuration values " + "\ufffd#28\ufffd" + "Click here" + "\ufffd/#28\ufffd" + "" + "\ufffd/#27\ufffd" + "" + "\ufffd/#26\ufffd" + "",s="Replication",c="Tags " + "\ufffd#39\ufffd" + "Tagging provides a way to categorize storage" + "\ufffd/#39\ufffd" + "",u="Add tag",p="Policies ",T="Bucket Policy " + "\ufffd#54\ufffd" + "" + "\ufffd/#54\ufffd" + "",f="Policy examples " + "\ufffd#63\ufffd" + "" + "\ufffd/#63\ufffd" + "",G="Policy generator " + "\ufffd#66\ufffd" + "" + "\ufffd/#66\ufffd" + "",S="Clear " + "\ufffd#71\ufffd" + "" + "\ufffd/#71\ufffd" + "",O="ACL " + "\ufffd#76\ufffd" + "Any changes to the ACL will overwrite previous one. You can choose any of the available options to modify the spcified user group." + "\ufffd/#76\ufffd" + "",C="Grantee " + "\ufffd*81:1\ufffd\ufffd#1:1\ufffd" + "" + "\ufffd0:1\ufffd" + "" + "\ufffd/#1:1\ufffd\ufffd/*81:1\ufffd" + "",b="Id " + "\ufffd#3\ufffd\ufffd/#3\ufffd" + "",N="This field is required.",k="Bucket names can only contain lowercase letters, numbers, periods and hyphens.",z="The chosen name is already in use.",$="Bucket names must not contain uppercase characters or underscores.",X="Each label must start and end with a lowercase letter or a number.",B="Bucket names cannot be formatted as IP address.",V="Bucket labels cannot be empty and can only contain lowercase letters, numbers and hyphens.",Z="Bucket names must be 3 to 63 characters long.",F="Select account user ",I="Account user " + "\ufffd*3:1\ufffd\ufffd#1:1\ufffd" + "Loading..." + "[\ufffd/#1:1\ufffd\ufffd/*3:1\ufffd|\ufffd/#1:2\ufffd\ufffd/*4:2\ufffd|\ufffd/#1:3\ufffd\ufffd/*5:3\ufffd]" + "" + "\ufffd*4:2\ufffd\ufffd#1:2\ufffd" + "-- Select a user --" + "[\ufffd/#1:1\ufffd\ufffd/*3:1\ufffd|\ufffd/#1:2\ufffd\ufffd/*4:2\ufffd|\ufffd/#1:3\ufffd\ufffd/*5:3\ufffd]" + "" + "\ufffd*5:3\ufffd\ufffd#1:3\ufffd" + "" + "\ufffd0:3\ufffd" + "" + "[\ufffd/#1:1\ufffd\ufffd/*3:1\ufffd|\ufffd/#1:2\ufffd\ufffd/*4:2\ufffd|\ufffd/#1:3\ufffd\ufffd/*5:3\ufffd]" + "",I=e.\u0275\u0275i18nPostprocess(I),te="This field is required.",J=" The bucket is owned by an account. UI does not support changing the ownership of bucket owned by an account. ",j="Owner " + "\ufffd*3:1\ufffd\ufffd#1:1\ufffd" + "Loading..." + "[\ufffd/#1:1\ufffd\ufffd/*3:1\ufffd|\ufffd/#1:2\ufffd\ufffd/*4:2\ufffd|\ufffd/#1:3\ufffd\ufffd/*5:3\ufffd]" + "" + "\ufffd*4:2\ufffd\ufffd#1:2\ufffd" + "-- Select a user --" + "[\ufffd/#1:1\ufffd\ufffd/*3:1\ufffd|\ufffd/#1:2\ufffd\ufffd/*4:2\ufffd|\ufffd/#1:3\ufffd\ufffd/*5:3\ufffd]" + "" + "\ufffd*5:3\ufffd\ufffd#1:3\ufffd" + "" + "\ufffd0:3\ufffd" + "" + "[\ufffd/#1:1\ufffd\ufffd/*3:1\ufffd|\ufffd/#1:2\ufffd\ufffd/*4:2\ufffd|\ufffd/#1:3\ufffd\ufffd/*5:3\ufffd]" + "",j=e.\u0275\u0275i18nPostprocess(j),ee="This field is required.",D="Versioning",ie="Enabled " + "\ufffd#6\ufffd" + "" + "\ufffd#7\ufffd" + "Enables versioning for the objects in the bucket." + "\ufffd/#7\ufffd" + "" + "\ufffd/#6\ufffd" + "",W="Enables MFA (multi-factor authentication) Delete, which requires additional authentication for changing the bucket versioning state.",x="Multi-Factor Authentication",de="Delete enabled ",ue="Token Serial Number " + "\ufffd#3\ufffd\ufffd/#3\ufffd" + "",pe="This field is required.",me="Token PIN " + "\ufffd#3\ufffd\ufffd/#3\ufffd" + "",Te="This field is required.",ge=" Object Locking " + "\ufffd#4\ufffd" + " Store objects using a write-once-read-many (WORM) model to prevent objects from being deleted or overwritten for a fixed amount of time or indefinitely. Object Locking works only in versioned buckets. " + "\ufffd/#4\ufffd" + "",Ee="Enable " + "\ufffd#7\ufffd" + "" + "\ufffd#8\ufffd" + "Enables locking for the objects in the bucket. Locking can only be enabled while creating a bucket." + "\ufffd/#8\ufffd" + "" + "\ufffd/#7\ufffd" + "",le="" + "\ufffd#3\ufffd" + "Compliance" + "[\ufffd/#3\ufffd|\ufffd/#4\ufffd]" + "" + "\ufffd#4\ufffd" + "Governance" + "[\ufffd/#3\ufffd|\ufffd/#4\ufffd]" + "",le=e.\u0275\u0275i18nPostprocess(le),Re=" In COMPLIANCE an object version cannot be overwritten or deleted for the duration of the period. ",Ce=" In GOVERNANCE mode, users cannot overwrite or delete an object version or alter its lock settings unless they have special permissions. ",fe="Retention period (days)",Se="The number of days that you want to specify for the default retention period that will be applied to new objects placed in this bucket.",R="The entered value must be a positive integer.",Ze="Retention Days must be a positive integer.",ve="KMS Provider " + "\ufffd*4:1\ufffd\ufffd#1:1\ufffd" + "Loading..." + "[\ufffd/#1:1\ufffd\ufffd/*4:1\ufffd|\ufffd/#1:2\ufffd\ufffd/*5:2\ufffd|\ufffd/#1:3\ufffd\ufffd/*6:3\ufffd]" + "" + "\ufffd*5:2\ufffd\ufffd#1:2\ufffd" + "-- Select a provider --" + "[\ufffd/#1:1\ufffd\ufffd/*4:1\ufffd|\ufffd/#1:2\ufffd\ufffd/*5:2\ufffd|\ufffd/#1:3\ufffd\ufffd/*6:3\ufffd]" + "" + "\ufffd*6:3\ufffd\ufffd#1:3\ufffd" + "" + "\ufffd0:3\ufffd" + "" + "[\ufffd/#1:1\ufffd\ufffd/*4:1\ufffd|\ufffd/#1:2\ufffd\ufffd/*5:2\ufffd|\ufffd/#1:3\ufffd\ufffd/*6:3\ufffd]" + "",ve=e.\u0275\u0275i18nPostprocess(ve),Ke="Key Id " + "\ufffd#12\ufffd\ufffd/#12\ufffd" + "",qe="This field is required.",L="This field is required.",it="Enable " + "\ufffd#3\ufffd" + "Enables replication for the objects in the bucket." + "\ufffd/#3\ufffd" + "",at=" A bi-directional sync policy group will be created by the dashboard along with flows and pipes. The pipe id will then be used for applying the replication policy to the bucket. ",rt="Invalid json text.",lt="Lifecycle " + "\ufffd#3\ufffd" + "" + "\ufffd/#3\ufffd" + "" + "\ufffd#5\ufffd" + "JSON or XML formatted document" + "\ufffd/#5\ufffd" + "",st="Policy examples " + "\ufffd#13\ufffd" + "" + "\ufffd/#13\ufffd" + "",ct="Clear " + "\ufffd#18\ufffd" + "" + "\ufffd/#18\ufffd" + "",dt="Invalid json text.",ut="Invalid xml text.",pt="This field is required.",mt="" + "\ufffd0\ufffd" + "",Tt="This field is required.",gt="When creating a bucket, a placement target can be provided as part of the LocationConstraint to override the default placement targets from the user and zonegroup.",Ye="Placement target " + "\ufffd*3:1\ufffd\ufffd#1:1\ufffd" + "Loading..." + "[\ufffd/#1:1\ufffd\ufffd/*3:1\ufffd|\ufffd/#1:2\ufffd\ufffd/*4:2\ufffd|\ufffd/#1:3\ufffd\ufffd/*5:3\ufffd]" + "" + "\ufffd*4:2\ufffd\ufffd#1:2\ufffd" + "-- Select a placement target --" + "[\ufffd/#1:1\ufffd\ufffd/*3:1\ufffd|\ufffd/#1:2\ufffd\ufffd/*4:2\ufffd|\ufffd/#1:3\ufffd\ufffd/*5:3\ufffd]" + "" + "\ufffd*5:3\ufffd\ufffd#1:3\ufffd" + "" + "\ufffd0:3\ufffd" + "" + "[\ufffd/#1:1\ufffd\ufffd/*3:1\ufffd|\ufffd/#1:2\ufffd\ufffd/*4:2\ufffd|\ufffd/#1:3\ufffd\ufffd/*5:3\ufffd]" + "",Ye=e.\u0275\u0275i18nPostprocess(Ye),Et="Checking multi-site status...",[["tagTpl",""],["loadingTpl",""],["frm","ngForm"],["nameError",""],["bucketPolicyTextArea",""],["bucketPolicyError",""],["granteeError",""],["aclPermissionError",""],["accountUserError",""],["ownerError",""],["mfaSerialError",""],["mfaPinError",""],["lockModeHelper",""],["retentionPeriodError",""],["kmsProviderError",""],["keyIdError",""],["lifecycleTextArea",""],["lifecycleError",""],o,_,a,r,s,c,u,p,T,f,G,S,O,C,b,N,k,z,$,X,B,V,Z,F,I,te,J,j,ee,D,ie,x,de,ue,pe,me,Te,ge,Ee,le,Re,Ce,R,Ze,ve,Ke,qe,L,it,at,rt,lt,st,ct,dt,ut,pt,mt,Tt,Ye,Et,["cdsCol","",3,"columnNumbers",4,"cdFormLoading"],["cdsCol","",3,"columnNumbers"],["name","bucketForm","novalidate","",3,"formGroup"],[1,"form-header"],["class","form-item",4,"ngIf"],[1,"form-item"],["for","bid","cdRequiredField","Name",3,"invalid","invalidText"],["cdsText","","placeholder",t,"id","bid","name","bid","formControlName","bid",3,"readonly","autofocus","invalid"],["formControlName","isAccountOwner"],[4,"ngIf"],[1,"cd-header"],["name","encryption_enabled","formControlName","encryption_enabled","id","encryption_enabled",3,"disabled"],["aria-label","encryption helper"],["href","#/rgw/configuration"],[4,"ngIf","ngIfElse"],[4,"ngFor","ngForOf"],["cdsRow",""],["cdsCol",""],[3,"description","highContrast","caret"],["cdsButton","tertiary","id","add-tag",3,"click","disabled"],[1,"cds--btn__icon",3,"cdsIcon","size"],["for","id",3,"invalid","invalidText"],["cdsTextArea","","id","bucket_policy","formControlName","bucket_policy","cols","200",1,"textarea-field",3,"change"],[1,"mt-1"],["cdsButton","tertiary","id","example-generator-button",3,"click"],[1,"float-end","mt-1"],["cdsButton","tertiary","id","clear-bucket-policy",3,"click"],["cdsRow","",1,"form-item-append"],["id","grantee","name","grantee","label","Grantee","formControlName","grantee","helperText","Select a grantee (user group) to modify it's permisions",3,"valueChange","invalid","invalidText"],[3,"value",4,"ngFor","ngForOf"],["id","aclPermission","name","aclPermission","label","Permissions","helperText","Select the permision to give to the selected grantee. Regardless, the owner of the bucket will always have FULL CONTROL access","formControlName","aclPermission",3,"invalid","invalidText"],[3,"rateLimitFormGroup","type","isEditing","allowBid"],["wrappingClass","text-right",3,"submitActionEvent","form","submitText"],["for","id"],["cdsText","","id","id","name","id","formControlName","id","readonly",""],["class","invalid-feedback",4,"ngIf"],[1,"invalid-feedback"],["label","Account user","id","acc_user","formControlName","accountUser","cdRequiredField","Account user",3,"invalidText","invalid"],[3,"ngValue",4,"ngIf"],["value","",4,"ngIf"],["type","info",4,"ngIf"],[3,"ngValue"],["value",""],[3,"value"],["type","info"],["label","Owner","formControlName","owner","id","owner","cdRequiredField","Owner",3,"invalidText","invalid"],["name","versioning","formControlName","versioning","id","versioning",3,"checkedChange"],["name","mfa-delete","formControlName","mfa-delete","id","mfa-delete","helperText",W,3,"checkedChange"],["for","mfa-token-serial","cdRequiredField","MFA Serial Number",3,"invalid","invalidText"],["cdsText","","id","mfa-token-serial","name","mfa-token-serial","formControlName","mfa-token-serial",3,"invalid"],["for","mfa-token-pin","cdRequiredField","MFA Token PIN",3,"invalid","invalidText"],["cdsText","","id","mfa-token-pin","name","mfa-token-pin","formControlName","mfa-token-pin",3,"invalid"],["name","lock_enabled","formControlName","lock_enabled","id","lock_enabled",3,"disabled"],["type","info","class","me-1",4,"ngIf"],["type","warning",4,"ngIf"],["label","Mode","for","lock_mode","formControlName","lock_mode","name","lock_mode","id","lock_mode",3,"helperText"],["value","COMPLIANCE"],["value","GOVERNANCE"],["name","lock_retention_period_days","formControlName","lock_retention_period_days","id","lock_retention_period_days","min","1","label",fe,"helperText",Se,3,"invalid","invalidText"],["type","info",1,"me-1"],["type","warning"],["formControlName","encryption_type"],["value","AES256",3,"disabled"],["value","aws:kms",3,"disabled"],["label","KMS Provider","for","kms_provider","formControlName","kms_provider","name","kms_provider","id","kms_provider","cdRequiredField","KMS Provider",3,"invalidText","invalid"],["for","keyId","cdRequiredField","Key Id",3,"invalid","invalidText"],["cdsText","","id","keyId","name","keyId","formControlName","keyId",3,"invalid"],["name","replication","formControlName","replication","id","replication",3,"disabled"],["type","info","class","me-1","id","replication-info","spacingClass","mt-1",4,"ngIf"],["type","info","id","replication-info","spacingClass","mt-1",1,"me-1"],[4,"ngTemplateOutlet","ngTemplateOutletContext"],["cdsTextArea","","id","lifecycle","formControlName","lifecycle","cols","200",1,"textarea-field",3,"change"],["cdsButton","tertiary","id","lifecycle-examples-button",3,"click"],["cdsButton","tertiary","id","clear-lifecycle",3,"click"],["label","Placement target","for","placement-target","formControlName","placement-target","name","placement-target","id","placement-target","helperText",gt],[1,"form-item","form-item-append"],["kind","tertiary","size","md",3,"click"],[1,"cds-info-color","cds--btn__icon",3,"cdsIcon","size"],["kind","danger","size","md",3,"click"],["type","text","cdsText","","readonly","",3,"id","ngbTooltip","value"]]},template:function(o,_){1&o&&e.\u0275\u0275template(0,ki,95,61,"div",79)(1,Hi,6,5,"ng-template",null,0,e.\u0275\u0275templateRefExtractor)(3,Xi,2,0,"ng-template",null,1,e.\u0275\u0275templateRefExtractor),2&o&&e.\u0275\u0275property("cdFormLoading",_.loading)},dependencies:[E.NgForOf,E.NgIf,E.NgTemplateOutlet,E_.e,Pe.m,_e.e,ae.O,on.e,Ct.B,ft.G,Y.S,oe.E,Qe.P,l.\u0275NgNoValidate,l.NgSelectOption,l.\u0275NgSelectMultipleOption,l.DefaultValueAccessor,l.NgControlStatus,l.NgControlStatusGroup,l.FormGroupDirective,l.FormControlName,v.NgbTooltip,d.ColumnDirective,d.RowDirective,d.Button,d.ButtonSet,d.IconButton,d.IconDirective,d.TextareaLabelComponent,d.TextInputLabelComponent,d.TextInput,d.TextArea,d.Checkbox,d.NumberComponent,d.Tooltip,d.Radio,d.RadioGroup,d.Select,d.Option,Ht,E.AsyncPipe,E.TitleCasePipe,Ie.r]})}}return n})();var Je=g(25947),Ue=g(84821),re=g(62847),Oe=g(19380),St=g(85481),bt=g(73651),In=g(18457),be=g(82254),It=g(50813),se=g(2361),On=g(22453),ke=g(3140);const Bi=["region","target_endpoint","access_key","secret_key","target_path"],Gn=["region","target_endpoint","access_key","secret_key","target_path","glacier_restore_tier_type","restore_storage_class"],q={LOCAL:"local",CLOUD_TIER:"cloud-s3",GLACIER:"cloud-s3-glacier"},nt={LOCAL:"Local",CLOUD_TIER:"Cloud S3",GLACIER:"Cloud S3 Glacier"},Nn="Enables fetching objects from remote cloud S3 if not found locally.",An="It specifies that objects this size or larger are transitioned to the cloud using multipart upload.",hn="It specifies the minimum part size to use when transitioning objects using multipart upload.",bn="Target Path refers to the storage location (e.g., bucket or container) in the cloud where data will be stored.",vn="To view or copy your access key, go to your cloud service's user management or credentials section, find your user profile, and locate the access key. You can view and copy the key by following the instructions provided.",Ln="To view or copy your secret key, go to your cloud service's user management or credentials section, find your user profile, and locate the secret key. You can view and copy the key by following the instructions provided.",yn="Retain object metadata after transition to the cloud.",$n="Local storage uses on-premises or directly attached devices for data storage.",ji="Cloud S3 storage uses Amazon S3-compatible cloud services for tiering.",Yi="Glacier storage uses Amazon S3 Glacier for low-cost, long-term archival data storage.",Dn="Refers to number of days to the object will be restored on glacier/tape endpoint.",Wn="Restore retrieval type.",xn="Standard glacier restore tier type restores data in 3\u20135 hours.",Qi="Expedited glacier restore tier type restores in 1\u20135 minutes (faster but costlier).",wn="Refers to number of days to the object will be restored on glacier/tape endpoint.",Un="The days for which objects restored via read-through are retained.",kn="The storage class to which object data is to be restored.",Ji="A Zone Group is a logical grouping of one or more zones that share the same data\n                  and metadata, allowing for multi-site replication and geographic distribution of\n                  data.";class zn{static filterAndMapTierTargets(i){return i.zonegroups.flatMap(t=>t.placement_targets.flatMap(o=>{const _=new Set((o.tier_targets||[]).map(s=>s.key));return[...(o.tier_targets||[]).map(s=>this.getTierTargets(s,t.name,o.name)),...(o.storage_classes||[]).filter(s=>"STANDARD"!==s&&!_.has(s)).map(s=>({zonegroup_name:t.name,placement_target:o.name,storage_class:s,tier_type:q.LOCAL}))]}))}static getTierTargets(i,t,o){const _=i.val,a=_.tier_type,r={zonegroup_name:t,placement_target:o,storage_class:_.storage_class,tier_type:a},s={...r,retain_head_object:_.retain_head_object,allow_read_through:_.allow_read_through,restore_storage_class:_.restore_storage_class,read_through_restore_days:_.read_through_restore_days,..._.s3};return a&&a!==q.LOCAL?a===q.GLACIER?{...s,..._["s3-glacier"]}:s:r}}const ea=()=>({lg:2,md:2});function ta(n,i){if(1&n){const t=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"cd-alert-panel",55),e.\u0275\u0275listener("action",function(){e.\u0275\u0275restoreView(t);const _=e.\u0275\u0275nextContext(2);return e.\u0275\u0275resetView(_.enableSnapshotSchedule())}),e.\u0275\u0275i18n(1,16),e.\u0275\u0275elementEnd()}}function na(n,i){if(1&n){const t=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"cd-alert-panel",56),e.\u0275\u0275listener("action",function(){e.\u0275\u0275restoreView(t);const _=e.\u0275\u0275nextContext(2);return e.\u0275\u0275resetView(_.goToCreateStorageClass())}),e.\u0275\u0275i18n(1,17),e.\u0275\u0275elementEnd()}}function oa(n,i){1&n&&(e.\u0275\u0275elementStart(0,"span"),e.\u0275\u0275i18n(1,18),e.\u0275\u0275elementEnd())}function _a(n,i){1&n&&(e.\u0275\u0275elementStart(0,"span",58),e.\u0275\u0275elementContainerStart(1),e.\u0275\u0275i18n(2,19),e.\u0275\u0275elementContainerEnd(),e.\u0275\u0275elementEnd())}function ia(n,i){1&n&&(e.\u0275\u0275elementStart(0,"span",58),e.\u0275\u0275elementContainerStart(1),e.\u0275\u0275i18n(2,20),e.\u0275\u0275elementContainerEnd(),e.\u0275\u0275elementEnd())}function aa(n,i){if(1&n&&e.\u0275\u0275template(0,_a,3,0,"span",57)(1,ia,3,0,"span",57),2&n){e.\u0275\u0275nextContext();const t=e.\u0275\u0275reference(6),o=e.\u0275\u0275nextContext();e.\u0275\u0275property("ngIf",o.tieringForm.showError("name",t,"required")),e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf",o.tieringForm.showError("name",t,"duplicate"))}}function ra(n,i){1&n&&(e.\u0275\u0275elementStart(0,"option",59),e.\u0275\u0275text(1,"Loading..."),e.\u0275\u0275elementEnd())}function la(n,i){1&n&&(e.\u0275\u0275elementStart(0,"option",59),e.\u0275\u0275text(1,"-- No storage class available --"),e.\u0275\u0275elementEnd())}function sa(n,i){1&n&&(e.\u0275\u0275elementStart(0,"option",59),e.\u0275\u0275text(1,"-- Select the storage class --"),e.\u0275\u0275elementEnd())}function ca(n,i){if(1&n&&(e.\u0275\u0275elementStart(0,"option",50),e.\u0275\u0275text(1),e.\u0275\u0275elementEnd()),2&n){const t=i.$implicit;e.\u0275\u0275property("value",t.storage_class),e.\u0275\u0275advance(),e.\u0275\u0275textInterpolate1(" ",t.storage_class," ")}}function da(n,i){1&n&&(e.\u0275\u0275elementStart(0,"span"),e.\u0275\u0275i18n(1,21),e.\u0275\u0275elementEnd())}function ua(n,i){1&n&&(e.\u0275\u0275elementStart(0,"span"),e.\u0275\u0275i18n(1,23),e.\u0275\u0275elementEnd())}function pa(n,i){1&n&&(e.\u0275\u0275elementStart(0,"span",58),e.\u0275\u0275elementContainerStart(1),e.\u0275\u0275i18n(2,24),e.\u0275\u0275elementContainerEnd(),e.\u0275\u0275elementEnd())}function ma(n,i){if(1&n&&e.\u0275\u0275template(0,pa,3,0,"span",57),2&n){e.\u0275\u0275nextContext(2);const t=e.\u0275\u0275reference(6),o=e.\u0275\u0275nextContext();e.\u0275\u0275property("ngIf",o.tieringForm.showError("prefix",t,"required"))}}function Ta(n,i){if(1&n&&(e.\u0275\u0275elementStart(0,"div",42)(1,"cds-text-label",60),e.\u0275\u0275i18nStart(2,22),e.\u0275\u0275element(3,"input",61),e.\u0275\u0275i18nEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275template(4,ua,2,0,"ng-template",null,6,e.\u0275\u0275templateRefExtractor)(6,ma,1,1,"ng-template",null,7,e.\u0275\u0275templateRefExtractor),e.\u0275\u0275elementEnd()),2&n){const t=e.\u0275\u0275reference(5),o=e.\u0275\u0275reference(7),_=e.\u0275\u0275nextContext(2);e.\u0275\u0275advance(),e.\u0275\u0275property("invalid",!_.tieringForm.controls.prefix.valid&&_.tieringForm.controls.prefix.dirty)("invalidText",o)("helperText",t)}}function ga(n,i){1&n&&(e.\u0275\u0275elementContainerStart(0),e.\u0275\u0275i18n(1,28),e.\u0275\u0275elementContainerEnd())}function Ea(n,i){1&n&&(e.\u0275\u0275elementContainerStart(0),e.\u0275\u0275i18n(1,29),e.\u0275\u0275elementContainerEnd())}function Ra(n,i){if(1&n){const t=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementContainerStart(0,66)(1,67),e.\u0275\u0275elementStart(2,"div",68)(3,"div",69)(4,"cds-text-label",70),e.\u0275\u0275i18nStart(5,26),e.\u0275\u0275element(6,"input",71),e.\u0275\u0275i18nEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275template(7,ga,2,0,"ng-template",null,8,e.\u0275\u0275templateRefExtractor),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(9,"div",69)(10,"cds-text-label",72),e.\u0275\u0275i18nStart(11,27),e.\u0275\u0275element(12,"input",73),e.\u0275\u0275i18nEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275template(13,Ea,2,0,"ng-template",null,9,e.\u0275\u0275templateRefExtractor),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(15,"div",74)(16,"cds-icon-button",75),e.\u0275\u0275listener("click",function(){const _=e.\u0275\u0275restoreView(t).index,a=e.\u0275\u0275nextContext(3);return e.\u0275\u0275resetView(a.removeTags(_))}),e.\u0275\u0275namespaceSVG(),e.\u0275\u0275element(17,"svg",76),e.\u0275\u0275elementEnd()()(),e.\u0275\u0275elementContainerEnd()()}if(2&n){const t=i.index,o=e.\u0275\u0275reference(8),_=e.\u0275\u0275reference(14),a=e.\u0275\u0275nextContext(3);e.\u0275\u0275advance(),e.\u0275\u0275property("formGroupName",t),e.\u0275\u0275advance(3),e.\u0275\u0275property("invalid",!a.tieringForm.controls.tags.controls[t].controls.Key.valid&&a.tieringForm.controls.tags.controls[t].controls.Key.dirty)("invalidText",o),e.\u0275\u0275advance(2),e.\u0275\u0275property("invalid",a.tieringForm.controls.tags.controls[t].controls.Key.invalid&&a.tieringForm.controls.tags.controls[t].controls.Key.dirty),e.\u0275\u0275advance(4),e.\u0275\u0275property("invalid",!a.tieringForm.controls.tags.controls[t].controls.Value.valid&&a.tieringForm.controls.tags.controls[t].controls.Value.dirty)("invalidText",_),e.\u0275\u0275advance(2),e.\u0275\u0275property("invalid",a.tieringForm.controls.tags.controls[t].controls.Value.invalid&&a.tieringForm.controls.tags.controls[t].controls.Value.dirty),e.\u0275\u0275advance(3),e.\u0275\u0275property("columnNumbers",e.\u0275\u0275pureFunction0(8,ea))}}function Ca(n,i){if(1&n){const t=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"div")(1,"div",62),e.\u0275\u0275text(2,"Tags"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(3,"div"),e.\u0275\u0275text(4,"All the tags must exist in the object's tag set for the rule to apply."),e.\u0275\u0275elementEnd(),e.\u0275\u0275template(5,Ra,18,9,"ng-container",63),e.\u0275\u0275elementStart(6,"div",42)(7,"button",64),e.\u0275\u0275listener("click",function(){e.\u0275\u0275restoreView(t);const _=e.\u0275\u0275nextContext(2);return e.\u0275\u0275resetView(_.addTags())}),e.\u0275\u0275i18nStart(8,25),e.\u0275\u0275namespaceSVG(),e.\u0275\u0275element(9,"svg",65),e.\u0275\u0275i18nEnd(),e.\u0275\u0275elementEnd()()()}if(2&n){const t=e.\u0275\u0275nextContext(2);e.\u0275\u0275advance(5),e.\u0275\u0275property("ngForOf",t.tags.controls)}}function fa(n,i){1&n&&(e.\u0275\u0275elementStart(0,"span"),e.\u0275\u0275i18n(1,30),e.\u0275\u0275elementEnd())}function Sa(n,i){1&n&&(e.\u0275\u0275elementStart(0,"span"),e.\u0275\u0275i18n(1,31),e.\u0275\u0275elementEnd())}function Fa(n,i){1&n&&(e.\u0275\u0275elementStart(0,"span"),e.\u0275\u0275i18n(1,32),e.\u0275\u0275elementEnd())}function Ma(n,i){if(1&n&&e.\u0275\u0275template(0,Sa,2,0,"span",52)(1,Fa,2,0,"span",52),2&n){e.\u0275\u0275nextContext();const t=e.\u0275\u0275reference(6),o=e.\u0275\u0275nextContext();e.\u0275\u0275property("ngIf",o.tieringForm.showError("days",t,"required")),e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf",o.tieringForm.showError("days",t,"pattern"))}}function Pa(n,i){if(1&n&&(e.\u0275\u0275elementContainerStart(0),e.\u0275\u0275elementStart(1,"section",38),e.\u0275\u0275template(2,ta,2,0,"cd-alert-panel",39),e.\u0275\u0275pipe(3,"async"),e.\u0275\u0275template(4,na,2,0,"cd-alert-panel",40),e.\u0275\u0275elementStart(5,"form",41,0)(7,"div",42)(8,"cds-text-label",43),e.\u0275\u0275i18nStart(9,11),e.\u0275\u0275element(10,"input",44),e.\u0275\u0275i18nEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275template(11,oa,2,0,"ng-template",null,1,e.\u0275\u0275templateRefExtractor)(13,aa,2,2,"ng-template",null,2,e.\u0275\u0275templateRefExtractor),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(15,"div",42)(16,"cds-select",45),e.\u0275\u0275template(17,ra,2,0,"option",46)(18,la,2,0,"option",46)(19,sa,2,0,"option",46)(20,ca,2,2,"option",47),e.\u0275\u0275elementEnd(),e.\u0275\u0275template(21,da,2,0,"ng-template",null,3,e.\u0275\u0275templateRefExtractor),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(23,"legend",48),e.\u0275\u0275text(24,"Choose a configuration scope"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(25,"div")(26,"cds-radio-group",49)(27,"cds-radio",50),e.\u0275\u0275i18n(28,12),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(29,"cds-radio",50),e.\u0275\u0275i18n(30,13),e.\u0275\u0275elementEnd()()(),e.\u0275\u0275template(31,Ta,8,3,"div",51)(32,Ca,10,1,"div",52),e.\u0275\u0275elementStart(33,"legend",48),e.\u0275\u0275text(34,"Status"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(35,"div")(36,"cds-radio-group",53)(37,"cds-radio",50),e.\u0275\u0275i18n(38,14),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(39,"cds-radio",50),e.\u0275\u0275i18n(40,15),e.\u0275\u0275elementEnd()()(),e.\u0275\u0275elementStart(41,"div",42),e.\u0275\u0275element(42,"cds-number",54),e.\u0275\u0275template(43,fa,2,0,"ng-template",null,4,e.\u0275\u0275templateRefExtractor)(45,Ma,2,2,"ng-template",null,5,e.\u0275\u0275templateRefExtractor),e.\u0275\u0275elementEnd()()(),e.\u0275\u0275elementContainerEnd()),2&n){const t=e.\u0275\u0275reference(12),o=e.\u0275\u0275reference(14),_=e.\u0275\u0275reference(22),a=e.\u0275\u0275reference(44),r=e.\u0275\u0275reference(46),s=e.\u0275\u0275nextContext();e.\u0275\u0275advance(2),e.\u0275\u0275property("ngIf",!1===e.\u0275\u0275pipeBind1(3,23,s.snapScheduleModuleStatus$)),e.\u0275\u0275advance(2),e.\u0275\u0275property("ngIf",0===(null==s.storageClassList?null:s.storageClassList.length)&&s.isStorageClassFetched),e.\u0275\u0275advance(),e.\u0275\u0275property("formGroup",s.tieringForm),e.\u0275\u0275advance(3),e.\u0275\u0275property("invalid",!s.tieringForm.controls.name.valid&&s.tieringForm.controls.name.dirty)("invalidText",o)("helperText",t),e.\u0275\u0275advance(8),e.\u0275\u0275property("helperText",_),e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf",null===s.storageClassList),e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf",null!==s.storageClassList&&0===s.storageClassList.length),e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf",null!==s.storageClassList&&s.storageClassList.length>0),e.\u0275\u0275advance(),e.\u0275\u0275property("ngForOf",s.storageClassList),e.\u0275\u0275advance(7),e.\u0275\u0275property("value",!1),e.\u0275\u0275advance(),e.\u0275\u0275i18nExp("Apply to all objects in the bucket"),e.\u0275\u0275i18nApply(28),e.\u0275\u0275advance(),e.\u0275\u0275property("value",!0),e.\u0275\u0275advance(),e.\u0275\u0275i18nExp("Limit the scope of this rule to selected filter criteria"),e.\u0275\u0275i18nApply(30),e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf",s.tieringForm.controls.hasPrefix.value),e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf",s.tieringForm.controls.hasPrefix.value),e.\u0275\u0275advance(5),e.\u0275\u0275property("value","Enabled"),e.\u0275\u0275advance(2),e.\u0275\u0275property("value","Disabled"),e.\u0275\u0275advance(3),e.\u0275\u0275property("min",1)("invalid",!s.tieringForm.controls.days.valid&&s.tieringForm.controls.days.dirty)("invalidText",r)("helperText",a)}}let Hn=(()=>{class n extends tt.g{constructor(t,o,_=!1,a,r,s,c,u,p,T){super(),this.bucket=t,this.selectedLifecycle=o,this.editing=_,this.actionLabels=a,this.rgwBucketService=r,this.fb=s,this.cd=c,this.rgwZonegroupService=u,this.notificationService=p,this.router=T,this.tagsToRemove=[],this.storageClassList=null,this.isStorageClassFetched=!1}ngOnInit(){this.rgwBucketService.getLifecycle(this.bucket.bucket,this.bucket.owner,this.bucket.tenant).subscribe(t=>{if(null===t&&(t={LifecycleConfiguration:{Rule:[]}}),t.LifecycleConfiguration.Rule=t.LifecycleConfiguration.Rule.map(o=>(o?.Filter?.Tag&&!Array.isArray(o?.Filter?.Tag)&&(o.Filter.Tag=[o.Filter.Tag]),o?.Filter?.And?.Tag&&!Array.isArray(o?.Filter?.And?.Tag)&&(o.Filter.And.Tag=[o.Filter.And.Tag]),o)),this.configuredLifecycle=t,this.editing){const o=this.configuredLifecycle?.LifecycleConfiguration?.Rule.filter(_=>_?.ID===this.selectedLifecycle?.ID)[0];this.tieringForm.patchValue({name:o?.ID,hasPrefix:this.checkIfRuleHasFilters(o),prefix:o?.Prefix||o?.Filter?.Prefix||o?.Filter?.And?.Prefix||"",status:o?.Status,days:o?.Transition?.Days}),this.setTags(o),this.tieringForm.get("name").disable()}}),this.tieringForm=this.fb.group({name:[null,[l.Validators.required,this.duplicateConfigName.bind(this)]],storageClass:[null,l.Validators.required],hasPrefix:[!1,[l.Validators.required]],prefix:[null,[M.xQ.composeIf({hasPrefix:!0},[l.Validators.required])]],tags:this.fb.array([]),status:["Enabled",[l.Validators.required]],days:[60,[l.Validators.required,M.xQ.number(!1)]]}),this.loadStorageClass()}checkIfRuleHasFilters(t){return!!(this.isValidPrefix(t?.Prefix)||this.isValidPrefix(t?.Filter?.Prefix)||this.isValidArray(t?.Filter?.Tag)||this.isValidPrefix(t?.Filter?.And?.Prefix)||this.isValidArray(t?.Filter?.And?.Tag))}isValidPrefix(t){return!!t}isValidArray(t){return Array.isArray(t)&&t.length>0}setTags(t){Array.isArray(t?.Filter?.Tag)&&t?.Filter?.Tag?.length>0&&t?.Filter?.Tag?.forEach(o=>this.addTags(o.Key,o.Value)),Array.isArray(t?.Filter?.And?.Tag)&&t?.Filter?.And?.Tag?.length>0&&t?.Filter?.And?.Tag?.forEach(o=>this.addTags(o.Key,o.Value))}get tags(){return this.tieringForm.get("tags")}addTags(t,o){this.tags.push(new l.FormGroup({Key:new l.FormControl(t||"",l.Validators.required),Value:new l.FormControl(o||"",l.Validators.required)})),this.cd.detectChanges()}duplicateConfigName(t){return this.configuredLifecycle?.LifecycleConfiguration?.Rule?.length>0&&this.configuredLifecycle.LifecycleConfiguration.Rule.map(_=>_.ID).includes(t.value)?{duplicate:!0}:null}removeTags(t){this.tags.removeAt(t),this.cd.detectChanges()}loadStorageClass(){return new Promise((t,o)=>{this.rgwZonegroupService.getAllZonegroupsInfo().subscribe(_=>{this.storageClassList=[];const a=zn.filterAndMapTierTargets(_);this.isStorageClassFetched=!0,this.storageClassList.push(...a),this.editing&&this.tieringForm.get("storageClass").setValue(this.selectedLifecycle?.Transition?.StorageClass),this.loadingReady(),t()},_=>{o(_)})})}submitTieringConfig(){const t=this.tieringForm.value;if(!this.tieringForm.valid)return;let o={ID:this.tieringForm.getRawValue().name,Status:t.status,Transition:{Days:t.days,StorageClass:t.storageClass}};if(Object.assign(o,t.hasPrefix?this.tags.length>0?{Filter:{And:{Prefix:t.prefix,Tag:this.tags.value}}}:{Filter:{Prefix:t.prefix}}:{Prefix:""}),this.editing){const _=this.configuredLifecycle.LifecycleConfiguration.Rule,a=_.findIndex(r=>r?.ID===this.selectedLifecycle?.ID);_.splice(a,1,o),this.rgwBucketService.setLifecycle(this.bucket.bucket,JSON.stringify(this.configuredLifecycle.LifecycleConfiguration),this.bucket.owner,this.bucket.tenant).subscribe({next:()=>{this.notificationService.show(w._.success,"Bucket lifecycle modified succesfully")},error:r=>{this.notificationService.show(w._.error,r),this.tieringForm.setErrors({cdSubmitButton:!0})},complete:()=>{this.closeModal()}})}else this.configuredLifecycle.LifecycleConfiguration.Rule.push(o),this.rgwBucketService.setLifecycle(this.bucket.bucket,JSON.stringify(this.configuredLifecycle.LifecycleConfiguration),this.bucket.owner,this.bucket.tenant).subscribe({next:()=>{this.notificationService.show(w._.success,"Bucket lifecycle created succesfully")},error:_=>{this.notificationService.show(w._.error,_),this.tieringForm.setErrors({cdSubmitButton:!0})},complete:()=>{this.closeModal()}})}goToCreateStorageClass(){this.router.navigate(["rgw/tiering/create"]),this.closeModal()}static{this.\u0275fac=function(o){return new(o||n)(e.\u0275\u0275directiveInject("bucket"),e.\u0275\u0275directiveInject("selectedLifecycle",8),e.\u0275\u0275directiveInject("editing",8),e.\u0275\u0275directiveInject(P.Ss),e.\u0275\u0275directiveInject(Le.c),e.\u0275\u0275directiveInject(Ge.$),e.\u0275\u0275directiveInject(e.ChangeDetectorRef),e.\u0275\u0275directiveInject(ke.Z),e.\u0275\u0275directiveInject(ne.J),e.\u0275\u0275directiveInject(Q.Router))}}static{this.\u0275cmp=e.\u0275\u0275defineComponent({type:n,selectors:[["cd-rgw-bucket-tiering"]],features:[e.\u0275\u0275InheritDefinitionFeature],decls:6,vars:8,consts:()=>{let t,o,_,a,r,s,c,u,p,T,f,G,S,O,C,b,N,k,z,$,X,B,V,Z,F;return t="" + "\ufffd0\ufffd" + " Tiering configuration " + "\ufffd#3\ufffd" + "" + "\ufffd/#3\ufffd" + "",o="Rule Name " + "\ufffd#10\ufffd\ufffd/#10\ufffd" + "",_=" " + "\ufffd0\ufffd" + " ",a=" " + "\ufffd0\ufffd" + " ",r="Enabled ",s="Disabled ",c=" In order to access the snapshot scheduler feature, the snap_scheduler module must be enabled ",u=" No storage class found. Consider creating it first to proceed. ",p="Unique identifier for the rule. The value cannot be longer than 255 characters. ",T="This field is required.",f="Please enter a unique name.",G="The storage class to which you want the object to transition. ",S="Prefix " + "\ufffd#3\ufffd\ufffd/#3\ufffd" + "",O=" Prefix identifying one or more objects to which the rule applies ",C="This field is required.",b="Add tags " + "\ufffd#9\ufffd" + "" + "\ufffd/#9\ufffd" + "",N="Enter name of the object key",k="Enter value of the tag",z="Name of the object key " + "\ufffd#6\ufffd\ufffd/#6\ufffd" + "",$="Value of the tag " + "\ufffd#12\ufffd\ufffd/#12\ufffd" + "",X="This field is required.",B="This field is required.",V="Select the number of days to transition the objects to the specified storage class. The value must be a positive integer. ",Z="This field is required.",F="Enter a valid positive number",[["formDir","ngForm"],["ruleHelper",""],["ruleNameError",""],["storageClassHelper",""],["daysHelper",""],["daysError",""],["prefixHelper",""],["prefixError",""],["tagKeyError",""],["tagValueError",""],t,o,_,a,r,s,c,u,p,T,f,G,S,O,C,b,z,$,X,B,V,Z,F,["size","md",3,"overlaySelected","open"],[3,"closeSelect"],[3,"formAllFieldsRequired"],[4,"cdFormLoading"],[3,"submitActionEvent","form","submitText","modalForm","disabled"],["cdsModalContent",""],["type","info","spacingClass","mb-3","class","align-items-center","actionName","Enable",3,"action",4,"ngIf"],["type","info","spacingClass","mb-3","class","align-items-center","actionName","Create",3,"action",4,"ngIf"],["name","tieringForm","novalidate","",3,"formGroup"],[1,"form-item"],["labelInputID","rule_name",3,"invalid","invalidText","helperText"],["cdsText","","type","text","id","rule_name","maxlength","255","formControlName","name"],["id","storageClass","formControlName","storageClass","label","Storage Class",3,"helperText"],["value","",4,"ngIf"],[3,"value",4,"ngFor","ngForOf"],[1,"cds--label"],["formControlName","hasPrefix"],[3,"value"],["class","form-item",4,"ngIf"],[4,"ngIf"],["formControlName","status"],["formControlName","days","label","Number of days",3,"min","invalid","invalidText","helperText"],["type","info","spacingClass","mb-3","actionName","Enable",1,"align-items-center",3,"action"],["type","info","spacingClass","mb-3","actionName","Create",1,"align-items-center",3,"action"],["class","invalid-feedback",4,"ngIf"],[1,"invalid-feedback"],["value",""],["labelInputID","prefix",3,"invalid","invalidText","helperText"],["cdsText","","type","text","id","prefix","formControlName","prefix"],[1,"form-group-header"],["formArrayName","tags",4,"ngFor","ngForOf"],["cdsButton","tertiary","type","button",3,"click"],["cdsIcon","add","size","32","icon","",1,"cds--btn__icon"],["formArrayName","tags"],[3,"formGroupName"],["cdsRow","",1,"form-item","form-item-append"],["cdsCol",""],["labelInputID","Key",3,"invalid","invalidText"],["cdsText","","type","text","placeholder",N,"formControlName","Key",3,"invalid"],["labelInputID","Value",3,"invalid","invalidText"],["cdsText","","type","text","placeholder",k,"formControlName","Value",3,"invalid"],["cdsCol","",1,"item-action-btn",3,"columnNumbers"],["kind","tertiary","size","sm",3,"click"],["cdsIcon","trash-can","size","32",1,"cds--btn__icon"]]},template:function(o,_){1&o&&(e.\u0275\u0275elementStart(0,"cds-modal",33),e.\u0275\u0275listener("overlaySelected",function(){return _.closeModal()}),e.\u0275\u0275elementStart(1,"cds-modal-header",34),e.\u0275\u0275listener("closeSelect",function(){return _.closeModal()}),e.\u0275\u0275i18nStart(2,10),e.\u0275\u0275element(3,"cd-help-text",35),e.\u0275\u0275i18nEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275template(4,Pa,47,25,"ng-container",36),e.\u0275\u0275elementStart(5,"cd-form-button-panel",37),e.\u0275\u0275listener("submitActionEvent",function(){return _.submitTieringConfig()}),e.\u0275\u0275elementEnd()()),2&o&&(e.\u0275\u0275property("open",_.open),e.\u0275\u0275advance(3),e.\u0275\u0275property("formAllFieldsRequired",!0),e.\u0275\u0275i18nExp(_.editing?"Edit":"Create"),e.\u0275\u0275i18nApply(2),e.\u0275\u0275advance(),e.\u0275\u0275property("cdFormLoading",_.loading),e.\u0275\u0275advance(),e.\u0275\u0275property("form",_.tieringForm)("submitText",_.editing?_.actionLabels.EDIT:_.actionLabels.CREATE)("modalForm",!0)("disabled",0===(null==_.storageClassList?null:_.storageClassList.length)&&_.isStorageClassFetched))},dependencies:[E.NgForOf,E.NgIf,Pe.m,_e.e,ae.O,ft.G,Y.S,oe.E,l.\u0275NgNoValidate,l.NgSelectOption,l.\u0275NgSelectMultipleOption,l.DefaultValueAccessor,l.NgControlStatus,l.NgControlStatusGroup,l.MaxLengthValidator,l.FormGroupDirective,l.FormControlName,l.FormGroupName,l.FormArrayName,d.Modal,d.ModalHeader,d.ModalContent,d.ColumnDirective,d.RowDirective,d.Button,d.IconButton,d.IconDirective,d.TextInputLabelComponent,d.TextInput,d.NumberComponent,d.Radio,d.RadioGroup,d.Select,d.Option,E.AsyncPipe]})}}return n})();var Xn=g(68316),De=g(32295),ot=g(45843),Xt=g(62988);let Ia=(()=>{class n{constructor(t,o,_,a,r){this.rgwBucketService=t,this.authStorageService=o,this.actionLabels=_,this.modalService=a,this.notificationService=r,this.updateBucketDetails=new e.EventEmitter,this.columns=[],this.selection=new Oe.y,this.lifecycleRuleList=[]}ngOnInit(){this.permission=this.authStorageService.getPermissions().rgw,this.columns=[{name:"Name",prop:"ID",flexGrow:2},{name:"Days",prop:"Transition.Days",flexGrow:1},{name:"Storage class",prop:"Transition.StorageClass",flexGrow:1},{name:"Status",prop:"Status",flexGrow:1}],this.tableActions=[{permission:"create",icon:y.FI.add,click:()=>this.openTieringModal(this.actionLabels.CREATE),name:this.actionLabels.CREATE},{permission:"update",icon:y.FI.edit,disable:()=>this.selection.hasMultiSelection,click:()=>this.openTieringModal(this.actionLabels.EDIT),name:this.actionLabels.EDIT},{permission:"delete",icon:y.FI.destroy,click:()=>this.deleteAction(),disable:()=>!this.selection.hasSelection,name:this.actionLabels.DELETE,canBePrimary:a=>a.hasMultiSelection}]}loadLifecyclePolicies(t){const o=this.rgwBucketService.getLifecycle(this.bucket.bucket,this.bucket.owner,this.bucket.tenant).pipe((0,K.tap)(_=>{this.lifecycleRuleList=_}),(0,K.catchError)(()=>(t.error(),(0,U.of)(null))));this.filteredLifecycleRules$=o.pipe((0,K.map)(_=>_?.LifecycleConfiguration?.Rule?.filter(a=>a.hasOwnProperty("Transition"))||[]))}openTieringModal(t){this.modalService.show(Hn,{bucket:this.bucket,selectedLifecycle:this.selection.first(),editing:t===this.actionLabels.EDIT})?.close?.subscribe(()=>this.updateBucketDetails.emit())}updateSelection(t){this.selection=t}deleteAction(){const t=this.selection.selected.map(a=>a.ID),o=this.lifecycleRuleList.LifecycleConfiguration.Rule.filter(a=>!t.includes(a.ID)),_=o.length>0?{Rule:o}:{};this.modalRef=this.modalService.show(Ue.D,{itemDescription:"Rule",itemNames:t,actionDescription:"remove",submitAction:()=>this.submitLifecycleConfig(_)})}submitLifecycleConfig(t){this.rgwBucketService.setLifecycle(this.bucket.bucket,JSON.stringify(t),this.bucket.owner,this.bucket.tenant).subscribe({next:()=>{this.notificationService.show(w._.success,"Lifecycle rule deleted successfully"),this.updateBucketDetails.emit()},error:()=>{this.modalRef.componentInstance.stopLoadingSpinner()},complete:()=>{this.modalService.dismissAll()}})}static{this.\u0275fac=function(o){return new(o||n)(e.\u0275\u0275directiveInject(Le.c),e.\u0275\u0275directiveInject(be.v),e.\u0275\u0275directiveInject(P.Ss),e.\u0275\u0275directiveInject(he.V),e.\u0275\u0275directiveInject(ne.J))}}static{this.\u0275cmp=e.\u0275\u0275defineComponent({type:n,selectors:[["cd-rgw-bucket-lifecycle-list"]],viewQuery:function(o,_){if(1&o&&e.\u0275\u0275viewQuery(re.O,7),2&o){let a;e.\u0275\u0275queryRefresh(a=e.\u0275\u0275loadQuery())&&(_.table=a.first)}},inputs:{bucket:"bucket"},outputs:{updateBucketDetails:"updateBucketDetails"},decls:7,vars:7,consts:()=>{let t;return t=" Tiering Configuration " + "\ufffd#2\ufffd" + " Configure a bucket tiering rule to automatically transition objects between storage classes after a specified number of days. Define the scope of the rule by applying it globally or to objects with specific prefixes and tags. " + "\ufffd/#2\ufffd" + "",[["table",""],t,["columnMode","flex","selectionType","multiClick","identifier","ID",3,"updateSelection","fetchData","data","columns"],[1,"table-actions",3,"permission","selection","tableActions"]]},template:function(o,_){if(1&o){const a=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"legend"),e.\u0275\u0275i18nStart(1,1),e.\u0275\u0275element(2,"cd-help-text"),e.\u0275\u0275i18nEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(3,"cd-table",2,0),e.\u0275\u0275pipe(5,"async"),e.\u0275\u0275listener("updateSelection",function(s){return e.\u0275\u0275restoreView(a),e.\u0275\u0275resetView(_.updateSelection(s))})("fetchData",function(s){return e.\u0275\u0275restoreView(a),e.\u0275\u0275resetView(_.loadLifecyclePolicies(s))}),e.\u0275\u0275element(6,"cd-table-actions",3),e.\u0275\u0275elementEnd()}2&o&&(e.\u0275\u0275advance(3),e.\u0275\u0275property("data",e.\u0275\u0275pipeBind1(5,5,_.filteredLifecycleRules$))("columns",_.columns),e.\u0275\u0275advance(3),e.\u0275\u0275property("permission",_.permission)("selection",_.selection)("tableActions",_.tableActions))},dependencies:[ae.O,re.O,De.j,E.AsyncPipe]})}}return n})();var _n=g(91822);function Oa(n,i){1&n&&(e.\u0275\u0275elementStart(0,"td"),e.\u0275\u0275text(1,"-"),e.\u0275\u0275elementEnd())}function Ga(n,i){1&n&&(e.\u0275\u0275elementStart(0,"td"),e.\u0275\u0275i18n(1,6),e.\u0275\u0275elementEnd())}function Na(n,i){if(1&n&&(e.\u0275\u0275elementStart(0,"td"),e.\u0275\u0275text(1),e.\u0275\u0275elementEnd()),2&n){const t=e.\u0275\u0275nextContext();e.\u0275\u0275advance(),e.\u0275\u0275textInterpolate1(" ",t.rateLimitConfig.max_read_ops," ")}}function Aa(n,i){1&n&&(e.\u0275\u0275elementStart(0,"td"),e.\u0275\u0275text(1,"-"),e.\u0275\u0275elementEnd())}function ha(n,i){1&n&&(e.\u0275\u0275elementStart(0,"td"),e.\u0275\u0275i18n(1,7),e.\u0275\u0275elementEnd())}function ba(n,i){if(1&n&&(e.\u0275\u0275elementStart(0,"td"),e.\u0275\u0275text(1),e.\u0275\u0275elementEnd()),2&n){const t=e.\u0275\u0275nextContext();e.\u0275\u0275advance(),e.\u0275\u0275textInterpolate1(" ",t.rateLimitConfig.max_write_ops," ")}}function va(n,i){1&n&&(e.\u0275\u0275elementStart(0,"td"),e.\u0275\u0275text(1,"-"),e.\u0275\u0275elementEnd())}function La(n,i){1&n&&(e.\u0275\u0275elementStart(0,"td"),e.\u0275\u0275i18n(1,8),e.\u0275\u0275elementEnd())}function ya(n,i){if(1&n&&(e.\u0275\u0275elementStart(0,"td"),e.\u0275\u0275text(1),e.\u0275\u0275pipe(2,"dimlessBinaryPerMinute"),e.\u0275\u0275elementEnd()),2&n){const t=e.\u0275\u0275nextContext();e.\u0275\u0275advance(),e.\u0275\u0275textInterpolate1(" ",e.\u0275\u0275pipeBind1(2,1,t.rateLimitConfig.max_read_bytes)," ")}}function $a(n,i){1&n&&(e.\u0275\u0275elementStart(0,"td"),e.\u0275\u0275text(1,"-"),e.\u0275\u0275elementEnd())}function Da(n,i){1&n&&(e.\u0275\u0275elementStart(0,"td"),e.\u0275\u0275i18n(1,9),e.\u0275\u0275elementEnd())}function Wa(n,i){if(1&n&&(e.\u0275\u0275elementStart(0,"td"),e.\u0275\u0275text(1),e.\u0275\u0275pipe(2,"dimlessBinaryPerMinute"),e.\u0275\u0275elementEnd()),2&n){const t=e.\u0275\u0275nextContext();e.\u0275\u0275advance(),e.\u0275\u0275textInterpolate1(" ",e.\u0275\u0275pipeBind1(2,1,t.rateLimitConfig.max_write_bytes)," ")}}let Bn=(()=>{class n{static{this.\u0275fac=function(o){return new(o||n)}}static{this.\u0275cmp=e.\u0275\u0275defineComponent({type:n,selectors:[["cd-rgw-rate-limit-details"]],inputs:{rateLimitConfig:"rateLimitConfig",type:"type"},decls:34,vars:16,consts:()=>{let t,o,_,a,r,s,c,u,p,T;return t="" + "\ufffd0\ufffd" + "",o="Enabled",_="Maximum Read Ops",a="Maximum Write Ops",r="Maximum Read Bytes",s="Maximum Write Bytes",c="Unlimited",u="Unlimited",p="Unlimited",T="Unlimited",[t,o,_,a,r,s,c,u,p,T,[1,"cds--data-table--sort","cds--data-table--no-border","cds--data-table","cds--data-table--md"],[1,"bold","w-25"],[1,"w-75"],[1,"bold"],[4,"ngIf"]]},template:function(o,_){1&o&&(e.\u0275\u0275elementStart(0,"legend"),e.\u0275\u0275i18n(1,0),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(2,"table",10)(3,"tbody")(4,"tr")(5,"td",11),e.\u0275\u0275i18n(6,1),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(7,"td",12),e.\u0275\u0275text(8),e.\u0275\u0275pipe(9,"booleanText"),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(10,"tr")(11,"td",13),e.\u0275\u0275i18n(12,2),e.\u0275\u0275elementEnd(),e.\u0275\u0275template(13,Oa,2,0,"td",14)(14,Ga,2,0,"td",14)(15,Na,2,1,"td",14),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(16,"tr")(17,"td",13),e.\u0275\u0275i18n(18,3),e.\u0275\u0275elementEnd(),e.\u0275\u0275template(19,Aa,2,0,"td",14)(20,ha,2,0,"td",14)(21,ba,2,1,"td",14),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(22,"tr")(23,"td",13),e.\u0275\u0275i18n(24,4),e.\u0275\u0275elementEnd(),e.\u0275\u0275template(25,va,2,0,"td",14)(26,La,2,0,"td",14)(27,ya,3,3,"td",14),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(28,"tr")(29,"td",13),e.\u0275\u0275i18n(30,5),e.\u0275\u0275elementEnd(),e.\u0275\u0275template(31,$a,2,0,"td",14)(32,Da,2,0,"td",14)(33,Wa,3,3,"td",14),e.\u0275\u0275elementEnd()()()),2&o&&(e.\u0275\u0275advance(),e.\u0275\u0275i18nExp("user"===_.type?"User Rate Limit":"Bucket Rate Limit"),e.\u0275\u0275i18nApply(1),e.\u0275\u0275advance(7),e.\u0275\u0275textInterpolate(e.\u0275\u0275pipeBind1(9,14,_.rateLimitConfig.enabled)),e.\u0275\u0275advance(5),e.\u0275\u0275property("ngIf",!_.rateLimitConfig.enabled),e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf",_.rateLimitConfig.enabled&&_.rateLimitConfig.max_read_ops<=0),e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf",_.rateLimitConfig.enabled&&_.rateLimitConfig.max_read_ops>0),e.\u0275\u0275advance(4),e.\u0275\u0275property("ngIf",!_.rateLimitConfig.enabled),e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf",_.rateLimitConfig.enabled&&_.rateLimitConfig.max_write_ops<=0),e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf",_.rateLimitConfig.enabled&&_.rateLimitConfig.max_write_ops>0),e.\u0275\u0275advance(4),e.\u0275\u0275property("ngIf",!_.rateLimitConfig.enabled),e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf",_.rateLimitConfig.enabled&&_.rateLimitConfig.max_read_bytes<=0),e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf",_.rateLimitConfig.enabled&&_.rateLimitConfig.max_read_bytes>0),e.\u0275\u0275advance(4),e.\u0275\u0275property("ngIf",!_.rateLimitConfig.enabled),e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf",_.rateLimitConfig.enabled&&_.rateLimitConfig.max_write_bytes<=0),e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf",_.rateLimitConfig.enabled&&_.rateLimitConfig.max_write_bytes>0))},dependencies:[E.NgIf,_n.s,tn.E]})}}return n})();var He=g(2148),xa=g(83133);let an=(()=>{class n extends xa.O{constructor(t,o){super(),this.http=t,this.rgwDaemonService=o,this.baseURL="api/rgw/topic"}listTopic(){return this.http.get(this.baseURL)}getTopic(t){return this.http.get(`${this.baseURL}/${encodeURIComponent(t)}`)}create(t){return this.rgwDaemonService.request(o=>this.http.post(`${this.baseURL}`,t,{params:o}))}delete(t){return this.http.delete(`${this.baseURL}/${t}`,{observe:"response"})}exists(t){const o=encodeURIComponent(`:${t}`);return this.getTopic(o).pipe((0,K.mapTo)(!0),(0,K.catchError)(_=>(A().isFunction(_.preventDefault)&&_.preventDefault(),(0,U.of)(!1))))}static{this.\u0275fac=function(o){return new(o||n)(e.\u0275\u0275inject(nn.HttpClient),e.\u0275\u0275inject($e.y))}}static{this.\u0275prov=e.\u0275\u0275defineInjectable({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();const wa=[{content:"s3:ObjectCreated:*",name:"s3:ObjectCreated:*"},{content:"s3:ObjectCreated:Put",name:"s3:ObjectCreated:Put"},{content:"s3:ObjectCreated:Copy",name:"s3:ObjectCreated:Copy"},{content:"s3:ObjectCreated:CompleteMultipartUpload",name:"s3:ObjectCreated:CompleteMultipartUpload"},{content:"s3:ObjectRemoved:*",name:"s3:ObjectRemoved:*"},{content:"s3:ObjectRemoved:Delete",name:"s3:ObjectRemoved:Delete"},{content:"s3:ObjectRemoved:DeleteMarkerCreated",name:"s3:ObjectRemoved:DeleteMarkerCreated"}];var Vn=function(n){return n.SELECT="-- Select key filter type --",n.PREFIX="prefix",n.SUFFIX="suffix",n.REGEX="regex",n}(Vn||{});const Bt={namePlaceholder:"e.g. images/",valuePlaceholder:"e.g. .jpg",nameHelper:"Choose a filter type (prefix or suffix) to specify which object keys trigger the notification",valueHelper:"Enter the prefix (e.g. images/) or suffix (e.g. .jpg) value for the S3 key filter"},Vt={namePlaceholder:"x-amz-meta-xxx...",valuePlaceholder:"e.g. my-custom-value",nameHelper:"Enter a metadata key name to identify the custom information",valueHelper:"Enter the metadata value that corresponds to the key"},Zt={namePlaceholder:"e.g. backup-status",valuePlaceholder:"e.g. completed",nameHelper:"Enter a tag key to categorize the S3 objects",valueHelper:"Enter the tag value that corresponds to the key"};var Ua=g(19271);const ka=(n,i,t,o,_,a,r,s)=>({type:n,controls:i,options:t,isDropdown:o,namePlaceholder:_,valuePlaceholder:a,nameHelper:r,valueHelper:s}),Zn=()=>({lg:1,md:1});function za(n,i){1&n&&(e.\u0275\u0275elementStart(0,"span"),e.\u0275\u0275i18n(1,9),e.\u0275\u0275elementEnd())}function Ha(n,i){1&n&&(e.\u0275\u0275elementStart(0,"span",33),e.\u0275\u0275elementContainerStart(1),e.\u0275\u0275i18n(2,10),e.\u0275\u0275elementContainerEnd(),e.\u0275\u0275elementEnd())}function Xa(n,i){1&n&&(e.\u0275\u0275elementStart(0,"span",33),e.\u0275\u0275i18n(1,11),e.\u0275\u0275elementEnd())}function Ba(n,i){if(1&n&&e.\u0275\u0275template(0,Ha,3,0,"span",32)(1,Xa,2,0,"span",32),2&n){const t=e.\u0275\u0275nextContext(),o=e.\u0275\u0275reference(7);e.\u0275\u0275property("ngIf",t.notificationForm.showError("id",o,"required")),e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf",t.notificationForm.showError("id",o,"duplicate"))}}function Va(n,i){1&n&&(e.\u0275\u0275elementStart(0,"option",34),e.\u0275\u0275text(1,"Loading... "),e.\u0275\u0275elementEnd())}function Za(n,i){if(1&n&&(e.\u0275\u0275elementStart(0,"option",26),e.\u0275\u0275i18n(1,12),e.\u0275\u0275elementEnd()),2&n){const t=i.$implicit;e.\u0275\u0275property("ngValue",t),e.\u0275\u0275advance(),e.\u0275\u0275i18nExp(t),e.\u0275\u0275i18nApply(1)}}function Ka(n,i){1&n&&(e.\u0275\u0275elementStart(0,"span",33),e.\u0275\u0275elementContainerStart(1),e.\u0275\u0275i18n(2,13),e.\u0275\u0275elementContainerEnd(),e.\u0275\u0275elementEnd())}function qa(n,i){if(1&n&&e.\u0275\u0275template(0,Ka,3,0,"span",32),2&n){const t=e.\u0275\u0275nextContext(),o=e.\u0275\u0275reference(7);e.\u0275\u0275property("ngIf",t.notificationForm.showError("topic",o,"required"))}}function ja(n,i){1&n&&e.\u0275\u0275elementContainer(0)}function Ya(n,i){if(1&n&&(e.\u0275\u0275elementContainerStart(0),e.\u0275\u0275template(1,ja,1,0,"ng-container",35),e.\u0275\u0275elementContainerEnd()),2&n){const t=i.$implicit,o=e.\u0275\u0275nextContext(),_=e.\u0275\u0275reference(33);e.\u0275\u0275advance(),e.\u0275\u0275property("ngTemplateOutlet",_)("ngTemplateOutletContext",e.\u0275\u0275pureFunction8(2,ka,t,o.filterControls[t],o.filterSettings[t].options,o.filterSettings[t].isDropdown,o.filterSettings[t].namePlaceholder,o.filterSettings[t].valuePlaceholder,o.filterSettings[t].nameHelper,o.filterSettings[t].valueHelper))}}function Qa(n,i){if(1&n&&(e.\u0275\u0275elementStart(0,"option",50),e.\u0275\u0275text(1),e.\u0275\u0275elementEnd()),2&n){const t=i.$implicit;e.\u0275\u0275property("value",t),e.\u0275\u0275advance(),e.\u0275\u0275textInterpolate(t)}}function Ja(n,i){if(1&n&&(e.\u0275\u0275elementContainerStart(0),e.\u0275\u0275elementStart(1,"cds-select",48),e.\u0275\u0275template(2,Qa,2,2,"option",49),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementContainerEnd()),2&n){const t=e.\u0275\u0275nextContext().index,o=e.\u0275\u0275nextContext(),_=o.type,a=o.nameHelper,r=e.\u0275\u0275nextContext();e.\u0275\u0275advance(),e.\u0275\u0275property("id",_+"-name-"+t)("helperText",a),e.\u0275\u0275advance(),e.\u0275\u0275property("ngForOf",r.s3KeyFilterValue)}}function er(n,i){if(1&n&&(e.\u0275\u0275elementStart(0,"cds-text-label",41),e.\u0275\u0275text(1," Name "),e.\u0275\u0275element(2,"input",51),e.\u0275\u0275elementEnd()),2&n){const t=e.\u0275\u0275nextContext().index,o=e.\u0275\u0275nextContext(),a=o.namePlaceholder,r=o.nameHelper;e.\u0275\u0275property("labelInputID",o.type+"-name-"+t)("helperText",r),e.\u0275\u0275advance(2),e.\u0275\u0275property("placeholder",a)}}function tr(n,i){if(1&n){const t=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"div",39)(1,"div",20)(2,"div",21),e.\u0275\u0275template(3,Ja,3,3,"ng-container",40)(4,er,3,3,"ng-template",null,5,e.\u0275\u0275templateRefExtractor),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(6,"div",21)(7,"cds-text-label",41),e.\u0275\u0275text(8," Value "),e.\u0275\u0275element(9,"input",42),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(10,"div",43)(11,"cds-icon-button",44),e.\u0275\u0275listener("click",function(){const _=e.\u0275\u0275restoreView(t).index,a=e.\u0275\u0275nextContext().type,r=e.\u0275\u0275nextContext();return e.\u0275\u0275resetView(r.addRow(a,_))}),e.\u0275\u0275namespaceSVG(),e.\u0275\u0275element(12,"svg",45),e.\u0275\u0275elementEnd()(),e.\u0275\u0275namespaceHTML(),e.\u0275\u0275elementStart(13,"div",43)(14,"cds-icon-button",46),e.\u0275\u0275listener("click",function(){const _=e.\u0275\u0275restoreView(t).index,a=e.\u0275\u0275nextContext().type,r=e.\u0275\u0275nextContext();return e.\u0275\u0275resetView(r.removeRow(a,_))}),e.\u0275\u0275namespaceSVG(),e.\u0275\u0275element(15,"svg",47),e.\u0275\u0275elementEnd()()()()}if(2&n){const t=i.index,o=e.\u0275\u0275reference(5),_=e.\u0275\u0275nextContext(),a=_.type,r=_.isDropdown,s=_.valuePlaceholder,c=_.valueHelper;e.\u0275\u0275property("formGroupName",t),e.\u0275\u0275advance(3),e.\u0275\u0275property("ngIf",r)("ngIfElse",o),e.\u0275\u0275advance(4),e.\u0275\u0275property("labelInputID",a+"-value-"+t)("helperText",c),e.\u0275\u0275advance(2),e.\u0275\u0275property("placeholder",s),e.\u0275\u0275advance(),e.\u0275\u0275property("columnNumbers",e.\u0275\u0275pureFunction0(8,Zn)),e.\u0275\u0275advance(3),e.\u0275\u0275property("columnNumbers",e.\u0275\u0275pureFunction0(9,Zn))}}function nr(n,i){if(1&n&&(e.\u0275\u0275elementStart(0,"h6"),e.\u0275\u0275i18n(1,14),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(2,"div",36)(3,"div",37),e.\u0275\u0275template(4,tr,16,10,"div",38),e.\u0275\u0275elementEnd()()),2&n){const t=i.type,o=i.controls,_=e.\u0275\u0275nextContext();e.\u0275\u0275advance(),e.\u0275\u0275i18nExp(_.typeLabels[t]),e.\u0275\u0275i18nApply(1),e.\u0275\u0275advance(),e.\u0275\u0275property("formGroup",_.notificationForm.get("filter")),e.\u0275\u0275advance(),e.\u0275\u0275property("formArrayName",t),e.\u0275\u0275advance(),e.\u0275\u0275property("ngForOf",o.controls)}}let or=(()=>{class n extends tt.g{get filterControls(){const t={};return this.filterTypes.forEach(o=>{t[o]=this.getFormArray(o)}),t}constructor(t,o,_=!1,a,r,s,c,u,p,T){super(),this.bucket=t,this.selectedNotification=o,this.editing=_,this.actionLabels=a,this.rgwBucketService=r,this.rgwTopicService=s,this.notificationService=c,this.fb=u,this.router=p,this.cdRef=T,this.eventOption=wa,this.s3KeyFilterValue=[],this.topics=[],this.topicArn=[],this.notificationList=[],this.filterTypes=["s3Key","s3Metadata","s3Tags"],this.typeLabels={s3Key:"S3 Key configuration",s3Metadata:"S3 Metadata configuration",s3Tags:"S3 Tags configuration"},this.filterSettings={s3Key:{options:null,isDropdown:!0,namePlaceholder:Bt.namePlaceholder,valuePlaceholder:Bt.valuePlaceholder,nameHelper:Bt.nameHelper,valueHelper:Bt.valueHelper},s3Metadata:{options:null,isDropdown:!1,namePlaceholder:Vt.namePlaceholder,valuePlaceholder:Vt.valuePlaceholder,nameHelper:Vt.nameHelper,valueHelper:Vt.valueHelper},s3Tags:{options:null,isDropdown:!1,namePlaceholder:Zt.namePlaceholder,valuePlaceholder:Zt.valuePlaceholder,nameHelper:Zt.nameHelper,valueHelper:Zt.valueHelper}}}ngOnInit(){this.editing=!!this.selectedNotification,this.s3KeyFilterValue=Object.values(Vn),this.filterSettings.s3Key.options=this.s3KeyFilterValue,this.createNotificationForm(),this.rgwBucketService.listNotification(this.bucket.bucket).subscribe({next:t=>{this.notificationList=t,this.getTopicName().then(()=>{this.editing&&this.selectedNotification&&(this.notification_id=this.selectedNotification.Id,this.notificationForm.get("id").disable(),this.patchNotificationForm(this.selectedNotification))})}})}getTopicName(){return new Promise((t,o)=>{this.rgwTopicService.listTopic().subscribe({next:_=>{this.topics=_,this.topicArn=_.map(a=>a.arn),t()},error:_=>o(_)})})}patchNotificationForm(t){this.cdRef.detectChanges(),this.notificationForm.patchValue({id:t.Id,topic:"object"==typeof t.Topic?t.Topic.arn:t.Topic,event:t.Event}),this.setFilterRules("s3Key",t.Filter?.S3Key?.FilterRule),this.setFilterRules("s3Metadata",t.Filter?.S3Metadata?.FilterRule),this.setFilterRules("s3Tags",t.Filter?.S3Tags?.FilterRule)}setFilterRules(t,o=[]){let _=this.getFormArray(t);_||(this.notificationForm.get("filter").setControl(t,this.fb.array([])),_=this.getFormArray(t)),_.clear(),o&&0!==o.length?o.forEach(a=>{_.push(this.fb.group({Name:[a.Name],Value:[a.Value]}))}):_.push(this.createNameValueGroup())}createNotificationForm(){this.notificationForm=this.fb.group({id:[null,[l.Validators.required,this.duplicateNotificationId.bind(this)]],topic:[null,[l.Validators.required]],event:[[],[]],filter:this.fb.group({s3Key:this.fb.array([this.createNameValueGroup()]),s3Metadata:this.fb.array([this.createNameValueGroup()]),s3Tags:this.fb.array([this.createNameValueGroup()])})})}duplicateNotificationId(t){const o=t.value?.trim();return o&&Array.isArray(this.notificationList)&&this.notificationList.some(a=>a.Id===o)?{duplicate:!0}:null}createNameValueGroup(){return this.fb.group({Name:[null],Value:[null]})}getFormArray(t){return this.notificationForm.get("filter")?.get(t)}getFiltersControls(t){return this.getFormArray(t)}addRow(t,o){this.getFormArray(t).insert(o+1,this.createNameValueGroup())}removeRow(t,o){const _=this.getFormArray(t);_&&_.length>1&&o>=0&&o<_.length?_.removeAt(o):1===_.length&&_.at(0).reset(),this.cdRef.detectChanges()}showInvalid(t){const o=this.notificationForm.get(t);return o?.invalid&&(o.dirty||o.touched)}onSubmit(){if(!this.notificationForm.valid)return this.notificationForm.markAllAsTouched(),void this.notificationForm.setErrors({cdSubmitButton:!0});const t=this.notificationForm.getRawValue(),o=r=>{const s=new Set;return r?.filter(c=>c.Name&&c.Value).filter(c=>!s.has(c.Name)&&(s.add(c.Name),!0))||[]},_=this.editing?"Bucket notification updated successfully":"Bucket notification created successfully",a={TopicConfiguration:{Id:t.id,Topic:t.topic,Event:t.event,Filter:{S3Key:{FilterRules:o(t.filter?.s3Key)},S3Metadata:{FilterRules:o(t.filter?.s3Metadata)},S3Tags:{FilterRules:o(t.filter?.s3Tags)}}}};this.rgwBucketService.setNotification(this.bucket.bucket,JSON.stringify(a),this.bucket.owner).subscribe({next:()=>{this.notificationService.show(w._.success,_)},error:r=>{this.notificationService.show(w._.error,r.message),this.notificationForm.setErrors({cdSubmitButton:!0})},complete:()=>{this.closeModal()}})}goToCreateNotification(){this.router.navigate(["rgw/notification/create"]),this.closeModal()}static{this.\u0275fac=function(o){return new(o||n)(e.\u0275\u0275directiveInject("bucket"),e.\u0275\u0275directiveInject("selectedNotification",8),e.\u0275\u0275directiveInject("editing",8),e.\u0275\u0275directiveInject(P.Ss),e.\u0275\u0275directiveInject(Le.c),e.\u0275\u0275directiveInject(an),e.\u0275\u0275directiveInject(ne.J),e.\u0275\u0275directiveInject(Ge.$),e.\u0275\u0275directiveInject(Q.Router),e.\u0275\u0275directiveInject(e.ChangeDetectorRef))}}static{this.\u0275cmp=e.\u0275\u0275defineComponent({type:n,selectors:[["cd-rgw-notification-form"]],features:[e.\u0275\u0275InheritDefinitionFeature],decls:34,vars:18,consts:()=>{let t,o,_,a,r,s,c,u,p,T,f,G,S,O,C,b;return t="Name...",o="Topic",_="Select a topic...",a="This topic will define and control the notification settings",r="Select event...",s="Choose the S3 event type that will trigger the notification, such as object creation or deletion",c=" " + "\ufffd0\ufffd" + " Notification configuration " + "\ufffd#3\ufffd" + "All fields are optional, except where marked required." + "\ufffd/#3\ufffd" + "",u="Topic Name " + "\ufffd#12\ufffd\ufffd/#12\ufffd" + "",p=" -- Select a topic -- ",T="Enter a unique notification name",f="This field is required.",G="The name is already in use. Please choose a different one",S=" " + "\ufffd0\ufffd" + " ",O="This field is required.",C="" + "\ufffd0\ufffd" + "",b="Name",[["formDir","ngForm"],["helpertext",""],["nameError",""],["topicError",""],["filterTemplate",""],["textInputName",""],c,u,p,T,f,G,S,O,C,["size","md",3,"overlaySelected","open"],[3,"closeSelect"],[3,"formAllFieldsRequired"],["cdsModalContent",""],["name","notificationForm","novalidate","",3,"formGroup"],["cdsRow","",1,"form-item","form-item-append"],["cdsCol",""],["labelInputID","name","cdRequiredField","Name",3,"invalid","invalidText","helperText"],["cdsText","","type","text","placeholder",t,"id","name","autoFocus","","formControlName","id",3,"invalid"],["id","topic","formControlName","topic","cdRequiredField","Topic","label",o,"placeholder",_,"helperText",a,3,"invalid","invalidText"],["value","",4,"ngIf"],[3,"ngValue"],[3,"ngValue",4,"ngFor","ngForOf"],["label","Event","type","multi","formControlName","event","placeholder",r,"itemValueKey","content","id","event","cdDynamicInputCombobox","","helperText",s,3,"updatedItems","items"],[1,"cd-header"],[4,"ngFor","ngForOf"],[3,"submitActionEvent","form","submitText","modalForm"],["class","invalid-feedback",4,"ngIf"],[1,"invalid-feedback"],["value",""],[4,"ngTemplateOutlet","ngTemplateOutletContext"],[3,"formGroup"],[3,"formArrayName"],[3,"formGroupName",4,"ngFor","ngForOf"],[3,"formGroupName"],[4,"ngIf","ngIfElse"],[3,"labelInputID","helperText"],["cdsText","","type","text","formControlName","Value",3,"placeholder"],["cdsCol","",1,"item-action-btn","spacing",3,"columnNumbers"],["kind","primary","size","sm",3,"click"],["cdsIcon","add","size","32",1,"cds--btn__icon"],["kind","danger","size","sm",3,"click"],["cdsIcon","trash-can","size","32",1,"cds--btn__icon"],["formControlName","Name","label",b,3,"id","helperText"],[3,"value",4,"ngFor","ngForOf"],[3,"value"],["cdsText","","type","text","formControlName","Name",3,"placeholder"]]},template:function(o,_){if(1&o){const a=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"cds-modal",15),e.\u0275\u0275listener("overlaySelected",function(){return e.\u0275\u0275restoreView(a),e.\u0275\u0275resetView(_.closeModal())}),e.\u0275\u0275elementStart(1,"cds-modal-header",16),e.\u0275\u0275listener("closeSelect",function(){return e.\u0275\u0275restoreView(a),e.\u0275\u0275resetView(_.closeModal())}),e.\u0275\u0275i18nStart(2,6),e.\u0275\u0275element(3,"cd-help-text",17),e.\u0275\u0275i18nEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementContainerStart(4),e.\u0275\u0275elementStart(5,"section",18)(6,"form",19,0)(8,"div",20)(9,"div",21)(10,"cds-text-label",22),e.\u0275\u0275i18nStart(11,7),e.\u0275\u0275element(12,"input",23),e.\u0275\u0275i18nEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275template(13,za,2,0,"ng-template",null,1,e.\u0275\u0275templateRefExtractor)(15,Ba,2,2,"ng-template",null,2,e.\u0275\u0275templateRefExtractor),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(17,"div",21)(18,"cds-select",24),e.\u0275\u0275template(19,Va,2,0,"option",25),e.\u0275\u0275elementStart(20,"option",26),e.\u0275\u0275i18n(21,8),e.\u0275\u0275elementEnd(),e.\u0275\u0275template(22,Za,2,2,"option",27),e.\u0275\u0275elementEnd(),e.\u0275\u0275template(23,qa,1,1,"ng-template",null,3,e.\u0275\u0275templateRefExtractor),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(25,"div",20)(26,"div",21)(27,"cds-combo-box",28),e.\u0275\u0275listener("updatedItems",function(s){return e.\u0275\u0275restoreView(a),e.\u0275\u0275resetView(_.eventOption=s)}),e.\u0275\u0275element(28,"cds-dropdown-list"),e.\u0275\u0275elementEnd()()(),e.\u0275\u0275elementStart(29,"cd-form-advanced-fieldset",29),e.\u0275\u0275template(30,Ya,2,11,"ng-container",30),e.\u0275\u0275elementEnd()()(),e.\u0275\u0275elementContainerEnd(),e.\u0275\u0275elementStart(31,"cd-form-button-panel",31),e.\u0275\u0275listener("submitActionEvent",function(){return e.\u0275\u0275restoreView(a),e.\u0275\u0275resetView(_.onSubmit())}),e.\u0275\u0275elementEnd()(),e.\u0275\u0275template(32,nr,5,4,"ng-template",null,4,e.\u0275\u0275templateRefExtractor)}if(2&o){const a=e.\u0275\u0275reference(14),r=e.\u0275\u0275reference(16),s=e.\u0275\u0275reference(24);e.\u0275\u0275property("open",_.open),e.\u0275\u0275advance(3),e.\u0275\u0275property("formAllFieldsRequired",!1),e.\u0275\u0275i18nExp(_.editing?"Edit":"Create"),e.\u0275\u0275i18nApply(2),e.\u0275\u0275advance(3),e.\u0275\u0275property("formGroup",_.notificationForm),e.\u0275\u0275advance(4),e.\u0275\u0275property("invalid",_.notificationForm.controls.id.invalid&&_.notificationForm.controls.id.dirty)("invalidText",r)("helperText",a),e.\u0275\u0275advance(2),e.\u0275\u0275property("invalid",_.notificationForm.controls.id.invalid&&_.notificationForm.controls.id.dirty),e.\u0275\u0275advance(6),e.\u0275\u0275property("invalid",_.notificationForm.controls.topic.invalid&&_.notificationForm.controls.topic.dirty)("invalidText",s),e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf",null===_.topicArn),e.\u0275\u0275advance(),e.\u0275\u0275property("ngValue",null),e.\u0275\u0275advance(2),e.\u0275\u0275property("ngForOf",_.topicArn),e.\u0275\u0275advance(5),e.\u0275\u0275property("items",_.eventOption),e.\u0275\u0275advance(3),e.\u0275\u0275property("ngForOf",_.filterTypes),e.\u0275\u0275advance(),e.\u0275\u0275property("form",_.notificationForm)("submitText",_.editing?_.actionLabels.EDIT:_.actionLabels.CREATE)("modalForm",!0)}},dependencies:[E.NgForOf,E.NgIf,E.NgTemplateOutlet,_e.e,ae.O,on.e,Y.S,oe.E,Qe.P,Ua.k,l.\u0275NgNoValidate,l.NgSelectOption,l.\u0275NgSelectMultipleOption,l.DefaultValueAccessor,l.NgControlStatus,l.NgControlStatusGroup,l.FormGroupDirective,l.FormControlName,l.FormGroupName,l.FormArrayName,d.Modal,d.ModalHeader,d.ModalContent,d.ColumnDirective,d.RowDirective,d.IconButton,d.IconDirective,d.TextInputLabelComponent,d.TextInput,d.ComboBox,d.DropdownList,d.Select,d.Option]})}}return n})();const _r=["filterTpl"],ir=["eventTpl"];function ar(n,i){if(1&n){const t=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementContainerStart(0),e.\u0275\u0275elementStart(1,"cd-table",6,2),e.\u0275\u0275listener("updateSelection",function(_){e.\u0275\u0275restoreView(t);const a=e.\u0275\u0275nextContext();return e.\u0275\u0275resetView(a.updateSelection(_))})("fetchData",function(){e.\u0275\u0275restoreView(t);const _=e.\u0275\u0275nextContext();return e.\u0275\u0275resetView(_.fetchData())}),e.\u0275\u0275element(3,"cd-table-actions",7),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementContainerEnd()}if(2&n){const t=i.ngIf,o=e.\u0275\u0275nextContext();e.\u0275\u0275advance(),e.\u0275\u0275property("data",t)("columns",o.columns),e.\u0275\u0275advance(2),e.\u0275\u0275property("permission",o.permission)("selection",o.selection)("tableActions",o.tableActions)}}function rr(n,i){if(1&n&&(e.\u0275\u0275elementStart(0,"div",11)(1,"cds-tag",12),e.\u0275\u0275text(2),e.\u0275\u0275elementEnd()()),2&n){const t=i.$implicit;e.\u0275\u0275property("cdsStack","horizontal"),e.\u0275\u0275advance(2),e.\u0275\u0275textInterpolate2("",t.Name,": ",t.Value,"")}}function lr(n,i){if(1&n&&(e.\u0275\u0275elementContainerStart(0),e.\u0275\u0275elementStart(1,"div",9),e.\u0275\u0275text(2),e.\u0275\u0275elementEnd(),e.\u0275\u0275template(3,rr,3,3,"div",10),e.\u0275\u0275element(4,"br"),e.\u0275\u0275elementContainerEnd()),2&n){const t=e.\u0275\u0275nextContext().$implicit;e.\u0275\u0275advance(2),e.\u0275\u0275textInterpolate1(" ",t.key,": "),e.\u0275\u0275advance(),e.\u0275\u0275property("ngForOf",t.value.FilterRule)}}function sr(n,i){if(1&n&&(e.\u0275\u0275elementContainerStart(0),e.\u0275\u0275template(1,lr,5,2,"ng-container",5),e.\u0275\u0275elementContainerEnd()),2&n){const t=i.$implicit;e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf",null==t.value||null==t.value.FilterRule?null:t.value.FilterRule.length)}}function cr(n,i){if(1&n&&(e.\u0275\u0275elementContainerStart(0),e.\u0275\u0275template(1,sr,2,1,"ng-container",8),e.\u0275\u0275pipe(2,"keyvalue"),e.\u0275\u0275elementContainerEnd()),2&n){const t=e.\u0275\u0275nextContext().data.value;e.\u0275\u0275advance(),e.\u0275\u0275property("ngForOf",e.\u0275\u0275pipeBind1(2,1,t))}}function dr(n,i){1&n&&e.\u0275\u0275template(0,cr,3,3,"ng-container",5),2&n&&e.\u0275\u0275property("ngIf",i.data.value)}function ur(n,i){if(1&n&&(e.\u0275\u0275elementStart(0,"cds-tag",14),e.\u0275\u0275text(1),e.\u0275\u0275elementEnd()),2&n){const t=i.$implicit;e.\u0275\u0275advance(),e.\u0275\u0275textInterpolate1(" ",t," ")}}function pr(n,i){if(1&n&&(e.\u0275\u0275elementContainerStart(0),e.\u0275\u0275template(1,ur,2,1,"cds-tag",13),e.\u0275\u0275elementContainerEnd()),2&n){const t=e.\u0275\u0275nextContext().data.value;e.\u0275\u0275advance(),e.\u0275\u0275property("ngForOf",t)}}function mr(n,i){if(1&n&&e.\u0275\u0275template(0,pr,2,1,"ng-container",5),2&n){const t=i.data.value;e.\u0275\u0275property("ngIf",t&&t.length)}}let gr=(()=>{class n extends Je.D{constructor(t,o,_,a,r){super(),this.rgwBucketService=t,this.authStorageService=o,this.actionLabels=_,this.modalService=a,this.notificationService=r,this.updateBucketDetails=new e.EventEmitter,this.columns=[],this.selection=new Oe.y,this.subject=new U.BehaviorSubject([])}ngOnInit(){this.permission=this.authStorageService.getPermissions().rgw,this.columns=[{name:"Name",prop:"Id",flexGrow:2},{name:"Topic",prop:"Topic",flexGrow:1,cellTransformation:He.x.copy},{name:"Event",prop:"Event",flexGrow:1,cellTemplate:this.eventTpl},{name:"Filter",prop:"Filter",flexGrow:1,cellTemplate:this.filterTpl}],this.tableActions=[{permission:"create",icon:y.FI.add,click:()=>this.openNotificationModal(this.actionLabels.CREATE),name:this.actionLabels.CREATE},{permission:"update",icon:y.FI.edit,disable:()=>this.selection.hasMultiSelection,click:()=>this.openNotificationModal(this.actionLabels.EDIT),name:this.actionLabels.EDIT},{permission:"delete",icon:y.FI.destroy,click:()=>this.deleteAction(),disable:()=>!this.selection.hasSelection,name:this.actionLabels.DELETE,canBePrimary:a=>a.hasMultiSelection}],this.notification$=this.subject.pipe((0,K.switchMap)(()=>this.rgwBucketService.listNotification(this.bucket.bucket).pipe((0,K.catchError)(a=>(this.context.error(a),(0,U.of)(null))))))}fetchData(){this.subject.next([])}openNotificationModal(t){this.modalService.show(or,{bucket:this.bucket,selectedNotification:this.selection.first(),editing:t===this.actionLabels.EDIT})?.close?.subscribe(()=>this.updateBucketDetails.emit())}updateSelection(t){this.selection=t}deleteAction(){const t=this.selection.selected.map(o=>o.Id);this.modalRef=this.modalService.show(Ue.D,{itemDescription:"Notification",itemNames:t,actionDescription:"delete",submitAction:()=>this.submitDeleteNotifications(t)})}submitDeleteNotifications(t){this.rgwBucketService.deleteNotification(this.bucket.bucket,t.join(",")).subscribe({next:()=>{this.notificationService.show(w._.success,"Notifications deleted successfully."),this.modalService.dismissAll()},error:()=>{this.notificationService.show(w._.success,"Failed to delete notifications. Please try again.")}}),this.modalRef?.close?.subscribe(()=>this.updateBucketDetails.emit())}static{this.\u0275fac=function(o){return new(o||n)(e.\u0275\u0275directiveInject(Le.c),e.\u0275\u0275directiveInject(be.v),e.\u0275\u0275directiveInject(P.Ss),e.\u0275\u0275directiveInject(he.V),e.\u0275\u0275directiveInject(ne.J))}}static{this.\u0275cmp=e.\u0275\u0275defineComponent({type:n,selectors:[["cd-rgw-bucket-notification-list"]],viewQuery:function(o,_){if(1&o&&(e.\u0275\u0275viewQuery(re.O,7),e.\u0275\u0275viewQuery(_r,7),e.\u0275\u0275viewQuery(ir,7)),2&o){let a;e.\u0275\u0275queryRefresh(a=e.\u0275\u0275loadQuery())&&(_.table=a.first),e.\u0275\u0275queryRefresh(a=e.\u0275\u0275loadQuery())&&(_.filterTpl=a.first),e.\u0275\u0275queryRefresh(a=e.\u0275\u0275loadQuery())&&(_.eventTpl=a.first)}},inputs:{bucket:"bucket"},outputs:{updateBucketDetails:"updateBucketDetails"},features:[e.\u0275\u0275ProvidersFeature([{provide:se.E,useValue:new se.E("rgw/bucket")}]),e.\u0275\u0275InheritDefinitionFeature],decls:10,vars:3,consts:()=>{let t;return t=" Notification Configuration " + "\ufffd#3\ufffd" + " Configure bucket notification to trigger alerts for specific events, such as object creation or transitions, based on prefixes or tags. " + "\ufffd/#3\ufffd" + "",[["filterTpl",""],["eventTpl",""],["table",""],t,[1,"cd-header"],[4,"ngIf"],["columnMode","flex","selectionType","single","identifier","Id",3,"updateSelection","fetchData","data","columns"],[1,"table-actions",3,"permission","selection","tableActions"],[4,"ngFor","ngForOf"],[1,"cds--label"],[3,"cdsStack",4,"ngFor","ngForOf"],[3,"cdsStack"],["size","sm",1,"badge-background-gray"],["size","sm","class","badge-background-primary",4,"ngFor","ngForOf"],["size","sm",1,"badge-background-primary"]]},template:function(o,_){1&o&&(e.\u0275\u0275elementStart(0,"fieldset")(1,"legend",4),e.\u0275\u0275i18nStart(2,3),e.\u0275\u0275element(3,"cd-help-text"),e.\u0275\u0275i18nEnd(),e.\u0275\u0275elementEnd()(),e.\u0275\u0275template(4,ar,4,5,"ng-container",5),e.\u0275\u0275pipe(5,"async"),e.\u0275\u0275template(6,dr,1,1,"ng-template",null,0,e.\u0275\u0275templateRefExtractor)(8,mr,1,1,"ng-template",null,1,e.\u0275\u0275templateRefExtractor)),2&o&&(e.\u0275\u0275advance(4),e.\u0275\u0275property("ngIf",e.\u0275\u0275pipeBind1(5,1,_.notification$)))},dependencies:[E.NgForOf,E.NgIf,ae.O,re.O,De.j,d.Tag,d.StackDirective,E.AsyncPipe,E.KeyValuePipe],styles:[".cds--type-mono{margin-right:.25rem}"]})}}return n})();var Er=g(71138);let Rr=(()=>{class n{constructor(){}format(t,o=null,_=2,a=0){if(!t)return null;let r="";"string"==typeof t&&(t=JSON.parse(t));for(let s in t)if(t.hasOwnProperty(s)){const c=t[s],u=" ".repeat(a);if(o){const[p,T]=Object.entries(o)[0];s===p&&(s=T)}Array.isArray(c)?c.forEach(p=>{r+=`${u}<${s}>\n`+this.format(p,o,_,a+_)+`${u}</${s}>\n`}):r+="object"==typeof c?`${u}<${s}>\n`+this.format(c,o,_,a+_)+`${u}</${s}>\n`:`${u}<${s}>${c}</${s}>\n`}return r}static{this.\u0275fac=function(o){return new(o||n)}}static{this.\u0275prov=e.\u0275\u0275defineInjectable({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})(),Cr=(()=>{class n{constructor(t){this.jsonToXmlService=t}transform(t,o={},_="json"){return"json"===_&&(t=this.jsonToXmlService.format(t,o)),t}static{this.\u0275fac=function(o){return new(o||n)(e.\u0275\u0275directiveInject(Rr,16))}}static{this.\u0275pipe=e.\u0275\u0275definePipe({name:"xml",type:n,pure:!0})}}return n})();const Kn=n=>({active:n}),fr=()=>({Rules:"Rule"});function Sr(n,i){1&n&&(e.\u0275\u0275elementStart(0,"td"),e.\u0275\u0275i18n(1,18),e.\u0275\u0275elementEnd())}function Fr(n,i){if(1&n&&(e.\u0275\u0275elementStart(0,"td"),e.\u0275\u0275text(1),e.\u0275\u0275pipe(2,"dimless"),e.\u0275\u0275elementEnd()),2&n){const t=e.\u0275\u0275nextContext(4);e.\u0275\u0275advance(),e.\u0275\u0275textInterpolate1(" ",e.\u0275\u0275pipeBind1(2,1,t.selection.bucket_quota.max_size)," ")}}function Mr(n,i){1&n&&(e.\u0275\u0275elementStart(0,"td"),e.\u0275\u0275i18n(1,19),e.\u0275\u0275elementEnd())}function Pr(n,i){if(1&n&&(e.\u0275\u0275elementStart(0,"td"),e.\u0275\u0275text(1),e.\u0275\u0275elementEnd()),2&n){const t=e.\u0275\u0275nextContext(4);e.\u0275\u0275advance(),e.\u0275\u0275textInterpolate1(" ",t.selection.bucket_quota.max_objects," ")}}function Ir(n,i){if(1&n&&(e.\u0275\u0275elementContainerStart(0),e.\u0275\u0275elementStart(1,"tr")(2,"td",45),e.\u0275\u0275i18n(3,16),e.\u0275\u0275elementEnd(),e.\u0275\u0275template(4,Sr,2,0,"td",33)(5,Fr,3,3,"td",33),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(6,"tr")(7,"td",45),e.\u0275\u0275i18n(8,17),e.\u0275\u0275elementEnd(),e.\u0275\u0275template(9,Mr,2,0,"td",33)(10,Pr,2,1,"td",33),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementContainerEnd()),2&n){const t=e.\u0275\u0275nextContext(3);e.\u0275\u0275advance(4),e.\u0275\u0275property("ngIf",t.selection.bucket_quota.max_size<=-1),e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf",t.selection.bucket_quota.max_size>-1),e.\u0275\u0275advance(4),e.\u0275\u0275property("ngIf",t.selection.bucket_quota.max_objects<=-1),e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf",t.selection.bucket_quota.max_objects>-1)}}function Or(n,i){if(1&n&&(e.\u0275\u0275elementContainerStart(0),e.\u0275\u0275elementStart(1,"tr")(2,"td",45),e.\u0275\u0275i18n(3,20),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(4,"td"),e.\u0275\u0275text(5),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(6,"tr")(7,"td",45),e.\u0275\u0275i18n(8,21),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(9,"td"),e.\u0275\u0275text(10),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementContainerEnd()),2&n){const t=e.\u0275\u0275nextContext(3);e.\u0275\u0275advance(5),e.\u0275\u0275textInterpolate(t.selection.lock_mode),e.\u0275\u0275advance(5),e.\u0275\u0275textInterpolate(t.selection.lock_retention_period_days)}}function Gr(n,i){if(1&n&&(e.\u0275\u0275elementStart(0,"tr")(1,"td",43),e.\u0275\u0275i18n(2,23),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(3,"td",44),e.\u0275\u0275text(4),e.\u0275\u0275elementEnd()()),2&n){const t=i.$implicit;e.\u0275\u0275advance(2),e.\u0275\u0275i18nExp(t.key),e.\u0275\u0275i18nApply(2),e.\u0275\u0275advance(2),e.\u0275\u0275textInterpolate(t.value)}}function Nr(n,i){if(1&n&&(e.\u0275\u0275elementContainerStart(0),e.\u0275\u0275elementStart(1,"legend"),e.\u0275\u0275i18n(2,22),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(3,"table",48)(4,"tbody"),e.\u0275\u0275template(5,Gr,5,2,"tr",49),e.\u0275\u0275pipe(6,"keyvalue"),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementContainerEnd()),2&n){const t=e.\u0275\u0275nextContext(3);e.\u0275\u0275advance(5),e.\u0275\u0275property("ngForOf",e.\u0275\u0275pipeBind1(6,1,t.selection.tagset))}}function Ar(n,i){if(1&n&&(e.\u0275\u0275elementContainerStart(0),e.\u0275\u0275element(1,"cd-rgw-rate-limit-details",50),e.\u0275\u0275elementContainerEnd()),2&n){const t=e.\u0275\u0275nextContext(3);e.\u0275\u0275advance(),e.\u0275\u0275property("rateLimitConfig",t.bucketRateLimit)("type","bucket")}}function hr(n,i){if(1&n&&(e.\u0275\u0275elementStart(0,"table",42)(1,"tbody")(2,"tr")(3,"td",43),e.\u0275\u0275i18n(4,5),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(5,"td",44),e.\u0275\u0275text(6),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(7,"tr")(8,"td",45),e.\u0275\u0275i18n(9,6),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(10,"td"),e.\u0275\u0275text(11),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(12,"tr")(13,"td",45),e.\u0275\u0275i18n(14,7),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(15,"td"),e.\u0275\u0275text(16),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(17,"tr")(18,"td",45),e.\u0275\u0275i18n(19,8),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(20,"td"),e.\u0275\u0275text(21),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(22,"tr")(23,"td",45),e.\u0275\u0275i18n(24,9),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(25,"td"),e.\u0275\u0275text(26),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(27,"tr")(28,"td",45),e.\u0275\u0275i18n(29,10),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(30,"td"),e.\u0275\u0275text(31),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(32,"tr")(33,"td",45),e.\u0275\u0275i18n(34,11),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(35,"td"),e.\u0275\u0275text(36),e.\u0275\u0275pipe(37,"cdDate"),e.\u0275\u0275elementEnd()()()(),e.\u0275\u0275elementStart(38,"div")(39,"legend"),e.\u0275\u0275i18n(40,12),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(41,"table",46)(42,"tbody")(43,"tr")(44,"td",43),e.\u0275\u0275i18n(45,13),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(46,"td",44),e.\u0275\u0275text(47),e.\u0275\u0275pipe(48,"booleanText"),e.\u0275\u0275elementEnd()(),e.\u0275\u0275template(49,Ir,11,4,"ng-container",33),e.\u0275\u0275elementEnd()()(),e.\u0275\u0275elementStart(50,"legend"),e.\u0275\u0275i18n(51,14),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(52,"table",47)(53,"tbody")(54,"tr")(55,"td",43),e.\u0275\u0275i18n(56,15),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(57,"td",44),e.\u0275\u0275text(58),e.\u0275\u0275pipe(59,"booleanText"),e.\u0275\u0275elementEnd()(),e.\u0275\u0275template(60,Or,11,2,"ng-container",33),e.\u0275\u0275elementEnd()(),e.\u0275\u0275template(61,Nr,7,3,"ng-container",33),e.\u0275\u0275pipe(62,"keyvalue"),e.\u0275\u0275template(63,Ar,2,2,"ng-container",33)),2&n){let t;const o=e.\u0275\u0275nextContext(2);e.\u0275\u0275advance(6),e.\u0275\u0275textInterpolate(o.selection.versioning),e.\u0275\u0275advance(5),e.\u0275\u0275textInterpolate(o.selection.encryption),e.\u0275\u0275advance(5),e.\u0275\u0275textInterpolate(o.replicationStatus),e.\u0275\u0275advance(5),e.\u0275\u0275textInterpolate(o.selection.mfa_delete),e.\u0275\u0275advance(5),e.\u0275\u0275textInterpolate(o.selection.index_type),e.\u0275\u0275advance(5),e.\u0275\u0275textInterpolate(o.selection.placement_rule),e.\u0275\u0275advance(5),e.\u0275\u0275textInterpolate(e.\u0275\u0275pipeBind1(37,13,o.selection.mtime)),e.\u0275\u0275advance(11),e.\u0275\u0275textInterpolate(e.\u0275\u0275pipeBind1(48,15,o.selection.bucket_quota.enabled)),e.\u0275\u0275advance(2),e.\u0275\u0275property("ngIf",o.selection.bucket_quota.enabled),e.\u0275\u0275advance(9),e.\u0275\u0275textInterpolate(e.\u0275\u0275pipeBind1(59,17,o.selection.lock_enabled)),e.\u0275\u0275advance(2),e.\u0275\u0275property("ngIf",o.selection.lock_enabled),e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf",null==(t=e.\u0275\u0275pipeBind1(62,19,o.selection.tagset))?null:t.length),e.\u0275\u0275advance(2),e.\u0275\u0275property("ngIf",!!o.bucketRateLimit)}}function br(n,i){if(1&n){const t=e.\u0275\u0275getCurrentView();e.\u0275\u0275i18nStart(0,25,1),e.\u0275\u0275elementStart(1,"div",55)(2,"button",56),e.\u0275\u0275listener("click",function(){e.\u0275\u0275restoreView(t);const _=e.\u0275\u0275nextContext(3);return e.\u0275\u0275resetView(_.updateLifecycleFormatTo("json"))}),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(3,"button",56),e.\u0275\u0275listener("click",function(){e.\u0275\u0275restoreView(t);const _=e.\u0275\u0275nextContext(3);return e.\u0275\u0275resetView(_.updateLifecycleFormatTo("xml"))}),e.\u0275\u0275elementEnd()(),e.\u0275\u0275i18nEnd()}if(2&n){const t=e.\u0275\u0275nextContext(3);e.\u0275\u0275advance(2),e.\u0275\u0275property("ngClass",e.\u0275\u0275pureFunction1(2,Kn,"json"===t.lifecycleFormat)),e.\u0275\u0275advance(),e.\u0275\u0275property("ngClass",e.\u0275\u0275pureFunction1(4,Kn,"xml"===t.lifecycleFormat))}}function vr(n,i){if(1&n&&(e.\u0275\u0275elementStart(0,"cds-code-snippet",57),e.\u0275\u0275text(1),e.\u0275\u0275pipe(2,"json"),e.\u0275\u0275elementEnd()),2&n){const t=e.\u0275\u0275nextContext(3);e.\u0275\u0275advance(),e.\u0275\u0275textInterpolate1(" ",e.\u0275\u0275pipeBind1(2,1,t.selection.lifecycle)," ")}}function Lr(n,i){if(1&n&&(e.\u0275\u0275elementStart(0,"cds-code-snippet",57),e.\u0275\u0275text(1),e.\u0275\u0275pipe(2,"xml"),e.\u0275\u0275elementEnd()),2&n){const t=e.\u0275\u0275nextContext(3);e.\u0275\u0275advance(),e.\u0275\u0275textInterpolate1(" ",e.\u0275\u0275pipeBind2(2,1,t.selection.lifecycle,e.\u0275\u0275pureFunction0(4,fr))||"-"," ")}}function yr(n,i){if(1&n&&(e.\u0275\u0275elementStart(0,"div",61),e.\u0275\u0275text(1),e.\u0275\u0275elementEnd()),2&n){const t=e.\u0275\u0275nextContext(4);e.\u0275\u0275advance(),e.\u0275\u0275textInterpolate(null==t.lifecycleProgress?null:t.lifecycleProgress.started)}}function $r(n,i){if(1&n&&(e.\u0275\u0275elementStart(0,"tr")(1,"td",43),e.\u0275\u0275i18n(2,32),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(3,"td")(4,"cds-tooltip",58)(5,"cds-tag",59),e.\u0275\u0275text(6),e.\u0275\u0275elementEnd()(),e.\u0275\u0275template(7,yr,2,1,"div",60),e.\u0275\u0275elementEnd()()),2&n){let t,o;const _=e.\u0275\u0275nextContext(3);e.\u0275\u0275advance(4),e.\u0275\u0275property("description",null==(t=_.lifecycleProgressMap.get(_.lifecycleProgress.status))?null:t.description)("align","top"),e.\u0275\u0275advance(),e.\u0275\u0275property("type",null==(o=_.lifecycleProgressMap.get(_.lifecycleProgress.status))?null:o.color),e.\u0275\u0275advance(),e.\u0275\u0275textInterpolate1(" ",_.lifecycleProgress.status," "),e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf","UNINITIAL"!==(null==_.lifecycleProgress?null:_.lifecycleProgress.status))}}function Dr(n,i){if(1&n&&(e.\u0275\u0275elementStart(0,"div",51)(1,"table",48)(2,"tbody")(3,"tr")(4,"td",43),e.\u0275\u0275i18n(5,24),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(6,"td")(7,"pre"),e.\u0275\u0275text(8),e.\u0275\u0275pipe(9,"json"),e.\u0275\u0275elementEnd()()(),e.\u0275\u0275elementStart(10,"tr")(11,"td",43),e.\u0275\u0275i18nStart(12,25),e.\u0275\u0275template(13,br,4,6,"div",52),e.\u0275\u0275pipe(14,"json"),e.\u0275\u0275i18nEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(15,"td"),e.\u0275\u0275template(16,vr,3,3,"cds-code-snippet",53)(17,Lr,3,5,"cds-code-snippet",53),e.\u0275\u0275elementEnd()(),e.\u0275\u0275template(18,$r,8,5,"tr",33),e.\u0275\u0275elementStart(19,"tr")(20,"td",43),e.\u0275\u0275i18n(21,26),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(22,"td")(23,"pre"),e.\u0275\u0275text(24),e.\u0275\u0275pipe(25,"json"),e.\u0275\u0275elementEnd()()(),e.\u0275\u0275elementStart(26,"tr")(27,"td",43),e.\u0275\u0275i18n(28,27),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(29,"td")(30,"table",54)(31,"thead")(32,"tr"),e.\u0275\u0275i18nStart(33,28),e.\u0275\u0275element(34,"th")(35,"th"),e.\u0275\u0275i18nEnd(),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(36,"tbody")(37,"tr"),e.\u0275\u0275i18nStart(38,29),e.\u0275\u0275element(39,"td")(40,"td"),e.\u0275\u0275i18nEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(41,"tr"),e.\u0275\u0275i18nStart(42,30),e.\u0275\u0275element(43,"td")(44,"td"),e.\u0275\u0275i18nEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(45,"tr"),e.\u0275\u0275i18nStart(46,31),e.\u0275\u0275element(47,"td")(48,"td"),e.\u0275\u0275i18nEnd(),e.\u0275\u0275elementEnd()()()()()()()()),2&n){const t=e.\u0275\u0275nextContext(2);e.\u0275\u0275advance(8),e.\u0275\u0275textInterpolate(e.\u0275\u0275pipeBind1(9,9,t.selection.bucket_policy)),e.\u0275\u0275advance(5),e.\u0275\u0275property("ngIf","{}"!==e.\u0275\u0275pipeBind1(14,11,t.selection.lifecycle)),e.\u0275\u0275advance(3),e.\u0275\u0275property("ngIf","json"===t.lifecycleFormat),e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf","xml"===t.lifecycleFormat),e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf",(null==t.selection.lifecycle_progress?null:t.selection.lifecycle_progress.length)>0),e.\u0275\u0275advance(6),e.\u0275\u0275textInterpolate(e.\u0275\u0275pipeBind1(25,13,t.selection.replication)),e.\u0275\u0275advance(16),e.\u0275\u0275i18nExp(t.aclPermissions.Owner||"-"),e.\u0275\u0275i18nApply(38),e.\u0275\u0275advance(4),e.\u0275\u0275i18nExp(t.aclPermissions.AllUsers||"-"),e.\u0275\u0275i18nApply(42),e.\u0275\u0275advance(4),e.\u0275\u0275i18nExp(t.aclPermissions.AuthenticatedUsers||"-"),e.\u0275\u0275i18nApply(46)}}function Wr(n,i){if(1&n){const t=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"cd-rgw-bucket-lifecycle-list",62),e.\u0275\u0275listener("updateBucketDetails",function(){e.\u0275\u0275restoreView(t);const _=e.\u0275\u0275nextContext(2);return e.\u0275\u0275resetView(_.updateBucketDetails(_.extractLifecycleDetails.bind(_)))}),e.\u0275\u0275elementEnd()}if(2&n){const t=e.\u0275\u0275nextContext(2);e.\u0275\u0275property("bucket",t.selection)}}function xr(n,i){if(1&n&&e.\u0275\u0275element(0,"cd-rgw-bucket-notification-list",63),2&n){const t=e.\u0275\u0275nextContext(2);e.\u0275\u0275property("bucket",t.selection)}}function wr(n,i){if(1&n&&(e.\u0275\u0275elementContainerStart(0),e.\u0275\u0275elementStart(1,"nav",34,0),e.\u0275\u0275elementContainerStart(3,35),e.\u0275\u0275elementStart(4,"a",36),e.\u0275\u0275i18n(5,1),e.\u0275\u0275elementEnd(),e.\u0275\u0275template(6,hr,64,21,"ng-template",37),e.\u0275\u0275elementContainerEnd(),e.\u0275\u0275elementContainerStart(7,38),e.\u0275\u0275elementStart(8,"a",36),e.\u0275\u0275i18n(9,2),e.\u0275\u0275elementEnd(),e.\u0275\u0275template(10,Dr,49,15,"ng-template",37),e.\u0275\u0275elementContainerEnd(),e.\u0275\u0275elementContainerStart(11,39),e.\u0275\u0275elementStart(12,"a",36),e.\u0275\u0275i18n(13,3),e.\u0275\u0275elementEnd(),e.\u0275\u0275template(14,Wr,1,1,"ng-template",37),e.\u0275\u0275elementContainerEnd(),e.\u0275\u0275elementContainerStart(15,40),e.\u0275\u0275elementStart(16,"a",36),e.\u0275\u0275i18n(17,4),e.\u0275\u0275elementEnd(),e.\u0275\u0275template(18,xr,1,1,"ng-template",37),e.\u0275\u0275elementContainerEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275element(19,"div",41),e.\u0275\u0275elementContainerEnd()),2&n){const t=e.\u0275\u0275reference(2);e.\u0275\u0275advance(19),e.\u0275\u0275property("ngbNavOutlet",t)}}let Ur=(()=>{class n{constructor(t,o){this.rgwBucketService=t,this.cd=o,this.lifecycleProgressMap=new Map([["UNINITIAL",{description:"The process has not run yet",color:"cool-gray"}],["PROCESSING",{description:"The process is currently running",color:"cyan"}],["COMPLETE",{description:"The process has completed",color:"green"}]]),this.lifecycleFormat="json",this.aclPermissions={},this.replicationStatus="Disabled"}ngOnChanges(){this.updateBucketDetails(this.extraxtDetailsfromResponse.bind(this))}parseXmlAcl(t,o){const _=new Sn.Parser({explicitArray:!1,trim:!0});let a={Owner:["-"],AllUsers:["-"],AuthenticatedUsers:["-"]};return _.parseString(t,(r,s)=>{if(r)return null;const c=s.AccessControlPolicy.AccessControlList.Grant;if(Array.isArray(c))for(let u=0;u<c.length;u++){const p=c[u];if(p?.Grantee?.URI){const T=p.Grantee.URI.split("/").pop();a[T].includes("-")?a[T]=[p?.Permission]:a[T].push(p?.Permission)}p?.Grantee?.ID&&o===p?.Grantee?.ID&&(a.Owner=p?.Permission)}else c?.Grantee?.ID&&o===c?.Grantee?.ID&&(a.Owner=c?.Permission)}),a}updateBucketDetails(t){this.selection&&this.rgwBucketService.get(this.selection.bid).subscribe(o=>{o.lock_retention_period_days=this.rgwBucketService.getLockDays(o),this.selection=o,t()})}extraxtDetailsfromResponse(){this.aclPermissions=this.parseXmlAcl(this.selection.acl,this.selection.owner),this.selection.replication?.Rule?.Status&&(this.replicationStatus=this.selection.replication?.Rule?.Status),this.rgwBucketService.getBucketRateLimit(this.selection.bid).subscribe(t=>{t&&void 0!==t.bucket_ratelimit&&(this.bucketRateLimit=t.bucket_ratelimit)}),this.extractLifecycleDetails()}extractLifecycleDetails(){"json"===this.lifecycleFormat&&!this.selection.lifecycle&&(this.selection.lifecycle={}),this.selection.lifecycle_progress?.length>0&&this.selection.lifecycle_progress.forEach(t=>{t.bucket.includes(this.selection.bucket)&&(this.lifecycleProgress=t)})}updateLifecycleFormatTo(t){this.lifecycleFormat=t,this.cd.detectChanges()}static{this.\u0275fac=function(o){return new(o||n)(e.\u0275\u0275directiveInject(Le.c),e.\u0275\u0275directiveInject(e.ChangeDetectorRef))}}static{this.\u0275cmp=e.\u0275\u0275defineComponent({type:n,selectors:[["cd-rgw-bucket-details"]],inputs:{selection:"selection"},features:[e.\u0275\u0275NgOnChangesFeature],decls:1,vars:1,consts:()=>{let t,o,_,a,r,s,c,u,p,T,f,G,S,O,C,b,N,k,z,$,X,B,V,Z,F,I,te,J,j,ee,D,ie;return t="Details",o="Policies",_="Tiering",a="Notification",r="Versioning",s="Encryption",c="Replication",u="MFA Delete",p="Index type",T="Placement rule",f="Last modification time",G="Bucket quota",S="Enabled",O="Locking",C="Enabled",b="Maximum size",N="Maximum objects",k="Unlimited",z="Unlimited",$="Mode",X="Days",B="Tags",V="" + "\ufffd0\ufffd" + "",Z="Bucket policy",F="Lifecycle " + "\ufffd*13:1\ufffd\ufffd#1:1\ufffd" + "" + "\ufffd#2:1\ufffd" + " JSON " + "[\ufffd/#2:1\ufffd|\ufffd/#3:1\ufffd]" + "" + "\ufffd#3:1\ufffd" + " XML " + "[\ufffd/#2:1\ufffd|\ufffd/#3:1\ufffd]" + "" + "\ufffd/#1:1\ufffd\ufffd/*13:1\ufffd" + "",F=e.\u0275\u0275i18nPostprocess(F),I="Replication policy",te="ACL",J="" + "[\ufffd#34\ufffd|\ufffd#35\ufffd]" + "Grantee" + "[\ufffd/#34\ufffd|\ufffd/#35\ufffd]" + "" + "[\ufffd#34\ufffd|\ufffd#35\ufffd]" + "Permissions" + "[\ufffd/#34\ufffd|\ufffd/#35\ufffd]" + "",J=e.\u0275\u0275i18nPostprocess(J),j="" + "[\ufffd#39\ufffd|\ufffd#40\ufffd]" + "Bucket Owner" + "[\ufffd/#39\ufffd|\ufffd/#40\ufffd]" + "" + "[\ufffd#39\ufffd|\ufffd#40\ufffd]" + "" + "\ufffd0\ufffd" + "" + "[\ufffd/#39\ufffd|\ufffd/#40\ufffd]" + "",j=e.\u0275\u0275i18nPostprocess(j),ee="" + "[\ufffd#43\ufffd|\ufffd#44\ufffd]" + "Everyone" + "[\ufffd/#43\ufffd|\ufffd/#44\ufffd]" + "" + "[\ufffd#43\ufffd|\ufffd#44\ufffd]" + "" + "\ufffd0\ufffd" + "" + "[\ufffd/#43\ufffd|\ufffd/#44\ufffd]" + "",ee=e.\u0275\u0275i18nPostprocess(ee),D="" + "[\ufffd#47\ufffd|\ufffd#48\ufffd]" + "Authenticated users group" + "[\ufffd/#47\ufffd|\ufffd/#48\ufffd]" + "" + "[\ufffd#47\ufffd|\ufffd#48\ufffd]" + "" + "\ufffd0\ufffd" + "" + "[\ufffd/#47\ufffd|\ufffd/#48\ufffd]" + "",D=e.\u0275\u0275i18nPostprocess(D),ie=" Lifecycle progress ",[["nav","ngbNav"],t,o,_,a,r,s,c,u,p,T,f,G,S,O,C,b,N,k,z,$,X,B,V,Z,F,I,te,J,j,ee,D,ie,[4,"ngIf"],["ngbNav","","cdStatefulTab","rgw-bucket-details",1,"nav-tabs"],["ngbNavItem","details"],["ngbNavLink",""],["ngbNavContent",""],["ngbNavItem","permissions"],["ngbNavItem","tiering"],["ngbNavItem","notification"],[3,"ngbNavOutlet"],["data-testid","rgw-bucket-details",1,"cds--data-table--sort","cds--data-table--no-border","cds--data-table","cds--data-table--md"],[1,"bold","w-25"],[1,"w-75"],[1,"bold"],["data-testid","rgw-bucket-quota-details",1,"cds--data-table--sort","cds--data-table--no-border","cds--data-table","cds--data-table--md"],["data-testid","rgw-bucket-locking-details",1,"cds--data-table--sort","cds--data-table--no-border","cds--data-table","cds--data-table--md"],[1,"cds--data-table--sort","cds--data-table--no-border","cds--data-table","cds--data-table--md"],[4,"ngFor","ngForOf"],[3,"rateLimitConfig","type"],[1,"table-scroller"],["class","input-group",4,"ngIf"],["display","multi",4,"ngIf"],[1,"table"],[1,"input-group"],["type","button",1,"btn","btn-light",3,"click","ngClass"],["display","multi"],[3,"description","align"],["size","md",3,"type"],["class","spacing-left",4,"ngIf"],[1,"spacing-left"],[3,"updateBucketDetails","bucket"],[3,"bucket"]]},template:function(o,_){1&o&&e.\u0275\u0275template(0,wr,20,1,"ng-container",33),2&o&&e.\u0275\u0275property("ngIf",_.selection)},dependencies:[E.NgClass,E.NgForOf,E.NgIf,Xt.B,Y.S,v.NgbNavContent,v.NgbNav,v.NgbNavItem,v.NgbNavLink,v.NgbNavLinkBase,v.NgbNavOutlet,d.CodeSnippet,d.Tag,d.Tooltip,Ia,Bn,gr,E.JsonPipe,E.KeyValuePipe,_n.s,In.u,Er.Q,Cr],styles:["table[_ngcontent-%COMP%]{table-layout:fixed}table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{word-wrap:break-word}.table-scroller[_ngcontent-%COMP%]{height:100%;max-height:50vh;overflow:auto}.spacing-left[_ngcontent-%COMP%]{margin-left:.5rem}"]})}}return n})();const kr=["bucketSizeTpl"],zr=["bucketObjectTpl"],Hr=["deleteTpl"];function Xr(n,i){if(1&n&&e.\u0275\u0275element(0,"cd-rgw-bucket-details",12),2&n){const t=e.\u0275\u0275nextContext();e.\u0275\u0275property("selection",t.expandedRow)}}function Br(n,i){if(1&n&&e.\u0275\u0275element(0,"cd-usage-bar",14),2&n){const t=e.\u0275\u0275nextContext().data.row;e.\u0275\u0275property("total",t.bucket_quota.max_size)("used",t.bucket_size)}}function Vr(n,i){1&n&&e.\u0275\u0275i18n(0,6)}function Zr(n,i){if(1&n&&e.\u0275\u0275template(0,Br,1,2,"cd-usage-bar",13)(1,Vr,1,0,"ng-template",null,4,e.\u0275\u0275templateRefExtractor),2&n){const t=i.data.row,o=e.\u0275\u0275reference(2);e.\u0275\u0275property("ngIf",t.bucket_quota.max_size>0&&t.bucket_quota.enabled)("ngIfElse",o)}}function Kr(n,i){if(1&n&&e.\u0275\u0275element(0,"cd-usage-bar",16),2&n){const t=e.\u0275\u0275nextContext().data.row;e.\u0275\u0275property("total",t.bucket_quota.max_objects)("used",t.num_objects)("isBinary",!1)}}function qr(n,i){1&n&&e.\u0275\u0275i18n(0,7)}function jr(n,i){if(1&n&&e.\u0275\u0275template(0,Kr,1,3,"cd-usage-bar",15)(1,qr,1,0,"ng-template",null,5,e.\u0275\u0275templateRefExtractor),2&n){const t=i.data.row,o=e.\u0275\u0275reference(2);e.\u0275\u0275property("ngIf",t.bucket_quota.max_objects>0&&t.bucket_quota.enabled)("ngIfElse",o)}}function Yr(n,i){1&n&&(e.\u0275\u0275elementStart(0,"cd-alert-panel",17),e.\u0275\u0275i18n(1,8),e.\u0275\u0275elementEnd())}let Jr=(()=>{class n extends Je.D{constructor(t,o,_,a,r,s,c,u,p){super(u),this.authStorageService=t,this.dimlessBinaryPipe=o,this.dimlessPipe=_,this.rgwBucketService=a,this.modalService=r,this.urlBuilder=s,this.actionLabels=c,this.ngZone=u,this.taskWrapper=p,this.columns=[],this.buckets=[],this.selection=new Oe.y,this.subs=new U.Subscription}ngOnInit(){this.permission=this.authStorageService.getPermissions().rgw,this.columns=[{name:"Name",prop:"bid",flexGrow:2},{name:"Owner",prop:"owner",flexGrow:2.5},{name:"Used Capacity",prop:"bucket_size",flexGrow:.6,pipe:this.dimlessBinaryPipe},{name:"Capacity Limit %",prop:"size_usage",cellTemplate:this.bucketSizeTpl,flexGrow:.8},{name:"Objects",prop:"num_objects",flexGrow:.6,pipe:this.dimlessPipe},{name:"Object Limit %",prop:"object_usage",cellTemplate:this.bucketObjectTpl,flexGrow:.8},{name:"Number of Shards",prop:"num_shards",flexGrow:.8}];const t=()=>this.selection.first()&&`${encodeURIComponent(this.selection.first().bid)}/${encodeURIComponent(this.selection.first().owner)}`,a={permission:"delete",icon:y.FI.destroy,title:"Bucket is not empty. Remove all objects before deletion.",click:()=>this.deleteAction(),disable:()=>this.selection.first()?.num_objects>0,name:this.actionLabels.DELETE};this.tableActions=[{permission:"create",icon:y.FI.add,routerLink:()=>this.urlBuilder.getCreate(),name:this.actionLabels.CREATE,canBePrimary:s=>!s.hasSelection},{permission:"update",icon:y.FI.edit,routerLink:()=>this.urlBuilder.getEdit(t()),name:this.actionLabels.EDIT},{permission:"update",icon:y.FI.edit,click:()=>this.openTieringModal(),disable:()=>!this.selection.hasSelection,name:this.actionLabels.TIERING},a],this.setTableRefreshTimeout()}getBucketList(t){this.setTableRefreshTimeout(),this.subs.add(this.rgwBucketService.fetchAndTransformBuckets().pipe((0,K.switchMap)(()=>this.rgwBucketService.buckets$)).subscribe({next:o=>{this.buckets=o},error:()=>t.error()}))}updateSelection(t){this.selection=t}openTieringModal(){this.modalService.show(Hn,{bucket:this.selection.first()})}deleteAction(){const t=this.selection.selected.map(o=>o.bid);this.modalService.show(Ue.D,{itemDescription:"bucket",impact:On.r.high,itemNames:t,bodyTemplate:this.deleteTpl,submitActionObservable:()=>new U.Observable(o=>{this.taskWrapper.wrapTaskAroundCall({task:new St.O("rgw/bucket/delete",{bucket_names:t}),call:(0,U.forkJoin)(this.selection.selected.map(_=>this.rgwBucketService.delete(_.bid)))}).subscribe({error:_=>{o.error(_),this.table.refreshBtn()},complete:()=>{o.complete(),this.table.refreshBtn()}})})})}ngOnDestroy(){this.subs.unsubscribe()}static{this.\u0275fac=function(o){return new(o||n)(e.\u0275\u0275directiveInject(be.v),e.\u0275\u0275directiveInject(bt.l),e.\u0275\u0275directiveInject(In.u),e.\u0275\u0275directiveInject(Le.c),e.\u0275\u0275directiveInject(he.V),e.\u0275\u0275directiveInject(se.E),e.\u0275\u0275directiveInject(P.Ss),e.\u0275\u0275directiveInject(e.NgZone),e.\u0275\u0275directiveInject(It.a))}}static{this.\u0275cmp=e.\u0275\u0275defineComponent({type:n,selectors:[["cd-rgw-bucket-list"]],viewQuery:function(o,_){if(1&o&&(e.\u0275\u0275viewQuery(re.O,7),e.\u0275\u0275viewQuery(kr,7),e.\u0275\u0275viewQuery(zr,7),e.\u0275\u0275viewQuery(Hr,7)),2&o){let a;e.\u0275\u0275queryRefresh(a=e.\u0275\u0275loadQuery())&&(_.table=a.first),e.\u0275\u0275queryRefresh(a=e.\u0275\u0275loadQuery())&&(_.bucketSizeTpl=a.first),e.\u0275\u0275queryRefresh(a=e.\u0275\u0275loadQuery())&&(_.bucketObjectTpl=a.first),e.\u0275\u0275queryRefresh(a=e.\u0275\u0275loadQuery())&&(_.deleteTpl=a.first)}},features:[e.\u0275\u0275ProvidersFeature([{provide:se.E,useValue:new se.E("rgw/bucket")}]),e.\u0275\u0275InheritDefinitionFeature],decls:10,vars:8,consts:()=>{let t,o,_;return t="No Limit",o="No Limit",_=" Buckets might still have underlying data depending on your bucket configuration ",[["table",""],["bucketSizeTpl",""],["bucketObjectTpl",""],["deleteTpl",""],["noSizeQuota",""],["noObjectQuota",""],t,o,_,["columnMode","flex","selectionType","single","identifier","bid",3,"setExpandedRow","updateSelection","fetchData","autoReload","data","columns","hasDetails","status"],[1,"table-actions",3,"permission","selection","tableActions"],[3,"selection",4,"cdTableDetail"],[3,"selection"],[3,"total","used",4,"ngIf","ngIfElse"],[3,"total","used"],[3,"total","used","isBinary",4,"ngIf","ngIfElse"],[3,"total","used","isBinary"],["type","danger"]]},template:function(o,_){if(1&o){const a=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"cd-table",9,0),e.\u0275\u0275listener("setExpandedRow",function(s){return e.\u0275\u0275restoreView(a),e.\u0275\u0275resetView(_.setExpandedRow(s))})("updateSelection",function(s){return e.\u0275\u0275restoreView(a),e.\u0275\u0275resetView(_.updateSelection(s))})("fetchData",function(s){return e.\u0275\u0275restoreView(a),e.\u0275\u0275resetView(_.getBucketList(s))}),e.\u0275\u0275element(2,"cd-table-actions",10),e.\u0275\u0275template(3,Xr,1,1,"cd-rgw-bucket-details",11),e.\u0275\u0275elementEnd(),e.\u0275\u0275template(4,Zr,3,2,"ng-template",null,1,e.\u0275\u0275templateRefExtractor)(6,jr,3,2,"ng-template",null,2,e.\u0275\u0275templateRefExtractor)(8,Yr,2,0,"ng-template",null,3,e.\u0275\u0275templateRefExtractor)}2&o&&(e.\u0275\u0275property("autoReload",!1)("data",_.buckets)("columns",_.columns)("hasDetails",!0)("status",_.tableStatus),e.\u0275\u0275advance(2),e.\u0275\u0275property("permission",_.permission)("selection",_.selection)("tableActions",_.tableActions))},dependencies:[E.NgIf,Xn.o,Pe.m,re.O,De.j,ot.N,Ur]})}}return n})();var el=g(16748),qn=g(1505),Kt=g(37823),tl=g(85770);function nl(n,i){if(1&n){const t=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"cd-table-key-value",12),e.\u0275\u0275listener("fetchData",function(){e.\u0275\u0275restoreView(t);const _=e.\u0275\u0275nextContext(2);return e.\u0275\u0275resetView(_.getMetaData())}),e.\u0275\u0275elementEnd()}if(2&n){const t=e.\u0275\u0275nextContext(2);e.\u0275\u0275property("data",t.metadata)}}function ol(n,i){if(1&n&&e.\u0275\u0275element(0,"cd-table-performance-counter",13),2&n){const t=e.\u0275\u0275nextContext(2);e.\u0275\u0275property("serviceId",t.serviceMapId)}}function _l(n,i){if(1&n&&e.\u0275\u0275element(0,"cd-grafana",15),2&n){const t=e.\u0275\u0275nextContext(3);e.\u0275\u0275property("grafanaPath","rgw-instance-detail?var-rgw_servers=rgw."+t.serviceId)("type","metrics")}}function il(n,i){1&n&&(e.\u0275\u0275elementContainerStart(0,14),e.\u0275\u0275elementStart(1,"a",7),e.\u0275\u0275i18n(2,3),e.\u0275\u0275elementEnd(),e.\u0275\u0275template(3,_l,1,2,"ng-template",8),e.\u0275\u0275elementContainerEnd())}function al(n,i){if(1&n&&(e.\u0275\u0275elementContainerStart(0),e.\u0275\u0275elementStart(1,"nav",5,0),e.\u0275\u0275elementContainerStart(3,6),e.\u0275\u0275elementStart(4,"a",7),e.\u0275\u0275i18n(5,1),e.\u0275\u0275elementEnd(),e.\u0275\u0275template(6,nl,1,1,"ng-template",8),e.\u0275\u0275elementContainerEnd(),e.\u0275\u0275elementContainerStart(7,9),e.\u0275\u0275elementStart(8,"a",7),e.\u0275\u0275i18n(9,2),e.\u0275\u0275elementEnd(),e.\u0275\u0275template(10,ol,1,1,"ng-template",8),e.\u0275\u0275elementContainerEnd(),e.\u0275\u0275template(11,il,4,0,"ng-container",10),e.\u0275\u0275elementEnd(),e.\u0275\u0275element(12,"div",11),e.\u0275\u0275elementContainerEnd()),2&n){const t=e.\u0275\u0275reference(2),o=e.\u0275\u0275nextContext();e.\u0275\u0275advance(11),e.\u0275\u0275property("ngIf",o.grafanaPermission.read),e.\u0275\u0275advance(),e.\u0275\u0275property("ngbNavOutlet",t)}}let rl=(()=>{class n{constructor(t,o){this.rgwDaemonService=t,this.authStorageService=o,this.serviceId="",this.serviceMapId="",this.grafanaPermission=this.authStorageService.getPermissions().grafana}ngOnChanges(){this.selection&&(this.serviceId=this.selection.id,this.serviceMapId=this.selection.service_map_id)}getMetaData(){A().isEmpty(this.serviceId)||this.rgwDaemonService.get(this.serviceId).subscribe(t=>{this.metadata=t.rgw_metadata})}static{this.\u0275fac=function(o){return new(o||n)(e.\u0275\u0275directiveInject($e.y),e.\u0275\u0275directiveInject(be.v))}}static{this.\u0275cmp=e.\u0275\u0275defineComponent({type:n,selectors:[["cd-rgw-daemon-details"]],inputs:{selection:"selection"},features:[e.\u0275\u0275NgOnChangesFeature],decls:1,vars:1,consts:()=>{let t,o,_,a;return t="Details",o="Performance Counters",_="Performance Details",a="RGW instance details",[["nav","ngbNav"],t,o,_,[4,"ngIf"],["ngbNav","","cdStatefulTab","rgw-daemon-details",1,"nav-tabs"],["ngbNavItem","details"],["ngbNavLink",""],["ngbNavContent",""],["ngbNavItem","performance-counters"],["ngbNavItem","performance-details",4,"ngIf"],[3,"ngbNavOutlet"],[3,"fetchData","data"],["serviceType","rgw",3,"serviceId"],["ngbNavItem","performance-details"],["title",a,"uid","x5ARzZtmk","grafanaStyle","one",3,"grafanaPath","type"]]},template:function(o,_){1&o&&e.\u0275\u0275template(0,al,13,2,"ng-container",4),2&o&&e.\u0275\u0275property("ngIf",_.selection)},dependencies:[E.NgIf,qn.c,Kt.i,Xt.B,tl.Y,v.NgbNavContent,v.NgbNav,v.NgbNavItem,v.NgbNavLink,v.NgbNavLinkBase,v.NgbNavOutlet]})}}return n})();function ll(n,i){if(1&n&&e.\u0275\u0275element(0,"cd-rgw-daemon-details",12),2&n){const t=e.\u0275\u0275nextContext(2);e.\u0275\u0275property("selection",t.expandedRow)}}function sl(n,i){if(1&n){const t=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"cd-table",10),e.\u0275\u0275listener("setExpandedRow",function(_){e.\u0275\u0275restoreView(t);const a=e.\u0275\u0275nextContext();return e.\u0275\u0275resetView(a.setExpandedRow(_))})("fetchData",function(_){e.\u0275\u0275restoreView(t);const a=e.\u0275\u0275nextContext();return e.\u0275\u0275resetView(a.getDaemonList(_))}),e.\u0275\u0275template(1,ll,1,1,"cd-rgw-daemon-details",11),e.\u0275\u0275elementEnd()}if(2&n){const t=e.\u0275\u0275nextContext();e.\u0275\u0275property("data",t.daemons)("columns",t.columns)("hasDetails",!0)}}function cl(n,i){1&n&&e.\u0275\u0275element(0,"cd-grafana",13),2&n&&e.\u0275\u0275property("grafanaPath","rgw-overview?")("type","metrics")}function dl(n,i){1&n&&(e.\u0275\u0275elementContainerStart(0,5),e.\u0275\u0275elementStart(1,"a",6),e.\u0275\u0275i18n(2,2),e.\u0275\u0275elementEnd(),e.\u0275\u0275template(3,cl,1,2,"ng-template",7),e.\u0275\u0275elementContainerEnd())}function ul(n,i){1&n&&e.\u0275\u0275element(0,"cd-grafana",14),2&n&&e.\u0275\u0275property("grafanaPath","radosgw-sync-overview?")("type","metrics")}function pl(n,i){1&n&&(e.\u0275\u0275elementContainerStart(0,5),e.\u0275\u0275elementStart(1,"a",6),e.\u0275\u0275i18n(2,3),e.\u0275\u0275elementEnd(),e.\u0275\u0275template(3,ul,1,2,"ng-template",7),e.\u0275\u0275elementContainerEnd())}let ml=(()=>{class n extends Je.D{constructor(t,o,_,a){super(),this.rgwDaemonService=t,this.authStorageService=o,this.cephShortVersionPipe=_,this.rgwSiteService=a,this.columns=[],this.daemons=[],this.updateDaemons=r=>{this.daemons=r}}ngOnInit(){this.grafanaPermission=this.authStorageService.getPermissions().grafana,this.columns=[{name:"ID",prop:"id",flexGrow:2},{name:"Hostname",prop:"server_hostname",flexGrow:2},{name:"Port",prop:"port",flexGrow:1},{name:"Realm",prop:"realm_name",flexGrow:2},{name:"Zone Group",prop:"zonegroup_name",flexGrow:2},{name:"Zone",prop:"zone_name",flexGrow:2},{name:"Version",prop:"version",flexGrow:1,pipe:this.cephShortVersionPipe}],this.rgwSiteService.get("realms").subscribe(t=>this.isMultiSite=t.length>0)}getDaemonList(t){this.rgwDaemonService.list().subscribe(this.updateDaemons,()=>{t.error()})}static{this.\u0275fac=function(o){return new(o||n)(e.\u0275\u0275directiveInject($e.y),e.\u0275\u0275directiveInject(be.v),e.\u0275\u0275directiveInject(el.Z),e.\u0275\u0275directiveInject(Fn.B))}}static{this.\u0275cmp=e.\u0275\u0275defineComponent({type:n,selectors:[["cd-rgw-daemon-list"]],features:[e.\u0275\u0275InheritDefinitionFeature],decls:9,vars:3,consts:()=>{let t,o,_,a,r;return t="Gateways List",o="Overall Performance",_="RGW overview",a="Sync Performance",r="Radosgw sync overview",[["nav","ngbNav"],t,o,a,["ngbNav","",1,"nav-tabs"],["ngbNavItem",""],["ngbNavLink",""],["ngbNavContent",""],["ngbNavItem","",4,"ngIf"],[3,"ngbNavOutlet"],["columnMode","flex",3,"setExpandedRow","fetchData","data","columns","hasDetails"],[3,"selection",4,"cdTableDetail"],[3,"selection"],["title",_,"uid","WAkugZpiz","grafanaStyle","two",3,"grafanaPath","type"],["title",r,"uid","rgw-sync-overview","grafanaStyle","two",3,"grafanaPath","type"]]},template:function(o,_){if(1&o&&(e.\u0275\u0275elementStart(0,"nav",4,0),e.\u0275\u0275elementContainerStart(2,5),e.\u0275\u0275elementStart(3,"a",6),e.\u0275\u0275i18n(4,1),e.\u0275\u0275elementEnd(),e.\u0275\u0275template(5,sl,2,3,"ng-template",7),e.\u0275\u0275elementContainerEnd(),e.\u0275\u0275template(6,dl,4,0,"ng-container",8)(7,pl,4,0,"ng-container",8),e.\u0275\u0275elementEnd(),e.\u0275\u0275element(8,"div",9)),2&o){const a=e.\u0275\u0275reference(1);e.\u0275\u0275advance(6),e.\u0275\u0275property("ngIf",_.grafanaPermission.read),e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf",_.grafanaPermission.read&&_.isMultiSite),e.\u0275\u0275advance(),e.\u0275\u0275property("ngbNavOutlet",a)}},dependencies:[E.NgIf,qn.c,re.O,ot.N,v.NgbNavContent,v.NgbNav,v.NgbNavItem,v.NgbNavLink,v.NgbNavLinkBase,v.NgbNavOutlet,rl]})}}return n})();var jn=function(n){return n.USERS="users",n.BUCKETS="buckets",n.METADATA="metadata",n.USAGE="usage",n.ZONE="zone",n}(jn||{});let Yn=(()=>{class n{static{this.capabilities=jn}static getAll(){return Object.values(n.capabilities)}}return n})();const Tl=()=>["read","write","*"];function gl(n,i){if(1&n&&(e.\u0275\u0275elementStart(0,"cds-text-label",20),e.\u0275\u0275i18nStart(1,4),e.\u0275\u0275element(2,"input",21),e.\u0275\u0275i18nEnd(),e.\u0275\u0275elementEnd()),2&n){const t=e.\u0275\u0275nextContext(),o=e.\u0275\u0275reference(14);e.\u0275\u0275property("invalid",t.formGroup.controls.type.invalid&&t.formGroup.controls.type.dirty)("invalidText",o),e.\u0275\u0275advance(2),e.\u0275\u0275property("readonly",!0)}}function El(n,i){if(1&n&&(e.\u0275\u0275elementStart(0,"option",23),e.\u0275\u0275text(1),e.\u0275\u0275elementEnd()),2&n){const t=i.$implicit;e.\u0275\u0275property("value",t),e.\u0275\u0275advance(),e.\u0275\u0275textInterpolate(t)}}function Rl(n,i){if(1&n&&(e.\u0275\u0275elementStart(0,"cds-select",22)(1,"option",17),e.\u0275\u0275text(2,"--- Select a type ---"),e.\u0275\u0275elementEnd(),e.\u0275\u0275template(3,El,2,2,"option",18),e.\u0275\u0275elementEnd()),2&n){const t=e.\u0275\u0275nextContext(),o=e.\u0275\u0275reference(14);e.\u0275\u0275property("invalid",t.formGroup.controls.type.invalid&&t.formGroup.controls.type.dirty)("invalidText",o),e.\u0275\u0275advance(3),e.\u0275\u0275property("ngForOf",t.types)}}function Cl(n,i){1&n&&(e.\u0275\u0275elementStart(0,"span",25),e.\u0275\u0275i18n(1,5),e.\u0275\u0275elementEnd())}function fl(n,i){if(1&n&&e.\u0275\u0275template(0,Cl,2,0,"span",24),2&n){const t=e.\u0275\u0275nextContext(),o=e.\u0275\u0275reference(8);e.\u0275\u0275property("ngIf",t.formGroup.showError("type",o,"required"))}}function Sl(n,i){if(1&n&&(e.\u0275\u0275elementStart(0,"option",23),e.\u0275\u0275text(1),e.\u0275\u0275elementEnd()),2&n){const t=i.$implicit;e.\u0275\u0275property("value",t),e.\u0275\u0275advance(),e.\u0275\u0275textInterpolate1(" ",t," ")}}function Fl(n,i){1&n&&(e.\u0275\u0275elementStart(0,"span",25),e.\u0275\u0275i18n(1,6),e.\u0275\u0275elementEnd())}function Ml(n,i){if(1&n&&e.\u0275\u0275template(0,Fl,2,0,"span",24),2&n){const t=e.\u0275\u0275nextContext(),o=e.\u0275\u0275reference(8);e.\u0275\u0275property("ngIf",t.formGroup.showError("perm",o,"required"))}}let Pl=(()=>{class n extends d.BaseModal{constructor(t,o){super(),this.formBuilder=t,this.actionLabels=o,this.submitAction=new e.EventEmitter,this.editing=!0,this.types=[],this.resource="capability",this.createForm()}createForm(){this.formGroup=this.formBuilder.group({type:[null,[l.Validators.required]],perm:[null,[l.Validators.required]]})}setEditing(t=!0){this.editing=t,this.action=this.editing?this.actionLabels.EDIT:this.actionLabels.ADD}setValues(t,o){this.formGroup.setValue({type:t,perm:o})}setCapabilities(t){const o=[];t.forEach(_=>{o.push(_.type)}),this.types=[],Yn.getAll().forEach(_=>{-1===A().indexOf(o,_)&&this.types.push(_)})}onSubmit(){this.submitAction.emit(this.formGroup.value),this.closeModal()}static{this.\u0275fac=function(o){return new(o||n)(e.\u0275\u0275directiveInject(Ge.$),e.\u0275\u0275directiveInject(P.Ss))}}static{this.\u0275cmp=e.\u0275\u0275defineComponent({type:n,selectors:[["cd-rgw-user-capability-modal"]],outputs:{submitAction:"submitAction"},features:[e.\u0275\u0275InheritDefinitionFeature],decls:25,vars:23,consts:()=>{let t,o,_,a,r,s;return t="Type",o="Permission",_="" + "\ufffd0\ufffd" + " " + "\ufffd1\ufffd" + "",a="Type " + "\ufffd#2\ufffd\ufffd/#2\ufffd" + "",r="This field is required.",s="This field is required.",[["frm","ngForm"],["typeError",""],["permError",""],_,a,r,s,["size","md",3,"overlaySelected","open","hasScrollingContent"],[3,"closeSelect"],["cdsModalHeaderHeading",""],[3,"formAllFieldsRequired"],["novalidate","",3,"formGroup"],["cdsModalContent",""],[1,"form-item"],["for","type",3,"invalid","invalidText",4,"ngIf"],["label",t,"for","type","formControlName","type",3,"invalid","invalidText",4,"ngIf"],["label",o,"for","perm","formControlName","perm",3,"invalid","invalidText"],["value",""],[3,"value",4,"ngFor","ngForOf"],[3,"submitActionEvent","form","submitText","modalForm"],["for","type",3,"invalid","invalidText"],["cdsText","","id","type","name","type","formControlName","type","modal-primary-focus","",3,"readonly"],["label",t,"for","type","formControlName","type",3,"invalid","invalidText"],[3,"value"],["class","invalid-feedback",4,"ngIf"],[1,"invalid-feedback"]]},template:function(o,_){if(1&o){const a=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"cds-modal",7),e.\u0275\u0275listener("overlaySelected",function(){return e.\u0275\u0275restoreView(a),e.\u0275\u0275resetView(_.closeModal())}),e.\u0275\u0275elementStart(1,"cds-modal-header",8),e.\u0275\u0275listener("closeSelect",function(){return e.\u0275\u0275restoreView(a),e.\u0275\u0275resetView(_.closeModal())}),e.\u0275\u0275elementStart(2,"h3",9),e.\u0275\u0275i18n(3,3),e.\u0275\u0275pipe(4,"titlecase"),e.\u0275\u0275pipe(5,"upperFirst"),e.\u0275\u0275elementEnd(),e.\u0275\u0275element(6,"cd-help-text",10),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(7,"form",11,0)(9,"div",12)(10,"div",13),e.\u0275\u0275template(11,gl,3,3,"cds-text-label",14)(12,Rl,4,3,"cds-select",15)(13,fl,1,1,"ng-template",null,1,e.\u0275\u0275templateRefExtractor),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(15,"div",13)(16,"cds-select",16)(17,"option",17),e.\u0275\u0275text(18,"--- Select a permission ---"),e.\u0275\u0275elementEnd(),e.\u0275\u0275template(19,Sl,2,2,"option",18),e.\u0275\u0275elementEnd(),e.\u0275\u0275template(20,Ml,1,1,"ng-template",null,2,e.\u0275\u0275templateRefExtractor),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(22,"cd-form-button-panel",19),e.\u0275\u0275pipe(23,"titlecase"),e.\u0275\u0275pipe(24,"upperFirst"),e.\u0275\u0275listener("submitActionEvent",function(){return e.\u0275\u0275restoreView(a),e.\u0275\u0275resetView(_.onSubmit())}),e.\u0275\u0275elementEnd()()()}if(2&o){const a=e.\u0275\u0275reference(21);e.\u0275\u0275property("open",_.open)("hasScrollingContent",!1),e.\u0275\u0275advance(5),e.\u0275\u0275i18nExp(e.\u0275\u0275pipeBind1(4,14,_.action))(e.\u0275\u0275pipeBind1(5,16,_.resource)),e.\u0275\u0275i18nApply(3),e.\u0275\u0275advance(),e.\u0275\u0275property("formAllFieldsRequired",!0),e.\u0275\u0275advance(),e.\u0275\u0275property("formGroup",_.formGroup),e.\u0275\u0275advance(4),e.\u0275\u0275property("ngIf",_.editing),e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf",!_.editing),e.\u0275\u0275advance(4),e.\u0275\u0275property("invalid",_.formGroup.controls.perm.invalid&&_.formGroup.controls.perm.dirty)("invalidText",a),e.\u0275\u0275advance(3),e.\u0275\u0275property("ngForOf",e.\u0275\u0275pureFunction0(22,Tl)),e.\u0275\u0275advance(3),e.\u0275\u0275property("form",_.formGroup)("submitText",e.\u0275\u0275pipeBind1(23,18,_.action)+" "+e.\u0275\u0275pipeBind1(24,20,_.resource))("modalForm",!0)}},dependencies:[E.NgForOf,E.NgIf,_e.e,ae.O,Y.S,oe.E,l.\u0275NgNoValidate,l.NgSelectOption,l.\u0275NgSelectMultipleOption,l.DefaultValueAccessor,l.NgControlStatus,l.NgControlStatusGroup,l.FormGroupDirective,l.FormControlName,d.Modal,d.ModalHeader,d.ModalContent,d.ModalHeaderHeading,d.TextInputLabelComponent,d.TextInput,d.Select,d.Option,E.TitleCasePipe,Ie.r]})}}return n})();var _t=g(50889);function Il(n,i){if(1&n&&(e.\u0275\u0275elementStart(0,"cds-text-label",24),e.\u0275\u0275i18nStart(1,5),e.\u0275\u0275element(2,"input",25),e.\u0275\u0275i18nEnd(),e.\u0275\u0275elementEnd()),2&n){const t=e.\u0275\u0275nextContext(),o=e.\u0275\u0275reference(14);e.\u0275\u0275property("invalid",t.formGroup.controls.user.invalid&&t.formGroup.controls.user.dirty)("invalidText",o),e.\u0275\u0275advance(2),e.\u0275\u0275property("readonly",!0)}}function Ol(n,i){if(1&n&&(e.\u0275\u0275elementStart(0,"option",29),e.\u0275\u0275text(1),e.\u0275\u0275elementEnd()),2&n){const t=i.$implicit;e.\u0275\u0275property("value",t),e.\u0275\u0275advance(),e.\u0275\u0275textInterpolate(t)}}function Gl(n,i){if(1&n&&(e.\u0275\u0275elementStart(0,"cds-select",26)(1,"option",27),e.\u0275\u0275text(2,"--- Select a username ---"),e.\u0275\u0275elementEnd(),e.\u0275\u0275template(3,Ol,2,2,"option",28),e.\u0275\u0275elementEnd()),2&n){const t=e.\u0275\u0275nextContext(),o=e.\u0275\u0275reference(14);e.\u0275\u0275property("invalid",t.formGroup.controls.user.invalid&&t.formGroup.controls.user.dirty)("invalidText",o),e.\u0275\u0275advance(3),e.\u0275\u0275property("ngForOf",t.userCandidates)}}function Nl(n,i){1&n&&(e.\u0275\u0275elementStart(0,"span",31),e.\u0275\u0275i18n(1,6),e.\u0275\u0275elementEnd())}function Al(n,i){if(1&n&&e.\u0275\u0275template(0,Nl,2,0,"span",30),2&n){const t=e.\u0275\u0275nextContext(),o=e.\u0275\u0275reference(8);e.\u0275\u0275property("ngIf",t.formGroup.showError("user",o,"required"))}}function hl(n,i){1&n&&(e.\u0275\u0275elementStart(0,"div",18)(1,"cds-checkbox",32),e.\u0275\u0275i18n(2,7),e.\u0275\u0275elementEnd()())}function bl(n,i){1&n&&(e.\u0275\u0275elementStart(0,"span",31),e.\u0275\u0275i18n(1,9),e.\u0275\u0275elementEnd())}function vl(n,i){if(1&n&&e.\u0275\u0275template(0,bl,2,0,"span",30),2&n){const t=e.\u0275\u0275nextContext(2),o=e.\u0275\u0275reference(8);e.\u0275\u0275property("ngIf",t.formGroup.showError("access_key",o,"required"))}}function Ll(n,i){if(1&n&&(e.\u0275\u0275elementStart(0,"div",33)(1,"cds-password-label",34),e.\u0275\u0275i18nStart(2,8),e.\u0275\u0275element(3,"input",35),e.\u0275\u0275i18nEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275element(4,"cd-copy-2-clipboard-button",36),e.\u0275\u0275template(5,vl,1,1,"ng-template",null,2,e.\u0275\u0275templateRefExtractor),e.\u0275\u0275elementEnd()),2&n){const t=e.\u0275\u0275reference(6),o=e.\u0275\u0275nextContext();e.\u0275\u0275advance(),e.\u0275\u0275property("invalid",o.formGroup.controls.access_key.invalid&&o.formGroup.controls.access_key.dirty)("invalidText",t),e.\u0275\u0275advance(2),e.\u0275\u0275property("readonly",o.viewing)}}function yl(n,i){1&n&&(e.\u0275\u0275elementStart(0,"span",31),e.\u0275\u0275i18n(1,11),e.\u0275\u0275elementEnd())}function $l(n,i){if(1&n&&e.\u0275\u0275template(0,yl,2,0,"span",30),2&n){const t=e.\u0275\u0275nextContext(2),o=e.\u0275\u0275reference(8);e.\u0275\u0275property("ngIf",t.formGroup.showError("secret_key",o,"required"))}}function Dl(n,i){if(1&n&&(e.\u0275\u0275elementStart(0,"div",33)(1,"cds-password-label",37),e.\u0275\u0275i18nStart(2,10),e.\u0275\u0275element(3,"input",38),e.\u0275\u0275i18nEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275element(4,"cd-copy-2-clipboard-button",39),e.\u0275\u0275template(5,$l,1,1,"ng-template",null,3,e.\u0275\u0275templateRefExtractor),e.\u0275\u0275elementEnd()),2&n){const t=e.\u0275\u0275reference(6),o=e.\u0275\u0275nextContext();e.\u0275\u0275advance(),e.\u0275\u0275property("invalid",o.formGroup.controls.secret_key.invalid&&o.formGroup.controls.secret_key.dirty)("invalidText",t),e.\u0275\u0275advance(2),e.\u0275\u0275property("invalid",o.formGroup.controls.secret_key.invalid&&o.formGroup.controls.secret_key.dirty)("readonly",o.viewing)}}let Qn=(()=>{class n extends d.BaseModal{constructor(t,o){super(),this.formBuilder=t,this.actionLabels=o,this.submitAction=new e.EventEmitter,this.viewing=!0,this.userCandidates=[],this.resource="S3 Key",this.createForm()}createForm(){this.formGroup=this.formBuilder.group({user:[null,[l.Validators.required]],generate_key:[!0],access_key:[null,[M.xQ.requiredIf({generate_key:!1})]],secret_key:[null,[M.xQ.requiredIf({generate_key:!1})]]})}setViewing(t=!0){this.viewing=t,this.action=this.viewing?this.actionLabels.SHOW:this.actionLabels.CREATE}setValues(t,o,_){this.formGroup.setValue({user:t,generate_key:A().isEmpty(o),access_key:o,secret_key:_})}setUserCandidates(t){this.userCandidates=t}onSubmit(){this.submitAction.emit(this.formGroup.value),this.closeModal()}static{this.\u0275fac=function(o){return new(o||n)(e.\u0275\u0275directiveInject(Ge.$),e.\u0275\u0275directiveInject(P.Ss))}}static{this.\u0275cmp=e.\u0275\u0275defineComponent({type:n,selectors:[["cd-rgw-user-s3-key-modal"]],outputs:{submitAction:"submitAction"},features:[e.\u0275\u0275InheritDefinitionFeature],decls:21,vars:23,consts:()=>{let t,o,_,a,r,s,c,u,p;return t="Username",o="" + "\ufffd0\ufffd" + " " + "\ufffd1\ufffd" + "",_="Username " + "\ufffd#2\ufffd\ufffd/#2\ufffd" + "",a="This field is required.",r="Auto-generate key ",s="Access key " + "\ufffd#3\ufffd\ufffd/#3\ufffd" + "",c="This field is required.",u="Secret key " + "\ufffd#3\ufffd\ufffd/#3\ufffd" + "",p="This field is required.",[["frm","ngForm"],["userError",""],["accessKeyError",""],["secretKeyError",""],o,_,a,r,s,c,u,p,["size","md",3,"overlaySelected","open","hasScrollingContent"],[3,"closeSelect"],[1,"modal-title"],[3,"formAllFieldsRequired"],["novalidate","",3,"formGroup"],["cdsModalContent",""],[1,"form-item"],["for","user",3,"invalid","invalidText",4,"ngIf"],["label",t,"for","user","formControlName","user",3,"invalid","invalidText",4,"ngIf"],["class","form-item",4,"ngIf"],["class","form-item form-item-append",4,"ngIf"],[3,"submitActionEvent","form","submitText","showSubmit","modalForm"],["for","user",3,"invalid","invalidText"],["cdsText","","id","user","name","user","formControlName","user","readonly","","modal-primary-focus","",3,"readonly"],["label",t,"for","user","formControlName","user",3,"invalid","invalidText"],["value",""],[3,"value",4,"ngFor","ngForOf"],[3,"value"],["class","invalid-feedback",4,"ngIf"],[1,"invalid-feedback"],["id","generate_key","formControlName","generate_key"],[1,"form-item","form-item-append"],["for","access_key",3,"invalid","invalidText"],["cdsPassword","","id","access_key","name","access_key","formControlName","access_key",3,"readonly"],["source","access_key",1,"mt-4"],["for","secret_key",3,"invalid","invalidText"],["cdsPassword","","id","secret_key","name","secret_key","formControlName","secret_key",3,"invalid","readonly"],["source","secret_key",1,"mt-4"]]},template:function(o,_){if(1&o){const a=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"cds-modal",12),e.\u0275\u0275listener("overlaySelected",function(){return e.\u0275\u0275restoreView(a),e.\u0275\u0275resetView(_.closeModal())}),e.\u0275\u0275elementStart(1,"cds-modal-header",13),e.\u0275\u0275listener("closeSelect",function(){return e.\u0275\u0275restoreView(a),e.\u0275\u0275resetView(_.closeModal())}),e.\u0275\u0275elementContainerStart(2,14),e.\u0275\u0275i18n(3,4),e.\u0275\u0275pipe(4,"titlecase"),e.\u0275\u0275pipe(5,"upperFirst"),e.\u0275\u0275elementContainerEnd(),e.\u0275\u0275element(6,"cd-help-text",15),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(7,"form",16,0)(9,"div",17)(10,"div",18),e.\u0275\u0275template(11,Il,3,3,"cds-text-label",19)(12,Gl,4,3,"cds-select",20)(13,Al,1,1,"ng-template",null,1,e.\u0275\u0275templateRefExtractor),e.\u0275\u0275elementEnd(),e.\u0275\u0275template(15,hl,3,0,"div",21)(16,Ll,7,3,"div",22)(17,Dl,7,4,"div",22),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(18,"cd-form-button-panel",23),e.\u0275\u0275pipe(19,"titlecase"),e.\u0275\u0275pipe(20,"upperFirst"),e.\u0275\u0275listener("submitActionEvent",function(){return e.\u0275\u0275restoreView(a),e.\u0275\u0275resetView(_.onSubmit())}),e.\u0275\u0275elementEnd()()()}2&o&&(e.\u0275\u0275property("open",_.open)("hasScrollingContent",!1),e.\u0275\u0275advance(5),e.\u0275\u0275i18nExp(e.\u0275\u0275pipeBind1(4,15,_.action))(e.\u0275\u0275pipeBind1(5,17,_.resource)),e.\u0275\u0275i18nApply(3),e.\u0275\u0275advance(),e.\u0275\u0275property("formAllFieldsRequired",!0),e.\u0275\u0275advance(),e.\u0275\u0275property("formGroup",_.formGroup),e.\u0275\u0275advance(4),e.\u0275\u0275property("ngIf",_.viewing),e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf",!_.viewing),e.\u0275\u0275advance(3),e.\u0275\u0275property("ngIf",!_.viewing),e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf",!_.formGroup.getValue("generate_key")),e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf",!_.formGroup.getValue("generate_key")),e.\u0275\u0275advance(),e.\u0275\u0275property("form",_.formGroup)("submitText",e.\u0275\u0275pipeBind1(19,19,_.action)+" "+e.\u0275\u0275pipeBind1(20,21,_.resource))("showSubmit",!_.viewing)("modalForm",!0))},dependencies:[E.NgForOf,E.NgIf,_t.N,_e.e,ae.O,Y.S,oe.E,l.\u0275NgNoValidate,l.NgSelectOption,l.\u0275NgSelectMultipleOption,l.DefaultValueAccessor,l.NgControlStatus,l.NgControlStatusGroup,l.FormGroupDirective,l.FormControlName,d.Modal,d.ModalHeader,d.ModalContent,d.TextInputLabelComponent,d.PasswordInputLabelComponent,d.TextInput,d.PasswordInput,d.Checkbox,d.Select,d.Option,E.TitleCasePipe,Ie.r]})}}return n})();class Wl{}const xl=()=>["read","write"];function wl(n,i){1&n&&(e.\u0275\u0275elementStart(0,"span",34),e.\u0275\u0275i18n(1,8),e.\u0275\u0275elementEnd())}function Ul(n,i){1&n&&(e.\u0275\u0275elementStart(0,"span",34),e.\u0275\u0275i18n(1,9),e.\u0275\u0275elementEnd())}function kl(n,i){if(1&n&&e.\u0275\u0275template(0,wl,2,0,"span",33)(1,Ul,2,0,"span",33),2&n){const t=e.\u0275\u0275nextContext(),o=e.\u0275\u0275reference(8);e.\u0275\u0275property("ngIf",t.formGroup.showError("subuid",o,"required")),e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf",t.formGroup.showError("subuid",o,"subuserIdExists"))}}function zl(n,i){if(1&n&&(e.\u0275\u0275elementStart(0,"option",35),e.\u0275\u0275text(1),e.\u0275\u0275elementEnd()),2&n){const t=i.$implicit;e.\u0275\u0275property("value",t),e.\u0275\u0275advance(),e.\u0275\u0275textInterpolate1(" ",t," ")}}function Hl(n,i){1&n&&(e.\u0275\u0275elementStart(0,"span",34),e.\u0275\u0275i18n(1,10),e.\u0275\u0275elementEnd())}function Xl(n,i){if(1&n&&e.\u0275\u0275template(0,Hl,2,0,"span",33),2&n){const t=e.\u0275\u0275nextContext(),o=e.\u0275\u0275reference(8);e.\u0275\u0275property("ngIf",t.formGroup.showError("perm",o,"required"))}}function Bl(n,i){1&n&&(e.\u0275\u0275elementStart(0,"span",34),e.\u0275\u0275i18n(1,14),e.\u0275\u0275elementEnd())}function Vl(n,i){if(1&n&&e.\u0275\u0275template(0,Bl,2,0,"span",33),2&n){const t=e.\u0275\u0275nextContext(3),o=e.\u0275\u0275reference(8);e.\u0275\u0275property("ngIf",t.formGroup.showError("secret_key",o,"required"))}}function Zl(n,i){if(1&n&&(e.\u0275\u0275elementStart(0,"div",38)(1,"cds-password-label",39),e.\u0275\u0275i18nStart(2,13),e.\u0275\u0275element(3,"input",40),e.\u0275\u0275i18nEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275element(4,"cd-copy-2-clipboard-button",41),e.\u0275\u0275template(5,Vl,1,1,"ng-template",null,3,e.\u0275\u0275templateRefExtractor),e.\u0275\u0275elementEnd()),2&n){const t=e.\u0275\u0275reference(6),o=e.\u0275\u0275nextContext(2);e.\u0275\u0275advance(),e.\u0275\u0275property("invalid",o.formGroup.controls.secret_key.invalid&&o.formGroup.controls.secret_key.dirty)("invalidText",t),e.\u0275\u0275advance(2),e.\u0275\u0275property("invalid",o.formGroup.controls.secret_key.invalid&&o.formGroup.controls.secret_key.dirty)("autofocus",!0)}}function Kl(n,i){if(1&n&&(e.\u0275\u0275elementStart(0,"fieldset")(1,"legend"),e.\u0275\u0275i18n(2,11),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(3,"div",21)(4,"cds-checkbox",36),e.\u0275\u0275i18n(5,12),e.\u0275\u0275elementEnd()(),e.\u0275\u0275template(6,Zl,7,4,"div",37),e.\u0275\u0275elementEnd()),2&n){const t=e.\u0275\u0275nextContext();e.\u0275\u0275advance(6),e.\u0275\u0275property("ngIf",!t.editing&&!t.formGroup.getValue("generate_secret"))}}let ql=(()=>{class n extends d.BaseModal{constructor(t,o){super(),this.formBuilder=t,this.actionLabels=o,this.submitAction=new e.EventEmitter,this.editing=!0,this.subusers=[],this.resource="Subuser",this.createForm()}createForm(){this.formGroup=this.formBuilder.group({uid:[null],subuid:[null,[l.Validators.required,this.subuserValidator()]],perm:["full-control",[l.Validators.required]],generate_secret:[!0],secret_key:[null,[M.xQ.requiredIf({generate_secret:!1})]]})}subuserValidator(){const t=this;return o=>t.editing||(0,M.xF)(o.value)?null:t.subusers.some(a=>A().isEqual(t.getSubuserName(a.id),o.value))?{subuserIdExists:!0}:null}getSubuserName(t){if(A().isEmpty(t))return t;const o=t.match(/([^:]+)(:(.+))?/);return A().isUndefined(o[3])?o[1]:o[3]}setEditing(t=!0){this.editing=t,this.action=this.editing?this.actionLabels.EDIT:this.actionLabels.CREATE}setValues(t,o="",_=""){this.formGroup.setValue({uid:t,subuid:this.getSubuserName(o),perm:_,generate_secret:!0,secret_key:null})}setSubusers(t){this.subusers=t}onSubmit(){const t=this.formGroup.value,o=new Wl;o.id=`${t.uid}:${t.subuid}`,o.permissions=t.perm,o.generate_secret=t.generate_secret,o.secret_key=t.secret_key,this.submitAction.emit(o),this.closeModal()}static{this.\u0275fac=function(o){return new(o||n)(e.\u0275\u0275directiveInject(Ge.$),e.\u0275\u0275directiveInject(P.Ss))}}static{this.\u0275cmp=e.\u0275\u0275defineComponent({type:n,selectors:[["cd-rgw-user-subuser-modal"]],outputs:{submitAction:"submitAction"},features:[e.\u0275\u0275InheritDefinitionFeature],decls:35,vars:25,consts:()=>{let t,o,_,a,r,s,c,u,p,T,f,G;return t="Permission",o="" + "\ufffd0\ufffd" + " " + "\ufffd1\ufffd" + "",_="Username " + "\ufffd#13\ufffd\ufffd/#13\ufffd" + "",a="read, write",r="full",s="This field is required.",c="The chosen subuser ID is already in use.",u="This field is required.",p="Swift key",T="Auto-generate key ",f="Secret key " + "\ufffd#3\ufffd\ufffd/#3\ufffd" + "",G="This field is required.",[["frm","ngForm"],["subuserHelper",""],["permError",""],["secretKeyError",""],o,_,a,r,s,c,u,p,T,f,G,["size","md",3,"overlaySelected","open","hasScrollingContent"],[3,"closeSelect"],["cdsModalHeaderHeading",""],[3,"formAllFieldsRequired"],["novalidate","",3,"formGroup"],["cdsModalContent",""],[1,"form-item"],["for","uid"],["cdsText","","id","uid","name","uid","formControlName","uid","readonly","","modal-primary-focus",""],["for","subuid",3,"invalid","invalidText"],["cdsText","","id","subuid","name","subuid","formControlName","subuid","autofocus","",3,"readonly"],["label",t,"for","perm","formControlName","perm",3,"invalid","invalidText"],["value",""],[3,"value",4,"ngFor","ngForOf"],["value","read-write"],["value","full-control"],[4,"ngIf"],[3,"submitActionEvent","form","submitText","modalForm"],["class","invalid-feedback",4,"ngIf"],[1,"invalid-feedback"],[3,"value"],["id","generate_secret","formControlName","generate_secret"],["class","form-item form-item-append",4,"ngIf"],[1,"form-item","form-item-append"],["for","secret_key",3,"invalid","invalidText"],["cdsPassword","","id","secret_key","name","secret_key","formControlName","secret_key",3,"invalid","autofocus"],["source","secret_key",1,"mt-4"]]},template:function(o,_){if(1&o){const a=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"cds-modal",15),e.\u0275\u0275listener("overlaySelected",function(){return e.\u0275\u0275restoreView(a),e.\u0275\u0275resetView(_.closeModal())}),e.\u0275\u0275elementStart(1,"cds-modal-header",16),e.\u0275\u0275listener("closeSelect",function(){return e.\u0275\u0275restoreView(a),e.\u0275\u0275resetView(_.closeModal())}),e.\u0275\u0275elementStart(2,"h3",17),e.\u0275\u0275i18n(3,4),e.\u0275\u0275pipe(4,"titlecase"),e.\u0275\u0275pipe(5,"upperFirst"),e.\u0275\u0275elementEnd(),e.\u0275\u0275element(6,"cd-help-text",18),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(7,"form",19,0)(9,"div",20)(10,"div",21)(11,"cds-text-label",22),e.\u0275\u0275i18nStart(12,5),e.\u0275\u0275element(13,"input",23),e.\u0275\u0275i18nEnd(),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(14,"div",21)(15,"cds-text-label",24),e.\u0275\u0275text(16,"Subuser "),e.\u0275\u0275element(17,"input",25),e.\u0275\u0275elementEnd(),e.\u0275\u0275template(18,kl,2,2,"ng-template",null,1,e.\u0275\u0275templateRefExtractor),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(20,"div",21)(21,"cds-select",26)(22,"option",27),e.\u0275\u0275text(23,"--- Select a permission ---"),e.\u0275\u0275elementEnd(),e.\u0275\u0275template(24,zl,2,2,"option",28),e.\u0275\u0275elementStart(25,"option",29),e.\u0275\u0275i18n(26,6),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(27,"option",30),e.\u0275\u0275i18n(28,7),e.\u0275\u0275elementEnd()(),e.\u0275\u0275template(29,Xl,1,1,"ng-template",null,2,e.\u0275\u0275templateRefExtractor),e.\u0275\u0275elementEnd(),e.\u0275\u0275template(31,Kl,7,1,"fieldset",31),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(32,"cd-form-button-panel",32),e.\u0275\u0275pipe(33,"titlecase"),e.\u0275\u0275pipe(34,"upperFirst"),e.\u0275\u0275listener("submitActionEvent",function(){return e.\u0275\u0275restoreView(a),e.\u0275\u0275resetView(_.onSubmit())}),e.\u0275\u0275elementEnd()()()}if(2&o){const a=e.\u0275\u0275reference(19),r=e.\u0275\u0275reference(30);e.\u0275\u0275property("open",_.open)("hasScrollingContent",!1),e.\u0275\u0275advance(5),e.\u0275\u0275i18nExp(e.\u0275\u0275pipeBind1(4,16,_.action))(e.\u0275\u0275pipeBind1(5,18,_.resource)),e.\u0275\u0275i18nApply(3),e.\u0275\u0275advance(),e.\u0275\u0275property("formAllFieldsRequired",!0),e.\u0275\u0275advance(),e.\u0275\u0275property("formGroup",_.formGroup),e.\u0275\u0275advance(8),e.\u0275\u0275property("invalid",_.formGroup.controls.subuid.invalid&&_.formGroup.controls.subuid.dirty)("invalidText",a),e.\u0275\u0275advance(2),e.\u0275\u0275property("readonly",_.editing),e.\u0275\u0275advance(4),e.\u0275\u0275property("invalid",_.formGroup.controls.perm.invalid&&_.formGroup.controls.perm.dirty)("invalidText",r),e.\u0275\u0275advance(3),e.\u0275\u0275property("ngForOf",e.\u0275\u0275pureFunction0(24,xl)),e.\u0275\u0275advance(7),e.\u0275\u0275property("ngIf",!_.editing),e.\u0275\u0275advance(),e.\u0275\u0275property("form",_.formGroup)("submitText",e.\u0275\u0275pipeBind1(33,20,_.action)+" "+e.\u0275\u0275pipeBind1(34,22,_.resource))("modalForm",!0)}},dependencies:[E.NgForOf,E.NgIf,_t.N,_e.e,ae.O,Ct.B,Y.S,oe.E,l.\u0275NgNoValidate,l.NgSelectOption,l.\u0275NgSelectMultipleOption,l.DefaultValueAccessor,l.NgControlStatus,l.NgControlStatusGroup,l.FormGroupDirective,l.FormControlName,d.Modal,d.ModalHeader,d.ModalContent,d.ModalHeaderHeading,d.TextInputLabelComponent,d.PasswordInputLabelComponent,d.TextInput,d.PasswordInput,d.Checkbox,d.Select,d.Option,E.TitleCasePipe,Ie.r]})}}return n})(),Jn=(()=>{class n extends d.BaseModal{constructor(t){super(),this.actionLabels=t,this.resource="Swift Key",this.action=this.actionLabels.SHOW}setValues(t,o){this.user=t,this.secret_key=o}static{this.\u0275fac=function(o){return new(o||n)(e.\u0275\u0275directiveInject(P.Ss))}}static{this.\u0275cmp=e.\u0275\u0275defineComponent({type:n,selectors:[["cd-rgw-user-swift-key-modal"]],features:[e.\u0275\u0275InheritDefinitionFeature],decls:18,vars:12,consts:()=>{let t,o,_;return t="" + "\ufffd0\ufffd" + " " + "\ufffd1\ufffd" + "",o="Username " + "\ufffd#11\ufffd\ufffd/#11\ufffd" + "",_="Secret key " + "\ufffd#15\ufffd\ufffd/#15\ufffd" + "",[t,o,_,["size","md",3,"overlaySelected","open","hasScrollingContent"],[3,"closeSelect"],["cdsModalHeaderHeading",""],["novalidate",""],["cdsModalContent",""],[1,"form-item"],["for","user"],["cdsText","","id","user","name","user","readonly","","modal-primary-focus","",3,"ngModelChange","ngModel"],[1,"form-item","form-item-append"],["for","secret_key"],["cdsPassword","","id","secret_key","name","secret_key","readonly","",3,"ngModelChange","ngModel"],["source","secret_key",1,"mt-4"],[3,"cancel","showSubmit","modalForm"]]},template:function(o,_){1&o&&(e.\u0275\u0275elementStart(0,"cds-modal",3),e.\u0275\u0275listener("overlaySelected",function(){return _.closeModal()}),e.\u0275\u0275elementStart(1,"cds-modal-header",4),e.\u0275\u0275listener("closeSelect",function(){return _.closeModal()}),e.\u0275\u0275elementStart(2,"h3",5),e.\u0275\u0275i18n(3,0),e.\u0275\u0275pipe(4,"titlecase"),e.\u0275\u0275pipe(5,"upperFirst"),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(6,"form",6)(7,"div",7)(8,"div",8)(9,"cds-text-label",9),e.\u0275\u0275i18nStart(10,1),e.\u0275\u0275elementStart(11,"input",10),e.\u0275\u0275twoWayListener("ngModelChange",function(r){return e.\u0275\u0275twoWayBindingSet(_.user,r)||(_.user=r),r}),e.\u0275\u0275elementEnd(),e.\u0275\u0275i18nEnd(),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(12,"div",11)(13,"cds-password-label",12),e.\u0275\u0275i18nStart(14,2),e.\u0275\u0275elementStart(15,"input",13),e.\u0275\u0275twoWayListener("ngModelChange",function(r){return e.\u0275\u0275twoWayBindingSet(_.secret_key,r)||(_.secret_key=r),r}),e.\u0275\u0275elementEnd(),e.\u0275\u0275i18nEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275element(16,"cd-copy-2-clipboard-button",14),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(17,"cd-form-button-panel",15),e.\u0275\u0275listener("cancel",function(){return _.closeModal()}),e.\u0275\u0275elementEnd()()()),2&o&&(e.\u0275\u0275property("open",_.open)("hasScrollingContent",!1),e.\u0275\u0275advance(5),e.\u0275\u0275i18nExp(e.\u0275\u0275pipeBind1(4,8,_.action))(e.\u0275\u0275pipeBind1(5,10,_.resource)),e.\u0275\u0275i18nApply(3),e.\u0275\u0275advance(6),e.\u0275\u0275twoWayProperty("ngModel",_.user),e.\u0275\u0275advance(4),e.\u0275\u0275twoWayProperty("ngModel",_.secret_key),e.\u0275\u0275advance(2),e.\u0275\u0275property("showSubmit",!1)("modalForm",!0))},dependencies:[_t.N,_e.e,Y.S,l.\u0275NgNoValidate,l.DefaultValueAccessor,l.NgControlStatus,l.NgControlStatusGroup,l.NgModel,l.NgForm,d.Modal,d.ModalHeader,d.ModalContent,d.ModalHeaderHeading,d.TextInputLabelComponent,d.PasswordInputLabelComponent,d.TextInput,d.PasswordInput,E.TitleCasePipe,Ie.r]})}}return n})();var Ft=g(13723),rn=g(42865),jl=g(45757);const Yl=()=>({md:4}),eo=n=>({"form-item":n});function Ql(n,i){1&n&&(e.\u0275\u0275elementStart(0,"option",110),e.\u0275\u0275i18n(1,27),e.\u0275\u0275elementEnd()),2&n&&e.\u0275\u0275property("ngValue",null)}function Jl(n,i){1&n&&(e.\u0275\u0275elementStart(0,"option",111),e.\u0275\u0275i18n(1,28),e.\u0275\u0275elementEnd()),2&n&&e.\u0275\u0275property("value","")}function es(n,i){if(1&n&&(e.\u0275\u0275elementStart(0,"option",111),e.\u0275\u0275text(1),e.\u0275\u0275elementEnd()),2&n){const t=i.$implicit;e.\u0275\u0275property("value",t.id),e.\u0275\u0275advance(),e.\u0275\u0275textInterpolate2("",t.name," ",t.tenant?"- "+t.tenant:"","")}}function ts(n,i){1&n&&(e.\u0275\u0275elementStart(0,"span",113),e.\u0275\u0275i18n(1,29),e.\u0275\u0275elementEnd())}function ns(n,i){if(1&n&&e.\u0275\u0275template(0,ts,2,0,"span",112),2&n){e.\u0275\u0275nextContext(2);const t=e.\u0275\u0275reference(2),o=e.\u0275\u0275nextContext();e.\u0275\u0275property("ngIf",o.userForm.showError("account_id",t,"tenantedAccount"))}}function os(n,i){1&n&&(e.\u0275\u0275elementStart(0,"div"),e.\u0275\u0275i18n(1,30),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(2,"div"),e.\u0275\u0275i18n(3,31),e.\u0275\u0275elementEnd())}function _s(n,i){1&n&&(e.\u0275\u0275elementStart(0,"div",85)(1,"cds-checkbox",114),e.\u0275\u0275i18nStart(2,32),e.\u0275\u0275element(3,"cd-help-text"),e.\u0275\u0275i18nEnd(),e.\u0275\u0275elementEnd()())}function is(n,i){if(1&n&&(e.\u0275\u0275elementStart(0,"div",85)(1,"cds-select",106),e.\u0275\u0275template(2,Ql,2,1,"option",107)(3,Jl,2,1,"option",108)(4,es,2,3,"option",109),e.\u0275\u0275elementEnd(),e.\u0275\u0275template(5,ns,1,1,"ng-template",null,4,e.\u0275\u0275templateRefExtractor)(7,os,4,0,"ng-template",null,5,e.\u0275\u0275templateRefExtractor),e.\u0275\u0275elementEnd(),e.\u0275\u0275template(9,_s,4,0,"div",89)),2&n){const t=e.\u0275\u0275reference(6),o=e.\u0275\u0275reference(8),_=e.\u0275\u0275nextContext(2);e.\u0275\u0275advance(),e.\u0275\u0275property("invalid",_.userForm.controls.account_id.invalid&&_.userForm.controls.account_id.dirty)("invalidText",t)("helperText",o),e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf",null===_.accounts),e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf",null!==_.accounts),e.\u0275\u0275advance(),e.\u0275\u0275property("ngForOf",_.accounts),e.\u0275\u0275advance(5),e.\u0275\u0275property("ngIf",_.userForm.getValue("account_id"))}}function as(n,i){1&n&&(e.\u0275\u0275elementStart(0,"span",113),e.\u0275\u0275i18n(1,33),e.\u0275\u0275elementEnd())}function rs(n,i){1&n&&(e.\u0275\u0275elementStart(0,"span",113),e.\u0275\u0275i18n(1,34),e.\u0275\u0275elementEnd())}function ls(n,i){1&n&&(e.\u0275\u0275elementStart(0,"span",113),e.\u0275\u0275i18n(1,35),e.\u0275\u0275elementEnd())}function ss(n,i){if(1&n&&e.\u0275\u0275template(0,as,2,0,"span",112)(1,rs,2,0,"span",112)(2,ls,2,0,"span",112),2&n){e.\u0275\u0275nextContext();const t=e.\u0275\u0275reference(2),o=e.\u0275\u0275nextContext();e.\u0275\u0275property("ngIf",o.userForm.showError("user_id",t,"required")),e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf",o.userForm.showError("user_id",t,"pattern")),e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf",!o.userForm.getValue("show_tenant")&&o.userForm.showError("user_id",t,"notUnique"))}}function cs(n,i){1&n&&(e.\u0275\u0275elementStart(0,"span",113),e.\u0275\u0275i18n(1,37),e.\u0275\u0275elementEnd())}function ds(n,i){1&n&&(e.\u0275\u0275elementStart(0,"span",113),e.\u0275\u0275i18n(1,38),e.\u0275\u0275elementEnd())}function us(n,i){if(1&n&&e.\u0275\u0275template(0,cs,2,0,"span",112)(1,ds,2,0,"span",112),2&n){e.\u0275\u0275nextContext(2);const t=e.\u0275\u0275reference(2),o=e.\u0275\u0275nextContext();e.\u0275\u0275property("ngIf",o.userForm.showError("tenant",t,"pattern")),e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf",o.userForm.showError("tenant",t,"notUnique"))}}function ps(n,i){if(1&n&&(e.\u0275\u0275elementStart(0,"div",85)(1,"cds-text-label",115),e.\u0275\u0275i18nStart(2,36),e.\u0275\u0275element(3,"input",116),e.\u0275\u0275i18nEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275template(4,us,2,2,"ng-template",null,6,e.\u0275\u0275templateRefExtractor),e.\u0275\u0275elementEnd()),2&n){const t=e.\u0275\u0275reference(5),o=e.\u0275\u0275nextContext(2);e.\u0275\u0275advance(),e.\u0275\u0275property("invalid",o.userForm.controls.tenant.invalid&&o.userForm.controls.tenant.dirty)("invalidText",t),e.\u0275\u0275advance(2),e.\u0275\u0275property("invalid",o.userForm.controls.tenant.invalid&&o.userForm.controls.tenant.dirty)("readonly",o.editing)}}function ms(n,i){1&n&&(e.\u0275\u0275elementStart(0,"span",113),e.\u0275\u0275i18n(1,39),e.\u0275\u0275elementEnd())}function Ts(n,i){1&n&&(e.\u0275\u0275elementStart(0,"span",113),e.\u0275\u0275i18n(1,40),e.\u0275\u0275elementEnd())}function gs(n,i){if(1&n&&e.\u0275\u0275template(0,ms,2,0,"span",112)(1,Ts,2,0,"span",112),2&n){e.\u0275\u0275nextContext();const t=e.\u0275\u0275reference(2),o=e.\u0275\u0275nextContext();e.\u0275\u0275property("ngIf",o.userForm.showError("display_name",t,"required")),e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf",o.userForm.showError("display_name",t,"pattern"))}}function Es(n,i){1&n&&(e.\u0275\u0275elementStart(0,"span",113),e.\u0275\u0275i18n(1,41),e.\u0275\u0275elementEnd())}function Rs(n,i){1&n&&(e.\u0275\u0275elementStart(0,"span",113),e.\u0275\u0275i18n(1,42),e.\u0275\u0275elementEnd())}function Cs(n,i){if(1&n&&e.\u0275\u0275template(0,Es,2,0,"span",112)(1,Rs,2,0,"span",112),2&n){e.\u0275\u0275nextContext();const t=e.\u0275\u0275reference(2),o=e.\u0275\u0275nextContext();e.\u0275\u0275property("ngIf",o.userForm.showError("email",t,"email")),e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf",o.userForm.showError("email",t,"notUnique"))}}function fs(n,i){1&n&&(e.\u0275\u0275elementStart(0,"span",113),e.\u0275\u0275i18n(1,44),e.\u0275\u0275elementEnd())}function Ss(n,i){if(1&n&&(e.\u0275\u0275template(0,fs,2,0,"span",112),e.\u0275\u0275elementStart(1,"span",113),e.\u0275\u0275i18n(2,43),e.\u0275\u0275elementEnd()),2&n){e.\u0275\u0275nextContext(2);const t=e.\u0275\u0275reference(2),o=e.\u0275\u0275nextContext();e.\u0275\u0275property("ngIf",o.userForm.showError("max_buckets",t,"required"))}}function Fs(n,i){if(1&n&&(e.\u0275\u0275elementStart(0,"div",85),e.\u0275\u0275element(1,"cds-number",117),e.\u0275\u0275template(2,Ss,3,1,"ng-template",null,7,e.\u0275\u0275templateRefExtractor),e.\u0275\u0275elementEnd()),2&n){const t=e.\u0275\u0275reference(3),o=e.\u0275\u0275nextContext(2);e.\u0275\u0275advance(),e.\u0275\u0275property("invalid",o.userForm.controls.max_buckets.invalid&&o.userForm.controls.max_buckets.dirty)("invalidText",t)}}function Ms(n,i){if(1&n){const t=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"fieldset")(1,"div",85)(2,"legend",101),e.\u0275\u0275i18n(3,45),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(4,"cds-combo-box",118),e.\u0275\u0275listener("selected",function(_){e.\u0275\u0275restoreView(t);const a=e.\u0275\u0275nextContext(2);return e.\u0275\u0275resetView(a.multiSelector(_))}),e.\u0275\u0275i18nStart(5,46),e.\u0275\u0275element(6,"cds-dropdown-list"),e.\u0275\u0275i18nEnd(),e.\u0275\u0275elementEnd()()()}if(2&n){const t=e.\u0275\u0275nextContext(2);e.\u0275\u0275advance(4),e.\u0275\u0275property("appendInline",!0)("items",t.managedPolicies)}}function Ps(n,i){1&n&&(e.\u0275\u0275elementStart(0,"span",113),e.\u0275\u0275i18n(1,50),e.\u0275\u0275elementEnd())}function Is(n,i){if(1&n&&e.\u0275\u0275template(0,Ps,2,0,"span",112),2&n){e.\u0275\u0275nextContext(3);const t=e.\u0275\u0275reference(2),o=e.\u0275\u0275nextContext();e.\u0275\u0275property("ngIf",o.userForm.showError("access_key",t,"required"))}}function Os(n,i){if(1&n&&(e.\u0275\u0275elementStart(0,"div",121)(1,"cds-password-label",122),e.\u0275\u0275i18nStart(2,49),e.\u0275\u0275element(3,"input",123),e.\u0275\u0275i18nEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275element(4,"cd-copy-2-clipboard-button",124),e.\u0275\u0275template(5,Is,1,1,"ng-template",null,8,e.\u0275\u0275templateRefExtractor),e.\u0275\u0275elementEnd()),2&n){const t=e.\u0275\u0275reference(6),o=e.\u0275\u0275nextContext(3);e.\u0275\u0275advance(),e.\u0275\u0275property("invalid",o.userForm.controls.access_key.invalid&&o.userForm.controls.access_key.dirty)("invalidText",t),e.\u0275\u0275advance(2),e.\u0275\u0275property("invalid",o.userForm.controls.access_key.invalid&&o.userForm.controls.access_key.dirty)}}function Gs(n,i){1&n&&(e.\u0275\u0275elementStart(0,"span",113),e.\u0275\u0275i18n(1,52),e.\u0275\u0275elementEnd())}function Ns(n,i){if(1&n&&e.\u0275\u0275template(0,Gs,2,0,"span",112),2&n){e.\u0275\u0275nextContext(3);const t=e.\u0275\u0275reference(2),o=e.\u0275\u0275nextContext();e.\u0275\u0275property("ngIf",o.userForm.showError("secret_key",t,"required"))}}function As(n,i){if(1&n&&(e.\u0275\u0275elementStart(0,"div",121)(1,"cds-password-label",125),e.\u0275\u0275i18nStart(2,51),e.\u0275\u0275element(3,"input",126),e.\u0275\u0275i18nEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275element(4,"cd-copy-2-clipboard-button",127),e.\u0275\u0275template(5,Ns,1,1,"ng-template",null,9,e.\u0275\u0275templateRefExtractor),e.\u0275\u0275elementEnd()),2&n){const t=e.\u0275\u0275reference(6),o=e.\u0275\u0275nextContext(3);e.\u0275\u0275advance(),e.\u0275\u0275property("invalid",o.userForm.controls.secret_key.invalid&&o.userForm.controls.secret_key.dirty)("invalidText",t),e.\u0275\u0275advance(2),e.\u0275\u0275property("invalid",o.userForm.controls.secret_key.invalid&&o.userForm.controls.secret_key.dirty)}}function hs(n,i){if(1&n&&(e.\u0275\u0275elementStart(0,"fieldset")(1,"legend",101),e.\u0275\u0275i18n(2,47),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(3,"div",85)(4,"cds-checkbox",119),e.\u0275\u0275i18n(5,48),e.\u0275\u0275elementEnd()(),e.\u0275\u0275template(6,Os,7,3,"div",120)(7,As,7,3,"div",120),e.\u0275\u0275elementEnd()),2&n){const t=e.\u0275\u0275nextContext(2);e.\u0275\u0275advance(6),e.\u0275\u0275property("ngIf",!t.editing&&!t.userForm.getValue("generate_key")),e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf",!t.editing&&!t.userForm.getValue("generate_key"))}}function bs(n,i){1&n&&(e.\u0275\u0275elementStart(0,"span",134)(1,"span",135),e.\u0275\u0275i18n(2,55),e.\u0275\u0275elementEnd()())}function vs(n,i){if(1&n){const t=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementContainerStart(0),e.\u0275\u0275elementStart(1,"div",136)(2,"div",131)(3,"cds-text-label"),e.\u0275\u0275text(4,"Subuser id "),e.\u0275\u0275element(5,"input",137),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(6,"div",131)(7,"cds-text-label"),e.\u0275\u0275text(8,"Permissions "),e.\u0275\u0275element(9,"input",137),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(10,"cds-icon-button",138),e.\u0275\u0275listener("click",function(){const _=e.\u0275\u0275restoreView(t).index,a=e.\u0275\u0275nextContext(3);return e.\u0275\u0275resetView(a.showSubuserModal(_))}),e.\u0275\u0275namespaceSVG(),e.\u0275\u0275element(11,"svg",133),e.\u0275\u0275elementEnd(),e.\u0275\u0275namespaceHTML(),e.\u0275\u0275elementStart(12,"cds-icon-button",139),e.\u0275\u0275listener("click",function(){const _=e.\u0275\u0275restoreView(t).index,a=e.\u0275\u0275nextContext(3);return e.\u0275\u0275resetView(a.deleteSubuser(_))}),e.\u0275\u0275namespaceSVG(),e.\u0275\u0275elementStart(13,"svg",133),e.\u0275\u0275text(14,">"),e.\u0275\u0275elementEnd()()(),e.\u0275\u0275elementContainerEnd()}if(2&n){const t=i.$implicit,o=i.index,_=e.\u0275\u0275nextContext(3);e.\u0275\u0275advance(),e.\u0275\u0275property("ngClass",e.\u0275\u0275pureFunction1(7,eo,o>0)),e.\u0275\u0275advance(4),e.\u0275\u0275property("value",t.id),e.\u0275\u0275advance(4),e.\u0275\u0275property("value","full-control"===t.permissions?"full":t.permissions),e.\u0275\u0275advance(2),e.\u0275\u0275property("cdsIcon",_.icons.edit)("size",_.icons.size32),e.\u0275\u0275advance(2),e.\u0275\u0275property("cdsIcon",_.icons.trash)("size",_.icons.size32)}}function Ls(n,i){if(1&n){const t=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"fieldset")(1,"div",85)(2,"legend",101),e.\u0275\u0275i18n(3,53),e.\u0275\u0275elementEnd(),e.\u0275\u0275template(4,bs,3,0,"span",128)(5,vs,15,9,"ng-container",129),e.\u0275\u0275elementStart(6,"div",130)(7,"div",131)(8,"button",132),e.\u0275\u0275listener("click",function(){e.\u0275\u0275restoreView(t);const _=e.\u0275\u0275nextContext(2);return e.\u0275\u0275resetView(_.showSubuserModal())}),e.\u0275\u0275elementContainerStart(9),e.\u0275\u0275i18n(10,54),e.\u0275\u0275pipe(11,"titlecase"),e.\u0275\u0275pipe(12,"upperFirst"),e.\u0275\u0275elementContainerEnd(),e.\u0275\u0275namespaceSVG(),e.\u0275\u0275element(13,"svg",133),e.\u0275\u0275elementEnd()()()()()}if(2&n){const t=e.\u0275\u0275nextContext(2);e.\u0275\u0275advance(4),e.\u0275\u0275property("ngIf",0===t.subusers.length),e.\u0275\u0275advance(),e.\u0275\u0275property("ngForOf",t.subusers),e.\u0275\u0275advance(7),e.\u0275\u0275i18nExp(e.\u0275\u0275pipeBind1(11,6,t.actionLabels.CREATE))(e.\u0275\u0275pipeBind1(12,8,t.subuserLabel)),e.\u0275\u0275i18nApply(10),e.\u0275\u0275advance(),e.\u0275\u0275property("cdsIcon",t.icons.add)("size",t.icons.size32)}}function ys(n,i){1&n&&(e.\u0275\u0275elementStart(0,"span",134)(1,"span",135),e.\u0275\u0275i18n(2,58),e.\u0275\u0275elementEnd()())}function $s(n,i){if(1&n){const t=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"span")(1,"div",141)(2,"div",131)(3,"cds-text-label"),e.\u0275\u0275element(4,"input",137),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(5,"cds-icon-button",142),e.\u0275\u0275listener("click",function(){const _=e.\u0275\u0275restoreView(t).index,a=e.\u0275\u0275nextContext(3);return e.\u0275\u0275resetView(a.showS3KeyModal(_))}),e.\u0275\u0275namespaceSVG(),e.\u0275\u0275element(6,"svg",133),e.\u0275\u0275elementEnd(),e.\u0275\u0275namespaceHTML(),e.\u0275\u0275elementStart(7,"cds-icon-button",143),e.\u0275\u0275listener("click",function(){const _=e.\u0275\u0275restoreView(t).index,a=e.\u0275\u0275nextContext(3);return e.\u0275\u0275resetView(a.deleteS3Key(_))}),e.\u0275\u0275namespaceSVG(),e.\u0275\u0275element(8,"svg",133),e.\u0275\u0275elementEnd()(),e.\u0275\u0275namespaceHTML(),e.\u0275\u0275element(9,"span",135),e.\u0275\u0275elementEnd()}if(2&n){const t=i.$implicit,o=e.\u0275\u0275nextContext(3);e.\u0275\u0275advance(4),e.\u0275\u0275property("value",t.user),e.\u0275\u0275advance(2),e.\u0275\u0275property("cdsIcon",o.icons.edit)("size",o.icons.size16),e.\u0275\u0275advance(2),e.\u0275\u0275property("cdsIcon",o.icons.trash)("size",o.icons.size32)}}function Ds(n,i){1&n&&(e.\u0275\u0275elementStart(0,"span",134)(1,"span",135),e.\u0275\u0275i18n(2,59),e.\u0275\u0275elementEnd()())}function Ws(n,i){if(1&n){const t=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"span")(1,"div",141)(2,"div",131)(3,"cds-text-label"),e.\u0275\u0275element(4,"input",137),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(5,"cds-icon-button",144),e.\u0275\u0275listener("click",function(){const _=e.\u0275\u0275restoreView(t).index,a=e.\u0275\u0275nextContext(3);return e.\u0275\u0275resetView(a.showSwiftKeyModal(_))}),e.\u0275\u0275namespaceSVG(),e.\u0275\u0275element(6,"svg",133),e.\u0275\u0275elementEnd()()()}if(2&n){const t=i.$implicit,o=e.\u0275\u0275nextContext(3);e.\u0275\u0275advance(4),e.\u0275\u0275property("value",t.user),e.\u0275\u0275advance(2),e.\u0275\u0275property("cdsIcon",o.icons.show)("size",o.icons.size16)}}function xs(n,i){if(1&n){const t=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"fieldset")(1,"div",85)(2,"legend",101),e.\u0275\u0275i18n(3,56),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(4,"h6"),e.\u0275\u0275text(5,"S3"),e.\u0275\u0275elementEnd(),e.\u0275\u0275template(6,ys,3,0,"span",128)(7,$s,10,5,"span",129),e.\u0275\u0275elementStart(8,"div",130)(9,"div",131)(10,"button",140),e.\u0275\u0275listener("click",function(){e.\u0275\u0275restoreView(t);const _=e.\u0275\u0275nextContext(2);return e.\u0275\u0275resetView(_.showS3KeyModal())}),e.\u0275\u0275elementContainerStart(11),e.\u0275\u0275i18n(12,57),e.\u0275\u0275pipe(13,"titlecase"),e.\u0275\u0275pipe(14,"upperFirst"),e.\u0275\u0275elementContainerEnd(),e.\u0275\u0275namespaceSVG(),e.\u0275\u0275element(15,"svg",133),e.\u0275\u0275elementEnd()()(),e.\u0275\u0275namespaceHTML(),e.\u0275\u0275element(16,"hr"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(17,"div",85)(18,"h6"),e.\u0275\u0275text(19,"Swift"),e.\u0275\u0275elementEnd(),e.\u0275\u0275template(20,Ds,3,0,"span",128)(21,Ws,7,3,"span",129),e.\u0275\u0275elementEnd()()}if(2&n){const t=e.\u0275\u0275nextContext(2);e.\u0275\u0275advance(6),e.\u0275\u0275property("ngIf",0===t.s3Keys.length),e.\u0275\u0275advance(),e.\u0275\u0275property("ngForOf",t.s3Keys),e.\u0275\u0275advance(7),e.\u0275\u0275i18nExp(e.\u0275\u0275pipeBind1(13,8,t.actionLabels.CREATE))(e.\u0275\u0275pipeBind1(14,10,t.s3keyLabel)),e.\u0275\u0275i18nApply(12),e.\u0275\u0275advance(),e.\u0275\u0275property("cdsIcon",t.icons.add)("size",t.icons.size32),e.\u0275\u0275advance(5),e.\u0275\u0275property("ngIf",0===t.swiftKeys.length),e.\u0275\u0275advance(),e.\u0275\u0275property("ngForOf",t.swiftKeys)}}function ws(n,i){1&n&&(e.\u0275\u0275elementStart(0,"span",134)(1,"span",135),e.\u0275\u0275i18n(2,62),e.\u0275\u0275elementEnd()())}function Us(n,i){if(1&n){const t=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"span")(1,"div",136)(2,"div",131)(3,"cds-text-label"),e.\u0275\u0275i18nStart(4,63),e.\u0275\u0275element(5,"input",137),e.\u0275\u0275i18nEnd(),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(6,"div",131)(7,"cds-text-label"),e.\u0275\u0275i18nStart(8,64),e.\u0275\u0275element(9,"input",137),e.\u0275\u0275i18nEnd(),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(10,"cds-icon-button",146),e.\u0275\u0275listener("click",function(){const _=e.\u0275\u0275restoreView(t).index,a=e.\u0275\u0275nextContext(3);return e.\u0275\u0275resetView(a.showCapabilityModal(_))}),e.\u0275\u0275namespaceSVG(),e.\u0275\u0275element(11,"svg",133),e.\u0275\u0275elementEnd(),e.\u0275\u0275namespaceHTML(),e.\u0275\u0275elementStart(12,"cds-icon-button",147),e.\u0275\u0275listener("click",function(){const _=e.\u0275\u0275restoreView(t).index,a=e.\u0275\u0275nextContext(3);return e.\u0275\u0275resetView(a.deleteCapability(_))}),e.\u0275\u0275namespaceSVG(),e.\u0275\u0275element(13,"svg",133),e.\u0275\u0275elementEnd()(),e.\u0275\u0275namespaceHTML(),e.\u0275\u0275element(14,"span",135),e.\u0275\u0275elementEnd()}if(2&n){const t=i.$implicit,o=i.index,_=e.\u0275\u0275nextContext(3);e.\u0275\u0275advance(),e.\u0275\u0275property("ngClass",e.\u0275\u0275pureFunction1(7,eo,o>0)),e.\u0275\u0275advance(4),e.\u0275\u0275property("value",t.type),e.\u0275\u0275advance(4),e.\u0275\u0275property("value",t.perm),e.\u0275\u0275advance(2),e.\u0275\u0275property("cdsIcon",_.icons.edit)("size",_.icons.size16),e.\u0275\u0275advance(2),e.\u0275\u0275property("cdsIcon",_.icons.trash)("size",_.icons.size32)}}function ks(n,i){if(1&n){const t=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"fieldset")(1,"div",85)(2,"legend",101),e.\u0275\u0275i18n(3,60),e.\u0275\u0275elementEnd(),e.\u0275\u0275template(4,ws,3,0,"span",128)(5,Us,15,9,"span",129),e.\u0275\u0275elementStart(6,"div",130)(7,"div",131)(8,"button",145),e.\u0275\u0275pipe(9,"pipeFunction"),e.\u0275\u0275pipe(10,"pipeFunction"),e.\u0275\u0275listener("click",function(){e.\u0275\u0275restoreView(t);const _=e.\u0275\u0275nextContext(2);return e.\u0275\u0275resetView(_.showCapabilityModal())}),e.\u0275\u0275elementContainerStart(11),e.\u0275\u0275i18n(12,61),e.\u0275\u0275pipe(13,"titlecase"),e.\u0275\u0275pipe(14,"upperFirst"),e.\u0275\u0275elementContainerEnd(),e.\u0275\u0275namespaceSVG(),e.\u0275\u0275element(15,"svg",133),e.\u0275\u0275elementEnd()()()()()}if(2&n){const t=e.\u0275\u0275nextContext(2);e.\u0275\u0275advance(4),e.\u0275\u0275property("ngIf",0===t.capabilities.length),e.\u0275\u0275advance(),e.\u0275\u0275property("ngForOf",t.capabilities),e.\u0275\u0275advance(3),e.\u0275\u0275property("disabled",e.\u0275\u0275pipeBind2(9,8,t.capabilities,t.hasAllCapabilities))("disableTooltip",!e.\u0275\u0275pipeBind2(10,11,t.capabilities,t.hasAllCapabilities)),e.\u0275\u0275advance(6),e.\u0275\u0275i18nExp(e.\u0275\u0275pipeBind1(13,14,t.actionLabels.ADD))(e.\u0275\u0275pipeBind1(14,16,t.capabilityLabel)),e.\u0275\u0275i18nApply(12),e.\u0275\u0275advance(),e.\u0275\u0275property("cdsIcon",t.icons.add)("size",t.icons.size32)}}function zs(n,i){1&n&&(e.\u0275\u0275elementStart(0,"div",85)(1,"cds-checkbox",148),e.\u0275\u0275i18n(2,65),e.\u0275\u0275elementEnd()())}function Hs(n,i){1&n&&(e.\u0275\u0275elementStart(0,"span",113),e.\u0275\u0275i18n(1,67),e.\u0275\u0275elementEnd())}function Xs(n,i){1&n&&(e.\u0275\u0275elementStart(0,"span",113),e.\u0275\u0275i18n(1,68),e.\u0275\u0275elementEnd())}function Bs(n,i){1&n&&(e.\u0275\u0275elementStart(0,"span",113),e.\u0275\u0275i18n(1,69),e.\u0275\u0275elementEnd())}function Vs(n,i){if(1&n&&e.\u0275\u0275template(0,Hs,2,0,"span",112)(1,Xs,2,0,"span",112)(2,Bs,2,0,"span",112),2&n){e.\u0275\u0275nextContext(2);const t=e.\u0275\u0275reference(2),o=e.\u0275\u0275nextContext();e.\u0275\u0275property("ngIf",o.userForm.showError("user_quota_max_size",t,"required")),e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf",o.userForm.showError("user_quota_max_size",t,"quotaMaxSize")),e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf",o.userForm.showError("user_quota_max_size",o.formDir,"pattern"))}}function Zs(n,i){if(1&n&&(e.\u0275\u0275elementStart(0,"div",85)(1,"cds-text-label",149),e.\u0275\u0275i18nStart(2,66),e.\u0275\u0275element(3,"input",150),e.\u0275\u0275i18nEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275template(4,Vs,3,3,"ng-template",null,10,e.\u0275\u0275templateRefExtractor),e.\u0275\u0275elementEnd()),2&n){const t=e.\u0275\u0275reference(5),o=e.\u0275\u0275nextContext(2);e.\u0275\u0275advance(),e.\u0275\u0275property("invalid",o.userForm.controls.user_quota_max_size.invalid&&o.userForm.controls.user_quota_max_size.dirty)("invalidText",t),e.\u0275\u0275advance(2),e.\u0275\u0275property("invalid",o.userForm.controls.user_quota_max_size.invalid&&o.userForm.controls.user_quota_max_size.dirty)}}function Ks(n,i){1&n&&(e.\u0275\u0275elementStart(0,"div",85)(1,"cds-checkbox",151),e.\u0275\u0275i18n(2,70),e.\u0275\u0275elementEnd()())}function qs(n,i){1&n&&(e.\u0275\u0275elementStart(0,"span",113),e.\u0275\u0275i18n(1,71),e.\u0275\u0275elementEnd())}function js(n,i){1&n&&(e.\u0275\u0275elementStart(0,"span",113),e.\u0275\u0275i18n(1,72),e.\u0275\u0275elementEnd())}function Ys(n,i){if(1&n&&e.\u0275\u0275template(0,qs,2,0,"span",112)(1,js,2,0,"span",112),2&n){e.\u0275\u0275nextContext(2);const t=e.\u0275\u0275reference(2),o=e.\u0275\u0275nextContext();e.\u0275\u0275property("ngIf",o.userForm.showError("user_quota_max_objects",t,"required")),e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf",o.userForm.showError("user_quota_max_objects",t,"min"))}}function Qs(n,i){if(1&n&&(e.\u0275\u0275elementStart(0,"div",85),e.\u0275\u0275element(1,"cds-number",152),e.\u0275\u0275template(2,Ys,2,2,"ng-template",null,11,e.\u0275\u0275templateRefExtractor),e.\u0275\u0275elementEnd()),2&n){const t=e.\u0275\u0275reference(3),o=e.\u0275\u0275nextContext(2);e.\u0275\u0275advance(),e.\u0275\u0275property("min",0)("invalid",o.userForm.controls.user_quota_max_objects.invalid&&o.userForm.controls.user_quota_max_objects.dirty)("invalidText",t)}}function Js(n,i){1&n&&(e.\u0275\u0275elementStart(0,"div",85)(1,"cds-checkbox",153),e.\u0275\u0275i18n(2,73),e.\u0275\u0275elementEnd()())}function ec(n,i){1&n&&(e.\u0275\u0275elementStart(0,"span",113),e.\u0275\u0275i18n(1,75),e.\u0275\u0275elementEnd())}function tc(n,i){1&n&&(e.\u0275\u0275elementStart(0,"span",113),e.\u0275\u0275i18n(1,76),e.\u0275\u0275elementEnd())}function nc(n,i){1&n&&(e.\u0275\u0275elementStart(0,"span",113),e.\u0275\u0275i18n(1,77),e.\u0275\u0275elementEnd())}function oc(n,i){if(1&n&&e.\u0275\u0275template(0,ec,2,0,"span",112)(1,tc,2,0,"span",112)(2,nc,2,0,"span",112),2&n){e.\u0275\u0275nextContext(2);const t=e.\u0275\u0275reference(2),o=e.\u0275\u0275nextContext();e.\u0275\u0275property("ngIf",o.userForm.showError("bucket_quota_max_size",t,"required")),e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf",o.userForm.showError("bucket_quota_max_size",t,"quotaMaxSize")),e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf",o.userForm.showError("bucket_quota_max_size",o.formDir,"pattern"))}}function _c(n,i){if(1&n&&(e.\u0275\u0275elementStart(0,"div",85)(1,"cds-text-label",154),e.\u0275\u0275i18nStart(2,74),e.\u0275\u0275element(3,"input",155),e.\u0275\u0275i18nEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275template(4,oc,3,3,"ng-template",null,12,e.\u0275\u0275templateRefExtractor),e.\u0275\u0275elementEnd()),2&n){const t=e.\u0275\u0275reference(5),o=e.\u0275\u0275nextContext(2);e.\u0275\u0275advance(),e.\u0275\u0275property("invalid",o.userForm.controls.bucket_quota_max_size.invalid&&o.userForm.controls.bucket_quota_max_size.dirty)("invalidText",t),e.\u0275\u0275advance(2),e.\u0275\u0275property("invalid",o.userForm.controls.bucket_quota_max_size.invalid&&o.userForm.controls.bucket_quota_max_size.dirty)}}function ic(n,i){1&n&&(e.\u0275\u0275elementStart(0,"div",85)(1,"cds-checkbox",156),e.\u0275\u0275i18n(2,78),e.\u0275\u0275elementEnd()())}function ac(n,i){1&n&&(e.\u0275\u0275elementStart(0,"span",113),e.\u0275\u0275i18n(1,79),e.\u0275\u0275elementEnd())}function rc(n,i){1&n&&(e.\u0275\u0275elementStart(0,"span",113),e.\u0275\u0275i18n(1,80),e.\u0275\u0275elementEnd())}function lc(n,i){if(1&n&&e.\u0275\u0275template(0,ac,2,0,"span",112)(1,rc,2,0,"span",112),2&n){e.\u0275\u0275nextContext(2);const t=e.\u0275\u0275reference(2),o=e.\u0275\u0275nextContext();e.\u0275\u0275property("ngIf",o.userForm.showError("bucket_quota_max_objects",t,"required")),e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf",o.userForm.showError("bucket_quota_max_objects",t,"min"))}}function sc(n,i){if(1&n&&(e.\u0275\u0275elementStart(0,"div",85),e.\u0275\u0275element(1,"cds-number",157),e.\u0275\u0275template(2,lc,2,2,"ng-template",null,13,e.\u0275\u0275templateRefExtractor),e.\u0275\u0275elementEnd()),2&n){const t=e.\u0275\u0275reference(3),o=e.\u0275\u0275nextContext(2);e.\u0275\u0275advance(),e.\u0275\u0275property("min",0)("invalid",o.userForm.controls.bucket_quota_max_objects.invalid&&o.userForm.controls.bucket_quota_max_objects.dirty)("invalidText",t)}}function cc(n,i){if(1&n){const t=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"div",82)(1,"form",83,0)(3,"div",84),e.\u0275\u0275i18n(4,14),e.\u0275\u0275pipe(5,"titlecase"),e.\u0275\u0275pipe(6,"upperFirst"),e.\u0275\u0275elementEnd(),e.\u0275\u0275template(7,is,10,7),e.\u0275\u0275elementStart(8,"div",85)(9,"cds-text-label",86),e.\u0275\u0275i18nStart(10,15),e.\u0275\u0275element(11,"input",87),e.\u0275\u0275i18nEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275template(12,ss,3,3,"ng-template",null,1,e.\u0275\u0275templateRefExtractor),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(14,"div",85)(15,"cds-checkbox",88),e.\u0275\u0275listener("checkedChange",function(){e.\u0275\u0275restoreView(t);const _=e.\u0275\u0275nextContext();return e.\u0275\u0275resetView(_.updateFieldsWhenTenanted())}),e.\u0275\u0275text(16,"Show Tenant "),e.\u0275\u0275elementEnd()(),e.\u0275\u0275template(17,ps,6,4,"div",89),e.\u0275\u0275elementStart(18,"div",85)(19,"cds-text-label",90),e.\u0275\u0275i18nStart(20,16),e.\u0275\u0275element(21,"input",91),e.\u0275\u0275i18nEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275template(22,gs,2,2,"ng-template",null,2,e.\u0275\u0275templateRefExtractor),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(24,"div",85)(25,"cds-text-label",92),e.\u0275\u0275i18nStart(26,17),e.\u0275\u0275element(27,"input",93),e.\u0275\u0275i18nEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275template(28,Cs,2,2,"ng-template",null,3,e.\u0275\u0275templateRefExtractor),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(30,"div",85)(31,"cds-select",94),e.\u0275\u0275listener("valueChange",function(_){e.\u0275\u0275restoreView(t);const a=e.\u0275\u0275nextContext();return e.\u0275\u0275resetView(a.onMaxBucketsModeChange(_))}),e.\u0275\u0275elementStart(32,"option",95),e.\u0275\u0275i18n(33,18),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(34,"option",96),e.\u0275\u0275i18n(35,19),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(36,"option",97),e.\u0275\u0275i18n(37,20),e.\u0275\u0275elementEnd()()(),e.\u0275\u0275template(38,Fs,4,2,"div",89),e.\u0275\u0275elementStart(39,"div",85)(40,"cds-checkbox",98),e.\u0275\u0275i18nStart(41,21),e.\u0275\u0275element(42,"cd-help-text"),e.\u0275\u0275i18nEnd(),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(43,"div",85)(44,"cds-checkbox",99),e.\u0275\u0275i18nStart(45,22),e.\u0275\u0275element(46,"cd-help-text"),e.\u0275\u0275i18nEnd(),e.\u0275\u0275elementEnd()(),e.\u0275\u0275template(47,Ms,7,2,"fieldset")(48,hs,8,2,"fieldset",100)(49,Ls,14,10,"fieldset",100)(50,xs,22,12,"fieldset",100)(51,ks,16,18,"fieldset",100),e.\u0275\u0275elementStart(52,"fieldset")(53,"div",85)(54,"legend",101),e.\u0275\u0275i18n(55,23),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(56,"cds-checkbox",102),e.\u0275\u0275i18n(57,24),e.\u0275\u0275elementEnd()(),e.\u0275\u0275template(58,zs,3,0,"div",89)(59,Zs,6,3,"div",89)(60,Ks,3,0,"div",89)(61,Qs,4,3,"div",89),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(62,"fieldset")(63,"div",85)(64,"legend",101),e.\u0275\u0275i18n(65,25),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(66,"cds-checkbox",103),e.\u0275\u0275i18n(67,26),e.\u0275\u0275elementEnd()(),e.\u0275\u0275template(68,Js,3,0,"div",89)(69,_c,6,3,"div",89)(70,ic,3,0,"div",89)(71,sc,4,3,"div",89),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(72,"cd-form-advanced-fieldset")(73,"cd-rgw-rate-limit",104),e.\u0275\u0275listener("rateLimitFormGroup",function(_){e.\u0275\u0275restoreView(t);const a=e.\u0275\u0275nextContext();return e.\u0275\u0275resetView(a.rateLimitFormInit(_))}),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(74,"cd-form-button-panel",105),e.\u0275\u0275pipe(75,"titlecase"),e.\u0275\u0275pipe(76,"upperFirst"),e.\u0275\u0275listener("submitActionEvent",function(){e.\u0275\u0275restoreView(t);const _=e.\u0275\u0275nextContext();return e.\u0275\u0275resetView(_.onSubmit())}),e.\u0275\u0275elementEnd()()()}if(2&n){const t=e.\u0275\u0275reference(13),o=e.\u0275\u0275reference(23),_=e.\u0275\u0275reference(29),a=e.\u0275\u0275nextContext();e.\u0275\u0275property("columnNumbers",e.\u0275\u0275pureFunction0(45,Yl)),e.\u0275\u0275advance(),e.\u0275\u0275property("formGroup",a.userForm),e.\u0275\u0275advance(5),e.\u0275\u0275i18nExp(e.\u0275\u0275pipeBind1(5,37,a.action))(e.\u0275\u0275pipeBind1(6,39,a.resource)),e.\u0275\u0275i18nApply(4),e.\u0275\u0275advance(),e.\u0275\u0275conditional(a.accounts.length>0?7:-1),e.\u0275\u0275advance(2),e.\u0275\u0275property("invalid",a.userForm.controls.user_id.invalid&&a.userForm.controls.user_id.dirty)("invalidText",t),e.\u0275\u0275advance(2),e.\u0275\u0275property("invalid",a.userForm.controls.user_id.invalid&&a.userForm.controls.user_id.dirty)("readonly",a.editing)("autofocus",!a.editing),e.\u0275\u0275advance(4),e.\u0275\u0275property("readonly",!0),e.\u0275\u0275advance(2),e.\u0275\u0275property("ngIf",a.userForm.getValue("show_tenant")),e.\u0275\u0275advance(2),e.\u0275\u0275property("invalid",a.userForm.controls.display_name.invalid&&a.userForm.controls.display_name.dirty)("invalidText",o),e.\u0275\u0275advance(2),e.\u0275\u0275property("invalid",a.userForm.showError("display_name",a.formDir)),e.\u0275\u0275advance(4),e.\u0275\u0275property("invalid",a.userForm.controls.email.invalid&&a.userForm.controls.email.dirty)("invalidText",_),e.\u0275\u0275advance(2),e.\u0275\u0275property("invalid",a.userForm.controls.email.invalid&&a.userForm.controls.email.dirty),e.\u0275\u0275advance(11),e.\u0275\u0275property("ngIf",1==a.userForm.get("max_buckets_mode").value),e.\u0275\u0275advance(9),e.\u0275\u0275conditional(a.userForm.getValue("account_id")&&!a.userForm.getValue("account_root_user")?47:-1),e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf",!a.editing),e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf",a.editing),e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf",a.editing),e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf",a.editing),e.\u0275\u0275advance(7),e.\u0275\u0275property("ngIf",a.userForm.controls.user_quota_enabled.value),e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf",a.userForm.controls.user_quota_enabled.value&&!a.userForm.getValue("user_quota_max_size_unlimited")),e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf",a.userForm.controls.user_quota_enabled.value),e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf",a.userForm.controls.user_quota_enabled.value&&!a.userForm.getValue("user_quota_max_objects_unlimited")),e.\u0275\u0275advance(7),e.\u0275\u0275property("ngIf",a.userForm.controls.bucket_quota_enabled.value),e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf",a.userForm.controls.bucket_quota_enabled.value&&!a.userForm.getValue("bucket_quota_max_size_unlimited")),e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf",a.userForm.controls.bucket_quota_enabled.value),e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf",a.userForm.controls.bucket_quota_enabled.value&&!a.userForm.getValue("bucket_quota_max_objects_unlimited")),e.\u0275\u0275advance(2),e.\u0275\u0275property("type","user")("isEditing",a.editing)("id",a.uid),e.\u0275\u0275advance(),e.\u0275\u0275property("form",a.userForm)("submitText",e.\u0275\u0275pipeBind1(75,41,a.action)+" "+e.\u0275\u0275pipeBind1(76,43,a.resource))}}let to=(()=>{class n extends tt.g{constructor(t,o,_,a,r,s,c,u){super(),this.formBuilder=t,this.route=o,this.router=_,this.rgwUserService=a,this.modalService=r,this.notificationService=s,this.actionLabels=c,this.rgwUserAccountService=u,this.editing=!1,this.submitObservables=[],this.icons=y.FI,this.subusers=[],this.s3Keys=[],this.swiftKeys=[],this.capabilities=[],this.showTenant=!1,this.previousTenant=null,this.accounts=[],this.initialUserPolicies=[],this.managedPolicies=[{content:Ft.XG.AmazonS3FullAccess,name:Ft.Hk[Ft.XG.AmazonS3FullAccess],selected:!1},{content:Ft.XG.AmazonS3ReadOnlyAccess,name:Ft.Hk[Ft.XG.AmazonS3ReadOnlyAccess],selected:!1}],this.resource="user",this.subuserLabel="subuser",this.s3keyLabel="S3 Key",this.capabilityLabel="capability",this.editing=this.router.url.startsWith(`/rgw/user/${P.Qp.EDIT}`),this.action=this.editing?this.actionLabels.EDIT:this.actionLabels.CREATE,this.createForm()}createForm(){this.userForm=this.formBuilder.group({user_id:[null,[l.Validators.required,l.Validators.pattern(/^[a-zA-Z0-9!@#%^&*()._-]+$/)],this.editing?[]:[M.xQ.unique(this.rgwUserService.exists,this.rgwUserService,()=>this.userForm.getValue("tenant"))]],show_tenant:[this.editing],tenant:[null,[l.Validators.pattern(/^[a-zA-Z0-9_]+$/)],this.editing?[]:[M.xQ.unique(this.rgwUserService.exists,this.rgwUserService,()=>this.userForm.getValue("user_id"),!0)]],display_name:[null,[l.Validators.required,l.Validators.pattern(/^[a-zA-Z0-9!@#%^&*()._ -]+$/)]],email:[null,[M.xQ.email],[M.xQ.unique(this.rgwUserService.emailExists,this.rgwUserService)]],account_id:[null,[this.tenantedAccountValidator.bind(this)]],account_root_user:[!1],account_policies:[[]],max_buckets_mode:[1],max_buckets:[1e3,[M.xQ.requiredIf({max_buckets_mode:"1"}),M.xQ.number(!1)]],system:[!1],suspended:[!1],generate_key:[!0],access_key:[null,[M.xQ.requiredIf({generate_key:!1})]],secret_key:[null,[M.xQ.requiredIf({generate_key:!1})]],user_quota_enabled:[!1],user_quota_max_size_unlimited:[!0],user_quota_max_size:[null,[M.xQ.composeIf({user_quota_enabled:!0,user_quota_max_size_unlimited:!1},[l.Validators.required,this.quotaMaxSizeValidator])]],user_quota_max_objects_unlimited:[!0],user_quota_max_objects:[null,[M.xQ.requiredIf({user_quota_enabled:!0,user_quota_max_objects_unlimited:!1})]],bucket_quota_enabled:[!1],bucket_quota_max_size_unlimited:[!0],bucket_quota_max_size:[null,[M.xQ.composeIf({bucket_quota_enabled:!0,bucket_quota_max_size_unlimited:!1},[l.Validators.required,this.quotaMaxSizeValidator])]],bucket_quota_max_objects_unlimited:[!0],bucket_quota_max_objects:[null,[M.xQ.requiredIf({bucket_quota_enabled:!0,bucket_quota_max_objects_unlimited:!1})]]})}ngOnInit(){this.route.params.subscribe(t=>{if(!t.hasOwnProperty("uid"))return;const o=decodeURIComponent(t.uid),_=[];_.push(this.rgwUserService.get(o)),_.push(this.rgwUserService.getQuota(o)),_.push(this.rgwUserService.getUserRateLimit(o)),(0,U.forkJoin)(_).subscribe(a=>{const r=A().clone(this.userForm.value);let s=A().pick(a[0],A().keys(this.userForm.value));switch(s.max_buckets){case-1:s.max_buckets_mode=-1,s.max_buckets="";break;case 0:s.max_buckets_mode=0,s.max_buckets="";break;default:s.max_buckets_mode=1}["user","bucket"].forEach(T=>{const f=a[1][T+"_quota"];s[T+"_quota_enabled"]=f.enabled,f.max_size<0?(s[T+"_quota_max_size_unlimited"]=!0,s[T+"_quota_max_size"]=null):(s[T+"_quota_max_size_unlimited"]=!1,s[T+"_quota_max_size"]=`${f.max_size} B`),f.max_objects<0?(s[T+"_quota_max_objects_unlimited"]=!0,s[T+"_quota_max_objects"]=null):(s[T+"_quota_max_objects_unlimited"]=!1,s[T+"_quota_max_objects"]=f.max_objects)}),s=A().merge(r,s),this.userForm.setValue(s),this.userForm.getValue("account_id")?this.userForm.get("account_id").disable():this.userForm.get("account_id").setValue(null);const c=a[0].type!==Ft.tj;this.userForm.get("account_root_user").setValue(c),this.subusers=a[0].subusers,this.s3Keys=a[0].keys,this.swiftKeys=a[0].swift_keys;const u={"read, write":"*"};a[0].caps.forEach(T=>{T.perm in u&&(T.perm=u[T.perm])}),this.capabilities=a[0].caps,this.uid=this.getUID(),this.initialUserPolicies=a[0].managed_user_policies??[],this.managedPolicies.forEach(T=>{T.selected=this.initialUserPolicies.includes(T.name)});const p=this.managedPolicies.filter(T=>T.selected).map(T=>T.name);this.userForm.get("account_policies")?.setValue(p)},()=>{this.loadingError()})}),this.rgwUserAccountService.list(!0).subscribe(t=>{this.accounts=t,this.editing||this.userForm.get("account_id").reset(),this.loadingReady()},()=>{this.loadingError()}),this.userForm.get("account_id").valueChanges.subscribe(t=>{t?(this.userForm.get("display_name").setValidators([l.Validators.pattern(/^[\w+=,.@-]+$/),l.Validators.required]),this.userForm.get("display_name").updateValueAndValidity(),this.userForm.get("account_root_user").enable()):(this.userForm.get("display_name").setValidators([l.Validators.pattern(/^[a-zA-Z0-9!@#%^&*()._ -]+$/),l.Validators.required]),this.userForm.get("display_name").updateValueAndValidity(),this.userForm.get("account_root_user").disable())})}multiSelector(t){this.managedPolicies.forEach(o=>{o.selected=!!t.find(_=>_.name===o.name)})}tenantedAccountValidator(t){if(this?.userForm?.getValue("tenant")&&this.accounts.length>0){const o=this.accounts.findIndex(_=>_.id===t.value);if(-1!==o)return this.userForm.getValue("tenant")!==this.accounts[o].tenant?{tenantedAccount:!0}:null}return null}rateLimitFormInit(t){this.userForm.addControl("rateLimit",t)}goToListView(){this.router.navigate(["/rgw/user"])}onSubmit(){let t;if(this.uid=this.getUID(),this.userForm.pristine&&this.rateLimitComponent.form.pristine)return void this.goToListView();if(this.editing){if(this._isGeneralDirty()){const _=this._getUpdateArgs();this.submitObservables.push(this.rgwUserService.update(this.uid,_))}t="Updated Object Gateway user '" + this.uid + "'"}else{const _=this._getCreateArgs();this.submitObservables.push(this.rgwUserService.create(_)),t="Created Object Gateway user '" + this.uid + "'"}if(this._isUserQuotaDirty()){const _=this._getUserQuotaArgs();this.submitObservables.push(this.rgwUserService.updateQuota(this.uid,_))}if(this._isBucketQuotaDirty()){const _=this._getBucketQuotaArgs();this.submitObservables.push(this.rgwUserService.updateQuota(this.uid,_))}const o=this.rateLimitComponent.getRateLimitFormValue();o&&this.submitObservables.push(this.rgwUserService.updateUserRateLimit(this.userForm.getValue("user_id"),o)),(0,U.concat)(...this.submitObservables).subscribe({error:()=>{this.userForm.setErrors({cdSubmitButton:!0})},complete:()=>{this.notificationService.show(w._.success,t),this.goToListView()}})}updateFieldsWhenTenanted(){this.showTenant=this.userForm.getValue("show_tenant"),this.showTenant?(this.userForm.get("user_id").markAsTouched(),this.previousTenant=this.userForm.get("tenant").value,this.userForm.get("tenant").patchValue(null)):(this.userForm.get("user_id").markAsUntouched(),this.userForm.get("tenant").patchValue(this.previousTenant))}getUID(){let t=this.userForm.getValue("user_id");const o=this.userForm?.getValue("tenant");return o&&o.length>0&&(t=`${this.userForm.getValue("tenant")}$${t}`),t}quotaMaxSizeValidator(t){return(new we.k).performValidation(t,"^(\\d+(\\.\\d+)?)\\s*(B|K(B|iB)?|M(B|iB)?|G(B|iB)?|T(B|iB)?)?$",{quotaMaxSize:!0},"quota")}setSubuser(t,o){const _={"full-control":"full","read-write":"readwrite"},a=this.getUID();this.submitObservables.push(this.rgwUserService.createSubuser(a,{subuser:t.id,access:t.permissions in _?_[t.permissions]:t.permissions,key_type:"swift",secret_key:t.secret_key,generate_secret:t.generate_secret?"true":"false"})),A().isNumber(o)?this.subusers[o]=t:(this.subusers.push(t),this.swiftKeys.push({user:t.id,secret_key:t.generate_secret?"Apply your changes first...":t.secret_key})),this.userForm.markAsDirty()}deleteSubuser(t){const o=this.subusers[t];this.submitObservables.push(this.rgwUserService.deleteSubuser(this.getUID(),o.id)),this.s3Keys=this.s3Keys.filter(_=>_.user!==o.id),this.swiftKeys=this.swiftKeys.filter(_=>_.user!==o.id),this.subusers.splice(t,1),this.userForm.markAsDirty()}setCapability(t,o){const _=this.getUID();if(A().isNumber(o)){const a=this.capabilities[o];this.submitObservables.push(this.rgwUserService.deleteCapability(_,a.type,a.perm)),this.submitObservables.push(this.rgwUserService.addCapability(_,t.type,t.perm)),this.capabilities[o]=t}else this.submitObservables.push(this.rgwUserService.addCapability(_,t.type,t.perm)),this.capabilities=[...this.capabilities,t];this.userForm.markAsDirty()}deleteCapability(t){const o=this.capabilities[t];this.submitObservables.push(this.rgwUserService.deleteCapability(this.getUID(),o.type,o.perm)),this.capabilities.splice(t,1),this.capabilities=[...this.capabilities],this.userForm.markAsDirty()}hasAllCapabilities(t){return!A().difference(Yn.getAll(),A().map(t,"type")).length}setS3Key(t,o){if(!A().isNumber(o)){const _=t.user.match(/([^:]+)(:(.+))?/),a=_[1],r={subuser:_[2]?_[3]:"",generate_key:t.generate_key?"true":"false"};"false"===r.generate_key&&(A().isNil(t.access_key)||(r.access_key=t.access_key),A().isNil(t.secret_key)||(r.secret_key=t.secret_key)),this.submitObservables.push(this.rgwUserService.addS3Key(a,r)),this.s3Keys.push({user:t.user,access_key:t.generate_key?"Apply your changes first...":t.access_key,secret_key:t.generate_key?"Apply your changes first...":t.secret_key})}this.userForm.markAsDirty()}deleteS3Key(t){const o=this.s3Keys[t];this.submitObservables.push(this.rgwUserService.deleteS3Key(this.getUID(),o.access_key)),this.s3Keys.splice(t,1),this.userForm.markAsDirty()}showSubuserModal(t){const o=this.getUID(),_=this.modalService.show(ql);if(A().isNumber(t)){const a=this.subusers[t];_.setEditing(),_.setValues(o,a.id,a.permissions)}else _.setEditing(!1),_.setValues(o),_.setSubusers(this.subusers);_.submitAction.subscribe(a=>{this.setSubuser(a,t)})}showS3KeyModal(t){const o=this.modalService.show(Qn);if(A().isNumber(t)){const _=this.s3Keys[t];o.setViewing(),o.setValues(_.user,_.access_key,_.secret_key)}else{const _=this._getS3KeyUserCandidates();o.setViewing(!1),o.setUserCandidates(_),o.submitAction.subscribe(a=>{this.setS3Key(a)})}}showSwiftKeyModal(t){const o=this.modalService.show(Jn),_=this.swiftKeys[t];o.setValues(_.user,_.secret_key)}showCapabilityModal(t){const o=this.modalService.show(Pl);if(A().isNumber(t)){const _=this.capabilities[t];o.setEditing(),o.setValues(_.type,_.perm)}else o.setEditing(!1),o.setCapabilities(this.capabilities);o.submitAction.subscribe(_=>{this.setCapability(_,t)})}_isGeneralDirty(){return["display_name","email","max_buckets_mode","max_buckets","system","suspended","account_id","account_root_user","account_policies"].some(t=>this.userForm.get(t).dirty)}_isUserQuotaDirty(){return["user_quota_enabled","user_quota_max_size_unlimited","user_quota_max_size","user_quota_max_objects_unlimited","user_quota_max_objects"].some(t=>this.userForm.get(t).dirty)}_isBucketQuotaDirty(){return["bucket_quota_enabled","bucket_quota_max_size_unlimited","bucket_quota_max_size","bucket_quota_max_objects_unlimited","bucket_quota_max_objects"].some(t=>this.userForm.get(t).dirty)}_getCreateArgs(){const t={uid:this.getUID(),display_name:this.userForm.getValue("display_name"),system:this.userForm.getValue("system"),suspended:this.userForm.getValue("suspended"),email:"",max_buckets:this.userForm.getValue("max_buckets"),generate_key:this.userForm.getValue("generate_key"),access_key:"",secret_key:""},o=this.userForm.getValue("email");A().isString(o)&&o.length>0&&A().merge(t,{email:o}),this.userForm.getValue("generate_key")||A().merge(t,{generate_key:!1,access_key:this.userForm.getValue("access_key"),secret_key:this.userForm.getValue("secret_key")});const a=parseInt(this.userForm.getValue("max_buckets_mode"),10);A().includes([-1,0],a)&&A().merge(t,{max_buckets:a}),this.userForm.getValue("account_id")&&A().merge(t,{account_id:this.userForm.getValue("account_id"),account_root_user:this.userForm.getValue("account_root_user")});const r=this._getAccountManagedPolicies();return this.userForm.getValue("account_id")&&!this.userForm.getValue("account_root_user")&&A().merge(t,{account_policies:r}),t}_getUpdateArgs(){const t={},o=["display_name","email","max_buckets","system","suspended"];for(const r of o)t[r]=this.userForm.getValue(r);this.userForm.getValue("account_id")&&(t.account_id=this.userForm.getValue("account_id"),t.account_root_user=this.userForm.getValue("account_root_user"));const _=parseInt(this.userForm.getValue("max_buckets_mode"),10);A().includes([-1,0],_)&&(t.max_buckets=_);const a=this._getAccountManagedPolicies();return this.userForm.getValue("account_id")&&!this.userForm.getValue("account_root_user")&&(t.account_policies=a),t}_getUserQuotaArgs(){const t={quota_type:"user",enabled:this.userForm.getValue("user_quota_enabled"),max_size_kb:-1,max_objects:-1};if(!this.userForm.getValue("user_quota_max_size_unlimited")){const o=(new we.k).toBytes(this.userForm.getValue("user_quota_max_size"));t.max_size_kb=(o/1024).toFixed(0)}return this.userForm.getValue("user_quota_max_objects_unlimited")||(t.max_objects=this.userForm.getValue("user_quota_max_objects")),t}_getBucketQuotaArgs(){const t={quota_type:"bucket",enabled:this.userForm.getValue("bucket_quota_enabled"),max_size_kb:-1,max_objects:-1};if(!this.userForm.getValue("bucket_quota_max_size_unlimited")){const o=(new we.k).toBytes(this.userForm.getValue("bucket_quota_max_size"));t.max_size_kb=(o/1024).toFixed(0)}return this.userForm.getValue("bucket_quota_max_objects_unlimited")||(t.max_objects=this.userForm.getValue("bucket_quota_max_objects")),t}_getS3KeyUserCandidates(){let t=[];const o=this.getUID();return A().isString(o)&&!A().isEmpty(o)&&t.push(o),this.subusers.forEach(_=>{t.push(_.id)}),this.s3Keys.forEach(_=>{t.push(_.user)}),t=A().uniq(t),t}_getAccountManagedPolicies(){const t=this.managedPolicies.filter(s=>s.selected).map(s=>s.name),o=this.initialUserPolicies;return{attach:t.filter(s=>!o.includes(s)),detach:o.filter(s=>!t.includes(s))}}onMaxBucketsModeChange(t){"1"===t&&(this.userForm.get("max_buckets").valid||this.userForm.patchValue({max_buckets:1e3}))}goToCreateAccountForm(){this.router.navigate(["rgw/accounts/create"])}static{this.\u0275fac=function(o){return new(o||n)(e.\u0275\u0275directiveInject(Ge.$),e.\u0275\u0275directiveInject(Q.ActivatedRoute),e.\u0275\u0275directiveInject(Q.Router),e.\u0275\u0275directiveInject(Rt.p),e.\u0275\u0275directiveInject(he.V),e.\u0275\u0275directiveInject(ne.J),e.\u0275\u0275directiveInject(P.Ss),e.\u0275\u0275directiveInject(ht))}}static{this.\u0275cmp=e.\u0275\u0275defineComponent({type:n,selectors:[["cd-rgw-user-form"]],viewQuery:function(o,_){if(1&o&&e.\u0275\u0275viewQuery(Ht,5),2&o){let a;e.\u0275\u0275queryRefresh(a=e.\u0275\u0275loadQuery())&&(_.rateLimitComponent=a.first)}},features:[e.\u0275\u0275InheritDefinitionFeature],decls:1,vars:1,consts:()=>{let t,o,_,a,r,s,c,u,p,T,f,G,S,O,C,b,N,k,z,$,X,B,V,Z,F,I,te,J,j,ee,D,ie,W,x,de,ue,pe,me,Te,ge,Ee,le,Re,Ce,fe,Se,R,Ze,ve,Ke,qe,L,it,at,rt,lt,st,ct,dt,ut,pt,mt,Tt,gt,Ye,Et,h,yt,$t,Dt,Wt,xt,wt;return t="" + "\ufffd0\ufffd" + " " + "\ufffd1\ufffd" + "",o="User ID " + "\ufffd#11\ufffd\ufffd/#11\ufffd" + "",_="Full name " + "\ufffd#21\ufffd\ufffd/#21\ufffd" + "",a="Email address " + "\ufffd#27\ufffd\ufffd/#27\ufffd" + "",r="Disabled",s="Unlimited",c="Custom",u="Suspended " + "\ufffd#42\ufffd" + "Suspending the user disables the user and subuser." + "\ufffd/#42\ufffd" + "",p="System user " + "\ufffd#46\ufffd" + "System users are distinct from regular users, they are used by the RGW service to perform administrative tasks, manage buckets and objects" + "\ufffd/#46\ufffd" + "",T="User quota",f="Enabled ",G="Bucket quota",S="Enabled",O="Link Account",C="Loading...",b="-- Select an Account --",N="Only accounts with the same tenant name can be linked to a tenanted user.",k="Account membership is permanent. Once added, users cannot be removed from their account.",z="Ownership of all of the user's buckets will be transferred to the account.",$="Account Root user " + "\ufffd#3\ufffd" + "The account root user has full access to all resources and manages the account. It's recommended to use this account for management tasks only and create additional users with specific permissions. " + "\ufffd/#3\ufffd" + "",X="This field is required.",B="The value is not valid.",V="The chosen user ID is already in use.",Z="Tenant " + "\ufffd#3\ufffd\ufffd/#3\ufffd" + "",F="The value is not valid.",I="The chosen user ID exists in this tenant.",te="This field is required.",J="The value is not valid.",j="This is not a valid email address.",ee="The chosen email address is already in use.",D="The entered value must be >= 1.",ie="This field is required.",W="Policies",x="Select managed policies...",de="Managed policies",ue="" + "\ufffd#6\ufffd" + "" + "\ufffd/#6\ufffd" + "",pe="S3 key",me="Auto-generate key",Te="Access key " + "\ufffd#3\ufffd\ufffd/#3\ufffd" + "",ge="This field is required.",Ee="Secret key " + "\ufffd#3\ufffd\ufffd/#3\ufffd" + "",le="This field is required.",Re="Subusers",Ce="" + "\ufffd0\ufffd" + " " + "\ufffd1\ufffd" + "",fe="There are no subusers.",Se="Keys",R="" + "\ufffd0\ufffd" + " " + "\ufffd1\ufffd" + "",Ze="There are no keys.",ve="Show",Ke="There are no keys.",qe="Show",L="All capabilities are already added.",it="Capabilities",at="" + "\ufffd0\ufffd" + " " + "\ufffd1\ufffd" + "",rt="There are no capabilities.",lt="Type " + "\ufffd#5\ufffd\ufffd/#5\ufffd" + "",st="Permission " + "\ufffd#9\ufffd\ufffd/#9\ufffd" + "",ct="Unlimited size",dt="Maximum size " + "\ufffd#3\ufffd\ufffd/#3\ufffd" + "",ut="This field is required.",pt="The value is not valid.",mt="Size must be a number or in a valid format. eg: 5 GiB",Tt="Unlimited objects",gt="This field is required.",Ye="The entered value must be >= 0.",Et="Unlimited size",h="Maximum size " + "\ufffd#3\ufffd\ufffd/#3\ufffd" + "",yt="This field is required.",$t="The value is not valid.",Dt="Size must be a number or in a valid format. eg: 5 GiB",Wt="Unlimited objects",xt="This field is required.",wt="The entered value must be >= 0.",[["frm","ngForm"],["userError",""],["displayNameError",""],["emailError",""],["accountError",""],["accountsHelper",""],["tenantError",""],["maxBucketsError",""],["accessKeyError",""],["secretKeyError",""],["quotaMaxSizeError",""],["maxObjectsError",""],["bucketQuotaMaxSizeError",""],["bucketMaxObjectsError",""],t,o,_,a,r,s,c,u,p,T,f,G,S,C,b,N,k,z,$,X,B,V,Z,F,I,te,J,j,ee,D,ie,de,ue,pe,me,Te,ge,Ee,le,Re,Ce,fe,Se,R,Ze,Ke,it,at,rt,lt,st,ct,dt,ut,pt,mt,Tt,gt,Ye,Et,h,yt,$t,Dt,Wt,xt,wt,["cdsCol","",3,"columnNumbers",4,"cdFormLoading"],["cdsCol","",3,"columnNumbers"],["novalidate","",3,"formGroup"],[1,"form-header"],[1,"form-item"],["for","user_id","cdRequiredField","User ID",3,"invalid","invalidText"],["cdsText","","formControlName","user_id","name","user_id","id","user_id",3,"invalid","readonly","autofocus"],["formControlName","show_tenant","id","show_tenant",3,"checkedChange","readonly"],["class","form-item",4,"ngIf"],["for","display_name","cdRequiredField","Full name",3,"invalid","invalidText"],["cdsText","","formControlName","display_name","name","display_name","id","display_name",3,"invalid"],["for","email",3,"invalid","invalidText"],["cdsText","","formControlName","email","name","email","id","email",3,"invalid"],["label","Maximum buckets","for","max_buckets_mode","formControlName","max_buckets_mode","id","max_buckets_mode",3,"valueChange"],["value","-1"],["value","0"],["value","1"],["formControlName","suspended","id","suspended"],["formControlName","system","id","system"],[4,"ngIf"],[1,"cd-header"],["formControlName","user_quota_enabled","id","user_quota_enabled"],["formControlName","bucket_quota_enabled","id","bucket_quota_enabled"],[3,"rateLimitFormGroup","type","isEditing","id"],["wrappingClass","text-right",3,"submitActionEvent","form","submitText"],["label",O,"id","link_account","for","link_account","formControlName","account_id",3,"invalid","invalidText","helperText"],[3,"ngValue",4,"ngIf"],[3,"value",4,"ngIf"],[3,"value",4,"ngFor","ngForOf"],[3,"ngValue"],[3,"value"],["class","invalid-feedback",4,"ngIf"],[1,"invalid-feedback"],["formControlName","account_root_user","id","account_root_user"],["for","tenant",3,"invalid","invalidText"],["cdsText","","formControlName","tenant","name","tenant","id","tenant","autofocus","",3,"invalid","readonly"],["for","max_buckets","formControlName","max_buckets","id","max_buckets","min","1",3,"invalid","invalidText"],["label",W,"type","multi","selectionFeedback","top-after-reopen","formControlName","account_policies","id","account_policies","placeholder",x,"itemValueKey","name",3,"selected","appendInline","items"],["formControlName","generate_key","id","generate_key"],["class","form-item form-item-append",4,"ngIf"],[1,"form-item","form-item-append"],["for","access_key","cdRequiredField","Access key",3,"invalid","invalidText"],["cdsPassword","","type","password","formControlName","access_key","name","access_key","id","access_key",3,"invalid"],["source","access_key",1,"mt-4"],["for","secret","cdRequiredField","Secret key",3,"invalid","invalidText"],["cdsPassword","","type","password","formControlName","secret_key","name","secret_key","id","secret_key",3,"invalid"],["source","secret_key",1,"mt-4"],["class","no-border",4,"ngIf"],[4,"ngFor","ngForOf"],["cdsRow","",1,"form-item"],["cdsCol",""],["cdsButton","tertiary","type","button",1,"tc_addSubuserButton",3,"click"],[1,"cds--btn__icon",3,"cdsIcon","size"],[1,"no-border"],[1,"form-text","text-muted"],["cdsRow","",1,"form-item-append",3,"ngClass"],["cdsText","","readonly","",3,"value"],["kind","tertiary","size","md","title","Edit",1,"mt-4","tc_showSubuserButton",3,"click"],["kind","danger","size","md","title","Delete",1,"mt-4","tc_deleteSubuserButton",3,"click"],["type","button","cdsButton","tertiary",1,"tc_addS3KeyButton",3,"click"],["cdsRow","",1,"form-item-append"],["kind","tertiary","size","md","title",ve,1,"mt-2","tc_showS3KeyButton",3,"click"],["kind","danger","size","md","title","Delete",1,"mt-2","tc_deleteS3KeyButton",3,"click"],["kind","tertiary","size","md","title",qe,1,"mt-2","tc_showSwiftKeyButton",3,"click"],["type","button","cdsButton","tertiary","ngbTooltip",L,"triggers","pointerenter:pointerleave",1,"tc_addCapButton",3,"click","disabled","disableTooltip"],["kind","tertiary","size","md","title","Edit",1,"mt-4","tc_editCapButton",3,"click"],["kind","danger","size","md","title","Delete",1,"mt-4","tc_deleteCapButton",3,"click"],["formControlName","user_quota_max_size_unlimited","id","user_quota_max_size_unlimited"],["for","user_quota_max_size","cdRequiredField","Maximum size",3,"invalid","invalidText"],["cdsText","","formControlName","user_quota_max_size","name","user_quota_max_size","id","user_quota_max_size","cdDimlessBinary","",3,"invalid"],["formControlName","user_quota_max_objects_unlimited","id","user_quota_max_objects_unlimited"],["for","user_quota_max_objects","formControlName","user_quota_max_objects","id","user_quota_max_objects","label","Maximum Objects","cdRequiredField","Maximum Objects",3,"min","invalid","invalidText"],["formControlName","bucket_quota_max_size_unlimited","id","bucket_quota_max_size_unlimited"],["for","bucket_quota_max_size","cdRequiredField","Maximum size",3,"invalid","invalidText"],["cdsText","","formControlName","bucket_quota_max_size","name","bucket_quota_max_size","id","bucket_quota_max_size","cdDimlessBinary","",3,"invalid"],["formControlName","bucket_quota_max_objects_unlimited","id","bucket_quota_max_objects_unlimited"],["for","bucket_quota_max_objects","formControlName","bucket_quota_max_objects","id","bucket_quota_max_objects","label","Maximum objects","cdRequiredField","Maximum objects",3,"min","invalid","invalidText"]]},template:function(o,_){1&o&&e.\u0275\u0275template(0,cc,77,46,"div",81),2&o&&e.\u0275\u0275property("cdFormLoading",_.loading)},dependencies:[E.NgClass,E.NgForOf,E.NgIf,_t.N,_e.e,ae.O,on.e,Ct.B,rn.Y,ft.G,Y.S,oe.E,Qe.P,l.\u0275NgNoValidate,l.NgSelectOption,l.\u0275NgSelectMultipleOption,l.DefaultValueAccessor,l.NgControlStatus,l.NgControlStatusGroup,l.FormGroupDirective,l.FormControlName,v.NgbTooltip,d.ColumnDirective,d.RowDirective,d.Button,d.IconButton,d.IconDirective,d.TextInputLabelComponent,d.PasswordInputLabelComponent,d.TextInput,d.PasswordInput,d.Checkbox,d.NumberComponent,d.ComboBox,d.DropdownList,d.Select,d.Option,Ht,E.TitleCasePipe,Ie.r,jl.N]})}}return n})();var dc=g(47782),uc=g(72358);const pc=["accessKeyTpl"],mc=["secretKeyTpl"],Tc=()=>({read:!0});function gc(n,i){if(1&n){const t=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"div")(1,"legend"),e.\u0275\u0275i18n(2,8),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(3,"cd-table",38),e.\u0275\u0275listener("updateSelection",function(_){e.\u0275\u0275restoreView(t);const a=e.\u0275\u0275nextContext(3);return e.\u0275\u0275resetView(a.updateKeysSelection(_))}),e.\u0275\u0275element(4,"cd-table-actions",39),e.\u0275\u0275elementEnd()()}if(2&n){const t=e.\u0275\u0275nextContext(3);e.\u0275\u0275advance(3),e.\u0275\u0275property("data",t.keys)("columns",t.keysColumns),e.\u0275\u0275advance(),e.\u0275\u0275property("permission",e.\u0275\u0275pureFunction0(5,Tc))("selection",t.selection)("tableActions",t.tableAction)}}function Ec(n,i){if(1&n&&(e.\u0275\u0275elementStart(0,"tr")(1,"td",37),e.\u0275\u0275i18n(2,9),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(3,"td"),e.\u0275\u0275text(4),e.\u0275\u0275elementEnd()()),2&n){const t=e.\u0275\u0275nextContext(3);e.\u0275\u0275advance(4),e.\u0275\u0275textInterpolate(t.user.email)}}function Rc(n,i){if(1&n&&(e.\u0275\u0275elementStart(0,"tr")(1,"td",37),e.\u0275\u0275i18n(2,10),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(3,"td"),e.\u0275\u0275i18n(4,11),e.\u0275\u0275elementEnd()()),2&n){const t=e.\u0275\u0275nextContext(3);e.\u0275\u0275advance(4),e.\u0275\u0275i18nExp(t.extractPolicyNamesFromArns(t.user.managed_user_policies)),e.\u0275\u0275i18nApply(4)}}function Cc(n,i){if(1&n&&(e.\u0275\u0275elementStart(0,"div"),e.\u0275\u0275text(1),e.\u0275\u0275elementEnd()),2&n){const t=i.$implicit;e.\u0275\u0275advance(),e.\u0275\u0275textInterpolate2(" ",t.id," (",t.permissions,") ")}}function fc(n,i){if(1&n&&(e.\u0275\u0275elementStart(0,"tr")(1,"td",37),e.\u0275\u0275i18n(2,12),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(3,"td"),e.\u0275\u0275template(4,Cc,2,2,"div",40),e.\u0275\u0275elementEnd()()),2&n){const t=e.\u0275\u0275nextContext(3);e.\u0275\u0275advance(4),e.\u0275\u0275property("ngForOf",t.user.subusers)}}function Sc(n,i){if(1&n&&(e.\u0275\u0275elementStart(0,"div"),e.\u0275\u0275text(1),e.\u0275\u0275elementEnd()),2&n){const t=i.$implicit;e.\u0275\u0275advance(),e.\u0275\u0275textInterpolate2("",t.type," (",t.perm,")")}}function Fc(n,i){if(1&n&&(e.\u0275\u0275elementStart(0,"tr")(1,"td",37),e.\u0275\u0275i18n(2,13),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(3,"td"),e.\u0275\u0275template(4,Sc,2,2,"div",40),e.\u0275\u0275elementEnd()()),2&n){const t=e.\u0275\u0275nextContext(3);e.\u0275\u0275advance(4),e.\u0275\u0275property("ngForOf",t.user.caps)}}function Mc(n,i){if(1&n&&(e.\u0275\u0275elementStart(0,"tr")(1,"td",37),e.\u0275\u0275i18n(2,14),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(3,"td"),e.\u0275\u0275text(4),e.\u0275\u0275pipe(5,"join"),e.\u0275\u0275elementEnd()()),2&n){const t=e.\u0275\u0275nextContext(3);e.\u0275\u0275advance(4),e.\u0275\u0275textInterpolate(e.\u0275\u0275pipeBind1(5,1,t.user.mfa_ids))}}function Pc(n,i){if(1&n&&(e.\u0275\u0275elementContainerStart(0),e.\u0275\u0275elementStart(1,"legend"),e.\u0275\u0275i18n(2,15),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(3,"table",41)(4,"tbody")(5,"tr")(6,"td",35),e.\u0275\u0275i18n(7,16),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(8,"td",36),e.\u0275\u0275text(9),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(10,"tr")(11,"td",35),e.\u0275\u0275i18n(12,17),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(13,"td",36),e.\u0275\u0275text(14),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(15,"tr")(16,"td",35),e.\u0275\u0275i18n(17,18),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(18,"td",36),e.\u0275\u0275text(19),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(20,"tr")(21,"td",35),e.\u0275\u0275i18n(22,19),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(23,"td",36),e.\u0275\u0275i18n(24,20),e.\u0275\u0275elementEnd()()()(),e.\u0275\u0275elementContainerEnd()),2&n){const t=e.\u0275\u0275nextContext(3);e.\u0275\u0275advance(9),e.\u0275\u0275textInterpolate(null==t.selection.account?null:t.selection.account.id),e.\u0275\u0275advance(5),e.\u0275\u0275textInterpolate(null==t.selection.account?null:t.selection.account.name),e.\u0275\u0275advance(5),e.\u0275\u0275textInterpolate((null==t.selection.account?null:t.selection.account.tenant)||"-"),e.\u0275\u0275advance(5),e.\u0275\u0275i18nExp("root"===(null==t.user?null:t.user.type)?"Account root user":"rgw user"),e.\u0275\u0275i18nApply(24)}}function Ic(n,i){1&n&&(e.\u0275\u0275elementStart(0,"td"),e.\u0275\u0275text(1,"-"),e.\u0275\u0275elementEnd())}function Oc(n,i){1&n&&(e.\u0275\u0275elementStart(0,"td"),e.\u0275\u0275i18n(1,25),e.\u0275\u0275elementEnd())}function Gc(n,i){if(1&n&&(e.\u0275\u0275elementStart(0,"td"),e.\u0275\u0275text(1),e.\u0275\u0275pipe(2,"dimlessBinary"),e.\u0275\u0275elementEnd()),2&n){const t=e.\u0275\u0275nextContext(4);e.\u0275\u0275advance(),e.\u0275\u0275textInterpolate1(" ",e.\u0275\u0275pipeBind1(2,1,t.user.user_quota.max_size)," ")}}function Nc(n,i){1&n&&(e.\u0275\u0275elementStart(0,"td"),e.\u0275\u0275text(1,"-"),e.\u0275\u0275elementEnd())}function Ac(n,i){1&n&&(e.\u0275\u0275elementStart(0,"td"),e.\u0275\u0275i18n(1,26),e.\u0275\u0275elementEnd())}function hc(n,i){if(1&n&&(e.\u0275\u0275elementStart(0,"td"),e.\u0275\u0275text(1),e.\u0275\u0275elementEnd()),2&n){const t=e.\u0275\u0275nextContext(4);e.\u0275\u0275advance(),e.\u0275\u0275textInterpolate1(" ",t.user.user_quota.max_objects," ")}}function bc(n,i){if(1&n&&(e.\u0275\u0275elementStart(0,"div")(1,"legend"),e.\u0275\u0275i18n(2,21),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(3,"table",34)(4,"tbody")(5,"tr")(6,"td",35),e.\u0275\u0275i18n(7,22),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(8,"td",36),e.\u0275\u0275text(9),e.\u0275\u0275pipe(10,"booleanText"),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(11,"tr")(12,"td",37),e.\u0275\u0275i18n(13,23),e.\u0275\u0275elementEnd(),e.\u0275\u0275template(14,Ic,2,0,"td",33)(15,Oc,2,0,"td",33)(16,Gc,3,3,"td",33),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(17,"tr")(18,"td",37),e.\u0275\u0275i18n(19,24),e.\u0275\u0275elementEnd(),e.\u0275\u0275template(20,Nc,2,0,"td",33)(21,Ac,2,0,"td",33)(22,hc,2,1,"td",33),e.\u0275\u0275elementEnd()()()()),2&n){const t=e.\u0275\u0275nextContext(3);e.\u0275\u0275advance(9),e.\u0275\u0275textInterpolate(e.\u0275\u0275pipeBind1(10,7,t.user.user_quota.enabled)),e.\u0275\u0275advance(5),e.\u0275\u0275property("ngIf",!t.user.user_quota.enabled),e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf",t.user.user_quota.enabled&&t.user.user_quota.max_size<=-1),e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf",t.user.user_quota.enabled&&t.user.user_quota.max_size>-1),e.\u0275\u0275advance(4),e.\u0275\u0275property("ngIf",!t.user.user_quota.enabled),e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf",t.user.user_quota.enabled&&t.user.user_quota.max_objects<=-1),e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf",t.user.user_quota.enabled&&t.user.user_quota.max_objects>-1)}}function vc(n,i){1&n&&(e.\u0275\u0275elementStart(0,"td"),e.\u0275\u0275text(1,"-"),e.\u0275\u0275elementEnd())}function Lc(n,i){1&n&&(e.\u0275\u0275elementStart(0,"td"),e.\u0275\u0275i18n(1,31),e.\u0275\u0275elementEnd())}function yc(n,i){if(1&n&&(e.\u0275\u0275elementStart(0,"td"),e.\u0275\u0275text(1),e.\u0275\u0275pipe(2,"dimlessBinary"),e.\u0275\u0275elementEnd()),2&n){const t=e.\u0275\u0275nextContext(4);e.\u0275\u0275advance(),e.\u0275\u0275textInterpolate1(" ",e.\u0275\u0275pipeBind1(2,1,t.user.bucket_quota.max_size)," ")}}function $c(n,i){1&n&&(e.\u0275\u0275elementStart(0,"td"),e.\u0275\u0275text(1,"-"),e.\u0275\u0275elementEnd())}function Dc(n,i){1&n&&(e.\u0275\u0275elementStart(0,"td"),e.\u0275\u0275i18n(1,32),e.\u0275\u0275elementEnd())}function Wc(n,i){if(1&n&&(e.\u0275\u0275elementStart(0,"td"),e.\u0275\u0275text(1),e.\u0275\u0275elementEnd()),2&n){const t=e.\u0275\u0275nextContext(4);e.\u0275\u0275advance(),e.\u0275\u0275textInterpolate1(" ",t.user.bucket_quota.max_objects," ")}}function xc(n,i){if(1&n&&(e.\u0275\u0275elementStart(0,"div")(1,"legend"),e.\u0275\u0275i18n(2,27),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(3,"table",34)(4,"tbody")(5,"tr")(6,"td",35),e.\u0275\u0275i18n(7,28),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(8,"td",36),e.\u0275\u0275text(9),e.\u0275\u0275pipe(10,"booleanText"),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(11,"tr")(12,"td",37),e.\u0275\u0275i18n(13,29),e.\u0275\u0275elementEnd(),e.\u0275\u0275template(14,vc,2,0,"td",33)(15,Lc,2,0,"td",33)(16,yc,3,3,"td",33),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(17,"tr")(18,"td",37),e.\u0275\u0275i18n(19,30),e.\u0275\u0275elementEnd(),e.\u0275\u0275template(20,$c,2,0,"td",33)(21,Dc,2,0,"td",33)(22,Wc,2,1,"td",33),e.\u0275\u0275elementEnd()()()()),2&n){const t=e.\u0275\u0275nextContext(3);e.\u0275\u0275advance(9),e.\u0275\u0275textInterpolate(e.\u0275\u0275pipeBind1(10,7,t.user.bucket_quota.enabled)),e.\u0275\u0275advance(5),e.\u0275\u0275property("ngIf",!t.user.bucket_quota.enabled),e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf",t.user.bucket_quota.enabled&&t.user.bucket_quota.max_size<=-1),e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf",t.user.bucket_quota.enabled&&t.user.bucket_quota.max_size>-1),e.\u0275\u0275advance(4),e.\u0275\u0275property("ngIf",!t.user.bucket_quota.enabled),e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf",t.user.bucket_quota.enabled&&t.user.bucket_quota.max_objects<=-1),e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf",t.user.bucket_quota.enabled&&t.user.bucket_quota.max_objects>-1)}}function wc(n,i){if(1&n&&(e.\u0275\u0275elementStart(0,"div"),e.\u0275\u0275element(1,"cd-rgw-rate-limit-details",42),e.\u0275\u0275elementEnd()),2&n){const t=e.\u0275\u0275nextContext(3);e.\u0275\u0275advance(),e.\u0275\u0275property("rateLimitConfig",t.user.user_ratelimit)("type","user")}}function Uc(n,i){if(1&n&&(e.\u0275\u0275elementStart(0,"div"),e.\u0275\u0275template(1,gc,5,6,"div",33),e.\u0275\u0275elementStart(2,"legend"),e.\u0275\u0275i18n(3,0),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(4,"table",34)(5,"tbody")(6,"tr")(7,"td",35),e.\u0275\u0275i18n(8,1),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(9,"td",36),e.\u0275\u0275text(10),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(11,"tr")(12,"td",35),e.\u0275\u0275i18n(13,2),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(14,"td",36),e.\u0275\u0275text(15),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(16,"tr")(17,"td",35),e.\u0275\u0275i18n(18,3),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(19,"td",36),e.\u0275\u0275text(20),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(21,"tr")(22,"td",37),e.\u0275\u0275i18n(23,4),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(24,"td"),e.\u0275\u0275text(25),e.\u0275\u0275elementEnd()(),e.\u0275\u0275template(26,Ec,5,1,"tr",33),e.\u0275\u0275elementStart(27,"tr")(28,"td",37),e.\u0275\u0275i18n(29,5),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(30,"td"),e.\u0275\u0275text(31),e.\u0275\u0275pipe(32,"booleanText"),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(33,"tr")(34,"td",37),e.\u0275\u0275i18n(35,6),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(36,"td"),e.\u0275\u0275text(37),e.\u0275\u0275pipe(38,"booleanText"),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(39,"tr")(40,"td",37),e.\u0275\u0275i18n(41,7),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(42,"td"),e.\u0275\u0275text(43),e.\u0275\u0275pipe(44,"map"),e.\u0275\u0275elementEnd()(),e.\u0275\u0275template(45,Rc,5,1,"tr")(46,fc,5,1,"tr",33)(47,Fc,5,1,"tr",33)(48,Mc,6,3,"tr",33),e.\u0275\u0275elementEnd()(),e.\u0275\u0275template(49,Pc,25,4,"ng-container",33)(50,bc,23,9,"div",33)(51,xc,23,9,"div",33)(52,wc,2,2,"div",33),e.\u0275\u0275elementEnd()),2&n){const t=e.\u0275\u0275nextContext(2);e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf",t.keys.length),e.\u0275\u0275advance(9),e.\u0275\u0275textInterpolate(t.user.tenant),e.\u0275\u0275advance(5),e.\u0275\u0275textInterpolate(t.user.uid),e.\u0275\u0275advance(5),e.\u0275\u0275textInterpolate(t.user.uid),e.\u0275\u0275advance(5),e.\u0275\u0275textInterpolate(t.user.display_name),e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf",null==t.user.email?null:t.user.email.length),e.\u0275\u0275advance(5),e.\u0275\u0275textInterpolate(e.\u0275\u0275pipeBind1(32,17,t.user.suspended)),e.\u0275\u0275advance(6),e.\u0275\u0275textInterpolate(e.\u0275\u0275pipeBind1(38,19,t.user.system)),e.\u0275\u0275advance(6),e.\u0275\u0275textInterpolate(e.\u0275\u0275pipeBind2(44,21,t.user.max_buckets,t.maxBucketsMap)),e.\u0275\u0275advance(2),e.\u0275\u0275conditional("rgw"===t.user.type&&null!=t.selection.account&&t.selection.account.id?45:-1),e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf",t.user.subusers&&t.user.subusers.length),e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf",t.user.caps&&t.user.caps.length),e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf",null==t.user.mfa_ids?null:t.user.mfa_ids.length),e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf",t.selection.account&&(null==t.selection.account?null:t.selection.account.id)),e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf",t.user.user_quota),e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf",t.user.bucket_quota),e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf",t.user.user_ratelimit)}}function kc(n,i){if(1&n&&(e.\u0275\u0275elementContainerStart(0),e.\u0275\u0275template(1,Uc,53,24,"div",33),e.\u0275\u0275elementContainerEnd()),2&n){const t=e.\u0275\u0275nextContext();e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf",t.user)}}let zc=(()=>{class n{constructor(t,o){this.rgwUserService=t,this.cdsModalService=o,this.keys=[],this.keysColumns=[],this.keysSelection=new Oe.y,this.tableAction=[],this.icons=y.FI}ngOnInit(){this.keysColumns=[{name:"Username",prop:"username",flexGrow:1},{name:"Type",prop:"type",flexGrow:1}],this.maxBucketsMap={"-1":"Disabled",0:"Unlimited"}}ngOnChanges(){this.tableAction=[{name:"Show",permission:"read",click:()=>this.showKeyModal(),icon:y.FI.show}],this.selection&&(this.user=this.selection,this.user.subusers=A().sortBy(this.user.subusers,"id"),this.user.caps=A().sortBy(this.user.caps,"type"),this.rgwUserService.getQuota(this.user.uid).subscribe(t=>{A().extend(this.user,t)}),this.rgwUserService.getUserRateLimit(this.user.uid).subscribe(t=>{A().extend(this.user,t)}),this.keys=[],this.user.keys&&this.user.keys.forEach(t=>{this.keys.push({id:this.keys.length+1,type:"S3",username:t.user,ref:t})}),this.user.swift_keys&&this.user.swift_keys.forEach(t=>{this.keys.push({id:this.keys.length+1,type:"Swift",username:t.user,ref:t})}),this.keys=A().sortBy(this.keys,"user"))}updateKeysSelection(t){this.keysSelection=t}showKeyModal(){const t=this.keysSelection.first(),o=this.cdsModalService.show("S3"===t.type?Qn:Jn);switch(t.type){case"S3":o.setViewing(),o.setValues(t.ref.user,t.ref.access_key,t.ref.secret_key);break;case"Swift":o.setValues(t.ref.user,t.ref.secret_key)}}extractPolicyNamesFromArns(t){return t&&0!==t.length?t.map(o=>o.trim().split("/").pop()).filter(Boolean).join(", "):"-"}static{this.\u0275fac=function(o){return new(o||n)(e.\u0275\u0275directiveInject(Rt.p),e.\u0275\u0275directiveInject(he.V))}}static{this.\u0275cmp=e.\u0275\u0275defineComponent({type:n,selectors:[["cd-rgw-user-details"]],viewQuery:function(o,_){if(1&o&&(e.\u0275\u0275viewQuery(pc,5),e.\u0275\u0275viewQuery(mc,5)),2&o){let a;e.\u0275\u0275queryRefresh(a=e.\u0275\u0275loadQuery())&&(_.accessKeyTpl=a.first),e.\u0275\u0275queryRefresh(a=e.\u0275\u0275loadQuery())&&(_.secretKeyTpl=a.first)}},inputs:{selection:"selection"},features:[e.\u0275\u0275NgOnChangesFeature],decls:1,vars:1,consts:()=>{let t,o,_,a,r,s,c,u,p,T,f,G,S,O,C,b,N,k,z,$,X,B,V,Z,F,I,te,J,j,ee,D,ie,W;return t="Details",o="Tenant",_="User ID",a="Username",r="Full name",s="Suspended",c="System user",u="Maximum buckets",p="Keys",T="Email address",f="Managed policies",G="" + "\ufffd0\ufffd" + "",S="Subusers",O="Capabilities",C="MFAs(Id)",b="Account Details",N="Account ID",k="Name",z="Tenant",$="User type",X="" + "\ufffd0\ufffd" + "",B="User quota",V="Enabled",Z="Maximum size",F="Maximum objects",I=" Unlimited ",te=" Unlimited ",J="Bucket quota",j="Enabled",ee="Maximum size",D="Maximum objects",ie=" Unlimited ",W=" Unlimited ",[t,o,_,a,r,s,c,u,p,T,f,G,S,O,C,b,N,k,z,$,X,B,V,Z,F,I,te,J,j,ee,D,ie,W,[4,"ngIf"],[1,"cds--data-table--sort","cds--data-table--no-border","cds--data-table","cds--data-table--md"],[1,"bold","w-25"],[1,"w-75"],[1,"bold"],["columnMode","flex","selectionType","single","forceIdentifier","true",3,"updateSelection","data","columns"],[1,"table-actions",3,"permission","selection","tableActions"],[4,"ngFor","ngForOf"],["id","accountsDetails",1,"cds--data-table--sort","cds--data-table--no-border","cds--data-table","cds--data-table--md"],[3,"rateLimitConfig","type"]]},template:function(o,_){1&o&&e.\u0275\u0275template(0,kc,2,1,"ng-container",33),2&o&&e.\u0275\u0275property("ngIf",_.selection)},dependencies:[E.NgForOf,E.NgIf,re.O,De.j,Bn,_n.s,bt.l,dc.r,uc.r]})}}return n})();const ln=()=>({exact:!0});let no=(()=>{class n{static{this.\u0275fac=function(o){return new(o||n)}}static{this.\u0275cmp=e.\u0275\u0275defineComponent({type:n,selectors:[["cd-rgw-user-tabs"]],decls:10,vars:6,consts:()=>{let t,o,_;return t="Users",o="Accounts",_="Roles",[t,o,_,[1,"nav","nav-tabs"],[1,"nav-item"],["routerLink","/rgw/user","routerLinkActive","active","ariaCurrentWhenActive","page",1,"nav-link",3,"routerLinkActiveOptions"],["routerLink","/rgw/accounts","routerLinkActive","active","ariaCurrentWhenActive","page",1,"nav-link",3,"routerLinkActiveOptions"],["routerLink","/rgw/roles","routerLinkActive","active","ariaCurrentWhenActive","page",1,"nav-link",3,"routerLinkActiveOptions"]]},template:function(o,_){1&o&&(e.\u0275\u0275elementStart(0,"ul",3)(1,"li",4)(2,"a",5),e.\u0275\u0275i18n(3,0),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(4,"li",4)(5,"a",6),e.\u0275\u0275i18n(6,1),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(7,"li",4)(8,"a",7),e.\u0275\u0275i18n(9,2),e.\u0275\u0275elementEnd()()()),2&o&&(e.\u0275\u0275advance(2),e.\u0275\u0275property("routerLinkActiveOptions",e.\u0275\u0275pureFunction0(3,ln)),e.\u0275\u0275advance(3),e.\u0275\u0275property("routerLinkActiveOptions",e.\u0275\u0275pureFunction0(4,ln)),e.\u0275\u0275advance(3),e.\u0275\u0275property("routerLinkActiveOptions",e.\u0275\u0275pureFunction0(5,ln)))},dependencies:[Q.RouterLink,Q.RouterLinkActive]})}}return n})();const Hc=["userSizeTpl"],Xc=["userObjectTpl"],Bc=["usernameTpl"];function Vc(n,i){if(1&n&&e.\u0275\u0275element(0,"cd-rgw-user-details",12),2&n){const t=e.\u0275\u0275nextContext();e.\u0275\u0275property("selection",t.expandedRow)}}function Zc(n,i){if(1&n&&e.\u0275\u0275element(0,"cd-usage-bar",14),2&n){const t=e.\u0275\u0275nextContext().data.row;e.\u0275\u0275property("total",t.user_quota.max_size)("used",t.stats.size_actual)}}function Kc(n,i){1&n&&e.\u0275\u0275i18n(0,6)}function qc(n,i){if(1&n&&e.\u0275\u0275template(0,Zc,1,2,"cd-usage-bar",13)(1,Kc,1,0,"ng-template",null,4,e.\u0275\u0275templateRefExtractor),2&n){const t=i.data.row,o=e.\u0275\u0275reference(2);e.\u0275\u0275property("ngIf",t.user_quota.max_size>0&&t.user_quota.enabled)("ngIfElse",o)}}function jc(n,i){if(1&n&&e.\u0275\u0275element(0,"cd-usage-bar",16),2&n){const t=e.\u0275\u0275nextContext().data.row;e.\u0275\u0275property("total",t.user_quota.max_objects)("used",t.stats.num_objects)("isBinary",!1)}}function Yc(n,i){1&n&&e.\u0275\u0275i18n(0,7)}function Qc(n,i){if(1&n&&e.\u0275\u0275template(0,jc,1,3,"cd-usage-bar",15)(1,Yc,1,0,"ng-template",null,5,e.\u0275\u0275templateRefExtractor),2&n){const t=i.data.row,o=e.\u0275\u0275reference(2);e.\u0275\u0275property("ngIf",t.user_quota.max_objects>0&&t.user_quota.enabled)("ngIfElse",o)}}function Jc(n,i){if(1&n&&(e.\u0275\u0275elementStart(0,"cds-tooltip",18),e.\u0275\u0275namespaceSVG(),e.\u0275\u0275element(1,"svg",19),e.\u0275\u0275elementEnd()),2&n){const t=e.\u0275\u0275nextContext(2);e.\u0275\u0275property("description","Account root user")("align","top"),e.\u0275\u0275advance(),e.\u0275\u0275property("cdsIcon",t.icons.userAccessLocked)("size",t.icons.size16)}}function ed(n,i){if(1&n&&(e.\u0275\u0275elementStart(0,"div",17)(1,"span"),e.\u0275\u0275i18n(2,8),e.\u0275\u0275elementEnd(),e.\u0275\u0275template(3,Jc,2,4,"cds-tooltip",18),e.\u0275\u0275elementEnd()),2&n){const t=i.data.row;e.\u0275\u0275advance(2),e.\u0275\u0275i18nExp(t.uid),e.\u0275\u0275i18nApply(2),e.\u0275\u0275advance(),e.\u0275\u0275conditional("root"===t.type?3:-1)}}let nd=(()=>{class n extends Je.D{constructor(t,o,_,a,r,s,c){super(s),this.authStorageService=t,this.rgwUserService=o,this.modalService=_,this.urlBuilder=a,this.actionLabels=r,this.ngZone=s,this.rgwUserAccountService=c,this.columns=[],this.users=[],this.selection=new Oe.y,this.userDataSubject=new U.Subject,this.icons=y.FI}ngOnInit(){this.permission=this.authStorageService.getPermissions().rgw,this.columns=[{name:"Username",prop:"uid",flexGrow:1,cellTemplate:this.usernameTpl},{name:"Tenant",prop:"tenant",flexGrow:1},{name:"Account name",prop:"account.name",flexGrow:1},{name:"Full name",prop:"display_name",flexGrow:1},{name:"Email address",prop:"email",flexGrow:1},{name:"Suspended",prop:"suspended",flexGrow:1,cellClass:"text-center",cellTransformation:He.x.checkIcon},{name:"Max. buckets",prop:"max_buckets",flexGrow:1,cellTransformation:He.x.map,customTemplateConfig:{"-1":"Disabled",0:"Unlimited"}},{name:"Capacity Limit %",prop:"size_usage",cellTemplate:this.userSizeTpl,flexGrow:.8},{name:"Object Limit %",prop:"object_usage",cellTemplate:this.userObjectTpl,flexGrow:.8}],this.userDataSubject.pipe((0,K.switchMap)(r=>this.rgwUserAccountService.list(!0))).subscribe(r=>{this.userAccounts=r,this.mapUsersWithAccount()});const t=()=>this.selection.first()&&`${encodeURIComponent(this.selection.first().uid)}`;this.tableActions=[{permission:"create",icon:y.FI.add,routerLink:()=>this.urlBuilder.getCreate(),name:this.actionLabels.CREATE,canBePrimary:r=>!r.hasSelection},{permission:"update",icon:y.FI.edit,routerLink:()=>this.urlBuilder.getEdit(t()),name:this.actionLabels.EDIT},{permission:"delete",icon:y.FI.destroy,click:()=>this.deleteAction(),disable:()=>!this.selection.hasSelection,name:this.actionLabels.DELETE}],this.setTableRefreshTimeout()}getUserList(t){this.setTableRefreshTimeout(),this.rgwUserService.list().subscribe(o=>{this.users=o,this.userDataSubject.next(o)},()=>{t.error()})}mapUsersWithAccount(){this.users=this.users.map(t=>({account:this.userAccounts.find(_=>_.id===t.account_id)||{name:""},...t}))}updateSelection(t){this.selection=t}deleteAction(){this.modalService.show(Ue.D,{impact:On.r.high,itemDescription:this.selection.hasSingleSelection?"user":"users",itemNames:this.selection.selected.map(t=>t.uid),submitActionObservable:()=>new U.Observable(t=>{(0,U.forkJoin)(this.selection.selected.map(o=>this.rgwUserService.delete(o.uid))).subscribe({error:o=>{t.error(o),this.table.refreshBtn()},complete:()=>{t.complete(),this.table.refreshBtn()}})})})}static{this.\u0275fac=function(o){return new(o||n)(e.\u0275\u0275directiveInject(be.v),e.\u0275\u0275directiveInject(Rt.p),e.\u0275\u0275directiveInject(he.V),e.\u0275\u0275directiveInject(se.E),e.\u0275\u0275directiveInject(P.Ss),e.\u0275\u0275directiveInject(e.NgZone),e.\u0275\u0275directiveInject(ht))}}static{this.\u0275cmp=e.\u0275\u0275defineComponent({type:n,selectors:[["cd-rgw-user-list"]],viewQuery:function(o,_){if(1&o&&(e.\u0275\u0275viewQuery(re.O,7),e.\u0275\u0275viewQuery(Hc,7),e.\u0275\u0275viewQuery(Xc,7),e.\u0275\u0275viewQuery(Bc,7)),2&o){let a;e.\u0275\u0275queryRefresh(a=e.\u0275\u0275loadQuery())&&(_.table=a.first),e.\u0275\u0275queryRefresh(a=e.\u0275\u0275loadQuery())&&(_.userSizeTpl=a.first),e.\u0275\u0275queryRefresh(a=e.\u0275\u0275loadQuery())&&(_.userObjectTpl=a.first),e.\u0275\u0275queryRefresh(a=e.\u0275\u0275loadQuery())&&(_.usernameTpl=a.first)}},features:[e.\u0275\u0275ProvidersFeature([{provide:se.E,useValue:new se.E("rgw/user")}]),e.\u0275\u0275InheritDefinitionFeature],decls:11,vars:8,consts:()=>{let t,o,_;return t="No Limit",o="No Limit",_="" + "\ufffd0\ufffd" + "",[["table",""],["userSizeTpl",""],["userObjectTpl",""],["usernameTpl",""],["noSizeQuota",""],["noObjectQuota",""],t,o,_,["columnMode","flex","selectionType","single","identifier","uid",3,"setExpandedRow","updateSelection","fetchData","autoReload","data","columns","hasDetails","status"],[1,"table-actions",3,"permission","selection","tableActions"],[3,"selection",4,"cdTableDetail"],[3,"selection"],[3,"total","used",4,"ngIf","ngIfElse"],[3,"total","used"],[3,"total","used","isBinary",4,"ngIf","ngIfElse"],[3,"total","used","isBinary"],["cdsRow",""],[3,"description","align"],[1,"account-root-icon",3,"cdsIcon","size"]]},template:function(o,_){if(1&o){const a=e.\u0275\u0275getCurrentView();e.\u0275\u0275element(0,"cd-rgw-user-tabs"),e.\u0275\u0275elementStart(1,"cd-table",9,0),e.\u0275\u0275listener("setExpandedRow",function(s){return e.\u0275\u0275restoreView(a),e.\u0275\u0275resetView(_.setExpandedRow(s))})("updateSelection",function(s){return e.\u0275\u0275restoreView(a),e.\u0275\u0275resetView(_.updateSelection(s))})("fetchData",function(s){return e.\u0275\u0275restoreView(a),e.\u0275\u0275resetView(_.getUserList(s))}),e.\u0275\u0275element(3,"cd-table-actions",10),e.\u0275\u0275template(4,Vc,1,1,"cd-rgw-user-details",11),e.\u0275\u0275elementEnd(),e.\u0275\u0275template(5,qc,3,2,"ng-template",null,1,e.\u0275\u0275templateRefExtractor)(7,Qc,3,2,"ng-template",null,2,e.\u0275\u0275templateRefExtractor)(9,ed,4,2,"ng-template",null,3,e.\u0275\u0275templateRefExtractor)}2&o&&(e.\u0275\u0275advance(),e.\u0275\u0275property("autoReload",!1)("data",_.users)("columns",_.columns)("hasDetails",!0)("status",_.tableStatus),e.\u0275\u0275advance(2),e.\u0275\u0275property("permission",_.permission)("selection",_.selection)("tableActions",_.tableActions))},dependencies:[E.NgIf,Xn.o,re.O,De.j,ot.N,d.RowDirective,d.IconDirective,d.Tooltip,zc,no],styles:[".account-root-icon[_ngcontent-%COMP%]{margin-left:.5rem}"]})}}return n})();var Mt=g(19830),Ot=g(20961),vt=g(77867),od=g(15643),Me=g(58384),H=g(24192),Pt=g(55472),Xe=g(69081),Be=g(10142),We=g(78708);function _d(n,i){1&n&&(e.\u0275\u0275elementStart(0,"span",42),e.\u0275\u0275i18n(1,9),e.\u0275\u0275elementEnd())}function id(n,i){1&n&&(e.\u0275\u0275elementStart(0,"span",42),e.\u0275\u0275i18n(1,10),e.\u0275\u0275elementEnd())}function ad(n,i){1&n&&(e.\u0275\u0275elementStart(0,"span",42),e.\u0275\u0275i18n(1,11),e.\u0275\u0275elementEnd())}function rd(n,i){1&n&&(e.\u0275\u0275elementStart(0,"span",42),e.\u0275\u0275i18n(1,12),e.\u0275\u0275elementEnd())}function ld(n,i){1&n&&(e.\u0275\u0275elementStart(0,"span",42),e.\u0275\u0275i18n(1,13),e.\u0275\u0275elementEnd())}function sd(n,i){1&n&&(e.\u0275\u0275elementStart(0,"span",42),e.\u0275\u0275i18n(1,14),e.\u0275\u0275elementEnd())}function cd(n,i){1&n&&(e.\u0275\u0275elementStart(0,"span",42),e.\u0275\u0275i18n(1,15),e.\u0275\u0275elementEnd())}function dd(n,i){1&n&&(e.\u0275\u0275elementStart(0,"span",42),e.\u0275\u0275i18n(1,16),e.\u0275\u0275elementEnd())}function ud(n,i){1&n&&(e.\u0275\u0275elementStart(0,"span",42),e.\u0275\u0275i18n(1,17),e.\u0275\u0275elementEnd())}function pd(n,i){1&n&&(e.\u0275\u0275elementStart(0,"span",42),e.\u0275\u0275i18n(1,18),e.\u0275\u0275elementEnd())}function md(n,i){1&n&&(e.\u0275\u0275elementStart(0,"span",42),e.\u0275\u0275i18n(1,19),e.\u0275\u0275elementEnd())}let Td=(()=>{class n{constructor(t,o,_,a,r,s,c,u,p){this.activeModal=t,this.actionLabels=o,this.rgwMultisiteService=_,this.rgwZoneService=a,this.notificationService=r,this.rgwZonegroupService=s,this.rgwRealmService=c,this.rgwDaemonService=u,this.modalService=p,this.submitAction=new e.EventEmitter,this.multisiteInfo=[],this.createForm()}createForm(){this.multisiteMigrateForm=new Me.$({realmName:new l.UntypedFormControl(null,{validators:[l.Validators.required,M.xQ.custom("uniqueName",t=>this.realmNames&&-1!==this.zoneNames.indexOf(t))]}),zonegroupName:new l.UntypedFormControl(null,{validators:[l.Validators.required,M.xQ.custom("uniqueName",t=>this.zonegroupNames&&-1!==this.zoneNames.indexOf(t))]}),zoneName:new l.UntypedFormControl(null,{validators:[l.Validators.required,M.xQ.custom("uniqueName",t=>this.zoneNames&&-1!==this.zoneNames.indexOf(t))]}),zone_endpoints:new l.UntypedFormControl(null,{validators:[M.xQ.url,l.Validators.required]}),zonegroup_endpoints:new l.UntypedFormControl(null,{validators:[M.xQ.url,l.Validators.required]}),username:new l.UntypedFormControl(null,{validators:[l.Validators.required]})})}ngOnInit(){this.realmList=void 0!==this.multisiteInfo[0]&&this.multisiteInfo[0].hasOwnProperty("realms")?this.multisiteInfo[0].realms:[],this.realmNames=this.realmList.map(t=>t.name),this.zonegroupList=void 0!==this.multisiteInfo[1]&&this.multisiteInfo[1].hasOwnProperty("zonegroups")?this.multisiteInfo[1].zonegroups:[],this.zonegroupNames=this.zonegroupList.map(t=>t.name),this.zoneList=void 0!==this.multisiteInfo[2]&&this.multisiteInfo[2].hasOwnProperty("zones")?this.multisiteInfo[2].zones:[],this.zoneNames=this.zoneList.map(t=>t.name)}submit(){const t=this.multisiteMigrateForm.value;this.realm=new H.SX,this.realm.name=t.realmName,this.zonegroup=new H.Oe,this.zonegroup.name=t.zonegroupName,this.zonegroup.endpoints=t.zonegroup_endpoints,this.zone=new H.$H,this.zone.name=t.zoneName,this.zone.endpoints=t.zone_endpoints,this.rgwMultisiteService.migrate(this.realm,this.zonegroup,this.zone,t.username).subscribe(()=>{this.rgwMultisiteService.setRestartGatewayMessage(!1),this.notificationService.show(w._.success,"Migration done successfully"),this.submitAction.emit(),this.activeModal.close()},()=>{this.notificationService.show(w._.error,"Migration failed")})}static{this.\u0275fac=function(o){return new(o||n)(e.\u0275\u0275directiveInject(v.NgbActiveModal),e.\u0275\u0275directiveInject(P.Ss),e.\u0275\u0275directiveInject(xe.A),e.\u0275\u0275directiveInject(Ot.w),e.\u0275\u0275directiveInject(ne.J),e.\u0275\u0275directiveInject(ke.Z),e.\u0275\u0275directiveInject(Mt.$),e.\u0275\u0275directiveInject($e.y),e.\u0275\u0275directiveInject(vt.B))}}static{this.\u0275cmp=e.\u0275\u0275defineComponent({type:n,selectors:[["cd-rgw-multisite-migrate"]],outputs:{submitAction:"submitAction"},decls:55,vars:15,consts:()=>{let t,o,_,a,r,s,c,u,p,T,f,G,S,O,C,b,N,k,z;return t="Migrate Single Site to Multi-site " + "\ufffd#3\ufffd" + "" + "\ufffd#4\ufffd" + "Migrate from a single-site deployment with a default zone group and zone to a multi-site system" + "\ufffd/#4\ufffd" + "" + "\ufffd/#3\ufffd" + "",o="Realm Name",_="Rename default zone group",a="Zone group Endpoints ",r="Rename default zone",s="Zone Endpoints ",c="Username",u="Specify the username for the system user. This user will be created automatically as part of the process.",p="This field is required.",T="The chosen realm name is already in use.",f="This field is required.",G="The chosen zone group name is already in use.",S="This field is required.",O="Please enter a valid URL.",C="This field is required.",b="The chosen zone name is already in use.",N="This field is required.",k="Please enter a valid URL.",z="This field is required.",[["formDir","ngForm"],t,o,_,a,r,s,c,u,p,T,f,G,S,O,C,b,N,k,z,[3,"modalRef"],[1,"modal-title"],[1,"modal-content"],["name","multisiteMigrateForm","novalidate","",3,"formGroup"],[1,"modal-body"],[1,"form-group","row"],["for","realmName",1,"cd-col-form-label","required"],[1,"cd-col-form-input"],["type","text","placeholder","Realm name...","id","realmName","name","realmName","formControlName","realmName",1,"form-control"],["class","invalid-feedback",4,"ngIf"],["for","zonegroupName",1,"cd-col-form-label","required"],["type","text","placeholder","Zone group name...","id","zonegroupName","name","zonegroupName","formControlName","zonegroupName",1,"form-control"],["for","zonegroup_endpoints",1,"cd-col-form-label","required"],["type","text","placeholder","e.g, http://ceph-node-00.com:80","id","zonegroup_endpoints","name","zonegroup_endpoints","formControlName","zonegroup_endpoints",1,"form-control"],["for","zoneName",1,"cd-col-form-label","required"],["type","text","placeholder","Zone name...","id","zoneName","name","zoneName","formControlName","zoneName",1,"form-control"],["for","zone_endpoints",1,"cd-col-form-label","required"],["type","text","placeholder","e.g, http://ceph-node-00.com:80","id","zone_endpoints","name","zone_endpoints","formControlName","zone_endpoints",1,"form-control"],["for","username",1,"cd-col-form-label","required"],["type","text","placeholder","username","id","username","name","username","formControlName","username",1,"form-control"],[1,"modal-footer"],[3,"submitActionEvent","submitText","form"],[1,"invalid-feedback"]]},template:function(o,_){if(1&o){const a=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"cd-modal",20),e.\u0275\u0275elementContainerStart(1,21),e.\u0275\u0275i18nStart(2,1),e.\u0275\u0275elementStart(3,"cd-helper"),e.\u0275\u0275element(4,"span"),e.\u0275\u0275elementEnd(),e.\u0275\u0275i18nEnd(),e.\u0275\u0275elementContainerEnd(),e.\u0275\u0275elementContainerStart(5,22),e.\u0275\u0275elementStart(6,"form",23,0)(8,"div",24)(9,"div",25)(10,"label",26),e.\u0275\u0275i18n(11,2),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(12,"div",27),e.\u0275\u0275element(13,"input",28),e.\u0275\u0275template(14,_d,2,0,"span",29)(15,id,2,0,"span",29),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(16,"div",25)(17,"label",30),e.\u0275\u0275i18n(18,3),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(19,"div",27),e.\u0275\u0275element(20,"input",31),e.\u0275\u0275template(21,ad,2,0,"span",29)(22,rd,2,0,"span",29),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(23,"div",25)(24,"label",32),e.\u0275\u0275i18n(25,4),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(26,"div",27),e.\u0275\u0275element(27,"input",33),e.\u0275\u0275template(28,ld,2,0,"span",29)(29,sd,2,0,"span",29),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(30,"div",25)(31,"label",34),e.\u0275\u0275i18n(32,5),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(33,"div",27),e.\u0275\u0275element(34,"input",35),e.\u0275\u0275template(35,cd,2,0,"span",29)(36,dd,2,0,"span",29),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(37,"div",25)(38,"label",36),e.\u0275\u0275i18n(39,6),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(40,"div",27),e.\u0275\u0275element(41,"input",37),e.\u0275\u0275template(42,ud,2,0,"span",29)(43,pd,2,0,"span",29),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(44,"div",25)(45,"label",38),e.\u0275\u0275i18n(46,7),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(47,"div",27),e.\u0275\u0275element(48,"input",39),e.\u0275\u0275elementStart(49,"cd-help-text")(50,"span"),e.\u0275\u0275i18n(51,8),e.\u0275\u0275elementEnd()(),e.\u0275\u0275template(52,md,2,0,"span",29),e.\u0275\u0275elementEnd()()(),e.\u0275\u0275elementStart(53,"div",40)(54,"cd-form-button-panel",41),e.\u0275\u0275listener("submitActionEvent",function(){return e.\u0275\u0275restoreView(a),e.\u0275\u0275resetView(_.submit())}),e.\u0275\u0275elementEnd()()(),e.\u0275\u0275elementContainerEnd(),e.\u0275\u0275elementEnd()}if(2&o){const a=e.\u0275\u0275reference(7);e.\u0275\u0275property("modalRef",_.activeModal),e.\u0275\u0275advance(6),e.\u0275\u0275property("formGroup",_.multisiteMigrateForm),e.\u0275\u0275advance(8),e.\u0275\u0275property("ngIf",_.multisiteMigrateForm.showError("realmName",a,"required")),e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf",_.multisiteMigrateForm.showError("realmName",a,"uniqueName")),e.\u0275\u0275advance(6),e.\u0275\u0275property("ngIf",_.multisiteMigrateForm.showError("zonegroupName",a,"required")),e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf",_.multisiteMigrateForm.showError("zonegroupName",a,"uniqueName")),e.\u0275\u0275advance(6),e.\u0275\u0275property("ngIf",_.multisiteMigrateForm.showError("zonegroup_endpoints",a,"required")),e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf",_.multisiteMigrateForm.showError("zonegroup_endpoints",a,"invalidURL")),e.\u0275\u0275advance(6),e.\u0275\u0275property("ngIf",_.multisiteMigrateForm.showError("zoneName",a,"required")),e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf",_.multisiteMigrateForm.showError("zoneName",a,"uniqueName")),e.\u0275\u0275advance(6),e.\u0275\u0275property("ngIf",_.multisiteMigrateForm.showError("zone_endpoints",a,"required")),e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf",_.multisiteMigrateForm.showError("zone_endpoints",a,"invalidURL")),e.\u0275\u0275advance(9),e.\u0275\u0275property("ngIf",_.multisiteMigrateForm.showError("username",a,"required")),e.\u0275\u0275advance(2),e.\u0275\u0275property("submitText",_.actionLabels.MIGRATE+" to Multi-site")("form",_.multisiteMigrateForm)}},dependencies:[E.NgIf,Pt.m,Xe.z,_e.e,ae.O,Y.S,Be.a,We.C,oe.E,l.\u0275NgNoValidate,l.DefaultValueAccessor,l.NgControlStatus,l.NgControlStatusGroup,l.FormGroupDirective,l.FormControlName]})}}return n})();var oo=g(59870);function gd(n,i){if(1&n&&(e.\u0275\u0275elementStart(0,"strong",22),e.\u0275\u0275text(1),e.\u0275\u0275elementEnd()),2&n){const t=i.$implicit;e.\u0275\u0275advance(),e.\u0275\u0275textInterpolate(t)}}function Ed(n,i){1&n&&(e.\u0275\u0275elementStart(0,"div",23)(1,"cd-alert-panel",24),e.\u0275\u0275i18n(2,5),e.\u0275\u0275elementEnd()())}function Rd(n,i){if(1&n){const t=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementContainerStart(0),e.\u0275\u0275elementStart(1,"label",14),e.\u0275\u0275i18nStart(2,2),e.\u0275\u0275element(3,"strong"),e.\u0275\u0275i18nEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(4,"label",15),e.\u0275\u0275i18n(5,3),e.\u0275\u0275elementEnd(),e.\u0275\u0275template(6,gd,2,1,"strong",16),e.\u0275\u0275elementStart(7,"div",17)(8,"div",18)(9,"input",19),e.\u0275\u0275listener("change",function(){e.\u0275\u0275restoreView(t);const _=e.\u0275\u0275nextContext();return e.\u0275\u0275resetView(_.showDangerText())}),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(10,"label",20),e.\u0275\u0275i18n(11,4),e.\u0275\u0275elementEnd()(),e.\u0275\u0275template(12,Ed,3,0,"div",21),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementContainerEnd()}if(2&n){const t=e.\u0275\u0275nextContext();e.\u0275\u0275advance(3),e.\u0275\u0275i18nExp(null==t.zone?null:t.zone.name),e.\u0275\u0275i18nApply(2),e.\u0275\u0275advance(3),e.\u0275\u0275property("ngForOf",t.includedPools),e.\u0275\u0275advance(6),e.\u0275\u0275property("ngIf",t.displayText)}}let Cd=(()=>{class n{constructor(t,o,_,a,r){this.activeModal=t,this.actionLabels=o,this.notificationService=_,this.rgwZoneService=a,this.poolService=r,this.displayText=!1,this.includedPools=new Set,this.createForm()}ngOnInit(){this.zoneData$=this.rgwZoneService.get(this.zone),this.poolList$=this.poolService.getList()}ngAfterViewInit(){this.updateIncludedPools()}createForm(){this.zoneForm=new Me.$({deletePools:new l.UntypedFormControl(!1)})}submit(){this.rgwZoneService.delete(this.zone.name,this.zoneForm.value.deletePools,this.includedPools,this.zone.parent).subscribe(()=>{this.notificationService.show(w._.success,"Zone: '" + this.zone.name + "' deleted successfully"),this.activeModal.close()},()=>{this.zoneForm.setErrors({cdSubmitButton:!0})})}showDangerText(){this.displayText=!this.displayText}updateIncludedPools(){!this.zoneData$||!this.poolList$||this.zoneData$.subscribe(t=>{this.poolList$.subscribe(o=>{for(const _ of o)for(const a of Object.values(t))if("string"==typeof a&&a.includes(_.pool_name))this.includedPools.add(_.pool_name);else if(Array.isArray(a)&&a[0].val)for(const r of a){const s=r.val;s.storage_classes.STANDARD.data_pool===_.pool_name&&this.includedPools.add(s.storage_classes.STANDARD.data_pool),s.data_extra_pool===_.pool_name&&this.includedPools.add(s.data_extra_pool),s.index_pool===_.pool_name&&this.includedPools.add(s.index_pool)}})})}static{this.\u0275fac=function(o){return new(o||n)(e.\u0275\u0275directiveInject(v.NgbActiveModal),e.\u0275\u0275directiveInject(P.Ss),e.\u0275\u0275directiveInject(ne.J),e.\u0275\u0275directiveInject(Ot.w),e.\u0275\u0275directiveInject(oo.m))}}static{this.\u0275cmp=e.\u0275\u0275defineComponent({type:n,selectors:[["cd-rgw-multisite-zone-deletion-form"]],decls:12,vars:6,consts:()=>{let t,o,_,a,r,s;return t="Delete Zone",o=" This will delete your " + "\ufffd#8\ufffd" + "" + "\ufffd0\ufffd" + "" + "\ufffd/#8\ufffd" + " Zone. ",_=" Do you want to delete the associated pools with the " + "\ufffd#3\ufffd" + "" + "\ufffd0\ufffd" + "" + "\ufffd/#3\ufffd" + " Zone?",a=" This will delete the following pools and any data stored in these pools:",r="Yes, I want to delete the pools.",s=" This will delete all the data in the pools! ",[t,o,_,a,r,s,[3,"modalRef"],[1,"modal-title"],[1,"modal-content"],["name","zoneForm","novalidate","",3,"formGroup"],[1,"modal-body","ms-4"],[4,"ngIf"],[1,"modal-footer"],[3,"submitActionEvent","form","submitText"],[1,"mt-3"],[1,"mb-4"],["class","block",4,"ngFor","ngForOf"],[1,"form-group"],[1,"custom-control","custom-checkbox","mt-2"],["type","checkbox","name","deletePools","id","deletePools","formControlName","deletePools",1,"custom-control-input",3,"change"],["for","deletePools",1,"custom-control-label"],["class","me-4",4,"ngIf"],[1,"block"],[1,"me-4"],["type","danger"]]},template:function(o,_){1&o&&(e.\u0275\u0275elementStart(0,"cd-modal",6),e.\u0275\u0275elementContainerStart(1,7),e.\u0275\u0275i18n(2,0),e.\u0275\u0275elementContainerEnd(),e.\u0275\u0275elementContainerStart(3,8),e.\u0275\u0275elementStart(4,"form",9)(5,"div",10)(6,"label"),e.\u0275\u0275i18nStart(7,1),e.\u0275\u0275element(8,"strong"),e.\u0275\u0275i18nEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275template(9,Rd,13,3,"ng-container",11),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(10,"div",12)(11,"cd-form-button-panel",13),e.\u0275\u0275listener("submitActionEvent",function(){return _.submit()}),e.\u0275\u0275elementEnd()()(),e.\u0275\u0275elementContainerEnd(),e.\u0275\u0275elementEnd()),2&o&&(e.\u0275\u0275property("modalRef",_.activeModal),e.\u0275\u0275advance(4),e.\u0275\u0275property("formGroup",_.zoneForm),e.\u0275\u0275advance(4),e.\u0275\u0275i18nExp(null==_.zone?null:_.zone.name),e.\u0275\u0275i18nApply(7),e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf",_.includedPools.size),e.\u0275\u0275advance(2),e.\u0275\u0275property("form",_.zoneForm)("submitText",_.actionLabels.DELETE))},dependencies:[E.NgForOf,E.NgIf,Xe.z,Pe.m,_e.e,Y.S,Be.a,We.C,oe.E,l.\u0275NgNoValidate,l.CheckboxControlValueAccessor,l.NgControlStatus,l.NgControlStatusGroup,l.FormGroupDirective,l.FormControlName],styles:[".block[_ngcontent-%COMP%]{display:block}#scroll[_ngcontent-%COMP%]{height:100%;max-height:10rem;overflow:auto}"]})}}return n})();function fd(n,i){1&n&&(e.\u0275\u0275elementContainerStart(0),e.\u0275\u0275elementStart(1,"label"),e.\u0275\u0275i18n(2,4),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementContainerEnd())}function Sd(n,i){if(1&n&&(e.\u0275\u0275elementStart(0,"strong",25),e.\u0275\u0275text(1),e.\u0275\u0275elementEnd()),2&n){const t=i.$implicit;e.\u0275\u0275advance(),e.\u0275\u0275textInterpolate(t)}}function Fd(n,i){if(1&n&&(e.\u0275\u0275elementStart(0,"strong",25),e.\u0275\u0275text(1),e.\u0275\u0275elementEnd()),2&n){const t=i.$implicit;e.\u0275\u0275advance(),e.\u0275\u0275textInterpolate(t)}}function Md(n,i){if(1&n&&(e.\u0275\u0275elementContainerStart(0),e.\u0275\u0275elementStart(1,"strong",17),e.\u0275\u0275text(2,"Pools:"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(3,"div",26),e.\u0275\u0275template(4,Fd,2,1,"strong",19),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementContainerEnd()),2&n){const t=e.\u0275\u0275nextContext(2);e.\u0275\u0275advance(4),e.\u0275\u0275property("ngForOf",t.includedPools)}}function Pd(n,i){1&n&&(e.\u0275\u0275elementContainerStart(0),e.\u0275\u0275elementStart(1,"label",27),e.\u0275\u0275i18n(2,5),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementContainerEnd())}function Id(n,i){1&n&&(e.\u0275\u0275elementStart(0,"div",28)(1,"cd-alert-panel",29),e.\u0275\u0275i18n(2,6),e.\u0275\u0275elementEnd()())}function Od(n,i){if(1&n){const t=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementContainerStart(0),e.\u0275\u0275elementStart(1,"label",16),e.\u0275\u0275i18nStart(2,3),e.\u0275\u0275element(3,"strong"),e.\u0275\u0275i18nEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275template(4,fd,3,0,"ng-container",13),e.\u0275\u0275elementStart(5,"strong",17),e.\u0275\u0275text(6,"Zones:"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(7,"div",18),e.\u0275\u0275template(8,Sd,2,1,"strong",19),e.\u0275\u0275elementEnd(),e.\u0275\u0275template(9,Md,5,1,"ng-container",13),e.\u0275\u0275elementStart(10,"div",20)(11,"div",21)(12,"input",22),e.\u0275\u0275listener("change",function(){e.\u0275\u0275restoreView(t);const _=e.\u0275\u0275nextContext();return e.\u0275\u0275resetView(_.showDangerText())}),e.\u0275\u0275elementEnd(),e.\u0275\u0275template(13,Pd,3,0,"ng-container",23),e.\u0275\u0275elementEnd(),e.\u0275\u0275template(14,Id,3,0,"div",24),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementContainerEnd()}if(2&n){const t=e.\u0275\u0275nextContext(),o=e.\u0275\u0275reference(13);e.\u0275\u0275advance(3),e.\u0275\u0275i18nExp(null==t.zonegroup?null:t.zonegroup.name),e.\u0275\u0275i18nApply(2),e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf",t.includedPools.size>0),e.\u0275\u0275advance(4),e.\u0275\u0275property("ngForOf",t.zonesList),e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf",t.includedPools.size>0),e.\u0275\u0275advance(4),e.\u0275\u0275property("ngIf",t.includedPools.size>0)("ngIfElse",o),e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf",t.displayText)}}function Gd(n,i){1&n&&(e.\u0275\u0275elementStart(0,"label",27),e.\u0275\u0275i18n(1,7),e.\u0275\u0275elementEnd())}let Nd=(()=>{class n{constructor(t,o,_,a,r,s){this.activeModal=t,this.actionLabels=o,this.notificationService=_,this.rgwZonegroupService=a,this.poolService=r,this.rgwZoneService=s,this.zonesPools=[],this.zonesList=[],this.displayText=!1,this.includedPools=new Set,this.createForm()}ngOnInit(){this.zonegroupData$=this.rgwZonegroupService.get(this.zonegroup),this.poolList$=this.poolService.getList()}ngAfterViewInit(){this.updateIncludedPools()}createForm(){this.zonegroupForm=new Me.$({deletePools:new l.UntypedFormControl(!1)})}submit(){this.rgwZonegroupService.delete(this.zonegroup.name,this.zonegroupForm.value.deletePools,this.includedPools).subscribe(()=>{this.notificationService.show(w._.success,"Zonegroup: '" + this.zonegroup.name + "' deleted successfully"),this.activeModal.close()})}showDangerText(){this.includedPools.size>0&&(this.displayText=!this.displayText)}updateIncludedPools(){!this.zonegroupData$||!this.poolList$||this.zonegroupData$.subscribe(t=>{for(const o of t.zones)this.zonesList.push(o.name),this.rgwZoneService.get(o).subscribe(_=>{this.poolList$.subscribe(a=>{for(const r of Object.values(_))for(const s of a)if("string"==typeof r&&r.includes(s.pool_name))this.includedPools.add(s.pool_name);else if(Array.isArray(r)&&r[0].val)for(const c of r){const u=c.val;u.storage_classes.STANDARD.data_pool===s.pool_name&&this.includedPools.add(u.storage_classes.STANDARD.data_pool),u.data_extra_pool===s.pool_name&&this.includedPools.add(u.data_extra_pool),u.index_pool===s.pool_name&&this.includedPools.add(u.index_pool)}})})})}static{this.\u0275fac=function(o){return new(o||n)(e.\u0275\u0275directiveInject(v.NgbActiveModal),e.\u0275\u0275directiveInject(P.Ss),e.\u0275\u0275directiveInject(ne.J),e.\u0275\u0275directiveInject(ke.Z),e.\u0275\u0275directiveInject(oo.m),e.\u0275\u0275directiveInject(Ot.w))}}static{this.\u0275cmp=e.\u0275\u0275defineComponent({type:n,selectors:[["cd-rgw-multisite-zonegroup-deletion-form"]],decls:14,vars:6,consts:()=>{let t,o,_,a,r,s,c;return t="Delete Zone Group",o=" This will delete your " + "\ufffd#8\ufffd" + "" + "\ufffd0\ufffd" + "" + "\ufffd/#8\ufffd" + " Zone Group. ",_=" Do you want to delete the associated zones and pools with the " + "\ufffd#3\ufffd" + "" + "\ufffd0\ufffd" + "" + "\ufffd/#3\ufffd" + " Zone Group?",a=" This will delete the following:",r="Yes, I want to delete the zones and their pools.",s=" This will delete all the data in the pools! ",c="Yes, I want to delete the zones.",[["noPoolsConfirmation",""],t,o,_,a,r,s,c,[3,"modalRef"],[1,"modal-title"],[1,"modal-content"],["name","zonegroupForm","novalidate","",3,"formGroup"],[1,"modal-body","ms-4"],[4,"ngIf"],[1,"modal-footer"],[3,"submitActionEvent","form","submitText"],[1,"mt-3"],[1,"mt-3","mb-2","h5","block"],["id","scroll"],["class","block",4,"ngFor","ngForOf"],[1,"form-group"],[1,"custom-control","custom-checkbox","mt-2"],["type","checkbox","name","deletePools","id","deletePools","formControlName","deletePools",1,"custom-control-input",3,"change"],[4,"ngIf","ngIfElse"],["class","me-4",4,"ngIf"],[1,"block"],["id","scroll",1,"mb-2"],["for","deletePools",1,"custom-control-label"],[1,"me-4"],["type","danger"]]},template:function(o,_){if(1&o){const a=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"cd-modal",8),e.\u0275\u0275elementContainerStart(1,9),e.\u0275\u0275i18n(2,1),e.\u0275\u0275elementContainerEnd(),e.\u0275\u0275elementContainerStart(3,10),e.\u0275\u0275elementStart(4,"form",11)(5,"div",12)(6,"label"),e.\u0275\u0275i18nStart(7,2),e.\u0275\u0275element(8,"strong"),e.\u0275\u0275i18nEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275template(9,Od,15,7,"ng-container",13),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(10,"div",14)(11,"cd-form-button-panel",15),e.\u0275\u0275listener("submitActionEvent",function(){return e.\u0275\u0275restoreView(a),e.\u0275\u0275resetView(_.submit())}),e.\u0275\u0275elementEnd()()(),e.\u0275\u0275elementContainerEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275template(12,Gd,2,0,"ng-template",null,0,e.\u0275\u0275templateRefExtractor)}2&o&&(e.\u0275\u0275property("modalRef",_.activeModal),e.\u0275\u0275advance(4),e.\u0275\u0275property("formGroup",_.zonegroupForm),e.\u0275\u0275advance(4),e.\u0275\u0275i18nExp(null==_.zonegroup?null:_.zonegroup.name),e.\u0275\u0275i18nApply(7),e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf",_.zonesList.length>0),e.\u0275\u0275advance(2),e.\u0275\u0275property("form",_.zonegroupForm)("submitText",_.actionLabels.DELETE))},dependencies:[E.NgForOf,E.NgIf,Xe.z,Pe.m,_e.e,Y.S,Be.a,We.C,oe.E,l.\u0275NgNoValidate,l.CheckboxControlValueAccessor,l.NgControlStatus,l.NgControlStatusGroup,l.FormGroupDirective,l.FormControlName],styles:[".block[_ngcontent-%COMP%]{display:block}#scroll[_ngcontent-%COMP%]{height:100%;max-height:10rem;overflow:auto}"]})}}return n})();var Ad=g(33117);const hd=(n,i,t)=>[n,i,t];function bd(n,i){if(1&n&&(e.\u0275\u0275elementStart(0,"span",13),e.\u0275\u0275element(1,"i",14),e.\u0275\u0275namespaceSVG(),e.\u0275\u0275element(2,"svg",15),e.\u0275\u0275elementEnd()),2&n){const t=e.\u0275\u0275nextContext();e.\u0275\u0275advance(),e.\u0275\u0275property("ngClass",e.\u0275\u0275pureFunction3(3,hd,t.icons.large3x,t.icons.spinner,t.icons.spin)),e.\u0275\u0275advance(),e.\u0275\u0275property("cdsIcon",t.icons.down)("size",t.icons.size24)}}function vd(n,i){if(1&n&&(e.\u0275\u0275i18nStart(0,2,1),e.\u0275\u0275elementStart(1,"div"),e.\u0275\u0275element(2,"b"),e.\u0275\u0275elementEnd(),e.\u0275\u0275i18nEnd()),2&n){const t=i.$implicit;e.\u0275\u0275advance(2),e.\u0275\u0275i18nExp(t.realm)(t.token),e.\u0275\u0275i18nApply(0)}}function Ld(n,i){if(1&n&&(e.\u0275\u0275elementStart(0,"cd-alert-panel",19),e.\u0275\u0275i18nStart(1,2),e.\u0275\u0275template(2,vd,3,2,"div",18),e.\u0275\u0275i18nEnd(),e.\u0275\u0275elementEnd()),2&n){const t=e.\u0275\u0275nextContext(2);e.\u0275\u0275advance(2),e.\u0275\u0275property("ngForOf",t.realms)}}function yd(n,i){1&n&&e.\u0275\u0275element(0,"hr")}function $d(n,i){if(1&n&&(e.\u0275\u0275elementStart(0,"div")(1,"div",20)(2,"label",21),e.\u0275\u0275i18n(3,3),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(4,"div",22),e.\u0275\u0275element(5,"input",23),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(6,"div",20)(7,"label",24),e.\u0275\u0275i18n(8,4),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(9,"div",22),e.\u0275\u0275element(10,"input",25)(11,"cd-copy-2-clipboard-button",26),e.\u0275\u0275elementEnd(),e.\u0275\u0275template(12,yd,1,0,"hr",27),e.\u0275\u0275elementEnd()()),2&n){const t=i.$implicit,o=e.\u0275\u0275nextContext(2);e.\u0275\u0275advance(5),e.\u0275\u0275propertyInterpolate("value",t.realm),e.\u0275\u0275advance(5),e.\u0275\u0275propertyInterpolate("value",t.token),e.\u0275\u0275advance(),e.\u0275\u0275propertyInterpolate("source",t.token),e.\u0275\u0275property("byId",!1),e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf",o.realms.length>1)}}function Dd(n,i){if(1&n&&(e.\u0275\u0275elementStart(0,"div",16),e.\u0275\u0275template(1,Ld,3,1,"cd-alert-panel",17)(2,$d,13,5,"div",18),e.\u0275\u0275elementEnd()),2&n){const t=e.\u0275\u0275nextContext();e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf",!t.tokenValid),e.\u0275\u0275advance(),e.\u0275\u0275property("ngForOf",t.realms)}}let Wd=(()=>{class n{constructor(t,o,_,a,r){this.activeModal=t,this.rgwRealmService=o,this.actionLabels=_,this.notificationService=a,this.changeDetectorRef=r,this.tokenValid=!1,this.loading=!0,this.icons=y.FI,this.createForm()}createForm(){this.exportTokenForm=new Me.$({})}onSubmit(){this.activeModal.close()}ngOnInit(){this.rgwRealmService.getRealmTokens().subscribe(t=>{this.loading=!1,this.realms=t;var o=new RegExp("^(?:[A-Za-z0-9+/]{4})*(?:[A-Za-z0-9+/]{2}==|[A-Za-z0-9+/]{3}=|[A-Za-z0-9+/]{4})$");this.realms.forEach(_=>{this.tokenValid=!!o.test(_.token)})})}ngAfterViewChecked(){this.changeDetectorRef.detectChanges()}static{this.\u0275fac=function(o){return new(o||n)(e.\u0275\u0275directiveInject(v.NgbActiveModal),e.\u0275\u0275directiveInject(Mt.$),e.\u0275\u0275directiveInject(P.Ss),e.\u0275\u0275directiveInject(ne.J),e.\u0275\u0275directiveInject(e.ChangeDetectorRef))}}static{this.\u0275cmp=e.\u0275\u0275defineComponent({type:n,selectors:[["cd-rgw-multisite-export"]],decls:10,vars:4,consts:()=>{let t,o,_,a;return t="Export Multi-site Realm Token",o="" + "\ufffd*2:1\ufffd\ufffd#1:1\ufffd" + "" + "\ufffd#2:1\ufffd" + "" + "\ufffd0:1\ufffd" + "" + "\ufffd/#2:1\ufffd" + " - " + "\ufffd1:1\ufffd" + " " + "\ufffd/#1:1\ufffd\ufffd/*2:1\ufffd" + "",_="Realm Name ",a="Token ",[["frm","ngForm"],t,o,_,a,[3,"modalRef"],[1,"modal-title"],[1,"modal-content"],["name","exportTokenForm",3,"formGroup"],["class","d-flex justify-content-center",4,"ngIf"],["class","modal-body",4,"ngIf"],[1,"modal-footer"],["aria-label","Close",1,"m-2","float-end",3,"backAction"],[1,"d-flex","justify-content-center"],[3,"ngClass"],[1,"cds-info-color",3,"cdsIcon","size"],[1,"modal-body"],["type","warning","class","mx-3",4,"ngIf"],[4,"ngFor","ngForOf"],["type","warning",1,"mx-3"],[1,"form-group","row"],["for","realmName",1,"cd-col-form-label"],[1,"cd-col-form-input"],["id","realmName","name","realmName","type","text","readonly","",3,"value"],["for","token",1,"cd-col-form-label"],["id","realmToken","name","realmToken","type","text","readonly","",1,"me-2","mb-4",3,"value"],[3,"source","byId"],[4,"ngIf"]]},template:function(o,_){if(1&o){const a=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"cd-modal",5),e.\u0275\u0275elementContainerStart(1,6),e.\u0275\u0275i18n(2,1),e.\u0275\u0275elementContainerEnd(),e.\u0275\u0275elementContainerStart(3,7),e.\u0275\u0275elementStart(4,"form",8,0),e.\u0275\u0275template(6,bd,3,7,"span",9)(7,Dd,3,2,"div",10),e.\u0275\u0275elementStart(8,"div",11)(9,"cd-back-button",12),e.\u0275\u0275listener("backAction",function(){return e.\u0275\u0275restoreView(a),e.\u0275\u0275resetView(_.activeModal.close())}),e.\u0275\u0275elementEnd()()(),e.\u0275\u0275elementContainerEnd(),e.\u0275\u0275elementEnd()}2&o&&(e.\u0275\u0275property("modalRef",_.activeModal),e.\u0275\u0275advance(4),e.\u0275\u0275property("formGroup",_.exportTokenForm),e.\u0275\u0275advance(2),e.\u0275\u0275property("ngIf",_.loading),e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf",!_.loading))},dependencies:[E.NgClass,E.NgForOf,E.NgIf,Ad.X,Xe.z,Pe.m,_t.N,Y.S,We.C,oe.E,l.\u0275NgNoValidate,l.NgControlStatusGroup,l.FormGroupDirective,d.IconDirective]})}}return n})();var sn=g(66668),xd=g(7466),Gt=g(31345),Lt=g(48693);function wd(n,i){1&n&&(e.\u0275\u0275elementStart(0,"span",46),e.\u0275\u0275i18n(1,8),e.\u0275\u0275elementEnd())}function Ud(n,i){1&n&&(e.\u0275\u0275elementStart(0,"span",46),e.\u0275\u0275i18n(1,9),e.\u0275\u0275elementEnd())}function kd(n,i){1&n&&(e.\u0275\u0275elementStart(0,"span",46),e.\u0275\u0275i18n(1,10),e.\u0275\u0275elementEnd())}function zd(n,i){1&n&&(e.\u0275\u0275elementStart(0,"div",31)(1,"label",47),e.\u0275\u0275i18n(2,11),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(3,"div",33)(4,"select",48)(5,"option",49),e.\u0275\u0275i18n(6,12),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(7,"option",50),e.\u0275\u0275i18n(8,13),e.\u0275\u0275elementEnd()()()())}function Hd(n,i){1&n&&(e.\u0275\u0275elementStart(0,"span",46),e.\u0275\u0275i18n(1,15),e.\u0275\u0275elementEnd())}function Xd(n,i){if(1&n){const t=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"div",31)(1,"label",51),e.\u0275\u0275i18n(2,14),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(3,"div",33)(4,"input",52),e.\u0275\u0275listener("focus",function(_){e.\u0275\u0275restoreView(t);const a=e.\u0275\u0275nextContext();return e.\u0275\u0275resetView(a.labelFocus.next(_.target.value))})("click",function(_){e.\u0275\u0275restoreView(t);const a=e.\u0275\u0275nextContext();return e.\u0275\u0275resetView(a.labelClick.next(_.target.value))}),e.\u0275\u0275elementEnd(),e.\u0275\u0275template(5,Hd,2,0,"span",35),e.\u0275\u0275elementEnd()()}if(2&n){const t=e.\u0275\u0275nextContext(),o=e.\u0275\u0275reference(5);e.\u0275\u0275advance(4),e.\u0275\u0275property("ngbTypeahead",t.searchLabels),e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf",t.importTokenForm.showError("label",o,"required"))}}function Bd(n,i){if(1&n&&(e.\u0275\u0275elementStart(0,"div",31)(1,"label",53),e.\u0275\u0275i18n(2,16),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(3,"div",33),e.\u0275\u0275element(4,"cd-select-badges",54),e.\u0275\u0275elementEnd()()),2&n){const t=e.\u0275\u0275nextContext();e.\u0275\u0275advance(4),e.\u0275\u0275property("data",t.importTokenForm.controls.hosts.value)("options",t.hosts.options)("messages",t.hosts.messages)}}function Vd(n,i){1&n&&(e.\u0275\u0275elementStart(0,"span",46),e.\u0275\u0275i18n(1,19),e.\u0275\u0275elementEnd())}function Zd(n,i){1&n&&(e.\u0275\u0275elementStart(0,"span",46),e.\u0275\u0275i18n(1,20),e.\u0275\u0275elementEnd())}function Kd(n,i){if(1&n&&(e.\u0275\u0275elementStart(0,"div",31)(1,"label",55)(2,"span"),e.\u0275\u0275i18n(3,17),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(4,"cd-helper"),e.\u0275\u0275i18n(5,18),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(6,"div",33),e.\u0275\u0275element(7,"input",56),e.\u0275\u0275template(8,Vd,2,0,"span",35)(9,Zd,2,0,"span",35),e.\u0275\u0275elementEnd()()),2&n){const t=e.\u0275\u0275nextContext(),o=e.\u0275\u0275reference(5);e.\u0275\u0275advance(8),e.\u0275\u0275property("ngIf",t.importTokenForm.showError("count",o,"min")),e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf",t.importTokenForm.showError("count",o,"pattern"))}}function qd(n,i){1&n&&(e.\u0275\u0275elementStart(0,"span",46),e.\u0275\u0275i18n(1,22),e.\u0275\u0275elementEnd())}function jd(n,i){1&n&&(e.\u0275\u0275elementStart(0,"span",46),e.\u0275\u0275i18n(1,23),e.\u0275\u0275elementEnd())}function Yd(n,i){1&n&&(e.\u0275\u0275elementStart(0,"span",46),e.\u0275\u0275i18n(1,24),e.\u0275\u0275elementEnd())}function Qd(n,i){if(1&n&&(e.\u0275\u0275elementContainerStart(0),e.\u0275\u0275elementStart(1,"div",31)(2,"label",57),e.\u0275\u0275i18n(3,21),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(4,"div",33),e.\u0275\u0275element(5,"input",58),e.\u0275\u0275template(6,qd,2,0,"span",35)(7,jd,2,0,"span",35)(8,Yd,2,0,"span",35),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementContainerEnd()),2&n){const t=e.\u0275\u0275nextContext(),o=e.\u0275\u0275reference(5);e.\u0275\u0275advance(6),e.\u0275\u0275property("ngIf",t.importTokenForm.showError("rgw_frontend_port",o,"pattern")),e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf",t.importTokenForm.showError("rgw_frontend_port",o,"min")),e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf",t.importTokenForm.showError("rgw_frontend_port",o,"max"))}}let Jd=(()=>{class n{constructor(t,o,_,a,r){this.activeModal=t,this.hostService=o,this.rgwRealmService=_,this.actionLabels=a,this.notificationService=r,this.endpoints=/^((https?:\/\/)|(www.))(?:([a-zA-Z]+)|(\d+\.\d+.\d+.\d+)):\d{2,4}$/,this.ipv4Rgx=/^((25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\.){3}(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)$/i,this.ipv6Rgx=/^(?:[a-f0-9]{1,4}:){7}[a-f0-9]{1,4}$/i,this.multisiteInfo=[],this.zoneList=[],this.labelClick=new U.Subject,this.labelFocus=new U.Subject,this.searchLabels=s=>(0,U.merge)(s.pipe((0,K.debounceTime)(200),(0,K.distinctUntilChanged)()),this.labelFocus,this.labelClick.pipe((0,K.filter)(()=>!this.typeahead.isPopupOpen()))).pipe((0,K.map)(c=>this.labels.filter(u=>u.toLowerCase().indexOf(c.toLowerCase())>-1).slice(0,10))),this.hosts={options:[],messages:new sn.z({empty:"There are no hosts.",filter:"Filter hosts"})},this.createForm()}ngOnInit(){this.zoneList=void 0!==this.multisiteInfo[2]&&this.multisiteInfo[2].hasOwnProperty("zones")?this.multisiteInfo[2].zones:[],this.zoneNames=this.zoneList.map(t=>t.name),this.hostService.getAllHosts().subscribe(t=>{const o=[];A().forEach(t,_=>{if(A().get(_,"sources.orchestrator",!1)){const a=new Gt.O(!1,A().get(_,"hostname"),"");o.push(a)}}),this.hosts.options=[...o]}),this.hostService.getLabels().subscribe(t=>{this.labels=t})}createForm(){this.importTokenForm=new Me.$({realmToken:new l.FormControl("",{validators:[l.Validators.required]}),zoneName:new l.FormControl(null,{validators:[l.Validators.required,M.xQ.custom("uniqueName",t=>this.zoneNames&&-1!==this.zoneNames.indexOf(t))]}),rgw_frontend_port:new l.FormControl(null,{validators:[l.Validators.required,l.Validators.pattern("^[0-9]*$")]}),placement:new l.FormControl("hosts"),label:new l.FormControl(null,[M.xQ.requiredIf({placement:"label",unmanaged:!1})]),hosts:new l.FormControl([]),count:new l.FormControl(null,[M.xQ.number(!1)]),unmanaged:new l.FormControl(!1)})}onSubmit(){const t=this.importTokenForm.value,o={placement:{}};if(!t.unmanaged){switch(t.placement){case"hosts":t.hosts.length>0&&(o.placement.hosts=t.hosts);break;case"label":o.placement.label=t.label}A().isNumber(t.count)&&t.count>0&&(o.placement.count=t.count)}this.rgwRealmService.importRealmToken(t.realmToken,t.zoneName,t.rgw_frontend_port,o).subscribe(()=>{this.notificationService.show(w._.success,"Realm token import successfull"),this.activeModal.close()},()=>{this.importTokenForm.setErrors({cdSubmitButton:!0})})}static{this.\u0275fac=function(o){return new(o||n)(e.\u0275\u0275directiveInject(v.NgbActiveModal),e.\u0275\u0275directiveInject(xd.I),e.\u0275\u0275directiveInject(Mt.$),e.\u0275\u0275directiveInject(P.Ss),e.\u0275\u0275directiveInject(ne.J))}}static{this.\u0275cmp=e.\u0275\u0275defineComponent({type:n,selectors:[["cd-rgw-multisite-import"]],viewQuery:function(o,_){if(1&o&&e.\u0275\u0275viewQuery(v.NgbTypeahead,5),2&o){let a;e.\u0275\u0275queryRefresh(a=e.\u0275\u0275loadQuery())&&(_.typeahead=a.first)}},decls:47,vars:12,consts:()=>{let t,o,_,a,r,s,c,u,p,T,f,G,S,O,C,b,N,k,z,$,X,B,V,Z;return t="Import Multi-site Token",o="Zone Details",_="Token ",a="Secondary Zone Name",r="Service Details",s="Unmanaged",c="If set to true, the orchestrator will not start nor stop any daemon associated with this service. Placement and all other properties will be ignored.",u="This field is required.",p="This field is required.",T="The chosen zone name is already in use.",f="Placement",G="Hosts",S="Label",O="Label",C="This field is required.",b="Hosts",N="Count",k="Only that number of daemons will be created.",z="The value must be at least 1.",$="The entered value needs to be a number.",X="Port",B="The entered value needs to be a number.",V="The value must be at least 1.",Z="The value cannot exceed 65535.",[["frm","ngForm"],t,o,_,a,r,s,c,u,p,T,f,G,S,O,C,b,N,k,z,$,X,B,V,Z,[3,"modalRef"],[1,"modal-title"],[1,"modal-content"],["name","importTokenForm",3,"formGroup"],[1,"modal-body"],["type","info","spacingClass","mb-3"],[1,"form-group","row"],["for","realmToken",1,"cd-col-form-label","required"],[1,"cd-col-form-input"],["id","realmToken","name","realmToken","type","text","formControlName","realmToken",1,"form-control"],["class","invalid-feedback",4,"ngIf"],["for","zoneName",1,"cd-col-form-label","required"],["type","text","placeholder","Zone name...","id","zoneName","name","zoneName","formControlName","zoneName",1,"form-control"],[1,"cd-col-form-offset"],[1,"custom-control","custom-checkbox"],["id","unmanaged","type","checkbox","formControlName","unmanaged",1,"custom-control-input"],["for","unmanaged",1,"custom-control-label"],["class","form-group row",4,"ngIf"],[4,"ngIf"],[1,"modal-footer"],[3,"submitActionEvent","submitText","form"],[1,"invalid-feedback"],["for","placement",1,"cd-col-form-label"],["id","placement","formControlName","placement",1,"form-select"],["value","hosts"],["value","label"],["for","label",1,"cd-col-form-label"],["id","label","type","text","formControlName","label",1,"form-control",3,"focus","click","ngbTypeahead"],["for","hosts",1,"cd-col-form-label"],["id","hosts",3,"data","options","messages"],["for","count",1,"cd-col-form-label"],["id","count","type","number","formControlName","count","min","1",1,"form-control"],["for","rgw_frontend_port",1,"cd-col-form-label"],["id","rgw_frontend_port","type","number","formControlName","rgw_frontend_port","min","1","max","65535",1,"form-control"]]},template:function(o,_){if(1&o){const a=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"cd-modal",25),e.\u0275\u0275elementContainerStart(1,26),e.\u0275\u0275i18n(2,1),e.\u0275\u0275elementContainerEnd(),e.\u0275\u0275elementContainerStart(3,27),e.\u0275\u0275elementStart(4,"form",28,0)(6,"div",29)(7,"cd-alert-panel",30)(8,"ul")(9,"li"),e.\u0275\u0275text(10,"This feature allows you to configure a connection between your primary and secondary Ceph clusters for data replication. By importing a token, you establish a link between the clusters, enabling data synchronization."),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(11,"li"),e.\u0275\u0275text(12,"To obtain the token, generate it from your primary Ceph cluster. This token includes encoded information about the primary cluster's endpoint, access key, and secret key."),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(13,"li"),e.\u0275\u0275text(14,"The secondary zone represents the destination cluster where your data will be replicated."),e.\u0275\u0275elementEnd()()(),e.\u0275\u0275elementStart(15,"legend"),e.\u0275\u0275i18n(16,2),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(17,"div",31)(18,"label",32),e.\u0275\u0275i18n(19,3),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(20,"div",33),e.\u0275\u0275element(21,"input",34),e.\u0275\u0275template(22,wd,2,0,"span",35),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(23,"div",31)(24,"label",36),e.\u0275\u0275i18n(25,4),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(26,"div",33),e.\u0275\u0275element(27,"input",37),e.\u0275\u0275template(28,Ud,2,0,"span",35)(29,kd,2,0,"span",35),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(30,"legend"),e.\u0275\u0275i18n(31,5),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(32,"div",31)(33,"div",38)(34,"div",39),e.\u0275\u0275element(35,"input",40),e.\u0275\u0275elementStart(36,"label",41),e.\u0275\u0275i18n(37,6),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(38,"cd-helper"),e.\u0275\u0275i18n(39,7),e.\u0275\u0275elementEnd()()()(),e.\u0275\u0275template(40,zd,9,0,"div",42)(41,Xd,6,2,"div",42)(42,Bd,5,3,"div",42)(43,Kd,10,2,"div",42)(44,Qd,9,3,"ng-container",43),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(45,"div",44)(46,"cd-form-button-panel",45),e.\u0275\u0275listener("submitActionEvent",function(){return e.\u0275\u0275restoreView(a),e.\u0275\u0275resetView(_.onSubmit())}),e.\u0275\u0275elementEnd()()(),e.\u0275\u0275elementContainerEnd(),e.\u0275\u0275elementEnd()}if(2&o){const a=e.\u0275\u0275reference(5);e.\u0275\u0275property("modalRef",_.activeModal),e.\u0275\u0275advance(4),e.\u0275\u0275property("formGroup",_.importTokenForm),e.\u0275\u0275advance(18),e.\u0275\u0275property("ngIf",_.importTokenForm.showError("realmToken",a,"required")),e.\u0275\u0275advance(6),e.\u0275\u0275property("ngIf",_.importTokenForm.showError("zoneName",a,"required")),e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf",_.importTokenForm.showError("zoneName",a,"uniqueName")),e.\u0275\u0275advance(11),e.\u0275\u0275property("ngIf",!_.importTokenForm.controls.unmanaged.value),e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf",!_.importTokenForm.controls.unmanaged.value&&"label"===_.importTokenForm.controls.placement.value),e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf",!_.importTokenForm.controls.unmanaged.value&&"hosts"===_.importTokenForm.controls.placement.value),e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf",!_.importTokenForm.controls.unmanaged.value),e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf",!_.importTokenForm.controls.unmanaged.value),e.\u0275\u0275advance(2),e.\u0275\u0275property("submitText",_.actionLabels.IMPORT)("form",_.importTokenForm)}},dependencies:[E.NgIf,Pt.m,Lt.U,Xe.z,Pe.m,_e.e,Y.S,Be.a,We.C,oe.E,l.\u0275NgNoValidate,l.NgSelectOption,l.\u0275NgSelectMultipleOption,l.DefaultValueAccessor,l.NumberValueAccessor,l.CheckboxControlValueAccessor,l.SelectControlValueAccessor,l.NgControlStatus,l.NgControlStatusGroup,l.MinValidator,l.MaxValidator,l.FormGroupDirective,l.FormControlName,v.NgbTypeahead,d.Option]})}}return n})();var e1=g(38996);function t1(n,i){1&n&&(e.\u0275\u0275elementStart(0,"span",19),e.\u0275\u0275i18n(1,5),e.\u0275\u0275elementEnd())}function n1(n,i){1&n&&(e.\u0275\u0275elementStart(0,"span",19),e.\u0275\u0275i18n(1,6),e.\u0275\u0275elementEnd())}function o1(n,i){if(1&n&&e.\u0275\u0275template(0,t1,2,0,"span",18)(1,n1,2,0,"span",18),2&n){const t=e.\u0275\u0275nextContext(),o=e.\u0275\u0275reference(8);e.\u0275\u0275property("ngIf",t.multisiteRealmForm.showError("realmName",o,"required")),e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf",t.multisiteRealmForm.showError("realmName",o,"uniqueName"))}}function _1(n,i){1&n&&(e.\u0275\u0275i18nStart(0,4,1),e.\u0275\u0275elementStart(1,"cd-help-text"),e.\u0275\u0275element(2,"span"),e.\u0275\u0275elementEnd(),e.\u0275\u0275i18nEnd())}function i1(n,i){if(1&n&&(e.\u0275\u0275i18nStart(0,4,2),e.\u0275\u0275elementStart(1,"cd-help-text")(2,"span"),e.\u0275\u0275element(3,"a",20),e.\u0275\u0275elementEnd()(),e.\u0275\u0275i18nEnd()),2&n){const t=e.\u0275\u0275nextContext();e.\u0275\u0275advance(3),e.\u0275\u0275propertyInterpolate("href",t.docUrl,e.\u0275\u0275sanitizeUrl)}}function a1(n,i){1&n&&(e.\u0275\u0275i18nStart(0,4,3),e.\u0275\u0275elementStart(1,"cd-help-text"),e.\u0275\u0275element(2,"span"),e.\u0275\u0275elementEnd(),e.\u0275\u0275i18nEnd())}let r1=(()=>{class n extends d.BaseModal{constructor(t,o,_,a,r,s,c,u,p,T,f){super(),this.activeModal=t,this.actionLabels=o,this.rgwRealmService=_,this.notificationService=a,this.docService=r,this.action=s,this.resource=c,this.info=u,this.multisiteInfo=p,this.defaultsInfo=T,this.editing=f,this.realmList=[],this.zonegroupList=[],this.defaultRealmDisabled=!1,this.action=this.editing?this.actionLabels.EDIT:this.actionLabels.CREATE,this.createForm()}createForm(){this.multisiteRealmForm=new Me.$({realmName:new l.UntypedFormControl(null,{validators:[l.Validators.required,M.xQ.custom("uniqueName",t=>this.action===this.actionLabels.CREATE&&this.realmNames&&-1!==this.realmNames.indexOf(t))]}),default_realm:new l.UntypedFormControl(!1)})}ngOnInit(){this.realmList=void 0!==this.multisiteInfo[0]&&this.multisiteInfo[0].hasOwnProperty("realms")?this.multisiteInfo[0].realms:[],this.realmNames=this.realmList.map(t=>t.name),this.action===this.actionLabels.EDIT&&(this.zonegroupList=void 0!==this.multisiteInfo[1]&&this.multisiteInfo[1].hasOwnProperty("zonegroups")?this.multisiteInfo[1].zonegroups:[],this.multisiteRealmForm.get("realmName").setValue(this.info.data.name),this.multisiteRealmForm.get("default_realm").setValue(this.info.data.is_default),this.info.data.is_default&&this.multisiteRealmForm.get("default_realm").disable()),this.zonegroupList.forEach(t=>{!0===t.is_master&&t.realm_id===this.info.data.id&&(this.isMaster=!0)}),this.defaultsInfo&&null!==this.defaultsInfo.defaultRealmName&&(this.multisiteRealmForm.get("default_realm").disable(),this.defaultRealmDisabled=!0),this.docUrl=this.docService.urlGenerator("rgw-multisite"),this.action===this.actionLabels?.EDIT?this.multisiteRealmForm.get("default_realm").disable():this.multisiteRealmForm.get("default_realm").enable()}submit(){const t=this.multisiteRealmForm.getRawValue();this.realm=new H.SX,this.action===this.actionLabels.CREATE?(this.realm.name=t.realmName,this.rgwRealmService.create(this.realm,t.default_realm).subscribe(()=>{this.notificationService.show(w._.success,"Realm: '" + t.realmName + "' created successfully"),this.closeModal()},()=>{this.multisiteRealmForm.setErrors({cdSubmitButton:!0})})):(this.realm.name=this.info.data.name,this.newRealmName=t.realmName,this.rgwRealmService.update(this.realm,t.default_realm,this.newRealmName).subscribe(()=>{this.notificationService.show(w._.success,"Realm: '" + t.realmName + "' updated successfully"),this.closeModal()},()=>{this.multisiteRealmForm.setErrors({cdSubmitButton:!0})}))}static{this.\u0275fac=function(o){return new(o||n)(e.\u0275\u0275directiveInject(v.NgbActiveModal),e.\u0275\u0275directiveInject(P.Ss),e.\u0275\u0275directiveInject(Mt.$),e.\u0275\u0275directiveInject(ne.J),e.\u0275\u0275directiveInject(e1.s),e.\u0275\u0275directiveInject("action",8),e.\u0275\u0275directiveInject("resource",8),e.\u0275\u0275directiveInject("info",8),e.\u0275\u0275directiveInject("multisiteInfo",8),e.\u0275\u0275directiveInject("defaultsInfo",8),e.\u0275\u0275directiveInject("editing",8))}}static{this.\u0275cmp=e.\u0275\u0275defineComponent({type:n,selectors:[["cd-rgw-multisite-realm-form"]],features:[e.\u0275\u0275InheritDefinitionFeature],decls:24,vars:23,consts:()=>{let t,o,_,a,r;return t="" + "\ufffd0\ufffd" + " " + "\ufffd1\ufffd" + "",o="Realm Name " + "\ufffd#12\ufffd\ufffd/#12\ufffd" + "",_="Default " + "\ufffd*18:1\ufffd\ufffd#1:1\ufffd" + "" + "[\ufffd#2:1\ufffd|\ufffd#2:2\ufffd|\ufffd#2:3\ufffd]" + "You cannot unset the default flag." + "[\ufffd/#2:1\ufffd|\ufffd/#2:2\ufffd|\ufffd/#2:3\ufffd]" + "" + "[\ufffd/#1:1\ufffd\ufffd/*18:1\ufffd|\ufffd/#1:2\ufffd\ufffd/*19:2\ufffd|\ufffd/#1:3\ufffd\ufffd/*20:3\ufffd]" + "" + "\ufffd*19:2\ufffd\ufffd#1:2\ufffd" + "" + "[\ufffd#2:1\ufffd|\ufffd#2:2\ufffd|\ufffd#2:3\ufffd]" + "Please consult the " + "\ufffd#3:2\ufffd" + "documentation" + "\ufffd/#3:2\ufffd" + " to follow the failover mechanism" + "[\ufffd/#2:1\ufffd|\ufffd/#2:2\ufffd|\ufffd/#2:3\ufffd]" + "" + "[\ufffd/#1:1\ufffd\ufffd/*18:1\ufffd|\ufffd/#1:2\ufffd\ufffd/*19:2\ufffd|\ufffd/#1:3\ufffd\ufffd/*20:3\ufffd]" + "" + "\ufffd*20:3\ufffd\ufffd#1:3\ufffd" + "" + "[\ufffd#2:1\ufffd|\ufffd#2:2\ufffd|\ufffd#2:3\ufffd]" + "Default realm already exists." + "[\ufffd/#2:1\ufffd|\ufffd/#2:2\ufffd|\ufffd/#2:3\ufffd]" + "" + "[\ufffd/#1:1\ufffd\ufffd/*18:1\ufffd|\ufffd/#1:2\ufffd\ufffd/*19:2\ufffd|\ufffd/#1:3\ufffd\ufffd/*20:3\ufffd]" + "",_=e.\u0275\u0275i18nPostprocess(_),a="This field is required.",r="The chosen realm name is already in use.",[["formDir","ngForm"],["realmNameError",""],t,o,_,a,r,["size","sm",3,"overlaySelected","open","hasScrollingContent"],[3,"closeSelect"],["cdsModalHeaderHeading",""],["cdsModalContent",""],["name","multisiteRealmForm","novalidate","",3,"formGroup"],[1,"form-item"],["labelInputID","realmName","cdRequiredField","Realm Name",3,"invalid","invalidText"],["cdsText","","type","text","placeholder","Realm name...","id","realmName","name","realmName","formControlName","realmName","modal-primary-focus","",3,"invalid","autofocus"],["label","Default","for","default_realm","formControlName","default_realm","name","default_realm"],[4,"ngIf"],[3,"submitActionEvent","form","submitText","modalForm"],["class","invalid-feedback",4,"ngIf"],[1,"invalid-feedback"],[3,"href"]]},template:function(o,_){if(1&o){const a=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"cds-modal",7),e.\u0275\u0275listener("overlaySelected",function(){return e.\u0275\u0275restoreView(a),e.\u0275\u0275resetView(_.closeModal())}),e.\u0275\u0275elementStart(1,"cds-modal-header",8),e.\u0275\u0275listener("closeSelect",function(){return e.\u0275\u0275restoreView(a),e.\u0275\u0275resetView(_.closeModal())}),e.\u0275\u0275elementStart(2,"h3",9),e.\u0275\u0275i18n(3,2),e.\u0275\u0275pipe(4,"titlecase"),e.\u0275\u0275pipe(5,"upperFirst"),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(6,"div",10)(7,"form",11,0)(9,"div",12)(10,"cds-text-label",13),e.\u0275\u0275i18nStart(11,3),e.\u0275\u0275element(12,"input",14),e.\u0275\u0275i18nEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275template(13,o1,2,2,"ng-template",null,1,e.\u0275\u0275templateRefExtractor),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(15,"div",12)(16,"cds-checkbox",15),e.\u0275\u0275i18nStart(17,4),e.\u0275\u0275template(18,_1,3,0,"cd-help-text",16)(19,i1,4,1,"cd-help-text",16)(20,a1,3,0,"cd-help-text",16),e.\u0275\u0275i18nEnd(),e.\u0275\u0275elementEnd()()()(),e.\u0275\u0275elementStart(21,"cd-form-button-panel",17),e.\u0275\u0275pipe(22,"titlecase"),e.\u0275\u0275pipe(23,"upperFirst"),e.\u0275\u0275listener("submitActionEvent",function(){return e.\u0275\u0275restoreView(a),e.\u0275\u0275resetView(_.submit())}),e.\u0275\u0275elementEnd()()}if(2&o){const a=e.\u0275\u0275reference(14);e.\u0275\u0275property("open",_.open)("hasScrollingContent",!1),e.\u0275\u0275advance(5),e.\u0275\u0275i18nExp(e.\u0275\u0275pipeBind1(4,15,_.action))(e.\u0275\u0275pipeBind1(5,17,_.resource)),e.\u0275\u0275i18nApply(3),e.\u0275\u0275advance(2),e.\u0275\u0275property("formGroup",_.multisiteRealmForm),e.\u0275\u0275advance(3),e.\u0275\u0275property("invalid",_.multisiteRealmForm.controls.realmName.invalid&&(_.multisiteRealmForm.controls.realmName.touched||_.multisiteRealmForm.controls.realmName.dirty))("invalidText",a),e.\u0275\u0275advance(2),e.\u0275\u0275property("invalid",_.multisiteRealmForm.controls.realmName.invalid&&(_.multisiteRealmForm.controls.realmName.touched||_.multisiteRealmForm.controls.realmName.dirty))("autofocus",!0),e.\u0275\u0275advance(6),e.\u0275\u0275property("ngIf",_.action===_.actionLabels.EDIT&&_.info.data.is_default),e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf",_.action===_.actionLabels.EDIT&&!_.info.data.is_default),e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf",_.defaultRealmDisabled&&_.action===_.actionLabels.CREATE),e.\u0275\u0275advance(),e.\u0275\u0275property("form",_.multisiteRealmForm)("submitText",e.\u0275\u0275pipeBind1(22,19,_.action)+" "+e.\u0275\u0275pipeBind1(23,21,_.resource))("modalForm",!0)}},dependencies:[E.NgIf,_e.e,ae.O,Ct.B,Y.S,oe.E,Qe.P,l.\u0275NgNoValidate,l.DefaultValueAccessor,l.NgControlStatus,l.NgControlStatusGroup,l.FormGroupDirective,l.FormControlName,d.Modal,d.ModalHeader,d.ModalContent,d.ModalHeaderHeading,d.TextInputLabelComponent,d.TextInput,d.Checkbox,E.TitleCasePipe,Ie.r]})}}return n})();var cn=g(87837),_o=g(12302);function l1(n,i){if(1&n&&(e.\u0275\u0275elementStart(0,"option",57),e.\u0275\u0275text(1),e.\u0275\u0275elementEnd()),2&n){const t=i.$implicit,o=e.\u0275\u0275nextContext();e.\u0275\u0275property("value",t.name)("selected",t.name===o.multisiteZoneForm.getValue("selectedZonegroup")),e.\u0275\u0275advance(),e.\u0275\u0275textInterpolate1(" ",t.name," ")}}function s1(n,i){1&n&&(e.\u0275\u0275elementStart(0,"span",58),e.\u0275\u0275i18n(1,9),e.\u0275\u0275elementEnd())}function c1(n,i){1&n&&(e.\u0275\u0275elementStart(0,"span",58),e.\u0275\u0275i18n(1,10),e.\u0275\u0275elementEnd())}function d1(n,i){1&n&&(e.\u0275\u0275elementStart(0,"span")(1,"cd-helper"),e.\u0275\u0275i18n(2,11),e.\u0275\u0275elementEnd()())}function u1(n,i){1&n&&(e.\u0275\u0275elementStart(0,"span")(1,"cd-helper"),e.\u0275\u0275i18n(2,12),e.\u0275\u0275elementEnd()())}function p1(n,i){1&n&&(e.\u0275\u0275elementStart(0,"cd-helper")(1,"span"),e.\u0275\u0275i18nStart(2,13),e.\u0275\u0275element(3,"cd-doc",59),e.\u0275\u0275i18nEnd(),e.\u0275\u0275elementEnd()())}function m1(n,i){1&n&&(e.\u0275\u0275elementStart(0,"span")(1,"cd-helper"),e.\u0275\u0275i18n(2,14),e.\u0275\u0275elementEnd()())}function T1(n,i){1&n&&(e.\u0275\u0275elementStart(0,"span")(1,"cd-helper"),e.\u0275\u0275i18n(2,15),e.\u0275\u0275elementEnd()())}function g1(n,i){if(1&n&&(e.\u0275\u0275elementStart(0,"cd-helper")(1,"span"),e.\u0275\u0275i18nStart(2,16),e.\u0275\u0275element(3,"a",60),e.\u0275\u0275i18nEnd(),e.\u0275\u0275elementEnd()()),2&n){const t=e.\u0275\u0275nextContext();e.\u0275\u0275advance(3),e.\u0275\u0275propertyInterpolate("href",t.docUrl,e.\u0275\u0275sanitizeUrl)}}function E1(n,i){1&n&&(e.\u0275\u0275elementStart(0,"span",58),e.\u0275\u0275i18n(1,17),e.\u0275\u0275elementEnd())}function R1(n,i){1&n&&(e.\u0275\u0275elementStart(0,"span",58),e.\u0275\u0275i18n(1,18),e.\u0275\u0275elementEnd())}function C1(n,i){if(1&n&&(e.\u0275\u0275elementStart(0,"option",57),e.\u0275\u0275text(1),e.\u0275\u0275elementEnd()),2&n){const t=i.$implicit,o=e.\u0275\u0275nextContext(3);e.\u0275\u0275property("value",t.name)("selected",t.name===o.multisiteZoneForm.getValue("placementTarget")),e.\u0275\u0275advance(),e.\u0275\u0275textInterpolate1(" ",t.name," ")}}function f1(n,i){if(1&n&&(e.\u0275\u0275elementStart(0,"option",57),e.\u0275\u0275text(1),e.\u0275\u0275elementEnd()),2&n){const t=i.$implicit,o=e.\u0275\u0275nextContext(3);e.\u0275\u0275property("value",t.poolname)("selected",t.poolname===o.multisiteZoneForm.getValue("placementDataPool")),e.\u0275\u0275advance(),e.\u0275\u0275textInterpolate1(" ",t.poolname," ")}}function S1(n,i){if(1&n&&(e.\u0275\u0275elementStart(0,"option",57),e.\u0275\u0275text(1),e.\u0275\u0275elementEnd()),2&n){const t=i.$implicit,o=e.\u0275\u0275nextContext(3);e.\u0275\u0275property("value",t.poolname)("selected",t.poolname===o.multisiteZoneForm.getValue("placementIndexPool")),e.\u0275\u0275advance(),e.\u0275\u0275textInterpolate1(" ",t.poolname," ")}}function F1(n,i){if(1&n&&(e.\u0275\u0275elementStart(0,"option",57),e.\u0275\u0275text(1),e.\u0275\u0275elementEnd()),2&n){const t=i.$implicit,o=e.\u0275\u0275nextContext(3);e.\u0275\u0275property("value",t.poolname)("selected",t.poolname===o.multisiteZoneForm.getValue("placementDataExtraPool")),e.\u0275\u0275advance(),e.\u0275\u0275textInterpolate1(" ",t.poolname," ")}}function M1(n,i){if(1&n&&(e.\u0275\u0275elementStart(0,"option",76),e.\u0275\u0275text(1),e.\u0275\u0275elementEnd()),2&n){const t=i.$implicit;e.\u0275\u0275property("value",t.key),e.\u0275\u0275advance(),e.\u0275\u0275textInterpolate1(" ",t.key," ")}}function P1(n,i){if(1&n&&(e.\u0275\u0275elementStart(0,"option",57),e.\u0275\u0275text(1),e.\u0275\u0275elementEnd()),2&n){const t=i.$implicit,o=e.\u0275\u0275nextContext(3);e.\u0275\u0275property("value",t.poolname)("selected",t.poolname===o.multisiteZoneForm.getValue("storageDataPool")),e.\u0275\u0275advance(),e.\u0275\u0275textInterpolate1(" ",t.poolname," ")}}function I1(n,i){if(1&n&&(e.\u0275\u0275elementStart(0,"option",76),e.\u0275\u0275text(1),e.\u0275\u0275elementEnd()),2&n){const t=i.$implicit;e.\u0275\u0275property("value",t),e.\u0275\u0275advance(),e.\u0275\u0275textInterpolate1(" ",t," ")}}function O1(n,i){if(1&n){const t=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"div")(1,"legend"),e.\u0275\u0275text(2,"Placement Targets"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(3,"div",31)(4,"label",61),e.\u0275\u0275i18n(5,19),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(6,"div",33)(7,"select",62),e.\u0275\u0275listener("change",function(_){e.\u0275\u0275restoreView(t);const a=e.\u0275\u0275nextContext(2);return e.\u0275\u0275resetView(a.getZonePlacementData(_.target.value))}),e.\u0275\u0275template(8,C1,2,3,"option",35),e.\u0275\u0275elementEnd()()(),e.\u0275\u0275elementStart(9,"div",31)(10,"label",63),e.\u0275\u0275i18n(11,20),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(12,"div",33)(13,"select",64),e.\u0275\u0275template(14,f1,2,3,"option",35),e.\u0275\u0275elementEnd()()(),e.\u0275\u0275elementStart(15,"div",31)(16,"label",65),e.\u0275\u0275i18n(17,21),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(18,"div",33)(19,"select",66),e.\u0275\u0275template(20,S1,2,3,"option",35),e.\u0275\u0275elementEnd()()(),e.\u0275\u0275elementStart(21,"div",31)(22,"label",67),e.\u0275\u0275i18n(23,22),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(24,"div",33)(25,"select",68),e.\u0275\u0275template(26,F1,2,3,"option",35),e.\u0275\u0275elementEnd()()(),e.\u0275\u0275elementStart(27,"div")(28,"legend"),e.\u0275\u0275text(29,"Storage Classes"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(30,"div",31)(31,"label",69),e.\u0275\u0275i18n(32,23),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(33,"div",33)(34,"select",70),e.\u0275\u0275listener("change",function(_){e.\u0275\u0275restoreView(t);const a=e.\u0275\u0275nextContext(2);return e.\u0275\u0275resetView(a.getStorageClassData(_.target.value))}),e.\u0275\u0275template(35,M1,2,2,"option",71),e.\u0275\u0275elementEnd()()(),e.\u0275\u0275elementStart(36,"div",31)(37,"label",72),e.\u0275\u0275i18n(38,24),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(39,"div",33)(40,"select",73),e.\u0275\u0275template(41,P1,2,3,"option",35),e.\u0275\u0275elementEnd()()(),e.\u0275\u0275elementStart(42,"div",31)(43,"label",74),e.\u0275\u0275i18n(44,25),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(45,"div",33)(46,"select",75),e.\u0275\u0275template(47,I1,2,2,"option",71),e.\u0275\u0275elementEnd()()()()()}if(2&n){const t=e.\u0275\u0275nextContext(2);e.\u0275\u0275advance(8),e.\u0275\u0275property("ngForOf",t.placementTargets),e.\u0275\u0275advance(5),e.\u0275\u0275property("value",t.placementDataPool),e.\u0275\u0275advance(),e.\u0275\u0275property("ngForOf",t.poolList),e.\u0275\u0275advance(6),e.\u0275\u0275property("ngForOf",t.poolList),e.\u0275\u0275advance(6),e.\u0275\u0275property("ngForOf",t.poolList),e.\u0275\u0275advance(9),e.\u0275\u0275property("ngForOf",t.storageClassList),e.\u0275\u0275advance(6),e.\u0275\u0275property("ngForOf",t.poolList),e.\u0275\u0275advance(6),e.\u0275\u0275property("ngForOf",t.compressionTypes)}}function G1(n,i){if(1&n&&(e.\u0275\u0275elementStart(0,"div",31),e.\u0275\u0275template(1,O1,48,8,"div",42),e.\u0275\u0275elementEnd()),2&n){const t=e.\u0275\u0275nextContext();e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf","edit"===t.action)}}let N1=(()=>{class n{constructor(t,o,_,a,r,s,c,u){this.activeModal=t,this.actionLabels=o,this.rgwMultisiteService=_,this.rgwZoneService=a,this.rgwZoneGroupService=r,this.notificationService=s,this.rgwUserService=c,this.modalService=u,this.editing=!1,this.defaultsInfo=[],this.multisiteInfo=[],this.zonegroupList=[],this.zoneList=[],this.poolList=[],this.storageClassList=[],this.disableDefault=!1,this.disableMaster=!1,this.isMetadataSync=!1,this.syncStatusTimedOut=!1,this.createSystemUser=!1,this.compressionTypes=["lz4","zlib","snappy"],this.userListReady=!1,this.action=this.editing?this.actionLabels.EDIT+this.resource:this.actionLabels.CREATE+this.resource,this.createForm()}createForm(){this.multisiteZoneForm=new Me.$({zoneName:new l.UntypedFormControl(null,{validators:[l.Validators.required,M.xQ.custom("uniqueName",t=>"create"===this.action&&this.zoneNames&&-1!==this.zoneNames.indexOf(t))]}),default_zone:new l.UntypedFormControl(!1),master_zone:new l.UntypedFormControl(!1),selectedZonegroup:new l.UntypedFormControl(null),zone_endpoints:new l.UntypedFormControl(null,{validators:[M.xQ.url,l.Validators.required]}),access_key:new l.UntypedFormControl("",{}),secret_key:new l.UntypedFormControl("",{}),placementTarget:new l.UntypedFormControl(null),placementDataPool:new l.UntypedFormControl(""),placementIndexPool:new l.UntypedFormControl(null),placementDataExtraPool:new l.UntypedFormControl(null),storageClass:new l.UntypedFormControl(null),storageDataPool:new l.UntypedFormControl(null),storageCompression:new l.UntypedFormControl(null)})}onZoneGroupChange(t){let o=new H.Oe;o.name=t,this.rgwZoneGroupService.get(o).subscribe(_=>{A().isEmpty(_.master_zone)?(this.multisiteZoneForm.get("master_zone").setValue(!0),this.multisiteZoneForm.get("master_zone").disable(),this.disableMaster=!1):!A().isEmpty(_.master_zone)&&"create"===this.action&&(this.multisiteZoneForm.get("master_zone").setValue(!1),this.multisiteZoneForm.get("master_zone").disable(),this.disableMaster=!0)}),this.multisiteZoneForm.getValue("selectedZonegroup")!==this.defaultsInfo.defaultZonegroupName&&(this.disableDefault=!0,this.multisiteZoneForm.get("default_zone").disable())}ngOnInit(){this.zonegroupList=void 0!==this.multisiteInfo[1]&&this.multisiteInfo[1].hasOwnProperty("zonegroups")?this.multisiteInfo[1].zonegroups:[],this.zoneList=void 0!==this.multisiteInfo[2]&&this.multisiteInfo[2].hasOwnProperty("zones")?this.multisiteInfo[2].zones:[],this.zoneNames=this.zoneList.map(t=>t.name),"create"===this.action&&void 0!==this.defaultsInfo.defaultZonegroupName&&(this.multisiteZoneForm.get("selectedZonegroup").setValue(this.defaultsInfo.defaultZonegroupName),this.onZoneGroupChange(this.defaultsInfo.defaultZonegroupName)),"edit"===this.action&&(this.placementTargets=this.info.data?.parent||this.info.parent?(this.info.data?.parentNode||this.info.parent.data)?.placement_targets:[],this.rgwZoneService.getPoolNames().subscribe(o=>{this.poolList=o}),this.multisiteZoneForm.get("zoneName").setValue(this.info.data.name),this.multisiteZoneForm.get("selectedZonegroup").setValue(this.info.data.parent),this.multisiteZoneForm.get("default_zone").setValue(this.info.data.is_default),this.multisiteZoneForm.get("master_zone").setValue(this.info.data.is_master),this.multisiteZoneForm.get("zone_endpoints").setValue(this.info.data.endpoints.toString()),this.multisiteZoneForm.get("access_key").setValue(this.info.data.access_key),this.multisiteZoneForm.get("secret_key").setValue(this.info.data.secret_key),this.multisiteZoneForm.get("placementTarget").setValue((this.info.data?.parentNode||this.info.parent.data)?.default_placement),this.getZonePlacementData(this.multisiteZoneForm.getValue("placementTarget")),this.info.data.is_default&&(this.isDefaultZone=!0,this.multisiteZoneForm.get("default_zone").disable()),this.info.data.is_master&&(this.isMasterZone=!0,this.multisiteZoneForm.get("master_zone").disable()),(new H.$H).name=this.info.data.name,this.onZoneGroupChange(this.info.data.parent)),this.multisiteZoneForm.getValue("selectedZonegroup")!==this.defaultsInfo.defaultZonegroupName&&(this.disableDefault=!0,this.multisiteZoneForm.get("default_zone").disable())}getZonePlacementData(t){this.zone=new H.$H,this.zone.name=this.info.data.name,this.rgwZoneService.get(this.zone).subscribe(o=>{if(this.zoneInfo=o,this.zoneInfo&&this.zoneInfo.placement_pools){const _=this.zoneInfo.placement_pools.map(a=>a.key);this.placementTargets=this.placementTargets.filter(a=>_.includes(a.name)),this.zoneInfo.placement_pools.forEach(a=>{if(a.key===t){let r=a.val.storage_classes;this.storageClassList=Object.entries(r).map(([p,T])=>({key:p,value:T}));let s=r.STANDARD?r.STANDARD.data_pool:"",c=a.val.index_pool,u=a.val.data_extra_pool;this.poolList.push({poolname:s}),this.poolList.push({poolname:c}),this.poolList.push({poolname:u}),this.multisiteZoneForm.get("storageClass").setValue(this.storageClassList[0].key),this.getStorageClassData(this.storageClassList[0].key),this.multisiteZoneForm.get("placementDataPool").setValue(s),this.multisiteZoneForm.get("placementIndexPool").setValue(c),this.multisiteZoneForm.get("placementDataExtraPool").setValue(u)}})}})}getStorageClassData(t){let o=this.storageClassList.find(_=>_.key===t);this.poolList.push({poolname:o.value.data_pool}),this.multisiteZoneForm.get("storageDataPool").setValue(o.value.data_pool),this.multisiteZoneForm.get("storageCompression").setValue(o.value.compression_type)}submit(){const t=this.multisiteZoneForm.getRawValue();"create"===this.action?(this.zonegroup=new H.Oe,this.zonegroup.name=t.selectedZonegroup,this.zone=new H.$H,this.zone.name=t.zoneName,this.zone.endpoints=t.zone_endpoints,this.zone.system_key=new H.B5,this.zone.system_key.access_key=t.access_key,this.zone.system_key.secret_key=t.secret_key,this.rgwZoneService.create(this.zone,this.zonegroup,t.default_zone,t.master_zone,this.zone.endpoints).subscribe(()=>{this.notificationService.show(w._.success,"Zone: '" + t.zoneName + "' created successfully"),this.activeModal.close()},()=>{this.multisiteZoneForm.setErrors({cdSubmitButton:!0})})):"edit"===this.action&&(this.zonegroup=new H.Oe,this.zonegroup.name=t.selectedZonegroup,this.zone=new H.$H,this.zone.name=this.info.data.name,this.zone.endpoints=t.zone_endpoints,this.zone.system_key=new H.B5,this.zone.system_key.access_key=t.access_key,this.zone.system_key.secret_key=t.secret_key,this.rgwZoneService.update(this.zone,this.zonegroup,t.zoneName,t.default_zone,t.master_zone,this.zone.endpoints,t.placementTarget,t.placementDataPool,t.placementIndexPool,t.placementDataExtraPool,t.storageClass,t.storageDataPool,t.storageCompression).subscribe(()=>{this.notificationService.show(w._.success,"Zone: '" + t.zoneName + "' updated successfully"),this.activeModal.close()},()=>{this.multisiteZoneForm.setErrors({cdSubmitButton:!0})}))}static{this.\u0275fac=function(o){return new(o||n)(e.\u0275\u0275directiveInject(v.NgbActiveModal),e.\u0275\u0275directiveInject(P.Ss),e.\u0275\u0275directiveInject(xe.A),e.\u0275\u0275directiveInject(Ot.w),e.\u0275\u0275directiveInject(ke.Z),e.\u0275\u0275directiveInject(ne.J),e.\u0275\u0275directiveInject(Rt.p),e.\u0275\u0275directiveInject(vt.B))}}static{this.\u0275cmp=e.\u0275\u0275defineComponent({type:n,selectors:[["cd-rgw-multisite-zone-form"]],decls:75,vars:29,consts:()=>{let t,o,_,a,r,s,c,u,p,T,f,G,S,O,C,b,N,k,z,$,X,B,V,Z,F;return t="" + "\ufffd0\ufffd" + " " + "\ufffd1\ufffd" + "",o="Select Zone Group",_="Zone Name",a="Default",r="Master",s="Endpoints",c="S3 access key " + "\ufffd#47\ufffd" + "" + "\ufffd#48\ufffd" + "To see or copy your S3 access key, go to " + "[\ufffd#49\ufffd|\ufffd#50\ufffd|\ufffd#51\ufffd|\ufffd#52\ufffd]" + "Object Gateway > Users" + "[\ufffd/#49\ufffd|\ufffd/#50\ufffd|\ufffd/#51\ufffd|\ufffd/#52\ufffd]" + " and click on your user name. In " + "[\ufffd#49\ufffd|\ufffd#50\ufffd|\ufffd#51\ufffd|\ufffd#52\ufffd]" + "Keys" + "[\ufffd/#49\ufffd|\ufffd/#50\ufffd|\ufffd/#51\ufffd|\ufffd/#52\ufffd]" + ", click " + "[\ufffd#49\ufffd|\ufffd#50\ufffd|\ufffd#51\ufffd|\ufffd#52\ufffd]" + "Show" + "[\ufffd/#49\ufffd|\ufffd/#50\ufffd|\ufffd/#51\ufffd|\ufffd/#52\ufffd]" + ". View the access key by clicking Show and copy the key by clicking " + "[\ufffd#49\ufffd|\ufffd#50\ufffd|\ufffd#51\ufffd|\ufffd#52\ufffd]" + "Copy to Clipboard" + "[\ufffd/#49\ufffd|\ufffd/#50\ufffd|\ufffd/#51\ufffd|\ufffd/#52\ufffd]" + "." + "\ufffd/#48\ufffd" + "" + "\ufffd/#47\ufffd" + "",c=e.\u0275\u0275i18nPostprocess(c),u="S3 secret key " + "\ufffd#60\ufffd" + "" + "\ufffd#61\ufffd" + "To see or copy your S3 access key, go to " + "[\ufffd#62\ufffd|\ufffd#63\ufffd|\ufffd#64\ufffd|\ufffd#65\ufffd]" + "Object Gateway > Users" + "[\ufffd/#62\ufffd|\ufffd/#63\ufffd|\ufffd/#64\ufffd|\ufffd/#65\ufffd]" + " and click on your user name. In " + "[\ufffd#62\ufffd|\ufffd#63\ufffd|\ufffd#64\ufffd|\ufffd#65\ufffd]" + "Keys" + "[\ufffd/#62\ufffd|\ufffd/#63\ufffd|\ufffd/#64\ufffd|\ufffd/#65\ufffd]" + ", click " + "[\ufffd#62\ufffd|\ufffd#63\ufffd|\ufffd#64\ufffd|\ufffd#65\ufffd]" + "Show" + "[\ufffd/#62\ufffd|\ufffd/#63\ufffd|\ufffd/#64\ufffd|\ufffd/#65\ufffd]" + ". View the secret key by clicking Show and copy the key by clicking " + "[\ufffd#62\ufffd|\ufffd#63\ufffd|\ufffd#64\ufffd|\ufffd#65\ufffd]" + "Copy to Clipboard" + "[\ufffd/#62\ufffd|\ufffd/#63\ufffd|\ufffd/#64\ufffd|\ufffd/#65\ufffd]" + "." + "\ufffd/#61\ufffd" + "" + "\ufffd/#60\ufffd" + "",u=e.\u0275\u0275i18nPostprocess(u),p="This field is required.",T="The chosen zone name is already in use.",f="Default zone can only exist in a default zone group. ",G="You cannot unset the default flag. ",S="Please consult the\xA0" + "\ufffd#3\ufffd" + "" + "\ufffd/#3\ufffd" + "\xA0to follow the failover mechanism",O="Master zone already exists for the selected zone group. ",C="You cannot unset the master flag. ",b="Please consult the\xA0" + "\ufffd#3\ufffd" + "documentation" + "\ufffd/#3\ufffd" + "\xA0to follow the failover mechanism",N="This field is required.",k="Please enter a valid URL.",z="Placement target",$="Data pool",X="Index pool",B="Data extra pool",V="Storage Class",Z="Data pool",F="Compression",[["formDir","ngForm"],t,o,_,a,r,s,c,u,p,T,f,G,S,O,C,b,N,k,z,$,X,B,V,Z,F,[3,"modalRef"],[1,"modal-title"],[1,"modal-content"],["name","multisiteZoneForm","novalidate","",3,"formGroup"],[1,"modal-body"],[1,"form-group","row"],["for","selectedZonegroup",1,"cd-col-form-label"],[1,"cd-col-form-input"],["id","selectedZonegroup","formControlName","selectedZonegroup","name","selectedZonegroup",1,"form-select",3,"change"],[3,"value","selected",4,"ngFor","ngForOf"],["for","zonegroupName",1,"cd-col-form-label","required"],["type","text","placeholder","Zone name...","id","zoneName","name","zoneName","formControlName","zoneName",1,"form-control"],["class","invalid-feedback",4,"ngIf"],[1,"custom-control","custom-checkbox"],["id","default_zone","name","default_zone","formControlName","default_zone","type","checkbox",1,"form-check-input"],["for","default_zone",1,"form-check-label"],[4,"ngIf"],["id","master_zone","name","master_zone","formControlName","master_zone","type","checkbox",1,"form-check-input"],["for","master_zone",1,"form-check-label"],["for","zone_endpoints",1,"cd-col-form-label","required"],["type","text","placeholder","e.g, http://ceph-node-00.com:80","id","zone_endpoints","name","zone_endpoints","formControlName","zone_endpoints",1,"form-control"],["for","access_key",1,"cd-col-form-label"],[1,"input-group"],["type","password","placeholder","DiPt4V7WWvy2njL1z6aC","id","access_key","name","access_key","formControlName","access_key",1,"form-control"],["type","button","cdPasswordButton","access_key",1,"btn","btn-light"],["for","secret_key",1,"cd-col-form-label"],["type","password","placeholder","xSZUdYky0bTctAdCEEW8ikhfBVKsBV5LFYL82vvh","id","secret_key","name","secret_key","formControlName","secret_key",1,"form-control"],["type","button","cdPasswordButton","secret_key",1,"btn","btn-light"],["class","form-group row",4,"ngIf"],[1,"modal-footer"],[3,"submitActionEvent","form","submitText"],[3,"value","selected"],[1,"invalid-feedback"],["section","rgw-multisite"],[3,"href"],["for","placementTarget",1,"cd-col-form-label"],["id","placementTarget","formControlName","placementTarget","name","placementTarget",1,"form-select",3,"change"],["for","placementDataPool",1,"cd-col-form-label"],["id","placementDataPool","formControlName","placementDataPool","name","placementDataPool",1,"form-select",3,"value"],["for","placementIndexPool",1,"cd-col-form-label"],["id","placementIndexPool","formControlName","placementIndexPool","name","placementIndexPool",1,"form-select"],["for","placementDataExtraPool",1,"cd-col-form-label"],["id","placementDataExtraPool","formControlName","placementDataExtraPool","name","placementDataExtraPool",1,"form-select"],["for","storageClass",1,"cd-col-form-label"],["id","storageClass","formControlName","storageClass","name","storageClass",1,"form-select",3,"change"],[3,"value",4,"ngFor","ngForOf"],["for","storageDataPool",1,"cd-col-form-label"],["id","storageDataPool","formControlName","storageDataPool","name","storageDataPool",1,"form-select"],["for","storageCompression",1,"cd-col-form-label"],["id","storageCompression","formControlName","storageCompression","name","storageCompression",1,"form-select"],[3,"value"]]},template:function(o,_){if(1&o){const a=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"cd-modal",26),e.\u0275\u0275elementContainerStart(1,27),e.\u0275\u0275i18n(2,1),e.\u0275\u0275pipe(3,"titlecase"),e.\u0275\u0275pipe(4,"upperFirst"),e.\u0275\u0275elementContainerEnd(),e.\u0275\u0275elementContainerStart(5,28),e.\u0275\u0275elementStart(6,"form",29,0)(8,"div",30)(9,"div",31)(10,"label",32),e.\u0275\u0275i18n(11,2),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(12,"div",33)(13,"select",34),e.\u0275\u0275listener("change",function(s){return e.\u0275\u0275restoreView(a),e.\u0275\u0275resetView(_.onZoneGroupChange(s.target.value))}),e.\u0275\u0275template(14,l1,2,3,"option",35),e.\u0275\u0275elementEnd()()(),e.\u0275\u0275elementStart(15,"div",31)(16,"label",36),e.\u0275\u0275i18n(17,3),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(18,"div",33),e.\u0275\u0275element(19,"input",37),e.\u0275\u0275template(20,s1,2,0,"span",38)(21,c1,2,0,"span",38),e.\u0275\u0275elementStart(22,"div",39),e.\u0275\u0275element(23,"input",40),e.\u0275\u0275elementStart(24,"label",41),e.\u0275\u0275i18n(25,4),e.\u0275\u0275elementEnd(),e.\u0275\u0275template(26,d1,3,0,"span",42)(27,u1,3,0,"span",42)(28,p1,4,0,"cd-helper",42),e.\u0275\u0275element(29,"br"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(30,"div",39),e.\u0275\u0275element(31,"input",43),e.\u0275\u0275elementStart(32,"label",44),e.\u0275\u0275i18n(33,5),e.\u0275\u0275elementEnd(),e.\u0275\u0275template(34,m1,3,0,"span",42)(35,T1,3,0,"span",42)(36,g1,4,1,"cd-helper",42),e.\u0275\u0275elementEnd()()(),e.\u0275\u0275elementStart(37,"div",31)(38,"label",45),e.\u0275\u0275i18n(39,6),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(40,"div",33),e.\u0275\u0275element(41,"input",46),e.\u0275\u0275template(42,E1,2,0,"span",38)(43,R1,2,0,"span",38),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(44,"div",31)(45,"label",47),e.\u0275\u0275i18nStart(46,7),e.\u0275\u0275elementStart(47,"cd-helper")(48,"span"),e.\u0275\u0275element(49,"b")(50,"b")(51,"b")(52,"b"),e.\u0275\u0275elementEnd()(),e.\u0275\u0275i18nEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(53,"div",33)(54,"div",48),e.\u0275\u0275element(55,"input",49)(56,"button",50),e.\u0275\u0275elementEnd()()(),e.\u0275\u0275elementStart(57,"div",31)(58,"label",51),e.\u0275\u0275i18nStart(59,8),e.\u0275\u0275elementStart(60,"cd-helper")(61,"span"),e.\u0275\u0275element(62,"b")(63,"b")(64,"b")(65,"b"),e.\u0275\u0275elementEnd()(),e.\u0275\u0275i18nEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(66,"div",33)(67,"div",48),e.\u0275\u0275element(68,"input",52)(69,"button",53),e.\u0275\u0275elementEnd()()(),e.\u0275\u0275template(70,G1,2,1,"div",54),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(71,"div",55)(72,"cd-form-button-panel",56),e.\u0275\u0275pipe(73,"titlecase"),e.\u0275\u0275pipe(74,"upperFirst"),e.\u0275\u0275listener("submitActionEvent",function(){return e.\u0275\u0275restoreView(a),e.\u0275\u0275resetView(_.submit())}),e.\u0275\u0275elementEnd()()(),e.\u0275\u0275elementContainerEnd(),e.\u0275\u0275elementEnd()}if(2&o){const a=e.\u0275\u0275reference(7);e.\u0275\u0275property("modalRef",_.activeModal),e.\u0275\u0275advance(4),e.\u0275\u0275i18nExp(e.\u0275\u0275pipeBind1(3,21,_.action))(e.\u0275\u0275pipeBind1(4,23,_.resource)),e.\u0275\u0275i18nApply(2),e.\u0275\u0275advance(2),e.\u0275\u0275property("formGroup",_.multisiteZoneForm),e.\u0275\u0275advance(7),e.\u0275\u0275attribute("disabled","edit"===_.action||null),e.\u0275\u0275advance(),e.\u0275\u0275property("ngForOf",_.zonegroupList),e.\u0275\u0275advance(6),e.\u0275\u0275property("ngIf",_.multisiteZoneForm.showError("zoneName",a,"required")),e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf",_.multisiteZoneForm.showError("zoneName",a,"uniqueName")),e.\u0275\u0275advance(2),e.\u0275\u0275attribute("disabled","edit"===_.action||null),e.\u0275\u0275advance(3),e.\u0275\u0275property("ngIf",_.disableDefault&&"create"===_.action),e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf",_.isDefaultZone),e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf","edit"===_.action&&!_.isDefaultZone),e.\u0275\u0275advance(3),e.\u0275\u0275attribute("disabled","edit"===_.action||null),e.\u0275\u0275advance(3),e.\u0275\u0275property("ngIf",_.disableMaster),e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf",_.isMasterZone),e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf","edit"===_.action&&!_.isMasterZone),e.\u0275\u0275advance(6),e.\u0275\u0275property("ngIf",_.multisiteZoneForm.showError("zone_endpoints",a,"required")),e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf",_.multisiteZoneForm.showError("zone_endpoints",a,"invalidURL")),e.\u0275\u0275advance(27),e.\u0275\u0275property("ngIf","edit"===_.action),e.\u0275\u0275advance(2),e.\u0275\u0275property("form",_.multisiteZoneForm)("submitText",e.\u0275\u0275pipeBind1(73,25,_.action)+" "+e.\u0275\u0275pipeBind1(74,27,_.resource))}},dependencies:[E.NgForOf,E.NgIf,Pt.m,Xe.z,cn.C,_e.e,_o.h,Y.S,Be.a,We.C,oe.E,l.\u0275NgNoValidate,l.NgSelectOption,l.\u0275NgSelectMultipleOption,l.DefaultValueAccessor,l.CheckboxControlValueAccessor,l.SelectControlValueAccessor,l.NgControlStatus,l.NgControlStatusGroup,l.FormGroupDirective,l.FormControlName,d.Option,E.TitleCasePipe,Ie.r]})}}return n})();var A1=g(2475);function h1(n,i){if(1&n&&(e.\u0275\u0275elementStart(0,"option",50),e.\u0275\u0275text(1),e.\u0275\u0275elementEnd()),2&n){const t=i.$implicit,o=e.\u0275\u0275nextContext();e.\u0275\u0275property("value",t.name)("selected",t.name===o.multisiteZonegroupForm.getValue("selectedRealm")),e.\u0275\u0275advance(),e.\u0275\u0275textInterpolate1(" ",t.name," ")}}function b1(n,i){1&n&&(e.\u0275\u0275elementStart(0,"span",51),e.\u0275\u0275i18n(1,8),e.\u0275\u0275elementEnd())}function v1(n,i){1&n&&(e.\u0275\u0275elementStart(0,"span",51),e.\u0275\u0275i18n(1,9),e.\u0275\u0275elementEnd())}function L1(n,i){1&n&&(e.\u0275\u0275elementStart(0,"span")(1,"cd-helper"),e.\u0275\u0275i18n(2,10),e.\u0275\u0275elementEnd()())}function y1(n,i){1&n&&(e.\u0275\u0275elementStart(0,"cd-helper")(1,"span"),e.\u0275\u0275i18nStart(2,11),e.\u0275\u0275element(3,"cd-doc",52),e.\u0275\u0275i18nEnd(),e.\u0275\u0275elementEnd()())}function $1(n,i){1&n&&(e.\u0275\u0275elementStart(0,"cd-helper")(1,"span"),e.\u0275\u0275i18n(2,12),e.\u0275\u0275elementEnd()())}function D1(n,i){1&n&&(e.\u0275\u0275elementStart(0,"span")(1,"cd-helper"),e.\u0275\u0275i18n(2,13),e.\u0275\u0275elementEnd()())}function W1(n,i){1&n&&(e.\u0275\u0275elementStart(0,"cd-helper")(1,"span"),e.\u0275\u0275i18nStart(2,14),e.\u0275\u0275element(3,"cd-doc",52),e.\u0275\u0275i18nEnd(),e.\u0275\u0275elementEnd()())}function x1(n,i){1&n&&(e.\u0275\u0275elementStart(0,"cd-helper")(1,"span"),e.\u0275\u0275i18n(2,15),e.\u0275\u0275elementEnd()())}function w1(n,i){1&n&&(e.\u0275\u0275elementStart(0,"span",51),e.\u0275\u0275i18n(1,16),e.\u0275\u0275elementEnd())}function U1(n,i){1&n&&(e.\u0275\u0275elementStart(0,"span",51),e.\u0275\u0275i18n(1,17),e.\u0275\u0275elementEnd())}function k1(n,i){1&n&&(e.\u0275\u0275elementStart(0,"span",51),e.\u0275\u0275i18n(1,19),e.\u0275\u0275elementEnd())}function z1(n,i){if(1&n&&(e.\u0275\u0275elementStart(0,"div",30)(1,"label",53),e.\u0275\u0275i18n(2,18),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(3,"div",32),e.\u0275\u0275element(4,"cd-select-badges",54)(5,"br"),e.\u0275\u0275template(6,k1,2,0,"span",38),e.\u0275\u0275elementEnd()()),2&n){const t=e.\u0275\u0275nextContext();e.\u0275\u0275advance(4),e.\u0275\u0275property("data",t.zonegroupZoneNames)("options",t.labelsOption)("customBadges",!0),e.\u0275\u0275advance(2),e.\u0275\u0275property("ngIf",t.isRemoveMasterZone)}}function H1(n,i){1&n&&(e.\u0275\u0275elementStart(0,"span"),e.\u0275\u0275i18n(1,24),e.\u0275\u0275elementEnd())}function X1(n,i){if(1&n){const t=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"div")(1,"div",59)(2,"div",60),e.\u0275\u0275text(3),e.\u0275\u0275pipe(4,"ordinal"),e.\u0275\u0275elementStart(5,"span",61),e.\u0275\u0275listener("click",function(){const _=e.\u0275\u0275restoreView(t).index,a=e.\u0275\u0275nextContext(2);return e.\u0275\u0275resetView(a.removePlacementTarget(_))}),e.\u0275\u0275text(6,"\xd7"),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(7,"div",62)(8,"div",30)(9,"label",63),e.\u0275\u0275i18n(10,21),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(11,"div",32),e.\u0275\u0275element(12,"input",64),e.\u0275\u0275elementStart(13,"span",51),e.\u0275\u0275template(14,H1,2,0,"span",42),e.\u0275\u0275elementEnd()()(),e.\u0275\u0275elementStart(15,"div",30)(16,"label",65),e.\u0275\u0275i18n(17,22),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(18,"div",32),e.\u0275\u0275element(19,"input",66),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(20,"div",30)(21,"label",67),e.\u0275\u0275i18n(22,23),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(23,"div",32),e.\u0275\u0275element(24,"input",68),e.\u0275\u0275elementEnd()()()()()}if(2&n){const t=i.$implicit,o=i.index,_=e.\u0275\u0275nextContext(2),a=e.\u0275\u0275reference(6);e.\u0275\u0275advance(),e.\u0275\u0275property("formGroup",t),e.\u0275\u0275advance(2),e.\u0275\u0275textInterpolate1(" ",e.\u0275\u0275pipeBind1(4,3,o+1)," "),e.\u0275\u0275advance(11),e.\u0275\u0275property("ngIf",_.showError(o,"placement_id",a,"required"))}}function B1(n,i){if(1&n){const t=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"div")(1,"legend"),e.\u0275\u0275text(2,"Placement targets"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementContainerStart(3,55),e.\u0275\u0275template(4,X1,25,5,"div",56),e.\u0275\u0275elementContainerEnd(),e.\u0275\u0275elementStart(5,"button",57),e.\u0275\u0275listener("click",function(){e.\u0275\u0275restoreView(t);const _=e.\u0275\u0275nextContext();return e.\u0275\u0275resetView(_.addPlacementTarget())}),e.\u0275\u0275namespaceSVG(),e.\u0275\u0275element(6,"svg",58),e.\u0275\u0275namespaceHTML(),e.\u0275\u0275elementContainerStart(7),e.\u0275\u0275i18n(8,20),e.\u0275\u0275elementContainerEnd(),e.\u0275\u0275elementEnd()()}if(2&n){const t=e.\u0275\u0275nextContext();e.\u0275\u0275advance(4),e.\u0275\u0275property("ngForOf",t.placementTargets.controls)("ngForTrackBy",t.trackByFn),e.\u0275\u0275advance(2),e.\u0275\u0275property("cdsIcon",t.icons.add)("size",t.icons.size16)}}let V1=(()=>{class n{constructor(t,o,_,a,r){this.activeModal=t,this.actionLabels=o,this.rgwZonegroupService=_,this.notificationService=a,this.formBuilder=r,this.icons=y.FI,this.editing=!1,this.defaultsInfo=[],this.multisiteInfo=[],this.realmList=[],this.zonegroupList=[],this.isMaster=!1,this.labelsOption=[],this.zoneList=[],this.isRemoveMasterZone=!1,this.disableDefault=!1,this.disableMaster=!1,this.action=this.editing?this.actionLabels.EDIT+this.resource:this.actionLabels.CREATE+this.resource,this.createForm()}createForm(){this.multisiteZonegroupForm=new Me.$({default_zonegroup:new l.UntypedFormControl(!1),zonegroupName:new l.UntypedFormControl(null,{validators:[l.Validators.required,M.xQ.custom("uniqueName",t=>"create"===this.action&&this.zonegroupNames&&-1!==this.zonegroupNames.indexOf(t))]}),master_zonegroup:new l.UntypedFormControl(!1),selectedRealm:new l.UntypedFormControl(null),zonegroup_endpoints:new l.UntypedFormControl(null,{validators:[M.xQ.url,l.Validators.required]}),placementTargets:this.formBuilder.array([])})}ngOnInit(){A().forEach(this.multisiteZonegroupForm.get("placementTargets"),a=>{this.addPlacementTarget().patchValue(a)}),this.placementTargets=this.multisiteZonegroupForm.get("placementTargets"),this.realmList=void 0!==this.multisiteInfo[0]&&this.multisiteInfo[0].hasOwnProperty("realms")?this.multisiteInfo[0].realms:[],this.zonegroupList=void 0!==this.multisiteInfo[1]&&this.multisiteInfo[1].hasOwnProperty("zonegroups")?this.multisiteInfo[1].zonegroups:[],this.zonegroupList.forEach(a=>{!0===a.is_master&&!A().isEmpty(a.realm_id)&&(this.isMaster=!0,this.disableMaster=!0)}),this.isMaster||(this.multisiteZonegroupForm.get("master_zonegroup").setValue(!0),this.multisiteZonegroupForm.get("master_zonegroup").disable()),this.zoneList=void 0!==this.multisiteInfo[2]&&this.multisiteInfo[2].hasOwnProperty("zones")?this.multisiteInfo[2].zones:[],this.zonegroupNames=this.zonegroupList.map(a=>a.name);const _=this.zonegroupList.map(a=>a.zones).reduce((a,r)=>a.concat(r),[]).map(a=>a.name);if(this.allZoneNames=this.zoneList.map(a=>a.name),this.allZoneNames=A().difference(this.allZoneNames,_),"create"===this.action&&null!==this.defaultsInfo.defaultRealmName&&(this.multisiteZonegroupForm.get("selectedRealm").setValue(this.defaultsInfo.defaultRealmName),this.disableMaster&&this.multisiteZonegroupForm.get("master_zonegroup").disable()),"edit"===this.action){this.multisiteZonegroupForm.get("zonegroupName").setValue(this.info.data.name),this.multisiteZonegroupForm.get("selectedRealm").setValue(this.info.data.parent),this.multisiteZonegroupForm.get("default_zonegroup").setValue(this.info.data.is_default),this.multisiteZonegroupForm.get("master_zonegroup").setValue(this.info.data.is_master),this.multisiteZonegroupForm.get("zonegroup_endpoints").setValue(this.info.data.endpoints.toString()),this.info.data.is_default&&this.multisiteZonegroupForm.get("default_zonegroup").disable(),!this.info.data.is_default&&this.multisiteZonegroupForm.getValue("selectedRealm")!==this.defaultsInfo.defaultRealmName&&(this.multisiteZonegroupForm.get("default_zonegroup").disable(),this.disableDefault=!0),(this.info.data.is_master||this.disableMaster)&&this.multisiteZonegroupForm.get("master_zonegroup").disable(),this.zonegroupZoneNames=this.info.data.zones.map(r=>r.name),this.zgZoneNames=this.info.data.zones.map(r=>r.name),this.zgZoneIds=this.info.data.zones.map(r=>r.id);const a=new Set(this.allZoneNames);this.labelsOption=Array.from(a).map(r=>({enabled:!0,name:r,selected:!1,description:null})),this.info.data.placement_targets.forEach(r=>{const s=this.addPlacementTarget();let c={placement_id:r.name,tags:r.tags.join(","),storage_class:"string"==typeof r.storage_classes?r.storage_classes:r.storage_classes.join(",")};s.patchValue(c)})}}submit(){const t=this.multisiteZonegroupForm.getRawValue();if("create"===this.action)this.realm=new H.SX,this.realm.name=t.selectedRealm,this.zonegroup=new H.Oe,this.zonegroup.name=t.zonegroupName,this.zonegroup.endpoints=t.zonegroup_endpoints,this.rgwZonegroupService.create(this.realm,this.zonegroup,t.default_zonegroup,t.master_zonegroup).subscribe(()=>{this.notificationService.show(w._.success,"Zonegroup: '" + t.zonegroupName + "' created successfully"),this.activeModal.close()},()=>{this.multisiteZonegroupForm.setErrors({cdSubmitButton:!0})});else if("edit"===this.action){this.removedZones=A().difference(this.zgZoneNames,this.zonegroupZoneNames);const o=this.info.data.zones.filter(_=>_.id===this.info.data.master_zone);if(this.isRemoveMasterZone=this.removedZones.includes(o[0].name),this.isRemoveMasterZone)return void this.multisiteZonegroupForm.setErrors({cdSubmitButton:!0});this.addedZones=A().difference(this.zonegroupZoneNames,this.zgZoneNames),this.realm=new H.SX,this.realm.name=t.selectedRealm,this.zonegroup=new H.Oe,this.zonegroup.name=this.info.data.name,this.newZonegroupName=t.zonegroupName,this.zonegroup.endpoints=t.zonegroup_endpoints.toString(),this.zonegroup.placement_targets=t.placementTargets,this.rgwZonegroupService.update(this.realm,this.zonegroup,this.newZonegroupName,t.default_zonegroup,t.master_zonegroup,this.removedZones,this.addedZones).subscribe(()=>{this.notificationService.show(w._.success,"Zonegroup: '" + t.zonegroupName + "' updated successfully"),this.activeModal.close()},()=>{this.multisiteZonegroupForm.setErrors({cdSubmitButton:!0})})}}addPlacementTarget(){this.placementTargets=this.multisiteZonegroupForm.get("placementTargets");const t=new Me.$({placement_id:new l.UntypedFormControl("",{validators:[l.Validators.required]}),tags:new l.UntypedFormControl(""),storage_class:new l.UntypedFormControl([])});return this.placementTargets.push(t),t}trackByFn(t){return t}removePlacementTarget(t){this.placementTargets=this.multisiteZonegroupForm.get("placementTargets"),this.placementTargets.removeAt(t)}showError(t,o,_,a){return this.multisiteZonegroupForm.controls.placementTargets.controls[t].showError(o,_,a)}static{this.\u0275fac=function(o){return new(o||n)(e.\u0275\u0275directiveInject(v.NgbActiveModal),e.\u0275\u0275directiveInject(P.Ss),e.\u0275\u0275directiveInject(ke.Z),e.\u0275\u0275directiveInject(ne.J),e.\u0275\u0275directiveInject(l.UntypedFormBuilder))}}static{this.\u0275cmp=e.\u0275\u0275defineComponent({type:n,selectors:[["cd-rgw-multisite-zonegroup-form"]],decls:49,vars:24,consts:()=>{let t,o,_,a,r,s,c,u,p,T,f,G,S,O,C,b,N,k,z,$,X,B,V,Z;return t="" + "\ufffd0\ufffd" + " Zone Group",o="Select Realm",_="-- Select a realm --",a="Zone Group Name",r="Default",s="Master",c="Endpoints",u="This field is required.",p="The chosen zone group name is already in use.",T="Zone group doesn't belong to the default realm.",f="Please consult the\xA0" + "\ufffd#3\ufffd" + "" + "\ufffd/#3\ufffd" + "\xA0to follow the failover mechanism",G="You cannot unset the default flag.",S="Multiple master zone groups can't be configured. If you want to create a new zone group and make it the master zone group, you must delete the default zone group.",O="Please consult the\xA0" + "\ufffd#3\ufffd" + "" + "\ufffd/#3\ufffd" + "\xA0to follow the failover mechanism",C="You cannot unset the master flag.",b="This field is required.",N="Please enter a valid URL.",k="Zones",z="Cannot remove master zone.",$="Add placement target",X="Placement Id",B="Tags",V="Storage Class",Z="This field is required.",[["formDir","ngForm"],t,o,_,a,r,s,c,u,p,T,f,G,S,O,C,b,N,k,z,$,X,B,V,Z,[3,"modalRef"],[1,"modal-title"],[1,"modal-content"],["name","multisiteZonegroupForm","novalidate","",3,"formGroup"],[1,"modal-body"],[1,"form-group","row"],["for","selectedRealm",1,"cd-col-form-label"],[1,"cd-col-form-input"],["id","selectedRealm","formControlName","selectedRealm","name","selectedRealm",1,"form-select"],["ngValue",""],[3,"value","selected",4,"ngFor","ngForOf"],["for","zonegroupName",1,"cd-col-form-label","required"],["type","text","placeholder","Zone group name...","id","zonegroupName","name","zonegroupName","formControlName","zonegroupName",1,"form-control"],["class","invalid-feedback",4,"ngIf"],[1,"custom-control","custom-checkbox"],["id","default_zonegroup","name","default_zonegroup","formControlName","default_zonegroup","type","checkbox",1,"form-check-input"],["for","default_zonegroup",1,"form-check-label"],[4,"ngIf"],["id","master_zonegroup","name","master_zonegroup","formControlName","master_zonegroup","type","checkbox",1,"form-check-input"],["for","master_zonegroup",1,"form-check-label"],["for","zonegroup_endpoints",1,"cd-col-form-label","required"],["type","text","placeholder","e.g, http://ceph-node-00.com:80","id","zonegroup_endpoints","name","zonegroup_endpoints","formControlName","zonegroup_endpoints",1,"form-control"],["class","form-group row",4,"ngIf"],[1,"modal-footer"],[3,"submitActionEvent","form","submitText"],[3,"value","selected"],[1,"invalid-feedback"],["section","rgw-multisite"],["for","zones",1,"cd-col-form-label"],["id","zones",3,"data","options","customBadges"],["formArrayName","placementTargets"],[4,"ngFor","ngForOf","ngForTrackBy"],["type","button","id","add-plc",1,"btn","btn-light","float-end","my-3",3,"click"],[1,"cds-info-color",3,"cdsIcon","size"],[1,"card",3,"formGroup"],[1,"card-header"],["name","remove_placement_target","ngbTooltip","Remove",1,"float-end","clickable",3,"click"],[1,"card-body"],["for","placement_id",1,"cd-col-form-label","required"],["type","text","name","placement_id","id","placement_id","formControlName","placement_id","placeholder","eg. default-placement",1,"form-control"],["for","tags",1,"cd-col-form-label"],["type","text","name","tags","id","tags","formControlName","tags","placeholder","comma separated tags, eg. default-placement, ssd",1,"form-control"],["for","storage_class",1,"cd-col-form-label"],["type","text","name","storage_class","id","storage_class","formControlName","storage_class","placeholder","eg. Standard-tier",1,"form-control"]]},template:function(o,_){if(1&o){const a=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"cd-modal",25),e.\u0275\u0275elementContainerStart(1,26),e.\u0275\u0275i18n(2,1),e.\u0275\u0275pipe(3,"titlecase"),e.\u0275\u0275elementContainerEnd(),e.\u0275\u0275elementContainerStart(4,27),e.\u0275\u0275elementStart(5,"form",28,0)(7,"div",29)(8,"div",30)(9,"label",31),e.\u0275\u0275i18n(10,2),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(11,"div",32)(12,"select",33)(13,"option",34),e.\u0275\u0275i18n(14,3),e.\u0275\u0275elementEnd(),e.\u0275\u0275template(15,h1,2,3,"option",35),e.\u0275\u0275elementEnd()()(),e.\u0275\u0275elementStart(16,"div",30)(17,"label",36),e.\u0275\u0275i18n(18,4),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(19,"div",32),e.\u0275\u0275element(20,"input",37),e.\u0275\u0275template(21,b1,2,0,"span",38)(22,v1,2,0,"span",38),e.\u0275\u0275elementStart(23,"div",39),e.\u0275\u0275element(24,"input",40),e.\u0275\u0275elementStart(25,"label",41),e.\u0275\u0275i18n(26,5),e.\u0275\u0275elementEnd(),e.\u0275\u0275template(27,L1,3,0,"span",42)(28,y1,4,0,"cd-helper",42)(29,$1,3,0,"cd-helper",42),e.\u0275\u0275element(30,"br")(31,"input",43),e.\u0275\u0275elementStart(32,"label",44),e.\u0275\u0275i18n(33,6),e.\u0275\u0275elementEnd(),e.\u0275\u0275template(34,D1,3,0,"span",42)(35,W1,4,0,"cd-helper",42)(36,x1,3,0,"cd-helper",42),e.\u0275\u0275elementEnd()()(),e.\u0275\u0275elementStart(37,"div",30)(38,"label",45),e.\u0275\u0275i18n(39,7),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(40,"div",32),e.\u0275\u0275element(41,"input",46),e.\u0275\u0275template(42,w1,2,0,"span",38)(43,U1,2,0,"span",38),e.\u0275\u0275elementEnd()(),e.\u0275\u0275template(44,z1,7,4,"div",47)(45,B1,9,4,"div",42),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(46,"div",48)(47,"cd-form-button-panel",49),e.\u0275\u0275pipe(48,"titlecase"),e.\u0275\u0275listener("submitActionEvent",function(){return e.\u0275\u0275restoreView(a),e.\u0275\u0275resetView(_.submit())}),e.\u0275\u0275elementEnd()()(),e.\u0275\u0275elementContainerEnd(),e.\u0275\u0275elementEnd()}if(2&o){const a=e.\u0275\u0275reference(6);e.\u0275\u0275property("modalRef",_.activeModal),e.\u0275\u0275advance(3),e.\u0275\u0275i18nExp(e.\u0275\u0275pipeBind1(3,20,_.action)),e.\u0275\u0275i18nApply(2),e.\u0275\u0275advance(2),e.\u0275\u0275property("formGroup",_.multisiteZonegroupForm),e.\u0275\u0275advance(10),e.\u0275\u0275property("ngForOf",_.realmList),e.\u0275\u0275advance(6),e.\u0275\u0275property("ngIf",_.multisiteZonegroupForm.showError("zonegroupName",a,"required")),e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf",_.multisiteZonegroupForm.showError("zonegroupName",a,"uniqueName")),e.\u0275\u0275advance(2),e.\u0275\u0275attribute("disabled","edit"===_.action||null),e.\u0275\u0275advance(3),e.\u0275\u0275property("ngIf",_.disableDefault&&"create"===_.action),e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf","edit"===_.action&&!_.info.data.is_default),e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf","edit"===_.action&&_.info.data.is_default),e.\u0275\u0275advance(2),e.\u0275\u0275attribute("disabled","edit"===_.action||null),e.\u0275\u0275advance(3),e.\u0275\u0275property("ngIf",_.disableMaster&&"create"===_.action),e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf","edit"===_.action&&!_.info.data.is_master),e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf","edit"===_.action&&_.info.data.is_master),e.\u0275\u0275advance(6),e.\u0275\u0275property("ngIf",_.multisiteZonegroupForm.showError("zonegroup_endpoints",a,"required")),e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf",_.multisiteZonegroupForm.showError("zonegroup_endpoints",a,"invalidURL")),e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf","edit"===_.action),e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf","edit"===_.action),e.\u0275\u0275advance(2),e.\u0275\u0275property("form",_.multisiteZonegroupForm)("submitText",e.\u0275\u0275pipeBind1(48,22,_.action)+" Zone Group")}},dependencies:[E.NgForOf,E.NgIf,Pt.m,Lt.U,Xe.z,cn.C,_e.e,Y.S,Be.a,We.C,oe.E,l.\u0275NgNoValidate,l.NgSelectOption,l.\u0275NgSelectMultipleOption,l.DefaultValueAccessor,l.CheckboxControlValueAccessor,l.SelectControlValueAccessor,l.NgControlStatus,l.NgControlStatusGroup,l.FormGroupDirective,l.FormControlName,l.FormArrayName,v.NgbTooltip,d.IconDirective,d.Option,E.TitleCasePipe,A1.i]})}}return n})();var io=g(20009),Z1=g(53075),K1=g(42706),q1=g(63882),Ve=function(n){return n.CreateRealmAndZonegroup="Create Realm & Zonegroup",n.CreateZone="Create Zone",n.SelectCluster="Select Cluster",n.Review="Review",n}(Ve||{});const dn=[Ve.CreateRealmAndZonegroup,Ve.CreateZone,Ve.SelectCluster,Ve.Review],ao=[Ve.CreateRealmAndZonegroup,Ve.CreateZone,Ve.Review],j1=[Ve.CreateRealmAndZonegroup,Ve.SelectCluster,Ve.Review];var Y1=g(80893),Q1=g(55989),J1=g(70946);const eu=()=>({lg:2,md:2,sm:2}),tu=()=>({lg:14,md:14,sm:14});function nu(n,i){if(1&n){const t=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"div",82)(1,"label",83),e.\u0275\u0275i18n(2,15),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(3,"div",84)(4,"input",85),e.\u0275\u0275listener("change",function(){e.\u0275\u0275restoreView(t);const _=e.\u0275\u0275nextContext(2);return e.\u0275\u0275resetView(_.onConfigTypeChange())}),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(5,"label",86),e.\u0275\u0275i18n(6,16),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(7,"div",87)(8,"input",88),e.\u0275\u0275listener("change",function(){e.\u0275\u0275restoreView(t);const _=e.\u0275\u0275nextContext(2);return e.\u0275\u0275resetView(_.onConfigTypeChange())}),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(9,"label",89),e.\u0275\u0275i18n(10,17),e.\u0275\u0275elementEnd()()()}}function ou(n,i){if(1&n&&(e.\u0275\u0275elementStart(0,"option",94),e.\u0275\u0275text(1),e.\u0275\u0275elementEnd()),2&n){const t=i.$implicit;e.\u0275\u0275property("value",t),e.\u0275\u0275advance(),e.\u0275\u0275textInterpolate1(" ",t," ")}}function _u(n,i){if(1&n&&(e.\u0275\u0275elementStart(0,"div",82)(1,"label",90),e.\u0275\u0275i18n(2,18),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(3,"div",91)(4,"select",92),e.\u0275\u0275template(5,ou,2,2,"option",93),e.\u0275\u0275elementEnd()()()),2&n){const t=e.\u0275\u0275nextContext(2);e.\u0275\u0275advance(5),e.\u0275\u0275property("ngForOf",t.realmList)}}function iu(n,i){1&n&&(e.\u0275\u0275elementStart(0,"span",102),e.\u0275\u0275i18n(1,25),e.\u0275\u0275elementEnd())}function au(n,i){1&n&&(e.\u0275\u0275elementStart(0,"span",102),e.\u0275\u0275i18n(1,26),e.\u0275\u0275elementEnd())}function ru(n,i){1&n&&(e.\u0275\u0275elementStart(0,"span",102),e.\u0275\u0275i18n(1,27),e.\u0275\u0275elementEnd())}function lu(n,i){1&n&&(e.\u0275\u0275elementStart(0,"span",102),e.\u0275\u0275i18n(1,28),e.\u0275\u0275elementEnd())}function su(n,i){if(1&n&&(e.\u0275\u0275elementStart(0,"div")(1,"div",82)(2,"label",95),e.\u0275\u0275i18n(3,19),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(4,"div",91),e.\u0275\u0275element(5,"input",96),e.\u0275\u0275elementStart(6,"cd-help-text")(7,"span"),e.\u0275\u0275i18n(8,20),e.\u0275\u0275elementEnd()(),e.\u0275\u0275template(9,iu,2,0,"span",97)(10,au,2,0,"span",97),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(11,"div",82)(12,"label",98),e.\u0275\u0275i18n(13,21),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(14,"div",91),e.\u0275\u0275element(15,"input",99),e.\u0275\u0275elementStart(16,"cd-help-text")(17,"span"),e.\u0275\u0275i18n(18,22),e.\u0275\u0275elementEnd()(),e.\u0275\u0275template(19,ru,2,0,"span",97)(20,lu,2,0,"span",97),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(21,"div",82)(22,"label",100),e.\u0275\u0275i18n(23,23),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(24,"div",91),e.\u0275\u0275element(25,"cd-select-badges",101),e.\u0275\u0275elementStart(26,"cd-help-text")(27,"span"),e.\u0275\u0275i18n(28,24),e.\u0275\u0275elementEnd()()()()()),2&n){const t=e.\u0275\u0275nextContext(2),o=e.\u0275\u0275reference(10);e.\u0275\u0275advance(9),e.\u0275\u0275property("ngIf",t.multisiteSetupForm.showError("realmName",o,"required")),e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf",t.multisiteSetupForm.showError("realmName",o,"uniqueName")),e.\u0275\u0275advance(9),e.\u0275\u0275property("ngIf",t.multisiteSetupForm.showError("zonegroupName",o,"required")),e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf",t.multisiteSetupForm.showError("zonegroupName",o,"uniqueName")),e.\u0275\u0275advance(5),e.\u0275\u0275property("data",t.rgwEndpoints.value)("options",t.rgwEndpoints.options)("customBadges",!0)}}function cu(n,i){if(1&n&&(e.\u0275\u0275elementStart(0,"div",78)(1,"cd-alert-panel",79),e.\u0275\u0275text(2," This wizard enables you to set up multi-site replication within your Ceph environment.If you have already added another cluster to your multi-cluster setup, you can select that cluster in the wizard to automate the replication process.If no additional cluster is currently added, the wizard will guide you through creating the necessary realm, zonegroup, and zone, and provide a realm token.This token can be used later to manually import into a desired cluster to establish replication between the clusters. "),e.\u0275\u0275elementEnd(),e.\u0275\u0275template(3,nu,11,0,"div",80)(4,_u,6,1,"div",80)(5,su,29,7,"div",81),e.\u0275\u0275elementEnd()),2&n){const t=e.\u0275\u0275nextContext();e.\u0275\u0275advance(3),e.\u0275\u0275property("ngIf",t.showConfigType&&t.isMultiClusterConfigured),e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf","existingRealm"===t.multisiteSetupForm.get("configType").value&&t.showConfigType&&t.isMultiClusterConfigured),e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf","newRealm"===t.multisiteSetupForm.get("configType").value||!t.showConfigType)}}function du(n,i){1&n&&(e.\u0275\u0275elementStart(0,"span",102),e.\u0275\u0275i18n(1,36),e.\u0275\u0275elementEnd())}function uu(n,i){1&n&&(e.\u0275\u0275elementStart(0,"span",102),e.\u0275\u0275i18n(1,37),e.\u0275\u0275elementEnd())}function pu(n,i){1&n&&(e.\u0275\u0275elementStart(0,"span",102),e.\u0275\u0275i18n(1,38),e.\u0275\u0275elementEnd())}function mu(n,i){1&n&&(e.\u0275\u0275elementStart(0,"span",102),e.\u0275\u0275i18n(1,39),e.\u0275\u0275elementEnd())}function Tu(n,i){if(1&n&&(e.\u0275\u0275elementStart(0,"div",78)(1,"div",82)(2,"label",98),e.\u0275\u0275i18n(3,29),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(4,"div",91),e.\u0275\u0275element(5,"input",104),e.\u0275\u0275elementStart(6,"cd-help-text")(7,"span"),e.\u0275\u0275i18n(8,30),e.\u0275\u0275elementEnd()(),e.\u0275\u0275template(9,du,2,0,"span",97)(10,uu,2,0,"span",97),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(11,"div",82)(12,"label",105),e.\u0275\u0275i18n(13,31),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(14,"div",91),e.\u0275\u0275element(15,"cd-select-badges",106),e.\u0275\u0275elementStart(16,"cd-help-text")(17,"span"),e.\u0275\u0275i18n(18,32),e.\u0275\u0275elementEnd()()()(),e.\u0275\u0275elementStart(19,"div",82)(20,"label",107),e.\u0275\u0275i18n(21,33),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(22,"div",91),e.\u0275\u0275element(23,"input",108),e.\u0275\u0275elementStart(24,"cd-help-text")(25,"span"),e.\u0275\u0275i18n(26,34),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(27,"cd-alert-panel",109)(28,"span"),e.\u0275\u0275i18n(29,35),e.\u0275\u0275elementEnd()(),e.\u0275\u0275template(30,pu,2,0,"span",97)(31,mu,2,0,"span",97),e.\u0275\u0275elementEnd()()()),2&n){const t=e.\u0275\u0275nextContext(2),o=e.\u0275\u0275reference(10);e.\u0275\u0275advance(9),e.\u0275\u0275property("ngIf",t.multisiteSetupForm.showError("zoneName",o,"required")),e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf",t.multisiteSetupForm.showError("zoneName",o,"uniqueName")),e.\u0275\u0275advance(5),e.\u0275\u0275property("data",t.rgwEndpoints.value)("options",t.rgwEndpoints.options)("customBadges",!0),e.\u0275\u0275advance(12),e.\u0275\u0275property("showTitle",!1),e.\u0275\u0275advance(3),e.\u0275\u0275property("ngIf",t.multisiteSetupForm.showError("username",o,"required")),e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf",t.multisiteSetupForm.showError("username",o,"notUnique"))}}function gu(n,i){1&n&&e.\u0275\u0275elementContainer(0)}function Eu(n,i){if(1&n&&(e.\u0275\u0275elementStart(0,"div",78),e.\u0275\u0275template(1,gu,1,0,"ng-container",110),e.\u0275\u0275elementEnd()),2&n){e.\u0275\u0275nextContext(2);const t=e.\u0275\u0275reference(18);e.\u0275\u0275advance(),e.\u0275\u0275property("ngTemplateOutlet",t)}}function Ru(n,i){if(1&n&&(e.\u0275\u0275elementContainerStart(0),e.\u0275\u0275template(1,Tu,32,8,"div",103)(2,Eu,2,1,"div",103),e.\u0275\u0275elementContainerEnd()),2&n){const t=e.\u0275\u0275nextContext();e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf","newRealm"===t.multisiteSetupForm.get("configType").value),e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf",t.isMultiClusterConfigured&&"existingRealm"===t.multisiteSetupForm.get("configType").value)}}function Cu(n,i){1&n&&e.\u0275\u0275elementContainer(0)}function fu(n,i){if(1&n&&(e.\u0275\u0275elementContainerStart(0),e.\u0275\u0275template(1,Cu,1,0,"ng-container",110),e.\u0275\u0275elementContainerEnd()),2&n){e.\u0275\u0275nextContext(3);const t=e.\u0275\u0275reference(18);e.\u0275\u0275advance(),e.\u0275\u0275property("ngTemplateOutlet",t)}}function Su(n,i){if(1&n&&(e.\u0275\u0275elementStart(0,"div",78),e.\u0275\u0275template(1,fu,2,1,"ng-container",111),e.\u0275\u0275elementEnd()),2&n){const t=e.\u0275\u0275nextContext(2),o=e.\u0275\u0275reference(16);e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf",t.isMultiClusterConfigured)("ngIfElse",o)}}function Fu(n,i){1&n&&e.\u0275\u0275elementContainer(0)}function Mu(n,i){if(1&n&&(e.\u0275\u0275elementContainerStart(0),e.\u0275\u0275template(1,Fu,1,0,"ng-container",110),e.\u0275\u0275elementContainerEnd()),2&n){e.\u0275\u0275nextContext(4);const t=e.\u0275\u0275reference(38);e.\u0275\u0275advance(),e.\u0275\u0275property("ngTemplateOutlet",t)}}function Pu(n,i){if(1&n&&(e.\u0275\u0275elementContainerStart(0),e.\u0275\u0275template(1,Mu,2,1,"ng-container",111),e.\u0275\u0275elementContainerEnd()),2&n){const t=e.\u0275\u0275nextContext(3),o=e.\u0275\u0275reference(32);e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf",!t.setupCompleted)("ngIfElse",o)}}function Iu(n,i){if(1&n&&(e.\u0275\u0275elementStart(0,"div",78),e.\u0275\u0275template(1,Pu,2,2,"ng-container",111),e.\u0275\u0275elementEnd()),2&n){const t=e.\u0275\u0275nextContext(2),o=e.\u0275\u0275reference(30);e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf",!t.loading)("ngIfElse",o)}}function Ou(n,i){if(1&n&&(e.\u0275\u0275elementContainerStart(0),e.\u0275\u0275template(1,Su,2,2,"div",103)(2,Iu,2,2,"div",103),e.\u0275\u0275elementContainerEnd()),2&n){const t=e.\u0275\u0275nextContext();e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf","newRealm"===t.multisiteSetupForm.get("configType").value),e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf","existingRealm"===t.multisiteSetupForm.get("configType").value&&t.isMultiClusterConfigured)}}function Gu(n,i){1&n&&e.\u0275\u0275elementContainer(0)}function Nu(n,i){if(1&n&&e.\u0275\u0275template(0,Gu,1,0,"ng-container",110),2&n){e.\u0275\u0275nextContext();const t=e.\u0275\u0275reference(38);e.\u0275\u0275property("ngTemplateOutlet",t)}}function Au(n,i){if(1&n&&(e.\u0275\u0275elementStart(0,"option",94),e.\u0275\u0275text(1),e.\u0275\u0275elementEnd()),2&n){const t=i.$implicit;e.\u0275\u0275property("value",t.name),e.\u0275\u0275advance(),e.\u0275\u0275textInterpolate2(" ",t.cluster_alias," - ",t.name," ")}}function hu(n,i){1&n&&(e.\u0275\u0275elementStart(0,"span",102),e.\u0275\u0275i18n(1,45),e.\u0275\u0275elementEnd())}function bu(n,i){if(1&n){const t=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"div",82)(1,"label",112),e.\u0275\u0275i18n(2,40),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(3,"div",91)(4,"select",113),e.\u0275\u0275twoWayListener("ngModelChange",function(_){e.\u0275\u0275restoreView(t);const a=e.\u0275\u0275nextContext();return e.\u0275\u0275twoWayBindingSet(a.selectedCluster,_)||(a.selectedCluster=_),e.\u0275\u0275resetView(_)}),e.\u0275\u0275template(5,Au,2,3,"option",93),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(6,"cd-help-text")(7,"span"),e.\u0275\u0275i18n(8,41),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(9,"cd-alert-panel",109)(10,"span"),e.\u0275\u0275i18n(11,42),e.\u0275\u0275elementEnd()()()(),e.\u0275\u0275elementStart(12,"div",82)(13,"label",114),e.\u0275\u0275i18n(14,43),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(15,"div",91),e.\u0275\u0275element(16,"input",115),e.\u0275\u0275elementStart(17,"cd-help-text")(18,"span"),e.\u0275\u0275i18n(19,44),e.\u0275\u0275elementEnd()(),e.\u0275\u0275template(20,hu,2,0,"span",97),e.\u0275\u0275elementEnd()()}if(2&n){const t=e.\u0275\u0275nextContext(),o=e.\u0275\u0275reference(10);e.\u0275\u0275advance(4),e.\u0275\u0275twoWayProperty("ngModel",t.selectedCluster),e.\u0275\u0275advance(),e.\u0275\u0275property("ngForOf",t.clusterDetailsArray),e.\u0275\u0275advance(4),e.\u0275\u0275property("showTitle",!1),e.\u0275\u0275advance(11),e.\u0275\u0275property("ngIf",t.multisiteSetupForm.showError("replicationZoneName",o,"required"))}}function vu(n,i){1&n&&e.\u0275\u0275elementContainer(0)}function Lu(n,i){if(1&n&&(e.\u0275\u0275elementContainerStart(0),e.\u0275\u0275template(1,vu,1,0,"ng-container",110),e.\u0275\u0275elementContainerEnd()),2&n){e.\u0275\u0275nextContext(4);const t=e.\u0275\u0275reference(38);e.\u0275\u0275advance(),e.\u0275\u0275property("ngTemplateOutlet",t)}}function yu(n,i){if(1&n&&(e.\u0275\u0275elementContainerStart(0),e.\u0275\u0275template(1,Lu,2,1,"ng-container",111),e.\u0275\u0275elementContainerEnd()),2&n){const t=e.\u0275\u0275nextContext(3),o=e.\u0275\u0275reference(32);e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf",!t.setupCompleted)("ngIfElse",o)}}function $u(n,i){if(1&n&&(e.\u0275\u0275elementStart(0,"div"),e.\u0275\u0275template(1,yu,2,2,"ng-container",111),e.\u0275\u0275elementEnd()),2&n){const t=e.\u0275\u0275nextContext(2),o=e.\u0275\u0275reference(30);e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf",!t.loading)("ngIfElse",o)}}function Du(n,i){if(1&n&&(e.\u0275\u0275elementStart(0,"div",78),e.\u0275\u0275template(1,$u,2,2,"div",81),e.\u0275\u0275elementEnd()),2&n){const t=e.\u0275\u0275nextContext();e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf",t.isMultiClusterConfigured)}}function Wu(n,i){if(1&n){const t=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"button",116),e.\u0275\u0275listener("click",function(){e.\u0275\u0275restoreView(t);const _=e.\u0275\u0275nextContext();return e.\u0275\u0275resetView(_.onSkip())}),e.\u0275\u0275i18n(1,46),e.\u0275\u0275elementEnd()}}function xu(n,i){if(1&n&&(e.\u0275\u0275i18nStart(0,14,1),e.\u0275\u0275element(1,"cds-loading",117),e.\u0275\u0275i18nEnd()),2&n){const t=e.\u0275\u0275nextContext();e.\u0275\u0275advance(),e.\u0275\u0275property("isActive",t.loading)("overlay",!1)}}function wu(n,i){1&n&&e.\u0275\u0275elementContainer(0)}function Uu(n,i){if(1&n&&(e.\u0275\u0275elementContainerStart(0),e.\u0275\u0275template(1,wu,1,0,"ng-container",110),e.\u0275\u0275elementContainerEnd()),2&n){e.\u0275\u0275nextContext(3);const t=e.\u0275\u0275reference(38);e.\u0275\u0275advance(),e.\u0275\u0275property("ngTemplateOutlet",t)}}function ku(n,i){if(1&n&&(e.\u0275\u0275elementContainerStart(0),e.\u0275\u0275template(1,Uu,2,1,"ng-container",111),e.\u0275\u0275elementContainerEnd()),2&n){const t=e.\u0275\u0275nextContext(2),o=e.\u0275\u0275reference(36);e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf",!t.setupCompleted)("ngIfElse",o)}}function zu(n,i){if(1&n&&e.\u0275\u0275template(0,ku,2,2,"ng-container",111),2&n){const t=e.\u0275\u0275nextContext(),o=e.\u0275\u0275reference(30);e.\u0275\u0275property("ngIf",!t.loading)("ngIfElse",o)}}function Hu(n,i){1&n&&e.\u0275\u0275elementContainer(0)}function Xu(n,i){if(1&n&&e.\u0275\u0275template(0,Hu,1,0,"ng-container",110),2&n){e.\u0275\u0275nextContext();const t=e.\u0275\u0275reference(34);e.\u0275\u0275property("ngTemplateOutlet",t)}}function Bu(n,i){1&n&&(e.\u0275\u0275elementStart(0,"div")(1,"div",118),e.\u0275\u0275i18n(2,47),e.\u0275\u0275elementEnd()())}function Vu(n,i){if(1&n&&e.\u0275\u0275template(0,Bu,3,0,"div",111),2&n){const t=e.\u0275\u0275nextContext(),o=e.\u0275\u0275reference(36);e.\u0275\u0275property("ngIf",t.isMultiClusterConfigured&&!t.stepsToSkip["Select Cluster"])("ngIfElse",o)}}function Zu(n,i){if(1&n&&e.\u0275\u0275element(0,"cd-progress",119),2&n){let t,o;const _=e.\u0275\u0275nextContext();e.\u0275\u0275property("value",null==_.executingTask?null:_.executingTask.progress)("description",null==_.executingTask||null==_.executingTask.name||null==(t=_.executingTask.name.replace("progress/Multisite-Setup:",""))||null==(t=t.split("||")[0])?null:t.trim())("subDescription",null==_.executingTask||null==_.executingTask.name||null==(o=_.executingTask.name.replace("progress/Multisite-Setup:",""))||null==(o=o.split("||")[1])?null:o.trim())}}function Ku(n,i){1&n&&e.\u0275\u0275element(0,"hr")}function qu(n,i){if(1&n&&(e.\u0275\u0275elementStart(0,"div")(1,"div",82)(2,"label",121),e.\u0275\u0275i18n(3,48),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(4,"div",91),e.\u0275\u0275element(5,"input",122),e.\u0275\u0275elementStart(6,"cd-help-text")(7,"span"),e.\u0275\u0275i18n(8,49),e.\u0275\u0275elementEnd()()()(),e.\u0275\u0275elementStart(9,"div",82)(10,"label",123),e.\u0275\u0275i18n(11,50),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(12,"div",91),e.\u0275\u0275element(13,"input",124)(14,"cd-copy-2-clipboard-button",125),e.\u0275\u0275elementStart(15,"cd-help-text")(16,"span"),e.\u0275\u0275i18n(17,51),e.\u0275\u0275elementEnd()()()(),e.\u0275\u0275template(18,Ku,1,0,"hr",81),e.\u0275\u0275elementEnd()),2&n){const t=i.$implicit,o=e.\u0275\u0275nextContext(2);e.\u0275\u0275advance(5),e.\u0275\u0275property("value",t.realm),e.\u0275\u0275advance(8),e.\u0275\u0275property("value",t.token),e.\u0275\u0275advance(),e.\u0275\u0275property("source",t.token)("byId",!1),e.\u0275\u0275advance(4),e.\u0275\u0275property("ngIf",o.realms.length>1)}}function ju(n,i){if(1&n&&e.\u0275\u0275template(0,qu,19,5,"div",120),2&n){const t=e.\u0275\u0275nextContext();e.\u0275\u0275property("ngForOf",t.realms)}}function Yu(n,i){1&n&&e.\u0275\u0275elementContainer(0)}function Qu(n,i){1&n&&e.\u0275\u0275elementContainer(0)}function Ju(n,i){if(1&n&&(e.\u0275\u0275elementContainerStart(0),e.\u0275\u0275template(1,Yu,1,0,"ng-container",110)(2,Qu,1,0,"ng-container",110),e.\u0275\u0275elementContainerEnd()),2&n){e.\u0275\u0275nextContext(2);const t=e.\u0275\u0275reference(40),o=e.\u0275\u0275reference(44);e.\u0275\u0275advance(),e.\u0275\u0275property("ngTemplateOutlet",t),e.\u0275\u0275advance(),e.\u0275\u0275property("ngTemplateOutlet",o)}}function ep(n,i){1&n&&e.\u0275\u0275elementContainer(0)}function tp(n,i){1&n&&e.\u0275\u0275elementContainer(0)}function np(n,i){if(1&n&&(e.\u0275\u0275elementContainerStart(0),e.\u0275\u0275template(1,ep,1,0,"ng-container",110)(2,tp,1,0,"ng-container",110),e.\u0275\u0275elementContainerEnd()),2&n){e.\u0275\u0275nextContext(2);const t=e.\u0275\u0275reference(42),o=e.\u0275\u0275reference(44);e.\u0275\u0275advance(),e.\u0275\u0275property("ngTemplateOutlet",t),e.\u0275\u0275advance(),e.\u0275\u0275property("ngTemplateOutlet",o)}}function op(n,i){if(1&n&&(e.\u0275\u0275elementStart(0,"cd-alert-panel",126)(1,"span"),e.\u0275\u0275i18n(2,52),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementContainerStart(3,71),e.\u0275\u0275template(4,Ju,3,2,"ng-container",73)(5,np,3,2,"ng-container",73),e.\u0275\u0275elementContainerEnd()),2&n){const t=e.\u0275\u0275nextContext();e.\u0275\u0275property("showTitle",!1),e.\u0275\u0275advance(3),e.\u0275\u0275property("ngSwitch",t.multisiteSetupForm.get("configType").value),e.\u0275\u0275advance(),e.\u0275\u0275property("ngSwitchCase","newRealm"),e.\u0275\u0275advance(),e.\u0275\u0275property("ngSwitchCase","existingRealm")}}function _p(n,i){if(1&n&&(e.\u0275\u0275elementStart(0,"div",82)(1,"label",127),e.\u0275\u0275i18n(2,53),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(3,"div",128)(4,"b",129),e.\u0275\u0275text(5),e.\u0275\u0275elementEnd()()(),e.\u0275\u0275elementStart(6,"div",82)(7,"label",127),e.\u0275\u0275i18n(8,54),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(9,"div",128)(10,"b",130),e.\u0275\u0275text(11),e.\u0275\u0275elementEnd()()(),e.\u0275\u0275elementStart(12,"div",82)(13,"label",127),e.\u0275\u0275i18n(14,55),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(15,"div",128)(16,"b"),e.\u0275\u0275text(17),e.\u0275\u0275elementEnd()()(),e.\u0275\u0275elementStart(18,"div",82)(19,"label",127),e.\u0275\u0275i18n(20,56),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(21,"div",128)(22,"b",131),e.\u0275\u0275text(23),e.\u0275\u0275elementEnd()()(),e.\u0275\u0275elementStart(24,"div",82)(25,"label",127),e.\u0275\u0275i18n(26,57),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(27,"div",128)(28,"b"),e.\u0275\u0275text(29),e.\u0275\u0275elementEnd()()(),e.\u0275\u0275elementStart(30,"div",82)(31,"label",127),e.\u0275\u0275i18n(32,58),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(33,"div",128)(34,"b"),e.\u0275\u0275text(35),e.\u0275\u0275elementEnd()()()),2&n){const t=e.\u0275\u0275nextContext();e.\u0275\u0275advance(5),e.\u0275\u0275textInterpolate(t.multisiteSetupForm.get("realmName").value),e.\u0275\u0275advance(6),e.\u0275\u0275textInterpolate(t.multisiteSetupForm.get("zonegroupName").value),e.\u0275\u0275advance(6),e.\u0275\u0275textInterpolate(t.rgwEndpoints.value.join(", ")),e.\u0275\u0275advance(6),e.\u0275\u0275textInterpolate(t.multisiteSetupForm.get("zoneName").value),e.\u0275\u0275advance(6),e.\u0275\u0275textInterpolate(t.rgwEndpoints.value.join(", ")),e.\u0275\u0275advance(6),e.\u0275\u0275textInterpolate(t.multisiteSetupForm.get("username").value)}}function ip(n,i){if(1&n&&(e.\u0275\u0275elementStart(0,"div",82)(1,"label",127),e.\u0275\u0275i18n(2,59),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(3,"div",128)(4,"b"),e.\u0275\u0275text(5),e.\u0275\u0275elementEnd()()()),2&n){const t=e.\u0275\u0275nextContext();e.\u0275\u0275advance(5),e.\u0275\u0275textInterpolate(t.multisiteSetupForm.get("selectedRealm").value)}}function ap(n,i){if(1&n&&(e.\u0275\u0275elementStart(0,"div")(1,"div",82)(2,"label",127),e.\u0275\u0275i18n(3,60),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(4,"div",128)(5,"b"),e.\u0275\u0275text(6),e.\u0275\u0275elementEnd()()(),e.\u0275\u0275elementStart(7,"div",82)(8,"label",127),e.\u0275\u0275i18n(9,61),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(10,"div",128)(11,"b"),e.\u0275\u0275text(12),e.\u0275\u0275elementEnd()()()()),2&n){const t=e.\u0275\u0275nextContext(2);e.\u0275\u0275advance(6),e.\u0275\u0275textInterpolate(t.selectedCluster),e.\u0275\u0275advance(6),e.\u0275\u0275textInterpolate(t.multisiteSetupForm.get("replicationZoneName").value)}}function rp(n,i){if(1&n&&e.\u0275\u0275template(0,ap,13,2,"div",81),2&n){const t=e.\u0275\u0275nextContext();e.\u0275\u0275property("ngIf",t.isMultiClusterConfigured&&!t.stepsToSkip["Select Cluster"])}}var un=function(n){return n.HTTP="http",n.HTTPS="https",n}(un||{}),qt=function(n){return n.NewRealm="newRealm",n.ExistingRealm="existingRealm",n}(qt||{});let ro=(()=>{class n extends d.BaseModal{constructor(t,o,_,a,r,s,c,u,p,T,f,G,S,O){super(),this.wizardStepsService=t,this.activeModal=o,this.actionLabels=_,this.rgwDaemonService=a,this.multiClusterService=r,this.rgwMultisiteService=s,this.rgwRealmService=c,this.notificationService=u,this.route=p,this.summaryService=T,this.location=f,this.cdr=G,this.mgrModuleService=S,this.zone=O,this.stepTitles=dn.map(C=>({label:C})),this.stepsToSkip={},this.daemons=[],this.selectedCluster="",this.clusterDetailsArray=[],this.isMultiClusterConfigured=!1,this.loading=!1,this.icons=y.FI,this.setupCompleted=!1,this.showConfigType=!1,this.realmList=[],this.pageURL="rgw/multisite/configuration",this.currentStepSub=this.wizardStepsService.getCurrentStep().subscribe(C=>{this.currentStep=C}),this.currentStep.stepIndex=0,this.createForm(),this.rgwEndpoints={value:[],options:[],messages:new sn.z({empty:"There are no endpoints.",filter:"Select endpoints"})}}ngOnInit(){this.open="modal"===this.route.outlet,this.loadRGWEndpoints(),this.multiClusterService.getCluster().subscribe(t=>{const o=t.current_url;this.clusterDetailsArray=Object.values(t.config).flat().filter(_=>_.url!==o),this.isMultiClusterConfigured=this.clusterDetailsArray.length>0,this.stepTitles=(this.isMultiClusterConfigured?dn:ao).map((_,a)=>({label:_,onClick:()=>this.currentStep.stepIndex=a})),this.wizardStepsService.setTotalSteps(this.stepTitles.length),this.selectedCluster=this.isMultiClusterConfigured?this.clusterDetailsArray[0].name:null}),this.summaryService.subscribe(t=>{this.zone.run(()=>{this.executingTask=t.executing_tasks.find(o=>o.name.includes("progress/Multisite-Setup")),this.cdr.detectChanges()})}),this.stepTitles.forEach(t=>{this.stepsToSkip[t.label]=!1}),this.rgwRealmService.list().subscribe(t=>{this.realmList=t,this.showConfigType=this.realmList.length>0,this.showConfigType&&(this.multisiteSetupForm.get("selectedRealm")?.setValue(this.realmList[0]),this.cdr.detectChanges())}),this.rgwMultisiteService.getRgwModuleStatus().subscribe(t=>{this.rgwModuleStatus=t})}loadRGWEndpoints(){this.rgwDaemonService.list().pipe((0,K.switchMap)(t=>(this.daemons=t,this.fetchDaemonStats(t)))).subscribe(t=>{this.populateRGWEndpoints(t)})}fetchDaemonStats(t){const o=t.map(_=>this.rgwDaemonService.get(_.id).pipe((0,K.map)(a=>({hostname:_.server_hostname,port:_.port,frontendConfig:a?.rgw_metadata?.["frontend_config#0"]||""}))));return(0,U.forkJoin)(o)}populateRGWEndpoints(t){this.rgwEndpoints.value=t.map(o=>`${o.frontendConfig.includes("ssl_port")?un.HTTPS:un.HTTP}://${o.hostname}:${o.port}`),this.rgwEndpoints.options=this.rgwEndpoints.value.map(o=>new Gt.O(!1,o,"")),this.cdr.detectChanges()}createForm(){this.multisiteSetupForm=new Me.$({realmName:new l.UntypedFormControl("default_realm",{validators:[l.Validators.required]}),zonegroupName:new l.UntypedFormControl("default_zonegroup",{validators:[l.Validators.required]}),zonegroup_endpoints:new l.UntypedFormControl(null,[l.Validators.required]),zoneName:new l.UntypedFormControl("default_zone",{validators:[l.Validators.required]}),zone_endpoints:new l.UntypedFormControl(null,{validators:[l.Validators.required]}),username:new l.UntypedFormControl("default_system_user",{validators:[l.Validators.required]}),cluster:new l.UntypedFormControl(null,{validators:[l.Validators.required]}),replicationZoneName:new l.UntypedFormControl("new_replicated_zone",{validators:[l.Validators.required]}),configType:new l.UntypedFormControl(qt.NewRealm,{}),selectedRealm:new l.UntypedFormControl(null,{})}),this.isMultiClusterConfigured||(this.exportTokenForm=new Me.$({}))}showSubmitButtonLabel(){return this.wizardStepsService.isLastStep()?this.setupCompleted?"Close":this.isMultiClusterConfigured?"Configure Multi-Site":"Export Multi-Site token":"Next"}showCancelButtonLabel(){return this.wizardStepsService.isFirstStep()?this.actionLabels.CANCEL:this.actionLabels.BACK}onNextStep(){this.wizardStepsService.isLastStep()?this.setupCompleted?this.closeModal():this.onSubmit():this.wizardStepsService.moveToNextStep(),this.wizardStepsService.getCurrentStep().subscribe(t=>{this.currentStep=t,2===this.currentStep.stepIndex&&this.isMultiClusterConfigured&&(this.stepsToSkip["Select Cluster"]=!1)})}onSubmit(){this.loading=!0;const t=()=>{this.cdr.detectChanges();const o=this.multisiteSetupForm.getRawValue(),_=o.realmName,a=o.zonegroupName,r=this.rgwEndpoints.value.join(","),s=o.zoneName,c=this.rgwEndpoints.value.join(","),u=o.username;if(!this.isMultiClusterConfigured||this.stepsToSkip["Select Cluster"])this.rgwMultisiteService.setUpMultisiteReplication(_,a,r,s,c,u).subscribe(p=>{this.setupCompleted=!0,this.rgwMultisiteService.setRestartGatewayMessage(!1),this.loading=!1,this.realms=p,this.showSuccessNotification()});else{const p=o.cluster,T=o.replicationZoneName;let f="";this.multisiteSetupForm.get("configType").value===qt.ExistingRealm&&(f=this.multisiteSetupForm.get("selectedRealm").value),this.rgwMultisiteService.setUpMultisiteReplication(_,a,r,s,c,u,p,T,this.clusterDetailsArray,f).subscribe(()=>{this.setupCompleted=!0,this.rgwMultisiteService.setRestartGatewayMessage(!1),this.loading=!1,this.showSuccessNotification()},()=>{this.multisiteSetupForm.setErrors({cdSubmitButton:!0})})}};if(this.rgwModuleStatus)t();else{this.mgrModuleService.updateModuleState("rgw",!1,null,"","",!1,"RGW module is being enabled. Waiting for the system to reconnect...");const o=this.mgrModuleService.updateCompleted$.subscribe(()=>{o.unsubscribe(),t()})}}showSuccessNotification(){this.notificationService.show(w._.success,"Multi-site setup completed successfully.")}onPreviousStep(){this.wizardStepsService.isFirstStep()?this.location.back():this.wizardStepsService.moveToPreviousStep()}onSkip(){this.stepsToSkip[this.stepTitles[this.currentStep.stepIndex].label]=!0,this.onNextStep()}closeModal(){this.location.back()}onConfigTypeChange(){this.multisiteSetupForm.get("configType")?.value===qt.ExistingRealm?(this.stepTitles=j1.map(o=>({label:o})),this.stepTitles.forEach((o,_)=>{o.onClick=()=>this.currentStep.stepIndex=_})):this.stepTitles=this.isMultiClusterConfigured?dn.map(o=>({label:o})):ao.map(o=>({label:o})),this.wizardStepsService.setTotalSteps(this.stepTitles.length)}static{this.\u0275fac=function(o){return new(o||n)(e.\u0275\u0275directiveInject(Z1.m),e.\u0275\u0275directiveInject(v.NgbActiveModal),e.\u0275\u0275directiveInject(P.Ss),e.\u0275\u0275directiveInject($e.y),e.\u0275\u0275directiveInject(K1.J),e.\u0275\u0275directiveInject(xe.A),e.\u0275\u0275directiveInject(Mt.$),e.\u0275\u0275directiveInject(ne.J),e.\u0275\u0275directiveInject(Q.ActivatedRoute),e.\u0275\u0275directiveInject(q1.E),e.\u0275\u0275directiveInject(E.Location),e.\u0275\u0275directiveInject(e.ChangeDetectorRef),e.\u0275\u0275directiveInject(io.a),e.\u0275\u0275directiveInject(e.NgZone))}}static{this.\u0275cmp=e.\u0275\u0275defineComponent({type:n,selectors:[["cd-rgw-multisite-wizard"]],features:[e.\u0275\u0275InheritDefinitionFeature],decls:45,vars:19,consts:()=>{let t,o,_,a,r,s,c,u,p,T,f,G,S,O,C,b,N,k,z,$,X,B,V,Z,F,I,te,J,j,ee,D,ie,W,x,de,ue,pe,me,Te,ge,Ee,le,Re,Ce,fe,Se,R,Ze,ve,Ke,qe;return t="Set up Multi-site Replication",o="" + "\ufffd0\ufffd" + "",_="" + "\ufffd0\ufffd" + " " + "\ufffd*26:1\ufffd\ufffd#1:1\ufffd" + "" + "\ufffd/#1:1\ufffd\ufffd/*26:1\ufffd" + "",a="Realm configuration mode",r="Create new realm/zonegroup/zone",s="Select existing realm",c="Select Realm",u="Realm Name",p="Enter a unique name for the Realm. The Realm is a logical grouping of all your Zonegroups.",T="Zone Group Name",f="Enter a name for the Zonegroup. Zonegroup will help you identify and manage the group of zones.",G="Zonegroup Endpoints",S="Select the endpoints for the Zonegroup. Endpoints are the URLs or IP addresses from which the rgw gateways in that zonegroup can be accessed. You can select multiple endpoints in case you have multiple rgw gateways in a zonegroup",O="This field is required.",C="This realm name is already in use. Choose a unique name.",b="This field is required.",N="This zonegroup name is already in use. Choose a unique name.",k="White spaces at the beginning and end will be trimmed",z="Zone Name",$="Enter a unique name for the Zone. A Zone represents a distinct data center or geographical location within a Zonegroup.",X="Zone Endpoints",B="Select the endpoints for the Zone. Endpoints are the URLs or IP addresses from which the rgw gateways in that zone can be accessed. You can select multiple endpoints in case you have multiple rgw gateways in a zone",V="Username",Z="Specify the username for the system user.",F="This user will be created automatically as part of the process, and it will have the necessary permissions to manage and synchronize resources across zones.",I="This field is required.",te="This zone name is already in use. Choose a unique name.",J="This field is required.",j="This username is already in use. Choose a unique name.",ee="Replication Cluster",D="Choose the cluster where you want to apply this multisite configuration. The selected cluster will integrate the defined Realm, Zonegroup, and Zones, enabling data synchronization and management across the multisite setup.",ie="Before submitting this form, please verify that the selected cluster has an active RGW (Rados Gateway) service running.",W="Replication Zone Name",x="Replication zone represents the zone to be created in the replication cluster where your data will be replicated.",de="This field is required.",ue="Skip",pe=" Multi-site replication setup is complete. ",me="Realm Name",Te="Name of the realm that will be involved in replication.",ge="Token",Ee="This field displays the token needed to import the multisite configuration into a secondary cluster. Copy this token securely and use it on the secondary cluster to replicate the current multisite setup. Ensure that the token is handled securely to prevent unauthorized access.",le=" During the automation process, the RGW module will be enabled on both the source and target clusters, if it is not already enabled. This action may cause a temporary downtime (5-10 seconds) on each cluster. ",Re="Realm Name:",Ce="Zonegroup Name:",fe="Zonegroup Endpoints:",Se="Zone Name:",R="Zone Endpoints:",Ze="Username:",ve="Selected Realm:",Ke="Selected Replication Cluster:",qe="Replication Zone Name:",[["formDir","ngForm"],["newRealmReviewTemplate",""],["replicationTemplate",""],["nonMultiClusterTemplate",""],["loadingTemplate",""],["progressCompleteTemplate",""],["progressTemplate",""],["exportTokenTemplate",""],["reviewTemplate",""],["newRealmInfo",""],["existingRealmInfo",""],["replicationInfo",""],t,o,_,a,r,s,c,u,p,T,f,G,S,O,C,b,N,z,$,X,B,V,Z,F,I,te,J,j,ee,D,ie,W,x,de,ue,pe,me,Te,ge,Ee,le,Re,Ce,fe,Se,R,Ze,ve,Ke,qe,["size","lg",3,"overlaySelected","open","hasScrollingContent"],[3,"closeSelect"],["cdsModalHeaderHeading","","data-testid","rgw-multisite-wizard-header"],["cdsModalContent",""],["cdsRow",""],["cdsCol","",1,"indicator-wrapper",3,"columnNumbers"],[3,"stepsTitle"],["cdsCol","",3,"columnNumbers"],["novalidate","",3,"formGroup"],[3,"ngSwitch"],["class","ms-5",4,"ngSwitchCase"],[4,"ngSwitchCase"],["cdsButton","secondary","name","skip-cluster-selection","aria-label","Skip",3,"click",4,"ngIf"],["cdsButton","secondary",3,"click"],["cdsButton","primary","aria-label","Next",3,"click","disabled"],["size","sm",3,"isActive","overlay",4,"ngIf"],[1,"ms-5"],["type","info","spacingClass","mb-3"],["class","form-group row",4,"ngIf"],[4,"ngIf"],[1,"form-group","row"],["for","configType",1,"cd-col-form-label","required"],[1,"col-md-auto","custom-checkbox","form-check-inline","ms-3"],["formControlName","configType","id","newRealm","value","newRealm","type","radio",1,"form-check-input",3,"change"],["for","newRealm",1,"custom-check-label"],[1,"col-md-auto","custom-checkbox","form-check-inline"],["formControlName","configType","id","existingRealm","type","radio","value","existingRealm",1,"form-check-input",3,"change"],["for","existingRealm",1,"custom-check-label"],["for","selectedRealm",1,"cd-col-form-label"],[1,"cd-col-form-input"],["id","selectedRealm","formControlName","selectedRealm",1,"form-select"],[3,"value",4,"ngFor","ngForOf"],[3,"value"],["for","realmName",1,"cd-col-form-label","required"],["type","text","id","realmName","formControlName","realmName",1,"form-control"],["class","invalid-feedback",4,"ngIf"],["for","zonegroupName",1,"cd-col-form-label","required"],["type","text","id","zonegroupName","formControlName","zonegroupName",1,"form-control"],["for","zonegroup_endpoints",1,"cd-col-form-label","required"],["id","zonegroup_endpoints",3,"data","options","customBadges"],[1,"invalid-feedback"],["class","ms-5",4,"ngIf"],["type","text","id","zoneName","formControlName","zoneName",1,"form-control"],["for","zone_endpoints",1,"cd-col-form-label","required"],["id","zone_endpoints",3,"data","options","customBadges"],["for","username",1,"cd-col-form-label","required"],["type","text","id","username","formControlName","username","ngbTooltip",k,"cdTrim","",1,"form-control"],["type","info",3,"showTitle"],[4,"ngTemplateOutlet"],[4,"ngIf","ngIfElse"],["for","cluster",1,"cd-col-form-label","required"],["id","cluster","formControlName","cluster","name","cluster",1,"form-select",3,"ngModelChange","ngModel"],["for","replicationZoneName",1,"cd-col-form-label","required"],["type","text","id","replicationZoneName","name","replicationZoneName","formControlName","replicationZoneName",1,"form-control"],["cdsButton","secondary","name","skip-cluster-selection","aria-label","Skip",3,"click"],["size","sm",3,"isActive","overlay"],[1,"text-center","text-success"],[3,"value","description","subDescription"],[4,"ngFor","ngForOf"],["for","realmName",1,"cd-col-form-label"],["id","realmName","name","realmName","type","text","readonly","",3,"value"],["for","token",1,"cd-col-form-label"],["id","realmToken","name","realmToken","type","text","readonly","",1,"me-2","mb-4",3,"value"],[3,"source","byId"],["type","warning",3,"showTitle"],[1,"cd-col-form-label"],[1,"cd-col-form-input","mt-2","text-muted"],["id","realmName"],["id","zonegroupName"],["id","zoneName"]]},template:function(o,_){if(1&o){const a=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"cds-modal",62),e.\u0275\u0275listener("overlaySelected",function(){return e.\u0275\u0275restoreView(a),e.\u0275\u0275resetView(_.closeModal())}),e.\u0275\u0275elementStart(1,"cds-modal-header",63),e.\u0275\u0275listener("closeSelect",function(){return e.\u0275\u0275restoreView(a),e.\u0275\u0275resetView(_.closeModal())}),e.\u0275\u0275elementStart(2,"h3",64),e.\u0275\u0275i18n(3,12),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(4,"div",65)(5,"div",66)(6,"div",67),e.\u0275\u0275element(7,"cd-wizard",68),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(8,"div",69)(9,"form",70,0),e.\u0275\u0275elementContainerStart(11,71),e.\u0275\u0275template(12,cu,6,3,"div",72)(13,Ru,3,2,"ng-container",73)(14,Ou,3,2,"ng-container",73)(15,Nu,1,1,"ng-template",null,1,e.\u0275\u0275templateRefExtractor)(17,bu,21,4,"ng-template",null,2,e.\u0275\u0275templateRefExtractor)(19,Du,2,1,"div",72),e.\u0275\u0275elementContainerEnd(),e.\u0275\u0275elementEnd()()()(),e.\u0275\u0275elementStart(20,"cds-modal-footer"),e.\u0275\u0275template(21,Wu,2,0,"button",74),e.\u0275\u0275elementStart(22,"button",75),e.\u0275\u0275listener("click",function(){return e.\u0275\u0275restoreView(a),e.\u0275\u0275resetView(_.onPreviousStep())}),e.\u0275\u0275i18n(23,13),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(24,"button",76),e.\u0275\u0275listener("click",function(){return e.\u0275\u0275restoreView(a),e.\u0275\u0275resetView(_.onNextStep())}),e.\u0275\u0275i18nStart(25,14),e.\u0275\u0275template(26,xu,2,2,"cds-loading",77),e.\u0275\u0275i18nEnd(),e.\u0275\u0275elementEnd()()(),e.\u0275\u0275template(27,zu,1,2,"ng-template",null,3,e.\u0275\u0275templateRefExtractor)(29,Xu,1,1,"ng-template",null,4,e.\u0275\u0275templateRefExtractor)(31,Vu,1,2,"ng-template",null,5,e.\u0275\u0275templateRefExtractor)(33,Zu,1,3,"ng-template",null,6,e.\u0275\u0275templateRefExtractor)(35,ju,1,1,"ng-template",null,7,e.\u0275\u0275templateRefExtractor)(37,op,6,4,"ng-template",null,8,e.\u0275\u0275templateRefExtractor)(39,_p,36,6,"ng-template",null,9,e.\u0275\u0275templateRefExtractor)(41,ip,6,1,"ng-template",null,10,e.\u0275\u0275templateRefExtractor)(43,rp,1,1,"ng-template",null,11,e.\u0275\u0275templateRefExtractor)}2&o&&(e.\u0275\u0275property("open",_.open)("hasScrollingContent",!0),e.\u0275\u0275advance(6),e.\u0275\u0275property("columnNumbers",e.\u0275\u0275pureFunction0(17,eu)),e.\u0275\u0275advance(),e.\u0275\u0275property("stepsTitle",_.stepTitles),e.\u0275\u0275advance(),e.\u0275\u0275property("columnNumbers",e.\u0275\u0275pureFunction0(18,tu)),e.\u0275\u0275advance(),e.\u0275\u0275property("formGroup",_.multisiteSetupForm),e.\u0275\u0275advance(2),e.\u0275\u0275property("ngSwitch",null==_.currentStep?null:_.currentStep.stepIndex),e.\u0275\u0275advance(),e.\u0275\u0275property("ngSwitchCase",0),e.\u0275\u0275advance(),e.\u0275\u0275property("ngSwitchCase",1),e.\u0275\u0275advance(),e.\u0275\u0275property("ngSwitchCase",2),e.\u0275\u0275advance(5),e.\u0275\u0275property("ngSwitchCase",3),e.\u0275\u0275advance(2),e.\u0275\u0275property("ngIf","Select Cluster"===_.stepTitles[_.currentStep.stepIndex].label&&"newRealm"===_.multisiteSetupForm.get("configType").value),e.\u0275\u0275advance(),e.\u0275\u0275attribute("aria-label",_.showCancelButtonLabel()),e.\u0275\u0275advance(),e.\u0275\u0275i18nExp(_.showCancelButtonLabel()),e.\u0275\u0275i18nApply(23),e.\u0275\u0275advance(),e.\u0275\u0275property("disabled",_.loading),e.\u0275\u0275advance(2),e.\u0275\u0275property("ngIf",_.loading),e.\u0275\u0275i18nExp(_.showSubmitButtonLabel()),e.\u0275\u0275i18nApply(25))},dependencies:[E.NgForOf,E.NgIf,E.NgTemplateOutlet,E.NgSwitch,E.NgSwitchCase,Lt.U,Pe.m,_t.N,Y1.t,ae.O,Q1.X,J1.c,Y.S,Be.a,We.C,oe.E,l.\u0275NgNoValidate,l.NgSelectOption,l.\u0275NgSelectMultipleOption,l.DefaultValueAccessor,l.SelectControlValueAccessor,l.RadioControlValueAccessor,l.NgControlStatus,l.NgControlStatusGroup,l.FormGroupDirective,l.FormControlName,v.NgbTooltip,d.Modal,d.ModalHeader,d.ModalFooter,d.ModalContent,d.ModalHeaderHeading,d.ColumnDirective,d.RowDirective,d.Button,d.Loading,d.Option],styles:["cds-loading[_ngcontent-%COMP%]{margin-left:.5rem}"]})}}return n})();var lo=g(73308);class pn{constructor(i=!1,t){this.customBadges=i,this.data={selected:[],available:[],validators:[l.Validators.pattern("[A-Za-z0-9_-]+|\\*"),l.Validators.maxLength(50)],messages:new sn.z({empty:"No zones added",customValidations:{pattern:"Allowed characters '-_a-zA-Z0-9|*'",maxlength:"Maximum length is 50 characters"},filter:"" + t + "",add:"Add zone"})}}}const lp=n=>({name:"zones",zone:n}),sp=n=>({name:"source_zone",zones:n}),cp=n=>({name:"destination_zone",zones:n});function dp(n,i){1&n&&(e.\u0275\u0275elementStart(0,"span",32),e.\u0275\u0275i18n(1,7),e.\u0275\u0275elementEnd())}function up(n,i){1&n&&e.\u0275\u0275elementContainer(0)}function pp(n,i){if(1&n&&(e.\u0275\u0275elementContainerStart(0),e.\u0275\u0275elementStart(1,"div",22)(2,"label",33),e.\u0275\u0275elementContainerStart(3),e.\u0275\u0275i18n(4,8),e.\u0275\u0275elementContainerEnd(),e.\u0275\u0275elementStart(5,"cd-helper")(6,"span"),e.\u0275\u0275i18n(7,9),e.\u0275\u0275elementEnd()()(),e.\u0275\u0275elementStart(8,"div",24),e.\u0275\u0275template(9,up,1,0,"ng-container",34),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementContainerEnd()),2&n){const t=e.\u0275\u0275nextContext(),o=e.\u0275\u0275reference(28);e.\u0275\u0275advance(9),e.\u0275\u0275property("ngTemplateOutlet",o)("ngTemplateOutletContext",e.\u0275\u0275pureFunction1(2,lp,t.zones))}}function mp(n,i){1&n&&e.\u0275\u0275elementContainer(0)}function Tp(n,i){1&n&&e.\u0275\u0275elementContainer(0)}function gp(n,i){if(1&n&&(e.\u0275\u0275elementStart(0,"div",22)(1,"label",35),e.\u0275\u0275i18n(2,10),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(3,"div",24),e.\u0275\u0275template(4,mp,1,0,"ng-container",34),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(5,"div",22)(6,"label",36),e.\u0275\u0275i18n(7,11),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(8,"div",24),e.\u0275\u0275template(9,Tp,1,0,"ng-container",34),e.\u0275\u0275elementEnd()()),2&n){const t=e.\u0275\u0275nextContext(),o=e.\u0275\u0275reference(30);e.\u0275\u0275advance(4),e.\u0275\u0275property("ngTemplateOutlet",o)("ngTemplateOutletContext",e.\u0275\u0275pureFunction1(4,sp,t.zones)),e.\u0275\u0275advance(5),e.\u0275\u0275property("ngTemplateOutlet",o)("ngTemplateOutletContext",e.\u0275\u0275pureFunction1(6,cp,t.zones))}}function Ep(n,i){if(1&n&&(e.\u0275\u0275namespaceSVG(),e.\u0275\u0275elementStart(0,"svg",39),e.\u0275\u0275i18nAttributes(1,16),e.\u0275\u0275elementEnd()),2&n){const t=e.\u0275\u0275nextContext().name,o=e.\u0275\u0275nextContext();e.\u0275\u0275i18nExp(null==t?null:t.split("_").join(" ")),e.\u0275\u0275i18nApply(1),e.\u0275\u0275property("cdsIcon",o.icons.warning)("size",o.icons.size16)}}function Rp(n,i){if(1&n&&(e.\u0275\u0275elementStart(0,"span",32),e.\u0275\u0275i18n(1,12),e.\u0275\u0275elementEnd()),2&n){const t=e.\u0275\u0275nextContext().name;e.\u0275\u0275advance(),e.\u0275\u0275i18nExp(null==t?null:t.split("_").join(" ")),e.\u0275\u0275i18nApply(1)}}function Cp(n,i){if(1&n){const t=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"cd-select-badges",37),e.\u0275\u0275listener("selection",function(){e.\u0275\u0275restoreView(t);const _=e.\u0275\u0275nextContext();return e.\u0275\u0275resetView(_.zoneSelection())}),e.\u0275\u0275elementEnd(),e.\u0275\u0275template(1,Ep,2,3,"svg",38)(2,Rp,2,1,"span",28)}if(2&n){const t=i.name,o=i.zone,_=e.\u0275\u0275nextContext(),a=e.\u0275\u0275reference(7);e.\u0275\u0275property("id",t)("name",t)("customBadges",o.customBadges)("customBadgeValidators",o.data.validators)("messages",o.data.messages)("data",o.data.selected)("options",o.data.available),e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf",o.data.selected.length<=0),e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf",_.currentFormGroupContext.showError(t,a,"required"))}}function fp(n,i){1&n&&(e.\u0275\u0275elementStart(0,"option",43),e.\u0275\u0275i18n(1,13),e.\u0275\u0275elementEnd()),2&n&&e.\u0275\u0275property("ngValue",null)}function Sp(n,i){if(1&n&&(e.\u0275\u0275elementStart(0,"option",43),e.\u0275\u0275i18n(1,14),e.\u0275\u0275elementEnd()),2&n){const t=e.\u0275\u0275nextContext().name;e.\u0275\u0275property("ngValue",null),e.\u0275\u0275advance(),e.\u0275\u0275i18nExp(t.split("_").join(" ")),e.\u0275\u0275i18nApply(1)}}function Fp(n,i){if(1&n&&(e.\u0275\u0275elementStart(0,"option",44),e.\u0275\u0275text(1),e.\u0275\u0275elementEnd()),2&n){const t=i.$implicit;e.\u0275\u0275property("value",t.name),e.\u0275\u0275advance(),e.\u0275\u0275textInterpolate(t.name)}}function Mp(n,i){1&n&&(e.\u0275\u0275elementStart(0,"span",32),e.\u0275\u0275i18n(1,15),e.\u0275\u0275elementEnd())}function Pp(n,i){if(1&n){const t=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"select",40),e.\u0275\u0275listener("change",function(_){const a=e.\u0275\u0275restoreView(t).name,r=e.\u0275\u0275nextContext();return e.\u0275\u0275resetView(r.onChangeZoneDropdown(a,_))}),e.\u0275\u0275template(1,fp,2,1,"option",41)(2,Sp,2,2,"option",41)(3,Fp,2,2,"option",42),e.\u0275\u0275elementEnd(),e.\u0275\u0275template(4,Mp,2,0,"span",28)}if(2&n){const t=i.name,o=i.zones,_=e.\u0275\u0275nextContext(),a=e.\u0275\u0275reference(7);e.\u0275\u0275property("id",t)("name",t)("autofocus",_.editing),e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf",0==o.data.available.length),e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf",o.data.available.length>0),e.\u0275\u0275advance(),e.\u0275\u0275property("ngForOf",o.data.available),e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf",_.currentFormGroupContext.showError(t,a,"required"))}}let Ip=(()=>{class n{constructor(t,o,_,a,r,s,c){this.activeModal=t,this.actionLabels=o,this.notificationService=_,this.rgwDaemonService=a,this.rgwZonegroupService=r,this.rgwMultisiteService=s,this.succeededLabels=c,this.editing=!1,this.flowType=H.do,this.icons=y.FI,this.zones=new pn(!1,"Filter Zones")}ngOnInit(){"edit"===this.action&&(this.editing=!0),this.groupType===H.do.symmetrical?(this.createSymmetricalFlowForm(),this.currentFormGroupContext=A().cloneDeep(this.syncPolicySymmetricalFlowForm)):this.groupType===H.do.directional&&(this.createDirectionalFlowForm(),this.currentFormGroupContext=A().cloneDeep(this.syncPolicyDirectionalFlowForm)),this.currentFormGroupContext.get("bucket_name").disable(),this.editing&&(this.currentFormGroupContext.patchValue({flow_id:this.flowSelectedRow.id,bucket_name:this.groupExpandedRow.bucket||""}),this.currentFormGroupContext.get("flow_id").disable()),this.rgwDaemonService.selectedDaemon$.pipe((0,K.switchMap)(t=>{if(t){const o=new H.Oe;return o.name=t?.zonegroup_name,this.rgwZonegroupService.get(o).pipe((0,K.catchError)(()=>(0,U.of)([])))}return(0,U.of)([])})).subscribe(t=>{if(t&&t?.zones?.length>0){const o=[];t.zones.forEach(_=>{o.push(new Gt.O(!1,_.name,""))}),this.zones.data.available=[...o],this.editing&&(this.groupType===H.do.symmetrical&&(this.zones.data.selected=[...this.flowSelectedRow.zones]),this.zoneSelection())}})}createSymmetricalFlowForm(){this.syncPolicySymmetricalFlowForm=new Me.$({...this.commonFormControls(H.do.symmetrical),zones:new l.UntypedFormControl([],{validators:[l.Validators.required]})})}createDirectionalFlowForm(){this.syncPolicyDirectionalFlowForm=new Me.$({...this.commonFormControls(H.do.directional),source_zone:new l.UntypedFormControl("",{validators:[l.Validators.required]}),destination_zone:new l.UntypedFormControl("",{validators:[l.Validators.required]})})}onChangeZoneDropdown(t,o){const _=o.target.value;this.currentFormGroupContext.get(t).setValue(_)}commonFormControls(t){return{bucket_name:new l.UntypedFormControl(this.groupExpandedRow?.bucket),group_id:new l.UntypedFormControl(this.groupExpandedRow?.groupName,{validators:[l.Validators.required]}),flow_id:new l.UntypedFormControl("",{validators:[l.Validators.required]}),flow_type:new l.UntypedFormControl(t,{validators:[l.Validators.required]})}}zoneSelection(){this.groupType===H.do.symmetrical&&this.currentFormGroupContext.patchValue({zones:this.zones.data.selected})}getZoneData(t,o){return t.filter(_=>!o.includes(_))}assignZoneValue(t,o){return t.length>0?t:o}submit(){const t={added:[],removed:[]};if(!this.currentFormGroupContext.invalid){if(this.currentFormGroupContext.pending)return void this.currentFormGroupContext.setErrors({cdSubmitButton:!0});this.groupType==H.do.symmetrical&&(this.editing&&(t.removed=this.getZoneData(this.flowSelectedRow.zones,this.zones.data.selected),t.added=this.getZoneData(this.zones.data.selected,this.flowSelectedRow.zones)),t.added=this.assignZoneValue(t.added,this.zones.data.selected)),this.rgwMultisiteService.createEditSyncFlow({...this.currentFormGroupContext.getRawValue(),zones:t}).subscribe(()=>{this.notificationService.show(w._.success,"" + (this.editing ? this.succeededLabels.EDITED : this.succeededLabels.CREATED) + " Sync Flow '" + this.currentFormGroupContext.getValue("flow_id") + "'"),this.activeModal.close(w._.success)},()=>{this.currentFormGroupContext.setErrors({cdSubmitButton:!0}),this.activeModal.dismiss()})}}static{this.\u0275fac=function(o){return new(o||n)(e.\u0275\u0275directiveInject(v.NgbActiveModal),e.\u0275\u0275directiveInject(P.Ss),e.\u0275\u0275directiveInject(ne.J),e.\u0275\u0275directiveInject($e.y),e.\u0275\u0275directiveInject(ke.Z),e.\u0275\u0275directiveInject(xe.A),e.\u0275\u0275directiveInject(P.Vv))}}static{this.\u0275cmp=e.\u0275\u0275defineComponent({type:n,selectors:[["cd-rgw-multisite-sync-flow-modal"]],decls:31,vars:17,consts:()=>{let t,o,_,a,r,s,c,u,p,T,f,G,S,O;return t="Bucket Name...",o="" + "\ufffd0\ufffd" + " " + "\ufffd1\ufffd" + " Flow",_="Name",a="Bucket Name",r="The bucket with chosen name does not exist.",s="Zones",c="Flow need to be associated with atleast one zone",u="Source Zone ",p="Destination Zone",T="Flow should be associated with " + "\ufffd0\ufffd" + "",f="" + "\ufffd0\ufffd" + " selection is required! ",G="Loading...",S="-- Select " + "\ufffd0\ufffd" + " --",O="This field is required.",[["frm","ngForm"],["directionalFlow",""],["zoneMultiSelect",""],["sourceAndDestZone",""],o,_,a,r,s,c,u,p,f,G,S,O,["title",T],[3,"modalRef"],[1,"modal-title"],[1,"modal-content"],["name","flowForm","novalidate","",3,"formGroup"],[1,"modal-body"],[1,"form-group","row"],["for","flow_id",1,"cd-col-form-label","required"],[1,"cd-col-form-input"],["type","text","placeholder","Flow Name...","id","flow_id","name","flow_id","formControlName","flow_id",1,"form-control"],["for","bucket",1,"cd-col-form-label"],["id","bucket","name","bucket","type","text","placeholder",t,"formControlName","bucket_name",1,"form-control"],["class","invalid-feedback",4,"ngIf"],[4,"ngIf","ngIfElse"],[1,"modal-footer"],[3,"submitActionEvent","form","submitText"],[1,"invalid-feedback"],["for","zones",1,"cd-col-form-label","required"],[4,"ngTemplateOutlet","ngTemplateOutletContext"],["for","source_zone",1,"cd-col-form-label","required"],["for","destination_zone",1,"cd-col-form-label","required"],[3,"selection","id","name","customBadges","customBadgeValidators","messages","data","options"],["class","cds-warning-color",3,"cdsIcon","size","title",4,"ngIf"],[1,"cds-warning-color",3,"cdsIcon","size",6,"title"],[1,"form-select",3,"change","id","name","autofocus"],[3,"ngValue",4,"ngIf"],[3,"value",4,"ngFor","ngForOf"],[3,"ngValue"],[3,"value"]]},template:function(o,_){if(1&o){const a=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"cd-modal",17),e.\u0275\u0275elementContainerStart(1,18),e.\u0275\u0275i18n(2,4),e.\u0275\u0275pipe(3,"titlecase"),e.\u0275\u0275pipe(4,"upperFirst"),e.\u0275\u0275elementContainerEnd(),e.\u0275\u0275elementContainerStart(5,19),e.\u0275\u0275elementStart(6,"form",20,0)(8,"div",21)(9,"div",22)(10,"label",23),e.\u0275\u0275i18n(11,5),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(12,"div",24),e.\u0275\u0275element(13,"input",25),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(14,"div",22)(15,"label",26),e.\u0275\u0275i18n(16,6),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(17,"div",24),e.\u0275\u0275element(18,"input",27),e.\u0275\u0275template(19,dp,2,0,"span",28),e.\u0275\u0275elementEnd()(),e.\u0275\u0275template(20,pp,10,4,"ng-container",29)(21,gp,10,8,"ng-template",null,1,e.\u0275\u0275templateRefExtractor),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(23,"div",30)(24,"cd-form-button-panel",31),e.\u0275\u0275pipe(25,"titlecase"),e.\u0275\u0275pipe(26,"upperFirst"),e.\u0275\u0275listener("submitActionEvent",function(){return e.\u0275\u0275restoreView(a),e.\u0275\u0275resetView(_.submit())}),e.\u0275\u0275elementEnd()()(),e.\u0275\u0275elementContainerEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275template(27,Cp,3,9,"ng-template",null,2,e.\u0275\u0275templateRefExtractor)(29,Pp,5,7,"ng-template",null,3,e.\u0275\u0275templateRefExtractor)}if(2&o){const a=e.\u0275\u0275reference(7),r=e.\u0275\u0275reference(22);e.\u0275\u0275property("modalRef",_.activeModal),e.\u0275\u0275advance(4),e.\u0275\u0275i18nExp(e.\u0275\u0275pipeBind1(3,9,_.action))(e.\u0275\u0275pipeBind1(4,11,_.groupType)),e.\u0275\u0275i18nApply(2),e.\u0275\u0275advance(2),e.\u0275\u0275property("formGroup",_.currentFormGroupContext),e.\u0275\u0275advance(13),e.\u0275\u0275property("ngIf",_.currentFormGroupContext.showError("bucket_name",a,"bucketNameNotAllowed")),e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf",_.groupType==_.flowType.symmetrical)("ngIfElse",r),e.\u0275\u0275advance(4),e.\u0275\u0275property("form",_.currentFormGroupContext)("submitText",e.\u0275\u0275pipeBind1(25,13,_.action)+" "+e.\u0275\u0275pipeBind1(26,15,_.groupType)+" Flow")}},dependencies:[E.NgForOf,E.NgIf,E.NgTemplateOutlet,Pt.m,Lt.U,Xe.z,_e.e,Ct.B,Y.S,Be.a,We.C,oe.E,l.\u0275NgNoValidate,l.NgSelectOption,l.\u0275NgSelectMultipleOption,l.DefaultValueAccessor,l.NgControlStatus,l.NgControlStatusGroup,l.FormGroupDirective,l.FormControlName,d.IconDirective,d.Option,E.TitleCasePipe,Ie.r]})}}return n})();const Op=n=>({name:"source_zones",zone:n}),Gp=n=>({name:"destination_zones",zone:n});function Np(n,i){1&n&&e.\u0275\u0275elementContainer(0)}function Ap(n,i){1&n&&e.\u0275\u0275elementContainer(0)}function hp(n,i){if(1&n&&(e.\u0275\u0275namespaceSVG(),e.\u0275\u0275elementStart(0,"svg",36),e.\u0275\u0275i18nAttributes(1,12),e.\u0275\u0275elementEnd()),2&n){const t=e.\u0275\u0275nextContext().name,o=e.\u0275\u0275nextContext();e.\u0275\u0275i18nExp(null==t?null:t.split("_").join(" ")),e.\u0275\u0275i18nApply(1),e.\u0275\u0275property("cdsIcon",o.icons.warning)("size",o.icons.size16)}}function bp(n,i){if(1&n&&(e.\u0275\u0275elementStart(0,"span",37),e.\u0275\u0275i18n(1,11),e.\u0275\u0275elementEnd()),2&n){const t=e.\u0275\u0275nextContext().name;e.\u0275\u0275advance(),e.\u0275\u0275i18nExp(null==t?null:t.split("_").join(" ")),e.\u0275\u0275i18nApply(1)}}function vp(n,i){if(1&n){const t=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"cd-select-badges",33),e.\u0275\u0275listener("selection",function(){const _=e.\u0275\u0275restoreView(t).name,a=e.\u0275\u0275nextContext();return e.\u0275\u0275resetView(a.onZoneSelection(_))}),e.\u0275\u0275elementEnd(),e.\u0275\u0275template(1,hp,2,3,"svg",34)(2,bp,2,1,"span",35)}if(2&n){const t=i.name,o=i.zone,_=e.\u0275\u0275nextContext(),a=e.\u0275\u0275reference(6);e.\u0275\u0275propertyInterpolate("id",t),e.\u0275\u0275propertyInterpolate("name",t),e.\u0275\u0275property("customBadges",o.customBadges)("customBadgeValidators",o.data.validators)("messages",o.data.messages)("data",o.data.selected)("options",o.data.available),e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf",o.data.selected.length<=0),e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf",_.pipeForm.showError(t,a,"required"))}}const mn="All zones (*)";let yp=(()=>{class n{constructor(t,o,_,a,r,s){this.activeModal=t,this.rgwDaemonService=o,this.rgwZonegroupService=_,this.rgwMultisiteService=a,this.notificationService=r,this.succeededLabels=s,this.sourceZones=new pn(!1,"Filter Zones"),this.destZones=new pn(!1,"Filter Zones"),this.icons=y.FI,this.allBucketSelectedHelpText="If no value is provided, all the buckets in the zone group will be selected."}ngOnInit(){this.pipeSelectedRow&&(this.pipeSelectedRow.source.zones=this.replaceAsteriskWithString(this.pipeSelectedRow.source.zones),this.pipeSelectedRow.dest.zones=this.replaceAsteriskWithString(this.pipeSelectedRow.dest.zones)),this.editing="create"!==this.action,this.pipeForm=new Me.$({pipe_id:new l.UntypedFormControl("",{validators:[l.Validators.required]}),group_id:new l.UntypedFormControl(this.groupExpandedRow?.groupName||"",{validators:[l.Validators.required]}),bucket_name:new l.UntypedFormControl(this.groupExpandedRow?.bucket||""),source_bucket:new l.UntypedFormControl(""),source_zones:new l.UntypedFormControl("",{validators:[l.Validators.required]}),destination_bucket:new l.UntypedFormControl(""),destination_zones:new l.UntypedFormControl("",{validators:[l.Validators.required]})}),this.pipeForm.get("bucket_name").disable(),this.rgwDaemonService.selectedDaemon$.pipe((0,K.switchMap)(t=>{if(t){const o=new H.Oe;return o.name=t.zonegroup_name,this.rgwZonegroupService.get(o).pipe((0,K.catchError)(()=>(0,U.of)([])))}return(0,U.of)([])})).subscribe(t=>{if(t&&t?.zones?.length>0){let o=[];if(o.push(new Gt.O(!1,mn,"")),t.zones.forEach(_=>{o.push(new Gt.O(!1,_.name,""))}),this.sourceZones.data.available=JSON.parse(JSON.stringify(o)),this.destZones.data.available=JSON.parse(JSON.stringify(o)),this.editing){this.pipeForm.get("pipe_id").disable(),this.sourceZones.data.selected=[...this.pipeSelectedRow.source.zones],this.destZones.data.selected=[...this.pipeSelectedRow.dest.zones];const _=[];this.pipeSelectedRow.dest.zones.forEach(a=>{_.push(new Gt.O(!0,a,""))}),this.pipeForm.patchValue({pipe_id:this.pipeSelectedRow.id,source_zones:this.pipeSelectedRow.source.zones,destination_zones:this.pipeSelectedRow.dest.zones,source_bucket:this.pipeSelectedRow.source.bucket,destination_bucket:this.pipeSelectedRow.dest.bucket})}}})}replaceWithAsterisk(t){return t.map(o=>o.replace(mn,"*"))}replaceAsteriskWithString(t){return t.map(o=>o.replace("*",mn))}onZoneSelection(t){this.pipeForm.patchValue("source_zones"===t?{source_zones:this.sourceZones.data.selected}:{destination_zones:this.destZones.data.selected})}getZoneData(t,o){return t.filter(_=>!o.includes(_))}assignZoneValue(t,o){return this.replaceWithAsterisk(t.length>0?t:o)}submit(){const t={added:[],removed:[]},o={added:[],removed:[]};if(!this.pipeForm.invalid){if(this.pipeForm.pending)return void this.pipeForm.setErrors({cdSubmitButton:!0});this.editing&&(o.removed=this.getZoneData(this.pipeSelectedRow.dest.zones,this.destZones.data.selected),o.added=this.getZoneData(this.destZones.data.selected,this.pipeSelectedRow.dest.zones),t.removed=this.getZoneData(this.pipeSelectedRow.source.zones,this.sourceZones.data.selected),t.added=this.getZoneData(this.sourceZones.data.selected,this.pipeSelectedRow.source.zones)),t.added=this.assignZoneValue(t.added,this.sourceZones.data.selected),o.added=this.assignZoneValue(o.added,this.destZones.data.selected),t.removed=this.replaceWithAsterisk(t.removed),o.removed=this.replaceWithAsterisk(o.removed),this.rgwMultisiteService.createEditSyncPipe({...this.pipeForm.getRawValue(),source_zones:t,destination_zones:o,user:this.editing?this.pipeSelectedRow?.params?.user:"",mode:this.editing?this.pipeSelectedRow?.params?.mode:""}).subscribe(()=>{this.notificationService.show(w._.success,"" + (this.editing ? this.succeededLabels.EDITED : this.succeededLabels.CREATED) + " Sync Pipe '" + this.pipeForm.getValue("pipe_id") + "'"),this.activeModal.close(w._.success)},()=>{this.pipeForm.setErrors({cdSubmitButton:!0}),this.activeModal.dismiss()})}}static{this.\u0275fac=function(o){return new(o||n)(e.\u0275\u0275directiveInject(v.NgbActiveModal),e.\u0275\u0275directiveInject($e.y),e.\u0275\u0275directiveInject(ke.Z),e.\u0275\u0275directiveInject(xe.A),e.\u0275\u0275directiveInject(ne.J),e.\u0275\u0275directiveInject(P.Vv))}}static{this.\u0275cmp=e.\u0275\u0275defineComponent({type:n,selectors:[["cd-rgw-multisite-sync-pipe-modal"]],decls:49,vars:20,consts:()=>{let t,o,_,a,r,s,c,u,p,T,f,G,S,O;return t="Bucket Name...",o="Source Bucket Name...",_="Destination Bucket Name...",a="" + "\ufffd0\ufffd" + " Pipe",r="Name",s="Source Zone ",c="Destination Zone",u="Bucket Name",p="Source Bucket",T="" + "\ufffd0\ufffd" + "",f="Destination Bucket",G="" + "\ufffd0\ufffd" + "",S="Pipe should be associated with " + "\ufffd0\ufffd" + "",O="" + "\ufffd0\ufffd" + " selection is required! ",[["frm","ngForm"],["zoneMultiSelect",""],a,r,s,c,u,p,T,f,G,O,["title",S],[3,"modalRef"],[1,"modal-title"],[1,"modal-content"],["name","pipeForm","novalidate","",3,"formGroup"],[1,"modal-body"],[1,"form-group","row"],["for","pipe_id",1,"cd-col-form-label","required"],[1,"cd-col-form-input"],["type","text","placeholder","Pipe Name...","id","pipe_id","name","pipe_id","formControlName","pipe_id",1,"form-control",3,"readonly"],["for","source_zone",1,"cd-col-form-label","required"],[4,"ngTemplateOutlet","ngTemplateOutletContext"],["for","destination_zone",1,"cd-col-form-label","required"],["for","bucket",1,"cd-col-form-label"],["id","bucket","name","bucket","type","text","placeholder",t,"formControlName","bucket_name",1,"form-control"],["for","source_bucket",1,"cd-col-form-label"],["id","source_bucket","name","source_bucket","type","text","placeholder",o,"formControlName","source_bucket",1,"form-control"],["for","dest_bucket",1,"cd-col-form-label"],["id","dest_bucket","name","dest_bucket","type","text","placeholder",_,"formControlName","destination_bucket",1,"form-control"],[1,"modal-footer"],[3,"submitActionEvent","form","submitText"],[3,"selection","id","name","customBadges","customBadgeValidators","messages","data","options"],["class","cds-warning-color",3,"cdsIcon","size","title",4,"ngIf"],["class","invalid-feedback",4,"ngIf"],[1,"cds-warning-color",3,"cdsIcon","size",6,"title"],[1,"invalid-feedback"]]},template:function(o,_){if(1&o){const a=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"cd-modal",13),e.\u0275\u0275elementContainerStart(1,14),e.\u0275\u0275i18n(2,2),e.\u0275\u0275pipe(3,"titlecase"),e.\u0275\u0275elementContainerEnd(),e.\u0275\u0275elementContainerStart(4,15),e.\u0275\u0275elementStart(5,"form",16,0)(7,"div",17)(8,"div",18)(9,"label",19),e.\u0275\u0275i18n(10,3),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(11,"div",20),e.\u0275\u0275element(12,"input",21),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(13,"div",18)(14,"label",22),e.\u0275\u0275i18n(15,4),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(16,"div",20),e.\u0275\u0275template(17,Np,1,0,"ng-container",23),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(18,"div",18)(19,"label",24),e.\u0275\u0275i18n(20,5),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(21,"div",20),e.\u0275\u0275template(22,Ap,1,0,"ng-container",23),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(23,"div",18)(24,"label",25),e.\u0275\u0275i18n(25,6),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(26,"div",20),e.\u0275\u0275element(27,"input",26),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(28,"div",18)(29,"label",27),e.\u0275\u0275i18n(30,7),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(31,"div",20),e.\u0275\u0275element(32,"input",28),e.\u0275\u0275elementStart(33,"cd-help-text")(34,"span"),e.\u0275\u0275i18n(35,8),e.\u0275\u0275elementEnd()()()(),e.\u0275\u0275elementStart(36,"div",18)(37,"label",29),e.\u0275\u0275i18n(38,9),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(39,"div",20),e.\u0275\u0275element(40,"input",30),e.\u0275\u0275elementStart(41,"cd-help-text")(42,"span"),e.\u0275\u0275i18n(43,10),e.\u0275\u0275elementEnd()()()()(),e.\u0275\u0275elementStart(44,"div",31)(45,"cd-form-button-panel",32),e.\u0275\u0275pipe(46,"titlecase"),e.\u0275\u0275listener("submitActionEvent",function(){return e.\u0275\u0275restoreView(a),e.\u0275\u0275resetView(_.submit())}),e.\u0275\u0275elementEnd()()(),e.\u0275\u0275elementContainerEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275template(47,vp,3,9,"ng-template",null,1,e.\u0275\u0275templateRefExtractor)}if(2&o){const a=e.\u0275\u0275reference(48);e.\u0275\u0275property("modalRef",_.activeModal),e.\u0275\u0275advance(3),e.\u0275\u0275i18nExp(e.\u0275\u0275pipeBind1(3,12,_.action)),e.\u0275\u0275i18nApply(2),e.\u0275\u0275advance(2),e.\u0275\u0275property("formGroup",_.pipeForm),e.\u0275\u0275advance(7),e.\u0275\u0275property("readonly",_.editing),e.\u0275\u0275advance(5),e.\u0275\u0275property("ngTemplateOutlet",a)("ngTemplateOutletContext",e.\u0275\u0275pureFunction1(16,Op,_.sourceZones)),e.\u0275\u0275advance(5),e.\u0275\u0275property("ngTemplateOutlet",a)("ngTemplateOutletContext",e.\u0275\u0275pureFunction1(18,Gp,_.destZones)),e.\u0275\u0275advance(13),e.\u0275\u0275i18nExp(_.allBucketSelectedHelpText),e.\u0275\u0275i18nApply(35),e.\u0275\u0275advance(8),e.\u0275\u0275i18nExp(_.allBucketSelectedHelpText),e.\u0275\u0275i18nApply(43),e.\u0275\u0275advance(2),e.\u0275\u0275property("form",_.pipeForm)("submitText",e.\u0275\u0275pipeBind1(46,14,_.action)+" Pipe")}},dependencies:[E.NgIf,E.NgTemplateOutlet,Lt.U,Xe.z,_e.e,ae.O,Y.S,Be.a,We.C,oe.E,l.\u0275NgNoValidate,l.DefaultValueAccessor,l.NgControlStatus,l.NgControlStatusGroup,l.FormGroupDirective,l.FormControlName,d.IconDirective,E.TitleCasePipe]})}}return n})();const $p=["deleteTpl"];function Dp(n,i){if(1&n){const t=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"legend"),e.\u0275\u0275text(1," Symmetrical "),e.\u0275\u0275elementStart(2,"cd-help-text"),e.\u0275\u0275text(3," It can define symmetrical data flow, in which multiple zones sync data from each other. "),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(4,"cd-table",14,2),e.\u0275\u0275listener("updateSelection",function(_){e.\u0275\u0275restoreView(t);const a=e.\u0275\u0275nextContext(2);return e.\u0275\u0275resetView(a.updateSelection(_,a.flowType.symmetrical))})("fetchData",function(_){e.\u0275\u0275restoreView(t);const a=e.\u0275\u0275nextContext(2);return e.\u0275\u0275resetView(a.loadData(_))}),e.\u0275\u0275elementStart(6,"div",15),e.\u0275\u0275element(7,"cd-table-actions",16),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(8,"legend"),e.\u0275\u0275text(9," Directional "),e.\u0275\u0275elementStart(10,"cd-help-text"),e.\u0275\u0275text(11," It can define directional data flow, in which the data moves in one way, from one zone to another. "),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(12,"cd-table",14,2),e.\u0275\u0275listener("updateSelection",function(_){e.\u0275\u0275restoreView(t);const a=e.\u0275\u0275nextContext(2);return e.\u0275\u0275resetView(a.updateSelection(_,a.flowType.directional))})("fetchData",function(_){e.\u0275\u0275restoreView(t);const a=e.\u0275\u0275nextContext(2);return e.\u0275\u0275resetView(a.loadData(_))}),e.\u0275\u0275elementStart(14,"div",15),e.\u0275\u0275element(15,"cd-table-actions",16),e.\u0275\u0275elementEnd()()}if(2&n){const t=e.\u0275\u0275nextContext(2);e.\u0275\u0275advance(4),e.\u0275\u0275property("autoReload",!1)("data",t.symmetricalFlowData)("columns",t.symmetricalFlowCols)("searchableObjects",!0)("hasDetails",!1)("serverSide",!1)("count",0)("maxLimit",25)("toolHeader",!0),e.\u0275\u0275advance(3),e.\u0275\u0275property("permission",t.permission)("selection",t.symFlowSelection)("tableActions",t.symFlowTableActions),e.\u0275\u0275advance(5),e.\u0275\u0275property("autoReload",!1)("data",t.directionalFlowData)("columns",t.directionalFlowCols)("searchableObjects",!0)("hasDetails",!1)("serverSide",!1)("count",0)("maxLimit",25)("toolHeader",!0),e.\u0275\u0275advance(3),e.\u0275\u0275property("permission",t.permission)("selection",t.dirFlowSelection)("tableActions",t.dirFlowTableActions)}}function Wp(n,i){if(1&n){const t=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"legend"),e.\u0275\u0275i18nStart(1,5),e.\u0275\u0275element(2,"cd-help-text"),e.\u0275\u0275i18nEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(3,"cd-table",17,2),e.\u0275\u0275listener("updateSelection",function(_){e.\u0275\u0275restoreView(t);const a=e.\u0275\u0275nextContext(2);return e.\u0275\u0275resetView(a.pipeSelection=_)})("fetchData",function(_){e.\u0275\u0275restoreView(t);const a=e.\u0275\u0275nextContext(2);return e.\u0275\u0275resetView(a.loadData(_))}),e.\u0275\u0275elementStart(5,"div",15),e.\u0275\u0275element(6,"cd-table-actions",16),e.\u0275\u0275elementEnd()()}if(2&n){const t=e.\u0275\u0275nextContext(2);e.\u0275\u0275advance(3),e.\u0275\u0275property("data",t.pipeData)("columns",t.pipeCols)("searchableObjects",!0)("hasDetails",!1)("serverSide",!1)("toolHeader",!0),e.\u0275\u0275advance(3),e.\u0275\u0275property("permission",t.permission)("selection",t.pipeSelection)("tableActions",t.pipeTableActions)}}function xp(n,i){if(1&n&&(e.\u0275\u0275elementContainerStart(0),e.\u0275\u0275elementStart(1,"nav",8,1),e.\u0275\u0275elementContainerStart(3,9),e.\u0275\u0275elementStart(4,"a",10),e.\u0275\u0275i18n(5,3),e.\u0275\u0275elementEnd(),e.\u0275\u0275template(6,Dp,16,24,"ng-template",11),e.\u0275\u0275elementContainerEnd(),e.\u0275\u0275elementContainerStart(7,12),e.\u0275\u0275elementStart(8,"a",10),e.\u0275\u0275i18n(9,4),e.\u0275\u0275elementEnd(),e.\u0275\u0275template(10,Wp,7,9,"ng-template",11),e.\u0275\u0275elementContainerEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275element(11,"div",13),e.\u0275\u0275elementContainerEnd()),2&n){const t=e.\u0275\u0275reference(2);e.\u0275\u0275advance(11),e.\u0275\u0275property("ngbNavOutlet",t)}}function wp(n,i){if(1&n&&(e.\u0275\u0275elementStart(0,"cd-alert-panel",18),e.\u0275\u0275i18n(1,6),e.\u0275\u0275pipe(2,"upperFirst"),e.\u0275\u0275elementEnd()),2&n){const t=e.\u0275\u0275nextContext();e.\u0275\u0275advance(2),e.\u0275\u0275i18nExp(e.\u0275\u0275pipeBind1(2,1,t.resourceType)),e.\u0275\u0275i18nApply(1)}}var jt=function(n){return n.flow="flow",n.pipe="pipe",n}(jt||{});let Up=(()=>{class n{constructor(t,o,_,a,r){this.actionLabels=t,this.modalService=o,this.rgwMultisiteService=_,this.taskWrapper=a,this.cdsModalService=r,this.resourceType=jt.flow,this.flowType=H.do,this.symmetricalFlowData=[],this.directionalFlowData=[],this.pipeData=[],this.symFlowSelection=new Oe.y,this.dirFlowSelection=new Oe.y,this.pipeSelection=new Oe.y,this.symmetricalFlowCols=[{name:"Name",prop:"id",flexGrow:1},{name:"Zones",prop:"zones",flexGrow:1}],this.directionalFlowCols=[{name:"Source Zone",prop:"source_zone",flexGrow:1},{name:"Destination Zone",prop:"dest_zone",flexGrow:1}],this.pipeCols=[{name:"Name",prop:"id",flexGrow:1},{name:"Source Zone",prop:"source.zones",flexGrow:1},{name:"Destination Zone",prop:"dest.zones",flexGrow:1},{name:"Source Bucket",prop:"source.bucket",flexGrow:1},{name:"Destination Bucket",prop:"dest.bucket",flexGrow:1}],this.symFlowTableActions=[{permission:"create",icon:y.FI.add,name:this.actionLabels.CREATE,click:()=>this.openModal(H.do.symmetrical),canBePrimary:O=>!O.hasSelection},{permission:"update",icon:y.FI.edit,name:this.actionLabels.EDIT,click:()=>this.openModal(H.do.symmetrical,!0)},{permission:"delete",icon:y.FI.destroy,disable:()=>!this.symFlowSelection.hasSelection,name:this.actionLabels.DELETE,click:()=>this.deleteFlow(H.do.symmetrical),canBePrimary:O=>O.hasMultiSelection}],this.dirFlowTableActions=[{permission:"create",icon:y.FI.add,name:this.actionLabels.CREATE,click:()=>this.openModal(H.do.directional),canBePrimary:O=>!O.hasSelection},{permission:"delete",icon:y.FI.destroy,disable:()=>"Deleting the directional flow is disabled in the UI. Please use CLI to delete the directional flow",name:this.actionLabels.DELETE,click:()=>this.deleteFlow(H.do.directional),canBePrimary:O=>O.hasSelection}],this.pipeTableActions=[{permission:"create",icon:y.FI.add,name:this.actionLabels.CREATE,click:()=>this.openPipeModal(),canBePrimary:O=>!O.hasSelection},{permission:"update",icon:y.FI.edit,name:this.actionLabels.EDIT,click:()=>this.openPipeModal(!0)},{permission:"delete",icon:y.FI.destroy,disable:()=>!this.pipeSelection.hasSelection,name:this.actionLabels.DELETE,click:()=>this.deletePipe(),canBePrimary:O=>O.hasMultiSelection}]}ngOnChanges(t){t.expandedRow.currentValue&&t.expandedRow.currentValue.groupName&&(this.symmetricalFlowData=[],this.directionalFlowData=[],this.loadData())}loadData(t){this.expandedRow&&this.rgwMultisiteService.getSyncPolicyGroup(this.expandedRow.groupName,this.expandedRow.bucket).subscribe(o=>{this.symmetricalFlowData=o.data_flow[H.do.symmetrical]||[],this.directionalFlowData=o.data_flow[H.do.directional]||[],this.pipeData=o.pipes||[]},()=>{t&&t.error()})}updateSelection(t,o){o===H.do.directional?this.dirFlowSelection=t:this.symFlowSelection=t}openModal(t){var o=this;return(0,lo.A)(function*(_,a=!1){const r=a?"edit":"create",s={groupType:_,groupExpandedRow:o.expandedRow,flowSelectedRow:_===H.do.symmetrical?o.symFlowSelection.first():o.dirFlowSelection.first(),action:r};o.modalRef=o.modalService.show(Ip,s,{size:"lg"});try{(yield o.modalRef.result)===w._.success&&o.loadData()}catch{}}).apply(this,arguments)}deleteFlow(t){this.resourceType=jt.flow;let o=this.symFlowSelection;t===H.do.directional&&(o=this.dirFlowSelection);const _=o.selected.map(a=>a.id);this.cdsModalService.show(Ue.D,{itemDescription:o.hasSingleSelection?"Flow":"Flows",itemNames:_,bodyTemplate:this.deleteTpl,submitActionObservable:()=>new U.Observable(a=>{this.taskWrapper.wrapTaskAroundCall({task:new St.O("rgw/multisite/sync-flow/delete",{flow_ids:_}),call:(0,U.forkJoin)(o.selected.map(r=>this.rgwMultisiteService.removeSyncFlow(r.id,t,this.expandedRow.groupName,this.expandedRow.bucket)))}).subscribe({error:r=>{a.error(r),this.table.refreshBtn()},complete:()=>{a.complete(),this.table.refreshBtn()}})})})}openPipeModal(){var t=this;return(0,lo.A)(function*(o=!1){const _=o?"edit":"create",a={groupExpandedRow:t.expandedRow,pipeSelectedRow:t.pipeSelection.first(),action:_};t.modalRef=t.modalService.show(yp,a,{size:"lg"});try{(yield t.modalRef.result)===w._.success&&t.loadData()}catch{}}).apply(this,arguments)}deletePipe(){this.resourceType=jt.pipe;const t=this.pipeSelection.selected.map(o=>o.id);this.cdsModalService.show(Ue.D,{itemDescription:this.pipeSelection.hasSingleSelection?"Pipe":"Pipes",itemNames:t,bodyTemplate:this.deleteTpl,submitActionObservable:()=>new U.Observable(o=>{this.taskWrapper.wrapTaskAroundCall({task:new St.O("rgw/multisite/sync-pipe/delete",{pipe_ids:t}),call:(0,U.forkJoin)(this.pipeSelection.selected.map(_=>this.rgwMultisiteService.removeSyncPipe(_.id,this.expandedRow.groupName,this.expandedRow.bucket)))}).subscribe({error:_=>{o.error(_),this.table.refreshBtn()},complete:()=>{o.complete(),this.table.refreshBtn()}})})})}static{this.\u0275fac=function(o){return new(o||n)(e.\u0275\u0275directiveInject(P.Ss),e.\u0275\u0275directiveInject(vt.B),e.\u0275\u0275directiveInject(xe.A),e.\u0275\u0275directiveInject(It.a),e.\u0275\u0275directiveInject(he.V))}}static{this.\u0275cmp=e.\u0275\u0275defineComponent({type:n,selectors:[["cd-rgw-multisite-sync-policy-details"]],viewQuery:function(o,_){if(1&o&&(e.\u0275\u0275viewQuery(re.O,5),e.\u0275\u0275viewQuery($p,7)),2&o){let a;e.\u0275\u0275queryRefresh(a=e.\u0275\u0275loadQuery())&&(_.table=a.first),e.\u0275\u0275queryRefresh(a=e.\u0275\u0275loadQuery())&&(_.deleteTpl=a.first)}},inputs:{expandedRow:"expandedRow",permission:"permission"},features:[e.\u0275\u0275NgOnChangesFeature],decls:3,vars:1,consts:()=>{let t,o,_,a;return t="Flow",o="Pipe",_=" Pipe " + "\ufffd#2\ufffd" + " A pipe defines the actual buckets that can use these data flows, and the properties that are associated with it. " + "\ufffd/#2\ufffd" + "",a=" Deleting " + "\ufffd0\ufffd" + " may disrupt data synchronization ",[["deleteTpl",""],["nav","ngbNav"],["table",""],t,o,_,a,[4,"ngIf"],["ngbNav","","cdStatefulTab","sync-policy-details",1,"nav-tabs"],["ngbNavItem","flow"],["ngbNavLink",""],["ngbNavContent",""],["ngbNavItem","pipe"],[3,"ngbNavOutlet"],["columnMode","flex","selectionType","multiClick",3,"updateSelection","fetchData","autoReload","data","columns","searchableObjects","hasDetails","serverSide","count","maxLimit","toolHeader"],[1,"table-actions"],[1,"btn-group",3,"permission","selection","tableActions"],["selectionType","multiClick",3,"updateSelection","fetchData","data","columns","searchableObjects","hasDetails","serverSide","toolHeader"],["type","danger"]]},template:function(o,_){1&o&&e.\u0275\u0275template(0,xp,12,1,"ng-container",7)(1,wp,3,3,"ng-template",null,0,e.\u0275\u0275templateRefExtractor),2&o&&e.\u0275\u0275property("ngIf",_.expandedRow)},dependencies:[E.NgIf,Pe.m,ae.O,re.O,De.j,Xt.B,v.NgbNavContent,v.NgbNav,v.NgbNavItem,v.NgbNavLink,v.NgbNavLinkBase,v.NgbNavOutlet,Ie.r],styles:["datatable-scroller{width:100%!important}"]})}}return n})(),so=(()=>{class n{static{this.\u0275fac=function(o){return new(o||n)}}static{this.\u0275cmp=e.\u0275\u0275defineComponent({type:n,selectors:[["cd-rgw-multisite-tabs"]],decls:7,vars:0,consts:()=>{let t,o;return t="Configuration",o="Sync Policy",[t,o,[1,"nav","nav-tabs"],[1,"nav-item"],["routerLink","/rgw/multisite/configuration","routerLinkActive","active","ariaCurrentWhenActive","page",1,"nav-link"],["routerLink","//rgw/multisite/sync-policy","routerLinkActive","active","ariaCurrentWhenActive","page",1,"nav-link"]]},template:function(o,_){1&o&&(e.\u0275\u0275elementStart(0,"ul",2)(1,"li",3)(2,"a",4),e.\u0275\u0275i18n(3,0),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(4,"li",3)(5,"a",5),e.\u0275\u0275i18n(6,1),e.\u0275\u0275elementEnd()()())},dependencies:[Q.RouterLink,Q.RouterLinkActive]})}}return n})();const kp=["deleteTpl"];function zp(n,i){if(1&n&&e.\u0275\u0275element(0,"cd-rgw-multisite-sync-policy-details",9),2&n){const t=e.\u0275\u0275nextContext();e.\u0275\u0275property("expandedRow",t.expandedRow)("permission",t.permission)}}function Hp(n,i){1&n&&(e.\u0275\u0275elementStart(0,"cd-alert-panel",10),e.\u0275\u0275i18n(1,3),e.\u0275\u0275elementEnd())}const Tn="rgw/multisite/sync-policy";let co=(()=>{class n extends Je.D{constructor(t,o,_,a,r,s,c,u){super(),this.rgwMultisiteService=t,this.titleCasePipe=o,this.actionLabels=_,this.authStorageService=a,this.modalService=r,this.taskWrapper=s,this.router=c,this.rgwDaemonService=u,this.columns=[],this.syncPolicyData=[],this.selection=new Oe.y}ngOnInit(){this.permission=this.authStorageService.getPermissions().rgw,this.columns=[{prop:"uniqueId",isInvisible:!0,isHidden:!0},{name:"Group Name",prop:"groupName",flexGrow:1},{name:"Status",prop:"status",flexGrow:1,cellTransformation:He.x.tooltip,customTemplateConfig:{map:{Enabled:{class:"badge-success",tooltip:"sync is allowed and enabled"},Allowed:{class:"badge-info",tooltip:"sync is allowed"},Forbidden:{class:"badge-warning",tooltip:"sync (as defined by this group) is not allowed and can override other groups"}}},pipe:this.titleCasePipe},{name:"Zonegroup",prop:"zonegroup",flexGrow:1,cellTransformation:He.x.map,customTemplateConfig:{undefined:"-","":"-"}},{name:"Bucket",prop:"bucket",flexGrow:1,cellTransformation:He.x.map,customTemplateConfig:{undefined:"-","":"-"}}],this.rgwDaemonService.list().subscribe();const t=()=>this.selection.first().groupName&&this.selection.first().bucket?`${P.Qp.EDIT}/${this.selection.first().groupName}/${this.selection.first().bucket}`:`${P.Qp.EDIT}/${this.selection.first().groupName}`;this.tableActions=[{permission:"create",icon:y.FI.add,click:()=>this.router.navigate([Tn,{outlets:{modal:P.Qp.CREATE}}]),name:this.actionLabels.CREATE,canBePrimary:r=>!r.hasSelection},{permission:"update",icon:y.FI.edit,click:()=>this.router.navigate([Tn,{outlets:{modal:t()}}]),name:this.actionLabels.EDIT},{permission:"delete",icon:y.FI.destroy,click:()=>this.deleteAction(),disable:()=>!this.selection.hasSelection,name:this.actionLabels.DELETE,canBePrimary:r=>r.hasMultiSelection}]}transformSyncPolicyData(t){t&&t.length>0&&(t.forEach(o=>{this.syncPolicyData.push({uniqueId:o.id+(o.bucketName?o.bucketName:""),groupName:o.id,status:o.status,bucket:o.bucketName,zonegroup:o.zonegroup})}),this.syncPolicyData=[...this.syncPolicyData])}updateSelection(t){this.selection=t}getPolicyList(t){this.rgwMultisiteService.getSyncPolicy("","",!0).subscribe(o=>{this.syncPolicyData=[],this.transformSyncPolicyData(o)},()=>{t&&t.error()})}deleteAction(){const t=this.selection.selected.map(o=>o.groupName);this.modalService.show(Ue.D,{itemDescription:this.selection.hasSingleSelection?"Policy Group":"Policy Groups",itemNames:t,bodyTemplate:this.deleteTpl,submitActionObservable:()=>new U.Observable(o=>{this.taskWrapper.wrapTaskAroundCall({task:new St.O("rgw/multisite/sync-policy/delete",{group_names:t}),call:(0,U.forkJoin)(this.selection.selected.map(_=>this.rgwMultisiteService.removeSyncPolicyGroup(_.groupName,_.bucket)))}).subscribe({error:_=>{o.error(_),this.table.refreshBtn()},complete:()=>{o.complete(),this.table.refreshBtn()}})})})}static{this.\u0275fac=function(o){return new(o||n)(e.\u0275\u0275directiveInject(xe.A),e.\u0275\u0275directiveInject(E.TitleCasePipe),e.\u0275\u0275directiveInject(P.Ss),e.\u0275\u0275directiveInject(be.v),e.\u0275\u0275directiveInject(he.V),e.\u0275\u0275directiveInject(It.a),e.\u0275\u0275directiveInject(Q.Router),e.\u0275\u0275directiveInject($e.y))}}static{this.\u0275cmp=e.\u0275\u0275defineComponent({type:n,selectors:[["cd-rgw-multisite-sync-policy"]],viewQuery:function(o,_){if(1&o&&(e.\u0275\u0275viewQuery(re.O,7),e.\u0275\u0275viewQuery(kp,7)),2&o){let a;e.\u0275\u0275queryRefresh(a=e.\u0275\u0275loadQuery())&&(_.table=a.first),e.\u0275\u0275queryRefresh(a=e.\u0275\u0275loadQuery())&&(_.deleteTpl=a.first)}},features:[e.\u0275\u0275ProvidersFeature([{provide:se.E,useValue:new se.E(Tn)}]),e.\u0275\u0275InheritDefinitionFeature],decls:12,vars:10,consts:()=>{let t,o;return t=" Multisite Sync Policy " + "\ufffd#3\ufffd" + " Multisite bucket-granularity sync policy provides fine grained control of data movement between buckets in different zones. Leveraging the bucket-granularity sync policy is possible for buckets to diverge, and a bucket can pull data from other buckets (ones that don\u2019t share its name or its ID) in different zone. " + "\ufffd/#3\ufffd" + "",o=" Are you sure you want to delete these policy groups? ",[["table",""],["deleteTpl",""],t,o,["identifier","uniqueId","selectionType","multiClick",3,"setExpandedRow","fetchData","updateSelection","autoReload","data","columns","forceIdentifier","searchableObjects","hasDetails","toolHeader"],[1,"table-actions"],[1,"btn-group",3,"permission","selection","tableActions"],[3,"expandedRow","permission",4,"cdTableDetail"],["name","modal",3,"deactivate"],[3,"expandedRow","permission"],["type","danger"]]},template:function(o,_){if(1&o){const a=e.\u0275\u0275getCurrentView();e.\u0275\u0275element(0,"cd-rgw-multisite-tabs"),e.\u0275\u0275elementStart(1,"legend"),e.\u0275\u0275i18nStart(2,2),e.\u0275\u0275element(3,"cd-help-text"),e.\u0275\u0275i18nEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(4,"cd-table",4,0),e.\u0275\u0275listener("setExpandedRow",function(s){return e.\u0275\u0275restoreView(a),e.\u0275\u0275resetView(_.setExpandedRow(s))})("fetchData",function(s){return e.\u0275\u0275restoreView(a),e.\u0275\u0275resetView(_.getPolicyList(s))})("updateSelection",function(s){return e.\u0275\u0275restoreView(a),e.\u0275\u0275resetView(_.updateSelection(s))}),e.\u0275\u0275elementStart(6,"div",5),e.\u0275\u0275element(7,"cd-table-actions",6),e.\u0275\u0275elementEnd(),e.\u0275\u0275template(8,zp,1,2,"cd-rgw-multisite-sync-policy-details",7),e.\u0275\u0275elementEnd(),e.\u0275\u0275template(9,Hp,2,0,"ng-template",null,1,e.\u0275\u0275templateRefExtractor),e.\u0275\u0275elementStart(11,"router-outlet",8),e.\u0275\u0275listener("deactivate",function(){return e.\u0275\u0275restoreView(a),e.\u0275\u0275resetView(_.getPolicyList())}),e.\u0275\u0275elementEnd()}2&o&&(e.\u0275\u0275advance(4),e.\u0275\u0275property("autoReload",!1)("data",_.syncPolicyData)("columns",_.columns)("forceIdentifier",!0)("searchableObjects",!0)("hasDetails",!0)("toolHeader",!0),e.\u0275\u0275advance(3),e.\u0275\u0275property("permission",_.permission)("selection",_.selection)("tableActions",_.tableActions))},dependencies:[Pe.m,ae.O,re.O,De.j,ot.N,Q.RouterOutlet,Up,so]})}}return n})();const Xp=["treeNodeTemplate"],Bp=(n,i,t)=>[n,i,t],Vp=(n,i)=>({node:n,depth:i}),Zp=n=>({visibility:n}),Kp=n=>({node:n,depth:0});function qp(n,i){if(1&n){const t=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"cd-alert-panel",21),e.\u0275\u0275listener("action",function(){e.\u0275\u0275restoreView(t);const _=e.\u0275\u0275nextContext();return e.\u0275\u0275resetView(_.enableRgwModule())}),e.\u0275\u0275i18n(1,4),e.\u0275\u0275elementEnd()}}function jp(n,i){1&n&&(e.\u0275\u0275elementStart(0,"cd-alert-panel",22),e.\u0275\u0275i18nStart(1,5),e.\u0275\u0275element(2,"a",23),e.\u0275\u0275i18nEnd(),e.\u0275\u0275elementEnd())}function Yp(n,i){if(1&n&&e.\u0275\u0275element(0,"cd-table-actions",24),2&n){const t=e.\u0275\u0275nextContext();e.\u0275\u0275property("permission",t.permissions.rgw)("btnColor","light")("selection",t.selection)("tableActions",t.migrateTableAction)}}function Qp(n,i){if(1&n&&e.\u0275\u0275element(0,"cd-table-actions",25),2&n){const t=e.\u0275\u0275nextContext();e.\u0275\u0275property("permission",t.permissions.rgw)("selection",t.selection)("tableActions",t.createTableActions)("primaryDropDown",!0)}}function Jp(n,i){if(1&n&&e.\u0275\u0275element(0,"i",26),2&n){const t=e.\u0275\u0275nextContext();e.\u0275\u0275property("ngClass",e.\u0275\u0275pureFunction3(1,Bp,t.icons.large,t.icons.spinner,t.icons.spin))}}function em(n,i){1&n&&e.\u0275\u0275elementContainer(0)}function tm(n,i){if(1&n&&(e.\u0275\u0275elementContainerStart(0),e.\u0275\u0275template(1,em,1,0,"ng-container",29),e.\u0275\u0275elementContainerEnd()),2&n){const t=i.$implicit,o=e.\u0275\u0275nextContext(2).depth;e.\u0275\u0275nextContext();const _=e.\u0275\u0275reference(18);e.\u0275\u0275advance(),e.\u0275\u0275property("ngTemplateOutlet",_)("ngTemplateOutletContext",e.\u0275\u0275pureFunction2(2,Vp,t,o+1))}}function nm(n,i){if(1&n&&(e.\u0275\u0275elementContainerStart(0),e.\u0275\u0275template(1,tm,2,5,"ng-container",18),e.\u0275\u0275elementContainerEnd()),2&n){const t=e.\u0275\u0275nextContext().node;e.\u0275\u0275advance(),e.\u0275\u0275property("ngForOf",t.children)}}function om(n,i){if(1&n&&(e.\u0275\u0275elementStart(0,"cds-tree-node",27),e.\u0275\u0275template(1,nm,2,1,"ng-container",28),e.\u0275\u0275elementEnd()),2&n){const t=i.node,o=i.depth;e.\u0275\u0275property("node",t)("depth",o),e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf",(null==t?null:t.children)&&(null==t||null==t.children?null:t.children.length))}}function _m(n,i){if(1&n&&(e.\u0275\u0275elementStart(0,"span"),e.\u0275\u0275namespaceSVG(),e.\u0275\u0275element(1,"svg",40),e.\u0275\u0275elementEnd()),2&n){const t=e.\u0275\u0275nextContext(2).$implicit,o=e.\u0275\u0275nextContext();e.\u0275\u0275advance(),e.\u0275\u0275property("cdsIcon",o.icons.danger)("size",o.icons.size16)("title",null==t||null==t.data?null:t.data.warning_message)}}function im(n,i){if(1&n&&(e.\u0275\u0275namespaceSVG(),e.\u0275\u0275element(0,"svg",41)),2&n){const t=e.\u0275\u0275nextContext(3);e.\u0275\u0275property("cdsIcon",t.icons.reweight)("size",t.icons.size20)}}function am(n,i){if(1&n&&(e.\u0275\u0275namespaceSVG(),e.\u0275\u0275element(0,"svg",41)),2&n){const t=e.\u0275\u0275nextContext(3);e.\u0275\u0275property("cdsIcon",t.icons.deploy)("size",t.icons.size20)}}function rm(n,i){if(1&n&&(e.\u0275\u0275namespaceSVG(),e.\u0275\u0275element(0,"svg",41)),2&n){const t=e.\u0275\u0275nextContext(3);e.\u0275\u0275property("cdsIcon",t.icons.parentChild)("size",t.icons.size20)}}function lm(n,i){if(1&n&&(e.\u0275\u0275elementStart(0,"span",38),e.\u0275\u0275template(1,_m,2,3,"span",28)(2,im,1,2,"svg",39)(3,am,1,2,"svg",39)(4,rm,1,2,"svg",39),e.\u0275\u0275text(5),e.\u0275\u0275elementEnd()),2&n){const t=e.\u0275\u0275nextContext().$implicit;e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf",null==t||null==t.data?null:t.data.show_warning),e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf","scales"===(null==t||null==t.data?null:t.data.icon)),e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf","cube"===(null==t||null==t.data?null:t.data.icon)),e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf","fa fa-cubes"===(null==t||null==t.data?null:t.data.icon)),e.\u0275\u0275advance(),e.\u0275\u0275textInterpolate1(" ",null==t||null==t.data?null:t.data.name," ")}}function sm(n,i){1&n&&(e.\u0275\u0275elementStart(0,"span",42),e.\u0275\u0275text(1," default "),e.\u0275\u0275elementEnd())}function cm(n,i){1&n&&(e.\u0275\u0275elementStart(0,"span",43),e.\u0275\u0275text(1," master "),e.\u0275\u0275elementEnd())}function dm(n,i){1&n&&(e.\u0275\u0275elementStart(0,"span",43),e.\u0275\u0275text(1," secondary-zone "),e.\u0275\u0275elementEnd())}function um(n,i){if(1&n){const t=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementContainerStart(0),e.\u0275\u0275elementStart(1,"div",35)(2,"button",44),e.\u0275\u0275listener("click",function(){e.\u0275\u0275restoreView(t);const _=e.\u0275\u0275nextContext().$implicit,a=e.\u0275\u0275nextContext();return e.\u0275\u0275resetView(a.delete(_))}),e.\u0275\u0275namespaceSVG(),e.\u0275\u0275element(3,"svg",37),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementContainerEnd()}if(2&n){const t=i.ngIf,o=e.\u0275\u0275nextContext().$implicit,_=e.\u0275\u0275nextContext();e.\u0275\u0275advance(),e.\u0275\u0275property("title",t.deleteTitle),e.\u0275\u0275advance(),e.\u0275\u0275property("disabled",t.isDisabled||(null==o||null==o.data?null:o.data.secondary_zone)),e.\u0275\u0275advance(),e.\u0275\u0275property("cdsIcon",_.icons.destroy)("size",_.icons.size16)}}function pm(n,i){if(1&n){const t=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"div",30)(1,"div"),e.\u0275\u0275template(2,lm,6,5,"span",31)(3,sm,2,0,"span",32)(4,cm,2,0,"span",33)(5,dm,2,0,"span",33),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(6,"div",34)(7,"div",35)(8,"button",36),e.\u0275\u0275listener("click",function(){const _=e.\u0275\u0275restoreView(t).$implicit,a=e.\u0275\u0275nextContext();return e.\u0275\u0275resetView(a.openModal(_,!0))}),e.\u0275\u0275namespaceSVG(),e.\u0275\u0275element(9,"svg",37),e.\u0275\u0275elementEnd()(),e.\u0275\u0275template(10,um,4,4,"ng-container",28),e.\u0275\u0275elementEnd()()}if(2&n){const t=i.$implicit,o=e.\u0275\u0275nextContext();e.\u0275\u0275advance(2),e.\u0275\u0275property("ngIf",null==t||null==t.data?null:t.data.name),e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf",null==t||null==t.data?null:t.data.is_default),e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf",null==t||null==t.data?null:t.data.is_master),e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf",null==t||null==t.data?null:t.data.secondary_zone),e.\u0275\u0275advance(),e.\u0275\u0275property("ngStyle",e.\u0275\u0275pureFunction1(10,Zp,o.activeNodeId===(null==t||null==t.data?null:t.data.id)?"visible":"hidden")),e.\u0275\u0275advance(),e.\u0275\u0275property("title",o.editTitle),e.\u0275\u0275advance(),e.\u0275\u0275property("disabled",o.getDisable()||(null==t||null==t.data?null:t.data.secondary_zone)),e.\u0275\u0275advance(),e.\u0275\u0275property("cdsIcon",o.icons.edit)("size",o.icons.size16),e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf",o.isDeleteDisabled(t))}}function mm(n,i){1&n&&e.\u0275\u0275elementContainer(0)}function Tm(n,i){if(1&n&&(e.\u0275\u0275elementContainerStart(0),e.\u0275\u0275template(1,mm,1,0,"ng-container",29),e.\u0275\u0275elementContainerEnd()),2&n){const t=i.$implicit;e.\u0275\u0275nextContext();const o=e.\u0275\u0275reference(18);e.\u0275\u0275advance(),e.\u0275\u0275property("ngTemplateOutlet",o)("ngTemplateOutletContext",e.\u0275\u0275pureFunction1(2,Kp,t))}}function gm(n,i){if(1&n&&(e.\u0275\u0275elementStart(0,"div",45)(1,"legend"),e.\u0275\u0275text(2),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(3,"div"),e.\u0275\u0275element(4,"cd-table-key-value",46),e.\u0275\u0275elementEnd()()),2&n){const t=e.\u0275\u0275nextContext();e.\u0275\u0275advance(2),e.\u0275\u0275textInterpolate(t.metadataTitle),e.\u0275\u0275advance(2),e.\u0275\u0275property("data",t.metadata)}}let Rm=(()=>{class n{toNode(t){return t.map(o=>({label:this.labelTpl,labelContext:{data:{...o}},id:o.id,value:{...o},expanded:!0,name:o.name,children:o?.children?this.toNode(o.children):[]}))}set nodes(t){this._nodes=this.toNode(t),this.changeDetectionRef.detectChanges()}get nodes(){return this._nodes}constructor(t,o,_,a,r,s,c,u,p,T,f,G,S,O,C){this.modalService=t,this.timerService=o,this.authStorageService=_,this.actionLabels=a,this.timerServiceVariable=r,this.router=s,this.rgwRealmService=c,this.rgwZonegroupService=u,this.rgwZoneService=p,this.rgwDaemonService=T,this.mgrModuleService=f,this.notificationService=G,this.cdsModalService=S,this.rgwMultisiteService=O,this.changeDetectionRef=C,this.sub=new U.Subscription,this.messages={noDefaultRealm:"Please create a default realm first to enable this feature",noMasterZone:"Please create a master zone for each zone group to enable this feature",noRealmExists:"No realm exists",disableExport:"Please create master zone group and master zone for each of the realms"},this.icons=y.FI,this.selection=new Oe.y,this.loadingIndicator=!0,this._nodes=[],this.realms=[],this.zonegroups=[],this.zones=[],this.realmIds=[],this.zoneIds=[],this.defaultRealmId="",this.defaultZonegroupId="",this.defaultZoneId="",this.multisiteInfo=[],this.defaultsInfo=[],this.showMigrateAndReplicationActions=!1,this.editTitle="Edit",this.deleteTitle="Delete",this.disableExport=!0,this.restartGatewayMessage=!1,this.rgwModuleData=[],this.MODULE_NAME="rgw",this.NAVIGATE_TO="/rgw/multisite",this.permissions=this.authStorageService.getPermissions()}openModal(t,o=!1){const _=o?t?.data?.type:t,r={resource:_,action:o?"edit":"create",info:t,defaultsInfo:this.defaultsInfo,multisiteInfo:this.multisiteInfo};this.bsModalRef="realm"===_?this.cdsModalService.show(r1,r):this.modalService.show("zonegroup"===_?V1:N1,r,{size:"lg"})}openMultisiteSetupWizard(){this.bsModalRef=this.cdsModalService.show(ro)}openMigrateModal(){this.bsModalRef=this.modalService.show(Td,{multisiteInfo:this.multisiteInfo},{size:"lg"})}openImportModal(){this.bsModalRef=this.modalService.show(Jd,{multisiteInfo:this.multisiteInfo},{size:"lg"})}openExportModal(){this.bsModalRef=this.modalService.show(Wd,{defaultsInfo:this.defaultsInfo,multisiteInfo:this.multisiteInfo},{size:"lg"})}getDisableExport(){return this.realms.forEach(t=>{this.zonegroups.forEach(o=>{t.id===o.realm_id&&o.is_master&&""!==o.master_zone&&(this.disableExport=!1)})}),!this.rgwModuleStatus||(this.realms.length<1?this.messages.noRealmExists:!!this.disableExport&&this.messages.disableExport)}getDisableImport(){return!this.rgwModuleStatus}ngOnInit(){this.createTableActions=[{permission:"create",icon:y.FI.add,name:this.actionLabels.CREATE+" Realm",click:()=>this.openModal("realm")},{permission:"create",icon:y.FI.add,name:this.actionLabels.CREATE+" Zone Group",click:()=>this.openModal("zonegroup"),disable:()=>this.getDisable()},{permission:"create",icon:y.FI.add,name:this.actionLabels.CREATE+" Zone",click:()=>this.openModal("zone")}],this.migrateTableAction=[{permission:"create",icon:y.FI.wrench,name:this.actionLabels.MIGRATE,click:()=>this.openMigrateModal()}],this.importAction=[{permission:"create",icon:y.FI.download,name:this.actionLabels.IMPORT,click:()=>this.openImportModal(),disable:()=>this.getDisableImport()}],this.exportAction=[{permission:"create",icon:y.FI.upload,name:this.actionLabels.EXPORT,click:()=>this.openExportModal(),disable:()=>this.getDisableExport()}],this.multisiteReplicationActions=[{permission:"create",icon:y.FI.wrench,name:this.actionLabels.SETUP_MULTISITE_REPLICATION,click:()=>this.router.navigate(["rgw/multisite/configuration",{outlets:{modal:"setup-multisite-replication"}}])}],this.startPollingMultisiteInfo(),this.mgrModuleService.updateCompleted$.subscribe(()=>{this.startPollingMultisiteInfo(),this.getRgwModuleStatus()}),this.permissions.configOpt.read&&this.getRgwModuleStatus()}startPollingMultisiteInfo(){const t=[this.rgwRealmService.getAllRealmsInfo(),this.rgwZonegroupService.getAllZonegroupsInfo(),this.rgwZoneService.getAllZonesInfo()];this.sub&&this.sub.unsubscribe(),this.sub=this.timerService.get(()=>(0,U.forkJoin)(t),2*this.timerServiceVariable.TIMER_SERVICE_PERIOD).subscribe(o=>{this.multisiteInfo=o,this.loadingIndicator=!1,this.nodes=this.abstractTreeData(o)},o=>{})}ngOnDestroy(){this.sub.unsubscribe()}getRgwModuleStatus(){this.rgwMultisiteService.getRgwModuleStatus().subscribe(t=>{this.rgwModuleStatus=t})}abstractTreeData(t){let o=[],_={},a={},r=[],s={},c=[];if(this.realms=t[0].realms,this.zonegroups=t[1].zonegroups,this.zones=t[2].zones,this.defaultRealmId=t[0].default_realm,this.defaultZonegroupId=t[1].default_zonegroup,this.defaultZoneId=t[2].default_zone,this.defaultsInfo=this.getDefaultsEntities(this.defaultRealmId,this.defaultZonegroupId,this.defaultZoneId),this.realms.length>0)for(const u of this.realms){const p=this.rgwRealmService.getRealmTree(u,this.defaultRealmId);_=p.nodes,this.realmIds=this.realmIds.concat(p.realmIds);for(const T of this.zonegroups)if(T.realm_id===u.id){a=this.rgwZonegroupService.getZonegroupTree(T,this.defaultZonegroupId,u);for(const f of T.zones){const G=this.rgwZoneService.getZoneTree(f,this.defaultZoneId,this.zones,T,u);s=G.nodes,this.zoneIds=this.zoneIds.concat(G.zoneIds),c.push(s),s={}}c=c.map(f=>({...f,parentNode:a})),a.children=c,c=[],r.push(a),a={}}r=r.map(T=>({...T,parentNode:_})),_.children=r,o.push({..._,label:_?.name||_?.id}),a={},s={},_={},r=[],c=[]}if(this.zonegroups.length>0)for(const u of this.zonegroups)if(!this.realmIds.includes(u.realm_id)){_=this.rgwZonegroupService.getZonegroupTree(u,this.defaultZonegroupId);for(const p of u.zones){const T=this.rgwZoneService.getZoneTree(p,this.defaultZoneId,this.zones,u);a=T.nodes,this.zoneIds=this.zoneIds.concat(T.zoneIds),r.push(a),a={}}r=r.map(p=>({...p,parentNode:_})),_.children=r,o.push({..._,label:_?.name||_?.id}),a={},_={},r=[]}if(this.zones.length>0)for(const u of this.zones)this.zoneIds.length>0&&!this.zoneIds.includes(u.id)&&(_=this.rgwZoneService.getZoneTree(u,this.defaultZoneId,this.zones).nodes,o.push({..._,label:_?.name||_?.id}),_={});return this.realms.length<1&&this.zonegroups.length<1&&this.zones.length<1?[{name:"No nodes!",label:"No nodes!"}]:(this.realmIds=[],this.zoneIds=[],this.evaluateMigrateAndReplicationActions(),this.rgwMultisiteService.restartGatewayMessage$.subscribe(u=>{null!==u?this.restartGatewayMessage=u:this.checkRestartGatewayMessage()}),o)}checkRestartGatewayMessage(){this.rgwDaemonService.list().subscribe(t=>{const o=t.map(_=>_.realm_name);this.restartGatewayMessage=!(""===this.defaultRealmId||""===this.defaultZonegroupId||""===this.defaultZoneId||!o.includes(""))})}getDefaultsEntities(t,o,_){const a=this.realms?.find(c=>c.id===t),r=this.zonegroups?.find(c=>c.id===o),s=this.zones?.find(c=>c.id===_);return{defaultRealmName:a?.name,defaultZonegroupName:r?.name,defaultZoneName:s?.name}}onNodeSelected(t){this.metadataTitle=t?.value?.name,this.metadata=t?.value?.info,this.activeNodeId=t?.value?.id,t.expanded=!0}getDisable(){let t=!0;return""===this.defaultRealmId?this.messages.noDefaultRealm:(this.zonegroups.forEach(o=>{A().isEmpty(o.master_zone)&&(t=!1)}),t?(setTimeout(()=>{this.editTitle="Edit"},1),!1):(setTimeout(()=>{this.editTitle="Please create a master zone for each existing zonegroup to enable this feature"},1),this.messages.noMasterZone))}evaluateMigrateAndReplicationActions(){return this.showMigrateAndReplicationActions=0===this.realms.length&&1===this.zonegroups.length&&"default"===this.zonegroups[0].name&&1===this.zones.length&&"default"===this.zones[0].name,this.showMigrateAndReplicationActions}isDeleteDisabled(t){let o=!1,_=this.deleteTitle,a=0;if("realm"===t?.value?.type&&t?.data?.is_default&&this.realms.length<2&&(o=!0),"zonegroup"===t?.data?.type)if(this.zonegroups.length<2)_="You can not delete the only zonegroup available",o=!0;else if(t?.data?.is_default)_="You can not delete the default zonegroup",o=!0;else if(t?.data?.is_master){for(let r of this.zonegroups)if(!0===r.is_master&&(a++,a>1))break;a<2&&(_="You can not delete the only master zonegroup available",o=!0)}return"zone"===t?.data?.type&&(this.zones.length<2?(_="You can not delete the only zone available",o=!0):t?.data?.is_default?(_="You can not delete the default zone",o=!0):t?.data?.is_master&&t?.data?.zone_zonegroup.zones.length<2&&(_="You can not delete the master zone as there are no more zones in this zonegroup",o=!0)),o||(this.deleteTitle="Delete"),{isDisabled:o,deleteTitle:_}}delete(t){if("realm"===t?.data?.type){const o=this.cdsModalService.show(Ue.D,{itemDescription:"" + t?.data?.type + " " + t?.data?.name + "",itemNames:[`${t?.data?.name}`],submitAction:()=>{this.rgwRealmService.delete(t?.data?.name).subscribe(()=>{this.notificationService.show(w._.success,"Realm: '" + t?.data?.name + "' deleted successfully"),this.cdsModalService.dismissAll()},()=>{this.cdsModalService.stopLoadingSpinner(o.deletionForm)})}})}else"zonegroup"===t?.data?.type?this.modalRef=this.modalService.show(Nd,{zonegroup:t.data}):"zone"===t?.data?.type&&(this.modalRef=this.modalService.show(Cd,{zone:t.data}))}enableRgwModule(){this.mgrModuleService.updateModuleState(this.MODULE_NAME,!1,null,this.NAVIGATE_TO,"Enabled RGW Module",!0)}static{this.\u0275fac=function(o){return new(o||n)(e.\u0275\u0275directiveInject(vt.B),e.\u0275\u0275directiveInject(od.H),e.\u0275\u0275directiveInject(be.v),e.\u0275\u0275directiveInject(P.Ss),e.\u0275\u0275directiveInject(P.YV),e.\u0275\u0275directiveInject(Q.Router),e.\u0275\u0275directiveInject(Mt.$),e.\u0275\u0275directiveInject(ke.Z),e.\u0275\u0275directiveInject(Ot.w),e.\u0275\u0275directiveInject($e.y),e.\u0275\u0275directiveInject(io.a),e.\u0275\u0275directiveInject(ne.J),e.\u0275\u0275directiveInject(he.V),e.\u0275\u0275directiveInject(xe.A),e.\u0275\u0275directiveInject(e.ChangeDetectorRef))}}static{this.\u0275cmp=e.\u0275\u0275defineComponent({type:n,selectors:[["cd-rgw-multisite-details"]],viewQuery:function(o,_){if(1&o&&(e.\u0275\u0275viewQuery(Xp,5),e.\u0275\u0275viewQuery(co,5)),2&o){let a;e.\u0275\u0275queryRefresh(a=e.\u0275\u0275loadQuery())&&(_.labelTpl=a.first),e.\u0275\u0275queryRefresh(a=e.\u0275\u0275loadQuery())&&(_.syncPolicyComp=a.first)}},decls:24,vars:19,consts:()=>{let t,o,_;return t="Topology Viewer",o=" In order to access the import/export feature, the rgw module must be enabled. ",_="Please restart all Ceph Object Gateway instances in all zones to ensure consistent multisite configuration updates. " + "\ufffd#2\ufffd" + " Cluster->Services" + "\ufffd/#2\ufffd" + "",[["tree",""],["nodeTemplateRef",""],["treeNodeTemplate",""],t,o,_,["type","info","spacingClass","mb-3","class","align-items-center","actionName","Enable",3,"action",4,"ngIf"],["type","warning","spacingClass","mb-3",4,"ngIf"],[1,"btn-group","mb-4","me-2",3,"permission","selection","tableActions"],["class","btn-group mb-4 me-2 secondary",3,"permission","btnColor","selection","tableActions",4,"ngIf"],["class","btn-group mb-4 me-2",3,"permission","selection","tableActions","primaryDropDown",4,"ngIf"],[1,"btn-group","mb-4","me-2",3,"permission","btnColor","selection","tableActions"],[1,"card"],["data-testid","rgw-multisite-details-header",1,"card-header"],[1,"row"],[1,"col-sm-6","col-lg-6","tree-container"],[3,"ngClass",4,"ngIf"],[3,"select","isMultiSelect"],[4,"ngFor","ngForOf"],["class","col-sm-6 col-lg-6 metadata",4,"ngIf"],["name","modal"],["type","info","spacingClass","mb-3","actionName","Enable",1,"align-items-center",3,"action"],["type","warning","spacingClass","mb-3"],["routerLink","/services",1,"text-decoration-underline"],[1,"btn-group","mb-4","me-2","secondary",3,"permission","btnColor","selection","tableActions"],[1,"btn-group","mb-4","me-2",3,"permission","selection","tableActions","primaryDropDown"],[3,"ngClass"],[3,"node","depth"],[4,"ngIf"],[4,"ngTemplateOutlet","ngTemplateOutletContext"],[1,"w-100","d-flex","justify-content-between","align-items-center","pe-1"],["class","me-3",4,"ngIf"],["class","badge badge-success me-2",4,"ngIf"],["class","badge badge-warning me-2",4,"ngIf"],["role","group",1,"btn-group","align-inline-btns",3,"ngStyle"],[3,"title"],["type","button",1,"btn","btn-light","dropdown-toggle-split","ms-1",3,"click","disabled"],[1,"cds-info-color",3,"cdsIcon","size"],[1,"me-3"],[3,"cdsIcon","size",4,"ngIf"],[1,"cds-danger-color",3,"cdsIcon","size","title"],[3,"cdsIcon","size"],[1,"badge","badge-success","me-2"],[1,"badge","badge-warning","me-2"],["type","button",1,"btn","btn-light","ms-1",3,"click","disabled"],[1,"col-sm-6","col-lg-6","metadata"],[3,"data"]]},template:function(o,_){if(1&o){const a=e.\u0275\u0275getCurrentView();e.\u0275\u0275element(0,"cd-rgw-multisite-tabs"),e.\u0275\u0275elementStart(1,"div"),e.\u0275\u0275template(2,qp,2,0,"cd-alert-panel",6)(3,jp,3,0,"cd-alert-panel",7),e.\u0275\u0275element(4,"cd-table-actions",8),e.\u0275\u0275template(5,Yp,1,4,"cd-table-actions",9)(6,Qp,1,4,"cd-table-actions",10),e.\u0275\u0275element(7,"cd-table-actions",11)(8,"cd-table-actions",11),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(9,"div",12)(10,"div",13),e.\u0275\u0275i18n(11,3),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(12,"div",14)(13,"div",15),e.\u0275\u0275template(14,Jp,1,5,"i",16),e.\u0275\u0275elementStart(15,"cds-tree-view",17,0),e.\u0275\u0275listener("select",function(s){return e.\u0275\u0275restoreView(a),e.\u0275\u0275resetView(_.onNodeSelected(s))}),e.\u0275\u0275template(17,om,2,3,"ng-template",null,1,e.\u0275\u0275templateRefExtractor)(19,pm,11,12,"ng-template",null,2,e.\u0275\u0275templateRefExtractor)(21,Tm,2,4,"ng-container",18),e.\u0275\u0275elementEnd()(),e.\u0275\u0275template(22,gm,5,2,"div",19),e.\u0275\u0275elementEnd()(),e.\u0275\u0275element(23,"router-outlet",20)}2&o&&(e.\u0275\u0275advance(2),e.\u0275\u0275property("ngIf",_.permissions.configOpt.create&&!_.rgwModuleStatus),e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf",_.restartGatewayMessage),e.\u0275\u0275advance(),e.\u0275\u0275property("permission",_.permissions.rgw)("selection",_.selection)("tableActions",_.multisiteReplicationActions),e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf",_.showMigrateAndReplicationActions),e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf",!_.showMigrateAndReplicationActions),e.\u0275\u0275advance(),e.\u0275\u0275property("permission",_.permissions.rgw)("btnColor","light")("selection",_.selection)("tableActions",_.importAction),e.\u0275\u0275advance(),e.\u0275\u0275property("permission",_.permissions.rgw)("btnColor","light")("selection",_.selection)("tableActions",_.exportAction),e.\u0275\u0275advance(6),e.\u0275\u0275property("ngIf",_.loadingIndicator),e.\u0275\u0275advance(),e.\u0275\u0275property("isMultiSelect",!1),e.\u0275\u0275advance(6),e.\u0275\u0275property("ngForOf",_.nodes),e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf",_.metadata))},dependencies:[E.NgClass,E.NgForOf,E.NgIf,E.NgTemplateOutlet,E.NgStyle,Pe.m,Kt.i,De.j,Y.S,Q.RouterOutlet,Q.RouterLink,d.TreeViewComponent,d.TreeNodeComponent,d.IconDirective,so],styles:[".tree-container[_ngcontent-%COMP%]{height:calc(100vh - 200px);overflow-y:auto}.align-inline-btns[_ngcontent-%COMP%]{margin-left:5em}.btn[_ngcontent-%COMP%]:disabled{pointer-events:none}  .cds--tree-node__label__details{padding-block:.5rem;width:100%}"],changeDetection:0})}}return n})();var Cm=g(10522),uo=g(9300),fm=g(61065),Sm=g(32380),Fm=g(67344),Mm=g(29947),Pm=g(78845),Im=g(11378),Om=g(47830);const Gm=(n,i)=>[n,i];let Nm=(()=>{class n{constructor(){this.icons=y.FI}static{this.\u0275fac=function(o){return new(o||n)}}static{this.\u0275cmp=e.\u0275\u0275defineComponent({type:n,selectors:[["cd-rgw-sync-primary-zone"]],inputs:{realm:"realm",zonegroup:"zonegroup",zone:"zone"},decls:17,vars:13,consts:[[1,"pb-5"],[1,"cds-icon--size-07",3,"cdsIcon","size"],[1,"badge","badge-info","mt-2"],[1,"cds-icon--size-07",3,"cdsIcon"],[1,"mt-2",3,"ngClass"],[1,"cds-icon--size-07","cds-icon",3,"cdsIcon","size"]],template:function(o,_){1&o&&(e.\u0275\u0275elementStart(0,"ul",0)(1,"li"),e.\u0275\u0275namespaceSVG(),e.\u0275\u0275element(2,"svg",1),e.\u0275\u0275elementEnd(),e.\u0275\u0275namespaceHTML(),e.\u0275\u0275elementStart(3,"li",2),e.\u0275\u0275text(4),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(5,"li"),e.\u0275\u0275namespaceSVG(),e.\u0275\u0275element(6,"svg",3),e.\u0275\u0275elementEnd(),e.\u0275\u0275namespaceHTML(),e.\u0275\u0275elementStart(7,"li"),e.\u0275\u0275element(8,"i",4),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(9,"p",2),e.\u0275\u0275text(10),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(11,"li"),e.\u0275\u0275namespaceSVG(),e.\u0275\u0275element(12,"svg",3),e.\u0275\u0275elementEnd(),e.\u0275\u0275namespaceHTML(),e.\u0275\u0275elementStart(13,"li"),e.\u0275\u0275namespaceSVG(),e.\u0275\u0275element(14,"svg",5),e.\u0275\u0275elementEnd(),e.\u0275\u0275namespaceHTML(),e.\u0275\u0275elementStart(15,"li",2),e.\u0275\u0275text(16),e.\u0275\u0275elementEnd()()),2&o&&(e.\u0275\u0275advance(2),e.\u0275\u0275property("cdsIcon",_.icons.reweight)("size",_.icons.size20),e.\u0275\u0275advance(2),e.\u0275\u0275textInterpolate(_.realm),e.\u0275\u0275advance(2),e.\u0275\u0275property("cdsIcon",_.icons.down),e.\u0275\u0275advance(2),e.\u0275\u0275property("ngClass",e.\u0275\u0275pureFunction2(10,Gm,_.icons.large2x,_.icons.cubes)),e.\u0275\u0275advance(2),e.\u0275\u0275textInterpolate(_.zonegroup),e.\u0275\u0275advance(2),e.\u0275\u0275property("cdsIcon",_.icons.down),e.\u0275\u0275advance(2),e.\u0275\u0275property("cdsIcon",_.icons.deploy)("size",_.icons.size20),e.\u0275\u0275advance(2),e.\u0275\u0275textInterpolate(_.zone))},dependencies:[E.NgClass,d.IconDirective],styles:["ul[_ngcontent-%COMP%]{align-items:center;display:flex;flex-direction:column;list-style-type:none}.align-primary-zone[_ngcontent-%COMP%]{padding-left:4em}"]})}}return n})();var po=g(39113);function Am(n,i){1&n&&(e.\u0275\u0275elementStart(0,"span")(1,"ul",11)(2,"li")(3,"b"),e.\u0275\u0275i18n(4,2),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(5,"li"),e.\u0275\u0275text(6,"No Sync"),e.\u0275\u0275elementEnd()()())}function hm(n,i){1&n&&(e.\u0275\u0275elementStart(0,"li",21),e.\u0275\u0275i18n(1,6),e.\u0275\u0275elementEnd())}function bm(n,i){if(1&n&&(e.\u0275\u0275elementStart(0,"a",24),e.\u0275\u0275i18n(1,7),e.\u0275\u0275pipe(2,"titlecase"),e.\u0275\u0275elementEnd()),2&n){const t=e.\u0275\u0275nextContext(3);e.\u0275\u0275advance(2),e.\u0275\u0275i18nExp(e.\u0275\u0275pipeBind1(2,1,t.metadataSyncInfo.syncstatus)),e.\u0275\u0275i18nApply(1)}}function vm(n,i){1&n&&(e.\u0275\u0275elementStart(0,"a",25),e.\u0275\u0275i18n(1,8),e.\u0275\u0275elementEnd())}function Lm(n,i){if(1&n&&e.\u0275\u0275template(0,bm,3,3,"a",22)(1,vm,2,0,"a",23),2&n){const t=e.\u0275\u0275nextContext(2);e.\u0275\u0275property("ngIf","Not Syncing From Zone"!==t.metadataSyncInfo.syncstatus),e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf","Not Syncing From Zone"===t.metadataSyncInfo.syncstatus)}}function ym(n,i){if(1&n&&(e.\u0275\u0275elementStart(0,"li"),e.\u0275\u0275namespaceSVG(),e.\u0275\u0275element(1,"svg",26),e.\u0275\u0275namespaceHTML(),e.\u0275\u0275elementStart(2,"a",27),e.\u0275\u0275i18n(3,9),e.\u0275\u0275elementEnd()()),2&n){const t=e.\u0275\u0275nextContext(2);e.\u0275\u0275advance(),e.\u0275\u0275property("cdsIcon",t.icons.danger)("size",t.icons.size16)}}function $m(n,i){if(1&n&&(e.\u0275\u0275elementStart(0,"span")(1,"b"),e.\u0275\u0275text(2),e.\u0275\u0275pipe(3,"titlecase"),e.\u0275\u0275elementEnd(),e.\u0275\u0275text(4),e.\u0275\u0275pipe(5,"titlecase"),e.\u0275\u0275elementEnd()),2&n){const t=e.\u0275\u0275nextContext(2).$implicit;e.\u0275\u0275advance(2),e.\u0275\u0275textInterpolate(e.\u0275\u0275pipeBind1(3,2,t.split(":")[0])),e.\u0275\u0275advance(2),e.\u0275\u0275textInterpolate1(":",e.\u0275\u0275pipeBind1(5,4,t.split(":")[1])," ")}}function Dm(n,i){if(1&n&&(e.\u0275\u0275elementStart(0,"span")(1,"b"),e.\u0275\u0275text(2),e.\u0275\u0275pipe(3,"titlecase"),e.\u0275\u0275elementEnd()()),2&n){const t=e.\u0275\u0275nextContext(2).$implicit;e.\u0275\u0275advance(2),e.\u0275\u0275textInterpolate(e.\u0275\u0275pipeBind1(3,1,t))}}function Wm(n,i){if(1&n&&(e.\u0275\u0275elementStart(0,"span"),e.\u0275\u0275template(1,$m,6,6,"span",10)(2,Dm,4,3,"span",10),e.\u0275\u0275elementEnd()),2&n){const t=e.\u0275\u0275nextContext().$implicit;e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf",null==t?null:t.includes(":")),e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf",!(null!=t&&t.includes(":")))}}function xm(n,i){if(1&n&&(e.\u0275\u0275elementStart(0,"span"),e.\u0275\u0275text(1),e.\u0275\u0275pipe(2,"titlecase"),e.\u0275\u0275elementEnd()),2&n){const t=e.\u0275\u0275nextContext().$implicit;e.\u0275\u0275advance(),e.\u0275\u0275textInterpolate1(" ",e.\u0275\u0275pipeBind1(2,1,t)," ")}}function wm(n,i){if(1&n&&(e.\u0275\u0275elementStart(0,"li"),e.\u0275\u0275template(1,Wm,3,2,"span",10)(2,xm,3,3,"span",10),e.\u0275\u0275elementEnd()),2&n){const t=i.$implicit,o=e.\u0275\u0275nextContext(2);e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf",!(null!=t&&t.includes(o.metadataSyncInfo.syncstatus)||null!=t&&t.includes("failed")||null!=t&&t.includes("error"))),e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf",(null==t?null:t.includes("failed"))||(null==t?null:t.includes("error")))}}function Um(n,i){if(1&n&&(e.\u0275\u0275elementStart(0,"li",28),e.\u0275\u0275text(1),e.\u0275\u0275pipe(2,"relativeDate"),e.\u0275\u0275elementEnd()),2&n){const t=e.\u0275\u0275nextContext(2);e.\u0275\u0275advance(),e.\u0275\u0275textInterpolate(e.\u0275\u0275pipeBind1(2,1,t.metadataSyncInfo.timestamp))}}function km(n,i){if(1&n&&(e.\u0275\u0275elementStart(0,"span")(1,"ul",11),e.\u0275\u0275template(2,hm,2,0,"ng-template",null,0,e.\u0275\u0275templateRefExtractor),e.\u0275\u0275elementStart(4,"cds-toggletip",12)(5,"div",13),e.\u0275\u0275template(6,Lm,2,2,"ng-template",null,1,e.\u0275\u0275templateRefExtractor),e.\u0275\u0275elementStart(8,"li")(9,"b"),e.\u0275\u0275i18n(10,3),e.\u0275\u0275elementEnd()(),e.\u0275\u0275template(11,ym,4,2,"li",14),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(12,"div",15)(13,"div",16)(14,"ul",17)(15,"li")(16,"h5")(17,"b"),e.\u0275\u0275i18n(18,4),e.\u0275\u0275elementEnd()()(),e.\u0275\u0275template(19,wm,3,2,"li",18),e.\u0275\u0275elementEnd()()()(),e.\u0275\u0275elementStart(20,"li",19),e.\u0275\u0275i18n(21,5),e.\u0275\u0275elementEnd(),e.\u0275\u0275template(22,Um,3,3,"li",20),e.\u0275\u0275elementEnd()()),2&n){const t=e.\u0275\u0275reference(3),o=e.\u0275\u0275reference(7),_=e.\u0275\u0275nextContext();e.\u0275\u0275advance(4),e.\u0275\u0275property("dropShadow",!0)("align",_.align),e.\u0275\u0275advance(7),e.\u0275\u0275property("ngIf",(null==_.metadataSyncInfo.syncstatus?null:_.metadataSyncInfo.syncstatus.includes("failed"))||(null==_.metadataSyncInfo.syncstatus?null:_.metadataSyncInfo.syncstatus.includes("error")))("ngIfElse",o),e.\u0275\u0275advance(8),e.\u0275\u0275property("ngForOf",_.metadataSyncInfo.fullSyncStatus),e.\u0275\u0275advance(3),e.\u0275\u0275property("ngIf",_.metadataSyncInfo.timestamp)("ngIfElse",t)}}let zm=(()=>{class n{constructor(){this.icons=y.FI,this.align="top",this.metadataSyncInfo={}}static{this.\u0275fac=function(o){return new(o||n)}}static{this.\u0275cmp=e.\u0275\u0275defineComponent({type:n,selectors:[["cd-rgw-sync-metadata-info"]],inputs:{metadataSyncInfo:"metadataSyncInfo"},decls:2,vars:2,consts:()=>{let t,o,_,a,r,s,c,u;return t="Status:",o="Status:",_="Metadata Sync Status:",a=" Last Synced: ",r="Up to Date",s="" + "\ufffd0\ufffd" + "",c="Not Syncing",u="Error",[["upToDateTpl",""],["showMetadataStatus",""],t,o,_,a,r,s,c,u,[4,"ngIf"],[1,"me-2"],[3,"dropShadow","align"],["cdsToggletipButton","",1,"toggleTipBtn"],[4,"ngIf","ngIfElse"],["cdsToggletipContent",""],[1,"cds--popover-scroll-container"],[1,"text-center"],[4,"ngFor","ngForOf"],[1,"mt-4","fw-bold"],["class","badge badge-info",4,"ngIf","ngIfElse"],[1,"badge","badge-success"],["class","lead text-primary","popoverClass","rgw-overview-card-popover",4,"ngIf"],["class","lead text-primary",4,"ngIf"],["popoverClass","rgw-overview-card-popover",1,"lead","text-primary"],[1,"lead","text-primary"],[1,"cds-danger-color",3,"cdsIcon","size"],[1,"lead","text-danger"],[1,"badge","badge-info"]]},template:function(o,_){1&o&&e.\u0275\u0275template(0,Am,7,0,"span",10)(1,km,23,7,"span",10),2&o&&(e.\u0275\u0275property("ngIf","no sync (zone is master)"===_.metadataSyncInfo),e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf","no sync (zone is master)"!==_.metadataSyncInfo))},dependencies:[E.NgForOf,E.NgIf,d.IconDirective,d.Toggletip,d.ToggletipButton,d.ToggletipContent,E.TitleCasePipe,po.D],styles:["ul[_ngcontent-%COMP%]{align-items:center;display:flex;flex-direction:column;list-style-type:none}.toggleTipBtn[_ngcontent-%COMP%]{flex-direction:column}"]})}}return n})();function Hm(n,i){1&n&&(e.\u0275\u0275elementStart(0,"li",18),e.\u0275\u0275i18n(1,4),e.\u0275\u0275elementEnd())}function Xm(n,i){if(1&n&&(e.\u0275\u0275elementStart(0,"a",20),e.\u0275\u0275i18n(1,5),e.\u0275\u0275pipe(2,"titlecase"),e.\u0275\u0275elementEnd()),2&n){const t=e.\u0275\u0275nextContext(2);e.\u0275\u0275advance(2),e.\u0275\u0275i18nExp(e.\u0275\u0275pipeBind1(2,1,t.zone.syncstatus)),e.\u0275\u0275i18nApply(1)}}function Bm(n,i){1&n&&(e.\u0275\u0275elementStart(0,"a",20),e.\u0275\u0275i18n(1,6),e.\u0275\u0275elementEnd())}function Vm(n,i){if(1&n&&e.\u0275\u0275template(0,Xm,3,3,"a",19)(1,Bm,2,0,"a",19),2&n){const t=e.\u0275\u0275nextContext();e.\u0275\u0275property("ngIf","Not Syncing From Zone"!==t.zone.syncstatus),e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf","Not Syncing From Zone"===t.zone.syncstatus)}}function Zm(n,i){if(1&n&&(e.\u0275\u0275elementStart(0,"li"),e.\u0275\u0275namespaceSVG(),e.\u0275\u0275element(1,"svg",21),e.\u0275\u0275namespaceHTML(),e.\u0275\u0275elementStart(2,"a",22),e.\u0275\u0275i18n(3,7),e.\u0275\u0275elementEnd()()),2&n){const t=e.\u0275\u0275nextContext();e.\u0275\u0275advance(),e.\u0275\u0275property("cdsIcon",t.icons.danger)("size",t.icons.size16)}}function Km(n,i){if(1&n&&(e.\u0275\u0275elementStart(0,"span")(1,"b"),e.\u0275\u0275text(2),e.\u0275\u0275pipe(3,"titlecase"),e.\u0275\u0275elementEnd(),e.\u0275\u0275text(4),e.\u0275\u0275pipe(5,"titlecase"),e.\u0275\u0275elementEnd()),2&n){const t=e.\u0275\u0275nextContext(2).$implicit;e.\u0275\u0275advance(2),e.\u0275\u0275textInterpolate(e.\u0275\u0275pipeBind1(3,2,t.split(": ")[0])),e.\u0275\u0275advance(2),e.\u0275\u0275textInterpolate1(":",e.\u0275\u0275pipeBind1(5,4,t.split(": ")[1])," ")}}function qm(n,i){if(1&n&&(e.\u0275\u0275elementStart(0,"span")(1,"b"),e.\u0275\u0275text(2),e.\u0275\u0275pipe(3,"titlecase"),e.\u0275\u0275elementEnd()()),2&n){const t=e.\u0275\u0275nextContext(2).$implicit;e.\u0275\u0275advance(2),e.\u0275\u0275textInterpolate(e.\u0275\u0275pipeBind1(3,1,t))}}function jm(n,i){if(1&n&&(e.\u0275\u0275elementStart(0,"span"),e.\u0275\u0275template(1,Km,6,6,"span",23)(2,qm,4,3,"span",23),e.\u0275\u0275elementEnd()),2&n){const t=e.\u0275\u0275nextContext().$implicit;e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf",null==t?null:t.includes(":")),e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf",!(null!=t&&t.includes(":")))}}function Ym(n,i){if(1&n&&(e.\u0275\u0275elementStart(0,"span"),e.\u0275\u0275text(1),e.\u0275\u0275pipe(2,"titlecase"),e.\u0275\u0275elementEnd()),2&n){const t=e.\u0275\u0275nextContext().$implicit;e.\u0275\u0275advance(),e.\u0275\u0275textInterpolate1(" ",e.\u0275\u0275pipeBind1(2,1,t)," ")}}function Qm(n,i){if(1&n&&(e.\u0275\u0275elementStart(0,"li"),e.\u0275\u0275template(1,jm,3,2,"span",23)(2,Ym,3,3,"span",23),e.\u0275\u0275elementEnd()),2&n){const t=i.$implicit,o=e.\u0275\u0275nextContext();e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf",!(null!=t&&t.includes(o.zone.name)||null!=t&&t.includes(o.zone.syncstatus)||null!=t&&t.includes("failed")||null!=t&&t.includes("error"))),e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf",(null==t?null:t.includes("failed"))||(null==t?null:t.includes("error")))}}function Jm(n,i){if(1&n&&(e.\u0275\u0275elementStart(0,"li",24),e.\u0275\u0275text(1),e.\u0275\u0275pipe(2,"relativeDate"),e.\u0275\u0275elementEnd()),2&n){const t=e.\u0275\u0275nextContext();e.\u0275\u0275advance(),e.\u0275\u0275textInterpolate(e.\u0275\u0275pipeBind1(2,1,t.zone.timestamp))}}let eT=(()=>{class n{constructor(){this.icons=y.FI,this.align="top",this.zone={}}static{this.\u0275fac=function(o){return new(o||n)}}static{this.\u0275cmp=e.\u0275\u0275defineComponent({type:n,selectors:[["cd-rgw-sync-data-info"]],inputs:{zone:"zone"},decls:22,vars:7,consts:()=>{let t,o,_,a,r,s;return t="Sync Status:",o=" Last Synced: ",_="Up to Date",a="" + "\ufffd0\ufffd" + "",r="Not Syncing",s="Error",[["upToDateTpl",""],["showStatus",""],t,o,_,a,r,s,[1,"me-2"],[3,"dropShadow","align"],["cdsToggletipButton","",1,"toggleTipBtn"],[4,"ngIf","ngIfElse"],["cdsToggletipContent",""],[1,"cds--popover-scroll-container"],[1,"text-center"],[4,"ngFor","ngForOf"],[1,"mt-4","fw-bold"],["class","badge badge-info",4,"ngIf","ngIfElse"],[1,"badge","badge-success"],["class","lead text-primary",4,"ngIf"],[1,"lead","text-primary"],[1,"cds-danger-color",3,"cdsIcon","size"],[1,"lead","text-danger"],[4,"ngIf"],[1,"badge","badge-info"]]},template:function(o,_){if(1&o&&(e.\u0275\u0275elementStart(0,"ul",8),e.\u0275\u0275template(1,Hm,2,0,"ng-template",null,0,e.\u0275\u0275templateRefExtractor),e.\u0275\u0275elementStart(3,"cds-toggletip",9)(4,"div",10),e.\u0275\u0275template(5,Vm,2,2,"ng-template",null,1,e.\u0275\u0275templateRefExtractor),e.\u0275\u0275elementStart(7,"li")(8,"b"),e.\u0275\u0275text(9,"Status:"),e.\u0275\u0275elementEnd()(),e.\u0275\u0275template(10,Zm,4,2,"li",11),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(11,"div",12)(12,"div",13)(13,"ul",14)(14,"li")(15,"h5")(16,"b"),e.\u0275\u0275i18n(17,2),e.\u0275\u0275elementEnd()()(),e.\u0275\u0275template(18,Qm,3,2,"li",15),e.\u0275\u0275elementEnd()()()(),e.\u0275\u0275elementStart(19,"li",16),e.\u0275\u0275i18n(20,3),e.\u0275\u0275elementEnd(),e.\u0275\u0275template(21,Jm,3,3,"li",17),e.\u0275\u0275elementEnd()),2&o){const a=e.\u0275\u0275reference(2),r=e.\u0275\u0275reference(6);e.\u0275\u0275advance(3),e.\u0275\u0275property("dropShadow",!0)("align",_.align),e.\u0275\u0275advance(7),e.\u0275\u0275property("ngIf",(null==_.zone.syncstatus?null:_.zone.syncstatus.includes("failed"))||(null==_.zone.syncstatus?null:_.zone.syncstatus.includes("error")))("ngIfElse",r),e.\u0275\u0275advance(8),e.\u0275\u0275property("ngForOf",_.zone.fullSyncStatus),e.\u0275\u0275advance(3),e.\u0275\u0275property("ngIf",_.zone.timestamp)("ngIfElse",a)}},dependencies:[E.NgForOf,E.NgIf,d.IconDirective,d.Toggletip,d.ToggletipButton,d.ToggletipContent,E.TitleCasePipe,po.D],styles:["ul[_ngcontent-%COMP%]{align-items:center;display:flex;flex-direction:column;list-style-type:none}.toggleTipBtn[_ngcontent-%COMP%]{flex-direction:column;text-align:center}"]})}}return n})();const tT=()=>["Requests/sec"],nT=n=>[n],mo=()=>["GET","PUT"],To=(n,i)=>[n,i],gn=(n,i,t)=>[n,i,t],oT=n=>({"border-left":n});function _T(n,i){if(1&n&&e.\u0275\u0275element(0,"cd-card-row",26),2&n){const t=e.\u0275\u0275nextContext();e.\u0275\u0275property("data",t.rgwDaemonCount)}}function iT(n,i){if(1&n&&e.\u0275\u0275element(0,"cd-card-row",27),2&n){const t=e.\u0275\u0275nextContext();e.\u0275\u0275property("data",t.rgwRealmCount)}}function aT(n,i){if(1&n&&e.\u0275\u0275element(0,"cd-card-row",28),2&n){const t=e.\u0275\u0275nextContext();e.\u0275\u0275property("data",t.rgwZonegroupCount)}}function rT(n,i){if(1&n&&e.\u0275\u0275element(0,"cd-card-row",29),2&n){const t=e.\u0275\u0275nextContext();e.\u0275\u0275property("data",t.rgwZoneCount)}}function lT(n,i){if(1&n&&e.\u0275\u0275element(0,"cd-card-row",30),2&n){const t=e.\u0275\u0275nextContext();e.\u0275\u0275property("data",t.rgwBucketCount)}}function sT(n,i){if(1&n&&e.\u0275\u0275element(0,"cd-card-row",31),2&n){const t=e.\u0275\u0275nextContext();e.\u0275\u0275property("data",t.UserCount)}}function cT(n,i){if(1&n&&e.\u0275\u0275element(0,"cd-card-row",32),2&n){const t=e.\u0275\u0275nextContext();e.\u0275\u0275property("data",t.objectCount)}}function dT(n,i){1&n&&(e.\u0275\u0275elementStart(0,"span",33)(1,"cd-alert-panel",34),e.\u0275\u0275i18nStart(2,1),e.\u0275\u0275element(3,"cd-doc",35),e.\u0275\u0275i18nEnd(),e.\u0275\u0275elementEnd()())}function uT(n,i){if(1&n&&(e.\u0275\u0275elementStart(0,"span",36),e.\u0275\u0275element(1,"i",37),e.\u0275\u0275elementEnd()),2&n){const t=e.\u0275\u0275nextContext();e.\u0275\u0275advance(),e.\u0275\u0275property("ngClass",e.\u0275\u0275pureFunction3(1,gn,t.icons.large3x,t.icons.spinner,t.icons.spin))}}function pT(n,i){if(1&n&&(e.\u0275\u0275elementStart(0,"span",36),e.\u0275\u0275element(1,"i",37),e.\u0275\u0275elementEnd()),2&n){const t=e.\u0275\u0275nextContext(3);e.\u0275\u0275advance(),e.\u0275\u0275property("ngClass",e.\u0275\u0275pureFunction3(1,gn,t.icons.large3x,t.icons.spinner,t.icons.spin))}}function mT(n,i){if(1&n&&(e.\u0275\u0275elementStart(0,"span",36),e.\u0275\u0275element(1,"cd-rgw-sync-primary-zone",43),e.\u0275\u0275elementEnd()),2&n){const t=e.\u0275\u0275nextContext(3);e.\u0275\u0275advance(),e.\u0275\u0275property("realm",t.realm)("zonegroup",t.zonegroup)("zone",t.zone)}}function TT(n,i){if(1&n&&(e.\u0275\u0275elementStart(0,"span",36),e.\u0275\u0275element(1,"i",37),e.\u0275\u0275elementEnd()),2&n){const t=e.\u0275\u0275nextContext(3);e.\u0275\u0275advance(),e.\u0275\u0275property("ngClass",e.\u0275\u0275pureFunction3(1,gn,t.icons.large3x,t.icons.spinner,t.icons.spin))}}function gT(n,i){if(1&n&&(e.\u0275\u0275elementStart(0,"span",51),e.\u0275\u0275element(1,"cd-rgw-sync-metadata-info",52),e.\u0275\u0275elementEnd()),2&n){const t=e.\u0275\u0275nextContext(6);e.\u0275\u0275advance(),e.\u0275\u0275property("metadataSyncInfo",t.metadataSyncInfo)}}function ET(n,i){if(1&n&&(e.\u0275\u0275elementStart(0,"span",53),e.\u0275\u0275element(1,"cd-rgw-sync-data-info",54),e.\u0275\u0275elementEnd()),2&n){const t=e.\u0275\u0275nextContext(2).$implicit;e.\u0275\u0275advance(),e.\u0275\u0275property("zone",t)}}function RT(n,i){if(1&n&&(e.\u0275\u0275elementStart(0,"cd-card",48),e.\u0275\u0275template(1,gT,2,1,"span",49)(2,ET,2,1,"span",50),e.\u0275\u0275elementEnd()),2&n){const t=i.$implicit;e.\u0275\u0275property("cardTitle",t)("ngClass",e.\u0275\u0275pureFunction1(6,oT,"Data Sync"===t))("alignItemsCenter",!0)("justifyContentCenter",!0),e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf","Metadata Sync"===t),e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf","Data Sync"===t)}}function CT(n,i){if(1&n&&(e.\u0275\u0275elementStart(0,"cd-card",45)(1,"div",46),e.\u0275\u0275template(2,RT,3,8,"cd-card",47),e.\u0275\u0275elementEnd()()),2&n){const t=i.$implicit,o=e.\u0275\u0275nextContext(4);e.\u0275\u0275propertyInterpolate("cardTitle",t.name),e.\u0275\u0275advance(2),e.\u0275\u0275property("ngForOf",o.chartTitles)}}function fT(n,i){if(1&n&&(e.\u0275\u0275elementStart(0,"div",3),e.\u0275\u0275template(1,CT,3,2,"cd-card",44),e.\u0275\u0275elementEnd()),2&n){const t=e.\u0275\u0275nextContext(3);e.\u0275\u0275advance(),e.\u0275\u0275property("ngForOf",t.replicaZonesInfo)("ngForTrackBy",t.trackByFn)}}function ST(n,i){if(1&n&&(e.\u0275\u0275elementStart(0,"div",39)(1,"cd-card",40),e.\u0275\u0275template(2,pT,2,5,"span",24)(3,mT,2,3,"span",24),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(4,"div",41)(5,"cd-card",42),e.\u0275\u0275template(6,TT,2,5,"span",24)(7,fT,2,2,"div",25),e.\u0275\u0275elementEnd()()()),2&n){const t=e.\u0275\u0275nextContext(2);e.\u0275\u0275advance(),e.\u0275\u0275property("alignItemsCenter",!0)("justifyContentCenter",!0),e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf",t.loading),e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf",!t.loading),e.\u0275\u0275advance(3),e.\u0275\u0275property("ngIf",t.loading),e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf",!t.loading)}}function FT(n,i){if(1&n&&(e.\u0275\u0275elementStart(0,"div",3),e.\u0275\u0275template(1,ST,8,6,"div",38),e.\u0275\u0275elementEnd()),2&n){const t=e.\u0275\u0275nextContext(),o=e.\u0275\u0275reference(30);e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf",t.showMultisiteCard)("ngIfElse",o)}}let MT=(()=>{class n{constructor(t,o,_,a,r,s,c,u,p,T){this.authStorageService=t,this.refreshIntervalService=o,this.rgwDaemonService=_,this.rgwRealmService=a,this.rgwZonegroupService=r,this.rgwZoneService=s,this.rgwBucketService=c,this.prometheusService=u,this.rgwMultisiteService=p,this.notificationService=T,this.icons=y.FI,this.interval=new U.Subscription,this.rgwDaemonCount=0,this.rgwRealmCount=0,this.rgwZonegroupCount=0,this.rgwZoneCount=0,this.rgwBucketCount=0,this.objectCount=0,this.UserCount=0,this.totalPoolUsedBytes=0,this.averageObjectSize=0,this.multisiteInfo=[],this.queriesResults={RGW_REQUEST_PER_SECOND:[],BANDWIDTH:[],AVG_GET_LATENCY:[],AVG_PUT_LATENCY:[]},this.chartTitles=["Metadata Sync","Data Sync"],this.replicaZonesInfo=[],this.showMultisiteCard=!0,this.loading=!0,this.subject=new U.ReplaySubject,this.permissions=this.authStorageService.getPermissions()}ngOnInit(){this.interval=this.refreshIntervalService.intervalData$.subscribe(()=>{this.fetchDataSub=(0,U.combineLatest)([this.rgwDaemonService.list(),this.rgwBucketService.fetchAndTransformBuckets(),this.rgwBucketService.totalNumObjects$,this.rgwBucketService.totalUsedCapacity$,this.rgwBucketService.averageObjectSize$,this.rgwBucketService.getTotalBucketsAndUsersLength()]).subscribe(([t,o,_,a,r,s])=>{this.rgwDaemonCount=t.length,this.objectCount=_,this.totalPoolUsedBytes=a,this.averageObjectSize=r,this.rgwBucketCount=s.buckets_count,this.UserCount=s.users_count}),this.getSyncStatus()}),this.realmSub=this.rgwRealmService.list().subscribe(t=>{this.rgwRealmCount=t.realms.length||0}),this.ZonegroupSub=this.rgwZonegroupService.list().subscribe(t=>{this.rgwZonegroupCount=t.zonegroups.length}),this.ZoneSUb=this.rgwZoneService.list().subscribe(t=>{this.rgwZoneCount=t.zones.length}),this.getPrometheusData(this.prometheusService.lastHourDateObject),this.multisiteSyncStatus$=this.subject.pipe((0,K.switchMap)(()=>this.rgwMultisiteService.getSyncStatus().pipe((0,K.tap)(t=>{this.loading=!1,this.replicaZonesInfo=t.dataSyncInfo,this.metadataSyncInfo=t.metadataSyncInfo,0===this.replicaZonesInfo.length&&(this.showMultisiteCard=!1,this.loading=!1),[this.realm,this.zonegroup,this.zone]=t.primaryZoneData}),(0,K.catchError)(t=>{t.preventDefault(),this.loading=!1,this.showMultisiteCard=!1;const o="Unable to fetch sync status";return this.notificationService.show(w._.error,o,t.error.detail||t.error.message),(0,U.of)(!0)}))),(0,K.shareReplay)(1))}ngOnDestroy(){this.interval?.unsubscribe(),this.realmSub?.unsubscribe(),this.ZonegroupSub?.unsubscribe(),this.ZoneSUb?.unsubscribe(),this.fetchDataSub?.unsubscribe(),this.prometheusService?.unsubscribe()}getPrometheusData(t){this.queriesResults=this.prometheusService.getRangeQueriesData(t,Fm.xg,this.queriesResults,!0)}getSyncStatus(){this.subject.next()}trackByFn(t){return t}static{this.\u0275fac=function(o){return new(o||n)(e.\u0275\u0275directiveInject(be.v),e.\u0275\u0275directiveInject(fm.s),e.\u0275\u0275directiveInject($e.y),e.\u0275\u0275directiveInject(Mt.$),e.\u0275\u0275directiveInject(ke.Z),e.\u0275\u0275directiveInject(Ot.w),e.\u0275\u0275directiveInject(Le.c),e.\u0275\u0275directiveInject(Sm.o),e.\u0275\u0275directiveInject(xe.A),e.\u0275\u0275directiveInject(ne.J))}}static{this.\u0275cmp=e.\u0275\u0275defineComponent({type:n,selectors:[["cd-rgw-overview-dashboard"]],decls:34,vars:38,consts:()=>{let t;return t=" Multi-site needs to be configured in order to see the multi-site sync status. Please consult the\xA0" + "\ufffd#3\ufffd" + "" + "\ufffd/#3\ufffd" + "\xA0on how to configure and enable the multi-site functionality. ",[["notConfigured",""],t,[1,"container-fluid"],[1,"row"],["cardTitle","Inventory","aria-label","Inventory card",1,"col-sm-3","px-3","d-flex"],["link","/rgw/daemon","title","Gateway","summaryType","simplified",3,"data",4,"ngIf"],["link","/rgw/multisite","title","Realm","summaryType","simplified",3,"data",4,"ngIf"],["link","/rgw/multisite","title","Zone Group","summaryType","simplified",3,"data",4,"ngIf"],["link","/rgw/multisite","title","Zone","summaryType","simplified",3,"data",4,"ngIf"],["link","/rgw/bucket","title","Bucket","summaryType","simplified",3,"data",4,"ngIf"],["link","/rgw/user","title","User","summaryType","simplified",3,"data",4,"ngIf"],["title","Object","summaryType","simplified",3,"data",4,"ngIf"],["cardTitle","Performance Statistics","ria-label","Performance Statistics card",1,"col-sm-6","d-flex"],[1,"ms-4","me-4","mt-0"],[3,"selectedTime"],["chartTitle","Requests/sec","dataUnits","",3,"labelsArray","dataArray"],["chartTitle","Latency","dataUnits","ms","decimals","2",3,"labelsArray","dataArray"],["chartTitle","Bandwidth","dataUnits","B",3,"labelsArray","dataArray"],[1,"col-lg-3"],["cardTitle","Used Capacity","aria-label","Used Capacity",1,"col-sm-2","d-flex","w-100","h-50","pb-3",3,"alignItemsCenter","justifyContentCenter"],[1,"ms-4","me-4","text-center"],["cardTitle","Average Object Size","aria-label","Avg Object Size",1,"col-sm-2","d-flex","w-100","h-50","pt-3",3,"alignItemsCenter","justifyContentCenter"],[1,"row","pt-4","pb-4"],["cardTitle","Multi-Site Sync Status"],["class","d-flex justify-content-center",4,"ngIf"],["class","row",4,"ngIf"],["link","/rgw/daemon","title","Gateway","summaryType","simplified",3,"data"],["link","/rgw/multisite","title","Realm","summaryType","simplified",3,"data"],["link","/rgw/multisite","title","Zone Group","summaryType","simplified",3,"data"],["link","/rgw/multisite","title","Zone","summaryType","simplified",3,"data"],["link","/rgw/bucket","title","Bucket","summaryType","simplified",3,"data"],["link","/rgw/user","title","User","summaryType","simplified",3,"data"],["title","Object","summaryType","simplified",3,"data"],[1,"pe-5","ps-5"],["type","info"],["section","multisite"],[1,"d-flex","justify-content-center"],[3,"ngClass"],["class","row pt-2",4,"ngIf","ngIfElse"],[1,"row","pt-2"],["cardTitle","Primary Source Zone",1,"col-lg-3","d-flex","justify-content-center","align-primary-zone",3,"alignItemsCenter","justifyContentCenter"],[1,"col-lg-9"],["cardTitle","Source Zones",1,"d-flex","h-100"],[3,"realm","zonegroup","zone"],["cardType","zone","shadowClass","true","class","col-sm-9 col-lg-6 align-replica-zones d-flex pt-4","aria-label","Source Zones Card",3,"cardTitle",4,"ngFor","ngForOf","ngForTrackBy"],["cardType","zone","shadowClass","true","aria-label","Source Zones Card",1,"col-sm-9","col-lg-6","align-replica-zones","d-flex","pt-4",3,"cardTitle"],[1,"row","pb-4","ps-3","pe-3"],["cardType","syncCards","removeBorder","true","class","col-sm-9 col-lg-6","aria-label","Charts Card",3,"cardTitle","ngClass","alignItemsCenter","justifyContentCenter",4,"ngFor","ngForOf"],["cardType","syncCards","removeBorder","true","aria-label","Charts Card",1,"col-sm-9","col-lg-6",3,"cardTitle","ngClass","alignItemsCenter","justifyContentCenter"],["class","me-2 text-center",4,"ngIf"],["class","me-2",4,"ngIf"],[1,"me-2","text-center"],[3,"metadataSyncInfo"],[1,"me-2"],[3,"zone"]]},template:function(o,_){if(1&o){const a=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"div",2)(1,"div",3)(2,"cd-card",4),e.\u0275\u0275template(3,_T,1,1,"cd-card-row",5)(4,iT,1,1,"cd-card-row",6)(5,aT,1,1,"cd-card-row",7)(6,rT,1,1,"cd-card-row",8)(7,lT,1,1,"cd-card-row",9)(8,sT,1,1,"cd-card-row",10)(9,cT,1,1,"cd-card-row",11),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(10,"cd-card",12)(11,"div",13)(12,"cd-dashboard-time-selector",14),e.\u0275\u0275listener("selectedTime",function(s){return e.\u0275\u0275restoreView(a),e.\u0275\u0275resetView(_.getPrometheusData(s))}),e.\u0275\u0275elementEnd(),e.\u0275\u0275element(13,"cd-dashboard-area-chart",15)(14,"cd-dashboard-area-chart",16)(15,"cd-dashboard-area-chart",17),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(16,"div",18)(17,"cd-card",19)(18,"span",20)(19,"h1"),e.\u0275\u0275text(20),e.\u0275\u0275pipe(21,"dimlessBinary"),e.\u0275\u0275elementEnd()()(),e.\u0275\u0275elementStart(22,"cd-card",21)(23,"span",20)(24,"h1"),e.\u0275\u0275text(25),e.\u0275\u0275pipe(26,"dimlessBinary"),e.\u0275\u0275elementEnd()()()()(),e.\u0275\u0275elementStart(27,"div",22)(28,"cd-card",23),e.\u0275\u0275template(29,dT,4,0,"ng-template",null,0,e.\u0275\u0275templateRefExtractor)(31,uT,2,5,"span",24)(32,FT,2,2,"div",25),e.\u0275\u0275pipe(33,"async"),e.\u0275\u0275elementEnd()()()}2&o&&(e.\u0275\u0275advance(3),e.\u0275\u0275property("ngIf",null!=_.rgwDaemonCount),e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf",null!=_.rgwRealmCount),e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf",null!=_.rgwZonegroupCount),e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf",null!=_.rgwZoneCount),e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf",null!=_.rgwBucketCount),e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf",null!=_.UserCount),e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf",null!=_.objectCount),e.\u0275\u0275advance(4),e.\u0275\u0275property("labelsArray",e.\u0275\u0275pureFunction0(27,tT))("dataArray",e.\u0275\u0275pureFunction1(28,nT,_.queriesResults.RGW_REQUEST_PER_SECOND)),e.\u0275\u0275advance(),e.\u0275\u0275property("labelsArray",e.\u0275\u0275pureFunction0(30,mo))("dataArray",e.\u0275\u0275pureFunction2(31,To,_.queriesResults.AVG_GET_LATENCY,_.queriesResults.AVG_PUT_LATENCY)),e.\u0275\u0275advance(),e.\u0275\u0275property("labelsArray",e.\u0275\u0275pureFunction0(34,mo))("dataArray",e.\u0275\u0275pureFunction2(35,To,_.queriesResults.GET_BANDWIDTH,_.queriesResults.PUT_BANDWIDTH)),e.\u0275\u0275advance(2),e.\u0275\u0275property("alignItemsCenter",!0)("justifyContentCenter",!0),e.\u0275\u0275advance(3),e.\u0275\u0275textInterpolate(e.\u0275\u0275pipeBind1(21,21,_.totalPoolUsedBytes)),e.\u0275\u0275advance(2),e.\u0275\u0275property("alignItemsCenter",!0)("justifyContentCenter",!0),e.\u0275\u0275advance(3),e.\u0275\u0275textInterpolate(e.\u0275\u0275pipeBind1(26,23,_.averageObjectSize)),e.\u0275\u0275advance(6),e.\u0275\u0275property("ngIf",_.loading),e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf",e.\u0275\u0275pipeBind1(33,25,_.multisiteSyncStatus$)))},dependencies:[E.NgClass,E.NgForOf,E.NgIf,Pe.m,cn.C,Mm.i,Pm.C,Im.P,Om.M,Nm,zm,eT,E.AsyncPipe,bt.l],styles:["hr[_ngcontent-%COMP%]{margin-bottom:2px;margin-top:2px}.list-group-item[_ngcontent-%COMP%]{border:0}.align-replica-zones[_ngcontent-%COMP%]{margin-left:auto;margin-right:auto;padding-left:2em;padding-right:2em}ul[_ngcontent-%COMP%]{align-items:center;display:flex;flex-direction:column;list-style-type:none}.align-primary-zone[_ngcontent-%COMP%]{padding-left:4em}.border-left[_ngcontent-%COMP%]{border-left:1px solid rgba(0,0,0,.1254901961)}"]})}}return n})();var PT=g(45518),go=g(80299);function IT(n,i){1&n&&(e.\u0275\u0275elementStart(0,"span",30),e.\u0275\u0275i18n(1,8),e.\u0275\u0275elementEnd())}function OT(n,i){1&n&&(e.\u0275\u0275elementStart(0,"span",30),e.\u0275\u0275i18n(1,9),e.\u0275\u0275elementEnd())}function GT(n,i){1&n&&(e.\u0275\u0275elementStart(0,"span",30),e.\u0275\u0275i18n(1,10),e.\u0275\u0275elementEnd())}function NT(n,i){if(1&n){const t=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"form",15,0)(2,"div",16)(3,"div",17)(4,"label",18),e.\u0275\u0275i18n(5,2),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(6,"div",19),e.\u0275\u0275element(7,"input",20),e.\u0275\u0275template(8,IT,2,0,"span",21),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(9,"div",17)(10,"label",22),e.\u0275\u0275i18n(11,3),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(12,"div",19)(13,"select",23)(14,"option",24),e.\u0275\u0275i18n(15,4),e.\u0275\u0275pipe(16,"upperFirst"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(17,"option",24),e.\u0275\u0275i18n(18,5),e.\u0275\u0275pipe(19,"upperFirst"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(20,"option",24),e.\u0275\u0275i18n(21,6),e.\u0275\u0275pipe(22,"upperFirst"),e.\u0275\u0275elementEnd()(),e.\u0275\u0275template(23,OT,2,0,"span",21),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(24,"div",17)(25,"label",25),e.\u0275\u0275i18n(26,7),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(27,"div",19),e.\u0275\u0275element(28,"input",26),e.\u0275\u0275template(29,GT,2,0,"span",21),e.\u0275\u0275elementEnd()()(),e.\u0275\u0275elementStart(30,"div",27)(31,"div",28)(32,"cd-form-button-panel",29),e.\u0275\u0275pipe(33,"titlecase"),e.\u0275\u0275pipe(34,"upperFirst"),e.\u0275\u0275listener("submitActionEvent",function(){e.\u0275\u0275restoreView(t);const _=e.\u0275\u0275nextContext();return e.\u0275\u0275resetView(_.submit())}),e.\u0275\u0275elementEnd()()()()}if(2&n){const t=e.\u0275\u0275reference(1),o=e.\u0275\u0275nextContext();e.\u0275\u0275property("formGroup",o.syncPolicyForm),e.\u0275\u0275advance(7),e.\u0275\u0275property("readonly",o.editing),e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf",o.syncPolicyForm.showError("group_id",t,"required")),e.\u0275\u0275advance(6),e.\u0275\u0275propertyInterpolate("value",o.syncPolicyStatus.ENABLED),e.\u0275\u0275advance(2),e.\u0275\u0275i18nExp(e.\u0275\u0275pipeBind1(16,15,o.syncPolicyStatus.ENABLED)),e.\u0275\u0275i18nApply(15),e.\u0275\u0275advance(),e.\u0275\u0275propertyInterpolate("value",o.syncPolicyStatus.ALLOWED),e.\u0275\u0275advance(2),e.\u0275\u0275i18nExp(e.\u0275\u0275pipeBind1(19,17,o.syncPolicyStatus.ALLOWED)),e.\u0275\u0275i18nApply(18),e.\u0275\u0275advance(),e.\u0275\u0275propertyInterpolate("value",o.syncPolicyStatus.FORBIDDEN),e.\u0275\u0275advance(2),e.\u0275\u0275i18nExp(e.\u0275\u0275pipeBind1(22,19,o.syncPolicyStatus.FORBIDDEN)),e.\u0275\u0275i18nApply(21),e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf",o.syncPolicyForm.showError("status",t,"required")),e.\u0275\u0275advance(5),e.\u0275\u0275property("ngbTypeahead",o.bucketDataSource),e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf",o.syncPolicyForm.showError("bucket_name",t,"bucketNameNotAllowed")),e.\u0275\u0275advance(3),e.\u0275\u0275property("form",o.syncPolicyForm)("disabled",o.syncPolicyForm.pending||o.syncPolicyForm.pristine||o.syncPolicyForm.invalid)("submitText",e.\u0275\u0275pipeBind1(33,21,o.action)+" "+e.\u0275\u0275pipeBind1(34,23,o.resource))}}let En=(()=>{class n extends tt.g{constructor(t,o,_,a,r,s,c){super(),this.router=t,this.route=o,this.actionLabels=_,this.fb=a,this.rgwMultisiteService=r,this.notificationService=s,this.rgwBucketService=c,this.editing=!1,this.syncPolicyStatus=H._4,this.bucketDataSource=u=>u.pipe((0,K.debounceTime)(200),(0,K.distinctUntilChanged)(),(0,K.mergeMap)(p=>this.getBucketTypeahead(p))),this.editing=this.router.url.includes("(modal:edit"),this.action=this.editing?this.actionLabels.EDIT:this.actionLabels.CREATE,this.resource="Sync Policy Group",this.createForm(),this.loadingReady(),this.pageURL="rgw/multisite/sync-policy"}ngOnInit(){this.editing&&this.route.paramMap.subscribe(t=>{const o=t.get("groupName");if(o){const _=t.get("bucketName");this.loadingStart(),this.rgwMultisiteService.getSyncPolicyGroup(o,_).subscribe(a=>{this.loadingReady(),a?(this.syncPolicyForm.get("bucket_name").disable(),this.syncPolicyForm.patchValue({group_id:a.id,status:a.status,bucket_name:_})):this.goToListView()})}})}goToListView(){this.router.navigate([this.pageURL,{outlets:{modal:null},state:{reload:!0}}])}createForm(){this.syncPolicyForm=this.fb.group({group_id:["",l.Validators.required],status:[`${this.syncPolicyStatus.ENABLED}`,l.Validators.required],bucket_name:["",,this.bucketExistence(!0)]})}submit(){this.syncPolicyForm.pristine?this.goToListView():this.syncPolicyForm.pending?this.syncPolicyForm.setErrors({cdSubmitButton:!0}):this.editing?this.rgwMultisiteService.modifySyncPolicyGroup(this.syncPolicyForm.getRawValue()).subscribe(()=>{this.notificationService.show(w._.success,"Modified Sync Policy Group '" + this.syncPolicyForm.getValue("group_id") + "'"),this.goToListView()},()=>{this.syncPolicyForm.setErrors({cdSubmitButton:!0})}):this.rgwMultisiteService.createSyncPolicyGroup(this.syncPolicyForm.getRawValue()).subscribe(()=>{this.notificationService.show(w._.success,"Created Sync Policy Group '" + this.syncPolicyForm.getValue("group_id") + "'"),this.goToListView()},()=>{this.syncPolicyForm.setErrors({cdSubmitButton:!0})})}bucketExistence(t){return o=>o.dirty?(0,U.timer)(500).pipe((0,K.switchMapTo)(this.rgwBucketService.exists(o.value)),(0,K.map)(_=>_===t?null:{bucketNameNotAllowed:!0})):(0,U.of)(null)}getBucketTypeahead(t){return A().isString(t)&&"/"!==t&&""!==t?this.rgwBucketService.list().pipe((0,K.map)(o=>o.filter(_=>_.toLowerCase().includes(t)).slice(0,15)),(0,K.catchError)(()=>(0,U.of)(["Error while retrieving bucket names."]))):(0,U.of)([])}static{this.\u0275fac=function(o){return new(o||n)(e.\u0275\u0275directiveInject(Q.Router),e.\u0275\u0275directiveInject(Q.ActivatedRoute),e.\u0275\u0275directiveInject(P.Ss),e.\u0275\u0275directiveInject(Ge.$),e.\u0275\u0275directiveInject(xe.A),e.\u0275\u0275directiveInject(ne.J),e.\u0275\u0275directiveInject(Le.c))}}static{this.\u0275cmp=e.\u0275\u0275defineComponent({type:n,selectors:[["cd-rgw-multisite-sync-policy-form"]],features:[e.\u0275\u0275InheritDefinitionFeature],decls:7,vars:8,consts:()=>{let t,o,_,a,r,s,c,u,p,T,f,G;return t="" + "\ufffd0\ufffd" + " " + "\ufffd1\ufffd" + "",o="Group Name...",_="Bucket Name...",a="Group Name",r="Status",s="" + "\ufffd0\ufffd" + "",c="" + "\ufffd0\ufffd" + "",u="" + "\ufffd0\ufffd" + "",p="Bucket Name",T="This field is required.",f="This field is required.",G="The bucket with chosen name does not exist.",[["frm","ngForm"],t,a,r,s,c,u,p,T,f,G,[3,"pageURL"],[1,"modal-title"],[1,"modal-content"],["novalidate","",3,"formGroup",4,"cdFormLoading"],["novalidate","",3,"formGroup"],[1,"modal-body"],[1,"form-group","row"],["for","group_id",1,"cd-col-form-label","required"],[1,"cd-col-form-input"],["id","group_id","name","group_id","type","text","placeholder",o,"formControlName","group_id",1,"form-control",3,"readonly"],["class","invalid-feedback",4,"ngIf"],["for","status",1,"cd-col-form-label","required"],["id","status","name","status","formControlName","status",1,"form-select"],[3,"value"],["for","bucket_name",1,"cd-col-form-label"],["id","bucket_name","name","bucket_name","type","text","placeholder",_,"formControlName","bucket_name",1,"form-control",3,"ngbTypeahead"],[1,"modal-footer"],[1,"text-right"],[3,"submitActionEvent","form","disabled","submitText"],[1,"invalid-feedback"]]},template:function(o,_){1&o&&(e.\u0275\u0275elementStart(0,"cd-modal",11)(1,"span",12),e.\u0275\u0275i18n(2,1),e.\u0275\u0275pipe(3,"titlecase"),e.\u0275\u0275pipe(4,"upperFirst"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementContainerStart(5,13),e.\u0275\u0275template(6,NT,35,25,"form",14),e.\u0275\u0275elementContainerEnd(),e.\u0275\u0275elementEnd()),2&o&&(e.\u0275\u0275property("pageURL",_.pageURL),e.\u0275\u0275advance(4),e.\u0275\u0275i18nExp(e.\u0275\u0275pipeBind1(3,4,_.action))(e.\u0275\u0275pipeBind1(4,6,_.resource)),e.\u0275\u0275i18nApply(2),e.\u0275\u0275advance(2),e.\u0275\u0275property("cdFormLoading",_.loading))},dependencies:[E.NgIf,Xe.z,_e.e,ft.G,Y.S,Be.a,We.C,oe.E,l.\u0275NgNoValidate,l.NgSelectOption,l.\u0275NgSelectMultipleOption,l.DefaultValueAccessor,l.SelectControlValueAccessor,l.NgControlStatus,l.NgControlStatusGroup,l.FormGroupDirective,l.FormControlName,v.NgbTypeahead,d.Option,E.TitleCasePipe,Ie.r]})}}return n})();const Eo=n=>({"text-muted":n});function AT(n,i){1&n&&(e.\u0275\u0275elementStart(0,"option",70),e.\u0275\u0275i18n(1,7),e.\u0275\u0275elementEnd())}function hT(n,i){1&n&&(e.\u0275\u0275elementStart(0,"option",71),e.\u0275\u0275i18n(1,8),e.\u0275\u0275elementEnd())}function bT(n,i){if(1&n&&(e.\u0275\u0275elementStart(0,"option",72),e.\u0275\u0275text(1),e.\u0275\u0275elementEnd()),2&n){const t=i.$implicit;e.\u0275\u0275property("value",t),e.\u0275\u0275advance(),e.\u0275\u0275textInterpolate(t)}}function vT(n,i){1&n&&(e.\u0275\u0275elementStart(0,"span",73),e.\u0275\u0275i18n(1,9),e.\u0275\u0275elementEnd())}function LT(n,i){if(1&n){const t=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"div")(1,"div",52)(2,"label",63),e.\u0275\u0275i18n(3,5),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(4,"div",64)(5,"select",65),e.\u0275\u0275listener("change",function(){e.\u0275\u0275restoreView(t);const _=e.\u0275\u0275nextContext();return e.\u0275\u0275resetView(_.setKmsProvider())}),e.\u0275\u0275template(6,AT,2,0,"option",66)(7,hT,2,0,"option",67)(8,bT,2,2,"option",68),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(9,"cd-help-text")(10,"span"),e.\u0275\u0275i18n(11,6),e.\u0275\u0275elementEnd()(),e.\u0275\u0275template(12,vT,2,0,"span",69),e.\u0275\u0275elementEnd()()()}if(2&n){const t=e.\u0275\u0275nextContext(),o=e.\u0275\u0275reference(6);e.\u0275\u0275advance(6),e.\u0275\u0275property("ngIf",null!==t.kmsProviders&&0===t.kmsProviders.length),e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf",null!==t.kmsProviders&&t.kmsProviders.length>0),e.\u0275\u0275advance(),e.\u0275\u0275property("ngForOf",t.kmsProviders),e.\u0275\u0275advance(4),e.\u0275\u0275property("ngIf",t.configForm.showError("kms_provider",o,"required"))}}function yT(n,i){if(1&n&&(e.\u0275\u0275elementStart(0,"option",72),e.\u0275\u0275text(1),e.\u0275\u0275elementEnd()),2&n){const t=i.$implicit;e.\u0275\u0275property("value",t),e.\u0275\u0275advance(),e.\u0275\u0275textInterpolate(t)}}function $T(n,i){1&n&&(e.\u0275\u0275elementStart(0,"span",73),e.\u0275\u0275i18n(1,12),e.\u0275\u0275elementEnd())}function DT(n,i){if(1&n&&(e.\u0275\u0275elementStart(0,"div")(1,"div",52)(2,"label",74),e.\u0275\u0275i18n(3,10),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(4,"div",64)(5,"select",75),e.\u0275\u0275template(6,yT,2,2,"option",68),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(7,"cd-help-text")(8,"span"),e.\u0275\u0275i18n(9,11),e.\u0275\u0275elementEnd()(),e.\u0275\u0275template(10,$T,2,0,"span",69),e.\u0275\u0275elementEnd()()()),2&n){const t=e.\u0275\u0275nextContext(2),o=e.\u0275\u0275reference(6);e.\u0275\u0275advance(6),e.\u0275\u0275property("ngForOf",t.authMethods),e.\u0275\u0275advance(4),e.\u0275\u0275property("ngIf",t.configForm.showError("auth",o,"required"))}}function WT(n,i){if(1&n&&(e.\u0275\u0275elementStart(0,"option",72),e.\u0275\u0275text(1),e.\u0275\u0275elementEnd()),2&n){const t=i.$implicit;e.\u0275\u0275property("value",t),e.\u0275\u0275advance(),e.\u0275\u0275textInterpolate(t)}}function xT(n,i){1&n&&(e.\u0275\u0275elementStart(0,"span",73),e.\u0275\u0275i18n(1,15),e.\u0275\u0275elementEnd())}function wT(n,i){if(1&n&&(e.\u0275\u0275elementStart(0,"div")(1,"div",52)(2,"label",76),e.\u0275\u0275i18n(3,13),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(4,"div",64)(5,"select",77),e.\u0275\u0275template(6,WT,2,2,"option",68),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(7,"cd-help-text")(8,"span"),e.\u0275\u0275i18n(9,14),e.\u0275\u0275elementEnd()(),e.\u0275\u0275template(10,xT,2,0,"span",69),e.\u0275\u0275elementEnd()()()),2&n){const t=e.\u0275\u0275nextContext(2),o=e.\u0275\u0275reference(6);e.\u0275\u0275advance(6),e.\u0275\u0275property("ngForOf",t.secretEngines),e.\u0275\u0275advance(4),e.\u0275\u0275property("ngIf",t.configForm.showError("secret_engine",o,"required"))}}function UT(n,i){1&n&&(e.\u0275\u0275elementStart(0,"span",73),e.\u0275\u0275i18n(1,18),e.\u0275\u0275elementEnd())}function kT(n,i){if(1&n&&(e.\u0275\u0275elementStart(0,"div")(1,"div",52)(2,"label",78),e.\u0275\u0275i18n(3,16),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(4,"div",64),e.\u0275\u0275element(5,"input",79),e.\u0275\u0275elementStart(6,"cd-help-text")(7,"span"),e.\u0275\u0275i18n(8,17),e.\u0275\u0275elementEnd()(),e.\u0275\u0275template(9,UT,2,0,"span",69),e.\u0275\u0275elementEnd()()()),2&n){const t=e.\u0275\u0275nextContext(2),o=e.\u0275\u0275reference(6);e.\u0275\u0275advance(9),e.\u0275\u0275property("ngIf",t.configForm.showError("secret_path",o,"required"))}}function zT(n,i){1&n&&(e.\u0275\u0275elementStart(0,"div")(1,"div",52)(2,"label",80),e.\u0275\u0275i18n(3,19),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(4,"div",64),e.\u0275\u0275element(5,"input",81),e.\u0275\u0275elementStart(6,"cd-help-text")(7,"span"),e.\u0275\u0275i18n(8,20),e.\u0275\u0275elementEnd()()()()())}function HT(n,i){1&n&&(e.\u0275\u0275elementStart(0,"span"),e.\u0275\u0275i18n(1,21),e.\u0275\u0275elementEnd())}function XT(n,i){1&n&&(e.\u0275\u0275elementStart(0,"span"),e.\u0275\u0275i18n(1,22),e.\u0275\u0275elementEnd())}function BT(n,i){1&n&&(e.\u0275\u0275elementStart(0,"span"),e.\u0275\u0275i18n(1,23),e.\u0275\u0275elementEnd())}function VT(n,i){1&n&&(e.\u0275\u0275elementStart(0,"span"),e.\u0275\u0275i18n(1,24),e.\u0275\u0275elementEnd())}function ZT(n,i){1&n&&(e.\u0275\u0275elementStart(0,"span",73),e.\u0275\u0275i18n(1,25),e.\u0275\u0275elementEnd())}function KT(n,i){if(1&n&&(e.\u0275\u0275elementStart(0,"div")(1,"div",52)(2,"label",82),e.\u0275\u0275template(3,HT,2,0,"span",60)(4,XT,2,0,"span",60),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(5,"div",64),e.\u0275\u0275element(6,"input",83),e.\u0275\u0275elementStart(7,"cd-help-text"),e.\u0275\u0275template(8,BT,2,0,"span",60)(9,VT,2,0,"span",60),e.\u0275\u0275elementEnd(),e.\u0275\u0275template(10,ZT,2,0,"span",69),e.\u0275\u0275elementEnd()()()),2&n){const t=e.\u0275\u0275nextContext(2),o=e.\u0275\u0275reference(6);e.\u0275\u0275advance(3),e.\u0275\u0275property("ngIf",t.configForm.getValue("kms_provider")===t.KMS_PROVIDER.VAULT),e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf",t.configForm.getValue("kms_provider")===t.KMS_PROVIDER.KMIP),e.\u0275\u0275advance(4),e.\u0275\u0275property("ngIf",t.configForm.getValue("kms_provider")===t.KMS_PROVIDER.VAULT),e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf",t.configForm.getValue("kms_provider")===t.KMS_PROVIDER.KMIP),e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf",t.configForm.showError("addr",o,"required"))}}function qT(n,i){1&n&&(e.\u0275\u0275elementStart(0,"span",73),e.\u0275\u0275i18n(1,29),e.\u0275\u0275elementEnd())}function jT(n,i){if(1&n){const t=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"div",52)(1,"label",85)(2,"span"),e.\u0275\u0275i18n(3,26),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(4,"cd-helper"),e.\u0275\u0275i18n(5,27),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(6,"div",64)(7,"input",86),e.\u0275\u0275listener("change",function(_){e.\u0275\u0275restoreView(t);const a=e.\u0275\u0275nextContext(3);return e.\u0275\u0275resetView(a.fileUpload(_.target.files,"token"))}),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(8,"cd-help-text")(9,"span"),e.\u0275\u0275i18n(10,28),e.\u0275\u0275elementEnd()(),e.\u0275\u0275template(11,qT,2,0,"span",69),e.\u0275\u0275elementEnd()()}if(2&n){const t=e.\u0275\u0275nextContext(3),o=e.\u0275\u0275reference(6);e.\u0275\u0275advance(11),e.\u0275\u0275property("ngIf",t.configForm.showError("token",o,"required"))}}function YT(n,i){if(1&n&&(e.\u0275\u0275elementStart(0,"div"),e.\u0275\u0275template(1,jT,12,1,"div",84),e.\u0275\u0275elementEnd()),2&n){const t=e.\u0275\u0275nextContext(2);e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf","token"===t.configForm.getValue("auth"))}}function QT(n,i){if(1&n&&(e.\u0275\u0275elementStart(0,"div")(1,"div",52)(2,"label",87),e.\u0275\u0275i18n(3,30),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(4,"div",64),e.\u0275\u0275element(5,"input",88),e.\u0275\u0275elementStart(6,"cd-help-text")(7,"span"),e.\u0275\u0275i18n(8,31),e.\u0275\u0275elementEnd()()()(),e.\u0275\u0275elementStart(9,"div",52)(10,"label",89),e.\u0275\u0275i18n(11,32),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(12,"div",64),e.\u0275\u0275element(13,"input",90),e.\u0275\u0275elementStart(14,"cd-help-text")(15,"span"),e.\u0275\u0275i18n(16,33),e.\u0275\u0275elementEnd()()()(),e.\u0275\u0275elementStart(17,"div",52)(18,"label",91),e.\u0275\u0275i18n(19,34),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(20,"div",64),e.\u0275\u0275element(21,"input",92),e.\u0275\u0275elementStart(22,"cd-help-text")(23,"span"),e.\u0275\u0275i18n(24,35),e.\u0275\u0275elementEnd()()()(),e.\u0275\u0275elementStart(25,"div",52)(26,"label",93),e.\u0275\u0275i18n(27,36),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(28,"div",64),e.\u0275\u0275element(29,"input",94),e.\u0275\u0275elementStart(30,"cd-help-text")(31,"span"),e.\u0275\u0275i18n(32,37),e.\u0275\u0275elementEnd()()()()()),2&n){const t=e.\u0275\u0275nextContext(2);e.\u0275\u0275advance(21),e.\u0275\u0275attribute("disabled",t.configForm.getValue("kms_provider")!==t.KMS_PROVIDER.KMIP||null),e.\u0275\u0275advance(8),e.\u0275\u0275attribute("disabled",t.configForm.getValue("kms_provider")!=t.KMS_PROVIDER.KMIP)}}function JT(n,i){1&n&&(e.\u0275\u0275elementStart(0,"div")(1,"div",52)(2,"label",95)(3,"span"),e.\u0275\u0275i18n(4,38),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(5,"cd-helper"),e.\u0275\u0275i18n(6,39),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(7,"div",64),e.\u0275\u0275element(8,"input",96),e.\u0275\u0275elementStart(9,"cd-help-text")(10,"span"),e.\u0275\u0275i18n(11,40),e.\u0275\u0275elementEnd()()()()())}function eg(n,i){1&n&&(e.\u0275\u0275elementStart(0,"div")(1,"div",52)(2,"label",97)(3,"span"),e.\u0275\u0275i18n(4,41),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(5,"cd-helper"),e.\u0275\u0275i18n(6,42),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(7,"div",64),e.\u0275\u0275element(8,"input",98),e.\u0275\u0275elementStart(9,"cd-help-text")(10,"span"),e.\u0275\u0275i18n(11,43),e.\u0275\u0275elementEnd()()()()())}function tg(n,i){1&n&&(e.\u0275\u0275elementStart(0,"div")(1,"div",52)(2,"label",99)(3,"span"),e.\u0275\u0275i18n(4,44),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(5,"cd-helper"),e.\u0275\u0275i18n(6,45),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(7,"div",64),e.\u0275\u0275element(8,"input",100),e.\u0275\u0275elementStart(9,"cd-help-text")(10,"span"),e.\u0275\u0275i18n(11,46),e.\u0275\u0275elementEnd()()()()())}function ng(n,i){if(1&n&&(e.\u0275\u0275elementStart(0,"div"),e.\u0275\u0275template(1,DT,11,2,"div",60)(2,wT,11,2,"div",60)(3,kT,10,1,"div",60)(4,zT,9,0,"div",60)(5,KT,11,5,"div",60)(6,YT,2,1,"div",60)(7,QT,33,2,"div",60)(8,JT,12,0,"div",60)(9,eg,12,0,"div",60)(10,tg,12,0,"div",60),e.\u0275\u0275elementEnd()),2&n){const t=e.\u0275\u0275nextContext();e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf",t.configForm.getValue("encryptionType")===t.ENCRYPTION_TYPE.SSE_KMS&&t.configForm.getValue("kms_provider")===t.KMS_PROVIDER.VAULT||t.configForm.getValue("encryptionType")===t.ENCRYPTION_TYPE.SSE_S3),e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf",t.configForm.getValue("encryptionType")===t.ENCRYPTION_TYPE.SSE_KMS&&t.configForm.getValue("kms_provider")===t.KMS_PROVIDER.VAULT||t.configForm.getValue("encryptionType")===t.ENCRYPTION_TYPE.SSE_S3),e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf",t.configForm.getValue("encryptionType")===t.ENCRYPTION_TYPE.SSE_KMS&&t.configForm.getValue("kms_provider")===t.KMS_PROVIDER.VAULT||t.configForm.getValue("encryptionType")===t.ENCRYPTION_TYPE.SSE_S3),e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf",t.configForm.getValue("encryptionType")===t.ENCRYPTION_TYPE.SSE_KMS&&t.configForm.getValue("kms_provider")==t.KMS_PROVIDER.VAULT||t.configForm.getValue("encryptionType")===t.ENCRYPTION_TYPE.SSE_S3),e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf",t.configForm.getValue("encryptionType")===t.ENCRYPTION_TYPE.SSE_KMS||t.configForm.getValue("encryptionType")===t.ENCRYPTION_TYPE.SSE_S3),e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf",t.configForm.getValue("encryptionType")===t.ENCRYPTION_TYPE.SSE_KMS&&t.configForm.getValue("kms_provider")===t.KMS_PROVIDER.VAULT||t.configForm.getValue("encryptionType")===t.ENCRYPTION_TYPE.SSE_S3),e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf",t.configForm.getValue("encryptionType")===t.ENCRYPTION_TYPE.SSE_KMS&&t.configForm.getValue("kms_provider")===t.KMS_PROVIDER.KMIP),e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf",t.configForm.getValue("encryptionType")===t.ENCRYPTION_TYPE.SSE_KMS||t.configForm.getValue("encryptionType")===t.ENCRYPTION_TYPE.SSE_S3),e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf",t.configForm.getValue("encryptionType")===t.ENCRYPTION_TYPE.SSE_KMS||t.configForm.getValue("encryptionType")===t.ENCRYPTION_TYPE.SSE_S3),e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf",t.configForm.getValue("encryptionType")===t.ENCRYPTION_TYPE.SSE_KMS||t.configForm.getValue("encryptionType")===t.ENCRYPTION_TYPE.SSE_S3)}}let Ro=(()=>{class n{constructor(t,o,_,a,r){this.formBuilder=t,this.activeModal=o,this.actionLabels=_,this.rgwBucketService=a,this.notificationService=r,this.vaultAddress=/^((https?:\/\/)|(www.))(?:([a-zA-Z]+)|(\d+\.\d+.\d+.\d+)):\d{4}$/,this.submitAction=new e.EventEmitter,this.selectedEncryptionConfigValues={},this.allEncryptionConfigValues=[],this.editing=!1,this.ENCRYPTION_TYPE=Ne,this.KMS_PROVIDER=ye,this.createForm()}ngOnInit(){this.kmsProviders=Ut.kmsProviders,this.authMethods=Ut.authMethods,this.secretEngines=Ut.secretEngines,this.editing&&this.selectedEncryptionConfigValues&&(this.configForm.patchValue({addr:this.selectedEncryptionConfigValues.addr,encryptionType:this.selectedEncryptionConfigValues.encryption_type,kms_provider:this.selectedEncryptionConfigValues.backend,auth:this.selectedEncryptionConfigValues.auth,secret_engine:this.selectedEncryptionConfigValues.secret_engine,secret_path:this.selectedEncryptionConfigValues.prefix,namespace:this.selectedEncryptionConfigValues.namespace,kms_key_template:this.selectedEncryptionConfigValues.kms_key_template,s3_key_template:this.selectedEncryptionConfigValues.s3_key_template,username:this.selectedEncryptionConfigValues.username,password:this.selectedEncryptionConfigValues.password,ssl_cert:this.selectedEncryptionConfigValues.backend===ye.VAULT?this.selectedEncryptionConfigValues.ssl_cacert:this.selectedEncryptionConfigValues.ca_path,client_cert:this.selectedEncryptionConfigValues.backend===ye.VAULT?this.selectedEncryptionConfigValues.ssl_clientcert:this.selectedEncryptionConfigValues.client_cert,client_key:this.selectedEncryptionConfigValues.backend===ye.VAULT?this.selectedEncryptionConfigValues.ssl_clientkey:this.selectedEncryptionConfigValues.client_key}),this.configForm.get("kms_provider").disable()),this.checkKmsProviders()}setKmsProvider(){const t=this.configForm.get("encryptionType").value;this.kmsProviders=t===Ne.SSE_KMS?[ye.VAULT,ye.KMIP]:[ye.VAULT]}checkKmsProviders(){if(this.editing||this.setKmsProvider(),this.allEncryptionConfigValues&&this.allEncryptionConfigValues.hasOwnProperty(Ne.SSE_KMS)&&!this.editing){const t=Object.values(this.allEncryptionConfigValues[Ne.SSE_KMS]).map(o=>o.backend);this.configForm.get("encryptionType").value===Ne.SSE_KMS&&(this.kmsProviders=this.kmsProviders.filter(o=>!t.includes(o)))}if(this.allEncryptionConfigValues&&this.allEncryptionConfigValues.hasOwnProperty("s3")&&!this.editing){const t=Object.values(this.allEncryptionConfigValues[Ne.SSE_S3]).map(o=>o.backend);this.configForm.get("encryptionType").value===Ne.SSE_S3&&(this.kmsProviders=this.kmsProviders.filter(o=>!t.includes(o)))}this.editing||this.kmsProviders.length>0&&this.configForm.get("kms_provider").setValue(this.kmsProviders[0])}createForm(){this.configForm=this.formBuilder.group({addr:[null,[l.Validators.required,M.xQ.custom("vaultPattern",t=>!A().isEmpty(t)&&!this.vaultAddress.test(t))]],kms_provider:["vault",l.Validators.required],encryptionType:["kms",l.Validators.required],auth:["token",M.xQ.requiredIf({kms_provider:"vault"})],secret_engine:["kv",M.xQ.requiredIf({kms_provider:"vault"})],secret_path:["/"],namespace:[null],token:[null,[M.xQ.requiredIf({auth:"token",kms_provider:"vault"})]],ssl_cert:[""],client_cert:[""],client_key:[""],kmsEnabled:[{value:!1}],s3Enabled:[{value:!1}],kms_key_template:[null],s3_key_template:[null],username:[""],password:[""]})}fileUpload(t,o){const _=t[0];(new FileReader).addEventListener("load",()=>{const r=this.configForm.get(o);r.setValue(_),r.markAsDirty(),r.markAsTouched(),r.updateValueAndValidity()})}onSubmit(){const t=this.configForm.getRawValue();let o;t.kms_provider===ye.VAULT?o={kms_provider:t.kms_provider,encryption_type:t.encryptionType,config:{addr:t.addr,auth:t.auth,prefix:t.secret_path,secret_engine:t.secret_engine,namespace:t.namespace,token_file:t.token,ssl_cacert:t.ssl_cert,ssl_clientcert:t.client_cert,ssl_clientkey:t.client_key}}:t.kms_provider===ye.KMIP&&(o={kms_provider:t.kms_provider,encryption_type:t.encryptionType,config:{addr:t.addr,username:t.username,password:t.password,kms_key_template:t.kms_key_template,s3_key_template:t.s3_key_template,client_key:t.client_key,ca_path:t.ssl_cert,client_cert:t.client_cert}}),this.rgwBucketService.setEncryptionConfig(o).subscribe({next:()=>{this.notificationService.show(w._.success,"Updated RGW Encryption Configuration values")},error:_=>{this.notificationService.show(w._.error,_.message),this.configForm.setErrors({cdSubmitButton:!0})},complete:()=>{this.activeModal.close(),this.table?.refreshBtn()}})}static{this.\u0275fac=function(o){return new(o||n)(e.\u0275\u0275directiveInject(Ge.$),e.\u0275\u0275directiveInject(v.NgbActiveModal),e.\u0275\u0275directiveInject(P.Ss),e.\u0275\u0275directiveInject(Le.c),e.\u0275\u0275directiveInject(ne.J))}}static{this.\u0275cmp=e.\u0275\u0275defineComponent({type:n,selectors:[["cd-rgw-config-modal"]],outputs:{submitAction:"submitAction"},decls:23,vars:19,consts:()=>{let t,o,_,a,r,s,c,u,p,T,f,G,S,O,C,b,N,k,z,$,X,B,V,Z,F,I,te,J,j,ee,D,ie,W,x,de,ue,pe,me,Te,ge,Ee,le,Re,Ce,fe,Se;return t="" + "\ufffd0\ufffd" + " RGW Encryption Configurations",o="Encryption Type",_="SSE-S3",a="SSE-KMS",r="Key management service provider",s="Where the encryption keys are stored. ",c="-- No kms providers available --",u="-- Select a provider --",p="This field is required.",T="Authentication Method",f="Type of authentication method to be used with Vault ",G="This field is required.",S="Secret Engine",O="Vault Secret Engine to be used to retrieve encryption keys. ",C="This field is required.",b="Secret Path ",N="Vault secret URL prefix, which can be used to restrict access to a particular subset of the Vault secret space. ",k="This field is required.",z="Namespace ",$="Vault Namespace to be used to select your tenant. ",X="Vault Address ",B="KMIP Address ",V="Vault server base address. ",Z="Kmip server base address. ",F="This field is required.",I="Token",te=" The token authentication method expects a Vault token to be present in a plaintext file. ",J="If authentication method is 'token', provide a path to the token file. ",j="This field is required.",ee="KMS Key Template ",D="sse-kms; kmip key names ",ie="S3 Key Template ",W="sse-s3; kmip key template ",x="Username ",de="When authenticating via username ",ue="Password ",pe="optional w/ username ",me="CA Certificate Path",Te="The SSL certificate in PEM format. Please provide file path to the RGW host.",ge=" Path for custom ca certificate for accessing server ",Ee="Client Certificate Path",le="The Client certificate in PEM format. Please provide file path to the RGW host.",Re=" Path for custom client certificate for accessing server ",Ce="Client Private Key Path",fe="The Client Private Key in PEM format. Please provide file path to the RGW host.",Se=" Path for private key required for client cert ",[["frm","ngForm"],t,o,_,a,r,s,c,u,p,T,f,G,S,O,C,b,N,k,z,$,X,B,V,Z,F,I,te,J,j,ee,D,ie,W,x,de,ue,pe,me,Te,ge,Ee,le,Re,Ce,fe,Se,[3,"modalRef"],[1,"modal-title"],[1,"modal-content"],["name","configForm",3,"formGroup"],[1,"modal-body"],[1,"form-group","row"],["for","encryptionType",1,"cd-col-form-label","required"],[1,"col-md-auto","custom-checkbox","form-check-inline","ms-3"],["formControlName","encryptionType","id","s3Enabled","type","radio",1,"form-check-input",3,"change","value"],["for","s3Enabled",1,"custom-check-label",3,"ngClass"],[1,"col-md-auto","custom-checkbox","form-check-inline"],["formControlName","encryptionType","id","kmsEnabled","type","radio",1,"form-check-input",3,"change","value"],["for","kmsEnabled",1,"custom-check-label",3,"ngClass"],[4,"ngIf"],[1,"modal-footer"],[3,"submitActionEvent","submitText","form"],["for","kms_provider",1,"cd-col-form-label","required"],[1,"cd-col-form-input"],["id","kms_provider","formControlName","kms_provider",1,"form-select",3,"change"],["ngValue","null",4,"ngIf"],["ngValue","",4,"ngIf"],[3,"value",4,"ngFor","ngForOf"],["class","invalid-feedback",4,"ngIf"],["ngValue","null"],["ngValue",""],[3,"value"],[1,"invalid-feedback"],["for","auth",1,"cd-col-form-label","required"],["id","auth","formControlName","auth",1,"form-select"],["for","secret_engine",1,"cd-col-form-label","required"],["id","secret_engine","formControlName","secret_engine",1,"form-select"],["for","secret_path",1,"cd-col-form-label"],["type","text","id","secret_path","formControlName","secret_path","placeholder","/v1/secret/data",1,"form-control"],["for","namespace",1,"cd-col-form-label"],["id","namespace","type","text","placeholder","tenant1","formControlName","namespace",1,"form-control"],["for","addr",1,"cd-col-form-label","required"],["id","addr","formControlName","addr","placeholder","http://127.0.0.1:8000",1,"form-control"],["class","form-group row",4,"ngIf"],["for","token",1,"cd-col-form-label","required"],["type","file","id","token","formControlName","token",3,"change"],["for","kms_key_template",1,"cd-col-form-label"],["id","kms_key_template","placeholder","$keyid","formControlName","kms_key_template",1,"form-control"],["for","s3_key_template",1,"cd-col-form-label"],["id","s3_key_template","placeholder","$keyid","formControlName","s3_key_template",1,"form-control"],["for","username",1,"cd-col-form-label"],["id","username","formControlName","username",1,"form-control"],["for","password",1,"cd-col-form-label"],["id","password","type","password","formControlName","password",1,"form-control"],["for","ssl_cert",1,"cd-col-form-label"],["type","text","id","ssl_cert","formControlName","ssl_cert","placeholder","/path/to/ca_cert.pem",1,"form-control"],["for","client_cert",1,"cd-col-form-label"],["type","text","id","client_cert","formControlName","client_cert","placeholder","/path/to/client_cert.pem",1,"form-control"],["for","client_key",1,"cd-col-form-label"],["type","text","id","client_key","formControlName","client_key","placeholder","/path/to/client_key.pem",1,"form-control"]]},template:function(o,_){if(1&o){const a=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"cd-modal",47),e.\u0275\u0275elementContainerStart(1,48),e.\u0275\u0275i18n(2,1),e.\u0275\u0275pipe(3,"titlecase"),e.\u0275\u0275elementContainerEnd(),e.\u0275\u0275elementContainerStart(4,49),e.\u0275\u0275elementStart(5,"form",50,0)(7,"div",51)(8,"div",52)(9,"label",53),e.\u0275\u0275i18n(10,2),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(11,"div",54)(12,"input",55),e.\u0275\u0275listener("change",function(){return e.\u0275\u0275restoreView(a),e.\u0275\u0275resetView(_.checkKmsProviders())}),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(13,"label",56),e.\u0275\u0275i18n(14,3),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(15,"div",57)(16,"input",58),e.\u0275\u0275listener("change",function(){return e.\u0275\u0275restoreView(a),e.\u0275\u0275resetView(_.checkKmsProviders())}),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(17,"label",59),e.\u0275\u0275i18n(18,4),e.\u0275\u0275elementEnd()()(),e.\u0275\u0275template(19,LT,13,4,"div",60)(20,ng,11,10,"div",60),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(21,"div",61)(22,"cd-form-button-panel",62),e.\u0275\u0275listener("submitActionEvent",function(){return e.\u0275\u0275restoreView(a),e.\u0275\u0275resetView(_.onSubmit())}),e.\u0275\u0275elementEnd()()(),e.\u0275\u0275elementContainerEnd(),e.\u0275\u0275elementEnd()}2&o&&(e.\u0275\u0275property("modalRef",_.activeModal),e.\u0275\u0275advance(3),e.\u0275\u0275i18nExp(e.\u0275\u0275pipeBind1(3,13,_.action)),e.\u0275\u0275i18nApply(2),e.\u0275\u0275advance(2),e.\u0275\u0275property("formGroup",_.configForm),e.\u0275\u0275advance(7),e.\u0275\u0275property("value",_.ENCRYPTION_TYPE.SSE_S3),e.\u0275\u0275attribute("disabled",!(!_.editing||_.configForm.getValue("encryptionType")===_.ENCRYPTION_TYPE.SSE_S3)||null),e.\u0275\u0275advance(),e.\u0275\u0275property("ngClass",e.\u0275\u0275pureFunction1(15,Eo,_.editing&&_.configForm.getValue("encryptionType")!==_.ENCRYPTION_TYPE.SSE_S3)),e.\u0275\u0275advance(3),e.\u0275\u0275property("value",_.ENCRYPTION_TYPE.SSE_KMS),e.\u0275\u0275attribute("disabled",!(!_.editing||_.configForm.getValue("encryptionType")===_.ENCRYPTION_TYPE.SSE_KMS)||null),e.\u0275\u0275advance(),e.\u0275\u0275property("ngClass",e.\u0275\u0275pureFunction1(17,Eo,_.editing&&_.configForm.getValue("encryptionType")!==_.ENCRYPTION_TYPE.SSE_KMS)),e.\u0275\u0275advance(2),e.\u0275\u0275property("ngIf",_.configForm.getValue("encryptionType")===_.ENCRYPTION_TYPE.SSE_KMS||_.configForm.getValue("encryptionType")===_.ENCRYPTION_TYPE.SSE_S3),e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf",0!==_.kmsProviders.length&&""!==_.configForm.getValue("kms_provider")),e.\u0275\u0275advance(2),e.\u0275\u0275property("submitText",_.actionLabels.SUBMIT)("form",_.configForm))},dependencies:[E.NgClass,E.NgForOf,E.NgIf,Pt.m,Xe.z,_e.e,ae.O,Y.S,Be.a,We.C,oe.E,l.\u0275NgNoValidate,l.NgSelectOption,l.\u0275NgSelectMultipleOption,l.DefaultValueAccessor,l.SelectControlValueAccessor,l.RadioControlValueAccessor,l.NgControlStatus,l.NgControlStatusGroup,l.FormGroupDirective,l.FormControlName,d.Option,E.TitleCasePipe]})}}return n})();var Rn=function(n){return n.auth="Authentication Method",n.encryption_type="Encryption Type",n.backend="Backend",n.prefix="Prefix",n.namespace="Namespace",n.secret_engine="Secret Engine",n.addr="Address",n.token_file="Token File",n.ssl_cacert="SSL CA Certificate",n.ssl_clientcert="SSL Client Certificate",n.ssl_clientkey="SSL Client Key",n.verify_ssl="Verify SSL",n.ca_path="CA Path",n.client_cert="Client Certificate",n.client_key="Client Key",n.kms_key_template="KMS Key Template",n.password="Password",n.s3_key_template="S3 Key Template",n.username="Username",n}(Rn||{});function og(n,i){if(1&n&&e.\u0275\u0275element(0,"cd-table-key-value",8),2&n){const t=e.\u0275\u0275nextContext(2);e.\u0275\u0275property("data",t.transformedData)}}function _g(n,i){if(1&n&&(e.\u0275\u0275elementContainerStart(0),e.\u0275\u0275elementStart(1,"nav",3,0),e.\u0275\u0275elementContainerStart(3,4),e.\u0275\u0275elementStart(4,"a",5),e.\u0275\u0275i18n(5,1),e.\u0275\u0275elementEnd(),e.\u0275\u0275template(6,og,1,1,"ng-template",6),e.\u0275\u0275elementContainerEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275element(7,"div",7),e.\u0275\u0275elementContainerEnd()),2&n){const t=e.\u0275\u0275reference(2);e.\u0275\u0275advance(7),e.\u0275\u0275property("ngbNavOutlet",t)}}let ig=(()=>{class n{constructor(){this.excludeProps=[]}ngOnChanges(){if(this.selection){this.filteredEncryptionConfigValues=Object.keys(this.selection).filter(o=>!this.excludeProps.includes(o)).reduce((o,_)=>(o[_]=this.selection[_],o),{});const t={};for(const o in this.filteredEncryptionConfigValues)Rn[o]?t[Rn[o]]=this.filteredEncryptionConfigValues[o]:t[o]=this.filteredEncryptionConfigValues[o];this.transformedData=t}}static{this.\u0275fac=function(o){return new(o||n)}}static{this.\u0275cmp=e.\u0275\u0275defineComponent({type:n,selectors:[["cd-rgw-config-details"]],inputs:{selection:"selection",excludeProps:"excludeProps"},features:[e.\u0275\u0275NgOnChangesFeature],decls:1,vars:1,consts:()=>{let t;return t="Details",[["nav","ngbNav"],t,[4,"ngIf"],["ngbNav","","id","tabset-config-details","cdStatefulTab","config-details",1,"nav-tabs"],["ngbNavItem","details"],["ngbNavLink",""],["ngbNavContent",""],[3,"ngbNavOutlet"],[3,"data"]]},template:function(o,_){1&o&&e.\u0275\u0275template(0,_g,8,1,"ng-container",2),2&o&&e.\u0275\u0275property("ngIf",_.selection)},dependencies:[E.NgIf,Kt.i,Xt.B,v.NgbNavContent,v.NgbNav,v.NgbNavItem,v.NgbNavLink,v.NgbNavLinkBase,v.NgbNavOutlet]})}}return n})();function ag(n,i){if(1&n&&e.\u0275\u0275element(0,"cd-rgw-config-details",11),2&n){const t=e.\u0275\u0275nextContext(2);e.\u0275\u0275property("selection",t.expandedRow)("excludeProps",t.excludeProps)}}function rg(n,i){if(1&n){const t=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"cd-table",8,1),e.\u0275\u0275listener("fetchData",function(){e.\u0275\u0275restoreView(t);const _=e.\u0275\u0275nextContext();return e.\u0275\u0275resetView(_.fetchData())})("updateSelection",function(_){e.\u0275\u0275restoreView(t);const a=e.\u0275\u0275nextContext();return e.\u0275\u0275resetView(a.updateSelection(_))})("setExpandedRow",function(_){e.\u0275\u0275restoreView(t);const a=e.\u0275\u0275nextContext();return e.\u0275\u0275resetView(a.setExpandedRow(_))}),e.\u0275\u0275element(2,"cd-table-actions",9),e.\u0275\u0275template(3,ag,1,2,"cd-rgw-config-details",10),e.\u0275\u0275elementEnd()}if(2&n){const t=e.\u0275\u0275nextContext();e.\u0275\u0275property("data",t.encryptionConfigValues)("columns",t.columns)("forceIdentifier",!0)("hasDetails",!0),e.\u0275\u0275advance(2),e.\u0275\u0275property("permission",t.permissions.configOpt)("selection",t.selection)("tableActions",t.tableActions)}}let lg=(()=>{class n extends Je.D{constructor(t,o,_,a,r){super(),this.activeModal=t,this.actionLabels=o,this.rgwBucketService=_,this.authStorageService=a,this.modalService=r,this.vaultAddress=/^((https?:\/\/)|(www.))(?:([a-zA-Z]+)|(\d+\.\d+.\d+.\d+)):\d{4}$/,this.columns=[],this.encryptionConfigValues=[],this.selection=new Oe.y,this.submitAction=new e.EventEmitter,this.excludeProps=[],this.disableCreate=!0,this.permissions=this.authStorageService.getPermissions()}ngOnInit(){this.columns=[{name:"Encryption Type",prop:"encryption_type",flexGrow:1},{name:"Key Management Service Provider",prop:"backend",flexGrow:1},{name:"Address",prop:"addr",flexGrow:1}],this.tableActions=[{permission:"create",icon:y.FI.add,name:this.actionLabels.CREATE,click:()=>this.openRgwConfigModal(!1),disable:()=>this.disableCreate},{permission:"update",icon:y.FI.edit,name:this.actionLabels.EDIT,click:()=>this.openRgwConfigModal(!0)}],this.excludeProps=this.columns.map(t=>t.prop),this.excludeProps.push("unique_id")}getBackend(t,o){const _=new Set(Object.keys(t[o]));return o===Ne.SSE_KMS?_.has("kmip")&&_.has("vault"):_.has("vault")}openRgwConfigModal(t){if(t){const o={action:"edit",editing:!0,selectedEncryptionConfigValues:this.selection.first(),table:this.table};this.bsModalRef=this.modalService.show(Ro,o,{size:"lg"})}else this.bsModalRef=this.modalService.show(Ro,{action:"create",allEncryptionConfigValues:this.allEncryptionValues},{size:"lg"})}updateSelection(t){this.selection=t}setExpandedRow(t){super.setExpandedRow(t)}flattenData(t){const o=[];for(const _ of Object.values(t[Ne.SSE_KMS]))o.push(_);for(const _ of Object.values(t[Ne.SSE_S3]))o.push(_);return o}fetchData(){this.rgwBucketService.getEncryptionConfig().subscribe(t=>{this.allEncryptionValues=t;const o=this.getBackend(t,Ne.SSE_KMS),_=this.getBackend(t,Ne.SSE_S3);this.disableCreate=o&&_,this.encryptionConfigValues=this.flattenData(t)})}static{this.\u0275fac=function(o){return new(o||n)(e.\u0275\u0275directiveInject(v.NgbActiveModal),e.\u0275\u0275directiveInject(P.Ss),e.\u0275\u0275directiveInject(Le.c),e.\u0275\u0275directiveInject(be.v),e.\u0275\u0275directiveInject(vt.B))}}static{this.\u0275cmp=e.\u0275\u0275defineComponent({type:n,selectors:[["cd-rgw-configuration-page"]],viewQuery:function(o,_){if(1&o&&e.\u0275\u0275viewQuery(re.O,5),2&o){let a;e.\u0275\u0275queryRefresh(a=e.\u0275\u0275loadQuery())&&(_.table=a.first)}},outputs:{submitAction:"submitAction"},features:[e.\u0275\u0275InheritDefinitionFeature],decls:7,vars:1,consts:()=>{let t;return t="Server-side Encryption",[["nav","ngbNav"],["table",""],t,["ngbNav","",1,"nav-tabs"],["ngbNavItem",""],["ngbNavLink",""],["ngbNavContent",""],[3,"ngbNavOutlet"],["identifier","unique_id","columnMode","flex","selectionType","single",3,"fetchData","updateSelection","setExpandedRow","data","columns","forceIdentifier","hasDetails"],[1,"table-actions",3,"permission","selection","tableActions"],[3,"selection","excludeProps",4,"cdTableDetail"],[3,"selection","excludeProps"]]},template:function(o,_){if(1&o&&(e.\u0275\u0275elementStart(0,"nav",3,0),e.\u0275\u0275elementContainerStart(2,4),e.\u0275\u0275elementStart(3,"a",5),e.\u0275\u0275i18n(4,2),e.\u0275\u0275elementEnd(),e.\u0275\u0275template(5,rg,4,7,"ng-template",6),e.\u0275\u0275elementContainerEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275element(6,"div",7)),2&o){const a=e.\u0275\u0275reference(1);e.\u0275\u0275advance(6),e.\u0275\u0275property("ngbNavOutlet",a)}},dependencies:[re.O,De.j,ot.N,v.NgbNavContent,v.NgbNav,v.NgbNavItem,v.NgbNavLink,v.NgbNavLinkBase,v.NgbNavOutlet,ig]})}}return n})(),Co=(()=>{class n{constructor(t){this.http=t,this.baseUrl="api/rgw/zonegroup",this.url=`${this.baseUrl}/storage-class`}removeStorageClass(t,o){return this.http.delete(`${this.url}/${t}/${o}`,{observe:"response"})}createStorageClass(t){return this.http.post(`${this.url}`,t)}editStorageClass(t){return this.http.put(`${this.url}`,t)}getPlacement_target(t){return this.http.get(`${this.baseUrl}/get_placement_target_by_placement_id/${t}`)}static{this.\u0275fac=function(o){return new(o||n)(e.\u0275\u0275inject(nn.HttpClient))}}static{this.\u0275prov=e.\u0275\u0275defineInjectable({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();const fo=()=>({md:4});function sg(n,i){if(1&n&&(e.\u0275\u0275elementStart(0,"tr")(1,"td",18),e.\u0275\u0275i18nStart(2,0),e.\u0275\u0275elementStart(3,"cd-helper",19),e.\u0275\u0275element(4,"span"),e.\u0275\u0275elementEnd(),e.\u0275\u0275i18nEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(5,"td"),e.\u0275\u0275text(6),e.\u0275\u0275elementEnd()()),2&n){const t=e.\u0275\u0275nextContext(2);e.\u0275\u0275advance(4),e.\u0275\u0275i18nExp(t.zoneGroupText),e.\u0275\u0275i18nApply(2),e.\u0275\u0275advance(2),e.\u0275\u0275textInterpolate(null==t.selection?null:t.selection.zonegroup_name)}}function cg(n,i){if(1&n&&(e.\u0275\u0275elementStart(0,"tr")(1,"td",18),e.\u0275\u0275i18nStart(2,1),e.\u0275\u0275elementStart(3,"cd-helper",19),e.\u0275\u0275element(4,"span"),e.\u0275\u0275elementEnd(),e.\u0275\u0275i18nEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(5,"td"),e.\u0275\u0275text(6),e.\u0275\u0275elementEnd()()),2&n){const t=e.\u0275\u0275nextContext(2);e.\u0275\u0275advance(6),e.\u0275\u0275textInterpolate(null==t.selection?null:t.selection.placement_target)}}function dg(n,i){if(1&n&&(e.\u0275\u0275elementStart(0,"tr")(1,"td",18),e.\u0275\u0275i18nStart(2,2),e.\u0275\u0275elementStart(3,"cd-helper",19),e.\u0275\u0275element(4,"span"),e.\u0275\u0275elementEnd(),e.\u0275\u0275i18nEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(5,"td"),e.\u0275\u0275text(6),e.\u0275\u0275elementEnd()()),2&n){const t=e.\u0275\u0275nextContext(2);e.\u0275\u0275advance(4),e.\u0275\u0275i18nExp(t.targetPathText),e.\u0275\u0275i18nApply(2),e.\u0275\u0275advance(2),e.\u0275\u0275textInterpolate(null==t.selection?null:t.selection.target_path)}}function ug(n,i){if(1&n&&(e.\u0275\u0275elementStart(0,"tr")(1,"td",18),e.\u0275\u0275i18nStart(2,3),e.\u0275\u0275elementStart(3,"cd-helper",19),e.\u0275\u0275element(4,"span"),e.\u0275\u0275elementEnd(),e.\u0275\u0275i18nEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(5,"td")(6,"div",20),e.\u0275\u0275element(7,"input",21)(8,"button",22)(9,"cd-copy-2-clipboard-button",23),e.\u0275\u0275elementEnd()()()),2&n){const t=e.\u0275\u0275nextContext(2);e.\u0275\u0275advance(4),e.\u0275\u0275i18nExp(t.targetAccessKeyText),e.\u0275\u0275i18nApply(2),e.\u0275\u0275advance(2),e.\u0275\u0275property("columnNumbers",e.\u0275\u0275pureFunction0(3,fo)),e.\u0275\u0275advance(),e.\u0275\u0275property("value",null==t.selection?null:t.selection.access_key)}}function pg(n,i){if(1&n&&(e.\u0275\u0275elementStart(0,"tr")(1,"td",18),e.\u0275\u0275i18nStart(2,4),e.\u0275\u0275elementStart(3,"cd-helper",19),e.\u0275\u0275element(4,"span"),e.\u0275\u0275elementEnd(),e.\u0275\u0275i18nEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(5,"td")(6,"div",20),e.\u0275\u0275element(7,"input",24)(8,"button",25)(9,"cd-copy-2-clipboard-button",26),e.\u0275\u0275elementEnd()()()),2&n){const t=e.\u0275\u0275nextContext(2);e.\u0275\u0275advance(4),e.\u0275\u0275i18nExp(t.targetSecretKeyText),e.\u0275\u0275i18nApply(2),e.\u0275\u0275advance(2),e.\u0275\u0275property("columnNumbers",e.\u0275\u0275pureFunction0(3,fo)),e.\u0275\u0275advance(),e.\u0275\u0275property("value",null==t.selection?null:t.selection.secret)}}function mg(n,i){if(1&n&&(e.\u0275\u0275elementStart(0,"tr")(1,"td",18),e.\u0275\u0275i18nStart(2,5),e.\u0275\u0275elementStart(3,"cd-helper",19),e.\u0275\u0275element(4,"span"),e.\u0275\u0275elementEnd(),e.\u0275\u0275i18nEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(5,"td"),e.\u0275\u0275text(6),e.\u0275\u0275elementEnd()()),2&n){const t=e.\u0275\u0275nextContext(2);e.\u0275\u0275advance(4),e.\u0275\u0275i18nExp(t.hostStyleText),e.\u0275\u0275i18nApply(2),e.\u0275\u0275advance(2),e.\u0275\u0275textInterpolate(null==t.selection?null:t.selection.host_style)}}function Tg(n,i){if(1&n&&(e.\u0275\u0275elementStart(0,"tr")(1,"td",18),e.\u0275\u0275i18nStart(2,6),e.\u0275\u0275elementStart(3,"cd-helper",19),e.\u0275\u0275element(4,"span"),e.\u0275\u0275elementEnd(),e.\u0275\u0275i18nEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(5,"td"),e.\u0275\u0275text(6),e.\u0275\u0275elementEnd()()),2&n){const t=e.\u0275\u0275nextContext(2);e.\u0275\u0275advance(4),e.\u0275\u0275i18nExp(t.retainHeadObjectText),e.\u0275\u0275i18nApply(2),e.\u0275\u0275advance(2),e.\u0275\u0275textInterpolate(null!=t.selection&&t.selection.retain_head_object?"Enabled":"Disabled")}}function gg(n,i){if(1&n&&(e.\u0275\u0275elementStart(0,"tr")(1,"td",18),e.\u0275\u0275i18nStart(2,7),e.\u0275\u0275elementStart(3,"cd-helper",19),e.\u0275\u0275element(4,"span"),e.\u0275\u0275elementEnd(),e.\u0275\u0275i18nEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(5,"td"),e.\u0275\u0275text(6),e.\u0275\u0275elementEnd()()),2&n){const t=e.\u0275\u0275nextContext(2);e.\u0275\u0275advance(4),e.\u0275\u0275i18nExp(t.allowReadThroughText),e.\u0275\u0275i18nApply(2),e.\u0275\u0275advance(2),e.\u0275\u0275textInterpolate(null!=t.selection&&t.selection.allow_read_through?"Enabled":"Disabled")}}function Eg(n,i){if(1&n&&(e.\u0275\u0275elementStart(0,"tr")(1,"td",18),e.\u0275\u0275i18nStart(2,8),e.\u0275\u0275elementStart(3,"cd-helper",19),e.\u0275\u0275element(4,"span"),e.\u0275\u0275elementEnd(),e.\u0275\u0275i18nEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(5,"td"),e.\u0275\u0275text(6),e.\u0275\u0275elementEnd()()),2&n){const t=e.\u0275\u0275nextContext(3);e.\u0275\u0275advance(4),e.\u0275\u0275i18nExp(t.readthroughrestoreDaysText),e.\u0275\u0275i18nApply(2),e.\u0275\u0275advance(2),e.\u0275\u0275textInterpolate(null==t.selection?null:t.selection.read_through_restore_days)}}function Rg(n,i){if(1&n&&e.\u0275\u0275template(0,Eg,7,2,"tr",14),2&n){const t=e.\u0275\u0275nextContext(2);e.\u0275\u0275property("ngIf",t.isTierMatch(t.TIER_TYPE_DISPLAY.CLOUD_TIER,t.TIER_TYPE_DISPLAY.GLACIER)&&(null==t.selection?null:t.selection.allow_read_through))}}function Cg(n,i){if(1&n&&(e.\u0275\u0275elementStart(0,"tr")(1,"td",18),e.\u0275\u0275i18nStart(2,9),e.\u0275\u0275elementStart(3,"cd-helper",19),e.\u0275\u0275element(4,"span"),e.\u0275\u0275elementEnd(),e.\u0275\u0275i18nEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(5,"td"),e.\u0275\u0275text(6),e.\u0275\u0275elementEnd()()),2&n){const t=e.\u0275\u0275nextContext(2);e.\u0275\u0275advance(4),e.\u0275\u0275i18nExp(t.glacierRestoreDayText),e.\u0275\u0275i18nApply(2),e.\u0275\u0275advance(2),e.\u0275\u0275textInterpolate(null==t.selection?null:t.selection.glacier_restore_days)}}function fg(n,i){if(1&n&&(e.\u0275\u0275elementStart(0,"tr")(1,"td",18),e.\u0275\u0275i18nStart(2,10),e.\u0275\u0275elementStart(3,"cd-helper",19),e.\u0275\u0275element(4,"span"),e.\u0275\u0275elementEnd(),e.\u0275\u0275i18nEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(5,"td"),e.\u0275\u0275text(6),e.\u0275\u0275elementEnd()()),2&n){const t=e.\u0275\u0275nextContext(2);e.\u0275\u0275advance(4),e.\u0275\u0275i18nExp(t.glacierRestoreTiertypeText),e.\u0275\u0275i18nApply(2),e.\u0275\u0275advance(2),e.\u0275\u0275textInterpolate(null==t.selection?null:t.selection.glacier_restore_tier_type)}}function Sg(n,i){if(1&n&&(e.\u0275\u0275elementStart(0,"tr")(1,"td",18),e.\u0275\u0275i18nStart(2,11),e.\u0275\u0275elementStart(3,"cd-helper",19),e.\u0275\u0275element(4,"span"),e.\u0275\u0275elementEnd(),e.\u0275\u0275i18nEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(5,"td"),e.\u0275\u0275text(6),e.\u0275\u0275elementEnd()()),2&n){const t=e.\u0275\u0275nextContext(2);e.\u0275\u0275advance(4),e.\u0275\u0275i18nExp(t.restoreStorageClassText),e.\u0275\u0275i18nApply(2),e.\u0275\u0275advance(2),e.\u0275\u0275textInterpolate(null==t.selection?null:t.selection.restore_storage_class)}}function Fg(n,i){if(1&n&&(e.\u0275\u0275elementStart(0,"tr")(1,"td",18),e.\u0275\u0275i18nStart(2,12),e.\u0275\u0275elementStart(3,"cd-helper",19),e.\u0275\u0275element(4,"span"),e.\u0275\u0275elementEnd(),e.\u0275\u0275i18nEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(5,"td"),e.\u0275\u0275text(6),e.\u0275\u0275pipe(7,"dimlessBinary"),e.\u0275\u0275elementEnd()()),2&n){const t=e.\u0275\u0275nextContext(2);e.\u0275\u0275advance(4),e.\u0275\u0275i18nExp(t.multipartMinPartText),e.\u0275\u0275i18nApply(2),e.\u0275\u0275advance(2),e.\u0275\u0275textInterpolate(e.\u0275\u0275pipeBind1(7,2,null==t.selection?null:t.selection.multipart_min_part_size))}}function Mg(n,i){if(1&n&&(e.\u0275\u0275elementStart(0,"tr")(1,"td",18),e.\u0275\u0275i18nStart(2,13),e.\u0275\u0275elementStart(3,"cd-helper",19),e.\u0275\u0275element(4,"span"),e.\u0275\u0275elementEnd(),e.\u0275\u0275i18nEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(5,"td"),e.\u0275\u0275text(6),e.\u0275\u0275pipe(7,"dimlessBinary"),e.\u0275\u0275elementEnd()()),2&n){const t=e.\u0275\u0275nextContext(2);e.\u0275\u0275advance(4),e.\u0275\u0275i18nExp(t.multipartSyncThreholdText),e.\u0275\u0275i18nApply(2),e.\u0275\u0275advance(2),e.\u0275\u0275textInterpolate(e.\u0275\u0275pipeBind1(7,2,null==t.selection?null:t.selection.multipart_sync_threshold))}}function Pg(n,i){if(1&n&&(e.\u0275\u0275elementContainerStart(0),e.\u0275\u0275elementStart(1,"cds-tabs",15)(2,"cds-tab",16)(3,"table",17)(4,"tbody"),e.\u0275\u0275template(5,sg,7,2,"tr")(6,cg,7,1,"tr")(7,dg,7,2,"tr")(8,ug,10,4,"tr")(9,pg,10,4,"tr")(10,mg,7,2,"tr")(11,Tg,7,2,"tr")(12,gg,7,2,"tr")(13,Rg,1,1,"tr")(14,Cg,7,2,"tr")(15,fg,7,2,"tr")(16,Sg,7,2,"tr")(17,Fg,8,4,"tr")(18,Mg,8,4,"tr"),e.\u0275\u0275elementEnd()()()(),e.\u0275\u0275elementContainerEnd()),2&n){const t=e.\u0275\u0275nextContext();e.\u0275\u0275advance(5),e.\u0275\u0275conditional(t.isTierMatch(t.TIER_TYPE_DISPLAY.LOCAL)?5:-1),e.\u0275\u0275advance(),e.\u0275\u0275conditional(t.isTierMatch(t.TIER_TYPE_DISPLAY.LOCAL)?6:-1),e.\u0275\u0275advance(),e.\u0275\u0275conditional(t.isTierMatch(t.TIER_TYPE_DISPLAY.CLOUD_TIER,t.TIER_TYPE_DISPLAY.GLACIER)?7:-1),e.\u0275\u0275advance(),e.\u0275\u0275conditional(t.isTierMatch(t.TIER_TYPE_DISPLAY.CLOUD_TIER,t.TIER_TYPE_DISPLAY.GLACIER)?8:-1),e.\u0275\u0275advance(),e.\u0275\u0275conditional(t.isTierMatch(t.TIER_TYPE_DISPLAY.CLOUD_TIER,t.TIER_TYPE_DISPLAY.GLACIER)?9:-1),e.\u0275\u0275advance(),e.\u0275\u0275conditional(t.isTierMatch(t.TIER_TYPE_DISPLAY.CLOUD_TIER,t.TIER_TYPE_DISPLAY.GLACIER)?10:-1),e.\u0275\u0275advance(),e.\u0275\u0275conditional(t.isTierMatch(t.TIER_TYPE_DISPLAY.CLOUD_TIER,t.TIER_TYPE_DISPLAY.GLACIER)?11:-1),e.\u0275\u0275advance(),e.\u0275\u0275conditional(t.isTierMatch(t.TIER_TYPE_DISPLAY.CLOUD_TIER,t.TIER_TYPE_DISPLAY.GLACIER)?12:-1),e.\u0275\u0275advance(),e.\u0275\u0275conditional(t.isTierMatch(t.TIER_TYPE_DISPLAY.CLOUD_TIER,t.TIER_TYPE_DISPLAY.GLACIER)&&null!=t.selection&&t.selection.allow_read_through?13:-1),e.\u0275\u0275advance(),e.\u0275\u0275conditional(t.isTierMatch(t.TIER_TYPE_DISPLAY.GLACIER)?14:-1),e.\u0275\u0275advance(),e.\u0275\u0275conditional(t.isTierMatch(t.TIER_TYPE_DISPLAY.GLACIER)?15:-1),e.\u0275\u0275advance(),e.\u0275\u0275conditional(t.isTierMatch(t.TIER_TYPE_DISPLAY.CLOUD_TIER,t.TIER_TYPE_DISPLAY.GLACIER)?16:-1),e.\u0275\u0275advance(),e.\u0275\u0275conditional(t.isTierMatch(t.TIER_TYPE_DISPLAY.CLOUD_TIER,t.TIER_TYPE_DISPLAY.GLACIER)?17:-1),e.\u0275\u0275advance(),e.\u0275\u0275conditional(t.isTierMatch(t.TIER_TYPE_DISPLAY.CLOUD_TIER,t.TIER_TYPE_DISPLAY.GLACIER)?18:-1)}}let Ig=(()=>{class n{constructor(){this.columns=[],this.allowReadThroughText=Nn,this.retainHeadObjectText=yn,this.multipartMinPartText=An,this.multipartSyncThreholdText=hn,this.targetAccessKeyText=vn,this.targetSecretKeyText=Ln,this.targetPathText=bn,this.hostStyleText="The URL format for accessing the remote S3 endpoint:\n  - 'Path': Use for a path-based URL\n  - 'Virtual': Use for a domain-based URL",this.TIER_TYPE_DISPLAY=nt,this.TIER_TYPE=q,this.glacierRestoreDayText=Dn,this.glacierRestoreTiertypeText=Wn,this.restoreDaysText=wn,this.readthroughrestoreDaysText=Un,this.restoreStorageClassText=kn,this.zoneGroupText=Ji}ngOnChanges(){this.selection&&(this.storageDetails={zonegroup_name:this.selection.zonegroup_name,placement_targets:this.selection.placement_targets,access_key:this.selection.access_key,secret:this.selection.secret,target_path:this.selection.target_path,tier_type:this.selection.tier_type,multipart_min_part_size:this.selection.multipart_min_part_size,multipart_sync_threshold:this.selection.multipart_sync_threshold,host_style:this.selection.host_style,retain_head_object:this.selection.retain_head_object,allow_read_through:this.selection.allow_read_through,glacier_restore_days:this.selection.glacier_restore_days,glacier_restore_tier_type:this.selection.glacier_restore_tier_type,restore_storage_class:this.selection.restore_storage_class,read_through_restore_days:this.selection.read_through_restore_days})}isTierMatch(...t){const o=this.selection.tier_type?.toLowerCase();return t.some(_=>_.toLowerCase()===o)}static{this.\u0275fac=function(o){return new(o||n)}}static{this.\u0275cmp=e.\u0275\u0275defineComponent({type:n,selectors:[["cd-rgw-storage-class-details"]],inputs:{selection:"selection"},features:[e.\u0275\u0275NgOnChangesFeature],decls:1,vars:1,consts:()=>{let t,o,_,a,r,s,c,u,p,T,f,G,S,O;return t=" Zone Group " + "\ufffd#3\ufffd" + "" + "\ufffd#4\ufffd" + " " + "\ufffd0\ufffd" + " " + "\ufffd/#4\ufffd" + "" + "\ufffd/#3\ufffd" + "",o=" Placement Target " + "\ufffd#3\ufffd" + "" + "\ufffd#4\ufffd" + " Placement Target defines the destination and rules for moving objects between storage tiers. " + "\ufffd/#4\ufffd" + "" + "\ufffd/#3\ufffd" + "",_=" Target Path " + "\ufffd#3\ufffd" + "" + "\ufffd#4\ufffd" + " " + "\ufffd0\ufffd" + " " + "\ufffd/#4\ufffd" + "" + "\ufffd/#3\ufffd" + "",a=" Access key " + "\ufffd#3\ufffd" + "" + "\ufffd#4\ufffd" + " " + "\ufffd0\ufffd" + " " + "\ufffd/#4\ufffd" + "" + "\ufffd/#3\ufffd" + "",r=" Secret key " + "\ufffd#3\ufffd" + "" + "\ufffd#4\ufffd" + " " + "\ufffd0\ufffd" + " " + "\ufffd/#4\ufffd" + "" + "\ufffd/#3\ufffd" + "",s=" Host Style " + "\ufffd#3\ufffd" + "" + "\ufffd#4\ufffd" + "" + "\ufffd0\ufffd" + "" + "\ufffd/#4\ufffd" + "" + "\ufffd/#3\ufffd" + "",c=" Head Object (Stub File) " + "\ufffd#3\ufffd" + "" + "\ufffd#4\ufffd" + " " + "\ufffd0\ufffd" + "" + "\ufffd/#4\ufffd" + "" + "\ufffd/#3\ufffd" + "",u=" Allow Read Through " + "\ufffd#3\ufffd" + "" + "\ufffd#4\ufffd" + " " + "\ufffd0\ufffd" + " " + "\ufffd/#4\ufffd" + "" + "\ufffd/#3\ufffd" + "",p=" Read through Restore Days " + "\ufffd#3\ufffd" + "" + "\ufffd#4\ufffd" + " " + "\ufffd0\ufffd" + " " + "\ufffd/#4\ufffd" + "" + "\ufffd/#3\ufffd" + "",T=" Glacier Restore Days " + "\ufffd#3\ufffd" + "" + "\ufffd#4\ufffd" + " " + "\ufffd0\ufffd" + " " + "\ufffd/#4\ufffd" + "" + "\ufffd/#3\ufffd" + "",f=" Glacier Restore Tier Type " + "\ufffd#3\ufffd" + "" + "\ufffd#4\ufffd" + " " + "\ufffd0\ufffd" + " " + "\ufffd/#4\ufffd" + "" + "\ufffd/#3\ufffd" + "",G=" Restore Storage Class " + "\ufffd#3\ufffd" + "" + "\ufffd#4\ufffd" + " " + "\ufffd0\ufffd" + " " + "\ufffd/#4\ufffd" + "" + "\ufffd/#3\ufffd" + "",S=" Multipart Minimum Part Size " + "\ufffd#3\ufffd" + "" + "\ufffd#4\ufffd" + " " + "\ufffd0\ufffd" + " " + "\ufffd/#4\ufffd" + "" + "\ufffd/#3\ufffd" + "",O=" Multipart Sync Threshold " + "\ufffd#3\ufffd" + "" + "\ufffd#4\ufffd" + " " + "\ufffd0\ufffd" + " " + "\ufffd/#4\ufffd" + "" + "\ufffd/#3\ufffd" + "",[t,o,_,a,r,s,c,u,p,T,f,G,S,O,[4,"ngIf"],["type","contained","theme","light"],["heading","Details"],["data-testid","rgw-storage-details",1,"cds--data-table--sort","cds--data-table--no-border","cds--data-table","cds--data-table--md"],[1,"bold"],[1,"text-pre-wrap"],["cdsCol","",1,"d-flex",3,"columnNumbers"],["cdsPassword","","type","password","readonly","","id","access_key",3,"value"],["type","button","cdPasswordButton","access_key",1,"btn","btn-light"],["source","access_key"],["cdsPassword","","type","password","readonly","","id","secret",3,"value"],["type","button","cdPasswordButton","secret",1,"btn","btn-light"],["source","secret"]]},template:function(o,_){1&o&&e.\u0275\u0275template(0,Pg,19,14,"ng-container",14),2&o&&e.\u0275\u0275property("ngIf",!!_.selection)},dependencies:[E.NgIf,Pt.m,_t.N,_o.h,Y.S,d.ColumnDirective,d.PasswordInput,d.Tabs,d.Tab,bt.l]})}}return n})();function Og(n,i){if(1&n&&e.\u0275\u0275element(0,"cd-rgw-storage-class-details",5),2&n){const t=e.\u0275\u0275nextContext();e.\u0275\u0275property("selection",t.expandedRow)}}let Ng=(()=>{class n extends Je.D{constructor(t,o,_,a,r,s,c,u){super(),this.rgwZonegroupService=t,this.actionLabels=o,this.cdsModalService=_,this.taskWrapper=a,this.authStorageService=r,this.rgwStorageClassService=s,this.router=c,this.urlBuilder=u,this.selection=new Oe.y,this.storageClassList=[],this.permission=this.authStorageService.getPermissions().rgw}ngOnInit(){this.columns=[{prop:"uniqueId",isInvisible:!0,isHidden:!0},{name:"Storage Class",prop:"storage_class",flexGrow:2},{name:"Type",prop:"tier_type",flexGrow:2},{name:"Zone Group",prop:"zonegroup_name",flexGrow:2},{name:"Placement Target",prop:"placement_target",flexGrow:2},{name:"Target Region",prop:"region",flexGrow:2},{name:"Target Endpoint",prop:"endpoint",flexGrow:2}];const t=()=>this.selection.first()&&`${encodeURI(this.selection.first().zonegroup_name)}/${encodeURI(this.selection.first().placement_target)}/${encodeURI(this.selection.first().storage_class)}`;this.tableActions=[{name:this.actionLabels.CREATE,permission:"create",icon:y.FI.add,click:()=>this.router.navigate([this.urlBuilder.getCreate()]),canBePrimary:o=>!o.hasSelection},{name:this.actionLabels.EDIT,permission:"update",icon:y.FI.edit,routerLink:()=>[`/rgw/tiering/edit/${t()}`]},{name:this.actionLabels.REMOVE,permission:"delete",icon:y.FI.destroy,click:()=>this.removeStorageClassModal()}]}loadStorageClass(){return new Promise((t,o)=>{this.rgwZonegroupService.getAllZonegroupsInfo().subscribe(_=>{this.storageClassList=[];const r=zn.filterAndMapTierTargets(_).map(s=>({...s,tier_type:this.mapTierTypeDisplay(s.tier_type)}));this.transformTierData(r),this.storageClassList.push(...r),t()},_=>{o(_)})})}mapTierTypeDisplay(t){switch(t?.toLowerCase()){case q.CLOUD_TIER:return nt.CLOUD_TIER;case q.LOCAL:return nt.LOCAL;case q.GLACIER:return nt.GLACIER;default:return t}}transformTierData(t){return t.forEach((o,_)=>{const a=o?.zone_group,r=o?.storage_class;o.uniqueId=`${a}-${r}-${_}`}),t}removeStorageClassModal(){const t=this.selection.first().storage_class,o=this.selection.first().placement_target;this.cdsModalService.show(Ue.D,{itemDescription:"Tiering Storage Class",itemNames:[t],actionDescription:"remove",submitActionObservable:()=>this.taskWrapper.wrapTaskAroundCall({task:new St.O("rgw/zonegroup/storage-class",{placement_target:o,storage_class:t}),call:this.rgwStorageClassService.removeStorageClass(o,t)})})}updateSelection(t){this.selection=t}setExpandedRow(t){super.setExpandedRow(t)}static{this.\u0275fac=function(o){return new(o||n)(e.\u0275\u0275directiveInject(ke.Z),e.\u0275\u0275directiveInject(P.Ss),e.\u0275\u0275directiveInject(he.V),e.\u0275\u0275directiveInject(It.a),e.\u0275\u0275directiveInject(be.v),e.\u0275\u0275directiveInject(Co),e.\u0275\u0275directiveInject(Q.Router),e.\u0275\u0275directiveInject(se.E))}}static{this.\u0275cmp=e.\u0275\u0275defineComponent({type:n,selectors:[["cd-rgw-storage-class-list"]],features:[e.\u0275\u0275ProvidersFeature([{provide:se.E,useValue:new se.E("rgw/tiering")}]),e.\u0275\u0275InheritDefinitionFeature],decls:7,vars:7,consts:()=>{let t;return t=" A storage class for tiering defines the policies for automatically moving objects between different storage tiers. ",[t,["columnMode","flex","identifier","uniqueId","selectionType","single",3,"fetchData","setExpandedRow","updateSelection","data","columns","forceIdentifier","hasDetails"],[1,"table-actions"],[1,"btn-group",3,"permission","selection","tableActions"],[3,"selection",4,"cdTableDetail"],[3,"selection"]]},template:function(o,_){1&o&&(e.\u0275\u0275elementStart(0,"legend")(1,"cd-help-text"),e.\u0275\u0275i18n(2,0),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(3,"cd-table",1),e.\u0275\u0275listener("fetchData",function(){return _.loadStorageClass()})("setExpandedRow",function(r){return _.setExpandedRow(r)})("updateSelection",function(r){return _.updateSelection(r)}),e.\u0275\u0275elementStart(4,"div",2),e.\u0275\u0275element(5,"cd-table-actions",3),e.\u0275\u0275elementEnd(),e.\u0275\u0275template(6,Og,1,1,"cd-rgw-storage-class-details",4),e.\u0275\u0275elementEnd()),2&o&&(e.\u0275\u0275advance(3),e.\u0275\u0275property("data",_.storageClassList)("columns",_.columns)("forceIdentifier",!0)("hasDetails",!0),e.\u0275\u0275advance(2),e.\u0275\u0275property("permission",_.permission)("selection",_.selection)("tableActions",_.tableActions))},dependencies:[ae.O,re.O,De.j,ot.N,Ig]})}}return n})();var Ag={elem:"svg",attrs:{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 32",fill:"currentColor",width:16,height:16},content:[{elem:"path",attrs:{d:"M2 26H30V28H2zM25.4 9c.8-.8.8-2 0-2.8 0 0 0 0 0 0l-3.6-3.6c-.8-.8-2-.8-2.8 0 0 0 0 0 0 0l-15 15V24h6.4L25.4 9zM20.4 4L24 7.6l-3 3L17.4 7 20.4 4zM6 22v-3.6l10-10 3.6 3.6-10 10H6z"}}],name:"edit",size:16},hg={elem:"svg",attrs:{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 32",fill:"currentColor",width:20,height:20},content:[{elem:"path",attrs:{d:"M20,16a5,5,0,0,0,10,0,1,1,0,0,0-.1055-.4473L25.896,7.5562a.8913.8913,0,0,0-.0454-.0816A1,1,0,0,0,25,7H18.8218A3.0155,3.0155,0,0,0,17,5.1841V2H15V5.1841A3.0155,3.0155,0,0,0,13.1782,7H7a1,1,0,0,0-.8945.5527l-4,8A1,1,0,0,0,2,16a5,5,0,0,0,10,0,1,1,0,0,0-.1055-.4473L8.6182,9h4.56A3.0147,3.0147,0,0,0,15,10.8154V28H6v2H26V28H17V10.8159A3.0155,3.0155,0,0,0,18.8218,9h4.56l-3.2763,6.5527A1,1,0,0,0,20,16ZM7,19a2.9958,2.9958,0,0,1-2.8152-2h5.63A2.9956,2.9956,0,0,1,7,19Zm2.3821-4H4.6179L7,10.2363ZM16,9a1,1,0,1,1,1-1A1.0009,1.0009,0,0,1,16,9Zm9,10a2.9958,2.9958,0,0,1-2.8152-2h5.63A2.9956,2.9956,0,0,1,25,19Zm0-8.7637L27.3821,15H22.6179Z"}}],name:"scales",size:20},bg={elem:"svg",attrs:{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 16 16",fill:"currentColor",width:16,height:16},content:[{elem:"path",attrs:{d:"M8 2c1.4 0 2.5 1.1 2.5 2.5S9.4 7 8 7 5.5 5.9 5.5 4.5 6.6 2 8 2M8 1C6.1 1 4.5 2.6 4.5 4.5S6.1 8 8 8s3.5-1.6 3.5-3.5S9.9 1 8 1zM13 15h-1v-2.5c0-1.4-1.1-2.5-2.5-2.5h-3C5.1 10 4 11.1 4 12.5V15H3v-2.5C3 10.6 4.6 9 6.5 9h3c1.9 0 3.5 1.6 3.5 3.5V15z"}}],name:"user",size:16},vg={elem:"svg",attrs:{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 32",fill:"currentColor",width:20,height:20},content:[{elem:"path",attrs:{d:"M28.5039,8.1362l-12-7a1,1,0,0,0-1.0078,0l-12,7A1,1,0,0,0,3,9V23a1,1,0,0,0,.4961.8638l12,7a1,1,0,0,0,1.0078,0l12-7A1,1,0,0,0,29,23V9A1,1,0,0,0,28.5039,8.1362ZM16,3.1577,26.0156,9,16,14.8423,5.9844,9ZM5,10.7412l10,5.833V28.2588L5,22.4258ZM17,28.2588V16.5742l10-5.833V22.4258Z"}}],name:"cube",size:20},Lg={elem:"svg",attrs:{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 32",fill:"currentColor",width:16,height:16},content:[{elem:"path",attrs:{d:"M23,20a5,5,0,0,0-3.89,1.89L11.8,17.32a4.46,4.46,0,0,0,0-2.64l7.31-4.57A5,5,0,1,0,18,7a4.79,4.79,0,0,0,.2,1.32l-7.31,4.57a5,5,0,1,0,0,6.22l7.31,4.57A4.79,4.79,0,0,0,18,25a5,5,0,1,0,5-5ZM23,4a3,3,0,1,1-3,3A3,3,0,0,1,23,4ZM7,19a3,3,0,1,1,3-3A3,3,0,0,1,7,19Zm16,9a3,3,0,1,1,3-3A3,3,0,0,1,23,28Z"}}],name:"share",size:16},yg=g(64441),$g={elem:"svg",attrs:{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 32",fill:"currentColor",width:16,height:16},content:[{elem:"path",attrs:{d:"M21,2a8.9977,8.9977,0,0,0-8.6119,11.6118L2,24v6H8L18.3881,19.6118A9,9,0,1,0,21,2Zm0,16a7.0125,7.0125,0,0,1-2.0322-.3022L17.821,17.35l-.8472.8472-3.1811,3.1812L12.4141,20,11,21.4141l1.3787,1.3786-1.5859,1.586L9.4141,23,8,24.4141l1.3787,1.3786L7.1716,28H4V24.8284l9.8023-9.8023.8472-.8474-.3473-1.1467A7,7,0,1,1,21,18Z"}},{elem:"circle",attrs:{cx:"22",cy:"10",r:"2"}}],name:"password",size:16},Dg={elem:"svg",attrs:{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 16 16",fill:"currentColor",width:16,height:16},content:[{elem:"path",attrs:{d:"M12.3 9.3L8.5 13.1 8.5 1 7.5 1 7.5 13.1 3.7 9.3 3 10 8 15 13 10z"}}],name:"arrow--down",size:16},Wg=g(55619),xg={elem:"svg",attrs:{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 32",fill:"currentColor",width:32,height:32},content:[{elem:"path",attrs:{d:"M12.1,2A9.8,9.8,0,0,0,6.7,3.6L13.1,10a2.1,2.1,0,0,1,.2,3,2.1,2.1,0,0,1-3-.2L3.7,6.4A9.84,9.84,0,0,0,2,12.1,10.14,10.14,0,0,0,12.1,22.2a10.9,10.9,0,0,0,2.6-.3l6.7,6.7a5,5,0,0,0,7.1-7.1l-6.7-6.7a10.9,10.9,0,0,0,.3-2.6A10,10,0,0,0,12.1,2Zm8,10.1a7.61,7.61,0,0,1-.3,2.1l-.3,1.1.8.8L27,22.8a2.88,2.88,0,0,1,.9,2.1A2.72,2.72,0,0,1,27,27a2.9,2.9,0,0,1-4.2,0l-6.7-6.7-.8-.8-1.1.3a7.61,7.61,0,0,1-2.1.3,8.27,8.27,0,0,1-5.7-2.3A7.63,7.63,0,0,1,4,12.1a8.33,8.33,0,0,1,.3-2.2l4.4,4.4a4.14,4.14,0,0,0,5.9.2,4.14,4.14,0,0,0-.2-5.9L10,4.2a6.45,6.45,0,0,1,2-.3,8.27,8.27,0,0,1,5.7,2.3A8.49,8.49,0,0,1,20.1,12.1Z"}}],name:"tools",size:32},wg={elem:"svg",attrs:{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 32",fill:"currentColor",width:20,height:20},content:[{elem:"path",attrs:{d:"M28,12a2,2,0,0,0,2-2V4a2,2,0,0,0-2-2H4A2,2,0,0,0,2,4v6a2,2,0,0,0,2,2H15v4H9a2,2,0,0,0-2,2v4H4a2,2,0,0,0-2,2v4a2,2,0,0,0,2,2h8a2,2,0,0,0,2-2V24a2,2,0,0,0-2-2H9V18H23v4H20a2,2,0,0,0-2,2v4a2,2,0,0,0,2,2h8a2,2,0,0,0,2-2V24a2,2,0,0,0-2-2H25V18a2,2,0,0,0-2-2H17V12ZM12,28H4V24h8Zm16,0H20V24h8ZM4,4H28v6H4Z"}}],name:"parent-child",size:20},Ug={elem:"svg",attrs:{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 32",fill:"currentColor",width:16,height:16},content:[{elem:"path",attrs:{"stroke-width":"0",d:"M28 8v-3c0-2.2056-1.7944-4-4-4s-4 1.7944-4 4v3c-1.1028 0-2 .8975-2 2v6c0 1.1025.8972 2 2 2h8c1.1028 0 2-.8975 2-2v-6c0-1.1025-.8972-2-2-2zm-6-3c0-1.1025.8972-2 2-2s2 .8975 2 2v3h-4v-3zm-2 11v-6h8v6h-8zM16 30h-2v-5c-.0018-1.6561-1.3439-2.9982-3-3h-4c-1.6561.0018-2.9982 1.3439-3 3v5h-2v-5c.0033-2.7601 2.2399-4.9967 5-5h4c2.7601.0033 4.9967 2.2399 5 5v5zM9 10c1.6569 0 3 1.3431 3 3s-1.3431 3-3 3-3-1.3431-3-3 1.3431-3 3-3m0-2c-2.7614 0-5 2.2386-5 5s2.2386 5 5 5 5-2.2386 5-5-2.2386-5-5-5z"}}],name:"user--access-locked",size:16},kg=g(26481);function zg(n,i){if(1&n&&(e.\u0275\u0275elementStart(0,"div")(1,"legend"),e.\u0275\u0275i18n(2,0),e.\u0275\u0275elementEnd(),e.\u0275\u0275element(3,"cd-table-key-value",3),e.\u0275\u0275elementEnd()),2&n){const t=e.\u0275\u0275nextContext();e.\u0275\u0275advance(3),e.\u0275\u0275property("data",t.quota)}}function Hg(n,i){if(1&n&&(e.\u0275\u0275elementStart(0,"div")(1,"legend"),e.\u0275\u0275i18n(2,1),e.\u0275\u0275elementEnd(),e.\u0275\u0275element(3,"cd-table-key-value",3),e.\u0275\u0275elementEnd()),2&n){const t=e.\u0275\u0275nextContext();e.\u0275\u0275advance(3),e.\u0275\u0275property("data",t.bucket_quota)}}let Xg=(()=>{class n{constructor(t){this.dimlessBinary=t,this.quota={},this.bucket_quota={}}ngOnChanges(t){t.selection&&t.selection.currentValue&&(this.quota=this.createDisplayValues("quota"),this.bucket_quota=this.createDisplayValues("bucket_quota"))}createDisplayValues(t){return{Enabled:this.selection[t].enabled?"Yes":"No","Maximum size":this.selection[t].enabled?this.selection[t].max_size<=-1?"Unlimited":this.dimlessBinary.transform(this.selection[t].max_size):"-","Maximum objects":this.selection[t].enabled?this.selection[t].max_objects<=-1?"Unlimited":this.selection[t].max_objects:"-"}}static{this.\u0275fac=function(o){return new(o||n)(e.\u0275\u0275directiveInject(bt.l))}}static{this.\u0275cmp=e.\u0275\u0275defineComponent({type:n,selectors:[["cd-rgw-user-accounts-details"]],inputs:{selection:"selection"},features:[e.\u0275\u0275NgOnChangesFeature],decls:2,vars:2,consts:()=>{let t,o;return t="Account quota",o="Bucket quota",[t,o,[4,"ngIf"],[3,"data"]]},template:function(o,_){1&o&&e.\u0275\u0275template(0,zg,4,1,"div",2)(1,Hg,4,1,"div",2),2&o&&(e.\u0275\u0275property("ngIf",_.selection.quota),e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf",_.selection.bucket_quota))},dependencies:[E.NgIf,Kt.i]})}}return n})();function Bg(n,i){if(1&n&&e.\u0275\u0275element(0,"cd-rgw-user-accounts-details",5),2&n){const t=e.\u0275\u0275nextContext();e.\u0275\u0275property("selection",t.expandedRow)}}const Yt="rgw/accounts";let Vg=(()=>{class n extends Je.D{constructor(t,o,_,a,r,s,c){super(),this.authStorageService=t,this.actionLabels=o,this.router=_,this.rgwUserAccountsService=a,this.cdsModalService=r,this.taskWrapper=s,this.ngZone=c,this.tableActions=[],this.columns=[],this.accounts=[],this.selection=new Oe.y}ngOnInit(){this.permission=this.authStorageService.getPermissions().rgw,this.columns=[{name:"Name",prop:"name",flexGrow:1},{name:"Tenant",prop:"tenant",flexGrow:1},{name:"Account id",prop:"id",flexGrow:1},{name:"Email address",prop:"email",flexGrow:1},{name:"Max users",prop:"max_users",flexGrow:1,cellTransformation:He.x.map,customTemplateConfig:{"-1":"Disabled",0:"Unlimited"}},{name:"Max roles",prop:"max_roles",flexGrow:1,cellTransformation:He.x.map,customTemplateConfig:{"-1":"Disabled",0:"Unlimited"}},{name:"Max groups",prop:"max_groups",flexGrow:1,cellTransformation:He.x.map,customTemplateConfig:{"-1":"Disabled",0:"Unlimited"}},{name:"Max. buckets",prop:"max_buckets",flexGrow:1,cellTransformation:He.x.map,customTemplateConfig:{"-1":"Disabled",0:"Unlimited"}},{name:"Max access keys",prop:"max_access_keys",flexGrow:1,cellTransformation:He.x.map,customTemplateConfig:{"-1":"Disabled",0:"Unlimited"}}];const t=()=>this.selection.first().groupName&&this.selection.first().id?`${P.Qp.EDIT}/${this.selection.first().id}\n        }`:`${P.Qp.EDIT}/${this.selection.first().id}`;this.tableActions=[{permission:"create",icon:y.FI.add,click:()=>this.router.navigate([`${Yt}/${P.Qp.CREATE}`]),name:this.actionLabels.CREATE,canBePrimary:r=>!r.hasSelection},{permission:"update",icon:y.FI.edit,click:()=>this.router.navigate([`${Yt}/${t()}`]),name:this.actionLabels.EDIT},{permission:"delete",icon:y.FI.destroy,click:()=>this.deleteAction(),name:this.actionLabels.DELETE}],this.setTableRefreshTimeout()}getAccountsList(t){this.setTableRefreshTimeout(),this.rgwUserAccountsService.list(!0).subscribe({next:o=>{this.accounts=o},error:()=>{t&&t.error()}})}updateSelection(t){this.selection=t}deleteAction(){const t=this.selection.first().name;this.cdsModalService.show(Ue.D,{itemDescription:"Account",itemNames:[t],submitActionObservable:()=>new U.Observable(o=>{this.taskWrapper.wrapTaskAroundCall({task:new St.O(Yt,{account_names:[t]}),call:(0,U.forkJoin)(this.selection.selected.map(_=>this.rgwUserAccountsService.remove(_.id)))}).subscribe({error:_=>{o.error(_),this.table.refreshBtn()},complete:()=>{o.complete(),this.table.refreshBtn()}})})})}static{this.\u0275fac=function(o){return new(o||n)(e.\u0275\u0275directiveInject(be.v),e.\u0275\u0275directiveInject(P.Ss),e.\u0275\u0275directiveInject(Q.Router),e.\u0275\u0275directiveInject(ht),e.\u0275\u0275directiveInject(he.V),e.\u0275\u0275directiveInject(It.a),e.\u0275\u0275directiveInject(e.NgZone))}}static{this.\u0275cmp=e.\u0275\u0275defineComponent({type:n,selectors:[["cd-rgw-user-accounts"]],viewQuery:function(o,_){if(1&o&&e.\u0275\u0275viewQuery(re.O,7),2&o){let a;e.\u0275\u0275queryRefresh(a=e.\u0275\u0275loadQuery())&&(_.table=a.first)}},features:[e.\u0275\u0275ProvidersFeature([{provide:se.E,useValue:new se.E(Yt)}]),e.\u0275\u0275InheritDefinitionFeature],decls:8,vars:8,consts:()=>{let t;return t=" User Accounts " + "\ufffd#3\ufffd" + " Administrators can assign unique credentials to users or applications, enabling granular access control and enhancing security across the cluster. " + "\ufffd/#3\ufffd" + "",[["table",""],t,["selectionType","single","columnMode","flex","identifier","id",3,"setExpandedRow","updateSelection","fetchData","autoReload","data","columns","hasDetails","status"],[1,"table-actions",3,"permission","selection","tableActions"],[3,"selection",4,"cdTableDetail"],[3,"selection"]]},template:function(o,_){if(1&o){const a=e.\u0275\u0275getCurrentView();e.\u0275\u0275element(0,"cd-rgw-user-tabs"),e.\u0275\u0275elementStart(1,"legend"),e.\u0275\u0275i18nStart(2,1),e.\u0275\u0275element(3,"cd-help-text"),e.\u0275\u0275i18nEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(4,"cd-table",2,0),e.\u0275\u0275listener("setExpandedRow",function(s){return e.\u0275\u0275restoreView(a),e.\u0275\u0275resetView(_.setExpandedRow(s))})("updateSelection",function(s){return e.\u0275\u0275restoreView(a),e.\u0275\u0275resetView(_.updateSelection(s))})("fetchData",function(s){return e.\u0275\u0275restoreView(a),e.\u0275\u0275resetView(_.getAccountsList(s))}),e.\u0275\u0275element(6,"cd-table-actions",3),e.\u0275\u0275template(7,Bg,1,1,"cd-rgw-user-accounts-details",4),e.\u0275\u0275elementEnd()}2&o&&(e.\u0275\u0275advance(4),e.\u0275\u0275property("autoReload",!1)("data",_.accounts)("columns",_.columns)("hasDetails",!0)("status",_.tableStatus),e.\u0275\u0275advance(2),e.\u0275\u0275property("permission",_.permission)("selection",_.selection)("tableActions",_.tableActions))},dependencies:[ae.O,re.O,De.j,ot.N,no,Xg]})}}return n})();const Zg=()=>({md:4}),Kg=()=>({formControl:"max_buckets_mode"}),qg=()=>({formControl:"max_users_mode"}),jg=()=>({formControl:"max_roles_mode"}),Yg=()=>({formControl:"max_groups_mode"}),Qg=()=>({formControl:"max_access_keys_mode"}),Jg=()=>({enabled:"account_quota_enabled",unlimitedSize:"account_quota_max_size_unlimited",maxSize:"account_quota_max_size",unlimitedObjects:"account_quota_max_objects_unlimited",maxObjects:"account_quota_max_objects"}),eE=n=>({formControl:n,quotaType:"account"}),tE=()=>({enabled:"bucket_quota_enabled",unlimitedSize:"bucket_quota_max_size_unlimited",maxSize:"bucket_quota_max_size",unlimitedObjects:"bucket_quota_max_objects_unlimited",maxObjects:"bucket_quota_max_objects"}),nE=n=>({formControl:n,quotaType:"bucket"}),oE=()=>({formControl:"max_buckets"}),_E=()=>({formControl:"max_users"}),iE=()=>({formControl:"max_roles"}),aE=()=>({formControl:"max_groups"}),rE=()=>({formControl:"max_access_keys"});function lE(n,i){1&n&&(e.\u0275\u0275elementStart(0,"span",44),e.\u0275\u0275elementContainerStart(1),e.\u0275\u0275i18n(2,14),e.\u0275\u0275elementContainerEnd(),e.\u0275\u0275elementEnd())}function sE(n,i){if(1&n&&e.\u0275\u0275template(0,lE,3,0,"span",43),2&n){e.\u0275\u0275nextContext();const t=e.\u0275\u0275reference(2),o=e.\u0275\u0275nextContext();e.\u0275\u0275property("ngIf",o.accountForm.showError("name",t,"required"))}}function cE(n,i){1&n&&(e.\u0275\u0275elementStart(0,"span"),e.\u0275\u0275elementContainerStart(1),e.\u0275\u0275i18n(2,15),e.\u0275\u0275elementContainerEnd(),e.\u0275\u0275elementEnd())}function dE(n,i){if(1&n&&e.\u0275\u0275template(0,cE,3,0,"span",41),2&n){e.\u0275\u0275nextContext();const t=e.\u0275\u0275reference(2),o=e.\u0275\u0275nextContext();e.\u0275\u0275property("ngIf",o.accountForm.showError("email",t,"email"))}}function uE(n,i){1&n&&e.\u0275\u0275elementContainer(0)}function pE(n,i){1&n&&e.\u0275\u0275elementContainer(0)}function mE(n,i){if(1&n&&(e.\u0275\u0275elementStart(0,"span"),e.\u0275\u0275template(1,pE,1,0,"ng-container",40),e.\u0275\u0275elementEnd()),2&n){e.\u0275\u0275nextContext(2);const t=e.\u0275\u0275reference(5);e.\u0275\u0275advance(),e.\u0275\u0275property("ngTemplateOutlet",t)("ngTemplateOutletContext",e.\u0275\u0275pureFunction0(2,oE))}}function TE(n,i){1&n&&e.\u0275\u0275elementContainer(0)}function gE(n,i){1&n&&e.\u0275\u0275elementContainer(0)}function EE(n,i){if(1&n&&(e.\u0275\u0275elementStart(0,"span"),e.\u0275\u0275template(1,gE,1,0,"ng-container",40),e.\u0275\u0275elementEnd()),2&n){e.\u0275\u0275nextContext(2);const t=e.\u0275\u0275reference(5);e.\u0275\u0275advance(),e.\u0275\u0275property("ngTemplateOutlet",t)("ngTemplateOutletContext",e.\u0275\u0275pureFunction0(2,_E))}}function RE(n,i){1&n&&e.\u0275\u0275elementContainer(0)}function CE(n,i){1&n&&e.\u0275\u0275elementContainer(0)}function fE(n,i){if(1&n&&(e.\u0275\u0275elementStart(0,"span"),e.\u0275\u0275template(1,CE,1,0,"ng-container",40),e.\u0275\u0275elementEnd()),2&n){e.\u0275\u0275nextContext(2);const t=e.\u0275\u0275reference(5);e.\u0275\u0275advance(),e.\u0275\u0275property("ngTemplateOutlet",t)("ngTemplateOutletContext",e.\u0275\u0275pureFunction0(2,iE))}}function SE(n,i){1&n&&e.\u0275\u0275elementContainer(0)}function FE(n,i){1&n&&e.\u0275\u0275elementContainer(0)}function ME(n,i){if(1&n&&(e.\u0275\u0275elementStart(0,"span"),e.\u0275\u0275template(1,FE,1,0,"ng-container",40),e.\u0275\u0275elementEnd()),2&n){e.\u0275\u0275nextContext(2);const t=e.\u0275\u0275reference(5);e.\u0275\u0275advance(),e.\u0275\u0275property("ngTemplateOutlet",t)("ngTemplateOutletContext",e.\u0275\u0275pureFunction0(2,aE))}}function PE(n,i){1&n&&e.\u0275\u0275elementContainer(0)}function IE(n,i){1&n&&e.\u0275\u0275elementContainer(0)}function OE(n,i){if(1&n&&(e.\u0275\u0275elementStart(0,"span"),e.\u0275\u0275template(1,IE,1,0,"ng-container",40),e.\u0275\u0275elementEnd()),2&n){e.\u0275\u0275nextContext(2);const t=e.\u0275\u0275reference(5);e.\u0275\u0275advance(),e.\u0275\u0275property("ngTemplateOutlet",t)("ngTemplateOutletContext",e.\u0275\u0275pureFunction0(2,rE))}}function GE(n,i){1&n&&e.\u0275\u0275elementContainer(0)}function NE(n,i){1&n&&e.\u0275\u0275elementContainer(0)}function AE(n,i){if(1&n){const t=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementContainerStart(0),e.\u0275\u0275elementStart(1,"form",29,3)(3,"div",30),e.\u0275\u0275i18n(4,10),e.\u0275\u0275pipe(5,"titlecase"),e.\u0275\u0275pipe(6,"upperFirst"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(7,"div",31)(8,"cds-text-label",32),e.\u0275\u0275i18nStart(9,11),e.\u0275\u0275element(10,"input",33),e.\u0275\u0275i18nEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275template(11,sE,1,1,"ng-template",null,4,e.\u0275\u0275templateRefExtractor),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(13,"div",31)(14,"cds-text-label",34),e.\u0275\u0275i18nStart(15,12),e.\u0275\u0275element(16,"input",35),e.\u0275\u0275i18nEnd(),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(17,"div",31)(18,"cds-text-label",36),e.\u0275\u0275i18nStart(19,13),e.\u0275\u0275element(20,"input",37),e.\u0275\u0275i18nEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275template(21,dE,1,1,"ng-template",null,5,e.\u0275\u0275templateRefExtractor),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(23,"div",38)(24,"div",39),e.\u0275\u0275template(25,uE,1,0,"ng-container",40),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(26,"div",39),e.\u0275\u0275template(27,mE,2,3,"span",41),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(28,"div",38)(29,"div",39),e.\u0275\u0275template(30,TE,1,0,"ng-container",40),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(31,"div",39),e.\u0275\u0275template(32,EE,2,3,"span",41),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(33,"div",38)(34,"div",39),e.\u0275\u0275template(35,RE,1,0,"ng-container",40),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(36,"div",39),e.\u0275\u0275template(37,fE,2,3,"span",41),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(38,"div",38)(39,"div",39),e.\u0275\u0275template(40,SE,1,0,"ng-container",40),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(41,"div",39),e.\u0275\u0275template(42,ME,2,3,"span",41),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(43,"div",38)(44,"div",39),e.\u0275\u0275template(45,PE,1,0,"ng-container",40),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(46,"div",39),e.\u0275\u0275template(47,OE,2,3,"span",41),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(48,"div",31),e.\u0275\u0275template(49,GE,1,0,"ng-container",40),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(50,"div",31),e.\u0275\u0275template(51,NE,1,0,"ng-container",40),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(52,"cd-form-button-panel",42),e.\u0275\u0275pipe(53,"titlecase"),e.\u0275\u0275pipe(54,"upperFirst"),e.\u0275\u0275listener("submitActionEvent",function(){e.\u0275\u0275restoreView(t);const _=e.\u0275\u0275nextContext();return e.\u0275\u0275resetView(_.submit())}),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementContainerEnd()}if(2&n){const t=e.\u0275\u0275reference(2),o=e.\u0275\u0275reference(12),_=e.\u0275\u0275reference(22),a=e.\u0275\u0275nextContext(),r=e.\u0275\u0275reference(3),s=e.\u0275\u0275reference(7);e.\u0275\u0275advance(),e.\u0275\u0275property("formGroup",a.accountForm),e.\u0275\u0275advance(5),e.\u0275\u0275i18nExp(e.\u0275\u0275pipeBind1(5,28,a.action))(e.\u0275\u0275pipeBind1(6,30,a.resource)),e.\u0275\u0275i18nApply(4),e.\u0275\u0275advance(2),e.\u0275\u0275property("invalid",!a.accountForm.controls.name.valid&&a.accountForm.controls.name.dirty)("invalidText",o),e.\u0275\u0275advance(10),e.\u0275\u0275property("invalid",!a.accountForm.controls.email.valid&&a.accountForm.controls.email.dirty)("invalidText",_),e.\u0275\u0275advance(7),e.\u0275\u0275property("ngTemplateOutlet",r)("ngTemplateOutletContext",e.\u0275\u0275pureFunction0(36,Kg)),e.\u0275\u0275advance(2),e.\u0275\u0275property("ngIf",1==a.accountForm.get("max_buckets_mode").value),e.\u0275\u0275advance(3),e.\u0275\u0275property("ngTemplateOutlet",r)("ngTemplateOutletContext",e.\u0275\u0275pureFunction0(37,qg)),e.\u0275\u0275advance(2),e.\u0275\u0275property("ngIf",1==a.accountForm.get("max_users_mode").value),e.\u0275\u0275advance(3),e.\u0275\u0275property("ngTemplateOutlet",r)("ngTemplateOutletContext",e.\u0275\u0275pureFunction0(38,jg)),e.\u0275\u0275advance(2),e.\u0275\u0275property("ngIf",1==a.accountForm.get("max_roles_mode").value),e.\u0275\u0275advance(3),e.\u0275\u0275property("ngTemplateOutlet",r)("ngTemplateOutletContext",e.\u0275\u0275pureFunction0(39,Yg)),e.\u0275\u0275advance(2),e.\u0275\u0275property("ngIf",1==a.accountForm.get("max_groups_mode").value),e.\u0275\u0275advance(3),e.\u0275\u0275property("ngTemplateOutlet",r)("ngTemplateOutletContext",e.\u0275\u0275pureFunction0(40,Qg)),e.\u0275\u0275advance(2),e.\u0275\u0275property("ngIf",1==a.accountForm.get("max_access_keys_mode").value),e.\u0275\u0275advance(2),e.\u0275\u0275property("ngTemplateOutlet",s)("ngTemplateOutletContext",e.\u0275\u0275pureFunction1(42,eE,e.\u0275\u0275pureFunction0(41,Jg))),e.\u0275\u0275advance(2),e.\u0275\u0275property("ngTemplateOutlet",s)("ngTemplateOutletContext",e.\u0275\u0275pureFunction1(45,nE,e.\u0275\u0275pureFunction0(44,tE))),e.\u0275\u0275advance(),e.\u0275\u0275property("form",t)("submitText",e.\u0275\u0275pipeBind1(53,32,a.action)+" "+e.\u0275\u0275pipeBind1(54,34,a.resource))}}function hE(n,i){if(1&n){const t=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"cds-select",45),e.\u0275\u0275pipe(1,"upperFirst"),e.\u0275\u0275listener("change",function(_){const a=e.\u0275\u0275restoreView(t).formControl,r=e.\u0275\u0275nextContext();return e.\u0275\u0275resetView(r.onModeChange(_.target.value,a))}),e.\u0275\u0275elementStart(2,"option",46),e.\u0275\u0275text(3,"Unlimited"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(4,"option",47),e.\u0275\u0275text(5,"Disabled"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(6,"option",48),e.\u0275\u0275text(7,"Custom"),e.\u0275\u0275elementEnd()()}if(2&n){const t=i.formControl,o=e.\u0275\u0275nextContext();e.\u0275\u0275propertyInterpolate1("label","",e.\u0275\u0275pipeBind1(1,6,t.split("_")[1])," Mode"),e.\u0275\u0275property("formControlName",t)("name",t)("id",t)("helperText",o.getHelperTextForMode(t))}}function bE(n,i){1&n&&(e.\u0275\u0275elementStart(0,"span"),e.\u0275\u0275i18n(1,16),e.\u0275\u0275elementEnd())}function vE(n,i){1&n&&(e.\u0275\u0275elementStart(0,"span"),e.\u0275\u0275i18n(1,17),e.\u0275\u0275elementEnd())}function LE(n,i){1&n&&(e.\u0275\u0275elementStart(0,"span"),e.\u0275\u0275i18n(1,18),e.\u0275\u0275elementEnd())}function yE(n,i){if(1&n&&e.\u0275\u0275template(0,bE,2,0,"span",41)(1,vE,2,0,"span",41)(2,LE,2,0,"span",41),2&n){const t=e.\u0275\u0275nextContext().formControl,o=e.\u0275\u0275nextContext();e.\u0275\u0275property("ngIf",o.accountForm.showError(t,o.formDir,"required")),e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf",0==o.accountForm.controls[t].value&&o.accountForm.showError(t,o.formDir,"min")),e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf",o.accountForm.showError(t,o.formDir,"pattern"))}}function $E(n,i){if(1&n&&(e.\u0275\u0275element(0,"cds-number",49),e.\u0275\u0275pipe(1,"upperFirst"),e.\u0275\u0275pipe(2,"upperFirst"),e.\u0275\u0275template(3,yE,3,3,"ng-template",null,6,e.\u0275\u0275templateRefExtractor)),2&n){const t=i.formControl,o=e.\u0275\u0275reference(4),_=e.\u0275\u0275nextContext();e.\u0275\u0275propertyInterpolate("formControlName",t),e.\u0275\u0275propertyInterpolate2("label","",e.\u0275\u0275pipeBind1(1,12,t.split("_")[0]),". ",t.split("_").length>2?t.split("_")[1]+" "+t.split("_")[2]:t.split("_")[1],""),e.\u0275\u0275propertyInterpolate2("cdRequiredField","",e.\u0275\u0275pipeBind1(2,14,t.split("_")[0]),". ",t.split("_").length>2?t.split("_")[1]+" "+t.split("_")[2]:t.split("_")[1],""),e.\u0275\u0275property("id",t)("name",t)("min",1)("invalid",!_.accountForm.controls[t].valid&&_.accountForm.controls[t].dirty)("invalidText",o)}}function DE(n,i){1&n&&(e.\u0275\u0275elementStart(0,"div",55),e.\u0275\u0275text(1,"Set quota on account owned by users."),e.\u0275\u0275elementEnd())}function WE(n,i){1&n&&(e.\u0275\u0275elementStart(0,"div",55),e.\u0275\u0275text(1," Set quota on buckets owned by an account. "),e.\u0275\u0275elementEnd())}function xE(n,i){if(1&n&&(e.\u0275\u0275elementStart(0,"cds-checkbox",53),e.\u0275\u0275text(1," Unlimited size "),e.\u0275\u0275elementEnd()),2&n){const t=e.\u0275\u0275nextContext(2),o=t.quotaType;e.\u0275\u0275property("formControlName",t.formControl.unlimitedSize)("id",o+"unlimitedSize_checkbox")}}function wE(n,i){1&n&&(e.\u0275\u0275elementStart(0,"span"),e.\u0275\u0275i18n(1,20),e.\u0275\u0275elementEnd())}function UE(n,i){1&n&&(e.\u0275\u0275elementStart(0,"span"),e.\u0275\u0275i18n(1,21),e.\u0275\u0275elementEnd())}function kE(n,i){1&n&&(e.\u0275\u0275elementStart(0,"span"),e.\u0275\u0275i18n(1,22),e.\u0275\u0275elementEnd())}function zE(n,i){if(1&n&&e.\u0275\u0275template(0,wE,2,0,"span",41)(1,UE,2,0,"span",41)(2,kE,2,0,"span",41),2&n){const t=e.\u0275\u0275nextContext(3).formControl,o=e.\u0275\u0275nextContext();e.\u0275\u0275property("ngIf",o.accountForm.showError(t.maxSize,o.formDir,"required")),e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf",o.accountForm.showError(t.maxSize,o.formDir,"quotaMaxSize")),e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf",o.accountForm.showError(t.maxSize,o.formDir,"pattern"))}}function HE(n,i){if(1&n&&(e.\u0275\u0275elementStart(0,"div",59)(1,"cds-text-label",60),e.\u0275\u0275i18nStart(2,19),e.\u0275\u0275element(3,"input",61),e.\u0275\u0275i18nEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275template(4,zE,3,3,"ng-template",null,8,e.\u0275\u0275templateRefExtractor),e.\u0275\u0275elementEnd()),2&n){const t=e.\u0275\u0275reference(5),o=e.\u0275\u0275nextContext(2).formControl,_=e.\u0275\u0275nextContext();e.\u0275\u0275advance(),e.\u0275\u0275property("label",o.maxSize)("for",o.maxSize)("invalid",!_.accountForm.controls[o.maxSize].valid&&_.accountForm.controls[o.maxSize].dirty)("invalidText",t),e.\u0275\u0275advance(2),e.\u0275\u0275property("id",o.maxSize)("name",o.maxSize)("formControlName",o.maxSize)}}function XE(n,i){if(1&n&&(e.\u0275\u0275elementStart(0,"cds-checkbox",53),e.\u0275\u0275text(1," Unlimited objects "),e.\u0275\u0275elementEnd()),2&n){const t=e.\u0275\u0275nextContext(2),o=t.quotaType;e.\u0275\u0275property("formControlName",t.formControl.unlimitedObjects)("id",o+"unlimitedObjects_checkbox")}}function BE(n,i){1&n&&(e.\u0275\u0275elementStart(0,"span"),e.\u0275\u0275i18n(1,24),e.\u0275\u0275elementEnd())}function VE(n,i){1&n&&(e.\u0275\u0275elementStart(0,"span"),e.\u0275\u0275i18n(1,25),e.\u0275\u0275elementEnd())}function ZE(n,i){if(1&n&&e.\u0275\u0275template(0,BE,2,0,"span",41)(1,VE,2,0,"span",41),2&n){const t=e.\u0275\u0275nextContext(3).formControl,o=e.\u0275\u0275nextContext();e.\u0275\u0275property("ngIf",o.accountForm.showError(t.maxObjects,o.formDir,"required")),e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf",o.accountForm.showError(t.maxObjects,o.formDir,"pattern"))}}function KE(n,i){if(1&n&&(e.\u0275\u0275elementStart(0,"div",59)(1,"cds-text-label",62),e.\u0275\u0275i18nStart(2,23),e.\u0275\u0275element(3,"input",63),e.\u0275\u0275i18nEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275template(4,ZE,2,2,"ng-template",null,9,e.\u0275\u0275templateRefExtractor),e.\u0275\u0275elementEnd()),2&n){const t=e.\u0275\u0275reference(5),o=e.\u0275\u0275nextContext(2).formControl,_=e.\u0275\u0275nextContext();e.\u0275\u0275advance(),e.\u0275\u0275property("label",o.maxObjects)("for",o.maxObjects)("invalid",!_.accountForm.controls[o.maxObjects].valid&&_.accountForm.controls[o.maxObjects].dirty)("invalidText",t),e.\u0275\u0275advance(2),e.\u0275\u0275property("id",o.maxObjects)("name",o.maxObjects)("formControlName",o.maxObjects)}}function qE(n,i){if(1&n&&(e.\u0275\u0275elementStart(0,"div",56),e.\u0275\u0275template(1,xE,2,2,"cds-checkbox",57)(2,HE,6,7,"div",58)(3,XE,2,2,"cds-checkbox",57)(4,KE,6,7,"div",58),e.\u0275\u0275elementEnd()),2&n){const t=e.\u0275\u0275nextContext().formControl,o=e.\u0275\u0275nextContext();e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf",o.accountForm.controls[t.enabled].value),e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf",o.accountForm.controls[t.enabled].value&&!o.accountForm.getValue(t.unlimitedSize)),e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf",o.accountForm.controls[t.enabled].value),e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf",o.accountForm.controls[t.enabled].value&&!o.accountForm.getValue(t.unlimitedObjects))}}function jE(n,i){if(1&n&&(e.\u0275\u0275elementStart(0,"fieldset",50)(1,"legend",51),e.\u0275\u0275text(2),e.\u0275\u0275pipe(3,"upperFirst"),e.\u0275\u0275elementEnd(),e.\u0275\u0275template(4,DE,2,0,"div",52)(5,WE,2,0,"ng-template",null,7,e.\u0275\u0275templateRefExtractor),e.\u0275\u0275elementStart(7,"cds-checkbox",53),e.\u0275\u0275text(8," Enabled "),e.\u0275\u0275elementEnd(),e.\u0275\u0275template(9,qE,5,4,"div",54),e.\u0275\u0275elementEnd()),2&n){const t=i.quotaType,o=i.formControl,_=e.\u0275\u0275reference(6),a=e.\u0275\u0275nextContext();e.\u0275\u0275advance(2),e.\u0275\u0275textInterpolate1("",e.\u0275\u0275pipeBind1(3,6,t)," Quota"),e.\u0275\u0275advance(2),e.\u0275\u0275property("ngIf","account"==t)("ngIfElse",_),e.\u0275\u0275advance(3),e.\u0275\u0275property("formControlName",o.enabled)("id",t+"_checkbox"),e.\u0275\u0275advance(2),e.\u0275\u0275property("ngIf",a.accountForm.controls[o.enabled].value)}}let So=(()=>{class n extends tt.g{constructor(t,o,_,a,r,s){super(),this.router=t,this.actionLabels=o,this.rgwUserAccountsService=_,this.notificationService=a,this.formBuilder=r,this.route=s,this.editing=!1,this.submitObservables=[],this.editing=this.router.url.includes("rgw/accounts/edit"),this.action=this.editing?this.actionLabels.EDIT:this.actionLabels.CREATE,this.resource="Account",this.createForm(),this.loadingReady()}ngOnInit(){this.editing&&this.route.paramMap.subscribe(t=>{const o=t.get("id");this.rgwUserAccountsService.get(o).subscribe(_=>{const a=A().clone(this.accountForm.value);let r=A().pick(_,A().keys(this.accountForm.value));["max_users","max_roles","max_groups","max_buckets","max_access_keys"].forEach(s=>{this.mapValuesForMode(r,s)}),["account","bucket"].forEach(s=>{let c={};c="bucket"==s?_.bucket_quota:_.quota,r[s+"_quota_enabled"]=c.enabled,c.max_size<0?(r[s+"_quota_max_size_unlimited"]=!0,r[s+"_quota_max_size"]=null):(r[s+"_quota_max_size_unlimited"]=!1,r[s+"_quota_max_size"]=`${c.max_size} B`),c.max_objects<0?(r[s+"_quota_max_objects_unlimited"]=!0,r[s+"_quota_max_objects"]=null):(r[s+"_quota_max_objects_unlimited"]=!1,r[s+"_quota_max_objects"]=c.max_objects)}),r=A().merge(a,r),this.accountForm.setValue(r),this.accountForm.get("tenant").disable()})})}mapValuesForMode(t,o){switch(t[o]){case-1:t[`${o}_mode`]="-1",t[o]="";break;case 0:t[`${o}_mode`]="0",t[o]="";break;default:t[`${o}_mode`]="1"}}createForm(){this.accountForm=this.formBuilder.group({id:[""],tenant:[""],name:["",l.Validators.required],email:["",M.xQ.email],max_users_mode:["1"],max_users:[1e3,[M.xQ.requiredIf({max_users_mode:"1"}),M.xQ.number(!1),l.Validators.min(1)]],max_roles_mode:["1"],max_roles:[1e3,[M.xQ.requiredIf({max_roles_mode:"1"}),M.xQ.number(!1),l.Validators.min(1)]],max_groups_mode:["1"],max_groups:[1e3,[M.xQ.requiredIf({max_groups_mode:"1"}),M.xQ.number(!1),l.Validators.min(1)]],max_access_keys_mode:["1"],max_access_keys:[4,[M.xQ.requiredIf({max_access_keys_mode:"1"}),M.xQ.number(!1),l.Validators.min(1)]],max_buckets_mode:["1"],max_buckets:[1e3,[M.xQ.requiredIf({max_buckets_mode:"1"}),M.xQ.number(!1),l.Validators.min(1)]],account_quota_enabled:[!1],account_quota_max_size_unlimited:[!0],account_quota_max_size:[null,[M.xQ.composeIf({account_quota_enabled:!0,account_quota_max_size_unlimited:!1},[l.Validators.required,this.quotaMaxSizeValidator])]],account_quota_max_objects_unlimited:[!0],account_quota_max_objects:[null,[M.xQ.requiredIf({account_quota_enabled:!0,account_quota_max_objects_unlimited:!1}),l.Validators.pattern(/^[0-9]+$/)]],bucket_quota_enabled:[!1],bucket_quota_max_size_unlimited:[!0],bucket_quota_max_size:[null,[M.xQ.composeIf({bucket_quota_enabled:!0,bucket_quota_max_size_unlimited:!1},[l.Validators.required,this.quotaMaxSizeValidator])]],bucket_quota_max_objects_unlimited:[!0],bucket_quota_max_objects:[null,[M.xQ.requiredIf({bucket_quota_enabled:!0,bucket_quota_max_objects_unlimited:!1}),l.Validators.pattern(/^[0-9]+$/)]]})}quotaMaxSizeValidator(t){return(0,M.xF)(t.value)?null:null===RegExp("^(\\d+(\\.\\d+)?)\\s*(B|K(B|iB)?|M(B|iB)?|G(B|iB)?|T(B|iB)?)?$","i").exec(t.value)||(new we.k).toBytes(t.value)<1024?{quotaMaxSize:!0}:null}submit(){let t="";if(this.accountForm.invalid)return;if(this.accountForm.pending)return void this.accountForm.setErrors({cdSubmitButton:!0});const o=this.accountForm.value,_={account_id:o.id,account_name:o.name,email:o.email,tenant:o.tenant,max_users:this.getValueFromFormControl("max_users"),max_buckets:this.getValueFromFormControl("max_buckets"),max_roles:this.getValueFromFormControl("max_roles"),max_group:this.getValueFromFormControl("max_groups"),max_access_keys:this.getValueFromFormControl("max_access_keys")};this.editing?(t="Account modified successfully",this.rgwUserAccountsService.modify(_).subscribe({next:a=>{this.accountForm.get("id").setValue(a.id),this.setQuotaConfig(),this.notificationService.show(w._.success,t)},error:()=>{this.accountForm.setErrors({cdSubmitButton:!0})}})):(delete _.account_id,t="Account created successfully",this.rgwUserAccountsService.create(_).subscribe({next:a=>{this.accountForm.get("id").setValue(a.id),this.setQuotaConfig(),this.notificationService.show(w._.success,t)},error:()=>{this.accountForm.setErrors({cdSubmitButton:!0})}}))}setQuotaConfig(){const t=this.accountForm.get("id").value;if(this._isQuotaConfDirty("account")){const o=this._getQuotaArgs("account");this.submitObservables.push(this.rgwUserAccountsService.setQuota(t,o))}if(this._isQuotaConfDirty("bucket")){const o=this._getQuotaArgs("bucket");this.submitObservables.push(this.rgwUserAccountsService.setQuota(t,o))}(0,U.concat)(...this.submitObservables).subscribe({error:()=>{this.accountForm.setErrors({cdSubmitButton:!0})},complete:()=>{this.goToListView()}}),0==this.submitObservables.length&&this.goToListView()}_getQuotaArgs(t){const o={quota_type:t,enabled:this.accountForm.getValue(`${t}_quota_enabled`),max_size:"-1",max_objects:"-1"};if(!this.accountForm.getValue(`${t}_quota_max_size_unlimited`)){const _=(new we.k).toBytes(this.accountForm.getValue(`${t}_quota_max_size`));o.max_size=_.toFixed(0)}return this.accountForm.getValue(`${t}_quota_max_objects_unlimited`)||(o.max_objects=`${this.accountForm.getValue(`${t}_quota_max_objects`)}`),o}_isQuotaConfDirty(t){return[`${t}_quota_enabled`,`${t}_quota_max_size_unlimited`,`${t}_quota_max_size`,`${t}_quota_max_objects_unlimited`,`${t}_quota_max_objects`].some(o=>this.accountForm.get(o).dirty)}onModeChange(t,o){"1"===t&&(this.accountForm.get(o).valid||this.accountForm.patchValue({[o]:1e3}))}goToListView(){this.router.navigate(["rgw/accounts"])}getValueFromFormControl(t){const o=this.accountForm.value;return 1==o[`${t}_mode`]?o[t]:o[`${t}_mode`]}getHelperTextForMode(t){const o=t.split("_").length>3?t.split("_")[1]+" "+t.split("_")[2]:t.split("_")[1];return-1==this.accountForm.getValue(t)?`${o[0].toUpperCase()+o.slice(1,-1)} creation is disabled.`:0==this.accountForm.getValue(t)?`Unlimited ${o.slice(0,-1)} creation allowed.`:""}static{this.\u0275fac=function(o){return new(o||n)(e.\u0275\u0275directiveInject(Q.Router),e.\u0275\u0275directiveInject(P.Ss),e.\u0275\u0275directiveInject(ht),e.\u0275\u0275directiveInject(ne.J),e.\u0275\u0275directiveInject(Ge.$),e.\u0275\u0275directiveInject(Q.ActivatedRoute))}}static{this.\u0275cmp=e.\u0275\u0275defineComponent({type:n,selectors:[["cd-rgw-user-accounts-form"]],features:[e.\u0275\u0275InheritDefinitionFeature],decls:8,vars:6,consts:()=>{let t,o,_,a,r,s,c,u,p,T,f,G,S,O,C,b;return t="" + "\ufffd0\ufffd" + " " + "\ufffd1\ufffd" + " ",o="Account Name " + "\ufffd#10\ufffd\ufffd/#10\ufffd" + "",_="Tenant " + "\ufffd#16\ufffd\ufffd/#16\ufffd" + "",a="Email " + "\ufffd#20\ufffd\ufffd/#20\ufffd" + "",r="This field is required.",s=" Please enter a valid email ",c="This field is required.",u="Enter number greater than 0",p="Enter a valid positive number",T="Max. size " + "\ufffd#3\ufffd\ufffd/#3\ufffd" + "",f="This field is required.",G="Enter a valid value.",S="Size must be a number or in a valid format. eg: 5 GiB",O="Max. objects " + "\ufffd#3\ufffd\ufffd/#3\ufffd" + "",C="This field is required.",b="Enter a valid positive number",[["selectModeTemplate",""],["accountMaxValueTemplate",""],["quotaTemplate",""],["formDir","ngForm"],["accountIdError",""],["emailError",""],["maxValError",""],["bucket",""],["quotaSizeError",""],["quotaObjectError",""],t,o,_,a,r,s,c,u,p,T,f,G,S,O,C,b,["cdsCol","",3,"columnNumbers"],[4,"cdFormLoading"],[3,"formGroup"],["name","accountForm","novalidate","",3,"formGroup"],[1,"form-header"],[1,"form-item"],["label","Account Name","for","acc_name","cdRequiredField","Account Name",3,"invalid","invalidText"],["cdsText","","type","text","placeholder","Enter account name","id","acc_name","name","acc_name","formControlName","name"],["label","tenant","for","tenant"],["cdsText","","type","text","placeholder","Enter tenant","id","tenant","name","tenant","formControlName","tenant"],["label","email","for","email",3,"invalid","invalidText"],["cdsText","","type","text","placeholder","Enter email","id","email","name","email","formControlName","email"],["cdsRow","",1,"form-item","form-item-append"],["cdsCol",""],[4,"ngTemplateOutlet","ngTemplateOutletContext"],[4,"ngIf"],["wrappingClass","text-right",3,"submitActionEvent","form","submitText"],["class","invalid-feedback",4,"ngIf"],[1,"invalid-feedback"],[3,"change","formControlName","name","id","label","helperText"],["value","0"],["value","-1"],["value","1"],[3,"id","name","formControlName","label","min","cdRequiredField","invalid","invalidText"],[1,"cds--fieldset"],[1,"cds--label"],["class","quota-heading",4,"ngIf","ngIfElse"],[3,"formControlName","id"],["class","quota-sub-block",4,"ngIf"],[1,"quota-heading"],[1,"quota-sub-block"],[3,"formControlName","id",4,"ngIf"],["class","input-wrapper",4,"ngIf"],[1,"input-wrapper"],["cdRequiredField","Max. size",3,"label","for","invalid","invalidText"],["cdsText","","type","text","placeholder","Enter size","cdDimlessBinary","",3,"id","name","formControlName"],["cdRequiredField","Max. objects",3,"label","for","invalid","invalidText"],["cdsText","","type","number","placeholder","Enter number of objects",3,"id","name","formControlName"]]},template:function(o,_){1&o&&(e.\u0275\u0275elementStart(0,"div",26),e.\u0275\u0275template(1,AE,55,47,"ng-container",27),e.\u0275\u0275elementEnd(),e.\u0275\u0275template(2,hE,8,8,"ng-template",28,0,e.\u0275\u0275templateRefExtractor)(4,$E,5,16,"ng-template",28,1,e.\u0275\u0275templateRefExtractor)(6,jE,10,8,"ng-template",28,2,e.\u0275\u0275templateRefExtractor)),2&o&&(e.\u0275\u0275property("columnNumbers",e.\u0275\u0275pureFunction0(5,Zg)),e.\u0275\u0275advance(),e.\u0275\u0275property("cdFormLoading",_.loading),e.\u0275\u0275advance(),e.\u0275\u0275property("formGroup",_.accountForm),e.\u0275\u0275advance(2),e.\u0275\u0275property("formGroup",_.accountForm),e.\u0275\u0275advance(2),e.\u0275\u0275property("formGroup",_.accountForm))},dependencies:[E.NgIf,E.NgTemplateOutlet,_e.e,rn.Y,ft.G,Y.S,oe.E,Qe.P,l.\u0275NgNoValidate,l.NgSelectOption,l.\u0275NgSelectMultipleOption,l.DefaultValueAccessor,l.NumberValueAccessor,l.NgControlStatus,l.NgControlStatusGroup,l.FormGroupDirective,l.FormControlName,d.ColumnDirective,d.RowDirective,d.TextInputLabelComponent,d.TextInput,d.Checkbox,d.NumberComponent,d.Select,d.Option,E.TitleCasePipe,Ie.r],styles:[".cds--form__helper-text{white-space:pre-line}.quota-heading[_ngcontent-%COMP%]{margin-bottom:.5rem}.quota-sub-block[_ngcontent-%COMP%]{margin:.5rem 0 0 1.5rem}.quota-sub-block[_ngcontent-%COMP%]   .input-wrapper[_ngcontent-%COMP%]{margin:.5rem 0 0 .125rem}.quota-sub-block[_ngcontent-%COMP%]   .input-wrapper[_ngcontent-%COMP%]:first-of-type{margin-bottom:1.5rem}"]})}}return n})();var YE=g(2087);const QE=()=>({md:4}),Fo=()=>({md:12});function JE(n,i){if(1&n&&(e.\u0275\u0275elementStart(0,"option",66),e.\u0275\u0275i18n(1,18),e.\u0275\u0275elementEnd()),2&n){const t=i.$implicit;e.\u0275\u0275property("value",t.value),e.\u0275\u0275advance(),e.\u0275\u0275i18nExp(t.label),e.\u0275\u0275i18nApply(1)}}function eR(n,i){1&n&&(e.\u0275\u0275elementStart(0,"span",72),e.\u0275\u0275i18n(1,19),e.\u0275\u0275elementEnd())}function tR(n,i){if(1&n&&e.\u0275\u0275template(0,eR,2,0,"span",71),2&n){e.\u0275\u0275nextContext();const t=e.\u0275\u0275reference(2),o=e.\u0275\u0275nextContext();e.\u0275\u0275property("ngIf",o.storageClassForm.showError("storageClassType",t,"required"))}}function nR(n,i){if(1&n&&(e.\u0275\u0275elementStart(0,"option",73),e.\u0275\u0275i18n(1,20),e.\u0275\u0275elementEnd()),2&n){const t=i.$implicit,o=e.\u0275\u0275nextContext(2);e.\u0275\u0275property("value",t.name)("selected",t.name===o.storageClassForm.getValue("zonegroup")),e.\u0275\u0275advance(),e.\u0275\u0275i18nExp(t.name),e.\u0275\u0275i18nApply(1)}}function oR(n,i){1&n&&(e.\u0275\u0275elementStart(0,"span",72),e.\u0275\u0275i18n(1,21),e.\u0275\u0275elementEnd())}function _R(n,i){if(1&n&&e.\u0275\u0275template(0,oR,2,0,"span",71),2&n){e.\u0275\u0275nextContext();const t=e.\u0275\u0275reference(2),o=e.\u0275\u0275nextContext();e.\u0275\u0275property("ngIf",o.storageClassForm.showError("zonegroup",t,"required"))}}function iR(n,i){if(1&n&&(e.\u0275\u0275elementStart(0,"option",73),e.\u0275\u0275i18n(1,22),e.\u0275\u0275elementEnd()),2&n){const t=i.$implicit,o=e.\u0275\u0275nextContext(2);e.\u0275\u0275property("value",t)("selected",t===o.storageClassForm.getValue("placement_target")),e.\u0275\u0275advance(),e.\u0275\u0275i18nExp(t),e.\u0275\u0275i18nApply(1)}}function aR(n,i){1&n&&(e.\u0275\u0275elementStart(0,"span",72),e.\u0275\u0275i18n(1,23),e.\u0275\u0275elementEnd())}function rR(n,i){if(1&n&&e.\u0275\u0275template(0,aR,2,0,"span",71),2&n){e.\u0275\u0275nextContext();const t=e.\u0275\u0275reference(2),o=e.\u0275\u0275nextContext();e.\u0275\u0275property("ngIf",o.storageClassForm.showError("placement_target",t,"required"))}}function lR(n,i){1&n&&(e.\u0275\u0275elementStart(0,"span",72),e.\u0275\u0275i18n(1,24),e.\u0275\u0275elementEnd())}function sR(n,i){if(1&n&&e.\u0275\u0275template(0,lR,2,0,"span",71),2&n){e.\u0275\u0275nextContext();const t=e.\u0275\u0275reference(2),o=e.\u0275\u0275nextContext();e.\u0275\u0275property("ngIf",o.storageClassForm.showError("storage_class",t,"required"))}}function cR(n,i){1&n&&(e.\u0275\u0275elementStart(0,"span",72),e.\u0275\u0275i18n(1,34),e.\u0275\u0275elementEnd())}function dR(n,i){if(1&n&&e.\u0275\u0275template(0,cR,2,0,"span",71),2&n){e.\u0275\u0275nextContext(2);const t=e.\u0275\u0275reference(2),o=e.\u0275\u0275nextContext();e.\u0275\u0275property("ngIf",o.storageClassForm.showError("region",t,"required"))}}function uR(n,i){1&n&&(e.\u0275\u0275elementStart(0,"span",72),e.\u0275\u0275i18n(1,35),e.\u0275\u0275elementEnd())}function pR(n,i){1&n&&(e.\u0275\u0275elementStart(0,"span",72),e.\u0275\u0275i18n(1,36),e.\u0275\u0275elementEnd())}function mR(n,i){if(1&n&&e.\u0275\u0275template(0,uR,2,0,"span",71)(1,pR,2,0,"span",71),2&n){e.\u0275\u0275nextContext(2);const t=e.\u0275\u0275reference(2),o=e.\u0275\u0275nextContext();e.\u0275\u0275property("ngIf",o.storageClassForm.showError("target_endpoint",t,"required")),e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf",o.storageClassForm.showError("target_endpoint",t,"invalidURL"))}}function TR(n,i){1&n&&(e.\u0275\u0275elementStart(0,"span",72),e.\u0275\u0275i18n(1,37),e.\u0275\u0275elementEnd())}function gR(n,i){if(1&n&&e.\u0275\u0275template(0,TR,2,0,"span",71),2&n){e.\u0275\u0275nextContext(2);const t=e.\u0275\u0275reference(2),o=e.\u0275\u0275nextContext();e.\u0275\u0275property("ngIf",o.storageClassForm.showError("access_key",t,"required"))}}function ER(n,i){1&n&&(e.\u0275\u0275elementStart(0,"span",72),e.\u0275\u0275i18n(1,38),e.\u0275\u0275elementEnd())}function RR(n,i){if(1&n&&e.\u0275\u0275template(0,ER,2,0,"span",71),2&n){e.\u0275\u0275nextContext(2);const t=e.\u0275\u0275reference(2),o=e.\u0275\u0275nextContext();e.\u0275\u0275property("ngIf",o.storageClassForm.showError("secret_key",t,"required"))}}function CR(n,i){1&n&&(e.\u0275\u0275elementStart(0,"span",72),e.\u0275\u0275i18n(1,39),e.\u0275\u0275elementEnd())}function fR(n,i){if(1&n&&e.\u0275\u0275template(0,CR,2,0,"span",71),2&n){e.\u0275\u0275nextContext(2);const t=e.\u0275\u0275reference(2),o=e.\u0275\u0275nextContext();e.\u0275\u0275property("ngIf",o.storageClassForm.showError("target_path",t,"required"))}}function SR(n,i){1&n&&(e.\u0275\u0275elementStart(0,"span",72),e.\u0275\u0275i18n(1,40),e.\u0275\u0275elementEnd())}function FR(n,i){1&n&&(e.\u0275\u0275elementStart(0,"span",72),e.\u0275\u0275i18n(1,41),e.\u0275\u0275elementEnd())}function MR(n,i){if(1&n&&e.\u0275\u0275template(0,SR,2,0,"span",71)(1,FR,2,0,"span",71),2&n){e.\u0275\u0275nextContext(2);const t=e.\u0275\u0275reference(2),o=e.\u0275\u0275nextContext();e.\u0275\u0275property("ngIf",o.storageClassForm.showError("read_through_restore_days",t,"pattern")),e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf",o.storageClassForm.showError("read_through_restore_days",t,"lockDays"))}}function PR(n,i){if(1&n){const t=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"div")(1,"div",61)(2,"div",62)(3,"cds-text-label",74),e.\u0275\u0275i18nStart(4,25),e.\u0275\u0275element(5,"input",75),e.\u0275\u0275i18nEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275template(6,dR,1,1,"ng-template",null,5,e.\u0275\u0275templateRefExtractor),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(8,"div",62)(9,"cds-text-label",76),e.\u0275\u0275i18nStart(10,26),e.\u0275\u0275element(11,"input",77),e.\u0275\u0275i18nEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275template(12,mR,2,2,"ng-template",null,6,e.\u0275\u0275templateRefExtractor),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(14,"div",57)(15,"div",78)(16,"cds-password-label",79),e.\u0275\u0275i18nStart(17,27),e.\u0275\u0275element(18,"input",80),e.\u0275\u0275i18nEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275element(19,"cd-copy-2-clipboard-button",81),e.\u0275\u0275template(20,gR,1,1,"ng-template",null,7,e.\u0275\u0275templateRefExtractor),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(22,"div",57)(23,"div",78)(24,"cds-password-label",82),e.\u0275\u0275i18nStart(25,28),e.\u0275\u0275element(26,"input",83),e.\u0275\u0275i18nEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275element(27,"cd-copy-2-clipboard-button",81),e.\u0275\u0275template(28,RR,1,1,"ng-template",null,8,e.\u0275\u0275templateRefExtractor),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(30,"div",57)(31,"cds-text-label",84),e.\u0275\u0275i18nStart(32,29),e.\u0275\u0275element(33,"input",85),e.\u0275\u0275i18nEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275template(34,fR,1,1,"ng-template",null,9,e.\u0275\u0275templateRefExtractor),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(36,"div",57)(37,"cds-checkbox",86),e.\u0275\u0275listener("change",function(_){e.\u0275\u0275restoreView(t);const a=e.\u0275\u0275nextContext(2);return e.\u0275\u0275resetView(a.onAllowReadThroughChange(_))}),e.\u0275\u0275i18nStart(38,30),e.\u0275\u0275element(39,"cd-help-text"),e.\u0275\u0275i18nEnd(),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(40,"div",57)(41,"cds-checkbox",87),e.\u0275\u0275i18nStart(42,31),e.\u0275\u0275element(43,"cd-help-text"),e.\u0275\u0275i18nEnd(),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(44,"div",61)(45,"div",62),e.\u0275\u0275element(46,"cds-number",88),e.\u0275\u0275template(47,MR,2,2,"ng-template",null,10,e.\u0275\u0275templateRefExtractor),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(49,"div",62)(50,"cds-select",89)(51,"option",59),e.\u0275\u0275i18n(52,32),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(53,"option",90),e.\u0275\u0275i18n(54,33),e.\u0275\u0275elementEnd()()()()()}if(2&n){const t=e.\u0275\u0275reference(7),o=e.\u0275\u0275reference(13),_=e.\u0275\u0275reference(21),a=e.\u0275\u0275reference(29),r=e.\u0275\u0275reference(35),s=e.\u0275\u0275reference(48);e.\u0275\u0275nextContext();const c=e.\u0275\u0275reference(2),u=e.\u0275\u0275nextContext();e.\u0275\u0275advance(3),e.\u0275\u0275property("invalid",u.storageClassForm.showError("region",c,"required"))("invalidText",t)("helperText",u.helpTextLabels.targetRegionText),e.\u0275\u0275advance(2),e.\u0275\u0275property("invalid",u.storageClassForm.showError("region",c,"required")),e.\u0275\u0275advance(4),e.\u0275\u0275property("invalid",u.storageClassForm.showError("target_endpoint",c,"invalidURL")||u.storageClassForm.showError("target_endpoint",c,"required"))("invalidText",o)("helperText",u.helpTextLabels.targetEndpointText),e.\u0275\u0275advance(2),e.\u0275\u0275property("invalid",u.storageClassForm.showError("target_endpoint",c,"invalidURL")||u.storageClassForm.showError("target_endpoint",c,"required"))("invalidText",o),e.\u0275\u0275advance(4),e.\u0275\u0275property("columnNumbers",e.\u0275\u0275pureFunction0(30,Fo)),e.\u0275\u0275advance(),e.\u0275\u0275property("invalid",u.storageClassForm.showError("access_key",c,"required"))("invalidText",_)("helperText",u.helpTextLabels.targetAccessKeyText),e.\u0275\u0275advance(2),e.\u0275\u0275property("invalid",u.storageClassForm.showError("access_key",c,"required")),e.\u0275\u0275advance(5),e.\u0275\u0275property("columnNumbers",e.\u0275\u0275pureFunction0(31,Fo)),e.\u0275\u0275advance(),e.\u0275\u0275property("helperText",u.helpTextLabels.targetSecretKeyText)("invalid",u.storageClassForm.showError("secret_key",c,"required"))("invalidText",a),e.\u0275\u0275advance(2),e.\u0275\u0275property("invalid",u.storageClassForm.showError("secret_key",c,"required")),e.\u0275\u0275advance(5),e.\u0275\u0275property("invalid",u.storageClassForm.showError("target_path",c,"required"))("invalidText",r)("helperText",u.helpTextLabels.targetPathText),e.\u0275\u0275advance(2),e.\u0275\u0275property("invalid",u.storageClassForm.showError("target_path",c,"required")),e.\u0275\u0275advance(6),e.\u0275\u0275i18nExp(null==u.helpTextLabels?null:u.helpTextLabels.allowReadThroughText),e.\u0275\u0275i18nApply(38),e.\u0275\u0275advance(4),e.\u0275\u0275i18nExp(null==u.helpTextLabels?null:u.helpTextLabels.retainHeadObjectText),e.\u0275\u0275i18nApply(42),e.\u0275\u0275advance(3),e.\u0275\u0275property("helperText",u.helpTextLabels.readthroughrestoreDaysText)("invalid",u.storageClassForm.controls.read_through_restore_days.invalid&&u.storageClassForm.controls.read_through_restore_days.dirty)("invalidText",s),e.\u0275\u0275advance(4),e.\u0275\u0275property("helperText",u.helpTextLabels.restoreStorageClassText),e.\u0275\u0275advance(3),e.\u0275\u0275property("ngValue",u.standard)}}function IR(n,i){1&n&&(e.\u0275\u0275elementStart(0,"span",72),e.\u0275\u0275i18n(1,46),e.\u0275\u0275elementEnd())}function OR(n,i){if(1&n&&e.\u0275\u0275template(0,IR,2,0,"span",71),2&n){e.\u0275\u0275nextContext(2);const t=e.\u0275\u0275reference(2),o=e.\u0275\u0275nextContext();e.\u0275\u0275property("ngIf",o.storageClassForm.showError("glacier_restore_tier_type",t,"required"))}}function GR(n,i){1&n&&(e.\u0275\u0275elementStart(0,"span",72),e.\u0275\u0275i18n(1,47),e.\u0275\u0275elementEnd())}function NR(n,i){1&n&&(e.\u0275\u0275elementStart(0,"span",72),e.\u0275\u0275i18n(1,48),e.\u0275\u0275elementEnd())}function AR(n,i){if(1&n&&e.\u0275\u0275template(0,GR,2,0,"span",71)(1,NR,2,0,"span",71),2&n){e.\u0275\u0275nextContext(2);const t=e.\u0275\u0275reference(2),o=e.\u0275\u0275nextContext();e.\u0275\u0275property("ngIf",o.storageClassForm.showError("glacier_restore_days",t,"pattern")),e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf",o.storageClassForm.showError("glacier_restore_days",t,"lockDays"))}}function hR(n,i){if(1&n&&(e.\u0275\u0275elementStart(0,"div")(1,"legend",91),e.\u0275\u0275i18n(2,42),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(3,"div",61)(4,"div",62)(5,"cds-select",92)(6,"option",59),e.\u0275\u0275i18n(7,43),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(8,"option",90),e.\u0275\u0275i18n(9,44),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(10,"option",90),e.\u0275\u0275i18n(11,45),e.\u0275\u0275elementEnd()(),e.\u0275\u0275template(12,OR,1,1,"ng-template",null,11,e.\u0275\u0275templateRefExtractor),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(14,"div",62),e.\u0275\u0275element(15,"cds-number",93),e.\u0275\u0275template(16,AR,2,2,"ng-template",null,12,e.\u0275\u0275templateRefExtractor),e.\u0275\u0275elementEnd()()()),2&n){const t=e.\u0275\u0275reference(13),o=e.\u0275\u0275reference(17),_=e.\u0275\u0275nextContext(2);e.\u0275\u0275advance(5),e.\u0275\u0275property("invalid",_.storageClassForm.controls.glacier_restore_tier_type.invalid&&_.storageClassForm.controls.glacier_restore_tier_type.dirty)("invalidText",t)("helperText",_.helpTextLabels.tiertypeText),e.\u0275\u0275advance(3),e.\u0275\u0275property("ngValue",_.standard),e.\u0275\u0275advance(2),e.\u0275\u0275property("ngValue",_.expedited),e.\u0275\u0275advance(5),e.\u0275\u0275property("id","glacier_restore_days")("formControlName","glacier_restore_days")("label","Glacier Restore Days")("helperText",_.helpTextLabels.restoreDaysText)("min",1)("invalid",_.storageClassForm.controls.glacier_restore_days.invalid&&_.storageClassForm.controls.glacier_restore_days.dirty)("invalidText",o)}}function bR(n,i){1&n&&(e.\u0275\u0275elementStart(0,"h5",100),e.\u0275\u0275text(1,"Advanced"),e.\u0275\u0275elementEnd())}function vR(n,i){if(1&n){const t=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"fieldset")(1,"div"),e.\u0275\u0275template(2,bR,2,0,"ng-template",null,13,e.\u0275\u0275templateRefExtractor),e.\u0275\u0275elementStart(4,"fieldset")(5,"cds-accordion",94)(6,"cds-accordion-item",95),e.\u0275\u0275listener("selected",function(){e.\u0275\u0275restoreView(t);const _=e.\u0275\u0275nextContext(2);return e.\u0275\u0275resetView(_.showAdvanced=!_.showAdvanced)}),e.\u0275\u0275elementStart(7,"div",61)(8,"div",62)(9,"cds-text-label",96),e.\u0275\u0275i18nStart(10,49),e.\u0275\u0275element(11,"input",97),e.\u0275\u0275i18nEnd(),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(12,"div",62)(13,"cds-text-label",98),e.\u0275\u0275i18nStart(14,50),e.\u0275\u0275element(15,"input",99),e.\u0275\u0275i18nEnd(),e.\u0275\u0275elementEnd()()()()()()()()}if(2&n){const t=e.\u0275\u0275reference(3),o=e.\u0275\u0275nextContext(2);e.\u0275\u0275advance(6),e.\u0275\u0275property("title",t),e.\u0275\u0275advance(3),e.\u0275\u0275property("helperText",o.helpTextLabels.multipartSyncThresholdText),e.\u0275\u0275advance(4),e.\u0275\u0275property("helperText",o.helpTextLabels.multipartMinPartText)}}function LR(n,i){1&n&&(e.\u0275\u0275elementStart(0,"cd-alert-panel",69)(1,"span"),e.\u0275\u0275i18n(2,51),e.\u0275\u0275elementEnd()())}function yR(n,i){if(1&n){const t=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementContainerStart(0),e.\u0275\u0275elementStart(1,"form",54,0)(3,"div",55),e.\u0275\u0275i18nStart(4,14),e.\u0275\u0275pipe(5,"titlecase"),e.\u0275\u0275pipe(6,"upperFirst"),e.\u0275\u0275element(7,"cd-help-text",56),e.\u0275\u0275i18nEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(8,"div",57)(9,"cds-select",58)(10,"option",59),e.\u0275\u0275i18n(11,15),e.\u0275\u0275elementEnd(),e.\u0275\u0275template(12,JE,2,2,"option",60),e.\u0275\u0275elementEnd(),e.\u0275\u0275template(13,tR,1,1,"ng-template",null,1,e.\u0275\u0275templateRefExtractor),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(15,"div",61)(16,"div",62)(17,"cds-select",63),e.\u0275\u0275listener("change",function(){e.\u0275\u0275restoreView(t);const _=e.\u0275\u0275nextContext();return e.\u0275\u0275resetView(_.onZonegroupChange())}),e.\u0275\u0275template(18,nR,2,3,"option",64),e.\u0275\u0275elementEnd(),e.\u0275\u0275template(19,_R,1,1,"ng-template",null,2,e.\u0275\u0275templateRefExtractor),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(21,"div",62)(22,"cds-select",65)(23,"option",66),e.\u0275\u0275i18n(24,16),e.\u0275\u0275elementEnd(),e.\u0275\u0275template(25,iR,2,3,"option",64),e.\u0275\u0275elementEnd(),e.\u0275\u0275template(26,rR,1,1,"ng-template",null,3,e.\u0275\u0275templateRefExtractor),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(28,"div",57)(29,"cds-text-label",67),e.\u0275\u0275i18nStart(30,17),e.\u0275\u0275element(31,"input",68),e.\u0275\u0275i18nEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275template(32,sR,1,1,"ng-template",null,4,e.\u0275\u0275templateRefExtractor),e.\u0275\u0275elementEnd(),e.\u0275\u0275template(34,PR,55,32,"div")(35,hR,18,12,"div")(36,vR,16,3,"fieldset")(37,LR,3,0,"cd-alert-panel",69),e.\u0275\u0275elementStart(38,"cd-form-button-panel",70),e.\u0275\u0275pipe(39,"titlecase"),e.\u0275\u0275pipe(40,"upperFirst"),e.\u0275\u0275listener("submitActionEvent",function(){e.\u0275\u0275restoreView(t);const _=e.\u0275\u0275nextContext();return e.\u0275\u0275resetView(_.submitAction())}),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementContainerEnd()}if(2&n){const t=e.\u0275\u0275reference(2),o=e.\u0275\u0275reference(14),_=e.\u0275\u0275reference(20),a=e.\u0275\u0275reference(27),r=e.\u0275\u0275reference(33),s=e.\u0275\u0275nextContext();e.\u0275\u0275advance(),e.\u0275\u0275property("formGroup",s.storageClassForm),e.\u0275\u0275advance(6),e.\u0275\u0275property("formAllFieldsRequired",!0),e.\u0275\u0275i18nExp(e.\u0275\u0275pipeBind1(5,24,s.action))(e.\u0275\u0275pipeBind1(6,26,s.resource)),e.\u0275\u0275i18nApply(4),e.\u0275\u0275advance(2),e.\u0275\u0275property("helperText",s.helpTextLabels.storageClassText)("invalid",s.storageClassForm.showError("storageClassType",t,"required"))("invalidText",o),e.\u0275\u0275advance(3),e.\u0275\u0275property("ngForOf",s.storageClassOptions),e.\u0275\u0275advance(5),e.\u0275\u0275property("invalid",s.storageClassForm.showError("zonegroup",t,"required"))("invalidText",_),e.\u0275\u0275advance(),e.\u0275\u0275property("ngForOf",s.zonegroupNames),e.\u0275\u0275advance(4),e.\u0275\u0275property("invalid",s.storageClassForm.showError("placement_target",t,"required"))("invalidText",a),e.\u0275\u0275advance(3),e.\u0275\u0275property("ngForOf",s.placementTargets),e.\u0275\u0275advance(4),e.\u0275\u0275property("disabled",s.editing)("invalid",s.storageClassForm.controls.storage_class.invalid&&s.storageClassForm.controls.storage_class.dirty)("invalidText",r),e.\u0275\u0275advance(2),e.\u0275\u0275property("invalid",s.storageClassForm.showError("storage_class",t,"required")),e.\u0275\u0275advance(3),e.\u0275\u0275conditional(s.isTierMatch(s.TIER_TYPE.CLOUD_TIER,s.TIER_TYPE.GLACIER)?34:-1),e.\u0275\u0275advance(),e.\u0275\u0275conditional(s.isTierMatch(s.TIER_TYPE.GLACIER)?35:-1),e.\u0275\u0275advance(),e.\u0275\u0275conditional(s.isTierMatch(s.TIER_TYPE.CLOUD_TIER,s.TIER_TYPE.GLACIER)?36:-1),e.\u0275\u0275advance(),e.\u0275\u0275conditional(s.isTierMatch(s.TIER_TYPE.CLOUD_TIER,s.TIER_TYPE.GLACIER)?37:-1),e.\u0275\u0275advance(),e.\u0275\u0275property("form",s.storageClassForm)("submitText",e.\u0275\u0275pipeBind1(39,28,s.action)+" "+e.\u0275\u0275pipeBind1(40,30,s.resource))}}let Mo=(()=>{class n extends tt.g{constructor(t,o,_,a,r,s,c,u){super(),this.actionLabels=t,this.formBuilder=o,this.notificationService=_,this.rgwStorageService=a,this.rgwZoneGroupService=r,this.router=s,this.route=c,this.formatter=u,this.showAdvanced=!1,this.placementTargets=[],this.allowReadThrough=!1,this.TIER_TYPE=q,this.TIER_TYPE_DISPLAY=nt,this.resource="Tiering Storage Class",this.editing=this.router.url.startsWith(`/rgw/tiering/${P.Qp.EDIT}`),this.action=this.editing?this.actionLabels.EDIT:this.actionLabels.CREATE}ngOnInit(){this.helpTextLabels={targetPathText:bn,targetEndpointText:"The URL endpoint of the remote cloud service for accessing storage.",targetRegionText:"The region of the remote cloud service where storage is located.",targetAccessKeyText:vn,targetSecretKeyText:Ln,retainHeadObjectText:yn,allowReadThroughText:Nn,storageClassText:$n,multipartMinPartText:An,multipartSyncThresholdText:hn,tiertypeText:xn,glacierRestoreDayText:Dn,glacierRestoreTiertypeText:Wn,restoreDaysText:wn,readthroughrestoreDaysText:Un,restoreStorageClassText:kn},this.storageClassOptions=[{value:q.LOCAL,label:nt.LOCAL},{value:q.CLOUD_TIER,label:nt.CLOUD_TIER},{value:q.GLACIER,label:nt.GLACIER}],this.createForm(),this.storageClassTypeText(),this.updateTierTypeHelpText(),this.loadingReady(),this.loadZoneGroup(),this.editing&&(this.route.params.subscribe(t=>{this.storageClassInfo=t}),this.rgwStorageService.getPlacement_target(this.storageClassInfo.placement_target).subscribe(t=>{this.tierTargetInfo=this.getTierTargetByStorageClass(t,this.storageClassInfo.storage_class);let o=this.tierTargetInfo?.val?.s3;if(this.storageClassForm.get("zonegroup").disable(),this.storageClassForm.get("placement_target").disable(),this.storageClassForm.get("storage_class").disable(),(this.tierTargetInfo?.val?.tier_type===q.CLOUD_TIER||this.tierTargetInfo?.val?.tier_type===q.GLACIER)&&this.storageClassForm.get("storageClassType").disable(),this.storageClassForm.patchValue({zonegroup:this.storageClassInfo?.zonegroup_name,region:o?.region,placement_target:this.storageClassInfo?.placement_target,storageClassType:this.tierTargetInfo?.val?.tier_type??q.LOCAL,target_endpoint:o?.endpoint,storage_class:this.storageClassInfo?.storage_class,access_key:o?.access_key,secret_key:o?.secret,target_path:o?.target_path,retain_head_object:this.tierTargetInfo?.val?.retain_head_object||!1,multipart_sync_threshold:o?.multipart_sync_threshold||"",multipart_min_part_size:o?.multipart_min_part_size||"",allow_read_through:this.tierTargetInfo?.val?.allow_read_through||!1,restore_storage_class:this.tierTargetInfo?.val?.restore_storage_class,read_through_restore_days:this.tierTargetInfo?.val?.read_through_restore_days}),this.tierTargetInfo?.val?.tier_type==q.GLACIER){let _=this.tierTargetInfo?.val["s3-glacier"];this.storageClassForm.patchValue({glacier_restore_tier_type:_.glacier_restore_tier_type,glacier_restore_days:_.glacier_restore_days})}})),this.storageClassForm.get("storageClassType").valueChanges.subscribe(t=>{this.updateValidatorsBasedOnStorageClass(t)}),this.storageClassForm.get("allow_read_through").valueChanges.subscribe(t=>{this.onAllowReadThroughChange(t)})}updateValidatorsBasedOnStorageClass(t){if(Gn.forEach(o=>{const _=this.storageClassForm.get(o);t===q.CLOUD_TIER&&Bi.includes(o)||t===q.GLACIER&&Gn.includes(o)?_.setValidators([l.Validators.required]):_.clearValidators(),_.updateValueAndValidity()}),this.editing){const o={allow_read_through:!1,read_through_restore_days:1,restore_storage_class:"Standard",multipart_min_part_size:33554432,multipart_sync_threshold:33554432};Object.keys(o).forEach(_=>{this.storageClassForm.get(_).setValue(o[_])})}}storageClassTypeText(){this.storageClassForm?.get("storageClassType")?.valueChanges.subscribe(t=>{t===q.LOCAL?this.helpTextLabels.storageClassText=$n:t===q.CLOUD_TIER?this.helpTextLabels.storageClassText=ji:t===q.GLACIER&&(this.helpTextLabels.storageClassText=Yi)})}updateTierTypeHelpText(){this.storageClassForm?.get("glacier_restore_tier_type")?.valueChanges.subscribe(t=>{this.helpTextLabels.tiertypeText="Standard"===t?xn:Qi})}createForm(){const t=this,o=M.xQ.custom("lockDays",()=>{if(!t.storageClassForm||!t.storageClassForm.getRawValue())return!1;const _=Number(t.storageClassForm.getValue("read_through_restore_days"));return!Number.isInteger(_)||0===_});this.storageClassForm=this.formBuilder.group({storage_class:new l.FormControl("",{validators:[l.Validators.required]}),zonegroup:new l.FormControl(this.selectedZoneGroup,{validators:[l.Validators.required]}),region:new l.FormControl("",[M.xQ.composeIf({storageClassType:q.CLOUD_TIER},[l.Validators.required])]),placement_target:new l.FormControl("",{validators:[l.Validators.required]}),target_endpoint:new l.FormControl(null,{validators:[M.xQ.url,l.Validators.required]}),access_key:new l.FormControl(null,[M.xQ.composeIf({storageClassType:q.CLOUD_TIER},[l.Validators.required])]),secret_key:new l.FormControl(null,[M.xQ.composeIf({storageClassType:q.CLOUD_TIER},[l.Validators.required])]),target_path:new l.FormControl("",[M.xQ.composeIf({storageClassType:q.CLOUD_TIER},[l.Validators.required])]),retain_head_object:new l.FormControl(!0),glacier_restore_tier_type:new l.FormControl("Standard",[M.xQ.composeIf({storageClassType:q.GLACIER},[l.Validators.required])]),glacier_restore_days:new l.FormControl(1,[M.xQ.composeIf({storageClassType:q.GLACIER||q.CLOUD_TIER},[M.xQ.number(!1),o])]),restore_storage_class:new l.FormControl("Standard"),read_through_restore_days:new l.FormControl({value:1,disabled:!0},M.xQ.composeIf(_=>{const a=_.get("storageClassType")?.value;return a===q.GLACIER||a===q.CLOUD_TIER},[M.xQ.number(!1),o])),multipart_sync_threshold:new l.FormControl(33554432),multipart_min_part_size:new l.FormControl(33554432),allow_read_through:new l.FormControl(!1),storageClassType:new l.FormControl(q.LOCAL,l.Validators.required)})}loadZoneGroup(){return new Promise((t,o)=>{this.rgwZoneGroupService.getAllZonegroupsInfo().subscribe(_=>{this.zoneGroupDetails=_,this.zonegroupNames=[],this.placementTargets=[],_.zonegroups&&_.zonegroups.length>0&&(this.zonegroupNames=_.zonegroups.map(a=>({id:a.id,name:a.name}))),this.defaultZonegroup=this.zonegroupNames.find(a=>a.id===_.default_zonegroup),this.storageClassForm.get("zonegroup").setValue(this.defaultZonegroup.name),this.onZonegroupChange(),t()},_=>o(_))})}onZonegroupChange(){const t=this.storageClassForm.get("zonegroup").value,o=this.zoneGroupDetails.zonegroups.find(a=>a.name===t),_=o.placement_targets.find(a=>"default-placement"===a.name);if(o){const a=o.placement_targets.map(r=>r.name);this.placementTargets=a}_&&!this.editing?this.storageClassForm.get("placement_target").setValue(_.name):this.storageClassForm.get("placement_target").setValue(this.storageClassInfo.placement_target)}submitAction(){const t=this,o=this.buildRequest(),_=this.storageClassForm.get("storage_class").value;this.editing?this.rgwStorageService.editStorageClass(o).subscribe(()=>{this.notificationService.show(w._.success,"Updated Storage Class '" + _ + "'"),this.goToListView()},()=>{t.storageClassForm.setErrors({cdSubmitButton:!0})}):this.rgwStorageService.createStorageClass(o).subscribe(()=>{this.notificationService.show(w._.success,"Created Storage Class '" + _ + "'"),this.goToListView()},()=>{t.storageClassForm.setErrors({cdSubmitButton:!0})})}goToListView(){this.router.navigate(["rgw/tiering"])}getTierTargetByStorageClass(t,o){return t?.tier_targets?.find(a=>a.val.storage_class===o)}onAllowReadThroughChange(t){this.allowReadThrough=t;const o=this.storageClassForm.get("read_through_restore_days");this.allowReadThrough?(this.storageClassForm.get("retain_head_object")?.setValue(!0),this.storageClassForm.get("retain_head_object")?.disable(),o?.enable()):(this.storageClassForm.get("retain_head_object")?.enable(),o?.disable())}isTierMatch(...t){const o=this.storageClassForm.getValue("storageClassType");return t.includes(o)}buildRequest(){if(this.storageClassForm.errors)return null;const t=A().cloneDeep(this.storageClassForm.value),o=this.storageClassForm.get("zonegroup").value,_=this.storageClassForm.get("storage_class").value,a=this.storageClassForm.get("placement_target").value,r=this.storageClassForm.get("storageClassType").value,s=this.storageClassForm.get("retain_head_object").value,c=this.formatter.toBytes(this.storageClassForm.get("multipart_min_part_size").value),u=this.formatter.toBytes(this.storageClassForm.get("multipart_sync_threshold").value);return this.buildPlacementTargets(r,o,a,_,s,t,u,c)}buildPlacementTargets(t,o,_,a,r,s,c,u){const p={placement_id:_,storage_class:a};if(t===q.LOCAL)return{zone_group:o,placement_targets:[p]};const T={endpoint:s.target_endpoint,access_key:s.access_key,secret:s.secret_key,target_path:s.target_path,retain_head_object:r,allow_read_through:s.allow_read_through,region:s.region,multipart_sync_threshold:c,multipart_min_part_size:u,restore_storage_class:s.restore_storage_class,...s.allow_read_through?{read_through_restore_days:s.read_through_restore_days}:{}};return t===q.CLOUD_TIER?{zone_group:o,placement_targets:[{...p,tier_type:q.CLOUD_TIER,tier_config:{...T}}]}:t===q.GLACIER?{zone_group:o,placement_targets:[{...p,tier_type:q.GLACIER,tier_config:{...T,glacier_restore_days:s.glacier_restore_days,glacier_restore_tier_type:s.glacier_restore_tier_type}}]}:{zone_group:o,placement_targets:[p]}}static{this.\u0275fac=function(o){return new(o||n)(e.\u0275\u0275directiveInject(P.Ss),e.\u0275\u0275directiveInject(Ge.$),e.\u0275\u0275directiveInject(ne.J),e.\u0275\u0275directiveInject(Co),e.\u0275\u0275directiveInject(ke.Z),e.\u0275\u0275directiveInject(Q.Router),e.\u0275\u0275directiveInject(Q.ActivatedRoute),e.\u0275\u0275directiveInject(we.k))}}static{this.\u0275cmp=e.\u0275\u0275defineComponent({type:n,selectors:[["cd-rgw-storage-class-form"]],features:[e.\u0275\u0275InheritDefinitionFeature],decls:2,vars:3,consts:()=>{let t,o,_,a,r,s,c,u,p,T,f,G,S,O,C,b,N,k,z,$,X,B,V,Z,F,I,te,J,j,ee,D,ie,W,x,de,ue,pe,me,Te,ge,Ee,le,Re,Ce,fe,Se;return t="Type",o="Zone Group Name",_="Placement Target",a=" " + "\ufffd0\ufffd" + " " + "\ufffd1\ufffd" + " " + "\ufffd#7\ufffd" + "" + "\ufffd/#7\ufffd" + "",r="-- Select Storage Class --",s="--Select--",c="Name " + "\ufffd#31\ufffd\ufffd/#31\ufffd" + "",u=" " + "\ufffd0\ufffd" + " ",p="This field is required.",T=" " + "\ufffd0\ufffd" + " ",f="This field is required.",G=" " + "\ufffd0\ufffd" + " ",S="This field is required.",O="This field is required.",C="e.g, us-east-1",b="e.g, http://ceph-node-00.com:80",N="ReadThrough Restore Days",k="Restore Storage Class",z="Target Region " + "\ufffd#5\ufffd\ufffd/#5\ufffd" + "",$="Target Endpoint " + "\ufffd#11\ufffd\ufffd/#11\ufffd" + "",X="Target Access Key " + "\ufffd#18\ufffd\ufffd/#18\ufffd" + "",B="Target Secret Key " + "\ufffd#26\ufffd\ufffd/#26\ufffd" + "",V="Target Path " + "\ufffd#33\ufffd\ufffd/#33\ufffd" + "",Z="Allow Read Through " + "\ufffd#39\ufffd" + "" + "\ufffd0\ufffd" + "" + "\ufffd/#39\ufffd" + "",F="Head Object (Stub File) " + "\ufffd#43\ufffd" + "" + "\ufffd0\ufffd" + "" + "\ufffd/#43\ufffd" + "",I="-- Select the glacier restore storage class --",te="Standard",J="This field is required.",j="This field is required.",ee="Please enter a valid URL.",D="This field is required.",ie="This field is required.",W="This field is required.",x="The entered value must be a positive integer.",de="ReadThrough Restore Days must be positive.",ue="Glacier Restore Tier Type",pe="Glacier Configuration",me="-- Select the glacier restore tier type --",Te="Standard",ge="Expedited",Ee="This field is required.",le="The entered value must be a positive integer.",Re="Glacier Restore Days must be positive.",Ce="Multipart Sync Threshold " + "\ufffd#11\ufffd\ufffd/#11\ufffd" + "",fe="Multipart Minimum Part Size " + "\ufffd#15\ufffd\ufffd/#15\ufffd" + "",Se="RGW service would be restarted after creating the storage class.",[["formDir","ngForm"],["storageError",""],["zonegroupError",""],["placementError",""],["storageClassError",""],["regionError",""],["endpointError",""],["accessError",""],["secretError",""],["targetError",""],["readThroughError",""],["glacierError",""],["glacierRestoreError",""],["title",""],a,r,s,c,u,p,T,f,G,S,O,z,$,X,B,V,Z,F,I,te,J,j,ee,D,ie,W,x,de,pe,me,Te,ge,Ee,le,Re,Ce,fe,Se,["cdsCol","",3,"columnNumbers"],[4,"cdFormLoading"],["name","storageClassForm","novalidate","",3,"formGroup"],[1,"form-header"],[3,"formAllFieldsRequired"],[1,"form-item"],["label",t,"for","storageClassType","formControlName","storageClassType","id","storageClassType",3,"helperText","invalid","invalidText"],["value",""],[3,"value",4,"ngFor","ngForOf"],["cdsRow","",1,"form-item","form-item-append"],["cdsCol",""],["label",o,"formControlName","zonegroup","id","zonegroup",3,"change","invalid","invalidText"],[3,"value","selected",4,"ngFor","ngForOf"],["label",_,"formControlName","placement_target","id","placement_target",3,"invalid","invalidText"],[3,"value"],["labelInputID","storage_class",3,"disabled","invalid","invalidText"],["cdsText","","type","type","id","storage_class","formControlName","storage_class",3,"invalid"],["type","warning","spacingClass","mb-2"],["wrappingClass","text-right",3,"submitActionEvent","form","submitText"],["class","invalid-feedback",4,"ngIf"],[1,"invalid-feedback"],[3,"value","selected"],["labelInputID","region",3,"invalid","invalidText","helperText"],["cdsText","","type","text","id","region","formControlName","region","placeholder",C,3,"invalid"],["labelInputID","target_endpoint",3,"invalid","invalidText","helperText"],["cdsText","","type","text","placeholder",b,"id","target_endpoint","formControlName","target_endpoint",3,"invalid","invalidText"],["cdsCol","",1,"d-flex",3,"columnNumbers"],["labelInputID","access_key",3,"invalid","invalidText","helperText"],["cdsPassword","","type","password","id","access_key","formControlName","access_key",3,"invalid"],[1,"clipboard"],["labelInputID","secret_key",3,"helperText","invalid","invalidText"],["cdsPassword","","type","password","id","secret_key","formControlName","secret_key",3,"invalid"],["labelInputID","target_path",3,"invalid","invalidText","helperText"],["cdsText","","type","text","id","target_path","formControlName","target_path",3,"invalid"],["id","allow_read_through","formControlName","allow_read_through","cdOptionalField","Allow Read Through",3,"change"],["id","retain_head_object","formControlName","retain_head_object","cdOptionalField","Head Object (Stub File)"],["name","read_through_restore_days","formControlName","read_through_restore_days","id","read_through_restore_days","min","1","label",N,3,"helperText","invalid","invalidText"],["formControlName","restore_storage_class","label",k,"id","restore_storage_class",3,"helperText"],[3,"ngValue"],[1,"cd-header"],["formControlName","glacier_restore_tier_type","label",ue,"cdRequiredField","Glacier Restore Tier Type","id","glacier_restore_tier_type",3,"invalid","invalidText","helperText"],[3,"id","formControlName","label","helperText","min","invalid","invalidText"],["size","lg",1,"form-item"],["id","advanced-fieldset",3,"selected","title"],["labelInputID","multipart_sync_threshold","cdOptionalField","Multipart Sync Threshold",3,"helperText"],["cdsText","","type","text","id","multipart_sync_threshold","formControlName","multipart_sync_threshold","cdDimlessBinary",""],["labelInputID","multipart_min_part_size","cdOptionalField","Multipart Minimum Part Size",3,"helperText"],["cdsText","","type","text","id","multipart_min_part_size","formControlName","multipart_min_part_size","cdDimlessBinary",""],[1,"cds--accordion__title","cd-header"]]},template:function(o,_){1&o&&(e.\u0275\u0275elementStart(0,"div",52),e.\u0275\u0275template(1,yR,41,32,"ng-container",53),e.\u0275\u0275elementEnd()),2&o&&(e.\u0275\u0275property("columnNumbers",e.\u0275\u0275pureFunction0(2,QE)),e.\u0275\u0275advance(),e.\u0275\u0275property("cdFormLoading",_.loading))},dependencies:[E.NgForOf,E.NgIf,Pe.m,_t.N,_e.e,ae.O,rn.Y,ft.G,Y.S,oe.E,Qe.P,YE.O,l.\u0275NgNoValidate,l.NgSelectOption,l.\u0275NgSelectMultipleOption,l.DefaultValueAccessor,l.NgControlStatus,l.NgControlStatusGroup,l.FormGroupDirective,l.FormControlName,d.ColumnDirective,d.RowDirective,d.TextInputLabelComponent,d.PasswordInputLabelComponent,d.TextInput,d.PasswordInput,d.Accordion,d.AccordionItem,d.Checkbox,d.NumberComponent,d.Select,d.Option,E.TitleCasePipe,Ie.r],styles:[".clipboard[_ngcontent-%COMP%]{margin-top:1.5rem}"]})}}return n})();var $R=g(38157);function DR(n,i){if(1&n&&(e.\u0275\u0275elementContainerStart(0),e.\u0275\u0275elementStart(1,"cds-tabs",13)(2,"cds-tab",14)(3,"table",15)(4,"tbody")(5,"tr")(6,"td",16),e.\u0275\u0275i18n(7,0),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(8,"td"),e.\u0275\u0275text(9),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(10,"tr")(11,"td",17),e.\u0275\u0275i18n(12,1),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(13,"td",18),e.\u0275\u0275text(14),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(15,"tr")(16,"td",17),e.\u0275\u0275i18n(17,2),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(18,"td",18),e.\u0275\u0275text(19),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(20,"tr")(21,"td",17),e.\u0275\u0275i18n(22,3),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(23,"td",18),e.\u0275\u0275text(24),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(25,"tr")(26,"td",16),e.\u0275\u0275i18n(27,4),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(28,"td"),e.\u0275\u0275text(29),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(30,"tr")(31,"td",16),e.\u0275\u0275i18n(32,5),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(33,"td"),e.\u0275\u0275text(34),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(35,"tr")(36,"td",16),e.\u0275\u0275i18n(37,6),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(38,"td"),e.\u0275\u0275text(39),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(40,"tr")(41,"td",16),e.\u0275\u0275i18n(42,7),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(43,"td"),e.\u0275\u0275text(44),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(45,"tr")(46,"td",16),e.\u0275\u0275i18n(47,8),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(48,"td"),e.\u0275\u0275text(49),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(50,"tr")(51,"td",16),e.\u0275\u0275i18n(52,9),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(53,"td"),e.\u0275\u0275text(54),e.\u0275\u0275elementEnd()()()()(),e.\u0275\u0275elementStart(55,"cds-tab",19)(56,"div",20)(57,"table",21)(58,"tbody")(59,"tr")(60,"td",17),e.\u0275\u0275i18n(61,10),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(62,"td")(63,"pre"),e.\u0275\u0275text(64),e.\u0275\u0275pipe(65,"json"),e.\u0275\u0275elementEnd()()()()()()(),e.\u0275\u0275elementStart(66,"cds-tab",22)(67,"table",21)(68,"tbody")(69,"tr")(70,"td",17),e.\u0275\u0275i18n(71,11),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(72,"td")(73,"pre"),e.\u0275\u0275text(74),e.\u0275\u0275pipe(75,"json"),e.\u0275\u0275elementEnd()()()()()()(),e.\u0275\u0275elementContainerEnd()),2&n){const t=e.\u0275\u0275nextContext();e.\u0275\u0275advance(9),e.\u0275\u0275textInterpolate(null==t.selection||null==t.selection.dest?null:t.selection.dest.push_endpoint_args),e.\u0275\u0275advance(5),e.\u0275\u0275textInterpolate(null==t.selection||null==t.selection.dest?null:t.selection.dest.push_endpoint_topic),e.\u0275\u0275advance(5),e.\u0275\u0275textInterpolate(null==t.selection||null==t.selection.dest?null:t.selection.dest.push_endpoint),e.\u0275\u0275advance(5),e.\u0275\u0275textInterpolate(null==t.selection||null==t.selection.dest?null:t.selection.dest.stored_secret),e.\u0275\u0275advance(5),e.\u0275\u0275textInterpolate(null==t.selection||null==t.selection.dest?null:t.selection.dest.persistent),e.\u0275\u0275advance(5),e.\u0275\u0275textInterpolate(null==t.selection||null==t.selection.dest?null:t.selection.dest.persistent_queue),e.\u0275\u0275advance(5),e.\u0275\u0275textInterpolate(null==t.selection||null==t.selection.dest?null:t.selection.dest.time_to_live),e.\u0275\u0275advance(5),e.\u0275\u0275textInterpolate(null==t.selection||null==t.selection.dest?null:t.selection.dest.max_retries),e.\u0275\u0275advance(5),e.\u0275\u0275textInterpolate(null==t.selection||null==t.selection.dest?null:t.selection.dest.retry_sleep_duration),e.\u0275\u0275advance(5),e.\u0275\u0275textInterpolate(null==t.selection?null:t.selection.opaqueData),e.\u0275\u0275advance(10),e.\u0275\u0275textInterpolate(e.\u0275\u0275pipeBind1(65,12,t.policy)),e.\u0275\u0275advance(10),e.\u0275\u0275textInterpolate(e.\u0275\u0275pipeBind1(75,14,t.selection.subscribed_buckets))}}let WR=(()=>{class n{constructor(){this.policy="{}"}ngOnChanges(t){if(t.selection&&this.selection)if(At.isString(this.selection.policy))try{this.policy=JSON.parse(this.selection.policy)}catch{this.policy="{}"}else this.policy=this.selection.policy||{}}static{this.\u0275fac=function(o){return new(o||n)}}static{this.\u0275cmp=e.\u0275\u0275defineComponent({type:n,selectors:[["cd-rgw-topic-details"]],inputs:{selection:"selection"},features:[e.\u0275\u0275NgOnChangesFeature],decls:1,vars:1,consts:()=>{let t,o,_,a,r,s,c,u,p,T,f,G,S,O,C;return t="Details",o="Policies",_="Subscribed buckets",a="Push endpoint arguments",r="Push endpoint topic",s="Push endpoint",c="Stored secret",u="Persistent",p="Persistent queue",T="Time to live",f="Max retries",G="Retry sleep duration",S="Opaque data",O="Policy",C="Subscribed buckets",[a,r,s,c,u,p,T,f,G,S,O,C,[4,"ngIf"],["type","contained","theme","light"],["heading",t],["data-testid","rgw-topic-details",1,"cds--data-table--sort","cds--data-table--no-border","cds--data-table","cds--data-table--md"],[1,"bold"],[1,"bold","w-25"],[1,"w-75"],["heading",o],[1,"table-scroller"],[1,"cds--data-table--sort","cds--data-table--no-border","cds--data-table","cds--data-table--md"],["heading",_]]},template:function(o,_){1&o&&e.\u0275\u0275template(0,DR,76,16,"ng-container",12),2&o&&e.\u0275\u0275property("ngIf",!!_.selection)},dependencies:[E.NgIf,d.Tabs,d.Tab,E.JsonPipe]})}}return n})();const xR=["table"];function wR(n,i){if(1&n&&e.\u0275\u0275element(0,"cd-rgw-topic-details",4),2&n){const t=e.\u0275\u0275nextContext();e.\u0275\u0275property("selection",t.expandedRow)}}let kR=(()=>{class n extends Je.D{constructor(t,o,_,a,r,s,c){super(c),this.authStorageService=t,this.actionLabels=o,this.rgwTopicService=_,this.modalService=a,this.urlBuilder=r,this.taskWrapper=s,this.ngZone=c,this.selection=new Oe.y,this.topicsSubject=new U.BehaviorSubject([]),this.topics$=this.topicsSubject.asObservable(),this.permission=this.authStorageService.getPermissions().rgw}ngOnInit(){this.columns=[{name:"Name",prop:"name",flexGrow:2},{name:"Owner",prop:"owner",flexGrow:2},{name:"Amazon resource name",prop:"arn",flexGrow:2},{name:"Push endpoint",prop:"dest.push_endpoint",flexGrow:2}];const t=()=>this.selection.first()&&`${encodeURIComponent(this.selection.first().key)}`;this.tableActions=[{permission:"create",icon:y.FI.add,routerLink:()=>this.urlBuilder.getCreate(),name:this.actionLabels.CREATE,canBePrimary:r=>!r.hasSelection},{permission:"update",icon:y.FI.edit,routerLink:()=>this.urlBuilder.getEdit(t()),name:this.actionLabels.EDIT},{permission:"delete",icon:y.FI.destroy,click:()=>this.deleteAction(),disable:()=>!this.selection.hasSelection,name:this.actionLabels.DELETE,canBePrimary:r=>!r.hasSelection}],this.setTableRefreshTimeout(),this.topics$=this.topicsSubject.pipe((0,K.switchMap)(()=>this.rgwTopicService.listTopic().pipe((0,K.catchError)(()=>(this.context.error(),(0,U.of)(null))))),(0,K.shareReplay)(1))}fetchData(){this.topicsSubject.next([])}updateSelection(t){this.selection=t}deleteAction(){const t=this.selection.first().key,o=this.selection.first().name;this.modalService.show(Ue.D,{itemDescription:"Topic",itemNames:[o],submitActionObservable:()=>new U.Observable(_=>{this.taskWrapper.wrapTaskAroundCall({task:new St.O("rgw/topic/delete",{name:[o]}),call:this.rgwTopicService.delete(t)}).subscribe({error:a=>{_.error(a)},complete:()=>{_.complete(),this.table.refreshBtn()}})})})}static{this.\u0275fac=function(o){return new(o||n)(e.\u0275\u0275directiveInject(be.v),e.\u0275\u0275directiveInject(P.Ss),e.\u0275\u0275directiveInject(an),e.\u0275\u0275directiveInject(he.V),e.\u0275\u0275directiveInject(se.E),e.\u0275\u0275directiveInject(It.a),e.\u0275\u0275directiveInject(e.NgZone))}}static{this.\u0275cmp=e.\u0275\u0275defineComponent({type:n,selectors:[["cd-rgw-topic-list"]],viewQuery:function(o,_){if(1&o&&e.\u0275\u0275viewQuery(xR,7),2&o){let a;e.\u0275\u0275queryRefresh(a=e.\u0275\u0275loadQuery())&&(_.table=a.first)}},features:[e.\u0275\u0275ProvidersFeature([{provide:se.E,useValue:new se.E("rgw/topic")}]),e.\u0275\u0275InheritDefinitionFeature],decls:6,vars:9,consts:[["table",""],["columnMode","flex","selectionType","single","id","key",3,"setExpandedRow","updateSelection","fetchData","autoReload","data","columns","hasDetails"],[1,"table-actions",3,"permission","selection","tableActions"],[3,"selection",4,"cdTableDetail"],[3,"selection"]],template:function(o,_){if(1&o){const a=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementContainerStart(0),e.\u0275\u0275elementStart(1,"cd-table",1,0),e.\u0275\u0275pipe(3,"async"),e.\u0275\u0275listener("setExpandedRow",function(s){return e.\u0275\u0275restoreView(a),e.\u0275\u0275resetView(_.setExpandedRow(s))})("updateSelection",function(s){return e.\u0275\u0275restoreView(a),e.\u0275\u0275resetView(_.updateSelection(s))})("fetchData",function(){return e.\u0275\u0275restoreView(a),e.\u0275\u0275resetView(_.fetchData())}),e.\u0275\u0275element(4,"cd-table-actions",2),e.\u0275\u0275template(5,wR,1,1,"cd-rgw-topic-details",3),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementContainerEnd()}2&o&&(e.\u0275\u0275advance(),e.\u0275\u0275property("autoReload",!1)("data",e.\u0275\u0275pipeBind1(3,7,_.topics$))("columns",_.columns)("hasDetails",!0),e.\u0275\u0275advance(3),e.\u0275\u0275property("permission",_.permission)("selection",_.selection)("tableActions",_.tableActions))},dependencies:[re.O,De.j,ot.N,WR,E.AsyncPipe]})}}return n})();const Po={PLAIN:"PLAIN",SCRAM256:"SCRAM-SHA-256",SCRAM512:"SCRAM-SHA-512"},zR={HTTP:"HTTP",AMQP:"AMQP",Kafka:"KAFKA"},HR={none:"none",broker:"broker",routable:"routable"},XR={none:"none",broker:"broker"};var et=function(n){return n.HTTP="80",n.HTTPS="443",n.AMQP="5672",n.AMQPS="5671",n.KAFKA="9092",n.KAFKA_SSL="9093",n}(et||{}),Nt=function(n){return n.http="http",n.https="https",n.amqp="amqp",n.amqps="amqps",n.kafka="kafka",n}(Nt||{}),ce=function(n){return n.HTTP="HTTP",n.AMQP="AMQP",n.AMQPS="AMQPS",n.KAFKA="KAFKA",n}(ce||{}),je=function(n){return n.HTTP="http:",n.HTTPS="https:",n.AMQP="amqp:",n.AMQPS="amqps:",n.KAFKA="kafka",n}(je||{});const BR=["topicPolicyTextArea"],VR=()=>({md:4}),Qt=()=>({sm:4});function ZR(n,i){1&n&&(e.\u0275\u0275elementStart(0,"option",71),e.\u0275\u0275i18n(1,10),e.\u0275\u0275elementEnd())}function KR(n,i){1&n&&(e.\u0275\u0275elementStart(0,"option",72),e.\u0275\u0275i18n(1,11),e.\u0275\u0275elementEnd())}function qR(n,i){if(1&n&&(e.\u0275\u0275elementStart(0,"option"),e.\u0275\u0275i18n(1,12),e.\u0275\u0275pipe(2,"upperFirst"),e.\u0275\u0275elementEnd()),2&n){const t=i.$implicit;e.\u0275\u0275advance(2),e.\u0275\u0275i18nExp(e.\u0275\u0275pipeBind1(2,1,t)),e.\u0275\u0275i18nApply(1)}}function jR(n,i){1&n&&(e.\u0275\u0275elementStart(0,"span",74),e.\u0275\u0275i18n(1,13),e.\u0275\u0275elementEnd())}function YR(n,i){if(1&n&&e.\u0275\u0275template(0,jR,2,0,"span",73),2&n){e.\u0275\u0275nextContext();const t=e.\u0275\u0275reference(2),o=e.\u0275\u0275nextContext();e.\u0275\u0275property("ngIf",o.topicForm.showError("endpointType",t,"required"))}}function QR(n,i){1&n&&(e.\u0275\u0275elementStart(0,"option",71),e.\u0275\u0275i18n(1,14),e.\u0275\u0275elementEnd())}function JR(n,i){1&n&&(e.\u0275\u0275elementStart(0,"option",72),e.\u0275\u0275i18n(1,15),e.\u0275\u0275elementEnd())}function eC(n,i){if(1&n&&(e.\u0275\u0275elementStart(0,"option",75),e.\u0275\u0275i18n(1,16),e.\u0275\u0275elementEnd()),2&n){const t=i.$implicit;e.\u0275\u0275property("value",t),e.\u0275\u0275advance(),e.\u0275\u0275i18nExp(t),e.\u0275\u0275i18nApply(1)}}function tC(n,i){1&n&&(e.\u0275\u0275elementStart(0,"span",74),e.\u0275\u0275i18n(1,17),e.\u0275\u0275elementEnd())}function nC(n,i){if(1&n&&e.\u0275\u0275template(0,tC,2,0,"span",73),2&n){e.\u0275\u0275nextContext();const t=e.\u0275\u0275reference(2),o=e.\u0275\u0275nextContext();e.\u0275\u0275property("ngIf",o.topicForm.showError("owner",t,"required"))}}function oC(n,i){1&n&&(e.\u0275\u0275elementStart(0,"span",74),e.\u0275\u0275i18n(1,33),e.\u0275\u0275elementEnd())}function _C(n,i){1&n&&(e.\u0275\u0275elementStart(0,"span",74),e.\u0275\u0275i18n(1,34),e.\u0275\u0275elementEnd())}function iC(n,i){if(1&n&&e.\u0275\u0275template(0,oC,2,0,"span",73)(1,_C,2,0,"span",73),2&n){e.\u0275\u0275nextContext(2);const t=e.\u0275\u0275reference(2),o=e.\u0275\u0275nextContext();e.\u0275\u0275property("ngIf",o.topicForm.showError("name",t,"required")),e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf",o.topicForm.showError("name",t,"notUnique"))}}function aC(n,i){1&n&&(e.\u0275\u0275elementStart(0,"div",57)(1,"cds-checkbox",102),e.\u0275\u0275elementContainerStart(2),e.\u0275\u0275i18n(3,35),e.\u0275\u0275elementContainerEnd(),e.\u0275\u0275elementStart(4,"cd-help-text"),e.\u0275\u0275i18n(5,36),e.\u0275\u0275elementEnd()()()),2&n&&e.\u0275\u0275property("columnNumbers",e.\u0275\u0275pureFunction0(1,Qt))}function rC(n,i){1&n&&(e.\u0275\u0275elementStart(0,"div",57)(1,"cds-checkbox",103),e.\u0275\u0275elementContainerStart(2),e.\u0275\u0275i18n(3,37),e.\u0275\u0275elementContainerEnd(),e.\u0275\u0275elementStart(4,"cd-help-text"),e.\u0275\u0275i18n(5,38),e.\u0275\u0275elementEnd()()()),2&n&&e.\u0275\u0275property("columnNumbers",e.\u0275\u0275pureFunction0(1,Qt))}function lC(n,i){1&n&&(e.\u0275\u0275elementStart(0,"span",74),e.\u0275\u0275text(1,"This field is required"),e.\u0275\u0275elementEnd())}function sC(n,i){if(1&n&&e.\u0275\u0275template(0,lC,2,0,"span",73),2&n){e.\u0275\u0275nextContext(2);const t=e.\u0275\u0275reference(2),o=e.\u0275\u0275nextContext();e.\u0275\u0275property("ngIf",o.topicForm.showError("fqdn",t,"required"))}}function cC(n,i){1&n&&(e.\u0275\u0275elementStart(0,"span",74),e.\u0275\u0275i18n(1,39),e.\u0275\u0275elementEnd())}function dC(n,i){1&n&&(e.\u0275\u0275elementStart(0,"span",74),e.\u0275\u0275i18n(1,40),e.\u0275\u0275elementEnd())}function uC(n,i){if(1&n&&e.\u0275\u0275template(0,cC,2,0,"span",73)(1,dC,2,0,"span",73),2&n){e.\u0275\u0275nextContext(2);const t=e.\u0275\u0275reference(2),o=e.\u0275\u0275nextContext();e.\u0275\u0275property("ngIf",o.topicForm.showError("port",t,"required")),e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf",o.topicForm.controls.port.hasError("pattern")&&o.topicForm.controls.port.touched)}}function pC(n,i){1&n&&(e.\u0275\u0275elementStart(0,"span",74),e.\u0275\u0275i18n(1,43),e.\u0275\u0275elementEnd())}function mC(n,i){if(1&n&&(e.\u0275\u0275elementStart(0,"span",74),e.\u0275\u0275text(1),e.\u0275\u0275elementEnd()),2&n){const t=e.\u0275\u0275nextContext(6);e.\u0275\u0275advance(),e.\u0275\u0275textInterpolate1(" ",t.passwordValuation," ")}}function TC(n,i){if(1&n&&e.\u0275\u0275template(0,pC,2,0,"span",73)(1,mC,2,1,"span",73),2&n){e.\u0275\u0275nextContext(4);const t=e.\u0275\u0275reference(2),o=e.\u0275\u0275nextContext();e.\u0275\u0275property("ngIf",o.userForm.showError("password",t,"required")),e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf",o.userForm.showError("password",t,"passwordPolicy"))}}function gC(n,i){if(1&n){const t=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"div",61)(1,"cds-password-label",107),e.\u0275\u0275i18nStart(2,42),e.\u0275\u0275elementStart(3,"input",108),e.\u0275\u0275listener("change",function(){e.\u0275\u0275restoreView(t);const _=e.\u0275\u0275nextContext(4);return e.\u0275\u0275resetView(_.generatePushEndpoint())}),e.\u0275\u0275elementEnd(),e.\u0275\u0275i18nEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275template(4,TC,2,2,"ng-template",null,8,e.\u0275\u0275templateRefExtractor),e.\u0275\u0275elementEnd()}if(2&n){const t=e.\u0275\u0275reference(5),o=e.\u0275\u0275nextContext(4);e.\u0275\u0275advance(),e.\u0275\u0275property("invalid",!o.topicForm.controls.password.valid&&o.topicForm.controls.password.dirty)("invalidText",t)}}function EC(n,i){if(1&n){const t=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"div",60)(1,"div",61)(2,"cds-text-label",104),e.\u0275\u0275i18nStart(3,41),e.\u0275\u0275elementStart(4,"input",105),e.\u0275\u0275listener("change",function(){e.\u0275\u0275restoreView(t);const _=e.\u0275\u0275nextContext(3);return e.\u0275\u0275resetView(_.generatePushEndpoint())}),e.\u0275\u0275elementEnd(),e.\u0275\u0275i18nEnd(),e.\u0275\u0275elementEnd()(),e.\u0275\u0275template(5,gC,6,2,"div",106),e.\u0275\u0275elementEnd()}if(2&n){const t=e.\u0275\u0275nextContext(3);e.\u0275\u0275advance(5),e.\u0275\u0275property("ngIf",t.selectedOption!==t.hostProtocols.HTTP)}}function RC(n,i){if(1&n){const t=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"div",60)(1,"div",61)(2,"cds-text-label",109),e.\u0275\u0275i18nStart(3,44),e.\u0275\u0275elementStart(4,"input",110),e.\u0275\u0275listener("change",function(){e.\u0275\u0275restoreView(t);const _=e.\u0275\u0275nextContext(3);return e.\u0275\u0275resetView(_.generatePushEndpoint())}),e.\u0275\u0275elementEnd(),e.\u0275\u0275i18nEnd(),e.\u0275\u0275elementEnd()()()}}function CC(n,i){1&n&&(e.\u0275\u0275elementStart(0,"span",74),e.\u0275\u0275i18n(1,45),e.\u0275\u0275elementEnd())}function fC(n,i){if(1&n&&e.\u0275\u0275template(0,CC,2,0,"span",73),2&n){e.\u0275\u0275nextContext(2);const t=e.\u0275\u0275reference(2),o=e.\u0275\u0275nextContext();e.\u0275\u0275property("ngIf",o.topicForm.showError("push_endpoint",t,"required"))}}function SC(n,i){1&n&&(e.\u0275\u0275elementStart(0,"div",61)(1,"cds-checkbox",114),e.\u0275\u0275elementContainerStart(2),e.\u0275\u0275i18n(3,47),e.\u0275\u0275elementContainerEnd(),e.\u0275\u0275elementStart(4,"cd-help-text"),e.\u0275\u0275i18n(5,48),e.\u0275\u0275elementEnd()()())}function FC(n,i){if(1&n&&(e.\u0275\u0275elementContainerStart(0),e.\u0275\u0275elementStart(1,"div",113),e.\u0275\u0275template(2,SC,6,0,"div",106),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementContainerEnd()),2&n){const t=e.\u0275\u0275nextContext(4);e.\u0275\u0275advance(2),e.\u0275\u0275property("ngIf","KAFKA"===t.selectedOption)}}function MC(n,i){1&n&&(e.\u0275\u0275elementStart(0,"div",61)(1,"cds-text-label",115),e.\u0275\u0275i18nStart(2,49),e.\u0275\u0275element(3,"input",116),e.\u0275\u0275i18nEnd(),e.\u0275\u0275elementEnd()())}function PC(n,i){1&n&&(e.\u0275\u0275elementStart(0,"div",61)(1,"cds-text-label",117),e.\u0275\u0275i18nStart(2,50),e.\u0275\u0275element(3,"input",118),e.\u0275\u0275i18nEnd(),e.\u0275\u0275elementEnd()())}function IC(n,i){if(1&n&&(e.\u0275\u0275elementStart(0,"option"),e.\u0275\u0275i18n(1,52),e.\u0275\u0275elementEnd()),2&n){const t=i.$implicit;e.\u0275\u0275advance(),e.\u0275\u0275i18nExp(t),e.\u0275\u0275i18nApply(1)}}function OC(n,i){if(1&n&&(e.\u0275\u0275elementStart(0,"div",61)(1,"cds-select",119)(2,"option",72),e.\u0275\u0275i18n(3,51),e.\u0275\u0275elementEnd(),e.\u0275\u0275template(4,IC,2,1,"option",65),e.\u0275\u0275elementEnd()()),2&n){const t=e.\u0275\u0275nextContext(4);e.\u0275\u0275advance(4),e.\u0275\u0275property("ngForOf",t.kafkaMechanism)}}function GC(n,i){if(1&n&&(e.\u0275\u0275elementStart(0,"option",75),e.\u0275\u0275i18n(1,54),e.\u0275\u0275elementEnd()),2&n){const t=i.$implicit;e.\u0275\u0275property("value",t),e.\u0275\u0275advance(),e.\u0275\u0275i18nExp(t),e.\u0275\u0275i18nApply(1)}}function NC(n,i){if(1&n&&(e.\u0275\u0275elementStart(0,"div",61)(1,"cds-select",120)(2,"option",72),e.\u0275\u0275i18n(3,53),e.\u0275\u0275elementEnd(),e.\u0275\u0275template(4,GC,2,2,"option",67),e.\u0275\u0275elementEnd()()),2&n){const t=e.\u0275\u0275nextContext(4);e.\u0275\u0275advance(3),e.\u0275\u0275i18nExp(t.selectedOption),e.\u0275\u0275i18nApply(3),e.\u0275\u0275advance(),e.\u0275\u0275property("ngForOf",t.ackLevels)}}function AC(n,i){1&n&&(e.\u0275\u0275elementStart(0,"div",61)(1,"cds-text-label",121),e.\u0275\u0275i18nStart(2,55),e.\u0275\u0275element(3,"input",122),e.\u0275\u0275i18nEnd(),e.\u0275\u0275elementEnd()())}function hC(n,i){if(1&n&&(e.\u0275\u0275elementContainerStart(0),e.\u0275\u0275elementStart(1,"div",111)(2,"fieldset")(3,"legend",112),e.\u0275\u0275i18nStart(4,46),e.\u0275\u0275element(5,"cd-help-text"),e.\u0275\u0275i18nEnd(),e.\u0275\u0275elementEnd()(),e.\u0275\u0275template(6,FC,3,1,"ng-container",68),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(7,"div",60),e.\u0275\u0275template(8,MC,4,0,"div",106)(9,PC,4,0,"div",106)(10,OC,5,1,"div",106),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(11,"div",60),e.\u0275\u0275template(12,NC,5,2,"div",106)(13,AC,4,0,"div",106),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementContainerEnd()),2&n){const t=e.\u0275\u0275nextContext(3);e.\u0275\u0275advance(5),e.\u0275\u0275i18nExp("AMQP"===t.selectedOption?"AMQP attributes":"KAFKA attributes")(t.attributeHelpText),e.\u0275\u0275i18nApply(4),e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf","KAFKA"===t.selectedOption),e.\u0275\u0275advance(2),e.\u0275\u0275property("ngIf",t.selectedOption===t.hostProtocols.AMQP||t.selectedOption===t.hostProtocols.KAFKA),e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf",t.selectedOption===t.hostProtocols.AMQP),e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf",t.selectedOption===t.hostProtocols.KAFKA),e.\u0275\u0275advance(2),e.\u0275\u0275property("ngIf",t.selectedOption===t.hostProtocols.AMQP||t.selectedOption===t.hostProtocols.KAFKA),e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf",t.selectedOption===t.hostProtocols.KAFKA)}}function bC(n,i){if(1&n){const t=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementContainerStart(0),e.\u0275\u0275elementStart(1,"div",60)(2,"div",61)(3,"cds-text-label",76),e.\u0275\u0275i18nStart(4,18),e.\u0275\u0275element(5,"input",77),e.\u0275\u0275i18nEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275template(6,iC,2,2,"ng-template",null,3,e.\u0275\u0275templateRefExtractor),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(8,"div",78)(9,"fieldset")(10,"legend",79),e.\u0275\u0275i18nStart(11,19),e.\u0275\u0275element(12,"cd-help-text"),e.\u0275\u0275i18nEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(13,"div",57)(14,"cds-checkbox",80),e.\u0275\u0275listener("checkedChange",function(_){e.\u0275\u0275restoreView(t);const a=e.\u0275\u0275nextContext(2);return e.\u0275\u0275resetView(a.onSecureSSLChange(_))}),e.\u0275\u0275elementContainerStart(15),e.\u0275\u0275i18n(16,20),e.\u0275\u0275elementContainerEnd(),e.\u0275\u0275elementStart(17,"cd-help-text"),e.\u0275\u0275i18n(18,21),e.\u0275\u0275elementEnd()()(),e.\u0275\u0275template(19,aC,6,2,"div",81)(20,rC,6,2,"div",81),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(21,"div",60)(22,"div",61)(23,"cds-text-label",82),e.\u0275\u0275i18nStart(24,22),e.\u0275\u0275elementStart(25,"input",83),e.\u0275\u0275listener("change",function(){e.\u0275\u0275restoreView(t);const _=e.\u0275\u0275nextContext(2);return e.\u0275\u0275resetView(_.generatePushEndpoint())}),e.\u0275\u0275elementEnd(),e.\u0275\u0275i18nEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275template(26,sC,1,1,"ng-template",null,4,e.\u0275\u0275templateRefExtractor),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(28,"div",61)(29,"cds-number",84),e.\u0275\u0275listener("change",function(){e.\u0275\u0275restoreView(t);const _=e.\u0275\u0275nextContext(2);return e.\u0275\u0275resetView(_.generatePushEndpoint())}),e.\u0275\u0275elementEnd(),e.\u0275\u0275template(30,uC,2,2,"ng-template",null,5,e.\u0275\u0275templateRefExtractor),e.\u0275\u0275elementEnd()(),e.\u0275\u0275template(32,EC,6,1,"div",85)(33,RC,5,0,"div",85),e.\u0275\u0275elementStart(34,"div",60)(35,"div",61)(36,"cds-text-label",86),e.\u0275\u0275i18nStart(37,23),e.\u0275\u0275element(38,"input",87),e.\u0275\u0275i18nEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275template(39,fC,1,1,"ng-template",null,6,e.\u0275\u0275templateRefExtractor),e.\u0275\u0275elementEnd()(),e.\u0275\u0275template(41,hC,14,8,"ng-container",68),e.\u0275\u0275elementContainerStart(42),e.\u0275\u0275elementStart(43,"div",60)(44,"legend",79),e.\u0275\u0275i18nStart(45,24),e.\u0275\u0275element(46,"cd-help-text"),e.\u0275\u0275i18nEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(47,"div",57)(48,"cds-checkbox",88),e.\u0275\u0275elementContainerStart(49),e.\u0275\u0275i18n(50,25),e.\u0275\u0275elementContainerEnd(),e.\u0275\u0275elementStart(51,"cd-help-text"),e.\u0275\u0275i18n(52,26),e.\u0275\u0275elementEnd()()()(),e.\u0275\u0275elementStart(53,"div",60)(54,"div",61)(55,"cds-text-label",89),e.\u0275\u0275i18nStart(56,27),e.\u0275\u0275element(57,"input",90),e.\u0275\u0275i18nEnd(),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(58,"div",61)(59,"cds-number",91),e.\u0275\u0275text(60,"Time to live "),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(61,"div",61)(62,"cds-number",92),e.\u0275\u0275text(63," Max retries "),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(64,"div",61)(65,"cds-number",93),e.\u0275\u0275text(66," Retry sleep duration "),e.\u0275\u0275elementEnd()()(),e.\u0275\u0275elementStart(67,"div",60)(68,"div",61)(69,"cds-textarea-label"),e.\u0275\u0275i18nStart(70,28),e.\u0275\u0275element(71,"span"),e.\u0275\u0275elementStart(72,"textarea",94,7),e.\u0275\u0275listener("change",function(){e.\u0275\u0275restoreView(t);const _=e.\u0275\u0275nextContext(2);return e.\u0275\u0275resetView(_.textAreaOnChange("topicPolicyTextArea"))}),e.\u0275\u0275elementEnd(),e.\u0275\u0275i18nEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(74,"cd-help-text"),e.\u0275\u0275i18n(75,29),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(76,"div",95)(77,"div",61)(78,"cds-button-set",96)(79,"button",97),e.\u0275\u0275listener("click",function(){e.\u0275\u0275restoreView(t);const _=e.\u0275\u0275nextContext(2);return e.\u0275\u0275resetView(_.openUrl("https://docs.aws.amazon.com/AmazonS3/latest/userguide/example-bucket-policies.html?icmpid=docs_amazons3_console"))}),e.\u0275\u0275i18nStart(80,30),e.\u0275\u0275namespaceSVG(),e.\u0275\u0275element(81,"svg",98),e.\u0275\u0275i18nEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275namespaceHTML(),e.\u0275\u0275elementStart(82,"button",97),e.\u0275\u0275listener("click",function(){e.\u0275\u0275restoreView(t);const _=e.\u0275\u0275nextContext(2);return e.\u0275\u0275resetView(_.openUrl("https://awspolicygen.s3.amazonaws.com/policygen.html"))}),e.\u0275\u0275i18nStart(83,31),e.\u0275\u0275namespaceSVG(),e.\u0275\u0275element(84,"svg",98),e.\u0275\u0275i18nEnd(),e.\u0275\u0275elementEnd()()(),e.\u0275\u0275namespaceHTML(),e.\u0275\u0275elementStart(85,"div",61)(86,"cds-button-set",99)(87,"button",100),e.\u0275\u0275listener("click",function(){e.\u0275\u0275restoreView(t);const _=e.\u0275\u0275nextContext(2);return e.\u0275\u0275resetView(_.clearTextArea("policy","{}"))}),e.\u0275\u0275i18nStart(88,32),e.\u0275\u0275namespaceSVG(),e.\u0275\u0275element(89,"svg",101),e.\u0275\u0275i18nEnd(),e.\u0275\u0275elementEnd()()()()()(),e.\u0275\u0275elementContainerEnd()()}if(2&n){const t=e.\u0275\u0275reference(7),o=e.\u0275\u0275reference(27),_=e.\u0275\u0275reference(31),a=e.\u0275\u0275reference(40),r=e.\u0275\u0275nextContext(2);e.\u0275\u0275advance(3),e.\u0275\u0275property("invalid",r.topicForm.controls.name.invalid&&r.topicForm.controls.name.dirty)("invalidText",t),e.\u0275\u0275advance(2),e.\u0275\u0275property("invalid",r.topicForm.controls.name.invalid&&r.topicForm.controls.name.dirty),e.\u0275\u0275advance(8),e.\u0275\u0275property("columnNumbers",e.\u0275\u0275pureFunction0(24,Qt)),e.\u0275\u0275advance(6),e.\u0275\u0275property("ngIf",r.selectedOption===r.hostProtocols.AMQP||r.selectedOption===r.hostProtocols.HTTP),e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf",r.selectedOption==r.hostProtocols.HTTP),e.\u0275\u0275advance(3),e.\u0275\u0275property("invalid",r.topicForm.controls.fqdn.invalid&&r.topicForm.controls.fqdn.dirty)("invalidText",o),e.\u0275\u0275advance(2),e.\u0275\u0275property("invalid",r.topicForm.controls.fqdn.invalid&&r.topicForm.controls.fqdn.dirty),e.\u0275\u0275advance(4),e.\u0275\u0275property("min",1)("invalid",r.topicForm.controls.port.invalid&&r.topicForm.controls.port.dirty)("invalidText",_),e.\u0275\u0275advance(3),e.\u0275\u0275property("ngIf",r.selectedOption===r.hostProtocols.AMQP||r.selectedOption===r.hostProtocols.KAFKA),e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf",r.selectedOption===r.hostProtocols.AMQP),e.\u0275\u0275advance(3),e.\u0275\u0275property("invalid",r.topicForm.controls.push_endpoint.invalid&&r.topicForm.controls.push_endpoint.dirty)("invalidText",a),e.\u0275\u0275advance(2),e.\u0275\u0275property("placeholder",r.pushEndpointPlaceholder)("invalid",r.topicForm.controls.push_endpoint.invalid&&r.topicForm.controls.push_endpoint.dirty),e.\u0275\u0275advance(3),e.\u0275\u0275property("ngIf",r.selectedOption===r.hostProtocols.AMQP||r.selectedOption===r.hostProtocols.KAFKA),e.\u0275\u0275advance(6),e.\u0275\u0275property("columnNumbers",e.\u0275\u0275pureFunction0(25,Qt)),e.\u0275\u0275advance(12),e.\u0275\u0275property("min",1),e.\u0275\u0275advance(3),e.\u0275\u0275property("min",1),e.\u0275\u0275advance(3),e.\u0275\u0275property("min",1),e.\u0275\u0275advance(7),e.\u0275\u0275i18nExp("Policy"),e.\u0275\u0275i18nApply(70)}}function vC(n,i){if(1&n){const t=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"div",57)(1,"form",58,0)(3,"div",59),e.\u0275\u0275text(4),e.\u0275\u0275pipe(5,"titlecase"),e.\u0275\u0275pipe(6,"upperFirst"),e.\u0275\u0275elementStart(7,"cd-help-text")(8,"span"),e.\u0275\u0275i18n(9,9),e.\u0275\u0275elementEnd()()(),e.\u0275\u0275elementStart(10,"div",60)(11,"div",61)(12,"cds-select",62),e.\u0275\u0275listener("change",function(){e.\u0275\u0275restoreView(t);const _=e.\u0275\u0275nextContext();return e.\u0275\u0275resetView(_.onEndpointTypeChange())}),e.\u0275\u0275template(13,ZR,2,0,"option",63)(14,KR,2,0,"option",64)(15,qR,3,3,"option",65),e.\u0275\u0275elementEnd(),e.\u0275\u0275template(16,YR,1,1,"ng-template",null,1,e.\u0275\u0275templateRefExtractor),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(18,"div",61)(19,"cds-select",66),e.\u0275\u0275template(20,QR,2,0,"option",63)(21,JR,2,0,"option",64)(22,eC,2,2,"option",67),e.\u0275\u0275elementEnd(),e.\u0275\u0275template(23,nC,1,1,"ng-template",null,2,e.\u0275\u0275templateRefExtractor),e.\u0275\u0275elementEnd()(),e.\u0275\u0275template(25,bC,90,26,"ng-container",68),e.\u0275\u0275elementStart(26,"div",69)(27,"cd-form-button-panel",70),e.\u0275\u0275pipe(28,"titlecase"),e.\u0275\u0275pipe(29,"upperFirst"),e.\u0275\u0275listener("submitActionEvent",function(){e.\u0275\u0275restoreView(t);const _=e.\u0275\u0275nextContext();return e.\u0275\u0275resetView(_.submitAction())}),e.\u0275\u0275elementEnd()()()()}if(2&n){const t=e.\u0275\u0275reference(17),o=e.\u0275\u0275reference(24),_=e.\u0275\u0275nextContext();e.\u0275\u0275property("columnNumbers",e.\u0275\u0275pureFunction0(25,VR)),e.\u0275\u0275advance(),e.\u0275\u0275property("formGroup",_.topicForm),e.\u0275\u0275advance(3),e.\u0275\u0275textInterpolate2(" ",e.\u0275\u0275pipeBind1(5,17,_.action)," ",e.\u0275\u0275pipeBind1(6,19,_.resource)," "),e.\u0275\u0275advance(8),e.\u0275\u0275property("invalid",_.topicForm.controls.endpointType.invalid&&_.topicForm.controls.endpointType.dirty)("invalidText",t),e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf",null===_.endpointType),e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf",null!==_.endpointType),e.\u0275\u0275advance(),e.\u0275\u0275property("ngForOf",_.endpointType),e.\u0275\u0275advance(4),e.\u0275\u0275property("invalid",_.topicForm.controls.owner.invalid&&_.topicForm.controls.owner.dirty)("invalidText",o),e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf",null===_.owners),e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf",null!==_.owners),e.\u0275\u0275advance(),e.\u0275\u0275property("ngForOf",_.owners),e.\u0275\u0275advance(3),e.\u0275\u0275property("ngIf",_.selectedOption),e.\u0275\u0275advance(2),e.\u0275\u0275property("form",_.topicForm)("submitText",e.\u0275\u0275pipeBind1(28,21,_.action)+" "+e.\u0275\u0275pipeBind1(29,23,_.resource))}}let Io=(()=>{class n extends tt.g{constructor(t,o,_,a,r,s,c){super(),this.actionLabels=t,this.textAreaJsonFormatterService=o,this.rgwTopicService=_,this.rgwUserService=a,this.notificationService=r,this.router=s,this.route=c,this.endpointType=[],this.ackLevels=[],this.kafkaMechanism=[],this.editing=!1,this.hostProtocols=ce,this.key="",this.protocolPlaceholders={HTTP:"http[s]://<fqdn>[:<port]...",AMQP:"amqp[s]://[<user>:<password>@]<fqdn>[:<port>][/<vhost>]...",KAFKA:"kafka://[<user>:<password>@]<fqdn>[:<port>]..."},this.editing=this.router.url.startsWith(`/rgw/topic/${P.Qp.EDIT}`),this.action=this.editing?this.actionLabels.EDIT:this.actionLabels.CREATE,this.resource="topic"}ngAfterViewChecked(){this.textAreaOnChange(this.topicPolicyTextArea)}ngOnInit(){this.endpointType=Object.values(zR),this.createForm(),this.rgwUserService.enumerate().subscribe(t=>{this.owners=t.sort(),this.editing?(this.topicId=this.route.snapshot.paramMap.get("name"),this.topicId=decodeURIComponent(this.topicId),this.loadTopicData(this.topicId)):this.loadingReady()}),this.topicForm.get("user")?.valueChanges.subscribe(()=>this.setMechanism()),this.topicForm.get("password")?.valueChanges.subscribe(()=>this.setMechanism()),this.topicForm.get("endpointType")?.valueChanges.subscribe(t=>{this.ackLevels=Object.values(t===ce.AMQP?HR:XR)}),this.kafkaMechanism=Object.values(Po),this.setMechanism(),this.topicForm.get("enable_ssl").valueChanges.subscribe(t=>{const o=this.topicForm.get("verify_ssl"),_=this.topicForm.get("use_ssl");t?(o.enable(),_.enable()):(o.disable(),_.disable(),_.setValue(!1),o.setValue(!1))})}loadTopicData(t){this.rgwTopicService.getTopic(t).subscribe(o=>{this.topicForm.get("name")?.disable();let r,a=o.dest.push_endpoint.split("://")[0];r=a===Nt.amqp||a===Nt.amqps?ce.AMQP:a===Nt.https||a===Nt.http?ce.HTTP:ce.KAFKA,this.selectedOption=r,this.getPushUrlQueryValues(o),this.topicForm.get("owner").disable(),this.loadingReady()})}get pushEndpointPlaceholder(){return this.protocolPlaceholders[this.topicForm.get("endpointType")?.value]||"Enter endpoint URL"}createForm(){this.topicForm=new Me.$({owner:new l.UntypedFormControl("",{validators:[l.Validators.required]}),name:new l.UntypedFormControl("",[l.Validators.required],M.xQ.unique(this.rgwTopicService.exists,this.rgwTopicService)),push_endpoint:new l.UntypedFormControl({value:"",disabled:!0},{validators:[l.Validators.required]}),OpaqueData:new l.UntypedFormControl(""),persistent:new l.UntypedFormControl("0"),max_retries:new l.UntypedFormControl("0"),time_to_live:new l.UntypedFormControl("0"),retry_sleep_duration:new l.UntypedFormControl("0"),policy:new l.UntypedFormControl("{}",M.xQ.json()),endpointType:new l.UntypedFormControl("",{validators:[l.Validators.required]}),port:new l.UntypedFormControl("",{validators:[l.Validators.required,l.Validators.pattern("^[0-9]+$")]}),verify_ssl:new l.UntypedFormControl(!0),enable_ssl:new l.UntypedFormControl(!0),cloud_events:new l.UntypedFormControl,user:new l.UntypedFormControl,password:new l.UntypedFormControl,vhost:new l.UntypedFormControl,ca_location:new l.UntypedFormControl,amqp_exchange:new l.UntypedFormControl,ack_level:new l.UntypedFormControl,use_ssl:new l.UntypedFormControl(!1),kafka_brokers:new l.UntypedFormControl,mechanism:new l.UntypedFormControl,fqdn:new l.UntypedFormControl("",{validators:[l.Validators.required]})})}onEndpointTypeChange(){this.selectedOption=this.topicForm.get("endpointType").value;const t=this.topicForm.get("enable_ssl")?.value;this.vhost="/",this.setDefaultPort(t,this.selectedOption),this.generatePushEndpoint(t),this.reset()}setDefaultPort(t,o){this.port=this.getPort(o,t).toString(),this.topicForm.patchValue({port:this.port})}onSecureSSLChange(t){const o=!!t;this.port=this.getPort(this.selectedOption,o).toString(),this.topicForm.patchValue({port:this.port}),this.generatePushEndpoint(o)}getPort(t,o){const _={[ce.HTTP]:[et.HTTP,et.HTTPS],[ce.AMQP]:[et.AMQP,et.AMQPS],[ce.KAFKA]:[et.KAFKA,et.KAFKA_SSL]};return o?_[t][1]:_[t][0]}textAreaOnChange(t){this.textAreaJsonFormatterService.format(t)}setMechanism(){const t=this.topicForm.get("user")?.value,o=this.topicForm.get("password")?.value,_=this.topicForm.get("mechanism");let a="";t&&o&&(a=Po.PLAIN),_?.setValue(a)}generatePushEndpoint(t){if(!this.selectedOption)return;let o="";const _=void 0!==t?t:this.topicForm.get("enable_ssl")?.value,a=this.topicForm.get("fqdn")?.value||"<fqdn>",r=this.topicForm.get("port")?.value||"[:port]";switch(this.selectedOption){case ce.HTTP:o=`http${_?"s":""}://${a}:${r}`;break;case ce.AMQP:o=this.generateAMQPEndpoint(r,a,_?"s":"");break;case ce.KAFKA:o=this.generateKafkaEndpoint(a,r);break;default:o=""}o&&this.topicForm.patchValue({push_endpoint:o})}generateAMQPEndpoint(t,o,_){let a;const r=this.topicForm.get("user")?.value,s=this.topicForm.get("password")?.value,c=this.topicForm.get("vhost")?.value||"/";return a=`amqp${_?"s":""}://${o}:${t}${c}`,r&&s&&(a=`amqp${_?"s":""}://${r}:${s}@${o}:${t}${c}`),a}generateKafkaEndpoint(t,o){let _;const a=Nt.kafka,r=this.topicForm.get("user")?.value,s=this.topicForm.get("password")?.value,c=this.topicForm.get("kafka_brokers")?.value;return _=`${a}://${t}:${o}`,_=r&&s?`${a}://${r}:${s}@${t}:${o}`:c?`kafka://${c}`:`kafka://${t}:${o}`,_}getTopicPolicy(){return this.topicForm.getValue("policy")||"{}"}getPushUrlQueryValues(t){let _=this.convertUrlToObject(t.dest.push_endpoint);const r=this.extractAdditionalValues(t.dest.push_endpoint_args);switch(_.protocol?.toLowerCase()){case je.AMQP:case je.AMQPS:this.selectedOption=ce.AMQP;break;case je.HTTP:case je.HTTPS:this.selectedOption=ce.HTTP;break;default:this.selectedOption=ce.KAFKA}const c=At.clone(this.topicForm.value),u=Object.keys(this.topicForm.value);let p=At.pick(t,u);p=At.merge(c,p),this.owners.includes(p.owner)||(this.owners.push(p.owner),this.topicForm.get("owner").disable()),this.topicForm.patchValue({endpointType:this.selectedOption}),this.topicForm.patchValue({name:t.name,owner:t.owner,push_endpoint:t.dest.push_endpoint,OpaqueData:t.opaqueData,persistent:t.dest.persistent,max_retries:t.dest.max_retries,time_to_live:t.dest.time_to_live,retry_sleep_duration:t.dest.retry_sleep_duration,policy:t.policy,port:_.port,fqdn:_.hostname,vhost:_.pathname,user:_.username,password:_.password,ca_location:r.ca_location,mechanism:r.mechanism,enable_ssl:_.protocol===je.HTTPS||_.protocol==je.AMQPS||_.protocol===je.KAFKA,verify_ssl:r.verify_ssl,cloud_events:r.cloud_events,amqp_exchange:r.amqp_exchange,ack_level:r.ack_level,use_ssl:r.use_ssl,kafka_brokers:r.kafka_brokers})}convertUrlToObject(t){const o=new URL(t);return{protocol:o.protocol,hostname:o.hostname,pathname:o.pathname,hash:o.hash,port:this.getPortFromUrl(t),username:o.username,password:o.password}}getPortFromUrl(t){const o=new URL(t);let _=o.port;return _||(_=o.protocol===je.HTTPS?et.HTTPS:o.protocol===je.HTTP?et.HTTP:""),_}extractAdditionalValues(t){let o={};return t.split("&").forEach(a=>{let[r,s]=a.split("=");r&&s&&(o[r]=s)}),o}openUrl(t){window.open(t,"_blank")}submitAction(){if(this.topicForm.invalid||this.topicForm.pending)return this.topicForm.setErrors({cdSubmitButton:!0});const t=this.editing?"Topic updated successfully":"Topic created successfully",o=this.topicForm.getRawValue(),_=this.getTopicPolicy(),a=this.generatePayload(o,_);this.rgwTopicService.create(a).subscribe({next:()=>{this.notificationService.show(w._.success,t),this.goToListView()},error:()=>this.topicForm.setErrors({cdSubmitButton:!0})})}generatePayload(t,o){const _={name:t.name,owner:t.owner,push_endpoint:t.push_endpoint,opaque_data:t.OpaqueData,persistent:t.persistent,time_to_live:t.time_to_live,max_retries:t.max_retries,retry_sleep_duration:t.retry_sleep_duration,policy:o},a=t.endpointType,r={[ce.KAFKA]:{use_ssl:t.use_ssl,ack_level:t.ack_level,kafka_brokers:t.kafka_brokers,ca_location:t.ca_location,mechanism:t.mechanism},[ce.AMQP]:{verify_ssl:t.verify_ssl,amqp_exchange:t.amqp_exchange,ack_level:t.ack_level,ca_location:t.ca_location},[ce.HTTP]:{verify_ssl:t.verify_ssl,cloud_events:t.cloud_events}};return r[a]&&Object.assign(_,r[a]),_}get attributeHelpText(){return this.selectedOption===this.hostProtocols.AMQP?"Choose the configuration settings for the AMQP connection":"Choose the configuration settings for the KAFKA connection"}goToListView(){this.router.navigate(["rgw/topic"])}clearTextArea(t,o=""){this.topicForm.get(t)?.setValue(o),this.topicForm.markAsDirty(),this.topicForm.updateValueAndValidity()}reset(){this.topicForm.patchValue({enable_ssl:!0}),this.topicForm.patchValue({port:this.port}),this.topicForm.patchValue({vhost:this.vhost})}static{this.\u0275fac=function(o){return new(o||n)(e.\u0275\u0275directiveInject(P.Ss),e.\u0275\u0275directiveInject(Mn.C),e.\u0275\u0275directiveInject(an),e.\u0275\u0275directiveInject(Rt.p),e.\u0275\u0275directiveInject(ne.J),e.\u0275\u0275directiveInject(Q.Router),e.\u0275\u0275directiveInject(Q.ActivatedRoute))}}static{this.\u0275cmp=e.\u0275\u0275defineComponent({type:n,selectors:[["cd-rgw-topic-form"]],viewQuery:function(o,_){if(1&o&&e.\u0275\u0275viewQuery(BR,5),2&o){let a;e.\u0275\u0275queryRefresh(a=e.\u0275\u0275loadQuery())&&(_.topicPolicyTextArea=a.first)}},features:[e.\u0275\u0275InheritDefinitionFeature],decls:1,vars:1,consts:()=>{let t,o,_,a,r,s,c,u,p,T,f,G,S,O,C,b,N,k,z,$,X,B,V,Z,F,I,te,J,j,ee,D,ie,W,x,de,ue,pe,me,Te,ge,Ee,le,Re,Ce,fe,Se,R,Ze,ve,Ke,qe,L,it,at,rt,lt,st,ct,dt,ut,pt,mt,Tt,gt,Ye,Et,h,yt,$t,Dt,Wt,xt,wt;return t="Type",o="This user will manage and configure the topic\u2019s settings.",_="User",a="This owner will define and control the topic\u2019s settings",r=" Configure the push endpoint parameters to send notifications. On successful creation, you'll receive the topic's unique Amazon Resource Name ",s="Loading... ",c="-- Select a Topic type --",u="" + "\ufffd0\ufffd" + " ",p="This field is required.",T="Loading... ",f="-- Select a user --",G="" + "\ufffd0\ufffd" + "",S="This field is required.",O="Enter a Topic name",C="Enter the FQDN to configure the topic's settings and behavior",b="Port",N="Enter the port number for the push endpoint",k="Specify the endpoint URL for receiving push notifications",z="A user-defined metadata added to all notifications that are triggered by the topic.",$="Time to live",X="Time limit (in seconds) for retaining notifications",B="Max retries",V="Max retries before expiring notifications",Z="Retry sleep duration",F="Controls the frequency of retrying the notifications",I="Name " + "\ufffd#5\ufffd\ufffd/#5\ufffd" + "",te=" Generate push endpoint " + "\ufffd#12\ufffd" + " Configure the endpoint URL to receive push notifications" + "\ufffd/#12\ufffd" + "",J="SSL",j=" Enabling SSL ensures that your connection is encrypted and secure. You must have a valid SSL certificate installed on your server. ",ee=" RGW Gateway hostname " + "\ufffd#25\ufffd\ufffd/#25\ufffd" + "",D=" Push endpoint " + "\ufffd#38\ufffd\ufffd/#38\ufffd" + "",ie=" Additional common attributes " + "\ufffd#46\ufffd" + "Configure additional attributes to customize the topic's behavior and settings" + "\ufffd/#46\ufffd" + "",W="Persistent",x=" Select the checkbox to ensure notifications are retried.",de=" Opaque data " + "\ufffd#57\ufffd\ufffd/#57\ufffd" + "",ue="" + "\ufffd#71\ufffd" + " " + "\ufffd0\ufffd" + "" + "\ufffd/#71\ufffd" + "" + "\ufffd#72\ufffd" + "" + "\ufffd/#72\ufffd" + "",pe="JSON formatted document",me=" Policy examples " + "\ufffd#81\ufffd" + "" + "\ufffd/#81\ufffd" + "",Te=" Policy generator " + "\ufffd#84\ufffd" + "" + "\ufffd/#84\ufffd" + "",ge=" Clear " + "\ufffd#89\ufffd" + "" + "\ufffd/#89\ufffd" + "",Ee="This field is required.",le="The name is already in use. Please choose a different one",Re="Verify SSL",Ce="Ensures that the server's SSL certificate is valid and trusted.",fe="Cloud events",Se="Captures cloud events as triggers for notifications.",R="This field is required",Ze=" Port must be a valid integer",ve="Enter the user for the push endpoint",Ke=" User " + "\ufffd#4\ufffd\ufffd/#4\ufffd" + "",qe="Enter the password for the push endpoint",L=" Password " + "\ufffd#3\ufffd\ufffd/#3\ufffd" + "",it="This field is required",at="Enter the vhost for the push endpoint",rt=" Virtual Host(vhost) " + "\ufffd#4\ufffd\ufffd/#4\ufffd" + "",lt="This field is required.",st=" " + "\ufffd0\ufffd" + " " + "\ufffd#5\ufffd" + " " + "\ufffd1\ufffd" + "" + "\ufffd/#5\ufffd" + "",ct="Use SSL",dt=" Enabling SSL encrypts communication between your Kafka client and broker, ensuring the confidentiality and integrity of your messages ",ut="The file path of the CA certificate used to verify the server",pt=" CA location " + "\ufffd#3\ufffd\ufffd/#3\ufffd" + "",mt="Name of the AMQP exchange to publish messages to; must exist on the broker",Tt=" AMQP exchange " + "\ufffd#3\ufffd\ufffd/#3\ufffd" + "",gt="Mechanism",Ye="Select the authentication mechanism to connect to the Kafka broker",Et="-- Select a KAFKA mechanism --",h="" + "\ufffd0\ufffd" + "",yt="Ack level",$t="Select the acknowledgment level to control message delivery guarantees between client and broker",Dt="-- Select the " + "\ufffd0\ufffd" + " ack level --",Wt="" + "\ufffd0\ufffd" + "",xt="Specify the address of the Kafka broker (e.g., host:9092) ",wt=" Kafka brokers " + "\ufffd#3\ufffd\ufffd/#3\ufffd" + "",[["formDir","ngForm"],["topicTypeError",""],["ownerError",""],["nameError",""],["fqdnError",""],["portError",""],["endpointError",""],["topicPolicyTextArea",""],["passwordError",""],r,s,c,u,p,T,f,G,S,I,te,J,j,ee,D,ie,W,x,de,ue,pe,me,Te,ge,Ee,le,Re,Ce,fe,Se,R,Ze,Ke,L,it,rt,lt,st,ct,dt,pt,Tt,Et,h,Dt,Wt,wt,["cdsCol","",3,"columnNumbers",4,"cdFormLoading"],["cdsCol","",3,"columnNumbers"],["name","topicForm","novalidate","",3,"formGroup"],[1,"form-header"],["cdsRow","",1,"form-item","form-item-append"],["cdsCol",""],["formControlName","endpointType","label",t,"cdRequiredField","Type","id","endpointType","helperText",o,3,"change","invalid","invalidText"],["value","null",4,"ngIf"],["value","",4,"ngIf"],[4,"ngFor","ngForOf"],["formControlName","owner","label",_,"cdRequiredField","Owner","id","owner","helperText",a,3,"invalid","invalidText"],[3,"value",4,"ngFor","ngForOf"],[4,"ngIf"],[1,"card-footer"],["wrappingClass","text-right",3,"submitActionEvent","form","submitText"],["value","null"],["value",""],["class","invalid-feedback",4,"ngIf"],[1,"invalid-feedback"],[3,"value"],["labelInputID","name","cdRequiredField","Name","helperText",O,3,"invalid","invalidText"],["cdsText","","type","text","id","name","autofocus","","formControlName","name",3,"invalid"],["cdsRow","",1,"form-item"],["cdsCol","",1,"cd-header"],["id","enable_ssl","formControlName","enable_ssl",3,"checkedChange"],["cdsCol","",3,"columnNumbers",4,"ngIf"],["labelInputID","fqdn","cdRequiredField","RGW Gateway Hostname","helperText",C,3,"invalid","invalidText"],["cdsText","","type","text","id","fqdn","placeholder","e.g., 127.0.0.1 or localhost","formControlName","fqdn",3,"change","invalid"],["id","Port","formControlName","port","cdRequiredField","Port","label",b,"helperText",N,3,"change","min","invalid","invalidText"],["cdsRow","","class","form-item form-item-append",4,"ngIf"],["labelInputID","push_endpoint","cdRequiredField","Push endpoint","helperText",k,3,"invalid","invalidText"],["cdsText","","type","text","id","push_endpoint","formControlName","push_endpoint",3,"placeholder","invalid"],["id","persistent","formControlName","persistent"],["labelInputID","opaque_data","helperText",z],["cdsText","","type","text","id","opaqueData","formControlName","OpaqueData"],["id","time_to_live","formControlName","time_to_live","label",$,"helperText",X,3,"min"],["id","max_retries","label",B,"formControlName","max_retries","helperText",V,3,"min"],["id","retry_sleep_duration","label",Z,"formControlName","retry_sleep_duration","helperText",F,3,"min"],["cdsTextArea","","row","4","cols","200","formControlName","policy","aria-label","textarea",3,"change"],["cdsRow",""],[1,"mt-1"],["cdsButton","tertiary","id","example-generator-button",3,"click"],["cdsIcon","launch","size","16",1,"cds--btn__icon"],[1,"float-end","mt-1"],["cdsButton","tertiary","id","clear-bucket-policy",3,"click"],["cdsIcon","close","size","32",1,"cds--btn__icon"],["id","verify_ssl","formControlName","verify_ssl"],["id","cloud_events","formControlName","cloud_events"],["labelInputID","User","helperText",ve],["cdsText","","type","text","id","user","formControlName","user",3,"change"],["cdsCol","",4,"ngIf"],["labelInputID","password","helperText",qe,3,"invalid","invalidText"],["cdsPassword","","type","password","autocomplete","new-password","formControlName","password",3,"change"],["labelInputID","Virtual Host(vhost)","helperText",at],["cdsText","","type","text","id","vhost","formControlName","vhost",3,"change"],[1,"form-item"],[1,"cd-header"],["cdsRow","",1,"form-item-append"],["id","use-ssl","formControlName","use_ssl"],["labelInputID","Ca-location","helperText",ut],["cdsText","","type","text","id","ca_location","formControlName","ca_location"],["labelInputID","AMQP exchange","helperText",mt],["cdsText","","type","text","id","amqp_exchange","formControlName","amqp_exchange"],["formControlName","mechanism","label",gt,"id","mechanism","helperText",Ye],["formControlName","ack_level","label",yt,"id","ack_level","helperText",$t],["labelInputID","kafka_brokers","helperText",xt],["cdsText","","type","text","id","kafka_brokers","formControlName","kafka_brokers"]]},template:function(o,_){1&o&&e.\u0275\u0275template(0,vC,30,26,"div",56),2&o&&e.\u0275\u0275property("cdFormLoading",_.loading)},dependencies:[E.NgForOf,E.NgIf,_e.e,ae.O,Ct.B,ft.G,Y.S,oe.E,Qe.P,l.\u0275NgNoValidate,l.NgSelectOption,l.\u0275NgSelectMultipleOption,l.DefaultValueAccessor,l.NgControlStatus,l.NgControlStatusGroup,l.FormGroupDirective,l.FormControlName,d.ColumnDirective,d.RowDirective,d.Button,d.ButtonSet,d.IconDirective,d.TextareaLabelComponent,d.TextInputLabelComponent,d.PasswordInputLabelComponent,d.TextInput,d.TextArea,d.PasswordInput,d.Checkbox,d.NumberComponent,d.Select,d.Option,E.TitleCasePipe,Ie.r]})}}return n})(),Oo=(()=>{class n{constructor(t){this.iconService=t,this.iconService.registerAll([Ag,hg,vg,bg,Lg,yg.A,$g,Dg,Wg.A,xg,wg,Ug])}static{this.\u0275fac=function(o){return new(o||n)(e.\u0275\u0275inject(d.IconService))}}static{this.\u0275mod=e.\u0275\u0275defineNgModule({type:n})}static{this.\u0275inj=e.\u0275\u0275defineInjector({providers:[E.TitleCasePipe],imports:[E.CommonModule,kg._,bo.G,l.FormsModule,l.ReactiveFormsModule.withConfig({callSetDisabledState:"whenDisabledForLegacyCode"}),vo.d,v.NgbNavModule,Q.RouterModule,v.NgbTooltipModule,v.NgbPopoverModule,Go.Y,d.TreeviewModule,Cm.h,PT.W,v.NgbTypeaheadModule,d.ModalModule,d.GridModule,d.ProgressIndicatorModule,d.CodeSnippetModule,d.ButtonModule,d.LoadingModule,d.IconModule,v.NgbProgressbar,d.InputModule,d.AccordionModule,d.CheckboxModule,d.NumberModule,d.TabsModule,d.TagModule,d.TooltipModule,d.ComboBoxModule,d.ToggletipModule,d.RadioModule,d.SelectModule,d.LayoutModule]})}}return n})();const yC=[{path:"",redirectTo:"rbd",pathMatch:"full"},{path:"daemon",component:ml,data:{breadcrumbs:"Gateways"}},{path:"user",data:{breadcrumbs:"Users"},children:[{path:"",component:nd},{path:P.Qp.CREATE,component:to,data:{breadcrumbs:P.yY.CREATE}},{path:`${P.Qp.EDIT}/:uid`,component:to,data:{breadcrumbs:P.yY.EDIT}}]},{path:"accounts",data:{breadcrumbs:"Accounts"},children:[{path:"",component:Vg},{path:P.Qp.CREATE,component:So,data:{breadcrumbs:P.yY.CREATE}},{path:`${P.Qp.EDIT}/:id`,component:So,data:{breadcrumbs:P.yY.EDIT}}]},{path:"roles",data:{breadcrumbs:"Roles",resource:"api.rgw.roles@1.0",tabs:[{name:"Users",url:"/rgw/user"},{name:"Accounts",url:"/rgw/accounts"},{name:"Roles",url:"/rgw/roles"}]},children:[{path:"",component:No.M},{path:P.Qp.CREATE,component:uo.u,data:{breadcrumbs:P.yY.CREATE}},{path:P.Qp.EDIT,component:uo.u,data:{breadcrumbs:P.yY.EDIT}}]},{path:"bucket",data:{breadcrumbs:"Buckets"},children:[{path:"",component:Jr},{path:P.Qp.CREATE,component:Pn,data:{breadcrumbs:P.yY.CREATE}},{path:`${P.Qp.EDIT}/:bid/:owner`,component:Pn,data:{breadcrumbs:P.yY.EDIT}}]},{path:"overview",data:{breadcrumbs:"Overview"},children:[{path:"",component:MT}]},{path:"multisite",data:{breadcrumbs:"Multi-site"},children:[{path:"",redirectTo:"configuration",pathMatch:"full"},{path:"configuration",component:Rm,data:{breadcrumbs:"Configuration"},children:[{path:"setup-multisite-replication",component:ro,outlet:"modal"}]},{path:"sync-policy",component:co,data:{breadcrumbs:"Sync-policy"},children:[{path:`${P.Qp.CREATE}`,component:En,outlet:"modal"},{path:`${P.Qp.EDIT}/:groupName`,component:En,outlet:"modal"},{path:`${P.Qp.EDIT}/:groupName/:bucketName`,component:En,outlet:"modal"}]}]},{path:"tiering",data:{breadcrumbs:"Tiering"},children:[{path:"",component:Ng},{path:P.Qp.CREATE,component:Mo,data:{breadcrumbs:P.yY.CREATE}},{path:`${P.Qp.EDIT}/:zonegroup_name/:placement_target/:storage_class`,component:Mo,data:{breadcrumbs:P.yY.EDIT}}]},{path:"nfs",canActivateChild:[Ao.k,ho.x],data:{moduleStatusGuardConfig:{uiApiPath:"nfs-ganesha",redirectTo:"error",section:"nfs-ganesha",section_info:"NFS GANESHA",header:"NFS-Ganesha is not configured"},breadcrumbs:"NFS"},children:[{path:"",component:$R.$},{path:P.Qp.CREATE,component:go.B,data:{breadcrumbs:P.yY.CREATE}},{path:`${P.Qp.EDIT}/:cluster_id/:export_id`,component:go.B,data:{breadcrumbs:P.yY.EDIT}}]},{path:"configuration",data:{breadcrumbs:"Configuration"},children:[{path:"",component:lg}]},{path:"topic",data:{breadcrumbs:"Topic"},children:[{path:"",component:kR},{path:P.Qp.CREATE,component:Io,data:{breadcrumbs:P.yY.CREATE}},{path:`${P.Qp.EDIT}/:name`,component:Io,data:{breadcrumbs:P.yY.EDIT}}]}];let $C=(()=>{class n{static{this.\u0275fac=function(o){return new(o||n)}}static{this.\u0275mod=e.\u0275\u0275defineNgModule({type:n})}static{this.\u0275inj=e.\u0275\u0275defineInjector({imports:[Oo,Q.RouterModule.forChild(yC)]})}}return n})()}}]);