(self.webpackChunkceph_dashboard=self.webpackChunkceph_dashboard||[]).push([[1095],{81095:(O,f,p)=>{p.r(f),p.d(f,{BLOCKUI_DEFAULT:()=>c,BlockUI:()=>D,BlockUIComponent:()=>B,BlockUIContentComponent:()=>u,BlockUIDirective:()=>R,BlockUIModule:()=>_,BlockUIService:()=>h});var s=p(87536),m=p(91974),I=p(95631);const g=["templateOutlet"],U=t=>({active:t});function C(t,l){if(1&t&&(s.\u0275\u0275elementStart(0,"div",7),s.\u0275\u0275text(1),s.\u0275\u0275elementEnd()),2&t){const e=s.\u0275\u0275nextContext(2);s.\u0275\u0275advance(),s.\u0275\u0275textInterpolate1(" ",e.message||e.defaultMessage," ")}}function S(t,l){if(1&t&&(s.\u0275\u0275elementStart(0,"div",4),s.\u0275\u0275element(1,"div",5),s.\u0275\u0275template(2,C,2,1,"div",6),s.\u0275\u0275elementEnd()),2&t){const e=s.\u0275\u0275nextContext();s.\u0275\u0275advance(2),s.\u0275\u0275property("ngIf",e.message||e.defaultMessage)}}function v(t,l){}function y(t,l){1&t&&s.\u0275\u0275template(0,v,0,0,"ng-template",null,0,s.\u0275\u0275templateRefExtractor)}const T=["*"],c="block-ui-main";let a=(()=>{class t{}return t.START="start",t.STOP="stop",t.UPDATE="update",t.RESET="reset",t.RESET_GLOBAL="reset_global",t.UNSUBSCRIBE="unsubscribe",t})(),r=(()=>{class t{constructor(){this.blockUISettings={},this.blockUIInstances={},this.blockUISubject=new I.ReplaySubject(1),this.blockUIObservable=this.blockUISubject.asObservable(),this.blockUIObservable.subscribe(this.blockUIMiddleware.bind(this))}getSettings(){return this.blockUISettings}updateSettings(e={}){this.blockUISettings={...this.blockUISettings,...e}}decorate(e=c){const o={name:e,isActive:!1,blockCount:0,start:this.dispatch(this.blockUISubject,a.START,e),update:this.dispatch(this.blockUISubject,a.UPDATE,e),stop:this.dispatch(this.blockUISubject,a.STOP,e),reset:this.dispatch(this.blockUISubject,a.RESET,e),resetGlobal:this.dispatch(this.blockUISubject,a.RESET_GLOBAL,e),unsubscribe:this.dispatch(this.blockUISubject,a.UNSUBSCRIBE,e)};return this.blockUIInstances[e]=this.blockUIInstances[e]||o,o}observe(){return this.blockUIObservable}clearInstance(e){this.dispatch(this.blockUISubject,a.RESET,e)}blockUIMiddleware({action:e,name:o}){let n=null;switch(e){case a.START:n=!0;break;case a.STOP:case a.RESET:n=!1}null!==n&&(this.blockUIInstances[o].isActive=n)}dispatch(e,o,n=c){return i=>{e.next({name:n,action:o,message:i})}}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=s.\u0275\u0275defineInjectable({token:t,factory:t.\u0275fac}),t})(),u=(()=>{class t{constructor(e,o,n){this.blockUI=e,this.resolver=o,this.changeDetectionRef=n,this.name=c,this.defaultBlockState={startTimeouts:[],stopTimeouts:[],updateTimeouts:[],blockCount:0,startCallCount:0,stopCallCount:0},this.state={...this.defaultBlockState}}ngOnInit(){this.settings=this.blockUI.getSettings(),this.blockUISubscription=this.subscribeToBlockUI(this.blockUI.observe())}ngAfterViewInit(){try{if(!this.templateCmp)return!1;if(this.templateCmp instanceof s.TemplateRef)this.templateOutlet.createEmbeddedView(this.templateCmp);else{const e=this.resolver.resolveComponentFactory(this.templateCmp);this.templateCompRef=this.templateOutlet.createComponent(e),this.updateBlockTemplate(this.message)}}catch(e){console.error("ng-block-ui:",e)}}ngAfterViewChecked(){this.detectChanges()}subscribeToBlockUI(e){return e.subscribe(o=>this.onDispatchedEvent(o))}onDispatchedEvent(e){switch(e.action){case a.START:this.onStart(e);break;case a.STOP:this.onStop(e);break;case a.UPDATE:this.onUpdate(e);break;case a.RESET:this.onReset(e);break;case a.RESET_GLOBAL:this.resetState();break;case a.UNSUBSCRIBE:this.onStop(e),this.onUnsubscribe(e.name)}}onStart({name:e,message:o}){if(e===this.name){const n=this.delayStart??this.settings.delayStart??0;this.state.startCallCount+=1;const i=setTimeout(()=>{this.state.blockCount+=1,this.showBlock(o),this.updateInstanceBlockCount()},n);this.state.startTimeouts.push(i)}}onStop({name:e}){if(e===this.name){const o=this.state.stopCallCount+1;if(this.state.startCallCount-o>=0){const n=this.delayStop??this.settings.delayStop??0;this.state.stopCallCount=o;const i=setTimeout(()=>{this.state.blockCount-=1,this.updateInstanceBlockCount(),this.detectChanges()},n);this.state.stopTimeouts.push(i)}}}onUpdate({name:e,message:o}){if(e===this.name){const n=this.delayStart||this.settings.delayStart||0;clearTimeout(this.state.updateTimeouts[0]);const i=setTimeout(()=>{this.updateMessage(o)},n);this.state.updateTimeouts.push(i)}}onReset({name:e}){e===this.name&&this.resetState()}updateMessage(e){this.showBlock(e)}showBlock(e){this.message=e||this.defaultMessage||this.settings.message,this.updateBlockTemplate(this.message),this.detectChanges()}updateBlockTemplate(e){this.templateCompRef&&this.templateCompRef instanceof s.ComponentRef&&(this.templateCompRef.instance.message=e)}resetState(){[...this.state.startTimeouts,...this.state.stopTimeouts,...this.state.updateTimeouts].forEach(clearTimeout),this.state={...this.defaultBlockState},this.updateInstanceBlockCount(),this.detectChanges()}onUnsubscribe(e){this.blockUISubscription&&e===this.name&&this.blockUISubscription.unsubscribe()}updateInstanceBlockCount(){if(this.blockUI.blockUIInstances[this.name]){const{blockCount:e}=this.state;this.blockUI.blockUIInstances[this.name].blockCount=e}}detectChanges(){this.changeDetectionRef.destroyed||this.changeDetectionRef.detectChanges()}ngOnDestroy(){this.resetState(),this.onUnsubscribe(this.name),this.blockUI.clearInstance(this.name)}}return t.\u0275fac=function(e){return new(e||t)(s.\u0275\u0275directiveInject(r),s.\u0275\u0275directiveInject(s.ComponentFactoryResolver),s.\u0275\u0275directiveInject(s.ChangeDetectorRef))},t.\u0275cmp=s.\u0275\u0275defineComponent({type:t,selectors:[["block-ui-content"]],viewQuery:function(e,o){if(1&e&&s.\u0275\u0275viewQuery(g,5,s.ViewContainerRef),2&e){let n;s.\u0275\u0275queryRefresh(n=s.\u0275\u0275loadQuery())&&(o.templateOutlet=n.first)}},inputs:{name:"name",delayStart:"delayStart",delayStop:"delayStop",defaultMessage:[0,"message","defaultMessage"],templateCmp:[0,"template","templateCmp"]},decls:3,vars:9,consts:[["templateOutlet",""],[3,"ngClass"],["class","block-ui-spinner",4,"ngIf"],[4,"ngIf"],[1,"block-ui-spinner"],[1,"loader"],["class","message",4,"ngIf"],[1,"message"]],template:function(e,o){1&e&&(s.\u0275\u0275elementStart(0,"div",1),s.\u0275\u0275template(1,S,3,1,"div",2)(2,y,2,0,null,3),s.\u0275\u0275elementEnd()),2&e&&(s.\u0275\u0275classMapInterpolate2("block-ui-wrapper ",o.name," ",o.className,""),s.\u0275\u0275property("ngClass",s.\u0275\u0275pureFunction1(7,U,o.state.blockCount>0)),s.\u0275\u0275advance(),s.\u0275\u0275property("ngIf",!o.templateCmp),s.\u0275\u0275advance(),s.\u0275\u0275property("ngIf",o.templateCmp))},dependencies:[m.NgClass,m.NgIf],styles:[".block-ui-wrapper{display:none;position:fixed;height:100%;width:100%;top:0;left:0;background:rgba(0,0,0,.7);z-index:30000;cursor:wait}.block-ui-wrapper.block-ui-wrapper--element{position:absolute}.block-ui-wrapper.active{display:block}.block-ui-wrapper.block-ui-main{position:fixed}.block-ui-spinner,.block-ui-template{position:absolute;top:40%;margin:0 auto;left:0;right:0;transform:translateY(-50%)}.block-ui-spinner>.message{font-size:1.3em;text-align:center;color:#fff}.block-ui__element{position:relative}.loader,.loader:after{border-radius:50%;width:10em;height:10em}.loader{margin:7px auto;font-size:5px;position:relative;text-indent:-9999em;border-top:1.1em solid rgba(255,255,255,.2);border-right:1.1em solid rgba(255,255,255,.2);border-bottom:1.1em solid rgba(255,255,255,.2);border-left:1.1em solid #ffffff;transform:translateZ(0);animation:load8 1.1s infinite linear}@keyframes load8{0%{transform:rotate(0)}to{transform:rotate(360deg)}}\n"],encapsulation:2}),t})(),B=(()=>{class t{constructor(e){this.blockUI=e}ngOnInit(){this.name=this.name||c,this.template=this.template||this.blockUI.blockUISettings.template}}return t.\u0275fac=function(e){return new(e||t)(s.\u0275\u0275directiveInject(r))},t.\u0275cmp=s.\u0275\u0275defineComponent({type:t,selectors:[["block-ui"]],inputs:{name:"name",message:"message",delayStart:"delayStart",delayStop:"delayStop",template:"template"},ngContentSelectors:T,decls:2,vars:5,consts:[[3,"name","message","template","delayStart","delayStop"]],template:function(e,o){1&e&&(s.\u0275\u0275projectionDef(),s.\u0275\u0275projection(0),s.\u0275\u0275element(1,"block-ui-content",0)),2&e&&(s.\u0275\u0275advance(),s.\u0275\u0275property("name",o.name)("message",o.message)("template",o.template)("delayStart",o.delayStart)("delayStop",o.delayStop))},dependencies:[u],encapsulation:2}),t})(),h=(()=>{class t{constructor(e){this.blockUIInstance=e,this.globalDispatch=this.blockUIInstance.decorate()}start(e,o){this.dispatch(e,a.START,o)}stop(e){this.dispatch(e,a.STOP)}reset(e){this.dispatch(e,a.RESET)}resetGlobal(){this.globalDispatch.resetGlobal()}update(e,o){this.dispatch(e,a.UPDATE,o)}unsubscribe(e){this.dispatch(e,a.UNSUBSCRIBE)}isActive(e=null){const o=e?this.toArray(e):null,n=this.blockUIInstance.blockUIInstances;return Object.keys(n).some(i=>o?o.indexOf(n[i].name)>=0&&n[i].isActive:n[i].isActive)}dispatch(e=[],o,n){this.toArray(e).forEach(b=>this.blockUIInstance.decorate(b)[o](n))}toArray(e=[]){return"string"==typeof e?[e]:e}}return t.\u0275fac=function(e){return new(e||t)(s.\u0275\u0275inject(r))},t.\u0275prov=s.\u0275\u0275defineInjectable({token:t,factory:t.\u0275fac}),t})(),R=(()=>{class t{constructor(e,o,n,i,b,M){this.blockUIService=e,this.blockUIInstanceService=o,this.viewRef=n,this.templateRef=i,this.renderer=b,this.componentFactoryResolver=M}set blockUI(e){this.blockTarget=e}set blockUIMessage(e){this.message=e}set blockUITemplate(e){this.template=e}set blockUIDelayStart(e){this.delayStart=e?Number(e):null}set blockUIDelayStop(e){this.delayStop=e?Number(e):null}ngOnInit(){try{this.viewRef.createEmbeddedView(this.templateRef);const e=this.getParentElement();if(e&&!this.isComponentInTemplate(e)){this.renderer.addClass(e,"block-ui__element"),this.blockUIComponentRef=this.createComponent();let o=this.findContentNode(this.viewRef.element.nativeElement);if(o){const n=this.blockUIInstanceService.getSettings();e.appendChild(o),this.blockUIComponentRef.instance.className="block-ui-wrapper--element",this.blockUIComponentRef.instance.name=this.blockTarget||c,this.message&&(this.blockUIComponentRef.instance.defaultMessage=this.message),this.delayStart&&(this.blockUIComponentRef.instance.delayStart=this.delayStart),this.delayStop&&(this.blockUIComponentRef.instance.delayStop=this.delayStop),(this.template||n.template)&&(this.blockUIComponentRef.instance.templateCmp=this.template||n.template)}}}catch(e){console.error("ng-block-ui:",e)}}isComponentInTemplate(e){const o=e||{};let{children:n}=o;return n=Array.from(n||[]).reverse(),n.some(i=>i&&"block-ui"===i.localName)}getParentElement(){return this.viewRef.get(0).rootNodes[0]}findContentNode(e){const o=e.nextSibling||{},n=e.previousSibling||{};return[o,o.nextSibling,n,n.previousSibling].find(i=>i&&"block-ui-content"===i.localName)}createComponent(){const e=this.componentFactoryResolver.resolveComponentFactory(u);return this.viewRef.createComponent(e)}ngOnDestroy(){this.blockTarget&&this.blockUIService.reset(this.blockTarget)}}return t.\u0275fac=function(e){return new(e||t)(s.\u0275\u0275directiveInject(h),s.\u0275\u0275directiveInject(r),s.\u0275\u0275directiveInject(s.ViewContainerRef),s.\u0275\u0275directiveInject(s.TemplateRef),s.\u0275\u0275directiveInject(s.Renderer2),s.\u0275\u0275directiveInject(s.ComponentFactoryResolver))},t.\u0275dir=s.\u0275\u0275defineDirective({type:t,selectors:[["","blockUI",""]],inputs:{blockUI:"blockUI",blockUIMessage:"blockUIMessage",blockUITemplate:"blockUITemplate",blockUIDelayStart:"blockUIDelayStart",blockUIDelayStop:"blockUIDelayStop"}}),t})();const d=new r,k=new s.InjectionToken("BlockUIModuleSettings");function w(t){return d.updateSettings(t),d}let _=(()=>{class t{static forRoot(e={}){return{ngModule:t,providers:[{provide:k,useValue:e},{provide:r,useFactory:w,deps:[k]},h]}}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=s.\u0275\u0275defineNgModule({type:t}),t.\u0275inj=s.\u0275\u0275defineInjector({imports:[m.CommonModule]}),t})(),E=1;function D(t,l={}){return l.scopeToInstance?function(e,o){const n=`_${o}-block-ui`;Object.defineProperty(e,o,{get:function(){if(this[n])return this[n];const i=`${t}-${E++}`;return this[n]=d.decorate(i),this[n]},set:function(i){this[n]=i}})}:function(e,o){e[o]=d.decorate(t)}}}}]);