(self.webpackChunkceph_dashboard=self.webpackChunkceph_dashboard||[]).push([[5269],{45269:(H,p,a)=>{a.r(p),a.d(p,{TreeNodeComponent:()=>g,TreeViewComponent:()=>K,TreeViewService:()=>d,TreeviewModule:()=>Q});var e=a(87536),s=a(91974),_=a(98920),u=a(95631);const m=["*"],h=(n,o,t,i,l,r)=>({"cds--tree-node--active":n,"cds--tree-node--disabled":o,"cds--tree-node--selected":t,"cds--tree-leaf-node":i,"cds--tree-parent-node":l,"cds--tree-node--with-icon":r}),c=n=>({$implicit:n}),f=n=>({"cds--tree-parent-node__toggle-icon--expanded":n});function v(n,o){if(1&n&&(e.\u0275\u0275elementContainerStart(0),e.\u0275\u0275namespaceSVG(),e.\u0275\u0275element(1,"svg",7),e.\u0275\u0275elementContainerEnd()),2&n){const t=e.\u0275\u0275nextContext(2);e.\u0275\u0275advance(),e.\u0275\u0275property("cdsIcon",t.icon)}}function C(n,o){}function b(n,o){if(1&n&&e.\u0275\u0275template(0,C,0,0,"ng-template",8),2&n){const t=e.\u0275\u0275nextContext(2);e.\u0275\u0275property("ngTemplateOutlet",t.icon)}}function T(n,o){if(1&n&&(e.\u0275\u0275elementContainerStart(0),e.\u0275\u0275text(1),e.\u0275\u0275elementContainerEnd()),2&n){const t=e.\u0275\u0275nextContext(2);e.\u0275\u0275advance(),e.\u0275\u0275textInterpolate(t.label)}}function x(n,o){}function w(n,o){if(1&n&&e.\u0275\u0275template(0,x,0,0,"ng-template",9),2&n){const t=e.\u0275\u0275nextContext(2);e.\u0275\u0275property("ngTemplateOutlet",t.label)("ngTemplateOutletContext",e.\u0275\u0275pureFunction1(2,c,t.labelContext))}}function y(n,o){if(1&n){const t=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"div",5),e.\u0275\u0275listener("click",function(l){e.\u0275\u0275restoreView(t);const r=e.\u0275\u0275nextContext();return e.\u0275\u0275resetView(r.nodeClick(l))}),e.\u0275\u0275template(1,v,2,1,"ng-container",6)(2,b,1,1,null,6)(3,T,2,1,"ng-container",6)(4,w,1,4,null,6),e.\u0275\u0275elementEnd()}if(2&n){const t=e.\u0275\u0275nextContext();e.\u0275\u0275styleProp("padding-inline-start",t.offset,"rem")("margin-inline-start",-t.offset,"rem"),e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf",t.icon&&!t.isTemplate(t.icon)),e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf",t.isTemplate(t.icon)),e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf",!t.isTemplate(t.label)),e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf",t.isTemplate(t.label))}}function E(n,o){if(1&n&&(e.\u0275\u0275elementContainerStart(0),e.\u0275\u0275namespaceSVG(),e.\u0275\u0275element(1,"svg",7),e.\u0275\u0275elementContainerEnd()),2&n){const t=e.\u0275\u0275nextContext(2);e.\u0275\u0275advance(),e.\u0275\u0275property("cdsIcon",t.icon)}}function N(n,o){}function S(n,o){if(1&n&&e.\u0275\u0275template(0,N,0,0,"ng-template",9),2&n){const t=e.\u0275\u0275nextContext(2);e.\u0275\u0275property("ngTemplateOutlet",t.icon)("ngTemplateOutletContext",e.\u0275\u0275pureFunction1(2,c,t.iconContext))}}function I(n,o){if(1&n&&(e.\u0275\u0275elementContainerStart(0),e.\u0275\u0275text(1),e.\u0275\u0275elementContainerEnd()),2&n){const t=e.\u0275\u0275nextContext(2);e.\u0275\u0275advance(),e.\u0275\u0275textInterpolate(t.label)}}function V(n,o){}function O(n,o){if(1&n&&e.\u0275\u0275template(0,V,0,0,"ng-template",9),2&n){const t=e.\u0275\u0275nextContext(2);e.\u0275\u0275property("ngTemplateOutlet",t.label)("ngTemplateOutletContext",e.\u0275\u0275pureFunction1(2,c,t.labelContext))}}function k(n,o){if(1&n){const t=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"div",10),e.\u0275\u0275listener("click",function(l){e.\u0275\u0275restoreView(t);const r=e.\u0275\u0275nextContext();return e.\u0275\u0275resetView(r.nodeClick(l))}),e.\u0275\u0275elementStart(1,"span",11),e.\u0275\u0275listener("click",function(l){e.\u0275\u0275restoreView(t);const r=e.\u0275\u0275nextContext();return e.\u0275\u0275resetView(r.toggleExpanded(l))}),e.\u0275\u0275namespaceSVG(),e.\u0275\u0275element(2,"svg",12),e.\u0275\u0275elementEnd(),e.\u0275\u0275namespaceHTML(),e.\u0275\u0275elementStart(3,"span",13),e.\u0275\u0275template(4,E,2,1,"ng-container",6)(5,S,1,4,null,6)(6,I,2,1,"ng-container",6)(7,O,1,4,null,6),e.\u0275\u0275elementEnd()()}if(2&n){const t=e.\u0275\u0275nextContext();e.\u0275\u0275styleProp("padding-inline-start",t.offset,"rem")("margin-inline-start",-t.offset,"rem"),e.\u0275\u0275advance(),e.\u0275\u0275attribute("disabled",t.disabled||null),e.\u0275\u0275advance(),e.\u0275\u0275property("ngClass",e.\u0275\u0275pureFunction1(10,f,t.expanded)),e.\u0275\u0275advance(2),e.\u0275\u0275property("ngIf",t.icon&&!t.isTemplate(t.icon)),e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf",t.isTemplate(t.icon)),e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf",!t.isTemplate(t.label)),e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf",t.isTemplate(t.label))}}function j(n,o){1&n&&(e.\u0275\u0275elementContainerStart(0),e.\u0275\u0275projection(1),e.\u0275\u0275elementContainerEnd())}function F(n,o){if(1&n){const t=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"cds-tree-node",17),e.\u0275\u0275listener("nodetoggle",function(l){e.\u0275\u0275restoreView(t);const r=e.\u0275\u0275nextContext(3);return e.\u0275\u0275resetView(r.nodetoggle.emit(l))}),e.\u0275\u0275elementEnd()}if(2&n){const t=o.$implicit,i=e.\u0275\u0275nextContext(3);e.\u0275\u0275property("node",t)("depth",i.depth+1)("disabled",i.disabled)}}function M(n,o){if(1&n&&e.\u0275\u0275template(0,F,1,3,"cds-tree-node",16),2&n){const t=e.\u0275\u0275nextContext(2);e.\u0275\u0275property("ngForOf",t.children)}}function P(n,o){if(1&n&&(e.\u0275\u0275elementStart(0,"div",14),e.\u0275\u0275template(1,j,2,0,"ng-container",15)(2,M,1,1,"ng-template",null,0,e.\u0275\u0275templateRefExtractor),e.\u0275\u0275elementEnd()),2&n){const t=e.\u0275\u0275reference(3),i=e.\u0275\u0275nextContext();e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf",i.isProjected())("ngIfElse",t)}}const D=["treeWrapper"],R=(n,o)=>({"cds--tree--sm":n,"cds--tree--xs":o});function A(n,o){if(1&n&&(e.\u0275\u0275elementContainerStart(0),e.\u0275\u0275text(1),e.\u0275\u0275elementContainerEnd()),2&n){const t=e.\u0275\u0275nextContext(2);e.\u0275\u0275advance(),e.\u0275\u0275textInterpolate(t.label)}}function W(n,o){}function L(n,o){if(1&n&&e.\u0275\u0275template(0,W,0,0,"ng-template",7),2&n){const t=e.\u0275\u0275nextContext(2);e.\u0275\u0275property("ngTemplateOutlet",t.label)("ngTemplateOutletContext",e.\u0275\u0275pureFunction1(2,c,t.labelContext))}}function B(n,o){if(1&n&&(e.\u0275\u0275elementStart(0,"label",5),e.\u0275\u0275template(1,A,2,1,"ng-container",6)(2,L,1,4,null,6),e.\u0275\u0275elementEnd()),2&n){const t=e.\u0275\u0275nextContext();e.\u0275\u0275property("id",t.id),e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf",!t.isTemplate(t.label)),e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf",t.isTemplate(t.label))}}function z(n,o){1&n&&(e.\u0275\u0275elementContainerStart(0),e.\u0275\u0275projection(1),e.\u0275\u0275elementContainerEnd())}function U(n,o){if(1&n){const t=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"cds-tree-node",9),e.\u0275\u0275listener("nodetoggle",function(l){e.\u0275\u0275restoreView(t);const r=e.\u0275\u0275nextContext(2);return e.\u0275\u0275resetView(r.onNodeToggle(l))}),e.\u0275\u0275elementEnd()}2&n&&e.\u0275\u0275property("node",o.$implicit)}function $(n,o){if(1&n&&e.\u0275\u0275template(0,U,1,1,"cds-tree-node",8),2&n){const t=e.\u0275\u0275nextContext();e.\u0275\u0275property("ngForOf",t.tree)}}let d=(()=>{class n{constructor(){this.contentProjected=!0,this.isMultiSelect=!1,this.selectionSubject=new u.ReplaySubject(1),this.focusNodeSubject=new u.ReplaySubject(1),this.value=new Map,this.selectionObservable=this.selectionSubject.asObservable(),this.focusNodeObservable=this.focusNodeSubject.asObservable()}focusNode(t){this.focusNodeSubject.next(t)}selectNode(t){t&&(this.isMultiSelect||this.value.clear(),this.value.set(t.id,t),this.selectionSubject.next(this.value))}deselectNode(t){t&&(this.value.delete(t.id),this.selectionSubject.next(this.value))}deselectAllNodes(){this.value.clear(),this.selectionSubject.next(this.value)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=e.\u0275\u0275defineInjectable({token:n,factory:n.\u0275fac}),n})(),g=(()=>{class n{constructor(t){this.treeViewService=t,this.id="tree-node-"+n.treeNodeCount++,this.active=!1,this.disabled=!1,this.selectable=!0,this.expanded=!1,this.selected=!1,this.gap=0,this.children=[],this.depth=0,this.nodeFocus=new e.EventEmitter,this.nodeBlur=new e.EventEmitter,this.nodeSelect=new e.EventEmitter,this.nodetoggle=new e.EventEmitter}set node(t){this._node=t,this.id=t.id??this.id,this.active=t.active??this.active,this.disabled=t.disabled??this.disabled,this.selectable=t.selectable??this.selectable,this.expanded=t.expanded??this.expanded,this.label=t.label??this.label,this.labelContext=t.labelContext??this.labelContext,this.value=t.value??this.value,this.icon=t.icon??this.icon,this.selected=t.selected??this.selected,this.depth=t.depth??this.depth,this.gap=t.gap??this.gap,this.children=t.children??this.children,this.iconContext=t.iconText??this.iconContext}get node(){return this._node}ngAfterContentChecked(){this.offset=this.calculateOffset()}ngOnInit(){this.subscription=this.treeViewService.selectionObservable.subscribe(t=>{this.selected=this.selectable&&t.has(this.id),this.active=this.selectable&&this.selected})}ngOnDestroy(){this.subscription?.unsubscribe()}nodeClick(t){if(!this.disabled)if(t.target.parentElement.focus(),this.selectable||0===this.children.length){this.selected=!0,this.active=!0;const i={id:this.id,label:this.label,value:this.value};this.treeViewService.selectNode(i),this.nodeSelect.emit(i)}else this.toggleExpanded(t)}calculateOffset(){return this.children.length&&this.icon?this.depth+1+.5*this.depth:this.children.length?this.depth+1:this.icon?this.depth+2+.5*this.depth:this.depth+this.gap+2.5}emitFocusEvent(t){const i={id:this.id,label:this.label,value:this.value};this.nodeFocus.emit({node:i,event:t}),this.treeViewService.focusNode(i)}emitBlurEvent(t){this.nodeBlur.emit({node:{id:this.id,label:this.label,value:this.value},event:t})}toggleExpanded(t){this.disabled||(this.nodetoggle.emit({node:{id:this.id,label:this.label,value:this.value},event:t}),this.expanded=!this.expanded,t.stopPropagation())}navigateTree(t){("ArrowLeft"===t.key||"ArrowRight"===t.key||"Enter"===t.key)&&t.stopPropagation(),"ArrowLeft"===t.key&&this.expanded&&this.children&&this.toggleExpanded(t),"ArrowRight"===t.key&&!this.expanded&&this.children&&this.toggleExpanded(t),"Enter"===t.key&&(t.preventDefault(),this.nodeClick(t))}isTemplate(t){return t instanceof e.TemplateRef}isProjected(){return this.treeViewService.contentProjected}}return n.treeNodeCount=0,n.\u0275fac=function(t){return new(t||n)(e.\u0275\u0275directiveInject(d))},n.\u0275cmp=e.\u0275\u0275defineComponent({type:n,selectors:[["cds-tree-node"]],inputs:{id:"id",active:"active",disabled:"disabled",selectable:"selectable",expanded:"expanded",label:"label",labelContext:"labelContext",selected:"selected",value:"value",icon:"icon",iconContext:"iconContext",gap:"gap",children:"children",depth:"depth",node:"node"},outputs:{nodeFocus:"nodeFocus",nodeBlur:"nodeBlur",nodeSelect:"nodeSelect",nodetoggle:"nodetoggle"},ngContentSelectors:m,decls:4,vars:17,consts:[["notProjected",""],["role","treeitem",1,"cds--tree-node",3,"focus","blur","keydown","id","ngClass"],["class","cds--tree-node__label",3,"padding-inline-start","margin-inline-start","click",4,"ngIf"],["class","cds--tree-node__label","role","group",3,"padding-inline-start","margin-inline-start","click",4,"ngIf"],["role","group","class","cds--tree-node__children",4,"ngIf"],[1,"cds--tree-node__label",3,"click"],[4,"ngIf"],["size","16",1,"cds--tree-node__icon",3,"cdsIcon"],[3,"ngTemplateOutlet"],[3,"ngTemplateOutlet","ngTemplateOutletContext"],["role","group",1,"cds--tree-node__label",3,"click"],[1,"cds--tree-parent-node__toggle",3,"click"],["ibmIcon","caret--down","size","16",1,"cds--tree-parent-node__toggle-icon",3,"ngClass"],[1,"cds--tree-node__label__details"],["role","group",1,"cds--tree-node__children"],[4,"ngIf","ngIfElse"],[3,"node","depth","disabled","nodetoggle",4,"ngFor","ngForOf"],[3,"nodetoggle","node","depth","disabled"]],template:function(t,i){1&t&&(e.\u0275\u0275projectionDef(),e.\u0275\u0275elementStart(0,"div",1),e.\u0275\u0275listener("focus",function(r){return i.emitFocusEvent(r)})("blur",function(r){return i.emitBlurEvent(r)})("keydown",function(r){return i.navigateTree(r)}),e.\u0275\u0275template(1,y,5,8,"div",2)(2,k,8,12,"div",3)(3,P,4,2,"div",4),e.\u0275\u0275elementEnd()),2&t&&(e.\u0275\u0275property("id",i.id)("ngClass",e.\u0275\u0275pureFunction6(10,h,i.active,i.disabled,i.selected,!i.children.length,i.children.length,i.icon)),e.\u0275\u0275attribute("aria-expanded",i.expanded||null)("aria-current",i.active||null)("aria-selected",i.disabled?null:i.selected)("aria-disabled",i.disabled)("tabindex",i.selected?0:-1),e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf",!i.children.length),e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf",i.children.length),e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf",i.expanded))},dependencies:[s.NgClass,s.NgForOf,s.NgIf,s.NgTemplateOutlet,_.IconDirective,n],encapsulation:2}),n})(),K=(()=>{class n{constructor(t,i,l){this.document=t,this.treeViewService=i,this.elementRef=l,this.id="tree-view-"+n.treeViewCount++,this.size="sm",this.select=new e.EventEmitter,this.toggle=new e.EventEmitter,this._tree=[]}set tree(t){this._tree=t.map(i=>this.copyNode(i)),this.treeViewService.contentProjected=!1}get tree(){return this._tree}set isMultiSelect(t){this.treeViewService.isMultiSelect=t}ngOnInit(){this.subscription=this.treeViewService.selectionObservable.subscribe(t=>{const i=[...t.values()];this.select.emit(this.treeViewService.isMultiSelect?i:i[0])}),this.subscription.add(this.treeViewService.focusNodeObservable.subscribe(t=>this.onNodeFocusChange(t)))}ngOnDestroy(){this.subscription.unsubscribe()}ngAfterViewInit(){this.treeWalker=this.document.createTreeWalker(this.root.nativeElement,NodeFilter.SHOW_ELEMENT,{acceptNode:function(t){return t.classList.contains("cds--tree-node--disabled")?NodeFilter.FILTER_REJECT:t.matches("div.cds--tree-node")?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}})}navigateTree(t){"ArrowUp"===t.key&&this.treeWalker.previousNode()?.focus(),"ArrowDown"===t.key&&this.treeWalker.nextNode()?.focus()}onNodeToggle(t){t&&this.toggle.emit(t.node)}onNodeFocusChange(t){this.treeWalker.currentNode=t?this.elementRef.nativeElement.querySelector(`#${CSS.escape(t.id)}`):this.treeWalker.root}isTemplate(t){return t instanceof e.TemplateRef}isProjected(){return this.treeViewService.contentProjected}copyNode(t){const i=Object.assign({},t);return t.children&&(i.children=t.children.map(l=>this.copyNode(l))),i}}return n.treeViewCount=0,n.\u0275fac=function(t){return new(t||n)(e.\u0275\u0275directiveInject(s.DOCUMENT),e.\u0275\u0275directiveInject(d),e.\u0275\u0275directiveInject(e.ElementRef))},n.\u0275cmp=e.\u0275\u0275defineComponent({type:n,selectors:[["cds-tree-view"]],viewQuery:function(t,i){if(1&t&&e.\u0275\u0275viewQuery(D,5),2&t){let l;e.\u0275\u0275queryRefresh(l=e.\u0275\u0275loadQuery())&&(i.root=l.first)}},inputs:{tree:"tree",id:"id",label:"label",labelContext:"labelContext",size:"size",isMultiSelect:"isMultiSelect"},outputs:{select:"select",toggle:"toggle"},features:[e.\u0275\u0275ProvidersFeature([d])],ngContentSelectors:m,decls:6,vars:10,consts:[["treeWrapper",""],["notProjected",""],["class","cds--label",3,"id",4,"ngIf"],["role","tree",1,"cds--tree",3,"keydown","ngClass"],[4,"ngIf","ngIfElse"],[1,"cds--label",3,"id"],[4,"ngIf"],[3,"ngTemplateOutlet","ngTemplateOutletContext"],[3,"node","nodetoggle",4,"ngFor","ngForOf"],[3,"nodetoggle","node"]],template:function(t,i){if(1&t){const l=e.\u0275\u0275getCurrentView();e.\u0275\u0275projectionDef(),e.\u0275\u0275template(0,B,3,3,"label",2),e.\u0275\u0275elementStart(1,"div",3,0),e.\u0275\u0275listener("keydown",function(G){return e.\u0275\u0275restoreView(l),e.\u0275\u0275resetView(i.navigateTree(G))}),e.\u0275\u0275template(3,z,2,0,"ng-container",4)(4,$,1,1,"ng-template",null,1,e.\u0275\u0275templateRefExtractor),e.\u0275\u0275elementEnd()}if(2&t){const l=e.\u0275\u0275reference(5);e.\u0275\u0275property("ngIf",i.label),e.\u0275\u0275advance(),e.\u0275\u0275property("ngClass",e.\u0275\u0275pureFunction2(7,R,"sm"===i.size,"xs"===i.size)),e.\u0275\u0275attribute("aria-label",i.label?i.label:null)("aria-labelledby",i.label?null:i.id)("aria-multiselectable",i.isMultiSelect||null),e.\u0275\u0275advance(2),e.\u0275\u0275property("ngIf",i.isProjected())("ngIfElse",l)}},dependencies:[s.NgClass,s.NgForOf,s.NgIf,s.NgTemplateOutlet,g],encapsulation:2}),n})(),Q=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=e.\u0275\u0275defineNgModule({type:n}),n.\u0275inj=e.\u0275\u0275defineInjector({imports:[s.CommonModule,_.IconModule]}),n})()}}]);