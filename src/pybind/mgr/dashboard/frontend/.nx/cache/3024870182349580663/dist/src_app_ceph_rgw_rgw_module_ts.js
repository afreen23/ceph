(self.webpackChunkceph_dashboard=self.webpackChunkceph_dashboard||[]).push([["src_app_ceph_rgw_rgw_module_ts"],{73691:($C,Oo,T)=>{T.r(Oo),T.d(Oo,{RgwModule:()=>on,RoutedRgwModule:()=>lo});var Ae,o,dn,un,Me,g=T(91974),l=T(53648),Y=T(76218),b=T(77317),p_=T(13421),M=T(54372),m_=T(19907),T_=T(1811),g_=T(6955),E_=T(93887),R_=T(44128),e=T(87536),Lt=T(29841),N=T.n(Lt),w=T(95631),Go=T(53501),Le=T(29729),No=T(59876),Rt=T(28284),L=T(46045),x=T(88285),tt=T(74902),Ne=T(43808),F=T(3687),te=T(88701);(o=Ae||(Ae={})).VAULT="vault",o.KMIP="kmip",function(o){o.Token="token",o.Agent="agent"}(dn||(dn={})),function(o){o.KV="kv",o.Transit="transit"}(un||(un={})),function(o){o.SSE_S3="s3",o.SSE_KMS="kms"}(Me||(Me={}));const pn={kmsProviders:[Ae.VAULT,Ae.KMIP],authMethods:[dn.Token,dn.Agent],secretEngines:[un.KV,un.Transit]};var yt,Se,Pe,$t;!function(o){o.ENABLED="Enabled",o.DISABLED="Disabled"}(yt||(yt={})),function(o){o.Read="Read",o.Write="Write",o.All="Read and write",o.FullControl="Full control"}(Se||(Se={})),function(o){o.Owner="Owner",o.Everyone="Everyone",o.AuthenticatedUsers="Authenticated Users"}(Pe||(Pe={})),function(o){o.ENABLED="Enabled",o.SUSPENDED="Suspended"}($t||($t={}));var c=T(3600),oe=T(59781),Ct=T(23603),j=T(90476),ne=T(37966),Qe=T(51862);function C_(o,n){1&o&&(e.\u0275\u0275elementStart(0,"span",21),e.\u0275\u0275i18n(1,4),e.\u0275\u0275elementEnd())}function f_(o,n){1&o&&(e.\u0275\u0275elementStart(0,"span",21),e.\u0275\u0275i18n(1,5),e.\u0275\u0275elementEnd())}function S_(o,n){1&o&&(e.\u0275\u0275elementStart(0,"span",21),e.\u0275\u0275i18n(1,6),e.\u0275\u0275elementEnd())}function F_(o,n){if(1&o&&e.\u0275\u0275template(0,C_,2,0,"span",20)(1,f_,2,0,"span",20)(2,S_,2,0,"span",20),2&o){const t=e.\u0275\u0275nextContext(),_=e.\u0275\u0275reference(5);e.\u0275\u0275property("ngIf",t.form.showError("key",_,"required")),e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf",t.form.showError("key",_,"unique")),e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf",t.form.showError("key",_,"maxLength"))}}function M_(o,n){1&o&&(e.\u0275\u0275elementStart(0,"span",21),e.\u0275\u0275i18n(1,7),e.\u0275\u0275elementEnd())}function P_(o,n){1&o&&(e.\u0275\u0275elementStart(0,"span",21),e.\u0275\u0275i18n(1,8),e.\u0275\u0275elementEnd())}function I_(o,n){if(1&o&&e.\u0275\u0275template(0,M_,2,0,"span",20)(1,P_,2,0,"span",20),2&o){const t=e.\u0275\u0275nextContext(),_=e.\u0275\u0275reference(5);e.\u0275\u0275property("ngIf",t.form.showError("value",_,"required")),e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf",t.form.showError("value",_,"maxLength"))}}class mn extends c.BaseModal{constructor(n,t){super(),this.formBuilder=n,this.actionLabels=t,this.submitAction=new e.EventEmitter,this.editMode=!1,this.createForm()}createForm(){this.form=this.formBuilder.group({key:[null,[l.Validators.required,F.xQ.custom("unique",n=>!(N().isEmpty(n)&&!this.currentKeyTags)&&(this.storedKey!==n&&this.currentKeyTags.includes(n))),F.xQ.custom("maxLength",n=>!N().isEmpty(n)&&n.length>128)]],value:[null,[l.Validators.required,F.xQ.custom("maxLength",n=>!N().isEmpty(n)&&n.length>128)]]})}onSubmit(){this.submitAction.emit(this.form.value),this.closeModal()}getMode(){return this.editMode?this.actionLabels.EDIT:this.actionLabels.ADD}fillForm(n){this.form.setValue(n)}static{this.\u0275fac=function(t){return new(t||mn)(e.\u0275\u0275directiveInject(Ne.$),e.\u0275\u0275directiveInject(M.Ss))}}static{this.\u0275cmp=e.\u0275\u0275defineComponent({type:mn,selectors:[["cd-bucket-tag-modal"]],outputs:{submitAction:"submitAction"},features:[e.\u0275\u0275InheritDefinitionFeature],decls:20,vars:14,consts:()=>{let n,t,_,i,a,r;return n=$localize`:␟0e8ecf0fbcc22cbc7a3be36939be8704899924f1␟6201704473631697835:${"\ufffd0\ufffd"}:INTERPOLATION: Tag`,t=$localize`:␟7cbdabcece469fab89cfa687ab152bca18b97498␟1417693714872528491:This field is required.`,_=$localize`:␟efd03e842cecc9e72963190db62ec871ca17665b␟3946721671361566468:This key must be unique.`,i=$localize`:␟bee8e4d387451398912314aeb76e228c76c71eeb␟5800455314620963740:Length of the key must be maximum of 128 characters`,a=$localize`:␟7cbdabcece469fab89cfa687ab152bca18b97498␟1417693714872528491:This field is required.`,r=$localize`:␟babbe655f6eac1976625b0d5bd292fd9294bc5c7␟8636401845925423819:Length of the value must be a maximum of 128 characters`,[["formDir","ngForm"],["keyError",""],["valueError",""],n,t,_,i,a,r,["size","md",3,"overlaySelected","open","hasScrollingContent"],[3,"closeSelect"],["cdsModalHeaderHeading",""],[1,"form",3,"formGroup"],["cdsModalContent",""],[1,"form-item"],["label","Key","for","key","cdRequiredField","Key",3,"invalid","invalidText"],["cdsText","","type","text","id","key","name","key","formControlName","key","modal-primary-focus","",3,"invalid","autofocus"],["label","Value","for","value","cdRequiredField","Value",3,"invalid","invalidText"],["cdsText","","type","text","id","value","name","value","formControlName","value",3,"invalid"],[3,"submitActionEvent","form","submitText","modalForm"],["class","invalid-feedback",4,"ngIf"],[1,"invalid-feedback"]]},template:function(t,_){if(1&t){const i=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"cds-modal",9),e.\u0275\u0275listener("overlaySelected",function(){return e.\u0275\u0275restoreView(i),e.\u0275\u0275resetView(_.closeModal())}),e.\u0275\u0275elementStart(1,"cds-modal-header",10),e.\u0275\u0275listener("closeSelect",function(){return e.\u0275\u0275restoreView(i),e.\u0275\u0275resetView(_.closeModal())}),e.\u0275\u0275elementStart(2,"h3",11),e.\u0275\u0275i18n(3,3),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(4,"form",12,0)(6,"div",13)(7,"div",14)(8,"cds-text-label",15),e.\u0275\u0275text(9,"Key "),e.\u0275\u0275element(10,"input",16),e.\u0275\u0275elementEnd(),e.\u0275\u0275template(11,F_,3,3,"ng-template",null,1,e.\u0275\u0275templateRefExtractor),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(13,"div",14)(14,"cds-text-label",17),e.\u0275\u0275text(15,"Value "),e.\u0275\u0275element(16,"input",18),e.\u0275\u0275elementEnd(),e.\u0275\u0275template(17,I_,2,2,"ng-template",null,2,e.\u0275\u0275templateRefExtractor),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(19,"cd-form-button-panel",19),e.\u0275\u0275listener("submitActionEvent",function(){return e.\u0275\u0275restoreView(i),e.\u0275\u0275resetView(_.onSubmit())}),e.\u0275\u0275elementEnd()()()}if(2&t){const i=e.\u0275\u0275reference(12),a=e.\u0275\u0275reference(18);e.\u0275\u0275property("open",_.open)("hasScrollingContent",!1),e.\u0275\u0275advance(3),e.\u0275\u0275i18nExp(_.getMode()),e.\u0275\u0275i18nApply(3),e.\u0275\u0275advance(),e.\u0275\u0275property("formGroup",_.form),e.\u0275\u0275advance(4),e.\u0275\u0275property("invalid",_.form.controls.key.invalid&&_.form.controls.key.dirty)("invalidText",i),e.\u0275\u0275advance(2),e.\u0275\u0275property("invalid",_.form.controls.key.invalid&&_.form.controls.key.dirty)("autofocus",!0),e.\u0275\u0275advance(4),e.\u0275\u0275property("invalid",_.form.controls.value.invalid&&_.form.controls.value.dirty)("invalidText",a),e.\u0275\u0275advance(2),e.\u0275\u0275property("invalid",_.form.controls.value.invalid&&_.form.controls.value.dirty),e.\u0275\u0275advance(3),e.\u0275\u0275property("form",_.form)("submitText",_.getMode())("modalForm",!0)}},dependencies:[g.NgIf,oe.e,Ct.B,j.S,ne.E,Qe.P,l.\u0275NgNoValidate,l.DefaultValueAccessor,l.NgControlStatus,l.NgControlStatusGroup,l.FormGroupDirective,l.FormControlName,c.Modal,c.ModalHeader,c.ModalContent,c.ModalHeaderHeading,c.TextInputLabelComponent,c.TextInput]})}}var Ao=T(11145),xe=T(46459),ye=T(92919),Z=T(50619);class Dt{constructor(){}format(n){if(!n.nativeElement?.value)return;const t=n.nativeElement.value,i=(new DOMParser).parseFromString(t,"application/xml"),s=20*i.getElementsByTagName("*").length;n.nativeElement.style.height=s+"px",i.querySelector("parsererror")}static{this.\u0275fac=function(t){return new(t||Dt)}}static{this.\u0275prov=e.\u0275\u0275defineInjectable({token:Dt,factory:Dt.\u0275fac,providedIn:"root"})}}var we=T(12540),Ie=T(92805),ie=T(64333),so=T(33488);class Tn{constructor(n,t,_,i){this.elementRef=n,this.control=t,this.dimlessBinaryPerMinutePipe=_,this.formatter=i,this.ngModelChange=new e.EventEmitter,this.el=this.elementRef.nativeElement}ngOnInit(){this.setValue(this.el.value),this.ngDataReady&&this.ngDataReady.subscribe(()=>this.setValue(this.el.value))}setValue(n){if(""===n)return this.ngModelChange.emit(n),void this.control.control.setValue(n);/^[\d.]+$/.test(n)&&(n+=this.defaultUnit||"m");const t=this.formatter.toBytes(n,0),_=this.round(t);this.el.value=this.dimlessBinaryPerMinutePipe.transform(_),null!==t?(this.ngModelChange.emit(this.el.value),this.control.control.setValue(this.el.value)):(this.ngModelChange.emit(null),this.control.control.setValue(null))}round(n){if(null!==n&&0!==n){if(!N().isUndefined(this.minBytes)&&n<this.minBytes)return this.minBytes;if(!N().isUndefined(this.maxBytes)&&n>this.maxBytes)return this.maxBytes;if(!N().isUndefined(this.roundPower)){const t=Math.round(Math.log(n)/Math.log(this.roundPower));return Math.pow(this.roundPower,t)}}return n}onBlur(n){this.setValue(n)}static{this.\u0275fac=function(t){return new(t||Tn)(e.\u0275\u0275directiveInject(e.ElementRef),e.\u0275\u0275directiveInject(l.NgControl),e.\u0275\u0275directiveInject(so.E),e.\u0275\u0275directiveInject(we.k))}}static{this.\u0275dir=e.\u0275\u0275defineDirective({type:Tn,selectors:[["","cdDimlessBinaryPerMinute",""]],hostBindings:function(t,_){1&t&&e.\u0275\u0275listener("blur",function(a){return _.onBlur(a.target.value)})},inputs:{ngDataReady:"ngDataReady",minBytes:"minBytes",maxBytes:"maxBytes",roundPower:"roundPower",defaultUnit:"defaultUnit"},outputs:{ngModelChange:"ngModelChange"}})}}function O_(o,n){1&o&&(e.\u0275\u0275i18nStart(0,5,1),e.\u0275\u0275element(1,"cd-help-text"),e.\u0275\u0275i18nEnd())}function G_(o,n){1&o&&(e.\u0275\u0275i18nStart(0,5,2),e.\u0275\u0275element(1,"cd-help-text"),e.\u0275\u0275i18nEnd())}function N_(o,n){if(1&o&&(e.\u0275\u0275elementStart(0,"div",36),e.\u0275\u0275element(1,"div",37),e.\u0275\u0275elementStart(2,"div",38)(3,"div")(4,"cd-alert-panel",39),e.\u0275\u0275i18nStart(5,8),e.\u0275\u0275elementStart(6,"div"),e.\u0275\u0275element(7,"span",40)(8,"br"),e.\u0275\u0275pipe(9,"dimlessBinaryPerMinute"),e.\u0275\u0275element(10,"br")(11,"br"),e.\u0275\u0275pipe(12,"dimlessBinaryPerMinute"),e.\u0275\u0275element(13,"br"),e.\u0275\u0275elementEnd(),e.\u0275\u0275i18nEnd(),e.\u0275\u0275elementEnd()()()()),2&o){const t=e.\u0275\u0275nextContext(2);e.\u0275\u0275advance(13),e.\u0275\u0275i18nExp(e.\u0275\u0275pipeBind1(9,4,t.globalRateLimit.max_read_bytes))(t.globalRateLimit.max_read_ops)(e.\u0275\u0275pipeBind1(12,6,t.globalRateLimit.max_write_bytes))(t.globalRateLimit.max_write_ops),e.\u0275\u0275i18nApply(5)}}function A_(o,n){1&o&&(e.\u0275\u0275elementStart(0,"div",33)(1,"cds-checkbox",41),e.\u0275\u0275elementContainerStart(2),e.\u0275\u0275i18n(3,9),e.\u0275\u0275elementContainerEnd(),e.\u0275\u0275elementStart(4,"cd-help-text"),e.\u0275\u0275i18n(5,10),e.\u0275\u0275elementEnd()()())}function h_(o,n){1&o&&(e.\u0275\u0275elementStart(0,"span",44),e.\u0275\u0275i18n(1,11),e.\u0275\u0275elementEnd())}function b_(o,n){1&o&&(e.\u0275\u0275elementStart(0,"span",44),e.\u0275\u0275i18n(1,12),e.\u0275\u0275elementEnd())}function v_(o,n){1&o&&(e.\u0275\u0275elementStart(0,"span",44),e.\u0275\u0275i18n(1,13),e.\u0275\u0275elementEnd())}function L_(o,n){if(1&o&&e.\u0275\u0275template(0,h_,2,0,"span",43)(1,b_,2,0,"span",43)(2,v_,2,0,"span",43),2&o){e.\u0275\u0275nextContext(2);const t=e.\u0275\u0275reference(6),_=e.\u0275\u0275nextContext();e.\u0275\u0275property("ngIf",_.form.showError("rate_limit_max_readOps",t,"required")),e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf",_.form.showError("rate_limit_max_readOps",t,"rateOpsMaxSize")),e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf",_.form.showError("rate_limit_max_readOps",t,"min"))}}function y_(o,n){if(1&o&&(e.\u0275\u0275elementStart(0,"div",33),e.\u0275\u0275element(1,"cds-number",42),e.\u0275\u0275template(2,L_,3,3,"ng-template",null,1,e.\u0275\u0275templateRefExtractor),e.\u0275\u0275elementEnd()),2&o){const t=e.\u0275\u0275reference(3),_=e.\u0275\u0275nextContext(2);e.\u0275\u0275advance(),e.\u0275\u0275property("invalid",_.form.controls.rate_limit_max_readOps.invalid&&_.form.controls.rate_limit_max_readOps.dirty)("invalidText",t)}}function $_(o,n){1&o&&(e.\u0275\u0275elementStart(0,"div",33)(1,"cds-checkbox",45),e.\u0275\u0275elementContainerStart(2),e.\u0275\u0275i18n(3,14),e.\u0275\u0275elementContainerEnd(),e.\u0275\u0275elementStart(4,"cd-help-text"),e.\u0275\u0275i18n(5,15),e.\u0275\u0275elementEnd()()())}function D_(o,n){1&o&&(e.\u0275\u0275elementStart(0,"span",44),e.\u0275\u0275i18n(1,16),e.\u0275\u0275elementEnd())}function W_(o,n){1&o&&(e.\u0275\u0275elementStart(0,"span",44),e.\u0275\u0275i18n(1,17),e.\u0275\u0275elementEnd())}function x_(o,n){1&o&&(e.\u0275\u0275elementStart(0,"span",44),e.\u0275\u0275i18n(1,18),e.\u0275\u0275elementEnd())}function w_(o,n){if(1&o&&e.\u0275\u0275template(0,D_,2,0,"span",43)(1,W_,2,0,"span",43)(2,x_,2,0,"span",43),2&o){e.\u0275\u0275nextContext(2);const t=e.\u0275\u0275reference(6),_=e.\u0275\u0275nextContext();e.\u0275\u0275property("ngIf",_.form.showError("rate_limit_max_writeOps",t,"required")),e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf",_.form.showError("rate_limit_max_writeOps",t,"rateOpsMaxSize")),e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf",_.form.showError("rate_limit_max_writeOps",t,"min"))}}function U_(o,n){if(1&o&&(e.\u0275\u0275elementStart(0,"div",33),e.\u0275\u0275element(1,"cds-number",46),e.\u0275\u0275template(2,w_,3,3,"ng-template",null,2,e.\u0275\u0275templateRefExtractor),e.\u0275\u0275elementEnd()),2&o){const t=e.\u0275\u0275reference(3),_=e.\u0275\u0275nextContext(2);e.\u0275\u0275advance(),e.\u0275\u0275property("invalid",_.form.controls.rate_limit_max_writeOps.invalid&&_.form.controls.rate_limit_max_writeOps.dirty)("invalidText",t)}}function k_(o,n){1&o&&(e.\u0275\u0275elementStart(0,"div",33)(1,"cds-checkbox",47),e.\u0275\u0275elementContainerStart(2),e.\u0275\u0275i18n(3,19),e.\u0275\u0275elementContainerEnd(),e.\u0275\u0275elementStart(4,"cd-help-text"),e.\u0275\u0275i18n(5,20),e.\u0275\u0275elementEnd()()())}function z_(o,n){1&o&&(e.\u0275\u0275elementStart(0,"span",44),e.\u0275\u0275i18n(1,21),e.\u0275\u0275elementEnd())}function H_(o,n){1&o&&(e.\u0275\u0275elementStart(0,"span",44),e.\u0275\u0275i18n(1,22),e.\u0275\u0275elementEnd())}function X_(o,n){1&o&&(e.\u0275\u0275elementStart(0,"span",44),e.\u0275\u0275i18n(1,23),e.\u0275\u0275elementEnd())}function B_(o,n){if(1&o&&e.\u0275\u0275template(0,z_,2,0,"span",43)(1,H_,2,0,"span",43)(2,X_,2,0,"span",43),2&o){e.\u0275\u0275nextContext(2);const t=e.\u0275\u0275reference(6),_=e.\u0275\u0275nextContext();e.\u0275\u0275property("ngIf",_.form.showError("rate_limit_max_readBytes",t,"required")),e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf",_.form.showError("rate_limit_max_readBytes",t,"rateByteMaxSize")),e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf",_.form.showError("rate_limit_max_readBytes",t,"min"))}}function V_(o,n){if(1&o&&(e.\u0275\u0275elementStart(0,"div",33)(1,"cds-text-label",48),e.\u0275\u0275element(2,"input",49),e.\u0275\u0275elementEnd(),e.\u0275\u0275template(3,B_,3,3,"ng-template",null,3,e.\u0275\u0275templateRefExtractor),e.\u0275\u0275elementEnd()),2&o){const t=e.\u0275\u0275reference(4),_=e.\u0275\u0275nextContext(2);e.\u0275\u0275advance(),e.\u0275\u0275property("invalid",_.form.controls.rate_limit_max_readBytes.invalid&&_.form.controls.rate_limit_max_readBytes.dirty)("invalidText",t),e.\u0275\u0275advance(),e.\u0275\u0275property("invalid",_.form.controls.rate_limit_max_readBytes.invalid&&_.form.controls.rate_limit_max_readBytes.dirty)}}function Z_(o,n){1&o&&(e.\u0275\u0275elementStart(0,"div",33)(1,"cds-checkbox",50),e.\u0275\u0275elementContainerStart(2),e.\u0275\u0275i18n(3,24),e.\u0275\u0275elementContainerEnd(),e.\u0275\u0275elementStart(4,"cd-help-text"),e.\u0275\u0275i18n(5,25),e.\u0275\u0275elementEnd()()())}function K_(o,n){1&o&&(e.\u0275\u0275elementStart(0,"span",44),e.\u0275\u0275i18n(1,26),e.\u0275\u0275elementEnd())}function q_(o,n){1&o&&(e.\u0275\u0275elementStart(0,"span",44),e.\u0275\u0275i18n(1,27),e.\u0275\u0275elementEnd())}function j_(o,n){1&o&&(e.\u0275\u0275elementStart(0,"span",44),e.\u0275\u0275i18n(1,28),e.\u0275\u0275elementEnd())}function Y_(o,n){if(1&o&&e.\u0275\u0275template(0,K_,2,0,"span",43)(1,q_,2,0,"span",43)(2,j_,2,0,"span",43),2&o){e.\u0275\u0275nextContext(2);const t=e.\u0275\u0275reference(6),_=e.\u0275\u0275nextContext();e.\u0275\u0275property("ngIf",_.form.showError("rate_limit_max_readBytes",t,"required")),e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf",_.form.showError("rate_limit_max_readBytes",t,"rateByteMaxSize")),e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf",_.form.showError("rate_limit_max_readBytes",t,"min"))}}function Q_(o,n){if(1&o&&(e.\u0275\u0275elementStart(0,"div",33)(1,"cds-text-label",51),e.\u0275\u0275element(2,"input",52),e.\u0275\u0275elementEnd(),e.\u0275\u0275template(3,Y_,3,3,"ng-template",null,4,e.\u0275\u0275templateRefExtractor),e.\u0275\u0275elementEnd()),2&o){const t=e.\u0275\u0275reference(4),_=e.\u0275\u0275nextContext(2);e.\u0275\u0275advance(),e.\u0275\u0275property("invalid",_.form.controls.rate_limit_max_writeBytes.invalid&&_.form.controls.rate_limit_max_writeBytes.dirty)("invalidText",t),e.\u0275\u0275advance(),e.\u0275\u0275property("invalid",_.form.controls.rate_limit_max_writeBytes.invalid&&_.form.controls.rate_limit_max_writeBytes.dirty)}}function J_(o,n){if(1&o&&(e.\u0275\u0275elementStart(0,"fieldset")(1,"legend",30),e.\u0275\u0275i18nStart(2,5),e.\u0275\u0275template(3,O_,2,0,"cd-help-text",29)(4,G_,2,0,"cd-help-text",29),e.\u0275\u0275i18nEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(5,"form",31,0),e.\u0275\u0275template(7,N_,14,8,"div",32),e.\u0275\u0275elementStart(8,"div",33)(9,"cds-checkbox",34),e.\u0275\u0275elementContainerStart(10),e.\u0275\u0275i18n(11,6),e.\u0275\u0275elementContainerEnd(),e.\u0275\u0275elementStart(12,"cd-help-text"),e.\u0275\u0275i18n(13,7),e.\u0275\u0275elementEnd()()(),e.\u0275\u0275template(14,A_,6,0,"div",35)(15,y_,4,2,"div",35)(16,$_,6,0,"div",35)(17,U_,4,2,"div",35)(18,k_,6,0,"div",35)(19,V_,5,3,"div",35)(20,Z_,6,0,"div",35)(21,Q_,5,3,"div",35),e.\u0275\u0275elementEnd()()),2&o){const t=e.\u0275\u0275nextContext();e.\u0275\u0275advance(3),e.\u0275\u0275property("ngIf","user"===t.type),e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf","bucket"===t.type),e.\u0275\u0275advance(),e.\u0275\u0275property("formGroup",t.form),e.\u0275\u0275advance(2),e.\u0275\u0275property("ngIf",!!t.globalRateLimit&&t.globalRateLimit.enabled),e.\u0275\u0275advance(7),e.\u0275\u0275property("ngIf",t.form.controls.rate_limit_enabled.value),e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf",t.form.controls.rate_limit_enabled.value&&!t.form.getValue("rate_limit_max_readOps_unlimited")),e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf",t.form.controls.rate_limit_enabled.value),e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf",t.form.controls.rate_limit_enabled.value&&!t.form.getValue("rate_limit_max_writeOps_unlimited")),e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf",t.form.controls.rate_limit_enabled.value),e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf",t.form.controls.rate_limit_enabled.value&&!t.form.getValue("rate_limit_max_readBytes_unlimited")),e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf",t.form.controls.rate_limit_enabled.value),e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf",t.form.controls.rate_limit_enabled.value&&!t.form.getValue("rate_limit_max_writeBytes_unlimited"))}}class ft{set allowBid(n){this.bid=n,this.isEditing&&this.bid&&"bucket"==this.type&&this.getRateLimitFormValues()}constructor(n,t,_,i){this.formBuilder=n,this.rgwUserService=t,this.rgwBucketService=_,this.notificationService=i,this.formValue=new e.EventEmitter,this.rateLimitFormGroup=new e.EventEmitter}ngOnInit(){"user"===this.type?(this.rgwUserService.getGlobalUserRateLimit().subscribe(n=>{n&&void 0!==n.user_ratelimit&&(this.globalRateLimit=n.user_ratelimit)},n=>{this.notificationService.show(x._.error,n)}),this.isEditing&&this.getRateLimitFormValues()):this.rgwBucketService.getGlobalBucketRateLimit().subscribe(n=>{n&&void 0!==n.bucket_ratelimit&&(this.globalRateLimit=n.bucket_ratelimit)},n=>{this.notificationService.show(x._.error,n)}),this.form=this.formBuilder.group({rate_limit_enabled:[!1],rate_limit_max_readOps_unlimited:[!0],rate_limit_max_readOps:[null,[F.xQ.composeIf({rate_limit_enabled:!0,rate_limit_max_readOps_unlimited:!1},[l.Validators.required,this.rateLimitIopmMaxSizeValidator])]],rate_limit_max_writeOps_unlimited:[!0],rate_limit_max_writeOps:[null,[F.xQ.composeIf({rate_limit_enabled:!0,rate_limit_max_writeOps_unlimited:!1},[l.Validators.required,this.rateLimitIopmMaxSizeValidator])]],rate_limit_max_readBytes_unlimited:[!0],rate_limit_max_readBytes:[null,[F.xQ.composeIf({rate_limit_enabled:!0,rate_limit_max_readBytes_unlimited:!1},[l.Validators.required,this.rateLimitBytesMaxSizeValidator])]],rate_limit_max_writeBytes_unlimited:[!0],rate_limit_max_writeBytes:[null,[F.xQ.composeIf({rate_limit_enabled:!0,rate_limit_max_writeBytes_unlimited:!1},[l.Validators.required,this.rateLimitBytesMaxSizeValidator])]]})}populateFormValues(n){this.form.get("rate_limit_enabled").setValue(n.enabled),this._setRateLimitProperty("rate_limit_max_readBytes","rate_limit_max_readBytes_unlimited",n.max_read_bytes),this._setRateLimitProperty("rate_limit_max_writeBytes","rate_limit_max_writeBytes_unlimited",n.max_write_bytes),this._setRateLimitProperty("rate_limit_max_readOps","rate_limit_max_readOps_unlimited",n.max_read_ops),this._setRateLimitProperty("rate_limit_max_writeOps","rate_limit_max_writeOps_unlimited",n.max_write_ops)}getRateLimitFormValues(){"user"===this.type?this.rgwUserService.getUserRateLimit(this.id).subscribe(n=>{this.populateFormValues(n.user_ratelimit)},n=>{this.notificationService.show(x._.error,n)}):this.rgwBucketService.getBucketRateLimit(this.bid).subscribe(n=>{this.populateFormValues(n.bucket_ratelimit)},n=>{this.notificationService.show(x._.error,n)})}rateLimitBytesMaxSizeValidator(n){return(new we.k).performValidation(n,"^(\\d+(\\.\\d+)?)\\s*(B/m|K(B|iB/m)?|M(B|iB/m)?|G(B|iB/m)?|T(B|iB/m)?|P(B|iB/m)?)?$",{rateByteMaxSize:!0})}rateLimitIopmMaxSizeValidator(n){return(new we.k).iopmMaxSizeValidator(n)}getRateLimitFormValue(){return this._isRateLimitFormDirty()?this._getRateLimitArgs():null}ngAfterViewInit(){this.rateLimitFormGroup.emit(this.form)}_isRateLimitFormDirty(){return["rate_limit_enabled","rate_limit_max_readOps_unlimited","rate_limit_max_readOps","rate_limit_max_writeOps_unlimited","rate_limit_max_writeOps","rate_limit_max_readBytes_unlimited","rate_limit_max_readBytes","rate_limit_max_writeBytes_unlimited","rate_limit_max_writeBytes"].some(n=>this.form.get(n).dirty)}_getRateLimitArgs(){const n={enabled:this.form.getValue("rate_limit_enabled"),max_read_ops:0,max_write_ops:0,max_read_bytes:0,max_write_bytes:0};return this.form.getValue("rate_limit_max_readOps_unlimited")||(n.max_read_ops=this.form.getValue("rate_limit_max_readOps")),this.form.getValue("rate_limit_max_writeOps_unlimited")||(n.max_write_ops=this.form.getValue("rate_limit_max_writeOps")),this.form.getValue("rate_limit_max_readBytes_unlimited")||(n.max_read_bytes=(new we.k).toBytes(this.form.getValue("rate_limit_max_readBytes"))),this.form.getValue("rate_limit_max_writeBytes_unlimited")||(n.max_write_bytes=(new we.k).toBytes(this.form.getValue("rate_limit_max_writeBytes"))),n}_setRateLimitProperty(n,t,_){0===_?(this.form.get(t).setValue(!0),this.form.get(n).setValue("")):(this.form.get(t).setValue(!1),this.form.get(n).setValue(_))}static{this.\u0275fac=function(t){return new(t||ft)(e.\u0275\u0275directiveInject(Ne.$),e.\u0275\u0275directiveInject(Rt.p),e.\u0275\u0275directiveInject(Le.c),e.\u0275\u0275directiveInject(te.J))}}static{this.\u0275cmp=e.\u0275\u0275defineComponent({type:ft,selectors:[["cd-rgw-rate-limit"]],inputs:{type:"type",isEditing:"isEditing",id:"id",allowBid:"allowBid"},outputs:{formValue:"formValue",rateLimitFormGroup:"rateLimitFormGroup"},decls:1,vars:1,consts:()=>{let n,t,_,i,a,r,s,d,u,m,C,O,f,I,R,h,G,U,k,y,H,X,B,V,S,P,ee,Q,q,J;return n=$localize`:␟ebffd79eaf7994ca51a69620d9a660c58ec4d428␟8502905654103686278: Rate Limit ${"\ufffd*3:1\ufffd\ufffd#1:1\ufffd"}:START_TAG_CD_HELP_TEXT: The User Rate Limit controls the max read/write operations and data per minute for each user. ${"[\ufffd/#1:1\ufffd\ufffd/*3:1\ufffd|\ufffd/#1:2\ufffd\ufffd/*4:2\ufffd]"}:CLOSE_TAG_CD_HELP_TEXT:${"\ufffd*4:2\ufffd\ufffd#1:2\ufffd"}:START_TAG_CD_HELP_TEXT_1: The Bucket Rate Limit controls the max read/write operations and data per minute for each bucket. ${"[\ufffd/#1:1\ufffd\ufffd/*3:1\ufffd|\ufffd/#1:2\ufffd\ufffd/*4:2\ufffd]"}:CLOSE_TAG_CD_HELP_TEXT:`,n=e.\u0275\u0275i18nPostprocess(n),t=$localize`:␟f50a33d3c339f8f4a465141f8caa5d2d8c005251␟4816216590591222133:Enabled`,_=$localize`:␟a5b0507416af54173a2da5e2e599a97343b108e1␟4157839228395804613:Toggle to enable or disable the rate limit settings.`,i=$localize`:␟9a10c9460fa39e86155cfc0f8ef94d2ffc4725e1␟1095316398083854316:${"\ufffd#6\ufffd"}:START_TAG_DIV:${"\ufffd#7\ufffd"}:START_TAG_SPAN:Global Rate Limit${"\ufffd/#7\ufffd"}:CLOSE_TAG_SPAN:${"[\ufffd#8\ufffd\ufffd/#8\ufffd|\ufffd#10\ufffd\ufffd/#10\ufffd|\ufffd#11\ufffd\ufffd/#11\ufffd|\ufffd#13\ufffd\ufffd/#13\ufffd]"}:LINE_BREAK:Max. read bytes : ${"\ufffd0\ufffd"}:INTERPOLATION: ${"[\ufffd#8\ufffd\ufffd/#8\ufffd|\ufffd#10\ufffd\ufffd/#10\ufffd|\ufffd#11\ufffd\ufffd/#11\ufffd|\ufffd#13\ufffd\ufffd/#13\ufffd]"}:LINE_BREAK:Max. read ops : ${"\ufffd1\ufffd"}:INTERPOLATION_1: ${"[\ufffd#8\ufffd\ufffd/#8\ufffd|\ufffd#10\ufffd\ufffd/#10\ufffd|\ufffd#11\ufffd\ufffd/#11\ufffd|\ufffd#13\ufffd\ufffd/#13\ufffd]"}:LINE_BREAK:Max. write bytes : ${"\ufffd2\ufffd"}:INTERPOLATION_2: ${"[\ufffd#8\ufffd\ufffd/#8\ufffd|\ufffd#10\ufffd\ufffd/#10\ufffd|\ufffd#11\ufffd\ufffd/#11\ufffd|\ufffd#13\ufffd\ufffd/#13\ufffd]"}:LINE_BREAK:Max. write ops : ${"\ufffd3\ufffd"}:INTERPOLATION_3: ${"\ufffd/#6\ufffd"}:CLOSE_TAG_DIV:`,i=e.\u0275\u0275i18nPostprocess(i),a=$localize`:␟4ca89658808931a64d0b82cc6ac3ed2d7cc6ed55␟7094863466380800872:Unlimited read ops`,r=$localize`:␟3a81e37860d10943dcb0052401f7f9d899a7dd04␟7378970941697141408:Select this box to allow unlimited read operations.`,s=$localize`:␟4c7a3fd864098c2791f57c5a8d3927711f4a731d␟7008858146158101133:Maximum read ops`,d=$localize`:␟c92d4e3b1400b32d84303cbb451c3d80115ca5fa␟5302163724245525437:Limits the number of read operations per minute for a user.`,u=$localize`:␟7cbdabcece469fab89cfa687ab152bca18b97498␟1417693714872528491:This field is required.`,m=$localize`:␟db4e1a734518691b128ef40b939cc673f01d03a6␟6799055650932155327:The value is not valid.`,C=$localize`:␟821eadd27d9dc7d756b156e99d6513c499b8faab␟806687413567338644:Enter a positive number.`,O=$localize`:␟dcbe0a1f89d36cb26b6ac30c5b4a472f5f698576␟2312568233724601561:Unlimited write ops`,f=$localize`:␟cf608ec4840866eece74201fc95904eb2489f628␟8246313263308433898:Select this box to allow unlimited write operations.`,I=$localize`:␟312e190564355ed47d3a5a564cf1c05c976a984d␟5145944168365730696:Maximum write ops`,R=$localize`:␟7beb3f82f6e8e161d91323557949ec1b0bd19078␟179140126407001885:Limits the number of write operations per minute for a user.`,h=$localize`:␟7cbdabcece469fab89cfa687ab152bca18b97498␟1417693714872528491:This field is required.`,G=$localize`:␟db4e1a734518691b128ef40b939cc673f01d03a6␟6799055650932155327:The value is not valid.`,U=$localize`:␟821eadd27d9dc7d756b156e99d6513c499b8faab␟806687413567338644:Enter a positive number.`,k=$localize`:␟6c2014f1d116f210ae4ace16783e8243b6d6aaba␟7762108349346255181:Unlimited read bytes`,y=$localize`:␟fa7865331b177fbdeac286e577a4ea97e2f80aef␟3880405701843339908:Select this box to allow unlimited read bytes.`,H=$localize`:␟299eb562bdc3ae1ec678c53077cbeb341eceacdf␟2062848355352868409:Limits the number of read bytes per minute for a user.`,X=$localize`:␟7cbdabcece469fab89cfa687ab152bca18b97498␟1417693714872528491:This field is required.`,B=$localize`:␟db4e1a734518691b128ef40b939cc673f01d03a6␟6799055650932155327:The value is not valid.`,V=$localize`:␟821eadd27d9dc7d756b156e99d6513c499b8faab␟806687413567338644:Enter a positive number.`,S=$localize`:␟171d7baf5c947f8b8ee7931d9e7892272de19d67␟7948057467743769920:Unlimited write bytes`,P=$localize`:␟4e85f91dea06d6a3aace02d9249daa0edee960de␟8088580806676045330:Select this box to allow unlimited write bytes.`,ee=$localize`:␟516fe07ab12d86b478e1a42418d180e98268eb14␟2647677746846743228:Limits the number of write bytes per minute for a user.`,Q=$localize`:␟7cbdabcece469fab89cfa687ab152bca18b97498␟1417693714872528491:This field is required.`,q=$localize`:␟db4e1a734518691b128ef40b939cc673f01d03a6␟6799055650932155327:The value is not valid.`,J=$localize`:␟821eadd27d9dc7d756b156e99d6513c499b8faab␟806687413567338644:Enter a positive number.`,[["frm","ngForm"],["rateLimitMaxReadOpsError",""],["rateLimitMaxWriteOpsError",""],["maxReadBytesError",""],["maxWriteBytesError",""],n,t,_,i,a,r,u,m,C,O,f,h,G,U,k,y,X,B,V,S,P,Q,q,J,[4,"ngIf"],[1,"cd-header"],["name","form","novalidate","",3,"formGroup"],["class","row",4,"ngIf"],[1,"form-item"],["id","rate_limit_enabled","formControlName","rate_limit_enabled"],["class","form-item",4,"ngIf"],[1,"row"],[1,"col-3"],[1,"col-9"],["type","info","id","global-ratelimit-info",1,"me-1"],[1,"bold"],["id","rate_limit_max_readOps_unlimited","formControlName","rate_limit_max_readOps_unlimited"],["id","rate_limit_max_readOps","formControlName","rate_limit_max_readOps","label",s,"cdRequiredField","Maximum read ops","helperText",d,3,"invalid","invalidText"],["class","invalid-feedback",4,"ngIf"],[1,"invalid-feedback"],["id","rate_limit_max_writeOps_unlimited","formControlName","rate_limit_max_writeOps_unlimited"],["id","rate_limit_max_writeOps","formControlName","rate_limit_max_writeOps","label",I,"cdRequiredField","Maximum write ops","helperText",R,3,"invalid","invalidText"],["id","rate_limit_max_readBytes_unlimited","formControlName","rate_limit_max_readBytes_unlimited"],["labelInputID","rate_limit_max_readBytes","cdRequiredField","Maximum read bytes","helperText",H,3,"invalid","invalidText"],["cdsText","","id","rate_limit_max_readBytes","formControlName","rate_limit_max_readBytes","defaultUnit","b","cdDimlessBinaryPerMinute","",3,"invalid"],["id","rate_limit_max_writeBytes_unlimited","formControlName","rate_limit_max_writeBytes_unlimited"],["labelInputID","rate_limit_max_writeBytes","cdRequiredField","Maximum write bytes","helperText",ee,3,"invalid","invalidText"],["cdsText","","id","rate_limit_max_writeBytes","formControlName","rate_limit_max_writeBytes","defaultUnit","b","cdDimlessBinaryPerMinute","",3,"invalid"]]},template:function(t,_){1&t&&e.\u0275\u0275template(0,J_,22,12,"fieldset",29),2&t&&e.\u0275\u0275property("ngIf",_.type)},dependencies:[g.NgIf,Ie.m,ie.O,j.S,ne.E,Qe.P,Tn,l.\u0275NgNoValidate,l.DefaultValueAccessor,l.NgControlStatus,l.NgControlStatusGroup,l.FormGroupDirective,l.FormControlName,c.TextInputLabelComponent,c.TextInput,c.Checkbox,c.NumberComponent,so.E]})}}var he=T(94254),co=T(36618);class Je{constructor(n,t){this.http=n,this.rgwDaemonService=t,this.url="api/rgw/accounts"}list(n){return this.rgwDaemonService.request(t=>(n&&(t=t.append("detailed",n)),this.http.get(this.url,{params:t})))}get(n){return this.rgwDaemonService.request(t=>(n&&(t=t.append("account_id",n)),this.http.get(`${this.url}/get`,{params:t})))}create(n){return this.rgwDaemonService.request(t=>this.http.post(this.url,n,{params:t}))}modify(n){return this.rgwDaemonService.request(t=>this.http.put(`${this.url}/set`,n,{params:t}))}remove(n){return this.rgwDaemonService.request(t=>this.http.delete(`${this.url}/${n}`,{params:t}))}setQuota(n,t){return this.http.put(`${this.url}/${n}/quota`,t)}static{this.\u0275fac=function(t){return new(t||Je)(e.\u0275\u0275inject(co.HttpClient),e.\u0275\u0275inject(ye.y))}}static{this.\u0275prov=e.\u0275\u0275defineInjectable({token:Je,factory:Je.\u0275fac,providedIn:"root"})}}var ei=T(23589),uo=T(95131),St=T(56677),Oe=T(37353);const ti=["bucketPolicyTextArea"],ni=["lifecycleTextArea"],oi=()=>({md:4}),_i=(o,n)=>({status:o,isDefaultZg:n}),ii=(o,n)=>({index:o,tag:n});function ai(o,n){1&o&&(e.\u0275\u0275elementStart(0,"div",84)(1,"cds-text-label",112),e.\u0275\u0275i18nStart(2,32),e.\u0275\u0275element(3,"input",113),e.\u0275\u0275i18nEnd(),e.\u0275\u0275elementEnd()())}function ri(o,n){1&o&&(e.\u0275\u0275elementStart(0,"span",115),e.\u0275\u0275i18n(1,33),e.\u0275\u0275elementEnd())}function li(o,n){1&o&&(e.\u0275\u0275elementStart(0,"span",115),e.\u0275\u0275i18n(1,34),e.\u0275\u0275elementEnd())}function si(o,n){1&o&&(e.\u0275\u0275elementStart(0,"span",115),e.\u0275\u0275i18n(1,35),e.\u0275\u0275elementEnd())}function ci(o,n){1&o&&(e.\u0275\u0275elementStart(0,"span",115),e.\u0275\u0275i18n(1,36),e.\u0275\u0275elementEnd())}function di(o,n){1&o&&(e.\u0275\u0275elementStart(0,"span",115),e.\u0275\u0275i18n(1,37),e.\u0275\u0275elementEnd())}function ui(o,n){1&o&&(e.\u0275\u0275elementStart(0,"span",115),e.\u0275\u0275i18n(1,38),e.\u0275\u0275elementEnd())}function pi(o,n){1&o&&(e.\u0275\u0275elementStart(0,"span",115),e.\u0275\u0275i18n(1,39),e.\u0275\u0275elementEnd())}function mi(o,n){1&o&&(e.\u0275\u0275elementStart(0,"span",115),e.\u0275\u0275i18n(1,40),e.\u0275\u0275elementEnd())}function Ti(o,n){if(1&o&&e.\u0275\u0275template(0,ri,2,0,"span",114)(1,li,2,0,"span",114)(2,si,2,0,"span",114)(3,ci,2,0,"span",114)(4,di,2,0,"span",114)(5,ui,2,0,"span",114)(6,pi,2,0,"span",114)(7,mi,2,0,"span",114),2&o){e.\u0275\u0275nextContext();const t=e.\u0275\u0275reference(2),_=e.\u0275\u0275nextContext();e.\u0275\u0275property("ngIf",_.bucketForm.showError("bid",t,"required")),e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf",_.bucketForm.showError("bid",t,"bucketNameInvalid")),e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf",_.bucketForm.showError("bid",t,"bucketNameNotAllowed")),e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf",_.bucketForm.showError("bid",t,"containsUpperCase")),e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf",_.bucketForm.showError("bid",t,"lowerCaseOrNumber")),e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf",_.bucketForm.showError("bid",t,"ipAddress")),e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf",_.bucketForm.showError("bid",t,"onlyLowerCaseAndNumbers")),e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf",_.bucketForm.showError("bid",t,"shouldBeInRange"))}}function gi(o,n){1&o&&(e.\u0275\u0275elementStart(0,"cds-checkbox",87),e.\u0275\u0275i18n(1,41),e.\u0275\u0275elementEnd())}function Ei(o,n){1&o&&(e.\u0275\u0275i18nStart(0,42,1),e.\u0275\u0275element(1,"option",120),e.\u0275\u0275i18nEnd()),2&o&&(e.\u0275\u0275advance(),e.\u0275\u0275property("ngValue",null))}function Ri(o,n){1&o&&(e.\u0275\u0275i18nStart(0,42,2),e.\u0275\u0275element(1,"option",121),e.\u0275\u0275i18nEnd())}function Ci(o,n){if(1&o&&(e.\u0275\u0275i18nStart(0,42,3),e.\u0275\u0275element(1,"option",122),e.\u0275\u0275i18nEnd()),2&o){const t=n.$implicit;e.\u0275\u0275advance(),e.\u0275\u0275property("value",t.uid),e.\u0275\u0275i18nExp(t.uid),e.\u0275\u0275i18nApply(0)}}function fi(o,n){1&o&&(e.\u0275\u0275elementStart(0,"span",115),e.\u0275\u0275i18n(1,43),e.\u0275\u0275elementEnd())}function Si(o,n){if(1&o&&e.\u0275\u0275template(0,fi,2,0,"span",114),2&o){e.\u0275\u0275nextContext(2);const t=e.\u0275\u0275reference(2),_=e.\u0275\u0275nextContext();e.\u0275\u0275property("ngIf",_.bucketForm.showError("accountUser",t,"required"))}}function Fi(o,n){1&o&&(e.\u0275\u0275elementStart(0,"cd-alert-panel",123),e.\u0275\u0275i18n(1,44),e.\u0275\u0275elementEnd())}function Mi(o,n){if(1&o&&(e.\u0275\u0275elementStart(0,"div",84)(1,"cds-select",116),e.\u0275\u0275i18nStart(2,42),e.\u0275\u0275template(3,Ei,2,1,"option",117)(4,Ri,2,0,"option",118)(5,Ci,2,2,"option",108),e.\u0275\u0275i18nEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275template(6,Si,1,1,"ng-template",null,8,e.\u0275\u0275templateRefExtractor)(8,Fi,2,0,"cd-alert-panel",119),e.\u0275\u0275elementEnd()),2&o){const t=e.\u0275\u0275reference(7),_=e.\u0275\u0275nextContext(2);e.\u0275\u0275advance(),e.\u0275\u0275property("invalidText",t)("invalid",!_.bucketForm.controls.accountUser.valid&&_.bucketForm.controls.accountUser.dirty),e.\u0275\u0275advance(2),e.\u0275\u0275property("ngIf",null===_.accountusers),e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf",null!==_.accountusers),e.\u0275\u0275advance(),e.\u0275\u0275property("ngForOf",_.accountUsers),e.\u0275\u0275advance(3),e.\u0275\u0275property("ngIf",_.bucketForm.get("accountUser").disabled)}}function Pi(o,n){1&o&&(e.\u0275\u0275i18nStart(0,45,1),e.\u0275\u0275element(1,"option",120),e.\u0275\u0275i18nEnd()),2&o&&(e.\u0275\u0275advance(),e.\u0275\u0275property("ngValue",null))}function Ii(o,n){1&o&&(e.\u0275\u0275i18nStart(0,45,2),e.\u0275\u0275element(1,"option",121),e.\u0275\u0275i18nEnd())}function Oi(o,n){if(1&o&&(e.\u0275\u0275i18nStart(0,45,3),e.\u0275\u0275element(1,"option",122),e.\u0275\u0275i18nEnd()),2&o){const t=n.$implicit;e.\u0275\u0275advance(),e.\u0275\u0275property("value",t.uid),e.\u0275\u0275i18nExp(t.uid),e.\u0275\u0275i18nApply(0)}}function Gi(o,n){1&o&&(e.\u0275\u0275elementStart(0,"span",115),e.\u0275\u0275i18n(1,46),e.\u0275\u0275elementEnd())}function Ni(o,n){if(1&o&&e.\u0275\u0275template(0,Gi,2,0,"span",114),2&o){e.\u0275\u0275nextContext(2);const t=e.\u0275\u0275reference(2),_=e.\u0275\u0275nextContext();e.\u0275\u0275property("ngIf",_.bucketForm.showError("owner",t,"required"))}}function Ai(o,n){if(1&o&&(e.\u0275\u0275elementStart(0,"div",84)(1,"cds-select",124),e.\u0275\u0275i18nStart(2,45),e.\u0275\u0275template(3,Pi,2,1,"option",117)(4,Ii,2,0,"option",118)(5,Oi,2,2,"option",108),e.\u0275\u0275i18nEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275template(6,Ni,1,1,"ng-template",null,9,e.\u0275\u0275templateRefExtractor),e.\u0275\u0275elementEnd()),2&o){const t=e.\u0275\u0275reference(7),_=e.\u0275\u0275nextContext(2);e.\u0275\u0275advance(),e.\u0275\u0275property("invalidText",t)("invalid",!_.bucketForm.controls.owner.valid&&_.bucketForm.controls.owner.dirty),e.\u0275\u0275advance(2),e.\u0275\u0275property("ngIf",null===_.owners),e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf",null!==_.owners),e.\u0275\u0275advance(),e.\u0275\u0275property("ngForOf",_.owners)}}function hi(o,n){if(1&o){const t=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"fieldset")(1,"div",84)(2,"legend",89),e.\u0275\u0275i18n(3,47),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(4,"cds-checkbox",125),e.\u0275\u0275listener("checkedChange",function(){e.\u0275\u0275restoreView(t);const i=e.\u0275\u0275nextContext(2);return e.\u0275\u0275resetView(i.setMfaDeleteValidators())}),e.\u0275\u0275i18nStart(5,48),e.\u0275\u0275elementStart(6,"cd-help-text"),e.\u0275\u0275element(7,"span"),e.\u0275\u0275elementEnd(),e.\u0275\u0275i18nEnd(),e.\u0275\u0275elementEnd()()()}}function bi(o,n){1&o&&(e.\u0275\u0275elementStart(0,"span",115),e.\u0275\u0275i18n(1,52),e.\u0275\u0275elementEnd())}function vi(o,n){if(1&o&&e.\u0275\u0275template(0,bi,2,0,"span",114),2&o){e.\u0275\u0275nextContext(3);const t=e.\u0275\u0275reference(2),_=e.\u0275\u0275nextContext();e.\u0275\u0275property("ngIf",_.bucketForm.showError("mfa-token-serial",t,"required"))}}function Li(o,n){if(1&o&&(e.\u0275\u0275elementStart(0,"div",84)(1,"cds-text-label",127),e.\u0275\u0275i18nStart(2,51),e.\u0275\u0275element(3,"input",128),e.\u0275\u0275i18nEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275template(4,vi,1,1,"ng-template",null,10,e.\u0275\u0275templateRefExtractor),e.\u0275\u0275elementEnd()),2&o){const t=e.\u0275\u0275reference(5),_=e.\u0275\u0275nextContext(3);e.\u0275\u0275advance(),e.\u0275\u0275property("invalid",!_.bucketForm.controls["mfa-token-serial"].valid&&_.bucketForm.controls["mfa-token-serial"].dirty)("invalidText",t),e.\u0275\u0275advance(2),e.\u0275\u0275property("invalid",!_.bucketForm.controls["mfa-token-serial"].valid&&_.bucketForm.controls["mfa-token-serial"].dirty)}}function yi(o,n){1&o&&(e.\u0275\u0275elementStart(0,"span",115),e.\u0275\u0275i18n(1,54),e.\u0275\u0275elementEnd())}function $i(o,n){if(1&o&&e.\u0275\u0275template(0,yi,2,0,"span",114),2&o){e.\u0275\u0275nextContext(3);const t=e.\u0275\u0275reference(2),_=e.\u0275\u0275nextContext();e.\u0275\u0275property("ngIf",_.bucketForm.showError("mfa-token-pin",t,"required"))}}function Di(o,n){if(1&o&&(e.\u0275\u0275elementStart(0,"div",84)(1,"cds-text-label",129),e.\u0275\u0275i18nStart(2,53),e.\u0275\u0275element(3,"input",130),e.\u0275\u0275i18nEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275template(4,$i,1,1,"ng-template",null,11,e.\u0275\u0275templateRefExtractor),e.\u0275\u0275elementEnd()),2&o){const t=e.\u0275\u0275reference(5),_=e.\u0275\u0275nextContext(3);e.\u0275\u0275advance(),e.\u0275\u0275property("invalid",!_.bucketForm.controls["mfa-token-pin"].valid&&_.bucketForm.controls["mfa-token-pin"].dirty)("invalidText",t),e.\u0275\u0275advance(2),e.\u0275\u0275property("invalid",!_.bucketForm.controls["mfa-token-pin"].valid&&_.bucketForm.controls["mfa-token-pin"].dirty)}}function Wi(o,n){if(1&o){const t=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"fieldset")(1,"div",84)(2,"legend",89),e.\u0275\u0275i18n(3,49),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(4,"cds-checkbox",126),e.\u0275\u0275listener("checkedChange",function(){e.\u0275\u0275restoreView(t);const i=e.\u0275\u0275nextContext(2);return e.\u0275\u0275resetView(i.setMfaDeleteValidators())}),e.\u0275\u0275i18n(5,50),e.\u0275\u0275elementEnd()(),e.\u0275\u0275template(6,Li,6,3,"div",83)(7,Di,6,3,"div",83),e.\u0275\u0275elementEnd()}if(2&o){const t=e.\u0275\u0275nextContext(2);e.\u0275\u0275advance(6),e.\u0275\u0275property("ngIf",t.areMfaCredentialsRequired()),e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf",t.areMfaCredentialsRequired())}}function xi(o,n){1&o&&(e.\u0275\u0275elementStart(0,"span"),e.\u0275\u0275i18n(1,58),e.\u0275\u0275elementEnd())}function wi(o,n){1&o&&(e.\u0275\u0275elementStart(0,"span"),e.\u0275\u0275i18n(1,59),e.\u0275\u0275elementEnd())}function Ui(o,n){if(1&o&&e.\u0275\u0275template(0,xi,2,0,"span",88)(1,wi,2,0,"span",88),2&o){const t=e.\u0275\u0275nextContext(4);e.\u0275\u0275property("ngIf","COMPLIANCE"===t.bucketForm.getValue("lock_mode")),e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf","GOVERNANCE"===t.bucketForm.getValue("lock_mode"))}}function ki(o,n){if(1&o&&(e.\u0275\u0275elementStart(0,"div",84)(1,"cds-select",134),e.\u0275\u0275i18nStart(2,57),e.\u0275\u0275element(3,"option",135)(4,"option",136),e.\u0275\u0275i18nEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275template(5,Ui,2,2,"ng-template",null,12,e.\u0275\u0275templateRefExtractor),e.\u0275\u0275elementEnd()),2&o){const t=e.\u0275\u0275reference(6);e.\u0275\u0275advance(),e.\u0275\u0275property("helperText",t)}}function zi(o,n){1&o&&(e.\u0275\u0275elementStart(0,"span",115),e.\u0275\u0275i18n(1,60),e.\u0275\u0275elementEnd())}function Hi(o,n){1&o&&(e.\u0275\u0275elementStart(0,"span",115),e.\u0275\u0275i18n(1,61),e.\u0275\u0275elementEnd())}function Xi(o,n){if(1&o&&e.\u0275\u0275template(0,zi,2,0,"span",114)(1,Hi,2,0,"span",114),2&o){e.\u0275\u0275nextContext(3);const t=e.\u0275\u0275reference(2),_=e.\u0275\u0275nextContext();e.\u0275\u0275property("ngIf",_.bucketForm.showError("lock_retention_period_days",t,"pattern")),e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf",_.bucketForm.showError("lock_retention_period_days",t,"lockDays"))}}function Bi(o,n){if(1&o&&(e.\u0275\u0275elementStart(0,"div",84),e.\u0275\u0275element(1,"cds-number",137),e.\u0275\u0275template(2,Xi,2,2,"ng-template",null,13,e.\u0275\u0275templateRefExtractor),e.\u0275\u0275elementEnd()),2&o){const t=e.\u0275\u0275reference(3),_=e.\u0275\u0275nextContext(3);e.\u0275\u0275advance(),e.\u0275\u0275property("invalid",_.bucketForm.controls.lock_retention_period_days.invalid&&_.bucketForm.controls.lock_retention_period_days.dirty)("invalidText",t)}}function Vi(o,n){1&o&&(e.\u0275\u0275elementStart(0,"cd-alert-panel",138),e.\u0275\u0275text(1," Bucket Versioning can't be disabled when Object Locking is enabled. "),e.\u0275\u0275elementEnd())}function Zi(o,n){1&o&&(e.\u0275\u0275elementStart(0,"cd-alert-panel",139),e.\u0275\u0275text(1," Enabling Object Locking will allow the configuration of GOVERNANCE or COMPLIANCE modes, which will help ensure that an object version cannot be overwritten or deleted for the specified period. "),e.\u0275\u0275elementEnd())}function Ki(o,n){if(1&o&&(e.\u0275\u0275elementStart(0,"fieldset")(1,"div",84)(2,"legend",89),e.\u0275\u0275i18nStart(3,55),e.\u0275\u0275element(4,"cd-help-text"),e.\u0275\u0275i18nEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(5,"cds-checkbox",131),e.\u0275\u0275i18nStart(6,56),e.\u0275\u0275elementStart(7,"cd-help-text"),e.\u0275\u0275element(8,"span"),e.\u0275\u0275elementEnd(),e.\u0275\u0275i18nEnd(),e.\u0275\u0275elementEnd()(),e.\u0275\u0275template(9,ki,7,1,"div",83)(10,Bi,4,2,"div",83)(11,Vi,2,0,"cd-alert-panel",132)(12,Zi,2,0,"cd-alert-panel",133),e.\u0275\u0275elementEnd()),2&o){const t=e.\u0275\u0275nextContext(2);e.\u0275\u0275advance(5),e.\u0275\u0275property("disabled",t.editing),e.\u0275\u0275advance(4),e.\u0275\u0275property("ngIf",t.bucketForm.getValue("lock_enabled")),e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf",t.bucketForm.getValue("lock_enabled")),e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf",t.bucketForm.getValue("lock_enabled")),e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf",t.bucketForm.getValue("lock_enabled"))}}function qi(o,n){1&o&&(e.\u0275\u0275i18nStart(0,62,1),e.\u0275\u0275element(1,"option",120),e.\u0275\u0275i18nEnd()),2&o&&(e.\u0275\u0275advance(),e.\u0275\u0275property("ngValue",null))}function ji(o,n){1&o&&(e.\u0275\u0275i18nStart(0,62,2),e.\u0275\u0275element(1,"option",120),e.\u0275\u0275i18nEnd()),2&o&&(e.\u0275\u0275advance(),e.\u0275\u0275property("ngValue",null))}function Yi(o,n){if(1&o&&(e.\u0275\u0275i18nStart(0,62,3),e.\u0275\u0275element(1,"option",122),e.\u0275\u0275i18nEnd()),2&o){const t=n.$implicit;e.\u0275\u0275advance(),e.\u0275\u0275property("value",t),e.\u0275\u0275i18nExp(t),e.\u0275\u0275i18nApply(0)}}function Qi(o,n){1&o&&(e.\u0275\u0275elementStart(0,"span",115),e.\u0275\u0275i18n(1,64),e.\u0275\u0275elementEnd())}function Ji(o,n){if(1&o&&e.\u0275\u0275template(0,Qi,2,0,"span",114),2&o){e.\u0275\u0275nextContext(3);const t=e.\u0275\u0275reference(2),_=e.\u0275\u0275nextContext();e.\u0275\u0275property("ngIf",_.bucketForm.showError("kms_provider",t,"required"))}}function ea(o,n){1&o&&(e.\u0275\u0275elementStart(0,"span",115),e.\u0275\u0275i18n(1,65),e.\u0275\u0275elementEnd())}function ta(o,n){if(1&o&&e.\u0275\u0275template(0,ea,2,0,"span",114),2&o){e.\u0275\u0275nextContext(3);const t=e.\u0275\u0275reference(2),_=e.\u0275\u0275nextContext();e.\u0275\u0275property("ngIf",_.bucketForm.showError("keyId",t,"required"))}}function na(o,n){if(1&o&&(e.\u0275\u0275elementStart(0,"div")(1,"div",84)(2,"cds-select",143),e.\u0275\u0275i18nStart(3,62),e.\u0275\u0275template(4,qi,2,1,"option",117)(5,ji,2,1,"option",117)(6,Yi,2,2,"option",108),e.\u0275\u0275i18nEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275template(7,Ji,1,1,"ng-template",null,14,e.\u0275\u0275templateRefExtractor),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(9,"div",84)(10,"cds-text-label",144),e.\u0275\u0275i18nStart(11,63),e.\u0275\u0275element(12,"input",145),e.\u0275\u0275i18nEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275template(13,ta,1,1,"ng-template",null,15,e.\u0275\u0275templateRefExtractor),e.\u0275\u0275elementEnd()()),2&o){const t=e.\u0275\u0275reference(8),_=e.\u0275\u0275reference(14),i=e.\u0275\u0275nextContext(3);e.\u0275\u0275advance(2),e.\u0275\u0275property("invalidText",t)("invalid",!i.bucketForm.controls.kms_provider.valid&&i.bucketForm.controls.kms_provider.dirty),e.\u0275\u0275advance(2),e.\u0275\u0275property("ngIf",null===i.kmsProviders),e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf",null!==i.kmsProviders),e.\u0275\u0275advance(),e.\u0275\u0275property("ngForOf",i.kmsProviders),e.\u0275\u0275advance(4),e.\u0275\u0275property("invalid",!i.bucketForm.controls.keyId.valid&&i.bucketForm.controls.keyId.dirty)("invalidText",_),e.\u0275\u0275advance(2),e.\u0275\u0275property("invalid",!i.bucketForm.controls.keyId.valid&&i.bucketForm.controls.keyId.dirty)}}function oa(o,n){if(1&o&&(e.\u0275\u0275elementStart(0,"div")(1,"div",84)(2,"cds-radio-group",140)(3,"cds-radio",141),e.\u0275\u0275text(4,"SSE-S3"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(5,"cds-radio",142),e.\u0275\u0275text(6,"Connect to an external key management service"),e.\u0275\u0275elementEnd()()(),e.\u0275\u0275template(7,na,15,8,"div",88),e.\u0275\u0275elementEnd()),2&o){const t=e.\u0275\u0275nextContext(2);e.\u0275\u0275advance(3),e.\u0275\u0275property("disabled",!t.s3Configured),e.\u0275\u0275advance(2),e.\u0275\u0275property("disabled",!t.kmsConfigured),e.\u0275\u0275advance(2),e.\u0275\u0275property("ngIf","aws:kms"===t.bucketForm.getValue("encryption_type"))}}function _a(o,n){1&o&&(e.\u0275\u0275elementStart(0,"cd-alert-panel",148),e.\u0275\u0275i18n(1,67),e.\u0275\u0275elementEnd())}function ia(o,n){if(1&o&&(e.\u0275\u0275elementContainerStart(0),e.\u0275\u0275elementStart(1,"cds-checkbox",146),e.\u0275\u0275i18nStart(2,66),e.\u0275\u0275element(3,"cd-help-text"),e.\u0275\u0275i18nEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275template(4,_a,2,0,"cd-alert-panel",147),e.\u0275\u0275elementContainerEnd()),2&o){const t=n.ngIf,_=e.\u0275\u0275nextContext(2);e.\u0275\u0275advance(),e.\u0275\u0275property("disabled",!t.isDefaultZg&&!t.status.available),e.\u0275\u0275advance(3),e.\u0275\u0275property("ngIf",!_.editing)}}function aa(o,n){1&o&&e.\u0275\u0275elementContainer(0)}function ra(o,n){if(1&o&&(e.\u0275\u0275elementStart(0,"span"),e.\u0275\u0275template(1,aa,1,0,"ng-container",149),e.\u0275\u0275elementEnd()),2&o){const t=n.$implicit,_=n.index;e.\u0275\u0275nextContext(2);const i=e.\u0275\u0275reference(2);e.\u0275\u0275advance(),e.\u0275\u0275property("ngTemplateOutlet",i)("ngTemplateOutletContext",e.\u0275\u0275pureFunction2(2,ii,_,t))}}function la(o,n){1&o&&(e.\u0275\u0275elementStart(0,"span",115),e.\u0275\u0275i18n(1,68),e.\u0275\u0275elementEnd())}function sa(o,n){if(1&o&&e.\u0275\u0275template(0,la,2,0,"span",114),2&o){e.\u0275\u0275nextContext();const t=e.\u0275\u0275reference(2),_=e.\u0275\u0275nextContext();e.\u0275\u0275property("ngIf",_.bucketForm.showError("bucket_policy",t,"invalidJson"))}}function ca(o,n){1&o&&(e.\u0275\u0275elementStart(0,"span",115),e.\u0275\u0275i18n(1,72),e.\u0275\u0275elementEnd())}function da(o,n){1&o&&(e.\u0275\u0275elementStart(0,"span",115),e.\u0275\u0275i18n(1,73),e.\u0275\u0275elementEnd())}function ua(o,n){if(1&o&&e.\u0275\u0275template(0,ca,2,0,"span",114)(1,da,2,0,"span",114),2&o){e.\u0275\u0275nextContext(2);const t=e.\u0275\u0275reference(2),_=e.\u0275\u0275nextContext();e.\u0275\u0275property("ngIf",_.bucketForm.showError("lifecycle",t,"invalidJson")),e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf",_.bucketForm.showError("lifecycle",t,"invalidXml"))}}function pa(o,n){if(1&o){const t=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"div",84)(1,"cds-textarea-label",100),e.\u0275\u0275i18nStart(2,69),e.\u0275\u0275elementStart(3,"textarea",150,16),e.\u0275\u0275listener("change",function(){e.\u0275\u0275restoreView(t);const i=e.\u0275\u0275nextContext(2);return e.\u0275\u0275resetView(i.textAreaOnChange("lifecycle"))}),e.\u0275\u0275elementEnd(),e.\u0275\u0275element(5,"cd-help-text"),e.\u0275\u0275i18nEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275template(6,ua,2,2,"ng-template",null,17,e.\u0275\u0275templateRefExtractor),e.\u0275\u0275elementStart(8,"div",95)(9,"div",96)(10,"cds-button-set",102)(11,"button",151),e.\u0275\u0275listener("click",function(){e.\u0275\u0275restoreView(t);const i=e.\u0275\u0275nextContext(2);return e.\u0275\u0275resetView(i.openUrl("https://docs.aws.amazon.com/cli/latest/reference/s3api/put-bucket-lifecycle.html#examples"))}),e.\u0275\u0275i18nStart(12,70),e.\u0275\u0275namespaceSVG(),e.\u0275\u0275element(13,"svg",99),e.\u0275\u0275i18nEnd(),e.\u0275\u0275elementEnd()()(),e.\u0275\u0275namespaceHTML(),e.\u0275\u0275elementStart(14,"div",96)(15,"cds-button-set",104)(16,"button",152),e.\u0275\u0275listener("click",function(){e.\u0275\u0275restoreView(t);const i=e.\u0275\u0275nextContext(2);return e.\u0275\u0275resetView(i.clearTextArea("lifecycle","{}"))}),e.\u0275\u0275i18nStart(17,71),e.\u0275\u0275namespaceSVG(),e.\u0275\u0275element(18,"svg",99),e.\u0275\u0275i18nEnd(),e.\u0275\u0275elementEnd()()()()()}if(2&o){const t=e.\u0275\u0275reference(7),_=e.\u0275\u0275nextContext(2);e.\u0275\u0275advance(),e.\u0275\u0275property("invalid",!_.bucketForm.controls.lifecycle.valid&&_.bucketForm.controls.lifecycle.dirty)("invalidText",t),e.\u0275\u0275advance(12),e.\u0275\u0275property("cdsIcon",_.icons.launch)("size",_.icons.size16),e.\u0275\u0275advance(5),e.\u0275\u0275property("cdsIcon",_.icons.destroy)("size",_.icons.size16)}}function ma(o,n){if(1&o&&(e.\u0275\u0275i18nStart(0,31,1),e.\u0275\u0275element(1,"option",122),e.\u0275\u0275i18nEnd()),2&o){const t=n.$implicit;e.\u0275\u0275advance(),e.\u0275\u0275property("value",t),e.\u0275\u0275i18nExp(t),e.\u0275\u0275i18nApply(0)}}function Ta(o,n){1&o&&(e.\u0275\u0275elementStart(0,"span",115),e.\u0275\u0275i18n(1,74),e.\u0275\u0275elementEnd())}function ga(o,n){if(1&o&&e.\u0275\u0275template(0,Ta,2,0,"span",114),2&o){e.\u0275\u0275nextContext();const t=e.\u0275\u0275reference(2),_=e.\u0275\u0275nextContext();e.\u0275\u0275property("ngIf",_.bucketForm.showError("grantee",t,"required"))}}function Ea(o,n){if(1&o&&(e.\u0275\u0275elementStart(0,"option",122),e.\u0275\u0275i18n(1,75),e.\u0275\u0275elementEnd()),2&o){const t=n.$implicit;e.\u0275\u0275property("value",t),e.\u0275\u0275advance(),e.\u0275\u0275i18nExp(t),e.\u0275\u0275i18nApply(1)}}function Ra(o,n){1&o&&(e.\u0275\u0275elementStart(0,"span",115),e.\u0275\u0275i18n(1,76),e.\u0275\u0275elementEnd())}function Ca(o,n){if(1&o&&e.\u0275\u0275template(0,Ra,2,0,"span",114),2&o){e.\u0275\u0275nextContext();const t=e.\u0275\u0275reference(2),_=e.\u0275\u0275nextContext();e.\u0275\u0275property("ngIf",_.bucketForm.showError("aclPermission",t,"required"))}}function fa(o,n){1&o&&(e.\u0275\u0275i18nStart(0,77,1),e.\u0275\u0275element(1,"option",120),e.\u0275\u0275i18nEnd()),2&o&&(e.\u0275\u0275advance(),e.\u0275\u0275property("ngValue",null))}function Sa(o,n){1&o&&(e.\u0275\u0275i18nStart(0,77,2),e.\u0275\u0275element(1,"option",120),e.\u0275\u0275i18nEnd()),2&o&&(e.\u0275\u0275advance(),e.\u0275\u0275property("ngValue",null))}function Fa(o,n){if(1&o&&(e.\u0275\u0275i18nStart(0,77,3),e.\u0275\u0275element(1,"option",122),e.\u0275\u0275i18nEnd()),2&o){const t=n.$implicit;e.\u0275\u0275advance(),e.\u0275\u0275property("value",t.name),e.\u0275\u0275i18nExp(t.description),e.\u0275\u0275i18nApply(0)}}function Ma(o,n){if(1&o&&(e.\u0275\u0275elementStart(0,"div",84)(1,"cds-select",153),e.\u0275\u0275i18nStart(2,77),e.\u0275\u0275template(3,fa,2,1,"option",117)(4,Sa,2,1,"option",117)(5,Fa,2,2,"option",108),e.\u0275\u0275i18nEnd(),e.\u0275\u0275elementEnd()()),2&o){const t=e.\u0275\u0275nextContext(2);e.\u0275\u0275advance(3),e.\u0275\u0275property("ngIf",null===t.placementTargets),e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf",null!==t.placementTargets),e.\u0275\u0275advance(),e.\u0275\u0275property("ngForOf",t.placementTargets)}}function Pa(o,n){if(1&o){const t=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"div",80)(1,"form",81,2)(3,"div",82),e.\u0275\u0275i18n(4,18),e.\u0275\u0275pipe(5,"titlecase"),e.\u0275\u0275pipe(6,"upperFirst"),e.\u0275\u0275elementEnd(),e.\u0275\u0275template(7,ai,4,0,"div",83),e.\u0275\u0275elementStart(8,"div",84)(9,"cds-text-label",85),e.\u0275\u0275i18nStart(10,19),e.\u0275\u0275element(11,"input",86),e.\u0275\u0275i18nEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275template(12,Ti,8,8,"ng-template",null,3,e.\u0275\u0275templateRefExtractor),e.\u0275\u0275elementEnd(),e.\u0275\u0275template(14,gi,2,0,"cds-checkbox",87)(15,Mi,9,6,"div",84)(16,Ai,8,5,"div",84)(17,hi,8,0,"fieldset",88)(18,Wi,8,2,"fieldset",88)(19,Ki,13,5,"fieldset",88),e.\u0275\u0275elementStart(20,"fieldset")(21,"div",84)(22,"legend",89),e.\u0275\u0275i18n(23,20),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(24,"cds-checkbox",90),e.\u0275\u0275i18nStart(25,21),e.\u0275\u0275elementStart(26,"cd-help-text",91)(27,"span"),e.\u0275\u0275element(28,"a",92),e.\u0275\u0275elementEnd()(),e.\u0275\u0275i18nEnd(),e.\u0275\u0275elementEnd()(),e.\u0275\u0275template(29,oa,8,3,"div",88),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(30,"fieldset")(31,"div",84)(32,"legend",89),e.\u0275\u0275i18n(33,22),e.\u0275\u0275elementEnd(),e.\u0275\u0275template(34,ia,5,2,"ng-container",93),e.\u0275\u0275pipe(35,"async"),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(36,"fieldset")(37,"legend",89),e.\u0275\u0275i18nStart(38,23),e.\u0275\u0275element(39,"cd-help-text"),e.\u0275\u0275i18nEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275template(40,ra,2,5,"span",94),e.\u0275\u0275elementStart(41,"div",95)(42,"div",96)(43,"cds-tooltip",97)(44,"button",98),e.\u0275\u0275listener("click",function(){e.\u0275\u0275restoreView(t);const i=e.\u0275\u0275nextContext();return e.\u0275\u0275resetView(i.showTagModal())}),e.\u0275\u0275elementContainerStart(45),e.\u0275\u0275i18n(46,24),e.\u0275\u0275elementContainerEnd(),e.\u0275\u0275namespaceSVG(),e.\u0275\u0275element(47,"svg",99),e.\u0275\u0275elementEnd()()()()(),e.\u0275\u0275namespaceHTML(),e.\u0275\u0275elementStart(48,"fieldset")(49,"div",84)(50,"legend",89),e.\u0275\u0275i18n(51,25),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(52,"cds-textarea-label",100),e.\u0275\u0275i18nStart(53,26),e.\u0275\u0275elementStart(54,"textarea",101,4),e.\u0275\u0275listener("change",function(){e.\u0275\u0275restoreView(t);const i=e.\u0275\u0275nextContext();return e.\u0275\u0275resetView(i.textAreaOnChange("bucket_policy"))}),e.\u0275\u0275elementEnd(),e.\u0275\u0275i18nEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275template(56,sa,1,1,"ng-template",null,5,e.\u0275\u0275templateRefExtractor),e.\u0275\u0275elementStart(58,"div",95)(59,"div",96)(60,"cds-button-set",102)(61,"button",103),e.\u0275\u0275listener("click",function(){e.\u0275\u0275restoreView(t);const i=e.\u0275\u0275nextContext();return e.\u0275\u0275resetView(i.openUrl("https://docs.aws.amazon.com/AmazonS3/latest/userguide/example-bucket-policies.html?icmpid=docs_amazons3_console"))}),e.\u0275\u0275i18nStart(62,27),e.\u0275\u0275namespaceSVG(),e.\u0275\u0275element(63,"svg",99),e.\u0275\u0275i18nEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275namespaceHTML(),e.\u0275\u0275elementStart(64,"button",103),e.\u0275\u0275listener("click",function(){e.\u0275\u0275restoreView(t);const i=e.\u0275\u0275nextContext();return e.\u0275\u0275resetView(i.openUrl("https://awspolicygen.s3.amazonaws.com/policygen.html"))}),e.\u0275\u0275i18nStart(65,28),e.\u0275\u0275namespaceSVG(),e.\u0275\u0275element(66,"svg",99),e.\u0275\u0275i18nEnd(),e.\u0275\u0275elementEnd()()(),e.\u0275\u0275namespaceHTML(),e.\u0275\u0275elementStart(67,"div",96)(68,"cds-button-set",104)(69,"button",105),e.\u0275\u0275listener("click",function(){e.\u0275\u0275restoreView(t);const i=e.\u0275\u0275nextContext();return e.\u0275\u0275resetView(i.clearTextArea("bucket_policy","{}"))}),e.\u0275\u0275i18nStart(70,29),e.\u0275\u0275namespaceSVG(),e.\u0275\u0275element(71,"svg",99),e.\u0275\u0275i18nEnd(),e.\u0275\u0275elementEnd()()()()(),e.\u0275\u0275template(72,pa,19,6,"div",83),e.\u0275\u0275namespaceHTML(),e.\u0275\u0275elementStart(73,"div",84)(74,"cds-text-label"),e.\u0275\u0275i18nStart(75,30),e.\u0275\u0275element(76,"cd-help-text"),e.\u0275\u0275i18nEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(77,"div",106)(78,"div",96)(79,"cds-select",107),e.\u0275\u0275listener("valueChange",function(){e.\u0275\u0275restoreView(t);const i=e.\u0275\u0275nextContext();return e.\u0275\u0275resetView(i.onSelectionFilter())}),e.\u0275\u0275i18nStart(80,31),e.\u0275\u0275template(81,ma,2,2,"option",108),e.\u0275\u0275i18nEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275template(82,ga,1,1,"ng-template",null,6,e.\u0275\u0275templateRefExtractor),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(84,"div",96)(85,"cds-select",109),e.\u0275\u0275template(86,Ea,2,2,"option",108),e.\u0275\u0275elementEnd(),e.\u0275\u0275template(87,Ca,1,1,"ng-template",null,7,e.\u0275\u0275templateRefExtractor),e.\u0275\u0275elementEnd()()()(),e.\u0275\u0275elementStart(89,"cd-form-advanced-fieldset"),e.\u0275\u0275template(90,Ma,6,3,"div",83),e.\u0275\u0275elementStart(91,"cd-rgw-rate-limit",110),e.\u0275\u0275listener("rateLimitFormGroup",function(i){e.\u0275\u0275restoreView(t);const a=e.\u0275\u0275nextContext();return e.\u0275\u0275resetView(a.rateLimitFormInit(i))}),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(92,"cd-form-button-panel",111),e.\u0275\u0275pipe(93,"titlecase"),e.\u0275\u0275pipe(94,"upperFirst"),e.\u0275\u0275listener("submitActionEvent",function(){e.\u0275\u0275restoreView(t);const i=e.\u0275\u0275nextContext();return e.\u0275\u0275resetView(i.submit())}),e.\u0275\u0275elementEnd()()()}if(2&o){const t=e.\u0275\u0275reference(13),_=e.\u0275\u0275reference(57),i=e.\u0275\u0275reference(83),a=e.\u0275\u0275reference(88),r=e.\u0275\u0275nextContext(),s=e.\u0275\u0275reference(4);e.\u0275\u0275property("columnNumbers",e.\u0275\u0275pureFunction0(57,oi)),e.\u0275\u0275advance(),e.\u0275\u0275property("formGroup",r.bucketForm),e.\u0275\u0275advance(5),e.\u0275\u0275i18nExp(e.\u0275\u0275pipeBind1(5,47,r.action))(e.\u0275\u0275pipeBind1(6,49,r.resource)),e.\u0275\u0275i18nApply(4),e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf",r.editing),e.\u0275\u0275advance(2),e.\u0275\u0275property("invalid",!r.bucketForm.controls.bid.valid&&r.bucketForm.controls.bid.dirty)("invalidText",t),e.\u0275\u0275advance(2),e.\u0275\u0275property("readonly",r.editing)("autofocus",!r.editing)("invalid",!r.bucketForm.controls.bid.valid&&r.bucketForm.controls.bid.dirty),e.\u0275\u0275advance(3),e.\u0275\u0275conditional(r.accounts.length&&r.accountUsers.length>0?14:-1),e.\u0275\u0275advance(),e.\u0275\u0275conditional(r.bucketForm.get("isAccountOwner").value?15:16),e.\u0275\u0275advance(2),e.\u0275\u0275property("ngIf",r.editing),e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf",r.editing),e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf",!r.editing||r.editing&&r.bucketForm.getValue("lock_enabled")),e.\u0275\u0275advance(5),e.\u0275\u0275property("disabled",!r.kmsConfigured&&!r.s3Configured),e.\u0275\u0275advance(5),e.\u0275\u0275property("ngIf",r.bucketForm.getValue("encryption_enabled")),e.\u0275\u0275advance(5),e.\u0275\u0275property("ngIf",e.\u0275\u0275pureFunction2(58,_i,r.multisiteStatus$,e.\u0275\u0275pipeBind1(35,51,r.isDefaultZoneGroup$)))("ngIfElse",s),e.\u0275\u0275advance(6),e.\u0275\u0275property("ngForOf",r.tags),e.\u0275\u0275advance(3),e.\u0275\u0275property("description",r.tags.length>19?"Maximum of 20 tags reached":"")("highContrast",!0)("caret",!0),e.\u0275\u0275advance(),e.\u0275\u0275property("disabled",r.tags.length>19),e.\u0275\u0275advance(3),e.\u0275\u0275property("cdsIcon",r.icons.add)("size",r.icons.size16),e.\u0275\u0275advance(5),e.\u0275\u0275property("invalid",!r.bucketForm.controls.bucket_policy.valid&&r.bucketForm.controls.bucket_policy.dirty)("invalidText",_),e.\u0275\u0275advance(11),e.\u0275\u0275property("cdsIcon",r.icons.launch)("size",r.icons.size16),e.\u0275\u0275advance(3),e.\u0275\u0275property("cdsIcon",r.icons.launch)("size",r.icons.size16),e.\u0275\u0275advance(5),e.\u0275\u0275property("cdsIcon",r.icons.destroy)("size",r.icons.size16),e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf",r.editing),e.\u0275\u0275advance(7),e.\u0275\u0275property("invalid",!r.bucketForm.controls.grantee.valid&&r.bucketForm.controls.grantee.dirty)("invalidText",i),e.\u0275\u0275advance(2),e.\u0275\u0275property("ngForOf",r.grantees),e.\u0275\u0275advance(4),e.\u0275\u0275property("invalid",!r.bucketForm.controls.aclPermission.valid&&r.bucketForm.controls.aclPermission.dirty)("invalidText",a),e.\u0275\u0275advance(),e.\u0275\u0275property("ngForOf",r.aclPermissions),e.\u0275\u0275advance(4),e.\u0275\u0275property("ngIf",!r.editing),e.\u0275\u0275advance(),e.\u0275\u0275property("type","bucket")("isEditing",r.editing)("allowBid",r.bucketForm.getValue("bid")),e.\u0275\u0275advance(),e.\u0275\u0275property("form",r.bucketForm)("submitText",e.\u0275\u0275pipeBind1(93,53,r.action)+" "+e.\u0275\u0275pipeBind1(94,55,r.resource))}}function Ia(o,n){if(1&o&&(e.\u0275\u0275elementContainerStart(0),e.\u0275\u0275element(1,"input",158),e.\u0275\u0275elementContainerEnd()),2&o){const t=n.$implicit,_=e.\u0275\u0275nextContext(),i=_.tag,a=_.index;e.\u0275\u0275advance(),e.\u0275\u0275propertyInterpolate2("id","tag-",t.attribute,"-",a,""),e.\u0275\u0275property("ngbTooltip",t.attribute)("value",i[t.attribute])}}function Oa(o,n){if(1&o){const t=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"div",154),e.\u0275\u0275template(1,Ia,2,5,"ng-container",94),e.\u0275\u0275elementStart(2,"cds-icon-button",155),e.\u0275\u0275listener("click",function(){const i=e.\u0275\u0275restoreView(t).index,a=e.\u0275\u0275nextContext();return e.\u0275\u0275resetView(a.showTagModal(i))}),e.\u0275\u0275namespaceSVG(),e.\u0275\u0275element(3,"svg",156),e.\u0275\u0275elementEnd(),e.\u0275\u0275namespaceHTML(),e.\u0275\u0275elementStart(4,"cds-icon-button",157),e.\u0275\u0275listener("click",function(){const i=e.\u0275\u0275restoreView(t).index,a=e.\u0275\u0275nextContext();return e.\u0275\u0275resetView(a.deleteTag(i))}),e.\u0275\u0275namespaceSVG(),e.\u0275\u0275element(5,"svg",156),e.\u0275\u0275elementEnd()()}if(2&o){const t=e.\u0275\u0275nextContext();e.\u0275\u0275advance(),e.\u0275\u0275property("ngForOf",t.tagConfig),e.\u0275\u0275advance(2),e.\u0275\u0275property("cdsIcon",t.icons.edit)("size",t.icons.size16),e.\u0275\u0275advance(2),e.\u0275\u0275property("cdsIcon",t.icons.trash)("size",t.icons.size16)}}function Ga(o,n){1&o&&(e.\u0275\u0275elementStart(0,"cd-loading-panel"),e.\u0275\u0275i18n(1,78),e.\u0275\u0275elementEnd())}class Wt extends tt.g{get isVersioningEnabled(){return this.bucketForm.getValue("versioning")}get isMfaDeleteEnabled(){return this.bucketForm.getValue("mfa-delete")}constructor(n,t,_,i,a,r,s,d,u,m,C,O,f,I,R){super(),this.route=n,this.router=t,this.formBuilder=_,this.rgwBucketService=i,this.rgwSiteService=a,this.modalService=r,this.rgwUserService=s,this.notificationService=d,this.textAreaJsonFormatterService=u,this.textAreaXmlFormatterService=m,this.actionLabels=C,this.changeDetectorRef=O,this.rgwMultisiteService=f,this.rgwDaemonService=I,this.rgwAccountsService=R,this.editing=!1,this.owners=null,this.accounts=[],this.accountUsers=[],this.kmsProviders=null,this.placementTargets=[],this.isVersioningAlreadyEnabled=!1,this.isMfaDeleteAlreadyEnabled=!1,this.icons=L.FI,this.kmsConfigured=!1,this.s3Configured=!1,this.tags=[],this.dirtyTags=!1,this.tagConfig=[{attribute:"key"},{attribute:"value"}],this.grantees=[Pe.Owner,Pe.Everyone,Pe.AuthenticatedUsers],this.aclPermissions=[Se.FullControl],this.editing=this.router.url.startsWith(`/rgw/bucket/${M.Qp.EDIT}`),this.action=this.editing?this.actionLabels.EDIT:this.actionLabels.CREATE,this.resource=$localize`bucket`,this.createForm()}ngAfterViewChecked(){this.changeDetectorRef.detectChanges(),this.textAreaOnChange(this.bucketPolicyTextArea),this.textAreaOnChange(this.lifecycleTextArea)}createForm(){const n=this,t=F.xQ.custom("lockDays",()=>{if(!n.bucketForm||!N().get(n.bucketForm.getRawValue(),"lock_enabled"))return!1;const _=Number(n.bucketForm.getValue("lock_retention_period_days"));return!Number.isInteger(_)||0===_});this.bucketForm=this.formBuilder.group({id:[null],bid:[null,[l.Validators.required],this.editing?[]:[F.xQ.bucketName(),F.xQ.bucketExistence(!1,this.rgwBucketService)]],owner:[null,[F.xQ.requiredIf({isAccountOwner:!1})]],kms_provider:["vault"],"placement-target":[null],versioning:[null],"mfa-delete":[null],"mfa-token-serial":[""],"mfa-token-pin":[""],lock_enabled:[{value:!1,disabled:this.editing}],encryption_enabled:[null],encryption_type:[null,[F.xQ.requiredIf({encryption_enabled:!0})]],keyId:[null,[F.xQ.requiredIf({encryption_type:"aws:kms",encryption_enabled:!0})]],lock_mode:["COMPLIANCE"],lock_retention_period_days:[10,[F.xQ.number(!1),t]],bucket_policy:["{}",F.xQ.json()],lifecycle:["{}",F.xQ.jsonOrXml()],grantee:[Pe.Owner,[l.Validators.required]],aclPermission:[[Se.FullControl],[l.Validators.required]],replication:[!1],isAccountOwner:[!1],accountUser:[null,[F.xQ.requiredIf({isAccountOwner:!0})]]})}ngOnInit(){const n={owners:this.rgwUserService.enumerate(!0),accounts:this.rgwAccountsService.list()};this.multisiteStatus$=this.rgwMultisiteService.status(),this.isDefaultZoneGroup$=this.rgwDaemonService.selectedDaemon$.pipe((0,Z.switchMap)(t=>this.rgwSiteService.get("default-zonegroup").pipe((0,Z.map)(_=>t.zonegroup_id===_)))),this.kmsProviders=pn.kmsProviders,this.rgwBucketService.getEncryptionConfig().subscribe(t=>{this.s3Configured=t.s3&&Object.keys(t.s3).length>0,this.kmsConfigured=t.kms&&Object.keys(t.kms).length>0,this.kmsConfigured&&this.s3Configured?this.bucketForm.get("encryption_type").setValue(""):this.kmsConfigured?this.bucketForm.get("encryption_type").setValue("aws:kms"):this.s3Configured?this.bucketForm.get("encryption_type").setValue("AES256"):this.bucketForm.get("encryption_type").setValue("")}),this.editing||(n.getPlacementTargets=this.rgwSiteService.get("placement-targets")),this.route.params.subscribe(t=>{let _="";if(t.hasOwnProperty("owner")&&(_=decodeURIComponent(t.owner)),t.hasOwnProperty("bid")){const i=decodeURIComponent(t.bid);n.getBid=this.rgwBucketService.get(i)}(0,w.forkJoin)(n).subscribe(i=>{if(this.accounts=i.accounts,this.accountUsers=i.owners.filter(a=>a.account_id),this.owners=i.owners.filter(a=>!a.account_id),i.getPlacementTargets){const a=i.getPlacementTargets;this.zonegroup=a.zonegroup,N().forEach(a.placement_targets,r=>{r.description=`${r.name} (${$localize`pool`}: ${r.data_pool})`,this.placementTargets.push(r)}),1===this.placementTargets.length&&this.bucketForm.get("placement-target").setValue(this.placementTargets[0].name)}if(i.getBid){const a=i.getBid,r=N().clone(this.bucketForm.getRawValue());let s=N().pick(a,N().keys(r));if(s.lock_retention_period_days=this.rgwBucketService.getLockDays(a),s["placement-target"]=a.placement_rule,s.versioning=a.versioning===$t.ENABLED,s["mfa-delete"]=a.mfa_delete===yt.ENABLED,s.encryption_enabled="Enabled"===a.encryption,a.tagset)for(const[d,u]of Object.entries(a.tagset))this.tags.push({key:d,value:u.toString()});if(s=N().merge(r,s),this.editing&&([s.grantee,s.aclPermission]=this.aclXmlToFormValues(a.acl,a.owner),s.lifecycle=JSON.stringify(a.lifecycle||{})),this.bucketForm.setValue(s),this.editing){const d=i.owners.map(u=>u.uid);if(!d.includes(s.owner)){const u=Object.assign({uid:_},d.find(m=>m.uid===M.D5.defaultUser));this.accountUsers.push(u),this.bucketForm.get("isAccountOwner").setValue(!0),this.bucketForm.get("isAccountOwner").disable(),this.bucketForm.get("accountUser").setValue(_),this.bucketForm.get("accountUser").disable()}this.isVersioningAlreadyEnabled=this.isVersioningEnabled,this.isMfaDeleteAlreadyEnabled=this.isMfaDeleteEnabled,this.setMfaDeleteValidators(),s.lock_enabled&&this.bucketForm.controls.versioning.disable(),s.bucket_policy&&this.bucketForm.get("bucket_policy").setValue(JSON.stringify(s.bucket_policy,null,2)),s.replication&&("Enabled"===s.replication?.Rule?.Status?this.bucketForm.get("replication").setValue(!0):this.bucketForm.get("replication").setValue(!1)),this.filterAclPermissions()}}this.loadingReady()})})}goToListView(){this.router.navigate(["/rgw/bucket"])}rateLimitFormInit(n){this.bucketForm.addControl("rateLimit",n)}submit(){if(this.bucketForm.pristine&&this.rateLimitComponent.form.pristine)return void this.goToListView();if(this.bucketForm.pending)return void this.bucketForm.setErrors({cdSubmitButton:!0});null==this.bucketForm.getValue("encryption_enabled")&&(this.bucketForm.get("encryption_enabled").setValue(!1),this.bucketForm.get("encryption_type").setValue(null));const n=this.bucketForm.value,t=this.tagsToXML(this.tags),_=this.getBucketPolicy(),i=this.permissionToCannedAcl();if(this.editing){const a=this.getVersioningStatus(),r=this.getMfaDeleteStatus();let s;s=this.bucketForm.get("accountUser").disabled?"":n.isAccountOwner?this.accountUsers.filter(u=>n.accountUser===u.uid)[0]?.account_id??n.owner:n.owner,this.rgwBucketService.update(n.bid,n.id,s,a,n.encryption_enabled,n.encryption_type,n.keyId,r,n["mfa-token-serial"],n["mfa-token-pin"],n.lock_mode,n.lock_retention_period_days,t,_,i,n.replication,n.lifecycle).subscribe(()=>{this.notificationService.show(x._.success,$localize`Updated Object Gateway bucket '${n.bid}'.`),this.updateBucketRateLimit(),this.goToListView()},()=>{this.bucketForm.setErrors({cdSubmitButton:!0})})}else{const a=n.isAccountOwner?n.accountUser:n.owner;this.rgwBucketService.create(n.bid,a,this.zonegroup,n["placement-target"],n.lock_enabled,n.lock_mode,n.lock_retention_period_days,n.encryption_enabled,n.encryption_type,n.keyId,t,_,i,n.replication).subscribe(()=>{this.notificationService.show(x._.success,$localize`Created Object Gateway bucket '${n.bid}'`),this.goToListView(),this.updateBucketRateLimit()},()=>{this.bucketForm.setErrors({cdSubmitButton:!0})})}}updateBucketRateLimit(){const n=this.bucketForm.getValue("owner")||"",t=this.bucketForm.getValue("bid");let _;const i=n.includes("$"),a=t.includes("/");_=a&&i?t:i?`${n.split("$")[0]}/${t}`:a?t.split("/")[1]:t;const r=this.rateLimitComponent.getRateLimitFormValue();r&&this.rgwBucketService.updateBucketRateLimit(_,r).subscribe(()=>{},s=>{this.notificationService.show(x._.error,s)})}areMfaCredentialsRequired(){return this.isMfaDeleteEnabled!==this.isMfaDeleteAlreadyEnabled||this.isMfaDeleteAlreadyEnabled&&this.isVersioningEnabled!==this.isVersioningAlreadyEnabled}setMfaDeleteValidators(){const n=this.bucketForm.get("mfa-token-serial"),t=this.bucketForm.get("mfa-token-pin");this.areMfaCredentialsRequired()?(n.setValidators(l.Validators.required),t.setValidators(l.Validators.required)):(n.setValidators(null),t.setValidators(null)),n.updateValueAndValidity(),t.updateValueAndValidity()}getVersioningStatus(){return this.isVersioningEnabled?$t.ENABLED:$t.SUSPENDED}getMfaDeleteStatus(){return this.isMfaDeleteEnabled?yt.ENABLED:yt.DISABLED}getBucketPolicy(){return this.bucketForm.getValue("bucket_policy")||"{}"}fileUpload(n,t){const _=n[0];(new FileReader).addEventListener("load",()=>{const a=this.bucketForm.get(t);a.setValue(_),a.markAsDirty(),a.markAsTouched(),a.updateValueAndValidity()})}textAreaOnChange(n){n?.nativeElement?.value?.startsWith?.("<")?this.textAreaXmlFormatterService.format(n):this.textAreaJsonFormatterService.format(n)}openUrl(n){window.open(n,"_blank")}clearTextArea(n,t=""){this.bucketForm.get(n).setValue(t),this.bucketForm.markAsDirty(),this.bucketForm.updateValueAndValidity()}showTagModal(n){const _=this.modalService.show(mn);_.currentKeyTags=this.tags.map(i=>i.key),N().isNumber(n)&&(_.editMode=!0,_.fillForm(this.tags[n]),_.storedKey=this.tags[n].key),_.submitAction.subscribe(i=>{this.setTag(i,n)})}deleteTag(n){this.tags.splice(n,1),this.dirtyTags=!0,this.bucketForm.markAsDirty(),this.bucketForm.updateValueAndValidity()}setTag(n,t){N().isNumber(t)?this.tags[t]=n:this.tags.push(n),this.dirtyTags=!0,this.bucketForm.markAsDirty(),this.bucketForm.updateValueAndValidity()}tagsToXML(n){if(!this.dirtyTags&&0===n.length)return"";let t="<Tagging><TagSet>";for(const _ of n){t+="<Tag>";for(const i in _)"key"===i?t+=`<Key>${_[i]}</Key>`:"value"===i&&(t+=`<Value>${_[i]}</Value>`);t+="</Tag>"}return t+="</TagSet></Tagging>",t}aclXmlToFormValues(n,t){const _=new Go.Parser({explicitArray:!1,trim:!0});let i=Se.FullControl,a=Pe.Owner;return _.parseString(n,(r,s)=>{if(r)return null;const d=s.AccessControlPolicy.AccessControlList.Grant;for(let u=0;u<d.length;u++)d[u].Grantee.ID!==t&&(d[u].Grantee.URI&&d[u].Grantee.URI.includes("AllUsers")?(a=Pe.Everyone,i="READ"===d[u].Permission&&i!==Se.Write?Se.Read:" WRITE"===d[u].Permission&&i!==Se.Read?Se.Write:Se.All):d[u].Grantee.URI&&d[u].Grantee.URI.includes("AuthenticatedUsers")&&(a=Pe.AuthenticatedUsers,i=Se.Read))}),[a,i]}onSelectionFilter(){this.filterAclPermissions(),this.bucketForm.get("aclPermission").setValue(this.aclPermissions[0])}filterAclPermissions(){switch(this.bucketForm.get("grantee").value){case Pe.Owner:this.aclPermissions=[Se.FullControl];break;case Pe.Everyone:this.aclPermissions=[Se.Read,Se.All];break;case Pe.AuthenticatedUsers:this.aclPermissions=[Se.Read]}}permissionToCannedAcl(){const n=this.bucketForm.get("grantee").value,t=this.bucketForm.get("aclPermission").value;switch(n){case Pe.Everyone:return t===Se.Read?"public-read":"public-read-write";case Pe.AuthenticatedUsers:return"authenticated-read";default:return"private"}}static{this.\u0275fac=function(t){return new(t||Wt)(e.\u0275\u0275directiveInject(Y.ActivatedRoute),e.\u0275\u0275directiveInject(Y.Router),e.\u0275\u0275directiveInject(Ne.$),e.\u0275\u0275directiveInject(Le.c),e.\u0275\u0275directiveInject(No.B),e.\u0275\u0275directiveInject(he.V),e.\u0275\u0275directiveInject(Rt.p),e.\u0275\u0275directiveInject(te.J),e.\u0275\u0275directiveInject(Ao.C),e.\u0275\u0275directiveInject(Dt),e.\u0275\u0275directiveInject(M.Ss),e.\u0275\u0275directiveInject(e.ChangeDetectorRef),e.\u0275\u0275directiveInject(xe.A),e.\u0275\u0275directiveInject(ye.y),e.\u0275\u0275directiveInject(Je))}}static{this.\u0275cmp=e.\u0275\u0275defineComponent({type:Wt,selectors:[["cd-rgw-bucket-form"]],viewQuery:function(t,_){if(1&t&&(e.\u0275\u0275viewQuery(ti,5),e.\u0275\u0275viewQuery(ni,5),e.\u0275\u0275viewQuery(ft,5)),2&t){let i;e.\u0275\u0275queryRefresh(i=e.\u0275\u0275loadQuery())&&(_.bucketPolicyTextArea=i.first),e.\u0275\u0275queryRefresh(i=e.\u0275\u0275loadQuery())&&(_.lifecycleTextArea=i.first),e.\u0275\u0275queryRefresh(i=e.\u0275\u0275loadQuery())&&(_.rateLimitComponent=i.first)}},features:[e.\u0275\u0275InheritDefinitionFeature],decls:5,vars:1,consts:()=>{let n,t,_,i,a,r,s,d,u,m,C,O,f,I,R,h,G,U,k,y,H,X,B,V,S,P,ee,Q,q,J,$,_e,D,W,ce,de,ue,pe,me,Te,ge,le,Ee,Re,Ce,fe,E,Ze,ve,Ke,qe,v,it,at,rt,lt,st,ct,dt,ut,pt,mt,Tt,gt,Ye,Et;return n=$localize`:␟2fecea01ce1d44114ee45144eff6d47a5016a74f␟5451140586403689891:Name...`,t=$localize`:form title␟fb127ea03835b3230f0ed981c7080e2ccb879621␟3346778808274133574:${"\ufffd0\ufffd"}:INTERPOLATION: ${"\ufffd1\ufffd"}:INTERPOLATION_1:`,_=$localize`:␟8175c3b9362bbb36b17edeedb0d064b02383d206␟1321389868536200891:Name ${"\ufffd#11\ufffd\ufffd/#11\ufffd"}:TAG_INPUT:`,i=$localize`:␟948758e1412bb2ecdb98e3a4f1cbb6d7458456f2␟8255877266497322342:Encryption`,a=$localize`:␟ad35ffa6e2fd6510dbf7234772df2ede32ed8f61␟3429099208235819029:Enable ${"\ufffd#26\ufffd"}:START_TAG_CD_HELP_TEXT:${"\ufffd#27\ufffd"}:START_TAG_SPAN:Enables encryption for the objects in the bucket. To enable encryption on a bucket you need to set the configuration values for SSE-S3 or SSE-KMS. To set the configuration values ${"\ufffd#28\ufffd"}:START_LINK:Click here${"\ufffd/#28\ufffd"}:CLOSE_LINK:${"\ufffd/#27\ufffd"}:CLOSE_TAG_SPAN:${"\ufffd/#26\ufffd"}:CLOSE_TAG_CD_HELP_TEXT:`,r=$localize`:␟ceffc39de050ef87d0e4641a359539daf8dfd3df␟3354578761019630653:Replication`,s=$localize`:␟c125a7aec809a15b1409b7a16758c4465e4c8d69␟662694007906510284:Tags ${"\ufffd#39\ufffd"}:START_TAG_CD_HELP_TEXT:Tagging provides a way to categorize storage${"\ufffd/#39\ufffd"}:CLOSE_TAG_CD_HELP_TEXT:`,d=$localize`:␟21fd41eb147f55ca26362f9c398e47733639837a␟6560126119609945418:Add tag`,u=$localize`:␟d04b03e1b5cc9e9afeed9698da06f7580ebc35b4␟3462152738547451851:Policies `,m=$localize`:␟9b2ec47dfe676dcf9f2772fd67d00f55b4fd3cf0␟714751106136135958:Bucket Policy ${"\ufffd#54\ufffd"}:START_TAG_TEXTAREA:${"\ufffd/#54\ufffd"}:CLOSE_TAG_TEXTAREA:`,C=$localize`:␟4bb699b9a38f8d2bdbf737c3abf49aa3baf85a88␟8647469621295015767:Policy examples ${"\ufffd#63\ufffd"}:START_TAG__SVG_SVG:${"\ufffd/#63\ufffd"}:CLOSE_TAG__SVG_SVG:`,O=$localize`:␟2690a1016b7d4e3d0cb9699a8a8af087a0215b47␟2888819797814853008:Policy generator ${"\ufffd#66\ufffd"}:START_TAG__SVG_SVG:${"\ufffd/#66\ufffd"}:CLOSE_TAG__SVG_SVG:`,f=$localize`:␟a42f0f8523e30ff7c93f11e920286de3135c136d␟1269121010872657298:Clear ${"\ufffd#71\ufffd"}:START_TAG__SVG_SVG:${"\ufffd/#71\ufffd"}:CLOSE_TAG__SVG_SVG:`,I=$localize`:␟563720238586718251cf06e07e9bd1f644729efa␟2160884666311770119:ACL ${"\ufffd#76\ufffd"}:START_TAG_CD_HELP_TEXT:Any changes to the ACL will overwrite previous one. You can choose any of the available options to modify the spcified user group.${"\ufffd/#76\ufffd"}:CLOSE_TAG_CD_HELP_TEXT:`,R=$localize`:␟e7e1e1daf5c9b2b15da8a3e8f3427e84679de9a7␟7502047924005789605:Grantee ${"\ufffd*81:1\ufffd\ufffd#1:1\ufffd"}:START_TAG_OPTION:${"\ufffd0:1\ufffd"}:INTERPOLATION:${"\ufffd/#1:1\ufffd\ufffd/*81:1\ufffd"}:CLOSE_TAG_OPTION:`,h=$localize`:␟fad43484060879e47f9e6f30ddcb83d36b320dbe␟6394523358990273876:Id ${"\ufffd#3\ufffd\ufffd/#3\ufffd"}:TAG_INPUT:`,G=$localize`:␟7cbdabcece469fab89cfa687ab152bca18b97498␟1417693714872528491:This field is required.`,U=$localize`:␟4f44bdf9ab00a973bbe482e9fc450e3f67e60c0d␟9013829245398353954:Bucket names can only contain lowercase letters, numbers, periods and hyphens.`,k=$localize`:␟eabb4db920d9f9b2480cf438468b86e1bea02a9b␟2404339360216552222:The chosen name is already in use.`,y=$localize`:␟b06de7f834c622197e68b66a2abe893040b174c4␟4249712729881266499:Bucket names must not contain uppercase characters or underscores.`,H=$localize`:␟6abacf4af2f66d3af08c5ebe502b21b1f42ac649␟6733475727468566012:Each label must start and end with a lowercase letter or a number.`,X=$localize`:␟85a7f52e6813e0535026f61a2d6e8adc8a1d006a␟8659707323569499809:Bucket names cannot be formatted as IP address.`,B=$localize`:␟f2a2460396d35e14e7acfb4e060196a0679bdcff␟6709353723402492142:Bucket labels cannot be empty and can only contain lowercase letters, numbers and hyphens.`,V=$localize`:␟cf5c849977e0be2dbfc862d044edd323bfd9fb77␟8081269462385764110:Bucket names must be 3 to 63 characters long.`,S=$localize`:␟6b9fa9fa9b3a0a98b896d10f02ab3d4ad95ce928␟196004600429564140:Select account user `,P=$localize`:␟f6c4165cc6bcabf6b7f7eaf3b4112443b49b0fee␟6235926984577624371:Account user ${"\ufffd*3:1\ufffd\ufffd#1:1\ufffd"}:START_TAG_OPTION:Loading...${"[\ufffd/#1:1\ufffd\ufffd/*3:1\ufffd|\ufffd/#1:2\ufffd\ufffd/*4:2\ufffd|\ufffd/#1:3\ufffd\ufffd/*5:3\ufffd]"}:CLOSE_TAG_OPTION:${"\ufffd*4:2\ufffd\ufffd#1:2\ufffd"}:START_TAG_OPTION_1:-- Select a user --${"[\ufffd/#1:1\ufffd\ufffd/*3:1\ufffd|\ufffd/#1:2\ufffd\ufffd/*4:2\ufffd|\ufffd/#1:3\ufffd\ufffd/*5:3\ufffd]"}:CLOSE_TAG_OPTION:${"\ufffd*5:3\ufffd\ufffd#1:3\ufffd"}:START_TAG_OPTION_2:${"\ufffd0:3\ufffd"}:INTERPOLATION:${"[\ufffd/#1:1\ufffd\ufffd/*3:1\ufffd|\ufffd/#1:2\ufffd\ufffd/*4:2\ufffd|\ufffd/#1:3\ufffd\ufffd/*5:3\ufffd]"}:CLOSE_TAG_OPTION:`,P=e.\u0275\u0275i18nPostprocess(P),ee=$localize`:␟7cbdabcece469fab89cfa687ab152bca18b97498␟1417693714872528491:This field is required.`,Q=$localize`:␟c774f72059fad490664e59b98d61395a9234f9fb␟3402473199498628464: The bucket is owned by an account. UI does not support changing the ownership of bucket owned by an account. `,q=$localize`:␟8d773bf2036d382f2e4da1a352b0bc8cc091eb51␟6806918334121303080:Owner ${"\ufffd*3:1\ufffd\ufffd#1:1\ufffd"}:START_TAG_OPTION:Loading...${"[\ufffd/#1:1\ufffd\ufffd/*3:1\ufffd|\ufffd/#1:2\ufffd\ufffd/*4:2\ufffd|\ufffd/#1:3\ufffd\ufffd/*5:3\ufffd]"}:CLOSE_TAG_OPTION:${"\ufffd*4:2\ufffd\ufffd#1:2\ufffd"}:START_TAG_OPTION_1:-- Select a user --${"[\ufffd/#1:1\ufffd\ufffd/*3:1\ufffd|\ufffd/#1:2\ufffd\ufffd/*4:2\ufffd|\ufffd/#1:3\ufffd\ufffd/*5:3\ufffd]"}:CLOSE_TAG_OPTION:${"\ufffd*5:3\ufffd\ufffd#1:3\ufffd"}:START_TAG_OPTION_2:${"\ufffd0:3\ufffd"}:INTERPOLATION:${"[\ufffd/#1:1\ufffd\ufffd/*3:1\ufffd|\ufffd/#1:2\ufffd\ufffd/*4:2\ufffd|\ufffd/#1:3\ufffd\ufffd/*5:3\ufffd]"}:CLOSE_TAG_OPTION:`,q=e.\u0275\u0275i18nPostprocess(q),J=$localize`:␟7cbdabcece469fab89cfa687ab152bca18b97498␟1417693714872528491:This field is required.`,$=$localize`:␟efeade5060b3add63863c24871f0830fb16b7e6d␟2914579537400068937:Versioning`,_e=$localize`:␟4dd0667dd300457039c8c1e06e0e2de0f3085c0b␟4233025752390204233:Enabled ${"\ufffd#6\ufffd"}:START_TAG_CD_HELP_TEXT:${"\ufffd#7\ufffd"}:START_TAG_SPAN:Enables versioning for the objects in the bucket.${"\ufffd/#7\ufffd"}:CLOSE_TAG_SPAN:${"\ufffd/#6\ufffd"}:CLOSE_TAG_CD_HELP_TEXT:`,D=$localize`:␟40fbc3ac8c1ea4ecfe62247e91f1f999ad5baf76␟3465476368908562719:Enables MFA (multi-factor authentication) Delete, which requires additional authentication for changing the bucket versioning state.`,W=$localize`:␟9e6775ffd06878aa145c07359f28557f01ede04f␟6281282020732717137:Multi-Factor Authentication`,ce=$localize`:␟e2f65aa2ded40986c7105eed7cc180c8d0959919␟2031320407806198233:Delete enabled `,de=$localize`:␟d66149406ccacc549910506a96f235748150c1b0␟8475426351936200136:Token Serial Number ${"\ufffd#3\ufffd\ufffd/#3\ufffd"}:TAG_INPUT:`,ue=$localize`:␟7cbdabcece469fab89cfa687ab152bca18b97498␟1417693714872528491:This field is required.`,pe=$localize`:␟da32d6025afadaf6c878b23c804a74d38eac2e0e␟9122901985779700089:Token PIN ${"\ufffd#3\ufffd\ufffd/#3\ufffd"}:TAG_INPUT:`,me=$localize`:␟7cbdabcece469fab89cfa687ab152bca18b97498␟1417693714872528491:This field is required.`,Te=$localize`:␟af6cdfa6d5ef95d59d1dcbaa750a59e2609e6a5b␟1781740300482876151: Object Locking ${"\ufffd#4\ufffd"}:START_TAG_CD_HELP_TEXT: Store objects using a write-once-read-many (WORM) model to prevent objects from being deleted or overwritten for a fixed amount of time or indefinitely. Object Locking works only in versioned buckets. ${"\ufffd/#4\ufffd"}:CLOSE_TAG_CD_HELP_TEXT:`,ge=$localize`:␟6f30ff742f6a2cc3393d076980335a5a1a039fe7␟9056091914249309958:Enable ${"\ufffd#7\ufffd"}:START_TAG_CD_HELP_TEXT:${"\ufffd#8\ufffd"}:START_TAG_SPAN:Enables locking for the objects in the bucket. Locking can only be enabled while creating a bucket.${"\ufffd/#8\ufffd"}:CLOSE_TAG_SPAN:${"\ufffd/#7\ufffd"}:CLOSE_TAG_CD_HELP_TEXT:`,le=$localize`:␟91bef4c0af49bbf851d7f6f22e9d9a2b64e16784␟4224420150565706154:${"\ufffd#3\ufffd"}:START_TAG_OPTION:Compliance${"[\ufffd/#3\ufffd|\ufffd/#4\ufffd]"}:CLOSE_TAG_OPTION:${"\ufffd#4\ufffd"}:START_TAG_OPTION_1:Governance${"[\ufffd/#3\ufffd|\ufffd/#4\ufffd]"}:CLOSE_TAG_OPTION:`,le=e.\u0275\u0275i18nPostprocess(le),Ee=$localize`:␟1b55ec72e37656eeef26e5d12db9b56a9e27725e␟7948067527532659590: In COMPLIANCE an object version cannot be overwritten or deleted for the duration of the period. `,Re=$localize`:␟a43cb281a3b4e35f9434ad5c96edb4ff4f09675a␟1429819440482042027: In GOVERNANCE mode, users cannot overwrite or delete an object version or alter its lock settings unless they have special permissions. `,Ce=$localize`:␟dd7023d20e7c5cbfe4e47c62181aad677a225586␟7001274759453742081:Retention period (days)`,fe=$localize`:␟218c7d6d318c51e7105309aaeb0baec9d19e4efb␟3267772399910551465:The number of days that you want to specify for the default retention period that will be applied to new objects placed in this bucket.`,E=$localize`:␟289b101ec12427b3ca819df9e43cc3b14fae2cc4␟2191011361163902177:The entered value must be a positive integer.`,Ze=$localize`:␟48d8247c1ba2ea156109bf286c5f6dd26b4be760␟3757860322493786066:Retention Days must be a positive integer.`,ve=$localize`:␟ce26f7023aef537c681acda893a68bf6bb1cc7f6␟60233755655123591:KMS Provider ${"\ufffd*4:1\ufffd\ufffd#1:1\ufffd"}:START_TAG_OPTION:Loading...${"[\ufffd/#1:1\ufffd\ufffd/*4:1\ufffd|\ufffd/#1:2\ufffd\ufffd/*5:2\ufffd|\ufffd/#1:3\ufffd\ufffd/*6:3\ufffd]"}:CLOSE_TAG_OPTION:${"\ufffd*5:2\ufffd\ufffd#1:2\ufffd"}:START_TAG_OPTION_1:-- Select a provider --${"[\ufffd/#1:1\ufffd\ufffd/*4:1\ufffd|\ufffd/#1:2\ufffd\ufffd/*5:2\ufffd|\ufffd/#1:3\ufffd\ufffd/*6:3\ufffd]"}:CLOSE_TAG_OPTION:${"\ufffd*6:3\ufffd\ufffd#1:3\ufffd"}:START_TAG_OPTION_2:${"\ufffd0:3\ufffd"}:INTERPOLATION:${"[\ufffd/#1:1\ufffd\ufffd/*4:1\ufffd|\ufffd/#1:2\ufffd\ufffd/*5:2\ufffd|\ufffd/#1:3\ufffd\ufffd/*6:3\ufffd]"}:CLOSE_TAG_OPTION:`,ve=e.\u0275\u0275i18nPostprocess(ve),Ke=$localize`:␟cb6b156d36ec17f6d6e512d28f9003f2c2f0cd5b␟1818654113497700303:Key Id ${"\ufffd#12\ufffd\ufffd/#12\ufffd"}:TAG_INPUT:`,qe=$localize`:␟7cbdabcece469fab89cfa687ab152bca18b97498␟1417693714872528491:This field is required.`,v=$localize`:␟7cbdabcece469fab89cfa687ab152bca18b97498␟1417693714872528491:This field is required.`,it=$localize`:␟b94dbcd3c1d95b2d174244a8c7608c90fac49717␟3513740052570529667:Enable ${"\ufffd#3\ufffd"}:START_TAG_CD_HELP_TEXT:Enables replication for the objects in the bucket.${"\ufffd/#3\ufffd"}:CLOSE_TAG_CD_HELP_TEXT:`,at=$localize`:␟9c56e4681dd7190d63b3ab54db7d7b91f7678847␟5505649082926504306: A bi-directional sync policy group will be created by the dashboard along with flows and pipes. The pipe id will then be used for applying the replication policy to the bucket. `,rt=$localize`:␟02e908c671b438fdcc6a861cc5a7499ba964b0e5␟8143961751401554234:Invalid json text.`,lt=$localize`:␟460e36e84bece30e1714f5c963de3dce04e8bf46␟8667085254222182944:Lifecycle ${"\ufffd#3\ufffd"}:START_TAG_TEXTAREA:${"\ufffd/#3\ufffd"}:CLOSE_TAG_TEXTAREA:${"\ufffd#5\ufffd"}:START_TAG_CD_HELP_TEXT:JSON or XML formatted document${"\ufffd/#5\ufffd"}:CLOSE_TAG_CD_HELP_TEXT:`,st=$localize`:␟4bb699b9a38f8d2bdbf737c3abf49aa3baf85a88␟8647469621295015767:Policy examples ${"\ufffd#13\ufffd"}:START_TAG__SVG_SVG:${"\ufffd/#13\ufffd"}:CLOSE_TAG__SVG_SVG:`,ct=$localize`:␟a42f0f8523e30ff7c93f11e920286de3135c136d␟1269121010872657298:Clear ${"\ufffd#18\ufffd"}:START_TAG__SVG_SVG:${"\ufffd/#18\ufffd"}:CLOSE_TAG__SVG_SVG:`,dt=$localize`:␟02e908c671b438fdcc6a861cc5a7499ba964b0e5␟8143961751401554234:Invalid json text.`,ut=$localize`:␟8133097358036510bb213c2f3970b538d1d71fc7␟5997098400747959040:Invalid xml text.`,pt=$localize`:␟7cbdabcece469fab89cfa687ab152bca18b97498␟1417693714872528491:This field is required.`,mt=$localize`:␟f8ab5e907578221f02bb7ef0898b726ef3b9a440␟2513536199589198146:${"\ufffd0\ufffd"}:INTERPOLATION:`,Tt=$localize`:␟7cbdabcece469fab89cfa687ab152bca18b97498␟1417693714872528491:This field is required.`,gt=$localize`:␟0c255c4ae8abcc35758ddd54237829de1686dda8␟1554897594752124626:When creating a bucket, a placement target can be provided as part of the LocationConstraint to override the default placement targets from the user and zonegroup.`,Ye=$localize`:␟b24196b7deb5edf4cbb5d6a7c6cddf9e14ad49d0␟7215773291314199962:Placement target ${"\ufffd*3:1\ufffd\ufffd#1:1\ufffd"}:START_TAG_OPTION:Loading...${"[\ufffd/#1:1\ufffd\ufffd/*3:1\ufffd|\ufffd/#1:2\ufffd\ufffd/*4:2\ufffd|\ufffd/#1:3\ufffd\ufffd/*5:3\ufffd]"}:CLOSE_TAG_OPTION:${"\ufffd*4:2\ufffd\ufffd#1:2\ufffd"}:START_TAG_OPTION_1:-- Select a placement target --${"[\ufffd/#1:1\ufffd\ufffd/*3:1\ufffd|\ufffd/#1:2\ufffd\ufffd/*4:2\ufffd|\ufffd/#1:3\ufffd\ufffd/*5:3\ufffd]"}:CLOSE_TAG_OPTION:${"\ufffd*5:3\ufffd\ufffd#1:3\ufffd"}:START_TAG_OPTION_2:${"\ufffd0:3\ufffd"}:INTERPOLATION:${"[\ufffd/#1:1\ufffd\ufffd/*3:1\ufffd|\ufffd/#1:2\ufffd\ufffd/*4:2\ufffd|\ufffd/#1:3\ufffd\ufffd/*5:3\ufffd]"}:CLOSE_TAG_OPTION:`,Ye=e.\u0275\u0275i18nPostprocess(Ye),Et=$localize`:␟cded02ad5c442b80b17cb48c6ebc43902ab69e9c␟8552841994816654784:Checking multi-site status...`,[["tagTpl",""],["loadingTpl",""],["frm","ngForm"],["nameError",""],["bucketPolicyTextArea",""],["bucketPolicyError",""],["granteeError",""],["aclPermissionError",""],["accountUserError",""],["ownerError",""],["mfaSerialError",""],["mfaPinError",""],["lockModeHelper",""],["retentionPeriodError",""],["kmsProviderError",""],["keyIdError",""],["lifecycleTextArea",""],["lifecycleError",""],t,_,i,a,r,s,d,u,m,C,O,f,I,R,h,G,U,k,y,H,X,B,V,S,P,ee,Q,q,J,$,_e,W,ce,de,ue,pe,me,Te,ge,le,Ee,Re,E,Ze,ve,Ke,qe,v,it,at,rt,lt,st,ct,dt,ut,pt,mt,Tt,Ye,Et,["cdsCol","",3,"columnNumbers",4,"cdFormLoading"],["cdsCol","",3,"columnNumbers"],["name","bucketForm","novalidate","",3,"formGroup"],[1,"form-header"],["class","form-item",4,"ngIf"],[1,"form-item"],["for","bid","cdRequiredField","Name",3,"invalid","invalidText"],["cdsText","","placeholder",n,"id","bid","name","bid","formControlName","bid",3,"readonly","autofocus","invalid"],["formControlName","isAccountOwner"],[4,"ngIf"],[1,"cd-header"],["name","encryption_enabled","formControlName","encryption_enabled","id","encryption_enabled",3,"disabled"],["aria-label","encryption helper"],["href","#/rgw/configuration"],[4,"ngIf","ngIfElse"],[4,"ngFor","ngForOf"],["cdsRow",""],["cdsCol",""],[3,"description","highContrast","caret"],["cdsButton","tertiary","id","add-tag",3,"click","disabled"],[1,"cds--btn__icon",3,"cdsIcon","size"],["for","id",3,"invalid","invalidText"],["cdsTextArea","","id","bucket_policy","formControlName","bucket_policy","cols","200",1,"textarea-field",3,"change"],[1,"mt-1"],["cdsButton","tertiary","id","example-generator-button",3,"click"],[1,"float-end","mt-1"],["cdsButton","tertiary","id","clear-bucket-policy",3,"click"],["cdsRow","",1,"form-item-append"],["id","grantee","name","grantee","label","Grantee","formControlName","grantee","helperText","Select a grantee (user group) to modify it's permisions",3,"valueChange","invalid","invalidText"],[3,"value",4,"ngFor","ngForOf"],["id","aclPermission","name","aclPermission","label","Permissions","helperText","Select the permision to give to the selected grantee. Regardless, the owner of the bucket will always have FULL CONTROL access","formControlName","aclPermission",3,"invalid","invalidText"],[3,"rateLimitFormGroup","type","isEditing","allowBid"],["wrappingClass","text-right",3,"submitActionEvent","form","submitText"],["for","id"],["cdsText","","id","id","name","id","formControlName","id","readonly",""],["class","invalid-feedback",4,"ngIf"],[1,"invalid-feedback"],["label","Account user","id","acc_user","formControlName","accountUser","cdRequiredField","Account user",3,"invalidText","invalid"],[3,"ngValue",4,"ngIf"],["value","",4,"ngIf"],["type","info",4,"ngIf"],[3,"ngValue"],["value",""],[3,"value"],["type","info"],["label","Owner","formControlName","owner","id","owner","cdRequiredField","Owner",3,"invalidText","invalid"],["name","versioning","formControlName","versioning","id","versioning",3,"checkedChange"],["name","mfa-delete","formControlName","mfa-delete","id","mfa-delete","helperText",D,3,"checkedChange"],["for","mfa-token-serial","cdRequiredField","MFA Serial Number",3,"invalid","invalidText"],["cdsText","","id","mfa-token-serial","name","mfa-token-serial","formControlName","mfa-token-serial",3,"invalid"],["for","mfa-token-pin","cdRequiredField","MFA Token PIN",3,"invalid","invalidText"],["cdsText","","id","mfa-token-pin","name","mfa-token-pin","formControlName","mfa-token-pin",3,"invalid"],["name","lock_enabled","formControlName","lock_enabled","id","lock_enabled",3,"disabled"],["type","info","class","me-1",4,"ngIf"],["type","warning",4,"ngIf"],["label","Mode","for","lock_mode","formControlName","lock_mode","name","lock_mode","id","lock_mode",3,"helperText"],["value","COMPLIANCE"],["value","GOVERNANCE"],["name","lock_retention_period_days","formControlName","lock_retention_period_days","id","lock_retention_period_days","min","1","label",Ce,"helperText",fe,3,"invalid","invalidText"],["type","info",1,"me-1"],["type","warning"],["formControlName","encryption_type"],["value","AES256",3,"disabled"],["value","aws:kms",3,"disabled"],["label","KMS Provider","for","kms_provider","formControlName","kms_provider","name","kms_provider","id","kms_provider","cdRequiredField","KMS Provider",3,"invalidText","invalid"],["for","keyId","cdRequiredField","Key Id",3,"invalid","invalidText"],["cdsText","","id","keyId","name","keyId","formControlName","keyId",3,"invalid"],["name","replication","formControlName","replication","id","replication",3,"disabled"],["type","info","class","me-1","id","replication-info","spacingClass","mt-1",4,"ngIf"],["type","info","id","replication-info","spacingClass","mt-1",1,"me-1"],[4,"ngTemplateOutlet","ngTemplateOutletContext"],["cdsTextArea","","id","lifecycle","formControlName","lifecycle","cols","200",1,"textarea-field",3,"change"],["cdsButton","tertiary","id","lifecycle-examples-button",3,"click"],["cdsButton","tertiary","id","clear-lifecycle",3,"click"],["label","Placement target","for","placement-target","formControlName","placement-target","name","placement-target","id","placement-target","helperText",gt],[1,"form-item","form-item-append"],["kind","tertiary","size","md",3,"click"],[1,"cds-info-color","cds--btn__icon",3,"cdsIcon","size"],["kind","danger","size","md",3,"click"],["type","text","cdsText","","readonly","",3,"id","ngbTooltip","value"]]},template:function(t,_){1&t&&e.\u0275\u0275template(0,Pa,95,61,"div",79)(1,Oa,6,5,"ng-template",null,0,e.\u0275\u0275templateRefExtractor)(3,Ga,2,0,"ng-template",null,1,e.\u0275\u0275templateRefExtractor),2&t&&e.\u0275\u0275property("cdFormLoading",_.loading)},dependencies:[g.NgForOf,g.NgIf,g.NgTemplateOutlet,ei.e,Ie.m,oe.e,ie.O,uo.e,Ct.B,St.G,j.S,ne.E,Qe.P,l.\u0275NgNoValidate,l.NgSelectOption,l.\u0275NgSelectMultipleOption,l.DefaultValueAccessor,l.NgControlStatus,l.NgControlStatusGroup,l.FormGroupDirective,l.FormControlName,b.NgbTooltip,c.ColumnDirective,c.RowDirective,c.Button,c.ButtonSet,c.IconButton,c.IconDirective,c.TextareaLabelComponent,c.TextInputLabelComponent,c.TextInput,c.TextArea,c.Checkbox,c.NumberComponent,c.Tooltip,c.Radio,c.RadioGroup,c.Select,c.Option,ft,g.AsyncPipe,g.TitleCasePipe,Oe.r]})}}var et=T(25947),Ue=T(84821),ae=T(62847),Ge=T(19380),Ft=T(85481),xt=T(73651),ho=T(18457),be=T(82254),Nt=T(50813),se=T(2361),bo=T(22453),ke=T(3140);const Na=["region","target_endpoint","access_key","secret_key","target_path"],vo=["region","target_endpoint","access_key","secret_key","target_path","glacier_restore_tier_type","restore_storage_class"],K={LOCAL:"local",CLOUD_TIER:"cloud-s3",GLACIER:"cloud-s3-glacier"},ze_DEFAULT_GLACIER_RESTORE_DAYS=1,ze_DEFAULT_READTHROUGH_RESTORE_DAYS=1,ze_DEFAULT_MULTIPART_SYNC_THRESHOLD=33554432,ze_DEFAULT_MULTIPART_MIN_PART_SIZE=33554432,ze_DEFAULT_STORAGE_CLASS="Standard",nt={LOCAL:"Local",CLOUD_TIER:"Cloud S3",GLACIER:"Cloud S3 Glacier"},Lo="Enables fetching objects from remote cloud S3 if not found locally.",yo="It specifies that objects this size or larger are transitioned to the cloud using multipart upload.",$o="It specifies the minimum part size to use when transitioning objects using multipart upload.",Do="Target Path refers to the storage location (e.g., bucket or container) in the cloud where data will be stored.",Wo="To view or copy your access key, go to your cloud service's user management or credentials section, find your user profile, and locate the access key. You can view and copy the key by following the instructions provided.",xo="To view or copy your secret key, go to your cloud service's user management or credentials section, find your user profile, and locate the secret key. You can view and copy the key by following the instructions provided.",wo="Retain object metadata after transition to the cloud.",Uo=$localize`Local storage uses on-premises or directly attached devices for data storage.`,La=$localize`Cloud S3 storage uses Amazon S3-compatible cloud services for tiering.`,ya=$localize`Glacier storage uses Amazon S3 Glacier for low-cost, long-term archival data storage.`,ko=$localize`Refers to number of days to the object will be restored on glacier/tape endpoint.`,zo=$localize`Restore retrieval type.`,Ho=$localize`Standard glacier restore tier type restores data in 3–5 hours.`,$a=$localize`Expedited glacier restore tier type restores in 1–5 minutes (faster but costlier).`,Xo=$localize`Refers to number of days to the object will be restored on glacier/tape endpoint.`,Bo=$localize`The days for which objects restored via read-through are retained.`,Vo=$localize`The storage class to which object data is to be restored.`,Da=$localize`A Zone Group is a logical grouping of one or more zones that share the same data
                  and metadata, allowing for multi-site replication and geographic distribution of
                  data.`;class Zo{static filterAndMapTierTargets(n){return n.zonegroups.flatMap(t=>t.placement_targets.flatMap(_=>{const i=new Set((_.tier_targets||[]).map(s=>s.key));return[...(_.tier_targets||[]).map(s=>this.getTierTargets(s,t.name,_.name)),...(_.storage_classes||[]).filter(s=>"STANDARD"!==s&&!i.has(s)).map(s=>({zonegroup_name:t.name,placement_target:_.name,storage_class:s,tier_type:K.LOCAL}))]}))}static getTierTargets(n,t,_){const i=n.val,a=i.tier_type,r={zonegroup_name:t,placement_target:_,storage_class:i.storage_class,tier_type:a},s={...r,retain_head_object:i.retain_head_object,allow_read_through:i.allow_read_through,restore_storage_class:i.restore_storage_class,read_through_restore_days:i.read_through_restore_days,...i.s3};return a&&a!==K.LOCAL?a===K.GLACIER?{...s,...i["s3-glacier"]}:s:r}}const Wa=()=>({lg:2,md:2});function xa(o,n){if(1&o){const t=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"cd-alert-panel",55),e.\u0275\u0275listener("action",function(){e.\u0275\u0275restoreView(t);const i=e.\u0275\u0275nextContext(2);return e.\u0275\u0275resetView(i.enableSnapshotSchedule())}),e.\u0275\u0275i18n(1,16),e.\u0275\u0275elementEnd()}}function wa(o,n){if(1&o){const t=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"cd-alert-panel",56),e.\u0275\u0275listener("action",function(){e.\u0275\u0275restoreView(t);const i=e.\u0275\u0275nextContext(2);return e.\u0275\u0275resetView(i.goToCreateStorageClass())}),e.\u0275\u0275i18n(1,17),e.\u0275\u0275elementEnd()}}function Ua(o,n){1&o&&(e.\u0275\u0275elementStart(0,"span"),e.\u0275\u0275i18n(1,18),e.\u0275\u0275elementEnd())}function ka(o,n){1&o&&(e.\u0275\u0275elementStart(0,"span",58),e.\u0275\u0275elementContainerStart(1),e.\u0275\u0275i18n(2,19),e.\u0275\u0275elementContainerEnd(),e.\u0275\u0275elementEnd())}function za(o,n){1&o&&(e.\u0275\u0275elementStart(0,"span",58),e.\u0275\u0275elementContainerStart(1),e.\u0275\u0275i18n(2,20),e.\u0275\u0275elementContainerEnd(),e.\u0275\u0275elementEnd())}function Ha(o,n){if(1&o&&e.\u0275\u0275template(0,ka,3,0,"span",57)(1,za,3,0,"span",57),2&o){e.\u0275\u0275nextContext();const t=e.\u0275\u0275reference(6),_=e.\u0275\u0275nextContext();e.\u0275\u0275property("ngIf",_.tieringForm.showError("name",t,"required")),e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf",_.tieringForm.showError("name",t,"duplicate"))}}function Xa(o,n){1&o&&(e.\u0275\u0275elementStart(0,"option",59),e.\u0275\u0275text(1,"Loading..."),e.\u0275\u0275elementEnd())}function Ba(o,n){1&o&&(e.\u0275\u0275elementStart(0,"option",59),e.\u0275\u0275text(1,"-- No storage class available --"),e.\u0275\u0275elementEnd())}function Va(o,n){1&o&&(e.\u0275\u0275elementStart(0,"option",59),e.\u0275\u0275text(1,"-- Select the storage class --"),e.\u0275\u0275elementEnd())}function Za(o,n){if(1&o&&(e.\u0275\u0275elementStart(0,"option",50),e.\u0275\u0275text(1),e.\u0275\u0275elementEnd()),2&o){const t=n.$implicit;e.\u0275\u0275property("value",t.storage_class),e.\u0275\u0275advance(),e.\u0275\u0275textInterpolate1(" ",t.storage_class," ")}}function Ka(o,n){1&o&&(e.\u0275\u0275elementStart(0,"span"),e.\u0275\u0275i18n(1,21),e.\u0275\u0275elementEnd())}function qa(o,n){1&o&&(e.\u0275\u0275elementStart(0,"span"),e.\u0275\u0275i18n(1,23),e.\u0275\u0275elementEnd())}function ja(o,n){1&o&&(e.\u0275\u0275elementStart(0,"span",58),e.\u0275\u0275elementContainerStart(1),e.\u0275\u0275i18n(2,24),e.\u0275\u0275elementContainerEnd(),e.\u0275\u0275elementEnd())}function Ya(o,n){if(1&o&&e.\u0275\u0275template(0,ja,3,0,"span",57),2&o){e.\u0275\u0275nextContext(2);const t=e.\u0275\u0275reference(6),_=e.\u0275\u0275nextContext();e.\u0275\u0275property("ngIf",_.tieringForm.showError("prefix",t,"required"))}}function Qa(o,n){if(1&o&&(e.\u0275\u0275elementStart(0,"div",42)(1,"cds-text-label",60),e.\u0275\u0275i18nStart(2,22),e.\u0275\u0275element(3,"input",61),e.\u0275\u0275i18nEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275template(4,qa,2,0,"ng-template",null,6,e.\u0275\u0275templateRefExtractor)(6,Ya,1,1,"ng-template",null,7,e.\u0275\u0275templateRefExtractor),e.\u0275\u0275elementEnd()),2&o){const t=e.\u0275\u0275reference(5),_=e.\u0275\u0275reference(7),i=e.\u0275\u0275nextContext(2);e.\u0275\u0275advance(),e.\u0275\u0275property("invalid",!i.tieringForm.controls.prefix.valid&&i.tieringForm.controls.prefix.dirty)("invalidText",_)("helperText",t)}}function Ja(o,n){1&o&&(e.\u0275\u0275elementContainerStart(0),e.\u0275\u0275i18n(1,28),e.\u0275\u0275elementContainerEnd())}function er(o,n){1&o&&(e.\u0275\u0275elementContainerStart(0),e.\u0275\u0275i18n(1,29),e.\u0275\u0275elementContainerEnd())}function tr(o,n){if(1&o){const t=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementContainerStart(0,66)(1,67),e.\u0275\u0275elementStart(2,"div",68)(3,"div",69)(4,"cds-text-label",70),e.\u0275\u0275i18nStart(5,26),e.\u0275\u0275element(6,"input",71),e.\u0275\u0275i18nEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275template(7,Ja,2,0,"ng-template",null,8,e.\u0275\u0275templateRefExtractor),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(9,"div",69)(10,"cds-text-label",72),e.\u0275\u0275i18nStart(11,27),e.\u0275\u0275element(12,"input",73),e.\u0275\u0275i18nEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275template(13,er,2,0,"ng-template",null,9,e.\u0275\u0275templateRefExtractor),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(15,"div",74)(16,"cds-icon-button",75),e.\u0275\u0275listener("click",function(){const i=e.\u0275\u0275restoreView(t).index,a=e.\u0275\u0275nextContext(3);return e.\u0275\u0275resetView(a.removeTags(i))}),e.\u0275\u0275namespaceSVG(),e.\u0275\u0275element(17,"svg",76),e.\u0275\u0275elementEnd()()(),e.\u0275\u0275elementContainerEnd()()}if(2&o){const t=n.index,_=e.\u0275\u0275reference(8),i=e.\u0275\u0275reference(14),a=e.\u0275\u0275nextContext(3);e.\u0275\u0275advance(),e.\u0275\u0275property("formGroupName",t),e.\u0275\u0275advance(3),e.\u0275\u0275property("invalid",!a.tieringForm.controls.tags.controls[t].controls.Key.valid&&a.tieringForm.controls.tags.controls[t].controls.Key.dirty)("invalidText",_),e.\u0275\u0275advance(2),e.\u0275\u0275property("invalid",a.tieringForm.controls.tags.controls[t].controls.Key.invalid&&a.tieringForm.controls.tags.controls[t].controls.Key.dirty),e.\u0275\u0275advance(4),e.\u0275\u0275property("invalid",!a.tieringForm.controls.tags.controls[t].controls.Value.valid&&a.tieringForm.controls.tags.controls[t].controls.Value.dirty)("invalidText",i),e.\u0275\u0275advance(2),e.\u0275\u0275property("invalid",a.tieringForm.controls.tags.controls[t].controls.Value.invalid&&a.tieringForm.controls.tags.controls[t].controls.Value.dirty),e.\u0275\u0275advance(3),e.\u0275\u0275property("columnNumbers",e.\u0275\u0275pureFunction0(8,Wa))}}function nr(o,n){if(1&o){const t=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"div")(1,"div",62),e.\u0275\u0275text(2,"Tags"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(3,"div"),e.\u0275\u0275text(4,"All the tags must exist in the object's tag set for the rule to apply."),e.\u0275\u0275elementEnd(),e.\u0275\u0275template(5,tr,18,9,"ng-container",63),e.\u0275\u0275elementStart(6,"div",42)(7,"button",64),e.\u0275\u0275listener("click",function(){e.\u0275\u0275restoreView(t);const i=e.\u0275\u0275nextContext(2);return e.\u0275\u0275resetView(i.addTags())}),e.\u0275\u0275i18nStart(8,25),e.\u0275\u0275namespaceSVG(),e.\u0275\u0275element(9,"svg",65),e.\u0275\u0275i18nEnd(),e.\u0275\u0275elementEnd()()()}if(2&o){const t=e.\u0275\u0275nextContext(2);e.\u0275\u0275advance(5),e.\u0275\u0275property("ngForOf",t.tags.controls)}}function or(o,n){1&o&&(e.\u0275\u0275elementStart(0,"span"),e.\u0275\u0275i18n(1,30),e.\u0275\u0275elementEnd())}function _r(o,n){1&o&&(e.\u0275\u0275elementStart(0,"span"),e.\u0275\u0275i18n(1,31),e.\u0275\u0275elementEnd())}function ir(o,n){1&o&&(e.\u0275\u0275elementStart(0,"span"),e.\u0275\u0275i18n(1,32),e.\u0275\u0275elementEnd())}function ar(o,n){if(1&o&&e.\u0275\u0275template(0,_r,2,0,"span",52)(1,ir,2,0,"span",52),2&o){e.\u0275\u0275nextContext();const t=e.\u0275\u0275reference(6),_=e.\u0275\u0275nextContext();e.\u0275\u0275property("ngIf",_.tieringForm.showError("days",t,"required")),e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf",_.tieringForm.showError("days",t,"pattern"))}}function rr(o,n){if(1&o&&(e.\u0275\u0275elementContainerStart(0),e.\u0275\u0275elementStart(1,"section",38),e.\u0275\u0275template(2,xa,2,0,"cd-alert-panel",39),e.\u0275\u0275pipe(3,"async"),e.\u0275\u0275template(4,wa,2,0,"cd-alert-panel",40),e.\u0275\u0275elementStart(5,"form",41,0)(7,"div",42)(8,"cds-text-label",43),e.\u0275\u0275i18nStart(9,11),e.\u0275\u0275element(10,"input",44),e.\u0275\u0275i18nEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275template(11,Ua,2,0,"ng-template",null,1,e.\u0275\u0275templateRefExtractor)(13,Ha,2,2,"ng-template",null,2,e.\u0275\u0275templateRefExtractor),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(15,"div",42)(16,"cds-select",45),e.\u0275\u0275template(17,Xa,2,0,"option",46)(18,Ba,2,0,"option",46)(19,Va,2,0,"option",46)(20,Za,2,2,"option",47),e.\u0275\u0275elementEnd(),e.\u0275\u0275template(21,Ka,2,0,"ng-template",null,3,e.\u0275\u0275templateRefExtractor),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(23,"legend",48),e.\u0275\u0275text(24,"Choose a configuration scope"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(25,"div")(26,"cds-radio-group",49)(27,"cds-radio",50),e.\u0275\u0275i18n(28,12),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(29,"cds-radio",50),e.\u0275\u0275i18n(30,13),e.\u0275\u0275elementEnd()()(),e.\u0275\u0275template(31,Qa,8,3,"div",51)(32,nr,10,1,"div",52),e.\u0275\u0275elementStart(33,"legend",48),e.\u0275\u0275text(34,"Status"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(35,"div")(36,"cds-radio-group",53)(37,"cds-radio",50),e.\u0275\u0275i18n(38,14),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(39,"cds-radio",50),e.\u0275\u0275i18n(40,15),e.\u0275\u0275elementEnd()()(),e.\u0275\u0275elementStart(41,"div",42),e.\u0275\u0275element(42,"cds-number",54),e.\u0275\u0275template(43,or,2,0,"ng-template",null,4,e.\u0275\u0275templateRefExtractor)(45,ar,2,2,"ng-template",null,5,e.\u0275\u0275templateRefExtractor),e.\u0275\u0275elementEnd()()(),e.\u0275\u0275elementContainerEnd()),2&o){const t=e.\u0275\u0275reference(12),_=e.\u0275\u0275reference(14),i=e.\u0275\u0275reference(22),a=e.\u0275\u0275reference(44),r=e.\u0275\u0275reference(46),s=e.\u0275\u0275nextContext();e.\u0275\u0275advance(2),e.\u0275\u0275property("ngIf",!1===e.\u0275\u0275pipeBind1(3,23,s.snapScheduleModuleStatus$)),e.\u0275\u0275advance(2),e.\u0275\u0275property("ngIf",0===(null==s.storageClassList?null:s.storageClassList.length)&&s.isStorageClassFetched),e.\u0275\u0275advance(),e.\u0275\u0275property("formGroup",s.tieringForm),e.\u0275\u0275advance(3),e.\u0275\u0275property("invalid",!s.tieringForm.controls.name.valid&&s.tieringForm.controls.name.dirty)("invalidText",_)("helperText",t),e.\u0275\u0275advance(8),e.\u0275\u0275property("helperText",i),e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf",null===s.storageClassList),e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf",null!==s.storageClassList&&0===s.storageClassList.length),e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf",null!==s.storageClassList&&s.storageClassList.length>0),e.\u0275\u0275advance(),e.\u0275\u0275property("ngForOf",s.storageClassList),e.\u0275\u0275advance(7),e.\u0275\u0275property("value",!1),e.\u0275\u0275advance(),e.\u0275\u0275i18nExp("Apply to all objects in the bucket"),e.\u0275\u0275i18nApply(28),e.\u0275\u0275advance(),e.\u0275\u0275property("value",!0),e.\u0275\u0275advance(),e.\u0275\u0275i18nExp("Limit the scope of this rule to selected filter criteria"),e.\u0275\u0275i18nApply(30),e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf",s.tieringForm.controls.hasPrefix.value),e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf",s.tieringForm.controls.hasPrefix.value),e.\u0275\u0275advance(5),e.\u0275\u0275property("value","Enabled"),e.\u0275\u0275advance(2),e.\u0275\u0275property("value","Disabled"),e.\u0275\u0275advance(3),e.\u0275\u0275property("min",1)("invalid",!s.tieringForm.controls.days.valid&&s.tieringForm.controls.days.dirty)("invalidText",r)("helperText",a)}}class wt extends tt.g{constructor(n,t,_=!1,i,a,r,s,d,u,m){super(),this.bucket=n,this.selectedLifecycle=t,this.editing=_,this.actionLabels=i,this.rgwBucketService=a,this.fb=r,this.cd=s,this.rgwZonegroupService=d,this.notificationService=u,this.router=m,this.tagsToRemove=[],this.storageClassList=null,this.isStorageClassFetched=!1}ngOnInit(){this.rgwBucketService.getLifecycle(this.bucket.bucket,this.bucket.owner,this.bucket.tenant).subscribe(n=>{if(null===n&&(n={LifecycleConfiguration:{Rule:[]}}),n.LifecycleConfiguration.Rule=n.LifecycleConfiguration.Rule.map(t=>(t?.Filter?.Tag&&!Array.isArray(t?.Filter?.Tag)&&(t.Filter.Tag=[t.Filter.Tag]),t?.Filter?.And?.Tag&&!Array.isArray(t?.Filter?.And?.Tag)&&(t.Filter.And.Tag=[t.Filter.And.Tag]),t)),this.configuredLifecycle=n,this.editing){const t=this.configuredLifecycle?.LifecycleConfiguration?.Rule.filter(_=>_?.ID===this.selectedLifecycle?.ID)[0];this.tieringForm.patchValue({name:t?.ID,hasPrefix:this.checkIfRuleHasFilters(t),prefix:t?.Prefix||t?.Filter?.Prefix||t?.Filter?.And?.Prefix||"",status:t?.Status,days:t?.Transition?.Days}),this.setTags(t),this.tieringForm.get("name").disable()}}),this.tieringForm=this.fb.group({name:[null,[l.Validators.required,this.duplicateConfigName.bind(this)]],storageClass:[null,l.Validators.required],hasPrefix:[!1,[l.Validators.required]],prefix:[null,[F.xQ.composeIf({hasPrefix:!0},[l.Validators.required])]],tags:this.fb.array([]),status:["Enabled",[l.Validators.required]],days:[60,[l.Validators.required,F.xQ.number(!1)]]}),this.loadStorageClass()}checkIfRuleHasFilters(n){return!!(this.isValidPrefix(n?.Prefix)||this.isValidPrefix(n?.Filter?.Prefix)||this.isValidArray(n?.Filter?.Tag)||this.isValidPrefix(n?.Filter?.And?.Prefix)||this.isValidArray(n?.Filter?.And?.Tag))}isValidPrefix(n){return!!n}isValidArray(n){return Array.isArray(n)&&n.length>0}setTags(n){Array.isArray(n?.Filter?.Tag)&&n?.Filter?.Tag?.length>0&&n?.Filter?.Tag?.forEach(t=>this.addTags(t.Key,t.Value)),Array.isArray(n?.Filter?.And?.Tag)&&n?.Filter?.And?.Tag?.length>0&&n?.Filter?.And?.Tag?.forEach(t=>this.addTags(t.Key,t.Value))}get tags(){return this.tieringForm.get("tags")}addTags(n,t){this.tags.push(new l.FormGroup({Key:new l.FormControl(n||"",l.Validators.required),Value:new l.FormControl(t||"",l.Validators.required)})),this.cd.detectChanges()}duplicateConfigName(n){return this.configuredLifecycle?.LifecycleConfiguration?.Rule?.length>0&&this.configuredLifecycle.LifecycleConfiguration.Rule.map(_=>_.ID).includes(n.value)?{duplicate:!0}:null}removeTags(n){this.tags.removeAt(n),this.cd.detectChanges()}loadStorageClass(){return new Promise((n,t)=>{this.rgwZonegroupService.getAllZonegroupsInfo().subscribe(_=>{this.storageClassList=[];const i=Zo.filterAndMapTierTargets(_);this.isStorageClassFetched=!0,this.storageClassList.push(...i),this.editing&&this.tieringForm.get("storageClass").setValue(this.selectedLifecycle?.Transition?.StorageClass),this.loadingReady(),n()},_=>{t(_)})})}submitTieringConfig(){const n=this.tieringForm.value;if(!this.tieringForm.valid)return;let t={ID:this.tieringForm.getRawValue().name,Status:n.status,Transition:{Days:n.days,StorageClass:n.storageClass}};if(n.hasPrefix?this.tags.length>0?Object.assign(t,{Filter:{And:{Prefix:n.prefix,Tag:this.tags.value}}}):Object.assign(t,{Filter:{Prefix:n.prefix}}):Object.assign(t,{Prefix:""}),this.editing){const _=this.configuredLifecycle.LifecycleConfiguration.Rule,i=_.findIndex(a=>a?.ID===this.selectedLifecycle?.ID);_.splice(i,1,t),this.rgwBucketService.setLifecycle(this.bucket.bucket,JSON.stringify(this.configuredLifecycle.LifecycleConfiguration),this.bucket.owner,this.bucket.tenant).subscribe({next:()=>{this.notificationService.show(x._.success,$localize`Bucket lifecycle modified succesfully`)},error:a=>{this.notificationService.show(x._.error,a),this.tieringForm.setErrors({cdSubmitButton:!0})},complete:()=>{this.closeModal()}})}else this.configuredLifecycle.LifecycleConfiguration.Rule.push(t),this.rgwBucketService.setLifecycle(this.bucket.bucket,JSON.stringify(this.configuredLifecycle.LifecycleConfiguration),this.bucket.owner,this.bucket.tenant).subscribe({next:()=>{this.notificationService.show(x._.success,$localize`Bucket lifecycle created succesfully`)},error:_=>{this.notificationService.show(x._.error,_),this.tieringForm.setErrors({cdSubmitButton:!0})},complete:()=>{this.closeModal()}})}goToCreateStorageClass(){this.router.navigate(["rgw/tiering/create"]),this.closeModal()}static{this.\u0275fac=function(t){return new(t||wt)(e.\u0275\u0275directiveInject("bucket"),e.\u0275\u0275directiveInject("selectedLifecycle",8),e.\u0275\u0275directiveInject("editing",8),e.\u0275\u0275directiveInject(M.Ss),e.\u0275\u0275directiveInject(Le.c),e.\u0275\u0275directiveInject(Ne.$),e.\u0275\u0275directiveInject(e.ChangeDetectorRef),e.\u0275\u0275directiveInject(ke.Z),e.\u0275\u0275directiveInject(te.J),e.\u0275\u0275directiveInject(Y.Router))}}static{this.\u0275cmp=e.\u0275\u0275defineComponent({type:wt,selectors:[["cd-rgw-bucket-tiering"]],features:[e.\u0275\u0275InheritDefinitionFeature],decls:6,vars:8,consts:()=>{let n,t,_,i,a,r,s,d,u,m,C,O,f,I,R,h,G,U,k,y,H,X,B,V,S;return n=$localize`:␟13c25ba453dd76e6268e3cb1adec9ebb7f2860f7␟7849131621647844681:${"\ufffd0\ufffd"}:INTERPOLATION: Tiering configuration ${"\ufffd#3\ufffd"}:START_TAG_CD_HELP_TEXT:${"\ufffd/#3\ufffd"}:CLOSE_TAG_CD_HELP_TEXT:`,t=$localize`:␟84db6844e906b53c6889fd100b22bd4851b94ffc␟8451822945240355536:Rule Name ${"\ufffd#10\ufffd\ufffd/#10\ufffd"}:TAG_INPUT:`,_=$localize`:␟fe0fa08844bf052c9f016200ae7383aebd8d803e␟5047401720491129897: ${"\ufffd0\ufffd"}:INTERPOLATION: `,i=$localize`:␟3c17b5f396fa0ba61c4d5e170a2b94ae3c6e06aa␟5676317486712440145: ${"\ufffd0\ufffd"}:INTERPOLATION: `,a=$localize`:␟57a0c2a830f04a8b5bc311f8616008399d5fb925␟6192354938362820651:Enabled `,r=$localize`:␟c580e5f32ff4a50b02ce73bcff2e6748ece9a740␟1880545551237177168:Disabled `,s=$localize`:␟a2fae8772533c595c94a6d8de707173822b42f08␟8676137760478365638: In order to access the snapshot scheduler feature, the snap_scheduler module must be enabled `,d=$localize`:␟df89e5b52896b0c4db061bb47c4a510a8c2e5b1e␟4406979390475917323: No storage class found. Consider creating it first to proceed. `,u=$localize`:␟8623d4658e61a7a08876212d502a5bab70db27e3␟5536277816750272966:Unique identifier for the rule. The value cannot be longer than 255 characters. `,m=$localize`:␟7cbdabcece469fab89cfa687ab152bca18b97498␟1417693714872528491:This field is required.`,C=$localize`:␟cd98a83cc72b8f6c720be5e9118aea0d5c2da26d␟5647346705768535808:Please enter a unique name.`,O=$localize`:␟718900880a4bc42b45e9316beac034cc3b8f874d␟2484149347793021486:The storage class to which you want the object to transition. `,f=$localize`:␟20a31472292dfde756b8cb52965c8ab66af6c613␟2239901801837342689:Prefix ${"\ufffd#3\ufffd\ufffd/#3\ufffd"}:TAG_INPUT:`,I=$localize`:␟45d5780e12ed89603ee70aa11cb6871e5baeb91c␟806658219580494043: Prefix identifying one or more objects to which the rule applies `,R=$localize`:␟7cbdabcece469fab89cfa687ab152bca18b97498␟1417693714872528491:This field is required.`,h=$localize`:␟1871ae54f589b69206b02e4b6b70414dc07c3a1d␟8159136893463716603:Add tags ${"\ufffd#9\ufffd"}:START_TAG__SVG_SVG:${"\ufffd/#9\ufffd"}:CLOSE_TAG__SVG_SVG:`,G=$localize`:␟a4ad754704d2dfe9b8c0d89feae2b8f44b5ed99c␟4833857585461931342:Enter name of the object key`,U=$localize`:␟93f23498f70b17e20adae24c0d50f1acf9f9e4d3␟3203088085275419830:Enter value of the tag`,k=$localize`:␟095831565c2568302d8d2e7576ae0b82a3b756da␟1141587809517978512:Name of the object key ${"\ufffd#6\ufffd\ufffd/#6\ufffd"}:TAG_INPUT:`,y=$localize`:␟1161ec5ed13a97a9e4da239bfc3a4fbd7f06fd5d␟4829097406916414400:Value of the tag ${"\ufffd#12\ufffd\ufffd/#12\ufffd"}:TAG_INPUT:`,H=$localize`:␟7cbdabcece469fab89cfa687ab152bca18b97498␟1417693714872528491:This field is required.`,X=$localize`:␟7cbdabcece469fab89cfa687ab152bca18b97498␟1417693714872528491:This field is required.`,B=$localize`:␟1b248f6a44b7b28ad0ac217650cfdb3ece053f7a␟2746992661545766104:Select the number of days to transition the objects to the specified storage class. The value must be a positive integer. `,V=$localize`:␟7cbdabcece469fab89cfa687ab152bca18b97498␟1417693714872528491:This field is required.`,S=$localize`:␟cae4a65aa3116e5e6718c7e59c71e8f2631a2232␟1358442525003980673:Enter a valid positive number`,[["formDir","ngForm"],["ruleHelper",""],["ruleNameError",""],["storageClassHelper",""],["daysHelper",""],["daysError",""],["prefixHelper",""],["prefixError",""],["tagKeyError",""],["tagValueError",""],n,t,_,i,a,r,s,d,u,m,C,O,f,I,R,h,k,y,H,X,B,V,S,["size","md",3,"overlaySelected","open"],[3,"closeSelect"],[3,"formAllFieldsRequired"],[4,"cdFormLoading"],[3,"submitActionEvent","form","submitText","modalForm","disabled"],["cdsModalContent",""],["type","info","spacingClass","mb-3","class","align-items-center","actionName","Enable",3,"action",4,"ngIf"],["type","info","spacingClass","mb-3","class","align-items-center","actionName","Create",3,"action",4,"ngIf"],["name","tieringForm","novalidate","",3,"formGroup"],[1,"form-item"],["labelInputID","rule_name",3,"invalid","invalidText","helperText"],["cdsText","","type","text","id","rule_name","maxlength","255","formControlName","name"],["id","storageClass","formControlName","storageClass","label","Storage Class",3,"helperText"],["value","",4,"ngIf"],[3,"value",4,"ngFor","ngForOf"],[1,"cds--label"],["formControlName","hasPrefix"],[3,"value"],["class","form-item",4,"ngIf"],[4,"ngIf"],["formControlName","status"],["formControlName","days","label","Number of days",3,"min","invalid","invalidText","helperText"],["type","info","spacingClass","mb-3","actionName","Enable",1,"align-items-center",3,"action"],["type","info","spacingClass","mb-3","actionName","Create",1,"align-items-center",3,"action"],["class","invalid-feedback",4,"ngIf"],[1,"invalid-feedback"],["value",""],["labelInputID","prefix",3,"invalid","invalidText","helperText"],["cdsText","","type","text","id","prefix","formControlName","prefix"],[1,"form-group-header"],["formArrayName","tags",4,"ngFor","ngForOf"],["cdsButton","tertiary","type","button",3,"click"],["cdsIcon","add","size","32","icon","",1,"cds--btn__icon"],["formArrayName","tags"],[3,"formGroupName"],["cdsRow","",1,"form-item","form-item-append"],["cdsCol",""],["labelInputID","Key",3,"invalid","invalidText"],["cdsText","","type","text","placeholder",G,"formControlName","Key",3,"invalid"],["labelInputID","Value",3,"invalid","invalidText"],["cdsText","","type","text","placeholder",U,"formControlName","Value",3,"invalid"],["cdsCol","",1,"item-action-btn",3,"columnNumbers"],["kind","tertiary","size","sm",3,"click"],["cdsIcon","trash-can","size","32",1,"cds--btn__icon"]]},template:function(t,_){1&t&&(e.\u0275\u0275elementStart(0,"cds-modal",33),e.\u0275\u0275listener("overlaySelected",function(){return _.closeModal()}),e.\u0275\u0275elementStart(1,"cds-modal-header",34),e.\u0275\u0275listener("closeSelect",function(){return _.closeModal()}),e.\u0275\u0275i18nStart(2,10),e.\u0275\u0275element(3,"cd-help-text",35),e.\u0275\u0275i18nEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275template(4,rr,47,25,"ng-container",36),e.\u0275\u0275elementStart(5,"cd-form-button-panel",37),e.\u0275\u0275listener("submitActionEvent",function(){return _.submitTieringConfig()}),e.\u0275\u0275elementEnd()()),2&t&&(e.\u0275\u0275property("open",_.open),e.\u0275\u0275advance(3),e.\u0275\u0275property("formAllFieldsRequired",!0),e.\u0275\u0275i18nExp(_.editing?"Edit":"Create"),e.\u0275\u0275i18nApply(2),e.\u0275\u0275advance(),e.\u0275\u0275property("cdFormLoading",_.loading),e.\u0275\u0275advance(),e.\u0275\u0275property("form",_.tieringForm)("submitText",_.editing?_.actionLabels.EDIT:_.actionLabels.CREATE)("modalForm",!0)("disabled",0===(null==_.storageClassList?null:_.storageClassList.length)&&_.isStorageClassFetched))},dependencies:[g.NgForOf,g.NgIf,Ie.m,oe.e,ie.O,St.G,j.S,ne.E,l.\u0275NgNoValidate,l.NgSelectOption,l.\u0275NgSelectMultipleOption,l.DefaultValueAccessor,l.NgControlStatus,l.NgControlStatusGroup,l.MaxLengthValidator,l.FormGroupDirective,l.FormControlName,l.FormGroupName,l.FormArrayName,c.Modal,c.ModalHeader,c.ModalContent,c.ColumnDirective,c.RowDirective,c.Button,c.IconButton,c.IconDirective,c.TextInputLabelComponent,c.TextInput,c.NumberComponent,c.Radio,c.RadioGroup,c.Select,c.Option,g.AsyncPipe]})}}var Ko=T(68316),$e=T(32295),ot=T(45843),gn=T(62988);class En{constructor(n,t,_,i,a){this.rgwBucketService=n,this.authStorageService=t,this.actionLabels=_,this.modalService=i,this.notificationService=a,this.updateBucketDetails=new e.EventEmitter,this.columns=[],this.selection=new Ge.y,this.lifecycleRuleList=[]}ngOnInit(){this.permission=this.authStorageService.getPermissions().rgw,this.columns=[{name:$localize`Name`,prop:"ID",flexGrow:2},{name:$localize`Days`,prop:"Transition.Days",flexGrow:1},{name:$localize`Storage class`,prop:"Transition.StorageClass",flexGrow:1},{name:$localize`Status`,prop:"Status",flexGrow:1}];const n={permission:"create",icon:L.FI.add,click:()=>this.openTieringModal(this.actionLabels.CREATE),name:this.actionLabels.CREATE},t={permission:"update",icon:L.FI.edit,disable:()=>this.selection.hasMultiSelection,click:()=>this.openTieringModal(this.actionLabels.EDIT),name:this.actionLabels.EDIT},_={permission:"delete",icon:L.FI.destroy,click:()=>this.deleteAction(),disable:()=>!this.selection.hasSelection,name:this.actionLabels.DELETE,canBePrimary:i=>i.hasMultiSelection};this.tableActions=[n,t,_]}loadLifecyclePolicies(n){const t=this.rgwBucketService.getLifecycle(this.bucket.bucket,this.bucket.owner,this.bucket.tenant).pipe((0,Z.tap)(_=>{this.lifecycleRuleList=_}),(0,Z.catchError)(()=>(n.error(),(0,w.of)(null))));this.filteredLifecycleRules$=t.pipe((0,Z.map)(_=>_?.LifecycleConfiguration?.Rule?.filter(i=>i.hasOwnProperty("Transition"))||[]))}openTieringModal(n){this.modalService.show(wt,{bucket:this.bucket,selectedLifecycle:this.selection.first(),editing:n===this.actionLabels.EDIT})?.close?.subscribe(()=>this.updateBucketDetails.emit())}updateSelection(n){this.selection=n}deleteAction(){const n=this.selection.selected.map(i=>i.ID),t=this.lifecycleRuleList.LifecycleConfiguration.Rule.filter(i=>!n.includes(i.ID)),_=t.length>0?{Rule:t}:{};this.modalRef=this.modalService.show(Ue.D,{itemDescription:$localize`Rule`,itemNames:n,actionDescription:$localize`remove`,submitAction:()=>this.submitLifecycleConfig(_)})}submitLifecycleConfig(n){this.rgwBucketService.setLifecycle(this.bucket.bucket,JSON.stringify(n),this.bucket.owner,this.bucket.tenant).subscribe({next:()=>{this.notificationService.show(x._.success,$localize`Lifecycle rule deleted successfully`),this.updateBucketDetails.emit()},error:()=>{this.modalRef.componentInstance.stopLoadingSpinner()},complete:()=>{this.modalService.dismissAll()}})}static{this.\u0275fac=function(t){return new(t||En)(e.\u0275\u0275directiveInject(Le.c),e.\u0275\u0275directiveInject(be.v),e.\u0275\u0275directiveInject(M.Ss),e.\u0275\u0275directiveInject(he.V),e.\u0275\u0275directiveInject(te.J))}}static{this.\u0275cmp=e.\u0275\u0275defineComponent({type:En,selectors:[["cd-rgw-bucket-lifecycle-list"]],viewQuery:function(t,_){if(1&t&&e.\u0275\u0275viewQuery(ae.O,7),2&t){let i;e.\u0275\u0275queryRefresh(i=e.\u0275\u0275loadQuery())&&(_.table=i.first)}},inputs:{bucket:"bucket"},outputs:{updateBucketDetails:"updateBucketDetails"},decls:7,vars:7,consts:()=>{let n;return n=$localize`:␟dff0f229b140fba0c55aeeb59b2429faa665fb03␟3833186912996393197: Tiering Configuration ${"\ufffd#2\ufffd"}:START_TAG_CD_HELP_TEXT: Configure a bucket tiering rule to automatically transition objects between storage classes after a specified number of days. Define the scope of the rule by applying it globally or to objects with specific prefixes and tags. ${"\ufffd/#2\ufffd"}:CLOSE_TAG_CD_HELP_TEXT:`,[["table",""],n,["columnMode","flex","selectionType","multiClick","identifier","ID",3,"updateSelection","fetchData","data","columns"],[1,"table-actions",3,"permission","selection","tableActions"]]},template:function(t,_){if(1&t){const i=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"legend"),e.\u0275\u0275i18nStart(1,1),e.\u0275\u0275element(2,"cd-help-text"),e.\u0275\u0275i18nEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(3,"cd-table",2,0),e.\u0275\u0275pipe(5,"async"),e.\u0275\u0275listener("updateSelection",function(r){return e.\u0275\u0275restoreView(i),e.\u0275\u0275resetView(_.updateSelection(r))})("fetchData",function(r){return e.\u0275\u0275restoreView(i),e.\u0275\u0275resetView(_.loadLifecyclePolicies(r))}),e.\u0275\u0275element(6,"cd-table-actions",3),e.\u0275\u0275elementEnd()}2&t&&(e.\u0275\u0275advance(3),e.\u0275\u0275property("data",e.\u0275\u0275pipeBind1(5,5,_.filteredLifecycleRules$))("columns",_.columns),e.\u0275\u0275advance(3),e.\u0275\u0275property("permission",_.permission)("selection",_.selection)("tableActions",_.tableActions))},dependencies:[ie.O,ae.O,$e.j,g.AsyncPipe]})}}var po=T(91822);function lr(o,n){1&o&&(e.\u0275\u0275elementStart(0,"td"),e.\u0275\u0275text(1,"-"),e.\u0275\u0275elementEnd())}function sr(o,n){1&o&&(e.\u0275\u0275elementStart(0,"td"),e.\u0275\u0275i18n(1,6),e.\u0275\u0275elementEnd())}function cr(o,n){if(1&o&&(e.\u0275\u0275elementStart(0,"td"),e.\u0275\u0275text(1),e.\u0275\u0275elementEnd()),2&o){const t=e.\u0275\u0275nextContext();e.\u0275\u0275advance(),e.\u0275\u0275textInterpolate1(" ",t.rateLimitConfig.max_read_ops," ")}}function dr(o,n){1&o&&(e.\u0275\u0275elementStart(0,"td"),e.\u0275\u0275text(1,"-"),e.\u0275\u0275elementEnd())}function ur(o,n){1&o&&(e.\u0275\u0275elementStart(0,"td"),e.\u0275\u0275i18n(1,7),e.\u0275\u0275elementEnd())}function pr(o,n){if(1&o&&(e.\u0275\u0275elementStart(0,"td"),e.\u0275\u0275text(1),e.\u0275\u0275elementEnd()),2&o){const t=e.\u0275\u0275nextContext();e.\u0275\u0275advance(),e.\u0275\u0275textInterpolate1(" ",t.rateLimitConfig.max_write_ops," ")}}function mr(o,n){1&o&&(e.\u0275\u0275elementStart(0,"td"),e.\u0275\u0275text(1,"-"),e.\u0275\u0275elementEnd())}function Tr(o,n){1&o&&(e.\u0275\u0275elementStart(0,"td"),e.\u0275\u0275i18n(1,8),e.\u0275\u0275elementEnd())}function gr(o,n){if(1&o&&(e.\u0275\u0275elementStart(0,"td"),e.\u0275\u0275text(1),e.\u0275\u0275pipe(2,"dimlessBinaryPerMinute"),e.\u0275\u0275elementEnd()),2&o){const t=e.\u0275\u0275nextContext();e.\u0275\u0275advance(),e.\u0275\u0275textInterpolate1(" ",e.\u0275\u0275pipeBind1(2,1,t.rateLimitConfig.max_read_bytes)," ")}}function Er(o,n){1&o&&(e.\u0275\u0275elementStart(0,"td"),e.\u0275\u0275text(1,"-"),e.\u0275\u0275elementEnd())}function Rr(o,n){1&o&&(e.\u0275\u0275elementStart(0,"td"),e.\u0275\u0275i18n(1,9),e.\u0275\u0275elementEnd())}function Cr(o,n){if(1&o&&(e.\u0275\u0275elementStart(0,"td"),e.\u0275\u0275text(1),e.\u0275\u0275pipe(2,"dimlessBinaryPerMinute"),e.\u0275\u0275elementEnd()),2&o){const t=e.\u0275\u0275nextContext();e.\u0275\u0275advance(),e.\u0275\u0275textInterpolate1(" ",e.\u0275\u0275pipeBind1(2,1,t.rateLimitConfig.max_write_bytes)," ")}}class Ut{static{this.\u0275fac=function(t){return new(t||Ut)}}static{this.\u0275cmp=e.\u0275\u0275defineComponent({type:Ut,selectors:[["cd-rgw-rate-limit-details"]],inputs:{rateLimitConfig:"rateLimitConfig",type:"type"},decls:34,vars:16,consts:()=>{let n,t,_,i,a,r,s,d,u,m;return n=$localize`:␟fc1bcd4463bb68018084610412b9f82ca7081016␟7893976901113596021:${"\ufffd0\ufffd"}:INTERPOLATION:`,t=$localize`:␟f50a33d3c339f8f4a465141f8caa5d2d8c005251␟4816216590591222133:Enabled`,_=$localize`:␟dd30ac5c2b2d076c1c34ec7d9f083a9855722385␟5582605100729952489:Maximum Read Ops`,i=$localize`:␟c616f29930ef9bf8ee8138d224141f4005e89c75␟4228327691734899288:Maximum Write Ops`,a=$localize`:␟9d96fa282cd8522e5d02242bd62b9ea01701e220␟7416844317435793443:Maximum Read Bytes`,r=$localize`:␟1e91ef53bf43e14c13aa0635789f168b9ff49598␟6394427042741168546:Maximum Write Bytes`,s=$localize`:␟aa6fb95c355f172bda303de1ce2f38c251a149cf␟240806681889331244:Unlimited`,d=$localize`:␟aa6fb95c355f172bda303de1ce2f38c251a149cf␟240806681889331244:Unlimited`,u=$localize`:␟aa6fb95c355f172bda303de1ce2f38c251a149cf␟240806681889331244:Unlimited`,m=$localize`:␟aa6fb95c355f172bda303de1ce2f38c251a149cf␟240806681889331244:Unlimited`,[n,t,_,i,a,r,s,d,u,m,[1,"cds--data-table--sort","cds--data-table--no-border","cds--data-table","cds--data-table--md"],[1,"bold","w-25"],[1,"w-75"],[1,"bold"],[4,"ngIf"]]},template:function(t,_){1&t&&(e.\u0275\u0275elementStart(0,"legend"),e.\u0275\u0275i18n(1,0),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(2,"table",10)(3,"tbody")(4,"tr")(5,"td",11),e.\u0275\u0275i18n(6,1),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(7,"td",12),e.\u0275\u0275text(8),e.\u0275\u0275pipe(9,"booleanText"),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(10,"tr")(11,"td",13),e.\u0275\u0275i18n(12,2),e.\u0275\u0275elementEnd(),e.\u0275\u0275template(13,lr,2,0,"td",14)(14,sr,2,0,"td",14)(15,cr,2,1,"td",14),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(16,"tr")(17,"td",13),e.\u0275\u0275i18n(18,3),e.\u0275\u0275elementEnd(),e.\u0275\u0275template(19,dr,2,0,"td",14)(20,ur,2,0,"td",14)(21,pr,2,1,"td",14),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(22,"tr")(23,"td",13),e.\u0275\u0275i18n(24,4),e.\u0275\u0275elementEnd(),e.\u0275\u0275template(25,mr,2,0,"td",14)(26,Tr,2,0,"td",14)(27,gr,3,3,"td",14),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(28,"tr")(29,"td",13),e.\u0275\u0275i18n(30,5),e.\u0275\u0275elementEnd(),e.\u0275\u0275template(31,Er,2,0,"td",14)(32,Rr,2,0,"td",14)(33,Cr,3,3,"td",14),e.\u0275\u0275elementEnd()()()),2&t&&(e.\u0275\u0275advance(),e.\u0275\u0275i18nExp("user"===_.type?"User Rate Limit":"Bucket Rate Limit"),e.\u0275\u0275i18nApply(1),e.\u0275\u0275advance(7),e.\u0275\u0275textInterpolate(e.\u0275\u0275pipeBind1(9,14,_.rateLimitConfig.enabled)),e.\u0275\u0275advance(5),e.\u0275\u0275property("ngIf",!_.rateLimitConfig.enabled),e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf",_.rateLimitConfig.enabled&&_.rateLimitConfig.max_read_ops<=0),e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf",_.rateLimitConfig.enabled&&_.rateLimitConfig.max_read_ops>0),e.\u0275\u0275advance(4),e.\u0275\u0275property("ngIf",!_.rateLimitConfig.enabled),e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf",_.rateLimitConfig.enabled&&_.rateLimitConfig.max_write_ops<=0),e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf",_.rateLimitConfig.enabled&&_.rateLimitConfig.max_write_ops>0),e.\u0275\u0275advance(4),e.\u0275\u0275property("ngIf",!_.rateLimitConfig.enabled),e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf",_.rateLimitConfig.enabled&&_.rateLimitConfig.max_read_bytes<=0),e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf",_.rateLimitConfig.enabled&&_.rateLimitConfig.max_read_bytes>0),e.\u0275\u0275advance(4),e.\u0275\u0275property("ngIf",!_.rateLimitConfig.enabled),e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf",_.rateLimitConfig.enabled&&_.rateLimitConfig.max_write_bytes<=0),e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf",_.rateLimitConfig.enabled&&_.rateLimitConfig.max_write_bytes>0))},dependencies:[g.NgIf,po.s,so.E]})}}var He=T(2148),fr=T(83133);class Mt extends fr.O{constructor(n,t){super(),this.http=n,this.rgwDaemonService=t,this.baseURL="api/rgw/topic"}listTopic(){return this.http.get(this.baseURL)}getTopic(n){return this.http.get(`${this.baseURL}/${encodeURIComponent(n)}`)}create(n){return this.rgwDaemonService.request(t=>this.http.post(`${this.baseURL}`,n,{params:t}))}delete(n){return this.http.delete(`${this.baseURL}/${n}`,{observe:"response"})}exists(n){const t=encodeURIComponent(`:${n}`);return this.getTopic(t).pipe((0,Z.mapTo)(!0),(0,Z.catchError)(_=>(N().isFunction(_.preventDefault)&&_.preventDefault(),(0,w.of)(!1))))}static{this.\u0275fac=function(t){return new(t||Mt)(e.\u0275\u0275inject(co.HttpClient),e.\u0275\u0275inject(ye.y))}}static{this.\u0275prov=e.\u0275\u0275defineInjectable({token:Mt,factory:Mt.\u0275fac,providedIn:"root"})}}const Sr=[{content:"s3:ObjectCreated:*",name:"s3:ObjectCreated:*"},{content:"s3:ObjectCreated:Put",name:"s3:ObjectCreated:Put"},{content:"s3:ObjectCreated:Copy",name:"s3:ObjectCreated:Copy"},{content:"s3:ObjectCreated:CompleteMultipartUpload",name:"s3:ObjectCreated:CompleteMultipartUpload"},{content:"s3:ObjectRemoved:*",name:"s3:ObjectRemoved:*"},{content:"s3:ObjectRemoved:Delete",name:"s3:ObjectRemoved:Delete"},{content:"s3:ObjectRemoved:DeleteMarkerCreated",name:"s3:ObjectRemoved:DeleteMarkerCreated"}];var mo;!function(o){o.SELECT="-- Select key filter type --",o.PREFIX="prefix",o.SUFFIX="suffix",o.REGEX="regex"}(mo||(mo={}));const Rn={namePlaceholder:$localize`e.g. images/`,valuePlaceholder:$localize`e.g. .jpg`,nameHelper:$localize`Choose a filter type (prefix or suffix) to specify which object keys trigger the notification`,valueHelper:$localize`Enter the prefix (e.g. images/) or suffix (e.g. .jpg) value for the S3 key filter`},Cn={namePlaceholder:$localize`x-amz-meta-xxx...`,valuePlaceholder:$localize`e.g. my-custom-value`,nameHelper:$localize`Enter a metadata key name to identify the custom information`,valueHelper:$localize`Enter the metadata value that corresponds to the key`},fn={namePlaceholder:$localize`e.g. backup-status`,valuePlaceholder:$localize`e.g. completed`,nameHelper:$localize`Enter a tag key to categorize the S3 objects`,valueHelper:$localize`Enter the tag value that corresponds to the key`};var Fr=T(19271);const Mr=(o,n,t,_,i,a,r,s)=>({type:o,controls:n,options:t,isDropdown:_,namePlaceholder:i,valuePlaceholder:a,nameHelper:r,valueHelper:s}),qo=()=>({lg:1,md:1});function Pr(o,n){1&o&&(e.\u0275\u0275elementStart(0,"span"),e.\u0275\u0275i18n(1,9),e.\u0275\u0275elementEnd())}function Ir(o,n){1&o&&(e.\u0275\u0275elementStart(0,"span",33),e.\u0275\u0275elementContainerStart(1),e.\u0275\u0275i18n(2,10),e.\u0275\u0275elementContainerEnd(),e.\u0275\u0275elementEnd())}function Or(o,n){1&o&&(e.\u0275\u0275elementStart(0,"span",33),e.\u0275\u0275i18n(1,11),e.\u0275\u0275elementEnd())}function Gr(o,n){if(1&o&&e.\u0275\u0275template(0,Ir,3,0,"span",32)(1,Or,2,0,"span",32),2&o){const t=e.\u0275\u0275nextContext(),_=e.\u0275\u0275reference(7);e.\u0275\u0275property("ngIf",t.notificationForm.showError("id",_,"required")),e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf",t.notificationForm.showError("id",_,"duplicate"))}}function Nr(o,n){1&o&&(e.\u0275\u0275elementStart(0,"option",34),e.\u0275\u0275text(1,"Loading... "),e.\u0275\u0275elementEnd())}function Ar(o,n){if(1&o&&(e.\u0275\u0275elementStart(0,"option",26),e.\u0275\u0275i18n(1,12),e.\u0275\u0275elementEnd()),2&o){const t=n.$implicit;e.\u0275\u0275property("ngValue",t),e.\u0275\u0275advance(),e.\u0275\u0275i18nExp(t),e.\u0275\u0275i18nApply(1)}}function hr(o,n){1&o&&(e.\u0275\u0275elementStart(0,"span",33),e.\u0275\u0275elementContainerStart(1),e.\u0275\u0275i18n(2,13),e.\u0275\u0275elementContainerEnd(),e.\u0275\u0275elementEnd())}function br(o,n){if(1&o&&e.\u0275\u0275template(0,hr,3,0,"span",32),2&o){const t=e.\u0275\u0275nextContext(),_=e.\u0275\u0275reference(7);e.\u0275\u0275property("ngIf",t.notificationForm.showError("topic",_,"required"))}}function vr(o,n){1&o&&e.\u0275\u0275elementContainer(0)}function Lr(o,n){if(1&o&&(e.\u0275\u0275elementContainerStart(0),e.\u0275\u0275template(1,vr,1,0,"ng-container",35),e.\u0275\u0275elementContainerEnd()),2&o){const t=n.$implicit,_=e.\u0275\u0275nextContext(),i=e.\u0275\u0275reference(33);e.\u0275\u0275advance(),e.\u0275\u0275property("ngTemplateOutlet",i)("ngTemplateOutletContext",e.\u0275\u0275pureFunction8(2,Mr,t,_.filterControls[t],_.filterSettings[t].options,_.filterSettings[t].isDropdown,_.filterSettings[t].namePlaceholder,_.filterSettings[t].valuePlaceholder,_.filterSettings[t].nameHelper,_.filterSettings[t].valueHelper))}}function yr(o,n){if(1&o&&(e.\u0275\u0275elementStart(0,"option",50),e.\u0275\u0275text(1),e.\u0275\u0275elementEnd()),2&o){const t=n.$implicit;e.\u0275\u0275property("value",t),e.\u0275\u0275advance(),e.\u0275\u0275textInterpolate(t)}}function $r(o,n){if(1&o&&(e.\u0275\u0275elementContainerStart(0),e.\u0275\u0275elementStart(1,"cds-select",48),e.\u0275\u0275template(2,yr,2,2,"option",49),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementContainerEnd()),2&o){const t=e.\u0275\u0275nextContext().index,_=e.\u0275\u0275nextContext(),i=_.type,a=_.nameHelper,r=e.\u0275\u0275nextContext();e.\u0275\u0275advance(),e.\u0275\u0275property("id",i+"-name-"+t)("helperText",a),e.\u0275\u0275advance(),e.\u0275\u0275property("ngForOf",r.s3KeyFilterValue)}}function Dr(o,n){if(1&o&&(e.\u0275\u0275elementStart(0,"cds-text-label",41),e.\u0275\u0275text(1," Name "),e.\u0275\u0275element(2,"input",51),e.\u0275\u0275elementEnd()),2&o){const t=e.\u0275\u0275nextContext().index,_=e.\u0275\u0275nextContext(),i=_.type,a=_.namePlaceholder,r=_.nameHelper;e.\u0275\u0275property("labelInputID",i+"-name-"+t)("helperText",r),e.\u0275\u0275advance(2),e.\u0275\u0275property("placeholder",a)}}function Wr(o,n){if(1&o){const t=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"div",39)(1,"div",20)(2,"div",21),e.\u0275\u0275template(3,$r,3,3,"ng-container",40)(4,Dr,3,3,"ng-template",null,5,e.\u0275\u0275templateRefExtractor),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(6,"div",21)(7,"cds-text-label",41),e.\u0275\u0275text(8," Value "),e.\u0275\u0275element(9,"input",42),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(10,"div",43)(11,"cds-icon-button",44),e.\u0275\u0275listener("click",function(){const i=e.\u0275\u0275restoreView(t).index,a=e.\u0275\u0275nextContext().type,r=e.\u0275\u0275nextContext();return e.\u0275\u0275resetView(r.addRow(a,i))}),e.\u0275\u0275namespaceSVG(),e.\u0275\u0275element(12,"svg",45),e.\u0275\u0275elementEnd()(),e.\u0275\u0275namespaceHTML(),e.\u0275\u0275elementStart(13,"div",43)(14,"cds-icon-button",46),e.\u0275\u0275listener("click",function(){const i=e.\u0275\u0275restoreView(t).index,a=e.\u0275\u0275nextContext().type,r=e.\u0275\u0275nextContext();return e.\u0275\u0275resetView(r.removeRow(a,i))}),e.\u0275\u0275namespaceSVG(),e.\u0275\u0275element(15,"svg",47),e.\u0275\u0275elementEnd()()()()}if(2&o){const t=n.index,_=e.\u0275\u0275reference(5),i=e.\u0275\u0275nextContext(),a=i.type,r=i.isDropdown,s=i.valuePlaceholder,d=i.valueHelper;e.\u0275\u0275property("formGroupName",t),e.\u0275\u0275advance(3),e.\u0275\u0275property("ngIf",r)("ngIfElse",_),e.\u0275\u0275advance(4),e.\u0275\u0275property("labelInputID",a+"-value-"+t)("helperText",d),e.\u0275\u0275advance(2),e.\u0275\u0275property("placeholder",s),e.\u0275\u0275advance(),e.\u0275\u0275property("columnNumbers",e.\u0275\u0275pureFunction0(8,qo)),e.\u0275\u0275advance(3),e.\u0275\u0275property("columnNumbers",e.\u0275\u0275pureFunction0(9,qo))}}function xr(o,n){if(1&o&&(e.\u0275\u0275elementStart(0,"h6"),e.\u0275\u0275i18n(1,14),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(2,"div",36)(3,"div",37),e.\u0275\u0275template(4,Wr,16,10,"div",38),e.\u0275\u0275elementEnd()()),2&o){const t=n.type,_=n.controls,i=e.\u0275\u0275nextContext();e.\u0275\u0275advance(),e.\u0275\u0275i18nExp(i.typeLabels[t]),e.\u0275\u0275i18nApply(1),e.\u0275\u0275advance(),e.\u0275\u0275property("formGroup",i.notificationForm.get("filter")),e.\u0275\u0275advance(),e.\u0275\u0275property("formArrayName",t),e.\u0275\u0275advance(),e.\u0275\u0275property("ngForOf",_.controls)}}class Sn extends tt.g{get filterControls(){const n={};return this.filterTypes.forEach(t=>{n[t]=this.getFormArray(t)}),n}constructor(n,t,_=!1,i,a,r,s,d,u,m){super(),this.bucket=n,this.selectedNotification=t,this.editing=_,this.actionLabels=i,this.rgwBucketService=a,this.rgwTopicService=r,this.notificationService=s,this.fb=d,this.router=u,this.cdRef=m,this.eventOption=Sr,this.s3KeyFilterValue=[],this.topics=[],this.topicArn=[],this.notificationList=[],this.filterTypes=["s3Key","s3Metadata","s3Tags"],this.typeLabels={s3Key:"S3 Key configuration",s3Metadata:"S3 Metadata configuration",s3Tags:"S3 Tags configuration"},this.filterSettings={s3Key:{options:null,isDropdown:!0,namePlaceholder:Rn.namePlaceholder,valuePlaceholder:Rn.valuePlaceholder,nameHelper:Rn.nameHelper,valueHelper:Rn.valueHelper},s3Metadata:{options:null,isDropdown:!1,namePlaceholder:Cn.namePlaceholder,valuePlaceholder:Cn.valuePlaceholder,nameHelper:Cn.nameHelper,valueHelper:Cn.valueHelper},s3Tags:{options:null,isDropdown:!1,namePlaceholder:fn.namePlaceholder,valuePlaceholder:fn.valuePlaceholder,nameHelper:fn.nameHelper,valueHelper:fn.valueHelper}}}ngOnInit(){this.editing=!!this.selectedNotification,this.s3KeyFilterValue=Object.values(mo),this.filterSettings.s3Key.options=this.s3KeyFilterValue,this.createNotificationForm(),this.rgwBucketService.listNotification(this.bucket.bucket).subscribe({next:n=>{this.notificationList=n,this.getTopicName().then(()=>{this.editing&&this.selectedNotification&&(this.notification_id=this.selectedNotification.Id,this.notificationForm.get("id").disable(),this.patchNotificationForm(this.selectedNotification))})}})}getTopicName(){return new Promise((n,t)=>{this.rgwTopicService.listTopic().subscribe({next:_=>{this.topics=_,this.topicArn=_.map(i=>i.arn),n()},error:_=>t(_)})})}patchNotificationForm(n){this.cdRef.detectChanges(),this.notificationForm.patchValue({id:n.Id,topic:"object"==typeof n.Topic?n.Topic.arn:n.Topic,event:n.Event}),this.setFilterRules("s3Key",n.Filter?.S3Key?.FilterRule),this.setFilterRules("s3Metadata",n.Filter?.S3Metadata?.FilterRule),this.setFilterRules("s3Tags",n.Filter?.S3Tags?.FilterRule)}setFilterRules(n,t=[]){let _=this.getFormArray(n);_||(this.notificationForm.get("filter").setControl(n,this.fb.array([])),_=this.getFormArray(n)),_.clear(),t&&0!==t.length?t.forEach(i=>{_.push(this.fb.group({Name:[i.Name],Value:[i.Value]}))}):_.push(this.createNameValueGroup())}createNotificationForm(){this.notificationForm=this.fb.group({id:[null,[l.Validators.required,this.duplicateNotificationId.bind(this)]],topic:[null,[l.Validators.required]],event:[[],[]],filter:this.fb.group({s3Key:this.fb.array([this.createNameValueGroup()]),s3Metadata:this.fb.array([this.createNameValueGroup()]),s3Tags:this.fb.array([this.createNameValueGroup()])})})}duplicateNotificationId(n){const t=n.value?.trim();return t&&Array.isArray(this.notificationList)&&this.notificationList.some(i=>i.Id===t)?{duplicate:!0}:null}createNameValueGroup(){return this.fb.group({Name:[null],Value:[null]})}getFormArray(n){return this.notificationForm.get("filter")?.get(n)}getFiltersControls(n){return this.getFormArray(n)}addRow(n,t){this.getFormArray(n).insert(t+1,this.createNameValueGroup())}removeRow(n,t){const _=this.getFormArray(n);_&&_.length>1&&t>=0&&t<_.length?_.removeAt(t):1===_.length&&_.at(0).reset(),this.cdRef.detectChanges()}showInvalid(n){const t=this.notificationForm.get(n);return t?.invalid&&(t.dirty||t.touched)}onSubmit(){if(!this.notificationForm.valid)return this.notificationForm.markAllAsTouched(),void this.notificationForm.setErrors({cdSubmitButton:!0});const n=this.notificationForm.getRawValue(),t=a=>{const r=new Set;return a?.filter(s=>s.Name&&s.Value).filter(s=>!r.has(s.Name)&&(r.add(s.Name),!0))||[]},_=this.editing?$localize`Bucket notification updated successfully`:$localize`Bucket notification created successfully`,i={TopicConfiguration:{Id:n.id,Topic:n.topic,Event:n.event,Filter:{S3Key:{FilterRules:t(n.filter?.s3Key)},S3Metadata:{FilterRules:t(n.filter?.s3Metadata)},S3Tags:{FilterRules:t(n.filter?.s3Tags)}}}};this.rgwBucketService.setNotification(this.bucket.bucket,JSON.stringify(i),this.bucket.owner).subscribe({next:()=>{this.notificationService.show(x._.success,_)},error:a=>{this.notificationService.show(x._.error,a.message),this.notificationForm.setErrors({cdSubmitButton:!0})},complete:()=>{this.closeModal()}})}goToCreateNotification(){this.router.navigate(["rgw/notification/create"]),this.closeModal()}static{this.\u0275fac=function(t){return new(t||Sn)(e.\u0275\u0275directiveInject("bucket"),e.\u0275\u0275directiveInject("selectedNotification",8),e.\u0275\u0275directiveInject("editing",8),e.\u0275\u0275directiveInject(M.Ss),e.\u0275\u0275directiveInject(Le.c),e.\u0275\u0275directiveInject(Mt),e.\u0275\u0275directiveInject(te.J),e.\u0275\u0275directiveInject(Ne.$),e.\u0275\u0275directiveInject(Y.Router),e.\u0275\u0275directiveInject(e.ChangeDetectorRef))}}static{this.\u0275cmp=e.\u0275\u0275defineComponent({type:Sn,selectors:[["cd-rgw-notification-form"]],features:[e.\u0275\u0275InheritDefinitionFeature],decls:34,vars:18,consts:()=>{let n,t,_,i,a,r,s,d,u,m,C,O,f,I,R,h;return n=$localize`:␟2fecea01ce1d44114ee45144eff6d47a5016a74f␟5451140586403689891:Name...`,t=$localize`:␟b4506f4293568f9789c037b601cf38ce768ccbf6␟5885452247889934944:Topic`,_=$localize`:␟47a99051c51ce74c8d74952f0384bee8c47d2a4c␟2359825909280261681:Select a topic...`,i=$localize`:␟33288a1b940cc2fa0bb98a8f731cfde60c255504␟5068971426372821180:This topic will define and control the notification settings`,a=$localize`:␟226f33c41844bc02443480f955a4ac47d989fdf7␟1131315485524241185:Select event...`,r=$localize`:␟be3718d334722820002ceed249c6395cda135f13␟7564277409260335544:Choose the S3 event type that will trigger the notification, such as object creation or deletion`,s=$localize`:␟32c051e89f1087d69e0322d25513c89523c8aa61␟2070774748756186617: ${"\ufffd0\ufffd"}:INTERPOLATION: Notification configuration ${"\ufffd#3\ufffd"}:START_TAG_CD_HELP_TEXT:All fields are optional, except where marked required.${"\ufffd/#3\ufffd"}:CLOSE_TAG_CD_HELP_TEXT:`,d=$localize`:␟33a115beed8a8a3e3b35fdbf4c715228522e750c␟2154346811910841725:Topic Name ${"\ufffd#12\ufffd\ufffd/#12\ufffd"}:TAG_INPUT:`,u=$localize`:␟e204c3e7151233e93f7dee7e6a58baec2a4b05b4␟8111792474238067575: -- Select a topic -- `,m=$localize`:␟46a3b862a9d0974f198ff84d3ca810403a037205␟5577195126428182013:Enter a unique notification name`,C=$localize`:␟7cbdabcece469fab89cfa687ab152bca18b97498␟1417693714872528491:This field is required.`,O=$localize`:␟46dad50d21912fc8abebaba98dfb301caae4494a␟8029612683656323703:The name is already in use. Please choose a different one`,f=$localize`:␟e29822338ccba64e9664add5ea8698fd38198f86␟2670102952643753862: ${"\ufffd0\ufffd"}:INTERPOLATION: `,I=$localize`:␟7cbdabcece469fab89cfa687ab152bca18b97498␟1417693714872528491:This field is required.`,R=$localize`:␟92b3790ad76089397495b8bbe22c634e46f421c1␟3113602262789664432:${"\ufffd0\ufffd"}:INTERPOLATION:`,h=$localize`:␟cff1428d10d59d14e45edec3c735a27b5482db59␟8953033926734869941:Name`,[["formDir","ngForm"],["helpertext",""],["nameError",""],["topicError",""],["filterTemplate",""],["textInputName",""],s,d,u,m,C,O,f,I,R,["size","md",3,"overlaySelected","open"],[3,"closeSelect"],[3,"formAllFieldsRequired"],["cdsModalContent",""],["name","notificationForm","novalidate","",3,"formGroup"],["cdsRow","",1,"form-item","form-item-append"],["cdsCol",""],["labelInputID","name","cdRequiredField","Name",3,"invalid","invalidText","helperText"],["cdsText","","type","text","placeholder",n,"id","name","autoFocus","","formControlName","id",3,"invalid"],["id","topic","formControlName","topic","cdRequiredField","Topic","label",t,"placeholder",_,"helperText",i,3,"invalid","invalidText"],["value","",4,"ngIf"],[3,"ngValue"],[3,"ngValue",4,"ngFor","ngForOf"],["label","Event","type","multi","formControlName","event","placeholder",a,"itemValueKey","content","id","event","cdDynamicInputCombobox","","helperText",r,3,"updatedItems","items"],[1,"cd-header"],[4,"ngFor","ngForOf"],[3,"submitActionEvent","form","submitText","modalForm"],["class","invalid-feedback",4,"ngIf"],[1,"invalid-feedback"],["value",""],[4,"ngTemplateOutlet","ngTemplateOutletContext"],[3,"formGroup"],[3,"formArrayName"],[3,"formGroupName",4,"ngFor","ngForOf"],[3,"formGroupName"],[4,"ngIf","ngIfElse"],[3,"labelInputID","helperText"],["cdsText","","type","text","formControlName","Value",3,"placeholder"],["cdsCol","",1,"item-action-btn","spacing",3,"columnNumbers"],["kind","primary","size","sm",3,"click"],["cdsIcon","add","size","32",1,"cds--btn__icon"],["kind","danger","size","sm",3,"click"],["cdsIcon","trash-can","size","32",1,"cds--btn__icon"],["formControlName","Name","label",h,3,"id","helperText"],[3,"value",4,"ngFor","ngForOf"],[3,"value"],["cdsText","","type","text","formControlName","Name",3,"placeholder"]]},template:function(t,_){if(1&t){const i=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"cds-modal",15),e.\u0275\u0275listener("overlaySelected",function(){return e.\u0275\u0275restoreView(i),e.\u0275\u0275resetView(_.closeModal())}),e.\u0275\u0275elementStart(1,"cds-modal-header",16),e.\u0275\u0275listener("closeSelect",function(){return e.\u0275\u0275restoreView(i),e.\u0275\u0275resetView(_.closeModal())}),e.\u0275\u0275i18nStart(2,6),e.\u0275\u0275element(3,"cd-help-text",17),e.\u0275\u0275i18nEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementContainerStart(4),e.\u0275\u0275elementStart(5,"section",18)(6,"form",19,0)(8,"div",20)(9,"div",21)(10,"cds-text-label",22),e.\u0275\u0275i18nStart(11,7),e.\u0275\u0275element(12,"input",23),e.\u0275\u0275i18nEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275template(13,Pr,2,0,"ng-template",null,1,e.\u0275\u0275templateRefExtractor)(15,Gr,2,2,"ng-template",null,2,e.\u0275\u0275templateRefExtractor),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(17,"div",21)(18,"cds-select",24),e.\u0275\u0275template(19,Nr,2,0,"option",25),e.\u0275\u0275elementStart(20,"option",26),e.\u0275\u0275i18n(21,8),e.\u0275\u0275elementEnd(),e.\u0275\u0275template(22,Ar,2,2,"option",27),e.\u0275\u0275elementEnd(),e.\u0275\u0275template(23,br,1,1,"ng-template",null,3,e.\u0275\u0275templateRefExtractor),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(25,"div",20)(26,"div",21)(27,"cds-combo-box",28),e.\u0275\u0275listener("updatedItems",function(r){return e.\u0275\u0275restoreView(i),e.\u0275\u0275resetView(_.eventOption=r)}),e.\u0275\u0275element(28,"cds-dropdown-list"),e.\u0275\u0275elementEnd()()(),e.\u0275\u0275elementStart(29,"cd-form-advanced-fieldset",29),e.\u0275\u0275template(30,Lr,2,11,"ng-container",30),e.\u0275\u0275elementEnd()()(),e.\u0275\u0275elementContainerEnd(),e.\u0275\u0275elementStart(31,"cd-form-button-panel",31),e.\u0275\u0275listener("submitActionEvent",function(){return e.\u0275\u0275restoreView(i),e.\u0275\u0275resetView(_.onSubmit())}),e.\u0275\u0275elementEnd()(),e.\u0275\u0275template(32,xr,5,4,"ng-template",null,4,e.\u0275\u0275templateRefExtractor)}if(2&t){const i=e.\u0275\u0275reference(14),a=e.\u0275\u0275reference(16),r=e.\u0275\u0275reference(24);e.\u0275\u0275property("open",_.open),e.\u0275\u0275advance(3),e.\u0275\u0275property("formAllFieldsRequired",!1),e.\u0275\u0275i18nExp(_.editing?"Edit":"Create"),e.\u0275\u0275i18nApply(2),e.\u0275\u0275advance(3),e.\u0275\u0275property("formGroup",_.notificationForm),e.\u0275\u0275advance(4),e.\u0275\u0275property("invalid",_.notificationForm.controls.id.invalid&&_.notificationForm.controls.id.dirty)("invalidText",a)("helperText",i),e.\u0275\u0275advance(2),e.\u0275\u0275property("invalid",_.notificationForm.controls.id.invalid&&_.notificationForm.controls.id.dirty),e.\u0275\u0275advance(6),e.\u0275\u0275property("invalid",_.notificationForm.controls.topic.invalid&&_.notificationForm.controls.topic.dirty)("invalidText",r),e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf",null===_.topicArn),e.\u0275\u0275advance(),e.\u0275\u0275property("ngValue",null),e.\u0275\u0275advance(2),e.\u0275\u0275property("ngForOf",_.topicArn),e.\u0275\u0275advance(5),e.\u0275\u0275property("items",_.eventOption),e.\u0275\u0275advance(3),e.\u0275\u0275property("ngForOf",_.filterTypes),e.\u0275\u0275advance(),e.\u0275\u0275property("form",_.notificationForm)("submitText",_.editing?_.actionLabels.EDIT:_.actionLabels.CREATE)("modalForm",!0)}},dependencies:[g.NgForOf,g.NgIf,g.NgTemplateOutlet,oe.e,ie.O,uo.e,j.S,ne.E,Qe.P,Fr.k,l.\u0275NgNoValidate,l.NgSelectOption,l.\u0275NgSelectMultipleOption,l.DefaultValueAccessor,l.NgControlStatus,l.NgControlStatusGroup,l.FormGroupDirective,l.FormControlName,l.FormGroupName,l.FormArrayName,c.Modal,c.ModalHeader,c.ModalContent,c.ColumnDirective,c.RowDirective,c.IconButton,c.IconDirective,c.TextInputLabelComponent,c.TextInput,c.ComboBox,c.DropdownList,c.Select,c.Option]})}}const wr=["filterTpl"],Ur=["eventTpl"];function kr(o,n){if(1&o){const t=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementContainerStart(0),e.\u0275\u0275elementStart(1,"cd-table",6,2),e.\u0275\u0275listener("updateSelection",function(i){e.\u0275\u0275restoreView(t);const a=e.\u0275\u0275nextContext();return e.\u0275\u0275resetView(a.updateSelection(i))})("fetchData",function(){e.\u0275\u0275restoreView(t);const i=e.\u0275\u0275nextContext();return e.\u0275\u0275resetView(i.fetchData())}),e.\u0275\u0275element(3,"cd-table-actions",7),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementContainerEnd()}if(2&o){const t=n.ngIf,_=e.\u0275\u0275nextContext();e.\u0275\u0275advance(),e.\u0275\u0275property("data",t)("columns",_.columns),e.\u0275\u0275advance(2),e.\u0275\u0275property("permission",_.permission)("selection",_.selection)("tableActions",_.tableActions)}}function zr(o,n){if(1&o&&(e.\u0275\u0275elementStart(0,"div",11)(1,"cds-tag",12),e.\u0275\u0275text(2),e.\u0275\u0275elementEnd()()),2&o){const t=n.$implicit;e.\u0275\u0275property("cdsStack","horizontal"),e.\u0275\u0275advance(2),e.\u0275\u0275textInterpolate2("",t.Name,": ",t.Value,"")}}function Hr(o,n){if(1&o&&(e.\u0275\u0275elementContainerStart(0),e.\u0275\u0275elementStart(1,"div",9),e.\u0275\u0275text(2),e.\u0275\u0275elementEnd(),e.\u0275\u0275template(3,zr,3,3,"div",10),e.\u0275\u0275element(4,"br"),e.\u0275\u0275elementContainerEnd()),2&o){const t=e.\u0275\u0275nextContext().$implicit;e.\u0275\u0275advance(2),e.\u0275\u0275textInterpolate1(" ",t.key,": "),e.\u0275\u0275advance(),e.\u0275\u0275property("ngForOf",t.value.FilterRule)}}function Xr(o,n){if(1&o&&(e.\u0275\u0275elementContainerStart(0),e.\u0275\u0275template(1,Hr,5,2,"ng-container",5),e.\u0275\u0275elementContainerEnd()),2&o){const t=n.$implicit;e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf",null==t.value||null==t.value.FilterRule?null:t.value.FilterRule.length)}}function Br(o,n){if(1&o&&(e.\u0275\u0275elementContainerStart(0),e.\u0275\u0275template(1,Xr,2,1,"ng-container",8),e.\u0275\u0275pipe(2,"keyvalue"),e.\u0275\u0275elementContainerEnd()),2&o){const t=e.\u0275\u0275nextContext().data.value;e.\u0275\u0275advance(),e.\u0275\u0275property("ngForOf",e.\u0275\u0275pipeBind1(2,1,t))}}function Vr(o,n){if(1&o&&e.\u0275\u0275template(0,Br,3,3,"ng-container",5),2&o){const t=n.data.value;e.\u0275\u0275property("ngIf",t)}}function Zr(o,n){if(1&o&&(e.\u0275\u0275elementStart(0,"cds-tag",14),e.\u0275\u0275text(1),e.\u0275\u0275elementEnd()),2&o){const t=n.$implicit;e.\u0275\u0275advance(),e.\u0275\u0275textInterpolate1(" ",t," ")}}function Kr(o,n){if(1&o&&(e.\u0275\u0275elementContainerStart(0),e.\u0275\u0275template(1,Zr,2,1,"cds-tag",13),e.\u0275\u0275elementContainerEnd()),2&o){const t=e.\u0275\u0275nextContext().data.value;e.\u0275\u0275advance(),e.\u0275\u0275property("ngForOf",t)}}function qr(o,n){if(1&o&&e.\u0275\u0275template(0,Kr,2,1,"ng-container",5),2&o){const t=n.data.value;e.\u0275\u0275property("ngIf",t&&t.length)}}class Fn extends et.D{constructor(n,t,_,i,a){super(),this.rgwBucketService=n,this.authStorageService=t,this.actionLabels=_,this.modalService=i,this.notificationService=a,this.updateBucketDetails=new e.EventEmitter,this.columns=[],this.selection=new Ge.y,this.subject=new w.BehaviorSubject([])}ngOnInit(){this.permission=this.authStorageService.getPermissions().rgw,this.columns=[{name:$localize`Name`,prop:"Id",flexGrow:2},{name:$localize`Topic`,prop:"Topic",flexGrow:1,cellTransformation:He.x.copy},{name:$localize`Event`,prop:"Event",flexGrow:1,cellTemplate:this.eventTpl},{name:$localize`Filter`,prop:"Filter",flexGrow:1,cellTemplate:this.filterTpl}];const n={permission:"create",icon:L.FI.add,click:()=>this.openNotificationModal(this.actionLabels.CREATE),name:this.actionLabels.CREATE},t={permission:"update",icon:L.FI.edit,disable:()=>this.selection.hasMultiSelection,click:()=>this.openNotificationModal(this.actionLabels.EDIT),name:this.actionLabels.EDIT},_={permission:"delete",icon:L.FI.destroy,click:()=>this.deleteAction(),disable:()=>!this.selection.hasSelection,name:this.actionLabels.DELETE,canBePrimary:i=>i.hasMultiSelection};this.tableActions=[n,t,_],this.notification$=this.subject.pipe((0,Z.switchMap)(()=>this.rgwBucketService.listNotification(this.bucket.bucket).pipe((0,Z.catchError)(i=>(this.context.error(i),(0,w.of)(null))))))}fetchData(){this.subject.next([])}openNotificationModal(n){this.modalService.show(Sn,{bucket:this.bucket,selectedNotification:this.selection.first(),editing:n===this.actionLabels.EDIT})?.close?.subscribe(()=>this.updateBucketDetails.emit())}updateSelection(n){this.selection=n}deleteAction(){const n=this.selection.selected.map(t=>t.Id);this.modalRef=this.modalService.show(Ue.D,{itemDescription:$localize`Notification`,itemNames:n,actionDescription:$localize`delete`,submitAction:()=>this.submitDeleteNotifications(n)})}submitDeleteNotifications(n){this.rgwBucketService.deleteNotification(this.bucket.bucket,n.join(",")).subscribe({next:()=>{this.notificationService.show(x._.success,$localize`Notifications deleted successfully.`),this.modalService.dismissAll()},error:()=>{this.notificationService.show(x._.success,$localize`Failed to delete notifications. Please try again.`)}}),this.modalRef?.close?.subscribe(()=>this.updateBucketDetails.emit())}static{this.\u0275fac=function(t){return new(t||Fn)(e.\u0275\u0275directiveInject(Le.c),e.\u0275\u0275directiveInject(be.v),e.\u0275\u0275directiveInject(M.Ss),e.\u0275\u0275directiveInject(he.V),e.\u0275\u0275directiveInject(te.J))}}static{this.\u0275cmp=e.\u0275\u0275defineComponent({type:Fn,selectors:[["cd-rgw-bucket-notification-list"]],viewQuery:function(t,_){if(1&t&&(e.\u0275\u0275viewQuery(ae.O,7),e.\u0275\u0275viewQuery(wr,7),e.\u0275\u0275viewQuery(Ur,7)),2&t){let i;e.\u0275\u0275queryRefresh(i=e.\u0275\u0275loadQuery())&&(_.table=i.first),e.\u0275\u0275queryRefresh(i=e.\u0275\u0275loadQuery())&&(_.filterTpl=i.first),e.\u0275\u0275queryRefresh(i=e.\u0275\u0275loadQuery())&&(_.eventTpl=i.first)}},inputs:{bucket:"bucket"},outputs:{updateBucketDetails:"updateBucketDetails"},features:[e.\u0275\u0275ProvidersFeature([{provide:se.E,useValue:new se.E("rgw/bucket")}]),e.\u0275\u0275InheritDefinitionFeature],decls:10,vars:3,consts:()=>{let n;return n=$localize`:␟840aee864d9d359f1abc93628d024d9dad6f064a␟970694873958172896: Notification Configuration ${"\ufffd#3\ufffd"}:START_TAG_CD_HELP_TEXT: Configure bucket notification to trigger alerts for specific events, such as object creation or transitions, based on prefixes or tags. ${"\ufffd/#3\ufffd"}:CLOSE_TAG_CD_HELP_TEXT:`,[["filterTpl",""],["eventTpl",""],["table",""],n,[1,"cd-header"],[4,"ngIf"],["columnMode","flex","selectionType","single","identifier","Id",3,"updateSelection","fetchData","data","columns"],[1,"table-actions",3,"permission","selection","tableActions"],[4,"ngFor","ngForOf"],[1,"cds--label"],[3,"cdsStack",4,"ngFor","ngForOf"],[3,"cdsStack"],["size","sm",1,"badge-background-gray"],["size","sm","class","badge-background-primary",4,"ngFor","ngForOf"],["size","sm",1,"badge-background-primary"]]},template:function(t,_){1&t&&(e.\u0275\u0275elementStart(0,"fieldset")(1,"legend",4),e.\u0275\u0275i18nStart(2,3),e.\u0275\u0275element(3,"cd-help-text"),e.\u0275\u0275i18nEnd(),e.\u0275\u0275elementEnd()(),e.\u0275\u0275template(4,kr,4,5,"ng-container",5),e.\u0275\u0275pipe(5,"async"),e.\u0275\u0275template(6,Vr,1,1,"ng-template",null,0,e.\u0275\u0275templateRefExtractor)(8,qr,1,1,"ng-template",null,1,e.\u0275\u0275templateRefExtractor)),2&t&&(e.\u0275\u0275advance(4),e.\u0275\u0275property("ngIf",e.\u0275\u0275pipeBind1(5,1,_.notification$)))},dependencies:[g.NgForOf,g.NgIf,ie.O,ae.O,$e.j,c.Tag,c.StackDirective,g.AsyncPipe,g.KeyValuePipe],styles:[".cds--type-mono{margin-right:.25rem}"]})}}var Yr=T(71138);class kt{constructor(){}format(n,t=null,_=2,i=0){if(!n)return null;let a="";"string"==typeof n&&(n=JSON.parse(n));for(let r in n)if(n.hasOwnProperty(r)){const s=n[r],d=" ".repeat(i);if(t){const[u,m]=Object.entries(t)[0];r===u&&(r=m)}Array.isArray(s)?s.forEach(u=>{a+=`${d}<${r}>\n`+this.format(u,t,_,i+_)+`${d}</${r}>\n`}):a+="object"==typeof s?`${d}<${r}>\n`+this.format(s,t,_,i+_)+`${d}</${r}>\n`:`${d}<${r}>${s}</${r}>\n`}return a}static{this.\u0275fac=function(t){return new(t||kt)}}static{this.\u0275prov=e.\u0275\u0275defineInjectable({token:kt,factory:kt.\u0275fac,providedIn:"root"})}}class Mn{constructor(n){this.jsonToXmlService=n}transform(n,t={},_="json"){return"json"===_&&(n=this.jsonToXmlService.format(n,t)),n}static{this.\u0275fac=function(t){return new(t||Mn)(e.\u0275\u0275directiveInject(kt,16))}}static{this.\u0275pipe=e.\u0275\u0275definePipe({name:"xml",type:Mn,pure:!0})}}const jo=o=>({active:o}),Qr=()=>({Rules:"Rule"});function Jr(o,n){1&o&&(e.\u0275\u0275elementStart(0,"td"),e.\u0275\u0275i18n(1,18),e.\u0275\u0275elementEnd())}function el(o,n){if(1&o&&(e.\u0275\u0275elementStart(0,"td"),e.\u0275\u0275text(1),e.\u0275\u0275pipe(2,"dimless"),e.\u0275\u0275elementEnd()),2&o){const t=e.\u0275\u0275nextContext(4);e.\u0275\u0275advance(),e.\u0275\u0275textInterpolate1(" ",e.\u0275\u0275pipeBind1(2,1,t.selection.bucket_quota.max_size)," ")}}function tl(o,n){1&o&&(e.\u0275\u0275elementStart(0,"td"),e.\u0275\u0275i18n(1,19),e.\u0275\u0275elementEnd())}function nl(o,n){if(1&o&&(e.\u0275\u0275elementStart(0,"td"),e.\u0275\u0275text(1),e.\u0275\u0275elementEnd()),2&o){const t=e.\u0275\u0275nextContext(4);e.\u0275\u0275advance(),e.\u0275\u0275textInterpolate1(" ",t.selection.bucket_quota.max_objects," ")}}function ol(o,n){if(1&o&&(e.\u0275\u0275elementContainerStart(0),e.\u0275\u0275elementStart(1,"tr")(2,"td",45),e.\u0275\u0275i18n(3,16),e.\u0275\u0275elementEnd(),e.\u0275\u0275template(4,Jr,2,0,"td",33)(5,el,3,3,"td",33),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(6,"tr")(7,"td",45),e.\u0275\u0275i18n(8,17),e.\u0275\u0275elementEnd(),e.\u0275\u0275template(9,tl,2,0,"td",33)(10,nl,2,1,"td",33),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementContainerEnd()),2&o){const t=e.\u0275\u0275nextContext(3);e.\u0275\u0275advance(4),e.\u0275\u0275property("ngIf",t.selection.bucket_quota.max_size<=-1),e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf",t.selection.bucket_quota.max_size>-1),e.\u0275\u0275advance(4),e.\u0275\u0275property("ngIf",t.selection.bucket_quota.max_objects<=-1),e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf",t.selection.bucket_quota.max_objects>-1)}}function _l(o,n){if(1&o&&(e.\u0275\u0275elementContainerStart(0),e.\u0275\u0275elementStart(1,"tr")(2,"td",45),e.\u0275\u0275i18n(3,20),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(4,"td"),e.\u0275\u0275text(5),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(6,"tr")(7,"td",45),e.\u0275\u0275i18n(8,21),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(9,"td"),e.\u0275\u0275text(10),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementContainerEnd()),2&o){const t=e.\u0275\u0275nextContext(3);e.\u0275\u0275advance(5),e.\u0275\u0275textInterpolate(t.selection.lock_mode),e.\u0275\u0275advance(5),e.\u0275\u0275textInterpolate(t.selection.lock_retention_period_days)}}function il(o,n){if(1&o&&(e.\u0275\u0275elementStart(0,"tr")(1,"td",43),e.\u0275\u0275i18n(2,23),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(3,"td",44),e.\u0275\u0275text(4),e.\u0275\u0275elementEnd()()),2&o){const t=n.$implicit;e.\u0275\u0275advance(2),e.\u0275\u0275i18nExp(t.key),e.\u0275\u0275i18nApply(2),e.\u0275\u0275advance(2),e.\u0275\u0275textInterpolate(t.value)}}function al(o,n){if(1&o&&(e.\u0275\u0275elementContainerStart(0),e.\u0275\u0275elementStart(1,"legend"),e.\u0275\u0275i18n(2,22),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(3,"table",48)(4,"tbody"),e.\u0275\u0275template(5,il,5,2,"tr",49),e.\u0275\u0275pipe(6,"keyvalue"),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementContainerEnd()),2&o){const t=e.\u0275\u0275nextContext(3);e.\u0275\u0275advance(5),e.\u0275\u0275property("ngForOf",e.\u0275\u0275pipeBind1(6,1,t.selection.tagset))}}function rl(o,n){if(1&o&&(e.\u0275\u0275elementContainerStart(0),e.\u0275\u0275element(1,"cd-rgw-rate-limit-details",50),e.\u0275\u0275elementContainerEnd()),2&o){const t=e.\u0275\u0275nextContext(3);e.\u0275\u0275advance(),e.\u0275\u0275property("rateLimitConfig",t.bucketRateLimit)("type","bucket")}}function ll(o,n){if(1&o&&(e.\u0275\u0275elementStart(0,"table",42)(1,"tbody")(2,"tr")(3,"td",43),e.\u0275\u0275i18n(4,5),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(5,"td",44),e.\u0275\u0275text(6),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(7,"tr")(8,"td",45),e.\u0275\u0275i18n(9,6),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(10,"td"),e.\u0275\u0275text(11),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(12,"tr")(13,"td",45),e.\u0275\u0275i18n(14,7),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(15,"td"),e.\u0275\u0275text(16),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(17,"tr")(18,"td",45),e.\u0275\u0275i18n(19,8),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(20,"td"),e.\u0275\u0275text(21),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(22,"tr")(23,"td",45),e.\u0275\u0275i18n(24,9),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(25,"td"),e.\u0275\u0275text(26),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(27,"tr")(28,"td",45),e.\u0275\u0275i18n(29,10),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(30,"td"),e.\u0275\u0275text(31),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(32,"tr")(33,"td",45),e.\u0275\u0275i18n(34,11),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(35,"td"),e.\u0275\u0275text(36),e.\u0275\u0275pipe(37,"cdDate"),e.\u0275\u0275elementEnd()()()(),e.\u0275\u0275elementStart(38,"div")(39,"legend"),e.\u0275\u0275i18n(40,12),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(41,"table",46)(42,"tbody")(43,"tr")(44,"td",43),e.\u0275\u0275i18n(45,13),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(46,"td",44),e.\u0275\u0275text(47),e.\u0275\u0275pipe(48,"booleanText"),e.\u0275\u0275elementEnd()(),e.\u0275\u0275template(49,ol,11,4,"ng-container",33),e.\u0275\u0275elementEnd()()(),e.\u0275\u0275elementStart(50,"legend"),e.\u0275\u0275i18n(51,14),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(52,"table",47)(53,"tbody")(54,"tr")(55,"td",43),e.\u0275\u0275i18n(56,15),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(57,"td",44),e.\u0275\u0275text(58),e.\u0275\u0275pipe(59,"booleanText"),e.\u0275\u0275elementEnd()(),e.\u0275\u0275template(60,_l,11,2,"ng-container",33),e.\u0275\u0275elementEnd()(),e.\u0275\u0275template(61,al,7,3,"ng-container",33),e.\u0275\u0275pipe(62,"keyvalue"),e.\u0275\u0275template(63,rl,2,2,"ng-container",33)),2&o){let t;const _=e.\u0275\u0275nextContext(2);e.\u0275\u0275advance(6),e.\u0275\u0275textInterpolate(_.selection.versioning),e.\u0275\u0275advance(5),e.\u0275\u0275textInterpolate(_.selection.encryption),e.\u0275\u0275advance(5),e.\u0275\u0275textInterpolate(_.replicationStatus),e.\u0275\u0275advance(5),e.\u0275\u0275textInterpolate(_.selection.mfa_delete),e.\u0275\u0275advance(5),e.\u0275\u0275textInterpolate(_.selection.index_type),e.\u0275\u0275advance(5),e.\u0275\u0275textInterpolate(_.selection.placement_rule),e.\u0275\u0275advance(5),e.\u0275\u0275textInterpolate(e.\u0275\u0275pipeBind1(37,13,_.selection.mtime)),e.\u0275\u0275advance(11),e.\u0275\u0275textInterpolate(e.\u0275\u0275pipeBind1(48,15,_.selection.bucket_quota.enabled)),e.\u0275\u0275advance(2),e.\u0275\u0275property("ngIf",_.selection.bucket_quota.enabled),e.\u0275\u0275advance(9),e.\u0275\u0275textInterpolate(e.\u0275\u0275pipeBind1(59,17,_.selection.lock_enabled)),e.\u0275\u0275advance(2),e.\u0275\u0275property("ngIf",_.selection.lock_enabled),e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf",null==(t=e.\u0275\u0275pipeBind1(62,19,_.selection.tagset))?null:t.length),e.\u0275\u0275advance(2),e.\u0275\u0275property("ngIf",!!_.bucketRateLimit)}}function sl(o,n){if(1&o){const t=e.\u0275\u0275getCurrentView();e.\u0275\u0275i18nStart(0,25,1),e.\u0275\u0275elementStart(1,"div",55)(2,"button",56),e.\u0275\u0275listener("click",function(){e.\u0275\u0275restoreView(t);const i=e.\u0275\u0275nextContext(3);return e.\u0275\u0275resetView(i.updateLifecycleFormatTo("json"))}),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(3,"button",56),e.\u0275\u0275listener("click",function(){e.\u0275\u0275restoreView(t);const i=e.\u0275\u0275nextContext(3);return e.\u0275\u0275resetView(i.updateLifecycleFormatTo("xml"))}),e.\u0275\u0275elementEnd()(),e.\u0275\u0275i18nEnd()}if(2&o){const t=e.\u0275\u0275nextContext(3);e.\u0275\u0275advance(2),e.\u0275\u0275property("ngClass",e.\u0275\u0275pureFunction1(2,jo,"json"===t.lifecycleFormat)),e.\u0275\u0275advance(),e.\u0275\u0275property("ngClass",e.\u0275\u0275pureFunction1(4,jo,"xml"===t.lifecycleFormat))}}function cl(o,n){if(1&o&&(e.\u0275\u0275elementStart(0,"cds-code-snippet",57),e.\u0275\u0275text(1),e.\u0275\u0275pipe(2,"json"),e.\u0275\u0275elementEnd()),2&o){const t=e.\u0275\u0275nextContext(3);e.\u0275\u0275advance(),e.\u0275\u0275textInterpolate1(" ",e.\u0275\u0275pipeBind1(2,1,t.selection.lifecycle)," ")}}function dl(o,n){if(1&o&&(e.\u0275\u0275elementStart(0,"cds-code-snippet",57),e.\u0275\u0275text(1),e.\u0275\u0275pipe(2,"xml"),e.\u0275\u0275elementEnd()),2&o){const t=e.\u0275\u0275nextContext(3);e.\u0275\u0275advance(),e.\u0275\u0275textInterpolate1(" ",e.\u0275\u0275pipeBind2(2,1,t.selection.lifecycle,e.\u0275\u0275pureFunction0(4,Qr))||"-"," ")}}function ul(o,n){if(1&o&&(e.\u0275\u0275elementStart(0,"div",61),e.\u0275\u0275text(1),e.\u0275\u0275elementEnd()),2&o){const t=e.\u0275\u0275nextContext(4);e.\u0275\u0275advance(),e.\u0275\u0275textInterpolate(null==t.lifecycleProgress?null:t.lifecycleProgress.started)}}function pl(o,n){if(1&o&&(e.\u0275\u0275elementStart(0,"tr")(1,"td",43),e.\u0275\u0275i18n(2,32),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(3,"td")(4,"cds-tooltip",58)(5,"cds-tag",59),e.\u0275\u0275text(6),e.\u0275\u0275elementEnd()(),e.\u0275\u0275template(7,ul,2,1,"div",60),e.\u0275\u0275elementEnd()()),2&o){let t,_;const i=e.\u0275\u0275nextContext(3);e.\u0275\u0275advance(4),e.\u0275\u0275property("description",null==(t=i.lifecycleProgressMap.get(i.lifecycleProgress.status))?null:t.description)("align","top"),e.\u0275\u0275advance(),e.\u0275\u0275property("type",null==(_=i.lifecycleProgressMap.get(i.lifecycleProgress.status))?null:_.color),e.\u0275\u0275advance(),e.\u0275\u0275textInterpolate1(" ",i.lifecycleProgress.status," "),e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf","UNINITIAL"!==(null==i.lifecycleProgress?null:i.lifecycleProgress.status))}}function ml(o,n){if(1&o&&(e.\u0275\u0275elementStart(0,"div",51)(1,"table",48)(2,"tbody")(3,"tr")(4,"td",43),e.\u0275\u0275i18n(5,24),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(6,"td")(7,"pre"),e.\u0275\u0275text(8),e.\u0275\u0275pipe(9,"json"),e.\u0275\u0275elementEnd()()(),e.\u0275\u0275elementStart(10,"tr")(11,"td",43),e.\u0275\u0275i18nStart(12,25),e.\u0275\u0275template(13,sl,4,6,"div",52),e.\u0275\u0275pipe(14,"json"),e.\u0275\u0275i18nEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(15,"td"),e.\u0275\u0275template(16,cl,3,3,"cds-code-snippet",53)(17,dl,3,5,"cds-code-snippet",53),e.\u0275\u0275elementEnd()(),e.\u0275\u0275template(18,pl,8,5,"tr",33),e.\u0275\u0275elementStart(19,"tr")(20,"td",43),e.\u0275\u0275i18n(21,26),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(22,"td")(23,"pre"),e.\u0275\u0275text(24),e.\u0275\u0275pipe(25,"json"),e.\u0275\u0275elementEnd()()(),e.\u0275\u0275elementStart(26,"tr")(27,"td",43),e.\u0275\u0275i18n(28,27),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(29,"td")(30,"table",54)(31,"thead")(32,"tr"),e.\u0275\u0275i18nStart(33,28),e.\u0275\u0275element(34,"th")(35,"th"),e.\u0275\u0275i18nEnd(),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(36,"tbody")(37,"tr"),e.\u0275\u0275i18nStart(38,29),e.\u0275\u0275element(39,"td")(40,"td"),e.\u0275\u0275i18nEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(41,"tr"),e.\u0275\u0275i18nStart(42,30),e.\u0275\u0275element(43,"td")(44,"td"),e.\u0275\u0275i18nEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(45,"tr"),e.\u0275\u0275i18nStart(46,31),e.\u0275\u0275element(47,"td")(48,"td"),e.\u0275\u0275i18nEnd(),e.\u0275\u0275elementEnd()()()()()()()()),2&o){const t=e.\u0275\u0275nextContext(2);e.\u0275\u0275advance(8),e.\u0275\u0275textInterpolate(e.\u0275\u0275pipeBind1(9,9,t.selection.bucket_policy)),e.\u0275\u0275advance(5),e.\u0275\u0275property("ngIf","{}"!==e.\u0275\u0275pipeBind1(14,11,t.selection.lifecycle)),e.\u0275\u0275advance(3),e.\u0275\u0275property("ngIf","json"===t.lifecycleFormat),e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf","xml"===t.lifecycleFormat),e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf",(null==t.selection.lifecycle_progress?null:t.selection.lifecycle_progress.length)>0),e.\u0275\u0275advance(6),e.\u0275\u0275textInterpolate(e.\u0275\u0275pipeBind1(25,13,t.selection.replication)),e.\u0275\u0275advance(16),e.\u0275\u0275i18nExp(t.aclPermissions.Owner||"-"),e.\u0275\u0275i18nApply(38),e.\u0275\u0275advance(4),e.\u0275\u0275i18nExp(t.aclPermissions.AllUsers||"-"),e.\u0275\u0275i18nApply(42),e.\u0275\u0275advance(4),e.\u0275\u0275i18nExp(t.aclPermissions.AuthenticatedUsers||"-"),e.\u0275\u0275i18nApply(46)}}function Tl(o,n){if(1&o){const t=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"cd-rgw-bucket-lifecycle-list",62),e.\u0275\u0275listener("updateBucketDetails",function(){e.\u0275\u0275restoreView(t);const i=e.\u0275\u0275nextContext(2);return e.\u0275\u0275resetView(i.updateBucketDetails(i.extractLifecycleDetails.bind(i)))}),e.\u0275\u0275elementEnd()}if(2&o){const t=e.\u0275\u0275nextContext(2);e.\u0275\u0275property("bucket",t.selection)}}function gl(o,n){if(1&o&&e.\u0275\u0275element(0,"cd-rgw-bucket-notification-list",63),2&o){const t=e.\u0275\u0275nextContext(2);e.\u0275\u0275property("bucket",t.selection)}}function El(o,n){if(1&o&&(e.\u0275\u0275elementContainerStart(0),e.\u0275\u0275elementStart(1,"nav",34,0),e.\u0275\u0275elementContainerStart(3,35),e.\u0275\u0275elementStart(4,"a",36),e.\u0275\u0275i18n(5,1),e.\u0275\u0275elementEnd(),e.\u0275\u0275template(6,ll,64,21,"ng-template",37),e.\u0275\u0275elementContainerEnd(),e.\u0275\u0275elementContainerStart(7,38),e.\u0275\u0275elementStart(8,"a",36),e.\u0275\u0275i18n(9,2),e.\u0275\u0275elementEnd(),e.\u0275\u0275template(10,ml,49,15,"ng-template",37),e.\u0275\u0275elementContainerEnd(),e.\u0275\u0275elementContainerStart(11,39),e.\u0275\u0275elementStart(12,"a",36),e.\u0275\u0275i18n(13,3),e.\u0275\u0275elementEnd(),e.\u0275\u0275template(14,Tl,1,1,"ng-template",37),e.\u0275\u0275elementContainerEnd(),e.\u0275\u0275elementContainerStart(15,40),e.\u0275\u0275elementStart(16,"a",36),e.\u0275\u0275i18n(17,4),e.\u0275\u0275elementEnd(),e.\u0275\u0275template(18,gl,1,1,"ng-template",37),e.\u0275\u0275elementContainerEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275element(19,"div",41),e.\u0275\u0275elementContainerEnd()),2&o){const t=e.\u0275\u0275reference(2);e.\u0275\u0275advance(19),e.\u0275\u0275property("ngbNavOutlet",t)}}class Pn{constructor(n,t){this.rgwBucketService=n,this.cd=t,this.lifecycleProgressMap=new Map([["UNINITIAL",{description:$localize`The process has not run yet`,color:"cool-gray"}],["PROCESSING",{description:$localize`The process is currently running`,color:"cyan"}],["COMPLETE",{description:$localize`The process has completed`,color:"green"}]]),this.lifecycleFormat="json",this.aclPermissions={},this.replicationStatus=$localize`Disabled`}ngOnChanges(){this.updateBucketDetails(this.extraxtDetailsfromResponse.bind(this))}parseXmlAcl(n,t){const _=new Go.Parser({explicitArray:!1,trim:!0});let i={Owner:["-"],AllUsers:["-"],AuthenticatedUsers:["-"]};return _.parseString(n,(a,r)=>{if(a)return null;const s=r.AccessControlPolicy.AccessControlList.Grant;if(Array.isArray(s))for(let d=0;d<s.length;d++){const u=s[d];if(u?.Grantee?.URI){const m=u.Grantee.URI.split("/").pop();i[m].includes("-")?i[m]=[u?.Permission]:i[m].push(u?.Permission)}u?.Grantee?.ID&&t===u?.Grantee?.ID&&(i.Owner=u?.Permission)}else s?.Grantee?.ID&&t===s?.Grantee?.ID&&(i.Owner=s?.Permission)}),i}updateBucketDetails(n){this.selection&&this.rgwBucketService.get(this.selection.bid).subscribe(t=>{t.lock_retention_period_days=this.rgwBucketService.getLockDays(t),this.selection=t,n()})}extraxtDetailsfromResponse(){this.aclPermissions=this.parseXmlAcl(this.selection.acl,this.selection.owner),this.selection.replication?.Rule?.Status&&(this.replicationStatus=this.selection.replication?.Rule?.Status),this.rgwBucketService.getBucketRateLimit(this.selection.bid).subscribe(n=>{n&&void 0!==n.bucket_ratelimit&&(this.bucketRateLimit=n.bucket_ratelimit)}),this.extractLifecycleDetails()}extractLifecycleDetails(){"json"===this.lifecycleFormat&&!this.selection.lifecycle&&(this.selection.lifecycle={}),this.selection.lifecycle_progress?.length>0&&this.selection.lifecycle_progress.forEach(n=>{n.bucket.includes(this.selection.bucket)&&(this.lifecycleProgress=n)})}updateLifecycleFormatTo(n){this.lifecycleFormat=n,this.cd.detectChanges()}static{this.\u0275fac=function(t){return new(t||Pn)(e.\u0275\u0275directiveInject(Le.c),e.\u0275\u0275directiveInject(e.ChangeDetectorRef))}}static{this.\u0275cmp=e.\u0275\u0275defineComponent({type:Pn,selectors:[["cd-rgw-bucket-details"]],inputs:{selection:"selection"},features:[e.\u0275\u0275NgOnChangesFeature],decls:1,vars:1,consts:()=>{let n,t,_,i,a,r,s,d,u,m,C,O,f,I,R,h,G,U,k,y,H,X,B,V,S,P,ee,Q,q,J,$,_e;return n=$localize`:␟4f8b2bb476981727ab34ed40fde1218361f92c45␟5028777105388019087:Details`,t=$localize`:␟3e89f7faf308063adb8548100889a129913c86b2␟4551581141684694255:Policies`,_=$localize`:␟bf402445636acc83bf52682343402e7696df851f␟5985785846683222538:Tiering`,i=$localize`:␟dfb6e8f1028903902ead54d62afeb71adfa750ff␟8044304973848447418:Notification`,a=$localize`:␟efeade5060b3add63863c24871f0830fb16b7e6d␟2914579537400068937:Versioning`,r=$localize`:␟948758e1412bb2ecdb98e3a4f1cbb6d7458456f2␟8255877266497322342:Encryption`,s=$localize`:␟ceffc39de050ef87d0e4641a359539daf8dfd3df␟3354578761019630653:Replication`,d=$localize`:␟62a923f047ca49e7a4782629e91fea1ba32db68f␟5223994412907084851:MFA Delete`,u=$localize`:␟e5c51963a9c553b29427ef783bbb69fa6634fa8c␟4944981956950685098:Index type`,m=$localize`:␟8e6f950a32eaea32ec7e192f9ca3d3dfe469d4ba␟6347226439070242084:Placement rule`,C=$localize`:␟6e07ad23183912aa37b75339e4a4231a75bf2612␟57753949110245173:Last modification time`,O=$localize`:␟649a410bd0ace333d067d8fa22f12bdbdb43533b␟3048195452916484333:Bucket quota`,f=$localize`:␟f50a33d3c339f8f4a465141f8caa5d2d8c005251␟4816216590591222133:Enabled`,I=$localize`:␟7b84370895ab9eb44672f57146fa05c5947f1c0c␟2483890877898439142:Locking`,R=$localize`:␟f50a33d3c339f8f4a465141f8caa5d2d8c005251␟4816216590591222133:Enabled`,h=$localize`:␟cef1595d040e77cbb4466e60382028d4c2040cac␟5921515272395118682:Maximum size`,G=$localize`:␟ee862a800364b4d11f9b8cb9955a28a60f840a45␟868710308722667739:Maximum objects`,U=$localize`:␟aa6fb95c355f172bda303de1ce2f38c251a149cf␟240806681889331244:Unlimited`,k=$localize`:␟aa6fb95c355f172bda303de1ce2f38c251a149cf␟240806681889331244:Unlimited`,y=$localize`:␟37e10df2d9c0c25ef04ac112c9c9a7723e8efae0␟1713271461473302108:Mode`,H=$localize`:␟a5c3d9d2296f7886e8289b9f623323803deacfc6␟840951359074313455:Days`,X=$localize`:␟cafc87479686947e2590b9f588a88040aeaf660b␟7886570921510760899:Tags`,B=$localize`:␟944de628f6421adc8783a5ecd7c53cb1ee9ecc35␟7610306078180179848:${"\ufffd0\ufffd"}:INTERPOLATION:`,V=$localize`:␟8519453b501fd45b7817e1f5303db8d0661a724c␟4397856591855111865:Bucket policy`,S=$localize`:␟521cc6fb370000f09e01795e12a0cf4e1b30139a␟3522447784390491828:Lifecycle ${"\ufffd*13:1\ufffd\ufffd#1:1\ufffd"}:START_TAG_DIV:${"\ufffd#2:1\ufffd"}:START_TAG_BUTTON: JSON ${"[\ufffd/#2:1\ufffd|\ufffd/#3:1\ufffd]"}:CLOSE_TAG_BUTTON:${"\ufffd#3:1\ufffd"}:START_TAG_BUTTON_1: XML ${"[\ufffd/#2:1\ufffd|\ufffd/#3:1\ufffd]"}:CLOSE_TAG_BUTTON:${"\ufffd/#1:1\ufffd\ufffd/*13:1\ufffd"}:CLOSE_TAG_DIV:`,S=e.\u0275\u0275i18nPostprocess(S),P=$localize`:␟5b2b036fd4a9d801f8d6a4e62a35679aa22505e3␟18456009321271331:Replication policy`,ee=$localize`:␟19b1fe26c54a34ed10670f329dc23ab0dc111996␟7853191772188406988:ACL`,Q=$localize`:␟21f71a6a2b6b993b032d315de00cfa6e56e90d04␟701131043571419581:${"[\ufffd#34\ufffd|\ufffd#35\ufffd]"}:START_TABLE_HEADER_CELL:Grantee${"[\ufffd/#34\ufffd|\ufffd/#35\ufffd]"}:CLOSE_TABLE_HEADER_CELL:${"[\ufffd#34\ufffd|\ufffd#35\ufffd]"}:START_TABLE_HEADER_CELL:Permissions${"[\ufffd/#34\ufffd|\ufffd/#35\ufffd]"}:CLOSE_TABLE_HEADER_CELL:`,Q=e.\u0275\u0275i18nPostprocess(Q),q=$localize`:␟97ba5f2b2e9fdff3d25f826e6a1822e4d79aff13␟5842413352329496537:${"[\ufffd#39\ufffd|\ufffd#40\ufffd]"}:START_TABLE_CELL:Bucket Owner${"[\ufffd/#39\ufffd|\ufffd/#40\ufffd]"}:CLOSE_TABLE_CELL:${"[\ufffd#39\ufffd|\ufffd#40\ufffd]"}:START_TABLE_CELL:${"\ufffd0\ufffd"}:INTERPOLATION:${"[\ufffd/#39\ufffd|\ufffd/#40\ufffd]"}:CLOSE_TABLE_CELL:`,q=e.\u0275\u0275i18nPostprocess(q),J=$localize`:␟9c6998f47980dde8359613b87c8d31187c4d33c6␟8253751940271098382:${"[\ufffd#43\ufffd|\ufffd#44\ufffd]"}:START_TABLE_CELL:Everyone${"[\ufffd/#43\ufffd|\ufffd/#44\ufffd]"}:CLOSE_TABLE_CELL:${"[\ufffd#43\ufffd|\ufffd#44\ufffd]"}:START_TABLE_CELL:${"\ufffd0\ufffd"}:INTERPOLATION:${"[\ufffd/#43\ufffd|\ufffd/#44\ufffd]"}:CLOSE_TABLE_CELL:`,J=e.\u0275\u0275i18nPostprocess(J),$=$localize`:␟fc28dd4a65dff4a562ec36f7c551b3dd8db3f221␟4281871571653989859:${"[\ufffd#47\ufffd|\ufffd#48\ufffd]"}:START_TABLE_CELL:Authenticated users group${"[\ufffd/#47\ufffd|\ufffd/#48\ufffd]"}:CLOSE_TABLE_CELL:${"[\ufffd#47\ufffd|\ufffd#48\ufffd]"}:START_TABLE_CELL:${"\ufffd0\ufffd"}:INTERPOLATION:${"[\ufffd/#47\ufffd|\ufffd/#48\ufffd]"}:CLOSE_TABLE_CELL:`,$=e.\u0275\u0275i18nPostprocess($),_e=$localize`:␟a9e68b825b6ea75058a9a012b392b16d5d289975␟1726416418301316989: Lifecycle progress `,[["nav","ngbNav"],n,t,_,i,a,r,s,d,u,m,C,O,f,I,R,h,G,U,k,y,H,X,B,V,S,P,ee,Q,q,J,$,_e,[4,"ngIf"],["ngbNav","","cdStatefulTab","rgw-bucket-details",1,"nav-tabs"],["ngbNavItem","details"],["ngbNavLink",""],["ngbNavContent",""],["ngbNavItem","permissions"],["ngbNavItem","tiering"],["ngbNavItem","notification"],[3,"ngbNavOutlet"],["data-testid","rgw-bucket-details",1,"cds--data-table--sort","cds--data-table--no-border","cds--data-table","cds--data-table--md"],[1,"bold","w-25"],[1,"w-75"],[1,"bold"],["data-testid","rgw-bucket-quota-details",1,"cds--data-table--sort","cds--data-table--no-border","cds--data-table","cds--data-table--md"],["data-testid","rgw-bucket-locking-details",1,"cds--data-table--sort","cds--data-table--no-border","cds--data-table","cds--data-table--md"],[1,"cds--data-table--sort","cds--data-table--no-border","cds--data-table","cds--data-table--md"],[4,"ngFor","ngForOf"],[3,"rateLimitConfig","type"],[1,"table-scroller"],["class","input-group",4,"ngIf"],["display","multi",4,"ngIf"],[1,"table"],[1,"input-group"],["type","button",1,"btn","btn-light",3,"click","ngClass"],["display","multi"],[3,"description","align"],["size","md",3,"type"],["class","spacing-left",4,"ngIf"],[1,"spacing-left"],[3,"updateBucketDetails","bucket"],[3,"bucket"]]},template:function(t,_){1&t&&e.\u0275\u0275template(0,El,20,1,"ng-container",33),2&t&&e.\u0275\u0275property("ngIf",_.selection)},dependencies:[g.NgClass,g.NgForOf,g.NgIf,gn.B,j.S,b.NgbNavContent,b.NgbNav,b.NgbNavItem,b.NgbNavLink,b.NgbNavLinkBase,b.NgbNavOutlet,c.CodeSnippet,c.Tag,c.Tooltip,En,Ut,Fn,g.JsonPipe,g.KeyValuePipe,po.s,ho.u,Yr.Q,Mn],styles:["table[_ngcontent-%COMP%]{table-layout:fixed}table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{word-wrap:break-word}.table-scroller[_ngcontent-%COMP%]{height:100%;max-height:50vh;overflow:auto}.spacing-left[_ngcontent-%COMP%]{margin-left:.5rem}"]})}}const Rl=["bucketSizeTpl"],Cl=["bucketObjectTpl"],fl=["deleteTpl"];function Sl(o,n){if(1&o&&e.\u0275\u0275element(0,"cd-rgw-bucket-details",12),2&o){const t=e.\u0275\u0275nextContext();e.\u0275\u0275property("selection",t.expandedRow)}}function Fl(o,n){if(1&o&&e.\u0275\u0275element(0,"cd-usage-bar",14),2&o){const t=e.\u0275\u0275nextContext().data.row;e.\u0275\u0275property("total",t.bucket_quota.max_size)("used",t.bucket_size)}}function Ml(o,n){1&o&&e.\u0275\u0275i18n(0,6)}function Pl(o,n){if(1&o&&e.\u0275\u0275template(0,Fl,1,2,"cd-usage-bar",13)(1,Ml,1,0,"ng-template",null,4,e.\u0275\u0275templateRefExtractor),2&o){const t=n.data.row,_=e.\u0275\u0275reference(2);e.\u0275\u0275property("ngIf",t.bucket_quota.max_size>0&&t.bucket_quota.enabled)("ngIfElse",_)}}function Il(o,n){if(1&o&&e.\u0275\u0275element(0,"cd-usage-bar",16),2&o){const t=e.\u0275\u0275nextContext().data.row;e.\u0275\u0275property("total",t.bucket_quota.max_objects)("used",t.num_objects)("isBinary",!1)}}function Ol(o,n){1&o&&e.\u0275\u0275i18n(0,7)}function Gl(o,n){if(1&o&&e.\u0275\u0275template(0,Il,1,3,"cd-usage-bar",15)(1,Ol,1,0,"ng-template",null,5,e.\u0275\u0275templateRefExtractor),2&o){const t=n.data.row,_=e.\u0275\u0275reference(2);e.\u0275\u0275property("ngIf",t.bucket_quota.max_objects>0&&t.bucket_quota.enabled)("ngIfElse",_)}}function Nl(o,n){1&o&&(e.\u0275\u0275elementStart(0,"cd-alert-panel",17),e.\u0275\u0275i18n(1,8),e.\u0275\u0275elementEnd())}class In extends et.D{constructor(n,t,_,i,a,r,s,d,u){super(d),this.authStorageService=n,this.dimlessBinaryPipe=t,this.dimlessPipe=_,this.rgwBucketService=i,this.modalService=a,this.urlBuilder=r,this.actionLabels=s,this.ngZone=d,this.taskWrapper=u,this.columns=[],this.buckets=[],this.selection=new Ge.y,this.subs=new w.Subscription}ngOnInit(){this.permission=this.authStorageService.getPermissions().rgw,this.columns=[{name:$localize`Name`,prop:"bid",flexGrow:2},{name:$localize`Owner`,prop:"owner",flexGrow:2.5},{name:$localize`Used Capacity`,prop:"bucket_size",flexGrow:.6,pipe:this.dimlessBinaryPipe},{name:$localize`Capacity Limit %`,prop:"size_usage",cellTemplate:this.bucketSizeTpl,flexGrow:.8},{name:$localize`Objects`,prop:"num_objects",flexGrow:.6,pipe:this.dimlessPipe},{name:$localize`Object Limit %`,prop:"object_usage",cellTemplate:this.bucketObjectTpl,flexGrow:.8},{name:$localize`Number of Shards`,prop:"num_shards",flexGrow:.8}];const n=()=>this.selection.first()&&`${encodeURIComponent(this.selection.first().bid)}/${encodeURIComponent(this.selection.first().owner)}`,t={permission:"create",icon:L.FI.add,routerLink:()=>this.urlBuilder.getCreate(),name:this.actionLabels.CREATE,canBePrimary:r=>!r.hasSelection},_={permission:"update",icon:L.FI.edit,routerLink:()=>this.urlBuilder.getEdit(n()),name:this.actionLabels.EDIT},i={permission:"delete",icon:L.FI.destroy,title:$localize`Bucket is not empty. Remove all objects before deletion.`,click:()=>this.deleteAction(),disable:()=>this.selection.first()?.num_objects>0,name:this.actionLabels.DELETE},a={permission:"update",icon:L.FI.edit,click:()=>this.openTieringModal(),disable:()=>!this.selection.hasSelection,name:this.actionLabels.TIERING};this.tableActions=[t,_,a,i],this.setTableRefreshTimeout()}getBucketList(n){this.setTableRefreshTimeout(),this.subs.add(this.rgwBucketService.fetchAndTransformBuckets().pipe((0,Z.switchMap)(()=>this.rgwBucketService.buckets$)).subscribe({next:t=>{this.buckets=t},error:()=>n.error()}))}updateSelection(n){this.selection=n}openTieringModal(){this.modalService.show(wt,{bucket:this.selection.first()})}deleteAction(){const n=this.selection.selected.map(t=>t.bid);this.modalService.show(Ue.D,{itemDescription:$localize`bucket`,impact:bo.r.high,itemNames:n,bodyTemplate:this.deleteTpl,submitActionObservable:()=>new w.Observable(t=>{this.taskWrapper.wrapTaskAroundCall({task:new Ft.O("rgw/bucket/delete",{bucket_names:n}),call:(0,w.forkJoin)(this.selection.selected.map(_=>this.rgwBucketService.delete(_.bid)))}).subscribe({error:_=>{t.error(_),this.table.refreshBtn()},complete:()=>{t.complete(),this.table.refreshBtn()}})})})}ngOnDestroy(){this.subs.unsubscribe()}static{this.\u0275fac=function(t){return new(t||In)(e.\u0275\u0275directiveInject(be.v),e.\u0275\u0275directiveInject(xt.l),e.\u0275\u0275directiveInject(ho.u),e.\u0275\u0275directiveInject(Le.c),e.\u0275\u0275directiveInject(he.V),e.\u0275\u0275directiveInject(se.E),e.\u0275\u0275directiveInject(M.Ss),e.\u0275\u0275directiveInject(e.NgZone),e.\u0275\u0275directiveInject(Nt.a))}}static{this.\u0275cmp=e.\u0275\u0275defineComponent({type:In,selectors:[["cd-rgw-bucket-list"]],viewQuery:function(t,_){if(1&t&&(e.\u0275\u0275viewQuery(ae.O,7),e.\u0275\u0275viewQuery(Rl,7),e.\u0275\u0275viewQuery(Cl,7),e.\u0275\u0275viewQuery(fl,7)),2&t){let i;e.\u0275\u0275queryRefresh(i=e.\u0275\u0275loadQuery())&&(_.table=i.first),e.\u0275\u0275queryRefresh(i=e.\u0275\u0275loadQuery())&&(_.bucketSizeTpl=i.first),e.\u0275\u0275queryRefresh(i=e.\u0275\u0275loadQuery())&&(_.bucketObjectTpl=i.first),e.\u0275\u0275queryRefresh(i=e.\u0275\u0275loadQuery())&&(_.deleteTpl=i.first)}},features:[e.\u0275\u0275ProvidersFeature([{provide:se.E,useValue:new se.E("rgw/bucket")}]),e.\u0275\u0275InheritDefinitionFeature],decls:10,vars:8,consts:()=>{let n,t,_;return n=$localize`:␟9c338bae89822d7eefbc9a887c458a7d8a98e55e␟2378102027773585685:No Limit`,t=$localize`:␟9c338bae89822d7eefbc9a887c458a7d8a98e55e␟2378102027773585685:No Limit`,_=$localize`:␟947e12501edd83afcdf4fbfc13fc6101680535b4␟7321341743929918632: Buckets might still have underlying data depending on your bucket configuration `,[["table",""],["bucketSizeTpl",""],["bucketObjectTpl",""],["deleteTpl",""],["noSizeQuota",""],["noObjectQuota",""],n,t,_,["columnMode","flex","selectionType","single","identifier","bid",3,"setExpandedRow","updateSelection","fetchData","autoReload","data","columns","hasDetails","status"],[1,"table-actions",3,"permission","selection","tableActions"],[3,"selection",4,"cdTableDetail"],[3,"selection"],[3,"total","used",4,"ngIf","ngIfElse"],[3,"total","used"],[3,"total","used","isBinary",4,"ngIf","ngIfElse"],[3,"total","used","isBinary"],["type","danger"]]},template:function(t,_){if(1&t){const i=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"cd-table",9,0),e.\u0275\u0275listener("setExpandedRow",function(r){return e.\u0275\u0275restoreView(i),e.\u0275\u0275resetView(_.setExpandedRow(r))})("updateSelection",function(r){return e.\u0275\u0275restoreView(i),e.\u0275\u0275resetView(_.updateSelection(r))})("fetchData",function(r){return e.\u0275\u0275restoreView(i),e.\u0275\u0275resetView(_.getBucketList(r))}),e.\u0275\u0275element(2,"cd-table-actions",10),e.\u0275\u0275template(3,Sl,1,1,"cd-rgw-bucket-details",11),e.\u0275\u0275elementEnd(),e.\u0275\u0275template(4,Pl,3,2,"ng-template",null,1,e.\u0275\u0275templateRefExtractor)(6,Gl,3,2,"ng-template",null,2,e.\u0275\u0275templateRefExtractor)(8,Nl,2,0,"ng-template",null,3,e.\u0275\u0275templateRefExtractor)}2&t&&(e.\u0275\u0275property("autoReload",!1)("data",_.buckets)("columns",_.columns)("hasDetails",!0)("status",_.tableStatus),e.\u0275\u0275advance(2),e.\u0275\u0275property("permission",_.permission)("selection",_.selection)("tableActions",_.tableActions))},dependencies:[g.NgIf,Ko.o,Ie.m,ae.O,$e.j,ot.N,Pn]})}}var To,hl=T(16748),Yo=T(1505),On=T(37823),bl=T(85770);function vl(o,n){if(1&o){const t=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"cd-table-key-value",12),e.\u0275\u0275listener("fetchData",function(){e.\u0275\u0275restoreView(t);const i=e.\u0275\u0275nextContext(2);return e.\u0275\u0275resetView(i.getMetaData())}),e.\u0275\u0275elementEnd()}if(2&o){const t=e.\u0275\u0275nextContext(2);e.\u0275\u0275property("data",t.metadata)}}function Ll(o,n){if(1&o&&e.\u0275\u0275element(0,"cd-table-performance-counter",13),2&o){const t=e.\u0275\u0275nextContext(2);e.\u0275\u0275property("serviceId",t.serviceMapId)}}function yl(o,n){if(1&o&&e.\u0275\u0275element(0,"cd-grafana",15),2&o){const t=e.\u0275\u0275nextContext(3);e.\u0275\u0275property("grafanaPath","rgw-instance-detail?var-rgw_servers=rgw."+t.serviceId)("type","metrics")}}function $l(o,n){1&o&&(e.\u0275\u0275elementContainerStart(0,14),e.\u0275\u0275elementStart(1,"a",7),e.\u0275\u0275i18n(2,3),e.\u0275\u0275elementEnd(),e.\u0275\u0275template(3,yl,1,2,"ng-template",8),e.\u0275\u0275elementContainerEnd())}function Dl(o,n){if(1&o&&(e.\u0275\u0275elementContainerStart(0),e.\u0275\u0275elementStart(1,"nav",5,0),e.\u0275\u0275elementContainerStart(3,6),e.\u0275\u0275elementStart(4,"a",7),e.\u0275\u0275i18n(5,1),e.\u0275\u0275elementEnd(),e.\u0275\u0275template(6,vl,1,1,"ng-template",8),e.\u0275\u0275elementContainerEnd(),e.\u0275\u0275elementContainerStart(7,9),e.\u0275\u0275elementStart(8,"a",7),e.\u0275\u0275i18n(9,2),e.\u0275\u0275elementEnd(),e.\u0275\u0275template(10,Ll,1,1,"ng-template",8),e.\u0275\u0275elementContainerEnd(),e.\u0275\u0275template(11,$l,4,0,"ng-container",10),e.\u0275\u0275elementEnd(),e.\u0275\u0275element(12,"div",11),e.\u0275\u0275elementContainerEnd()),2&o){const t=e.\u0275\u0275reference(2),_=e.\u0275\u0275nextContext();e.\u0275\u0275advance(11),e.\u0275\u0275property("ngIf",_.grafanaPermission.read),e.\u0275\u0275advance(),e.\u0275\u0275property("ngbNavOutlet",t)}}class Gn{constructor(n,t){this.rgwDaemonService=n,this.authStorageService=t,this.serviceId="",this.serviceMapId="",this.grafanaPermission=this.authStorageService.getPermissions().grafana}ngOnChanges(){this.selection&&(this.serviceId=this.selection.id,this.serviceMapId=this.selection.service_map_id)}getMetaData(){N().isEmpty(this.serviceId)||this.rgwDaemonService.get(this.serviceId).subscribe(n=>{this.metadata=n.rgw_metadata})}static{this.\u0275fac=function(t){return new(t||Gn)(e.\u0275\u0275directiveInject(ye.y),e.\u0275\u0275directiveInject(be.v))}}static{this.\u0275cmp=e.\u0275\u0275defineComponent({type:Gn,selectors:[["cd-rgw-daemon-details"]],inputs:{selection:"selection"},features:[e.\u0275\u0275NgOnChangesFeature],decls:1,vars:1,consts:()=>{let n,t,_,i;return n=$localize`:␟4f8b2bb476981727ab34ed40fde1218361f92c45␟5028777105388019087:Details`,t=$localize`:␟eeba399c4dae8d4890c27b7a2cd2dc28fcf8b5f9␟7348998912668568937:Performance Counters`,_=$localize`:␟fbbaf5cb02ed419e79a27072478f716a4666a99d␟9041763226911499160:Performance Details`,i=$localize`:␟8ace5674d92247857db2580aa6015d3de6ee4802␟1124988716203675083:RGW instance details`,[["nav","ngbNav"],n,t,_,[4,"ngIf"],["ngbNav","","cdStatefulTab","rgw-daemon-details",1,"nav-tabs"],["ngbNavItem","details"],["ngbNavLink",""],["ngbNavContent",""],["ngbNavItem","performance-counters"],["ngbNavItem","performance-details",4,"ngIf"],[3,"ngbNavOutlet"],[3,"fetchData","data"],["serviceType","rgw",3,"serviceId"],["ngbNavItem","performance-details"],["title",i,"uid","x5ARzZtmk","grafanaStyle","one",3,"grafanaPath","type"]]},template:function(t,_){1&t&&e.\u0275\u0275template(0,Dl,13,2,"ng-container",4),2&t&&e.\u0275\u0275property("ngIf",_.selection)},dependencies:[g.NgIf,Yo.c,On.i,gn.B,bl.Y,b.NgbNavContent,b.NgbNav,b.NgbNavItem,b.NgbNavLink,b.NgbNavLinkBase,b.NgbNavOutlet]})}}function Wl(o,n){if(1&o&&e.\u0275\u0275element(0,"cd-rgw-daemon-details",12),2&o){const t=e.\u0275\u0275nextContext(2);e.\u0275\u0275property("selection",t.expandedRow)}}function xl(o,n){if(1&o){const t=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"cd-table",10),e.\u0275\u0275listener("setExpandedRow",function(i){e.\u0275\u0275restoreView(t);const a=e.\u0275\u0275nextContext();return e.\u0275\u0275resetView(a.setExpandedRow(i))})("fetchData",function(i){e.\u0275\u0275restoreView(t);const a=e.\u0275\u0275nextContext();return e.\u0275\u0275resetView(a.getDaemonList(i))}),e.\u0275\u0275template(1,Wl,1,1,"cd-rgw-daemon-details",11),e.\u0275\u0275elementEnd()}if(2&o){const t=e.\u0275\u0275nextContext();e.\u0275\u0275property("data",t.daemons)("columns",t.columns)("hasDetails",!0)}}function wl(o,n){1&o&&e.\u0275\u0275element(0,"cd-grafana",13),2&o&&e.\u0275\u0275property("grafanaPath","rgw-overview?")("type","metrics")}function Ul(o,n){1&o&&(e.\u0275\u0275elementContainerStart(0,5),e.\u0275\u0275elementStart(1,"a",6),e.\u0275\u0275i18n(2,2),e.\u0275\u0275elementEnd(),e.\u0275\u0275template(3,wl,1,2,"ng-template",7),e.\u0275\u0275elementContainerEnd())}function kl(o,n){1&o&&e.\u0275\u0275element(0,"cd-grafana",14),2&o&&e.\u0275\u0275property("grafanaPath","radosgw-sync-overview?")("type","metrics")}function zl(o,n){1&o&&(e.\u0275\u0275elementContainerStart(0,5),e.\u0275\u0275elementStart(1,"a",6),e.\u0275\u0275i18n(2,3),e.\u0275\u0275elementEnd(),e.\u0275\u0275template(3,kl,1,2,"ng-template",7),e.\u0275\u0275elementContainerEnd())}class Nn extends et.D{constructor(n,t,_,i){super(),this.rgwDaemonService=n,this.authStorageService=t,this.cephShortVersionPipe=_,this.rgwSiteService=i,this.columns=[],this.daemons=[],this.updateDaemons=a=>{this.daemons=a}}ngOnInit(){this.grafanaPermission=this.authStorageService.getPermissions().grafana,this.columns=[{name:$localize`ID`,prop:"id",flexGrow:2},{name:$localize`Hostname`,prop:"server_hostname",flexGrow:2},{name:$localize`Port`,prop:"port",flexGrow:1},{name:$localize`Realm`,prop:"realm_name",flexGrow:2},{name:$localize`Zone Group`,prop:"zonegroup_name",flexGrow:2},{name:$localize`Zone`,prop:"zone_name",flexGrow:2},{name:$localize`Version`,prop:"version",flexGrow:1,pipe:this.cephShortVersionPipe}],this.rgwSiteService.get("realms").subscribe(n=>this.isMultiSite=n.length>0)}getDaemonList(n){this.rgwDaemonService.list().subscribe(this.updateDaemons,()=>{n.error()})}static{this.\u0275fac=function(t){return new(t||Nn)(e.\u0275\u0275directiveInject(ye.y),e.\u0275\u0275directiveInject(be.v),e.\u0275\u0275directiveInject(hl.Z),e.\u0275\u0275directiveInject(No.B))}}static{this.\u0275cmp=e.\u0275\u0275defineComponent({type:Nn,selectors:[["cd-rgw-daemon-list"]],features:[e.\u0275\u0275InheritDefinitionFeature],decls:9,vars:3,consts:()=>{let n,t,_,i,a;return n=$localize`:␟3cff5ed86a0892d0624b9f95c337e35a00134a7a␟7240778899067026917:Gateways List`,t=$localize`:␟5e7f4b1ca49e8d217bd0e12c6f7d6b6a2ade2c18␟4352555506458562289:Overall Performance`,_=$localize`:␟2a69b7cc788cffc476968d0dc171b6c9ef2a6847␟7831962171209425627:RGW overview`,i=$localize`:␟ca2dee83bb58290d93fb0d17ee8bc9f095a4576f␟5434435064320012065:Sync Performance`,a=$localize`:␟900df13f7dccd82e7a262ad415eff538bcecafa2␟8268596536429252392:Radosgw sync overview`,[["nav","ngbNav"],n,t,i,["ngbNav","",1,"nav-tabs"],["ngbNavItem",""],["ngbNavLink",""],["ngbNavContent",""],["ngbNavItem","",4,"ngIf"],[3,"ngbNavOutlet"],["columnMode","flex",3,"setExpandedRow","fetchData","data","columns","hasDetails"],[3,"selection",4,"cdTableDetail"],[3,"selection"],["title",_,"uid","WAkugZpiz","grafanaStyle","two",3,"grafanaPath","type"],["title",a,"uid","rgw-sync-overview","grafanaStyle","two",3,"grafanaPath","type"]]},template:function(t,_){if(1&t&&(e.\u0275\u0275elementStart(0,"nav",4,0),e.\u0275\u0275elementContainerStart(2,5),e.\u0275\u0275elementStart(3,"a",6),e.\u0275\u0275i18n(4,1),e.\u0275\u0275elementEnd(),e.\u0275\u0275template(5,xl,2,3,"ng-template",7),e.\u0275\u0275elementContainerEnd(),e.\u0275\u0275template(6,Ul,4,0,"ng-container",8)(7,zl,4,0,"ng-container",8),e.\u0275\u0275elementEnd(),e.\u0275\u0275element(8,"div",9)),2&t){const i=e.\u0275\u0275reference(1);e.\u0275\u0275advance(6),e.\u0275\u0275property("ngIf",_.grafanaPermission.read),e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf",_.grafanaPermission.read&&_.isMultiSite),e.\u0275\u0275advance(),e.\u0275\u0275property("ngbNavOutlet",i)}},dependencies:[g.NgIf,Yo.c,ae.O,ot.N,b.NgbNavContent,b.NgbNav,b.NgbNavItem,b.NgbNavLink,b.NgbNavLinkBase,b.NgbNavOutlet,Gn]})}}!function(o){o.USERS="users",o.BUCKETS="buckets",o.METADATA="metadata",o.USAGE="usage",o.ZONE="zone"}(To||(To={}));class An{static{this.capabilities=To}static getAll(){return Object.values(An.capabilities)}}const Hl=()=>["read","write","*"];function Xl(o,n){if(1&o&&(e.\u0275\u0275elementStart(0,"cds-text-label",20),e.\u0275\u0275i18nStart(1,4),e.\u0275\u0275element(2,"input",21),e.\u0275\u0275i18nEnd(),e.\u0275\u0275elementEnd()),2&o){const t=e.\u0275\u0275nextContext(),_=e.\u0275\u0275reference(14);e.\u0275\u0275property("invalid",t.formGroup.controls.type.invalid&&t.formGroup.controls.type.dirty)("invalidText",_),e.\u0275\u0275advance(2),e.\u0275\u0275property("readonly",!0)}}function Bl(o,n){if(1&o&&(e.\u0275\u0275elementStart(0,"option",23),e.\u0275\u0275text(1),e.\u0275\u0275elementEnd()),2&o){const t=n.$implicit;e.\u0275\u0275property("value",t),e.\u0275\u0275advance(),e.\u0275\u0275textInterpolate(t)}}function Vl(o,n){if(1&o&&(e.\u0275\u0275elementStart(0,"cds-select",22)(1,"option",17),e.\u0275\u0275text(2,"--- Select a type ---"),e.\u0275\u0275elementEnd(),e.\u0275\u0275template(3,Bl,2,2,"option",18),e.\u0275\u0275elementEnd()),2&o){const t=e.\u0275\u0275nextContext(),_=e.\u0275\u0275reference(14);e.\u0275\u0275property("invalid",t.formGroup.controls.type.invalid&&t.formGroup.controls.type.dirty)("invalidText",_),e.\u0275\u0275advance(3),e.\u0275\u0275property("ngForOf",t.types)}}function Zl(o,n){1&o&&(e.\u0275\u0275elementStart(0,"span",25),e.\u0275\u0275i18n(1,5),e.\u0275\u0275elementEnd())}function Kl(o,n){if(1&o&&e.\u0275\u0275template(0,Zl,2,0,"span",24),2&o){const t=e.\u0275\u0275nextContext(),_=e.\u0275\u0275reference(8);e.\u0275\u0275property("ngIf",t.formGroup.showError("type",_,"required"))}}function ql(o,n){if(1&o&&(e.\u0275\u0275elementStart(0,"option",23),e.\u0275\u0275text(1),e.\u0275\u0275elementEnd()),2&o){const t=n.$implicit;e.\u0275\u0275property("value",t),e.\u0275\u0275advance(),e.\u0275\u0275textInterpolate1(" ",t," ")}}function jl(o,n){1&o&&(e.\u0275\u0275elementStart(0,"span",25),e.\u0275\u0275i18n(1,6),e.\u0275\u0275elementEnd())}function Yl(o,n){if(1&o&&e.\u0275\u0275template(0,jl,2,0,"span",24),2&o){const t=e.\u0275\u0275nextContext(),_=e.\u0275\u0275reference(8);e.\u0275\u0275property("ngIf",t.formGroup.showError("perm",_,"required"))}}class hn extends c.BaseModal{constructor(n,t){super(),this.formBuilder=n,this.actionLabels=t,this.submitAction=new e.EventEmitter,this.editing=!0,this.types=[],this.resource=$localize`capability`,this.createForm()}createForm(){this.formGroup=this.formBuilder.group({type:[null,[l.Validators.required]],perm:[null,[l.Validators.required]]})}setEditing(n=!0){this.editing=n,this.action=this.editing?this.actionLabels.EDIT:this.actionLabels.ADD}setValues(n,t){this.formGroup.setValue({type:n,perm:t})}setCapabilities(n){const t=[];n.forEach(_=>{t.push(_.type)}),this.types=[],An.getAll().forEach(_=>{-1===N().indexOf(t,_)&&this.types.push(_)})}onSubmit(){const n=this.formGroup.value;this.submitAction.emit(n),this.closeModal()}static{this.\u0275fac=function(t){return new(t||hn)(e.\u0275\u0275directiveInject(Ne.$),e.\u0275\u0275directiveInject(M.Ss))}}static{this.\u0275cmp=e.\u0275\u0275defineComponent({type:hn,selectors:[["cd-rgw-user-capability-modal"]],outputs:{submitAction:"submitAction"},features:[e.\u0275\u0275InheritDefinitionFeature],decls:25,vars:23,consts:()=>{let n,t,_,i,a,r;return n=$localize`:␟f61c6867295f3b53d23557021f2f4e0aa1d0b8fc␟8650499415827640724:Type`,t=$localize`:␟d1b8990332af18f1c5159a6061ca889bcbb28432␟837553826328586238:Permission`,_=$localize`:␟fb127ea03835b3230f0ed981c7080e2ccb879621␟3346778808274133574:${"\ufffd0\ufffd"}:INTERPOLATION: ${"\ufffd1\ufffd"}:INTERPOLATION_1:`,i=$localize`:␟9f3e0353e4adcce00f21e04773cedae8d68e4d23␟7582714360469386411:Type ${"\ufffd#2\ufffd\ufffd/#2\ufffd"}:TAG_INPUT:`,a=$localize`:␟7cbdabcece469fab89cfa687ab152bca18b97498␟1417693714872528491:This field is required.`,r=$localize`:␟7cbdabcece469fab89cfa687ab152bca18b97498␟1417693714872528491:This field is required.`,[["frm","ngForm"],["typeError",""],["permError",""],_,i,a,r,["size","md",3,"overlaySelected","open","hasScrollingContent"],[3,"closeSelect"],["cdsModalHeaderHeading",""],[3,"formAllFieldsRequired"],["novalidate","",3,"formGroup"],["cdsModalContent",""],[1,"form-item"],["for","type",3,"invalid","invalidText",4,"ngIf"],["label",n,"for","type","formControlName","type",3,"invalid","invalidText",4,"ngIf"],["label",t,"for","perm","formControlName","perm",3,"invalid","invalidText"],["value",""],[3,"value",4,"ngFor","ngForOf"],[3,"submitActionEvent","form","submitText","modalForm"],["for","type",3,"invalid","invalidText"],["cdsText","","id","type","name","type","formControlName","type","modal-primary-focus","",3,"readonly"],["label",n,"for","type","formControlName","type",3,"invalid","invalidText"],[3,"value"],["class","invalid-feedback",4,"ngIf"],[1,"invalid-feedback"]]},template:function(t,_){if(1&t){const i=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"cds-modal",7),e.\u0275\u0275listener("overlaySelected",function(){return e.\u0275\u0275restoreView(i),e.\u0275\u0275resetView(_.closeModal())}),e.\u0275\u0275elementStart(1,"cds-modal-header",8),e.\u0275\u0275listener("closeSelect",function(){return e.\u0275\u0275restoreView(i),e.\u0275\u0275resetView(_.closeModal())}),e.\u0275\u0275elementStart(2,"h3",9),e.\u0275\u0275i18n(3,3),e.\u0275\u0275pipe(4,"titlecase"),e.\u0275\u0275pipe(5,"upperFirst"),e.\u0275\u0275elementEnd(),e.\u0275\u0275element(6,"cd-help-text",10),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(7,"form",11,0)(9,"div",12)(10,"div",13),e.\u0275\u0275template(11,Xl,3,3,"cds-text-label",14)(12,Vl,4,3,"cds-select",15)(13,Kl,1,1,"ng-template",null,1,e.\u0275\u0275templateRefExtractor),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(15,"div",13)(16,"cds-select",16)(17,"option",17),e.\u0275\u0275text(18,"--- Select a permission ---"),e.\u0275\u0275elementEnd(),e.\u0275\u0275template(19,ql,2,2,"option",18),e.\u0275\u0275elementEnd(),e.\u0275\u0275template(20,Yl,1,1,"ng-template",null,2,e.\u0275\u0275templateRefExtractor),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(22,"cd-form-button-panel",19),e.\u0275\u0275pipe(23,"titlecase"),e.\u0275\u0275pipe(24,"upperFirst"),e.\u0275\u0275listener("submitActionEvent",function(){return e.\u0275\u0275restoreView(i),e.\u0275\u0275resetView(_.onSubmit())}),e.\u0275\u0275elementEnd()()()}if(2&t){const i=e.\u0275\u0275reference(21);e.\u0275\u0275property("open",_.open)("hasScrollingContent",!1),e.\u0275\u0275advance(5),e.\u0275\u0275i18nExp(e.\u0275\u0275pipeBind1(4,14,_.action))(e.\u0275\u0275pipeBind1(5,16,_.resource)),e.\u0275\u0275i18nApply(3),e.\u0275\u0275advance(),e.\u0275\u0275property("formAllFieldsRequired",!0),e.\u0275\u0275advance(),e.\u0275\u0275property("formGroup",_.formGroup),e.\u0275\u0275advance(4),e.\u0275\u0275property("ngIf",_.editing),e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf",!_.editing),e.\u0275\u0275advance(4),e.\u0275\u0275property("invalid",_.formGroup.controls.perm.invalid&&_.formGroup.controls.perm.dirty)("invalidText",i),e.\u0275\u0275advance(3),e.\u0275\u0275property("ngForOf",e.\u0275\u0275pureFunction0(22,Hl)),e.\u0275\u0275advance(3),e.\u0275\u0275property("form",_.formGroup)("submitText",e.\u0275\u0275pipeBind1(23,18,_.action)+" "+e.\u0275\u0275pipeBind1(24,20,_.resource))("modalForm",!0)}},dependencies:[g.NgForOf,g.NgIf,oe.e,ie.O,j.S,ne.E,l.\u0275NgNoValidate,l.NgSelectOption,l.\u0275NgSelectMultipleOption,l.DefaultValueAccessor,l.NgControlStatus,l.NgControlStatusGroup,l.FormGroupDirective,l.FormControlName,c.Modal,c.ModalHeader,c.ModalContent,c.ModalHeaderHeading,c.TextInputLabelComponent,c.TextInput,c.Select,c.Option,g.TitleCasePipe,Oe.r]})}}var _t=T(50889);function Ql(o,n){if(1&o&&(e.\u0275\u0275elementStart(0,"cds-text-label",24),e.\u0275\u0275i18nStart(1,5),e.\u0275\u0275element(2,"input",25),e.\u0275\u0275i18nEnd(),e.\u0275\u0275elementEnd()),2&o){const t=e.\u0275\u0275nextContext(),_=e.\u0275\u0275reference(14);e.\u0275\u0275property("invalid",t.formGroup.controls.user.invalid&&t.formGroup.controls.user.dirty)("invalidText",_),e.\u0275\u0275advance(2),e.\u0275\u0275property("readonly",!0)}}function Jl(o,n){if(1&o&&(e.\u0275\u0275elementStart(0,"option",29),e.\u0275\u0275text(1),e.\u0275\u0275elementEnd()),2&o){const t=n.$implicit;e.\u0275\u0275property("value",t),e.\u0275\u0275advance(),e.\u0275\u0275textInterpolate(t)}}function es(o,n){if(1&o&&(e.\u0275\u0275elementStart(0,"cds-select",26)(1,"option",27),e.\u0275\u0275text(2,"--- Select a username ---"),e.\u0275\u0275elementEnd(),e.\u0275\u0275template(3,Jl,2,2,"option",28),e.\u0275\u0275elementEnd()),2&o){const t=e.\u0275\u0275nextContext(),_=e.\u0275\u0275reference(14);e.\u0275\u0275property("invalid",t.formGroup.controls.user.invalid&&t.formGroup.controls.user.dirty)("invalidText",_),e.\u0275\u0275advance(3),e.\u0275\u0275property("ngForOf",t.userCandidates)}}function ts(o,n){1&o&&(e.\u0275\u0275elementStart(0,"span",31),e.\u0275\u0275i18n(1,6),e.\u0275\u0275elementEnd())}function ns(o,n){if(1&o&&e.\u0275\u0275template(0,ts,2,0,"span",30),2&o){const t=e.\u0275\u0275nextContext(),_=e.\u0275\u0275reference(8);e.\u0275\u0275property("ngIf",t.formGroup.showError("user",_,"required"))}}function os(o,n){1&o&&(e.\u0275\u0275elementStart(0,"div",18)(1,"cds-checkbox",32),e.\u0275\u0275i18n(2,7),e.\u0275\u0275elementEnd()())}function _s(o,n){1&o&&(e.\u0275\u0275elementStart(0,"span",31),e.\u0275\u0275i18n(1,9),e.\u0275\u0275elementEnd())}function is(o,n){if(1&o&&e.\u0275\u0275template(0,_s,2,0,"span",30),2&o){const t=e.\u0275\u0275nextContext(2),_=e.\u0275\u0275reference(8);e.\u0275\u0275property("ngIf",t.formGroup.showError("access_key",_,"required"))}}function as(o,n){if(1&o&&(e.\u0275\u0275elementStart(0,"div",33)(1,"cds-password-label",34),e.\u0275\u0275i18nStart(2,8),e.\u0275\u0275element(3,"input",35),e.\u0275\u0275i18nEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275element(4,"cd-copy-2-clipboard-button",36),e.\u0275\u0275template(5,is,1,1,"ng-template",null,2,e.\u0275\u0275templateRefExtractor),e.\u0275\u0275elementEnd()),2&o){const t=e.\u0275\u0275reference(6),_=e.\u0275\u0275nextContext();e.\u0275\u0275advance(),e.\u0275\u0275property("invalid",_.formGroup.controls.access_key.invalid&&_.formGroup.controls.access_key.dirty)("invalidText",t),e.\u0275\u0275advance(2),e.\u0275\u0275property("readonly",_.viewing)}}function rs(o,n){1&o&&(e.\u0275\u0275elementStart(0,"span",31),e.\u0275\u0275i18n(1,11),e.\u0275\u0275elementEnd())}function ls(o,n){if(1&o&&e.\u0275\u0275template(0,rs,2,0,"span",30),2&o){const t=e.\u0275\u0275nextContext(2),_=e.\u0275\u0275reference(8);e.\u0275\u0275property("ngIf",t.formGroup.showError("secret_key",_,"required"))}}function ss(o,n){if(1&o&&(e.\u0275\u0275elementStart(0,"div",33)(1,"cds-password-label",37),e.\u0275\u0275i18nStart(2,10),e.\u0275\u0275element(3,"input",38),e.\u0275\u0275i18nEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275element(4,"cd-copy-2-clipboard-button",39),e.\u0275\u0275template(5,ls,1,1,"ng-template",null,3,e.\u0275\u0275templateRefExtractor),e.\u0275\u0275elementEnd()),2&o){const t=e.\u0275\u0275reference(6),_=e.\u0275\u0275nextContext();e.\u0275\u0275advance(),e.\u0275\u0275property("invalid",_.formGroup.controls.secret_key.invalid&&_.formGroup.controls.secret_key.dirty)("invalidText",t),e.\u0275\u0275advance(2),e.\u0275\u0275property("invalid",_.formGroup.controls.secret_key.invalid&&_.formGroup.controls.secret_key.dirty)("readonly",_.viewing)}}class zt extends c.BaseModal{constructor(n,t){super(),this.formBuilder=n,this.actionLabels=t,this.submitAction=new e.EventEmitter,this.viewing=!0,this.userCandidates=[],this.resource=$localize`S3 Key`,this.createForm()}createForm(){this.formGroup=this.formBuilder.group({user:[null,[l.Validators.required]],generate_key:[!0],access_key:[null,[F.xQ.requiredIf({generate_key:!1})]],secret_key:[null,[F.xQ.requiredIf({generate_key:!1})]]})}setViewing(n=!0){this.viewing=n,this.action=this.viewing?this.actionLabels.SHOW:this.actionLabels.CREATE}setValues(n,t,_){this.formGroup.setValue({user:n,generate_key:N().isEmpty(t),access_key:t,secret_key:_})}setUserCandidates(n){this.userCandidates=n}onSubmit(){const n=this.formGroup.value;this.submitAction.emit(n),this.closeModal()}static{this.\u0275fac=function(t){return new(t||zt)(e.\u0275\u0275directiveInject(Ne.$),e.\u0275\u0275directiveInject(M.Ss))}}static{this.\u0275cmp=e.\u0275\u0275defineComponent({type:zt,selectors:[["cd-rgw-user-s3-key-modal"]],outputs:{submitAction:"submitAction"},features:[e.\u0275\u0275InheritDefinitionFeature],decls:21,vars:23,consts:()=>{let n,t,_,i,a,r,s,d,u;return n=$localize`:␟08c74dc9762957593b91f6eb5d65efdfc975bf48␟5248717555542428023:Username`,t=$localize`:form title␟fb127ea03835b3230f0ed981c7080e2ccb879621␟3346778808274133574:${"\ufffd0\ufffd"}:INTERPOLATION: ${"\ufffd1\ufffd"}:INTERPOLATION_1:`,_=$localize`:␟9b81d1565fc336c421fb6d21007dea69c0c80e73␟5802190649108961439:Username ${"\ufffd#2\ufffd\ufffd/#2\ufffd"}:TAG_INPUT:`,i=$localize`:␟7cbdabcece469fab89cfa687ab152bca18b97498␟1417693714872528491:This field is required.`,a=$localize`:␟ba593c21cc047a1bd8ddd6671db0d29975e3fccf␟9146251840369242703:Auto-generate key `,r=$localize`:␟d3c5e53715d9bcf3be97e844dd088aca62e8a2af␟1776337063377226770:Access key ${"\ufffd#3\ufffd\ufffd/#3\ufffd"}:TAG_INPUT:`,s=$localize`:␟7cbdabcece469fab89cfa687ab152bca18b97498␟1417693714872528491:This field is required.`,d=$localize`:␟2e19345ffdc830f6db79cc6cd93b7bc93d5c7aaa␟6145565261691139770:Secret key ${"\ufffd#3\ufffd\ufffd/#3\ufffd"}:TAG_INPUT:`,u=$localize`:␟7cbdabcece469fab89cfa687ab152bca18b97498␟1417693714872528491:This field is required.`,[["frm","ngForm"],["userError",""],["accessKeyError",""],["secretKeyError",""],t,_,i,a,r,s,d,u,["size","md",3,"overlaySelected","open","hasScrollingContent"],[3,"closeSelect"],[1,"modal-title"],[3,"formAllFieldsRequired"],["novalidate","",3,"formGroup"],["cdsModalContent",""],[1,"form-item"],["for","user",3,"invalid","invalidText",4,"ngIf"],["label",n,"for","user","formControlName","user",3,"invalid","invalidText",4,"ngIf"],["class","form-item",4,"ngIf"],["class","form-item form-item-append",4,"ngIf"],[3,"submitActionEvent","form","submitText","showSubmit","modalForm"],["for","user",3,"invalid","invalidText"],["cdsText","","id","user","name","user","formControlName","user","readonly","","modal-primary-focus","",3,"readonly"],["label",n,"for","user","formControlName","user",3,"invalid","invalidText"],["value",""],[3,"value",4,"ngFor","ngForOf"],[3,"value"],["class","invalid-feedback",4,"ngIf"],[1,"invalid-feedback"],["id","generate_key","formControlName","generate_key"],[1,"form-item","form-item-append"],["for","access_key",3,"invalid","invalidText"],["cdsPassword","","id","access_key","name","access_key","formControlName","access_key",3,"readonly"],["source","access_key",1,"mt-4"],["for","secret_key",3,"invalid","invalidText"],["cdsPassword","","id","secret_key","name","secret_key","formControlName","secret_key",3,"invalid","readonly"],["source","secret_key",1,"mt-4"]]},template:function(t,_){if(1&t){const i=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"cds-modal",12),e.\u0275\u0275listener("overlaySelected",function(){return e.\u0275\u0275restoreView(i),e.\u0275\u0275resetView(_.closeModal())}),e.\u0275\u0275elementStart(1,"cds-modal-header",13),e.\u0275\u0275listener("closeSelect",function(){return e.\u0275\u0275restoreView(i),e.\u0275\u0275resetView(_.closeModal())}),e.\u0275\u0275elementContainerStart(2,14),e.\u0275\u0275i18n(3,4),e.\u0275\u0275pipe(4,"titlecase"),e.\u0275\u0275pipe(5,"upperFirst"),e.\u0275\u0275elementContainerEnd(),e.\u0275\u0275element(6,"cd-help-text",15),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(7,"form",16,0)(9,"div",17)(10,"div",18),e.\u0275\u0275template(11,Ql,3,3,"cds-text-label",19)(12,es,4,3,"cds-select",20)(13,ns,1,1,"ng-template",null,1,e.\u0275\u0275templateRefExtractor),e.\u0275\u0275elementEnd(),e.\u0275\u0275template(15,os,3,0,"div",21)(16,as,7,3,"div",22)(17,ss,7,4,"div",22),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(18,"cd-form-button-panel",23),e.\u0275\u0275pipe(19,"titlecase"),e.\u0275\u0275pipe(20,"upperFirst"),e.\u0275\u0275listener("submitActionEvent",function(){return e.\u0275\u0275restoreView(i),e.\u0275\u0275resetView(_.onSubmit())}),e.\u0275\u0275elementEnd()()()}2&t&&(e.\u0275\u0275property("open",_.open)("hasScrollingContent",!1),e.\u0275\u0275advance(5),e.\u0275\u0275i18nExp(e.\u0275\u0275pipeBind1(4,15,_.action))(e.\u0275\u0275pipeBind1(5,17,_.resource)),e.\u0275\u0275i18nApply(3),e.\u0275\u0275advance(),e.\u0275\u0275property("formAllFieldsRequired",!0),e.\u0275\u0275advance(),e.\u0275\u0275property("formGroup",_.formGroup),e.\u0275\u0275advance(4),e.\u0275\u0275property("ngIf",_.viewing),e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf",!_.viewing),e.\u0275\u0275advance(3),e.\u0275\u0275property("ngIf",!_.viewing),e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf",!_.formGroup.getValue("generate_key")),e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf",!_.formGroup.getValue("generate_key")),e.\u0275\u0275advance(),e.\u0275\u0275property("form",_.formGroup)("submitText",e.\u0275\u0275pipeBind1(19,19,_.action)+" "+e.\u0275\u0275pipeBind1(20,21,_.resource))("showSubmit",!_.viewing)("modalForm",!0))},dependencies:[g.NgForOf,g.NgIf,_t.N,oe.e,ie.O,j.S,ne.E,l.\u0275NgNoValidate,l.NgSelectOption,l.\u0275NgSelectMultipleOption,l.DefaultValueAccessor,l.NgControlStatus,l.NgControlStatusGroup,l.FormGroupDirective,l.FormControlName,c.Modal,c.ModalHeader,c.ModalContent,c.TextInputLabelComponent,c.PasswordInputLabelComponent,c.TextInput,c.PasswordInput,c.Checkbox,c.Select,c.Option,g.TitleCasePipe,Oe.r]})}}class cs{}const ds=()=>["read","write"];function us(o,n){1&o&&(e.\u0275\u0275elementStart(0,"span",34),e.\u0275\u0275i18n(1,8),e.\u0275\u0275elementEnd())}function ps(o,n){1&o&&(e.\u0275\u0275elementStart(0,"span",34),e.\u0275\u0275i18n(1,9),e.\u0275\u0275elementEnd())}function ms(o,n){if(1&o&&e.\u0275\u0275template(0,us,2,0,"span",33)(1,ps,2,0,"span",33),2&o){const t=e.\u0275\u0275nextContext(),_=e.\u0275\u0275reference(8);e.\u0275\u0275property("ngIf",t.formGroup.showError("subuid",_,"required")),e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf",t.formGroup.showError("subuid",_,"subuserIdExists"))}}function Ts(o,n){if(1&o&&(e.\u0275\u0275elementStart(0,"option",35),e.\u0275\u0275text(1),e.\u0275\u0275elementEnd()),2&o){const t=n.$implicit;e.\u0275\u0275property("value",t),e.\u0275\u0275advance(),e.\u0275\u0275textInterpolate1(" ",t," ")}}function gs(o,n){1&o&&(e.\u0275\u0275elementStart(0,"span",34),e.\u0275\u0275i18n(1,10),e.\u0275\u0275elementEnd())}function Es(o,n){if(1&o&&e.\u0275\u0275template(0,gs,2,0,"span",33),2&o){const t=e.\u0275\u0275nextContext(),_=e.\u0275\u0275reference(8);e.\u0275\u0275property("ngIf",t.formGroup.showError("perm",_,"required"))}}function Rs(o,n){1&o&&(e.\u0275\u0275elementStart(0,"span",34),e.\u0275\u0275i18n(1,14),e.\u0275\u0275elementEnd())}function Cs(o,n){if(1&o&&e.\u0275\u0275template(0,Rs,2,0,"span",33),2&o){const t=e.\u0275\u0275nextContext(3),_=e.\u0275\u0275reference(8);e.\u0275\u0275property("ngIf",t.formGroup.showError("secret_key",_,"required"))}}function fs(o,n){if(1&o&&(e.\u0275\u0275elementStart(0,"div",38)(1,"cds-password-label",39),e.\u0275\u0275i18nStart(2,13),e.\u0275\u0275element(3,"input",40),e.\u0275\u0275i18nEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275element(4,"cd-copy-2-clipboard-button",41),e.\u0275\u0275template(5,Cs,1,1,"ng-template",null,3,e.\u0275\u0275templateRefExtractor),e.\u0275\u0275elementEnd()),2&o){const t=e.\u0275\u0275reference(6),_=e.\u0275\u0275nextContext(2);e.\u0275\u0275advance(),e.\u0275\u0275property("invalid",_.formGroup.controls.secret_key.invalid&&_.formGroup.controls.secret_key.dirty)("invalidText",t),e.\u0275\u0275advance(2),e.\u0275\u0275property("invalid",_.formGroup.controls.secret_key.invalid&&_.formGroup.controls.secret_key.dirty)("autofocus",!0)}}function Ss(o,n){if(1&o&&(e.\u0275\u0275elementStart(0,"fieldset")(1,"legend"),e.\u0275\u0275i18n(2,11),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(3,"div",21)(4,"cds-checkbox",36),e.\u0275\u0275i18n(5,12),e.\u0275\u0275elementEnd()(),e.\u0275\u0275template(6,fs,7,4,"div",37),e.\u0275\u0275elementEnd()),2&o){const t=e.\u0275\u0275nextContext();e.\u0275\u0275advance(6),e.\u0275\u0275property("ngIf",!t.editing&&!t.formGroup.getValue("generate_secret"))}}class bn extends c.BaseModal{constructor(n,t){super(),this.formBuilder=n,this.actionLabels=t,this.submitAction=new e.EventEmitter,this.editing=!0,this.subusers=[],this.resource=$localize`Subuser`,this.createForm()}createForm(){this.formGroup=this.formBuilder.group({uid:[null],subuid:[null,[l.Validators.required,this.subuserValidator()]],perm:["full-control",[l.Validators.required]],generate_secret:[!0],secret_key:[null,[F.xQ.requiredIf({generate_secret:!1})]]})}subuserValidator(){const n=this;return t=>n.editing||(0,F.xF)(t.value)?null:n.subusers.some(i=>N().isEqual(n.getSubuserName(i.id),t.value))?{subuserIdExists:!0}:null}getSubuserName(n){if(N().isEmpty(n))return n;const t=n.match(/([^:]+)(:(.+))?/);return N().isUndefined(t[3])?t[1]:t[3]}setEditing(n=!0){this.editing=n,this.action=this.editing?this.actionLabels.EDIT:this.actionLabels.CREATE}setValues(n,t="",_=""){this.formGroup.setValue({uid:n,subuid:this.getSubuserName(t),perm:_,generate_secret:!0,secret_key:null})}setSubusers(n){this.subusers=n}onSubmit(){const n=this.formGroup.value,t=new cs;t.id=`${n.uid}:${n.subuid}`,t.permissions=n.perm,t.generate_secret=n.generate_secret,t.secret_key=n.secret_key,this.submitAction.emit(t),this.closeModal()}static{this.\u0275fac=function(t){return new(t||bn)(e.\u0275\u0275directiveInject(Ne.$),e.\u0275\u0275directiveInject(M.Ss))}}static{this.\u0275cmp=e.\u0275\u0275defineComponent({type:bn,selectors:[["cd-rgw-user-subuser-modal"]],outputs:{submitAction:"submitAction"},features:[e.\u0275\u0275InheritDefinitionFeature],decls:35,vars:25,consts:()=>{let n,t,_,i,a,r,s,d,u,m,C,O;return n=$localize`:␟d1b8990332af18f1c5159a6061ca889bcbb28432␟837553826328586238:Permission`,t=$localize`:␟fb127ea03835b3230f0ed981c7080e2ccb879621␟3346778808274133574:${"\ufffd0\ufffd"}:INTERPOLATION: ${"\ufffd1\ufffd"}:INTERPOLATION_1:`,_=$localize`:␟9b81d1565fc336c421fb6d21007dea69c0c80e73␟5802190649108961439:Username ${"\ufffd#13\ufffd\ufffd/#13\ufffd"}:TAG_INPUT:`,i=$localize`:␟3d386c357ebcbc04ed05c4babd5a03626f9b1674␟6418324027599056238:read, write`,a=$localize`:␟84e3e3f9a4f31a039b648c97debf95fcb20f4c4a␟268166731974484199:full`,r=$localize`:␟7cbdabcece469fab89cfa687ab152bca18b97498␟1417693714872528491:This field is required.`,s=$localize`:␟bd59fc25a7bd98cff3e75117c09697c8a007a514␟8445703423987154938:The chosen subuser ID is already in use.`,d=$localize`:␟7cbdabcece469fab89cfa687ab152bca18b97498␟1417693714872528491:This field is required.`,u=$localize`:␟b6bf81d032a2316464f9df2f0d2f3d753f89f0d3␟8401417382184049672:Swift key`,m=$localize`:␟0adff6a856e228d6c32c385ea05cc2ec12d94a92␟1276119732040048252:Auto-generate key `,C=$localize`:␟0eed2a44e36294f85ab35f301b57fd31a60e1af0␟69498721147054310:Secret key ${"\ufffd#3\ufffd\ufffd/#3\ufffd"}:TAG_INPUT:`,O=$localize`:␟7cbdabcece469fab89cfa687ab152bca18b97498␟1417693714872528491:This field is required.`,[["frm","ngForm"],["subuserHelper",""],["permError",""],["secretKeyError",""],t,_,i,a,r,s,d,u,m,C,O,["size","md",3,"overlaySelected","open","hasScrollingContent"],[3,"closeSelect"],["cdsModalHeaderHeading",""],[3,"formAllFieldsRequired"],["novalidate","",3,"formGroup"],["cdsModalContent",""],[1,"form-item"],["for","uid"],["cdsText","","id","uid","name","uid","formControlName","uid","readonly","","modal-primary-focus",""],["for","subuid",3,"invalid","invalidText"],["cdsText","","id","subuid","name","subuid","formControlName","subuid","autofocus","",3,"readonly"],["label",n,"for","perm","formControlName","perm",3,"invalid","invalidText"],["value",""],[3,"value",4,"ngFor","ngForOf"],["value","read-write"],["value","full-control"],[4,"ngIf"],[3,"submitActionEvent","form","submitText","modalForm"],["class","invalid-feedback",4,"ngIf"],[1,"invalid-feedback"],[3,"value"],["id","generate_secret","formControlName","generate_secret"],["class","form-item form-item-append",4,"ngIf"],[1,"form-item","form-item-append"],["for","secret_key",3,"invalid","invalidText"],["cdsPassword","","id","secret_key","name","secret_key","formControlName","secret_key",3,"invalid","autofocus"],["source","secret_key",1,"mt-4"]]},template:function(t,_){if(1&t){const i=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"cds-modal",15),e.\u0275\u0275listener("overlaySelected",function(){return e.\u0275\u0275restoreView(i),e.\u0275\u0275resetView(_.closeModal())}),e.\u0275\u0275elementStart(1,"cds-modal-header",16),e.\u0275\u0275listener("closeSelect",function(){return e.\u0275\u0275restoreView(i),e.\u0275\u0275resetView(_.closeModal())}),e.\u0275\u0275elementStart(2,"h3",17),e.\u0275\u0275i18n(3,4),e.\u0275\u0275pipe(4,"titlecase"),e.\u0275\u0275pipe(5,"upperFirst"),e.\u0275\u0275elementEnd(),e.\u0275\u0275element(6,"cd-help-text",18),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(7,"form",19,0)(9,"div",20)(10,"div",21)(11,"cds-text-label",22),e.\u0275\u0275i18nStart(12,5),e.\u0275\u0275element(13,"input",23),e.\u0275\u0275i18nEnd(),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(14,"div",21)(15,"cds-text-label",24),e.\u0275\u0275text(16,"Subuser "),e.\u0275\u0275element(17,"input",25),e.\u0275\u0275elementEnd(),e.\u0275\u0275template(18,ms,2,2,"ng-template",null,1,e.\u0275\u0275templateRefExtractor),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(20,"div",21)(21,"cds-select",26)(22,"option",27),e.\u0275\u0275text(23,"--- Select a permission ---"),e.\u0275\u0275elementEnd(),e.\u0275\u0275template(24,Ts,2,2,"option",28),e.\u0275\u0275elementStart(25,"option",29),e.\u0275\u0275i18n(26,6),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(27,"option",30),e.\u0275\u0275i18n(28,7),e.\u0275\u0275elementEnd()(),e.\u0275\u0275template(29,Es,1,1,"ng-template",null,2,e.\u0275\u0275templateRefExtractor),e.\u0275\u0275elementEnd(),e.\u0275\u0275template(31,Ss,7,1,"fieldset",31),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(32,"cd-form-button-panel",32),e.\u0275\u0275pipe(33,"titlecase"),e.\u0275\u0275pipe(34,"upperFirst"),e.\u0275\u0275listener("submitActionEvent",function(){return e.\u0275\u0275restoreView(i),e.\u0275\u0275resetView(_.onSubmit())}),e.\u0275\u0275elementEnd()()()}if(2&t){const i=e.\u0275\u0275reference(19),a=e.\u0275\u0275reference(30);e.\u0275\u0275property("open",_.open)("hasScrollingContent",!1),e.\u0275\u0275advance(5),e.\u0275\u0275i18nExp(e.\u0275\u0275pipeBind1(4,16,_.action))(e.\u0275\u0275pipeBind1(5,18,_.resource)),e.\u0275\u0275i18nApply(3),e.\u0275\u0275advance(),e.\u0275\u0275property("formAllFieldsRequired",!0),e.\u0275\u0275advance(),e.\u0275\u0275property("formGroup",_.formGroup),e.\u0275\u0275advance(8),e.\u0275\u0275property("invalid",_.formGroup.controls.subuid.invalid&&_.formGroup.controls.subuid.dirty)("invalidText",i),e.\u0275\u0275advance(2),e.\u0275\u0275property("readonly",_.editing),e.\u0275\u0275advance(4),e.\u0275\u0275property("invalid",_.formGroup.controls.perm.invalid&&_.formGroup.controls.perm.dirty)("invalidText",a),e.\u0275\u0275advance(3),e.\u0275\u0275property("ngForOf",e.\u0275\u0275pureFunction0(24,ds)),e.\u0275\u0275advance(7),e.\u0275\u0275property("ngIf",!_.editing),e.\u0275\u0275advance(),e.\u0275\u0275property("form",_.formGroup)("submitText",e.\u0275\u0275pipeBind1(33,20,_.action)+" "+e.\u0275\u0275pipeBind1(34,22,_.resource))("modalForm",!0)}},dependencies:[g.NgForOf,g.NgIf,_t.N,oe.e,ie.O,Ct.B,j.S,ne.E,l.\u0275NgNoValidate,l.NgSelectOption,l.\u0275NgSelectMultipleOption,l.DefaultValueAccessor,l.NgControlStatus,l.NgControlStatusGroup,l.FormGroupDirective,l.FormControlName,c.Modal,c.ModalHeader,c.ModalContent,c.ModalHeaderHeading,c.TextInputLabelComponent,c.PasswordInputLabelComponent,c.TextInput,c.PasswordInput,c.Checkbox,c.Select,c.Option,g.TitleCasePipe,Oe.r]})}}class Ht extends c.BaseModal{constructor(n){super(),this.actionLabels=n,this.resource=$localize`Swift Key`,this.action=this.actionLabels.SHOW}setValues(n,t){this.user=n,this.secret_key=t}static{this.\u0275fac=function(t){return new(t||Ht)(e.\u0275\u0275directiveInject(M.Ss))}}static{this.\u0275cmp=e.\u0275\u0275defineComponent({type:Ht,selectors:[["cd-rgw-user-swift-key-modal"]],features:[e.\u0275\u0275InheritDefinitionFeature],decls:18,vars:12,consts:()=>{let n,t,_;return n=$localize`:␟fb127ea03835b3230f0ed981c7080e2ccb879621␟3346778808274133574:${"\ufffd0\ufffd"}:INTERPOLATION: ${"\ufffd1\ufffd"}:INTERPOLATION_1:`,t=$localize`:␟9b81d1565fc336c421fb6d21007dea69c0c80e73␟5802190649108961439:Username ${"\ufffd#11\ufffd\ufffd/#11\ufffd"}:TAG_INPUT:`,_=$localize`:␟2e19345ffdc830f6db79cc6cd93b7bc93d5c7aaa␟6145565261691139770:Secret key ${"\ufffd#15\ufffd\ufffd/#15\ufffd"}:TAG_INPUT:`,[n,t,_,["size","md",3,"overlaySelected","open","hasScrollingContent"],[3,"closeSelect"],["cdsModalHeaderHeading",""],["novalidate",""],["cdsModalContent",""],[1,"form-item"],["for","user"],["cdsText","","id","user","name","user","readonly","","modal-primary-focus","",3,"ngModelChange","ngModel"],[1,"form-item","form-item-append"],["for","secret_key"],["cdsPassword","","id","secret_key","name","secret_key","readonly","",3,"ngModelChange","ngModel"],["source","secret_key",1,"mt-4"],[3,"cancel","showSubmit","modalForm"]]},template:function(t,_){1&t&&(e.\u0275\u0275elementStart(0,"cds-modal",3),e.\u0275\u0275listener("overlaySelected",function(){return _.closeModal()}),e.\u0275\u0275elementStart(1,"cds-modal-header",4),e.\u0275\u0275listener("closeSelect",function(){return _.closeModal()}),e.\u0275\u0275elementStart(2,"h3",5),e.\u0275\u0275i18n(3,0),e.\u0275\u0275pipe(4,"titlecase"),e.\u0275\u0275pipe(5,"upperFirst"),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(6,"form",6)(7,"div",7)(8,"div",8)(9,"cds-text-label",9),e.\u0275\u0275i18nStart(10,1),e.\u0275\u0275elementStart(11,"input",10),e.\u0275\u0275twoWayListener("ngModelChange",function(a){return e.\u0275\u0275twoWayBindingSet(_.user,a)||(_.user=a),a}),e.\u0275\u0275elementEnd(),e.\u0275\u0275i18nEnd(),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(12,"div",11)(13,"cds-password-label",12),e.\u0275\u0275i18nStart(14,2),e.\u0275\u0275elementStart(15,"input",13),e.\u0275\u0275twoWayListener("ngModelChange",function(a){return e.\u0275\u0275twoWayBindingSet(_.secret_key,a)||(_.secret_key=a),a}),e.\u0275\u0275elementEnd(),e.\u0275\u0275i18nEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275element(16,"cd-copy-2-clipboard-button",14),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(17,"cd-form-button-panel",15),e.\u0275\u0275listener("cancel",function(){return _.closeModal()}),e.\u0275\u0275elementEnd()()()),2&t&&(e.\u0275\u0275property("open",_.open)("hasScrollingContent",!1),e.\u0275\u0275advance(5),e.\u0275\u0275i18nExp(e.\u0275\u0275pipeBind1(4,8,_.action))(e.\u0275\u0275pipeBind1(5,10,_.resource)),e.\u0275\u0275i18nApply(3),e.\u0275\u0275advance(6),e.\u0275\u0275twoWayProperty("ngModel",_.user),e.\u0275\u0275advance(4),e.\u0275\u0275twoWayProperty("ngModel",_.secret_key),e.\u0275\u0275advance(2),e.\u0275\u0275property("showSubmit",!1)("modalForm",!0))},dependencies:[_t.N,oe.e,j.S,l.\u0275NgNoValidate,l.DefaultValueAccessor,l.NgControlStatus,l.NgControlStatusGroup,l.NgModel,l.NgForm,c.Modal,c.ModalHeader,c.ModalContent,c.ModalHeaderHeading,c.TextInputLabelComponent,c.PasswordInputLabelComponent,c.TextInput,c.PasswordInput,g.TitleCasePipe,Oe.r]})}}var Pt=T(13723),go=T(42865),Fs=T(45757);const Ms=()=>({md:4}),Qo=o=>({"form-item":o});function Ps(o,n){1&o&&(e.\u0275\u0275elementStart(0,"option",110),e.\u0275\u0275i18n(1,27),e.\u0275\u0275elementEnd()),2&o&&e.\u0275\u0275property("ngValue",null)}function Is(o,n){1&o&&(e.\u0275\u0275elementStart(0,"option",111),e.\u0275\u0275i18n(1,28),e.\u0275\u0275elementEnd()),2&o&&e.\u0275\u0275property("value","")}function Os(o,n){if(1&o&&(e.\u0275\u0275elementStart(0,"option",111),e.\u0275\u0275text(1),e.\u0275\u0275elementEnd()),2&o){const t=n.$implicit;e.\u0275\u0275property("value",t.id),e.\u0275\u0275advance(),e.\u0275\u0275textInterpolate2("",t.name," ",t.tenant?"- "+t.tenant:"","")}}function Gs(o,n){1&o&&(e.\u0275\u0275elementStart(0,"span",113),e.\u0275\u0275i18n(1,29),e.\u0275\u0275elementEnd())}function Ns(o,n){if(1&o&&e.\u0275\u0275template(0,Gs,2,0,"span",112),2&o){e.\u0275\u0275nextContext(2);const t=e.\u0275\u0275reference(2),_=e.\u0275\u0275nextContext();e.\u0275\u0275property("ngIf",_.userForm.showError("account_id",t,"tenantedAccount"))}}function As(o,n){1&o&&(e.\u0275\u0275elementStart(0,"div"),e.\u0275\u0275i18n(1,30),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(2,"div"),e.\u0275\u0275i18n(3,31),e.\u0275\u0275elementEnd())}function hs(o,n){1&o&&(e.\u0275\u0275elementStart(0,"div",85)(1,"cds-checkbox",114),e.\u0275\u0275i18nStart(2,32),e.\u0275\u0275element(3,"cd-help-text"),e.\u0275\u0275i18nEnd(),e.\u0275\u0275elementEnd()())}function bs(o,n){if(1&o&&(e.\u0275\u0275elementStart(0,"div",85)(1,"cds-select",106),e.\u0275\u0275template(2,Ps,2,1,"option",107)(3,Is,2,1,"option",108)(4,Os,2,3,"option",109),e.\u0275\u0275elementEnd(),e.\u0275\u0275template(5,Ns,1,1,"ng-template",null,4,e.\u0275\u0275templateRefExtractor)(7,As,4,0,"ng-template",null,5,e.\u0275\u0275templateRefExtractor),e.\u0275\u0275elementEnd(),e.\u0275\u0275template(9,hs,4,0,"div",89)),2&o){const t=e.\u0275\u0275reference(6),_=e.\u0275\u0275reference(8),i=e.\u0275\u0275nextContext(2);e.\u0275\u0275advance(),e.\u0275\u0275property("invalid",i.userForm.controls.account_id.invalid&&i.userForm.controls.account_id.dirty)("invalidText",t)("helperText",_),e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf",null===i.accounts),e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf",null!==i.accounts),e.\u0275\u0275advance(),e.\u0275\u0275property("ngForOf",i.accounts),e.\u0275\u0275advance(5),e.\u0275\u0275property("ngIf",i.userForm.getValue("account_id"))}}function vs(o,n){1&o&&(e.\u0275\u0275elementStart(0,"span",113),e.\u0275\u0275i18n(1,33),e.\u0275\u0275elementEnd())}function Ls(o,n){1&o&&(e.\u0275\u0275elementStart(0,"span",113),e.\u0275\u0275i18n(1,34),e.\u0275\u0275elementEnd())}function ys(o,n){1&o&&(e.\u0275\u0275elementStart(0,"span",113),e.\u0275\u0275i18n(1,35),e.\u0275\u0275elementEnd())}function $s(o,n){if(1&o&&e.\u0275\u0275template(0,vs,2,0,"span",112)(1,Ls,2,0,"span",112)(2,ys,2,0,"span",112),2&o){e.\u0275\u0275nextContext();const t=e.\u0275\u0275reference(2),_=e.\u0275\u0275nextContext();e.\u0275\u0275property("ngIf",_.userForm.showError("user_id",t,"required")),e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf",_.userForm.showError("user_id",t,"pattern")),e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf",!_.userForm.getValue("show_tenant")&&_.userForm.showError("user_id",t,"notUnique"))}}function Ds(o,n){1&o&&(e.\u0275\u0275elementStart(0,"span",113),e.\u0275\u0275i18n(1,37),e.\u0275\u0275elementEnd())}function Ws(o,n){1&o&&(e.\u0275\u0275elementStart(0,"span",113),e.\u0275\u0275i18n(1,38),e.\u0275\u0275elementEnd())}function xs(o,n){if(1&o&&e.\u0275\u0275template(0,Ds,2,0,"span",112)(1,Ws,2,0,"span",112),2&o){e.\u0275\u0275nextContext(2);const t=e.\u0275\u0275reference(2),_=e.\u0275\u0275nextContext();e.\u0275\u0275property("ngIf",_.userForm.showError("tenant",t,"pattern")),e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf",_.userForm.showError("tenant",t,"notUnique"))}}function ws(o,n){if(1&o&&(e.\u0275\u0275elementStart(0,"div",85)(1,"cds-text-label",115),e.\u0275\u0275i18nStart(2,36),e.\u0275\u0275element(3,"input",116),e.\u0275\u0275i18nEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275template(4,xs,2,2,"ng-template",null,6,e.\u0275\u0275templateRefExtractor),e.\u0275\u0275elementEnd()),2&o){const t=e.\u0275\u0275reference(5),_=e.\u0275\u0275nextContext(2);e.\u0275\u0275advance(),e.\u0275\u0275property("invalid",_.userForm.controls.tenant.invalid&&_.userForm.controls.tenant.dirty)("invalidText",t),e.\u0275\u0275advance(2),e.\u0275\u0275property("invalid",_.userForm.controls.tenant.invalid&&_.userForm.controls.tenant.dirty)("readonly",_.editing)}}function Us(o,n){1&o&&(e.\u0275\u0275elementStart(0,"span",113),e.\u0275\u0275i18n(1,39),e.\u0275\u0275elementEnd())}function ks(o,n){1&o&&(e.\u0275\u0275elementStart(0,"span",113),e.\u0275\u0275i18n(1,40),e.\u0275\u0275elementEnd())}function zs(o,n){if(1&o&&e.\u0275\u0275template(0,Us,2,0,"span",112)(1,ks,2,0,"span",112),2&o){e.\u0275\u0275nextContext();const t=e.\u0275\u0275reference(2),_=e.\u0275\u0275nextContext();e.\u0275\u0275property("ngIf",_.userForm.showError("display_name",t,"required")),e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf",_.userForm.showError("display_name",t,"pattern"))}}function Hs(o,n){1&o&&(e.\u0275\u0275elementStart(0,"span",113),e.\u0275\u0275i18n(1,41),e.\u0275\u0275elementEnd())}function Xs(o,n){1&o&&(e.\u0275\u0275elementStart(0,"span",113),e.\u0275\u0275i18n(1,42),e.\u0275\u0275elementEnd())}function Bs(o,n){if(1&o&&e.\u0275\u0275template(0,Hs,2,0,"span",112)(1,Xs,2,0,"span",112),2&o){e.\u0275\u0275nextContext();const t=e.\u0275\u0275reference(2),_=e.\u0275\u0275nextContext();e.\u0275\u0275property("ngIf",_.userForm.showError("email",t,"email")),e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf",_.userForm.showError("email",t,"notUnique"))}}function Vs(o,n){1&o&&(e.\u0275\u0275elementStart(0,"span",113),e.\u0275\u0275i18n(1,44),e.\u0275\u0275elementEnd())}function Zs(o,n){if(1&o&&(e.\u0275\u0275template(0,Vs,2,0,"span",112),e.\u0275\u0275elementStart(1,"span",113),e.\u0275\u0275i18n(2,43),e.\u0275\u0275elementEnd()),2&o){e.\u0275\u0275nextContext(2);const t=e.\u0275\u0275reference(2),_=e.\u0275\u0275nextContext();e.\u0275\u0275property("ngIf",_.userForm.showError("max_buckets",t,"required"))}}function Ks(o,n){if(1&o&&(e.\u0275\u0275elementStart(0,"div",85),e.\u0275\u0275element(1,"cds-number",117),e.\u0275\u0275template(2,Zs,3,1,"ng-template",null,7,e.\u0275\u0275templateRefExtractor),e.\u0275\u0275elementEnd()),2&o){const t=e.\u0275\u0275reference(3),_=e.\u0275\u0275nextContext(2);e.\u0275\u0275advance(),e.\u0275\u0275property("invalid",_.userForm.controls.max_buckets.invalid&&_.userForm.controls.max_buckets.dirty)("invalidText",t)}}function qs(o,n){if(1&o){const t=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"fieldset")(1,"div",85)(2,"legend",101),e.\u0275\u0275i18n(3,45),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(4,"cds-combo-box",118),e.\u0275\u0275listener("selected",function(i){e.\u0275\u0275restoreView(t);const a=e.\u0275\u0275nextContext(2);return e.\u0275\u0275resetView(a.multiSelector(i))}),e.\u0275\u0275i18nStart(5,46),e.\u0275\u0275element(6,"cds-dropdown-list"),e.\u0275\u0275i18nEnd(),e.\u0275\u0275elementEnd()()()}if(2&o){const t=e.\u0275\u0275nextContext(2);e.\u0275\u0275advance(4),e.\u0275\u0275property("appendInline",!0)("items",t.managedPolicies)}}function js(o,n){1&o&&(e.\u0275\u0275elementStart(0,"span",113),e.\u0275\u0275i18n(1,50),e.\u0275\u0275elementEnd())}function Ys(o,n){if(1&o&&e.\u0275\u0275template(0,js,2,0,"span",112),2&o){e.\u0275\u0275nextContext(3);const t=e.\u0275\u0275reference(2),_=e.\u0275\u0275nextContext();e.\u0275\u0275property("ngIf",_.userForm.showError("access_key",t,"required"))}}function Qs(o,n){if(1&o&&(e.\u0275\u0275elementStart(0,"div",121)(1,"cds-password-label",122),e.\u0275\u0275i18nStart(2,49),e.\u0275\u0275element(3,"input",123),e.\u0275\u0275i18nEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275element(4,"cd-copy-2-clipboard-button",124),e.\u0275\u0275template(5,Ys,1,1,"ng-template",null,8,e.\u0275\u0275templateRefExtractor),e.\u0275\u0275elementEnd()),2&o){const t=e.\u0275\u0275reference(6),_=e.\u0275\u0275nextContext(3);e.\u0275\u0275advance(),e.\u0275\u0275property("invalid",_.userForm.controls.access_key.invalid&&_.userForm.controls.access_key.dirty)("invalidText",t),e.\u0275\u0275advance(2),e.\u0275\u0275property("invalid",_.userForm.controls.access_key.invalid&&_.userForm.controls.access_key.dirty)}}function Js(o,n){1&o&&(e.\u0275\u0275elementStart(0,"span",113),e.\u0275\u0275i18n(1,52),e.\u0275\u0275elementEnd())}function ec(o,n){if(1&o&&e.\u0275\u0275template(0,Js,2,0,"span",112),2&o){e.\u0275\u0275nextContext(3);const t=e.\u0275\u0275reference(2),_=e.\u0275\u0275nextContext();e.\u0275\u0275property("ngIf",_.userForm.showError("secret_key",t,"required"))}}function tc(o,n){if(1&o&&(e.\u0275\u0275elementStart(0,"div",121)(1,"cds-password-label",125),e.\u0275\u0275i18nStart(2,51),e.\u0275\u0275element(3,"input",126),e.\u0275\u0275i18nEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275element(4,"cd-copy-2-clipboard-button",127),e.\u0275\u0275template(5,ec,1,1,"ng-template",null,9,e.\u0275\u0275templateRefExtractor),e.\u0275\u0275elementEnd()),2&o){const t=e.\u0275\u0275reference(6),_=e.\u0275\u0275nextContext(3);e.\u0275\u0275advance(),e.\u0275\u0275property("invalid",_.userForm.controls.secret_key.invalid&&_.userForm.controls.secret_key.dirty)("invalidText",t),e.\u0275\u0275advance(2),e.\u0275\u0275property("invalid",_.userForm.controls.secret_key.invalid&&_.userForm.controls.secret_key.dirty)}}function nc(o,n){if(1&o&&(e.\u0275\u0275elementStart(0,"fieldset")(1,"legend",101),e.\u0275\u0275i18n(2,47),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(3,"div",85)(4,"cds-checkbox",119),e.\u0275\u0275i18n(5,48),e.\u0275\u0275elementEnd()(),e.\u0275\u0275template(6,Qs,7,3,"div",120)(7,tc,7,3,"div",120),e.\u0275\u0275elementEnd()),2&o){const t=e.\u0275\u0275nextContext(2);e.\u0275\u0275advance(6),e.\u0275\u0275property("ngIf",!t.editing&&!t.userForm.getValue("generate_key")),e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf",!t.editing&&!t.userForm.getValue("generate_key"))}}function oc(o,n){1&o&&(e.\u0275\u0275elementStart(0,"span",134)(1,"span",135),e.\u0275\u0275i18n(2,55),e.\u0275\u0275elementEnd()())}function _c(o,n){if(1&o){const t=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementContainerStart(0),e.\u0275\u0275elementStart(1,"div",136)(2,"div",131)(3,"cds-text-label"),e.\u0275\u0275text(4,"Subuser id "),e.\u0275\u0275element(5,"input",137),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(6,"div",131)(7,"cds-text-label"),e.\u0275\u0275text(8,"Permissions "),e.\u0275\u0275element(9,"input",137),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(10,"cds-icon-button",138),e.\u0275\u0275listener("click",function(){const i=e.\u0275\u0275restoreView(t).index,a=e.\u0275\u0275nextContext(3);return e.\u0275\u0275resetView(a.showSubuserModal(i))}),e.\u0275\u0275namespaceSVG(),e.\u0275\u0275element(11,"svg",133),e.\u0275\u0275elementEnd(),e.\u0275\u0275namespaceHTML(),e.\u0275\u0275elementStart(12,"cds-icon-button",139),e.\u0275\u0275listener("click",function(){const i=e.\u0275\u0275restoreView(t).index,a=e.\u0275\u0275nextContext(3);return e.\u0275\u0275resetView(a.deleteSubuser(i))}),e.\u0275\u0275namespaceSVG(),e.\u0275\u0275elementStart(13,"svg",133),e.\u0275\u0275text(14,">"),e.\u0275\u0275elementEnd()()(),e.\u0275\u0275elementContainerEnd()}if(2&o){const t=n.$implicit,_=n.index,i=e.\u0275\u0275nextContext(3);e.\u0275\u0275advance(),e.\u0275\u0275property("ngClass",e.\u0275\u0275pureFunction1(7,Qo,_>0)),e.\u0275\u0275advance(4),e.\u0275\u0275property("value",t.id),e.\u0275\u0275advance(4),e.\u0275\u0275property("value","full-control"===t.permissions?"full":t.permissions),e.\u0275\u0275advance(2),e.\u0275\u0275property("cdsIcon",i.icons.edit)("size",i.icons.size32),e.\u0275\u0275advance(2),e.\u0275\u0275property("cdsIcon",i.icons.trash)("size",i.icons.size32)}}function ic(o,n){if(1&o){const t=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"fieldset")(1,"div",85)(2,"legend",101),e.\u0275\u0275i18n(3,53),e.\u0275\u0275elementEnd(),e.\u0275\u0275template(4,oc,3,0,"span",128)(5,_c,15,9,"ng-container",129),e.\u0275\u0275elementStart(6,"div",130)(7,"div",131)(8,"button",132),e.\u0275\u0275listener("click",function(){e.\u0275\u0275restoreView(t);const i=e.\u0275\u0275nextContext(2);return e.\u0275\u0275resetView(i.showSubuserModal())}),e.\u0275\u0275elementContainerStart(9),e.\u0275\u0275i18n(10,54),e.\u0275\u0275pipe(11,"titlecase"),e.\u0275\u0275pipe(12,"upperFirst"),e.\u0275\u0275elementContainerEnd(),e.\u0275\u0275namespaceSVG(),e.\u0275\u0275element(13,"svg",133),e.\u0275\u0275elementEnd()()()()()}if(2&o){const t=e.\u0275\u0275nextContext(2);e.\u0275\u0275advance(4),e.\u0275\u0275property("ngIf",0===t.subusers.length),e.\u0275\u0275advance(),e.\u0275\u0275property("ngForOf",t.subusers),e.\u0275\u0275advance(7),e.\u0275\u0275i18nExp(e.\u0275\u0275pipeBind1(11,6,t.actionLabels.CREATE))(e.\u0275\u0275pipeBind1(12,8,t.subuserLabel)),e.\u0275\u0275i18nApply(10),e.\u0275\u0275advance(),e.\u0275\u0275property("cdsIcon",t.icons.add)("size",t.icons.size32)}}function ac(o,n){1&o&&(e.\u0275\u0275elementStart(0,"span",134)(1,"span",135),e.\u0275\u0275i18n(2,58),e.\u0275\u0275elementEnd()())}function rc(o,n){if(1&o){const t=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"span")(1,"div",141)(2,"div",131)(3,"cds-text-label"),e.\u0275\u0275element(4,"input",137),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(5,"cds-icon-button",142),e.\u0275\u0275listener("click",function(){const i=e.\u0275\u0275restoreView(t).index,a=e.\u0275\u0275nextContext(3);return e.\u0275\u0275resetView(a.showS3KeyModal(i))}),e.\u0275\u0275namespaceSVG(),e.\u0275\u0275element(6,"svg",133),e.\u0275\u0275elementEnd(),e.\u0275\u0275namespaceHTML(),e.\u0275\u0275elementStart(7,"cds-icon-button",143),e.\u0275\u0275listener("click",function(){const i=e.\u0275\u0275restoreView(t).index,a=e.\u0275\u0275nextContext(3);return e.\u0275\u0275resetView(a.deleteS3Key(i))}),e.\u0275\u0275namespaceSVG(),e.\u0275\u0275element(8,"svg",133),e.\u0275\u0275elementEnd()(),e.\u0275\u0275namespaceHTML(),e.\u0275\u0275element(9,"span",135),e.\u0275\u0275elementEnd()}if(2&o){const t=n.$implicit,_=e.\u0275\u0275nextContext(3);e.\u0275\u0275advance(4),e.\u0275\u0275property("value",t.user),e.\u0275\u0275advance(2),e.\u0275\u0275property("cdsIcon",_.icons.edit)("size",_.icons.size16),e.\u0275\u0275advance(2),e.\u0275\u0275property("cdsIcon",_.icons.trash)("size",_.icons.size32)}}function lc(o,n){1&o&&(e.\u0275\u0275elementStart(0,"span",134)(1,"span",135),e.\u0275\u0275i18n(2,59),e.\u0275\u0275elementEnd()())}function sc(o,n){if(1&o){const t=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"span")(1,"div",141)(2,"div",131)(3,"cds-text-label"),e.\u0275\u0275element(4,"input",137),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(5,"cds-icon-button",144),e.\u0275\u0275listener("click",function(){const i=e.\u0275\u0275restoreView(t).index,a=e.\u0275\u0275nextContext(3);return e.\u0275\u0275resetView(a.showSwiftKeyModal(i))}),e.\u0275\u0275namespaceSVG(),e.\u0275\u0275element(6,"svg",133),e.\u0275\u0275elementEnd()()()}if(2&o){const t=n.$implicit,_=e.\u0275\u0275nextContext(3);e.\u0275\u0275advance(4),e.\u0275\u0275property("value",t.user),e.\u0275\u0275advance(2),e.\u0275\u0275property("cdsIcon",_.icons.show)("size",_.icons.size16)}}function cc(o,n){if(1&o){const t=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"fieldset")(1,"div",85)(2,"legend",101),e.\u0275\u0275i18n(3,56),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(4,"h6"),e.\u0275\u0275text(5,"S3"),e.\u0275\u0275elementEnd(),e.\u0275\u0275template(6,ac,3,0,"span",128)(7,rc,10,5,"span",129),e.\u0275\u0275elementStart(8,"div",130)(9,"div",131)(10,"button",140),e.\u0275\u0275listener("click",function(){e.\u0275\u0275restoreView(t);const i=e.\u0275\u0275nextContext(2);return e.\u0275\u0275resetView(i.showS3KeyModal())}),e.\u0275\u0275elementContainerStart(11),e.\u0275\u0275i18n(12,57),e.\u0275\u0275pipe(13,"titlecase"),e.\u0275\u0275pipe(14,"upperFirst"),e.\u0275\u0275elementContainerEnd(),e.\u0275\u0275namespaceSVG(),e.\u0275\u0275element(15,"svg",133),e.\u0275\u0275elementEnd()()(),e.\u0275\u0275namespaceHTML(),e.\u0275\u0275element(16,"hr"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(17,"div",85)(18,"h6"),e.\u0275\u0275text(19,"Swift"),e.\u0275\u0275elementEnd(),e.\u0275\u0275template(20,lc,3,0,"span",128)(21,sc,7,3,"span",129),e.\u0275\u0275elementEnd()()}if(2&o){const t=e.\u0275\u0275nextContext(2);e.\u0275\u0275advance(6),e.\u0275\u0275property("ngIf",0===t.s3Keys.length),e.\u0275\u0275advance(),e.\u0275\u0275property("ngForOf",t.s3Keys),e.\u0275\u0275advance(7),e.\u0275\u0275i18nExp(e.\u0275\u0275pipeBind1(13,8,t.actionLabels.CREATE))(e.\u0275\u0275pipeBind1(14,10,t.s3keyLabel)),e.\u0275\u0275i18nApply(12),e.\u0275\u0275advance(),e.\u0275\u0275property("cdsIcon",t.icons.add)("size",t.icons.size32),e.\u0275\u0275advance(5),e.\u0275\u0275property("ngIf",0===t.swiftKeys.length),e.\u0275\u0275advance(),e.\u0275\u0275property("ngForOf",t.swiftKeys)}}function dc(o,n){1&o&&(e.\u0275\u0275elementStart(0,"span",134)(1,"span",135),e.\u0275\u0275i18n(2,62),e.\u0275\u0275elementEnd()())}function uc(o,n){if(1&o){const t=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"span")(1,"div",136)(2,"div",131)(3,"cds-text-label"),e.\u0275\u0275i18nStart(4,63),e.\u0275\u0275element(5,"input",137),e.\u0275\u0275i18nEnd(),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(6,"div",131)(7,"cds-text-label"),e.\u0275\u0275i18nStart(8,64),e.\u0275\u0275element(9,"input",137),e.\u0275\u0275i18nEnd(),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(10,"cds-icon-button",146),e.\u0275\u0275listener("click",function(){const i=e.\u0275\u0275restoreView(t).index,a=e.\u0275\u0275nextContext(3);return e.\u0275\u0275resetView(a.showCapabilityModal(i))}),e.\u0275\u0275namespaceSVG(),e.\u0275\u0275element(11,"svg",133),e.\u0275\u0275elementEnd(),e.\u0275\u0275namespaceHTML(),e.\u0275\u0275elementStart(12,"cds-icon-button",147),e.\u0275\u0275listener("click",function(){const i=e.\u0275\u0275restoreView(t).index,a=e.\u0275\u0275nextContext(3);return e.\u0275\u0275resetView(a.deleteCapability(i))}),e.\u0275\u0275namespaceSVG(),e.\u0275\u0275element(13,"svg",133),e.\u0275\u0275elementEnd()(),e.\u0275\u0275namespaceHTML(),e.\u0275\u0275element(14,"span",135),e.\u0275\u0275elementEnd()}if(2&o){const t=n.$implicit,_=n.index,i=e.\u0275\u0275nextContext(3);e.\u0275\u0275advance(),e.\u0275\u0275property("ngClass",e.\u0275\u0275pureFunction1(7,Qo,_>0)),e.\u0275\u0275advance(4),e.\u0275\u0275property("value",t.type),e.\u0275\u0275advance(4),e.\u0275\u0275property("value",t.perm),e.\u0275\u0275advance(2),e.\u0275\u0275property("cdsIcon",i.icons.edit)("size",i.icons.size16),e.\u0275\u0275advance(2),e.\u0275\u0275property("cdsIcon",i.icons.trash)("size",i.icons.size32)}}function pc(o,n){if(1&o){const t=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"fieldset")(1,"div",85)(2,"legend",101),e.\u0275\u0275i18n(3,60),e.\u0275\u0275elementEnd(),e.\u0275\u0275template(4,dc,3,0,"span",128)(5,uc,15,9,"span",129),e.\u0275\u0275elementStart(6,"div",130)(7,"div",131)(8,"button",145),e.\u0275\u0275pipe(9,"pipeFunction"),e.\u0275\u0275pipe(10,"pipeFunction"),e.\u0275\u0275listener("click",function(){e.\u0275\u0275restoreView(t);const i=e.\u0275\u0275nextContext(2);return e.\u0275\u0275resetView(i.showCapabilityModal())}),e.\u0275\u0275elementContainerStart(11),e.\u0275\u0275i18n(12,61),e.\u0275\u0275pipe(13,"titlecase"),e.\u0275\u0275pipe(14,"upperFirst"),e.\u0275\u0275elementContainerEnd(),e.\u0275\u0275namespaceSVG(),e.\u0275\u0275element(15,"svg",133),e.\u0275\u0275elementEnd()()()()()}if(2&o){const t=e.\u0275\u0275nextContext(2);e.\u0275\u0275advance(4),e.\u0275\u0275property("ngIf",0===t.capabilities.length),e.\u0275\u0275advance(),e.\u0275\u0275property("ngForOf",t.capabilities),e.\u0275\u0275advance(3),e.\u0275\u0275property("disabled",e.\u0275\u0275pipeBind2(9,8,t.capabilities,t.hasAllCapabilities))("disableTooltip",!e.\u0275\u0275pipeBind2(10,11,t.capabilities,t.hasAllCapabilities)),e.\u0275\u0275advance(6),e.\u0275\u0275i18nExp(e.\u0275\u0275pipeBind1(13,14,t.actionLabels.ADD))(e.\u0275\u0275pipeBind1(14,16,t.capabilityLabel)),e.\u0275\u0275i18nApply(12),e.\u0275\u0275advance(),e.\u0275\u0275property("cdsIcon",t.icons.add)("size",t.icons.size32)}}function mc(o,n){1&o&&(e.\u0275\u0275elementStart(0,"div",85)(1,"cds-checkbox",148),e.\u0275\u0275i18n(2,65),e.\u0275\u0275elementEnd()())}function Tc(o,n){1&o&&(e.\u0275\u0275elementStart(0,"span",113),e.\u0275\u0275i18n(1,67),e.\u0275\u0275elementEnd())}function gc(o,n){1&o&&(e.\u0275\u0275elementStart(0,"span",113),e.\u0275\u0275i18n(1,68),e.\u0275\u0275elementEnd())}function Ec(o,n){1&o&&(e.\u0275\u0275elementStart(0,"span",113),e.\u0275\u0275i18n(1,69),e.\u0275\u0275elementEnd())}function Rc(o,n){if(1&o&&e.\u0275\u0275template(0,Tc,2,0,"span",112)(1,gc,2,0,"span",112)(2,Ec,2,0,"span",112),2&o){e.\u0275\u0275nextContext(2);const t=e.\u0275\u0275reference(2),_=e.\u0275\u0275nextContext();e.\u0275\u0275property("ngIf",_.userForm.showError("user_quota_max_size",t,"required")),e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf",_.userForm.showError("user_quota_max_size",t,"quotaMaxSize")),e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf",_.userForm.showError("user_quota_max_size",_.formDir,"pattern"))}}function Cc(o,n){if(1&o&&(e.\u0275\u0275elementStart(0,"div",85)(1,"cds-text-label",149),e.\u0275\u0275i18nStart(2,66),e.\u0275\u0275element(3,"input",150),e.\u0275\u0275i18nEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275template(4,Rc,3,3,"ng-template",null,10,e.\u0275\u0275templateRefExtractor),e.\u0275\u0275elementEnd()),2&o){const t=e.\u0275\u0275reference(5),_=e.\u0275\u0275nextContext(2);e.\u0275\u0275advance(),e.\u0275\u0275property("invalid",_.userForm.controls.user_quota_max_size.invalid&&_.userForm.controls.user_quota_max_size.dirty)("invalidText",t),e.\u0275\u0275advance(2),e.\u0275\u0275property("invalid",_.userForm.controls.user_quota_max_size.invalid&&_.userForm.controls.user_quota_max_size.dirty)}}function fc(o,n){1&o&&(e.\u0275\u0275elementStart(0,"div",85)(1,"cds-checkbox",151),e.\u0275\u0275i18n(2,70),e.\u0275\u0275elementEnd()())}function Sc(o,n){1&o&&(e.\u0275\u0275elementStart(0,"span",113),e.\u0275\u0275i18n(1,71),e.\u0275\u0275elementEnd())}function Fc(o,n){1&o&&(e.\u0275\u0275elementStart(0,"span",113),e.\u0275\u0275i18n(1,72),e.\u0275\u0275elementEnd())}function Mc(o,n){if(1&o&&e.\u0275\u0275template(0,Sc,2,0,"span",112)(1,Fc,2,0,"span",112),2&o){e.\u0275\u0275nextContext(2);const t=e.\u0275\u0275reference(2),_=e.\u0275\u0275nextContext();e.\u0275\u0275property("ngIf",_.userForm.showError("user_quota_max_objects",t,"required")),e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf",_.userForm.showError("user_quota_max_objects",t,"min"))}}function Pc(o,n){if(1&o&&(e.\u0275\u0275elementStart(0,"div",85),e.\u0275\u0275element(1,"cds-number",152),e.\u0275\u0275template(2,Mc,2,2,"ng-template",null,11,e.\u0275\u0275templateRefExtractor),e.\u0275\u0275elementEnd()),2&o){const t=e.\u0275\u0275reference(3),_=e.\u0275\u0275nextContext(2);e.\u0275\u0275advance(),e.\u0275\u0275property("min",0)("invalid",_.userForm.controls.user_quota_max_objects.invalid&&_.userForm.controls.user_quota_max_objects.dirty)("invalidText",t)}}function Ic(o,n){1&o&&(e.\u0275\u0275elementStart(0,"div",85)(1,"cds-checkbox",153),e.\u0275\u0275i18n(2,73),e.\u0275\u0275elementEnd()())}function Oc(o,n){1&o&&(e.\u0275\u0275elementStart(0,"span",113),e.\u0275\u0275i18n(1,75),e.\u0275\u0275elementEnd())}function Gc(o,n){1&o&&(e.\u0275\u0275elementStart(0,"span",113),e.\u0275\u0275i18n(1,76),e.\u0275\u0275elementEnd())}function Nc(o,n){1&o&&(e.\u0275\u0275elementStart(0,"span",113),e.\u0275\u0275i18n(1,77),e.\u0275\u0275elementEnd())}function Ac(o,n){if(1&o&&e.\u0275\u0275template(0,Oc,2,0,"span",112)(1,Gc,2,0,"span",112)(2,Nc,2,0,"span",112),2&o){e.\u0275\u0275nextContext(2);const t=e.\u0275\u0275reference(2),_=e.\u0275\u0275nextContext();e.\u0275\u0275property("ngIf",_.userForm.showError("bucket_quota_max_size",t,"required")),e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf",_.userForm.showError("bucket_quota_max_size",t,"quotaMaxSize")),e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf",_.userForm.showError("bucket_quota_max_size",_.formDir,"pattern"))}}function hc(o,n){if(1&o&&(e.\u0275\u0275elementStart(0,"div",85)(1,"cds-text-label",154),e.\u0275\u0275i18nStart(2,74),e.\u0275\u0275element(3,"input",155),e.\u0275\u0275i18nEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275template(4,Ac,3,3,"ng-template",null,12,e.\u0275\u0275templateRefExtractor),e.\u0275\u0275elementEnd()),2&o){const t=e.\u0275\u0275reference(5),_=e.\u0275\u0275nextContext(2);e.\u0275\u0275advance(),e.\u0275\u0275property("invalid",_.userForm.controls.bucket_quota_max_size.invalid&&_.userForm.controls.bucket_quota_max_size.dirty)("invalidText",t),e.\u0275\u0275advance(2),e.\u0275\u0275property("invalid",_.userForm.controls.bucket_quota_max_size.invalid&&_.userForm.controls.bucket_quota_max_size.dirty)}}function bc(o,n){1&o&&(e.\u0275\u0275elementStart(0,"div",85)(1,"cds-checkbox",156),e.\u0275\u0275i18n(2,78),e.\u0275\u0275elementEnd()())}function vc(o,n){1&o&&(e.\u0275\u0275elementStart(0,"span",113),e.\u0275\u0275i18n(1,79),e.\u0275\u0275elementEnd())}function Lc(o,n){1&o&&(e.\u0275\u0275elementStart(0,"span",113),e.\u0275\u0275i18n(1,80),e.\u0275\u0275elementEnd())}function yc(o,n){if(1&o&&e.\u0275\u0275template(0,vc,2,0,"span",112)(1,Lc,2,0,"span",112),2&o){e.\u0275\u0275nextContext(2);const t=e.\u0275\u0275reference(2),_=e.\u0275\u0275nextContext();e.\u0275\u0275property("ngIf",_.userForm.showError("bucket_quota_max_objects",t,"required")),e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf",_.userForm.showError("bucket_quota_max_objects",t,"min"))}}function $c(o,n){if(1&o&&(e.\u0275\u0275elementStart(0,"div",85),e.\u0275\u0275element(1,"cds-number",157),e.\u0275\u0275template(2,yc,2,2,"ng-template",null,13,e.\u0275\u0275templateRefExtractor),e.\u0275\u0275elementEnd()),2&o){const t=e.\u0275\u0275reference(3),_=e.\u0275\u0275nextContext(2);e.\u0275\u0275advance(),e.\u0275\u0275property("min",0)("invalid",_.userForm.controls.bucket_quota_max_objects.invalid&&_.userForm.controls.bucket_quota_max_objects.dirty)("invalidText",t)}}function Dc(o,n){if(1&o){const t=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"div",82)(1,"form",83,0)(3,"div",84),e.\u0275\u0275i18n(4,14),e.\u0275\u0275pipe(5,"titlecase"),e.\u0275\u0275pipe(6,"upperFirst"),e.\u0275\u0275elementEnd(),e.\u0275\u0275template(7,bs,10,7),e.\u0275\u0275elementStart(8,"div",85)(9,"cds-text-label",86),e.\u0275\u0275i18nStart(10,15),e.\u0275\u0275element(11,"input",87),e.\u0275\u0275i18nEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275template(12,$s,3,3,"ng-template",null,1,e.\u0275\u0275templateRefExtractor),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(14,"div",85)(15,"cds-checkbox",88),e.\u0275\u0275listener("checkedChange",function(){e.\u0275\u0275restoreView(t);const i=e.\u0275\u0275nextContext();return e.\u0275\u0275resetView(i.updateFieldsWhenTenanted())}),e.\u0275\u0275text(16,"Show Tenant "),e.\u0275\u0275elementEnd()(),e.\u0275\u0275template(17,ws,6,4,"div",89),e.\u0275\u0275elementStart(18,"div",85)(19,"cds-text-label",90),e.\u0275\u0275i18nStart(20,16),e.\u0275\u0275element(21,"input",91),e.\u0275\u0275i18nEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275template(22,zs,2,2,"ng-template",null,2,e.\u0275\u0275templateRefExtractor),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(24,"div",85)(25,"cds-text-label",92),e.\u0275\u0275i18nStart(26,17),e.\u0275\u0275element(27,"input",93),e.\u0275\u0275i18nEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275template(28,Bs,2,2,"ng-template",null,3,e.\u0275\u0275templateRefExtractor),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(30,"div",85)(31,"cds-select",94),e.\u0275\u0275listener("valueChange",function(i){e.\u0275\u0275restoreView(t);const a=e.\u0275\u0275nextContext();return e.\u0275\u0275resetView(a.onMaxBucketsModeChange(i))}),e.\u0275\u0275elementStart(32,"option",95),e.\u0275\u0275i18n(33,18),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(34,"option",96),e.\u0275\u0275i18n(35,19),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(36,"option",97),e.\u0275\u0275i18n(37,20),e.\u0275\u0275elementEnd()()(),e.\u0275\u0275template(38,Ks,4,2,"div",89),e.\u0275\u0275elementStart(39,"div",85)(40,"cds-checkbox",98),e.\u0275\u0275i18nStart(41,21),e.\u0275\u0275element(42,"cd-help-text"),e.\u0275\u0275i18nEnd(),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(43,"div",85)(44,"cds-checkbox",99),e.\u0275\u0275i18nStart(45,22),e.\u0275\u0275element(46,"cd-help-text"),e.\u0275\u0275i18nEnd(),e.\u0275\u0275elementEnd()(),e.\u0275\u0275template(47,qs,7,2,"fieldset")(48,nc,8,2,"fieldset",100)(49,ic,14,10,"fieldset",100)(50,cc,22,12,"fieldset",100)(51,pc,16,18,"fieldset",100),e.\u0275\u0275elementStart(52,"fieldset")(53,"div",85)(54,"legend",101),e.\u0275\u0275i18n(55,23),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(56,"cds-checkbox",102),e.\u0275\u0275i18n(57,24),e.\u0275\u0275elementEnd()(),e.\u0275\u0275template(58,mc,3,0,"div",89)(59,Cc,6,3,"div",89)(60,fc,3,0,"div",89)(61,Pc,4,3,"div",89),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(62,"fieldset")(63,"div",85)(64,"legend",101),e.\u0275\u0275i18n(65,25),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(66,"cds-checkbox",103),e.\u0275\u0275i18n(67,26),e.\u0275\u0275elementEnd()(),e.\u0275\u0275template(68,Ic,3,0,"div",89)(69,hc,6,3,"div",89)(70,bc,3,0,"div",89)(71,$c,4,3,"div",89),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(72,"cd-form-advanced-fieldset")(73,"cd-rgw-rate-limit",104),e.\u0275\u0275listener("rateLimitFormGroup",function(i){e.\u0275\u0275restoreView(t);const a=e.\u0275\u0275nextContext();return e.\u0275\u0275resetView(a.rateLimitFormInit(i))}),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(74,"cd-form-button-panel",105),e.\u0275\u0275pipe(75,"titlecase"),e.\u0275\u0275pipe(76,"upperFirst"),e.\u0275\u0275listener("submitActionEvent",function(){e.\u0275\u0275restoreView(t);const i=e.\u0275\u0275nextContext();return e.\u0275\u0275resetView(i.onSubmit())}),e.\u0275\u0275elementEnd()()()}if(2&o){const t=e.\u0275\u0275reference(13),_=e.\u0275\u0275reference(23),i=e.\u0275\u0275reference(29),a=e.\u0275\u0275nextContext();e.\u0275\u0275property("columnNumbers",e.\u0275\u0275pureFunction0(45,Ms)),e.\u0275\u0275advance(),e.\u0275\u0275property("formGroup",a.userForm),e.\u0275\u0275advance(5),e.\u0275\u0275i18nExp(e.\u0275\u0275pipeBind1(5,37,a.action))(e.\u0275\u0275pipeBind1(6,39,a.resource)),e.\u0275\u0275i18nApply(4),e.\u0275\u0275advance(),e.\u0275\u0275conditional(a.accounts.length>0?7:-1),e.\u0275\u0275advance(2),e.\u0275\u0275property("invalid",a.userForm.controls.user_id.invalid&&a.userForm.controls.user_id.dirty)("invalidText",t),e.\u0275\u0275advance(2),e.\u0275\u0275property("invalid",a.userForm.controls.user_id.invalid&&a.userForm.controls.user_id.dirty)("readonly",a.editing)("autofocus",!a.editing),e.\u0275\u0275advance(4),e.\u0275\u0275property("readonly",!0),e.\u0275\u0275advance(2),e.\u0275\u0275property("ngIf",a.userForm.getValue("show_tenant")),e.\u0275\u0275advance(2),e.\u0275\u0275property("invalid",a.userForm.controls.display_name.invalid&&a.userForm.controls.display_name.dirty)("invalidText",_),e.\u0275\u0275advance(2),e.\u0275\u0275property("invalid",a.userForm.showError("display_name",a.formDir)),e.\u0275\u0275advance(4),e.\u0275\u0275property("invalid",a.userForm.controls.email.invalid&&a.userForm.controls.email.dirty)("invalidText",i),e.\u0275\u0275advance(2),e.\u0275\u0275property("invalid",a.userForm.controls.email.invalid&&a.userForm.controls.email.dirty),e.\u0275\u0275advance(11),e.\u0275\u0275property("ngIf",1==a.userForm.get("max_buckets_mode").value),e.\u0275\u0275advance(9),e.\u0275\u0275conditional(a.userForm.getValue("account_id")&&!a.userForm.getValue("account_root_user")?47:-1),e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf",!a.editing),e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf",a.editing),e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf",a.editing),e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf",a.editing),e.\u0275\u0275advance(7),e.\u0275\u0275property("ngIf",a.userForm.controls.user_quota_enabled.value),e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf",a.userForm.controls.user_quota_enabled.value&&!a.userForm.getValue("user_quota_max_size_unlimited")),e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf",a.userForm.controls.user_quota_enabled.value),e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf",a.userForm.controls.user_quota_enabled.value&&!a.userForm.getValue("user_quota_max_objects_unlimited")),e.\u0275\u0275advance(7),e.\u0275\u0275property("ngIf",a.userForm.controls.bucket_quota_enabled.value),e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf",a.userForm.controls.bucket_quota_enabled.value&&!a.userForm.getValue("bucket_quota_max_size_unlimited")),e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf",a.userForm.controls.bucket_quota_enabled.value),e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf",a.userForm.controls.bucket_quota_enabled.value&&!a.userForm.getValue("bucket_quota_max_objects_unlimited")),e.\u0275\u0275advance(2),e.\u0275\u0275property("type","user")("isEditing",a.editing)("id",a.uid),e.\u0275\u0275advance(),e.\u0275\u0275property("form",a.userForm)("submitText",e.\u0275\u0275pipeBind1(75,41,a.action)+" "+e.\u0275\u0275pipeBind1(76,43,a.resource))}}class Xt extends tt.g{constructor(n,t,_,i,a,r,s,d){super(),this.formBuilder=n,this.route=t,this.router=_,this.rgwUserService=i,this.modalService=a,this.notificationService=r,this.actionLabels=s,this.rgwUserAccountService=d,this.editing=!1,this.submitObservables=[],this.icons=L.FI,this.subusers=[],this.s3Keys=[],this.swiftKeys=[],this.capabilities=[],this.showTenant=!1,this.previousTenant=null,this.accounts=[],this.initialUserPolicies=[],this.managedPolicies=[{content:Pt.XG.AmazonS3FullAccess,name:Pt.Hk[Pt.XG.AmazonS3FullAccess],selected:!1},{content:Pt.XG.AmazonS3ReadOnlyAccess,name:Pt.Hk[Pt.XG.AmazonS3ReadOnlyAccess],selected:!1}],this.resource=$localize`user`,this.subuserLabel=$localize`subuser`,this.s3keyLabel=$localize`S3 Key`,this.capabilityLabel=$localize`capability`,this.editing=this.router.url.startsWith(`/rgw/user/${M.Qp.EDIT}`),this.action=this.editing?this.actionLabels.EDIT:this.actionLabels.CREATE,this.createForm()}createForm(){this.userForm=this.formBuilder.group({user_id:[null,[l.Validators.required,l.Validators.pattern(/^[a-zA-Z0-9!@#%^&*()._-]+$/)],this.editing?[]:[F.xQ.unique(this.rgwUserService.exists,this.rgwUserService,()=>this.userForm.getValue("tenant"))]],show_tenant:[this.editing],tenant:[null,[l.Validators.pattern(/^[a-zA-Z0-9_]+$/)],this.editing?[]:[F.xQ.unique(this.rgwUserService.exists,this.rgwUserService,()=>this.userForm.getValue("user_id"),!0)]],display_name:[null,[l.Validators.required,l.Validators.pattern(/^[a-zA-Z0-9!@#%^&*()._ -]+$/)]],email:[null,[F.xQ.email],[F.xQ.unique(this.rgwUserService.emailExists,this.rgwUserService)]],account_id:[null,[this.tenantedAccountValidator.bind(this)]],account_root_user:[!1],account_policies:[[]],max_buckets_mode:[1],max_buckets:[1e3,[F.xQ.requiredIf({max_buckets_mode:"1"}),F.xQ.number(!1)]],system:[!1],suspended:[!1],generate_key:[!0],access_key:[null,[F.xQ.requiredIf({generate_key:!1})]],secret_key:[null,[F.xQ.requiredIf({generate_key:!1})]],user_quota_enabled:[!1],user_quota_max_size_unlimited:[!0],user_quota_max_size:[null,[F.xQ.composeIf({user_quota_enabled:!0,user_quota_max_size_unlimited:!1},[l.Validators.required,this.quotaMaxSizeValidator])]],user_quota_max_objects_unlimited:[!0],user_quota_max_objects:[null,[F.xQ.requiredIf({user_quota_enabled:!0,user_quota_max_objects_unlimited:!1})]],bucket_quota_enabled:[!1],bucket_quota_max_size_unlimited:[!0],bucket_quota_max_size:[null,[F.xQ.composeIf({bucket_quota_enabled:!0,bucket_quota_max_size_unlimited:!1},[l.Validators.required,this.quotaMaxSizeValidator])]],bucket_quota_max_objects_unlimited:[!0],bucket_quota_max_objects:[null,[F.xQ.requiredIf({bucket_quota_enabled:!0,bucket_quota_max_objects_unlimited:!1})]]})}ngOnInit(){this.route.params.subscribe(n=>{if(!n.hasOwnProperty("uid"))return;const t=decodeURIComponent(n.uid),_=[];_.push(this.rgwUserService.get(t)),_.push(this.rgwUserService.getQuota(t)),_.push(this.rgwUserService.getUserRateLimit(t)),(0,w.forkJoin)(_).subscribe(i=>{const a=N().clone(this.userForm.value);let r=N().pick(i[0],N().keys(this.userForm.value));switch(r.max_buckets){case-1:r.max_buckets_mode=-1,r.max_buckets="";break;case 0:r.max_buckets_mode=0,r.max_buckets="";break;default:r.max_buckets_mode=1}["user","bucket"].forEach(m=>{const C=i[1][m+"_quota"];r[m+"_quota_enabled"]=C.enabled,C.max_size<0?(r[m+"_quota_max_size_unlimited"]=!0,r[m+"_quota_max_size"]=null):(r[m+"_quota_max_size_unlimited"]=!1,r[m+"_quota_max_size"]=`${C.max_size} B`),C.max_objects<0?(r[m+"_quota_max_objects_unlimited"]=!0,r[m+"_quota_max_objects"]=null):(r[m+"_quota_max_objects_unlimited"]=!1,r[m+"_quota_max_objects"]=C.max_objects)}),r=N().merge(a,r),this.userForm.setValue(r),this.userForm.getValue("account_id")?this.userForm.get("account_id").disable():this.userForm.get("account_id").setValue(null);const s=i[0].type!==Pt.tj;this.userForm.get("account_root_user").setValue(s),this.subusers=i[0].subusers,this.s3Keys=i[0].keys,this.swiftKeys=i[0].swift_keys;const d={"read, write":"*"};i[0].caps.forEach(m=>{m.perm in d&&(m.perm=d[m.perm])}),this.capabilities=i[0].caps,this.uid=this.getUID(),this.initialUserPolicies=i[0].managed_user_policies??[],this.managedPolicies.forEach(m=>{m.selected=this.initialUserPolicies.includes(m.name)});const u=this.managedPolicies.filter(m=>m.selected).map(m=>m.name);this.userForm.get("account_policies")?.setValue(u)},()=>{this.loadingError()})}),this.rgwUserAccountService.list(!0).subscribe(n=>{this.accounts=n,this.editing||this.userForm.get("account_id").reset(),this.loadingReady()},()=>{this.loadingError()}),this.userForm.get("account_id").valueChanges.subscribe(n=>{n?(this.userForm.get("display_name").setValidators([l.Validators.pattern(/^[\w+=,.@-]+$/),l.Validators.required]),this.userForm.get("display_name").updateValueAndValidity(),this.userForm.get("account_root_user").enable()):(this.userForm.get("display_name").setValidators([l.Validators.pattern(/^[a-zA-Z0-9!@#%^&*()._ -]+$/),l.Validators.required]),this.userForm.get("display_name").updateValueAndValidity(),this.userForm.get("account_root_user").disable())})}multiSelector(n){this.managedPolicies.forEach(t=>{t.selected=!!n.find(_=>_.name===t.name)})}tenantedAccountValidator(n){if(this?.userForm?.getValue("tenant")&&this.accounts.length>0){const t=this.accounts.findIndex(_=>_.id===n.value);if(-1!==t)return this.userForm.getValue("tenant")!==this.accounts[t].tenant?{tenantedAccount:!0}:null}return null}rateLimitFormInit(n){this.userForm.addControl("rateLimit",n)}goToListView(){this.router.navigate(["/rgw/user"])}onSubmit(){let n;if(this.uid=this.getUID(),this.userForm.pristine&&this.rateLimitComponent.form.pristine)return void this.goToListView();if(this.editing){if(this._isGeneralDirty()){const _=this._getUpdateArgs();this.submitObservables.push(this.rgwUserService.update(this.uid,_))}n=$localize`Updated Object Gateway user '${this.uid}'`}else{const _=this._getCreateArgs();this.submitObservables.push(this.rgwUserService.create(_)),n=$localize`Created Object Gateway user '${this.uid}'`}if(this._isUserQuotaDirty()){const _=this._getUserQuotaArgs();this.submitObservables.push(this.rgwUserService.updateQuota(this.uid,_))}if(this._isBucketQuotaDirty()){const _=this._getBucketQuotaArgs();this.submitObservables.push(this.rgwUserService.updateQuota(this.uid,_))}const t=this.rateLimitComponent.getRateLimitFormValue();t&&this.submitObservables.push(this.rgwUserService.updateUserRateLimit(this.userForm.getValue("user_id"),t)),(0,w.concat)(...this.submitObservables).subscribe({error:()=>{this.userForm.setErrors({cdSubmitButton:!0})},complete:()=>{this.notificationService.show(x._.success,n),this.goToListView()}})}updateFieldsWhenTenanted(){this.showTenant=this.userForm.getValue("show_tenant"),this.showTenant?(this.userForm.get("user_id").markAsTouched(),this.previousTenant=this.userForm.get("tenant").value,this.userForm.get("tenant").patchValue(null)):(this.userForm.get("user_id").markAsUntouched(),this.userForm.get("tenant").patchValue(this.previousTenant))}getUID(){let n=this.userForm.getValue("user_id");const t=this.userForm?.getValue("tenant");return t&&t.length>0&&(n=`${this.userForm.getValue("tenant")}$${n}`),n}quotaMaxSizeValidator(n){return(new we.k).performValidation(n,"^(\\d+(\\.\\d+)?)\\s*(B|K(B|iB)?|M(B|iB)?|G(B|iB)?|T(B|iB)?)?$",{quotaMaxSize:!0},"quota")}setSubuser(n,t){const _={"full-control":"full","read-write":"readwrite"},i=this.getUID(),a={subuser:n.id,access:n.permissions in _?_[n.permissions]:n.permissions,key_type:"swift",secret_key:n.secret_key,generate_secret:n.generate_secret?"true":"false"};this.submitObservables.push(this.rgwUserService.createSubuser(i,a)),N().isNumber(t)?this.subusers[t]=n:(this.subusers.push(n),this.swiftKeys.push({user:n.id,secret_key:n.generate_secret?"Apply your changes first...":n.secret_key})),this.userForm.markAsDirty()}deleteSubuser(n){const t=this.subusers[n];this.submitObservables.push(this.rgwUserService.deleteSubuser(this.getUID(),t.id)),this.s3Keys=this.s3Keys.filter(_=>_.user!==t.id),this.swiftKeys=this.swiftKeys.filter(_=>_.user!==t.id),this.subusers.splice(n,1),this.userForm.markAsDirty()}setCapability(n,t){const _=this.getUID();if(N().isNumber(t)){const i=this.capabilities[t];this.submitObservables.push(this.rgwUserService.deleteCapability(_,i.type,i.perm)),this.submitObservables.push(this.rgwUserService.addCapability(_,n.type,n.perm)),this.capabilities[t]=n}else this.submitObservables.push(this.rgwUserService.addCapability(_,n.type,n.perm)),this.capabilities=[...this.capabilities,n];this.userForm.markAsDirty()}deleteCapability(n){const t=this.capabilities[n];this.submitObservables.push(this.rgwUserService.deleteCapability(this.getUID(),t.type,t.perm)),this.capabilities.splice(n,1),this.capabilities=[...this.capabilities],this.userForm.markAsDirty()}hasAllCapabilities(n){return!N().difference(An.getAll(),N().map(n,"type")).length}setS3Key(n,t){if(!N().isNumber(t)){const _=n.user.match(/([^:]+)(:(.+))?/),i=_[1],a={subuser:_[2]?_[3]:"",generate_key:n.generate_key?"true":"false"};"false"===a.generate_key&&(N().isNil(n.access_key)||(a.access_key=n.access_key),N().isNil(n.secret_key)||(a.secret_key=n.secret_key)),this.submitObservables.push(this.rgwUserService.addS3Key(i,a)),this.s3Keys.push({user:n.user,access_key:n.generate_key?"Apply your changes first...":n.access_key,secret_key:n.generate_key?"Apply your changes first...":n.secret_key})}this.userForm.markAsDirty()}deleteS3Key(n){const t=this.s3Keys[n];this.submitObservables.push(this.rgwUserService.deleteS3Key(this.getUID(),t.access_key)),this.s3Keys.splice(n,1),this.userForm.markAsDirty()}showSubuserModal(n){const t=this.getUID(),_=this.modalService.show(bn);if(N().isNumber(n)){const i=this.subusers[n];_.setEditing(),_.setValues(t,i.id,i.permissions)}else _.setEditing(!1),_.setValues(t),_.setSubusers(this.subusers);_.submitAction.subscribe(i=>{this.setSubuser(i,n)})}showS3KeyModal(n){const t=this.modalService.show(zt);if(N().isNumber(n)){const _=this.s3Keys[n];t.setViewing(),t.setValues(_.user,_.access_key,_.secret_key)}else{const _=this._getS3KeyUserCandidates();t.setViewing(!1),t.setUserCandidates(_),t.submitAction.subscribe(i=>{this.setS3Key(i)})}}showSwiftKeyModal(n){const t=this.modalService.show(Ht),_=this.swiftKeys[n];t.setValues(_.user,_.secret_key)}showCapabilityModal(n){const t=this.modalService.show(hn);if(N().isNumber(n)){const _=this.capabilities[n];t.setEditing(),t.setValues(_.type,_.perm)}else t.setEditing(!1),t.setCapabilities(this.capabilities);t.submitAction.subscribe(_=>{this.setCapability(_,n)})}_isGeneralDirty(){return["display_name","email","max_buckets_mode","max_buckets","system","suspended","account_id","account_root_user","account_policies"].some(n=>this.userForm.get(n).dirty)}_isUserQuotaDirty(){return["user_quota_enabled","user_quota_max_size_unlimited","user_quota_max_size","user_quota_max_objects_unlimited","user_quota_max_objects"].some(n=>this.userForm.get(n).dirty)}_isBucketQuotaDirty(){return["bucket_quota_enabled","bucket_quota_max_size_unlimited","bucket_quota_max_size","bucket_quota_max_objects_unlimited","bucket_quota_max_objects"].some(n=>this.userForm.get(n).dirty)}_getCreateArgs(){const n={uid:this.getUID(),display_name:this.userForm.getValue("display_name"),system:this.userForm.getValue("system"),suspended:this.userForm.getValue("suspended"),email:"",max_buckets:this.userForm.getValue("max_buckets"),generate_key:this.userForm.getValue("generate_key"),access_key:"",secret_key:""},t=this.userForm.getValue("email");N().isString(t)&&t.length>0&&N().merge(n,{email:t}),this.userForm.getValue("generate_key")||N().merge(n,{generate_key:!1,access_key:this.userForm.getValue("access_key"),secret_key:this.userForm.getValue("secret_key")});const i=parseInt(this.userForm.getValue("max_buckets_mode"),10);N().includes([-1,0],i)&&N().merge(n,{max_buckets:i}),this.userForm.getValue("account_id")&&N().merge(n,{account_id:this.userForm.getValue("account_id"),account_root_user:this.userForm.getValue("account_root_user")});const a=this._getAccountManagedPolicies();return this.userForm.getValue("account_id")&&!this.userForm.getValue("account_root_user")&&N().merge(n,{account_policies:a}),n}_getUpdateArgs(){const n={},t=["display_name","email","max_buckets","system","suspended"];for(const a of t)n[a]=this.userForm.getValue(a);this.userForm.getValue("account_id")&&(n.account_id=this.userForm.getValue("account_id"),n.account_root_user=this.userForm.getValue("account_root_user"));const _=parseInt(this.userForm.getValue("max_buckets_mode"),10);N().includes([-1,0],_)&&(n.max_buckets=_);const i=this._getAccountManagedPolicies();return this.userForm.getValue("account_id")&&!this.userForm.getValue("account_root_user")&&(n.account_policies=i),n}_getUserQuotaArgs(){const n={quota_type:"user",enabled:this.userForm.getValue("user_quota_enabled"),max_size_kb:-1,max_objects:-1};if(!this.userForm.getValue("user_quota_max_size_unlimited")){const t=(new we.k).toBytes(this.userForm.getValue("user_quota_max_size"));n.max_size_kb=(t/1024).toFixed(0)}return this.userForm.getValue("user_quota_max_objects_unlimited")||(n.max_objects=this.userForm.getValue("user_quota_max_objects")),n}_getBucketQuotaArgs(){const n={quota_type:"bucket",enabled:this.userForm.getValue("bucket_quota_enabled"),max_size_kb:-1,max_objects:-1};if(!this.userForm.getValue("bucket_quota_max_size_unlimited")){const t=(new we.k).toBytes(this.userForm.getValue("bucket_quota_max_size"));n.max_size_kb=(t/1024).toFixed(0)}return this.userForm.getValue("bucket_quota_max_objects_unlimited")||(n.max_objects=this.userForm.getValue("bucket_quota_max_objects")),n}_getS3KeyUserCandidates(){let n=[];const t=this.getUID();return N().isString(t)&&!N().isEmpty(t)&&n.push(t),this.subusers.forEach(_=>{n.push(_.id)}),this.s3Keys.forEach(_=>{n.push(_.user)}),n=N().uniq(n),n}_getAccountManagedPolicies(){const n=this.managedPolicies.filter(r=>r.selected).map(r=>r.name),t=this.initialUserPolicies;return{attach:n.filter(r=>!t.includes(r)),detach:t.filter(r=>!n.includes(r))}}onMaxBucketsModeChange(n){"1"===n&&(this.userForm.get("max_buckets").valid||this.userForm.patchValue({max_buckets:1e3}))}goToCreateAccountForm(){this.router.navigate(["rgw/accounts/create"])}static{this.\u0275fac=function(t){return new(t||Xt)(e.\u0275\u0275directiveInject(Ne.$),e.\u0275\u0275directiveInject(Y.ActivatedRoute),e.\u0275\u0275directiveInject(Y.Router),e.\u0275\u0275directiveInject(Rt.p),e.\u0275\u0275directiveInject(he.V),e.\u0275\u0275directiveInject(te.J),e.\u0275\u0275directiveInject(M.Ss),e.\u0275\u0275directiveInject(Je))}}static{this.\u0275cmp=e.\u0275\u0275defineComponent({type:Xt,selectors:[["cd-rgw-user-form"]],viewQuery:function(t,_){if(1&t&&e.\u0275\u0275viewQuery(ft,5),2&t){let i;e.\u0275\u0275queryRefresh(i=e.\u0275\u0275loadQuery())&&(_.rateLimitComponent=i.first)}},features:[e.\u0275\u0275InheritDefinitionFeature],decls:1,vars:1,consts:()=>{let n,t,_,i,a,r,s,d,u,m,C,O,f,I,R,h,G,U,k,y,H,X,B,V,S,P,ee,Q,q,J,$,_e,D,W,ce,de,ue,pe,me,Te,ge,le,Ee,Re,Ce,fe,E,Ze,ve,Ke,qe,v,it,at,rt,lt,st,ct,dt,ut,pt,mt,Tt,gt,Ye,Et,A,_n,an,rn,ln,sn,cn;return n=$localize`:form title␟fb127ea03835b3230f0ed981c7080e2ccb879621␟3346778808274133574:${"\ufffd0\ufffd"}:INTERPOLATION: ${"\ufffd1\ufffd"}:INTERPOLATION_1:`,t=$localize`:␟a4004e845aad89adf50934307007e035eb8812e9␟3281894229052136729:User ID ${"\ufffd#11\ufffd\ufffd/#11\ufffd"}:TAG_INPUT:`,_=$localize`:␟7b12c7f5ccb547a27809d8a9ffd5a52d0f28f21a␟7339586507496327828:Full name ${"\ufffd#21\ufffd\ufffd/#21\ufffd"}:TAG_INPUT:`,i=$localize`:␟cada3558de0fa748b02e7b21d12e86c4ab4b633d␟3261276699821318430:Email address ${"\ufffd#27\ufffd\ufffd/#27\ufffd"}:TAG_INPUT:`,a=$localize`:␟f39256070bfc0714020dfee08895421fc1527014␟5769292297914455214:Disabled`,r=$localize`:␟aa6fb95c355f172bda303de1ce2f38c251a149cf␟240806681889331244:Unlimited`,s=$localize`:␟a5c05002b0ac2040f1aede5e727e0ffd06eda819␟7590013429208346303:Custom`,d=$localize`:␟4c9acf0625fbd4f765c1d41c5267b5d05b88d03c␟8747534400989494234:Suspended ${"\ufffd#42\ufffd"}:START_TAG_CD_HELP_TEXT:Suspending the user disables the user and subuser.${"\ufffd/#42\ufffd"}:CLOSE_TAG_CD_HELP_TEXT:`,u=$localize`:␟fe289a132fcaf0814150ff6bc18c8d5af3c2b4ac␟6907691705259351041:System user ${"\ufffd#46\ufffd"}:START_TAG_CD_HELP_TEXT:System users are distinct from regular users, they are used by the RGW service to perform administrative tasks, manage buckets and objects${"\ufffd/#46\ufffd"}:CLOSE_TAG_CD_HELP_TEXT:`,m=$localize`:␟36ad38f9c1a1485e09b67778a28af84553290ffb␟5261714758222747685:User quota`,C=$localize`:␟c5b7de02720303d51b53e52b5fc49d2633d00058␟2310793936528648555:Enabled `,O=$localize`:␟649a410bd0ace333d067d8fa22f12bdbdb43533b␟3048195452916484333:Bucket quota`,f=$localize`:␟f50a33d3c339f8f4a465141f8caa5d2d8c005251␟4816216590591222133:Enabled`,I=$localize`:␟724207fe4296d33368f4bb0d0520a827143e70e5␟2552227368011728818:Link Account`,R=$localize`:␟94516fa213706c67ce5a5b5765681d7fb032033a␟3894950702316166331:Loading...`,h=$localize`:␟1faa4562961803283525743211b988dbd58372be␟3007074370223006124:-- Select an Account --`,G=$localize`:␟fb715695d9ad036026d6ea279f5e41f7a1460d4d␟5083213070736947533:Only accounts with the same tenant name can be linked to a tenanted user.`,U=$localize`:␟abd64e3fd60462e30b63a5215e2bb27a94660088␟2009272074198733173:Account membership is permanent. Once added, users cannot be removed from their account.`,k=$localize`:␟9d9a5010fdbb8aa58b097f64ad49262c19f8c43b␟3656024985478952840:Ownership of all of the user's buckets will be transferred to the account.`,y=$localize`:␟937b0ccf3612bbf836df4d32b6b1183b125c113d␟4350416877523919129:Account Root user ${"\ufffd#3\ufffd"}:START_TAG_CD_HELP_TEXT:The account root user has full access to all resources and manages the account. It's recommended to use this account for management tasks only and create additional users with specific permissions. ${"\ufffd/#3\ufffd"}:CLOSE_TAG_CD_HELP_TEXT:`,H=$localize`:␟7cbdabcece469fab89cfa687ab152bca18b97498␟1417693714872528491:This field is required.`,X=$localize`:␟db4e1a734518691b128ef40b939cc673f01d03a6␟6799055650932155327:The value is not valid.`,B=$localize`:␟6aaf5d2a304167272ac73e3b1d1c162e16c77858␟2703772363194936790:The chosen user ID is already in use.`,V=$localize`:␟35dc15b546269ce656ab0268d19311be45c86993␟7565600636860686884:Tenant ${"\ufffd#3\ufffd\ufffd/#3\ufffd"}:TAG_INPUT:`,S=$localize`:␟db4e1a734518691b128ef40b939cc673f01d03a6␟6799055650932155327:The value is not valid.`,P=$localize`:␟6af106b0d759fd2882e645604675c4494abfcd5b␟4920776341181535287:The chosen user ID exists in this tenant.`,ee=$localize`:␟7cbdabcece469fab89cfa687ab152bca18b97498␟1417693714872528491:This field is required.`,Q=$localize`:␟db4e1a734518691b128ef40b939cc673f01d03a6␟6799055650932155327:The value is not valid.`,q=$localize`:␟df441e80db2157f9d272b75de724ba4a82b96b57␟6523332409956309908:This is not a valid email address.`,J=$localize`:␟ca271adf154956b8fcb28f4f50a37acb3057ff7c␟2810417837351415641:The chosen email address is already in use.`,$=$localize`:␟28872515cb81d197a3a1733fa546d3e0f0dd6c67␟6745070507286309866:The entered value must be >= 1.`,_e=$localize`:␟7cbdabcece469fab89cfa687ab152bca18b97498␟1417693714872528491:This field is required.`,D=$localize`:␟3e89f7faf308063adb8548100889a129913c86b2␟4551581141684694255:Policies`,W=$localize`:␟d97f973650c2994f685108bb9314275470d91be4␟4474958458624975768:Select managed policies...`,ce=$localize`:␟923fedda3a6df6e1562d5c5d7d3f4c109900d44d␟4700392011254709583:Managed policies`,de=$localize`:␟12f37de6622cf2e15ac960f3dd14502e8581733a␟2425863206688252134:${"\ufffd#6\ufffd"}:START_TAG_CDS_DROPDOWN_LIST:${"\ufffd/#6\ufffd"}:CLOSE_TAG_CDS_DROPDOWN_LIST:`,ue=$localize`:␟583a219c524155c2314eb06ee29162bb315272a3␟7193083486810209470:S3 key`,pe=$localize`:␟c217ee914725a37e9dd2336c721c8e63e9666bdc␟1254954206625106737:Auto-generate key`,me=$localize`:␟d3c5e53715d9bcf3be97e844dd088aca62e8a2af␟1776337063377226770:Access key ${"\ufffd#3\ufffd\ufffd/#3\ufffd"}:TAG_INPUT:`,Te=$localize`:␟7cbdabcece469fab89cfa687ab152bca18b97498␟1417693714872528491:This field is required.`,ge=$localize`:␟2e19345ffdc830f6db79cc6cd93b7bc93d5c7aaa␟6145565261691139770:Secret key ${"\ufffd#3\ufffd\ufffd/#3\ufffd"}:TAG_INPUT:`,le=$localize`:␟7cbdabcece469fab89cfa687ab152bca18b97498␟1417693714872528491:This field is required.`,Ee=$localize`:␟2c4c62e8ba24601be5cfe7dc5d32c24bbbd4b53c␟456730418941209:Subusers`,Re=$localize`:␟c6c3fbba9e38392d570ea16ddb658fdd980fb376␟1236500018038312112:${"\ufffd0\ufffd"}:INTERPOLATION: ${"\ufffd1\ufffd"}:INTERPOLATION_1:`,Ce=$localize`:␟128d6efb51d9ddc7c0cc695a2deeca5b9523f6e4␟72170783287713585:There are no subusers.`,fe=$localize`:␟0bcd5ef19af0f1b814141ca8c57df623d8270088␟2850704758582178666:Keys`,E=$localize`:␟8d3d8e6a797f48f2f4765b74e064fcd2a5e4d584␟5503700067397058044:${"\ufffd0\ufffd"}:INTERPOLATION: ${"\ufffd1\ufffd"}:INTERPOLATION_1:`,Ze=$localize`:␟d6819038d608623503918fb2553f53d68231ec3a␟5820752306168855018:There are no keys.`,ve=$localize`:␟2aba1e87039819aca3b70faa9aa848c12bf139ca␟8461842260159597706:Show`,Ke=$localize`:␟d6819038d608623503918fb2553f53d68231ec3a␟5820752306168855018:There are no keys.`,qe=$localize`:␟2aba1e87039819aca3b70faa9aa848c12bf139ca␟8461842260159597706:Show`,v=$localize`:␟f5a451c4ea65a4046f0b49d489a7013abf0b5861␟2155114225350038108:All capabilities are already added.`,it=$localize`:␟17bb3082e6fe5003203ef992a3714172334631a1␟2680037700420002636:Capabilities`,at=$localize`:␟058a97fa5d2235db89e4a124ba7a19ba88ba2b94␟1507958783972102017:${"\ufffd0\ufffd"}:INTERPOLATION: ${"\ufffd1\ufffd"}:INTERPOLATION_1:`,rt=$localize`:␟1d01eccdda47fc907c5be35bcb16d2dcd02b0270␟9048701928821244844:There are no capabilities.`,lt=$localize`:␟2269bda2e6adb7aa1df970e3bca50b7179993735␟6915559941358065126:Type ${"\ufffd#5\ufffd\ufffd/#5\ufffd"}:TAG_INPUT:`,st=$localize`:␟5c0412edf03a154cdda1bd9be8d8a2b5c9eeedd1␟4892704038491694128:Permission ${"\ufffd#9\ufffd\ufffd/#9\ufffd"}:TAG_INPUT:`,ct=$localize`:␟6146e13ceca5fa5cc17b771b282fe5955f3d19fa␟4687757029350138833:Unlimited size`,dt=$localize`:␟2f30067814951b5234e2f73dfc08cf2ff0444be2␟9138196256791233706:Maximum size ${"\ufffd#3\ufffd\ufffd/#3\ufffd"}:TAG_INPUT:`,ut=$localize`:␟7cbdabcece469fab89cfa687ab152bca18b97498␟1417693714872528491:This field is required.`,pt=$localize`:␟db4e1a734518691b128ef40b939cc673f01d03a6␟6799055650932155327:The value is not valid.`,mt=$localize`:␟25db023269cd62168393b201f615ec90e07f3df8␟4749416028992272245:Size must be a number or in a valid format. eg: 5 GiB`,Tt=$localize`:␟fc630b2093e880fffa19df99d5cd8b87605037f8␟7805775243912737348:Unlimited objects`,gt=$localize`:␟7cbdabcece469fab89cfa687ab152bca18b97498␟1417693714872528491:This field is required.`,Ye=$localize`:␟623ac50f37a26caec6fd7cd519b653e3315cba25␟4107488674570665853:The entered value must be >= 0.`,Et=$localize`:␟6146e13ceca5fa5cc17b771b282fe5955f3d19fa␟4687757029350138833:Unlimited size`,A=$localize`:␟2f30067814951b5234e2f73dfc08cf2ff0444be2␟9138196256791233706:Maximum size ${"\ufffd#3\ufffd\ufffd/#3\ufffd"}:TAG_INPUT:`,_n=$localize`:␟7cbdabcece469fab89cfa687ab152bca18b97498␟1417693714872528491:This field is required.`,an=$localize`:␟db4e1a734518691b128ef40b939cc673f01d03a6␟6799055650932155327:The value is not valid.`,rn=$localize`:␟25db023269cd62168393b201f615ec90e07f3df8␟4749416028992272245:Size must be a number or in a valid format. eg: 5 GiB`,ln=$localize`:␟fc630b2093e880fffa19df99d5cd8b87605037f8␟7805775243912737348:Unlimited objects`,sn=$localize`:␟7cbdabcece469fab89cfa687ab152bca18b97498␟1417693714872528491:This field is required.`,cn=$localize`:␟623ac50f37a26caec6fd7cd519b653e3315cba25␟4107488674570665853:The entered value must be >= 0.`,[["frm","ngForm"],["userError",""],["displayNameError",""],["emailError",""],["accountError",""],["accountsHelper",""],["tenantError",""],["maxBucketsError",""],["accessKeyError",""],["secretKeyError",""],["quotaMaxSizeError",""],["maxObjectsError",""],["bucketQuotaMaxSizeError",""],["bucketMaxObjectsError",""],n,t,_,i,a,r,s,d,u,m,C,O,f,R,h,G,U,k,y,H,X,B,V,S,P,ee,Q,q,J,$,_e,ce,de,ue,pe,me,Te,ge,le,Ee,Re,Ce,fe,E,Ze,Ke,it,at,rt,lt,st,ct,dt,ut,pt,mt,Tt,gt,Ye,Et,A,_n,an,rn,ln,sn,cn,["cdsCol","",3,"columnNumbers",4,"cdFormLoading"],["cdsCol","",3,"columnNumbers"],["novalidate","",3,"formGroup"],[1,"form-header"],[1,"form-item"],["for","user_id","cdRequiredField","User ID",3,"invalid","invalidText"],["cdsText","","formControlName","user_id","name","user_id","id","user_id",3,"invalid","readonly","autofocus"],["formControlName","show_tenant","id","show_tenant",3,"checkedChange","readonly"],["class","form-item",4,"ngIf"],["for","display_name","cdRequiredField","Full name",3,"invalid","invalidText"],["cdsText","","formControlName","display_name","name","display_name","id","display_name",3,"invalid"],["for","email",3,"invalid","invalidText"],["cdsText","","formControlName","email","name","email","id","email",3,"invalid"],["label","Maximum buckets","for","max_buckets_mode","formControlName","max_buckets_mode","id","max_buckets_mode",3,"valueChange"],["value","-1"],["value","0"],["value","1"],["formControlName","suspended","id","suspended"],["formControlName","system","id","system"],[4,"ngIf"],[1,"cd-header"],["formControlName","user_quota_enabled","id","user_quota_enabled"],["formControlName","bucket_quota_enabled","id","bucket_quota_enabled"],[3,"rateLimitFormGroup","type","isEditing","id"],["wrappingClass","text-right",3,"submitActionEvent","form","submitText"],["label",I,"id","link_account","for","link_account","formControlName","account_id",3,"invalid","invalidText","helperText"],[3,"ngValue",4,"ngIf"],[3,"value",4,"ngIf"],[3,"value",4,"ngFor","ngForOf"],[3,"ngValue"],[3,"value"],["class","invalid-feedback",4,"ngIf"],[1,"invalid-feedback"],["formControlName","account_root_user","id","account_root_user"],["for","tenant",3,"invalid","invalidText"],["cdsText","","formControlName","tenant","name","tenant","id","tenant","autofocus","",3,"invalid","readonly"],["for","max_buckets","formControlName","max_buckets","id","max_buckets","min","1",3,"invalid","invalidText"],["label",D,"type","multi","selectionFeedback","top-after-reopen","formControlName","account_policies","id","account_policies","placeholder",W,"itemValueKey","name",3,"selected","appendInline","items"],["formControlName","generate_key","id","generate_key"],["class","form-item form-item-append",4,"ngIf"],[1,"form-item","form-item-append"],["for","access_key","cdRequiredField","Access key",3,"invalid","invalidText"],["cdsPassword","","type","password","formControlName","access_key","name","access_key","id","access_key",3,"invalid"],["source","access_key",1,"mt-4"],["for","secret","cdRequiredField","Secret key",3,"invalid","invalidText"],["cdsPassword","","type","password","formControlName","secret_key","name","secret_key","id","secret_key",3,"invalid"],["source","secret_key",1,"mt-4"],["class","no-border",4,"ngIf"],[4,"ngFor","ngForOf"],["cdsRow","",1,"form-item"],["cdsCol",""],["cdsButton","tertiary","type","button",1,"tc_addSubuserButton",3,"click"],[1,"cds--btn__icon",3,"cdsIcon","size"],[1,"no-border"],[1,"form-text","text-muted"],["cdsRow","",1,"form-item-append",3,"ngClass"],["cdsText","","readonly","",3,"value"],["kind","tertiary","size","md","title","Edit",1,"mt-4","tc_showSubuserButton",3,"click"],["kind","danger","size","md","title","Delete",1,"mt-4","tc_deleteSubuserButton",3,"click"],["type","button","cdsButton","tertiary",1,"tc_addS3KeyButton",3,"click"],["cdsRow","",1,"form-item-append"],["kind","tertiary","size","md","title",ve,1,"mt-2","tc_showS3KeyButton",3,"click"],["kind","danger","size","md","title","Delete",1,"mt-2","tc_deleteS3KeyButton",3,"click"],["kind","tertiary","size","md","title",qe,1,"mt-2","tc_showSwiftKeyButton",3,"click"],["type","button","cdsButton","tertiary","ngbTooltip",v,"triggers","pointerenter:pointerleave",1,"tc_addCapButton",3,"click","disabled","disableTooltip"],["kind","tertiary","size","md","title","Edit",1,"mt-4","tc_editCapButton",3,"click"],["kind","danger","size","md","title","Delete",1,"mt-4","tc_deleteCapButton",3,"click"],["formControlName","user_quota_max_size_unlimited","id","user_quota_max_size_unlimited"],["for","user_quota_max_size","cdRequiredField","Maximum size",3,"invalid","invalidText"],["cdsText","","formControlName","user_quota_max_size","name","user_quota_max_size","id","user_quota_max_size","cdDimlessBinary","",3,"invalid"],["formControlName","user_quota_max_objects_unlimited","id","user_quota_max_objects_unlimited"],["for","user_quota_max_objects","formControlName","user_quota_max_objects","id","user_quota_max_objects","label","Maximum Objects","cdRequiredField","Maximum Objects",3,"min","invalid","invalidText"],["formControlName","bucket_quota_max_size_unlimited","id","bucket_quota_max_size_unlimited"],["for","bucket_quota_max_size","cdRequiredField","Maximum size",3,"invalid","invalidText"],["cdsText","","formControlName","bucket_quota_max_size","name","bucket_quota_max_size","id","bucket_quota_max_size","cdDimlessBinary","",3,"invalid"],["formControlName","bucket_quota_max_objects_unlimited","id","bucket_quota_max_objects_unlimited"],["for","bucket_quota_max_objects","formControlName","bucket_quota_max_objects","id","bucket_quota_max_objects","label","Maximum objects","cdRequiredField","Maximum objects",3,"min","invalid","invalidText"]]},template:function(t,_){1&t&&e.\u0275\u0275template(0,Dc,77,46,"div",81),2&t&&e.\u0275\u0275property("cdFormLoading",_.loading)},dependencies:[g.NgClass,g.NgForOf,g.NgIf,_t.N,oe.e,ie.O,uo.e,Ct.B,go.Y,St.G,j.S,ne.E,Qe.P,l.\u0275NgNoValidate,l.NgSelectOption,l.\u0275NgSelectMultipleOption,l.DefaultValueAccessor,l.NgControlStatus,l.NgControlStatusGroup,l.FormGroupDirective,l.FormControlName,b.NgbTooltip,c.ColumnDirective,c.RowDirective,c.Button,c.IconButton,c.IconDirective,c.TextInputLabelComponent,c.PasswordInputLabelComponent,c.TextInput,c.PasswordInput,c.Checkbox,c.NumberComponent,c.ComboBox,c.DropdownList,c.Select,c.Option,ft,g.TitleCasePipe,Oe.r,Fs.N]})}}var Wc=T(47782),xc=T(72358);const wc=["accessKeyTpl"],Uc=["secretKeyTpl"],kc=()=>({read:!0});function zc(o,n){if(1&o){const t=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"div")(1,"legend"),e.\u0275\u0275i18n(2,8),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(3,"cd-table",38),e.\u0275\u0275listener("updateSelection",function(i){e.\u0275\u0275restoreView(t);const a=e.\u0275\u0275nextContext(3);return e.\u0275\u0275resetView(a.updateKeysSelection(i))}),e.\u0275\u0275element(4,"cd-table-actions",39),e.\u0275\u0275elementEnd()()}if(2&o){const t=e.\u0275\u0275nextContext(3);e.\u0275\u0275advance(3),e.\u0275\u0275property("data",t.keys)("columns",t.keysColumns),e.\u0275\u0275advance(),e.\u0275\u0275property("permission",e.\u0275\u0275pureFunction0(5,kc))("selection",t.selection)("tableActions",t.tableAction)}}function Hc(o,n){if(1&o&&(e.\u0275\u0275elementStart(0,"tr")(1,"td",37),e.\u0275\u0275i18n(2,9),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(3,"td"),e.\u0275\u0275text(4),e.\u0275\u0275elementEnd()()),2&o){const t=e.\u0275\u0275nextContext(3);e.\u0275\u0275advance(4),e.\u0275\u0275textInterpolate(t.user.email)}}function Xc(o,n){if(1&o&&(e.\u0275\u0275elementStart(0,"tr")(1,"td",37),e.\u0275\u0275i18n(2,10),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(3,"td"),e.\u0275\u0275i18n(4,11),e.\u0275\u0275elementEnd()()),2&o){const t=e.\u0275\u0275nextContext(3);e.\u0275\u0275advance(4),e.\u0275\u0275i18nExp(t.extractPolicyNamesFromArns(t.user.managed_user_policies)),e.\u0275\u0275i18nApply(4)}}function Bc(o,n){if(1&o&&(e.\u0275\u0275elementStart(0,"div"),e.\u0275\u0275text(1),e.\u0275\u0275elementEnd()),2&o){const t=n.$implicit;e.\u0275\u0275advance(),e.\u0275\u0275textInterpolate2(" ",t.id," (",t.permissions,") ")}}function Vc(o,n){if(1&o&&(e.\u0275\u0275elementStart(0,"tr")(1,"td",37),e.\u0275\u0275i18n(2,12),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(3,"td"),e.\u0275\u0275template(4,Bc,2,2,"div",40),e.\u0275\u0275elementEnd()()),2&o){const t=e.\u0275\u0275nextContext(3);e.\u0275\u0275advance(4),e.\u0275\u0275property("ngForOf",t.user.subusers)}}function Zc(o,n){if(1&o&&(e.\u0275\u0275elementStart(0,"div"),e.\u0275\u0275text(1),e.\u0275\u0275elementEnd()),2&o){const t=n.$implicit;e.\u0275\u0275advance(),e.\u0275\u0275textInterpolate2("",t.type," (",t.perm,")")}}function Kc(o,n){if(1&o&&(e.\u0275\u0275elementStart(0,"tr")(1,"td",37),e.\u0275\u0275i18n(2,13),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(3,"td"),e.\u0275\u0275template(4,Zc,2,2,"div",40),e.\u0275\u0275elementEnd()()),2&o){const t=e.\u0275\u0275nextContext(3);e.\u0275\u0275advance(4),e.\u0275\u0275property("ngForOf",t.user.caps)}}function qc(o,n){if(1&o&&(e.\u0275\u0275elementStart(0,"tr")(1,"td",37),e.\u0275\u0275i18n(2,14),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(3,"td"),e.\u0275\u0275text(4),e.\u0275\u0275pipe(5,"join"),e.\u0275\u0275elementEnd()()),2&o){const t=e.\u0275\u0275nextContext(3);e.\u0275\u0275advance(4),e.\u0275\u0275textInterpolate(e.\u0275\u0275pipeBind1(5,1,t.user.mfa_ids))}}function jc(o,n){if(1&o&&(e.\u0275\u0275elementContainerStart(0),e.\u0275\u0275elementStart(1,"legend"),e.\u0275\u0275i18n(2,15),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(3,"table",41)(4,"tbody")(5,"tr")(6,"td",35),e.\u0275\u0275i18n(7,16),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(8,"td",36),e.\u0275\u0275text(9),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(10,"tr")(11,"td",35),e.\u0275\u0275i18n(12,17),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(13,"td",36),e.\u0275\u0275text(14),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(15,"tr")(16,"td",35),e.\u0275\u0275i18n(17,18),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(18,"td",36),e.\u0275\u0275text(19),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(20,"tr")(21,"td",35),e.\u0275\u0275i18n(22,19),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(23,"td",36),e.\u0275\u0275i18n(24,20),e.\u0275\u0275elementEnd()()()(),e.\u0275\u0275elementContainerEnd()),2&o){const t=e.\u0275\u0275nextContext(3);e.\u0275\u0275advance(9),e.\u0275\u0275textInterpolate(null==t.selection.account?null:t.selection.account.id),e.\u0275\u0275advance(5),e.\u0275\u0275textInterpolate(null==t.selection.account?null:t.selection.account.name),e.\u0275\u0275advance(5),e.\u0275\u0275textInterpolate((null==t.selection.account?null:t.selection.account.tenant)||"-"),e.\u0275\u0275advance(5),e.\u0275\u0275i18nExp("root"===(null==t.user?null:t.user.type)?"Account root user":"rgw user"),e.\u0275\u0275i18nApply(24)}}function Yc(o,n){1&o&&(e.\u0275\u0275elementStart(0,"td"),e.\u0275\u0275text(1,"-"),e.\u0275\u0275elementEnd())}function Qc(o,n){1&o&&(e.\u0275\u0275elementStart(0,"td"),e.\u0275\u0275i18n(1,25),e.\u0275\u0275elementEnd())}function Jc(o,n){if(1&o&&(e.\u0275\u0275elementStart(0,"td"),e.\u0275\u0275text(1),e.\u0275\u0275pipe(2,"dimlessBinary"),e.\u0275\u0275elementEnd()),2&o){const t=e.\u0275\u0275nextContext(4);e.\u0275\u0275advance(),e.\u0275\u0275textInterpolate1(" ",e.\u0275\u0275pipeBind1(2,1,t.user.user_quota.max_size)," ")}}function ed(o,n){1&o&&(e.\u0275\u0275elementStart(0,"td"),e.\u0275\u0275text(1,"-"),e.\u0275\u0275elementEnd())}function td(o,n){1&o&&(e.\u0275\u0275elementStart(0,"td"),e.\u0275\u0275i18n(1,26),e.\u0275\u0275elementEnd())}function nd(o,n){if(1&o&&(e.\u0275\u0275elementStart(0,"td"),e.\u0275\u0275text(1),e.\u0275\u0275elementEnd()),2&o){const t=e.\u0275\u0275nextContext(4);e.\u0275\u0275advance(),e.\u0275\u0275textInterpolate1(" ",t.user.user_quota.max_objects," ")}}function od(o,n){if(1&o&&(e.\u0275\u0275elementStart(0,"div")(1,"legend"),e.\u0275\u0275i18n(2,21),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(3,"table",34)(4,"tbody")(5,"tr")(6,"td",35),e.\u0275\u0275i18n(7,22),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(8,"td",36),e.\u0275\u0275text(9),e.\u0275\u0275pipe(10,"booleanText"),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(11,"tr")(12,"td",37),e.\u0275\u0275i18n(13,23),e.\u0275\u0275elementEnd(),e.\u0275\u0275template(14,Yc,2,0,"td",33)(15,Qc,2,0,"td",33)(16,Jc,3,3,"td",33),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(17,"tr")(18,"td",37),e.\u0275\u0275i18n(19,24),e.\u0275\u0275elementEnd(),e.\u0275\u0275template(20,ed,2,0,"td",33)(21,td,2,0,"td",33)(22,nd,2,1,"td",33),e.\u0275\u0275elementEnd()()()()),2&o){const t=e.\u0275\u0275nextContext(3);e.\u0275\u0275advance(9),e.\u0275\u0275textInterpolate(e.\u0275\u0275pipeBind1(10,7,t.user.user_quota.enabled)),e.\u0275\u0275advance(5),e.\u0275\u0275property("ngIf",!t.user.user_quota.enabled),e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf",t.user.user_quota.enabled&&t.user.user_quota.max_size<=-1),e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf",t.user.user_quota.enabled&&t.user.user_quota.max_size>-1),e.\u0275\u0275advance(4),e.\u0275\u0275property("ngIf",!t.user.user_quota.enabled),e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf",t.user.user_quota.enabled&&t.user.user_quota.max_objects<=-1),e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf",t.user.user_quota.enabled&&t.user.user_quota.max_objects>-1)}}function _d(o,n){1&o&&(e.\u0275\u0275elementStart(0,"td"),e.\u0275\u0275text(1,"-"),e.\u0275\u0275elementEnd())}function id(o,n){1&o&&(e.\u0275\u0275elementStart(0,"td"),e.\u0275\u0275i18n(1,31),e.\u0275\u0275elementEnd())}function ad(o,n){if(1&o&&(e.\u0275\u0275elementStart(0,"td"),e.\u0275\u0275text(1),e.\u0275\u0275pipe(2,"dimlessBinary"),e.\u0275\u0275elementEnd()),2&o){const t=e.\u0275\u0275nextContext(4);e.\u0275\u0275advance(),e.\u0275\u0275textInterpolate1(" ",e.\u0275\u0275pipeBind1(2,1,t.user.bucket_quota.max_size)," ")}}function rd(o,n){1&o&&(e.\u0275\u0275elementStart(0,"td"),e.\u0275\u0275text(1,"-"),e.\u0275\u0275elementEnd())}function ld(o,n){1&o&&(e.\u0275\u0275elementStart(0,"td"),e.\u0275\u0275i18n(1,32),e.\u0275\u0275elementEnd())}function sd(o,n){if(1&o&&(e.\u0275\u0275elementStart(0,"td"),e.\u0275\u0275text(1),e.\u0275\u0275elementEnd()),2&o){const t=e.\u0275\u0275nextContext(4);e.\u0275\u0275advance(),e.\u0275\u0275textInterpolate1(" ",t.user.bucket_quota.max_objects," ")}}function cd(o,n){if(1&o&&(e.\u0275\u0275elementStart(0,"div")(1,"legend"),e.\u0275\u0275i18n(2,27),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(3,"table",34)(4,"tbody")(5,"tr")(6,"td",35),e.\u0275\u0275i18n(7,28),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(8,"td",36),e.\u0275\u0275text(9),e.\u0275\u0275pipe(10,"booleanText"),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(11,"tr")(12,"td",37),e.\u0275\u0275i18n(13,29),e.\u0275\u0275elementEnd(),e.\u0275\u0275template(14,_d,2,0,"td",33)(15,id,2,0,"td",33)(16,ad,3,3,"td",33),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(17,"tr")(18,"td",37),e.\u0275\u0275i18n(19,30),e.\u0275\u0275elementEnd(),e.\u0275\u0275template(20,rd,2,0,"td",33)(21,ld,2,0,"td",33)(22,sd,2,1,"td",33),e.\u0275\u0275elementEnd()()()()),2&o){const t=e.\u0275\u0275nextContext(3);e.\u0275\u0275advance(9),e.\u0275\u0275textInterpolate(e.\u0275\u0275pipeBind1(10,7,t.user.bucket_quota.enabled)),e.\u0275\u0275advance(5),e.\u0275\u0275property("ngIf",!t.user.bucket_quota.enabled),e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf",t.user.bucket_quota.enabled&&t.user.bucket_quota.max_size<=-1),e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf",t.user.bucket_quota.enabled&&t.user.bucket_quota.max_size>-1),e.\u0275\u0275advance(4),e.\u0275\u0275property("ngIf",!t.user.bucket_quota.enabled),e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf",t.user.bucket_quota.enabled&&t.user.bucket_quota.max_objects<=-1),e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf",t.user.bucket_quota.enabled&&t.user.bucket_quota.max_objects>-1)}}function dd(o,n){if(1&o&&(e.\u0275\u0275elementStart(0,"div"),e.\u0275\u0275element(1,"cd-rgw-rate-limit-details",42),e.\u0275\u0275elementEnd()),2&o){const t=e.\u0275\u0275nextContext(3);e.\u0275\u0275advance(),e.\u0275\u0275property("rateLimitConfig",t.user.user_ratelimit)("type","user")}}function ud(o,n){if(1&o&&(e.\u0275\u0275elementStart(0,"div"),e.\u0275\u0275template(1,zc,5,6,"div",33),e.\u0275\u0275elementStart(2,"legend"),e.\u0275\u0275i18n(3,0),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(4,"table",34)(5,"tbody")(6,"tr")(7,"td",35),e.\u0275\u0275i18n(8,1),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(9,"td",36),e.\u0275\u0275text(10),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(11,"tr")(12,"td",35),e.\u0275\u0275i18n(13,2),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(14,"td",36),e.\u0275\u0275text(15),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(16,"tr")(17,"td",35),e.\u0275\u0275i18n(18,3),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(19,"td",36),e.\u0275\u0275text(20),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(21,"tr")(22,"td",37),e.\u0275\u0275i18n(23,4),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(24,"td"),e.\u0275\u0275text(25),e.\u0275\u0275elementEnd()(),e.\u0275\u0275template(26,Hc,5,1,"tr",33),e.\u0275\u0275elementStart(27,"tr")(28,"td",37),e.\u0275\u0275i18n(29,5),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(30,"td"),e.\u0275\u0275text(31),e.\u0275\u0275pipe(32,"booleanText"),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(33,"tr")(34,"td",37),e.\u0275\u0275i18n(35,6),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(36,"td"),e.\u0275\u0275text(37),e.\u0275\u0275pipe(38,"booleanText"),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(39,"tr")(40,"td",37),e.\u0275\u0275i18n(41,7),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(42,"td"),e.\u0275\u0275text(43),e.\u0275\u0275pipe(44,"map"),e.\u0275\u0275elementEnd()(),e.\u0275\u0275template(45,Xc,5,1,"tr")(46,Vc,5,1,"tr",33)(47,Kc,5,1,"tr",33)(48,qc,6,3,"tr",33),e.\u0275\u0275elementEnd()(),e.\u0275\u0275template(49,jc,25,4,"ng-container",33)(50,od,23,9,"div",33)(51,cd,23,9,"div",33)(52,dd,2,2,"div",33),e.\u0275\u0275elementEnd()),2&o){const t=e.\u0275\u0275nextContext(2);e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf",t.keys.length),e.\u0275\u0275advance(9),e.\u0275\u0275textInterpolate(t.user.tenant),e.\u0275\u0275advance(5),e.\u0275\u0275textInterpolate(t.user.uid),e.\u0275\u0275advance(5),e.\u0275\u0275textInterpolate(t.user.uid),e.\u0275\u0275advance(5),e.\u0275\u0275textInterpolate(t.user.display_name),e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf",null==t.user.email?null:t.user.email.length),e.\u0275\u0275advance(5),e.\u0275\u0275textInterpolate(e.\u0275\u0275pipeBind1(32,17,t.user.suspended)),e.\u0275\u0275advance(6),e.\u0275\u0275textInterpolate(e.\u0275\u0275pipeBind1(38,19,t.user.system)),e.\u0275\u0275advance(6),e.\u0275\u0275textInterpolate(e.\u0275\u0275pipeBind2(44,21,t.user.max_buckets,t.maxBucketsMap)),e.\u0275\u0275advance(2),e.\u0275\u0275conditional("rgw"===t.user.type&&null!=t.selection.account&&t.selection.account.id?45:-1),e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf",t.user.subusers&&t.user.subusers.length),e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf",t.user.caps&&t.user.caps.length),e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf",null==t.user.mfa_ids?null:t.user.mfa_ids.length),e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf",t.selection.account&&(null==t.selection.account?null:t.selection.account.id)),e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf",t.user.user_quota),e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf",t.user.bucket_quota),e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf",t.user.user_ratelimit)}}function pd(o,n){if(1&o&&(e.\u0275\u0275elementContainerStart(0),e.\u0275\u0275template(1,ud,53,24,"div",33),e.\u0275\u0275elementContainerEnd()),2&o){const t=e.\u0275\u0275nextContext();e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf",t.user)}}class vn{constructor(n,t){this.rgwUserService=n,this.cdsModalService=t,this.keys=[],this.keysColumns=[],this.keysSelection=new Ge.y,this.tableAction=[],this.icons=L.FI}ngOnInit(){this.keysColumns=[{name:$localize`Username`,prop:"username",flexGrow:1},{name:$localize`Type`,prop:"type",flexGrow:1}],this.maxBucketsMap={"-1":$localize`Disabled`,0:$localize`Unlimited`}}ngOnChanges(){this.tableAction=[{name:$localize`Show`,permission:"read",click:()=>this.showKeyModal(),icon:L.FI.show}],this.selection&&(this.user=this.selection,this.user.subusers=N().sortBy(this.user.subusers,"id"),this.user.caps=N().sortBy(this.user.caps,"type"),this.rgwUserService.getQuota(this.user.uid).subscribe(n=>{N().extend(this.user,n)}),this.rgwUserService.getUserRateLimit(this.user.uid).subscribe(n=>{N().extend(this.user,n)}),this.keys=[],this.user.keys&&this.user.keys.forEach(n=>{this.keys.push({id:this.keys.length+1,type:"S3",username:n.user,ref:n})}),this.user.swift_keys&&this.user.swift_keys.forEach(n=>{this.keys.push({id:this.keys.length+1,type:"Swift",username:n.user,ref:n})}),this.keys=N().sortBy(this.keys,"user"))}updateKeysSelection(n){this.keysSelection=n}showKeyModal(){const n=this.keysSelection.first(),t=this.cdsModalService.show("S3"===n.type?zt:Ht);switch(n.type){case"S3":t.setViewing(),t.setValues(n.ref.user,n.ref.access_key,n.ref.secret_key);break;case"Swift":t.setValues(n.ref.user,n.ref.secret_key)}}extractPolicyNamesFromArns(n){return n&&0!==n.length?n.map(t=>t.trim().split("/").pop()).filter(Boolean).join(", "):"-"}static{this.\u0275fac=function(t){return new(t||vn)(e.\u0275\u0275directiveInject(Rt.p),e.\u0275\u0275directiveInject(he.V))}}static{this.\u0275cmp=e.\u0275\u0275defineComponent({type:vn,selectors:[["cd-rgw-user-details"]],viewQuery:function(t,_){if(1&t&&(e.\u0275\u0275viewQuery(wc,5),e.\u0275\u0275viewQuery(Uc,5)),2&t){let i;e.\u0275\u0275queryRefresh(i=e.\u0275\u0275loadQuery())&&(_.accessKeyTpl=i.first),e.\u0275\u0275queryRefresh(i=e.\u0275\u0275loadQuery())&&(_.secretKeyTpl=i.first)}},inputs:{selection:"selection"},features:[e.\u0275\u0275NgOnChangesFeature],decls:1,vars:1,consts:()=>{let n,t,_,i,a,r,s,d,u,m,C,O,f,I,R,h,G,U,k,y,H,X,B,V,S,P,ee,Q,q,J,$,_e,D;return n=$localize`:␟4f8b2bb476981727ab34ed40fde1218361f92c45␟5028777105388019087:Details`,t=$localize`:␟a94e6b2b5b834d92cceb90037d51ad6165c8b619␟4363143805416924501:Tenant`,_=$localize`:␟83c4d4d764d2e2725ab8e919ec16ac400e1f290a␟2128755808672960949:User ID`,i=$localize`:␟08c74dc9762957593b91f6eb5d65efdfc975bf48␟5248717555542428023:Username`,a=$localize`:␟b760f123248930122fc7e7b6b6bf94e376e959c8␟8301535046747035390:Full name`,r=$localize`:␟92f3f203270a29b3001871153f02c063484a1574␟5851424994801012357:Suspended`,s=$localize`:␟5567ff08d40c291adc42a531ec5a4e5a79b8025d␟2953732570143548679:System user`,d=$localize`:␟db18a2772988415466a7f75dc42663ce78c9c1d3␟394399240244610442:Maximum buckets`,u=$localize`:␟0bcd5ef19af0f1b814141ca8c57df623d8270088␟2850704758582178666:Keys`,m=$localize`:␟69b6ac577a19acc39fc0c22342092f327fff2529␟3967269098753656610:Email address`,C=$localize`:␟923fedda3a6df6e1562d5c5d7d3f4c109900d44d␟4700392011254709583:Managed policies`,O=$localize`:␟b8bfce49911abfd38c3798964ed270b3b78310a8␟3480187159082870768:${"\ufffd0\ufffd"}:INTERPOLATION:`,f=$localize`:␟2c4c62e8ba24601be5cfe7dc5d32c24bbbd4b53c␟456730418941209:Subusers`,I=$localize`:␟17bb3082e6fe5003203ef992a3714172334631a1␟2680037700420002636:Capabilities`,R=$localize`:␟32f8a0570373cacb9c56cf227502483a29d605bc␟1512746142227363718:MFAs(Id)`,h=$localize`:␟56e509da8c300e3942dd9a9af79f4edfbab1b4de␟3362041682064186624:Account Details`,G=$localize`:␟bc53583e9b147e117be82c6bbec021d66ea8b549␟8636086114930438800:Account ID`,U=$localize`:␟cff1428d10d59d14e45edec3c735a27b5482db59␟8953033926734869941:Name`,k=$localize`:␟a94e6b2b5b834d92cceb90037d51ad6165c8b619␟4363143805416924501:Tenant`,y=$localize`:␟ca969f9dffc7367f35bf01f3beca25d623bb13f0␟289639064136769985:User type`,H=$localize`:␟43a83c61e8137503044635f3b61600d38f6c0471␟7970122696855953472:${"\ufffd0\ufffd"}:INTERPOLATION:`,X=$localize`:␟36ad38f9c1a1485e09b67778a28af84553290ffb␟5261714758222747685:User quota`,B=$localize`:␟f50a33d3c339f8f4a465141f8caa5d2d8c005251␟4816216590591222133:Enabled`,V=$localize`:␟cef1595d040e77cbb4466e60382028d4c2040cac␟5921515272395118682:Maximum size`,S=$localize`:␟ee862a800364b4d11f9b8cb9955a28a60f840a45␟868710308722667739:Maximum objects`,P=$localize`:␟aac0ea26057df2758399b237ff0bf350a098ccff␟2054648959727872404: Unlimited `,ee=$localize`:␟aac0ea26057df2758399b237ff0bf350a098ccff␟2054648959727872404: Unlimited `,Q=$localize`:␟649a410bd0ace333d067d8fa22f12bdbdb43533b␟3048195452916484333:Bucket quota`,q=$localize`:␟f50a33d3c339f8f4a465141f8caa5d2d8c005251␟4816216590591222133:Enabled`,J=$localize`:␟cef1595d040e77cbb4466e60382028d4c2040cac␟5921515272395118682:Maximum size`,$=$localize`:␟ee862a800364b4d11f9b8cb9955a28a60f840a45␟868710308722667739:Maximum objects`,_e=$localize`:␟aac0ea26057df2758399b237ff0bf350a098ccff␟2054648959727872404: Unlimited `,D=$localize`:␟aac0ea26057df2758399b237ff0bf350a098ccff␟2054648959727872404: Unlimited `,[n,t,_,i,a,r,s,d,u,m,C,O,f,I,R,h,G,U,k,y,H,X,B,V,S,P,ee,Q,q,J,$,_e,D,[4,"ngIf"],[1,"cds--data-table--sort","cds--data-table--no-border","cds--data-table","cds--data-table--md"],[1,"bold","w-25"],[1,"w-75"],[1,"bold"],["columnMode","flex","selectionType","single","forceIdentifier","true",3,"updateSelection","data","columns"],[1,"table-actions",3,"permission","selection","tableActions"],[4,"ngFor","ngForOf"],["id","accountsDetails",1,"cds--data-table--sort","cds--data-table--no-border","cds--data-table","cds--data-table--md"],[3,"rateLimitConfig","type"]]},template:function(t,_){1&t&&e.\u0275\u0275template(0,pd,2,1,"ng-container",33),2&t&&e.\u0275\u0275property("ngIf",_.selection)},dependencies:[g.NgForOf,g.NgIf,ae.O,$e.j,Ut,po.s,xt.l,Wc.r,xc.r]})}}const Eo=()=>({exact:!0});class Bt{static{this.\u0275fac=function(t){return new(t||Bt)}}static{this.\u0275cmp=e.\u0275\u0275defineComponent({type:Bt,selectors:[["cd-rgw-user-tabs"]],decls:10,vars:6,consts:()=>{let n,t,_;return n=$localize`:␟4d13a9cd5ed3dcee0eab22cb25198d43886942be␟4555457172864212828:Users`,t=$localize`:␟4fe84c1d0eef5726c017f64c691145db7a61f879␟5016419499983434110:Accounts`,_=$localize`:␟9610487cbeb5796d34d8601b5ac0c0a65f9e1d19␟795890916060309463:Roles`,[n,t,_,[1,"nav","nav-tabs"],[1,"nav-item"],["routerLink","/rgw/user","routerLinkActive","active","ariaCurrentWhenActive","page",1,"nav-link",3,"routerLinkActiveOptions"],["routerLink","/rgw/accounts","routerLinkActive","active","ariaCurrentWhenActive","page",1,"nav-link",3,"routerLinkActiveOptions"],["routerLink","/rgw/roles","routerLinkActive","active","ariaCurrentWhenActive","page",1,"nav-link",3,"routerLinkActiveOptions"]]},template:function(t,_){1&t&&(e.\u0275\u0275elementStart(0,"ul",3)(1,"li",4)(2,"a",5),e.\u0275\u0275i18n(3,0),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(4,"li",4)(5,"a",6),e.\u0275\u0275i18n(6,1),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(7,"li",4)(8,"a",7),e.\u0275\u0275i18n(9,2),e.\u0275\u0275elementEnd()()()),2&t&&(e.\u0275\u0275advance(2),e.\u0275\u0275property("routerLinkActiveOptions",e.\u0275\u0275pureFunction0(3,Eo)),e.\u0275\u0275advance(3),e.\u0275\u0275property("routerLinkActiveOptions",e.\u0275\u0275pureFunction0(4,Eo)),e.\u0275\u0275advance(3),e.\u0275\u0275property("routerLinkActiveOptions",e.\u0275\u0275pureFunction0(5,Eo)))},dependencies:[Y.RouterLink,Y.RouterLinkActive]})}}const md=["userSizeTpl"],Td=["userObjectTpl"],gd=["usernameTpl"];function Ed(o,n){if(1&o&&e.\u0275\u0275element(0,"cd-rgw-user-details",12),2&o){const t=e.\u0275\u0275nextContext();e.\u0275\u0275property("selection",t.expandedRow)}}function Rd(o,n){if(1&o&&e.\u0275\u0275element(0,"cd-usage-bar",14),2&o){const t=e.\u0275\u0275nextContext().data.row;e.\u0275\u0275property("total",t.user_quota.max_size)("used",t.stats.size_actual)}}function Cd(o,n){1&o&&e.\u0275\u0275i18n(0,6)}function fd(o,n){if(1&o&&e.\u0275\u0275template(0,Rd,1,2,"cd-usage-bar",13)(1,Cd,1,0,"ng-template",null,4,e.\u0275\u0275templateRefExtractor),2&o){const t=n.data.row,_=e.\u0275\u0275reference(2);e.\u0275\u0275property("ngIf",t.user_quota.max_size>0&&t.user_quota.enabled)("ngIfElse",_)}}function Sd(o,n){if(1&o&&e.\u0275\u0275element(0,"cd-usage-bar",16),2&o){const t=e.\u0275\u0275nextContext().data.row;e.\u0275\u0275property("total",t.user_quota.max_objects)("used",t.stats.num_objects)("isBinary",!1)}}function Fd(o,n){1&o&&e.\u0275\u0275i18n(0,7)}function Md(o,n){if(1&o&&e.\u0275\u0275template(0,Sd,1,3,"cd-usage-bar",15)(1,Fd,1,0,"ng-template",null,5,e.\u0275\u0275templateRefExtractor),2&o){const t=n.data.row,_=e.\u0275\u0275reference(2);e.\u0275\u0275property("ngIf",t.user_quota.max_objects>0&&t.user_quota.enabled)("ngIfElse",_)}}function Pd(o,n){if(1&o&&(e.\u0275\u0275elementStart(0,"cds-tooltip",18),e.\u0275\u0275namespaceSVG(),e.\u0275\u0275element(1,"svg",19),e.\u0275\u0275elementEnd()),2&o){const t=e.\u0275\u0275nextContext(2);e.\u0275\u0275property("description","Account root user")("align","top"),e.\u0275\u0275advance(),e.\u0275\u0275property("cdsIcon",t.icons.userAccessLocked)("size",t.icons.size16)}}function Id(o,n){if(1&o&&(e.\u0275\u0275elementStart(0,"div",17)(1,"span"),e.\u0275\u0275i18n(2,8),e.\u0275\u0275elementEnd(),e.\u0275\u0275template(3,Pd,2,4,"cds-tooltip",18),e.\u0275\u0275elementEnd()),2&o){const t=n.data.row;e.\u0275\u0275advance(2),e.\u0275\u0275i18nExp(t.uid),e.\u0275\u0275i18nApply(2),e.\u0275\u0275advance(),e.\u0275\u0275conditional("root"===t.type?3:-1)}}class Ln extends et.D{constructor(n,t,_,i,a,r,s){super(r),this.authStorageService=n,this.rgwUserService=t,this.modalService=_,this.urlBuilder=i,this.actionLabels=a,this.ngZone=r,this.rgwUserAccountService=s,this.columns=[],this.users=[],this.selection=new Ge.y,this.userDataSubject=new w.Subject,this.icons=L.FI}ngOnInit(){this.permission=this.authStorageService.getPermissions().rgw,this.columns=[{name:$localize`Username`,prop:"uid",flexGrow:1,cellTemplate:this.usernameTpl},{name:$localize`Tenant`,prop:"tenant",flexGrow:1},{name:$localize`Account name`,prop:"account.name",flexGrow:1},{name:$localize`Full name`,prop:"display_name",flexGrow:1},{name:$localize`Email address`,prop:"email",flexGrow:1},{name:$localize`Suspended`,prop:"suspended",flexGrow:1,cellClass:"text-center",cellTransformation:He.x.checkIcon},{name:$localize`Max. buckets`,prop:"max_buckets",flexGrow:1,cellTransformation:He.x.map,customTemplateConfig:{"-1":$localize`Disabled`,0:$localize`Unlimited`}},{name:$localize`Capacity Limit %`,prop:"size_usage",cellTemplate:this.userSizeTpl,flexGrow:.8},{name:$localize`Object Limit %`,prop:"object_usage",cellTemplate:this.userObjectTpl,flexGrow:.8}],this.userDataSubject.pipe((0,Z.switchMap)(a=>this.rgwUserAccountService.list(!0))).subscribe(a=>{this.userAccounts=a,this.mapUsersWithAccount()});const n=()=>this.selection.first()&&`${encodeURIComponent(this.selection.first().uid)}`,t={permission:"create",icon:L.FI.add,routerLink:()=>this.urlBuilder.getCreate(),name:this.actionLabels.CREATE,canBePrimary:a=>!a.hasSelection},_={permission:"update",icon:L.FI.edit,routerLink:()=>this.urlBuilder.getEdit(n()),name:this.actionLabels.EDIT},i={permission:"delete",icon:L.FI.destroy,click:()=>this.deleteAction(),disable:()=>!this.selection.hasSelection,name:this.actionLabels.DELETE};this.tableActions=[t,_,i],this.setTableRefreshTimeout()}getUserList(n){this.setTableRefreshTimeout(),this.rgwUserService.list().subscribe(t=>{this.users=t,this.userDataSubject.next(t)},()=>{n.error()})}mapUsersWithAccount(){this.users=this.users.map(n=>({account:this.userAccounts.find(_=>_.id===n.account_id)||{name:""},...n}))}updateSelection(n){this.selection=n}deleteAction(){this.modalService.show(Ue.D,{impact:bo.r.high,itemDescription:this.selection.hasSingleSelection?$localize`user`:$localize`users`,itemNames:this.selection.selected.map(n=>n.uid),submitActionObservable:()=>new w.Observable(n=>{(0,w.forkJoin)(this.selection.selected.map(t=>this.rgwUserService.delete(t.uid))).subscribe({error:t=>{n.error(t),this.table.refreshBtn()},complete:()=>{n.complete(),this.table.refreshBtn()}})})})}static{this.\u0275fac=function(t){return new(t||Ln)(e.\u0275\u0275directiveInject(be.v),e.\u0275\u0275directiveInject(Rt.p),e.\u0275\u0275directiveInject(he.V),e.\u0275\u0275directiveInject(se.E),e.\u0275\u0275directiveInject(M.Ss),e.\u0275\u0275directiveInject(e.NgZone),e.\u0275\u0275directiveInject(Je))}}static{this.\u0275cmp=e.\u0275\u0275defineComponent({type:Ln,selectors:[["cd-rgw-user-list"]],viewQuery:function(t,_){if(1&t&&(e.\u0275\u0275viewQuery(ae.O,7),e.\u0275\u0275viewQuery(md,7),e.\u0275\u0275viewQuery(Td,7),e.\u0275\u0275viewQuery(gd,7)),2&t){let i;e.\u0275\u0275queryRefresh(i=e.\u0275\u0275loadQuery())&&(_.table=i.first),e.\u0275\u0275queryRefresh(i=e.\u0275\u0275loadQuery())&&(_.userSizeTpl=i.first),e.\u0275\u0275queryRefresh(i=e.\u0275\u0275loadQuery())&&(_.userObjectTpl=i.first),e.\u0275\u0275queryRefresh(i=e.\u0275\u0275loadQuery())&&(_.usernameTpl=i.first)}},features:[e.\u0275\u0275ProvidersFeature([{provide:se.E,useValue:new se.E("rgw/user")}]),e.\u0275\u0275InheritDefinitionFeature],decls:11,vars:8,consts:()=>{let n,t,_;return n=$localize`:␟9c338bae89822d7eefbc9a887c458a7d8a98e55e␟2378102027773585685:No Limit`,t=$localize`:␟9c338bae89822d7eefbc9a887c458a7d8a98e55e␟2378102027773585685:No Limit`,_=$localize`:␟018c2de0978ec2bea26c69006be18e6296ecd04d␟2825857459955718680:${"\ufffd0\ufffd"}:INTERPOLATION:`,[["table",""],["userSizeTpl",""],["userObjectTpl",""],["usernameTpl",""],["noSizeQuota",""],["noObjectQuota",""],n,t,_,["columnMode","flex","selectionType","single","identifier","uid",3,"setExpandedRow","updateSelection","fetchData","autoReload","data","columns","hasDetails","status"],[1,"table-actions",3,"permission","selection","tableActions"],[3,"selection",4,"cdTableDetail"],[3,"selection"],[3,"total","used",4,"ngIf","ngIfElse"],[3,"total","used"],[3,"total","used","isBinary",4,"ngIf","ngIfElse"],[3,"total","used","isBinary"],["cdsRow",""],[3,"description","align"],[1,"account-root-icon",3,"cdsIcon","size"]]},template:function(t,_){if(1&t){const i=e.\u0275\u0275getCurrentView();e.\u0275\u0275element(0,"cd-rgw-user-tabs"),e.\u0275\u0275elementStart(1,"cd-table",9,0),e.\u0275\u0275listener("setExpandedRow",function(r){return e.\u0275\u0275restoreView(i),e.\u0275\u0275resetView(_.setExpandedRow(r))})("updateSelection",function(r){return e.\u0275\u0275restoreView(i),e.\u0275\u0275resetView(_.updateSelection(r))})("fetchData",function(r){return e.\u0275\u0275restoreView(i),e.\u0275\u0275resetView(_.getUserList(r))}),e.\u0275\u0275element(3,"cd-table-actions",10),e.\u0275\u0275template(4,Ed,1,1,"cd-rgw-user-details",11),e.\u0275\u0275elementEnd(),e.\u0275\u0275template(5,fd,3,2,"ng-template",null,1,e.\u0275\u0275templateRefExtractor)(7,Md,3,2,"ng-template",null,2,e.\u0275\u0275templateRefExtractor)(9,Id,4,2,"ng-template",null,3,e.\u0275\u0275templateRefExtractor)}2&t&&(e.\u0275\u0275advance(),e.\u0275\u0275property("autoReload",!1)("data",_.users)("columns",_.columns)("hasDetails",!0)("status",_.tableStatus),e.\u0275\u0275advance(2),e.\u0275\u0275property("permission",_.permission)("selection",_.selection)("tableActions",_.tableActions))},dependencies:[g.NgIf,Ko.o,ae.O,$e.j,ot.N,c.RowDirective,c.IconDirective,c.Tooltip,vn,Bt],styles:[".account-root-icon[_ngcontent-%COMP%]{margin-left:.5rem}"]})}}var It=T(19830),At=T(20961),Vt=T(77867),Gd=T(15643),Fe=T(58384),z=T(24192),Ot=T(55472),Xe=T(69081),Be=T(10142),De=T(78708);function Nd(o,n){1&o&&(e.\u0275\u0275elementStart(0,"span",42),e.\u0275\u0275i18n(1,9),e.\u0275\u0275elementEnd())}function Ad(o,n){1&o&&(e.\u0275\u0275elementStart(0,"span",42),e.\u0275\u0275i18n(1,10),e.\u0275\u0275elementEnd())}function hd(o,n){1&o&&(e.\u0275\u0275elementStart(0,"span",42),e.\u0275\u0275i18n(1,11),e.\u0275\u0275elementEnd())}function bd(o,n){1&o&&(e.\u0275\u0275elementStart(0,"span",42),e.\u0275\u0275i18n(1,12),e.\u0275\u0275elementEnd())}function vd(o,n){1&o&&(e.\u0275\u0275elementStart(0,"span",42),e.\u0275\u0275i18n(1,13),e.\u0275\u0275elementEnd())}function Ld(o,n){1&o&&(e.\u0275\u0275elementStart(0,"span",42),e.\u0275\u0275i18n(1,14),e.\u0275\u0275elementEnd())}function yd(o,n){1&o&&(e.\u0275\u0275elementStart(0,"span",42),e.\u0275\u0275i18n(1,15),e.\u0275\u0275elementEnd())}function $d(o,n){1&o&&(e.\u0275\u0275elementStart(0,"span",42),e.\u0275\u0275i18n(1,16),e.\u0275\u0275elementEnd())}function Dd(o,n){1&o&&(e.\u0275\u0275elementStart(0,"span",42),e.\u0275\u0275i18n(1,17),e.\u0275\u0275elementEnd())}function Wd(o,n){1&o&&(e.\u0275\u0275elementStart(0,"span",42),e.\u0275\u0275i18n(1,18),e.\u0275\u0275elementEnd())}function xd(o,n){1&o&&(e.\u0275\u0275elementStart(0,"span",42),e.\u0275\u0275i18n(1,19),e.\u0275\u0275elementEnd())}class yn{constructor(n,t,_,i,a,r,s,d,u){this.activeModal=n,this.actionLabels=t,this.rgwMultisiteService=_,this.rgwZoneService=i,this.notificationService=a,this.rgwZonegroupService=r,this.rgwRealmService=s,this.rgwDaemonService=d,this.modalService=u,this.submitAction=new e.EventEmitter,this.multisiteInfo=[],this.createForm()}createForm(){this.multisiteMigrateForm=new Fe.$({realmName:new l.UntypedFormControl(null,{validators:[l.Validators.required,F.xQ.custom("uniqueName",n=>this.realmNames&&-1!==this.zoneNames.indexOf(n))]}),zonegroupName:new l.UntypedFormControl(null,{validators:[l.Validators.required,F.xQ.custom("uniqueName",n=>this.zonegroupNames&&-1!==this.zoneNames.indexOf(n))]}),zoneName:new l.UntypedFormControl(null,{validators:[l.Validators.required,F.xQ.custom("uniqueName",n=>this.zoneNames&&-1!==this.zoneNames.indexOf(n))]}),zone_endpoints:new l.UntypedFormControl(null,{validators:[F.xQ.url,l.Validators.required]}),zonegroup_endpoints:new l.UntypedFormControl(null,{validators:[F.xQ.url,l.Validators.required]}),username:new l.UntypedFormControl(null,{validators:[l.Validators.required]})})}ngOnInit(){this.realmList=void 0!==this.multisiteInfo[0]&&this.multisiteInfo[0].hasOwnProperty("realms")?this.multisiteInfo[0].realms:[],this.realmNames=this.realmList.map(n=>n.name),this.zonegroupList=void 0!==this.multisiteInfo[1]&&this.multisiteInfo[1].hasOwnProperty("zonegroups")?this.multisiteInfo[1].zonegroups:[],this.zonegroupNames=this.zonegroupList.map(n=>n.name),this.zoneList=void 0!==this.multisiteInfo[2]&&this.multisiteInfo[2].hasOwnProperty("zones")?this.multisiteInfo[2].zones:[],this.zoneNames=this.zoneList.map(n=>n.name)}submit(){const n=this.multisiteMigrateForm.value;this.realm=new z.SX,this.realm.name=n.realmName,this.zonegroup=new z.Oe,this.zonegroup.name=n.zonegroupName,this.zonegroup.endpoints=n.zonegroup_endpoints,this.zone=new z.$H,this.zone.name=n.zoneName,this.zone.endpoints=n.zone_endpoints,this.rgwMultisiteService.migrate(this.realm,this.zonegroup,this.zone,n.username).subscribe(()=>{this.rgwMultisiteService.setRestartGatewayMessage(!1),this.notificationService.show(x._.success,$localize`Migration done successfully`),this.submitAction.emit(),this.activeModal.close()},()=>{this.notificationService.show(x._.error,$localize`Migration failed`)})}static{this.\u0275fac=function(t){return new(t||yn)(e.\u0275\u0275directiveInject(b.NgbActiveModal),e.\u0275\u0275directiveInject(M.Ss),e.\u0275\u0275directiveInject(xe.A),e.\u0275\u0275directiveInject(At.w),e.\u0275\u0275directiveInject(te.J),e.\u0275\u0275directiveInject(ke.Z),e.\u0275\u0275directiveInject(It.$),e.\u0275\u0275directiveInject(ye.y),e.\u0275\u0275directiveInject(Vt.B))}}static{this.\u0275cmp=e.\u0275\u0275defineComponent({type:yn,selectors:[["cd-rgw-multisite-migrate"]],outputs:{submitAction:"submitAction"},decls:55,vars:15,consts:()=>{let n,t,_,i,a,r,s,d,u,m,C,O,f,I,R,h,G,U,k;return n=$localize`:form title␟e1fdfe60075b655202421a884d993ba69f77cee8␟5104495206821641744:Migrate Single Site to Multi-site ${"\ufffd#3\ufffd"}:START_TAG_CD_HELPER:${"\ufffd#4\ufffd"}:START_TAG_SPAN:Migrate from a single-site deployment with a default zone group and zone to a multi-site system${"\ufffd/#4\ufffd"}:CLOSE_TAG_SPAN:${"\ufffd/#3\ufffd"}:CLOSE_TAG_CD_HELPER:`,t=$localize`:␟1b5ae35d753824820b370dc45362aeabbd0ec18d␟2317799298267426958:Realm Name`,_=$localize`:␟7e9fa2002907552e4079a564294001873c0a5050␟3800416877741086131:Rename default zone group`,i=$localize`:␟ebe9e08754dbdfc5ece3fd03e86dae68bfb4a661␟6693878153088364344:Zone group Endpoints `,a=$localize`:␟f978fbf245f8ea921910c370fd82157e88e0a985␟3459676932698575628:Rename default zone`,r=$localize`:␟baffbd6014bb95e968b29913f3b8e3f5274a28ff␟187165712783200118:Zone Endpoints `,s=$localize`:␟08c74dc9762957593b91f6eb5d65efdfc975bf48␟5248717555542428023:Username`,d=$localize`:␟6c90b82b0e8c2566c45f88807619672da2df7f3f␟8770762390905208426:Specify the username for the system user. This user will be created automatically as part of the process.`,u=$localize`:␟7cbdabcece469fab89cfa687ab152bca18b97498␟1417693714872528491:This field is required.`,m=$localize`:␟f1c4218841dc72ed3987aded484c5b3cabda01f3␟8037500201256773786:The chosen realm name is already in use.`,C=$localize`:␟7cbdabcece469fab89cfa687ab152bca18b97498␟1417693714872528491:This field is required.`,O=$localize`:␟5a9da8f67ef4a7c7f31c767ad7782895e141617b␟2184733522965088338:The chosen zone group name is already in use.`,f=$localize`:␟7cbdabcece469fab89cfa687ab152bca18b97498␟1417693714872528491:This field is required.`,I=$localize`:␟9ddccf3ea37d9232c2f47f32d4b884b4d416daf5␟4061698394390279322:Please enter a valid URL.`,R=$localize`:␟7cbdabcece469fab89cfa687ab152bca18b97498␟1417693714872528491:This field is required.`,h=$localize`:␟695ea1f88ac01e66516f5877560401b57c0f38f5␟1580348638428352117:The chosen zone name is already in use.`,G=$localize`:␟7cbdabcece469fab89cfa687ab152bca18b97498␟1417693714872528491:This field is required.`,U=$localize`:␟9ddccf3ea37d9232c2f47f32d4b884b4d416daf5␟4061698394390279322:Please enter a valid URL.`,k=$localize`:␟7cbdabcece469fab89cfa687ab152bca18b97498␟1417693714872528491:This field is required.`,[["formDir","ngForm"],n,t,_,i,a,r,s,d,u,m,C,O,f,I,R,h,G,U,k,[3,"modalRef"],[1,"modal-title"],[1,"modal-content"],["name","multisiteMigrateForm","novalidate","",3,"formGroup"],[1,"modal-body"],[1,"form-group","row"],["for","realmName",1,"cd-col-form-label","required"],[1,"cd-col-form-input"],["type","text","placeholder","Realm name...","id","realmName","name","realmName","formControlName","realmName",1,"form-control"],["class","invalid-feedback",4,"ngIf"],["for","zonegroupName",1,"cd-col-form-label","required"],["type","text","placeholder","Zone group name...","id","zonegroupName","name","zonegroupName","formControlName","zonegroupName",1,"form-control"],["for","zonegroup_endpoints",1,"cd-col-form-label","required"],["type","text","placeholder","e.g, http://ceph-node-00.com:80","id","zonegroup_endpoints","name","zonegroup_endpoints","formControlName","zonegroup_endpoints",1,"form-control"],["for","zoneName",1,"cd-col-form-label","required"],["type","text","placeholder","Zone name...","id","zoneName","name","zoneName","formControlName","zoneName",1,"form-control"],["for","zone_endpoints",1,"cd-col-form-label","required"],["type","text","placeholder","e.g, http://ceph-node-00.com:80","id","zone_endpoints","name","zone_endpoints","formControlName","zone_endpoints",1,"form-control"],["for","username",1,"cd-col-form-label","required"],["type","text","placeholder","username","id","username","name","username","formControlName","username",1,"form-control"],[1,"modal-footer"],[3,"submitActionEvent","submitText","form"],[1,"invalid-feedback"]]},template:function(t,_){if(1&t){const i=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"cd-modal",20),e.\u0275\u0275elementContainerStart(1,21),e.\u0275\u0275i18nStart(2,1),e.\u0275\u0275elementStart(3,"cd-helper"),e.\u0275\u0275element(4,"span"),e.\u0275\u0275elementEnd(),e.\u0275\u0275i18nEnd(),e.\u0275\u0275elementContainerEnd(),e.\u0275\u0275elementContainerStart(5,22),e.\u0275\u0275elementStart(6,"form",23,0)(8,"div",24)(9,"div",25)(10,"label",26),e.\u0275\u0275i18n(11,2),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(12,"div",27),e.\u0275\u0275element(13,"input",28),e.\u0275\u0275template(14,Nd,2,0,"span",29)(15,Ad,2,0,"span",29),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(16,"div",25)(17,"label",30),e.\u0275\u0275i18n(18,3),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(19,"div",27),e.\u0275\u0275element(20,"input",31),e.\u0275\u0275template(21,hd,2,0,"span",29)(22,bd,2,0,"span",29),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(23,"div",25)(24,"label",32),e.\u0275\u0275i18n(25,4),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(26,"div",27),e.\u0275\u0275element(27,"input",33),e.\u0275\u0275template(28,vd,2,0,"span",29)(29,Ld,2,0,"span",29),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(30,"div",25)(31,"label",34),e.\u0275\u0275i18n(32,5),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(33,"div",27),e.\u0275\u0275element(34,"input",35),e.\u0275\u0275template(35,yd,2,0,"span",29)(36,$d,2,0,"span",29),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(37,"div",25)(38,"label",36),e.\u0275\u0275i18n(39,6),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(40,"div",27),e.\u0275\u0275element(41,"input",37),e.\u0275\u0275template(42,Dd,2,0,"span",29)(43,Wd,2,0,"span",29),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(44,"div",25)(45,"label",38),e.\u0275\u0275i18n(46,7),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(47,"div",27),e.\u0275\u0275element(48,"input",39),e.\u0275\u0275elementStart(49,"cd-help-text")(50,"span"),e.\u0275\u0275i18n(51,8),e.\u0275\u0275elementEnd()(),e.\u0275\u0275template(52,xd,2,0,"span",29),e.\u0275\u0275elementEnd()()(),e.\u0275\u0275elementStart(53,"div",40)(54,"cd-form-button-panel",41),e.\u0275\u0275listener("submitActionEvent",function(){return e.\u0275\u0275restoreView(i),e.\u0275\u0275resetView(_.submit())}),e.\u0275\u0275elementEnd()()(),e.\u0275\u0275elementContainerEnd(),e.\u0275\u0275elementEnd()}if(2&t){const i=e.\u0275\u0275reference(7);e.\u0275\u0275property("modalRef",_.activeModal),e.\u0275\u0275advance(6),e.\u0275\u0275property("formGroup",_.multisiteMigrateForm),e.\u0275\u0275advance(8),e.\u0275\u0275property("ngIf",_.multisiteMigrateForm.showError("realmName",i,"required")),e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf",_.multisiteMigrateForm.showError("realmName",i,"uniqueName")),e.\u0275\u0275advance(6),e.\u0275\u0275property("ngIf",_.multisiteMigrateForm.showError("zonegroupName",i,"required")),e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf",_.multisiteMigrateForm.showError("zonegroupName",i,"uniqueName")),e.\u0275\u0275advance(6),e.\u0275\u0275property("ngIf",_.multisiteMigrateForm.showError("zonegroup_endpoints",i,"required")),e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf",_.multisiteMigrateForm.showError("zonegroup_endpoints",i,"invalidURL")),e.\u0275\u0275advance(6),e.\u0275\u0275property("ngIf",_.multisiteMigrateForm.showError("zoneName",i,"required")),e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf",_.multisiteMigrateForm.showError("zoneName",i,"uniqueName")),e.\u0275\u0275advance(6),e.\u0275\u0275property("ngIf",_.multisiteMigrateForm.showError("zone_endpoints",i,"required")),e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf",_.multisiteMigrateForm.showError("zone_endpoints",i,"invalidURL")),e.\u0275\u0275advance(9),e.\u0275\u0275property("ngIf",_.multisiteMigrateForm.showError("username",i,"required")),e.\u0275\u0275advance(2),e.\u0275\u0275property("submitText",_.actionLabels.MIGRATE+" to Multi-site")("form",_.multisiteMigrateForm)}},dependencies:[g.NgIf,Ot.m,Xe.z,oe.e,ie.O,j.S,Be.a,De.C,ne.E,l.\u0275NgNoValidate,l.DefaultValueAccessor,l.NgControlStatus,l.NgControlStatusGroup,l.FormGroupDirective,l.FormControlName]})}}var Jo=T(59870);function wd(o,n){if(1&o&&(e.\u0275\u0275elementStart(0,"strong",22),e.\u0275\u0275text(1),e.\u0275\u0275elementEnd()),2&o){const t=n.$implicit;e.\u0275\u0275advance(),e.\u0275\u0275textInterpolate(t)}}function Ud(o,n){1&o&&(e.\u0275\u0275elementStart(0,"div",23)(1,"cd-alert-panel",24),e.\u0275\u0275i18n(2,5),e.\u0275\u0275elementEnd()())}function kd(o,n){if(1&o){const t=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementContainerStart(0),e.\u0275\u0275elementStart(1,"label",14),e.\u0275\u0275i18nStart(2,2),e.\u0275\u0275element(3,"strong"),e.\u0275\u0275i18nEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(4,"label",15),e.\u0275\u0275i18n(5,3),e.\u0275\u0275elementEnd(),e.\u0275\u0275template(6,wd,2,1,"strong",16),e.\u0275\u0275elementStart(7,"div",17)(8,"div",18)(9,"input",19),e.\u0275\u0275listener("change",function(){e.\u0275\u0275restoreView(t);const i=e.\u0275\u0275nextContext();return e.\u0275\u0275resetView(i.showDangerText())}),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(10,"label",20),e.\u0275\u0275i18n(11,4),e.\u0275\u0275elementEnd()(),e.\u0275\u0275template(12,Ud,3,0,"div",21),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementContainerEnd()}if(2&o){const t=e.\u0275\u0275nextContext();e.\u0275\u0275advance(3),e.\u0275\u0275i18nExp(null==t.zone?null:t.zone.name),e.\u0275\u0275i18nApply(2),e.\u0275\u0275advance(3),e.\u0275\u0275property("ngForOf",t.includedPools),e.\u0275\u0275advance(6),e.\u0275\u0275property("ngIf",t.displayText)}}class $n{constructor(n,t,_,i,a){this.activeModal=n,this.actionLabels=t,this.notificationService=_,this.rgwZoneService=i,this.poolService=a,this.displayText=!1,this.includedPools=new Set,this.createForm()}ngOnInit(){this.zoneData$=this.rgwZoneService.get(this.zone),this.poolList$=this.poolService.getList()}ngAfterViewInit(){this.updateIncludedPools()}createForm(){this.zoneForm=new Fe.$({deletePools:new l.UntypedFormControl(!1)})}submit(){this.rgwZoneService.delete(this.zone.name,this.zoneForm.value.deletePools,this.includedPools,this.zone.parent).subscribe(()=>{this.notificationService.show(x._.success,$localize`Zone: '${this.zone.name}' deleted successfully`),this.activeModal.close()},()=>{this.zoneForm.setErrors({cdSubmitButton:!0})})}showDangerText(){this.displayText=!this.displayText}updateIncludedPools(){!this.zoneData$||!this.poolList$||this.zoneData$.subscribe(n=>{this.poolList$.subscribe(t=>{for(const _ of t)for(const i of Object.values(n))if("string"==typeof i&&i.includes(_.pool_name))this.includedPools.add(_.pool_name);else if(Array.isArray(i)&&i[0].val)for(const a of i){const r=a.val;r.storage_classes.STANDARD.data_pool===_.pool_name&&this.includedPools.add(r.storage_classes.STANDARD.data_pool),r.data_extra_pool===_.pool_name&&this.includedPools.add(r.data_extra_pool),r.index_pool===_.pool_name&&this.includedPools.add(r.index_pool)}})})}static{this.\u0275fac=function(t){return new(t||$n)(e.\u0275\u0275directiveInject(b.NgbActiveModal),e.\u0275\u0275directiveInject(M.Ss),e.\u0275\u0275directiveInject(te.J),e.\u0275\u0275directiveInject(At.w),e.\u0275\u0275directiveInject(Jo.m))}}static{this.\u0275cmp=e.\u0275\u0275defineComponent({type:$n,selectors:[["cd-rgw-multisite-zone-deletion-form"]],decls:12,vars:6,consts:()=>{let n,t,_,i,a,r;return n=$localize`:form title␟15a9517da399155bf175c335f115e6163bbbe574␟3773075379786832182:Delete Zone`,t=$localize`:␟f4b5ab0f94003afdd5a3dbe95b01e7835e21ac0f␟1673764603852246801: This will delete your ${"\ufffd#8\ufffd"}:START_TAG_STRONG:${"\ufffd0\ufffd"}:INTERPOLATION:${"\ufffd/#8\ufffd"}:CLOSE_TAG_STRONG: Zone. `,_=$localize`:␟248ce2d6ae9ff4b654a33e4bacfe3f253923f7ff␟2134003662538691173: Do you want to delete the associated pools with the ${"\ufffd#3\ufffd"}:START_TAG_STRONG:${"\ufffd0\ufffd"}:INTERPOLATION:${"\ufffd/#3\ufffd"}:CLOSE_TAG_STRONG: Zone?`,i=$localize`:␟306a7395e7a77a06332471509e1cb75f9e944318␟5149101759286937732: This will delete the following pools and any data stored in these pools:`,a=$localize`:␟ad3803086e38325ae612a100b7c069cf7960b9e0␟3112241866446164369:Yes, I want to delete the pools.`,r=$localize`:␟248135e8d5e8bf34b80b9275e7c5907ec4da4072␟4398416118114667369: This will delete all the data in the pools! `,[n,t,_,i,a,r,[3,"modalRef"],[1,"modal-title"],[1,"modal-content"],["name","zoneForm","novalidate","",3,"formGroup"],[1,"modal-body","ms-4"],[4,"ngIf"],[1,"modal-footer"],[3,"submitActionEvent","form","submitText"],[1,"mt-3"],[1,"mb-4"],["class","block",4,"ngFor","ngForOf"],[1,"form-group"],[1,"custom-control","custom-checkbox","mt-2"],["type","checkbox","name","deletePools","id","deletePools","formControlName","deletePools",1,"custom-control-input",3,"change"],["for","deletePools",1,"custom-control-label"],["class","me-4",4,"ngIf"],[1,"block"],[1,"me-4"],["type","danger"]]},template:function(t,_){1&t&&(e.\u0275\u0275elementStart(0,"cd-modal",6),e.\u0275\u0275elementContainerStart(1,7),e.\u0275\u0275i18n(2,0),e.\u0275\u0275elementContainerEnd(),e.\u0275\u0275elementContainerStart(3,8),e.\u0275\u0275elementStart(4,"form",9)(5,"div",10)(6,"label"),e.\u0275\u0275i18nStart(7,1),e.\u0275\u0275element(8,"strong"),e.\u0275\u0275i18nEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275template(9,kd,13,3,"ng-container",11),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(10,"div",12)(11,"cd-form-button-panel",13),e.\u0275\u0275listener("submitActionEvent",function(){return _.submit()}),e.\u0275\u0275elementEnd()()(),e.\u0275\u0275elementContainerEnd(),e.\u0275\u0275elementEnd()),2&t&&(e.\u0275\u0275property("modalRef",_.activeModal),e.\u0275\u0275advance(4),e.\u0275\u0275property("formGroup",_.zoneForm),e.\u0275\u0275advance(4),e.\u0275\u0275i18nExp(null==_.zone?null:_.zone.name),e.\u0275\u0275i18nApply(7),e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf",_.includedPools.size),e.\u0275\u0275advance(2),e.\u0275\u0275property("form",_.zoneForm)("submitText",_.actionLabels.DELETE))},dependencies:[g.NgForOf,g.NgIf,Xe.z,Ie.m,oe.e,j.S,Be.a,De.C,ne.E,l.\u0275NgNoValidate,l.CheckboxControlValueAccessor,l.NgControlStatus,l.NgControlStatusGroup,l.FormGroupDirective,l.FormControlName],styles:[".block[_ngcontent-%COMP%]{display:block}#scroll[_ngcontent-%COMP%]{height:100%;max-height:10rem;overflow:auto}"]})}}function zd(o,n){1&o&&(e.\u0275\u0275elementContainerStart(0),e.\u0275\u0275elementStart(1,"label"),e.\u0275\u0275i18n(2,4),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementContainerEnd())}function Hd(o,n){if(1&o&&(e.\u0275\u0275elementStart(0,"strong",25),e.\u0275\u0275text(1),e.\u0275\u0275elementEnd()),2&o){const t=n.$implicit;e.\u0275\u0275advance(),e.\u0275\u0275textInterpolate(t)}}function Xd(o,n){if(1&o&&(e.\u0275\u0275elementStart(0,"strong",25),e.\u0275\u0275text(1),e.\u0275\u0275elementEnd()),2&o){const t=n.$implicit;e.\u0275\u0275advance(),e.\u0275\u0275textInterpolate(t)}}function Bd(o,n){if(1&o&&(e.\u0275\u0275elementContainerStart(0),e.\u0275\u0275elementStart(1,"strong",17),e.\u0275\u0275text(2,"Pools:"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(3,"div",26),e.\u0275\u0275template(4,Xd,2,1,"strong",19),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementContainerEnd()),2&o){const t=e.\u0275\u0275nextContext(2);e.\u0275\u0275advance(4),e.\u0275\u0275property("ngForOf",t.includedPools)}}function Vd(o,n){1&o&&(e.\u0275\u0275elementContainerStart(0),e.\u0275\u0275elementStart(1,"label",27),e.\u0275\u0275i18n(2,5),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementContainerEnd())}function Zd(o,n){1&o&&(e.\u0275\u0275elementStart(0,"div",28)(1,"cd-alert-panel",29),e.\u0275\u0275i18n(2,6),e.\u0275\u0275elementEnd()())}function Kd(o,n){if(1&o){const t=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementContainerStart(0),e.\u0275\u0275elementStart(1,"label",16),e.\u0275\u0275i18nStart(2,3),e.\u0275\u0275element(3,"strong"),e.\u0275\u0275i18nEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275template(4,zd,3,0,"ng-container",13),e.\u0275\u0275elementStart(5,"strong",17),e.\u0275\u0275text(6,"Zones:"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(7,"div",18),e.\u0275\u0275template(8,Hd,2,1,"strong",19),e.\u0275\u0275elementEnd(),e.\u0275\u0275template(9,Bd,5,1,"ng-container",13),e.\u0275\u0275elementStart(10,"div",20)(11,"div",21)(12,"input",22),e.\u0275\u0275listener("change",function(){e.\u0275\u0275restoreView(t);const i=e.\u0275\u0275nextContext();return e.\u0275\u0275resetView(i.showDangerText())}),e.\u0275\u0275elementEnd(),e.\u0275\u0275template(13,Vd,3,0,"ng-container",23),e.\u0275\u0275elementEnd(),e.\u0275\u0275template(14,Zd,3,0,"div",24),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementContainerEnd()}if(2&o){const t=e.\u0275\u0275nextContext(),_=e.\u0275\u0275reference(13);e.\u0275\u0275advance(3),e.\u0275\u0275i18nExp(null==t.zonegroup?null:t.zonegroup.name),e.\u0275\u0275i18nApply(2),e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf",t.includedPools.size>0),e.\u0275\u0275advance(4),e.\u0275\u0275property("ngForOf",t.zonesList),e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf",t.includedPools.size>0),e.\u0275\u0275advance(4),e.\u0275\u0275property("ngIf",t.includedPools.size>0)("ngIfElse",_),e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf",t.displayText)}}function qd(o,n){1&o&&(e.\u0275\u0275elementStart(0,"label",27),e.\u0275\u0275i18n(1,7),e.\u0275\u0275elementEnd())}class Dn{constructor(n,t,_,i,a,r){this.activeModal=n,this.actionLabels=t,this.notificationService=_,this.rgwZonegroupService=i,this.poolService=a,this.rgwZoneService=r,this.zonesPools=[],this.zonesList=[],this.displayText=!1,this.includedPools=new Set,this.createForm()}ngOnInit(){this.zonegroupData$=this.rgwZonegroupService.get(this.zonegroup),this.poolList$=this.poolService.getList()}ngAfterViewInit(){this.updateIncludedPools()}createForm(){this.zonegroupForm=new Fe.$({deletePools:new l.UntypedFormControl(!1)})}submit(){this.rgwZonegroupService.delete(this.zonegroup.name,this.zonegroupForm.value.deletePools,this.includedPools).subscribe(()=>{this.notificationService.show(x._.success,$localize`Zonegroup: '${this.zonegroup.name}' deleted successfully`),this.activeModal.close()})}showDangerText(){this.includedPools.size>0&&(this.displayText=!this.displayText)}updateIncludedPools(){!this.zonegroupData$||!this.poolList$||this.zonegroupData$.subscribe(n=>{for(const t of n.zones)this.zonesList.push(t.name),this.rgwZoneService.get(t).subscribe(_=>{this.poolList$.subscribe(i=>{for(const a of Object.values(_))for(const r of i)if("string"==typeof a&&a.includes(r.pool_name))this.includedPools.add(r.pool_name);else if(Array.isArray(a)&&a[0].val)for(const s of a){const d=s.val;d.storage_classes.STANDARD.data_pool===r.pool_name&&this.includedPools.add(d.storage_classes.STANDARD.data_pool),d.data_extra_pool===r.pool_name&&this.includedPools.add(d.data_extra_pool),d.index_pool===r.pool_name&&this.includedPools.add(d.index_pool)}})})})}static{this.\u0275fac=function(t){return new(t||Dn)(e.\u0275\u0275directiveInject(b.NgbActiveModal),e.\u0275\u0275directiveInject(M.Ss),e.\u0275\u0275directiveInject(te.J),e.\u0275\u0275directiveInject(ke.Z),e.\u0275\u0275directiveInject(Jo.m),e.\u0275\u0275directiveInject(At.w))}}static{this.\u0275cmp=e.\u0275\u0275defineComponent({type:Dn,selectors:[["cd-rgw-multisite-zonegroup-deletion-form"]],decls:14,vars:6,consts:()=>{let n,t,_,i,a,r,s;return n=$localize`:form title␟be881aca9f223efd983ef7696d0d2cf5aff373e8␟6734961251185171214:Delete Zone Group`,t=$localize`:␟98cc044ccc6f01de40963e853684fc95916c05f9␟907750297031398491: This will delete your ${"\ufffd#8\ufffd"}:START_TAG_STRONG:${"\ufffd0\ufffd"}:INTERPOLATION:${"\ufffd/#8\ufffd"}:CLOSE_TAG_STRONG: Zone Group. `,_=$localize`:␟6c229e980d3064b1307ee6aaf4187fcdd39eed01␟7720456600497833316: Do you want to delete the associated zones and pools with the ${"\ufffd#3\ufffd"}:START_TAG_STRONG:${"\ufffd0\ufffd"}:INTERPOLATION:${"\ufffd/#3\ufffd"}:CLOSE_TAG_STRONG: Zone Group?`,i=$localize`:␟9789ce44ba75369fdd1a39595c6e7e38af6f00ad␟8195780885568927158: This will delete the following:`,a=$localize`:␟19657868d8a0c2d4e0850a95d8707cfd211698c5␟161501920067764902:Yes, I want to delete the zones and their pools.`,r=$localize`:␟248135e8d5e8bf34b80b9275e7c5907ec4da4072␟4398416118114667369: This will delete all the data in the pools! `,s=$localize`:␟95eb0602bda42116cce4ae3d51c060e7fb6b5794␟3582812232042917991:Yes, I want to delete the zones.`,[["noPoolsConfirmation",""],n,t,_,i,a,r,s,[3,"modalRef"],[1,"modal-title"],[1,"modal-content"],["name","zonegroupForm","novalidate","",3,"formGroup"],[1,"modal-body","ms-4"],[4,"ngIf"],[1,"modal-footer"],[3,"submitActionEvent","form","submitText"],[1,"mt-3"],[1,"mt-3","mb-2","h5","block"],["id","scroll"],["class","block",4,"ngFor","ngForOf"],[1,"form-group"],[1,"custom-control","custom-checkbox","mt-2"],["type","checkbox","name","deletePools","id","deletePools","formControlName","deletePools",1,"custom-control-input",3,"change"],[4,"ngIf","ngIfElse"],["class","me-4",4,"ngIf"],[1,"block"],["id","scroll",1,"mb-2"],["for","deletePools",1,"custom-control-label"],[1,"me-4"],["type","danger"]]},template:function(t,_){if(1&t){const i=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"cd-modal",8),e.\u0275\u0275elementContainerStart(1,9),e.\u0275\u0275i18n(2,1),e.\u0275\u0275elementContainerEnd(),e.\u0275\u0275elementContainerStart(3,10),e.\u0275\u0275elementStart(4,"form",11)(5,"div",12)(6,"label"),e.\u0275\u0275i18nStart(7,2),e.\u0275\u0275element(8,"strong"),e.\u0275\u0275i18nEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275template(9,Kd,15,7,"ng-container",13),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(10,"div",14)(11,"cd-form-button-panel",15),e.\u0275\u0275listener("submitActionEvent",function(){return e.\u0275\u0275restoreView(i),e.\u0275\u0275resetView(_.submit())}),e.\u0275\u0275elementEnd()()(),e.\u0275\u0275elementContainerEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275template(12,qd,2,0,"ng-template",null,0,e.\u0275\u0275templateRefExtractor)}2&t&&(e.\u0275\u0275property("modalRef",_.activeModal),e.\u0275\u0275advance(4),e.\u0275\u0275property("formGroup",_.zonegroupForm),e.\u0275\u0275advance(4),e.\u0275\u0275i18nExp(null==_.zonegroup?null:_.zonegroup.name),e.\u0275\u0275i18nApply(7),e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf",_.zonesList.length>0),e.\u0275\u0275advance(2),e.\u0275\u0275property("form",_.zonegroupForm)("submitText",_.actionLabels.DELETE))},dependencies:[g.NgForOf,g.NgIf,Xe.z,Ie.m,oe.e,j.S,Be.a,De.C,ne.E,l.\u0275NgNoValidate,l.CheckboxControlValueAccessor,l.NgControlStatus,l.NgControlStatusGroup,l.FormGroupDirective,l.FormControlName],styles:[".block[_ngcontent-%COMP%]{display:block}#scroll[_ngcontent-%COMP%]{height:100%;max-height:10rem;overflow:auto}"]})}}var jd=T(33117);const Yd=(o,n,t)=>[o,n,t];function Qd(o,n){if(1&o&&(e.\u0275\u0275elementStart(0,"span",13),e.\u0275\u0275element(1,"i",14),e.\u0275\u0275namespaceSVG(),e.\u0275\u0275element(2,"svg",15),e.\u0275\u0275elementEnd()),2&o){const t=e.\u0275\u0275nextContext();e.\u0275\u0275advance(),e.\u0275\u0275property("ngClass",e.\u0275\u0275pureFunction3(3,Yd,t.icons.large3x,t.icons.spinner,t.icons.spin)),e.\u0275\u0275advance(),e.\u0275\u0275property("cdsIcon",t.icons.down)("size",t.icons.size24)}}function Jd(o,n){if(1&o&&(e.\u0275\u0275i18nStart(0,2,1),e.\u0275\u0275elementStart(1,"div"),e.\u0275\u0275element(2,"b"),e.\u0275\u0275elementEnd(),e.\u0275\u0275i18nEnd()),2&o){const t=n.$implicit;e.\u0275\u0275advance(2),e.\u0275\u0275i18nExp(t.realm)(t.token),e.\u0275\u0275i18nApply(0)}}function e1(o,n){if(1&o&&(e.\u0275\u0275elementStart(0,"cd-alert-panel",19),e.\u0275\u0275i18nStart(1,2),e.\u0275\u0275template(2,Jd,3,2,"div",18),e.\u0275\u0275i18nEnd(),e.\u0275\u0275elementEnd()),2&o){const t=e.\u0275\u0275nextContext(2);e.\u0275\u0275advance(2),e.\u0275\u0275property("ngForOf",t.realms)}}function t1(o,n){1&o&&e.\u0275\u0275element(0,"hr")}function n1(o,n){if(1&o&&(e.\u0275\u0275elementStart(0,"div")(1,"div",20)(2,"label",21),e.\u0275\u0275i18n(3,3),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(4,"div",22),e.\u0275\u0275element(5,"input",23),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(6,"div",20)(7,"label",24),e.\u0275\u0275i18n(8,4),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(9,"div",22),e.\u0275\u0275element(10,"input",25)(11,"cd-copy-2-clipboard-button",26),e.\u0275\u0275elementEnd(),e.\u0275\u0275template(12,t1,1,0,"hr",27),e.\u0275\u0275elementEnd()()),2&o){const t=n.$implicit,_=e.\u0275\u0275nextContext(2);e.\u0275\u0275advance(5),e.\u0275\u0275propertyInterpolate("value",t.realm),e.\u0275\u0275advance(5),e.\u0275\u0275propertyInterpolate("value",t.token),e.\u0275\u0275advance(),e.\u0275\u0275propertyInterpolate("source",t.token),e.\u0275\u0275property("byId",!1),e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf",_.realms.length>1)}}function o1(o,n){if(1&o&&(e.\u0275\u0275elementStart(0,"div",16),e.\u0275\u0275template(1,e1,3,1,"cd-alert-panel",17)(2,n1,13,5,"div",18),e.\u0275\u0275elementEnd()),2&o){const t=e.\u0275\u0275nextContext();e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf",!t.tokenValid),e.\u0275\u0275advance(),e.\u0275\u0275property("ngForOf",t.realms)}}class Wn{constructor(n,t,_,i,a){this.activeModal=n,this.rgwRealmService=t,this.actionLabels=_,this.notificationService=i,this.changeDetectorRef=a,this.tokenValid=!1,this.loading=!0,this.icons=L.FI,this.createForm()}createForm(){this.exportTokenForm=new Fe.$({})}onSubmit(){this.activeModal.close()}ngOnInit(){this.rgwRealmService.getRealmTokens().subscribe(n=>{this.loading=!1,this.realms=n;var t=new RegExp("^(?:[A-Za-z0-9+/]{4})*(?:[A-Za-z0-9+/]{2}==|[A-Za-z0-9+/]{3}=|[A-Za-z0-9+/]{4})$");this.realms.forEach(_=>{t.test(_.token)?this.tokenValid=!0:this.tokenValid=!1})})}ngAfterViewChecked(){this.changeDetectorRef.detectChanges()}static{this.\u0275fac=function(t){return new(t||Wn)(e.\u0275\u0275directiveInject(b.NgbActiveModal),e.\u0275\u0275directiveInject(It.$),e.\u0275\u0275directiveInject(M.Ss),e.\u0275\u0275directiveInject(te.J),e.\u0275\u0275directiveInject(e.ChangeDetectorRef))}}static{this.\u0275cmp=e.\u0275\u0275defineComponent({type:Wn,selectors:[["cd-rgw-multisite-export"]],decls:10,vars:4,consts:()=>{let n,t,_,i;return n=$localize`:form title␟b8becceeea72cebe2ffc602ad4941156ae610581␟4972532934858699238:Export Multi-site Realm Token`,t=$localize`:␟3e85c7884249e300e2d51a2e1eb283c820429a36␟8980433494599480497:${"\ufffd*2:1\ufffd\ufffd#1:1\ufffd"}:START_TAG_DIV:${"\ufffd#2:1\ufffd"}:START_BOLD_TEXT:${"\ufffd0:1\ufffd"}:INTERPOLATION:${"\ufffd/#2:1\ufffd"}:CLOSE_BOLD_TEXT: - ${"\ufffd1:1\ufffd"}:INTERPOLATION_1: ${"\ufffd/#1:1\ufffd\ufffd/*2:1\ufffd"}:CLOSE_TAG_DIV:`,_=$localize`:␟8ba83cdb1e9c7d1dd3ff7ac46670b3f70325c81a␟4107880910260242997:Realm Name `,i=$localize`:␟5bf7f2abbcbbf22b5d14a8c7bf15373894534f0c␟4597225682879020662:Token `,[["frm","ngForm"],n,t,_,i,[3,"modalRef"],[1,"modal-title"],[1,"modal-content"],["name","exportTokenForm",3,"formGroup"],["class","d-flex justify-content-center",4,"ngIf"],["class","modal-body",4,"ngIf"],[1,"modal-footer"],["aria-label","Close",1,"m-2","float-end",3,"backAction"],[1,"d-flex","justify-content-center"],[3,"ngClass"],[1,"cds-info-color",3,"cdsIcon","size"],[1,"modal-body"],["type","warning","class","mx-3",4,"ngIf"],[4,"ngFor","ngForOf"],["type","warning",1,"mx-3"],[1,"form-group","row"],["for","realmName",1,"cd-col-form-label"],[1,"cd-col-form-input"],["id","realmName","name","realmName","type","text","readonly","",3,"value"],["for","token",1,"cd-col-form-label"],["id","realmToken","name","realmToken","type","text","readonly","",1,"me-2","mb-4",3,"value"],[3,"source","byId"],[4,"ngIf"]]},template:function(t,_){if(1&t){const i=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"cd-modal",5),e.\u0275\u0275elementContainerStart(1,6),e.\u0275\u0275i18n(2,1),e.\u0275\u0275elementContainerEnd(),e.\u0275\u0275elementContainerStart(3,7),e.\u0275\u0275elementStart(4,"form",8,0),e.\u0275\u0275template(6,Qd,3,7,"span",9)(7,o1,3,2,"div",10),e.\u0275\u0275elementStart(8,"div",11)(9,"cd-back-button",12),e.\u0275\u0275listener("backAction",function(){return e.\u0275\u0275restoreView(i),e.\u0275\u0275resetView(_.activeModal.close())}),e.\u0275\u0275elementEnd()()(),e.\u0275\u0275elementContainerEnd(),e.\u0275\u0275elementEnd()}2&t&&(e.\u0275\u0275property("modalRef",_.activeModal),e.\u0275\u0275advance(4),e.\u0275\u0275property("formGroup",_.exportTokenForm),e.\u0275\u0275advance(2),e.\u0275\u0275property("ngIf",_.loading),e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf",!_.loading))},dependencies:[g.NgClass,g.NgForOf,g.NgIf,jd.X,Xe.z,Ie.m,_t.N,j.S,De.C,ne.E,l.\u0275NgNoValidate,l.NgControlStatusGroup,l.FormGroupDirective,c.IconDirective]})}}var Ro=T(66668),_1=T(7466),ht=T(31345),Zt=T(48693);function i1(o,n){1&o&&(e.\u0275\u0275elementStart(0,"span",46),e.\u0275\u0275i18n(1,8),e.\u0275\u0275elementEnd())}function a1(o,n){1&o&&(e.\u0275\u0275elementStart(0,"span",46),e.\u0275\u0275i18n(1,9),e.\u0275\u0275elementEnd())}function r1(o,n){1&o&&(e.\u0275\u0275elementStart(0,"span",46),e.\u0275\u0275i18n(1,10),e.\u0275\u0275elementEnd())}function l1(o,n){1&o&&(e.\u0275\u0275elementStart(0,"div",31)(1,"label",47),e.\u0275\u0275i18n(2,11),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(3,"div",33)(4,"select",48)(5,"option",49),e.\u0275\u0275i18n(6,12),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(7,"option",50),e.\u0275\u0275i18n(8,13),e.\u0275\u0275elementEnd()()()())}function s1(o,n){1&o&&(e.\u0275\u0275elementStart(0,"span",46),e.\u0275\u0275i18n(1,15),e.\u0275\u0275elementEnd())}function c1(o,n){if(1&o){const t=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"div",31)(1,"label",51),e.\u0275\u0275i18n(2,14),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(3,"div",33)(4,"input",52),e.\u0275\u0275listener("focus",function(i){e.\u0275\u0275restoreView(t);const a=e.\u0275\u0275nextContext();return e.\u0275\u0275resetView(a.labelFocus.next(i.target.value))})("click",function(i){e.\u0275\u0275restoreView(t);const a=e.\u0275\u0275nextContext();return e.\u0275\u0275resetView(a.labelClick.next(i.target.value))}),e.\u0275\u0275elementEnd(),e.\u0275\u0275template(5,s1,2,0,"span",35),e.\u0275\u0275elementEnd()()}if(2&o){const t=e.\u0275\u0275nextContext(),_=e.\u0275\u0275reference(5);e.\u0275\u0275advance(4),e.\u0275\u0275property("ngbTypeahead",t.searchLabels),e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf",t.importTokenForm.showError("label",_,"required"))}}function d1(o,n){if(1&o&&(e.\u0275\u0275elementStart(0,"div",31)(1,"label",53),e.\u0275\u0275i18n(2,16),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(3,"div",33),e.\u0275\u0275element(4,"cd-select-badges",54),e.\u0275\u0275elementEnd()()),2&o){const t=e.\u0275\u0275nextContext();e.\u0275\u0275advance(4),e.\u0275\u0275property("data",t.importTokenForm.controls.hosts.value)("options",t.hosts.options)("messages",t.hosts.messages)}}function u1(o,n){1&o&&(e.\u0275\u0275elementStart(0,"span",46),e.\u0275\u0275i18n(1,19),e.\u0275\u0275elementEnd())}function p1(o,n){1&o&&(e.\u0275\u0275elementStart(0,"span",46),e.\u0275\u0275i18n(1,20),e.\u0275\u0275elementEnd())}function m1(o,n){if(1&o&&(e.\u0275\u0275elementStart(0,"div",31)(1,"label",55)(2,"span"),e.\u0275\u0275i18n(3,17),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(4,"cd-helper"),e.\u0275\u0275i18n(5,18),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(6,"div",33),e.\u0275\u0275element(7,"input",56),e.\u0275\u0275template(8,u1,2,0,"span",35)(9,p1,2,0,"span",35),e.\u0275\u0275elementEnd()()),2&o){const t=e.\u0275\u0275nextContext(),_=e.\u0275\u0275reference(5);e.\u0275\u0275advance(8),e.\u0275\u0275property("ngIf",t.importTokenForm.showError("count",_,"min")),e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf",t.importTokenForm.showError("count",_,"pattern"))}}function T1(o,n){1&o&&(e.\u0275\u0275elementStart(0,"span",46),e.\u0275\u0275i18n(1,22),e.\u0275\u0275elementEnd())}function g1(o,n){1&o&&(e.\u0275\u0275elementStart(0,"span",46),e.\u0275\u0275i18n(1,23),e.\u0275\u0275elementEnd())}function E1(o,n){1&o&&(e.\u0275\u0275elementStart(0,"span",46),e.\u0275\u0275i18n(1,24),e.\u0275\u0275elementEnd())}function R1(o,n){if(1&o&&(e.\u0275\u0275elementContainerStart(0),e.\u0275\u0275elementStart(1,"div",31)(2,"label",57),e.\u0275\u0275i18n(3,21),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(4,"div",33),e.\u0275\u0275element(5,"input",58),e.\u0275\u0275template(6,T1,2,0,"span",35)(7,g1,2,0,"span",35)(8,E1,2,0,"span",35),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementContainerEnd()),2&o){const t=e.\u0275\u0275nextContext(),_=e.\u0275\u0275reference(5);e.\u0275\u0275advance(6),e.\u0275\u0275property("ngIf",t.importTokenForm.showError("rgw_frontend_port",_,"pattern")),e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf",t.importTokenForm.showError("rgw_frontend_port",_,"min")),e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf",t.importTokenForm.showError("rgw_frontend_port",_,"max"))}}class xn{constructor(n,t,_,i,a){this.activeModal=n,this.hostService=t,this.rgwRealmService=_,this.actionLabels=i,this.notificationService=a,this.endpoints=/^((https?:\/\/)|(www.))(?:([a-zA-Z]+)|(\d+\.\d+.\d+.\d+)):\d{2,4}$/,this.ipv4Rgx=/^((25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\.){3}(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)$/i,this.ipv6Rgx=/^(?:[a-f0-9]{1,4}:){7}[a-f0-9]{1,4}$/i,this.multisiteInfo=[],this.zoneList=[],this.labelClick=new w.Subject,this.labelFocus=new w.Subject,this.searchLabels=r=>(0,w.merge)(r.pipe((0,Z.debounceTime)(200),(0,Z.distinctUntilChanged)()),this.labelFocus,this.labelClick.pipe((0,Z.filter)(()=>!this.typeahead.isPopupOpen()))).pipe((0,Z.map)(s=>this.labels.filter(d=>d.toLowerCase().indexOf(s.toLowerCase())>-1).slice(0,10))),this.hosts={options:[],messages:new Ro.z({empty:$localize`There are no hosts.`,filter:$localize`Filter hosts`})},this.createForm()}ngOnInit(){this.zoneList=void 0!==this.multisiteInfo[2]&&this.multisiteInfo[2].hasOwnProperty("zones")?this.multisiteInfo[2].zones:[],this.zoneNames=this.zoneList.map(n=>n.name),this.hostService.getAllHosts().subscribe(n=>{const t=[];N().forEach(n,_=>{if(N().get(_,"sources.orchestrator",!1)){const i=new ht.O(!1,N().get(_,"hostname"),"");t.push(i)}}),this.hosts.options=[...t]}),this.hostService.getLabels().subscribe(n=>{this.labels=n})}createForm(){this.importTokenForm=new Fe.$({realmToken:new l.FormControl("",{validators:[l.Validators.required]}),zoneName:new l.FormControl(null,{validators:[l.Validators.required,F.xQ.custom("uniqueName",n=>this.zoneNames&&-1!==this.zoneNames.indexOf(n))]}),rgw_frontend_port:new l.FormControl(null,{validators:[l.Validators.required,l.Validators.pattern("^[0-9]*$")]}),placement:new l.FormControl("hosts"),label:new l.FormControl(null,[F.xQ.requiredIf({placement:"label",unmanaged:!1})]),hosts:new l.FormControl([]),count:new l.FormControl(null,[F.xQ.number(!1)]),unmanaged:new l.FormControl(!1)})}onSubmit(){const n=this.importTokenForm.value,t={placement:{}};if(!n.unmanaged){switch(n.placement){case"hosts":n.hosts.length>0&&(t.placement.hosts=n.hosts);break;case"label":t.placement.label=n.label}N().isNumber(n.count)&&n.count>0&&(t.placement.count=n.count)}this.rgwRealmService.importRealmToken(n.realmToken,n.zoneName,n.rgw_frontend_port,t).subscribe(()=>{this.notificationService.show(x._.success,$localize`Realm token import successfull`),this.activeModal.close()},()=>{this.importTokenForm.setErrors({cdSubmitButton:!0})})}static{this.\u0275fac=function(t){return new(t||xn)(e.\u0275\u0275directiveInject(b.NgbActiveModal),e.\u0275\u0275directiveInject(_1.I),e.\u0275\u0275directiveInject(It.$),e.\u0275\u0275directiveInject(M.Ss),e.\u0275\u0275directiveInject(te.J))}}static{this.\u0275cmp=e.\u0275\u0275defineComponent({type:xn,selectors:[["cd-rgw-multisite-import"]],viewQuery:function(t,_){if(1&t&&e.\u0275\u0275viewQuery(b.NgbTypeahead,5),2&t){let i;e.\u0275\u0275queryRefresh(i=e.\u0275\u0275loadQuery())&&(_.typeahead=i.first)}},decls:47,vars:12,consts:()=>{let n,t,_,i,a,r,s,d,u,m,C,O,f,I,R,h,G,U,k,y,H,X,B,V;return n=$localize`:form title␟0613fe9461047437f53c17904fb7da538192a7d7␟4658680524226720764:Import Multi-site Token`,t=$localize`:␟e2424caf85a56fe0b026a9229474c16560470169␟2022083987817206479:Zone Details`,_=$localize`:␟94aac777f5db1ffa2138dee6e80a117edbb090d4␟13264327363767445:Token `,i=$localize`:␟7e5cff7050dd5c780f9b394a280595cc5a0f2cb6␟1993110063665975040:Secondary Zone Name`,a=$localize`:␟0b232ed3df6aab297bc75d59c7cb39708bfeaeb7␟5417069340540466307:Service Details`,r=$localize`:␟83d5d7edd8a0be253c4e93ad4c3efe86d9ac520f␟6334966869524707420:Unmanaged`,s=$localize`:␟cb907946d971786d27f9ebae3f7f869f15c58cba␟3741681803901503341:If set to true, the orchestrator will not start nor stop any daemon associated with this service. Placement and all other properties will be ignored.`,d=$localize`:␟7cbdabcece469fab89cfa687ab152bca18b97498␟1417693714872528491:This field is required.`,u=$localize`:␟7cbdabcece469fab89cfa687ab152bca18b97498␟1417693714872528491:This field is required.`,m=$localize`:␟695ea1f88ac01e66516f5877560401b57c0f38f5␟1580348638428352117:The chosen zone name is already in use.`,C=$localize`:␟c15fa461935e0f600bc5d1660af1da67f024fc2a␟5869780110608474933:Placement`,O=$localize`:␟099b441d49333b3c6d30b36dc0a4763e64c78920␟4435206372750903836:Hosts`,f=$localize`:␟863226cffd5b66a6fee9810a9282a5006d6ef576␟4077520913910941990:Label`,I=$localize`:␟863226cffd5b66a6fee9810a9282a5006d6ef576␟4077520913910941990:Label`,R=$localize`:␟7cbdabcece469fab89cfa687ab152bca18b97498␟1417693714872528491:This field is required.`,h=$localize`:␟099b441d49333b3c6d30b36dc0a4763e64c78920␟4435206372750903836:Hosts`,G=$localize`:␟06412bce0f4fe4311193e9763666089bf9d980da␟8177873832400820695:Count`,U=$localize`:␟2f193722f1e788f14a823b89ac1794c3ba934f9f␟8946086422165157921:Only that number of daemons will be created.`,k=$localize`:␟ee1a29cc658e4fa891be762d7bae96139b57c8f4␟8734993421339261707:The value must be at least 1.`,y=$localize`:␟eae7086660cf1e38c7194a2c49ff52cc656f90f5␟4304943972618871159:The entered value needs to be a number.`,H=$localize`:␟cb2741a46e3560f6bc6dfd99d385e86b08b26d72␟6117946241126833991:Port`,X=$localize`:␟eae7086660cf1e38c7194a2c49ff52cc656f90f5␟4304943972618871159:The entered value needs to be a number.`,B=$localize`:␟ee1a29cc658e4fa891be762d7bae96139b57c8f4␟8734993421339261707:The value must be at least 1.`,V=$localize`:␟a23ed3598cca5285606675b6cb2536a56b411ade␟734228889689400302:The value cannot exceed 65535.`,[["frm","ngForm"],n,t,_,i,a,r,s,d,u,m,C,O,f,I,R,h,G,U,k,y,H,X,B,V,[3,"modalRef"],[1,"modal-title"],[1,"modal-content"],["name","importTokenForm",3,"formGroup"],[1,"modal-body"],["type","info","spacingClass","mb-3"],[1,"form-group","row"],["for","realmToken",1,"cd-col-form-label","required"],[1,"cd-col-form-input"],["id","realmToken","name","realmToken","type","text","formControlName","realmToken",1,"form-control"],["class","invalid-feedback",4,"ngIf"],["for","zoneName",1,"cd-col-form-label","required"],["type","text","placeholder","Zone name...","id","zoneName","name","zoneName","formControlName","zoneName",1,"form-control"],[1,"cd-col-form-offset"],[1,"custom-control","custom-checkbox"],["id","unmanaged","type","checkbox","formControlName","unmanaged",1,"custom-control-input"],["for","unmanaged",1,"custom-control-label"],["class","form-group row",4,"ngIf"],[4,"ngIf"],[1,"modal-footer"],[3,"submitActionEvent","submitText","form"],[1,"invalid-feedback"],["for","placement",1,"cd-col-form-label"],["id","placement","formControlName","placement",1,"form-select"],["value","hosts"],["value","label"],["for","label",1,"cd-col-form-label"],["id","label","type","text","formControlName","label",1,"form-control",3,"focus","click","ngbTypeahead"],["for","hosts",1,"cd-col-form-label"],["id","hosts",3,"data","options","messages"],["for","count",1,"cd-col-form-label"],["id","count","type","number","formControlName","count","min","1",1,"form-control"],["for","rgw_frontend_port",1,"cd-col-form-label"],["id","rgw_frontend_port","type","number","formControlName","rgw_frontend_port","min","1","max","65535",1,"form-control"]]},template:function(t,_){if(1&t){const i=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"cd-modal",25),e.\u0275\u0275elementContainerStart(1,26),e.\u0275\u0275i18n(2,1),e.\u0275\u0275elementContainerEnd(),e.\u0275\u0275elementContainerStart(3,27),e.\u0275\u0275elementStart(4,"form",28,0)(6,"div",29)(7,"cd-alert-panel",30)(8,"ul")(9,"li"),e.\u0275\u0275text(10,"This feature allows you to configure a connection between your primary and secondary Ceph clusters for data replication. By importing a token, you establish a link between the clusters, enabling data synchronization."),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(11,"li"),e.\u0275\u0275text(12,"To obtain the token, generate it from your primary Ceph cluster. This token includes encoded information about the primary cluster's endpoint, access key, and secret key."),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(13,"li"),e.\u0275\u0275text(14,"The secondary zone represents the destination cluster where your data will be replicated."),e.\u0275\u0275elementEnd()()(),e.\u0275\u0275elementStart(15,"legend"),e.\u0275\u0275i18n(16,2),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(17,"div",31)(18,"label",32),e.\u0275\u0275i18n(19,3),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(20,"div",33),e.\u0275\u0275element(21,"input",34),e.\u0275\u0275template(22,i1,2,0,"span",35),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(23,"div",31)(24,"label",36),e.\u0275\u0275i18n(25,4),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(26,"div",33),e.\u0275\u0275element(27,"input",37),e.\u0275\u0275template(28,a1,2,0,"span",35)(29,r1,2,0,"span",35),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(30,"legend"),e.\u0275\u0275i18n(31,5),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(32,"div",31)(33,"div",38)(34,"div",39),e.\u0275\u0275element(35,"input",40),e.\u0275\u0275elementStart(36,"label",41),e.\u0275\u0275i18n(37,6),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(38,"cd-helper"),e.\u0275\u0275i18n(39,7),e.\u0275\u0275elementEnd()()()(),e.\u0275\u0275template(40,l1,9,0,"div",42)(41,c1,6,2,"div",42)(42,d1,5,3,"div",42)(43,m1,10,2,"div",42)(44,R1,9,3,"ng-container",43),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(45,"div",44)(46,"cd-form-button-panel",45),e.\u0275\u0275listener("submitActionEvent",function(){return e.\u0275\u0275restoreView(i),e.\u0275\u0275resetView(_.onSubmit())}),e.\u0275\u0275elementEnd()()(),e.\u0275\u0275elementContainerEnd(),e.\u0275\u0275elementEnd()}if(2&t){const i=e.\u0275\u0275reference(5);e.\u0275\u0275property("modalRef",_.activeModal),e.\u0275\u0275advance(4),e.\u0275\u0275property("formGroup",_.importTokenForm),e.\u0275\u0275advance(18),e.\u0275\u0275property("ngIf",_.importTokenForm.showError("realmToken",i,"required")),e.\u0275\u0275advance(6),e.\u0275\u0275property("ngIf",_.importTokenForm.showError("zoneName",i,"required")),e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf",_.importTokenForm.showError("zoneName",i,"uniqueName")),e.\u0275\u0275advance(11),e.\u0275\u0275property("ngIf",!_.importTokenForm.controls.unmanaged.value),e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf",!_.importTokenForm.controls.unmanaged.value&&"label"===_.importTokenForm.controls.placement.value),e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf",!_.importTokenForm.controls.unmanaged.value&&"hosts"===_.importTokenForm.controls.placement.value),e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf",!_.importTokenForm.controls.unmanaged.value),e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf",!_.importTokenForm.controls.unmanaged.value),e.\u0275\u0275advance(2),e.\u0275\u0275property("submitText",_.actionLabels.IMPORT)("form",_.importTokenForm)}},dependencies:[g.NgIf,Ot.m,Zt.U,Xe.z,Ie.m,oe.e,j.S,Be.a,De.C,ne.E,l.\u0275NgNoValidate,l.NgSelectOption,l.\u0275NgSelectMultipleOption,l.DefaultValueAccessor,l.NumberValueAccessor,l.CheckboxControlValueAccessor,l.SelectControlValueAccessor,l.NgControlStatus,l.NgControlStatusGroup,l.MinValidator,l.MaxValidator,l.FormGroupDirective,l.FormControlName,b.NgbTypeahead,c.Option]})}}var C1=T(38996);function f1(o,n){1&o&&(e.\u0275\u0275elementStart(0,"span",19),e.\u0275\u0275i18n(1,5),e.\u0275\u0275elementEnd())}function S1(o,n){1&o&&(e.\u0275\u0275elementStart(0,"span",19),e.\u0275\u0275i18n(1,6),e.\u0275\u0275elementEnd())}function F1(o,n){if(1&o&&e.\u0275\u0275template(0,f1,2,0,"span",18)(1,S1,2,0,"span",18),2&o){const t=e.\u0275\u0275nextContext(),_=e.\u0275\u0275reference(8);e.\u0275\u0275property("ngIf",t.multisiteRealmForm.showError("realmName",_,"required")),e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf",t.multisiteRealmForm.showError("realmName",_,"uniqueName"))}}function M1(o,n){1&o&&(e.\u0275\u0275i18nStart(0,4,1),e.\u0275\u0275elementStart(1,"cd-help-text"),e.\u0275\u0275element(2,"span"),e.\u0275\u0275elementEnd(),e.\u0275\u0275i18nEnd())}function P1(o,n){if(1&o&&(e.\u0275\u0275i18nStart(0,4,2),e.\u0275\u0275elementStart(1,"cd-help-text")(2,"span"),e.\u0275\u0275element(3,"a",20),e.\u0275\u0275elementEnd()(),e.\u0275\u0275i18nEnd()),2&o){const t=e.\u0275\u0275nextContext();e.\u0275\u0275advance(3),e.\u0275\u0275propertyInterpolate("href",t.docUrl,e.\u0275\u0275sanitizeUrl)}}function I1(o,n){1&o&&(e.\u0275\u0275i18nStart(0,4,3),e.\u0275\u0275elementStart(1,"cd-help-text"),e.\u0275\u0275element(2,"span"),e.\u0275\u0275elementEnd(),e.\u0275\u0275i18nEnd())}class wn extends c.BaseModal{constructor(n,t,_,i,a,r,s,d,u,m,C){super(),this.activeModal=n,this.actionLabels=t,this.rgwRealmService=_,this.notificationService=i,this.docService=a,this.action=r,this.resource=s,this.info=d,this.multisiteInfo=u,this.defaultsInfo=m,this.editing=C,this.realmList=[],this.zonegroupList=[],this.defaultRealmDisabled=!1,this.action=this.editing?this.actionLabels.EDIT:this.actionLabels.CREATE,this.createForm()}createForm(){this.multisiteRealmForm=new Fe.$({realmName:new l.UntypedFormControl(null,{validators:[l.Validators.required,F.xQ.custom("uniqueName",n=>this.action===this.actionLabels.CREATE&&this.realmNames&&-1!==this.realmNames.indexOf(n))]}),default_realm:new l.UntypedFormControl(!1)})}ngOnInit(){this.realmList=void 0!==this.multisiteInfo[0]&&this.multisiteInfo[0].hasOwnProperty("realms")?this.multisiteInfo[0].realms:[],this.realmNames=this.realmList.map(n=>n.name),this.action===this.actionLabels.EDIT&&(this.zonegroupList=void 0!==this.multisiteInfo[1]&&this.multisiteInfo[1].hasOwnProperty("zonegroups")?this.multisiteInfo[1].zonegroups:[],this.multisiteRealmForm.get("realmName").setValue(this.info.data.name),this.multisiteRealmForm.get("default_realm").setValue(this.info.data.is_default),this.info.data.is_default&&this.multisiteRealmForm.get("default_realm").disable()),this.zonegroupList.forEach(n=>{!0===n.is_master&&n.realm_id===this.info.data.id&&(this.isMaster=!0)}),this.defaultsInfo&&null!==this.defaultsInfo.defaultRealmName&&(this.multisiteRealmForm.get("default_realm").disable(),this.defaultRealmDisabled=!0),this.docUrl=this.docService.urlGenerator("rgw-multisite"),this.action===this.actionLabels?.EDIT?this.multisiteRealmForm.get("default_realm").disable():this.multisiteRealmForm.get("default_realm").enable()}submit(){const n=this.multisiteRealmForm.getRawValue();this.realm=new z.SX,this.action===this.actionLabels.CREATE?(this.realm.name=n.realmName,this.rgwRealmService.create(this.realm,n.default_realm).subscribe(()=>{this.notificationService.show(x._.success,$localize`Realm: '${n.realmName}' created successfully`),this.closeModal()},()=>{this.multisiteRealmForm.setErrors({cdSubmitButton:!0})})):(this.realm.name=this.info.data.name,this.newRealmName=n.realmName,this.rgwRealmService.update(this.realm,n.default_realm,this.newRealmName).subscribe(()=>{this.notificationService.show(x._.success,$localize`Realm: '${n.realmName}' updated successfully`),this.closeModal()},()=>{this.multisiteRealmForm.setErrors({cdSubmitButton:!0})}))}static{this.\u0275fac=function(t){return new(t||wn)(e.\u0275\u0275directiveInject(b.NgbActiveModal),e.\u0275\u0275directiveInject(M.Ss),e.\u0275\u0275directiveInject(It.$),e.\u0275\u0275directiveInject(te.J),e.\u0275\u0275directiveInject(C1.s),e.\u0275\u0275directiveInject("action",8),e.\u0275\u0275directiveInject("resource",8),e.\u0275\u0275directiveInject("info",8),e.\u0275\u0275directiveInject("multisiteInfo",8),e.\u0275\u0275directiveInject("defaultsInfo",8),e.\u0275\u0275directiveInject("editing",8))}}static{this.\u0275cmp=e.\u0275\u0275defineComponent({type:wn,selectors:[["cd-rgw-multisite-realm-form"]],features:[e.\u0275\u0275InheritDefinitionFeature],decls:24,vars:23,consts:()=>{let n,t,_,i,a;return n=$localize`:␟fb127ea03835b3230f0ed981c7080e2ccb879621␟3346778808274133574:${"\ufffd0\ufffd"}:INTERPOLATION: ${"\ufffd1\ufffd"}:INTERPOLATION_1:`,t=$localize`:␟4552327f41c8904663c9453837189ca188b5bc1b␟3241203177422881006:Realm Name ${"\ufffd#12\ufffd\ufffd/#12\ufffd"}:TAG_INPUT:`,_=$localize`:␟405c390703977cbc9e79c57c89163fd00e500310␟8989671898110714401:Default ${"\ufffd*18:1\ufffd\ufffd#1:1\ufffd"}:START_TAG_CD_HELP_TEXT:${"[\ufffd#2:1\ufffd|\ufffd#2:2\ufffd|\ufffd#2:3\ufffd]"}:START_TAG_SPAN:You cannot unset the default flag.${"[\ufffd/#2:1\ufffd|\ufffd/#2:2\ufffd|\ufffd/#2:3\ufffd]"}:CLOSE_TAG_SPAN:${"[\ufffd/#1:1\ufffd\ufffd/*18:1\ufffd|\ufffd/#1:2\ufffd\ufffd/*19:2\ufffd|\ufffd/#1:3\ufffd\ufffd/*20:3\ufffd]"}:CLOSE_TAG_CD_HELP_TEXT:${"\ufffd*19:2\ufffd\ufffd#1:2\ufffd"}:START_TAG_CD_HELP_TEXT_1:${"[\ufffd#2:1\ufffd|\ufffd#2:2\ufffd|\ufffd#2:3\ufffd]"}:START_TAG_SPAN:Please consult the ${"\ufffd#3:2\ufffd"}:START_LINK:documentation${"\ufffd/#3:2\ufffd"}:CLOSE_LINK: to follow the failover mechanism${"[\ufffd/#2:1\ufffd|\ufffd/#2:2\ufffd|\ufffd/#2:3\ufffd]"}:CLOSE_TAG_SPAN:${"[\ufffd/#1:1\ufffd\ufffd/*18:1\ufffd|\ufffd/#1:2\ufffd\ufffd/*19:2\ufffd|\ufffd/#1:3\ufffd\ufffd/*20:3\ufffd]"}:CLOSE_TAG_CD_HELP_TEXT:${"\ufffd*20:3\ufffd\ufffd#1:3\ufffd"}:START_TAG_CD_HELP_TEXT_2:${"[\ufffd#2:1\ufffd|\ufffd#2:2\ufffd|\ufffd#2:3\ufffd]"}:START_TAG_SPAN:Default realm already exists.${"[\ufffd/#2:1\ufffd|\ufffd/#2:2\ufffd|\ufffd/#2:3\ufffd]"}:CLOSE_TAG_SPAN:${"[\ufffd/#1:1\ufffd\ufffd/*18:1\ufffd|\ufffd/#1:2\ufffd\ufffd/*19:2\ufffd|\ufffd/#1:3\ufffd\ufffd/*20:3\ufffd]"}:CLOSE_TAG_CD_HELP_TEXT:`,_=e.\u0275\u0275i18nPostprocess(_),i=$localize`:␟7cbdabcece469fab89cfa687ab152bca18b97498␟1417693714872528491:This field is required.`,a=$localize`:␟f1c4218841dc72ed3987aded484c5b3cabda01f3␟8037500201256773786:The chosen realm name is already in use.`,[["formDir","ngForm"],["realmNameError",""],n,t,_,i,a,["size","sm",3,"overlaySelected","open","hasScrollingContent"],[3,"closeSelect"],["cdsModalHeaderHeading",""],["cdsModalContent",""],["name","multisiteRealmForm","novalidate","",3,"formGroup"],[1,"form-item"],["labelInputID","realmName","cdRequiredField","Realm Name",3,"invalid","invalidText"],["cdsText","","type","text","placeholder","Realm name...","id","realmName","name","realmName","formControlName","realmName","modal-primary-focus","",3,"invalid","autofocus"],["label","Default","for","default_realm","formControlName","default_realm","name","default_realm"],[4,"ngIf"],[3,"submitActionEvent","form","submitText","modalForm"],["class","invalid-feedback",4,"ngIf"],[1,"invalid-feedback"],[3,"href"]]},template:function(t,_){if(1&t){const i=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"cds-modal",7),e.\u0275\u0275listener("overlaySelected",function(){return e.\u0275\u0275restoreView(i),e.\u0275\u0275resetView(_.closeModal())}),e.\u0275\u0275elementStart(1,"cds-modal-header",8),e.\u0275\u0275listener("closeSelect",function(){return e.\u0275\u0275restoreView(i),e.\u0275\u0275resetView(_.closeModal())}),e.\u0275\u0275elementStart(2,"h3",9),e.\u0275\u0275i18n(3,2),e.\u0275\u0275pipe(4,"titlecase"),e.\u0275\u0275pipe(5,"upperFirst"),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(6,"div",10)(7,"form",11,0)(9,"div",12)(10,"cds-text-label",13),e.\u0275\u0275i18nStart(11,3),e.\u0275\u0275element(12,"input",14),e.\u0275\u0275i18nEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275template(13,F1,2,2,"ng-template",null,1,e.\u0275\u0275templateRefExtractor),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(15,"div",12)(16,"cds-checkbox",15),e.\u0275\u0275i18nStart(17,4),e.\u0275\u0275template(18,M1,3,0,"cd-help-text",16)(19,P1,4,1,"cd-help-text",16)(20,I1,3,0,"cd-help-text",16),e.\u0275\u0275i18nEnd(),e.\u0275\u0275elementEnd()()()(),e.\u0275\u0275elementStart(21,"cd-form-button-panel",17),e.\u0275\u0275pipe(22,"titlecase"),e.\u0275\u0275pipe(23,"upperFirst"),e.\u0275\u0275listener("submitActionEvent",function(){return e.\u0275\u0275restoreView(i),e.\u0275\u0275resetView(_.submit())}),e.\u0275\u0275elementEnd()()}if(2&t){const i=e.\u0275\u0275reference(14);e.\u0275\u0275property("open",_.open)("hasScrollingContent",!1),e.\u0275\u0275advance(5),e.\u0275\u0275i18nExp(e.\u0275\u0275pipeBind1(4,15,_.action))(e.\u0275\u0275pipeBind1(5,17,_.resource)),e.\u0275\u0275i18nApply(3),e.\u0275\u0275advance(2),e.\u0275\u0275property("formGroup",_.multisiteRealmForm),e.\u0275\u0275advance(3),e.\u0275\u0275property("invalid",_.multisiteRealmForm.controls.realmName.invalid&&(_.multisiteRealmForm.controls.realmName.touched||_.multisiteRealmForm.controls.realmName.dirty))("invalidText",i),e.\u0275\u0275advance(2),e.\u0275\u0275property("invalid",_.multisiteRealmForm.controls.realmName.invalid&&(_.multisiteRealmForm.controls.realmName.touched||_.multisiteRealmForm.controls.realmName.dirty))("autofocus",!0),e.\u0275\u0275advance(6),e.\u0275\u0275property("ngIf",_.action===_.actionLabels.EDIT&&_.info.data.is_default),e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf",_.action===_.actionLabels.EDIT&&!_.info.data.is_default),e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf",_.defaultRealmDisabled&&_.action===_.actionLabels.CREATE),e.\u0275\u0275advance(),e.\u0275\u0275property("form",_.multisiteRealmForm)("submitText",e.\u0275\u0275pipeBind1(22,19,_.action)+" "+e.\u0275\u0275pipeBind1(23,21,_.resource))("modalForm",!0)}},dependencies:[g.NgIf,oe.e,ie.O,Ct.B,j.S,ne.E,Qe.P,l.\u0275NgNoValidate,l.DefaultValueAccessor,l.NgControlStatus,l.NgControlStatusGroup,l.FormGroupDirective,l.FormControlName,c.Modal,c.ModalHeader,c.ModalContent,c.ModalHeaderHeading,c.TextInputLabelComponent,c.TextInput,c.Checkbox,g.TitleCasePipe,Oe.r]})}}var Co=T(87837),e_=T(12302);function O1(o,n){if(1&o&&(e.\u0275\u0275elementStart(0,"option",57),e.\u0275\u0275text(1),e.\u0275\u0275elementEnd()),2&o){const t=n.$implicit,_=e.\u0275\u0275nextContext();e.\u0275\u0275property("value",t.name)("selected",t.name===_.multisiteZoneForm.getValue("selectedZonegroup")),e.\u0275\u0275advance(),e.\u0275\u0275textInterpolate1(" ",t.name," ")}}function G1(o,n){1&o&&(e.\u0275\u0275elementStart(0,"span",58),e.\u0275\u0275i18n(1,9),e.\u0275\u0275elementEnd())}function N1(o,n){1&o&&(e.\u0275\u0275elementStart(0,"span",58),e.\u0275\u0275i18n(1,10),e.\u0275\u0275elementEnd())}function A1(o,n){1&o&&(e.\u0275\u0275elementStart(0,"span")(1,"cd-helper"),e.\u0275\u0275i18n(2,11),e.\u0275\u0275elementEnd()())}function h1(o,n){1&o&&(e.\u0275\u0275elementStart(0,"span")(1,"cd-helper"),e.\u0275\u0275i18n(2,12),e.\u0275\u0275elementEnd()())}function b1(o,n){1&o&&(e.\u0275\u0275elementStart(0,"cd-helper")(1,"span"),e.\u0275\u0275i18nStart(2,13),e.\u0275\u0275element(3,"cd-doc",59),e.\u0275\u0275i18nEnd(),e.\u0275\u0275elementEnd()())}function v1(o,n){1&o&&(e.\u0275\u0275elementStart(0,"span")(1,"cd-helper"),e.\u0275\u0275i18n(2,14),e.\u0275\u0275elementEnd()())}function L1(o,n){1&o&&(e.\u0275\u0275elementStart(0,"span")(1,"cd-helper"),e.\u0275\u0275i18n(2,15),e.\u0275\u0275elementEnd()())}function y1(o,n){if(1&o&&(e.\u0275\u0275elementStart(0,"cd-helper")(1,"span"),e.\u0275\u0275i18nStart(2,16),e.\u0275\u0275element(3,"a",60),e.\u0275\u0275i18nEnd(),e.\u0275\u0275elementEnd()()),2&o){const t=e.\u0275\u0275nextContext();e.\u0275\u0275advance(3),e.\u0275\u0275propertyInterpolate("href",t.docUrl,e.\u0275\u0275sanitizeUrl)}}function $1(o,n){1&o&&(e.\u0275\u0275elementStart(0,"span",58),e.\u0275\u0275i18n(1,17),e.\u0275\u0275elementEnd())}function D1(o,n){1&o&&(e.\u0275\u0275elementStart(0,"span",58),e.\u0275\u0275i18n(1,18),e.\u0275\u0275elementEnd())}function W1(o,n){if(1&o&&(e.\u0275\u0275elementStart(0,"option",57),e.\u0275\u0275text(1),e.\u0275\u0275elementEnd()),2&o){const t=n.$implicit,_=e.\u0275\u0275nextContext(3);e.\u0275\u0275property("value",t.name)("selected",t.name===_.multisiteZoneForm.getValue("placementTarget")),e.\u0275\u0275advance(),e.\u0275\u0275textInterpolate1(" ",t.name," ")}}function x1(o,n){if(1&o&&(e.\u0275\u0275elementStart(0,"option",57),e.\u0275\u0275text(1),e.\u0275\u0275elementEnd()),2&o){const t=n.$implicit,_=e.\u0275\u0275nextContext(3);e.\u0275\u0275property("value",t.poolname)("selected",t.poolname===_.multisiteZoneForm.getValue("placementDataPool")),e.\u0275\u0275advance(),e.\u0275\u0275textInterpolate1(" ",t.poolname," ")}}function w1(o,n){if(1&o&&(e.\u0275\u0275elementStart(0,"option",57),e.\u0275\u0275text(1),e.\u0275\u0275elementEnd()),2&o){const t=n.$implicit,_=e.\u0275\u0275nextContext(3);e.\u0275\u0275property("value",t.poolname)("selected",t.poolname===_.multisiteZoneForm.getValue("placementIndexPool")),e.\u0275\u0275advance(),e.\u0275\u0275textInterpolate1(" ",t.poolname," ")}}function U1(o,n){if(1&o&&(e.\u0275\u0275elementStart(0,"option",57),e.\u0275\u0275text(1),e.\u0275\u0275elementEnd()),2&o){const t=n.$implicit,_=e.\u0275\u0275nextContext(3);e.\u0275\u0275property("value",t.poolname)("selected",t.poolname===_.multisiteZoneForm.getValue("placementDataExtraPool")),e.\u0275\u0275advance(),e.\u0275\u0275textInterpolate1(" ",t.poolname," ")}}function k1(o,n){if(1&o&&(e.\u0275\u0275elementStart(0,"option",76),e.\u0275\u0275text(1),e.\u0275\u0275elementEnd()),2&o){const t=n.$implicit;e.\u0275\u0275property("value",t.key),e.\u0275\u0275advance(),e.\u0275\u0275textInterpolate1(" ",t.key," ")}}function z1(o,n){if(1&o&&(e.\u0275\u0275elementStart(0,"option",57),e.\u0275\u0275text(1),e.\u0275\u0275elementEnd()),2&o){const t=n.$implicit,_=e.\u0275\u0275nextContext(3);e.\u0275\u0275property("value",t.poolname)("selected",t.poolname===_.multisiteZoneForm.getValue("storageDataPool")),e.\u0275\u0275advance(),e.\u0275\u0275textInterpolate1(" ",t.poolname," ")}}function H1(o,n){if(1&o&&(e.\u0275\u0275elementStart(0,"option",76),e.\u0275\u0275text(1),e.\u0275\u0275elementEnd()),2&o){const t=n.$implicit;e.\u0275\u0275property("value",t),e.\u0275\u0275advance(),e.\u0275\u0275textInterpolate1(" ",t," ")}}function X1(o,n){if(1&o){const t=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"div")(1,"legend"),e.\u0275\u0275text(2,"Placement Targets"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(3,"div",31)(4,"label",61),e.\u0275\u0275i18n(5,19),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(6,"div",33)(7,"select",62),e.\u0275\u0275listener("change",function(i){e.\u0275\u0275restoreView(t);const a=e.\u0275\u0275nextContext(2);return e.\u0275\u0275resetView(a.getZonePlacementData(i.target.value))}),e.\u0275\u0275template(8,W1,2,3,"option",35),e.\u0275\u0275elementEnd()()(),e.\u0275\u0275elementStart(9,"div",31)(10,"label",63),e.\u0275\u0275i18n(11,20),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(12,"div",33)(13,"select",64),e.\u0275\u0275template(14,x1,2,3,"option",35),e.\u0275\u0275elementEnd()()(),e.\u0275\u0275elementStart(15,"div",31)(16,"label",65),e.\u0275\u0275i18n(17,21),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(18,"div",33)(19,"select",66),e.\u0275\u0275template(20,w1,2,3,"option",35),e.\u0275\u0275elementEnd()()(),e.\u0275\u0275elementStart(21,"div",31)(22,"label",67),e.\u0275\u0275i18n(23,22),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(24,"div",33)(25,"select",68),e.\u0275\u0275template(26,U1,2,3,"option",35),e.\u0275\u0275elementEnd()()(),e.\u0275\u0275elementStart(27,"div")(28,"legend"),e.\u0275\u0275text(29,"Storage Classes"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(30,"div",31)(31,"label",69),e.\u0275\u0275i18n(32,23),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(33,"div",33)(34,"select",70),e.\u0275\u0275listener("change",function(i){e.\u0275\u0275restoreView(t);const a=e.\u0275\u0275nextContext(2);return e.\u0275\u0275resetView(a.getStorageClassData(i.target.value))}),e.\u0275\u0275template(35,k1,2,2,"option",71),e.\u0275\u0275elementEnd()()(),e.\u0275\u0275elementStart(36,"div",31)(37,"label",72),e.\u0275\u0275i18n(38,24),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(39,"div",33)(40,"select",73),e.\u0275\u0275template(41,z1,2,3,"option",35),e.\u0275\u0275elementEnd()()(),e.\u0275\u0275elementStart(42,"div",31)(43,"label",74),e.\u0275\u0275i18n(44,25),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(45,"div",33)(46,"select",75),e.\u0275\u0275template(47,H1,2,2,"option",71),e.\u0275\u0275elementEnd()()()()()}if(2&o){const t=e.\u0275\u0275nextContext(2);e.\u0275\u0275advance(8),e.\u0275\u0275property("ngForOf",t.placementTargets),e.\u0275\u0275advance(5),e.\u0275\u0275property("value",t.placementDataPool),e.\u0275\u0275advance(),e.\u0275\u0275property("ngForOf",t.poolList),e.\u0275\u0275advance(6),e.\u0275\u0275property("ngForOf",t.poolList),e.\u0275\u0275advance(6),e.\u0275\u0275property("ngForOf",t.poolList),e.\u0275\u0275advance(9),e.\u0275\u0275property("ngForOf",t.storageClassList),e.\u0275\u0275advance(6),e.\u0275\u0275property("ngForOf",t.poolList),e.\u0275\u0275advance(6),e.\u0275\u0275property("ngForOf",t.compressionTypes)}}function B1(o,n){if(1&o&&(e.\u0275\u0275elementStart(0,"div",31),e.\u0275\u0275template(1,X1,48,8,"div",42),e.\u0275\u0275elementEnd()),2&o){const t=e.\u0275\u0275nextContext();e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf","edit"===t.action)}}class Un{constructor(n,t,_,i,a,r,s,d){this.activeModal=n,this.actionLabels=t,this.rgwMultisiteService=_,this.rgwZoneService=i,this.rgwZoneGroupService=a,this.notificationService=r,this.rgwUserService=s,this.modalService=d,this.editing=!1,this.defaultsInfo=[],this.multisiteInfo=[],this.zonegroupList=[],this.zoneList=[],this.poolList=[],this.storageClassList=[],this.disableDefault=!1,this.disableMaster=!1,this.isMetadataSync=!1,this.syncStatusTimedOut=!1,this.createSystemUser=!1,this.compressionTypes=["lz4","zlib","snappy"],this.userListReady=!1,this.action=this.editing?this.actionLabels.EDIT+this.resource:this.actionLabels.CREATE+this.resource,this.createForm()}createForm(){this.multisiteZoneForm=new Fe.$({zoneName:new l.UntypedFormControl(null,{validators:[l.Validators.required,F.xQ.custom("uniqueName",n=>"create"===this.action&&this.zoneNames&&-1!==this.zoneNames.indexOf(n))]}),default_zone:new l.UntypedFormControl(!1),master_zone:new l.UntypedFormControl(!1),selectedZonegroup:new l.UntypedFormControl(null),zone_endpoints:new l.UntypedFormControl(null,{validators:[F.xQ.url,l.Validators.required]}),access_key:new l.UntypedFormControl("",{}),secret_key:new l.UntypedFormControl("",{}),placementTarget:new l.UntypedFormControl(null),placementDataPool:new l.UntypedFormControl(""),placementIndexPool:new l.UntypedFormControl(null),placementDataExtraPool:new l.UntypedFormControl(null),storageClass:new l.UntypedFormControl(null),storageDataPool:new l.UntypedFormControl(null),storageCompression:new l.UntypedFormControl(null)})}onZoneGroupChange(n){let t=new z.Oe;t.name=n,this.rgwZoneGroupService.get(t).subscribe(_=>{N().isEmpty(_.master_zone)?(this.multisiteZoneForm.get("master_zone").setValue(!0),this.multisiteZoneForm.get("master_zone").disable(),this.disableMaster=!1):!N().isEmpty(_.master_zone)&&"create"===this.action&&(this.multisiteZoneForm.get("master_zone").setValue(!1),this.multisiteZoneForm.get("master_zone").disable(),this.disableMaster=!0)}),this.multisiteZoneForm.getValue("selectedZonegroup")!==this.defaultsInfo.defaultZonegroupName&&(this.disableDefault=!0,this.multisiteZoneForm.get("default_zone").disable())}ngOnInit(){if(this.zonegroupList=void 0!==this.multisiteInfo[1]&&this.multisiteInfo[1].hasOwnProperty("zonegroups")?this.multisiteInfo[1].zonegroups:[],this.zoneList=void 0!==this.multisiteInfo[2]&&this.multisiteInfo[2].hasOwnProperty("zones")?this.multisiteInfo[2].zones:[],this.zoneNames=this.zoneList.map(n=>n.name),"create"===this.action&&void 0!==this.defaultsInfo.defaultZonegroupName&&(this.multisiteZoneForm.get("selectedZonegroup").setValue(this.defaultsInfo.defaultZonegroupName),this.onZoneGroupChange(this.defaultsInfo.defaultZonegroupName)),"edit"===this.action){this.placementTargets=this.info.data?.parent||this.info.parent?(this.info.data?.parentNode||this.info.parent.data)?.placement_targets:[],this.rgwZoneService.getPoolNames().subscribe(t=>{this.poolList=t}),this.multisiteZoneForm.get("zoneName").setValue(this.info.data.name),this.multisiteZoneForm.get("selectedZonegroup").setValue(this.info.data.parent),this.multisiteZoneForm.get("default_zone").setValue(this.info.data.is_default),this.multisiteZoneForm.get("master_zone").setValue(this.info.data.is_master),this.multisiteZoneForm.get("zone_endpoints").setValue(this.info.data.endpoints.toString()),this.multisiteZoneForm.get("access_key").setValue(this.info.data.access_key),this.multisiteZoneForm.get("secret_key").setValue(this.info.data.secret_key),this.multisiteZoneForm.get("placementTarget").setValue((this.info.data?.parentNode||this.info.parent.data)?.default_placement),this.getZonePlacementData(this.multisiteZoneForm.getValue("placementTarget")),this.info.data.is_default&&(this.isDefaultZone=!0,this.multisiteZoneForm.get("default_zone").disable()),this.info.data.is_master&&(this.isMasterZone=!0,this.multisiteZoneForm.get("master_zone").disable());(new z.$H).name=this.info.data.name,this.onZoneGroupChange(this.info.data.parent)}this.multisiteZoneForm.getValue("selectedZonegroup")!==this.defaultsInfo.defaultZonegroupName&&(this.disableDefault=!0,this.multisiteZoneForm.get("default_zone").disable())}getZonePlacementData(n){this.zone=new z.$H,this.zone.name=this.info.data.name,this.rgwZoneService.get(this.zone).subscribe(t=>{if(this.zoneInfo=t,this.zoneInfo&&this.zoneInfo.placement_pools){const _=this.zoneInfo.placement_pools.map(i=>i.key);this.placementTargets=this.placementTargets.filter(i=>_.includes(i.name)),this.zoneInfo.placement_pools.forEach(i=>{if(i.key===n){let a=i.val.storage_classes;this.storageClassList=Object.entries(a).map(([u,m])=>({key:u,value:m}));let r=a.STANDARD?a.STANDARD.data_pool:"",s=i.val.index_pool,d=i.val.data_extra_pool;this.poolList.push({poolname:r}),this.poolList.push({poolname:s}),this.poolList.push({poolname:d}),this.multisiteZoneForm.get("storageClass").setValue(this.storageClassList[0].key),this.getStorageClassData(this.storageClassList[0].key),this.multisiteZoneForm.get("placementDataPool").setValue(r),this.multisiteZoneForm.get("placementIndexPool").setValue(s),this.multisiteZoneForm.get("placementDataExtraPool").setValue(d)}})}})}getStorageClassData(n){let t=this.storageClassList.find(_=>_.key===n);this.poolList.push({poolname:t.value.data_pool}),this.multisiteZoneForm.get("storageDataPool").setValue(t.value.data_pool),this.multisiteZoneForm.get("storageCompression").setValue(t.value.compression_type)}submit(){const n=this.multisiteZoneForm.getRawValue();"create"===this.action?(this.zonegroup=new z.Oe,this.zonegroup.name=n.selectedZonegroup,this.zone=new z.$H,this.zone.name=n.zoneName,this.zone.endpoints=n.zone_endpoints,this.zone.system_key=new z.B5,this.zone.system_key.access_key=n.access_key,this.zone.system_key.secret_key=n.secret_key,this.rgwZoneService.create(this.zone,this.zonegroup,n.default_zone,n.master_zone,this.zone.endpoints).subscribe(()=>{this.notificationService.show(x._.success,$localize`Zone: '${n.zoneName}' created successfully`),this.activeModal.close()},()=>{this.multisiteZoneForm.setErrors({cdSubmitButton:!0})})):"edit"===this.action&&(this.zonegroup=new z.Oe,this.zonegroup.name=n.selectedZonegroup,this.zone=new z.$H,this.zone.name=this.info.data.name,this.zone.endpoints=n.zone_endpoints,this.zone.system_key=new z.B5,this.zone.system_key.access_key=n.access_key,this.zone.system_key.secret_key=n.secret_key,this.rgwZoneService.update(this.zone,this.zonegroup,n.zoneName,n.default_zone,n.master_zone,this.zone.endpoints,n.placementTarget,n.placementDataPool,n.placementIndexPool,n.placementDataExtraPool,n.storageClass,n.storageDataPool,n.storageCompression).subscribe(()=>{this.notificationService.show(x._.success,$localize`Zone: '${n.zoneName}' updated successfully`),this.activeModal.close()},()=>{this.multisiteZoneForm.setErrors({cdSubmitButton:!0})}))}static{this.\u0275fac=function(t){return new(t||Un)(e.\u0275\u0275directiveInject(b.NgbActiveModal),e.\u0275\u0275directiveInject(M.Ss),e.\u0275\u0275directiveInject(xe.A),e.\u0275\u0275directiveInject(At.w),e.\u0275\u0275directiveInject(ke.Z),e.\u0275\u0275directiveInject(te.J),e.\u0275\u0275directiveInject(Rt.p),e.\u0275\u0275directiveInject(Vt.B))}}static{this.\u0275cmp=e.\u0275\u0275defineComponent({type:Un,selectors:[["cd-rgw-multisite-zone-form"]],decls:75,vars:29,consts:()=>{let n,t,_,i,a,r,s,d,u,m,C,O,f,I,R,h,G,U,k,y,H,X,B,V,S;return n=$localize`:form title␟fb127ea03835b3230f0ed981c7080e2ccb879621␟3346778808274133574:${"\ufffd0\ufffd"}:INTERPOLATION: ${"\ufffd1\ufffd"}:INTERPOLATION_1:`,t=$localize`:␟dd02566a4692aa5068b135eda79189908b8f7cbb␟7715694898062586626:Select Zone Group`,_=$localize`:␟9908ce895693044630b8188ac54903ccdde33f2f␟2331642177230896856:Zone Name`,i=$localize`:␟ff7cee38a2259526c519f878e71b964f41db4348␟5607669932062416162:Default`,a=$localize`:␟bceb00c745ce685e6f6f3eda4fd9a4dab5279296␟8083897527920072255:Master`,r=$localize`:␟35bc68bd793eed6ee0232bfa6c4d72bc8c07fe69␟1161753671258784736:Endpoints`,s=$localize`:␟9d79efe7f52a83246afb20d5e944a18e813851c9␟8755769621361587233:S3 access key ${"\ufffd#47\ufffd"}:START_TAG_CD_HELPER:${"\ufffd#48\ufffd"}:START_TAG_SPAN:To see or copy your S3 access key, go to ${"[\ufffd#49\ufffd|\ufffd#50\ufffd|\ufffd#51\ufffd|\ufffd#52\ufffd]"}:START_BOLD_TEXT:Object Gateway > Users${"[\ufffd/#49\ufffd|\ufffd/#50\ufffd|\ufffd/#51\ufffd|\ufffd/#52\ufffd]"}:CLOSE_BOLD_TEXT: and click on your user name. In ${"[\ufffd#49\ufffd|\ufffd#50\ufffd|\ufffd#51\ufffd|\ufffd#52\ufffd]"}:START_BOLD_TEXT:Keys${"[\ufffd/#49\ufffd|\ufffd/#50\ufffd|\ufffd/#51\ufffd|\ufffd/#52\ufffd]"}:CLOSE_BOLD_TEXT:, click ${"[\ufffd#49\ufffd|\ufffd#50\ufffd|\ufffd#51\ufffd|\ufffd#52\ufffd]"}:START_BOLD_TEXT:Show${"[\ufffd/#49\ufffd|\ufffd/#50\ufffd|\ufffd/#51\ufffd|\ufffd/#52\ufffd]"}:CLOSE_BOLD_TEXT:. View the access key by clicking Show and copy the key by clicking ${"[\ufffd#49\ufffd|\ufffd#50\ufffd|\ufffd#51\ufffd|\ufffd#52\ufffd]"}:START_BOLD_TEXT:Copy to Clipboard${"[\ufffd/#49\ufffd|\ufffd/#50\ufffd|\ufffd/#51\ufffd|\ufffd/#52\ufffd]"}:CLOSE_BOLD_TEXT:.${"\ufffd/#48\ufffd"}:CLOSE_TAG_SPAN:${"\ufffd/#47\ufffd"}:CLOSE_TAG_CD_HELPER:`,s=e.\u0275\u0275i18nPostprocess(s),d=$localize`:␟d32f7aed3054d14851522e166187a7588888589d␟6429520818342694278:S3 secret key ${"\ufffd#60\ufffd"}:START_TAG_CD_HELPER:${"\ufffd#61\ufffd"}:START_TAG_SPAN:To see or copy your S3 access key, go to ${"[\ufffd#62\ufffd|\ufffd#63\ufffd|\ufffd#64\ufffd|\ufffd#65\ufffd]"}:START_BOLD_TEXT:Object Gateway > Users${"[\ufffd/#62\ufffd|\ufffd/#63\ufffd|\ufffd/#64\ufffd|\ufffd/#65\ufffd]"}:CLOSE_BOLD_TEXT: and click on your user name. In ${"[\ufffd#62\ufffd|\ufffd#63\ufffd|\ufffd#64\ufffd|\ufffd#65\ufffd]"}:START_BOLD_TEXT:Keys${"[\ufffd/#62\ufffd|\ufffd/#63\ufffd|\ufffd/#64\ufffd|\ufffd/#65\ufffd]"}:CLOSE_BOLD_TEXT:, click ${"[\ufffd#62\ufffd|\ufffd#63\ufffd|\ufffd#64\ufffd|\ufffd#65\ufffd]"}:START_BOLD_TEXT:Show${"[\ufffd/#62\ufffd|\ufffd/#63\ufffd|\ufffd/#64\ufffd|\ufffd/#65\ufffd]"}:CLOSE_BOLD_TEXT:. View the secret key by clicking Show and copy the key by clicking ${"[\ufffd#62\ufffd|\ufffd#63\ufffd|\ufffd#64\ufffd|\ufffd#65\ufffd]"}:START_BOLD_TEXT:Copy to Clipboard${"[\ufffd/#62\ufffd|\ufffd/#63\ufffd|\ufffd/#64\ufffd|\ufffd/#65\ufffd]"}:CLOSE_BOLD_TEXT:.${"\ufffd/#61\ufffd"}:CLOSE_TAG_SPAN:${"\ufffd/#60\ufffd"}:CLOSE_TAG_CD_HELPER:`,d=e.\u0275\u0275i18nPostprocess(d),u=$localize`:␟7cbdabcece469fab89cfa687ab152bca18b97498␟1417693714872528491:This field is required.`,m=$localize`:␟695ea1f88ac01e66516f5877560401b57c0f38f5␟1580348638428352117:The chosen zone name is already in use.`,C=$localize`:␟e04ceb4e741be8de534d1a855056c769408440f1␟5348234875492943518:Default zone can only exist in a default zone group. `,O=$localize`:␟7309903273e39ec5fe31605f8aa04ff1fa931046␟8923360891523541462:You cannot unset the default flag. `,f=$localize`:␟f293576217ec5390da5fb50c1774e4d1cd4e7083␟7650210385461071104:Please consult the ${"\ufffd#3\ufffd"}:START_TAG_CD_DOC:${"\ufffd/#3\ufffd"}:CLOSE_TAG_CD_DOC: to follow the failover mechanism`,I=$localize`:␟c083483c5ff01c1061b6ad563e30fa09aeed84a6␟3887321171306956543:Master zone already exists for the selected zone group. `,R=$localize`:␟78bd2f11dc3d5dd44e63143106f1d91978f717eb␟2545732339194990527:You cannot unset the master flag. `,h=$localize`:␟0584c342465259a05f74889016e53f0d907391f4␟215970690432556805:Please consult the ${"\ufffd#3\ufffd"}:START_LINK:documentation${"\ufffd/#3\ufffd"}:CLOSE_LINK: to follow the failover mechanism`,G=$localize`:␟7cbdabcece469fab89cfa687ab152bca18b97498␟1417693714872528491:This field is required.`,U=$localize`:␟9ddccf3ea37d9232c2f47f32d4b884b4d416daf5␟4061698394390279322:Please enter a valid URL.`,k=$localize`:␟a4aab1f837bc8ec222e4f25922465d1c5929a1fc␟1277893094050443940:Placement target`,y=$localize`:␟870aee0dd31a9643bf62007beb8f1ae1deb34d42␟7334279777218381504:Data pool`,H=$localize`:␟69cc0963e14b3def8891affc5d202a15566f3be4␟7099514485777865529:Index pool`,X=$localize`:␟4d9919e96f37b3022f4e41892592c1af8a7c7d7f␟2609251161021843068:Data extra pool`,B=$localize`:␟5a237d4cea2a69c625c9c0a081adc9acc4664843␟1748150374925445786:Storage Class`,V=$localize`:␟870aee0dd31a9643bf62007beb8f1ae1deb34d42␟7334279777218381504:Data pool`,S=$localize`:␟2208d63d5940ce656006a220102b1eb2b5e553da␟3454103840680130627:Compression`,[["formDir","ngForm"],n,t,_,i,a,r,s,d,u,m,C,O,f,I,R,h,G,U,k,y,H,X,B,V,S,[3,"modalRef"],[1,"modal-title"],[1,"modal-content"],["name","multisiteZoneForm","novalidate","",3,"formGroup"],[1,"modal-body"],[1,"form-group","row"],["for","selectedZonegroup",1,"cd-col-form-label"],[1,"cd-col-form-input"],["id","selectedZonegroup","formControlName","selectedZonegroup","name","selectedZonegroup",1,"form-select",3,"change"],[3,"value","selected",4,"ngFor","ngForOf"],["for","zonegroupName",1,"cd-col-form-label","required"],["type","text","placeholder","Zone name...","id","zoneName","name","zoneName","formControlName","zoneName",1,"form-control"],["class","invalid-feedback",4,"ngIf"],[1,"custom-control","custom-checkbox"],["id","default_zone","name","default_zone","formControlName","default_zone","type","checkbox",1,"form-check-input"],["for","default_zone",1,"form-check-label"],[4,"ngIf"],["id","master_zone","name","master_zone","formControlName","master_zone","type","checkbox",1,"form-check-input"],["for","master_zone",1,"form-check-label"],["for","zone_endpoints",1,"cd-col-form-label","required"],["type","text","placeholder","e.g, http://ceph-node-00.com:80","id","zone_endpoints","name","zone_endpoints","formControlName","zone_endpoints",1,"form-control"],["for","access_key",1,"cd-col-form-label"],[1,"input-group"],["type","password","placeholder","DiPt4V7WWvy2njL1z6aC","id","access_key","name","access_key","formControlName","access_key",1,"form-control"],["type","button","cdPasswordButton","access_key",1,"btn","btn-light"],["for","secret_key",1,"cd-col-form-label"],["type","password","placeholder","xSZUdYky0bTctAdCEEW8ikhfBVKsBV5LFYL82vvh","id","secret_key","name","secret_key","formControlName","secret_key",1,"form-control"],["type","button","cdPasswordButton","secret_key",1,"btn","btn-light"],["class","form-group row",4,"ngIf"],[1,"modal-footer"],[3,"submitActionEvent","form","submitText"],[3,"value","selected"],[1,"invalid-feedback"],["section","rgw-multisite"],[3,"href"],["for","placementTarget",1,"cd-col-form-label"],["id","placementTarget","formControlName","placementTarget","name","placementTarget",1,"form-select",3,"change"],["for","placementDataPool",1,"cd-col-form-label"],["id","placementDataPool","formControlName","placementDataPool","name","placementDataPool",1,"form-select",3,"value"],["for","placementIndexPool",1,"cd-col-form-label"],["id","placementIndexPool","formControlName","placementIndexPool","name","placementIndexPool",1,"form-select"],["for","placementDataExtraPool",1,"cd-col-form-label"],["id","placementDataExtraPool","formControlName","placementDataExtraPool","name","placementDataExtraPool",1,"form-select"],["for","storageClass",1,"cd-col-form-label"],["id","storageClass","formControlName","storageClass","name","storageClass",1,"form-select",3,"change"],[3,"value",4,"ngFor","ngForOf"],["for","storageDataPool",1,"cd-col-form-label"],["id","storageDataPool","formControlName","storageDataPool","name","storageDataPool",1,"form-select"],["for","storageCompression",1,"cd-col-form-label"],["id","storageCompression","formControlName","storageCompression","name","storageCompression",1,"form-select"],[3,"value"]]},template:function(t,_){if(1&t){const i=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"cd-modal",26),e.\u0275\u0275elementContainerStart(1,27),e.\u0275\u0275i18n(2,1),e.\u0275\u0275pipe(3,"titlecase"),e.\u0275\u0275pipe(4,"upperFirst"),e.\u0275\u0275elementContainerEnd(),e.\u0275\u0275elementContainerStart(5,28),e.\u0275\u0275elementStart(6,"form",29,0)(8,"div",30)(9,"div",31)(10,"label",32),e.\u0275\u0275i18n(11,2),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(12,"div",33)(13,"select",34),e.\u0275\u0275listener("change",function(r){return e.\u0275\u0275restoreView(i),e.\u0275\u0275resetView(_.onZoneGroupChange(r.target.value))}),e.\u0275\u0275template(14,O1,2,3,"option",35),e.\u0275\u0275elementEnd()()(),e.\u0275\u0275elementStart(15,"div",31)(16,"label",36),e.\u0275\u0275i18n(17,3),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(18,"div",33),e.\u0275\u0275element(19,"input",37),e.\u0275\u0275template(20,G1,2,0,"span",38)(21,N1,2,0,"span",38),e.\u0275\u0275elementStart(22,"div",39),e.\u0275\u0275element(23,"input",40),e.\u0275\u0275elementStart(24,"label",41),e.\u0275\u0275i18n(25,4),e.\u0275\u0275elementEnd(),e.\u0275\u0275template(26,A1,3,0,"span",42)(27,h1,3,0,"span",42)(28,b1,4,0,"cd-helper",42),e.\u0275\u0275element(29,"br"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(30,"div",39),e.\u0275\u0275element(31,"input",43),e.\u0275\u0275elementStart(32,"label",44),e.\u0275\u0275i18n(33,5),e.\u0275\u0275elementEnd(),e.\u0275\u0275template(34,v1,3,0,"span",42)(35,L1,3,0,"span",42)(36,y1,4,1,"cd-helper",42),e.\u0275\u0275elementEnd()()(),e.\u0275\u0275elementStart(37,"div",31)(38,"label",45),e.\u0275\u0275i18n(39,6),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(40,"div",33),e.\u0275\u0275element(41,"input",46),e.\u0275\u0275template(42,$1,2,0,"span",38)(43,D1,2,0,"span",38),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(44,"div",31)(45,"label",47),e.\u0275\u0275i18nStart(46,7),e.\u0275\u0275elementStart(47,"cd-helper")(48,"span"),e.\u0275\u0275element(49,"b")(50,"b")(51,"b")(52,"b"),e.\u0275\u0275elementEnd()(),e.\u0275\u0275i18nEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(53,"div",33)(54,"div",48),e.\u0275\u0275element(55,"input",49)(56,"button",50),e.\u0275\u0275elementEnd()()(),e.\u0275\u0275elementStart(57,"div",31)(58,"label",51),e.\u0275\u0275i18nStart(59,8),e.\u0275\u0275elementStart(60,"cd-helper")(61,"span"),e.\u0275\u0275element(62,"b")(63,"b")(64,"b")(65,"b"),e.\u0275\u0275elementEnd()(),e.\u0275\u0275i18nEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(66,"div",33)(67,"div",48),e.\u0275\u0275element(68,"input",52)(69,"button",53),e.\u0275\u0275elementEnd()()(),e.\u0275\u0275template(70,B1,2,1,"div",54),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(71,"div",55)(72,"cd-form-button-panel",56),e.\u0275\u0275pipe(73,"titlecase"),e.\u0275\u0275pipe(74,"upperFirst"),e.\u0275\u0275listener("submitActionEvent",function(){return e.\u0275\u0275restoreView(i),e.\u0275\u0275resetView(_.submit())}),e.\u0275\u0275elementEnd()()(),e.\u0275\u0275elementContainerEnd(),e.\u0275\u0275elementEnd()}if(2&t){const i=e.\u0275\u0275reference(7);e.\u0275\u0275property("modalRef",_.activeModal),e.\u0275\u0275advance(4),e.\u0275\u0275i18nExp(e.\u0275\u0275pipeBind1(3,21,_.action))(e.\u0275\u0275pipeBind1(4,23,_.resource)),e.\u0275\u0275i18nApply(2),e.\u0275\u0275advance(2),e.\u0275\u0275property("formGroup",_.multisiteZoneForm),e.\u0275\u0275advance(7),e.\u0275\u0275attribute("disabled","edit"===_.action||null),e.\u0275\u0275advance(),e.\u0275\u0275property("ngForOf",_.zonegroupList),e.\u0275\u0275advance(6),e.\u0275\u0275property("ngIf",_.multisiteZoneForm.showError("zoneName",i,"required")),e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf",_.multisiteZoneForm.showError("zoneName",i,"uniqueName")),e.\u0275\u0275advance(2),e.\u0275\u0275attribute("disabled","edit"===_.action||null),e.\u0275\u0275advance(3),e.\u0275\u0275property("ngIf",_.disableDefault&&"create"===_.action),e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf",_.isDefaultZone),e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf","edit"===_.action&&!_.isDefaultZone),e.\u0275\u0275advance(3),e.\u0275\u0275attribute("disabled","edit"===_.action||null),e.\u0275\u0275advance(3),e.\u0275\u0275property("ngIf",_.disableMaster),e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf",_.isMasterZone),e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf","edit"===_.action&&!_.isMasterZone),e.\u0275\u0275advance(6),e.\u0275\u0275property("ngIf",_.multisiteZoneForm.showError("zone_endpoints",i,"required")),e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf",_.multisiteZoneForm.showError("zone_endpoints",i,"invalidURL")),e.\u0275\u0275advance(27),e.\u0275\u0275property("ngIf","edit"===_.action),e.\u0275\u0275advance(2),e.\u0275\u0275property("form",_.multisiteZoneForm)("submitText",e.\u0275\u0275pipeBind1(73,25,_.action)+" "+e.\u0275\u0275pipeBind1(74,27,_.resource))}},dependencies:[g.NgForOf,g.NgIf,Ot.m,Xe.z,Co.C,oe.e,e_.h,j.S,Be.a,De.C,ne.E,l.\u0275NgNoValidate,l.NgSelectOption,l.\u0275NgSelectMultipleOption,l.DefaultValueAccessor,l.CheckboxControlValueAccessor,l.SelectControlValueAccessor,l.NgControlStatus,l.NgControlStatusGroup,l.FormGroupDirective,l.FormControlName,c.Option,g.TitleCasePipe,Oe.r]})}}var V1=T(2475);function Z1(o,n){if(1&o&&(e.\u0275\u0275elementStart(0,"option",50),e.\u0275\u0275text(1),e.\u0275\u0275elementEnd()),2&o){const t=n.$implicit,_=e.\u0275\u0275nextContext();e.\u0275\u0275property("value",t.name)("selected",t.name===_.multisiteZonegroupForm.getValue("selectedRealm")),e.\u0275\u0275advance(),e.\u0275\u0275textInterpolate1(" ",t.name," ")}}function K1(o,n){1&o&&(e.\u0275\u0275elementStart(0,"span",51),e.\u0275\u0275i18n(1,8),e.\u0275\u0275elementEnd())}function q1(o,n){1&o&&(e.\u0275\u0275elementStart(0,"span",51),e.\u0275\u0275i18n(1,9),e.\u0275\u0275elementEnd())}function j1(o,n){1&o&&(e.\u0275\u0275elementStart(0,"span")(1,"cd-helper"),e.\u0275\u0275i18n(2,10),e.\u0275\u0275elementEnd()())}function Y1(o,n){1&o&&(e.\u0275\u0275elementStart(0,"cd-helper")(1,"span"),e.\u0275\u0275i18nStart(2,11),e.\u0275\u0275element(3,"cd-doc",52),e.\u0275\u0275i18nEnd(),e.\u0275\u0275elementEnd()())}function Q1(o,n){1&o&&(e.\u0275\u0275elementStart(0,"cd-helper")(1,"span"),e.\u0275\u0275i18n(2,12),e.\u0275\u0275elementEnd()())}function J1(o,n){1&o&&(e.\u0275\u0275elementStart(0,"span")(1,"cd-helper"),e.\u0275\u0275i18n(2,13),e.\u0275\u0275elementEnd()())}function eu(o,n){1&o&&(e.\u0275\u0275elementStart(0,"cd-helper")(1,"span"),e.\u0275\u0275i18nStart(2,14),e.\u0275\u0275element(3,"cd-doc",52),e.\u0275\u0275i18nEnd(),e.\u0275\u0275elementEnd()())}function tu(o,n){1&o&&(e.\u0275\u0275elementStart(0,"cd-helper")(1,"span"),e.\u0275\u0275i18n(2,15),e.\u0275\u0275elementEnd()())}function nu(o,n){1&o&&(e.\u0275\u0275elementStart(0,"span",51),e.\u0275\u0275i18n(1,16),e.\u0275\u0275elementEnd())}function ou(o,n){1&o&&(e.\u0275\u0275elementStart(0,"span",51),e.\u0275\u0275i18n(1,17),e.\u0275\u0275elementEnd())}function _u(o,n){1&o&&(e.\u0275\u0275elementStart(0,"span",51),e.\u0275\u0275i18n(1,19),e.\u0275\u0275elementEnd())}function iu(o,n){if(1&o&&(e.\u0275\u0275elementStart(0,"div",30)(1,"label",53),e.\u0275\u0275i18n(2,18),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(3,"div",32),e.\u0275\u0275element(4,"cd-select-badges",54)(5,"br"),e.\u0275\u0275template(6,_u,2,0,"span",38),e.\u0275\u0275elementEnd()()),2&o){const t=e.\u0275\u0275nextContext();e.\u0275\u0275advance(4),e.\u0275\u0275property("data",t.zonegroupZoneNames)("options",t.labelsOption)("customBadges",!0),e.\u0275\u0275advance(2),e.\u0275\u0275property("ngIf",t.isRemoveMasterZone)}}function au(o,n){1&o&&(e.\u0275\u0275elementStart(0,"span"),e.\u0275\u0275i18n(1,24),e.\u0275\u0275elementEnd())}function ru(o,n){if(1&o){const t=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"div")(1,"div",59)(2,"div",60),e.\u0275\u0275text(3),e.\u0275\u0275pipe(4,"ordinal"),e.\u0275\u0275elementStart(5,"span",61),e.\u0275\u0275listener("click",function(){const i=e.\u0275\u0275restoreView(t).index,a=e.\u0275\u0275nextContext(2);return e.\u0275\u0275resetView(a.removePlacementTarget(i))}),e.\u0275\u0275text(6,"\xd7"),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(7,"div",62)(8,"div",30)(9,"label",63),e.\u0275\u0275i18n(10,21),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(11,"div",32),e.\u0275\u0275element(12,"input",64),e.\u0275\u0275elementStart(13,"span",51),e.\u0275\u0275template(14,au,2,0,"span",42),e.\u0275\u0275elementEnd()()(),e.\u0275\u0275elementStart(15,"div",30)(16,"label",65),e.\u0275\u0275i18n(17,22),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(18,"div",32),e.\u0275\u0275element(19,"input",66),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(20,"div",30)(21,"label",67),e.\u0275\u0275i18n(22,23),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(23,"div",32),e.\u0275\u0275element(24,"input",68),e.\u0275\u0275elementEnd()()()()()}if(2&o){const t=n.$implicit,_=n.index,i=e.\u0275\u0275nextContext(2),a=e.\u0275\u0275reference(6);e.\u0275\u0275advance(),e.\u0275\u0275property("formGroup",t),e.\u0275\u0275advance(2),e.\u0275\u0275textInterpolate1(" ",e.\u0275\u0275pipeBind1(4,3,_+1)," "),e.\u0275\u0275advance(11),e.\u0275\u0275property("ngIf",i.showError(_,"placement_id",a,"required"))}}function lu(o,n){if(1&o){const t=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"div")(1,"legend"),e.\u0275\u0275text(2,"Placement targets"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementContainerStart(3,55),e.\u0275\u0275template(4,ru,25,5,"div",56),e.\u0275\u0275elementContainerEnd(),e.\u0275\u0275elementStart(5,"button",57),e.\u0275\u0275listener("click",function(){e.\u0275\u0275restoreView(t);const i=e.\u0275\u0275nextContext();return e.\u0275\u0275resetView(i.addPlacementTarget())}),e.\u0275\u0275namespaceSVG(),e.\u0275\u0275element(6,"svg",58),e.\u0275\u0275namespaceHTML(),e.\u0275\u0275elementContainerStart(7),e.\u0275\u0275i18n(8,20),e.\u0275\u0275elementContainerEnd(),e.\u0275\u0275elementEnd()()}if(2&o){const t=e.\u0275\u0275nextContext();e.\u0275\u0275advance(4),e.\u0275\u0275property("ngForOf",t.placementTargets.controls)("ngForTrackBy",t.trackByFn),e.\u0275\u0275advance(2),e.\u0275\u0275property("cdsIcon",t.icons.add)("size",t.icons.size16)}}class kn{constructor(n,t,_,i,a){this.activeModal=n,this.actionLabels=t,this.rgwZonegroupService=_,this.notificationService=i,this.formBuilder=a,this.icons=L.FI,this.editing=!1,this.defaultsInfo=[],this.multisiteInfo=[],this.realmList=[],this.zonegroupList=[],this.isMaster=!1,this.labelsOption=[],this.zoneList=[],this.isRemoveMasterZone=!1,this.disableDefault=!1,this.disableMaster=!1,this.action=this.editing?this.actionLabels.EDIT+this.resource:this.actionLabels.CREATE+this.resource,this.createForm()}createForm(){this.multisiteZonegroupForm=new Fe.$({default_zonegroup:new l.UntypedFormControl(!1),zonegroupName:new l.UntypedFormControl(null,{validators:[l.Validators.required,F.xQ.custom("uniqueName",n=>"create"===this.action&&this.zonegroupNames&&-1!==this.zonegroupNames.indexOf(n))]}),master_zonegroup:new l.UntypedFormControl(!1),selectedRealm:new l.UntypedFormControl(null),zonegroup_endpoints:new l.UntypedFormControl(null,{validators:[F.xQ.url,l.Validators.required]}),placementTargets:this.formBuilder.array([])})}ngOnInit(){N().forEach(this.multisiteZonegroupForm.get("placementTargets"),i=>{this.addPlacementTarget().patchValue(i)}),this.placementTargets=this.multisiteZonegroupForm.get("placementTargets"),this.realmList=void 0!==this.multisiteInfo[0]&&this.multisiteInfo[0].hasOwnProperty("realms")?this.multisiteInfo[0].realms:[],this.zonegroupList=void 0!==this.multisiteInfo[1]&&this.multisiteInfo[1].hasOwnProperty("zonegroups")?this.multisiteInfo[1].zonegroups:[],this.zonegroupList.forEach(i=>{!0===i.is_master&&!N().isEmpty(i.realm_id)&&(this.isMaster=!0,this.disableMaster=!0)}),this.isMaster||(this.multisiteZonegroupForm.get("master_zonegroup").setValue(!0),this.multisiteZonegroupForm.get("master_zonegroup").disable()),this.zoneList=void 0!==this.multisiteInfo[2]&&this.multisiteInfo[2].hasOwnProperty("zones")?this.multisiteInfo[2].zones:[],this.zonegroupNames=this.zonegroupList.map(i=>i.name);const _=this.zonegroupList.map(i=>i.zones).reduce((i,a)=>i.concat(a),[]).map(i=>i.name);if(this.allZoneNames=this.zoneList.map(i=>i.name),this.allZoneNames=N().difference(this.allZoneNames,_),"create"===this.action&&null!==this.defaultsInfo.defaultRealmName&&(this.multisiteZonegroupForm.get("selectedRealm").setValue(this.defaultsInfo.defaultRealmName),this.disableMaster&&this.multisiteZonegroupForm.get("master_zonegroup").disable()),"edit"===this.action){this.multisiteZonegroupForm.get("zonegroupName").setValue(this.info.data.name),this.multisiteZonegroupForm.get("selectedRealm").setValue(this.info.data.parent),this.multisiteZonegroupForm.get("default_zonegroup").setValue(this.info.data.is_default),this.multisiteZonegroupForm.get("master_zonegroup").setValue(this.info.data.is_master),this.multisiteZonegroupForm.get("zonegroup_endpoints").setValue(this.info.data.endpoints.toString()),this.info.data.is_default&&this.multisiteZonegroupForm.get("default_zonegroup").disable(),!this.info.data.is_default&&this.multisiteZonegroupForm.getValue("selectedRealm")!==this.defaultsInfo.defaultRealmName&&(this.multisiteZonegroupForm.get("default_zonegroup").disable(),this.disableDefault=!0),(this.info.data.is_master||this.disableMaster)&&this.multisiteZonegroupForm.get("master_zonegroup").disable(),this.zonegroupZoneNames=this.info.data.zones.map(a=>a.name),this.zgZoneNames=this.info.data.zones.map(a=>a.name),this.zgZoneIds=this.info.data.zones.map(a=>a.id);const i=new Set(this.allZoneNames);this.labelsOption=Array.from(i).map(a=>({enabled:!0,name:a,selected:!1,description:null})),this.info.data.placement_targets.forEach(a=>{const r=this.addPlacementTarget();let s={placement_id:a.name,tags:a.tags.join(","),storage_class:"string"==typeof a.storage_classes?a.storage_classes:a.storage_classes.join(",")};r.patchValue(s)})}}submit(){const n=this.multisiteZonegroupForm.getRawValue();if("create"===this.action)this.realm=new z.SX,this.realm.name=n.selectedRealm,this.zonegroup=new z.Oe,this.zonegroup.name=n.zonegroupName,this.zonegroup.endpoints=n.zonegroup_endpoints,this.rgwZonegroupService.create(this.realm,this.zonegroup,n.default_zonegroup,n.master_zonegroup).subscribe(()=>{this.notificationService.show(x._.success,$localize`Zonegroup: '${n.zonegroupName}' created successfully`),this.activeModal.close()},()=>{this.multisiteZonegroupForm.setErrors({cdSubmitButton:!0})});else if("edit"===this.action){this.removedZones=N().difference(this.zgZoneNames,this.zonegroupZoneNames);const t=this.info.data.zones.filter(_=>_.id===this.info.data.master_zone);if(this.isRemoveMasterZone=this.removedZones.includes(t[0].name),this.isRemoveMasterZone)return void this.multisiteZonegroupForm.setErrors({cdSubmitButton:!0});this.addedZones=N().difference(this.zonegroupZoneNames,this.zgZoneNames),this.realm=new z.SX,this.realm.name=n.selectedRealm,this.zonegroup=new z.Oe,this.zonegroup.name=this.info.data.name,this.newZonegroupName=n.zonegroupName,this.zonegroup.endpoints=n.zonegroup_endpoints.toString(),this.zonegroup.placement_targets=n.placementTargets,this.rgwZonegroupService.update(this.realm,this.zonegroup,this.newZonegroupName,n.default_zonegroup,n.master_zonegroup,this.removedZones,this.addedZones).subscribe(()=>{this.notificationService.show(x._.success,$localize`Zonegroup: '${n.zonegroupName}' updated successfully`),this.activeModal.close()},()=>{this.multisiteZonegroupForm.setErrors({cdSubmitButton:!0})})}}addPlacementTarget(){this.placementTargets=this.multisiteZonegroupForm.get("placementTargets");const n=new Fe.$({placement_id:new l.UntypedFormControl("",{validators:[l.Validators.required]}),tags:new l.UntypedFormControl(""),storage_class:new l.UntypedFormControl([])});return this.placementTargets.push(n),n}trackByFn(n){return n}removePlacementTarget(n){this.placementTargets=this.multisiteZonegroupForm.get("placementTargets"),this.placementTargets.removeAt(n)}showError(n,t,_,i){return this.multisiteZonegroupForm.controls.placementTargets.controls[n].showError(t,_,i)}static{this.\u0275fac=function(t){return new(t||kn)(e.\u0275\u0275directiveInject(b.NgbActiveModal),e.\u0275\u0275directiveInject(M.Ss),e.\u0275\u0275directiveInject(ke.Z),e.\u0275\u0275directiveInject(te.J),e.\u0275\u0275directiveInject(l.UntypedFormBuilder))}}static{this.\u0275cmp=e.\u0275\u0275defineComponent({type:kn,selectors:[["cd-rgw-multisite-zonegroup-form"]],decls:49,vars:24,consts:()=>{let n,t,_,i,a,r,s,d,u,m,C,O,f,I,R,h,G,U,k,y,H,X,B,V;return n=$localize`:form title␟12a10d0f3482cc1bec43164dcae94923e4d3da90␟6477061047792492095:${"\ufffd0\ufffd"}:INTERPOLATION: Zone Group`,t=$localize`:␟f60ffb3ddd76e77c7c73947fb592885b0a523388␟3066269839255512339:Select Realm`,_=$localize`:␟c9972300b2e880527cb1b22c7c89d9592130ff55␟2243589909451856369:-- Select a realm --`,i=$localize`:␟4e441008994226032fc08dc6aa5295451e317e22␟9179322500224757581:Zone Group Name`,a=$localize`:␟ff7cee38a2259526c519f878e71b964f41db4348␟5607669932062416162:Default`,r=$localize`:␟bceb00c745ce685e6f6f3eda4fd9a4dab5279296␟8083897527920072255:Master`,s=$localize`:␟35bc68bd793eed6ee0232bfa6c4d72bc8c07fe69␟1161753671258784736:Endpoints`,d=$localize`:␟7cbdabcece469fab89cfa687ab152bca18b97498␟1417693714872528491:This field is required.`,u=$localize`:␟5a9da8f67ef4a7c7f31c767ad7782895e141617b␟2184733522965088338:The chosen zone group name is already in use.`,m=$localize`:␟ab9f62637ee139c8333b9328d9745d985f795fa9␟4848985331415055856:Zone group doesn't belong to the default realm.`,C=$localize`:␟f293576217ec5390da5fb50c1774e4d1cd4e7083␟7650210385461071104:Please consult the ${"\ufffd#3\ufffd"}:START_TAG_CD_DOC:${"\ufffd/#3\ufffd"}:CLOSE_TAG_CD_DOC: to follow the failover mechanism`,O=$localize`:␟6a28e9c87cc3cad66837c2d18af4c548ebc2d6ba␟4757083527614864178:You cannot unset the default flag.`,f=$localize`:␟b7d8d36dba1169db3eb6dfa730bf30315e3cbebf␟2121915964303588606:Multiple master zone groups can't be configured. If you want to create a new zone group and make it the master zone group, you must delete the default zone group.`,I=$localize`:␟f293576217ec5390da5fb50c1774e4d1cd4e7083␟7650210385461071104:Please consult the ${"\ufffd#3\ufffd"}:START_TAG_CD_DOC:${"\ufffd/#3\ufffd"}:CLOSE_TAG_CD_DOC: to follow the failover mechanism`,R=$localize`:␟59b9c3cf54ed3f31f49c44397216334552aa68ae␟5653804470740583925:You cannot unset the master flag.`,h=$localize`:␟7cbdabcece469fab89cfa687ab152bca18b97498␟1417693714872528491:This field is required.`,G=$localize`:␟9ddccf3ea37d9232c2f47f32d4b884b4d416daf5␟4061698394390279322:Please enter a valid URL.`,U=$localize`:␟dab9a30ea9f109a7395ec84fe144c4f70d50c32d␟4377629928032707348:Zones`,k=$localize`:␟9852eda6518df9d9c8435287ae5f204351956b9e␟2040936212510898243:Cannot remove master zone.`,y=$localize`:␟1c598f2d8116812318bcdfcc7482e22a41ba6789␟7678779764255302377:Add placement target`,H=$localize`:␟75bf07c08f6ad13d320252e15c98ca284a497ec3␟4167034962706446700:Placement Id`,X=$localize`:␟cafc87479686947e2590b9f588a88040aeaf660b␟7886570921510760899:Tags`,B=$localize`:␟5a237d4cea2a69c625c9c0a081adc9acc4664843␟1748150374925445786:Storage Class`,V=$localize`:␟7cbdabcece469fab89cfa687ab152bca18b97498␟1417693714872528491:This field is required.`,[["formDir","ngForm"],n,t,_,i,a,r,s,d,u,m,C,O,f,I,R,h,G,U,k,y,H,X,B,V,[3,"modalRef"],[1,"modal-title"],[1,"modal-content"],["name","multisiteZonegroupForm","novalidate","",3,"formGroup"],[1,"modal-body"],[1,"form-group","row"],["for","selectedRealm",1,"cd-col-form-label"],[1,"cd-col-form-input"],["id","selectedRealm","formControlName","selectedRealm","name","selectedRealm",1,"form-select"],["ngValue",""],[3,"value","selected",4,"ngFor","ngForOf"],["for","zonegroupName",1,"cd-col-form-label","required"],["type","text","placeholder","Zone group name...","id","zonegroupName","name","zonegroupName","formControlName","zonegroupName",1,"form-control"],["class","invalid-feedback",4,"ngIf"],[1,"custom-control","custom-checkbox"],["id","default_zonegroup","name","default_zonegroup","formControlName","default_zonegroup","type","checkbox",1,"form-check-input"],["for","default_zonegroup",1,"form-check-label"],[4,"ngIf"],["id","master_zonegroup","name","master_zonegroup","formControlName","master_zonegroup","type","checkbox",1,"form-check-input"],["for","master_zonegroup",1,"form-check-label"],["for","zonegroup_endpoints",1,"cd-col-form-label","required"],["type","text","placeholder","e.g, http://ceph-node-00.com:80","id","zonegroup_endpoints","name","zonegroup_endpoints","formControlName","zonegroup_endpoints",1,"form-control"],["class","form-group row",4,"ngIf"],[1,"modal-footer"],[3,"submitActionEvent","form","submitText"],[3,"value","selected"],[1,"invalid-feedback"],["section","rgw-multisite"],["for","zones",1,"cd-col-form-label"],["id","zones",3,"data","options","customBadges"],["formArrayName","placementTargets"],[4,"ngFor","ngForOf","ngForTrackBy"],["type","button","id","add-plc",1,"btn","btn-light","float-end","my-3",3,"click"],[1,"cds-info-color",3,"cdsIcon","size"],[1,"card",3,"formGroup"],[1,"card-header"],["name","remove_placement_target","ngbTooltip","Remove",1,"float-end","clickable",3,"click"],[1,"card-body"],["for","placement_id",1,"cd-col-form-label","required"],["type","text","name","placement_id","id","placement_id","formControlName","placement_id","placeholder","eg. default-placement",1,"form-control"],["for","tags",1,"cd-col-form-label"],["type","text","name","tags","id","tags","formControlName","tags","placeholder","comma separated tags, eg. default-placement, ssd",1,"form-control"],["for","storage_class",1,"cd-col-form-label"],["type","text","name","storage_class","id","storage_class","formControlName","storage_class","placeholder","eg. Standard-tier",1,"form-control"]]},template:function(t,_){if(1&t){const i=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"cd-modal",25),e.\u0275\u0275elementContainerStart(1,26),e.\u0275\u0275i18n(2,1),e.\u0275\u0275pipe(3,"titlecase"),e.\u0275\u0275elementContainerEnd(),e.\u0275\u0275elementContainerStart(4,27),e.\u0275\u0275elementStart(5,"form",28,0)(7,"div",29)(8,"div",30)(9,"label",31),e.\u0275\u0275i18n(10,2),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(11,"div",32)(12,"select",33)(13,"option",34),e.\u0275\u0275i18n(14,3),e.\u0275\u0275elementEnd(),e.\u0275\u0275template(15,Z1,2,3,"option",35),e.\u0275\u0275elementEnd()()(),e.\u0275\u0275elementStart(16,"div",30)(17,"label",36),e.\u0275\u0275i18n(18,4),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(19,"div",32),e.\u0275\u0275element(20,"input",37),e.\u0275\u0275template(21,K1,2,0,"span",38)(22,q1,2,0,"span",38),e.\u0275\u0275elementStart(23,"div",39),e.\u0275\u0275element(24,"input",40),e.\u0275\u0275elementStart(25,"label",41),e.\u0275\u0275i18n(26,5),e.\u0275\u0275elementEnd(),e.\u0275\u0275template(27,j1,3,0,"span",42)(28,Y1,4,0,"cd-helper",42)(29,Q1,3,0,"cd-helper",42),e.\u0275\u0275element(30,"br")(31,"input",43),e.\u0275\u0275elementStart(32,"label",44),e.\u0275\u0275i18n(33,6),e.\u0275\u0275elementEnd(),e.\u0275\u0275template(34,J1,3,0,"span",42)(35,eu,4,0,"cd-helper",42)(36,tu,3,0,"cd-helper",42),e.\u0275\u0275elementEnd()()(),e.\u0275\u0275elementStart(37,"div",30)(38,"label",45),e.\u0275\u0275i18n(39,7),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(40,"div",32),e.\u0275\u0275element(41,"input",46),e.\u0275\u0275template(42,nu,2,0,"span",38)(43,ou,2,0,"span",38),e.\u0275\u0275elementEnd()(),e.\u0275\u0275template(44,iu,7,4,"div",47)(45,lu,9,4,"div",42),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(46,"div",48)(47,"cd-form-button-panel",49),e.\u0275\u0275pipe(48,"titlecase"),e.\u0275\u0275listener("submitActionEvent",function(){return e.\u0275\u0275restoreView(i),e.\u0275\u0275resetView(_.submit())}),e.\u0275\u0275elementEnd()()(),e.\u0275\u0275elementContainerEnd(),e.\u0275\u0275elementEnd()}if(2&t){const i=e.\u0275\u0275reference(6);e.\u0275\u0275property("modalRef",_.activeModal),e.\u0275\u0275advance(3),e.\u0275\u0275i18nExp(e.\u0275\u0275pipeBind1(3,20,_.action)),e.\u0275\u0275i18nApply(2),e.\u0275\u0275advance(2),e.\u0275\u0275property("formGroup",_.multisiteZonegroupForm),e.\u0275\u0275advance(10),e.\u0275\u0275property("ngForOf",_.realmList),e.\u0275\u0275advance(6),e.\u0275\u0275property("ngIf",_.multisiteZonegroupForm.showError("zonegroupName",i,"required")),e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf",_.multisiteZonegroupForm.showError("zonegroupName",i,"uniqueName")),e.\u0275\u0275advance(2),e.\u0275\u0275attribute("disabled","edit"===_.action||null),e.\u0275\u0275advance(3),e.\u0275\u0275property("ngIf",_.disableDefault&&"create"===_.action),e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf","edit"===_.action&&!_.info.data.is_default),e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf","edit"===_.action&&_.info.data.is_default),e.\u0275\u0275advance(2),e.\u0275\u0275attribute("disabled","edit"===_.action||null),e.\u0275\u0275advance(3),e.\u0275\u0275property("ngIf",_.disableMaster&&"create"===_.action),e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf","edit"===_.action&&!_.info.data.is_master),e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf","edit"===_.action&&_.info.data.is_master),e.\u0275\u0275advance(6),e.\u0275\u0275property("ngIf",_.multisiteZonegroupForm.showError("zonegroup_endpoints",i,"required")),e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf",_.multisiteZonegroupForm.showError("zonegroup_endpoints",i,"invalidURL")),e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf","edit"===_.action),e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf","edit"===_.action),e.\u0275\u0275advance(2),e.\u0275\u0275property("form",_.multisiteZonegroupForm)("submitText",e.\u0275\u0275pipeBind1(48,22,_.action)+" Zone Group")}},dependencies:[g.NgForOf,g.NgIf,Ot.m,Zt.U,Xe.z,Co.C,oe.e,j.S,Be.a,De.C,ne.E,l.\u0275NgNoValidate,l.NgSelectOption,l.\u0275NgSelectMultipleOption,l.DefaultValueAccessor,l.CheckboxControlValueAccessor,l.SelectControlValueAccessor,l.NgControlStatus,l.NgControlStatusGroup,l.FormGroupDirective,l.FormControlName,l.FormArrayName,b.NgbTooltip,c.IconDirective,c.Option,g.TitleCasePipe,V1.i]})}}var We,t_=T(20009),su=T(53075),cu=T(42706),du=T(63882);!function(o){o.CreateRealmAndZonegroup="Create Realm & Zonegroup",o.CreateZone="Create Zone",o.SelectCluster="Select Cluster",o.Review="Review"}(We||(We={}));const fo=[We.CreateRealmAndZonegroup,We.CreateZone,We.SelectCluster,We.Review],n_=[We.CreateRealmAndZonegroup,We.CreateZone,We.Review],uu=[We.CreateRealmAndZonegroup,We.SelectCluster,We.Review];var pu=T(80893),mu=T(55989),Tu=T(70946);const gu=()=>({lg:2,md:2,sm:2}),Eu=()=>({lg:14,md:14,sm:14});function Ru(o,n){if(1&o){const t=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"div",82)(1,"label",83),e.\u0275\u0275i18n(2,15),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(3,"div",84)(4,"input",85),e.\u0275\u0275listener("change",function(){e.\u0275\u0275restoreView(t);const i=e.\u0275\u0275nextContext(2);return e.\u0275\u0275resetView(i.onConfigTypeChange())}),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(5,"label",86),e.\u0275\u0275i18n(6,16),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(7,"div",87)(8,"input",88),e.\u0275\u0275listener("change",function(){e.\u0275\u0275restoreView(t);const i=e.\u0275\u0275nextContext(2);return e.\u0275\u0275resetView(i.onConfigTypeChange())}),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(9,"label",89),e.\u0275\u0275i18n(10,17),e.\u0275\u0275elementEnd()()()}}function Cu(o,n){if(1&o&&(e.\u0275\u0275elementStart(0,"option",94),e.\u0275\u0275text(1),e.\u0275\u0275elementEnd()),2&o){const t=n.$implicit;e.\u0275\u0275property("value",t),e.\u0275\u0275advance(),e.\u0275\u0275textInterpolate1(" ",t," ")}}function fu(o,n){if(1&o&&(e.\u0275\u0275elementStart(0,"div",82)(1,"label",90),e.\u0275\u0275i18n(2,18),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(3,"div",91)(4,"select",92),e.\u0275\u0275template(5,Cu,2,2,"option",93),e.\u0275\u0275elementEnd()()()),2&o){const t=e.\u0275\u0275nextContext(2);e.\u0275\u0275advance(5),e.\u0275\u0275property("ngForOf",t.realmList)}}function Su(o,n){1&o&&(e.\u0275\u0275elementStart(0,"span",102),e.\u0275\u0275i18n(1,25),e.\u0275\u0275elementEnd())}function Fu(o,n){1&o&&(e.\u0275\u0275elementStart(0,"span",102),e.\u0275\u0275i18n(1,26),e.\u0275\u0275elementEnd())}function Mu(o,n){1&o&&(e.\u0275\u0275elementStart(0,"span",102),e.\u0275\u0275i18n(1,27),e.\u0275\u0275elementEnd())}function Pu(o,n){1&o&&(e.\u0275\u0275elementStart(0,"span",102),e.\u0275\u0275i18n(1,28),e.\u0275\u0275elementEnd())}function Iu(o,n){if(1&o&&(e.\u0275\u0275elementStart(0,"div")(1,"div",82)(2,"label",95),e.\u0275\u0275i18n(3,19),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(4,"div",91),e.\u0275\u0275element(5,"input",96),e.\u0275\u0275elementStart(6,"cd-help-text")(7,"span"),e.\u0275\u0275i18n(8,20),e.\u0275\u0275elementEnd()(),e.\u0275\u0275template(9,Su,2,0,"span",97)(10,Fu,2,0,"span",97),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(11,"div",82)(12,"label",98),e.\u0275\u0275i18n(13,21),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(14,"div",91),e.\u0275\u0275element(15,"input",99),e.\u0275\u0275elementStart(16,"cd-help-text")(17,"span"),e.\u0275\u0275i18n(18,22),e.\u0275\u0275elementEnd()(),e.\u0275\u0275template(19,Mu,2,0,"span",97)(20,Pu,2,0,"span",97),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(21,"div",82)(22,"label",100),e.\u0275\u0275i18n(23,23),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(24,"div",91),e.\u0275\u0275element(25,"cd-select-badges",101),e.\u0275\u0275elementStart(26,"cd-help-text")(27,"span"),e.\u0275\u0275i18n(28,24),e.\u0275\u0275elementEnd()()()()()),2&o){const t=e.\u0275\u0275nextContext(2),_=e.\u0275\u0275reference(10);e.\u0275\u0275advance(9),e.\u0275\u0275property("ngIf",t.multisiteSetupForm.showError("realmName",_,"required")),e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf",t.multisiteSetupForm.showError("realmName",_,"uniqueName")),e.\u0275\u0275advance(9),e.\u0275\u0275property("ngIf",t.multisiteSetupForm.showError("zonegroupName",_,"required")),e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf",t.multisiteSetupForm.showError("zonegroupName",_,"uniqueName")),e.\u0275\u0275advance(5),e.\u0275\u0275property("data",t.rgwEndpoints.value)("options",t.rgwEndpoints.options)("customBadges",!0)}}function Ou(o,n){if(1&o&&(e.\u0275\u0275elementStart(0,"div",78)(1,"cd-alert-panel",79),e.\u0275\u0275text(2," This wizard enables you to set up multi-site replication within your Ceph environment.If you have already added another cluster to your multi-cluster setup, you can select that cluster in the wizard to automate the replication process.If no additional cluster is currently added, the wizard will guide you through creating the necessary realm, zonegroup, and zone, and provide a realm token.This token can be used later to manually import into a desired cluster to establish replication between the clusters. "),e.\u0275\u0275elementEnd(),e.\u0275\u0275template(3,Ru,11,0,"div",80)(4,fu,6,1,"div",80)(5,Iu,29,7,"div",81),e.\u0275\u0275elementEnd()),2&o){const t=e.\u0275\u0275nextContext();e.\u0275\u0275advance(3),e.\u0275\u0275property("ngIf",t.showConfigType&&t.isMultiClusterConfigured),e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf","existingRealm"===t.multisiteSetupForm.get("configType").value&&t.showConfigType&&t.isMultiClusterConfigured),e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf","newRealm"===t.multisiteSetupForm.get("configType").value||!t.showConfigType)}}function Gu(o,n){1&o&&(e.\u0275\u0275elementStart(0,"span",102),e.\u0275\u0275i18n(1,36),e.\u0275\u0275elementEnd())}function Nu(o,n){1&o&&(e.\u0275\u0275elementStart(0,"span",102),e.\u0275\u0275i18n(1,37),e.\u0275\u0275elementEnd())}function Au(o,n){1&o&&(e.\u0275\u0275elementStart(0,"span",102),e.\u0275\u0275i18n(1,38),e.\u0275\u0275elementEnd())}function hu(o,n){1&o&&(e.\u0275\u0275elementStart(0,"span",102),e.\u0275\u0275i18n(1,39),e.\u0275\u0275elementEnd())}function bu(o,n){if(1&o&&(e.\u0275\u0275elementStart(0,"div",78)(1,"div",82)(2,"label",98),e.\u0275\u0275i18n(3,29),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(4,"div",91),e.\u0275\u0275element(5,"input",104),e.\u0275\u0275elementStart(6,"cd-help-text")(7,"span"),e.\u0275\u0275i18n(8,30),e.\u0275\u0275elementEnd()(),e.\u0275\u0275template(9,Gu,2,0,"span",97)(10,Nu,2,0,"span",97),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(11,"div",82)(12,"label",105),e.\u0275\u0275i18n(13,31),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(14,"div",91),e.\u0275\u0275element(15,"cd-select-badges",106),e.\u0275\u0275elementStart(16,"cd-help-text")(17,"span"),e.\u0275\u0275i18n(18,32),e.\u0275\u0275elementEnd()()()(),e.\u0275\u0275elementStart(19,"div",82)(20,"label",107),e.\u0275\u0275i18n(21,33),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(22,"div",91),e.\u0275\u0275element(23,"input",108),e.\u0275\u0275elementStart(24,"cd-help-text")(25,"span"),e.\u0275\u0275i18n(26,34),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(27,"cd-alert-panel",109)(28,"span"),e.\u0275\u0275i18n(29,35),e.\u0275\u0275elementEnd()(),e.\u0275\u0275template(30,Au,2,0,"span",97)(31,hu,2,0,"span",97),e.\u0275\u0275elementEnd()()()),2&o){const t=e.\u0275\u0275nextContext(2),_=e.\u0275\u0275reference(10);e.\u0275\u0275advance(9),e.\u0275\u0275property("ngIf",t.multisiteSetupForm.showError("zoneName",_,"required")),e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf",t.multisiteSetupForm.showError("zoneName",_,"uniqueName")),e.\u0275\u0275advance(5),e.\u0275\u0275property("data",t.rgwEndpoints.value)("options",t.rgwEndpoints.options)("customBadges",!0),e.\u0275\u0275advance(12),e.\u0275\u0275property("showTitle",!1),e.\u0275\u0275advance(3),e.\u0275\u0275property("ngIf",t.multisiteSetupForm.showError("username",_,"required")),e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf",t.multisiteSetupForm.showError("username",_,"notUnique"))}}function vu(o,n){1&o&&e.\u0275\u0275elementContainer(0)}function Lu(o,n){if(1&o&&(e.\u0275\u0275elementStart(0,"div",78),e.\u0275\u0275template(1,vu,1,0,"ng-container",110),e.\u0275\u0275elementEnd()),2&o){e.\u0275\u0275nextContext(2);const t=e.\u0275\u0275reference(18);e.\u0275\u0275advance(),e.\u0275\u0275property("ngTemplateOutlet",t)}}function yu(o,n){if(1&o&&(e.\u0275\u0275elementContainerStart(0),e.\u0275\u0275template(1,bu,32,8,"div",103)(2,Lu,2,1,"div",103),e.\u0275\u0275elementContainerEnd()),2&o){const t=e.\u0275\u0275nextContext();e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf","newRealm"===t.multisiteSetupForm.get("configType").value),e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf",t.isMultiClusterConfigured&&"existingRealm"===t.multisiteSetupForm.get("configType").value)}}function $u(o,n){1&o&&e.\u0275\u0275elementContainer(0)}function Du(o,n){if(1&o&&(e.\u0275\u0275elementContainerStart(0),e.\u0275\u0275template(1,$u,1,0,"ng-container",110),e.\u0275\u0275elementContainerEnd()),2&o){e.\u0275\u0275nextContext(3);const t=e.\u0275\u0275reference(18);e.\u0275\u0275advance(),e.\u0275\u0275property("ngTemplateOutlet",t)}}function Wu(o,n){if(1&o&&(e.\u0275\u0275elementStart(0,"div",78),e.\u0275\u0275template(1,Du,2,1,"ng-container",111),e.\u0275\u0275elementEnd()),2&o){const t=e.\u0275\u0275nextContext(2),_=e.\u0275\u0275reference(16);e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf",t.isMultiClusterConfigured)("ngIfElse",_)}}function xu(o,n){1&o&&e.\u0275\u0275elementContainer(0)}function wu(o,n){if(1&o&&(e.\u0275\u0275elementContainerStart(0),e.\u0275\u0275template(1,xu,1,0,"ng-container",110),e.\u0275\u0275elementContainerEnd()),2&o){e.\u0275\u0275nextContext(4);const t=e.\u0275\u0275reference(38);e.\u0275\u0275advance(),e.\u0275\u0275property("ngTemplateOutlet",t)}}function Uu(o,n){if(1&o&&(e.\u0275\u0275elementContainerStart(0),e.\u0275\u0275template(1,wu,2,1,"ng-container",111),e.\u0275\u0275elementContainerEnd()),2&o){const t=e.\u0275\u0275nextContext(3),_=e.\u0275\u0275reference(32);e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf",!t.setupCompleted)("ngIfElse",_)}}function ku(o,n){if(1&o&&(e.\u0275\u0275elementStart(0,"div",78),e.\u0275\u0275template(1,Uu,2,2,"ng-container",111),e.\u0275\u0275elementEnd()),2&o){const t=e.\u0275\u0275nextContext(2),_=e.\u0275\u0275reference(30);e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf",!t.loading)("ngIfElse",_)}}function zu(o,n){if(1&o&&(e.\u0275\u0275elementContainerStart(0),e.\u0275\u0275template(1,Wu,2,2,"div",103)(2,ku,2,2,"div",103),e.\u0275\u0275elementContainerEnd()),2&o){const t=e.\u0275\u0275nextContext();e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf","newRealm"===t.multisiteSetupForm.get("configType").value),e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf","existingRealm"===t.multisiteSetupForm.get("configType").value&&t.isMultiClusterConfigured)}}function Hu(o,n){1&o&&e.\u0275\u0275elementContainer(0)}function Xu(o,n){if(1&o&&e.\u0275\u0275template(0,Hu,1,0,"ng-container",110),2&o){e.\u0275\u0275nextContext();const t=e.\u0275\u0275reference(38);e.\u0275\u0275property("ngTemplateOutlet",t)}}function Bu(o,n){if(1&o&&(e.\u0275\u0275elementStart(0,"option",94),e.\u0275\u0275text(1),e.\u0275\u0275elementEnd()),2&o){const t=n.$implicit;e.\u0275\u0275property("value",t.name),e.\u0275\u0275advance(),e.\u0275\u0275textInterpolate2(" ",t.cluster_alias," - ",t.name," ")}}function Vu(o,n){1&o&&(e.\u0275\u0275elementStart(0,"span",102),e.\u0275\u0275i18n(1,45),e.\u0275\u0275elementEnd())}function Zu(o,n){if(1&o){const t=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"div",82)(1,"label",112),e.\u0275\u0275i18n(2,40),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(3,"div",91)(4,"select",113),e.\u0275\u0275twoWayListener("ngModelChange",function(i){e.\u0275\u0275restoreView(t);const a=e.\u0275\u0275nextContext();return e.\u0275\u0275twoWayBindingSet(a.selectedCluster,i)||(a.selectedCluster=i),e.\u0275\u0275resetView(i)}),e.\u0275\u0275template(5,Bu,2,3,"option",93),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(6,"cd-help-text")(7,"span"),e.\u0275\u0275i18n(8,41),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(9,"cd-alert-panel",109)(10,"span"),e.\u0275\u0275i18n(11,42),e.\u0275\u0275elementEnd()()()(),e.\u0275\u0275elementStart(12,"div",82)(13,"label",114),e.\u0275\u0275i18n(14,43),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(15,"div",91),e.\u0275\u0275element(16,"input",115),e.\u0275\u0275elementStart(17,"cd-help-text")(18,"span"),e.\u0275\u0275i18n(19,44),e.\u0275\u0275elementEnd()(),e.\u0275\u0275template(20,Vu,2,0,"span",97),e.\u0275\u0275elementEnd()()}if(2&o){const t=e.\u0275\u0275nextContext(),_=e.\u0275\u0275reference(10);e.\u0275\u0275advance(4),e.\u0275\u0275twoWayProperty("ngModel",t.selectedCluster),e.\u0275\u0275advance(),e.\u0275\u0275property("ngForOf",t.clusterDetailsArray),e.\u0275\u0275advance(4),e.\u0275\u0275property("showTitle",!1),e.\u0275\u0275advance(11),e.\u0275\u0275property("ngIf",t.multisiteSetupForm.showError("replicationZoneName",_,"required"))}}function Ku(o,n){1&o&&e.\u0275\u0275elementContainer(0)}function qu(o,n){if(1&o&&(e.\u0275\u0275elementContainerStart(0),e.\u0275\u0275template(1,Ku,1,0,"ng-container",110),e.\u0275\u0275elementContainerEnd()),2&o){e.\u0275\u0275nextContext(4);const t=e.\u0275\u0275reference(38);e.\u0275\u0275advance(),e.\u0275\u0275property("ngTemplateOutlet",t)}}function ju(o,n){if(1&o&&(e.\u0275\u0275elementContainerStart(0),e.\u0275\u0275template(1,qu,2,1,"ng-container",111),e.\u0275\u0275elementContainerEnd()),2&o){const t=e.\u0275\u0275nextContext(3),_=e.\u0275\u0275reference(32);e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf",!t.setupCompleted)("ngIfElse",_)}}function Yu(o,n){if(1&o&&(e.\u0275\u0275elementStart(0,"div"),e.\u0275\u0275template(1,ju,2,2,"ng-container",111),e.\u0275\u0275elementEnd()),2&o){const t=e.\u0275\u0275nextContext(2),_=e.\u0275\u0275reference(30);e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf",!t.loading)("ngIfElse",_)}}function Qu(o,n){if(1&o&&(e.\u0275\u0275elementStart(0,"div",78),e.\u0275\u0275template(1,Yu,2,2,"div",81),e.\u0275\u0275elementEnd()),2&o){const t=e.\u0275\u0275nextContext();e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf",t.isMultiClusterConfigured)}}function Ju(o,n){if(1&o){const t=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"button",116),e.\u0275\u0275listener("click",function(){e.\u0275\u0275restoreView(t);const i=e.\u0275\u0275nextContext();return e.\u0275\u0275resetView(i.onSkip())}),e.\u0275\u0275i18n(1,46),e.\u0275\u0275elementEnd()}}function ep(o,n){if(1&o&&(e.\u0275\u0275i18nStart(0,14,1),e.\u0275\u0275element(1,"cds-loading",117),e.\u0275\u0275i18nEnd()),2&o){const t=e.\u0275\u0275nextContext();e.\u0275\u0275advance(),e.\u0275\u0275property("isActive",t.loading)("overlay",!1)}}function tp(o,n){1&o&&e.\u0275\u0275elementContainer(0)}function np(o,n){if(1&o&&(e.\u0275\u0275elementContainerStart(0),e.\u0275\u0275template(1,tp,1,0,"ng-container",110),e.\u0275\u0275elementContainerEnd()),2&o){e.\u0275\u0275nextContext(3);const t=e.\u0275\u0275reference(38);e.\u0275\u0275advance(),e.\u0275\u0275property("ngTemplateOutlet",t)}}function op(o,n){if(1&o&&(e.\u0275\u0275elementContainerStart(0),e.\u0275\u0275template(1,np,2,1,"ng-container",111),e.\u0275\u0275elementContainerEnd()),2&o){const t=e.\u0275\u0275nextContext(2),_=e.\u0275\u0275reference(36);e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf",!t.setupCompleted)("ngIfElse",_)}}function _p(o,n){if(1&o&&e.\u0275\u0275template(0,op,2,2,"ng-container",111),2&o){const t=e.\u0275\u0275nextContext(),_=e.\u0275\u0275reference(30);e.\u0275\u0275property("ngIf",!t.loading)("ngIfElse",_)}}function ip(o,n){1&o&&e.\u0275\u0275elementContainer(0)}function ap(o,n){if(1&o&&e.\u0275\u0275template(0,ip,1,0,"ng-container",110),2&o){e.\u0275\u0275nextContext();const t=e.\u0275\u0275reference(34);e.\u0275\u0275property("ngTemplateOutlet",t)}}function rp(o,n){1&o&&(e.\u0275\u0275elementStart(0,"div")(1,"div",118),e.\u0275\u0275i18n(2,47),e.\u0275\u0275elementEnd()())}function lp(o,n){if(1&o&&e.\u0275\u0275template(0,rp,3,0,"div",111),2&o){const t=e.\u0275\u0275nextContext(),_=e.\u0275\u0275reference(36);e.\u0275\u0275property("ngIf",t.isMultiClusterConfigured&&!t.stepsToSkip["Select Cluster"])("ngIfElse",_)}}function sp(o,n){if(1&o&&e.\u0275\u0275element(0,"cd-progress",119),2&o){let t,_;const i=e.\u0275\u0275nextContext();e.\u0275\u0275property("value",null==i.executingTask?null:i.executingTask.progress)("description",null==i.executingTask||null==i.executingTask.name||null==(t=i.executingTask.name.replace("progress/Multisite-Setup:",""))||null==(t=t.split("||")[0])?null:t.trim())("subDescription",null==i.executingTask||null==i.executingTask.name||null==(_=i.executingTask.name.replace("progress/Multisite-Setup:",""))||null==(_=_.split("||")[1])?null:_.trim())}}function cp(o,n){1&o&&e.\u0275\u0275element(0,"hr")}function dp(o,n){if(1&o&&(e.\u0275\u0275elementStart(0,"div")(1,"div",82)(2,"label",121),e.\u0275\u0275i18n(3,48),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(4,"div",91),e.\u0275\u0275element(5,"input",122),e.\u0275\u0275elementStart(6,"cd-help-text")(7,"span"),e.\u0275\u0275i18n(8,49),e.\u0275\u0275elementEnd()()()(),e.\u0275\u0275elementStart(9,"div",82)(10,"label",123),e.\u0275\u0275i18n(11,50),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(12,"div",91),e.\u0275\u0275element(13,"input",124)(14,"cd-copy-2-clipboard-button",125),e.\u0275\u0275elementStart(15,"cd-help-text")(16,"span"),e.\u0275\u0275i18n(17,51),e.\u0275\u0275elementEnd()()()(),e.\u0275\u0275template(18,cp,1,0,"hr",81),e.\u0275\u0275elementEnd()),2&o){const t=n.$implicit,_=e.\u0275\u0275nextContext(2);e.\u0275\u0275advance(5),e.\u0275\u0275property("value",t.realm),e.\u0275\u0275advance(8),e.\u0275\u0275property("value",t.token),e.\u0275\u0275advance(),e.\u0275\u0275property("source",t.token)("byId",!1),e.\u0275\u0275advance(4),e.\u0275\u0275property("ngIf",_.realms.length>1)}}function up(o,n){if(1&o&&e.\u0275\u0275template(0,dp,19,5,"div",120),2&o){const t=e.\u0275\u0275nextContext();e.\u0275\u0275property("ngForOf",t.realms)}}function pp(o,n){1&o&&e.\u0275\u0275elementContainer(0)}function mp(o,n){1&o&&e.\u0275\u0275elementContainer(0)}function Tp(o,n){if(1&o&&(e.\u0275\u0275elementContainerStart(0),e.\u0275\u0275template(1,pp,1,0,"ng-container",110)(2,mp,1,0,"ng-container",110),e.\u0275\u0275elementContainerEnd()),2&o){e.\u0275\u0275nextContext(2);const t=e.\u0275\u0275reference(40),_=e.\u0275\u0275reference(44);e.\u0275\u0275advance(),e.\u0275\u0275property("ngTemplateOutlet",t),e.\u0275\u0275advance(),e.\u0275\u0275property("ngTemplateOutlet",_)}}function gp(o,n){1&o&&e.\u0275\u0275elementContainer(0)}function Ep(o,n){1&o&&e.\u0275\u0275elementContainer(0)}function Rp(o,n){if(1&o&&(e.\u0275\u0275elementContainerStart(0),e.\u0275\u0275template(1,gp,1,0,"ng-container",110)(2,Ep,1,0,"ng-container",110),e.\u0275\u0275elementContainerEnd()),2&o){e.\u0275\u0275nextContext(2);const t=e.\u0275\u0275reference(42),_=e.\u0275\u0275reference(44);e.\u0275\u0275advance(),e.\u0275\u0275property("ngTemplateOutlet",t),e.\u0275\u0275advance(),e.\u0275\u0275property("ngTemplateOutlet",_)}}function Cp(o,n){if(1&o&&(e.\u0275\u0275elementStart(0,"cd-alert-panel",126)(1,"span"),e.\u0275\u0275i18n(2,52),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementContainerStart(3,71),e.\u0275\u0275template(4,Tp,3,2,"ng-container",73)(5,Rp,3,2,"ng-container",73),e.\u0275\u0275elementContainerEnd()),2&o){const t=e.\u0275\u0275nextContext();e.\u0275\u0275property("showTitle",!1),e.\u0275\u0275advance(3),e.\u0275\u0275property("ngSwitch",t.multisiteSetupForm.get("configType").value),e.\u0275\u0275advance(),e.\u0275\u0275property("ngSwitchCase","newRealm"),e.\u0275\u0275advance(),e.\u0275\u0275property("ngSwitchCase","existingRealm")}}function fp(o,n){if(1&o&&(e.\u0275\u0275elementStart(0,"div",82)(1,"label",127),e.\u0275\u0275i18n(2,53),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(3,"div",128)(4,"b",129),e.\u0275\u0275text(5),e.\u0275\u0275elementEnd()()(),e.\u0275\u0275elementStart(6,"div",82)(7,"label",127),e.\u0275\u0275i18n(8,54),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(9,"div",128)(10,"b",130),e.\u0275\u0275text(11),e.\u0275\u0275elementEnd()()(),e.\u0275\u0275elementStart(12,"div",82)(13,"label",127),e.\u0275\u0275i18n(14,55),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(15,"div",128)(16,"b"),e.\u0275\u0275text(17),e.\u0275\u0275elementEnd()()(),e.\u0275\u0275elementStart(18,"div",82)(19,"label",127),e.\u0275\u0275i18n(20,56),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(21,"div",128)(22,"b",131),e.\u0275\u0275text(23),e.\u0275\u0275elementEnd()()(),e.\u0275\u0275elementStart(24,"div",82)(25,"label",127),e.\u0275\u0275i18n(26,57),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(27,"div",128)(28,"b"),e.\u0275\u0275text(29),e.\u0275\u0275elementEnd()()(),e.\u0275\u0275elementStart(30,"div",82)(31,"label",127),e.\u0275\u0275i18n(32,58),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(33,"div",128)(34,"b"),e.\u0275\u0275text(35),e.\u0275\u0275elementEnd()()()),2&o){const t=e.\u0275\u0275nextContext();e.\u0275\u0275advance(5),e.\u0275\u0275textInterpolate(t.multisiteSetupForm.get("realmName").value),e.\u0275\u0275advance(6),e.\u0275\u0275textInterpolate(t.multisiteSetupForm.get("zonegroupName").value),e.\u0275\u0275advance(6),e.\u0275\u0275textInterpolate(t.rgwEndpoints.value.join(", ")),e.\u0275\u0275advance(6),e.\u0275\u0275textInterpolate(t.multisiteSetupForm.get("zoneName").value),e.\u0275\u0275advance(6),e.\u0275\u0275textInterpolate(t.rgwEndpoints.value.join(", ")),e.\u0275\u0275advance(6),e.\u0275\u0275textInterpolate(t.multisiteSetupForm.get("username").value)}}function Sp(o,n){if(1&o&&(e.\u0275\u0275elementStart(0,"div",82)(1,"label",127),e.\u0275\u0275i18n(2,59),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(3,"div",128)(4,"b"),e.\u0275\u0275text(5),e.\u0275\u0275elementEnd()()()),2&o){const t=e.\u0275\u0275nextContext();e.\u0275\u0275advance(5),e.\u0275\u0275textInterpolate(t.multisiteSetupForm.get("selectedRealm").value)}}function Fp(o,n){if(1&o&&(e.\u0275\u0275elementStart(0,"div")(1,"div",82)(2,"label",127),e.\u0275\u0275i18n(3,60),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(4,"div",128)(5,"b"),e.\u0275\u0275text(6),e.\u0275\u0275elementEnd()()(),e.\u0275\u0275elementStart(7,"div",82)(8,"label",127),e.\u0275\u0275i18n(9,61),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(10,"div",128)(11,"b"),e.\u0275\u0275text(12),e.\u0275\u0275elementEnd()()()()),2&o){const t=e.\u0275\u0275nextContext(2);e.\u0275\u0275advance(6),e.\u0275\u0275textInterpolate(t.selectedCluster),e.\u0275\u0275advance(6),e.\u0275\u0275textInterpolate(t.multisiteSetupForm.get("replicationZoneName").value)}}function Mp(o,n){if(1&o&&e.\u0275\u0275template(0,Fp,13,2,"div",81),2&o){const t=e.\u0275\u0275nextContext();e.\u0275\u0275property("ngIf",t.isMultiClusterConfigured&&!t.stepsToSkip["Select Cluster"])}}var zn,Kt;!function(o){o.HTTP="http",o.HTTPS="https"}(zn||(zn={})),function(o){o.NewRealm="newRealm",o.ExistingRealm="existingRealm"}(Kt||(Kt={}));class qt extends c.BaseModal{constructor(n,t,_,i,a,r,s,d,u,m,C,O,f,I){super(),this.wizardStepsService=n,this.activeModal=t,this.actionLabels=_,this.rgwDaemonService=i,this.multiClusterService=a,this.rgwMultisiteService=r,this.rgwRealmService=s,this.notificationService=d,this.route=u,this.summaryService=m,this.location=C,this.cdr=O,this.mgrModuleService=f,this.zone=I,this.stepTitles=fo.map(R=>({label:R})),this.stepsToSkip={},this.daemons=[],this.selectedCluster="",this.clusterDetailsArray=[],this.isMultiClusterConfigured=!1,this.loading=!1,this.icons=L.FI,this.setupCompleted=!1,this.showConfigType=!1,this.realmList=[],this.pageURL="rgw/multisite/configuration",this.currentStepSub=this.wizardStepsService.getCurrentStep().subscribe(R=>{this.currentStep=R}),this.currentStep.stepIndex=0,this.createForm(),this.rgwEndpoints={value:[],options:[],messages:new Ro.z({empty:$localize`There are no endpoints.`,filter:$localize`Select endpoints`})}}ngOnInit(){this.open="modal"===this.route.outlet,this.loadRGWEndpoints(),this.multiClusterService.getCluster().subscribe(n=>{const t=n.current_url;this.clusterDetailsArray=Object.values(n.config).flat().filter(_=>_.url!==t),this.isMultiClusterConfigured=this.clusterDetailsArray.length>0,this.stepTitles=(this.isMultiClusterConfigured?fo:n_).map((_,i)=>({label:_,onClick:()=>this.currentStep.stepIndex=i})),this.wizardStepsService.setTotalSteps(this.stepTitles.length),this.selectedCluster=this.isMultiClusterConfigured?this.clusterDetailsArray[0].name:null}),this.summaryService.subscribe(n=>{this.zone.run(()=>{this.executingTask=n.executing_tasks.find(t=>t.name.includes("progress/Multisite-Setup")),this.cdr.detectChanges()})}),this.stepTitles.forEach(n=>{this.stepsToSkip[n.label]=!1}),this.rgwRealmService.list().subscribe(n=>{this.realmList=n,this.showConfigType=this.realmList.length>0,this.showConfigType&&(this.multisiteSetupForm.get("selectedRealm")?.setValue(this.realmList[0]),this.cdr.detectChanges())}),this.rgwMultisiteService.getRgwModuleStatus().subscribe(n=>{this.rgwModuleStatus=n})}loadRGWEndpoints(){this.rgwDaemonService.list().pipe((0,Z.switchMap)(n=>(this.daemons=n,this.fetchDaemonStats(n)))).subscribe(n=>{this.populateRGWEndpoints(n)})}fetchDaemonStats(n){const t=n.map(_=>this.rgwDaemonService.get(_.id).pipe((0,Z.map)(i=>({hostname:_.server_hostname,port:_.port,frontendConfig:i?.rgw_metadata?.["frontend_config#0"]||""}))));return(0,w.forkJoin)(t)}populateRGWEndpoints(n){this.rgwEndpoints.value=n.map(t=>`${t.frontendConfig.includes("ssl_port")?zn.HTTPS:zn.HTTP}://${t.hostname}:${t.port}`),this.rgwEndpoints.options=this.rgwEndpoints.value.map(t=>new ht.O(!1,t,"")),this.cdr.detectChanges()}createForm(){this.multisiteSetupForm=new Fe.$({realmName:new l.UntypedFormControl("default_realm",{validators:[l.Validators.required]}),zonegroupName:new l.UntypedFormControl("default_zonegroup",{validators:[l.Validators.required]}),zonegroup_endpoints:new l.UntypedFormControl(null,[l.Validators.required]),zoneName:new l.UntypedFormControl("default_zone",{validators:[l.Validators.required]}),zone_endpoints:new l.UntypedFormControl(null,{validators:[l.Validators.required]}),username:new l.UntypedFormControl("default_system_user",{validators:[l.Validators.required]}),cluster:new l.UntypedFormControl(null,{validators:[l.Validators.required]}),replicationZoneName:new l.UntypedFormControl("new_replicated_zone",{validators:[l.Validators.required]}),configType:new l.UntypedFormControl(Kt.NewRealm,{}),selectedRealm:new l.UntypedFormControl(null,{})}),this.isMultiClusterConfigured||(this.exportTokenForm=new Fe.$({}))}showSubmitButtonLabel(){return this.wizardStepsService.isLastStep()?this.setupCompleted?$localize`Close`:this.isMultiClusterConfigured?$localize`Configure Multi-Site`:$localize`Export Multi-Site token`:$localize`Next`}showCancelButtonLabel(){return this.wizardStepsService.isFirstStep()?this.actionLabels.CANCEL:this.actionLabels.BACK}onNextStep(){this.wizardStepsService.isLastStep()?this.setupCompleted?this.closeModal():this.onSubmit():this.wizardStepsService.moveToNextStep(),this.wizardStepsService.getCurrentStep().subscribe(n=>{this.currentStep=n,2===this.currentStep.stepIndex&&this.isMultiClusterConfigured&&(this.stepsToSkip["Select Cluster"]=!1)})}onSubmit(){this.loading=!0;const n=()=>{this.cdr.detectChanges();const t=this.multisiteSetupForm.getRawValue(),_=t.realmName,i=t.zonegroupName,a=this.rgwEndpoints.value.join(","),r=t.zoneName,s=this.rgwEndpoints.value.join(","),d=t.username;if(!this.isMultiClusterConfigured||this.stepsToSkip["Select Cluster"])this.rgwMultisiteService.setUpMultisiteReplication(_,i,a,r,s,d).subscribe(u=>{this.setupCompleted=!0,this.rgwMultisiteService.setRestartGatewayMessage(!1),this.loading=!1,this.realms=u,this.showSuccessNotification()});else{const u=t.cluster,m=t.replicationZoneName;let C="";this.multisiteSetupForm.get("configType").value===Kt.ExistingRealm&&(C=this.multisiteSetupForm.get("selectedRealm").value),this.rgwMultisiteService.setUpMultisiteReplication(_,i,a,r,s,d,u,m,this.clusterDetailsArray,C).subscribe(()=>{this.setupCompleted=!0,this.rgwMultisiteService.setRestartGatewayMessage(!1),this.loading=!1,this.showSuccessNotification()},()=>{this.multisiteSetupForm.setErrors({cdSubmitButton:!0})})}};if(this.rgwModuleStatus)n();else{this.mgrModuleService.updateModuleState("rgw",!1,null,"","",!1,$localize`RGW module is being enabled. Waiting for the system to reconnect...`);const t=this.mgrModuleService.updateCompleted$.subscribe(()=>{t.unsubscribe(),n()})}}showSuccessNotification(){this.notificationService.show(x._.success,$localize`Multi-site setup completed successfully.`)}onPreviousStep(){this.wizardStepsService.isFirstStep()?this.location.back():this.wizardStepsService.moveToPreviousStep()}onSkip(){const n=this.stepTitles[this.currentStep.stepIndex];this.stepsToSkip[n.label]=!0,this.onNextStep()}closeModal(){this.location.back()}onConfigTypeChange(){this.multisiteSetupForm.get("configType")?.value===Kt.ExistingRealm?(this.stepTitles=uu.map(t=>({label:t})),this.stepTitles.forEach((t,_)=>{t.onClick=()=>this.currentStep.stepIndex=_})):this.isMultiClusterConfigured?this.stepTitles=fo.map(t=>({label:t})):this.stepTitles=n_.map(t=>({label:t})),this.wizardStepsService.setTotalSteps(this.stepTitles.length)}static{this.\u0275fac=function(t){return new(t||qt)(e.\u0275\u0275directiveInject(su.m),e.\u0275\u0275directiveInject(b.NgbActiveModal),e.\u0275\u0275directiveInject(M.Ss),e.\u0275\u0275directiveInject(ye.y),e.\u0275\u0275directiveInject(cu.J),e.\u0275\u0275directiveInject(xe.A),e.\u0275\u0275directiveInject(It.$),e.\u0275\u0275directiveInject(te.J),e.\u0275\u0275directiveInject(Y.ActivatedRoute),e.\u0275\u0275directiveInject(du.E),e.\u0275\u0275directiveInject(g.Location),e.\u0275\u0275directiveInject(e.ChangeDetectorRef),e.\u0275\u0275directiveInject(t_.a),e.\u0275\u0275directiveInject(e.NgZone))}}static{this.\u0275cmp=e.\u0275\u0275defineComponent({type:qt,selectors:[["cd-rgw-multisite-wizard"]],features:[e.\u0275\u0275InheritDefinitionFeature],decls:45,vars:19,consts:()=>{let n,t,_,i,a,r,s,d,u,m,C,O,f,I,R,h,G,U,k,y,H,X,B,V,S,P,ee,Q,q,J,$,_e,D,W,ce,de,ue,pe,me,Te,ge,le,Ee,Re,Ce,fe,E,Ze,ve,Ke,qe;return n=$localize`:␟b19146fd7b98b6811e18fc39859fa0ceddde0868␟6537997564820310504:Set up Multi-site Replication`,t=$localize`:␟c06b5d02426d4f4805f15dc16bce87ed246e70a7␟8401872604272544419:${"\ufffd0\ufffd"}:INTERPOLATION:`,_=$localize`:␟e6fe16dd29dc66590c3a3b0bd9626fd5695b5d81␟5353889423226695480:${"\ufffd0\ufffd"}:INTERPOLATION: ${"\ufffd*26:1\ufffd\ufffd#1:1\ufffd"}:START_TAG_CDS_LOADING:${"\ufffd/#1:1\ufffd\ufffd/*26:1\ufffd"}:CLOSE_TAG_CDS_LOADING:`,i=$localize`:␟a4bee1d5f70f6086d03130edd81e7467092e09c3␟4325672708569863983:Realm configuration mode`,a=$localize`:␟8d4c70979bb3b1320c7f056ff7cf6f3f593971e4␟7721591575175651391:Create new realm/zonegroup/zone`,r=$localize`:␟df278178ab8e4ea61bf800c218c43da758000151␟4171959982164807018:Select existing realm`,s=$localize`:␟f60ffb3ddd76e77c7c73947fb592885b0a523388␟3066269839255512339:Select Realm`,d=$localize`:␟1b5ae35d753824820b370dc45362aeabbd0ec18d␟2317799298267426958:Realm Name`,u=$localize`:␟6c6a9fbba87926c55e21ff3da911db698a29033c␟6673465081966370155:Enter a unique name for the Realm. The Realm is a logical grouping of all your Zonegroups.`,m=$localize`:␟4e441008994226032fc08dc6aa5295451e317e22␟9179322500224757581:Zone Group Name`,C=$localize`:␟19cdb5d3f8239c97e7cc383d0f96e1c0da414892␟3259136685981073012:Enter a name for the Zonegroup. Zonegroup will help you identify and manage the group of zones.`,O=$localize`:␟042274267b4cd98e1b462d2254d36c2f7e83810b␟7709596920132865306:Zonegroup Endpoints`,f=$localize`:␟c640dfef1d09f60da2c1701a2a4f75ce3b17f5a3␟8487773048358016831:Select the endpoints for the Zonegroup. Endpoints are the URLs or IP addresses from which the rgw gateways in that zonegroup can be accessed. You can select multiple endpoints in case you have multiple rgw gateways in a zonegroup`,I=$localize`:␟7cbdabcece469fab89cfa687ab152bca18b97498␟1417693714872528491:This field is required.`,R=$localize`:␟d3d3f9fed66f5b5ab79ca9b1859a4dbf990b08e6␟1143823893152768200:This realm name is already in use. Choose a unique name.`,h=$localize`:␟7cbdabcece469fab89cfa687ab152bca18b97498␟1417693714872528491:This field is required.`,G=$localize`:␟530e2dc907b7280415b755d7ad66dc5284dfe7e9␟2097604283731813707:This zonegroup name is already in use. Choose a unique name.`,U=$localize`:␟84a641424aae2a309955100886dd7c25c8dadd9a␟2428983624665954611:White spaces at the beginning and end will be trimmed`,k=$localize`:␟9908ce895693044630b8188ac54903ccdde33f2f␟2331642177230896856:Zone Name`,y=$localize`:␟9bb94797a3a460a7b9fc986b557dddb28a94d17f␟5690224011417039525:Enter a unique name for the Zone. A Zone represents a distinct data center or geographical location within a Zonegroup.`,H=$localize`:␟5124591575f8c913c0092c5fef21235d0fb5c0d1␟3693366803080474457:Zone Endpoints`,X=$localize`:␟0ad3fe4e2e2e5dc315fd7f879f1dcedaae79edf5␟5471317433929816116:Select the endpoints for the Zone. Endpoints are the URLs or IP addresses from which the rgw gateways in that zone can be accessed. You can select multiple endpoints in case you have multiple rgw gateways in a zone`,B=$localize`:␟08c74dc9762957593b91f6eb5d65efdfc975bf48␟5248717555542428023:Username`,V=$localize`:␟d124602f2c75f82810fe399cf0c8b51c6725fb24␟5028226965121851800:Specify the username for the system user.`,S=$localize`:␟5af04c36046c2d2434533ccd1774f8cceb5b8b27␟5178521185894927317:This user will be created automatically as part of the process, and it will have the necessary permissions to manage and synchronize resources across zones.`,P=$localize`:␟7cbdabcece469fab89cfa687ab152bca18b97498␟1417693714872528491:This field is required.`,ee=$localize`:␟15c914dd56f8c3828260e42fc8a9b1e066fbc215␟257096240927039149:This zone name is already in use. Choose a unique name.`,Q=$localize`:␟7cbdabcece469fab89cfa687ab152bca18b97498␟1417693714872528491:This field is required.`,q=$localize`:␟2a6d409550f665997711f4675735364a6c495f1c␟2402989831019614898:This username is already in use. Choose a unique name.`,J=$localize`:␟75dd89c690d7c90b851087911aefb0820f91b4e1␟903296475496565931:Replication Cluster`,$=$localize`:␟37bb70fad7352949ffb2abdbf386c7616a5e33cf␟2209612655620387903:Choose the cluster where you want to apply this multisite configuration. The selected cluster will integrate the defined Realm, Zonegroup, and Zones, enabling data synchronization and management across the multisite setup.`,_e=$localize`:␟e063905bc5e61bfca5d06308dc73c82b9f333702␟1782219545796161208:Before submitting this form, please verify that the selected cluster has an active RGW (Rados Gateway) service running.`,D=$localize`:␟d9060efa52a882dc3eac29197f8d7624f7e5b56e␟544496877790627250:Replication Zone Name`,W=$localize`:␟6c1d86f631f0a7c2f6bd3a8efc0736641ac91d77␟7067942431449305660:Replication zone represents the zone to be created in the replication cluster where your data will be replicated.`,ce=$localize`:␟7cbdabcece469fab89cfa687ab152bca18b97498␟1417693714872528491:This field is required.`,de=$localize`:␟eb075d0450deb6f381616f7da4b9244ced843053␟4563965495368336177:Skip`,ue=$localize`:␟1fe911e0a21022371fde11c4be8ccd72a3b7e73d␟1234307820253474584: Multi-site replication setup is complete. `,pe=$localize`:␟1b5ae35d753824820b370dc45362aeabbd0ec18d␟2317799298267426958:Realm Name`,me=$localize`:␟23e7835f83cb08147823863c26e479634ae37044␟4157256537831074197:Name of the realm that will be involved in replication.`,Te=$localize`:␟1edc1fc6cfbbb22353050ad6788508b3ed584f53␟3039940756451018621:Token`,ge=$localize`:␟eb7da8a407356e205bbbf321dab863c57f99ef90␟6318908940677980357:This field displays the token needed to import the multisite configuration into a secondary cluster. Copy this token securely and use it on the secondary cluster to replicate the current multisite setup. Ensure that the token is handled securely to prevent unauthorized access.`,le=$localize`:␟ae7fad6235d1194b9728244341f70a20b249b7a9␟1369426298392675365: During the automation process, the RGW module will be enabled on both the source and target clusters, if it is not already enabled. This action may cause a temporary downtime (5-10 seconds) on each cluster. `,Ee=$localize`:␟22ba2e15aa984f3ceafa9688621cd394bfe4aec1␟2756855258182310895:Realm Name:`,Re=$localize`:␟ab6776ebfe566c2395572c4ac374c328c6bc19f1␟4689172438642313279:Zonegroup Name:`,Ce=$localize`:␟817340da5bd377dde08827b028a4634633923965␟4566345329195708283:Zonegroup Endpoints:`,fe=$localize`:␟9b984fcb681a6940898b7cc8ec6a509d89ccbc36␟5288780516713459229:Zone Name:`,E=$localize`:␟e84e5236d0418a1631a9ae6fec9060948f9a64fa␟6546141017267757895:Zone Endpoints:`,Ze=$localize`:␟67fc3fe0566f8700b84a908c35497759db78addc␟140822705245800362:Username:`,ve=$localize`:␟7cc86f334153b3280b350dac71dac838a571eb82␟1079931252813715872:Selected Realm:`,Ke=$localize`:␟55a8b89aeb78b8147688f600e5164b5a32f4b0d0␟6884261414472048162:Selected Replication Cluster:`,qe=$localize`:␟1e6bbfc90945cef57b074acbd4097988ebd46486␟1977990379801984809:Replication Zone Name:`,[["formDir","ngForm"],["newRealmReviewTemplate",""],["replicationTemplate",""],["nonMultiClusterTemplate",""],["loadingTemplate",""],["progressCompleteTemplate",""],["progressTemplate",""],["exportTokenTemplate",""],["reviewTemplate",""],["newRealmInfo",""],["existingRealmInfo",""],["replicationInfo",""],n,t,_,i,a,r,s,d,u,m,C,O,f,I,R,h,G,k,y,H,X,B,V,S,P,ee,Q,q,J,$,_e,D,W,ce,de,ue,pe,me,Te,ge,le,Ee,Re,Ce,fe,E,Ze,ve,Ke,qe,["size","lg",3,"overlaySelected","open","hasScrollingContent"],[3,"closeSelect"],["cdsModalHeaderHeading","","data-testid","rgw-multisite-wizard-header"],["cdsModalContent",""],["cdsRow",""],["cdsCol","",1,"indicator-wrapper",3,"columnNumbers"],[3,"stepsTitle"],["cdsCol","",3,"columnNumbers"],["novalidate","",3,"formGroup"],[3,"ngSwitch"],["class","ms-5",4,"ngSwitchCase"],[4,"ngSwitchCase"],["cdsButton","secondary","name","skip-cluster-selection","aria-label","Skip",3,"click",4,"ngIf"],["cdsButton","secondary",3,"click"],["cdsButton","primary","aria-label","Next",3,"click","disabled"],["size","sm",3,"isActive","overlay",4,"ngIf"],[1,"ms-5"],["type","info","spacingClass","mb-3"],["class","form-group row",4,"ngIf"],[4,"ngIf"],[1,"form-group","row"],["for","configType",1,"cd-col-form-label","required"],[1,"col-md-auto","custom-checkbox","form-check-inline","ms-3"],["formControlName","configType","id","newRealm","value","newRealm","type","radio",1,"form-check-input",3,"change"],["for","newRealm",1,"custom-check-label"],[1,"col-md-auto","custom-checkbox","form-check-inline"],["formControlName","configType","id","existingRealm","type","radio","value","existingRealm",1,"form-check-input",3,"change"],["for","existingRealm",1,"custom-check-label"],["for","selectedRealm",1,"cd-col-form-label"],[1,"cd-col-form-input"],["id","selectedRealm","formControlName","selectedRealm",1,"form-select"],[3,"value",4,"ngFor","ngForOf"],[3,"value"],["for","realmName",1,"cd-col-form-label","required"],["type","text","id","realmName","formControlName","realmName",1,"form-control"],["class","invalid-feedback",4,"ngIf"],["for","zonegroupName",1,"cd-col-form-label","required"],["type","text","id","zonegroupName","formControlName","zonegroupName",1,"form-control"],["for","zonegroup_endpoints",1,"cd-col-form-label","required"],["id","zonegroup_endpoints",3,"data","options","customBadges"],[1,"invalid-feedback"],["class","ms-5",4,"ngIf"],["type","text","id","zoneName","formControlName","zoneName",1,"form-control"],["for","zone_endpoints",1,"cd-col-form-label","required"],["id","zone_endpoints",3,"data","options","customBadges"],["for","username",1,"cd-col-form-label","required"],["type","text","id","username","formControlName","username","ngbTooltip",U,"cdTrim","",1,"form-control"],["type","info",3,"showTitle"],[4,"ngTemplateOutlet"],[4,"ngIf","ngIfElse"],["for","cluster",1,"cd-col-form-label","required"],["id","cluster","formControlName","cluster","name","cluster",1,"form-select",3,"ngModelChange","ngModel"],["for","replicationZoneName",1,"cd-col-form-label","required"],["type","text","id","replicationZoneName","name","replicationZoneName","formControlName","replicationZoneName",1,"form-control"],["cdsButton","secondary","name","skip-cluster-selection","aria-label","Skip",3,"click"],["size","sm",3,"isActive","overlay"],[1,"text-center","text-success"],[3,"value","description","subDescription"],[4,"ngFor","ngForOf"],["for","realmName",1,"cd-col-form-label"],["id","realmName","name","realmName","type","text","readonly","",3,"value"],["for","token",1,"cd-col-form-label"],["id","realmToken","name","realmToken","type","text","readonly","",1,"me-2","mb-4",3,"value"],[3,"source","byId"],["type","warning",3,"showTitle"],[1,"cd-col-form-label"],[1,"cd-col-form-input","mt-2","text-muted"],["id","realmName"],["id","zonegroupName"],["id","zoneName"]]},template:function(t,_){if(1&t){const i=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"cds-modal",62),e.\u0275\u0275listener("overlaySelected",function(){return e.\u0275\u0275restoreView(i),e.\u0275\u0275resetView(_.closeModal())}),e.\u0275\u0275elementStart(1,"cds-modal-header",63),e.\u0275\u0275listener("closeSelect",function(){return e.\u0275\u0275restoreView(i),e.\u0275\u0275resetView(_.closeModal())}),e.\u0275\u0275elementStart(2,"h3",64),e.\u0275\u0275i18n(3,12),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(4,"div",65)(5,"div",66)(6,"div",67),e.\u0275\u0275element(7,"cd-wizard",68),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(8,"div",69)(9,"form",70,0),e.\u0275\u0275elementContainerStart(11,71),e.\u0275\u0275template(12,Ou,6,3,"div",72)(13,yu,3,2,"ng-container",73)(14,zu,3,2,"ng-container",73)(15,Xu,1,1,"ng-template",null,1,e.\u0275\u0275templateRefExtractor)(17,Zu,21,4,"ng-template",null,2,e.\u0275\u0275templateRefExtractor)(19,Qu,2,1,"div",72),e.\u0275\u0275elementContainerEnd(),e.\u0275\u0275elementEnd()()()(),e.\u0275\u0275elementStart(20,"cds-modal-footer"),e.\u0275\u0275template(21,Ju,2,0,"button",74),e.\u0275\u0275elementStart(22,"button",75),e.\u0275\u0275listener("click",function(){return e.\u0275\u0275restoreView(i),e.\u0275\u0275resetView(_.onPreviousStep())}),e.\u0275\u0275i18n(23,13),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(24,"button",76),e.\u0275\u0275listener("click",function(){return e.\u0275\u0275restoreView(i),e.\u0275\u0275resetView(_.onNextStep())}),e.\u0275\u0275i18nStart(25,14),e.\u0275\u0275template(26,ep,2,2,"cds-loading",77),e.\u0275\u0275i18nEnd(),e.\u0275\u0275elementEnd()()(),e.\u0275\u0275template(27,_p,1,2,"ng-template",null,3,e.\u0275\u0275templateRefExtractor)(29,ap,1,1,"ng-template",null,4,e.\u0275\u0275templateRefExtractor)(31,lp,1,2,"ng-template",null,5,e.\u0275\u0275templateRefExtractor)(33,sp,1,3,"ng-template",null,6,e.\u0275\u0275templateRefExtractor)(35,up,1,1,"ng-template",null,7,e.\u0275\u0275templateRefExtractor)(37,Cp,6,4,"ng-template",null,8,e.\u0275\u0275templateRefExtractor)(39,fp,36,6,"ng-template",null,9,e.\u0275\u0275templateRefExtractor)(41,Sp,6,1,"ng-template",null,10,e.\u0275\u0275templateRefExtractor)(43,Mp,1,1,"ng-template",null,11,e.\u0275\u0275templateRefExtractor)}2&t&&(e.\u0275\u0275property("open",_.open)("hasScrollingContent",!0),e.\u0275\u0275advance(6),e.\u0275\u0275property("columnNumbers",e.\u0275\u0275pureFunction0(17,gu)),e.\u0275\u0275advance(),e.\u0275\u0275property("stepsTitle",_.stepTitles),e.\u0275\u0275advance(),e.\u0275\u0275property("columnNumbers",e.\u0275\u0275pureFunction0(18,Eu)),e.\u0275\u0275advance(),e.\u0275\u0275property("formGroup",_.multisiteSetupForm),e.\u0275\u0275advance(2),e.\u0275\u0275property("ngSwitch",null==_.currentStep?null:_.currentStep.stepIndex),e.\u0275\u0275advance(),e.\u0275\u0275property("ngSwitchCase",0),e.\u0275\u0275advance(),e.\u0275\u0275property("ngSwitchCase",1),e.\u0275\u0275advance(),e.\u0275\u0275property("ngSwitchCase",2),e.\u0275\u0275advance(5),e.\u0275\u0275property("ngSwitchCase",3),e.\u0275\u0275advance(2),e.\u0275\u0275property("ngIf","Select Cluster"===_.stepTitles[_.currentStep.stepIndex].label&&"newRealm"===_.multisiteSetupForm.get("configType").value),e.\u0275\u0275advance(),e.\u0275\u0275attribute("aria-label",_.showCancelButtonLabel()),e.\u0275\u0275advance(),e.\u0275\u0275i18nExp(_.showCancelButtonLabel()),e.\u0275\u0275i18nApply(23),e.\u0275\u0275advance(),e.\u0275\u0275property("disabled",_.loading),e.\u0275\u0275advance(2),e.\u0275\u0275property("ngIf",_.loading),e.\u0275\u0275i18nExp(_.showSubmitButtonLabel()),e.\u0275\u0275i18nApply(25))},dependencies:[g.NgForOf,g.NgIf,g.NgTemplateOutlet,g.NgSwitch,g.NgSwitchCase,Zt.U,Ie.m,_t.N,pu.t,ie.O,mu.X,Tu.c,j.S,Be.a,De.C,ne.E,l.\u0275NgNoValidate,l.NgSelectOption,l.\u0275NgSelectMultipleOption,l.DefaultValueAccessor,l.SelectControlValueAccessor,l.RadioControlValueAccessor,l.NgControlStatus,l.NgControlStatusGroup,l.FormGroupDirective,l.FormControlName,b.NgbTooltip,c.Modal,c.ModalHeader,c.ModalFooter,c.ModalContent,c.ModalHeaderHeading,c.ColumnDirective,c.RowDirective,c.Button,c.Loading,c.Option],styles:["cds-loading[_ngcontent-%COMP%]{margin-left:.5rem}"]})}}var o_=T(56207);class So{constructor(n=!1,t){this.customBadges=n,this.data={selected:[],available:[],validators:[l.Validators.pattern("[A-Za-z0-9_-]+|\\*"),l.Validators.maxLength(50)],messages:new Ro.z({empty:$localize`No zones added`,customValidations:{pattern:$localize`Allowed characters '-_a-zA-Z0-9|*'`,maxlength:$localize`Maximum length is 50 characters`},filter:$localize`${t}`,add:$localize`Add zone`})}}}const Pp=o=>({name:"zones",zone:o}),Ip=o=>({name:"source_zone",zones:o}),Op=o=>({name:"destination_zone",zones:o});function Gp(o,n){1&o&&(e.\u0275\u0275elementStart(0,"span",32),e.\u0275\u0275i18n(1,7),e.\u0275\u0275elementEnd())}function Np(o,n){1&o&&e.\u0275\u0275elementContainer(0)}function Ap(o,n){if(1&o&&(e.\u0275\u0275elementContainerStart(0),e.\u0275\u0275elementStart(1,"div",22)(2,"label",33),e.\u0275\u0275elementContainerStart(3),e.\u0275\u0275i18n(4,8),e.\u0275\u0275elementContainerEnd(),e.\u0275\u0275elementStart(5,"cd-helper")(6,"span"),e.\u0275\u0275i18n(7,9),e.\u0275\u0275elementEnd()()(),e.\u0275\u0275elementStart(8,"div",24),e.\u0275\u0275template(9,Np,1,0,"ng-container",34),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementContainerEnd()),2&o){const t=e.\u0275\u0275nextContext(),_=e.\u0275\u0275reference(28);e.\u0275\u0275advance(9),e.\u0275\u0275property("ngTemplateOutlet",_)("ngTemplateOutletContext",e.\u0275\u0275pureFunction1(2,Pp,t.zones))}}function hp(o,n){1&o&&e.\u0275\u0275elementContainer(0)}function bp(o,n){1&o&&e.\u0275\u0275elementContainer(0)}function vp(o,n){if(1&o&&(e.\u0275\u0275elementStart(0,"div",22)(1,"label",35),e.\u0275\u0275i18n(2,10),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(3,"div",24),e.\u0275\u0275template(4,hp,1,0,"ng-container",34),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(5,"div",22)(6,"label",36),e.\u0275\u0275i18n(7,11),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(8,"div",24),e.\u0275\u0275template(9,bp,1,0,"ng-container",34),e.\u0275\u0275elementEnd()()),2&o){const t=e.\u0275\u0275nextContext(),_=e.\u0275\u0275reference(30);e.\u0275\u0275advance(4),e.\u0275\u0275property("ngTemplateOutlet",_)("ngTemplateOutletContext",e.\u0275\u0275pureFunction1(4,Ip,t.zones)),e.\u0275\u0275advance(5),e.\u0275\u0275property("ngTemplateOutlet",_)("ngTemplateOutletContext",e.\u0275\u0275pureFunction1(6,Op,t.zones))}}function Lp(o,n){if(1&o&&(e.\u0275\u0275namespaceSVG(),e.\u0275\u0275elementStart(0,"svg",39),e.\u0275\u0275i18nAttributes(1,16),e.\u0275\u0275elementEnd()),2&o){const t=e.\u0275\u0275nextContext().name,_=e.\u0275\u0275nextContext();e.\u0275\u0275i18nExp(null==t?null:t.split("_").join(" ")),e.\u0275\u0275i18nApply(1),e.\u0275\u0275property("cdsIcon",_.icons.warning)("size",_.icons.size16)}}function yp(o,n){if(1&o&&(e.\u0275\u0275elementStart(0,"span",32),e.\u0275\u0275i18n(1,12),e.\u0275\u0275elementEnd()),2&o){const t=e.\u0275\u0275nextContext().name;e.\u0275\u0275advance(),e.\u0275\u0275i18nExp(null==t?null:t.split("_").join(" ")),e.\u0275\u0275i18nApply(1)}}function $p(o,n){if(1&o){const t=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"cd-select-badges",37),e.\u0275\u0275listener("selection",function(){e.\u0275\u0275restoreView(t);const i=e.\u0275\u0275nextContext();return e.\u0275\u0275resetView(i.zoneSelection())}),e.\u0275\u0275elementEnd(),e.\u0275\u0275template(1,Lp,2,3,"svg",38)(2,yp,2,1,"span",28)}if(2&o){const t=n.name,_=n.zone,i=e.\u0275\u0275nextContext(),a=e.\u0275\u0275reference(7);e.\u0275\u0275property("id",t)("name",t)("customBadges",_.customBadges)("customBadgeValidators",_.data.validators)("messages",_.data.messages)("data",_.data.selected)("options",_.data.available),e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf",_.data.selected.length<=0),e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf",i.currentFormGroupContext.showError(t,a,"required"))}}function Dp(o,n){1&o&&(e.\u0275\u0275elementStart(0,"option",43),e.\u0275\u0275i18n(1,13),e.\u0275\u0275elementEnd()),2&o&&e.\u0275\u0275property("ngValue",null)}function Wp(o,n){if(1&o&&(e.\u0275\u0275elementStart(0,"option",43),e.\u0275\u0275i18n(1,14),e.\u0275\u0275elementEnd()),2&o){const t=e.\u0275\u0275nextContext().name;e.\u0275\u0275property("ngValue",null),e.\u0275\u0275advance(),e.\u0275\u0275i18nExp(t.split("_").join(" ")),e.\u0275\u0275i18nApply(1)}}function xp(o,n){if(1&o&&(e.\u0275\u0275elementStart(0,"option",44),e.\u0275\u0275text(1),e.\u0275\u0275elementEnd()),2&o){const t=n.$implicit;e.\u0275\u0275property("value",t.name),e.\u0275\u0275advance(),e.\u0275\u0275textInterpolate(t.name)}}function wp(o,n){1&o&&(e.\u0275\u0275elementStart(0,"span",32),e.\u0275\u0275i18n(1,15),e.\u0275\u0275elementEnd())}function Up(o,n){if(1&o){const t=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"select",40),e.\u0275\u0275listener("change",function(i){const a=e.\u0275\u0275restoreView(t).name,r=e.\u0275\u0275nextContext();return e.\u0275\u0275resetView(r.onChangeZoneDropdown(a,i))}),e.\u0275\u0275template(1,Dp,2,1,"option",41)(2,Wp,2,2,"option",41)(3,xp,2,2,"option",42),e.\u0275\u0275elementEnd(),e.\u0275\u0275template(4,wp,2,0,"span",28)}if(2&o){const t=n.name,_=n.zones,i=e.\u0275\u0275nextContext(),a=e.\u0275\u0275reference(7);e.\u0275\u0275property("id",t)("name",t)("autofocus",i.editing),e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf",0==_.data.available.length),e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf",_.data.available.length>0),e.\u0275\u0275advance(),e.\u0275\u0275property("ngForOf",_.data.available),e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf",i.currentFormGroupContext.showError(t,a,"required"))}}class Hn{constructor(n,t,_,i,a,r,s){this.activeModal=n,this.actionLabels=t,this.notificationService=_,this.rgwDaemonService=i,this.rgwZonegroupService=a,this.rgwMultisiteService=r,this.succeededLabels=s,this.editing=!1,this.flowType=z.do,this.icons=L.FI,this.zones=new So(!1,"Filter Zones")}ngOnInit(){"edit"===this.action&&(this.editing=!0),this.groupType===z.do.symmetrical?(this.createSymmetricalFlowForm(),this.currentFormGroupContext=N().cloneDeep(this.syncPolicySymmetricalFlowForm)):this.groupType===z.do.directional&&(this.createDirectionalFlowForm(),this.currentFormGroupContext=N().cloneDeep(this.syncPolicyDirectionalFlowForm)),this.currentFormGroupContext.get("bucket_name").disable(),this.editing&&(this.currentFormGroupContext.patchValue({flow_id:this.flowSelectedRow.id,bucket_name:this.groupExpandedRow.bucket||""}),this.currentFormGroupContext.get("flow_id").disable()),this.rgwDaemonService.selectedDaemon$.pipe((0,Z.switchMap)(n=>{if(n){const t=new z.Oe;return t.name=n?.zonegroup_name,this.rgwZonegroupService.get(t).pipe((0,Z.catchError)(()=>(0,w.of)([])))}return(0,w.of)([])})).subscribe(n=>{if(n&&n?.zones?.length>0){const t=[];n.zones.forEach(_=>{t.push(new ht.O(!1,_.name,""))}),this.zones.data.available=[...t],this.editing&&(this.groupType===z.do.symmetrical&&(this.zones.data.selected=[...this.flowSelectedRow.zones]),this.zoneSelection())}})}createSymmetricalFlowForm(){this.syncPolicySymmetricalFlowForm=new Fe.$({...this.commonFormControls(z.do.symmetrical),zones:new l.UntypedFormControl([],{validators:[l.Validators.required]})})}createDirectionalFlowForm(){this.syncPolicyDirectionalFlowForm=new Fe.$({...this.commonFormControls(z.do.directional),source_zone:new l.UntypedFormControl("",{validators:[l.Validators.required]}),destination_zone:new l.UntypedFormControl("",{validators:[l.Validators.required]})})}onChangeZoneDropdown(n,t){const _=t.target.value;this.currentFormGroupContext.get(n).setValue(_)}commonFormControls(n){return{bucket_name:new l.UntypedFormControl(this.groupExpandedRow?.bucket),group_id:new l.UntypedFormControl(this.groupExpandedRow?.groupName,{validators:[l.Validators.required]}),flow_id:new l.UntypedFormControl("",{validators:[l.Validators.required]}),flow_type:new l.UntypedFormControl(n,{validators:[l.Validators.required]})}}zoneSelection(){this.groupType===z.do.symmetrical&&this.currentFormGroupContext.patchValue({zones:this.zones.data.selected})}getZoneData(n,t){return n.filter(_=>!t.includes(_))}assignZoneValue(n,t){return n.length>0?n:t}submit(){const n={added:[],removed:[]};if(!this.currentFormGroupContext.invalid){if(this.currentFormGroupContext.pending)return void this.currentFormGroupContext.setErrors({cdSubmitButton:!0});this.groupType==z.do.symmetrical&&(this.editing&&(n.removed=this.getZoneData(this.flowSelectedRow.zones,this.zones.data.selected),n.added=this.getZoneData(this.zones.data.selected,this.flowSelectedRow.zones)),n.added=this.assignZoneValue(n.added,this.zones.data.selected)),this.rgwMultisiteService.createEditSyncFlow({...this.currentFormGroupContext.getRawValue(),zones:n}).subscribe(()=>{const t=this.editing?this.succeededLabels.EDITED:this.succeededLabels.CREATED;this.notificationService.show(x._.success,$localize`${t} Sync Flow '${this.currentFormGroupContext.getValue("flow_id")}'`),this.activeModal.close(x._.success)},()=>{this.currentFormGroupContext.setErrors({cdSubmitButton:!0}),this.activeModal.dismiss()})}}static{this.\u0275fac=function(t){return new(t||Hn)(e.\u0275\u0275directiveInject(b.NgbActiveModal),e.\u0275\u0275directiveInject(M.Ss),e.\u0275\u0275directiveInject(te.J),e.\u0275\u0275directiveInject(ye.y),e.\u0275\u0275directiveInject(ke.Z),e.\u0275\u0275directiveInject(xe.A),e.\u0275\u0275directiveInject(M.Vv))}}static{this.\u0275cmp=e.\u0275\u0275defineComponent({type:Hn,selectors:[["cd-rgw-multisite-sync-flow-modal"]],decls:31,vars:17,consts:()=>{let n,t,_,i,a,r,s,d,u,m,C,O,f,I;return n=$localize`:␟fbf4a235f29fe0da3231256434b997e81f94d753␟8854842644322907646:Bucket Name...`,t=$localize`:form title␟89aae2781c1e2c324ba484958a9a6b3328f88287␟3006025967559303774:${"\ufffd0\ufffd"}:INTERPOLATION: ${"\ufffd1\ufffd"}:INTERPOLATION_1: Flow`,_=$localize`:␟cff1428d10d59d14e45edec3c735a27b5482db59␟8953033926734869941:Name`,i=$localize`:␟5f4ec94a7dc4f5e8560836701d52110d0cd0120e␟5947435010326534759:Bucket Name`,a=$localize`:␟4592dfd0f941861c62e6e1d8541972f2fa9a9baa␟2766570284014675941:The bucket with chosen name does not exist.`,r=$localize`:␟dab9a30ea9f109a7395ec84fe144c4f70d50c32d␟4377629928032707348:Zones`,s=$localize`:␟cd67b02b10e1de9ae3498f69b8d974a091fc5764␟7335949317906982047:Flow need to be associated with atleast one zone`,d=$localize`:␟591a8628b7f4bf287ab8e96676e439e6a4d9ccfb␟8457280317445430871:Source Zone `,u=$localize`:␟e352211950e648879edc2336f7779d603f1cb0db␟4089505014234994473:Destination Zone`,m=$localize`:␟8154a52cf3ce1d4b42b295e7d29e976fb16672b7␟582862758171733461:Flow should be associated with ${"\ufffd0\ufffd"}:INTERPOLATION:`,C=$localize`:␟43a00fd0d6f4e1af6dec1b33ea58200e70c0ebdf␟4561033748408491790:${"\ufffd0\ufffd"}:INTERPOLATION: selection is required! `,O=$localize`:␟94516fa213706c67ce5a5b5765681d7fb032033a␟3894950702316166331:Loading...`,f=$localize`:␟5e4f5279d87e3b2801bfb07246d90dcdef8b29a6␟4059266529090072468:-- Select ${"\ufffd0\ufffd"}:INTERPOLATION: --`,I=$localize`:␟7cbdabcece469fab89cfa687ab152bca18b97498␟1417693714872528491:This field is required.`,[["frm","ngForm"],["directionalFlow",""],["zoneMultiSelect",""],["sourceAndDestZone",""],t,_,i,a,r,s,d,u,C,O,f,I,["title",m],[3,"modalRef"],[1,"modal-title"],[1,"modal-content"],["name","flowForm","novalidate","",3,"formGroup"],[1,"modal-body"],[1,"form-group","row"],["for","flow_id",1,"cd-col-form-label","required"],[1,"cd-col-form-input"],["type","text","placeholder","Flow Name...","id","flow_id","name","flow_id","formControlName","flow_id",1,"form-control"],["for","bucket",1,"cd-col-form-label"],["id","bucket","name","bucket","type","text","placeholder",n,"formControlName","bucket_name",1,"form-control"],["class","invalid-feedback",4,"ngIf"],[4,"ngIf","ngIfElse"],[1,"modal-footer"],[3,"submitActionEvent","form","submitText"],[1,"invalid-feedback"],["for","zones",1,"cd-col-form-label","required"],[4,"ngTemplateOutlet","ngTemplateOutletContext"],["for","source_zone",1,"cd-col-form-label","required"],["for","destination_zone",1,"cd-col-form-label","required"],[3,"selection","id","name","customBadges","customBadgeValidators","messages","data","options"],["class","cds-warning-color",3,"cdsIcon","size","title",4,"ngIf"],[1,"cds-warning-color",3,"cdsIcon","size",6,"title"],[1,"form-select",3,"change","id","name","autofocus"],[3,"ngValue",4,"ngIf"],[3,"value",4,"ngFor","ngForOf"],[3,"ngValue"],[3,"value"]]},template:function(t,_){if(1&t){const i=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"cd-modal",17),e.\u0275\u0275elementContainerStart(1,18),e.\u0275\u0275i18n(2,4),e.\u0275\u0275pipe(3,"titlecase"),e.\u0275\u0275pipe(4,"upperFirst"),e.\u0275\u0275elementContainerEnd(),e.\u0275\u0275elementContainerStart(5,19),e.\u0275\u0275elementStart(6,"form",20,0)(8,"div",21)(9,"div",22)(10,"label",23),e.\u0275\u0275i18n(11,5),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(12,"div",24),e.\u0275\u0275element(13,"input",25),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(14,"div",22)(15,"label",26),e.\u0275\u0275i18n(16,6),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(17,"div",24),e.\u0275\u0275element(18,"input",27),e.\u0275\u0275template(19,Gp,2,0,"span",28),e.\u0275\u0275elementEnd()(),e.\u0275\u0275template(20,Ap,10,4,"ng-container",29)(21,vp,10,8,"ng-template",null,1,e.\u0275\u0275templateRefExtractor),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(23,"div",30)(24,"cd-form-button-panel",31),e.\u0275\u0275pipe(25,"titlecase"),e.\u0275\u0275pipe(26,"upperFirst"),e.\u0275\u0275listener("submitActionEvent",function(){return e.\u0275\u0275restoreView(i),e.\u0275\u0275resetView(_.submit())}),e.\u0275\u0275elementEnd()()(),e.\u0275\u0275elementContainerEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275template(27,$p,3,9,"ng-template",null,2,e.\u0275\u0275templateRefExtractor)(29,Up,5,7,"ng-template",null,3,e.\u0275\u0275templateRefExtractor)}if(2&t){const i=e.\u0275\u0275reference(7),a=e.\u0275\u0275reference(22);e.\u0275\u0275property("modalRef",_.activeModal),e.\u0275\u0275advance(4),e.\u0275\u0275i18nExp(e.\u0275\u0275pipeBind1(3,9,_.action))(e.\u0275\u0275pipeBind1(4,11,_.groupType)),e.\u0275\u0275i18nApply(2),e.\u0275\u0275advance(2),e.\u0275\u0275property("formGroup",_.currentFormGroupContext),e.\u0275\u0275advance(13),e.\u0275\u0275property("ngIf",_.currentFormGroupContext.showError("bucket_name",i,"bucketNameNotAllowed")),e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf",_.groupType==_.flowType.symmetrical)("ngIfElse",a),e.\u0275\u0275advance(4),e.\u0275\u0275property("form",_.currentFormGroupContext)("submitText",e.\u0275\u0275pipeBind1(25,13,_.action)+" "+e.\u0275\u0275pipeBind1(26,15,_.groupType)+" Flow")}},dependencies:[g.NgForOf,g.NgIf,g.NgTemplateOutlet,Ot.m,Zt.U,Xe.z,oe.e,Ct.B,j.S,Be.a,De.C,ne.E,l.\u0275NgNoValidate,l.NgSelectOption,l.\u0275NgSelectMultipleOption,l.DefaultValueAccessor,l.NgControlStatus,l.NgControlStatusGroup,l.FormGroupDirective,l.FormControlName,c.IconDirective,c.Option,g.TitleCasePipe,Oe.r]})}}const kp=o=>({name:"source_zones",zone:o}),zp=o=>({name:"destination_zones",zone:o});function Hp(o,n){1&o&&e.\u0275\u0275elementContainer(0)}function Xp(o,n){1&o&&e.\u0275\u0275elementContainer(0)}function Bp(o,n){if(1&o&&(e.\u0275\u0275namespaceSVG(),e.\u0275\u0275elementStart(0,"svg",36),e.\u0275\u0275i18nAttributes(1,12),e.\u0275\u0275elementEnd()),2&o){const t=e.\u0275\u0275nextContext().name,_=e.\u0275\u0275nextContext();e.\u0275\u0275i18nExp(null==t?null:t.split("_").join(" ")),e.\u0275\u0275i18nApply(1),e.\u0275\u0275property("cdsIcon",_.icons.warning)("size",_.icons.size16)}}function Vp(o,n){if(1&o&&(e.\u0275\u0275elementStart(0,"span",37),e.\u0275\u0275i18n(1,11),e.\u0275\u0275elementEnd()),2&o){const t=e.\u0275\u0275nextContext().name;e.\u0275\u0275advance(),e.\u0275\u0275i18nExp(null==t?null:t.split("_").join(" ")),e.\u0275\u0275i18nApply(1)}}function Zp(o,n){if(1&o){const t=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"cd-select-badges",33),e.\u0275\u0275listener("selection",function(){const i=e.\u0275\u0275restoreView(t).name,a=e.\u0275\u0275nextContext();return e.\u0275\u0275resetView(a.onZoneSelection(i))}),e.\u0275\u0275elementEnd(),e.\u0275\u0275template(1,Bp,2,3,"svg",34)(2,Vp,2,1,"span",35)}if(2&o){const t=n.name,_=n.zone,i=e.\u0275\u0275nextContext(),a=e.\u0275\u0275reference(6);e.\u0275\u0275propertyInterpolate("id",t),e.\u0275\u0275propertyInterpolate("name",t),e.\u0275\u0275property("customBadges",_.customBadges)("customBadgeValidators",_.data.validators)("messages",_.data.messages)("data",_.data.selected)("options",_.data.available),e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf",_.data.selected.length<=0),e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf",i.pipeForm.showError(t,a,"required"))}}const Fo=$localize`All zones (*)`;class Xn{constructor(n,t,_,i,a,r){this.activeModal=n,this.rgwDaemonService=t,this.rgwZonegroupService=_,this.rgwMultisiteService=i,this.notificationService=a,this.succeededLabels=r,this.sourceZones=new So(!1,"Filter Zones"),this.destZones=new So(!1,"Filter Zones"),this.icons=L.FI,this.allBucketSelectedHelpText="If no value is provided, all the buckets in the zone group will be selected."}ngOnInit(){this.pipeSelectedRow&&(this.pipeSelectedRow.source.zones=this.replaceAsteriskWithString(this.pipeSelectedRow.source.zones),this.pipeSelectedRow.dest.zones=this.replaceAsteriskWithString(this.pipeSelectedRow.dest.zones)),this.editing="create"!==this.action,this.pipeForm=new Fe.$({pipe_id:new l.UntypedFormControl("",{validators:[l.Validators.required]}),group_id:new l.UntypedFormControl(this.groupExpandedRow?.groupName||"",{validators:[l.Validators.required]}),bucket_name:new l.UntypedFormControl(this.groupExpandedRow?.bucket||""),source_bucket:new l.UntypedFormControl(""),source_zones:new l.UntypedFormControl("",{validators:[l.Validators.required]}),destination_bucket:new l.UntypedFormControl(""),destination_zones:new l.UntypedFormControl("",{validators:[l.Validators.required]})}),this.pipeForm.get("bucket_name").disable(),this.rgwDaemonService.selectedDaemon$.pipe((0,Z.switchMap)(n=>{if(n){const t=new z.Oe;return t.name=n.zonegroup_name,this.rgwZonegroupService.get(t).pipe((0,Z.catchError)(()=>(0,w.of)([])))}return(0,w.of)([])})).subscribe(n=>{if(n&&n?.zones?.length>0){let t=[];if(t.push(new ht.O(!1,Fo,"")),n.zones.forEach(_=>{t.push(new ht.O(!1,_.name,""))}),this.sourceZones.data.available=JSON.parse(JSON.stringify(t)),this.destZones.data.available=JSON.parse(JSON.stringify(t)),this.editing){this.pipeForm.get("pipe_id").disable(),this.sourceZones.data.selected=[...this.pipeSelectedRow.source.zones],this.destZones.data.selected=[...this.pipeSelectedRow.dest.zones];const _=[];this.pipeSelectedRow.dest.zones.forEach(i=>{_.push(new ht.O(!0,i,""))}),this.pipeForm.patchValue({pipe_id:this.pipeSelectedRow.id,source_zones:this.pipeSelectedRow.source.zones,destination_zones:this.pipeSelectedRow.dest.zones,source_bucket:this.pipeSelectedRow.source.bucket,destination_bucket:this.pipeSelectedRow.dest.bucket})}}})}replaceWithAsterisk(n){return n.map(t=>t.replace(Fo,"*"))}replaceAsteriskWithString(n){return n.map(t=>t.replace("*",Fo))}onZoneSelection(n){"source_zones"===n?this.pipeForm.patchValue({source_zones:this.sourceZones.data.selected}):this.pipeForm.patchValue({destination_zones:this.destZones.data.selected})}getZoneData(n,t){return n.filter(_=>!t.includes(_))}assignZoneValue(n,t){return n.length>0?this.replaceWithAsterisk(n):this.replaceWithAsterisk(t)}submit(){const n={added:[],removed:[]},t={added:[],removed:[]};if(!this.pipeForm.invalid){if(this.pipeForm.pending)return void this.pipeForm.setErrors({cdSubmitButton:!0});this.editing&&(t.removed=this.getZoneData(this.pipeSelectedRow.dest.zones,this.destZones.data.selected),t.added=this.getZoneData(this.destZones.data.selected,this.pipeSelectedRow.dest.zones),n.removed=this.getZoneData(this.pipeSelectedRow.source.zones,this.sourceZones.data.selected),n.added=this.getZoneData(this.sourceZones.data.selected,this.pipeSelectedRow.source.zones)),n.added=this.assignZoneValue(n.added,this.sourceZones.data.selected),t.added=this.assignZoneValue(t.added,this.destZones.data.selected),n.removed=this.replaceWithAsterisk(n.removed),t.removed=this.replaceWithAsterisk(t.removed),this.rgwMultisiteService.createEditSyncPipe({...this.pipeForm.getRawValue(),source_zones:n,destination_zones:t,user:this.editing?this.pipeSelectedRow?.params?.user:"",mode:this.editing?this.pipeSelectedRow?.params?.mode:""}).subscribe(()=>{const _=this.editing?this.succeededLabels.EDITED:this.succeededLabels.CREATED;this.notificationService.show(x._.success,$localize`${_} Sync Pipe '${this.pipeForm.getValue("pipe_id")}'`),this.activeModal.close(x._.success)},()=>{this.pipeForm.setErrors({cdSubmitButton:!0}),this.activeModal.dismiss()})}}static{this.\u0275fac=function(t){return new(t||Xn)(e.\u0275\u0275directiveInject(b.NgbActiveModal),e.\u0275\u0275directiveInject(ye.y),e.\u0275\u0275directiveInject(ke.Z),e.\u0275\u0275directiveInject(xe.A),e.\u0275\u0275directiveInject(te.J),e.\u0275\u0275directiveInject(M.Vv))}}static{this.\u0275cmp=e.\u0275\u0275defineComponent({type:Xn,selectors:[["cd-rgw-multisite-sync-pipe-modal"]],decls:49,vars:20,consts:()=>{let n,t,_,i,a,r,s,d,u,m,C,O,f,I;return n=$localize`:␟fbf4a235f29fe0da3231256434b997e81f94d753␟8854842644322907646:Bucket Name...`,t=$localize`:␟1fe2000b7146995d3f03378acf495c8b6a521155␟117395489427880835:Source Bucket Name...`,_=$localize`:␟7b2f7c46ba85068d1d9861aa361d0bbd2ea5d6d5␟5240698873178505523:Destination Bucket Name...`,i=$localize`:form title␟529b87558f50720dc4b4d2b9d1aa93f0c7f578ca␟4628444620366561532:${"\ufffd0\ufffd"}:INTERPOLATION: Pipe`,a=$localize`:␟cff1428d10d59d14e45edec3c735a27b5482db59␟8953033926734869941:Name`,r=$localize`:␟21ebaa8ca565974a4997a00123332bb1a30242bb␟4133708551984034160:Source Zone `,s=$localize`:␟e352211950e648879edc2336f7779d603f1cb0db␟4089505014234994473:Destination Zone`,d=$localize`:␟5f4ec94a7dc4f5e8560836701d52110d0cd0120e␟5947435010326534759:Bucket Name`,u=$localize`:␟288d35919d98830ff9b8a09a46f850a6d14b1cae␟5353710433603859763:Source Bucket`,m=$localize`:␟3a7bc67bb1de85bc01706cd19c7558bcb7c32609␟7922950606857562753:${"\ufffd0\ufffd"}:INTERPOLATION:`,C=$localize`:␟778f43a387e5a33cb616d34199cf6611a5e8f662␟7765562629537640018:Destination Bucket`,O=$localize`:␟3a7bc67bb1de85bc01706cd19c7558bcb7c32609␟7922950606857562753:${"\ufffd0\ufffd"}:INTERPOLATION:`,f=$localize`:␟b2d9ace6ae0b36ea4a5fac530b0e972a4b84deb8␟2607014709636750919:Pipe should be associated with ${"\ufffd0\ufffd"}:INTERPOLATION:`,I=$localize`:␟95467f116caabfb0e9030c644471b1535ee933b6␟3505918044210132763:${"\ufffd0\ufffd"}:INTERPOLATION: selection is required! `,[["frm","ngForm"],["zoneMultiSelect",""],i,a,r,s,d,u,m,C,O,I,["title",f],[3,"modalRef"],[1,"modal-title"],[1,"modal-content"],["name","pipeForm","novalidate","",3,"formGroup"],[1,"modal-body"],[1,"form-group","row"],["for","pipe_id",1,"cd-col-form-label","required"],[1,"cd-col-form-input"],["type","text","placeholder","Pipe Name...","id","pipe_id","name","pipe_id","formControlName","pipe_id",1,"form-control",3,"readonly"],["for","source_zone",1,"cd-col-form-label","required"],[4,"ngTemplateOutlet","ngTemplateOutletContext"],["for","destination_zone",1,"cd-col-form-label","required"],["for","bucket",1,"cd-col-form-label"],["id","bucket","name","bucket","type","text","placeholder",n,"formControlName","bucket_name",1,"form-control"],["for","source_bucket",1,"cd-col-form-label"],["id","source_bucket","name","source_bucket","type","text","placeholder",t,"formControlName","source_bucket",1,"form-control"],["for","dest_bucket",1,"cd-col-form-label"],["id","dest_bucket","name","dest_bucket","type","text","placeholder",_,"formControlName","destination_bucket",1,"form-control"],[1,"modal-footer"],[3,"submitActionEvent","form","submitText"],[3,"selection","id","name","customBadges","customBadgeValidators","messages","data","options"],["class","cds-warning-color",3,"cdsIcon","size","title",4,"ngIf"],["class","invalid-feedback",4,"ngIf"],[1,"cds-warning-color",3,"cdsIcon","size",6,"title"],[1,"invalid-feedback"]]},template:function(t,_){if(1&t){const i=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"cd-modal",13),e.\u0275\u0275elementContainerStart(1,14),e.\u0275\u0275i18n(2,2),e.\u0275\u0275pipe(3,"titlecase"),e.\u0275\u0275elementContainerEnd(),e.\u0275\u0275elementContainerStart(4,15),e.\u0275\u0275elementStart(5,"form",16,0)(7,"div",17)(8,"div",18)(9,"label",19),e.\u0275\u0275i18n(10,3),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(11,"div",20),e.\u0275\u0275element(12,"input",21),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(13,"div",18)(14,"label",22),e.\u0275\u0275i18n(15,4),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(16,"div",20),e.\u0275\u0275template(17,Hp,1,0,"ng-container",23),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(18,"div",18)(19,"label",24),e.\u0275\u0275i18n(20,5),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(21,"div",20),e.\u0275\u0275template(22,Xp,1,0,"ng-container",23),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(23,"div",18)(24,"label",25),e.\u0275\u0275i18n(25,6),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(26,"div",20),e.\u0275\u0275element(27,"input",26),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(28,"div",18)(29,"label",27),e.\u0275\u0275i18n(30,7),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(31,"div",20),e.\u0275\u0275element(32,"input",28),e.\u0275\u0275elementStart(33,"cd-help-text")(34,"span"),e.\u0275\u0275i18n(35,8),e.\u0275\u0275elementEnd()()()(),e.\u0275\u0275elementStart(36,"div",18)(37,"label",29),e.\u0275\u0275i18n(38,9),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(39,"div",20),e.\u0275\u0275element(40,"input",30),e.\u0275\u0275elementStart(41,"cd-help-text")(42,"span"),e.\u0275\u0275i18n(43,10),e.\u0275\u0275elementEnd()()()()(),e.\u0275\u0275elementStart(44,"div",31)(45,"cd-form-button-panel",32),e.\u0275\u0275pipe(46,"titlecase"),e.\u0275\u0275listener("submitActionEvent",function(){return e.\u0275\u0275restoreView(i),e.\u0275\u0275resetView(_.submit())}),e.\u0275\u0275elementEnd()()(),e.\u0275\u0275elementContainerEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275template(47,Zp,3,9,"ng-template",null,1,e.\u0275\u0275templateRefExtractor)}if(2&t){const i=e.\u0275\u0275reference(48);e.\u0275\u0275property("modalRef",_.activeModal),e.\u0275\u0275advance(3),e.\u0275\u0275i18nExp(e.\u0275\u0275pipeBind1(3,12,_.action)),e.\u0275\u0275i18nApply(2),e.\u0275\u0275advance(2),e.\u0275\u0275property("formGroup",_.pipeForm),e.\u0275\u0275advance(7),e.\u0275\u0275property("readonly",_.editing),e.\u0275\u0275advance(5),e.\u0275\u0275property("ngTemplateOutlet",i)("ngTemplateOutletContext",e.\u0275\u0275pureFunction1(16,kp,_.sourceZones)),e.\u0275\u0275advance(5),e.\u0275\u0275property("ngTemplateOutlet",i)("ngTemplateOutletContext",e.\u0275\u0275pureFunction1(18,zp,_.destZones)),e.\u0275\u0275advance(13),e.\u0275\u0275i18nExp(_.allBucketSelectedHelpText),e.\u0275\u0275i18nApply(35),e.\u0275\u0275advance(8),e.\u0275\u0275i18nExp(_.allBucketSelectedHelpText),e.\u0275\u0275i18nApply(43),e.\u0275\u0275advance(2),e.\u0275\u0275property("form",_.pipeForm)("submitText",e.\u0275\u0275pipeBind1(46,14,_.action)+" Pipe")}},dependencies:[g.NgIf,g.NgTemplateOutlet,Zt.U,Xe.z,oe.e,ie.O,j.S,Be.a,De.C,ne.E,l.\u0275NgNoValidate,l.DefaultValueAccessor,l.NgControlStatus,l.NgControlStatusGroup,l.FormGroupDirective,l.FormControlName,c.IconDirective,g.TitleCasePipe]})}}const qp=["deleteTpl"];function jp(o,n){if(1&o){const t=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"legend"),e.\u0275\u0275text(1," Symmetrical "),e.\u0275\u0275elementStart(2,"cd-help-text"),e.\u0275\u0275text(3," It can define symmetrical data flow, in which multiple zones sync data from each other. "),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(4,"cd-table",14,2),e.\u0275\u0275listener("updateSelection",function(i){e.\u0275\u0275restoreView(t);const a=e.\u0275\u0275nextContext(2);return e.\u0275\u0275resetView(a.updateSelection(i,a.flowType.symmetrical))})("fetchData",function(i){e.\u0275\u0275restoreView(t);const a=e.\u0275\u0275nextContext(2);return e.\u0275\u0275resetView(a.loadData(i))}),e.\u0275\u0275elementStart(6,"div",15),e.\u0275\u0275element(7,"cd-table-actions",16),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(8,"legend"),e.\u0275\u0275text(9," Directional "),e.\u0275\u0275elementStart(10,"cd-help-text"),e.\u0275\u0275text(11," It can define directional data flow, in which the data moves in one way, from one zone to another. "),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(12,"cd-table",14,2),e.\u0275\u0275listener("updateSelection",function(i){e.\u0275\u0275restoreView(t);const a=e.\u0275\u0275nextContext(2);return e.\u0275\u0275resetView(a.updateSelection(i,a.flowType.directional))})("fetchData",function(i){e.\u0275\u0275restoreView(t);const a=e.\u0275\u0275nextContext(2);return e.\u0275\u0275resetView(a.loadData(i))}),e.\u0275\u0275elementStart(14,"div",15),e.\u0275\u0275element(15,"cd-table-actions",16),e.\u0275\u0275elementEnd()()}if(2&o){const t=e.\u0275\u0275nextContext(2);e.\u0275\u0275advance(4),e.\u0275\u0275property("autoReload",!1)("data",t.symmetricalFlowData)("columns",t.symmetricalFlowCols)("searchableObjects",!0)("hasDetails",!1)("serverSide",!1)("count",0)("maxLimit",25)("toolHeader",!0),e.\u0275\u0275advance(3),e.\u0275\u0275property("permission",t.permission)("selection",t.symFlowSelection)("tableActions",t.symFlowTableActions),e.\u0275\u0275advance(5),e.\u0275\u0275property("autoReload",!1)("data",t.directionalFlowData)("columns",t.directionalFlowCols)("searchableObjects",!0)("hasDetails",!1)("serverSide",!1)("count",0)("maxLimit",25)("toolHeader",!0),e.\u0275\u0275advance(3),e.\u0275\u0275property("permission",t.permission)("selection",t.dirFlowSelection)("tableActions",t.dirFlowTableActions)}}function Yp(o,n){if(1&o){const t=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"legend"),e.\u0275\u0275i18nStart(1,5),e.\u0275\u0275element(2,"cd-help-text"),e.\u0275\u0275i18nEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(3,"cd-table",17,2),e.\u0275\u0275listener("updateSelection",function(i){e.\u0275\u0275restoreView(t);const a=e.\u0275\u0275nextContext(2);return e.\u0275\u0275resetView(a.pipeSelection=i)})("fetchData",function(i){e.\u0275\u0275restoreView(t);const a=e.\u0275\u0275nextContext(2);return e.\u0275\u0275resetView(a.loadData(i))}),e.\u0275\u0275elementStart(5,"div",15),e.\u0275\u0275element(6,"cd-table-actions",16),e.\u0275\u0275elementEnd()()}if(2&o){const t=e.\u0275\u0275nextContext(2);e.\u0275\u0275advance(3),e.\u0275\u0275property("data",t.pipeData)("columns",t.pipeCols)("searchableObjects",!0)("hasDetails",!1)("serverSide",!1)("toolHeader",!0),e.\u0275\u0275advance(3),e.\u0275\u0275property("permission",t.permission)("selection",t.pipeSelection)("tableActions",t.pipeTableActions)}}function Qp(o,n){if(1&o&&(e.\u0275\u0275elementContainerStart(0),e.\u0275\u0275elementStart(1,"nav",8,1),e.\u0275\u0275elementContainerStart(3,9),e.\u0275\u0275elementStart(4,"a",10),e.\u0275\u0275i18n(5,3),e.\u0275\u0275elementEnd(),e.\u0275\u0275template(6,jp,16,24,"ng-template",11),e.\u0275\u0275elementContainerEnd(),e.\u0275\u0275elementContainerStart(7,12),e.\u0275\u0275elementStart(8,"a",10),e.\u0275\u0275i18n(9,4),e.\u0275\u0275elementEnd(),e.\u0275\u0275template(10,Yp,7,9,"ng-template",11),e.\u0275\u0275elementContainerEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275element(11,"div",13),e.\u0275\u0275elementContainerEnd()),2&o){const t=e.\u0275\u0275reference(2);e.\u0275\u0275advance(11),e.\u0275\u0275property("ngbNavOutlet",t)}}function Jp(o,n){if(1&o&&(e.\u0275\u0275elementStart(0,"cd-alert-panel",18),e.\u0275\u0275i18n(1,6),e.\u0275\u0275pipe(2,"upperFirst"),e.\u0275\u0275elementEnd()),2&o){const t=e.\u0275\u0275nextContext();e.\u0275\u0275advance(2),e.\u0275\u0275i18nExp(e.\u0275\u0275pipeBind1(2,1,t.resourceType)),e.\u0275\u0275i18nApply(1)}}var jt;!function(o){o.flow="flow",o.pipe="pipe"}(jt||(jt={}));class Bn{constructor(n,t,_,i,a){this.actionLabels=n,this.modalService=t,this.rgwMultisiteService=_,this.taskWrapper=i,this.cdsModalService=a,this.resourceType=jt.flow,this.flowType=z.do,this.symmetricalFlowData=[],this.directionalFlowData=[],this.pipeData=[],this.symFlowSelection=new Ge.y,this.dirFlowSelection=new Ge.y,this.pipeSelection=new Ge.y,this.symmetricalFlowCols=[{name:"Name",prop:"id",flexGrow:1},{name:"Zones",prop:"zones",flexGrow:1}],this.directionalFlowCols=[{name:"Source Zone",prop:"source_zone",flexGrow:1},{name:"Destination Zone",prop:"dest_zone",flexGrow:1}],this.pipeCols=[{name:"Name",prop:"id",flexGrow:1},{name:"Source Zone",prop:"source.zones",flexGrow:1},{name:"Destination Zone",prop:"dest.zones",flexGrow:1},{name:"Source Bucket",prop:"source.bucket",flexGrow:1},{name:"Destination Bucket",prop:"dest.bucket",flexGrow:1}];const r={permission:"create",icon:L.FI.add,name:this.actionLabels.CREATE,click:()=>this.openModal(z.do.symmetrical),canBePrimary:I=>!I.hasSelection},s={permission:"update",icon:L.FI.edit,name:this.actionLabels.EDIT,click:()=>this.openModal(z.do.symmetrical,!0)},d={permission:"delete",icon:L.FI.destroy,disable:()=>!this.symFlowSelection.hasSelection,name:this.actionLabels.DELETE,click:()=>this.deleteFlow(z.do.symmetrical),canBePrimary:I=>I.hasMultiSelection};this.symFlowTableActions=[r,s,d];const u={permission:"create",icon:L.FI.add,name:this.actionLabels.CREATE,click:()=>this.openModal(z.do.directional),canBePrimary:I=>!I.hasSelection},m={permission:"delete",icon:L.FI.destroy,disable:()=>"Deleting the directional flow is disabled in the UI. Please use CLI to delete the directional flow",name:this.actionLabels.DELETE,click:()=>this.deleteFlow(z.do.directional),canBePrimary:I=>I.hasSelection};this.dirFlowTableActions=[u,m];const C={permission:"create",icon:L.FI.add,name:this.actionLabels.CREATE,click:()=>this.openPipeModal(),canBePrimary:I=>!I.hasSelection},O={permission:"update",icon:L.FI.edit,name:this.actionLabels.EDIT,click:()=>this.openPipeModal(!0)},f={permission:"delete",icon:L.FI.destroy,disable:()=>!this.pipeSelection.hasSelection,name:this.actionLabels.DELETE,click:()=>this.deletePipe(),canBePrimary:I=>I.hasMultiSelection};this.pipeTableActions=[C,O,f]}ngOnChanges(n){n.expandedRow.currentValue&&n.expandedRow.currentValue.groupName&&(this.symmetricalFlowData=[],this.directionalFlowData=[],this.loadData())}loadData(n){this.expandedRow&&this.rgwMultisiteService.getSyncPolicyGroup(this.expandedRow.groupName,this.expandedRow.bucket).subscribe(t=>{this.symmetricalFlowData=t.data_flow[z.do.symmetrical]||[],this.directionalFlowData=t.data_flow[z.do.directional]||[],this.pipeData=t.pipes||[]},()=>{n&&n.error()})}updateSelection(n,t){t===z.do.directional?this.dirFlowSelection=n:this.symFlowSelection=n}openModal(n){var t=this;return(0,o_.A)(function*(_,i=!1){const a=i?"edit":"create",r={groupType:_,groupExpandedRow:t.expandedRow,flowSelectedRow:_===z.do.symmetrical?t.symFlowSelection.first():t.dirFlowSelection.first(),action:a};t.modalRef=t.modalService.show(Hn,r,{size:"lg"});try{(yield t.modalRef.result)===x._.success&&t.loadData()}catch{}}).apply(this,arguments)}deleteFlow(n){this.resourceType=jt.flow;let t=this.symFlowSelection;n===z.do.directional&&(t=this.dirFlowSelection);const _=t.selected.map(i=>i.id);this.cdsModalService.show(Ue.D,{itemDescription:t.hasSingleSelection?$localize`Flow`:$localize`Flows`,itemNames:_,bodyTemplate:this.deleteTpl,submitActionObservable:()=>new w.Observable(i=>{this.taskWrapper.wrapTaskAroundCall({task:new Ft.O("rgw/multisite/sync-flow/delete",{flow_ids:_}),call:(0,w.forkJoin)(t.selected.map(a=>this.rgwMultisiteService.removeSyncFlow(a.id,n,this.expandedRow.groupName,this.expandedRow.bucket)))}).subscribe({error:a=>{i.error(a),this.table.refreshBtn()},complete:()=>{i.complete(),this.table.refreshBtn()}})})})}openPipeModal(){var n=this;return(0,o_.A)(function*(t=!1){const _=t?"edit":"create",i={groupExpandedRow:n.expandedRow,pipeSelectedRow:n.pipeSelection.first(),action:_};n.modalRef=n.modalService.show(Xn,i,{size:"lg"});try{(yield n.modalRef.result)===x._.success&&n.loadData()}catch{}}).apply(this,arguments)}deletePipe(){this.resourceType=jt.pipe;const n=this.pipeSelection.selected.map(t=>t.id);this.cdsModalService.show(Ue.D,{itemDescription:this.pipeSelection.hasSingleSelection?$localize`Pipe`:$localize`Pipes`,itemNames:n,bodyTemplate:this.deleteTpl,submitActionObservable:()=>new w.Observable(t=>{this.taskWrapper.wrapTaskAroundCall({task:new Ft.O("rgw/multisite/sync-pipe/delete",{pipe_ids:n}),call:(0,w.forkJoin)(this.pipeSelection.selected.map(_=>this.rgwMultisiteService.removeSyncPipe(_.id,this.expandedRow.groupName,this.expandedRow.bucket)))}).subscribe({error:_=>{t.error(_),this.table.refreshBtn()},complete:()=>{t.complete(),this.table.refreshBtn()}})})})}static{this.\u0275fac=function(t){return new(t||Bn)(e.\u0275\u0275directiveInject(M.Ss),e.\u0275\u0275directiveInject(Vt.B),e.\u0275\u0275directiveInject(xe.A),e.\u0275\u0275directiveInject(Nt.a),e.\u0275\u0275directiveInject(he.V))}}static{this.\u0275cmp=e.\u0275\u0275defineComponent({type:Bn,selectors:[["cd-rgw-multisite-sync-policy-details"]],viewQuery:function(t,_){if(1&t&&(e.\u0275\u0275viewQuery(ae.O,5),e.\u0275\u0275viewQuery(qp,7)),2&t){let i;e.\u0275\u0275queryRefresh(i=e.\u0275\u0275loadQuery())&&(_.table=i.first),e.\u0275\u0275queryRefresh(i=e.\u0275\u0275loadQuery())&&(_.deleteTpl=i.first)}},inputs:{expandedRow:"expandedRow",permission:"permission"},features:[e.\u0275\u0275NgOnChangesFeature],decls:3,vars:1,consts:()=>{let n,t,_,i;return n=$localize`:␟e4bd187bc9b269e544c76ea16061d68ec4a2e7eb␟8888491308706722034:Flow`,t=$localize`:␟f7dadb737c27242b13df72c48b91829f29b9c270␟889548834955570854:Pipe`,_=$localize`:␟7dacd7d4f030c11345c063ff89ad69c25b7b7c58␟5598874638174293814: Pipe ${"\ufffd#2\ufffd"}:START_TAG_CD_HELP_TEXT: A pipe defines the actual buckets that can use these data flows, and the properties that are associated with it. ${"\ufffd/#2\ufffd"}:CLOSE_TAG_CD_HELP_TEXT:`,i=$localize`:␟686e2b9819dcc56ea04af4ba13d1d6925bf63962␟4338620414240773694: Deleting ${"\ufffd0\ufffd"}:INTERPOLATION: may disrupt data synchronization `,[["deleteTpl",""],["nav","ngbNav"],["table",""],n,t,_,i,[4,"ngIf"],["ngbNav","","cdStatefulTab","sync-policy-details",1,"nav-tabs"],["ngbNavItem","flow"],["ngbNavLink",""],["ngbNavContent",""],["ngbNavItem","pipe"],[3,"ngbNavOutlet"],["columnMode","flex","selectionType","multiClick",3,"updateSelection","fetchData","autoReload","data","columns","searchableObjects","hasDetails","serverSide","count","maxLimit","toolHeader"],[1,"table-actions"],[1,"btn-group",3,"permission","selection","tableActions"],["selectionType","multiClick",3,"updateSelection","fetchData","data","columns","searchableObjects","hasDetails","serverSide","toolHeader"],["type","danger"]]},template:function(t,_){1&t&&e.\u0275\u0275template(0,Qp,12,1,"ng-container",7)(1,Jp,3,3,"ng-template",null,0,e.\u0275\u0275templateRefExtractor),2&t&&e.\u0275\u0275property("ngIf",_.expandedRow)},dependencies:[g.NgIf,Ie.m,ie.O,ae.O,$e.j,gn.B,b.NgbNavContent,b.NgbNav,b.NgbNavItem,b.NgbNavLink,b.NgbNavLinkBase,b.NgbNavOutlet,Oe.r],styles:["datatable-scroller{width:100%!important}"]})}}class Yt{static{this.\u0275fac=function(t){return new(t||Yt)}}static{this.\u0275cmp=e.\u0275\u0275defineComponent({type:Yt,selectors:[["cd-rgw-multisite-tabs"]],decls:7,vars:0,consts:()=>{let n,t;return n=$localize`:␟4a41f824a35ba01d5bd7be61aa06b3e8145209d0␟3008420115644088420:Configuration`,t=$localize`:␟0ec83ea0ffdb84fdc493c4ae0a771b33b1d693af␟11312429689888466:Sync Policy`,[n,t,[1,"nav","nav-tabs"],[1,"nav-item"],["routerLink","/rgw/multisite/configuration","routerLinkActive","active","ariaCurrentWhenActive","page",1,"nav-link"],["routerLink","//rgw/multisite/sync-policy","routerLinkActive","active","ariaCurrentWhenActive","page",1,"nav-link"]]},template:function(t,_){1&t&&(e.\u0275\u0275elementStart(0,"ul",2)(1,"li",3)(2,"a",4),e.\u0275\u0275i18n(3,0),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(4,"li",3)(5,"a",5),e.\u0275\u0275i18n(6,1),e.\u0275\u0275elementEnd()()())},dependencies:[Y.RouterLink,Y.RouterLinkActive]})}}const em=["deleteTpl"];function tm(o,n){if(1&o&&e.\u0275\u0275element(0,"cd-rgw-multisite-sync-policy-details",9),2&o){const t=e.\u0275\u0275nextContext();e.\u0275\u0275property("expandedRow",t.expandedRow)("permission",t.permission)}}function nm(o,n){1&o&&(e.\u0275\u0275elementStart(0,"cd-alert-panel",10),e.\u0275\u0275i18n(1,3),e.\u0275\u0275elementEnd())}const Mo="rgw/multisite/sync-policy";class Qt extends et.D{constructor(n,t,_,i,a,r,s,d){super(),this.rgwMultisiteService=n,this.titleCasePipe=t,this.actionLabels=_,this.authStorageService=i,this.modalService=a,this.taskWrapper=r,this.router=s,this.rgwDaemonService=d,this.columns=[],this.syncPolicyData=[],this.selection=new Ge.y}ngOnInit(){this.permission=this.authStorageService.getPermissions().rgw,this.columns=[{prop:"uniqueId",isInvisible:!0,isHidden:!0},{name:$localize`Group Name`,prop:"groupName",flexGrow:1},{name:$localize`Status`,prop:"status",flexGrow:1,cellTransformation:He.x.tooltip,customTemplateConfig:{map:{Enabled:{class:"badge-success",tooltip:"sync is allowed and enabled"},Allowed:{class:"badge-info",tooltip:"sync is allowed"},Forbidden:{class:"badge-warning",tooltip:"sync (as defined by this group) is not allowed and can override other groups"}}},pipe:this.titleCasePipe},{name:$localize`Zonegroup`,prop:"zonegroup",flexGrow:1,cellTransformation:He.x.map,customTemplateConfig:{undefined:"-","":"-"}},{name:$localize`Bucket`,prop:"bucket",flexGrow:1,cellTransformation:He.x.map,customTemplateConfig:{undefined:"-","":"-"}}],this.rgwDaemonService.list().subscribe();const n=()=>this.selection.first().groupName&&this.selection.first().bucket?`${M.Qp.EDIT}/${this.selection.first().groupName}/${this.selection.first().bucket}`:`${M.Qp.EDIT}/${this.selection.first().groupName}`,t={permission:"create",icon:L.FI.add,click:()=>this.router.navigate([Mo,{outlets:{modal:M.Qp.CREATE}}]),name:this.actionLabels.CREATE,canBePrimary:a=>!a.hasSelection},_={permission:"update",icon:L.FI.edit,click:()=>this.router.navigate([Mo,{outlets:{modal:n()}}]),name:this.actionLabels.EDIT},i={permission:"delete",icon:L.FI.destroy,click:()=>this.deleteAction(),disable:()=>!this.selection.hasSelection,name:this.actionLabels.DELETE,canBePrimary:a=>a.hasMultiSelection};this.tableActions=[t,_,i]}transformSyncPolicyData(n){n&&n.length>0&&(n.forEach(t=>{this.syncPolicyData.push({uniqueId:t.id+(t.bucketName?t.bucketName:""),groupName:t.id,status:t.status,bucket:t.bucketName,zonegroup:t.zonegroup})}),this.syncPolicyData=[...this.syncPolicyData])}updateSelection(n){this.selection=n}getPolicyList(n){this.rgwMultisiteService.getSyncPolicy("","",!0).subscribe(t=>{this.syncPolicyData=[],this.transformSyncPolicyData(t)},()=>{n&&n.error()})}deleteAction(){const n=this.selection.selected.map(t=>t.groupName);this.modalService.show(Ue.D,{itemDescription:this.selection.hasSingleSelection?$localize`Policy Group`:$localize`Policy Groups`,itemNames:n,bodyTemplate:this.deleteTpl,submitActionObservable:()=>new w.Observable(t=>{this.taskWrapper.wrapTaskAroundCall({task:new Ft.O("rgw/multisite/sync-policy/delete",{group_names:n}),call:(0,w.forkJoin)(this.selection.selected.map(_=>this.rgwMultisiteService.removeSyncPolicyGroup(_.groupName,_.bucket)))}).subscribe({error:_=>{t.error(_),this.table.refreshBtn()},complete:()=>{t.complete(),this.table.refreshBtn()}})})})}static{this.\u0275fac=function(t){return new(t||Qt)(e.\u0275\u0275directiveInject(xe.A),e.\u0275\u0275directiveInject(g.TitleCasePipe),e.\u0275\u0275directiveInject(M.Ss),e.\u0275\u0275directiveInject(be.v),e.\u0275\u0275directiveInject(he.V),e.\u0275\u0275directiveInject(Nt.a),e.\u0275\u0275directiveInject(Y.Router),e.\u0275\u0275directiveInject(ye.y))}}static{this.\u0275cmp=e.\u0275\u0275defineComponent({type:Qt,selectors:[["cd-rgw-multisite-sync-policy"]],viewQuery:function(t,_){if(1&t&&(e.\u0275\u0275viewQuery(ae.O,7),e.\u0275\u0275viewQuery(em,7)),2&t){let i;e.\u0275\u0275queryRefresh(i=e.\u0275\u0275loadQuery())&&(_.table=i.first),e.\u0275\u0275queryRefresh(i=e.\u0275\u0275loadQuery())&&(_.deleteTpl=i.first)}},features:[e.\u0275\u0275ProvidersFeature([{provide:se.E,useValue:new se.E(Mo)}]),e.\u0275\u0275InheritDefinitionFeature],decls:12,vars:10,consts:()=>{let n,t;return n=$localize`:␟bd8e8df65d83dfb419a4b46119aff0a543c163ef␟2937095811236384340: Multisite Sync Policy ${"\ufffd#3\ufffd"}:START_TAG_CD_HELP_TEXT: Multisite bucket-granularity sync policy provides fine grained control of data movement between buckets in different zones. Leveraging the bucket-granularity sync policy is possible for buckets to diverge, and a bucket can pull data from other buckets (ones that don’t share its name or its ID) in different zone. ${"\ufffd/#3\ufffd"}:CLOSE_TAG_CD_HELP_TEXT:`,t=$localize`:␟3f4aabcce7b10d6c2a0df0f2254c038169e4b797␟697472702817047072: Are you sure you want to delete these policy groups? `,[["table",""],["deleteTpl",""],n,t,["identifier","uniqueId","selectionType","multiClick",3,"setExpandedRow","fetchData","updateSelection","autoReload","data","columns","forceIdentifier","searchableObjects","hasDetails","toolHeader"],[1,"table-actions"],[1,"btn-group",3,"permission","selection","tableActions"],[3,"expandedRow","permission",4,"cdTableDetail"],["name","modal",3,"deactivate"],[3,"expandedRow","permission"],["type","danger"]]},template:function(t,_){if(1&t){const i=e.\u0275\u0275getCurrentView();e.\u0275\u0275element(0,"cd-rgw-multisite-tabs"),e.\u0275\u0275elementStart(1,"legend"),e.\u0275\u0275i18nStart(2,2),e.\u0275\u0275element(3,"cd-help-text"),e.\u0275\u0275i18nEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(4,"cd-table",4,0),e.\u0275\u0275listener("setExpandedRow",function(r){return e.\u0275\u0275restoreView(i),e.\u0275\u0275resetView(_.setExpandedRow(r))})("fetchData",function(r){return e.\u0275\u0275restoreView(i),e.\u0275\u0275resetView(_.getPolicyList(r))})("updateSelection",function(r){return e.\u0275\u0275restoreView(i),e.\u0275\u0275resetView(_.updateSelection(r))}),e.\u0275\u0275elementStart(6,"div",5),e.\u0275\u0275element(7,"cd-table-actions",6),e.\u0275\u0275elementEnd(),e.\u0275\u0275template(8,tm,1,2,"cd-rgw-multisite-sync-policy-details",7),e.\u0275\u0275elementEnd(),e.\u0275\u0275template(9,nm,2,0,"ng-template",null,1,e.\u0275\u0275templateRefExtractor),e.\u0275\u0275elementStart(11,"router-outlet",8),e.\u0275\u0275listener("deactivate",function(){return e.\u0275\u0275restoreView(i),e.\u0275\u0275resetView(_.getPolicyList())}),e.\u0275\u0275elementEnd()}2&t&&(e.\u0275\u0275advance(4),e.\u0275\u0275property("autoReload",!1)("data",_.syncPolicyData)("columns",_.columns)("forceIdentifier",!0)("searchableObjects",!0)("hasDetails",!0)("toolHeader",!0),e.\u0275\u0275advance(3),e.\u0275\u0275property("permission",_.permission)("selection",_.selection)("tableActions",_.tableActions))},dependencies:[Ie.m,ie.O,ae.O,$e.j,ot.N,Y.RouterOutlet,Bn,Yt]})}}const om=["treeNodeTemplate"],_m=(o,n,t)=>[o,n,t],im=(o,n)=>({node:o,depth:n}),am=o=>({visibility:o}),rm=o=>({node:o,depth:0});function lm(o,n){if(1&o){const t=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"cd-alert-panel",21),e.\u0275\u0275listener("action",function(){e.\u0275\u0275restoreView(t);const i=e.\u0275\u0275nextContext();return e.\u0275\u0275resetView(i.enableRgwModule())}),e.\u0275\u0275i18n(1,4),e.\u0275\u0275elementEnd()}}function sm(o,n){1&o&&(e.\u0275\u0275elementStart(0,"cd-alert-panel",22),e.\u0275\u0275i18nStart(1,5),e.\u0275\u0275element(2,"a",23),e.\u0275\u0275i18nEnd(),e.\u0275\u0275elementEnd())}function cm(o,n){if(1&o&&e.\u0275\u0275element(0,"cd-table-actions",24),2&o){const t=e.\u0275\u0275nextContext();e.\u0275\u0275property("permission",t.permissions.rgw)("btnColor","light")("selection",t.selection)("tableActions",t.migrateTableAction)}}function dm(o,n){if(1&o&&e.\u0275\u0275element(0,"cd-table-actions",25),2&o){const t=e.\u0275\u0275nextContext();e.\u0275\u0275property("permission",t.permissions.rgw)("selection",t.selection)("tableActions",t.createTableActions)("primaryDropDown",!0)}}function um(o,n){if(1&o&&e.\u0275\u0275element(0,"i",26),2&o){const t=e.\u0275\u0275nextContext();e.\u0275\u0275property("ngClass",e.\u0275\u0275pureFunction3(1,_m,t.icons.large,t.icons.spinner,t.icons.spin))}}function pm(o,n){1&o&&e.\u0275\u0275elementContainer(0)}function mm(o,n){if(1&o&&(e.\u0275\u0275elementContainerStart(0),e.\u0275\u0275template(1,pm,1,0,"ng-container",29),e.\u0275\u0275elementContainerEnd()),2&o){const t=n.$implicit,_=e.\u0275\u0275nextContext(2).depth;e.\u0275\u0275nextContext();const i=e.\u0275\u0275reference(18);e.\u0275\u0275advance(),e.\u0275\u0275property("ngTemplateOutlet",i)("ngTemplateOutletContext",e.\u0275\u0275pureFunction2(2,im,t,_+1))}}function Tm(o,n){if(1&o&&(e.\u0275\u0275elementContainerStart(0),e.\u0275\u0275template(1,mm,2,5,"ng-container",18),e.\u0275\u0275elementContainerEnd()),2&o){const t=e.\u0275\u0275nextContext().node;e.\u0275\u0275advance(),e.\u0275\u0275property("ngForOf",t.children)}}function gm(o,n){if(1&o&&(e.\u0275\u0275elementStart(0,"cds-tree-node",27),e.\u0275\u0275template(1,Tm,2,1,"ng-container",28),e.\u0275\u0275elementEnd()),2&o){const t=n.node,_=n.depth;e.\u0275\u0275property("node",t)("depth",_),e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf",(null==t?null:t.children)&&(null==t||null==t.children?null:t.children.length))}}function Em(o,n){if(1&o&&(e.\u0275\u0275elementStart(0,"span"),e.\u0275\u0275namespaceSVG(),e.\u0275\u0275element(1,"svg",40),e.\u0275\u0275elementEnd()),2&o){const t=e.\u0275\u0275nextContext(2).$implicit,_=e.\u0275\u0275nextContext();e.\u0275\u0275advance(),e.\u0275\u0275property("cdsIcon",_.icons.danger)("size",_.icons.size16)("title",null==t||null==t.data?null:t.data.warning_message)}}function Rm(o,n){if(1&o&&(e.\u0275\u0275namespaceSVG(),e.\u0275\u0275element(0,"svg",41)),2&o){const t=e.\u0275\u0275nextContext(3);e.\u0275\u0275property("cdsIcon",t.icons.reweight)("size",t.icons.size20)}}function Cm(o,n){if(1&o&&(e.\u0275\u0275namespaceSVG(),e.\u0275\u0275element(0,"svg",41)),2&o){const t=e.\u0275\u0275nextContext(3);e.\u0275\u0275property("cdsIcon",t.icons.deploy)("size",t.icons.size20)}}function fm(o,n){if(1&o&&(e.\u0275\u0275namespaceSVG(),e.\u0275\u0275element(0,"svg",41)),2&o){const t=e.\u0275\u0275nextContext(3);e.\u0275\u0275property("cdsIcon",t.icons.parentChild)("size",t.icons.size20)}}function Sm(o,n){if(1&o&&(e.\u0275\u0275elementStart(0,"span",38),e.\u0275\u0275template(1,Em,2,3,"span",28)(2,Rm,1,2,"svg",39)(3,Cm,1,2,"svg",39)(4,fm,1,2,"svg",39),e.\u0275\u0275text(5),e.\u0275\u0275elementEnd()),2&o){const t=e.\u0275\u0275nextContext().$implicit;e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf",null==t||null==t.data?null:t.data.show_warning),e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf","scales"===(null==t||null==t.data?null:t.data.icon)),e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf","cube"===(null==t||null==t.data?null:t.data.icon)),e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf","fa fa-cubes"===(null==t||null==t.data?null:t.data.icon)),e.\u0275\u0275advance(),e.\u0275\u0275textInterpolate1(" ",null==t||null==t.data?null:t.data.name," ")}}function Fm(o,n){1&o&&(e.\u0275\u0275elementStart(0,"span",42),e.\u0275\u0275text(1," default "),e.\u0275\u0275elementEnd())}function Mm(o,n){1&o&&(e.\u0275\u0275elementStart(0,"span",43),e.\u0275\u0275text(1," master "),e.\u0275\u0275elementEnd())}function Pm(o,n){1&o&&(e.\u0275\u0275elementStart(0,"span",43),e.\u0275\u0275text(1," secondary-zone "),e.\u0275\u0275elementEnd())}function Im(o,n){if(1&o){const t=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementContainerStart(0),e.\u0275\u0275elementStart(1,"div",35)(2,"button",44),e.\u0275\u0275listener("click",function(){e.\u0275\u0275restoreView(t);const i=e.\u0275\u0275nextContext().$implicit,a=e.\u0275\u0275nextContext();return e.\u0275\u0275resetView(a.delete(i))}),e.\u0275\u0275namespaceSVG(),e.\u0275\u0275element(3,"svg",37),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementContainerEnd()}if(2&o){const t=n.ngIf,_=e.\u0275\u0275nextContext().$implicit,i=e.\u0275\u0275nextContext();e.\u0275\u0275advance(),e.\u0275\u0275property("title",t.deleteTitle),e.\u0275\u0275advance(),e.\u0275\u0275property("disabled",t.isDisabled||(null==_||null==_.data?null:_.data.secondary_zone)),e.\u0275\u0275advance(),e.\u0275\u0275property("cdsIcon",i.icons.destroy)("size",i.icons.size16)}}function Om(o,n){if(1&o){const t=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"div",30)(1,"div"),e.\u0275\u0275template(2,Sm,6,5,"span",31)(3,Fm,2,0,"span",32)(4,Mm,2,0,"span",33)(5,Pm,2,0,"span",33),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(6,"div",34)(7,"div",35)(8,"button",36),e.\u0275\u0275listener("click",function(){const i=e.\u0275\u0275restoreView(t).$implicit,a=e.\u0275\u0275nextContext();return e.\u0275\u0275resetView(a.openModal(i,!0))}),e.\u0275\u0275namespaceSVG(),e.\u0275\u0275element(9,"svg",37),e.\u0275\u0275elementEnd()(),e.\u0275\u0275template(10,Im,4,4,"ng-container",28),e.\u0275\u0275elementEnd()()}if(2&o){const t=n.$implicit,_=e.\u0275\u0275nextContext();e.\u0275\u0275advance(2),e.\u0275\u0275property("ngIf",null==t||null==t.data?null:t.data.name),e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf",null==t||null==t.data?null:t.data.is_default),e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf",null==t||null==t.data?null:t.data.is_master),e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf",null==t||null==t.data?null:t.data.secondary_zone),e.\u0275\u0275advance(),e.\u0275\u0275property("ngStyle",e.\u0275\u0275pureFunction1(10,am,_.activeNodeId===(null==t||null==t.data?null:t.data.id)?"visible":"hidden")),e.\u0275\u0275advance(),e.\u0275\u0275property("title",_.editTitle),e.\u0275\u0275advance(),e.\u0275\u0275property("disabled",_.getDisable()||(null==t||null==t.data?null:t.data.secondary_zone)),e.\u0275\u0275advance(),e.\u0275\u0275property("cdsIcon",_.icons.edit)("size",_.icons.size16),e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf",_.isDeleteDisabled(t))}}function Gm(o,n){1&o&&e.\u0275\u0275elementContainer(0)}function Nm(o,n){if(1&o&&(e.\u0275\u0275elementContainerStart(0),e.\u0275\u0275template(1,Gm,1,0,"ng-container",29),e.\u0275\u0275elementContainerEnd()),2&o){const t=n.$implicit;e.\u0275\u0275nextContext();const _=e.\u0275\u0275reference(18);e.\u0275\u0275advance(),e.\u0275\u0275property("ngTemplateOutlet",_)("ngTemplateOutletContext",e.\u0275\u0275pureFunction1(2,rm,t))}}function Am(o,n){if(1&o&&(e.\u0275\u0275elementStart(0,"div",45)(1,"legend"),e.\u0275\u0275text(2),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(3,"div"),e.\u0275\u0275element(4,"cd-table-key-value",46),e.\u0275\u0275elementEnd()()),2&o){const t=e.\u0275\u0275nextContext();e.\u0275\u0275advance(2),e.\u0275\u0275textInterpolate(t.metadataTitle),e.\u0275\u0275advance(2),e.\u0275\u0275property("data",t.metadata)}}class Vn{toNode(n){return n.map(t=>({label:this.labelTpl,labelContext:{data:{...t}},id:t.id,value:{...t},expanded:!0,name:t.name,children:t?.children?this.toNode(t.children):[]}))}set nodes(n){this._nodes=this.toNode(n),this.changeDetectionRef.detectChanges()}get nodes(){return this._nodes}constructor(n,t,_,i,a,r,s,d,u,m,C,O,f,I,R){this.modalService=n,this.timerService=t,this.authStorageService=_,this.actionLabels=i,this.timerServiceVariable=a,this.router=r,this.rgwRealmService=s,this.rgwZonegroupService=d,this.rgwZoneService=u,this.rgwDaemonService=m,this.mgrModuleService=C,this.notificationService=O,this.cdsModalService=f,this.rgwMultisiteService=I,this.changeDetectionRef=R,this.sub=new w.Subscription,this.messages={noDefaultRealm:$localize`Please create a default realm first to enable this feature`,noMasterZone:$localize`Please create a master zone for each zone group to enable this feature`,noRealmExists:$localize`No realm exists`,disableExport:$localize`Please create master zone group and master zone for each of the realms`},this.icons=L.FI,this.selection=new Ge.y,this.loadingIndicator=!0,this._nodes=[],this.realms=[],this.zonegroups=[],this.zones=[],this.realmIds=[],this.zoneIds=[],this.defaultRealmId="",this.defaultZonegroupId="",this.defaultZoneId="",this.multisiteInfo=[],this.defaultsInfo=[],this.showMigrateAndReplicationActions=!1,this.editTitle="Edit",this.deleteTitle="Delete",this.disableExport=!0,this.restartGatewayMessage=!1,this.rgwModuleData=[],this.MODULE_NAME="rgw",this.NAVIGATE_TO="/rgw/multisite",this.permissions=this.authStorageService.getPermissions()}openModal(n,t=!1){const _=t?n?.data?.type:n,a={resource:_,action:t?"edit":"create",info:n,defaultsInfo:this.defaultsInfo,multisiteInfo:this.multisiteInfo};this.bsModalRef="realm"===_?this.cdsModalService.show(wn,a):"zonegroup"===_?this.modalService.show(kn,a,{size:"lg"}):this.modalService.show(Un,a,{size:"lg"})}openMultisiteSetupWizard(){this.bsModalRef=this.cdsModalService.show(qt)}openMigrateModal(){const n={multisiteInfo:this.multisiteInfo};this.bsModalRef=this.modalService.show(yn,n,{size:"lg"})}openImportModal(){const n={multisiteInfo:this.multisiteInfo};this.bsModalRef=this.modalService.show(xn,n,{size:"lg"})}openExportModal(){const n={defaultsInfo:this.defaultsInfo,multisiteInfo:this.multisiteInfo};this.bsModalRef=this.modalService.show(Wn,n,{size:"lg"})}getDisableExport(){return this.realms.forEach(n=>{this.zonegroups.forEach(t=>{n.id===t.realm_id&&t.is_master&&""!==t.master_zone&&(this.disableExport=!1)})}),!this.rgwModuleStatus||(this.realms.length<1?this.messages.noRealmExists:!!this.disableExport&&this.messages.disableExport)}getDisableImport(){return!this.rgwModuleStatus}ngOnInit(){this.createTableActions=[{permission:"create",icon:L.FI.add,name:this.actionLabels.CREATE+" Realm",click:()=>this.openModal("realm")},{permission:"create",icon:L.FI.add,name:this.actionLabels.CREATE+" Zone Group",click:()=>this.openModal("zonegroup"),disable:()=>this.getDisable()},{permission:"create",icon:L.FI.add,name:this.actionLabels.CREATE+" Zone",click:()=>this.openModal("zone")}],this.migrateTableAction=[{permission:"create",icon:L.FI.wrench,name:this.actionLabels.MIGRATE,click:()=>this.openMigrateModal()}],this.importAction=[{permission:"create",icon:L.FI.download,name:this.actionLabels.IMPORT,click:()=>this.openImportModal(),disable:()=>this.getDisableImport()}],this.exportAction=[{permission:"create",icon:L.FI.upload,name:this.actionLabels.EXPORT,click:()=>this.openExportModal(),disable:()=>this.getDisableExport()}],this.multisiteReplicationActions=[{permission:"create",icon:L.FI.wrench,name:this.actionLabels.SETUP_MULTISITE_REPLICATION,click:()=>this.router.navigate(["rgw/multisite/configuration",{outlets:{modal:"setup-multisite-replication"}}])}],this.startPollingMultisiteInfo(),this.mgrModuleService.updateCompleted$.subscribe(()=>{this.startPollingMultisiteInfo(),this.getRgwModuleStatus()}),this.permissions.configOpt.read&&this.getRgwModuleStatus()}startPollingMultisiteInfo(){const n=[this.rgwRealmService.getAllRealmsInfo(),this.rgwZonegroupService.getAllZonegroupsInfo(),this.rgwZoneService.getAllZonesInfo()];this.sub&&this.sub.unsubscribe(),this.sub=this.timerService.get(()=>(0,w.forkJoin)(n),2*this.timerServiceVariable.TIMER_SERVICE_PERIOD).subscribe(t=>{this.multisiteInfo=t,this.loadingIndicator=!1,this.nodes=this.abstractTreeData(t)},t=>{})}ngOnDestroy(){this.sub.unsubscribe()}getRgwModuleStatus(){this.rgwMultisiteService.getRgwModuleStatus().subscribe(n=>{this.rgwModuleStatus=n})}abstractTreeData(n){let t=[],_={},i={},a=[],r={},s=[];if(this.realms=n[0].realms,this.zonegroups=n[1].zonegroups,this.zones=n[2].zones,this.defaultRealmId=n[0].default_realm,this.defaultZonegroupId=n[1].default_zonegroup,this.defaultZoneId=n[2].default_zone,this.defaultsInfo=this.getDefaultsEntities(this.defaultRealmId,this.defaultZonegroupId,this.defaultZoneId),this.realms.length>0)for(const d of this.realms){const u=this.rgwRealmService.getRealmTree(d,this.defaultRealmId);_=u.nodes,this.realmIds=this.realmIds.concat(u.realmIds);for(const m of this.zonegroups)if(m.realm_id===d.id){i=this.rgwZonegroupService.getZonegroupTree(m,this.defaultZonegroupId,d);for(const C of m.zones){const O=this.rgwZoneService.getZoneTree(C,this.defaultZoneId,this.zones,m,d);r=O.nodes,this.zoneIds=this.zoneIds.concat(O.zoneIds),s.push(r),r={}}s=s.map(C=>({...C,parentNode:i})),i.children=s,s=[],a.push(i),i={}}a=a.map(m=>({...m,parentNode:_})),_.children=a,t.push({..._,label:_?.name||_?.id}),i={},r={},_={},a=[],s=[]}if(this.zonegroups.length>0)for(const d of this.zonegroups)if(!this.realmIds.includes(d.realm_id)){_=this.rgwZonegroupService.getZonegroupTree(d,this.defaultZonegroupId);for(const u of d.zones){const m=this.rgwZoneService.getZoneTree(u,this.defaultZoneId,this.zones,d);i=m.nodes,this.zoneIds=this.zoneIds.concat(m.zoneIds),a.push(i),i={}}a=a.map(u=>({...u,parentNode:_})),_.children=a,t.push({..._,label:_?.name||_?.id}),i={},_={},a=[]}if(this.zones.length>0)for(const d of this.zones)this.zoneIds.length>0&&!this.zoneIds.includes(d.id)&&(_=this.rgwZoneService.getZoneTree(d,this.defaultZoneId,this.zones).nodes,t.push({..._,label:_?.name||_?.id}),_={});return this.realms.length<1&&this.zonegroups.length<1&&this.zones.length<1?[{name:"No nodes!",label:"No nodes!"}]:(this.realmIds=[],this.zoneIds=[],this.evaluateMigrateAndReplicationActions(),this.rgwMultisiteService.restartGatewayMessage$.subscribe(d=>{null!==d?this.restartGatewayMessage=d:this.checkRestartGatewayMessage()}),t)}checkRestartGatewayMessage(){this.rgwDaemonService.list().subscribe(n=>{const t=n.map(_=>_.realm_name);""!==this.defaultRealmId&&""!==this.defaultZonegroupId&&""!==this.defaultZoneId&&t.includes("")?this.restartGatewayMessage=!0:this.restartGatewayMessage=!1})}getDefaultsEntities(n,t,_){const i=this.realms?.find(s=>s.id===n),a=this.zonegroups?.find(s=>s.id===t),r=this.zones?.find(s=>s.id===_);return{defaultRealmName:i?.name,defaultZonegroupName:a?.name,defaultZoneName:r?.name}}onNodeSelected(n){this.metadataTitle=n?.value?.name,this.metadata=n?.value?.info,this.activeNodeId=n?.value?.id,n.expanded=!0}getDisable(){let n=!0;return""===this.defaultRealmId?this.messages.noDefaultRealm:(this.zonegroups.forEach(t=>{N().isEmpty(t.master_zone)&&(n=!1)}),n?(setTimeout(()=>{this.editTitle="Edit"},1),!1):(setTimeout(()=>{this.editTitle="Please create a master zone for each existing zonegroup to enable this feature"},1),this.messages.noMasterZone))}evaluateMigrateAndReplicationActions(){return 0===this.realms.length&&1===this.zonegroups.length&&"default"===this.zonegroups[0].name&&1===this.zones.length&&"default"===this.zones[0].name?this.showMigrateAndReplicationActions=!0:this.showMigrateAndReplicationActions=!1,this.showMigrateAndReplicationActions}isDeleteDisabled(n){let t=!1,_=this.deleteTitle,i=0;if("realm"===n?.value?.type&&n?.data?.is_default&&this.realms.length<2&&(t=!0),"zonegroup"===n?.data?.type)if(this.zonegroups.length<2)_="You can not delete the only zonegroup available",t=!0;else if(n?.data?.is_default)_="You can not delete the default zonegroup",t=!0;else if(n?.data?.is_master){for(let a of this.zonegroups)if(!0===a.is_master&&(i++,i>1))break;i<2&&(_="You can not delete the only master zonegroup available",t=!0)}return"zone"===n?.data?.type&&(this.zones.length<2?(_="You can not delete the only zone available",t=!0):n?.data?.is_default?(_="You can not delete the default zone",t=!0):n?.data?.is_master&&n?.data?.zone_zonegroup.zones.length<2&&(_="You can not delete the master zone as there are no more zones in this zonegroup",t=!0)),t||(this.deleteTitle="Delete"),{isDisabled:t,deleteTitle:_}}delete(n){if("realm"===n?.data?.type){const t=this.cdsModalService.show(Ue.D,{itemDescription:$localize`${n?.data?.type} ${n?.data?.name}`,itemNames:[`${n?.data?.name}`],submitAction:()=>{this.rgwRealmService.delete(n?.data?.name).subscribe(()=>{this.notificationService.show(x._.success,$localize`Realm: '${n?.data?.name}' deleted successfully`),this.cdsModalService.dismissAll()},()=>{this.cdsModalService.stopLoadingSpinner(t.deletionForm)})}})}else"zonegroup"===n?.data?.type?this.modalRef=this.modalService.show(Dn,{zonegroup:n.data}):"zone"===n?.data?.type&&(this.modalRef=this.modalService.show($n,{zone:n.data}))}enableRgwModule(){this.mgrModuleService.updateModuleState(this.MODULE_NAME,!1,null,this.NAVIGATE_TO,"Enabled RGW Module",!0)}static{this.\u0275fac=function(t){return new(t||Vn)(e.\u0275\u0275directiveInject(Vt.B),e.\u0275\u0275directiveInject(Gd.H),e.\u0275\u0275directiveInject(be.v),e.\u0275\u0275directiveInject(M.Ss),e.\u0275\u0275directiveInject(M.YV),e.\u0275\u0275directiveInject(Y.Router),e.\u0275\u0275directiveInject(It.$),e.\u0275\u0275directiveInject(ke.Z),e.\u0275\u0275directiveInject(At.w),e.\u0275\u0275directiveInject(ye.y),e.\u0275\u0275directiveInject(t_.a),e.\u0275\u0275directiveInject(te.J),e.\u0275\u0275directiveInject(he.V),e.\u0275\u0275directiveInject(xe.A),e.\u0275\u0275directiveInject(e.ChangeDetectorRef))}}static{this.\u0275cmp=e.\u0275\u0275defineComponent({type:Vn,selectors:[["cd-rgw-multisite-details"]],viewQuery:function(t,_){if(1&t&&(e.\u0275\u0275viewQuery(om,5),e.\u0275\u0275viewQuery(Qt,5)),2&t){let i;e.\u0275\u0275queryRefresh(i=e.\u0275\u0275loadQuery())&&(_.labelTpl=i.first),e.\u0275\u0275queryRefresh(i=e.\u0275\u0275loadQuery())&&(_.syncPolicyComp=i.first)}},decls:24,vars:19,consts:()=>{let n,t,_;return n=$localize`:␟ef06d1e01aa048e08f0c5ca4526b9ff9c1edfe43␟1584046046343790730:Topology Viewer`,t=$localize`:␟72348b25c0c118d1207c6c9a7d5a78d54e5a5d76␟7350081182116802960: In order to access the import/export feature, the rgw module must be enabled. `,_=$localize`:␟e51b892e44b0ad1e37261b9f889ecf7fd4e7e0e8␟6489063630109887840:Please restart all Ceph Object Gateway instances in all zones to ensure consistent multisite configuration updates. ${"\ufffd#2\ufffd"}:START_LINK: Cluster->Services${"\ufffd/#2\ufffd"}:CLOSE_LINK:`,[["tree",""],["nodeTemplateRef",""],["treeNodeTemplate",""],n,t,_,["type","info","spacingClass","mb-3","class","align-items-center","actionName","Enable",3,"action",4,"ngIf"],["type","warning","spacingClass","mb-3",4,"ngIf"],[1,"btn-group","mb-4","me-2",3,"permission","selection","tableActions"],["class","btn-group mb-4 me-2 secondary",3,"permission","btnColor","selection","tableActions",4,"ngIf"],["class","btn-group mb-4 me-2",3,"permission","selection","tableActions","primaryDropDown",4,"ngIf"],[1,"btn-group","mb-4","me-2",3,"permission","btnColor","selection","tableActions"],[1,"card"],["data-testid","rgw-multisite-details-header",1,"card-header"],[1,"row"],[1,"col-sm-6","col-lg-6","tree-container"],[3,"ngClass",4,"ngIf"],[3,"select","isMultiSelect"],[4,"ngFor","ngForOf"],["class","col-sm-6 col-lg-6 metadata",4,"ngIf"],["name","modal"],["type","info","spacingClass","mb-3","actionName","Enable",1,"align-items-center",3,"action"],["type","warning","spacingClass","mb-3"],["routerLink","/services",1,"text-decoration-underline"],[1,"btn-group","mb-4","me-2","secondary",3,"permission","btnColor","selection","tableActions"],[1,"btn-group","mb-4","me-2",3,"permission","selection","tableActions","primaryDropDown"],[3,"ngClass"],[3,"node","depth"],[4,"ngIf"],[4,"ngTemplateOutlet","ngTemplateOutletContext"],[1,"w-100","d-flex","justify-content-between","align-items-center","pe-1"],["class","me-3",4,"ngIf"],["class","badge badge-success me-2",4,"ngIf"],["class","badge badge-warning me-2",4,"ngIf"],["role","group",1,"btn-group","align-inline-btns",3,"ngStyle"],[3,"title"],["type","button",1,"btn","btn-light","dropdown-toggle-split","ms-1",3,"click","disabled"],[1,"cds-info-color",3,"cdsIcon","size"],[1,"me-3"],[3,"cdsIcon","size",4,"ngIf"],[1,"cds-danger-color",3,"cdsIcon","size","title"],[3,"cdsIcon","size"],[1,"badge","badge-success","me-2"],[1,"badge","badge-warning","me-2"],["type","button",1,"btn","btn-light","ms-1",3,"click","disabled"],[1,"col-sm-6","col-lg-6","metadata"],[3,"data"]]},template:function(t,_){if(1&t){const i=e.\u0275\u0275getCurrentView();e.\u0275\u0275element(0,"cd-rgw-multisite-tabs"),e.\u0275\u0275elementStart(1,"div"),e.\u0275\u0275template(2,lm,2,0,"cd-alert-panel",6)(3,sm,3,0,"cd-alert-panel",7),e.\u0275\u0275element(4,"cd-table-actions",8),e.\u0275\u0275template(5,cm,1,4,"cd-table-actions",9)(6,dm,1,4,"cd-table-actions",10),e.\u0275\u0275element(7,"cd-table-actions",11)(8,"cd-table-actions",11),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(9,"div",12)(10,"div",13),e.\u0275\u0275i18n(11,3),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(12,"div",14)(13,"div",15),e.\u0275\u0275template(14,um,1,5,"i",16),e.\u0275\u0275elementStart(15,"cds-tree-view",17,0),e.\u0275\u0275listener("select",function(r){return e.\u0275\u0275restoreView(i),e.\u0275\u0275resetView(_.onNodeSelected(r))}),e.\u0275\u0275template(17,gm,2,3,"ng-template",null,1,e.\u0275\u0275templateRefExtractor)(19,Om,11,12,"ng-template",null,2,e.\u0275\u0275templateRefExtractor)(21,Nm,2,4,"ng-container",18),e.\u0275\u0275elementEnd()(),e.\u0275\u0275template(22,Am,5,2,"div",19),e.\u0275\u0275elementEnd()(),e.\u0275\u0275element(23,"router-outlet",20)}2&t&&(e.\u0275\u0275advance(2),e.\u0275\u0275property("ngIf",_.permissions.configOpt.create&&!_.rgwModuleStatus),e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf",_.restartGatewayMessage),e.\u0275\u0275advance(),e.\u0275\u0275property("permission",_.permissions.rgw)("selection",_.selection)("tableActions",_.multisiteReplicationActions),e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf",_.showMigrateAndReplicationActions),e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf",!_.showMigrateAndReplicationActions),e.\u0275\u0275advance(),e.\u0275\u0275property("permission",_.permissions.rgw)("btnColor","light")("selection",_.selection)("tableActions",_.importAction),e.\u0275\u0275advance(),e.\u0275\u0275property("permission",_.permissions.rgw)("btnColor","light")("selection",_.selection)("tableActions",_.exportAction),e.\u0275\u0275advance(6),e.\u0275\u0275property("ngIf",_.loadingIndicator),e.\u0275\u0275advance(),e.\u0275\u0275property("isMultiSelect",!1),e.\u0275\u0275advance(6),e.\u0275\u0275property("ngForOf",_.nodes),e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf",_.metadata))},dependencies:[g.NgClass,g.NgForOf,g.NgIf,g.NgTemplateOutlet,g.NgStyle,Ie.m,On.i,$e.j,j.S,Y.RouterOutlet,Y.RouterLink,c.TreeViewComponent,c.TreeNodeComponent,c.IconDirective,Yt],styles:[".tree-container[_ngcontent-%COMP%]{height:calc(100vh - 200px);overflow-y:auto}.align-inline-btns[_ngcontent-%COMP%]{margin-left:5em}.btn[_ngcontent-%COMP%]:disabled{pointer-events:none}  .cds--tree-node__label__details{padding-block:.5rem;width:100%}"],changeDetection:0})}}var bm=T(27289),__=T(9300),vm=T(61065),Lm=T(32380),ym=T(67344),$m=T(29947),Dm=T(78845),Wm=T(11378),xm=T(47830);const wm=(o,n)=>[o,n];class Zn{constructor(){this.icons=L.FI}static{this.\u0275fac=function(t){return new(t||Zn)}}static{this.\u0275cmp=e.\u0275\u0275defineComponent({type:Zn,selectors:[["cd-rgw-sync-primary-zone"]],inputs:{realm:"realm",zonegroup:"zonegroup",zone:"zone"},decls:17,vars:13,consts:[[1,"pb-5"],[1,"cds-icon--size-07",3,"cdsIcon","size"],[1,"badge","badge-info","mt-2"],[1,"cds-icon--size-07",3,"cdsIcon"],[1,"mt-2",3,"ngClass"],[1,"cds-icon--size-07","cds-icon",3,"cdsIcon","size"]],template:function(t,_){1&t&&(e.\u0275\u0275elementStart(0,"ul",0)(1,"li"),e.\u0275\u0275namespaceSVG(),e.\u0275\u0275element(2,"svg",1),e.\u0275\u0275elementEnd(),e.\u0275\u0275namespaceHTML(),e.\u0275\u0275elementStart(3,"li",2),e.\u0275\u0275text(4),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(5,"li"),e.\u0275\u0275namespaceSVG(),e.\u0275\u0275element(6,"svg",3),e.\u0275\u0275elementEnd(),e.\u0275\u0275namespaceHTML(),e.\u0275\u0275elementStart(7,"li"),e.\u0275\u0275element(8,"i",4),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(9,"p",2),e.\u0275\u0275text(10),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(11,"li"),e.\u0275\u0275namespaceSVG(),e.\u0275\u0275element(12,"svg",3),e.\u0275\u0275elementEnd(),e.\u0275\u0275namespaceHTML(),e.\u0275\u0275elementStart(13,"li"),e.\u0275\u0275namespaceSVG(),e.\u0275\u0275element(14,"svg",5),e.\u0275\u0275elementEnd(),e.\u0275\u0275namespaceHTML(),e.\u0275\u0275elementStart(15,"li",2),e.\u0275\u0275text(16),e.\u0275\u0275elementEnd()()),2&t&&(e.\u0275\u0275advance(2),e.\u0275\u0275property("cdsIcon",_.icons.reweight)("size",_.icons.size20),e.\u0275\u0275advance(2),e.\u0275\u0275textInterpolate(_.realm),e.\u0275\u0275advance(2),e.\u0275\u0275property("cdsIcon",_.icons.down),e.\u0275\u0275advance(2),e.\u0275\u0275property("ngClass",e.\u0275\u0275pureFunction2(10,wm,_.icons.large2x,_.icons.cubes)),e.\u0275\u0275advance(2),e.\u0275\u0275textInterpolate(_.zonegroup),e.\u0275\u0275advance(2),e.\u0275\u0275property("cdsIcon",_.icons.down),e.\u0275\u0275advance(2),e.\u0275\u0275property("cdsIcon",_.icons.deploy)("size",_.icons.size20),e.\u0275\u0275advance(2),e.\u0275\u0275textInterpolate(_.zone))},dependencies:[g.NgClass,c.IconDirective],styles:["ul[_ngcontent-%COMP%]{align-items:center;display:flex;flex-direction:column;list-style-type:none}.align-primary-zone[_ngcontent-%COMP%]{padding-left:4em}"]})}}var i_=T(39113);function Um(o,n){1&o&&(e.\u0275\u0275elementStart(0,"span")(1,"ul",11)(2,"li")(3,"b"),e.\u0275\u0275i18n(4,2),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(5,"li"),e.\u0275\u0275text(6,"No Sync"),e.\u0275\u0275elementEnd()()())}function km(o,n){1&o&&(e.\u0275\u0275elementStart(0,"li",21),e.\u0275\u0275i18n(1,6),e.\u0275\u0275elementEnd())}function zm(o,n){if(1&o&&(e.\u0275\u0275elementStart(0,"a",24),e.\u0275\u0275i18n(1,7),e.\u0275\u0275pipe(2,"titlecase"),e.\u0275\u0275elementEnd()),2&o){const t=e.\u0275\u0275nextContext(3);e.\u0275\u0275advance(2),e.\u0275\u0275i18nExp(e.\u0275\u0275pipeBind1(2,1,t.metadataSyncInfo.syncstatus)),e.\u0275\u0275i18nApply(1)}}function Hm(o,n){1&o&&(e.\u0275\u0275elementStart(0,"a",25),e.\u0275\u0275i18n(1,8),e.\u0275\u0275elementEnd())}function Xm(o,n){if(1&o&&e.\u0275\u0275template(0,zm,3,3,"a",22)(1,Hm,2,0,"a",23),2&o){const t=e.\u0275\u0275nextContext(2);e.\u0275\u0275property("ngIf","Not Syncing From Zone"!==t.metadataSyncInfo.syncstatus),e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf","Not Syncing From Zone"===t.metadataSyncInfo.syncstatus)}}function Bm(o,n){if(1&o&&(e.\u0275\u0275elementStart(0,"li"),e.\u0275\u0275namespaceSVG(),e.\u0275\u0275element(1,"svg",26),e.\u0275\u0275namespaceHTML(),e.\u0275\u0275elementStart(2,"a",27),e.\u0275\u0275i18n(3,9),e.\u0275\u0275elementEnd()()),2&o){const t=e.\u0275\u0275nextContext(2);e.\u0275\u0275advance(),e.\u0275\u0275property("cdsIcon",t.icons.danger)("size",t.icons.size16)}}function Vm(o,n){if(1&o&&(e.\u0275\u0275elementStart(0,"span")(1,"b"),e.\u0275\u0275text(2),e.\u0275\u0275pipe(3,"titlecase"),e.\u0275\u0275elementEnd(),e.\u0275\u0275text(4),e.\u0275\u0275pipe(5,"titlecase"),e.\u0275\u0275elementEnd()),2&o){const t=e.\u0275\u0275nextContext(2).$implicit;e.\u0275\u0275advance(2),e.\u0275\u0275textInterpolate(e.\u0275\u0275pipeBind1(3,2,t.split(":")[0])),e.\u0275\u0275advance(2),e.\u0275\u0275textInterpolate1(":",e.\u0275\u0275pipeBind1(5,4,t.split(":")[1])," ")}}function Zm(o,n){if(1&o&&(e.\u0275\u0275elementStart(0,"span")(1,"b"),e.\u0275\u0275text(2),e.\u0275\u0275pipe(3,"titlecase"),e.\u0275\u0275elementEnd()()),2&o){const t=e.\u0275\u0275nextContext(2).$implicit;e.\u0275\u0275advance(2),e.\u0275\u0275textInterpolate(e.\u0275\u0275pipeBind1(3,1,t))}}function Km(o,n){if(1&o&&(e.\u0275\u0275elementStart(0,"span"),e.\u0275\u0275template(1,Vm,6,6,"span",10)(2,Zm,4,3,"span",10),e.\u0275\u0275elementEnd()),2&o){const t=e.\u0275\u0275nextContext().$implicit;e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf",null==t?null:t.includes(":")),e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf",!(null!=t&&t.includes(":")))}}function qm(o,n){if(1&o&&(e.\u0275\u0275elementStart(0,"span"),e.\u0275\u0275text(1),e.\u0275\u0275pipe(2,"titlecase"),e.\u0275\u0275elementEnd()),2&o){const t=e.\u0275\u0275nextContext().$implicit;e.\u0275\u0275advance(),e.\u0275\u0275textInterpolate1(" ",e.\u0275\u0275pipeBind1(2,1,t)," ")}}function jm(o,n){if(1&o&&(e.\u0275\u0275elementStart(0,"li"),e.\u0275\u0275template(1,Km,3,2,"span",10)(2,qm,3,3,"span",10),e.\u0275\u0275elementEnd()),2&o){const t=n.$implicit,_=e.\u0275\u0275nextContext(2);e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf",!(null!=t&&t.includes(_.metadataSyncInfo.syncstatus)||null!=t&&t.includes("failed")||null!=t&&t.includes("error"))),e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf",(null==t?null:t.includes("failed"))||(null==t?null:t.includes("error")))}}function Ym(o,n){if(1&o&&(e.\u0275\u0275elementStart(0,"li",28),e.\u0275\u0275text(1),e.\u0275\u0275pipe(2,"relativeDate"),e.\u0275\u0275elementEnd()),2&o){const t=e.\u0275\u0275nextContext(2);e.\u0275\u0275advance(),e.\u0275\u0275textInterpolate(e.\u0275\u0275pipeBind1(2,1,t.metadataSyncInfo.timestamp))}}function Qm(o,n){if(1&o&&(e.\u0275\u0275elementStart(0,"span")(1,"ul",11),e.\u0275\u0275template(2,km,2,0,"ng-template",null,0,e.\u0275\u0275templateRefExtractor),e.\u0275\u0275elementStart(4,"cds-toggletip",12)(5,"div",13),e.\u0275\u0275template(6,Xm,2,2,"ng-template",null,1,e.\u0275\u0275templateRefExtractor),e.\u0275\u0275elementStart(8,"li")(9,"b"),e.\u0275\u0275i18n(10,3),e.\u0275\u0275elementEnd()(),e.\u0275\u0275template(11,Bm,4,2,"li",14),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(12,"div",15)(13,"div",16)(14,"ul",17)(15,"li")(16,"h5")(17,"b"),e.\u0275\u0275i18n(18,4),e.\u0275\u0275elementEnd()()(),e.\u0275\u0275template(19,jm,3,2,"li",18),e.\u0275\u0275elementEnd()()()(),e.\u0275\u0275elementStart(20,"li",19),e.\u0275\u0275i18n(21,5),e.\u0275\u0275elementEnd(),e.\u0275\u0275template(22,Ym,3,3,"li",20),e.\u0275\u0275elementEnd()()),2&o){const t=e.\u0275\u0275reference(3),_=e.\u0275\u0275reference(7),i=e.\u0275\u0275nextContext();e.\u0275\u0275advance(4),e.\u0275\u0275property("dropShadow",!0)("align",i.align),e.\u0275\u0275advance(7),e.\u0275\u0275property("ngIf",(null==i.metadataSyncInfo.syncstatus?null:i.metadataSyncInfo.syncstatus.includes("failed"))||(null==i.metadataSyncInfo.syncstatus?null:i.metadataSyncInfo.syncstatus.includes("error")))("ngIfElse",_),e.\u0275\u0275advance(8),e.\u0275\u0275property("ngForOf",i.metadataSyncInfo.fullSyncStatus),e.\u0275\u0275advance(3),e.\u0275\u0275property("ngIf",i.metadataSyncInfo.timestamp)("ngIfElse",t)}}class Kn{constructor(){this.icons=L.FI,this.align="top",this.metadataSyncInfo={}}static{this.\u0275fac=function(t){return new(t||Kn)}}static{this.\u0275cmp=e.\u0275\u0275defineComponent({type:Kn,selectors:[["cd-rgw-sync-metadata-info"]],inputs:{metadataSyncInfo:"metadataSyncInfo"},decls:2,vars:2,consts:()=>{let n,t,_,i,a,r,s,d;return n=$localize`:␟0d7f143bdf134cf8a34c7ca43ea3b6afc64644c7␟8766543515727166681:Status:`,t=$localize`:␟0d7f143bdf134cf8a34c7ca43ea3b6afc64644c7␟8766543515727166681:Status:`,_=$localize`:␟aef23f3d7f645ed1693ebf49e6cb30fcc7f8bd08␟101536111188194704:Metadata Sync Status:`,i=$localize`:␟718c85d03984d14669edbfc224852613bbb76e20␟6134227930683590052: Last Synced: `,a=$localize`:␟963270ac52896f4a902fcf4a9b10c20c0e83cc9f␟6669988835965467563:Up to Date`,r=$localize`:␟8080faae9d725eedffda011365858cf13cb5d1c9␟6182015949893936527:${"\ufffd0\ufffd"}:INTERPOLATION:`,s=$localize`:␟1dc4c84fe71e91165868c42fa95e618a6f0dbf30␟744492666236509015:Not Syncing`,d=$localize`:␟6080b77234e92ad41bb52653b239c4c4f851317d␟1519954996184640001:Error`,[["upToDateTpl",""],["showMetadataStatus",""],n,t,_,i,a,r,s,d,[4,"ngIf"],[1,"me-2"],[3,"dropShadow","align"],["cdsToggletipButton","",1,"toggleTipBtn"],[4,"ngIf","ngIfElse"],["cdsToggletipContent",""],[1,"cds--popover-scroll-container"],[1,"text-center"],[4,"ngFor","ngForOf"],[1,"mt-4","fw-bold"],["class","badge badge-info",4,"ngIf","ngIfElse"],[1,"badge","badge-success"],["class","lead text-primary","popoverClass","rgw-overview-card-popover",4,"ngIf"],["class","lead text-primary",4,"ngIf"],["popoverClass","rgw-overview-card-popover",1,"lead","text-primary"],[1,"lead","text-primary"],[1,"cds-danger-color",3,"cdsIcon","size"],[1,"lead","text-danger"],[1,"badge","badge-info"]]},template:function(t,_){1&t&&e.\u0275\u0275template(0,Um,7,0,"span",10)(1,Qm,23,7,"span",10),2&t&&(e.\u0275\u0275property("ngIf","no sync (zone is master)"===_.metadataSyncInfo),e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf","no sync (zone is master)"!==_.metadataSyncInfo))},dependencies:[g.NgForOf,g.NgIf,c.IconDirective,c.Toggletip,c.ToggletipButton,c.ToggletipContent,g.TitleCasePipe,i_.D],styles:["ul[_ngcontent-%COMP%]{align-items:center;display:flex;flex-direction:column;list-style-type:none}.toggleTipBtn[_ngcontent-%COMP%]{flex-direction:column}"]})}}function Jm(o,n){1&o&&(e.\u0275\u0275elementStart(0,"li",18),e.\u0275\u0275i18n(1,4),e.\u0275\u0275elementEnd())}function eT(o,n){if(1&o&&(e.\u0275\u0275elementStart(0,"a",20),e.\u0275\u0275i18n(1,5),e.\u0275\u0275pipe(2,"titlecase"),e.\u0275\u0275elementEnd()),2&o){const t=e.\u0275\u0275nextContext(2);e.\u0275\u0275advance(2),e.\u0275\u0275i18nExp(e.\u0275\u0275pipeBind1(2,1,t.zone.syncstatus)),e.\u0275\u0275i18nApply(1)}}function tT(o,n){1&o&&(e.\u0275\u0275elementStart(0,"a",20),e.\u0275\u0275i18n(1,6),e.\u0275\u0275elementEnd())}function nT(o,n){if(1&o&&e.\u0275\u0275template(0,eT,3,3,"a",19)(1,tT,2,0,"a",19),2&o){const t=e.\u0275\u0275nextContext();e.\u0275\u0275property("ngIf","Not Syncing From Zone"!==t.zone.syncstatus),e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf","Not Syncing From Zone"===t.zone.syncstatus)}}function oT(o,n){if(1&o&&(e.\u0275\u0275elementStart(0,"li"),e.\u0275\u0275namespaceSVG(),e.\u0275\u0275element(1,"svg",21),e.\u0275\u0275namespaceHTML(),e.\u0275\u0275elementStart(2,"a",22),e.\u0275\u0275i18n(3,7),e.\u0275\u0275elementEnd()()),2&o){const t=e.\u0275\u0275nextContext();e.\u0275\u0275advance(),e.\u0275\u0275property("cdsIcon",t.icons.danger)("size",t.icons.size16)}}function _T(o,n){if(1&o&&(e.\u0275\u0275elementStart(0,"span")(1,"b"),e.\u0275\u0275text(2),e.\u0275\u0275pipe(3,"titlecase"),e.\u0275\u0275elementEnd(),e.\u0275\u0275text(4),e.\u0275\u0275pipe(5,"titlecase"),e.\u0275\u0275elementEnd()),2&o){const t=e.\u0275\u0275nextContext(2).$implicit;e.\u0275\u0275advance(2),e.\u0275\u0275textInterpolate(e.\u0275\u0275pipeBind1(3,2,t.split(": ")[0])),e.\u0275\u0275advance(2),e.\u0275\u0275textInterpolate1(":",e.\u0275\u0275pipeBind1(5,4,t.split(": ")[1])," ")}}function iT(o,n){if(1&o&&(e.\u0275\u0275elementStart(0,"span")(1,"b"),e.\u0275\u0275text(2),e.\u0275\u0275pipe(3,"titlecase"),e.\u0275\u0275elementEnd()()),2&o){const t=e.\u0275\u0275nextContext(2).$implicit;e.\u0275\u0275advance(2),e.\u0275\u0275textInterpolate(e.\u0275\u0275pipeBind1(3,1,t))}}function aT(o,n){if(1&o&&(e.\u0275\u0275elementStart(0,"span"),e.\u0275\u0275template(1,_T,6,6,"span",23)(2,iT,4,3,"span",23),e.\u0275\u0275elementEnd()),2&o){const t=e.\u0275\u0275nextContext().$implicit;e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf",null==t?null:t.includes(":")),e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf",!(null!=t&&t.includes(":")))}}function rT(o,n){if(1&o&&(e.\u0275\u0275elementStart(0,"span"),e.\u0275\u0275text(1),e.\u0275\u0275pipe(2,"titlecase"),e.\u0275\u0275elementEnd()),2&o){const t=e.\u0275\u0275nextContext().$implicit;e.\u0275\u0275advance(),e.\u0275\u0275textInterpolate1(" ",e.\u0275\u0275pipeBind1(2,1,t)," ")}}function lT(o,n){if(1&o&&(e.\u0275\u0275elementStart(0,"li"),e.\u0275\u0275template(1,aT,3,2,"span",23)(2,rT,3,3,"span",23),e.\u0275\u0275elementEnd()),2&o){const t=n.$implicit,_=e.\u0275\u0275nextContext();e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf",!(null!=t&&t.includes(_.zone.name)||null!=t&&t.includes(_.zone.syncstatus)||null!=t&&t.includes("failed")||null!=t&&t.includes("error"))),e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf",(null==t?null:t.includes("failed"))||(null==t?null:t.includes("error")))}}function sT(o,n){if(1&o&&(e.\u0275\u0275elementStart(0,"li",24),e.\u0275\u0275text(1),e.\u0275\u0275pipe(2,"relativeDate"),e.\u0275\u0275elementEnd()),2&o){const t=e.\u0275\u0275nextContext();e.\u0275\u0275advance(),e.\u0275\u0275textInterpolate(e.\u0275\u0275pipeBind1(2,1,t.zone.timestamp))}}class qn{constructor(){this.icons=L.FI,this.align="top",this.zone={}}static{this.\u0275fac=function(t){return new(t||qn)}}static{this.\u0275cmp=e.\u0275\u0275defineComponent({type:qn,selectors:[["cd-rgw-sync-data-info"]],inputs:{zone:"zone"},decls:22,vars:7,consts:()=>{let n,t,_,i,a,r;return n=$localize`:␟c0c5b6ad300af8a3785a76f94decabbf263e1469␟6891630375127166262:Sync Status:`,t=$localize`:␟5674b3fabc010d741a708e038adba0c3d3048f89␟4085659776776891233: Last Synced: `,_=$localize`:␟963270ac52896f4a902fcf4a9b10c20c0e83cc9f␟6669988835965467563:Up to Date`,i=$localize`:␟68746373e1cb0bd36deb05b302098d0287822564␟7947346882733206158:${"\ufffd0\ufffd"}:INTERPOLATION:`,a=$localize`:␟1dc4c84fe71e91165868c42fa95e618a6f0dbf30␟744492666236509015:Not Syncing`,r=$localize`:␟6080b77234e92ad41bb52653b239c4c4f851317d␟1519954996184640001:Error`,[["upToDateTpl",""],["showStatus",""],n,t,_,i,a,r,[1,"me-2"],[3,"dropShadow","align"],["cdsToggletipButton","",1,"toggleTipBtn"],[4,"ngIf","ngIfElse"],["cdsToggletipContent",""],[1,"cds--popover-scroll-container"],[1,"text-center"],[4,"ngFor","ngForOf"],[1,"mt-4","fw-bold"],["class","badge badge-info",4,"ngIf","ngIfElse"],[1,"badge","badge-success"],["class","lead text-primary",4,"ngIf"],[1,"lead","text-primary"],[1,"cds-danger-color",3,"cdsIcon","size"],[1,"lead","text-danger"],[4,"ngIf"],[1,"badge","badge-info"]]},template:function(t,_){if(1&t&&(e.\u0275\u0275elementStart(0,"ul",8),e.\u0275\u0275template(1,Jm,2,0,"ng-template",null,0,e.\u0275\u0275templateRefExtractor),e.\u0275\u0275elementStart(3,"cds-toggletip",9)(4,"div",10),e.\u0275\u0275template(5,nT,2,2,"ng-template",null,1,e.\u0275\u0275templateRefExtractor),e.\u0275\u0275elementStart(7,"li")(8,"b"),e.\u0275\u0275text(9,"Status:"),e.\u0275\u0275elementEnd()(),e.\u0275\u0275template(10,oT,4,2,"li",11),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(11,"div",12)(12,"div",13)(13,"ul",14)(14,"li")(15,"h5")(16,"b"),e.\u0275\u0275i18n(17,2),e.\u0275\u0275elementEnd()()(),e.\u0275\u0275template(18,lT,3,2,"li",15),e.\u0275\u0275elementEnd()()()(),e.\u0275\u0275elementStart(19,"li",16),e.\u0275\u0275i18n(20,3),e.\u0275\u0275elementEnd(),e.\u0275\u0275template(21,sT,3,3,"li",17),e.\u0275\u0275elementEnd()),2&t){const i=e.\u0275\u0275reference(2),a=e.\u0275\u0275reference(6);e.\u0275\u0275advance(3),e.\u0275\u0275property("dropShadow",!0)("align",_.align),e.\u0275\u0275advance(7),e.\u0275\u0275property("ngIf",(null==_.zone.syncstatus?null:_.zone.syncstatus.includes("failed"))||(null==_.zone.syncstatus?null:_.zone.syncstatus.includes("error")))("ngIfElse",a),e.\u0275\u0275advance(8),e.\u0275\u0275property("ngForOf",_.zone.fullSyncStatus),e.\u0275\u0275advance(3),e.\u0275\u0275property("ngIf",_.zone.timestamp)("ngIfElse",i)}},dependencies:[g.NgForOf,g.NgIf,c.IconDirective,c.Toggletip,c.ToggletipButton,c.ToggletipContent,g.TitleCasePipe,i_.D],styles:["ul[_ngcontent-%COMP%]{align-items:center;display:flex;flex-direction:column;list-style-type:none}.toggleTipBtn[_ngcontent-%COMP%]{flex-direction:column;text-align:center}"]})}}const cT=()=>["Requests/sec"],dT=o=>[o],a_=()=>["GET","PUT"],r_=(o,n)=>[o,n],Po=(o,n,t)=>[o,n,t],uT=o=>({"border-left":o});function pT(o,n){if(1&o&&e.\u0275\u0275element(0,"cd-card-row",26),2&o){const t=e.\u0275\u0275nextContext();e.\u0275\u0275property("data",t.rgwDaemonCount)}}function mT(o,n){if(1&o&&e.\u0275\u0275element(0,"cd-card-row",27),2&o){const t=e.\u0275\u0275nextContext();e.\u0275\u0275property("data",t.rgwRealmCount)}}function TT(o,n){if(1&o&&e.\u0275\u0275element(0,"cd-card-row",28),2&o){const t=e.\u0275\u0275nextContext();e.\u0275\u0275property("data",t.rgwZonegroupCount)}}function gT(o,n){if(1&o&&e.\u0275\u0275element(0,"cd-card-row",29),2&o){const t=e.\u0275\u0275nextContext();e.\u0275\u0275property("data",t.rgwZoneCount)}}function ET(o,n){if(1&o&&e.\u0275\u0275element(0,"cd-card-row",30),2&o){const t=e.\u0275\u0275nextContext();e.\u0275\u0275property("data",t.rgwBucketCount)}}function RT(o,n){if(1&o&&e.\u0275\u0275element(0,"cd-card-row",31),2&o){const t=e.\u0275\u0275nextContext();e.\u0275\u0275property("data",t.UserCount)}}function CT(o,n){if(1&o&&e.\u0275\u0275element(0,"cd-card-row",32),2&o){const t=e.\u0275\u0275nextContext();e.\u0275\u0275property("data",t.objectCount)}}function fT(o,n){1&o&&(e.\u0275\u0275elementStart(0,"span",33)(1,"cd-alert-panel",34),e.\u0275\u0275i18nStart(2,1),e.\u0275\u0275element(3,"cd-doc",35),e.\u0275\u0275i18nEnd(),e.\u0275\u0275elementEnd()())}function ST(o,n){if(1&o&&(e.\u0275\u0275elementStart(0,"span",36),e.\u0275\u0275element(1,"i",37),e.\u0275\u0275elementEnd()),2&o){const t=e.\u0275\u0275nextContext();e.\u0275\u0275advance(),e.\u0275\u0275property("ngClass",e.\u0275\u0275pureFunction3(1,Po,t.icons.large3x,t.icons.spinner,t.icons.spin))}}function FT(o,n){if(1&o&&(e.\u0275\u0275elementStart(0,"span",36),e.\u0275\u0275element(1,"i",37),e.\u0275\u0275elementEnd()),2&o){const t=e.\u0275\u0275nextContext(3);e.\u0275\u0275advance(),e.\u0275\u0275property("ngClass",e.\u0275\u0275pureFunction3(1,Po,t.icons.large3x,t.icons.spinner,t.icons.spin))}}function MT(o,n){if(1&o&&(e.\u0275\u0275elementStart(0,"span",36),e.\u0275\u0275element(1,"cd-rgw-sync-primary-zone",43),e.\u0275\u0275elementEnd()),2&o){const t=e.\u0275\u0275nextContext(3);e.\u0275\u0275advance(),e.\u0275\u0275property("realm",t.realm)("zonegroup",t.zonegroup)("zone",t.zone)}}function PT(o,n){if(1&o&&(e.\u0275\u0275elementStart(0,"span",36),e.\u0275\u0275element(1,"i",37),e.\u0275\u0275elementEnd()),2&o){const t=e.\u0275\u0275nextContext(3);e.\u0275\u0275advance(),e.\u0275\u0275property("ngClass",e.\u0275\u0275pureFunction3(1,Po,t.icons.large3x,t.icons.spinner,t.icons.spin))}}function IT(o,n){if(1&o&&(e.\u0275\u0275elementStart(0,"span",51),e.\u0275\u0275element(1,"cd-rgw-sync-metadata-info",52),e.\u0275\u0275elementEnd()),2&o){const t=e.\u0275\u0275nextContext(6);e.\u0275\u0275advance(),e.\u0275\u0275property("metadataSyncInfo",t.metadataSyncInfo)}}function OT(o,n){if(1&o&&(e.\u0275\u0275elementStart(0,"span",53),e.\u0275\u0275element(1,"cd-rgw-sync-data-info",54),e.\u0275\u0275elementEnd()),2&o){const t=e.\u0275\u0275nextContext(2).$implicit;e.\u0275\u0275advance(),e.\u0275\u0275property("zone",t)}}function GT(o,n){if(1&o&&(e.\u0275\u0275elementStart(0,"cd-card",48),e.\u0275\u0275template(1,IT,2,1,"span",49)(2,OT,2,1,"span",50),e.\u0275\u0275elementEnd()),2&o){const t=n.$implicit;e.\u0275\u0275property("cardTitle",t)("ngClass",e.\u0275\u0275pureFunction1(6,uT,"Data Sync"===t))("alignItemsCenter",!0)("justifyContentCenter",!0),e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf","Metadata Sync"===t),e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf","Data Sync"===t)}}function NT(o,n){if(1&o&&(e.\u0275\u0275elementStart(0,"cd-card",45)(1,"div",46),e.\u0275\u0275template(2,GT,3,8,"cd-card",47),e.\u0275\u0275elementEnd()()),2&o){const t=n.$implicit,_=e.\u0275\u0275nextContext(4);e.\u0275\u0275propertyInterpolate("cardTitle",t.name),e.\u0275\u0275advance(2),e.\u0275\u0275property("ngForOf",_.chartTitles)}}function AT(o,n){if(1&o&&(e.\u0275\u0275elementStart(0,"div",3),e.\u0275\u0275template(1,NT,3,2,"cd-card",44),e.\u0275\u0275elementEnd()),2&o){const t=e.\u0275\u0275nextContext(3);e.\u0275\u0275advance(),e.\u0275\u0275property("ngForOf",t.replicaZonesInfo)("ngForTrackBy",t.trackByFn)}}function hT(o,n){if(1&o&&(e.\u0275\u0275elementStart(0,"div",39)(1,"cd-card",40),e.\u0275\u0275template(2,FT,2,5,"span",24)(3,MT,2,3,"span",24),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(4,"div",41)(5,"cd-card",42),e.\u0275\u0275template(6,PT,2,5,"span",24)(7,AT,2,2,"div",25),e.\u0275\u0275elementEnd()()()),2&o){const t=e.\u0275\u0275nextContext(2);e.\u0275\u0275advance(),e.\u0275\u0275property("alignItemsCenter",!0)("justifyContentCenter",!0),e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf",t.loading),e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf",!t.loading),e.\u0275\u0275advance(3),e.\u0275\u0275property("ngIf",t.loading),e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf",!t.loading)}}function bT(o,n){if(1&o&&(e.\u0275\u0275elementStart(0,"div",3),e.\u0275\u0275template(1,hT,8,6,"div",38),e.\u0275\u0275elementEnd()),2&o){const t=e.\u0275\u0275nextContext(),_=e.\u0275\u0275reference(30);e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf",t.showMultisiteCard)("ngIfElse",_)}}class jn{constructor(n,t,_,i,a,r,s,d,u,m){this.authStorageService=n,this.refreshIntervalService=t,this.rgwDaemonService=_,this.rgwRealmService=i,this.rgwZonegroupService=a,this.rgwZoneService=r,this.rgwBucketService=s,this.prometheusService=d,this.rgwMultisiteService=u,this.notificationService=m,this.icons=L.FI,this.interval=new w.Subscription,this.rgwDaemonCount=0,this.rgwRealmCount=0,this.rgwZonegroupCount=0,this.rgwZoneCount=0,this.rgwBucketCount=0,this.objectCount=0,this.UserCount=0,this.totalPoolUsedBytes=0,this.averageObjectSize=0,this.multisiteInfo=[],this.queriesResults={RGW_REQUEST_PER_SECOND:[],BANDWIDTH:[],AVG_GET_LATENCY:[],AVG_PUT_LATENCY:[]},this.chartTitles=["Metadata Sync","Data Sync"],this.replicaZonesInfo=[],this.showMultisiteCard=!0,this.loading=!0,this.subject=new w.ReplaySubject,this.permissions=this.authStorageService.getPermissions()}ngOnInit(){this.interval=this.refreshIntervalService.intervalData$.subscribe(()=>{this.fetchDataSub=(0,w.combineLatest)([this.rgwDaemonService.list(),this.rgwBucketService.fetchAndTransformBuckets(),this.rgwBucketService.totalNumObjects$,this.rgwBucketService.totalUsedCapacity$,this.rgwBucketService.averageObjectSize$,this.rgwBucketService.getTotalBucketsAndUsersLength()]).subscribe(([n,t,_,i,a,r])=>{this.rgwDaemonCount=n.length,this.objectCount=_,this.totalPoolUsedBytes=i,this.averageObjectSize=a,this.rgwBucketCount=r.buckets_count,this.UserCount=r.users_count}),this.getSyncStatus()}),this.realmSub=this.rgwRealmService.list().subscribe(n=>{this.rgwRealmCount=n.realms.length||0}),this.ZonegroupSub=this.rgwZonegroupService.list().subscribe(n=>{this.rgwZonegroupCount=n.zonegroups.length}),this.ZoneSUb=this.rgwZoneService.list().subscribe(n=>{this.rgwZoneCount=n.zones.length}),this.getPrometheusData(this.prometheusService.lastHourDateObject),this.multisiteSyncStatus$=this.subject.pipe((0,Z.switchMap)(()=>this.rgwMultisiteService.getSyncStatus().pipe((0,Z.tap)(n=>{this.loading=!1,this.replicaZonesInfo=n.dataSyncInfo,this.metadataSyncInfo=n.metadataSyncInfo,0===this.replicaZonesInfo.length&&(this.showMultisiteCard=!1,this.loading=!1),[this.realm,this.zonegroup,this.zone]=n.primaryZoneData}),(0,Z.catchError)(n=>{n.preventDefault(),this.loading=!1,this.showMultisiteCard=!1;const t=$localize`Unable to fetch sync status`;return this.notificationService.show(x._.error,t,n.error.detail||n.error.message),(0,w.of)(!0)}))),(0,Z.shareReplay)(1))}ngOnDestroy(){this.interval?.unsubscribe(),this.realmSub?.unsubscribe(),this.ZonegroupSub?.unsubscribe(),this.ZoneSUb?.unsubscribe(),this.fetchDataSub?.unsubscribe(),this.prometheusService?.unsubscribe()}getPrometheusData(n){this.queriesResults=this.prometheusService.getRangeQueriesData(n,ym.xg,this.queriesResults,!0)}getSyncStatus(){this.subject.next()}trackByFn(n){return n}static{this.\u0275fac=function(t){return new(t||jn)(e.\u0275\u0275directiveInject(be.v),e.\u0275\u0275directiveInject(vm.s),e.\u0275\u0275directiveInject(ye.y),e.\u0275\u0275directiveInject(It.$),e.\u0275\u0275directiveInject(ke.Z),e.\u0275\u0275directiveInject(At.w),e.\u0275\u0275directiveInject(Le.c),e.\u0275\u0275directiveInject(Lm.o),e.\u0275\u0275directiveInject(xe.A),e.\u0275\u0275directiveInject(te.J))}}static{this.\u0275cmp=e.\u0275\u0275defineComponent({type:jn,selectors:[["cd-rgw-overview-dashboard"]],decls:34,vars:38,consts:()=>{let n;return n=$localize`:␟64c81b0f5ab5108c08b8ded39b0014ea26a65e87␟5389530806465566942: Multi-site needs to be configured in order to see the multi-site sync status. Please consult the ${"\ufffd#3\ufffd"}:START_TAG_CD_DOC:${"\ufffd/#3\ufffd"}:CLOSE_TAG_CD_DOC: on how to configure and enable the multi-site functionality. `,[["notConfigured",""],n,[1,"container-fluid"],[1,"row"],["cardTitle","Inventory","aria-label","Inventory card",1,"col-sm-3","px-3","d-flex"],["link","/rgw/daemon","title","Gateway","summaryType","simplified",3,"data",4,"ngIf"],["link","/rgw/multisite","title","Realm","summaryType","simplified",3,"data",4,"ngIf"],["link","/rgw/multisite","title","Zone Group","summaryType","simplified",3,"data",4,"ngIf"],["link","/rgw/multisite","title","Zone","summaryType","simplified",3,"data",4,"ngIf"],["link","/rgw/bucket","title","Bucket","summaryType","simplified",3,"data",4,"ngIf"],["link","/rgw/user","title","User","summaryType","simplified",3,"data",4,"ngIf"],["title","Object","summaryType","simplified",3,"data",4,"ngIf"],["cardTitle","Performance Statistics","ria-label","Performance Statistics card",1,"col-sm-6","d-flex"],[1,"ms-4","me-4","mt-0"],[3,"selectedTime"],["chartTitle","Requests/sec","dataUnits","",3,"labelsArray","dataArray"],["chartTitle","Latency","dataUnits","ms","decimals","2",3,"labelsArray","dataArray"],["chartTitle","Bandwidth","dataUnits","B",3,"labelsArray","dataArray"],[1,"col-lg-3"],["cardTitle","Used Capacity","aria-label","Used Capacity",1,"col-sm-2","d-flex","w-100","h-50","pb-3",3,"alignItemsCenter","justifyContentCenter"],[1,"ms-4","me-4","text-center"],["cardTitle","Average Object Size","aria-label","Avg Object Size",1,"col-sm-2","d-flex","w-100","h-50","pt-3",3,"alignItemsCenter","justifyContentCenter"],[1,"row","pt-4","pb-4"],["cardTitle","Multi-Site Sync Status"],["class","d-flex justify-content-center",4,"ngIf"],["class","row",4,"ngIf"],["link","/rgw/daemon","title","Gateway","summaryType","simplified",3,"data"],["link","/rgw/multisite","title","Realm","summaryType","simplified",3,"data"],["link","/rgw/multisite","title","Zone Group","summaryType","simplified",3,"data"],["link","/rgw/multisite","title","Zone","summaryType","simplified",3,"data"],["link","/rgw/bucket","title","Bucket","summaryType","simplified",3,"data"],["link","/rgw/user","title","User","summaryType","simplified",3,"data"],["title","Object","summaryType","simplified",3,"data"],[1,"pe-5","ps-5"],["type","info"],["section","multisite"],[1,"d-flex","justify-content-center"],[3,"ngClass"],["class","row pt-2",4,"ngIf","ngIfElse"],[1,"row","pt-2"],["cardTitle","Primary Source Zone",1,"col-lg-3","d-flex","justify-content-center","align-primary-zone",3,"alignItemsCenter","justifyContentCenter"],[1,"col-lg-9"],["cardTitle","Source Zones",1,"d-flex","h-100"],[3,"realm","zonegroup","zone"],["cardType","zone","shadowClass","true","class","col-sm-9 col-lg-6 align-replica-zones d-flex pt-4","aria-label","Source Zones Card",3,"cardTitle",4,"ngFor","ngForOf","ngForTrackBy"],["cardType","zone","shadowClass","true","aria-label","Source Zones Card",1,"col-sm-9","col-lg-6","align-replica-zones","d-flex","pt-4",3,"cardTitle"],[1,"row","pb-4","ps-3","pe-3"],["cardType","syncCards","removeBorder","true","class","col-sm-9 col-lg-6","aria-label","Charts Card",3,"cardTitle","ngClass","alignItemsCenter","justifyContentCenter",4,"ngFor","ngForOf"],["cardType","syncCards","removeBorder","true","aria-label","Charts Card",1,"col-sm-9","col-lg-6",3,"cardTitle","ngClass","alignItemsCenter","justifyContentCenter"],["class","me-2 text-center",4,"ngIf"],["class","me-2",4,"ngIf"],[1,"me-2","text-center"],[3,"metadataSyncInfo"],[1,"me-2"],[3,"zone"]]},template:function(t,_){if(1&t){const i=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"div",2)(1,"div",3)(2,"cd-card",4),e.\u0275\u0275template(3,pT,1,1,"cd-card-row",5)(4,mT,1,1,"cd-card-row",6)(5,TT,1,1,"cd-card-row",7)(6,gT,1,1,"cd-card-row",8)(7,ET,1,1,"cd-card-row",9)(8,RT,1,1,"cd-card-row",10)(9,CT,1,1,"cd-card-row",11),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(10,"cd-card",12)(11,"div",13)(12,"cd-dashboard-time-selector",14),e.\u0275\u0275listener("selectedTime",function(r){return e.\u0275\u0275restoreView(i),e.\u0275\u0275resetView(_.getPrometheusData(r))}),e.\u0275\u0275elementEnd(),e.\u0275\u0275element(13,"cd-dashboard-area-chart",15)(14,"cd-dashboard-area-chart",16)(15,"cd-dashboard-area-chart",17),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(16,"div",18)(17,"cd-card",19)(18,"span",20)(19,"h1"),e.\u0275\u0275text(20),e.\u0275\u0275pipe(21,"dimlessBinary"),e.\u0275\u0275elementEnd()()(),e.\u0275\u0275elementStart(22,"cd-card",21)(23,"span",20)(24,"h1"),e.\u0275\u0275text(25),e.\u0275\u0275pipe(26,"dimlessBinary"),e.\u0275\u0275elementEnd()()()()(),e.\u0275\u0275elementStart(27,"div",22)(28,"cd-card",23),e.\u0275\u0275template(29,fT,4,0,"ng-template",null,0,e.\u0275\u0275templateRefExtractor)(31,ST,2,5,"span",24)(32,bT,2,2,"div",25),e.\u0275\u0275pipe(33,"async"),e.\u0275\u0275elementEnd()()()}2&t&&(e.\u0275\u0275advance(3),e.\u0275\u0275property("ngIf",null!=_.rgwDaemonCount),e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf",null!=_.rgwRealmCount),e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf",null!=_.rgwZonegroupCount),e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf",null!=_.rgwZoneCount),e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf",null!=_.rgwBucketCount),e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf",null!=_.UserCount),e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf",null!=_.objectCount),e.\u0275\u0275advance(4),e.\u0275\u0275property("labelsArray",e.\u0275\u0275pureFunction0(27,cT))("dataArray",e.\u0275\u0275pureFunction1(28,dT,_.queriesResults.RGW_REQUEST_PER_SECOND)),e.\u0275\u0275advance(),e.\u0275\u0275property("labelsArray",e.\u0275\u0275pureFunction0(30,a_))("dataArray",e.\u0275\u0275pureFunction2(31,r_,_.queriesResults.AVG_GET_LATENCY,_.queriesResults.AVG_PUT_LATENCY)),e.\u0275\u0275advance(),e.\u0275\u0275property("labelsArray",e.\u0275\u0275pureFunction0(34,a_))("dataArray",e.\u0275\u0275pureFunction2(35,r_,_.queriesResults.GET_BANDWIDTH,_.queriesResults.PUT_BANDWIDTH)),e.\u0275\u0275advance(2),e.\u0275\u0275property("alignItemsCenter",!0)("justifyContentCenter",!0),e.\u0275\u0275advance(3),e.\u0275\u0275textInterpolate(e.\u0275\u0275pipeBind1(21,21,_.totalPoolUsedBytes)),e.\u0275\u0275advance(2),e.\u0275\u0275property("alignItemsCenter",!0)("justifyContentCenter",!0),e.\u0275\u0275advance(3),e.\u0275\u0275textInterpolate(e.\u0275\u0275pipeBind1(26,23,_.averageObjectSize)),e.\u0275\u0275advance(6),e.\u0275\u0275property("ngIf",_.loading),e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf",e.\u0275\u0275pipeBind1(33,25,_.multisiteSyncStatus$)))},dependencies:[g.NgClass,g.NgForOf,g.NgIf,Ie.m,Co.C,$m.i,Dm.C,Wm.P,xm.M,Zn,Kn,qn,g.AsyncPipe,xt.l],styles:["hr[_ngcontent-%COMP%]{margin-bottom:2px;margin-top:2px}.list-group-item[_ngcontent-%COMP%]{border:0}.align-replica-zones[_ngcontent-%COMP%]{margin-left:auto;margin-right:auto;padding-left:2em;padding-right:2em}ul[_ngcontent-%COMP%]{align-items:center;display:flex;flex-direction:column;list-style-type:none}.align-primary-zone[_ngcontent-%COMP%]{padding-left:4em}.border-left[_ngcontent-%COMP%]{border-left:1px solid rgba(0,0,0,.1254901961)}"]})}}var vT=T(45518),l_=T(80299);function LT(o,n){1&o&&(e.\u0275\u0275elementStart(0,"span",30),e.\u0275\u0275i18n(1,8),e.\u0275\u0275elementEnd())}function yT(o,n){1&o&&(e.\u0275\u0275elementStart(0,"span",30),e.\u0275\u0275i18n(1,9),e.\u0275\u0275elementEnd())}function $T(o,n){1&o&&(e.\u0275\u0275elementStart(0,"span",30),e.\u0275\u0275i18n(1,10),e.\u0275\u0275elementEnd())}function DT(o,n){if(1&o){const t=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"form",15,0)(2,"div",16)(3,"div",17)(4,"label",18),e.\u0275\u0275i18n(5,2),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(6,"div",19),e.\u0275\u0275element(7,"input",20),e.\u0275\u0275template(8,LT,2,0,"span",21),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(9,"div",17)(10,"label",22),e.\u0275\u0275i18n(11,3),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(12,"div",19)(13,"select",23)(14,"option",24),e.\u0275\u0275i18n(15,4),e.\u0275\u0275pipe(16,"upperFirst"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(17,"option",24),e.\u0275\u0275i18n(18,5),e.\u0275\u0275pipe(19,"upperFirst"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(20,"option",24),e.\u0275\u0275i18n(21,6),e.\u0275\u0275pipe(22,"upperFirst"),e.\u0275\u0275elementEnd()(),e.\u0275\u0275template(23,yT,2,0,"span",21),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(24,"div",17)(25,"label",25),e.\u0275\u0275i18n(26,7),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(27,"div",19),e.\u0275\u0275element(28,"input",26),e.\u0275\u0275template(29,$T,2,0,"span",21),e.\u0275\u0275elementEnd()()(),e.\u0275\u0275elementStart(30,"div",27)(31,"div",28)(32,"cd-form-button-panel",29),e.\u0275\u0275pipe(33,"titlecase"),e.\u0275\u0275pipe(34,"upperFirst"),e.\u0275\u0275listener("submitActionEvent",function(){e.\u0275\u0275restoreView(t);const i=e.\u0275\u0275nextContext();return e.\u0275\u0275resetView(i.submit())}),e.\u0275\u0275elementEnd()()()()}if(2&o){const t=e.\u0275\u0275reference(1),_=e.\u0275\u0275nextContext();e.\u0275\u0275property("formGroup",_.syncPolicyForm),e.\u0275\u0275advance(7),e.\u0275\u0275property("readonly",_.editing),e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf",_.syncPolicyForm.showError("group_id",t,"required")),e.\u0275\u0275advance(6),e.\u0275\u0275propertyInterpolate("value",_.syncPolicyStatus.ENABLED),e.\u0275\u0275advance(2),e.\u0275\u0275i18nExp(e.\u0275\u0275pipeBind1(16,15,_.syncPolicyStatus.ENABLED)),e.\u0275\u0275i18nApply(15),e.\u0275\u0275advance(),e.\u0275\u0275propertyInterpolate("value",_.syncPolicyStatus.ALLOWED),e.\u0275\u0275advance(2),e.\u0275\u0275i18nExp(e.\u0275\u0275pipeBind1(19,17,_.syncPolicyStatus.ALLOWED)),e.\u0275\u0275i18nApply(18),e.\u0275\u0275advance(),e.\u0275\u0275propertyInterpolate("value",_.syncPolicyStatus.FORBIDDEN),e.\u0275\u0275advance(2),e.\u0275\u0275i18nExp(e.\u0275\u0275pipeBind1(22,19,_.syncPolicyStatus.FORBIDDEN)),e.\u0275\u0275i18nApply(21),e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf",_.syncPolicyForm.showError("status",t,"required")),e.\u0275\u0275advance(5),e.\u0275\u0275property("ngbTypeahead",_.bucketDataSource),e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf",_.syncPolicyForm.showError("bucket_name",t,"bucketNameNotAllowed")),e.\u0275\u0275advance(3),e.\u0275\u0275property("form",_.syncPolicyForm)("disabled",_.syncPolicyForm.pending||_.syncPolicyForm.pristine||_.syncPolicyForm.invalid)("submitText",e.\u0275\u0275pipeBind1(33,21,_.action)+" "+e.\u0275\u0275pipeBind1(34,23,_.resource))}}class bt extends tt.g{constructor(n,t,_,i,a,r,s){super(),this.router=n,this.route=t,this.actionLabels=_,this.fb=i,this.rgwMultisiteService=a,this.notificationService=r,this.rgwBucketService=s,this.editing=!1,this.syncPolicyStatus=z._4,this.bucketDataSource=d=>d.pipe((0,Z.debounceTime)(200),(0,Z.distinctUntilChanged)(),(0,Z.mergeMap)(u=>this.getBucketTypeahead(u))),this.editing=this.router.url.includes("(modal:edit"),this.action=this.editing?this.actionLabels.EDIT:this.actionLabels.CREATE,this.resource=$localize`Sync Policy Group`,this.createForm(),this.loadingReady(),this.pageURL="rgw/multisite/sync-policy"}ngOnInit(){this.editing&&this.route.paramMap.subscribe(n=>{const t=n.get("groupName");if(t){const _=n.get("bucketName");this.loadingStart(),this.rgwMultisiteService.getSyncPolicyGroup(t,_).subscribe(i=>{this.loadingReady(),i?(this.syncPolicyForm.get("bucket_name").disable(),this.syncPolicyForm.patchValue({group_id:i.id,status:i.status,bucket_name:_})):this.goToListView()})}})}goToListView(){this.router.navigate([this.pageURL,{outlets:{modal:null},state:{reload:!0}}])}createForm(){this.syncPolicyForm=this.fb.group({group_id:["",l.Validators.required],status:[`${this.syncPolicyStatus.ENABLED}`,l.Validators.required],bucket_name:["",,this.bucketExistence(!0)]})}submit(){this.syncPolicyForm.pristine?this.goToListView():this.syncPolicyForm.pending?this.syncPolicyForm.setErrors({cdSubmitButton:!0}):this.editing?this.rgwMultisiteService.modifySyncPolicyGroup(this.syncPolicyForm.getRawValue()).subscribe(()=>{this.notificationService.show(x._.success,$localize`Modified Sync Policy Group '${this.syncPolicyForm.getValue("group_id")}'`),this.goToListView()},()=>{this.syncPolicyForm.setErrors({cdSubmitButton:!0})}):this.rgwMultisiteService.createSyncPolicyGroup(this.syncPolicyForm.getRawValue()).subscribe(()=>{this.notificationService.show(x._.success,$localize`Created Sync Policy Group '${this.syncPolicyForm.getValue("group_id")}'`),this.goToListView()},()=>{this.syncPolicyForm.setErrors({cdSubmitButton:!0})})}bucketExistence(n){return t=>t.dirty?(0,w.timer)(500).pipe((0,Z.switchMapTo)(this.rgwBucketService.exists(t.value)),(0,Z.map)(_=>_===n?null:{bucketNameNotAllowed:!0})):(0,w.of)(null)}getBucketTypeahead(n){return N().isString(n)&&"/"!==n&&""!==n?this.rgwBucketService.list().pipe((0,Z.map)(t=>t.filter(_=>_.toLowerCase().includes(n)).slice(0,15)),(0,Z.catchError)(()=>(0,w.of)([$localize`Error while retrieving bucket names.`]))):(0,w.of)([])}static{this.\u0275fac=function(t){return new(t||bt)(e.\u0275\u0275directiveInject(Y.Router),e.\u0275\u0275directiveInject(Y.ActivatedRoute),e.\u0275\u0275directiveInject(M.Ss),e.\u0275\u0275directiveInject(Ne.$),e.\u0275\u0275directiveInject(xe.A),e.\u0275\u0275directiveInject(te.J),e.\u0275\u0275directiveInject(Le.c))}}static{this.\u0275cmp=e.\u0275\u0275defineComponent({type:bt,selectors:[["cd-rgw-multisite-sync-policy-form"]],features:[e.\u0275\u0275InheritDefinitionFeature],decls:7,vars:8,consts:()=>{let n,t,_,i,a,r,s,d,u,m,C,O;return n=$localize`:␟fb127ea03835b3230f0ed981c7080e2ccb879621␟3346778808274133574:${"\ufffd0\ufffd"}:INTERPOLATION: ${"\ufffd1\ufffd"}:INTERPOLATION_1:`,t=$localize`:␟3b4026fa5c3bd2d92429615e055ba9e286ec1ca1␟1628184733354856422:Group Name...`,_=$localize`:␟fbf4a235f29fe0da3231256434b997e81f94d753␟8854842644322907646:Bucket Name...`,i=$localize`:␟de31685e1ee2f51b2d31b376653ad4a7e5406104␟1255339738217085471:Group Name`,a=$localize`:␟81b97b8ea996ad1e4f9fca8415021850214884b1␟5611592591303869712:Status`,r=$localize`:␟8a0d71a5d0c97366dfd6064c5f812cee0595700c␟7904129943519040371:${"\ufffd0\ufffd"}:INTERPOLATION:`,s=$localize`:␟53a4e63a853c2f842c133ca1a2e8ba4056f85741␟3747780187447354433:${"\ufffd0\ufffd"}:INTERPOLATION:`,d=$localize`:␟f5e27a2066ed4be78ced6a24d12bd7307f163e84␟3377342706124604370:${"\ufffd0\ufffd"}:INTERPOLATION:`,u=$localize`:␟5f4ec94a7dc4f5e8560836701d52110d0cd0120e␟5947435010326534759:Bucket Name`,m=$localize`:␟7cbdabcece469fab89cfa687ab152bca18b97498␟1417693714872528491:This field is required.`,C=$localize`:␟7cbdabcece469fab89cfa687ab152bca18b97498␟1417693714872528491:This field is required.`,O=$localize`:␟4592dfd0f941861c62e6e1d8541972f2fa9a9baa␟2766570284014675941:The bucket with chosen name does not exist.`,[["frm","ngForm"],n,i,a,r,s,d,u,m,C,O,[3,"pageURL"],[1,"modal-title"],[1,"modal-content"],["novalidate","",3,"formGroup",4,"cdFormLoading"],["novalidate","",3,"formGroup"],[1,"modal-body"],[1,"form-group","row"],["for","group_id",1,"cd-col-form-label","required"],[1,"cd-col-form-input"],["id","group_id","name","group_id","type","text","placeholder",t,"formControlName","group_id",1,"form-control",3,"readonly"],["class","invalid-feedback",4,"ngIf"],["for","status",1,"cd-col-form-label","required"],["id","status","name","status","formControlName","status",1,"form-select"],[3,"value"],["for","bucket_name",1,"cd-col-form-label"],["id","bucket_name","name","bucket_name","type","text","placeholder",_,"formControlName","bucket_name",1,"form-control",3,"ngbTypeahead"],[1,"modal-footer"],[1,"text-right"],[3,"submitActionEvent","form","disabled","submitText"],[1,"invalid-feedback"]]},template:function(t,_){1&t&&(e.\u0275\u0275elementStart(0,"cd-modal",11)(1,"span",12),e.\u0275\u0275i18n(2,1),e.\u0275\u0275pipe(3,"titlecase"),e.\u0275\u0275pipe(4,"upperFirst"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementContainerStart(5,13),e.\u0275\u0275template(6,DT,35,25,"form",14),e.\u0275\u0275elementContainerEnd(),e.\u0275\u0275elementEnd()),2&t&&(e.\u0275\u0275property("pageURL",_.pageURL),e.\u0275\u0275advance(4),e.\u0275\u0275i18nExp(e.\u0275\u0275pipeBind1(3,4,_.action))(e.\u0275\u0275pipeBind1(4,6,_.resource)),e.\u0275\u0275i18nApply(2),e.\u0275\u0275advance(2),e.\u0275\u0275property("cdFormLoading",_.loading))},dependencies:[g.NgIf,Xe.z,oe.e,St.G,j.S,Be.a,De.C,ne.E,l.\u0275NgNoValidate,l.NgSelectOption,l.\u0275NgSelectMultipleOption,l.DefaultValueAccessor,l.SelectControlValueAccessor,l.NgControlStatus,l.NgControlStatusGroup,l.FormGroupDirective,l.FormControlName,b.NgbTypeahead,c.Option,g.TitleCasePipe,Oe.r]})}}const s_=o=>({"text-muted":o});function WT(o,n){1&o&&(e.\u0275\u0275elementStart(0,"option",70),e.\u0275\u0275i18n(1,7),e.\u0275\u0275elementEnd())}function xT(o,n){1&o&&(e.\u0275\u0275elementStart(0,"option",71),e.\u0275\u0275i18n(1,8),e.\u0275\u0275elementEnd())}function wT(o,n){if(1&o&&(e.\u0275\u0275elementStart(0,"option",72),e.\u0275\u0275text(1),e.\u0275\u0275elementEnd()),2&o){const t=n.$implicit;e.\u0275\u0275property("value",t),e.\u0275\u0275advance(),e.\u0275\u0275textInterpolate(t)}}function UT(o,n){1&o&&(e.\u0275\u0275elementStart(0,"span",73),e.\u0275\u0275i18n(1,9),e.\u0275\u0275elementEnd())}function kT(o,n){if(1&o){const t=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"div")(1,"div",52)(2,"label",63),e.\u0275\u0275i18n(3,5),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(4,"div",64)(5,"select",65),e.\u0275\u0275listener("change",function(){e.\u0275\u0275restoreView(t);const i=e.\u0275\u0275nextContext();return e.\u0275\u0275resetView(i.setKmsProvider())}),e.\u0275\u0275template(6,WT,2,0,"option",66)(7,xT,2,0,"option",67)(8,wT,2,2,"option",68),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(9,"cd-help-text")(10,"span"),e.\u0275\u0275i18n(11,6),e.\u0275\u0275elementEnd()(),e.\u0275\u0275template(12,UT,2,0,"span",69),e.\u0275\u0275elementEnd()()()}if(2&o){const t=e.\u0275\u0275nextContext(),_=e.\u0275\u0275reference(6);e.\u0275\u0275advance(6),e.\u0275\u0275property("ngIf",null!==t.kmsProviders&&0===t.kmsProviders.length),e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf",null!==t.kmsProviders&&t.kmsProviders.length>0),e.\u0275\u0275advance(),e.\u0275\u0275property("ngForOf",t.kmsProviders),e.\u0275\u0275advance(4),e.\u0275\u0275property("ngIf",t.configForm.showError("kms_provider",_,"required"))}}function zT(o,n){if(1&o&&(e.\u0275\u0275elementStart(0,"option",72),e.\u0275\u0275text(1),e.\u0275\u0275elementEnd()),2&o){const t=n.$implicit;e.\u0275\u0275property("value",t),e.\u0275\u0275advance(),e.\u0275\u0275textInterpolate(t)}}function HT(o,n){1&o&&(e.\u0275\u0275elementStart(0,"span",73),e.\u0275\u0275i18n(1,12),e.\u0275\u0275elementEnd())}function XT(o,n){if(1&o&&(e.\u0275\u0275elementStart(0,"div")(1,"div",52)(2,"label",74),e.\u0275\u0275i18n(3,10),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(4,"div",64)(5,"select",75),e.\u0275\u0275template(6,zT,2,2,"option",68),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(7,"cd-help-text")(8,"span"),e.\u0275\u0275i18n(9,11),e.\u0275\u0275elementEnd()(),e.\u0275\u0275template(10,HT,2,0,"span",69),e.\u0275\u0275elementEnd()()()),2&o){const t=e.\u0275\u0275nextContext(2),_=e.\u0275\u0275reference(6);e.\u0275\u0275advance(6),e.\u0275\u0275property("ngForOf",t.authMethods),e.\u0275\u0275advance(4),e.\u0275\u0275property("ngIf",t.configForm.showError("auth",_,"required"))}}function BT(o,n){if(1&o&&(e.\u0275\u0275elementStart(0,"option",72),e.\u0275\u0275text(1),e.\u0275\u0275elementEnd()),2&o){const t=n.$implicit;e.\u0275\u0275property("value",t),e.\u0275\u0275advance(),e.\u0275\u0275textInterpolate(t)}}function VT(o,n){1&o&&(e.\u0275\u0275elementStart(0,"span",73),e.\u0275\u0275i18n(1,15),e.\u0275\u0275elementEnd())}function ZT(o,n){if(1&o&&(e.\u0275\u0275elementStart(0,"div")(1,"div",52)(2,"label",76),e.\u0275\u0275i18n(3,13),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(4,"div",64)(5,"select",77),e.\u0275\u0275template(6,BT,2,2,"option",68),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(7,"cd-help-text")(8,"span"),e.\u0275\u0275i18n(9,14),e.\u0275\u0275elementEnd()(),e.\u0275\u0275template(10,VT,2,0,"span",69),e.\u0275\u0275elementEnd()()()),2&o){const t=e.\u0275\u0275nextContext(2),_=e.\u0275\u0275reference(6);e.\u0275\u0275advance(6),e.\u0275\u0275property("ngForOf",t.secretEngines),e.\u0275\u0275advance(4),e.\u0275\u0275property("ngIf",t.configForm.showError("secret_engine",_,"required"))}}function KT(o,n){1&o&&(e.\u0275\u0275elementStart(0,"span",73),e.\u0275\u0275i18n(1,18),e.\u0275\u0275elementEnd())}function qT(o,n){if(1&o&&(e.\u0275\u0275elementStart(0,"div")(1,"div",52)(2,"label",78),e.\u0275\u0275i18n(3,16),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(4,"div",64),e.\u0275\u0275element(5,"input",79),e.\u0275\u0275elementStart(6,"cd-help-text")(7,"span"),e.\u0275\u0275i18n(8,17),e.\u0275\u0275elementEnd()(),e.\u0275\u0275template(9,KT,2,0,"span",69),e.\u0275\u0275elementEnd()()()),2&o){const t=e.\u0275\u0275nextContext(2),_=e.\u0275\u0275reference(6);e.\u0275\u0275advance(9),e.\u0275\u0275property("ngIf",t.configForm.showError("secret_path",_,"required"))}}function jT(o,n){1&o&&(e.\u0275\u0275elementStart(0,"div")(1,"div",52)(2,"label",80),e.\u0275\u0275i18n(3,19),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(4,"div",64),e.\u0275\u0275element(5,"input",81),e.\u0275\u0275elementStart(6,"cd-help-text")(7,"span"),e.\u0275\u0275i18n(8,20),e.\u0275\u0275elementEnd()()()()())}function YT(o,n){1&o&&(e.\u0275\u0275elementStart(0,"span"),e.\u0275\u0275i18n(1,21),e.\u0275\u0275elementEnd())}function QT(o,n){1&o&&(e.\u0275\u0275elementStart(0,"span"),e.\u0275\u0275i18n(1,22),e.\u0275\u0275elementEnd())}function JT(o,n){1&o&&(e.\u0275\u0275elementStart(0,"span"),e.\u0275\u0275i18n(1,23),e.\u0275\u0275elementEnd())}function eg(o,n){1&o&&(e.\u0275\u0275elementStart(0,"span"),e.\u0275\u0275i18n(1,24),e.\u0275\u0275elementEnd())}function tg(o,n){1&o&&(e.\u0275\u0275elementStart(0,"span",73),e.\u0275\u0275i18n(1,25),e.\u0275\u0275elementEnd())}function ng(o,n){if(1&o&&(e.\u0275\u0275elementStart(0,"div")(1,"div",52)(2,"label",82),e.\u0275\u0275template(3,YT,2,0,"span",60)(4,QT,2,0,"span",60),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(5,"div",64),e.\u0275\u0275element(6,"input",83),e.\u0275\u0275elementStart(7,"cd-help-text"),e.\u0275\u0275template(8,JT,2,0,"span",60)(9,eg,2,0,"span",60),e.\u0275\u0275elementEnd(),e.\u0275\u0275template(10,tg,2,0,"span",69),e.\u0275\u0275elementEnd()()()),2&o){const t=e.\u0275\u0275nextContext(2),_=e.\u0275\u0275reference(6);e.\u0275\u0275advance(3),e.\u0275\u0275property("ngIf",t.configForm.getValue("kms_provider")===t.KMS_PROVIDER.VAULT),e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf",t.configForm.getValue("kms_provider")===t.KMS_PROVIDER.KMIP),e.\u0275\u0275advance(4),e.\u0275\u0275property("ngIf",t.configForm.getValue("kms_provider")===t.KMS_PROVIDER.VAULT),e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf",t.configForm.getValue("kms_provider")===t.KMS_PROVIDER.KMIP),e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf",t.configForm.showError("addr",_,"required"))}}function og(o,n){1&o&&(e.\u0275\u0275elementStart(0,"span",73),e.\u0275\u0275i18n(1,29),e.\u0275\u0275elementEnd())}function _g(o,n){if(1&o){const t=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"div",52)(1,"label",85)(2,"span"),e.\u0275\u0275i18n(3,26),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(4,"cd-helper"),e.\u0275\u0275i18n(5,27),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(6,"div",64)(7,"input",86),e.\u0275\u0275listener("change",function(i){e.\u0275\u0275restoreView(t);const a=e.\u0275\u0275nextContext(3);return e.\u0275\u0275resetView(a.fileUpload(i.target.files,"token"))}),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(8,"cd-help-text")(9,"span"),e.\u0275\u0275i18n(10,28),e.\u0275\u0275elementEnd()(),e.\u0275\u0275template(11,og,2,0,"span",69),e.\u0275\u0275elementEnd()()}if(2&o){const t=e.\u0275\u0275nextContext(3),_=e.\u0275\u0275reference(6);e.\u0275\u0275advance(11),e.\u0275\u0275property("ngIf",t.configForm.showError("token",_,"required"))}}function ig(o,n){if(1&o&&(e.\u0275\u0275elementStart(0,"div"),e.\u0275\u0275template(1,_g,12,1,"div",84),e.\u0275\u0275elementEnd()),2&o){const t=e.\u0275\u0275nextContext(2);e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf","token"===t.configForm.getValue("auth"))}}function ag(o,n){if(1&o&&(e.\u0275\u0275elementStart(0,"div")(1,"div",52)(2,"label",87),e.\u0275\u0275i18n(3,30),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(4,"div",64),e.\u0275\u0275element(5,"input",88),e.\u0275\u0275elementStart(6,"cd-help-text")(7,"span"),e.\u0275\u0275i18n(8,31),e.\u0275\u0275elementEnd()()()(),e.\u0275\u0275elementStart(9,"div",52)(10,"label",89),e.\u0275\u0275i18n(11,32),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(12,"div",64),e.\u0275\u0275element(13,"input",90),e.\u0275\u0275elementStart(14,"cd-help-text")(15,"span"),e.\u0275\u0275i18n(16,33),e.\u0275\u0275elementEnd()()()(),e.\u0275\u0275elementStart(17,"div",52)(18,"label",91),e.\u0275\u0275i18n(19,34),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(20,"div",64),e.\u0275\u0275element(21,"input",92),e.\u0275\u0275elementStart(22,"cd-help-text")(23,"span"),e.\u0275\u0275i18n(24,35),e.\u0275\u0275elementEnd()()()(),e.\u0275\u0275elementStart(25,"div",52)(26,"label",93),e.\u0275\u0275i18n(27,36),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(28,"div",64),e.\u0275\u0275element(29,"input",94),e.\u0275\u0275elementStart(30,"cd-help-text")(31,"span"),e.\u0275\u0275i18n(32,37),e.\u0275\u0275elementEnd()()()()()),2&o){const t=e.\u0275\u0275nextContext(2);e.\u0275\u0275advance(21),e.\u0275\u0275attribute("disabled",t.configForm.getValue("kms_provider")!==t.KMS_PROVIDER.KMIP||null),e.\u0275\u0275advance(8),e.\u0275\u0275attribute("disabled",t.configForm.getValue("kms_provider")!=t.KMS_PROVIDER.KMIP)}}function rg(o,n){1&o&&(e.\u0275\u0275elementStart(0,"div")(1,"div",52)(2,"label",95)(3,"span"),e.\u0275\u0275i18n(4,38),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(5,"cd-helper"),e.\u0275\u0275i18n(6,39),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(7,"div",64),e.\u0275\u0275element(8,"input",96),e.\u0275\u0275elementStart(9,"cd-help-text")(10,"span"),e.\u0275\u0275i18n(11,40),e.\u0275\u0275elementEnd()()()()())}function lg(o,n){1&o&&(e.\u0275\u0275elementStart(0,"div")(1,"div",52)(2,"label",97)(3,"span"),e.\u0275\u0275i18n(4,41),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(5,"cd-helper"),e.\u0275\u0275i18n(6,42),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(7,"div",64),e.\u0275\u0275element(8,"input",98),e.\u0275\u0275elementStart(9,"cd-help-text")(10,"span"),e.\u0275\u0275i18n(11,43),e.\u0275\u0275elementEnd()()()()())}function sg(o,n){1&o&&(e.\u0275\u0275elementStart(0,"div")(1,"div",52)(2,"label",99)(3,"span"),e.\u0275\u0275i18n(4,44),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(5,"cd-helper"),e.\u0275\u0275i18n(6,45),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(7,"div",64),e.\u0275\u0275element(8,"input",100),e.\u0275\u0275elementStart(9,"cd-help-text")(10,"span"),e.\u0275\u0275i18n(11,46),e.\u0275\u0275elementEnd()()()()())}function cg(o,n){if(1&o&&(e.\u0275\u0275elementStart(0,"div"),e.\u0275\u0275template(1,XT,11,2,"div",60)(2,ZT,11,2,"div",60)(3,qT,10,1,"div",60)(4,jT,9,0,"div",60)(5,ng,11,5,"div",60)(6,ig,2,1,"div",60)(7,ag,33,2,"div",60)(8,rg,12,0,"div",60)(9,lg,12,0,"div",60)(10,sg,12,0,"div",60),e.\u0275\u0275elementEnd()),2&o){const t=e.\u0275\u0275nextContext();e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf",t.configForm.getValue("encryptionType")===t.ENCRYPTION_TYPE.SSE_KMS&&t.configForm.getValue("kms_provider")===t.KMS_PROVIDER.VAULT||t.configForm.getValue("encryptionType")===t.ENCRYPTION_TYPE.SSE_S3),e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf",t.configForm.getValue("encryptionType")===t.ENCRYPTION_TYPE.SSE_KMS&&t.configForm.getValue("kms_provider")===t.KMS_PROVIDER.VAULT||t.configForm.getValue("encryptionType")===t.ENCRYPTION_TYPE.SSE_S3),e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf",t.configForm.getValue("encryptionType")===t.ENCRYPTION_TYPE.SSE_KMS&&t.configForm.getValue("kms_provider")===t.KMS_PROVIDER.VAULT||t.configForm.getValue("encryptionType")===t.ENCRYPTION_TYPE.SSE_S3),e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf",t.configForm.getValue("encryptionType")===t.ENCRYPTION_TYPE.SSE_KMS&&t.configForm.getValue("kms_provider")==t.KMS_PROVIDER.VAULT||t.configForm.getValue("encryptionType")===t.ENCRYPTION_TYPE.SSE_S3),e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf",t.configForm.getValue("encryptionType")===t.ENCRYPTION_TYPE.SSE_KMS||t.configForm.getValue("encryptionType")===t.ENCRYPTION_TYPE.SSE_S3),e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf",t.configForm.getValue("encryptionType")===t.ENCRYPTION_TYPE.SSE_KMS&&t.configForm.getValue("kms_provider")===t.KMS_PROVIDER.VAULT||t.configForm.getValue("encryptionType")===t.ENCRYPTION_TYPE.SSE_S3),e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf",t.configForm.getValue("encryptionType")===t.ENCRYPTION_TYPE.SSE_KMS&&t.configForm.getValue("kms_provider")===t.KMS_PROVIDER.KMIP),e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf",t.configForm.getValue("encryptionType")===t.ENCRYPTION_TYPE.SSE_KMS||t.configForm.getValue("encryptionType")===t.ENCRYPTION_TYPE.SSE_S3),e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf",t.configForm.getValue("encryptionType")===t.ENCRYPTION_TYPE.SSE_KMS||t.configForm.getValue("encryptionType")===t.ENCRYPTION_TYPE.SSE_S3),e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf",t.configForm.getValue("encryptionType")===t.ENCRYPTION_TYPE.SSE_KMS||t.configForm.getValue("encryptionType")===t.ENCRYPTION_TYPE.SSE_S3)}}class Jt{constructor(n,t,_,i,a){this.formBuilder=n,this.activeModal=t,this.actionLabels=_,this.rgwBucketService=i,this.notificationService=a,this.vaultAddress=/^((https?:\/\/)|(www.))(?:([a-zA-Z]+)|(\d+\.\d+.\d+.\d+)):\d{4}$/,this.submitAction=new e.EventEmitter,this.selectedEncryptionConfigValues={},this.allEncryptionConfigValues=[],this.editing=!1,this.ENCRYPTION_TYPE=Me,this.KMS_PROVIDER=Ae,this.createForm()}ngOnInit(){if(this.kmsProviders=pn.kmsProviders,this.authMethods=pn.authMethods,this.secretEngines=pn.secretEngines,this.editing&&this.selectedEncryptionConfigValues){const n={addr:this.selectedEncryptionConfigValues.addr,encryptionType:this.selectedEncryptionConfigValues.encryption_type,kms_provider:this.selectedEncryptionConfigValues.backend,auth:this.selectedEncryptionConfigValues.auth,secret_engine:this.selectedEncryptionConfigValues.secret_engine,secret_path:this.selectedEncryptionConfigValues.prefix,namespace:this.selectedEncryptionConfigValues.namespace,kms_key_template:this.selectedEncryptionConfigValues.kms_key_template,s3_key_template:this.selectedEncryptionConfigValues.s3_key_template,username:this.selectedEncryptionConfigValues.username,password:this.selectedEncryptionConfigValues.password,ssl_cert:this.selectedEncryptionConfigValues.backend===Ae.VAULT?this.selectedEncryptionConfigValues.ssl_cacert:this.selectedEncryptionConfigValues.ca_path,client_cert:this.selectedEncryptionConfigValues.backend===Ae.VAULT?this.selectedEncryptionConfigValues.ssl_clientcert:this.selectedEncryptionConfigValues.client_cert,client_key:this.selectedEncryptionConfigValues.backend===Ae.VAULT?this.selectedEncryptionConfigValues.ssl_clientkey:this.selectedEncryptionConfigValues.client_key};this.configForm.patchValue(n),this.configForm.get("kms_provider").disable()}this.checkKmsProviders()}setKmsProvider(){const n=this.configForm.get("encryptionType").value;this.kmsProviders=n===Me.SSE_KMS?[Ae.VAULT,Ae.KMIP]:[Ae.VAULT]}checkKmsProviders(){if(this.editing||this.setKmsProvider(),this.allEncryptionConfigValues&&this.allEncryptionConfigValues.hasOwnProperty(Me.SSE_KMS)&&!this.editing){const n=Object.values(this.allEncryptionConfigValues[Me.SSE_KMS]).map(t=>t.backend);this.configForm.get("encryptionType").value===Me.SSE_KMS&&(this.kmsProviders=this.kmsProviders.filter(t=>!n.includes(t)))}if(this.allEncryptionConfigValues&&this.allEncryptionConfigValues.hasOwnProperty("s3")&&!this.editing){const n=Object.values(this.allEncryptionConfigValues[Me.SSE_S3]).map(t=>t.backend);this.configForm.get("encryptionType").value===Me.SSE_S3&&(this.kmsProviders=this.kmsProviders.filter(t=>!n.includes(t)))}this.editing||this.kmsProviders.length>0&&this.configForm.get("kms_provider").setValue(this.kmsProviders[0])}createForm(){this.configForm=this.formBuilder.group({addr:[null,[l.Validators.required,F.xQ.custom("vaultPattern",n=>!N().isEmpty(n)&&!this.vaultAddress.test(n))]],kms_provider:["vault",l.Validators.required],encryptionType:["kms",l.Validators.required],auth:["token",F.xQ.requiredIf({kms_provider:"vault"})],secret_engine:["kv",F.xQ.requiredIf({kms_provider:"vault"})],secret_path:["/"],namespace:[null],token:[null,[F.xQ.requiredIf({auth:"token",kms_provider:"vault"})]],ssl_cert:[""],client_cert:[""],client_key:[""],kmsEnabled:[{value:!1}],s3Enabled:[{value:!1}],kms_key_template:[null],s3_key_template:[null],username:[""],password:[""]})}fileUpload(n,t){const _=n[0];(new FileReader).addEventListener("load",()=>{const a=this.configForm.get(t);a.setValue(_),a.markAsDirty(),a.markAsTouched(),a.updateValueAndValidity()})}onSubmit(){const n=this.configForm.getRawValue();let t;n.kms_provider===Ae.VAULT?t={kms_provider:n.kms_provider,encryption_type:n.encryptionType,config:{addr:n.addr,auth:n.auth,prefix:n.secret_path,secret_engine:n.secret_engine,namespace:n.namespace,token_file:n.token,ssl_cacert:n.ssl_cert,ssl_clientcert:n.client_cert,ssl_clientkey:n.client_key}}:n.kms_provider===Ae.KMIP&&(t={kms_provider:n.kms_provider,encryption_type:n.encryptionType,config:{addr:n.addr,username:n.username,password:n.password,kms_key_template:n.kms_key_template,s3_key_template:n.s3_key_template,client_key:n.client_key,ca_path:n.ssl_cert,client_cert:n.client_cert}}),this.rgwBucketService.setEncryptionConfig(t).subscribe({next:()=>{this.notificationService.show(x._.success,$localize`Updated RGW Encryption Configuration values`)},error:_=>{this.notificationService.show(x._.error,_.message),this.configForm.setErrors({cdSubmitButton:!0})},complete:()=>{this.activeModal.close(),this.table?.refreshBtn()}})}static{this.\u0275fac=function(t){return new(t||Jt)(e.\u0275\u0275directiveInject(Ne.$),e.\u0275\u0275directiveInject(b.NgbActiveModal),e.\u0275\u0275directiveInject(M.Ss),e.\u0275\u0275directiveInject(Le.c),e.\u0275\u0275directiveInject(te.J))}}static{this.\u0275cmp=e.\u0275\u0275defineComponent({type:Jt,selectors:[["cd-rgw-config-modal"]],outputs:{submitAction:"submitAction"},decls:23,vars:19,consts:()=>{let n,t,_,i,a,r,s,d,u,m,C,O,f,I,R,h,G,U,k,y,H,X,B,V,S,P,ee,Q,q,J,$,_e,D,W,ce,de,ue,pe,me,Te,ge,le,Ee,Re,Ce,fe;return n=$localize`:form title␟fbebbf00543abc7bca20aa94994e6d17758c616a␟6553445545393774655:${"\ufffd0\ufffd"}:INTERPOLATION: RGW Encryption Configurations`,t=$localize`:␟15d2b09898dbaf537ad74f8dabb91ba820551d92␟8358388827744192621:Encryption Type`,_=$localize`:␟16d0a1fb48e9962f237f8ab9a06b2c93660dd24d␟6285155023486094493:SSE-S3`,i=$localize`:␟5dd1475a0cdde3e78f6df7a0587ed758685740da␟8915575478463885626:SSE-KMS`,a=$localize`:␟8c00f4b272ba65ace2963e1c84585ea4dfda7ded␟5133287481383359596:Key management service provider`,r=$localize`:␟ab703efc4ebc6ea74f041f42fc0d9d6435ecc3bc␟3136102298959267396:Where the encryption keys are stored. `,s=$localize`:␟8accdc20e9e7daa5e43beccb58e97e321f7e9a21␟1966008734423384590:-- No kms providers available --`,d=$localize`:␟b750e707cfe777404de47cb928a50d1ebbd78613␟634394574327617185:-- Select a provider --`,u=$localize`:␟7cbdabcece469fab89cfa687ab152bca18b97498␟1417693714872528491:This field is required.`,m=$localize`:␟5ef08052f6daa73917d6559b8326bc9dab83efe3␟5161459699960713360:Authentication Method`,C=$localize`:␟e5363546d1b2d2db6bbd9935b4b028da4ba39de8␟3067295426751800180:Type of authentication method to be used with Vault `,O=$localize`:␟7cbdabcece469fab89cfa687ab152bca18b97498␟1417693714872528491:This field is required.`,f=$localize`:␟7643bc5fe2b6321349974902f32f550929c2cca9␟2309054511008088416:Secret Engine`,I=$localize`:␟5551aee9a23de20c978c890ed452cdc73d469b44␟6467092667047057809:Vault Secret Engine to be used to retrieve encryption keys. `,R=$localize`:␟7cbdabcece469fab89cfa687ab152bca18b97498␟1417693714872528491:This field is required.`,h=$localize`:␟4413abce37382ed894c5a3fd12452328b5005798␟5229169323184756442:Secret Path `,G=$localize`:␟ca533005cb88d0796d39717812e61d0e307e5a44␟7287628497242766281:Vault secret URL prefix, which can be used to restrict access to a particular subset of the Vault secret space. `,U=$localize`:␟7cbdabcece469fab89cfa687ab152bca18b97498␟1417693714872528491:This field is required.`,k=$localize`:␟da6f656dae49cf785bfed8260f576e4e57b0fd77␟8730565933794564654:Namespace `,y=$localize`:␟55158fdf9ea6420955cbd63b821434675cb1e477␟2825525234903154170:Vault Namespace to be used to select your tenant. `,H=$localize`:␟5eaf8ea98213b5a0539cf5da23ca40745cb1f383␟3027495633909435980:Vault Address `,X=$localize`:␟361709e62d8408177aad0d610e71095ea176417f␟960578742075217289:KMIP Address `,B=$localize`:␟609e77a8c6b7ad0517145c35aff3dffd6a309e60␟3170096417592788071:Vault server base address. `,V=$localize`:␟2fcfd615461904e0b1b70b906b608fea9e8ce699␟1992206389595238417:Kmip server base address. `,S=$localize`:␟7cbdabcece469fab89cfa687ab152bca18b97498␟1417693714872528491:This field is required.`,P=$localize`:␟1edc1fc6cfbbb22353050ad6788508b3ed584f53␟3039940756451018621:Token`,ee=$localize`:␟a269ecaa2f2026c9115a31bd1a28e6d5ac4d9d2e␟1432802778794968778: The token authentication method expects a Vault token to be present in a plaintext file. `,Q=$localize`:␟5df6f239064d834389b2aab9e9630842217a84d0␟1283583101896090896:If authentication method is 'token', provide a path to the token file. `,q=$localize`:␟7cbdabcece469fab89cfa687ab152bca18b97498␟1417693714872528491:This field is required.`,J=$localize`:␟9f8d343f2b19637529f575d0fdf5a9790a4d6dc8␟7810893301757349923:KMS Key Template `,$=$localize`:␟2cdbb210ce140cfc772cc4d9fcf5d75052cfe185␟2489927213238251932:sse-kms; kmip key names `,_e=$localize`:␟b36771a3d715f36ee33097b1da589e224d693c92␟3359705320899461154:S3 Key Template `,D=$localize`:␟3d6f990941396a1ab62a9f573aeb6d469f3346a6␟3942173314480617705:sse-s3; kmip key template `,W=$localize`:␟7bbc67d3539b7da78ed194f3c54bb78630481131␟2159977639883146258:Username `,ce=$localize`:␟7711ae45703f356afb3fbf0d422afdf4db96bb2b␟3803584997602685785:When authenticating via username `,de=$localize`:␟225140c22f6ece1fccfad6d72cd06c69ef59ff18␟2419566667443718905:Password `,ue=$localize`:␟261a239c35cde15fa46b3167963515f379d705c4␟4920973737905399978:optional w/ username `,pe=$localize`:␟53593c68de43b65fc1e0f9f3e077d4111623471a␟1687183839931103801:CA Certificate Path`,me=$localize`:␟0bdbf3a064fb609d2af895e02cf5c6b642c050ee␟4151841461800328184:The SSL certificate in PEM format. Please provide file path to the RGW host.`,Te=$localize`:␟252b812ccb47104c02446d8500af7e1b3991cba2␟4507165727403945166: Path for custom ca certificate for accessing server `,ge=$localize`:␟3c1e8d44cad3dc485934bcb1398d7aef5229c8a0␟2574360183240890678:Client Certificate Path`,le=$localize`:␟b9993beb0f84776edf20bbad76553e2435a7d5ca␟3231040769855506338:The Client certificate in PEM format. Please provide file path to the RGW host.`,Ee=$localize`:␟a53d7cb36aebde46b1fa2c6091728e56267b3a7a␟614383506144240502: Path for custom client certificate for accessing server `,Re=$localize`:␟e48fc1f6e1c7209deb160569dac55426a3c6273b␟3116884974052299027:Client Private Key Path`,Ce=$localize`:␟36ad9a85420e5e902a3cfe78e532221c88438023␟3099956803403614843:The Client Private Key in PEM format. Please provide file path to the RGW host.`,fe=$localize`:␟1f9270b853b1a7b7a549dff85af2c479089679d9␟1069555098084597497: Path for private key required for client cert `,[["frm","ngForm"],n,t,_,i,a,r,s,d,u,m,C,O,f,I,R,h,G,U,k,y,H,X,B,V,S,P,ee,Q,q,J,$,_e,D,W,ce,de,ue,pe,me,Te,ge,le,Ee,Re,Ce,fe,[3,"modalRef"],[1,"modal-title"],[1,"modal-content"],["name","configForm",3,"formGroup"],[1,"modal-body"],[1,"form-group","row"],["for","encryptionType",1,"cd-col-form-label","required"],[1,"col-md-auto","custom-checkbox","form-check-inline","ms-3"],["formControlName","encryptionType","id","s3Enabled","type","radio",1,"form-check-input",3,"change","value"],["for","s3Enabled",1,"custom-check-label",3,"ngClass"],[1,"col-md-auto","custom-checkbox","form-check-inline"],["formControlName","encryptionType","id","kmsEnabled","type","radio",1,"form-check-input",3,"change","value"],["for","kmsEnabled",1,"custom-check-label",3,"ngClass"],[4,"ngIf"],[1,"modal-footer"],[3,"submitActionEvent","submitText","form"],["for","kms_provider",1,"cd-col-form-label","required"],[1,"cd-col-form-input"],["id","kms_provider","formControlName","kms_provider",1,"form-select",3,"change"],["ngValue","null",4,"ngIf"],["ngValue","",4,"ngIf"],[3,"value",4,"ngFor","ngForOf"],["class","invalid-feedback",4,"ngIf"],["ngValue","null"],["ngValue",""],[3,"value"],[1,"invalid-feedback"],["for","auth",1,"cd-col-form-label","required"],["id","auth","formControlName","auth",1,"form-select"],["for","secret_engine",1,"cd-col-form-label","required"],["id","secret_engine","formControlName","secret_engine",1,"form-select"],["for","secret_path",1,"cd-col-form-label"],["type","text","id","secret_path","formControlName","secret_path","placeholder","/v1/secret/data",1,"form-control"],["for","namespace",1,"cd-col-form-label"],["id","namespace","type","text","placeholder","tenant1","formControlName","namespace",1,"form-control"],["for","addr",1,"cd-col-form-label","required"],["id","addr","formControlName","addr","placeholder","http://127.0.0.1:8000",1,"form-control"],["class","form-group row",4,"ngIf"],["for","token",1,"cd-col-form-label","required"],["type","file","id","token","formControlName","token",3,"change"],["for","kms_key_template",1,"cd-col-form-label"],["id","kms_key_template","placeholder","$keyid","formControlName","kms_key_template",1,"form-control"],["for","s3_key_template",1,"cd-col-form-label"],["id","s3_key_template","placeholder","$keyid","formControlName","s3_key_template",1,"form-control"],["for","username",1,"cd-col-form-label"],["id","username","formControlName","username",1,"form-control"],["for","password",1,"cd-col-form-label"],["id","password","type","password","formControlName","password",1,"form-control"],["for","ssl_cert",1,"cd-col-form-label"],["type","text","id","ssl_cert","formControlName","ssl_cert","placeholder","/path/to/ca_cert.pem",1,"form-control"],["for","client_cert",1,"cd-col-form-label"],["type","text","id","client_cert","formControlName","client_cert","placeholder","/path/to/client_cert.pem",1,"form-control"],["for","client_key",1,"cd-col-form-label"],["type","text","id","client_key","formControlName","client_key","placeholder","/path/to/client_key.pem",1,"form-control"]]},template:function(t,_){if(1&t){const i=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"cd-modal",47),e.\u0275\u0275elementContainerStart(1,48),e.\u0275\u0275i18n(2,1),e.\u0275\u0275pipe(3,"titlecase"),e.\u0275\u0275elementContainerEnd(),e.\u0275\u0275elementContainerStart(4,49),e.\u0275\u0275elementStart(5,"form",50,0)(7,"div",51)(8,"div",52)(9,"label",53),e.\u0275\u0275i18n(10,2),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(11,"div",54)(12,"input",55),e.\u0275\u0275listener("change",function(){return e.\u0275\u0275restoreView(i),e.\u0275\u0275resetView(_.checkKmsProviders())}),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(13,"label",56),e.\u0275\u0275i18n(14,3),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(15,"div",57)(16,"input",58),e.\u0275\u0275listener("change",function(){return e.\u0275\u0275restoreView(i),e.\u0275\u0275resetView(_.checkKmsProviders())}),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(17,"label",59),e.\u0275\u0275i18n(18,4),e.\u0275\u0275elementEnd()()(),e.\u0275\u0275template(19,kT,13,4,"div",60)(20,cg,11,10,"div",60),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(21,"div",61)(22,"cd-form-button-panel",62),e.\u0275\u0275listener("submitActionEvent",function(){return e.\u0275\u0275restoreView(i),e.\u0275\u0275resetView(_.onSubmit())}),e.\u0275\u0275elementEnd()()(),e.\u0275\u0275elementContainerEnd(),e.\u0275\u0275elementEnd()}2&t&&(e.\u0275\u0275property("modalRef",_.activeModal),e.\u0275\u0275advance(3),e.\u0275\u0275i18nExp(e.\u0275\u0275pipeBind1(3,13,_.action)),e.\u0275\u0275i18nApply(2),e.\u0275\u0275advance(2),e.\u0275\u0275property("formGroup",_.configForm),e.\u0275\u0275advance(7),e.\u0275\u0275property("value",_.ENCRYPTION_TYPE.SSE_S3),e.\u0275\u0275attribute("disabled",!(!_.editing||_.configForm.getValue("encryptionType")===_.ENCRYPTION_TYPE.SSE_S3)||null),e.\u0275\u0275advance(),e.\u0275\u0275property("ngClass",e.\u0275\u0275pureFunction1(15,s_,_.editing&&_.configForm.getValue("encryptionType")!==_.ENCRYPTION_TYPE.SSE_S3)),e.\u0275\u0275advance(3),e.\u0275\u0275property("value",_.ENCRYPTION_TYPE.SSE_KMS),e.\u0275\u0275attribute("disabled",!(!_.editing||_.configForm.getValue("encryptionType")===_.ENCRYPTION_TYPE.SSE_KMS)||null),e.\u0275\u0275advance(),e.\u0275\u0275property("ngClass",e.\u0275\u0275pureFunction1(17,s_,_.editing&&_.configForm.getValue("encryptionType")!==_.ENCRYPTION_TYPE.SSE_KMS)),e.\u0275\u0275advance(2),e.\u0275\u0275property("ngIf",_.configForm.getValue("encryptionType")===_.ENCRYPTION_TYPE.SSE_KMS||_.configForm.getValue("encryptionType")===_.ENCRYPTION_TYPE.SSE_S3),e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf",0!==_.kmsProviders.length&&""!==_.configForm.getValue("kms_provider")),e.\u0275\u0275advance(2),e.\u0275\u0275property("submitText",_.actionLabels.SUBMIT)("form",_.configForm))},dependencies:[g.NgClass,g.NgForOf,g.NgIf,Ot.m,Xe.z,oe.e,ie.O,j.S,Be.a,De.C,ne.E,l.\u0275NgNoValidate,l.NgSelectOption,l.\u0275NgSelectMultipleOption,l.DefaultValueAccessor,l.SelectControlValueAccessor,l.RadioControlValueAccessor,l.NgControlStatus,l.NgControlStatusGroup,l.FormGroupDirective,l.FormControlName,c.Option,g.TitleCasePipe]})}}var Yn;function dg(o,n){if(1&o&&e.\u0275\u0275element(0,"cd-table-key-value",8),2&o){const t=e.\u0275\u0275nextContext(2);e.\u0275\u0275property("data",t.transformedData)}}function ug(o,n){if(1&o&&(e.\u0275\u0275elementContainerStart(0),e.\u0275\u0275elementStart(1,"nav",3,0),e.\u0275\u0275elementContainerStart(3,4),e.\u0275\u0275elementStart(4,"a",5),e.\u0275\u0275i18n(5,1),e.\u0275\u0275elementEnd(),e.\u0275\u0275template(6,dg,1,1,"ng-template",6),e.\u0275\u0275elementContainerEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275element(7,"div",7),e.\u0275\u0275elementContainerEnd()),2&o){const t=e.\u0275\u0275reference(2);e.\u0275\u0275advance(7),e.\u0275\u0275property("ngbNavOutlet",t)}}!function(o){o.auth="Authentication Method",o.encryption_type="Encryption Type",o.backend="Backend",o.prefix="Prefix",o.namespace="Namespace",o.secret_engine="Secret Engine",o.addr="Address",o.token_file="Token File",o.ssl_cacert="SSL CA Certificate",o.ssl_clientcert="SSL Client Certificate",o.ssl_clientkey="SSL Client Key",o.verify_ssl="Verify SSL",o.ca_path="CA Path",o.client_cert="Client Certificate",o.client_key="Client Key",o.kms_key_template="KMS Key Template",o.password="Password",o.s3_key_template="S3 Key Template",o.username="Username"}(Yn||(Yn={}));class Qn{constructor(){this.excludeProps=[]}ngOnChanges(){if(this.selection){this.filteredEncryptionConfigValues=Object.keys(this.selection).filter(t=>!this.excludeProps.includes(t)).reduce((t,_)=>(t[_]=this.selection[_],t),{});const n={};for(const t in this.filteredEncryptionConfigValues)Yn[t]?n[Yn[t]]=this.filteredEncryptionConfigValues[t]:n[t]=this.filteredEncryptionConfigValues[t];this.transformedData=n}}static{this.\u0275fac=function(t){return new(t||Qn)}}static{this.\u0275cmp=e.\u0275\u0275defineComponent({type:Qn,selectors:[["cd-rgw-config-details"]],inputs:{selection:"selection",excludeProps:"excludeProps"},features:[e.\u0275\u0275NgOnChangesFeature],decls:1,vars:1,consts:()=>{let n;return n=$localize`:␟4f8b2bb476981727ab34ed40fde1218361f92c45␟5028777105388019087:Details`,[["nav","ngbNav"],n,[4,"ngIf"],["ngbNav","","id","tabset-config-details","cdStatefulTab","config-details",1,"nav-tabs"],["ngbNavItem","details"],["ngbNavLink",""],["ngbNavContent",""],[3,"ngbNavOutlet"],[3,"data"]]},template:function(t,_){1&t&&e.\u0275\u0275template(0,ug,8,1,"ng-container",2),2&t&&e.\u0275\u0275property("ngIf",_.selection)},dependencies:[g.NgIf,On.i,gn.B,b.NgbNavContent,b.NgbNav,b.NgbNavItem,b.NgbNavLink,b.NgbNavLinkBase,b.NgbNavOutlet]})}}function pg(o,n){if(1&o&&e.\u0275\u0275element(0,"cd-rgw-config-details",11),2&o){const t=e.\u0275\u0275nextContext(2);e.\u0275\u0275property("selection",t.expandedRow)("excludeProps",t.excludeProps)}}function mg(o,n){if(1&o){const t=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"cd-table",8,1),e.\u0275\u0275listener("fetchData",function(){e.\u0275\u0275restoreView(t);const i=e.\u0275\u0275nextContext();return e.\u0275\u0275resetView(i.fetchData())})("updateSelection",function(i){e.\u0275\u0275restoreView(t);const a=e.\u0275\u0275nextContext();return e.\u0275\u0275resetView(a.updateSelection(i))})("setExpandedRow",function(i){e.\u0275\u0275restoreView(t);const a=e.\u0275\u0275nextContext();return e.\u0275\u0275resetView(a.setExpandedRow(i))}),e.\u0275\u0275element(2,"cd-table-actions",9),e.\u0275\u0275template(3,pg,1,2,"cd-rgw-config-details",10),e.\u0275\u0275elementEnd()}if(2&o){const t=e.\u0275\u0275nextContext();e.\u0275\u0275property("data",t.encryptionConfigValues)("columns",t.columns)("forceIdentifier",!0)("hasDetails",!0),e.\u0275\u0275advance(2),e.\u0275\u0275property("permission",t.permissions.configOpt)("selection",t.selection)("tableActions",t.tableActions)}}class Jn extends et.D{constructor(n,t,_,i,a){super(),this.activeModal=n,this.actionLabels=t,this.rgwBucketService=_,this.authStorageService=i,this.modalService=a,this.vaultAddress=/^((https?:\/\/)|(www.))(?:([a-zA-Z]+)|(\d+\.\d+.\d+.\d+)):\d{4}$/,this.columns=[],this.encryptionConfigValues=[],this.selection=new Ge.y,this.submitAction=new e.EventEmitter,this.excludeProps=[],this.disableCreate=!0,this.permissions=this.authStorageService.getPermissions()}ngOnInit(){this.columns=[{name:$localize`Encryption Type`,prop:"encryption_type",flexGrow:1},{name:$localize`Key Management Service Provider`,prop:"backend",flexGrow:1},{name:$localize`Address`,prop:"addr",flexGrow:1}],this.tableActions=[{permission:"create",icon:L.FI.add,name:this.actionLabels.CREATE,click:()=>this.openRgwConfigModal(!1),disable:()=>this.disableCreate},{permission:"update",icon:L.FI.edit,name:this.actionLabels.EDIT,click:()=>this.openRgwConfigModal(!0)}],this.excludeProps=this.columns.map(n=>n.prop),this.excludeProps.push("unique_id")}getBackend(n,t){const _=new Set(Object.keys(n[t]));return t===Me.SSE_KMS?_.has("kmip")&&_.has("vault"):_.has("vault")}openRgwConfigModal(n){if(n){const t={action:"edit",editing:!0,selectedEncryptionConfigValues:this.selection.first(),table:this.table};this.bsModalRef=this.modalService.show(Jt,t,{size:"lg"})}else{const t={action:"create",allEncryptionConfigValues:this.allEncryptionValues};this.bsModalRef=this.modalService.show(Jt,t,{size:"lg"})}}updateSelection(n){this.selection=n}setExpandedRow(n){super.setExpandedRow(n)}flattenData(n){const t=[];for(const _ of Object.values(n[Me.SSE_KMS]))t.push(_);for(const _ of Object.values(n[Me.SSE_S3]))t.push(_);return t}fetchData(){this.rgwBucketService.getEncryptionConfig().subscribe(n=>{this.allEncryptionValues=n;const t=this.getBackend(n,Me.SSE_KMS),_=this.getBackend(n,Me.SSE_S3);this.disableCreate=t&&_,this.encryptionConfigValues=this.flattenData(n)})}static{this.\u0275fac=function(t){return new(t||Jn)(e.\u0275\u0275directiveInject(b.NgbActiveModal),e.\u0275\u0275directiveInject(M.Ss),e.\u0275\u0275directiveInject(Le.c),e.\u0275\u0275directiveInject(be.v),e.\u0275\u0275directiveInject(Vt.B))}}static{this.\u0275cmp=e.\u0275\u0275defineComponent({type:Jn,selectors:[["cd-rgw-configuration-page"]],viewQuery:function(t,_){if(1&t&&e.\u0275\u0275viewQuery(ae.O,5),2&t){let i;e.\u0275\u0275queryRefresh(i=e.\u0275\u0275loadQuery())&&(_.table=i.first)}},outputs:{submitAction:"submitAction"},features:[e.\u0275\u0275InheritDefinitionFeature],decls:7,vars:1,consts:()=>{let n;return n=$localize`:␟01060c9a2603a0408e2617d29bad4317ce75820a␟8720119090412377896:Server-side Encryption`,[["nav","ngbNav"],["table",""],n,["ngbNav","",1,"nav-tabs"],["ngbNavItem",""],["ngbNavLink",""],["ngbNavContent",""],[3,"ngbNavOutlet"],["identifier","unique_id","columnMode","flex","selectionType","single",3,"fetchData","updateSelection","setExpandedRow","data","columns","forceIdentifier","hasDetails"],[1,"table-actions",3,"permission","selection","tableActions"],[3,"selection","excludeProps",4,"cdTableDetail"],[3,"selection","excludeProps"]]},template:function(t,_){if(1&t&&(e.\u0275\u0275elementStart(0,"nav",3,0),e.\u0275\u0275elementContainerStart(2,4),e.\u0275\u0275elementStart(3,"a",5),e.\u0275\u0275i18n(4,2),e.\u0275\u0275elementEnd(),e.\u0275\u0275template(5,mg,4,7,"ng-template",6),e.\u0275\u0275elementContainerEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275element(6,"div",7)),2&t){const i=e.\u0275\u0275reference(1);e.\u0275\u0275advance(6),e.\u0275\u0275property("ngbNavOutlet",i)}},dependencies:[ae.O,$e.j,ot.N,b.NgbNavContent,b.NgbNav,b.NgbNavItem,b.NgbNavLink,b.NgbNavLinkBase,b.NgbNavOutlet,Qn]})}}class vt{constructor(n){this.http=n,this.baseUrl="api/rgw/zonegroup",this.url=`${this.baseUrl}/storage-class`}removeStorageClass(n,t){return this.http.delete(`${this.url}/${n}/${t}`,{observe:"response"})}createStorageClass(n){return this.http.post(`${this.url}`,n)}editStorageClass(n){return this.http.put(`${this.url}`,n)}getPlacement_target(n){return this.http.get(`${this.baseUrl}/get_placement_target_by_placement_id/${n}`)}static{this.\u0275fac=function(t){return new(t||vt)(e.\u0275\u0275inject(co.HttpClient))}}static{this.\u0275prov=e.\u0275\u0275defineInjectable({token:vt,factory:vt.\u0275fac,providedIn:"root"})}}const c_=()=>({md:4});function Tg(o,n){if(1&o&&(e.\u0275\u0275elementStart(0,"tr")(1,"td",18),e.\u0275\u0275i18nStart(2,0),e.\u0275\u0275elementStart(3,"cd-helper",19),e.\u0275\u0275element(4,"span"),e.\u0275\u0275elementEnd(),e.\u0275\u0275i18nEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(5,"td"),e.\u0275\u0275text(6),e.\u0275\u0275elementEnd()()),2&o){const t=e.\u0275\u0275nextContext(2);e.\u0275\u0275advance(4),e.\u0275\u0275i18nExp(t.zoneGroupText),e.\u0275\u0275i18nApply(2),e.\u0275\u0275advance(2),e.\u0275\u0275textInterpolate(null==t.selection?null:t.selection.zonegroup_name)}}function gg(o,n){if(1&o&&(e.\u0275\u0275elementStart(0,"tr")(1,"td",18),e.\u0275\u0275i18nStart(2,1),e.\u0275\u0275elementStart(3,"cd-helper",19),e.\u0275\u0275element(4,"span"),e.\u0275\u0275elementEnd(),e.\u0275\u0275i18nEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(5,"td"),e.\u0275\u0275text(6),e.\u0275\u0275elementEnd()()),2&o){const t=e.\u0275\u0275nextContext(2);e.\u0275\u0275advance(6),e.\u0275\u0275textInterpolate(null==t.selection?null:t.selection.placement_target)}}function Eg(o,n){if(1&o&&(e.\u0275\u0275elementStart(0,"tr")(1,"td",18),e.\u0275\u0275i18nStart(2,2),e.\u0275\u0275elementStart(3,"cd-helper",19),e.\u0275\u0275element(4,"span"),e.\u0275\u0275elementEnd(),e.\u0275\u0275i18nEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(5,"td"),e.\u0275\u0275text(6),e.\u0275\u0275elementEnd()()),2&o){const t=e.\u0275\u0275nextContext(2);e.\u0275\u0275advance(4),e.\u0275\u0275i18nExp(t.targetPathText),e.\u0275\u0275i18nApply(2),e.\u0275\u0275advance(2),e.\u0275\u0275textInterpolate(null==t.selection?null:t.selection.target_path)}}function Rg(o,n){if(1&o&&(e.\u0275\u0275elementStart(0,"tr")(1,"td",18),e.\u0275\u0275i18nStart(2,3),e.\u0275\u0275elementStart(3,"cd-helper",19),e.\u0275\u0275element(4,"span"),e.\u0275\u0275elementEnd(),e.\u0275\u0275i18nEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(5,"td")(6,"div",20),e.\u0275\u0275element(7,"input",21)(8,"button",22)(9,"cd-copy-2-clipboard-button",23),e.\u0275\u0275elementEnd()()()),2&o){const t=e.\u0275\u0275nextContext(2);e.\u0275\u0275advance(4),e.\u0275\u0275i18nExp(t.targetAccessKeyText),e.\u0275\u0275i18nApply(2),e.\u0275\u0275advance(2),e.\u0275\u0275property("columnNumbers",e.\u0275\u0275pureFunction0(3,c_)),e.\u0275\u0275advance(),e.\u0275\u0275property("value",null==t.selection?null:t.selection.access_key)}}function Cg(o,n){if(1&o&&(e.\u0275\u0275elementStart(0,"tr")(1,"td",18),e.\u0275\u0275i18nStart(2,4),e.\u0275\u0275elementStart(3,"cd-helper",19),e.\u0275\u0275element(4,"span"),e.\u0275\u0275elementEnd(),e.\u0275\u0275i18nEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(5,"td")(6,"div",20),e.\u0275\u0275element(7,"input",24)(8,"button",25)(9,"cd-copy-2-clipboard-button",26),e.\u0275\u0275elementEnd()()()),2&o){const t=e.\u0275\u0275nextContext(2);e.\u0275\u0275advance(4),e.\u0275\u0275i18nExp(t.targetSecretKeyText),e.\u0275\u0275i18nApply(2),e.\u0275\u0275advance(2),e.\u0275\u0275property("columnNumbers",e.\u0275\u0275pureFunction0(3,c_)),e.\u0275\u0275advance(),e.\u0275\u0275property("value",null==t.selection?null:t.selection.secret)}}function fg(o,n){if(1&o&&(e.\u0275\u0275elementStart(0,"tr")(1,"td",18),e.\u0275\u0275i18nStart(2,5),e.\u0275\u0275elementStart(3,"cd-helper",19),e.\u0275\u0275element(4,"span"),e.\u0275\u0275elementEnd(),e.\u0275\u0275i18nEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(5,"td"),e.\u0275\u0275text(6),e.\u0275\u0275elementEnd()()),2&o){const t=e.\u0275\u0275nextContext(2);e.\u0275\u0275advance(4),e.\u0275\u0275i18nExp(t.hostStyleText),e.\u0275\u0275i18nApply(2),e.\u0275\u0275advance(2),e.\u0275\u0275textInterpolate(null==t.selection?null:t.selection.host_style)}}function Sg(o,n){if(1&o&&(e.\u0275\u0275elementStart(0,"tr")(1,"td",18),e.\u0275\u0275i18nStart(2,6),e.\u0275\u0275elementStart(3,"cd-helper",19),e.\u0275\u0275element(4,"span"),e.\u0275\u0275elementEnd(),e.\u0275\u0275i18nEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(5,"td"),e.\u0275\u0275text(6),e.\u0275\u0275elementEnd()()),2&o){const t=e.\u0275\u0275nextContext(2);e.\u0275\u0275advance(4),e.\u0275\u0275i18nExp(t.retainHeadObjectText),e.\u0275\u0275i18nApply(2),e.\u0275\u0275advance(2),e.\u0275\u0275textInterpolate(null!=t.selection&&t.selection.retain_head_object?"Enabled":"Disabled")}}function Fg(o,n){if(1&o&&(e.\u0275\u0275elementStart(0,"tr")(1,"td",18),e.\u0275\u0275i18nStart(2,7),e.\u0275\u0275elementStart(3,"cd-helper",19),e.\u0275\u0275element(4,"span"),e.\u0275\u0275elementEnd(),e.\u0275\u0275i18nEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(5,"td"),e.\u0275\u0275text(6),e.\u0275\u0275elementEnd()()),2&o){const t=e.\u0275\u0275nextContext(2);e.\u0275\u0275advance(4),e.\u0275\u0275i18nExp(t.allowReadThroughText),e.\u0275\u0275i18nApply(2),e.\u0275\u0275advance(2),e.\u0275\u0275textInterpolate(null!=t.selection&&t.selection.allow_read_through?"Enabled":"Disabled")}}function Mg(o,n){if(1&o&&(e.\u0275\u0275elementStart(0,"tr")(1,"td",18),e.\u0275\u0275i18nStart(2,8),e.\u0275\u0275elementStart(3,"cd-helper",19),e.\u0275\u0275element(4,"span"),e.\u0275\u0275elementEnd(),e.\u0275\u0275i18nEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(5,"td"),e.\u0275\u0275text(6),e.\u0275\u0275elementEnd()()),2&o){const t=e.\u0275\u0275nextContext(3);e.\u0275\u0275advance(4),e.\u0275\u0275i18nExp(t.readthroughrestoreDaysText),e.\u0275\u0275i18nApply(2),e.\u0275\u0275advance(2),e.\u0275\u0275textInterpolate(null==t.selection?null:t.selection.read_through_restore_days)}}function Pg(o,n){if(1&o&&e.\u0275\u0275template(0,Mg,7,2,"tr",14),2&o){const t=e.\u0275\u0275nextContext(2);e.\u0275\u0275property("ngIf",t.isTierMatch(t.TIER_TYPE_DISPLAY.CLOUD_TIER,t.TIER_TYPE_DISPLAY.GLACIER)&&(null==t.selection?null:t.selection.allow_read_through))}}function Ig(o,n){if(1&o&&(e.\u0275\u0275elementStart(0,"tr")(1,"td",18),e.\u0275\u0275i18nStart(2,9),e.\u0275\u0275elementStart(3,"cd-helper",19),e.\u0275\u0275element(4,"span"),e.\u0275\u0275elementEnd(),e.\u0275\u0275i18nEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(5,"td"),e.\u0275\u0275text(6),e.\u0275\u0275elementEnd()()),2&o){const t=e.\u0275\u0275nextContext(2);e.\u0275\u0275advance(4),e.\u0275\u0275i18nExp(t.glacierRestoreDayText),e.\u0275\u0275i18nApply(2),e.\u0275\u0275advance(2),e.\u0275\u0275textInterpolate(null==t.selection?null:t.selection.glacier_restore_days)}}function Og(o,n){if(1&o&&(e.\u0275\u0275elementStart(0,"tr")(1,"td",18),e.\u0275\u0275i18nStart(2,10),e.\u0275\u0275elementStart(3,"cd-helper",19),e.\u0275\u0275element(4,"span"),e.\u0275\u0275elementEnd(),e.\u0275\u0275i18nEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(5,"td"),e.\u0275\u0275text(6),e.\u0275\u0275elementEnd()()),2&o){const t=e.\u0275\u0275nextContext(2);e.\u0275\u0275advance(4),e.\u0275\u0275i18nExp(t.glacierRestoreTiertypeText),e.\u0275\u0275i18nApply(2),e.\u0275\u0275advance(2),e.\u0275\u0275textInterpolate(null==t.selection?null:t.selection.glacier_restore_tier_type)}}function Gg(o,n){if(1&o&&(e.\u0275\u0275elementStart(0,"tr")(1,"td",18),e.\u0275\u0275i18nStart(2,11),e.\u0275\u0275elementStart(3,"cd-helper",19),e.\u0275\u0275element(4,"span"),e.\u0275\u0275elementEnd(),e.\u0275\u0275i18nEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(5,"td"),e.\u0275\u0275text(6),e.\u0275\u0275elementEnd()()),2&o){const t=e.\u0275\u0275nextContext(2);e.\u0275\u0275advance(4),e.\u0275\u0275i18nExp(t.restoreStorageClassText),e.\u0275\u0275i18nApply(2),e.\u0275\u0275advance(2),e.\u0275\u0275textInterpolate(null==t.selection?null:t.selection.restore_storage_class)}}function Ng(o,n){if(1&o&&(e.\u0275\u0275elementStart(0,"tr")(1,"td",18),e.\u0275\u0275i18nStart(2,12),e.\u0275\u0275elementStart(3,"cd-helper",19),e.\u0275\u0275element(4,"span"),e.\u0275\u0275elementEnd(),e.\u0275\u0275i18nEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(5,"td"),e.\u0275\u0275text(6),e.\u0275\u0275pipe(7,"dimlessBinary"),e.\u0275\u0275elementEnd()()),2&o){const t=e.\u0275\u0275nextContext(2);e.\u0275\u0275advance(4),e.\u0275\u0275i18nExp(t.multipartMinPartText),e.\u0275\u0275i18nApply(2),e.\u0275\u0275advance(2),e.\u0275\u0275textInterpolate(e.\u0275\u0275pipeBind1(7,2,null==t.selection?null:t.selection.multipart_min_part_size))}}function Ag(o,n){if(1&o&&(e.\u0275\u0275elementStart(0,"tr")(1,"td",18),e.\u0275\u0275i18nStart(2,13),e.\u0275\u0275elementStart(3,"cd-helper",19),e.\u0275\u0275element(4,"span"),e.\u0275\u0275elementEnd(),e.\u0275\u0275i18nEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(5,"td"),e.\u0275\u0275text(6),e.\u0275\u0275pipe(7,"dimlessBinary"),e.\u0275\u0275elementEnd()()),2&o){const t=e.\u0275\u0275nextContext(2);e.\u0275\u0275advance(4),e.\u0275\u0275i18nExp(t.multipartSyncThreholdText),e.\u0275\u0275i18nApply(2),e.\u0275\u0275advance(2),e.\u0275\u0275textInterpolate(e.\u0275\u0275pipeBind1(7,2,null==t.selection?null:t.selection.multipart_sync_threshold))}}function hg(o,n){if(1&o&&(e.\u0275\u0275elementContainerStart(0),e.\u0275\u0275elementStart(1,"cds-tabs",15)(2,"cds-tab",16)(3,"table",17)(4,"tbody"),e.\u0275\u0275template(5,Tg,7,2,"tr")(6,gg,7,1,"tr")(7,Eg,7,2,"tr")(8,Rg,10,4,"tr")(9,Cg,10,4,"tr")(10,fg,7,2,"tr")(11,Sg,7,2,"tr")(12,Fg,7,2,"tr")(13,Pg,1,1,"tr")(14,Ig,7,2,"tr")(15,Og,7,2,"tr")(16,Gg,7,2,"tr")(17,Ng,8,4,"tr")(18,Ag,8,4,"tr"),e.\u0275\u0275elementEnd()()()(),e.\u0275\u0275elementContainerEnd()),2&o){const t=e.\u0275\u0275nextContext();e.\u0275\u0275advance(5),e.\u0275\u0275conditional(t.isTierMatch(t.TIER_TYPE_DISPLAY.LOCAL)?5:-1),e.\u0275\u0275advance(),e.\u0275\u0275conditional(t.isTierMatch(t.TIER_TYPE_DISPLAY.LOCAL)?6:-1),e.\u0275\u0275advance(),e.\u0275\u0275conditional(t.isTierMatch(t.TIER_TYPE_DISPLAY.CLOUD_TIER,t.TIER_TYPE_DISPLAY.GLACIER)?7:-1),e.\u0275\u0275advance(),e.\u0275\u0275conditional(t.isTierMatch(t.TIER_TYPE_DISPLAY.CLOUD_TIER,t.TIER_TYPE_DISPLAY.GLACIER)?8:-1),e.\u0275\u0275advance(),e.\u0275\u0275conditional(t.isTierMatch(t.TIER_TYPE_DISPLAY.CLOUD_TIER,t.TIER_TYPE_DISPLAY.GLACIER)?9:-1),e.\u0275\u0275advance(),e.\u0275\u0275conditional(t.isTierMatch(t.TIER_TYPE_DISPLAY.CLOUD_TIER,t.TIER_TYPE_DISPLAY.GLACIER)?10:-1),e.\u0275\u0275advance(),e.\u0275\u0275conditional(t.isTierMatch(t.TIER_TYPE_DISPLAY.CLOUD_TIER,t.TIER_TYPE_DISPLAY.GLACIER)?11:-1),e.\u0275\u0275advance(),e.\u0275\u0275conditional(t.isTierMatch(t.TIER_TYPE_DISPLAY.CLOUD_TIER,t.TIER_TYPE_DISPLAY.GLACIER)?12:-1),e.\u0275\u0275advance(),e.\u0275\u0275conditional(t.isTierMatch(t.TIER_TYPE_DISPLAY.CLOUD_TIER,t.TIER_TYPE_DISPLAY.GLACIER)&&null!=t.selection&&t.selection.allow_read_through?13:-1),e.\u0275\u0275advance(),e.\u0275\u0275conditional(t.isTierMatch(t.TIER_TYPE_DISPLAY.GLACIER)?14:-1),e.\u0275\u0275advance(),e.\u0275\u0275conditional(t.isTierMatch(t.TIER_TYPE_DISPLAY.GLACIER)?15:-1),e.\u0275\u0275advance(),e.\u0275\u0275conditional(t.isTierMatch(t.TIER_TYPE_DISPLAY.CLOUD_TIER,t.TIER_TYPE_DISPLAY.GLACIER)?16:-1),e.\u0275\u0275advance(),e.\u0275\u0275conditional(t.isTierMatch(t.TIER_TYPE_DISPLAY.CLOUD_TIER,t.TIER_TYPE_DISPLAY.GLACIER)?17:-1),e.\u0275\u0275advance(),e.\u0275\u0275conditional(t.isTierMatch(t.TIER_TYPE_DISPLAY.CLOUD_TIER,t.TIER_TYPE_DISPLAY.GLACIER)?18:-1)}}class eo{constructor(){this.columns=[],this.allowReadThroughText=Lo,this.retainHeadObjectText=wo,this.multipartMinPartText=yo,this.multipartSyncThreholdText=$o,this.targetAccessKeyText=Wo,this.targetSecretKeyText=xo,this.targetPathText=Do,this.hostStyleText="The URL format for accessing the remote S3 endpoint:\n  - 'Path': Use for a path-based URL\n  - 'Virtual': Use for a domain-based URL",this.TIER_TYPE_DISPLAY=nt,this.TIER_TYPE=K,this.glacierRestoreDayText=ko,this.glacierRestoreTiertypeText=zo,this.restoreDaysText=Xo,this.readthroughrestoreDaysText=Bo,this.restoreStorageClassText=Vo,this.zoneGroupText=Da}ngOnChanges(){this.selection&&(this.storageDetails={zonegroup_name:this.selection.zonegroup_name,placement_targets:this.selection.placement_targets,access_key:this.selection.access_key,secret:this.selection.secret,target_path:this.selection.target_path,tier_type:this.selection.tier_type,multipart_min_part_size:this.selection.multipart_min_part_size,multipart_sync_threshold:this.selection.multipart_sync_threshold,host_style:this.selection.host_style,retain_head_object:this.selection.retain_head_object,allow_read_through:this.selection.allow_read_through,glacier_restore_days:this.selection.glacier_restore_days,glacier_restore_tier_type:this.selection.glacier_restore_tier_type,restore_storage_class:this.selection.restore_storage_class,read_through_restore_days:this.selection.read_through_restore_days})}isTierMatch(...n){const t=this.selection.tier_type?.toLowerCase();return n.some(_=>_.toLowerCase()===t)}static{this.\u0275fac=function(t){return new(t||eo)}}static{this.\u0275cmp=e.\u0275\u0275defineComponent({type:eo,selectors:[["cd-rgw-storage-class-details"]],inputs:{selection:"selection"},features:[e.\u0275\u0275NgOnChangesFeature],decls:1,vars:1,consts:()=>{let n,t,_,i,a,r,s,d,u,m,C,O,f,I;return n=$localize`:␟888bc7bcdc78a9e93f4f8744c9490b64beecc0b4␟7480775183875718744: Zone Group ${"\ufffd#3\ufffd"}:START_TAG_CD_HELPER:${"\ufffd#4\ufffd"}:START_TAG_SPAN: ${"\ufffd0\ufffd"}:INTERPOLATION: ${"\ufffd/#4\ufffd"}:CLOSE_TAG_SPAN:${"\ufffd/#3\ufffd"}:CLOSE_TAG_CD_HELPER:`,t=$localize`:␟62dcc9425e4c09389d88360951b28f4c4eb9469b␟7690603667706191792: Placement Target ${"\ufffd#3\ufffd"}:START_TAG_CD_HELPER:${"\ufffd#4\ufffd"}:START_TAG_SPAN: Placement Target defines the destination and rules for moving objects between storage tiers. ${"\ufffd/#4\ufffd"}:CLOSE_TAG_SPAN:${"\ufffd/#3\ufffd"}:CLOSE_TAG_CD_HELPER:`,_=$localize`:␟47e314ea42849ecd9011370c47b7a099c9757166␟4367963135520672581: Target Path ${"\ufffd#3\ufffd"}:START_TAG_CD_HELPER:${"\ufffd#4\ufffd"}:START_TAG_SPAN: ${"\ufffd0\ufffd"}:INTERPOLATION: ${"\ufffd/#4\ufffd"}:CLOSE_TAG_SPAN:${"\ufffd/#3\ufffd"}:CLOSE_TAG_CD_HELPER:`,i=$localize`:␟fb5f3056c9444c4865ee50f2e6c5193652077198␟7154699169488846912: Access key ${"\ufffd#3\ufffd"}:START_TAG_CD_HELPER:${"\ufffd#4\ufffd"}:START_TAG_SPAN: ${"\ufffd0\ufffd"}:INTERPOLATION: ${"\ufffd/#4\ufffd"}:CLOSE_TAG_SPAN:${"\ufffd/#3\ufffd"}:CLOSE_TAG_CD_HELPER:`,a=$localize`:␟c8eedc31db0984cde0352890c40883756fa26087␟309661859672761389: Secret key ${"\ufffd#3\ufffd"}:START_TAG_CD_HELPER:${"\ufffd#4\ufffd"}:START_TAG_SPAN: ${"\ufffd0\ufffd"}:INTERPOLATION: ${"\ufffd/#4\ufffd"}:CLOSE_TAG_SPAN:${"\ufffd/#3\ufffd"}:CLOSE_TAG_CD_HELPER:`,r=$localize`:␟2fe4bc55fdee409a7bfe0ab9635adb3c146485d7␟1669180274531599883: Host Style ${"\ufffd#3\ufffd"}:START_TAG_CD_HELPER:${"\ufffd#4\ufffd"}:START_TAG_SPAN:${"\ufffd0\ufffd"}:INTERPOLATION:${"\ufffd/#4\ufffd"}:CLOSE_TAG_SPAN:${"\ufffd/#3\ufffd"}:CLOSE_TAG_CD_HELPER:`,s=$localize`:␟1a5a2d7e90bd7b3d7e3f61f82872c674e0457217␟7434312508341529343: Head Object (Stub File) ${"\ufffd#3\ufffd"}:START_TAG_CD_HELPER:${"\ufffd#4\ufffd"}:START_TAG_SPAN: ${"\ufffd0\ufffd"}:INTERPOLATION:${"\ufffd/#4\ufffd"}:CLOSE_TAG_SPAN:${"\ufffd/#3\ufffd"}:CLOSE_TAG_CD_HELPER:`,d=$localize`:␟e1833242b4b36cfa9b2ab7c9862650d0e63c1c2b␟688372644132737292: Allow Read Through ${"\ufffd#3\ufffd"}:START_TAG_CD_HELPER:${"\ufffd#4\ufffd"}:START_TAG_SPAN: ${"\ufffd0\ufffd"}:INTERPOLATION: ${"\ufffd/#4\ufffd"}:CLOSE_TAG_SPAN:${"\ufffd/#3\ufffd"}:CLOSE_TAG_CD_HELPER:`,u=$localize`:␟2c919b991c1bc1d98b62f5402b27caf2b29087ed␟1514383391957575386: Read through Restore Days ${"\ufffd#3\ufffd"}:START_TAG_CD_HELPER:${"\ufffd#4\ufffd"}:START_TAG_SPAN: ${"\ufffd0\ufffd"}:INTERPOLATION: ${"\ufffd/#4\ufffd"}:CLOSE_TAG_SPAN:${"\ufffd/#3\ufffd"}:CLOSE_TAG_CD_HELPER:`,m=$localize`:␟f676db14650a280197b30b43c38af70bd53745af␟8699164850113267233: Glacier Restore Days ${"\ufffd#3\ufffd"}:START_TAG_CD_HELPER:${"\ufffd#4\ufffd"}:START_TAG_SPAN: ${"\ufffd0\ufffd"}:INTERPOLATION: ${"\ufffd/#4\ufffd"}:CLOSE_TAG_SPAN:${"\ufffd/#3\ufffd"}:CLOSE_TAG_CD_HELPER:`,C=$localize`:␟f325c27e05bd99736c54ffd55ff5b6f3d919ebb7␟8331977894026353322: Glacier Restore Tier Type ${"\ufffd#3\ufffd"}:START_TAG_CD_HELPER:${"\ufffd#4\ufffd"}:START_TAG_SPAN: ${"\ufffd0\ufffd"}:INTERPOLATION: ${"\ufffd/#4\ufffd"}:CLOSE_TAG_SPAN:${"\ufffd/#3\ufffd"}:CLOSE_TAG_CD_HELPER:`,O=$localize`:␟6f4ada25abed8d41c5a35f37631883a56b491733␟1743044577221539733: Restore Storage Class ${"\ufffd#3\ufffd"}:START_TAG_CD_HELPER:${"\ufffd#4\ufffd"}:START_TAG_SPAN: ${"\ufffd0\ufffd"}:INTERPOLATION: ${"\ufffd/#4\ufffd"}:CLOSE_TAG_SPAN:${"\ufffd/#3\ufffd"}:CLOSE_TAG_CD_HELPER:`,f=$localize`:␟2206e1948f227909fc48b8216bc3134b63505db8␟6654359571651939044: Multipart Minimum Part Size ${"\ufffd#3\ufffd"}:START_TAG_CD_HELPER:${"\ufffd#4\ufffd"}:START_TAG_SPAN: ${"\ufffd0\ufffd"}:INTERPOLATION: ${"\ufffd/#4\ufffd"}:CLOSE_TAG_SPAN:${"\ufffd/#3\ufffd"}:CLOSE_TAG_CD_HELPER:`,I=$localize`:␟57a0b56398aaa8fba27c03b1baf01341a9113c9d␟4253492981773815805: Multipart Sync Threshold ${"\ufffd#3\ufffd"}:START_TAG_CD_HELPER:${"\ufffd#4\ufffd"}:START_TAG_SPAN: ${"\ufffd0\ufffd"}:INTERPOLATION: ${"\ufffd/#4\ufffd"}:CLOSE_TAG_SPAN:${"\ufffd/#3\ufffd"}:CLOSE_TAG_CD_HELPER:`,[n,t,_,i,a,r,s,d,u,m,C,O,f,I,[4,"ngIf"],["type","contained","theme","light"],["heading","Details"],["data-testid","rgw-storage-details",1,"cds--data-table--sort","cds--data-table--no-border","cds--data-table","cds--data-table--md"],[1,"bold"],[1,"text-pre-wrap"],["cdsCol","",1,"d-flex",3,"columnNumbers"],["cdsPassword","","type","password","readonly","","id","access_key",3,"value"],["type","button","cdPasswordButton","access_key",1,"btn","btn-light"],["source","access_key"],["cdsPassword","","type","password","readonly","","id","secret",3,"value"],["type","button","cdPasswordButton","secret",1,"btn","btn-light"],["source","secret"]]},template:function(t,_){1&t&&e.\u0275\u0275template(0,hg,19,14,"ng-container",14),2&t&&e.\u0275\u0275property("ngIf",!!_.selection)},dependencies:[g.NgIf,Ot.m,_t.N,e_.h,j.S,c.ColumnDirective,c.PasswordInput,c.Tabs,c.Tab,xt.l]})}}function bg(o,n){if(1&o&&e.\u0275\u0275element(0,"cd-rgw-storage-class-details",5),2&o){const t=e.\u0275\u0275nextContext();e.\u0275\u0275property("selection",t.expandedRow)}}class to extends et.D{constructor(n,t,_,i,a,r,s,d){super(),this.rgwZonegroupService=n,this.actionLabels=t,this.cdsModalService=_,this.taskWrapper=i,this.authStorageService=a,this.rgwStorageClassService=r,this.router=s,this.urlBuilder=d,this.selection=new Ge.y,this.storageClassList=[],this.permission=this.authStorageService.getPermissions().rgw}ngOnInit(){this.columns=[{prop:"uniqueId",isInvisible:!0,isHidden:!0},{name:$localize`Storage Class`,prop:"storage_class",flexGrow:2},{name:$localize`Type`,prop:"tier_type",flexGrow:2},{name:$localize`Zone Group`,prop:"zonegroup_name",flexGrow:2},{name:$localize`Placement Target`,prop:"placement_target",flexGrow:2},{name:$localize`Target Region`,prop:"region",flexGrow:2},{name:$localize`Target Endpoint`,prop:"endpoint",flexGrow:2}];const n=()=>this.selection.first()&&`${encodeURI(this.selection.first().zonegroup_name)}/${encodeURI(this.selection.first().placement_target)}/${encodeURI(this.selection.first().storage_class)}`;this.tableActions=[{name:this.actionLabels.CREATE,permission:"create",icon:L.FI.add,click:()=>this.router.navigate([this.urlBuilder.getCreate()]),canBePrimary:t=>!t.hasSelection},{name:this.actionLabels.EDIT,permission:"update",icon:L.FI.edit,routerLink:()=>[`/rgw/tiering/edit/${n()}`]},{name:this.actionLabels.REMOVE,permission:"delete",icon:L.FI.destroy,click:()=>this.removeStorageClassModal()}]}loadStorageClass(){return new Promise((n,t)=>{this.rgwZonegroupService.getAllZonegroupsInfo().subscribe(_=>{this.storageClassList=[];const a=Zo.filterAndMapTierTargets(_).map(r=>({...r,tier_type:this.mapTierTypeDisplay(r.tier_type)}));this.transformTierData(a),this.storageClassList.push(...a),n()},_=>{t(_)})})}mapTierTypeDisplay(n){switch(n?.toLowerCase()){case K.CLOUD_TIER:return nt.CLOUD_TIER;case K.LOCAL:return nt.LOCAL;case K.GLACIER:return nt.GLACIER;default:return n}}transformTierData(n){return n.forEach((t,_)=>{const i=t?.zone_group,a=t?.storage_class,r=`${i}-${a}-${_}`;t.uniqueId=r}),n}removeStorageClassModal(){const n=this.selection.first().storage_class,t=this.selection.first().placement_target;this.cdsModalService.show(Ue.D,{itemDescription:$localize`Tiering Storage Class`,itemNames:[n],actionDescription:"remove",submitActionObservable:()=>this.taskWrapper.wrapTaskAroundCall({task:new Ft.O("rgw/zonegroup/storage-class",{placement_target:t,storage_class:n}),call:this.rgwStorageClassService.removeStorageClass(t,n)})})}updateSelection(n){this.selection=n}setExpandedRow(n){super.setExpandedRow(n)}static{this.\u0275fac=function(t){return new(t||to)(e.\u0275\u0275directiveInject(ke.Z),e.\u0275\u0275directiveInject(M.Ss),e.\u0275\u0275directiveInject(he.V),e.\u0275\u0275directiveInject(Nt.a),e.\u0275\u0275directiveInject(be.v),e.\u0275\u0275directiveInject(vt),e.\u0275\u0275directiveInject(Y.Router),e.\u0275\u0275directiveInject(se.E))}}static{this.\u0275cmp=e.\u0275\u0275defineComponent({type:to,selectors:[["cd-rgw-storage-class-list"]],features:[e.\u0275\u0275ProvidersFeature([{provide:se.E,useValue:new se.E("rgw/tiering")}]),e.\u0275\u0275InheritDefinitionFeature],decls:7,vars:7,consts:()=>{let n;return n=$localize`:␟eb1847d2bd294cee686c7799edbc590706c2c2bf␟418179534334780072: A storage class for tiering defines the policies for automatically moving objects between different storage tiers. `,[n,["columnMode","flex","identifier","uniqueId","selectionType","single",3,"fetchData","setExpandedRow","updateSelection","data","columns","forceIdentifier","hasDetails"],[1,"table-actions"],[1,"btn-group",3,"permission","selection","tableActions"],[3,"selection",4,"cdTableDetail"],[3,"selection"]]},template:function(t,_){1&t&&(e.\u0275\u0275elementStart(0,"legend")(1,"cd-help-text"),e.\u0275\u0275i18n(2,0),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(3,"cd-table",1),e.\u0275\u0275listener("fetchData",function(){return _.loadStorageClass()})("setExpandedRow",function(a){return _.setExpandedRow(a)})("updateSelection",function(a){return _.updateSelection(a)}),e.\u0275\u0275elementStart(4,"div",2),e.\u0275\u0275element(5,"cd-table-actions",3),e.\u0275\u0275elementEnd(),e.\u0275\u0275template(6,bg,1,1,"cd-rgw-storage-class-details",4),e.\u0275\u0275elementEnd()),2&t&&(e.\u0275\u0275advance(3),e.\u0275\u0275property("data",_.storageClassList)("columns",_.columns)("forceIdentifier",!0)("hasDetails",!0),e.\u0275\u0275advance(2),e.\u0275\u0275property("permission",_.permission)("selection",_.selection)("tableActions",_.tableActions))},dependencies:[ie.O,ae.O,$e.j,ot.N,eo]})}}var Lg={elem:"svg",attrs:{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 32",fill:"currentColor",width:16,height:16},content:[{elem:"path",attrs:{d:"M2 26H30V28H2zM25.4 9c.8-.8.8-2 0-2.8 0 0 0 0 0 0l-3.6-3.6c-.8-.8-2-.8-2.8 0 0 0 0 0 0 0l-15 15V24h6.4L25.4 9zM20.4 4L24 7.6l-3 3L17.4 7 20.4 4zM6 22v-3.6l10-10 3.6 3.6-10 10H6z"}}],name:"edit",size:16},yg={elem:"svg",attrs:{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 32",fill:"currentColor",width:20,height:20},content:[{elem:"path",attrs:{d:"M20,16a5,5,0,0,0,10,0,1,1,0,0,0-.1055-.4473L25.896,7.5562a.8913.8913,0,0,0-.0454-.0816A1,1,0,0,0,25,7H18.8218A3.0155,3.0155,0,0,0,17,5.1841V2H15V5.1841A3.0155,3.0155,0,0,0,13.1782,7H7a1,1,0,0,0-.8945.5527l-4,8A1,1,0,0,0,2,16a5,5,0,0,0,10,0,1,1,0,0,0-.1055-.4473L8.6182,9h4.56A3.0147,3.0147,0,0,0,15,10.8154V28H6v2H26V28H17V10.8159A3.0155,3.0155,0,0,0,18.8218,9h4.56l-3.2763,6.5527A1,1,0,0,0,20,16ZM7,19a2.9958,2.9958,0,0,1-2.8152-2h5.63A2.9956,2.9956,0,0,1,7,19Zm2.3821-4H4.6179L7,10.2363ZM16,9a1,1,0,1,1,1-1A1.0009,1.0009,0,0,1,16,9Zm9,10a2.9958,2.9958,0,0,1-2.8152-2h5.63A2.9956,2.9956,0,0,1,25,19Zm0-8.7637L27.3821,15H22.6179Z"}}],name:"scales",size:20},$g={elem:"svg",attrs:{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 16 16",fill:"currentColor",width:16,height:16},content:[{elem:"path",attrs:{d:"M8 2c1.4 0 2.5 1.1 2.5 2.5S9.4 7 8 7 5.5 5.9 5.5 4.5 6.6 2 8 2M8 1C6.1 1 4.5 2.6 4.5 4.5S6.1 8 8 8s3.5-1.6 3.5-3.5S9.9 1 8 1zM13 15h-1v-2.5c0-1.4-1.1-2.5-2.5-2.5h-3C5.1 10 4 11.1 4 12.5V15H3v-2.5C3 10.6 4.6 9 6.5 9h3c1.9 0 3.5 1.6 3.5 3.5V15z"}}],name:"user",size:16},Dg={elem:"svg",attrs:{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 32",fill:"currentColor",width:20,height:20},content:[{elem:"path",attrs:{d:"M28.5039,8.1362l-12-7a1,1,0,0,0-1.0078,0l-12,7A1,1,0,0,0,3,9V23a1,1,0,0,0,.4961.8638l12,7a1,1,0,0,0,1.0078,0l12-7A1,1,0,0,0,29,23V9A1,1,0,0,0,28.5039,8.1362ZM16,3.1577,26.0156,9,16,14.8423,5.9844,9ZM5,10.7412l10,5.833V28.2588L5,22.4258ZM17,28.2588V16.5742l10-5.833V22.4258Z"}}],name:"cube",size:20},Wg={elem:"svg",attrs:{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 32",fill:"currentColor",width:16,height:16},content:[{elem:"path",attrs:{d:"M23,20a5,5,0,0,0-3.89,1.89L11.8,17.32a4.46,4.46,0,0,0,0-2.64l7.31-4.57A5,5,0,1,0,18,7a4.79,4.79,0,0,0,.2,1.32l-7.31,4.57a5,5,0,1,0,0,6.22l7.31,4.57A4.79,4.79,0,0,0,18,25a5,5,0,1,0,5-5ZM23,4a3,3,0,1,1-3,3A3,3,0,0,1,23,4ZM7,19a3,3,0,1,1,3-3A3,3,0,0,1,7,19Zm16,9a3,3,0,1,1,3-3A3,3,0,0,1,23,28Z"}}],name:"share",size:16},xg=T(22164),wg={elem:"svg",attrs:{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 32",fill:"currentColor",width:16,height:16},content:[{elem:"path",attrs:{d:"M21,2a8.9977,8.9977,0,0,0-8.6119,11.6118L2,24v6H8L18.3881,19.6118A9,9,0,1,0,21,2Zm0,16a7.0125,7.0125,0,0,1-2.0322-.3022L17.821,17.35l-.8472.8472-3.1811,3.1812L12.4141,20,11,21.4141l1.3787,1.3786-1.5859,1.586L9.4141,23,8,24.4141l1.3787,1.3786L7.1716,28H4V24.8284l9.8023-9.8023.8472-.8474-.3473-1.1467A7,7,0,1,1,21,18Z"}},{elem:"circle",attrs:{cx:"22",cy:"10",r:"2"}}],name:"password",size:16},Ug={elem:"svg",attrs:{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 16 16",fill:"currentColor",width:16,height:16},content:[{elem:"path",attrs:{d:"M12.3 9.3L8.5 13.1 8.5 1 7.5 1 7.5 13.1 3.7 9.3 3 10 8 15 13 10z"}}],name:"arrow--down",size:16},kg=T(29376),zg={elem:"svg",attrs:{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 32",fill:"currentColor",width:32,height:32},content:[{elem:"path",attrs:{d:"M12.1,2A9.8,9.8,0,0,0,6.7,3.6L13.1,10a2.1,2.1,0,0,1,.2,3,2.1,2.1,0,0,1-3-.2L3.7,6.4A9.84,9.84,0,0,0,2,12.1,10.14,10.14,0,0,0,12.1,22.2a10.9,10.9,0,0,0,2.6-.3l6.7,6.7a5,5,0,0,0,7.1-7.1l-6.7-6.7a10.9,10.9,0,0,0,.3-2.6A10,10,0,0,0,12.1,2Zm8,10.1a7.61,7.61,0,0,1-.3,2.1l-.3,1.1.8.8L27,22.8a2.88,2.88,0,0,1,.9,2.1A2.72,2.72,0,0,1,27,27a2.9,2.9,0,0,1-4.2,0l-6.7-6.7-.8-.8-1.1.3a7.61,7.61,0,0,1-2.1.3,8.27,8.27,0,0,1-5.7-2.3A7.63,7.63,0,0,1,4,12.1a8.33,8.33,0,0,1,.3-2.2l4.4,4.4a4.14,4.14,0,0,0,5.9.2,4.14,4.14,0,0,0-.2-5.9L10,4.2a6.45,6.45,0,0,1,2-.3,8.27,8.27,0,0,1,5.7,2.3A8.49,8.49,0,0,1,20.1,12.1Z"}}],name:"tools",size:32},Hg={elem:"svg",attrs:{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 32",fill:"currentColor",width:20,height:20},content:[{elem:"path",attrs:{d:"M28,12a2,2,0,0,0,2-2V4a2,2,0,0,0-2-2H4A2,2,0,0,0,2,4v6a2,2,0,0,0,2,2H15v4H9a2,2,0,0,0-2,2v4H4a2,2,0,0,0-2,2v4a2,2,0,0,0,2,2h8a2,2,0,0,0,2-2V24a2,2,0,0,0-2-2H9V18H23v4H20a2,2,0,0,0-2,2v4a2,2,0,0,0,2,2h8a2,2,0,0,0,2-2V24a2,2,0,0,0-2-2H25V18a2,2,0,0,0-2-2H17V12ZM12,28H4V24h8Zm16,0H20V24h8ZM4,4H28v6H4Z"}}],name:"parent-child",size:20},Xg={elem:"svg",attrs:{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 32",fill:"currentColor",width:16,height:16},content:[{elem:"path",attrs:{"stroke-width":"0",d:"M28 8v-3c0-2.2056-1.7944-4-4-4s-4 1.7944-4 4v3c-1.1028 0-2 .8975-2 2v6c0 1.1025.8972 2 2 2h8c1.1028 0 2-.8975 2-2v-6c0-1.1025-.8972-2-2-2zm-6-3c0-1.1025.8972-2 2-2s2 .8975 2 2v3h-4v-3zm-2 11v-6h8v6h-8zM16 30h-2v-5c-.0018-1.6561-1.3439-2.9982-3-3h-4c-1.6561.0018-2.9982 1.3439-3 3v5h-2v-5c.0033-2.7601 2.2399-4.9967 5-5h4c2.7601.0033 4.9967 2.2399 5 5v5zM9 10c1.6569 0 3 1.3431 3 3s-1.3431 3-3 3-3-1.3431-3-3 1.3431-3 3-3m0-2c-2.7614 0-5 2.2386-5 5s2.2386 5 5 5 5-2.2386 5-5-2.2386-5-5-5z"}}],name:"user--access-locked",size:16},Bg=T(26481);function Vg(o,n){if(1&o&&(e.\u0275\u0275elementStart(0,"div")(1,"legend"),e.\u0275\u0275i18n(2,0),e.\u0275\u0275elementEnd(),e.\u0275\u0275element(3,"cd-table-key-value",3),e.\u0275\u0275elementEnd()),2&o){const t=e.\u0275\u0275nextContext();e.\u0275\u0275advance(3),e.\u0275\u0275property("data",t.quota)}}function Zg(o,n){if(1&o&&(e.\u0275\u0275elementStart(0,"div")(1,"legend"),e.\u0275\u0275i18n(2,1),e.\u0275\u0275elementEnd(),e.\u0275\u0275element(3,"cd-table-key-value",3),e.\u0275\u0275elementEnd()),2&o){const t=e.\u0275\u0275nextContext();e.\u0275\u0275advance(3),e.\u0275\u0275property("data",t.bucket_quota)}}class no{constructor(n){this.dimlessBinary=n,this.quota={},this.bucket_quota={}}ngOnChanges(n){n.selection&&n.selection.currentValue&&(this.quota=this.createDisplayValues("quota"),this.bucket_quota=this.createDisplayValues("bucket_quota"))}createDisplayValues(n){return{Enabled:this.selection[n].enabled?"Yes":"No","Maximum size":this.selection[n].enabled?this.selection[n].max_size<=-1?"Unlimited":this.dimlessBinary.transform(this.selection[n].max_size):"-","Maximum objects":this.selection[n].enabled?this.selection[n].max_objects<=-1?"Unlimited":this.selection[n].max_objects:"-"}}static{this.\u0275fac=function(t){return new(t||no)(e.\u0275\u0275directiveInject(xt.l))}}static{this.\u0275cmp=e.\u0275\u0275defineComponent({type:no,selectors:[["cd-rgw-user-accounts-details"]],inputs:{selection:"selection"},features:[e.\u0275\u0275NgOnChangesFeature],decls:2,vars:2,consts:()=>{let n,t;return n=$localize`:␟880e538e48cfc97900e04fbb662e2cd87fa3fe6a␟8098052379167077731:Account quota`,t=$localize`:␟649a410bd0ace333d067d8fa22f12bdbdb43533b␟3048195452916484333:Bucket quota`,[n,t,[4,"ngIf"],[3,"data"]]},template:function(t,_){1&t&&e.\u0275\u0275template(0,Vg,4,1,"div",2)(1,Zg,4,1,"div",2),2&t&&(e.\u0275\u0275property("ngIf",_.selection.quota),e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf",_.selection.bucket_quota))},dependencies:[g.NgIf,On.i]})}}function Kg(o,n){if(1&o&&e.\u0275\u0275element(0,"cd-rgw-user-accounts-details",5),2&o){const t=e.\u0275\u0275nextContext();e.\u0275\u0275property("selection",t.expandedRow)}}const oo="rgw/accounts";class _o extends et.D{constructor(n,t,_,i,a,r,s){super(),this.authStorageService=n,this.actionLabels=t,this.router=_,this.rgwUserAccountsService=i,this.cdsModalService=a,this.taskWrapper=r,this.ngZone=s,this.tableActions=[],this.columns=[],this.accounts=[],this.selection=new Ge.y}ngOnInit(){this.permission=this.authStorageService.getPermissions().rgw,this.columns=[{name:$localize`Name`,prop:"name",flexGrow:1},{name:$localize`Tenant`,prop:"tenant",flexGrow:1},{name:$localize`Account id`,prop:"id",flexGrow:1},{name:$localize`Email address`,prop:"email",flexGrow:1},{name:$localize`Max users`,prop:"max_users",flexGrow:1,cellTransformation:He.x.map,customTemplateConfig:{"-1":$localize`Disabled`,0:$localize`Unlimited`}},{name:$localize`Max roles`,prop:"max_roles",flexGrow:1,cellTransformation:He.x.map,customTemplateConfig:{"-1":$localize`Disabled`,0:$localize`Unlimited`}},{name:$localize`Max groups`,prop:"max_groups",flexGrow:1,cellTransformation:He.x.map,customTemplateConfig:{"-1":$localize`Disabled`,0:$localize`Unlimited`}},{name:$localize`Max. buckets`,prop:"max_buckets",flexGrow:1,cellTransformation:He.x.map,customTemplateConfig:{"-1":$localize`Disabled`,0:$localize`Unlimited`}},{name:$localize`Max access keys`,prop:"max_access_keys",flexGrow:1,cellTransformation:He.x.map,customTemplateConfig:{"-1":$localize`Disabled`,0:$localize`Unlimited`}}];const n=()=>this.selection.first().groupName&&this.selection.first().id?`${M.Qp.EDIT}/${this.selection.first().id}\n        }`:`${M.Qp.EDIT}/${this.selection.first().id}`,t={permission:"create",icon:L.FI.add,click:()=>this.router.navigate([`${oo}/${M.Qp.CREATE}`]),name:this.actionLabels.CREATE,canBePrimary:a=>!a.hasSelection},_={permission:"update",icon:L.FI.edit,click:()=>this.router.navigate([`${oo}/${n()}`]),name:this.actionLabels.EDIT},i={permission:"delete",icon:L.FI.destroy,click:()=>this.deleteAction(),name:this.actionLabels.DELETE};this.tableActions=[t,_,i],this.setTableRefreshTimeout()}getAccountsList(n){this.setTableRefreshTimeout(),this.rgwUserAccountsService.list(!0).subscribe({next:t=>{this.accounts=t},error:()=>{n&&n.error()}})}updateSelection(n){this.selection=n}deleteAction(){const n=this.selection.first().name;this.cdsModalService.show(Ue.D,{itemDescription:$localize`Account`,itemNames:[n],submitActionObservable:()=>new w.Observable(t=>{this.taskWrapper.wrapTaskAroundCall({task:new Ft.O(oo,{account_names:[n]}),call:(0,w.forkJoin)(this.selection.selected.map(_=>this.rgwUserAccountsService.remove(_.id)))}).subscribe({error:_=>{t.error(_),this.table.refreshBtn()},complete:()=>{t.complete(),this.table.refreshBtn()}})})})}static{this.\u0275fac=function(t){return new(t||_o)(e.\u0275\u0275directiveInject(be.v),e.\u0275\u0275directiveInject(M.Ss),e.\u0275\u0275directiveInject(Y.Router),e.\u0275\u0275directiveInject(Je),e.\u0275\u0275directiveInject(he.V),e.\u0275\u0275directiveInject(Nt.a),e.\u0275\u0275directiveInject(e.NgZone))}}static{this.\u0275cmp=e.\u0275\u0275defineComponent({type:_o,selectors:[["cd-rgw-user-accounts"]],viewQuery:function(t,_){if(1&t&&e.\u0275\u0275viewQuery(ae.O,7),2&t){let i;e.\u0275\u0275queryRefresh(i=e.\u0275\u0275loadQuery())&&(_.table=i.first)}},features:[e.\u0275\u0275ProvidersFeature([{provide:se.E,useValue:new se.E(oo)}]),e.\u0275\u0275InheritDefinitionFeature],decls:8,vars:8,consts:()=>{let n;return n=$localize`:␟48f4d56283345f7029eeb268c053ddbb698dfd12␟4118509061602138158: User Accounts ${"\ufffd#3\ufffd"}:START_TAG_CD_HELP_TEXT: Administrators can assign unique credentials to users or applications, enabling granular access control and enhancing security across the cluster. ${"\ufffd/#3\ufffd"}:CLOSE_TAG_CD_HELP_TEXT:`,[["table",""],n,["selectionType","single","columnMode","flex","identifier","id",3,"setExpandedRow","updateSelection","fetchData","autoReload","data","columns","hasDetails","status"],[1,"table-actions",3,"permission","selection","tableActions"],[3,"selection",4,"cdTableDetail"],[3,"selection"]]},template:function(t,_){if(1&t){const i=e.\u0275\u0275getCurrentView();e.\u0275\u0275element(0,"cd-rgw-user-tabs"),e.\u0275\u0275elementStart(1,"legend"),e.\u0275\u0275i18nStart(2,1),e.\u0275\u0275element(3,"cd-help-text"),e.\u0275\u0275i18nEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(4,"cd-table",2,0),e.\u0275\u0275listener("setExpandedRow",function(r){return e.\u0275\u0275restoreView(i),e.\u0275\u0275resetView(_.setExpandedRow(r))})("updateSelection",function(r){return e.\u0275\u0275restoreView(i),e.\u0275\u0275resetView(_.updateSelection(r))})("fetchData",function(r){return e.\u0275\u0275restoreView(i),e.\u0275\u0275resetView(_.getAccountsList(r))}),e.\u0275\u0275element(6,"cd-table-actions",3),e.\u0275\u0275template(7,Kg,1,1,"cd-rgw-user-accounts-details",4),e.\u0275\u0275elementEnd()}2&t&&(e.\u0275\u0275advance(4),e.\u0275\u0275property("autoReload",!1)("data",_.accounts)("columns",_.columns)("hasDetails",!0)("status",_.tableStatus),e.\u0275\u0275advance(2),e.\u0275\u0275property("permission",_.permission)("selection",_.selection)("tableActions",_.tableActions))},dependencies:[ie.O,ae.O,$e.j,ot.N,Bt,no]})}}const qg=()=>({md:4}),jg=()=>({formControl:"max_buckets_mode"}),Yg=()=>({formControl:"max_users_mode"}),Qg=()=>({formControl:"max_roles_mode"}),Jg=()=>({formControl:"max_groups_mode"}),eE=()=>({formControl:"max_access_keys_mode"}),tE=()=>({enabled:"account_quota_enabled",unlimitedSize:"account_quota_max_size_unlimited",maxSize:"account_quota_max_size",unlimitedObjects:"account_quota_max_objects_unlimited",maxObjects:"account_quota_max_objects"}),nE=o=>({formControl:o,quotaType:"account"}),oE=()=>({enabled:"bucket_quota_enabled",unlimitedSize:"bucket_quota_max_size_unlimited",maxSize:"bucket_quota_max_size",unlimitedObjects:"bucket_quota_max_objects_unlimited",maxObjects:"bucket_quota_max_objects"}),_E=o=>({formControl:o,quotaType:"bucket"}),iE=()=>({formControl:"max_buckets"}),aE=()=>({formControl:"max_users"}),rE=()=>({formControl:"max_roles"}),lE=()=>({formControl:"max_groups"}),sE=()=>({formControl:"max_access_keys"});function cE(o,n){1&o&&(e.\u0275\u0275elementStart(0,"span",44),e.\u0275\u0275elementContainerStart(1),e.\u0275\u0275i18n(2,14),e.\u0275\u0275elementContainerEnd(),e.\u0275\u0275elementEnd())}function dE(o,n){if(1&o&&e.\u0275\u0275template(0,cE,3,0,"span",43),2&o){e.\u0275\u0275nextContext();const t=e.\u0275\u0275reference(2),_=e.\u0275\u0275nextContext();e.\u0275\u0275property("ngIf",_.accountForm.showError("name",t,"required"))}}function uE(o,n){1&o&&(e.\u0275\u0275elementStart(0,"span"),e.\u0275\u0275elementContainerStart(1),e.\u0275\u0275i18n(2,15),e.\u0275\u0275elementContainerEnd(),e.\u0275\u0275elementEnd())}function pE(o,n){if(1&o&&e.\u0275\u0275template(0,uE,3,0,"span",41),2&o){e.\u0275\u0275nextContext();const t=e.\u0275\u0275reference(2),_=e.\u0275\u0275nextContext();e.\u0275\u0275property("ngIf",_.accountForm.showError("email",t,"email"))}}function mE(o,n){1&o&&e.\u0275\u0275elementContainer(0)}function TE(o,n){1&o&&e.\u0275\u0275elementContainer(0)}function gE(o,n){if(1&o&&(e.\u0275\u0275elementStart(0,"span"),e.\u0275\u0275template(1,TE,1,0,"ng-container",40),e.\u0275\u0275elementEnd()),2&o){e.\u0275\u0275nextContext(2);const t=e.\u0275\u0275reference(5);e.\u0275\u0275advance(),e.\u0275\u0275property("ngTemplateOutlet",t)("ngTemplateOutletContext",e.\u0275\u0275pureFunction0(2,iE))}}function EE(o,n){1&o&&e.\u0275\u0275elementContainer(0)}function RE(o,n){1&o&&e.\u0275\u0275elementContainer(0)}function CE(o,n){if(1&o&&(e.\u0275\u0275elementStart(0,"span"),e.\u0275\u0275template(1,RE,1,0,"ng-container",40),e.\u0275\u0275elementEnd()),2&o){e.\u0275\u0275nextContext(2);const t=e.\u0275\u0275reference(5);e.\u0275\u0275advance(),e.\u0275\u0275property("ngTemplateOutlet",t)("ngTemplateOutletContext",e.\u0275\u0275pureFunction0(2,aE))}}function fE(o,n){1&o&&e.\u0275\u0275elementContainer(0)}function SE(o,n){1&o&&e.\u0275\u0275elementContainer(0)}function FE(o,n){if(1&o&&(e.\u0275\u0275elementStart(0,"span"),e.\u0275\u0275template(1,SE,1,0,"ng-container",40),e.\u0275\u0275elementEnd()),2&o){e.\u0275\u0275nextContext(2);const t=e.\u0275\u0275reference(5);e.\u0275\u0275advance(),e.\u0275\u0275property("ngTemplateOutlet",t)("ngTemplateOutletContext",e.\u0275\u0275pureFunction0(2,rE))}}function ME(o,n){1&o&&e.\u0275\u0275elementContainer(0)}function PE(o,n){1&o&&e.\u0275\u0275elementContainer(0)}function IE(o,n){if(1&o&&(e.\u0275\u0275elementStart(0,"span"),e.\u0275\u0275template(1,PE,1,0,"ng-container",40),e.\u0275\u0275elementEnd()),2&o){e.\u0275\u0275nextContext(2);const t=e.\u0275\u0275reference(5);e.\u0275\u0275advance(),e.\u0275\u0275property("ngTemplateOutlet",t)("ngTemplateOutletContext",e.\u0275\u0275pureFunction0(2,lE))}}function OE(o,n){1&o&&e.\u0275\u0275elementContainer(0)}function GE(o,n){1&o&&e.\u0275\u0275elementContainer(0)}function NE(o,n){if(1&o&&(e.\u0275\u0275elementStart(0,"span"),e.\u0275\u0275template(1,GE,1,0,"ng-container",40),e.\u0275\u0275elementEnd()),2&o){e.\u0275\u0275nextContext(2);const t=e.\u0275\u0275reference(5);e.\u0275\u0275advance(),e.\u0275\u0275property("ngTemplateOutlet",t)("ngTemplateOutletContext",e.\u0275\u0275pureFunction0(2,sE))}}function AE(o,n){1&o&&e.\u0275\u0275elementContainer(0)}function hE(o,n){1&o&&e.\u0275\u0275elementContainer(0)}function bE(o,n){if(1&o){const t=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementContainerStart(0),e.\u0275\u0275elementStart(1,"form",29,3)(3,"div",30),e.\u0275\u0275i18n(4,10),e.\u0275\u0275pipe(5,"titlecase"),e.\u0275\u0275pipe(6,"upperFirst"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(7,"div",31)(8,"cds-text-label",32),e.\u0275\u0275i18nStart(9,11),e.\u0275\u0275element(10,"input",33),e.\u0275\u0275i18nEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275template(11,dE,1,1,"ng-template",null,4,e.\u0275\u0275templateRefExtractor),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(13,"div",31)(14,"cds-text-label",34),e.\u0275\u0275i18nStart(15,12),e.\u0275\u0275element(16,"input",35),e.\u0275\u0275i18nEnd(),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(17,"div",31)(18,"cds-text-label",36),e.\u0275\u0275i18nStart(19,13),e.\u0275\u0275element(20,"input",37),e.\u0275\u0275i18nEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275template(21,pE,1,1,"ng-template",null,5,e.\u0275\u0275templateRefExtractor),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(23,"div",38)(24,"div",39),e.\u0275\u0275template(25,mE,1,0,"ng-container",40),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(26,"div",39),e.\u0275\u0275template(27,gE,2,3,"span",41),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(28,"div",38)(29,"div",39),e.\u0275\u0275template(30,EE,1,0,"ng-container",40),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(31,"div",39),e.\u0275\u0275template(32,CE,2,3,"span",41),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(33,"div",38)(34,"div",39),e.\u0275\u0275template(35,fE,1,0,"ng-container",40),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(36,"div",39),e.\u0275\u0275template(37,FE,2,3,"span",41),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(38,"div",38)(39,"div",39),e.\u0275\u0275template(40,ME,1,0,"ng-container",40),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(41,"div",39),e.\u0275\u0275template(42,IE,2,3,"span",41),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(43,"div",38)(44,"div",39),e.\u0275\u0275template(45,OE,1,0,"ng-container",40),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(46,"div",39),e.\u0275\u0275template(47,NE,2,3,"span",41),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(48,"div",31),e.\u0275\u0275template(49,AE,1,0,"ng-container",40),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(50,"div",31),e.\u0275\u0275template(51,hE,1,0,"ng-container",40),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(52,"cd-form-button-panel",42),e.\u0275\u0275pipe(53,"titlecase"),e.\u0275\u0275pipe(54,"upperFirst"),e.\u0275\u0275listener("submitActionEvent",function(){e.\u0275\u0275restoreView(t);const i=e.\u0275\u0275nextContext();return e.\u0275\u0275resetView(i.submit())}),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementContainerEnd()}if(2&o){const t=e.\u0275\u0275reference(2),_=e.\u0275\u0275reference(12),i=e.\u0275\u0275reference(22),a=e.\u0275\u0275nextContext(),r=e.\u0275\u0275reference(3),s=e.\u0275\u0275reference(7);e.\u0275\u0275advance(),e.\u0275\u0275property("formGroup",a.accountForm),e.\u0275\u0275advance(5),e.\u0275\u0275i18nExp(e.\u0275\u0275pipeBind1(5,28,a.action))(e.\u0275\u0275pipeBind1(6,30,a.resource)),e.\u0275\u0275i18nApply(4),e.\u0275\u0275advance(2),e.\u0275\u0275property("invalid",!a.accountForm.controls.name.valid&&a.accountForm.controls.name.dirty)("invalidText",_),e.\u0275\u0275advance(10),e.\u0275\u0275property("invalid",!a.accountForm.controls.email.valid&&a.accountForm.controls.email.dirty)("invalidText",i),e.\u0275\u0275advance(7),e.\u0275\u0275property("ngTemplateOutlet",r)("ngTemplateOutletContext",e.\u0275\u0275pureFunction0(36,jg)),e.\u0275\u0275advance(2),e.\u0275\u0275property("ngIf",1==a.accountForm.get("max_buckets_mode").value),e.\u0275\u0275advance(3),e.\u0275\u0275property("ngTemplateOutlet",r)("ngTemplateOutletContext",e.\u0275\u0275pureFunction0(37,Yg)),e.\u0275\u0275advance(2),e.\u0275\u0275property("ngIf",1==a.accountForm.get("max_users_mode").value),e.\u0275\u0275advance(3),e.\u0275\u0275property("ngTemplateOutlet",r)("ngTemplateOutletContext",e.\u0275\u0275pureFunction0(38,Qg)),e.\u0275\u0275advance(2),e.\u0275\u0275property("ngIf",1==a.accountForm.get("max_roles_mode").value),e.\u0275\u0275advance(3),e.\u0275\u0275property("ngTemplateOutlet",r)("ngTemplateOutletContext",e.\u0275\u0275pureFunction0(39,Jg)),e.\u0275\u0275advance(2),e.\u0275\u0275property("ngIf",1==a.accountForm.get("max_groups_mode").value),e.\u0275\u0275advance(3),e.\u0275\u0275property("ngTemplateOutlet",r)("ngTemplateOutletContext",e.\u0275\u0275pureFunction0(40,eE)),e.\u0275\u0275advance(2),e.\u0275\u0275property("ngIf",1==a.accountForm.get("max_access_keys_mode").value),e.\u0275\u0275advance(2),e.\u0275\u0275property("ngTemplateOutlet",s)("ngTemplateOutletContext",e.\u0275\u0275pureFunction1(42,nE,e.\u0275\u0275pureFunction0(41,tE))),e.\u0275\u0275advance(2),e.\u0275\u0275property("ngTemplateOutlet",s)("ngTemplateOutletContext",e.\u0275\u0275pureFunction1(45,_E,e.\u0275\u0275pureFunction0(44,oE))),e.\u0275\u0275advance(),e.\u0275\u0275property("form",t)("submitText",e.\u0275\u0275pipeBind1(53,32,a.action)+" "+e.\u0275\u0275pipeBind1(54,34,a.resource))}}function vE(o,n){if(1&o){const t=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"cds-select",45),e.\u0275\u0275pipe(1,"upperFirst"),e.\u0275\u0275listener("change",function(i){const a=e.\u0275\u0275restoreView(t).formControl,r=e.\u0275\u0275nextContext();return e.\u0275\u0275resetView(r.onModeChange(i.target.value,a))}),e.\u0275\u0275elementStart(2,"option",46),e.\u0275\u0275text(3,"Unlimited"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(4,"option",47),e.\u0275\u0275text(5,"Disabled"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(6,"option",48),e.\u0275\u0275text(7,"Custom"),e.\u0275\u0275elementEnd()()}if(2&o){const t=n.formControl,_=e.\u0275\u0275nextContext();e.\u0275\u0275propertyInterpolate1("label","",e.\u0275\u0275pipeBind1(1,6,t.split("_")[1])," Mode"),e.\u0275\u0275property("formControlName",t)("name",t)("id",t)("helperText",_.getHelperTextForMode(t))}}function LE(o,n){1&o&&(e.\u0275\u0275elementStart(0,"span"),e.\u0275\u0275i18n(1,16),e.\u0275\u0275elementEnd())}function yE(o,n){1&o&&(e.\u0275\u0275elementStart(0,"span"),e.\u0275\u0275i18n(1,17),e.\u0275\u0275elementEnd())}function $E(o,n){1&o&&(e.\u0275\u0275elementStart(0,"span"),e.\u0275\u0275i18n(1,18),e.\u0275\u0275elementEnd())}function DE(o,n){if(1&o&&e.\u0275\u0275template(0,LE,2,0,"span",41)(1,yE,2,0,"span",41)(2,$E,2,0,"span",41),2&o){const t=e.\u0275\u0275nextContext().formControl,_=e.\u0275\u0275nextContext();e.\u0275\u0275property("ngIf",_.accountForm.showError(t,_.formDir,"required")),e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf",0==_.accountForm.controls[t].value&&_.accountForm.showError(t,_.formDir,"min")),e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf",_.accountForm.showError(t,_.formDir,"pattern"))}}function WE(o,n){if(1&o&&(e.\u0275\u0275element(0,"cds-number",49),e.\u0275\u0275pipe(1,"upperFirst"),e.\u0275\u0275pipe(2,"upperFirst"),e.\u0275\u0275template(3,DE,3,3,"ng-template",null,6,e.\u0275\u0275templateRefExtractor)),2&o){const t=n.formControl,_=e.\u0275\u0275reference(4),i=e.\u0275\u0275nextContext();e.\u0275\u0275propertyInterpolate("formControlName",t),e.\u0275\u0275propertyInterpolate2("label","",e.\u0275\u0275pipeBind1(1,12,t.split("_")[0]),". ",t.split("_").length>2?t.split("_")[1]+" "+t.split("_")[2]:t.split("_")[1],""),e.\u0275\u0275propertyInterpolate2("cdRequiredField","",e.\u0275\u0275pipeBind1(2,14,t.split("_")[0]),". ",t.split("_").length>2?t.split("_")[1]+" "+t.split("_")[2]:t.split("_")[1],""),e.\u0275\u0275property("id",t)("name",t)("min",1)("invalid",!i.accountForm.controls[t].valid&&i.accountForm.controls[t].dirty)("invalidText",_)}}function xE(o,n){1&o&&(e.\u0275\u0275elementStart(0,"div",55),e.\u0275\u0275text(1,"Set quota on account owned by users."),e.\u0275\u0275elementEnd())}function wE(o,n){1&o&&(e.\u0275\u0275elementStart(0,"div",55),e.\u0275\u0275text(1," Set quota on buckets owned by an account. "),e.\u0275\u0275elementEnd())}function UE(o,n){if(1&o&&(e.\u0275\u0275elementStart(0,"cds-checkbox",53),e.\u0275\u0275text(1," Unlimited size "),e.\u0275\u0275elementEnd()),2&o){const t=e.\u0275\u0275nextContext(2),_=t.quotaType,i=t.formControl;e.\u0275\u0275property("formControlName",i.unlimitedSize)("id",_+"unlimitedSize_checkbox")}}function kE(o,n){1&o&&(e.\u0275\u0275elementStart(0,"span"),e.\u0275\u0275i18n(1,20),e.\u0275\u0275elementEnd())}function zE(o,n){1&o&&(e.\u0275\u0275elementStart(0,"span"),e.\u0275\u0275i18n(1,21),e.\u0275\u0275elementEnd())}function HE(o,n){1&o&&(e.\u0275\u0275elementStart(0,"span"),e.\u0275\u0275i18n(1,22),e.\u0275\u0275elementEnd())}function XE(o,n){if(1&o&&e.\u0275\u0275template(0,kE,2,0,"span",41)(1,zE,2,0,"span",41)(2,HE,2,0,"span",41),2&o){const t=e.\u0275\u0275nextContext(3).formControl,_=e.\u0275\u0275nextContext();e.\u0275\u0275property("ngIf",_.accountForm.showError(t.maxSize,_.formDir,"required")),e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf",_.accountForm.showError(t.maxSize,_.formDir,"quotaMaxSize")),e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf",_.accountForm.showError(t.maxSize,_.formDir,"pattern"))}}function BE(o,n){if(1&o&&(e.\u0275\u0275elementStart(0,"div",59)(1,"cds-text-label",60),e.\u0275\u0275i18nStart(2,19),e.\u0275\u0275element(3,"input",61),e.\u0275\u0275i18nEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275template(4,XE,3,3,"ng-template",null,8,e.\u0275\u0275templateRefExtractor),e.\u0275\u0275elementEnd()),2&o){const t=e.\u0275\u0275reference(5),_=e.\u0275\u0275nextContext(2).formControl,i=e.\u0275\u0275nextContext();e.\u0275\u0275advance(),e.\u0275\u0275property("label",_.maxSize)("for",_.maxSize)("invalid",!i.accountForm.controls[_.maxSize].valid&&i.accountForm.controls[_.maxSize].dirty)("invalidText",t),e.\u0275\u0275advance(2),e.\u0275\u0275property("id",_.maxSize)("name",_.maxSize)("formControlName",_.maxSize)}}function VE(o,n){if(1&o&&(e.\u0275\u0275elementStart(0,"cds-checkbox",53),e.\u0275\u0275text(1," Unlimited objects "),e.\u0275\u0275elementEnd()),2&o){const t=e.\u0275\u0275nextContext(2),_=t.quotaType,i=t.formControl;e.\u0275\u0275property("formControlName",i.unlimitedObjects)("id",_+"unlimitedObjects_checkbox")}}function ZE(o,n){1&o&&(e.\u0275\u0275elementStart(0,"span"),e.\u0275\u0275i18n(1,24),e.\u0275\u0275elementEnd())}function KE(o,n){1&o&&(e.\u0275\u0275elementStart(0,"span"),e.\u0275\u0275i18n(1,25),e.\u0275\u0275elementEnd())}function qE(o,n){if(1&o&&e.\u0275\u0275template(0,ZE,2,0,"span",41)(1,KE,2,0,"span",41),2&o){const t=e.\u0275\u0275nextContext(3).formControl,_=e.\u0275\u0275nextContext();e.\u0275\u0275property("ngIf",_.accountForm.showError(t.maxObjects,_.formDir,"required")),e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf",_.accountForm.showError(t.maxObjects,_.formDir,"pattern"))}}function jE(o,n){if(1&o&&(e.\u0275\u0275elementStart(0,"div",59)(1,"cds-text-label",62),e.\u0275\u0275i18nStart(2,23),e.\u0275\u0275element(3,"input",63),e.\u0275\u0275i18nEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275template(4,qE,2,2,"ng-template",null,9,e.\u0275\u0275templateRefExtractor),e.\u0275\u0275elementEnd()),2&o){const t=e.\u0275\u0275reference(5),_=e.\u0275\u0275nextContext(2).formControl,i=e.\u0275\u0275nextContext();e.\u0275\u0275advance(),e.\u0275\u0275property("label",_.maxObjects)("for",_.maxObjects)("invalid",!i.accountForm.controls[_.maxObjects].valid&&i.accountForm.controls[_.maxObjects].dirty)("invalidText",t),e.\u0275\u0275advance(2),e.\u0275\u0275property("id",_.maxObjects)("name",_.maxObjects)("formControlName",_.maxObjects)}}function YE(o,n){if(1&o&&(e.\u0275\u0275elementStart(0,"div",56),e.\u0275\u0275template(1,UE,2,2,"cds-checkbox",57)(2,BE,6,7,"div",58)(3,VE,2,2,"cds-checkbox",57)(4,jE,6,7,"div",58),e.\u0275\u0275elementEnd()),2&o){const t=e.\u0275\u0275nextContext().formControl,_=e.\u0275\u0275nextContext();e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf",_.accountForm.controls[t.enabled].value),e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf",_.accountForm.controls[t.enabled].value&&!_.accountForm.getValue(t.unlimitedSize)),e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf",_.accountForm.controls[t.enabled].value),e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf",_.accountForm.controls[t.enabled].value&&!_.accountForm.getValue(t.unlimitedObjects))}}function QE(o,n){if(1&o&&(e.\u0275\u0275elementStart(0,"fieldset",50)(1,"legend",51),e.\u0275\u0275text(2),e.\u0275\u0275pipe(3,"upperFirst"),e.\u0275\u0275elementEnd(),e.\u0275\u0275template(4,xE,2,0,"div",52)(5,wE,2,0,"ng-template",null,7,e.\u0275\u0275templateRefExtractor),e.\u0275\u0275elementStart(7,"cds-checkbox",53),e.\u0275\u0275text(8," Enabled "),e.\u0275\u0275elementEnd(),e.\u0275\u0275template(9,YE,5,4,"div",54),e.\u0275\u0275elementEnd()),2&o){const t=n.quotaType,_=n.formControl,i=e.\u0275\u0275reference(6),a=e.\u0275\u0275nextContext();e.\u0275\u0275advance(2),e.\u0275\u0275textInterpolate1("",e.\u0275\u0275pipeBind1(3,6,t)," Quota"),e.\u0275\u0275advance(2),e.\u0275\u0275property("ngIf","account"==t)("ngIfElse",i),e.\u0275\u0275advance(3),e.\u0275\u0275property("formControlName",_.enabled)("id",t+"_checkbox"),e.\u0275\u0275advance(2),e.\u0275\u0275property("ngIf",a.accountForm.controls[_.enabled].value)}}class en extends tt.g{constructor(n,t,_,i,a,r){super(),this.router=n,this.actionLabels=t,this.rgwUserAccountsService=_,this.notificationService=i,this.formBuilder=a,this.route=r,this.editing=!1,this.submitObservables=[],this.editing=this.router.url.includes("rgw/accounts/edit"),this.action=this.editing?this.actionLabels.EDIT:this.actionLabels.CREATE,this.resource=$localize`Account`,this.createForm(),this.loadingReady()}ngOnInit(){this.editing&&this.route.paramMap.subscribe(n=>{const t=n.get("id");this.rgwUserAccountsService.get(t).subscribe(_=>{const i=N().clone(this.accountForm.value);let a=N().pick(_,N().keys(this.accountForm.value));["max_users","max_roles","max_groups","max_buckets","max_access_keys"].forEach(r=>{this.mapValuesForMode(a,r)}),["account","bucket"].forEach(r=>{let s={};s="bucket"==r?_.bucket_quota:_.quota,a[r+"_quota_enabled"]=s.enabled,s.max_size<0?(a[r+"_quota_max_size_unlimited"]=!0,a[r+"_quota_max_size"]=null):(a[r+"_quota_max_size_unlimited"]=!1,a[r+"_quota_max_size"]=`${s.max_size} B`),s.max_objects<0?(a[r+"_quota_max_objects_unlimited"]=!0,a[r+"_quota_max_objects"]=null):(a[r+"_quota_max_objects_unlimited"]=!1,a[r+"_quota_max_objects"]=s.max_objects)}),a=N().merge(i,a),this.accountForm.setValue(a),this.accountForm.get("tenant").disable()})})}mapValuesForMode(n,t){switch(n[t]){case-1:n[`${t}_mode`]="-1",n[t]="";break;case 0:n[`${t}_mode`]="0",n[t]="";break;default:n[`${t}_mode`]="1"}}createForm(){this.accountForm=this.formBuilder.group({id:[""],tenant:[""],name:["",l.Validators.required],email:["",F.xQ.email],max_users_mode:["1"],max_users:[1e3,[F.xQ.requiredIf({max_users_mode:"1"}),F.xQ.number(!1),l.Validators.min(1)]],max_roles_mode:["1"],max_roles:[1e3,[F.xQ.requiredIf({max_roles_mode:"1"}),F.xQ.number(!1),l.Validators.min(1)]],max_groups_mode:["1"],max_groups:[1e3,[F.xQ.requiredIf({max_groups_mode:"1"}),F.xQ.number(!1),l.Validators.min(1)]],max_access_keys_mode:["1"],max_access_keys:[4,[F.xQ.requiredIf({max_access_keys_mode:"1"}),F.xQ.number(!1),l.Validators.min(1)]],max_buckets_mode:["1"],max_buckets:[1e3,[F.xQ.requiredIf({max_buckets_mode:"1"}),F.xQ.number(!1),l.Validators.min(1)]],account_quota_enabled:[!1],account_quota_max_size_unlimited:[!0],account_quota_max_size:[null,[F.xQ.composeIf({account_quota_enabled:!0,account_quota_max_size_unlimited:!1},[l.Validators.required,this.quotaMaxSizeValidator])]],account_quota_max_objects_unlimited:[!0],account_quota_max_objects:[null,[F.xQ.requiredIf({account_quota_enabled:!0,account_quota_max_objects_unlimited:!1}),l.Validators.pattern(/^[0-9]+$/)]],bucket_quota_enabled:[!1],bucket_quota_max_size_unlimited:[!0],bucket_quota_max_size:[null,[F.xQ.composeIf({bucket_quota_enabled:!0,bucket_quota_max_size_unlimited:!1},[l.Validators.required,this.quotaMaxSizeValidator])]],bucket_quota_max_objects_unlimited:[!0],bucket_quota_max_objects:[null,[F.xQ.requiredIf({bucket_quota_enabled:!0,bucket_quota_max_objects_unlimited:!1}),l.Validators.pattern(/^[0-9]+$/)]]})}quotaMaxSizeValidator(n){return(0,F.xF)(n.value)?null:null===RegExp("^(\\d+(\\.\\d+)?)\\s*(B|K(B|iB)?|M(B|iB)?|G(B|iB)?|T(B|iB)?)?$","i").exec(n.value)||(new we.k).toBytes(n.value)<1024?{quotaMaxSize:!0}:null}submit(){let n="";if(this.accountForm.invalid)return;if(this.accountForm.pending)return void this.accountForm.setErrors({cdSubmitButton:!0});const t=this.accountForm.value,_={account_id:t.id,account_name:t.name,email:t.email,tenant:t.tenant,max_users:this.getValueFromFormControl("max_users"),max_buckets:this.getValueFromFormControl("max_buckets"),max_roles:this.getValueFromFormControl("max_roles"),max_group:this.getValueFromFormControl("max_groups"),max_access_keys:this.getValueFromFormControl("max_access_keys")};this.editing?(n=$localize`Account modified successfully`,this.rgwUserAccountsService.modify(_).subscribe({next:i=>{this.accountForm.get("id").setValue(i.id),this.setQuotaConfig(),this.notificationService.show(x._.success,n)},error:()=>{this.accountForm.setErrors({cdSubmitButton:!0})}})):(delete _.account_id,n=$localize`Account created successfully`,this.rgwUserAccountsService.create(_).subscribe({next:i=>{this.accountForm.get("id").setValue(i.id),this.setQuotaConfig(),this.notificationService.show(x._.success,n)},error:()=>{this.accountForm.setErrors({cdSubmitButton:!0})}}))}setQuotaConfig(){const n=this.accountForm.get("id").value;if(this._isQuotaConfDirty("account")){const t=this._getQuotaArgs("account");this.submitObservables.push(this.rgwUserAccountsService.setQuota(n,t))}if(this._isQuotaConfDirty("bucket")){const t=this._getQuotaArgs("bucket");this.submitObservables.push(this.rgwUserAccountsService.setQuota(n,t))}(0,w.concat)(...this.submitObservables).subscribe({error:()=>{this.accountForm.setErrors({cdSubmitButton:!0})},complete:()=>{this.goToListView()}}),0==this.submitObservables.length&&this.goToListView()}_getQuotaArgs(n){const t={quota_type:n,enabled:this.accountForm.getValue(`${n}_quota_enabled`),max_size:"-1",max_objects:"-1"};if(!this.accountForm.getValue(`${n}_quota_max_size_unlimited`)){const _=(new we.k).toBytes(this.accountForm.getValue(`${n}_quota_max_size`));t.max_size=_.toFixed(0)}return this.accountForm.getValue(`${n}_quota_max_objects_unlimited`)||(t.max_objects=`${this.accountForm.getValue(`${n}_quota_max_objects`)}`),t}_isQuotaConfDirty(n){return[`${n}_quota_enabled`,`${n}_quota_max_size_unlimited`,`${n}_quota_max_size`,`${n}_quota_max_objects_unlimited`,`${n}_quota_max_objects`].some(t=>this.accountForm.get(t).dirty)}onModeChange(n,t){"1"===n&&(this.accountForm.get(t).valid||this.accountForm.patchValue({[t]:1e3}))}goToListView(){this.router.navigate(["rgw/accounts"])}getValueFromFormControl(n){const t=this.accountForm.value;return 1==t[`${n}_mode`]?t[n]:t[`${n}_mode`]}getHelperTextForMode(n){const t=n.split("_").length>3?n.split("_")[1]+" "+n.split("_")[2]:n.split("_")[1];return-1==this.accountForm.getValue(n)?`${t[0].toUpperCase()+t.slice(1,-1)} creation is disabled.`:0==this.accountForm.getValue(n)?`Unlimited ${t.slice(0,-1)} creation allowed.`:""}static{this.\u0275fac=function(t){return new(t||en)(e.\u0275\u0275directiveInject(Y.Router),e.\u0275\u0275directiveInject(M.Ss),e.\u0275\u0275directiveInject(Je),e.\u0275\u0275directiveInject(te.J),e.\u0275\u0275directiveInject(Ne.$),e.\u0275\u0275directiveInject(Y.ActivatedRoute))}}static{this.\u0275cmp=e.\u0275\u0275defineComponent({type:en,selectors:[["cd-rgw-user-accounts-form"]],features:[e.\u0275\u0275InheritDefinitionFeature],decls:8,vars:6,consts:()=>{let n,t,_,i,a,r,s,d,u,m,C,O,f,I,R,h;return n=$localize`:form title␟a90ab37a86361510c6418a0b01e5fb53b18aad60␟4895964714444299563:${"\ufffd0\ufffd"}:INTERPOLATION: ${"\ufffd1\ufffd"}:INTERPOLATION_1: `,t=$localize`:␟4a5894019fe59abba915a71fdf25b1a023a8b376␟3518747459555789429:Account Name ${"\ufffd#10\ufffd\ufffd/#10\ufffd"}:TAG_INPUT:`,_=$localize`:␟7059a67afd15c26ed1d01f50ecf1869fbf458f9f␟7317253690829321304:Tenant ${"\ufffd#16\ufffd\ufffd/#16\ufffd"}:TAG_INPUT:`,i=$localize`:␟6e96102c80b1b39c7d424383f642a82b9f750fcc␟3848784128836152602:Email ${"\ufffd#20\ufffd\ufffd/#20\ufffd"}:TAG_INPUT:`,a=$localize`:␟7cbdabcece469fab89cfa687ab152bca18b97498␟1417693714872528491:This field is required.`,r=$localize`:␟2947ceb84e08587963c06540d8a7ca9da954d3de␟2841397183376590473: Please enter a valid email `,s=$localize`:␟7cbdabcece469fab89cfa687ab152bca18b97498␟1417693714872528491:This field is required.`,d=$localize`:␟2dfc54939f379013b9a09c336329bfafd2172c99␟6043389577219576581:Enter number greater than 0`,u=$localize`:␟cae4a65aa3116e5e6718c7e59c71e8f2631a2232␟1358442525003980673:Enter a valid positive number`,m=$localize`:␟1cd18c4c33858ce0a5d801cb8b0825b3bed96f14␟1364822935355917369:Max. size ${"\ufffd#3\ufffd\ufffd/#3\ufffd"}:TAG_INPUT:`,C=$localize`:␟7cbdabcece469fab89cfa687ab152bca18b97498␟1417693714872528491:This field is required.`,O=$localize`:␟a382667689cc81eea0809b8bbdeefe27c345db4b␟5034234715259441197:Enter a valid value.`,f=$localize`:␟25db023269cd62168393b201f615ec90e07f3df8␟4749416028992272245:Size must be a number or in a valid format. eg: 5 GiB`,I=$localize`:␟c31b39b7c948f2bd39c0ba86947b5394a9e2af77␟3590541217525009287:Max. objects ${"\ufffd#3\ufffd\ufffd/#3\ufffd"}:TAG_INPUT:`,R=$localize`:␟7cbdabcece469fab89cfa687ab152bca18b97498␟1417693714872528491:This field is required.`,h=$localize`:␟cae4a65aa3116e5e6718c7e59c71e8f2631a2232␟1358442525003980673:Enter a valid positive number`,[["selectModeTemplate",""],["accountMaxValueTemplate",""],["quotaTemplate",""],["formDir","ngForm"],["accountIdError",""],["emailError",""],["maxValError",""],["bucket",""],["quotaSizeError",""],["quotaObjectError",""],n,t,_,i,a,r,s,d,u,m,C,O,f,I,R,h,["cdsCol","",3,"columnNumbers"],[4,"cdFormLoading"],[3,"formGroup"],["name","accountForm","novalidate","",3,"formGroup"],[1,"form-header"],[1,"form-item"],["label","Account Name","for","acc_name","cdRequiredField","Account Name",3,"invalid","invalidText"],["cdsText","","type","text","placeholder","Enter account name","id","acc_name","name","acc_name","formControlName","name"],["label","tenant","for","tenant"],["cdsText","","type","text","placeholder","Enter tenant","id","tenant","name","tenant","formControlName","tenant"],["label","email","for","email",3,"invalid","invalidText"],["cdsText","","type","text","placeholder","Enter email","id","email","name","email","formControlName","email"],["cdsRow","",1,"form-item","form-item-append"],["cdsCol",""],[4,"ngTemplateOutlet","ngTemplateOutletContext"],[4,"ngIf"],["wrappingClass","text-right",3,"submitActionEvent","form","submitText"],["class","invalid-feedback",4,"ngIf"],[1,"invalid-feedback"],[3,"change","formControlName","name","id","label","helperText"],["value","0"],["value","-1"],["value","1"],[3,"id","name","formControlName","label","min","cdRequiredField","invalid","invalidText"],[1,"cds--fieldset"],[1,"cds--label"],["class","quota-heading",4,"ngIf","ngIfElse"],[3,"formControlName","id"],["class","quota-sub-block",4,"ngIf"],[1,"quota-heading"],[1,"quota-sub-block"],[3,"formControlName","id",4,"ngIf"],["class","input-wrapper",4,"ngIf"],[1,"input-wrapper"],["cdRequiredField","Max. size",3,"label","for","invalid","invalidText"],["cdsText","","type","text","placeholder","Enter size","cdDimlessBinary","",3,"id","name","formControlName"],["cdRequiredField","Max. objects",3,"label","for","invalid","invalidText"],["cdsText","","type","number","placeholder","Enter number of objects",3,"id","name","formControlName"]]},template:function(t,_){1&t&&(e.\u0275\u0275elementStart(0,"div",26),e.\u0275\u0275template(1,bE,55,47,"ng-container",27),e.\u0275\u0275elementEnd(),e.\u0275\u0275template(2,vE,8,8,"ng-template",28,0,e.\u0275\u0275templateRefExtractor)(4,WE,5,16,"ng-template",28,1,e.\u0275\u0275templateRefExtractor)(6,QE,10,8,"ng-template",28,2,e.\u0275\u0275templateRefExtractor)),2&t&&(e.\u0275\u0275property("columnNumbers",e.\u0275\u0275pureFunction0(5,qg)),e.\u0275\u0275advance(),e.\u0275\u0275property("cdFormLoading",_.loading),e.\u0275\u0275advance(),e.\u0275\u0275property("formGroup",_.accountForm),e.\u0275\u0275advance(2),e.\u0275\u0275property("formGroup",_.accountForm),e.\u0275\u0275advance(2),e.\u0275\u0275property("formGroup",_.accountForm))},dependencies:[g.NgIf,g.NgTemplateOutlet,oe.e,go.Y,St.G,j.S,ne.E,Qe.P,l.\u0275NgNoValidate,l.NgSelectOption,l.\u0275NgSelectMultipleOption,l.DefaultValueAccessor,l.NumberValueAccessor,l.NgControlStatus,l.NgControlStatusGroup,l.FormGroupDirective,l.FormControlName,c.ColumnDirective,c.RowDirective,c.TextInputLabelComponent,c.TextInput,c.Checkbox,c.NumberComponent,c.Select,c.Option,g.TitleCasePipe,Oe.r],styles:[".cds--form__helper-text{white-space:pre-line}.quota-heading[_ngcontent-%COMP%]{margin-bottom:.5rem}.quota-sub-block[_ngcontent-%COMP%]{margin:.5rem 0 0 1.5rem}.quota-sub-block[_ngcontent-%COMP%]   .input-wrapper[_ngcontent-%COMP%]{margin:.5rem 0 0 .125rem}.quota-sub-block[_ngcontent-%COMP%]   .input-wrapper[_ngcontent-%COMP%]:first-of-type{margin-bottom:1.5rem}"]})}}var JE=T(2087);const eR=()=>({md:4}),d_=()=>({md:12});function tR(o,n){if(1&o&&(e.\u0275\u0275elementStart(0,"option",66),e.\u0275\u0275i18n(1,18),e.\u0275\u0275elementEnd()),2&o){const t=n.$implicit;e.\u0275\u0275property("value",t.value),e.\u0275\u0275advance(),e.\u0275\u0275i18nExp(t.label),e.\u0275\u0275i18nApply(1)}}function nR(o,n){1&o&&(e.\u0275\u0275elementStart(0,"span",72),e.\u0275\u0275i18n(1,19),e.\u0275\u0275elementEnd())}function oR(o,n){if(1&o&&e.\u0275\u0275template(0,nR,2,0,"span",71),2&o){e.\u0275\u0275nextContext();const t=e.\u0275\u0275reference(2),_=e.\u0275\u0275nextContext();e.\u0275\u0275property("ngIf",_.storageClassForm.showError("storageClassType",t,"required"))}}function _R(o,n){if(1&o&&(e.\u0275\u0275elementStart(0,"option",73),e.\u0275\u0275i18n(1,20),e.\u0275\u0275elementEnd()),2&o){const t=n.$implicit,_=e.\u0275\u0275nextContext(2);e.\u0275\u0275property("value",t.name)("selected",t.name===_.storageClassForm.getValue("zonegroup")),e.\u0275\u0275advance(),e.\u0275\u0275i18nExp(t.name),e.\u0275\u0275i18nApply(1)}}function iR(o,n){1&o&&(e.\u0275\u0275elementStart(0,"span",72),e.\u0275\u0275i18n(1,21),e.\u0275\u0275elementEnd())}function aR(o,n){if(1&o&&e.\u0275\u0275template(0,iR,2,0,"span",71),2&o){e.\u0275\u0275nextContext();const t=e.\u0275\u0275reference(2),_=e.\u0275\u0275nextContext();e.\u0275\u0275property("ngIf",_.storageClassForm.showError("zonegroup",t,"required"))}}function rR(o,n){if(1&o&&(e.\u0275\u0275elementStart(0,"option",73),e.\u0275\u0275i18n(1,22),e.\u0275\u0275elementEnd()),2&o){const t=n.$implicit,_=e.\u0275\u0275nextContext(2);e.\u0275\u0275property("value",t)("selected",t===_.storageClassForm.getValue("placement_target")),e.\u0275\u0275advance(),e.\u0275\u0275i18nExp(t),e.\u0275\u0275i18nApply(1)}}function lR(o,n){1&o&&(e.\u0275\u0275elementStart(0,"span",72),e.\u0275\u0275i18n(1,23),e.\u0275\u0275elementEnd())}function sR(o,n){if(1&o&&e.\u0275\u0275template(0,lR,2,0,"span",71),2&o){e.\u0275\u0275nextContext();const t=e.\u0275\u0275reference(2),_=e.\u0275\u0275nextContext();e.\u0275\u0275property("ngIf",_.storageClassForm.showError("placement_target",t,"required"))}}function cR(o,n){1&o&&(e.\u0275\u0275elementStart(0,"span",72),e.\u0275\u0275i18n(1,24),e.\u0275\u0275elementEnd())}function dR(o,n){if(1&o&&e.\u0275\u0275template(0,cR,2,0,"span",71),2&o){e.\u0275\u0275nextContext();const t=e.\u0275\u0275reference(2),_=e.\u0275\u0275nextContext();e.\u0275\u0275property("ngIf",_.storageClassForm.showError("storage_class",t,"required"))}}function uR(o,n){1&o&&(e.\u0275\u0275elementStart(0,"span",72),e.\u0275\u0275i18n(1,34),e.\u0275\u0275elementEnd())}function pR(o,n){if(1&o&&e.\u0275\u0275template(0,uR,2,0,"span",71),2&o){e.\u0275\u0275nextContext(2);const t=e.\u0275\u0275reference(2),_=e.\u0275\u0275nextContext();e.\u0275\u0275property("ngIf",_.storageClassForm.showError("region",t,"required"))}}function mR(o,n){1&o&&(e.\u0275\u0275elementStart(0,"span",72),e.\u0275\u0275i18n(1,35),e.\u0275\u0275elementEnd())}function TR(o,n){1&o&&(e.\u0275\u0275elementStart(0,"span",72),e.\u0275\u0275i18n(1,36),e.\u0275\u0275elementEnd())}function gR(o,n){if(1&o&&e.\u0275\u0275template(0,mR,2,0,"span",71)(1,TR,2,0,"span",71),2&o){e.\u0275\u0275nextContext(2);const t=e.\u0275\u0275reference(2),_=e.\u0275\u0275nextContext();e.\u0275\u0275property("ngIf",_.storageClassForm.showError("target_endpoint",t,"required")),e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf",_.storageClassForm.showError("target_endpoint",t,"invalidURL"))}}function ER(o,n){1&o&&(e.\u0275\u0275elementStart(0,"span",72),e.\u0275\u0275i18n(1,37),e.\u0275\u0275elementEnd())}function RR(o,n){if(1&o&&e.\u0275\u0275template(0,ER,2,0,"span",71),2&o){e.\u0275\u0275nextContext(2);const t=e.\u0275\u0275reference(2),_=e.\u0275\u0275nextContext();e.\u0275\u0275property("ngIf",_.storageClassForm.showError("access_key",t,"required"))}}function CR(o,n){1&o&&(e.\u0275\u0275elementStart(0,"span",72),e.\u0275\u0275i18n(1,38),e.\u0275\u0275elementEnd())}function fR(o,n){if(1&o&&e.\u0275\u0275template(0,CR,2,0,"span",71),2&o){e.\u0275\u0275nextContext(2);const t=e.\u0275\u0275reference(2),_=e.\u0275\u0275nextContext();e.\u0275\u0275property("ngIf",_.storageClassForm.showError("secret_key",t,"required"))}}function SR(o,n){1&o&&(e.\u0275\u0275elementStart(0,"span",72),e.\u0275\u0275i18n(1,39),e.\u0275\u0275elementEnd())}function FR(o,n){if(1&o&&e.\u0275\u0275template(0,SR,2,0,"span",71),2&o){e.\u0275\u0275nextContext(2);const t=e.\u0275\u0275reference(2),_=e.\u0275\u0275nextContext();e.\u0275\u0275property("ngIf",_.storageClassForm.showError("target_path",t,"required"))}}function MR(o,n){1&o&&(e.\u0275\u0275elementStart(0,"span",72),e.\u0275\u0275i18n(1,40),e.\u0275\u0275elementEnd())}function PR(o,n){1&o&&(e.\u0275\u0275elementStart(0,"span",72),e.\u0275\u0275i18n(1,41),e.\u0275\u0275elementEnd())}function IR(o,n){if(1&o&&e.\u0275\u0275template(0,MR,2,0,"span",71)(1,PR,2,0,"span",71),2&o){e.\u0275\u0275nextContext(2);const t=e.\u0275\u0275reference(2),_=e.\u0275\u0275nextContext();e.\u0275\u0275property("ngIf",_.storageClassForm.showError("read_through_restore_days",t,"pattern")),e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf",_.storageClassForm.showError("read_through_restore_days",t,"lockDays"))}}function OR(o,n){if(1&o){const t=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"div")(1,"div",61)(2,"div",62)(3,"cds-text-label",74),e.\u0275\u0275i18nStart(4,25),e.\u0275\u0275element(5,"input",75),e.\u0275\u0275i18nEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275template(6,pR,1,1,"ng-template",null,5,e.\u0275\u0275templateRefExtractor),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(8,"div",62)(9,"cds-text-label",76),e.\u0275\u0275i18nStart(10,26),e.\u0275\u0275element(11,"input",77),e.\u0275\u0275i18nEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275template(12,gR,2,2,"ng-template",null,6,e.\u0275\u0275templateRefExtractor),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(14,"div",57)(15,"div",78)(16,"cds-password-label",79),e.\u0275\u0275i18nStart(17,27),e.\u0275\u0275element(18,"input",80),e.\u0275\u0275i18nEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275element(19,"cd-copy-2-clipboard-button",81),e.\u0275\u0275template(20,RR,1,1,"ng-template",null,7,e.\u0275\u0275templateRefExtractor),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(22,"div",57)(23,"div",78)(24,"cds-password-label",82),e.\u0275\u0275i18nStart(25,28),e.\u0275\u0275element(26,"input",83),e.\u0275\u0275i18nEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275element(27,"cd-copy-2-clipboard-button",81),e.\u0275\u0275template(28,fR,1,1,"ng-template",null,8,e.\u0275\u0275templateRefExtractor),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(30,"div",57)(31,"cds-text-label",84),e.\u0275\u0275i18nStart(32,29),e.\u0275\u0275element(33,"input",85),e.\u0275\u0275i18nEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275template(34,FR,1,1,"ng-template",null,9,e.\u0275\u0275templateRefExtractor),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(36,"div",57)(37,"cds-checkbox",86),e.\u0275\u0275listener("change",function(i){e.\u0275\u0275restoreView(t);const a=e.\u0275\u0275nextContext(2);return e.\u0275\u0275resetView(a.onAllowReadThroughChange(i))}),e.\u0275\u0275i18nStart(38,30),e.\u0275\u0275element(39,"cd-help-text"),e.\u0275\u0275i18nEnd(),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(40,"div",57)(41,"cds-checkbox",87),e.\u0275\u0275i18nStart(42,31),e.\u0275\u0275element(43,"cd-help-text"),e.\u0275\u0275i18nEnd(),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(44,"div",61)(45,"div",62),e.\u0275\u0275element(46,"cds-number",88),e.\u0275\u0275template(47,IR,2,2,"ng-template",null,10,e.\u0275\u0275templateRefExtractor),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(49,"div",62)(50,"cds-select",89)(51,"option",59),e.\u0275\u0275i18n(52,32),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(53,"option",90),e.\u0275\u0275i18n(54,33),e.\u0275\u0275elementEnd()()()()()}if(2&o){const t=e.\u0275\u0275reference(7),_=e.\u0275\u0275reference(13),i=e.\u0275\u0275reference(21),a=e.\u0275\u0275reference(29),r=e.\u0275\u0275reference(35),s=e.\u0275\u0275reference(48);e.\u0275\u0275nextContext();const d=e.\u0275\u0275reference(2),u=e.\u0275\u0275nextContext();e.\u0275\u0275advance(3),e.\u0275\u0275property("invalid",u.storageClassForm.showError("region",d,"required"))("invalidText",t)("helperText",u.helpTextLabels.targetRegionText),e.\u0275\u0275advance(2),e.\u0275\u0275property("invalid",u.storageClassForm.showError("region",d,"required")),e.\u0275\u0275advance(4),e.\u0275\u0275property("invalid",u.storageClassForm.showError("target_endpoint",d,"invalidURL")||u.storageClassForm.showError("target_endpoint",d,"required"))("invalidText",_)("helperText",u.helpTextLabels.targetEndpointText),e.\u0275\u0275advance(2),e.\u0275\u0275property("invalid",u.storageClassForm.showError("target_endpoint",d,"invalidURL")||u.storageClassForm.showError("target_endpoint",d,"required"))("invalidText",_),e.\u0275\u0275advance(4),e.\u0275\u0275property("columnNumbers",e.\u0275\u0275pureFunction0(30,d_)),e.\u0275\u0275advance(),e.\u0275\u0275property("invalid",u.storageClassForm.showError("access_key",d,"required"))("invalidText",i)("helperText",u.helpTextLabels.targetAccessKeyText),e.\u0275\u0275advance(2),e.\u0275\u0275property("invalid",u.storageClassForm.showError("access_key",d,"required")),e.\u0275\u0275advance(5),e.\u0275\u0275property("columnNumbers",e.\u0275\u0275pureFunction0(31,d_)),e.\u0275\u0275advance(),e.\u0275\u0275property("helperText",u.helpTextLabels.targetSecretKeyText)("invalid",u.storageClassForm.showError("secret_key",d,"required"))("invalidText",a),e.\u0275\u0275advance(2),e.\u0275\u0275property("invalid",u.storageClassForm.showError("secret_key",d,"required")),e.\u0275\u0275advance(5),e.\u0275\u0275property("invalid",u.storageClassForm.showError("target_path",d,"required"))("invalidText",r)("helperText",u.helpTextLabels.targetPathText),e.\u0275\u0275advance(2),e.\u0275\u0275property("invalid",u.storageClassForm.showError("target_path",d,"required")),e.\u0275\u0275advance(6),e.\u0275\u0275i18nExp(null==u.helpTextLabels?null:u.helpTextLabels.allowReadThroughText),e.\u0275\u0275i18nApply(38),e.\u0275\u0275advance(4),e.\u0275\u0275i18nExp(null==u.helpTextLabels?null:u.helpTextLabels.retainHeadObjectText),e.\u0275\u0275i18nApply(42),e.\u0275\u0275advance(3),e.\u0275\u0275property("helperText",u.helpTextLabels.readthroughrestoreDaysText)("invalid",u.storageClassForm.controls.read_through_restore_days.invalid&&u.storageClassForm.controls.read_through_restore_days.dirty)("invalidText",s),e.\u0275\u0275advance(4),e.\u0275\u0275property("helperText",u.helpTextLabels.restoreStorageClassText),e.\u0275\u0275advance(3),e.\u0275\u0275property("ngValue",u.standard)}}function GR(o,n){1&o&&(e.\u0275\u0275elementStart(0,"span",72),e.\u0275\u0275i18n(1,46),e.\u0275\u0275elementEnd())}function NR(o,n){if(1&o&&e.\u0275\u0275template(0,GR,2,0,"span",71),2&o){e.\u0275\u0275nextContext(2);const t=e.\u0275\u0275reference(2),_=e.\u0275\u0275nextContext();e.\u0275\u0275property("ngIf",_.storageClassForm.showError("glacier_restore_tier_type",t,"required"))}}function AR(o,n){1&o&&(e.\u0275\u0275elementStart(0,"span",72),e.\u0275\u0275i18n(1,47),e.\u0275\u0275elementEnd())}function hR(o,n){1&o&&(e.\u0275\u0275elementStart(0,"span",72),e.\u0275\u0275i18n(1,48),e.\u0275\u0275elementEnd())}function bR(o,n){if(1&o&&e.\u0275\u0275template(0,AR,2,0,"span",71)(1,hR,2,0,"span",71),2&o){e.\u0275\u0275nextContext(2);const t=e.\u0275\u0275reference(2),_=e.\u0275\u0275nextContext();e.\u0275\u0275property("ngIf",_.storageClassForm.showError("glacier_restore_days",t,"pattern")),e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf",_.storageClassForm.showError("glacier_restore_days",t,"lockDays"))}}function vR(o,n){if(1&o&&(e.\u0275\u0275elementStart(0,"div")(1,"legend",91),e.\u0275\u0275i18n(2,42),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(3,"div",61)(4,"div",62)(5,"cds-select",92)(6,"option",59),e.\u0275\u0275i18n(7,43),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(8,"option",90),e.\u0275\u0275i18n(9,44),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(10,"option",90),e.\u0275\u0275i18n(11,45),e.\u0275\u0275elementEnd()(),e.\u0275\u0275template(12,NR,1,1,"ng-template",null,11,e.\u0275\u0275templateRefExtractor),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(14,"div",62),e.\u0275\u0275element(15,"cds-number",93),e.\u0275\u0275template(16,bR,2,2,"ng-template",null,12,e.\u0275\u0275templateRefExtractor),e.\u0275\u0275elementEnd()()()),2&o){const t=e.\u0275\u0275reference(13),_=e.\u0275\u0275reference(17),i=e.\u0275\u0275nextContext(2);e.\u0275\u0275advance(5),e.\u0275\u0275property("invalid",i.storageClassForm.controls.glacier_restore_tier_type.invalid&&i.storageClassForm.controls.glacier_restore_tier_type.dirty)("invalidText",t)("helperText",i.helpTextLabels.tiertypeText),e.\u0275\u0275advance(3),e.\u0275\u0275property("ngValue",i.standard),e.\u0275\u0275advance(2),e.\u0275\u0275property("ngValue",i.expedited),e.\u0275\u0275advance(5),e.\u0275\u0275property("id","glacier_restore_days")("formControlName","glacier_restore_days")("label","Glacier Restore Days")("helperText",i.helpTextLabels.restoreDaysText)("min",1)("invalid",i.storageClassForm.controls.glacier_restore_days.invalid&&i.storageClassForm.controls.glacier_restore_days.dirty)("invalidText",_)}}function LR(o,n){1&o&&(e.\u0275\u0275elementStart(0,"h5",100),e.\u0275\u0275text(1,"Advanced"),e.\u0275\u0275elementEnd())}function yR(o,n){if(1&o){const t=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"fieldset")(1,"div"),e.\u0275\u0275template(2,LR,2,0,"ng-template",null,13,e.\u0275\u0275templateRefExtractor),e.\u0275\u0275elementStart(4,"fieldset")(5,"cds-accordion",94)(6,"cds-accordion-item",95),e.\u0275\u0275listener("selected",function(){e.\u0275\u0275restoreView(t);const i=e.\u0275\u0275nextContext(2);return e.\u0275\u0275resetView(i.showAdvanced=!i.showAdvanced)}),e.\u0275\u0275elementStart(7,"div",61)(8,"div",62)(9,"cds-text-label",96),e.\u0275\u0275i18nStart(10,49),e.\u0275\u0275element(11,"input",97),e.\u0275\u0275i18nEnd(),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(12,"div",62)(13,"cds-text-label",98),e.\u0275\u0275i18nStart(14,50),e.\u0275\u0275element(15,"input",99),e.\u0275\u0275i18nEnd(),e.\u0275\u0275elementEnd()()()()()()()()}if(2&o){const t=e.\u0275\u0275reference(3),_=e.\u0275\u0275nextContext(2);e.\u0275\u0275advance(6),e.\u0275\u0275property("title",t),e.\u0275\u0275advance(3),e.\u0275\u0275property("helperText",_.helpTextLabels.multipartSyncThresholdText),e.\u0275\u0275advance(4),e.\u0275\u0275property("helperText",_.helpTextLabels.multipartMinPartText)}}function $R(o,n){1&o&&(e.\u0275\u0275elementStart(0,"cd-alert-panel",69)(1,"span"),e.\u0275\u0275i18n(2,51),e.\u0275\u0275elementEnd()())}function DR(o,n){if(1&o){const t=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementContainerStart(0),e.\u0275\u0275elementStart(1,"form",54,0)(3,"div",55),e.\u0275\u0275i18nStart(4,14),e.\u0275\u0275pipe(5,"titlecase"),e.\u0275\u0275pipe(6,"upperFirst"),e.\u0275\u0275element(7,"cd-help-text",56),e.\u0275\u0275i18nEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(8,"div",57)(9,"cds-select",58)(10,"option",59),e.\u0275\u0275i18n(11,15),e.\u0275\u0275elementEnd(),e.\u0275\u0275template(12,tR,2,2,"option",60),e.\u0275\u0275elementEnd(),e.\u0275\u0275template(13,oR,1,1,"ng-template",null,1,e.\u0275\u0275templateRefExtractor),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(15,"div",61)(16,"div",62)(17,"cds-select",63),e.\u0275\u0275listener("change",function(){e.\u0275\u0275restoreView(t);const i=e.\u0275\u0275nextContext();return e.\u0275\u0275resetView(i.onZonegroupChange())}),e.\u0275\u0275template(18,_R,2,3,"option",64),e.\u0275\u0275elementEnd(),e.\u0275\u0275template(19,aR,1,1,"ng-template",null,2,e.\u0275\u0275templateRefExtractor),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(21,"div",62)(22,"cds-select",65)(23,"option",66),e.\u0275\u0275i18n(24,16),e.\u0275\u0275elementEnd(),e.\u0275\u0275template(25,rR,2,3,"option",64),e.\u0275\u0275elementEnd(),e.\u0275\u0275template(26,sR,1,1,"ng-template",null,3,e.\u0275\u0275templateRefExtractor),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(28,"div",57)(29,"cds-text-label",67),e.\u0275\u0275i18nStart(30,17),e.\u0275\u0275element(31,"input",68),e.\u0275\u0275i18nEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275template(32,dR,1,1,"ng-template",null,4,e.\u0275\u0275templateRefExtractor),e.\u0275\u0275elementEnd(),e.\u0275\u0275template(34,OR,55,32,"div")(35,vR,18,12,"div")(36,yR,16,3,"fieldset")(37,$R,3,0,"cd-alert-panel",69),e.\u0275\u0275elementStart(38,"cd-form-button-panel",70),e.\u0275\u0275pipe(39,"titlecase"),e.\u0275\u0275pipe(40,"upperFirst"),e.\u0275\u0275listener("submitActionEvent",function(){e.\u0275\u0275restoreView(t);const i=e.\u0275\u0275nextContext();return e.\u0275\u0275resetView(i.submitAction())}),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementContainerEnd()}if(2&o){const t=e.\u0275\u0275reference(2),_=e.\u0275\u0275reference(14),i=e.\u0275\u0275reference(20),a=e.\u0275\u0275reference(27),r=e.\u0275\u0275reference(33),s=e.\u0275\u0275nextContext();e.\u0275\u0275advance(),e.\u0275\u0275property("formGroup",s.storageClassForm),e.\u0275\u0275advance(6),e.\u0275\u0275property("formAllFieldsRequired",!0),e.\u0275\u0275i18nExp(e.\u0275\u0275pipeBind1(5,24,s.action))(e.\u0275\u0275pipeBind1(6,26,s.resource)),e.\u0275\u0275i18nApply(4),e.\u0275\u0275advance(2),e.\u0275\u0275property("helperText",s.helpTextLabels.storageClassText)("invalid",s.storageClassForm.showError("storageClassType",t,"required"))("invalidText",_),e.\u0275\u0275advance(3),e.\u0275\u0275property("ngForOf",s.storageClassOptions),e.\u0275\u0275advance(5),e.\u0275\u0275property("invalid",s.storageClassForm.showError("zonegroup",t,"required"))("invalidText",i),e.\u0275\u0275advance(),e.\u0275\u0275property("ngForOf",s.zonegroupNames),e.\u0275\u0275advance(4),e.\u0275\u0275property("invalid",s.storageClassForm.showError("placement_target",t,"required"))("invalidText",a),e.\u0275\u0275advance(3),e.\u0275\u0275property("ngForOf",s.placementTargets),e.\u0275\u0275advance(4),e.\u0275\u0275property("disabled",s.editing)("invalid",s.storageClassForm.controls.storage_class.invalid&&s.storageClassForm.controls.storage_class.dirty)("invalidText",r),e.\u0275\u0275advance(2),e.\u0275\u0275property("invalid",s.storageClassForm.showError("storage_class",t,"required")),e.\u0275\u0275advance(3),e.\u0275\u0275conditional(s.isTierMatch(s.TIER_TYPE.CLOUD_TIER,s.TIER_TYPE.GLACIER)?34:-1),e.\u0275\u0275advance(),e.\u0275\u0275conditional(s.isTierMatch(s.TIER_TYPE.GLACIER)?35:-1),e.\u0275\u0275advance(),e.\u0275\u0275conditional(s.isTierMatch(s.TIER_TYPE.CLOUD_TIER,s.TIER_TYPE.GLACIER)?36:-1),e.\u0275\u0275advance(),e.\u0275\u0275conditional(s.isTierMatch(s.TIER_TYPE.CLOUD_TIER,s.TIER_TYPE.GLACIER)?37:-1),e.\u0275\u0275advance(),e.\u0275\u0275property("form",s.storageClassForm)("submitText",e.\u0275\u0275pipeBind1(39,28,s.action)+" "+e.\u0275\u0275pipeBind1(40,30,s.resource))}}class tn extends tt.g{constructor(n,t,_,i,a,r,s,d){super(),this.actionLabels=n,this.formBuilder=t,this.notificationService=_,this.rgwStorageService=i,this.rgwZoneGroupService=a,this.router=r,this.route=s,this.formatter=d,this.showAdvanced=!1,this.placementTargets=[],this.allowReadThrough=!1,this.TIER_TYPE=K,this.TIER_TYPE_DISPLAY=nt,this.resource=$localize`Tiering Storage Class`,this.editing=this.router.url.startsWith(`/rgw/tiering/${M.Qp.EDIT}`),this.action=this.editing?this.actionLabels.EDIT:this.actionLabels.CREATE}ngOnInit(){this.helpTextLabels={targetPathText:Do,targetEndpointText:"The URL endpoint of the remote cloud service for accessing storage.",targetRegionText:"The region of the remote cloud service where storage is located.",targetAccessKeyText:Wo,targetSecretKeyText:xo,retainHeadObjectText:wo,allowReadThroughText:Lo,storageClassText:Uo,multipartMinPartText:yo,multipartSyncThresholdText:$o,tiertypeText:Ho,glacierRestoreDayText:ko,glacierRestoreTiertypeText:zo,restoreDaysText:Xo,readthroughrestoreDaysText:Bo,restoreStorageClassText:Vo},this.storageClassOptions=[{value:K.LOCAL,label:nt.LOCAL},{value:K.CLOUD_TIER,label:nt.CLOUD_TIER},{value:K.GLACIER,label:nt.GLACIER}],this.createForm(),this.storageClassTypeText(),this.updateTierTypeHelpText(),this.loadingReady(),this.loadZoneGroup(),this.editing&&(this.route.params.subscribe(n=>{this.storageClassInfo=n}),this.rgwStorageService.getPlacement_target(this.storageClassInfo.placement_target).subscribe(n=>{this.tierTargetInfo=this.getTierTargetByStorageClass(n,this.storageClassInfo.storage_class);let t=this.tierTargetInfo?.val?.s3;if(this.storageClassForm.get("zonegroup").disable(),this.storageClassForm.get("placement_target").disable(),this.storageClassForm.get("storage_class").disable(),(this.tierTargetInfo?.val?.tier_type===K.CLOUD_TIER||this.tierTargetInfo?.val?.tier_type===K.GLACIER)&&this.storageClassForm.get("storageClassType").disable(),this.storageClassForm.patchValue({zonegroup:this.storageClassInfo?.zonegroup_name,region:t?.region,placement_target:this.storageClassInfo?.placement_target,storageClassType:this.tierTargetInfo?.val?.tier_type??K.LOCAL,target_endpoint:t?.endpoint,storage_class:this.storageClassInfo?.storage_class,access_key:t?.access_key,secret_key:t?.secret,target_path:t?.target_path,retain_head_object:this.tierTargetInfo?.val?.retain_head_object||!1,multipart_sync_threshold:t?.multipart_sync_threshold||"",multipart_min_part_size:t?.multipart_min_part_size||"",allow_read_through:this.tierTargetInfo?.val?.allow_read_through||!1,restore_storage_class:this.tierTargetInfo?.val?.restore_storage_class,read_through_restore_days:this.tierTargetInfo?.val?.read_through_restore_days}),this.tierTargetInfo?.val?.tier_type==K.GLACIER){let _=this.tierTargetInfo?.val["s3-glacier"];this.storageClassForm.patchValue({glacier_restore_tier_type:_.glacier_restore_tier_type,glacier_restore_days:_.glacier_restore_days})}})),this.storageClassForm.get("storageClassType").valueChanges.subscribe(n=>{this.updateValidatorsBasedOnStorageClass(n)}),this.storageClassForm.get("allow_read_through").valueChanges.subscribe(n=>{this.onAllowReadThroughChange(n)})}updateValidatorsBasedOnStorageClass(n){if(vo.forEach(t=>{const _=this.storageClassForm.get(t);n===K.CLOUD_TIER&&Na.includes(t)||n===K.GLACIER&&vo.includes(t)?_.setValidators([l.Validators.required]):_.clearValidators(),_.updateValueAndValidity()}),this.editing){const t={allow_read_through:!1,read_through_restore_days:ze_DEFAULT_READTHROUGH_RESTORE_DAYS,restore_storage_class:ze_DEFAULT_STORAGE_CLASS,multipart_min_part_size:ze_DEFAULT_MULTIPART_MIN_PART_SIZE,multipart_sync_threshold:ze_DEFAULT_MULTIPART_SYNC_THRESHOLD};Object.keys(t).forEach(_=>{this.storageClassForm.get(_).setValue(t[_])})}}storageClassTypeText(){this.storageClassForm?.get("storageClassType")?.valueChanges.subscribe(n=>{n===K.LOCAL?this.helpTextLabels.storageClassText=Uo:n===K.CLOUD_TIER?this.helpTextLabels.storageClassText=La:n===K.GLACIER&&(this.helpTextLabels.storageClassText=ya)})}updateTierTypeHelpText(){this.storageClassForm?.get("glacier_restore_tier_type")?.valueChanges.subscribe(n=>{this.helpTextLabels.tiertypeText=n===ze_DEFAULT_STORAGE_CLASS?Ho:$a})}createForm(){const n=this,t=F.xQ.custom("lockDays",()=>{if(!n.storageClassForm||!n.storageClassForm.getRawValue())return!1;const _=Number(n.storageClassForm.getValue("read_through_restore_days"));return!Number.isInteger(_)||0===_});this.storageClassForm=this.formBuilder.group({storage_class:new l.FormControl("",{validators:[l.Validators.required]}),zonegroup:new l.FormControl(this.selectedZoneGroup,{validators:[l.Validators.required]}),region:new l.FormControl("",[F.xQ.composeIf({storageClassType:K.CLOUD_TIER},[l.Validators.required])]),placement_target:new l.FormControl("",{validators:[l.Validators.required]}),target_endpoint:new l.FormControl(null,{validators:[F.xQ.url,l.Validators.required]}),access_key:new l.FormControl(null,[F.xQ.composeIf({storageClassType:K.CLOUD_TIER},[l.Validators.required])]),secret_key:new l.FormControl(null,[F.xQ.composeIf({storageClassType:K.CLOUD_TIER},[l.Validators.required])]),target_path:new l.FormControl("",[F.xQ.composeIf({storageClassType:K.CLOUD_TIER},[l.Validators.required])]),retain_head_object:new l.FormControl(!0),glacier_restore_tier_type:new l.FormControl(ze_DEFAULT_STORAGE_CLASS,[F.xQ.composeIf({storageClassType:K.GLACIER},[l.Validators.required])]),glacier_restore_days:new l.FormControl(ze_DEFAULT_GLACIER_RESTORE_DAYS,[F.xQ.composeIf({storageClassType:K.GLACIER||K.CLOUD_TIER},[F.xQ.number(!1),t])]),restore_storage_class:new l.FormControl(ze_DEFAULT_STORAGE_CLASS),read_through_restore_days:new l.FormControl({value:ze_DEFAULT_READTHROUGH_RESTORE_DAYS,disabled:!0},F.xQ.composeIf(_=>{const i=_.get("storageClassType")?.value;return i===K.GLACIER||i===K.CLOUD_TIER},[F.xQ.number(!1),t])),multipart_sync_threshold:new l.FormControl(ze_DEFAULT_MULTIPART_SYNC_THRESHOLD),multipart_min_part_size:new l.FormControl(ze_DEFAULT_MULTIPART_MIN_PART_SIZE),allow_read_through:new l.FormControl(!1),storageClassType:new l.FormControl(K.LOCAL,l.Validators.required)})}loadZoneGroup(){return new Promise((n,t)=>{this.rgwZoneGroupService.getAllZonegroupsInfo().subscribe(_=>{this.zoneGroupDetails=_,this.zonegroupNames=[],this.placementTargets=[],_.zonegroups&&_.zonegroups.length>0&&(this.zonegroupNames=_.zonegroups.map(i=>({id:i.id,name:i.name}))),this.defaultZonegroup=this.zonegroupNames.find(i=>i.id===_.default_zonegroup),this.storageClassForm.get("zonegroup").setValue(this.defaultZonegroup.name),this.onZonegroupChange(),n()},_=>t(_))})}onZonegroupChange(){const n=this.storageClassForm.get("zonegroup").value,t=this.zoneGroupDetails.zonegroups.find(i=>i.name===n),_=t.placement_targets.find(i=>"default-placement"===i.name);if(t){const i=t.placement_targets.map(a=>a.name);this.placementTargets=i}_&&!this.editing?this.storageClassForm.get("placement_target").setValue(_.name):this.storageClassForm.get("placement_target").setValue(this.storageClassInfo.placement_target)}submitAction(){const n=this,t=this.buildRequest(),_=this.storageClassForm.get("storage_class").value;this.editing?this.rgwStorageService.editStorageClass(t).subscribe(()=>{this.notificationService.show(x._.success,$localize`Updated Storage Class '${_}'`),this.goToListView()},()=>{n.storageClassForm.setErrors({cdSubmitButton:!0})}):this.rgwStorageService.createStorageClass(t).subscribe(()=>{this.notificationService.show(x._.success,$localize`Created Storage Class '${_}'`),this.goToListView()},()=>{n.storageClassForm.setErrors({cdSubmitButton:!0})})}goToListView(){this.router.navigate(["rgw/tiering"])}getTierTargetByStorageClass(n,t){return n?.tier_targets?.find(i=>i.val.storage_class===t)}onAllowReadThroughChange(n){this.allowReadThrough=n;const t=this.storageClassForm.get("read_through_restore_days");this.allowReadThrough?(this.storageClassForm.get("retain_head_object")?.setValue(!0),this.storageClassForm.get("retain_head_object")?.disable(),t?.enable()):(this.storageClassForm.get("retain_head_object")?.enable(),t?.disable())}isTierMatch(...n){const t=this.storageClassForm.getValue("storageClassType");return n.includes(t)}buildRequest(){if(this.storageClassForm.errors)return null;const n=N().cloneDeep(this.storageClassForm.value),t=this.storageClassForm.get("zonegroup").value,_=this.storageClassForm.get("storage_class").value,i=this.storageClassForm.get("placement_target").value,a=this.storageClassForm.get("storageClassType").value,r=this.storageClassForm.get("retain_head_object").value,s=this.formatter.toBytes(this.storageClassForm.get("multipart_min_part_size").value),d=this.formatter.toBytes(this.storageClassForm.get("multipart_sync_threshold").value);return this.buildPlacementTargets(a,t,i,_,r,n,d,s)}buildPlacementTargets(n,t,_,i,a,r,s,d){const u={placement_id:_,storage_class:i};if(n===K.LOCAL)return{zone_group:t,placement_targets:[u]};const m={endpoint:r.target_endpoint,access_key:r.access_key,secret:r.secret_key,target_path:r.target_path,retain_head_object:a,allow_read_through:r.allow_read_through,region:r.region,multipart_sync_threshold:s,multipart_min_part_size:d,restore_storage_class:r.restore_storage_class,...r.allow_read_through?{read_through_restore_days:r.read_through_restore_days}:{}};return n===K.CLOUD_TIER?{zone_group:t,placement_targets:[{...u,tier_type:K.CLOUD_TIER,tier_config:{...m}}]}:n===K.GLACIER?{zone_group:t,placement_targets:[{...u,tier_type:K.GLACIER,tier_config:{...m,glacier_restore_days:r.glacier_restore_days,glacier_restore_tier_type:r.glacier_restore_tier_type}}]}:{zone_group:t,placement_targets:[u]}}static{this.\u0275fac=function(t){return new(t||tn)(e.\u0275\u0275directiveInject(M.Ss),e.\u0275\u0275directiveInject(Ne.$),e.\u0275\u0275directiveInject(te.J),e.\u0275\u0275directiveInject(vt),e.\u0275\u0275directiveInject(ke.Z),e.\u0275\u0275directiveInject(Y.Router),e.\u0275\u0275directiveInject(Y.ActivatedRoute),e.\u0275\u0275directiveInject(we.k))}}static{this.\u0275cmp=e.\u0275\u0275defineComponent({type:tn,selectors:[["cd-rgw-storage-class-form"]],features:[e.\u0275\u0275InheritDefinitionFeature],decls:2,vars:3,consts:()=>{let n,t,_,i,a,r,s,d,u,m,C,O,f,I,R,h,G,U,k,y,H,X,B,V,S,P,ee,Q,q,J,$,_e,D,W,ce,de,ue,pe,me,Te,ge,le,Ee,Re,Ce,fe;return n=$localize`:␟f61c6867295f3b53d23557021f2f4e0aa1d0b8fc␟8650499415827640724:Type`,t=$localize`:␟4e441008994226032fc08dc6aa5295451e317e22␟9179322500224757581:Zone Group Name`,_=$localize`:␟16bb91d2e3afbe223134553d0d87aff89f97491d␟5836839348898762740:Placement Target`,i=$localize`:form title␟b881b2916943c1a415ca45802eb16714b8373a2c␟6540507696424174573: ${"\ufffd0\ufffd"}:INTERPOLATION: ${"\ufffd1\ufffd"}:INTERPOLATION_1: ${"\ufffd#7\ufffd"}:START_TAG_CD_HELP_TEXT:${"\ufffd/#7\ufffd"}:CLOSE_TAG_CD_HELP_TEXT:`,a=$localize`:␟82894db6a31ab186f7823063321a02bc425f72cd␟9049846386867442371:-- Select Storage Class --`,r=$localize`:␟ab92011e3126ffb37c11786544552754ace5901a␟2265508833759646546:--Select--`,s=$localize`:␟29645d4f82a29e8ee4c0cd5e5fbdce60159f73ba␟7630652246532918874:Name ${"\ufffd#31\ufffd\ufffd/#31\ufffd"}:TAG_INPUT:`,d=$localize`:␟cead5bd6d3bd002f70919f6637b66b649cf4987e␟2008222863512418606: ${"\ufffd0\ufffd"}:INTERPOLATION: `,u=$localize`:␟7cbdabcece469fab89cfa687ab152bca18b97498␟1417693714872528491:This field is required.`,m=$localize`:␟5f7300c3433ffb6ecf978c0328e38a735adf5c6b␟3187802515423037207: ${"\ufffd0\ufffd"}:INTERPOLATION: `,C=$localize`:␟7cbdabcece469fab89cfa687ab152bca18b97498␟1417693714872528491:This field is required.`,O=$localize`:␟1e59cf92fe867fa2bad6f72e9ff3ba4d786c748d␟8204449596381022587: ${"\ufffd0\ufffd"}:INTERPOLATION: `,f=$localize`:␟7cbdabcece469fab89cfa687ab152bca18b97498␟1417693714872528491:This field is required.`,I=$localize`:␟7cbdabcece469fab89cfa687ab152bca18b97498␟1417693714872528491:This field is required.`,R=$localize`:␟8ba3852d9599f53007f0df33c69209df3308b5e0␟4667910519407007676:e.g, us-east-1`,h=$localize`:␟b18c001eeea0c9bcd2da67f7f246cd40d95926b3␟7088695744277669717:e.g, http://ceph-node-00.com:80`,G=$localize`:␟539a0e5dd18224adacb78edf23b4688588862426␟7557243959347560825:ReadThrough Restore Days`,U=$localize`:␟77b24ddf98c6b86e64b08b9b1aeb4ba839c624b0␟1702519005149775494:Restore Storage Class`,k=$localize`:␟ed4d2869b0dc2b25931e5cebbbdf3d745e8eaf07␟8176704823398233492:Target Region ${"\ufffd#5\ufffd\ufffd/#5\ufffd"}:TAG_INPUT:`,y=$localize`:␟8fee52797209bd05b65b83c917255376dfe483d5␟3831136861378860888:Target Endpoint ${"\ufffd#11\ufffd\ufffd/#11\ufffd"}:TAG_INPUT:`,H=$localize`:␟177a16104249f663d31d105c32ec3c75f443d44e␟2176006464620688904:Target Access Key ${"\ufffd#18\ufffd\ufffd/#18\ufffd"}:TAG_INPUT:`,X=$localize`:␟10079a38f2736ba92a3791ea528b9fe68bd8d5bd␟3822459347807172855:Target Secret Key ${"\ufffd#26\ufffd\ufffd/#26\ufffd"}:TAG_INPUT:`,B=$localize`:␟08fc8a274aeb502d14e01c60906919e4c631490d␟6991803018875046854:Target Path ${"\ufffd#33\ufffd\ufffd/#33\ufffd"}:TAG_INPUT:`,V=$localize`:␟6964bbeabbfc8d3a7c0b0d90d9f46e7ff7cc8b5b␟6963591933903466263:Allow Read Through ${"\ufffd#39\ufffd"}:START_TAG_CD_HELP_TEXT:${"\ufffd0\ufffd"}:INTERPOLATION:${"\ufffd/#39\ufffd"}:CLOSE_TAG_CD_HELP_TEXT:`,S=$localize`:␟527f1ceac9760899f27736c94f38ba224d50c1a4␟1351326972248620929:Head Object (Stub File) ${"\ufffd#43\ufffd"}:START_TAG_CD_HELP_TEXT:${"\ufffd0\ufffd"}:INTERPOLATION:${"\ufffd/#43\ufffd"}:CLOSE_TAG_CD_HELP_TEXT:`,P=$localize`:␟4ba5e4fa4053a50bee1fec118e60ece42944d361␟3579615038642215285:-- Select the glacier restore storage class --`,ee=$localize`:␟55d2c659d583048ef273f0d8b69fd38e2c09a500␟2798807656507405918:Standard`,Q=$localize`:␟7cbdabcece469fab89cfa687ab152bca18b97498␟1417693714872528491:This field is required.`,q=$localize`:␟7cbdabcece469fab89cfa687ab152bca18b97498␟1417693714872528491:This field is required.`,J=$localize`:␟9ddccf3ea37d9232c2f47f32d4b884b4d416daf5␟4061698394390279322:Please enter a valid URL.`,$=$localize`:␟7cbdabcece469fab89cfa687ab152bca18b97498␟1417693714872528491:This field is required.`,_e=$localize`:␟7cbdabcece469fab89cfa687ab152bca18b97498␟1417693714872528491:This field is required.`,D=$localize`:␟7cbdabcece469fab89cfa687ab152bca18b97498␟1417693714872528491:This field is required.`,W=$localize`:␟289b101ec12427b3ca819df9e43cc3b14fae2cc4␟2191011361163902177:The entered value must be a positive integer.`,ce=$localize`:␟b33c1c37d1c7de7335e4cf8324553728147d0cce␟4648222200315860475:ReadThrough Restore Days must be positive.`,de=$localize`:␟c4946918c049920d323f2305d657b31a47c9389f␟7609073023293300000:Glacier Restore Tier Type`,ue=$localize`:␟8ff77adc37b4dd5c92334cebd9771825faf0e8e3␟8231660736289285381:Glacier Configuration`,pe=$localize`:␟357502673f40fd064140219cc841a81a937b25b4␟8312970803593027544:-- Select the glacier restore tier type --`,me=$localize`:␟55d2c659d583048ef273f0d8b69fd38e2c09a500␟2798807656507405918:Standard`,Te=$localize`:␟feb5df6d07003413b5366db1bca5e6821398ed27␟4333337618323065531:Expedited`,ge=$localize`:␟7cbdabcece469fab89cfa687ab152bca18b97498␟1417693714872528491:This field is required.`,le=$localize`:␟289b101ec12427b3ca819df9e43cc3b14fae2cc4␟2191011361163902177:The entered value must be a positive integer.`,Ee=$localize`:␟acdc7f875cd8d2cc60840685711f2b19d7e5c17c␟3028015002795577186:Glacier Restore Days must be positive.`,Re=$localize`:␟1635249575408e1a5bdb9802a259bf52e16be232␟597728001565843878:Multipart Sync Threshold ${"\ufffd#11\ufffd\ufffd/#11\ufffd"}:TAG_INPUT:`,Ce=$localize`:␟e498e0bc3cb24487891b0aee252b889a25dcf847␟4347950498140646580:Multipart Minimum Part Size ${"\ufffd#15\ufffd\ufffd/#15\ufffd"}:TAG_INPUT:`,fe=$localize`:␟97ec96841f6cca782837af2c48a7ced36a52a05b␟2019037227440479070:RGW service would be restarted after creating the storage class.`,[["formDir","ngForm"],["storageError",""],["zonegroupError",""],["placementError",""],["storageClassError",""],["regionError",""],["endpointError",""],["accessError",""],["secretError",""],["targetError",""],["readThroughError",""],["glacierError",""],["glacierRestoreError",""],["title",""],i,a,r,s,d,u,m,C,O,f,I,k,y,H,X,B,V,S,P,ee,Q,q,J,$,_e,D,W,ce,ue,pe,me,Te,ge,le,Ee,Re,Ce,fe,["cdsCol","",3,"columnNumbers"],[4,"cdFormLoading"],["name","storageClassForm","novalidate","",3,"formGroup"],[1,"form-header"],[3,"formAllFieldsRequired"],[1,"form-item"],["label",n,"for","storageClassType","formControlName","storageClassType","id","storageClassType",3,"helperText","invalid","invalidText"],["value",""],[3,"value",4,"ngFor","ngForOf"],["cdsRow","",1,"form-item","form-item-append"],["cdsCol",""],["label",t,"formControlName","zonegroup","id","zonegroup",3,"change","invalid","invalidText"],[3,"value","selected",4,"ngFor","ngForOf"],["label",_,"formControlName","placement_target","id","placement_target",3,"invalid","invalidText"],[3,"value"],["labelInputID","storage_class",3,"disabled","invalid","invalidText"],["cdsText","","type","type","id","storage_class","formControlName","storage_class",3,"invalid"],["type","warning","spacingClass","mb-2"],["wrappingClass","text-right",3,"submitActionEvent","form","submitText"],["class","invalid-feedback",4,"ngIf"],[1,"invalid-feedback"],[3,"value","selected"],["labelInputID","region",3,"invalid","invalidText","helperText"],["cdsText","","type","text","id","region","formControlName","region","placeholder",R,3,"invalid"],["labelInputID","target_endpoint",3,"invalid","invalidText","helperText"],["cdsText","","type","text","placeholder",h,"id","target_endpoint","formControlName","target_endpoint",3,"invalid","invalidText"],["cdsCol","",1,"d-flex",3,"columnNumbers"],["labelInputID","access_key",3,"invalid","invalidText","helperText"],["cdsPassword","","type","password","id","access_key","formControlName","access_key",3,"invalid"],[1,"clipboard"],["labelInputID","secret_key",3,"helperText","invalid","invalidText"],["cdsPassword","","type","password","id","secret_key","formControlName","secret_key",3,"invalid"],["labelInputID","target_path",3,"invalid","invalidText","helperText"],["cdsText","","type","text","id","target_path","formControlName","target_path",3,"invalid"],["id","allow_read_through","formControlName","allow_read_through","cdOptionalField","Allow Read Through",3,"change"],["id","retain_head_object","formControlName","retain_head_object","cdOptionalField","Head Object (Stub File)"],["name","read_through_restore_days","formControlName","read_through_restore_days","id","read_through_restore_days","min","1","label",G,3,"helperText","invalid","invalidText"],["formControlName","restore_storage_class","label",U,"id","restore_storage_class",3,"helperText"],[3,"ngValue"],[1,"cd-header"],["formControlName","glacier_restore_tier_type","label",de,"cdRequiredField","Glacier Restore Tier Type","id","glacier_restore_tier_type",3,"invalid","invalidText","helperText"],[3,"id","formControlName","label","helperText","min","invalid","invalidText"],["size","lg",1,"form-item"],["id","advanced-fieldset",3,"selected","title"],["labelInputID","multipart_sync_threshold","cdOptionalField","Multipart Sync Threshold",3,"helperText"],["cdsText","","type","text","id","multipart_sync_threshold","formControlName","multipart_sync_threshold","cdDimlessBinary",""],["labelInputID","multipart_min_part_size","cdOptionalField","Multipart Minimum Part Size",3,"helperText"],["cdsText","","type","text","id","multipart_min_part_size","formControlName","multipart_min_part_size","cdDimlessBinary",""],[1,"cds--accordion__title","cd-header"]]},template:function(t,_){1&t&&(e.\u0275\u0275elementStart(0,"div",52),e.\u0275\u0275template(1,DR,41,32,"ng-container",53),e.\u0275\u0275elementEnd()),2&t&&(e.\u0275\u0275property("columnNumbers",e.\u0275\u0275pureFunction0(2,eR)),e.\u0275\u0275advance(),e.\u0275\u0275property("cdFormLoading",_.loading))},dependencies:[g.NgForOf,g.NgIf,Ie.m,_t.N,oe.e,ie.O,go.Y,St.G,j.S,ne.E,Qe.P,JE.O,l.\u0275NgNoValidate,l.NgSelectOption,l.\u0275NgSelectMultipleOption,l.DefaultValueAccessor,l.NgControlStatus,l.NgControlStatusGroup,l.FormGroupDirective,l.FormControlName,c.ColumnDirective,c.RowDirective,c.TextInputLabelComponent,c.PasswordInputLabelComponent,c.TextInput,c.PasswordInput,c.Accordion,c.AccordionItem,c.Checkbox,c.NumberComponent,c.Select,c.Option,g.TitleCasePipe,Oe.r],styles:[".clipboard[_ngcontent-%COMP%]{margin-top:1.5rem}"]})}}var WR=T(38157);function xR(o,n){if(1&o&&(e.\u0275\u0275elementContainerStart(0),e.\u0275\u0275elementStart(1,"cds-tabs",13)(2,"cds-tab",14)(3,"table",15)(4,"tbody")(5,"tr")(6,"td",16),e.\u0275\u0275i18n(7,0),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(8,"td"),e.\u0275\u0275text(9),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(10,"tr")(11,"td",17),e.\u0275\u0275i18n(12,1),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(13,"td",18),e.\u0275\u0275text(14),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(15,"tr")(16,"td",17),e.\u0275\u0275i18n(17,2),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(18,"td",18),e.\u0275\u0275text(19),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(20,"tr")(21,"td",17),e.\u0275\u0275i18n(22,3),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(23,"td",18),e.\u0275\u0275text(24),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(25,"tr")(26,"td",16),e.\u0275\u0275i18n(27,4),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(28,"td"),e.\u0275\u0275text(29),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(30,"tr")(31,"td",16),e.\u0275\u0275i18n(32,5),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(33,"td"),e.\u0275\u0275text(34),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(35,"tr")(36,"td",16),e.\u0275\u0275i18n(37,6),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(38,"td"),e.\u0275\u0275text(39),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(40,"tr")(41,"td",16),e.\u0275\u0275i18n(42,7),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(43,"td"),e.\u0275\u0275text(44),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(45,"tr")(46,"td",16),e.\u0275\u0275i18n(47,8),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(48,"td"),e.\u0275\u0275text(49),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(50,"tr")(51,"td",16),e.\u0275\u0275i18n(52,9),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(53,"td"),e.\u0275\u0275text(54),e.\u0275\u0275elementEnd()()()()(),e.\u0275\u0275elementStart(55,"cds-tab",19)(56,"div",20)(57,"table",21)(58,"tbody")(59,"tr")(60,"td",17),e.\u0275\u0275i18n(61,10),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(62,"td")(63,"pre"),e.\u0275\u0275text(64),e.\u0275\u0275pipe(65,"json"),e.\u0275\u0275elementEnd()()()()()()(),e.\u0275\u0275elementStart(66,"cds-tab",22)(67,"table",21)(68,"tbody")(69,"tr")(70,"td",17),e.\u0275\u0275i18n(71,11),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(72,"td")(73,"pre"),e.\u0275\u0275text(74),e.\u0275\u0275pipe(75,"json"),e.\u0275\u0275elementEnd()()()()()()(),e.\u0275\u0275elementContainerEnd()),2&o){const t=e.\u0275\u0275nextContext();e.\u0275\u0275advance(9),e.\u0275\u0275textInterpolate(null==t.selection||null==t.selection.dest?null:t.selection.dest.push_endpoint_args),e.\u0275\u0275advance(5),e.\u0275\u0275textInterpolate(null==t.selection||null==t.selection.dest?null:t.selection.dest.push_endpoint_topic),e.\u0275\u0275advance(5),e.\u0275\u0275textInterpolate(null==t.selection||null==t.selection.dest?null:t.selection.dest.push_endpoint),e.\u0275\u0275advance(5),e.\u0275\u0275textInterpolate(null==t.selection||null==t.selection.dest?null:t.selection.dest.stored_secret),e.\u0275\u0275advance(5),e.\u0275\u0275textInterpolate(null==t.selection||null==t.selection.dest?null:t.selection.dest.persistent),e.\u0275\u0275advance(5),e.\u0275\u0275textInterpolate(null==t.selection||null==t.selection.dest?null:t.selection.dest.persistent_queue),e.\u0275\u0275advance(5),e.\u0275\u0275textInterpolate(null==t.selection||null==t.selection.dest?null:t.selection.dest.time_to_live),e.\u0275\u0275advance(5),e.\u0275\u0275textInterpolate(null==t.selection||null==t.selection.dest?null:t.selection.dest.max_retries),e.\u0275\u0275advance(5),e.\u0275\u0275textInterpolate(null==t.selection||null==t.selection.dest?null:t.selection.dest.retry_sleep_duration),e.\u0275\u0275advance(5),e.\u0275\u0275textInterpolate(null==t.selection?null:t.selection.opaqueData),e.\u0275\u0275advance(10),e.\u0275\u0275textInterpolate(e.\u0275\u0275pipeBind1(65,12,t.policy)),e.\u0275\u0275advance(10),e.\u0275\u0275textInterpolate(e.\u0275\u0275pipeBind1(75,14,t.selection.subscribed_buckets))}}class io{constructor(){this.policy="{}"}ngOnChanges(n){if(n.selection&&this.selection)if(Lt.isString(this.selection.policy))try{this.policy=JSON.parse(this.selection.policy)}catch{this.policy="{}"}else this.policy=this.selection.policy||{}}static{this.\u0275fac=function(t){return new(t||io)}}static{this.\u0275cmp=e.\u0275\u0275defineComponent({type:io,selectors:[["cd-rgw-topic-details"]],inputs:{selection:"selection"},features:[e.\u0275\u0275NgOnChangesFeature],decls:1,vars:1,consts:()=>{let n,t,_,i,a,r,s,d,u,m,C,O,f,I,R;return n=$localize`:␟4f8b2bb476981727ab34ed40fde1218361f92c45␟5028777105388019087:Details`,t=$localize`:␟3e89f7faf308063adb8548100889a129913c86b2␟4551581141684694255:Policies`,_=$localize`:␟2e2b701847a5bca02840c244778a5fbf7628463c␟7816415440833508590:Subscribed buckets`,i=$localize`:␟495af4ef7002cd1c2d709aa9c9b9c03e7026b104␟1781320938034368630:Push endpoint arguments`,a=$localize`:␟58e377a7f16079560ac0401e5e361c41c48b79eb␟4649065967382447822:Push endpoint topic`,r=$localize`:␟a8de1b18a64699f1531eb2a895fe3e92566b4e10␟2173940396084702490:Push endpoint`,s=$localize`:␟7a3670393dfdbc820cfe60760ba420942144ade1␟6075367970799801652:Stored secret`,d=$localize`:␟117f6a930dfb6fe83a36afafac16a1f18f8bf0fd␟6076000394909025469:Persistent`,u=$localize`:␟5b128d9dea19be671e30fee6e9e1e4e4eae508b7␟1774765314844478406:Persistent queue`,m=$localize`:␟41c06b9838f1d329a0fb0c721b97854e5080330d␟3902153741611581562:Time to live`,C=$localize`:␟decdb0eafa0d7563d570474f2635b97e667f5ecc␟1551046061830851610:Max retries`,O=$localize`:␟bdb3760613b25efb8985ece12e713b0c66062dbf␟6359122727286279829:Retry sleep duration`,f=$localize`:␟58676ffc5169eb5485bc6885e8e845d879866d12␟6031341865313401805:Opaque data`,I=$localize`:␟81984035ddcbc0c4cf205b103c9e0a100be3765b␟1690636272435370777:Policy`,R=$localize`:␟2e2b701847a5bca02840c244778a5fbf7628463c␟7816415440833508590:Subscribed buckets`,[i,a,r,s,d,u,m,C,O,f,I,R,[4,"ngIf"],["type","contained","theme","light"],["heading",n],["data-testid","rgw-topic-details",1,"cds--data-table--sort","cds--data-table--no-border","cds--data-table","cds--data-table--md"],[1,"bold"],[1,"bold","w-25"],[1,"w-75"],["heading",t],[1,"table-scroller"],[1,"cds--data-table--sort","cds--data-table--no-border","cds--data-table","cds--data-table--md"],["heading",_]]},template:function(t,_){1&t&&e.\u0275\u0275template(0,xR,76,16,"ng-container",12),2&t&&e.\u0275\u0275property("ngIf",!!_.selection)},dependencies:[g.NgIf,c.Tabs,c.Tab,g.JsonPipe]})}}const wR=["table"];function UR(o,n){if(1&o&&e.\u0275\u0275element(0,"cd-rgw-topic-details",4),2&o){const t=e.\u0275\u0275nextContext();e.\u0275\u0275property("selection",t.expandedRow)}}class ao extends et.D{constructor(n,t,_,i,a,r,s){super(s),this.authStorageService=n,this.actionLabels=t,this.rgwTopicService=_,this.modalService=i,this.urlBuilder=a,this.taskWrapper=r,this.ngZone=s,this.selection=new Ge.y,this.topicsSubject=new w.BehaviorSubject([]),this.topics$=this.topicsSubject.asObservable(),this.permission=this.authStorageService.getPermissions().rgw}ngOnInit(){this.columns=[{name:$localize`Name`,prop:"name",flexGrow:2},{name:$localize`Owner`,prop:"owner",flexGrow:2},{name:$localize`Amazon resource name`,prop:"arn",flexGrow:2},{name:$localize`Push endpoint`,prop:"dest.push_endpoint",flexGrow:2}];const n=()=>this.selection.first()&&`${encodeURIComponent(this.selection.first().key)}`,t={permission:"create",icon:L.FI.add,routerLink:()=>this.urlBuilder.getCreate(),name:this.actionLabels.CREATE,canBePrimary:a=>!a.hasSelection},_={permission:"update",icon:L.FI.edit,routerLink:()=>this.urlBuilder.getEdit(n()),name:this.actionLabels.EDIT},i={permission:"delete",icon:L.FI.destroy,click:()=>this.deleteAction(),disable:()=>!this.selection.hasSelection,name:this.actionLabels.DELETE,canBePrimary:a=>!a.hasSelection};this.tableActions=[t,_,i],this.setTableRefreshTimeout(),this.topics$=this.topicsSubject.pipe((0,Z.switchMap)(()=>this.rgwTopicService.listTopic().pipe((0,Z.catchError)(()=>(this.context.error(),(0,w.of)(null))))),(0,Z.shareReplay)(1))}fetchData(){this.topicsSubject.next([])}updateSelection(n){this.selection=n}deleteAction(){const n=this.selection.first().key,t=this.selection.first().name;this.modalService.show(Ue.D,{itemDescription:$localize`Topic`,itemNames:[t],submitActionObservable:()=>new w.Observable(_=>{this.taskWrapper.wrapTaskAroundCall({task:new Ft.O("rgw/topic/delete",{name:[t]}),call:this.rgwTopicService.delete(n)}).subscribe({error:i=>{_.error(i)},complete:()=>{_.complete(),this.table.refreshBtn()}})})})}static{this.\u0275fac=function(t){return new(t||ao)(e.\u0275\u0275directiveInject(be.v),e.\u0275\u0275directiveInject(M.Ss),e.\u0275\u0275directiveInject(Mt),e.\u0275\u0275directiveInject(he.V),e.\u0275\u0275directiveInject(se.E),e.\u0275\u0275directiveInject(Nt.a),e.\u0275\u0275directiveInject(e.NgZone))}}static{this.\u0275cmp=e.\u0275\u0275defineComponent({type:ao,selectors:[["cd-rgw-topic-list"]],viewQuery:function(t,_){if(1&t&&e.\u0275\u0275viewQuery(wR,7),2&t){let i;e.\u0275\u0275queryRefresh(i=e.\u0275\u0275loadQuery())&&(_.table=i.first)}},features:[e.\u0275\u0275ProvidersFeature([{provide:se.E,useValue:new se.E("rgw/topic")}]),e.\u0275\u0275InheritDefinitionFeature],decls:6,vars:9,consts:[["table",""],["columnMode","flex","selectionType","single","id","key",3,"setExpandedRow","updateSelection","fetchData","autoReload","data","columns","hasDetails"],[1,"table-actions",3,"permission","selection","tableActions"],[3,"selection",4,"cdTableDetail"],[3,"selection"]],template:function(t,_){if(1&t){const i=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementContainerStart(0),e.\u0275\u0275elementStart(1,"cd-table",1,0),e.\u0275\u0275pipe(3,"async"),e.\u0275\u0275listener("setExpandedRow",function(r){return e.\u0275\u0275restoreView(i),e.\u0275\u0275resetView(_.setExpandedRow(r))})("updateSelection",function(r){return e.\u0275\u0275restoreView(i),e.\u0275\u0275resetView(_.updateSelection(r))})("fetchData",function(){return e.\u0275\u0275restoreView(i),e.\u0275\u0275resetView(_.fetchData())}),e.\u0275\u0275element(4,"cd-table-actions",2),e.\u0275\u0275template(5,UR,1,1,"cd-rgw-topic-details",3),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementContainerEnd()}2&t&&(e.\u0275\u0275advance(),e.\u0275\u0275property("autoReload",!1)("data",e.\u0275\u0275pipeBind1(3,7,_.topics$))("columns",_.columns)("hasDetails",!0),e.\u0275\u0275advance(3),e.\u0275\u0275property("permission",_.permission)("selection",_.selection)("tableActions",_.tableActions))},dependencies:[ae.O,$e.j,ot.N,io,g.AsyncPipe]})}}const u_={PLAIN:"PLAIN",SCRAM256:"SCRAM-SHA-256",SCRAM512:"SCRAM-SHA-512"},zR={HTTP:"HTTP",AMQP:"AMQP",Kafka:"KAFKA"},HR={none:"none",broker:"broker",routable:"routable"},XR={none:"none",broker:"broker"};var je,Gt,re,Ve;!function(o){o.HTTP="80",o.HTTPS="443",o.AMQP="5672",o.AMQPS="5671",o.KAFKA="9092",o.KAFKA_SSL="9093"}(je||(je={})),function(o){o.http="http",o.https="https",o.amqp="amqp",o.amqps="amqps",o.kafka="kafka"}(Gt||(Gt={})),function(o){o.HTTP="HTTP",o.AMQP="AMQP",o.AMQPS="AMQPS",o.KAFKA="KAFKA"}(re||(re={})),function(o){o.HTTP="http:",o.HTTPS="https:",o.AMQP="amqp:",o.AMQPS="amqps:",o.KAFKA="kafka"}(Ve||(Ve={}));const Io_http="http[s]://<fqdn>[:<port]...",Io_amqp="amqp[s]://[<user>:<password>@]<fqdn>[:<port>][/<vhost>]...",Io_kafka="kafka://[<user>:<password>@]<fqdn>[:<port>]...",BR=["topicPolicyTextArea"],VR=()=>({md:4}),ro=()=>({sm:4});function ZR(o,n){1&o&&(e.\u0275\u0275elementStart(0,"option",71),e.\u0275\u0275i18n(1,10),e.\u0275\u0275elementEnd())}function KR(o,n){1&o&&(e.\u0275\u0275elementStart(0,"option",72),e.\u0275\u0275i18n(1,11),e.\u0275\u0275elementEnd())}function qR(o,n){if(1&o&&(e.\u0275\u0275elementStart(0,"option"),e.\u0275\u0275i18n(1,12),e.\u0275\u0275pipe(2,"upperFirst"),e.\u0275\u0275elementEnd()),2&o){const t=n.$implicit;e.\u0275\u0275advance(2),e.\u0275\u0275i18nExp(e.\u0275\u0275pipeBind1(2,1,t)),e.\u0275\u0275i18nApply(1)}}function jR(o,n){1&o&&(e.\u0275\u0275elementStart(0,"span",74),e.\u0275\u0275i18n(1,13),e.\u0275\u0275elementEnd())}function YR(o,n){if(1&o&&e.\u0275\u0275template(0,jR,2,0,"span",73),2&o){e.\u0275\u0275nextContext();const t=e.\u0275\u0275reference(2),_=e.\u0275\u0275nextContext();e.\u0275\u0275property("ngIf",_.topicForm.showError("endpointType",t,"required"))}}function QR(o,n){1&o&&(e.\u0275\u0275elementStart(0,"option",71),e.\u0275\u0275i18n(1,14),e.\u0275\u0275elementEnd())}function JR(o,n){1&o&&(e.\u0275\u0275elementStart(0,"option",72),e.\u0275\u0275i18n(1,15),e.\u0275\u0275elementEnd())}function eC(o,n){if(1&o&&(e.\u0275\u0275elementStart(0,"option",75),e.\u0275\u0275i18n(1,16),e.\u0275\u0275elementEnd()),2&o){const t=n.$implicit;e.\u0275\u0275property("value",t),e.\u0275\u0275advance(),e.\u0275\u0275i18nExp(t),e.\u0275\u0275i18nApply(1)}}function tC(o,n){1&o&&(e.\u0275\u0275elementStart(0,"span",74),e.\u0275\u0275i18n(1,17),e.\u0275\u0275elementEnd())}function nC(o,n){if(1&o&&e.\u0275\u0275template(0,tC,2,0,"span",73),2&o){e.\u0275\u0275nextContext();const t=e.\u0275\u0275reference(2),_=e.\u0275\u0275nextContext();e.\u0275\u0275property("ngIf",_.topicForm.showError("owner",t,"required"))}}function oC(o,n){1&o&&(e.\u0275\u0275elementStart(0,"span",74),e.\u0275\u0275i18n(1,33),e.\u0275\u0275elementEnd())}function _C(o,n){1&o&&(e.\u0275\u0275elementStart(0,"span",74),e.\u0275\u0275i18n(1,34),e.\u0275\u0275elementEnd())}function iC(o,n){if(1&o&&e.\u0275\u0275template(0,oC,2,0,"span",73)(1,_C,2,0,"span",73),2&o){e.\u0275\u0275nextContext(2);const t=e.\u0275\u0275reference(2),_=e.\u0275\u0275nextContext();e.\u0275\u0275property("ngIf",_.topicForm.showError("name",t,"required")),e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf",_.topicForm.showError("name",t,"notUnique"))}}function aC(o,n){1&o&&(e.\u0275\u0275elementStart(0,"div",57)(1,"cds-checkbox",102),e.\u0275\u0275elementContainerStart(2),e.\u0275\u0275i18n(3,35),e.\u0275\u0275elementContainerEnd(),e.\u0275\u0275elementStart(4,"cd-help-text"),e.\u0275\u0275i18n(5,36),e.\u0275\u0275elementEnd()()()),2&o&&e.\u0275\u0275property("columnNumbers",e.\u0275\u0275pureFunction0(1,ro))}function rC(o,n){1&o&&(e.\u0275\u0275elementStart(0,"div",57)(1,"cds-checkbox",103),e.\u0275\u0275elementContainerStart(2),e.\u0275\u0275i18n(3,37),e.\u0275\u0275elementContainerEnd(),e.\u0275\u0275elementStart(4,"cd-help-text"),e.\u0275\u0275i18n(5,38),e.\u0275\u0275elementEnd()()()),2&o&&e.\u0275\u0275property("columnNumbers",e.\u0275\u0275pureFunction0(1,ro))}function lC(o,n){1&o&&(e.\u0275\u0275elementStart(0,"span",74),e.\u0275\u0275text(1,"This field is required"),e.\u0275\u0275elementEnd())}function sC(o,n){if(1&o&&e.\u0275\u0275template(0,lC,2,0,"span",73),2&o){e.\u0275\u0275nextContext(2);const t=e.\u0275\u0275reference(2),_=e.\u0275\u0275nextContext();e.\u0275\u0275property("ngIf",_.topicForm.showError("fqdn",t,"required"))}}function cC(o,n){1&o&&(e.\u0275\u0275elementStart(0,"span",74),e.\u0275\u0275i18n(1,39),e.\u0275\u0275elementEnd())}function dC(o,n){1&o&&(e.\u0275\u0275elementStart(0,"span",74),e.\u0275\u0275i18n(1,40),e.\u0275\u0275elementEnd())}function uC(o,n){if(1&o&&e.\u0275\u0275template(0,cC,2,0,"span",73)(1,dC,2,0,"span",73),2&o){e.\u0275\u0275nextContext(2);const t=e.\u0275\u0275reference(2),_=e.\u0275\u0275nextContext();e.\u0275\u0275property("ngIf",_.topicForm.showError("port",t,"required")),e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf",_.topicForm.controls.port.hasError("pattern")&&_.topicForm.controls.port.touched)}}function pC(o,n){1&o&&(e.\u0275\u0275elementStart(0,"span",74),e.\u0275\u0275i18n(1,43),e.\u0275\u0275elementEnd())}function mC(o,n){if(1&o&&(e.\u0275\u0275elementStart(0,"span",74),e.\u0275\u0275text(1),e.\u0275\u0275elementEnd()),2&o){const t=e.\u0275\u0275nextContext(6);e.\u0275\u0275advance(),e.\u0275\u0275textInterpolate1(" ",t.passwordValuation," ")}}function TC(o,n){if(1&o&&e.\u0275\u0275template(0,pC,2,0,"span",73)(1,mC,2,1,"span",73),2&o){e.\u0275\u0275nextContext(4);const t=e.\u0275\u0275reference(2),_=e.\u0275\u0275nextContext();e.\u0275\u0275property("ngIf",_.userForm.showError("password",t,"required")),e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf",_.userForm.showError("password",t,"passwordPolicy"))}}function gC(o,n){if(1&o){const t=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"div",61)(1,"cds-password-label",107),e.\u0275\u0275i18nStart(2,42),e.\u0275\u0275elementStart(3,"input",108),e.\u0275\u0275listener("change",function(){e.\u0275\u0275restoreView(t);const i=e.\u0275\u0275nextContext(4);return e.\u0275\u0275resetView(i.generatePushEndpoint())}),e.\u0275\u0275elementEnd(),e.\u0275\u0275i18nEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275template(4,TC,2,2,"ng-template",null,8,e.\u0275\u0275templateRefExtractor),e.\u0275\u0275elementEnd()}if(2&o){const t=e.\u0275\u0275reference(5),_=e.\u0275\u0275nextContext(4);e.\u0275\u0275advance(),e.\u0275\u0275property("invalid",!_.topicForm.controls.password.valid&&_.topicForm.controls.password.dirty)("invalidText",t)}}function EC(o,n){if(1&o){const t=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"div",60)(1,"div",61)(2,"cds-text-label",104),e.\u0275\u0275i18nStart(3,41),e.\u0275\u0275elementStart(4,"input",105),e.\u0275\u0275listener("change",function(){e.\u0275\u0275restoreView(t);const i=e.\u0275\u0275nextContext(3);return e.\u0275\u0275resetView(i.generatePushEndpoint())}),e.\u0275\u0275elementEnd(),e.\u0275\u0275i18nEnd(),e.\u0275\u0275elementEnd()(),e.\u0275\u0275template(5,gC,6,2,"div",106),e.\u0275\u0275elementEnd()}if(2&o){const t=e.\u0275\u0275nextContext(3);e.\u0275\u0275advance(5),e.\u0275\u0275property("ngIf",t.selectedOption!==t.hostProtocols.HTTP)}}function RC(o,n){if(1&o){const t=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"div",60)(1,"div",61)(2,"cds-text-label",109),e.\u0275\u0275i18nStart(3,44),e.\u0275\u0275elementStart(4,"input",110),e.\u0275\u0275listener("change",function(){e.\u0275\u0275restoreView(t);const i=e.\u0275\u0275nextContext(3);return e.\u0275\u0275resetView(i.generatePushEndpoint())}),e.\u0275\u0275elementEnd(),e.\u0275\u0275i18nEnd(),e.\u0275\u0275elementEnd()()()}}function CC(o,n){1&o&&(e.\u0275\u0275elementStart(0,"span",74),e.\u0275\u0275i18n(1,45),e.\u0275\u0275elementEnd())}function fC(o,n){if(1&o&&e.\u0275\u0275template(0,CC,2,0,"span",73),2&o){e.\u0275\u0275nextContext(2);const t=e.\u0275\u0275reference(2),_=e.\u0275\u0275nextContext();e.\u0275\u0275property("ngIf",_.topicForm.showError("push_endpoint",t,"required"))}}function SC(o,n){1&o&&(e.\u0275\u0275elementStart(0,"div",61)(1,"cds-checkbox",114),e.\u0275\u0275elementContainerStart(2),e.\u0275\u0275i18n(3,47),e.\u0275\u0275elementContainerEnd(),e.\u0275\u0275elementStart(4,"cd-help-text"),e.\u0275\u0275i18n(5,48),e.\u0275\u0275elementEnd()()())}function FC(o,n){if(1&o&&(e.\u0275\u0275elementContainerStart(0),e.\u0275\u0275elementStart(1,"div",113),e.\u0275\u0275template(2,SC,6,0,"div",106),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementContainerEnd()),2&o){const t=e.\u0275\u0275nextContext(4);e.\u0275\u0275advance(2),e.\u0275\u0275property("ngIf","KAFKA"===t.selectedOption)}}function MC(o,n){1&o&&(e.\u0275\u0275elementStart(0,"div",61)(1,"cds-text-label",115),e.\u0275\u0275i18nStart(2,49),e.\u0275\u0275element(3,"input",116),e.\u0275\u0275i18nEnd(),e.\u0275\u0275elementEnd()())}function PC(o,n){1&o&&(e.\u0275\u0275elementStart(0,"div",61)(1,"cds-text-label",117),e.\u0275\u0275i18nStart(2,50),e.\u0275\u0275element(3,"input",118),e.\u0275\u0275i18nEnd(),e.\u0275\u0275elementEnd()())}function IC(o,n){if(1&o&&(e.\u0275\u0275elementStart(0,"option"),e.\u0275\u0275i18n(1,52),e.\u0275\u0275elementEnd()),2&o){const t=n.$implicit;e.\u0275\u0275advance(),e.\u0275\u0275i18nExp(t),e.\u0275\u0275i18nApply(1)}}function OC(o,n){if(1&o&&(e.\u0275\u0275elementStart(0,"div",61)(1,"cds-select",119)(2,"option",72),e.\u0275\u0275i18n(3,51),e.\u0275\u0275elementEnd(),e.\u0275\u0275template(4,IC,2,1,"option",65),e.\u0275\u0275elementEnd()()),2&o){const t=e.\u0275\u0275nextContext(4);e.\u0275\u0275advance(4),e.\u0275\u0275property("ngForOf",t.kafkaMechanism)}}function GC(o,n){if(1&o&&(e.\u0275\u0275elementStart(0,"option",75),e.\u0275\u0275i18n(1,54),e.\u0275\u0275elementEnd()),2&o){const t=n.$implicit;e.\u0275\u0275property("value",t),e.\u0275\u0275advance(),e.\u0275\u0275i18nExp(t),e.\u0275\u0275i18nApply(1)}}function NC(o,n){if(1&o&&(e.\u0275\u0275elementStart(0,"div",61)(1,"cds-select",120)(2,"option",72),e.\u0275\u0275i18n(3,53),e.\u0275\u0275elementEnd(),e.\u0275\u0275template(4,GC,2,2,"option",67),e.\u0275\u0275elementEnd()()),2&o){const t=e.\u0275\u0275nextContext(4);e.\u0275\u0275advance(3),e.\u0275\u0275i18nExp(t.selectedOption),e.\u0275\u0275i18nApply(3),e.\u0275\u0275advance(),e.\u0275\u0275property("ngForOf",t.ackLevels)}}function AC(o,n){1&o&&(e.\u0275\u0275elementStart(0,"div",61)(1,"cds-text-label",121),e.\u0275\u0275i18nStart(2,55),e.\u0275\u0275element(3,"input",122),e.\u0275\u0275i18nEnd(),e.\u0275\u0275elementEnd()())}function hC(o,n){if(1&o&&(e.\u0275\u0275elementContainerStart(0),e.\u0275\u0275elementStart(1,"div",111)(2,"fieldset")(3,"legend",112),e.\u0275\u0275i18nStart(4,46),e.\u0275\u0275element(5,"cd-help-text"),e.\u0275\u0275i18nEnd(),e.\u0275\u0275elementEnd()(),e.\u0275\u0275template(6,FC,3,1,"ng-container",68),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(7,"div",60),e.\u0275\u0275template(8,MC,4,0,"div",106)(9,PC,4,0,"div",106)(10,OC,5,1,"div",106),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(11,"div",60),e.\u0275\u0275template(12,NC,5,2,"div",106)(13,AC,4,0,"div",106),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementContainerEnd()),2&o){const t=e.\u0275\u0275nextContext(3);e.\u0275\u0275advance(5),e.\u0275\u0275i18nExp("AMQP"===t.selectedOption?"AMQP attributes":"KAFKA attributes")(t.attributeHelpText),e.\u0275\u0275i18nApply(4),e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf","KAFKA"===t.selectedOption),e.\u0275\u0275advance(2),e.\u0275\u0275property("ngIf",t.selectedOption===t.hostProtocols.AMQP||t.selectedOption===t.hostProtocols.KAFKA),e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf",t.selectedOption===t.hostProtocols.AMQP),e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf",t.selectedOption===t.hostProtocols.KAFKA),e.\u0275\u0275advance(2),e.\u0275\u0275property("ngIf",t.selectedOption===t.hostProtocols.AMQP||t.selectedOption===t.hostProtocols.KAFKA),e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf",t.selectedOption===t.hostProtocols.KAFKA)}}function bC(o,n){if(1&o){const t=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementContainerStart(0),e.\u0275\u0275elementStart(1,"div",60)(2,"div",61)(3,"cds-text-label",76),e.\u0275\u0275i18nStart(4,18),e.\u0275\u0275element(5,"input",77),e.\u0275\u0275i18nEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275template(6,iC,2,2,"ng-template",null,3,e.\u0275\u0275templateRefExtractor),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(8,"div",78)(9,"fieldset")(10,"legend",79),e.\u0275\u0275i18nStart(11,19),e.\u0275\u0275element(12,"cd-help-text"),e.\u0275\u0275i18nEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(13,"div",57)(14,"cds-checkbox",80),e.\u0275\u0275listener("checkedChange",function(i){e.\u0275\u0275restoreView(t);const a=e.\u0275\u0275nextContext(2);return e.\u0275\u0275resetView(a.onSecureSSLChange(i))}),e.\u0275\u0275elementContainerStart(15),e.\u0275\u0275i18n(16,20),e.\u0275\u0275elementContainerEnd(),e.\u0275\u0275elementStart(17,"cd-help-text"),e.\u0275\u0275i18n(18,21),e.\u0275\u0275elementEnd()()(),e.\u0275\u0275template(19,aC,6,2,"div",81)(20,rC,6,2,"div",81),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(21,"div",60)(22,"div",61)(23,"cds-text-label",82),e.\u0275\u0275i18nStart(24,22),e.\u0275\u0275elementStart(25,"input",83),e.\u0275\u0275listener("change",function(){e.\u0275\u0275restoreView(t);const i=e.\u0275\u0275nextContext(2);return e.\u0275\u0275resetView(i.generatePushEndpoint())}),e.\u0275\u0275elementEnd(),e.\u0275\u0275i18nEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275template(26,sC,1,1,"ng-template",null,4,e.\u0275\u0275templateRefExtractor),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(28,"div",61)(29,"cds-number",84),e.\u0275\u0275listener("change",function(){e.\u0275\u0275restoreView(t);const i=e.\u0275\u0275nextContext(2);return e.\u0275\u0275resetView(i.generatePushEndpoint())}),e.\u0275\u0275elementEnd(),e.\u0275\u0275template(30,uC,2,2,"ng-template",null,5,e.\u0275\u0275templateRefExtractor),e.\u0275\u0275elementEnd()(),e.\u0275\u0275template(32,EC,6,1,"div",85)(33,RC,5,0,"div",85),e.\u0275\u0275elementStart(34,"div",60)(35,"div",61)(36,"cds-text-label",86),e.\u0275\u0275i18nStart(37,23),e.\u0275\u0275element(38,"input",87),e.\u0275\u0275i18nEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275template(39,fC,1,1,"ng-template",null,6,e.\u0275\u0275templateRefExtractor),e.\u0275\u0275elementEnd()(),e.\u0275\u0275template(41,hC,14,8,"ng-container",68),e.\u0275\u0275elementContainerStart(42),e.\u0275\u0275elementStart(43,"div",60)(44,"legend",79),e.\u0275\u0275i18nStart(45,24),e.\u0275\u0275element(46,"cd-help-text"),e.\u0275\u0275i18nEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(47,"div",57)(48,"cds-checkbox",88),e.\u0275\u0275elementContainerStart(49),e.\u0275\u0275i18n(50,25),e.\u0275\u0275elementContainerEnd(),e.\u0275\u0275elementStart(51,"cd-help-text"),e.\u0275\u0275i18n(52,26),e.\u0275\u0275elementEnd()()()(),e.\u0275\u0275elementStart(53,"div",60)(54,"div",61)(55,"cds-text-label",89),e.\u0275\u0275i18nStart(56,27),e.\u0275\u0275element(57,"input",90),e.\u0275\u0275i18nEnd(),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(58,"div",61)(59,"cds-number",91),e.\u0275\u0275text(60,"Time to live "),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(61,"div",61)(62,"cds-number",92),e.\u0275\u0275text(63," Max retries "),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(64,"div",61)(65,"cds-number",93),e.\u0275\u0275text(66," Retry sleep duration "),e.\u0275\u0275elementEnd()()(),e.\u0275\u0275elementStart(67,"div",60)(68,"div",61)(69,"cds-textarea-label"),e.\u0275\u0275i18nStart(70,28),e.\u0275\u0275element(71,"span"),e.\u0275\u0275elementStart(72,"textarea",94,7),e.\u0275\u0275listener("change",function(){e.\u0275\u0275restoreView(t);const i=e.\u0275\u0275nextContext(2);return e.\u0275\u0275resetView(i.textAreaOnChange("topicPolicyTextArea"))}),e.\u0275\u0275elementEnd(),e.\u0275\u0275i18nEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(74,"cd-help-text"),e.\u0275\u0275i18n(75,29),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(76,"div",95)(77,"div",61)(78,"cds-button-set",96)(79,"button",97),e.\u0275\u0275listener("click",function(){e.\u0275\u0275restoreView(t);const i=e.\u0275\u0275nextContext(2);return e.\u0275\u0275resetView(i.openUrl("https://docs.aws.amazon.com/AmazonS3/latest/userguide/example-bucket-policies.html?icmpid=docs_amazons3_console"))}),e.\u0275\u0275i18nStart(80,30),e.\u0275\u0275namespaceSVG(),e.\u0275\u0275element(81,"svg",98),e.\u0275\u0275i18nEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275namespaceHTML(),e.\u0275\u0275elementStart(82,"button",97),e.\u0275\u0275listener("click",function(){e.\u0275\u0275restoreView(t);const i=e.\u0275\u0275nextContext(2);return e.\u0275\u0275resetView(i.openUrl("https://awspolicygen.s3.amazonaws.com/policygen.html"))}),e.\u0275\u0275i18nStart(83,31),e.\u0275\u0275namespaceSVG(),e.\u0275\u0275element(84,"svg",98),e.\u0275\u0275i18nEnd(),e.\u0275\u0275elementEnd()()(),e.\u0275\u0275namespaceHTML(),e.\u0275\u0275elementStart(85,"div",61)(86,"cds-button-set",99)(87,"button",100),e.\u0275\u0275listener("click",function(){e.\u0275\u0275restoreView(t);const i=e.\u0275\u0275nextContext(2);return e.\u0275\u0275resetView(i.clearTextArea("policy","{}"))}),e.\u0275\u0275i18nStart(88,32),e.\u0275\u0275namespaceSVG(),e.\u0275\u0275element(89,"svg",101),e.\u0275\u0275i18nEnd(),e.\u0275\u0275elementEnd()()()()()(),e.\u0275\u0275elementContainerEnd()()}if(2&o){const t=e.\u0275\u0275reference(7),_=e.\u0275\u0275reference(27),i=e.\u0275\u0275reference(31),a=e.\u0275\u0275reference(40),r=e.\u0275\u0275nextContext(2);e.\u0275\u0275advance(3),e.\u0275\u0275property("invalid",r.topicForm.controls.name.invalid&&r.topicForm.controls.name.dirty)("invalidText",t),e.\u0275\u0275advance(2),e.\u0275\u0275property("invalid",r.topicForm.controls.name.invalid&&r.topicForm.controls.name.dirty),e.\u0275\u0275advance(8),e.\u0275\u0275property("columnNumbers",e.\u0275\u0275pureFunction0(24,ro)),e.\u0275\u0275advance(6),e.\u0275\u0275property("ngIf",r.selectedOption===r.hostProtocols.AMQP||r.selectedOption===r.hostProtocols.HTTP),e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf",r.selectedOption==r.hostProtocols.HTTP),e.\u0275\u0275advance(3),e.\u0275\u0275property("invalid",r.topicForm.controls.fqdn.invalid&&r.topicForm.controls.fqdn.dirty)("invalidText",_),e.\u0275\u0275advance(2),e.\u0275\u0275property("invalid",r.topicForm.controls.fqdn.invalid&&r.topicForm.controls.fqdn.dirty),e.\u0275\u0275advance(4),e.\u0275\u0275property("min",1)("invalid",r.topicForm.controls.port.invalid&&r.topicForm.controls.port.dirty)("invalidText",i),e.\u0275\u0275advance(3),e.\u0275\u0275property("ngIf",r.selectedOption===r.hostProtocols.AMQP||r.selectedOption===r.hostProtocols.KAFKA),e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf",r.selectedOption===r.hostProtocols.AMQP),e.\u0275\u0275advance(3),e.\u0275\u0275property("invalid",r.topicForm.controls.push_endpoint.invalid&&r.topicForm.controls.push_endpoint.dirty)("invalidText",a),e.\u0275\u0275advance(2),e.\u0275\u0275property("placeholder",r.pushEndpointPlaceholder)("invalid",r.topicForm.controls.push_endpoint.invalid&&r.topicForm.controls.push_endpoint.dirty),e.\u0275\u0275advance(3),e.\u0275\u0275property("ngIf",r.selectedOption===r.hostProtocols.AMQP||r.selectedOption===r.hostProtocols.KAFKA),e.\u0275\u0275advance(6),e.\u0275\u0275property("columnNumbers",e.\u0275\u0275pureFunction0(25,ro)),e.\u0275\u0275advance(12),e.\u0275\u0275property("min",1),e.\u0275\u0275advance(3),e.\u0275\u0275property("min",1),e.\u0275\u0275advance(3),e.\u0275\u0275property("min",1),e.\u0275\u0275advance(7),e.\u0275\u0275i18nExp("Policy"),e.\u0275\u0275i18nApply(70)}}function vC(o,n){if(1&o){const t=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"div",57)(1,"form",58,0)(3,"div",59),e.\u0275\u0275text(4),e.\u0275\u0275pipe(5,"titlecase"),e.\u0275\u0275pipe(6,"upperFirst"),e.\u0275\u0275elementStart(7,"cd-help-text")(8,"span"),e.\u0275\u0275i18n(9,9),e.\u0275\u0275elementEnd()()(),e.\u0275\u0275elementStart(10,"div",60)(11,"div",61)(12,"cds-select",62),e.\u0275\u0275listener("change",function(){e.\u0275\u0275restoreView(t);const i=e.\u0275\u0275nextContext();return e.\u0275\u0275resetView(i.onEndpointTypeChange())}),e.\u0275\u0275template(13,ZR,2,0,"option",63)(14,KR,2,0,"option",64)(15,qR,3,3,"option",65),e.\u0275\u0275elementEnd(),e.\u0275\u0275template(16,YR,1,1,"ng-template",null,1,e.\u0275\u0275templateRefExtractor),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(18,"div",61)(19,"cds-select",66),e.\u0275\u0275template(20,QR,2,0,"option",63)(21,JR,2,0,"option",64)(22,eC,2,2,"option",67),e.\u0275\u0275elementEnd(),e.\u0275\u0275template(23,nC,1,1,"ng-template",null,2,e.\u0275\u0275templateRefExtractor),e.\u0275\u0275elementEnd()(),e.\u0275\u0275template(25,bC,90,26,"ng-container",68),e.\u0275\u0275elementStart(26,"div",69)(27,"cd-form-button-panel",70),e.\u0275\u0275pipe(28,"titlecase"),e.\u0275\u0275pipe(29,"upperFirst"),e.\u0275\u0275listener("submitActionEvent",function(){e.\u0275\u0275restoreView(t);const i=e.\u0275\u0275nextContext();return e.\u0275\u0275resetView(i.submitAction())}),e.\u0275\u0275elementEnd()()()()}if(2&o){const t=e.\u0275\u0275reference(17),_=e.\u0275\u0275reference(24),i=e.\u0275\u0275nextContext();e.\u0275\u0275property("columnNumbers",e.\u0275\u0275pureFunction0(25,VR)),e.\u0275\u0275advance(),e.\u0275\u0275property("formGroup",i.topicForm),e.\u0275\u0275advance(3),e.\u0275\u0275textInterpolate2(" ",e.\u0275\u0275pipeBind1(5,17,i.action)," ",e.\u0275\u0275pipeBind1(6,19,i.resource)," "),e.\u0275\u0275advance(8),e.\u0275\u0275property("invalid",i.topicForm.controls.endpointType.invalid&&i.topicForm.controls.endpointType.dirty)("invalidText",t),e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf",null===i.endpointType),e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf",null!==i.endpointType),e.\u0275\u0275advance(),e.\u0275\u0275property("ngForOf",i.endpointType),e.\u0275\u0275advance(4),e.\u0275\u0275property("invalid",i.topicForm.controls.owner.invalid&&i.topicForm.controls.owner.dirty)("invalidText",_),e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf",null===i.owners),e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf",null!==i.owners),e.\u0275\u0275advance(),e.\u0275\u0275property("ngForOf",i.owners),e.\u0275\u0275advance(3),e.\u0275\u0275property("ngIf",i.selectedOption),e.\u0275\u0275advance(2),e.\u0275\u0275property("form",i.topicForm)("submitText",e.\u0275\u0275pipeBind1(28,21,i.action)+" "+e.\u0275\u0275pipeBind1(29,23,i.resource))}}class nn extends tt.g{constructor(n,t,_,i,a,r,s){super(),this.actionLabels=n,this.textAreaJsonFormatterService=t,this.rgwTopicService=_,this.rgwUserService=i,this.notificationService=a,this.router=r,this.route=s,this.endpointType=[],this.ackLevels=[],this.kafkaMechanism=[],this.editing=!1,this.hostProtocols=re,this.key="",this.protocolPlaceholders={HTTP:Io_http,AMQP:Io_amqp,KAFKA:Io_kafka},this.editing=this.router.url.startsWith(`/rgw/topic/${M.Qp.EDIT}`),this.action=this.editing?this.actionLabels.EDIT:this.actionLabels.CREATE,this.resource=$localize`topic`}ngAfterViewChecked(){this.textAreaOnChange(this.topicPolicyTextArea)}ngOnInit(){this.endpointType=Object.values(zR),this.createForm(),this.rgwUserService.enumerate().subscribe(n=>{this.owners=n.sort(),this.editing?(this.topicId=this.route.snapshot.paramMap.get("name"),this.topicId=decodeURIComponent(this.topicId),this.loadTopicData(this.topicId)):this.loadingReady()}),this.topicForm.get("user")?.valueChanges.subscribe(()=>this.setMechanism()),this.topicForm.get("password")?.valueChanges.subscribe(()=>this.setMechanism()),this.topicForm.get("endpointType")?.valueChanges.subscribe(n=>{this.ackLevels=Object.values(n===re.AMQP?HR:XR)}),this.kafkaMechanism=Object.values(u_),this.setMechanism(),this.topicForm.get("enable_ssl").valueChanges.subscribe(n=>{const t=this.topicForm.get("verify_ssl"),_=this.topicForm.get("use_ssl");n?(t.enable(),_.enable()):(t.disable(),_.disable(),_.setValue(!1),t.setValue(!1))})}loadTopicData(n){this.rgwTopicService.getTopic(n).subscribe(t=>{this.topicForm.get("name")?.disable();let a,i=t.dest.push_endpoint.split("://")[0];a=i===Gt.amqp||i===Gt.amqps?re.AMQP:i===Gt.https||i===Gt.http?re.HTTP:re.KAFKA,this.selectedOption=a,this.getPushUrlQueryValues(t),this.topicForm.get("owner").disable(),this.loadingReady()})}get pushEndpointPlaceholder(){return this.protocolPlaceholders[this.topicForm.get("endpointType")?.value]||$localize`Enter endpoint URL`}createForm(){this.topicForm=new Fe.$({owner:new l.UntypedFormControl("",{validators:[l.Validators.required]}),name:new l.UntypedFormControl("",[l.Validators.required],F.xQ.unique(this.rgwTopicService.exists,this.rgwTopicService)),push_endpoint:new l.UntypedFormControl({value:"",disabled:!0},{validators:[l.Validators.required]}),OpaqueData:new l.UntypedFormControl(""),persistent:new l.UntypedFormControl("0"),max_retries:new l.UntypedFormControl("0"),time_to_live:new l.UntypedFormControl("0"),retry_sleep_duration:new l.UntypedFormControl("0"),policy:new l.UntypedFormControl("{}",F.xQ.json()),endpointType:new l.UntypedFormControl("",{validators:[l.Validators.required]}),port:new l.UntypedFormControl("",{validators:[l.Validators.required,l.Validators.pattern("^[0-9]+$")]}),verify_ssl:new l.UntypedFormControl(!0),enable_ssl:new l.UntypedFormControl(!0),cloud_events:new l.UntypedFormControl,user:new l.UntypedFormControl,password:new l.UntypedFormControl,vhost:new l.UntypedFormControl,ca_location:new l.UntypedFormControl,amqp_exchange:new l.UntypedFormControl,ack_level:new l.UntypedFormControl,use_ssl:new l.UntypedFormControl(!1),kafka_brokers:new l.UntypedFormControl,mechanism:new l.UntypedFormControl,fqdn:new l.UntypedFormControl("",{validators:[l.Validators.required]})})}onEndpointTypeChange(){this.selectedOption=this.topicForm.get("endpointType").value;const n=this.topicForm.get("enable_ssl")?.value;this.vhost="/",this.setDefaultPort(n,this.selectedOption),this.generatePushEndpoint(n),this.reset()}setDefaultPort(n,t){this.port=this.getPort(t,n).toString(),this.topicForm.patchValue({port:this.port})}onSecureSSLChange(n){const t=!!n;this.port=this.getPort(this.selectedOption,t).toString(),this.topicForm.patchValue({port:this.port}),this.generatePushEndpoint(t)}getPort(n,t){const _={[re.HTTP]:[je.HTTP,je.HTTPS],[re.AMQP]:[je.AMQP,je.AMQPS],[re.KAFKA]:[je.KAFKA,je.KAFKA_SSL]};return t?_[n][1]:_[n][0]}textAreaOnChange(n){this.textAreaJsonFormatterService.format(n)}setMechanism(){const n=this.topicForm.get("user")?.value,t=this.topicForm.get("password")?.value,_=this.topicForm.get("mechanism");let i="";n&&t&&(i=u_.PLAIN),_?.setValue(i)}generatePushEndpoint(n){if(!this.selectedOption)return;let t="";const _=void 0!==n?n:this.topicForm.get("enable_ssl")?.value,i=this.topicForm.get("fqdn")?.value||"<fqdn>",a=this.topicForm.get("port")?.value||"[:port]";switch(this.selectedOption){case re.HTTP:t=`http${_?"s":""}://${i}:${a}`;break;case re.AMQP:t=this.generateAMQPEndpoint(a,i,_?"s":"");break;case re.KAFKA:t=this.generateKafkaEndpoint(i,a);break;default:t=""}t&&this.topicForm.patchValue({push_endpoint:t})}generateAMQPEndpoint(n,t,_){let i;const a=this.topicForm.get("user")?.value,r=this.topicForm.get("password")?.value,s=this.topicForm.get("vhost")?.value||"/";return i=`amqp${_?"s":""}://${t}:${n}${s}`,a&&r&&(i=`amqp${_?"s":""}://${a}:${r}@${t}:${n}${s}`),i}generateKafkaEndpoint(n,t){let _;const i=Gt.kafka,a=this.topicForm.get("user")?.value,r=this.topicForm.get("password")?.value,s=this.topicForm.get("kafka_brokers")?.value;return _=`${i}://${n}:${t}`,_=a&&r?`${i}://${a}:${r}@${n}:${t}`:s?`kafka://${s}`:`kafka://${n}:${t}`,_}getTopicPolicy(){return this.topicForm.getValue("policy")||"{}"}getPushUrlQueryValues(n){let t=n.dest.push_endpoint,_=this.convertUrlToObject(t),i=n.dest.push_endpoint_args;const a=this.extractAdditionalValues(i);switch(_.protocol?.toLowerCase()){case Ve.AMQP:case Ve.AMQPS:this.selectedOption=re.AMQP;break;case Ve.HTTP:case Ve.HTTPS:this.selectedOption=re.HTTP;break;default:this.selectedOption=re.KAFKA}const s=Lt.clone(this.topicForm.value),d=Object.keys(this.topicForm.value);let u=Lt.pick(n,d);u=Lt.merge(s,u),this.owners.includes(u.owner)||(this.owners.push(u.owner),this.topicForm.get("owner").disable()),this.topicForm.patchValue({endpointType:this.selectedOption}),this.topicForm.patchValue({name:n.name,owner:n.owner,push_endpoint:n.dest.push_endpoint,OpaqueData:n.opaqueData,persistent:n.dest.persistent,max_retries:n.dest.max_retries,time_to_live:n.dest.time_to_live,retry_sleep_duration:n.dest.retry_sleep_duration,policy:n.policy,port:_.port,fqdn:_.hostname,vhost:_.pathname,user:_.username,password:_.password,ca_location:a.ca_location,mechanism:a.mechanism,enable_ssl:_.protocol===Ve.HTTPS||_.protocol==Ve.AMQPS||_.protocol===Ve.KAFKA,verify_ssl:a.verify_ssl,cloud_events:a.cloud_events,amqp_exchange:a.amqp_exchange,ack_level:a.ack_level,use_ssl:a.use_ssl,kafka_brokers:a.kafka_brokers})}convertUrlToObject(n){const t=new URL(n);return{protocol:t.protocol,hostname:t.hostname,pathname:t.pathname,hash:t.hash,port:this.getPortFromUrl(n),username:t.username,password:t.password}}getPortFromUrl(n){const t=new URL(n);let _=t.port;return _||(_=t.protocol===Ve.HTTPS?je.HTTPS:t.protocol===Ve.HTTP?je.HTTP:""),_}extractAdditionalValues(n){let t={};return n.split("&").forEach(i=>{let[a,r]=i.split("=");a&&r&&(t[a]=r)}),t}openUrl(n){window.open(n,"_blank")}submitAction(){if(this.topicForm.invalid||this.topicForm.pending)return this.topicForm.setErrors({cdSubmitButton:!0});const n=this.editing?$localize`Topic updated successfully`:$localize`Topic created successfully`,t=this.topicForm.getRawValue(),_=this.getTopicPolicy(),i=this.generatePayload(t,_);this.rgwTopicService.create(i).subscribe({next:()=>{this.notificationService.show(x._.success,n),this.goToListView()},error:()=>this.topicForm.setErrors({cdSubmitButton:!0})})}generatePayload(n,t){const _={name:n.name,owner:n.owner,push_endpoint:n.push_endpoint,opaque_data:n.OpaqueData,persistent:n.persistent,time_to_live:n.time_to_live,max_retries:n.max_retries,retry_sleep_duration:n.retry_sleep_duration,policy:t},i=n.endpointType,a={[re.KAFKA]:{use_ssl:n.use_ssl,ack_level:n.ack_level,kafka_brokers:n.kafka_brokers,ca_location:n.ca_location,mechanism:n.mechanism},[re.AMQP]:{verify_ssl:n.verify_ssl,amqp_exchange:n.amqp_exchange,ack_level:n.ack_level,ca_location:n.ca_location},[re.HTTP]:{verify_ssl:n.verify_ssl,cloud_events:n.cloud_events}};return a[i]&&Object.assign(_,a[i]),_}get attributeHelpText(){return this.selectedOption===this.hostProtocols.AMQP?$localize`Choose the configuration settings for the AMQP connection`:$localize`Choose the configuration settings for the KAFKA connection`}goToListView(){this.router.navigate(["rgw/topic"])}clearTextArea(n,t=""){this.topicForm.get(n)?.setValue(t),this.topicForm.markAsDirty(),this.topicForm.updateValueAndValidity()}reset(){this.topicForm.patchValue({enable_ssl:!0}),this.topicForm.patchValue({port:this.port}),this.topicForm.patchValue({vhost:this.vhost})}static{this.\u0275fac=function(t){return new(t||nn)(e.\u0275\u0275directiveInject(M.Ss),e.\u0275\u0275directiveInject(Ao.C),e.\u0275\u0275directiveInject(Mt),e.\u0275\u0275directiveInject(Rt.p),e.\u0275\u0275directiveInject(te.J),e.\u0275\u0275directiveInject(Y.Router),e.\u0275\u0275directiveInject(Y.ActivatedRoute))}}static{this.\u0275cmp=e.\u0275\u0275defineComponent({type:nn,selectors:[["cd-rgw-topic-form"]],viewQuery:function(t,_){if(1&t&&e.\u0275\u0275viewQuery(BR,5),2&t){let i;e.\u0275\u0275queryRefresh(i=e.\u0275\u0275loadQuery())&&(_.topicPolicyTextArea=i.first)}},features:[e.\u0275\u0275InheritDefinitionFeature],decls:1,vars:1,consts:()=>{let n,t,_,i,a,r,s,d,u,m,C,O,f,I,R,h,G,U,k,y,H,X,B,V,S,P,ee,Q,q,J,$,_e,D,W,ce,de,ue,pe,me,Te,ge,le,Ee,Re,Ce,fe,E,Ze,ve,Ke,qe,v,it,at,rt,lt,st,ct,dt,ut,pt,mt,Tt,gt,Ye,Et,A,_n,an,rn,ln,sn,cn;return n=$localize`:␟f61c6867295f3b53d23557021f2f4e0aa1d0b8fc␟8650499415827640724:Type`,t=$localize`:␟ed53ccceb9a0f622c3fa4d58c669577126b27d2a␟2137111110751198005:This user will manage and configure the topic’s settings.`,_=$localize`:␟e08a77594f3d89311cdf6da5090044270909c194␟2392488717875840729:User`,i=$localize`:␟a54b03181fc59efc6a74c6f00ac0a9c9755f99f7␟6863982288413294459:This owner will define and control the topic’s settings`,a=$localize`:␟00a3ef81ae7a3e10a847c4d0c70d9a1cf278244e␟4568152555424044497: Configure the push endpoint parameters to send notifications. On successful creation, you'll receive the topic's unique Amazon Resource Name `,r=$localize`:␟f029a277d5d93df6869b2ed8f0275387ffabb7f9␟2920484855706891928:Loading... `,s=$localize`:␟fbe08bfe016fc732ef2ad4258206947c384b55a1␟6064672739241501860:-- Select a Topic type --`,d=$localize`:␟d7deadee3263f33ea98eefcc0312447407bb6527␟5863618374652685811:${"\ufffd0\ufffd"}:INTERPOLATION: `,u=$localize`:␟7cbdabcece469fab89cfa687ab152bca18b97498␟1417693714872528491:This field is required.`,m=$localize`:␟f029a277d5d93df6869b2ed8f0275387ffabb7f9␟2920484855706891928:Loading... `,C=$localize`:␟8e4c918357c7445fbf19a203e5f0f0ece1960b3b␟2740518733940031233:-- Select a user --`,O=$localize`:␟b9025ad5c4aaebfc76e909d6c0f15df2a5c13de6␟7915105577582047738:${"\ufffd0\ufffd"}:INTERPOLATION:`,f=$localize`:␟7cbdabcece469fab89cfa687ab152bca18b97498␟1417693714872528491:This field is required.`,I=$localize`:␟edfe79febb8208d96c11cbb80b03d49c7278bfe5␟1408976414588645038:Enter a Topic name`,R=$localize`:␟2b901c48cfd3e782658269ab2cd38a8c18bba67e␟8701819833040250084:Enter the FQDN to configure the topic's settings and behavior`,h=$localize`:␟cb2741a46e3560f6bc6dfd99d385e86b08b26d72␟6117946241126833991:Port`,G=$localize`:␟375847d1442277ea3deb6cab7094d4902a281fbf␟7647027217100102155:Enter the port number for the push endpoint`,U=$localize`:␟2c13241f3c326a6a1005b118bf0b28c2f07ee61a␟4582305973446926883:Specify the endpoint URL for receiving push notifications`,k=$localize`:␟59b51d7b14e83c2ac6c2ca81f493190fc2b48e43␟988347145508132995:A user-defined metadata added to all notifications that are triggered by the topic.`,y=$localize`:␟41c06b9838f1d329a0fb0c721b97854e5080330d␟3902153741611581562:Time to live`,H=$localize`:␟12f221b07d2b5167bbd273ae40ae46105eb8bcce␟7774219954781470114:Time limit (in seconds) for retaining notifications`,X=$localize`:␟decdb0eafa0d7563d570474f2635b97e667f5ecc␟1551046061830851610:Max retries`,B=$localize`:␟4b2d03fed3775659a14678b42e5dcdf45ad4c0f1␟7751689262612117562:Max retries before expiring notifications`,V=$localize`:␟bdb3760613b25efb8985ece12e713b0c66062dbf␟6359122727286279829:Retry sleep duration`,S=$localize`:␟cf8893365fcc11dd88c39cfb2bda3fa62414fe30␟557974918705859230:Controls the frequency of retrying the notifications`,P=$localize`:␟29be9527d0aa05e03f04d8012e96ea0d1a3fbc6c␟8513839243787251926:Name ${"\ufffd#5\ufffd\ufffd/#5\ufffd"}:TAG_INPUT:`,ee=$localize`:␟f957043dded9668ed20bb3b1552e92f63aa48278␟3828134074155574349: Generate push endpoint ${"\ufffd#12\ufffd"}:START_TAG_CD_HELP_TEXT: Configure the endpoint URL to receive push notifications${"\ufffd/#12\ufffd"}:CLOSE_TAG_CD_HELP_TEXT:`,Q=$localize`:␟e65610b5d940367f1ff6b57772b96e94e35fe202␟3719080555538542367:SSL`,q=$localize`:␟3d0522294df78846c4c24f875cb5940ca32b482a␟5492444729292412080: Enabling SSL ensures that your connection is encrypted and secure. You must have a valid SSL certificate installed on your server. `,J=$localize`:␟881f124c098af8bca77608d6c2f191e9aaf1e09e␟3216663920086115337: RGW Gateway hostname ${"\ufffd#25\ufffd\ufffd/#25\ufffd"}:TAG_INPUT:`,$=$localize`:␟deeac5cee736f7242cbd9089f11681c6df555440␟643359976331025391: Push endpoint ${"\ufffd#38\ufffd\ufffd/#38\ufffd"}:TAG_INPUT:`,_e=$localize`:␟5cf14e85649ee683077cdae9797a344fa2c9dc67␟8605986784851003695: Additional common attributes ${"\ufffd#46\ufffd"}:START_TAG_CD_HELP_TEXT:Configure additional attributes to customize the topic's behavior and settings${"\ufffd/#46\ufffd"}:CLOSE_TAG_CD_HELP_TEXT:`,D=$localize`:␟117f6a930dfb6fe83a36afafac16a1f18f8bf0fd␟6076000394909025469:Persistent`,W=$localize`:␟e37ce7ce86b976c9262e8ba23b5eb30622e2e34c␟7901602685104422242: Select the checkbox to ensure notifications are retried.`,ce=$localize`:␟79656c61951c834cd4a723f73c3c340cfb8a22de␟1704222630748460: Opaque data ${"\ufffd#57\ufffd\ufffd/#57\ufffd"}:TAG_INPUT:`,de=$localize`:␟5398296119408e6f8174b2a4373cd56cc5e2e15c␟2104881295418403178:${"\ufffd#71\ufffd"}:START_TAG_SPAN: ${"\ufffd0\ufffd"}:INTERPOLATION:${"\ufffd/#71\ufffd"}:CLOSE_TAG_SPAN:${"\ufffd#72\ufffd"}:START_TAG_TEXTAREA:${"\ufffd/#72\ufffd"}:CLOSE_TAG_TEXTAREA:`,ue=$localize`:␟8cac36d5b681ccee7f8fa945030f05d5d1eccb07␟2155714546565616130:JSON formatted document`,pe=$localize`:␟6791ba6c02aed4ff38540429c06a6dae691cfd6f␟4439481568848653653: Policy examples ${"\ufffd#81\ufffd"}:START_TAG__SVG_SVG:${"\ufffd/#81\ufffd"}:CLOSE_TAG__SVG_SVG:`,me=$localize`:␟ff48842e1aa5694c372cc81f321648976a1e703c␟1511691428300487860: Policy generator ${"\ufffd#84\ufffd"}:START_TAG__SVG_SVG:${"\ufffd/#84\ufffd"}:CLOSE_TAG__SVG_SVG:`,Te=$localize`:␟38266149f22973acf1dd8130129e9c6e12d54204␟6227422191312478244: Clear ${"\ufffd#89\ufffd"}:START_TAG__SVG_SVG:${"\ufffd/#89\ufffd"}:CLOSE_TAG__SVG_SVG:`,ge=$localize`:␟7cbdabcece469fab89cfa687ab152bca18b97498␟1417693714872528491:This field is required.`,le=$localize`:␟46dad50d21912fc8abebaba98dfb301caae4494a␟8029612683656323703:The name is already in use. Please choose a different one`,Ee=$localize`:␟f316d167332e9f0c44f7c577a9c24abd0efe1cae␟7988023520611267537:Verify SSL`,Re=$localize`:␟6d68b81396b715b3e05ec007816082b6e9f0a403␟6282521433365467909:Ensures that the server's SSL certificate is valid and trusted.`,Ce=$localize`:␟6e4300186d2349e5a34b13aaa894c75f3c32b6ac␟7541425629107172381:Cloud events`,fe=$localize`:␟4c8579c137446e0c4b8ecfdbf36c05604198daf2␟6168645232814818852:Captures cloud events as triggers for notifications.`,E=$localize`:␟5e6548eb9cbb0467c307b4079bc989cd21f44355␟2501969335659826225:This field is required`,Ze=$localize`:␟eeee838ce682194be970d12c66c62ef1a46284e4␟6371208497232739925: Port must be a valid integer`,ve=$localize`:␟22c1afde405910f4ca39f20c916f79976867de4e␟1641824242764643491:Enter the user for the push endpoint`,Ke=$localize`:␟e9234f2b22860163eccbba41fb0c3df949a0f914␟5950563104815849220: User ${"\ufffd#4\ufffd\ufffd/#4\ufffd"}:TAG_INPUT:`,qe=$localize`:␟b94a869e3d7a279f3dd78d6b2b595c0b1726bf57␟9111685253015904608:Enter the password for the push endpoint`,v=$localize`:␟0e61bf437633c84869b28e3f20ac46eecc3bbade␟3442736883615958374: Password ${"\ufffd#3\ufffd\ufffd/#3\ufffd"}:TAG_INPUT:`,it=$localize`:␟5e6548eb9cbb0467c307b4079bc989cd21f44355␟2501969335659826225:This field is required`,at=$localize`:␟b52ad647b7f56e44111b067052017efc02e3c2cc␟722536847304292934:Enter the vhost for the push endpoint`,rt=$localize`:␟19245efec8416d6ebe7bb1c8eaee9e10c602e138␟5541591736349780714: Virtual Host(vhost) ${"\ufffd#4\ufffd\ufffd/#4\ufffd"}:TAG_INPUT:`,lt=$localize`:␟7cbdabcece469fab89cfa687ab152bca18b97498␟1417693714872528491:This field is required.`,st=$localize`:␟7fff391d7ad40dccd01ee8cf83b89919fd0cf240␟8081307138883238763: ${"\ufffd0\ufffd"}:INTERPOLATION: ${"\ufffd#5\ufffd"}:START_TAG_CD_HELP_TEXT: ${"\ufffd1\ufffd"}:INTERPOLATION_1:${"\ufffd/#5\ufffd"}:CLOSE_TAG_CD_HELP_TEXT:`,ct=$localize`:␟9c176ebc39aabf796371bb05a590a5fd9a65ee2c␟5266103021965994312:Use SSL`,dt=$localize`:␟021d057467873dda738bf29213cfe23690cae78a␟1824384459610284671: Enabling SSL encrypts communication between your Kafka client and broker, ensuring the confidentiality and integrity of your messages `,ut=$localize`:␟6ae90e6751b8a1588fa9565dec5d3445aa1219c9␟6038263156218944544:The file path of the CA certificate used to verify the server`,pt=$localize`:␟b47710fe7ac0ba081e87f1d11cf37f1646696015␟3521233537763097223: CA location ${"\ufffd#3\ufffd\ufffd/#3\ufffd"}:TAG_INPUT:`,mt=$localize`:␟4126a324715faf02fc0bc5dca0926d5e012f6aa1␟8479295906649736858:Name of the AMQP exchange to publish messages to; must exist on the broker`,Tt=$localize`:␟3f4df9cdac138e08bce1f592414983e44edf5bb9␟5683367012729687147: AMQP exchange ${"\ufffd#3\ufffd\ufffd/#3\ufffd"}:TAG_INPUT:`,gt=$localize`:␟195bf9533da6f61a9fd8b08be424d60af7e9ccda␟2614743645606335085:Mechanism`,Ye=$localize`:␟2768ef9cc8a79203223cabbdb8a6ea5fa35fa311␟7257389505045270077:Select the authentication mechanism to connect to the Kafka broker`,Et=$localize`:␟bf7d6ba3c24896a37f0f108898e6ed767ebf3871␟139008992648727645:-- Select a KAFKA mechanism --`,A=$localize`:␟b9025ad5c4aaebfc76e909d6c0f15df2a5c13de6␟7915105577582047738:${"\ufffd0\ufffd"}:INTERPOLATION:`,_n=$localize`:␟570eba3b8c4424d9dbb1936b2a967913ae6aaae5␟3712152402296356938:Ack level`,an=$localize`:␟f0142c77c4361ce2b32c4887e56bf14184e9b0bf␟6002914146850862259:Select the acknowledgment level to control message delivery guarantees between client and broker`,rn=$localize`:␟70bc7426b23ecc0d6dbea9cf268fc82040e47697␟3361910596202347514:-- Select the ${"\ufffd0\ufffd"}:INTERPOLATION: ack level --`,ln=$localize`:␟f4c029412fbd9ea68b9f74f774b8b6677e1205eb␟5531932815236811679:${"\ufffd0\ufffd"}:INTERPOLATION:`,sn=$localize`:␟99cc0e1d3767d68126e9bd407ff08d9510a8366f␟1134189252189049666:Specify the address of the Kafka broker (e.g., host:9092) `,cn=$localize`:␟1fe706ff847694259d071f8862c872a941eb5801␟5066739814032291756: Kafka brokers ${"\ufffd#3\ufffd\ufffd/#3\ufffd"}:TAG_INPUT:`,[["formDir","ngForm"],["topicTypeError",""],["ownerError",""],["nameError",""],["fqdnError",""],["portError",""],["endpointError",""],["topicPolicyTextArea",""],["passwordError",""],a,r,s,d,u,m,C,O,f,P,ee,Q,q,J,$,_e,D,W,ce,de,ue,pe,me,Te,ge,le,Ee,Re,Ce,fe,E,Ze,Ke,v,it,rt,lt,st,ct,dt,pt,Tt,Et,A,rn,ln,cn,["cdsCol","",3,"columnNumbers",4,"cdFormLoading"],["cdsCol","",3,"columnNumbers"],["name","topicForm","novalidate","",3,"formGroup"],[1,"form-header"],["cdsRow","",1,"form-item","form-item-append"],["cdsCol",""],["formControlName","endpointType","label",n,"cdRequiredField","Type","id","endpointType","helperText",t,3,"change","invalid","invalidText"],["value","null",4,"ngIf"],["value","",4,"ngIf"],[4,"ngFor","ngForOf"],["formControlName","owner","label",_,"cdRequiredField","Owner","id","owner","helperText",i,3,"invalid","invalidText"],[3,"value",4,"ngFor","ngForOf"],[4,"ngIf"],[1,"card-footer"],["wrappingClass","text-right",3,"submitActionEvent","form","submitText"],["value","null"],["value",""],["class","invalid-feedback",4,"ngIf"],[1,"invalid-feedback"],[3,"value"],["labelInputID","name","cdRequiredField","Name","helperText",I,3,"invalid","invalidText"],["cdsText","","type","text","id","name","autofocus","","formControlName","name",3,"invalid"],["cdsRow","",1,"form-item"],["cdsCol","",1,"cd-header"],["id","enable_ssl","formControlName","enable_ssl",3,"checkedChange"],["cdsCol","",3,"columnNumbers",4,"ngIf"],["labelInputID","fqdn","cdRequiredField","RGW Gateway Hostname","helperText",R,3,"invalid","invalidText"],["cdsText","","type","text","id","fqdn","placeholder","e.g., 127.0.0.1 or localhost","formControlName","fqdn",3,"change","invalid"],["id","Port","formControlName","port","cdRequiredField","Port","label",h,"helperText",G,3,"change","min","invalid","invalidText"],["cdsRow","","class","form-item form-item-append",4,"ngIf"],["labelInputID","push_endpoint","cdRequiredField","Push endpoint","helperText",U,3,"invalid","invalidText"],["cdsText","","type","text","id","push_endpoint","formControlName","push_endpoint",3,"placeholder","invalid"],["id","persistent","formControlName","persistent"],["labelInputID","opaque_data","helperText",k],["cdsText","","type","text","id","opaqueData","formControlName","OpaqueData"],["id","time_to_live","formControlName","time_to_live","label",y,"helperText",H,3,"min"],["id","max_retries","label",X,"formControlName","max_retries","helperText",B,3,"min"],["id","retry_sleep_duration","label",V,"formControlName","retry_sleep_duration","helperText",S,3,"min"],["cdsTextArea","","row","4","cols","200","formControlName","policy","aria-label","textarea",3,"change"],["cdsRow",""],[1,"mt-1"],["cdsButton","tertiary","id","example-generator-button",3,"click"],["cdsIcon","launch","size","16",1,"cds--btn__icon"],[1,"float-end","mt-1"],["cdsButton","tertiary","id","clear-bucket-policy",3,"click"],["cdsIcon","close","size","32",1,"cds--btn__icon"],["id","verify_ssl","formControlName","verify_ssl"],["id","cloud_events","formControlName","cloud_events"],["labelInputID","User","helperText",ve],["cdsText","","type","text","id","user","formControlName","user",3,"change"],["cdsCol","",4,"ngIf"],["labelInputID","password","helperText",qe,3,"invalid","invalidText"],["cdsPassword","","type","password","autocomplete","new-password","formControlName","password",3,"change"],["labelInputID","Virtual Host(vhost)","helperText",at],["cdsText","","type","text","id","vhost","formControlName","vhost",3,"change"],[1,"form-item"],[1,"cd-header"],["cdsRow","",1,"form-item-append"],["id","use-ssl","formControlName","use_ssl"],["labelInputID","Ca-location","helperText",ut],["cdsText","","type","text","id","ca_location","formControlName","ca_location"],["labelInputID","AMQP exchange","helperText",mt],["cdsText","","type","text","id","amqp_exchange","formControlName","amqp_exchange"],["formControlName","mechanism","label",gt,"id","mechanism","helperText",Ye],["formControlName","ack_level","label",_n,"id","ack_level","helperText",an],["labelInputID","kafka_brokers","helperText",sn],["cdsText","","type","text","id","kafka_brokers","formControlName","kafka_brokers"]]},template:function(t,_){1&t&&e.\u0275\u0275template(0,vC,30,26,"div",56),2&t&&e.\u0275\u0275property("cdFormLoading",_.loading)},dependencies:[g.NgForOf,g.NgIf,oe.e,ie.O,Ct.B,St.G,j.S,ne.E,Qe.P,l.\u0275NgNoValidate,l.NgSelectOption,l.\u0275NgSelectMultipleOption,l.DefaultValueAccessor,l.NgControlStatus,l.NgControlStatusGroup,l.FormGroupDirective,l.FormControlName,c.ColumnDirective,c.RowDirective,c.Button,c.ButtonSet,c.IconDirective,c.TextareaLabelComponent,c.TextInputLabelComponent,c.PasswordInputLabelComponent,c.TextInput,c.TextArea,c.PasswordInput,c.Checkbox,c.NumberComponent,c.Select,c.Option,g.TitleCasePipe,Oe.r]})}}class on{constructor(n){this.iconService=n,this.iconService.registerAll([Lg,yg,Dg,$g,Wg,xg.A,wg,Ug,kg.A,zg,Hg,Xg])}static{this.\u0275fac=function(t){return new(t||on)(e.\u0275\u0275inject(c.IconService))}}static{this.\u0275mod=e.\u0275\u0275defineNgModule({type:on})}static{this.\u0275inj=e.\u0275\u0275defineInjector({providers:[g.TitleCasePipe],imports:[g.CommonModule,Bg._,E_.G,l.FormsModule,l.ReactiveFormsModule.withConfig({callSetDisabledState:"whenDisabledForLegacyCode"}),R_.d,b.NgbNavModule,Y.RouterModule,b.NgbTooltipModule,b.NgbPopoverModule,p_.Y,c.TreeviewModule,bm.h,vT.W,b.NgbTypeaheadModule,c.ModalModule,c.GridModule,c.ProgressIndicatorModule,c.CodeSnippetModule,c.ButtonModule,c.LoadingModule,c.IconModule,b.NgbProgressbar,c.InputModule,c.AccordionModule,c.CheckboxModule,c.NumberModule,c.TabsModule,c.TagModule,c.TooltipModule,c.ComboBoxModule,c.ToggletipModule,c.RadioModule,c.SelectModule,c.LayoutModule]})}}const yC=[{path:"",redirectTo:"rbd",pathMatch:"full"},{path:"daemon",component:Nn,data:{breadcrumbs:"Gateways"}},{path:"user",data:{breadcrumbs:"Users"},children:[{path:"",component:Ln},{path:M.Qp.CREATE,component:Xt,data:{breadcrumbs:M.yY.CREATE}},{path:`${M.Qp.EDIT}/:uid`,component:Xt,data:{breadcrumbs:M.yY.EDIT}}]},{path:"accounts",data:{breadcrumbs:"Accounts"},children:[{path:"",component:_o},{path:M.Qp.CREATE,component:en,data:{breadcrumbs:M.yY.CREATE}},{path:`${M.Qp.EDIT}/:id`,component:en,data:{breadcrumbs:M.yY.EDIT}}]},{path:"roles",data:{breadcrumbs:"Roles",resource:"api.rgw.roles@1.0",tabs:[{name:"Users",url:"/rgw/user"},{name:"Accounts",url:"/rgw/accounts"},{name:"Roles",url:"/rgw/roles"}]},children:[{path:"",component:m_.M},{path:M.Qp.CREATE,component:__.u,data:{breadcrumbs:M.yY.CREATE}},{path:M.Qp.EDIT,component:__.u,data:{breadcrumbs:M.yY.EDIT}}]},{path:"bucket",data:{breadcrumbs:"Buckets"},children:[{path:"",component:In},{path:M.Qp.CREATE,component:Wt,data:{breadcrumbs:M.yY.CREATE}},{path:`${M.Qp.EDIT}/:bid/:owner`,component:Wt,data:{breadcrumbs:M.yY.EDIT}}]},{path:"overview",data:{breadcrumbs:"Overview"},children:[{path:"",component:jn}]},{path:"multisite",data:{breadcrumbs:"Multi-site"},children:[{path:"",redirectTo:"configuration",pathMatch:"full"},{path:"configuration",component:Vn,data:{breadcrumbs:"Configuration"},children:[{path:"setup-multisite-replication",component:qt,outlet:"modal"}]},{path:"sync-policy",component:Qt,data:{breadcrumbs:"Sync-policy"},children:[{path:`${M.Qp.CREATE}`,component:bt,outlet:"modal"},{path:`${M.Qp.EDIT}/:groupName`,component:bt,outlet:"modal"},{path:`${M.Qp.EDIT}/:groupName/:bucketName`,component:bt,outlet:"modal"}]}]},{path:"tiering",data:{breadcrumbs:"Tiering"},children:[{path:"",component:to},{path:M.Qp.CREATE,component:tn,data:{breadcrumbs:M.yY.CREATE}},{path:`${M.Qp.EDIT}/:zonegroup_name/:placement_target/:storage_class`,component:tn,data:{breadcrumbs:M.yY.EDIT}}]},{path:"nfs",canActivateChild:[T_.k,g_.x],data:{moduleStatusGuardConfig:{uiApiPath:"nfs-ganesha",redirectTo:"error",section:"nfs-ganesha",section_info:"NFS GANESHA",header:"NFS-Ganesha is not configured"},breadcrumbs:"NFS"},children:[{path:"",component:WR.$},{path:M.Qp.CREATE,component:l_.B,data:{breadcrumbs:M.yY.CREATE}},{path:`${M.Qp.EDIT}/:cluster_id/:export_id`,component:l_.B,data:{breadcrumbs:M.yY.EDIT}}]},{path:"configuration",data:{breadcrumbs:"Configuration"},children:[{path:"",component:Jn}]},{path:"topic",data:{breadcrumbs:"Topic"},children:[{path:"",component:ao},{path:M.Qp.CREATE,component:nn,data:{breadcrumbs:M.yY.CREATE}},{path:`${M.Qp.EDIT}/:name`,component:nn,data:{breadcrumbs:M.yY.EDIT}}]}];class lo{static{this.\u0275fac=function(t){return new(t||lo)}}static{this.\u0275mod=e.\u0275\u0275defineNgModule({type:lo})}static{this.\u0275inj=e.\u0275\u0275defineInjector({imports:[on,Y.RouterModule.forChild(yC)]})}}}}]);
//# sourceMappingURL=src_app_ceph_rgw_rgw_module_ts.js.map