(self.webpackChunkceph_dashboard=self.webpackChunkceph_dashboard||[]).push([["src_bootstrap_ts","node_modules_babel_runtime_helpers_esm_asyncToGenerator_js-_db250","node_modules_babel_runtime_helpers_esm_asyncToGenerator_js-_db251"],{8924:(Z,A,r)=>{r.d(A,{A:()=>a});var a={elem:"svg",attrs:{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 16 16",fill:"currentColor",width:16,height:16},content:[{elem:"path",attrs:{d:"M8 11L3 6 3.7 5.3 8 9.6 12.3 5.3 13 6z"}}],name:"chevron--down",size:16}},71307:(Z,A,r)=>{r.d(A,{A:()=>a});var a={elem:"svg",attrs:{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 32",fill:"currentColor",width:16,height:16},content:[{elem:"path",attrs:{d:"M17.4141 16L24 9.4141 22.5859 8 16 14.5859 9.4143 8 8 9.4141 14.5859 16 8 22.5859 9.4143 24 16 17.4141 22.5859 24 24 22.5859 17.4141 16z"}}],name:"close",size:16}},8205:(Z,A,r)=>{r.d(A,{A:()=>a});var a={elem:"svg",attrs:{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 32",fill:"currentColor",width:32,height:32},content:[{elem:"path",attrs:{d:"M17.4141 16L24 9.4141 22.5859 8 16 14.5859 9.4143 8 8 9.4141 14.5859 16 8 22.5859 9.4143 24 16 17.4141 22.5859 24 24 22.5859 17.4141 16z"}}],name:"close",size:32}},94097:(Z,A,r)=>{r.d(A,{A:()=>a});var a={elem:"svg",attrs:{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 32",fill:"currentColor",width:16,height:16},content:[{elem:"path",attrs:{d:"M24,14H22V8A6,6,0,0,0,10,8v6H8a2,2,0,0,0-2,2V28a2,2,0,0,0,2,2H24a2,2,0,0,0,2-2V16A2,2,0,0,0,24,14ZM12,8a4,4,0,0,1,8,0v6H12ZM24,28H8V16H24Z"}}],name:"locked",size:16}},29376:(Z,A,r)=>{r.d(A,{A:()=>a});var a={elem:"svg",attrs:{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 32",fill:"currentColor",width:32,height:32},content:[{elem:"path",attrs:{d:"M16,22a6,6,0,1,1,6-6A6.0067,6.0067,0,0,1,16,22Zm0-10a4,4,0,1,0,4,4A4.0045,4.0045,0,0,0,16,12Z"}},{elem:"path",attrs:{d:"M16,26a10.0162,10.0162,0,0,1-7.4531-3.3325l1.49-1.334A8,8,0,1,0,16,8V6a10,10,0,0,1,0,20Z"}},{elem:"path",attrs:{d:"M16,30A14,14,0,1,1,30,16,14.0158,14.0158,0,0,1,16,30ZM16,4A12,12,0,1,0,28,16,12.0137,12.0137,0,0,0,16,4Z"}}],name:"progress-bar--round",size:32}},66568:(Z,A,r)=>{r.d(A,{A:()=>a});var a={elem:"svg",attrs:{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 32",fill:"currentColor",width:32,height:32},content:[{elem:"path",attrs:{d:"M18,28A12,12,0,1,0,6,16v6.2L2.4,18.6,1,20l6,6,6-6-1.4-1.4L8,22.2V16H8A10,10,0,1,1,18,26Z"}}],name:"reset",size:32}},20527:(Z,A,r)=>{r.d(A,{A:()=>a});var a={elem:"svg",attrs:{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 32",fill:"currentColor",width:32,height:32},content:[{elem:"path",attrs:{d:"m16,2c-7.6,0-14,6.4-14,14s6.4,14,14,14,14-6.4,14-14S23.6,2,16,2Zm8,15H8v-2h16v2Z"}},{elem:"path",attrs:{fill:"none",d:"M24 17L8 17 8 15 24 15 24 17z"}}],name:"subtract--filled",size:32}},22164:(Z,A,r)=>{r.d(A,{A:()=>a});var a={elem:"svg",attrs:{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 16 16",fill:"currentColor",width:16,height:16},content:[{elem:"path",attrs:{d:"M15.5,7.8C14.3,4.7,11.3,2.6,8,2.5C4.7,2.6,1.7,4.7,0.5,7.8c0,0.1,0,0.2,0,0.3c1.2,3.1,4.1,5.2,7.5,5.3\tc3.3-0.1,6.3-2.2,7.5-5.3C15.5,8.1,15.5,7.9,15.5,7.8z M8,12.5c-2.7,0-5.4-2-6.5-4.5c1-2.5,3.8-4.5,6.5-4.5s5.4,2,6.5,4.5\tC13.4,10.5,10.6,12.5,8,12.5z"}},{elem:"path",attrs:{d:"M8,5C6.3,5,5,6.3,5,8s1.3,3,3,3s3-1.3,3-3S9.7,5,8,5z M8,10c-1.1,0-2-0.9-2-2s0.9-2,2-2s2,0.9,2,2S9.1,10,8,10z"}}],name:"view",size:16}},92124:Z=>{function A(e,l,T){e instanceof RegExp&&(e=r(e,T)),l instanceof RegExp&&(l=r(l,T));var E=a(e,l,T);return E&&{start:E[0],end:E[1],pre:T.slice(0,E[0]),body:T.slice(E[0]+e.length,E[1]),post:T.slice(E[1]+l.length)}}function r(e,l){var T=l.match(e);return T?T[0]:null}function a(e,l,T){var E,f,u,F,p,S=T.indexOf(e),_=T.indexOf(l,S+1),v=S;if(S>=0&&_>0){if(e===l)return[S,_];for(E=[],u=T.length;v>=0&&!p;)v==S?(E.push(v),S=T.indexOf(e,v+1)):1==E.length?p=[E.pop(),_]:((f=E.pop())<u&&(u=f,F=_),_=T.indexOf(l,v+1)),v=S<_&&S>=0?S:_;E.length&&(p=[u,F])}return p}Z.exports=A,A.range=a},7563:(Z,A,r)=>{var a=r(92124);Z.exports=function _(m){return m?("{}"===m.substr(0,2)&&(m="\\{\\}"+m.substr(2)),b(function F(m){return m.split("\\\\").join(e).split("\\{").join(l).split("\\}").join(T).split("\\,").join(E).split("\\.").join(f)}(m),!0).map(p)):[]};var e="\0SLASH"+Math.random()+"\0",l="\0OPEN"+Math.random()+"\0",T="\0CLOSE"+Math.random()+"\0",E="\0COMMA"+Math.random()+"\0",f="\0PERIOD"+Math.random()+"\0";function u(m){return parseInt(m,10)==m?parseInt(m,10):m.charCodeAt(0)}function p(m){return m.split(e).join("\\").split(l).join("{").split(T).join("}").split(E).join(",").split(f).join(".")}function S(m){if(!m)return[""];var g=[],O=a("{","}",m);if(!O)return m.split(",");var N=O.pre,c=O.body,z=O.post,B=N.split(",");B[B.length-1]+="{"+c+"}";var q=S(z);return z.length&&(B[B.length-1]+=q.shift(),B.push.apply(B,q)),g.push.apply(g,B),g}function v(m){return"{"+m+"}"}function R(m){return/^-?0\d/.test(m)}function P(m,g){return m<=g}function M(m,g){return m>=g}function b(m,g){var O=[],N=a("{","}",m);if(!N)return[m];var c=N.pre,z=N.post.length?b(N.post,!1):[""];if(/\$$/.test(N.pre))for(var B=0;B<z.length;B++){var q=c+"{"+N.body+"}"+z[B];O.push(q)}else{var fe,ye,Q=/^-?\d+\.\.-?\d+(?:\.\.-?\d+)?$/.test(N.body),G=/^[a-zA-Z]\.\.[a-zA-Z](?:\.\.-?\d+)?$/.test(N.body),D=Q||G,oe=N.body.indexOf(",")>=0;if(!D&&!oe)return N.post.match(/,(?!,).*\}/)?b(m=N.pre+"{"+N.body+T+N.post):[m];if(D)fe=N.body.split(/\.\./);else if(1===(fe=S(N.body)).length&&1===(fe=b(fe[0],!1).map(v)).length)return z.map(function(Ce){return N.pre+fe[0]+Ce});if(D){var je=u(fe[0]),Le=u(fe[1]),Fe=Math.max(fe[0].length,fe[1].length),te=3==fe.length?Math.abs(u(fe[2])):1,le=P;Le<je&&(te*=-1,le=M);var _e=fe.some(R);ye=[];for(var ue=je;le(ue,Le);ue+=te){var C;if(G)"\\"===(C=String.fromCharCode(ue))&&(C="");else if(C=String(ue),_e){var K=Fe-C.length;if(K>0){var ce=new Array(K+1).join("0");C=ue<0?"-"+ce+C.slice(1):ce+C}}ye.push(C)}}else{ye=[];for(var Ee=0;Ee<fe.length;Ee++)ye.push.apply(ye,b(fe[Ee],!1))}for(Ee=0;Ee<ye.length;Ee++)for(B=0;B<z.length;B++){q=c+ye[Ee]+z[B];(!g||D||q)&&O.push(q)}}return O}},11378:(Z,A,r)=>{r.d(A,{P:()=>g});var a=r(87536),e=r(73651),l=r(19116),T=r(12540),E=r(6783),f=r(18457);class u{constructor(N){this.formatter=N,this.bytesLabels=["B","KiB","MiB","GiB","TiB","PiB","EiB","ZiB","YiB"],this.bytesPerSecondLabels=["B/s","KiB/s","MiB/s","GiB/s","TiB/s","PiB/s","EiB/s","ZiB/s","YiB/s"],this.secondsLabels=["ns","\u03bcs","ms","s","ks","Ms"],this.unitlessLabels=["","k","M","G","T","P","E","Z","Y"]}formatFromTo(N,c,z="",B,q,Q=1){return this.formatter.formatNumberFromTo(N,c,z,B,q,Q)}formatBytesFromTo(N,c,z,B=1){return this.formatFromTo(N,c,z,1024,this.bytesLabels,B)}formatBytesPerSecondFromTo(N,c,z,B=1){return this.formatFromTo(N,c,z,1024,this.bytesPerSecondLabels,B)}formatSecondsFromTo(N,c,z,B=1){return this.formatFromTo(N,c,z,1e3,this.secondsLabels,B)}formatUnitlessFromTo(N,c,z="",B=1){return this.formatFromTo(N,c,z,1e3,this.unitlessLabels,B)}static{this.\u0275fac=function(c){return new(c||u)(a.\u0275\u0275inject(T.k))}}static{this.\u0275prov=a.\u0275\u0275defineInjectable({token:u,factory:u.\u0275fac,providedIn:"root"})}}r(58793);var p=r(35855),S=r(91974);const _=(O,N)=>({"chart mt-3":O,"mt-3":N}),v=O=>({"d-inline-block text-truncate":O}),R=O=>({width:O});function P(O,N){if(1&O&&(a.\u0275\u0275i18nStart(0,1,2),a.\u0275\u0275elementContainerStart(1),a.\u0275\u0275element(2,"span",13),a.\u0275\u0275elementContainerEnd(),a.\u0275\u0275i18nEnd()),2&O){const c=a.\u0275\u0275nextContext(2).$implicit,z=a.\u0275\u0275nextContext();a.\u0275\u0275advance(2),a.\u0275\u0275property("ngClass",a.\u0275\u0275pureFunction1(4,v,z.truncateLabel))("ngStyle",a.\u0275\u0275pureFunction1(6,R,z.truncateLabel?"10rem":"auto"))("title",c.label),a.\u0275\u0275i18nExp(c.label),a.\u0275\u0275i18nApply(0)}}function M(O,N){if(1&O&&(a.\u0275\u0275i18nStart(0,1,3),a.\u0275\u0275element(1,"div"),a.\u0275\u0275i18nEnd()),2&O){const c=a.\u0275\u0275nextContext(3);a.\u0275\u0275advance(),a.\u0275\u0275i18nExp(c.maxConvertedValue)(c.maxConvertedValueUnits),a.\u0275\u0275i18nApply(0)}}function b(O,N){if(1&O&&(a.\u0275\u0275i18nStart(0,1,1),a.\u0275\u0275elementStart(1,"div",10),a.\u0275\u0275element(2,"div",11),a.\u0275\u0275template(3,P,3,8,"ng-container",12),a.\u0275\u0275element(4,"span"),a.\u0275\u0275template(5,M,2,2,"div",12),a.\u0275\u0275elementEnd(),a.\u0275\u0275i18nEnd()),2&O){const c=a.\u0275\u0275nextContext().$implicit,z=a.\u0275\u0275nextContext();a.\u0275\u0275advance(2),a.\u0275\u0275styleProp("background-color",c.pointBackgroundColor),a.\u0275\u0275advance(),a.\u0275\u0275property("ngIf",!z.chartTitle.includes(c.label)),a.\u0275\u0275advance(2),a.\u0275\u0275property("ngIf",z.maxValue&&c.currentData),a.\u0275\u0275i18nExp((null==c?null:c.currentData)||"N/A")(null==c?null:c.currentDataUnits),a.\u0275\u0275i18nApply(0)}}function m(O,N){if(1&O&&(a.\u0275\u0275elementStart(0,"div"),a.\u0275\u0275i18nStart(1,1),a.\u0275\u0275template(2,b,6,6,"div",9),a.\u0275\u0275i18nEnd(),a.\u0275\u0275elementEnd()),2&O){const c=N.$implicit;a.\u0275\u0275advance(2),a.\u0275\u0275property("ngIf",0!==c.data.length)}}class g{constructor(N,c,z,B,q,Q){this.cssHelper=N,this.dimlessBinary=c,this.dimlessBinaryPerSecond=z,this.dimlessPipe=B,this.formatter=q,this.numberFormatter=Q,this.labelsArray=[],this.decimals=1,this.truncateLabel=!1,this.isMultiCluster=!1,this.chartData={dataset:[]},this.options={},this.currentChartData={},this.chartAreaBorderPlugin=[{beforeDraw(G){if(!G.options.plugins.borderArea)return;const{ctx:D,chartArea:{left:oe,top:fe,width:ye,height:je}}=G;D.save(),D.strokeStyle=G.options.plugins.chartAreaBorder.borderColor,D.lineWidth=G.options.plugins.chartAreaBorder.borderWidth,D.setLineDash(G.options.plugins.chartAreaBorder.borderDash||[]),D.lineDashOffset=G.options.plugins.chartAreaBorder.borderDashOffset,D.strokeRect(oe,fe,ye,je),D.restore()}}],this.chartColors=[[this.cssHelper.propertyValue("chart-color-strong-blue"),this.cssHelper.propertyValue("chart-color-translucent-blue")],[this.cssHelper.propertyValue("chart-color-orange"),this.cssHelper.propertyValue("chart-color-translucent-orange")],[this.cssHelper.propertyValue("chart-color-green"),this.cssHelper.propertyValue("chart-color-translucent-green")],[this.cssHelper.propertyValue("chart-color-cyan"),this.cssHelper.propertyValue("chart-color-translucent-cyan")],[this.cssHelper.propertyValue("chart-color-purple"),this.cssHelper.propertyValue("chart-color-translucent-purple")],[this.cssHelper.propertyValue("chart-color-red"),this.cssHelper.propertyValue("chart-color-translucent-red")]],this.options={plugins:{legend:{display:!1},tooltip:{mode:"index",external:function(G){G.tooltip.x=10,G.tooltip.y=0}.bind(this),intersect:!1,displayColors:!0,backgroundColor:this.cssHelper.propertyValue("chart-color-tooltip-background"),callbacks:{title:function(G){return G[0].xLabel},label:G=>" "+G.dataset.label+" - "+G.formattedValue+" "+this.chartDataUnits}},borderArea:!0,chartAreaBorder:{borderColor:this.cssHelper.propertyValue("chart-color-slight-dark-gray"),borderWidth:1}},responsive:!0,maintainAspectRatio:!1,animation:!1,elements:{point:{radius:0}},hover:{intersect:!1},scales:{x:{display:!1,type:"time",grid:{display:!1},time:{tooltipFormat:"DD/MM/YYYY - HH:mm:ss"}},y:{afterFit:G=>G.width=100,grid:{display:!1},beginAtZero:!0,ticks:{maxTicksLimit:4}}}}}ngOnChanges(N){this.updateChartData(N)}ngAfterViewInit(){this.updateChartData(null)}updateChartData(N){this.labelsArray.forEach((c,z)=>{const B=z%this.chartColors?.length;this.chartData.dataset[z]={label:"",data:[],tension:.2,pointBackgroundColor:this.chartColors[B][0],backgroundColor:this.chartColors[B][1],borderColor:this.chartColors[B][0],borderWidth:1,fill:{target:"origin"}},this.chartData.dataset[z].label=this.labelsArray[z]}),this.setChartTicks(),this.dataArray?.[0]?.length&&(this.dataArray=N?.dataArray?.currentValue||this.dataArray,this.currentChartData=this.chartData,this.dataArray?.forEach((c,z)=>{this.chartData.dataset[z].data=this.formatData(this.dataArray[z]);let B=this.dataArray?.[z]?.[this.dataArray[z]?.length-1]?this.dataArray[z][this.dataArray[z]?.length-1][1]:0;B&&([this.currentChartData.dataset[z].currentData,this.currentChartData.dataset[z].currentDataUnits]=this.convertUnits(B).split(" "),[this.maxConvertedValue,this.maxConvertedValueUnits]=this.convertUnits(this.maxValue).split(" "),this.currentChartData.dataset[z].currentDataValue=B)}),this.currentChartData.dataset.sort((c,z)=>parseFloat(z.currentDataValue)-parseFloat(c.currentDataValue))),this.chart&&this.chart.chart.update()}formatData(N){let c={};return c=N?.map(z=>({x:1e3*z[0],y:Number(this.convertToChartDataUnits(z[1]).replace(/[^\d,.]+/g,""))})),c}convertToChartDataUnits(N){let c="";return null!==this.chartDataUnits&&(c="B"===this.dataUnits?this.numberFormatter.formatBytesFromTo(N,this.dataUnits,this.chartDataUnits,this.decimals):"B/s"===this.dataUnits?this.numberFormatter.formatBytesPerSecondFromTo(N,this.dataUnits,this.chartDataUnits,this.decimals):"ms"===this.dataUnits?this.numberFormatter.formatSecondsFromTo(N,this.dataUnits,this.chartDataUnits,this.decimals):this.numberFormatter.formatUnitlessFromTo(N,this.dataUnits,this.chartDataUnits,this.decimals)),c}convertUnits(N){let c="";return c="B"===this.dataUnits?this.dimlessBinary.transform(N,this.decimals):"B/s"===this.dataUnits?this.dimlessBinaryPerSecond.transform(N,this.decimals):"ms"===this.dataUnits?this.formatter.format_number(N,1e3,["ms","s"],this.decimals):this.dimlessPipe.transform(N,this.decimals),c}setChartTicks(){if(!this.chart)return void(this.chartDataUnits="");let N=0,c="";const z=this.dataArray?.reduce((q,Q)=>q.concat(Q?.map(G=>G[1])),[]);N=z?Math.max(...z.map(Number)):0,[N,c]=this.convertUnits(N).split(" ");this.chart.chart.options.scales.y.ticks.callback=q=>0===q?null:c?`${q} ${c}`:`${q}`,this.chartDataUnits=c||"",this.chart.chart.update()}static{this.\u0275fac=function(c){return new(c||g)(a.\u0275\u0275directiveInject(p._),a.\u0275\u0275directiveInject(e.l),a.\u0275\u0275directiveInject(l.w),a.\u0275\u0275directiveInject(f.u),a.\u0275\u0275directiveInject(T.k),a.\u0275\u0275directiveInject(u))}}static{this.\u0275cmp=a.\u0275\u0275defineComponent({type:g,selectors:[["cd-dashboard-area-chart"]],viewQuery:function(c,z){if(1&c&&a.\u0275\u0275viewQuery(E.BaseChartDirective,5),2&c){let B;a.\u0275\u0275queryRefresh(B=a.\u0275\u0275loadQuery())&&(z.chart=B.first)}},inputs:{chartTitle:"chartTitle",maxValue:"maxValue",dataUnits:"dataUnits",dataArray:"dataArray",labelsArray:"labelsArray",decimals:"decimals",truncateLabel:"truncateLabel",isMultiCluster:"isMultiCluster"},features:[a.\u0275\u0275NgOnChangesFeature],decls:9,vars:10,consts:()=>{let N,c;return N=$localize`:␟d53ee43922e019b87825c225bcc105d65cfb7a0e␟6477782095541912338:${"\ufffd0\ufffd"}:INTERPOLATION:`,c=$localize`:␟392f1bddd53736a3b51011bb32185582a6750a34␟9211046903360908239:${"\ufffd*2:1\ufffd\ufffd#1:1\ufffd"}:START_TAG_DIV_2:${"\ufffd#2:1\ufffd"}:START_TAG_DIV:${"[\ufffd/#2:1\ufffd|\ufffd/#1:3\ufffd\ufffd/*5:3\ufffd|\ufffd/#1:1\ufffd\ufffd/*2:1\ufffd]"}:CLOSE_TAG_DIV:${"\ufffd*3:2\ufffd\ufffd#1:2\ufffd"}:START_TAG_NG_CONTAINER:${"\ufffd#2:2\ufffd"}:START_TAG_SPAN:${"\ufffd0:2\ufffd"}:INTERPOLATION:${"[\ufffd/#2:2\ufffd|\ufffd/#4:1\ufffd]"}:CLOSE_TAG_SPAN:: ${"\ufffd/#1:2\ufffd\ufffd/*3:2\ufffd"}:CLOSE_TAG_NG_CONTAINER:${"\ufffd#4:1\ufffd"}:START_TAG_SPAN_1:${"\ufffd0:1\ufffd"}:INTERPOLATION_1: ${"\ufffd1:1\ufffd"}:INTERPOLATION_2:${"[\ufffd/#2:2\ufffd|\ufffd/#4:1\ufffd]"}:CLOSE_TAG_SPAN:${"\ufffd*5:3\ufffd\ufffd#1:3\ufffd"}:START_TAG_DIV_1: used of ${"\ufffd0:3\ufffd"}:INTERPOLATION_3: ${"\ufffd1:3\ufffd"}:INTERPOLATION_4: ${"[\ufffd/#2:1\ufffd|\ufffd/#1:3\ufffd\ufffd/*5:3\ufffd|\ufffd/#1:1\ufffd\ufffd/*2:1\ufffd]"}:CLOSE_TAG_DIV:${"[\ufffd/#2:1\ufffd|\ufffd/#1:3\ufffd\ufffd/*5:3\ufffd|\ufffd/#1:1\ufffd\ufffd/*2:1\ufffd]"}:CLOSE_TAG_DIV:`,c=a.\u0275\u0275i18nPostprocess(c),[N,c,[1,"row","mt-2"],[1,"col-3","d-flex","flex-column","align-self-center"],[1,"chartTitle","pb-2"],[4,"ngFor","ngForOf"],[1,"col-9","d-flex","flex-column"],[3,"ngClass"],["baseChart","",3,"datasets","options","type","plugins"],["class","d-inline-flex align-items-center gap-1",4,"ngIf"],[1,"d-inline-flex","align-items-center","gap-1"],[1,"box"],[4,"ngIf"],[3,"ngClass","ngStyle","title"]]},template:function(c,z){1&c&&(a.\u0275\u0275elementStart(0,"div",2)(1,"div",3),a.\u0275\u0275element(2,"br"),a.\u0275\u0275elementStart(3,"b",4),a.\u0275\u0275i18n(4,0),a.\u0275\u0275elementEnd(),a.\u0275\u0275template(5,m,3,1,"div",5),a.\u0275\u0275elementEnd(),a.\u0275\u0275elementStart(6,"div",6)(7,"div",7),a.\u0275\u0275element(8,"canvas",8),a.\u0275\u0275elementEnd()()()),2&c&&(a.\u0275\u0275advance(4),a.\u0275\u0275i18nExp(z.chartTitle),a.\u0275\u0275i18nApply(4),a.\u0275\u0275advance(),a.\u0275\u0275property("ngForOf",z.currentChartData.dataset),a.\u0275\u0275advance(2),a.\u0275\u0275property("ngClass",a.\u0275\u0275pureFunction2(7,_,!z.isMultiCluster,z.isMultiCluster)),a.\u0275\u0275advance(),a.\u0275\u0275property("datasets",z.chartData.dataset)("options",z.options)("type","line")("plugins",z.chartAreaBorderPlugin))},dependencies:[S.NgClass,S.NgForOf,S.NgIf,S.NgStyle,E.BaseChartDirective],styles:[".chart[_ngcontent-%COMP%]{height:9vh}.box[_ngcontent-%COMP%]{background-color:#0078c8;border:2px double #f0f0f0;height:13px;width:13px}"]})}}},47830:(Z,A,r)=>{r.d(A,{M:()=>_});var a=r(87536),l=r(89939),T=r.n(l),E=r(91974),u=r(90476),F=r(53648);function S(v,R){if(1&v&&(a.\u0275\u0275elementStart(0,"option",3),a.\u0275\u0275text(1),a.\u0275\u0275elementEnd()),2&v){const P=R.$implicit;a.\u0275\u0275property("ngValue",P.value),a.\u0275\u0275advance(),a.\u0275\u0275textInterpolate1("",P.name," ")}}class _{constructor(){this.selectedTime=new a.EventEmitter,this.times=[{name:$localize`Last 5 minutes`,value:this.timeToDate(300,1)},{name:$localize`Last 15 minutes`,value:this.timeToDate(900,3)},{name:$localize`Last 30 minutes`,value:this.timeToDate(1800,7)},{name:$localize`Last 1 hour`,value:this.timeToDate(3600,14)},{name:$localize`Last 3 hours`,value:this.timeToDate(10800,42)},{name:$localize`Last 6 hours`,value:this.timeToDate(21600,84)},{name:$localize`Last 12 hours`,value:this.timeToDate(43200,168)},{name:$localize`Last 24 hours`,value:this.timeToDate(86400,336)}],this.time=this.times[3].value}emitTime(){this.selectedTime.emit(this.timeToDate(this.time.end-this.time.start,this.time.step))}timeToDate(R,P){return{start:T()().unix()-R,end:T()().unix(),step:P}}static{this.\u0275fac=function(P){return new(P||_)}}static{this.\u0275cmp=a.\u0275\u0275defineComponent({type:_,selectors:[["cd-dashboard-time-selector"]],outputs:{selectedTime:"selectedTime"},decls:3,vars:2,consts:[[1,"timeSelector"],["id","timepicker","name","timepicker",1,"form-select",3,"ngModelChange","ngModel"],[3,"ngValue",4,"ngFor","ngForOf"],[3,"ngValue"]],template:function(P,M){1&P&&(a.\u0275\u0275elementStart(0,"div",0)(1,"select",1),a.\u0275\u0275twoWayListener("ngModelChange",function(m){return a.\u0275\u0275twoWayBindingSet(M.time,m)||(M.time=m),m}),a.\u0275\u0275listener("ngModelChange",function(){return M.emitTime()}),a.\u0275\u0275template(2,S,2,2,"option",2),a.\u0275\u0275elementEnd()()),2&P&&(a.\u0275\u0275advance(),a.\u0275\u0275twoWayProperty("ngModel",M.time),a.\u0275\u0275advance(),a.\u0275\u0275property("ngForOf",M.times))},dependencies:[E.NgForOf,u.S,F.NgSelectOption,F.\u0275NgSelectMultipleOption,F.SelectControlValueAccessor,F.NgControlStatus,F.NgModel],styles:[".timeSelector[_ngcontent-%COMP%]{position:absolute;right:18px;top:20px;width:12rem}"]})}}},45518:(Z,A,r)=>{r.d(A,{W:()=>O});var a=r(91974),l=r(53648),E=r(76218),u=r(77317),p=r(6783),_=r(487),R=r(93887),P=r(26481),M=r(3600),m=r(87536);class O{static{this.\u0275fac=function(z){return new(z||O)}}static{this.\u0275mod=m.\u0275\u0275defineNgModule({type:O})}static{this.\u0275inj=m.\u0275\u0275defineInjector({providers:[(0,p.provideCharts)((0,p.withDefaultRegisterables)())],imports:[P._,a.CommonModule,u.NgbNavModule,R.G,E.RouterModule,u.NgbTooltipModule,l.FormsModule,l.ReactiveFormsModule,_.SimplebarAngularModule,M.ToggletipModule,M.InlineLoadingModule]})}}},8265:(Z,A,r)=>{var a,e;r.d(A,{q:()=>a}),(e=a||(a={})).CEPH="CEPH",e.RGW="RGW"},38157:(Z,A,r)=>{r.d(A,{$:()=>te});var a=r(87536),e=r(22341),l=r(25947),T=r(54372),E=r(19380),f=r(82254),u=r(2361),F=r(98996),p=r(95631),S=r(50619),_=r(62847),v=r(32295),R=r(45843),P=r(91974),M=r(3600),b=r(64333),m=r(70848);function g(le,ie){if(1&le&&(a.\u0275\u0275elementContainerStart(0),a.\u0275\u0275elementStart(1,"legend"),a.\u0275\u0275i18nStart(2,0),a.\u0275\u0275pipe(3,"titlecase"),a.\u0275\u0275element(4,"cd-help-text"),a.\u0275\u0275i18nEnd(),a.\u0275\u0275elementEnd(),a.\u0275\u0275element(5,"cd-nfs-list",2),a.\u0275\u0275elementContainerEnd()),2&le){const _e=a.\u0275\u0275nextContext();a.\u0275\u0275advance(4),a.\u0275\u0275i18nExp(a.\u0275\u0275pipeBind1(3,2,_e.title)),a.\u0275\u0275i18nApply(2),a.\u0275\u0275advance(),a.\u0275\u0275property("clusterId",_e.selection.name)}}class O{constructor(){this.title=$localize`Export`}static{this.\u0275fac=function(_e){return new(_e||O)}}static{this.\u0275cmp=a.\u0275\u0275defineComponent({type:O,selectors:[["cd-nfs-cluster-details"]],inputs:{selection:"selection"},decls:1,vars:1,consts:()=>{let ie;return ie=$localize`:␟073589bd73951f2678de58bbb5666c915ea9a96d␟3328877729245586547: ${"\ufffd0\ufffd"}:INTERPOLATION: ${"\ufffd#4\ufffd"}:START_TAG_CD_HELP_TEXT: Lists exports for a cluster ${"\ufffd/#4\ufffd"}:CLOSE_TAG_CD_HELP_TEXT:`,[ie,[4,"ngIf"],[3,"clusterId"]]},template:function(_e,ue){1&_e&&a.\u0275\u0275template(0,g,6,4,"ng-container",1),2&_e&&a.\u0275\u0275property("ngIf",!!ue.selection)},dependencies:[b.O,P.NgIf,m.J,P.TitleCasePipe]})}}const N=["hostnameTpl"],c=["ipAddrTpl"],z=["virtualIpTpl"];function B(le,ie){if(1&le&&a.\u0275\u0275element(0,"cd-nfs-cluster-details",7),2&le){const _e=a.\u0275\u0275nextContext(2);a.\u0275\u0275property("selection",_e.expandedRow)}}function q(le,ie){if(1&le){const _e=a.\u0275\u0275getCurrentView();a.\u0275\u0275elementContainerStart(0),a.\u0275\u0275elementStart(1,"cd-table",4),a.\u0275\u0275listener("setExpandedRow",function(C){a.\u0275\u0275restoreView(_e);const K=a.\u0275\u0275nextContext();return a.\u0275\u0275resetView(K.setExpandedRow(C))})("fetchData",function(){a.\u0275\u0275restoreView(_e);const C=a.\u0275\u0275nextContext();return a.\u0275\u0275resetView(C.loadData())})("updateSelection",function(C){a.\u0275\u0275restoreView(_e);const K=a.\u0275\u0275nextContext();return a.\u0275\u0275resetView(K.updateSelection(C))}),a.\u0275\u0275element(2,"cd-table-actions",5),a.\u0275\u0275template(3,B,1,1,"cd-nfs-cluster-details",6),a.\u0275\u0275elementEnd(),a.\u0275\u0275elementContainerEnd()}if(2&le){const _e=ie.ngIf,ue=a.\u0275\u0275nextContext();a.\u0275\u0275advance(),a.\u0275\u0275property("autoReload",!0)("data",_e)("columns",ue.columns)("hasDetails",!0),a.\u0275\u0275advance(),a.\u0275\u0275property("selection",ue.selection)("permission",ue.permission)("tableActions",ue.tableActions)}}function Q(le,ie){if(1&le&&(a.\u0275\u0275elementStart(0,"span")(1,"cds-tag",8),a.\u0275\u0275text(2),a.\u0275\u0275elementEnd()()),2&le){const _e=a.\u0275\u0275nextContext().data.row;a.\u0275\u0275advance(2),a.\u0275\u0275textInterpolate2(" ",_e.virtual_ip,":",_e.port," ")}}function G(le,ie){if(1&le&&a.\u0275\u0275template(0,Q,3,2,"span",3),2&le){const _e=ie.data.row;a.\u0275\u0275property("ngIf",_e.virtual_ip||_e.port)}}function D(le,ie){if(1&le&&(a.\u0275\u0275elementStart(0,"span")(1,"cds-tag",8),a.\u0275\u0275text(2),a.\u0275\u0275elementEnd()()),2&le){const _e=a.\u0275\u0275nextContext().$implicit;a.\u0275\u0275advance(2),a.\u0275\u0275textInterpolate2(" ",_e.ip,":",_e.port," ")}}function oe(le,ie){if(1&le&&(a.\u0275\u0275elementStart(0,"span"),a.\u0275\u0275template(1,D,3,2,"span",3),a.\u0275\u0275elementEnd()),2&le){const _e=ie.$implicit;a.\u0275\u0275advance(),a.\u0275\u0275property("ngIf",_e.ip||_e.port)}}function fe(le,ie){if(1&le&&a.\u0275\u0275template(0,oe,2,1,"span",9),2&le){const _e=ie.data.value;a.\u0275\u0275property("ngForOf",_e)}}function ye(le,ie){if(1&le&&(a.\u0275\u0275elementStart(0,"span")(1,"cds-tag",8),a.\u0275\u0275text(2),a.\u0275\u0275elementEnd()()),2&le){const _e=a.\u0275\u0275nextContext().$implicit;a.\u0275\u0275advance(2),a.\u0275\u0275textInterpolate(_e.hostname)}}function je(le,ie){if(1&le&&(a.\u0275\u0275elementStart(0,"span"),a.\u0275\u0275template(1,ye,3,1,"span",3),a.\u0275\u0275elementEnd()),2&le){const _e=ie.$implicit;a.\u0275\u0275advance(),a.\u0275\u0275property("ngIf",_e.hostname)}}function Le(le,ie){if(1&le&&a.\u0275\u0275template(0,je,2,1,"span",9),2&le){const _e=ie.data.value;a.\u0275\u0275property("ngForOf",_e)}}class te extends l.D{constructor(ie,_e,ue,C,K){super(),this.actionLabels=ie,this.ngZone=_e,this.authStorageService=ue,this.nfsService=C,this.orchService=K,this.columns=[],this.selection=new E.y,this.tableActions=[],this.subject=new p.BehaviorSubject([])}ngOnInit(){this.orchService.status().subscribe(ie=>{this.orchStatus=ie}),this.permission=this.authStorageService.getPermissions().nfs,this.clusters$=this.subject.pipe((0,S.switchMap)(()=>this.nfsService.nfsClusterList())),this.columns=[{name:$localize`Name`,prop:"name",flexGrow:1},{name:$localize`Hostnames`,prop:"backend",flexGrow:2,cellTemplate:this.hostnameTpl},{name:$localize`IP Address`,prop:"backend",flexGrow:2,cellTemplate:this.ipAddrTpl},{name:$localize`Virtual IP Address`,prop:"virtual_ip",flexGrow:1,cellTemplate:this.virtualIpTpl}]}loadData(){this.subject.next([])}updateSelection(ie){this.selection=ie}static{this.\u0275fac=function(_e){return new(_e||te)(a.\u0275\u0275directiveInject(T.Ss),a.\u0275\u0275directiveInject(a.NgZone),a.\u0275\u0275directiveInject(f.v),a.\u0275\u0275directiveInject(e.Z),a.\u0275\u0275directiveInject(F.K))}}static{this.\u0275cmp=a.\u0275\u0275defineComponent({type:te,selectors:[["cd-nfs-cluster"]],viewQuery:function(_e,ue){if(1&_e&&(a.\u0275\u0275viewQuery(N,7),a.\u0275\u0275viewQuery(c,7),a.\u0275\u0275viewQuery(z,7)),2&_e){let C;a.\u0275\u0275queryRefresh(C=a.\u0275\u0275loadQuery())&&(ue.hostnameTpl=C.first),a.\u0275\u0275queryRefresh(C=a.\u0275\u0275loadQuery())&&(ue.ipAddrTpl=C.first),a.\u0275\u0275queryRefresh(C=a.\u0275\u0275loadQuery())&&(ue.virtualIpTpl=C.first)}},features:[a.\u0275\u0275ProvidersFeature([{provide:u.E,useValue:new u.E("cephfs/nfs")}]),a.\u0275\u0275InheritDefinitionFeature],decls:8,vars:3,consts:[["virtualIpTpl",""],["ipAddrTpl",""],["hostnameTpl",""],[4,"ngIf"],["columnMode","flex","selectionType","single",3,"setExpandedRow","fetchData","updateSelection","autoReload","data","columns","hasDetails"],[1,"table-actions",3,"selection","permission","tableActions"],[3,"selection",4,"cdTableDetail"],[3,"selection"],["size","md"],[4,"ngFor","ngForOf"]],template:function(_e,ue){1&_e&&(a.\u0275\u0275template(0,q,4,7,"ng-container",3),a.\u0275\u0275pipe(1,"async"),a.\u0275\u0275template(2,G,1,1,"ng-template",null,0,a.\u0275\u0275templateRefExtractor)(4,fe,1,1,"ng-template",null,1,a.\u0275\u0275templateRefExtractor)(6,Le,1,1,"ng-template",null,2,a.\u0275\u0275templateRefExtractor)),2&_e&&a.\u0275\u0275property("ngIf",a.\u0275\u0275pipeBind1(1,1,(null==ue.orchStatus?null:ue.orchStatus.available)&&ue.clusters$))},dependencies:[_.O,v.j,R.N,P.NgForOf,P.NgIf,M.Tag,O,P.AsyncPipe]})}}},80299:(Z,A,r)=>{r.d(A,{B:()=>dt});var a=r(56207),e=r(53648),l=r(76218),T=r(29841),E=r.n(T),f=r(95631),u=r(50619),F=r(8265),p=r(22341),S=r(29729),_=r(59876),v=r(54372),R=r(46045),P=r(74902),M=r(43808),b=r(58384),m=r(3687),g=r(85481),O=r(82254),N=r(50813),c=r(87536),z=r(90476),B=r(78708),q=r(37966),Q=r(51862),G=r(91974),D=r(3600);const oe=["squashHelper"];function fe(k,H){1&k&&(c.\u0275\u0275elementStart(0,"span",22)(1,"span",23),c.\u0275\u0275i18n(2,5),c.\u0275\u0275elementEnd()())}function ye(k,H){1&k&&(c.\u0275\u0275elementStart(0,"span"),c.\u0275\u0275i18n(1,9),c.\u0275\u0275elementEnd())}function je(k,H){1&k&&(c.\u0275\u0275elementStart(0,"span"),c.\u0275\u0275elementContainerStart(1),c.\u0275\u0275i18n(2,10),c.\u0275\u0275elementContainerEnd(),c.\u0275\u0275element(3,"br"),c.\u0275\u0275elementContainerStart(4),c.\u0275\u0275i18n(5,11),c.\u0275\u0275elementContainerEnd(),c.\u0275\u0275text(6," 192.168.0.10, 192.168.1.0/8 "),c.\u0275\u0275elementEnd())}function Le(k,H){if(1&k&&(c.\u0275\u0275elementStart(0,"span",33),c.\u0275\u0275template(1,ye,2,0,"span",34)(2,je,7,0,"span",34),c.\u0275\u0275elementEnd()),2&k){const V=c.\u0275\u0275nextContext().index,se=c.\u0275\u0275nextContext(),Ne=c.\u0275\u0275reference(4);c.\u0275\u0275advance(),c.\u0275\u0275property("ngIf",se.showError(V,"addresses",Ne,"required")),c.\u0275\u0275advance(),c.\u0275\u0275property("ngIf",se.showError(V,"addresses",Ne,"pattern"))}}function Fe(k,H){if(1&k&&(c.\u0275\u0275i18nStart(0,7,1),c.\u0275\u0275element(1,"option",35),c.\u0275\u0275i18nEnd()),2&k){const V=H.$implicit;c.\u0275\u0275advance(),c.\u0275\u0275property("value",V.value),c.\u0275\u0275i18nExp(V.value),c.\u0275\u0275i18nApply(0)}}function te(k,H){if(1&k&&(c.\u0275\u0275elementStart(0,"span"),c.\u0275\u0275text(1),c.\u0275\u0275elementEnd()),2&k){const V=c.\u0275\u0275nextContext(2).index,se=c.\u0275\u0275nextContext();c.\u0275\u0275advance(),c.\u0275\u0275textInterpolate1(" ",se.getAccessTypeHelp(V)," ")}}function le(k,H){if(1&k&&c.\u0275\u0275template(0,te,2,1,"span",34),2&k){const V=c.\u0275\u0275nextContext().index,se=c.\u0275\u0275nextContext();c.\u0275\u0275property("ngIf",se.getValue(V,"access_type"))}}function ie(k,H){if(1&k&&(c.\u0275\u0275i18nStart(0,8,1),c.\u0275\u0275element(1,"option",35),c.\u0275\u0275i18nEnd()),2&k){const V=H.$implicit;c.\u0275\u0275advance(),c.\u0275\u0275property("value",V),c.\u0275\u0275i18nExp(V),c.\u0275\u0275i18nApply(0)}}function _e(k,H){if(1&k){const V=c.\u0275\u0275getCurrentView();c.\u0275\u0275elementStart(0,"div")(1,"div",14)(2,"h6"),c.\u0275\u0275text(3),c.\u0275\u0275elementStart(4,"cds-icon-button",24),c.\u0275\u0275listener("click",function(){const Ne=c.\u0275\u0275restoreView(V).index,Ve=c.\u0275\u0275nextContext();return c.\u0275\u0275resetView(Ve.removeClient(Ne))}),c.\u0275\u0275namespaceSVG(),c.\u0275\u0275element(5,"svg",25),c.\u0275\u0275elementEnd()(),c.\u0275\u0275namespaceHTML(),c.\u0275\u0275elementStart(6,"div")(7,"div",12)(8,"cds-text-label",26),c.\u0275\u0275i18nStart(9,6),c.\u0275\u0275element(10,"input",27),c.\u0275\u0275i18nEnd(),c.\u0275\u0275elementEnd(),c.\u0275\u0275template(11,Le,3,2,"ng-template",null,1,c.\u0275\u0275templateRefExtractor),c.\u0275\u0275elementEnd(),c.\u0275\u0275elementStart(13,"div",12)(14,"cds-select",28),c.\u0275\u0275i18nStart(15,7),c.\u0275\u0275element(16,"option",29),c.\u0275\u0275template(17,Fe,2,2,"option",30),c.\u0275\u0275i18nEnd(),c.\u0275\u0275elementEnd(),c.\u0275\u0275template(18,le,1,1,"ng-template",null,2,c.\u0275\u0275templateRefExtractor),c.\u0275\u0275elementEnd(),c.\u0275\u0275elementStart(20,"div",31)(21,"cds-select",32),c.\u0275\u0275i18nStart(22,8),c.\u0275\u0275element(23,"option",29),c.\u0275\u0275template(24,ie,2,2,"option",30),c.\u0275\u0275i18nEnd(),c.\u0275\u0275elementEnd()()()()()}if(2&k){const V=H.$implicit,se=H.index,Ne=c.\u0275\u0275reference(12),Ve=c.\u0275\u0275reference(19),et=c.\u0275\u0275nextContext();c.\u0275\u0275advance(),c.\u0275\u0275property("formGroup",V),c.\u0275\u0275advance(2),c.\u0275\u0275textInterpolate1(" Client ",se+1," "),c.\u0275\u0275advance(5),c.\u0275\u0275property("invalid",!V.controls.addresses.valid&&V.controls.addresses.dirty)("invalidText",Ne),c.\u0275\u0275advance(2),c.\u0275\u0275property("invalid",!V.controls.addresses.valid&&V.controls.addresses.dirty),c.\u0275\u0275advance(4),c.\u0275\u0275property("helperText",Ve),c.\u0275\u0275advance(3),c.\u0275\u0275property("ngForOf",et.nfsAccessType),c.\u0275\u0275advance(4),c.\u0275\u0275property("helperText",et.squashHelperTpl),c.\u0275\u0275advance(3),c.\u0275\u0275property("ngForOf",et.nfsSquash),c.\u0275\u0275i18nExp(et.getNoSquashDescr()),c.\u0275\u0275i18nApply(22)}}class ue{constructor(H){this.nfsService=H,this.nfsSquash=[],this.nfsAccessType=[],this.icons=R.FI}ngOnInit(){this.nfsSquash=Object.keys(this.nfsService.nfsSquash),this.nfsAccessType=this.nfsService.nfsAccessType,E().forEach(this.clients,H=>{this.addClient().patchValue(H)}),this.clientsFormArray=this.form.get("clients")}getNoAccessTypeDescr(){return this.form.getValue("access_type")?`${this.form.getValue("access_type")} ${$localize`(inherited from global config)`}`:$localize`-- Select the access type --`}getAccessTypeHelp(H){const V=this.nfsAccessType.find(se=>this.getValue(H,"access_type")===se.value);return E().isObjectLike(V)?V.help:""}getNoSquashDescr(){return this.form.getValue("squash")?`${this.form.getValue("squash")} (${$localize`inherited from global config`})`:$localize`-- Select what kind of user id squashing is performed --`}addClient(){this.clientsFormArray=this.form.get("clients");const H="(([0-9]{1,3})\\.([0-9]{1,3})\\.([0-9]{1,3}).([0-9]{1,3})([/](\\d|[1-2]\\d|3[0-2]))?)",V=`${H}([ ,]{1,2}${H})*`,se=new b.$({addresses:new e.UntypedFormControl("",{validators:[e.Validators.required,e.Validators.pattern(V)]}),access_type:new e.UntypedFormControl(""),squash:new e.UntypedFormControl("")});return this.clientsFormArray.push(se),se}removeClient(H){this.clientsFormArray=this.form.get("clients"),this.clientsFormArray.removeAt(H)}showError(H,V,se,Ne){return this.form.controls.clients.controls[H].showError(V,se,Ne)}getValue(H,V){return this.clientsFormArray=this.form.get("clients"),this.clientsFormArray.at(H).getValue(V)}trackByFn(H){return H}static{this.\u0275fac=function(V){return new(V||ue)(c.\u0275\u0275directiveInject(p.Z))}}static{this.\u0275cmp=c.\u0275\u0275defineComponent({type:ue,selectors:[["cd-nfs-form-client"]],contentQueries:function(V,se,Ne){if(1&V&&c.\u0275\u0275contentQuery(Ne,oe,7),2&V){let Ve;c.\u0275\u0275queryRefresh(Ve=c.\u0275\u0275loadQuery())&&(se.squashHelperTpl=Ve.first)}},inputs:{form:"form",clients:"clients"},decls:14,vars:4,consts:()=>{let H,V,se,Ne,Ve,et,gt,Ft,Pt;return H=$localize`:␟7ffe39df9d88c972792bd8688b215392deb8313d␟5910845130937645353:Clients`,V=$localize`:␟0660ae339068979854ade34a96546980723dede3␟6031909138548647889:Add clients`,se=$localize`:␟f2dae0bda66f6a349444951c0379c28cda47d6d1␟6651663946499178274:Any client can access`,Ne=$localize`:␟c973e3f18b35e9b7ba6b0691d64ef4c4db292e8a␟4518058907872594112:Addresses ${"\ufffd#10\ufffd\ufffd/#10\ufffd"}:TAG_INPUT:`,Ve=$localize`:␟1922a638b1e0e6c9f05674df449706dc0164c887␟4901972441722317020:Access Type ${"\ufffd#16\ufffd"}:START_TAG_OPTION:No Access Type${"[\ufffd/#16\ufffd|\ufffd/#1:1\ufffd\ufffd/*17:1\ufffd]"}:CLOSE_TAG_OPTION:${"\ufffd*17:1\ufffd\ufffd#1:1\ufffd"}:START_TAG_OPTION_1:${"\ufffd0:1\ufffd"}:INTERPOLATION:${"[\ufffd/#16\ufffd|\ufffd/#1:1\ufffd\ufffd/*17:1\ufffd]"}:CLOSE_TAG_OPTION:`,Ve=c.\u0275\u0275i18nPostprocess(Ve),et=$localize`:␟8bc956ab18e3bf0a4797dd0d96811953999b93f2␟1265754954327953100:Squash ${"\ufffd#23\ufffd"}:START_TAG_OPTION:${"\ufffd0\ufffd"}:INTERPOLATION:${"[\ufffd/#23\ufffd|\ufffd/#1:1\ufffd\ufffd/*24:1\ufffd]"}:CLOSE_TAG_OPTION:${"\ufffd*24:1\ufffd\ufffd#1:1\ufffd"}:START_TAG_OPTION_1:${"\ufffd0:1\ufffd"}:INTERPOLATION_1:${"[\ufffd/#23\ufffd|\ufffd/#1:1\ufffd\ufffd/*24:1\ufffd]"}:CLOSE_TAG_OPTION:`,et=c.\u0275\u0275i18nPostprocess(et),gt=$localize`:␟7cbdabcece469fab89cfa687ab152bca18b97498␟1417693714872528491:This field is required.`,Ft=$localize`:␟a5f3f74c0f6925826cb2188576391c0da01a23f0␟8319443009660817074:Must contain one or more comma-separated values`,Pt=$localize`:␟8bb5b2073697f3f4378c44a49b7524934c9268f4␟2032749583415117290:For example:`,[["formDir","ngForm"],["addressesError",""],["accessTypeHelper",""],H,V,se,Ne,Ve,et,gt,Ft,Pt,[1,"form-item"],[1,"cds--label"],[3,"formGroup"],["class","no-border text-muted",4,"ngIf"],["formArrayName","clients"],[4,"ngFor","ngForOf","ngForTrackBy"],["cdsRow",""],["cdsCol",""],["cdsButton","tertiary","type","button","name","add_client",3,"click"],["cdsIcon","add","size","32",1,"cds--btn__icon"],[1,"no-border","text-muted"],[1,"form-text","text-muted"],["kind","ghost","size","md","data-testid","remove_client","data-toggle","button","title","Remove Client",1,"float-end",3,"click"],["cdsIcon","close","size","32",1,"cds--btn__icon"],["for","addresses","cdRequiredField","Addresses",3,"invalid","invalidText"],["cdsText","","name","addresses","id","addresses","formControlName","addresses","placeholder","192.168.0.10, 192.168.1.0/8",3,"invalid"],["label","Access Type","for","access_type","formControlName","access_type","name","access_type","id","access_type",3,"helperText"],["value",""],[3,"value",4,"ngFor","ngForOf"],[1,"form-group","row"],["label","Squash","for","squash","formControlName","squash","name","squash","id","squash",3,"helperText"],[1,"invalid-feedback"],[4,"ngIf"],[3,"value"]]},template:function(V,se){if(1&V){const Ne=c.\u0275\u0275getCurrentView();c.\u0275\u0275elementStart(0,"div",12)(1,"legend",13),c.\u0275\u0275i18n(2,3),c.\u0275\u0275elementEnd(),c.\u0275\u0275elementStart(3,"div",14,0),c.\u0275\u0275template(5,fe,3,0,"span",15),c.\u0275\u0275elementContainerStart(6,16),c.\u0275\u0275template(7,_e,25,10,"div",17),c.\u0275\u0275elementContainerEnd(),c.\u0275\u0275elementStart(8,"div",18)(9,"div",19)(10,"button",20),c.\u0275\u0275listener("click",function(){return c.\u0275\u0275restoreView(Ne),c.\u0275\u0275resetView(se.addClient())}),c.\u0275\u0275elementContainerStart(11),c.\u0275\u0275i18n(12,4),c.\u0275\u0275elementContainerEnd(),c.\u0275\u0275namespaceSVG(),c.\u0275\u0275element(13,"svg",21),c.\u0275\u0275elementEnd()()()()()}2&V&&(c.\u0275\u0275advance(3),c.\u0275\u0275property("formGroup",se.form),c.\u0275\u0275advance(2),c.\u0275\u0275property("ngIf",0===se.form.get("clients").value.length),c.\u0275\u0275advance(2),c.\u0275\u0275property("ngForOf",se.clientsFormArray.controls)("ngForTrackBy",se.trackByFn))},dependencies:[e.NgSelectOption,e.\u0275NgSelectMultipleOption,e.DefaultValueAccessor,e.NgControlStatus,e.NgControlStatusGroup,e.FormGroupDirective,e.FormControlName,e.FormArrayName,z.S,B.C,q.E,Q.P,G.NgForOf,G.NgIf,D.ColumnDirective,D.RowDirective,D.Select,D.Option,D.TextInputLabelComponent,D.TextInput,D.Button,D.IconButton,D.IconDirective]})}}var C=r(19560),K=r(57798),ce=r(67588),Ee=r(28284),Ce=r(70848),Ue=r(16619),He=r(92805),it=r(87837),ct=r(59781),tt=r(56677),Ge=r(77317),ze=r(37353);const ut=["nfsClients"],Pe=()=>({md:4});function De(k,H){1&k&&(c.\u0275\u0275i18nStart(0,20,1),c.\u0275\u0275element(1,"option",91),c.\u0275\u0275i18nEnd())}function Ie(k,H){1&k&&(c.\u0275\u0275i18nStart(0,20,2),c.\u0275\u0275element(1,"option",91),c.\u0275\u0275i18nEnd())}function Qe(k,H){1&k&&(c.\u0275\u0275i18nStart(0,20,3),c.\u0275\u0275element(1,"option",91),c.\u0275\u0275i18nEnd())}function qe(k,H){if(1&k&&(c.\u0275\u0275i18nStart(0,20,4),c.\u0275\u0275element(1,"option",92),c.\u0275\u0275i18nEnd()),2&k){const V=H.$implicit;c.\u0275\u0275advance(),c.\u0275\u0275property("value",V.cluster_id),c.\u0275\u0275i18nExp(V.cluster_id),c.\u0275\u0275i18nApply(0)}}function ht(k,H){if(1&k){const V=c.\u0275\u0275getCurrentView();c.\u0275\u0275elementStart(0,"cd-alert-panel",93),c.\u0275\u0275listener("action",function(){c.\u0275\u0275restoreView(V);const Ne=c.\u0275\u0275nextContext(2);return c.\u0275\u0275resetView(Ne.router.navigate(["/services",{outlets:{modal:["create"]}}]))}),c.\u0275\u0275i18n(1,29),c.\u0275\u0275elementEnd()}}function St(k,H){1&k&&(c.\u0275\u0275elementStart(0,"span"),c.\u0275\u0275i18n(1,30),c.\u0275\u0275elementEnd())}function Jt(k,H){1&k&&(c.\u0275\u0275elementStart(0,"span",95),c.\u0275\u0275i18n(1,31),c.\u0275\u0275elementEnd())}function Lt(k,H){if(1&k&&c.\u0275\u0275template(0,Jt,2,0,"span",94),2&k){c.\u0275\u0275nextContext();const V=c.\u0275\u0275reference(2),se=c.\u0275\u0275nextContext();c.\u0275\u0275property("ngIf",se.nfsForm.showError("cluster_id",V,"required")||0===(null==se.allClusters?null:se.allClusters.length))}}function Zt(k,H){if(1&k){const V=c.\u0275\u0275getCurrentView();c.\u0275\u0275elementStart(0,"div",72)(1,"cds-select",96),c.\u0275\u0275listener("valueChange",function(){c.\u0275\u0275restoreView(V);const Ne=c.\u0275\u0275nextContext(2);return c.\u0275\u0275resetView(Ne.onExportTypeChange())}),c.\u0275\u0275elementStart(2,"option",97),c.\u0275\u0275i18n(3,32),c.\u0275\u0275elementEnd(),c.\u0275\u0275elementStart(4,"option",98),c.\u0275\u0275i18n(5,33),c.\u0275\u0275elementEnd()()()}}function zt(k,H){1&k&&(c.\u0275\u0275i18nStart(0,34,1),c.\u0275\u0275element(1,"option",91),c.\u0275\u0275i18nEnd())}function Xt(k,H){1&k&&(c.\u0275\u0275i18nStart(0,34,2),c.\u0275\u0275element(1,"option",91),c.\u0275\u0275i18nEnd())}function bt(k,H){1&k&&(c.\u0275\u0275i18nStart(0,34,3),c.\u0275\u0275element(1,"option",91),c.\u0275\u0275i18nEnd())}function ft(k,H){if(1&k&&(c.\u0275\u0275i18nStart(0,34,4),c.\u0275\u0275element(1,"option",92),c.\u0275\u0275i18nEnd()),2&k){const V=H.$implicit;c.\u0275\u0275advance(),c.\u0275\u0275property("value",V.name),c.\u0275\u0275i18nExp(V.name),c.\u0275\u0275i18nApply(0)}}function Tt(k,H){1&k&&(c.\u0275\u0275elementStart(0,"span",95),c.\u0275\u0275i18n(1,35),c.\u0275\u0275elementEnd())}function nt(k,H){if(1&k&&c.\u0275\u0275template(0,Tt,2,0,"span",94),2&k){c.\u0275\u0275nextContext(2);const V=c.\u0275\u0275reference(2),se=c.\u0275\u0275nextContext();c.\u0275\u0275property("ngIf",se.nfsForm.showError("fs_name",V,"required"))}}function We(k,H){if(1&k){const V=c.\u0275\u0275getCurrentView();c.\u0275\u0275elementStart(0,"div",72)(1,"cds-select",99),c.\u0275\u0275listener("change",function(){c.\u0275\u0275restoreView(V);const Ne=c.\u0275\u0275nextContext(2);return c.\u0275\u0275resetView(Ne.volumeChangeHandler())}),c.\u0275\u0275i18nStart(2,34),c.\u0275\u0275template(3,zt,2,0,"option",74)(4,Xt,2,0,"option",74)(5,bt,2,0,"option",74)(6,ft,2,2,"option",75),c.\u0275\u0275i18nEnd(),c.\u0275\u0275elementEnd(),c.\u0275\u0275template(7,nt,1,1,"ng-template",null,11,c.\u0275\u0275templateRefExtractor),c.\u0275\u0275elementEnd()}if(2&k){const V=c.\u0275\u0275reference(8),se=c.\u0275\u0275nextContext(2);c.\u0275\u0275advance(),c.\u0275\u0275property("invalid",se.nfsForm.controls.fsal.controls.fs_name.invalid&&se.nfsForm.controls.fsal.controls.fs_name.dirty)("invalidText",V)("skeleton",null===se.allFsNames),c.\u0275\u0275advance(2),c.\u0275\u0275property("ngIf",null===se.allFsNames),c.\u0275\u0275advance(),c.\u0275\u0275property("ngIf",null!==se.allFsNames&&0===se.allFsNames.length),c.\u0275\u0275advance(),c.\u0275\u0275property("ngIf",null!==se.allFsNames&&se.allFsNames.length>0),c.\u0275\u0275advance(),c.\u0275\u0275property("ngForOf",se.allFsNames)}}function at(k,H){1&k&&(c.\u0275\u0275i18nStart(0,36,1),c.\u0275\u0275element(1,"option",91),c.\u0275\u0275i18nEnd())}function Et(k,H){1&k&&(c.\u0275\u0275i18nStart(0,36,2),c.\u0275\u0275element(1,"option",91),c.\u0275\u0275i18nEnd())}function kt(k,H){1&k&&(c.\u0275\u0275i18nStart(0,36,3),c.\u0275\u0275element(1,"option",91),c.\u0275\u0275i18nEnd())}function qt(k,H){if(1&k&&(c.\u0275\u0275i18nStart(0,36,4),c.\u0275\u0275element(1,"option",92),c.\u0275\u0275i18nEnd()),2&k){const V=H.$implicit;c.\u0275\u0275advance(),c.\u0275\u0275property("value",V.user_id),c.\u0275\u0275i18nExp(V.user_id),c.\u0275\u0275i18nApply(0)}}function $t(k,H){1&k&&(c.\u0275\u0275elementStart(0,"span",95),c.\u0275\u0275i18n(1,37),c.\u0275\u0275elementEnd())}function pt(k,H){if(1&k&&c.\u0275\u0275template(0,$t,2,0,"span",94),2&k){c.\u0275\u0275nextContext(2);const V=c.\u0275\u0275reference(2),se=c.\u0275\u0275nextContext();c.\u0275\u0275property("ngIf",se.nfsForm.showError("user_id",V,"required"))}}function Gt(k,H){if(1&k&&(c.\u0275\u0275elementStart(0,"div",72)(1,"cds-select",100),c.\u0275\u0275i18nStart(2,36),c.\u0275\u0275template(3,at,2,0,"option",74)(4,Et,2,0,"option",74)(5,kt,2,0,"option",74)(6,qt,2,2,"option",75),c.\u0275\u0275i18nEnd(),c.\u0275\u0275elementEnd(),c.\u0275\u0275template(7,pt,1,1,"ng-template",null,12,c.\u0275\u0275templateRefExtractor),c.\u0275\u0275elementEnd()),2&k){const V=c.\u0275\u0275reference(8),se=c.\u0275\u0275nextContext(2);c.\u0275\u0275advance(),c.\u0275\u0275property("invalid",se.nfsForm.controls.fsal.controls.user_id.invalid&&se.nfsForm.controls.fsal.controls.user_id.dirty)("invalidText",V)("skeleton",null===se.allRGWUsers),c.\u0275\u0275advance(2),c.\u0275\u0275property("ngIf",null===se.allRGWUsers),c.\u0275\u0275advance(),c.\u0275\u0275property("ngIf",null!==se.allRGWUsers&&0===se.allRGWUsers.length),c.\u0275\u0275advance(),c.\u0275\u0275property("ngIf",null!==se.allRGWUsers&&se.allRGWUsers.length>0),c.\u0275\u0275advance(),c.\u0275\u0275property("ngForOf",se.allRGWUsers)}}function xt(k,H){1&k&&(c.\u0275\u0275elementStart(0,"div",72)(1,"cds-checkbox",101),c.\u0275\u0275i18n(2,38),c.\u0275\u0275elementEnd()())}function Rt(k,H){1&k&&(c.\u0275\u0275elementStart(0,"span",95),c.\u0275\u0275i18n(1,40),c.\u0275\u0275elementEnd())}function Tn(k,H){if(1&k&&c.\u0275\u0275template(0,Rt,2,0,"span",94),2&k){c.\u0275\u0275nextContext(2);const V=c.\u0275\u0275reference(2),se=c.\u0275\u0275nextContext();c.\u0275\u0275property("ngIf",se.nfsForm.showError("sec_label_xattr",V,"required"))}}function st(k,H){if(1&k&&(c.\u0275\u0275elementStart(0,"div",72)(1,"cds-text-label",102),c.\u0275\u0275i18nStart(2,39),c.\u0275\u0275element(3,"input",103),c.\u0275\u0275i18nEnd(),c.\u0275\u0275elementEnd(),c.\u0275\u0275template(4,Tn,1,1,"ng-template",null,13,c.\u0275\u0275templateRefExtractor),c.\u0275\u0275elementEnd()),2&k){const V=c.\u0275\u0275reference(5),se=c.\u0275\u0275nextContext(2);c.\u0275\u0275advance(),c.\u0275\u0275property("invalid",se.nfsForm.controls.sec_label_xattr.invalid&&se.nfsForm.controls.sec_label_xattr.dirty)("invalidText",V),c.\u0275\u0275advance(2),c.\u0275\u0275property("invalid",se.nfsForm.controls.sec_label_xattr.invalid&&se.nfsForm.controls.sec_label_xattr.dirty)}}function Nn(k,H){1&k&&(c.\u0275\u0275i18nStart(0,41,1),c.\u0275\u0275element(1,"option",91),c.\u0275\u0275i18nEnd())}function jt(k,H){1&k&&(c.\u0275\u0275i18nStart(0,41,2),c.\u0275\u0275element(1,"option",91),c.\u0275\u0275i18nEnd())}function dn(k,H){if(1&k&&(c.\u0275\u0275i18nStart(0,41,3),c.\u0275\u0275element(1,"option",106),c.\u0275\u0275i18nEnd()),2&k){const V=H.$implicit,se=c.\u0275\u0275nextContext(3);c.\u0275\u0275advance(),c.\u0275\u0275property("value",V.name)("selected",V.name===se.nfsForm.get("subvolume_group").value),c.\u0275\u0275i18nExp(V.name),c.\u0275\u0275i18nApply(0)}}function Nt(k,H){if(1&k){const V=c.\u0275\u0275getCurrentView();c.\u0275\u0275elementStart(0,"div",72)(1,"cds-select",104),c.\u0275\u0275listener("change",function(){c.\u0275\u0275restoreView(V);const Ne=c.\u0275\u0275nextContext(2);return c.\u0275\u0275resetView(Ne.getSubVol())}),c.\u0275\u0275i18nStart(2,41),c.\u0275\u0275template(3,Nn,2,0,"option",74)(4,jt,2,0,"option",74)(5,dn,2,3,"option",105),c.\u0275\u0275element(6,"option",92),c.\u0275\u0275i18nEnd(),c.\u0275\u0275elementEnd()()}if(2&k){const V=c.\u0275\u0275nextContext(2);c.\u0275\u0275advance(),c.\u0275\u0275property("skeleton",null===V.allsubvolgrps),c.\u0275\u0275advance(2),c.\u0275\u0275property("ngIf",null===V.allsubvolgrps),c.\u0275\u0275advance(),c.\u0275\u0275property("ngIf",null!==V.allsubvolgrps&&V.allsubvolgrps.length>=0),c.\u0275\u0275advance(),c.\u0275\u0275property("ngForOf",V.allsubvolgrps),c.\u0275\u0275advance(),c.\u0275\u0275property("value",V.defaultSubVolGroup),c.\u0275\u0275i18nExp(V.defaultSubVolGroup),c.\u0275\u0275i18nApply(2)}}function Fn(k,H){1&k&&(c.\u0275\u0275i18nStart(0,42,1),c.\u0275\u0275element(1,"option",91),c.\u0275\u0275i18nEnd())}function Wt(k,H){1&k&&(c.\u0275\u0275i18nStart(0,42,2),c.\u0275\u0275element(1,"option",91),c.\u0275\u0275i18nEnd())}function j(k,H){1&k&&(c.\u0275\u0275i18nStart(0,42,3),c.\u0275\u0275element(1,"option",91),c.\u0275\u0275i18nEnd())}function he(k,H){if(1&k&&(c.\u0275\u0275i18nStart(0,42,4),c.\u0275\u0275element(1,"option",106),c.\u0275\u0275i18nEnd()),2&k){const V=H.$implicit,se=c.\u0275\u0275nextContext(3);c.\u0275\u0275advance(),c.\u0275\u0275property("value",V.name)("selected",V.name===se.nfsForm.get("subvolume").value),c.\u0275\u0275i18nExp(V.name),c.\u0275\u0275i18nApply(0)}}function Y(k,H){1&k&&(c.\u0275\u0275elementStart(0,"span",95),c.\u0275\u0275i18n(1,43),c.\u0275\u0275elementEnd())}function lt(k,H){if(1&k&&c.\u0275\u0275template(0,Y,2,0,"span",94),2&k){const V=c.\u0275\u0275nextContext(3);c.\u0275\u0275property("ngIf",V.nfsForm.getValue("subvolume_group")===V.defaultSubVolGroup&&!V.nfsForm.getValue("subvolume"))}}function vn(k,H){if(1&k){const V=c.\u0275\u0275getCurrentView();c.\u0275\u0275elementStart(0,"div",107)(1,"cds-select",108),c.\u0275\u0275listener("change",function(){c.\u0275\u0275restoreView(V);const Ne=c.\u0275\u0275nextContext(2);return c.\u0275\u0275resetView(Ne.setSubVolPath())}),c.\u0275\u0275i18nStart(2,42),c.\u0275\u0275template(3,Fn,2,0,"option",74)(4,Wt,2,0,"option",74)(5,j,2,0,"option",74)(6,he,2,3,"option",105),c.\u0275\u0275i18nEnd(),c.\u0275\u0275elementEnd(),c.\u0275\u0275template(7,lt,1,1,"ng-template",null,14,c.\u0275\u0275templateRefExtractor),c.\u0275\u0275elementEnd()}if(2&k){const V=c.\u0275\u0275reference(8),se=c.\u0275\u0275nextContext(2);c.\u0275\u0275advance(),c.\u0275\u0275property("skeleton",null===se.allsubvols)("invalid",se.nfsForm.controls.subvolume.invalid&&se.nfsForm.controls.subvolume.dirty)("invalidText",V),c.\u0275\u0275advance(2),c.\u0275\u0275property("ngIf",null===se.allsubvols),c.\u0275\u0275advance(),c.\u0275\u0275property("ngIf",null!==se.allsubvols&&0===se.allsubvols.length),c.\u0275\u0275advance(),c.\u0275\u0275property("ngIf",null!==se.allsubvols&&se.allsubvols.length>0),c.\u0275\u0275advance(),c.\u0275\u0275property("ngForOf",se.allsubvols)}}function jn(k,H){1&k&&(c.\u0275\u0275elementStart(0,"span",95),c.\u0275\u0275i18n(1,45),c.\u0275\u0275elementEnd())}function un(k,H){1&k&&(c.\u0275\u0275elementStart(0,"span",95),c.\u0275\u0275i18nStart(1,46),c.\u0275\u0275element(2,"code"),c.\u0275\u0275i18nEnd(),c.\u0275\u0275elementEnd())}function Ae(k,H){1&k&&(c.\u0275\u0275elementStart(0,"span",95),c.\u0275\u0275i18n(1,47),c.\u0275\u0275elementEnd())}function pn(k,H){1&k&&(c.\u0275\u0275elementStart(0,"span",95),c.\u0275\u0275i18n(1,48),c.\u0275\u0275elementEnd())}function Mn(k,H){if(1&k&&c.\u0275\u0275template(0,jn,2,0,"span",94)(1,un,3,0,"span",94)(2,Ae,2,0,"span",94)(3,pn,2,0,"span",94),2&k){c.\u0275\u0275nextContext(2);const V=c.\u0275\u0275reference(2),se=c.\u0275\u0275nextContext();c.\u0275\u0275property("ngIf",se.nfsForm.showError("path",V,"required")),c.\u0275\u0275advance(),c.\u0275\u0275property("ngIf",se.nfsForm.get("path").hasError("isIsolatedSlash")&&se.nfsForm.get("path").touched),c.\u0275\u0275advance(),c.\u0275\u0275property("ngIf",se.nfsForm.showError("path",V,"pattern")),c.\u0275\u0275advance(),c.\u0275\u0275property("ngIf",se.nfsForm.showError("path",V,"pathNameNotAllowed"))}}function mn(k,H){if(1&k&&(c.\u0275\u0275elementStart(0,"div",72)(1,"cds-text-label",109),c.\u0275\u0275i18nStart(2,44),c.\u0275\u0275element(3,"input",110),c.\u0275\u0275i18nEnd(),c.\u0275\u0275elementEnd(),c.\u0275\u0275template(4,Mn,4,4,"ng-template",null,15,c.\u0275\u0275templateRefExtractor),c.\u0275\u0275elementEnd()),2&k){const V=c.\u0275\u0275reference(5),se=c.\u0275\u0275nextContext(2);c.\u0275\u0275advance(),c.\u0275\u0275property("invalid",se.nfsForm.controls.path.invalid&&se.nfsForm.controls.path.dirty)("invalidText",V),c.\u0275\u0275advance(2),c.\u0275\u0275property("ngbTypeahead",se.pathDataSource)("invalid",se.nfsForm.controls.path.invalid&&se.nfsForm.controls.path.dirty)}}function Kt(k,H){1&k&&(c.\u0275\u0275elementStart(0,"span",95),c.\u0275\u0275i18n(1,50),c.\u0275\u0275elementEnd())}function pe(k,H){1&k&&(c.\u0275\u0275elementStart(0,"span",95),c.\u0275\u0275i18nStart(1,51),c.\u0275\u0275element(2,"a",113),c.\u0275\u0275i18nEnd(),c.\u0275\u0275elementEnd())}function Ot(k,H){if(1&k&&c.\u0275\u0275template(0,Kt,2,0,"span",94)(1,pe,3,0,"span",94),2&k){c.\u0275\u0275nextContext(2);const V=c.\u0275\u0275reference(2),se=c.\u0275\u0275nextContext();c.\u0275\u0275property("ngIf",se.nfsForm.showError("path",V,"required")),c.\u0275\u0275advance(),c.\u0275\u0275property("ngIf",se.nfsForm.showError("path",V,"bucketNameNotAllowed"))}}function Wn(k,H){if(1&k&&(c.\u0275\u0275elementStart(0,"div",72)(1,"cds-text-label",111),c.\u0275\u0275i18nStart(2,49),c.\u0275\u0275element(3,"input",112),c.\u0275\u0275i18nEnd(),c.\u0275\u0275elementEnd(),c.\u0275\u0275template(4,Ot,2,2,"ng-template",null,16,c.\u0275\u0275templateRefExtractor),c.\u0275\u0275elementEnd()),2&k){const V=c.\u0275\u0275reference(5),se=c.\u0275\u0275nextContext(2);c.\u0275\u0275advance(),c.\u0275\u0275property("invalid",se.nfsForm.controls.path.invalid&&se.nfsForm.controls.path.dirty)("invalidText",V),c.\u0275\u0275advance(2),c.\u0275\u0275property("ngbTypeahead",se.bucketDataSource)("invalid",se.nfsForm.controls.path.invalid&&se.nfsForm.controls.path.dirty)}}function Kn(k,H){1&k&&(c.\u0275\u0275elementStart(0,"span",95),c.\u0275\u0275i18n(1,52),c.\u0275\u0275elementEnd())}function In(k,H){if(1&k&&c.\u0275\u0275template(0,Kn,2,0,"span",94),2&k){c.\u0275\u0275nextContext();const V=c.\u0275\u0275reference(2),se=c.\u0275\u0275nextContext();c.\u0275\u0275property("ngIf",se.nfsForm.showError("protocolNfsv3",V,"required")||se.nfsForm.showError("protocolNfsv4",V,"required"))}}function Qn(k,H){1&k&&(c.\u0275\u0275elementStart(0,"span"),c.\u0275\u0275i18n(1,54),c.\u0275\u0275elementEnd(),c.\u0275\u0275element(2,"br"),c.\u0275\u0275elementStart(3,"span"),c.\u0275\u0275i18n(4,55),c.\u0275\u0275elementEnd())}function Yn(k,H){1&k&&(c.\u0275\u0275elementStart(0,"span",95),c.\u0275\u0275i18n(1,56),c.\u0275\u0275elementEnd())}function Jn(k,H){1&k&&(c.\u0275\u0275elementStart(0,"span",95),c.\u0275\u0275i18n(1,57),c.\u0275\u0275elementEnd())}function Zn(k,H){1&k&&(c.\u0275\u0275elementStart(0,"span",95),c.\u0275\u0275i18n(1,58),c.\u0275\u0275elementEnd())}function vo(k,H){1&k&&(c.\u0275\u0275elementStart(0,"span",95),c.\u0275\u0275i18n(1,59),c.\u0275\u0275elementEnd())}function fn(k,H){if(1&k&&c.\u0275\u0275template(0,Yn,2,0,"span",94)(1,Jn,2,0,"span",94)(2,Zn,2,0,"span",94)(3,vo,2,0,"span",94),2&k){c.\u0275\u0275nextContext(2);const V=c.\u0275\u0275reference(2),se=c.\u0275\u0275nextContext();c.\u0275\u0275property("ngIf",se.nfsForm.showError("pseudo",V,"required")),c.\u0275\u0275advance(),c.\u0275\u0275property("ngIf",se.nfsForm.showError("pseudo",V,"pseudoAlreadyExists")),c.\u0275\u0275advance(),c.\u0275\u0275property("ngIf",se.nfsForm.showError("pseudo",V,"pattern")),c.\u0275\u0275advance(),c.\u0275\u0275property("ngIf",se.nfsForm.showError("pseudo",V,"minlength")&&"/"===se.nfsForm.getValue("pseudo"))}}function Qt(k,H){if(1&k&&(c.\u0275\u0275elementStart(0,"div",72)(1,"cds-text-label",114),c.\u0275\u0275i18nStart(2,53),c.\u0275\u0275element(3,"input",115),c.\u0275\u0275i18nEnd(),c.\u0275\u0275elementEnd(),c.\u0275\u0275template(4,Qn,5,0,"ng-template",null,17,c.\u0275\u0275templateRefExtractor)(6,fn,4,4,"ng-template",null,18,c.\u0275\u0275templateRefExtractor),c.\u0275\u0275elementEnd()),2&k){const V=c.\u0275\u0275reference(5),se=c.\u0275\u0275reference(7),Ne=c.\u0275\u0275nextContext(2);c.\u0275\u0275advance(),c.\u0275\u0275property("helperText",V)("invalid",Ne.nfsForm.controls.pseudo.invalid&&Ne.nfsForm.controls.pseudo.dirty)("invalidText",se),c.\u0275\u0275advance(2),c.\u0275\u0275property("invalid",Ne.nfsForm.controls.pseudo.invalid&&Ne.nfsForm.controls.pseudo.dirty)}}function Rn(k,H){1&k&&(c.\u0275\u0275i18nStart(0,24,1),c.\u0275\u0275element(1,"option",91),c.\u0275\u0275i18nEnd())}function En(k,H){1&k&&(c.\u0275\u0275i18nStart(0,24,2),c.\u0275\u0275element(1,"option",91),c.\u0275\u0275i18nEnd())}function It(k,H){if(1&k&&(c.\u0275\u0275i18nStart(0,24,3),c.\u0275\u0275element(1,"option",92),c.\u0275\u0275i18nEnd()),2&k){const V=H.$implicit;c.\u0275\u0275advance(),c.\u0275\u0275property("value",V.value),c.\u0275\u0275i18nExp(V.value),c.\u0275\u0275i18nApply(0)}}function An(k,H){if(1&k&&(c.\u0275\u0275elementStart(0,"span"),c.\u0275\u0275text(1),c.\u0275\u0275elementEnd()),2&k){const V=c.\u0275\u0275nextContext(3);c.\u0275\u0275advance(),c.\u0275\u0275textInterpolate1(" ",V.getAccessTypeHelp(V.nfsForm.getValue("access_type"))," ")}}function Dn(k,H){if(1&k&&c.\u0275\u0275template(0,An,2,1,"span",116),2&k){const V=c.\u0275\u0275nextContext(2);c.\u0275\u0275property("ngIf",V.nfsForm.getValue("access_type"))}}function qn(k,H){1&k&&(c.\u0275\u0275elementStart(0,"span"),c.\u0275\u0275i18nStart(1,60),c.\u0275\u0275element(2,"cd-doc",117),c.\u0275\u0275i18nEnd(),c.\u0275\u0275elementEnd())}function eo(k,H){if(1&k&&c.\u0275\u0275template(0,qn,3,0,"span",116),2&k){const V=c.\u0275\u0275nextContext(2);c.\u0275\u0275property("ngIf","RW"===V.nfsForm.getValue("access_type")&&"RGW"===V.storageBackend)}}function to(k,H){1&k&&(c.\u0275\u0275elementStart(0,"span",95),c.\u0275\u0275i18n(1,61),c.\u0275\u0275elementEnd())}function no(k,H){if(1&k&&c.\u0275\u0275template(0,to,2,0,"span",94),2&k){c.\u0275\u0275nextContext();const V=c.\u0275\u0275reference(2),se=c.\u0275\u0275nextContext();c.\u0275\u0275property("ngIf",se.nfsForm.showError("access_type",V,"required"))}}function en(k,H){1&k&&(c.\u0275\u0275i18nStart(0,25,1),c.\u0275\u0275element(1,"option",91),c.\u0275\u0275i18nEnd())}function oo(k,H){1&k&&(c.\u0275\u0275i18nStart(0,25,2),c.\u0275\u0275element(1,"option",91),c.\u0275\u0275i18nEnd())}function gn(k,H){if(1&k&&(c.\u0275\u0275i18nStart(0,25,3),c.\u0275\u0275element(1,"option",92),c.\u0275\u0275i18nEnd()),2&k){const V=H.$implicit;c.\u0275\u0275advance(),c.\u0275\u0275property("value",V),c.\u0275\u0275i18nExp(V),c.\u0275\u0275i18nApply(0)}}function ge(k,H){1&k&&(c.\u0275\u0275elementStart(0,"span"),c.\u0275\u0275i18n(1,62),c.\u0275\u0275elementEnd())}function ee(k,H){1&k&&(c.\u0275\u0275elementStart(0,"span"),c.\u0275\u0275i18n(1,63),c.\u0275\u0275elementEnd())}function ae(k,H){1&k&&(c.\u0275\u0275elementStart(0,"span"),c.\u0275\u0275i18n(1,64),c.\u0275\u0275elementEnd())}function U(k,H){1&k&&(c.\u0275\u0275elementStart(0,"span"),c.\u0275\u0275i18n(1,65),c.\u0275\u0275elementEnd())}function L(k,H){if(1&k&&c.\u0275\u0275template(0,ge,2,0,"span",116)(1,ee,2,0,"span",116)(2,ae,2,0,"span",116)(3,U,2,0,"span",116),2&k){const V=c.\u0275\u0275nextContext(2);c.\u0275\u0275property("ngIf","root_squash"===V.nfsForm.getValue("squash")),c.\u0275\u0275advance(),c.\u0275\u0275property("ngIf","root_id_squash"===V.nfsForm.getValue("squash")),c.\u0275\u0275advance(),c.\u0275\u0275property("ngIf","all_squash"===V.nfsForm.getValue("squash")),c.\u0275\u0275advance(),c.\u0275\u0275property("ngIf","no_root_squash"===V.nfsForm.getValue("squash"))}}function y(k,H){1&k&&(c.\u0275\u0275elementStart(0,"span",95),c.\u0275\u0275i18n(1,66),c.\u0275\u0275elementEnd())}function x(k,H){if(1&k&&c.\u0275\u0275template(0,y,2,0,"span",94),2&k){c.\u0275\u0275nextContext();const V=c.\u0275\u0275reference(2),se=c.\u0275\u0275nextContext();c.\u0275\u0275property("ngIf",se.nfsForm.showError("squash",V,"required"))}}function W(k,H){1&k&&(c.\u0275\u0275elementStart(0,"span",95),c.\u0275\u0275i18n(1,67),c.\u0275\u0275elementEnd())}function me(k,H){if(1&k&&c.\u0275\u0275template(0,W,2,0,"span",94),2&k){c.\u0275\u0275nextContext();const V=c.\u0275\u0275reference(2),se=c.\u0275\u0275nextContext();c.\u0275\u0275property("ngIf",se.nfsForm.showError("transportUDP",V,"required")||se.nfsForm.showError("transportTCP",V,"required"))}}function be(k,H){if(1&k&&(c.\u0275\u0275elementStart(0,"cd-alert-panel",118),c.\u0275\u0275text(1),c.\u0275\u0275elementEnd()),2&k){const V=c.\u0275\u0275nextContext(2);c.\u0275\u0275advance(),c.\u0275\u0275textInterpolate1(" ",V.storageBackendError," ")}}function we(k,H){if(1&k){const V=c.\u0275\u0275getCurrentView();c.\u0275\u0275elementContainerStart(0),c.\u0275\u0275elementStart(1,"form",70,0)(3,"div",71),c.\u0275\u0275i18n(4,19),c.\u0275\u0275pipe(5,"titlecase"),c.\u0275\u0275pipe(6,"upperFirst"),c.\u0275\u0275elementEnd(),c.\u0275\u0275elementStart(7,"div",72)(8,"cds-select",73),c.\u0275\u0275i18nStart(9,20),c.\u0275\u0275template(10,De,2,0,"option",74)(11,Ie,2,0,"option",74)(12,Qe,2,0,"option",74)(13,qe,2,2,"option",75),c.\u0275\u0275i18nEnd(),c.\u0275\u0275elementEnd(),c.\u0275\u0275template(14,ht,2,0,"cd-alert-panel",76)(15,St,2,0,"ng-template",null,1,c.\u0275\u0275templateRefExtractor)(17,Lt,1,1,"ng-template",null,2,c.\u0275\u0275templateRefExtractor),c.\u0275\u0275elementEnd(),c.\u0275\u0275template(19,Zt,6,0,"div",77),c.\u0275\u0275elementStart(20,"div",78),c.\u0275\u0275template(21,We,9,7,"div",77)(22,Gt,9,7,"div",77),c.\u0275\u0275elementEnd(),c.\u0275\u0275template(23,xt,3,0,"div",77)(24,st,6,3,"div",77)(25,Nt,7,6,"div",77)(26,vn,9,7,"div",79)(27,mn,6,4,"div",77)(28,Wn,6,4,"div",77),c.\u0275\u0275elementStart(29,"div",72)(30,"legend",80),c.\u0275\u0275i18n(31,21),c.\u0275\u0275elementEnd(),c.\u0275\u0275elementStart(32,"cds-checkbox",81),c.\u0275\u0275i18n(33,22),c.\u0275\u0275elementEnd(),c.\u0275\u0275elementStart(34,"cds-checkbox",82),c.\u0275\u0275i18n(35,23),c.\u0275\u0275elementEnd(),c.\u0275\u0275template(36,In,1,1,"ng-template",null,3,c.\u0275\u0275templateRefExtractor),c.\u0275\u0275elementEnd(),c.\u0275\u0275template(38,Qt,8,4,"div",77),c.\u0275\u0275elementStart(39,"div",72)(40,"cds-select",83),c.\u0275\u0275i18nStart(41,24),c.\u0275\u0275template(42,Rn,2,0,"option",74)(43,En,2,0,"option",74)(44,It,2,2,"option",75),c.\u0275\u0275i18nEnd(),c.\u0275\u0275elementEnd(),c.\u0275\u0275template(45,Dn,1,1,"ng-template",null,4,c.\u0275\u0275templateRefExtractor)(47,eo,1,1,"ng-template",null,5,c.\u0275\u0275templateRefExtractor)(49,no,1,1,"ng-template",null,6,c.\u0275\u0275templateRefExtractor),c.\u0275\u0275elementEnd(),c.\u0275\u0275elementStart(51,"div",72)(52,"cds-select",84),c.\u0275\u0275i18nStart(53,25),c.\u0275\u0275template(54,en,2,0,"option",74)(55,oo,2,0,"option",74)(56,gn,2,2,"option",75),c.\u0275\u0275i18nEnd(),c.\u0275\u0275elementEnd(),c.\u0275\u0275template(57,L,4,4,"ng-template",null,7,c.\u0275\u0275templateRefExtractor)(59,x,1,1,"ng-template",null,8,c.\u0275\u0275templateRefExtractor),c.\u0275\u0275elementEnd(),c.\u0275\u0275elementStart(61,"div",72)(62,"legend",85),c.\u0275\u0275i18n(63,26),c.\u0275\u0275elementEnd(),c.\u0275\u0275elementStart(64,"cds-checkbox",86),c.\u0275\u0275i18n(65,27),c.\u0275\u0275elementEnd(),c.\u0275\u0275elementStart(66,"cds-checkbox",87),c.\u0275\u0275i18n(67,28),c.\u0275\u0275elementEnd(),c.\u0275\u0275template(68,me,1,1,"ng-template",null,9,c.\u0275\u0275templateRefExtractor),c.\u0275\u0275elementEnd(),c.\u0275\u0275element(70,"cd-nfs-form-client",88,10),c.\u0275\u0275template(72,be,2,1,"cd-alert-panel",89),c.\u0275\u0275elementStart(73,"cd-form-button-panel",90),c.\u0275\u0275pipe(74,"titlecase"),c.\u0275\u0275pipe(75,"upperFirst"),c.\u0275\u0275listener("submitActionEvent",function(){c.\u0275\u0275restoreView(V);const Ne=c.\u0275\u0275nextContext();return c.\u0275\u0275resetView(Ne.submitAction())}),c.\u0275\u0275elementEnd()(),c.\u0275\u0275elementContainerEnd()}if(2&k){const V=c.\u0275\u0275reference(16),se=c.\u0275\u0275reference(18),Ne=c.\u0275\u0275reference(37),Ve=c.\u0275\u0275reference(46),et=c.\u0275\u0275reference(48),gt=c.\u0275\u0275reference(50),Ft=c.\u0275\u0275reference(58),Pt=c.\u0275\u0275reference(60),_t=c.\u0275\u0275reference(69),Re=c.\u0275\u0275nextContext();c.\u0275\u0275advance(),c.\u0275\u0275property("formGroup",Re.nfsForm),c.\u0275\u0275advance(5),c.\u0275\u0275i18nExp(c.\u0275\u0275pipeBind1(5,52,Re.action))(c.\u0275\u0275pipeBind1(6,54,Re.resource)),c.\u0275\u0275i18nApply(4),c.\u0275\u0275advance(2),c.\u0275\u0275property("invalid",Re.nfsForm.controls.cluster_id.invalid&&Re.nfsForm.controls.cluster_id.dirty)("invalidText",se)("skeleton",null===Re.allClusters)("helperText",V),c.\u0275\u0275advance(2),c.\u0275\u0275property("ngIf",null===Re.allClusters),c.\u0275\u0275advance(),c.\u0275\u0275property("ngIf",null!==Re.allClusters&&0===Re.allClusters.length),c.\u0275\u0275advance(),c.\u0275\u0275property("ngIf",null!==Re.allClusters&&Re.allClusters.length>0),c.\u0275\u0275advance(),c.\u0275\u0275property("ngForOf",Re.allClusters),c.\u0275\u0275advance(),c.\u0275\u0275property("ngIf",0===(null==Re.allClusters?null:Re.allClusters.length)),c.\u0275\u0275advance(5),c.\u0275\u0275property("ngIf","RGW"===Re.storageBackend&&!Re.isEdit),c.\u0275\u0275advance(2),c.\u0275\u0275property("ngIf","CEPH"===Re.storageBackend),c.\u0275\u0275advance(),c.\u0275\u0275property("ngIf","RGW"===Re.storageBackend&&"user"===Re.nfsForm.getValue("rgw_export_type")),c.\u0275\u0275advance(),c.\u0275\u0275property("ngIf","CEPH"===Re.storageBackend),c.\u0275\u0275advance(),c.\u0275\u0275property("ngIf",Re.nfsForm.getValue("security_label")),c.\u0275\u0275advance(),c.\u0275\u0275property("ngIf","CEPH"===Re.storageBackend&&Re.nfsForm.getValue("fsal").fs_name&&!Re.isEdit),c.\u0275\u0275advance(),c.\u0275\u0275property("ngIf","CEPH"===Re.storageBackend&&Re.nfsForm.getValue("fsal").fs_name&&!Re.isEdit),c.\u0275\u0275advance(),c.\u0275\u0275property("ngIf","CEPH"===Re.storageBackend),c.\u0275\u0275advance(),c.\u0275\u0275property("ngIf","RGW"===Re.storageBackend&&"bucket"===Re.nfsForm.getValue("rgw_export_type")),c.\u0275\u0275advance(4),c.\u0275\u0275property("invalid",Re.nfsForm.controls.protocolNfsv3.invalid&&Re.nfsForm.controls.protocolNfsv3.dirty)("invalidText",Ne),c.\u0275\u0275advance(2),c.\u0275\u0275property("invalid",Re.nfsForm.controls.protocolNfsv4.invalid&&Re.nfsForm.controls.protocolNfsv4.dirty)("invalidText",Ne),c.\u0275\u0275advance(4),c.\u0275\u0275property("ngIf",Re.nfsForm.getValue("protocolNfsv4")||Re.nfsForm.getValue("protocolNfsv3")),c.\u0275\u0275advance(2),c.\u0275\u0275property("invalid",Re.nfsForm.controls.access_type.invalid&&Re.nfsForm.controls.access_type.dirty)("invalidText",gt)("helperText",Ve)("warn","RW"===Re.nfsForm.getValue("access_type")&&"RGW"===Re.storageBackend)("warnText",et)("skeleton",null===Re.nfsAccessType),c.\u0275\u0275advance(2),c.\u0275\u0275property("ngIf",null===Re.nfsAccessType),c.\u0275\u0275advance(),c.\u0275\u0275property("ngIf",null!==Re.nfsAccessType&&0===Re.nfsAccessType.length),c.\u0275\u0275advance(),c.\u0275\u0275property("ngForOf",Re.nfsAccessType),c.\u0275\u0275advance(8),c.\u0275\u0275property("invalid",Re.nfsForm.controls.squash.invalid&&Re.nfsForm.controls.squash.dirty)("invalidText",Pt)("skeleton",null===Re.nfsSquash)("helperText",Ft),c.\u0275\u0275advance(2),c.\u0275\u0275property("ngIf",null===Re.nfsSquash),c.\u0275\u0275advance(),c.\u0275\u0275property("ngIf",null!==Re.nfsSquash&&0===Re.nfsSquash.length),c.\u0275\u0275advance(),c.\u0275\u0275property("ngForOf",Re.nfsSquash),c.\u0275\u0275advance(8),c.\u0275\u0275property("invalid",Re.nfsForm.controls.transportUDP.invalid&&Re.nfsForm.controls.transportUDP.dirty)("invalidText",_t),c.\u0275\u0275advance(2),c.\u0275\u0275property("invalid",Re.nfsForm.controls.transportTCP.invalid&&Re.nfsForm.controls.transportTCP.dirty)("invalidText",_t),c.\u0275\u0275advance(4),c.\u0275\u0275property("form",Re.nfsForm)("clients",Re.clients),c.\u0275\u0275advance(2),c.\u0275\u0275property("ngIf",!!Re.storageBackendError),c.\u0275\u0275advance(),c.\u0275\u0275property("form",Re.nfsForm)("disabled",!!Re.storageBackendError)("submitText",c.\u0275\u0275pipeBind1(74,56,Re.action)+" "+c.\u0275\u0275pipeBind1(75,58,Re.resource))}}class dt extends P.g{constructor(H,V,se,Ne,Ve,et,gt,Ft,Pt,_t,Re,ot){super(),this.authStorageService=H,this.nfsService=V,this.subvolService=se,this.subvolgrpService=Ne,this.route=Ve,this.router=et,this.rgwBucketService=gt,this.rgwUserService=Ft,this.rgwSiteService=Pt,this.formBuilder=_t,this.taskWrapper=Re,this.actionLabels=ot,this.clients=[],this.isEdit=!1,this.cluster_id=null,this.export_id=null,this.allClusters=null,this.icons=R.FI,this.allFsNames=null,this.allRGWUsers=null,this.storageBackendError=null,this.defaultAccessType={RGW:"RO"},this.nfsAccessType=[],this.nfsSquash=[],this.allsubvolgrps=[],this.allsubvols=[],this.selectedFsName="",this.selectedSubvolGroup="",this.selectedSubvol="",this.defaultSubVolGroup=Ue.H,this.pathDataSource=yn=>yn.pipe((0,u.debounceTime)(200),(0,u.distinctUntilChanged)(),(0,u.mergeMap)(Cn=>this.getPathTypeahead(Cn)),(0,u.map)(Cn=>Cn)),this.bucketDataSource=yn=>yn.pipe((0,u.debounceTime)(200),(0,u.distinctUntilChanged)(),(0,u.mergeMap)(Cn=>this.getBucketTypeahead(Cn))),this.permission=this.authStorageService.getPermissions().pool,this.resource=$localize`NFS export`,this.storageBackend=(0,C.C)(this.router.url)}ngOnInit(){this.nfsAccessType=this.nfsService.nfsAccessType,this.nfsSquash=Object.keys(this.nfsService.nfsSquash),this.createForm();const H=[this.nfsService.listClusters()];this.storageBackend===F.q.RGW?H.push(this.rgwSiteService.get("realms")):H.push(this.nfsService.filesystems()),this.router.url.startsWith(`/${(0,C.q)(this.storageBackend)}/nfs/edit`)&&(this.isEdit=!0),this.isEdit?(this.action=this.actionLabels.EDIT,this.route.params.subscribe(V=>{this.cluster_id=decodeURIComponent(V.cluster_id),this.export_id=decodeURIComponent(V.export_id),V.rgw_export_type&&(this.nfsForm.get("rgw_export_type").setValue(V.rgw_export_type),V.rgw_export_type===Ce.V.BUCKET?this.setBucket():this.setUsers()),H.push(this.nfsService.get(this.cluster_id,this.export_id)),this.getData(H)}),this.nfsForm.get("cluster_id").disable(),this.nfsForm.get("fsal").disable(),this.nfsForm.get("path").disable()):(this.action=this.actionLabels.CREATE,this.route.params.subscribe(V=>{this.selectedFsName=V.fs_name,this.selectedSubvolGroup=V.subvolume_group,V.subvolume&&(this.selectedSubvol=V.subvolume)}),this.storageBackend===F.q.RGW&&(this.nfsForm.get("rgw_export_type").setValue("bucket"),this.setBucket()),this.getData(H))}getData(H){(0,f.forkJoin)(H).subscribe(V=>{this.resolveClusters(V[0]),this.resolveFsals(V[1]),V[2]&&this.resolveModel(V[2]),this.loadingReady()})}volumeChangeHandler(){this.isDefaultSubvolumeGroup()}getSubVol(){var H=this;return(0,a.A)(function*(){const V=H.nfsForm.getValue("fsal").fs_name,se=H.nfsForm.getValue("subvolume_group");yield H.setSubVolGrpPath(),(se===H.defaultSubVolGroup?H.subvolService.get(V):H.subvolService.get(V,se)).subscribe(Ne=>{H.allsubvols=Ne}),H.setUpVolumeValidation()})()}getSubVolGrp(H){this.subvolgrpService.get(H).subscribe(V=>{this.allsubvolgrps=V})}setSubVolGrpPath(){const H=this.nfsForm.getValue("fsal").fs_name,V=this.nfsForm.getValue("subvolume_group");return new Promise((se,Ne)=>{V==this.defaultSubVolGroup?this.updatePath("/volumes/"+this.defaultSubVolGroup):""!=V?this.subvolgrpService.info(H,V).pipe((0,u.map)(Ve=>Ve.path)).subscribe(Ve=>{this.updatePath(Ve),se()},Ve=>Ne(Ve)):(this.updatePath(""),this.setUpVolumeValidation()),se()})}isDefaultSubvolumeGroup(){const H=this.nfsForm.getValue("fsal").fs_name;this.getSubVolGrp(H),this.getSubVol(),this.updatePath("/volumes/"+this.defaultSubVolGroup),this.setUpVolumeValidation()}setSubVolPath(){return new Promise((H,V)=>{const se=this.nfsForm.getValue("subvolume"),Ne=this.nfsForm.getValue("subvolume_group"),Ve=this.nfsForm.getValue("fsal").fs_name;this.subvolService.info(Ve,se,Ne===this.defaultSubVolGroup?"":Ne).pipe((0,u.map)(et=>et.path)).subscribe(et=>{this.updatePath(et),H()},et=>V(et))})}setUpVolumeValidation(){const H=this.nfsForm.get("subvolume_group").value,V=this.nfsForm.get("subvolume");H==this.defaultSubVolGroup?V?.setValidators([e.Validators.required]):V?.clearValidators(),V?.updateValueAndValidity()}updatePath(H){this.nfsForm.patchValue({path:H})}createForm(){this.nfsForm=new b.$({cluster_id:new e.UntypedFormControl("",{validators:[e.Validators.required]}),path:new e.UntypedFormControl("",{validators:[e.Validators.required,m.xQ.custom("isIsolatedSlash",this.isolatedSlashCondition)]}),protocolNfsv3:new e.UntypedFormControl(!0,{validators:[m.xQ.requiredIf({protocolNfsv4:!1},H=>!H)]}),protocolNfsv4:new e.UntypedFormControl(!0,{validators:[m.xQ.requiredIf({protocolNfsv3:!1},H=>!H)]}),pseudo:new e.UntypedFormControl("",{validators:[m.xQ.requiredIf({protocolNfsv4:!0,protocolNfsv3:!0}),e.Validators.pattern("^/[^><|&()]*$")]}),access_type:new e.UntypedFormControl("RW"),squash:new e.UntypedFormControl(this.nfsSquash[0]),transportUDP:new e.UntypedFormControl(!0,{validators:[m.xQ.requiredIf({transportTCP:!1},H=>!H)]}),transportTCP:new e.UntypedFormControl(!0,{validators:[m.xQ.requiredIf({transportUDP:!1},H=>!H)]}),clients:this.formBuilder.array([]),security_label:new e.UntypedFormControl(!1),fsal:new b.$({name:new e.UntypedFormControl(this.storageBackend,{validators:[e.Validators.required]}),user_id:new e.UntypedFormControl("",{validators:[m.xQ.requiredIf({name:"RGW"})]}),fs_name:new e.UntypedFormControl("",{validators:[m.xQ.requiredIf({name:"CEPH"})]})}),subvolume_group:new e.UntypedFormControl(this.defaultSubVolGroup),subvolume:new e.UntypedFormControl(""),sec_label_xattr:new e.UntypedFormControl("security.selinux",m.xQ.requiredIf({security_label:!0,"fsal.name":"CEPH"})),rgw_export_type:new e.UntypedFormControl(null,m.xQ.requiredIf({"fsal.name":"RGW"}))})}resolveModel(H){"CEPH"===H.fsal.name&&(H.sec_label_xattr=H.fsal.sec_label_xattr),H.protocolNfsv4=-1!==H.protocols.indexOf(4),H.protocolNfsv3=-1!==H.protocols.indexOf(3),delete H.protocols,H.transportTCP=-1!==H.transports.indexOf("TCP"),H.transportUDP=-1!==H.transports.indexOf("UDP"),delete H.transports,Object.entries(this.nfsService.nfsSquash).forEach(([V,se])=>{se.includes(H.squash)&&(H.squash=V)}),H.clients.forEach(V=>{let se="";V.addresses.forEach(Ne=>{se+=Ne+", "}),se.length>=2&&(se=se.substring(0,se.length-2)),V.addresses=se}),this.nfsForm.patchValue(H),this.setPathValidation(),this.clients=H.clients}resolveClusters(H){this.allClusters=[];for(const V of H)this.allClusters.push({cluster_id:V});!this.isEdit&&this.allClusters.length>0&&this.nfsForm.get("cluster_id").setValue(this.allClusters[0].cluster_id)}resolveFsals(H){this.storageBackend===F.q.RGW?this.resolveRealms(H):this.resolveFilesystems(H),!this.isEdit&&this.storageBackend===F.q.RGW&&this.nfsForm.patchValue({path:"",access_type:this.defaultAccessType[F.q.RGW]})}resolveRouteParams(){E().isEmpty(this.selectedFsName)||(this.nfsForm.patchValue({fsal:{fs_name:this.selectedFsName}}),this.getSubVolGrp(this.selectedFsName)),E().isEmpty(this.selectedSubvolGroup)||(this.nfsForm.patchValue({subvolume_group:this.selectedSubvolGroup}),this.getSubVol()),E().isEmpty(this.selectedSubvol)||(this.nfsForm.patchValue({subvolume:this.selectedSubvol}),this.setSubVolPath())}resolveFilesystems(H){this.allFsNames=H,this.isEdit||this.resolveRouteParams()}resolveRealms(H){0!==H.length&&this.rgwSiteService.isDefaultRealm().pipe((0,u.mergeMap)(V=>{if(!V)throw new Error("Selected realm is not the default.");return(0,f.of)(!0)})).subscribe({error:V=>{const se=this.nfsService.nfsFsal.find(Ne=>Ne.value===this.storageBackend).descr;this.storageBackendError=$localize`${se} backend is not available. ${V}`}})}setUsers(){this.nfsForm.get("fsal.user_id").enable(),this.nfsForm.get("path").setValue(""),this.nfsForm.get("path").disable(),this.rgwUserService.list().subscribe(H=>{this.allRGWUsers=H})}setBucket(){this.nfsForm.get("path").enable(),this.nfsForm.get("fsal.user_id").setValue(""),this.nfsForm.get("fsal").disable(),this.setPathValidation()}onExportTypeChange(){this.nfsForm.getValue("rgw_export_type")===Ce.V.BUCKET?this.setBucket():this.setUsers()}accessTypeChangeHandler(){const H=this.nfsForm.getValue("name"),V=this.nfsForm.getValue("access_type");this.defaultAccessType[H]=V}isolatedSlashCondition(H){return"/"===H}setPathValidation(){const H=this.nfsForm.get("path");this.storageBackend===F.q.RGW?H.setAsyncValidators([m.xQ.bucketExistence(!0,this.rgwBucketService)]):H.setAsyncValidators([this.pathExistence(!0)]),this.isEdit&&H.markAsDirty()}getAccessTypeHelp(H){const V=this.nfsAccessType.find(se=>{if(H===se.value)return se});return E().isObjectLike(V)?V.help:""}getId(){return E().isString(this.nfsForm.getValue("cluster_id"))&&E().isString(this.nfsForm.getValue("path"))?this.nfsForm.getValue("cluster_id")+":"+this.nfsForm.getValue("path"):""}getPathTypeahead(H){if(!E().isString(H)||"/"===H)return(0,f.of)([]);const V=this.nfsForm.getValue("fsal").fs_name;return this.nfsService.lsDir(V,H).pipe((0,u.map)(se=>se.paths.filter(Ne=>Ne.toLowerCase().includes(H)).slice(0,15)),(0,u.catchError)(()=>(0,f.of)([$localize`Error while retrieving paths.`])))}getBucketTypeahead(H){return E().isString(H)&&"/"!==H&&""!==H?this.rgwBucketService.list().pipe((0,u.map)(V=>V.filter(se=>se.toLowerCase().includes(H)).slice(0,15)),(0,u.catchError)(()=>(0,f.of)([$localize`Error while retrieving bucket names.`]))):(0,f.of)([])}submitAction(){let H;const V=this.buildRequest();H=this.isEdit?this.taskWrapper.wrapTaskAroundCall({task:new g.O("nfs/edit",{cluster_id:this.cluster_id,export_id:E().parseInt(this.export_id)}),call:this.nfsService.update(this.cluster_id,E().parseInt(this.export_id),V)}):this.taskWrapper.wrapTaskAroundCall({task:new g.O("nfs/create",{path:V.path,fsal:V.fsal,cluster_id:V.cluster_id}),call:this.nfsService.create(V)}),H.subscribe({error:se=>this.setFormErrors(se),complete:()=>this.router.navigate([`/${(0,C.q)(this.storageBackend)}/nfs`])})}setFormErrors(H){H.error.detail&&H.error.detail.toString().includes(`Pseudo ${this.nfsForm.getValue("pseudo")} is already in use`)&&this.nfsForm.get("pseudo").setErrors({pseudoAlreadyExists:!0}),this.nfsForm.setErrors({cdSubmitButton:!0})}buildRequest(){const H=E().cloneDeep(this.nfsForm.value);return H.fsal=this.nfsForm.get("fsal").value,this.isEdit&&(H.export_id=E().parseInt(this.export_id),H.path=this.nfsForm.get("path").value,H.fsal.name===F.q.RGW&&(H.fsal.user_id=this.nfsForm.getValue("fsal").user_id)),H.fsal.name===F.q.RGW?(delete H.fsal.fs_name,"bucket"===H.rgw_export_type?delete H.fsal.user_id:H.path=""):delete H.fsal.user_id,delete H.rgw_export_type,delete H.subvolume,delete H.subvolume_group,H.protocols=[],H.protocolNfsv3&&H.protocols.push(3),H.protocolNfsv4&&H.protocols.push(4),!H.protocolNfsv3&&!H.protocolNfsv4&&(H.pseudo=null),delete H.protocolNfsv3,delete H.protocolNfsv4,H.transports=[],H.transportTCP&&H.transports.push("TCP"),delete H.transportTCP,H.transportUDP&&H.transports.push("UDP"),delete H.transportUDP,H.clients.forEach(V=>{E().isString(V.addresses)?V.addresses=E()(V.addresses).split(/[ ,]+/).uniq().filter(se=>""!==se).value():V.addresses=[],V.squash||(V.squash=H.squash),V.access_type||(V.access_type=H.access_type)}),!1===H.security_label||"RGW"===H.fsal.name?H.fsal.sec_label_xattr=null:H.fsal.sec_label_xattr=H.sec_label_xattr,delete H.sec_label_xattr,H}pathExistence(H){return V=>{if(V.pristine||!V.value)return(0,f.of)({required:!0});const se=this.nfsForm.getValue("fsal").fs_name;return this.nfsService.lsDir(se,V.value).pipe((0,u.map)(Ne=>Ne.paths.includes(V.value)===H?null:{pathNameNotAllowed:!0}),(0,u.catchError)(()=>(0,f.of)({pathNameNotAllowed:!0})))}}static{this.\u0275fac=function(V){return new(V||dt)(c.\u0275\u0275directiveInject(O.v),c.\u0275\u0275directiveInject(p.Z),c.\u0275\u0275directiveInject(K.v),c.\u0275\u0275directiveInject(ce.W),c.\u0275\u0275directiveInject(l.ActivatedRoute),c.\u0275\u0275directiveInject(l.Router),c.\u0275\u0275directiveInject(S.c),c.\u0275\u0275directiveInject(Ee.p),c.\u0275\u0275directiveInject(_.B),c.\u0275\u0275directiveInject(M.$),c.\u0275\u0275directiveInject(N.a),c.\u0275\u0275directiveInject(v.Ss))}}static{this.\u0275cmp=c.\u0275\u0275defineComponent({type:dt,selectors:[["cd-nfs-form"]],viewQuery:function(V,se){if(1&V&&c.\u0275\u0275viewQuery(ut,7),2&V){let Ne;c.\u0275\u0275queryRefresh(Ne=c.\u0275\u0275loadQuery())&&(se.nfsClients=Ne.first)}},features:[c.\u0275\u0275InheritDefinitionFeature],decls:2,vars:3,consts:()=>{let H,V,se,Ne,Ve,et,gt,Ft,Pt,_t,Re,ot,yn,Cn,fa,Mo,Ea,Ro,ga,Ca,Sa,ha,Oo,Po,Ta,Fa,va,io,Ma,Ra,Oa,Pa,ba,Na,Ia,Aa,ao,Da,ya,La,$a,xa,Ua,wa,Ga,Ha,Va,Ba,za,Xa,ka,so;return H=$localize`:form title␟fb127ea03835b3230f0ed981c7080e2ccb879621␟3346778808274133574:${"\ufffd0\ufffd"}:INTERPOLATION: ${"\ufffd1\ufffd"}:INTERPOLATION_1:`,V=$localize`:␟83480a36b900bc4e95e91c01284eacd4fde4fcf6␟3185990432229492060:${"\ufffd*10:1\ufffd\ufffd#1:1\ufffd"}:START_TAG_OPTION:Loading...${"[\ufffd/#1:1\ufffd\ufffd/*10:1\ufffd|\ufffd/#1:2\ufffd\ufffd/*11:2\ufffd|\ufffd/#1:3\ufffd\ufffd/*12:3\ufffd|\ufffd/#1:4\ufffd\ufffd/*13:4\ufffd]"}:CLOSE_TAG_OPTION:${"\ufffd*11:2\ufffd\ufffd#1:2\ufffd"}:START_TAG_OPTION_1:-- No cluster available --${"[\ufffd/#1:1\ufffd\ufffd/*10:1\ufffd|\ufffd/#1:2\ufffd\ufffd/*11:2\ufffd|\ufffd/#1:3\ufffd\ufffd/*12:3\ufffd|\ufffd/#1:4\ufffd\ufffd/*13:4\ufffd]"}:CLOSE_TAG_OPTION:${"\ufffd*12:3\ufffd\ufffd#1:3\ufffd"}:START_TAG_OPTION_2:-- Select the cluster --${"[\ufffd/#1:1\ufffd\ufffd/*10:1\ufffd|\ufffd/#1:2\ufffd\ufffd/*11:2\ufffd|\ufffd/#1:3\ufffd\ufffd/*12:3\ufffd|\ufffd/#1:4\ufffd\ufffd/*13:4\ufffd]"}:CLOSE_TAG_OPTION:${"\ufffd*13:4\ufffd\ufffd#1:4\ufffd"}:START_TAG_OPTION_3:${"\ufffd0:4\ufffd"}:INTERPOLATION:${"[\ufffd/#1:1\ufffd\ufffd/*10:1\ufffd|\ufffd/#1:2\ufffd\ufffd/*11:2\ufffd|\ufffd/#1:3\ufffd\ufffd/*12:3\ufffd|\ufffd/#1:4\ufffd\ufffd/*13:4\ufffd]"}:CLOSE_TAG_OPTION:`,V=c.\u0275\u0275i18nPostprocess(V),se=$localize`:␟f8c805e248823d07d29015b9923ec5695e1c724b␟1718250287891240070:NFS Protocol (required)`,Ne=$localize`:␟2f534178c01ebf1307da2eaeef04bc6801ebc729␟7331033821929503421:NFSv3`,Ve=$localize`:␟f5043c0921e709935ab026bb3253ffe1f159fca1␟951840472002626351:NFSv4`,et=$localize`:␟4b1d895023e764d05387f241d20fc60607471ec0␟9096323152606604244:${"\ufffd*42:1\ufffd\ufffd#1:1\ufffd"}:START_TAG_OPTION:Loading...${"[\ufffd/#1:1\ufffd\ufffd/*42:1\ufffd|\ufffd/#1:2\ufffd\ufffd/*43:2\ufffd|\ufffd/#1:3\ufffd\ufffd/*44:3\ufffd]"}:CLOSE_TAG_OPTION:${"\ufffd*43:2\ufffd\ufffd#1:2\ufffd"}:START_TAG_OPTION_1:-- No access type available --${"[\ufffd/#1:1\ufffd\ufffd/*42:1\ufffd|\ufffd/#1:2\ufffd\ufffd/*43:2\ufffd|\ufffd/#1:3\ufffd\ufffd/*44:3\ufffd]"}:CLOSE_TAG_OPTION:${"\ufffd*44:3\ufffd\ufffd#1:3\ufffd"}:START_TAG_OPTION_2:${"\ufffd0:3\ufffd"}:INTERPOLATION:${"[\ufffd/#1:1\ufffd\ufffd/*42:1\ufffd|\ufffd/#1:2\ufffd\ufffd/*43:2\ufffd|\ufffd/#1:3\ufffd\ufffd/*44:3\ufffd]"}:CLOSE_TAG_OPTION:`,et=c.\u0275\u0275i18nPostprocess(et),gt=$localize`:␟9be0f69dbc6bf62fb2aa6ce0d33abf403e99dc10␟5689249252736722969:${"\ufffd*54:1\ufffd\ufffd#1:1\ufffd"}:START_TAG_OPTION:Loading...${"[\ufffd/#1:1\ufffd\ufffd/*54:1\ufffd|\ufffd/#1:2\ufffd\ufffd/*55:2\ufffd|\ufffd/#1:3\ufffd\ufffd/*56:3\ufffd]"}:CLOSE_TAG_OPTION:${"\ufffd*55:2\ufffd\ufffd#1:2\ufffd"}:START_TAG_OPTION_1:-- No squash available --${"[\ufffd/#1:1\ufffd\ufffd/*54:1\ufffd|\ufffd/#1:2\ufffd\ufffd/*55:2\ufffd|\ufffd/#1:3\ufffd\ufffd/*56:3\ufffd]"}:CLOSE_TAG_OPTION:${"\ufffd*56:3\ufffd\ufffd#1:3\ufffd"}:START_TAG_OPTION_2:${"\ufffd0:3\ufffd"}:INTERPOLATION:${"[\ufffd/#1:1\ufffd\ufffd/*54:1\ufffd|\ufffd/#1:2\ufffd\ufffd/*55:2\ufffd|\ufffd/#1:3\ufffd\ufffd/*56:3\ufffd]"}:CLOSE_TAG_OPTION:`,gt=c.\u0275\u0275i18nPostprocess(gt),Ft=$localize`:␟665fe4895a29426ef331cb38ce8bc0f50f3ecd1c␟8524896235249438113:Transport Protocol (required)`,Pt=$localize`:␟d2a6ad6e8bc315f07911722c05767ac79c136d99␟3773803671682342506:UDP`,_t=$localize`:␟9c030f11e0aae9b24d2c048c57f29f590be621df␟4895527102341340626:TCP`,Re=$localize`:␟e1d0a5d4f422f261d4435b06f5eb957a24ec870d␟3670033105028809395:To create a new NFS cluster, you need to create an NFS Service. `,ot=$localize`:␟189032dda9d2a845b22c57f5e6a92131801c6b1b␟836795575511323708: This is the ID of an NFS Service`,yn=$localize`:␟7cbdabcece469fab89cfa687ab152bca18b97498␟1417693714872528491:This field is required.`,Cn=$localize`:␟bd197d7773cef10f368f08c53b47979c3df1f22d␟8720332287407681000:Bucket`,fa=$localize`:␟e08a77594f3d89311cdf6da5090044270909c194␟2392488717875840729:User`,Mo=$localize`:␟2e6db7166e89925117207485479f3277f0ccb7bf␟1888800683759415976:${"\ufffd*3:1\ufffd\ufffd#1:1\ufffd"}:START_TAG_OPTION:Loading...${"[\ufffd/#1:1\ufffd\ufffd/*3:1\ufffd|\ufffd/#1:2\ufffd\ufffd/*4:2\ufffd|\ufffd/#1:3\ufffd\ufffd/*5:3\ufffd|\ufffd/#1:4\ufffd\ufffd/*6:4\ufffd]"}:CLOSE_TAG_OPTION:${"\ufffd*4:2\ufffd\ufffd#1:2\ufffd"}:START_TAG_OPTION_1:-- No CephFS filesystem available --${"[\ufffd/#1:1\ufffd\ufffd/*3:1\ufffd|\ufffd/#1:2\ufffd\ufffd/*4:2\ufffd|\ufffd/#1:3\ufffd\ufffd/*5:3\ufffd|\ufffd/#1:4\ufffd\ufffd/*6:4\ufffd]"}:CLOSE_TAG_OPTION:${"\ufffd*5:3\ufffd\ufffd#1:3\ufffd"}:START_TAG_OPTION_2:-- Select the CephFS filesystem --${"[\ufffd/#1:1\ufffd\ufffd/*3:1\ufffd|\ufffd/#1:2\ufffd\ufffd/*4:2\ufffd|\ufffd/#1:3\ufffd\ufffd/*5:3\ufffd|\ufffd/#1:4\ufffd\ufffd/*6:4\ufffd]"}:CLOSE_TAG_OPTION:${"\ufffd*6:4\ufffd\ufffd#1:4\ufffd"}:START_TAG_OPTION_3:${"\ufffd0:4\ufffd"}:INTERPOLATION:${"[\ufffd/#1:1\ufffd\ufffd/*3:1\ufffd|\ufffd/#1:2\ufffd\ufffd/*4:2\ufffd|\ufffd/#1:3\ufffd\ufffd/*5:3\ufffd|\ufffd/#1:4\ufffd\ufffd/*6:4\ufffd]"}:CLOSE_TAG_OPTION:`,Mo=c.\u0275\u0275i18nPostprocess(Mo),Ea=$localize`:␟7cbdabcece469fab89cfa687ab152bca18b97498␟1417693714872528491:This field is required.`,Ro=$localize`:␟b20cd28182ebd16854e052dc9bd6fa917115c353␟6758807954933295946:${"\ufffd*3:1\ufffd\ufffd#1:1\ufffd"}:START_TAG_OPTION:Loading...${"[\ufffd/#1:1\ufffd\ufffd/*3:1\ufffd|\ufffd/#1:2\ufffd\ufffd/*4:2\ufffd|\ufffd/#1:3\ufffd\ufffd/*5:3\ufffd|\ufffd/#1:4\ufffd\ufffd/*6:4\ufffd]"}:CLOSE_TAG_OPTION:${"\ufffd*4:2\ufffd\ufffd#1:2\ufffd"}:START_TAG_OPTION_1:-- No RGW User available --${"[\ufffd/#1:1\ufffd\ufffd/*3:1\ufffd|\ufffd/#1:2\ufffd\ufffd/*4:2\ufffd|\ufffd/#1:3\ufffd\ufffd/*5:3\ufffd|\ufffd/#1:4\ufffd\ufffd/*6:4\ufffd]"}:CLOSE_TAG_OPTION:${"\ufffd*5:3\ufffd\ufffd#1:3\ufffd"}:START_TAG_OPTION_2:-- Select the RGW User --${"[\ufffd/#1:1\ufffd\ufffd/*3:1\ufffd|\ufffd/#1:2\ufffd\ufffd/*4:2\ufffd|\ufffd/#1:3\ufffd\ufffd/*5:3\ufffd|\ufffd/#1:4\ufffd\ufffd/*6:4\ufffd]"}:CLOSE_TAG_OPTION:${"\ufffd*6:4\ufffd\ufffd#1:4\ufffd"}:START_TAG_OPTION_3:${"\ufffd0:4\ufffd"}:INTERPOLATION:${"[\ufffd/#1:1\ufffd\ufffd/*3:1\ufffd|\ufffd/#1:2\ufffd\ufffd/*4:2\ufffd|\ufffd/#1:3\ufffd\ufffd/*5:3\ufffd|\ufffd/#1:4\ufffd\ufffd/*6:4\ufffd]"}:CLOSE_TAG_OPTION:`,Ro=c.\u0275\u0275i18nPostprocess(Ro),ga=$localize`:␟7cbdabcece469fab89cfa687ab152bca18b97498␟1417693714872528491:This field is required.`,Ca=$localize`:␟65ce0fa4da1ed55e658aeb31d1644a29f06bb342␟8769962346499199305:Enable security label`,Sa=$localize`:␟51d01878afa3272863dcab184a951a65144200db␟5656406151797307301:Security Label ${"\ufffd#3\ufffd\ufffd/#3\ufffd"}:TAG_INPUT:`,ha=$localize`:␟7cbdabcece469fab89cfa687ab152bca18b97498␟1417693714872528491:This field is required.`,Oo=$localize`:␟b6cd9579e853b75ed934f51afe7b4b11757b4038␟7765830836206651838:${"\ufffd*3:1\ufffd\ufffd#1:1\ufffd"}:START_TAG_OPTION:Loading...${"[\ufffd/#1:1\ufffd\ufffd/*3:1\ufffd|\ufffd/#1:2\ufffd\ufffd/*4:2\ufffd|\ufffd/#1:3\ufffd\ufffd/*5:3\ufffd|\ufffd/#6\ufffd]"}:CLOSE_TAG_OPTION:${"\ufffd*4:2\ufffd\ufffd#1:2\ufffd"}:START_TAG_OPTION_1:-- Select the CephFS subvolume group --${"[\ufffd/#1:1\ufffd\ufffd/*3:1\ufffd|\ufffd/#1:2\ufffd\ufffd/*4:2\ufffd|\ufffd/#1:3\ufffd\ufffd/*5:3\ufffd|\ufffd/#6\ufffd]"}:CLOSE_TAG_OPTION:${"\ufffd*5:3\ufffd\ufffd#1:3\ufffd"}:START_TAG_OPTION_2:${"\ufffd0:3\ufffd"}:INTERPOLATION:${"[\ufffd/#1:1\ufffd\ufffd/*3:1\ufffd|\ufffd/#1:2\ufffd\ufffd/*4:2\ufffd|\ufffd/#1:3\ufffd\ufffd/*5:3\ufffd|\ufffd/#6\ufffd]"}:CLOSE_TAG_OPTION:${"\ufffd#6\ufffd"}:START_TAG_OPTION_3:${"\ufffd0\ufffd"}:INTERPOLATION_1:${"[\ufffd/#1:1\ufffd\ufffd/*3:1\ufffd|\ufffd/#1:2\ufffd\ufffd/*4:2\ufffd|\ufffd/#1:3\ufffd\ufffd/*5:3\ufffd|\ufffd/#6\ufffd]"}:CLOSE_TAG_OPTION:`,Oo=c.\u0275\u0275i18nPostprocess(Oo),Po=$localize`:␟6fd3cc28ad2851be5fccc9d8ea938bf8707bbaa4␟3310615540973626616:${"\ufffd*3:1\ufffd\ufffd#1:1\ufffd"}:START_TAG_OPTION:Loading...${"[\ufffd/#1:1\ufffd\ufffd/*3:1\ufffd|\ufffd/#1:2\ufffd\ufffd/*4:2\ufffd|\ufffd/#1:3\ufffd\ufffd/*5:3\ufffd|\ufffd/#1:4\ufffd\ufffd/*6:4\ufffd]"}:CLOSE_TAG_OPTION:${"\ufffd*4:2\ufffd\ufffd#1:2\ufffd"}:START_TAG_OPTION_1:-- No CephFS subvolume available --${"[\ufffd/#1:1\ufffd\ufffd/*3:1\ufffd|\ufffd/#1:2\ufffd\ufffd/*4:2\ufffd|\ufffd/#1:3\ufffd\ufffd/*5:3\ufffd|\ufffd/#1:4\ufffd\ufffd/*6:4\ufffd]"}:CLOSE_TAG_OPTION:${"\ufffd*5:3\ufffd\ufffd#1:3\ufffd"}:START_TAG_OPTION_2:-- Select the CephFS subvolume --${"[\ufffd/#1:1\ufffd\ufffd/*3:1\ufffd|\ufffd/#1:2\ufffd\ufffd/*4:2\ufffd|\ufffd/#1:3\ufffd\ufffd/*5:3\ufffd|\ufffd/#1:4\ufffd\ufffd/*6:4\ufffd]"}:CLOSE_TAG_OPTION:${"\ufffd*6:4\ufffd\ufffd#1:4\ufffd"}:START_TAG_OPTION_3:${"\ufffd0:4\ufffd"}:INTERPOLATION:${"[\ufffd/#1:1\ufffd\ufffd/*3:1\ufffd|\ufffd/#1:2\ufffd\ufffd/*4:2\ufffd|\ufffd/#1:3\ufffd\ufffd/*5:3\ufffd|\ufffd/#1:4\ufffd\ufffd/*6:4\ufffd]"}:CLOSE_TAG_OPTION:`,Po=c.\u0275\u0275i18nPostprocess(Po),Ta=$localize`:␟9f01be2479d78fbe8221f8f919c2b69de7ca8b1c␟7475901782876834134: This field is required. `,Fa=$localize`:␟767052b0c15f5342c3aab23db8893cb3e333f813␟2028047156720099376:Path...`,va=$localize`:␟9a40de7bc1c775bd554162b0cf317e934c3e4e43␟2694619989969452699:Path ${"\ufffd#3\ufffd\ufffd/#3\ufffd"}:TAG_INPUT:`,io=$localize`:␟7cbdabcece469fab89cfa687ab152bca18b97498␟1417693714872528491:This field is required.`,Ma=$localize`:␟b387adeed21eb2981a31e53b5adba0c1506dab4e␟8832342422637281277:Export on CephFS volume "${"\ufffd#2\ufffd"}:START_TAG_CODE:/${"\ufffd/#2\ufffd"}:CLOSE_TAG_CODE:" not allowed.`,Ra=$localize`:␟5ecc0107badb6625466aaa3f975b5c05276f432f␟4456484902091340535:Path need to start with a '/' and can be followed by a word`,Oa=$localize`:␟9f9d8bd873c34c5ab2d4d0cf995fe5183ab25f6e␟7020723168633652361:The path does not exist in the selected volume.`,Pa=$localize`:␟f773d8c1f56a98f62b6b4dd34c5de1529ce09425␟6238514668180011420:Bucket name...`,ba=$localize`:␟9f4bd3974e27deeec09d6f484fd9b876dd42b771␟1529857030323986573:${"\ufffd#3\ufffd\ufffd/#3\ufffd"}:TAG_INPUT:`,Na=$localize`:␟7cbdabcece469fab89cfa687ab152bca18b97498␟1417693714872528491:This field is required.`,Ia=$localize`:␟6cb87ca65a7a7ca0b38ffce9312fee45fc57671c␟8301262976322008988:The bucket does not exist or is not in the default realm (if multiple realms are configured). To continue, ${"\ufffd#2\ufffd"}:START_LINK:create a new bucket${"\ufffd/#2\ufffd"}:CLOSE_LINK:.`,Aa=$localize`:␟7cbdabcece469fab89cfa687ab152bca18b97498␟1417693714872528491:This field is required.`,ao=$localize`:␟c0a79f77e664a5656b531ef66a2bf2dca224f54f␟4929958956409023267:Pseudo...`,Da=$localize`:␟9f4bd3974e27deeec09d6f484fd9b876dd42b771␟1529857030323986573:${"\ufffd#3\ufffd\ufffd/#3\ufffd"}:TAG_INPUT:`,ya=$localize`:␟684bd1d564f974339ca473c087b478e61466dfe4␟1960360317046953641:The position this export occupies in the Pseudo FS. It must be unique.`,La=$localize`:␟f3af55f7fd5b1d9e5a53e030c80116dc635bfb9f␟1985656713922997796:By using different Pseudo options, the same Path may be exported multiple times.`,$a=$localize`:␟7cbdabcece469fab89cfa687ab152bca18b97498␟1417693714872528491:This field is required.`,xa=$localize`:␟5eb719aa900fed3f9d4a1d74bcc158f07f67f684␟3301180412225278597:The pseudo is already in use by another export.`,Ua=$localize`:␟ddf98fcdeeb17643db020d54f42b5e56b5f9a52a␟3127596589032320526:Pseudo needs to start with a '/' and can't contain any of the following: >, <, |, &, ( or ).`,wa=$localize`:␟dfc7e7e90909761a20e2ca443ecbbad961599c0d␟2102295279423835336:Pseudo path should be an absolute path and it cannot be just '/'`,Ga=$localize`:␟b54e24e168a2baa0a9e6e35a1280a8aadc1e54b0␟1355999392306614900:The Object Gateway NFS backend has a number of limitations which will seriously affect applications writing to the share. Please consult the ${"\ufffd#2\ufffd"}:START_TAG_CD_DOC:${"\ufffd/#2\ufffd"}:CLOSE_TAG_CD_DOC:  for details before enabling write access.`,Ha=$localize`:␟7cbdabcece469fab89cfa687ab152bca18b97498␟1417693714872528491:This field is required.`,Va=$localize`:␟285f1fb3dded1dd6f4497679df68294ec4954104␟3445048695895366018:Maps the root user on the NFS client to an anonymous user/group with limited privileges. This prevents a root client user from having total control over the NFS export.`,Ba=$localize`:␟fc66a4ad20842546dc36fc42e6ea5ae5158e3b05␟1999262095241911035:Maps the root user on the NFS client to an anonymous user/group with limited privileges, preventing root access but retaining non-root group privileges.`,za=$localize`:␟2cfd9586227d16e12309d35f762d26280b3b3705␟1441684274651464673:Maps all users on the NFS client to an anonymous user/group with limited privileges, ensuring that no user has special privileges on the NFS export.`,Xa=$localize`:␟2181ca58492e8cb82d6f4b21084ad7a23fc739ae␟5798812363363750247:Allows the root user on the NFS client to retain full root privileges on the NFS server, which may pose security risks.`,ka=$localize`:␟7cbdabcece469fab89cfa687ab152bca18b97498␟1417693714872528491:This field is required.`,so=$localize`:␟7cbdabcece469fab89cfa687ab152bca18b97498␟1417693714872528491:This field is required.`,[["formDir","ngForm"],["clusterHelperText",""],["clusterError",""],["protocolError",""],["accessTypeHelper",""],["accessTypeWarning",""],["accessTypeError",""],["squashHelper",""],["squashError",""],["transportError",""],["nfsClients",""],["fsNameError",""],["userIdError",""],["secLabelError",""],["subvolumeError",""],["pathError",""],["bucketPathError",""],["pseudoHelper",""],["pseudoError",""],H,V,se,Ne,Ve,et,gt,Ft,Pt,_t,Re,ot,yn,Cn,fa,Mo,Ea,Ro,ga,Ca,Sa,ha,Oo,Po,Ta,va,io,Ma,Ra,Oa,ba,Na,Ia,Aa,Da,ya,La,$a,xa,Ua,wa,Ga,Ha,Va,Ba,za,Xa,ka,so,["cdsCol","",3,"columnNumbers"],[4,"cdFormLoading"],["name","nfsForm","novalidate","",3,"formGroup"],[1,"form-header"],[1,"form-item"],["formControlName","cluster_id","name","cluster_id","for","cluster_id","label","Cluster","cdRequiredField","Cluster","id","cluster_id",3,"invalid","invalidText","skeleton","helperText"],["value","",4,"ngIf"],[3,"value",4,"ngFor","ngForOf"],["type","info","actionName","Create","spacingClass","mt-2",3,"action",4,"ngIf"],["class","form-item",4,"ngIf"],["formGroupName","fsal"],["class","form-group row",4,"ngIf"],["cdRequiredField","NFS Protocol",1,"cds--label"],["formControlName","protocolNfsv3","name","protocolNfsv3","id","protocolNfsv3",3,"invalid","invalidText"],["formControlName","protocolNfsv4","name","protocolNfsv4","id","protocolNfsv4",3,"invalid","invalidText"],["formControlName","access_type","name","access_type","for","access_type","label","Access Type","cdRequiredField","Access Type","id","access_type",3,"invalid","invalidText","helperText","warn","warnText","skeleton"],["formControlName","squash","name","squash","for","squash","label","Squash","cdRequiredField","Squash","id","squash",3,"invalid","invalidText","skeleton","helperText"],["cdRequiredField","Transport Protocol",1,"cds--label"],["formControlName","transportUDP","name","transportUDP","id","transportUDP",3,"invalid","invalidText"],["formControlName","transportTCP","name","transportTCP","id","transportTCP",3,"invalid","invalidText"],[3,"form","clients"],["type","error",4,"ngIf"],["wrappingClass","text-right",3,"submitActionEvent","form","disabled","submitText"],["value",""],[3,"value"],["type","info","actionName","Create","spacingClass","mt-2",3,"action"],["class","invalid-feedback",4,"ngIf"],[1,"invalid-feedback"],["formControlName","rgw_export_type","name","rgw_export_type","label","Type",3,"valueChange"],["value","bucket"],["value","user"],["formControlName","fs_name","name","fs_name","for","fs_name","label","Volume","cdRequiredField","Volume","id","fs_name",3,"change","invalid","invalidText","skeleton"],["formControlName","user_id","name","user_id","for","user_id","label","User","cdRequiredField","User","id","user_id",3,"invalid","invalidText","skeleton"],["formControlName","security_label","name","security_label","id","security_label"],["for","sec_label_xattr",3,"invalid","invalidText"],["cdsText","","name","sec_label_xattr","id","sec_label_xattr","formControlName","sec_label_xattr",3,"invalid"],["formControlName","subvolume_group","name","subvolume_group","for","subvolume_group","label","Subvolume Group","id","subvolume_group",3,"change","skeleton"],[3,"value","selected",4,"ngFor","ngForOf"],[3,"value","selected"],[1,"form-group","row"],["formControlName","subvolume","name","subvolume","for","subvolume","label","Subvolume","id","subvolume",3,"change","skeleton","invalid","invalidText"],["for","path","helperText","A path in a CephFS file system.","cdRequiredField","Path",3,"invalid","invalidText"],["cdsText","","type","text","placeholder",Fa,"id","path","name","path","formControlName","path",3,"ngbTypeahead","invalid"],["for","path","cdRequiredField","Bucket",3,"invalid","invalidText"],["cdsText","","type","text","placeholder",Pa,"id","path","name","path","formControlName","path",3,"ngbTypeahead","invalid"],["routerLink","/rgw/bucket/create",1,"btn-link"],["for","pseudo","cdRequiredField","Pseudo",3,"helperText","invalid","invalidText"],["cdsText","","type","text","placeholder",ao,"id","pseudo","name","pseudo","formControlName","pseudo","minlength","2",3,"invalid"],[4,"ngIf"],["section","rgw-nfs"],["type","error"]]},template:function(V,se){1&V&&(c.\u0275\u0275elementStart(0,"div",68),c.\u0275\u0275template(1,we,76,60,"ng-container",69),c.\u0275\u0275elementEnd()),2&V&&(c.\u0275\u0275property("columnNumbers",c.\u0275\u0275pureFunction0(2,Pe)),c.\u0275\u0275advance(),c.\u0275\u0275property("cdFormLoading",se.loading))},dependencies:[e.\u0275NgNoValidate,e.NgSelectOption,e.\u0275NgSelectMultipleOption,e.DefaultValueAccessor,e.NgControlStatus,e.NgControlStatusGroup,e.MinLengthValidator,e.FormGroupDirective,e.FormControlName,e.FormGroupName,l.RouterLink,He.m,it.C,ct.e,tt.G,z.S,B.C,q.E,Q.P,G.NgForOf,G.NgIf,Ge.NgbTypeahead,D.ColumnDirective,D.Select,D.Option,D.TextInputLabelComponent,D.TextInput,D.Checkbox,ue,ze.r,G.TitleCasePipe],styles:[".cd-mb[_ngcontent-%COMP%]{margin-bottom:10px}"]})}}},70848:(Z,A,r)=>{r.d(A,{J:()=>ut,V:()=>ze});var a=r(87536),e=r(76218),l=r(29841),T=r.n(l),E=r(22341),f=r(25947),u=r(84821),F=r(54372),p=r(62847),S=r(2148),_=r(46045),v=r(29130),R=r(19380),P=r(85481),M=r(82254),b=r(58510),m=r(50813),g=r(19560),O=r(8265),N=r(94254),c=r(22453),z=r(32295),B=r(45843),q=r(91974),Q=r(77317),G=r(3600),D=r(37823),oe=r(62988);function fe(Pe,De){if(1&Pe&&a.\u0275\u0275element(0,"cd-table-key-value",11),2&Pe){const Ie=a.\u0275\u0275nextContext(2);a.\u0275\u0275property("data",Ie.data)}}function ye(Pe,De){if(1&Pe&&a.\u0275\u0275element(0,"cd-table",12,1),2&Pe){const Ie=a.\u0275\u0275nextContext(2);a.\u0275\u0275property("data",Ie.clients)("columns",Ie.clientsColumns)}}function je(Pe,De){if(1&Pe&&(a.\u0275\u0275elementContainerStart(0),a.\u0275\u0275elementStart(1,"nav",5,0),a.\u0275\u0275elementContainerStart(3,6),a.\u0275\u0275elementStart(4,"a",7),a.\u0275\u0275i18n(5,2),a.\u0275\u0275elementEnd(),a.\u0275\u0275template(6,fe,1,1,"ng-template",8),a.\u0275\u0275elementContainerEnd(),a.\u0275\u0275elementContainerStart(7,9),a.\u0275\u0275elementStart(8,"a",7),a.\u0275\u0275i18n(9,3),a.\u0275\u0275elementEnd(),a.\u0275\u0275template(10,ye,2,2,"ng-template",8),a.\u0275\u0275elementContainerEnd(),a.\u0275\u0275elementEnd(),a.\u0275\u0275element(11,"div",10),a.\u0275\u0275elementContainerEnd()),2&Pe){const Ie=a.\u0275\u0275reference(2),Qe=a.\u0275\u0275nextContext();a.\u0275\u0275advance(9),a.\u0275\u0275i18nExp(Qe.clients.length),a.\u0275\u0275i18nApply(9),a.\u0275\u0275advance(2),a.\u0275\u0275property("ngbNavOutlet",Ie)}}class Le{constructor(){this.clients=[],this.clientsColumns=[{name:$localize`Addresses`,prop:"addresses",flexGrow:2},{name:$localize`Access Type`,prop:"access_type",flexGrow:1},{name:$localize`Squash`,prop:"squash",flexGrow:1}]}ngOnChanges(){this.selection&&(this.selectedItem=this.selection,this.clients=this.selectedItem.clients,this.data={},this.data[$localize`Cluster`]=this.selectedItem.cluster_id,this.data[$localize`NFS Protocol`]=this.selectedItem.protocols.map(De=>"NFSv"+De),this.data[$localize`Pseudo`]=this.selectedItem.pseudo,this.data[$localize`Access Type`]=this.selectedItem.access_type,this.data[$localize`Squash`]=this.selectedItem.squash,this.data[$localize`Transport`]=this.selectedItem.transports,this.data[$localize`Path`]=this.selectedItem.path,"CEPH"===this.selectedItem.fsal.name?(this.data[$localize`Storage Backend`]=$localize`CephFS`,this.data[$localize`CephFS User`]=this.selectedItem.fsal.user_id,this.data[$localize`CephFS Filesystem`]=this.selectedItem.fsal.fs_name,this.data[$localize`Security Label`]=this.selectedItem.fsal.sec_label_xattr):(this.data[$localize`Storage Backend`]=$localize`Object Gateway`,this.data[$localize`Object Gateway User`]=this.selectedItem.fsal.user_id))}static{this.\u0275fac=function(Ie){return new(Ie||Le)}}static{this.\u0275cmp=a.\u0275\u0275defineComponent({type:Le,selectors:[["cd-nfs-details"]],inputs:{selection:"selection"},features:[a.\u0275\u0275NgOnChangesFeature],decls:1,vars:1,consts:()=>{let De,Ie;return De=$localize`:␟4f8b2bb476981727ab34ed40fde1218361f92c45␟5028777105388019087:Details`,Ie=$localize`:␟47116253e36f4e38a97ba41b2d3122c6c15ab904␟9142504997758402211:Clients (${"\ufffd0\ufffd"}:INTERPOLATION:)`,[["nav","ngbNav"],["table",""],De,Ie,[4,"ngIf"],["ngbNav","","cdStatefulTab","nfs-details",1,"nav-tabs"],["ngbNavItem","details"],["ngbNavLink",""],["ngbNavContent",""],["ngbNavItem","clients"],[3,"ngbNavOutlet"],[3,"data"],["columnMode","flex","identifier","addresses","forceIdentifier","true","selectionType","",3,"data","columns"]]},template:function(Ie,Qe){1&Ie&&a.\u0275\u0275template(0,je,12,2,"ng-container",4),2&Ie&&a.\u0275\u0275property("ngIf",Qe.selection)},dependencies:[p.O,D.i,oe.B,Q.NgbNavContent,Q.NgbNav,Q.NgbNavItem,Q.NgbNavLink,Q.NgbNavLinkBase,Q.NgbNavOutlet,q.NgIf]})}}const Fe=["nfsState"],te=["nfsFsal"],le=["pathTmpl"],ie=["table"],_e=["protocolTpl"],ue=["transportTpl"];function C(Pe,De){if(1&Pe&&a.\u0275\u0275element(0,"cd-nfs-details",12),2&Pe){const Ie=a.\u0275\u0275nextContext();a.\u0275\u0275property("selection",Ie.expandedRow)}}function K(Pe,De){1&Pe&&(a.\u0275\u0275elementContainerStart(0),a.\u0275\u0275i18n(1,5),a.\u0275\u0275elementContainerEnd())}function ce(Pe,De){1&Pe&&(a.\u0275\u0275elementContainerStart(0),a.\u0275\u0275i18n(1,6),a.\u0275\u0275elementContainerEnd())}function Ee(Pe,De){if(1&Pe&&a.\u0275\u0275template(0,K,2,0,"ng-container",13)(1,ce,2,0,"ng-container",13),2&Pe){const Ie=De.data.value;a.\u0275\u0275property("ngIf","CEPH"===Ie.name),a.\u0275\u0275advance(),a.\u0275\u0275property("ngIf","RGW"===Ie.name)}}function Ce(Pe,De){if(1&Pe&&(a.\u0275\u0275elementStart(0,"span")(1,"cds-tag",15),a.\u0275\u0275text(2),a.\u0275\u0275elementEnd()()),2&Pe){const Ie=De.$implicit;a.\u0275\u0275advance(2),a.\u0275\u0275textInterpolate1("NFSv",Ie,"")}}function Ue(Pe,De){if(1&Pe&&a.\u0275\u0275template(0,Ce,3,1,"span",14),2&Pe){const Ie=De.data.value;a.\u0275\u0275property("ngForOf",Ie)}}function He(Pe,De){if(1&Pe&&(a.\u0275\u0275elementStart(0,"span")(1,"cds-tag",15),a.\u0275\u0275text(2),a.\u0275\u0275elementEnd()()),2&Pe){const Ie=De.$implicit;a.\u0275\u0275advance(2),a.\u0275\u0275textInterpolate(Ie)}}function it(Pe,De){if(1&Pe&&a.\u0275\u0275template(0,He,3,1,"span",14),2&Pe){const Ie=De.data.value;a.\u0275\u0275property("ngForOf",Ie)}}function ct(Pe,De){1&Pe&&(a.\u0275\u0275elementStart(0,"span",17),a.\u0275\u0275i18n(1,7),a.\u0275\u0275elementEnd())}function tt(Pe,De){if(1&Pe&&(a.\u0275\u0275elementStart(0,"span"),a.\u0275\u0275text(1),a.\u0275\u0275elementEnd()),2&Pe){const Ie=a.\u0275\u0275nextContext().data.value;a.\u0275\u0275advance(),a.\u0275\u0275textInterpolate(Ie)}}function Ge(Pe,De){if(1&Pe&&a.\u0275\u0275template(0,ct,2,0,"span",16)(1,tt,2,1,"span",13),2&Pe){const Ie=De.data.value;a.\u0275\u0275property("ngIf",""===Ie),a.\u0275\u0275advance(),a.\u0275\u0275property("ngIf",""!==Ie)}}var ze,Pe;(Pe=ze||(ze={})).BUCKET="bucket",Pe.USER="user";class ut extends f.D{constructor(De,Ie,Qe,qe,ht,St,Jt){super(),this.authStorageService=De,this.modalService=Ie,this.nfsService=Qe,this.taskListService=qe,this.taskWrapper=ht,this.router=St,this.actionLabels=Jt,this.selection=new R.y,this.isDefaultCluster=!1,this.builders={"nfs/create":ft=>({path:ft.path,cluster_id:ft.cluster_id,fsal:ft.fsal})},this.permission=this.authStorageService.getPermissions().nfs,this.fsal=(0,g.C)(this.router.url);const Lt=(0,g.q)(this.fsal),Zt=()=>this.selection.first()&&`${encodeURI(this.selection.first().cluster_id)}/${encodeURI(this.selection.first().export_id)}`,zt={permission:"create",icon:_.FI.add,routerLink:()=>`/${Lt}/nfs/create`,canBePrimary:ft=>!ft.hasSingleSelection,name:this.actionLabels.CREATE},Xt={permission:"update",icon:_.FI.edit,routerLink:()=>[`/${Lt}/nfs/edit/${Zt()}`,{rgw_export_type:this.fsal!==O.q.RGW||T().isEmpty(this.selection?.first()?.path)?ze.USER:ze.BUCKET}],name:this.actionLabels.EDIT},bt={permission:"delete",icon:_.FI.destroy,click:()=>this.deleteNfsModal(),name:this.actionLabels.DELETE};this.tableActions=[zt,Xt,bt]}ngOnInit(){this.columns=[{name:$localize`User`,prop:"fsal.user_id",flexGrow:2,cellTransformation:S.x.executing},{name:this.fsal===O.q.CEPH?$localize`Path`:$localize`Bucket`,prop:"path",flexGrow:2,cellTemplate:this.pathTmpl,cellTransformation:S.x.path},{name:$localize`Pseudo`,prop:"pseudo",flexGrow:2},{name:$localize`Cluster`,prop:"cluster_id",flexGrow:2},{name:$localize`Storage Backend`,prop:"fsal",flexGrow:2,cellTemplate:this.nfsFsal},{name:$localize`Access Type`,prop:"access_type",flexGrow:2},{name:$localize`NFS Protocol`,prop:"protocols",flexGrow:2,cellTemplate:this.protocolTpl},{name:$localize`Transports`,prop:"transports",flexGrow:2,cellTemplate:this.transportTpl}],this.taskListService.init(()=>this.nfsService.list(this.clusterId),De=>this.prepareResponse(De),De=>this.exports=De,()=>this.onFetchError(),this.taskFilter,this.itemFilter,this.builders)}ngOnDestroy(){this.summaryDataSubscription&&this.summaryDataSubscription.unsubscribe()}prepareResponse(De){let Ie=[];return De.filter(qe=>qe.fsal?.name===this.fsal).forEach(qe=>{qe.id=`${qe.cluster_id}:${qe.export_id}`,qe.state="LOADING",Ie=Ie.concat(qe)}),Ie}onFetchError(){this.table.reset(),this.viewCacheStatus={status:v.k.ValueException}}itemFilter(De,Ie){return De.cluster_id===Ie.metadata.cluster_id&&De.export_id===Ie.metadata.export_id}taskFilter(De){return["nfs/create","nfs/delete","nfs/edit"].includes(De.name)}updateSelection(De){this.selection=De}deleteNfsModal(){const De=this.selection.first().cluster_id,Ie=this.selection.first().export_id;this.modalRef=this.modalService.show(u.D,{impact:c.r.high,itemDescription:$localize`NFS export`,itemNames:[`${De}:${Ie}`],submitActionObservable:()=>this.taskWrapper.wrapTaskAroundCall({task:new P.O("nfs/delete",{cluster_id:De,export_id:Ie}),call:this.nfsService.delete(De,Ie)})})}static{this.\u0275fac=function(Ie){return new(Ie||ut)(a.\u0275\u0275directiveInject(M.v),a.\u0275\u0275directiveInject(N.V),a.\u0275\u0275directiveInject(E.Z),a.\u0275\u0275directiveInject(b.D),a.\u0275\u0275directiveInject(m.a),a.\u0275\u0275directiveInject(e.Router),a.\u0275\u0275directiveInject(F.Ss))}}static{this.\u0275cmp=a.\u0275\u0275defineComponent({type:ut,selectors:[["cd-nfs-list"]],viewQuery:function(Ie,Qe){if(1&Ie&&(a.\u0275\u0275viewQuery(Fe,5),a.\u0275\u0275viewQuery(te,7),a.\u0275\u0275viewQuery(le,7),a.\u0275\u0275viewQuery(ie,7),a.\u0275\u0275viewQuery(_e,7),a.\u0275\u0275viewQuery(ue,7)),2&Ie){let qe;a.\u0275\u0275queryRefresh(qe=a.\u0275\u0275loadQuery())&&(Qe.nfsState=qe.first),a.\u0275\u0275queryRefresh(qe=a.\u0275\u0275loadQuery())&&(Qe.nfsFsal=qe.first),a.\u0275\u0275queryRefresh(qe=a.\u0275\u0275loadQuery())&&(Qe.pathTmpl=qe.first),a.\u0275\u0275queryRefresh(qe=a.\u0275\u0275loadQuery())&&(Qe.table=qe.first),a.\u0275\u0275queryRefresh(qe=a.\u0275\u0275loadQuery())&&(Qe.protocolTpl=qe.first),a.\u0275\u0275queryRefresh(qe=a.\u0275\u0275loadQuery())&&(Qe.transportTpl=qe.first)}},inputs:{clusterId:"clusterId"},features:[a.\u0275\u0275ProvidersFeature([b.D]),a.\u0275\u0275InheritDefinitionFeature],decls:13,vars:6,consts:()=>{let De,Ie,Qe,qe;return De=$localize`:␟734c9905951a774870497c5aaae8e3ee833b6196␟8440421106569981118:CephFS`,Ie=$localize`:␟2190548d236ca5f7bc7ab2bca334b860c5ff2ad4␟3671149880069127721:Object Gateway`,Qe=$localize`:␟4a83db97e9a9a5be4283c1ab92ed205a182b5868␟4296659445289095716:All buckets owned by user`,qe=$localize`:␟2ce68fac5384fd3b3ff02cfcc40a82840469e697␟8478631765496814403:*`,[["table",""],["nfsFsal",""],["protocolTpl",""],["transportTpl",""],["pathTmpl",""],De,Ie,qe,["columnMode","flex","identifier","id","forceIdentifier","true","selectionType","single",3,"setExpandedRow","updateSelection","data","columns","hasDetails"],[1,"table-actions"],[1,"btn-group",3,"permission","selection","tableActions"],[3,"selection",4,"cdTableDetail"],[3,"selection"],[4,"ngIf"],[4,"ngFor","ngForOf"],["size","md"],["ngbTooltip",Qe,4,"ngIf"],["ngbTooltip",Qe]]},template:function(Ie,Qe){if(1&Ie){const qe=a.\u0275\u0275getCurrentView();a.\u0275\u0275elementStart(0,"cd-table",8,0),a.\u0275\u0275listener("setExpandedRow",function(St){return a.\u0275\u0275restoreView(qe),a.\u0275\u0275resetView(Qe.setExpandedRow(St))})("updateSelection",function(St){return a.\u0275\u0275restoreView(qe),a.\u0275\u0275resetView(Qe.updateSelection(St))}),a.\u0275\u0275elementStart(2,"div",9),a.\u0275\u0275element(3,"cd-table-actions",10),a.\u0275\u0275elementEnd(),a.\u0275\u0275template(4,C,1,1,"cd-nfs-details",11),a.\u0275\u0275elementEnd(),a.\u0275\u0275template(5,Ee,2,2,"ng-template",null,1,a.\u0275\u0275templateRefExtractor)(7,Ue,1,1,"ng-template",null,2,a.\u0275\u0275templateRefExtractor)(9,it,1,1,"ng-template",null,3,a.\u0275\u0275templateRefExtractor)(11,Ge,2,2,"ng-template",null,4,a.\u0275\u0275templateRefExtractor)}2&Ie&&(a.\u0275\u0275property("data",Qe.exports)("columns",Qe.columns)("hasDetails",!1),a.\u0275\u0275advance(3),a.\u0275\u0275property("permission",Qe.permission)("selection",Qe.selection)("tableActions",Qe.tableActions))},dependencies:[p.O,z.j,B.N,q.NgForOf,q.NgIf,Q.NgbTooltip,G.Tag,Le]})}}},19560:(Z,A,r)=>{r.d(A,{C:()=>e,q:()=>l});var a=r(8265);const e=T=>T.startsWith("/rgw/nfs")?a.q.RGW:a.q.CEPH,l=T=>T===a.q.CEPH?"cephfs":"rgw"},44128:(Z,A,r)=>{r.d(A,{d:()=>F});var a=r(91974),l=r(76218),E=r(93887),f=r(87536);class F{static{this.\u0275fac=function(_){return new(_||F)}}static{this.\u0275mod=f.\u0275\u0275defineNgModule({type:F})}static{this.\u0275inj=f.\u0275\u0275defineInjector({imports:[a.CommonModule,E.G,l.RouterModule]})}}},85770:(Z,A,r)=>{r.d(A,{Y:()=>b});var a=r(87536),e=r(84857),l=r(36618),T=r(95631),E=r(50619),f=r(80697);let u=class Xr{constructor(g){this.http=g,this.url="api/perf_counters"}list(){return this.http.get(this.url)}get(g,O){return this.http.get(`${this.url}/${g}/${O}`).pipe((0,E.mergeMap)(N=>(0,T.of)(N.counters)))}static{this.\u0275fac=function(O){return new(O||Xr)(a.\u0275\u0275inject(l.HttpClient))}}static{this.\u0275prov=a.\u0275\u0275defineInjectable({token:Xr,factory:Xr.\u0275fac,providedIn:"root"})}};u=(0,e.__decorate)([f.G,(0,e.__metadata)("design:paramtypes",[l.HttpClient])],u);var F=r(91974),p=r(92805),S=r(62847),_=r(18457);const v=["valueTpl"];function R(m,g){if(1&m&&(a.\u0275\u0275text(0),a.\u0275\u0275pipe(1,"dimless")),2&m){const O=g.data.row;a.\u0275\u0275textInterpolate2(" ",a.\u0275\u0275pipeBind1(1,2,O.value)," ",O.unit," ")}}function P(m,g){if(1&m){const O=a.\u0275\u0275getCurrentView();a.\u0275\u0275elementStart(0,"cd-table",4),a.\u0275\u0275listener("fetchData",function(c){a.\u0275\u0275restoreView(O);const z=a.\u0275\u0275nextContext();return a.\u0275\u0275resetView(z.getCounters(c))}),a.\u0275\u0275template(1,R,2,4,"ng-template",null,1,a.\u0275\u0275templateRefExtractor),a.\u0275\u0275elementEnd()}if(2&m){const O=a.\u0275\u0275nextContext();a.\u0275\u0275property("data",O.counters)("columns",O.columns)("autoSave",!1)}}function M(m,g){1&m&&(a.\u0275\u0275elementStart(0,"cd-alert-panel",5),a.\u0275\u0275i18n(1,2),a.\u0275\u0275elementEnd())}class b{constructor(g){this.performanceCounterService=g,this.columns=[],this.counters=[]}ngOnInit(){this.columns=[{name:$localize`Name`,prop:"name",flexGrow:1},{name:$localize`Description`,prop:"description",flexGrow:1},{name:$localize`Value`,prop:"value",cellTemplate:this.valueTpl,flexGrow:1}]}getCounters(g){this.performanceCounterService.get(this.serviceType,this.serviceId).subscribe(O=>{this.counters=O},O=>{404===O.status?(O.preventDefault(),this.counters=null):g.error()})}static{this.\u0275fac=function(O){return new(O||b)(a.\u0275\u0275directiveInject(u))}}static{this.\u0275cmp=a.\u0275\u0275defineComponent({type:b,selectors:[["cd-table-performance-counter"]],viewQuery:function(O,N){if(1&O&&a.\u0275\u0275viewQuery(v,5),2&O){let c;a.\u0275\u0275queryRefresh(c=a.\u0275\u0275loadQuery())&&(N.valueTpl=c.first)}},inputs:{serviceType:"serviceType",serviceId:"serviceId"},decls:3,vars:2,consts:()=>{let g;return g=$localize`:␟ca53d681a9892d6fdbb57ee9676582186515e961␟1620331302033094465:Performance counters not available`,[["warning",""],["valueTpl",""],g,["columnMode","flex",3,"data","columns","autoSave","fetchData",4,"ngIf","ngIfElse"],["columnMode","flex",3,"fetchData","data","columns","autoSave"],["type","warning"]]},template:function(O,N){if(1&O&&a.\u0275\u0275template(0,P,3,3,"cd-table",3)(1,M,2,0,"ng-template",null,0,a.\u0275\u0275templateRefExtractor),2&O){const c=a.\u0275\u0275reference(2);a.\u0275\u0275property("ngIf",N.counters)("ngIfElse",c)}},dependencies:[F.NgIf,p.m,S.O,_.u]})}}},24192:(Z,A,r)=>{r.d(A,{$H:()=>l,B5:()=>T,Oe:()=>e,SX:()=>a,_4:()=>E,do:()=>f});class a{}class e{}class l{}class T{}var E,u,f;(u=E||(E={})).ENABLED="enabled",u.FORBIDDEN="forbidden",u.ALLOWED="allowed",function(u){u.directional="directional",u.symmetrical="symmetrical"}(f||(f={}))},13723:(Z,A,r)=>{r.d(A,{Hk:()=>l,XG:()=>e,tj:()=>a});const a="rgw";var e,T;(T=e||(e={})).AmazonS3FullAccess="AmazonS3FullAccess",T.AmazonS3ReadOnlyAccess="AmazonS3ReadOnlyAccess";const l={[e.AmazonS3FullAccess]:"arn:aws:iam::aws:policy/AmazonS3FullAccess",[e.AmazonS3ReadOnlyAccess]:"arn:aws:iam::aws:policy/AmazonS3ReadOnlyAccess"}},26481:(Z,A,r)=>{r.d(A,{_:()=>S});var a=r(91974),l=r(77317),E=r(13421),f=r(27289),u=r(93887),F=r(87536);class S{static{this.\u0275fac=function(R){return new(R||S)}}static{this.\u0275mod=F.\u0275\u0275defineNgModule({type:S})}static{this.\u0275inj=F.\u0275\u0275defineInjector({imports:[a.CommonModule,f.h,u.G,l.NgbNavModule,E.Y]})}}},97421:(Z,A,r)=>{r.d(A,{v:()=>f});var a=r(29841),e=r.n(a),l=r(26481);class T{static{this.CATEGORY_CLEAN="clean"}static{this.CATEGORY_WORKING="working"}static{this.CATEGORY_WARNING="warning"}static{this.CATEGORY_UNKNOWN="unknown"}static{this.VALID_CATEGORIES=[T.CATEGORY_CLEAN,T.CATEGORY_WORKING,T.CATEGORY_WARNING,T.CATEGORY_UNKNOWN]}constructor(F){if(this.type=F,!this.isValidType())throw new Error("Wrong placement group category type");this.setTypeStates()}isValidType(){return T.VALID_CATEGORIES.includes(this.type)}setTypeStates(){switch(this.type){case T.CATEGORY_CLEAN:this.states=["active","clean"];break;case T.CATEGORY_WORKING:this.states=["activating","backfill_wait","backfilling","creating","deep","degraded","forced_backfill","forced_recovery","peering","peered","recovering","recovery_wait","repair","scrubbing","snaptrim","snaptrim_wait"];break;case T.CATEGORY_WARNING:this.states=["backfill_toofull","backfill_unfound","down","incomplete","inconsistent","recovery_toofull","recovery_unfound","remapped","snaptrim_error","stale","undersized"];break;default:this.states=[]}}}var E=r(87536);class f{constructor(){this.categories=this.createCategories()}getAllTypes(){return T.VALID_CATEGORIES}getTypeByStates(F){const p=this.getPgStatesFromText(F);if(0===p.length)return T.CATEGORY_UNKNOWN;const S=e().zipObject(T.VALID_CATEGORIES,T.VALID_CATEGORIES.map(v=>e().intersection(this.categories[v].states,p).length));if(S[T.CATEGORY_WARNING]>0)return T.CATEGORY_WARNING;const _=S[T.CATEGORY_WORKING];return p.length>S[T.CATEGORY_CLEAN]+_?T.CATEGORY_UNKNOWN:_?T.CATEGORY_WORKING:T.CATEGORY_CLEAN}createCategories(){return e().zipObject(T.VALID_CATEGORIES,T.VALID_CATEGORIES.map(F=>new T(F)))}getPgStatesFromText(F){const p=F.replace(/[^a-z_]+/g," ").trim().split(" ");return e().uniq(p)}static{this.\u0275fac=function(p){return new(p||f)}}static{this.\u0275prov=E.\u0275\u0275defineInjectable({token:f,factory:f.\u0275fac,providedIn:l._})}}},3141:(Z,A,r)=>{r.r(A),r.d(A,{AuthModule:()=>en,RoutedAuthModule:()=>gn});var a=r(91974),e=r(53648),l=r(76218),T=r(77317),E=r(13421),f=r(54372),u=r(93887),F=r(95631),p=r(36618),S=r(50619),_=r(87536);class v{constructor(ee){this.http=ee}list(){return this.http.get("api/role")}delete(ee){return this.http.delete(`api/role/${ee}`)}get(ee){return this.http.get(`api/role/${ee}`)}create(ee){return this.http.post("api/role",ee)}clone(ee,ae){return this.http.post(`api/role/${ee}/clone`,{new_name:ae})}update(ee){return this.http.put(`api/role/${ee.name}`,ee)}exists(ee){return this.list().pipe((0,S.mergeMap)(ae=>{const U=ae.some(L=>L.name===ee);return(0,F.of)(U)}))}static{this.\u0275fac=function(ae){return new(ae||v)(_.\u0275\u0275inject(p.HttpClient))}}static{this.\u0275prov=_.\u0275\u0275defineInjectable({token:v,factory:v.\u0275fac,providedIn:"root"})}}class R{constructor(ee){this.http=ee}list(){return this.http.get("ui-api/scope")}static{this.\u0275fac=function(ae){return new(ae||R)(_.\u0275\u0275inject(p.HttpClient))}}static{this.\u0275prov=_.\u0275\u0275defineInjectable({token:R,factory:R.\u0275fac,providedIn:"root"})}}var O,P=r(88285),M=r(74902),b=r(58384),m=r(3687),g=r(88701);(O||(O={})).editing="editing";class N{}var c=r(59781),z=r(25171),B=r(23603),q=r(56677),Q=r(90476),G=r(37966),D=r(51862),oe=r(3600),fe=r(37353);const ye=()=>({md:4}),je=ge=>({required:ge});function Le(ge,ee){1&ge&&(_.\u0275\u0275elementStart(0,"span"),_.\u0275\u0275elementContainerStart(1),_.\u0275\u0275i18n(2,5),_.\u0275\u0275elementContainerEnd(),_.\u0275\u0275elementEnd())}function Fe(ge,ee){1&ge&&(_.\u0275\u0275elementStart(0,"span"),_.\u0275\u0275elementContainerStart(1),_.\u0275\u0275i18n(2,6),_.\u0275\u0275elementContainerEnd(),_.\u0275\u0275elementEnd())}function te(ge,ee){if(1&ge&&_.\u0275\u0275template(0,Le,3,0,"span",19)(1,Fe,3,0,"span",19),2&ge){_.\u0275\u0275nextContext();const ae=_.\u0275\u0275reference(2),U=_.\u0275\u0275nextContext();_.\u0275\u0275property("ngIf",U.roleForm.showError("name",ae,"required")),_.\u0275\u0275advance(),_.\u0275\u0275property("ngIf",U.roleForm.showError("name",ae,"notUnique"))}}function le(ge,ee){if(1&ge){const ae=_.\u0275\u0275getCurrentView();_.\u0275\u0275elementContainerStart(0),_.\u0275\u0275elementStart(1,"form",9,0)(3,"div",10),_.\u0275\u0275i18n(4,2),_.\u0275\u0275pipe(5,"titlecase"),_.\u0275\u0275pipe(6,"upperFirst"),_.\u0275\u0275elementEnd(),_.\u0275\u0275elementStart(7,"div",11)(8,"cds-text-label",12),_.\u0275\u0275i18nStart(9,3),_.\u0275\u0275element(10,"span",13)(11,"input",14),_.\u0275\u0275i18nEnd(),_.\u0275\u0275elementEnd(),_.\u0275\u0275template(12,te,2,2,"ng-template",null,1,_.\u0275\u0275templateRefExtractor),_.\u0275\u0275elementEnd(),_.\u0275\u0275elementStart(14,"div",11)(15,"cds-text-label",15),_.\u0275\u0275i18nStart(16,4),_.\u0275\u0275element(17,"input",16),_.\u0275\u0275i18nEnd(),_.\u0275\u0275elementEnd()(),_.\u0275\u0275elementStart(18,"div",11)(19,"cds-text-label"),_.\u0275\u0275text(20,"Permissions"),_.\u0275\u0275elementEnd(),_.\u0275\u0275element(21,"cd-checked-table-form",17),_.\u0275\u0275elementEnd(),_.\u0275\u0275elementStart(22,"div",11)(23,"cd-form-button-panel",18),_.\u0275\u0275pipe(24,"titlecase"),_.\u0275\u0275pipe(25,"upperFirst"),_.\u0275\u0275listener("submitActionEvent",function(){_.\u0275\u0275restoreView(ae);const L=_.\u0275\u0275nextContext();return _.\u0275\u0275resetView(L.submit())}),_.\u0275\u0275elementEnd()()(),_.\u0275\u0275elementContainerEnd()}if(2&ge){const ae=_.\u0275\u0275reference(13),U=_.\u0275\u0275nextContext();_.\u0275\u0275advance(),_.\u0275\u0275property("formGroup",U.roleForm),_.\u0275\u0275advance(5),_.\u0275\u0275i18nExp(_.\u0275\u0275pipeBind1(5,14,U.action))(_.\u0275\u0275pipeBind1(6,16,U.resource)),_.\u0275\u0275i18nApply(4),_.\u0275\u0275advance(2),_.\u0275\u0275property("invalid",!U.roleForm.controls.name.valid&&U.roleForm.controls.name.dirty)("invalidText",ae),_.\u0275\u0275advance(2),_.\u0275\u0275property("ngClass",_.\u0275\u0275pureFunction1(22,je,U.mode!==U.roleFormMode.editing)),_.\u0275\u0275advance(),_.\u0275\u0275property("invalid",!U.roleForm.controls.name.valid&&U.roleForm.controls.name.dirty),_.\u0275\u0275advance(10),_.\u0275\u0275property("data",U.scopes_permissions)("columns",U.columns)("form",U.roleForm)("scopes",U.scopes)("initialValue",U.initialValue),_.\u0275\u0275advance(2),_.\u0275\u0275property("form",U.roleForm)("submitText",_.\u0275\u0275pipeBind1(24,18,U.action)+" "+_.\u0275\u0275pipeBind1(25,20,U.resource))}}class ie extends M.g{constructor(ee,ae,U,L,y,x){super(),this.route=ee,this.router=ae,this.roleService=U,this.scopeService=L,this.notificationService=y,this.actionLabels=x,this.scopes=[],this.scopes_permissions=[],this.initialValue={},this.roleFormMode=O,this.resource=$localize`role`,this.createForm()}createForm(){this.roleForm=new b.$({name:new e.UntypedFormControl("",{validators:[e.Validators.required],asyncValidators:[m.xQ.unique(this.roleService.exists,this.roleService)]}),description:new e.UntypedFormControl(""),scopes_permissions:new e.UntypedFormControl({})})}ngOnInit(){this.columns=[{prop:"scope",name:$localize`All`,flexGrow:2},{prop:"read",name:$localize`Read`,flexGrow:1,cellClass:"text-center"},{prop:"create",name:$localize`Create`,flexGrow:1,cellClass:"text-center"},{prop:"update",name:$localize`Update`,flexGrow:1,cellClass:"text-center"},{prop:"delete",name:$localize`Delete`,flexGrow:1,cellClass:"text-center"}],this.router.url.startsWith("/user-management/roles/edit")?(this.mode=this.roleFormMode.editing,this.action=this.actionLabels.EDIT):this.action=this.actionLabels.CREATE,this.mode===this.roleFormMode.editing?this.initEdit():this.initCreate()}initCreate(){this.scopeService.list().subscribe(ee=>{this.scopes=ee,this.loadingReady()})}initEdit(){this.roleForm.get("name").disable(),this.route.params.subscribe(ee=>{const ae=[];ae.push(this.scopeService.list()),ae.push(this.roleService.get(ee.name)),(0,F.forkJoin)(ae).subscribe(U=>{this.scopes=U[0],["name","description","scopes_permissions"].forEach(L=>this.roleForm.get(L).setValue(U[1][L])),this.initialValue=U[1].scopes_permissions,this.loadingReady()})})}getRequest(){const ee=new N;return["name","description","scopes_permissions"].forEach(ae=>ee[ae]=this.roleForm.get(ae).value),ee}createAction(){const ee=this.getRequest();this.roleService.create(ee).subscribe(()=>{this.notificationService.show(P._.success,$localize`Created role '${ee.name}'`),this.router.navigate(["/user-management/roles"])},()=>{this.roleForm.setErrors({cdSubmitButton:!0})})}editAction(){const ee=this.getRequest();this.roleService.update(ee).subscribe(()=>{this.notificationService.show(P._.success,$localize`Updated role '${ee.name}'`),this.router.navigate(["/user-management/roles"])},()=>{this.roleForm.setErrors({cdSubmitButton:!0})})}submit(){this.mode===this.roleFormMode.editing?this.editAction():this.createAction()}static{this.\u0275fac=function(ae){return new(ae||ie)(_.\u0275\u0275directiveInject(l.ActivatedRoute),_.\u0275\u0275directiveInject(l.Router),_.\u0275\u0275directiveInject(v),_.\u0275\u0275directiveInject(R),_.\u0275\u0275directiveInject(g.J),_.\u0275\u0275directiveInject(f.Ss))}}static{this.\u0275cmp=_.\u0275\u0275defineComponent({type:ie,selectors:[["cd-role-form"]],features:[_.\u0275\u0275InheritDefinitionFeature],decls:2,vars:3,consts:()=>{let ee,ae,U,L,y,x;return ee=$localize`:␟2fecea01ce1d44114ee45144eff6d47a5016a74f␟5451140586403689891:Name...`,ae=$localize`:form title␟a90ab37a86361510c6418a0b01e5fb53b18aad60␟4895964714444299563:${"\ufffd0\ufffd"}:INTERPOLATION: ${"\ufffd1\ufffd"}:INTERPOLATION_1: `,U=$localize`:␟6f6a9a60f4a91c37bcd3e3750fae72a988d8c77c␟3277468724232946823:Name ${"\ufffd#10\ufffd"}:START_TAG_SPAN:${"\ufffd/#10\ufffd"}:CLOSE_TAG_SPAN:${"\ufffd#11\ufffd\ufffd/#11\ufffd"}:TAG_INPUT:`,L=$localize`:␟ecd2f54d9c5b38098d5c776ba5eb3751b4b5f818␟6338266770837897193:Description ${"\ufffd#17\ufffd\ufffd/#17\ufffd"}:TAG_INPUT:`,y=$localize`:␟3dc61dfb7051217af07582ab905ca9cfd7b993e0␟2001824353286790379: This field is required. `,x=$localize`:␟7ef2ea612d91d993018752e9bc1d7d390bcb0db2␟524199260030074351: The chosen name is already in use. `,[["formDir","ngForm"],["nameError",""],ae,U,L,y,x,["cdsCol","",3,"columnNumbers"],[4,"cdFormLoading"],["name","roleForm","novalidate","",3,"formGroup"],[1,"form-header"],[1,"form-item"],["for","name","cdRequiredField","Name",3,"invalid","invalidText"],[3,"ngClass"],["cdsText","","placeholder",ee,"id","name","name","name","formControlName","name","autofocus","",3,"invalid"],["for","name"],["cdsText","","type","text","placeholder","Description..","id","description","name","description","formControlName","description",1,"input-field"],["inputField","scopes_permissions",3,"data","columns","form","scopes","initialValue"],["wrappingClass","text-right",3,"submitActionEvent","form","submitText"],[4,"ngIf"]]},template:function(ae,U){1&ae&&(_.\u0275\u0275elementStart(0,"div",7),_.\u0275\u0275template(1,le,26,24,"ng-container",8),_.\u0275\u0275elementEnd()),2&ae&&(_.\u0275\u0275property("columnNumbers",_.\u0275\u0275pureFunction0(2,ye)),_.\u0275\u0275advance(),_.\u0275\u0275property("cdFormLoading",U.loading))},dependencies:[a.NgClass,a.NgIf,e.\u0275NgNoValidate,e.DefaultValueAccessor,e.NgControlStatus,e.NgControlStatusGroup,e.FormGroupDirective,e.FormControlName,c.e,z.N,B.B,q.G,Q.S,G.E,D.P,oe.TextInputLabelComponent,oe.TextInput,oe.ColumnDirective,a.TitleCasePipe,fe.r],styles:[".datatable-permissions-header-cell-label[_ngcontent-%COMP%], .datatable-permissions-scope-cell-label[_ngcontent-%COMP%]{font-weight:700}"]})}}var _e=r(25947),ue=r(84821),C=r(62431),K=r(2148),ce=r(46045),Ee=r(19380),Ce=r(76139),Ue=r(82254),He=r(94254),it=r(2361),ct=r(62847),tt=r(32295),Ge=r(45843),ze=r(29841),ut=r.n(ze);function Pe(ge,ee){if(1&ge&&(_.\u0275\u0275elementContainerStart(0),_.\u0275\u0275element(1,"cd-table",1),_.\u0275\u0275elementContainerEnd()),2&ge){const ae=_.\u0275\u0275nextContext();_.\u0275\u0275advance(),_.\u0275\u0275property("data",ae.scopes_permissions)("columns",ae.columns)("toolHeader",!1)("autoReload",!1)("autoSave",!1)("footer",!1)("limit",0)}}class De{constructor(){this.scopes_permissions=[]}ngOnInit(){this.columns=[{prop:"scope",name:$localize`Scope`,flexGrow:2},{prop:"read",name:$localize`Read`,flexGrow:1,cellClass:"text-left",cellTransformation:K.x.checkIcon},{prop:"create",name:$localize`Create`,flexGrow:1,cellClass:"text-left",cellTransformation:K.x.checkIcon},{prop:"update",name:$localize`Update`,flexGrow:1,cellClass:"text-left",cellTransformation:K.x.checkIcon},{prop:"delete",name:$localize`Delete`,flexGrow:1,cellClass:"text-left",cellTransformation:K.x.checkIcon}]}ngOnChanges(){if(this.selection){this.selectedItem=this.selection;const ee=[];ut().each(this.scopes,ae=>{const U={read:!1,create:!1,update:!1,delete:!1};U.scope=ae,ae in this.selectedItem.scopes_permissions&&ut().each(this.selectedItem.scopes_permissions[ae],L=>{U[L]=!0}),ee.push(U)}),this.scopes_permissions=ee}}static{this.\u0275fac=function(ae){return new(ae||De)}}static{this.\u0275cmp=_.\u0275\u0275defineComponent({type:De,selectors:[["cd-role-details"]],inputs:{selection:"selection",scopes:"scopes"},features:[_.\u0275\u0275NgOnChangesFeature],decls:1,vars:1,consts:[[4,"ngIf"],["columnMode","flex",3,"data","columns","toolHeader","autoReload","autoSave","footer","limit"]],template:function(ae,U){1&ae&&_.\u0275\u0275template(0,Pe,2,7,"ng-container",0),2&ae&&_.\u0275\u0275property("ngIf",U.selection)},dependencies:[a.NgIf,ct.O],styles:[".fa[_ngcontent-%COMP%]{font-size:large}.fa.fa-square-o[_ngcontent-%COMP%]{color:#ced4da}"]})}}const Ie=()=>({exact:!0});class Qe{constructor(ee){this.router=ee}static{this.\u0275fac=function(ae){return new(ae||Qe)(_.\u0275\u0275directiveInject(l.Router))}}static{this.\u0275cmp=_.\u0275\u0275defineComponent({type:Qe,selectors:[["cd-user-tabs"]],decls:7,vars:4,consts:()=>{let ee,ae;return ee=$localize`:␟4d13a9cd5ed3dcee0eab22cb25198d43886942be␟4555457172864212828:Users`,ae=$localize`:␟9610487cbeb5796d34d8601b5ac0c0a65f9e1d19␟795890916060309463:Roles`,[ee,ae,[1,"nav","nav-tabs"],[1,"nav-item"],["routerLink","/user-management/users","routerLinkActive","active","ariaCurrentWhenActive","page",1,"nav-link",3,"routerLinkActiveOptions"],["routerLink","/user-management/roles","routerLinkActive","active","ariaCurrentWhenActive","page",1,"nav-link",3,"routerLinkActiveOptions"]]},template:function(ae,U){1&ae&&(_.\u0275\u0275elementStart(0,"ul",2)(1,"li",3)(2,"a",4),_.\u0275\u0275i18n(3,0),_.\u0275\u0275elementEnd()(),_.\u0275\u0275elementStart(4,"li",3)(5,"a",5),_.\u0275\u0275i18n(6,1),_.\u0275\u0275elementEnd()()()),2&ae&&(_.\u0275\u0275advance(2),_.\u0275\u0275property("routerLinkActiveOptions",_.\u0275\u0275pureFunction0(2,Ie)),_.\u0275\u0275advance(3),_.\u0275\u0275property("routerLinkActiveOptions",_.\u0275\u0275pureFunction0(3,Ie)))},dependencies:[l.RouterLink,l.RouterLinkActive]})}}function qe(ge,ee){if(1&ge&&_.\u0275\u0275element(0,"cd-role-details",3),2&ge){const ae=_.\u0275\u0275nextContext();_.\u0275\u0275property("selection",ae.expandedRow)("scopes",ae.scopes)}}class St extends _e.D{constructor(ee,ae,U,L,y,x,W,me){super(),this.roleService=ee,this.scopeService=ae,this.emptyPipe=U,this.authStorageService=L,this.modalService=y,this.notificationService=x,this.urlBuilder=W,this.actionLabels=me,this.selection=new Ee.y,this.permission=this.authStorageService.getPermissions().user;const be={permission:"create",icon:ce.FI.add,routerLink:()=>this.urlBuilder.getCreate(),name:this.actionLabels.CREATE},we={permission:"create",icon:ce.FI.clone,name:this.actionLabels.CLONE,disable:()=>!this.selection.hasSingleSelection,click:()=>this.cloneRole()},dt={permission:"update",icon:ce.FI.edit,disable:()=>!this.selection.hasSingleSelection||this.selection.first().system,routerLink:()=>this.selection.first()&&this.urlBuilder.getEdit(this.selection.first().name),name:this.actionLabels.EDIT},k={permission:"delete",icon:ce.FI.destroy,disable:()=>!this.selection.hasSingleSelection||this.selection.first().system,click:()=>this.deleteRoleModal(),name:this.actionLabels.DELETE};this.tableActions=[be,we,dt,k]}ngOnInit(){this.columns=[{name:$localize`Name`,prop:"name",flexGrow:3},{name:$localize`Description`,prop:"description",flexGrow:5,pipe:this.emptyPipe},{name:$localize`System Role`,prop:"system",cellClass:"text-left",flexGrow:1,cellTransformation:K.x.checkIcon}]}getRoles(){(0,F.forkJoin)([this.roleService.list(),this.scopeService.list()]).subscribe(ee=>{this.roles=ee[0],this.scopes=ee[1]})}updateSelection(ee){this.selection=ee}deleteRole(ee){this.roleService.delete(ee).subscribe(()=>{this.getRoles(),this.modalService.dismissAll(),this.notificationService.show(P._.success,$localize`Deleted role '${ee}'`)},()=>{this.modalRef.componentInstance.stopLoadingSpinner()})}deleteRoleModal(){const ee=this.selection.first().name;this.modalRef=this.modalService.show(ue.D,{itemDescription:"Role",itemNames:[ee],submitAction:()=>this.deleteRole(ee)})}cloneRole(){const ee=this.selection.first().name;this.modalRef=this.modalService.show(C.b,{fields:[{type:"text",name:"newName",value:`${ee}_clone`,label:$localize`New name`,required:!0}],titleText:$localize`Clone Role`,submitButtonText:$localize`Clone Role`,onSubmit:ae=>{this.roleService.clone(ee,ae.newName).subscribe(()=>{this.getRoles(),this.notificationService.show(P._.success,$localize`Cloned role '${ae.newName}' from '${ee}'`)})}})}static{this.\u0275fac=function(ae){return new(ae||St)(_.\u0275\u0275directiveInject(v),_.\u0275\u0275directiveInject(R),_.\u0275\u0275directiveInject(Ce.y),_.\u0275\u0275directiveInject(Ue.v),_.\u0275\u0275directiveInject(He.V),_.\u0275\u0275directiveInject(g.J),_.\u0275\u0275directiveInject(it.E),_.\u0275\u0275directiveInject(f.Ss))}}static{this.\u0275cmp=_.\u0275\u0275defineComponent({type:St,selectors:[["cd-role-list"]],features:[_.\u0275\u0275ProvidersFeature([{provide:it.E,useValue:new it.E("user-management/roles")}]),_.\u0275\u0275InheritDefinitionFeature],decls:4,vars:6,consts:[["columnMode","flex","identifier","name","selectionType","single",3,"setExpandedRow","fetchData","updateSelection","data","columns","hasDetails"],[1,"table-actions",3,"permission","selection","tableActions"],[3,"selection","scopes",4,"cdTableDetail"],[3,"selection","scopes"]],template:function(ae,U){1&ae&&(_.\u0275\u0275element(0,"cd-user-tabs"),_.\u0275\u0275elementStart(1,"cd-table",0),_.\u0275\u0275listener("setExpandedRow",function(y){return U.setExpandedRow(y)})("fetchData",function(){return U.getRoles()})("updateSelection",function(y){return U.updateSelection(y)}),_.\u0275\u0275element(2,"cd-table-actions",1),_.\u0275\u0275template(3,qe,1,2,"cd-role-details",2),_.\u0275\u0275elementEnd()),2&ae&&(_.\u0275\u0275advance(),_.\u0275\u0275property("data",U.roles)("columns",U.columns)("hasDetails",!0),_.\u0275\u0275advance(),_.\u0275\u0275property("permission",U.permission)("selection",U.selection)("tableActions",U.tableActions))},dependencies:[ct.O,tt.j,Ge.N,De,Qe]})}}var at,Jt=r(89939),Lt=r.n(Jt),Zt=r(42902),zt=r(11549),Xt=r(36719),bt=r(34177),ft=r(66668),Tt=r(43808),nt=r(65784),We=r(76857);!function(ge){ge.editing="editing"}(at||(at={}));class Et{}var kt=r(55472),qt=r(41861),$t=r(70946);const pt=["removeSelfUserReadUpdatePermissionTpl"],Gt=()=>({md:4}),xt=ge=>({required:ge});function Rt(ge,ee){1&ge&&(_.\u0275\u0275elementStart(0,"span"),_.\u0275\u0275elementContainerStart(1),_.\u0275\u0275i18n(2,13),_.\u0275\u0275elementContainerEnd(),_.\u0275\u0275elementEnd())}function Tn(ge,ee){1&ge&&(_.\u0275\u0275elementStart(0,"span"),_.\u0275\u0275elementContainerStart(1),_.\u0275\u0275i18n(2,14),_.\u0275\u0275elementContainerEnd(),_.\u0275\u0275elementEnd())}function st(ge,ee){if(1&ge&&_.\u0275\u0275template(0,Rt,3,0,"span",45)(1,Tn,3,0,"span",45),2&ge){_.\u0275\u0275nextContext();const ae=_.\u0275\u0275reference(3),U=_.\u0275\u0275nextContext();_.\u0275\u0275property("ngIf",U.userForm.showError("username",ae,"required")),_.\u0275\u0275advance(),_.\u0275\u0275property("ngIf",U.userForm.showError("username",ae,"notUnique"))}}function Nn(ge,ee){if(1&ge&&(_.\u0275\u0275i18nStart(0,9,1),_.\u0275\u0275element(1,"cd-helper",46),_.\u0275\u0275i18nEnd()),2&ge){const ae=_.\u0275\u0275nextContext(2);_.\u0275\u0275advance(),_.\u0275\u0275propertyInterpolate("html",ae.passwordPolicyHelpText)}}function jt(ge,ee){1&ge&&(_.\u0275\u0275elementStart(0,"span",48),_.\u0275\u0275i18n(1,15),_.\u0275\u0275elementEnd())}function dn(ge,ee){1&ge&&(_.\u0275\u0275elementStart(0,"span",48),_.\u0275\u0275i18n(1,16),_.\u0275\u0275elementEnd())}function Nt(ge,ee){if(1&ge&&(_.\u0275\u0275elementStart(0,"span",48),_.\u0275\u0275text(1),_.\u0275\u0275elementEnd()),2&ge){const ae=_.\u0275\u0275nextContext(3);_.\u0275\u0275advance(),_.\u0275\u0275textInterpolate1(" ",ae.passwordValuation," ")}}function Fn(ge,ee){if(1&ge&&_.\u0275\u0275template(0,jt,2,0,"span",47)(1,dn,2,0,"span",47)(2,Nt,2,1,"span",47),2&ge){_.\u0275\u0275nextContext();const ae=_.\u0275\u0275reference(3),U=_.\u0275\u0275nextContext();_.\u0275\u0275property("ngIf",U.userForm.showError("password",ae,"match")),_.\u0275\u0275advance(),_.\u0275\u0275property("ngIf",U.userForm.showError("password",ae,"required")),_.\u0275\u0275advance(),_.\u0275\u0275property("ngIf",U.userForm.showError("password",ae,"passwordPolicy"))}}function Wt(ge,ee){1&ge&&(_.\u0275\u0275elementStart(0,"span",48),_.\u0275\u0275i18n(1,17),_.\u0275\u0275elementEnd())}function j(ge,ee){1&ge&&(_.\u0275\u0275elementStart(0,"span",48),_.\u0275\u0275i18n(1,18),_.\u0275\u0275elementEnd())}function he(ge,ee){if(1&ge&&_.\u0275\u0275template(0,Wt,2,0,"span",47)(1,j,2,0,"span",47),2&ge){_.\u0275\u0275nextContext();const ae=_.\u0275\u0275reference(3),U=_.\u0275\u0275nextContext();_.\u0275\u0275property("ngIf",U.userForm.showError("confirmpassword",ae,"match")),_.\u0275\u0275advance(),_.\u0275\u0275property("ngIf",U.userForm.showError("confirmpassword",ae,"required"))}}function Y(ge,ee){1&ge&&(_.\u0275\u0275elementStart(0,"cd-helper",52)(1,"span"),_.\u0275\u0275text(2," The Dashboard setting defining the expiration interval of passwords is currently set to "),_.\u0275\u0275elementStart(3,"strong"),_.\u0275\u0275text(4,"0"),_.\u0275\u0275elementEnd(),_.\u0275\u0275text(5,". This means if a date is set, the user password will only expire once. "),_.\u0275\u0275elementEnd(),_.\u0275\u0275elementStart(6,"span"),_.\u0275\u0275text(7,"Consider configuring the Dashboard setting "),_.\u0275\u0275elementStart(8,"a",53),_.\u0275\u0275text(9,"USER_PWD_EXPIRATION_SPAN"),_.\u0275\u0275elementEnd(),_.\u0275\u0275text(10," in order to let passwords expire periodically. "),_.\u0275\u0275elementEnd()())}function lt(ge,ee){1&ge&&(_.\u0275\u0275elementStart(0,"span",48),_.\u0275\u0275i18n(1,19),_.\u0275\u0275elementEnd())}function vn(ge,ee){if(1&ge&&(_.\u0275\u0275elementStart(0,"div",31)(1,"cds-text-label",49),_.\u0275\u0275text(2),_.\u0275\u0275template(3,Y,11,0,"cd-helper",50),_.\u0275\u0275element(4,"cd-date-time-picker",51),_.\u0275\u0275elementEnd(),_.\u0275\u0275template(5,lt,2,0,"span",47),_.\u0275\u0275elementEnd()),2&ge){_.\u0275\u0275nextContext();const ae=_.\u0275\u0275reference(3),U=_.\u0275\u0275nextContext();_.\u0275\u0275advance(),_.\u0275\u0275property("ngClass",_.\u0275\u0275pureFunction1(7,xt,U.pwdExpirationSettings.pwdExpirationSpan>0)),_.\u0275\u0275advance(),_.\u0275\u0275textInterpolate1("","Password Expiration Date"," "),_.\u0275\u0275advance(),_.\u0275\u0275property("ngIf",0==U.pwdExpirationSettings.pwdExpirationSpan),_.\u0275\u0275advance(),_.\u0275\u0275property("control",U.userForm.get("pwdExpirationDate"))("hasTime",!1)("defaultDate",U.passwordexp),_.\u0275\u0275advance(),_.\u0275\u0275property("ngIf",U.userForm.showError("pwdExpirationDate",ae,"required"))}}function jn(ge,ee){1&ge&&(_.\u0275\u0275elementStart(0,"span",48),_.\u0275\u0275i18n(1,20),_.\u0275\u0275elementEnd())}function un(ge,ee){if(1&ge&&_.\u0275\u0275template(0,jn,2,0,"span",47),2&ge){_.\u0275\u0275nextContext();const ae=_.\u0275\u0275reference(3),U=_.\u0275\u0275nextContext();_.\u0275\u0275property("ngIf",U.userForm.showError("email",ae,"email"))}}function Ae(ge,ee){if(1&ge&&(_.\u0275\u0275elementStart(0,"div",31)(1,"cds-combo-box",54),_.\u0275\u0275i18nStart(2,21),_.\u0275\u0275element(3,"cds-dropdown-list"),_.\u0275\u0275i18nEnd(),_.\u0275\u0275elementEnd()()),2&ge){const ae=_.\u0275\u0275nextContext(2);_.\u0275\u0275advance(),_.\u0275\u0275property("appendInline",!0)("items",ae.allRoles)}}function pn(ge,ee){1&ge&&(_.\u0275\u0275elementStart(0,"div",31)(1,"cds-checkbox",55),_.\u0275\u0275i18n(2,22),_.\u0275\u0275elementEnd()())}function Mn(ge,ee){1&ge&&(_.\u0275\u0275elementStart(0,"div",31)(1,"cds-checkbox",56),_.\u0275\u0275i18n(2,23),_.\u0275\u0275elementEnd()())}function mn(ge,ee){if(1&ge){const ae=_.\u0275\u0275getCurrentView();_.\u0275\u0275elementContainerStart(0),_.\u0275\u0275elementStart(1,"form",29,2)(4,"div",30),_.\u0275\u0275i18n(5,7),_.\u0275\u0275pipe(6,"titlecase"),_.\u0275\u0275pipe(7,"upperFirst"),_.\u0275\u0275elementEnd(),_.\u0275\u0275elementStart(8,"div",31)(9,"cds-text-label",32),_.\u0275\u0275i18nStart(10,8),_.\u0275\u0275element(11,"input",33),_.\u0275\u0275i18nEnd(),_.\u0275\u0275elementEnd(),_.\u0275\u0275template(12,st,2,2,"ng-template",null,3,_.\u0275\u0275templateRefExtractor),_.\u0275\u0275elementEnd(),_.\u0275\u0275elementStart(14,"div",31)(15,"cds-password-label",34),_.\u0275\u0275i18nStart(16,9),_.\u0275\u0275template(17,Nn,2,1,"cd-helper",35),_.\u0275\u0275element(18,"input",36),_.\u0275\u0275i18nEnd(),_.\u0275\u0275elementEnd(),_.\u0275\u0275template(19,Fn,3,3,"ng-template",null,4,_.\u0275\u0275templateRefExtractor),_.\u0275\u0275elementEnd(),_.\u0275\u0275elementStart(21,"div",31)(22,"cds-password-label",37),_.\u0275\u0275i18nStart(23,10),_.\u0275\u0275element(24,"input",38),_.\u0275\u0275i18nEnd(),_.\u0275\u0275elementEnd(),_.\u0275\u0275template(25,he,2,2,"ng-template",null,5,_.\u0275\u0275templateRefExtractor),_.\u0275\u0275elementEnd(),_.\u0275\u0275template(27,vn,6,9,"div",39),_.\u0275\u0275elementStart(28,"div",31)(29,"cds-text-label",40),_.\u0275\u0275i18nStart(30,11),_.\u0275\u0275element(31,"input",41),_.\u0275\u0275i18nEnd(),_.\u0275\u0275elementEnd()(),_.\u0275\u0275elementStart(32,"div",31)(33,"cds-text-label",42),_.\u0275\u0275i18nStart(34,12),_.\u0275\u0275element(35,"input",43),_.\u0275\u0275i18nEnd(),_.\u0275\u0275elementEnd(),_.\u0275\u0275template(36,un,1,1,"ng-template",null,6,_.\u0275\u0275templateRefExtractor),_.\u0275\u0275elementEnd(),_.\u0275\u0275template(38,Ae,4,2,"div",39)(39,pn,3,0,"div",39)(40,Mn,3,0,"div",39),_.\u0275\u0275elementStart(41,"cd-form-button-panel",44),_.\u0275\u0275pipe(42,"titlecase"),_.\u0275\u0275pipe(43,"upperFirst"),_.\u0275\u0275listener("submitActionEvent",function(){_.\u0275\u0275restoreView(ae);const L=_.\u0275\u0275nextContext();return _.\u0275\u0275resetView(L.submit())}),_.\u0275\u0275elementEnd()(),_.\u0275\u0275elementContainerEnd()}if(2&ge){const ae=_.\u0275\u0275reference(13),U=_.\u0275\u0275reference(20),L=_.\u0275\u0275reference(26),y=_.\u0275\u0275reference(37),x=_.\u0275\u0275nextContext();_.\u0275\u0275advance(),_.\u0275\u0275property("formGroup",x.userForm),_.\u0275\u0275advance(6),_.\u0275\u0275i18nExp(_.\u0275\u0275pipeBind1(6,19,x.action))(_.\u0275\u0275pipeBind1(7,21,x.resource)),_.\u0275\u0275i18nApply(5),_.\u0275\u0275advance(2),_.\u0275\u0275property("invalid",!x.userForm.controls.username.valid&&x.userForm.controls.username.dirty)("invalidText",ae),_.\u0275\u0275advance(2),_.\u0275\u0275property("invalid",!x.userForm.controls.username.valid&&x.userForm.controls.username.dirty),_.\u0275\u0275advance(4),_.\u0275\u0275property("invalid",!x.userForm.controls.password.valid&&x.userForm.controls.password.dirty)("invalidText",U),_.\u0275\u0275advance(2),_.\u0275\u0275property("ngIf",x.passwordPolicyHelpText.length>0),_.\u0275\u0275advance(5),_.\u0275\u0275property("invalid",!x.userForm.controls.confirmpassword.valid&&x.userForm.controls.confirmpassword.dirty)("invalidText",L),_.\u0275\u0275advance(5),_.\u0275\u0275property("ngIf",!x.authStorageService.isSSO()),_.\u0275\u0275advance(6),_.\u0275\u0275property("invalid",!x.userForm.controls.email.valid&&x.userForm.controls.email.dirty)("invalidText",y),_.\u0275\u0275advance(5),_.\u0275\u0275property("ngIf",x.allRoles),_.\u0275\u0275advance(),_.\u0275\u0275property("ngIf",!x.isCurrentUser()),_.\u0275\u0275advance(),_.\u0275\u0275property("ngIf",!x.isCurrentUser()&&!x.authStorageService.isSSO()),_.\u0275\u0275advance(),_.\u0275\u0275property("form",x.userForm)("submitText",_.\u0275\u0275pipeBind1(42,23,x.action)+" "+_.\u0275\u0275pipeBind1(43,25,x.resource))}}function Kt(ge,ee){1&ge&&(_.\u0275\u0275elementStart(0,"p")(1,"strong"),_.\u0275\u0275i18n(2,24),_.\u0275\u0275elementEnd()(),_.\u0275\u0275element(3,"br"),_.\u0275\u0275elementStart(4,"p"),_.\u0275\u0275i18n(5,25),_.\u0275\u0275elementEnd(),_.\u0275\u0275elementContainerStart(6),_.\u0275\u0275i18n(7,26),_.\u0275\u0275elementContainerEnd())}function pe(ge,ee){if(1&ge&&_.\u0275\u0275element(0,"cd-date-time-picker",57),2&ge){const ae=_.\u0275\u0275nextContext();_.\u0275\u0275property("control",ae.userForm.get("pwdExpirationDate"))("hasTime",!1)}}class Ot extends M.g{constructor(ee,ae,U,L,y,x,W,me,be,we,dt,k){super(),this.authService=ee,this.authStorageService=ae,this.route=U,this.router=L,this.modalService=y,this.roleService=x,this.userService=W,this.notificationService=me,this.actionLabels=be,this.passwordPolicyService=we,this.formBuilder=dt,this.settingsService=k,this.userFormMode=at,this.messages=new ft.z({empty:$localize`There are no roles.`}),this.passwordPolicyHelpText="",this.icons=ce.FI,this.pwdExpirationFormat="YYYY-MM-DD",this.passwordexp=!1,this.resource=$localize`user`,this.createForm(),this.messages=new ft.z({empty:$localize`There are no roles.`})}createForm(){this.passwordPolicyService.getHelpText().subscribe(ee=>{this.passwordPolicyHelpText=ee}),this.userForm=this.formBuilder.group({username:["",[e.Validators.required],[m.xQ.unique(this.userService.validateUserName,this.userService)]],name:[""],password:["",[],[m.xQ.passwordPolicy(this.userService,()=>this.userForm.getValue("username"),(ee,ae,U)=>{this.passwordStrengthLevelClass=this.passwordPolicyService.mapCreditsToCssClass(ae),this.passwordValuation=ut().defaultTo(U,"")})]],confirmpassword:[""],pwdExpirationDate:[""],email:["",[m.xQ.email]],roles:[[]],enabled:[!0,[e.Validators.required]],pwdUpdateRequired:[!0]},{validators:[m.xQ.match("password","confirmpassword")]})}ngOnInit(){this.router.url.startsWith("/user-management/users/edit")?(this.mode=this.userFormMode.editing,this.action=this.actionLabels.EDIT,this.passwordexp=!1):(this.action=this.actionLabels.CREATE,this.passwordexp=!0);const ee=[this.roleService.list(),this.settingsService.getStandardSettings()];(0,F.forkJoin)(ee).subscribe(ae=>{if(this.allRoles=ut().map(ae[0],U=>(U.enabled=!0,U.content=`${U.name}, ${U.description}`,U)),this.pwdExpirationSettings=new nt.b(ae[1]),this.mode===this.userFormMode.editing)this.initEdit();else{if(this.pwdExpirationSettings.pwdExpirationSpan>0){const U=this.userForm.get("pwdExpirationDate"),L=Lt()();L.add(this.pwdExpirationSettings.pwdExpirationSpan,"day"),U.setValue(L.format(this.pwdExpirationFormat)),U.setValidators([e.Validators.required])}this.loadingReady()}})}initEdit(){this.disableForEdit(),this.route.params.subscribe(ee=>{const ae=ee.username;this.userService.get(ae).subscribe(U=>{this.response=ut().cloneDeep(U),this.setResponse(U),this.loadingReady()})})}disableForEdit(){this.userForm.get("username").disable()}setResponse(ee){["username","name","email","roles","enabled","pwdUpdateRequired"].forEach(U=>this.userForm.get(U).setValue(ee[U]));const ae=ee.pwdExpirationDate;ae?(this.passwordexp=!1,this.userForm.get("pwdExpirationDate").setValue(Lt()(1e3*ae).format(this.pwdExpirationFormat))):this.passwordexp=!0}getRequest(){const ee=new Et;["username","password","name","email","roles","enabled","pwdUpdateRequired"].forEach(U=>{ee[U]=this.userForm.get(U).value});const ae=this.userForm.get("pwdExpirationDate").value;if(ae){this.passwordexp=!1;const U=Lt()(ae,this.pwdExpirationFormat);(this.mode!==this.userFormMode.editing||this.response.pwdExpirationDate!==U.unix())&&U.set({hour:23,minute:59,second:59}),ee.pwdExpirationDate=U.unix()}return ee}createAction(){const ee=this.getRequest();this.userService.create(ee).subscribe(()=>{this.notificationService.show(P._.success,$localize`Created user '${ee.username}'`),this.router.navigate(["/user-management/users"])},()=>{this.userForm.setErrors({cdSubmitButton:!0})})}editAction(){if(this.isUserRemovingNeededRolePermissions()){const ee={titleText:$localize`Update user`,buttonText:$localize`Continue`,bodyTpl:this.removeSelfUserReadUpdatePermissionTpl,onSubmit:()=>{this.modalRef.close(),this.doEditAction()},onCancel:()=>{this.userForm.setErrors({cdSubmitButton:!0}),this.userForm.get("roles").reset(this.userForm.get("roles").value)}};this.modalRef=this.modalService.show(bt.M,ee)}else this.doEditAction()}isCurrentUser(){return this.authStorageService.getUsername()===this.userForm.getValue("username")}isUserChangingRoles(){return this.isCurrentUser()&&this.response&&!ut().isEqual(this.response.roles,this.userForm.getValue("roles"))}isUserRemovingNeededRolePermissions(){return this.isCurrentUser()&&!this.hasUserReadUpdatePermissions(this.userForm.getValue("roles"))}hasUserReadUpdatePermissions(ee=[]){for(const ae of this.allRoles)if(-1!==ee.indexOf(ae.name)&&ae.scopes_permissions.user){const U=ae.scopes_permissions.user;return["read","update"].every(L=>-1!==U.indexOf(L))}return!1}doEditAction(){const ee=this.getRequest();this.userService.update(ee).subscribe(()=>{this.isUserChangingRoles()?this.authService.logout(()=>{this.notificationService.show(P._.info,$localize`You were automatically logged out because your roles have been changed.`)}):(this.notificationService.show(P._.success,$localize`Updated user '${ee.username}'`),this.router.navigate(["/user-management/users"]))},()=>{this.userForm.setErrors({cdSubmitButton:!0})})}clearExpirationDate(){this.userForm.get("pwdExpirationDate").setValue(void 0)}submit(){this.mode===this.userFormMode.editing?this.editAction():this.createAction()}static{this.\u0275fac=function(ae){return new(ae||Ot)(_.\u0275\u0275directiveInject(Zt.u),_.\u0275\u0275directiveInject(Ue.v),_.\u0275\u0275directiveInject(l.ActivatedRoute),_.\u0275\u0275directiveInject(l.Router),_.\u0275\u0275directiveInject(He.V),_.\u0275\u0275directiveInject(v),_.\u0275\u0275directiveInject(Xt.D),_.\u0275\u0275directiveInject(g.J),_.\u0275\u0275directiveInject(f.Ss),_.\u0275\u0275directiveInject(We.$),_.\u0275\u0275directiveInject(Tt.$),_.\u0275\u0275directiveInject(zt.h))}}static{this.\u0275cmp=_.\u0275\u0275defineComponent({type:Ot,selectors:[["cd-user-form"]],viewQuery:function(ae,U){if(1&ae&&_.\u0275\u0275viewQuery(pt,7),2&ae){let L;_.\u0275\u0275queryRefresh(L=_.\u0275\u0275loadQuery())&&(U.removeSelfUserReadUpdatePermissionTpl=L.first)}},features:[_.\u0275\u0275InheritDefinitionFeature],decls:6,vars:3,consts:()=>{let ee,ae,U,L,y,x,W,me,be,we,dt,k,H,V,se,Ne,Ve,et,gt,Ft,Pt,_t,Re;return ee=$localize`:␟d0f98417d1898a07710481ed5757bd2f6086fcce␟3658527748062757833:Username...`,ae=$localize`:␟84a641424aae2a309955100886dd7c25c8dadd9a␟2428983624665954611:White spaces at the beginning and end will be trimmed`,U=$localize`:form title␟a90ab37a86361510c6418a0b01e5fb53b18aad60␟4895964714444299563:${"\ufffd0\ufffd"}:INTERPOLATION: ${"\ufffd1\ufffd"}:INTERPOLATION_1: `,L=$localize`:␟9b81d1565fc336c421fb6d21007dea69c0c80e73␟5802190649108961439:Username ${"\ufffd#11\ufffd\ufffd/#11\ufffd"}:TAG_INPUT:`,y=$localize`:␟f7e5808684efb62214206987dc1f013c04dd1cec␟9064418299331996881:Password ${"\ufffd*17:1\ufffd\ufffd#1:1\ufffd"}:START_TAG_CD_HELPER:${"\ufffd/#1:1\ufffd\ufffd/*17:1\ufffd"}:CLOSE_TAG_CD_HELPER:${"\ufffd#18\ufffd\ufffd/#18\ufffd"}:TAG_INPUT:`,x=$localize`:␟b2ca45e9166224e612c8675c26c8daba9e527d82␟5155653498633865445: Confirm password ${"\ufffd#24\ufffd\ufffd/#24\ufffd"}:TAG_INPUT:`,W=$localize`:␟ec84ec8c5cb1a4abcefc9178e646b1250b6c725a␟381318831057620751: Full Name ${"\ufffd#31\ufffd\ufffd/#31\ufffd"}:TAG_INPUT:`,me=$localize`:␟9973063d37883da0a3d09a3fe1529b87acadc2b9␟5941153537997503770: Email ${"\ufffd#35\ufffd\ufffd/#35\ufffd"}:TAG_INPUT:`,be=$localize`:␟2baaf26de6d89a49e51aa5322a3806eec4d3c974␟4348162663561516656: This field is required. `,we=$localize`:␟801b64959505a411efe743a0ef42ad9089990ec0␟6676953324371627613: The username already exists. `,dt=$localize`:␟7c76f7634857dc8d8e3cfa4d3b80b3d9ef7b6472␟8064620653299814233:Password confirmation doesn't match the password. `,k=$localize`:␟7cbdabcece469fab89cfa687ab152bca18b97498␟1417693714872528491:This field is required.`,H=$localize`:␟cbb979e63ba50e0ca3adfa09cbdcaefd0853fca1␟5208015151248745883:Password confirmation doesn't match the password.`,V=$localize`:␟7cbdabcece469fab89cfa687ab152bca18b97498␟1417693714872528491:This field is required.`,se=$localize`:␟bd48784de86aedc1d532eebf256712fbaad637b9␟6458079475653544585:This field is required. `,Ne=$localize`:␟c522f4284a892ad5ccf31a4d5cfe4b79d5f64f97␟7949963887964877562:Invalid email. `,Ve=$localize`:␟8f832e33562e2225e53a2d2db9afc0c430a6eba5␟8987328793693830726:Select Roles...`,et=$localize`:␟12f37de6622cf2e15ac960f3dd14502e8581733a␟2425863206688252134:${"\ufffd#3\ufffd"}:START_TAG_CDS_DROPDOWN_LIST:${"\ufffd/#3\ufffd"}:CLOSE_TAG_CDS_DROPDOWN_LIST:`,gt=$localize`:␟c5b7de02720303d51b53e52b5fc49d2633d00058␟2310793936528648555:Enabled `,Ft=$localize`:␟8a006436f574a251e691a60814327ae4af2107ff␟5892191717737504117:User must change password at next login `,Pt=$localize`:␟0051a3479d3ba79135c16dc8cc017950a2cce821␟2742479296280482153:You are about to remove "user read / update" permissions from your own user.`,_t=$localize`:␟af4bf9fcb256853f14cf947eb1deb8d7f176d3f9␟4606622605316013506:If you continue, you will no longer be able to add or remove roles from any user.`,Re=$localize`:␟7d1dcf2a9146caac0581329acf94806ec69a89a5␟1877522221356492058:Are you sure you want to continue?`,[["removeSelfUserReadUpdatePermissionTpl",""],["popContent",""],["frm","ngForm","formDir","ngForm"],["usernameError",""],["passwordError",""],["confirmpasswordError",""],["emailError",""],U,L,y,x,W,me,be,we,dt,k,H,V,se,Ne,et,gt,Ft,Pt,_t,Re,["cdsCol","",3,"columnNumbers"],[4,"cdFormLoading"],["novalidate","",3,"formGroup"],[1,"form-header"],[1,"form-item"],["labelInputID","username","cdRequiredField","Username",3,"invalid","invalidText"],["cdsText","","placeholder",ee,"id","username","formControlName","username","autofocus","","ngbTooltip",ae,"cdTrim","",3,"invalid"],["labelInputID","password","label","Password...",3,"invalid","invalidText"],["class","text-pre-wrap",3,"html",4,"ngIf"],["cdsPassword","","type","password","placeholder","Password...","id","password","autocomplete","new-password","formControlName","password"],["labelInputID","confirmpassword","label","Confirm password...",3,"invalid","invalidText"],["cdsPassword","","type","password","placeholder","Confirm password...","id","confirmpassword","formControlName","confirmpassword"],["class","form-item",4,"ngIf"],["for","name"],["cdsText","","type","text","placeholder","Full Name...","id","name","formControlName","name"],["for","email",3,"invalid","invalidText"],["cdsText","","type","email","placeholder","Email...","id","email","formControlName","email"],["wrappingClass","text-right",3,"submitActionEvent","form","submitText"],[4,"ngIf"],[1,"text-pre-wrap",3,"html"],["class","invalid-feedback",4,"ngIf"],[1,"invalid-feedback"],[3,"ngClass"],["class","text-pre-wrap",4,"ngIf"],["placeHolder","Password expiration date",3,"control","hasTime","defaultDate"],[1,"text-pre-wrap"],["routerLink","/mgr-modules/edit/dashboard",1,"alert-link"],["label","Roles","type","multi","selectionFeedback","top-after-reopen","for","roles","formControlName","roles","id","roles","placeholder",Ve,"itemValueKey","name",3,"appendInline","items"],["id","enabled","formControlName","enabled","name","enabled"],["id","pwdUpdateRequired","formControlName","pwdUpdateRequired","name","pwdUpdateRequired"],[3,"control","hasTime"]]},template:function(ae,U){1&ae&&(_.\u0275\u0275elementStart(0,"div",27),_.\u0275\u0275template(1,mn,44,27,"ng-container",28),_.\u0275\u0275elementEnd(),_.\u0275\u0275template(2,Kt,8,0,"ng-template",null,0,_.\u0275\u0275templateRefExtractor)(4,pe,1,2,"ng-template",null,1,_.\u0275\u0275templateRefExtractor)),2&ae&&(_.\u0275\u0275property("columnNumbers",_.\u0275\u0275pureFunction0(2,Gt)),_.\u0275\u0275advance(),_.\u0275\u0275property("cdFormLoading",U.loading))},dependencies:[a.NgClass,a.NgIf,e.\u0275NgNoValidate,e.DefaultValueAccessor,e.NgControlStatus,e.NgControlStatusGroup,e.FormGroupDirective,e.FormControlName,kt.m,qt.P,c.e,B.B,$t.c,q.G,Q.S,G.E,D.P,oe.TextInputLabelComponent,oe.PasswordInputLabelComponent,oe.TextInput,oe.PasswordInput,oe.ColumnDirective,oe.Checkbox,l.RouterLink,T.NgbTooltip,oe.ComboBox,oe.DropdownList,a.TitleCasePipe,fe.r]})}}var Wn=r(22453),Kn=r(71138),In=r(64346);const Qn=["userRolesTpl"],Yn=["warningTpl"],Jn=["durationTpl"];function Zn(ge,ee){if(1&ge&&(_.\u0275\u0275elementStart(0,"span"),_.\u0275\u0275text(1),_.\u0275\u0275elementEnd()),2&ge){const ae=ee.$implicit,U=ee.last;_.\u0275\u0275advance(),_.\u0275\u0275textInterpolate2(" ",ae,"",U?"":", "," ")}}function vo(ge,ee){if(1&ge&&_.\u0275\u0275template(0,Zn,2,2,"span",5),2&ge){const ae=ee.data.value;_.\u0275\u0275property("ngForOf",ae)}}function fn(ge,ee){if(1&ge&&(_.\u0275\u0275elementStart(0,"div",6)(1,"div",7),_.\u0275\u0275text(2),_.\u0275\u0275elementEnd()()),2&ge){const ae=ee.data.value,U=ee.data.row,L=_.\u0275\u0275nextContext();_.\u0275\u0275classProp("border-danger",U.remainingDays<L.expirationDangerAlert)("border-warning",U.remainingDays<L.expirationWarningAlert&&U.remainingDays>=L.expirationDangerAlert),_.\u0275\u0275advance(2),_.\u0275\u0275textInterpolate1(" ",ae," ")}}function Qt(ge,ee){if(1&ge&&_.\u0275\u0275element(0,"i",10),2&ge){const ae=_.\u0275\u0275nextContext().data.row,U=_.\u0275\u0275nextContext();_.\u0275\u0275classMap(U.icons.warning),_.\u0275\u0275classProp("icon-danger-color",ae.remainingDays<U.expirationDangerAlert)("icon-warning-color",ae.remainingDays<U.expirationWarningAlert&&ae.remainingDays>=U.expirationDangerAlert)}}function Rn(ge,ee){if(1&ge&&(_.\u0275\u0275template(0,Qt,1,7,"i",8),_.\u0275\u0275elementStart(1,"span",9),_.\u0275\u0275pipe(2,"cdDate"),_.\u0275\u0275text(3),_.\u0275\u0275pipe(4,"duration"),_.\u0275\u0275elementEnd()),2&ge){const ae=ee.data.value,U=ee.data.row,L=_.\u0275\u0275nextContext();_.\u0275\u0275property("ngIf",U.remainingDays<L.expirationWarningAlert),_.\u0275\u0275advance(),_.\u0275\u0275propertyInterpolate("title",_.\u0275\u0275pipeBind1(2,3,ae)),_.\u0275\u0275advance(2),_.\u0275\u0275textInterpolate(_.\u0275\u0275pipeBind1(4,5,U.remainingTimeWithoutSeconds/1e3))}}class It{constructor(ee,ae,U,L,y,x,W,me){this.userService=ee,this.emptyPipe=ae,this.modalService=U,this.notificationService=L,this.authStorageService=y,this.urlBuilder=x,this.settingsService=W,this.actionLabels=me,this.selection=new Ee.y,this.icons=ce.FI,this.permission=this.authStorageService.getPermissions().user;const be={permission:"create",icon:ce.FI.add,routerLink:()=>this.urlBuilder.getCreate(),name:this.actionLabels.CREATE},we={permission:"update",icon:ce.FI.edit,routerLink:()=>this.selection.first()&&this.urlBuilder.getEdit(this.selection.first().username),name:this.actionLabels.EDIT},dt={permission:"delete",icon:ce.FI.destroy,click:()=>this.deleteUserModal(),name:this.actionLabels.DELETE};this.tableActions=[be,we,dt]}ngOnInit(){this.columns=[{name:$localize`Username`,prop:"username",flexGrow:1,cellTemplate:this.warningTpl},{name:$localize`Name`,prop:"name",flexGrow:1,pipe:this.emptyPipe},{name:$localize`Email`,prop:"email",flexGrow:1,pipe:this.emptyPipe},{name:$localize`Roles`,prop:"roles",flexGrow:1,cellTemplate:this.userRolesTpl},{name:$localize`Enabled`,prop:"enabled",flexGrow:1,cellTransformation:K.x.checkIcon},{name:$localize`Password expires`,prop:"pwdExpirationDate",flexGrow:1,cellTemplate:this.durationTpl}];this.settingsService.getValues(["USER_PWD_EXPIRATION_WARNING_1","USER_PWD_EXPIRATION_WARNING_2"]).subscribe(ae=>{this.expirationWarningAlert=ae.USER_PWD_EXPIRATION_WARNING_1,this.expirationDangerAlert=ae.USER_PWD_EXPIRATION_WARNING_2})}getUsers(){this.userService.list().subscribe(ee=>{ee.forEach(ae=>{ae.remainingTimeWithoutSeconds=0,ae.pwdExpirationDate&&ae.pwdExpirationDate>0&&(ae.pwdExpirationDate=1e3*ae.pwdExpirationDate,ae.remainingTimeWithoutSeconds=this.getRemainingTimeWithoutSeconds(ae.pwdExpirationDate),ae.remainingDays=this.getRemainingDays(ae.pwdExpirationDate))}),this.users=ee})}updateSelection(ee){this.selection=ee}deleteUser(ee){this.userService.delete(ee).subscribe(()=>{this.getUsers(),this.modalService.dismissAll(),this.notificationService.show(P._.success,$localize`Deleted user '${ee}'`)},()=>{this.modalRef.componentInstance.stopLoadingSpinner()})}deleteUserModal(){const ee=this.authStorageService.getUsername(),ae=this.selection.first().username;ee!==ae?this.modalRef=this.modalService.show(ue.D,{impact:Wn.r.high,itemDescription:"User",itemNames:[ae],submitAction:()=>this.deleteUser(ae)}):this.notificationService.show(P._.error,$localize`Failed to delete user '${ae}'`,$localize`You are currently logged in as '${ae}'.`)}getWarningIconClass(ee){return null===ee||this.expirationWarningAlert>10?"":this.getRemainingDays(ee)<=this.expirationDangerAlert?"icon-danger-color":"icon-warning-color"}getWarningClass(ee){return null===ee||this.expirationWarningAlert>10?"":this.getRemainingDays(ee)<=this.expirationDangerAlert?"border-danger":"border-warning"}getRemainingDays(ee){if(void 0===ee||null==ee)return;if(ee<0)return 0;return Math.max(0,Math.floor(this.getRemainingTime(ee)/864e5))}getRemainingTimeWithoutSeconds(ee){const ae=this.getRemainingTime(ee);return 60*Math.floor(ae/6e4)*1e3}getRemainingTime(ee){return ee-Date.now()}static{this.\u0275fac=function(ae){return new(ae||It)(_.\u0275\u0275directiveInject(Xt.D),_.\u0275\u0275directiveInject(Ce.y),_.\u0275\u0275directiveInject(He.V),_.\u0275\u0275directiveInject(g.J),_.\u0275\u0275directiveInject(Ue.v),_.\u0275\u0275directiveInject(it.E),_.\u0275\u0275directiveInject(zt.h),_.\u0275\u0275directiveInject(f.Ss))}}static{this.\u0275cmp=_.\u0275\u0275defineComponent({type:It,selectors:[["cd-user-list"]],viewQuery:function(ae,U){if(1&ae&&(_.\u0275\u0275viewQuery(Qn,7),_.\u0275\u0275viewQuery(Yn,7),_.\u0275\u0275viewQuery(Jn,7)),2&ae){let L;_.\u0275\u0275queryRefresh(L=_.\u0275\u0275loadQuery())&&(U.userRolesTpl=L.first),_.\u0275\u0275queryRefresh(L=_.\u0275\u0275loadQuery())&&(U.warningTpl=L.first),_.\u0275\u0275queryRefresh(L=_.\u0275\u0275loadQuery())&&(U.durationTpl=L.first)}},features:[_.\u0275\u0275ProvidersFeature([{provide:it.E,useValue:new it.E("user-management/users")}])],decls:9,vars:5,consts:()=>{let ee;return ee=$localize`:␟94f5ab81f04c2db36f5a37ec83693b1d47e2c8aa␟8478245417476296973:User's password is about to expire`,[["userRolesTpl",""],["warningTpl",""],["durationTpl",""],["columnMode","flex","identifier","username","selectionType","single",3,"fetchData","updateSelection","data","columns"],[1,"table-actions",3,"permission","selection","tableActions"],[4,"ngFor","ngForOf"],[1,"border-margin"],[1,"warning-content"],["title",ee,3,"icon-danger-color","icon-warning-color","class",4,"ngIf"],[3,"title"],["title",ee]]},template:function(ae,U){if(1&ae){const L=_.\u0275\u0275getCurrentView();_.\u0275\u0275element(0,"cd-user-tabs"),_.\u0275\u0275elementStart(1,"cd-table",3),_.\u0275\u0275listener("fetchData",function(){return _.\u0275\u0275restoreView(L),_.\u0275\u0275resetView(U.getUsers())})("updateSelection",function(x){return _.\u0275\u0275restoreView(L),_.\u0275\u0275resetView(U.updateSelection(x))}),_.\u0275\u0275element(2,"cd-table-actions",4),_.\u0275\u0275elementEnd(),_.\u0275\u0275template(3,vo,1,1,"ng-template",null,0,_.\u0275\u0275templateRefExtractor)(5,fn,3,5,"ng-template",null,1,_.\u0275\u0275templateRefExtractor)(7,Rn,5,7,"ng-template",null,2,_.\u0275\u0275templateRefExtractor)}2&ae&&(_.\u0275\u0275advance(),_.\u0275\u0275property("data",U.users)("columns",U.columns),_.\u0275\u0275advance(),_.\u0275\u0275property("permission",U.permission)("selection",U.selection)("tableActions",U.tableActions))},dependencies:[a.NgForOf,a.NgIf,ct.O,tt.j,Qe,Kn.Q,In.b],styles:[".border-margin[_ngcontent-%COMP%]{border-left:3px solid transparent;height:calc(100% + 10px);margin-bottom:-5px;margin-left:-5px;margin-top:-5px}.warning-content[_ngcontent-%COMP%]{height:100%;padding-bottom:5px;padding-left:5px;padding-top:5px}"]})}}var An=r(8924),Dn=r(8205),qn={elem:"svg",attrs:{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 32",fill:"currentColor",width:32,height:32},content:[{elem:"path",attrs:{d:"M16,2A14.1725,14.1725,0,0,0,2,16,14.1725,14.1725,0,0,0,16,30,14.1725,14.1725,0,0,0,30,16,14.1725,14.1725,0,0,0,16,2Zm8,15H17v7H15V17H8V15h7V8h2v7h7Z"}},{elem:"path",attrs:{fill:"none",d:"M24 17L17 17 17 24 15 24 15 17 8 17 8 15 15 15 15 8 17 8 17 15 24 15 24 17z","data-icon-path":"inner-path"}}],name:"add--filled",size:32},eo=r(20527),to=r(66568),no=r(22164);class en{constructor(ee){this.iconService=ee,this.iconService.registerAll([An.A,Dn.A,qn,eo.A,to.A,no.A])}static{this.\u0275fac=function(ae){return new(ae||en)(_.\u0275\u0275inject(oe.IconService))}}static{this.\u0275mod=_.\u0275\u0275defineNgModule({type:en})}static{this.\u0275inj=_.\u0275\u0275defineInjector({imports:[a.CommonModule,e.FormsModule,e.ReactiveFormsModule,u.G,oe.UIShellModule,oe.InputModule,oe.GridModule,oe.ButtonModule,oe.IconModule,oe.CheckboxModule,oe.RadioModule,oe.SelectModule,oe.NumberModule,oe.ModalModule,oe.DatePickerModule,oe.TimePickerModule,T.NgbNavModule,T.NgbPopoverModule,E.Y,l.RouterModule,T.NgbModule,oe.IconModule,oe.GridModule,oe.InputModule,oe.ComboBoxModule]})}}const oo=[{path:"",redirectTo:"users",pathMatch:"full"},{path:"users",data:{breadcrumbs:"Users"},children:[{path:"",component:It},{path:f.Qp.CREATE,component:Ot,data:{breadcrumbs:f.yY.CREATE}},{path:`${f.Qp.EDIT}/:username`,component:Ot,data:{breadcrumbs:f.yY.EDIT}}]},{path:"roles",data:{breadcrumbs:"Roles"},children:[{path:"",component:St},{path:f.Qp.CREATE,component:ie,data:{breadcrumbs:f.yY.CREATE}},{path:`${f.Qp.EDIT}/:name`,component:ie,data:{breadcrumbs:f.yY.EDIT}}]}];class gn{static{this.\u0275fac=function(ae){return new(ae||gn)}}static{this.\u0275mod=_.\u0275\u0275defineNgModule({type:gn})}static{this.\u0275inj=_.\u0275\u0275defineInjector({imports:[en,l.RouterModule.forChild(oo)]})}}},5155:(Z,A,r)=>{r.d(A,{DA:()=>E,YW:()=>l,jq:()=>e});var a=r(46045);class e extends Error{}class l extends e{constructor(){super(...arguments),this.header=$localize`Page Not Found`,this.message=$localize`Sorry, we couldn’t find what you were looking for.
  The page you requested may have been changed or moved.`,this.icon=a.FI.warning}}class E extends e{constructor(){super(...arguments),this.header=$localize`User Denied`,this.message=$localize`Sorry, the user does not exist in Ceph.
  You'll be logged out from the Identity Provider when you retry logging in.`,this.icon=a.FI.warning}}},83133:(Z,A,r)=>{r.d(A,{O:()=>a});class a{getVersionHeaderValue(l,T){return`application/vnd.ceph.api.v${l}.${T}+json`}}},42902:(Z,A,r)=>{r.d(A,{u:()=>v});var a=r(36618),l=r(76218),E=r(29841),u=r(50619),p=r(82254),S=r(87536);class v{constructor(P,M,b,m){this.authStorageService=P,this.http=M,this.router=b,this.route=m}check(P){return this.http.post("api/auth/check",{token:P})}login(P){return this.http.post("api/auth",P).pipe((0,u.tap)(M=>{this.authStorageService.set(M.username,M.permissions,M.sso,M.pwdExpirationDate,M.pwdUpdateRequired)}))}logout(P=null){return this.http.post("api/auth/logout",null).subscribe(M=>{if(this.authStorageService.remove(),"oauth2"==M.protocol)return window.location.replace(M.redirect_url);const b=E.get(this.route.snapshot.queryParams,"returnUrl","/login");this.router.navigate([b],{skipLocationChange:!0}),P&&P(),window.location.replace(M.redirect_url)})}static{this.\u0275fac=function(M){return new(M||v)(S.\u0275\u0275inject(p.v),S.\u0275\u0275inject(a.HttpClient),S.\u0275\u0275inject(l.Router),S.\u0275\u0275inject(l.ActivatedRoute))}}static{this.\u0275prov=S.\u0275\u0275defineInjectable({token:v,factory:v.\u0275fac,providedIn:"root"})}}},28886:(Z,A,r)=>{r.d(A,{t:()=>u});var a=r(36618),l=r(83133),T=r(92319),E=r(87536);class u extends l.O{constructor(p){super(),this.http=p,this.url="api/service"}list(p,S){const _={headers:{Accept:this.getVersionHeaderValue(2,0)},params:p,observe:"response"};return S&&(_.params=_.params.append("service_name",S)),new T.z(this.http.get(this.url,_))}getDaemons(p){return this.http.get(`${this.url}/${p}/daemons`)}create(p){const S=p.service_id?`${p.service_type}.${p.service_id}`:p.service_type;return this.http.post(this.url,{service_name:S,service_spec:p},{observe:"response"})}update(p){const S=p.service_id?`${p.service_type}.${p.service_id}`:p.service_type;return this.http.put(`${this.url}/${S}`,{service_name:S,service_spec:p},{observe:"response"})}delete(p){return this.http.delete(`${this.url}/${p}`,{observe:"response"})}getKnownTypes(){return this.http.get(`${this.url}/known_types`)}static{this.\u0275fac=function(S){return new(S||u)(E.\u0275\u0275inject(a.HttpClient))}}static{this.\u0275prov=E.\u0275\u0275defineInjectable({token:u,factory:u.\u0275fac,providedIn:"root"})}}},67588:(Z,A,r)=>{r.d(A,{W:()=>_});var a=r(36618),l=r(95631),E=r(29841),f=r.n(E),u=r(50619),p=r(87536);class _{constructor(R){this.http=R,this.baseURL="api/cephfs/subvolume/group"}get(R,P=!0){return this.http.get(`${this.baseURL}/${R}`,{params:{info:P}})}create(R,P,M,b,m,g,O){return this.http.post(this.baseURL,{vol_name:R,group_name:P,pool_layout:M,size:b,uid:m,gid:g,mode:O},{observe:"response"})}info(R,P){return this.http.get(`${this.baseURL}/${R}/info`,{params:{group_name:P}})}exists(R,P){return this.info(P,R).pipe((0,u.mapTo)(!0),(0,u.catchError)(M=>(f().isFunction(M.preventDefault)&&M.preventDefault(),(0,l.of)(!1))))}update(R,P,M){return this.http.put(`${this.baseURL}/${R}`,{group_name:P,size:M})}remove(R,P){return this.http.delete(`${this.baseURL}/${R}`,{params:{group_name:P},observe:"response"})}static{this.\u0275fac=function(P){return new(P||_)(p.\u0275\u0275inject(a.HttpClient))}}static{this.\u0275prov=p.\u0275\u0275defineInjectable({token:_,factory:_.\u0275fac,providedIn:"root"})}}},57798:(Z,A,r)=>{r.d(A,{v:()=>_});var a=r(36618),l=r(95631),E=r(50619),u=r(29841),F=r.n(u),p=r(87536);class _{constructor(R){this.http=R,this.baseURL="api/cephfs/subvolume"}get(R,P="",M=!0){return this.http.get(`${this.baseURL}/${R}`,{params:{group_name:P,info:M}})}create(R,P,M,b,m,g,O,N,c){return this.http.post(this.baseURL,{vol_name:R,subvol_name:P,group_name:M,pool_layout:b,size:m,uid:g,gid:O,mode:N,namespace_isolated:c},{observe:"response"})}info(R,P,M=""){return this.http.get(`${this.baseURL}/${R}/info`,{params:{subvol_name:P,group_name:M}})}remove(R,P,M="",b=!1){return this.http.delete(`${this.baseURL}/${R}`,{params:{subvol_name:P,group_name:M,retain_snapshots:b},observe:"response"})}exists(R,P,M=""){return this.info(P,R,M).pipe((0,E.mapTo)(!0),(0,E.catchError)(b=>(F().isFunction(b.preventDefault)&&b.preventDefault(),(0,l.of)(!1))))}existsInFs(R,P=""){return this.http.get(`${this.baseURL}/${R}/exists`,{params:{group_name:P}})}update(R,P,M,b=""){return this.http.put(`${this.baseURL}/${R}`,{subvol_name:P,size:M,group_name:b})}getSnapshots(R,P,M=""){return this.http.get(`${this.baseURL}/snapshot/${R}/${P}`,{params:{group_name:M}})}getSnapshotInfo(R,P,M,b=""){return this.http.get(`${this.baseURL}/snapshot/${P}/${M}/info`,{params:{snap_name:R,group_name:b}})}snapshotExists(R,P,M,b=""){return this.getSnapshotInfo(R,P,M,b).pipe((0,E.mapTo)(!0),(0,E.catchError)(m=>(F().isFunction(m.preventDefault)&&m.preventDefault(),(0,l.of)(!1))))}createSnapshot(R,P,M,b=""){return this.http.post(`${this.baseURL}/snapshot/`,{vol_name:R,subvol_name:M,snap_name:P,group_name:b},{observe:"response"})}deleteSnapshot(R,P,M,b=""){return this.http.delete(`${this.baseURL}/snapshot/${R}/${P}`,{params:{snap_name:M,group_name:b},observe:"response"})}createSnapshotClone(R,P,M,b,m="",g=""){return this.http.post(`${this.baseURL}/snapshot/clone`,{vol_name:R,subvol_name:P,snap_name:M,clone_name:b,group_name:m,target_group_name:g},{observe:"response"})}static{this.\u0275fac=function(P){return new(P||_)(p.\u0275\u0275inject(a.HttpClient))}}static{this.\u0275prov=p.\u0275\u0275defineInjectable({token:_,factory:_.\u0275fac,providedIn:"root"})}}},10978:(Z,A,r)=>{r.d(A,{s:()=>E});var a=r(36618),l=r(87536);class E{constructor(u){this.http=u}findValue(u,F){if(u.value)return u.value.find(p=>p.section===F)}getValue(u,F){let p=this.findValue(u,F);if(!p){const S=F.indexOf(".");-1!==S&&(p=this.findValue(u,F.substring(0,S)))}return p||(p=this.findValue(u,"global")),p?p.value:u.default}getConfigData(){return this.http.get("api/cluster_conf/")}get(u){return this.http.get(`api/cluster_conf/${u}`)}filter(u){return this.http.get(`api/cluster_conf/filter?names=${u.join(",")}`)}create(u){return this.http.post("api/cluster_conf/",u)}delete(u,F){return this.http.delete(`api/cluster_conf/${u}?section=${F}`)}bulkCreate(u){return this.http.put("api/cluster_conf/",u)}static{this.\u0275fac=function(F){return new(F||E)(l.\u0275\u0275inject(a.HttpClient))}}static{this.\u0275prov=l.\u0275\u0275defineInjectable({token:E,factory:E.\u0275fac,providedIn:"root"})}}},17612:(Z,A,r)=>{r.d(A,{j:()=>E});var a=r(36618),l=r(87536);class E{constructor(u){this.http=u,this.apiPath="api/crush_rule",this.formTooltips={root:$localize`The name of the node under which data should be placed.`,failure_domain:$localize`The type of CRUSH nodes across which we should separate replicas.`,device_class:$localize`The device class on which to place data.`}}create(u){return this.http.post(this.apiPath,u,{observe:"response"})}delete(u){return this.http.delete(`${this.apiPath}/${u}`,{observe:"response"})}getInfo(){return this.http.get(`ui-${this.apiPath}/info`)}static{this.\u0275fac=function(F){return new(F||E)(l.\u0275\u0275inject(a.HttpClient))}}static{this.\u0275prov=l.\u0275\u0275defineInjectable({token:E,factory:E.\u0275fac,providedIn:"root"})}}},7466:(Z,A,r)=>{r.d(A,{I:()=>P});var a=r(36618),l=r(29841),T=r.n(l),E=r(95631),u=r(50619),p=r(83133),S=r(32609),_=r(60156),v=r(87536);class P extends p.O{constructor(b,m){super(),this.http=b,this.deviceService=m,this.baseURL="api/host",this.baseUIURL="ui-api/host",this.predefinedLabels=["mon","mgr","osd","mds","rgw","nfs","iscsi","rbd","grafana"]}list(b,m){return b=b.set("facts",m),this.http.get(this.baseURL,{headers:{Accept:this.getVersionHeaderValue(1,2)},params:b,observe:"response"}).pipe((0,u.map)(g=>g.body.map(O=>(O.headers=g.headers,O))))}create(b,m,g,O){return this.http.post(this.baseURL,{hostname:b,addr:m,labels:g,status:O},{observe:"response",headers:{Accept:S.c.cdVersionHeader("0","1")}})}delete(b){return this.http.delete(`${this.baseURL}/${b}`,{observe:"response"})}getDevices(b){return this.http.get(`${this.baseURL}/${b}/devices`).pipe((0,u.map)(m=>m.map(g=>this.deviceService.prepareDevice(g))))}getSmartData(b){return this.http.get(`${this.baseURL}/${b}/smart`)}getDaemons(b){return this.http.get(`${this.baseURL}/${b}/daemons`)}getLabels(){return this.http.get(`${this.baseUIURL}/labels`)}update(b,m=!1,g=[],O=!1,N=!1,c=!1){return this.http.put(`${this.baseURL}/${b}`,{update_labels:m,labels:g,maintenance:O,force:N,drain:c},{headers:{Accept:this.getVersionHeaderValue(0,1)}})}identifyDevice(b,m,g){return this.http.post(`${this.baseURL}/${b}/identify_device`,{device:m,duration:g})}getInventoryParams(b){let m=new a.HttpParams;return b&&(m=m.append("refresh",T().toString(b))),m}getInventory(b,m){const g=this.getInventoryParams(m);return this.http.get(`${this.baseURL}/${b}/inventory`,{params:g})}inventoryList(b){const m=this.getInventoryParams(b);return this.http.get(`${this.baseUIURL}/inventory`,{params:m})}inventoryDeviceList(b,m){let g;return g=b?this.getInventory(b,m).pipe((0,u.toArray)()):this.inventoryList(m),g.pipe((0,u.mergeMap)(O=>{const N=T().flatMap(O,c=>c.devices.map(z=>(z.hostname=c.name,z.uid=z.device_id?`${z.device_id}-${z.hostname}-${z.path}`:`${z.hostname}-${z.path}`,z)));return(0,E.of)(N)}))}getAllHosts(){return this.http.get(`${this.baseUIURL}/list`)}static{this.\u0275fac=function(m){return new(m||P)(v.\u0275\u0275inject(a.HttpClient),v.\u0275\u0275inject(_.g))}}static{this.\u0275prov=v.\u0275\u0275defineInjectable({token:P,factory:P.\u0275fac,providedIn:"root"})}}},20009:(Z,A,r)=>{r.d(A,{a:()=>m});var a=r(36618),l=r(87015),E=r(95631),u=r(88701),F=r(76218),S=r(88285),_=r(50619),R=r(63882),P=r(87536);const b="global";class m{constructor(O,N,c,z,B){this.blockUI=O,this.http=N,this.notificationService=c,this.router=z,this.summaryService=B,this.url="api/mgr/module",this.updateCompleted$=new E.Subject,this.REFRESH_INTERVAL=2e3}list(){return this.http.get(`${this.url}`)}getConfig(O){return this.http.get(`${this.url}/${O}`)}updateConfig(O,N){return this.http.put(`${this.url}/${O}`,{config:N})}enable(O){return this.http.post(`${this.url}/${O}/enable`,null)}disable(O){return this.http.post(`${this.url}/${O}/disable`,null)}getOptions(O){return this.http.get(`${this.url}/${O}/options`)}updateModuleState(O,N=!1,c=null,z="",B,q,Q=$localize`Reconnecting, please wait ...`){(N?this.disable(O):this.enable(O)).subscribe({next:()=>{this.updateCompleted$.next()},error:()=>{this.notificationService.suspendToasties(!0),this.blockUI.start(b,Q),(0,E.timer)(this.REFRESH_INTERVAL).pipe((0,_.switchMap)(()=>this.list()),(0,_.retryWhen)(D=>D.pipe((0,_.tap)(()=>{}),(0,_.delay)(this.REFRESH_INTERVAL)))).subscribe({next:()=>{if(this.notificationService.suspendToasties(!1),this.blockUI.stop(b),c&&c.refreshBtn(),B&&this.notificationService.show(S._.success,$localize`${B}`),z){const D=()=>this.router.navigate([z]);q?this.router.navigateByUrl("/",{skipLocationChange:!0}).then(D):D()}this.updateCompleted$.next(),this.summaryService.startPolling()}})}})}static{this.\u0275fac=function(N){return new(N||m)(P.\u0275\u0275inject(l.BlockUIService),P.\u0275\u0275inject(a.HttpClient),P.\u0275\u0275inject(u.J),P.\u0275\u0275inject(F.Router),P.\u0275\u0275inject(R.E))}}static{this.\u0275prov=P.\u0275\u0275defineInjectable({token:m,factory:m.\u0275fac,providedIn:"root"})}}},42706:(Z,A,r)=>{r.d(A,{J:()=>R});var a=r(36618),l=r(95631),E=r(15643),f=r(50619),F=r(63882),p=r(76218),_=r(87536);class R{constructor(M,b,m,g){this.http=M,this.timerService=b,this.summaryService=m,this.router=g,this.TOKEN_CHECK_INTERVAL=6e5,this.msSource=new l.BehaviorSubject(null),this.msData$=this.msSource.asObservable(),this.tokenStatusSource=new l.BehaviorSubject(null),this.tokenStatusSource$=this.tokenStatusSource.asObservable(),this.showDeletionMessage=!1,this.isClusterAddedFlag=!1,this.prometheusConnectionError=[]}startPolling(){return this.timerService.get(()=>this.getCluster(),5e3).subscribe(this.getClusterObserver())}startClusterTokenStatusPolling(){return this.checkAndStartTimer()}checkAndStartTimer(){return this.checkTokenStatus().subscribe(this.getClusterTokenStatusObserver()),this.timerService.get(()=>this.checkTokenStatus(),this.TOKEN_CHECK_INTERVAL).subscribe(this.getClusterTokenStatusObserver())}subscribeClusterTokenStatus(M,b){return this.tokenStatusSource$.pipe((0,f.filter)(m=>!!m)).subscribe(M,b)}refresh(){return this.getCluster().subscribe(this.getClusterObserver())}refreshTokenStatus(){return this.checkTokenStatus().subscribe(this.getClusterTokenStatusObserver())}subscribeOnce(M,b){return this.msData$.pipe((0,f.filter)(m=>!!m),(0,f.first)()).subscribe(M,b)}subscribe(M,b){return this.msData$.pipe((0,f.filter)(m=>!!m)).subscribe(M,b)}setCluster(M){return this.http.put("api/multi-cluster/set_config",{config:M})}getCluster(){return this.http.get("api/multi-cluster/get_config")}deleteCluster(M,b){return this.http.delete(`api/multi-cluster/delete_cluster/${M}/${b}`)}editCluster(M,b,m,g,O=!1,N=""){return this.http.put("api/multi-cluster/edit_cluster",{name:M,url:b,cluster_alias:m,username:g,verify:O,ssl_certificate:N})}addCluster(M,b,m,g,O="",N=!1,c="",z){return this.http.post("api/multi-cluster/auth",{url:M,cluster_alias:b,username:m,password:g,hub_url:O,ssl_verify:N,ssl_certificate:c,ttl:z})}reConnectCluster(M,b,m,g=!1,O="",N,c){const z={url:M,username:b,password:m,ssl_verify:g,ssl_certificate:O,ttl:N};return c&&(z.cluster_token=c),this.http.put("api/multi-cluster/reconnect_cluster",z)}getClusterObserver(){return M=>{this.msSource.next(M)}}getClusterTokenStatusObserver(){return M=>{this.tokenStatusSource.next(M)}}checkTokenStatus(){return this.http.get("api/multi-cluster/check_token_status")}showPrometheusDelayMessage(M){return void 0!==M&&(this.showDeletionMessage=M),this.showDeletionMessage}isClusterAdded(M){return void 0!==M&&(this.isClusterAddedFlag=M),this.isClusterAddedFlag}managePrometheusConnectionError(M){return void 0!==M&&(this.prometheusConnectionError=M),this.prometheusConnectionError}refreshMultiCluster(M){this.refresh(),this.refreshTokenStatus(),this.summaryService.refresh(),M.includes("dashboard")?this.router.navigateByUrl("/pool",{skipLocationChange:!0}).then(()=>{this.router.navigate([M])}):this.router.navigateByUrl("/",{skipLocationChange:!0}).then(()=>{this.router.navigate([M])})}static{this.\u0275fac=function(b){return new(b||R)(_.\u0275\u0275inject(a.HttpClient),_.\u0275\u0275inject(E.H),_.\u0275\u0275inject(F.E),_.\u0275\u0275inject(p.Router))}}static{this.\u0275prov=_.\u0275\u0275defineInjectable({token:R,factory:R.\u0275fac,providedIn:"root"})}}},22341:(Z,A,r)=>{r.d(A,{Z:()=>p});var a=r(36618),l=r(95631),E=r(8265),f=r(83133),u=r(87536);class p extends f.O{constructor(_){super(),this.http=_,this.apiPath="api/nfs-ganesha",this.uiApiPath="ui-api/nfs-ganesha",this.nfsAccessType=[{value:"RW",help:$localize`Allows all operations`},{value:"RO",help:$localize`Allows only operations that do not modify the server`},{value:"NONE",help:$localize`Allows no access at all`}],this.nfsFsal=[{value:E.q.CEPH,descr:$localize`CephFS`,disabled:!1},{value:E.q.RGW,descr:$localize`Object Gateway`,disabled:!1}],this.nfsSquash={no_root_squash:["no_root_squash","noidsquash","none"],root_id_squash:["root_id_squash","rootidsquash","rootid"],root_squash:["root_squash","rootsquash","root"],all_squash:["all_squash","allsquash","all","allanonymous","all_anonymous"]}}list(_){return this.http.get(`${this.apiPath}/export`,{params:{cluster_id:_}})}get(_,v){return this.http.get(`${this.apiPath}/export/${_}/${v}`)}create(_){return this.http.post(`${this.apiPath}/export`,_,{headers:{Accept:this.getVersionHeaderValue(2,0)},observe:"response"})}update(_,v,R){return this.http.put(`${this.apiPath}/export/${_}/${v}`,R,{headers:{Accept:this.getVersionHeaderValue(2,0)},observe:"response"})}delete(_,v){return this.http.delete(`${this.apiPath}/export/${_}/${v}`,{headers:{Accept:this.getVersionHeaderValue(2,0)},observe:"response"})}listClusters(){return this.http.get(`${this.apiPath}/cluster`,{headers:{Accept:this.getVersionHeaderValue(0,1)}})}lsDir(_,v){return _?this.http.get(`${this.uiApiPath}/lsdir/${_}?root_dir=${v}`):(0,l.throwError)($localize`Please specify a filesystem volume.`)}fsals(){return this.http.get(`${this.uiApiPath}/fsals`)}filesystems(){return this.http.get(`${this.uiApiPath}/cephfs/filesystems`)}nfsClusterList(){return this.http.get(`${this.apiPath}/cluster`,{headers:{Accept:this.getVersionHeaderValue(0,1)},params:{info:!0}})}static{this.\u0275fac=function(v){return new(v||p)(u.\u0275\u0275inject(a.HttpClient))}}static{this.\u0275prov=u.\u0275\u0275defineInjectable({token:p,factory:p.\u0275fac,providedIn:"root"})}}},98996:(Z,A,r)=>{r.d(A,{K:()=>u});var a=r(36618),l=r(29841),T=r.n(l),E=r(87536);class u{constructor(p){this.http=p,this.url="ui-api/orchestrator",this.disableMessages={noOrchestrator:$localize`The feature is disabled because Orchestrator is not available.`,missingFeature:$localize`The Orchestrator backend doesn't support this feature.`}}status(){return this.http.get(`${this.url}/status`)}hasFeature(p,S){return T().every(S,_=>T().get(p.features,`${_}.available`))}getTableActionDisableDesc(p,S){return!!p&&(p.available?!this.hasFeature(p,S)&&this.disableMessages.missingFeature:this.disableMessages.noOrchestrator)}getName(){return this.http.get(`${this.url}/get_name`)}static{this.\u0275fac=function(S){return new(S||u)(E.\u0275\u0275inject(a.HttpClient))}}static{this.\u0275prov=E.\u0275\u0275defineInjectable({token:u,factory:u.\u0275fac,providedIn:"root"})}}},92319:(Z,A,r)=>{r.d(A,{z:()=>l});var a=r(50619);class l{constructor(E){this.observable=E.pipe((0,a.map)(f=>(this.count=Number(f.headers?.get("X-Total-Count")),f.body||f)))}}},59870:(Z,A,r)=>{r.d(A,{m:()=>_});var a=r(84857),l=r(36618),E=r(50619),u=r(80697),F=r(77241),p=r(87536);let _=class kr{constructor(R,P){this.http=R,this.rbdConfigurationService=P,this.apiPath="api/pool"}create(R){return this.http.post(this.apiPath,R,{observe:"response"})}update(R){let P;return R.hasOwnProperty("srcpool")?(P=R.srcpool,delete R.srcpool):(P=R.pool,delete R.pool),this.http.put(`${this.apiPath}/${encodeURIComponent(P)}`,R,{observe:"response"})}delete(R){return this.http.delete(`${this.apiPath}/${R}`,{observe:"response"})}get(R){return this.http.get(`${this.apiPath}/${R}`)}getList(){return this.http.get(`${this.apiPath}?stats=true`)}getConfiguration(R){return this.http.get(`${this.apiPath}/${R}/configuration`).pipe((0,E.map)(P=>P.map(M=>Object.assign(M,this.rbdConfigurationService.getOptionByName(M.name)))))}getInfo(){return this.http.get(`ui-${this.apiPath}/info`)}list(R=[]){const P=R.join(",");return this.http.get(`${this.apiPath}?attrs=${P}`).toPromise().then(M=>M)}static{this.\u0275fac=function(P){return new(P||kr)(p.\u0275\u0275inject(l.HttpClient),p.\u0275\u0275inject(F.Q))}}static{this.\u0275prov=p.\u0275\u0275defineInjectable({token:kr,factory:kr.\u0275fac,providedIn:"root"})}};_=(0,a.__decorate)([u.G,(0,a.__metadata)("design:paramtypes",[l.HttpClient,F.Q])],_)},32380:(Z,A,r)=>{r.d(A,{o:()=>_});var a=r(36618),l=r(95631),E=r(50619),u=r(89939),F=r.n(u),p=r(87536);class _{constructor(R){this.http=R,this.timerTime=3e4,this.lastHourDateObject={start:F()().unix()-3600,end:F()().unix(),step:14},this.baseURL="api/prometheus",this.settingsKey={alertmanager:"ui-api/prometheus/alertmanager-api-host",prometheus:"ui-api/prometheus/prometheus-api-host"},this.settings={}}unsubscribe(){this.timerGetPrometheusDataSub&&this.timerGetPrometheusDataSub.unsubscribe()}getPrometheusData(R){return this.http.get(`${this.baseURL}/data`,{params:R})}getPrometheusQueryData(R){return this.http.get(`${this.baseURL}/prometheus_query_data`,{params:R})}ifAlertmanagerConfigured(R,P){this.ifSettingConfigured(this.settingsKey.alertmanager,R,P)}disableAlertmanagerConfig(){this.disableSetting(this.settingsKey.alertmanager)}ifPrometheusConfigured(R,P){this.ifSettingConfigured(this.settingsKey.prometheus,R,P)}disablePrometheusConfig(){this.disableSetting(this.settingsKey.prometheus)}getAlerts(R=!1,P={}){return P.cluster_filter=R,this.http.get(this.baseURL,{params:P})}getSilences(R={}){return this.http.get(`${this.baseURL}/silences`,{params:R})}getRules(R="all"){return this.http.get(`${this.baseURL}/rules`).pipe((0,E.map)(P=>(["alerting","rewrites"].includes(R)&&P.groups.map(M=>{M.rules=M.rules.filter(b=>b.type===R)}),P)))}setSilence(R){return this.http.post(`${this.baseURL}/silence`,R,{observe:"response"})}expireSilence(R){return this.http.delete(`${this.baseURL}/silence/${R}`,{observe:"response"})}getNotifications(R){const P=`${this.baseURL}/notifications?from=${R&&R.id?R.id:"last"}`;return this.http.get(P)}ifSettingConfigured(R,P,M){const b=this.settings[R];void 0===b?this.http.get(R).subscribe(m=>{this.settings[R]=this.getSettingsValue(m),this.ifSettingConfigured(R,P,M)},m=>{401!==m.status&&(this.settings[R]="")}):""!==b?P(b):M&&M()}disableSetting(R){this.settings[R]=""}getSettingsValue(R){return R.value||R.instance||""}getGaugeQueryData(R){return this.getPrometheusQueryData({params:R}).pipe((0,E.map)(P=>P),(0,E.catchError)(()=>(0,l.of)({result:[]})))}formatGuageMetric(R){const P=parseFloat(R??"");return isFinite(P)?P:null}getRangeQueriesData(R,P,M,b){return this.ifPrometheusConfigured(()=>{this.timerGetPrometheusDataSub&&this.timerGetPrometheusDataSub.unsubscribe(),this.timerGetPrometheusDataSub=(0,l.timer)(0,this.timerTime).pipe((0,E.switchMap)(()=>{R=this.updateTimeStamp(R);const m=[];for(const g in P)if(P.hasOwnProperty(g)){const O=P[g];m.push(this.getPrometheusData({params:encodeURIComponent(O),start:R.start,end:R.end,step:R.step}).pipe((0,E.map)(N=>({queryName:g,data:N}))))}return(0,l.forkJoin)(m)})).subscribe(m=>{m.forEach(({queryName:g,data:O})=>{O.result.length?M[g]=O.result[0].values:M[g]=[],void 0!==M[g]&&""!==M[g]&&b&&M[g].forEach(N=>{isNaN(parseFloat(N[1]))&&(N[1]="0")})})})}),M}updateTimeStamp(R){let P={},M=R.end-R.start;return P={start:F()().unix()-M,end:F()().unix(),step:R.step},P}getMultiClusterData(R){return this.http.get(`${this.baseURL}/prometheus_query_data`,{params:R})}getMultiClusterQueryRangeData(R){return this.http.get(`${this.baseURL}/data`,{params:R})}getMultiClusterQueriesData(R,P,M,b,m,g){return new l.Observable(O=>{this.ifPrometheusConfigured(()=>{this.timerGetPrometheusDataSub&&this.timerGetPrometheusDataSub.unsubscribe(),this.timerGetPrometheusDataSub=(0,l.timer)(0,this.timerTime).subscribe(()=>{let N=[],c=[];Object.entries(b).forEach(([z,B])=>{for(const q in b[z].queries)if(b[z].queries.hasOwnProperty(q)&&m.includes(q)){const Q=b[z].queries[q],G=this.updateTimeStamp(b[z].selectedTime).start,D=this.updateTimeStamp(b[z].selectedTime).end,oe=this.updateTimeStamp(b[z].selectedTime).step;if(M.includes(q)){const fe=this.getMultiClusterQueryRangeData({params:encodeURIComponent(Q),start:G,end:D,step:oe});N.push(fe),c.push(q)}else{const fe=this.getMultiClusterData({params:encodeURIComponent(Q),start:G,end:D,step:oe});N.push(fe),c.push(q)}}}),m=g,(0,l.forkJoin)(N).subscribe(z=>{for(let B=0;B<z.length;B++){const q=z[B],Q=c[B];q.result.length&&(P.includes(Q)?R[Q]=q.result:R[Q]=q.result.map(G=>G.value))}O.next(R),O.complete()},z=>{O.error(z)})})})})}static{this.\u0275fac=function(P){return new(P||_)(p.\u0275\u0275inject(a.HttpClient))}}static{this.\u0275prov=p.\u0275\u0275defineInjectable({token:_,factory:_.\u0275fac,providedIn:"root"})}}},75180:(Z,A,r)=>{r.d(A,{U:()=>M});var a=r(84857),l=r(36618),E=r(29841),f=r.n(E),u=r(50619),p=r(83133),S=r(80697),_=r(65218),v=r(77241),R=r(87536);let M=class jr extends p.O{constructor(m,g){super(),this.http=m,this.rbdConfigurationService=g}isRBDPool(m){return-1!==f().indexOf(m.application_metadata,"rbd")&&!m.pool_name.includes("/")}create(m){return this.http.post("api/block/image",m,{observe:"response"})}delete(m){return this.http.delete(`api/block/image/${m.toStringEncoded()}`,{observe:"response"})}update(m,g){return this.http.put(`api/block/image/${m.toStringEncoded()}`,g,{observe:"response"})}get(m){return this.http.get(`api/block/image/${m.toStringEncoded()}`)}list(m){return this.http.get("api/block/image",{params:m,headers:{Accept:this.getVersionHeaderValue(2,0)},observe:"response"}).pipe((0,u.map)(g=>g.body.map(O=>(O.value.map(N=>(N.configuration&&N.configuration.map(c=>Object.assign(c,this.rbdConfigurationService.getOptionByName(c.name))),N)),O.headers=g.headers,O))))}copy(m,g){return this.http.post(`api/block/image/${m.toStringEncoded()}/copy`,g,{observe:"response"})}flatten(m){return this.http.post(`api/block/image/${m.toStringEncoded()}/flatten`,null,{observe:"response"})}defaultFeatures(){return this.http.get("api/block/image/default_features")}cloneFormatVersion(){return this.http.get("api/block/image/clone_format_version")}createSnapshot(m,g,O){const N={snapshot_name:g,mirrorImageSnapshot:O};return this.http.post(`api/block/image/${m.toStringEncoded()}/snap`,N,{observe:"response"})}renameSnapshot(m,g,O){const N={new_snap_name:O};return this.http.put(`api/block/image/${m.toStringEncoded()}/snap/${g}`,N,{observe:"response"})}protectSnapshot(m,g,O){const N={is_protected:O};return this.http.put(`api/block/image/${m.toStringEncoded()}/snap/${g}`,N,{observe:"response"})}rollbackSnapshot(m,g){return this.http.post(`api/block/image/${m.toStringEncoded()}/snap/${g}/rollback`,null,{observe:"response"})}cloneSnapshot(m,g,O){return this.http.post(`api/block/image/${m.toStringEncoded()}/snap/${g}/clone`,O,{observe:"response"})}deleteSnapshot(m,g){return this.http.delete(`api/block/image/${m.toStringEncoded()}/snap/${g}`,{observe:"response"})}listTrash(){return this.http.get("api/block/image/trash/")}createNamespace(m,g){const O={namespace:g};return this.http.post(`api/block/pool/${m}/namespace`,O,{observe:"response"})}listNamespaces(m){return this.http.get(`api/block/pool/${m}/namespace/`)}deleteNamespace(m,g){return this.http.delete(`api/block/pool/${m}/namespace/${g}`,{observe:"response"})}moveTrash(m,g){return this.http.post(`api/block/image/${m.toStringEncoded()}/move_trash`,{delay:g},{observe:"response"})}purgeTrash(m){return this.http.post(`api/block/image/trash/purge/?pool_name=${m}`,null,{observe:"response"})}restoreTrash(m,g){return this.http.post(`api/block/image/trash/${m.toStringEncoded()}/restore`,{new_image_name:g},{observe:"response"})}removeTrash(m,g=!1){return this.http.delete(`api/block/image/trash/${m.toStringEncoded()}/?force=${g}`,{observe:"response"})}static{this.\u0275fac=function(g){return new(g||jr)(R.\u0275\u0275inject(l.HttpClient),R.\u0275\u0275inject(v.Q))}}static{this.\u0275prov=R.\u0275\u0275defineInjectable({token:jr,factory:jr.\u0275fac,providedIn:"root"})}};(0,a.__decorate)([(0,a.__param)(1,S.R),(0,a.__metadata)("design:type",Function),(0,a.__metadata)("design:paramtypes",[_.J,String,Boolean]),(0,a.__metadata)("design:returntype",void 0)],M.prototype,"createSnapshot",null),(0,a.__decorate)([(0,a.__param)(2,S.R),(0,a.__metadata)("design:type",Function),(0,a.__metadata)("design:paramtypes",[_.J,String,String]),(0,a.__metadata)("design:returntype",void 0)],M.prototype,"renameSnapshot",null),(0,a.__decorate)([(0,a.__param)(2,S.R),(0,a.__metadata)("design:type",Function),(0,a.__metadata)("design:paramtypes",[_.J,String,Boolean]),(0,a.__metadata)("design:returntype",void 0)],M.prototype,"protectSnapshot",null),(0,a.__decorate)([(0,a.__param)(1,S.R),(0,a.__metadata)("design:type",Function),(0,a.__metadata)("design:paramtypes",[_.J,String]),(0,a.__metadata)("design:returntype",void 0)],M.prototype,"restoreTrash",null),M=(0,a.__decorate)([S.G,(0,a.__metadata)("design:paramtypes",[l.HttpClient,v.Q])],M)},29729:(Z,A,r)=>{r.d(A,{c:()=>b});var a=r(84857),l=r(36618),E=r(29841),f=r.n(E),u=r(95631),p=r(50619),_=r(83133),v=r(92919),R=r(80697),P=r(87536);let b=class Wr extends _.O{constructor(g,O){super(),this.http=g,this.rgwDaemonService=O,this.url="api/rgw/bucket",this.bucketsSubject=new u.BehaviorSubject([]),this.totalNumObjectsSubject=new u.BehaviorSubject(0),this.totalUsedCapacitySubject=new u.BehaviorSubject(0),this.averageObjectSizeSubject=new u.BehaviorSubject(0),this.buckets$=this.bucketsSubject.asObservable(),this.totalNumObjects$=this.totalNumObjectsSubject.asObservable(),this.totalUsedCapacity$=this.totalUsedCapacitySubject.asObservable(),this.averageObjectSize$=this.averageObjectSizeSubject.asObservable()}fetchAndTransformBuckets(){return this.list(!0).pipe((0,p.map)(g=>{let O=0,N=0,c=0;const z=g.map(B=>this.transformBucket(B));z.forEach(B=>{O+=B?.num_objects||0,N+=B?.bucket_size||0}),c=this.calculateAverageObjectSize(O,N),this.bucketsSubject.next(z),this.totalNumObjectsSubject.next(O),this.totalUsedCapacitySubject.next(N),this.averageObjectSizeSubject.next(c)}))}transformBucket(g){const O=g?.bucket_quota?.max_size??0,N=g?.bucket_quota?.max_objects??0,c=g.usage?.["rgw.main"]?.size_actual||0,z=g.usage?.["rgw.main"]?.num_objects||0;return{...g,bucket_size:c,num_objects:z,size_usage:this.calculateSizeUsage(c,O),object_usage:this.calculateObjectUsage(z,N)}}calculateSizeUsage(g,O){return O>0?g/O:void 0}calculateObjectUsage(g,O){return O>0?g/O:void 0}calculateAverageObjectSize(g,O){return g>0?O/g:0}list(g=!1,O=""){return this.rgwDaemonService.request(N=>(N=N.append("stats",g.toString()),O&&(N=N.append("uid",O)),this.http.get(this.url,{headers:{Accept:this.getVersionHeaderValue(1,1)},params:N})))}get(g){return this.rgwDaemonService.request(O=>this.http.get(`${this.url}/${g}`,{params:O}))}getTotalBucketsAndUsersLength(){return this.rgwDaemonService.request(g=>this.http.get(`ui-${this.url}/buckets_and_users_count`,{params:g}))}create(g,O,N,c,z,B,q,Q,G,D,oe,fe,ye,je){return this.rgwDaemonService.request(Le=>{const Fe={bucket:g,uid:O,zonegroup:N,lock_enabled:String(z),lock_mode:B,lock_retention_period_days:q,encryption_state:String(Q),encryption_type:G,key_id:D,tags:oe,bucket_policy:fe,canned_acl:ye,replication:je,daemon_name:Le.get("daemon_name")};return c&&(Fe.placement_target=c),this.http.post(this.url,null,{params:new l.HttpParams({fromObject:Fe})})})}update(g,O,N,c,z,B,q,Q,G,D,oe,fe,ye,je,Le,Fe,te){return this.rgwDaemonService.request(le=>(le=le.appendAll({bucket_id:O,uid:N,versioning_state:c,encryption_state:String(z),encryption_type:B,key_id:q,mfa_delete:Q,mfa_token_serial:G,mfa_token_pin:D,lock_mode:oe,lock_retention_period_days:fe,tags:ye,bucket_policy:je,canned_acl:Le,replication:Fe,lifecycle:te}),this.http.put(`${this.url}/${g}`,null,{params:le})))}delete(g){return this.rgwDaemonService.request(O=>this.http.delete(`${this.url}/${g}`,{params:O}))}exists(g){return this.get(g).pipe((0,p.mapTo)(!0),(0,p.catchError)(O=>(f().isFunction(O.preventDefault)&&O.preventDefault(),(0,u.of)(!1))))}getLockDays(g){return g.lock_retention_period_years>0?Math.floor(365.242*g.lock_retention_period_years):g.lock_retention_period_days||0}setEncryptionConfig(g){const O={...g};return this.rgwDaemonService.request(N=>this.http.put(`${this.url}/setEncryptionConfig`,O,{params:N}))}getEncryption(g){return this.rgwDaemonService.request(O=>this.http.get(`${this.url}/${g}/getEncryption`,{params:O}))}deleteEncryption(g){return this.rgwDaemonService.request(O=>this.http.get(`${this.url}/${g}/deleteEncryption`,{params:O}))}getEncryptionConfig(){return this.rgwDaemonService.request(g=>this.http.get(`${this.url}/getEncryptionConfig`,{params:g}))}setLifecycle(g,O,N,c){return this.rgwDaemonService.request(z=>(z=z.appendAll({bucket_name:g,lifecycle:O,owner:N,tenant:c}),this.http.put(`${this.url}/lifecycle`,null,{params:z})))}getLifecycle(g,O,N){return this.rgwDaemonService.request(c=>(c=c.appendAll({bucket_name:g,owner:O,tenant:N}),this.http.get(`${this.url}/lifecycle`,{params:c})))}updateBucketRateLimit(g,O){return this.http.put(`${this.url}/${g}/ratelimit`,O)}getBucketRateLimit(g){return this.http.get(`${this.url}/${g}/ratelimit`)}getGlobalBucketRateLimit(){return this.http.get(`${this.url}/ratelimit`)}listNotification(g){return this.rgwDaemonService.request(O=>(O=O.appendAll({bucket_name:g}),this.http.get(`${this.url}/notification`,{params:O})))}setNotification(g,O,N){return this.rgwDaemonService.request(c=>(c=c.appendAll({bucket_name:g,notification:O,owner:N}),this.http.put(`${this.url}/notification`,null,{params:c})))}deleteNotification(g,O){return this.rgwDaemonService.request(N=>(N=N.appendAll({bucket_name:g,notification_id:O}),this.http.delete(`${this.url}/notification`,{params:N})))}static{this.\u0275fac=function(O){return new(O||Wr)(P.\u0275\u0275inject(l.HttpClient),P.\u0275\u0275inject(v.y))}}static{this.\u0275prov=P.\u0275\u0275defineInjectable({token:Wr,factory:Wr.\u0275fac,providedIn:"root"})}};b=(0,a.__decorate)([R.G,(0,a.__metadata)("design:paramtypes",[l.HttpClient,v.y])],b)},92919:(Z,A,r)=>{r.d(A,{y:()=>P});var a=r(84857),l=r(36618),E=r(29841),f=r.n(E),u=r(95631),p=r(50619),_=r(80697),v=r(87536);let P=class Kr{constructor(b){this.http=b,this.url="api/rgw/daemon",this.daemons=new u.BehaviorSubject([]),this.daemons$=this.daemons.asObservable(),this.selectedDaemon=new u.BehaviorSubject(null),this.selectedDaemon$=this.selectedDaemon.asObservable()}list(){return this.http.get(this.url).pipe((0,p.tap)(b=>{this.daemons.next(b);const m=this.selectedDaemon.getValue();(f().isEmpty(m)||void 0===f().find(b,{id:m.id}))&&this.selectDefaultDaemon(b)}))}get(b){return this.http.get(`${this.url}/${b}`)}selectDaemon(b){this.selectedDaemon.next(b)}selectDefaultDaemon(b){if(0===b.length)return null;for(const m of b)if(m.default)return this.selectDaemon(m),m;return this.selectDaemon(b[0]),b[0]}request(b){return this.selectedDaemon.pipe((0,p.mergeMap)(m=>f().isEmpty(m)?this.list().pipe((0,p.mergeMap)(g=>f().isEmpty(g)?(0,u.throwError)("No RGW daemons found!"):this.selectedDaemon$)):(0,u.of)(m)),(0,p.take)(1),(0,p.mergeMap)(m=>{let g=new l.HttpParams;return g=g.append("daemon_name",m.id),b(g)}))}setMultisiteConfig(b,m,g){return this.request(O=>(O=O.appendAll({realm_name:b,zonegroup_name:m,zone_name:g}),this.http.put(`${this.url}/set_multisite_config`,null,{params:O})))}static{this.\u0275fac=function(m){return new(m||Kr)(v.\u0275\u0275inject(l.HttpClient))}}static{this.\u0275prov=v.\u0275\u0275defineInjectable({token:Kr,factory:Kr.\u0275fac,providedIn:"root"})}};P=(0,a.__decorate)([_.G,(0,a.__metadata)("design:paramtypes",[l.HttpClient])],P)},46459:(Z,A,r)=>{r.d(A,{A:()=>v});var a=r(36618),l=r(92919),T=r(95631),f=r(50619),F=r(13723),p=r(20009),S=r(87536);class v{constructor(P,M,b){this.http=P,this.rgwDaemonService=M,this.mgrModuleService=b,this.uiUrl="ui-api/rgw/multisite",this.url="api/rgw/multisite",this.restartGatewayMessageSource=new T.BehaviorSubject(null),this.restartGatewayMessage$=this.restartGatewayMessageSource.asObservable()}migrate(P,M,b,m){return this.rgwDaemonService.request(g=>(g=g.appendAll({realm_name:P.name,zonegroup_name:M.name,zone_name:b.name,zonegroup_endpoints:M.endpoints,zone_endpoints:b.endpoints,username:m}),this.http.put(`${this.uiUrl}/migrate`,null,{params:g})))}getSyncStatus(){return this.rgwDaemonService.request(P=>this.http.get(`${this.url}/sync_status`,{params:P}))}status(){return this.http.get(`${this.uiUrl}/status`)}getSyncPolicy(P,M,b=!1){let m=new a.HttpParams;return P&&(m=m.append("bucket_name",P)),M&&(m=m.append("zonegroup_name",M)),m=m.append("all_policy",b),this.http.get(`${this.url}/sync-policy`,{params:m})}getSyncPolicyGroup(P,M){let b=new a.HttpParams;return M&&(b=b.append("bucket_name",M)),this.http.get(`${this.url}/sync-policy-group/${P}`,{params:b})}createSyncPolicyGroup(P){return this.http.post(`${this.url}/sync-policy-group`,P)}modifySyncPolicyGroup(P){return this.http.put(`${this.url}/sync-policy-group`,P)}removeSyncPolicyGroup(P,M){let b=new a.HttpParams;return M&&(b=b.append("bucket_name",M)),this.http.delete(`${this.url}/sync-policy-group/${P}`,{params:b})}setUpMultisiteReplication(P,M,b,m,g,O,N,c,z,B){let q=(new a.HttpParams).set("realm_name",P).set("zonegroup_name",M).set("zonegroup_endpoints",b).set("zone_name",m).set("zone_endpoints",g).set("username",O);return N&&(q=q.set("cluster_fsid",N)),z&&(q=q.set("cluster_details",JSON.stringify(z))),c&&(q=q.set("replication_zone_name",c)),B&&(q=q.set("selectedRealmName",B)),this.http.post(`${this.uiUrl}/multisite-replications`,null,{params:q})}createEditSyncFlow(P){return this.http.put(`${this.url}/sync-flow`,P)}removeSyncFlow(P,M,b,m){let g=new a.HttpParams;return m&&(g=g.append("bucket_name",encodeURIComponent(m))),this.http.delete(`${this.url}/sync-flow/${encodeURIComponent(P)}/${M}/${encodeURIComponent(b)}`,{params:g})}createEditSyncPipe(P,M,b){let m=new a.HttpParams;return M&&(m=m.append("user",M)),b&&(m=m.append("mode",b)),this.http.put(`${this.url}/sync-pipe`,P,{params:m})}removeSyncPipe(P,M,b){let m=new a.HttpParams;return b&&(m=m.append("bucket_name",encodeURIComponent(b))),this.http.delete(`${this.url}/sync-pipe/${encodeURIComponent(M)}/${encodeURIComponent(P)}`,{params:m})}setRestartGatewayMessage(P){this.restartGatewayMessageSource.next(P)}getRgwModuleStatus(){return this.mgrModuleService.list().pipe((0,f.map)(P=>!!P.find(b=>b.name===F.tj)?.enabled))}static{this.\u0275fac=function(M){return new(M||v)(S.\u0275\u0275inject(a.HttpClient),S.\u0275\u0275inject(l.y),S.\u0275\u0275inject(p.a))}}static{this.\u0275prov=S.\u0275\u0275defineInjectable({token:v,factory:v.\u0275fac,providedIn:"root"})}}},19830:(Z,A,r)=>{r.d(A,{$:()=>u});var a=r(36618),l=r(46045),T=r(92919),E=r(87536);class u{constructor(p,S){this.http=p,this.rgwDaemonService=S,this.url="api/rgw/realm"}create(p,S){let _={realm_name:p.name,default:S};return this.http.post(`${this.url}`,_)}update(p,S,_){let v={realm_name:p.name,default:S,new_realm_name:_};return this.http.put(`${this.url}/${p.name}`,v)}list(p){let S=new a.HttpParams;return p&&(S=S.appendAll({replicable:p.toString()})),this.http.get(`${this.url}`,{params:S})}get(p){return this.http.get(`${this.url}/${p.name}`)}getAllRealmsInfo(){return this.http.get(`${this.url}/get_all_realms_info`)}delete(p){let S=new a.HttpParams;return S=S.appendAll({realm_name:p}),this.http.delete(`${this.url}/${p}`,{params:S})}getRealmTree(p,S){let _={},v=[];return _.id=p.id,v.push(p.id),_.name=p.name,_.info=p,_.is_default=p.id===S,_.icon=l.FI.reweight,_.type="realm",{nodes:_,realmIds:v}}importRealmToken(p,S,_,v){let R={realm_token:p,zone_name:S,port:_,placement_spec:v};return this.http.post(`${this.url}/import_realm_token`,R)}getRealmTokens(){return this.rgwDaemonService.request(()=>this.http.get(`${this.url}/get_realm_tokens`))}static{this.\u0275fac=function(S){return new(S||u)(E.\u0275\u0275inject(a.HttpClient),E.\u0275\u0275inject(T.y))}}static{this.\u0275prov=E.\u0275\u0275defineInjectable({token:u,factory:u.\u0275fac,providedIn:"root"})}}},59876:(Z,A,r)=>{r.d(A,{B:()=>_});var a=r(84857),l=r(36618),E=r(50619),u=r(92919),F=r(80697),p=r(87536);let _=class Qr{constructor(R,P){this.http=R,this.rgwDaemonService=P,this.url="api/rgw/site"}get(R){return this.rgwDaemonService.request(P=>(R&&(P=P.append("query",R)),this.http.get(this.url,{params:P})))}isDefaultRealm(){return this.get("default-realm").pipe((0,E.mergeMap)(R=>this.rgwDaemonService.selectedDaemon$.pipe((0,E.map)(P=>P.realm_name===R))))}static{this.\u0275fac=function(P){return new(P||Qr)(p.\u0275\u0275inject(l.HttpClient),p.\u0275\u0275inject(u.y))}}static{this.\u0275prov=p.\u0275\u0275defineInjectable({token:Qr,factory:Qr.\u0275fac,providedIn:"root"})}};_=(0,a.__decorate)([F.G,(0,a.__metadata)("design:paramtypes",[l.HttpClient,u.y])],_)},28284:(Z,A,r)=>{r.d(A,{p:()=>M});var a=r(84857),l=r(36618),E=r(29841),f=r.n(E),u=r(95631),p=r(50619),_=r(92919),v=r(80697),R=r(87536);let M=class Yr{constructor(m,g){this.http=m,this.rgwDaemonService=g,this.url="api/rgw/user"}list(){return this.enumerate().pipe((0,p.mergeMap)(m=>m.length>0?(0,u.forkJoin)(m.map(g=>this.get(g))):(0,u.of)([])))}enumerate(m=!1){return this.rgwDaemonService.request(g=>(g=g.append("detailed",m),this.http.get(this.url,{params:g})))}enumerateEmail(){return this.rgwDaemonService.request(m=>this.http.get(`${this.url}/get_emails`,{params:m}))}get(m){return this.rgwDaemonService.request(g=>this.http.get(`${this.url}/${m}`,{params:g}))}getQuota(m){return this.rgwDaemonService.request(g=>this.http.get(`${this.url}/${m}/quota`,{params:g}))}create(m){return this.rgwDaemonService.request(g=>(f().keys(m).forEach(O=>{"object"==typeof m[O]&&(m[O]=JSON.stringify(m[O])),g=g.append(O,m[O])}),this.http.post(this.url,null,{params:g})))}update(m,g){return this.rgwDaemonService.request(O=>(f().keys(g).forEach(N=>{"object"==typeof g[N]&&(g[N]=JSON.stringify(g[N])),O=O.append(N,g[N])}),this.http.put(`${this.url}/${m}`,null,{params:O})))}updateQuota(m,g){return this.rgwDaemonService.request(O=>(f().keys(g).forEach(N=>{O=O.append(N,g[N])}),this.http.put(`${this.url}/${m}/quota`,null,{params:O})))}delete(m){return this.rgwDaemonService.request(g=>this.http.delete(`${this.url}/${m}`,{params:g}))}createSubuser(m,g){return this.rgwDaemonService.request(O=>(f().keys(g).forEach(N=>{O=O.append(N,g[N])}),this.http.post(`${this.url}/${m}/subuser`,null,{params:O})))}deleteSubuser(m,g){return this.rgwDaemonService.request(O=>this.http.delete(`${this.url}/${m}/subuser/${g}`,{params:O}))}addCapability(m,g,O){return this.rgwDaemonService.request(N=>(N=(N=N.append("type",g)).append("perm",O),this.http.post(`${this.url}/${m}/capability`,null,{params:N})))}deleteCapability(m,g,O){return this.rgwDaemonService.request(N=>(N=(N=N.append("type",g)).append("perm",O),this.http.delete(`${this.url}/${m}/capability`,{params:N})))}addS3Key(m,g){return this.rgwDaemonService.request(O=>(O=O.append("key_type","s3"),f().keys(g).forEach(N=>{O=O.append(N,g[N])}),this.http.post(`${this.url}/${m}/key`,null,{params:O})))}deleteS3Key(m,g){return this.rgwDaemonService.request(O=>(O=(O=O.append("key_type","s3")).append("access_key",g),this.http.delete(`${this.url}/${m}/key`,{params:O})))}exists(m){return this.get(m).pipe((0,p.mapTo)(!0),(0,p.catchError)(g=>(f().isFunction(g.preventDefault)&&g.preventDefault(),(0,u.of)(!1))))}emailExists(m){return m=decodeURIComponent(m),this.enumerateEmail().pipe((0,p.mergeMap)(g=>{const O=f().indexOf(g,m);return(0,u.of)(-1!==O)}))}updateUserRateLimit(m,g){return this.http.put(`${this.url}/${m}/ratelimit`,g)}getUserRateLimit(m){return this.http.get(`${this.url}/${m}/ratelimit`)}getGlobalUserRateLimit(){return this.http.get(`${this.url}/ratelimit`)}static{this.\u0275fac=function(g){return new(g||Yr)(R.\u0275\u0275inject(l.HttpClient),R.\u0275\u0275inject(_.y))}}static{this.\u0275prov=R.\u0275\u0275defineInjectable({token:Yr,factory:Yr.\u0275fac,providedIn:"root"})}};M=(0,a.__decorate)([v.G,(0,a.__metadata)("design:paramtypes",[l.HttpClient,_.y])],M)},20961:(Z,A,r)=>{r.d(A,{w:()=>f});var a=r(36618),l=r(46045),T=r(87536);class f{constructor(F){this.http=F,this.url="api/rgw/zone"}create(F,p,S,_,v){let R=new a.HttpParams;return R=R.appendAll({zone_name:F.name,zonegroup_name:p.name,default:S,master:_,zone_endpoints:v,access_key:F.system_key.access_key,secret_key:F.system_key.secret_key}),this.http.post(`${this.url}`,null,{params:R})}list(){return this.http.get(`${this.url}`)}get(F){return this.http.get(`${this.url}/${F.name}`)}getAllZonesInfo(){return this.http.get(`${this.url}/get_all_zones_info`)}delete(F,p,S,_){let v=new a.HttpParams;return v=v.appendAll({zone_name:F,delete_pools:p,pools:Array.from(S.values()),zonegroup_name:_}),this.http.delete(`${this.url}/${F}`,{params:v})}update(F,p,S,_,v,R,P,M,b,m,g,O,N){let c={zone_name:F.name,zonegroup_name:p.name,new_zone_name:S,default:_,master:v,zone_endpoints:R,access_key:F.system_key.access_key,secret_key:F.system_key.secret_key,placement_target:P,data_pool:M,index_pool:b,data_extra_pool:m,storage_class:g,data_pool_class:O,compression:N};return this.http.put(`${this.url}/${F.name}`,c)}getZoneTree(F,p,S,_,v){let R={},P=[];R.id=F.id,P.push(F.id),R.name=F.name,R.type="zone",R.name=F.name,R.info=F,R.icon=l.FI.deploy,R.zone_zonegroup=_,R.parent=_?_.name:"",R.second_parent=v?v.name:"",R.is_default=F.id===p,R.endpoints=F.endpoints,R.is_master=!(!_||_.master_zone!==F.id),R.type="zone";const M=S.map(m=>m.name);R.secondary_zone=!M.includes(F.name);const b=S.filter(m=>m.name===F.name);if(b&&b.length>0){const m=b[0].system_key.access_key,g=b[0].system_key.secret_key;R.access_key=m||"",R.secret_key=g||"",R.user=!(!m||""===m)}return""===R.access_key||"null"===R.access_key?(R.show_warning=!0,R.warning_message="Access/Secret keys not found"):R.show_warning=!1,R.endpoints&&0===R.endpoints.length&&(R.show_warning=!0,R.warning_message=R.warning_message+"\nEndpoints not configured"),{nodes:R,zoneIds:P}}getPoolNames(){return this.http.get(`${this.url}/get_pool_names`)}createSystemUser(F,p){let S={userName:F,zoneName:p};return this.http.put(`${this.url}/create_system_user`,S)}getUserList(F){let p=new a.HttpParams;return p=p.appendAll({zoneName:F}),this.http.get(`${this.url}/get_user_list`,{params:p})}static{this.\u0275fac=function(p){return new(p||f)(T.\u0275\u0275inject(a.HttpClient))}}static{this.\u0275prov=T.\u0275\u0275defineInjectable({token:f,factory:f.\u0275fac,providedIn:"root"})}}},3140:(Z,A,r)=>{r.d(A,{Z:()=>f});var a=r(36618),l=r(46045),T=r(87536);class f{constructor(F){this.http=F,this.url="api/rgw/zonegroup"}create(F,p,S,_){let v=new a.HttpParams;return v=v.appendAll({realm_name:F.name,zonegroup_name:p.name,default:S,master:_,zonegroup_endpoints:p.endpoints}),this.http.post(`${this.url}`,null,{params:v})}update(F,p,S,_,v,R,P){let M={zonegroup_name:p.name,realm_name:F.name,new_zonegroup_name:S,default:_,master:v,zonegroup_endpoints:p.endpoints,placement_targets:p.placement_targets,remove_zones:R,add_zones:P};return this.http.put(`${this.url}/${p.name}`,M)}list(){return this.http.get(`${this.url}`)}get(F){return this.http.get(`${this.url}/${F.name}`)}getAllZonegroupsInfo(){return this.http.get(`${this.url}/get_all_zonegroups_info`)}delete(F,p,S){let _=new a.HttpParams;return _=_.appendAll({zonegroup_name:F,delete_pools:p,pools:Array.from(S.values())}),this.http.delete(`${this.url}/${F}`,{params:_})}getZonegroupTree(F,p,S){let _={};return _.id=F.id,_.name=F.name,_.info=F,_.icon=l.FI.cubes,_.is_master=F.is_master,_.parent=S?S.name:"",_.is_default=F.id===p,_.type="zonegroup",_.endpoints=F.endpoints,_.master_zone=F.master_zone,_.zones=F.zones,_.placement_targets=F.placement_targets,_.default_placement=F.default_placement,0===_.endpoints.length&&(_.show_warning=!0,_.warning_message="Endpoints not configured"),_}static{this.\u0275fac=function(p){return new(p||f)(T.\u0275\u0275inject(a.HttpClient))}}static{this.\u0275prov=T.\u0275\u0275defineInjectable({token:f,factory:f.\u0275fac,providedIn:"root"})}}},11549:(Z,A,r)=>{r.d(A,{h:()=>S});var a=r(36618),l=r(29841),T=r.n(l),E=r(50619),u=r(87536);class S{constructor(v){this.http=v,this.settings={}}getValues(v){return T().isArray(v)&&(v=v.join(",")),this.http.get(`api/settings?names=${v}`).pipe((0,E.map)(R=>{const P={};return T().forEach(R,M=>{T().set(P,M.name,M.value)}),P}))}ifSettingConfigured(v,R,P,M=!1){const b=this.settings[v];M||void 0===b?this.http.get(v).subscribe(m=>{this.settings[v]=this.getSettingsValue(m),this.ifSettingConfigured(v,R,P)},m=>{401!==m.status&&(this.settings[v]="")}):""!==b?R(b):P&&P()}disableSetting(v){this.settings[v]=""}getSettingsValue(v){return v.value||v.instance||""}validateGrafanaDashboardUrl(v){return this.http.get(`api/grafana/validation/${v}`)}getStandardSettings(){return this.http.get("ui-api/standard_settings")}static{this.\u0275fac=function(R){return new(R||S)(u.\u0275\u0275inject(a.HttpClient))}}static{this.\u0275prov=u.\u0275\u0275defineInjectable({token:S,factory:S.\u0275fac,providedIn:"root"})}}},36719:(Z,A,r)=>{r.d(A,{D:()=>p});var a=r(36618),l=r(95631),E=r(50619),u=r(87536);class p{constructor(_){this.http=_}list(){return this.http.get("api/user")}delete(_){return this.http.delete(`api/user/${_}`)}get(_){return this.http.get(`api/user/${_}`)}create(_){return this.http.post("api/user",_)}update(_){return this.http.put(`api/user/${_.username}`,_)}changePassword(_,v,R){return this.http.post(`api/user/${_}/change_password`,{old_password:v,new_password:R})}validateUserName(_){return this.get(_).pipe((0,E.mapTo)(!0),(0,E.catchError)(v=>(v.preventDefault(),(0,l.of)(!1))))}validatePassword(_,v=null,R=null){return this.http.post("api/user/validate_password",{password:_,username:v,old_password:R})}static{this.\u0275fac=function(v){return new(v||p)(u.\u0275\u0275inject(a.HttpClient))}}static{this.\u0275prov=u.\u0275\u0275defineInjectable({token:p,factory:p.\u0275fac,providedIn:"root"})}}},32609:(Z,A,r)=>{r.d(A,{c:()=>l});var a=r(29841),e=r.n(a);class l{static updateChanged(E,f){let u=!1;return Object.keys(f).forEach(F=>{const p=f[F];e().isEqual(p,E[F])||(E[F]=p,u=!0)}),u}static cdVersionHeader(E,f){return`application/vnd.ceph.api.v${E}.${f}+json`}}},35855:(Z,A,r)=>{r.d(A,{_:()=>a});class a{propertyValue(l,T){const E=T??document.body;return getComputedStyle(E).getPropertyValue(`--${l}`)}}},25947:(Z,A,r)=>{r.d(A,{D:()=>e});var a=r(3912);class e{constructor(T){this.ngZone=T}setExpandedRow(T){this.expandedRow=T}setTableRefreshTimeout(){clearTimeout(this.staleTimeout),this.ngZone.runOutsideAngular(()=>{this.staleTimeout=window.setTimeout(()=>{this.ngZone.run(()=>{this.tableStatus=new a.F("secondary",$localize`The user list data might be stale. If needed, you can manually reload it.`)})},1e4)})}}},2243:(Z,A,r)=>{r.d(A,{m:()=>l});var a=r(29130),e=r(3912);class l extends e.F{constructor(E=a.k.ValueOk,f=""){switch(super(),E){case a.k.ValueOk:this.type="ghost",this.msg="";break;case a.k.ValueNone:this.type="primary",this.msg=(f?$localize`Retrieving data for ${f}.`:$localize`Retrieving data.`)+" "+$localize`Please wait...`;break;case a.k.ValueStale:this.type="secondary",this.msg=f?$localize`Displaying previously cached data for ${f}.`:$localize`Displaying previously cached data.`;break;case a.k.ValueException:this.type="danger",this.msg=(f?$localize`Could not load data for ${f}.`:$localize`Could not load data.`)+" "+$localize`Please check the cluster health.`}}}},3912:(Z,A,r)=>{r.d(A,{F:()=>a});class a{constructor(l="ghost",T=""){this.type=l,this.msg=T}}},92805:(Z,A,r)=>{r.d(A,{m:()=>M});var a=r(87536),l=r(46045),T=r(91974),f=r(90476),u=r(3600);const p=["content"],S=["actionTpl"],_=["*"];function v(b,m){1&b&&a.\u0275\u0275projection(0)}function R(b,m){if(1&b){const g=a.\u0275\u0275getCurrentView();a.\u0275\u0275elementStart(0,"button",5),a.\u0275\u0275listener("click",function(){a.\u0275\u0275restoreView(g);const N=a.\u0275\u0275nextContext(2);return a.\u0275\u0275resetView(N.onAction())}),a.\u0275\u0275i18n(1,2),a.\u0275\u0275elementEnd()}if(2&b){const g=a.\u0275\u0275nextContext(2);a.\u0275\u0275property("title",g.actionName),a.\u0275\u0275advance(),a.\u0275\u0275i18nExp(g.actionName),a.\u0275\u0275i18nApply(1)}}function P(b,m){if(1&b&&a.\u0275\u0275template(0,R,2,2,"button",4),2&b){const g=a.\u0275\u0275nextContext();a.\u0275\u0275property("ngIf",g.actionName)}}class M{constructor(){this.title="",this.showTitle=!0,this.size="normal",this.dismissible=!1,this.spacingClass="",this.actionName="",this.lowContrast=!0,this.variant="inline",this.dismissed=new a.EventEmitter,this.action=new a.EventEmitter,this.icons=l.FI}ngOnInit(){const m="danger"===this.type?"error":this.type;switch(this.type){case"warning":this.title=this.title||$localize`Warning`;break;case"error":this.title=this.title||$localize`Error`;break;case"info":this.title=this.title||$localize`Information`;break;case"success":this.title=this.title||$localize`Success`;break;case"danger":this.title=this.title||$localize`Danger`}this.notificationContent={type:m,template:this.alertContent,actionsTemplate:this.actionTpl,showClose:this.dismissible,title:this.showTitle?this.title:"",lowContrast:this.lowContrast,variant:this.variant}}onClose(){this.dismissed.emit()}onAction(){this.action.emit()}static{this.\u0275fac=function(g){return new(g||M)}}static{this.\u0275cmp=a.\u0275\u0275defineComponent({type:M,selectors:[["cd-alert-panel"]],viewQuery:function(g,O){if(1&g&&(a.\u0275\u0275viewQuery(p,7),a.\u0275\u0275viewQuery(S,7)),2&g){let N;a.\u0275\u0275queryRefresh(N=a.\u0275\u0275loadQuery())&&(O.alertContent=N.first),a.\u0275\u0275queryRefresh(N=a.\u0275\u0275loadQuery())&&(O.actionTpl=N.first)}},inputs:{title:"title",type:"type",showTitle:"showTitle",size:"size",dismissible:"dismissible",spacingClass:"spacingClass",actionName:"actionName",lowContrast:"lowContrast",variant:"variant"},outputs:{dismissed:"dismissed",action:"action"},ngContentSelectors:_,decls:5,vars:2,consts:()=>{let m;return m=$localize`:␟a16fd7107343c2d50b1fbde71b4e6ceadaeda635␟5602924004056009780:${"\ufffd0\ufffd"}:INTERPOLATION: `,[["content",""],["actionTpl",""],m,[1,"mb-1","content-theme",3,"close","ngClass","notificationObj"],["cdsActionableButton","","cdsButton","ghost","size","md",3,"title","click",4,"ngIf"],["cdsActionableButton","","cdsButton","ghost","size","md",3,"click","title"]]},template:function(g,O){if(1&g){const N=a.\u0275\u0275getCurrentView();a.\u0275\u0275projectionDef(),a.\u0275\u0275elementStart(0,"cds-actionable-notification",3),a.\u0275\u0275listener("close",function(){return a.\u0275\u0275restoreView(N),a.\u0275\u0275resetView(O.onClose())}),a.\u0275\u0275elementEnd(),a.\u0275\u0275template(1,v,1,0,"ng-template",null,0,a.\u0275\u0275templateRefExtractor)(3,P,1,1,"ng-template",null,1,a.\u0275\u0275templateRefExtractor)}2&g&&a.\u0275\u0275property("ngClass",O.spacingClass)("notificationObj",O.notificationContent)},dependencies:[T.NgClass,T.NgIf,f.S,u.Button,u.ActionableButton,u.ActionableNotification],styles:[".alert-panel-icon[_ngcontent-%COMP%]{padding-right:.5em;vertical-align:top}.alert-panel-title[_ngcontent-%COMP%]{font-weight:700}.alert[_ngcontent-%COMP%]{margin-bottom:0}cds-actionable-notification[_ngcontent-%COMP%]{max-width:100%}"]})}}},33117:(Z,A,r)=>{r.d(A,{X:()=>v});var a=r(91974),l=r(87536),E=r(76218),u=r(54372),F=r(90476),p=r(3600);const _=(R,P)=>({"w-100":R,"w-50 float-end":P});class v{constructor(P,M,b){this.location=P,this.actionLabels=M,this.route=b,this.backAction=new l.EventEmitter,this.disabled=!1,this.modalForm=!1,this.showSubmit=!1,this.hasModalOutlet=!1}ngOnInit(){this.name=this.name||this.actionLabels.CANCEL,this.hasModalOutlet="modal"===this.route.outlet}back(){this.disabled||(0===this.backAction.observers.length||this.hasModalOutlet?this.location.back():this.backAction.emit())}static{this.\u0275fac=function(M){return new(M||v)(l.\u0275\u0275directiveInject(a.Location),l.\u0275\u0275directiveInject(u.Ss),l.\u0275\u0275directiveInject(E.ActivatedRoute))}}static{this.\u0275cmp=l.\u0275\u0275defineComponent({type:v,selectors:[["cd-back-button"]],inputs:{name:"name",disabled:"disabled",modalForm:"modalForm",showSubmit:"showSubmit"},outputs:{backAction:"backAction"},decls:2,vars:6,consts:[["aria-label","Back","type","button","size","lg","cdsButton","secondary",1,"w-100","tc_backButton",3,"click","ngClass","disabled"]],template:function(M,b){1&M&&(l.\u0275\u0275elementStart(0,"button",0),l.\u0275\u0275listener("click",function(){return b.back()}),l.\u0275\u0275text(1),l.\u0275\u0275elementEnd()),2&M&&(l.\u0275\u0275property("ngClass",l.\u0275\u0275pureFunction2(3,_,b.modalForm&&b.showSubmit,b.modalForm&&!b.showSubmit))("disabled",b.disabled),l.\u0275\u0275advance(),l.\u0275\u0275textInterpolate1(" ",b.name,"\n"))},dependencies:[a.NgClass,F.S,p.Button]})}}},78845:(Z,A,r)=>{r.d(A,{C:()=>Wt});var e,j,a=r(46045);(j=e||(e={})).memory="Memory",j.storage="Drive",j.processors="CPU",j.network="Network",j.power="Power supply",j.fans="Fan module";var l=r(87536),T=r(91974),E=r(76218),f=r(3600),u=r(46765),F=r(63284);const p=(j,he)=>[j,he];function S(j,he){if(1&j&&l.\u0275\u0275i18n(0,8,1),2&j){const Y=l.\u0275\u0275nextContext(3);l.\u0275\u0275i18nExp(Y.title),l.\u0275\u0275i18nApply(0)}}function _(j,he){if(1&j&&l.\u0275\u0275i18n(0,8,2),2&j){const Y=l.\u0275\u0275nextContext(3);l.\u0275\u0275i18nExp(Y.title),l.\u0275\u0275i18nApply(0)}}function v(j,he){if(1&j&&l.\u0275\u0275i18n(0,8,3),2&j){const Y=l.\u0275\u0275nextContext(3);l.\u0275\u0275i18nExp(Y.title),l.\u0275\u0275i18nApply(0)}}function R(j,he){if(1&j&&(l.\u0275\u0275elementStart(0,"a",13),l.\u0275\u0275i18nStart(1,8),l.\u0275\u0275template(2,S,1,1,"ng-template",22)(3,_,1,1,"ng-template",23)(4,v,1,1,"ng-template",24),l.\u0275\u0275i18nEnd(),l.\u0275\u0275elementEnd()),2&j){const Y=l.\u0275\u0275nextContext(2);l.\u0275\u0275property("routerLink",Y.link)("ngPlural",Y.total),l.\u0275\u0275advance(4),l.\u0275\u0275i18nExp(Y.total),l.\u0275\u0275i18nApply(1)}}function P(j,he){if(1&j&&l.\u0275\u0275template(0,R,5,3,"a",21),2&j){const Y=l.\u0275\u0275nextContext(),lt=l.\u0275\u0275reference(25);l.\u0275\u0275property("ngIf",Y.link&&Y.total>0)("ngIfElse",lt)}}function M(j,he){if(1&j&&(l.\u0275\u0275elementStart(0,"a",14),l.\u0275\u0275text(1),l.\u0275\u0275elementEnd()),2&j){const Y=l.\u0275\u0275nextContext(2);l.\u0275\u0275property("routerLink",Y.link),l.\u0275\u0275advance(),l.\u0275\u0275textInterpolate1("",Y.title," ")}}function b(j,he){if(1&j&&l.\u0275\u0275template(0,M,2,2,"a",25),2&j){const Y=l.\u0275\u0275nextContext(),lt=l.\u0275\u0275reference(25);l.\u0275\u0275property("ngIf",Y.link)("ngIfElse",lt)}}function m(j,he){1&j&&l.\u0275\u0275elementContainer(0)}function g(j,he){if(1&j&&(l.\u0275\u0275elementContainerStart(0),l.\u0275\u0275template(1,m,1,0,"ng-container",26),l.\u0275\u0275elementContainerEnd()),2&j){l.\u0275\u0275nextContext();const Y=l.\u0275\u0275reference(19);l.\u0275\u0275advance(),l.\u0275\u0275property("ngTemplateOutlet",Y)}}function O(j,he){1&j&&l.\u0275\u0275elementContainer(0)}function N(j,he){if(1&j&&(l.\u0275\u0275elementContainerStart(0),l.\u0275\u0275template(1,O,1,0,"ng-container",26),l.\u0275\u0275elementContainerEnd()),2&j){l.\u0275\u0275nextContext();const Y=l.\u0275\u0275reference(17);l.\u0275\u0275advance(),l.\u0275\u0275property("ngTemplateOutlet",Y)}}function c(j,he){1&j&&l.\u0275\u0275elementContainer(0)}function z(j,he){if(1&j&&(l.\u0275\u0275elementContainerStart(0),l.\u0275\u0275template(1,c,1,0,"ng-container",26),l.\u0275\u0275elementContainerEnd()),2&j){l.\u0275\u0275nextContext();const Y=l.\u0275\u0275reference(21);l.\u0275\u0275advance(),l.\u0275\u0275property("ngTemplateOutlet",Y)}}function B(j,he){1&j&&l.\u0275\u0275elementContainer(0)}function q(j,he){if(1&j&&(l.\u0275\u0275elementContainerStart(0),l.\u0275\u0275template(1,B,1,0,"ng-container",26),l.\u0275\u0275elementContainerEnd()),2&j){l.\u0275\u0275nextContext();const Y=l.\u0275\u0275reference(15);l.\u0275\u0275advance(),l.\u0275\u0275property("ngTemplateOutlet",Y)}}function Q(j,he){if(1&j){const Y=l.\u0275\u0275getCurrentView();l.\u0275\u0275elementStart(0,"span",27)(1,"a",28),l.\u0275\u0275listener("click",function(){l.\u0275\u0275restoreView(Y);const vn=l.\u0275\u0275nextContext();return l.\u0275\u0275resetView(vn.toggleDropdown())}),l.\u0275\u0275elementEnd()()}if(2&j){const Y=l.\u0275\u0275nextContext();l.\u0275\u0275advance(),l.\u0275\u0275attribute("aria-expanded",Y.dropdownToggled)}}function G(j,he){1&j&&l.\u0275\u0275elementContainer(0)}function D(j,he){if(1&j&&(l.\u0275\u0275elementStart(0,"div"),l.\u0275\u0275element(1,"hr"),l.\u0275\u0275template(2,G,1,0,"ng-container",26),l.\u0275\u0275elementEnd()),2&j){l.\u0275\u0275nextContext();const Y=l.\u0275\u0275reference(27);l.\u0275\u0275advance(2),l.\u0275\u0275property("ngTemplateOutlet",Y)}}function oe(j,he){1&j&&l.\u0275\u0275elementContainer(0)}function fe(j,he){if(1&j&&l.\u0275\u0275template(0,oe,1,0,"ng-container",26),2&j){l.\u0275\u0275nextContext(2);const Y=l.\u0275\u0275reference(23);l.\u0275\u0275property("ngTemplateOutlet",Y)}}function ye(j,he){if(1&j&&(l.\u0275\u0275elementStart(0,"span"),l.\u0275\u0275text(1),l.\u0275\u0275elementEnd()),2&j){const Y=l.\u0275\u0275nextContext(4);l.\u0275\u0275advance(),l.\u0275\u0275textInterpolate1(" ",Y.data.success," ")}}function je(j,he){if(1&j&&(l.\u0275\u0275elementStart(0,"span"),l.\u0275\u0275text(1),l.\u0275\u0275elementEnd()),2&j){const Y=l.\u0275\u0275nextContext(4);l.\u0275\u0275advance(),l.\u0275\u0275textInterpolate1(" ",null==Y.data.categoryPgAmount?null:Y.data.categoryPgAmount.clean," ")}}function Le(j,he){if(1&j&&(l.\u0275\u0275elementStart(0,"span"),l.\u0275\u0275template(1,ye,2,1,"span",20)(2,je,2,1,"span",20),l.\u0275\u0275element(3,"cd-icon",30),l.\u0275\u0275elementEnd()),2&j){const Y=l.\u0275\u0275nextContext(3);l.\u0275\u0275advance(),l.\u0275\u0275property("ngIf",Y.data.success||0===Y.data.success&&0===Y.data.total),l.\u0275\u0275advance(),l.\u0275\u0275property("ngIf",null==Y.data.categoryPgAmount?null:Y.data.categoryPgAmount.clean)}}function Fe(j,he){if(1&j&&(l.\u0275\u0275elementStart(0,"span"),l.\u0275\u0275text(1),l.\u0275\u0275elementEnd()),2&j){const Y=l.\u0275\u0275nextContext(4);l.\u0275\u0275advance(),l.\u0275\u0275textInterpolate1(" ",Y.data.info," ")}}function te(j,he){if(1&j&&(l.\u0275\u0275elementStart(0,"span",31),l.\u0275\u0275template(1,Fe,2,1,"span",20),l.\u0275\u0275element(2,"cd-icon",32),l.\u0275\u0275elementEnd()),2&j){const Y=l.\u0275\u0275nextContext(3);l.\u0275\u0275advance(),l.\u0275\u0275property("ngIf",Y.data.info)}}function le(j,he){if(1&j&&(l.\u0275\u0275elementStart(0,"span"),l.\u0275\u0275text(1),l.\u0275\u0275elementEnd()),2&j){const Y=l.\u0275\u0275nextContext(4);l.\u0275\u0275advance(),l.\u0275\u0275textInterpolate1(" ",Y.data.warn," ")}}function ie(j,he){if(1&j&&(l.\u0275\u0275elementStart(0,"span"),l.\u0275\u0275text(1),l.\u0275\u0275elementEnd()),2&j){const Y=l.\u0275\u0275nextContext(4);l.\u0275\u0275advance(),l.\u0275\u0275textInterpolate1(" ",null==Y.data.categoryPgAmount?null:Y.data.categoryPgAmount.warning," ")}}function _e(j,he){if(1&j&&(l.\u0275\u0275elementStart(0,"span",31),l.\u0275\u0275template(1,le,2,1,"span",20)(2,ie,2,1,"span",20),l.\u0275\u0275element(3,"cd-icon",33),l.\u0275\u0275elementEnd()),2&j){const Y=l.\u0275\u0275nextContext(3);l.\u0275\u0275advance(),l.\u0275\u0275property("ngIf",Y.data.warn),l.\u0275\u0275advance(),l.\u0275\u0275property("ngIf",null==Y.data.categoryPgAmount?null:Y.data.categoryPgAmount.warning)}}function ue(j,he){if(1&j&&(l.\u0275\u0275elementStart(0,"span"),l.\u0275\u0275text(1),l.\u0275\u0275elementEnd()),2&j){const Y=l.\u0275\u0275nextContext(4);l.\u0275\u0275advance(),l.\u0275\u0275textInterpolate1(" ",Y.data.error," ")}}function C(j,he){if(1&j&&(l.\u0275\u0275elementStart(0,"span"),l.\u0275\u0275text(1),l.\u0275\u0275elementEnd()),2&j){const Y=l.\u0275\u0275nextContext(4);l.\u0275\u0275advance(),l.\u0275\u0275textInterpolate1(" ",null==Y.data.categoryPgAmount?null:Y.data.categoryPgAmount.unknown," ")}}function K(j,he){if(1&j&&(l.\u0275\u0275elementStart(0,"span",31),l.\u0275\u0275template(1,ue,2,1,"span",20)(2,C,2,1,"span",20),l.\u0275\u0275element(3,"cd-icon",34),l.\u0275\u0275elementEnd()),2&j){const Y=l.\u0275\u0275nextContext(3);l.\u0275\u0275advance(),l.\u0275\u0275property("ngIf",Y.data.error),l.\u0275\u0275advance(),l.\u0275\u0275property("ngIf",null==Y.data.categoryPgAmount?null:Y.data.categoryPgAmount.unknown)}}function ce(j,he){if(1&j&&(l.\u0275\u0275elementStart(0,"span"),l.\u0275\u0275text(1),l.\u0275\u0275elementEnd()),2&j){const Y=l.\u0275\u0275nextContext(4);l.\u0275\u0275advance(),l.\u0275\u0275textInterpolate1(" ",null==Y.data.categoryPgAmount?null:Y.data.categoryPgAmount.working," ")}}function Ee(j,he){if(1&j&&(l.\u0275\u0275elementStart(0,"span",31),l.\u0275\u0275template(1,ce,2,1,"span",20),l.\u0275\u0275element(2,"i",35),l.\u0275\u0275elementEnd()),2&j){const Y=l.\u0275\u0275nextContext(3);l.\u0275\u0275advance(),l.\u0275\u0275property("ngIf",null==Y.data.categoryPgAmount?null:Y.data.categoryPgAmount.working),l.\u0275\u0275advance(),l.\u0275\u0275property("ngClass",l.\u0275\u0275pureFunction2(2,p,Y.icons.spinner,Y.icons.spin))}}function Ce(j,he){if(1&j&&l.\u0275\u0275template(0,Le,4,2,"span",20)(1,te,3,1,"span",29)(2,_e,4,2,"span",29)(3,K,4,2,"span",29)(4,Ee,3,5,"span",29),2&j){const Y=l.\u0275\u0275nextContext(2);l.\u0275\u0275property("ngIf",Y.data.success||(null==Y.data.categoryPgAmount?null:Y.data.categoryPgAmount.clean)||0===Y.data.success&&0===Y.data.total),l.\u0275\u0275advance(),l.\u0275\u0275property("ngIf",Y.data.info),l.\u0275\u0275advance(),l.\u0275\u0275property("ngIf",Y.data.warn||(null==Y.data.categoryPgAmount?null:Y.data.categoryPgAmount.warning)),l.\u0275\u0275advance(),l.\u0275\u0275property("ngIf",Y.data.error||(null==Y.data.categoryPgAmount?null:Y.data.categoryPgAmount.unknown)),l.\u0275\u0275advance(),l.\u0275\u0275property("ngIf",null==Y.data.categoryPgAmount?null:Y.data.categoryPgAmount.working)}}function Ue(j,he){if(1&j&&l.\u0275\u0275template(0,fe,1,1,"ng-container")(1,Ce,5,5),2&j){const Y=l.\u0275\u0275nextContext();l.\u0275\u0275conditional(null===Y.data?0:1)}}function He(j,he){1&j&&l.\u0275\u0275elementContainer(0)}function it(j,he){if(1&j&&l.\u0275\u0275template(0,He,1,0,"ng-container",26),2&j){l.\u0275\u0275nextContext(2);const Y=l.\u0275\u0275reference(23);l.\u0275\u0275property("ngTemplateOutlet",Y)}}function ct(j,he){if(1&j&&(l.\u0275\u0275elementStart(0,"span"),l.\u0275\u0275text(1),l.\u0275\u0275element(2,"cd-icon",30),l.\u0275\u0275elementEnd()),2&j){const Y=l.\u0275\u0275nextContext(3);l.\u0275\u0275advance(),l.\u0275\u0275textInterpolate1(" ",Y.data.up," ")}}function tt(j,he){if(1&j&&(l.\u0275\u0275elementStart(0,"span"),l.\u0275\u0275text(1),l.\u0275\u0275elementStart(2,"span",36),l.\u0275\u0275text(3," up "),l.\u0275\u0275elementEnd()()),2&j){const Y=l.\u0275\u0275nextContext(3);l.\u0275\u0275advance(),l.\u0275\u0275textInterpolate1(" ",Y.data.up," ")}}function Ge(j,he){if(1&j&&(l.\u0275\u0275elementStart(0,"span",31),l.\u0275\u0275text(1),l.\u0275\u0275elementStart(2,"span",36),l.\u0275\u0275text(3," in "),l.\u0275\u0275elementEnd()()),2&j){const Y=l.\u0275\u0275nextContext(3);l.\u0275\u0275advance(),l.\u0275\u0275textInterpolate1(" ",Y.data.in," ")}}function ze(j,he){if(1&j&&(l.\u0275\u0275elementStart(0,"span",31),l.\u0275\u0275text(1),l.\u0275\u0275elementStart(2,"span",37),l.\u0275\u0275text(3," down "),l.\u0275\u0275elementEnd()()),2&j){const Y=l.\u0275\u0275nextContext(3);l.\u0275\u0275advance(),l.\u0275\u0275textInterpolate1(" ",Y.data.down," ")}}function ut(j,he){if(1&j&&(l.\u0275\u0275elementStart(0,"span",31),l.\u0275\u0275text(1),l.\u0275\u0275elementStart(2,"span",37),l.\u0275\u0275text(3," out "),l.\u0275\u0275elementEnd()()),2&j){const Y=l.\u0275\u0275nextContext(3);l.\u0275\u0275advance(),l.\u0275\u0275textInterpolate1(" ",Y.data.out," ")}}function Pe(j,he){if(1&j&&(l.\u0275\u0275elementStart(0,"span",31),l.\u0275\u0275text(1),l.\u0275\u0275elementStart(2,"span",38),l.\u0275\u0275text(3," nearfull"),l.\u0275\u0275elementEnd()()),2&j){const Y=l.\u0275\u0275nextContext(3);l.\u0275\u0275advance(),l.\u0275\u0275textInterpolate1(" ",Y.data.nearfull," ")}}function De(j,he){if(1&j&&(l.\u0275\u0275elementStart(0,"span",31),l.\u0275\u0275text(1),l.\u0275\u0275elementStart(2,"span",39),l.\u0275\u0275text(3," full "),l.\u0275\u0275elementEnd()()),2&j){const Y=l.\u0275\u0275nextContext(3);l.\u0275\u0275advance(),l.\u0275\u0275textInterpolate1(" ",Y.data.full," ")}}function Ie(j,he){if(1&j&&l.\u0275\u0275template(0,ct,3,1,"span",20)(1,tt,4,1,"span",20)(2,Ge,4,1,"span",29)(3,ze,4,1,"span",29)(4,ut,4,1,"span",29)(5,Pe,4,1,"span",29)(6,De,4,1,"span",29),2&j){const Y=l.\u0275\u0275nextContext(2);l.\u0275\u0275property("ngIf",Y.data.up===Y.data.in),l.\u0275\u0275advance(),l.\u0275\u0275property("ngIf",Y.data.up!==Y.data.in),l.\u0275\u0275advance(),l.\u0275\u0275property("ngIf",Y.data.in!==Y.data.up),l.\u0275\u0275advance(),l.\u0275\u0275property("ngIf",Y.data.down),l.\u0275\u0275advance(),l.\u0275\u0275property("ngIf",Y.data.out),l.\u0275\u0275advance(),l.\u0275\u0275property("ngIf",Y.data.nearfull),l.\u0275\u0275advance(),l.\u0275\u0275property("ngIf",Y.data.full)}}function Qe(j,he){if(1&j&&l.\u0275\u0275template(0,it,1,1,"ng-container")(1,Ie,7,7),2&j){const Y=l.\u0275\u0275nextContext();l.\u0275\u0275conditional(null===Y.data?0:1)}}function qe(j,he){1&j&&l.\u0275\u0275elementContainer(0)}function ht(j,he){if(1&j&&l.\u0275\u0275template(0,qe,1,0,"ng-container",26),2&j){l.\u0275\u0275nextContext(2);const Y=l.\u0275\u0275reference(23);l.\u0275\u0275property("ngTemplateOutlet",Y)}}function St(j,he){1&j&&l.\u0275\u0275element(0,"cd-icon",30)}function Jt(j,he){if(1&j&&(l.\u0275\u0275elementStart(0,"span",31),l.\u0275\u0275text(1),l.\u0275\u0275element(2,"cd-icon",34),l.\u0275\u0275elementEnd()),2&j){const Y=l.\u0275\u0275nextContext(3);l.\u0275\u0275advance(),l.\u0275\u0275textInterpolate1(" ",null==Y.data?null:Y.data.down," ")}}function Lt(j,he){if(1&j&&(l.\u0275\u0275elementStart(0,"span"),l.\u0275\u0275text(1),l.\u0275\u0275template(2,St,1,0,"cd-icon",40),l.\u0275\u0275elementEnd(),l.\u0275\u0275template(3,Jt,3,1,"span",29)),2&j){const Y=l.\u0275\u0275nextContext(2);l.\u0275\u0275advance(),l.\u0275\u0275textInterpolate1(" ",null==Y.data?null:Y.data.up," "),l.\u0275\u0275advance(),l.\u0275\u0275property("ngIf",(null==Y.data?null:Y.data.up)||0===(null==Y.data?null:Y.data.up)),l.\u0275\u0275advance(),l.\u0275\u0275property("ngIf",null==Y.data?null:Y.data.down)}}function Zt(j,he){if(1&j&&l.\u0275\u0275template(0,ht,1,1,"ng-container")(1,Lt,4,3),2&j){const Y=l.\u0275\u0275nextContext();l.\u0275\u0275conditional(null===Y.data||null===Y.total?0:1)}}function zt(j,he){if(1&j&&(l.\u0275\u0275elementStart(0,"span"),l.\u0275\u0275text(1),l.\u0275\u0275element(2,"cd-icon",30),l.\u0275\u0275elementEnd()),2&j){const Y=l.\u0275\u0275nextContext(3);l.\u0275\u0275advance(),l.\u0275\u0275textInterpolate1(" ",Y.data," ")}}function Xt(j,he){if(1&j&&l.\u0275\u0275template(0,zt,3,1,"span",41),2&j){l.\u0275\u0275nextContext();const Y=l.\u0275\u0275reference(3),lt=l.\u0275\u0275nextContext();l.\u0275\u0275property("ngIf",!lt.dropdownTotalError)("ngIfElse",Y)}}function bt(j,he){1&j&&l.\u0275\u0275elementContainer(0)}function ft(j,he){if(1&j&&l.\u0275\u0275template(0,bt,1,0,"ng-container",26),2&j){l.\u0275\u0275nextContext(2);const Y=l.\u0275\u0275reference(23);l.\u0275\u0275property("ngTemplateOutlet",Y)}}function Tt(j,he){if(1&j&&(l.\u0275\u0275elementStart(0,"span"),l.\u0275\u0275text(1),l.\u0275\u0275element(2,"cd-icon",30),l.\u0275\u0275elementEnd()),2&j){const Y=l.\u0275\u0275nextContext(3);l.\u0275\u0275advance(),l.\u0275\u0275textInterpolate1(" ",Y.data-Y.dropdownTotalError," ")}}function nt(j,he){if(1&j&&(l.\u0275\u0275template(0,Tt,3,1,"span",20),l.\u0275\u0275elementStart(1,"span"),l.\u0275\u0275text(2),l.\u0275\u0275element(3,"cd-icon",34),l.\u0275\u0275elementEnd()),2&j){const Y=l.\u0275\u0275nextContext(2);l.\u0275\u0275property("ngIf",Y.data-Y.dropdownTotalError>0),l.\u0275\u0275advance(2),l.\u0275\u0275textInterpolate1(" ",Y.dropdownTotalError," ")}}function We(j,he){if(1&j&&l.\u0275\u0275template(0,Xt,1,2,"span")(1,ft,1,1,"ng-container")(2,nt,4,2,"ng-template",null,7,l.\u0275\u0275templateRefExtractor),2&j){const Y=l.\u0275\u0275nextContext();l.\u0275\u0275conditional(0===Y.data||Y.data?0:1)}}function at(j,he){1&j&&l.\u0275\u0275element(0,"cds-inline-loading")}function Et(j,he){if(1&j&&l.\u0275\u0275text(0),2&j){const Y=l.\u0275\u0275nextContext(4);l.\u0275\u0275textInterpolate(Y.title)}}function kt(j,he){if(1&j&&l.\u0275\u0275text(0),2&j){const Y=l.\u0275\u0275nextContext(4);l.\u0275\u0275textInterpolate(Y.title)}}function qt(j,he){if(1&j&&l.\u0275\u0275text(0),2&j){const Y=l.\u0275\u0275nextContext(4);l.\u0275\u0275textInterpolate1("",Y.title,"s")}}function $t(j,he){if(1&j&&(l.\u0275\u0275elementStart(0,"span",42),l.\u0275\u0275text(1),l.\u0275\u0275template(2,Et,1,1,"ng-template",22)(3,kt,1,1,"ng-template",23)(4,qt,1,1,"ng-template",24),l.\u0275\u0275elementEnd()),2&j){const Y=l.\u0275\u0275nextContext(3);l.\u0275\u0275property("ngPlural",Y.total),l.\u0275\u0275advance(),l.\u0275\u0275textInterpolate1(" ",Y.total," ")}}function pt(j,he){if(1&j&&l.\u0275\u0275template(0,$t,5,2,"span",43),2&j){const Y=l.\u0275\u0275nextContext(2);l.\u0275\u0275property("ngIf",Y.total||0===Y.total)}}function Gt(j,he){if(1&j&&(l.\u0275\u0275elementStart(0,"span"),l.\u0275\u0275text(1),l.\u0275\u0275elementEnd()),2&j){const Y=l.\u0275\u0275nextContext(2);l.\u0275\u0275advance(),l.\u0275\u0275textInterpolate(Y.title)}}function xt(j,he){if(1&j&&l.\u0275\u0275template(0,pt,1,1,"span",42)(1,Gt,2,1,"span"),2&j){const Y=l.\u0275\u0275nextContext();l.\u0275\u0275conditional(null!==Y.data||Y.total?0:1)}}function Rt(j,he){if(1&j&&l.\u0275\u0275i18n(0,9,1),2&j){const Y=l.\u0275\u0275nextContext(2).$implicit,lt=l.\u0275\u0275nextContext(2);l.\u0275\u0275i18nExp(lt.hwNames[Y.key]),l.\u0275\u0275i18nApply(0)}}function Tn(j,he){if(1&j&&l.\u0275\u0275i18n(0,9,2),2&j){const Y=l.\u0275\u0275nextContext(2).$implicit,lt=l.\u0275\u0275nextContext(2);l.\u0275\u0275i18nExp(lt.hwNames[Y.key]),l.\u0275\u0275i18nApply(0)}}function st(j,he){if(1&j&&(l.\u0275\u0275i18n(0,9,3),l.\u0275\u0275pipe(1,"pluralize")),2&j){const Y=l.\u0275\u0275nextContext(2).$implicit,lt=l.\u0275\u0275nextContext(2);l.\u0275\u0275advance(),l.\u0275\u0275i18nExp(l.\u0275\u0275pipeBind1(1,1,lt.hwNames[Y.key])),l.\u0275\u0275i18nApply(0)}}function Nn(j,he){if(1&j&&(l.\u0275\u0275elementStart(0,"span",42),l.\u0275\u0275i18nStart(1,9),l.\u0275\u0275template(2,Rt,1,1,"ng-template",22)(3,Tn,1,1,"ng-template",23)(4,st,2,3,"ng-template",24),l.\u0275\u0275i18nEnd(),l.\u0275\u0275elementEnd()),2&j){const Y=l.\u0275\u0275nextContext().$implicit;l.\u0275\u0275property("ngPlural",Y.value.total),l.\u0275\u0275advance(4),l.\u0275\u0275i18nExp(Y.value.total),l.\u0275\u0275i18nApply(1)}}function jt(j,he){1&j&&l.\u0275\u0275element(0,"cd-icon",30)}function dn(j,he){if(1&j&&(l.\u0275\u0275elementStart(0,"span",49),l.\u0275\u0275text(1),l.\u0275\u0275element(2,"cd-icon",34),l.\u0275\u0275elementEnd()),2&j){const Y=l.\u0275\u0275nextContext().$implicit;l.\u0275\u0275advance(),l.\u0275\u0275textInterpolate1(" ",Y.value.error," ")}}function Nt(j,he){if(1&j&&(l.\u0275\u0275elementContainerStart(0),l.\u0275\u0275elementStart(1,"li",10)(2,"div",45)(3,"div",46),l.\u0275\u0275template(4,Nn,5,2,"span",43),l.\u0275\u0275elementEnd(),l.\u0275\u0275elementStart(5,"span",47),l.\u0275\u0275text(6),l.\u0275\u0275template(7,jt,1,0,"cd-icon",40),l.\u0275\u0275elementEnd(),l.\u0275\u0275template(8,dn,3,1,"span",48),l.\u0275\u0275elementEnd()(),l.\u0275\u0275elementContainerEnd()),2&j){const Y=he.$implicit;l.\u0275\u0275advance(4),l.\u0275\u0275property("ngIf",Y.value.total),l.\u0275\u0275advance(),l.\u0275\u0275property("ngClass",Y.value.error?"me-2":"me-4"),l.\u0275\u0275advance(),l.\u0275\u0275textInterpolate1(" ",Y.value.ok," "),l.\u0275\u0275advance(),l.\u0275\u0275property("ngIf",Y.value.ok),l.\u0275\u0275advance(),l.\u0275\u0275property("ngIf",Y.value.error)}}function Fn(j,he){if(1&j&&(l.\u0275\u0275template(0,Nt,9,5,"ng-container",44),l.\u0275\u0275pipe(1,"keyvalue")),2&j){const Y=l.\u0275\u0275nextContext();l.\u0275\u0275property("ngForOf",l.\u0275\u0275pipeBind1(1,1,null==Y.dropdownData?null:Y.dropdownData.total.category))}}class Wt{constructor(){this.data=null,this.summaryType="default",this.hwNames=e,this.icons=a.FI,this.total=null,this.dropdownTotalError=0,this.dropdownToggled=!1}ngOnChanges(){this.data?.total||0===this.data?.total?this.total=this.data?.total:"iscsi"===this.summaryType?this.total=this.data?.up+this.data?.down:this.total=this.data,this.dropdownData&&"Host"==this.title&&(this.dropdownTotalError=this.dropdownData.host.flawed)}toggleDropdown(){this.dropdownToggled=!this.dropdownToggled}static{this.\u0275fac=function(Y){return new(Y||Wt)}}static{this.\u0275cmp=l.\u0275\u0275defineComponent({type:Wt,selectors:[["cd-card-row"]],inputs:{title:"title",link:"link",data:"data",summaryType:"summaryType",dropdownData:"dropdownData"},features:[l.\u0275\u0275NgOnChangesFeature],decls:28,vars:7,consts:()=>{let he,Y;return he=$localize`:␟ad042f49beadf98e10b814dc6a328face505dd6c␟4802629618149945562: ${"\ufffd0\ufffd"}:INTERPOLATION: ${"\ufffd*2:1\ufffd"}:START_TAG_NG_TEMPLATE:${"[\ufffd0:1\ufffd|\ufffd0:2\ufffd|\ufffd0:3\ufffd]"}:INTERPOLATION_1:${"[\ufffd/*2:1\ufffd|\ufffd/*3:2\ufffd|\ufffd/*4:3\ufffd]"}:CLOSE_TAG_NG_TEMPLATE:${"\ufffd*3:2\ufffd"}:START_TAG_NG_TEMPLATE_1:${"[\ufffd0:1\ufffd|\ufffd0:2\ufffd|\ufffd0:3\ufffd]"}:INTERPOLATION_1:${"[\ufffd/*2:1\ufffd|\ufffd/*3:2\ufffd|\ufffd/*4:3\ufffd]"}:CLOSE_TAG_NG_TEMPLATE:${"\ufffd*4:3\ufffd"}:START_TAG_NG_TEMPLATE_2:${"[\ufffd0:1\ufffd|\ufffd0:2\ufffd|\ufffd0:3\ufffd]"}:INTERPOLATION_1:s${"[\ufffd/*2:1\ufffd|\ufffd/*3:2\ufffd|\ufffd/*4:3\ufffd]"}:CLOSE_TAG_NG_TEMPLATE:`,he=l.\u0275\u0275i18nPostprocess(he),Y=$localize`:␟cce9315b407dc5aea4235b133abebc0a229db6f8␟6099484129903853246: ${"\ufffd0\ufffd"}:INTERPOLATION: ${"\ufffd*2:1\ufffd"}:START_TAG_NG_TEMPLATE:${"[\ufffd0:1\ufffd|\ufffd0:2\ufffd]"}:INTERPOLATION_1:${"[\ufffd/*2:1\ufffd|\ufffd/*3:2\ufffd|\ufffd/*4:3\ufffd]"}:CLOSE_TAG_NG_TEMPLATE:${"\ufffd*3:2\ufffd"}:START_TAG_NG_TEMPLATE_1:${"[\ufffd0:1\ufffd|\ufffd0:2\ufffd]"}:INTERPOLATION_1:${"[\ufffd/*2:1\ufffd|\ufffd/*3:2\ufffd|\ufffd/*4:3\ufffd]"}:CLOSE_TAG_NG_TEMPLATE:${"\ufffd*4:3\ufffd"}:START_TAG_NG_TEMPLATE_2:${"\ufffd0:3\ufffd"}:INTERPOLATION_2:${"[\ufffd/*2:1\ufffd|\ufffd/*3:2\ufffd|\ufffd/*4:3\ufffd]"}:CLOSE_TAG_NG_TEMPLATE:`,Y=l.\u0275\u0275i18nPostprocess(Y),[["defaultSummary",""],["osdSummary",""],["iscsiSummary",""],["simplifiedSummary",""],["loadingTpl",""],["noLinkTitle",""],["dropdownTemplate",""],["showErrorNum",""],he,Y,[1,"list-group-item"],[1,"d-flex","pl-1","pb-2","pt-2","position-relative"],[1,"ms-4","me-auto"],[3,"routerLink","ngPlural"],[3,"routerLink"],[1,"me-4"],[3,"ngSwitch"],[4,"ngSwitchCase"],[4,"ngSwitchDefault"],["class","position-absolute end-0 me-2",4,"ngIf"],[4,"ngIf"],[3,"routerLink","ngPlural",4,"ngIf","ngIfElse"],["ngPluralCase","=0"],["ngPluralCase","=1"],["ngPluralCase","other"],[3,"routerLink",4,"ngIf","ngIfElse"],[4,"ngTemplateOutlet"],[1,"position-absolute","end-0","me-2"],["aria-controls","row-dropdwon","role","button",1,"dropdown-toggle",3,"click"],["class","ms-2",4,"ngIf"],["type","success"],[1,"ms-2"],["type","infoCircle"],["type","warning"],["type","danger"],[1,"text-warning",3,"ngClass"],[1,"fw-bold","text-success"],[1,"fw-bold","text-danger","me-2"],[1,"fw-bold","text-warning","me-2"],[1,"fw-bold","text-danger"],["type","success",4,"ngIf"],[4,"ngIf","ngIfElse"],[3,"ngPlural"],[3,"ngPlural",4,"ngIf"],[4,"ngFor","ngForOf"],[1,"d-flex","pb-2","pt-2"],[1,"ms-5","me-auto"],[3,"ngClass"],["class","me-4 ms-2",4,"ngIf"],[1,"me-4","ms-2"]]},template:function(Y,lt){1&Y&&(l.\u0275\u0275element(0,"hr"),l.\u0275\u0275elementStart(1,"li",10)(2,"div",11)(3,"div",12),l.\u0275\u0275template(4,P,1,2,"a",13)(5,b,1,2,"a",14),l.\u0275\u0275elementEnd(),l.\u0275\u0275elementStart(6,"span",15),l.\u0275\u0275elementContainerStart(7,16),l.\u0275\u0275template(8,g,2,1,"ng-container",17)(9,N,2,1,"ng-container",17)(10,z,2,1,"ng-container",17)(11,q,2,1,"ng-container",18),l.\u0275\u0275elementContainerEnd(),l.\u0275\u0275elementEnd(),l.\u0275\u0275template(12,Q,2,1,"span",19),l.\u0275\u0275elementEnd()(),l.\u0275\u0275template(13,D,3,1,"div",20)(14,Ue,2,1,"ng-template",null,0,l.\u0275\u0275templateRefExtractor)(16,Qe,2,1,"ng-template",null,1,l.\u0275\u0275templateRefExtractor)(18,Zt,2,1,"ng-template",null,2,l.\u0275\u0275templateRefExtractor)(20,We,4,1,"ng-template",null,3,l.\u0275\u0275templateRefExtractor)(22,at,1,0,"ng-template",null,4,l.\u0275\u0275templateRefExtractor)(24,xt,2,1,"ng-template",null,5,l.\u0275\u0275templateRefExtractor)(26,Fn,2,3,"ng-template",null,6,l.\u0275\u0275templateRefExtractor)),2&Y&&(l.\u0275\u0275advance(4),l.\u0275\u0275conditional(lt.link&&null!==lt.data||lt.total?4:5),l.\u0275\u0275advance(3),l.\u0275\u0275property("ngSwitch",lt.summaryType),l.\u0275\u0275advance(),l.\u0275\u0275property("ngSwitchCase","iscsi"),l.\u0275\u0275advance(),l.\u0275\u0275property("ngSwitchCase","osd"),l.\u0275\u0275advance(),l.\u0275\u0275property("ngSwitchCase","simplified"),l.\u0275\u0275advance(2),l.\u0275\u0275property("ngIf",lt.dropdownData&&lt.dropdownData.total.total.total>0),l.\u0275\u0275advance(),l.\u0275\u0275property("ngIf",lt.dropdownToggled))},dependencies:[T.NgClass,T.NgForOf,T.NgIf,T.NgTemplateOutlet,T.NgSwitch,T.NgSwitchCase,T.NgSwitchDefault,T.NgPlural,T.NgPluralCase,E.RouterLink,f.InlineLoading,u.R,T.KeyValuePipe,F.n],styles:['.list-group-item[_ngcontent-%COMP%]{border:0;font-size:14px}a.dropdown-toggle[_ngcontent-%COMP%]:after{border:0;content:"\\f054";font-family:ForkAwesome;font-size:1rem;margin-top:.15rem;transition:transform .3s ease-in-out}a.dropdown-toggle[aria-expanded=true][_ngcontent-%COMP%]:after{transform:rotate(90deg)}']})}}},29947:(Z,A,r)=>{r.d(A,{i:()=>m});var a=r(46045),e=r(87536),T=r(91974),f=r(3600);const F=["*",[["",8,"footer"]]],p=["*",".footer"],S=(g,O,N,c,z)=>({"border-0":g,"bg-color":O,shadow:N,"shadow-sm":c,"h-100":z}),_=(g,O)=>({"d-flex align-items-center":g,"justify-content-center":O});function v(g,O){if(1&g&&(e.\u0275\u0275elementStart(0,"span"),e.\u0275\u0275text(1),e.\u0275\u0275elementEnd()),2&g){const N=e.\u0275\u0275nextContext(2);e.\u0275\u0275advance(),e.\u0275\u0275textInterpolate(N.cardTitle)}}function R(g,O){if(1&g&&(e.\u0275\u0275elementStart(0,"h4",6),e.\u0275\u0275template(1,v,2,1,"span",7),e.\u0275\u0275elementEnd()),2&g){const N=e.\u0275\u0275nextContext();e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf",""===N.cardType)}}function P(g,O){if(1&g&&(e.\u0275\u0275elementStart(0,"h4",8),e.\u0275\u0275namespaceSVG(),e.\u0275\u0275element(1,"svg",9),e.\u0275\u0275namespaceHTML(),e.\u0275\u0275elementStart(2,"span",10),e.\u0275\u0275text(3),e.\u0275\u0275elementEnd()()),2&g){const N=e.\u0275\u0275nextContext();e.\u0275\u0275advance(),e.\u0275\u0275property("cdsIcon",N.icons.deploy)("size",N.icons.size20),e.\u0275\u0275advance(2),e.\u0275\u0275textInterpolate(N.cardTitle)}}function M(g,O){if(1&g&&(e.\u0275\u0275elementStart(0,"h5",11),e.\u0275\u0275text(1),e.\u0275\u0275elementEnd()),2&g){const N=e.\u0275\u0275nextContext();e.\u0275\u0275advance(),e.\u0275\u0275textInterpolate1(" ",N.cardTitle," ")}}function b(g,O){1&g&&(e.\u0275\u0275elementStart(0,"div",12),e.\u0275\u0275projection(1,1),e.\u0275\u0275elementEnd())}class m{constructor(){this.icons=a.FI,this.cardType="",this.removeBorder=!1,this.shadow=!1,this.cardFooter=!1,this.fullHeight=!1,this.alignItemsCenter=!1,this.justifyContentCenter=!1}static{this.\u0275fac=function(N){return new(N||m)}}static{this.\u0275cmp=e.\u0275\u0275defineComponent({type:m,selectors:[["cd-card"]],inputs:{cardTitle:"cardTitle",cardType:"cardType",removeBorder:"removeBorder",shadow:"shadow",cardFooter:"cardFooter",fullHeight:"fullHeight",alignItemsCenter:"alignItemsCenter",justifyContentCenter:"justifyContentCenter"},ngContentSelectors:p,decls:7,vars:15,consts:[[1,"card","flex-fill",3,"ngClass"],["class","card-title mt-4 ms-4 mb-0",4,"ngIf"],["class","text-center mt-4 mb-0",4,"ngIf"],["class","text-center card-title",4,"ngIf"],[1,"card-body","ps-0","pe-0",3,"ngClass"],["class","card-footer p-0 bg-white",4,"ngIf"],[1,"card-title","mt-4","ms-4","mb-0"],[4,"ngIf"],[1,"text-center","mt-4","mb-0"],[3,"cdsIcon","size"],[1,"badge","badge-info"],[1,"text-center","card-title"],[1,"card-footer","p-0","bg-white"]],template:function(N,c){1&N&&(e.\u0275\u0275projectionDef(F),e.\u0275\u0275elementStart(0,"div",0),e.\u0275\u0275template(1,R,2,1,"h4",1)(2,P,4,3,"h4",2)(3,M,2,1,"h5",3),e.\u0275\u0275elementStart(4,"div",4),e.\u0275\u0275projection(5),e.\u0275\u0275elementEnd(),e.\u0275\u0275template(6,b,2,0,"div",5),e.\u0275\u0275elementEnd()),2&N&&(e.\u0275\u0275property("ngClass",e.\u0275\u0275pureFunction5(6,S,c.removeBorder,"Sync Status Card"===c.cardType,c.shadow,!c.shadow&&"syncCards"!==c.cardType,c.fullHeight)),e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf","zone"!==c.cardType),e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf","zone"===c.cardType),e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf","syncCards"===c.cardType),e.\u0275\u0275advance(),e.\u0275\u0275property("ngClass",e.\u0275\u0275pureFunction2(12,_,c.alignItemsCenter,c.justifyContentCenter)),e.\u0275\u0275advance(2),e.\u0275\u0275property("ngIf",c.cardFooter))},dependencies:[T.NgClass,T.NgIf,f.IconDirective]})}}},99040:(Z,A,r)=>{r.d(A,{h:()=>N});var a=r(91974),e=r(53648),l=r(76218),T=r(77317),E=r(47579),f=r(6783),u=r(487),F=r(3600),p={elem:"svg",attrs:{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 32",fill:"currentColor",width:20,height:20},content:[{elem:"path",attrs:{d:"M2 26H30V28H2zM25.4 9c.8-.8.8-2 0-2.8 0 0 0 0 0 0l-3.6-3.6c-.8-.8-2-.8-2.8 0 0 0 0 0 0 0l-15 15V24h6.4L25.4 9zM20.4 4L24 7.6l-3 3L17.4 7 20.4 4zM6 22v-3.6l10-10 3.6 3.6-10 10H6z"}}],name:"edit",size:20},S={elem:"svg",attrs:{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 32",fill:"currentColor",width:16,height:16},content:[{elem:"path",attrs:{d:"M31 16L24 23 22.59 21.59 28.17 16 22.59 10.41 24 9 31 16zM1 16L8 9 9.41 10.41 3.83 16 9.41 21.59 8 23 1 16z"}},{elem:"path",attrs:{d:"M5.91 15H26.080000000000002V17H5.91z",transform:"rotate(-75 15.996 16)"}}],name:"code",size:16},_=r(21445),v=r(13421),R=r(19093),P={elem:"svg",attrs:{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 16 16",fill:"currentColor",width:16,height:16},content:[{elem:"path",attrs:{d:"M8.5 11L8.5 6.5 6.5 6.5 6.5 7.5 7.5 7.5 7.5 11 6 11 6 12 10 12 10 11zM8 3.5c-.4 0-.8.3-.8.8S7.6 5 8 5c.4 0 .8-.3.8-.8S8.4 3.5 8 3.5z"}},{elem:"path",attrs:{d:"M8,15c-3.9,0-7-3.1-7-7s3.1-7,7-7s7,3.1,7,7S11.9,15,8,15z M8,2C4.7,2,2,4.7,2,8s2.7,6,6,6s6-2.7,6-6S11.3,2,8,2z"}}],name:"information",size:16},M={elem:"svg",attrs:{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 32",fill:"currentColor",width:32,height:32},content:[{elem:"path",attrs:{d:"M28,10V28H10V10H28m0-2H10a2,2,0,0,0-2,2V28a2,2,0,0,0,2,2H28a2,2,0,0,0,2-2V10a2,2,0,0,0-2-2Z"}},{elem:"path",attrs:{d:"M4,18H2V4A2,2,0,0,1,4,2H18V4H4Z"}}],name:"copy",size:32},b={elem:"svg",attrs:{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 16 16",fill:"currentColor",width:16,height:16},content:[{elem:"path",attrs:{d:"M13 7L12.3 6.3 8.5 10.1 8.5 1 7.5 1 7.5 10.1 3.7 6.3 3 7 8 12zM13 12v2H3v-2H2v2l0 0c0 .6.4 1 1 1h10c.6 0 1-.4 1-1l0 0v-2H13z"}}],name:"download",size:16},m={elem:"svg",attrs:{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 32",fill:"currentColor",width:20,height:20},content:[{elem:"path",attrs:{d:"M11 24H21V26H11zM13 28H19V30H13zM16 2A10 10 0 006 12a9.19 9.19 0 003.46 7.62c1 .93 1.54 1.46 1.54 2.38h2c0-1.84-1.11-2.87-2.19-3.86A7.2 7.2 0 018 12a8 8 0 0116 0 7.2 7.2 0 01-2.82 6.14c-1.07 1-2.18 2-2.18 3.86h2c0-.92.53-1.45 1.54-2.39A9.18 9.18 0 0026 12 10 10 0 0016 2z"}}],name:"idea",size:20},g=r(71307),O=r(87536);class N{constructor(z){this.iconService=z,this.iconService.registerAll([P,M,p,S,b,m,g.A])}static{this.\u0275fac=function(B){return new(B||N)(O.\u0275\u0275inject(F.IconService))}}static{this.\u0275mod=O.\u0275\u0275defineNgModule({type:N})}static{this.\u0275inj=O.\u0275\u0275defineInjector({providers:[(0,f.provideCharts)((0,f.withDefaultRegisterables)())],imports:[a.CommonModule,e.FormsModule,e.ReactiveFormsModule,T.NgbAlertModule,T.NgbPopoverModule,T.NgbProgressbarModule,T.NgbTooltipModule,e.ReactiveFormsModule,v.Y,_.h,T.NgbDropdownModule,E.ClickOutsideModule,u.SimplebarAngularModule,l.RouterModule,T.NgbDatepickerModule,T.NgbTimepickerModule,F.UIShellModule,F.ButtonModule,F.NotificationModule,F.IconModule,F.TooltipModule,F.GridModule,F.AccordionModule,F.LoadingModule,F.ModalModule,F.InputModule,F.NumberModule,F.CheckboxModule,F.DatePickerModule,F.TimePickerModule,F.TimePickerSelectModule,F.DropdownModule,F.SelectModule,F.ComboBoxModule,F.ProgressIndicatorModule,F.PanelModule,R.ChartsModule,F.LayoutModule,F.TilesModule,F.PopoverModule,F.InlineLoadingModule]})}}},34177:(Z,A,r)=>{r.d(A,{M:()=>R});var a=r(87536),l=r(53648),E=r(3600),u=r(91974),p=r(37966),S=r(59781);function _(P,M){1&P&&a.\u0275\u0275elementContainer(0)}function v(P,M){if(1&P&&(a.\u0275\u0275elementStart(0,"p"),a.\u0275\u0275text(1),a.\u0275\u0275elementEnd()),2&P){const b=a.\u0275\u0275nextContext();a.\u0275\u0275advance(),a.\u0275\u0275textInterpolate1(" ",b.description," ")}}class R extends E.BaseModal{constructor(M,b,m,g,O,N=!1,c,z,B,q=!0,Q=!0){super(),this.titleText=M,this.buttonText=b,this.onSubmit=m,this.bodyTpl=g,this.description=O,this.warning=N,this.bodyData=c,this.onCancel=z,this.bodyContext=B,this.showSubmit=q,this.showCancel=Q,this.canceled=!1,this.confirmationForm=new l.UntypedFormGroup({})}ngOnInit(){if(this.bodyContext=this.bodyContext||{},this.bodyContext.$implicit=this.bodyData,!this.onSubmit)throw new Error("No submit action defined");if(!this.buttonText)throw new Error("No action name defined");if(!this.titleText)throw new Error("No title defined");if(!this.bodyTpl&&!this.description)throw new Error("No description defined")}ngOnDestroy(){this.onCancel&&this.canceled&&this.onCancel()}stopLoadingSpinner(){this.confirmationForm.setErrors({cdSubmitButton:!0})}static{this.\u0275fac=function(b){return new(b||R)(a.\u0275\u0275directiveInject("titleText",8),a.\u0275\u0275directiveInject("buttonText",8),a.\u0275\u0275directiveInject("onSubmit",8),a.\u0275\u0275directiveInject("bodyTpl",8),a.\u0275\u0275directiveInject("description",8),a.\u0275\u0275directiveInject("warning",8),a.\u0275\u0275directiveInject("bodyData",8),a.\u0275\u0275directiveInject("onCancel",8),a.\u0275\u0275directiveInject("bodyContext",8),a.\u0275\u0275directiveInject("showSubmit",8),a.\u0275\u0275directiveInject("showCancel",8))}}static{this.\u0275cmp=a.\u0275\u0275defineComponent({type:R,selectors:[["cd-confirmation-modal"]],features:[a.\u0275\u0275ProvidersFeature([{provide:"warning",useValue:!1},{provide:"showSubmit",useValue:!0},{provide:"showCancel",useValue:!0}]),a.\u0275\u0275InheritDefinitionFeature],decls:10,vars:11,consts:()=>{let M;return M=$localize`:␟282c2923380aa59d750661a75d5a419063499da8␟7142497748033900711:${"\ufffd0\ufffd"}:INTERPOLATION:`,[["formDir","ngForm"],M,["size","sm",3,"overlaySelected","open"],[3,"closeSelect"],["cdsModalHeaderHeading",""],["cdsModalContent",""],["name","confirmationForm","novalidate","",3,"formGroup"],[4,"ngTemplateOutlet","ngTemplateOutletContext"],[4,"ngIf"],[3,"submitActionEvent","form","submitText","showCancel","showSubmit","modalForm"]]},template:function(b,m){if(1&b){const g=a.\u0275\u0275getCurrentView();a.\u0275\u0275elementStart(0,"cds-modal",2),a.\u0275\u0275listener("overlaySelected",function(){return a.\u0275\u0275restoreView(g),a.\u0275\u0275resetView(m.closeModal())}),a.\u0275\u0275elementStart(1,"cds-modal-header",3),a.\u0275\u0275listener("closeSelect",function(){return a.\u0275\u0275restoreView(g),a.\u0275\u0275resetView(m.closeModal())}),a.\u0275\u0275elementStart(2,"h3",4),a.\u0275\u0275i18n(3,1),a.\u0275\u0275elementEnd()(),a.\u0275\u0275elementStart(4,"section",5)(5,"form",6,0),a.\u0275\u0275template(7,_,1,0,"ng-container",7)(8,v,2,1,"p",8),a.\u0275\u0275elementEnd()(),a.\u0275\u0275elementStart(9,"cd-form-button-panel",9),a.\u0275\u0275listener("submitActionEvent",function(){return a.\u0275\u0275restoreView(g),a.\u0275\u0275resetView(m.onSubmit(m.confirmationForm.value))}),a.\u0275\u0275elementEnd()()}2&b&&(a.\u0275\u0275property("open",m.open),a.\u0275\u0275advance(3),a.\u0275\u0275i18nExp(m.titleText),a.\u0275\u0275i18nApply(3),a.\u0275\u0275advance(2),a.\u0275\u0275property("formGroup",m.confirmationForm),a.\u0275\u0275advance(2),a.\u0275\u0275property("ngTemplateOutlet",m.bodyTpl)("ngTemplateOutletContext",m.bodyContext),a.\u0275\u0275advance(),a.\u0275\u0275property("ngIf",m.description),a.\u0275\u0275advance(),a.\u0275\u0275property("form",m.confirmationForm)("submitText",m.buttonText)("showCancel",m.showCancel)("showSubmit",m.showSubmit)("modalForm",!0))},dependencies:[u.NgIf,u.NgTemplateOutlet,l.\u0275NgNoValidate,l.NgControlStatusGroup,l.FormGroupDirective,p.E,E.Modal,E.ModalHeader,E.ModalContent,E.ModalHeaderHeading,S.e]})}}},50889:(Z,A,r)=>{r.d(A,{N:()=>b});var a=r(43809),l=r(74737),E=r(46045),f=r(87536),F=r(91974),S=r(90476),_=r(3600),R=r(46765);const P=m=>({"clipboard-btn-with-text":m});function M(m,g){if(1&m&&(f.\u0275\u0275elementStart(0,"span",1),f.\u0275\u0275text(1),f.\u0275\u0275elementEnd()),2&m){const O=f.\u0275\u0275nextContext();f.\u0275\u0275property("title",O.text),f.\u0275\u0275advance(),f.\u0275\u0275textInterpolate(O.text)}}class b{constructor(g){this.toastr=g,this.byId=!0,this.size="md",this.icons=E.FI}getText(){const g=document.getElementById(this.source);return g?.value||g?.textContent}onClick(){try{const g=(0,a.detect)(),O=this.byId?this.getText():this.source,N=()=>{this.toastr.success("Copied text to the clipboard successfully.")};["firefox","ie","ios","safari"].includes(g.name)?navigator.clipboard.writeText(O).then(()=>N()):navigator.permissions.query({name:"clipboard-write"}).then(c=>{("granted"===c.state||"prompt"===c.state)&&navigator.clipboard.writeText(O).then(()=>N())})}catch{this.toastr.error("Failed to copy text to the clipboard.")}}static{this.\u0275fac=function(O){return new(O||b)(f.\u0275\u0275directiveInject(l.ToastrService))}}static{this.\u0275cmp=f.\u0275\u0275defineComponent({type:b,selectors:[["cd-copy-2-clipboard-button"]],hostBindings:function(O,N){1&O&&f.\u0275\u0275listener("click",function(){return N.onClick()})},inputs:{source:"source",byId:"byId",size:"size",text:"text"},decls:3,vars:5,consts:()=>{let g;return g=$localize`:␟4dd200b7f9e19048cf90516843b40964f2af3fe9␟1436915381769138805:Copy to Clipboard`,[["cdsButton","ghost","description",g,1,"clipboard-btn",3,"click","ngClass","size"],["data-toggle","tooltip",1,"cds--type-mono",3,"title"],["type","copy"]]},template:function(O,N){1&O&&(f.\u0275\u0275elementStart(0,"button",0),f.\u0275\u0275listener("click",function(){return N.onClick()}),f.\u0275\u0275template(1,M,2,2,"span",1),f.\u0275\u0275element(2,"cd-icon",2),f.\u0275\u0275elementEnd()),2&O&&(f.\u0275\u0275property("ngClass",f.\u0275\u0275pureFunction1(3,P,N.text))("size",N.size),f.\u0275\u0275advance(),f.\u0275\u0275conditional(N.text?1:-1))},dependencies:[F.NgClass,S.S,_.Button,R.R],styles:[".clipboard-btn[_ngcontent-%COMP%]{border:none;box-shadow:none;outline:none}.clipboard-btn-with-text[_ngcontent-%COMP%]{color:inherit}"]})}}},41861:(Z,A,r)=>{r.d(A,{P:()=>M});var a=r(53648),l=r(77317),E=r(89939),f=r.n(E),u=r(87536),p=r(91974),_=r(3600);function R(b,m){if(1&b){const g=u.\u0275\u0275getCurrentView();u.\u0275\u0275elementStart(0,"cds-timepicker",5),u.\u0275\u0275listener("valueChange",function(N){u.\u0275\u0275restoreView(g);const c=u.\u0275\u0275nextContext(2);return u.\u0275\u0275resetView(c.onModelChange(N))}),u.\u0275\u0275twoWayListener("ngModelChange",function(N){u.\u0275\u0275restoreView(g);const c=u.\u0275\u0275nextContext(2);return u.\u0275\u0275twoWayBindingSet(c.time,N)||(c.time=N),u.\u0275\u0275resetView(N)}),u.\u0275\u0275elementStart(1,"cds-timepicker-select",6),u.\u0275\u0275twoWayListener("ngModelChange",function(N){u.\u0275\u0275restoreView(g);const c=u.\u0275\u0275nextContext(2);return u.\u0275\u0275twoWayBindingSet(c.ampm,N)||(c.ampm=N),u.\u0275\u0275resetView(N)}),u.\u0275\u0275listener("valueChange",function(N){u.\u0275\u0275restoreView(g);const c=u.\u0275\u0275nextContext(2);return u.\u0275\u0275resetView(c.onModelChange(N))}),u.\u0275\u0275elementStart(2,"option",7),u.\u0275\u0275text(3,"AM"),u.\u0275\u0275elementEnd(),u.\u0275\u0275elementStart(4,"option",8),u.\u0275\u0275text(5,"PM"),u.\u0275\u0275elementEnd()()()}if(2&b){const g=u.\u0275\u0275nextContext(2);u.\u0275\u0275twoWayProperty("ngModel",g.time),u.\u0275\u0275property("disabled",g.disabled),u.\u0275\u0275advance(),u.\u0275\u0275twoWayProperty("ngModel",g.ampm),u.\u0275\u0275property("disabled",g.disabled)}}function P(b,m){if(1&b&&(u.\u0275\u0275elementStart(0,"cds-text-label"),u.\u0275\u0275text(1,"Select a time "),u.\u0275\u0275template(2,R,6,4,"cds-timepicker",4),u.\u0275\u0275elementEnd()),2&b){const g=u.\u0275\u0275nextContext();u.\u0275\u0275advance(2),u.\u0275\u0275property("ngIf",g.hasTime)}}class M{constructor(m){this.calendar=m,this.hasSeconds=!0,this.hasTime=!0,this.name="",this.helperText="",this.placeHolder="",this.disabled=!1,this.date=[],this.defaultDate=!1}ngOnInit(){this.minDate=this.calendar.getToday(),this.hasTime?this.hasSeconds?this.format="YYYY-MM-DD HH:mm:ss":this.format="YYYY-MM-DD HH:mm":this.format="YYYY-MM-DD";let m=f()(this.control?.value,this.format);(!m.isValid()||m.isBefore(f()()))&&(m=f()()),this.defaultDate?this.date.push([]):this.date.push(m.format("YYYY-MM-DD"));const g=m.format("HH:mm:ss");this.time=m.format("hh:mm"),this.ampm=m.hour()>=12?"PM":"AM",this.datetime={date:this.date[0],time:g,ampm:this.ampm},this.onModelChange()}onModelChange(m){if(m)if(0===m.length)this.datetime.date={date:null,time:null,ampm:null};else if(Array.isArray(m))this.datetime.date=f()(m[0]).format("YYYY-MM-DD");else if(m&&["AM","PM"].includes(m)){const g=f()(this.datetime.time,"hh:mm:ss A"),O=g.set("hour",g.hour()%12+("PM"===m?12:0));this.datetime.time=f()(O).format("HH:mm:ss"),this.datetime.ampm=m}else{const g=m;this.datetime.time=f()(`${this.datetime.date} ${g} ${this.datetime.ampm}`).format("HH:mm:ss")}if(this.datetime){const g=f()(`${this.datetime.date} ${this.datetime.time}`).format(this.format);setTimeout(()=>{this.control.setValue(g)})}else setTimeout(()=>{this.control.setValue("")})}static{this.\u0275fac=function(g){return new(g||M)(u.\u0275\u0275directiveInject(l.NgbCalendar))}}static{this.\u0275cmp=u.\u0275\u0275defineComponent({type:M,selectors:[["cd-date-time-picker"]],inputs:{control:"control",hasSeconds:"hasSeconds",hasTime:"hasTime",name:"name",helperText:"helperText",placeHolder:"placeHolder",disabled:"disabled",defaultDate:"defaultDate"},decls:6,vars:6,consts:[["cdsCol",""],["cdsRow","",1,"form-item-append"],["formControlname","expiresAt","dateFormat","Y/m/d","cdsTheme","theme",3,"valueChange","placeholder","value","helperText","disabled"],[4,"ngIf"],["pattern","(1[012]|[0-9]):[0-5][0-9]",3,"ngModel","disabled","valueChange","ngModelChange",4,"ngIf"],["pattern","(1[012]|[0-9]):[0-5][0-9]",3,"valueChange","ngModelChange","ngModel","disabled"],[3,"ngModelChange","valueChange","ngModel","disabled"],["selected","","value","AM"],["value","PM"]],template:function(g,O){1&g&&(u.\u0275\u0275elementStart(0,"div",0)(1,"div",1)(2,"cds-text-label"),u.\u0275\u0275text(3),u.\u0275\u0275elementStart(4,"cds-date-picker",2),u.\u0275\u0275listener("valueChange",function(c){return O.onModelChange(c)}),u.\u0275\u0275elementEnd()(),u.\u0275\u0275template(5,P,3,1,"cds-text-label",3),u.\u0275\u0275elementEnd()()),2&g&&(u.\u0275\u0275advance(3),u.\u0275\u0275textInterpolate1("",O.name," "),u.\u0275\u0275advance(),u.\u0275\u0275property("placeholder",O.placeHolder)("value",O.date)("helperText",O.helperText)("disabled",O.disabled),u.\u0275\u0275advance(),u.\u0275\u0275property("ngIf",O.hasTime))},dependencies:[p.NgIf,a.NgSelectOption,a.\u0275NgSelectMultipleOption,a.NgControlStatus,a.PatternValidator,a.NgModel,_.ColumnDirective,_.RowDirective,_.TextInputLabelComponent,_.DatePicker,_.TimePicker,_.TimePickerSelect,_.Option],styles:[".form-item-append[_ngcontent-%COMP%]{margin-top:1rem}"]})}}},84821:(Z,A,r)=>{r.d(A,{D:()=>le});var a=r(87536),l=r(53648),E=r(58384),f=r(35141),u=r(3600),p=r(3687),S=r(22453),_=r(91974),R=r(23603),P=r(90476),M=r(37966),b=r(51862),m=r(92805),g=r(59781);const O=ie=>({form:ie});function N(ie,_e){1&ie&&a.\u0275\u0275elementContainer(0)}function c(ie,_e){if(1&ie&&(a.\u0275\u0275elementStart(0,"cd-alert-panel",26),a.\u0275\u0275i18nStart(1,6),a.\u0275\u0275element(2,"p"),a.\u0275\u0275i18nEnd(),a.\u0275\u0275elementEnd()),2&ie){const ue=a.\u0275\u0275nextContext();a.\u0275\u0275advance(2),a.\u0275\u0275i18nExp(ue.infoMessage),a.\u0275\u0275i18nApply(1)}}function z(ie,_e){1&ie&&a.\u0275\u0275elementContainer(0)}function B(ie,_e){if(1&ie&&(a.\u0275\u0275elementStart(0,"p"),a.\u0275\u0275i18nStart(1,7),a.\u0275\u0275pipe(2,"lowercase"),a.\u0275\u0275element(3,"strong"),a.\u0275\u0275i18nEnd(),a.\u0275\u0275elementEnd()),2&ie){const ue=a.\u0275\u0275nextContext(2);a.\u0275\u0275advance(3),a.\u0275\u0275i18nExp(a.\u0275\u0275pipeBind1(2,2,ue.actionDescription))(ue.itemNames[0]),a.\u0275\u0275i18nApply(1)}}function q(ie,_e){if(1&ie&&(a.\u0275\u0275elementStart(0,"li")(1,"strong"),a.\u0275\u0275text(2),a.\u0275\u0275elementEnd()()),2&ie){const ue=_e.$implicit;a.\u0275\u0275advance(2),a.\u0275\u0275textInterpolate(ue)}}function Q(ie,_e){if(1&ie&&(a.\u0275\u0275elementStart(0,"p"),a.\u0275\u0275i18n(1,8),a.\u0275\u0275pipe(2,"lowercase"),a.\u0275\u0275elementEnd(),a.\u0275\u0275elementStart(3,"ul"),a.\u0275\u0275template(4,q,3,1,"li",27),a.\u0275\u0275elementEnd()),2&ie){const ue=a.\u0275\u0275nextContext(2);a.\u0275\u0275advance(2),a.\u0275\u0275i18nExp(a.\u0275\u0275pipeBind1(2,2,ue.actionDescription)),a.\u0275\u0275i18nApply(1),a.\u0275\u0275advance(2),a.\u0275\u0275property("ngForOf",ue.itemNames)}}function G(ie,_e){if(1&ie&&(a.\u0275\u0275elementStart(0,"span"),a.\u0275\u0275template(1,B,4,4,"p",23)(2,Q,5,4,"ng-template",null,4,a.\u0275\u0275templateRefExtractor),a.\u0275\u0275elementEnd()),2&ie){const ue=a.\u0275\u0275reference(3),C=a.\u0275\u0275nextContext();a.\u0275\u0275advance(),a.\u0275\u0275property("ngIf",1===C.itemNames.length)("ngIfElse",ue)}}function D(ie,_e){if(1&ie&&(a.\u0275\u0275elementStart(0,"p"),a.\u0275\u0275i18n(1,9),a.\u0275\u0275pipe(2,"lowercase"),a.\u0275\u0275elementEnd()),2&ie){const ue=a.\u0275\u0275nextContext();a.\u0275\u0275advance(2),a.\u0275\u0275i18nExp(a.\u0275\u0275pipeBind1(2,2,ue.actionDescription))(ue.itemDescription),a.\u0275\u0275i18nApply(1)}}function oe(ie,_e){1&ie&&a.\u0275\u0275elementContainer(0)}function fe(ie,_e){1&ie&&(a.\u0275\u0275elementContainerStart(0),a.\u0275\u0275elementStart(1,"cds-checkbox",28),a.\u0275\u0275i18n(2,10),a.\u0275\u0275elementEnd(),a.\u0275\u0275elementContainerEnd()),2&ie&&(a.\u0275\u0275advance(),a.\u0275\u0275property("required",!0))}function ye(ie,_e){1&ie&&(a.\u0275\u0275elementStart(0,"span",32),a.\u0275\u0275elementContainerStart(1),a.\u0275\u0275i18n(2,12),a.\u0275\u0275elementContainerEnd(),a.\u0275\u0275elementEnd())}function je(ie,_e){1&ie&&(a.\u0275\u0275elementStart(0,"span",32),a.\u0275\u0275elementContainerStart(1),a.\u0275\u0275i18n(2,13),a.\u0275\u0275elementContainerEnd(),a.\u0275\u0275elementEnd())}function Le(ie,_e){if(1&ie&&a.\u0275\u0275template(0,ye,3,0,"span",31)(1,je,3,0,"span",31),2&ie){const ue=a.\u0275\u0275nextContext(2),C=a.\u0275\u0275reference(5);a.\u0275\u0275property("ngIf",ue.deletionForm.showError("confirmInput",C,"required")),a.\u0275\u0275advance(),a.\u0275\u0275property("ngIf",ue.deletionForm.showError("confirmInput",C,"matchResource"))}}function Fe(ie,_e){if(1&ie&&(a.\u0275\u0275elementStart(0,"cds-text-label",29),a.\u0275\u0275i18nStart(1,11),a.\u0275\u0275element(2,"input",30),a.\u0275\u0275i18nEnd(),a.\u0275\u0275elementEnd(),a.\u0275\u0275template(3,Le,2,2,"ng-template",null,5,a.\u0275\u0275templateRefExtractor)),2&ie){const ue=a.\u0275\u0275reference(4),C=a.\u0275\u0275nextContext();a.\u0275\u0275property("invalid",!C.deletionForm.controls.confirmInput.valid&&C.deletionForm.controls.confirmInput.dirty)("invalidText",ue)}}function te(ie,_e){if(1&ie&&(a.\u0275\u0275elementStart(0,"h3",33),a.\u0275\u0275i18n(1,14),a.\u0275\u0275pipe(2,"titlecase"),a.\u0275\u0275elementEnd()),2&ie){const ue=a.\u0275\u0275nextContext();a.\u0275\u0275advance(2),a.\u0275\u0275i18nExp(a.\u0275\u0275pipeBind1(2,2,ue.actionDescription))(ue.itemDescription),a.\u0275\u0275i18nApply(1)}}class le extends u.BaseModal{constructor(_e,ue,C,K="delete",ce,Ee,Ce,Ue,He,it,ct){super(),this.impact=_e,this.itemDescription=ue,this.itemNames=C,this.actionDescription=K,this.submitAction=ce,this.backAction=Ee,this.bodyTemplate=Ce,this.bodyContext=Ue,this.infoMessage=He,this.submitActionObservable=it,this.callBackAtionObservable=ct,this.impactEnum=S.r,this.actionDescription=K||"delete",this.impact=this.impact||S.r.medium}ngOnInit(){const _e={impact:new l.UntypedFormControl(this.impact),confirmation:new l.UntypedFormControl(!1,{validators:[p.xQ.composeIf({impact:S.r.medium},[l.Validators.requiredTrue])]}),confirmInput:new l.UntypedFormControl("",[p.xQ.composeIf({impact:this.impactEnum.high},[this.matchResourceName.bind(this),l.Validators.required])])};if(this.childFormGroup&&(_e.child=this.childFormGroup),this.deletionForm=new E.$(_e),!this.submitAction&&!this.submitActionObservable)throw new Error("No submit action defined")}matchResourceName(_e){return this.itemNames&&_e.value!==String(this.itemNames?.[0])?{matchResource:!0}:null}callSubmitAction(){this.submitActionObservable?this.submitActionObservable().subscribe({error:this.stopLoadingSpinner.bind(this),complete:this.hideModal.bind(this)}):this.submitAction()}callBackAction(){this.callBackAtionObservable?this.callBackAtionObservable().subscribe({error:this.stopLoadingSpinner.bind(this),complete:this.hideModal.bind(this)}):this.backAction()}hideModal(){this.closeModal()}stopLoadingSpinner(){this.deletionForm.setErrors({cdSubmitButton:!0})}static{this.\u0275fac=function(ue){return new(ue||le)(a.\u0275\u0275directiveInject("impact",8),a.\u0275\u0275directiveInject("itemDescription",8),a.\u0275\u0275directiveInject("itemNames",8),a.\u0275\u0275directiveInject("actionDescription",8),a.\u0275\u0275directiveInject("submitAction",8),a.\u0275\u0275directiveInject("backAction",8),a.\u0275\u0275directiveInject("bodyTemplate",8),a.\u0275\u0275directiveInject("bodyContext",8),a.\u0275\u0275directiveInject("infoMessage",8),a.\u0275\u0275directiveInject("submitActionObservable",8),a.\u0275\u0275directiveInject("callBackAtionObservable",8))}}static{this.\u0275cmp=a.\u0275\u0275defineComponent({type:le,selectors:[["cd-deletion-modal"]],viewQuery:function(ue,C){if(1&ue&&a.\u0275\u0275viewQuery(f._,7),2&ue){let K;a.\u0275\u0275queryRefresh(K=a.\u0275\u0275loadQuery())&&(C.submitButton=K.first)}},features:[a.\u0275\u0275InheritDefinitionFeature],decls:21,vars:20,consts:()=>{let _e,ue,C,K,ce,Ee,Ce,Ue,He,it,ct;return _e=$localize`:␟031532554bf866164e85d3ed985823a7cfcd9232␟6898180829126212409:${"\ufffd#2\ufffd"}:START_PARAGRAPH:${"\ufffd0\ufffd"}:INTERPOLATION:${"\ufffd/#2\ufffd"}:CLOSE_PARAGRAPH:`,ue=$localize`:␟6110699a3562eeb15371063c0cf7f6bfd88a0209␟3239867498816051226:Are you sure that you want to ${"\ufffd0\ufffd"}:INTERPOLATION: ${"\ufffd#3\ufffd"}:START_TAG_STRONG:${"\ufffd1\ufffd"}:INTERPOLATION_1:${"\ufffd/#3\ufffd"}:CLOSE_TAG_STRONG:?`,C=$localize`:␟549859e511ba5af0ea03fcaa620c472f08038969␟3079504020955842199:Are you sure that you want to ${"\ufffd0\ufffd"}:INTERPOLATION: the selected items?`,K=$localize`:␟54839ebc827b73c9dc4e1df731c6d36a85036af7␟898210535510434442:Are you sure that you want to ${"\ufffd0\ufffd"}:INTERPOLATION: the selected ${"\ufffd1\ufffd"}:INTERPOLATION_1:?`,ce=$localize`:␟2be8b7f04f0104d3fad90d079d8202b74f758b9a␟9028260953990145020:Yes, I am sure.`,Ee=$localize`:␟0333de11ce64a23e1d4014b5f930f8fa00831ddf␟6813396031694137692:Resource Name`,Ce=$localize`:␟4d3345e3b340c7457029d2cfb75e5881eb5aec44␟4390273640017163475:Enter resource name to delete`,Ue=$localize`:␟723004418fdad68bca53d6163d9638a5df10189f␟1009334946544444524:Resource Name ${"\ufffd#2\ufffd\ufffd/#2\ufffd"}:TAG_INPUT:`,He=$localize`:␟7cbdabcece469fab89cfa687ab152bca18b97498␟1417693714872528491:This field is required.`,it=$localize`:␟a8da19abd6f3178fd69717301a953d991e193aec␟7707641451498538087:Enter the correct resource name.`,ct=$localize`:␟8d4868f227a553b2dc99db7c285df13593fe0d3a␟3738161093130758932: ${"\ufffd0\ufffd"}:INTERPOLATION: ${"\ufffd1\ufffd"}:INTERPOLATION_1: `,[["formDir","ngForm"],["noNames",""],["highImpactDeletion",""],["deletionHeading",""],["manyNames",""],["ResourceError",""],_e,ue,C,K,ce,Ue,He,it,ct,["size","sm",3,"overlaySelected","open"],[3,"closeSelect"],[4,"ngTemplateOutlet"],["cdsModalContent",""],["name","deletionForm","novalidate","",3,"formGroup"],["type","info","spacingClass","mb-3",4,"ngIf"],[4,"ngTemplateOutlet","ngTemplateOutletContext"],[1,"question"],[4,"ngIf","ngIfElse"],[1,"form-item"],[3,"submitActionEvent","backActionEvent","form","submitText","modalForm","submitBtnType"],["type","info","spacingClass","mb-3"],[4,"ngFor","ngForOf"],["id","confirmation","formControlName","confirmation","autofocus","","modal-primary-focus","","ariaLabel","confirmation",3,"required"],["label",Ee,"labelInputID","resource_name","cdRequiredField","Resource Name",3,"invalid","invalidText"],["cdsText","","type","text","placeholder",Ce,"id","resource_name","formControlName","confirmInput"],["class","invalid-feedback",4,"ngIf"],[1,"invalid-feedback"],["cdsModalHeaderHeading",""]]},template:function(ue,C){if(1&ue){const K=a.\u0275\u0275getCurrentView();a.\u0275\u0275elementStart(0,"cds-modal",15),a.\u0275\u0275listener("overlaySelected",function(){return a.\u0275\u0275restoreView(K),a.\u0275\u0275resetView(C.closeModal())}),a.\u0275\u0275elementStart(1,"cds-modal-header",16),a.\u0275\u0275listener("closeSelect",function(){return a.\u0275\u0275restoreView(K),a.\u0275\u0275resetView(C.closeModal())}),a.\u0275\u0275template(2,N,1,0,"ng-container",17),a.\u0275\u0275elementEnd(),a.\u0275\u0275elementStart(3,"section",18)(4,"form",19,0),a.\u0275\u0275template(6,c,3,1,"cd-alert-panel",20)(7,z,1,0,"ng-container",21),a.\u0275\u0275elementStart(8,"div",22),a.\u0275\u0275template(9,G,4,2,"span",23)(10,D,3,4,"ng-template",null,1,a.\u0275\u0275templateRefExtractor)(12,oe,1,0,"ng-container",21),a.\u0275\u0275elementStart(13,"div",24),a.\u0275\u0275template(14,fe,3,1,"ng-container",23)(15,Fe,5,2,"ng-template",null,2,a.\u0275\u0275templateRefExtractor),a.\u0275\u0275elementEnd()()()(),a.\u0275\u0275elementStart(17,"cd-form-button-panel",25),a.\u0275\u0275pipe(18,"titlecase"),a.\u0275\u0275listener("submitActionEvent",function(){return a.\u0275\u0275restoreView(K),a.\u0275\u0275resetView(C.callSubmitAction())})("backActionEvent",function(){return a.\u0275\u0275restoreView(K),a.\u0275\u0275resetView(C.backAction?C.callBackAction():C.hideModal())}),a.\u0275\u0275elementEnd()(),a.\u0275\u0275template(19,te,3,4,"ng-template",null,3,a.\u0275\u0275templateRefExtractor)}if(2&ue){const K=a.\u0275\u0275reference(11),ce=a.\u0275\u0275reference(16),Ee=a.\u0275\u0275reference(20);a.\u0275\u0275property("open",C.open),a.\u0275\u0275advance(2),a.\u0275\u0275property("ngTemplateOutlet",Ee),a.\u0275\u0275advance(2),a.\u0275\u0275property("formGroup",C.deletionForm),a.\u0275\u0275advance(2),a.\u0275\u0275property("ngIf",C.infoMessage),a.\u0275\u0275advance(),a.\u0275\u0275property("ngTemplateOutlet",C.bodyTemplate)("ngTemplateOutletContext",C.bodyContext),a.\u0275\u0275advance(2),a.\u0275\u0275property("ngIf",C.itemNames)("ngIfElse",K),a.\u0275\u0275advance(3),a.\u0275\u0275property("ngTemplateOutlet",C.childFormGroupTemplate)("ngTemplateOutletContext",a.\u0275\u0275pureFunction1(18,O,C.deletionForm)),a.\u0275\u0275advance(2),a.\u0275\u0275property("ngIf",C.impact==C.impactEnum.medium)("ngIfElse",ce),a.\u0275\u0275advance(3),a.\u0275\u0275property("form",C.deletionForm)("submitText",a.\u0275\u0275pipeBind1(18,16,C.actionDescription)+" "+C.itemDescription)("modalForm",!0)("submitBtnType","delete"===C.actionDescription||"remove"===C.actionDescription?"danger":"primary")}},dependencies:[_.NgForOf,_.NgIf,_.NgTemplateOutlet,l.\u0275NgNoValidate,l.DefaultValueAccessor,l.NgControlStatus,l.NgControlStatusGroup,l.RequiredValidator,l.FormGroupDirective,l.FormControlName,R.B,P.S,M.E,b.P,u.Modal,u.ModalHeader,u.ModalContent,u.ModalHeaderHeading,u.TextInputLabelComponent,u.TextInput,u.Checkbox,m.m,g.e,_.LowerCasePipe,_.TitleCasePipe],styles:[".modal-body[_ngcontent-%COMP%]   .question[_ngcontent-%COMP%]{margin-top:1em}.modal-body[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{font-weight:700}.modal-body[_ngcontent-%COMP%]   .question[_ngcontent-%COMP%]   .form-check[_ngcontent-%COMP%]{padding-top:7px}"]})}}},87837:(Z,A,r)=>{r.d(A,{C:()=>T});var a=r(38996),e=r(87536);class T{constructor(f){this.docService=f,this.docText=$localize`documentation`}ngOnInit(){this.noSubscribe?this.docUrl=this.docService.urlGenerator(this.section):this.docService.subscribeOnce(this.section,f=>{this.docUrl=f})}static{this.\u0275fac=function(u){return new(u||T)(e.\u0275\u0275directiveInject(a.s))}}static{this.\u0275cmp=e.\u0275\u0275defineComponent({type:T,selectors:[["cd-doc"]],inputs:{section:"section",docText:"docText",noSubscribe:"noSubscribe"},decls:2,vars:2,consts:[["target","_blank",1,"ps-1","pe-1",3,"href"]],template:function(u,F){1&u&&(e.\u0275\u0275elementStart(0,"a",0),e.\u0275\u0275text(1),e.\u0275\u0275elementEnd()),2&u&&(e.\u0275\u0275propertyInterpolate("href",F.docUrl,e.\u0275\u0275sanitizeUrl),e.\u0275\u0275advance(),e.\u0275\u0275textInterpolate(F.docText))}})}}},95131:(Z,A,r)=>{r.d(A,{e:()=>u});var a=r(87536),l=r(3600);const E=["*"];function f(F,p){if(1&F&&(a.\u0275\u0275elementStart(0,"h5",5),a.\u0275\u0275i18n(1,2),a.\u0275\u0275elementEnd()),2&F){const S=a.\u0275\u0275nextContext();a.\u0275\u0275advance(),a.\u0275\u0275i18nExp(S.title),a.\u0275\u0275i18nApply(1)}}class u{constructor(){this.title="Advanced",this.showAdvanced=!1}static{this.\u0275fac=function(S){return new(S||u)}}static{this.\u0275cmp=a.\u0275\u0275defineComponent({type:u,selectors:[["cd-form-advanced-fieldset"]],inputs:{title:"title"},ngContentSelectors:E,decls:7,vars:1,consts:()=>{let p,S;return p=$localize`:␟087248800ad42567a76e82ae85d73431f8d9058b␟5089928187302403565:${"\ufffd#4\ufffd"}:START_TAG_NG_CONTENT:${"\ufffd/#4\ufffd"}:CLOSE_TAG_NG_CONTENT:`,S=$localize`:␟045ed332fbb2645493d6955677247db0d1134c2d␟2999396308623228810:${"\ufffd0\ufffd"}:INTERPOLATION:`,[["titleTpl",""],p,S,["size","lg",1,"form-item"],["id","advanced-fieldset",3,"selected","title"],[1,"cds--accordion__title","cd-header"]]},template:function(S,_){if(1&S){const v=a.\u0275\u0275getCurrentView();a.\u0275\u0275projectionDef(),a.\u0275\u0275elementStart(0,"fieldset")(1,"cds-accordion",3)(2,"cds-accordion-item",4),a.\u0275\u0275listener("selected",function(){return a.\u0275\u0275restoreView(v),a.\u0275\u0275resetView(_.showAdvanced=!_.showAdvanced)}),a.\u0275\u0275i18nStart(3,1),a.\u0275\u0275projection(4),a.\u0275\u0275i18nEnd(),a.\u0275\u0275elementEnd()(),a.\u0275\u0275template(5,f,2,1,"ng-template",null,0,a.\u0275\u0275templateRefExtractor),a.\u0275\u0275elementEnd()}if(2&S){const v=a.\u0275\u0275reference(6);a.\u0275\u0275advance(2),a.\u0275\u0275property("title",v)}},dependencies:[l.Accordion,l.AccordionItem]})}}},59781:(Z,A,r)=>{r.d(A,{e:()=>N});var a=r(91974),l=r(87536),E=r(54372),f=r(77867),u=r(35141),F=r(94254),p=r(76218),_=r(3600),R=r(33117);function P(c,z){if(1&c){const B=l.\u0275\u0275getCurrentView();l.\u0275\u0275elementStart(0,"cd-back-button",5),l.\u0275\u0275listener("backAction",function(){l.\u0275\u0275restoreView(B);const Q=l.\u0275\u0275nextContext(2);return l.\u0275\u0275resetView(Q.backAction())}),l.\u0275\u0275elementEnd()}if(2&c){const B=l.\u0275\u0275nextContext(2);l.\u0275\u0275property("name",B.cancelText)}}function M(c,z){if(1&c){const B=l.\u0275\u0275getCurrentView();l.\u0275\u0275elementStart(0,"cd-submit-button",6),l.\u0275\u0275listener("submitAction",function(){l.\u0275\u0275restoreView(B);const Q=l.\u0275\u0275nextContext(2);return l.\u0275\u0275resetView(Q.submitAction())}),l.\u0275\u0275text(1),l.\u0275\u0275elementEnd()}if(2&c){const B=l.\u0275\u0275nextContext(2);l.\u0275\u0275property("disabled",B.disabled)("form",B.form)("ariaLabel",B.submitText)("buttonType",B.submitBtnType),l.\u0275\u0275advance(),l.\u0275\u0275textInterpolate(B.submitText)}}function b(c,z){if(1&c&&(l.\u0275\u0275elementContainerStart(0),l.\u0275\u0275elementStart(1,"div",2),l.\u0275\u0275template(2,P,1,1,"cd-back-button",3)(3,M,2,5,"cd-submit-button",4),l.\u0275\u0275elementEnd(),l.\u0275\u0275elementContainerEnd()),2&c){const B=l.\u0275\u0275nextContext();l.\u0275\u0275advance(),l.\u0275\u0275property("ngClass",B.wrappingClass),l.\u0275\u0275advance(),l.\u0275\u0275property("ngIf",B.showCancel),l.\u0275\u0275advance(),l.\u0275\u0275property("ngIf",B.showSubmit)}}function m(c,z){if(1&c){const B=l.\u0275\u0275getCurrentView();l.\u0275\u0275elementStart(0,"cd-back-button",9),l.\u0275\u0275listener("backAction",function(){l.\u0275\u0275restoreView(B);const Q=l.\u0275\u0275nextContext(2);return l.\u0275\u0275resetView(Q.backAction())}),l.\u0275\u0275elementEnd()}if(2&c){const B=l.\u0275\u0275nextContext(2);l.\u0275\u0275property("name",B.cancelText)("modalForm",B.modalForm)("showSubmit",B.showSubmit)}}function g(c,z){if(1&c){const B=l.\u0275\u0275getCurrentView();l.\u0275\u0275elementStart(0,"cd-submit-button",10),l.\u0275\u0275listener("submitAction",function(){l.\u0275\u0275restoreView(B);const Q=l.\u0275\u0275nextContext(2);return l.\u0275\u0275resetView(Q.submitAction())}),l.\u0275\u0275text(1),l.\u0275\u0275elementEnd()}if(2&c){const B=l.\u0275\u0275nextContext(2);l.\u0275\u0275property("disabled",B.disabled)("form",B.form)("ariaLabel",B.submitText)("modalForm",B.modalForm)("buttonType",B.submitBtnType),l.\u0275\u0275advance(),l.\u0275\u0275textInterpolate(B.submitText)}}function O(c,z){if(1&c&&(l.\u0275\u0275elementStart(0,"cds-modal-footer"),l.\u0275\u0275template(1,m,1,3,"cd-back-button",7)(2,g,2,6,"cd-submit-button",8),l.\u0275\u0275elementEnd()),2&c){const B=l.\u0275\u0275nextContext();l.\u0275\u0275advance(),l.\u0275\u0275property("ngIf",B.showCancel),l.\u0275\u0275advance(),l.\u0275\u0275property("ngIf",B.showSubmit)}}class N{constructor(z,B,q,Q,G){this.location=z,this.actionLabels=B,this.modalService=q,this.cdsModalService=Q,this.route=G,this.submitActionEvent=new l.EventEmitter,this.backActionEvent=new l.EventEmitter,this.showSubmit=!0,this.showCancel=!0,this.wrappingClass="",this.btnClass="",this.disabled=!1,this.modalForm=!1,this.hasModalOutlet=!1}ngOnInit(){this.submitText=this.submitText||this.actionLabels.CREATE,this.cancelText=this.cancelText||this.actionLabels.CANCEL,this.hasModalOutlet="modal"===this.route.outlet}submitAction(){this.submitActionEvent.emit()}backAction(){0===this.backActionEvent.observers.length?this.modalForm&&this.cdsModalService.hasOpenModals()?this.cdsModalService.dismissAll():this.modalForm&&this.hasModalOutlet?this.location.back():this.modalService.hasOpenModals()?this.modalService.dismissAll():this.location.back():this.backActionEvent.emit()}static{this.\u0275fac=function(B){return new(B||N)(l.\u0275\u0275directiveInject(a.Location),l.\u0275\u0275directiveInject(E.Ss),l.\u0275\u0275directiveInject(f.B),l.\u0275\u0275directiveInject(F.V),l.\u0275\u0275directiveInject(p.ActivatedRoute))}}static{this.\u0275cmp=l.\u0275\u0275defineComponent({type:N,selectors:[["cd-form-button-panel"]],viewQuery:function(B,q){if(1&B&&l.\u0275\u0275viewQuery(u._,5),2&B){let Q;l.\u0275\u0275queryRefresh(Q=l.\u0275\u0275loadQuery())&&(q.submitButton=Q.first)}},inputs:{form:"form",showSubmit:"showSubmit",showCancel:"showCancel",wrappingClass:"wrappingClass",btnClass:"btnClass",submitText:"submitText",cancelText:"cancelText",disabled:"disabled",modalForm:"modalForm",submitBtnType:"submitBtnType"},outputs:{submitActionEvent:"submitActionEvent",backActionEvent:"backActionEvent"},decls:3,vars:2,consts:[["modalFooter",""],[4,"ngIf","ngIfElse"],[3,"ngClass"],[3,"name","backAction",4,"ngIf"],["data-testid","submitBtn",3,"disabled","form","ariaLabel","buttonType","submitAction",4,"ngIf"],[3,"backAction","name"],["data-testid","submitBtn",3,"submitAction","disabled","form","ariaLabel","buttonType"],["class","w-100",3,"name","modalForm","showSubmit","backAction",4,"ngIf"],["data-testid","submitBtn","class","w-100",3,"disabled","form","ariaLabel","modalForm","buttonType","submitAction",4,"ngIf"],[1,"w-100",3,"backAction","name","modalForm","showSubmit"],["data-testid","submitBtn",1,"w-100",3,"submitAction","disabled","form","ariaLabel","modalForm","buttonType"]],template:function(B,q){if(1&B&&l.\u0275\u0275template(0,b,4,3,"ng-container",1)(1,O,3,2,"ng-template",null,0,l.\u0275\u0275templateRefExtractor),2&B){const Q=l.\u0275\u0275reference(2);l.\u0275\u0275property("ngIf",!q.modalForm)("ngIfElse",Q)}},dependencies:[a.NgClass,a.NgIf,_.ModalFooter,u._,R.X],styles:["cd-form-button-panel[_ngcontent-%COMP%]{width:100%}"]})}}},62431:(Z,A,r)=>{r.d(A,{b:()=>je});var a=r(53648),l=r(3600),E=r(29841),f=r.n(E),u=r(43808),F=r(73651),p=r(12540),S=r(87536),v=r(91974),P=r(23603),M=r(42865),b=r(90476),m=r(37966),g=r(51862),O=r(19271),N=r(59781);function c(Le,Fe){if(1&Le&&(S.\u0275\u0275elementStart(0,"h3",13),S.\u0275\u0275text(1),S.\u0275\u0275elementEnd()),2&Le){const te=S.\u0275\u0275nextContext();S.\u0275\u0275advance(),S.\u0275\u0275textInterpolate1(" ",te.titleText," ")}}function z(Le,Fe){if(1&Le&&(S.\u0275\u0275elementStart(0,"p",14),S.\u0275\u0275text(1),S.\u0275\u0275elementEnd()),2&Le){const te=S.\u0275\u0275nextContext();S.\u0275\u0275advance(),S.\u0275\u0275textInterpolate(te.message)}}function B(Le,Fe){if(1&Le&&(S.\u0275\u0275elementStart(0,"cds-text-label",20),S.\u0275\u0275i18nStart(1,1),S.\u0275\u0275element(2,"input",21),S.\u0275\u0275i18nEnd(),S.\u0275\u0275elementEnd()),2&Le){const te=S.\u0275\u0275nextContext().$implicit,le=S.\u0275\u0275nextContext();S.\u0275\u0275property("labelInputID",te.name)("invalid",le.getError(te))("invalidText",le.getError(te))("cdRequiredField",!0===(null==te?null:te.required)?te.label:""),S.\u0275\u0275advance(2),S.\u0275\u0275property("id",te.name)("name",te.name)("formControlName",te.name)("invalid",le.getError(te)),S.\u0275\u0275i18nExp(te.label),S.\u0275\u0275i18nApply(1)}}function q(Le,Fe){if(1&Le&&S.\u0275\u0275element(0,"cds-number",22),2&Le){const te=S.\u0275\u0275nextContext().$implicit,le=S.\u0275\u0275nextContext();S.\u0275\u0275property("invalid",le.getError(te))("invalidText",le.getError(te))("label",te.label)("cdRequiredField",!0===(null==te?null:te.required)?te.label:"")("formControlName",te.name)("id",te.name)}}function Q(Le,Fe){if(1&Le&&(S.\u0275\u0275elementStart(0,"cds-text-label",20),S.\u0275\u0275i18nStart(1,2),S.\u0275\u0275element(2,"input",23),S.\u0275\u0275i18nEnd(),S.\u0275\u0275elementEnd()),2&Le){const te=S.\u0275\u0275nextContext().$implicit,le=S.\u0275\u0275nextContext();S.\u0275\u0275property("labelInputID",te.name)("invalid",le.getError(te))("invalidText",le.getError(te))("cdRequiredField",!0===(null==te?null:te.required)?te.label:""),S.\u0275\u0275advance(2),S.\u0275\u0275property("id",te.name)("name",te.name)("formControlName",te.name),S.\u0275\u0275i18nExp(te.label),S.\u0275\u0275i18nApply(1)}}function G(Le,Fe){if(1&Le&&(S.\u0275\u0275i18nStart(0,3,1),S.\u0275\u0275element(1,"option",27),S.\u0275\u0275i18nEnd()),2&Le){const te=S.\u0275\u0275nextContext(2).$implicit;S.\u0275\u0275advance(),S.\u0275\u0275property("ngValue",null),S.\u0275\u0275i18nExp(null==te||null==te.typeConfig?null:te.typeConfig.placeholder),S.\u0275\u0275i18nApply(0)}}function D(Le,Fe){if(1&Le&&(S.\u0275\u0275i18nStart(0,3,2),S.\u0275\u0275element(1,"option",28),S.\u0275\u0275i18nEnd()),2&Le){const te=Fe.$implicit;S.\u0275\u0275advance(),S.\u0275\u0275property("value",te.value),S.\u0275\u0275i18nExp(te.text),S.\u0275\u0275i18nApply(0)}}function oe(Le,Fe){if(1&Le&&(S.\u0275\u0275elementStart(0,"cds-select",24),S.\u0275\u0275i18nStart(1,3),S.\u0275\u0275template(2,G,2,2,"option",25)(3,D,2,2,"option",26),S.\u0275\u0275i18nEnd(),S.\u0275\u0275elementEnd()),2&Le){const te=S.\u0275\u0275nextContext().$implicit,le=S.\u0275\u0275nextContext();S.\u0275\u0275property("label",te.label)("for",te.name)("id",te.name)("formControlName",te.name)("options",null==te||null==te.typeConfig?null:te.typeConfig.options)("placeholder",null==te||null==te.typeConfig?null:te.typeConfig.placeholder)("invalid",le.getError(te))("invalidText",le.getError(te))("cdRequiredField",!0===(null==te?null:te.required)?te.label:""),S.\u0275\u0275advance(2),S.\u0275\u0275property("ngIf",null==te||null==te.typeConfig?null:te.typeConfig.placeholder),S.\u0275\u0275advance(),S.\u0275\u0275property("ngForOf",null==te||null==te.typeConfig?null:te.typeConfig.options)}}function fe(Le,Fe){if(1&Le){const te=S.\u0275\u0275getCurrentView();S.\u0275\u0275elementStart(0,"cds-combo-box",29),S.\u0275\u0275listener("updatedItems",function(ie){S.\u0275\u0275restoreView(te);const _e=S.\u0275\u0275nextContext().$implicit;return S.\u0275\u0275resetView(_e.typeConfig.options=ie)}),S.\u0275\u0275i18nStart(1,4),S.\u0275\u0275element(2,"cds-dropdown-list"),S.\u0275\u0275i18nEnd(),S.\u0275\u0275elementEnd()}if(2&Le){const te=S.\u0275\u0275nextContext().$implicit,le=S.\u0275\u0275nextContext();S.\u0275\u0275property("label",te.label)("for",te.name)("formControlName",te.name)("id",te.name)("invalid",le.getError(te))("invalidText",le.getError(te))("appendInline",!1)("items",null==te||null==te.typeConfig?null:te.typeConfig.options)("cdRequiredField",!0===(null==te?null:te.required)?te.label:"")}}function ye(Le,Fe){if(1&Le&&(S.\u0275\u0275elementContainerStart(0),S.\u0275\u0275elementStart(1,"div",15),S.\u0275\u0275template(2,B,3,9,"cds-text-label",16)(3,q,1,6,"cds-number",17)(4,Q,3,8,"cds-text-label",16)(5,oe,4,11,"cds-select",18)(6,fe,3,9,"cds-combo-box",19),S.\u0275\u0275elementEnd(),S.\u0275\u0275elementContainerEnd()),2&Le){const te=Fe.$implicit;S.\u0275\u0275advance(2),S.\u0275\u0275property("ngIf","text"===te.type),S.\u0275\u0275advance(),S.\u0275\u0275property("ngIf","number"===te.type),S.\u0275\u0275advance(),S.\u0275\u0275property("ngIf","binary"===te.type),S.\u0275\u0275advance(),S.\u0275\u0275property("ngIf","select"===te.type),S.\u0275\u0275advance(),S.\u0275\u0275property("ngIf","select-badges"===te.type)}}class je extends l.BaseModal{constructor(Fe,te,le,ie,_e,ue,C,K="",ce){super(),this.formBuilder=Fe,this.formatter=te,this.dimlessBinaryPipe=le,this.titleText=ie,this.fields=_e,this.submitButtonText=ue,this.onSubmit=C,this.message=K,this.updateAsyncValidators=ce}ngOnInit(){this.createForm()}createForm(){const Fe={};this.fields.forEach(te=>{Fe[te.name]=this.createFormControl(te)}),this.formGroup=this.formBuilder.group(Fe)}createFormControl(Fe){let te=[],le=[];f().isBoolean(Fe.required)&&Fe.required&&te.push(a.Validators.required),Fe.validators&&(te=te.concat(Fe.validators)),Fe.asyncValidators&&(le=le.concat(Fe.asyncValidators));const ie=new a.UntypedFormControl(f().defaultTo("binary"===Fe.type?this.dimlessBinaryPipe.transform(Fe.value):Fe.value,null),{validators:te,asyncValidators:le});return"select-badges"===Fe.type&&Fe.value&&ie.setValue(Fe.value),Fe.valueChangeListener&&ie.valueChanges.subscribe(_e=>{const ue=this.updateAsyncValidators(_e);this.updateValidation(Fe.dependsOn,ue)}),ie}getError(Fe){const te=this.formGroup.get(Fe.name).errors;return te?Object.keys(te)?.map(ie=>this.getErrorMessage(ie,te[ie],Fe.errors))?.join("<br>"):""}getErrorMessage(Fe,te,le){if(le){const ie=le[Fe];if(ie)return ie}return["binaryMin","binaryMax"].includes(Fe)?te():"required"===Fe?$localize`This field is required.`:"pattern"===Fe?$localize`Size must be a number or in a valid format. eg: 5 GiB`:$localize`An error occurred.`}onSubmitForm(Fe){this.fields.filter(le=>"binary"===le.type).map(le=>le.name).forEach(le=>{const ie=Fe[le];ie&&(Fe[le]=this.formatter.toBytes(ie))}),this.closeModal(),f().isFunction(this.onSubmit)&&this.onSubmit(Fe)}updateValidation(Fe,te){const le=this.formGroup.get(Fe);le.setAsyncValidators(te),le.updateValueAndValidity()}static{this.\u0275fac=function(te){return new(te||je)(S.\u0275\u0275directiveInject(u.$),S.\u0275\u0275directiveInject(p.k),S.\u0275\u0275directiveInject(F.l),S.\u0275\u0275directiveInject("titleText",8),S.\u0275\u0275directiveInject("fields",8),S.\u0275\u0275directiveInject("submitButtonText",8),S.\u0275\u0275directiveInject("onSubmit",8),S.\u0275\u0275directiveInject("message",8),S.\u0275\u0275directiveInject("updateAsyncValidators",8))}}static{this.\u0275cmp=S.\u0275\u0275defineComponent({type:je,selectors:[["cd-form-modal"]],features:[S.\u0275\u0275InheritDefinitionFeature],decls:9,vars:9,consts:()=>{let Fe,te,le,ie;return Fe=$localize`:␟d031b2593f99525739232795dcdc68a5c723ece3␟6625350406510726962: ${"\ufffd0\ufffd"}:INTERPOLATION: ${"\ufffd#2\ufffd\ufffd/#2\ufffd"}:TAG_INPUT:`,te=$localize`:␟d031b2593f99525739232795dcdc68a5c723ece3␟6625350406510726962: ${"\ufffd0\ufffd"}:INTERPOLATION: ${"\ufffd#2\ufffd\ufffd/#2\ufffd"}:TAG_INPUT:`,le=$localize`:␟19b2f5ad5d100309891ae694e639d5e93b35b191␟7970698934018604280:${"\ufffd*2:1\ufffd\ufffd#1:1\ufffd"}:START_TAG_OPTION: ${"\ufffd0:1\ufffd"}:INTERPOLATION: ${"[\ufffd/#1:1\ufffd\ufffd/*2:1\ufffd|\ufffd/#1:2\ufffd\ufffd/*3:2\ufffd]"}:CLOSE_TAG_OPTION:${"\ufffd*3:2\ufffd\ufffd#1:2\ufffd"}:START_TAG_OPTION_1: ${"\ufffd0:2\ufffd"}:INTERPOLATION_1: ${"[\ufffd/#1:1\ufffd\ufffd/*2:1\ufffd|\ufffd/#1:2\ufffd\ufffd/*3:2\ufffd]"}:CLOSE_TAG_OPTION:`,le=S.\u0275\u0275i18nPostprocess(le),ie=$localize`:␟e1f562c6d0f39d4e9b167612dad19327a7f3f4a9␟442692580528822602:${"\ufffd#2\ufffd"}:START_TAG_CDS_DROPDOWN_LIST:${"\ufffd/#2\ufffd"}:CLOSE_TAG_CDS_DROPDOWN_LIST:`,[["formDir","ngForm"],Fe,te,le,ie,["size","md",3,"overlaySelected","open","hasScrollingContent"],[3,"closeSelect"],["cdsModalHeaderHeading","",4,"ngIf"],["cdsModalContent","","data-testid","modal-content"],["novalidate","",3,"formGroup"],["id","description",4,"ngIf"],[4,"ngFor","ngForOf"],[3,"submitActionEvent","form","submitText","modalForm"],["cdsModalHeaderHeading",""],["id","description"],[1,"form-item"],[3,"labelInputID","invalid","invalidText","cdRequiredField",4,"ngIf"],[3,"invalid","invalidText","label","cdRequiredField","formControlName","id",4,"ngIf"],[3,"label","for","id","formControlName","options","placeholder","invalid","invalidText","cdRequiredField",4,"ngIf"],["type","multi","selectionFeedback","top-after-reopen","itemValueKey","content","cdDynamicInputCombobox","",3,"label","for","formControlName","id","invalid","invalidText","appendInline","items","cdRequiredField","updatedItems",4,"ngIf"],[3,"labelInputID","invalid","invalidText","cdRequiredField"],["cdsText","","type","text","autofocus","",3,"id","name","formControlName","invalid"],[3,"invalid","invalidText","label","cdRequiredField","formControlName","id"],["type","text","cdsText","","cdDimlessBinary","",3,"id","name","formControlName"],[3,"label","for","id","formControlName","options","placeholder","invalid","invalidText","cdRequiredField"],[3,"ngValue",4,"ngIf"],[3,"value",4,"ngFor","ngForOf"],[3,"ngValue"],[3,"value"],["type","multi","selectionFeedback","top-after-reopen","itemValueKey","content","cdDynamicInputCombobox","",3,"updatedItems","label","for","formControlName","id","invalid","invalidText","appendInline","items","cdRequiredField"]]},template:function(te,le){if(1&te){const ie=S.\u0275\u0275getCurrentView();S.\u0275\u0275elementStart(0,"cds-modal",5),S.\u0275\u0275listener("overlaySelected",function(){return S.\u0275\u0275restoreView(ie),S.\u0275\u0275resetView(le.closeModal())}),S.\u0275\u0275elementStart(1,"cds-modal-header",6),S.\u0275\u0275listener("closeSelect",function(){return S.\u0275\u0275restoreView(ie),S.\u0275\u0275resetView(le.closeModal())}),S.\u0275\u0275template(2,c,2,1,"h3",7),S.\u0275\u0275elementEnd(),S.\u0275\u0275elementStart(3,"div",8)(4,"form",9,0),S.\u0275\u0275template(6,z,2,1,"p",10)(7,ye,7,5,"ng-container",11),S.\u0275\u0275elementEnd()(),S.\u0275\u0275elementStart(8,"cd-form-button-panel",12),S.\u0275\u0275listener("submitActionEvent",function(){return S.\u0275\u0275restoreView(ie),S.\u0275\u0275resetView(le.onSubmitForm(le.formGroup.value))}),S.\u0275\u0275elementEnd()()}2&te&&(S.\u0275\u0275property("open",le.open)("hasScrollingContent",!0),S.\u0275\u0275advance(2),S.\u0275\u0275property("ngIf",le.titleText),S.\u0275\u0275advance(2),S.\u0275\u0275property("formGroup",le.formGroup),S.\u0275\u0275advance(2),S.\u0275\u0275property("ngIf",le.message),S.\u0275\u0275advance(),S.\u0275\u0275property("ngForOf",le.fields),S.\u0275\u0275advance(),S.\u0275\u0275property("form",le.formGroup)("submitText",le.submitButtonText)("modalForm",!0))},dependencies:[v.NgForOf,v.NgIf,a.\u0275NgNoValidate,a.NgSelectOption,a.\u0275NgSelectMultipleOption,a.DefaultValueAccessor,a.NgControlStatus,a.NgControlStatusGroup,a.FormGroupDirective,a.FormControlName,P.B,M.Y,b.S,m.E,g.P,O.k,l.Modal,l.ModalHeader,l.ModalContent,l.ModalHeaderHeading,l.TextInputLabelComponent,l.TextInput,l.NumberComponent,l.DropdownList,l.Select,l.Option,l.ComboBox,N.e]})}}},1505:(Z,A,r)=>{r.d(A,{c:()=>z});var a=r(5559),l=r(11549),T=r(46045),E=r(87536),u=r(91974),p=r(90476),S=r(23589),_=r(92805),v=r(87837);const R=B=>[B],P=(B,q)=>[B,q];function M(B,q){1&B&&(E.\u0275\u0275elementStart(0,"cd-loading-panel"),E.\u0275\u0275i18n(1,1),E.\u0275\u0275elementEnd())}function b(B,q){1&B&&(E.\u0275\u0275elementStart(0,"cd-alert-panel",7),E.\u0275\u0275i18nStart(1,2),E.\u0275\u0275element(2,"cd-doc",8),E.\u0275\u0275i18nEnd(),E.\u0275\u0275elementEnd())}function m(B,q){1&B&&(E.\u0275\u0275elementStart(0,"cd-alert-panel",7),E.\u0275\u0275i18nStart(1,3),E.\u0275\u0275element(2,"cd-doc",8),E.\u0275\u0275i18nEnd(),E.\u0275\u0275elementEnd())}function g(B,q){if(1&B){const Q=E.\u0275\u0275getCurrentView();E.\u0275\u0275elementStart(0,"div",15)(1,"div",16)(2,"div",17)(3,"button",18),E.\u0275\u0275listener("click",function(){E.\u0275\u0275restoreView(Q);const D=E.\u0275\u0275nextContext(2);return E.\u0275\u0275resetView(D.reset())}),E.\u0275\u0275element(4,"i",19),E.\u0275\u0275elementEnd()(),E.\u0275\u0275elementStart(5,"div",17)(6,"button",20),E.\u0275\u0275listener("click",function(){E.\u0275\u0275restoreView(Q);const D=E.\u0275\u0275nextContext(2);return E.\u0275\u0275resetView(D.showMessage=!D.showMessage)}),E.\u0275\u0275element(7,"i",19),E.\u0275\u0275elementEnd()()()()}if(2&B){const Q=E.\u0275\u0275nextContext(2);E.\u0275\u0275advance(4),E.\u0275\u0275property("ngClass",E.\u0275\u0275pureFunction1(2,R,Q.icons.undo)),E.\u0275\u0275advance(3),E.\u0275\u0275property("ngClass",E.\u0275\u0275pureFunction2(4,P,Q.icons.infoCircle,Q.icons.large))}}function O(B,q){if(1&B){const Q=E.\u0275\u0275getCurrentView();E.\u0275\u0275elementStart(0,"cd-alert-panel",23),E.\u0275\u0275listener("dismissed",function(){E.\u0275\u0275restoreView(Q);const D=E.\u0275\u0275nextContext(3);return E.\u0275\u0275resetView(D.showMessage=!1)}),E.\u0275\u0275i18nStart(1,4),E.\u0275\u0275element(2,"a",24),E.\u0275\u0275i18nEnd(),E.\u0275\u0275elementEnd()}if(2&B){const Q=E.\u0275\u0275nextContext(3);E.\u0275\u0275advance(2),E.\u0275\u0275property("href",Q.grafanaSrc,E.\u0275\u0275sanitizeUrl)}}function N(B,q){if(1&B&&(E.\u0275\u0275elementStart(0,"div",21),E.\u0275\u0275template(1,O,3,1,"cd-alert-panel",22),E.\u0275\u0275elementEnd()),2&B){const Q=E.\u0275\u0275nextContext(2);E.\u0275\u0275advance(),E.\u0275\u0275property("ngIf",Q.showMessage)}}function c(B,q){if(1&B&&(E.\u0275\u0275elementContainerStart(0),E.\u0275\u0275template(1,g,8,7,"div",9),E.\u0275\u0275elementStart(2,"div",10),E.\u0275\u0275template(3,N,2,1,"div",11),E.\u0275\u0275elementEnd(),E.\u0275\u0275elementStart(4,"div",10)(5,"div",12)(6,"div",13),E.\u0275\u0275element(7,"iframe",14,0),E.\u0275\u0275elementEnd()()(),E.\u0275\u0275elementContainerEnd()),2&B){const Q=E.\u0275\u0275nextContext();E.\u0275\u0275advance(),E.\u0275\u0275property("ngIf",Q.showMessage),E.\u0275\u0275advance(2),E.\u0275\u0275property("ngIf",Q.showMessage),E.\u0275\u0275advance(4),E.\u0275\u0275property("src",Q.grafanaSrc,E.\u0275\u0275sanitizeResourceUrl)("ngClass",Q.panelStyle)("title",Q.title)}}class z{constructor(q,Q){this.sanitizer=q,this.settingsService=Q,this.grafanaExist=!1,this.mode="&kiosk",this.loading=!0,this.styles={},this.dashboardExist=!0,this.showMessage=!1,this.icons=T.FI,this.DEFAULT_TIME="from=now-1h&to=now",this.grafanaTimes=[{name:$localize`Last 5 minutes`,value:"from=now-5m&to=now"},{name:$localize`Last 15 minutes`,value:"from=now-15m&to=now"},{name:$localize`Last 30 minutes`,value:"from=now-30m&to=now"},{name:$localize`Last 1 hour (Default)`,value:"from=now-1h&to=now"},{name:$localize`Last 3 hours`,value:"from=now-3h&to=now"},{name:$localize`Last 6 hours`,value:"from=now-6h&to=now"},{name:$localize`Last 12 hours`,value:"from=now-12h&to=now"},{name:$localize`Last 24 hours`,value:"from=now-24h&to=now"},{name:$localize`Yesterday`,value:"from=now-1d%2Fd&to=now-1d%2Fd"},{name:$localize`Today so far`,value:"from=now%2Fd&to=now"},{name:$localize`Day before yesterday`,value:"from=now-2d%2Fd&to=now-2d%2Fd"},{name:$localize`Last 2 days`,value:"from=now-2d&to=now"},{name:$localize`This day last week`,value:"from=now-7d%2Fd&to=now-7d%2Fd"},{name:$localize`Previous week`,value:"from=now-1w%2Fw&to=now-1w%2Fw"},{name:$localize`This week so far`,value:"from=now%2Fw&to=now"},{name:$localize`Last 7 days`,value:"from=now-7d&to=now"},{name:$localize`Previous month`,value:"from=now-1M%2FM&to=now-1M%2FM"},{name:$localize`This month so far`,value:"from=now%2FM&to=now"},{name:$localize`Last 30 days`,value:"from=now-30d&to=now"},{name:$localize`Last 90 days`,value:"from=now-90d&to=now"},{name:$localize`Last 6 months`,value:"from=now-6M&to=now"},{name:$localize`Last 1 year`,value:"from=now-1y&to=now"},{name:$localize`Previous year`,value:"from=now-1y%2Fy&to=now-1y%2Fy"},{name:$localize`This year so far`,value:"from=now%2Fy&to=now"},{name:$localize`Last 2 years`,value:"from=now-2y&to=now"},{name:$localize`Last 5 years`,value:"from=now-5y&to=now"}]}ngOnInit(){this.time=this.DEFAULT_TIME,this.styles={one:"grafana_one",two:"grafana_two",three:"grafana_three",four:"grafana_four"},this.datasource="metrics"===this.type?"Dashboard1":"Loki",this.settingsService.ifSettingConfigured("api/grafana/url",q=>{this.grafanaExist=!0,this.loading=!1,this.baseUrl=q+"/d/",this.getFrame()}),this.panelStyle=this.styles[this.grafanaStyle]}getFrame(){this.settingsService.validateGrafanaDashboardUrl(this.uid).subscribe(q=>this.dashboardExist=200===q||401===q),"metrics"===this.type?this.url=`${this.baseUrl}${this.uid}/${this.grafanaPath}&refresh=2s&var-datasource=${this.datasource}${this.mode}&${this.time}`:this.url=`${this.baseUrl.slice(0,-2)}${this.grafanaPath}orgId=1&left={"datasource": "${this.datasource}", "queries": [{"refId": "A"}], "range": {"from": "now-1h", "to": "now"}}${this.mode}`,this.grafanaSrc=this.sanitizer.bypassSecurityTrustResourceUrl(this.url)}onTimepickerChange(){this.grafanaExist&&this.getFrame()}reset(){this.time=this.DEFAULT_TIME,this.grafanaExist&&this.getFrame()}ngOnChanges(){this.grafanaExist&&this.getFrame()}static{this.\u0275fac=function(Q){return new(Q||z)(E.\u0275\u0275directiveInject(a.DomSanitizer),E.\u0275\u0275directiveInject(l.h))}}static{this.\u0275cmp=E.\u0275\u0275defineComponent({type:z,selectors:[["cd-grafana"]],inputs:{type:"type",grafanaPath:"grafanaPath",grafanaStyle:"grafanaStyle",uid:"uid",title:"title"},features:[E.\u0275\u0275NgOnChangesFeature],decls:4,vars:4,consts:()=>{let q,Q,G,D,oe,fe;return q=$localize`:␟c5109325fb160b543f71a51e7511c00575057431␟8571022891891074216:Loading panel data...`,Q=$localize`:␟54e85eccd5e82eef02aa550dcd96311a4b10b334␟8020852368367315098:Please consult the ${"\ufffd#2\ufffd"}:START_TAG_CD_DOC:${"\ufffd/#2\ufffd"}:CLOSE_TAG_CD_DOC: on how to configure and enable the monitoring functionality.`,G=$localize`:␟2b704ebe14ea63127a4ac45ab91050472d62aca6␟8615349235188058292:Grafana Dashboard doesn't exist. Please refer to  ${"\ufffd#2\ufffd"}:START_TAG_CD_DOC:${"\ufffd/#2\ufffd"}:CLOSE_TAG_CD_DOC: on how to add dashboards to Grafana.`,D=$localize`:␟238c1ba845dd7330e8088165275919a1debf1ca3␟6588188798799848745:Reset Settings`,oe=$localize`:␟e48501d20810348ebf4982c2b9497fe384eaedfe␟91377515965148095:Show hidden information`,fe=$localize`:␟59139c13d0d36f6ca38d3e906af2a8471272e2dd␟3068573303343281223:If no embedded Grafana Dashboard appeared below, please follow ${"\ufffd#2\ufffd"}:START_LINK:this link ${"\ufffd/#2\ufffd"}:CLOSE_LINK: to check if Grafana is reachable and there are no HTTPS certificate issues. You may need to reload this page after accepting any Browser certificate exceptions`,[["iframe",""],q,Q,G,fe,[4,"ngIf"],["type","info",4,"ngIf"],["type","info"],["section","grafana"],["class","row mb-3",4,"ngIf"],[1,"row"],["class","col my-2",4,"ngIf"],[1,"col"],[1,"grafana-container"],["id","iframe","frameborder","0","scrolling","no",1,"grafana",3,"src","ngClass","title"],[1,"row","mb-3"],[1,"col-lg-5","d-flex"],[1,"col-sm-1"],["title",D,1,"btn","btn-light","ms-3",3,"click"],[3,"ngClass"],["title",oe,1,"btn","btn-light","ms-3",3,"click"],[1,"col","my-2"],["type","info","class","mb-3","dismissible","true",3,"dismissed",4,"ngIf"],["type","info","dismissible","true",1,"mb-3",3,"dismissed"],["target","_blank","noopener","","noreferrer","",3,"href"]]},template:function(Q,G){1&Q&&E.\u0275\u0275template(0,M,2,0,"cd-loading-panel",5)(1,b,3,0,"cd-alert-panel",6)(2,m,3,0,"cd-alert-panel",6)(3,c,9,5,"ng-container",5),2&Q&&(E.\u0275\u0275property("ngIf",G.loading&&G.grafanaExist),E.\u0275\u0275advance(),E.\u0275\u0275property("ngIf",!G.grafanaExist),E.\u0275\u0275advance(),E.\u0275\u0275property("ngIf",!G.dashboardExist),E.\u0275\u0275advance(),E.\u0275\u0275property("ngIf",G.grafanaExist&&G.dashboardExist))},dependencies:[u.NgClass,u.NgIf,p.S,S.e,_.m,v.C],styles:[".grafana[_ngcontent-%COMP%]{height:600px;width:100%;z-index:0}.grafana_one[_ngcontent-%COMP%]{height:400px}.grafana_two[_ngcontent-%COMP%]{height:750px}.grafana_three[_ngcontent-%COMP%]{height:900px}.grafana_four[_ngcontent-%COMP%]{height:1160px}.timepicker[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{font-weight:700}.dropdown-menu[_ngcontent-%COMP%]{left:auto;right:20px;top:20px}"]})}}},64333:(Z,A,r)=>{r.d(A,{O:()=>F});var a=r(87536),l=r(91974);const E=["*"];function f(p,S){1&p&&(a.\u0275\u0275elementContainerStart(0),a.\u0275\u0275i18n(1,1),a.\u0275\u0275elementContainerEnd())}function u(p,S){1&p&&a.\u0275\u0275projection(0)}class F{constructor(){this.formAllFieldsRequired=!1}static{this.\u0275fac=function(_){return new(_||F)}}static{this.\u0275cmp=a.\u0275\u0275defineComponent({type:F,selectors:[["cd-help-text"]],inputs:{formAllFieldsRequired:"formAllFieldsRequired"},ngContentSelectors:E,decls:4,vars:2,consts:()=>{let S;return S=$localize`:␟3fa8330ff975a86c7d25578cf84716909c11576f␟3286574557857057296: All fields are required, except where marked optional. `,[["contentTpl",""],S,[1,"form-text","text-muted"],[4,"ngIf","ngIfElse"]]},template:function(_,v){if(1&_&&(a.\u0275\u0275projectionDef(),a.\u0275\u0275elementStart(0,"div",2),a.\u0275\u0275template(1,f,2,0,"ng-container",3)(2,u,1,0,"ng-template",null,0,a.\u0275\u0275templateRefExtractor),a.\u0275\u0275elementEnd()),2&_){const R=a.\u0275\u0275reference(3);a.\u0275\u0275advance(),a.\u0275\u0275property("ngIf",v.formAllFieldsRequired)("ngIfElse",R)}},dependencies:[l.NgIf],styles:[".form-text[_ngcontent-%COMP%]{font-size:small}"]})}}},55472:(Z,A,r)=>{r.d(A,{m:()=>R});var e,P,a=r(46045);(P=e||(e={})).popover="popover",P.tooltip="tooltip";var l=r(87536),T=r(91974),E=r(3600);const f=["*"];function u(P,M){1&P&&l.\u0275\u0275elementContainer(0)}function F(P,M){if(1&P&&(l.\u0275\u0275elementStart(0,"div",4),l.\u0275\u0275element(1,"div",5),l.\u0275\u0275template(2,u,1,0,"ng-container",6),l.\u0275\u0275elementEnd()),2&P){const b=l.\u0275\u0275nextContext(),m=l.\u0275\u0275reference(5);l.\u0275\u0275advance(),l.\u0275\u0275classMap(b.class),l.\u0275\u0275property("innerHtml",b.html,l.\u0275\u0275sanitizeHtml),l.\u0275\u0275advance(),l.\u0275\u0275property("ngTemplateOutlet",m)}}function p(P,M){if(1&P&&(l.\u0275\u0275elementStart(0,"cds-tooltip",2),l.\u0275\u0275namespaceSVG(),l.\u0275\u0275element(1,"svg",7),l.\u0275\u0275elementEnd()),2&P){const b=l.\u0275\u0275nextContext(),m=l.\u0275\u0275reference(1);l.\u0275\u0275property("description",m)("autoAlign",!0),l.\u0275\u0275advance(),l.\u0275\u0275property("cdsIcon",b.iconType)("size",b.iconSize)}}function S(P,M){1&P&&l.\u0275\u0275elementContainer(0)}function _(P,M){if(1&P){const b=l.\u0275\u0275getCurrentView();l.\u0275\u0275elementStart(0,"div",3)(1,"div",8),l.\u0275\u0275listener("click",function(){l.\u0275\u0275restoreView(b);const g=l.\u0275\u0275nextContext();return l.\u0275\u0275resetView(g.togglePopover())})("keydown.enter",function(){l.\u0275\u0275restoreView(b);const g=l.\u0275\u0275nextContext();return l.\u0275\u0275resetView(g.togglePopover())}),l.\u0275\u0275elementStart(2,"div",9),l.\u0275\u0275namespaceSVG(),l.\u0275\u0275element(3,"svg",7),l.\u0275\u0275elementEnd(),l.\u0275\u0275namespaceHTML(),l.\u0275\u0275elementStart(4,"cds-popover-content")(5,"div",10),l.\u0275\u0275listener("click",function(g){return l.\u0275\u0275restoreView(b),l.\u0275\u0275resetView(g.stopPropagation())}),l.\u0275\u0275template(6,S,1,0,"ng-container",6),l.\u0275\u0275elementEnd()()()()}if(2&P){const b=l.\u0275\u0275nextContext(),m=l.\u0275\u0275reference(5);l.\u0275\u0275property("ngClass",b.class),l.\u0275\u0275advance(),l.\u0275\u0275property("isOpen",b.isPopoverOpen)("autoAlign",!0),l.\u0275\u0275advance(2),l.\u0275\u0275property("cdsIcon",b.iconType)("size",b.iconSize),l.\u0275\u0275advance(3),l.\u0275\u0275property("ngTemplateOutlet",m)}}function v(P,M){1&P&&l.\u0275\u0275projection(0)}class R{constructor(){this.icons=a.FI,this.isPopoverOpen=!1,this.helperType=e,this.type=e.tooltip,this.iconSize=this.icons.size16,this.iconType=this.icons.info}togglePopover(){this.isPopoverOpen=!this.isPopoverOpen}closePopover(){this.type===e.popover&&this.isPopoverOpen&&(this.isPopoverOpen=!1)}static{this.\u0275fac=function(b){return new(b||R)}}static{this.\u0275cmp=l.\u0275\u0275defineComponent({type:R,selectors:[["cd-helper"]],inputs:{type:"type",class:"class",html:"html",iconSize:"iconSize",iconType:"iconType"},ngContentSelectors:f,decls:6,vars:1,consts:[["tooltipTemplate",""],["content",""],[3,"description","autoAlign"],[1,"inline-block",3,"ngClass"],[1,"cds--popover-scroll-container"],[3,"innerHtml"],[4,"ngTemplateOutlet"],[3,"cdsIcon","size"],["cdsPopover","","tabindex","0",3,"click","keydown.enter","isOpen","autoAlign"],[1,"popover-trigger"],[1,"cds--popover-scroll-container",3,"click"]],template:function(b,m){1&b&&(l.\u0275\u0275projectionDef(),l.\u0275\u0275template(0,F,3,4,"ng-template",null,0,l.\u0275\u0275templateRefExtractor)(2,p,2,4,"cds-tooltip",2)(3,_,7,6,"div",3)(4,v,1,0,"ng-template",null,1,l.\u0275\u0275templateRefExtractor)),2&b&&(l.\u0275\u0275advance(2),l.\u0275\u0275conditional(m.type===m.helperType.tooltip?2:3))},dependencies:[T.NgClass,T.NgTemplateOutlet,E.IconDirective,E.Tooltip,E.PopoverContainer,E.PopoverContent],styles:["cds-tooltip[_ngcontent-%COMP%]{margin-left:5px}.inline-block[_ngcontent-%COMP%]{display:inline-block}"]})}}},46765:(Z,A,r)=>{r.d(A,{R:()=>f});var a=r(46045),e=r(87536),T=r(3600);class f{constructor(){this.size=a.lK.size16}ngOnInit(){this.icon=a.FI[this.type]}static{this.\u0275fac=function(p){return new(p||f)}}static{this.\u0275cmp=e.\u0275\u0275defineComponent({type:f,selectors:[["cd-icon"]],inputs:{type:"type",size:"size"},decls:1,vars:4,consts:[[3,"cdsIcon","size"]],template:function(p,S){1&p&&(e.\u0275\u0275namespaceSVG(),e.\u0275\u0275element(0,"svg",0)),2&p&&(e.\u0275\u0275classMap(S.type+"-icon"),e.\u0275\u0275property("cdsIcon",S.icon)("size",S.size))},dependencies:[T.IconDirective],styles:[".success-icon[_ngcontent-%COMP%]{color:var(--cds-support-success, #24a148)}.danger-icon[_ngcontent-%COMP%]{color:var(--cds-support-error, #da1e28)}.infoCircle-icon[_ngcontent-%COMP%]{color:var(--cds-support-info, #0043ce)}.warning-icon[_ngcontent-%COMP%]{color:var(--cds-support-caution-major, #ff832b)}"]})}}},23589:(Z,A,r)=>{r.d(A,{e:()=>S});var a=r(46045),e=r(87536),T=r(91974),f=r(77317);const F=["*"],p=(_,v)=>[_,v];class S{constructor(){this.icons=a.FI}static{this.\u0275fac=function(R){return new(R||S)}}static{this.\u0275cmp=e.\u0275\u0275defineComponent({type:S,selectors:[["cd-loading-panel"]],ngContentSelectors:F,decls:4,vars:5,consts:[["type","info",3,"dismissible"],["aria-hidden","true",1,"me-2",3,"ngClass"]],template:function(R,P){1&R&&(e.\u0275\u0275projectionDef(),e.\u0275\u0275elementStart(0,"ngb-alert",0)(1,"strong"),e.\u0275\u0275element(2,"i",1),e.\u0275\u0275elementEnd(),e.\u0275\u0275projection(3),e.\u0275\u0275elementEnd()),2&R&&(e.\u0275\u0275property("dismissible",!1),e.\u0275\u0275advance(2),e.\u0275\u0275property("ngClass",e.\u0275\u0275pureFunction2(2,p,P.icons.spinner,P.icons.spin)))},dependencies:[T.NgClass,f.NgbAlert]})}}},69081:(Z,A,r)=>{r.d(A,{z:()=>v});var a=r(87536),l=r(76218),u=(r(77317),r(91974)),p=r(90476);const S=[[["",8,"modal-title"]],[["",8,"modal-content"]]],_=[".modal-title",".modal-content"];class v{constructor(P){this.router=P,this.hide=new a.EventEmitter}close(){this.pageURL?this.router.navigate([this.pageURL,{outlets:{modal:null}}]):this.modalRef?.close(),this.hide.emit()}static{this.\u0275fac=function(M){return new(M||v)(a.\u0275\u0275directiveInject(l.Router))}}static{this.\u0275cmp=a.\u0275\u0275defineComponent({type:v,selectors:[["cd-modal"]],inputs:{modalRef:"modalRef",pageURL:"pageURL"},outputs:{hide:"hide"},ngContentSelectors:_,decls:8,vars:2,consts:[[3,"ngClass"],[1,"modal-content","content-theme"],[1,"modal-header"],[1,"modal-title","float-start"],["type","button","aria-label","Close",1,"btn-close","float-end",3,"click"]],template:function(M,b){1&M&&(a.\u0275\u0275projectionDef(S),a.\u0275\u0275elementStart(0,"div",0)(1,"div",0)(2,"div",1)(3,"div",2)(4,"h4",3),a.\u0275\u0275projection(5),a.\u0275\u0275elementEnd(),a.\u0275\u0275elementStart(6,"button",4),a.\u0275\u0275listener("click",function(){return b.close()}),a.\u0275\u0275elementEnd()(),a.\u0275\u0275projection(7,1),a.\u0275\u0275elementEnd()()()),2&M&&(a.\u0275\u0275property("ngClass",b.pageURL?"modal":""),a.\u0275\u0275advance(),a.\u0275\u0275property("ngClass",b.pageURL?"modal-dialog":""))},dependencies:[u.NgClass,p.S],styles:['.content-theme[_ngcontent-%COMP%]{--cds-ai-aura-end: rgba(255, 255, 255, 0);--cds-ai-aura-hover-background: #edf5ff;--cds-ai-aura-hover-end: rgba(255, 255, 255, 0);--cds-ai-aura-hover-start: rgba(69, 137, 255, .32);--cds-ai-aura-start: rgba(69, 137, 255, .1);--cds-ai-aura-start-sm: rgba(69, 137, 255, .16);--cds-ai-border-end: #78a9ff;--cds-ai-border-start: rgba(166, 200, 255, .64);--cds-ai-border-strong: #4589ff;--cds-ai-drop-shadow: rgba(15, 98, 254, .1);--cds-ai-inner-shadow: rgba(69, 137, 255, .1);--cds-ai-overlay: rgba(0, 17, 65, .5);--cds-ai-popover-background: #ffffff;--cds-ai-popover-caret-bottom: #78a9ff;--cds-ai-popover-caret-bottom-background: #eaf1ff;--cds-ai-popover-caret-bottom-background-actions: #e9effa;--cds-ai-popover-caret-center: #a0c3ff;--cds-ai-popover-shadow-outer-01: rgba(0, 67, 206, .06);--cds-ai-popover-shadow-outer-02: rgba(0, 0, 0, .04);--cds-ai-skeleton-background: #d0e2ff;--cds-ai-skeleton-element-background: #4589ff;--cds-background: #f4f4f4;--cds-background-active: rgba(141, 141, 141, .5);--cds-background-brand: #374249;--cds-background-hover: rgba(141, 141, 141, .12);--cds-background-inverse: #f8f9fa;--cds-background-inverse-hover: #dee2e6;--cds-background-selected: rgba(141, 141, 141, .2);--cds-background-selected-hover: rgba(141, 141, 141, .32);--cds-border-disabled: #c6c6c6;--cds-border-interactive: #25828e;--cds-border-inverse: #161616;--cds-border-strong-01: #8d8d8d;--cds-border-strong-02: #8d8d8d;--cds-border-strong-03: #8d8d8d;--cds-border-subtle-00: #c6c6c6;--cds-border-subtle-01: #e0e0e0;--cds-border-subtle-02: #c6c6c6;--cds-border-subtle-03: #e0e0e0;--cds-border-subtle-selected-01: #c6c6c6;--cds-border-subtle-selected-02: #c6c6c6;--cds-border-subtle-selected-03: #c6c6c6;--cds-border-tile-01: #a8a8a8;--cds-border-tile-02: #c6c6c6;--cds-border-tile-03: #a8a8a8;--cds-chat-avatar-agent: #393939;--cds-chat-avatar-bot: #6f6f6f;--cds-chat-avatar-user: #0f62fe;--cds-chat-bubble-agent: #ffffff;--cds-chat-bubble-border: #e0e0e0;--cds-chat-bubble-user: #e0e0e0;--cds-chat-button: #0f62fe;--cds-chat-button-active: rgba(141, 141, 141, .5);--cds-chat-button-hover: rgba(141, 141, 141, .12);--cds-chat-button-selected: rgba(141, 141, 141, .2);--cds-chat-button-text-hover: #0043ce;--cds-chat-button-text-selected: #525252;--cds-chat-header-background: #ffffff;--cds-chat-prompt-background: #ffffff;--cds-chat-prompt-border-end: rgba(244, 244, 244, 0);--cds-chat-prompt-border-start: #f4f4f4;--cds-chat-shell-background: #ffffff;--cds-field-01: #f4f4f4;--cds-field-02: #f4f4f4;--cds-field-03: #ffffff;--cds-field-hover-01: #e8e8e8;--cds-field-hover-02: #e8e8e8;--cds-field-hover-03: #e8e8e8;--cds-focus: #25828e;--cds-focus-inset: #aee3ea;--cds-focus-inverse: #5ec7d5;--cds-highlight: #d0e2ff;--cds-icon-disabled: rgba(22, 22, 22, .25);--cds-icon-interactive: #0f62fe;--cds-icon-inverse: #ffffff;--cds-icon-on-color: #ffffff;--cds-icon-on-color-disabled: #8d8d8d;--cds-icon-primary: #161616;--cds-icon-secondary: #343a40;--cds-interactive: #25828e;--cds-layer-01: #f8f9fa;--cds-layer-02: #f4f4f4;--cds-layer-03: #ffffff;--cds-layer-accent-01: #e0e0e0;--cds-layer-accent-02: #e0e0e0;--cds-layer-accent-03: #e0e0e0;--cds-layer-accent-active-01: #a8a8a8;--cds-layer-accent-active-02: #a8a8a8;--cds-layer-accent-active-03: #a8a8a8;--cds-layer-accent-hover-01: #d1d1d1;--cds-layer-accent-hover-02: #d1d1d1;--cds-layer-accent-hover-03: #d1d1d1;--cds-layer-active-01: #c6c6c6;--cds-layer-active-02: #c6c6c6;--cds-layer-active-03: #c6c6c6;--cds-layer-background-01: #f4f4f4;--cds-layer-background-02: #ffffff;--cds-layer-background-03: #f4f4f4;--cds-layer-hover-01: #e0e0e0;--cds-layer-hover-02: #e8e8e8;--cds-layer-hover-03: #e8e8e8;--cds-layer-selected-01: #e0e0e0;--cds-layer-selected-02: #e0e0e0;--cds-layer-selected-03: #e0e0e0;--cds-layer-selected-disabled: #8d8d8d;--cds-layer-selected-hover-01: #d1d1d1;--cds-layer-selected-hover-02: #d1d1d1;--cds-layer-selected-hover-03: #d1d1d1;--cds-layer-selected-inverse: #161616;--cds-link-inverse: #374249;--cds-link-inverse-active: #f4f4f4;--cds-link-inverse-hover: #a6c8ff;--cds-link-inverse-visited: #be95ff;--cds-link-primary: #25828e;--cds-link-primary-hover: #374249;--cds-link-secondary: #374249;--cds-link-visited: #374249;--cds-overlay: rgba(22, 22, 22, .5);--cds-shadow: rgba(0, 0, 0, .3);--cds-skeleton-background: #e8e8e8;--cds-skeleton-element: #c6c6c6;--cds-support-caution-major: #ff832b;--cds-support-caution-minor: #f1c21b;--cds-support-caution-undefined: #8a3ffc;--cds-support-error: #da1e28;--cds-support-error-inverse: #fa4d56;--cds-support-info: #25828e;--cds-support-info-inverse: #4589ff;--cds-support-success: #24a148;--cds-support-success-inverse: #42be65;--cds-support-warning: #f1c21b;--cds-support-warning-inverse: #f1c21b;--cds-text-disabled: #adb5bd;--cds-text-error: #da1e28;--cds-text-helper: #6f6f6f;--cds-text-inverse: #343a40;--cds-text-on-color: #ffffff;--cds-text-on-color-disabled: #8d8d8d;--cds-text-placeholder: rgba(22, 22, 22, .4);--cds-text-primary: #343a40;--cds-text-secondary: #343a40;--cds-toggle-off: #8d8d8d;--cds-spacing-01: .125rem;--cds-spacing-02: .25rem;--cds-spacing-03: .5rem;--cds-spacing-04: .75rem;--cds-spacing-05: 1rem;--cds-spacing-06: 1.5rem;--cds-spacing-07: 2rem;--cds-spacing-08: 2.5rem;--cds-spacing-09: 3rem;--cds-spacing-10: 4rem;--cds-spacing-11: 5rem;--cds-spacing-12: 6rem;--cds-spacing-13: 10rem;--cds-fluid-spacing-01: 0;--cds-fluid-spacing-02: 2vw;--cds-fluid-spacing-03: 5vw;--cds-fluid-spacing-04: 10vw;--cds-caption-01-font-size: .75rem;--cds-caption-01-font-weight: 400;--cds-caption-01-line-height: 1.33333;--cds-caption-01-letter-spacing: .32px;--cds-caption-02-font-size: .875rem;--cds-caption-02-font-weight: 400;--cds-caption-02-line-height: 1.28572;--cds-caption-02-letter-spacing: .32px;--cds-label-01-font-size: .75rem;--cds-label-01-font-weight: 400;--cds-label-01-line-height: 1.33333;--cds-label-01-letter-spacing: .32px;--cds-label-02-font-size: .875rem;--cds-label-02-font-weight: 400;--cds-label-02-line-height: 1.28572;--cds-label-02-letter-spacing: .16px;--cds-helper-text-01-font-size: .75rem;--cds-helper-text-01-line-height: 1.33333;--cds-helper-text-01-letter-spacing: .32px;--cds-helper-text-02-font-size: .875rem;--cds-helper-text-02-font-weight: 400;--cds-helper-text-02-line-height: 1.28572;--cds-helper-text-02-letter-spacing: .16px;--cds-body-short-01-font-size: .875rem;--cds-body-short-01-font-weight: 400;--cds-body-short-01-line-height: 1.28572;--cds-body-short-01-letter-spacing: .16px;--cds-body-short-02-font-size: 1rem;--cds-body-short-02-font-weight: 400;--cds-body-short-02-line-height: 1.375;--cds-body-short-02-letter-spacing: 0;--cds-body-long-01-font-size: .875rem;--cds-body-long-01-font-weight: 400;--cds-body-long-01-line-height: 1.42857;--cds-body-long-01-letter-spacing: .16px;--cds-body-long-02-font-size: 1rem;--cds-body-long-02-font-weight: 400;--cds-body-long-02-line-height: 1.5;--cds-body-long-02-letter-spacing: 0;--cds-code-01-font-family: "IBM Plex Mono", system-ui, -apple-system, BlinkMacSystemFont, ".SFNSText-Regular", monospace;--cds-code-01-font-size: .75rem;--cds-code-01-font-weight: 400;--cds-code-01-line-height: 1.33333;--cds-code-01-letter-spacing: .32px;--cds-code-02-font-family: "IBM Plex Mono", system-ui, -apple-system, BlinkMacSystemFont, ".SFNSText-Regular", monospace;--cds-code-02-font-size: .875rem;--cds-code-02-font-weight: 400;--cds-code-02-line-height: 1.42857;--cds-code-02-letter-spacing: .32px;--cds-heading-01-font-size: .875rem;--cds-heading-01-font-weight: 600;--cds-heading-01-line-height: 1.42857;--cds-heading-01-letter-spacing: .16px;--cds-heading-02-font-size: 1rem;--cds-heading-02-font-weight: 600;--cds-heading-02-line-height: 1.5;--cds-heading-02-letter-spacing: 0;--cds-productive-heading-01-font-size: .875rem;--cds-productive-heading-01-font-weight: 600;--cds-productive-heading-01-line-height: 1.28572;--cds-productive-heading-01-letter-spacing: .16px;--cds-productive-heading-02-font-size: 1rem;--cds-productive-heading-02-font-weight: 600;--cds-productive-heading-02-line-height: 1.375;--cds-productive-heading-02-letter-spacing: 0;--cds-productive-heading-03-font-size: 1.25rem;--cds-productive-heading-03-font-weight: 400;--cds-productive-heading-03-line-height: 1.4;--cds-productive-heading-03-letter-spacing: 0;--cds-productive-heading-04-font-size: 1.75rem;--cds-productive-heading-04-font-weight: 400;--cds-productive-heading-04-line-height: 1.28572;--cds-productive-heading-04-letter-spacing: 0;--cds-productive-heading-05-font-size: 2rem;--cds-productive-heading-05-font-weight: 400;--cds-productive-heading-05-line-height: 1.25;--cds-productive-heading-05-letter-spacing: 0;--cds-productive-heading-06-font-size: 2.625rem;--cds-productive-heading-06-font-weight: 300;--cds-productive-heading-06-line-height: 1.199;--cds-productive-heading-06-letter-spacing: 0;--cds-productive-heading-07-font-size: 3.375rem;--cds-productive-heading-07-font-weight: 300;--cds-productive-heading-07-line-height: 1.19;--cds-productive-heading-07-letter-spacing: 0;--cds-expressive-paragraph-01-font-size: 1.5rem;--cds-expressive-paragraph-01-font-weight: 300;--cds-expressive-paragraph-01-line-height: 1.334;--cds-expressive-paragraph-01-letter-spacing: 0;--cds-expressive-heading-01-font-size: .875rem;--cds-expressive-heading-01-font-weight: 600;--cds-expressive-heading-01-line-height: 1.42857;--cds-expressive-heading-01-letter-spacing: .16px;--cds-expressive-heading-02-font-size: 1rem;--cds-expressive-heading-02-font-weight: 600;--cds-expressive-heading-02-line-height: 1.5;--cds-expressive-heading-02-letter-spacing: 0;--cds-expressive-heading-03-font-size: 1.25rem;--cds-expressive-heading-03-font-weight: 400;--cds-expressive-heading-03-line-height: 1.4;--cds-expressive-heading-03-letter-spacing: 0;--cds-expressive-heading-04-font-size: 1.75rem;--cds-expressive-heading-04-font-weight: 400;--cds-expressive-heading-04-line-height: 1.28572;--cds-expressive-heading-04-letter-spacing: 0;--cds-expressive-heading-05-font-size: 2rem;--cds-expressive-heading-05-font-weight: 400;--cds-expressive-heading-05-line-height: 1.25;--cds-expressive-heading-05-letter-spacing: 0;--cds-expressive-heading-06-font-size: 2rem;--cds-expressive-heading-06-font-weight: 600;--cds-expressive-heading-06-line-height: 1.25;--cds-expressive-heading-06-letter-spacing: 0;--cds-quotation-01-font-family: "IBM Plex Serif", system-ui, -apple-system, BlinkMacSystemFont, ".SFNSText-Regular", serif;--cds-quotation-01-font-size: 1.25rem;--cds-quotation-01-font-weight: 400;--cds-quotation-01-line-height: 1.3;--cds-quotation-01-letter-spacing: 0;--cds-quotation-02-font-family: "IBM Plex Serif", system-ui, -apple-system, BlinkMacSystemFont, ".SFNSText-Regular", serif;--cds-quotation-02-font-size: 2rem;--cds-quotation-02-font-weight: 300;--cds-quotation-02-line-height: 1.25;--cds-quotation-02-letter-spacing: 0;--cds-display-01-font-size: 2.625rem;--cds-display-01-font-weight: 300;--cds-display-01-line-height: 1.19;--cds-display-01-letter-spacing: 0;--cds-display-02-font-size: 2.625rem;--cds-display-02-font-weight: 600;--cds-display-02-line-height: 1.19;--cds-display-02-letter-spacing: 0;--cds-display-03-font-size: 2.625rem;--cds-display-03-font-weight: 300;--cds-display-03-line-height: 1.19;--cds-display-03-letter-spacing: 0;--cds-display-04-font-size: 2.625rem;--cds-display-04-font-weight: 300;--cds-display-04-line-height: 1.19;--cds-display-04-letter-spacing: 0;--cds-legal-01-font-size: .75rem;--cds-legal-01-font-weight: 400;--cds-legal-01-line-height: 1.33333;--cds-legal-01-letter-spacing: .32px;--cds-legal-02-font-size: .875rem;--cds-legal-02-font-weight: 400;--cds-legal-02-line-height: 1.28572;--cds-legal-02-letter-spacing: .16px;--cds-body-compact-01-font-size: .875rem;--cds-body-compact-01-font-weight: 400;--cds-body-compact-01-line-height: 1.28572;--cds-body-compact-01-letter-spacing: .16px;--cds-body-compact-02-font-size: 1rem;--cds-body-compact-02-font-weight: 400;--cds-body-compact-02-line-height: 1.375;--cds-body-compact-02-letter-spacing: 0;--cds-heading-compact-01-font-size: .875rem;--cds-heading-compact-01-font-weight: 600;--cds-heading-compact-01-line-height: 1.28572;--cds-heading-compact-01-letter-spacing: .16px;--cds-heading-compact-02-font-size: 1rem;--cds-heading-compact-02-font-weight: 600;--cds-heading-compact-02-line-height: 1.375;--cds-heading-compact-02-letter-spacing: 0;--cds-body-01-font-size: .875rem;--cds-body-01-font-weight: 400;--cds-body-01-line-height: 1.42857;--cds-body-01-letter-spacing: .16px;--cds-body-02-font-size: 1rem;--cds-body-02-font-weight: 400;--cds-body-02-line-height: 1.5;--cds-body-02-letter-spacing: 0;--cds-heading-03-font-size: 1.25rem;--cds-heading-03-font-weight: 400;--cds-heading-03-line-height: 1.4;--cds-heading-03-letter-spacing: 0;--cds-heading-04-font-size: 1.75rem;--cds-heading-04-font-weight: 400;--cds-heading-04-line-height: 1.28572;--cds-heading-04-letter-spacing: 0;--cds-heading-05-font-size: 2rem;--cds-heading-05-font-weight: 400;--cds-heading-05-line-height: 1.25;--cds-heading-05-letter-spacing: 0;--cds-heading-06-font-size: 2.625rem;--cds-heading-06-font-weight: 300;--cds-heading-06-line-height: 1.199;--cds-heading-06-letter-spacing: 0;--cds-heading-07-font-size: 3.375rem;--cds-heading-07-font-weight: 300;--cds-heading-07-line-height: 1.19;--cds-heading-07-letter-spacing: 0;--cds-fluid-heading-03-font-size: 1.25rem;--cds-fluid-heading-03-font-weight: 400;--cds-fluid-heading-03-line-height: 1.4;--cds-fluid-heading-03-letter-spacing: 0;--cds-fluid-heading-04-font-size: 1.75rem;--cds-fluid-heading-04-font-weight: 400;--cds-fluid-heading-04-line-height: 1.28572;--cds-fluid-heading-04-letter-spacing: 0;--cds-fluid-heading-05-font-size: 2rem;--cds-fluid-heading-05-font-weight: 400;--cds-fluid-heading-05-line-height: 1.25;--cds-fluid-heading-05-letter-spacing: 0;--cds-fluid-heading-06-font-size: 2rem;--cds-fluid-heading-06-font-weight: 600;--cds-fluid-heading-06-line-height: 1.25;--cds-fluid-heading-06-letter-spacing: 0;--cds-fluid-paragraph-01-font-size: 1.5rem;--cds-fluid-paragraph-01-font-weight: 300;--cds-fluid-paragraph-01-line-height: 1.334;--cds-fluid-paragraph-01-letter-spacing: 0;--cds-fluid-quotation-01-font-family: "IBM Plex Serif", system-ui, -apple-system, BlinkMacSystemFont, ".SFNSText-Regular", serif;--cds-fluid-quotation-01-font-size: 1.25rem;--cds-fluid-quotation-01-font-weight: 400;--cds-fluid-quotation-01-line-height: 1.3;--cds-fluid-quotation-01-letter-spacing: 0;--cds-fluid-quotation-02-font-family: "IBM Plex Serif", system-ui, -apple-system, BlinkMacSystemFont, ".SFNSText-Regular", serif;--cds-fluid-quotation-02-font-size: 2rem;--cds-fluid-quotation-02-font-weight: 300;--cds-fluid-quotation-02-line-height: 1.25;--cds-fluid-quotation-02-letter-spacing: 0;--cds-fluid-display-01-font-size: 2.625rem;--cds-fluid-display-01-font-weight: 300;--cds-fluid-display-01-line-height: 1.19;--cds-fluid-display-01-letter-spacing: 0;--cds-fluid-display-02-font-size: 2.625rem;--cds-fluid-display-02-font-weight: 600;--cds-fluid-display-02-line-height: 1.19;--cds-fluid-display-02-letter-spacing: 0;--cds-fluid-display-03-font-size: 2.625rem;--cds-fluid-display-03-font-weight: 300;--cds-fluid-display-03-line-height: 1.19;--cds-fluid-display-03-letter-spacing: 0;--cds-fluid-display-04-font-size: 2.625rem;--cds-fluid-display-04-font-weight: 300;--cds-fluid-display-04-line-height: 1.19;--cds-fluid-display-04-letter-spacing: 0;--cds-active-danger: #750e13;--cds-active-light-ui: #c6c6c6;--cds-active-primary: #002d9c;--cds-active-secondary: #6f6f6f;--cds-active-tertiary: #002d9c;--cds-active-ui: #c6c6c6;--cds-button-separator: #e0e0e0;--cds-danger-01: #da1e28;--cds-danger-02: #da1e28;--cds-decorative-01: #e0e0e0;--cds-disabled-01: #ffffff;--cds-disabled-02: #c6c6c6;--cds-disabled-03: #8d8d8d;--cds-hover-danger: #b81921;--cds-hover-field: #e5e5e5;--cds-hover-light-ui: #e5e5e5;--cds-hover-primary: #0353e9;--cds-hover-primary-text: #0043ce;--cds-hover-row: #e5e5e5;--cds-hover-secondary: #4c4c4c;--cds-hover-selected-ui: #cacaca;--cds-hover-tertiary: #0353e9;--cds-hover-ui: #e5e5e5;--cds-icon-01: #161616;--cds-icon-02: #525252;--cds-icon-03: #ffffff;--cds-interactive-01: #0f62fe;--cds-interactive-02: #393939;--cds-interactive-03: #0f62fe;--cds-interactive-04: #0f62fe;--cds-inverse-01: #ffffff;--cds-inverse-02: #393939;--cds-inverse-focus-ui: #ffffff;--cds-inverse-hover-ui: #4c4c4c;--cds-inverse-link: #78a9ff;--cds-inverse-support-01: #fa4d56;--cds-inverse-support-02: #42be65;--cds-inverse-support-03: #f1c21b;--cds-inverse-support-04: #4589ff;--cds-link-01: #0f62fe;--cds-link-02: #0043ce;--cds-overlay-01: rgba(22, 22, 22, .5);--cds-selected-light-ui: #e0e0e0;--cds-selected-ui: #e0e0e0;--cds-skeleton-01: #e5e5e5;--cds-skeleton-02: #c6c6c6;--cds-support-01: #da1e28;--cds-support-02: #198038;--cds-support-03: #f1c21b;--cds-support-04: #0043ce;--cds-text-01: #161616;--cds-text-02: #525252;--cds-text-03: #a8a8a8;--cds-text-04: #ffffff;--cds-text-05: #6f6f6f;--cds-ui-01: #ffffff;--cds-ui-02: #f4f4f4;--cds-ui-03: #e0e0e0;--cds-ui-04: #8d8d8d;--cds-ui-05: #161616;--cds-ui-background: #f4f4f4;--cds-visited-link: #8a3ffc;--cds-layer: var(--cds-layer-01, #f4f4f4);--cds-layer-active: var(--cds-layer-active-01, #c6c6c6);--cds-layer-background: var(--cds-layer-background-01, #ffffff);--cds-layer-hover: var(--cds-layer-hover-01, #e8e8e8);--cds-layer-selected: var(--cds-layer-selected-01, #e0e0e0);--cds-layer-selected-hover: var(--cds-layer-selected-hover-01, #d1d1d1);--cds-layer-accent: var(--cds-layer-accent-01, #e0e0e0);--cds-layer-accent-hover: var(--cds-layer-accent-hover-01, #d1d1d1);--cds-layer-accent-active: var(--cds-layer-accent-active-01, #a8a8a8);--cds-field: var(--cds-field-01, #f4f4f4);--cds-field-hover: var(--cds-field-hover-01, #e8e8e8);--cds-border-subtle: var(--cds-border-subtle-00, #e0e0e0);--cds-border-subtle-selected: var(--cds-border-subtle-selected-01, #c6c6c6);--cds-border-strong: var(--cds-border-strong-01, #8d8d8d);--cds-border-tile: var(--cds-border-tile-01, #c6c6c6)}@media screen and (-ms-high-contrast: active),(forced-colors: active){.content-theme[_ngcontent-%COMP%]{--cds-icon-primary: ButtonText;--cds-icon-secondary: ButtonText;--cds-icon-interactive: ButtonText;--cds-icon-disabled: GrayText;--cds-icon-on-color-disabled: GrayText;--cds-icon-inverse: SelectedItemText;--cds-icon-on-color: SelectedItemText;--cds-button-disabled: GrayText;--cds-interactive: ButtonText;--cds-link-primary: LinkText;--cds-link-primary-hover: LinkText;--cds-link-secondary: LinkText;--cds-link-inverse: SelectedItemText;--cds-link-inverse-hover: SelectedItemText;--cds-link-inverse-visited: SelectedItemText;--cds-link-visited: VisitedText;--cds-background-selected: SelectedItem;--cds-background-selected-hover: SelectedItem;--cds-background-inverse: SelectedItem;--cds-layer-selected-inverse: SelectedItem}}.modal-header[_ngcontent-%COMP%]{background-color:#e9ecef;border-bottom:1px solid #ced4da;border-radius:5px 5px 0 0}  cd-modal .modal-footer{background-color:#e9ecef;border-bottom:1px solid #ced4da;border-radius:0 0 5px 5px}  cd-modal .modal-body{max-height:70vh;overflow-x:hidden;overflow-y:auto}  cd-modal .modal-content{display:table}button.close[_ngcontent-%COMP%]{outline:none}']})}}},55989:(Z,A,r)=>{r.d(A,{X:()=>z});var a=r(46045),e=r(87536),T=r(91974),f=r(77317);const F=B=>({"mt-3":B}),p=(B,q)=>[B,q],S=(B,q,Q)=>[B,q,Q],_=()=>["mt-3","mb-4"];function v(B,q){if(1&B&&e.\u0275\u0275element(0,"i",17),2&B){const Q=e.\u0275\u0275nextContext(2);e.\u0275\u0275property("ngClass",e.\u0275\u0275pureFunction2(1,p,Q.icons.large,Q.icons.spinner))}}function R(B,q){if(1&B&&e.\u0275\u0275element(0,"i",17),2&B){const Q=e.\u0275\u0275nextContext(2);e.\u0275\u0275property("ngClass",e.\u0275\u0275pureFunction3(1,S,Q.icons.large,Q.icons.spin,Q.icons.spinner))}}function P(B,q){if(1&B&&(e.\u0275\u0275elementStart(0,"h3",15),e.\u0275\u0275template(1,v,1,4,"i",16)(2,R,1,5,"ng-template",null,0,e.\u0275\u0275templateRefExtractor),e.\u0275\u0275elementEnd()),2&B){const Q=e.\u0275\u0275reference(3),G=e.\u0275\u0275nextContext();e.\u0275\u0275property("ngClass",e.\u0275\u0275pureFunction1(3,F,"in-progress"===G.status&&G.isPaused)),e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf","in-progress"===G.status&&G.isPaused)("ngIfElse",Q)}}function M(B,q){if(1&B&&(e.\u0275\u0275elementStart(0,"h3",15),e.\u0275\u0275text(1),e.\u0275\u0275elementEnd()),2&B){const Q=e.\u0275\u0275nextContext();e.\u0275\u0275property("ngClass","in-progress"===Q.status&&Q.isPaused?e.\u0275\u0275pureFunction0(2,_):"mt-2"),e.\u0275\u0275advance(),e.\u0275\u0275textInterpolate1(" ",Q.label," ")}}function b(B,q){if(1&B&&(e.\u0275\u0275elementStart(0,"h5",18),e.\u0275\u0275text(1),e.\u0275\u0275elementEnd()),2&B){const Q=e.\u0275\u0275nextContext();e.\u0275\u0275advance(),e.\u0275\u0275textInterpolate1(" ",Q.subLabel," ")}}function m(B,q){if(1&B&&(e.\u0275\u0275elementStart(0,"h5",18),e.\u0275\u0275text(1),e.\u0275\u0275elementEnd()),2&B){const Q=e.\u0275\u0275nextContext();e.\u0275\u0275advance(),e.\u0275\u0275textInterpolate1(" ",Q.description," ")}}function g(B,q){if(1&B&&(e.\u0275\u0275elementStart(0,"p",19),e.\u0275\u0275text(1),e.\u0275\u0275elementEnd()),2&B){const Q=e.\u0275\u0275nextContext();e.\u0275\u0275advance(),e.\u0275\u0275textInterpolate1(" ",Q.subDescription," ")}}function O(B,q){if(1&B&&(e.\u0275\u0275elementContainerStart(0),e.\u0275\u0275i18nStart(1,1),e.\u0275\u0275element(2,"span",20),e.\u0275\u0275i18nEnd(),e.\u0275\u0275elementContainerEnd()),2&B){const Q=e.\u0275\u0275nextContext();e.\u0275\u0275advance(2),e.\u0275\u0275i18nExp(Q.actionName)(Q.completedItems),e.\u0275\u0275i18nApply(1)}}function N(B,q){if(1&B&&(e.\u0275\u0275elementStart(0,"h4",21),e.\u0275\u0275text(1),e.\u0275\u0275elementEnd()),2&B){const Q=e.\u0275\u0275nextContext();e.\u0275\u0275advance(),e.\u0275\u0275textInterpolate1(" ",Q.helperText," ")}}function c(B,q){if(1&B&&(e.\u0275\u0275elementStart(0,"h5",22),e.\u0275\u0275text(1),e.\u0275\u0275elementEnd()),2&B){const Q=e.\u0275\u0275nextContext();e.\u0275\u0275advance(),e.\u0275\u0275textInterpolate1(" ",Q.footerText," ")}}class z{constructor(){this.icons=a.FI}static{this.\u0275fac=function(Q){return new(Q||z)}}static{this.\u0275cmp=e.\u0275\u0275defineComponent({type:z,selectors:[["cd-progress"]],inputs:{value:"value",label:"label",status:"status",description:"description",subLabel:"subLabel",subDescription:"subDescription",completedItems:"completedItems",actionName:"actionName",helperText:"helperText",footerText:"footerText",isPaused:"isPaused"},decls:17,vars:12,consts:()=>{let q;return q=$localize`:␟34284a1320026d7385148b552bcffa9f44f76d3b␟3434207754914170130: Finished ${"\ufffd0\ufffd"}:INTERPOLATION:: ${"\ufffd#2\ufffd"}:START_TAG_SPAN: ${"\ufffd1\ufffd"}:INTERPOLATION_1: ${"\ufffd/#2\ufffd"}:CLOSE_TAG_SPAN:`,[["spinningIcon",""],q,[1,"d-flex","flex-column","justify-content-center","align-items-center","bold"],["class","text-center",3,"ngClass",4,"ngIf"],["class","text-center mt-3",4,"ngIf"],["class","text-center text-muted mt-3",4,"ngIf"],[1,"w-50","row","h-100","d-flex","justify-content-center","align-items-center","mt-4"],[1,"text-center","w-75"],[4,"ngIf"],[1,"mt-2"],["type","info",3,"value","striped","animated"],[1,"card-text","text-muted"],[1,"float-end"],["class","text-center m-2",4,"ngIf"],["class","text-center mt-2",4,"ngIf"],[1,"text-center",3,"ngClass"],[3,"ngClass",4,"ngIf","ngIfElse"],[3,"ngClass"],[1,"text-center","mt-3"],[1,"text-center","text-muted","mt-3"],[1,"text-success"],[1,"text-center","m-2"],[1,"text-center","mt-2"]]},template:function(Q,G){1&Q&&(e.\u0275\u0275elementStart(0,"div",2),e.\u0275\u0275elementContainerStart(1),e.\u0275\u0275template(2,P,4,5,"h3",3)(3,M,2,3,"h3",3)(4,b,2,1,"h5",4)(5,m,2,1,"h5",4)(6,g,2,1,"p",5),e.\u0275\u0275elementContainerEnd(),e.\u0275\u0275elementStart(7,"div",6)(8,"div",7),e.\u0275\u0275template(9,O,3,2,"ng-container",8),e.\u0275\u0275elementStart(10,"div",9),e.\u0275\u0275element(11,"ngb-progressbar",10),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(12,"p",11)(13,"span",12),e.\u0275\u0275text(14),e.\u0275\u0275elementEnd()()(),e.\u0275\u0275template(15,N,2,1,"h4",13)(16,c,2,1,"h5",14),e.\u0275\u0275elementEnd()()),2&Q&&(e.\u0275\u0275advance(2),e.\u0275\u0275property("ngIf",!G.value||"upgrading"===G.actionName),e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf",G.label),e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf",G.subLabel&&"in-progress"===G.status&&!G.isPaused),e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf",G.description),e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf",G.subDescription),e.\u0275\u0275advance(3),e.\u0275\u0275property("ngIf",G.completedItems&&G.completedItems.length>0),e.\u0275\u0275advance(2),e.\u0275\u0275property("value",G.value)("striped",!0)("animated",!G.isPaused),e.\u0275\u0275advance(3),e.\u0275\u0275textInterpolate1("",G.value||0," %"),e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf",G.helperText),e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf",G.footerText))},dependencies:[T.NgClass,T.NgIf,f.NgbProgressbar]})}}},48693:(Z,A,r)=>{r.d(A,{U:()=>v});var a=r(87536),l=r(46045),T=r(66668),E=r(92619),f=r(91974),F=r(3600);const S=["cdSelect"];function _(R,P){if(1&R){const M=a.\u0275\u0275getCurrentView();a.\u0275\u0275elementStart(0,"span")(1,"span",4)(2,"span",5),a.\u0275\u0275text(3),a.\u0275\u0275elementEnd(),a.\u0275\u0275elementStart(4,"a",6),a.\u0275\u0275listener("click",function(){const m=a.\u0275\u0275restoreView(M).$implicit;a.\u0275\u0275nextContext();const g=a.\u0275\u0275reference(1);return a.\u0275\u0275resetView(g.removeItem(m))}),a.\u0275\u0275namespaceSVG(),a.\u0275\u0275element(5,"svg",7),a.\u0275\u0275elementEnd()()()}if(2&R){const M=P.$implicit,b=a.\u0275\u0275nextContext();a.\u0275\u0275advance(3),a.\u0275\u0275textInterpolate(M),a.\u0275\u0275advance(2),a.\u0275\u0275property("cdsIcon",b.icons.destroy)("size",b.icons.size20)}}class v{constructor(){this.data=[],this.options=[],this.messages=new T.z({}),this.customBadges=!1,this.customBadgeValidators=[],this.selection=new a.EventEmitter,this.icons=l.FI}static{this.\u0275fac=function(M){return new(M||v)}}static{this.\u0275cmp=a.\u0275\u0275defineComponent({type:v,selectors:[["cd-select-badges"]],viewQuery:function(M,b){if(1&M&&a.\u0275\u0275viewQuery(S,7),2&M){let m;a.\u0275\u0275queryRefresh(m=a.\u0275\u0275loadQuery())&&(b.cdSelect=m.first)}},inputs:{data:"data",options:"options",messages:"messages",selectionLimit:"selectionLimit",customBadges:"customBadges",customBadgeValidators:"customBadgeValidators"},outputs:{selection:"selection"},decls:4,vars:9,consts:[["cdSelect",""],["elemClass","me-2 select-menu-edit",3,"selection","data","options","messages","selectionLimit","customBadges","customBadgeValidators"],[1,"cds-info-color",3,"cdsIcon","size"],[4,"ngFor","ngForOf"],[1,"badge","badge-dark","me-2"],[1,"me-2"],[1,"badge-remove",3,"click"],[1,"cds-white",3,"cdsIcon","size"]],template:function(M,b){if(1&M){const m=a.\u0275\u0275getCurrentView();a.\u0275\u0275elementStart(0,"cd-select",1,0),a.\u0275\u0275listener("selection",function(O){return a.\u0275\u0275restoreView(m),a.\u0275\u0275resetView(b.selection.emit(O))}),a.\u0275\u0275namespaceSVG(),a.\u0275\u0275element(2,"svg",2),a.\u0275\u0275elementEnd(),a.\u0275\u0275template(3,_,6,3,"span",3)}2&M&&(a.\u0275\u0275property("data",b.data)("options",b.options)("messages",b.messages)("selectionLimit",b.selectionLimit)("customBadges",b.customBadges)("customBadgeValidators",b.customBadgeValidators),a.\u0275\u0275advance(2),a.\u0275\u0275property("cdsIcon",b.icons.edit)("size",b.icons.size20),a.\u0275\u0275advance(),a.\u0275\u0275property("ngForOf",b.data))},dependencies:[f.NgForOf,F.IconDirective,E.w],styles:[".badge-remove[_ngcontent-%COMP%]{color:#fff}i.fa-pencil[_ngcontent-%COMP%]{font-size:1.1rem}"]})}}},66668:(Z,A,r)=>{r.d(A,{z:()=>l});var a=r(29841),e=r.n(a);class l{constructor(E){this.customValidations={},this.empty=$localize`No items selected.`,this.selectionLimit={tooltip:$localize`Deselect item to select again`,text:$localize`Selection limit reached`},this.filter=$localize`Filter tags`,this.add=$localize`Add badge`,this.noOptions=$localize`There are no items available.`,e().merge(this,E)}}},31345:(Z,A,r)=>{r.d(A,{O:()=>a});class a{constructor(l,T,E,f=!0){this.selected=l,this.name=T,this.description=E,this.enabled=f}}},92619:(Z,A,r)=>{r.d(A,{w:()=>Fe});var a=r(87536),l=r(53648),E=r(29841),f=r.n(E),u=r(46045),F=r(58384),p=r(66668),S=r(31345),_=r(91974),R=r(77317),M=r(90476),b=r(10142),m=r(37966);const g=["*"],O=te=>({"help-block disabled":te}),N=te=>[te];function c(te,le){if(1&te&&(a.\u0275\u0275elementStart(0,"span",12),a.\u0275\u0275text(1),a.\u0275\u0275elementEnd()),2&te){const ie=a.\u0275\u0275nextContext().$implicit,_e=a.\u0275\u0275nextContext(2);a.\u0275\u0275advance(),a.\u0275\u0275textInterpolate1(" ",_e.messages.customValidations[ie]," ")}}function z(te,le){if(1&te&&(a.\u0275\u0275elementContainerStart(0),a.\u0275\u0275template(1,c,2,1,"span",11),a.\u0275\u0275elementContainerEnd()),2&te){const ie=le.$implicit;a.\u0275\u0275nextContext();const _e=a.\u0275\u0275reference(1),ue=a.\u0275\u0275nextContext();a.\u0275\u0275advance(),a.\u0275\u0275property("ngIf",ue.form.showError("filter",_e)&&ue.filter.hasError(ie))}}function B(te,le){if(1&te&&a.\u0275\u0275element(0,"i",18),2&te){const ie=a.\u0275\u0275nextContext(3);a.\u0275\u0275property("ngClass",a.\u0275\u0275pureFunction1(1,N,ie.icons.check))}}function q(te,le){if(1&te&&(a.\u0275\u0275elementContainerStart(0),a.\u0275\u0275element(1,"br"),a.\u0275\u0275elementStart(2,"small",19),a.\u0275\u0275text(3),a.\u0275\u0275elementEnd(),a.\u0275\u0275elementContainerEnd()),2&te){const ie=a.\u0275\u0275nextContext().$implicit;a.\u0275\u0275advance(3),a.\u0275\u0275textInterpolate1(" ",ie.description,"\xa0 ")}}function Q(te,le){if(1&te){const ie=a.\u0275\u0275getCurrentView();a.\u0275\u0275elementStart(0,"div",13),a.\u0275\u0275listener("click",function(){const ue=a.\u0275\u0275restoreView(ie).$implicit,C=a.\u0275\u0275nextContext(2);return a.\u0275\u0275resetView(C.triggerSelection(ue))}),a.\u0275\u0275elementStart(1,"div",14),a.\u0275\u0275template(2,B,1,3,"i",15),a.\u0275\u0275text(3," \xa0 "),a.\u0275\u0275elementEnd(),a.\u0275\u0275elementStart(4,"div",16),a.\u0275\u0275text(5),a.\u0275\u0275template(6,q,4,1,"ng-container",17),a.\u0275\u0275elementEnd()()}if(2&te){const ie=le.$implicit,_e=a.\u0275\u0275nextContext(2);a.\u0275\u0275property("ngClass",a.\u0275\u0275pureFunction1(4,O,!(_e.data.length!==_e.selectionLimit&&ie.enabled||ie.selected))),a.\u0275\u0275advance(2),a.\u0275\u0275property("ngIf",ie.selected),a.\u0275\u0275advance(3),a.\u0275\u0275textInterpolate1(" ",ie.name," "),a.\u0275\u0275advance(),a.\u0275\u0275property("ngIf",ie.description)}}function G(te,le){if(1&te){const ie=a.\u0275\u0275getCurrentView();a.\u0275\u0275elementStart(0,"div",20),a.\u0275\u0275listener("click",function(){a.\u0275\u0275restoreView(ie);const ue=a.\u0275\u0275nextContext(2);return a.\u0275\u0275resetView(ue.addCustomOption())}),a.\u0275\u0275elementStart(1,"div",14),a.\u0275\u0275element(2,"i",18),a.\u0275\u0275text(3," \xa0 "),a.\u0275\u0275elementEnd(),a.\u0275\u0275elementStart(4,"div",16),a.\u0275\u0275text(5),a.\u0275\u0275elementEnd()()}if(2&te){const ie=a.\u0275\u0275nextContext(2);a.\u0275\u0275advance(2),a.\u0275\u0275property("ngClass",a.\u0275\u0275pureFunction1(3,N,ie.icons.tag)),a.\u0275\u0275advance(3),a.\u0275\u0275textInterpolate2(" ",ie.messages.add," '",ie.filter.value,"' ")}}function D(te,le){if(1&te&&(a.\u0275\u0275elementStart(0,"span",23),a.\u0275\u0275text(1),a.\u0275\u0275elementEnd()),2&te){const ie=a.\u0275\u0275nextContext(3);a.\u0275\u0275property("ngbTooltip",ie.messages.selectionLimit.tooltip),a.\u0275\u0275advance(),a.\u0275\u0275textInterpolate1(" ",ie.messages.selectionLimit.text," ")}}function oe(te,le){if(1&te&&(a.\u0275\u0275elementStart(0,"div",21),a.\u0275\u0275template(1,D,2,2,"span",22),a.\u0275\u0275elementEnd()),2&te){const ie=a.\u0275\u0275nextContext(2);a.\u0275\u0275advance(),a.\u0275\u0275property("ngIf",ie.data.length===ie.selectionLimit)}}function fe(te,le){if(1&te){const ie=a.\u0275\u0275getCurrentView();a.\u0275\u0275elementStart(0,"form",5,1)(2,"div")(3,"input",6),a.\u0275\u0275listener("keyup",function(ue){a.\u0275\u0275restoreView(ie);const C=a.\u0275\u0275nextContext();return a.\u0275\u0275resetView(13===ue.keyCode?C.selectOption():C.updateFilter())}),a.\u0275\u0275elementEnd(),a.\u0275\u0275template(4,z,2,1,"ng-container",7),a.\u0275\u0275elementEnd()(),a.\u0275\u0275template(5,Q,7,6,"div",8)(6,G,6,5,"div",9)(7,oe,2,1,"div",10)}if(2&te){const ie=a.\u0275\u0275nextContext();a.\u0275\u0275property("formGroup",ie.form),a.\u0275\u0275advance(3),a.\u0275\u0275property("placeholder",ie.messages.filter),a.\u0275\u0275advance(),a.\u0275\u0275property("ngForOf",ie.Object.keys(ie.messages.customValidations)),a.\u0275\u0275advance(),a.\u0275\u0275property("ngForOf",ie.filteredOptions),a.\u0275\u0275advance(),a.\u0275\u0275property("ngIf",ie.isCreatable()),a.\u0275\u0275advance(),a.\u0275\u0275property("ngIf",ie.data.length===ie.selectionLimit)}}function ye(te,le){if(1&te&&(a.\u0275\u0275elementStart(0,"a",24),a.\u0275\u0275projection(1),a.\u0275\u0275elementEnd()),2&te){const ie=a.\u0275\u0275nextContext(),_e=a.\u0275\u0275reference(1);a.\u0275\u0275property("ngClass",ie.elemClass)("ngbPopover",_e)}}function je(te,le){if(1&te&&(a.\u0275\u0275elementStart(0,"span",25),a.\u0275\u0275text(1),a.\u0275\u0275elementEnd()),2&te){const ie=a.\u0275\u0275nextContext();a.\u0275\u0275advance(),a.\u0275\u0275textInterpolate1(" ",ie.messages.empty,"\n")}}function Le(te,le){if(1&te&&(a.\u0275\u0275elementStart(0,"span",25),a.\u0275\u0275text(1),a.\u0275\u0275elementEnd()),2&te){const ie=a.\u0275\u0275nextContext();a.\u0275\u0275advance(),a.\u0275\u0275textInterpolate1(" ",ie.messages.noOptions,"\n")}}class Fe{constructor(){this.data=[],this.options=[],this.messages=new p.z({}),this.customBadges=!1,this.customBadgeValidators=[],this.selection=new a.EventEmitter,this.Object=Object,this.filteredOptions=[],this.icons=u.FI}ngOnInit(){this.initFilter(),this.data.length>0&&this.initMissingOptions(),this.options=f().sortBy(this.options,["name"]),this.updateOptions()}initFilter(){this.filter=new l.UntypedFormControl("",{validators:this.customBadgeValidators}),this.form=new F.$({filter:this.filter}),this.filteredOptions=[...this.options||[]]}initMissingOptions(){const le=this.options.map(_e=>_e.name);this.data.filter(_e=>-1===le.indexOf(_e)).forEach(_e=>this.addOption(_e)),this.forceOptionsToReflectData()}addOption(le){this.options.push(new S.O(!1,le,"")),this.options=f().sortBy(this.options,["name"]),this.triggerSelection(this.options.find(ie=>ie.name===le))}triggerSelection(le){!le||this.selectionLimit&&!le.selected&&this.data.length>=this.selectionLimit||(le.selected=!le.selected,this.updateOptions(),this.selection.emit({option:le}))}updateOptions(){this.data.splice(0,this.data.length),this.options.forEach(le=>{le.selected&&this.data.push(le.name)}),this.updateFilter()}updateFilter(){this.filteredOptions=this.options.filter(le=>le.name.includes(this.filter.value))}forceOptionsToReflectData(){this.options.forEach(le=>{-1!==this.data.indexOf(le.name)&&(le.selected=!0)})}ngOnChanges(){this.filter&&this.updateFilter(),this.options&&this.data&&0!==this.data.length&&this.forceOptionsToReflectData()}selectOption(){0===this.filteredOptions.length?this.addCustomOption():(this.triggerSelection(this.filteredOptions[0]),this.resetFilter())}addCustomOption(){this.isCreatable()&&(this.addOption(this.filter.value),this.resetFilter())}isCreatable(){return this.customBadges&&this.filter.valid&&this.filter.value.length>0&&this.filteredOptions.every(le=>le.name!==this.filter.value)}resetFilter(){this.filter.setValue(""),this.updateFilter()}removeItem(le){this.triggerSelection(this.options.find(ie=>ie.name===le&&ie.selected))}static{this.\u0275fac=function(ie){return new(ie||Fe)}}static{this.\u0275cmp=a.\u0275\u0275defineComponent({type:Fe,selectors:[["cd-select"]],inputs:{elemClass:"elemClass",data:"data",options:"options",messages:"messages",selectionLimit:"selectionLimit",customBadges:"customBadges",customBadgeValidators:"customBadgeValidators"},outputs:{selection:"selection"},features:[a.\u0275\u0275NgOnChangesFeature],ngContentSelectors:g,decls:5,vars:3,consts:[["popTemplate",""],["formDir","ngForm"],["class","select-menu-edit float-start","data-testid","select-menu-edit",3,"ngClass","ngbPopover",4,"ngIf"],["class","form-text text-muted float-start",4,"ngIf"],["class","form-text text-muted  float-start",4,"ngIf"],["name","form","novalidate","",3,"formGroup"],["type","text","formControlName","filter",1,"form-control","text-center",3,"keyup","placeholder"],[4,"ngFor","ngForOf"],["class","select-menu-item",3,"ngClass","click",4,"ngFor","ngForOf"],["class","select-menu-item",3,"click",4,"ngIf"],["class","is-invalid",4,"ngIf"],["class","invalid-feedback text-center d-block",4,"ngIf"],[1,"invalid-feedback","text-center","d-block"],[1,"select-menu-item",3,"click","ngClass"],[1,"select-menu-item-icon"],["aria-hidden","true",3,"ngClass",4,"ngIf"],[1,"select-menu-item-content"],[4,"ngIf"],["aria-hidden","true",3,"ngClass"],[1,"form-text","text-muted"],[1,"select-menu-item",3,"click"],[1,"is-invalid"],["class","form-text text-muted text-center text-warning",3,"ngbTooltip",4,"ngIf"],[1,"form-text","text-muted","text-center","text-warning",3,"ngbTooltip"],["data-testid","select-menu-edit",1,"select-menu-edit","float-start",3,"ngClass","ngbPopover"],[1,"form-text","text-muted","float-start"]],template:function(ie,_e){1&ie&&(a.\u0275\u0275projectionDef(),a.\u0275\u0275template(0,fe,8,6,"ng-template",null,0,a.\u0275\u0275templateRefExtractor)(2,ye,2,2,"a",2)(3,je,2,1,"span",3)(4,Le,2,1,"span",4)),2&ie&&(a.\u0275\u0275advance(2),a.\u0275\u0275property("ngIf",_e.customBadges||_e.options.length>0),a.\u0275\u0275advance(),a.\u0275\u0275property("ngIf",0===_e.data.length&&!(!_e.customBadges&&0===_e.options.length)),a.\u0275\u0275advance(),a.\u0275\u0275property("ngIf",!_e.customBadges&&0===_e.options.length))},dependencies:[_.NgClass,_.NgForOf,_.NgIf,l.\u0275NgNoValidate,l.DefaultValueAccessor,l.NgControlStatus,l.NgControlStatusGroup,l.FormGroupDirective,l.FormControlName,R.NgbPopover,R.NgbTooltip,M.S,b.a,m.E],styles:[".select-menu-item[_ngcontent-%COMP%]{border-bottom:1px solid rgba(0,0,0,.09);cursor:pointer;display:block;font-size:1rem}.select-menu-item[_ngcontent-%COMP%]:hover{background-color:#e9ecef}.select-menu-item-icon[_ngcontent-%COMP%]{float:left;padding:.5em;width:3em}.select-menu-item-content[_ngcontent-%COMP%]{padding:.5em}.select-menu-item-content[_ngcontent-%COMP%]   .form-text[_ngcontent-%COMP%]{display:flex}"]})}}},5661:(Z,A,r)=>{r.d(A,{B:()=>_});var a=r(87536),l=r(6783),E=r(77847),f=r(73651),u=r(91974);const p=["sparkCanvas"],S=["sparkTooltip"];class _{constructor(R){this.dimlessBinaryPipe=R,this.style={height:"30px",width:"100px"},this.options={plugins:{legend:{display:!1},tooltip:{enabled:!1,mode:"index",intersect:!1,custom:void 0,callbacks:{label:P=>{if(P.parsed)return this.isBinary?this.dimlessBinaryPipe.transform(P.parsed.y):P.parsed.y},title:()=>""}}},animation:{duration:0},responsive:!0,maintainAspectRatio:!1,elements:{line:{borderWidth:1}},scales:{y:{display:!1},x:{display:!1}}},this.datasets=[{data:[],backgroundColor:"rgba(40,140,234,0.2)",borderColor:"rgba(40,140,234,1)",pointBackgroundColor:"rgba(40,140,234,1)",pointBorderColor:"#fff",pointHoverBackgroundColor:"#fff",pointHoverBorderColor:"rgba(40,140,234,0.8)"}],this.labels=[],this.chartData={datasets:this.datasets,labels:this.labels}}ngOnInit(){const M=new E.I(this.chartCanvasRef,this.chartTooltipRef,(b,m)=>m+b.caretX+"px",b=>b.caretY-b.height-6-5+"px");M.customColors={backgroundColor:this.datasets[0].pointBackgroundColor,borderColor:this.datasets[0].pointBorderColor},this.options.plugins.tooltip.external=b=>{M.customTooltips(b)}}ngOnChanges(R){this.chartData.datasets[0].data=R.data.currentValue,this.chartData.labels=[...Array(R.data.currentValue.length).fill("")],this.chart&&this.chart.chart.update()}static{this.\u0275fac=function(P){return new(P||_)(a.\u0275\u0275directiveInject(f.l))}}static{this.\u0275cmp=a.\u0275\u0275defineComponent({type:_,selectors:[["cd-sparkline"]],viewQuery:function(P,M){if(1&P&&(a.\u0275\u0275viewQuery(p,7),a.\u0275\u0275viewQuery(S,7),a.\u0275\u0275viewQuery(l.BaseChartDirective,5)),2&P){let b;a.\u0275\u0275queryRefresh(b=a.\u0275\u0275loadQuery())&&(M.chartCanvasRef=b.first),a.\u0275\u0275queryRefresh(b=a.\u0275\u0275loadQuery())&&(M.chartTooltipRef=b.first),a.\u0275\u0275queryRefresh(b=a.\u0275\u0275loadQuery())&&(M.chart=b.first)}},inputs:{data:"data",style:"style",isBinary:"isBinary"},features:[a.\u0275\u0275NgOnChangesFeature],decls:6,vars:4,consts:[["sparkCanvas",""],["sparkTooltip",""],[1,"chart-container",3,"ngStyle"],["baseChart","",3,"data","options","type"],[1,"chartjs-tooltip"]],template:function(P,M){1&P&&(a.\u0275\u0275elementStart(0,"div",2),a.\u0275\u0275element(1,"canvas",3,0),a.\u0275\u0275elementStart(3,"div",4,1),a.\u0275\u0275element(5,"table"),a.\u0275\u0275elementEnd()()),2&P&&(a.\u0275\u0275property("ngStyle",M.style),a.\u0275\u0275advance(),a.\u0275\u0275property("data",M.chartData)("options",M.options)("type","line"))},dependencies:[u.NgStyle,l.BaseChartDirective],styles:['.chart-container[_ngcontent-%COMP%]{cursor:pointer;margin:auto;overflow:visible;position:absolute}canvas[_ngcontent-%COMP%]{user-select:none}.chartjs-tooltip[_ngcontent-%COMP%]{background:#000000b3;border-radius:3px;color:#fff;font-family:Helvetica Neue,Helvetica,Arial,sans-serif!important;opacity:0;pointer-events:none;position:absolute;transform:translate(-50%);transition:all .1s ease}.chartjs-tooltip.transform-left[_ngcontent-%COMP%]{transform:translate(-10%)}.chartjs-tooltip.transform-left[_ngcontent-%COMP%]:after{left:10%}.chartjs-tooltip.transform-right[_ngcontent-%COMP%]{transform:translate(-90%)}.chartjs-tooltip.transform-right[_ngcontent-%COMP%]:after{left:90%}.chartjs-tooltip[_ngcontent-%COMP%]:after{border-color:#000 transparent transparent transparent;border-style:solid;border-width:5px;content:" ";left:50%;margin-left:-5px;position:absolute;top:100%}  .chartjs-tooltip-key{display:inline-block;height:10px;margin-right:10px;width:10px}.chart-container[_ngcontent-%COMP%]{position:static!important}']})}}},35141:(Z,A,r)=>{r.d(A,{_:()=>b});var a=r(87536),l=r(53648),E=r(29841),f=r.n(E),u=r(46045),F=r(91974),S=r(90476),_=r(3600);const R=["*"],P=m=>({"w-100":m});function M(m,g){if(1&m&&a.\u0275\u0275element(0,"cds-loading",2),2&m){const O=a.\u0275\u0275nextContext();a.\u0275\u0275property("isActive",O.loading)("overlay",!1)}}class b{constructor(g){this.elRef=g,this.type="submit",this.disabled=!1,this.buttonType="primary",this.modalForm=!1,this.submitAction=new a.EventEmitter,this.loading=!1,this.icons=u.FI}ngOnInit(){this.form?.statusChanges.subscribe(()=>{f().has(this.form.errors,"cdSubmitButton")&&(this.loading=!1,f().unset(this.form.errors,"cdSubmitButton"),this.form instanceof l.AbstractControl&&this.form.updateValueAndValidity())})}submit(g){this.focusButton(),this.form instanceof l.FormGroupDirective&&this.form.onSubmit(g),this.form?.invalid?this.focusInvalid():(this.loading=!0,this.submitAction.emit())}focusButton(){this.elRef.nativeElement.offsetParent.querySelector(`button[type="${this.type}"]`).focus()}focusInvalid(){const g=this.elRef.nativeElement.offsetParent.querySelector("input.ng-invalid, select.ng-invalid");g&&g.focus()}static{this.\u0275fac=function(O){return new(O||b)(a.\u0275\u0275directiveInject(a.ElementRef))}}static{this.\u0275cmp=a.\u0275\u0275defineComponent({type:b,selectors:[["cd-submit-button"]],inputs:{form:"form",type:"type",disabled:"disabled",btnClass:"btnClass",ariaLabel:"ariaLabel",buttonType:"buttonType",modalForm:"modalForm"},outputs:{submitAction:"submitAction"},ngContentSelectors:R,decls:3,vars:8,consts:[["size","lg","modal-primary-focus","",1,"tc_submitButton",3,"click","type","ngClass","disabled","cdsButton"],["size","sm",3,"isActive","overlay",4,"ngIf"],["size","sm",3,"isActive","overlay"]],template:function(O,N){1&O&&(a.\u0275\u0275projectionDef(),a.\u0275\u0275elementStart(0,"button",0),a.\u0275\u0275listener("click",function(z){return N.submit(z)}),a.\u0275\u0275projection(1),a.\u0275\u0275template(2,M,1,2,"cds-loading",1),a.\u0275\u0275elementEnd()),2&O&&(a.\u0275\u0275property("type",N.type)("ngClass",a.\u0275\u0275pureFunction1(6,P,N.modalForm))("disabled",N.loading||N.disabled)("cdsButton",N.buttonType),a.\u0275\u0275attribute("aria-label",N.ariaLabel),a.\u0275\u0275advance(2),a.\u0275\u0275property("ngIf",N.loading))},dependencies:[F.NgClass,F.NgIf,S.S,_.Button,_.Loading],styles:["cds-loading[_ngcontent-%COMP%]{margin-left:.5rem}"]})}}},68316:(Z,A,r)=>{r.d(A,{o:()=>M});var a=r(87536),e=r(19093);const l={[e.Statuses.SUCCESS]:"cds-support-success",[e.Statuses.WARNING]:"cds-support-warning",[e.Statuses.DANGER]:"cds-support-error"};var T=r(73651),E=r(18457),f=r(35855),u=r(91974);function F(b,m){1&b&&a.\u0275\u0275elementContainer(0)}function p(b,m){if(1&b&&(a.\u0275\u0275elementContainerStart(0),a.\u0275\u0275template(1,F,1,0,"ng-container",7),a.\u0275\u0275elementContainerEnd()),2&b){const g=a.\u0275\u0275nextContext(2);a.\u0275\u0275advance(),a.\u0275\u0275property("ngTemplateOutlet",g.customLabel)}}function S(b,m){if(1&b&&(a.\u0275\u0275elementContainerStart(0),a.\u0275\u0275i18n(1,2),a.\u0275\u0275elementContainerEnd()),2&b){const g=a.\u0275\u0275nextContext(2);a.\u0275\u0275advance(),a.\u0275\u0275i18nExp(g.customLabel),a.\u0275\u0275i18nApply(1)}}function _(b,m){if(1&b&&(a.\u0275\u0275elementContainerStart(0),a.\u0275\u0275template(1,p,2,1,"ng-container",6)(2,S,2,1,"ng-template",null,1,a.\u0275\u0275templateRefExtractor),a.\u0275\u0275elementContainerEnd()),2&b){const g=a.\u0275\u0275reference(3),O=a.\u0275\u0275nextContext();a.\u0275\u0275advance(),a.\u0275\u0275property("ngIf",O.isCustomLabelTemplate)("ngIfElse",g)}}function v(b,m){if(1&b&&a.\u0275\u0275element(0,"ibm-meter-chart",8),2&b){const g=a.\u0275\u0275nextContext();a.\u0275\u0275property("data",g.data)("options",g.options)}}function R(b,m){if(1&b&&(a.\u0275\u0275elementStart(0,"span"),a.\u0275\u0275i18n(1,3),a.\u0275\u0275elementEnd()),2&b){const g=a.\u0275\u0275nextContext();a.\u0275\u0275advance(),a.\u0275\u0275i18nExp(g.noDataText),a.\u0275\u0275i18nApply(1)}}class M{constructor(m,g,O,N){this.elementRef=m,this.cssHelper=g,this.dimlessPipe=O,this.dimlessBinaryPipe=N,this.total=0,this.used=0,this.title="",this.isBinary=!0,this.decimals=2,this.height="2rem",this.width="15rem",this.totalUnit="B",this.animations=!1,this.legendEnabled=!1,this.toolbarEnabled=!1,this.noDataText="-",this.enablePercentageLabel=!0,this.customLabel="",this.tooltipOptions={},this.data=[],this.options={}}get isCustomLabelTemplate(){return this.customLabel instanceof a.TemplateRef}ngOnInit(){const m=[{group:this.title||"",value:this.used}];let g=[];this.warningThreshold&&this.errorThreshold&&(g=[{range:[this.total*this.warningThreshold,this.total*this.errorThreshold],status:e.Statuses.WARNING},{range:[this.total*this.errorThreshold,this.total],status:e.Statuses.DANGER}]);const O=this.customColorScale||{[this.title||""]:this.getStatusFromThresholds(this.used,g)},N={legend:{enabled:this.legendEnabled},toolbar:{enabled:this.toolbarEnabled},tooltip:{enabled:!0,...this.tooltipOptions,customHTML:this.tooltipOptions?.customHTML||(()=>this.defaultTooltip())},animations:this.animations,height:this.height,width:this.width,color:{scale:O},meter:{showLabels:!this.customLabel,proportional:{total:this.total,unit:this.totalUnit,totalFormatter:()=>this.getTotalFormatter(),breakdownFormatter:()=>this.getBreakdownFormatter()}}};g.length>0&&(N.meter={...N.meter,status:{ranges:g}}),this.data=m,this.options=N}getStatusFromThresholds(m,g){for(const O of g){const[N,c]=O.range;if(m>=N&&m<c)return this.getCssVariableValue(l[O.status])}return this.getCssVariableValue("primary")}getCssVariableValue(m){return this.cssHelper.propertyValue(m,this.elementRef.nativeElement)}formatValue(m){return this.isBinary?this.dimlessBinaryPipe.transform(m,this.decimals):this.dimlessPipe.transform(m,this.decimals)}defaultTooltip(){return`<div class="meter-tooltip">\n      <div><strong>Used:</strong> ${this.formatValue(this.used)}</div>\n      <div><strong>Available:</strong> ${this.formatValue(this.total-this.used)}</div>\n      <div><strong>Total:</strong> ${this.formatValue(this.total)}</div>\n    </div>`}getTotalFormatter(){return this.customTotalFormatter?this.customTotalFormatter(this.total):this.enablePercentageLabel&&this.total>0?"":$localize`${this.formatValue(this.total)} total`}getBreakdownFormatter(){if(this.customBreakdownFormatter)return this.customBreakdownFormatter({used:this.used,total:this.total});if(this.enablePercentageLabel&&this.total>0){const m=this.used/this.total*100;return m<.01?"0%":`${m.toFixed(this.decimals)}%`}return $localize`${this.formatValue(this.used)} used`}static{this.\u0275fac=function(g){return new(g||M)(a.\u0275\u0275directiveInject(a.ElementRef),a.\u0275\u0275directiveInject(f._),a.\u0275\u0275directiveInject(E.u),a.\u0275\u0275directiveInject(T.l))}}static{this.\u0275cmp=a.\u0275\u0275defineComponent({type:M,selectors:[["cd-usage-bar"]],inputs:{total:"total",used:"used",title:"title",warningThreshold:"warningThreshold",errorThreshold:"errorThreshold",isBinary:"isBinary",decimals:"decimals",height:"height",width:"width",totalUnit:"totalUnit",animations:"animations",legendEnabled:"legendEnabled",toolbarEnabled:"toolbarEnabled",noDataText:"noDataText",enablePercentageLabel:"enablePercentageLabel",customLabel:"customLabel",tooltipOptions:"tooltipOptions",customColorScale:"customColorScale",customTotalFormatter:"customTotalFormatter",customBreakdownFormatter:"customBreakdownFormatter"},decls:4,vars:3,consts:()=>{let m,g;return m=$localize`:␟7b3a060d2b5ccf9f59c7729fd9d41d3f65e1a790␟8163125410779533465:${"\ufffd0\ufffd"}:INTERPOLATION:`,g=$localize`:␟63927d6910908afb36b9a03aa954c25a62a6fd16␟4543865327901177611:${"\ufffd0\ufffd"}:INTERPOLATION:`,[["noDataFound",""],["stringLabel",""],m,g,[4,"ngIf"],[3,"data","options",4,"ngIf","ngIfElse"],[4,"ngIf","ngIfElse"],[4,"ngTemplateOutlet"],[3,"data","options"]]},template:function(g,O){if(1&g&&a.\u0275\u0275template(0,_,4,2,"ng-container",4)(1,v,1,2,"ibm-meter-chart",5)(2,R,2,1,"ng-template",null,0,a.\u0275\u0275templateRefExtractor),2&g){const N=a.\u0275\u0275reference(3);a.\u0275\u0275property("ngIf",O.customLabel),a.\u0275\u0275advance(),a.\u0275\u0275property("ngIf",O.used>=0&&O.total>0)("ngIfElse",N)}},dependencies:[u.NgIf,u.NgTemplateOutlet,e.MeterChartComponent],styles:[".cds--cc--chart-wrapper text{font-size:var(--cds-heading-01-font-size, .875rem);font-weight:var(--cds-heading-01-font-weight, 600);line-height:var(--cds-heading-01-line-height, 1.42857);letter-spacing:var(--cds-heading-01-letter-spacing, .16px);font-family:inherit;font-weight:400}  .meter-tooltip{font-size:var(--cds-helper-text-01-font-size, .75rem);line-height:var(--cds-helper-text-01-line-height, 1.33333);letter-spacing:var(--cds-helper-text-01-letter-spacing, .32px);padding-top:.25rem}  .meter-tooltip div{padding-bottom:.25rem}"]})}}},80893:(Z,A,r)=>{r.d(A,{t:()=>f});var a=r(87536),l=r(53075),T=r(3600);class f{constructor(F){this.stepsService=F,this.stepsTitle?.forEach((p,S)=>{p.onClick=()=>this.currentStep.stepIndex=S})}ngOnInit(){this.initializeSteps()}ngOnChanges(F){F.stepsTitle&&!F.stepsTitle.isFirstChange()&&this.initializeSteps()}initializeSteps(){this.stepsService.setTotalSteps(this.stepsTitle.length),this.steps=this.stepsService.getSteps(),this.currentStepSub=this.stepsService.getCurrentStep().subscribe(F=>{this.currentStep=F})}onStepClick(F){this.stepsService.setCurrentStep(F)}ngOnDestroy(){this.currentStepSub.unsubscribe()}static{this.\u0275fac=function(p){return new(p||f)(a.\u0275\u0275directiveInject(l.m))}}static{this.\u0275cmp=a.\u0275\u0275defineComponent({type:f,selectors:[["cd-wizard"]],inputs:{stepsTitle:"stepsTitle"},features:[a.\u0275\u0275NgOnChangesFeature],decls:2,vars:2,consts:[[1,"indicator"],["orientation","vertical",3,"steps","current"]],template:function(p,S){1&p&&(a.\u0275\u0275elementStart(0,"div",0),a.\u0275\u0275element(1,"cds-progress-indicator",1),a.\u0275\u0275elementEnd()),2&p&&(a.\u0275\u0275advance(),a.\u0275\u0275property("steps",S.stepsTitle)("current",null==S.currentStep?null:S.currentStep.stepIndex))},dependencies:[T.ProgressIndicator],styles:["cd-wizard{width:15%}.card-body[_ngcontent-%COMP%]{padding-left:0}span.circle-step[_ngcontent-%COMP%]{background:#adb5bd;border-radius:.8em;color:#fff;display:inline-block;font-weight:700;line-height:1.6em;margin-right:5px;text-align:center;width:1.6em}span.circle-step.active[_ngcontent-%COMP%]{background-color:#25828e}.nav-pills[_ngcontent-%COMP%]   .nav-link[_ngcontent-%COMP%]{background-color:#fff;color:#343a40}.nav-pills[_ngcontent-%COMP%]   .nav-link.active[_ngcontent-%COMP%]{color:#25828e}"]})}}},54372:(Z,A,r)=>{r.d(A,{BF:()=>S,D5:()=>T,Qp:()=>E,Ss:()=>u,Vv:()=>F,YV:()=>p,eN:()=>_,m3:()=>v,qA:()=>R,yY:()=>f});var E,P,f,a=r(45312),e=r(87536);class T{static{this.organization="ceph"}static{this.projectName="Ceph Dashboard"}static{this.defaultUser="dashboard"}static{this.license="Free software (LGPL 2.1)."}static{this.copyright="Copyright(c) "+a.c.year+" Ceph contributors."}static{this.cephLogo="assets/Ceph_Logo.svg"}}(P=E||(E={})).CREATE="create",P.EDIT="edit",P.UPDATE="update",P.REMOVE="remove",P.DELETE="delete",P.ADD="add",P.COPY="copy",P.CLONE="clone",P.RECREATE="recreate",P.EXPIRE="expire",P.RESTART="Restart",function(P){P.CREATE="Create",P.DELETE="Delete",P.ADD="Add",P.REMOVE="Remove",P.EDIT="Edit",P.CANCEL="Cancel",P.COPY="Copy",P.CLONE="Clone",P.UPDATE="Update",P.EVICT="Evict",P.SHOW="Show",P.RECREATE="Recreate",P.EXPIRE="Expire",P.START="Start",P.STOP="Stop",P.REDEPLOY="Redeploy",P.RESTART="Restart"}(f||(f={}));class u{constructor(){this.CREATE=$localize`Create`,this.EXPORT=$localize`Export`,this.IMPORT=$localize`Import`,this.SETUP_MULTISITE_REPLICATION=$localize`Setup Multi-site Replication`,this.MIGRATE=$localize`Migrate`,this.DELETE=$localize`Delete`,this.ADD=$localize`Add`,this.SET=$localize`Set`,this.SUBMIT=$localize`Submit`,this.REMOVE=$localize`Remove`,this.UNSET=$localize`Unset`,this.EDIT=$localize`Edit`,this.UPDATE=$localize`Update`,this.CANCEL=$localize`Cancel`,this.PREVIEW=$localize`Preview`,this.MOVE=$localize`Move`,this.NEXT=$localize`Next`,this.BACK=$localize`Back`,this.CLONE=$localize`Clone`,this.COPY=$localize`Copy`,this.DEEP_SCRUB=$localize`Deep Scrub`,this.DESTROY=$localize`Destroy`,this.EVICT=$localize`Evict`,this.FLATTEN=$localize`Flatten`,this.MARK_DOWN=$localize`Mark Down`,this.MARK_IN=$localize`Mark In`,this.MARK_LOST=$localize`Mark Lost`,this.MARK_OUT=$localize`Mark Out`,this.PROTECT=$localize`Protect`,this.PURGE=$localize`Purge`,this.RENAME=$localize`Rename`,this.RESTORE=$localize`Restore`,this.REWEIGHT=$localize`Reweight`,this.ROLLBACK=$localize`Rollback`,this.SCRUB=$localize`Scrub`,this.SHOW=$localize`Show`,this.TIERING=$localize`Tiering`,this.TRASH=$localize`Move to Trash`,this.UNPROTECT=$localize`Unprotect`,this.CHANGE=$localize`Change`,this.FLAGS=$localize`Flags`,this.ENTER_MAINTENANCE=$localize`Enter Maintenance`,this.EXIT_MAINTENANCE=$localize`Exit Maintenance`,this.AUTHORIZE=$localize`Authorize`,this.START_DRAIN=$localize`Start Drain`,this.STOP_DRAIN=$localize`Stop Drain`,this.RESYNC=$localize`Resync`,this.RECREATE=$localize`Recreate`,this.EXPIRE=$localize`Expire`,this.START=$localize`Start`,this.STOP=$localize`Stop`,this.REDEPLOY=$localize`Redeploy`,this.RESTART=$localize`Restart`,this.REMOVE_SCHEDULING=$localize`Remove Scheduling`,this.PROMOTE=$localize`Promote`,this.DEMOTE=$localize`Demote`,this.START_UPGRADE=$localize`Start Upgrade`,this.ACTIVATE=$localize`Activate`,this.DEACTIVATE=$localize`Deactivate`,this.ATTACH=$localize`Attach`,this.CONNECT=$localize`Connect`,this.DISCONNECT=$localize`Disconnect`,this.RECONNECT=$localize`Reconnect`,this.EXPAND_CLUSTER=$localize`Expand Cluster`,this.NFS_EXPORT=$localize`Create NFS Export`}static{this.\u0275fac=function(b){return new(b||u)}}static{this.\u0275prov=e.\u0275\u0275defineInjectable({token:u,factory:u.\u0275fac,providedIn:"root"})}}class F{constructor(){this.CREATED=$localize`Created`,this.DELETED=$localize`Deleted`,this.ADDED=$localize`Added`,this.REMOVED=$localize`Removed`,this.EDITED=$localize`Edited`,this.CANCELED=$localize`Canceled`,this.PREVIEWED=$localize`Previewed`,this.MOVED=$localize`Moved`,this.CLONED=$localize`Cloned`,this.COPIED=$localize`Copied`,this.DEEP_SCRUBBED=$localize`Deep Scrubbed`,this.DESTROYED=$localize`Destroyed`,this.FLATTENED=$localize`Flattened`,this.MARKED_DOWN=$localize`Marked Down`,this.MARKED_IN=$localize`Marked In`,this.MARKED_LOST=$localize`Marked Lost`,this.MARKED_OUT=$localize`Marked Out`,this.PROTECTED=$localize`Protected`,this.PURGED=$localize`Purged`,this.RENAMED=$localize`Renamed`,this.RESTORED=$localize`Restored`,this.REWEIGHTED=$localize`Reweighted`,this.ROLLED_BACK=$localize`Rolled back`,this.SCRUBBED=$localize`Scrubbed`,this.SHOWED=$localize`Showed`,this.TRASHED=$localize`Moved to Trash`,this.UNPROTECTED=$localize`Unprotected`,this.CHANGE=$localize`Change`,this.RECREATED=$localize`Recreated`,this.EXPIRED=$localize`Expired`,this.START=$localize`Start`,this.STOP=$localize`Stop`,this.REDEPLOY=$localize`Redeploy`,this.RESTART=$localize`Restart`}static{this.\u0275fac=function(b){return new(b||F)}}static{this.\u0275prov=e.\u0275\u0275defineInjectable({token:F,factory:F.\u0275fac,providedIn:"root"})}}class p{constructor(){this.TIMER_SERVICE_PERIOD=5e3}static{this.\u0275fac=function(b){return new(b||p)}}static{this.\u0275prov=e.\u0275\u0275defineInjectable({token:p,factory:p.\u0275fac,providedIn:"root"})}}const S=["TLSv1.2","TLSv1.3"],_=["ECDHE","ECDSA","AES128","GCM","SHA256","RSA","AES256","SHA384","CHACHA20","POLY1305","DHE"],v="user",R="ceph version"},16619:(Z,A,r)=>{r.d(A,{H:()=>a});const a="_nogroup"},25171:(Z,A,r)=>{r.d(A,{N:()=>M});var a=r(87536),T=(r(58384),r(29841)),E=r.n(T),f=r(3600),F=r(62847);const p=["headerPermissionCheckboxTpl"],S=["cellScopeCheckboxTpl"],_=["cellPermissionCheckboxTpl"];function v(b,m){if(1&b){const g=a.\u0275\u0275getCurrentView();a.\u0275\u0275elementStart(0,"div",7)(1,"cds-checkbox",8),a.\u0275\u0275listener("checkedChange",function(N){const c=a.\u0275\u0275restoreView(g),z=c.data.column,B=c.data.row,q=a.\u0275\u0275nextContext();return a.\u0275\u0275resetView(q.onClickCellCheckbox(B.scope,z.prop,N))}),a.\u0275\u0275i18nStart(2,3),a.\u0275\u0275element(3,"span",9),a.\u0275\u0275i18nEnd(),a.\u0275\u0275elementEnd()()}if(2&b){const g=m.data.row,O=m.data.value,N=a.\u0275\u0275nextContext();a.\u0275\u0275advance(),a.\u0275\u0275propertyInterpolate1("id","scope_",g.scope,""),a.\u0275\u0275property("checked",N.isRowChecked(g.scope))("disabled",N.isDisabled),a.\u0275\u0275advance(2),a.\u0275\u0275propertyInterpolate1("for","scope_",g.scope,""),a.\u0275\u0275i18nExp(O),a.\u0275\u0275i18nApply(2)}}function R(b,m){if(1&b){const g=a.\u0275\u0275getCurrentView();a.\u0275\u0275elementStart(0,"div",7)(1,"cds-checkbox",8),a.\u0275\u0275listener("checkedChange",function(N){const c=a.\u0275\u0275restoreView(g),z=c.data.column,B=c.data.row,q=a.\u0275\u0275nextContext();return a.\u0275\u0275resetView(q.onClickCellCheckbox(B.scope,z.prop,N))}),a.\u0275\u0275i18nStart(2,4),a.\u0275\u0275element(3,"span",10),a.\u0275\u0275i18nEnd(),a.\u0275\u0275elementEnd()()}if(2&b){const g=m.data.column,O=m.data.row,N=m.data.value,c=a.\u0275\u0275nextContext();a.\u0275\u0275advance(),a.\u0275\u0275property("id",O.scope+"-"+g.prop)("checked",N)("disabled",c.isDisabled),a.\u0275\u0275advance(2),a.\u0275\u0275property("for",O.scope+"-"+g.prop)}}function P(b,m){if(1&b){const g=a.\u0275\u0275getCurrentView();a.\u0275\u0275elementStart(0,"div",7)(1,"cds-checkbox",11),a.\u0275\u0275listener("checkedChange",function(N){const c=a.\u0275\u0275restoreView(g).data,z=a.\u0275\u0275nextContext();return a.\u0275\u0275resetView(z.onClickHeaderCheckbox(c.prop,N))}),a.\u0275\u0275i18nStart(2,5),a.\u0275\u0275element(3,"span",12),a.\u0275\u0275i18nEnd(),a.\u0275\u0275elementEnd()()}if(2&b){const g=m.data,O=a.\u0275\u0275nextContext();a.\u0275\u0275advance(),a.\u0275\u0275propertyInterpolate1("id","header_",g.prop,""),a.\u0275\u0275property("disabled",O.isDisabled)("checked",O.isHeaderChecked(g.prop)),a.\u0275\u0275advance(2),a.\u0275\u0275propertyInterpolate1("for","header_",g.prop,""),a.\u0275\u0275i18nExp(g.name),a.\u0275\u0275i18nApply(2)}}class M{constructor(){this.scopes=[],this.isTableForOctalMode=!1,this.initialValue={},this.isDisabled=!1}ngOnInit(){this.columns.forEach(m=>{"All"===m.name?(m.cellTemplate=this.cellScopeCheckboxTpl,m.headerTemplate=this.headerPermissionCheckboxTpl):(m.cellTemplate=this.cellPermissionCheckboxTpl,m.headerTemplate=this.headerPermissionCheckboxTpl),m.sortable=!1}),this.listenToChanges(),this.form.get(this.inputField).setValue(this.initialValue)}listenToChanges(){this.form.get(this.inputField).valueChanges.subscribe(m=>{const g=[];E().each(this.scopes,O=>{const N={read:!1,write:!1,execute:!1};N.scope=O,O in m&&E().each(m[O],c=>{N[c]=!0}),g.push(N)}),this.data=g})}isRowChecked(m){const g=E().find(this.data,O=>O.scope===m);return!E().isUndefined(g)&&(this.isTableForOctalMode?g.read&&g.write&&g.execute:g.read&&g.create&&g.update&&g.delete)}isHeaderChecked(m){let g=[m];return"scope"===m&&this.isTableForOctalMode?g=["read","write","execute"]:"scope"===m&&(g=["read","create","update","delete"]),g.every(O=>this.data.every(N=>N[O]))}onClickCellCheckbox(m,g,O=null){const N=E().cloneDeep(this.form.getValue(this.inputField));let c=[g];"scope"===g&&this.isTableForOctalMode?c=["read","write","execute"]:"scope"===g&&(c=["read","create","update","delete"]),m in N||(N[m]=[]),O||!0===O||!E().isEqual(c.sort(),E().intersection(N[m],c).sort())?N[m]=E().union(N[m],c):(N[m]=E().difference(N[m],c),E().isEmpty(N[m])&&E().unset(N,m)),this.form.get(this.inputField).setValue(N)}onClickHeaderCheckbox(m,g){const O=E().cloneDeep(this.form.getValue(this.inputField));let N=[m];"scope"===m&&this.isTableForOctalMode?N=["read","write","execute"]:"scope"===m&&(N=["read","create","update","delete"]),E().each(N,c=>{E().each(this.scopes,z=>{!0===g?O[z]=E().union(O[z],[c]):(O[z]=E().difference(O[z],[c]),E().isEmpty(O[z])&&E().unset(O,z))})}),this.form.get(this.inputField).setValue(O)}static{this.\u0275fac=function(g){return new(g||M)}}static{this.\u0275cmp=a.\u0275\u0275defineComponent({type:M,selectors:[["cd-checked-table-form"]],viewQuery:function(g,O){if(1&g&&(a.\u0275\u0275viewQuery(p,7),a.\u0275\u0275viewQuery(S,7),a.\u0275\u0275viewQuery(_,7)),2&g){let N;a.\u0275\u0275queryRefresh(N=a.\u0275\u0275loadQuery())&&(O.headerPermissionCheckboxTpl=N.first),a.\u0275\u0275queryRefresh(N=a.\u0275\u0275loadQuery())&&(O.cellScopeCheckboxTpl=N.first),a.\u0275\u0275queryRefresh(N=a.\u0275\u0275loadQuery())&&(O.cellPermissionCheckboxTpl=N.first)}},inputs:{data:"data",columns:"columns",form:"form",inputField:"inputField",scopes:"scopes",isTableForOctalMode:"isTableForOctalMode",initialValue:"initialValue",isDisabled:"isDisabled"},decls:7,vars:8,consts:()=>{let m,g,O;return m=$localize`:␟ed5d1901f9cf65fbd8f04a5a3452b872434c2faa␟1885912126043351057:${"\ufffd#3\ufffd"}:START_TAG_SPAN:${"\ufffd0\ufffd"}:INTERPOLATION:${"\ufffd/#3\ufffd"}:CLOSE_TAG_SPAN:`,g=$localize`:␟c05918db80bce130142bf863a622d874d20d13a8␟1158979871499063135:${"\ufffd#3\ufffd"}:START_TAG_SPAN:${"\ufffd/#3\ufffd"}:CLOSE_TAG_SPAN:`,O=$localize`:␟6346a3c0f9d4106b5d5398bf4f4eaacc695423ae␟4525113308813294861:${"\ufffd#3\ufffd"}:START_TAG_SPAN:${"\ufffd0\ufffd"}:INTERPOLATION:${"\ufffd/#3\ufffd"}:CLOSE_TAG_SPAN:`,[["cellScopeCheckboxTpl",""],["cellPermissionCheckboxTpl",""],["headerPermissionCheckboxTpl",""],m,g,O,["columnMode","flex","size","xs",3,"data","columns","toolHeader","autoReload","autoSave","footer","layer","limit"],[1,"m-2"],[3,"checkedChange","id","checked","disabled"],[1,"datatable-permissions-scope-cell-label","custom-control-label",3,"for"],[1,"custom-control-label",3,"for"],[3,"checkedChange","id","disabled","checked"],[1,"datatable-permissions-header-cell-label","custom-control-label",3,"for"]]},template:function(g,O){1&g&&(a.\u0275\u0275element(0,"cd-table",6),a.\u0275\u0275template(1,v,4,7,"ng-template",null,0,a.\u0275\u0275templateRefExtractor)(3,R,4,4,"ng-template",null,1,a.\u0275\u0275templateRefExtractor)(5,P,4,7,"ng-template",null,2,a.\u0275\u0275templateRefExtractor)),2&g&&a.\u0275\u0275property("data",O.data)("columns",O.columns)("toolHeader",!1)("autoReload",!1)("autoSave",!1)("footer",!1)("layer",0)("limit",0)},dependencies:[f.Checkbox,F.O]})}}},19907:(Z,A,r)=>{r.d(A,{M:()=>ue});var a=r(87536),e=r(76218),l=r(2155),T=r(15643),E=r(36618);class f{constructor(K){this.http=K}export(K){return this.http.post("api/cluster/user/export",{entities:K})}static{this.\u0275fac=function(ce){return new(ce||f)(a.\u0275\u0275inject(E.HttpClient))}}static{this.\u0275prov=a.\u0275\u0275defineInjectable({token:f,factory:f.\u0275fac,providedIn:"root"})}}var u=r(34177),F=r(19380),p=r(85481),S=r(82254),_=r(50813),v=r(84821),R=r(94254),P=r(91974),M=r(50889),b=r(62847),m=r(32295),g=r(45843),O=r(71138),N=r(64346);const c=["badgeDictTpl"],z=["dateTpl"],B=["durationTpl"],q=["exportDataModalTpl"],Q=()=>({exact:!0});function G(C,K){if(1&C&&(a.\u0275\u0275elementStart(0,"li",10)(1,"a",11),a.\u0275\u0275i18n(2,4),a.\u0275\u0275elementEnd()()),2&C){const ce=K.$implicit;a.\u0275\u0275advance(),a.\u0275\u0275property("routerLink",ce.url)("routerLinkActiveOptions",a.\u0275\u0275pureFunction0(3,Q)),a.\u0275\u0275advance(),a.\u0275\u0275i18nExp(ce.name),a.\u0275\u0275i18nApply(2)}}function D(C,K){if(1&C&&(a.\u0275\u0275elementStart(0,"ul",8),a.\u0275\u0275template(1,G,3,4,"li",9),a.\u0275\u0275elementEnd()),2&C){const ce=a.\u0275\u0275nextContext();a.\u0275\u0275advance(),a.\u0275\u0275property("ngForOf",ce.tabs)}}function oe(C,K){if(1&C&&(a.\u0275\u0275elementStart(0,"tr")(1,"td",18),a.\u0275\u0275i18n(2,5),a.\u0275\u0275elementEnd(),a.\u0275\u0275elementStart(3,"td")(4,"pre"),a.\u0275\u0275text(5),a.\u0275\u0275elementEnd()()()),2&C){const ce=K.$implicit,Ee=a.\u0275\u0275nextContext(4);a.\u0275\u0275advance(2),a.\u0275\u0275i18nExp(ce),a.\u0275\u0275i18nApply(2),a.\u0275\u0275advance(3),a.\u0275\u0275textInterpolate(Ee.expandedRow[ce])}}function fe(C,K){if(1&C&&(a.\u0275\u0275elementStart(0,"table",16)(1,"tbody"),a.\u0275\u0275template(2,oe,6,2,"tr",17),a.\u0275\u0275elementEnd()()),2&C){const ce=a.\u0275\u0275nextContext(3);a.\u0275\u0275advance(2),a.\u0275\u0275property("ngForOf",ce.meta.detail_columns)}}function ye(C,K){1&C&&(a.\u0275\u0275elementContainerStart(0),a.\u0275\u0275template(1,fe,3,1,"table",15),a.\u0275\u0275elementContainerEnd())}function je(C,K){if(1&C){const ce=a.\u0275\u0275getCurrentView();a.\u0275\u0275elementContainerStart(0),a.\u0275\u0275elementStart(1,"cd-table",12),a.\u0275\u0275pipe(2,"async"),a.\u0275\u0275listener("setExpandedRow",function(Ce){a.\u0275\u0275restoreView(ce);const Ue=a.\u0275\u0275nextContext();return a.\u0275\u0275resetView(Ue.setExpandedRow(Ce))})("updateSelection",function(Ce){a.\u0275\u0275restoreView(ce);const Ue=a.\u0275\u0275nextContext();return a.\u0275\u0275resetView(Ue.updateSelection(Ce))}),a.\u0275\u0275elementStart(3,"div",13),a.\u0275\u0275element(4,"cd-table-actions",14),a.\u0275\u0275elementEnd(),a.\u0275\u0275template(5,ye,2,0,"ng-container",7),a.\u0275\u0275elementEnd(),a.\u0275\u0275elementContainerEnd()}if(2&C){const ce=a.\u0275\u0275nextContext();a.\u0275\u0275advance(),a.\u0275\u0275property("data",a.\u0275\u0275pipeBind1(2,10,ce.data$))("columns",ce.meta.table.columns)("columnMode",ce.meta.table.columnMode)("hasDetails",ce.meta.detail_columns.length>0)("selectionType",ce.meta.table.selectionType)("toolHeader",ce.meta.table.toolHeader),a.\u0275\u0275advance(3),a.\u0275\u0275property("permission",ce.permission)("selection",ce.selection)("tableActions",ce.meta.actions),a.\u0275\u0275advance(),a.\u0275\u0275property("ngIf",ce.expandedRow&&ce.meta.detail_columns.length>0)}}function Le(C,K){1&C&&(a.\u0275\u0275elementContainerStart(0),a.\u0275\u0275text(1,"\xa0"),a.\u0275\u0275elementContainerEnd())}function Fe(C,K){if(1&C&&(a.\u0275\u0275elementStart(0,"span")(1,"span",19),a.\u0275\u0275text(2),a.\u0275\u0275elementEnd(),a.\u0275\u0275template(3,Le,2,0,"ng-container",7),a.\u0275\u0275elementEnd()),2&C){const ce=K.$implicit,Ee=K.last;a.\u0275\u0275advance(2),a.\u0275\u0275textInterpolate2("",ce.key,": ",ce.value,""),a.\u0275\u0275advance(),a.\u0275\u0275property("ngIf",!Ee)}}function te(C,K){if(1&C&&(a.\u0275\u0275template(0,Fe,4,3,"span",17),a.\u0275\u0275pipe(1,"keyvalue")),2&C){const ce=K.data.value;a.\u0275\u0275property("ngForOf",a.\u0275\u0275pipeBind1(1,1,ce))}}function le(C,K){if(1&C&&(a.\u0275\u0275elementStart(0,"span"),a.\u0275\u0275text(1),a.\u0275\u0275pipe(2,"cdDate"),a.\u0275\u0275elementEnd()),2&C){const ce=K.data.value;a.\u0275\u0275advance(),a.\u0275\u0275textInterpolate(a.\u0275\u0275pipeBind1(2,1,ce))}}function ie(C,K){if(1&C&&(a.\u0275\u0275elementStart(0,"span"),a.\u0275\u0275text(1),a.\u0275\u0275pipe(2,"duration"),a.\u0275\u0275elementEnd()),2&C){const ce=K.data.value;a.\u0275\u0275advance(),a.\u0275\u0275textInterpolate(a.\u0275\u0275pipeBind1(2,1,ce))}}function _e(C,K){if(1&C&&(a.\u0275\u0275elementStart(0,"div",20)(1,"textarea",21),a.\u0275\u0275text(2),a.\u0275\u0275elementEnd(),a.\u0275\u0275element(3,"cd-copy-2-clipboard-button",22),a.\u0275\u0275elementEnd()),2&C){const ce=a.\u0275\u0275nextContext();a.\u0275\u0275advance(2),a.\u0275\u0275textInterpolate(ce.modalState.authExportData)}}class ue{constructor(K,ce,Ee,Ce,Ue,He,it,ct){this.authStorageService=K,this.timerService=ce,this.dataGatewayService=Ee,this.taskWrapper=Ce,this.cephUserService=Ue,this.activatedRoute=He,this.modalService=it,this.router=ct,this.selection=new F.y,this.expandedRow={},this.tabs={},this.modalState={},this.permissions=this.authStorageService.getPermissions()}ngOnInit(){this.activatedRoute.data.subscribe(K=>{const ce=K.resource;this.tabs=K.tabs,this.dataGatewayService.list(`ui-${ce}`).subscribe(Ee=>this.processMeta(Ee)),this.data$=this.timerService.get(()=>this.dataGatewayService.list(ce))}),this.activatedRoute.data.subscribe(K=>{this.resource=K.resource})}processMeta(K){var Ce;this.permission=this.permissions[(Ce=K.permissions[0],Ce.split("-").reduce((Ue,He,it)=>0===it?He.toLowerCase():`${Ue}${He.charAt(0).toUpperCase()}${He.substr(1).toLowerCase()}`,""))];const Ee={badgeDict:this.badgeDictTpl,date:this.dateTpl,duration:this.durationTpl};K.table.columns.forEach((Ce,Ue)=>{void 0!==Ce.cellTemplate&&(K.table.columns[Ue].cellTemplate=Ee[Ce.cellTemplate])}),K.table.columns=K.table.columns.filter(Ce=>!Ce.isHidden),this.meta=K;for(let Ce=0;Ce<this.meta.actions.length;Ce++){let Ue=this.meta.actions[Ce];Ue.disable&&(Ue.disable=He=>!He.hasSelection),""!==Ue.click.toString()&&(Ue.click=this[this.meta.actions[Ce].click.toString()].bind(this))}}delete(){const K=this.selection.first()[this.meta.columnKey];this.modalRef=this.modalService.show(v.D,{itemDescription:$localize`${this.meta.resource}`,itemNames:[K],submitAction:()=>{this.taskWrapper.wrapTaskAroundCall({task:new p.O("crud-component/id",K),call:this.dataGatewayService.delete(this.resource,K)}).subscribe({error:()=>{this.modalRef.closeModal()},complete:()=>{this.modalRef.closeModal()}})}})}updateSelection(K){this.selection=K}setExpandedRow(K){for(let ce=0;ce<this.meta.detail_columns.length;ce++){let Ee=this.meta.detail_columns[ce],Ce=K?.[Ee];this.expandedRow[Ee]=this.formatColumnDetails(Ce)}}edit(){let K="";this.selection.hasSelection&&(K=this.selection.first()[this.meta.columnKey]);const ce=this.meta.actions.find(Ee=>"Edit"===Ee.name);this.router.navigate([ce.routerLink],{queryParams:{key:K}})}authExport(){let K=[];this.selection.selected.forEach(ce=>K.push(ce.entity)),this.cephUserService.export(K).subscribe(ce=>{const Ee={titleText:$localize`Ceph user export data`,buttonText:$localize`Close`,bodyTpl:this.authxEportTpl,showSubmit:!0,showCancel:!1,onSubmit:()=>{this.modalRef.closeModal()}};this.modalState.authExportData=ce.trim(),this.modalRef=this.modalService.show(u.M,Ee)})}stringReplacer(K,ce){try{return JSON.parse(ce)}catch{return ce}}formatColumnDetails(K){return Array.isArray(K)||"string"==typeof K?JSON.stringify(K,this.stringReplacer,2):K}static{this.\u0275fac=function(ce){return new(ce||ue)(a.\u0275\u0275directiveInject(S.v),a.\u0275\u0275directiveInject(T.H),a.\u0275\u0275directiveInject(l.w),a.\u0275\u0275directiveInject(_.a),a.\u0275\u0275directiveInject(f),a.\u0275\u0275directiveInject(e.ActivatedRoute),a.\u0275\u0275directiveInject(R.V),a.\u0275\u0275directiveInject(e.Router))}}static{this.\u0275cmp=a.\u0275\u0275defineComponent({type:ue,selectors:[["cd-crud-table"]],viewQuery:function(ce,Ee){if(1&ce&&(a.\u0275\u0275viewQuery(c,5),a.\u0275\u0275viewQuery(z,5),a.\u0275\u0275viewQuery(B,5),a.\u0275\u0275viewQuery(q,5)),2&ce){let Ce;a.\u0275\u0275queryRefresh(Ce=a.\u0275\u0275loadQuery())&&(Ee.badgeDictTpl=Ce.first),a.\u0275\u0275queryRefresh(Ce=a.\u0275\u0275loadQuery())&&(Ee.dateTpl=Ce.first),a.\u0275\u0275queryRefresh(Ce=a.\u0275\u0275loadQuery())&&(Ee.durationTpl=Ce.first),a.\u0275\u0275queryRefresh(Ce=a.\u0275\u0275loadQuery())&&(Ee.authxEportTpl=Ce.first)}},decls:10,vars:2,consts:()=>{let K,ce;return K=$localize`:␟9abe0f4ee25c28e1341ca07c72a85e36d159a6e6␟2291880261723239747:${"\ufffd0\ufffd"}:INTERPOLATION:`,ce=$localize`:␟3657eb4778c80da69e8c3a96c8be652d4b2bd55b␟2413401287443136581:${"\ufffd0\ufffd"}:INTERPOLATION:`,[["badgeDictTpl",""],["dateTpl",""],["durationTpl",""],["exportDataModalTpl",""],K,ce,["class","nav nav-tabs",4,"ngIf"],[4,"ngIf"],[1,"nav","nav-tabs"],["class","nav-item",4,"ngFor","ngForKeyvalue","ngForOf"],[1,"nav-item"],["routerLinkActive","active","ariaCurrentWhenActive","page",1,"nav-link",3,"routerLink","routerLinkActiveOptions"],[3,"setExpandedRow","updateSelection","data","columns","columnMode","hasDetails","selectionType","toolHeader"],[1,"table-actions"],["id","crud-table-actions",1,"btn-group",3,"permission","selection","tableActions"],["class","cds--data-table--sort cds--data-table--no-border cds--data-table cds--data-table--md",4,"cdTableDetail"],[1,"cds--data-table--sort","cds--data-table--no-border","cds--data-table","cds--data-table--md"],[4,"ngFor","ngForOf"],[1,"bold"],[1,"badge","badge-background-primary"],[1,"d-flex","flex-column","align-items-center","w-100","gap-3"],["readonly","","id","authExportArea",1,"form-control","w-100","bg-light","height-400"],["source","authExportArea",1,"align-self-end"]]},template:function(ce,Ee){1&ce&&a.\u0275\u0275template(0,D,2,1,"ul",6)(1,je,6,12,"ng-container",7)(2,te,2,3,"ng-template",null,0,a.\u0275\u0275templateRefExtractor)(4,le,3,3,"ng-template",null,1,a.\u0275\u0275templateRefExtractor)(6,ie,3,3,"ng-template",null,2,a.\u0275\u0275templateRefExtractor)(8,_e,4,1,"ng-template",null,3,a.\u0275\u0275templateRefExtractor),2&ce&&(a.\u0275\u0275property("ngIf",Ee.tabs),a.\u0275\u0275advance(),a.\u0275\u0275property("ngIf",Ee.meta))},dependencies:[P.NgForOf,P.NgIf,M.N,e.RouterLink,e.RouterLinkActive,b.O,m.j,g.N,P.AsyncPipe,P.KeyValuePipe,O.Q,N.b],styles:[".height-400[_ngcontent-%COMP%]{height:400px}"]})}}},27289:(Z,A,r)=>{r.d(A,{h:()=>C});var a=r(91974),e=r(76218),l=r(77317),T=r(3600),E={elem:"svg",attrs:{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 32",fill:"currentColor",width:16,height:16},content:[{elem:"path",attrs:{d:"M17 15L17 8 15 8 15 15 8 15 8 17 15 17 15 24 17 24 17 17 24 17 24 15z"}}],name:"add",size:16},f={elem:"svg",attrs:{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 32",fill:"currentColor",width:16,height:16},content:[{elem:"path",attrs:{d:"M18,28H14a2,2,0,0,1-2-2V18.41L4.59,11A2,2,0,0,1,4,9.59V6A2,2,0,0,1,6,4H26a2,2,0,0,1,2,2V9.59A2,2,0,0,1,27.41,11L20,18.41V26A2,2,0,0,1,18,28ZM6,6V9.59l8,8V26h4V17.59l8-8V6Z"}}],name:"filter",size:16},u={elem:"svg",attrs:{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 32",fill:"currentColor",width:16,height:16},content:[{elem:"path",attrs:{d:"M12 10H6.78A11 11 0 0127 16h2A13 13 0 006 7.68V4H4v8h8zM20 22h5.22A11 11 0 015 16H3a13 13 0 0023 8.32V28h2V20H20z"}}],name:"renew",size:16},F={elem:"svg",attrs:{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 32",fill:"currentColor",width:16,height:16},content:[{elem:"path",attrs:{d:"M8 18H12V20H8zM14 18H18V20H14zM8 14H12V16H8zM14 22H18V24H14zM20 14H24V16H20zM20 22H24V24H20z"}},{elem:"path",attrs:{d:"M27,3H5A2.0025,2.0025,0,0,0,3,5V27a2.0025,2.0025,0,0,0,2,2H27a2.0025,2.0025,0,0,0,2-2V5A2.0025,2.0025,0,0,0,27,3Zm0,2,0,4H5V5ZM5,27V11H27l0,16Z"}}],name:"data-table",size:16},p={elem:"svg",attrs:{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 32",fill:"currentColor",width:16,height:16},content:[{elem:"path",attrs:{d:"M13 24L4 15 5.414 13.586 13 21.171 26.586 7.586 28 9 13 24z"}}],name:"checkmark",size:16},S=r(71307),_={elem:"svg",attrs:{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 16 16",fill:"currentColor",width:16,height:16},content:[{elem:"path",attrs:{d:"M6 15L6 14 2.7 14 7 9.7 6.3 9 2 13.3 2 10 1 10 1 15zM10 1L10 2 13.3 2 9 6.3 9.7 7 14 2.7 14 6 15 6 15 1z"}}],name:"maximize",size:16},v={elem:"svg",attrs:{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 32",fill:"currentColor",width:16,height:16},content:[{elem:"path",attrs:{d:"M24 12L16 22 8 12z"}}],name:"caret--down",size:16},R=r(53648),P=r(45451),M=r(25002),b=r(99040),m=r(13421),g=r(8990),O=r(27202),N=r(90876),c=r(87536),z=r(11145),B=r(10142);const q=["textArea"];class Q extends P.FieldType{constructor(ce){super(),this.textAreaJsonFormatterService=ce}onChange(){this.textAreaJsonFormatterService.format(this.textArea)}static{this.\u0275fac=function(Ee){return new(Ee||Q)(c.\u0275\u0275directiveInject(z.C))}}static{this.\u0275cmp=c.\u0275\u0275defineComponent({type:Q,selectors:[["cd-formly-textarea-type"]],viewQuery:function(Ee,Ce){if(1&Ee&&c.\u0275\u0275viewQuery(q,5),2&Ee){let Ue;c.\u0275\u0275queryRefresh(Ue=c.\u0275\u0275loadQuery())&&(Ce.textArea=Ue.first)}},features:[c.\u0275\u0275InheritDefinitionFeature],decls:2,vars:6,consts:[["textArea",""],[1,"form-control",3,"change","formControl","cols","rows","formlyAttributes"]],template:function(Ee,Ce){if(1&Ee){const Ue=c.\u0275\u0275getCurrentView();c.\u0275\u0275elementStart(0,"textarea",1,0),c.\u0275\u0275listener("change",function(){return c.\u0275\u0275restoreView(Ue),c.\u0275\u0275resetView(Ce.onChange())}),c.\u0275\u0275elementEnd()}2&Ee&&(c.\u0275\u0275classProp("is-invalid",Ce.showError),c.\u0275\u0275property("formControl",Ce.formControl)("cols",Ce.props.cols)("rows",Ce.props.rows)("formlyAttributes",Ce.field))},dependencies:[B.a,R.DefaultValueAccessor,R.NgControlStatus,R.FormControlDirective,P.\u0275FormlyAttributes]})}}var G=r(59342),D=r(55472);function oe(K,ce){1&K&&(c.\u0275\u0275elementStart(0,"span",10),c.\u0275\u0275text(1,"*"),c.\u0275\u0275elementEnd())}function fe(K,ce){if(1&K&&(c.\u0275\u0275elementStart(0,"cd-helper"),c.\u0275\u0275element(1,"span",11),c.\u0275\u0275elementEnd()),2&K){const Ee=c.\u0275\u0275nextContext(3);c.\u0275\u0275advance(),c.\u0275\u0275property("innerHTML",Ee.helper,c.\u0275\u0275sanitizeHtml)}}function ye(K,ce){if(1&K&&(c.\u0275\u0275elementStart(0,"label",8),c.\u0275\u0275text(1),c.\u0275\u0275template(2,oe,2,0,"span",9)(3,fe,2,1,"cd-helper",3),c.\u0275\u0275elementEnd()),2&K){const Ee=c.\u0275\u0275nextContext(2);c.\u0275\u0275attribute("for",Ee.id),c.\u0275\u0275advance(),c.\u0275\u0275textInterpolate1(" ",Ee.props.label," "),c.\u0275\u0275advance(),c.\u0275\u0275property("ngIf",Ee.props.required&&!0!==Ee.props.hideRequiredMarker),c.\u0275\u0275advance(),c.\u0275\u0275property("ngIf",Ee.helper)}}function je(K,ce){if(1&K&&(c.\u0275\u0275elementStart(0,"div",6),c.\u0275\u0275template(1,ye,4,4,"label",7),c.\u0275\u0275elementEnd()),2&K){const Ee=c.\u0275\u0275nextContext();c.\u0275\u0275advance(),c.\u0275\u0275property("ngIf",Ee.props.label&&!0!==Ee.props.hideLabel)}}function Le(K,ce){if(1&K&&(c.\u0275\u0275elementContainerStart(0),c.\u0275\u0275elementContainer(1,12),c.\u0275\u0275elementContainerEnd()),2&K){c.\u0275\u0275nextContext();const Ee=c.\u0275\u0275reference(1);c.\u0275\u0275advance(),c.\u0275\u0275property("ngTemplateOutlet",Ee)}}function Fe(K,ce){if(1&K&&(c.\u0275\u0275elementContainerStart(0),c.\u0275\u0275elementContainer(1,12),c.\u0275\u0275elementContainerEnd()),2&K){c.\u0275\u0275nextContext();const Ee=c.\u0275\u0275reference(1);c.\u0275\u0275advance(),c.\u0275\u0275property("ngTemplateOutlet",Ee)}}function te(K,ce){if(1&K&&(c.\u0275\u0275elementStart(0,"div",13),c.\u0275\u0275element(1,"formly-validation-message",14),c.\u0275\u0275elementEnd()),2&K){const Ee=c.\u0275\u0275nextContext();c.\u0275\u0275styleProp("display","block"),c.\u0275\u0275advance(),c.\u0275\u0275property("field",Ee.field)}}function le(K,ce){if(1&K&&(c.\u0275\u0275elementStart(0,"small",15),c.\u0275\u0275text(1),c.\u0275\u0275elementEnd()),2&K){const Ee=c.\u0275\u0275nextContext();c.\u0275\u0275advance(),c.\u0275\u0275textInterpolate(Ee.props.description)}}class ie extends P.FieldWrapper{get helper(){return(0,G.y)(this.field)?.help||""}static{this.\u0275fac=(()=>{let ce;return function(Ce){return(ce||(ce=c.\u0275\u0275getInheritedFactory(ie)))(Ce||ie)}})()}static{this.\u0275cmp=c.\u0275\u0275defineComponent({type:ie,selectors:[["cd-formly-input-wrapper"]],features:[c.\u0275\u0275InheritDefinitionFeature],decls:9,vars:8,consts:[["labelTemplate",""],["fieldComponent",""],[1,"mb-3"],[4,"ngIf"],["class","invalid-feedback",3,"display",4,"ngIf"],["class","form-text text-muted",4,"ngIf"],[1,"d-flex","align-items-center"],["class","form-label",4,"ngIf"],[1,"form-label"],["aria-hidden","true",4,"ngIf"],["aria-hidden","true"],[3,"innerHTML"],[3,"ngTemplateOutlet"],[1,"invalid-feedback"],[3,"field"],[1,"form-text","text-muted"]],template:function(Ee,Ce){1&Ee&&(c.\u0275\u0275template(0,je,2,1,"ng-template",null,0,c.\u0275\u0275templateRefExtractor),c.\u0275\u0275elementStart(2,"div",2),c.\u0275\u0275template(3,Le,2,1,"ng-container",3),c.\u0275\u0275elementContainer(4,null,1),c.\u0275\u0275template(6,Fe,2,1,"ng-container",3)(7,te,2,3,"div",4)(8,le,2,1,"small",5),c.\u0275\u0275elementEnd()),2&Ee&&(c.\u0275\u0275advance(2),c.\u0275\u0275classProp("form-floating","floating"===Ce.props.labelPosition)("has-error",Ce.showError),c.\u0275\u0275advance(),c.\u0275\u0275property("ngIf","floating"!==Ce.props.labelPosition),c.\u0275\u0275advance(3),c.\u0275\u0275property("ngIf","floating"===Ce.props.labelPosition),c.\u0275\u0275advance(),c.\u0275\u0275property("ngIf",Ce.showError),c.\u0275\u0275advance(),c.\u0275\u0275property("ngIf",Ce.props.description))},dependencies:[a.NgIf,a.NgTemplateOutlet,D.m,P.\u0275FormlyValidationMessage]})}}class _e{constructor(){this.onChange=ce=>{},this.onTouched=()=>{}}writeValue(ce){}registerOnChange(ce){this.onChange=ce}registerOnTouched(ce){this.onTouched=ce}static{this.\u0275fac=function(Ee){return new(Ee||_e)}}static{this.\u0275dir=c.\u0275\u0275defineDirective({type:_e,selectors:[["input","type","file"]],hostBindings:function(Ee,Ce){1&Ee&&c.\u0275\u0275listener("change",function(He){return Ce.onChange(He.target.files)})("input",function(He){return Ce.onChange(He.target.files)})("blur",function(){return Ce.onTouched()})},features:[c.\u0275\u0275ProvidersFeature([{provide:R.NG_VALUE_ACCESSOR,useExisting:_e,multi:!0}])]})}}class ue extends P.FieldType{static{this.\u0275fac=(()=>{let ce;return function(Ce){return(ce||(ce=c.\u0275\u0275getInheritedFactory(ue)))(Ce||ue)}})()}static{this.\u0275cmp=c.\u0275\u0275defineComponent({type:ue,selectors:[["cd-formly-file-type"]],features:[c.\u0275\u0275InheritDefinitionFeature],decls:1,vars:2,consts:[["type","file",3,"formControl","formlyAttributes"]],template:function(Ee,Ce){1&Ee&&c.\u0275\u0275element(0,"input",0),2&Ee&&c.\u0275\u0275property("formControl",Ce.formControl)("formlyAttributes",Ce.field)},dependencies:[R.DefaultValueAccessor,R.NgControlStatus,R.FormControlDirective,P.\u0275FormlyAttributes,_e]})}}class C{constructor(ce){this.iconService=ce,this.iconService.registerAll([E,f,u,F,p,S.A,_,v])}static{this.\u0275fac=function(Ee){return new(Ee||C)(c.\u0275\u0275inject(T.IconService))}}static{this.\u0275mod=c.\u0275\u0275defineNgModule({type:C})}static{this.\u0275inj=c.\u0275\u0275defineInjector({imports:[a.CommonModule,R.FormsModule,l.NgbDropdownModule,l.NgbTooltipModule,m.Y,b.h,e.RouterModule,R.ReactiveFormsModule,P.FormlyModule.forRoot({types:[{name:"array",component:g.o},{name:"object",component:N.G},{name:"input",component:O.R,wrappers:["input-wrapper"]},{name:"textarea",component:Q,wrappers:["input-wrapper"]},{name:"file",component:ue,wrappers:["input-wrapper"]}],validationMessages:[{name:"required",message:"This field is required"},{name:"json",message:"This field is not a valid json document"},{name:"rgwRoleName",message:'Role name must contain letters, numbers or the following valid special characters "_+=,.@-]+" (pattern: [0-9a-zA-Z_+=,.@-]+)'},{name:"rgwRolePath",message:'Role path must start and finish with a slash "/". (pattern: (/)|(/[!-~]+/))'},{name:"file_size",message:"File size must not exceed 4KiB"},{name:"rgwRoleSessionDuration",message:"This field must be a number and should be a value from 1 hour to 12 hour"}],wrappers:[{name:"input-wrapper",component:ie}]}),M.FormlyBootstrapModule,T.TableModule,T.ButtonModule,T.IconModule,T.CheckboxModule,T.PaginationModule,T.DialogModule,T.ThemeModule,T.SelectModule,T.TagModule,T.LayerModule]})}}},45843:(Z,A,r)=>{r.d(A,{N:()=>l});var a=r(87536);class l{constructor(E){this.template=E}static{this.\u0275fac=function(f){return new(f||l)(a.\u0275\u0275directiveInject(a.TemplateRef))}}static{this.\u0275dir=a.\u0275\u0275defineDirective({type:l,selectors:[["","cdTableDetail",""]]})}}},32295:(Z,A,r)=>{r.d(A,{j:()=>Q});var a=r(87536),l=r(29841),T=r.n(l),E=r(46045),f=r(91974),F=r(76218),S=r(3600);const v=G=>({x:G,y:65}),R=()=>({x:105,y:0});function P(G,D){if(1&G){const oe=a.\u0275\u0275getCurrentView();a.\u0275\u0275elementStart(0,"button",11),a.\u0275\u0275listener("click",function(){a.\u0275\u0275restoreView(oe);const ye=a.\u0275\u0275nextContext(2);return a.\u0275\u0275resetView(ye.useClickAction(ye.currentAction))}),a.\u0275\u0275elementStart(1,"span"),a.\u0275\u0275i18n(2,4),a.\u0275\u0275elementEnd(),a.\u0275\u0275namespaceSVG(),a.\u0275\u0275element(3,"svg",12),a.\u0275\u0275elementEnd()}if(2&G){const oe=a.\u0275\u0275nextContext(2);a.\u0275\u0275propertyInterpolate("title",oe.useDisableDesc(oe.currentAction)),a.\u0275\u0275property("cdsButton",oe.currentAction.buttonKind)("disabled",oe.disableSelectionAction(oe.currentAction))("routerLink",oe.useRouterLink(oe.currentAction))("preserveFragment",oe.currentAction.preserveFragment?"":null),a.\u0275\u0275attribute("aria-label",oe.currentAction.name),a.\u0275\u0275advance(2),a.\u0275\u0275i18nExp(oe.currentAction.name),a.\u0275\u0275i18nApply(2)}}function M(G,D){if(1&G){const oe=a.\u0275\u0275getCurrentView();a.\u0275\u0275elementStart(0,"cds-overflow-menu-option",17),a.\u0275\u0275listener("click",function(){a.\u0275\u0275restoreView(oe);const ye=a.\u0275\u0275nextContext().$implicit,je=a.\u0275\u0275nextContext(4);return a.\u0275\u0275resetView(je.useClickAction(ye))}),a.\u0275\u0275i18n(1,5),a.\u0275\u0275elementEnd()}if(2&G){const oe=a.\u0275\u0275nextContext().$implicit,fe=a.\u0275\u0275nextContext(4);a.\u0275\u0275classMap(fe.toClassName(oe)),a.\u0275\u0275propertyInterpolate("title",fe.useDisableDesc(oe)),a.\u0275\u0275property("routerLink",fe.useRouterLink(oe))("preserveFragment",oe.preserveFragment?"":null)("disabled",fe.disableSelectionAction(oe)),a.\u0275\u0275attribute("aria-label",oe.name),a.\u0275\u0275advance(),a.\u0275\u0275i18nExp(oe.name),a.\u0275\u0275i18nApply(1)}}function b(G,D){if(1&G&&(a.\u0275\u0275elementContainerStart(0),a.\u0275\u0275template(1,M,2,9,"cds-overflow-menu-option",16),a.\u0275\u0275elementContainerEnd()),2&G){const oe=D.$implicit,fe=a.\u0275\u0275nextContext(4);a.\u0275\u0275advance(),a.\u0275\u0275property("ngIf",fe.currentAction!==oe)}}function m(G,D){if(1&G&&a.\u0275\u0275template(0,b,2,1,"ng-container",15),2&G){const oe=a.\u0275\u0275nextContext(3);a.\u0275\u0275property("ngForOf",oe.dropDownActions)}}function g(G,D){if(1&G&&(a.\u0275\u0275elementContainerStart(0),a.\u0275\u0275elementStart(1,"button",13),a.\u0275\u0275namespaceSVG(),a.\u0275\u0275element(2,"svg",14),a.\u0275\u0275elementEnd(),a.\u0275\u0275template(3,m,1,1,"ng-template",null,3,a.\u0275\u0275templateRefExtractor),a.\u0275\u0275elementContainerEnd()),2&G){const oe=a.\u0275\u0275reference(4),fe=a.\u0275\u0275nextContext(2);a.\u0275\u0275advance(),a.\u0275\u0275property("offset",a.\u0275\u0275pureFunction1(5,v,-210))("cdsOverflowMenu",oe),a.\u0275\u0275attribute("aria-label",fe.dropDownOnly),a.\u0275\u0275advance(),a.\u0275\u0275property("cdsIcon",fe.icons.downArrow)("size",fe.icons.size16)}}function O(G,D){if(1&G&&(a.\u0275\u0275elementContainerStart(0),a.\u0275\u0275template(1,P,4,7,"button",9)(2,g,5,7,"ng-container",10),a.\u0275\u0275elementContainerEnd()),2&G){const oe=a.\u0275\u0275nextContext();a.\u0275\u0275advance(),a.\u0275\u0275property("ngIf",oe.currentAction&&oe.tableActions.length>0),a.\u0275\u0275advance(),a.\u0275\u0275property("ngIf",oe.primaryDropDown)}}function N(G,D){if(1&G&&(a.\u0275\u0275elementStart(0,"button",18),a.\u0275\u0275namespaceSVG(),a.\u0275\u0275element(1,"svg",19),a.\u0275\u0275elementEnd()),2&G){const oe=a.\u0275\u0275nextContext();a.\u0275\u0275property("cdsButton",oe.currentAction.buttonKind)}}function c(G,D){if(1&G){const oe=a.\u0275\u0275getCurrentView();a.\u0275\u0275elementStart(0,"cds-overflow-menu-option",17),a.\u0275\u0275listener("click",function(){a.\u0275\u0275restoreView(oe);const ye=a.\u0275\u0275nextContext().$implicit,je=a.\u0275\u0275nextContext(2);return a.\u0275\u0275resetView(je.useClickAction(ye))}),a.\u0275\u0275i18n(1,6),a.\u0275\u0275elementEnd()}if(2&G){const oe=a.\u0275\u0275nextContext().$implicit,fe=a.\u0275\u0275nextContext(2);a.\u0275\u0275classMap(fe.toClassName(oe)),a.\u0275\u0275propertyInterpolate("title",fe.useDisableDesc(oe)),a.\u0275\u0275property("routerLink",fe.useRouterLink(oe))("preserveFragment",oe.preserveFragment?"":null)("disabled",fe.disableSelectionAction(oe)),a.\u0275\u0275attribute("aria-label",oe.name),a.\u0275\u0275advance(),a.\u0275\u0275i18nExp(oe.name),a.\u0275\u0275i18nApply(1)}}function z(G,D){if(1&G&&(a.\u0275\u0275elementContainerStart(0),a.\u0275\u0275template(1,c,2,9,"cds-overflow-menu-option",16),a.\u0275\u0275elementContainerEnd()),2&G){const oe=D.$implicit,fe=a.\u0275\u0275nextContext(2);a.\u0275\u0275advance(),a.\u0275\u0275property("ngIf",fe.currentAction!==oe)}}function B(G,D){if(1&G&&(a.\u0275\u0275elementStart(0,"cds-overflow-menu",20),a.\u0275\u0275template(1,z,2,1,"ng-container",15),a.\u0275\u0275elementEnd()),2&G){const oe=a.\u0275\u0275nextContext(),fe=a.\u0275\u0275reference(6);a.\u0275\u0275property("customTrigger",fe)("flip",!0)("offset",a.\u0275\u0275pureFunction0(4,R)),a.\u0275\u0275advance(),a.\u0275\u0275property("ngForOf",oe.dropDownActions)}}function q(G,D){if(1&G&&(a.\u0275\u0275elementStart(0,"button",21)(1,"span"),a.\u0275\u0275i18n(2,7),a.\u0275\u0275elementEnd(),a.\u0275\u0275namespaceSVG(),a.\u0275\u0275element(3,"svg",19),a.\u0275\u0275elementEnd()),2&G){const oe=a.\u0275\u0275nextContext();a.\u0275\u0275advance(2),a.\u0275\u0275i18nExp(oe.dropDownOnly),a.\u0275\u0275i18nApply(2)}}class Q{constructor(){this.btnColor="accent",this.primaryDropDown=!1,this.dropDownActions=[],this.icons=E.FI}ngOnInit(){this.removeActionsWithNoPermissions(),this.onSelectionChange()}ngOnChanges(D){D.selection&&this.onSelectionChange()}onSelectionChange(){this.updateDropDownActions(),this.updateCurrentAction()}toClassName(D){return D.name.replace(/ /g,"-").replace(/[^a-z-]/gi,"").toLowerCase()}removeActionsWithNoPermissions(){if(!this.permission)return void(this.tableActions=[]);const D=Object.keys(this.permission).filter(oe=>this.permission[oe]);this.tableActions=this.tableActions.filter(oe=>D.includes(oe.permission))}updateDropDownActions(){this.dropDownActions=this.tableActions.filter(D=>D.visible?D.visible(this.selection):D)}updateCurrentAction(){this.dropDownOnly?this.currentAction=void 0:("create"===this.dropDownActions?.[0]?.permission||1===this.dropDownActions.length)&&(this.currentAction=this.dropDownActions[0])}useRouterLink(D){if(D.routerLink&&!this.disableSelectionAction(D))return T().isString(D.routerLink)?D.routerLink:D.routerLink()}disableSelectionAction(D){const oe=D.disable;if(oe)return!!oe(this.selection);const fe=D.permission,ye=this.selection.hasSingleSelection&&this.selection.first();return!(!["update","delete"].includes(fe)||ye&&!ye.cdExecuting)}useClickAction(D){return!this.disableSelectionAction(D)&&D.click&&D.click()}useDisableDesc(D){if(D.disable){const oe=D.disable(this.selection);return T().isString(oe)?oe:D.title?D.title:void 0}if(D.title)return D.title}static{this.\u0275fac=function(oe){return new(oe||Q)}}static{this.\u0275cmp=a.\u0275\u0275defineComponent({type:Q,selectors:[["cd-table-actions"]],inputs:{permission:"permission",selection:"selection",tableActions:"tableActions",btnColor:"btnColor",dropDownOnly:"dropDownOnly",primaryDropDown:"primaryDropDown"},features:[a.\u0275\u0275NgOnChangesFeature],decls:7,vars:2,consts:()=>{let D,oe,fe,ye;return D=$localize`:␟e6e29d12239d0998520e139e07d5850cd8546c66␟559818500867311163:${"\ufffd0\ufffd"}:INTERPOLATION:`,oe=$localize`:␟c905fdc2badafe72893c94f6799867028f9f628d␟2481180018305690696: ${"\ufffd0\ufffd"}:INTERPOLATION: `,fe=$localize`:␟381f8dfc8a23bdb90e5c77a154a80b591f84d62a␟1906550384624637940: ${"\ufffd0\ufffd"}:INTERPOLATION: `,ye=$localize`:␟84ba0a5273fba879e68024ac9d9d3ee1b420adf7␟397178088696167226:${"\ufffd0\ufffd"}:INTERPOLATION:`,[["caret",""],["dropDownOnlyTpl",""],["customTrigger",""],["overflowMenuTpl",""],D,oe,fe,ye,[4,"ngIf","ngIfElse"],["type","button","data-testid","primary-action",3,"cdsButton","title","disabled","routerLink","preserveFragment","click",4,"ngIf"],[4,"ngIf"],["type","button","data-testid","primary-action",3,"click","cdsButton","title","disabled","routerLink","preserveFragment"],["cdsIcon","add","size","16",1,"cds--btn__icon"],["data-testid","table-action-btn",1,"primary-dropdown-btn",3,"offset","cdsOverflowMenu"],[3,"cdsIcon","size"],[4,"ngFor","ngForOf"],["data-testid","table-action-option-btn",3,"class","title","routerLink","preserveFragment","disabled","click",4,"ngIf"],["data-testid","table-action-option-btn",3,"click","title","routerLink","preserveFragment","disabled"],[1,"caret-btn",3,"cdsButton"],["cdsIcon","caret--down","size","16",1,"cds--btn__icon"],["data-testid","table-action-btn",1,"d-flex","justify-content-end",3,"customTrigger","flip","offset"],["cdsButton","tertiary"]]},template:function(oe,fe){if(1&oe&&a.\u0275\u0275template(0,O,3,2,"ng-container",8)(1,N,2,1,"ng-template",null,0,a.\u0275\u0275templateRefExtractor)(3,B,2,5,"ng-template",null,1,a.\u0275\u0275templateRefExtractor)(5,q,4,1,"ng-template",null,2,a.\u0275\u0275templateRefExtractor),2&oe){const ye=a.\u0275\u0275reference(4);a.\u0275\u0275property("ngIf",!fe.dropDownOnly)("ngIfElse",ye)}},dependencies:[f.NgForOf,f.NgIf,F.RouterLink,S.Button,S.IconDirective,S.OverflowMenu,S.OverflowMenuDirective,S.OverflowMenuOption],styles:["button.disabled[_ngcontent-%COMP%]{color:#adb5bd;cursor:default!important;pointer-events:auto}button.dropdown-item[_ngcontent-%COMP%]:hover{background-color:#dee2e6}.action-icon[_ngcontent-%COMP%]{padding-right:1.5rem}.action-label[_ngcontent-%COMP%]{font-weight:700}  .cds--toolbar-content .cds--overflow-menu{inline-size:auto!important}.primary-dropdown-btn[_ngcontent-%COMP%]{align-items:center;background-color:#25828e;border:0;display:flex;fill:#fff;height:3rem;justify-content:center;width:3rem}"]})}}},37823:(Z,A,r)=>{r.d(A,{i:()=>p});var a=r(87536),l=r(29841),T=r.n(l),E=r(2148),f=r(71138),u=r(62847);const F=()=>[];class p{constructor(_){this.datePipe=_,this.autoReload=5e3,this.renderObjects=!1,this.appendParentKey=!0,this.hideEmpty=!1,this.hideKeys=[],this.columns=[],this.fetchData=new a.EventEmitter}ngOnInit(){this.columns=[{prop:"key",flexGrow:1,cellTransformation:E.x.bold},{prop:"value",flexGrow:3}],this.customCss&&(this.columns[1].cellTransformation=E.x.classAdding),this.fetchData.observers.length>0&&this.table.fetchData.subscribe(()=>{this.fetchData.emit()}),this.useData()}ngOnChanges(){this.useData()}useData(){if(!this.data)return;let _=this.makePairs(this.data);this.hideKeys&&(_=_.filter(v=>!this.hideKeys.includes(v.key))),this.tableData=_}makePairs(_){let v=[];if(_){if(T().isArray(_))v=this.makePairsFromArray(_);else{if(!T().isObject(_))throw new Error("Wrong data format");v=this.makePairsFromObject(_)}return v=v.map(R=>(R.value=this.convertValue(R.value),R)).filter(R=>null!==R.value),T().sortBy(this.renderObjects?this.insertFlattenObjects(v):v,"key")}}makePairsFromArray(_){let v=[];const R=_[0];if(T().isArray(R)){if(2!==R.length)throw new Error(`Array contains too many elements (${R.length}). Needs to be of type [string, any][]`);v=_.map(P=>({key:P[0],value:P[1]}))}else T().isObject(R)&&(v=T().has(R,"key")&&T().has(R,"value")?[..._]:_.reduce((P,M)=>P.concat(this.makePairsFromObject(M)),v));return v}makePairsFromObject(_){return Object.keys(_).map(v=>({key:v,value:_[v]}))}insertFlattenObjects(_){return T().flattenDeep(_.map(v=>{const R=v.value,P=T().isObject(R);return!P||T().isEmpty(R)?(P&&(v.value=""),v):this.splitItemIntoItems(v)}))}splitItemIntoItems(_){return this.makePairs(_.value).map(v=>(this.appendParentKey&&(v.key=_.key+" "+v.key),v))}convertValue(_){if(T().isArray(_)){if(T().isEmpty(_)&&this.hideEmpty)return null;_=_.map(v=>T().isObject(v)?JSON.stringify(v):v).join(", ")}else if(T().isObject(_)){if(this.hideEmpty&&T().isEmpty(_)||!this.renderObjects)return null}else if(T().isString(_)){if(""===_&&this.hideEmpty)return null;this.isDate(_)&&(_=this.datePipe.transform(_)||_)}return _}isDate(_){const v="[ -:.TZ]",R="\\d{2}"+v;return _.match(new RegExp("^\\d{4}"+v+R+R+R+R+R+"\\d*Z?$"))}static{this.\u0275fac=function(v){return new(v||p)(a.\u0275\u0275directiveInject(f.Q))}}static{this.\u0275cmp=a.\u0275\u0275defineComponent({type:p,selectors:[["cd-table-key-value"]],viewQuery:function(v,R){if(1&v&&a.\u0275\u0275viewQuery(u.O,7),2&v){let P;a.\u0275\u0275queryRefresh(P=a.\u0275\u0275loadQuery())&&(R.table=P.first)}},inputs:{data:"data",autoReload:"autoReload",renderObjects:"renderObjects",appendParentKey:"appendParentKey",hideEmpty:"hideEmpty",hideKeys:"hideKeys",customCss:"customCss"},outputs:{fetchData:"fetchData"},features:[a.\u0275\u0275NgOnChangesFeature],decls:3,vars:10,consts:[["table",""],[1,"table-scroller"],["columnMode","flex",3,"data","columns","toolHeader","autoReload","customCss","autoSave","header","footer","limit"]],template:function(v,R){1&v&&(a.\u0275\u0275elementStart(0,"div",1),a.\u0275\u0275element(1,"cd-table",2,0),a.\u0275\u0275elementEnd()),2&v&&(a.\u0275\u0275advance(),a.\u0275\u0275property("data",R.tableData||a.\u0275\u0275pureFunction0(9,F))("columns",R.columns)("toolHeader",!1)("autoReload",R.autoReload)("customCss",R.customCss)("autoSave",!1)("header",!1)("footer",!1)("limit",0))},dependencies:[u.O],styles:[".table-scroller[_ngcontent-%COMP%]{height:100%;max-height:40vh;overflow:auto}"]})}}},62847:(Z,A,r)=>{r.d(A,{O:()=>ae});var a=r(87536),l=r(3600),E=r(29841),f=r.n(E),u=r(95631),p=r(3912),S=r(2148),_=r(46045),v=r(48856),R=r(19380),P=r(15643),M=r(32295),b=r(45843),m=r(50619),O=r(67120),N=r(91974),z=r(53648),q=r(77317),G=r(5661),D=r(50889),oe=r(76218),ye=r(88427),je=r(1820),Le=r(18457),Fe=r(39113),te=r(71138),le=r(72358),ie=r(60980),_e=r(73231),ue=r(45757);const C=["tableCellBoldTpl"],K=["sparklineTpl"],ce=["routerLinkTpl"],Ee=["checkIconTpl"],Ce=["perSecondTpl"],Ue=["executingTpl"],He=["classAddingTpl"],it=["badgeTpl"],ct=["mapTpl"],tt=["truncateTpl"],Ge=["timeAgoTpl"],ze=["rowDetailsTpl"],ut=["rowSelectionTpl"],Pe=["pathTpl"],De=["tooltipTpl"],Ie=["copyTpl"],Qe=["defaultValueTpl"],qe=["rowDetailTpl"],ht=["tableActionTpl"],St=[[["",8,"table-actions"]]],Jt=[".table-actions"],Lt=()=>[],Zt=()=>({SINGLE:"1 item selected",MULTIPLE:"{{count}} items selected"}),zt=()=>({x:3,y:0}),Xt=U=>({"cds--toolbar-action__icon":!0,reload:U}),bt=U=>[U],ft=(U,L)=>[U,L];function Tt(U,L){if(1&U&&(a.\u0275\u0275elementStart(0,"p",41),a.\u0275\u0275i18n(1,22),a.\u0275\u0275elementEnd()),2&U){const y=a.\u0275\u0275nextContext(2);a.\u0275\u0275advance(),a.\u0275\u0275i18nExp(y.headerDescription),a.\u0275\u0275i18nApply(1)}}function nt(U,L){if(1&U&&(a.\u0275\u0275elementStart(0,"cds-table-header")(1,"h4",39),a.\u0275\u0275i18n(2,21),a.\u0275\u0275elementEnd(),a.\u0275\u0275template(3,Tt,2,1,"p",40),a.\u0275\u0275elementEnd()),2&U){const y=a.\u0275\u0275nextContext();a.\u0275\u0275advance(2),a.\u0275\u0275i18nExp(y.headerTitle),a.\u0275\u0275i18nApply(2),a.\u0275\u0275advance(),a.\u0275\u0275property("ngIf",y.headerDescription)}}function We(U,L){if(1&U){const y=a.\u0275\u0275getCurrentView();a.\u0275\u0275elementStart(0,"button",49),a.\u0275\u0275listener("click",function(){a.\u0275\u0275restoreView(y);const W=a.\u0275\u0275nextContext().$implicit,me=a.\u0275\u0275nextContext(3);return a.\u0275\u0275resetView(me.tableActions.useClickAction(W))}),a.\u0275\u0275i18n(1,23),a.\u0275\u0275elementEnd()}if(2&U){const y=a.\u0275\u0275nextContext().$implicit;a.\u0275\u0275nextContext(2);const x=a.\u0275\u0275reference(1),W=a.\u0275\u0275nextContext();a.\u0275\u0275classMap(W.tableActions.toClassName(y)),a.\u0275\u0275propertyInterpolate("title",W.tableActions.useDisableDesc(y)),a.\u0275\u0275property("tabindex",x.selected?0:-1)("routerLink",W.tableActions.useRouterLink(y))("preserveFragment",y.preserveFragment?"":null)("disabled",W.tableActions.disableSelectionAction(y)),a.\u0275\u0275attribute("aria-label",y.name),a.\u0275\u0275advance(),a.\u0275\u0275i18nExp(y.name),a.\u0275\u0275i18nApply(1)}}function at(U,L){if(1&U&&(a.\u0275\u0275elementContainerStart(0),a.\u0275\u0275template(1,We,2,10,"button",48),a.\u0275\u0275elementContainerEnd()),2&U){const y=L.$implicit,x=a.\u0275\u0275nextContext(3);a.\u0275\u0275advance(),a.\u0275\u0275property("ngIf",x.tableActions.currentAction!==y)}}function Et(U,L){if(1&U&&(a.\u0275\u0275elementStart(0,"cds-table-toolbar-actions"),a.\u0275\u0275template(1,at,2,1,"ng-container",47),a.\u0275\u0275elementEnd()),2&U){const y=a.\u0275\u0275nextContext(2);a.\u0275\u0275advance(),a.\u0275\u0275property("ngForOf",null==y.tableActions?null:y.tableActions.dropDownActions)}}function kt(U,L){if(1&U){const y=a.\u0275\u0275getCurrentView();a.\u0275\u0275elementStart(0,"cds-table-toolbar-search",50),a.\u0275\u0275twoWayListener("ngModelChange",function(W){a.\u0275\u0275restoreView(y);const me=a.\u0275\u0275nextContext(2);return a.\u0275\u0275twoWayBindingSet(me.search,W)||(me.search=W),a.\u0275\u0275resetView(W)}),a.\u0275\u0275listener("valueChange",function(W){a.\u0275\u0275restoreView(y);const me=a.\u0275\u0275nextContext(2);return a.\u0275\u0275resetView(me.updateFilter(W))})("clear",function(){a.\u0275\u0275restoreView(y);const W=a.\u0275\u0275nextContext(2);return a.\u0275\u0275resetView(W.onClearSearch())}),a.\u0275\u0275elementEnd()}if(2&U){const y=a.\u0275\u0275nextContext(2);a.\u0275\u0275property("expandable",!1),a.\u0275\u0275twoWayProperty("ngModel",y.search)}}function qt(U,L){if(1&U&&(a.\u0275\u0275elementContainerStart(0),a.\u0275\u0275elementStart(1,"option",55),a.\u0275\u0275text(2),a.\u0275\u0275elementEnd(),a.\u0275\u0275elementContainerEnd()),2&U){const y=L.$implicit,x=a.\u0275\u0275nextContext(3);a.\u0275\u0275advance(),a.\u0275\u0275property("value",y.column.name)("selected",y.column.name===x.selectedFilter.column.name),a.\u0275\u0275advance(),a.\u0275\u0275textInterpolate(y.column.name)}}function $t(U,L){1&U&&(a.\u0275\u0275elementStart(0,"option"),a.\u0275\u0275i18n(1,24),a.\u0275\u0275elementEnd())}function pt(U,L){if(1&U&&(a.\u0275\u0275elementContainerStart(0),a.\u0275\u0275elementStart(1,"option",55),a.\u0275\u0275text(2),a.\u0275\u0275elementEnd(),a.\u0275\u0275elementContainerEnd()),2&U){const y=L.$implicit,x=a.\u0275\u0275nextContext(3);a.\u0275\u0275advance(),a.\u0275\u0275property("value",y.raw)("selected",y.raw===(null==x.selectedFilter||null==x.selectedFilter.value?null:x.selectedFilter.value.raw)),a.\u0275\u0275advance(),a.\u0275\u0275textInterpolate(y.formatted)}}function Gt(U,L){if(1&U){const y=a.\u0275\u0275getCurrentView();a.\u0275\u0275elementContainerStart(0),a.\u0275\u0275elementStart(1,"div",51),a.\u0275\u0275namespaceSVG(),a.\u0275\u0275element(2,"svg",52),a.\u0275\u0275elementEnd(),a.\u0275\u0275namespaceHTML(),a.\u0275\u0275elementStart(3,"cds-select",53),a.\u0275\u0275listener("valueChange",function(W){a.\u0275\u0275restoreView(y);const me=a.\u0275\u0275nextContext(2);return a.\u0275\u0275resetView(me.onSelectFilter(W))}),a.\u0275\u0275template(4,qt,3,3,"ng-container",47),a.\u0275\u0275elementEnd(),a.\u0275\u0275elementStart(5,"cds-select",54),a.\u0275\u0275listener("valueChange",function(W){a.\u0275\u0275restoreView(y);const me=a.\u0275\u0275nextContext(2);return a.\u0275\u0275resetView(me.onChangeFilter(W))}),a.\u0275\u0275template(6,$t,2,0,"option",31)(7,pt,3,3,"ng-container",47),a.\u0275\u0275elementEnd(),a.\u0275\u0275elementContainerEnd()}if(2&U){const y=a.\u0275\u0275nextContext(2);a.\u0275\u0275advance(2),a.\u0275\u0275property("cdsIcon",y.icons.filter)("size",y.icons.size16),a.\u0275\u0275advance(2),a.\u0275\u0275property("ngForOf",y.columnFilters),a.\u0275\u0275advance(2),a.\u0275\u0275property("ngIf",!y.selectedFilter.value),a.\u0275\u0275advance(),a.\u0275\u0275property("ngForOf",y.selectedFilter.options)}}function xt(U,L){if(1&U){const y=a.\u0275\u0275getCurrentView();a.\u0275\u0275elementStart(0,"cds-icon-button",56),a.\u0275\u0275listener("click",function(){a.\u0275\u0275restoreView(y);const W=a.\u0275\u0275nextContext(2);return a.\u0275\u0275resetView(W.refreshBtn())}),a.\u0275\u0275namespaceSVG(),a.\u0275\u0275element(1,"svg",57),a.\u0275\u0275elementEnd()}if(2&U){const y=a.\u0275\u0275nextContext(2);a.\u0275\u0275property("kind",y.status.type)("disabled",!(null!=y.fetchData&&null!=y.fetchData.observers&&y.fetchData.observers.length))("title",y.status.msg)("description",y.status.msg),a.\u0275\u0275advance(),a.\u0275\u0275property("cdsIcon",y.icons.refresh)("size",y.icons.size16)("ngClass",a.\u0275\u0275pureFunction1(7,Xt,y.loadingIndicator))}}function Rt(U,L){if(1&U){const y=a.\u0275\u0275getCurrentView();a.\u0275\u0275elementStart(0,"cds-checkbox",60),a.\u0275\u0275listener("checkedChange",function(){a.\u0275\u0275restoreView(y);const W=a.\u0275\u0275nextContext().$implicit,me=a.\u0275\u0275nextContext(3);return a.\u0275\u0275resetView(me.toggleColumn(W))}),a.\u0275\u0275text(1),a.\u0275\u0275elementEnd()}if(2&U){const y=a.\u0275\u0275nextContext().$implicit,x=a.\u0275\u0275nextContext(3);a.\u0275\u0275propertyInterpolate2("id","",y.prop,"",x.tableName,""),a.\u0275\u0275propertyInterpolate2("name","",y.prop,"",x.tableName,""),a.\u0275\u0275property("checked",!(null!=y&&y.isHidden)),a.\u0275\u0275advance(),a.\u0275\u0275textInterpolate1("",y.name," ")}}function Tn(U,L){if(1&U&&(a.\u0275\u0275elementContainerStart(0),a.\u0275\u0275template(1,Rt,2,8,"cds-checkbox",59),a.\u0275\u0275elementContainerEnd()),2&U){const y=L.$implicit;a.\u0275\u0275advance(),a.\u0275\u0275property("ngIf",!(null!=y&&y.isInvisible))}}function st(U,L){if(1&U){const y=a.\u0275\u0275getCurrentView();a.\u0275\u0275elementStart(0,"div",58),a.\u0275\u0275listener("click",function(W){return a.\u0275\u0275restoreView(y),a.\u0275\u0275resetView(W.stopPropagation())}),a.\u0275\u0275template(1,Tn,2,1,"ng-container",47),a.\u0275\u0275elementEnd()}if(2&U){const y=a.\u0275\u0275nextContext(2);a.\u0275\u0275property("cdsTheme",y.theme),a.\u0275\u0275advance(),a.\u0275\u0275property("ngForOf",y.localColumns)}}function Nn(U,L){if(1&U){const y=a.\u0275\u0275getCurrentView();a.\u0275\u0275elementStart(0,"cds-table-toolbar",42,19),a.\u0275\u0275listener("cancel",function(){a.\u0275\u0275restoreView(y);const W=a.\u0275\u0275nextContext();return a.\u0275\u0275resetView(W.onBatchActionsCancel())}),a.\u0275\u0275template(2,Et,2,1,"cds-table-toolbar-actions",31),a.\u0275\u0275elementStart(3,"cds-table-toolbar-content"),a.\u0275\u0275template(4,kt,1,2,"cds-table-toolbar-search",43)(5,Gt,8,5,"ng-container",31)(6,xt,2,9,"cds-icon-button",44),a.\u0275\u0275elementStart(7,"button",45),a.\u0275\u0275namespaceSVG(),a.\u0275\u0275element(8,"svg",46),a.\u0275\u0275elementEnd(),a.\u0275\u0275template(9,st,2,2,"ng-template",null,20,a.\u0275\u0275templateRefExtractor),a.\u0275\u0275projection(11),a.\u0275\u0275elementEnd()()}if(2&U){const y=a.\u0275\u0275reference(10),x=a.\u0275\u0275nextContext();a.\u0275\u0275property("model","multiClick"===x.selectionType?x.model:a.\u0275\u0275pureFunction0(11,Lt))("batchText",a.\u0275\u0275pureFunction0(12,Zt)),a.\u0275\u0275advance(2),a.\u0275\u0275property("ngIf",(null==x.tableActions?null:x.tableActions.dropDownActions.length)>0),a.\u0275\u0275advance(2),a.\u0275\u0275property("ngIf",x.searchField),a.\u0275\u0275advance(),a.\u0275\u0275property("ngIf",0!==x.columnFilters.length),a.\u0275\u0275advance(),a.\u0275\u0275property("ngIf",(null==x.fetchData||null==x.fetchData.observers?null:x.fetchData.observers.length)>0),a.\u0275\u0275advance(),a.\u0275\u0275property("cdsOverflowMenu",y)("flip",!0)("offset",a.\u0275\u0275pureFunction0(13,zt)),a.\u0275\u0275advance(),a.\u0275\u0275property("cdsIcon",x.icons.dataTable)("size",x.icons.size16)}}function jt(U,L){if(1&U){const y=a.\u0275\u0275getCurrentView();a.\u0275\u0275elementStart(0,"cds-tag",65)(1,"span",66),a.\u0275\u0275text(2),a.\u0275\u0275elementEnd(),a.\u0275\u0275elementStart(3,"button",67),a.\u0275\u0275listener("click",function(){a.\u0275\u0275restoreView(y);const W=a.\u0275\u0275nextContext().$implicit,me=a.\u0275\u0275nextContext(2);return a.\u0275\u0275resetView(me.onChangeFilter(W))}),a.\u0275\u0275namespaceSVG(),a.\u0275\u0275element(4,"svg",52),a.\u0275\u0275elementEnd()()}if(2&U){const y=a.\u0275\u0275nextContext().$implicit,x=a.\u0275\u0275nextContext(2);a.\u0275\u0275advance(2),a.\u0275\u0275textInterpolate2("",y.column.name,": ",y.value.formatted,""),a.\u0275\u0275advance(2),a.\u0275\u0275property("cdsIcon",x.icons.destroy)("size",x.icons.size16)}}function dn(U,L){if(1&U&&(a.\u0275\u0275elementContainerStart(0),a.\u0275\u0275template(1,jt,5,4,"cds-tag",64),a.\u0275\u0275elementContainerEnd()),2&U){const y=L.$implicit;a.\u0275\u0275advance(),a.\u0275\u0275property("ngIf",y.value)}}function Nt(U,L){if(1&U){const y=a.\u0275\u0275getCurrentView();a.\u0275\u0275elementStart(0,"div",61)(1,"div",62),a.\u0275\u0275template(2,dn,2,1,"ng-container",47),a.\u0275\u0275elementStart(3,"button",63),a.\u0275\u0275listener("click",function(W){a.\u0275\u0275restoreView(y);const me=a.\u0275\u0275nextContext();return a.\u0275\u0275resetView(me.onClearFilters(W))}),a.\u0275\u0275elementContainerStart(4),a.\u0275\u0275i18n(5,25),a.\u0275\u0275elementContainerEnd(),a.\u0275\u0275elementEnd()()()}if(2&U){const y=a.\u0275\u0275nextContext();a.\u0275\u0275advance(2),a.\u0275\u0275property("ngForOf",y.columnFilters)}}function Fn(U,L){if(1&U){const y=a.\u0275\u0275getCurrentView();a.\u0275\u0275elementStart(0,"tr",72),a.\u0275\u0275listener("selectRow",function(){a.\u0275\u0275restoreView(y);const W=a.\u0275\u0275nextContext().index,me=a.\u0275\u0275nextContext(2);return a.\u0275\u0275resetView(me.onSelect(W))})("deselectRow",function(){a.\u0275\u0275restoreView(y);const W=a.\u0275\u0275nextContext().index,me=a.\u0275\u0275nextContext(2);return a.\u0275\u0275resetView(me.onDeselect(W))})("expandRow",function(){a.\u0275\u0275restoreView(y);const W=a.\u0275\u0275nextContext().index,me=a.\u0275\u0275nextContext(2);return a.\u0275\u0275resetView(me.model.expandRow(W,!me.model.isRowExpanded(W)))})("rowClick",function(){a.\u0275\u0275restoreView(y);const W=a.\u0275\u0275nextContext().index,me=a.\u0275\u0275nextContext(2);return a.\u0275\u0275resetView(me.onSelect(W))}),a.\u0275\u0275elementEnd()}if(2&U){const y=a.\u0275\u0275nextContext(),x=y.$implicit,W=y.index,me=a.\u0275\u0275nextContext(2);a.\u0275\u0275property("model",me.model)("row",x)("size",me.size)("selected",me.model.isRowSelected(W))("expandable",me.model.isRowExpandable(W))("expanded",me.model.isRowExpanded(W))("showSelectionColumn",me.showSelectionColumn)("skeleton",me.loadingIndicator)}}function Wt(U,L){if(1&U&&a.\u0275\u0275element(0,"tr",73),2&U){const y=a.\u0275\u0275nextContext(),x=y.$implicit,W=y.index,me=a.\u0275\u0275nextContext(2);a.\u0275\u0275property("row",x)("expanded",me.model.isRowExpanded(W))("skeleton",me.loadingIndicator)}}function j(U,L){if(1&U&&a.\u0275\u0275element(0,"tr",75),2&U){const y=L.$implicit,x=a.\u0275\u0275nextContext(2).index,W=a.\u0275\u0275nextContext(2);a.\u0275\u0275property("model",W.model)("showSelectionColumnCheckbox",!1)("showSelectionColumn",W.showSelectionColumn)("row",y)("size",W.size)("selected",W.model.isRowSelected(x))("skeleton",W.loadingIndicator)}}function he(U,L){if(1&U&&(a.\u0275\u0275elementContainerStart(0),a.\u0275\u0275template(1,j,1,7,"tr",74),a.\u0275\u0275elementContainerEnd()),2&U){const y=a.\u0275\u0275nextContext().$implicit,x=a.\u0275\u0275nextContext(2);a.\u0275\u0275advance(),a.\u0275\u0275property("ngForOf",x.firstExpandedDataInRow(y))}}function Y(U,L){if(1&U&&(a.\u0275\u0275elementContainerStart(0),a.\u0275\u0275template(1,Fn,1,8,"tr",70)(2,Wt,1,3,"tr",71)(3,he,2,1,"ng-container",31),a.\u0275\u0275elementContainerEnd()),2&U){const y=L.$implicit,x=L.index,W=a.\u0275\u0275nextContext(2);a.\u0275\u0275advance(),a.\u0275\u0275property("ngIf",!W.model.isRowFiltered(x)),a.\u0275\u0275advance(),a.\u0275\u0275property("ngIf",W.model.isRowExpandable(x)&&!W.shouldExpandAsTable(y)&&!W.model.isRowFiltered(x)),a.\u0275\u0275advance(),a.\u0275\u0275property("ngIf",W.model.isRowExpandable(x)&&W.shouldExpandAsTable(y)&&W.model.isRowExpanded(x)&&!W.model.isRowFiltered(x))}}function lt(U,L){if(1&U&&(a.\u0275\u0275elementStart(0,"tbody",68),a.\u0275\u0275template(1,Y,4,3,"ng-container",69),a.\u0275\u0275elementEnd()),2&U){const y=a.\u0275\u0275nextContext();a.\u0275\u0275property("enableSingleSelect",y.enableSingleSelect)("skeleton",y.loadingIndicator),a.\u0275\u0275advance(),a.\u0275\u0275property("ngForOf",y.model.data)("ngForTrackBy",y.trackByFn.bind(y,y.identifier))}}function vn(U,L){if(1&U&&(a.\u0275\u0275elementStart(0,"td",78)(1,"span",79),a.\u0275\u0275i18n(2,26),a.\u0275\u0275elementEnd()()),2&U){const y=a.\u0275\u0275nextContext(2);a.\u0275\u0275attribute("colspan",y.visibleColumns.length+2)}}function jn(U,L){if(1&U&&(a.\u0275\u0275elementStart(0,"tbody")(1,"tr",76),a.\u0275\u0275template(2,vn,3,1,"td",77),a.\u0275\u0275elementEnd()()),2&U){const y=a.\u0275\u0275nextContext();a.\u0275\u0275advance(2),a.\u0275\u0275property("ngIf",!(null!=y.rows&&y.rows.length||y.loadingIndicator))}}function un(U,L){}function Ae(U,L){if(1&U){const y=a.\u0275\u0275getCurrentView();a.\u0275\u0275elementStart(0,"div",81),a.\u0275\u0275listener("mouseenter",function(W){a.\u0275\u0275restoreView(y);const me=a.\u0275\u0275nextContext(2);return a.\u0275\u0275resetView(me.onRowDetailHover(W))}),a.\u0275\u0275template(1,un,0,0,"ng-template",82),a.\u0275\u0275elementEnd()}if(2&U){const y=a.\u0275\u0275nextContext(2);a.\u0275\u0275advance(),a.\u0275\u0275property("ngTemplateOutlet",y.rowDetail.template)}}function pn(U,L){if(1&U&&a.\u0275\u0275template(0,Ae,2,1,"div",80),2&U){const y=L.data,x=a.\u0275\u0275nextContext();a.\u0275\u0275property("ngIf",y[x.identifier]===(null==x.expanded?null:x.expanded[x.identifier]))}}function Mn(U,L){if(1&U&&(a.\u0275\u0275elementStart(0,"span",83),a.\u0275\u0275text(1),a.\u0275\u0275elementEnd()),2&U){const y=L.data.value,x=L.data.column;a.\u0275\u0275property("ngClass",null==x?null:x.cellClass),a.\u0275\u0275advance(),a.\u0275\u0275textInterpolate(y)}}function mn(U,L){if(1&U){const y=a.\u0275\u0275getCurrentView();a.\u0275\u0275elementStart(0,"cds-overflow-menu-option",87),a.\u0275\u0275listener("click",function(){a.\u0275\u0275restoreView(y);const W=a.\u0275\u0275nextContext().$implicit,me=a.\u0275\u0275nextContext(3);return a.\u0275\u0275resetView(me.tableActions.useClickAction(W))}),a.\u0275\u0275i18n(1,27),a.\u0275\u0275elementEnd()}if(2&U){const y=a.\u0275\u0275nextContext().$implicit,x=a.\u0275\u0275nextContext(3);a.\u0275\u0275classMap(x.tableActions.toClassName(y)),a.\u0275\u0275propertyInterpolate("title",x.tableActions.useDisableDesc(y)),a.\u0275\u0275property("routerLink",x.tableActions.useRouterLink(y))("preserveFragment",y.preserveFragment?"":null)("disabled",x.tableActions.disableSelectionAction(y)),a.\u0275\u0275attribute("aria-label",y.name),a.\u0275\u0275advance(),a.\u0275\u0275i18nExp(y.name),a.\u0275\u0275i18nApply(1)}}function Kt(U,L){if(1&U&&(a.\u0275\u0275elementContainerStart(0),a.\u0275\u0275template(1,mn,2,9,"cds-overflow-menu-option",86),a.\u0275\u0275elementContainerEnd()),2&U){const y=L.$implicit,x=a.\u0275\u0275nextContext(3);a.\u0275\u0275advance(),a.\u0275\u0275property("ngIf",x.tableActions.currentAction!==y)}}function pe(U,L){if(1&U&&(a.\u0275\u0275elementStart(0,"cds-overflow-menu",85),a.\u0275\u0275template(1,Kt,2,1,"ng-container",47),a.\u0275\u0275elementEnd()),2&U){const y=a.\u0275\u0275nextContext(2);a.\u0275\u0275property("flip",!0),a.\u0275\u0275advance(),a.\u0275\u0275property("ngForOf",null==y.tableActions?null:y.tableActions.dropDownActions)}}function Ot(U,L){if(1&U&&a.\u0275\u0275template(0,pe,2,2,"cds-overflow-menu",84),2&U){const y=a.\u0275\u0275nextContext();a.\u0275\u0275property("ngIf",(null==y.tableActions?null:y.tableActions.dropDownActions.length)>1&&"multiClick"!==y.selectionType)}}function Wn(U,L){if(1&U&&(a.\u0275\u0275elementStart(0,"strong"),a.\u0275\u0275text(1),a.\u0275\u0275elementEnd()),2&U){const y=L.data.value;a.\u0275\u0275advance(),a.\u0275\u0275textInterpolate(y)}}function Kn(U,L){if(1&U&&(a.\u0275\u0275elementStart(0,"div",88),a.\u0275\u0275element(1,"cd-sparkline",89),a.\u0275\u0275elementEnd()),2&U){const y=L.data.row,x=L.data.value;a.\u0275\u0275advance(),a.\u0275\u0275property("data",x)("isBinary",y.cdIsBinary)}}function In(U,L){if(1&U&&(a.\u0275\u0275elementStart(0,"a",90),a.\u0275\u0275text(1),a.\u0275\u0275elementEnd()),2&U){const y=L.data.row,x=L.data.value;a.\u0275\u0275property("routerLink",a.\u0275\u0275pureFunction1(3,bt,y.cdLink))("queryParams",y.cdParams),a.\u0275\u0275advance(),a.\u0275\u0275textInterpolate(x)}}function Qn(U,L){if(1&U&&(a.\u0275\u0275element(0,"i",91),a.\u0275\u0275pipe(1,"boolean")),2&U){const y=L.data.value,x=a.\u0275\u0275nextContext();a.\u0275\u0275property("ngClass",a.\u0275\u0275pureFunction1(4,bt,x.icons.check))("hidden",!a.\u0275\u0275pipeBind1(1,2,y))}}function Yn(U,L){if(1&U&&(a.\u0275\u0275text(0),a.\u0275\u0275pipe(1,"dimless")),2&U){const y=L.data.value;a.\u0275\u0275textInterpolate1(" ",a.\u0275\u0275pipeBind1(1,1,y)," /s\n")}}function Jn(U,L){if(1&U&&a.\u0275\u0275element(0,"i",83),2&U){const y=a.\u0275\u0275nextContext(2);a.\u0275\u0275property("ngClass",a.\u0275\u0275pureFunction2(1,ft,y.icons.spinner,y.icons.spin))}}function Zn(U,L){if(1&U&&(a.\u0275\u0275elementStart(0,"span",83),a.\u0275\u0275text(1),a.\u0275\u0275elementEnd()),2&U){const y=a.\u0275\u0275nextContext(),x=y.data.column,W=y.data.row;a.\u0275\u0275property("ngClass",null!=x&&null!=x.customTemplateConfig&&x.customTemplateConfig.executingClass?null==x?null:x.customTemplateConfig.executingClass:"text-muted italic"),a.\u0275\u0275advance(),a.\u0275\u0275textInterpolate1("(",W.cdExecuting,")")}}function vo(U,L){if(1&U&&(a.\u0275\u0275template(0,Jn,1,4,"i",92),a.\u0275\u0275elementStart(1,"span",83),a.\u0275\u0275text(2),a.\u0275\u0275elementEnd(),a.\u0275\u0275template(3,Zn,2,2,"span",92)),2&U){const y=L.data.column,x=L.data.row,W=L.data.value;a.\u0275\u0275property("ngIf",x.cdExecuting),a.\u0275\u0275advance(),a.\u0275\u0275property("ngClass",null==y||null==y.customTemplateConfig?null:y.customTemplateConfig.valueClass),a.\u0275\u0275advance(),a.\u0275\u0275textInterpolate1(" ",W," "),a.\u0275\u0275advance(),a.\u0275\u0275property("ngIf",x.cdExecuting)}}function fn(U,L){if(1&U&&(a.\u0275\u0275elementStart(0,"span"),a.\u0275\u0275pipe(1,"pipeFunction"),a.\u0275\u0275text(2),a.\u0275\u0275elementEnd()),2&U){const y=L.data.value,x=a.\u0275\u0275nextContext();a.\u0275\u0275classMap(a.\u0275\u0275pipeBind3(1,4,y,x.useCustomClass,x)),a.\u0275\u0275advance(2),a.\u0275\u0275textInterpolate(y)}}function Qt(U,L){if(1&U&&(a.\u0275\u0275elementStart(0,"span",94),a.\u0275\u0275text(1),a.\u0275\u0275elementEnd()),2&U){const y=a.\u0275\u0275nextContext().$implicit,x=a.\u0275\u0275nextContext().data.column;a.\u0275\u0275property("ngClass",null!=x&&null!=x.customTemplateConfig&&x.customTemplateConfig.map&&null!=x&&null!=x.customTemplateConfig&&null!=x.customTemplateConfig.map[y]&&x.customTemplateConfig.map[y].class?x.customTemplateConfig.map[y].class:null!=x&&null!=x.customTemplateConfig&&x.customTemplateConfig.class?x.customTemplateConfig.class:"badge-primary"),a.\u0275\u0275advance(),a.\u0275\u0275textInterpolate1(" ",null!=x&&null!=x.customTemplateConfig&&x.customTemplateConfig.map&&null!=x&&null!=x.customTemplateConfig&&null!=x.customTemplateConfig.map[y]&&x.customTemplateConfig.map[y].value?x.customTemplateConfig.map[y].value:null!=x&&null!=x.customTemplateConfig&&x.customTemplateConfig.prefix?x.customTemplateConfig.prefix+y:y," ")}}function Rn(U,L){1&U&&(a.\u0275\u0275elementStart(0,"span"),a.\u0275\u0275text(1,"\xa0"),a.\u0275\u0275elementEnd())}function En(U,L){if(1&U&&(a.\u0275\u0275elementStart(0,"span"),a.\u0275\u0275template(1,Qt,2,2,"span",93)(2,Rn,2,0,"span",31),a.\u0275\u0275elementEnd()),2&U){const y=L.$implicit,x=L.last,W=a.\u0275\u0275nextContext().data.column;a.\u0275\u0275advance(),a.\u0275\u0275property("ngIf",null!=W&&null!=W.customTemplateConfig&&W.customTemplateConfig.map&&null!=W&&null!=W.customTemplateConfig&&null!=W.customTemplateConfig.map[y]&&W.customTemplateConfig.map[y].value?W.customTemplateConfig.map[y].value:null!=W&&null!=W.customTemplateConfig&&W.customTemplateConfig.prefix?W.customTemplateConfig.prefix+y:y),a.\u0275\u0275advance(),a.\u0275\u0275property("ngIf",!x)}}function It(U,L){if(1&U&&(a.\u0275\u0275template(0,En,3,2,"span",47),a.\u0275\u0275pipe(1,"array")),2&U){const y=L.data.value;a.\u0275\u0275property("ngForOf",a.\u0275\u0275pipeBind1(1,1,y))}}function An(U,L){if(1&U&&(a.\u0275\u0275elementStart(0,"span"),a.\u0275\u0275text(1),a.\u0275\u0275pipe(2,"map"),a.\u0275\u0275elementEnd()),2&U){const y=L.data.column,x=L.data.value;a.\u0275\u0275advance(),a.\u0275\u0275textInterpolate(a.\u0275\u0275pipeBind2(2,1,x,null==y?null:y.customTemplateConfig))}}function Dn(U,L){if(1&U&&(a.\u0275\u0275elementStart(0,"span")(1,"span",95),a.\u0275\u0275i18nAttributes(2,29),a.\u0275\u0275i18n(3,28),a.\u0275\u0275elementEnd()()),2&U){const y=L.$implicit,x=a.\u0275\u0275nextContext(),W=x.data.column,me=x.data.value;a.\u0275\u0275advance(),a.\u0275\u0275classMap(null!=W&&null!=W.customTemplateConfig&&W.customTemplateConfig.map&&null!=W&&null!=W.customTemplateConfig&&null!=W.customTemplateConfig.map[y]&&W.customTemplateConfig.map[y].class?W.customTemplateConfig.map[y].class:""),a.\u0275\u0275i18nExp(null!=W&&null!=W.customTemplateConfig&&W.customTemplateConfig.map&&null!=W&&null!=W.customTemplateConfig&&null!=W.customTemplateConfig.map[y]&&W.customTemplateConfig.map[y].tooltip?W.customTemplateConfig.map[y].tooltip:""),a.\u0275\u0275i18nApply(2),a.\u0275\u0275advance(2),a.\u0275\u0275i18nExp(me),a.\u0275\u0275i18nApply(3)}}function qn(U,L){if(1&U&&(a.\u0275\u0275template(0,Dn,4,5,"span",47),a.\u0275\u0275pipe(1,"array")),2&U){const y=L.data.value;a.\u0275\u0275property("ngForOf",a.\u0275\u0275pipeBind1(1,1,y))}}function eo(U,L){if(1&U&&(a.\u0275\u0275elementStart(0,"span",96),a.\u0275\u0275text(1),a.\u0275\u0275pipe(2,"truncate"),a.\u0275\u0275elementEnd()),2&U){const y=L.data.column,x=L.data.value;a.\u0275\u0275property("title",x),a.\u0275\u0275advance(),a.\u0275\u0275textInterpolate(a.\u0275\u0275pipeBind3(2,2,x,null==y||null==y.customTemplateConfig?null:y.customTemplateConfig.length,null==y||null==y.customTemplateConfig?null:y.customTemplateConfig.omission))}}function to(U,L){if(1&U){const y=a.\u0275\u0275getCurrentView();a.\u0275\u0275elementStart(0,"a",97),a.\u0275\u0275listener("click",function(W){const me=a.\u0275\u0275restoreView(y),be=me.data.row,we=me.data.expanded,dt=a.\u0275\u0275nextContext();return a.\u0275\u0275resetView(dt.toggleExpandRow(be,we,W))}),a.\u0275\u0275elementEnd()}if(2&U){const y=L.data.expanded;a.\u0275\u0275classProp("expand-collapse-icon-right",!y)("expand-collapse-icon-down",y)}}function no(U,L){if(1&U&&(a.\u0275\u0275elementStart(0,"span",96),a.\u0275\u0275pipe(1,"cdDate"),a.\u0275\u0275text(2),a.\u0275\u0275pipe(3,"relativeDate"),a.\u0275\u0275elementEnd()),2&U){const y=L.data.value;a.\u0275\u0275property("title",a.\u0275\u0275pipeBind1(1,2,y)),a.\u0275\u0275advance(2),a.\u0275\u0275textInterpolate(a.\u0275\u0275pipeBind1(3,4,y))}}function en(U,L){if(1&U&&(a.\u0275\u0275element(0,"cd-copy-2-clipboard-button",99),a.\u0275\u0275pipe(1,"path")),2&U){const y=a.\u0275\u0275nextContext().data.value;a.\u0275\u0275propertyInterpolate("text",a.\u0275\u0275pipeBind1(1,3,y)),a.\u0275\u0275property("source",y)("byId",!1)}}function oo(U,L){if(1&U&&a.\u0275\u0275template(0,en,2,5,"cd-copy-2-clipboard-button",98),2&U){const y=L.data.value;a.\u0275\u0275property("ngIf",y)}}function gn(U,L){if(1&U&&a.\u0275\u0275element(0,"cd-copy-2-clipboard-button",101),2&U){const y=a.\u0275\u0275nextContext().data.value,x=a.\u0275\u0275nextContext();a.\u0275\u0275property("source",y)("byId",!1)("size",x.lg)("text",y)}}function ge(U,L){if(1&U&&a.\u0275\u0275template(0,gn,1,4,"cd-copy-2-clipboard-button",100),2&U){const y=L.data.value;a.\u0275\u0275property("ngIf",y)}}class ae{set expanded(L){this._expanded=L,this.setExpandedRow.emit(L)}get expanded(){return this._expanded}get sortable(){return!!this.userConfig?.sorts}get noData(){return!this.rows?.length&&!this.loadingIndicator}get showSelectionColumn(){return"multiClick"===this.selectionType}get enableSingleSelect(){return"single"===this.selectionType}set localColumns(L){this._localColumns=this.getTableColumnsWithNames(L)}get localColumns(){return this._localColumns}set tableColumns(L){const y=this.getTableColumnsWithNames(L);this._tableColumns=y,this._tableHeaders.next(y)}get tableColumns(){return this._tableColumns}get visibleColumns(){return this.localColumns?.filter?.(L=>!L.isHidden)}getTableColumnsWithNames(L){return L.map(y=>y?.name?y:{...y,name:y?.prop?this.deCamelCase(String(y?.prop)):""})}deCamelCase(L){return L.replace(/([A-Z])/g,y=>` ${y}`).replace(/^./,y=>y.toUpperCase())}set rows(L){this._rows=L,this.doPagination({page:this.model.currentPage,size:this.model.pageLength,filteredData:L}),this.model.totalDataLength=this.serverSide?this.count:L?.length||0}get rows(){return this._rows}get columnFiltered(){return f().some(this.columnFilters,L=>void 0!==L.value)}constructor(L,y){this.cdRef=L,this.timerService=y,this.columnMode="flex",this.onlyActionHeader=!1,this.toolHeader=!0,this.searchField=!0,this.header=!0,this.footer=!0,this.limit=10,this.maxLimit=9999,this.hasDetails=!1,this.showInlineActions=!0,this.autoReload=5e3,this.identifier="id",this.forceIdentifier=!1,this.selectionType=void 0,this.updateSelectionOnRefresh="onChange",this.updateExpandedOnRefresh="onChange",this.autoSave=!0,this.searchableObjects=!1,this.extraFilterableColumns=[],this.status=new p.F,this.serverSide=!1,this.size="md",this.count=0,this.fetchData=new a.EventEmitter,this.updateSelection=new a.EventEmitter,this.setExpandedRow=new a.EventEmitter,this.columnFiltersChanged=new a.EventEmitter,this.selection=new R.y,this._expanded=void 0,this.selectAllCheckbox=!1,this.selectAllCheckboxSomeSelected=!1,this.model=new l.TableModel,this.icons=_.FI,this.cellTemplates={},this.search="",this._rows=[],this._dataset=new u.BehaviorSubject([]),this._tableHeaders=new u.BehaviorSubject([]),this._subscriptions=new u.Subscription,this.loadingIndicator=!0,this.userConfig={},this.localStorage=window.localStorage,this.updating=!1,this.columnFilters=[],this.previousRows=new Map,this.paginate=f().cond([[x=>x.page<=1,x=>({start:0,end:x.size})],[x=>x.page>=x.filteredData.length,x=>({start:0,end:x.filteredData.length})],[x=>x.page>=x.filteredData.length&&x.page*x.size>x.filteredData.length,x=>({start:0,end:x.filteredData.length})],[x=>x.page*x.size>x.filteredData.length,x=>({start:(x.page-1)*x.size,end:x.filteredData.length})],[f().stubTrue,x=>({start:(x.page-1)*x.size,end:x.page*x.size})]])}static prepareSearch(L){return(L=L.toLowerCase().replace(/,/g,"")).match(/['"][^'"]+['"]/)&&(L=L.replace(/['"][^'"]+['"]/g,y=>y.replace(/(['"])([^'"]+)(['"])/g,"$2").replace(/ /g,"+"))),L.split(" ").filter(y=>y)}ngAfterViewInit(){this.showInlineActions&&this.tableActions?.dropDownActions?.length&&(this.tableColumns=[...this.tableColumns,{name:"",prop:"",className:"w25",sortable:!1,cellTemplate:this.tableActionTpl}]);const L=this._tableHeaders.pipe((0,m.map)(be=>be.map(we=>new l.TableHeaderItem({data:we?.headerTemplate?{...we}:we.name,title:we.name,template:we?.headerTemplate,className:f().isString(we?.cellClass)?`${we?.cellClass}`:`${we?.className}`,visible:!we.isHidden,sortable:!!f().isNil(we.sortable)||we.sortable})))).subscribe({next:be=>this.model.header=be}),y=this._dataset.pipe((0,m.filter)(be=>!!be?.length||(this.model.data=[],!1))).subscribe({next:be=>{const we=be.map(V=>{const se=V?.id??V?.[this.identifier],Ne=this.previousRows.get(se),Ve=this.tableColumns.map((et,gt)=>{const Ft=f().get(V,et?.prop);let _t=Ne?.[gt];const Re=_t?.data?.value,ot=et.pipe?et?.prop?et.pipe.transform(Ft):et.pipe.transform(V):Ft;return _t&&!f().isEqual(Re,ot)&&(_t.data.value=ot,_t.data.row=V,_t.data.column={...et,...V},0===gt&&this.hasDetails&&(_t.expandedData=V,_t.expandedTemplate=this.rowDetailTpl)),_t??new l.TableItem({selected:V,data:{value:ot,row:V,column:{...et,...V}},template:et.cellTemplate||this.defaultValueTpl,...0===gt&&this.hasDetails?{expandedData:V,expandedTemplate:this.rowDetailTpl}:{}})});return this.previousRows.set(se,Ve),Ve}),dt=this.model.data.map(V=>V?.[0]?.data?.row),k=be;(!f().isEqual(dt,k)||this.model.data.length!==we.length)&&(this.model.data=we)}}),x=this.model.rowsExpandedChange.subscribe({next:be=>{this.model.rowsExpanded.every(we=>!we)?this.expanded=void 0:(this.expanded=f().get(this.model.data?.[be],[0,"selected"]),this.model.rowsExpanded=this.model.rowsExpanded.map((we,dt)=>dt===be))}}),W=this.model.rowsSelectedChange.subscribe(()=>this.updateSelectAllCheckbox()),me=this.model.dataChange.subscribe(()=>{this.updateSelectAllCheckbox()});this._subscriptions.add(L),this._subscriptions.add(y),this._subscriptions.add(x),this._subscriptions.add(W),this._subscriptions.add(me)}ngOnInit(){if(this.localColumns=f().clone(this.columns),this.serverSide&&(this.reloadData=f().debounce(this.reloadData,1e3)),this._addTemplates(),!this.sorts){const L=-1!==f().findIndex(this.localColumns,["prop",this.identifier]);this.sorts=this.createSortingDefinition(L?this.identifier:this.localColumns[0].prop+""),!L&&!this.forceIdentifier&&(this.identifier=this.localColumns[0].prop+"")}if(this.initUserConfig(),this.localColumns.forEach(L=>{L.cellTransformation&&(L.cellTemplate=this.cellTemplates[L.cellTransformation]),L.flexGrow||(L.flexGrow=L.prop+""===this.identifier?1:2),L.resizeable||(L.resizeable=!1)}),this.filterHiddenColumns(),this.initColumnFilters(),this.updateColumnFilterOptions(),this.updateSelection.emit(new R.y),this.fetchData.observers.length>0){this.loadingIndicator=!0;const L=this.fetchData.subscribe({next:()=>this.cdRef.detectChanges(),complete:()=>this.loadingIndicator=!1});this._subscriptions.add(L)}f().isInteger(this.autoReload)&&this.autoReload>0?this.reloadSubscriber=this.timerService.get(()=>(0,u.of)(0),this.autoReload).subscribe(()=>{this.reloadData()}):this.autoReload?this.useData():this.reloadData()}onRowDetailHover(L){L.target.closest("tr").previousElementSibling.classList.remove("cds--expandable-row--hover"),L.target.closest("tr").previousElementSibling.classList.remove("cds--data-table--selected")}initUserConfig(){this.autoSave&&(this.tableName=this._calculateUniqueTableName(this.localColumns),this._loadUserConfig(),this._initUserConfigAutoSave()),(10!==this.limit||!this.userConfig.limit)&&(this.userConfig.limit=this.limit),this.userConfig.offset>=0||(this.userConfig.offset=this.model.currentPage-1),this.userConfig.search||(this.userConfig.search=this.search),this.userConfig.sorts||(this.userConfig.sorts=this.sorts),this.userConfig.columns?this.userConfig.columns.forEach(L=>{for(let y=0;y<this.localColumns.length;y++)this.localColumns[y].prop===L.prop&&(this.localColumns[y].isHidden=L.isHidden)}):this.updateUserColumns()}_calculateUniqueTableName(L){const y=x=>{if(!f().isString(x))return 0;let W=0;for(let me=0;me<x.length;me++)W+=x.charCodeAt(me)*me;return W};return L.reduce((x,W,me)=>(y(W.prop)+y(W.name))*(me+1)+x,0).toString()}_loadUserConfig(){const L=this.localStorage.getItem(this.tableName);L&&(this.userConfig=JSON.parse(L))}_initUserConfigAutoSave(){const L=new u.Observable(this._initUserConfigProxy.bind(this));this.saveSubscriber=L.subscribe(this._saveUserConfig.bind(this))}_initUserConfigProxy(L){this.userConfig=new Proxy(this.userConfig,{set:(y,x,W)=>(y[x]=W,L.next(y),!0)})}_saveUserConfig(L){this.localStorage.setItem(this.tableName,JSON.stringify(L))}updateUserColumns(){this.userConfig.columns=this.localColumns.map(L=>({prop:L.prop,name:L.name,isHidden:!!L.isHidden}))}filterHiddenColumns(){this.tableColumns=this.localColumns}initColumnFilters(){let L=f().filter(this.localColumns,{filterable:!0});L=[...L,...this.extraFilterableColumns],this.columnFilters=L.map(y=>({column:y,options:[],value:y.filterInitValue?this.createColumnFilterOption(y.filterInitValue,y.pipe):void 0})),this.selectedFilter=f().first(this.columnFilters)}createColumnFilterOption(L,y){return{raw:f().toString(L),formatted:y?y.transform(L):f().toString(L)}}updateColumnFilterOptions(){this.columnFilters.forEach(L=>{let y=[];if(f().isUndefined(L.column.filterOptions)){const W=f().filter(f().map(this.data,L.column.prop),me=>f().isString(me)&&""!==me||f().isBoolean(me)||f().isFinite(me)||f().isDate(me));y=f().sortedUniq(W.sort())}else y=L.column.filterOptions;const x=y.map(W=>this.createColumnFilterOption(W,L.column.pipe));L.value&&f().isUndefined(f().find(x,{raw:L.value.raw}))&&(L.value=void 0),L.options=x})}onSelectFilter(L){const y=this.columnFilters.find(x=>x.column.name===L);this.selectedFilter=y}onChangeFilter(L){const y=this.selectedFilter.options.find(x=>x.raw===L);this.selectedFilter.value=f().isEqual(this.selectedFilter.value,y)?void 0:y,this.updateFilter()}doColumnFiltering(){const L=[];let y=f().isArray(this.data)?[...this.data]:[],x=[];return this.columnFilters.forEach(W=>{if(void 0===W.value)return;L.push({name:W.column.name,prop:W.column.prop,value:W.value});const me=f().partition(y,be=>{const we=f().get(be,W.column.prop);return f().isUndefined(W.column.filterPredicate)?`${we}`===W.value.raw:W.column.filterPredicate(be,W.value.raw)});y=me[0],x=[...x,...me[1]]}),this.columnFiltersChanged.emit({filters:L,data:y,dataOut:x}),f().forEach(this.selection.selected,W=>{void 0===f().find(y,{[this.identifier]:W[this.identifier]})&&(this.selection=new R.y,this.updateSelection.emit(f().clone(this.selection)))}),y}ngOnDestroy(){this.reloadSubscriber&&this.reloadSubscriber.unsubscribe(),this.saveSubscriber&&this.saveSubscriber.unsubscribe(),this._subscriptions.unsubscribe()}_addTemplates(){this.cellTemplates.bold=this.tableCellBoldTpl,this.cellTemplates.checkIcon=this.checkIconTpl,this.cellTemplates.sparkline=this.sparklineTpl,this.cellTemplates.routerLink=this.routerLinkTpl,this.cellTemplates.perSecond=this.perSecondTpl,this.cellTemplates.executing=this.executingTpl,this.cellTemplates.classAdding=this.classAddingTpl,this.cellTemplates.badge=this.badgeTpl,this.cellTemplates.map=this.mapTpl,this.cellTemplates.truncate=this.truncateTpl,this.cellTemplates.timeAgo=this.timeAgoTpl,this.cellTemplates.path=this.pathTpl,this.cellTemplates.tooltip=this.tooltipTpl,this.cellTemplates.copy=this.copyTpl}useCustomClass(L){if(!this.customCss)throw new Error("Custom classes are not set!");const y=Object.keys(this.customCss),x=Object.values(this.customCss).map((W,me)=>(f().isFunction(W)&&W(L)||W===L)&&y[me]).filter(W=>W).join(" ");return f().isEmpty(x)?void 0:x}ngOnChanges(L){L?.data?.currentValue&&this.useData()}setLimit(L){const y=Number(L.target.value);y>0&&(this.maxLimit&&y>this.maxLimit?(this.userConfig.limit=this.maxLimit,L.srcElement.value=this.maxLimit):this.userConfig.limit=y),this.serverSide&&this.reloadData()}reloadData(){if(!this.updating){this.status=new p.F;const L=new v.n(()=>{L.errorConfig.displayError&&(this.status=new p.F("danger",$localize`Failed to load data.`)),L.errorConfig.resetData&&(this.data=[]),this.useData()});if(L.pageInfo.offset=this.userConfig.offset,L.pageInfo.limit=this.userConfig.limit,L.search=this.userConfig.search,this.userConfig.sorts?.length){const y=this.userConfig.sorts[0];L.sort=`${"desc"===y.dir?"-":"+"}${y.prop}`}this.fetchData.emit(L),this.updating=!0}}refreshBtn(){this.loadingIndicator=!0,this.reloadData()}onPageChange(L){this.model.currentPage=L,this.userConfig.offset=this.model.currentPage-1,this.userConfig.limit=this.model.pageLength,this.serverSide?this.reloadData():this.doPagination({})}doPagination({page:L=this.model.currentPage,size:y=this.model.pageLength,filteredData:x=this.rows}){if(this.serverSide)return void this._dataset.next(x);if(0===this.limit)return this.model.currentPage=1,this.model.pageLength=x.length||1,void this._dataset.next(x);const{start:W,end:me}=this.paginate({page:L,size:y,filteredData:x}),be=x?.slice?.(W,me);this._dataset.next(be)}rowIdentity(){return L=>{const y=L[this.identifier];if(f().isUndefined(y))throw new Error(`Wrong identifier "${this.identifier}" -> "${y}"`);return y}}useData(){this.data&&(this.updateColumnFilterOptions(),this.updateFilter(),this.reset(),this.doSorting(),this.updateSelected(),this.updateExpanded(),this.toggleExpandRow())}reset(){this.loadingIndicator=!1,this.updating=!1}updateSelected(){if(!this.selection?.selected?.length)return;const L=new Set;if(this.selection.selected.forEach(x=>{for(const W of this.data)x[this.identifier]===W[this.identifier]&&L.add(W)}),0===L.size)return;const y=Array.from(L.values());y?.forEach?.(x=>{const W=this.model.data.findIndex(me=>f().get(me,[0,"selected",this.identifier])===x[this.identifier]);W>-1&&this.model.selectRow(W,!0)}),("onChange"!==this.updateSelectionOnRefresh||!f().isEqual(this.selection.selected,y))&&(this.selection.selected=y,"never"!==this.updateSelectionOnRefresh&&this.updateSelection.emit(f().clone(this.selection)))}updateExpanded(){if(f().isUndefined(this.expanded)||"never"===this.updateExpandedOnRefresh)return;const L=this.expanded[this.identifier],y=f().find(this.data,x=>L===x[this.identifier]);"onChange"===this.updateExpandedOnRefresh&&f().isEqual(this.expanded,y)||(this.expanded=y)}_toggleSelection(L,y){const x=f().get(this.model.data?.[L],[0,"selected"]);this.selection.selected=y?[...this.selection.selected,x]:this.selection.selected.filter(W=>W[this.identifier]!==x[this.identifier])}onSelect(L){const y=f().get(this.model.data?.[L],[0,"selected"]);"single"===this.selectionType?(this.model.selectAll(!1),this.selection.selected=[y]):this.selection.selected=[...this.selection.selected,y],this.model.selectRow(L,!0),this.updateSelection.emit(this.selection)}onSelectAll(){this.model.selectAll(!this.selectAllCheckbox&&!this.selectAllCheckboxSomeSelected),this.model.rowsSelected.forEach((L,y)=>this._toggleSelection(y,L)),this.updateSelection.emit(this.selection),this.cdRef.detectChanges()}onDeselect(L){this.model.selectRow(L,!1),"single"!==this.selectionType&&(this._toggleSelection(L,!1),this.updateSelection.emit(this.selection))}onDeselectAll(){this.model.selectAll(!1),this.model.rowsSelected.forEach((L,y)=>this._toggleSelection(y,L)),this.updateSelection.emit(this.selection)}onBatchActionsCancel(){this.model.selectAll(!1),this.model.rowsSelected.forEach((L,y)=>this._toggleSelection(y,!1))}toggleColumn(L){const y=L.prop,x=!L.isHidden;x&&1===this.visibleColumns.length?L.isHidden=!0:(f().find(this.localColumns,W=>W.prop===y).isHidden=x,this.updateColumns())}updateColumns(){this.updateUserColumns(),this.filterHiddenColumns();const L=this.userConfig.sorts[0].prop;f().find(this.visibleColumns,y=>y.prop===L)||(this.userConfig.sorts=this.createSortingDefinition(this.visibleColumns[0].prop)),this.showInlineActions&&this.tableActions?.dropDownActions?.length&&(this.tableColumns=[...this.tableColumns,{name:"",prop:"",className:"w25",sortable:!1,cellTemplate:this.tableActionTpl}]),this.cdRef.detectChanges()}createSortingDefinition(L){return[{prop:L,dir:O.v.asc}]}changeSorting(L){if(!this.model?.header?.[L])return;const y=this.tableColumns?.[L]?.prop;if(this.model.header[L].sorted)this.model.header[L].descending=this.model.header[L].ascending;else{const me=this.userConfig?.sorts?.find?.(be=>be.prop===y)?.dir;this.model.header[L].ascending="asc"===me,this.model.header[L].descending="desc"===me}const W=[{dir:this.model.header[L].ascending?O.v.asc:O.v.desc,prop:y}];this.userConfig.sorts=W,this.serverSide&&(this.userConfig.offset=0,this.reloadData()),this.doSorting(L)}doSorting(L){const y=L||this.visibleColumns?.findIndex?.(be=>be.prop===this.userConfig?.sorts?.[0]?.prop);if(f().isNil(y)||y<0||!this.model?.header?.[y])return;const x=this.tableColumns?.[y]?.prop,W=this.userConfig?.sorts?.find?.(be=>be.prop===x)?.dir;this.model.header[y].ascending="asc"===W,this.model.header[y].descending="desc"===W;const me=this.rows.slice();me.sort((be,we)=>{const dt=f().get(be,x),k=f().get(we,x);return dt>k?this.model.header[y].descending?-1:1:k>dt?this.model.header[y].descending?1:-1:0}),this.model.header[y].sorted=!0,this.rows=me.slice()}onClearSearch(){this.search="",this.expanded=void 0,this.updateFilter()}onClearFilters(){this.columnFilters.forEach(L=>{L.value=void 0}),this.selectedFilter=f().first(this.columnFilters),this.updateFilter()}updateFilter(){if(this.serverSide)this.userConfig.search!==this.search&&(this.userConfig.offset=0,this.userConfig.limit=this.limit,this.userConfig.search=this.search,this.updating=!1,this.reloadData()),this.rows=this.data;else{let L=0!==this.columnFilters.length?this.doColumnFiltering():this.data;if(this.search.length>0&&L?.length){const y=this.localColumns.filter(x=>x.cellTransformation!==S.x.sparkline);L=this.subSearch(L,ae.prepareSearch(this.search),y)}this.rows=L}}subSearch(L,y,x){if(0===y.length||0===L.length)return L;const W=y.pop().replace(/\+/g," ").split(":"),me=[...x];return 2===W.length&&(x=me.filter(be=>-1!==be.name.toLowerCase().indexOf(W[0]))),L=this.basicDataSearch(f().last(W),L,x),this.subSearch(L,y,me)}basicDataSearch(L,y,x){return 0===L.length?y:y.filter(W=>x.filter(me=>{let be=f().get(W,me.prop);if(f().isUndefined(me.pipe)||(be=me.pipe.transform(be)),f().isUndefined(be)||f().isNull(be))return!1;if(f().isArray(be)?be=be.join(" "):(f().isNumber(be)||f().isBoolean(be))&&(be=be.toString()),f().isObjectLike(be)){if(!this.searchableObjects)return!1;be=JSON.stringify(be)}return-1!==be.toLowerCase().indexOf(L)}).length>0)}getRowClass(){return()=>({clickable:!f().isUndefined(this.selectionType)})}toggleExpandRow(){if(f().isNil(this.expanded))return;const L=this.model.data.findIndex(y=>{const x=f().get(y,[0,"selected",this.identifier]),W=this.expanded?.[this.identifier];return f().isEqual(x,W)});L<0||(this.model.rowsExpanded=this.model.rowsExpanded.map((y,x)=>x===L))}firstExpandedDataInRow(L){const y=L.find(x=>x.expandedData);return y&&y.expandedData}shouldExpandAsTable(L){return L.some(y=>y.expandAsTable)}isRowExpandable(L){return this.model.data[L].some(y=>y&&y.expandedData)}trackByFn(L,y,x){return f().get(x,[0,"data","row",L])?.toString?.()||x}updateSelectAllCheckbox(){const L=this.model.selectedRowsCount();L<=0?(this.selectAllCheckbox=!1,this.selectAllCheckboxSomeSelected=!1):L<this.model.data.length?(this.selectAllCheckbox=!0,this.selectAllCheckboxSomeSelected=!0):(this.selectAllCheckbox=!0,this.selectAllCheckboxSomeSelected=!1)}static{this.\u0275fac=function(y){return new(y||ae)(a.\u0275\u0275directiveInject(a.ChangeDetectorRef),a.\u0275\u0275directiveInject(P.H))}}static{this.\u0275cmp=a.\u0275\u0275defineComponent({type:ae,selectors:[["cd-table"]],contentQueries:function(y,x,W){if(1&y&&(a.\u0275\u0275contentQuery(W,b.N,5),a.\u0275\u0275contentQuery(W,M.j,5)),2&y){let me;a.\u0275\u0275queryRefresh(me=a.\u0275\u0275loadQuery())&&(x.rowDetail=me.first),a.\u0275\u0275queryRefresh(me=a.\u0275\u0275loadQuery())&&(x.tableActions=me.first)}},viewQuery:function(y,x){if(1&y&&(a.\u0275\u0275viewQuery(C,7),a.\u0275\u0275viewQuery(K,7),a.\u0275\u0275viewQuery(ce,7),a.\u0275\u0275viewQuery(Ee,7),a.\u0275\u0275viewQuery(Ce,7),a.\u0275\u0275viewQuery(Ue,7),a.\u0275\u0275viewQuery(He,7),a.\u0275\u0275viewQuery(it,7),a.\u0275\u0275viewQuery(ct,7),a.\u0275\u0275viewQuery(tt,7),a.\u0275\u0275viewQuery(Ge,7),a.\u0275\u0275viewQuery(ze,7),a.\u0275\u0275viewQuery(ut,7),a.\u0275\u0275viewQuery(Pe,7),a.\u0275\u0275viewQuery(De,7),a.\u0275\u0275viewQuery(Ie,7),a.\u0275\u0275viewQuery(Qe,7),a.\u0275\u0275viewQuery(qe,7),a.\u0275\u0275viewQuery(ht,7)),2&y){let W;a.\u0275\u0275queryRefresh(W=a.\u0275\u0275loadQuery())&&(x.tableCellBoldTpl=W.first),a.\u0275\u0275queryRefresh(W=a.\u0275\u0275loadQuery())&&(x.sparklineTpl=W.first),a.\u0275\u0275queryRefresh(W=a.\u0275\u0275loadQuery())&&(x.routerLinkTpl=W.first),a.\u0275\u0275queryRefresh(W=a.\u0275\u0275loadQuery())&&(x.checkIconTpl=W.first),a.\u0275\u0275queryRefresh(W=a.\u0275\u0275loadQuery())&&(x.perSecondTpl=W.first),a.\u0275\u0275queryRefresh(W=a.\u0275\u0275loadQuery())&&(x.executingTpl=W.first),a.\u0275\u0275queryRefresh(W=a.\u0275\u0275loadQuery())&&(x.classAddingTpl=W.first),a.\u0275\u0275queryRefresh(W=a.\u0275\u0275loadQuery())&&(x.badgeTpl=W.first),a.\u0275\u0275queryRefresh(W=a.\u0275\u0275loadQuery())&&(x.mapTpl=W.first),a.\u0275\u0275queryRefresh(W=a.\u0275\u0275loadQuery())&&(x.truncateTpl=W.first),a.\u0275\u0275queryRefresh(W=a.\u0275\u0275loadQuery())&&(x.timeAgoTpl=W.first),a.\u0275\u0275queryRefresh(W=a.\u0275\u0275loadQuery())&&(x.rowDetailsTpl=W.first),a.\u0275\u0275queryRefresh(W=a.\u0275\u0275loadQuery())&&(x.rowSelectionTpl=W.first),a.\u0275\u0275queryRefresh(W=a.\u0275\u0275loadQuery())&&(x.pathTpl=W.first),a.\u0275\u0275queryRefresh(W=a.\u0275\u0275loadQuery())&&(x.tooltipTpl=W.first),a.\u0275\u0275queryRefresh(W=a.\u0275\u0275loadQuery())&&(x.copyTpl=W.first),a.\u0275\u0275queryRefresh(W=a.\u0275\u0275loadQuery())&&(x.defaultValueTpl=W.first),a.\u0275\u0275queryRefresh(W=a.\u0275\u0275loadQuery())&&(x.rowDetailTpl=W.first),a.\u0275\u0275queryRefresh(W=a.\u0275\u0275loadQuery())&&(x.tableActionTpl=W.first)}},inputs:{headerTitle:"headerTitle",headerDescription:"headerDescription",data:"data",columns:"columns",sorts:"sorts",columnMode:"columnMode",onlyActionHeader:"onlyActionHeader",toolHeader:"toolHeader",searchField:"searchField",header:"header",footer:"footer",limit:"limit",maxLimit:"maxLimit",hasDetails:"hasDetails",showInlineActions:"showInlineActions",autoReload:"autoReload",identifier:"identifier",forceIdentifier:"forceIdentifier",selectionType:"selectionType",updateSelectionOnRefresh:"updateSelectionOnRefresh",updateExpandedOnRefresh:"updateExpandedOnRefresh",autoSave:"autoSave",searchableObjects:"searchableObjects",customCss:"customCss",extraFilterableColumns:"extraFilterableColumns",status:"status",serverSide:"serverSide",size:"size",count:"count",layer:"layer",theme:"theme"},outputs:{fetchData:"fetchData",updateSelection:"updateSelection",setExpandedRow:"setExpandedRow",columnFiltersChanged:"columnFiltersChanged"},features:[a.\u0275\u0275NgOnChangesFeature],ngContentSelectors:Jt,decls:46,vars:24,consts:()=>{let L,y,x,W,me,be,we,dt,k,H;return L=$localize`:␟4c462a5943a2d5f9073ab62a358c679599fdf1cb␟8383750411705964009: ${"\ufffd0\ufffd"}:INTERPOLATION: `,y=$localize`:␟5a548cdf722556fb947841f1e1127d1b789b81c9␟4849193465151578488: ${"\ufffd0\ufffd"}:INTERPOLATION: `,x=$localize`:␟00335c647338fa7bdd51f43386d8c975b0a154e9␟6479229347012594386: ${"\ufffd0\ufffd"}:INTERPOLATION: `,W=$localize`:␟16d449549ab7bc61caf3d636372a4a56b5870383␟3184700926171002527:Any`,me=$localize`:␟1e5e23363e949f7dcbaf034bdb141a561132a10e␟6559246822757089203:Clear filters`,be=$localize`:␟fb6f6996aecb9bd904931ceaf8acf6f0477d276f␟2186214574359585705:No data to display`,we=$localize`:␟e524bc47a7e386413b7233dd3749d8615caf4a1e␟2525689140568150553: ${"\ufffd0\ufffd"}:INTERPOLATION: `,dt=$localize`:␟6da82099aa7f3675961c1ca6642f196b6a542c65␟5012017817209984358:${"\ufffd0\ufffd"}:INTERPOLATION:`,k=$localize`:␟e34abafac646f7c1ba0467f79b2dba47c673759d␟1244975218403222993: ${"\ufffd0\ufffd"}:INTERPOLATION: `,H=$localize`:␟2a3dab422cc892db037db8632bb84a6bf496e2d1␟330692511973460057:Expand/Collapse Row`,[["noDataTemplate",""],["rowDetailTpl",""],["defaultValueTpl",""],["tableActionTpl",""],["tableCellBoldTpl",""],["sparklineTpl",""],["routerLinkTpl",""],["checkIconTpl",""],["perSecondTpl",""],["executingTpl",""],["classAddingTpl",""],["badgeTpl",""],["mapTpl",""],["tooltipTpl",""],["truncateTpl",""],["rowDetailsTpl",""],["timeAgoTpl",""],["pathTpl",""],["copyTpl",""],["toolbar",""],["showHideColumnsRef",""],L,y,x,W,me,be,we,k,["ngbTooltip",dt],[1,"content-theme",3,"cdsLayer","cdsTheme"],[4,"ngIf"],[3,"model","batchText","cancel",4,"ngIf"],["class","d-flex justify-content-end align-items-center filter-tags",4,"ngIf"],["cdsTable","",3,"sortable","noBorder","size","striped","skeleton"],["cdsTableHead","",3,"deselectAll","selectAll","sort","sortable","model","selectAllCheckbox","selectAllCheckboxSomeSelected","showSelectionColumn","enableSingleSelect","skeleton","stickyHeader"],["cdsTableBody","",3,"enableSingleSelect","skeleton",4,"ngIf","ngIfElse"],[3,"selectPage","model","disabled","skeleton","pageInputDisabled"],["ngx-datatable-cell-template",""],["cdsTableHeaderTitle",""],["cdsTableHeaderDescription","",4,"ngIf"],["cdsTableHeaderDescription",""],[3,"cancel","model","batchText"],["aria-label","search",3,"expandable","ngModel","ngModelChange","valueChange","clear",4,"ngIf"],["class","toolbar-action","placement","bottom",3,"kind","disabled","title","description","click",4,"ngIf"],["cdsButton","ghost","placement","bottom",1,"toolbar-action",3,"cdsOverflowMenu","flip","offset"],[1,"cds--toolbar-action__icon",3,"cdsIcon","size"],[4,"ngFor","ngForOf"],["cdsButton","primary",3,"tabindex","class","title","routerLink","preserveFragment","disabled","click",4,"ngIf"],["cdsButton","primary",3,"click","tabindex","title","routerLink","preserveFragment","disabled"],["aria-label","search",3,"ngModelChange","valueChange","clear","expandable","ngModel"],[1,"d-inline-flex","position-relative"],[3,"cdsIcon","size"],["display","inline","id","filter_name",3,"valueChange"],["display","inline","id","filter_option",3,"valueChange"],[3,"value","selected"],["placement","bottom",1,"toolbar-action",3,"click","kind","disabled","title","description"],[3,"cdsIcon","size","ngClass"],[1,"vstack","gap-3","p-3",3,"click","cdsTheme"],[3,"id","name","checked","checkedChange",4,"ngIf"],[3,"checkedChange","id","name","checked"],[1,"d-flex","justify-content-end","align-items-center","filter-tags"],[1,"d-flex","gap-2"],["cdsButton","ghost",3,"click"],["type","outline","class","align-self-center",4,"ngIf"],["type","outline",1,"align-self-center"],[1,"me-2"],[1,"cds--tag__close-icon",3,"click"],["cdsTableBody","",3,"enableSingleSelect","skeleton"],[4,"ngFor","ngForOf","ngForTrackBy"],["cdsTableRow","",3,"model","row","size","selected","expandable","expanded","showSelectionColumn","skeleton","selectRow","deselectRow","expandRow","rowClick",4,"ngIf"],["cdsTableExpandedRow","","cdsExpandedRowHover","",3,"row","expanded","skeleton",4,"ngIf"],["cdsTableRow","",3,"selectRow","deselectRow","expandRow","rowClick","model","row","size","selected","expandable","expanded","showSelectionColumn","skeleton"],["cdsTableExpandedRow","","cdsExpandedRowHover","",3,"row","expanded","skeleton"],["cdsTableRow","",3,"model","showSelectionColumnCheckbox","showSelectionColumn","row","size","selected","skeleton",4,"ngFor","ngForOf"],["cdsTableRow","",3,"model","showSelectionColumnCheckbox","showSelectionColumn","row","size","selected","skeleton"],["cdstablerow",""],["class","no-data","cdstabledata","",4,"ngIf"],["cdstabledata","",1,"no-data"],[1,"d-flex","justify-content-center","align-items-center"],["data-testid","datatable-row-detail",3,"mouseenter",4,"ngIf"],["data-testid","datatable-row-detail",3,"mouseenter"],[3,"ngTemplateOutlet"],[3,"ngClass"],["data-testid","table-action-btn","class","d-flex justify-content-end",3,"flip",4,"ngIf"],["data-testid","table-action-btn",1,"d-flex","justify-content-end",3,"flip"],["data-testid","table-action-option-btn",3,"class","title","routerLink","preserveFragment","disabled","click",4,"ngIf"],["data-testid","table-action-option-btn",3,"click","title","routerLink","preserveFragment","disabled"],[1,"position-relative"],[3,"data","isBinary"],[3,"routerLink","queryParams"],[3,"ngClass","hidden"],[3,"ngClass",4,"ngIf"],["class","badge",3,"ngClass",4,"ngIf"],[1,"badge",3,"ngClass"],[6,"ngbTooltip"],["data-toggle","tooltip",3,"title"],["href","javascript:void(0)","title",H,1,"expand-collapse-icon","tc_expand-collapse",3,"click"],["size","lg",3,"source","byId","text",4,"ngIf"],["size","lg",3,"source","byId","text"],[3,"source","byId","size","text",4,"ngIf"],[3,"source","byId","size","text"]]},template:function(y,x){if(1&y){const W=a.\u0275\u0275getCurrentView();a.\u0275\u0275projectionDef(St),a.\u0275\u0275elementStart(0,"cds-table-container",30),a.\u0275\u0275template(1,nt,4,2,"cds-table-header",31)(2,Nn,12,14,"cds-table-toolbar",32)(3,Nt,6,1,"div",33),a.\u0275\u0275elementStart(4,"table",34)(5,"thead",35),a.\u0275\u0275listener("deselectAll",function(){return a.\u0275\u0275restoreView(W),a.\u0275\u0275resetView(x.onDeselectAll())})("selectAll",function(){return a.\u0275\u0275restoreView(W),a.\u0275\u0275resetView(x.onSelectAll())})("sort",function(be){return a.\u0275\u0275restoreView(W),a.\u0275\u0275resetView(x.changeSorting(be))}),a.\u0275\u0275elementEnd(),a.\u0275\u0275template(6,lt,2,4,"tbody",36),a.\u0275\u0275elementEnd(),a.\u0275\u0275elementStart(7,"cds-pagination",37),a.\u0275\u0275listener("selectPage",function(be){return a.\u0275\u0275restoreView(W),a.\u0275\u0275resetView(x.onPageChange(be))}),a.\u0275\u0275elementEnd()(),a.\u0275\u0275template(8,jn,3,1,"ng-template",null,0,a.\u0275\u0275templateRefExtractor)(10,pn,1,1,"ng-template",null,1,a.\u0275\u0275templateRefExtractor)(12,Mn,2,2,"ng-template",null,2,a.\u0275\u0275templateRefExtractor)(14,Ot,1,1,"ng-template",null,3,a.\u0275\u0275templateRefExtractor)(16,Wn,2,1,"ng-template",null,4,a.\u0275\u0275templateRefExtractor)(18,Kn,2,2,"ng-template",null,5,a.\u0275\u0275templateRefExtractor)(20,In,2,5,"ng-template",null,6,a.\u0275\u0275templateRefExtractor)(22,Qn,2,6,"ng-template",null,7,a.\u0275\u0275templateRefExtractor)(24,Yn,2,3,"ng-template",null,8,a.\u0275\u0275templateRefExtractor)(26,vo,4,4,"ng-template",null,9,a.\u0275\u0275templateRefExtractor)(28,fn,3,8,"ng-template",null,10,a.\u0275\u0275templateRefExtractor)(30,It,2,3,"ng-template",null,11,a.\u0275\u0275templateRefExtractor)(32,An,3,4,"ng-template",null,12,a.\u0275\u0275templateRefExtractor)(34,qn,2,3,"ng-template",null,13,a.\u0275\u0275templateRefExtractor)(36,eo,3,6,"ng-template",null,14,a.\u0275\u0275templateRefExtractor)(38,to,1,4,"ng-template",38,15,a.\u0275\u0275templateRefExtractor)(40,no,4,6,"ng-template",null,16,a.\u0275\u0275templateRefExtractor)(42,oo,1,1,"ng-template",null,17,a.\u0275\u0275templateRefExtractor)(44,ge,1,1,"ng-template",null,18,a.\u0275\u0275templateRefExtractor)}if(2&y){const W=a.\u0275\u0275reference(9);a.\u0275\u0275property("cdsLayer",x.layer)("cdsTheme",x.theme),a.\u0275\u0275advance(),a.\u0275\u0275property("ngIf",x.headerTitle),a.\u0275\u0275advance(),a.\u0275\u0275property("ngIf",x.toolHeader),a.\u0275\u0275advance(),a.\u0275\u0275property("ngIf",x.toolHeader&&x.columnFiltered),a.\u0275\u0275advance(),a.\u0275\u0275property("sortable",x.sortable)("noBorder",!1)("size",x.size)("striped",!1)("skeleton",x.loadingIndicator),a.\u0275\u0275advance(),a.\u0275\u0275property("sortable",x.sortable)("model",x.model)("selectAllCheckbox",x.selectAllCheckbox)("selectAllCheckboxSomeSelected",x.selectAllCheckboxSomeSelected)("showSelectionColumn",x.showSelectionColumn)("enableSingleSelect",x.enableSingleSelect)("skeleton",x.loadingIndicator)("stickyHeader",!1),a.\u0275\u0275advance(),a.\u0275\u0275property("ngIf",!x.noData)("ngIfElse",W),a.\u0275\u0275advance(),a.\u0275\u0275property("model",x.model)("disabled",0===x.limit)("skeleton",x.loadingIndicator)("pageInputDisabled",0===x.limit)}},dependencies:[N.NgClass,N.NgForOf,N.NgIf,N.NgTemplateOutlet,z.NgSelectOption,z.\u0275NgSelectMultipleOption,z.NgControlStatus,z.NgModel,q.NgbTooltip,G.B,D.N,oe.RouterLink,l.TableToolbar,l.TableContainer,l.TableHeader,l.TableHeaderTitle,l.TableHeaderDescription,l.TableToolbarActions,l.TableToolbarSearch,l.TableToolbarContent,l.ExpandedRowHover,l.TableDirective,l.TableHead,l.TableBody,l.TableRowComponent,l.TableExpandedRow,l.Button,l.IconButton,l.IconDirective,l.Checkbox,l.Pagination,l.OverflowMenu,l.OverflowMenuDirective,l.OverflowMenuOption,l.ThemeDirective,l.Select,l.Option,l.Tag,l.LayerDirective,ye.S,je.F,Le.u,Fe.D,te.Q,le.r,ie.H,_e.i,ue.N],styles:["@keyframes _ngcontent-%COMP%_progress-loading{0%{left:-200px;width:15%}50%{width:30%}70%{width:70%}80%{left:50%}95%{left:120%}to{left:100%}}.reload[_ngcontent-%COMP%]{animation-duration:2.5s;animation-iteration-count:infinite;animation-name:_ngcontent-%COMP%_spin;animation-timing-function:linear}@keyframes _ngcontent-%COMP%_spin{0%{transform:rotate(0)}to{transform:rotate(360deg)}}.no-data[_ngcontent-%COMP%]{font-size:1.1rem;height:5rem}  .table-actions{display:flex;flex-flow:row-reverse;gap:.1em}.filter-tags[_ngcontent-%COMP%]{background-color:var(--cds-layer-accent);border-bottom:1px solid var(--cds-layer-active);color:var(--cds-text-primary)}  div.cds--batch-actions.cds--batch-actions--active{background-color:#25828e}  div.cds--batch-summary{background-color:#25828e}"],changeDetection:0})}}},80697:(Z,A,r)=>{r.d(A,{G:()=>l,R:()=>T});var a=r(29841),e=r.n(a);function l(...u){switch(u.length){case 1:return E.apply(void 0,u);case 3:return f.apply(void 0,u);default:throw new Error}}function T(u,F,p){const S=`__ignore_${F}`;Array.isArray(u[S])?u[S].push(p):u[S]=[p]}function E(u){for(const F of Object.getOwnPropertyNames(u.prototype)){const p=Object.getOwnPropertyDescriptor(u.prototype,F);!(p.value instanceof Function)||"constructor"===F||(f(u.prototype,F,p),Object.defineProperty(u.prototype,F,p))}}function f(u,F,p){void 0===p&&(p=Object.getOwnPropertyDescriptor(u,F));const S=p.value;p.value=function(){const v=u[`__ignore_${F}`]||[],R=[];for(let M=0;M<arguments.length;M++)e().isString(arguments[M])&&-1===v.indexOf(M)?R[M]=encodeURIComponent(arguments[M]):R[M]=arguments[M];return S.apply(this,R)}}},71656:(Z,A,r)=>{r.d(A,{V:()=>f});var a=r(87536),l=r(29841),T=r.n(l),E=r(82254);class f{constructor(F,p,S){this.templateRef=F,this.viewContainer=p,this.authStorageService=S,this.cdScopeMatchAll=!0}set cdScope(F){this.permissions=this.authStorageService.getPermissions(),this.isAuthorized(F)?this.viewContainer.createEmbeddedView(this.templateRef):this.viewContainer.clear()}isAuthorized(F){const p=this.cdScopeMatchAll?T().every:T().some;return T().isString(F)?T().get(this.permissions,[F,"read"],!1):T().isArray(F)?p(F,S=>this.permissions[S].read):!!T().isObject(F)&&p(F,(S,_)=>p(S,v=>this.permissions[_][v]))}static{this.\u0275fac=function(p){return new(p||f)(a.\u0275\u0275directiveInject(a.TemplateRef),a.\u0275\u0275directiveInject(a.ViewContainerRef),a.\u0275\u0275directiveInject(E.v))}}static{this.\u0275dir=a.\u0275\u0275defineDirective({type:f,selectors:[["","cdScope",""]],inputs:{cdScope:"cdScope",cdScopeMatchAll:"cdScopeMatchAll"}})}}},23603:(Z,A,r)=>{r.d(A,{B:()=>E});var a=r(87536),l=r(29841),T=r.n(l);class E{constructor(u){this.elementRef=u,this.focus=!0}ngAfterViewInit(){const u=this.elementRef.nativeElement;this.focus&&T().isFunction(u.focus)&&u.focus()}set autofocus(u){T().isBoolean(u)?this.focus=u:T().isFunction(u)&&(this.focus=u())}static{this.\u0275fac=function(F){return new(F||E)(a.\u0275\u0275directiveInject(a.ElementRef))}}static{this.\u0275dir=a.\u0275\u0275defineDirective({type:E,selectors:[["","autofocus",""]],inputs:{autofocus:"autofocus"}})}}},42865:(Z,A,r)=>{r.d(A,{Y:()=>p});var a=r(87536),l=r(53648),E=r(29841),f=r.n(E),u=r(73651),F=r(12540);class p{constructor(_,v,R,P){this.elementRef=_,this.control=v,this.dimlessBinaryPipe=R,this.formatter=P,this.ngModelChange=new a.EventEmitter,this.el=this.elementRef.nativeElement}ngOnInit(){this.setValue(this.el.value)}setValue(_){/^[\d.]+$/.test(_)?_+=this.defaultUnit||"m":_&&(this.control.control.setValue(_),this.control.control.addValidators(l.Validators.pattern(/^[a-zA-Z\d. ]+$/)),this.control.control.updateValueAndValidity());const v=this.formatter.toBytes(_),R=this.round(v);this.el.value=this.dimlessBinaryPipe.transform(R),null!==v?(this.ngModelChange.emit(this.el.value),this.control.control.setValue(this.el.value)):(this.ngModelChange.emit(null),this.control.control.setValue(null))}round(_){if(null!==_&&0!==_){if(!f().isUndefined(this.minBytes)&&_<this.minBytes)return this.minBytes;if(!f().isUndefined(this.maxBytes)&&_>this.maxBytes)return this.maxBytes;if(!f().isUndefined(this.roundPower)){const v=Math.round(Math.log(_)/Math.log(this.roundPower));return Math.pow(this.roundPower,v)}}return _}onBlur(_){this.setValue(_)}static{this.\u0275fac=function(v){return new(v||p)(a.\u0275\u0275directiveInject(a.ElementRef),a.\u0275\u0275directiveInject(l.NgControl),a.\u0275\u0275directiveInject(u.l),a.\u0275\u0275directiveInject(F.k))}}static{this.\u0275dir=a.\u0275\u0275defineDirective({type:p,selectors:[["","cdDimlessBinary",""]],hostBindings:function(v,R){1&v&&a.\u0275\u0275listener("blur",function(M){return R.onBlur(M.target.value)})},inputs:{minBytes:"minBytes",maxBytes:"maxBytes",roundPower:"roundPower",defaultUnit:"defaultUnit"},outputs:{ngModelChange:"ngModelChange"}})}}},21445:(Z,A,r)=>{r.d(A,{h:()=>E});var a=r(53648),l=r(87536);class E{static{this.\u0275fac=function(F){return new(F||E)}}static{this.\u0275mod=l.\u0275\u0275defineNgModule({type:E})}static{this.\u0275inj=l.\u0275\u0275defineInjector({imports:[a.ReactiveFormsModule]})}}},19271:(Z,A,r)=>{r.d(A,{k:()=>f});var a=r(87536),e=r(95631);class l{constructor(){this.searchSubject=new e.Subject}emit(F){this.searchSubject.next(F)}static{this.\u0275fac=function(p){return new(p||l)}}static{this.\u0275prov=a.\u0275\u0275defineInjectable({token:l,factory:l.\u0275fac,providedIn:"root"})}}var T=r(50619);class f{constructor(F){this.combBoxService=F,this.updatedItems=new a.EventEmitter,this.searchSubject=new e.Subject,this.selectedItems=[]}ngOnInit(){this.searchSubscription=this.searchSubject.pipe((0,T.debounceTime)(300),(0,T.distinctUntilChanged)()).subscribe(F=>{this.items=this.items.map(S=>{const _=this.selectedItems.some(v=>v.content===S.content);return{...S,selected:_}}),this.items.some(S=>S.content===F)||(this.items=this.items.concat({content:F,name:F})),this.updatedItems.emit(this.items),this.combBoxService.emit({searchString:F})})}onInput(F){F.length>1&&this.searchSubject.next(F)}onSelected(F){this.selectedItems=F}ngOnDestroy(){this.searchSubscription.unsubscribe(),this.searchSubject.complete()}static{this.\u0275fac=function(p){return new(p||f)(a.\u0275\u0275directiveInject(l))}}static{this.\u0275dir=a.\u0275\u0275defineDirective({type:f,selectors:[["","cdDynamicInputCombobox",""]],hostBindings:function(p,S){1&p&&a.\u0275\u0275listener("search",function(v){return S.onInput(v)})("selected",function(v){return S.onSelected(v)})},inputs:{items:"items"},outputs:{updatedItems:"updatedItems"}})}}},90476:(Z,A,r)=>{r.d(A,{S:()=>E});var a=r(87536),l=r(82254),T=r(24689);class E{constructor(u,F,p){this.formScope=u,this.authStorageService=F,this.elementRef=p}ngAfterViewInit(){this.permissions=this.authStorageService.getPermissions();const u=this.formScope?.cdFormScope;u&&!this.permissions?.[u]?.update&&(this.elementRef.nativeElement.disabled=!0)}static{this.\u0275fac=function(F){return new(F||E)(a.\u0275\u0275directiveInject(T.q,8),a.\u0275\u0275directiveInject(l.v),a.\u0275\u0275directiveInject(a.ElementRef))}}static{this.\u0275dir=a.\u0275\u0275defineDirective({type:E,selectors:[["input",3,"cdNoFormInputDisable",""],["select",3,"cdNoFormInputDisable",""],["button",3,"cdNoFormInputDisable",""],["","cdFormInputDisable",""]]})}}},56677:(Z,A,r)=>{r.d(A,{G:()=>f});var a=r(87536),l=r(92805),T=r(23589),E=r(74902);class f{constructor(F,p){this.templateRef=F,this.viewContainer=p}set cdFormLoading(F){let p;switch(this.viewContainer.clear(),F){case E.r.Loading:p=this.resolveNgContent($localize`Loading form data...`),this.viewContainer.createComponent(T.e,{projectableNodes:p});break;case E.r.Ready:this.viewContainer.createEmbeddedView(this.templateRef);break;case E.r.Error:p=this.resolveNgContent($localize`Form data could not be loaded.`);this.viewContainer.createComponent(l.m,{projectableNodes:p}).instance.type="error"}}resolveNgContent(F){return[[document.createTextNode(F)]]}static{this.\u0275fac=function(p){return new(p||f)(a.\u0275\u0275directiveInject(a.TemplateRef),a.\u0275\u0275directiveInject(a.ViewContainerRef))}}static{this.\u0275dir=a.\u0275\u0275defineDirective({type:f,selectors:[["","cdFormLoading",""]],inputs:{cdFormLoading:"cdFormLoading"}})}}},24689:(Z,A,r)=>{r.d(A,{q:()=>l});var a=r(87536);class l{static{this.\u0275fac=function(f){return new(f||l)}}static{this.\u0275dir=a.\u0275\u0275defineDirective({type:l,selectors:[["","cdFormScope",""]],inputs:{cdFormScope:"cdFormScope"}})}}},10142:(Z,A,r)=>{r.d(A,{a:()=>f});var a=r(53648),l=r(87536);class f{get validClass(){return!!this.control&&(this.control.valid&&(this.control.touched||this.control.dirty))}get invalidClass(){return!!this.control&&(this.control.invalid&&this.control.touched&&this.control.dirty)}get path(){return function E(u,F){return[...F.path,u]}(this.formControlName,this.parent)}get control(){return this.formDirective&&this.formDirective.getControl(this)}get formDirective(){return this.parent?this.parent.formDirective:null}constructor(F){this.parent=F}static{this.\u0275fac=function(p){return new(p||f)(l.\u0275\u0275directiveInject(a.ControlContainer,13))}}static{this.\u0275dir=l.\u0275\u0275defineDirective({type:f,selectors:[["",8,"form-control"],["",8,"form-check-input"],["",8,"custom-control-input"]],hostVars:4,hostBindings:function(p,S){2&p&&l.\u0275\u0275classProp("is-valid",S.validClass)("is-invalid",S.invalidClass)},inputs:{formControlName:"formControlName",formControl:"formControl"}})}}},78708:(Z,A,r)=>{r.d(A,{C:()=>E});var a=r(87536),l=r(53648);class E{get hasErrors(){return this.formControlNames.some(u=>!u.valid&&u.dirty&&u.touched)&&!this.validationDisabled}get hasSuccess(){return!this.formControlNames.some(u=>!u.valid)&&this.formControlNames.some(u=>u.dirty&&u.touched)&&!this.validationDisabled}constructor(u){this.elRef=u,this.validationDisabled=!1}get label(){const u=this.elRef.nativeElement.querySelector("label");return u&&u.textContent?u.textContent.trim():"This field"}get isDirtyAndTouched(){return this.formControlNames.some(u=>u.dirty&&u.touched)}static{this.\u0275fac=function(F){return new(F||E)(a.\u0275\u0275directiveInject(a.ElementRef))}}static{this.\u0275dir=a.\u0275\u0275defineDirective({type:E,selectors:[["",8,"form-group"]],contentQueries:function(F,p,S){if(1&F&&a.\u0275\u0275contentQuery(S,l.FormControlName,4),2&F){let _;a.\u0275\u0275queryRefresh(_=a.\u0275\u0275loadQuery())&&(p.formControlNames=_)}},hostVars:4,hostBindings:function(F,p){2&F&&a.\u0275\u0275classProp("has-error",p.hasErrors)("has-success",p.hasSuccess)},inputs:{validationDisabled:"validationDisabled"}})}}},37966:(Z,A,r)=>{r.d(A,{E:()=>E});var a=r(87536),l=r(53648);class E{constructor(){this.validSubmit=new a.EventEmitter}onSubmit(){this.markAsTouchedAndDirty(this.formGroup),this.formGroup.valid&&this.validSubmit.emit(this.formGroup.value)}markAsTouchedAndDirty(u){u instanceof l.UntypedFormGroup?Object.keys(u.controls).forEach(F=>this.markAsTouchedAndDirty(u.controls[F])):u instanceof l.UntypedFormArray?u.controls.forEach(F=>this.markAsTouchedAndDirty(F)):u instanceof l.UntypedFormControl&&u.enabled&&(u.markAsDirty(),u.markAsTouched(),u.updateValueAndValidity())}static{this.\u0275fac=function(F){return new(F||E)}}static{this.\u0275dir=a.\u0275\u0275defineDirective({type:E,selectors:[["","formGroup",""]],hostBindings:function(F,p){1&F&&a.\u0275\u0275listener("submit",function(){return p.onSubmit()})},inputs:{formGroup:"formGroup"},outputs:{validSubmit:"validSubmit"}})}}},2087:(Z,A,r)=>{r.d(A,{O:()=>l});var a=r(87536);class l{constructor(E,f){this.elementRef=E,this.renderer=f}ngAfterViewInit(){if(!this.label||this.skeleton)return;const E=this.elementRef.nativeElement.querySelector(".cds--label");E&&this.renderer.setProperty(E,"textContent",`${this.label} (optional)`)}static{this.\u0275fac=function(f){return new(f||l)(a.\u0275\u0275directiveInject(a.ElementRef),a.\u0275\u0275directiveInject(a.Renderer2))}}static{this.\u0275dir=a.\u0275\u0275defineDirective({type:l,selectors:[["","cdOptionalField",""]],inputs:{label:[0,"cdOptionalField","label"],skeleton:"skeleton"}})}}},12302:(Z,A,r)=>{r.d(A,{h:()=>l});var a=r(87536);class l{constructor(E,f){this.elementRef=E,this.renderer=f}ngOnInit(){this.renderer.setAttribute(this.elementRef.nativeElement,"tabindex","-1"),this.iElement=this.renderer.createElement("i"),this.renderer.addClass(this.iElement,"fa"),this.renderer.appendChild(this.elementRef.nativeElement,this.iElement),this.update()}getInputElement(){return document.getElementById(this.cdPasswordButton)}update(){const E=this.getInputElement();E&&"text"===E.type?(this.renderer.removeClass(this.iElement,"fa-eye"),this.renderer.addClass(this.iElement,"fa-eye-slash")):(this.renderer.removeClass(this.iElement,"fa-eye-slash"),this.renderer.addClass(this.iElement,"fa-eye"))}onClick(){const E=this.getInputElement();E.type="password"===E.type?"text":"password",this.update()}static{this.\u0275fac=function(f){return new(f||l)(a.\u0275\u0275directiveInject(a.ElementRef),a.\u0275\u0275directiveInject(a.Renderer2))}}static{this.\u0275dir=a.\u0275\u0275defineDirective({type:l,selectors:[["","cdPasswordButton",""]],hostBindings:function(f,u){1&f&&a.\u0275\u0275listener("click",function(){return u.onClick()})},inputs:{cdPasswordButton:"cdPasswordButton"}})}}},51862:(Z,A,r)=>{r.d(A,{P:()=>l});var a=r(87536);class l{constructor(E,f){this.elementRef=E,this.renderer=f}ngAfterViewInit(){if(!this.label||this.skeleton)return;const E=this.elementRef.nativeElement.querySelector(".cds--label");E&&this.renderer.setProperty(E,"textContent",`${this.label} (required)`)}static{this.\u0275fac=function(f){return new(f||l)(a.\u0275\u0275directiveInject(a.ElementRef),a.\u0275\u0275directiveInject(a.Renderer2))}}static{this.\u0275dir=a.\u0275\u0275defineDirective({type:l,selectors:[["","cdRequiredField",""]],inputs:{label:[0,"cdRequiredField","label"],skeleton:"skeleton"}})}}},62988:(Z,A,r)=>{r.d(A,{B:()=>E});var a=r(77317),l=r(87536);class E{constructor(u){this.nav=u,this.cdStatefulTabDefault="",this.localStorage=window.localStorage}ngOnInit(){const u=this.cdStatefulTabDefault||this.localStorage.getItem(`tabset_${this.cdStatefulTab}`);u&&this.nav.select(u)}onNavChange(u){this.cdStatefulTab&&u.nextId&&this.localStorage.setItem(`tabset_${this.cdStatefulTab}`,u.nextId)}static{this.\u0275fac=function(F){return new(F||E)(l.\u0275\u0275directiveInject(a.NgbNav,9))}}static{this.\u0275dir=l.\u0275\u0275defineDirective({type:E,selectors:[["","cdStatefulTab",""]],hostBindings:function(F,p){1&F&&l.\u0275\u0275listener("navChange",function(_){return p.onNavChange(_)})},inputs:{cdStatefulTab:"cdStatefulTab",cdStatefulTabDefault:"cdStatefulTabDefault"}})}}},70946:(Z,A,r)=>{r.d(A,{c:()=>u});var a=r(53648),l=r(29841),T=r.n(l),E=r(87536);class u{constructor(p){this.ngControl=p}onInput(p){this.setValue(p)}setValue(p){p=T().isString(p)?p.trim():p,this.ngControl.control.setValue(p)}static{this.\u0275fac=function(S){return new(S||u)(E.\u0275\u0275directiveInject(a.NgControl))}}static{this.\u0275dir=E.\u0275\u0275defineDirective({type:u,selectors:[["","cdTrim",""]],hostBindings:function(S,_){1&S&&E.\u0275\u0275listener("input",function(R){return _.onInput(R.target.value)})}})}}},67120:(Z,A,r)=>{var a,e;r.d(A,{v:()=>a}),(e=a||(a={})).asc="asc",e.desc="desc"},2148:(Z,A,r)=>{var a,e;r.d(A,{x:()=>a}),(e=a||(a={})).bold="bold",e.sparkline="sparkline",e.perSecond="perSecond",e.checkIcon="checkIcon",e.routerLink="routerLink",e.executing="executing",e.classAdding="classAdding",e.badge="badge",e.map="map",e.truncate="truncate",e.timeAgo="timeAgo",e.path="path",e.tooltip="tooltip",e.copy="copy"},67344:(Z,A,r)=>{var a,u,e,l,T,E,f;r.d(A,{Ri:()=>E,dR:()=>a,sj:()=>T,td:()=>f,xg:()=>l,xm:()=>e}),(u=a||(a={})).USEDCAPACITY="ceph_cluster_total_used_bytes",u.WRITEIOPS="sum(rate(ceph_pool_wr[1m]))",u.READIOPS="sum(rate(ceph_pool_rd[1m]))",u.READLATENCY="avg_over_time(ceph_osd_apply_latency_ms[1m])",u.WRITELATENCY="avg_over_time(ceph_osd_commit_latency_ms[1m])",u.READCLIENTTHROUGHPUT="sum(rate(ceph_pool_rd_bytes[1m]))",u.WRITECLIENTTHROUGHPUT="sum(rate(ceph_pool_wr_bytes[1m]))",u.RECOVERYBYTES="sum(rate(ceph_osd_recovery_bytes[1m]))",function(u){u.OSD_NEARFULL="ceph_osd_nearfull_ratio",u.OSD_FULL="ceph_osd_full_ratio"}(e||(e={})),function(u){u.RGW_REQUEST_PER_SECOND="sum(rate(ceph_rgw_req[1m]))",u.AVG_GET_LATENCY="(sum(rate(ceph_rgw_op_get_obj_lat_sum[1m])) / sum(rate(ceph_rgw_op_get_obj_lat_count[1m]))) * 1000",u.AVG_PUT_LATENCY="(sum(rate(ceph_rgw_op_put_obj_lat_sum[1m])) / sum(rate(ceph_rgw_op_put_obj_lat_count[1m]))) * 1000",u.GET_BANDWIDTH="sum(rate(ceph_rgw_op_get_obj_bytes[1m]))",u.PUT_BANDWIDTH="sum(rate(ceph_rgw_op_put_obj_bytes[1m]))"}(l||(l={})),function(u){u.ALERTS_COUNT='count(ALERTS{alertstate="firing"}) or vector(0)',u.CLUSTER_COUNT="count(ceph_health_status) or vector(0)",u.HEALTH_OK_COUNT="count(ceph_health_status==0) or vector(0)",u.HEALTH_WARNING_COUNT="count(ceph_health_status==1) or vector(0)",u.HEALTH_ERROR_COUNT="count(ceph_health_status==2) or vector(0)",u.TOTAL_CLUSTERS_CAPACITY="sum(ceph_cluster_total_bytes) or vector(0)",u.TOTAL_USED_CAPACITY="sum(ceph_cluster_by_class_total_used_bytes) or vector(0)",u.HEALTH_STATUS="ceph_health_status",u.MGR_METADATA="ceph_mgr_metadata",u.TOTAL_CAPACITY="ceph_cluster_total_bytes",u.USED_CAPACITY="ceph_cluster_total_used_bytes",u.POOLS="count by (cluster) (ceph_pool_metadata) or vector(0)",u.OSDS="count by (cluster) (ceph_osd_metadata) or vector(0)",u.CRITICAL_ALERTS_COUNT='count(ALERTS{alertstate="firing",severity="critical"}) or vector(0)',u.WARNING_ALERTS_COUNT='count(ALERTS{alertstate="firing",severity="warning"}) or vector(0)',u.ALERTS='ALERTS{alertstate="firing"}',u.HOSTS="sum by (hostname, cluster) (group by (hostname, cluster) (ceph_osd_metadata)) or vector(0)",u.TOTAL_HOSTS="count by (cluster) (ceph_osd_metadata) or vector(0)",u.CLUSTER_ALERTS='count by (cluster) (ALERTS{alertstate="firing"}) or vector(0)',u.FEDERATE_UP_METRIC="up"}(T||(T={})),function(u){u.CLUSTER_CAPACITY_UTILIZATION="topk(5, ceph_cluster_total_used_bytes)",u.CLUSTER_IOPS_UTILIZATION="topk(5, sum by (cluster) (rate(ceph_pool_wr[1m])) + sum by (cluster) (rate(ceph_pool_rd[1m])) )",u.CLUSTER_THROUGHPUT_UTILIZATION="topk(5, sum by (cluster) (rate(ceph_pool_wr_bytes[1m])) + sum by (cluster) (rate(ceph_pool_rd_bytes[1m])) )"}(E||(E={})),function(u){u.POOL_CAPACITY_UTILIZATION="topk(5, ceph_pool_bytes_used/ceph_pool_max_avail * on(pool_id, cluster) group_left(instance, name) ceph_pool_metadata)",u.POOL_IOPS_UTILIZATION="topk(5, (rate(ceph_pool_rd[1m]) + rate(ceph_pool_wr[1m])) * on(pool_id, cluster) group_left(instance, name) ceph_pool_metadata )",u.POOL_THROUGHPUT_UTILIZATION="topk(5, (irate(ceph_pool_rd_bytes[1m]) + irate(ceph_pool_wr_bytes[1m])) * on(pool_id, cluster) group_left(instance, name) ceph_pool_metadata )"}(f||(f={}))},22453:(Z,A,r)=>{var a,e;r.d(A,{r:()=>a}),(e=a||(a={})).medium="medium",e.high="high"},62739:(Z,A,r)=>{var a,l,e;r.d(A,{L:()=>e,m:()=>a}),(l=a||(a={})).HEALTH_ERR="fa fa-exclamation-circle",l.HEALTH_WARN="fa fa-exclamation-triangle",l.HEALTH_OK="fa fa-check-circle",function(l){l.critical="danger",l.warning="warning",l.info="info"}(e||(e={}))},46045:(Z,A,r)=>{var a,T,e;r.d(A,{FI:()=>a,lK:()=>e}),(T=a||(a={})).add="add",T.addCircle="add--filled",T.minusCircle="subtract--alt",T.edit="edit",T.destroy="close",T.exchange="arrows--horizontal",T.copy="copy",T.clipboard="copy--file",T.flatten="unlink",T.trash="trash-can",T.lock="locked",T.unlock="unlocked",T.clone="fa fa-clone",T.undo="fa fa-undo",T.search="search",T.start="fa fa-play",T.stop="fa fa-stop",T.analyse="fa fa-stethoscope",T.deepCheck="settings",T.cogs="fa fa-cogs",T.reweight="scales",T.up="arrow--up",T.left="arrow--left",T.right="arrow--right",T.down="arrow--down",T.erase="fa fa-eraser",T.expand="maximize",T.user="user",T.users="user--multiple",T.share="share",T.key="password",T.warning="warning--alt--filled",T.info="information",T.infoCircle="information--filled",T.questionCircle="help",T.danger="warning--filled",T.success="checkmark--filled",T.check="checkmark",T.show="view",T.paragraph="fa fa-paragraph",T.terminal="fa fa-terminal",T.magic="fa fa-magic",T.hourglass="fa fa-hourglass-o",T.filledHourglass="fa fa-hourglass",T.table="fa fa-table",T.spinner="fa fa-spinner",T.refresh="renew",T.bullseye="fa fa-bullseye",T.disk="fa fa-hdd-o",T.server="fa fa-server",T.filter="filter",T.lineChart="analytics",T.signOut="fa fa-sign-out",T.circle="dot-mark",T.bell="notification",T.mute="notification--off",T.leftArrow="caret--left",T.rightArrow="caret--right",T.downArrow="caret--down",T.flag="fa fa-flag",T.clearFilters="close--filled",T.download="download",T.upload="fa fa-upload",T.code="code",T.document="document",T.wrench="tools",T.enter="fa fa-sign-in",T.exit="fa fa-sign-out",T.restart="fa fa-history",T.deploy="cube",T.cubes="fa fa-cubes",T.sitemap="fa fa-sitemap",T.database="fa fa-database",T.bars="fa fa-bars",T.navicon="fa fa-navicon",T.areaChart="fa fa-area-chart",T.eye="fa fa-eye",T.calendar="fa fa-calendar",T.externalUrl="fa fa-external-link",T.nfsExport="fa fa-server",T.launch="launch",T.parentChild="parent-child",T.dataTable="data-table",T.idea="idea",T.userAccessLocked="user--access-locked",T.size16="16",T.size20="20",T.size24="24",T.size32="32",T.large="fa fa-lg",T.large2x="fa fa-2x",T.large3x="fa fa-3x",T.stack="fa fa-stack",T.stack1x="fa fa-stack-1x",T.stack2x="fa fa-stack-2x",T.pulse="fa fa-pulse",T.spin="fa fa-spin",T.inverse="fa fa-inverse",function(T){T.size16="16",T.size20="20",T.size24="24",T.size32="32"}(e||(e={}))},88285:(Z,A,r)=>{var a,e;r.d(A,{_:()=>a}),(e=a||(a={}))[e.error=0]="error",e[e.info=1]="info",e[e.success=2]="success"},29130:(Z,A,r)=>{var a,e;r.d(A,{k:()=>a}),(e=a||(a={}))[e.ValueOk=0]="ValueOk",e[e.ValueStale=1]="ValueStale",e[e.ValueNone=2]="ValueNone",e[e.ValueException=3]="ValueException"},43808:(Z,A,r)=>{r.d(A,{$:()=>f});var a=r(53648),l=r(58384),T=r(87536);class f extends a.UntypedFormBuilder{group(F,p=null){const S=super.group(F,p);return new l.$(S.controls,S.validator,S.asyncValidator)}static{this.\u0275fac=(()=>{let F;return function(S){return(F||(F=T.\u0275\u0275getInheritedFactory(f)))(S||f)}})()}static{this.\u0275prov=T.\u0275\u0275defineInjectable({token:f,factory:f.\u0275fac,providedIn:"root"})}}},58384:(Z,A,r)=>{r.d(A,{$:()=>l});var a=r(53648);class l extends a.UntypedFormGroup{constructor(E,f,u){super(E,f,u),this.controls=E}get(E){const f=this._get(E);if(!f)throw new Error(`Control '${E}' could not be found!`);return f}_get(E){return super.get(E)||Object.values(this.controls).filter(f=>f.get).map(f=>f instanceof l?f._get(E):f.get(E)).find(f=>!!f)}getValue(E){return this.get(E).value}silentSet(E,f){this.get(E).setValue(f,{emitEvent:!1})}showError(E,f,u){const F=this.get(E);return(f?.submitted||F.dirty)&&(u?F.hasError(u):F.invalid)}}},74902:(Z,A,r)=>{r.d(A,{g:()=>T,r:()=>l});var l,E,a=r(3600);(E=l||(l={}))[E.Loading=0]="Loading",E[E.Ready=1]="Ready",E[E.Error=2]="Error",E[E.None=3]="None";class T extends a.BaseModal{constructor(){super(),this.loading=l.Loading}loadingStart(){this.loading=l.Loading}loadingReady(){this.loading=l.Ready}loadingError(){this.loading=l.Error}loadingNone(){this.loading=l.None}}},3687:(Z,A,r)=>{r.d(A,{xF:()=>R,xQ:()=>M});var a=r(53648),l=r(29841),T=r.n(l),E=r(95631),u=r(50619),p=r(73651),S=r(12540),_=r(50390),v=r.n(_);function R(b){return null==b||0===b.length}class M{static email(m){return R(m.value)?null:a.Validators.email(m)}static ip(m=0){const g=/^((25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\.){3}(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)$/i,O=/^(?:[a-f0-9]{1,4}:){7}[a-f0-9]{1,4}$/i;return 4===m?a.Validators.pattern(g):6===m?a.Validators.pattern(O):a.Validators.pattern(new RegExp(g.source+"|"+O.source))}static number(m=!0){return m?a.Validators.pattern(/^-?[0-9]+$/i):a.Validators.pattern(/^[0-9]+$/i)}static decimalNumber(m=!0){return m?a.Validators.pattern(/^-?[0-9]+(.[0-9]+)?$/i):a.Validators.pattern(/^[0-9]+(.[0-9]+)?$/i)}static sslCert(){return a.Validators.pattern(/^-----BEGIN CERTIFICATE-----(\n|\r|\f)((.+)?((\n|\r|\f).+)*)(\n|\r|\f)-----END CERTIFICATE-----[\n\r\f]*$/)}static sslPrivKey(){return a.Validators.pattern(/^-----BEGIN RSA PRIVATE KEY-----(\n|\r|\f)((.+)?((\n|\r|\f).+)*)(\n|\r|\f)-----END RSA PRIVATE KEY-----[\n\r\f]*$/)}static pemCert(){return a.Validators.pattern(/^-----BEGIN .+-----$.+^-----END .+-----$/ms)}static requiredIf(m,g){let O=!1;return N=>(!O&&N.parent&&(Object.keys(m).forEach(z=>{N.parent.get(z).valueChanges.subscribe(()=>{N.updateValueAndValidity({emitEvent:!1})})}),O=!0),Object.keys(m).every(z=>{if(!N.parent)return!1;const B=N.parent.get(z).value,q=m[z];if(T().isObjectLike(q)){let Q=!1;switch(q.op){case"empty":Q=T().isEmpty(B);break;case"!empty":Q=!T().isEmpty(B);break;case"equal":Q=B===q.arg1;break;case"!equal":Q=B!==q.arg1;break;case"minLength":T().isString(B)&&(Q=B.length>=q.arg1);break;case"minValue":T().isNumber(B)&&(Q=B>=q.arg1)}return Q}return B===q})&&(T().isFunction(g)?g.call(g,N.value):R(N.value))?{required:!0}:null)}static composeIf(m,g){let O=!1;return N=>(!O&&N.parent&&(Object.keys(m).forEach(c=>{N.parent.get(c).valueChanges.subscribe(()=>{N.updateValueAndValidity({emitEvent:!1})})}),O=!0),Object.keys(m).every(c=>N.parent&&N.parent.get(c).value===m[c])?a.Validators.compose(g)(N):null)}static custom(m,g){return O=>{const N=g.call(this,O.value);return N?{[m]:N}:null}}static validateIf(m,g,O,N=[],c=[]){O=O.concat(N),m.setValidators(z=>g.call(this)?a.Validators.compose(O)(z):N.length>0?a.Validators.compose(N)(z):null),c.forEach(z=>{z.valueChanges.subscribe(()=>{m.updateValueAndValidity({emitEvent:!1})})})}static match(m,g){return O=>{const N=O.get(m),c=O.get(g);if(!N||!c)return null;if(N.value!==c.value)c.setErrors({match:!0});else if(c.hasError("match")){const B=c.errors;T().unset(B,"match"),c.setErrors(T().isEmpty(T().keys(B))?null:B)}return null}}static unique(m,g=null,O,N=!1,...c){let z;return B=>B.pristine||R(B.value)?(0,E.of)(null):(z=B.value,T().isFunction(O)&&null!==O()&&""!==O()&&(z=N?`${B.value}$${O()}`:`${O()}$${B.value}`),(0,E.timer)(500).pipe((0,u.switchMapTo)(m.call(g,z,...c)),(0,u.map)(q=>q?{notUnique:!0}:null),(0,u.take)(1)))}static uuid(m=!1){const g=/^[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}$/i;return O=>O.pristine&&O.untouched||!m&&!O.value||g.test(O.value)?null:{invalidUuid:"This is not a valid UUID"}}static binaryMin(m){return g=>{const O=new S.k,N=(new S.k).toBytes(g.value);if(m<=N)return null;const c=new p.l(O).transform(m);return{binaryMin:()=>$localize`Size has to be at least ${c} or more`}}}static binaryMax(m){return g=>{const O=new S.k,N=O.toBytes(g.value);if(m>=N)return null;const c=new p.l(O).transform(m);return{binaryMax:()=>$localize`Size has to be at most ${c} or less`}}}static passwordPolicy(m,g,O){return N=>{if(N.pristine||""===N.value)return T().isFunction(O)&&O(!0,0),(0,E.of)(null);let c;return T().isFunction(g)&&(c=g()),(0,E.timer)(500).pipe((0,u.switchMapTo)(T().invoke(m,"validatePassword",N.value,c)),(0,u.map)(z=>(T().isFunction(O)&&O(z.valid,z.credits,z.valuation),z.valid?null:{passwordPolicy:!0})),(0,u.take)(1))}}static bucketName(){return m=>{if(m.pristine||!m.value)return(0,E.of)({required:!0});const g=[];let O;return g.push(()=>{const z=m.value;let B=!0;return(/^((25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\.){3}(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)$/i.test(z)||/^(?:[a-f0-9]{1,4}:){7}[a-f0-9]{1,4}$/i.test(z))&&(O="ipAddress",B=!1),B}),g.push(N=>T().inRange(N.length,3,64)?!!/^[0-9a-z.-]+$/.test(m.value)||(O="bucketNameInvalid",!1):(O="shouldBeInRange",!1)),g.push(N=>{const c=T().split(N,".");return T().every(c,z=>z!==T().toLower(z)||z.includes("_")?(O="containsUpperCase",!1):/^[0-9a-z-]+$/.test(z)?T().every([0,z.length-1],B=>(O="lowerCaseOrNumber",/[a-z]/.test(z[B])||T().isInteger(T().parseInt(z[B])))):(O="onlyLowerCaseAndNumbers",!1))}),T().every(g,N=>N(m.value))?(0,E.of)(null):(0,E.of)((()=>{switch(O){case"onlyLowerCaseAndNumbers":return{onlyLowerCaseAndNumbers:!0};case"shouldBeInRange":return{shouldBeInRange:!0};case"ipAddress":return{ipAddress:!0};case"containsUpperCase":return{containsUpperCase:!0};case"lowerCaseOrNumber":return{lowerCaseOrNumber:!0};default:return{bucketNameInvalid:!0}}})())}}static bucketExistence(m,g){return O=>O.pristine||!O.value?(0,E.of)({required:!0}):(0,E.timer)(500).pipe((0,u.switchMapTo)(g.exists(O.value)),(0,u.map)(N=>N===m?null:{bucketNameNotAllowed:!0}))}static json(){return m=>{if(!m.value)return null;try{return JSON.parse(m.value),null}catch{return{invalidJson:!0}}}}static xml(){return m=>m.value&&(new DOMParser).parseFromString(m.value,"application/xml").querySelector("parsererror")?{invalidXml:!0}:null}static jsonOrXml(){return m=>{if(!m.value)return null;if(m.value.trim().startsWith("<"))return(new DOMParser).parseFromString(m.value,"application/xml").querySelector("parsererror")?{invalidXml:!0}:null;try{return JSON.parse(m.value),null}catch{return{invalidJson:!0}}}}static oauthAddressTest(){const m=/^((\d{1,3}\.){3}\d{1,3}|([a-zA-Z0-9-_]+\.)*[a-zA-Z0-9-_]+)/;return g=>{if(!g.value)return null;if(!g.value.includes(":"))return{invalidAddress:!0};const[O,N]=g.value.split(":"),c=m.test(O),z=Number(N)>=0&&Number(N)<=65535;return{invalidAddress:!(c&&z)}}}static url(m){const g=m.value;return T().isEmpty(g)?null:(g.includes(",")?g.split(","):[g]).filter(c=>!v().isURL(c,{require_protocol:!0,allow_underscores:!0,require_tld:!1})&&!v().isIP(c)).length>0?{invalidURL:!0}:null}}},9300:(Z,A,r)=>{r.d(A,{u:()=>B});var a=r(56207),e=r(76218),T=r(2155),E=r(50813),f=r(85481),u=r(91974),p=r(53648),_=r(50619),R=r(29841),P=r.n(R),M=r(87536),m=r(59781),g=r(45451);const N=q=>({formState:q});function c(q,Q){if(1&q){const G=M.\u0275\u0275getCurrentView();M.\u0275\u0275elementStart(0,"form",6),M.\u0275\u0275listener("ngSubmit",function(){M.\u0275\u0275restoreView(G);const oe=M.\u0275\u0275nextContext().ngIf,fe=M.\u0275\u0275nextContext();return M.\u0275\u0275resetView(fe.submit(fe.model,oe.taskInfo))}),M.\u0275\u0275elementStart(1,"div",7),M.\u0275\u0275element(2,"formly-form",8),M.\u0275\u0275elementEnd(),M.\u0275\u0275elementStart(3,"div",9)(4,"cd-form-button-panel",10),M.\u0275\u0275listener("submitActionEvent",function(){M.\u0275\u0275restoreView(G);const oe=M.\u0275\u0275nextContext().ngIf,fe=M.\u0275\u0275nextContext();return M.\u0275\u0275resetView(fe.submit(fe.model,oe.taskInfo))}),M.\u0275\u0275elementEnd()()()}if(2&q){const G=M.\u0275\u0275nextContext().ngIf,D=M.\u0275\u0275nextContext();M.\u0275\u0275property("formGroup",D.form),M.\u0275\u0275advance(2),M.\u0275\u0275property("form",D.form)("fields",G.controlSchema)("model",D.model)("options",M.\u0275\u0275pureFunction1(8,N,G.uiSchema)),M.\u0275\u0275advance(2),M.\u0275\u0275property("form",D.formDir)("submitText",G.title)("disabled",!D.form.valid)}}function z(q,Q){if(1&q&&(M.\u0275\u0275elementStart(0,"div",3)(1,"div",4),M.\u0275\u0275i18n(2,0),M.\u0275\u0275elementEnd(),M.\u0275\u0275template(3,c,5,10,"form",5),M.\u0275\u0275elementEnd()),2&q){const G=Q.ngIf;M.\u0275\u0275advance(2),M.\u0275\u0275i18nExp(G.title),M.\u0275\u0275i18nApply(2),M.\u0275\u0275advance(),M.\u0275\u0275property("ngIf",G.uiSchema)}}class B{constructor(Q,G,D,oe,fe){this.dataGatewayService=Q,this.activatedRoute=G,this.taskWrapper=D,this.location=oe,this.router=fe,this.model={},this.task={message:"",id:""},this.form=new p.UntypedFormGroup({}),this.key=""}ngOnInit(){this.activatedRoute.queryParamMap.subscribe(Q=>{this.formUISchema$=this.activatedRoute.data.pipe((0,_.mergeMap)(D=>{this.resource=D.resource||this.resource;const oe="/"+this.activatedRoute.snapshot.url.join("/"),fe=Q.get("key")||"";return this.dataGatewayService.form(`ui-${this.resource}`,oe,fe)})),this.formUISchema$.subscribe(D=>{this.methodType=D.methodType,this.model=D.model}),this.urlFormName=this.router.url.split("/").pop();const G=this.urlFormName.indexOf("?");G>0&&(this.urlFormName=this.urlFormName.substring(0,G))})}readFileAsText(Q){return(0,a.A)(function*(){let G=new FileReader,D="";return yield new Promise(oe=>{G.onload=fe=>{D=G.result.toString(),oe(!0)},G.readAsText(Q)}),D})()}preSubmit(Q){var G=this;return(0,a.A)(function*(){for(const[D,oe]of Object.entries(Q))if(oe instanceof FileList){let fe=oe[0],ye=yield G.readFileAsText(fe);Q[D]=ye}})()}submit(Q,G){var D=this;return(0,a.A)(function*(){if(Q){let oe={};P().forEach(G.metadataFields,fe=>{oe[fe]=Q[fe]}),oe.__message=G.message,yield D.preSubmit(Q),D.taskWrapper.wrapTaskAroundCall({task:new f.O(`crud-component/${D.urlFormName}`,oe),call:D.dataGatewayService.submit(D.resource,Q,D.methodType)}).subscribe({complete:()=>{D.location.back()}})}})()}static{this.\u0275fac=function(G){return new(G||B)(M.\u0275\u0275directiveInject(T.w),M.\u0275\u0275directiveInject(e.ActivatedRoute),M.\u0275\u0275directiveInject(E.a),M.\u0275\u0275directiveInject(u.Location),M.\u0275\u0275directiveInject(e.Router))}}static{this.\u0275cmp=M.\u0275\u0275defineComponent({type:B,selectors:[["cd-crud-form"]],decls:3,vars:3,consts:()=>{let Q;return Q=$localize`:form title␟45e4757488844a6001b4726cd59c8dc42387ae3e␟1086284591946142810:${"\ufffd0\ufffd"}:INTERPOLATION:`,[Q,[1,"cd-col-form"],["class","card pb-0",4,"ngIf"],[1,"card","pb-0"],[1,"card-header"],[3,"formGroup","ngSubmit",4,"ngIf"],[3,"ngSubmit","formGroup"],[1,"card-body","position-relative"],[3,"form","fields","model","options"],[1,"card-footer"],["wrappingClass","text-right",3,"submitActionEvent","form","submitText","disabled"]]},template:function(G,D){1&G&&(M.\u0275\u0275elementStart(0,"div",1),M.\u0275\u0275template(1,z,4,2,"div",2),M.\u0275\u0275pipe(2,"async"),M.\u0275\u0275elementEnd()),2&G&&(M.\u0275\u0275advance(),M.\u0275\u0275property("ngIf",M.\u0275\u0275pipeBind1(2,1,D.formUISchema$)))},dependencies:[u.NgIf,p.\u0275NgNoValidate,p.NgControlStatusGroup,m.e,p.FormGroupDirective,g.FormlyForm,u.AsyncPipe],styles:["json-schema-form label.control-label.hidden{display:none}  json-schema-form .form-group.schema-form-submit p{display:none}  json-schema-form legend{font-weight:100!important}  json-schema-form .card-footer{border:1px solid rgba(0,0,0,.125);left:-1px;width:-webkit-fill-available;width:-moz-available}"]})}}},8990:(Z,A,r)=>{r.d(A,{o:()=>b});var a=r(45451),l=r(29841),E=r(46045),f=r(87536),F=r(91974);function S(m,g){if(1&m&&(f.\u0275\u0275elementStart(0,"legend",9),f.\u0275\u0275i18n(1,0),f.\u0275\u0275elementEnd()),2&m){const O=f.\u0275\u0275nextContext();f.\u0275\u0275advance(),f.\u0275\u0275i18nExp(O.props.label),f.\u0275\u0275i18nApply(1)}}function _(m,g){if(1&m&&(f.\u0275\u0275elementStart(0,"p"),f.\u0275\u0275i18n(1,1),f.\u0275\u0275elementEnd()),2&m){const O=f.\u0275\u0275nextContext();f.\u0275\u0275advance(),f.\u0275\u0275i18nExp(O.props.description),f.\u0275\u0275i18nApply(1)}}function v(m,g){if(1&m){const O=f.\u0275\u0275getCurrentView();f.\u0275\u0275elementStart(0,"button",13),f.\u0275\u0275listener("click",function(){f.\u0275\u0275restoreView(O);const c=f.\u0275\u0275nextContext().index,z=f.\u0275\u0275nextContext();return f.\u0275\u0275resetView(z.remove(c))}),f.\u0275\u0275element(1,"i",14),f.\u0275\u0275elementEnd()}if(2&m){const O=f.\u0275\u0275nextContext(2);f.\u0275\u0275advance(),f.\u0275\u0275property("ngClass",O.icons.trash)}}function R(m,g){if(1&m){const O=f.\u0275\u0275getCurrentView();f.\u0275\u0275elementStart(0,"div",10),f.\u0275\u0275element(1,"formly-field",11),f.\u0275\u0275elementStart(2,"div",12)(3,"button",13),f.\u0275\u0275listener("click",function(){f.\u0275\u0275restoreView(O);const c=f.\u0275\u0275nextContext();return f.\u0275\u0275resetView(c.addWrapper())}),f.\u0275\u0275element(4,"i",14),f.\u0275\u0275elementEnd(),f.\u0275\u0275template(5,v,2,1,"button",15),f.\u0275\u0275elementEnd()()}if(2&m){const O=g.$implicit,N=f.\u0275\u0275nextContext();f.\u0275\u0275advance(),f.\u0275\u0275property("field",O),f.\u0275\u0275advance(3),f.\u0275\u0275property("ngClass",N.icons.add),f.\u0275\u0275advance(),f.\u0275\u0275property("ngIf",!1!==O.props.removable)}}function P(m,g){if(1&m){const O=f.\u0275\u0275getCurrentView();f.\u0275\u0275elementStart(0,"div",16)(1,"button",17),f.\u0275\u0275listener("click",function(){f.\u0275\u0275restoreView(O);const c=f.\u0275\u0275nextContext();return f.\u0275\u0275resetView(c.addWrapper())}),f.\u0275\u0275i18nStart(2,2),f.\u0275\u0275element(3,"i",14),f.\u0275\u0275i18nEnd(),f.\u0275\u0275elementEnd()()}if(2&m){const O=f.\u0275\u0275nextContext();f.\u0275\u0275advance(3),f.\u0275\u0275property("ngClass",O.icons.add),f.\u0275\u0275i18nExp(O.props.label),f.\u0275\u0275i18nApply(2)}}function M(m,g){if(1&m&&(f.\u0275\u0275elementStart(0,"span",18),f.\u0275\u0275element(1,"formly-validation-message",19),f.\u0275\u0275elementEnd()),2&m){const O=f.\u0275\u0275nextContext();f.\u0275\u0275advance(),f.\u0275\u0275property("field",O.field)}}class b extends a.FieldArrayType{constructor(){super(...arguments),this.icons=E.FI}ngOnInit(){this.propagateTemplateOptions()}addWrapper(){this.add(),this.propagateTemplateOptions()}propagateTemplateOptions(){(0,l.forEach)(this.field.fieldGroup,g=>{"object"==g.type&&(g.props.templateOptions=this.props.templateOptions.objectTemplateOptions)})}static{this.\u0275fac=(()=>{let g;return function(N){return(g||(g=f.\u0275\u0275getInheritedFactory(b)))(N||b)}})()}static{this.\u0275cmp=f.\u0275\u0275defineComponent({type:b,selectors:[["cd-formly-array-type"]],features:[f.\u0275\u0275InheritDefinitionFeature],decls:6,vars:5,consts:()=>{let g,O,N;return g=$localize`:␟f124d8a600e88a7b9300bfdf66acc6fca16885b5␟4980505052150524488:${"\ufffd0\ufffd"}:INTERPOLATION:`,O=$localize`:␟fb297f5839ad020a53874818ccc997c86472b399␟4780807890552181554:${"\ufffd0\ufffd"}:INTERPOLATION:`,N=$localize`:␟ab0701b56284ec4615610273df41c5e48da7216e␟2168715863162585756:${"\ufffd#3\ufffd"}:START_ITALIC_TEXT:${"\ufffd/#3\ufffd"}:CLOSE_ITALIC_TEXT: Add ${"\ufffd0\ufffd"}:INTERPOLATION: `,[g,O,N,[1,"mb-3"],["class","cd-header mt-1",4,"ngIf"],[4,"ngIf"],["class","d-flex",4,"ngFor","ngForOf"],["class","text-right",4,"ngIf"],["class","invalid-feedback","role","alert",4,"ngIf"],[1,"cd-header","mt-1"],[1,"d-flex"],[1,"col",3,"field"],[1,"action-btn"],["type","button",1,"btn","btn-light","ms-1",3,"click"],[3,"ngClass"],["class","btn btn-light ms-1","type","button",3,"click",4,"ngIf"],[1,"text-right"],["type","button",1,"btn","btn-light",3,"click"],["role","alert",1,"invalid-feedback"],[3,"field"]]},template:function(O,N){1&O&&(f.\u0275\u0275elementStart(0,"div",3),f.\u0275\u0275template(1,S,2,1,"legend",4)(2,_,2,1,"p",5)(3,R,6,3,"div",6)(4,P,4,2,"div",7)(5,M,2,1,"span",8),f.\u0275\u0275elementEnd()),2&O&&(f.\u0275\u0275advance(),f.\u0275\u0275property("ngIf",N.props.label),f.\u0275\u0275advance(),f.\u0275\u0275property("ngIf",N.props.description),f.\u0275\u0275advance(),f.\u0275\u0275property("ngForOf",N.field.fieldGroup),f.\u0275\u0275advance(),f.\u0275\u0275property("ngIf",0===N.field.fieldGroup.length),f.\u0275\u0275advance(),f.\u0275\u0275property("ngIf",N.showError&&N.formControl.errors))},dependencies:[F.NgClass,F.NgForOf,F.NgIf,a.FormlyField,a.\u0275FormlyValidationMessage],styles:[".action-btn[_ngcontent-%COMP%]{margin-top:2.4rem}"]})}}},27202:(Z,A,r)=>{r.d(A,{R:()=>u});var a=r(45451),l=r(87536),E=r(53648);class u extends a.FieldType{static{this.\u0275fac=(()=>{let p;return function(_){return(p||(p=l.\u0275\u0275getInheritedFactory(u)))(_||u)}})()}static{this.\u0275cmp=l.\u0275\u0275defineComponent({type:u,selectors:[["cd-formly-input-type"]],features:[l.\u0275\u0275InheritDefinitionFeature],decls:1,vars:2,consts:[[1,"form-control","col-form-input",3,"formControl","formlyAttributes"]],template:function(S,_){1&S&&l.\u0275\u0275element(0,"input",0),2&S&&l.\u0275\u0275property("formControl",_.formControl)("formlyAttributes",_.field)},dependencies:[E.DefaultValueAccessor,E.NgControlStatus,E.FormControlDirective,a.\u0275FormlyAttributes]})}}},90876:(Z,A,r)=>{r.d(A,{G:()=>_});var a=r(45451),l=r(87536),E=r(91974);function u(v,R){if(1&v&&(l.\u0275\u0275elementStart(0,"legend",8),l.\u0275\u0275i18n(1,0),l.\u0275\u0275elementEnd()),2&v){const P=l.\u0275\u0275nextContext();l.\u0275\u0275advance(),l.\u0275\u0275i18nExp(P.props.label),l.\u0275\u0275i18nApply(1)}}function F(v,R){if(1&v&&(l.\u0275\u0275elementStart(0,"p"),l.\u0275\u0275i18n(1,1),l.\u0275\u0275elementEnd()),2&v){const P=l.\u0275\u0275nextContext();l.\u0275\u0275advance(),l.\u0275\u0275i18nExp(P.props.description),l.\u0275\u0275i18nApply(1)}}function p(v,R){if(1&v&&(l.\u0275\u0275elementStart(0,"div",9),l.\u0275\u0275element(1,"formly-validation-message",10),l.\u0275\u0275elementEnd()),2&v){const P=l.\u0275\u0275nextContext();l.\u0275\u0275advance(),l.\u0275\u0275property("field",P.field)}}function S(v,R){if(1&v&&l.\u0275\u0275element(0,"formly-field",11),2&v){const P=R.$implicit;l.\u0275\u0275property("field",P)}}class _ extends a.FieldType{get inputClass(){const R=this.props.templateOptions?.layoutType,P="d-flex justify-content-center align-content-stretch gap-3";return"row"==R?P+" flex-row":P+" flex-column"}static{this.\u0275fac=(()=>{let R;return function(M){return(R||(R=l.\u0275\u0275getInheritedFactory(_)))(M||_)}})()}static{this.\u0275cmp=l.\u0275\u0275defineComponent({type:_,selectors:[["cd-formly-object-type"]],features:[l.\u0275\u0275InheritDefinitionFeature],decls:6,vars:5,consts:()=>{let R,P;return R=$localize`:␟f124d8a600e88a7b9300bfdf66acc6fca16885b5␟4980505052150524488:${"\ufffd0\ufffd"}:INTERPOLATION:`,P=$localize`:␟fb297f5839ad020a53874818ccc997c86472b399␟4780807890552181554:${"\ufffd0\ufffd"}:INTERPOLATION:`,[R,P,[1,"mb-3"],["class","cd-col-form-label",4,"ngIf"],[4,"ngIf"],["class","alert alert-danger","role","alert",4,"ngIf"],[3,"ngClass"],["class","flex-grow-1",3,"field",4,"ngFor","ngForOf"],[1,"cd-col-form-label"],["role","alert",1,"alert","alert-danger"],[3,"field"],[1,"flex-grow-1",3,"field"]]},template:function(P,M){1&P&&(l.\u0275\u0275elementStart(0,"div",2),l.\u0275\u0275template(1,u,2,1,"legend",3)(2,F,2,1,"p",4)(3,p,2,1,"div",5),l.\u0275\u0275elementStart(4,"div",6),l.\u0275\u0275template(5,S,1,1,"formly-field",7),l.\u0275\u0275elementEnd()()),2&P&&(l.\u0275\u0275advance(),l.\u0275\u0275property("ngIf",M.props.label),l.\u0275\u0275advance(),l.\u0275\u0275property("ngIf",M.props.description),l.\u0275\u0275advance(),l.\u0275\u0275property("ngIf",M.showError&&M.formControl.errors),l.\u0275\u0275advance(),l.\u0275\u0275property("ngClass",M.inputClass),l.\u0275\u0275advance(),l.\u0275\u0275property("ngForOf",M.field.fieldGroup))},dependencies:[E.NgClass,E.NgForOf,E.NgIf,a.FormlyField,a.\u0275FormlyValidationMessage]})}}},59342:(Z,A,r)=>{r.d(A,{y:()=>u,n:()=>F});var a=r(29841);function e(p){return new Promise((S,_)=>{p.value instanceof FileList&&(p.value,p.value[0].size>4096&&S({file_size:!0}),S(null)),S({not_a_file:!0})})}function l(p){return new Promise((S,_)=>{try{JSON.parse(p.value),S(null)}catch{S({json:!0})}})}function T(p){return new Promise((S,_)=>{p.value.match("^((/)|(/[!-~]+/))$")&&S(null),S({rgwRolePath:!0})})}function E(p){return new Promise((S,_)=>{p.value.match("^[0-9a-zA-Z_+=,.@-]+$")&&S(null),S({rgwRoleName:!0})})}function f(p){return new Promise((S,_)=>{p.value.match("^[0-9.]+$")&&p.value<=12&&p.value>=1&&S(null),S({rgwRoleSessionDuration:!0})})}function u(p,S=void 0){const _=S||p.options?.formState;return _?_.find(v=>v.key==p.key):{}}function F(p,S){const _=u(p,S);let v=[];(0,a.forEach)(_.validators,R=>{switch(R){case"json":v.push(l);break;case"rgwRoleName":v.push(E);break;case"rgwRolePath":v.push(T);break;case"file":v.push(e);break;case"rgwRoleSessionDuration":v.push(f)}}),p.asyncValidators={validation:v}}},84268:(Z,A,r)=>{r.d(A,{p:()=>T,v:()=>l});var a=r(46045),e=r(88285);class l{constructor(f=e._.info,u,F,p,S="Ceph"){this.type=f,this.title=u,this.message=F,this.options=p,this.application=S,this.isFinishedTask=!1,this.classes={Ceph:"ceph-icon",Prometheus:"prometheus-icon"},this.applicationClass=this.classes[this.application]}}class T extends l{constructor(f=new l){super(f.type,f.title,f.message,f.options,f.application),this.config=f,this.alertSilenced=!1,this.textClasses=["text-danger","text-info","text-success"],this.iconClasses=[a.FI.warning,a.FI.info,a.FI.check],this.borderClasses=["border-danger","border-info","border-success"],delete this.config,this.timestamp=(new Date).toJSON(),this.iconClass=this.iconClasses[this.type],this.textClass=this.textClasses[this.type],this.borderClass=this.borderClasses[this.type],this.isFinishedTask=f.isFinishedTask}}},65784:(Z,A,r)=>{r.d(A,{b:()=>a});class a{constructor(l){this.pwdExpirationSpan=0,this.pwdExpirationSpan=l.user_pwd_expiration_span,this.pwdExpirationWarning1=l.user_pwd_expiration_warning_1,this.pwdExpirationWarning2=l.user_pwd_expiration_warning_2}}},48856:(Z,A,r)=>{r.d(A,{n:()=>T});var a=r(36618);class l{constructor(){this.offset=0,this.limit=10,this.pageSize=10}}class T{constructor(f){this.errorConfig={resetData:!0,displayError:!0},this.pageInfo=new l,this.search="",this.sort="+name",this.error=f}toParams(){return Number.isNaN(this.pageInfo.offset)&&(this.pageInfo.offset=0),null===this.pageInfo.limit&&(this.pageInfo.limit=0),this.search||(this.search=""),(!this.sort||this.sort.length<2)&&(this.sort="+name"),new a.HttpParams({fromObject:{offset:String(this.pageInfo.offset*this.pageInfo.limit),limit:String(this.pageInfo.limit),search:this.search,sort:this.sort}})}}},19380:(Z,A,r)=>{r.d(A,{y:()=>a});class a{constructor(l){this._selected=[],l&&(this._selected=l),this.update()}update(){this.hasSelection=this._selected.length>0,this.hasSingleSelection=1===this._selected.length,this.hasMultiSelection=this._selected.length>1}set selected(l){this._selected=l,this.update()}get selected(){return this._selected}add(l){this._selected.push(l),this.update()}first(){return this.hasSelection?this._selected[0]:null}}},77847:(Z,A,r)=>{r.d(A,{I:()=>a});class a{constructor(l,T,E,f){this.customColors={backgroundColor:void 0,borderColor:void 0},this.checkOffset=!1,this.chartEl=l.nativeElement,this.getStyleLeft=E,this.getStyleTop=f,this.tooltipEl=T.nativeElement}customTooltips(l){const T=l.tooltip;if(0===T.opacity)return void(this.tooltipEl.style.opacity=0);if(this.tooltipEl.classList.remove("above","below","no-transform"),T.yAlign?this.tooltipEl.classList.add(T.yAlign):this.tooltipEl.classList.add("no-transform"),T.body){const u=T.title||[],F=T.body.map(_=>_.lines);let p="<thead>";u.forEach(_=>{p+="<tr><th>"+this.getTitle(_)+"</th></tr>"}),p+="</thead><tbody>",F.forEach((_,v)=>{const R=T.labelColors[v];let P="background:"+(this.customColors.backgroundColor||R.backgroundColor);P+="; border-color:"+(this.customColors.borderColor||R.borderColor),P+="; border-width: 2px";p+="<tr><td nowrap>"+('<span class="chartjs-tooltip-key" style="'+P+'"></span>')+this.getBody(_)+"</td></tr>"}),p+="</tbody>";this.tooltipEl.querySelector("table").innerHTML=p}const E=this.chartEl.offsetTop,f=this.chartEl.offsetLeft;if(this.checkOffset){const u=T.width/2;this.tooltipEl.classList.remove("transform-left"),this.tooltipEl.classList.remove("transform-right"),T.caretX-u<0?this.tooltipEl.classList.add("transform-left"):T.caretX+u>this.chartEl.width&&this.tooltipEl.classList.add("transform-right")}this.tooltipEl.style.left=this.getStyleLeft(T,f),this.tooltipEl.style.top=this.getStyleTop(T,E),this.tooltipEl.style.opacity=1,this.tooltipEl.style.fontFamily=T._fontFamily,this.tooltipEl.style.fontSize=T.fontSize,this.tooltipEl.style.fontStyle=T._fontStyle,this.tooltipEl.style.padding="6px 6px"}getBody(l){return l}getTitle(l){return l}}},6107:(Z,A,r)=>{var a,l,e;r.d(A,{M:()=>a,T:()=>e}),(l=a||(a={}))[l.global=0]="global",l[l.pool=1]="pool",l[l.image=2]="image",function(l){l[l.bps=0]="bps",l[l.iops=1]="iops",l[l.milliseconds=2]="milliseconds"}(e||(e={}))},12959:(Z,A,r)=>{r.d(A,{G:()=>e});var a=r(5772);class e extends a.Y{}},85481:(Z,A,r)=>{r.d(A,{O:()=>e});var a=r(5772);class e extends a.Y{}},65218:(Z,A,r)=>{r.d(A,{J:()=>a});class a{static fromString(l){const T=l.split("/");return new this(T[0],T.length>=3?T[1]:null,T.length>=3?T[2]:T[1])}constructor(l,T,E){this.poolName=l,this.namespace=T,this.imageName=E}getNameSpace(){return this.namespace?`${this.namespace}/`:""}toString(){return`${this.poolName}/${this.getNameSpace()}${this.imageName}`}toStringEncoded(){return encodeURIComponent(`${this.poolName}/${this.getNameSpace()}${this.imageName}`)}}},5772:(Z,A,r)=>{r.d(A,{Y:()=>a});class a{constructor(l,T){this.name=l,this.metadata=T}}},88427:(Z,A,r)=>{r.d(A,{S:()=>E});var a=r(29841),e=r.n(a),l=r(87536);class E{transform(u,F=!1){let p=u;return(!e().isArray(u)||e().isArray(u)&&F)&&(p=[u]),p}static{this.\u0275fac=function(F){return new(F||E)}}static{this.\u0275pipe=l.\u0275\u0275definePipe({name:"array",type:E,pure:!0})}}},91822:(Z,A,r)=>{r.d(A,{s:()=>l});var a=r(87536);class l{transform(E,f=$localize`Yes`,u=$localize`No`){return E?f:u}static{this.\u0275fac=function(f){return new(f||l)}}static{this.\u0275pipe=a.\u0275\u0275definePipe({name:"booleanText",type:l,pure:!0})}}},1820:(Z,A,r)=>{r.d(A,{F:()=>l});var a=r(87536);class l{transform(E){let f=!1;switch(E){case!0:case 1:case"y":case"yes":case"t":case"true":case"on":case"1":f=!0}return f}static{this.\u0275fac=function(f){return new(f||l)}}static{this.\u0275pipe=a.\u0275\u0275definePipe({name:"boolean",type:l,pure:!0})}}},71138:(Z,A,r)=>{r.d(A,{Q:()=>u});var a=r(29841),e=r.n(a),l=r(89939),T=r.n(l),E=r(87536);class u{constructor(){}transform(p){if(null===p||""===p)return"";let S;const _=T()().utcOffset();return e().isNumber(p)?S=T().parseZone(T().unix(p)).utc().utcOffset(_).local().format("D/M/YY hh:mm A"):(p=p?.replace?.("Z",""),S=T().parseZone(p).utc().utcOffset(_).local().format("D/M/YY hh:mm A")),S}static{this.\u0275fac=function(S){return new(S||u)}}static{this.\u0275pipe=E.\u0275\u0275definePipe({name:"cdDate",type:u,pure:!0})}}},2464:(Z,A,r)=>{r.d(A,{N:()=>l});var a=r(87536);class l{transform(E){const f=/ceph version\s+[^ ]+\s+\(.+\)\s+(.+)\s+\((.+)\)/.exec(E);return f?"dev"===f[2]?"main":f[1]:E}static{this.\u0275fac=function(f){return new(f||l)}}static{this.\u0275pipe=a.\u0275\u0275definePipe({name:"cephReleaseName",type:l,pure:!0})}}},16748:(Z,A,r)=>{r.d(A,{Z:()=>l});var a=r(87536);class l{transform(E){const f=/ceph version\s+([^ ]+)\s+\(.+\)/.exec(E);return f?f[1]:E}static{this.\u0275fac=function(f){return new(f||l)}}static{this.\u0275pipe=a.\u0275\u0275definePipe({name:"cephShortVersion",type:l,pure:!0})}}},33488:(Z,A,r)=>{r.d(A,{E:()=>T});var a=r(12540),e=r(87536);class T{constructor(f){this.formatter=f}transform(f,u=1){return this.formatter.format_number(f,1024,["B/m","KiB/m","MiB/m","GiB/m","TiB/m","PiB/m","EiB/m","ZiB/m","YiB/m"],u)}static{this.\u0275fac=function(u){return new(u||T)(e.\u0275\u0275directiveInject(a.k,16))}}static{this.\u0275pipe=e.\u0275\u0275definePipe({name:"dimlessBinaryPerMinute",type:T,pure:!0})}}},19116:(Z,A,r)=>{r.d(A,{w:()=>T});var a=r(12540),e=r(87536);class T{constructor(f){this.formatter=f}transform(f,u=1){return this.formatter.format_number(f,1024,["B/s","KiB/s","MiB/s","GiB/s","TiB/s","PiB/s","EiB/s","ZiB/s","YiB/s"],u)}static{this.\u0275fac=function(u){return new(u||T)(e.\u0275\u0275directiveInject(a.k,16))}}static{this.\u0275pipe=e.\u0275\u0275definePipe({name:"dimlessBinaryPerSecond",type:T,pure:!0})}}},73651:(Z,A,r)=>{r.d(A,{l:()=>T});var a=r(12540),e=r(87536);class T{constructor(f){this.formatter=f}transform(f,u=1){return this.formatter.format_number(f,1024,["B","KiB","MiB","GiB","TiB","PiB","EiB","ZiB","YiB"],u)}static{this.\u0275fac=function(u){return new(u||T)(e.\u0275\u0275directiveInject(a.k,16))}}static{this.\u0275pipe=e.\u0275\u0275definePipe({name:"dimlessBinary",type:T,pure:!0})}}},18457:(Z,A,r)=>{r.d(A,{u:()=>T});var a=r(12540),e=r(87536);class T{constructor(f){this.formatter=f}transform(f,u=1){return this.formatter.format_number(f,1e3,["","k","M","G","T","P","E","Z","Y"],u)}static{this.\u0275fac=function(u){return new(u||T)(e.\u0275\u0275directiveInject(a.k,16))}}static{this.\u0275pipe=e.\u0275\u0275definePipe({name:"dimless",type:T,pure:!0})}}},64346:(Z,A,r)=>{r.d(A,{b:()=>l});var a=r(87536);class l{transform(E){if(null===E||E<=0)return"";const f=[[`${Math.floor(E/31536e3)}`,"years"],[`${Math.floor(E%31536e3/86400)}`,"days"],[`${Math.floor(E%86400/3600)}`,"hours"],[`${Math.floor(E%3600/60)}`,"minutes"],[`${Math.floor(E%60)}`,"seconds"]];let u="";for(let F=0,p=f.length;F<p;F++)"0"!==f[F][0]&&(u+=" "+f[F][0]+" "+("1"===f[F][0]?f[F][1].substr(0,f[F][1].length-1):f[F][1]));return u.trim()||"1 second"}static{this.\u0275fac=function(f){return new(f||l)}}static{this.\u0275pipe=a.\u0275\u0275definePipe({name:"duration",type:l,pure:!1})}}},76139:(Z,A,r)=>{r.d(A,{y:()=>E});var a=r(29841),e=r.n(a),l=r(87536);class E{transform(u){return e().isUndefined(u)||e().isNull(u)?"-":e().isNaN(u)?"N/A":u}static{this.\u0275fac=function(F){return new(F||E)}}static{this.\u0275pipe=l.\u0275\u0275definePipe({name:"empty",type:E,pure:!0})}}},57452:(Z,A,r)=>{r.d(A,{w:()=>T});var a=r(62739),e=r(87536);class T{transform(f){return Object.keys(a.m).includes(f)?a.m[f]:""}static{this.\u0275fac=function(u){return new(u||T)}}static{this.\u0275pipe=e.\u0275\u0275definePipe({name:"healthIcon",type:T,pure:!0})}}},25081:(Z,A,r)=>{r.d(A,{U:()=>l});var a=r(87536);class l{transform(E){return`${E} IOPS`}static{this.\u0275fac=function(f){return new(f||l)}}static{this.\u0275pipe=a.\u0275\u0275definePipe({name:"iops",type:l,pure:!0})}}},82680:(Z,A,r)=>{r.d(A,{k:()=>l});var a=r(87536);class l{transform(E){return"user:rbd"===E?"user:rbd (tcmu-runner)":E}static{this.\u0275fac=function(f){return new(f||l)}}static{this.\u0275pipe=a.\u0275\u0275definePipe({name:"iscsiBackstore",type:l,pure:!0})}}},47782:(Z,A,r)=>{r.d(A,{r:()=>l});var a=r(87536);class l{transform(E){return E.join(", ")}static{this.\u0275fac=function(f){return new(f||l)}}static{this.\u0275pipe=a.\u0275\u0275definePipe({name:"join",type:l,pure:!0})}}},71521:(Z,A,r)=>{r.d(A,{H:()=>l});var a=r(87536);class l{transform(E){return"[DBG]"===E?"debug":"[INF]"===E?"info":"[WRN]"===E?"warn":"[ERR]"===E?"err":""}static{this.\u0275fac=function(f){return new(f||l)}}static{this.\u0275pipe=a.\u0275\u0275definePipe({name:"logPriority",type:l,pure:!0})}}},72358:(Z,A,r)=>{r.d(A,{r:()=>E});var a=r(29841),e=r.n(a),l=r(87536);class E{transform(u,F){return e().isPlainObject(F)?e().get(F,u,u):u}static{this.\u0275fac=function(F){return new(F||E)}}static{this.\u0275pipe=l.\u0275\u0275definePipe({name:"map",type:E,pure:!0})}}},49658:(Z,A,r)=>{r.d(A,{n:()=>l});var a=r(87536);class l{transform(E){return`${E} MB/s`}static{this.\u0275fac=function(f){return new(f||l)}}static{this.\u0275pipe=a.\u0275\u0275definePipe({name:"mbpersecond",type:l,pure:!0})}}},71721:(Z,A,r)=>{r.d(A,{Z:()=>E});var a=r(29841),e=r.n(a),l=r(87536);class E{transform(u){if(!u)return null;let F=0,p=0,S=0,_=0,v=0;e().each(u.standbys,()=>{S+=1}),u.standbys&&!u.filesystems?(p=S,F=0):0===u.filesystems.length?F=0:(e().each(u.filesystems,M=>{e().each(M.mdsmap.info,b=>{"up:standby-replay"===b.state?v+=1:_+=1})}),F=_,p=S+v);return{success:F,info:p,total:F+p}}static{this.\u0275fac=function(F){return new(F||E)}}static{this.\u0275pipe=l.\u0275\u0275definePipe({name:"mdsSummary",type:E,pure:!0})}}},32357:(Z,A,r)=>{r.d(A,{j:()=>E});var a=r(29841),e=r.n(a),l=r(87536);class E{transform(u){if(!u)return null;let F;(e().isUndefined(u.active_name)?"":`${$localize`active daemon`}: ${u.active_name}`).length>0&&(F=1);const S=u.standbys.length;return{success:F,info:S,total:F+S}}static{this.\u0275fac=function(F){return new(F||E)}}static{this.\u0275pipe=l.\u0275\u0275definePipe({name:"mgrSummary",type:E,pure:!0})}}},7752:(Z,A,r)=>{r.d(A,{f:()=>l});var a=r(87536);class l{transform(E){return`${E} ms`}static{this.\u0275fac=function(f){return new(f||l)}}static{this.\u0275pipe=a.\u0275\u0275definePipe({name:"milliseconds",type:l,pure:!0})}}},91653:(Z,A,r)=>{r.d(A,{z:()=>E});var a=r(29841),e=r.n(a),l=r(87536);class E{transform(u,F){return""===u?e().defaultTo(F,$localize`n/a`):u}static{this.\u0275fac=function(F){return new(F||E)}}static{this.\u0275pipe=l.\u0275\u0275definePipe({name:"notAvailable",type:E,pure:!0})}}},37006:(Z,A,r)=>{r.d(A,{I:()=>l});var a=r(87536);class l{transform(E,f=!1){if(!E)return[];const u=[],F=["---","--x","-w-","-wx","r--","r-x","rw-","rwx"],S=E.toString(8).padStart(7,"0").split(""),_=this.getFileTypeSymbol(parseInt(S[1]+S[2])),v=F[parseInt(S[4])],R=F[parseInt(S[5])],P=F[parseInt(S[6])];return f?{owner:this.getItem(v),group:this.getItem(R),others:this.getItem(P)}:("directory"!==_&&u.push({content:_,class:"badge-primary me-1"}),"---"!==v&&u.push({content:`owner: ${v}`,class:"badge-primary me-1"}),"---"!==R&&u.push({content:`group: ${R}`,class:"badge-primary me-1"}),"---"!==P&&u.push({content:`others: ${P}`,class:"badge-primary me-1"}),0===u.length?[{content:"no permissions",class:"badge-warning me-1",toolTip:`owner: ${v}, group: ${R}, others: ${P}`}]:u)}getFileTypeSymbol(E){switch(E){case 1:return"fifo";case 2:return"character";case 4:return"directory";case 6:return"block";case 10:return"regular";case 12:return"symbolic-link";default:return"-"}}getItem(E){const f=[];return E.includes("r")&&f.push("read"),E.includes("w")&&f.push("write"),E.includes("x")&&f.push("execute"),f}static{this.\u0275fac=function(f){return new(f||l)}}static{this.\u0275pipe=a.\u0275\u0275definePipe({name:"octalToHumanReadable",type:l,pure:!0})}}},2475:(Z,A,r)=>{r.d(A,{i:()=>l});var a=r(87536);class l{transform(E){const f=parseInt(E,10);return isNaN(f)?E:E+(1===Math.floor(f/10)?"th":f%10==1?"st":f%10==2?"nd":f%10==3?"rd":"th")}static{this.\u0275fac=function(f){return new(f||l)}}static{this.\u0275pipe=a.\u0275\u0275definePipe({name:"ordinal",type:l,pure:!0})}}},68945:(Z,A,r)=>{r.d(A,{n:()=>E});var a=r(29841),e=r.n(a),l=r(87536);class E{transform(u){if(!u)return null;let F=0,p=0,S=0,_=0;e().each(u.osds,M=>{M.in&&F++,M.up&&p++,M.state.includes("nearfull")&&S++,M.state.includes("full")&&_++});const v=u.osds.length-p,R=u.osds.length-F;return{total:u.osds.length,down:v,out:R,up:p,in:F,nearfull:S,full:_}}static{this.\u0275fac=function(F){return new(F||E)}}static{this.\u0275pipe=l.\u0275\u0275definePipe({name:"osdSummary",type:E,pure:!0})}}},73231:(Z,A,r)=>{r.d(A,{i:()=>l});var a=r(87536);class l{transform(E){if(!E)return"";const f=E.toString().split("/");return""===f[0]?(f.shift(),`/${f[0]}/.../${f[f.length-1]}`):`${f[0]}/.../${f[f.length-1]}`}static{this.\u0275fac=function(f){return new(f||l)}}static{this.\u0275pipe=a.\u0275\u0275definePipe({name:"path",type:l,pure:!0})}}},45757:(Z,A,r)=>{r.d(A,{N:()=>l});var a=r(87536);class l{transform(E,f,u){return u?f.call(u,E):f(E)}static{this.\u0275fac=function(f){return new(f||l)}}static{this.\u0275pipe=a.\u0275\u0275definePipe({name:"pipeFunction",type:l,pure:!0})}}},13421:(Z,A,r)=>{r.d(A,{Y:()=>te});var a=r(91974),e=r(88427),l=r(91822),T=r(1820),E=r(71138),f=r(2464),u=r(16748),F=r(19116),p=r(73651),S=r(18457),_=r(64346),v=r(76139),R=r(87536);class P{transform(ie){return encodeURIComponent(ie)}static{this.\u0275fac=function(_e){return new(_e||P)}}static{this.\u0275pipe=R.\u0275\u0275definePipe({name:"encodeUri",type:P,pure:!0})}}var M=r(57452),b=r(25081),m=r(82680),g=r(47782),O=r(71521),N=r(72358),c=r(71721),z=r(32357),B=r(7752),q=r(91653),Q=r(2475),G=r(68945),D=r(39113),oe=r(56921),fe=r(60980),ye=r(37353),je=r(37006),Le=r(49658),Fe=r(33488);class te{static{this.\u0275fac=function(_e){return new(_e||te)}}static{this.\u0275mod=R.\u0275\u0275defineNgModule({type:te})}static{this.\u0275inj=R.\u0275\u0275defineInjector({providers:[e.S,T.F,l.s,a.DatePipe,u.Z,f.N,p.l,F.w,S.u,D.D,m.k,g.r,O.H,E.Q,v.y,P,Q.i,b.U,B.f,q.z,ye.r,_.b,N.r,fe.H,oe.b,M.w,z.j,c.Z,G.n,je.I,Le.n,Fe.E],imports:[a.CommonModule]})}}},63284:(Z,A,r)=>{r.d(A,{n:()=>l});var a=r(87536);class l{transform(E,f){return f<=1?E:E.endsWith("y")?E.slice(0,-1)+"ies":E+"s"}static{this.\u0275fac=function(f){return new(f||l)}}static{this.\u0275pipe=a.\u0275\u0275definePipe({name:"pluralize",type:l,pure:!0})}}},39113:(Z,A,r)=>{r.d(A,{D:()=>u});var a=r(29841),e=r.n(a),l=r(89939),T=r.n(l),E=r(87536);T().updateLocale("en",{relativeTime:{future:$localize`in %s`,past:$localize`%s ago`,s:$localize`a few seconds`,ss:$localize`%d seconds`,m:$localize`a minute`,mm:$localize`%d minutes`,h:$localize`an hour`,hh:$localize`%d hours`,d:$localize`a day`,dd:$localize`%d days`,w:$localize`a week`,ww:$localize`%d weeks`,M:$localize`a month`,MM:$localize`%d months`,y:$localize`a year`,yy:$localize`%d years`}});class u{transform(p,S=!0){let _;const v=T()().utcOffset();if(_=e().isNumber(p)?T().parseZone(T().unix(p)).utc().utcOffset(v).local():T().parseZone(p).utc().utcOffset(v).local(),!_.isValid())return"";let R=_.fromNow();return S&&(R=e().upperFirst(R)),R}static{this.\u0275fac=function(S){return new(S||u)}}static{this.\u0275pipe=E.\u0275\u0275definePipe({name:"relativeDate",type:u,pure:!1})}}},56921:(Z,A,r)=>{r.d(A,{b:()=>E});var a=r(87536),l=r(5559);class E{constructor(u){this.domSanitizer=u}transform(u){return this.domSanitizer.sanitize(a.SecurityContext.HTML,u)}static{this.\u0275fac=function(F){return new(F||E)(a.\u0275\u0275directiveInject(l.DomSanitizer,16))}}static{this.\u0275pipe=a.\u0275\u0275definePipe({name:"sanitizeHtml",type:E,pure:!0})}}},60980:(Z,A,r)=>{r.d(A,{H:()=>E});var a=r(29841),e=r.n(a),l=r(87536);class E{transform(u,F,p){return e().isString(u)?(p=e().defaultTo(p,""),e().truncate(u,{length:F,omission:p})):u}static{this.\u0275fac=function(F){return new(F||E)}}static{this.\u0275pipe=l.\u0275\u0275definePipe({name:"truncate",type:E,pure:!0})}}},37353:(Z,A,r)=>{r.d(A,{r:()=>E});var a=r(29841),e=r.n(a),l=r(87536);class E{transform(u){return e().upperFirst(u)}static{this.\u0275fac=function(F){return new(F||E)}}static{this.\u0275pipe=l.\u0275\u0275definePipe({name:"upperFirst",type:E,pure:!0})}}},72394:(Z,A,r)=>{r.d(A,{g:()=>E});var a=r(95631),l=r(50619);function E(){const f=(0,a.fromEvent)(document,"visibilitychange").pipe((0,l.shareReplay)({refCount:!0,bufferSize:1})),[u,F]=(0,a.partition)(f,()=>"visible"===document.visibilityState);return function(p){return p.pipe((0,l.takeUntil)(F),(0,l.repeatWhen)(()=>u))}}},42676:(Z,A,r)=>{r.d(A,{r:()=>f});var a=r(76218),l=r(82254),T=r(87536);class f{constructor(F,p){this.router=F,this.authStorageService=p}canActivate(F,p){return!!this.authStorageService.isLoggedIn()||(this.router.navigate(["/login"],{queryParams:{returnUrl:p.url}}),!1)}canActivateChild(F,p){return this.canActivate(F,p)}static{this.\u0275fac=function(p){return new(p||f)(T.\u0275\u0275inject(a.Router),T.\u0275\u0275inject(l.v))}}static{this.\u0275prov=T.\u0275\u0275defineInjectable({token:f,factory:f.\u0275fac,providedIn:"root"})}}},82254:(Z,A,r)=>{r.d(A,{v:()=>E});var a=r(95631);class e{constructor(u=[]){["read","create","update","delete"].forEach(F=>this[F]=u.includes(F))}}class l{constructor(u){this.hosts=new e(u.hosts),this.configOpt=new e(u["config-opt"]),this.pool=new e(u.pool),this.osd=new e(u.osd),this.monitor=new e(u.monitor),this.rbdImage=new e(u["rbd-image"]),this.iscsi=new e(u.iscsi),this.nvmeof=new e(u["nvme-of"]),this.rbdMirroring=new e(u["rbd-mirroring"]),this.rgw=new e(u.rgw),this.cephfs=new e(u.cephfs),this.manager=new e(u.manager),this.log=new e(u.log),this.user=new e(u.user),this.grafana=new e(u.grafana),this.prometheus=new e(u.prometheus),this.nfs=new e(u["nfs-ganesha"]),this.smb=new e(u.smb)}}var T=r(87536);class E{constructor(){this.isPwdDisplayedSource=new a.BehaviorSubject(!1),this.isPwdDisplayed$=this.isPwdDisplayedSource.asObservable()}set(u,F={},p=!1,S=null,_=!1){localStorage.setItem("dashboard_username",u),localStorage.setItem("dashboard_permissions",JSON.stringify(new l(F))),localStorage.setItem("user_pwd_expiration_date",String(S)),localStorage.setItem("user_pwd_update_required",String(_)),localStorage.setItem("sso",String(p))}remove(){localStorage.removeItem("dashboard_username"),localStorage.removeItem("user_pwd_expiration_data"),localStorage.removeItem("user_pwd_update_required")}isLoggedIn(){return null!==localStorage.getItem("dashboard_username")}getUsername(){return localStorage.getItem("dashboard_username")}getPermissions(){return JSON.parse(localStorage.getItem("dashboard_permissions")||JSON.stringify(new l({})))}getPwdExpirationDate(){return Number(localStorage.getItem("user_pwd_expiration_date"))}getPwdUpdateRequired(){return"true"===localStorage.getItem("user_pwd_update_required")}isSSO(){return"true"===localStorage.getItem("sso")}static{this.\u0275fac=function(F){return new(F||E)}}static{this.\u0275prov=T.\u0275\u0275defineInjectable({token:E,factory:E.\u0275fac,providedIn:"root"})}}},54980:(Z,A,r)=>{r.d(A,{Z:()=>l});var a=r(87536);class l{constructor(){}static getCount(E){return Number(E.headers?.get("X-Total-Count"))}static{this.\u0275fac=function(f){return new(f||l)}}static{this.\u0275prov=a.\u0275\u0275defineInjectable({token:l,factory:l.\u0275fac,providedIn:"root"})}}},2155:(Z,A,r)=>{r.d(A,{w:()=>u});var a=r(36618),e=r(50619),l=r(38875),T=r(59342),E=r(87536);class f{constructor(p){this.formlyJsonschema=p}processJsonSchemaForm(p,S){let _=0;for(;_<p.forms.length&&p.forms[_].path!=S;)_++;_%=p.forms.length;const v=p.forms[_].control_schema.title,R=p.forms[_].ui_schema,P=p.forms[_].control_schema;let M=this.formlyJsonschema.toFieldConfig(P).fieldGroup;for(let O=0;O<M.length;O++)for(let N=0;N<R.length;N++)M[O].key==R[N].key&&(M[O].props.templateOptions=R[N].templateOptions,M[O].props.readonly=R[N].readonly,(0,T.n)(M[O],R));return{title:v,uiSchema:R,controlSchema:M,taskInfo:{metadataFields:p.forms[_].task_info.metadataFields,message:p.forms[_].task_info.message},methodType:p.forms[_].method_type,model:p.forms[_].model||{}}}static{this.\u0275fac=function(S){return new(S||f)(E.\u0275\u0275inject(l.FormlyJsonschema))}}static{this.\u0275prov=E.\u0275\u0275defineInjectable({token:f,factory:f.\u0275fac,providedIn:"root"})}}class u{constructor(p,S){this.http=p,this.crudFormAdapater=S,this.cache={}}list(p){const S=this.getCacheable(p,"get");if(void 0===this.cache[S]){const{url:_,version:v}=this.getUrlAndVersion(p);this.cache[S]=this.http.get(_,{headers:{Accept:`application/vnd.ceph.api.v${v}+json`}})}return this.cache[S]}submit(p,S,_){const{url:v,version:R}=this.getUrlAndVersion(p);return this.http[_](v,S,{headers:{Accept:`application/vnd.ceph.api.v${R}+json`}})}delete(p,S){const{url:_,version:v}=this.getUrlAndVersion(p);return this.http.delete(`${_}/${S}`,{headers:{Accept:`application/vnd.ceph.api.v${v}+json`},observe:"response"})}form(p,S,_=""){const v=this.getCacheable(p,"get",_),R={model_key:_};if(void 0===this.cache[v]){const{url:P,version:M}=this.getUrlAndVersion(p);this.cache[v]=this.http.get(P,{headers:{Accept:`application/vnd.ceph.api.v${M}+json`},params:R})}return this.cache[v].pipe((0,e.map)(P=>this.crudFormAdapater.processJsonSchemaForm(P,S)))}model(p,S){const _=this.getCacheable(p,"get");if(void 0===this.cache[_]){const{url:v,version:R}=this.getUrlAndVersion(p);this.cache[_]=this.http.get(`${v}/model`,{headers:{Accept:`application/vnd.ceph.api.v${R}+json`},params:S})}return this.cache[_]}getCacheable(p,S,_=""){return p+S+_}getUrlAndVersion(p){const S=p.match(/(?<url>[^@]+)(?:@(?<version>.+))?/);return{url:S.groups.url.split(".").join("/"),version:S.groups.version||"1.0"}}static{this.\u0275fac=function(S){return new(S||u)(E.\u0275\u0275inject(a.HttpClient),E.\u0275\u0275inject(f))}}static{this.\u0275prov=E.\u0275\u0275defineInjectable({token:u,factory:u.\u0275fac,providedIn:"root"})}}},60156:(Z,A,r)=>{r.d(A,{g:()=>E});var a=r(89939),e=r.n(a),l=r(87536);class E{calculateAdditionalData(u){if(!u.life_expectancy_min||!u.life_expectancy_max)return u.state="unknown",u;const F=R=>!!Number.parseFloat(R),p=(R,P)=>R&&P&&F(R)&&F(P)?e().duration(e()(R).diff(e()(P))).asWeeks():null,S=e().duration(e()(e().now()).diff(e()(u.life_expectancy_stamp))).asWeeks(),_=p(u.life_expectancy_max,u.life_expectancy_stamp),v=p(u.life_expectancy_min,u.life_expectancy_stamp);return u.state=S>1?"stale":null!==_&&_<=2?"bad":null!==v&&v<=4?"warning":"good",u.life_expectancy_weeks={max:null!==_?Math.round(_):null,min:null!==v?Math.round(v):null},u}readable(u){return u.readableDaemons=u.daemons.join(" "),u}prepareDevice(u){return this.readable(this.calculateAdditionalData(u))}static{this.\u0275fac=function(F){return new(F||E)}}static{this.\u0275prov=l.\u0275\u0275defineInjectable({token:E,factory:E.\u0275fac,providedIn:"root"})}}},38996:(Z,A,r)=>{r.d(A,{s:()=>p});var a=r(95631),l=r(50619),E=r(2464),f=r(63882),u=r(87536);class p{constructor(_,v){this.summaryservice=_,this.cephReleaseNamePipe=v,this.releaseDataSource=new a.BehaviorSubject(null),this.releaseData$=this.releaseDataSource.asObservable(),this.summaryservice.subscribeOnce(R=>{const P=this.cephReleaseNamePipe.transform(R.version);this.releaseDataSource.next(P)})}urlGenerator(_,v="main"){const P=`https://docs.ceph.com/en/${"main"===v?"latest":v}/`,M="https://ceph.io";return{iscsi:`${P}mgr/dashboard/#enabling-iscsi-management`,prometheus:`${P}mgr/dashboard/#enabling-prometheus-alerting`,"nfs-ganesha":`${P}mgr/dashboard/#configuring-nfs-ganesha-in-the-dashboard`,"rgw-nfs":`${P}radosgw/nfs`,rgw:`${P}mgr/dashboard/#enabling-the-object-gateway-management-frontend`,"rgw-multisite":`${P}/radosgw/multisite/#failover-and-disaster-recovery`,multisite:`${P}/radosgw/multisite`,dashboard:`${P}mgr/dashboard`,grafana:`${P}mgr/dashboard/#enabling-the-embedding-of-grafana-dashboards`,orch:`${P}mgr/orchestrator`,pgs:"https://old.ceph.com/pgcalc",help:`${M}/en/users/`,security:`${M}/en/security/`,trademarks:`${M}/en/trademarks/`,"dashboard-landing-page-status":`${P}mgr/dashboard/#dashboard-landing-page-status`,"dashboard-landing-page-performance":`${P}mgr/dashboard/#dashboard-landing-page-performance`,"dashboard-landing-page-capacity":`${P}mgr/dashboard/#dashboard-landing-page-capacity`}[_]}subscribeOnce(_,v,R){return this.releaseData$.pipe((0,l.filter)(P=>!!P),(0,l.map)(P=>this.urlGenerator(_,P)),(0,l.first)()).subscribe(v,R)}static{this.\u0275fac=function(v){return new(v||p)(u.\u0275\u0275inject(f.E),u.\u0275\u0275inject(E.N))}}static{this.\u0275prov=u.\u0275\u0275defineInjectable({token:p,factory:p.\u0275fac,providedIn:"root"})}}},1811:(Z,A,r)=>{r.d(A,{k:()=>u});var a=r(50619),l=r(5155),T=r(40988),E=r(87536);class u{constructor(p){this.featureToggles=p}canActivate(p){return this.featureToggles.get().pipe((0,a.map)(S=>{if(!1===S[p.routeConfig.path])throw new l.YW;return!0}))}canActivateChild(p){return this.canActivate(p.parent)}static{this.\u0275fac=function(S){return new(S||u)(E.\u0275\u0275inject(T.b))}}static{this.\u0275prov=E.\u0275\u0275defineInjectable({token:u,factory:u.\u0275fac,providedIn:"root"})}}},40988:(Z,A,r)=>{r.d(A,{b:()=>u});var a=r(36618),l=r(15643),T=r(87536);class u{constructor(p,S){this.http=p,this.timerService=S,this.API_URL="api/feature_toggles",this.REFRESH_INTERVAL=3e4,this.featureToggleMap$=this.timerService.get(()=>this.http.get(this.API_URL),this.REFRESH_INTERVAL)}get(){return this.featureToggleMap$}static{this.\u0275fac=function(S){return new(S||u)(T.\u0275\u0275inject(a.HttpClient),T.\u0275\u0275inject(l.H))}}static{this.\u0275prov=T.\u0275\u0275defineInjectable({token:u,factory:u.\u0275fac,providedIn:"root"})}}},12540:(Z,A,r)=>{r.d(A,{k:()=>f});var a=r(29841),e=r.n(a),l=r(3687),T=r(87536);class f{format_number(F,p,S,_=1){if(e().isString(F)&&(F=Number(F)),!e().isNumber(F))return"-";if(e().isNaN(F))return"N/A";let v=F<1?0:Math.floor(Math.log(F)/Math.log(p));v=v>=S.length?S.length-1:v;let R=e().round(F/Math.pow(p,v),_).toString();return""===R?"-":(""!==S[v]&&(R=`${R} ${S[v]}`),R)}formatNumberFromTo(F,p="",S="",_,v,R=1){if(e().isString(F)&&(F=Number(F)),!e().isNumber(F)||!v)return"-";const P=v.map(g=>g.toLowerCase());if(!P.includes(p.toLowerCase())||!P.includes(S.toLowerCase()))return`${F} ${p}`;const M=P.indexOf(p.toLowerCase())-P.indexOf(S.toLocaleLowerCase()),b=M>0?F*Math.pow(_,M):F/Math.pow(_,Math.abs(M));let m=e().round(b,R).toString();return m=`${m} ${S}`,m}toBytes(F,p=null){const _=["b","k","m","g","t","p","e","z","y"],v=RegExp("^(\\d+(.\\d+)?) ?(["+_.join("")+"]?(b|ib|B/s|B/m|iB/m)?)?$","i").exec(F);if(null===v)return p;let R=parseFloat(v[1]);return e().isString(v[3])&&(R*=Math.pow(1024,_.indexOf(v[3].toLowerCase()[0]))),Math.round(R)}toMilliseconds(F){const S=/^\s*(\d+)\s*(ms)?\s*$/i.exec(F);return null!==S?+S[1]:0}toIops(F){const S=/^\s*(\d+)\s*(IOPS)?\s*$/i.exec(F);return null!==S?+S[1]:0}toOctalPermission(F){const p=["owner","group","others"];let S="";for(const _ of p){let v=0;const R=F[_];R&&(R.includes("read")&&(v+=4),R.includes("write")&&(v+=2),R.includes("execute")&&(v+=1)),S+=v.toString()}return S}performValidation(F,p,S,_){return(0,l.xF)(F.value)?null:null===RegExp(p,"i").exec(F.value)||"quota"==_&&(new f).toBytes(F.value)<1024?S:null}iopmMaxSizeValidator(F){const S=/^\s*(\d+)$/i.exec(F.value);return(0,l.xF)(F.value)?null:null==S||F.value.toString()?.length>18?{rateOpsMaxSize:!0}:null}static{this.\u0275fac=function(p){return new(p||f)}}static{this.\u0275prov=T.\u0275\u0275defineInjectable({token:f,factory:f.\u0275fac,providedIn:"root"})}}},94254:(Z,A,r)=>{r.d(A,{V:()=>E});var a=r(3600),l=r(87536);class E{constructor(u){this.modalService=u}show(u,F={}){const p=this.modalService.create({component:u,inputs:F});return this.modalRef=p.injector.get(u),this.modalRef}hasOpenModals(){return this.modalService.placeholderService.hasComponentRef}dismissAll(){this.modalService.destroy()}stopLoadingSpinner(u){this.modalRef[u].setErrors({cdSubmitButton:!0})}static{this.\u0275fac=function(F){return new(F||E)(l.\u0275\u0275inject(a.ModalService))}}static{this.\u0275prov=l.\u0275\u0275defineInjectable({token:E,factory:E.\u0275fac,providedIn:"root"})}}},77867:(Z,A,r)=>{r.d(A,{B:()=>E});var a=r(77317),l=r(87536);class E{constructor(u){this.modal=u}show(u,F,p){const S=this.modal.open(u,p);return F&&Object.assign(S.componentInstance,F),S}dismissAll(){this.modal.dismissAll()}hasOpenModals(){return this.modal.hasOpenModals()}static{this.\u0275fac=function(F){return new(F||E)(l.\u0275\u0275inject(a.NgbModal))}}static{this.\u0275prov=l.\u0275\u0275defineInjectable({token:E,factory:E.\u0275fac,providedIn:"root"})}}},6955:(Z,A,r)=>{r.d(A,{x:()=>R});var a=r(36618),l=r(76218),E=r(95631),u=r(50619),p=r(20009),S=r(46045),_=r(87536);class R{static{this.ALLOWLIST=["501"]}constructor(M,b,m){this.http=M,this.router=b,this.mgrModuleService=m}canActivate(M){return this.doCheck(M)}canActivateChild(M){return this.doCheck(M)}doCheck(M){if(M.url.length>0&&R.ALLOWLIST.includes(M.url[0].path))return(0,E.of)(!0);const b=M.data.moduleStatusGuardConfig;let m=!1;return b.backend&&this.mgrModuleService.getConfig("orchestrator").subscribe(g=>{m=b.backend===g.orchestrator},()=>(this.router.navigate([b.redirectTo]),(0,E.of)(!1))),this.http.get(`ui-api/${b.uiApiPath}/status`).pipe((0,u.map)(g=>(!g.available&&!m&&this.router.navigate([b.redirectTo||""],{state:{header:b.header,message:g.message,section:b.section,section_info:b.section_info,button_name:b.button_name,button_route:b.button_route,button_title:b.button_title,secondary_button_name:b.secondary_button_name,secondary_button_route:b.secondary_button_route,secondary_button_title:b.secondary_button_title,module_name:b.module_name,navigate_to:b.navigate_to,uiConfig:b.uiConfig,uiApiPath:b.uiApiPath,icon:S.FI.wrench,component:b.component}}),g.available)),(0,u.catchError)(()=>(this.router.navigate([b.redirectTo]),(0,E.of)(!1))))}static{this.\u0275fac=function(b){return new(b||R)(_.\u0275\u0275inject(a.HttpClient),_.\u0275\u0275inject(l.Router),_.\u0275\u0275inject(p.a))}}static{this.\u0275prov=_.\u0275\u0275defineInjectable({token:R,factory:R.\u0275fac,providedIn:"root"})}}},88701:(Z,A,r)=>{r.d(A,{J:()=>R});var a=r(29841),e=r.n(a),l=r(74737),E=r(95631),u=r(88285),F=r(84268),p=r(71138),S=r(66527),_=r(87536);class R{constructor(M,b,m){this.toastr=M,this.taskMessageService=b,this.cdDatePipe=m,this.hideToasties=!1,this.dataSource=new E.BehaviorSubject([]),this.data$=this.dataSource.asObservable(),this.sidebarSubject=new E.Subject,this.queued=[],this.KEY="cdNotifications";const g=localStorage.getItem(this.KEY);let O=[];e().isString(g)&&(O=JSON.parse(g,(N,c)=>e().isPlainObject(c)?e().assign(new F.p,c):c)),this.dataSource.next(O)}removeAll(){localStorage.removeItem(this.KEY),this.dataSource.next([])}remove(M){const b=this.dataSource.getValue();b.splice(M,1),this.dataSource.next(b),localStorage.setItem(this.KEY,JSON.stringify(b))}save(M){const b=this.dataSource.getValue();for(b.push(M),b.sort((m,g)=>m.timestamp>g.timestamp?-1:1);b.length>10;)b.pop();this.dataSource.next(b),localStorage.setItem(this.KEY,JSON.stringify(b))}show(M,b,m,g,O){return window.setTimeout(()=>{let N;N=e().isFunction(M)?M():e().isObject(M)?M:new F.v(M,b,m,g,O),this.queueToShow(N)},10)}queueToShow(M){this.cancel(this.queuedTimeoutId),this.queued.find(b=>e().isEqual(b,M))||this.queued.push(M),this.queuedTimeoutId=window.setTimeout(()=>{this.showQueued()},500)}showQueued(){this.getUnifiedTitleQueue().forEach(M=>{const b=new F.p(M);b.isFinishedTask||this.save(b),this.showToasty(b)})}getUnifiedTitleQueue(){return Object.values(this.queueShiftByTitle()).map(M=>{const b=M[0];return M.length>1&&(b.message="<ul>"+M.map(m=>`<li>${m.message}</li>`).join("")+"</ul>"),b})}queueShiftByTitle(){const M={};let b;for(;b=this.queued.shift();)M[b.title]||(M[b.title]=[]),M[b.title].push(b);return M}showToasty(M){this.hideToasties||this.toastr[["error","info","success"][M.type]]((M.message?M.message+"<br>":"")+this.renderTimeAndApplicationHtml(M),M.title,M.options)}renderTimeAndApplicationHtml(M){return`<small class="date">${this.cdDatePipe.transform(M.timestamp)}</small><i class="float-end custom-icon ${M.applicationClass}" title="${M.application}"></i>`}notifyTask(M,b=!0){const m=this.finishedTaskToNotification(M,b);return m.isFinishedTask=!0,this.show(m)}finishedTaskToNotification(M,b=!0){let m;return m=M.success&&b?new F.v(u._.success,this.taskMessageService.getSuccessTitle(M)):new F.v(u._.error,this.taskMessageService.getErrorTitle(M),this.taskMessageService.getErrorMessage(M)),m.isFinishedTask=!0,m}cancel(M){window.clearTimeout(M)}suspendToasties(M){this.hideToasties=M}toggleSidebar(M=!1){this.sidebarSubject.next(M)}static{this.\u0275fac=function(b){return new(b||R)(_.\u0275\u0275inject(l.ToastrService),_.\u0275\u0275inject(S.i),_.\u0275\u0275inject(p.Q))}}static{this.\u0275prov=_.\u0275\u0275defineInjectable({token:R,factory:R.\u0275fac,providedIn:"root"})}}},76857:(Z,A,r)=>{r.d(A,{$:()=>u});var a=r(29841),e=r.n(a),l=r(50619),T=r(11549);class E{constructor(p){this.pwdPolicyEnabled=p.pwd_policy_enabled,this.pwdPolicyMinLength=p.pwd_policy_min_length,this.pwdPolicyCheckLengthEnabled=p.pwd_policy_check_length_enabled,this.pwdPolicyCheckOldpwdEnabled=p.pwd_policy_check_oldpwd_enabled,this.pwdPolicyCheckUsernameEnabled=p.pwd_policy_check_username_enabled,this.pwdPolicyCheckExclusionListEnabled=p.pwd_policy_check_exclusion_list_enabled,this.pwdPolicyCheckRepetitiveCharsEnabled=p.pwd_policy_check_repetitive_chars_enabled,this.pwdPolicyCheckSequentialCharsEnabled=p.pwd_policy_check_sequential_chars_enabled,this.pwdPolicyCheckComplexityEnabled=p.pwd_policy_check_complexity_enabled}}var f=r(87536);class u{constructor(p){this.settingsService=p}getHelpText(){return this.settingsService.getStandardSettings().pipe((0,l.map)(p=>{const S=new E(p);let _=[];if(S.pwdPolicyEnabled){_.push($localize`Required rules for passwords:`);const v={pwdPolicyCheckLengthEnabled:$localize`Must contain at least ${S.pwdPolicyMinLength} characters`,pwdPolicyCheckOldpwdEnabled:$localize`Must not be the same as the previous one`,pwdPolicyCheckUsernameEnabled:$localize`Cannot contain the username`,pwdPolicyCheckExclusionListEnabled:$localize`Cannot contain any configured keyword`,pwdPolicyCheckRepetitiveCharsEnabled:$localize`Cannot contain any repetitive characters e.g. "aaa"`,pwdPolicyCheckSequentialCharsEnabled:$localize`Cannot contain any sequential characters e.g. "abc"`,pwdPolicyCheckComplexityEnabled:$localize`Must consist of characters from the following groups:
  * Alphabetic a-z, A-Z
  * Numbers 0-9
  * Special chars: !"#$%& '()*+,-./:;<=>?@[\\]^_\`{{|}}~
  * Any other characters (signs)`};_=_.concat(e().keys(v).filter(R=>e().get(S,R)).map(R=>"- "+e().get(v,R)))}return _.join("\n")}))}mapCreditsToCssClass(p){let S="very-strong";return p<10?S="too-weak":p<15?S="weak":p<20?S="ok":p<25&&(S="strong"),S}static{this.\u0275fac=function(S){return new(S||u)(f.\u0275\u0275inject(T.h))}}static{this.\u0275prov=f.\u0275\u0275defineInjectable({token:u,factory:u.\u0275fac,providedIn:"root"})}}},77241:(Z,A,r)=>{r.d(A,{Q:()=>T});var a=r(6107),e=r(87536);class T{constructor(){this.sections=[{heading:$localize`Quality of Service`,class:"quality-of-service",options:[{name:"rbd_qos_bps_limit",displayName:$localize`BPS Limit`,description:$localize`The desired limit of IO bytes per second.`,type:a.T.bps},{name:"rbd_qos_iops_limit",displayName:$localize`IOPS Limit`,description:$localize`The desired limit of IO operations per second.`,type:a.T.iops},{name:"rbd_qos_read_bps_limit",displayName:$localize`Read BPS Limit`,description:$localize`The desired limit of read bytes per second.`,type:a.T.bps},{name:"rbd_qos_read_iops_limit",displayName:$localize`Read IOPS Limit`,description:$localize`The desired limit of read operations per second.`,type:a.T.iops},{name:"rbd_qos_write_bps_limit",displayName:$localize`Write BPS Limit`,description:$localize`The desired limit of write bytes per second.`,type:a.T.bps},{name:"rbd_qos_write_iops_limit",displayName:$localize`Write IOPS Limit`,description:$localize`The desired limit of write operations per second.`,type:a.T.iops},{name:"rbd_qos_bps_burst",displayName:$localize`BPS Burst`,description:$localize`The desired burst limit of IO bytes.`,type:a.T.bps},{name:"rbd_qos_iops_burst",displayName:$localize`IOPS Burst`,description:$localize`The desired burst limit of IO operations.`,type:a.T.iops},{name:"rbd_qos_read_bps_burst",displayName:$localize`Read BPS Burst`,description:$localize`The desired burst limit of read bytes.`,type:a.T.bps},{name:"rbd_qos_read_iops_burst",displayName:$localize`Read IOPS Burst`,description:$localize`The desired burst limit of read operations.`,type:a.T.iops},{name:"rbd_qos_write_bps_burst",displayName:$localize`Write BPS Burst`,description:$localize`The desired burst limit of write bytes.`,type:a.T.bps},{name:"rbd_qos_write_iops_burst",displayName:$localize`Write IOPS Burst`,description:$localize`The desired burst limit of write operations.`,type:a.T.iops}]}]}static getOptionsFromSections(f){return f.map(u=>u.options).reduce((u,F)=>u.concat(F))}filterConfigOptionsByName(f){return T.getOptionsFromSections(this.sections).filter(u=>u.name===f)}getOptionValueByName(f,u,F=""){const p=this.filterConfigOptionsByName(f);return 1===p.length?p.pop()[u]:F}getWritableSections(){return this.sections.map(f=>(f.options=f.options.filter(u=>!u.readOnly),f))}getOptionFields(){return T.getOptionsFromSections(this.sections)}getWritableOptionFields(){return T.getOptionsFromSections(this.getWritableSections())}getOptionByName(f){return this.filterConfigOptionsByName(f).pop()}getDisplayName(f){return this.getOptionValueByName(f,"displayName")}getDescription(f){return this.getOptionValueByName(f,"description")}static{this.\u0275fac=function(u){return new(u||T)}}static{this.\u0275prov=e.\u0275\u0275defineInjectable({token:T,factory:T.\u0275fac,providedIn:"root"})}}},61065:(Z,A,r)=>{r.d(A,{s:()=>E});var a=r(87536),l=r(95631);class E{constructor(u){this.ngZone=u,this.intervalDataSource=new l.BehaviorSubject(null),this.intervalData$=this.intervalDataSource.asObservable();const F=parseInt(sessionStorage.getItem("dashboard_interval"),10)||5e3;this.setRefreshInterval(F)}setRefreshInterval(u){this.intervalTime=u,sessionStorage.setItem("dashboard_interval",u.toString()),this.intervalSubscription&&this.intervalSubscription.unsubscribe(),this.ngZone.runOutsideAngular(()=>{this.intervalSubscription=(0,l.interval)(this.intervalTime).subscribe(()=>this.ngZone.run(()=>{this.intervalDataSource.next(this.intervalTime)}))})}getRefreshInterval(){return this.intervalTime}ngOnDestroy(){this.intervalSubscription&&this.intervalSubscription.unsubscribe()}static{this.\u0275fac=function(F){return new(F||E)(a.\u0275\u0275inject(a.NgZone))}}static{this.\u0275prov=a.\u0275\u0275defineInjectable({token:E,factory:E.\u0275fac,providedIn:"root"})}}},63882:(Z,A,r)=>{r.d(A,{E:()=>v});var a=r(36618),l=r(29841),T=r.n(l),E=r(95631),u=r(50619),p=r(15643),S=r(87536);class v{constructor(P,M){this.http=P,this.timerService=M,this.REFRESH_INTERVAL=5e3,this.summaryDataSource=new E.BehaviorSubject(null),this.summaryData$=this.summaryDataSource.asObservable()}startPolling(){return this.timerService.get(()=>this.retrieveSummaryObservable(),this.REFRESH_INTERVAL).subscribe(this.retrieveSummaryObserver())}refresh(){return this.retrieveSummaryObservable().subscribe(this.retrieveSummaryObserver())}retrieveSummaryObservable(){return this.http.get("api/summary")}retrieveSummaryObserver(){return P=>{this.summaryDataSource.next(P)}}subscribeOnce(P,M){return this.summaryData$.pipe((0,u.filter)(b=>!!b),(0,u.first)()).subscribe(P,M)}subscribe(P,M){return this.summaryData$.pipe((0,u.filter)(b=>!!b)).subscribe(P,M)}addRunningTask(P){const M=this.summaryDataSource.getValue();M&&(T().isArray(M.executing_tasks)?M.executing_tasks.find(m=>m.name===P.name&&T().isEqual(m.metadata,P.metadata))||M.executing_tasks.push(P):M.executing_tasks=[P],this.summaryDataSource.next(M))}static{this.\u0275fac=function(M){return new(M||v)(S.\u0275\u0275inject(a.HttpClient),S.\u0275\u0275inject(p.H))}}static{this.\u0275prov=S.\u0275\u0275defineInjectable({token:v,factory:v.\u0275fac,providedIn:"root"})}}},58510:(Z,A,r)=>{r.d(A,{D:()=>E});var a=r(63882),e=r(66527),l=r(87536);class E{constructor(u,F){this.taskMessageService=u,this.summaryService=F}init(u,F,p,S,_,v,R){this.getUpdate=u,this.preProcessing=F,this.setList=p,this.onFetchError=S,this.taskFilter=_,this.itemFilter=v,this.builders=R||{},this.summaryDataSubscription=this.summaryService.subscribe(P=>{this.summary=P,this.fetch()},this.onFetchError)}fetch(u=null){this.getUpdate(u).subscribe(F=>{this.updateData(F,this.summary?.executing_tasks.filter(this.taskFilter))},this.onFetchError)}updateData(u,F){const p=this.preProcessing?this.preProcessing(u):u;this.addMissing(p,F),p.forEach(S=>{const _=F.filter(v=>this.itemFilter(S,v));S.cdExecuting=this.getTaskAction(_)}),this.setList(p)}addMissing(u,F){const p=this.builders.default;F?.forEach(S=>{const _=u.find(R=>this.itemFilter(R,S)),v=this.builders[S.name];!_&&(v||p)&&u.push(v?v(S.metadata):p(S.metadata))})}getTaskAction(u){if(0!==u.length)return u.map(F=>{const p=F.progress?` ${F.progress}%`:"";return this.taskMessageService.getRunningText(F)+"..."+p}).join(", ")}ngOnDestroy(){this.summaryDataSubscription&&this.summaryDataSubscription.unsubscribe()}static{this.\u0275fac=function(F){return new(F||E)(l.\u0275\u0275inject(e.i),l.\u0275\u0275inject(a.E))}}static{this.\u0275prov=l.\u0275\u0275defineInjectable({token:E,factory:E.\u0275fac})}}},60977:(Z,A,r)=>{r.d(A,{C:()=>f});var a=r(29841),e=r.n(a),l=r(87536);class E{constructor(F,p,S){this.name=F,this.metadata=p,this.onTaskFinished=S}}class f{constructor(){this.subscriptions=[]}init(F){return F.subscribe(p=>{const S=p.executing_tasks,_=p.finished_tasks,v=[];for(const R of this.subscriptions){const P=this._getTask(R,_),M=this._getTask(R,S);null!==P&&null===M&&R.onTaskFinished(P),null!==M&&v.push(R),this.subscriptions=v}})}subscribe(F,p,S){this.subscriptions.push(new E(F,p,S))}_getTask(F,p){for(const S of p)if(S.name===F.name&&e().isEqual(S.metadata,F.metadata))return S;return null}static{this.\u0275fac=function(p){return new(p||f)}}static{this.\u0275prov=l.\u0275\u0275defineInjectable({token:f,factory:f.\u0275fac,providedIn:"root"})}}},66527:(Z,A,r)=>{r.d(A,{i:()=>p});var l,S,a=r(29841),e=r.n(a);(S=l||(l={})).auth="Login",S.cephfs="CephFS",S.rbd="RBD",S.pool="Pool",S.osd="OSD",S.role="Role",S.user="User";var T=r(65218),E=r(63284),f=r(87536);class u{constructor(_,v,R){this.running=_,this.failure=v,this.success=R}}class F{failure(_){return $localize`Failed to ${this.operation.failure} ${this.involves(_)}`}running(_){return`${this.operation.running} ${this.involves(_)}`}success(_){return`${this.operation.success} ${this.involves(_)}`}constructor(_,v,R){this.operation=_,this.involves=v,this.errors=R||(()=>({}))}}class p{constructor(){this.defaultMessage=this.newTaskMessage(new u($localize`Executing`,$localize`execute`,$localize`Executed`),_=>_&&(l[_.component]||_.component)||$localize`unknown task`,()=>({})),this.pluralize=(new E.n).transform,this.commonOperations={create:new u($localize`Creating`,$localize`create`,$localize`Created`),update:new u($localize`Updating`,$localize`update`,$localize`Updated`),delete:new u($localize`Deleting`,$localize`delete`,$localize`Deleted`),add:new u($localize`Adding`,$localize`add`,$localize`Added`),remove:new u($localize`Removing`,$localize`remove`,$localize`Removed`),import:new u($localize`Importing`,$localize`import`,$localize`Imported`),activate:new u($localize`Importing`,$localize`activate`,$localize`Activated`),deactivate:new u($localize`Importing`,$localize`deactivate`,$localize`Deactivated`)},this.rbd={default:_=>$localize`RBD '${_.image_spec}'`,create:_=>{const v=new T.J(_.pool_name,_.namespace,_.image_name).toString();return $localize`RBD '${v}'`},child:_=>{const v=new T.J(_.child_pool_name,_.child_namespace,_.child_image_name).toString();return $localize`RBD '${v}'`},destination:_=>{const v=new T.J(_.dest_pool_name,_.dest_namespace,_.dest_image_name).toString();return $localize`RBD '${v}'`},snapshot:_=>$localize`RBD snapshot '${_.image_spec}@${_.snapshot_name}'`},this.rbd_mirroring={site_name:()=>$localize`mirroring site name`,bootstrap:()=>$localize`bootstrap token`,pool:_=>$localize`mirror mode for pool '${_.pool_name}'`,pool_peer:_=>$localize`mirror peer for pool '${_.pool_name}'`},this.grafana={update_dashboards:()=>$localize`all dashboards`},this.messages={"host/add":this.newTaskMessage(this.commonOperations.add,_=>this.host(_)),"host/remove":this.newTaskMessage(this.commonOperations.remove,_=>this.host(_)),"host/identify_device":this.newTaskMessage(new u($localize`Identifying`,$localize`identify`,$localize`Identified`),_=>$localize`device '${_.device}' on host '${_.hostname}'`),"osd/create":this.newTaskMessage(this.commonOperations.create,_=>$localize`OSDs (DriveGroups: ${_.tracking_id})`),"osd/delete":this.newTaskMessage(this.commonOperations.delete,_=>this.osd(_)),"pool/create":this.newTaskMessage(this.commonOperations.create,_=>this.pool(_),_=>({17:$localize`Name is already used by ${this.pool(_)}.`})),"pool/edit":this.newTaskMessage(this.commonOperations.update,_=>this.pool(_),_=>({17:$localize`Name is already used by ${this.pool(_)}.`})),"pool/delete":this.newTaskMessage(this.commonOperations.delete,_=>this.pool(_)),"ecp/create":this.newTaskMessage(this.commonOperations.create,_=>this.ecp(_),_=>({17:$localize`Name is already used by ${this.ecp(_)}.`})),"ecp/delete":this.newTaskMessage(this.commonOperations.delete,_=>this.ecp(_)),"crushRule/create":this.newTaskMessage(this.commonOperations.create,_=>this.crushRule(_),_=>({17:$localize`Name is already used by ${this.crushRule(_)}.`})),"crushRule/delete":this.newTaskMessage(this.commonOperations.delete,_=>this.crushRule(_)),"rbd/create":this.newTaskMessage(this.commonOperations.create,this.rbd.create,_=>({17:$localize`Name is already used by ${this.rbd.create(_)}.`})),"rbd/edit":this.newTaskMessage(this.commonOperations.update,this.rbd.default,_=>({17:$localize`Name is already used by ${this.rbd.default(_)}.`})),"rbd/delete":this.newTaskMessage(this.commonOperations.delete,this.rbd.default,_=>({16:$localize`${this.rbd.default(_)} is busy.`,39:$localize`${this.rbd.default(_)} contains snapshots.`})),"rbd/clone":this.newTaskMessage(new u($localize`Cloning`,$localize`clone`,$localize`Cloned`),this.rbd.child,_=>({17:$localize`Name is already used by ${this.rbd.child(_)}.`,22:$localize`Snapshot of ${this.rbd.child(_)} must be protected.`})),"rbd/copy":this.newTaskMessage(new u($localize`Copying`,$localize`copy`,$localize`Copied`),this.rbd.destination,_=>({17:$localize`Name is already used by ${this.rbd.destination(_)}.`})),"rbd/flatten":this.newTaskMessage(new u($localize`Flattening`,$localize`flatten`,$localize`Flattened`),this.rbd.default),"rbd/snap/create":this.newTaskMessage(this.commonOperations.create,this.rbd.snapshot,_=>({17:$localize`Name is already used by ${this.rbd.snapshot(_)}.`})),"rbd/snap/edit":this.newTaskMessage(this.commonOperations.update,this.rbd.snapshot,_=>({16:$localize`Cannot unprotect ${this.rbd.snapshot(_)} because it contains child images.`})),"rbd/snap/delete":this.newTaskMessage(this.commonOperations.delete,this.rbd.snapshot,_=>({16:$localize`Cannot delete ${this.rbd.snapshot(_)} because it's protected.`})),"rbd/snap/rollback":this.newTaskMessage(new u($localize`Rolling back`,$localize`rollback`,$localize`Rolled back`),this.rbd.snapshot),"rbd/trash/move":this.newTaskMessage(new u($localize`Moving`,$localize`move`,$localize`Moved`),_=>$localize`image '${_.image_spec}' to trash`,()=>({2:$localize`Could not find image.`})),"rbd/trash/restore":this.newTaskMessage(new u($localize`Restoring`,$localize`restore`,$localize`Restored`),_=>$localize`image '${_.image_id_spec}' into '${_.new_image_name}'`,_=>({17:$localize`Image name '${_.new_image_name}' is already in use.`})),"rbd/trash/remove":this.newTaskMessage(new u($localize`Deleting`,$localize`delete`,$localize`Deleted`),_=>$localize`image '${_.image_id_spec}'`),"rbd/trash/purge":this.newTaskMessage(new u($localize`Purging`,$localize`purge`,$localize`Purged`),_=>{let v=$localize`all pools`;return _.pool_name&&(v=`'${_.pool_name}'`),$localize`images from ${v}`}),"rbd/mirroring/site_name/edit":this.newTaskMessage(this.commonOperations.update,this.rbd_mirroring.site_name,()=>({})),"rbd/mirroring/bootstrap/create":this.newTaskMessage(this.commonOperations.create,this.rbd_mirroring.bootstrap,()=>({})),"rbd/mirroring/bootstrap/import":this.newTaskMessage(this.commonOperations.import,this.rbd_mirroring.bootstrap,()=>({})),"rbd/mirroring/pool/edit":this.newTaskMessage(this.commonOperations.update,this.rbd_mirroring.pool,()=>({16:$localize`Cannot disable mirroring because it contains a peer.`})),"rbd/mirroring/peer/add":this.newTaskMessage(this.commonOperations.create,this.rbd_mirroring.pool_peer,()=>({})),"rbd/mirroring/peer/edit":this.newTaskMessage(this.commonOperations.update,this.rbd_mirroring.pool_peer,()=>({})),"rbd/mirroring/peer/delete":this.newTaskMessage(this.commonOperations.delete,this.rbd_mirroring.pool_peer,()=>({})),"rgw/bucket/delete":this.newTaskMessage(this.commonOperations.delete,_=>$localize`${_.bucket_names[0]}`),"rgw/bucket/notification/delete":this.newTaskMessage(this.commonOperations.delete,_=>$localize`${_.notification_id[0]}`),"rgw/accounts":this.newTaskMessage(this.commonOperations.delete,_=>$localize`${`account '${_.account_names[0]}'`}`),"rgw/multisite/sync-policy/delete":this.newTaskMessage(this.commonOperations.delete,_=>$localize`${_.group_names.length>1?"selected policy groups":`policy group '${_.group_names[0]}'`}`),"rgw/multisite/sync-flow/delete":this.newTaskMessage(this.commonOperations.delete,_=>$localize`${_.flow_ids.length>1?"selected Flow":`Flow '${_.flow_ids[0]}'`}`),"rgw/multisite/sync-pipe/delete":this.newTaskMessage(this.commonOperations.delete,_=>$localize`${_.pipe_ids.length>1?"selected pipe":`Pipe '${_.pipe_ids[0]}'`}`),"rgw/zonegroup/storage-class":this.newTaskMessage(this.commonOperations.remove,_=>this.rgwStorageClass(_)),"iscsi/target/create":this.newTaskMessage(this.commonOperations.create,_=>this.iscsiTarget(_)),"iscsi/target/edit":this.newTaskMessage(this.commonOperations.update,_=>this.iscsiTarget(_)),"iscsi/target/delete":this.newTaskMessage(this.commonOperations.delete,_=>this.iscsiTarget(_)),"nvmeof/subsystem/create":this.newTaskMessage(this.commonOperations.create,_=>this.nvmeofSubsystem(_)),"nvmeof/subsystem/delete":this.newTaskMessage(this.commonOperations.delete,_=>this.nvmeofSubsystem(_)),"nvmeof/listener/create":this.newTaskMessage(this.commonOperations.create,_=>this.nvmeofListener(_)),"nvmeof/listener/delete":this.newTaskMessage(this.commonOperations.delete,_=>this.nvmeofListener(_)),"nvmeof/namespace/create":this.newTaskMessage(this.commonOperations.create,_=>this.nvmeofNamespace(_)),"nvmeof/namespace/edit":this.newTaskMessage(this.commonOperations.update,_=>this.nvmeofNamespace(_)),"nvmeof/namespace/delete":this.newTaskMessage(this.commonOperations.delete,_=>this.nvmeofNamespace(_)),"nvmeof/initiator/add":this.newTaskMessage(this.commonOperations.add,_=>this.nvmeofInitiator(_)),"nvmeof/initiator/remove":this.newTaskMessage(this.commonOperations.remove,_=>this.nvmeofInitiator(_)),"nfs/create":this.newTaskMessage(this.commonOperations.create,_=>this.nfs(_)),"nfs/edit":this.newTaskMessage(this.commonOperations.update,_=>this.nfs(_)),"nfs/delete":this.newTaskMessage(this.commonOperations.delete,_=>this.nfs(_)),"rgw/topic/delete":this.newTaskMessage(this.commonOperations.delete,_=>this.topic(_)),"grafana/dashboards/update":this.newTaskMessage(this.commonOperations.update,this.grafana.update_dashboards,()=>({})),"service/create":this.newTaskMessage(this.commonOperations.create,_=>this.service(_)),"service/edit":this.newTaskMessage(this.commonOperations.update,_=>this.service(_)),"service/delete":this.newTaskMessage(this.commonOperations.delete,_=>this.service(_)),"crud-component/create":this.newTaskMessage(this.commonOperations.create,_=>this.crudMessage(_)),"crud-component/edit":this.newTaskMessage(this.commonOperations.update,_=>this.crudMessage(_)),"crud-component/import":this.newTaskMessage(this.commonOperations.import,_=>this.crudMessage(_)),"crud-component/id":this.newTaskMessage(this.commonOperations.delete,_=>this.crudMessageId(_)),"cephfs/create":this.newTaskMessage(this.commonOperations.create,_=>this.volume(_)),"cephfs/edit":this.newTaskMessage(this.commonOperations.update,_=>this.volume(_)),"cephfs/auth":this.newTaskMessage(this.commonOperations.update,_=>this.auth(_)),"cephfs/remove":this.newTaskMessage(this.commonOperations.remove,_=>this.volume(_)),"cephfs/subvolume/create":this.newTaskMessage(this.commonOperations.create,_=>this.subvolume(_)),"cephfs/subvolume/edit":this.newTaskMessage(this.commonOperations.update,_=>this.subvolume(_)),"cephfs/subvolume/remove":this.newTaskMessage(this.commonOperations.remove,_=>this.subvolume(_)),"cephfs/subvolume/group/create":this.newTaskMessage(this.commonOperations.create,_=>this.subvolumegroup(_)),"cephfs/subvolume/group/edit":this.newTaskMessage(this.commonOperations.update,_=>this.subvolumegroup(_)),"cephfs/subvolume/group/remove":this.newTaskMessage(this.commonOperations.remove,_=>this.subvolumegroup(_)),"cephfs/subvolume/snapshot/create":this.newTaskMessage(this.commonOperations.create,_=>this.snapshot(_)),"cephfs/subvolume/snapshot/delete":this.newTaskMessage(this.commonOperations.delete,_=>this.snapshot(_)),"cephfs/snapshot/schedule/create":this.newTaskMessage(this.commonOperations.add,_=>this.snapshotSchedule(_)),"cephfs/snapshot/schedule/edit":this.newTaskMessage(this.commonOperations.update,_=>this.snapshotSchedule(_)),"cephfs/snapshot/schedule/delete":this.newTaskMessage(this.commonOperations.delete,_=>this.snapshotSchedule(_)),"cephfs/snapshot/schedule/activate":this.newTaskMessage(this.commonOperations.activate,_=>this.snapshotSchedule(_)),"cephfs/snapshot/schedule/deactivate":this.newTaskMessage(this.commonOperations.deactivate,_=>this.snapshotSchedule(_)),"cephfs/smb/cluster/create":this.newTaskMessage(this.commonOperations.create,_=>this.smbCluster(_)),"cephfs/smb/cluster/edit":this.newTaskMessage(this.commonOperations.update,_=>this.smbCluster(_)),"cephfs/smb/cluster/delete":this.newTaskMessage(this.commonOperations.delete,_=>this.smbCluster(_)),"cephfs/smb/share/create":this.newTaskMessage(this.commonOperations.create,_=>this.smbShare(_)),"cephfs/smb/share/edit":this.newTaskMessage(this.commonOperations.update,_=>this.smbShare(_)),"cephfs/smb/share/delete":this.newTaskMessage(this.commonOperations.delete,_=>this.smbShare(_)),"cephfs/smb/active-directory/create":this.newTaskMessage(this.commonOperations.create,_=>this.smbJoinAuth(_)),"cephfs/smb/active-directory/edit":this.newTaskMessage(this.commonOperations.update,_=>this.smbJoinAuth(_)),"cephfs/smb/active-directory/delete":this.newTaskMessage(this.commonOperations.delete,_=>this.smbJoinAuth(_)),"cephfs/smb/standalone/create":this.newTaskMessage(this.commonOperations.create,_=>this.smbUsersgroups(_)),"cephfs/smb/standalone/edit":this.newTaskMessage(this.commonOperations.update,_=>this.smbUsersgroups(_)),"cephfs/smb/standalone/delete":this.newTaskMessage(this.commonOperations.delete,_=>this.smbUsersgroups(_))}}newTaskMessage(_,v,R){return new F(_,v,R)}host(_){return $localize`host '${_.hostname}'`}osd(_){return $localize`OSD '${_.svc_id}'`}pool(_){return $localize`pool '${_.pool_name}'`}ecp(_){return $localize`erasure code profile '${_.name}'`}crushRule(_){return $localize`crush rule '${_.name}'`}iscsiTarget(_){return $localize`target '${_.target_iqn}'`}nvmeofSubsystem(_){return $localize`subsystem '${_.nqn}'`}nvmeofListener(_){return $localize`listener '${_.host_name} for subsystem ${_.nqn}`}nvmeofNamespace(_){return _?.nsid?$localize`namespace ${_.nsid} for subsystem '${_.nqn}'`:$localize`${_.nsCount} ${this.pluralize("namespace",_.nsCount)} for subsystem '${_.nqn}'`}nvmeofInitiator(_){return $localize`${this.pluralize("initiator",_.plural)} for subsystem ${_.nqn}`}nfs(_){return $localize`NFS '${_.cluster_id}\:${_.export_id?_.export_id:_.path}'`}smbCluster(_){return $localize`SMB cluster  '${_.cluster_id}'`}smbShare(_){return $localize`SMB share '${_?.share_id}'`}smbJoinAuth(_){return $localize`SMB active directory access resource '${_.authId}'`}smbUsersgroups(_){return $localize`SMB users and groups access resource '${_.usersGroupsId}'`}topic(_){return $localize`Topic  '${_.name}'`}notification(_){return $localize`Notification  '${_.name}'`}service(_){return $localize`service '${_.service_name}'`}rgwStorageClass(_){return $localize`Tiering Storage Class  '${_.storage_class}'`}crudMessage(_){let v=_.__message;return e().forEach(_,(R,P)=>{if("__message"!=P){let M="{"+P+"}";v=v.replace(M,R)}}),$localize`${v}`}volume(_){return $localize`'${_.volumeName}'`}auth(_){return $localize`client.${_.clientId} authorization successfully`}subvolume(_){return $localize`subvolume '${_.subVolumeName}'`}subvolumegroup(_){return $localize`subvolume group '${_.subvolumegroupName}'`}snapshot(_){return $localize`snapshot '${_.snapshotName}'`}snapshotSchedule(_){return $localize`snapshot schedule for path '${_?.path}'`}crudMessageId(_){return $localize`${_}`}_getTaskTitle(_){return _.name&&_.name.startsWith("progress/")?this.newTaskMessage(new u(_.name.replace("progress/",""),"",_.name.replace("progress/","")),v=>""):this.messages[_.name]||this.defaultMessage}getSuccessTitle(_){return this._getTaskTitle(_).success(_.metadata)}getErrorMessage(_){return this._getTaskTitle(_).errors(_.metadata)[_.exception.code]||_.exception.detail}getErrorTitle(_){return this._getTaskTitle(_).failure(_.metadata)}getRunningTitle(_){return this._getTaskTitle(_).running(_.metadata)}getRunningText(_){return this._getTaskTitle(_).operation.running}static{this.\u0275fac=function(v){return new(v||p)}}static{this.\u0275prov=f.\u0275\u0275defineInjectable({token:p,factory:p.\u0275fac,providedIn:"root"})}}},50813:(Z,A,r)=>{r.d(A,{a:()=>v});var a=r(95631),l=r(88285),T=r(84268),E=r(12959),f=r(88701),u=r(63882),F=r(60977),p=r(66527),S=r(87536);class v{constructor(P,M,b,m){this.notificationService=P,this.summaryService=M,this.taskMessageService=b,this.taskManagerService=m}wrapTaskAroundCall({task:P,call:M}){return new a.Observable(b=>{M.subscribe(m=>{202===m.status?this._handleExecutingTasks(P):(this.summaryService.refresh(),P.success=!0,this.notificationService.notifyTask(P))},m=>{P.success=!1,P.exception=m.error,b.error(m)},()=>{b.complete()})})}_handleExecutingTasks(P){const M=new T.v(l._.info,this.taskMessageService.getRunningTitle(P));M.isFinishedTask=!0,this.notificationService.show(M);const b=new E.G(P.name,P.metadata);this.summaryService.addRunningTask(b),this.taskManagerService.subscribe(b.name,b.metadata,m=>{this.notificationService.notifyTask(m)})}static{this.\u0275fac=function(M){return new(M||v)(S.\u0275\u0275inject(f.J),S.\u0275\u0275inject(u.E),S.\u0275\u0275inject(p.i),S.\u0275\u0275inject(F.C))}}static{this.\u0275prov=S.\u0275\u0275defineInjectable({token:v,factory:v.\u0275fac,providedIn:"root"})}}},11145:(Z,A,r)=>{r.d(A,{C:()=>l});var a=r(87536);class l{constructor(){}format(E){const f=E?.nativeElement?.value;try{const u=JSON.stringify(JSON.parse(f),null,2);E.nativeElement.value=u,E.nativeElement.style.height="auto";const S=20*u.split("\n").length;E.nativeElement.style.height=S+"px"}catch{}}static{this.\u0275fac=function(f){return new(f||l)}}static{this.\u0275prov=a.\u0275\u0275defineInjectable({token:l,factory:l.\u0275fac,providedIn:"root"})}}},15643:(Z,A,r)=>{r.d(A,{H:()=>p});var a=r(95631),e=r(50619),l=r(72394),T=r(87536);class E{constructor(_){this.zone=_,this.scheduler=a.asyncScheduler}now(){return this.scheduler.now()}}class f extends E{constructor(_){super(_)}schedule(..._){return this.zone.runOutsideAngular(()=>this.scheduler.schedule.apply(this.scheduler,_))}static{this.\u0275fac=function(v){return new(v||f)(T.\u0275\u0275inject(T.NgZone))}}static{this.\u0275prov=T.\u0275\u0275defineInjectable({token:f,factory:f.\u0275fac,providedIn:"root"})}}class u extends E{constructor(_){super(_)}schedule(..._){return this.zone.run(()=>this.scheduler.schedule.apply(this.scheduler,_))}static{this.\u0275fac=function(v){return new(v||u)(T.\u0275\u0275inject(T.NgZone))}}static{this.\u0275prov=T.\u0275\u0275defineInjectable({token:u,factory:u.\u0275fac,providedIn:"root"})}}class F{constructor(_,v){this.leave=_,this.enter=v}static{this.\u0275fac=function(v){return new(v||F)(T.\u0275\u0275inject(f),T.\u0275\u0275inject(u))}}static{this.\u0275prov=T.\u0275\u0275defineInjectable({token:F,factory:F.\u0275fac,providedIn:"root"})}}class p{constructor(_){this.ngZone=_,this.DEFAULT_REFRESH_INTERVAL=5e3,this.DEFAULT_DUE_TIME=0}get(_,v=this.DEFAULT_REFRESH_INTERVAL,R=this.DEFAULT_DUE_TIME){return(0,a.timer)(R,v,this.ngZone.leave).pipe((0,e.observeOn)(this.ngZone.enter),(0,e.switchMap)(_),(0,e.shareReplay)({refCount:!0,bufferSize:1}),(0,l.g)())}static{this.\u0275fac=function(v){return new(v||p)(T.\u0275\u0275inject(F))}}static{this.\u0275prov=T.\u0275\u0275defineInjectable({token:p,factory:p.\u0275fac,providedIn:"root"})}}},30540:(Z,A,r)=>{r.d(A,{X:()=>E});var a=r(29841),e=r.n(a),l=r(87536);class E{constructor(){}findNode(u,F,p="id"){let S=null;return F.some(_=>S=e().get(_,p)===u?_:this.findNode(u,_.children||[],p)),S}expandNode(u,F){const p=e().cloneDeep(u),S=(R,P)=>R.map(M=>M.id===P.id?{...M,expanded:!0}:(M.children&&(M.children=S(M.children,P)),M));let _=S(p,F),v=this.findNode(F?.value?.parent,p);for(;v;)_=S(_,v),v=this.findNode(v?.value?.parent,p);return _}static{this.\u0275fac=function(F){return new(F||E)}}static{this.\u0275prov=l.\u0275\u0275defineInjectable({token:E,factory:E.\u0275fac,providedIn:"root"})}}},2361:(Z,A,r)=>{r.d(A,{E:()=>T});var a=r(91974),l=r(54372);class T{constructor(f){this.base=f}static concatURLSegments(f){return f.reduce(a.Location.joinWithSlash)}static buildURL(f,...u){return T.concatURLSegments([...f?["/"]:[],...u])}getURL(f,u=!0,...F){return T.buildURL(u,this.base,f,...F)}getCreate(f=!0){return this.getURL(l.Qp.CREATE,f)}getCreateFrom(f,u=!0){return this.getURL(l.Qp.CREATE,u,f)}getDelete(f=!0){return this.getURL(l.Qp.DELETE,f)}getEdit(f,u=!0){return this.getURL(l.Qp.EDIT,u,f)}getUpdate(f,u=!0){return this.getURL(l.Qp.UPDATE,u,f)}getAdd(f=!0){return this.getURL(l.Qp.ADD,f)}getRemove(f=!0){return this.getURL(l.Qp.REMOVE,f)}getRecreate(f,u=!0){return this.getURL(l.Qp.RECREATE,u,f)}}},53075:(Z,A,r)=>{r.d(A,{m:()=>f});var a=r(95631),l=r(87536);const E=[{stepIndex:0,isComplete:!1}];class f{constructor(){this.currentStep$=new a.BehaviorSubject(null),this.steps$=new a.BehaviorSubject(E),this.currentStep$.next(this.steps$.value[0])}setTotalSteps(F){const p=[];for(let S=0;S<F;S++)p.push({stepIndex:S,isComplete:!1});this.steps$=new a.BehaviorSubject(p)}setCurrentStep(F){this.currentStep$.next(F)}getCurrentStep(){return this.currentStep$.asObservable()}getSteps(){return this.steps$.asObservable()}moveToNextStep(){const F=this.currentStep$.value.stepIndex;this.currentStep$.next(this.steps$.value[F+1])}moveToPreviousStep(){const F=this.currentStep$.value.stepIndex;this.currentStep$.next(this.steps$.value[F-1])}isLastStep(){return this.currentStep$.value?.stepIndex===this.steps$.value.length-1}isFirstStep(){return 0===this.currentStep$.value?.stepIndex}static{this.\u0275fac=function(p){return new(p||f)}}static{this.\u0275prov=l.\u0275\u0275defineInjectable({token:f,factory:f.\u0275fac,providedIn:"root"})}}},93887:(Z,A,r)=>{r.d(A,{G:()=>q});var a=r(91974),l=r(53648),E=r(45451),u=r(25002),p=r(35855),S=r(99040),_=r(27289),v=r(21445),R=r(13421),P=r(42676),M=r(82254),b=r(12540),m=r(8990),g=r(90876),O=r(27202),N=r(87015),z=r(87536);class q{static{this.\u0275fac=function(D){return new(D||q)}}static{this.\u0275mod=z.\u0275\u0275defineNgModule({type:q})}static{this.\u0275inj=z.\u0275\u0275defineInjector({providers:[M.v,P.r,b.k,p._,N.BlockUIService],imports:[a.CommonModule,R.Y,S.h,_.h,v.h,l.ReactiveFormsModule,E.FormlyModule.forRoot({types:[{name:"array",component:m.o},{name:"object",component:g.G},{name:"input",component:O.R}],validationMessages:[{name:"required",message:"This field is required"}]}),u.FormlyBootstrapModule,N.BlockUIModule.forRoot(),S.h,R.Y,_.h,v.h]})}}},54181:(Z,A,r)=>{var a=r(5559),e=r(87536),l=r(91974),T=r(36618),E=r(98356),f=r(74737),u=r(76218),F=r(29841),p=r.n(F),S=r(84857),_=r(80697),v=r(50619);let R=class Jr{constructor(n){this.http=n,this.baseURL="api/cephfs",this.baseUiURL="ui-api/cephfs"}list(){return this.http.get(`${this.baseURL}`)}lsDir(n,t,o=2){let s=`${this.baseUiURL}/${n}/ls_dir?depth=${o}`;return t&&(s+=`&path=${encodeURIComponent(t)}`),this.http.get(s).pipe((0,v.shareReplay)())}getCephfs(n){return this.http.get(`${this.baseURL}/${n}`)}getTabs(n){return this.http.get(`ui-api/cephfs/${n}/tabs`)}getClients(n){return this.http.get(`${this.baseURL}/${n}/clients`)}evictClient(n,t){return this.http.delete(`${this.baseURL}/${n}/client/${t}`)}getMdsCounters(n){return this.http.get(`${this.baseURL}/${n}/mds_counters`)}getFsRootDirectory(n){return this.http.get(`${this.baseURL}/${n}/get_root_directory`)}mkSnapshot(n,t,o){let s=new T.HttpParams;return s=s.append("path",t),p().isUndefined(o)||(s=s.append("name",o)),this.http.post(`${this.baseURL}/${n}/snapshot`,null,{params:s})}rmSnapshot(n,t,o){let s=new T.HttpParams;return s=s.append("path",t),s=s.append("name",o),this.http.delete(`${this.baseURL}/${n}/snapshot`,{params:s})}quota(n,t,o){let s=new T.HttpParams;return s=s.append("path",t),this.http.put(`${this.baseURL}/${n}/quota`,o,{observe:"response",params:s})}create(n,t,o="",s=""){return this.http.post(this.baseURL,{name:n,service_spec:t,data_pool:o,metadata_pool:s},{observe:"response"})}isCephFsPool(n){return-1!==p().indexOf(n.application_metadata,"cephfs")&&!n.pool_name.includes("/")}remove(n){return this.http.delete(`${this.baseURL}/remove/${n}`,{observe:"response"})}rename(n,t){let o={name:n,new_name:t};return this.http.put(`${this.baseURL}/rename`,o,{observe:"response"})}setAuth(n,t,o,s){return this.http.put(`${this.baseURL}/auth`,{fs_name:n,client_id:`client.${t}`,caps:o,root_squash:s})}getUsedPools(){return this.http.get(`${this.baseUiURL}/used-pools`)}static{this.\u0275fac=function(t){return new(t||Jr)(e.\u0275\u0275inject(T.HttpClient))}}static{this.\u0275prov=e.\u0275\u0275defineInjectable({token:Jr,factory:Jr.\u0275fac,providedIn:"root"})}};R=(0,S.__decorate)([_.G,(0,S.__metadata)("design:paramtypes",[T.HttpClient])],R);var P=r(10978),M=r(25947),b=r(2148),m=r(54372),g=r(46045),O=r(84821),N=r(19380),c=r(82254),z=r(2361),B=r(50813),q=r(85481),Q=r(88701),G=r(77317),D=r(3600),oe=r(59781),fe=r(50889);const ye=i=>({"text-wrap":i});function je(i,n){if(1&i&&(e.\u0275\u0275elementStart(0,"span",4),e.\u0275\u0275text(1,"\n      "),e.\u0275\u0275elementStart(2,"span",5),e.\u0275\u0275text(3),e.\u0275\u0275elementEnd(),e.\u0275\u0275text(4,"\n      "),e.\u0275\u0275element(5,"cd-copy-2-clipboard-button",6),e.\u0275\u0275text(6,"\n    "),e.\u0275\u0275elementEnd()),2&i){const t=n.$implicit,o=e.\u0275\u0275nextContext(2);e.\u0275\u0275advance(2),e.\u0275\u0275property("ngClass",e.\u0275\u0275pureFunction1(4,ye,o.textWrap)),e.\u0275\u0275advance(),e.\u0275\u0275textInterpolate(t),e.\u0275\u0275advance(2),e.\u0275\u0275property("source",t)("byId",!1)}}function Le(i,n){if(1&i&&(e.\u0275\u0275elementContainerStart(0),e.\u0275\u0275elementStart(1,"pre",2),e.\u0275\u0275text(2,"    "),e.\u0275\u0275template(3,je,7,6,"span",3),e.\u0275\u0275text(4,"\n  "),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementContainerEnd()),2&i){const t=e.\u0275\u0275nextContext();e.\u0275\u0275advance(3),e.\u0275\u0275property("ngForOf",t.codes)}}function Fe(i,n){if(1&i&&(e.\u0275\u0275elementStart(0,"pre",7),e.\u0275\u0275text(1,"    "),e.\u0275\u0275elementStart(2,"span",5),e.\u0275\u0275text(3),e.\u0275\u0275elementEnd(),e.\u0275\u0275text(4,"\n    "),e.\u0275\u0275element(5,"cd-copy-2-clipboard-button",6),e.\u0275\u0275text(6,"\n  "),e.\u0275\u0275elementEnd()),2&i){const t=e.\u0275\u0275nextContext();e.\u0275\u0275advance(2),e.\u0275\u0275property("ngClass",e.\u0275\u0275pureFunction1(4,ye,t.textWrap)),e.\u0275\u0275advance(),e.\u0275\u0275textInterpolate(t.codes),e.\u0275\u0275advance(2),e.\u0275\u0275property("source",t.codes)("byId",!1)}}class te{constructor(){this.textWrap=!1,this.grayBg=!1}static{this.\u0275fac=function(t){return new(t||te)}}static{this.\u0275cmp=e.\u0275\u0275defineComponent({type:te,selectors:[["cd-code-block"]],inputs:{codes:"codes",textWrap:"textWrap",grayBg:"grayBg"},decls:3,vars:2,consts:[["singleCodeBlock",""],[4,"ngIf","ngIfElse"],["id","bigCodeBlock"],["class","d-flex px-2 py-3 align-items-center justify-content-between text-dark",4,"ngFor","ngForOf"],[1,"d-flex","px-2","py-3","align-items-center","justify-content-between","text-dark"],[3,"ngClass"],[3,"source","byId"],["id","singleCodeBlock",1,"d-flex","px-2","py-3","align-items-center","justify-content-between","text-dark"]],template:function(t,o){if(1&t&&e.\u0275\u0275template(0,Le,5,1,"ng-container",1)(1,Fe,7,6,"ng-template",null,0,e.\u0275\u0275templateRefExtractor),2&t){const s=e.\u0275\u0275reference(2);e.\u0275\u0275property("ngIf",o.codes.length>1)("ngIfElse",s)}},dependencies:[l.NgClass,l.NgForOf,l.NgIf,fe.N],styles:["pre[_ngcontent-%COMP%]{background-color:var(--gray-200);border-radius:.5rem}"]})}}const le=["mountDetailsTpl"],ie=i=>[i];class _e extends D.BaseModal{constructor(n){super(),this.activeModal=n,this.MOUNT_DIRECTORY="<MOUNT_DIRECTORY>"}ngOnInit(){this.mount=`sudo mount -t ceph <CLIENT_USER>@${this.mountData?.fsId}.${this.mountData?.fsName}=${this.mountData?.rootPath} ${this.MOUNT_DIRECTORY}`,this.fuse=`sudo ceph-fuse  ${this.MOUNT_DIRECTORY} -r ${this.mountData?.rootPath} --client_mds_namespace=${this.mountData?.fsName}`,this.nfs=`sudo mount -t nfs -o port=<PORT> <IP of active_nfs daemon>:<export_name> ${this.MOUNT_DIRECTORY}`}cancel(){this.closeModal()}static{this.\u0275fac=function(t){return new(t||_e)(e.\u0275\u0275directiveInject(G.NgbActiveModal))}}static{this.\u0275cmp=e.\u0275\u0275defineComponent({type:_e,selectors:[["cd-cephfs-mount-details"]],viewQuery:function(t,o){if(1&t&&e.\u0275\u0275viewQuery(le,7),2&t){let s;e.\u0275\u0275queryRefresh(s=e.\u0275\u0275loadQuery())&&(o.mountDetailsTpl=s.first)}},features:[e.\u0275\u0275InheritDefinitionFeature],decls:15,vars:12,consts:()=>{let n,t,o,s;return n=$localize`:␟b71e3978ce17adca9d2c7f48670f5e76c0fa7797␟5644115040935740836: Attach commands `,t=$localize`:␟c0d9f85e384e672c9dc7a1a534cc0ae04df46061␟6105654291415432475: Using Mount command `,o=$localize`:␟8ef098553d92f46c3c26756efc92cf6f73c5726e␟7379242548105460995: Using FUSE command `,s=$localize`:␟27c29e7bca95bab4f6bd9e29e292fafb4157cd31␟6536029073310425543: Using NFS Command `,[n,t,o,s,["size","md",3,"overlaySelected","open"],[3,"closeSelect"],["cdsModalHeaderHeading",""],[1,"cds--modal-content"],[1,"fw-bold"],["textWrap","true",3,"codes"],[3,"backAction","modalForm","showSubmit"]]},template:function(t,o){1&t&&(e.\u0275\u0275elementStart(0,"cds-modal",4),e.\u0275\u0275listener("overlaySelected",function(){return o.closeModal()}),e.\u0275\u0275elementStart(1,"cds-modal-header",5),e.\u0275\u0275listener("closeSelect",function(){return o.closeModal()}),e.\u0275\u0275elementStart(2,"h3",6),e.\u0275\u0275i18n(3,0),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(4,"div",7)(5,"h5",8),e.\u0275\u0275i18n(6,1),e.\u0275\u0275elementEnd(),e.\u0275\u0275element(7,"cd-code-block",9),e.\u0275\u0275elementStart(8,"h5",8),e.\u0275\u0275i18n(9,2),e.\u0275\u0275elementEnd(),e.\u0275\u0275element(10,"cd-code-block",9),e.\u0275\u0275elementStart(11,"h5",8),e.\u0275\u0275i18n(12,3),e.\u0275\u0275elementEnd(),e.\u0275\u0275element(13,"cd-code-block",9),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(14,"cd-form-button-panel",10),e.\u0275\u0275listener("backAction",function(){return o.cancel()}),e.\u0275\u0275elementEnd()()),2&t&&(e.\u0275\u0275property("open",o.open),e.\u0275\u0275advance(7),e.\u0275\u0275property("codes",e.\u0275\u0275pureFunction1(6,ie,o.mount)),e.\u0275\u0275advance(3),e.\u0275\u0275property("codes",e.\u0275\u0275pureFunction1(8,ie,o.fuse)),e.\u0275\u0275advance(3),e.\u0275\u0275property("codes",e.\u0275\u0275pureFunction1(10,ie,o.nfs)),e.\u0275\u0275advance(),e.\u0275\u0275property("modalForm",!0)("showSubmit",!1))},dependencies:[oe.e,te,D.Modal,D.ModalHeader,D.ModalHeaderHeading]})}}class ue{constructor(n){this.http=n}getFullHealth(){return this.http.get("api/health/full")}getMinimalHealth(){return this.http.get("api/health/minimal")}getClusterCapacity(){return this.http.get("api/health/get_cluster_capacity")}getClusterFsid(){return this.http.get("api/health/get_cluster_fsid")}getOrchestratorName(){return this.http.get("api/health/get_orchestrator_name")}getTelemetryStatus(){return this.http.get("api/health/get_telemetry_status")}static{this.\u0275fac=function(t){return new(t||ue)(e.\u0275\u0275inject(T.HttpClient))}}static{this.\u0275prov=e.\u0275\u0275defineInjectable({token:ue,factory:ue.\u0275fac,providedIn:"root"})}}var C=r(53648),K=r(95631);class Ee{constructor(n){this.cephFsService=n,this._directoryStoreSubject=new K.BehaviorSubject({}),this.directoryStore$=this._directoryStoreSubject.asObservable(),this.stopDirectoryPolling=new K.Subject,this.isLoading=!0}loadDirectories(n,t="/",o=3){this.directoryStore$.pipe((0,v.filter)(s=>!s[n]),(0,v.switchMap)(()=>(0,K.timer)(0,6e5).pipe((0,v.switchMap)(()=>this.cephFsService.lsDir(n,t,o).pipe((0,v.tap)(s=>{this.isLoading=!1,this._directoryStoreSubject.next({[n]:s})}))),(0,v.retry)(),(0,v.share)(),(0,v.takeUntil)(this.stopDirectoryPolling)))).subscribe()}search(n,t,o=5){return this.directoryStore$.pipe((0,v.map)(s=>{const d=new RegExp(n,"gi");return s[t].filter(I=>d.test(I.path)).map(I=>I.path).slice(0,o)}))}stopPollingDictories(){this.stopDirectoryPolling.next()}static{this.\u0275fac=function(t){return new(t||Ee)(e.\u0275\u0275inject(R))}}static{this.\u0275prov=e.\u0275\u0275defineInjectable({token:Ee,factory:Ee.\u0275fac,providedIn:"root"})}}var Ce=r(74902),Ue=r(58384),He=r(94254),it=r(64333),ct=r(23603),tt=r(56677),Ge=r(90476),ze=r(37966),ut=r(51862),Pe=r(37353);function De(i,n){1&i&&(e.\u0275\u0275elementStart(0,"span",31),e.\u0275\u0275i18n(1,10),e.\u0275\u0275elementEnd())}function Ie(i,n){if(1&i&&e.\u0275\u0275template(0,De,2,0,"span",30),2&i){e.\u0275\u0275nextContext();const t=e.\u0275\u0275reference(3),o=e.\u0275\u0275nextContext();e.\u0275\u0275property("ngIf",o.form.showError("fsName",t,"required"))}}function Qe(i,n){if(1&i){const t=e.\u0275\u0275getCurrentView();e.\u0275\u0275text(0," You can manage users from "),e.\u0275\u0275elementStart(1,"a",32),e.\u0275\u0275listener("click",function(){e.\u0275\u0275restoreView(t);const s=e.\u0275\u0275nextContext(2);return e.\u0275\u0275resetView(s.closeModal())}),e.\u0275\u0275text(2,"Ceph Users"),e.\u0275\u0275elementEnd(),e.\u0275\u0275text(3," page ")}}function qe(i,n){1&i&&(e.\u0275\u0275elementStart(0,"span",31),e.\u0275\u0275i18n(1,11),e.\u0275\u0275elementEnd())}function ht(i,n){if(1&i&&e.\u0275\u0275template(0,qe,2,0,"span",30),2&i){e.\u0275\u0275nextContext();const t=e.\u0275\u0275reference(3),o=e.\u0275\u0275nextContext();e.\u0275\u0275property("ngIf",o.form.showError("userId",t,"required"))}}function St(i,n){1&i&&(e.\u0275\u0275elementStart(0,"span",31),e.\u0275\u0275i18n(1,12),e.\u0275\u0275elementEnd())}function Jt(i,n){if(1&i&&e.\u0275\u0275template(0,St,2,0,"span",30),2&i){e.\u0275\u0275nextContext();const t=e.\u0275\u0275reference(3),o=e.\u0275\u0275nextContext();e.\u0275\u0275property("ngIf",o.form.showError("directory",t,"required"))}}function Lt(i,n){if(1&i&&(e.\u0275\u0275elementStart(0,"cd-help-text"),e.\u0275\u0275text(1),e.\u0275\u0275elementEnd()),2&i){const t=e.\u0275\u0275nextContext().$implicit;e.\u0275\u0275advance(),e.\u0275\u0275textInterpolate1(" ",t.description," ")}}function Zt(i,n){if(1&i&&(e.\u0275\u0275elementContainerStart(0),e.\u0275\u0275elementStart(1,"cds-checkbox",33),e.\u0275\u0275text(2),e.\u0275\u0275pipe(3,"titlecase"),e.\u0275\u0275template(4,Lt,2,1,"cd-help-text",34),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementContainerEnd()),2&i){const t=n.$implicit;e.\u0275\u0275advance(),e.\u0275\u0275property("id",t.name)("name",t.name)("formControlName",t.name),e.\u0275\u0275advance(),e.\u0275\u0275textInterpolate1(" ",e.\u0275\u0275pipeBind1(3,5,t.name)," "),e.\u0275\u0275advance(2),e.\u0275\u0275property("ngIf",t.description)}}function zt(i,n){if(1&i){const t=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementContainerStart(0),e.\u0275\u0275elementStart(1,"section",17)(2,"form",18,0)(4,"div",19)(5,"cds-text-label",20),e.\u0275\u0275i18nStart(6,6),e.\u0275\u0275element(7,"input",21),e.\u0275\u0275i18nEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275template(8,Ie,1,1,"ng-template",null,1,e.\u0275\u0275templateRefExtractor),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(10,"div",19)(11,"cds-text-label",22),e.\u0275\u0275i18nStart(12,7),e.\u0275\u0275element(13,"input",23)(14,"input",24),e.\u0275\u0275i18nEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275template(15,Qe,4,0,"ng-template",null,2,e.\u0275\u0275templateRefExtractor)(17,ht,1,1,"ng-template",null,3,e.\u0275\u0275templateRefExtractor),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(19,"div",19)(20,"cds-text-label",25),e.\u0275\u0275i18nStart(21,8),e.\u0275\u0275element(22,"input",26),e.\u0275\u0275i18nEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275template(23,Jt,1,1,"ng-template",null,4,e.\u0275\u0275templateRefExtractor),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(25,"div",19)(26,"fieldset")(27,"label",27),e.\u0275\u0275i18n(28,9),e.\u0275\u0275elementEnd(),e.\u0275\u0275template(29,Zt,5,7,"ng-container",28),e.\u0275\u0275elementEnd()()()(),e.\u0275\u0275elementStart(30,"cd-form-button-panel",29),e.\u0275\u0275pipe(31,"titlecase"),e.\u0275\u0275listener("submitActionEvent",function(){e.\u0275\u0275restoreView(t);const s=e.\u0275\u0275nextContext();return e.\u0275\u0275resetView(s.onSubmit())}),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementContainerEnd()}if(2&i){const t=e.\u0275\u0275reference(9),o=e.\u0275\u0275reference(16),s=e.\u0275\u0275reference(18),d=e.\u0275\u0275reference(24),h=e.\u0275\u0275nextContext();e.\u0275\u0275advance(2),e.\u0275\u0275property("formGroup",h.form),e.\u0275\u0275advance(3),e.\u0275\u0275property("invalid",!h.form.controls.fsName.valid&&h.form.controls.fsName.dirty)("invalidText",t),e.\u0275\u0275advance(2),e.\u0275\u0275property("invalid",!h.form.controls.fsName.valid&&h.form.controls.fsName.dirty),e.\u0275\u0275advance(4),e.\u0275\u0275property("helperText",o)("invalid",!h.form.controls.userId.valid&&h.form.controls.userId.dirty)("invalidText",s),e.\u0275\u0275advance(3),e.\u0275\u0275property("invalid",!h.form.controls.userId.valid&&h.form.controls.userId.dirty),e.\u0275\u0275advance(6),e.\u0275\u0275property("invalid",!h.form.controls.directory.valid&&h.form.controls.directory.dirty)("invalidText",d)("skeleton",h.directoryStore.isLoading),e.\u0275\u0275advance(2),e.\u0275\u0275property("placeholder",h.directoryStore.isLoading?"":"Directory path")("skeleton",h.directoryStore.isLoading)("invalid",!h.form.controls.directory.valid&&h.form.controls.directory.dirty)("ngbTypeahead",h.search),e.\u0275\u0275advance(7),e.\u0275\u0275property("ngForOf",h.clientPermissions),e.\u0275\u0275advance(),e.\u0275\u0275property("form",h.form)("submitText",e.\u0275\u0275pipeBind1(31,19,h.action))("modalForm",!0)}}class bt extends Ce.g{constructor(n,t,o,s,d,h,I,$){super(),this.actionLabels=n,this.directoryStore=t,this.cephfsService=o,this.taskWrapper=s,this.modalService=d,this.changeDetectorRef=h,this.fsName=I,this.id=$,this.isDefaultSubvolumeGroup=!1,this.isSubvolume=!1,this.icons=g.FI,this.clientPermissions=[{name:"read",description:$localize`Read permission is the minimum givable access`},{name:"write",description:$localize`Permission to set layouts or quotas, write access needed`},{name:"quota",description:$localize`Permission to set layouts or quotas, write access needed`},{name:"snapshot",description:$localize`Permission to create or delete snapshots, write access needed`},{name:"rootSquash",description:$localize`Safety measure to prevent scenarios such as accidental sudo rm -rf /path`}],this.search=w=>w.pipe((0,v.debounceTime)(300),(0,v.distinctUntilChanged)(),(0,v.switchMap)(X=>this.directoryStore.search(X,this.id).pipe((0,v.catchError)(()=>(0,K.of)([]))))),this.action=this.actionLabels.UPDATE,this.resource=$localize`access`}ngAfterViewInit(){this.changeDetectorRef.detectChanges()}ngOnInit(){this.directoryStore.loadDirectories(this.id,"/",3),this.createForm(),this.loadingReady(),this.directoryStore,this.form.get("directory").disable()}createForm(){this.form=new Ue.$({fsName:new C.FormControl({value:this.fsName,disabled:!0},{validators:[C.Validators.required]}),directory:new C.FormControl(void 0,{updateOn:"blur",validators:[C.Validators.required]}),userId:new C.FormControl(void 0,{validators:[C.Validators.required]}),read:new C.FormControl({value:!0,disabled:!0},{validators:[C.Validators.required]}),write:new C.FormControl(void 0),snapshot:new C.FormControl({value:!1,disabled:!0}),quota:new C.FormControl({value:!1,disabled:!0}),rootSquash:new C.FormControl(void 0)})}onSubmit(){const n=this.form.getValue("userId"),t=[this.form.getValue("directory"),this.transformPermissions()],o=this.form.getValue("rootSquash");this.taskWrapper.wrapTaskAroundCall({task:new q.O("cephfs/auth",{clientId:n}),call:this.cephfsService.setAuth(this.fsName,n,t,o)}).subscribe({error:()=>this.form.setErrors({cdSubmitButton:!0}),complete:()=>{this.modalService.dismissAll()}})}transformPermissions(){const n=this.form.getValue("write"),t=this.form.getValue("snapshot");return`r${n?"w":""}${this.form.getValue("quota")?"p":""}${t?"s":""}`}toggleFormControl(){const n=this.form.get("snapshot"),t=this.form.get("quota");n.disabled?n.enable():n.disable(),t.disabled?t.enable():t.disable()}static{this.\u0275fac=function(t){return new(t||bt)(e.\u0275\u0275directiveInject(m.Ss),e.\u0275\u0275directiveInject(Ee),e.\u0275\u0275directiveInject(R),e.\u0275\u0275directiveInject(B.a),e.\u0275\u0275directiveInject(He.V),e.\u0275\u0275directiveInject(e.ChangeDetectorRef),e.\u0275\u0275directiveInject("fsName",8),e.\u0275\u0275directiveInject("id",8))}}static{this.\u0275cmp=e.\u0275\u0275defineComponent({type:bt,selectors:[["cd-cephfs-auth-modal"]],features:[e.\u0275\u0275InheritDefinitionFeature],decls:7,vars:8,consts:()=>{let n,t,o,s,d,h,I,$,w,X,J;return n=$localize`:␟fb127ea03835b3230f0ed981c7080e2ccb879621␟3346778808274133574:${"\ufffd0\ufffd"}:INTERPOLATION: ${"\ufffd1\ufffd"}:INTERPOLATION_1:`,t=$localize`:␟2fecea01ce1d44114ee45144eff6d47a5016a74f␟5451140586403689891:Name...`,o=$localize`:␟2fecea01ce1d44114ee45144eff6d47a5016a74f␟5451140586403689891:Name...`,s=$localize`:␟3eeab96c6140147b145ff2005d1bb8ed2763709f␟827891333349149741:Path to restrict access to`,d=$localize`:␟6bcc5a40c7d2e882440e36fc81e9711fe82a6da1␟8021764855175733495:FS name ${"\ufffd#7\ufffd\ufffd/#7\ufffd"}:TAG_INPUT:`,h=$localize`:␟2ea56900ce0a6cb6d1740cb9a624684cc31271dd␟5295054868828749294:User ID ${"\ufffd#13\ufffd\ufffd/#13\ufffd"}:TAG_INPUT:${"\ufffd#14\ufffd\ufffd/#14\ufffd"}:TAG_INPUT_1:`,I=$localize`:␟2bdadc765959d013f0661e656884d5ea020bff1c␟3038934722661796355:Directory ${"\ufffd#22\ufffd\ufffd/#22\ufffd"}:TAG_INPUT:`,$=$localize`:␟70f45880fce6ac5d8e468e25e82aefbba8098cfe␟7314814725704332646:Permissions`,w=$localize`:␟7cbdabcece469fab89cfa687ab152bca18b97498␟1417693714872528491:This field is required.`,X=$localize`:␟7cbdabcece469fab89cfa687ab152bca18b97498␟1417693714872528491:This field is required.`,J=$localize`:␟7cbdabcece469fab89cfa687ab152bca18b97498␟1417693714872528491:This field is required.`,[["formDir","ngForm"],["fsNameError",""],["userIdHelperText",""],["userIdError",""],["directoryError",""],n,d,h,I,$,w,X,J,["size","md",3,"overlaySelected","open"],[3,"closeSelect"],["cdsModalHeaderHeading",""],[4,"cdFormLoading"],[1,"cds--modal-content"],["name","form",3,"formGroup"],[1,"form-item"],["for","fsName","cdRequiredField","FS name",3,"invalid","invalidText"],["cdsText","","placeholder",t,"id","fsName","name","fsName","formControlName","fsName","size","sm","autofocus","",3,"invalid"],["for","userId","cdRequiredField","User ID",3,"helperText","invalid","invalidText"],["cdsText","","value","client.","readonly",""],["cdsText","","placeholder",o,"id","userId","name","userId","formControlName","userId",3,"invalid"],["for","directory","cdRequiredField","Directory","helperText",s,3,"invalid","invalidText","skeleton"],["cdsText","","type","text","id","directory","name","directory","formControlName","directory",3,"placeholder","skeleton","invalid","ngbTypeahead"],[1,"cds--label"],[4,"ngFor","ngForOf"],[3,"submitActionEvent","form","submitText","modalForm"],["class","invalid-feedback",4,"ngIf"],[1,"invalid-feedback"],["routerLink","/ceph-users",3,"click"],[3,"id","name","formControlName"],[4,"ngIf"]]},template:function(t,o){1&t&&(e.\u0275\u0275elementStart(0,"cds-modal",13),e.\u0275\u0275listener("overlaySelected",function(){return o.closeModal()}),e.\u0275\u0275elementStart(1,"cds-modal-header",14),e.\u0275\u0275listener("closeSelect",function(){return o.closeModal()}),e.\u0275\u0275elementStart(2,"h3",15),e.\u0275\u0275i18n(3,5),e.\u0275\u0275pipe(4,"titlecase"),e.\u0275\u0275pipe(5,"upperFirst"),e.\u0275\u0275elementEnd()(),e.\u0275\u0275template(6,zt,32,21,"ng-container",16),e.\u0275\u0275elementEnd()),2&t&&(e.\u0275\u0275property("open",o.open),e.\u0275\u0275advance(5),e.\u0275\u0275i18nExp(e.\u0275\u0275pipeBind1(4,4,o.action))(e.\u0275\u0275pipeBind1(5,6,o.resource)),e.\u0275\u0275i18nApply(3),e.\u0275\u0275advance(),e.\u0275\u0275property("cdFormLoading",o.loading))},dependencies:[l.NgForOf,l.NgIf,oe.e,it.O,ct.B,tt.G,Ge.S,ze.E,ut.P,u.RouterLink,C.\u0275NgNoValidate,C.DefaultValueAccessor,C.NgControlStatus,C.NgControlStatusGroup,C.FormGroupDirective,C.FormControlName,G.NgbTypeahead,D.TextInputLabelComponent,D.TextInput,D.Checkbox,D.Modal,D.ModalHeader,D.ModalHeaderHeading,l.TitleCasePipe,Pe.r]})}}var ft=r(22453),Tt=r(1505),nt=r(92805),We=r(62847),at=r(32295),Et=r(45843),kt=r(2243),qt=r(29130),$t=r(62988),pt=r(73651),Gt=r(18457),xt=r(68316),Rt=r(37823),Tn=r(89939),st=r.n(Tn),jt=(r(58793),r(75721)),dn=r(77847),Nt=r(6783);const Fn=["chartCanvas"],Wt=["chartTooltip"];class j{constructor(){this.lhsCounter="mds_mem.ino",this.rhsCounter="mds_server.handle_client_request",this.chart={datasets:[{label:this.lhsCounter,yAxisID:"LHS",data:[],tension:.1,fill:{target:"origin"}},{label:this.rhsCounter,yAxisID:"RHS",data:[],tension:.1,fill:{target:"origin"}}],options:{plugins:{title:{text:"",display:!0},tooltip:{enabled:!1,mode:"index",intersect:!1,position:"nearest",callbacks:{title:n=>{let t="";return n.length>0&&(t=n[0].label),st()(t).format("LTS")}}},legend:{position:"top"}},responsive:!0,maintainAspectRatio:!1,scales:{x:{position:"top",type:"time",time:{displayFormats:{quarter:"MMM YYYY"}},ticks:{maxRotation:0}},LHS:{type:"linear",position:"left"},RHS:{type:"linear",position:"right"}}},chartType:"line"},jt.Chart.register(...jt.registerables)}ngOnInit(){p().isUndefined(this.mdsCounter)||(this.setChartTooltip(),this.updateChart())}ngOnChanges(){p().isUndefined(this.mdsCounter)||this.updateChart()}setChartTooltip(){const n=new dn.I(this.chartCanvas,this.chartTooltip,o=>o.caretX+"px",o=>o.caretY-o.height-23+"px");n.checkOffset=!0;const t={title:{text:this.mdsCounter.name},tooltip:{external:o=>n.customTooltips(o)}};p().merge(this.chart,{options:{plugins:t}})}updateChart(){const n=[{data:this.convertTimeSeries(this.mdsCounter[this.lhsCounter])},{data:this.deltaTimeSeries(this.mdsCounter[this.rhsCounter])}];p().merge(this.chart,{datasets:n}),this.chart.datasets=[...this.chart.datasets]}convertTimeSeries(n){const t=[];return p().each(n,o=>{t.push({x:1e3*o[0],y:o[1]})}),t.shift(),t}deltaTimeSeries(n){let t,o=n[0];const s=[];for(t=1;t<n.length;t++){const d=n[t];s.push({x:1e3*d[0],y:d[1]-o[1]}),o=d}return s}static{this.\u0275fac=function(t){return new(t||j)}}static{this.\u0275cmp=e.\u0275\u0275defineComponent({type:j,selectors:[["cd-cephfs-chart"]],viewQuery:function(t,o){if(1&t&&(e.\u0275\u0275viewQuery(Fn,7),e.\u0275\u0275viewQuery(Wt,7)),2&t){let s;e.\u0275\u0275queryRefresh(s=e.\u0275\u0275loadQuery())&&(o.chartCanvas=s.first),e.\u0275\u0275queryRefresh(s=e.\u0275\u0275loadQuery())&&(o.chartTooltip=s.first)}},inputs:{mdsCounter:"mdsCounter"},features:[e.\u0275\u0275NgOnChangesFeature],decls:6,vars:3,consts:[["chartCanvas",""],["chartTooltip",""],[1,"chart-container"],["baseChart","",3,"datasets","options","type"],[1,"chartjs-tooltip"]],template:function(t,o){1&t&&(e.\u0275\u0275elementStart(0,"div",2),e.\u0275\u0275element(1,"canvas",3,0),e.\u0275\u0275elementStart(3,"div",4,1),e.\u0275\u0275element(5,"table"),e.\u0275\u0275elementEnd()()),2&t&&(e.\u0275\u0275advance(),e.\u0275\u0275property("datasets",o.chart.datasets)("options",o.chart.options)("type",o.chart.chartType))},dependencies:[Nt.BaseChartDirective],styles:['.chart-container[_ngcontent-%COMP%]{cursor:pointer;margin:auto;overflow:visible;position:absolute}canvas[_ngcontent-%COMP%]{user-select:none}.chartjs-tooltip[_ngcontent-%COMP%]{background:#000000b3;border-radius:3px;color:#fff;font-family:Helvetica Neue,Helvetica,Arial,sans-serif!important;opacity:0;pointer-events:none;position:absolute;transform:translate(-50%);transition:all .1s ease}.chartjs-tooltip.transform-left[_ngcontent-%COMP%]{transform:translate(-10%)}.chartjs-tooltip.transform-left[_ngcontent-%COMP%]:after{left:10%}.chartjs-tooltip.transform-right[_ngcontent-%COMP%]{transform:translate(-90%)}.chartjs-tooltip.transform-right[_ngcontent-%COMP%]:after{left:90%}.chartjs-tooltip[_ngcontent-%COMP%]:after{border-color:#000 transparent transparent transparent;border-style:solid;border-width:5px;content:" ";left:50%;margin-left:-5px;position:absolute;top:100%}  .chartjs-tooltip-key{display:inline-block;height:10px;margin-right:10px;width:10px}.chart-container[_ngcontent-%COMP%]{height:500px;margin-bottom:20px;position:relative;width:100%}']})}}const he=["poolUsageTpl"],Y=["activityTmpl"];function lt(i,n){if(1&i&&(e.\u0275\u0275elementStart(0,"div",6)(1,"div",12),e.\u0275\u0275element(2,"cd-cephfs-chart",13),e.\u0275\u0275elementEnd()()),2&i){const t=n.$implicit;e.\u0275\u0275advance(2),e.\u0275\u0275property("mdsCounter",t)}}function vn(i,n){if(1&i&&e.\u0275\u0275element(0,"cd-usage-bar",14),2&i){const t=n.data.row;e.\u0275\u0275property("total",t.size)("used",t.used)("title",t.pool_name)}}function jn(i,n){if(1&i&&(e.\u0275\u0275text(0),e.\u0275\u0275pipe(1,"dimless")),2&i){const t=n.data.row,o=n.data.value;e.\u0275\u0275textInterpolate2(" ","standby-replay"===t.state?"Evts":"Reqs",": ",e.\u0275\u0275pipeBind1(1,2,o)," /s\n")}}class un{constructor(n,t){this.dimlessBinary=n,this.dimless=t,this.standbys=[],this.objectValues=Object.values}ngOnChanges(){this.setStandbys()}setStandbys(){this.standbys=[{key:$localize`Standby daemons`,value:this.data.standbys}]}ngOnInit(){this.columns={ranks:[{prop:"rank",name:$localize`Rank`},{prop:"state",name:$localize`State`},{prop:"mds",name:$localize`Daemon`},{prop:"activity",name:$localize`Activity`,cellTemplate:this.activityTmpl},{prop:"dns",name:$localize`Dentries`,pipe:this.dimless},{prop:"inos",name:$localize`Inodes`,pipe:this.dimless},{prop:"dirs",name:$localize`Dirs`,pipe:this.dimless},{prop:"caps",name:$localize`Caps`,pipe:this.dimless}],pools:[{prop:"pool",name:$localize`Pool`},{prop:"type",name:$localize`Type`},{prop:"size",name:$localize`Size`,pipe:this.dimlessBinary},{name:$localize`Usage`,cellTemplate:this.poolUsageTpl,comparator:(n,t,o,s)=>{const d=o.used/o.avail,h=s.used/s.avail;return d===h?0:d>h?1:-1}}]}}trackByFn(n,t){return t.name}static{this.\u0275fac=function(t){return new(t||un)(e.\u0275\u0275directiveInject(pt.l),e.\u0275\u0275directiveInject(Gt.u))}}static{this.\u0275cmp=e.\u0275\u0275defineComponent({type:un,selectors:[["cd-cephfs-detail"]],viewQuery:function(t,o){if(1&t&&(e.\u0275\u0275viewQuery(he,7),e.\u0275\u0275viewQuery(Y,7)),2&t){let s;e.\u0275\u0275queryRefresh(s=e.\u0275\u0275loadQuery())&&(o.poolUsageTpl=s.first),e.\u0275\u0275queryRefresh(s=e.\u0275\u0275loadQuery())&&(o.activityTmpl=s.first)}},inputs:{data:"data"},features:[e.\u0275\u0275NgOnChangesFeature],decls:19,vars:9,consts:()=>{let n,t,o,s;return n=$localize`:␟0c1e17956453ad772dbe82d6946f62748c692f3e␟1479454036301620775:Ranks`,t=$localize`:␟92899fa68e8ca108912163ff58edc8540e453787␟8231861638104479971:Pools`,o=$localize`:␟2b24e0b0b1629d2e8a51b9da7c75d6e6379f4bc4␟3728117452833208180:Standbys`,s=$localize`:␟50df62325726db950523a5be1c78b8905fcc25d4␟6852105836099396203:MDS performance counters`,[["poolUsageTpl",""],["activityTmpl",""],n,t,o,s,[1,"row"],[1,"col-sm-8"],[3,"data","columns","toolHeader"],[1,"col-sm-4"],[3,"data"],["class","row",4,"ngFor","ngForOf","ngForTrackBy"],[1,"col-md-12"],[3,"mdsCounter"],[3,"total","used","title"]]},template:function(t,o){1&t&&(e.\u0275\u0275elementStart(0,"div",6)(1,"div",7)(2,"legend"),e.\u0275\u0275i18n(3,2),e.\u0275\u0275elementEnd(),e.\u0275\u0275element(4,"cd-table",8),e.\u0275\u0275elementStart(5,"legend"),e.\u0275\u0275i18n(6,3),e.\u0275\u0275elementEnd(),e.\u0275\u0275element(7,"cd-table",8),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(8,"div",9)(9,"legend"),e.\u0275\u0275i18n(10,4),e.\u0275\u0275elementEnd(),e.\u0275\u0275element(11,"cd-table-key-value",10),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(12,"legend"),e.\u0275\u0275i18n(13,5),e.\u0275\u0275elementEnd(),e.\u0275\u0275template(14,lt,3,1,"div",11)(15,vn,1,3,"ng-template",null,0,e.\u0275\u0275templateRefExtractor)(17,jn,2,4,"ng-template",null,1,e.\u0275\u0275templateRefExtractor)),2&t&&(e.\u0275\u0275advance(4),e.\u0275\u0275property("data",o.data.ranks)("columns",o.columns.ranks)("toolHeader",!1),e.\u0275\u0275advance(3),e.\u0275\u0275property("data",o.data.pools)("columns",o.columns.pools)("toolHeader",!1),e.\u0275\u0275advance(4),e.\u0275\u0275property("data",o.standbys),e.\u0275\u0275advance(3),e.\u0275\u0275property("ngForOf",o.objectValues(o.data.mdsCounters))("ngForTrackBy",o.trackByFn))},dependencies:[l.NgForOf,xt.o,We.O,Rt.i,j,Gt.u],styles:[".progress[_ngcontent-%COMP%]{margin-bottom:0}"]})}}var Ae=r(88285);class pn extends D.BaseModal{constructor(n,t,o,s,d){super(),this.cephfsService=n,this.modalService=t,this.notificationService=o,this.authStorageService=s,this.actionLabels=d,this.triggerApiUpdate=new e.EventEmitter,this.selection=new N.y,this.permission=this.authStorageService.getPermissions().cephfs;const h={permission:"update",icon:g.FI.signOut,click:()=>this.evictClientModal(),name:this.actionLabels.EVICT};this.tableActions=[h]}ngOnInit(){this.columns=[{prop:"id",name:$localize`id`},{prop:"type",name:$localize`type`},{prop:"state",name:$localize`state`},{prop:"version",name:$localize`version`},{prop:"hostname",name:$localize`Host`},{prop:"root",name:$localize`root`}]}updateSelection(n){this.selection=n}evictClient(n){this.cephfsService.evictClient(this.id,n).subscribe(()=>{this.triggerApiUpdate.emit(),this.closeModal(),this.notificationService.show(Ae._.success,$localize`Evicted client '${n}'`)},()=>{this.modalRef.componentInstance.stopLoadingSpinner()})}evictClientModal(){const n=this.selection.first().id;this.modalRef=this.modalService.show(O.D,{itemDescription:"client",itemNames:[n],actionDescription:"evict",submitAction:()=>this.evictClient(n)})}static{this.\u0275fac=function(t){return new(t||pn)(e.\u0275\u0275directiveInject(R),e.\u0275\u0275directiveInject(He.V),e.\u0275\u0275directiveInject(Q.J),e.\u0275\u0275directiveInject(c.v),e.\u0275\u0275directiveInject(m.Ss))}}static{this.\u0275cmp=e.\u0275\u0275defineComponent({type:pn,selectors:[["cd-cephfs-clients"]],inputs:{id:"id",clients:"clients"},outputs:{triggerApiUpdate:"triggerApiUpdate"},features:[e.\u0275\u0275InheritDefinitionFeature],decls:2,vars:7,consts:[["selectionType","single",3,"fetchData","updateSelection","data","columns","status","autoReload"],[1,"table-actions",3,"permission","selection","tableActions"]],template:function(t,o){1&t&&(e.\u0275\u0275elementStart(0,"cd-table",0),e.\u0275\u0275listener("fetchData",function(){return o.triggerApiUpdate.emit()})("updateSelection",function(d){return o.updateSelection(d)}),e.\u0275\u0275element(1,"cd-table-actions",1),e.\u0275\u0275elementEnd()),2&t&&(e.\u0275\u0275property("data",o.clients.data)("columns",o.columns)("status",o.clients.status)("autoReload",-1),e.\u0275\u0275advance(),e.\u0275\u0275property("permission",o.permission)("selection",o.selection)("tableActions",o.tableActions))},dependencies:[We.O,at.j]})}}var Mn=r(56207),mn=r(34177),Kt=r(62431),pe=r(3687),Ot=r(71138),Wn=r(30540);const Kn=["origin"],In=(i,n)=>[i,n];function Qn(i,n){if(1&i&&(e.\u0275\u0275elementStart(0,"div"),e.\u0275\u0275element(1,"i",8),e.\u0275\u0275elementEnd()),2&i){const t=e.\u0275\u0275nextContext();e.\u0275\u0275advance(),e.\u0275\u0275property("ngClass",e.\u0275\u0275pureFunction2(1,In,t.icons.spinner,t.icons.spin))}}function Yn(i,n){if(1&i){const t=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementContainerStart(0),e.\u0275\u0275elementStart(1,"legend"),e.\u0275\u0275i18n(2,2),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(3,"cd-table",17),e.\u0275\u0275listener("updateSelection",function(s){e.\u0275\u0275restoreView(t);const d=e.\u0275\u0275nextContext(2);return e.\u0275\u0275resetView(d.quota.updateSelection(s))}),e.\u0275\u0275element(4,"cd-table-actions",18),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementContainerEnd()}if(2&i){const t=e.\u0275\u0275nextContext(2);e.\u0275\u0275advance(3),e.\u0275\u0275property("data",t.settings)("columns",t.quota.columns)("limit",0)("footer",!1)("onlyActionHeader",!0)("forceIdentifier",!0)("toolHeader",!1),e.\u0275\u0275advance(),e.\u0275\u0275property("permission",t.permission)("selection",t.quota.selection)("tableActions",t.quota.tableActions)}}function Jn(i,n){if(1&i){const t=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"div",13)(1,"div",5)(2,"div",6),e.\u0275\u0275text(3),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(4,"div",14),e.\u0275\u0275template(5,Yn,5,10,"ng-container",11),e.\u0275\u0275elementStart(6,"legend"),e.\u0275\u0275i18n(7,1),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(8,"cd-table",15),e.\u0275\u0275listener("updateSelection",function(s){e.\u0275\u0275restoreView(t);const d=e.\u0275\u0275nextContext();return e.\u0275\u0275resetView(d.snapshot.updateSelection(s))}),e.\u0275\u0275element(9,"cd-table-actions",16),e.\u0275\u0275elementEnd()()()()}if(2&i){const t=e.\u0275\u0275nextContext();e.\u0275\u0275advance(3),e.\u0275\u0275textInterpolate1(" ",t.selectedDir.path," "),e.\u0275\u0275advance(2),e.\u0275\u0275property("ngIf","/"!==t.selectedDir.path),e.\u0275\u0275advance(3),e.\u0275\u0275property("data",t.selectedDir.snapshots)("columns",t.snapshot.columns),e.\u0275\u0275advance(),e.\u0275\u0275property("permission",t.permission)("selection",t.snapshot.selection)("tableActions",t.snapshot.tableActions)}}function Zn(i,n){if(1&i){const t=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"span",19),e.\u0275\u0275listener("click",function(){const s=e.\u0275\u0275restoreView(t).data.value,d=e.\u0275\u0275nextContext();return e.\u0275\u0275resetView(d.selectOrigin(s))}),e.\u0275\u0275text(1),e.\u0275\u0275elementEnd()}if(2&i){const t=n.data.value;e.\u0275\u0275advance(),e.\u0275\u0275textInterpolate(t)}}class fn{constructor(n,t,o,s,d,h,I,$){this.authStorageService=n,this.modalService=t,this.cephfsService=o,this.cdDatePipe=s,this.actionLabels=d,this.notificationService=h,this.dimlessBinaryPipe=I,this.treeViewService=$,this.icons=g.FI,this.loadingIndicator=!1,this.loading={},this.nodes=[]}selectNode(n){var t=this;return(0,Mn.A)(function*(){t.selectedDir=t.getDirectory(n),"/"!==n.id&&(t.setSettings(n),yield t.updateDirectory(n.id),t.nodes=t.treeViewService.expandNode(t.nodes,n))})()}ngOnInit(){this.permission=this.authStorageService.getPermissions().cephfs,this.setUpQuotaTable(),this.setUpSnapshotTable()}setUpQuotaTable(){this.quota={columns:[{prop:"row.name",name:$localize`Name`,flexGrow:1},{prop:"row.value",name:$localize`Value`,sortable:!1,flexGrow:1},{prop:"row.originPath",name:$localize`Origin`,sortable:!1,cellTemplate:this.originTmpl,flexGrow:1}],selection:new N.y,updateSelection:n=>{this.quota.selection=n},tableActions:[{name:this.actionLabels.SET,icon:g.FI.edit,permission:"update",visible:n=>!n.hasSelection||n.first()&&0===n.first().dirValue,click:()=>this.updateQuotaModal()},{name:this.actionLabels.UPDATE,icon:g.FI.edit,permission:"update",visible:n=>n.first()&&n.first().dirValue>0,click:()=>this.updateQuotaModal()},{name:this.actionLabels.UNSET,icon:g.FI.destroy,permission:"update",disable:n=>!n.hasSelection||n.first()&&0===n.first().dirValue,click:()=>this.unsetQuotaModal()}]}}setUpSnapshotTable(){this.snapshot={columns:[{prop:"name",name:$localize`Name`,flexGrow:1},{prop:"path",name:$localize`Path`,flexGrow:1.5,cellTransformation:b.x.path},{prop:"created",name:$localize`Created`,flexGrow:1,pipe:this.cdDatePipe}],selection:new N.y,updateSelection:n=>{this.snapshot.selection=n},tableActions:[{name:this.actionLabels.CREATE,icon:g.FI.add,permission:"create",canBePrimary:n=>!n.hasSelection,click:()=>this.createSnapshot(),disable:()=>this.disableCreateSnapshot()},{name:this.actionLabels.DELETE,icon:g.FI.destroy,permission:"delete",click:()=>this.deleteSnapshotModal()}]}}disableCreateSnapshot(){const n=this.selectedDir.path.split("/").slice(1);return n.length>=4&&"volumes"===n[0]&&$localize`Cannot create snapshots for files/folders in the subvolume ${n[2]}`}ngOnChanges(){this.selectedDir=void 0,this.dirs=[],this.requestedPaths=[],this.nodeIds={},this.id&&(this.setRootNode(),this.firstCall())}setRootNode(){this.nodes=[{name:"/",label:"/",id:"/",expanded:!0}]}firstCall(){var n=this;setTimeout((0,Mn.A)(function*(){yield n.updateDirectory("/")}),10)}updateDirectory(n){if(this.unsetLoadingIndicator(),this.requestedPaths.includes(n)){if(!0===this.loading[n])return}else this.requestedPaths.push(n);return new Promise(t=>{this.setLoadingIndicator(n,!0),this.cephfsService.lsDir(this.id,n).subscribe(o=>{this.updateTreeStructure(o),this.updateQuotaTable(),this.updateTree(),t(this.getChildren(n)),this.setLoadingIndicator(n,!1);const s=!!this.treeViewService.findNode(!0,this.nodes,"active");"/"===n&&!s&&this.treeComponent.select.emit(this.getNode("/"))})})}setLoadingIndicator(n,t){this.loading[n]=t,this.unsetLoadingIndicator()}getSubDirectories(n,t=this.dirs){return t.filter(o=>o.parent===n)}getChildren(n){const t=this.getSubTree(n);return p().sortBy(this.getSubDirectories(n),"path").map(o=>this.createNode(o,t))}createNode(n,t){if(this.nodeIds[n.path]=n,t||this.getSubTree(n.parent),"/volumes"===n.path){const o=this.treeViewService.findNode("/volumes",this.nodes);o&&this.treeComponent.select.emit(o)}return{label:n.name,name:n.name,id:n.path,expanded:"/volumes"===n.path,children:this.getSubDirectories(n.path,t).map(this.toNode),value:{parent:n?.parent}}}getSubTree(n){return this.dirs.filter(t=>t.parent&&t.parent.startsWith(n))}setSettings(n){const t=(o,s)=>o?s?s(o):o:"";this.settings=[this.getQuota(n,"max_files",t),this.getQuota(n,"max_bytes",o=>t(o,s=>this.dimlessBinaryPipe.transform(s)))]}getQuota(n,t,o){const s=n.id;n=this.getOrigin(n,t);const d=this.getDirectory(n),h=d.quotas[t];let I=h,$=d.path;if(n.id===s)if("/"===n.value?.parent)I=0;else{const w=this.getParent(this.dirs,n.value?.parent);if(w){const X=this.getDirectory(this.getOrigin(w,t));I=X.quotas[t],$=X.path}}return{row:{name:"max_bytes"===t?$localize`Max size`:$localize`Max files`,value:o(h),originPath:h?d.path:""},quotaKey:t,dirValue:this.nodeIds[s].quotas[t],nextTreeMaximum:{value:I,path:I?$:""}}}getOrigin(n,t){const o=this.getParent(this.dirs,n.value?.parent);if(o&&"/"!==o?.id){const s=this.getQuotaFromTree(n,t),d=this.getOrigin(o,t),h=this.getQuotaFromTree(d,t);return 0===s||0!==h&&h<s?d:n}return n}getQuotaFromTree(n,t){return this.getDirectory(n).quotas[t]}getDirectory(n){const t=n.id;return this.nodeIds[t]}selectOrigin(n){this.treeComponent.select.emit(this.getNode(n))}getNode(n){return this.treeViewService.findNode(n,this.nodes)}updateQuotaModal(){const n=this.selectedDir.path,t=this.quota.selection.first(),o=t.nextTreeMaximum,s=t.quotaKey,d=t.dirValue;this.modalService.show(Kt.b,{titleText:this.getModalQuotaTitle(0===d?this.actionLabels.SET:this.actionLabels.UPDATE,n),message:o.value?$localize`The inherited ${this.getQuotaValueFromPathMsg(o.value,o.path)} is the maximum value to be used.`:void 0,fields:[this.getQuotaFormField(t.row.name,s,d,o.value)],submitButtonText:$localize`Save`,onSubmit:h=>this.updateQuota(h)})}getModalQuotaTitle(n,t){return $localize`${n} CephFS ${this.getQuotaName()} quota for '${t}'`}getQuotaName(){return this.isBytesQuotaSelected()?$localize`size`:$localize`files`}isBytesQuotaSelected(){return"max_bytes"===this.quota.selection.first().quotaKey}getQuotaValueFromPathMsg(n,t){return n=this.isBytesQuotaSelected()?this.dimlessBinaryPipe.transform(n):n,$localize`${this.getQuotaName()} quota ${n} from '${t}'`}getQuotaFormField(n,t,o,s){const d="max_bytes"===t,h=[d?pe.xQ.binaryMin(0):C.Validators.min(0)];s&&h.push(d?pe.xQ.binaryMax(s):C.Validators.max(s));const I={type:d?"binary":"number",label:n,name:t,value:o,validators:h,required:!0};return d||(I.errors={min:$localize`Value has to be at least 0 or more`,max:$localize`Value has to be at most ${s} or less`}),I}updateQuota(n,t){const o=this.selectedDir.path,s=this.quota.selection.first().quotaKey,d=0===this.selectedDir.quotas[s]?this.actionLabels.SET:0===n[s]?this.actionLabels.UNSET:$localize`Updated`;this.cephfsService.quota(this.id,o,n).subscribe(()=>{t&&t(),this.notificationService.show(Ae._.success,this.getModalQuotaTitle(d,o)),this.forceDirRefresh()})}unsetQuotaModal(){const n=this.selectedDir.path,t=this.quota.selection.first(),o=t.quotaKey,s=t.nextTreeMaximum,d=t.dirValue,h=this.getQuotaValueFromPathMsg(s.value,s.path),I=s.value>0?s.value>d?$localize`in order to inherit ${h}`:$localize`which isn't used because of the inheritance of ${h}`:$localize`in order to have no quota on the directory`;this.modalService.show(mn.M,{titleText:this.getModalQuotaTitle(this.actionLabels.UNSET,n),buttonText:this.actionLabels.UNSET,description:$localize`${this.actionLabels.UNSET} ${this.getQuotaValueFromPathMsg(d,n)} ${I}.`,onSubmit:()=>this.updateQuota({[o]:0},()=>this.modalService.dismissAll())})}createSnapshot(){const n=this.selectedDir.path;this.modalService.show(Kt.b,{titleText:$localize`Create Snapshot`,message:$localize`Please enter the name of the snapshot.`,fields:[{type:"text",name:"name",value:`${st()().toISOString(!0)}`,required:!0,validators:[this.validateValue.bind(this)]}],submitButtonText:$localize`Create Snapshot`,onSubmit:t=>{this.alreadyExists?this.notificationService.show(Ae._.error,$localize`Snapshot name '${t.name}' is already in use. Please use another name.`):this.cephfsService.mkSnapshot(this.id,n,t.name).subscribe(o=>{this.notificationService.show(Ae._.success,$localize`Created snapshot '${o}' for '${n}'`),this.forceDirRefresh()})}})}validateValue(n){this.alreadyExists=this.selectedDir.snapshots.some(t=>t.name===n.value)}forceDirRefresh(n){if(!n){const o=this.selectedDir;if(!o)throw new Error("This function can only be called without path if an selection was made");n=o.parent?o.parent:o.path;const s=this.getNode(n);this.treeComponent.select.emit(s);const d=this.getNode(o.path);return void this.treeComponent.select.emit(d)}const t=this.getNode(n);this.treeComponent.select.emit(t)}updateTreeStructure(n){const t=(s,d)=>{const h=s.filter($=>$.parent===d),I=h.map($=>$.path);return{children:h,paths:I}};p().uniq(n.map(s=>s.parent).sort()).forEach(s=>{const d=t(n,s),h=t(this.dirs,s);h.children.forEach(I=>{d.paths.includes(I.path)||this.removeOldDirectory(I)}),d.children.forEach(I=>{h.paths.includes(I.path)?this.updateExistingDirectory(h.children,I):this.addNewDirectory(I)})})}removeOldDirectory(n){const t=n.path;p().remove(this.dirs,o=>o.path===t),delete this.nodeIds[t],this.updateDirectoriesParentNode(n)}updateDirectoriesParentNode(n){const t=n.parent;if(!t)return;const o=this.getNode(t);if(!o)return;const s=this.getChildren(t);o.children=s}addNewDirectory(n){this.dirs.push(n),this.nodeIds[n.path]=n,this.updateDirectoriesParentNode(n)}updateExistingDirectory(n,t){const o=n.find(s=>s.path===t.path);Object.assign(o,t)}updateQuotaTable(){const n=this.selectedDir?this.getNode(this.selectedDir.path):void 0;n&&"/"!==n.id&&this.setSettings(n)}updateTree(n=!1){this.loadingIndicator&&!n||(this.nodes=[...this.nodes])}deleteSnapshotModal(){this.modalService.show(O.D,{impact:ft.r.high,itemDescription:$localize`CephFs Snapshot`,itemNames:this.snapshot.selection.selected.map(n=>n.name),submitAction:()=>this.deleteSnapshot()})}deleteSnapshot(){const n=this.selectedDir.path;this.snapshot.selection.selected.forEach(t=>{const o=t.name;this.cephfsService.rmSnapshot(this.id,n,o).subscribe(()=>{this.notificationService.show(Ae._.success,$localize`Deleted snapshot '${o}' for '${n}'`)})}),this.modalService.dismissAll(),this.forceDirRefresh()}refreshAllDirectories(){this.loadingIndicator=!0,this.requestedPaths.map(t=>this.forceDirRefresh(t));const n=setInterval(()=>{this.updateTree(!0),this.loadingIndicator||clearInterval(n)},3e3)}unsetLoadingIndicator(){this.loadingIndicator&&(clearTimeout(this.loadingTimeout),this.loadingTimeout=setTimeout(()=>{if(Object.values(this.loading).some(t=>t))return this.unsetLoadingIndicator();this.loadingIndicator=!1,this.updateTree()},3e3))}toNode(n){return{id:n.path,label:n.name,children:[],expanded:!1,value:{parent:n?.parent}}}getParent(n,t){const o=n?.find?.(s=>s.path===t);return o?this.toNode(o):null}static{this.\u0275fac=function(t){return new(t||fn)(e.\u0275\u0275directiveInject(c.v),e.\u0275\u0275directiveInject(He.V),e.\u0275\u0275directiveInject(R),e.\u0275\u0275directiveInject(Ot.Q),e.\u0275\u0275directiveInject(m.Ss),e.\u0275\u0275directiveInject(Q.J),e.\u0275\u0275directiveInject(pt.l),e.\u0275\u0275directiveInject(Wn.X))}}static{this.\u0275cmp=e.\u0275\u0275defineComponent({type:fn,selectors:[["cd-cephfs-directories"]],viewQuery:function(t,o){if(1&t&&(e.\u0275\u0275viewQuery(D.TreeViewComponent,5),e.\u0275\u0275viewQuery(Kn,7)),2&t){let s;e.\u0275\u0275queryRefresh(s=e.\u0275\u0275loadQuery())&&(o.treeComponent=s.first),e.\u0275\u0275queryRefresh(s=e.\u0275\u0275loadQuery())&&(o.originTmpl=s.first)}},inputs:{id:"id"},features:[e.\u0275\u0275NgOnChangesFeature],decls:12,vars:11,consts:()=>{let n,t;return n=$localize`:␟f21b1d17b6c5042bb5805516eee37fde33739dd8␟633791246656795624:Snapshots`,t=$localize`:␟8bb8293aa8161433778762ae025ffd5e7c85795e␟8133124082907931904:Quotas`,[["origin",""],n,t,[1,"row"],[1,"col-sm-4","pe-0"],[1,"card"],[1,"card-header"],["type","button",1,"btn","btn-light","pull-right",3,"click"],[3,"ngClass"],[1,"card-body","card-tree"],[3,"select","tree"],[4,"ngIf"],["class","col-sm-8 metadata",4,"ngIf"],[1,"col-sm-8","metadata"],[1,"card-body"],["identifier","name","forceIdentifier","true","selectionType","single",3,"updateSelection","data","columns"],[1,"table-actions",3,"permission","selection","tableActions"],["selectionType","single","identifier","quotaKey",3,"updateSelection","data","columns","limit","footer","onlyActionHeader","forceIdentifier","toolHeader"],[1,"only-table-actions",3,"permission","selection","tableActions"],[1,"quota-origin",3,"click"]]},template:function(t,o){if(1&t){const s=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"div",3)(1,"div",4)(2,"div",5)(3,"div",6)(4,"button",7),e.\u0275\u0275listener("click",function(){return e.\u0275\u0275restoreView(s),e.\u0275\u0275resetView(o.refreshAllDirectories())}),e.\u0275\u0275element(5,"i",8),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(6,"div",9)(7,"cds-tree-view",10),e.\u0275\u0275listener("select",function(h){return e.\u0275\u0275restoreView(s),e.\u0275\u0275resetView(o.selectNode(h))}),e.\u0275\u0275elementEnd(),e.\u0275\u0275template(8,Qn,2,4,"div",11),e.\u0275\u0275elementEnd()()(),e.\u0275\u0275template(9,Jn,10,7,"div",12),e.\u0275\u0275elementEnd(),e.\u0275\u0275template(10,Zn,2,1,"ng-template",null,0,e.\u0275\u0275templateRefExtractor)}2&t&&(e.\u0275\u0275advance(4),e.\u0275\u0275classProp("disabled",o.loadingIndicator),e.\u0275\u0275advance(),e.\u0275\u0275classProp("fa-spin",o.loadingIndicator),e.\u0275\u0275property("ngClass",e.\u0275\u0275pureFunction2(8,In,o.icons.large,o.icons.refresh)),e.\u0275\u0275advance(2),e.\u0275\u0275property("tree",o.nodes),e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf",o.loadingIndicator),e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf",o.selectedDir))},dependencies:[l.NgClass,l.NgIf,We.O,at.j,Ge.S,D.TreeViewComponent],styles:["cd-cephfs-directories tree-root .tree-children{overflow:inherit}.quota-origin[_ngcontent-%COMP%]{color:#25828e;cursor:pointer}.quota-origin[_ngcontent-%COMP%]:hover{color:#212529}.card-tree[_ngcontent-%COMP%]{height:50vh;overflow-y:auto}"]})}}var Qt=r(57798),Rn=r(12540),En=r(37006),It=r(67588),An=r(25171),Dn=r(42865);function qn(i,n){1&i&&(e.\u0275\u0275elementStart(0,"span",41),e.\u0275\u0275i18n(1,11),e.\u0275\u0275elementEnd())}function eo(i,n){1&i&&(e.\u0275\u0275elementStart(0,"span",41),e.\u0275\u0275i18n(1,12),e.\u0275\u0275elementEnd())}function to(i,n){1&i&&(e.\u0275\u0275elementStart(0,"span",41),e.\u0275\u0275i18n(1,13),e.\u0275\u0275elementEnd())}function no(i,n){if(1&i&&e.\u0275\u0275template(0,qn,2,0,"span",40)(1,eo,2,0,"span",40)(2,to,2,0,"span",40),2&i){e.\u0275\u0275nextContext();const t=e.\u0275\u0275reference(3),o=e.\u0275\u0275nextContext();e.\u0275\u0275property("ngIf",o.subvolumeForm.showError("subvolumeName",t,"required")),e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf",o.subvolumeForm.showError("subvolumeName",t,"notUnique")),e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf",o.subvolumeForm.showError("subvolumeName",t,"pattern"))}}function en(i,n){if(1&i&&(e.\u0275\u0275elementStart(0,"option",44),e.\u0275\u0275text(1),e.\u0275\u0275elementEnd()),2&i){const t=n.$implicit;e.\u0275\u0275property("value",t.name),e.\u0275\u0275advance(),e.\u0275\u0275textInterpolate(t.name)}}function oo(i,n){if(1&i&&(e.\u0275\u0275elementStart(0,"cds-select",42)(1,"option",43),e.\u0275\u0275i18n(2,14),e.\u0275\u0275elementEnd(),e.\u0275\u0275template(3,en,2,2,"option",31),e.\u0275\u0275elementEnd()),2&i){const t=n.ngIf;e.\u0275\u0275advance(3),e.\u0275\u0275property("ngForOf",t)}}function gn(i,n){1&i&&(e.\u0275\u0275elementStart(0,"span",41),e.\u0275\u0275i18n(1,15),e.\u0275\u0275elementEnd())}function ge(i,n){if(1&i&&e.\u0275\u0275template(0,gn,2,0,"span",40),2&i){e.\u0275\u0275nextContext();const t=e.\u0275\u0275reference(3),o=e.\u0275\u0275nextContext();e.\u0275\u0275property("ngIf",o.subvolumeForm.showError("size",t,"pattern"))}}function ee(i,n){if(1&i&&(e.\u0275\u0275elementStart(0,"option",44),e.\u0275\u0275text(1),e.\u0275\u0275elementEnd()),2&i){const t=n.$implicit;e.\u0275\u0275property("value",t.pool),e.\u0275\u0275advance(),e.\u0275\u0275textInterpolate(t.pool)}}function ae(i,n){if(1&i){const t=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementContainerStart(0),e.\u0275\u0275elementStart(1,"div",20)(2,"form",21,0)(4,"div",22)(5,"cds-text-label",23),e.\u0275\u0275i18nStart(6,4),e.\u0275\u0275element(7,"input",24),e.\u0275\u0275i18nEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275template(8,no,3,3,"ng-template",null,1,e.\u0275\u0275templateRefExtractor),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(10,"div",22)(11,"cds-text-label",25),e.\u0275\u0275i18nStart(12,5),e.\u0275\u0275element(13,"input",26),e.\u0275\u0275i18nEnd(),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(14,"div",22),e.\u0275\u0275template(15,oo,4,1,"cds-select",27),e.\u0275\u0275pipe(16,"async"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(17,"div",22)(18,"cds-text-label",28),e.\u0275\u0275i18nStart(19,6),e.\u0275\u0275element(20,"input",29),e.\u0275\u0275i18nEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275template(21,ge,1,1,"ng-template",null,2,e.\u0275\u0275templateRefExtractor),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(23,"div",22)(24,"cds-select",30),e.\u0275\u0275template(25,ee,2,2,"option",31),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(26,"div",22)(27,"cds-text-label",32),e.\u0275\u0275i18nStart(28,7),e.\u0275\u0275element(29,"input",33),e.\u0275\u0275i18nEnd(),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(30,"div",22)(31,"cds-text-label",34),e.\u0275\u0275i18nStart(32,8),e.\u0275\u0275element(33,"input",35),e.\u0275\u0275i18nEnd(),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(34,"div",22)(35,"label",36),e.\u0275\u0275i18n(36,9),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(37,"cd-help-text"),e.\u0275\u0275text(38,"Permissions for the directory. Default mode is 755 which is rwxr-xr-x"),e.\u0275\u0275elementEnd(),e.\u0275\u0275element(39,"cd-checked-table-form",37),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(40,"div",22)(41,"cds-checkbox",38),e.\u0275\u0275i18nStart(42,10),e.\u0275\u0275element(43,"cd-help-text"),e.\u0275\u0275i18nEnd(),e.\u0275\u0275elementEnd()()()(),e.\u0275\u0275elementStart(44,"cd-form-button-panel",39),e.\u0275\u0275pipe(45,"titlecase"),e.\u0275\u0275pipe(46,"upperFirst"),e.\u0275\u0275listener("submitActionEvent",function(){e.\u0275\u0275restoreView(t);const s=e.\u0275\u0275nextContext();return e.\u0275\u0275resetView(s.submit())}),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementContainerEnd()}if(2&i){const t=e.\u0275\u0275reference(9),o=e.\u0275\u0275reference(22),s=e.\u0275\u0275nextContext();e.\u0275\u0275advance(2),e.\u0275\u0275property("formGroup",s.subvolumeForm),e.\u0275\u0275advance(3),e.\u0275\u0275property("invalid",s.subvolumeForm.controls.subvolumeName.invalid&&s.subvolumeForm.controls.subvolumeName.dirty)("invalidText",t),e.\u0275\u0275advance(2),e.\u0275\u0275property("invalid",s.subvolumeForm.controls.subvolumeName.invalid&&s.subvolumeForm.controls.subvolumeName.dirty)("autofocus",!0),e.\u0275\u0275advance(8),e.\u0275\u0275property("ngIf",e.\u0275\u0275pipeBind1(16,20,s.subVolumeGroups$)),e.\u0275\u0275advance(3),e.\u0275\u0275property("invalid",s.subvolumeForm.controls.size.invalid&&s.subvolumeForm.controls.size.dirty)("invalidText",o),e.\u0275\u0275advance(2),e.\u0275\u0275property("invalid",s.subvolumeForm.controls.size.invalid&&s.subvolumeForm.controls.size.dirty),e.\u0275\u0275advance(5),e.\u0275\u0275property("ngForOf",s.dataPools),e.\u0275\u0275advance(14),e.\u0275\u0275property("data",s.scopePermissions)("columns",s.columns)("form",s.subvolumeForm)("isTableForOctalMode",!0)("initialValue",s.initialMode)("scopes",s.scopes)("isDisabled",s.isEdit),e.\u0275\u0275advance(5),e.\u0275\u0275property("form",s.subvolumeForm)("submitText",e.\u0275\u0275pipeBind1(45,22,s.action)+" "+e.\u0275\u0275pipeBind1(46,24,s.resource))("modalForm",!0)}}class U extends Ce.g{constructor(n,t,o,s,d,h,I,$,w,X,J,re=!1){super(),this.actionLabels=n,this.taskWrapper=t,this.cephFsSubvolumeService=o,this.cephFsSubvolumeGroupService=s,this.formatter=d,this.dimlessBinary=h,this.octalToHumanReadable=I,this.fsName=$,this.subVolumeName=w,this.subVolumeGroupName=X,this.pools=J,this.isEdit=re,this.scopePermissions=[],this.initialMode={owner:["read","write","execute"],group:["read","execute"],others:["read","execute"]},this.scopes=["owner","group","others"],this.resource=$localize`Subvolume`}ngOnInit(){this.action=this.actionLabels.CREATE,this.columns=[{prop:"scope",name:$localize`All`,flexGrow:.5},{prop:"read",name:$localize`Read`,flexGrow:.5,cellClass:"text-center"},{prop:"write",name:$localize`Write`,flexGrow:.5,cellClass:"text-center"},{prop:"execute",name:$localize`Execute`,flexGrow:.5,cellClass:"text-center"}],this.subVolumeGroups$=this.cephFsSubvolumeGroupService.get(this.fsName),this.dataPools=this.pools.filter(n=>"data"===n.type),this.createForm(),this.isEdit?this.populateForm():this.loadingReady()}createForm(){this.subvolumeForm=new Ue.$({volumeName:new C.FormControl({value:this.fsName,disabled:!0}),subvolumeName:new C.FormControl("",{validators:[C.Validators.required,C.Validators.pattern(/^[.A-Za-z0-9_-]+$/)],asyncValidators:[pe.xQ.unique(this.cephFsSubvolumeService.exists,this.cephFsSubvolumeService,null,null,this.fsName,this.subVolumeGroupName)]}),subvolumeGroupName:new C.FormControl(this.subVolumeGroupName),pool:new C.FormControl(this.dataPools[0]?.pool,{validators:[C.Validators.required]}),size:new C.FormControl(null,{updateOn:"blur"}),uid:new C.FormControl(null),gid:new C.FormControl(null),mode:new C.FormControl({}),isolatedNamespace:new C.FormControl(!1)})}populateForm(){this.action=this.actionLabels.EDIT,this.cephFsSubvolumeService.info(this.fsName,this.subVolumeName,this.subVolumeGroupName).subscribe(n=>{this.subvolumeForm.get("subvolumeName").disable(),this.subvolumeForm.get("subvolumeGroupName").disable(),this.subvolumeForm.get("pool").disable(),this.subvolumeForm.get("uid").disable(),this.subvolumeForm.get("gid").disable(),this.subvolumeForm.get("isolatedNamespace").disable(),this.subvolumeForm.get("subvolumeName").setValue(this.subVolumeName),this.subvolumeForm.get("subvolumeGroupName").setValue(this.subVolumeGroupName),"infinite"!==n.bytes_quota&&this.subvolumeForm.get("size").setValue(this.dimlessBinary.transform(n.bytes_quota)),this.subvolumeForm.get("uid").setValue(n.uid),this.subvolumeForm.get("gid").setValue(n.gid),this.subvolumeForm.get("isolatedNamespace").setValue(n.pool_namespace),this.initialMode=this.octalToHumanReadable.transform(n.mode,!0),this.loadingReady()})}submit(){const n=this.subvolumeForm.getValue("subvolumeName"),t=this.subvolumeForm.getValue("subvolumeGroupName"),o=this.subvolumeForm.getValue("pool"),s=this.formatter.toBytes(this.subvolumeForm.getValue("size"))||0,d=this.subvolumeForm.getValue("uid"),h=this.subvolumeForm.getValue("gid"),I=this.formatter.toOctalPermission(this.subvolumeForm.getValue("mode")),$=this.subvolumeForm.getValue("isolatedNamespace");if(this.isEdit){const w=0===s?"infinite":s;this.taskWrapper.wrapTaskAroundCall({task:new q.O("cephfs/subvolume/"+m.Qp.EDIT,{subVolumeName:n}),call:this.cephFsSubvolumeService.update(this.fsName,n,String(w),t)}).subscribe({error:()=>{this.subvolumeForm.setErrors({cdSubmitButton:!0})},complete:()=>{this.closeModal()}})}else this.taskWrapper.wrapTaskAroundCall({task:new q.O("cephfs/subvolume/"+m.Qp.CREATE,{subVolumeName:n}),call:this.cephFsSubvolumeService.create(this.fsName,n,t,o,String(s),d,h,I,$)}).subscribe({error:()=>{this.subvolumeForm.setErrors({cdSubmitButton:!0})},complete:()=>{this.closeModal()}})}static{this.\u0275fac=function(t){return new(t||U)(e.\u0275\u0275directiveInject(m.Ss),e.\u0275\u0275directiveInject(B.a),e.\u0275\u0275directiveInject(Qt.v),e.\u0275\u0275directiveInject(It.W),e.\u0275\u0275directiveInject(Rn.k),e.\u0275\u0275directiveInject(pt.l),e.\u0275\u0275directiveInject(En.I),e.\u0275\u0275directiveInject("fsName",8),e.\u0275\u0275directiveInject("subVolumeName",8),e.\u0275\u0275directiveInject("subVolumeGroupName",8),e.\u0275\u0275directiveInject("pools",8),e.\u0275\u0275directiveInject("isEdit",8))}}static{this.\u0275cmp=e.\u0275\u0275defineComponent({type:U,selectors:[["cd-cephfs-subvolume-form"]],features:[e.\u0275\u0275InheritDefinitionFeature],decls:7,vars:9,consts:()=>{let n,t,o,s,d,h,I,$,w,X,J,re,de,Me,ve,Se;return n=$localize`:␟fb127ea03835b3230f0ed981c7080e2ccb879621␟3346778808274133574:${"\ufffd0\ufffd"}:INTERPOLATION: ${"\ufffd1\ufffd"}:INTERPOLATION_1:`,t=$localize`:␟492b46633749d05dc2e2dd51858f7ef8d59c2835␟5082538775333860868:The size of the subvolume is specified by setting a quota on it.
                          If left blank or put 0, then quota will be infinite`,o=$localize`:␟f0016bd458baa88284a658ce9eeda42d8ad88d2c␟2739243284262593813:e.g., 10GiB`,s=$localize`:␟5408f26ef48cea5b1042cc20781616622cc83bc5␟6004297985262322523:By default, the data_pool_layout of the parent directory is selected.`,d=$localize`:␟da6954d55a46943dd77159d65e5b81f51b0e3acb␟271472573961202879:Name ${"\ufffd#7\ufffd\ufffd/#7\ufffd"}:TAG_INPUT:`,h=$localize`:␟627d77d777327b116ab0ef83e42e4274c52c3852␟1262752371183267813:Volume name ${"\ufffd#13\ufffd\ufffd/#13\ufffd"}:TAG_INPUT:`,I=$localize`:␟cf68b93f7ce07de1b3d9f7429a8a29595c4fe302␟5881817813163804952:Size ${"\ufffd#20\ufffd\ufffd/#20\ufffd"}:TAG_INPUT:`,$=$localize`:␟24bd69b6c334472d0aaefe8ade289310e3e65564␟3314973177575788995:UID ${"\ufffd#29\ufffd\ufffd/#29\ufffd"}:TAG_INPUT:`,w=$localize`:␟20d558ebd10cbfb1955896b2a49341b49951dc9d␟2433505658977168644:GID ${"\ufffd#33\ufffd\ufffd/#33\ufffd"}:TAG_INPUT:`,X=$localize`:␟b04e4b4ddc6dfdc6fd2b1c1bb789333a51cf89b3␟7479570597537922716:Mode `,J=$localize`:␟fe7eacde51a5b173e7e38b9617b62397cca3c8eb␟221283384507506510:Isolated Namespace ${"\ufffd#43\ufffd"}:START_TAG_CD_HELP_TEXT:To create subvolume in a separate RADOS namespace.${"\ufffd/#43\ufffd"}:CLOSE_TAG_CD_HELP_TEXT:`,re=$localize`:␟7cbdabcece469fab89cfa687ab152bca18b97498␟1417693714872528491:This field is required.`,de=$localize`:␟dbd47f1d6bb17fd684f8dedf1a8cbdd44598a06f␟3785790205088434409:The subvolume already exists.`,Me=$localize`:␟ec736eca11b59b7eae93df6b3b014db532d0da90␟8030242829118993503:Subvolume name can only contain letters, numbers, '.', '-' or '_'`,ve=$localize`:␟ff7cee38a2259526c519f878e71b964f41db4348␟5607669932062416162:Default`,Se=$localize`:␟25db023269cd62168393b201f615ec90e07f3df8␟4749416028992272245:Size must be a number or in a valid format. eg: 5 GiB`,[["formDir","ngForm"],["subvolumeNameError",""],["sizeError",""],n,d,h,I,$,w,X,J,re,de,Me,ve,Se,["size","lg",3,"overlaySelected","open","hasScrollingContent"],[3,"closeSelect"],["cdsModalHeaderHeading",""],[4,"cdFormLoading"],["cdsModalContent",""],["name","subvolumeForm","novalidate","",3,"formGroup"],[1,"form-item"],["label","Name","for","subvolumeName","cdRequiredField","Name",3,"invalid","invalidText"],["cdsText","","type","text","placeholder","Subvolume name...","id","subvolumeName","name","subvolumeName","formControlName","subvolumeName","modal-primary-focus","",3,"invalid","autofocus"],["label","Volume name","for","volumeName"],["cdsText","","type","text","id","volumeName","name","volumeName","formControlName","volumeName"],["label","Subvolume group","for","subvolumeGroupName","formControlName","subvolumeGroupName","name","subvolumeGroupName","id","subvolumeGroupName",4,"ngIf"],["label","Size","for","size","helperText",t,3,"invalid","invalidText"],["cdsText","","type","text","id","size","name","size","formControlName","size","placeholder",o,"defaultUnit","GiB","cdDimlessBinary","",3,"invalid"],["label","CephFS Pools","for","pool","formControlName","pool","name","pool","id","pool","helperText",s],[3,"value",4,"ngFor","ngForOf"],["label","UID","for","uid"],["cdsText","","type","number","placeholder","Subvolume UID...","id","uid","name","uid","formControlName","uid"],["label","GID","for","gid"],["cdsText","","type","number","placeholder","Subvolume GID...","id","gid","name","gid","formControlName","gid"],["for","mode",1,"cds--label"],["inputField","mode",3,"data","columns","form","isTableForOctalMode","initialValue","scopes","isDisabled"],["id","isolatedNamespace","name","isolatedNamespace","formControlName","isolatedNamespace"],[3,"submitActionEvent","form","submitText","modalForm"],["class","invalid-feedback",4,"ngIf"],[1,"invalid-feedback"],["label","Subvolume group","for","subvolumeGroupName","formControlName","subvolumeGroupName","name","subvolumeGroupName","id","subvolumeGroupName"],["value",""],[3,"value"]]},template:function(t,o){1&t&&(e.\u0275\u0275elementStart(0,"cds-modal",16),e.\u0275\u0275listener("overlaySelected",function(){return o.closeModal()}),e.\u0275\u0275elementStart(1,"cds-modal-header",17),e.\u0275\u0275listener("closeSelect",function(){return o.closeModal()}),e.\u0275\u0275elementStart(2,"h3",18),e.\u0275\u0275i18n(3,3),e.\u0275\u0275pipe(4,"titlecase"),e.\u0275\u0275pipe(5,"upperFirst"),e.\u0275\u0275elementEnd()(),e.\u0275\u0275template(6,ae,47,26,"ng-container",19),e.\u0275\u0275elementEnd()),2&t&&(e.\u0275\u0275property("open",o.open)("hasScrollingContent",!0),e.\u0275\u0275advance(5),e.\u0275\u0275i18nExp(e.\u0275\u0275pipeBind1(4,5,o.action))(e.\u0275\u0275pipeBind1(5,7,o.resource)),e.\u0275\u0275i18nApply(3),e.\u0275\u0275advance(),e.\u0275\u0275property("cdFormLoading",o.loading))},dependencies:[l.NgForOf,l.NgIf,oe.e,it.O,An.N,ct.B,Dn.Y,tt.G,Ge.S,ze.E,ut.P,C.\u0275NgNoValidate,C.NgSelectOption,C.\u0275NgSelectMultipleOption,C.DefaultValueAccessor,C.NumberValueAccessor,C.NgControlStatus,C.NgControlStatusGroup,C.FormGroupDirective,C.FormControlName,D.TextInputLabelComponent,D.TextInput,D.Checkbox,D.Select,D.Option,D.Modal,D.ModalHeader,D.ModalContent,D.ModalHeaderHeading,l.AsyncPipe,l.TitleCasePipe,Pe.r]})}}var L=r(16619),y=r(55472);class x{constructor(){this.cssClasses=["badge-cd-label-green","badge-cd-label-cyan","badge-cd-label-purple","badge-cd-label-light-blue","badge-cd-label-gold","badge-cd-label-light-green"]}transform(n){let t=0,o=0;if(n)for(let s=0;s<n.length;s++)o=n.charCodeAt(s),t=Math.abs((t<<5)-t+o);return this.cssClasses[t%this.cssClasses.length]}static{this.\u0275fac=function(t){return new(t||x)}}static{this.\u0275pipe=e.\u0275\u0275definePipe({name:"colorClassFromText",type:x,pure:!0})}}function W(i,n){if(1&i&&(e.\u0275\u0275elementStart(0,"span",2),e.\u0275\u0275pipe(1,"colorClassFromText"),e.\u0275\u0275text(2),e.\u0275\u0275elementEnd()),2&i){const t=e.\u0275\u0275nextContext();e.\u0275\u0275classMapInterpolate1("badge badge-",t.value,""),e.\u0275\u0275propertyInterpolate("ngClass",e.\u0275\u0275pipeBind1(1,6,t.value)),e.\u0275\u0275property("ngbTooltip",t.tooltipText),e.\u0275\u0275advance(2),e.\u0275\u0275textInterpolate1(" ",t.value,"\n")}}function me(i,n){if(1&i&&(e.\u0275\u0275elementStart(0,"span"),e.\u0275\u0275text(1),e.\u0275\u0275elementEnd()),2&i){const t=e.\u0275\u0275nextContext();e.\u0275\u0275classMapInterpolate2("badge badge-background-primary badge-",t.key,"-",t.value,""),e.\u0275\u0275advance(),e.\u0275\u0275textInterpolate2(" ",t.key,": ",t.value," ")}}class be{static{this.\u0275fac=function(t){return new(t||be)}}static{this.\u0275cmp=e.\u0275\u0275defineComponent({type:be,selectors:[["cd-label"]],inputs:{key:"key",value:"value",tooltipText:"tooltipText"},decls:3,vars:2,consts:[["key_value",""],[3,"class","ngClass","ngbTooltip",4,"ngIf","ngIfElse"],[3,"ngClass","ngbTooltip"]],template:function(t,o){if(1&t&&e.\u0275\u0275template(0,W,3,8,"span",1)(1,me,2,6,"ng-template",null,0,e.\u0275\u0275templateRefExtractor),2&t){const s=e.\u0275\u0275reference(2);e.\u0275\u0275property("ngIf",!o.key)("ngIfElse",s)}},dependencies:[l.NgClass,l.NgIf,G.NgbTooltip,x]})}}var we=r(10142);function dt(i,n){if(1&i&&(e.\u0275\u0275elementStart(0,"h3"),e.\u0275\u0275i18n(1,0),e.\u0275\u0275elementEnd()),2&i){const t=e.\u0275\u0275nextContext(2);e.\u0275\u0275advance(),e.\u0275\u0275i18nExp(t.title),e.\u0275\u0275i18nApply(1)}}function k(i,n){if(1&i){const t=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"a",9),e.\u0275\u0275listener("click",function(){e.\u0275\u0275restoreView(t);const s=e.\u0275\u0275nextContext(3);return e.\u0275\u0275resetView(s.selectItem())}),e.\u0275\u0275text(1,"_nogroup"),e.\u0275\u0275elementEnd()}if(2&i){const t=e.\u0275\u0275nextContext(3);e.\u0275\u0275classProp("active",!t.activeItem)}}function H(i,n){if(1&i){const t=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"a",10),e.\u0275\u0275listener("click",function(){e.\u0275\u0275restoreView(t);const s=e.\u0275\u0275nextContext().$implicit,d=e.\u0275\u0275nextContext(2);return e.\u0275\u0275resetView(d.selectItem(s))}),e.\u0275\u0275text(1),e.\u0275\u0275elementEnd()}if(2&i){const t=e.\u0275\u0275nextContext().$implicit,o=e.\u0275\u0275nextContext(2);e.\u0275\u0275classProp("active",t===o.activeItem),e.\u0275\u0275advance(),e.\u0275\u0275textInterpolate(t)}}function V(i,n){if(1&i&&(e.\u0275\u0275elementStart(0,"li",6),e.\u0275\u0275template(1,k,2,2,"a",7)(2,H,2,3,"a",8),e.\u0275\u0275elementEnd()),2&i){const t=n.$implicit;e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf",""===t),e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf",""!==t)}}function se(i,n){if(1&i){const t=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementContainerStart(0),e.\u0275\u0275template(1,dt,2,1,"h3",1),e.\u0275\u0275elementStart(2,"input",2),e.\u0275\u0275listener("keyup",function(){e.\u0275\u0275restoreView(t);const s=e.\u0275\u0275nextContext();return e.\u0275\u0275resetView(s.updateFilter())}),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(3,"div",3)(4,"ul",4),e.\u0275\u0275template(5,V,3,2,"li",5),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementContainerEnd()}if(2&i){const t=e.\u0275\u0275nextContext();e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf",t.title),e.\u0275\u0275advance(),e.\u0275\u0275property("id",t.inputIdentifier),e.\u0275\u0275advance(3),e.\u0275\u0275property("ngForOf",t.filteredItems)("ngForTrackBy",t.trackByFn)}}class Ne{constructor(){this.emitFilteredItems=new e.EventEmitter,this.emitActiveItem=new e.EventEmitter,this.activeItem=""}ngOnInit(){this.filteredItems=this.items,!this.activeItem&&this.items.length&&this.selectItem(this.items[0])}updateFilter(){const n=document.getElementById(this.inputIdentifier);this.filteredItems=this.items.filter(t=>t.includes(n.value))}selectItem(n=""){this.activeItem=n,this.emitActiveItem.emit(n)}trackByFn(n){return n}static{this.\u0275fac=function(t){return new(t||Ne)}}static{this.\u0275cmp=e.\u0275\u0275defineComponent({type:Ne,selectors:[["cd-vertical-navigation"]],inputs:{items:"items",title:"title",inputIdentifier:"inputIdentifier"},outputs:{emitFilteredItems:"emitFilteredItems",emitActiveItem:"emitActiveItem"},decls:1,vars:1,consts:()=>{let n;return n=$localize`:␟045ed332fbb2645493d6955677247db0d1134c2d␟2999396308623228810:${"\ufffd0\ufffd"}:INTERPOLATION:`,[n,[4,"ngIf"],["type","text","placeholder","Filter by name...",1,"form-control","text-center","mb-2",3,"keyup","id"],[1,"overflow-auto"],[1,"nav","flex-column","nav-pills"],["class","nav-item",4,"ngFor","ngForOf","ngForTrackBy"],[1,"nav-item"],["class","nav-link",3,"active","click",4,"ngIf"],["class","nav-link text-decoration-none text-break",3,"active","click",4,"ngIf"],[1,"nav-link",3,"click"],[1,"nav-link","text-decoration-none","text-break",3,"click"]]},template:function(t,o){1&t&&e.\u0275\u0275template(0,se,6,4,"ng-container",1),2&t&&e.\u0275\u0275property("ngIf",o.items.length)},dependencies:[l.NgForOf,l.NgIf,Ge.S,we.a],styles:[".overflow-auto[_ngcontent-%COMP%]{max-height:50vh}"]})}}var Ve=r(78708);const et=["quotaUsageTpl"],gt=["typeTpl"],Ft=["modeToHumanReadableTpl"],Pt=["nameTpl"],_t=["quotaSizeTpl"],Re=["removeTmpl"],ot=(i,n)=>[i,n];function yn(i,n){if(1&i){const t=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"div",14)(1,"cd-vertical-navigation",15),e.\u0275\u0275listener("emitActiveItem",function(s){e.\u0275\u0275restoreView(t);const d=e.\u0275\u0275nextContext();return e.\u0275\u0275resetView(d.selectSubVolumeGroup(s))}),e.\u0275\u0275elementEnd()()}if(2&i){const t=e.\u0275\u0275nextContext();e.\u0275\u0275advance(),e.\u0275\u0275property("items",t.subvolumeGroupList)}}function Cn(i,n){if(1&i&&e.\u0275\u0275element(0,"cd-usage-bar",17),2&i){const t=e.\u0275\u0275nextContext().data.row;e.\u0275\u0275property("total",t.info.bytes_quota)("used",t.info.bytes_used)("title",t.name)}}function fa(i,n){if(1&i&&(e.\u0275\u0275elementStart(0,"span",19),e.\u0275\u0275text(1),e.\u0275\u0275pipe(2,"dimlessBinary"),e.\u0275\u0275elementEnd()),2&i){const t=e.\u0275\u0275nextContext(2).data.row;e.\u0275\u0275advance(),e.\u0275\u0275textInterpolate1(" ",e.\u0275\u0275pipeBind1(2,1,t.info.bytes_used),"")}}function Mo(i,n){if(1&i&&e.\u0275\u0275template(0,fa,3,3,"span",18),2&i){const t=e.\u0275\u0275nextContext().data.row;e.\u0275\u0275property("ngIf","undefined"===t.info.bytes_pcent)}}function Ea(i,n){if(1&i&&e.\u0275\u0275template(0,Cn,1,3,"cd-usage-bar",16)(1,Mo,1,1,"ng-template",null,5,e.\u0275\u0275templateRefExtractor),2&i){const t=n.data.row,o=e.\u0275\u0275reference(2);e.\u0275\u0275property("ngIf",t.info.bytes_pcent&&"undefined"!==t.info.bytes_pcent)("ngIfElse",o)}}function Ro(i,n){if(1&i&&e.\u0275\u0275element(0,"cd-label",20),2&i){const t=n.data.value;e.\u0275\u0275property("value",t)}}function ga(i,n){if(1&i&&(e.\u0275\u0275elementStart(0,"span",22),e.\u0275\u0275text(1),e.\u0275\u0275elementEnd()),2&i){const t=n.$implicit;e.\u0275\u0275property("ngClass",t.class)("ngbTooltip",t.toolTip),e.\u0275\u0275advance(),e.\u0275\u0275textInterpolate1(" ",t.content," ")}}function Ca(i,n){if(1&i&&(e.\u0275\u0275template(0,ga,2,3,"span",21),e.\u0275\u0275pipe(1,"octalToHumanReadable")),2&i){const t=n.data.value;e.\u0275\u0275property("ngForOf",e.\u0275\u0275pipeBind1(1,1,t))}}function Sa(i,n){if(1&i&&(e.\u0275\u0275elementStart(0,"span"),e.\u0275\u0275element(1,"i",27),e.\u0275\u0275elementEnd()),2&i){const t=e.\u0275\u0275nextContext().data.row,o=e.\u0275\u0275nextContext();e.\u0275\u0275advance(),e.\u0275\u0275propertyInterpolate1("ngbTooltip","",t.name," is ready to use"),e.\u0275\u0275property("ngClass",e.\u0275\u0275pureFunction2(3,ot,o.icons.success,o.icons.large))}}function ha(i,n){if(1&i&&e.\u0275\u0275element(0,"i",28),2&i){const t=e.\u0275\u0275nextContext().data.row,o=e.\u0275\u0275nextContext();e.\u0275\u0275propertyInterpolate1("ngbTooltip","",t.name," is removed after retaining the snapshots"),e.\u0275\u0275property("ngClass",e.\u0275\u0275pureFunction2(3,ot,o.icons.warning,o.icons.large))}}function Oo(i,n){if(1&i&&e.\u0275\u0275element(0,"cd-label",20),2&i){const t=e.\u0275\u0275nextContext().data.row;e.\u0275\u0275property("value",null==t||null==t.info?null:t.info.type)}}function Po(i,n){if(1&i&&e.\u0275\u0275element(0,"cd-label",29),2&i){const t=e.\u0275\u0275nextContext().data.row;e.\u0275\u0275property("tooltipText",null==t||null==t.info?null:t.info.pool_namespace)}}function Ta(i,n){if(1&i&&(e.\u0275\u0275elementStart(0,"span",23),e.\u0275\u0275text(1),e.\u0275\u0275elementEnd(),e.\u0275\u0275template(2,Sa,2,6,"span",24)(3,ha,1,6,"ng-template",null,6,e.\u0275\u0275templateRefExtractor)(5,Oo,1,1,"cd-label",25)(6,Po,1,1,"cd-label",26)),2&i){const t=n.data.row,o=e.\u0275\u0275reference(4);e.\u0275\u0275advance(),e.\u0275\u0275textInterpolate(t.name),e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf","complete"===(null==t||null==t.info?null:t.info.state))("ngIfElse",o),e.\u0275\u0275advance(3),e.\u0275\u0275property("ngIf","subvolume"!==(null==t||null==t.info?null:t.info.type)),e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf",null==t||null==t.info?null:t.info.pool_namespace)}}function Fa(i,n){if(1&i&&(e.\u0275\u0275elementStart(0,"cd-alert-panel",37),e.\u0275\u0275text(1),e.\u0275\u0275elementEnd()),2&i){const t=e.\u0275\u0275nextContext(2);e.\u0275\u0275advance(),e.\u0275\u0275textInterpolate1(" ",t.errorMessage," ")}}function va(i,n){if(1&i&&(e.\u0275\u0275elementContainerStart(0,30)(1,31),e.\u0275\u0275template(2,Fa,2,1,"cd-alert-panel",32),e.\u0275\u0275elementStart(3,"div",33)(4,"div",34),e.\u0275\u0275element(5,"input",35),e.\u0275\u0275elementStart(6,"label",36),e.\u0275\u0275i18nStart(7,7),e.\u0275\u0275element(8,"cd-helper"),e.\u0275\u0275i18nEnd(),e.\u0275\u0275elementEnd()()(),e.\u0275\u0275elementContainerEnd()()),2&i){const t=n.form,o=e.\u0275\u0275nextContext();e.\u0275\u0275property("formGroup",t),e.\u0275\u0275advance(2),e.\u0275\u0275property("ngIf",o.errorMessage.length>1)}}class io extends Ce.g{constructor(n,t,o,s,d,h,I){super(),this.cephfsSubVolumeService=n,this.actionLabels=t,this.modalService=o,this.authStorageService=s,this.taskWrapper=d,this.cephfsSubvolumeGroupService=h,this.healthService=I,this.columns=[],this.selection=new N.y,this.icons=g.FI,this.errorMessage="",this.selectedName="",this.subject=new K.BehaviorSubject([]),this.groupsSubject=new K.BehaviorSubject([]),this.subvolumeGroupList=[],this.subVolumesList=[],this.activeGroupName="",this.permissions=this.authStorageService.getPermissions()}ngOnInit(){this.columns=[{name:$localize`Name`,prop:"name",flexGrow:1,cellTemplate:this.nameTpl},{name:$localize`Data Pool`,prop:"info.data_pool",flexGrow:.7,cellTransformation:b.x.badge,customTemplateConfig:{class:"badge-background-primary"}},{name:$localize`Usage`,prop:"info.bytes_pcent",flexGrow:.7,cellTemplate:this.quotaUsageTpl,cellClass:"text-right"},{name:$localize`Path`,prop:"info.path",flexGrow:1,cellTransformation:b.x.path},{name:$localize`Mode`,prop:"info.mode",flexGrow:.5,cellTemplate:this.modeToHumanReadableTpl},{name:$localize`Created`,prop:"info.created_at",flexGrow:.5,cellTransformation:b.x.timeAgo}],this.tableActions=[{name:this.actionLabels.CREATE,permission:"create",icon:g.FI.add,click:()=>this.openModal()},{name:this.actionLabels.EDIT,permission:"update",icon:g.FI.edit,click:()=>this.openModal(!0)},{name:this.actionLabels.ATTACH,permission:"read",icon:g.FI.bars,disable:()=>!this.selection?.hasSelection,click:()=>this.showAttachInfo()},{name:this.actionLabels.NFS_EXPORT,permission:"create",icon:g.FI.nfsExport,routerLink:()=>["/cephfs/nfs/create",this.fsName,p().isEmpty(this.activeGroupName)?L.H:this.activeGroupName,{subvolume:this.selection?.first()?.name}],disable:()=>!this.selection?.hasSingleSelection},{name:this.actionLabels.REMOVE,permission:"delete",icon:g.FI.destroy,click:()=>this.removeSubVolumeModal()}],this.subVolumeGroups$=this.groupsSubject.pipe((0,v.switchMap)(()=>this.cephfsSubvolumeGroupService.get(this.fsName,!1).pipe((0,v.tap)(n=>{this.subvolumeGroupList=n.map(t=>t.name),this.subvolumeGroupList.unshift("")}),(0,v.catchError)(()=>(this.context.error(),(0,K.of)(null))))))}fetchData(){this.subject.next([])}ngOnChanges(n){n.fsName&&(this.subject.next([]),this.groupsSubject.next([]))}updateSelection(n){this.selection=n}showAttachInfo(){const n=this.selection?.selected?.[0];this.healthService.getClusterFsid().subscribe({next:t=>{this.modalRef=this.modalService.show(_e,{onSubmit:()=>this.modalRef.close(),mountData:{fsId:t,fsName:this.fsName,rootPath:n.info.path}})}})}openModal(n=!1){this.modalService.show(U,{fsName:this.fsName,subVolumeName:this.selection?.first()?.name,subVolumeGroupName:this.activeGroupName,pools:this.pools,isEdit:n})}removeSubVolumeModal(){this.removeForm=new Ue.$({retainSnapshots:new C.FormControl(!1)}),this.errorMessage="",this.selectedName=this.selection.first().name,this.modalService.show(O.D,{impact:ft.r.high,actionDescription:"remove",itemNames:[this.selectedName],itemDescription:"Subvolume",childFormGroup:this.removeForm,childFormGroupTemplate:this.removeTmpl,submitAction:()=>this.taskWrapper.wrapTaskAroundCall({task:new q.O("cephfs/subvolume/remove",{subVolumeName:this.selectedName}),call:this.cephfsSubVolumeService.remove(this.fsName,this.selectedName,this.activeGroupName,this.removeForm.getValue("retainSnapshots"))}).subscribe({complete:()=>this.modalService.dismissAll(),error:n=>{this.modalRef.componentInstance.stopLoadingSpinner(),this.errorMessage=n.error.detail}})})}selectSubVolumeGroup(n){this.activeGroupName=n,this.getSubVolumes()}getSubVolumes(){this.subVolumes$=this.subject.pipe((0,v.switchMap)(()=>this.cephfsSubVolumeService.get(this.fsName,this.activeGroupName).pipe((0,v.catchError)(()=>(this.context?.error(),(0,K.of)(null))))))}static{this.\u0275fac=function(t){return new(t||io)(e.\u0275\u0275directiveInject(Qt.v),e.\u0275\u0275directiveInject(m.Ss),e.\u0275\u0275directiveInject(He.V),e.\u0275\u0275directiveInject(c.v),e.\u0275\u0275directiveInject(B.a),e.\u0275\u0275directiveInject(It.W),e.\u0275\u0275directiveInject(ue))}}static{this.\u0275cmp=e.\u0275\u0275defineComponent({type:io,selectors:[["cd-cephfs-subvolume-list"]],viewQuery:function(t,o){if(1&t&&(e.\u0275\u0275viewQuery(et,7),e.\u0275\u0275viewQuery(gt,7),e.\u0275\u0275viewQuery(Ft,7),e.\u0275\u0275viewQuery(Pt,7),e.\u0275\u0275viewQuery(_t,7),e.\u0275\u0275viewQuery(Re,7)),2&t){let s;e.\u0275\u0275queryRefresh(s=e.\u0275\u0275loadQuery())&&(o.quotaUsageTpl=s.first),e.\u0275\u0275queryRefresh(s=e.\u0275\u0275loadQuery())&&(o.typeTpl=s.first),e.\u0275\u0275queryRefresh(s=e.\u0275\u0275loadQuery())&&(o.modeToHumanReadableTpl=s.first),e.\u0275\u0275queryRefresh(s=e.\u0275\u0275loadQuery())&&(o.nameTpl=s.first),e.\u0275\u0275queryRefresh(s=e.\u0275\u0275loadQuery())&&(o.quotaSizeTpl=s.first),e.\u0275\u0275queryRefresh(s=e.\u0275\u0275loadQuery())&&(o.removeTmpl=s.first)}},inputs:{fsName:"fsName",pools:"pools"},features:[e.\u0275\u0275InheritDefinitionFeature,e.\u0275\u0275NgOnChangesFeature],decls:18,vars:11,consts:()=>{let n,t;return n=$localize`:␟963d5259b684b8a4b60d3d0256f0b609c0dc7783␟8125916572042430518:Quota limit is not set`,t=$localize`:␟58e30271d585dbad2ddd09826a227c01f469826b␟5714834682768134941:Retain snapshots ${"\ufffd#8\ufffd"}:START_TAG_CD_HELPER:The subvolume can be removed retaining existing snapshots using this option. If snapshots are retained, the subvolume is considered empty for all operations not involving the retained snapshots.${"\ufffd/#8\ufffd"}:CLOSE_TAG_CD_HELPER:`,[["quotaUsageTpl",""],["typeTpl",""],["modeToHumanReadableTpl",""],["nameTpl",""],["removeTmpl",""],["noLimitTpl",""],["snapshotRetainedTpl",""],t,[1,"row"],["class","col-sm-2",4,"ngIf"],[1,"col-10","vertical-line"],["columnMode","flex","selectionType","single",3,"fetchData","updateSelection","data","columns","hasDetails"],[1,"table-actions"],["id","cephfs-subvolume-actions",1,"btn-group",3,"permission","selection","tableActions"],[1,"col-sm-2"],["title","Groups","inputIdentifier","group-filter",3,"emitActiveItem","items"],["decimals","2",3,"total","used","title",4,"ngIf","ngIfElse"],["decimals","2",3,"total","used","title"],["ngbTooltip",n,4,"ngIf"],["ngbTooltip",n],[3,"value"],[3,"ngClass","ngbTooltip",4,"ngFor","ngForOf"],[3,"ngClass","ngbTooltip"],[1,"fw-bold"],[4,"ngIf","ngIfElse"],[3,"value",4,"ngIf"],["value","namespaced",3,"tooltipText",4,"ngIf"],[1,"text-success",3,"ngClass","ngbTooltip"],[1,"text-warning",3,"ngClass","ngbTooltip"],["value","namespaced",3,"tooltipText"],[3,"formGroup"],["formGroupName","child"],["type","error",4,"ngIf"],[1,"form-group"],[1,"custom-control","custom-checkbox"],["type","checkbox","name","retainSnapshots","id","retainSnapshots","formControlName","retainSnapshots",1,"custom-control-input"],["for","retainSnapshots",1,"custom-control-label"],["type","error"]]},template:function(t,o){if(1&t){const s=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"div",8),e.\u0275\u0275template(1,yn,2,1,"div",9),e.\u0275\u0275pipe(2,"async"),e.\u0275\u0275elementStart(3,"div",10)(4,"cd-table",11),e.\u0275\u0275pipe(5,"async"),e.\u0275\u0275listener("fetchData",function(){return e.\u0275\u0275restoreView(s),e.\u0275\u0275resetView(o.fetchData())})("updateSelection",function(h){return e.\u0275\u0275restoreView(s),e.\u0275\u0275resetView(o.updateSelection(h))}),e.\u0275\u0275elementStart(6,"div",12),e.\u0275\u0275element(7,"cd-table-actions",13),e.\u0275\u0275elementEnd()()()(),e.\u0275\u0275template(8,Ea,3,2,"ng-template",null,0,e.\u0275\u0275templateRefExtractor)(10,Ro,1,1,"ng-template",null,1,e.\u0275\u0275templateRefExtractor)(12,Ca,2,3,"ng-template",null,2,e.\u0275\u0275templateRefExtractor)(14,Ta,7,5,"ng-template",null,3,e.\u0275\u0275templateRefExtractor)(16,va,9,2,"ng-template",null,4,e.\u0275\u0275templateRefExtractor)}2&t&&(e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf",e.\u0275\u0275pipeBind1(2,7,o.subVolumeGroups$)),e.\u0275\u0275advance(3),e.\u0275\u0275property("data",e.\u0275\u0275pipeBind1(5,9,o.subVolumes$))("columns",o.columns)("hasDetails",!1),e.\u0275\u0275advance(3),e.\u0275\u0275property("permission",o.permissions.cephfs)("selection",o.selection)("tableActions",o.tableActions))},dependencies:[l.NgClass,l.NgForOf,l.NgIf,y.m,xt.o,nt.m,be,Ne,We.O,at.j,Ge.S,we.a,Ve.C,ze.E,C.CheckboxControlValueAccessor,C.NgControlStatus,C.NgControlStatusGroup,C.FormGroupDirective,C.FormControlName,C.FormGroupName,G.NgbTooltip,l.AsyncPipe,pt.l,En.I]})}}function Ma(i,n){1&i&&(e.\u0275\u0275elementStart(0,"span",37),e.\u0275\u0275i18n(1,10),e.\u0275\u0275elementEnd())}function Ra(i,n){1&i&&(e.\u0275\u0275elementStart(0,"span",37),e.\u0275\u0275i18n(1,11),e.\u0275\u0275elementEnd())}function Oa(i,n){1&i&&(e.\u0275\u0275elementStart(0,"span",37),e.\u0275\u0275i18n(1,12),e.\u0275\u0275elementEnd())}function Pa(i,n){if(1&i&&e.\u0275\u0275template(0,Ma,2,0,"span",36)(1,Ra,2,0,"span",36)(2,Oa,2,0,"span",36),2&i){e.\u0275\u0275nextContext();const t=e.\u0275\u0275reference(3),o=e.\u0275\u0275nextContext();e.\u0275\u0275property("ngIf",o.subvolumegroupForm.showError("subvolumegroupName",t,"required")),e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf",o.subvolumegroupForm.showError("subvolumegroupName",t,"notUnique")),e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf",o.subvolumegroupForm.showError("subvolumegroupName",t,"pattern"))}}function ba(i,n){1&i&&(e.\u0275\u0275elementStart(0,"span",37),e.\u0275\u0275i18n(1,13),e.\u0275\u0275elementEnd())}function Na(i,n){if(1&i&&e.\u0275\u0275template(0,ba,2,0,"span",36),2&i){e.\u0275\u0275nextContext();const t=e.\u0275\u0275reference(3),o=e.\u0275\u0275nextContext();e.\u0275\u0275property("ngIf",o.subvolumegroupForm.showError("size",t,"pattern"))}}function Ia(i,n){if(1&i&&(e.\u0275\u0275elementStart(0,"option",38),e.\u0275\u0275text(1),e.\u0275\u0275elementEnd()),2&i){const t=n.$implicit;e.\u0275\u0275property("value",t.pool),e.\u0275\u0275advance(),e.\u0275\u0275textInterpolate(t.pool)}}function Aa(i,n){if(1&i){const t=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementContainerStart(0),e.\u0275\u0275elementStart(1,"div",18)(2,"form",19,0)(4,"div",20)(5,"cds-text-label",21),e.\u0275\u0275i18nStart(6,4),e.\u0275\u0275element(7,"input",22),e.\u0275\u0275i18nEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275template(8,Pa,3,3,"ng-template",null,1,e.\u0275\u0275templateRefExtractor),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(10,"div",20)(11,"cds-text-label",23),e.\u0275\u0275i18nStart(12,5),e.\u0275\u0275element(13,"input",24),e.\u0275\u0275i18nEnd(),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(14,"div",20)(15,"cds-text-label",25),e.\u0275\u0275i18nStart(16,6),e.\u0275\u0275element(17,"input",26),e.\u0275\u0275i18nEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275template(18,Na,1,1,"ng-template",null,2,e.\u0275\u0275templateRefExtractor),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(20,"div",20)(21,"cds-select",27),e.\u0275\u0275template(22,Ia,2,2,"option",28),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(23,"div",20)(24,"cds-text-label",29),e.\u0275\u0275i18nStart(25,7),e.\u0275\u0275element(26,"input",30),e.\u0275\u0275i18nEnd(),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(27,"div",20)(28,"cds-text-label",31),e.\u0275\u0275i18nStart(29,8),e.\u0275\u0275element(30,"input",32),e.\u0275\u0275i18nEnd(),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(31,"div",20)(32,"label",33),e.\u0275\u0275i18n(33,9),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(34,"cd-help-text"),e.\u0275\u0275text(35,"Permissions for the directory. Default mode is 755 which is rwxr-xr-x"),e.\u0275\u0275elementEnd(),e.\u0275\u0275element(36,"cd-checked-table-form",34),e.\u0275\u0275elementEnd()()(),e.\u0275\u0275elementStart(37,"cd-form-button-panel",35),e.\u0275\u0275pipe(38,"titlecase"),e.\u0275\u0275pipe(39,"upperFirst"),e.\u0275\u0275listener("submitActionEvent",function(){e.\u0275\u0275restoreView(t);const s=e.\u0275\u0275nextContext();return e.\u0275\u0275resetView(s.submit())}),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementContainerEnd()}if(2&i){const t=e.\u0275\u0275reference(9),o=e.\u0275\u0275reference(19),s=e.\u0275\u0275nextContext();e.\u0275\u0275advance(2),e.\u0275\u0275property("formGroup",s.subvolumegroupForm),e.\u0275\u0275advance(3),e.\u0275\u0275property("invalid",s.subvolumegroupForm.controls.subvolumegroupName.invalid&&s.subvolumegroupForm.controls.subvolumegroupName.dirty)("invalidText",t),e.\u0275\u0275advance(2),e.\u0275\u0275property("invalid",s.subvolumegroupForm.controls.subvolumegroupName.invalid&&s.subvolumegroupForm.controls.subvolumegroupName.dirty),e.\u0275\u0275advance(8),e.\u0275\u0275property("invalid",s.subvolumegroupForm.controls.size.invalid&&s.subvolumegroupForm.controls.size.dirty)("invalidText",o),e.\u0275\u0275advance(2),e.\u0275\u0275property("invalid",s.subvolumegroupForm.controls.size.invalid&&s.subvolumegroupForm.controls.size.dirty),e.\u0275\u0275advance(5),e.\u0275\u0275property("ngForOf",s.dataPools),e.\u0275\u0275advance(14),e.\u0275\u0275property("data",s.scopePermissions)("columns",s.columns)("form",s.subvolumegroupForm)("isTableForOctalMode",!0)("initialValue",s.initialMode)("scopes",s.scopes)("isDisabled",s.isEdit),e.\u0275\u0275advance(),e.\u0275\u0275property("form",s.subvolumegroupForm)("submitText",e.\u0275\u0275pipeBind1(38,18,s.action)+" "+e.\u0275\u0275pipeBind1(39,20,s.resource))("modalForm",!0)}}class ao extends Ce.g{constructor(n,t,o,s,d,h,I,$,w,X=!1){super(),this.actionLabels=n,this.taskWrapper=t,this.cephfsSubvolumeGroupService=o,this.formatter=s,this.dimlessBinary=d,this.octalToHumanReadable=h,this.fsName=I,this.subvolumegroupName=$,this.pools=w,this.isEdit=X,this.scopePermissions=[],this.initialMode={owner:["read","write","execute"],group:["read","execute"],others:["read","execute"]},this.scopes=["owner","group","others"],this.resource=$localize`subvolume group`}ngOnInit(){this.action=this.actionLabels.CREATE,this.columns=[{prop:"scope",name:$localize`All`,flexGrow:.5},{prop:"read",name:$localize`Read`,flexGrow:.5,cellClass:"text-center"},{prop:"write",name:$localize`Write`,flexGrow:.5,cellClass:"text-center"},{prop:"execute",name:$localize`Execute`,flexGrow:.5,cellClass:"text-center"}],this.dataPools=this.pools.filter(n=>"data"===n.type),this.createForm(),this.isEdit?this.populateForm():this.loadingReady()}createForm(){this.subvolumegroupForm=new Ue.$({volumeName:new C.FormControl({value:this.fsName,disabled:!0}),subvolumegroupName:new C.FormControl("",{validators:[C.Validators.required,C.Validators.pattern(/^[.A-Za-z0-9_-]+$/)],asyncValidators:[pe.xQ.unique(this.cephfsSubvolumeGroupService.exists,this.cephfsSubvolumeGroupService,null,null,this.fsName)]}),pool:new C.FormControl(this.dataPools[0]?.pool,{validators:[C.Validators.required]}),size:new C.FormControl(null,{updateOn:"blur"}),uid:new C.FormControl(null),gid:new C.FormControl(null),mode:new C.FormControl({})})}populateForm(){this.action=this.actionLabels.EDIT,this.cephfsSubvolumeGroupService.info(this.fsName,this.subvolumegroupName).subscribe(n=>{this.subvolumegroupForm.get("subvolumegroupName").disable(),this.subvolumegroupForm.get("subvolumegroupName").setValue(this.subvolumegroupName),"infinite"!==n.bytes_quota&&this.subvolumegroupForm.get("size").setValue(this.dimlessBinary.transform(n.bytes_quota)),this.subvolumegroupForm.get("uid").setValue(n.uid),this.subvolumegroupForm.get("gid").setValue(n.gid),this.initialMode=this.octalToHumanReadable.transform(n.mode,!0),this.loadingReady()})}submit(){const n=this.subvolumegroupForm.getValue("subvolumegroupName"),t=this.subvolumegroupForm.getValue("pool"),o=this.formatter.toBytes(this.subvolumegroupForm.getValue("size"))||0,s=this.subvolumegroupForm.getValue("uid"),d=this.subvolumegroupForm.getValue("gid"),h=this.formatter.toOctalPermission(this.subvolumegroupForm.getValue("mode"));this.isEdit?this.taskWrapper.wrapTaskAroundCall({task:new q.O("cephfs/subvolume/group/"+m.Qp.EDIT,{subvolumegroupName:n}),call:this.cephfsSubvolumeGroupService.create(this.fsName,n,t,String(o),s,d,h)}).subscribe({error:()=>{this.subvolumegroupForm.setErrors({cdSubmitButton:!0})},complete:()=>{this.closeModal()}}):this.taskWrapper.wrapTaskAroundCall({task:new q.O("cephfs/subvolume/group/"+m.Qp.CREATE,{subvolumegroupName:n}),call:this.cephfsSubvolumeGroupService.create(this.fsName,n,t,String(o),s,d,h)}).subscribe({error:()=>{this.subvolumegroupForm.setErrors({cdSubmitButton:!0})},complete:()=>{this.closeModal()}})}static{this.\u0275fac=function(t){return new(t||ao)(e.\u0275\u0275directiveInject(m.Ss),e.\u0275\u0275directiveInject(B.a),e.\u0275\u0275directiveInject(It.W),e.\u0275\u0275directiveInject(Rn.k),e.\u0275\u0275directiveInject(pt.l),e.\u0275\u0275directiveInject(En.I),e.\u0275\u0275directiveInject("fsName",8),e.\u0275\u0275directiveInject("subvolumegroupName",8),e.\u0275\u0275directiveInject("pools",8),e.\u0275\u0275directiveInject("isEdit",8))}}static{this.\u0275cmp=e.\u0275\u0275defineComponent({type:ao,selectors:[["cd-cephfs-subvolumegroup-form"]],features:[e.\u0275\u0275InheritDefinitionFeature],decls:7,vars:9,consts:()=>{let n,t,o,s,d,h,I,$,w,X,J,re,de,Me,ve;return n=$localize`:␟fb127ea03835b3230f0ed981c7080e2ccb879621␟3346778808274133574:${"\ufffd0\ufffd"}:INTERPOLATION: ${"\ufffd1\ufffd"}:INTERPOLATION_1:`,t=$localize`:␟6df5486c9d526e51d0618fdc4558abe004307ee1␟8253929787559373446:Subvolume group name...`,o=$localize`:␟492b46633749d05dc2e2dd51858f7ef8d59c2835␟5082538775333860868:The size of the subvolume is specified by setting a quota on it.
                          If left blank or put 0, then quota will be infinite`,s=$localize`:␟f0016bd458baa88284a658ce9eeda42d8ad88d2c␟2739243284262593813:e.g., 10GiB`,d=$localize`:␟5408f26ef48cea5b1042cc20781616622cc83bc5␟6004297985262322523:By default, the data_pool_layout of the parent directory is selected.`,h=$localize`:␟da6954d55a46943dd77159d65e5b81f51b0e3acb␟271472573961202879:Name ${"\ufffd#7\ufffd\ufffd/#7\ufffd"}:TAG_INPUT:`,I=$localize`:␟bc10faea89ab159ba5724d6f4863196d7ac6c9ab␟6253438817097773454:Volume name ${"\ufffd#13\ufffd\ufffd/#13\ufffd"}:TAG_INPUT:`,$=$localize`:␟cf68b93f7ce07de1b3d9f7429a8a29595c4fe302␟5881817813163804952:Size ${"\ufffd#17\ufffd\ufffd/#17\ufffd"}:TAG_INPUT:`,w=$localize`:␟24bd69b6c334472d0aaefe8ade289310e3e65564␟3314973177575788995:UID ${"\ufffd#26\ufffd\ufffd/#26\ufffd"}:TAG_INPUT:`,X=$localize`:␟20d558ebd10cbfb1955896b2a49341b49951dc9d␟2433505658977168644:GID ${"\ufffd#30\ufffd\ufffd/#30\ufffd"}:TAG_INPUT:`,J=$localize`:␟b04e4b4ddc6dfdc6fd2b1c1bb789333a51cf89b3␟7479570597537922716:Mode `,re=$localize`:␟7cbdabcece469fab89cfa687ab152bca18b97498␟1417693714872528491:This field is required.`,de=$localize`:␟4a67528e98485cefec44731707c4863da1619bb9␟5661299791362108018:The subvolume group already exists.`,Me=$localize`:␟ec736eca11b59b7eae93df6b3b014db532d0da90␟8030242829118993503:Subvolume name can only contain letters, numbers, '.', '-' or '_'`,ve=$localize`:␟25db023269cd62168393b201f615ec90e07f3df8␟4749416028992272245:Size must be a number or in a valid format. eg: 5 GiB`,[["formDir","ngForm"],["subvolumegroupNameError",""],["sizeError",""],n,h,I,$,w,X,J,re,de,Me,ve,["size","lg",3,"overlaySelected","open","hasScrollingContent"],[3,"closeSelect"],["cdsModalHeaderHeading",""],[4,"cdFormLoading"],["cdsModalContent",""],["name","subvolumegroupForm","novalidate","",3,"formGroup"],[1,"form-item"],["label","Name","for","subvolumegroupName","cdRequiredField","Name",3,"invalid","invalidText"],["cdsText","","type","text","placeholder",t,"id","subvolumegroupName","name","subvolumegroupName","formControlName","subvolumegroupName","modal-primary-focus","",3,"invalid"],["label","Volume name","for","volumeName"],["cdsText","","type","text","id","volumeName","name","volumeName","formControlName","volumeName"],["label","Size","for","size","helperText",o,3,"invalid","invalidText"],["cdsText","","type","text","id","size","name","size","formControlName","size","placeholder",s,"defaultUnit","GiB","cdDimlessBinary","",3,"invalid"],["label","CephFS Pools","for","pool","formControlName","pool","name","pool","id","pool","helperText",d],[3,"value",4,"ngFor","ngForOf"],["label","UID","for","uid"],["cdsText","","type","number","placeholder","Subvolume UID...","id","uid","name","uid","formControlName","uid"],["label","GID","for","gid"],["cdsText","","type","number","placeholder","Subvolume group GID...","id","gid","name","gid","formControlName","gid"],["for","mode",1,"cds--label"],["inputField","mode",3,"data","columns","form","isTableForOctalMode","initialValue","scopes","isDisabled"],[3,"submitActionEvent","form","submitText","modalForm"],["class","invalid-feedback",4,"ngIf"],[1,"invalid-feedback"],[3,"value"]]},template:function(t,o){1&t&&(e.\u0275\u0275elementStart(0,"cds-modal",14),e.\u0275\u0275listener("overlaySelected",function(){return o.closeModal()}),e.\u0275\u0275elementStart(1,"cds-modal-header",15),e.\u0275\u0275listener("closeSelect",function(){return o.closeModal()}),e.\u0275\u0275elementStart(2,"h3",16),e.\u0275\u0275i18n(3,3),e.\u0275\u0275pipe(4,"titlecase"),e.\u0275\u0275pipe(5,"upperFirst"),e.\u0275\u0275elementEnd()(),e.\u0275\u0275template(6,Aa,40,22,"ng-container",17),e.\u0275\u0275elementEnd()),2&t&&(e.\u0275\u0275property("open",o.open)("hasScrollingContent",!0),e.\u0275\u0275advance(5),e.\u0275\u0275i18nExp(e.\u0275\u0275pipeBind1(4,5,o.action))(e.\u0275\u0275pipeBind1(5,7,o.resource)),e.\u0275\u0275i18nApply(3),e.\u0275\u0275advance(),e.\u0275\u0275property("cdFormLoading",o.loading))},dependencies:[l.NgForOf,l.NgIf,oe.e,it.O,An.N,Dn.Y,tt.G,Ge.S,ze.E,ut.P,C.\u0275NgNoValidate,C.NgSelectOption,C.\u0275NgSelectMultipleOption,C.DefaultValueAccessor,C.NumberValueAccessor,C.NgControlStatus,C.NgControlStatusGroup,C.FormGroupDirective,C.FormControlName,D.TextInputLabelComponent,D.TextInput,D.Select,D.Option,D.Modal,D.ModalHeader,D.ModalContent,D.ModalHeaderHeading,l.TitleCasePipe,Pe.r]})}}const Da=["quotaUsageTpl"],ya=["typeTpl"],La=["modeToHumanReadableTpl"],$a=["nameTpl"],xa=["quotaSizeTpl"];function Ua(i,n){if(1&i){const t=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"cd-table",6),e.\u0275\u0275listener("fetchData",function(){e.\u0275\u0275restoreView(t);const s=e.\u0275\u0275nextContext(2);return e.\u0275\u0275resetView(s.fetchData())})("updateSelection",function(s){e.\u0275\u0275restoreView(t);const d=e.\u0275\u0275nextContext(2);return e.\u0275\u0275resetView(d.updateSelection(s))}),e.\u0275\u0275elementStart(1,"div",7),e.\u0275\u0275element(2,"cd-table-actions",8),e.\u0275\u0275elementEnd()()}if(2&i){const t=e.\u0275\u0275nextContext().ngIf,o=e.\u0275\u0275nextContext();e.\u0275\u0275property("data",t)("columns",o.columns)("hasDetails",!1),e.\u0275\u0275advance(2),e.\u0275\u0275property("permission",o.permissions.cephfs)("selection",o.selection)("tableActions",o.tableActions)}}function wa(i,n){if(1&i&&(e.\u0275\u0275elementContainerStart(0),e.\u0275\u0275template(1,Ua,3,6,"cd-table",5),e.\u0275\u0275elementContainerEnd()),2&i){const t=n.ngIf;e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf",t)}}function Ga(i,n){if(1&i&&e.\u0275\u0275element(0,"cd-usage-bar",10),2&i){const t=e.\u0275\u0275nextContext().data.row;e.\u0275\u0275property("total",t.info.bytes_quota)("used",t.info.bytes_used)("title",t.name)}}function Ha(i,n){if(1&i&&(e.\u0275\u0275elementStart(0,"span",12),e.\u0275\u0275text(1),e.\u0275\u0275pipe(2,"dimlessBinary"),e.\u0275\u0275elementEnd()),2&i){const t=e.\u0275\u0275nextContext(2).data.row;e.\u0275\u0275advance(),e.\u0275\u0275textInterpolate1(" ",e.\u0275\u0275pipeBind1(2,1,t.info.bytes_used),"")}}function Va(i,n){if(1&i&&e.\u0275\u0275template(0,Ha,3,3,"span",11),2&i){const t=e.\u0275\u0275nextContext().data.row;e.\u0275\u0275property("ngIf","undefined"===t.info.bytes_pcent)}}function Ba(i,n){if(1&i&&e.\u0275\u0275template(0,Ga,1,3,"cd-usage-bar",9)(1,Va,1,1,"ng-template",null,3,e.\u0275\u0275templateRefExtractor),2&i){const t=n.data.row,o=e.\u0275\u0275reference(2);e.\u0275\u0275property("ngIf",t.info.bytes_pcent&&"undefined"!==t.info.bytes_pcent)("ngIfElse",o)}}function za(i,n){if(1&i&&e.\u0275\u0275element(0,"cd-label",13),2&i){const t=n.data.value;e.\u0275\u0275property("value",t)}}function Xa(i,n){if(1&i&&(e.\u0275\u0275elementStart(0,"span",15),e.\u0275\u0275text(1),e.\u0275\u0275elementEnd()),2&i){const t=n.$implicit;e.\u0275\u0275property("ngClass",t.class)("ngbTooltip",t.toolTip),e.\u0275\u0275advance(),e.\u0275\u0275textInterpolate1(" ",t.content," ")}}function ka(i,n){if(1&i&&(e.\u0275\u0275template(0,Xa,2,3,"span",14),e.\u0275\u0275pipe(1,"octalToHumanReadable")),2&i){const t=n.data.value;e.\u0275\u0275property("ngForOf",e.\u0275\u0275pipeBind1(1,1,t))}}class so{constructor(n,t,o,s,d,h){this.cephfsSubvolumeGroup=n,this.actionLabels=t,this.modalService=o,this.authStorageService=s,this.taskWrapper=d,this.cdsModalService=h,this.selection=new N.y,this.icons=g.FI,this.subject=new K.BehaviorSubject([]),this.permissions=this.authStorageService.getPermissions()}ngOnInit(){this.columns=[{name:$localize`Name`,prop:"name",flexGrow:.6,cellTransformation:b.x.bold},{name:$localize`Data Pool`,prop:"info.data_pool",flexGrow:.7,cellTransformation:b.x.badge,customTemplateConfig:{class:"badge-background-primary"}},{name:$localize`Usage`,prop:"info.bytes_pcent",flexGrow:.7,cellTemplate:this.quotaUsageTpl,cellClass:"text-right"},{name:$localize`Mode`,prop:"info.mode",flexGrow:.5,cellTemplate:this.modeToHumanReadableTpl},{name:$localize`Created`,prop:"info.created_at",flexGrow:.5,cellTransformation:b.x.timeAgo}],this.tableActions=[{name:this.actionLabels.CREATE,permission:"create",icon:g.FI.add,click:()=>this.openModal(),canBePrimary:n=>!n.hasSelection},{name:this.actionLabels.EDIT,permission:"update",icon:g.FI.edit,click:()=>this.openModal(!0)},{name:this.actionLabels.NFS_EXPORT,permission:"create",icon:g.FI.nfsExport,routerLink:()=>["/cephfs/nfs/create",this.fsName,this.selection?.first()?.name],disable:()=>!this.selection.hasSingleSelection},{name:this.actionLabels.REMOVE,permission:"delete",icon:g.FI.destroy,click:()=>this.removeSubVolumeModal()}],this.subvolumeGroup$=this.subject.pipe((0,v.switchMap)(()=>this.cephfsSubvolumeGroup.get(this.fsName).pipe((0,v.catchError)(()=>(this.context.error(),(0,K.of)(null))))),(0,v.shareReplay)(1))}fetchData(){this.subject.next([])}ngOnChanges(n){n.fsName&&this.subject.next([])}updateSelection(n){this.selection=n}openModal(n=!1){this.modalService.show(ao,{fsName:this.fsName,subvolumegroupName:this.selection?.first()?.name,pools:this.pools,isEdit:n})}removeSubVolumeModal(){const n=this.selection.first().name;this.cdsModalService.show(O.D,{impact:ft.r.high,itemDescription:"subvolume group",itemNames:[n],actionDescription:"remove",submitActionObservable:()=>this.taskWrapper.wrapTaskAroundCall({task:new q.O("cephfs/subvolume/group/remove",{subvolumegroupName:n}),call:this.cephfsSubvolumeGroup.remove(this.fsName,n)})})}static{this.\u0275fac=function(t){return new(t||so)(e.\u0275\u0275directiveInject(It.W),e.\u0275\u0275directiveInject(m.Ss),e.\u0275\u0275directiveInject(He.V),e.\u0275\u0275directiveInject(c.v),e.\u0275\u0275directiveInject(B.a),e.\u0275\u0275directiveInject(He.V))}}static{this.\u0275cmp=e.\u0275\u0275defineComponent({type:so,selectors:[["cd-cephfs-subvolume-group"]],viewQuery:function(t,o){if(1&t&&(e.\u0275\u0275viewQuery(Da,7),e.\u0275\u0275viewQuery(ya,7),e.\u0275\u0275viewQuery(La,7),e.\u0275\u0275viewQuery($a,7),e.\u0275\u0275viewQuery(xa,7)),2&t){let s;e.\u0275\u0275queryRefresh(s=e.\u0275\u0275loadQuery())&&(o.quotaUsageTpl=s.first),e.\u0275\u0275queryRefresh(s=e.\u0275\u0275loadQuery())&&(o.typeTpl=s.first),e.\u0275\u0275queryRefresh(s=e.\u0275\u0275loadQuery())&&(o.modeToHumanReadableTpl=s.first),e.\u0275\u0275queryRefresh(s=e.\u0275\u0275loadQuery())&&(o.nameTpl=s.first),e.\u0275\u0275queryRefresh(s=e.\u0275\u0275loadQuery())&&(o.quotaSizeTpl=s.first)}},inputs:{fsName:"fsName",pools:"pools"},features:[e.\u0275\u0275NgOnChangesFeature],decls:8,vars:3,consts:()=>{let n;return n=$localize`:␟963d5259b684b8a4b60d3d0256f0b609c0dc7783␟8125916572042430518:Quota limit is not set`,[["quotaUsageTpl",""],["typeTpl",""],["modeToHumanReadableTpl",""],["noLimitTpl",""],[4,"ngIf"],["columnMode","flex","selectionType","single",3,"data","columns","hasDetails","fetchData","updateSelection",4,"ngIf"],["columnMode","flex","selectionType","single",3,"fetchData","updateSelection","data","columns","hasDetails"],[1,"table-actions"],["id","cephfs-subvolumegropup-actions",1,"btn-group",3,"permission","selection","tableActions"],["decimals","2",3,"total","used","title",4,"ngIf","ngIfElse"],["decimals","2",3,"total","used","title"],["ngbTooltip",n,4,"ngIf"],["ngbTooltip",n],[3,"value"],[3,"ngClass","ngbTooltip",4,"ngFor","ngForOf"],[3,"ngClass","ngbTooltip"]]},template:function(t,o){1&t&&(e.\u0275\u0275template(0,wa,2,1,"ng-container",4),e.\u0275\u0275pipe(1,"async"),e.\u0275\u0275template(2,Ba,3,2,"ng-template",null,0,e.\u0275\u0275templateRefExtractor)(4,za,1,1,"ng-template",null,1,e.\u0275\u0275templateRefExtractor)(6,ka,2,3,"ng-template",null,2,e.\u0275\u0275templateRefExtractor)),2&t&&e.\u0275\u0275property("ngIf",e.\u0275\u0275pipeBind1(1,1,o.subvolumeGroup$))},dependencies:[l.NgClass,l.NgForOf,l.NgIf,xt.o,be,We.O,at.j,G.NgbTooltip,l.AsyncPipe,pt.l,En.I]})}}function Be(i,n){1&i&&(e.\u0275\u0275elementStart(0,"span",22),e.\u0275\u0275i18n(1,5),e.\u0275\u0275elementEnd())}function Fd(i,n){1&i&&(e.\u0275\u0275elementStart(0,"span",22),e.\u0275\u0275i18n(1,6),e.\u0275\u0275elementEnd())}function vd(i,n){if(1&i&&e.\u0275\u0275template(0,Be,2,0,"span",21)(1,Fd,2,0,"span",21),2&i){e.\u0275\u0275nextContext();const t=e.\u0275\u0275reference(2),o=e.\u0275\u0275nextContext();e.\u0275\u0275property("ngIf",o.snapshotForm.showError("snapshotName",t,"required")),e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf",o.snapshotForm.showError("snapshotName",t,"notUnique"))}}function Md(i,n){1&i&&(e.\u0275\u0275elementStart(0,"option",27),e.\u0275\u0275text(1,"Default"),e.\u0275\u0275elementEnd())}function Rd(i,n){if(1&i&&(e.\u0275\u0275elementStart(0,"option",28),e.\u0275\u0275text(1),e.\u0275\u0275elementEnd()),2&i){const t=e.\u0275\u0275nextContext().$implicit;e.\u0275\u0275property("value",t),e.\u0275\u0275advance(),e.\u0275\u0275textInterpolate(t)}}function Od(i,n){if(1&i&&(e.\u0275\u0275elementContainerStart(0),e.\u0275\u0275template(1,Md,2,0,"option",25)(2,Rd,2,2,"option",26),e.\u0275\u0275elementContainerEnd()),2&i){const t=n.$implicit;e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf",""==t),e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf",""!==t)}}function Pd(i,n){if(1&i&&(e.\u0275\u0275elementStart(0,"cds-select",23),e.\u0275\u0275template(1,Od,3,2,"ng-container",24),e.\u0275\u0275elementEnd()),2&i){const t=e.\u0275\u0275nextContext(2);e.\u0275\u0275advance(),e.\u0275\u0275property("ngForOf",t.subVolumeGroups)}}function bd(i,n){if(1&i&&(e.\u0275\u0275elementStart(0,"option",28),e.\u0275\u0275text(1),e.\u0275\u0275elementEnd()),2&i){const t=n.$implicit;e.\u0275\u0275property("value",t.name),e.\u0275\u0275advance(),e.\u0275\u0275textInterpolate(t.name)}}function Nd(i,n){if(1&i){const t=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"div",13)(1,"cds-select",29),e.\u0275\u0275listener("registerOnChange",function(){e.\u0275\u0275restoreView(t);const s=e.\u0275\u0275nextContext(2);return e.\u0275\u0275resetView(s.resetValidators(s.selection.value))}),e.\u0275\u0275template(2,bd,2,2,"option",30),e.\u0275\u0275elementEnd()()}if(2&i){const t=n.ngIf;e.\u0275\u0275advance(2),e.\u0275\u0275property("ngForOf",t)}}function Id(i,n){if(1&i){const t=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementContainerStart(0),e.\u0275\u0275elementStart(1,"form",11,0)(3,"div",12)(4,"div",13)(5,"cds-text-label",14),e.\u0275\u0275i18nStart(6,3),e.\u0275\u0275element(7,"input",15),e.\u0275\u0275i18nEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275template(8,vd,2,2,"ng-template",null,1,e.\u0275\u0275templateRefExtractor),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(10,"div",13)(11,"cds-text-label",16),e.\u0275\u0275i18nStart(12,4),e.\u0275\u0275element(13,"input",17),e.\u0275\u0275i18nEnd(),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(14,"div",13),e.\u0275\u0275template(15,Pd,2,1,"cds-select",18),e.\u0275\u0275elementEnd(),e.\u0275\u0275template(16,Nd,3,1,"div",19),e.\u0275\u0275pipe(17,"async"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(18,"cd-form-button-panel",20),e.\u0275\u0275pipe(19,"titlecase"),e.\u0275\u0275pipe(20,"upperFirst"),e.\u0275\u0275listener("submitActionEvent",function(){e.\u0275\u0275restoreView(t);const s=e.\u0275\u0275nextContext();return e.\u0275\u0275resetView(s.submit())}),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementContainerEnd()}if(2&i){const t=e.\u0275\u0275reference(9),o=e.\u0275\u0275nextContext();e.\u0275\u0275advance(),e.\u0275\u0275property("formGroup",o.snapshotForm),e.\u0275\u0275advance(4),e.\u0275\u0275property("invalid",o.snapshotForm.controls.snapshotName.invalid&&o.snapshotForm.controls.snapshotName.dirty)("invalidText",t),e.\u0275\u0275advance(2),e.\u0275\u0275property("invalid",o.snapshotForm.controls.snapshotName.invalid&&o.snapshotForm.controls.snapshotName.dirty),e.\u0275\u0275advance(8),e.\u0275\u0275property("ngIf",o.subVolumeGroups),e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf",e.\u0275\u0275pipeBind1(17,9,o.subVolumes$)),e.\u0275\u0275advance(2),e.\u0275\u0275property("form",o.snapshotForm)("submitText",e.\u0275\u0275pipeBind1(19,11,o.action)+" "+e.\u0275\u0275pipeBind1(20,13,o.resource))("modalForm",!0)}}class ja extends Ce.g{constructor(n,t,o,s,d,h,I=!1){super(),this.actionLabels=n,this.taskWrapper=t,this.cephFsSubvolumeService=o,this.fsName=s,this.subVolumeName=d,this.subVolumeGroupName=h,this.isEdit=I,this.resource=$localize`snapshot`,this.action=this.actionLabels.CREATE}ngOnInit(){this.createForm(),this.subVolumes$=this.cephFsSubvolumeService.get(this.fsName,this.subVolumeGroupName,!1),this.loadingReady()}createForm(){this.snapshotForm=new Ue.$({snapshotName:new C.FormControl(st()().toISOString(!0),{validators:[C.Validators.required],asyncValidators:[pe.xQ.unique(this.cephFsSubvolumeService.snapshotExists,this.cephFsSubvolumeService,null,null,this.fsName,this.subVolumeName,this.subVolumeGroupName)]}),volumeName:new C.FormControl({value:this.fsName,disabled:!0}),subVolumeName:new C.FormControl(this.subVolumeName),subvolumeGroupName:new C.FormControl(this.subVolumeGroupName)})}onSelectionChange(n){this.subVolumeGroupName=n,this.subVolumes$=this.cephFsSubvolumeService.get(this.fsName,this.subVolumeGroupName,!1),this.subVolumes$.subscribe(t=>{this.subVolumeName=t[0].name,this.snapshotForm.get("subVolumeName").setValue(this.subVolumeName),this.resetValidators()})}resetValidators(n){this.subVolumeName=n,this.snapshotForm.get("snapshotName").setAsyncValidators(pe.xQ.unique(this.cephFsSubvolumeService.snapshotExists,this.cephFsSubvolumeService,null,null,this.fsName,this.subVolumeName,this.subVolumeGroupName)),this.snapshotForm.get("snapshotName").updateValueAndValidity()}submit(){const n=this.snapshotForm.getValue("snapshotName"),t=this.snapshotForm.getValue("subVolumeName"),o=this.snapshotForm.getValue("subvolumeGroupName"),s=this.snapshotForm.getValue("volumeName");this.taskWrapper.wrapTaskAroundCall({task:new q.O("cephfs/subvolume/snapshot/"+m.Qp.CREATE,{snapshotName:n}),call:this.cephFsSubvolumeService.createSnapshot(s,n,t,o)}).subscribe({error:()=>this.snapshotForm.setErrors({cdSubmitButton:!0}),complete:()=>this.closeModal()})}static{this.\u0275fac=function(t){return new(t||ja)(e.\u0275\u0275directiveInject(m.Ss),e.\u0275\u0275directiveInject(B.a),e.\u0275\u0275directiveInject(Qt.v),e.\u0275\u0275directiveInject("fsName",8),e.\u0275\u0275directiveInject("subVolumeName",8),e.\u0275\u0275directiveInject("subVolumeGroupName",8),e.\u0275\u0275directiveInject("isEdit",8))}}static{this.\u0275cmp=e.\u0275\u0275defineComponent({type:ja,selectors:[["cd-cephfs-subvolume-snapshots-form"]],features:[e.\u0275\u0275InheritDefinitionFeature],decls:7,vars:8,consts:()=>{let n,t,o,s,d;return n=$localize`:␟fb127ea03835b3230f0ed981c7080e2ccb879621␟3346778808274133574:${"\ufffd0\ufffd"}:INTERPOLATION: ${"\ufffd1\ufffd"}:INTERPOLATION_1:`,t=$localize`:␟3188d5e2d2a44e06dadc5989e95d6351b30df385␟631150425318217291:${"\ufffd#7\ufffd\ufffd/#7\ufffd"}:TAG_INPUT:`,o=$localize`:␟bc10faea89ab159ba5724d6f4863196d7ac6c9ab␟6253438817097773454:Volume name ${"\ufffd#13\ufffd\ufffd/#13\ufffd"}:TAG_INPUT:`,s=$localize`:␟7cbdabcece469fab89cfa687ab152bca18b97498␟1417693714872528491:This field is required.`,d=$localize`:␟5c0f4f2ebd0c9bab3358feca9e7f3a3dcc35fde1␟3953023281433618930:The snapshot already exists.`,[["formDir","ngForm"],["snapshotNameError",""],n,t,o,s,d,["size","lg",3,"overlaySelected","open"],[3,"closeSelect"],["cdsModalHeaderHeading",""],[4,"cdFormLoading"],["name","snapshotForm","novalidate","",3,"formGroup"],["cdsModalContent",""],[1,"form-item"],["label","Name","for","snapshotName","cdRequiredField","Name",3,"invalid","invalidText"],["cdsText","","type","text","placeholder","Snapshot name...","id","snapshotName","name","snapshotName","formControlName","snapshotName","autofocus","","modal-primary-focus","",3,"invalid"],["label","Volume name","for","volumeName"],["cdsText","","type","text","id","volumeName","name","volumeName","formControlName","volumeName"],["label","Subvolume group","for","subvolumeGroupName","formControlName","subvolumeGroupName","name","subvolumeGroupName","id","subvolumeGroupName",4,"ngIf"],["class","form-item",4,"ngIf"],[3,"submitActionEvent","form","submitText","modalForm"],["class","invalid-feedback",4,"ngIf"],[1,"invalid-feedback"],["label","Subvolume group","for","subvolumeGroupName","formControlName","subvolumeGroupName","name","subvolumeGroupName","id","subvolumeGroupName"],[4,"ngFor","ngForOf"],["value","",4,"ngIf"],[3,"value",4,"ngIf"],["value",""],[3,"value"],["label","Subvolume","id","subVolumeName","name","subVolumeName","formControlName","subVolumeName",3,"registerOnChange"],[3,"value",4,"ngFor","ngForOf"]]},template:function(t,o){1&t&&(e.\u0275\u0275elementStart(0,"cds-modal",7),e.\u0275\u0275listener("overlaySelected",function(){return o.closeModal()}),e.\u0275\u0275elementStart(1,"cds-modal-header",8),e.\u0275\u0275listener("closeSelect",function(){return o.closeModal()}),e.\u0275\u0275elementStart(2,"h3",9),e.\u0275\u0275i18n(3,2),e.\u0275\u0275pipe(4,"titlecase"),e.\u0275\u0275pipe(5,"upperFirst"),e.\u0275\u0275elementEnd()(),e.\u0275\u0275template(6,Id,21,15,"ng-container",10),e.\u0275\u0275elementEnd()),2&t&&(e.\u0275\u0275property("open",o.open),e.\u0275\u0275advance(5),e.\u0275\u0275i18nExp(e.\u0275\u0275pipeBind1(4,4,o.action))(e.\u0275\u0275pipeBind1(5,6,o.resource)),e.\u0275\u0275i18nApply(3),e.\u0275\u0275advance(),e.\u0275\u0275property("cdFormLoading",o.loading))},dependencies:[l.NgForOf,l.NgIf,oe.e,ct.B,tt.G,Ge.S,ze.E,ut.P,C.\u0275NgNoValidate,C.NgSelectOption,C.\u0275NgSelectMultipleOption,C.DefaultValueAccessor,C.NgControlStatus,C.NgControlStatusGroup,C.FormGroupDirective,C.FormControlName,D.TextInputLabelComponent,D.TextInput,D.Select,D.Option,D.Modal,D.ModalHeader,D.ModalContent,D.ModalHeaderHeading,l.AsyncPipe,l.TitleCasePipe,Pe.r]})}}var Ka,i,qr,el,ro,tl,Rl=r(23589);function Ad(i,n){1&i&&(e.\u0275\u0275elementContainerStart(0),e.\u0275\u0275elementStart(1,"cd-loading-panel")(2,"span"),e.\u0275\u0275i18n(3,1),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementContainerEnd())}function Dd(i,n){if(1&i){const t=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"div",10)(1,"cd-vertical-navigation",11),e.\u0275\u0275listener("emitActiveItem",function(s){e.\u0275\u0275restoreView(t);const d=e.\u0275\u0275nextContext(2);return e.\u0275\u0275resetView(d.selectSubVolume(s))}),e.\u0275\u0275elementEnd()()}if(2&i){const t=e.\u0275\u0275nextContext(2);e.\u0275\u0275advance(),e.\u0275\u0275property("items",t.subVolumesList)}}function yd(i,n){if(1&i){const t=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"div",12)(1,"cd-table",13),e.\u0275\u0275pipe(2,"async"),e.\u0275\u0275listener("fetchData",function(){e.\u0275\u0275restoreView(t);const s=e.\u0275\u0275nextContext(2);return e.\u0275\u0275resetView(s.fetchData())})("updateSelection",function(s){e.\u0275\u0275restoreView(t);const d=e.\u0275\u0275nextContext(2);return e.\u0275\u0275resetView(d.updateSelection(s))}),e.\u0275\u0275elementStart(3,"div",14),e.\u0275\u0275element(4,"cd-table-actions",15),e.\u0275\u0275elementEnd()()()}if(2&i){const t=e.\u0275\u0275nextContext(2);e.\u0275\u0275advance(),e.\u0275\u0275property("data",e.\u0275\u0275pipeBind1(2,6,t.snapshots$))("columns",t.columns)("hasDetails",!1),e.\u0275\u0275advance(3),e.\u0275\u0275property("permission",t.permissions.cephfs)("selection",t.selection)("tableActions",t.tableActions)}}function Ld(i,n){if(1&i){const t=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"div",5)(1,"div",6)(2,"cd-vertical-navigation",7),e.\u0275\u0275listener("emitActiveItem",function(s){e.\u0275\u0275restoreView(t);const d=e.\u0275\u0275nextContext();return e.\u0275\u0275resetView(d.selectSubVolumeGroup(s))}),e.\u0275\u0275elementEnd()(),e.\u0275\u0275template(3,Dd,2,1,"div",8),e.\u0275\u0275pipe(4,"async"),e.\u0275\u0275template(5,yd,5,8,"div",9),e.\u0275\u0275elementEnd()}if(2&i){const t=e.\u0275\u0275nextContext();e.\u0275\u0275advance(2),e.\u0275\u0275property("items",t.subvolumeGroupList),e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf",e.\u0275\u0275pipeBind1(4,3,t.subVolumes$)),e.\u0275\u0275advance(2),e.\u0275\u0275property("ngIf",t.isSubVolumesAvailable)}}function $d(i,n){1&i&&(e.\u0275\u0275elementStart(0,"cd-alert-panel",17),e.\u0275\u0275i18n(1,2),e.\u0275\u0275elementEnd())}function xd(i,n){if(1&i&&e.\u0275\u0275template(0,$d,2,0,"cd-alert-panel",16),2&i){const t=e.\u0275\u0275nextContext();e.\u0275\u0275property("ngIf",!t.isLoading)}}class Wa{constructor(n,t,o,s,d,h,I,$){this.cephfsSubvolumeGroupService=n,this.cephfsSubvolumeService=t,this.actionLabels=o,this.modalService=s,this.authStorageService=d,this.cdDatePipe=h,this.taskWrapper=I,this.notificationService=$,this.columns=[],this.selection=new N.y,this.snapshotSubject=new K.BehaviorSubject([]),this.subVolumeSubject=new K.BehaviorSubject([]),this.subvolumeGroupList=[],this.activeGroupName="",this.activeSubVolumeName="",this.isSubVolumesAvailable=!1,this.isLoading=!0,this.observables=[],this.allGroups=[],this.permissions=this.authStorageService.getPermissions()}ngOnInit(){this.columns=[{name:$localize`Name`,prop:"name",flexGrow:1},{name:$localize`Created`,prop:"info.created_at",flexGrow:1,pipe:this.cdDatePipe},{name:$localize`Pending Clones`,prop:"info.has_pending_clones",flexGrow:.5,cellTransformation:b.x.badge,customTemplateConfig:{map:{no:{class:"badge-success"},yes:{class:"badge-info"}}}}],this.tableActions=[{name:this.actionLabels.CREATE,permission:"create",icon:g.FI.add,click:()=>this.openModal()},{name:this.actionLabels.CLONE,permission:"create",icon:g.FI.clone,disable:()=>!this.selection.hasSingleSelection,click:()=>this.cloneModal()},{name:this.actionLabels.REMOVE,permission:"delete",icon:g.FI.destroy,disable:()=>!this.selection.hasSingleSelection,click:()=>this.deleteSnapshot()}],this.cephfsSubvolumeGroupService.get(this.fsName).pipe((0,v.switchMap)(n=>{n.unshift({name:""}),this.allGroups=Array.from(n).map(o=>({value:o.name,text:""===o.name?L.H:o.name}));const t=n.map(o=>this.cephfsSubvolumeService.existsInFs(this.fsName,o.name).pipe((0,v.switchMap)(s=>(s&&this.subvolumeGroupList.push(o.name),(0,K.of)(s)))));return(0,K.forkJoin)(t)})).subscribe(()=>{this.subvolumeGroupList.length&&(this.isSubVolumesAvailable=!0),this.isLoading=!1})}ngOnChanges(n){n.fsName&&this.subVolumeSubject.next([])}selectSubVolumeGroup(n){this.activeGroupName=n,this.getSubVolumes()}selectSubVolume(n){this.activeSubVolumeName=n,this.getSubVolumesSnapshot()}getSubVolumes(){this.subVolumes$=this.subVolumeSubject.pipe((0,v.switchMap)(()=>this.cephfsSubvolumeService.get(this.fsName,this.activeGroupName,!1).pipe((0,v.tap)(n=>{this.subVolumesList=n.map(t=>t.name),this.activeSubVolumeName=n[0].name,this.getSubVolumesSnapshot()}))))}getSubVolumesSnapshot(){this.snapshots$=this.snapshotSubject.pipe((0,v.switchMap)(()=>this.cephfsSubvolumeService.getSnapshots(this.fsName,this.activeSubVolumeName,this.activeGroupName).pipe((0,v.catchError)(()=>(this.context.error(),(0,K.of)(null))))),(0,v.shareReplay)(1))}fetchData(){this.snapshotSubject.next([])}openModal(n=!1){this.modalService.show(ja,{fsName:this.fsName,subVolumeName:this.activeSubVolumeName,subVolumeGroupName:this.activeGroupName,subVolumeGroups:this.subvolumeGroupList,isEdit:n})}updateSelection(n){this.selection=n}deleteSnapshot(){const n=this.selection.first().name,t=this.activeSubVolumeName,o=this.activeGroupName,s=this.fsName;this.modalRef=this.modalService.show(O.D,{impact:ft.r.high,actionDescription:"remove",itemNames:[n],itemDescription:"Snapshot",submitAction:()=>this.taskWrapper.wrapTaskAroundCall({task:new q.O("cephfs/subvolume/snapshot/delete",{fsName:s,subVolumeName:t,subVolumeGroupName:o,snapshotName:n}),call:this.cephfsSubvolumeService.deleteSnapshot(s,t,n,o)}).subscribe({complete:()=>this.modalService.dismissAll(),error:()=>this.modalRef.componentInstance.stopLoadingSpinner()})})}cloneModal(){const n=`clone_${st()().toISOString(!0)}`;this.modalService.show(Kt.b,{titleText:$localize`Create clone`,fields:[{type:"text",name:"cloneName",value:n,label:$localize`Name`,validators:[C.Validators.required,C.Validators.pattern(/^[.A-Za-z0-9_+:-]+$/)],asyncValidators:[pe.xQ.unique(this.cephfsSubvolumeService.exists,this.cephfsSubvolumeService,null,null,this.fsName,this.activeGroupName)],required:!0,errors:{pattern:$localize`Allowed characters are letters, numbers, '.', '-', '+', ':' or '_'`,notUnique:$localize`A subvolume or clone with this name already exists.`}},{type:"select",name:"groupName",value:this.activeGroupName,label:$localize`Group name`,valueChangeListener:!0,dependsOn:"cloneName",typeConfig:{options:this.allGroups}}],submitButtonText:$localize`Create Clone`,updateAsyncValidators:t=>pe.xQ.unique(this.cephfsSubvolumeService.exists,this.cephfsSubvolumeService,null,null,this.fsName,t),onSubmit:t=>{this.cephfsSubvolumeService.createSnapshotClone(this.fsName,this.activeSubVolumeName,this.selection.first().name,t.cloneName,this.activeGroupName,t.groupName).subscribe(()=>this.notificationService.show(Ae._.success,$localize`Created Clone "${t.cloneName}" successfully.`))}})}static{this.\u0275fac=function(t){return new(t||Wa)(e.\u0275\u0275directiveInject(It.W),e.\u0275\u0275directiveInject(Qt.v),e.\u0275\u0275directiveInject(m.Ss),e.\u0275\u0275directiveInject(He.V),e.\u0275\u0275directiveInject(c.v),e.\u0275\u0275directiveInject(Ot.Q),e.\u0275\u0275directiveInject(B.a),e.\u0275\u0275directiveInject(Q.J))}}static{this.\u0275cmp=e.\u0275\u0275defineComponent({type:Wa,selectors:[["cd-cephfs-subvolume-snapshots-list"]],inputs:{fsName:"fsName"},features:[e.\u0275\u0275NgOnChangesFeature],decls:4,vars:3,consts:()=>{let n,t;return n=$localize`:␟a20570a85b5462a9e3336dd597c4669bce0b37a0␟7195373565084659071:Loading snapshots...`,t=$localize`:␟8158426fce2d88cf1f1476c13f97b0add7a49c12␟7273995873413204970:No subvolumes are present. Please create subvolumes to manage snapshots.`,[["noGroupsTpl",""],n,t,[4,"ngIf"],["class","row",4,"ngIf","ngIfElse"],[1,"row"],[1,"col-sm-2"],["title","Groups","inputIdentifier","group-filter",3,"emitActiveItem","items"],["class","col-sm-2 vertical-line",4,"ngIf"],["class","col-8 vertical-line",4,"ngIf"],[1,"col-sm-2","vertical-line"],["title","Subvolumes","inputIdentifier","subvol-filter",3,"emitActiveItem","items"],[1,"col-8","vertical-line"],["columnMode","flex","selectionType","single",3,"fetchData","updateSelection","data","columns","hasDetails"],[1,"table-actions"],["id","cephfs-snapshot-actions",1,"btn-group",3,"permission","selection","tableActions"],["type","info",4,"ngIf"],["type","info"]]},template:function(t,o){if(1&t&&e.\u0275\u0275template(0,Ad,4,0,"ng-container",3)(1,Ld,6,5,"div",4)(2,xd,1,1,"ng-template",null,0,e.\u0275\u0275templateRefExtractor),2&t){const s=e.\u0275\u0275reference(3);e.\u0275\u0275property("ngIf",o.isLoading),e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf",o.isSubVolumesAvailable)("ngIfElse",s)}},dependencies:[l.NgIf,Rl.e,nt.m,Ne,We.O,at.j,l.AsyncPipe]})}}(i=Ka||(Ka={})).Hourly="h",i.Daily="d",i.Weekly="w",i.Monthly="M",i.Yearly="Y",function(i){i.h="hour",i.d="day",i.w="week",i.M="month",i.Y="year"}(qr||(qr={})),function(i){i.h="hours",i.d="days",i.w="weeks",i.M="months",i.Y="years"}(el||(el={})),function(i){i.Hourly="h",i.Daily="d",i.Weekly="w",i.Monthly="M",i.Yearly="y",i["lastest snapshots"]="n"}(ro||(ro={})),function(i){i.h="Hourly",i.d="Daily",i.w="Weekly",i.M="Monthly",i.m="Minutely",i.y="Yearly",i.n="lastest snapshots"}(tl||(tl={}));class bo{constructor(n){this.http=n,this.baseURL="api/cephfs"}create(n){return this.http.post(`${this.baseURL}/snapshot/schedule`,n,{observe:"response"})}update({fs:n,path:t,...o}){return this.http.put(`${this.baseURL}/snapshot/schedule/${n}/${encodeURIComponent(t)}`,o,{observe:"response"})}activate({fs:n,path:t,...o}){return this.http.post(`${this.baseURL}/snapshot/schedule/${n}/${encodeURIComponent(t)}/activate`,o,{observe:"response"})}deactivate({fs:n,path:t,...o}){return this.http.post(`${this.baseURL}/snapshot/schedule/${n}/${encodeURIComponent(t)}/deactivate`,o,{observe:"response"})}delete({fs:n,path:t,schedule:o,start:s,retentionPolicy:d,subvol:h,group:I}){let $=`${this.baseURL}/snapshot/schedule/${n}/${encodeURIComponent(t)}/delete_snapshot?schedule=${o}&start=${encodeURIComponent(s)}`;return d&&($+=`&retention_policy=${d}`),h&&I&&($+=`&subvol=${encodeURIComponent(h)}&group=${encodeURIComponent(I)}`),this.http.delete($)}checkScheduleExists(n,t,o,s,d=!1){return this.getSnapshotScheduleList(n,t,!1).pipe((0,v.map)(h=>h.filter($=>d?$.path.startsWith(n):$.path===n).findIndex($=>$.schedule===`${o}${s}`)>-1),(0,v.catchError)(()=>(0,K.of)(!1)))}checkRetentionPolicyExists(n,t,o,s=[],d=!1){return this.getSnapshotSchedule(n,t,!1).pipe((0,v.map)(h=>{let I=-1,$=!1;const w=h.findIndex(J=>d?J.path.startsWith(n):J.path===n),X=o?.length?(0,F.intersection)(Object.keys(h?.[w]?.retention).filter(J=>!s.includes(J)),o):[];return $=!!X?.length,X?.forEach(J=>I=o.indexOf(J)),{exists:$,errorIndex:I}}),(0,v.catchError)(()=>(0,K.of)({exists:!1,errorIndex:-1})))}getSnapshotSchedule(n,t,o=!0){return this.http.get(`${this.baseURL}/snapshot/schedule/${t}?path=${n}&recursive=${o}`).pipe((0,v.catchError)(()=>(0,K.of)([])))}getSnapshotScheduleList(n,t,o=!0){return this.getSnapshotSchedule(n,t,o).pipe((0,v.map)(s=>(0,F.uniqWith)(s.map(d=>({...d,scheduleCopy:this.parseScheduleCopy(d.schedule),status:d.active?"Active":"Inactive",subvol:d?.subvol,retentionCopy:this.parseRetentionCopy(d?.retention),retention:Object.values(d?.retention||[])?.length?Object.entries(d.retention)?.map?.(([h,I])=>`${I}${h}`).join(" "):"-"})),F.isEqual)))}parseScheduleCopy(n){const t=n.split(""),o=Number(t.filter(h=>!isNaN(Number(h))).join("")),s=t[t.length-1],d=o>1?el[s]:qr[s];return $localize`Every ${o>1?o+" ":""}${d}`}parseRetentionCopy(n){return n?Object.entries(n).map(([t,o])=>$localize`${o} ${tl[t]}`.toLocaleLowerCase()):["-"]}static{this.\u0275fac=function(t){return new(t||bo)(e.\u0275\u0275inject(T.HttpClient))}}static{this.\u0275prov=e.\u0275\u0275defineInjectable({token:bo,factory:bo.\u0275fac,providedIn:"root"})}}var Ln=r(20009),Ol=r(41861);const Ud=()=>({lg:8}),wd=()=>({lg:7}),Gd=()=>({lg:1});function Hd(i,n){1&i&&(e.\u0275\u0275i18nStart(0,6,1),e.\u0275\u0275elementContainer(1),e.\u0275\u0275i18nEnd())}function Vd(i,n){1&i&&(e.\u0275\u0275elementStart(0,"span",35),e.\u0275\u0275i18n(1,8),e.\u0275\u0275elementEnd())}function Bd(i,n){1&i&&(e.\u0275\u0275elementStart(0,"span",35),e.\u0275\u0275i18n(1,9),e.\u0275\u0275elementEnd())}function zd(i,n){if(1&i&&e.\u0275\u0275template(0,Vd,2,0,"span",26)(1,Bd,2,0,"span",26),2&i){e.\u0275\u0275nextContext();const t=e.\u0275\u0275reference(3),o=e.\u0275\u0275nextContext();e.\u0275\u0275property("ngIf",o.snapScheduleForm.showError("directory",t,"required")),e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf",o.snapScheduleForm.showError("directory",t,"notUnique"))}}function Xd(i,n){1&i&&(e.\u0275\u0275elementStart(0,"span",35),e.\u0275\u0275i18n(1,10),e.\u0275\u0275elementEnd())}function kd(i,n){if(1&i&&(e.\u0275\u0275elementStart(0,"option",38),e.\u0275\u0275text(1),e.\u0275\u0275elementEnd()),2&i){const t=n.$implicit;e.\u0275\u0275property("value",t[1]),e.\u0275\u0275advance(),e.\u0275\u0275textInterpolate1("",t[0]," ")}}function jd(i,n){if(1&i&&(e.\u0275\u0275elementStart(0,"cds-select",36),e.\u0275\u0275template(1,kd,2,2,"option",37),e.\u0275\u0275elementEnd()),2&i){e.\u0275\u0275nextContext();const t=e.\u0275\u0275reference(19),o=e.\u0275\u0275nextContext();e.\u0275\u0275property("invalid",!o.snapScheduleForm.controls.repeatFrequency.valid&&o.snapScheduleForm.controls.repeatFrequency.dirty)("invalidText",t),e.\u0275\u0275advance(),e.\u0275\u0275property("ngForOf",o.repeatFrequencies)}}function Wd(i,n){1&i&&(e.\u0275\u0275elementStart(0,"span",35),e.\u0275\u0275i18n(1,11),e.\u0275\u0275elementEnd())}function Kd(i,n){if(1&i&&e.\u0275\u0275template(0,Wd,2,0,"span",26),2&i){e.\u0275\u0275nextContext();const t=e.\u0275\u0275reference(3),o=e.\u0275\u0275nextContext();e.\u0275\u0275property("ngIf",o.snapScheduleForm.showError("repeatFrequency",t,"notUnique"))}}function Qd(i,n){1&i&&(e.\u0275\u0275elementStart(0,"span",35),e.\u0275\u0275i18n(1,12),e.\u0275\u0275elementEnd())}function Yd(i,n){1&i&&(e.\u0275\u0275elementStart(0,"span",35),e.\u0275\u0275i18n(1,13),e.\u0275\u0275elementEnd())}function Jd(i,n){if(1&i&&e.\u0275\u0275template(0,Qd,2,0,"span",26)(1,Yd,2,0,"span",26),2&i){e.\u0275\u0275nextContext();const t=e.\u0275\u0275reference(3),o=e.\u0275\u0275nextContext();e.\u0275\u0275property("ngIf",o.snapScheduleForm.showError("repeatInterval",t,"required")),e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf",o.snapScheduleForm.showError("repeatInterval",t,"min"))}}function Zd(i,n){if(1&i&&(e.\u0275\u0275elementStart(0,"option",38),e.\u0275\u0275text(1),e.\u0275\u0275elementEnd()),2&i){const t=n.$implicit;e.\u0275\u0275property("value",t[1]),e.\u0275\u0275advance(),e.\u0275\u0275textInterpolate(t[0])}}function qd(i,n){if(1&i&&(e.\u0275\u0275elementStart(0,"cds-select",47),e.\u0275\u0275template(1,Zd,2,2,"option",37),e.\u0275\u0275elementEnd()),2&i){const t=e.\u0275\u0275nextContext(3);e.\u0275\u0275advance(),e.\u0275\u0275property("ngForOf",t.retentionFrequencies)}}function eu(i,n){1&i&&(e.\u0275\u0275elementStart(0,"span",35),e.\u0275\u0275i18n(1,14),e.\u0275\u0275elementEnd())}function tu(i,n){if(1&i&&e.\u0275\u0275template(0,eu,2,0,"span",26),2&i){const t=e.\u0275\u0275nextContext().index,o=e.\u0275\u0275nextContext(2);e.\u0275\u0275property("ngIf",o.snapScheduleForm.controls.retentionPolicies.controls[t].invalid)}}function nu(i,n){if(1&i){const t=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementContainerStart(0,39)(1,40),e.\u0275\u0275elementStart(2,"div",27)(3,"div",41),e.\u0275\u0275element(4,"cds-number",42),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(5,"div",41),e.\u0275\u0275template(6,qd,2,1,"cds-select",43),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(7,"div",44)(8,"cds-icon-button",45),e.\u0275\u0275listener("click",function(){const s=e.\u0275\u0275restoreView(t).index,d=e.\u0275\u0275nextContext(2);return e.\u0275\u0275resetView(d.removeRetentionPolicy(s))}),e.\u0275\u0275namespaceSVG(),e.\u0275\u0275element(9,"svg",46),e.\u0275\u0275elementEnd()()(),e.\u0275\u0275template(10,tu,1,1,"ng-template",null,4,e.\u0275\u0275templateRefExtractor),e.\u0275\u0275elementContainerEnd()()}if(2&i){const t=n.index,o=e.\u0275\u0275reference(11),s=e.\u0275\u0275nextContext(2);e.\u0275\u0275advance(),e.\u0275\u0275property("formGroupName",t),e.\u0275\u0275advance(2),e.\u0275\u0275property("columnNumbers",e.\u0275\u0275pureFunction0(12,Ud)),e.\u0275\u0275advance(),e.\u0275\u0275property("id","retentionInterval"+t)("name","retentionInterval"+t)("formControlName","retentionInterval")("label","Retention policy")("min",1)("invalid",s.snapScheduleForm.controls.retentionPolicies.controls[t].invalid&&s.snapScheduleForm.controls.retentionPolicies.dirty)("invalidText",o),e.\u0275\u0275advance(),e.\u0275\u0275property("columnNumbers",e.\u0275\u0275pureFunction0(13,wd)),e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf",s.retentionFrequencies),e.\u0275\u0275advance(),e.\u0275\u0275property("columnNumbers",e.\u0275\u0275pureFunction0(14,Gd))}}function ou(i,n){if(1&i){const t=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementContainerStart(0),e.\u0275\u0275elementStart(1,"div",19)(2,"form",20,0)(4,"div",21)(5,"cds-text-label",22),e.\u0275\u0275i18nStart(6,6),e.\u0275\u0275template(7,Hd,2,0,"ng-container",23),e.\u0275\u0275element(8,"input",24),e.\u0275\u0275i18nEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275template(9,zd,2,2,"ng-template",null,1,e.\u0275\u0275templateRefExtractor),e.\u0275\u0275elementEnd(),e.\u0275\u0275element(11,"cd-date-time-picker",25),e.\u0275\u0275template(12,Xd,2,0,"span",26),e.\u0275\u0275elementStart(13,"div",27)(14,"div",28),e.\u0275\u0275element(15,"cds-number",29),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(16,"div",28),e.\u0275\u0275template(17,jd,2,3,"cds-select",30)(18,Kd,1,1,"ng-template",null,2,e.\u0275\u0275templateRefExtractor)(20,Jd,2,2,"ng-template",null,3,e.\u0275\u0275templateRefExtractor),e.\u0275\u0275elementEnd()(),e.\u0275\u0275template(22,nu,12,15,"ng-container",31),e.\u0275\u0275elementStart(23,"div",21)(24,"button",32),e.\u0275\u0275listener("click",function(){e.\u0275\u0275restoreView(t);const s=e.\u0275\u0275nextContext();return e.\u0275\u0275resetView(s.addRetentionPolicy())}),e.\u0275\u0275i18nStart(25,7),e.\u0275\u0275namespaceSVG(),e.\u0275\u0275element(26,"svg",33),e.\u0275\u0275i18nEnd(),e.\u0275\u0275elementEnd()()()(),e.\u0275\u0275namespaceHTML(),e.\u0275\u0275elementStart(27,"cd-form-button-panel",34),e.\u0275\u0275pipe(28,"titlecase"),e.\u0275\u0275pipe(29,"upperFirst"),e.\u0275\u0275listener("submitActionEvent",function(){e.\u0275\u0275restoreView(t);const s=e.\u0275\u0275nextContext();return e.\u0275\u0275resetView(s.submit())}),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementContainerEnd()}if(2&i){const t=e.\u0275\u0275reference(3),o=e.\u0275\u0275reference(10),s=e.\u0275\u0275reference(21),d=e.\u0275\u0275nextContext();e.\u0275\u0275advance(2),e.\u0275\u0275property("formGroup",d.snapScheduleForm),e.\u0275\u0275advance(3),e.\u0275\u0275property("invalid",d.snapScheduleForm.controls.directory.invalid&&d.snapScheduleForm.controls.directory.dirty)("invalidText",o)("skeleton",d.directoryStore.isLoading),e.\u0275\u0275advance(2),e.\u0275\u0275property("ngIf",!d.directoryStore.isLoading),e.\u0275\u0275advance(),e.\u0275\u0275property("ngbTypeahead",d.search)("invalid",d.snapScheduleForm.controls.directory.invalid&&d.snapScheduleForm.controls.directory.dirty)("placeholder",d.directoryStore.isLoading?"":"Directory path")("skeleton",d.directoryStore.isLoading),e.\u0275\u0275advance(3),e.\u0275\u0275property("control",d.snapScheduleForm.get("startDate"))("disabled",d.isEdit),e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf",d.snapScheduleForm.showError("startDate",t,"required")),e.\u0275\u0275advance(3),e.\u0275\u0275property("id","repeatInterval")("name","repeatInterval")("formControlName","repeatInterval")("label","Schedule")("min",1)("invalid",!d.snapScheduleForm.controls.repeatInterval.valid&&d.snapScheduleForm.controls.repeatInterval.dirty)("invalidText",s),e.\u0275\u0275advance(2),e.\u0275\u0275property("ngIf",d.repeatFrequencies),e.\u0275\u0275advance(5),e.\u0275\u0275property("ngForOf",d.retentionPolicies.controls),e.\u0275\u0275advance(5),e.\u0275\u0275property("form",d.snapScheduleForm)("submitText",e.\u0275\u0275pipeBind1(28,24,d.action)+" "+e.\u0275\u0275pipeBind1(29,26,d.resource))("modalForm",!0)}}class Qa extends Ce.g{constructor(n,t,o,s,d,h,I,$,w,X,J,re,de,Me=!1){super(),this.actionLabels=n,this.snapScheduleService=t,this.taskWrapper=o,this.cd=s,this.directoryStore=d,this.subvolumeService=h,this.fsName=I,this.id=$,this.path=w,this.schedule=X,this.retention=J,this.start=re,this.status=de,this.isEdit=Me,this.icons=g.FI,this.repeatFrequencies=Object.entries(Ka),this.retentionFrequencies=Object.entries(ro),this.retentionPoliciesToRemove=[],this.isDefaultSubvolumeGroup=!1,this.isSubvolume=!1,this.search=Se=>Se.pipe((0,v.debounceTime)(300),(0,v.distinctUntilChanged)(),(0,v.switchMap)($e=>this.directoryStore.search($e,this.id).pipe((0,v.catchError)(()=>(0,K.of)([]))))),this.resource=$localize`Snapshot schedule`;const ve=new Date;this.minDate=`${ve.getUTCFullYear()}-${ve.getUTCMonth()+1}-${ve.getUTCDate()}`}ngOnInit(){this.action=this.actionLabels.CREATE,this.directoryStore.loadDirectories(this.id,"/",3),this.createForm(),this.isEdit?this.populateForm():this.loadingReady(),this.snapScheduleForm.get("directory").valueChanges.pipe((0,v.filter)(()=>!this.isEdit),(0,v.debounceTime)(300),(0,v.tap)(()=>{this.isSubvolume=!1}),(0,v.tap)(n=>{this.subvolumeGroup=n?.split?.("/")?.[2],this.subvolume=n?.split?.("/")?.[3]}),(0,v.filter)(()=>!!this.subvolume&&!!this.subvolumeGroup),(0,v.tap)(()=>{this.isSubvolume=!!this.subvolume&&!!this.subvolumeGroup,this.snapScheduleForm.get("repeatFrequency").setErrors(null)}),(0,v.mergeMap)(()=>this.subvolumeService.exists(this.subvolume,this.fsName,this.subvolumeGroup===L.H?"":this.subvolumeGroup).pipe((0,v.tap)(n=>this.isSubvolume=n),(0,v.tap)(n=>this.isDefaultSubvolumeGroup=n&&this.subvolumeGroup===L.H))),(0,v.filter)(n=>n),(0,v.mergeMap)(()=>this.subvolumeService.info(this.fsName,this.subvolume,this.subvolumeGroup===L.H?"":this.subvolumeGroup).pipe((0,v.pluck)("path"))),(0,v.filter)(n=>n!==this.snapScheduleForm.get("directory").value)).subscribe({next:n=>this.snapScheduleForm.get("directory").setValue(n)})}get retentionPolicies(){return this.snapScheduleForm.get("retentionPolicies")}populateForm(){this.action=this.actionLabels.EDIT,this.snapScheduleService.getSnapshotSchedule(this.path,this.fsName,!1).subscribe({next:n=>{const t=n.find(d=>d.path===this.path),o=st()().utcOffset(),s=st().parseZone(t.start).utc().utcOffset(o).local().format("YYYY-MM-DD HH:mm:ss");this.snapScheduleForm.get("directory").disable(),this.snapScheduleForm.get("directory").setValue(t.path),this.snapScheduleForm.get("startDate").disable(),this.snapScheduleForm.get("startDate").setValue(s),this.snapScheduleForm.get("repeatInterval").disable(),this.snapScheduleForm.get("repeatInterval").setValue(t.schedule.split("")?.[0]),this.snapScheduleForm.get("repeatFrequency").disable(),this.snapScheduleForm.get("repeatFrequency").setValue(t.schedule.split("")?.[1]),t.retention&&Object.entries(t.retention).forEach(([d,h],I)=>{const $=Object.keys(ro)[Object.values(ro).indexOf(d)];this.retentionPolicies.push(new C.FormGroup({retentionInterval:new C.FormControl(h),retentionFrequency:new C.FormControl(ro[$])})),this.retentionPolicies.controls[I].get("retentionInterval").disable(),this.retentionPolicies.controls[I].get("retentionFrequency").disable()}),this.loadingReady()}})}createForm(){this.snapScheduleForm=new Ue.$({directory:new C.FormControl(void 0,{updateOn:"blur",validators:[C.Validators.required]}),startDate:new C.FormControl(this.minDate,{validators:[C.Validators.required]}),repeatInterval:new C.FormControl(1,{validators:[C.Validators.required,C.Validators.min(1)]}),repeatFrequency:new C.FormControl(Ka.Daily,{validators:[C.Validators.required]}),retentionPolicies:new C.FormArray([])},{asyncValidators:[this.validateSchedule(),this.validateRetention()]})}addRetentionPolicy(){this.retentionPolicies.push(new C.FormGroup({retentionInterval:new C.FormControl(1),retentionFrequency:new C.FormControl(ro.Daily)})),this.cd.detectChanges()}removeRetentionPolicy(n){if(this.isEdit&&this.retentionPolicies.at(n).disabled){const t=this.retentionPolicies.at(n).value;this.retentionPoliciesToRemove.push(t)}this.retentionPolicies.removeAt(n),this.retentionPolicies.controls.forEach(t=>t.get("retentionFrequency").updateValueAndValidity()),this.cd.detectChanges()}convertNumberToString(n,t=2,o="0"){return(0,F.padStart)(n.toString(),t,o)}parseDatetime(n,t){return n&&t?`${n.year}-${this.convertNumberToString(n.month)}-${this.convertNumberToString(n.day)}T${this.convertNumberToString(t.hour)}:${this.convertNumberToString(t.minute)}:${this.convertNumberToString(t.second)}`:null}parseSchedule(n,t){return`${n}${t}`}parseRetentionPolicies(n){return n?.filter(t=>null!==t?.retentionInterval&&null!==t?.retentionFrequency)?.map?.(t=>`${t.retentionInterval}-${t.retentionFrequency}`).join("|")}submit(){this.validateSchedule()(this.snapScheduleForm).subscribe({next:()=>{if(this.snapScheduleForm.invalid)return void this.snapScheduleForm.setErrors({cdSubmitButton:!0});const n=this.snapScheduleForm.value;if(this.isEdit){const t=this.snapScheduleForm.get("retentionPolicies").controls?.filter(s=>!s.get("retentionInterval").disabled&&!s.get("retentionFrequency").disabled).map(s=>({retentionInterval:s.get("retentionInterval").value,retentionFrequency:s.get("retentionFrequency").value})),o={fs:this.fsName,path:this.path,subvol:this.subvol,group:this.group,retention_to_add:this.parseRetentionPolicies(t)||null,retention_to_remove:this.parseRetentionPolicies(this.retentionPoliciesToRemove)||null};this.taskWrapper.wrapTaskAroundCall({task:new q.O("cephfs/snapshot/schedule/"+m.Qp.EDIT,{path:this.path}),call:this.snapScheduleService.update(o)}).subscribe({error:()=>{this.snapScheduleForm.setErrors({cdSubmitButton:!0})},complete:()=>{this.closeModal()}})}else{const t={fs:this.fsName,path:n.directory,snap_schedule:this.parseSchedule(n?.repeatInterval,n?.repeatFrequency),start:new Date(n?.startDate.replace(/\//g,"-").replace(" ","T")).toISOString().slice(0,19)},o=this.parseRetentionPolicies(n?.retentionPolicies);o&&(t.retention_policy=o),this.isSubvolume&&(t.subvol=this.subvolume),this.isSubvolume&&!this.isDefaultSubvolumeGroup&&(t.group=this.subvolumeGroup),this.taskWrapper.wrapTaskAroundCall({task:new q.O("cephfs/snapshot/schedule/"+m.Qp.CREATE,{path:t.path}),call:this.snapScheduleService.create(t)}).subscribe({error:()=>{this.snapScheduleForm.setErrors({cdSubmitButton:!0})},complete:()=>{this.closeModal()}})}}})}validateSchedule(){return n=>{const t=n.get("directory"),o=n.get("repeatFrequency"),s=n.get("repeatInterval");return this.isEdit?(0,K.of)(null):(0,K.timer)(300).pipe((0,v.switchMap)(()=>this.snapScheduleService.checkScheduleExists(t?.value,this.fsName,s?.value,o?.value,this.isSubvolume).pipe((0,v.map)(d=>(d?(o?.markAsDirty(),o?.setErrors({notUnique:!0},{emitEvent:!0})):o?.setErrors(null),null)))))}}getFormArrayItem(n,t,o,s){return n.get(t)?.controls?.[s]?.get?.(o)}validateRetention(){return n=>(0,K.timer)(300).pipe((0,v.switchMap)(()=>{const t=n.get("retentionPolicies").controls?.map(o=>o.get("retentionFrequency").value);return(0,F.uniq)(t)?.length!==t?.length?(this.getFormArrayItem(n,"retentionPolicies","retentionFrequency",t.length-1)?.setErrors?.({notUnique:!0}),null):this.snapScheduleService.checkRetentionPolicyExists(n.get("directory").value,this.fsName,t,this.retentionPoliciesToRemove?.map?.(o=>o.retentionFrequency)||[],!!this.subvolume).pipe((0,v.map)(({exists:o,errorIndex:s})=>(o?this.getFormArrayItem(n,"retentionPolicies","retentionFrequency",s)?.setErrors?.({notUnique:!0}):n.get("retentionPolicies").controls?.forEach?.((d,h)=>{this.getFormArrayItem(n,"retentionPolicies","retentionFrequency",h)?.setErrors?.(null)}),null)))}))}static{this.\u0275fac=function(t){return new(t||Qa)(e.\u0275\u0275directiveInject(m.Ss),e.\u0275\u0275directiveInject(bo),e.\u0275\u0275directiveInject(B.a),e.\u0275\u0275directiveInject(e.ChangeDetectorRef),e.\u0275\u0275directiveInject(Ee),e.\u0275\u0275directiveInject(Qt.v),e.\u0275\u0275directiveInject("fsName",8),e.\u0275\u0275directiveInject("id",8),e.\u0275\u0275directiveInject("path",8),e.\u0275\u0275directiveInject("schedule",8),e.\u0275\u0275directiveInject("retention",8),e.\u0275\u0275directiveInject("start",8),e.\u0275\u0275directiveInject("status",8),e.\u0275\u0275directiveInject("isEdit",8))}}static{this.\u0275cmp=e.\u0275\u0275defineComponent({type:Qa,selectors:[["cd-cephfs-snapshotschedule-form"]],features:[e.\u0275\u0275InheritDefinitionFeature],decls:7,vars:9,consts:()=>{let n,t,o,s,d,h,I,$,w,X;return n=$localize`:␟4f4837945d87a6a300c5cf65952b67c63ecea04d␟6489333028848455182: ${"\ufffd0\ufffd"}:INTERPOLATION: ${"\ufffd1\ufffd"}:INTERPOLATION_1: `,t=$localize`:␟348ee7190a5fbaa2e4d8e314f29c899e39bb0476␟2899317511658635851:${"\ufffd*7:1\ufffd\ufffd#1:1\ufffd"}:START_TAG_NG_CONTAINER:Directory (required)${"\ufffd/#1:1\ufffd\ufffd/*7:1\ufffd"}:CLOSE_TAG_NG_CONTAINER:${"\ufffd#8\ufffd\ufffd/#8\ufffd"}:TAG_INPUT:`,o=$localize`:␟9ab6159b2a0abc0cd1744415edd41efb1cce16ae␟284572899171298268: Add retention policy ${"\ufffd#26\ufffd"}:START_TAG__SVG_SVG:${"\ufffd/#26\ufffd"}:CLOSE_TAG__SVG_SVG:`,s=$localize`:␟7cbdabcece469fab89cfa687ab152bca18b97498␟1417693714872528491:This field is required.`,d=$localize`:␟311f1408da67e0c4520e370018832f30ca702e18␟9202536922992506497:A snapshot schedule for this path already exists.`,h=$localize`:␟7cbdabcece469fab89cfa687ab152bca18b97498␟1417693714872528491:This field is required.`,I=$localize`:␟c8ae4855db6ab0a33964638479365691a9d03132␟3700079381057027984:This schedule already exists for the selected directory.`,$=$localize`:␟7cbdabcece469fab89cfa687ab152bca18b97498␟1417693714872528491:This field is required.`,w=$localize`:␟a0cb3d8ceecb3f17a64557fe9ab3cf5bb04b4a77␟8728625014039073107:Choose a value greater than 0.`,X=$localize`:␟28bb59ba8eca0eb596875ae352ed68e2db4ba91f␟8678689939950791758:This retention policy already exists for the selected directory.`,[["formDir","ngForm"],["directoryError",""],["repeatFrequencyError",""],["repeatIntervalError",""],["retentionPolicyError",""],n,t,o,s,d,h,I,$,w,X,["size","lg",3,"overlaySelected","open","hasScrollingContent"],[3,"closeSelect"],["cdsModalHeaderHeading",""],[4,"cdFormLoading"],["cdsModalContent",""],["name","snapScheduleForm","novalidate","",3,"formGroup"],[1,"form-item"],["for","directory","cdRequiredField","Directory","modal-primary-focus","",3,"invalid","invalidText","skeleton"],[4,"ngIf"],["cdsText","","type","text","formControlName","directory","name","directory",3,"ngbTypeahead","invalid","placeholder","skeleton"],["name","Start Date","helperText","The time zone is assumed to be UTC",3,"control","disabled"],["class","invalid-feedback",4,"ngIf"],["cdsRow","",1,"form-item","form-item-append"],["cdsCol",""],["cdRequiredField","Schedule",3,"id","name","formControlName","label","min","invalid","invalidText"],["id","repeatFrequency","name","repeatFrequency","formControlName","repeatFrequency","label","Frequency",3,"invalid","invalidText",4,"ngIf"],["formArrayName","retentionPolicies",4,"ngFor","ngForOf"],["cdsButton","tertiary","type","button",3,"click"],["cdsIcon","add","size","32","icon","",1,"cds--btn__icon"],[3,"submitActionEvent","form","submitText","modalForm"],[1,"invalid-feedback"],["id","repeatFrequency","name","repeatFrequency","formControlName","repeatFrequency","label","Frequency",3,"invalid","invalidText"],[3,"value",4,"ngFor","ngForOf"],[3,"value"],["formArrayName","retentionPolicies"],[3,"formGroupName"],["cdsCol","",3,"columnNumbers"],[3,"id","name","formControlName","label","min","invalid","invalidText"],["id","retentionFrequency","name","retentionFrequency","formControlName","retentionFrequency","label","Frequency",4,"ngIf"],["cdsCol","",1,"item-action-btn",3,"columnNumbers"],["kind","danger","size","sm",3,"click"],["cdsIcon","trash-can","size","32",1,"cds--btn__icon"],["id","retentionFrequency","name","retentionFrequency","formControlName","retentionFrequency","label","Frequency"]]},template:function(t,o){1&t&&(e.\u0275\u0275elementStart(0,"cds-modal",15),e.\u0275\u0275listener("overlaySelected",function(){return o.closeModal()}),e.\u0275\u0275elementStart(1,"cds-modal-header",16),e.\u0275\u0275listener("closeSelect",function(){return o.closeModal()}),e.\u0275\u0275elementStart(2,"h3",17),e.\u0275\u0275i18n(3,5),e.\u0275\u0275pipe(4,"titlecase"),e.\u0275\u0275pipe(5,"upperFirst"),e.\u0275\u0275elementEnd()(),e.\u0275\u0275template(6,ou,30,28,"ng-container",18),e.\u0275\u0275elementEnd()),2&t&&(e.\u0275\u0275property("open",o.open)("hasScrollingContent",!0),e.\u0275\u0275advance(5),e.\u0275\u0275i18nExp(e.\u0275\u0275pipeBind1(4,5,o.action))(e.\u0275\u0275pipeBind1(5,7,o.resource)),e.\u0275\u0275i18nApply(3),e.\u0275\u0275advance(),e.\u0275\u0275property("cdFormLoading",o.loading))},dependencies:[l.NgForOf,l.NgIf,Ol.P,oe.e,tt.G,Ge.S,ze.E,ut.P,C.\u0275NgNoValidate,C.NgSelectOption,C.\u0275NgSelectMultipleOption,C.DefaultValueAccessor,C.NgControlStatus,C.NgControlStatusGroup,C.FormGroupDirective,C.FormControlName,C.FormGroupName,C.FormArrayName,G.NgbTypeahead,D.ColumnDirective,D.RowDirective,D.TextInputLabelComponent,D.TextInput,D.Select,D.Option,D.Modal,D.ModalHeader,D.ModalContent,D.ModalHeaderHeading,D.Button,D.IconButton,D.NumberComponent,D.IconDirective,l.TitleCasePipe,Pe.r]})}}var iu=r(73231);const au=["pathTpl"],su=["retentionTpl"],ru=["subvolTpl"],Nl=(i,n)=>[i,n];function lu(i,n){if(1&i){const t=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"cd-alert-panel",9),e.\u0275\u0275listener("action",function(){e.\u0275\u0275restoreView(t);const s=e.\u0275\u0275nextContext();return e.\u0275\u0275resetView(s.enableSnapshotSchedule())}),e.\u0275\u0275i18n(1,6),e.\u0275\u0275elementEnd()}}function _u(i,n){if(1&i&&(e.\u0275\u0275elementStart(0,"span"),e.\u0275\u0275element(1,"i",12),e.\u0275\u0275elementEnd()),2&i){let t;const o=e.\u0275\u0275nextContext().data.row,s=e.\u0275\u0275nextContext();e.\u0275\u0275advance(),e.\u0275\u0275propertyInterpolate1("ngbTooltip","",null==o.pathForSelection||null==o.pathForSelection.split||null==(t=o.pathForSelection.split("@"))?null:t[0]," is active"),e.\u0275\u0275property("ngClass",e.\u0275\u0275pureFunction2(3,Nl,s.icons.success,s.icons.large))}}function cu(i,n){if(1&i&&e.\u0275\u0275element(0,"i",13),2&i){let t;const o=e.\u0275\u0275nextContext().data.row,s=e.\u0275\u0275nextContext();e.\u0275\u0275propertyInterpolate1("ngbTooltip","",null==o.pathForSelection||null==o.pathForSelection.split||null==(t=o.pathForSelection.split("@"))?null:t[0]," has been deactivated"),e.\u0275\u0275property("ngClass",e.\u0275\u0275pureFunction2(3,Nl,s.icons.warning,s.icons.large))}}function du(i,n){if(1&i&&e.\u0275\u0275element(0,"cd-copy-2-clipboard-button",15),2&i){let t,o;const s=e.\u0275\u0275nextContext(2).data.row,d=e.\u0275\u0275nextContext();e.\u0275\u0275property("source",null==s.pathForSelection||null==s.pathForSelection.split||null==(t=s.pathForSelection.split("@"))?null:t[0])("byId",!1)("size",d.lg)("text",null==s.pathForSelection||null==s.pathForSelection.split||null==(o=s.pathForSelection.split("@"))?null:o[0])}}function uu(i,n){if(1&i&&e.\u0275\u0275template(0,du,1,4,"cd-copy-2-clipboard-button",14),2&i){const t=e.\u0275\u0275nextContext().data.row;e.\u0275\u0275property("ngIf",t.pathForSelection)}}function pu(i,n){if(1&i&&(e.\u0275\u0275elementStart(0,"span",10),e.\u0275\u0275text(1),e.\u0275\u0275pipe(2,"path"),e.\u0275\u0275elementEnd(),e.\u0275\u0275template(3,_u,2,6,"span",11)(4,cu,1,6,"ng-template",null,4,e.\u0275\u0275templateRefExtractor)(6,uu,1,1,"ng-template",null,5,e.\u0275\u0275templateRefExtractor)),2&i){let t;const o=n.data.row,s=e.\u0275\u0275reference(5),d=e.\u0275\u0275nextContext();e.\u0275\u0275property("ngbTooltip",d.fullpathTpl),e.\u0275\u0275advance(),e.\u0275\u0275textInterpolate1(" ",e.\u0275\u0275pipeBind1(2,4,null==o.pathForSelection||null==o.pathForSelection.split||null==(t=o.pathForSelection.split("@"))?null:t[0])," "),e.\u0275\u0275advance(2),e.\u0275\u0275property("ngIf",o.active)("ngIfElse",s)}}function mu(i,n){if(1&i&&(e.\u0275\u0275elementStart(0,"li"),e.\u0275\u0275text(1),e.\u0275\u0275elementEnd()),2&i){const t=n.$implicit;e.\u0275\u0275advance(),e.\u0275\u0275textInterpolate(t)}}function fu(i,n){if(1&i&&(e.\u0275\u0275elementStart(0,"ul"),e.\u0275\u0275template(1,mu,2,1,"li",16),e.\u0275\u0275elementEnd()),2&i){const t=e.\u0275\u0275nextContext().data.row;e.\u0275\u0275advance(),e.\u0275\u0275property("ngForOf",t.retentionCopy)}}function Eu(i,n){if(1&i&&e.\u0275\u0275template(0,fu,2,1,"ul",11),2&i){const t=n.data.row;e.\u0275\u0275nextContext();const o=e.\u0275\u0275reference(9);e.\u0275\u0275property("ngIf",t.retentionCopy.length)("ngIfElse",o)}}function gu(i,n){if(1&i&&(e.\u0275\u0275elementStart(0,"span"),e.\u0275\u0275text(1),e.\u0275\u0275elementEnd()),2&i){const t=e.\u0275\u0275nextContext().data.row;e.\u0275\u0275advance(),e.\u0275\u0275textInterpolate1(" ",t.subvol," ")}}function Cu(i,n){if(1&i&&e.\u0275\u0275template(0,gu,2,1,"span",11),2&i){const t=n.data.row;e.\u0275\u0275nextContext();const o=e.\u0275\u0275reference(9);e.\u0275\u0275property("ngIf",t.subvol)("ngIfElse",o)}}function Su(i,n){1&i&&e.\u0275\u0275text(0,"-")}function hu(i,n){if(1&i){const t=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"cd-table",17),e.\u0275\u0275pipe(1,"async"),e.\u0275\u0275listener("fetchData",function(){e.\u0275\u0275restoreView(t);const s=e.\u0275\u0275nextContext();return e.\u0275\u0275resetView(s.fetchData())})("updateSelection",function(s){e.\u0275\u0275restoreView(t);const d=e.\u0275\u0275nextContext();return e.\u0275\u0275resetView(d.updateSelection(s))}),e.\u0275\u0275elementStart(2,"div",18),e.\u0275\u0275element(3,"cd-table-actions",19),e.\u0275\u0275pipe(4,"async"),e.\u0275\u0275elementEnd()()}if(2&i){const t=e.\u0275\u0275nextContext();e.\u0275\u0275property("data",e.\u0275\u0275pipeBind1(1,6,t.snapshotSchedules$))("columns",t.columns)("hasDetails",!1),e.\u0275\u0275advance(3),e.\u0275\u0275property("permission",t.permissions.cephfs)("selection",t.selection)("tableActions",e.\u0275\u0275pipeBind1(4,8,t.tableActions$))}}class Ya extends Ce.g{constructor(n,t,o,s,d,h){super(),this.snapshotScheduleService=n,this.authStorageService=t,this.modalService=o,this.mgrModuleService=s,this.actionLabels=d,this.taskWrapper=h,this.subject$=new K.BehaviorSubject([]),this.snapScheduleModuleStatus$=new K.BehaviorSubject(!1),this.columns=[],this.tableActions$=new K.BehaviorSubject([]),this.selection=new N.y,this.errorMessage="",this.selectedName="",this.icons=g.FI,this.MODULE_NAME="snap_schedule",this.ENABLE_MODULE_TIMER=2e3,this.permissions=this.authStorageService.getPermissions()}ngOnChanges(n){n.fsName&&this.subject$.next([])}ngOnInit(){this.tableActions=[{name:this.actionLabels.CREATE,permission:"create",icon:g.FI.add,click:()=>this.openModal(!1)},{name:this.actionLabels.EDIT,permission:"update",icon:g.FI.edit,click:()=>this.openModal(!0)},{name:this.actionLabels.DELETE,permission:"delete",icon:g.FI.trash,click:()=>this.deleteSnapshotSchedule()}],this.moduleServiceListSub=this.mgrModuleService.list().pipe((0,v.map)(n=>n.find(t=>t?.name===this.MODULE_NAME))).subscribe({next:n=>this.snapScheduleModuleStatus$.next(n?.enabled)}),this.snapshotSchedules$=this.subject$.pipe((0,v.switchMap)(()=>this.snapScheduleModuleStatus$.pipe((0,v.switchMap)(n=>n?this.snapshotScheduleService.getSnapshotScheduleList("/",this.fsName).pipe((0,v.map)(t=>t.map(o=>({...o,pathForSelection:`${o.path}@${o.schedule}`})))):(0,K.of)([])),(0,v.shareReplay)(1)))),this.columns=[{prop:"pathForSelection",name:$localize`Path`,flexGrow:3,cellTemplate:this.pathTpl},{prop:"path",isHidden:!0,isInvisible:!0},{prop:"subvol",name:$localize`Subvolume`,cellTemplate:this.subvolTpl},{prop:"scheduleCopy",name:$localize`Repeat interval`},{prop:"schedule",isHidden:!0,isInvisible:!0},{prop:"retentionCopy",name:$localize`Retention policy`,cellTemplate:this.retentionTpl},{prop:"retention",isHidden:!0,isInvisible:!0},{prop:"created_count",name:$localize`Created Count`},{prop:"pruned_count",name:$localize`Deleted Count`},{prop:"start",name:$localize`Start time`,cellTransformation:b.x.timeAgo},{prop:"created",name:$localize`Created`,cellTransformation:b.x.timeAgo}],this.tableActions$.next(this.tableActions)}ngOnDestroy(){this.moduleServiceListSub.unsubscribe()}fetchData(){this.subject$.next([])}updateSelection(n){if(this.selection=n,!this.selection.hasSelection)return;const t=this.selection.first()?.active;this.tableActions$.next([...this.tableActions,{name:t?this.actionLabels.DEACTIVATE:this.actionLabels.ACTIVATE,permission:"update",icon:t?g.FI.warning:g.FI.success,click:()=>t?this.deactivateSnapshotSchedule():this.activateSnapshotSchedule()}])}openModal(n=!1){this.modalService.show(Qa,{fsName:this.fsName,id:this.id,path:this.selection?.first()?.path,schedule:this.selection?.first()?.schedule,retention:this.selection?.first()?.retention,start:this.selection?.first()?.start,status:this.selection?.first()?.status,isEdit:n})}enableSnapshotSchedule(){this.mgrModuleService.updateModuleState(this.MODULE_NAME,!1,null,"","Enabled Snapshot Schedule Module")}deactivateSnapshotSchedule(){const{path:n,start:t,fs:o,schedule:s,subvol:d,group:h}=this.selection.first();this.modalRef=this.modalService.show(O.D,{itemDescription:$localize`snapshot schedule`,actionDescription:this.actionLabels.DEACTIVATE,submitActionObservable:()=>this.taskWrapper.wrapTaskAroundCall({task:new q.O("cephfs/snapshot/schedule/deactivate",{path:n}),call:this.snapshotScheduleService.deactivate({path:n,schedule:s,start:t,fs:o,subvol:d,group:h})})})}activateSnapshotSchedule(){const{path:n,start:t,fs:o,schedule:s,subvol:d,group:h}=this.selection.first();this.modalRef=this.modalService.show(O.D,{itemDescription:$localize`snapshot schedule`,actionDescription:this.actionLabels.ACTIVATE,submitActionObservable:()=>this.taskWrapper.wrapTaskAroundCall({task:new q.O("cephfs/snapshot/schedule/activate",{path:n}),call:this.snapshotScheduleService.activate({path:n,schedule:s,start:t,fs:o,subvol:d,group:h})})})}deleteSnapshotSchedule(){const{path:n,start:t,fs:o,schedule:s,subvol:d,group:h,retention:I}=this.selection.first(),$=I?.split(/\s/gi)?.filter(w=>!!w)?.map(w=>{const X=w.substring(w.length-1);return`${w.substring(0,w.length-1)}-${X}`})?.join("|");this.modalRef=this.modalService.show(O.D,{itemDescription:$localize`snapshot schedule`,submitActionObservable:()=>this.taskWrapper.wrapTaskAroundCall({task:new q.O("cephfs/snapshot/schedule/"+m.Qp.DELETE,{path:n}),call:this.snapshotScheduleService.delete({path:n,schedule:s,start:t,fs:o,retentionPolicy:$,subvol:d,group:h})})})}static{this.\u0275fac=function(t){return new(t||Ya)(e.\u0275\u0275directiveInject(bo),e.\u0275\u0275directiveInject(c.v),e.\u0275\u0275directiveInject(He.V),e.\u0275\u0275directiveInject(Ln.a),e.\u0275\u0275directiveInject(m.Ss),e.\u0275\u0275directiveInject(B.a))}}static{this.\u0275cmp=e.\u0275\u0275defineComponent({type:Ya,selectors:[["cd-cephfs-snapshotschedule-list"]],viewQuery:function(t,o){if(1&t&&(e.\u0275\u0275viewQuery(au,7),e.\u0275\u0275viewQuery(su,7),e.\u0275\u0275viewQuery(ru,7)),2&t){let s;e.\u0275\u0275queryRefresh(s=e.\u0275\u0275loadQuery())&&(o.pathTpl=s.first),e.\u0275\u0275queryRefresh(s=e.\u0275\u0275loadQuery())&&(o.retentionTpl=s.first),e.\u0275\u0275queryRefresh(s=e.\u0275\u0275loadQuery())&&(o.subvolTpl=s.first)}},inputs:{fsName:"fsName",id:"id"},features:[e.\u0275\u0275InheritDefinitionFeature,e.\u0275\u0275NgOnChangesFeature],decls:12,vars:6,consts:()=>{let n;return n=$localize`:␟856acea24c477cff9b16c0d5256781bdf19ce052␟9052053309952716760: In order to access the snapshot scheduler feature, the snap_scheduler module must be enabled
`,[["pathTpl",""],["retentionTpl",""],["subvolTpl",""],["noDataTpl",""],["inactiveStatusTpl",""],["fullpathForSelectionTpl",""],n,["type","info","spacingClass","mb-3","class","align-items-center","actionName","Enable",3,"action",4,"ngIf"],["columnMode","flex","selectionType","single",3,"data","columns","hasDetails","fetchData","updateSelection",4,"ngIf"],["type","info","spacingClass","mb-3","actionName","Enable",1,"align-items-center",3,"action"],["triggers","click:blur",1,"fw-bold",3,"ngbTooltip"],[4,"ngIf","ngIfElse"],[1,"text-success",3,"ngClass","ngbTooltip"],[1,"text-warning",3,"ngClass","ngbTooltip"],[3,"source","byId","size","text",4,"ngIf"],[3,"source","byId","size","text"],[4,"ngFor","ngForOf"],["columnMode","flex","selectionType","single",3,"fetchData","updateSelection","data","columns","hasDetails"],[1,"table-actions"],[1,"btn-group",3,"permission","selection","tableActions"]]},template:function(t,o){1&t&&(e.\u0275\u0275template(0,lu,2,0,"cd-alert-panel",7),e.\u0275\u0275pipe(1,"async"),e.\u0275\u0275template(2,pu,8,6,"ng-template",null,0,e.\u0275\u0275templateRefExtractor)(4,Eu,1,2,"ng-template",null,1,e.\u0275\u0275templateRefExtractor)(6,Cu,1,2,"ng-template",null,2,e.\u0275\u0275templateRefExtractor)(8,Su,1,0,"ng-template",null,3,e.\u0275\u0275templateRefExtractor)(10,hu,5,10,"cd-table",8),e.\u0275\u0275pipe(11,"async")),2&t&&(e.\u0275\u0275property("ngIf",!1===e.\u0275\u0275pipeBind1(1,2,o.snapScheduleModuleStatus$)),e.\u0275\u0275advance(10),e.\u0275\u0275property("ngIf",e.\u0275\u0275pipeBind1(11,4,o.snapScheduleModuleStatus$)))},dependencies:[l.NgClass,l.NgForOf,l.NgIf,nt.m,fe.N,We.O,at.j,G.NgbTooltip,l.AsyncPipe,iu.i],styles:["ul[_ngcontent-%COMP%]{list-style:none;padding:0}"]})}}function Tu(i,n){if(1&i&&e.\u0275\u0275element(0,"cd-cephfs-detail",23),2&i){const t=e.\u0275\u0275nextContext(2);e.\u0275\u0275property("data",t.details)}}function Fu(i,n){if(1&i&&e.\u0275\u0275element(0,"cd-cephfs-directories",24),2&i){const t=e.\u0275\u0275nextContext(2);e.\u0275\u0275property("id",t.id)}}function vu(i,n){if(1&i&&e.\u0275\u0275element(0,"cd-cephfs-subvolume-list",25),2&i){const t=e.\u0275\u0275nextContext(2);e.\u0275\u0275property("fsName",t.selection.mdsmap.fs_name)("pools",t.details.pools)("id",t.id)}}function Mu(i,n){if(1&i&&e.\u0275\u0275element(0,"cd-cephfs-subvolume-group",26),2&i){const t=e.\u0275\u0275nextContext(2);e.\u0275\u0275property("fsName",t.selection.mdsmap.fs_name)("pools",t.details.pools)}}function Ru(i,n){if(1&i&&e.\u0275\u0275element(0,"cd-cephfs-subvolume-snapshots-list",27),2&i){const t=e.\u0275\u0275nextContext(2);e.\u0275\u0275property("fsName",t.selection.mdsmap.fs_name)}}function Ou(i,n){if(1&i&&e.\u0275\u0275element(0,"cd-cephfs-snapshotschedule-list",28),2&i){const t=e.\u0275\u0275nextContext(2);e.\u0275\u0275property("fsName",t.selection.mdsmap.fs_name)("id",t.id)}}function Pu(i,n){if(1&i){const t=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"cd-cephfs-clients",29),e.\u0275\u0275listener("triggerApiUpdate",function(){e.\u0275\u0275restoreView(t);const s=e.\u0275\u0275nextContext(2);return e.\u0275\u0275resetView(s.refresh())}),e.\u0275\u0275elementEnd()}if(2&i){const t=e.\u0275\u0275nextContext(2);e.\u0275\u0275property("id",t.id)("clients",t.clients)}}function bu(i,n){if(1&i&&e.\u0275\u0275element(0,"cd-grafana",30),2&i){const t=e.\u0275\u0275nextContext(2);e.\u0275\u0275property("grafanaPath","ceph-filesystem-overview?var-name="+t.details.name)("type","metrics")}}function Nu(i,n){if(1&i){const t=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementContainerStart(0),e.\u0275\u0275elementStart(1,"nav",10,0),e.\u0275\u0275listener("navChange",function(){e.\u0275\u0275restoreView(t);const s=e.\u0275\u0275nextContext();return e.\u0275\u0275resetView(s.softRefresh())}),e.\u0275\u0275elementContainerStart(3,11),e.\u0275\u0275elementStart(4,"a",12),e.\u0275\u0275i18n(5,1),e.\u0275\u0275elementEnd(),e.\u0275\u0275template(6,Tu,1,1,"ng-template",13),e.\u0275\u0275elementContainerEnd(),e.\u0275\u0275elementContainerStart(7,14),e.\u0275\u0275elementStart(8,"a",12),e.\u0275\u0275i18n(9,2),e.\u0275\u0275elementEnd(),e.\u0275\u0275template(10,Fu,1,1,"ng-template",13),e.\u0275\u0275elementContainerEnd(),e.\u0275\u0275elementContainerStart(11,15),e.\u0275\u0275elementStart(12,"a",12),e.\u0275\u0275i18n(13,3),e.\u0275\u0275elementEnd(),e.\u0275\u0275template(14,vu,1,3,"ng-template",13),e.\u0275\u0275elementContainerEnd(),e.\u0275\u0275elementContainerStart(15,16),e.\u0275\u0275elementStart(16,"a",12),e.\u0275\u0275i18n(17,4),e.\u0275\u0275elementEnd(),e.\u0275\u0275template(18,Mu,1,2,"ng-template",13),e.\u0275\u0275elementContainerEnd(),e.\u0275\u0275elementContainerStart(19,17),e.\u0275\u0275elementStart(20,"a",12),e.\u0275\u0275i18n(21,5),e.\u0275\u0275elementEnd(),e.\u0275\u0275template(22,Ru,1,1,"ng-template",13),e.\u0275\u0275elementContainerEnd(),e.\u0275\u0275elementContainerStart(23,18),e.\u0275\u0275elementStart(24,"a",12),e.\u0275\u0275i18n(25,6),e.\u0275\u0275elementEnd(),e.\u0275\u0275template(26,Ou,1,2,"ng-template",13),e.\u0275\u0275elementContainerEnd(),e.\u0275\u0275elementContainerStart(27,19),e.\u0275\u0275elementStart(28,"a",12),e.\u0275\u0275elementContainerStart(29),e.\u0275\u0275i18n(30,7),e.\u0275\u0275elementContainerEnd(),e.\u0275\u0275elementStart(31,"span",20),e.\u0275\u0275text(32),e.\u0275\u0275elementEnd()(),e.\u0275\u0275template(33,Pu,1,2,"ng-template",13),e.\u0275\u0275elementContainerEnd(),e.\u0275\u0275elementContainerStart(34,21),e.\u0275\u0275elementStart(35,"a",12),e.\u0275\u0275i18n(36,8),e.\u0275\u0275elementEnd(),e.\u0275\u0275template(37,bu,1,2,"ng-template",13),e.\u0275\u0275elementContainerEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275element(38,"div",22),e.\u0275\u0275elementContainerEnd()}if(2&i){const t=e.\u0275\u0275reference(2),o=e.\u0275\u0275nextContext();e.\u0275\u0275advance(32),e.\u0275\u0275textInterpolate(o.clients.data.length),e.\u0275\u0275advance(6),e.\u0275\u0275property("ngbNavOutlet",t)}}class Ja{constructor(n,t,o){this.ngZone=n,this.authStorageService=t,this.cephfsService=o,this.clients={data:[],status:new kt.m(qt.k.ValueNone)},this.details={standbys:"",pools:[],ranks:[],mdsCounters:{},name:""},this.grafanaPermission=this.authStorageService.getPermissions().grafana}ngOnChanges(){this.selection?this.selection.id!==this.id&&this.setupSelected(this.selection.id,this.selection.mdsmap.info):this.unsubscribeInterval()}setupSelected(n,t){this.id=n;const o=p().first(Object.values(t));this.grafanaId=o&&o.name,this.details={standbys:"",pools:[],ranks:[],mdsCounters:{},name:""},this.clients={data:[],status:new kt.m(qt.k.ValueNone)},this.updateInterval()}updateInterval(){this.unsubscribeInterval(),this.subscribeInterval()}unsubscribeInterval(){this.reloadSubscriber&&this.reloadSubscriber.unsubscribe()}subscribeInterval(){this.ngZone.runOutsideAngular(()=>this.reloadSubscriber=(0,K.timer)(0,5e3).subscribe(()=>this.ngZone.run(()=>this.refresh())))}refresh(){this.cephfsService.getTabs(this.id).subscribe(n=>{this.data=n,this.softRefresh()},()=>{this.clients.status=new kt.m(qt.k.ValueException)})}softRefresh(){const n=p().cloneDeep(this.data);this.clients=n?.clients,this.clients.status=new kt.m(this.clients?.status),this.details={standbys:n.standbys,pools:n.pools,ranks:n.ranks,mdsCounters:n.mds_counters,name:n.name}}ngOnDestroy(){this.unsubscribeInterval()}static{this.\u0275fac=function(t){return new(t||Ja)(e.\u0275\u0275directiveInject(e.NgZone),e.\u0275\u0275directiveInject(c.v),e.\u0275\u0275directiveInject(R))}}static{this.\u0275cmp=e.\u0275\u0275defineComponent({type:Ja,selectors:[["cd-cephfs-tabs"]],inputs:{selection:"selection"},features:[e.\u0275\u0275NgOnChangesFeature],decls:1,vars:1,consts:()=>{let n,t,o,s,d,h,I,$,w;return n=$localize`:␟4f8b2bb476981727ab34ed40fde1218361f92c45␟5028777105388019087:Details`,t=$localize`:␟6e213942c6354b9cbe7a650f0f1499bfc1000fb6␟82336768138700283:Directories`,o=$localize`:␟d5439bc4a2c71a425d5f84aa5b748ccccd5da1f0␟9171559241736080580:Subvolumes`,s=$localize`:␟ef87412ef5ebf5b6a82d4dbbe8cb2409f25e8d41␟3068368447042821094:Subvolume groups`,d=$localize`:␟f21b1d17b6c5042bb5805516eee37fde33739dd8␟633791246656795624:Snapshots`,h=$localize`:␟d74a1cf833386ae9083dba595b6f43b55dbaae8e␟2236965457470700363:Snapshot schedules`,I=$localize`:␟7ffe39df9d88c972792bd8688b215392deb8313d␟5910845130937645353:Clients`,$=$localize`:␟e95ae009d0bdb45fcc656e8b65248cf7396080d5␟2614607010577950577:Overview`,w=$localize`:␟b2c9b3141c3cb41f65910207b5304a8d61aa41a9␟8532744276442658971:CephFS performance`,[["nav","ngbNav"],n,t,o,s,d,h,I,$,[4,"ngIf"],["ngbNav","","cdStatefulTab","cephfs-tabs",1,"nav-tabs",3,"navChange"],["ngbNavItem","details"],["ngbNavLink",""],["ngbNavContent",""],["ngbNavItem","directories"],["ngbNavItem","subvolumes"],["ngbNavItem","subvolume-groups"],["ngbNavItem","snapshots"],["ngbNavItem","snapshot-schedules"],["ngbNavItem","clients"],[1,"badge","badge-pill","badge-tab","ms-1"],["ngbNavItem","performance-details"],[3,"ngbNavOutlet"],[3,"data"],[3,"id"],[3,"fsName","pools","id"],[3,"fsName","pools"],[3,"fsName"],[3,"fsName","id"],[3,"triggerApiUpdate","id","clients"],["title",w,"uid","718Bruins","grafanaStyle","one",3,"grafanaPath","type"]]},template:function(t,o){1&t&&e.\u0275\u0275template(0,Nu,39,2,"ng-container",9),2&t&&e.\u0275\u0275property("ngIf",o.selection)},dependencies:[l.NgIf,Tt.c,$t.B,G.NgbNavContent,G.NgbNav,G.NgbNavItem,G.NgbNavLink,G.NgbNavLinkBase,G.NgbNavOutlet,un,pn,fn,io,so,Wa,Ya]})}}const Iu=["deleteTpl"];function Au(i,n){if(1&i&&e.\u0275\u0275element(0,"cd-cephfs-tabs",11),2&i){const t=e.\u0275\u0275nextContext(2);e.\u0275\u0275property("selection",t.expandedRow)}}function Du(i,n){if(1&i){const t=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"cd-table",7),e.\u0275\u0275listener("fetchData",function(s){e.\u0275\u0275restoreView(t);const d=e.\u0275\u0275nextContext();return e.\u0275\u0275resetView(d.loadFilesystems(s))})("setExpandedRow",function(s){e.\u0275\u0275restoreView(t);const d=e.\u0275\u0275nextContext();return e.\u0275\u0275resetView(d.setExpandedRow(s))})("updateSelection",function(s){e.\u0275\u0275restoreView(t);const d=e.\u0275\u0275nextContext();return e.\u0275\u0275resetView(d.updateSelection(s))}),e.\u0275\u0275template(1,Au,1,1,"cd-cephfs-tabs",8),e.\u0275\u0275elementStart(2,"div",9),e.\u0275\u0275element(3,"cd-table-actions",10),e.\u0275\u0275elementEnd()()}if(2&i){const t=e.\u0275\u0275nextContext();e.\u0275\u0275property("data",t.filesystems)("columns",t.columns)("hasDetails",!0),e.\u0275\u0275advance(3),e.\u0275\u0275property("permission",t.permissions.cephfs)("selection",t.selection)("tableActions",t.tableActions)}}function yu(i,n){1&i&&(e.\u0275\u0275elementStart(0,"cd-alert-panel",12),e.\u0275\u0275i18n(1,3),e.\u0275\u0275elementEnd())}function Lu(i,n){1&i&&e.\u0275\u0275element(0,"cd-grafana",14),2&i&&e.\u0275\u0275property("grafanaPath","ceph-filesystem-overview?")("type","metrics")}function $u(i,n){if(1&i&&e.\u0275\u0275template(0,Lu,1,2,"cd-grafana",13),2&i){const t=e.\u0275\u0275nextContext();e.\u0275\u0275property("ngIf",t.permissions.grafana.read)}}class Za extends M.D{constructor(n,t,o,s,d,h,I,$,w,X,J){super(),this.authStorageService=n,this.cephfsService=t,this.actionLabels=o,this.router=s,this.urlBuilder=d,this.configurationService=h,this.modalService=I,this.taskWrapper=$,this.notificationService=w,this.healthService=X,this.cdsModalService=J,this.filesystems=[],this.selection=new N.y,this.icons=g.FI,this.monAllowPoolDelete=!1,this.permissions=this.authStorageService.getPermissions()}ngOnInit(){this.columns=[{name:$localize`Name`,prop:"mdsmap.fs_name",flexGrow:2},{name:$localize`Enabled`,prop:"mdsmap.enabled",flexGrow:2,cellTransformation:b.x.checkIcon},{name:$localize`Created`,prop:"mdsmap.created",flexGrow:1,cellTransformation:b.x.timeAgo}],this.tableActions=[{name:this.actionLabels.CREATE,permission:"create",icon:g.FI.add,click:()=>this.router.navigate([this.urlBuilder.getCreate()]),canBePrimary:n=>!n.hasSelection},{name:this.actionLabels.EDIT,permission:"update",icon:g.FI.edit,click:()=>this.router.navigate([this.urlBuilder.getEdit(String(this.selection.first().id))])},{name:this.actionLabels.AUTHORIZE,permission:"update",icon:g.FI.edit,click:()=>this.authorizeModal()},{name:this.actionLabels.ATTACH,permission:"read",icon:g.FI.bars,disable:()=>!this.selection?.hasSelection,click:()=>this.showAttachInfo()},{permission:"delete",icon:g.FI.destroy,click:()=>this.removeVolumeModal(),name:this.actionLabels.REMOVE,disable:this.getDisableDesc.bind(this)}],this.permissions.configOpt.read&&this.configurationService.get("mon_allow_pool_delete").subscribe(n=>{if(p().has(n,"value")){const t=p().find(n.value,o=>"mon"===o.section)||{value:!1};this.monAllowPoolDelete="true"===t.value}})}loadFilesystems(n){this.cephfsService.list().subscribe(t=>{this.filesystems=t},()=>{n.error()})}updateSelection(n){this.selection=n}showAttachInfo(){const n=this.selection?.selected?.[0];this.cephfsService.getFsRootDirectory(n.id).pipe((0,v.switchMap)(t=>this.healthService.getClusterFsid().pipe((0,v.map)(o=>({clusterId:o,fs:t}))))).subscribe({next:t=>{this.modalRef=this.modalService.show(_e,{onSubmit:()=>this.modalRef.close(),mountData:{fsId:t.clusterId,fsName:n?.mdsmap?.fs_name,rootPath:t.fs.path}})}})}removeVolumeModal(){const n=this.selection.first().mdsmap.fs_name;this.cdsModalService.show(O.D,{impact:ft.r.high,itemDescription:"File System",itemNames:[n],actionDescription:"remove",bodyTemplate:this.deleteTpl,submitActionObservable:()=>this.taskWrapper.wrapTaskAroundCall({task:new q.O("cephfs/remove",{volumeName:n}),call:this.cephfsService.remove(n)})})}getDisableDesc(){return!this.selection?.hasSelection||!this.monAllowPoolDelete&&$localize`File System deletion is disabled by the mon_allow_pool_delete configuration setting.`}authorizeModal(){const n=this.selection?.selected?.[0];this.modalService.show(bt,{fsName:n.mdsmap.fs_name,id:n.id})}static{this.\u0275fac=function(t){return new(t||Za)(e.\u0275\u0275directiveInject(c.v),e.\u0275\u0275directiveInject(R),e.\u0275\u0275directiveInject(m.Ss),e.\u0275\u0275directiveInject(u.Router),e.\u0275\u0275directiveInject(z.E),e.\u0275\u0275directiveInject(P.s),e.\u0275\u0275directiveInject(He.V),e.\u0275\u0275directiveInject(B.a),e.\u0275\u0275directiveInject(Q.J),e.\u0275\u0275directiveInject(ue),e.\u0275\u0275directiveInject(He.V))}}static{this.\u0275cmp=e.\u0275\u0275defineComponent({type:Za,selectors:[["cd-cephfs-list"]],viewQuery:function(t,o){if(1&t&&e.\u0275\u0275viewQuery(Iu,7),2&t){let s;e.\u0275\u0275queryRefresh(s=e.\u0275\u0275loadQuery())&&(o.deleteTpl=s.first)}},features:[e.\u0275\u0275ProvidersFeature([{provide:z.E,useValue:new z.E("cephfs/fs")}]),e.\u0275\u0275InheritDefinitionFeature],decls:9,vars:6,consts:()=>{let n,t,o,s;return n=$localize`:␟475a35c44ebf9915bd5c528f63f0520a4ce31a9c␟8798773671738403562:File systems`,t=$localize`:␟e95ae009d0bdb45fcc656e8b65248cf7396080d5␟2614607010577950577:Overview`,o=$localize`:␟2a53b8619479b209e721882de3d2fedd3227ba3a␟2902938361826347377: This will remove its data and metadata pools. It'll also remove the MDS daemon associated with the volume. `,s=$localize`:␟cf865ecb6e781de04bbd464c9a89b1a7b5f0567f␟7695855201984025346:CephFS Overview`,[["fileSystemListContent",""],["deleteTpl",""],["grafanaContent",""],o,[3,"type","followFocus","isNavigation","cacheActive"],["heading",n,3,"tabContent"],["heading",t,3,"tabContent"],["columnMode","flex","identifier","id","forceIdentifier","true","selectionType","single",3,"fetchData","setExpandedRow","updateSelection","data","columns","hasDetails"],[3,"selection",4,"cdTableDetail"],[1,"table-actions"],["id","cephfs-actions",1,"btn-group",3,"permission","selection","tableActions"],[3,"selection"],["type","danger"],["title",s,"uid","718Bruins","grafanaStyle","two",3,"grafanaPath","type",4,"ngIf"],["title",s,"uid","718Bruins","grafanaStyle","two",3,"grafanaPath","type"]]},template:function(t,o){if(1&t&&(e.\u0275\u0275elementStart(0,"cds-tabs",4),e.\u0275\u0275element(1,"cds-tab",5)(2,"cds-tab",6),e.\u0275\u0275elementEnd(),e.\u0275\u0275template(3,Du,4,6,"ng-template",null,0,e.\u0275\u0275templateRefExtractor)(5,yu,2,0,"ng-template",null,1,e.\u0275\u0275templateRefExtractor)(7,$u,1,1,"ng-template",null,2,e.\u0275\u0275templateRefExtractor)),2&t){const s=e.\u0275\u0275reference(4),d=e.\u0275\u0275reference(8);e.\u0275\u0275property("type","contained")("followFocus",!0)("isNavigation",!1)("cacheActive",!0),e.\u0275\u0275advance(),e.\u0275\u0275property("tabContent",s),e.\u0275\u0275advance(),e.\u0275\u0275property("tabContent",d)}},dependencies:[l.NgIf,Tt.c,nt.m,We.O,at.j,Et.N,D.Tabs,D.Tab,Ja]})}}class On{static{this.knownTypes=[{name:"uint",inputType:"number",humanReadable:"Unsigned integer value",defaultMin:0,patternHelpText:"The entered value needs to be an unsigned number.",isNumberType:!0,allowsNegative:!1},{name:"int",inputType:"number",humanReadable:"Integer value",patternHelpText:"The entered value needs to be a number.",isNumberType:!0,allowsNegative:!0},{name:"size",inputType:"number",humanReadable:"Unsigned integer value (>=16bit)",defaultMin:0,patternHelpText:"The entered value needs to be a unsigned number.",isNumberType:!0,allowsNegative:!1},{name:"secs",inputType:"number",humanReadable:"Number of seconds",defaultMin:1,patternHelpText:"The entered value needs to be a number >= 1.",isNumberType:!0,allowsNegative:!1},{name:"float",inputType:"number",humanReadable:"Double value",patternHelpText:"The entered value needs to be a number or decimal.",isNumberType:!0,allowsNegative:!0},{name:"str",inputType:"text",humanReadable:"Text",isNumberType:!1},{name:"addr",inputType:"text",humanReadable:"IPv4 or IPv6 address",patternHelpText:"The entered value needs to be a valid IP address.",isNumberType:!1},{name:"uuid",inputType:"text",humanReadable:"UUID",patternHelpText:"The entered value is not a valid UUID, e.g.: 67dcac9f-2c03-4d6c-b7bd-1210b3a259a8",isNumberType:!1},{name:"bool",inputType:"checkbox",humanReadable:"Boolean value",isNumberType:!1}]}static getType(n){const t=p().find(this.knownTypes,o=>o.name===n);if(void 0!==t)return t;throw new Error('Found unknown type "'+n+'" for config option.')}static getTypeValidators(n){const t=On.getType(n.type);if("bool"===t.name||"str"===t.name)return;const o={validators:[],patternHelpText:t.patternHelpText};return t.isNumberType?(n.max&&""!==n.max&&(o.max=n.max,o.validators.push(C.Validators.max(n.max))),n.min&&""!==n.min?(o.min=n.min,o.validators.push(C.Validators.min(n.min))):"defaultMin"in t&&(o.min=t.defaultMin,o.validators.push(C.Validators.min(t.defaultMin))),"float"===n.type?o.validators.push(pe.xQ.decimalNumber()):o.validators.push(pe.xQ.number(t.allowsNegative))):"addr"===n.type?o.validators=[pe.xQ.ip()]:"uuid"===n.type&&(o.validators=[pe.xQ.uuid()]),o}static getTypeStep(n,t){if(["uint","int","size","secs"].includes(n))return 1;if("float"===n){if(null!==t&&-1!==t.toString().indexOf(".")){const d=t.toString().split(".");return Math.pow(10,-d[1].length)}return.1}}}class Uu{constructor(){this.value=[],this.force_update=!1}}function wu(i,n){1&i&&(e.\u0275\u0275elementStart(0,"div",20)(1,"label",21),e.\u0275\u0275i18n(2,3),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(3,"div",22)(4,"textarea",30),e.\u0275\u0275text(5,"            "),e.\u0275\u0275elementEnd()()())}function Gu(i,n){1&i&&(e.\u0275\u0275elementStart(0,"div",20)(1,"label",21),e.\u0275\u0275i18n(2,4),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(3,"div",22)(4,"textarea",31),e.\u0275\u0275text(5,"            "),e.\u0275\u0275elementEnd()()())}function Hu(i,n){1&i&&(e.\u0275\u0275elementStart(0,"div",20)(1,"label",21),e.\u0275\u0275i18n(2,5),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(3,"div",22),e.\u0275\u0275element(4,"input",32),e.\u0275\u0275elementEnd()())}function Vu(i,n){1&i&&(e.\u0275\u0275elementStart(0,"div",20)(1,"label",21),e.\u0275\u0275i18n(2,6),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(3,"div",22),e.\u0275\u0275element(4,"input",33),e.\u0275\u0275elementEnd()())}function Bu(i,n){if(1&i&&(e.\u0275\u0275elementStart(0,"span",35)(1,"span",36),e.\u0275\u0275text(2),e.\u0275\u0275elementEnd()()),2&i){const t=n.$implicit;e.\u0275\u0275advance(2),e.\u0275\u0275textInterpolate(t)}}function zu(i,n){if(1&i&&(e.\u0275\u0275elementStart(0,"div",20)(1,"label",21),e.\u0275\u0275i18n(2,7),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(3,"div",22),e.\u0275\u0275template(4,Bu,3,1,"span",34),e.\u0275\u0275elementEnd()()),2&i){const t=e.\u0275\u0275nextContext(2);e.\u0275\u0275advance(4),e.\u0275\u0275property("ngForOf",t.configForm.getValue("services"))}}function Xu(i,n){if(1&i&&(e.\u0275\u0275elementStart(0,"div",20)(1,"label",37),e.\u0275\u0275text(2),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(3,"div",22)(4,"select",38)(5,"option",39),e.\u0275\u0275i18n(6,8),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(7,"option",39),e.\u0275\u0275i18n(8,9),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(9,"option",39),e.\u0275\u0275i18n(10,10),e.\u0275\u0275elementEnd()()()()),2&i){const t=e.\u0275\u0275nextContext().$implicit;e.\u0275\u0275advance(),e.\u0275\u0275property("for",t),e.\u0275\u0275advance(),e.\u0275\u0275textInterpolate1("",t," "),e.\u0275\u0275advance(2),e.\u0275\u0275property("formControlName",t),e.\u0275\u0275advance(),e.\u0275\u0275property("ngValue",null),e.\u0275\u0275advance(2),e.\u0275\u0275property("ngValue",!0),e.\u0275\u0275advance(2),e.\u0275\u0275property("ngValue",!1)}}function ku(i,n){if(1&i&&(e.\u0275\u0275elementStart(0,"span",42),e.\u0275\u0275text(1),e.\u0275\u0275elementEnd()),2&i){const t=e.\u0275\u0275nextContext(4);e.\u0275\u0275advance(),e.\u0275\u0275textInterpolate1(" ",t.patternHelpText," ")}}function ju(i,n){if(1&i&&(e.\u0275\u0275elementStart(0,"span",42),e.\u0275\u0275text(1),e.\u0275\u0275elementEnd()),2&i){const t=e.\u0275\u0275nextContext(4);e.\u0275\u0275advance(),e.\u0275\u0275textInterpolate1(" ",t.patternHelpText," ")}}function Wu(i,n){if(1&i&&(e.\u0275\u0275elementStart(0,"span",42),e.\u0275\u0275i18n(1,11),e.\u0275\u0275elementEnd()),2&i){const t=e.\u0275\u0275nextContext(4);e.\u0275\u0275advance(),e.\u0275\u0275i18nExp(t.maxValue),e.\u0275\u0275i18nApply(1)}}function Ku(i,n){if(1&i&&(e.\u0275\u0275elementStart(0,"span",42),e.\u0275\u0275i18n(1,12),e.\u0275\u0275elementEnd()),2&i){const t=e.\u0275\u0275nextContext(4);e.\u0275\u0275advance(),e.\u0275\u0275i18nExp(t.minValue),e.\u0275\u0275i18nApply(1)}}function Qu(i,n){if(1&i&&(e.\u0275\u0275elementStart(0,"div",20)(1,"label",37),e.\u0275\u0275text(2),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(3,"div",22),e.\u0275\u0275element(4,"input",40),e.\u0275\u0275template(5,ku,2,1,"span",41)(6,ju,2,1,"span",41)(7,Wu,2,1,"span",41)(8,Ku,2,1,"span",41),e.\u0275\u0275elementEnd()()),2&i){const t=e.\u0275\u0275nextContext().$implicit;e.\u0275\u0275nextContext();const o=e.\u0275\u0275reference(2),s=e.\u0275\u0275nextContext();e.\u0275\u0275advance(),e.\u0275\u0275property("for",t),e.\u0275\u0275advance(),e.\u0275\u0275textInterpolate1("",t," "),e.\u0275\u0275advance(2),e.\u0275\u0275property("type",s.inputType)("id",t)("placeholder",s.humanReadableType)("formControlName",t)("step",s.getStep(s.type,s.configForm.getValue(t))),e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf",s.configForm.showError(t,o,"pattern")),e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf",s.configForm.showError(t,o,"invalidUuid")),e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf",s.configForm.showError(t,o,"max")),e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf",s.configForm.showError(t,o,"min"))}}function Yu(i,n){if(1&i&&(e.\u0275\u0275elementContainerStart(0),e.\u0275\u0275template(1,Xu,11,6,"div",24)(2,Qu,9,11,"div",24),e.\u0275\u0275elementContainerEnd()),2&i){const t=e.\u0275\u0275nextContext(2);e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf","bool"===t.type),e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf","bool"!==t.type)}}function Ju(i,n){if(1&i){const t=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"div",14)(1,"form",15,0)(3,"div",16)(4,"div",17),e.\u0275\u0275elementContainerStart(5,18),e.\u0275\u0275text(6,"Edit"),e.\u0275\u0275elementContainerEnd(),e.\u0275\u0275text(7),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(8,"div",19)(9,"div",20)(10,"label",21),e.\u0275\u0275i18n(11,1),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(12,"div",22),e.\u0275\u0275element(13,"input",23),e.\u0275\u0275elementEnd()(),e.\u0275\u0275template(14,wu,6,0,"div",24)(15,Gu,6,0,"div",24)(16,Hu,5,0,"div",24)(17,Vu,5,0,"div",24)(18,zu,5,1,"div",24),e.\u0275\u0275elementStart(19,"div",25)(20,"h3",26),e.\u0275\u0275i18n(21,2),e.\u0275\u0275elementEnd(),e.\u0275\u0275template(22,Yu,3,2,"ng-container",27),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(23,"div",28)(24,"cd-form-button-panel",29),e.\u0275\u0275listener("submitActionEvent",function(){e.\u0275\u0275restoreView(t);const s=e.\u0275\u0275nextContext();return e.\u0275\u0275resetView(s.forceUpdate?s.openCriticalConfirmModal():s.submit())}),e.\u0275\u0275elementEnd()()()()()}if(2&i){const t=e.\u0275\u0275nextContext();e.\u0275\u0275advance(),e.\u0275\u0275property("formGroup",t.configForm),e.\u0275\u0275advance(6),e.\u0275\u0275textInterpolate1(" ",t.configForm.getValue("name")," "),e.\u0275\u0275advance(7),e.\u0275\u0275property("ngIf",t.configForm.getValue("desc")),e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf",t.configForm.getValue("long_desc")),e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf",""!==t.configForm.getValue("default")),e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf",""!==t.configForm.getValue("daemon_default")),e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf",t.configForm.getValue("services").length>0),e.\u0275\u0275advance(4),e.\u0275\u0275property("ngForOf",t.availSections),e.\u0275\u0275advance(2),e.\u0275\u0275property("form",t.configForm)("submitText",t.actionLabels.UPDATE)}}class qa extends Ce.g{constructor(n,t,o,s,d,h){super(),this.actionLabels=n,this.route=t,this.router=o,this.configService=s,this.notificationService=d,this.modalService=h,this.availSections=["global","mon","mgr","osd","mds","client"],this.createForm()}createForm(){const n={name:new C.UntypedFormControl({value:null}),desc:new C.UntypedFormControl({value:null}),long_desc:new C.UntypedFormControl({value:null}),values:new C.UntypedFormGroup({}),default:new C.UntypedFormControl({value:null}),daemon_default:new C.UntypedFormControl({value:null}),services:new C.UntypedFormControl([])};this.availSections.forEach(t=>{n.values.addControl(t,new C.UntypedFormControl(null))}),this.configForm=new Ue.$(n)}ngOnInit(){this.route.params.subscribe(n=>{const t=n.name;this.configService.get(t).subscribe(o=>{this.setResponse(o),this.loadingReady()})})}getValidators(n){const t=On.getTypeValidators(n);if(t)return this.patternHelpText=t.patternHelpText,"max"in t&&""!==t.max&&(this.maxValue=t.max),"min"in t&&""!==t.min&&(this.minValue=t.min),t.validators}getStep(n,t){return On.getTypeStep(n,t)}setResponse(n){this.response=n;const t=this.getValidators(n);this.configForm.get("name").setValue(n.name),this.configForm.get("desc").setValue(n.desc),this.configForm.get("long_desc").setValue(n.long_desc),this.configForm.get("default").setValue(n.default),this.configForm.get("daemon_default").setValue(n.daemon_default),this.configForm.get("services").setValue(n.services),this.response.value&&this.response.value.forEach(s=>{let d=null;d="true"===s.value||"false"!==s.value&&s.value,this.configForm.get("values").get(s.section).setValue(d)}),this.forceUpdate=!this.response.can_update_at_runtime&&n.name.includes("rgw"),this.availSections.forEach(s=>{this.configForm.get("values").get(s).setValidators(t)});const o=On.getType(n.type);this.type=o.name,this.inputType=o.inputType,this.humanReadableType=o.humanReadable}createRequest(){const n=[];if(this.availSections.forEach(t=>{const o=this.configForm.getValue(t);null!==o&&n.push({section:t,value:o})}),!p().isEqual(this.response.value,n)){const t=new Uu;return t.name=this.configForm.getValue("name"),t.value=n,this.forceUpdate&&(t.force_update=this.forceUpdate),t}return null}openCriticalConfirmModal(){this.modalService.show(O.D,{buttonText:$localize`Force Edit`,actionDescription:$localize`force edit`,itemDescription:$localize`configuration`,infoMessage:"Updating this configuration might require restarting the client",submitAction:()=>{this.modalService.dismissAll(),this.submit()}})}submit(){const n=this.createRequest();n&&this.configService.create(n).subscribe(()=>{this.notificationService.show(Ae._.success,$localize`Updated config option ${n.name}`),this.router.navigate(["/configuration"])},()=>{this.configForm.setErrors({cdSubmitButton:!0})}),this.router.navigate(["/configuration"])}static{this.\u0275fac=function(t){return new(t||qa)(e.\u0275\u0275directiveInject(m.Ss),e.\u0275\u0275directiveInject(u.ActivatedRoute),e.\u0275\u0275directiveInject(u.Router),e.\u0275\u0275directiveInject(P.s),e.\u0275\u0275directiveInject(Q.J),e.\u0275\u0275directiveInject(He.V))}}static{this.\u0275cmp=e.\u0275\u0275defineComponent({type:qa,selectors:[["cd-configuration-form"]],features:[e.\u0275\u0275InheritDefinitionFeature],decls:1,vars:1,consts:()=>{let n,t,o,s,d,h,I,$,w,X,J,re;return n=$localize`:␟cff1428d10d59d14e45edec3c735a27b5482db59␟8953033926734869941:Name`,t=$localize`:␟809b0c848932a41318f77a2aace904ef429c13f4␟1805506778275601584:Values`,o=$localize`:␟eec715de352a6b114713b30b640d319fa78207a0␟4902817035128594900:Description`,s=$localize`:␟4ad112ce9bcd55dfd137792a86afe1b5a5b13cf8␟6130151799505109360:Long description`,d=$localize`:␟ff7cee38a2259526c519f878e71b964f41db4348␟5607669932062416162:Default`,h=$localize`:␟33e1c1d9fc05ca3f62fcc8a1170fc31ebae4229c␟6482135781715515974:Daemon default`,I=$localize`:␟419d940613972cc3fae9c8ea0a4306dbf80616e5␟7143579180750436311:Services`,$=$localize`:␟5894f7158499fdb89527af50c9f1cf7d4c95cad6␟4806606239259832590:-- Default --`,w=$localize`:␟514f6e12d035a6d9b00de6b3e55c18b73488da07␟8510110714273600559:true`,X=$localize`:␟774f5e6a183dea08393789b6f72e86afad729419␟1444040760165348386:false`,J=$localize`:␟82029b6db704c56a2aa3e82ac555b8655356b077␟7780292290002908449:The entered value is too high! It must not be greater than ${"\ufffd0\ufffd"}:INTERPOLATION:.`,re=$localize`:␟8ed8b3967a7326b81b191c9f490006e6a6777a9a␟3654125295495321381:The entered value is too low! It must not be lower than ${"\ufffd0\ufffd"}:INTERPOLATION:.`,[["formDir","ngForm"],n,t,o,s,d,h,I,$,w,X,J,re,["class","cd-col-form",4,"cdFormLoading"],[1,"cd-col-form"],["name","configForm","novalidate","",3,"formGroup"],[1,"card"],[1,"card-header"],["i18",""],[1,"card-body"],[1,"form-group","row"],[1,"cd-col-form-label"],[1,"cd-col-form-input"],["type","text","id","name","formControlName","name","readonly","",1,"form-control"],["class","form-group row",4,"ngIf"],["formGroupName","values"],[1,"cd-header"],[4,"ngFor","ngForOf"],[1,"card-footer"],["wrappingClass","text-right",3,"submitActionEvent","form","submitText"],["id","desc","formControlName","desc","readonly","",1,"form-control","resize-vertical"],["id","long_desc","formControlName","long_desc","readonly","",1,"form-control","resize-vertical"],["type","text","id","default","formControlName","default","readonly","",1,"form-control"],["type","text","id","daemon_default","formControlName","daemon_default","readonly","",1,"form-control"],["class","form-component-badge",4,"ngFor","ngForOf"],[1,"form-component-badge"],[1,"badge","badge-dark"],[1,"cd-col-form-label",3,"for"],["id","pool","name","pool",1,"form-select",3,"formControlName"],[3,"ngValue"],[1,"form-control",3,"type","id","placeholder","formControlName","step"],["class","invalid-feedback",4,"ngIf"],[1,"invalid-feedback"]]},template:function(t,o){1&t&&e.\u0275\u0275template(0,Ju,25,10,"div",13),2&t&&e.\u0275\u0275property("cdFormLoading",o.loading)},dependencies:[l.NgForOf,l.NgIf,oe.e,tt.G,Ge.S,we.a,Ve.C,ze.E,C.\u0275NgNoValidate,C.NgSelectOption,C.\u0275NgSelectMultipleOption,C.DefaultValueAccessor,C.SelectControlValueAccessor,C.NgControlStatus,C.NgControlStatusGroup,C.FormGroupDirective,C.FormControlName,C.FormGroupName],styles:[".form-component-badge[_ngcontent-%COMP%]{display:block;height:34px}.form-component-badge[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{margin-top:7px}.resize-vertical[_ngcontent-%COMP%]{resize:vertical}"]})}}var qu=r(91822);function ep(i,n){if(1&i&&(e.\u0275\u0275elementStart(0,"span"),e.\u0275\u0275text(1),e.\u0275\u0275element(2,"br"),e.\u0275\u0275elementEnd()),2&i){const t=n.$implicit,o=n.last;e.\u0275\u0275advance(),e.\u0275\u0275textInterpolate3(" ",t.section,": ",t.value,"",o?"":",","")}}function tp(i,n){if(1&i&&(e.\u0275\u0275elementStart(0,"span")(1,"span",23)(2,"span",24),e.\u0275\u0275text(3),e.\u0275\u0275pipe(4,"uppercase"),e.\u0275\u0275elementEnd()()()),2&i){const t=n.$implicit,o=e.\u0275\u0275nextContext(2);e.\u0275\u0275advance(),e.\u0275\u0275propertyInterpolate("title",o.flags[t]),e.\u0275\u0275advance(2),e.\u0275\u0275textInterpolate(e.\u0275\u0275pipeBind1(4,2,t))}}function np(i,n){if(1&i&&(e.\u0275\u0275elementStart(0,"span")(1,"span",24),e.\u0275\u0275text(2),e.\u0275\u0275elementEnd()()),2&i){const t=n.$implicit;e.\u0275\u0275advance(2),e.\u0275\u0275textInterpolate(t)}}function op(i,n){if(1&i&&(e.\u0275\u0275elementContainerStart(0),e.\u0275\u0275elementStart(1,"table",18)(2,"tbody")(3,"tr")(4,"td",19),e.\u0275\u0275i18n(5,0),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(6,"td",20),e.\u0275\u0275text(7),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(8,"tr")(9,"td",21),e.\u0275\u0275i18n(10,1),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(11,"td"),e.\u0275\u0275text(12),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(13,"tr")(14,"td",21),e.\u0275\u0275i18n(15,2),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(16,"td"),e.\u0275\u0275text(17),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(18,"tr")(19,"td",21),e.\u0275\u0275i18n(20,3),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(21,"td"),e.\u0275\u0275template(22,ep,3,3,"span",22),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(23,"tr")(24,"td",21),e.\u0275\u0275i18n(25,4),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(26,"td"),e.\u0275\u0275text(27),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(28,"tr")(29,"td",21),e.\u0275\u0275i18n(30,5),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(31,"td"),e.\u0275\u0275text(32),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(33,"tr")(34,"td",21),e.\u0275\u0275i18n(35,6),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(36,"td"),e.\u0275\u0275text(37),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(38,"tr")(39,"td",21),e.\u0275\u0275i18n(40,7),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(41,"td"),e.\u0275\u0275text(42),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(43,"tr")(44,"td",21),e.\u0275\u0275i18n(45,8),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(46,"td"),e.\u0275\u0275text(47),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(48,"tr")(49,"td",21),e.\u0275\u0275i18n(50,9),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(51,"td"),e.\u0275\u0275template(52,tp,5,4,"span",22),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(53,"tr")(54,"td",21),e.\u0275\u0275i18n(55,10),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(56,"td"),e.\u0275\u0275template(57,np,3,1,"span",22),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(58,"tr")(59,"td",21),e.\u0275\u0275i18n(60,11),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(61,"td"),e.\u0275\u0275text(62),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(63,"tr")(64,"td",21),e.\u0275\u0275i18n(65,12),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(66,"td"),e.\u0275\u0275text(67),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(68,"tr")(69,"td",21),e.\u0275\u0275i18n(70,13),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(71,"td"),e.\u0275\u0275text(72),e.\u0275\u0275pipe(73,"booleanText"),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(74,"tr")(75,"td",21),e.\u0275\u0275i18n(76,14),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(77,"td"),e.\u0275\u0275text(78),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(79,"tr")(80,"td",21),e.\u0275\u0275i18n(81,15),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(82,"td"),e.\u0275\u0275text(83),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(84,"tr")(85,"td",21),e.\u0275\u0275i18n(86,16),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(87,"td"),e.\u0275\u0275text(88),e.\u0275\u0275elementEnd()()()(),e.\u0275\u0275elementContainerEnd()),2&i){const t=e.\u0275\u0275nextContext();e.\u0275\u0275advance(7),e.\u0275\u0275textInterpolate(t.selection.name),e.\u0275\u0275advance(5),e.\u0275\u0275textInterpolate(t.selection.desc),e.\u0275\u0275advance(5),e.\u0275\u0275textInterpolate(t.selection.long_desc),e.\u0275\u0275advance(5),e.\u0275\u0275property("ngForOf",t.selection.value),e.\u0275\u0275advance(5),e.\u0275\u0275textInterpolate(t.selection.default),e.\u0275\u0275advance(5),e.\u0275\u0275textInterpolate(t.selection.daemon_default),e.\u0275\u0275advance(5),e.\u0275\u0275textInterpolate(t.selection.type),e.\u0275\u0275advance(5),e.\u0275\u0275textInterpolate(t.selection.min),e.\u0275\u0275advance(5),e.\u0275\u0275textInterpolate(t.selection.max),e.\u0275\u0275advance(5),e.\u0275\u0275property("ngForOf",t.selection.flags),e.\u0275\u0275advance(5),e.\u0275\u0275property("ngForOf",t.selection.services),e.\u0275\u0275advance(5),e.\u0275\u0275textInterpolate(t.selection.source),e.\u0275\u0275advance(5),e.\u0275\u0275textInterpolate(t.selection.level),e.\u0275\u0275advance(5),e.\u0275\u0275textInterpolate(e.\u0275\u0275pipeBind1(73,17,t.selection.can_update_at_runtime)),e.\u0275\u0275advance(6),e.\u0275\u0275textInterpolate(t.selection.tags),e.\u0275\u0275advance(5),e.\u0275\u0275textInterpolate(t.selection.enum_values),e.\u0275\u0275advance(5),e.\u0275\u0275textInterpolate(t.selection.see_also)}}class es{constructor(){this.flags={runtime:$localize`The value can be updated at runtime.`,no_mon_update:$localize`Daemons/clients do not pull this value from the
      monitor config database. We disallow setting this option via 'ceph config
      set ...'. This option should be configured via ceph.conf or via the
      command line.`,startup:$localize`Option takes effect only during daemon startup.`,cluster_create:$localize`Option only affects cluster creation.`,create:$localize`Option only affects daemon creation.`}}ngOnChanges(){this.selection&&(this.selection.services=p().split(this.selection.services,","))}static{this.\u0275fac=function(t){return new(t||es)}}static{this.\u0275cmp=e.\u0275\u0275defineComponent({type:es,selectors:[["cd-configuration-details"]],inputs:{selection:"selection"},features:[e.\u0275\u0275NgOnChangesFeature],decls:1,vars:1,consts:()=>{let n,t,o,s,d,h,I,$,w,X,J,re,de,Me,ve,Se,$e;return n=$localize`:␟cff1428d10d59d14e45edec3c735a27b5482db59␟8953033926734869941:Name`,t=$localize`:␟eec715de352a6b114713b30b640d319fa78207a0␟4902817035128594900:Description`,o=$localize`:␟4ad112ce9bcd55dfd137792a86afe1b5a5b13cf8␟6130151799505109360:Long description`,s=$localize`:␟26fb5f81b3581f06b9210defb0e71dc69a67e819␟2712010257983367841:Current values`,d=$localize`:␟ff7cee38a2259526c519f878e71b964f41db4348␟5607669932062416162:Default`,h=$localize`:␟33e1c1d9fc05ca3f62fcc8a1170fc31ebae4229c␟6482135781715515974:Daemon default`,I=$localize`:␟f61c6867295f3b53d23557021f2f4e0aa1d0b8fc␟8650499415827640724:Type`,$=$localize`:␟9abcd7c82643d60c22733470463f74e4a54bc069␟4912803901980915876:Min`,w=$localize`:␟c3ced4d162a0a55ee233a187ce7208ba5e922418␟3667949571823271511:Max`,X=$localize`:␟920617c6a1a4805e53bcb5af6a9c76f8387e89c6␟2870788902465061969:Flags`,J=$localize`:␟419d940613972cc3fae9c8ea0a4306dbf80616e5␟7143579180750436311:Services`,re=$localize`:␟6834fa6b43d1ecbdf147c48dd9c4d72f1484571d␟9155608366859514313:Source`,de=$localize`:␟a446fb0eb11fbffcac805ece5a2d306d24e733d8␟3733215288982610673:Level`,Me=$localize`:␟39f2fb094e9b2eda13163fa3f3a31594cf9c1307␟156919104722494837:Can be updated at runtime (editable)`,ve=$localize`:␟cafc87479686947e2590b9f588a88040aeaf660b␟7886570921510760899:Tags`,Se=$localize`:␟ab0089ef47af61ca1d137bc908b96c290dfd9287␟4019384818635807349:Enum values`,$e=$localize`:␟819476f1264f1659f38e86f6abb542141b184832␟3538946315854308688:See also`,[n,t,o,s,d,h,I,$,w,X,J,re,de,Me,ve,Se,$e,[4,"ngIf"],["data-testid","config-details-table",1,"cds--data-table--sort","cds--data-table--no-border","cds--data-table","cds--data-table--md"],[1,"bold","w-25"],[1,"w-75"],[1,"bold"],[4,"ngFor","ngForOf"],[3,"title"],[1,"badge","badge-dark","me-2"]]},template:function(t,o){1&t&&e.\u0275\u0275template(0,op,89,19,"ng-container",17),2&t&&e.\u0275\u0275property("ngIf",o.selection)},dependencies:[l.NgForOf,l.NgIf,l.UpperCasePipe,qu.s]})}}const ip=["confValTpl"],ap=["confFlagTpl"];function sp(i,n){if(1&i&&e.\u0275\u0275element(0,"cd-configuration-details",4),2&i){const t=e.\u0275\u0275nextContext();e.\u0275\u0275property("selection",t.expandedRow)}}function rp(i,n){if(1&i&&(e.\u0275\u0275elementStart(0,"span"),e.\u0275\u0275text(1),e.\u0275\u0275element(2,"br"),e.\u0275\u0275elementEnd()),2&i){const t=n.$implicit,o=n.last;e.\u0275\u0275advance(),e.\u0275\u0275textInterpolate3(" ",t.section,": ",t.value,"",o?"":",","")}}function lp(i,n){if(1&i&&(e.\u0275\u0275elementStart(0,"span"),e.\u0275\u0275template(1,rp,3,3,"span",6),e.\u0275\u0275elementEnd()),2&i){const t=e.\u0275\u0275nextContext().data.value;e.\u0275\u0275advance(),e.\u0275\u0275property("ngForOf",t)}}function _p(i,n){if(1&i&&e.\u0275\u0275template(0,lp,2,1,"span",5),2&i){const t=n.data.value;e.\u0275\u0275property("ngIf",t)}}class ts extends M.D{constructor(n,t,o){super(),this.authStorageService=n,this.configurationService=t,this.actionLabels=o,this.data=[],this.icons=g.FI,this.selection=new N.y,this.filters=[{name:$localize`Modified`,prop:"modified",filterOptions:[$localize`yes`,$localize`no`],filterInitValue:$localize`yes`,filterPredicate:(h,I)=>!!("yes"===I&&h.hasOwnProperty("value")||"no"===I&&!h.hasOwnProperty("value"))},{name:$localize`Level`,prop:"level",filterOptions:["basic","advanced","dev"],filterPredicate:(h,I)=>{let $;var X;(X=$||($={}))[X.basic=0]="basic",X[X.advanced=1]="advanced",X[X.dev=2]="dev";const w=$[I];return $[h.level]<=w}},{name:$localize`Service`,prop:"services",filterOptions:["mon","mgr","osd","mds","common","mds_client","rgw"],filterPredicate:(h,I)=>h.services.includes(I)},{name:$localize`Source`,prop:"source",filterOptions:["mon"],filterPredicate:(h,I)=>!!h.hasOwnProperty("source")&&h.source.includes(I)}],this.permission=this.authStorageService.getPermissions().configOpt;const s=()=>this.selection.first()&&`${encodeURIComponent(this.selection.first().name)}`,d={permission:"update",icon:g.FI.edit,routerLink:()=>`/configuration/edit/${s()}`,name:this.actionLabels.EDIT,disable:()=>!this.isEditable(this.selection)};this.tableActions=[d]}ngOnInit(){this.columns=[{canAutoResize:!0,prop:"name",name:$localize`Name`},{prop:"desc",name:$localize`Description`,cellClass:"wrap"},{prop:"value",name:$localize`Current value`,cellClass:"wrap",cellTemplate:this.confValTpl},{prop:"default",name:$localize`Default`,cellClass:"wrap"},{prop:"can_update_at_runtime",name:$localize`Editable`,cellTransformation:b.x.checkIcon,flexGrow:.4,cellClass:"text-center"}]}updateSelection(n){this.selection=n}getConfigurationList(n){this.configurationService.getConfigData().subscribe(t=>{this.data=t},()=>{n.error()})}isEditable(n){return 1===n.selected.length&&(!!this.selection.selected[0].name.includes("rgw")||this.selection.selected[0].can_update_at_runtime)}static{this.\u0275fac=function(t){return new(t||ts)(e.\u0275\u0275directiveInject(c.v),e.\u0275\u0275directiveInject(P.s),e.\u0275\u0275directiveInject(m.Ss))}}static{this.\u0275cmp=e.\u0275\u0275defineComponent({type:ts,selectors:[["cd-configuration"]],viewQuery:function(t,o){if(1&t&&(e.\u0275\u0275viewQuery(ip,7),e.\u0275\u0275viewQuery(ap,5)),2&t){let s;e.\u0275\u0275queryRefresh(s=e.\u0275\u0275loadQuery())&&(o.confValTpl=s.first),e.\u0275\u0275queryRefresh(s=e.\u0275\u0275loadQuery())&&(o.confFlagTpl=s.first)}},features:[e.\u0275\u0275InheritDefinitionFeature],decls:5,vars:7,consts:[["confValTpl",""],["selectionType","single",3,"fetchData","setExpandedRow","updateSelection","data","columns","extraFilterableColumns","hasDetails"],[1,"table-actions",3,"permission","selection","tableActions"],[3,"selection",4,"cdTableDetail"],[3,"selection"],[4,"ngIf"],[4,"ngFor","ngForOf"]],template:function(t,o){if(1&t){const s=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"cd-table",1),e.\u0275\u0275listener("fetchData",function(h){return e.\u0275\u0275restoreView(s),e.\u0275\u0275resetView(o.getConfigurationList(h))})("setExpandedRow",function(h){return e.\u0275\u0275restoreView(s),e.\u0275\u0275resetView(o.setExpandedRow(h))})("updateSelection",function(h){return e.\u0275\u0275restoreView(s),e.\u0275\u0275resetView(o.updateSelection(h))}),e.\u0275\u0275element(1,"cd-table-actions",2),e.\u0275\u0275template(2,sp,1,1,"cd-configuration-details",3),e.\u0275\u0275elementEnd(),e.\u0275\u0275template(3,_p,1,1,"ng-template",null,0,e.\u0275\u0275templateRefExtractor)}2&t&&(e.\u0275\u0275property("data",o.data)("columns",o.columns)("extraFilterableColumns",o.filters)("hasDetails",!0),e.\u0275\u0275advance(),e.\u0275\u0275property("permission",o.permission)("selection",o.selection)("tableActions",o.tableActions))},dependencies:[l.NgForOf,l.NgIf,We.O,at.j,Et.N,es],styles:[".filter[_ngcontent-%COMP%]{padding-right:8px}.fa-stack[_ngcontent-%COMP%]{font-size:.79rem}.fa-stack[_ngcontent-%COMP%]   .fa-stack-1x[_ngcontent-%COMP%]{margin-left:8px;margin-top:5px}  cd-configuration td[cdstabledata].wrap{word-break:break-all}"]})}}class ii{constructor(n){this.http=n,this.baseURL="api/cluster"}getStatus(){return this.http.get(`${this.baseURL}`,{headers:{Accept:"application/vnd.ceph.api.v0.1+json"}})}updateStatus(n){return this.http.put(`${this.baseURL}`,{status:n},{headers:{Accept:"application/vnd.ceph.api.v0.1+json"}})}static{this.\u0275fac=function(t){return new(t||ii)(e.\u0275\u0275inject(T.HttpClient))}}static{this.\u0275prov=e.\u0275\u0275defineInjectable({token:ii,factory:ii.\u0275fac,providedIn:"root"})}}var Ht=r(7466),dp=r(60156),up=r(92319);class pp{constructor(n,t=1,o=0){const s={params:n,headers:{Accept:`application/vnd.ceph.api.v${t}.${o}+json`},observe:"response"};return s}}class Ct{constructor(n,t){this.http=n,this.deviceService=t,this.path="api/osd",this.uiPath="ui-api/osd",this.osdDevices=[],this.isDeployementModeSimple=!0,this.osdRecvSpeedModalPriorities={KNOWN_PRIORITIES:[{name:null,text:$localize`-- Select the priority --`,values:{osd_max_backfills:null,osd_recovery_max_active:null,osd_recovery_max_single_start:null,osd_recovery_sleep:null}},{name:"low",text:$localize`Low`,values:{osd_max_backfills:1,osd_recovery_max_active:1,osd_recovery_max_single_start:1,osd_recovery_sleep:.5}},{name:"default",text:$localize`Default`,values:{osd_max_backfills:1,osd_recovery_max_active:3,osd_recovery_max_single_start:1,osd_recovery_sleep:0}},{name:"high",text:$localize`High`,values:{osd_max_backfills:4,osd_recovery_max_active:4,osd_recovery_max_single_start:4,osd_recovery_sleep:0}}]}}create(n,t,o="drive_groups"){const s={method:o,data:n,tracking_id:t};return this.http.post(this.path,s,{observe:"response"})}getList(n){return new up.z(this.http.get(this.path,new pp(n,1,1)))}getOsdSettings(){return this.http.get(`${this.path}/settings`,{headers:{Accept:"application/vnd.ceph.api.v0.1+json"}})}getDetails(n){return this.http.get(`${this.path}/${n}`)}getSmartData(n){return this.http.get(`${this.path}/${n}/smart`)}scrub(n,t){return this.http.post(`${this.path}/${n}/scrub?deep=${t}`,null)}getDeploymentOptions(){return this.http.get(`${this.uiPath}/deployment_options`)}getFlags(){return this.http.get(`${this.path}/flags`)}updateFlags(n){return this.http.put(`${this.path}/flags`,{flags:n})}updateIndividualFlags(n,t){return this.http.put(`${this.path}/flags/individual`,{flags:n,ids:t})}markOut(n){return this.http.put(`${this.path}/${n}/mark`,{action:"out"})}markIn(n){return this.http.put(`${this.path}/${n}/mark`,{action:"in"})}markDown(n){return this.http.put(`${this.path}/${n}/mark`,{action:"down"})}reweight(n,t){return this.http.post(`${this.path}/${n}/reweight`,{weight:t})}update(n,t){return this.http.put(`${this.path}/${n}`,{device_class:t})}markLost(n){return this.http.put(`${this.path}/${n}/mark`,{action:"lost"})}purge(n){return this.http.post(`${this.path}/${n}/purge`,null)}destroy(n){return this.http.post(`${this.path}/${n}/destroy`,null)}delete(n,t,o){const s={preserve_id:t?"true":"false",force:o?"true":"false"};return this.http.delete(`${this.path}/${n}`,{observe:"response",params:s})}safeToDestroy(n){return this.http.get(`${this.path}/safe_to_destroy?ids=${n}`)}safeToDelete(n){return this.http.get(`${this.path}/safe_to_delete?svc_ids=${n}`)}getDevices(n){return this.http.get(`${this.path}/${n}/devices`).pipe((0,v.map)(t=>t.map(o=>this.deviceService.prepareDevice(o))))}static{this.\u0275fac=function(t){return new(t||Ct)(e.\u0275\u0275inject(T.HttpClient),e.\u0275\u0275inject(dp.g))}}static{this.\u0275prov=e.\u0275\u0275defineInjectable({token:Ct,factory:Ct.\u0275fac,providedIn:"root"})}}var ai=r(48856),nl=r(53075);class Il{constructor(){this.reset(),this.formatterService=new Rn.k,this.deviceSelectionAttrs={"sys_api.vendor":{name:"vendor"},"sys_api.model":{name:"model"},device_id:{name:"device_id"},human_readable_type:{name:"rotational",formatter:n=>"hdd"===n.toLowerCase()},"sys_api.size":{name:"size",formatter:n=>this.formatterService.format_number(n,1024,["B","KB","MB","GB","TB","PB"]).replace(" ","")}}}reset(){this.spec={service_type:"osd",service_id:`dashboard-${p().now()}`}}setName(n){this.spec.service_id=n}setHostPattern(n){this.spec.host_pattern=n}setDeviceSelection(n,t){const o=`${n}_devices`;this.spec[o]={},t.forEach(s=>{const d=this.deviceSelectionAttrs[s.prop];if(d){const h=d.name;this.spec[o][h]=d.formatter?d.formatter(s.value.raw):s.value.raw}})}clearDeviceSelection(n){const t=`${n}_devices`;delete this.spec[t]}setSlots(n,t){const o=`${n}_slots`;0===t?delete this.spec[o]:this.spec[o]=t}setFeature(n,t){t?this.spec[n]=!0:delete this.spec[n]}}var At,mp=r(33117),fp=r(80893),si=r(28886),tn=r(98996);!function(i){i.HOST_LIST="get_hosts",i.HOST_ADD="add_host",i.HOST_REMOVE="remove_host",i.HOST_LABEL_ADD="add_host_label",i.HOST_LABEL_REMOVE="remove_host_label",i.HOST_MAINTENANCE_ENTER="enter_host_maintenance",i.HOST_MAINTENANCE_EXIT="exit_host_maintenance",i.HOST_FACTS="get_facts",i.HOST_DRAIN="drain_host",i.SERVICE_LIST="describe_service",i.SERVICE_CREATE="apply",i.SERVICE_EDIT="apply",i.SERVICE_DELETE="remove_service",i.SERVICE_RELOAD="service_action",i.DAEMON_LIST="list_daemons",i.OSD_GET_REMOVE_STATUS="remove_osds_status",i.OSD_CREATE="apply_drivegroups",i.OSD_DELETE="remove_osds",i.DEVICE_LIST="get_inventory",i.DEVICE_BLINK_LIGHT="blink_device_light"}(At||(At={}));var No=r(39113),Yt=r(77867);class ns{transform(n){if(p().isUndefined(n))return $localize`no spec`;if(p().get(n,"unmanaged",!1))return $localize`unmanaged`;const t=[],o=p().get(n,"placement.hosts"),s=p().get(n,"placement.count"),d=p().get(n,"placement.label"),h=p().get(n,"placement.host_pattern");return p().isArray(o)&&t.push(...o),p().isNumber(s)&&t.push($localize`count:${s}`),p().isString(d)&&t.push($localize`label:${d}`),p().isString(h)&&t.push(h),t.join(";")}static{this.\u0275fac=function(t){return new(t||ns)}}static{this.\u0275pipe=e.\u0275\u0275definePipe({name:"placement",type:ns,pure:!0})}}var Al=r(46459),ol=r(19830),Dl=r(20961),yl=r(3140),nn=r(24192),Ut=r(69081);function Ep(i,n){1&i&&(e.\u0275\u0275elementStart(0,"span",25),e.\u0275\u0275i18n(1,5),e.\u0275\u0275elementEnd())}function gp(i,n){1&i&&(e.\u0275\u0275elementStart(0,"span",25),e.\u0275\u0275i18n(1,6),e.\u0275\u0275elementEnd())}function Cp(i,n){1&i&&(e.\u0275\u0275elementStart(0,"span",25),e.\u0275\u0275i18n(1,7),e.\u0275\u0275elementEnd())}class os{constructor(n,t,o,s,d,h,I,$){this.activeModal=n,this.actionLabels=t,this.rgwMultisiteService=o,this.rgwZoneService=s,this.notificationService=d,this.rgwZonegroupService=h,this.rgwRealmService=I,this.modalService=$,this.sub=new K.Subscription,this.submitAction=new e.EventEmitter,this.createForm()}createForm(){this.createMultisiteEntitiesForm=new Ue.$({realmName:new C.FormControl(null,{validators:[C.Validators.required]}),zonegroupName:new C.FormControl(null,{validators:[C.Validators.required]}),zoneName:new C.FormControl(null,{validators:[C.Validators.required]})})}submit(){const n=this.createMultisiteEntitiesForm.value;this.realm=new nn.SX,this.realm.name=n.realmName,this.zonegroup=new nn.Oe,this.zonegroup.name=n.zonegroupName,this.zonegroup.endpoints="",this.zone=new nn.$H,this.zone.name=n.zoneName,this.zone.endpoints="",this.zone.system_key=new nn.B5,this.zone.system_key.access_key="",this.zone.system_key.secret_key="",this.rgwRealmService.create(this.realm,!0).toPromise().then(()=>{this.rgwZonegroupService.create(this.realm,this.zonegroup,!0,!0).toPromise().then(()=>{this.rgwZoneService.create(this.zone,this.zonegroup,!0,!0,this.zone.endpoints).toPromise().then(()=>{this.notificationService.show(Ae._.success,$localize`Realm/Zonegroup/Zone created successfully`),this.submitAction.emit(),this.activeModal.close()}).catch(()=>{this.notificationService.show(Ae._.error,$localize`Realm/Zonegroup/Zone creation failed`)})})})}static{this.\u0275fac=function(t){return new(t||os)(e.\u0275\u0275directiveInject(G.NgbActiveModal),e.\u0275\u0275directiveInject(m.Ss),e.\u0275\u0275directiveInject(Al.A),e.\u0275\u0275directiveInject(Dl.w),e.\u0275\u0275directiveInject(Q.J),e.\u0275\u0275directiveInject(yl.Z),e.\u0275\u0275directiveInject(ol.$),e.\u0275\u0275directiveInject(Yt.B))}}static{this.\u0275cmp=e.\u0275\u0275defineComponent({type:os,selectors:[["cd-create-rgw-service-entities"]],outputs:{submitAction:"submitAction"},decls:29,vars:6,consts:()=>{let n,t,o,s,d,h,I;return n=$localize`:form title␟12bc43471dd62dce35cdb2199fd886695d8c1d66␟4813719353395511341:Create Realm/Zone Group/Zone `,t=$localize`:␟1b5ae35d753824820b370dc45362aeabbd0ec18d␟2317799298267426958:Realm Name`,o=$localize`:␟4e441008994226032fc08dc6aa5295451e317e22␟9179322500224757581:Zone Group Name`,s=$localize`:␟9908ce895693044630b8188ac54903ccdde33f2f␟2331642177230896856:Zone Name`,d=$localize`:␟7cbdabcece469fab89cfa687ab152bca18b97498␟1417693714872528491:This field is required.`,h=$localize`:␟7cbdabcece469fab89cfa687ab152bca18b97498␟1417693714872528491:This field is required.`,I=$localize`:␟7cbdabcece469fab89cfa687ab152bca18b97498␟1417693714872528491:This field is required.`,[["formDir","ngForm"],n,t,o,s,d,h,I,[3,"modalRef"],[1,"modal-title"],[1,"modal-content"],["name","createMultisiteEntitiesForm","novalidate","",3,"formGroup"],[1,"modal-body"],["type","info","spacingClass","mb-3"],[1,"form-group","row"],["for","realmName",1,"cd-col-form-label","required"],[1,"cd-col-form-input"],["type","text","placeholder","Realm name...","id","realmName","name","realmName","formControlName","realmName",1,"form-control"],["class","invalid-feedback",4,"ngIf"],["for","zonegroupName",1,"cd-col-form-label","required"],["type","text","placeholder","Zone group name...","id","zonegroupName","name","zonegroupName","formControlName","zonegroupName",1,"form-control"],["for","zoneName",1,"cd-col-form-label","required"],["type","text","placeholder","Zone name...","id","zoneName","name","zoneName","formControlName","zoneName",1,"form-control"],[1,"modal-footer"],[3,"submitActionEvent","form"],[1,"invalid-feedback"]]},template:function(t,o){if(1&t){const s=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"cd-modal",8),e.\u0275\u0275elementContainerStart(1,9),e.\u0275\u0275i18n(2,1),e.\u0275\u0275elementContainerEnd(),e.\u0275\u0275elementContainerStart(3,10),e.\u0275\u0275elementStart(4,"form",11,0)(6,"div",12)(7,"cd-alert-panel",13),e.\u0275\u0275text(8,"The realm/zone group/zone created will be set as default and master. "),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(9,"div",14)(10,"label",15),e.\u0275\u0275i18n(11,2),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(12,"div",16),e.\u0275\u0275element(13,"input",17),e.\u0275\u0275template(14,Ep,2,0,"span",18),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(15,"div",14)(16,"label",19),e.\u0275\u0275i18n(17,3),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(18,"div",16),e.\u0275\u0275element(19,"input",20),e.\u0275\u0275template(20,gp,2,0,"span",18),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(21,"div",14)(22,"label",21),e.\u0275\u0275i18n(23,4),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(24,"div",16),e.\u0275\u0275element(25,"input",22),e.\u0275\u0275template(26,Cp,2,0,"span",18),e.\u0275\u0275elementEnd()()(),e.\u0275\u0275elementStart(27,"div",23)(28,"cd-form-button-panel",24),e.\u0275\u0275listener("submitActionEvent",function(){return e.\u0275\u0275restoreView(s),e.\u0275\u0275resetView(o.submit())}),e.\u0275\u0275elementEnd()()(),e.\u0275\u0275elementContainerEnd(),e.\u0275\u0275elementEnd()}if(2&t){const s=e.\u0275\u0275reference(5);e.\u0275\u0275property("modalRef",o.activeModal),e.\u0275\u0275advance(4),e.\u0275\u0275property("formGroup",o.createMultisiteEntitiesForm),e.\u0275\u0275advance(10),e.\u0275\u0275property("ngIf",o.createMultisiteEntitiesForm.showError("realmName",s,"required")),e.\u0275\u0275advance(6),e.\u0275\u0275property("ngIf",o.createMultisiteEntitiesForm.showError("zonegroupName",s,"required")),e.\u0275\u0275advance(6),e.\u0275\u0275property("ngIf",o.createMultisiteEntitiesForm.showError("zoneName",s,"required")),e.\u0275\u0275advance(2),e.\u0275\u0275property("form",o.createMultisiteEntitiesForm)}},dependencies:[l.NgIf,Ut.z,nt.m,oe.e,Ge.S,we.a,Ve.C,ze.E,C.\u0275NgNoValidate,C.DefaultValueAccessor,C.NgControlStatus,C.NgControlStatusGroup,C.FormGroupDirective,C.FormControlName]})}}var Ll=r(59870),Sp=r(75180),il=r(66668),hp=r(31345),Dt=r(43808),al=r(15643),Tp=r(48693),ri=r(12302);const is=()=>["mgmt-gateway"],Fp=()=>["rgw","iscsi","ingress","oauth2-proxy","mgmt-gateway"],as=()=>["ingress"],lo=i=>({required:i}),$l=()=>["mds","rgw","nfs","iscsi","nvmeof","smb","ingress"],xl=()=>["iscsi"],vp=()=>["V2c","V3"],Mp=()=>["SHA","MD5"],Rp=()=>["DES","AES"],Op=()=>["rgw","ingress"];function Pp(i,n){if(1&i){const t=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"cd-alert-panel",204),e.\u0275\u0275i18nStart(1,6),e.\u0275\u0275elementStart(2,"a",205),e.\u0275\u0275listener("click",function(){e.\u0275\u0275restoreView(t);const s=e.\u0275\u0275nextContext();return e.\u0275\u0275resetView(s.createMultisiteSetup())}),e.\u0275\u0275elementEnd(),e.\u0275\u0275i18nEnd(),e.\u0275\u0275elementEnd()}}function bp(i,n){1&i&&(e.\u0275\u0275elementStart(0,"cd-alert-panel",204),e.\u0275\u0275i18n(1,7),e.\u0275\u0275elementEnd())}function Np(i,n){if(1&i&&(e.\u0275\u0275elementStart(0,"cd-alert-panel",204),e.\u0275\u0275i18n(1,8),e.\u0275\u0275elementEnd()),2&i){const t=e.\u0275\u0275nextContext();e.\u0275\u0275advance(),e.\u0275\u0275i18nExp(t.currentURL)(t.port)(t.currentURL)(t.port),e.\u0275\u0275i18nApply(1)}}function Ip(i,n){1&i&&(e.\u0275\u0275elementStart(0,"cd-alert-panel",206),e.\u0275\u0275i18nStart(1,9),e.\u0275\u0275element(2,"a",207),e.\u0275\u0275i18nEnd(),e.\u0275\u0275elementEnd())}function Ap(i,n){if(1&i&&(e.\u0275\u0275elementStart(0,"option",208),e.\u0275\u0275text(1),e.\u0275\u0275elementEnd()),2&i){const t=n.$implicit;e.\u0275\u0275property("value",t),e.\u0275\u0275advance(),e.\u0275\u0275textInterpolate1(" ",t," ")}}function Dp(i,n){1&i&&(e.\u0275\u0275elementStart(0,"span",209),e.\u0275\u0275i18n(1,10),e.\u0275\u0275elementEnd())}function yp(i,n){1&i&&(e.\u0275\u0275elementStart(0,"option",192),e.\u0275\u0275i18n(1,12),e.\u0275\u0275elementEnd()),2&i&&e.\u0275\u0275property("ngValue",null)}function Lp(i,n){1&i&&(e.\u0275\u0275elementStart(0,"option",192),e.\u0275\u0275i18n(1,13),e.\u0275\u0275elementEnd()),2&i&&e.\u0275\u0275property("ngValue",null)}function $p(i,n){1&i&&(e.\u0275\u0275elementStart(0,"option",192),e.\u0275\u0275i18n(1,14),e.\u0275\u0275elementEnd()),2&i&&e.\u0275\u0275property("ngValue",null)}function xp(i,n){if(1&i&&(e.\u0275\u0275elementStart(0,"option",208),e.\u0275\u0275text(1),e.\u0275\u0275elementEnd()),2&i){const t=n.$implicit;e.\u0275\u0275property("value",t.service_name),e.\u0275\u0275advance(),e.\u0275\u0275textInterpolate(t.service_name)}}function Up(i,n){1&i&&(e.\u0275\u0275elementStart(0,"span",209),e.\u0275\u0275i18n(1,15),e.\u0275\u0275elementEnd())}function wp(i,n){if(1&i){const t=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"div",188)(1,"label",210),e.\u0275\u0275i18n(2,11),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(3,"div",190)(4,"select",211),e.\u0275\u0275listener("change",function(){e.\u0275\u0275restoreView(t);const s=e.\u0275\u0275nextContext();return e.\u0275\u0275resetView(s.prePopulateId())}),e.\u0275\u0275template(5,yp,2,1,"option",212)(6,Lp,2,1,"option",212)(7,$p,2,1,"option",212)(8,xp,2,2,"option",193),e.\u0275\u0275elementEnd(),e.\u0275\u0275template(9,Up,2,0,"span",194),e.\u0275\u0275elementEnd()()}if(2&i){const t=e.\u0275\u0275nextContext(),o=e.\u0275\u0275reference(7);e.\u0275\u0275advance(),e.\u0275\u0275property("ngClass",e.\u0275\u0275pureFunction1(7,lo,e.\u0275\u0275pureFunction0(6,as).includes(t.serviceForm.controls.service_type.value))),e.\u0275\u0275advance(4),e.\u0275\u0275property("ngIf",null===t.services),e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf",null!==t.services&&0===t.services.length),e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf",null!==t.services&&t.services.length>0),e.\u0275\u0275advance(),e.\u0275\u0275property("ngForOf",t.services),e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf",t.serviceForm.showError("backend_service",o,"required"))}}function Gp(i,n){1&i&&(e.\u0275\u0275elementStart(0,"option",192),e.\u0275\u0275i18n(1,18),e.\u0275\u0275elementEnd()),2&i&&e.\u0275\u0275property("ngValue",null)}function Hp(i,n){1&i&&(e.\u0275\u0275elementStart(0,"option",192),e.\u0275\u0275i18n(1,19),e.\u0275\u0275elementEnd()),2&i&&e.\u0275\u0275property("ngValue",null)}function Vp(i,n){1&i&&(e.\u0275\u0275elementStart(0,"option",192),e.\u0275\u0275i18n(1,20),e.\u0275\u0275elementEnd()),2&i&&e.\u0275\u0275property("ngValue",null)}function Bp(i,n){if(1&i&&(e.\u0275\u0275elementStart(0,"option",208),e.\u0275\u0275text(1),e.\u0275\u0275elementEnd()),2&i){const t=n.$implicit;e.\u0275\u0275property("value",t.pool_name),e.\u0275\u0275advance(),e.\u0275\u0275textInterpolate(t.pool_name)}}function zp(i,n){1&i&&(e.\u0275\u0275elementStart(0,"span",209),e.\u0275\u0275i18n(1,21),e.\u0275\u0275elementEnd())}function Xp(i,n){if(1&i){const t=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"div",188)(1,"label",213),e.\u0275\u0275i18n(2,16),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(3,"div",190)(4,"select",214),e.\u0275\u0275listener("change",function(){e.\u0275\u0275restoreView(t);const s=e.\u0275\u0275nextContext();return e.\u0275\u0275resetView(s.setNvmeServiceId())}),e.\u0275\u0275template(5,Gp,2,1,"option",212)(6,Hp,2,1,"option",212)(7,Vp,2,1,"option",212)(8,Bp,2,2,"option",193),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(9,"cd-help-text"),e.\u0275\u0275i18n(10,17),e.\u0275\u0275elementEnd(),e.\u0275\u0275template(11,zp,2,0,"span",194),e.\u0275\u0275elementEnd()()}if(2&i){const t=e.\u0275\u0275nextContext(),o=e.\u0275\u0275reference(7);e.\u0275\u0275advance(5),e.\u0275\u0275property("ngIf",null===t.rbdPools),e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf",t.rbdPools&&0===t.rbdPools.length),e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf",t.rbdPools&&t.rbdPools.length>0),e.\u0275\u0275advance(),e.\u0275\u0275property("ngForOf",t.rbdPools),e.\u0275\u0275advance(3),e.\u0275\u0275property("ngIf",t.serviceForm.showError("pool",o,"required"))}}function kp(i,n){1&i&&(e.\u0275\u0275elementStart(0,"span",209),e.\u0275\u0275i18n(1,24),e.\u0275\u0275elementEnd())}function jp(i,n){if(1&i){const t=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"div",188)(1,"label",215)(2,"span"),e.\u0275\u0275i18n(3,22),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(4,"div",190)(5,"div",216)(6,"input",217),e.\u0275\u0275listener("change",function(){e.\u0275\u0275restoreView(t);const s=e.\u0275\u0275nextContext();return e.\u0275\u0275resetView(s.setNvmeServiceId())}),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(7,"cd-help-text"),e.\u0275\u0275i18n(8,23),e.\u0275\u0275elementEnd(),e.\u0275\u0275template(9,kp,2,0,"span",194),e.\u0275\u0275elementEnd()()}if(2&i){const t=e.\u0275\u0275nextContext(),o=e.\u0275\u0275reference(7);e.\u0275\u0275advance(9),e.\u0275\u0275property("ngIf",t.serviceForm.showError("service_id",o,"required"))}}function Wp(i,n){if(1&i&&(e.\u0275\u0275elementStart(0,"span",221),e.\u0275\u0275i18n(1,26),e.\u0275\u0275elementEnd()),2&i){const t=e.\u0275\u0275nextContext(2);e.\u0275\u0275advance(),e.\u0275\u0275i18nExp(t.serviceForm.controls.service_type.value),e.\u0275\u0275i18nApply(1)}}function Kp(i,n){1&i&&(e.\u0275\u0275elementStart(0,"span",209),e.\u0275\u0275i18n(1,27),e.\u0275\u0275elementEnd())}function Qp(i,n){1&i&&(e.\u0275\u0275elementStart(0,"span",209),e.\u0275\u0275i18n(1,28),e.\u0275\u0275elementEnd())}function Yp(i,n){1&i&&(e.\u0275\u0275elementStart(0,"span",209),e.\u0275\u0275i18n(1,29),e.\u0275\u0275elementEnd())}function Jp(i,n){if(1&i&&(e.\u0275\u0275elementStart(0,"div",188)(1,"label",218)(2,"span"),e.\u0275\u0275i18n(3,25),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(4,"div",190)(5,"div",216),e.\u0275\u0275template(6,Wp,2,1,"span",219),e.\u0275\u0275element(7,"input",220),e.\u0275\u0275elementEnd(),e.\u0275\u0275template(8,Kp,2,0,"span",194)(9,Qp,2,0,"span",194)(10,Yp,2,0,"span",194),e.\u0275\u0275elementEnd()()),2&i){const t=e.\u0275\u0275nextContext(),o=e.\u0275\u0275reference(7);e.\u0275\u0275advance(),e.\u0275\u0275property("ngClass",e.\u0275\u0275pureFunction1(6,lo,e.\u0275\u0275pureFunction0(5,$l).includes(t.serviceForm.controls.service_type.value))),e.\u0275\u0275advance(5),e.\u0275\u0275property("ngIf",t.serviceForm.controls.service_type.value&&e.\u0275\u0275pureFunction0(8,$l).includes(t.serviceForm.controls.service_type.value)),e.\u0275\u0275advance(2),e.\u0275\u0275property("ngIf",t.serviceForm.showError("service_id",o,"required")),e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf",t.serviceForm.showError("service_id",o,"uniqueName")),e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf",t.serviceForm.showError("service_id",o,"mdsPattern"))}}function Zp(i,n){1&i&&(e.\u0275\u0275elementStart(0,"option",225),e.\u0275\u0275i18n(1,31),e.\u0275\u0275elementEnd())}function qp(i,n){if(1&i&&(e.\u0275\u0275elementStart(0,"option",208),e.\u0275\u0275text(1),e.\u0275\u0275elementEnd()),2&i){const t=n.$implicit;e.\u0275\u0275property("value",t.name),e.\u0275\u0275advance(),e.\u0275\u0275textInterpolate1(" ",t.name," ")}}function em(i,n){if(1&i&&(e.\u0275\u0275elementStart(0,"div",188)(1,"label",222),e.\u0275\u0275i18n(2,30),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(3,"div",190)(4,"select",223),e.\u0275\u0275template(5,Zp,2,0,"option",224)(6,qp,2,2,"option",193),e.\u0275\u0275elementEnd()()()),2&i){const t=e.\u0275\u0275nextContext();e.\u0275\u0275advance(4),e.\u0275\u0275attribute("disabled",!(0!==t.realmList.length&&!t.editing)||null),e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf",0===t.realmList.length),e.\u0275\u0275advance(),e.\u0275\u0275property("ngForOf",t.realmList)}}function tm(i,n){if(1&i&&(e.\u0275\u0275elementStart(0,"option",208),e.\u0275\u0275text(1),e.\u0275\u0275elementEnd()),2&i){const t=n.$implicit;e.\u0275\u0275property("value",t.name),e.\u0275\u0275advance(),e.\u0275\u0275textInterpolate1(" ",t.name," ")}}function nm(i,n){if(1&i&&(e.\u0275\u0275elementStart(0,"div",188)(1,"label",226),e.\u0275\u0275i18n(2,32),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(3,"div",190)(4,"select",227),e.\u0275\u0275template(5,tm,2,2,"option",193),e.\u0275\u0275elementEnd()()()),2&i){const t=e.\u0275\u0275nextContext();e.\u0275\u0275advance(4),e.\u0275\u0275attribute("disabled",!(0!==t.zonegroupList.length&&!t.editing)||null),e.\u0275\u0275advance(),e.\u0275\u0275property("ngForOf",t.zonegroupList)}}function om(i,n){if(1&i&&(e.\u0275\u0275elementStart(0,"option",208),e.\u0275\u0275text(1),e.\u0275\u0275elementEnd()),2&i){const t=n.$implicit;e.\u0275\u0275property("value",t.name),e.\u0275\u0275advance(),e.\u0275\u0275textInterpolate1(" ",t.name," ")}}function im(i,n){if(1&i&&(e.\u0275\u0275elementStart(0,"div",188)(1,"label",228),e.\u0275\u0275i18n(2,33),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(3,"div",190)(4,"select",229),e.\u0275\u0275template(5,om,2,2,"option",193),e.\u0275\u0275elementEnd()()()),2&i){const t=e.\u0275\u0275nextContext();e.\u0275\u0275advance(4),e.\u0275\u0275attribute("disabled",!(0!==t.zoneList.length&&!t.editing)||null),e.\u0275\u0275advance(),e.\u0275\u0275property("ngForOf",t.zoneList)}}function am(i,n){if(1&i){const t=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"div",188)(1,"label",230),e.\u0275\u0275i18n(2,34),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(3,"div",190)(4,"select",231),e.\u0275\u0275listener("change",function(s){e.\u0275\u0275restoreView(t);const d=e.\u0275\u0275nextContext();return e.\u0275\u0275resetView(d.onPlacementChange(s.target.value))}),e.\u0275\u0275elementStart(5,"option",232),e.\u0275\u0275i18n(6,35),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(7,"option",233),e.\u0275\u0275i18n(8,36),e.\u0275\u0275elementEnd()()()()}}function sm(i,n){1&i&&(e.\u0275\u0275elementStart(0,"span",209),e.\u0275\u0275i18n(1,38),e.\u0275\u0275elementEnd())}function rm(i,n){if(1&i){const t=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"div",188)(1,"label",234),e.\u0275\u0275i18n(2,37),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(3,"div",190)(4,"input",235),e.\u0275\u0275listener("focus",function(s){e.\u0275\u0275restoreView(t);const d=e.\u0275\u0275nextContext();return e.\u0275\u0275resetView(d.labelFocus.next(s.target.value))})("click",function(s){e.\u0275\u0275restoreView(t);const d=e.\u0275\u0275nextContext();return e.\u0275\u0275resetView(d.labelClick.next(s.target.value))}),e.\u0275\u0275elementEnd(),e.\u0275\u0275template(5,sm,2,0,"span",194),e.\u0275\u0275elementEnd()()}if(2&i){const t=e.\u0275\u0275nextContext(),o=e.\u0275\u0275reference(7);e.\u0275\u0275advance(4),e.\u0275\u0275property("ngbTypeahead",t.searchLabels),e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf",t.serviceForm.showError("label",o,"required"))}}function lm(i,n){if(1&i&&(e.\u0275\u0275elementStart(0,"div",188)(1,"label",236),e.\u0275\u0275i18n(2,39),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(3,"div",190),e.\u0275\u0275element(4,"cd-select-badges",237),e.\u0275\u0275elementEnd()()),2&i){const t=e.\u0275\u0275nextContext();e.\u0275\u0275advance(4),e.\u0275\u0275property("data",t.serviceForm.controls.hosts.value)("options",t.hosts.options)("messages",t.hosts.messages)}}function _m(i,n){1&i&&(e.\u0275\u0275elementStart(0,"span",209),e.\u0275\u0275i18n(1,42),e.\u0275\u0275elementEnd())}function cm(i,n){1&i&&(e.\u0275\u0275elementStart(0,"span",209),e.\u0275\u0275i18n(1,43),e.\u0275\u0275elementEnd())}function dm(i,n){if(1&i&&(e.\u0275\u0275elementStart(0,"div",188)(1,"label",238)(2,"span"),e.\u0275\u0275i18n(3,40),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(4,"div",190),e.\u0275\u0275element(5,"input",239),e.\u0275\u0275elementStart(6,"cd-help-text"),e.\u0275\u0275i18n(7,41),e.\u0275\u0275elementEnd(),e.\u0275\u0275template(8,_m,2,0,"span",194)(9,cm,2,0,"span",194),e.\u0275\u0275elementEnd()()),2&i){const t=e.\u0275\u0275nextContext(),o=e.\u0275\u0275reference(7);e.\u0275\u0275advance(8),e.\u0275\u0275property("ngIf",t.serviceForm.showError("count",o,"min")),e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf",t.serviceForm.showError("count",o,"pattern"))}}function um(i,n){1&i&&(e.\u0275\u0275elementStart(0,"span",209),e.\u0275\u0275i18n(1,45),e.\u0275\u0275elementEnd())}function pm(i,n){1&i&&(e.\u0275\u0275elementStart(0,"span",209),e.\u0275\u0275i18n(1,46),e.\u0275\u0275elementEnd())}function mm(i,n){1&i&&(e.\u0275\u0275elementStart(0,"span",209),e.\u0275\u0275i18n(1,47),e.\u0275\u0275elementEnd())}function fm(i,n){if(1&i&&(e.\u0275\u0275elementContainerStart(0),e.\u0275\u0275elementStart(1,"div",188)(2,"label",240),e.\u0275\u0275i18n(3,44),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(4,"div",190),e.\u0275\u0275element(5,"input",241),e.\u0275\u0275template(6,um,2,0,"span",194)(7,pm,2,0,"span",194)(8,mm,2,0,"span",194),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementContainerEnd()),2&i){const t=e.\u0275\u0275nextContext(),o=e.\u0275\u0275reference(7);e.\u0275\u0275advance(6),e.\u0275\u0275property("ngIf",t.serviceForm.showError("rgw_frontend_port",o,"pattern")),e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf",t.serviceForm.showError("rgw_frontend_port",o,"min")),e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf",t.serviceForm.showError("rgw_frontend_port",o,"max"))}}function Em(i,n){1&i&&(e.\u0275\u0275elementStart(0,"option",192),e.\u0275\u0275i18n(1,49),e.\u0275\u0275elementEnd()),2&i&&e.\u0275\u0275property("ngValue",null)}function gm(i,n){1&i&&(e.\u0275\u0275elementStart(0,"option",192),e.\u0275\u0275i18n(1,50),e.\u0275\u0275elementEnd()),2&i&&e.\u0275\u0275property("ngValue",null)}function Cm(i,n){1&i&&(e.\u0275\u0275elementStart(0,"option",192),e.\u0275\u0275i18n(1,51),e.\u0275\u0275elementEnd()),2&i&&e.\u0275\u0275property("ngValue",null)}function Sm(i,n){if(1&i&&(e.\u0275\u0275elementStart(0,"option",208),e.\u0275\u0275text(1),e.\u0275\u0275elementEnd()),2&i){const t=n.$implicit;e.\u0275\u0275property("value",t.pool_name),e.\u0275\u0275advance(),e.\u0275\u0275textInterpolate(t.pool_name)}}function hm(i,n){1&i&&(e.\u0275\u0275elementStart(0,"span",209),e.\u0275\u0275i18n(1,52),e.\u0275\u0275elementEnd())}function Tm(i,n){if(1&i&&(e.\u0275\u0275elementStart(0,"div",188)(1,"label",213),e.\u0275\u0275i18n(2,48),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(3,"div",190)(4,"select",242),e.\u0275\u0275template(5,Em,2,1,"option",212)(6,gm,2,1,"option",212)(7,Cm,2,1,"option",212)(8,Sm,2,2,"option",193),e.\u0275\u0275elementEnd(),e.\u0275\u0275template(9,hm,2,0,"span",194),e.\u0275\u0275elementEnd()()),2&i){const t=e.\u0275\u0275nextContext(),o=e.\u0275\u0275reference(7);e.\u0275\u0275advance(5),e.\u0275\u0275property("ngIf",null===t.pools),e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf",t.pools&&0===t.pools.length),e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf",t.pools&&t.pools.length>0),e.\u0275\u0275advance(),e.\u0275\u0275property("ngForOf",t.pools),e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf",t.serviceForm.showError("pool",o,"required"))}}function Fm(i,n){1&i&&(e.\u0275\u0275elementStart(0,"span",209),e.\u0275\u0275i18n(1,59),e.\u0275\u0275elementEnd())}function vm(i,n){1&i&&(e.\u0275\u0275elementStart(0,"span",209),e.\u0275\u0275i18n(1,60),e.\u0275\u0275elementEnd())}function Mm(i,n){1&i&&(e.\u0275\u0275elementStart(0,"span",209),e.\u0275\u0275i18n(1,61),e.\u0275\u0275elementEnd())}function Rm(i,n){1&i&&(e.\u0275\u0275elementStart(0,"span",209),e.\u0275\u0275i18n(1,62),e.\u0275\u0275elementEnd())}function Om(i,n){1&i&&(e.\u0275\u0275elementStart(0,"span",209),e.\u0275\u0275i18n(1,63),e.\u0275\u0275elementEnd())}function Pm(i,n){if(1&i&&(e.\u0275\u0275elementContainerStart(0),e.\u0275\u0275elementStart(1,"div",188)(2,"label",243)(3,"span"),e.\u0275\u0275i18n(4,53),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(5,"cd-helper")(6,"span"),e.\u0275\u0275i18n(7,54),e.\u0275\u0275elementEnd(),e.\u0275\u0275element(8,"br"),e.\u0275\u0275elementStart(9,"span"),e.\u0275\u0275i18nStart(10,55),e.\u0275\u0275element(11,"b"),e.\u0275\u0275i18nEnd(),e.\u0275\u0275elementEnd()()(),e.\u0275\u0275elementStart(12,"div",190),e.\u0275\u0275element(13,"input",244),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(14,"div",188)(15,"label",245),e.\u0275\u0275i18n(16,56),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(17,"div",190),e.\u0275\u0275element(18,"input",246),e.\u0275\u0275template(19,Fm,2,0,"span",194)(20,vm,2,0,"span",194)(21,Mm,2,0,"span",194),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(22,"div",188)(23,"label",247),e.\u0275\u0275i18n(24,57),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(25,"div",190),e.\u0275\u0275element(26,"input",248),e.\u0275\u0275template(27,Rm,2,0,"span",194),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(28,"div",188)(29,"label",249),e.\u0275\u0275i18n(30,58),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(31,"div",190)(32,"div",216),e.\u0275\u0275element(33,"input",250)(34,"button",251)(35,"cd-copy-2-clipboard-button",252),e.\u0275\u0275template(36,Om,2,0,"span",194),e.\u0275\u0275elementEnd()()(),e.\u0275\u0275elementContainerEnd()),2&i){const t=e.\u0275\u0275nextContext(),o=e.\u0275\u0275reference(7);e.\u0275\u0275advance(19),e.\u0275\u0275property("ngIf",t.serviceForm.showError("api_port",o,"pattern")),e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf",t.serviceForm.showError("api_port",o,"min")),e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf",t.serviceForm.showError("api_port",o,"max")),e.\u0275\u0275advance(2),e.\u0275\u0275property("ngClass",e.\u0275\u0275pureFunction1(8,lo,e.\u0275\u0275pureFunction0(7,xl).includes(t.serviceForm.controls.service_type.value))),e.\u0275\u0275advance(4),e.\u0275\u0275property("ngIf",t.serviceForm.showError("api_user",o,"required")),e.\u0275\u0275advance(2),e.\u0275\u0275property("ngClass",e.\u0275\u0275pureFunction1(11,lo,e.\u0275\u0275pureFunction0(10,xl).includes(t.serviceForm.controls.service_type.value))),e.\u0275\u0275advance(7),e.\u0275\u0275property("ngIf",t.serviceForm.showError("api_password",o,"required"))}}function bm(i,n){1&i&&(e.\u0275\u0275elementStart(0,"span",209),e.\u0275\u0275i18n(1,76),e.\u0275\u0275elementEnd())}function Nm(i,n){1&i&&(e.\u0275\u0275elementStart(0,"span",209),e.\u0275\u0275i18n(1,77),e.\u0275\u0275elementEnd())}function Im(i,n){1&i&&(e.\u0275\u0275elementStart(0,"span",209),e.\u0275\u0275i18n(1,78),e.\u0275\u0275elementEnd())}function Am(i,n){if(1&i&&(e.\u0275\u0275elementStart(0,"div",197),e.\u0275\u0275element(1,"input",268),e.\u0275\u0275elementStart(2,"label",269),e.\u0275\u0275i18n(3,79),e.\u0275\u0275elementEnd()()),2&i){const t=n.$implicit;e.\u0275\u0275advance(),e.\u0275\u0275propertyInterpolate("name",t),e.\u0275\u0275propertyInterpolate("id",t),e.\u0275\u0275propertyInterpolate("formControlName",t),e.\u0275\u0275advance(),e.\u0275\u0275propertyInterpolate("for",t),e.\u0275\u0275advance(),e.\u0275\u0275i18nExp(t),e.\u0275\u0275i18nApply(3)}}function Dm(i,n){if(1&i&&(e.\u0275\u0275elementContainerStart(0),e.\u0275\u0275elementStart(1,"div",188)(2,"label",253),e.\u0275\u0275i18nStart(3,64),e.\u0275\u0275elementStart(4,"cd-helper"),e.\u0275\u0275element(5,"span"),e.\u0275\u0275elementEnd(),e.\u0275\u0275i18nEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(6,"div",190),e.\u0275\u0275element(7,"input",254),e.\u0275\u0275template(8,bm,2,0,"span",194),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(9,"div",188)(10,"label",255)(11,"span"),e.\u0275\u0275i18n(12,65),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(13,"cd-helper"),e.\u0275\u0275i18n(14,66),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(15,"div",190),e.\u0275\u0275element(16,"input",256),e.\u0275\u0275template(17,Nm,2,0,"span",194)(18,Im,2,0,"span",194),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(19,"div",257)(20,"label",258),e.\u0275\u0275i18nStart(21,67),e.\u0275\u0275elementStart(22,"cd-helper"),e.\u0275\u0275element(23,"span"),e.\u0275\u0275elementEnd(),e.\u0275\u0275i18nEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(24,"div",190),e.\u0275\u0275template(25,Am,4,5,"div",259),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(26,"div",188)(27,"label",260)(28,"span"),e.\u0275\u0275i18n(29,68),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(30,"cd-helper"),e.\u0275\u0275i18nStart(31,69),e.\u0275\u0275element(32,"span")(33,"br")(34,"span"),e.\u0275\u0275i18nEnd(),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(35,"div",190),e.\u0275\u0275element(36,"input",261),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(37,"div",188)(38,"label",262)(39,"span"),e.\u0275\u0275i18n(40,70),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(41,"cd-helper"),e.\u0275\u0275i18nStart(42,71),e.\u0275\u0275element(43,"span")(44,"br")(45,"span"),e.\u0275\u0275i18nEnd(),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(46,"div",190),e.\u0275\u0275element(47,"input",263),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(48,"div",188)(49,"label",264)(50,"span"),e.\u0275\u0275i18n(51,72),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(52,"cd-helper"),e.\u0275\u0275i18nStart(53,73),e.\u0275\u0275element(54,"span")(55,"br")(56,"span"),e.\u0275\u0275i18nEnd(),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(57,"div",190),e.\u0275\u0275element(58,"input",265),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(59,"div",188)(60,"label",266)(61,"span"),e.\u0275\u0275i18n(62,74),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(63,"cd-helper"),e.\u0275\u0275i18nStart(64,75),e.\u0275\u0275element(65,"span")(66,"br")(67,"span"),e.\u0275\u0275i18nEnd(),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(68,"div",190),e.\u0275\u0275element(69,"input",267),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementContainerEnd()),2&i){const t=e.\u0275\u0275nextContext(),o=e.\u0275\u0275reference(7);e.\u0275\u0275advance(8),e.\u0275\u0275property("ngIf",t.serviceForm.showError("cluster_id",o,"required")),e.\u0275\u0275advance(9),e.\u0275\u0275property("ngIf",t.serviceForm.showError("config_uri",o,"required")),e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf",t.serviceForm.showError("config_uri",o,"configUriPattern")),e.\u0275\u0275advance(7),e.\u0275\u0275property("ngForOf",t.smbFeaturesList)}}function ym(i,n){1&i&&(e.\u0275\u0275elementStart(0,"span",209),e.\u0275\u0275i18n(1,86),e.\u0275\u0275elementEnd())}function Lm(i,n){1&i&&(e.\u0275\u0275elementStart(0,"span",209),e.\u0275\u0275i18n(1,87),e.\u0275\u0275elementEnd())}function $m(i,n){1&i&&(e.\u0275\u0275elementStart(0,"span",209),e.\u0275\u0275i18n(1,88),e.\u0275\u0275elementEnd())}function xm(i,n){1&i&&(e.\u0275\u0275elementStart(0,"span",209),e.\u0275\u0275i18n(1,89),e.\u0275\u0275elementEnd())}function Um(i,n){1&i&&(e.\u0275\u0275elementStart(0,"span",209),e.\u0275\u0275i18n(1,90),e.\u0275\u0275elementEnd())}function wm(i,n){1&i&&(e.\u0275\u0275elementStart(0,"span",209),e.\u0275\u0275i18n(1,91),e.\u0275\u0275elementEnd())}function Gm(i,n){1&i&&(e.\u0275\u0275elementStart(0,"span",209),e.\u0275\u0275i18n(1,92),e.\u0275\u0275elementEnd())}function Hm(i,n){1&i&&(e.\u0275\u0275elementStart(0,"span",209),e.\u0275\u0275i18n(1,93),e.\u0275\u0275elementEnd())}function Vm(i,n){1&i&&(e.\u0275\u0275elementStart(0,"span",209),e.\u0275\u0275i18n(1,94),e.\u0275\u0275elementEnd())}function Bm(i,n){1&i&&(e.\u0275\u0275elementStart(0,"div",188)(1,"label",276)(2,"span"),e.\u0275\u0275i18n(3,95),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(4,"cd-helper")(5,"span"),e.\u0275\u0275i18n(6,96),e.\u0275\u0275elementEnd()()(),e.\u0275\u0275elementStart(7,"div",190),e.\u0275\u0275element(8,"input",277),e.\u0275\u0275elementEnd()())}function zm(i,n){if(1&i&&(e.\u0275\u0275elementContainerStart(0),e.\u0275\u0275elementStart(1,"div",188)(2,"label",270)(3,"span"),e.\u0275\u0275i18n(4,80),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(5,"cd-helper")(6,"span"),e.\u0275\u0275i18n(7,81),e.\u0275\u0275elementEnd()()(),e.\u0275\u0275elementStart(8,"div",190),e.\u0275\u0275element(9,"input",271),e.\u0275\u0275template(10,ym,2,0,"span",194),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(11,"div",188)(12,"label",272)(13,"span"),e.\u0275\u0275i18n(14,82),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(15,"cd-helper")(16,"span"),e.\u0275\u0275i18n(17,83),e.\u0275\u0275elementEnd()()(),e.\u0275\u0275elementStart(18,"div",190),e.\u0275\u0275element(19,"input",273),e.\u0275\u0275template(20,Lm,2,0,"span",194)(21,$m,2,0,"span",194)(22,xm,2,0,"span",194)(23,Um,2,0,"span",194),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(24,"div",188)(25,"label",274)(26,"span"),e.\u0275\u0275i18n(27,84),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(28,"cd-helper")(29,"span"),e.\u0275\u0275i18n(30,85),e.\u0275\u0275elementEnd()()(),e.\u0275\u0275elementStart(31,"div",190),e.\u0275\u0275element(32,"input",275),e.\u0275\u0275template(33,wm,2,0,"span",194)(34,Gm,2,0,"span",194)(35,Hm,2,0,"span",194)(36,Vm,2,0,"span",194),e.\u0275\u0275elementEnd()(),e.\u0275\u0275template(37,Bm,9,0,"div",195),e.\u0275\u0275elementContainerEnd()),2&i){const t=e.\u0275\u0275nextContext(),o=e.\u0275\u0275reference(7);e.\u0275\u0275advance(2),e.\u0275\u0275property("ngClass",e.\u0275\u0275pureFunction1(14,lo,e.\u0275\u0275pureFunction0(13,as).includes(t.serviceForm.controls.service_type.value))),e.\u0275\u0275advance(8),e.\u0275\u0275property("ngIf",t.serviceForm.showError("virtual_ip",o,"required")),e.\u0275\u0275advance(2),e.\u0275\u0275property("ngClass",e.\u0275\u0275pureFunction1(17,lo,e.\u0275\u0275pureFunction0(16,as).includes(t.serviceForm.controls.service_type.value))),e.\u0275\u0275advance(8),e.\u0275\u0275property("ngIf",t.serviceForm.showError("frontend_port",o,"pattern")),e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf",t.serviceForm.showError("frontend_port",o,"min")),e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf",t.serviceForm.showError("frontend_port",o,"max")),e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf",t.serviceForm.showError("frontend_port",o,"required")),e.\u0275\u0275advance(2),e.\u0275\u0275property("ngClass",e.\u0275\u0275pureFunction1(20,lo,e.\u0275\u0275pureFunction0(19,as).includes(t.serviceForm.controls.service_type.value))),e.\u0275\u0275advance(8),e.\u0275\u0275property("ngIf",t.serviceForm.showError("monitor_port",o,"pattern")),e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf",t.serviceForm.showError("monitor_port",o,"min")),e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf",t.serviceForm.showError("monitor_port",o,"max")),e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf",t.serviceForm.showError("monitor_port",o,"required")),e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf",!t.serviceForm.controls.unmanaged.value)}}function Xm(i,n){if(1&i&&(e.\u0275\u0275elementStart(0,"option",208),e.\u0275\u0275text(1),e.\u0275\u0275elementEnd()),2&i){const t=n.$implicit;e.\u0275\u0275property("value",t),e.\u0275\u0275advance(),e.\u0275\u0275textInterpolate(t)}}function km(i,n){1&i&&(e.\u0275\u0275elementStart(0,"span",209),e.\u0275\u0275i18n(1,102),e.\u0275\u0275elementEnd())}function jm(i,n){1&i&&(e.\u0275\u0275elementStart(0,"span",209),e.\u0275\u0275i18n(1,103),e.\u0275\u0275elementEnd())}function Wm(i,n){1&i&&(e.\u0275\u0275elementStart(0,"span",209),e.\u0275\u0275i18nStart(1,104),e.\u0275\u0275element(2,"strong"),e.\u0275\u0275i18nEnd(),e.\u0275\u0275elementEnd())}function Km(i,n){1&i&&(e.\u0275\u0275elementStart(0,"span",209),e.\u0275\u0275i18n(1,107),e.\u0275\u0275elementEnd())}function Qm(i,n){1&i&&(e.\u0275\u0275elementStart(0,"span",209),e.\u0275\u0275i18nStart(1,108),e.\u0275\u0275element(2,"strong"),e.\u0275\u0275i18nEnd(),e.\u0275\u0275elementEnd())}function Ym(i,n){if(1&i&&(e.\u0275\u0275elementStart(0,"div",188)(1,"label",282)(2,"span"),e.\u0275\u0275i18n(3,105),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(4,"cd-helper")(5,"span"),e.\u0275\u0275i18n(6,106),e.\u0275\u0275elementEnd()()(),e.\u0275\u0275elementStart(7,"div",190),e.\u0275\u0275element(8,"input",283),e.\u0275\u0275template(9,Km,2,0,"span",194)(10,Qm,3,0,"span",194),e.\u0275\u0275elementEnd()()),2&i){const t=e.\u0275\u0275nextContext(2),o=e.\u0275\u0275reference(7);e.\u0275\u0275advance(9),e.\u0275\u0275property("ngIf",t.serviceForm.showError("engine_id",o,"required")),e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf",t.serviceForm.showError("engine_id",o,"snmpEngineIdPattern"))}}function Jm(i,n){if(1&i&&(e.\u0275\u0275elementStart(0,"option",208),e.\u0275\u0275text(1),e.\u0275\u0275elementEnd()),2&i){const t=n.$implicit;e.\u0275\u0275property("value",t),e.\u0275\u0275advance(),e.\u0275\u0275textInterpolate1(" ",t," ")}}function Zm(i,n){1&i&&(e.\u0275\u0275elementStart(0,"span",209),e.\u0275\u0275i18n(1,111),e.\u0275\u0275elementEnd())}function qm(i,n){if(1&i&&(e.\u0275\u0275elementStart(0,"div",188)(1,"label",284),e.\u0275\u0275i18n(2,109),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(3,"div",190)(4,"select",285)(5,"option",192),e.\u0275\u0275i18n(6,110),e.\u0275\u0275elementEnd(),e.\u0275\u0275template(7,Jm,2,2,"option",193),e.\u0275\u0275elementEnd(),e.\u0275\u0275template(8,Zm,2,0,"span",194),e.\u0275\u0275elementEnd()()),2&i){const t=e.\u0275\u0275nextContext(2),o=e.\u0275\u0275reference(7);e.\u0275\u0275advance(5),e.\u0275\u0275property("ngValue",null),e.\u0275\u0275advance(2),e.\u0275\u0275property("ngForOf",e.\u0275\u0275pureFunction0(3,Mp)),e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf",t.serviceForm.showError("auth_protocol",o,"required"))}}function e1(i,n){if(1&i&&(e.\u0275\u0275elementStart(0,"option",208),e.\u0275\u0275text(1),e.\u0275\u0275elementEnd()),2&i){const t=n.$implicit;e.\u0275\u0275property("value",t),e.\u0275\u0275advance(),e.\u0275\u0275textInterpolate1(" ",t," ")}}function t1(i,n){1&i&&(e.\u0275\u0275elementStart(0,"div",188)(1,"label",286),e.\u0275\u0275i18n(2,112),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(3,"div",190)(4,"select",287)(5,"option",192),e.\u0275\u0275i18n(6,113),e.\u0275\u0275elementEnd(),e.\u0275\u0275template(7,e1,2,2,"option",193),e.\u0275\u0275elementEnd()()()),2&i&&(e.\u0275\u0275advance(5),e.\u0275\u0275property("ngValue",null),e.\u0275\u0275advance(2),e.\u0275\u0275property("ngForOf",e.\u0275\u0275pureFunction0(2,Rp)))}function n1(i,n){1&i&&(e.\u0275\u0275elementStart(0,"span",209),e.\u0275\u0275i18n(1,115),e.\u0275\u0275elementEnd())}function o1(i,n){if(1&i&&(e.\u0275\u0275elementStart(0,"div",188)(1,"label",288)(2,"span"),e.\u0275\u0275i18n(3,114),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(4,"div",190),e.\u0275\u0275element(5,"input",289),e.\u0275\u0275template(6,n1,2,0,"span",194),e.\u0275\u0275elementEnd()()),2&i){const t=e.\u0275\u0275nextContext(2),o=e.\u0275\u0275reference(7);e.\u0275\u0275advance(6),e.\u0275\u0275property("ngIf",t.serviceForm.showError("snmp_community",o,"required"))}}function i1(i,n){1&i&&(e.\u0275\u0275elementStart(0,"span",209),e.\u0275\u0275i18n(1,117),e.\u0275\u0275elementEnd())}function a1(i,n){if(1&i&&(e.\u0275\u0275elementStart(0,"div",188)(1,"label",290)(2,"span"),e.\u0275\u0275i18n(3,116),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(4,"div",190),e.\u0275\u0275element(5,"input",291),e.\u0275\u0275template(6,i1,2,0,"span",194),e.\u0275\u0275elementEnd()()),2&i){const t=e.\u0275\u0275nextContext(2),o=e.\u0275\u0275reference(7);e.\u0275\u0275advance(6),e.\u0275\u0275property("ngIf",t.serviceForm.showError("snmp_v3_auth_username",o,"required"))}}function s1(i,n){1&i&&(e.\u0275\u0275elementStart(0,"span",209),e.\u0275\u0275i18n(1,119),e.\u0275\u0275elementEnd())}function r1(i,n){if(1&i&&(e.\u0275\u0275elementStart(0,"div",188)(1,"label",292)(2,"span"),e.\u0275\u0275i18n(3,118),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(4,"div",190),e.\u0275\u0275element(5,"input",293),e.\u0275\u0275template(6,s1,2,0,"span",194),e.\u0275\u0275elementEnd()()),2&i){const t=e.\u0275\u0275nextContext(2),o=e.\u0275\u0275reference(7);e.\u0275\u0275advance(6),e.\u0275\u0275property("ngIf",t.serviceForm.showError("snmp_v3_auth_password",o,"required"))}}function l1(i,n){1&i&&(e.\u0275\u0275elementStart(0,"span",209),e.\u0275\u0275i18n(1,121),e.\u0275\u0275elementEnd())}function _1(i,n){if(1&i&&(e.\u0275\u0275elementStart(0,"div",188)(1,"label",294)(2,"span"),e.\u0275\u0275i18n(3,120),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(4,"div",190),e.\u0275\u0275element(5,"input",295),e.\u0275\u0275template(6,l1,2,0,"span",194),e.\u0275\u0275elementEnd()()),2&i){const t=e.\u0275\u0275nextContext(2),o=e.\u0275\u0275reference(7);e.\u0275\u0275advance(6),e.\u0275\u0275property("ngIf",t.serviceForm.showError("snmp_v3_priv_password",o,"required"))}}function c1(i,n){if(1&i){const t=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementContainerStart(0),e.\u0275\u0275elementStart(1,"div",188)(2,"label",278),e.\u0275\u0275i18n(3,97),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(4,"div",190)(5,"select",279),e.\u0275\u0275listener("change",function(){e.\u0275\u0275restoreView(t);const s=e.\u0275\u0275nextContext();return e.\u0275\u0275resetView(s.clearValidations())}),e.\u0275\u0275elementStart(6,"option",192),e.\u0275\u0275i18n(7,98),e.\u0275\u0275elementEnd(),e.\u0275\u0275template(8,Xm,2,2,"option",193),e.\u0275\u0275elementEnd(),e.\u0275\u0275template(9,km,2,0,"span",194),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(10,"div",188)(11,"label",280)(12,"span"),e.\u0275\u0275i18n(13,99),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(14,"cd-helper")(15,"span"),e.\u0275\u0275i18n(16,100),e.\u0275\u0275elementEnd()()(),e.\u0275\u0275elementStart(17,"div",190),e.\u0275\u0275element(18,"input",281),e.\u0275\u0275template(19,jm,2,0,"span",194)(20,Wm,3,0,"span",194),e.\u0275\u0275elementEnd()(),e.\u0275\u0275template(21,Ym,11,2,"div",195)(22,qm,9,4,"div",195)(23,t1,8,3,"div",195),e.\u0275\u0275elementStart(24,"fieldset")(25,"legend"),e.\u0275\u0275i18n(26,101),e.\u0275\u0275elementEnd(),e.\u0275\u0275template(27,o1,7,1,"div",195)(28,a1,7,1,"div",195)(29,r1,7,1,"div",195)(30,_1,7,1,"div",195),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementContainerEnd()}if(2&i){const t=e.\u0275\u0275nextContext(),o=e.\u0275\u0275reference(7);e.\u0275\u0275advance(6),e.\u0275\u0275property("ngValue",null),e.\u0275\u0275advance(2),e.\u0275\u0275property("ngForOf",e.\u0275\u0275pureFunction0(12,vp)),e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf",t.serviceForm.showError("snmp_version",o,"required")),e.\u0275\u0275advance(10),e.\u0275\u0275property("ngIf",t.serviceForm.showError("snmp_destination",o,"required")),e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf",t.serviceForm.showError("snmp_destination",o,"snmpDestinationPattern")),e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf","V3"===t.serviceForm.controls.snmp_version.value),e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf","V3"===t.serviceForm.controls.snmp_version.value),e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf","V3"===t.serviceForm.controls.snmp_version.value),e.\u0275\u0275advance(4),e.\u0275\u0275property("ngIf","V2c"===t.serviceForm.controls.snmp_version.value),e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf","V3"===t.serviceForm.controls.snmp_version.value),e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf","V3"===t.serviceForm.controls.snmp_version.value),e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf","V3"===t.serviceForm.controls.snmp_version.value&&null!==t.serviceForm.controls.privacy_protocol.value&&void 0!==t.serviceForm.controls.privacy_protocol.value)}}function d1(i,n){1&i&&(e.\u0275\u0275elementStart(0,"span",209),e.\u0275\u0275i18n(1,136),e.\u0275\u0275elementEnd())}function u1(i,n){1&i&&(e.\u0275\u0275elementStart(0,"span",209),e.\u0275\u0275i18n(1,137),e.\u0275\u0275elementEnd())}function p1(i,n){1&i&&(e.\u0275\u0275elementStart(0,"span",209),e.\u0275\u0275i18n(1,138),e.\u0275\u0275elementEnd())}function m1(i,n){1&i&&(e.\u0275\u0275elementStart(0,"span",209),e.\u0275\u0275i18n(1,139),e.\u0275\u0275elementEnd())}function f1(i,n){1&i&&(e.\u0275\u0275elementStart(0,"span",209),e.\u0275\u0275i18n(1,140),e.\u0275\u0275elementEnd())}function E1(i,n){1&i&&(e.\u0275\u0275elementStart(0,"span",209),e.\u0275\u0275i18n(1,141),e.\u0275\u0275elementEnd())}function g1(i,n){if(1&i&&(e.\u0275\u0275elementContainerStart(0),e.\u0275\u0275elementStart(1,"div",188)(2,"label",296)(3,"span"),e.\u0275\u0275i18n(4,122),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(5,"div",190),e.\u0275\u0275element(6,"input",297),e.\u0275\u0275elementStart(7,"cd-help-text"),e.\u0275\u0275i18n(8,123),e.\u0275\u0275elementEnd(),e.\u0275\u0275template(9,d1,2,0,"span",194),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(10,"div",188)(11,"label",298)(12,"span"),e.\u0275\u0275i18n(13,124),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(14,"div",190),e.\u0275\u0275element(15,"input",299),e.\u0275\u0275elementStart(16,"cd-help-text"),e.\u0275\u0275i18n(17,125),e.\u0275\u0275elementEnd(),e.\u0275\u0275template(18,u1,2,0,"span",194),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(19,"div",188)(20,"label",300)(21,"span"),e.\u0275\u0275i18n(22,126),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(23,"div",190)(24,"div",216),e.\u0275\u0275element(25,"input",301),e.\u0275\u0275elementStart(26,"span",302),e.\u0275\u0275element(27,"button",303)(28,"cd-copy-2-clipboard-button",304),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(29,"cd-help-text"),e.\u0275\u0275i18n(30,127),e.\u0275\u0275elementEnd(),e.\u0275\u0275template(31,p1,2,0,"span",194),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(32,"div",188)(33,"label",305)(34,"span"),e.\u0275\u0275i18n(35,128),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(36,"div",190),e.\u0275\u0275element(37,"input",306),e.\u0275\u0275elementStart(38,"cd-help-text"),e.\u0275\u0275i18n(39,129),e.\u0275\u0275elementEnd(),e.\u0275\u0275template(40,m1,2,0,"span",194)(41,f1,2,0,"span",194),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(42,"div",188)(43,"label",307)(44,"span"),e.\u0275\u0275i18n(45,130),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(46,"div",190),e.\u0275\u0275element(47,"input",308),e.\u0275\u0275elementStart(48,"cd-help-text"),e.\u0275\u0275i18n(49,131),e.\u0275\u0275elementEnd(),e.\u0275\u0275template(50,E1,2,0,"span",194),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(51,"div",188)(52,"label",309)(53,"span"),e.\u0275\u0275i18n(54,132),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(55,"div",190),e.\u0275\u0275element(56,"input",310),e.\u0275\u0275elementStart(57,"cd-help-text"),e.\u0275\u0275i18n(58,133),e.\u0275\u0275elementEnd()()(),e.\u0275\u0275elementStart(59,"div",188)(60,"label",311)(61,"span"),e.\u0275\u0275i18n(62,134),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(63,"div",190),e.\u0275\u0275element(64,"input",312),e.\u0275\u0275elementStart(65,"cd-help-text"),e.\u0275\u0275i18n(66,135),e.\u0275\u0275elementEnd()()(),e.\u0275\u0275elementContainerEnd()),2&i){const t=e.\u0275\u0275nextContext(),o=e.\u0275\u0275reference(7);e.\u0275\u0275advance(9),e.\u0275\u0275property("ngIf",t.serviceForm.showError("provider_display_name",o,"required")),e.\u0275\u0275advance(9),e.\u0275\u0275property("ngIf",t.serviceForm.showError("client_id",o,"required")),e.\u0275\u0275advance(13),e.\u0275\u0275property("ngIf",t.serviceForm.showError("client_secret",o,"required")),e.\u0275\u0275advance(9),e.\u0275\u0275property("ngIf",t.serviceForm.showError("oidc_issuer_url",o,"required")),e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf",t.serviceForm.showError("oidc_issuer_url",o,"validUrl")),e.\u0275\u0275advance(9),e.\u0275\u0275property("ngIf",t.serviceForm.showError("https_address",o,"invalidAddress"))}}function C1(i,n){1&i&&(e.\u0275\u0275elementStart(0,"span",209),e.\u0275\u0275i18n(1,148),e.\u0275\u0275elementEnd())}function S1(i,n){1&i&&(e.\u0275\u0275elementStart(0,"span",209),e.\u0275\u0275i18n(1,149),e.\u0275\u0275elementEnd())}function h1(i,n){1&i&&(e.\u0275\u0275elementStart(0,"span",209),e.\u0275\u0275i18n(1,150),e.\u0275\u0275elementEnd())}function T1(i,n){1&i&&(e.\u0275\u0275elementStart(0,"span",209),e.\u0275\u0275i18n(1,151),e.\u0275\u0275elementEnd())}function F1(i,n){if(1&i&&(e.\u0275\u0275elementContainerStart(0),e.\u0275\u0275elementStart(1,"div",188)(2,"label",313),e.\u0275\u0275i18n(3,142),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(4,"div",190),e.\u0275\u0275element(5,"input",314),e.\u0275\u0275template(6,C1,2,0,"span",194)(7,S1,2,0,"span",194)(8,h1,2,0,"span",194),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(9,"div",315)(10,"fieldset")(11,"label",316),e.\u0275\u0275i18n(12,143),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(13,"cds-checkbox",317),e.\u0275\u0275text(14," Enable "),e.\u0275\u0275elementStart(15,"cd-help-text"),e.\u0275\u0275i18n(16,144),e.\u0275\u0275elementEnd()()()(),e.\u0275\u0275elementStart(17,"div",315)(18,"cds-combo-box",318),e.\u0275\u0275i18nStart(19,145),e.\u0275\u0275element(20,"cds-dropdown-list"),e.\u0275\u0275i18nEnd(),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(21,"div",188)(22,"label",319)(23,"span"),e.\u0275\u0275i18n(24,146),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(25,"div",190)(26,"div",216),e.\u0275\u0275element(27,"input",320),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(28,"cd-help-text"),e.\u0275\u0275i18nStart(29,147),e.\u0275\u0275element(30,"a",321),e.\u0275\u0275i18nEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275template(31,T1,2,0,"span",194),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementContainerEnd()),2&i){const t=e.\u0275\u0275nextContext(),o=e.\u0275\u0275reference(7);e.\u0275\u0275advance(6),e.\u0275\u0275property("ngIf",t.serviceForm.showError("port",o,"pattern")),e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf",t.serviceForm.showError("port",o,"min")),e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf",t.serviceForm.showError("port",o,"max")),e.\u0275\u0275advance(10),e.\u0275\u0275property("appendInline",!0)("items",t.sslProtocolsItems),e.\u0275\u0275advance(13),e.\u0275\u0275property("ngIf",t.serviceForm.showError("ssl_ciphers",o,"invalidPattern"))}}function v1(i,n){1&i&&(e.\u0275\u0275elementContainerStart(0),e.\u0275\u0275elementStart(1,"div",188)(2,"div",196)(3,"div",197),e.\u0275\u0275element(4,"input",322),e.\u0275\u0275elementStart(5,"label",323),e.\u0275\u0275i18n(6,152),e.\u0275\u0275elementEnd()()()(),e.\u0275\u0275elementContainerEnd())}function M1(i,n){1&i&&(e.\u0275\u0275elementStart(0,"span",209),e.\u0275\u0275i18n(1,155),e.\u0275\u0275elementEnd())}function R1(i,n){1&i&&(e.\u0275\u0275elementStart(0,"span",209),e.\u0275\u0275i18n(1,156),e.\u0275\u0275elementEnd())}function O1(i,n){if(1&i){const t=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"div",188)(1,"label",324)(2,"span"),e.\u0275\u0275i18n(3,153),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(4,"cd-helper"),e.\u0275\u0275i18n(5,154),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(6,"div",190)(7,"textarea",325),e.\u0275\u0275text(8,"              "),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(9,"input",326),e.\u0275\u0275listener("change",function(s){e.\u0275\u0275restoreView(t);const d=e.\u0275\u0275nextContext(2);return e.\u0275\u0275resetView(d.fileUpload(s.target.files,"ssl_cert"))}),e.\u0275\u0275elementEnd(),e.\u0275\u0275template(10,M1,2,0,"span",194)(11,R1,2,0,"span",194),e.\u0275\u0275elementEnd()()}if(2&i){const t=e.\u0275\u0275nextContext(2),o=e.\u0275\u0275reference(7);e.\u0275\u0275advance(10),e.\u0275\u0275property("ngIf",t.serviceForm.showError("ssl_cert",o,"required")),e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf",t.serviceForm.showError("ssl_cert",o,"pattern"))}}function P1(i,n){1&i&&(e.\u0275\u0275elementStart(0,"span",209),e.\u0275\u0275i18n(1,159),e.\u0275\u0275elementEnd())}function b1(i,n){1&i&&(e.\u0275\u0275elementStart(0,"span",209),e.\u0275\u0275i18n(1,160),e.\u0275\u0275elementEnd())}function N1(i,n){if(1&i){const t=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"div",188)(1,"label",327)(2,"span"),e.\u0275\u0275i18n(3,157),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(4,"cd-helper"),e.\u0275\u0275i18n(5,158),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(6,"div",190)(7,"textarea",328),e.\u0275\u0275text(8,"              "),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(9,"input",326),e.\u0275\u0275listener("change",function(s){e.\u0275\u0275restoreView(t);const d=e.\u0275\u0275nextContext(2);return e.\u0275\u0275resetView(d.fileUpload(s.target.files,"ssl_key"))}),e.\u0275\u0275elementEnd(),e.\u0275\u0275template(10,P1,2,0,"span",194)(11,b1,2,0,"span",194),e.\u0275\u0275elementEnd()()}if(2&i){const t=e.\u0275\u0275nextContext(2),o=e.\u0275\u0275reference(7);e.\u0275\u0275advance(10),e.\u0275\u0275property("ngIf",t.serviceForm.showError("ssl_key",o,"required")),e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf",t.serviceForm.showError("ssl_key",o,"pattern"))}}function I1(i,n){if(1&i&&(e.\u0275\u0275elementContainerStart(0),e.\u0275\u0275template(1,v1,7,0,"ng-container",200)(2,O1,12,2,"div",195)(3,N1,12,2,"div",195),e.\u0275\u0275elementContainerEnd()),2&i){const t=e.\u0275\u0275nextContext();e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf",!e.\u0275\u0275pureFunction0(3,is).includes(t.serviceForm.controls.service_type.value)),e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf",t.serviceForm.controls.ssl.value||e.\u0275\u0275pureFunction0(4,is).includes(t.serviceForm.controls.service_type.value)),e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf",t.serviceForm.controls.ssl.value&&!e.\u0275\u0275pureFunction0(5,Op).includes(t.serviceForm.controls.service_type.value)||e.\u0275\u0275pureFunction0(6,is).includes(t.serviceForm.controls.service_type.value))}}function A1(i,n){1&i&&(e.\u0275\u0275elementStart(0,"span",209),e.\u0275\u0275i18n(1,164),e.\u0275\u0275elementEnd())}function D1(i,n){1&i&&(e.\u0275\u0275elementStart(0,"span",209),e.\u0275\u0275i18n(1,165),e.\u0275\u0275elementEnd())}function y1(i,n){1&i&&(e.\u0275\u0275elementStart(0,"span",209),e.\u0275\u0275i18n(1,166),e.\u0275\u0275elementEnd())}function L1(i,n){1&i&&(e.\u0275\u0275elementStart(0,"span",209),e.\u0275\u0275i18n(1,167),e.\u0275\u0275elementEnd())}function $1(i,n){if(1&i&&(e.\u0275\u0275elementContainerStart(0),e.\u0275\u0275elementStart(1,"div",188)(2,"label",329)(3,"span"),e.\u0275\u0275i18n(4,161),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(5,"cd-helper")(6,"span"),e.\u0275\u0275i18n(7,162),e.\u0275\u0275elementEnd()()(),e.\u0275\u0275elementStart(8,"div",190),e.\u0275\u0275element(9,"input",330),e.\u0275\u0275template(10,A1,2,0,"span",194)(11,D1,2,0,"span",194)(12,y1,2,0,"span",194)(13,L1,2,0,"span",194),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(14,"div",188)(15,"label",331),e.\u0275\u0275i18nStart(16,163),e.\u0275\u0275element(17,"span")(18,"cd-helper"),e.\u0275\u0275i18nEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(19,"div",190)(20,"div",216),e.\u0275\u0275element(21,"input",332),e.\u0275\u0275elementStart(22,"span",302),e.\u0275\u0275element(23,"button",333)(24,"cd-copy-2-clipboard-button",334),e.\u0275\u0275elementEnd()()()(),e.\u0275\u0275elementContainerEnd()),2&i){const t=e.\u0275\u0275nextContext(),o=e.\u0275\u0275reference(7);e.\u0275\u0275advance(10),e.\u0275\u0275property("ngIf",t.serviceForm.showError("grafana_port",o,"pattern")),e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf",t.serviceForm.showError("grafana_port",o,"min")),e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf",t.serviceForm.showError("grafana_port",o,"max")),e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf",t.serviceForm.showError("grafana_port",o,"required")),e.\u0275\u0275advance(8),e.\u0275\u0275attribute("disabled",!!t.editing||null)}}function x1(i,n){1&i&&(e.\u0275\u0275elementStart(0,"cd-alert-panel",206),e.\u0275\u0275i18n(1,168),e.\u0275\u0275elementEnd())}function U1(i,n){1&i&&(e.\u0275\u0275elementStart(0,"div",188)(1,"div",196)(2,"div",197),e.\u0275\u0275element(3,"input",335),e.\u0275\u0275elementStart(4,"label",336),e.\u0275\u0275i18n(5,169),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(6,"cd-help-text"),e.\u0275\u0275i18n(7,170),e.\u0275\u0275elementEnd()()()())}function w1(i,n){1&i&&(e.\u0275\u0275elementStart(0,"span",209),e.\u0275\u0275i18n(1,172),e.\u0275\u0275elementEnd())}function G1(i,n){if(1&i){const t=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"div",188)(1,"label",337)(2,"span"),e.\u0275\u0275i18n(3,171),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(4,"div",190),e.\u0275\u0275element(5,"textarea",338),e.\u0275\u0275elementStart(6,"input",326),e.\u0275\u0275listener("change",function(s){e.\u0275\u0275restoreView(t);const d=e.\u0275\u0275nextContext();return e.\u0275\u0275resetView(d.fileUpload(s.target.files,"root_ca_cert"))}),e.\u0275\u0275elementEnd(),e.\u0275\u0275template(7,w1,2,0,"span",194),e.\u0275\u0275elementEnd()()}if(2&i){const t=e.\u0275\u0275nextContext(),o=e.\u0275\u0275reference(7);e.\u0275\u0275advance(7),e.\u0275\u0275property("ngIf",t.serviceForm.showError("root_ca_cert",o,"required"))}}function H1(i,n){1&i&&(e.\u0275\u0275elementStart(0,"span",209),e.\u0275\u0275i18n(1,174),e.\u0275\u0275elementEnd())}function V1(i,n){if(1&i){const t=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"div",188)(1,"label",339)(2,"span"),e.\u0275\u0275i18n(3,173),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(4,"div",190),e.\u0275\u0275element(5,"textarea",340),e.\u0275\u0275elementStart(6,"input",326),e.\u0275\u0275listener("change",function(s){e.\u0275\u0275restoreView(t);const d=e.\u0275\u0275nextContext();return e.\u0275\u0275resetView(d.fileUpload(s.target.files,"client_cert"))}),e.\u0275\u0275elementEnd(),e.\u0275\u0275template(7,H1,2,0,"span",194),e.\u0275\u0275elementEnd()()}if(2&i){const t=e.\u0275\u0275nextContext(),o=e.\u0275\u0275reference(7);e.\u0275\u0275advance(7),e.\u0275\u0275property("ngIf",t.serviceForm.showError("client_cert",o,"required"))}}function B1(i,n){1&i&&(e.\u0275\u0275elementStart(0,"span",209),e.\u0275\u0275i18n(1,176),e.\u0275\u0275elementEnd())}function z1(i,n){if(1&i){const t=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"div",188)(1,"label",341)(2,"span"),e.\u0275\u0275i18n(3,175),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(4,"div",190),e.\u0275\u0275element(5,"textarea",342),e.\u0275\u0275elementStart(6,"input",326),e.\u0275\u0275listener("change",function(s){e.\u0275\u0275restoreView(t);const d=e.\u0275\u0275nextContext();return e.\u0275\u0275resetView(d.fileUpload(s.target.files,"client_key"))}),e.\u0275\u0275elementEnd(),e.\u0275\u0275template(7,B1,2,0,"span",194),e.\u0275\u0275elementEnd()()}if(2&i){const t=e.\u0275\u0275nextContext(),o=e.\u0275\u0275reference(7);e.\u0275\u0275advance(7),e.\u0275\u0275property("ngIf",t.serviceForm.showError("client_key",o,"required"))}}function X1(i,n){1&i&&(e.\u0275\u0275elementStart(0,"span",209),e.\u0275\u0275i18n(1,178),e.\u0275\u0275elementEnd())}function k1(i,n){if(1&i){const t=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"div",188)(1,"label",343)(2,"span"),e.\u0275\u0275i18n(3,177),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(4,"div",190),e.\u0275\u0275element(5,"textarea",344),e.\u0275\u0275elementStart(6,"input",326),e.\u0275\u0275listener("change",function(s){e.\u0275\u0275restoreView(t);const d=e.\u0275\u0275nextContext();return e.\u0275\u0275resetView(d.fileUpload(s.target.files,"server_cert"))}),e.\u0275\u0275elementEnd(),e.\u0275\u0275template(7,X1,2,0,"span",194),e.\u0275\u0275elementEnd()()}if(2&i){const t=e.\u0275\u0275nextContext(),o=e.\u0275\u0275reference(7);e.\u0275\u0275advance(7),e.\u0275\u0275property("ngIf",t.serviceForm.showError("server_cert",o,"required"))}}function j1(i,n){1&i&&(e.\u0275\u0275elementStart(0,"span",209),e.\u0275\u0275i18n(1,180),e.\u0275\u0275elementEnd())}function W1(i,n){if(1&i){const t=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"div",188)(1,"label",345)(2,"span"),e.\u0275\u0275i18n(3,179),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(4,"div",190),e.\u0275\u0275element(5,"textarea",346),e.\u0275\u0275elementStart(6,"input",326),e.\u0275\u0275listener("change",function(s){e.\u0275\u0275restoreView(t);const d=e.\u0275\u0275nextContext();return e.\u0275\u0275resetView(d.fileUpload(s.target.files,"server_key"))}),e.\u0275\u0275elementEnd(),e.\u0275\u0275template(7,j1,2,0,"span",194),e.\u0275\u0275elementEnd()()}if(2&i){const t=e.\u0275\u0275nextContext(),o=e.\u0275\u0275reference(7);e.\u0275\u0275advance(7),e.\u0275\u0275property("ngIf",t.serviceForm.showError("server_key",o,"required"))}}class _o extends Ce.g{constructor(n,t,o,s,d,h,I,$,w,X,J,re,de,Me,ve,Se,$e){super(),this.actionLabels=n,this.cephServiceService=t,this.formBuilder=o,this.hostService=s,this.poolService=d,this.rbdService=h,this.router=I,this.taskWrapperService=$,this.timerService=w,this.timerServiceVariable=X,this.rgwRealmService=J,this.rgwZonegroupService=re,this.rgwZoneService=de,this.rgwMultisiteService=Me,this.route=ve,this.activeModal=Se,this.modalService=$e,this.sub=new K.Subscription,this.MDS_SVC_ID_PATTERN=/^[a-zA-Z_.-][a-zA-Z0-9_.-]*$/,this.SNMP_DESTINATION_PATTERN=/^[^\:]+:[0-9]/,this.SNMP_ENGINE_ID_PATTERN=/^[0-9A-Fa-f]{10,64}/g,this.INGRESS_SUPPORTED_SERVICE_TYPES=["rgw","nfs"],this.SMB_CONFIG_URI_PATTERN=/^(http:|https:|rados:|rados:mon-config-key:)/,this.OAUTH2_ISSUER_URL_PATTERN=/^(https?:\/\/)?([a-zA-Z0-9-]+(\.[a-zA-Z0-9-]+)+)(:[0-9]{1,5})?(\/.*)?$/,this.SSL_CIPHERS_PATTERN=/^[a-zA-Z0-9\-:]+$/,this.DEFAULT_SSL_PROTOCOL_ITEM=[{content:"TLSv1.3",selected:!0}],this.hiddenServices=[],this.editing=!1,this.serviceTypes=[],this.serviceIds=[],this.labelClick=new K.Subject,this.labelFocus=new K.Subject,this.services=[],this.multisiteInfo=[],this.defaultRealmId="",this.defaultZonegroupId="",this.defaultZoneId="",this.realmList=[],this.zonegroupList=[],this.zoneList=[],this.showRealmCreationForm=!1,this.smbFeaturesList=["domain"],this.port=443,this.sslProtocolsItems=Object.values(m.BF).map(Te=>({content:Te,selected:!0})),this.sslCiphersItems=Object.values(m.eN).map(Te=>({content:Te,selected:!1})),this.showMgmtGatewayMessage=!1,this.searchLabels=Te=>(0,K.merge)(Te.pipe((0,v.debounceTime)(200),(0,v.distinctUntilChanged)()),this.labelFocus,this.labelClick.pipe((0,v.filter)(()=>!this.typeahead.isPopupOpen()))).pipe((0,v.map)(ke=>this.labels.filter(rt=>rt.toLowerCase().indexOf(ke.toLowerCase())>-1).slice(0,10))),this.resource=$localize`service`,this.hosts={options:[],messages:new il.z({empty:$localize`There are no hosts.`,filter:$localize`Filter hosts`})},this.createForm()}createForm(){this.serviceForm=this.formBuilder.group({service_type:[null,[C.Validators.required]],service_id:[null,[pe.xQ.composeIf({service_type:"mds"},[C.Validators.required,pe.xQ.custom("mdsPattern",n=>!p().isEmpty(n)&&!this.MDS_SVC_ID_PATTERN.test(n))]),pe.xQ.requiredIf({service_type:"nfs"}),pe.xQ.requiredIf({service_type:"iscsi"}),pe.xQ.requiredIf({service_type:"nvmeof"}),pe.xQ.requiredIf({service_type:"ingress"}),pe.xQ.requiredIf({service_type:"smb"}),pe.xQ.composeIf({service_type:"rgw"},[C.Validators.required]),pe.xQ.custom("uniqueName",n=>this.serviceIds&&this.serviceIds.includes(n))]],placement:["hosts"],label:[null,[pe.xQ.requiredIf({placement:"label",unmanaged:!1})]],hosts:[[]],count:[null,[pe.xQ.number(!1)]],unmanaged:[!1],pool:[null,[pe.xQ.requiredIf({service_type:"iscsi"}),pe.xQ.requiredIf({service_type:"nvmeof"})]],group:["default",pe.xQ.requiredIf({service_type:"nvmeof"})],enable_mtls:[!1],root_ca_cert:[null,[pe.xQ.composeIf({service_type:"nvmeof",enable_mtls:!0},[C.Validators.required])]],client_cert:[null,[pe.xQ.composeIf({service_type:"nvmeof",enable_mtls:!0},[C.Validators.required])]],client_key:[null,[pe.xQ.composeIf({service_type:"nvmeof",enable_mtls:!0},[C.Validators.required])]],server_cert:[null,[pe.xQ.composeIf({service_type:"nvmeof",enable_mtls:!0},[C.Validators.required])]],server_key:[null,[pe.xQ.composeIf({service_type:"nvmeof",enable_mtls:!0},[C.Validators.required])]],rgw_frontend_port:[null,[pe.xQ.number(!1)]],realm_name:[null],zonegroup_name:[null],zone_name:[null],trusted_ip_list:[null],api_port:[null,[pe.xQ.number(!1)]],api_user:[null,[pe.xQ.requiredIf({service_type:"iscsi",unmanaged:!1})]],api_password:[null,[pe.xQ.requiredIf({service_type:"iscsi",unmanaged:!1})]],cluster_id:[null,[pe.xQ.requiredIf({service_type:"smb"})]],features:new Ue.$(this.smbFeaturesList.reduce((n,t)=>(n[t]=new C.UntypedFormControl(!1),n),{})),config_uri:[null,[pe.xQ.composeIf({service_type:"smb"},[C.Validators.required,pe.xQ.custom("configUriPattern",n=>!p().isEmpty(n)&&!this.SMB_CONFIG_URI_PATTERN.test(n))])]],custom_dns:[null],join_sources:[null],user_sources:[null],include_ceph_users:[null],backend_service:[null,[pe.xQ.requiredIf({service_type:"ingress"})]],virtual_ip:[null,[pe.xQ.requiredIf({service_type:"ingress"})]],frontend_port:[null,[pe.xQ.number(!1),pe.xQ.requiredIf({service_type:"ingress"})]],monitor_port:[null,[pe.xQ.number(!1),pe.xQ.requiredIf({service_type:"ingress"})]],virtual_interface_networks:[null],ssl_protocols:[this.DEFAULT_SSL_PROTOCOL_ITEM],ssl_ciphers:[null,[pe.xQ.custom("invalidPattern",n=>!p().isEmpty(n)&&!this.SSL_CIPHERS_PATTERN.test(n))]],ssl:[!1],ssl_cert:["",[pe.xQ.composeIf({service_type:"rgw",unmanaged:!1,ssl:!0},[C.Validators.required,pe.xQ.pemCert()]),pe.xQ.composeIf({service_type:"iscsi",unmanaged:!1,ssl:!0},[C.Validators.required,pe.xQ.sslCert()]),pe.xQ.composeIf({service_type:"ingress",unmanaged:!1,ssl:!0},[C.Validators.required,pe.xQ.pemCert()]),pe.xQ.composeIf({service_type:"oauth2-proxy",unmanaged:!1,ssl:!0},[C.Validators.required,pe.xQ.sslCert()]),pe.xQ.composeIf({service_type:"mgmt-gateway",unmanaged:!1,ssl:!1},[pe.xQ.sslCert()])]],ssl_key:["",[pe.xQ.composeIf({service_type:"iscsi",unmanaged:!1,ssl:!0},[C.Validators.required,pe.xQ.sslPrivKey()]),pe.xQ.composeIf({service_type:"oauth2-proxy",unmanaged:!1,ssl:!0},[C.Validators.required,pe.xQ.sslPrivKey()]),pe.xQ.composeIf({service_type:"mgmt-gateway",unmanaged:!1,ssl:!1},[pe.xQ.sslPrivKey()])]],enable_auth:[null],port:[443,[pe.xQ.number(!1)]],snmp_version:[null,[pe.xQ.requiredIf({service_type:"snmp-gateway"})]],snmp_destination:[null,{validators:[pe.xQ.requiredIf({service_type:"snmp-gateway"}),pe.xQ.custom("snmpDestinationPattern",n=>!p().isEmpty(n)&&!this.SNMP_DESTINATION_PATTERN.test(n))]}],engine_id:[null,[pe.xQ.requiredIf({service_type:"snmp-gateway"}),pe.xQ.custom("snmpEngineIdPattern",n=>!p().isEmpty(n)&&!this.SNMP_ENGINE_ID_PATTERN.test(n))]],auth_protocol:["SHA",[pe.xQ.requiredIf({service_type:"snmp-gateway"})]],privacy_protocol:[null],snmp_community:[null,[pe.xQ.requiredIf({snmp_version:"V2c"})]],snmp_v3_auth_username:[null,[pe.xQ.requiredIf({service_type:"snmp-gateway"})]],snmp_v3_auth_password:[null,[pe.xQ.requiredIf({service_type:"snmp-gateway"})]],snmp_v3_priv_password:[null,[pe.xQ.requiredIf({privacy_protocol:{op:"!empty"}})]],grafana_port:[null,[pe.xQ.number(!1)]],grafana_admin_password:[null],provider_display_name:["My OIDC provider",[pe.xQ.requiredIf({service_type:"oauth2-proxy"})]],client_id:[null,[pe.xQ.requiredIf({service_type:"oauth2-proxy"})]],client_secret:[null,[pe.xQ.requiredIf({service_type:"oauth2-proxy"})]],oidc_issuer_url:[null,[pe.xQ.requiredIf({service_type:"oauth2-proxy"}),pe.xQ.custom("validUrl",n=>!p().isEmpty(n)&&!this.OAUTH2_ISSUER_URL_PATTERN.test(n))]],https_address:[null,[pe.xQ.oauthAddressTest()]],redirect_url:[null],allowlist_domains:[null]})}resolveRoute(){this.router.url.includes("services/(modal:create")?(this.pageURL="services",this.route.params.subscribe(n=>{n?.type&&(this.serviceType=n.type,this.serviceForm.get("service_type").setValue(this.serviceType))})):this.router.url.includes("services/(modal:edit")&&(this.editing=!0,this.pageURL="services",this.route.params.subscribe(n=>{this.serviceName=n.name,this.serviceType=n.type}))}ngOnInit(){this.action=this.actionLabels.CREATE,this.resolveRoute(),this.cephServiceService.list(new T.HttpParams({fromObject:{limit:-1,offset:0}})).observable.subscribe(n=>{this.serviceList=n,this.services=n.filter(t=>this.INGRESS_SUPPORTED_SERVICE_TYPES.includes(t.service_type))}),this.cephServiceService.getKnownTypes().subscribe(n=>{this.hiddenServices.push("osd","container"),this.serviceTypes=p().difference(n,this.hiddenServices).sort()}),this.hostService.getAllHosts().subscribe(n=>{const t=[];p().forEach(n,o=>{if(p().get(o,"sources.orchestrator",!1)){const s=new hp.O(!1,p().get(o,"hostname"),"");t.push(s)}}),this.hosts.options=[...t]}),this.hostService.getLabels().subscribe(n=>{this.labels=n}),this.poolService.getList().subscribe(n=>{this.pools=n,this.rbdPools=this.pools.filter(this.rbdService.isRBDPool),!this.editing&&this.serviceType&&this.onServiceTypeChange(this.serviceType)}),this.editing&&(this.action=this.actionLabels.EDIT,this.disableForEditing(this.serviceType),this.cephServiceService.list(new T.HttpParams({fromObject:{limit:-1,offset:0}}),this.serviceName).observable.subscribe(n=>{if(["service_type","service_id","unmanaged"].forEach(o=>{this.serviceForm.get(o).setValue(n[0][o])}),!n[0].unmanaged){const o=Object.keys(n[0].placement)[0];let s;s=["hosts","label"].indexOf(o)>=0?o:"hosts",this.serviceForm.get("placement").setValue(s),this.serviceForm.get("count").setValue(n[0].placement.count),n[0]?.placement[s]&&this.serviceForm.get(s).setValue(n[0]?.placement[s])}switch(this.serviceType){case"iscsi":["pool","api_password","api_user","trusted_ip_list","api_port"].forEach(w=>{this.serviceForm.get(w).setValue(n[0].spec[w])}),this.serviceForm.get("ssl").setValue(n[0].spec?.api_secure),n[0].spec?.api_secure&&(this.serviceForm.get("ssl_cert").setValue(n[0].spec?.ssl_cert),this.serviceForm.get("ssl_key").setValue(n[0].spec?.ssl_key));break;case"nvmeof":this.serviceForm.get("pool").setValue(n[0].spec.pool),this.serviceForm.get("group").setValue(n[0].spec.group),this.serviceForm.get("enable_mtls").setValue(n[0].spec?.enable_auth),this.serviceForm.get("root_ca_cert").setValue(n[0].spec?.root_ca_cert),this.serviceForm.get("client_cert").setValue(n[0].spec?.client_cert),this.serviceForm.get("client_key").setValue(n[0].spec?.client_key),this.serviceForm.get("server_cert").setValue(n[0].spec?.server_cert),this.serviceForm.get("server_key").setValue(n[0].spec?.server_key);break;case"rgw":this.serviceForm.get("rgw_frontend_port").setValue(n[0].spec?.rgw_frontend_port),this.setRgwFields(n[0].spec?.rgw_realm,n[0].spec?.rgw_zonegroup,n[0].spec?.rgw_zone),this.serviceForm.get("ssl").setValue(n[0].spec?.ssl),n[0].spec?.ssl&&this.serviceForm.get("ssl_cert").setValue(n[0].spec?.rgw_frontend_ssl_certificate);break;case"ingress":["backend_service","virtual_ip","frontend_port","monitor_port","virtual_interface_networks","ssl"].forEach(w=>{this.serviceForm.get(w).setValue(n[0].spec[w])}),n[0].spec?.ssl&&(this.serviceForm.get("ssl_cert").setValue(n[0].spec?.ssl_cert),this.serviceForm.get("ssl_key").setValue(n[0].spec?.ssl_key));break;case"mgmt-gateway":let d=window.location.href.split(":");if(this.currentURL=d[0]+d[1],this.port=n[0].spec?.port,n[0].spec?.ssl_protocols){let w=[];for(const X of n[0].spec.ssl_protocols)w.push({content:X,selected:!0});this.serviceForm.get("ssl_protocols").setValue(w)}n[0].spec?.ssl_ciphers&&this.serviceForm.get("ssl_ciphers").setValue(n[0].spec?.ssl_ciphers.join(":")),n[0].spec?.ssl_cert&&this.serviceForm.get("ssl_cert").setValue(n[0].spec.ssl_cert),n[0].spec?.ssl_key&&this.serviceForm.get("ssl_key").setValue(n[0].spec.ssl_key),n[0].spec?.enable_auth&&this.serviceForm.get("enable_auth").setValue(n[0].spec.enable_auth),n[0].spec?.port&&this.serviceForm.get("port").setValue(n[0].spec.port);break;case"smb":["cluster_id","config_uri","features","join_sources","user_sources","custom_dns","include_ceph_users"].forEach(w=>{"features"===w?n[0].spec?.features&&n[0].spec.features.forEach(X=>{this.serviceForm.get(`features.${X}`).setValue(!0)}):this.serviceForm.get(w).setValue(n[0].spec[w])});break;case"snmp-gateway":["snmp_version","snmp_destination"].forEach(w=>{this.serviceForm.get(w).setValue(n[0].spec[w])}),"V3"===this.serviceForm.getValue("snmp_version")?["engine_id","auth_protocol","privacy_protocol","snmp_v3_auth_username","snmp_v3_auth_password","snmp_v3_priv_password"].forEach(X=>{null!==X&&("snmp_v3_auth_username"===X||"snmp_v3_auth_password"===X||"snmp_v3_priv_password"===X?this.serviceForm.get(X).setValue(n[0].spec.credentials[X]):this.serviceForm.get(X).setValue(n[0].spec[X]))}):this.serviceForm.get("snmp_community").setValue(n[0].spec.credentials.snmp_community);break;case"grafana":this.serviceForm.get("grafana_port").setValue(n[0].spec.port),this.serviceForm.get("grafana_admin_password").setValue(n[0].spec.initial_admin_password);break;case"oauth2-proxy":["https_address","provider_display_name","client_id","client_secret","oidc_issuer_url","redirect_url","allowlist_domains"].forEach(w=>{this.serviceForm.get(w).setValue(n[0].spec[w])}),n[0].spec?.ssl&&(this.serviceForm.get("ssl_cert").setValue(n[0].spec?.ssl_cert),this.serviceForm.get("ssl_key").setValue(n[0].spec?.ssl_key))}})),this.detectChanges()}detectChanges(){const n=this.serviceForm.get("service_type");n&&n.valueChanges.subscribe(t=>{if("mgmt-gateway"===t){const o=this.serviceForm.get("port");o&&o.valueChanges.subscribe(h=>{this.showMgmtGatewayMessage=!0});const s=this.serviceForm.get("ssl_protocols");s&&s.valueChanges.subscribe(h=>{this.showMgmtGatewayMessage=!0});const d=this.serviceForm.get("ssl_ciphers");d&&d.valueChanges.subscribe(h=>{this.showMgmtGatewayMessage=!0})}})}getDefaultsEntitiesForRgw(n,t,o){const s=this.realmList.find(X=>X.id===n),d=this.zonegroupList.find(X=>X.id===t),h=this.zoneList.find(X=>X.id===o),I=void 0!==s?s.name:null,$=void 0!==d?d.name:"default",w=void 0!==h?h.name:"default";if("default"===$&&!this.zonegroupNames.includes($)){const X=new nn.Oe;X.name="default",this.zonegroupList.push(X)}if("default"===w&&!this.zoneNames.includes(w)){const X=new nn.$H;X.name="default",this.zoneList.push(X)}return{defaultRealmName:I,defaultZonegroupName:$,defaultZoneName:w}}getDefaultPlacementCount(n){switch(n){case"mon":this.serviceForm.get("count").setValue(5);break;case"mgr":case"mds":case"rgw":case"ingress":case"rbd-mirror":this.serviceForm.get("count").setValue(2);break;case"iscsi":case"cephfs-mirror":case"nfs":case"grafana":case"alertmanager":case"prometheus":case"loki":case"container":case"snmp-gateway":case"elastic-serach":case"jaeger-collector":case"jaeger-query":case"smb":case"oauth2-proxy":case"mgmt-gateway":this.serviceForm.get("count").setValue(1);break;default:this.serviceForm.get("count").setValue(null)}}setRgwFields(n,t,o){const s=[this.rgwRealmService.getAllRealmsInfo(),this.rgwZonegroupService.getAllZonegroupsInfo(),this.rgwZoneService.getAllZonesInfo()];this.sub=(0,K.forkJoin)(s).subscribe(d=>{if(this.multisiteInfo=d,this.realmList=void 0!==this.multisiteInfo[0]&&this.multisiteInfo[0].hasOwnProperty("realms")?this.multisiteInfo[0].realms:[],this.zonegroupList=void 0!==this.multisiteInfo[1]&&this.multisiteInfo[1].hasOwnProperty("zonegroups")?this.multisiteInfo[1].zonegroups:[],this.zoneList=void 0!==this.multisiteInfo[2]&&this.multisiteInfo[2].hasOwnProperty("zones")?this.multisiteInfo[2].zones:[],this.realmNames=this.realmList.map(h=>h.name),this.zonegroupNames=this.zonegroupList.map(h=>h.name),this.zoneNames=this.zoneList.map(h=>h.name),this.defaultRealmId=d[0].default_realm,this.defaultZonegroupId=d[1].default_zonegroup,this.defaultZoneId=d[2].default_zone,this.defaultsInfo=this.getDefaultsEntitiesForRgw(this.defaultRealmId,this.defaultZonegroupId,this.defaultZoneId),this.editing){if(n&&!this.realmNames.includes(n)){const h=new nn.SX;h.name=n,this.realmList.push(h)}if(t&&!this.zonegroupNames.includes(t)){const h=new nn.Oe;h.name=t,this.zonegroupList.push(h)}if(o&&!this.zoneNames.includes(o)){const h=new nn.$H;h.name=o,this.zoneList.push(h)}void 0===t&&void 0===o&&(t="default",o="default"),this.serviceForm.get("realm_name").setValue(n),this.serviceForm.get("zonegroup_name").setValue(t),this.serviceForm.get("zone_name").setValue(o)}else this.serviceForm.get("realm_name").setValue(this.defaultsInfo.defaultRealmName),this.serviceForm.get("zonegroup_name").setValue(this.defaultsInfo.defaultZonegroupName),this.serviceForm.get("zone_name").setValue(this.defaultsInfo.defaultZoneName);0===this.realmList.length?this.showRealmCreationForm=!0:this.showRealmCreationForm=!1},d=>{const h=new nn.$H;h.name="default";const I=new nn.Oe;I.name="default",this.zoneList.push(h),this.zonegroupList.push(I)})}setNvmeServiceId(){const n=this.serviceForm.get("pool").value,t=this.serviceForm.get("group").value;n&&t?this.serviceForm.get("service_id").setValue(`${n}.${t}`):n?this.serviceForm.get("service_id").setValue(n):t?this.serviceForm.get("service_id").setValue(t):this.serviceForm.get("service_id").setValue(null)}setNvmeDefaultPool(){const n=this.rbdPools?.find(t=>"rbd"===t.pool_name)?.pool_name||this.rbdPools?.[0].pool_name;this.serviceForm.get("pool").setValue(n)}requiresServiceId(n){return["mds","rgw","nfs","iscsi","nvmeof","smb","ingress"].includes(n)}setServiceId(n){const t=this.requiresServiceId(n);t&&"nvmeof"===n?(this.setNvmeDefaultPool(),this.setNvmeServiceId()):t?this.serviceForm.get("service_id").setValue(null):this.serviceForm.get("service_id").setValue(n)}onServiceTypeChange(n){if(this.setServiceId(n),this.serviceIds=this.serviceList?.filter(t=>t.service_type===n).map(t=>t.service_id),this.getDefaultPlacementCount(n),"rgw"===n&&this.setRgwFields(),"mgmt-gateway"===n){let t=window.location.href.split(":");this.currentURL=t[0]+t[1],this.serviceForm.get("count").disable()}else this.serviceForm.get("count").enable()}onPlacementChange(n){"label"===n&&this.serviceForm.get("count").setValue(null)}disableForEditing(n){switch(["service_type","service_id"].forEach(o=>{this.serviceForm.get(o).disable()}),n){case"ingress":this.serviceForm.get("backend_service").disable();break;case"nvmeof":this.serviceForm.get("pool").disable(),this.serviceForm.get("group").disable()}}fileUpload(n,t){const o=n[0],s=new FileReader;s.addEventListener("load",d=>{const h=this.serviceForm.get(t);h.setValue(d.target.result),h.markAsDirty(),h.markAsTouched(),h.updateValueAndValidity()}),s.readAsText(o,"utf8")}prePopulateId(){const n=this.serviceForm.get("service_id"),t=this.serviceForm.getValue("backend_service");n.reset({value:t,disabled:!0})}onSubmit(){const n=this,t=this.serviceForm.getRawValue(),o=t.service_type;let s=`service/${m.Qp.CREATE}`;this.editing&&(s=`service/${m.Qp.EDIT}`);const d={service_type:o,placement:{},unmanaged:t.unmanaged};"rgw"===o&&(d.rgw_realm=t.realm_name?t.realm_name:null,d.rgw_zonegroup="default"!==t.zonegroup_name?t.zonegroup_name:null,d.rgw_zone="default"!==t.zone_name?t.zone_name:null);const h=t.service_id;let I=o;switch(p().isString(h)&&!p().isEmpty(h)&&h!==o&&(I=`${o}.${h}`,d.service_id=h),o){case"ingress":d.backend_service=t.backend_service,d.service_id=t.backend_service,p().isNumber(t.frontend_port)&&t.frontend_port>0&&(d.frontend_port=t.frontend_port),p().isString(t.virtual_ip)&&!p().isEmpty(t.virtual_ip)&&(d.virtual_ip=t.virtual_ip.trim()),p().isNumber(t.monitor_port)&&t.monitor_port>0&&(d.monitor_port=t.monitor_port);break;case"nvmeof":d.pool=t.pool,d.group=t.group,d.enable_auth=t.enable_mtls,t.enable_mtls&&(d.root_ca_cert=t.root_ca_cert,d.client_cert=t.client_cert,d.client_key=t.client_key,d.server_cert=t.server_cert,d.server_key=t.server_key);break;case"iscsi":d.pool=t.pool;break;case"smb":d.cluster_id=t.cluster_id?.trim(),d.config_uri=t.config_uri?.trim();for(const $ in t.features)t.features[$]&&(d.features=d.features||[]).push($);d.custom_dns=t.custom_dns?.trim(),d.join_sources=t.join_sources?.trim(),d.user_sources=t.user_sources?.trim(),d.include_ceph_users=t.include_ceph_users?.trim();break;case"snmp-gateway":d.credentials={},d.snmp_version=t.snmp_version,d.snmp_destination=t.snmp_destination,"V3"===t.snmp_version?(d.engine_id=t.engine_id,d.auth_protocol=t.auth_protocol,d.credentials.snmp_v3_auth_username=t.snmp_v3_auth_username,d.credentials.snmp_v3_auth_password=t.snmp_v3_auth_password,null!==t.privacy_protocol&&(d.privacy_protocol=t.privacy_protocol,d.credentials.snmp_v3_priv_password=t.snmp_v3_priv_password)):d.credentials.snmp_community=t.snmp_community}if(!t.unmanaged){switch(t.placement){case"hosts":t.hosts.length>0&&(d.placement.hosts=t.hosts);break;case"label":d.placement.label=t.label}switch(p().isNumber(t.count)&&t.count>0&&(d.placement.count=t.count),o){case"rgw":p().isNumber(t.rgw_frontend_port)&&t.rgw_frontend_port>0&&(d.rgw_frontend_port=t.rgw_frontend_port),d.ssl=t.ssl,t.ssl&&(d.rgw_frontend_ssl_certificate=t.ssl_cert?.trim());break;case"iscsi":p().isString(t.trusted_ip_list)&&!p().isEmpty(t.trusted_ip_list)&&(d.trusted_ip_list=t.trusted_ip_list.trim()),p().isNumber(t.api_port)&&t.api_port>0&&(d.api_port=t.api_port),d.api_user=t.api_user,d.api_password=t.api_password,d.api_secure=t.ssl,t.ssl&&(d.ssl_cert=t.ssl_cert?.trim(),d.ssl_key=t.ssl_key?.trim());break;case"ingress":d.ssl=t.ssl,t.ssl&&(d.ssl_cert=t.ssl_cert?.trim(),d.ssl_key=t.ssl_key?.trim()),d.virtual_interface_networks=t.virtual_interface_networks;break;case"mgmt-gateway":if(d.ssl_cert=t.ssl_cert?.trim(),d.ssl_key=t.ssl_key?.trim(),d.enable_auth=t.enable_auth,d.port=t.port,443===d.port&&delete d.port,d.ssl_protocols=[],t.ssl_protocols!=this.DEFAULT_SSL_PROTOCOL_ITEM)for(const $ of Object.keys(t.ssl_protocols))d.ssl_protocols.push(t.ssl_protocols[$].content);d.ssl_ciphers=t.ssl_ciphers?.trim().split(":");break;case"grafana":d.port=t.grafana_port,d.initial_admin_password=t.grafana_admin_password;break;case"oauth2-proxy":d.provider_display_name=t.provider_display_name?.trim(),d.client_id=t.client_id?.trim(),d.client_secret=t.client_secret?.trim(),d.oidc_issuer_url=t.oidc_issuer_url?.trim(),d.https_address=t.https_address?.trim(),d.redirect_url=t.redirect_url?.trim(),d.allowlist_domains=t.allowlist_domains.split(",").map($=>$.trim()),t.ssl&&(d.ssl_cert=t.ssl_cert?.trim(),d.ssl_key=t.ssl_key?.trim())}}this.taskWrapperService.wrapTaskAroundCall({task:new q.O(s,{service_name:I}),call:this.editing?this.cephServiceService.update(d):this.cephServiceService.create(d)}).subscribe({error(){n.serviceForm.setErrors({cdSubmitButton:!0})},complete:()=>{"services"===this.pageURL?this.router.navigate([this.pageURL,{outlets:{modal:null}}]):this.activeModal.close()}})}clearValidations(){const n=this.serviceForm.getValue("snmp_version"),t=this.serviceForm.getValue("privacy_protocol");"V3"===n?this.serviceForm.get("snmp_community").clearValidators():(this.serviceForm.get("engine_id").clearValidators(),this.serviceForm.get("auth_protocol").clearValidators(),this.serviceForm.get("privacy_protocol").clearValidators(),this.serviceForm.get("snmp_v3_auth_username").clearValidators(),this.serviceForm.get("snmp_v3_auth_password").clearValidators()),null===t&&this.serviceForm.get("snmp_v3_priv_password").clearValidators()}createMultisiteSetup(){this.bsModalRef=this.modalService.show(os,{size:"lg"}),this.bsModalRef.componentInstance.submitAction.subscribe(()=>{this.setRgwFields()})}static{this.\u0275fac=function(t){return new(t||_o)(e.\u0275\u0275directiveInject(m.Ss),e.\u0275\u0275directiveInject(si.t),e.\u0275\u0275directiveInject(Dt.$),e.\u0275\u0275directiveInject(Ht.I),e.\u0275\u0275directiveInject(Ll.m),e.\u0275\u0275directiveInject(Sp.U),e.\u0275\u0275directiveInject(u.Router),e.\u0275\u0275directiveInject(B.a),e.\u0275\u0275directiveInject(al.H),e.\u0275\u0275directiveInject(m.YV),e.\u0275\u0275directiveInject(ol.$),e.\u0275\u0275directiveInject(yl.Z),e.\u0275\u0275directiveInject(Dl.w),e.\u0275\u0275directiveInject(Al.A),e.\u0275\u0275directiveInject(u.ActivatedRoute),e.\u0275\u0275directiveInject(G.NgbActiveModal),e.\u0275\u0275directiveInject(Yt.B))}}static{this.\u0275cmp=e.\u0275\u0275defineComponent({type:_o,selectors:[["cd-service-form"]],viewQuery:function(t,o){if(1&t&&e.\u0275\u0275viewQuery(G.NgbTypeahead,5),2&t){let s;e.\u0275\u0275queryRefresh(s=e.\u0275\u0275loadQuery())&&(o.typeahead=s.first)}},inputs:{hiddenServices:"hiddenServices",editing:"editing",serviceName:"serviceName",serviceType:"serviceType"},features:[e.\u0275\u0275InheritDefinitionFeature],decls:63,vars:52,consts:()=>{let n,t,o,s,d,h,I,$,w,X,J,re,de,Me,ve,Se,$e,Te,ke,rt,mt,xe,Je,vt,Mt,Ye,yt,Ze,sn,rn,ln,Bt,_n,cn,Ke,Un,wn,Gn,Hn,Vn,bn,Bn,zn,Xn,kn,Xe,ta,na,oa,ia,aa,Ko,Qo,Yo,sa,ra,la,Jo,Zo,_a,Fo,qo,ei,ti,ni,oi,ca,da,ua,pa,ma,Oe,C_,S_,Hr,h_,Vr,T_,Br,F_,zr,v_,M_,R_,O_,P_,b_,N_,I_,A_,D_,y_,L_,$_,x_,U_,w_,G_,H_,V_,B_,z_,X_,k_,j_,W_,K_,Q_,Y_,J_,Z_,q_,ec,tc,nc,oc,ic,ac,sc,rc,lc,_c,cc,dc,uc,pc,mc,fc,Ec,gc,Cc,Sc,hc,Tc,Fc,vc,Mc,Rc,Oc,Pc,bc,Nc,Ic,Ac,Dc,yc,Lc,$c,xc,Uc,wc,Gc,Hc,Vc,Bc,zc,Xc,kc,jc,Wc,Kc,Qc,Yc,Jc,Zc,qc,ed,td,nd,od,id,ad,sd,rd,ld,_d,cd,dd,ud,pd,md,fd,Ed,gd,Cd,Sd,hd,Td;return n=$localize`:␟fb127ea03835b3230f0ed981c7080e2ccb879621␟3346778808274133574:${"\ufffd0\ufffd"}:INTERPOLATION: ${"\ufffd1\ufffd"}:INTERPOLATION_1:`,t=$localize`:␟f61c6867295f3b53d23557021f2f4e0aa1d0b8fc␟8650499415827640724:Type`,o=$localize`:␟3214a1f3a4c3e89a848b4ec59adeeda3b913c396␟1048340649879334463:-- Select a service type --`,s=$localize`:␟83d5d7edd8a0be253c4e93ad4c3efe86d9ac520f␟6334966869524707420:Unmanaged`,d=$localize`:␟ef6e93484490f84860872b0c46a3214194bd8e2f␟5303541482012261945:If Unmanaged is selected, the orchestrator will not start or stop any daemons associated with this service. Placement and all other properties will be ignored.`,h=$localize`:␟a4d113febae4471acad75214da773631a453771f␟5121772990212218425:${"\ufffd#2\ufffd"}:START_LINK: Click here${"\ufffd/#2\ufffd"}:CLOSE_LINK: to create a new Realm/Zone Group/Zone `,I=$localize`:␟7e31779772e519318de1c3f56f737a743535e266␟173545519118712216: Authentication must be enabled in an active \`mgtm-gateway\` service to enable Single Sign-On(SSO) with \`oauth2-proxy\` `,$=$localize`:␟ae1e5f2b8323ca1a377bfcd58bc80df9055205ed␟3666298808684320010: With an active mgmt-gateway service, the dashboard will continue to be served on ${"[\ufffd0\ufffd|\ufffd2\ufffd]"}:INTERPOLATION::${"[\ufffd1\ufffd|\ufffd3\ufffd]"}:INTERPOLATION_1: and all other services will be accessible from ${"[\ufffd0\ufffd|\ufffd2\ufffd]"}:INTERPOLATION::${"[\ufffd1\ufffd|\ufffd3\ufffd]"}:INTERPOLATION_1:/service_name `,$=e.\u0275\u0275i18nPostprocess($),w=$localize`:␟b858419f3e3cda4f615fc654c9b0da05fea4c3e5␟6275350867580172288: SMB service management is intended for advanced users only. For most scenarios, it is recommended to use the SMB module instead. To manage SMB clusters and shares, please visit the ${"\ufffd#2\ufffd"}:START_LINK:SMB page${"\ufffd/#2\ufffd"}:CLOSE_LINK:. `,X=$localize`:␟7cbdabcece469fab89cfa687ab152bca18b97498␟1417693714872528491:This field is required.`,J=$localize`:␟f32579a9fd19d93c083175284ee3426d78751c33␟9118175771763301648:Backend Service`,re=$localize`:␟94516fa213706c67ce5a5b5765681d7fb032033a␟3894950702316166331:Loading...`,de=$localize`:␟c2937074aed12b8158e929c58747a8216433b72b␟7441632044691946087:-- No service available --`,Me=$localize`:␟cc554a79a4854e3f92fdf687c62a699a9f0fc340␟6695816287448659622:-- Select an existing service --`,ve=$localize`:␟7cbdabcece469fab89cfa687ab152bca18b97498␟1417693714872528491:This field is required.`,Se=$localize`:␟d43e2b5eda5f168c6eb5ee505729db317c7509db␟6193108880005871084:Block Pool`,$e=$localize`:␟dce0e356d2b550cd7f17db209fb76f6d05d76ba3␟5475379690689308691: An RBD application-enabled pool in which the gateway configuration can be managed. `,Te=$localize`:␟94516fa213706c67ce5a5b5765681d7fb032033a␟3894950702316166331:Loading...`,ke=$localize`:␟be7ae8d347aaeb5c3df28d82365bc6b84f576f43␟5376852313208156123:-- No block pools available --`,rt=$localize`:␟ef83ec9c304a89d45650e580dcdc2978c37b3a83␟7859304693598053124:-- Select a pool --`,mt=$localize`:␟7cbdabcece469fab89cfa687ab152bca18b97498␟1417693714872528491:This field is required.`,xe=$localize`:␟de31685e1ee2f51b2d31b376653ad4a7e5406104␟1255339738217085471:Group Name`,Je=$localize`:␟3cb6c5ae8b3540744a9c6b74cf0ec483fe2bda06␟2932775528398414084: The name of the gateway group. `,vt=$localize`:␟7cbdabcece469fab89cfa687ab152bca18b97498␟1417693714872528491:This field is required.`,Mt=$localize`:␟27634638ac68edd16b5a107ea29e52e1bab80b25␟8604852007710946848:Service Name`,Ye=$localize`:␟c66432dc299dcc6973741d842ee5c51664a11b68␟7477292313755335330:${"\ufffd0\ufffd"}:INTERPOLATION:. `,yt=$localize`:␟7cbdabcece469fab89cfa687ab152bca18b97498␟1417693714872528491:This field is required.`,Ze=$localize`:␟770007f2963dec275d1a2d6797730144a6d6d99b␟7364958330935178357:This service id is already in use.`,sn=$localize`:␟6c47c42f19c77ad4d7080634614320b2f805bb61␟3451345365331244307:MDS service id must start with a letter and contain alphanumeric characters or '.', '-', and '_'`,rn=$localize`:␟838805f188595c747b909a3882b9979c42a85c59␟3840481991104643295:Realm`,ln=$localize`:␟ffeedf2f4c2abb17a93121a23a46d1656ad25c01␟7611330259764311267:-- No realm available --`,Bt=$localize`:␟13e761b7724da4bbdf6ba26c491f4798dad9241c␟6148052126949932311:Zone Group`,_n=$localize`:␟da45a344c97a4cedae594570102577146f5d9670␟4378147649219625174:Zone`,cn=$localize`:␟c15fa461935e0f600bc5d1660af1da67f024fc2a␟5869780110608474933:Placement`,Ke=$localize`:␟099b441d49333b3c6d30b36dc0a4763e64c78920␟4435206372750903836:Hosts`,Un=$localize`:␟863226cffd5b66a6fee9810a9282a5006d6ef576␟4077520913910941990:Label`,wn=$localize`:␟863226cffd5b66a6fee9810a9282a5006d6ef576␟4077520913910941990:Label`,Gn=$localize`:␟7cbdabcece469fab89cfa687ab152bca18b97498␟1417693714872528491:This field is required.`,Hn=$localize`:␟099b441d49333b3c6d30b36dc0a4763e64c78920␟4435206372750903836:Hosts`,Vn=$localize`:␟06412bce0f4fe4311193e9763666089bf9d980da␟8177873832400820695:Count`,bn=$localize`:␟4176f7597814f783652d4e2212ba75e17a3b5efe␟632724199545622255:Number of deamons that will be deployed`,Bn=$localize`:␟ee1a29cc658e4fa891be762d7bae96139b57c8f4␟8734993421339261707:The value must be at least 1.`,zn=$localize`:␟eae7086660cf1e38c7194a2c49ff52cc656f90f5␟4304943972618871159:The entered value needs to be a number.`,Xn=$localize`:␟cb2741a46e3560f6bc6dfd99d385e86b08b26d72␟6117946241126833991:Port`,kn=$localize`:␟eae7086660cf1e38c7194a2c49ff52cc656f90f5␟4304943972618871159:The entered value needs to be a number.`,Xe=$localize`:␟ee1a29cc658e4fa891be762d7bae96139b57c8f4␟8734993421339261707:The value must be at least 1.`,ta=$localize`:␟a23ed3598cca5285606675b6cb2536a56b411ade␟734228889689400302:The value cannot exceed 65535.`,na=$localize`:␟e70fcca5a99575cffef3ff8cbd5e69f06ffd0f1c␟7101197021456818771:Pool`,oa=$localize`:␟94516fa213706c67ce5a5b5765681d7fb032033a␟3894950702316166331:Loading...`,ia=$localize`:␟2d8ebdc326e6b9ff35feee3f762b7ab39c02d78f␟1930073306629708829:-- No pools available --`,aa=$localize`:␟ef83ec9c304a89d45650e580dcdc2978c37b3a83␟7859304693598053124:-- Select a pool --`,Ko=$localize`:␟7cbdabcece469fab89cfa687ab152bca18b97498␟1417693714872528491:This field is required.`,Qo=$localize`:␟84b675705324741b954615fedf2417d4d873b0b6␟1568221314488942524:Trusted IPs`,Yo=$localize`:␟b543e7c787cc48c2938cbce2d14c6afea5a598df␟7080907844223799144:Comma separated list of IP addresses.`,sa=$localize`:␟1039ea40da18a6453d9c1adc72a35aed099029d0␟6501588770588980110:Please add the ${"\ufffd#11\ufffd"}:START_BOLD_TEXT:Ceph Manager${"\ufffd/#11\ufffd"}:CLOSE_BOLD_TEXT: IP addresses here, otherwise the iSCSI gateways can't be reached.`,ra=$localize`:␟cb2741a46e3560f6bc6dfd99d385e86b08b26d72␟6117946241126833991:Port`,la=$localize`:␟e08a77594f3d89311cdf6da5090044270909c194␟2392488717875840729:User`,Jo=$localize`:␟c32ef07f8803a223a83ed17024b38e8d82292407␟1431416938026210429:Password`,Zo=$localize`:␟eae7086660cf1e38c7194a2c49ff52cc656f90f5␟4304943972618871159:The entered value needs to be a number.`,_a=$localize`:␟ee1a29cc658e4fa891be762d7bae96139b57c8f4␟8734993421339261707:The value must be at least 1.`,Fo=$localize`:␟a23ed3598cca5285606675b6cb2536a56b411ade␟734228889689400302:The value cannot exceed 65535.`,qo=$localize`:␟7cbdabcece469fab89cfa687ab152bca18b97498␟1417693714872528491:This field is required.`,ei=$localize`:␟7cbdabcece469fab89cfa687ab152bca18b97498␟1417693714872528491:This field is required.`,ti=$localize`:␟c14ad7c4a8b6e593ed4520bdee63c6492e76c9d5␟9205907420411818817:foo`,ni=$localize`:␟f9197f6a5eb597bbf648aa79a7658a86a258e3f1␟4538842168406843474:rados://.smb/foo/scc.toml`,oi=$localize`:␟084d964bf76b0de65aeac14b11b8e412f09c3996␟4300861096504031528:192.168.76.204`,ca=$localize`:␟d3d1f785fe24e397f08a7327e8d4362fe2968104␟1074518375503605451:rados:mon-config-key:smb/config/foo/join1.json`,da=$localize`:␟574b3d05b652f801fe61d2bd9dd79111c38a381d␟7951431684184237950:rados:mon-config-key:smb/config/foo/join2.json`,ua=$localize`:␟ca7a02b0f5f569b139c8da289c98a3de5dab5594␟2850201221969345861:client.smb.fs.cluster.foo`,pa=$localize`:␟88cd6b14c7115a5976982ceb7633569a7a797e3a␟4312544483018964666: Cluster id ${"\ufffd#4\ufffd"}:START_TAG_CD_HELPER:${"\ufffd#5\ufffd"}:START_TAG_SPAN:A short name identifying the SMB “cluster”. In this case a cluster is simply a management unit of one or more Samba services sharing a common configuration, and may not provide actual clustering or availability mechanisms.${"\ufffd/#5\ufffd"}:CLOSE_TAG_SPAN:${"\ufffd/#4\ufffd"}:CLOSE_TAG_CD_HELPER:`,ma=$localize`:␟75c319610fab55fe7bd5009e3e0c0bb651de5c7e␟1365322849596217376:Config URI`,Oe=$localize`:␟2c4889eb20073985072079a11a7775cfa8d27762␟5315609511301269655: Configuration source that should be loaded by the samba-container as the primary configuration file. `,C_=$localize`:␟0a5e5f833bee6738cb1de380dfd98137029a2e23␟2730739836010453793:Features ${"\ufffd#22\ufffd"}:START_TAG_CD_HELPER:${"\ufffd#23\ufffd"}:START_TAG_SPAN:Pre-defined terms enabling specific deployment characteristics.${"\ufffd/#23\ufffd"}:CLOSE_TAG_SPAN:${"\ufffd/#22\ufffd"}:CLOSE_TAG_CD_HELPER:`,S_=$localize`:␟66546c148121d319648680ed4d8b87530270dd28␟8172302997473741295:Custom DNS`,Hr=$localize`:␟5f766a30c910e65171042948f2a196904a0534c8␟2211019810658032007:${"[\ufffd#32\ufffd|\ufffd#34\ufffd]"}:START_TAG_SPAN:Comma separated list of DNSs.${"[\ufffd/#32\ufffd|\ufffd/#34\ufffd]"}:CLOSE_TAG_SPAN:${"\ufffd#33\ufffd\ufffd/#33\ufffd"}:LINE_BREAK:${"[\ufffd#32\ufffd|\ufffd#34\ufffd]"}:START_TAG_SPAN:A list of IP addresses that will be used as the DNS servers for a Samba container.${"[\ufffd/#32\ufffd|\ufffd/#34\ufffd]"}:CLOSE_TAG_SPAN:`,Hr=e.\u0275\u0275i18nPostprocess(Hr),h_=$localize`:␟23176f0e4e65f1e09b9cb455d9082071a1b986ef␟2496448389183430934:Join sources`,Vr=$localize`:␟aa037259df4f7076b0da141ba8a9d45d29f35f7e␟3480109293787075835:${"[\ufffd#43\ufffd|\ufffd#45\ufffd]"}:START_TAG_SPAN:Comma separated list of URIs.${"[\ufffd/#43\ufffd|\ufffd/#45\ufffd]"}:CLOSE_TAG_SPAN:${"\ufffd#44\ufffd\ufffd/#44\ufffd"}:LINE_BREAK:${"[\ufffd#43\ufffd|\ufffd#45\ufffd]"}:START_TAG_SPAN:A list of values that will be used to identify where authentication data that will be used to perform domain joins are located.${"[\ufffd/#43\ufffd|\ufffd/#45\ufffd]"}:CLOSE_TAG_SPAN:`,Vr=e.\u0275\u0275i18nPostprocess(Vr),T_=$localize`:␟3e497cf4086ff45b844b56e95a5525b25bd1130a␟4086703183428085748:User sources`,Br=$localize`:␟a72bd24bc5e62108f3d09a4940722c8b6f88c84e␟2639882069706962698:${"[\ufffd#54\ufffd|\ufffd#56\ufffd]"}:START_TAG_SPAN:Comma separated list of URIs.${"[\ufffd/#54\ufffd|\ufffd/#56\ufffd]"}:CLOSE_TAG_SPAN:${"\ufffd#55\ufffd\ufffd/#55\ufffd"}:LINE_BREAK:${"[\ufffd#54\ufffd|\ufffd#56\ufffd]"}:START_TAG_SPAN:A list of pseudo-uris containing data the samba-container can use to create users (and/or groups). A ceph based samba container may typically use a rados uri or a mon config-key store uri ${"[\ufffd/#54\ufffd|\ufffd/#56\ufffd]"}:CLOSE_TAG_SPAN:`,Br=e.\u0275\u0275i18nPostprocess(Br),F_=$localize`:␟164e774eb80cccd0034ff5f9f7155c6928dd0280␟103684022884344569:Ceph users`,zr=$localize`:␟98bae0d522aec8d54bfd561b787fa9fb997b147f␟1689111809181462016:${"[\ufffd#65\ufffd|\ufffd#67\ufffd]"}:START_TAG_SPAN:Comma separated list of Ceph users.${"[\ufffd/#65\ufffd|\ufffd/#67\ufffd]"}:CLOSE_TAG_SPAN:${"\ufffd#66\ufffd\ufffd/#66\ufffd"}:LINE_BREAK:${"[\ufffd#65\ufffd|\ufffd#67\ufffd]"}:START_TAG_SPAN:A list of cephx user names that the Samba Containers may use.${"[\ufffd/#65\ufffd|\ufffd/#67\ufffd]"}:CLOSE_TAG_SPAN:`,zr=e.\u0275\u0275i18nPostprocess(zr),v_=$localize`:␟7cbdabcece469fab89cfa687ab152bca18b97498␟1417693714872528491:This field is required.`,M_=$localize`:␟7cbdabcece469fab89cfa687ab152bca18b97498␟1417693714872528491:This field is required.`,R_=$localize`:␟7eab68d7f8158358670468c7aa3ae58872af793c␟5375329423696268496:The value must start with either 'http:', 'https:', 'rados:' or 'rados:mon-config-key:'`,O_=$localize`:␟fe607381a7484b3fc03239de03d91676ac652283␟3451089663791994236:${"\ufffd0\ufffd"}:INTERPOLATION: `,P_=$localize`:␟6265b64c17a1e19775769489bfd0b152fa1f3ba1␟180255038389553248:Virtual IP`,b_=$localize`:␟61893fde6e9e05a6b91619d501edaa7962b438ff␟3960600678060729667:The virtual IP address and subnet (in CIDR notation) where the ingress service will be available.`,N_=$localize`:␟ece04ddf7e96f445415ebd90d93c455e03e8cf53␟3328660234842620246:Frontend Port`,I_=$localize`:␟ae6fd97454d184b374984c9ff808176ece54f0dd␟605069602269765772:The port used to access the ingress service.`,A_=$localize`:␟1261eacf161f75efc9dfea84dd97b4a466b89aa1␟9040550999593589195:Monitor Port`,D_=$localize`:␟4df6281ed630ba96f09790a46a7fe0ec0e666bb6␟1400002020316091076:The port used by haproxy for load balancer status.`,y_=$localize`:␟7cbdabcece469fab89cfa687ab152bca18b97498␟1417693714872528491:This field is required.`,L_=$localize`:␟eae7086660cf1e38c7194a2c49ff52cc656f90f5␟4304943972618871159:The entered value needs to be a number.`,$_=$localize`:␟ee1a29cc658e4fa891be762d7bae96139b57c8f4␟8734993421339261707:The value must be at least 1.`,x_=$localize`:␟a23ed3598cca5285606675b6cb2536a56b411ade␟734228889689400302:The value cannot exceed 65535.`,U_=$localize`:␟7cbdabcece469fab89cfa687ab152bca18b97498␟1417693714872528491:This field is required.`,w_=$localize`:␟eae7086660cf1e38c7194a2c49ff52cc656f90f5␟4304943972618871159:The entered value needs to be a number.`,G_=$localize`:␟ee1a29cc658e4fa891be762d7bae96139b57c8f4␟8734993421339261707:The value must be at least 1.`,H_=$localize`:␟a23ed3598cca5285606675b6cb2536a56b411ade␟734228889689400302:The value cannot exceed 65535.`,V_=$localize`:␟7cbdabcece469fab89cfa687ab152bca18b97498␟1417693714872528491:This field is required.`,B_=$localize`:␟8ce24ae1d792ed2846ba57e7ed6397a802caeff5␟1654039843671236185:CIDR Networks`,z_=$localize`:␟7c13184af0c09e3bad77daa5f4869138708d26b2␟486061004020332325:A list of networks to identify which network interface to use for the virtual IP address.`,X_=$localize`:␟8fe73a4787b8068b2ba61f54ab7e0f9af2ea1fc9␟2724055831234181057:Version`,k_=$localize`:␟6a6855d17f6b9820bb9709870efdcc7da99552d3␟2965988003720319790:-- Select SNMP version --`,j_=$localize`:␟a7369891e88cd613e45a39b55a282c97776d05f5␟1866048779551574162:Destination`,W_=$localize`:␟f09a5d334a73a4b5ba031d7fa65151cad5ec7133␟2259906991408679021:Must be of the format hostname:port.`,K_=$localize`:␟b48c81465d14465b95826b99e05acfabef1814c6␟4294913753867242891:Credentials`,Q_=$localize`:␟7cbdabcece469fab89cfa687ab152bca18b97498␟1417693714872528491:This field is required.`,Y_=$localize`:␟7cbdabcece469fab89cfa687ab152bca18b97498␟1417693714872528491:This field is required.`,J_=$localize`:␟b68c79ffe3af1db88180454fbc2fa880a51ccf52␟1269863128449531501:The value does not match the pattern: ${"\ufffd#2\ufffd"}:START_TAG_STRONG:hostname:port${"\ufffd/#2\ufffd"}:CLOSE_TAG_STRONG:`,Z_=$localize`:␟2c90ad98a026d781ab729911873767e549d78f99␟585398440253191289:Engine Id`,q_=$localize`:␟0d39d015ebd667fb6bddf08bb0e5b3faa6cf044c␟1768627592320233424:Unique identifier for the device (in hex).`,ec=$localize`:␟7cbdabcece469fab89cfa687ab152bca18b97498␟1417693714872528491:This field is required.`,tc=$localize`:␟1514cda7dc49062c5c532427245ce47c4954bc32␟291747419596021669:The value does not match the pattern: ${"\ufffd#2\ufffd"}:START_TAG_STRONG:Must be in hexadecimal and length must be multiple of 2 with min value = 10 amd max value = 64.${"\ufffd/#2\ufffd"}:CLOSE_TAG_STRONG:`,nc=$localize`:␟2b2d628c51192ade0044212b409c758c20f9c021␟3432973823727457116:Auth Protocol`,oc=$localize`:␟fc8bb2315a5101770a752b18e03b5c730539397c␟8330226014050781181:-- Select auth protocol --`,ic=$localize`:␟7cbdabcece469fab89cfa687ab152bca18b97498␟1417693714872528491:This field is required.`,ac=$localize`:␟6777f99fd13e03874afe26ba7289dc9fc211af04␟8155775132230140797:Privacy Protocol`,sc=$localize`:␟70512b7c13bce85b3928920b29fafbd59a853383␟8825510421013440742:-- Select privacy protocol --`,rc=$localize`:␟a4ea0163c25c818aab982072b1b8d5ab585e9a5a␟2665113862968938778:SNMP Community`,lc=$localize`:␟7cbdabcece469fab89cfa687ab152bca18b97498␟1417693714872528491:This field is required.`,_c=$localize`:␟08c74dc9762957593b91f6eb5d65efdfc975bf48␟5248717555542428023:Username`,cc=$localize`:␟7cbdabcece469fab89cfa687ab152bca18b97498␟1417693714872528491:This field is required.`,dc=$localize`:␟c32ef07f8803a223a83ed17024b38e8d82292407␟1431416938026210429:Password`,uc=$localize`:␟7cbdabcece469fab89cfa687ab152bca18b97498␟1417693714872528491:This field is required.`,pc=$localize`:␟948758e1412bb2ecdb98e3a4f1cbb6d7458456f2␟8255877266497322342:Encryption`,mc=$localize`:␟7cbdabcece469fab89cfa687ab152bca18b97498␟1417693714872528491:This field is required.`,fc=$localize`:␟0fcb05ce1eb40cc8da7d76a7192341e2902b2f09␟2721823117340085840:My OIDC Provider`,Ec=$localize`:␟d47dc11527224ad4bf218a4a72cda2136fbd9b6a␟1395901222609454425:Provider display name`,gc=$localize`:␟62a0350e73307835d7361ce6b755a02fb94ba670␟4140665708580168410:The display name for the identity provider (IdP) in the UI.`,Cc=$localize`:␟152344a93fb1022382cc1a10e38e4290019224e4␟5273501066845923426:Client ID`,Sc=$localize`:␟5ae0da0d281051bdde0af4e0696ee2426b6491f3␟7171866982651940105:The client ID for authenticating with the IdP.`,hc=$localize`:␟fc6b6dfdff61a608cf778c85e2419d301f826a14␟6535310354973070697:Client secret`,Tc=$localize`:␟243accef1ec73f5287f1e513842d21cb61b8f4b7␟1843516441518659832:The client secret for authenticating with the IdP.`,Fc=$localize`:␟45cb4569ee10d4216ddf35e58b4d5fcd74d29d32␟6080732874552998599:OIDC Issuer URL`,vc=$localize`:␟ef289f2342c30dc11a9cb176b41ecd214a691509␟5576549312701254463:The URL of the OpenID Connect (OIDC) issuer.`,Mc=$localize`:␟d6c301bf4a221ceb63b2ae2a8723635387fe65ec␟1722297763909100417:Https address`,Rc=$localize`:␟58bbd21b0a2731f6bd65b3679c00656c723ec00e␟1639891029962790631:The address for HTTPS connections as [IP|Hostname]:port.`,Oc=$localize`:␟27cee417dff3329b8f0da96d98b4d53cec1b1384␟6762090905776336676:Redirect URL`,Pc=$localize`:␟2a0f7548c0de47060cbbdda85d46fa2fc3254c1a␟3382362105805439265:The URL the oauth2-proxy service will redirect to after a successful login.`,bc=$localize`:␟3d805dd854f9f7444311e239441e80f257da314a␟8097513771076229780:Allowlist domains`,Nc=$localize`:␟4b12478d9d000c00eff7329784f4d344518f36b3␟8753423252318594678:Comma separated list of domains to be allowed to redirect to, used for login or logout.`,Ic=$localize`:␟7cbdabcece469fab89cfa687ab152bca18b97498␟1417693714872528491:This field is required.`,Ac=$localize`:␟7cbdabcece469fab89cfa687ab152bca18b97498␟1417693714872528491:This field is required.`,Dc=$localize`:␟7cbdabcece469fab89cfa687ab152bca18b97498␟1417693714872528491:This field is required.`,yc=$localize`:␟7cbdabcece469fab89cfa687ab152bca18b97498␟1417693714872528491:This field is required.`,Lc=$localize`:␟1842a2ad96a1ab1714428d0eb0f26b8d5ed05885␟7663929228794823405:Invalid url.`,$c=$localize`:␟63b0450809f57eeb77de17932b1d31e48bbb6432␟3628125971148081825:Format must be [IP|Hostname]:port and the port between 0 and 65535`,xc=$localize`:␟dcc149912be47c39652bd71b54c19b5a51b5fe4d␟3624376051002573942:Select protocols...`,Uc=$localize`:␟cb2741a46e3560f6bc6dfd99d385e86b08b26d72␟6117946241126833991:Port`,wc=$localize`:␟ed72606056198896f46c65d0dbbe854d04f3de47␟8966698274727122602:Authentication`,Gc=$localize`:␟70cb6ff7931e92718699e80bb46b9e06d80aea08␟5208108791734940530: Allows to enable authentication through an external Identity Provider (IdP) using Single Sign-On (SSO) `,Hc=$localize`:␟564b4b8f89f519d273ecfb74464f4d798d939d43␟5443197147973612827:${"\ufffd#20\ufffd"}:START_TAG_CDS_DROPDOWN_LIST:${"\ufffd/#20\ufffd"}:CLOSE_TAG_CDS_DROPDOWN_LIST:`,Vc=$localize`:␟9f2ac74452ff63bd0b4fe610ae209a57f4a31ce7␟493572442383919797:SSL ciphers`,Bc=$localize`:␟f062a3668af7d79104a59e14aa02d8e2396d0c37␟3158867007683663727:Default cipher list used: ${"\ufffd#30\ufffd"}:START_LINK:https://ssl-config.mozilla.org/#server=nginx${"\ufffd/#30\ufffd"}:CLOSE_LINK:`,zc=$localize`:␟eae7086660cf1e38c7194a2c49ff52cc656f90f5␟4304943972618871159:The entered value needs to be a number.`,Xc=$localize`:␟ee1a29cc658e4fa891be762d7bae96139b57c8f4␟8734993421339261707:The value must be at least 1.`,kc=$localize`:␟a23ed3598cca5285606675b6cb2536a56b411ade␟734228889689400302:The value cannot exceed 65535.`,jc=$localize`:␟1150c8ca5bbdcc79f24ac975e43d282868b6ab6f␟8971993228034097111:Invalid cipher suite. Each cipher must be separated by '-' and each cipher suite must be separated by ':'`,Wc=$localize`:␟e65610b5d940367f1ff6b57772b96e94e35fe202␟3719080555538542367:SSL`,Kc=$localize`:␟9e37e0d06148c7708e88b4a1eb412babbe1a4afc␟7164856686778871055:Certificate`,Qc=$localize`:␟295ae4f632322098deca8a3ddfbc7aeaabb5423b␟2542310435779389885:The SSL certificate in PEM format.`,Yc=$localize`:␟7cbdabcece469fab89cfa687ab152bca18b97498␟1417693714872528491:This field is required.`,Jc=$localize`:␟464272c069fe56f6c50f41f426a25b2a42c95ba5␟1254586342390366472:Invalid SSL certificate.`,Zc=$localize`:␟0596d06bf1f8a15d4bfe56226971ecdd78013b1f␟8131917609184053070:Private key`,qc=$localize`:␟ded15dc55104994c0230189f34dff84a4955aafb␟7135968420581975132:The SSL private key in PEM format.`,ed=$localize`:␟7cbdabcece469fab89cfa687ab152bca18b97498␟1417693714872528491:This field is required.`,td=$localize`:␟19bdc1597d815b456793ff87c89af4257a85a103␟8430297957628908174:Invalid SSL private key.`,nd=$localize`:␟3c2be3a11365966818184c92dc86f831d1fb1e3c␟9076922112337217207:Grafana Port`,od=$localize`:␟d7f1edc26a283a7b1736128ee8a86cb84ce2606e␟3178326942014426612:The default port used by grafana.`,id=$localize`:␟54e547abea2483827b48b12f1d054f314f5b1ba3␟1598054543669056810:${"\ufffd#17\ufffd"}:START_TAG_SPAN:Grafana Password${"\ufffd/#17\ufffd"}:CLOSE_TAG_SPAN:${"\ufffd#18\ufffd"}:START_TAG_CD_HELPER:The password of the default Grafana Admin. Set once on first-run.${"\ufffd/#18\ufffd"}:CLOSE_TAG_CD_HELPER:`,ad=$localize`:␟eae7086660cf1e38c7194a2c49ff52cc656f90f5␟4304943972618871159:The entered value needs to be a number.`,sd=$localize`:␟ee1a29cc658e4fa891be762d7bae96139b57c8f4␟8734993421339261707:The value must be at least 1.`,rd=$localize`:␟a23ed3598cca5285606675b6cb2536a56b411ade␟734228889689400302:The value cannot exceed 65535.`,ld=$localize`:␟7cbdabcece469fab89cfa687ab152bca18b97498␟1417693714872528491:This field is required.`,_d=$localize`:␟4ffe074d49b30a8941a18bc9e59be4305e2b8c8c␟340270807572941949: Modifying the default settings could lead to a weaker security configuration `,cd=$localize`:␟948758e1412bb2ecdb98e3a4f1cbb6d7458456f2␟8255877266497322342:Encryption`,dd=$localize`:␟b9b9c7a23d09f316d73f4c9c639aede34792bd01␟5617303671838801222:Enables mutual TLS (mTLS) between the client and the gateway server.`,ud=$localize`:␟6d955d6734c317eb42c3f351a61ead8df2aee039␟4869272173380443575:Root CA certificate`,pd=$localize`:␟7cbdabcece469fab89cfa687ab152bca18b97498␟1417693714872528491:This field is required.`,md=$localize`:␟c49419c4b91f0eea51540741063118518ec8cd57␟2186845636964836828:Client CA certificate`,fd=$localize`:␟7cbdabcece469fab89cfa687ab152bca18b97498␟1417693714872528491:This field is required.`,Ed=$localize`:␟bb3327e44a028331c06725d2f09329fab7ef04d3␟4341856182704535428:Client key`,gd=$localize`:␟7cbdabcece469fab89cfa687ab152bca18b97498␟1417693714872528491:This field is required.`,Cd=$localize`:␟0e529a411e39be5d590f0ac8f1cb54192ed22bf4␟8903080947625325336:Gateway server certificate`,Sd=$localize`:␟7cbdabcece469fab89cfa687ab152bca18b97498␟1417693714872528491:This field is required.`,hd=$localize`:␟0023b37fdfff2ae7dfac0435a98c2abd37986e51␟8542951791427845177:Gateway server key`,Td=$localize`:␟7cbdabcece469fab89cfa687ab152bca18b97498␟1417693714872528491:This field is required.`,[["frm","ngForm"],n,t,o,s,d,h,I,$,w,X,J,re,de,Me,ve,Se,$e,Te,ke,rt,mt,xe,Je,vt,Mt,Ye,yt,Ze,sn,rn,ln,Bt,_n,cn,Ke,Un,wn,Gn,Hn,Vn,bn,Bn,zn,Xn,kn,Xe,ta,na,oa,ia,aa,Ko,Qo,Yo,sa,ra,la,Jo,Zo,_a,Fo,qo,ei,pa,ma,Oe,C_,S_,Hr,h_,Vr,T_,Br,F_,zr,v_,M_,R_,O_,P_,b_,N_,I_,A_,D_,y_,L_,$_,x_,U_,w_,G_,H_,V_,B_,z_,X_,k_,j_,W_,K_,Q_,Y_,J_,Z_,q_,ec,tc,nc,oc,ic,ac,sc,rc,lc,_c,cc,dc,uc,pc,mc,Ec,gc,Cc,Sc,hc,Tc,Fc,vc,Mc,Rc,Oc,Pc,bc,Nc,Ic,Ac,Dc,yc,Lc,$c,Uc,wc,Gc,Hc,Vc,Bc,zc,Xc,kc,jc,Wc,Kc,Qc,Yc,Jc,Zc,qc,ed,td,nd,od,id,ad,sd,rd,ld,_d,cd,dd,ud,pd,md,fd,Ed,gd,Cd,Sd,hd,Td,[3,"pageURL","modalRef"],[1,"modal-title"],[1,"modal-content"],["novalidate","",3,"formGroup"],[1,"modal-body"],["type","info","spacingClass","mb-3",4,"ngIf"],["type","warning","spacingClass","mb-3",4,"ngIf"],[1,"form-group","row"],["for","service_type",1,"cd-col-form-label","required"],[1,"cd-col-form-input"],["id","service_type","name","service_type","formControlName","service_type",1,"form-select",3,"change"],[3,"ngValue"],[3,"value",4,"ngFor","ngForOf"],["class","invalid-feedback",4,"ngIf"],["class","form-group row",4,"ngIf"],[1,"cd-col-form-offset"],[1,"custom-control","custom-checkbox"],["id","unmanaged","type","checkbox","formControlName","unmanaged",1,"custom-control-input"],["for","unmanaged",1,"custom-control-label","m-0"],[4,"ngIf"],[1,"modal-footer"],[1,"text-right"],[3,"submitActionEvent","form","submitText"],["type","info","spacingClass","mb-3"],[1,"text-decoration-underline",3,"click"],["type","warning","spacingClass","mb-3"],["routerLink","/cephfs/smb"],[3,"value"],[1,"invalid-feedback"],["for","backend_service",1,"cd-col-form-label",3,"ngClass"],["id","backend_service","name","backend_service","formControlName","backend_service",1,"form-select",3,"change"],[3,"ngValue",4,"ngIf"],["for","pool",1,"cd-col-form-label","required"],["id","pool","name","pool","formControlName","pool",1,"form-select",3,"change"],["for","group",1,"cd-col-form-label","required"],[1,"input-group"],["id","group","type","text","formControlName","group",1,"form-control",3,"change"],["for","service_id",1,"cd-col-form-label",3,"ngClass"],["class","input-group-text","for","userId",4,"ngIf"],["id","service_id","type","text","formControlName","service_id",1,"form-control"],["for","userId",1,"input-group-text"],["for","realm_name",1,"cd-col-form-label"],["id","realm_name","formControlName","realm_name","name","realm_name",1,"form-select"],["selected","",4,"ngIf"],["selected",""],["for","zonegroup_name",1,"cd-col-form-label"],["id","zonegroup_name","formControlName","zonegroup_name","name","zonegroup_name",1,"form-select"],["for","zone_name",1,"cd-col-form-label"],["id","zone_name","formControlName","zone_name","name","zone_name",1,"form-select"],["for","placement",1,"cd-col-form-label"],["id","placement","formControlName","placement",1,"form-select",3,"change"],["value","hosts"],["value","label"],["for","label",1,"cd-col-form-label"],["id","label","type","text","formControlName","label",1,"form-control",3,"focus","click","ngbTypeahead"],["for","hosts",1,"cd-col-form-label"],["id","hosts",3,"data","options","messages"],["for","count",1,"cd-col-form-label"],["id","count","type","number","formControlName","count","min","1",1,"form-control"],["for","rgw_frontend_port",1,"cd-col-form-label"],["id","rgw_frontend_port","type","number","formControlName","rgw_frontend_port","min","1","max","65535",1,"form-control"],["id","pool","name","pool","formControlName","pool",1,"form-select"],["for","trusted_ip_list",1,"cd-col-form-label"],["id","trusted_ip_list","type","text","formControlName","trusted_ip_list",1,"form-control"],["for","api_port",1,"cd-col-form-label"],["id","api_port","type","number","formControlName","api_port","min","1","max","65535",1,"form-control"],["for","api_user",1,"cd-col-form-label",3,"ngClass"],["id","api_user","type","text","formControlName","api_user",1,"form-control"],["for","api_password",1,"cd-col-form-label",3,"ngClass"],["id","api_password","type","password","autocomplete","new-password","formControlName","api_password",1,"form-control"],["type","button","cdPasswordButton","api_password",1,"btn","btn-light"],["source","api_password"],["for","cluster_id",1,"cd-col-form-label","required"],["id","cluster_id","type","text","formControlName","cluster_id","placeholder",ti,1,"form-control"],["for","config_uri",1,"cd-col-form-label","required"],["id","config_uri","type","text","formControlName","config_uri","placeholder",ni,1,"form-control"],["formGroupName","features",1,"form-group","row"],["for","features",1,"cd-col-form-label"],["class","custom-control custom-checkbox",4,"ngFor","ngForOf"],["for","custom_dns",1,"cd-col-form-label"],["id","custom_dns","type","text","formControlName","custom_dns","placeholder",oi,1,"form-control"],["for","join_sources",1,"cd-col-form-label"],["id","join_sources","type","text","formControlName","join_sources","placeholder",ca,1,"form-control"],["for","user_sources",1,"cd-col-form-label"],["id","user_sources","type","text","formControlName","user_sources","placeholder",da,1,"form-control"],["for","include_ceph_users",1,"cd-col-form-label"],["id","include_ceph_users","type","text","formControlName","include_ceph_users","placeholder",ua,1,"form-control"],["type","checkbox",1,"custom-control-input",3,"name","id","formControlName"],[1,"custom-control-label",3,"for"],["for","virtual_ip",1,"cd-col-form-label",3,"ngClass"],["id","virtual_ip","type","text","formControlName","virtual_ip",1,"form-control"],["for","frontend_port",1,"cd-col-form-label",3,"ngClass"],["id","frontend_port","type","number","formControlName","frontend_port","min","1","max","65535",1,"form-control"],["for","monitor_port",1,"cd-col-form-label",3,"ngClass"],["id","monitor_port","type","number","formControlName","monitor_port","min","1","max","65535",1,"form-control"],["for","virtual_interface_networks",1,"cd-col-form-label"],["id","virtual_interface_networks","type","text","formControlName","virtual_interface_networks",1,"form-control"],["for","snmp_version",1,"cd-col-form-label","required"],["id","snmp_version","name","snmp_version","formControlName","snmp_version",1,"form-select",3,"change"],["for","snmp_destination",1,"cd-col-form-label","required"],["id","snmp_destination","type","text","formControlName","snmp_destination",1,"form-control"],["for","engine_id",1,"cd-col-form-label","required"],["id","engine_id","type","text","formControlName","engine_id",1,"form-control"],["for","auth_protocol",1,"cd-col-form-label","required"],["id","auth_protocol","name","auth_protocol","formControlName","auth_protocol",1,"form-select"],["for","privacy_protocol",1,"cd-col-form-label"],["id","privacy_protocol","name","privacy_protocol","formControlName","privacy_protocol",1,"form-select"],["for","snmp_community",1,"cd-col-form-label","required"],["id","snmp_community","type","text","formControlName","snmp_community",1,"form-control"],["for","snmp_v3_auth_username",1,"cd-col-form-label","required"],["id","snmp_v3_auth_username","type","text","formControlName","snmp_v3_auth_username",1,"form-control"],["for","snmp_v3_auth_password",1,"cd-col-form-label","required"],["id","snmp_v3_auth_password","type","password","formControlName","snmp_v3_auth_password",1,"form-control"],["for","snmp_v3_priv_password",1,"cd-col-form-label","required"],["id","snmp_v3_priv_password","type","password","formControlName","snmp_v3_priv_password",1,"form-control"],["for","provider_display_name",1,"cd-col-form-label","required"],["id","provider_display_name","type","text","formControlName","provider_display_name","placeholder",fc,1,"form-control"],["for","client_id",1,"cd-col-form-label","required"],["id","client_id","type","text","formControlName","client_id","placeholder","oauth2-client",1,"form-control"],["for","client_secret",1,"cd-col-form-label","required"],["id","client_secret","type","password","formControlName","client_secret",1,"form-control"],[1,"input-group-append"],["type","button","cdPasswordButton","client_secret",1,"btn","btn-light"],["source","client_secret"],["for","oidc_issuer_url",1,"cd-col-form-label","required"],["id","oidc_issuer_url","type","text","formControlName","oidc_issuer_url","placeholder","https://<IdPs-domain>/realms/<realm-name>",1,"form-control"],["for","https_address",1,"cd-col-form-label"],["id","https_address","type","text","formControlName","https_address","placeholder","0.0.0.0:4180",1,"form-control"],["for","redirect_url",1,"cd-col-form-label"],["id","redirect_url","type","text","formControlName","redirect_url","placeholder","https://<IP|Hostname>:4180/oauth2/callback",1,"form-control"],["for","allowlist_domains",1,"cd-col-form-label"],["id","allowlist_domains","type","text","formControlName","allowlist_domains","placeholder","domain1.com,192.168.100.1:8080",1,"form-control"],["for","port",1,"cd-col-form-label"],["id","port","type","number","formControlName","port","min","1","max","65535",1,"form-control"],[1,"form-item"],["for","pools",1,"cds--label"],["id","enable_auth","name","enable_auth","formControlName","enable_auth"],["type","multi","label","SSL protocols","selectionFeedback","top-after-reopen","for","ssl_protocols","name","ssl_protocols","formControlName","ssl_protocols","id","ssl_protocols","placeholder",xc,3,"appendInline","items"],["for","ssl_ciphers",1,"cd-col-form-label"],["id","ssl_ciphers","type","text","formControlName","ssl_ciphers","placeholder","ECDHE-ECDSA-AES128-GCM-SHA256:ECDHE-RSA-AES128-GCM-SHA256",1,"form-control"],["href","https://ssl-config.mozilla.org/#server=nginx","target","_blank"],["id","ssl","type","checkbox","formControlName","ssl",1,"custom-control-input"],["for","ssl",1,"custom-control-label"],["for","ssl_cert",1,"cd-col-form-label"],["id","ssl_cert","formControlName","ssl_cert","rows","5",1,"form-control","resize-vertical","text-monospace","text-pre"],["type","file",3,"change"],["for","ssl_key",1,"cd-col-form-label"],["id","ssl_key","formControlName","ssl_key","rows","5",1,"form-control","resize-vertical","text-monospace","text-pre"],["for","grafana_port",1,"cd-col-form-label"],["id","grafana_port","type","number","formControlName","grafana_port","min","1","max","65535",1,"form-control"],["for","grafana_admin_password",1,"cd-col-form-label"],["id","grafana_admin_password","type","password","autocomplete","new-password","formControlName","grafana_admin_password",1,"form-control"],["type","button","cdPasswordButton","grafana_admin_password",1,"btn","btn-light"],["source","grafana_admin_password"],["id","enable_mtls","type","checkbox","formControlName","enable_mtls",1,"custom-control-input"],["for","enable_mtls",1,"custom-control-label"],["for","root_ca_cert",1,"cd-col-form-label","required"],["id","root_ca_cert","formControlName","root_ca_cert","rows","5",1,"form-control","resize-vertical","text-monospace","text-pre"],["for","client_cert",1,"cd-col-form-label","required"],["id","client_cert","formControlName","client_cert","rows","5",1,"form-control","resize-vertical","text-monospace","text-pre"],["for","client_key",1,"cd-col-form-label","required"],["id","client_key","formControlName","client_key","rows","5",1,"form-control","resize-vertical","text-monospace","text-pre"],["for","server_cert",1,"cd-col-form-label","required"],["id","server_cert","formControlName","server_cert","rows","5",1,"form-control","resize-vertical","text-monospace","text-pre"],["for","server_key",1,"cd-col-form-label","required"],["id","server_key","formControlName","server_key","rows","5",1,"form-control","resize-vertical","text-monospace","text-pre"]]},template:function(t,o){if(1&t){const s=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"cd-modal",181)(1,"span",182),e.\u0275\u0275i18n(2,1),e.\u0275\u0275pipe(3,"titlecase"),e.\u0275\u0275pipe(4,"upperFirst"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementContainerStart(5,183),e.\u0275\u0275elementStart(6,"form",184,0)(8,"div",185),e.\u0275\u0275template(9,Pp,3,0,"cd-alert-panel",186)(10,bp,2,0,"cd-alert-panel",186)(11,Np,2,4,"cd-alert-panel",186)(12,Ip,3,0,"cd-alert-panel",187),e.\u0275\u0275elementStart(13,"div",188)(14,"label",189),e.\u0275\u0275i18n(15,2),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(16,"div",190)(17,"select",191),e.\u0275\u0275listener("change",function(h){return e.\u0275\u0275restoreView(s),e.\u0275\u0275resetView(o.onServiceTypeChange(h.target.value))}),e.\u0275\u0275elementStart(18,"option",192),e.\u0275\u0275i18n(19,3),e.\u0275\u0275elementEnd(),e.\u0275\u0275template(20,Ap,2,2,"option",193),e.\u0275\u0275elementEnd(),e.\u0275\u0275template(21,Dp,2,0,"span",194),e.\u0275\u0275elementEnd()(),e.\u0275\u0275template(22,wp,10,9,"div",195)(23,Xp,12,5,"div",195)(24,jp,10,1,"div",195)(25,Jp,11,9,"div",195)(26,em,7,3,"div",195)(27,nm,6,2,"div",195)(28,im,6,2,"div",195),e.\u0275\u0275elementStart(29,"div",188)(30,"div",196)(31,"div",197),e.\u0275\u0275element(32,"input",198),e.\u0275\u0275elementStart(33,"label",199),e.\u0275\u0275i18n(34,4),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(35,"cd-help-text"),e.\u0275\u0275i18n(36,5),e.\u0275\u0275elementEnd()()()(),e.\u0275\u0275template(37,am,9,0,"div",195)(38,rm,6,2,"div",195)(39,lm,5,3,"div",195)(40,dm,10,2,"div",195)(41,fm,9,3,"ng-container",200)(42,Tm,10,5,"div",195)(43,Pm,37,13,"ng-container",200)(44,Dm,70,4,"ng-container",200)(45,zm,38,22,"ng-container",200)(46,c1,31,13,"ng-container",200)(47,g1,67,6,"ng-container",200)(48,F1,32,6,"ng-container",200)(49,I1,4,7,"ng-container",200)(50,$1,25,5,"ng-container",200)(51,x1,2,0,"cd-alert-panel",187)(52,U1,8,0,"div",195)(53,G1,8,1,"div",195)(54,V1,8,1,"div",195)(55,z1,8,1,"div",195)(56,k1,8,1,"div",195)(57,W1,8,1,"div",195),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(58,"div",201)(59,"div",202)(60,"cd-form-button-panel",203),e.\u0275\u0275pipe(61,"titlecase"),e.\u0275\u0275pipe(62,"upperFirst"),e.\u0275\u0275listener("submitActionEvent",function(){return e.\u0275\u0275restoreView(s),e.\u0275\u0275resetView(o.onSubmit())}),e.\u0275\u0275elementEnd()()()(),e.\u0275\u0275elementContainerEnd(),e.\u0275\u0275elementEnd()}if(2&t){const s=e.\u0275\u0275reference(7);e.\u0275\u0275property("pageURL",o.pageURL)("modalRef",o.activeModal),e.\u0275\u0275advance(4),e.\u0275\u0275i18nExp(e.\u0275\u0275pipeBind1(3,42,o.action))(e.\u0275\u0275pipeBind1(4,44,o.resource)),e.\u0275\u0275i18nApply(2),e.\u0275\u0275advance(2),e.\u0275\u0275property("formGroup",o.serviceForm),e.\u0275\u0275advance(3),e.\u0275\u0275property("ngIf","rgw"===o.serviceForm.controls.service_type.value&&o.showRealmCreationForm),e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf","oauth2-proxy"===o.serviceForm.controls.service_type.value),e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf","mgmt-gateway"===o.serviceForm.controls.service_type.value),e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf","smb"===o.serviceForm.controls.service_type.value),e.\u0275\u0275advance(6),e.\u0275\u0275property("ngValue",null),e.\u0275\u0275advance(2),e.\u0275\u0275property("ngForOf",o.serviceTypes),e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf",o.serviceForm.showError("service_type",s,"required")),e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf","ingress"===o.serviceForm.controls.service_type.value),e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf","nvmeof"===o.serviceForm.controls.service_type.value),e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf","nvmeof"===o.serviceForm.controls.service_type.value),e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf","snmp-gateway"!==o.serviceForm.controls.service_type.value),e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf","rgw"===o.serviceForm.controls.service_type.value),e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf","rgw"===o.serviceForm.controls.service_type.value),e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf","rgw"===o.serviceForm.controls.service_type.value),e.\u0275\u0275advance(9),e.\u0275\u0275property("ngIf",!o.serviceForm.controls.unmanaged.value),e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf",!o.serviceForm.controls.unmanaged.value&&"label"===o.serviceForm.controls.placement.value),e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf",!o.serviceForm.controls.unmanaged.value&&"hosts"===o.serviceForm.controls.placement.value),e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf",!o.serviceForm.controls.unmanaged.value&&"nvmeof"!==o.serviceForm.controls.service_type.value),e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf",!o.serviceForm.controls.unmanaged.value&&"rgw"===o.serviceForm.controls.service_type.value),e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf","iscsi"===o.serviceForm.controls.service_type.value),e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf",!o.serviceForm.controls.unmanaged.value&&"iscsi"===o.serviceForm.controls.service_type.value),e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf","smb"===o.serviceForm.controls.service_type.value),e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf","ingress"===o.serviceForm.controls.service_type.value),e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf","snmp-gateway"===o.serviceForm.controls.service_type.value),e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf","oauth2-proxy"===o.serviceForm.controls.service_type.value),e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf",!o.serviceForm.controls.unmanaged.value&&e.\u0275\u0275pureFunction0(50,is).includes(o.serviceForm.controls.service_type.value)),e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf",!o.serviceForm.controls.unmanaged.value&&e.\u0275\u0275pureFunction0(51,Fp).includes(o.serviceForm.controls.service_type.value)),e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf","grafana"===o.serviceForm.controls.service_type.value),e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf","mgmt-gateway"===o.serviceForm.controls.service_type.value&&o.showMgmtGatewayMessage),e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf","nvmeof"===o.serviceForm.controls.service_type.value),e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf",o.serviceForm.controls.enable_mtls.value),e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf",o.serviceForm.controls.enable_mtls.value),e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf",o.serviceForm.controls.enable_mtls.value),e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf",o.serviceForm.controls.enable_mtls.value),e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf",o.serviceForm.controls.enable_mtls.value),e.\u0275\u0275advance(3),e.\u0275\u0275property("form",o.serviceForm)("submitText",e.\u0275\u0275pipeBind1(61,46,o.action)+" "+e.\u0275\u0275pipeBind1(62,48,o.resource))}},dependencies:[l.NgClass,l.NgForOf,l.NgIf,y.m,Tp.U,Ut.z,nt.m,fe.N,oe.e,it.O,ri.h,Ge.S,we.a,Ve.C,ze.E,u.RouterLink,C.\u0275NgNoValidate,C.NgSelectOption,C.\u0275NgSelectMultipleOption,C.DefaultValueAccessor,C.NumberValueAccessor,C.CheckboxControlValueAccessor,C.SelectControlValueAccessor,C.NgControlStatus,C.NgControlStatusGroup,C.MinValidator,C.MaxValidator,C.FormGroupDirective,C.FormControlName,C.FormGroupName,G.NgbTypeahead,D.ComboBox,D.DropdownList,D.Checkbox,l.TitleCasePipe,Pe.r]})}}var Io=r(11549),Ao=r(87837);function K1(i,n){1&i&&(e.\u0275\u0275elementStart(0,"cd-alert-panel",4),e.\u0275\u0275i18n(1,1),e.\u0275\u0275elementEnd())}function Q1(i,n){1&i&&(e.\u0275\u0275elementStart(0,"cd-alert-panel",4),e.\u0275\u0275i18nStart(1,2),e.\u0275\u0275element(2,"cd-doc",5),e.\u0275\u0275i18nEnd(),e.\u0275\u0275elementEnd())}class co{static{this.\u0275fac=function(t){return new(t||co)}}static{this.\u0275cmp=e.\u0275\u0275defineComponent({type:co,selectors:[["cd-orchestrator-doc-panel"]],inputs:{missingFeatures:"missingFeatures"},decls:3,vars:2,consts:()=>{let n,t;return n=$localize`:␟b20e42ac4354d449f2718428b5390933eef0c1b9␟6510790372326434578:The feature is not supported in the current Orchestrator.`,t=$localize`:␟6b7e6de186b1b1e666f4199babcd6a3d1d5806bd␟686825529221823082:Orchestrator is not available. Please consult the ${"\ufffd#2\ufffd"}:START_TAG_CD_DOC:${"\ufffd/#2\ufffd"}:CLOSE_TAG_CD_DOC: on how to configure and enable the functionality.`,[["elseBlock",""],n,t,["type","info",4,"ngIf","ngIfElse"],["type","info"],["section","orch"]]},template:function(t,o){if(1&t&&e.\u0275\u0275template(0,K1,2,0,"cd-alert-panel",3)(1,Q1,3,0,"ng-template",null,0,e.\u0275\u0275templateRefExtractor),2&t){const s=e.\u0275\u0275reference(2);e.\u0275\u0275property("ngIf",o.missingFeatures)("ngIfElse",s)}},dependencies:[l.NgIf,nt.m,Ao.C]})}}let ss=class Zr{constructor(n){this.http=n,this.url="api/daemon"}action(n,t){return this.http.put(`${this.url}/${n}`,{action:t,container_image:null},{headers:{Accept:"application/vnd.ceph.api.v0.1+json"},observe:"response"})}list(n){return this.http.get(this.url,{params:{daemon_types:n}})}static{this.\u0275fac=function(t){return new(t||Zr)(e.\u0275\u0275inject(T.HttpClient))}}static{this.\u0275prov=e.\u0275\u0275defineInjectable({token:Zr,factory:Zr.\u0275fac,providedIn:"root"})}};ss=(0,S.__decorate)([_.G,(0,S.__metadata)("design:paramtypes",[T.HttpClient])],ss);var Ul=r(45757);const Y1=["statusTpl"],J1=["listTpl"],Z1=["cpuTpl"],q1=["daemonsTable"];function ef(i,n){1&i&&e.\u0275\u0275element(0,"cd-orchestrator-doc-panel")}function tf(i,n){1&i&&e.\u0275\u0275elementContainer(0)}function nf(i,n){if(1&i&&(e.\u0275\u0275elementStart(0,"div"),e.\u0275\u0275template(1,tf,1,0,"ng-container",13),e.\u0275\u0275elementEnd()),2&i){e.\u0275\u0275nextContext();const t=e.\u0275\u0275reference(9);e.\u0275\u0275advance(),e.\u0275\u0275property("ngTemplateOutlet",t)}}function of(i,n){1&i&&e.\u0275\u0275elementContainer(0)}function af(i,n){if(1&i&&e.\u0275\u0275template(0,of,1,0,"ng-container",13),2&i){e.\u0275\u0275nextContext(2);const t=e.\u0275\u0275reference(9);e.\u0275\u0275property("ngTemplateOutlet",t)}}function sf(i,n){if(1&i){const t=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"cd-table",21,6),e.\u0275\u0275listener("fetchData",function(s){e.\u0275\u0275restoreView(t);const d=e.\u0275\u0275nextContext(3);return e.\u0275\u0275resetView(d.getServices(s))}),e.\u0275\u0275elementEnd()}if(2&i){const t=e.\u0275\u0275nextContext(3);e.\u0275\u0275property("data",t.services)("columns",t.serviceColumns)}}function rf(i,n){if(1&i&&e.\u0275\u0275template(0,sf,2,2,"cd-table",20),2&i){const t=e.\u0275\u0275nextContext(2);e.\u0275\u0275property("ngIf",t.hasOrchestrator)}}function lf(i,n){if(1&i&&(e.\u0275\u0275elementContainerStart(0),e.\u0275\u0275elementStart(1,"nav",14,5),e.\u0275\u0275elementContainerStart(3,15),e.\u0275\u0275elementStart(4,"a",16),e.\u0275\u0275i18n(5,9),e.\u0275\u0275elementEnd(),e.\u0275\u0275template(6,af,1,1,"ng-template",17),e.\u0275\u0275elementContainerEnd(),e.\u0275\u0275elementContainerStart(7,18),e.\u0275\u0275elementStart(8,"a",16),e.\u0275\u0275i18n(9,10),e.\u0275\u0275elementEnd(),e.\u0275\u0275template(10,rf,1,1,"ng-template",17),e.\u0275\u0275elementContainerEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275element(11,"div",19),e.\u0275\u0275elementContainerEnd()),2&i){const t=e.\u0275\u0275reference(2);e.\u0275\u0275advance(11),e.\u0275\u0275property("ngbNavOutlet",t)}}function _f(i,n){if(1&i&&(e.\u0275\u0275elementStart(0,"span",22),e.\u0275\u0275pipe(1,"pipeFunction"),e.\u0275\u0275text(2),e.\u0275\u0275elementEnd()),2&i){const t=n.data.row,o=e.\u0275\u0275nextContext();e.\u0275\u0275property("ngClass",e.\u0275\u0275pipeBind2(1,2,t,o.getStatusClass)),e.\u0275\u0275advance(2),e.\u0275\u0275textInterpolate1(" ",t.status_desc," ")}}function cf(i,n){if(1&i&&(e.\u0275\u0275elementStart(0,"span"),e.\u0275\u0275namespaceSVG(),e.\u0275\u0275element(1,"svg",28),e.\u0275\u0275elementEnd()),2&i){const t=e.\u0275\u0275nextContext(4);e.\u0275\u0275advance(),e.\u0275\u0275property("cdsIcon",t.icons.infoCircle)("size",t.icons.size16)}}function df(i,n){if(1&i&&(e.\u0275\u0275elementStart(0,"span"),e.\u0275\u0275namespaceSVG(),e.\u0275\u0275element(1,"svg",29),e.\u0275\u0275elementEnd()),2&i){const t=e.\u0275\u0275nextContext(4);e.\u0275\u0275advance(),e.\u0275\u0275property("cdsIcon",t.icons.warning)("size",t.icons.size16)}}function uf(i,n){if(1&i&&(e.\u0275\u0275elementStart(0,"li",26)(1,"b"),e.\u0275\u0275text(2),e.\u0275\u0275pipe(3,"relativeDate"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(4,"span",27),e.\u0275\u0275text(5),e.\u0275\u0275elementEnd(),e.\u0275\u0275element(6,"br"),e.\u0275\u0275template(7,cf,2,2,"span",11)(8,df,2,2,"span",11),e.\u0275\u0275text(9),e.\u0275\u0275elementEnd()),2&i){const t=n.$implicit;e.\u0275\u0275advance(2),e.\u0275\u0275textInterpolate1("",e.\u0275\u0275pipeBind1(3,5,t.created)," - "),e.\u0275\u0275advance(3),e.\u0275\u0275textInterpolate(t.subject),e.\u0275\u0275advance(2),e.\u0275\u0275property("ngIf","INFO"===t.level),e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf","ERROR"===t.level),e.\u0275\u0275advance(),e.\u0275\u0275textInterpolate1(" ",t.message," ")}}function pf(i,n){if(1&i&&(e.\u0275\u0275elementStart(0,"ul",24),e.\u0275\u0275template(1,uf,10,7,"li",25),e.\u0275\u0275elementEnd()),2&i){const t=e.\u0275\u0275nextContext().data.value,o=e.\u0275\u0275nextContext();e.\u0275\u0275advance(),e.\u0275\u0275property("ngForOf",t)("ngForTrackBy",o.trackByFn)}}function mf(i,n){1&i&&(e.\u0275\u0275elementStart(0,"div",26)(1,"span"),e.\u0275\u0275text(2,"No data available"),e.\u0275\u0275elementEnd()())}function ff(i,n){if(1&i&&e.\u0275\u0275template(0,pf,2,2,"ul",23)(1,mf,3,0,"ng-template",null,7,e.\u0275\u0275templateRefExtractor),2&i){const t=n.data.value,o=e.\u0275\u0275reference(2);e.\u0275\u0275property("ngIf",null==t?null:t.length)("ngIfElse",o)}}function Ef(i,n){if(1&i){const t=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"cd-table",31,8),e.\u0275\u0275listener("fetchData",function(s){e.\u0275\u0275restoreView(t);const d=e.\u0275\u0275nextContext(2);return e.\u0275\u0275resetView(d.getDaemons(s))})("updateSelection",function(s){e.\u0275\u0275restoreView(t);const d=e.\u0275\u0275nextContext(2);return e.\u0275\u0275resetView(d.updateSelection(s))}),e.\u0275\u0275element(2,"cd-table-actions",32),e.\u0275\u0275elementEnd()}if(2&i){const t=e.\u0275\u0275nextContext(2);e.\u0275\u0275property("data",t.daemons)("columns",t.columns),e.\u0275\u0275advance(2),e.\u0275\u0275property("selection",t.selection)("permission",t.permissions.hosts)("tableActions",t.tableActions)}}function gf(i,n){if(1&i&&e.\u0275\u0275template(0,Ef,3,5,"cd-table",30),2&i){const t=e.\u0275\u0275nextContext();e.\u0275\u0275property("ngIf",t.hasOrchestrator)}}function Cf(i,n){if(1&i&&e.\u0275\u0275element(0,"cd-usage-bar",33),2&i){const t=n.data.row,o=e.\u0275\u0275nextContext();e.\u0275\u0275property("total",o.total)("calculatePerc",!1)("used",t.cpu_percentage)("isBinary",!1)}}class li{constructor(n,t,o,s,d,h,I,$,w,X){this.hostService=n,this.cephServiceService=t,this.orchService=o,this.relativeDatePipe=s,this.dimlessBinary=d,this.actionLabels=h,this.authStorageService=I,this.daemonService=$,this.notificationService=w,this.cdRef=X,this.hiddenColumns=[],this.total=100,this.warningThreshold=.8,this.errorThreshold=.9,this.icons=g.FI,this.daemons=[],this.services=[],this.columns=[],this.serviceColumns=[],this.selection=new N.y,this.hasOrchestrator=!1,this.showDocPanel=!1}ngOnInit(){this.permissions=this.authStorageService.getPermissions(),this.tableActions=[{permission:"update",icon:g.FI.start,click:()=>this.daemonAction("start"),name:this.actionLabels.START,disable:()=>this.actionDisabled("start")},{permission:"update",icon:g.FI.stop,click:()=>this.daemonAction("stop"),name:this.actionLabels.STOP,disable:()=>this.actionDisabled("stop")},{permission:"update",icon:g.FI.restart,click:()=>this.daemonAction("restart"),name:this.actionLabels.RESTART,disable:()=>this.actionDisabled("restart")},{permission:"update",icon:g.FI.deploy,click:()=>this.daemonAction("redeploy"),name:this.actionLabels.REDEPLOY,disable:()=>this.actionDisabled("redeploy")}],this.columns=[{name:$localize`Hostname`,prop:"hostname",flexGrow:2,filterable:!0},{name:$localize`Daemon name`,prop:"daemon_name",flexGrow:1,filterable:!0},{name:$localize`Version`,prop:"version",flexGrow:1,filterable:!0},{name:$localize`Status`,prop:"status_desc",flexGrow:1,filterable:!0,cellTemplate:this.statusTpl},{name:$localize`Last Refreshed`,prop:"last_refresh",pipe:this.relativeDatePipe,flexGrow:1},{name:$localize`CPU Usage`,prop:"cpu_percentage",flexGrow:1,cellTemplate:this.cpuTpl},{name:$localize`Memory Usage`,prop:"memory_usage",flexGrow:1,pipe:this.dimlessBinary,cellClass:"text-right"},{name:$localize`Daemon Events`,prop:"events",flexGrow:2,cellTemplate:this.listTpl}],this.serviceColumns=[{name:$localize`Service Events`,prop:"events",flexGrow:5,cellTemplate:this.listTpl}],this.orchService.status().subscribe(n=>{this.hasOrchestrator=n.available,this.showDocPanel=!n.available}),this.columns=this.columns.filter(n=>!this.hiddenColumns.includes(n.prop)),setTimeout(()=>{this.cdRef.detectChanges()},1e3)}ngOnChanges(){p().isUndefined(this.daemonsTable)||this.daemonsTable.reloadData()}ngAfterViewInit(){this.daemonsTableTplsSub=this.daemonsTableTpls.changes.subscribe(n=>{this.daemonsTable=n.first})}ngOnDestroy(){this.daemonsTableTplsSub&&this.daemonsTableTplsSub.unsubscribe(),this.serviceSub&&this.serviceSub.unsubscribe()}getStatusClass(n){return p().get({"-1":"badge-danger",0:"badge-warning",1:"badge-success"},n.status,"badge-dark")}getDaemons(n){let t;if(this.hostname)t=this.hostService.getDaemons(this.hostname);else{if(!this.serviceName)return void(this.daemons=[]);t=this.cephServiceService.getDaemons(this.serviceName)}t.subscribe(o=>{this.daemons=o,this.sortDaemonEvents()},()=>{this.daemons=[],n.error()})}sortDaemonEvents(){this.daemons.forEach(n=>{n.events?.sort((t,o)=>new Date(o.created).getTime()-new Date(t.created).getTime())})}getServices(n){this.serviceSub=this.cephServiceService.list(new T.HttpParams({fromObject:{limit:-1,offset:0}}),this.serviceName).observable.subscribe(t=>{this.services=t},()=>{this.services=[],n.error()})}trackByFn(n,t){return t.created}updateSelection(n){this.selection=n}daemonAction(n){this.daemonService.action(this.selection.first()?.daemon_name,n).pipe((0,v.take)(1)).subscribe({next:t=>{this.notificationService.show(Ae._.success,`Daemon ${n} scheduled`,t.body.toString())},error:t=>{this.notificationService.show(Ae._.error,"Daemon action failed",t.body.toString())}})}actionDisabled(n){if(this.selection?.hasSelection){const t=this.selection.selected[0];if("mon"===t.daemon_type||"mgr"===t.daemon_type)return!0;switch(n){case"start":if("running"===t.status_desc)return!0;break;case"stop":if("stopped"===t.status_desc)return!0}return!1}return!0}static{this.\u0275fac=function(t){return new(t||li)(e.\u0275\u0275directiveInject(Ht.I),e.\u0275\u0275directiveInject(si.t),e.\u0275\u0275directiveInject(tn.K),e.\u0275\u0275directiveInject(No.D),e.\u0275\u0275directiveInject(pt.l),e.\u0275\u0275directiveInject(m.Ss),e.\u0275\u0275directiveInject(c.v),e.\u0275\u0275directiveInject(ss),e.\u0275\u0275directiveInject(Q.J),e.\u0275\u0275directiveInject(e.ChangeDetectorRef))}}static{this.\u0275cmp=e.\u0275\u0275defineComponent({type:li,selectors:[["cd-service-daemon-list"]],viewQuery:function(t,o){if(1&t&&(e.\u0275\u0275viewQuery(Y1,7),e.\u0275\u0275viewQuery(J1,7),e.\u0275\u0275viewQuery(Z1,7),e.\u0275\u0275viewQuery(q1,5)),2&t){let s;e.\u0275\u0275queryRefresh(s=e.\u0275\u0275loadQuery())&&(o.statusTpl=s.first),e.\u0275\u0275queryRefresh(s=e.\u0275\u0275loadQuery())&&(o.listTpl=s.first),e.\u0275\u0275queryRefresh(s=e.\u0275\u0275loadQuery())&&(o.cpuTpl=s.first),e.\u0275\u0275queryRefresh(s=e.\u0275\u0275loadQuery())&&(o.daemonsTableTpls=s)}},inputs:{serviceName:"serviceName",hostname:"hostname",hiddenColumns:"hiddenColumns",flag:"flag"},features:[e.\u0275\u0275NgOnChangesFeature],decls:12,vars:3,consts:()=>{let n,t;return n=$localize`:␟9e24f9e2d42104ffc01599db4d566d1cc518f9e6␟1419569261746199221:Daemons`,t=$localize`:␟0cb3aa7e9fea1d445a1a9d7797ab17e6ac6fe13b␟3907644935670421963:Service Events`,[["serviceDetailsTpl",""],["statusTpl",""],["listTpl",""],["serviceDaemonDetailsTpl",""],["cpuTpl",""],["nav","ngbNav"],["serviceTable",""],["noEventsAvailable",""],["daemonsTable",""],n,t,[4,"ngIf"],[4,"ngIf","ngIfElse"],[4,"ngTemplateOutlet"],["ngbNav","","cdStatefulTab","service-details",1,"nav-tabs"],["ngbNavItem","details"],["ngbNavLink",""],["ngbNavContent",""],["ngbNavItem","service_events"],[3,"ngbNavOutlet"],["columnMode","flex",3,"data","columns","fetchData",4,"ngIf"],["columnMode","flex",3,"fetchData","data","columns"],[1,"badge",3,"ngClass"],["class","list-group list-group-flush",4,"ngIf","ngIfElse"],[1,"list-group","list-group-flush"],["class","list-group-item",4,"ngFor","ngForOf","ngForTrackBy"],[1,"list-group-item"],[1,"badge","badge-info"],[1,"cds-info-color",3,"cdsIcon","size"],[1,"cds-warning-color",3,"cdsIcon","size"],["selectionType","single","columnMode","flex","identifier","daemon_name",3,"data","columns","fetchData","updateSelection",4,"ngIf"],["selectionType","single","columnMode","flex","identifier","daemon_name",3,"fetchData","updateSelection","data","columns"],["id","service-daemon-list-actions",1,"table-actions",3,"selection","permission","tableActions"],[3,"total","calculatePerc","used","isBinary"]]},template:function(t,o){if(1&t&&e.\u0275\u0275template(0,ef,1,0,"cd-orchestrator-doc-panel",11)(1,nf,2,1,"div",12)(2,lf,12,1,"ng-template",null,0,e.\u0275\u0275templateRefExtractor)(4,_f,3,5,"ng-template",null,1,e.\u0275\u0275templateRefExtractor)(6,ff,3,2,"ng-template",null,2,e.\u0275\u0275templateRefExtractor)(8,gf,1,1,"ng-template",null,3,e.\u0275\u0275templateRefExtractor)(10,Cf,1,4,"ng-template",null,4,e.\u0275\u0275templateRefExtractor),2&t){const s=e.\u0275\u0275reference(3);e.\u0275\u0275property("ngIf",o.showDocPanel),e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf","hostDetails"===o.flag)("ngIfElse",s)}},dependencies:[l.NgClass,l.NgForOf,l.NgIf,l.NgTemplateOutlet,G.NgbNavContent,G.NgbNav,G.NgbNavItem,G.NgbNavLink,G.NgbNavLinkBase,G.NgbNavOutlet,xt.o,co,We.O,at.j,$t.B,D.IconDirective,No.D,Ul.N],styles:[".fa-info-circle[_ngcontent-%COMP%]{color:#25828e}.fa-exclamation-triangle[_ngcontent-%COMP%]{color:#dc3545}.list-group-item[_ngcontent-%COMP%]{background-color:transparent;border-width:0}"]})}}function Sf(i,n){if(1&i&&(e.\u0275\u0275elementContainerStart(0),e.\u0275\u0275element(1,"cd-service-daemon-list",1),e.\u0275\u0275elementContainerEnd()),2&i){const t=e.\u0275\u0275nextContext();e.\u0275\u0275advance(),e.\u0275\u0275property("serviceName",t.selection.service_name)}}class rs{static{this.\u0275fac=function(t){return new(t||rs)}}static{this.\u0275cmp=e.\u0275\u0275defineComponent({type:rs,selectors:[["cd-service-details"]],inputs:{permissions:"permissions",selection:"selection"},decls:1,vars:1,consts:[[4,"ngIf"],[3,"serviceName"]],template:function(t,o){1&t&&e.\u0275\u0275template(0,Sf,2,1,"ng-container",0),2&t&&e.\u0275\u0275property("ngIf",o.selection)},dependencies:[l.NgIf,li]})}}const hf=["runningTpl"],Tf=["urlTpl"];function Ff(i,n){1&i&&e.\u0275\u0275element(0,"cd-orchestrator-doc-panel")}function vf(i,n){if(1&i&&e.\u0275\u0275element(0,"cd-service-details",9),2&i){const t=e.\u0275\u0275nextContext(2);e.\u0275\u0275property("permissions",t.permissions)("selection",t.expandedRow)}}function Mf(i,n){if(1&i){const t=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementContainerStart(0),e.\u0275\u0275elementStart(1,"cd-table",6),e.\u0275\u0275listener("fetchData",function(s){e.\u0275\u0275restoreView(t);const d=e.\u0275\u0275nextContext();return e.\u0275\u0275resetView(d.getServices(s))})("setExpandedRow",function(s){e.\u0275\u0275restoreView(t);const d=e.\u0275\u0275nextContext();return e.\u0275\u0275resetView(d.setExpandedRow(s))})("updateSelection",function(s){e.\u0275\u0275restoreView(t);const d=e.\u0275\u0275nextContext();return e.\u0275\u0275resetView(d.updateSelection(s))}),e.\u0275\u0275element(2,"cd-table-actions",7),e.\u0275\u0275template(3,vf,1,2,"cd-service-details",8),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementContainerEnd()}if(2&i){const t=e.\u0275\u0275nextContext();e.\u0275\u0275advance(),e.\u0275\u0275property("data",t.services)("columns",t.columns)("autoReload",5e3)("hasDetails",t.hasDetails)("serverSide",!0)("count",t.count),e.\u0275\u0275advance(),e.\u0275\u0275property("permission",t.permissions.hosts)("selection",t.selection)("tableActions",t.tableActions)}}function Rf(i,n){if(1&i&&(e.\u0275\u0275namespaceSVG(),e.\u0275\u0275element(0,"svg",12)),2&i){const t=e.\u0275\u0275nextContext(2);e.\u0275\u0275property("cdsIcon",t.icons.warning)("size",t.icons.size16)}}function Of(i,n){if(1&i&&(e.\u0275\u0275elementStart(0,"span",10),e.\u0275\u0275text(1),e.\u0275\u0275elementEnd(),e.\u0275\u0275template(2,Rf,1,2,"svg",11)),2&i){const t=n.data.value;e.\u0275\u0275advance(),e.\u0275\u0275textInterpolate2(" ",t.running," / ",t.size," "),e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf",0==t.running||0==t.size)}}function Pf(i,n){if(1&i&&(e.\u0275\u0275elementStart(0,"a",15),e.\u0275\u0275text(1),e.\u0275\u0275namespaceSVG(),e.\u0275\u0275element(2,"svg",16),e.\u0275\u0275elementEnd()),2&i){const t=e.\u0275\u0275nextContext(2).data.row,o=e.\u0275\u0275nextContext();e.\u0275\u0275property("href",o.serviceUrls[t.service_type],e.\u0275\u0275sanitizeUrl),e.\u0275\u0275advance(),e.\u0275\u0275textInterpolate1(" ",t.service_name," "),e.\u0275\u0275advance(),e.\u0275\u0275property("cdsIcon",o.icons.launch)("size",o.icons.size16)}}function bf(i,n){if(1&i&&(e.\u0275\u0275elementStart(0,"a",15),e.\u0275\u0275text(1),e.\u0275\u0275namespaceSVG(),e.\u0275\u0275element(2,"svg",16),e.\u0275\u0275elementEnd()),2&i){const t=e.\u0275\u0275nextContext(2).data.row,o=e.\u0275\u0275nextContext();e.\u0275\u0275property("href",t.service_type,e.\u0275\u0275sanitizeUrl),e.\u0275\u0275advance(),e.\u0275\u0275textInterpolate1(" ",t.service_name," "),e.\u0275\u0275advance(),e.\u0275\u0275property("cdsIcon",o.icons.launch)("size",o.icons.size16)}}function Nf(i,n){if(1&i&&(e.\u0275\u0275elementContainerStart(0),e.\u0275\u0275template(1,Pf,3,4,"a",14)(2,bf,3,4,"ng-template",null,3,e.\u0275\u0275templateRefExtractor),e.\u0275\u0275elementContainerEnd()),2&i){const t=e.\u0275\u0275reference(3),o=e.\u0275\u0275nextContext(2);e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf",!o.isMgmtGateway)("ngIfElse",t)}}function If(i,n){if(1&i&&e.\u0275\u0275text(0),2&i){const t=e.\u0275\u0275nextContext().data.row;e.\u0275\u0275textInterpolate(t.service_name)}}function Af(i,n){if(1&i&&e.\u0275\u0275template(0,Nf,4,2,"ng-container",13)(1,If,1,1,"ng-template",null,2,e.\u0275\u0275templateRefExtractor),2&i){const t=n.data.row,o=e.\u0275\u0275reference(2),s=e.\u0275\u0275nextContext();e.\u0275\u0275property("ngIf",s.serviceUrls[t.service_type])("ngIfElse",o)}}const sl="services";class _i extends M.D{constructor(n,t,o,s,d,h,I,$,w,X){super(),this.actionLabels=n,this.authStorageService=t,this.modalService=o,this.orchService=s,this.cephServiceService=d,this.relativeDatePipe=h,this.taskWrapperService=I,this.router=$,this.settingsService=w,this.cdsModalService=X,this.hiddenColumns=[],this.hiddenServices=[],this.hasDetails=!0,this.routedModal=!0,this.showDocPanel=!1,this.count=0,this.actionOrchFeatures={create:[At.SERVICE_CREATE],update:[At.SERVICE_EDIT],delete:[At.SERVICE_DELETE]},this.columns=[],this.services=[],this.isLoadingServices=!1,this.selection=new N.y,this.icons=g.FI,this.serviceUrls={grafana:"",prometheus:"",alertmanager:""},this.isMgmtGateway=!1,this.permissions=this.authStorageService.getPermissions(),this.tableActions=[{permission:"create",icon:g.FI.add,click:()=>this.openModal(),name:this.actionLabels.CREATE,canBePrimary:J=>!J.hasSelection},{permission:"update",icon:g.FI.edit,click:()=>this.openModal(!0),name:this.actionLabels.EDIT,disable:J=>this.getDisable("update",J)},{permission:"delete",icon:g.FI.destroy,click:()=>this.deleteAction(),name:this.actionLabels.DELETE,disable:J=>this.getDisable("delete",J)}]}openModal(n=!1){if(this.routedModal)n?this.router.navigate([sl,{outlets:{modal:[m.Qp.EDIT,this.selection.first().service_type,this.selection.first().service_name]}}]):this.router.navigate([sl,{outlets:{modal:[m.Qp.CREATE]}}]);else{let t={};t=n?{serviceName:this.selection.first()?.service_name,serviceType:this.selection?.first()?.service_type,hiddenServices:this.hiddenServices,editing:n}:{hiddenServices:this.hiddenServices,editing:n},this.bsModalRef=this.modalService.show(_o,t,{size:"lg"})}}ngOnInit(){const n=[{name:$localize`Service`,prop:"service_name",flexGrow:1,cellTemplate:this.urlTpl},{name:$localize`Placement`,prop:"",pipe:new ns,flexGrow:2},{name:$localize`Running`,prop:"status",flexGrow:1,cellTemplate:this.runningTpl},{name:$localize`Last Refreshed`,prop:"status.last_refresh",pipe:this.relativeDatePipe,flexGrow:1},{name:$localize`Ports`,prop:"status.ports",flexGrow:1,cellTransformation:b.x.map,customTemplateConfig:{undefined:"-","":"-"}}];this.columns=n.filter(t=>!this.hiddenColumns.includes(t.prop)),this.orchService.status().subscribe(t=>{this.orchStatus=t,this.showDocPanel=!t.available}),this.isMgmtGateway||(this.configureServiceUrl("api/grafana/url","grafana"),this.configureServiceUrl("ui-api/prometheus/prometheus-api-host","prometheus"),this.configureServiceUrl("ui-api/prometheus/alertmanager-api-host","alertmanager"))}ngOnChanges(){this.orchStatus?.available&&(this.services=[],this.table.reloadData())}getDisable(n,t){return"delete"===n&&!t?.hasSingleSelection||"update"===n&&["osd","container"].indexOf(this.selection.first()?.service_type)>=0||this.orchService.getTableActionDisableDesc(this.orchStatus,this.actionOrchFeatures[n])}getServices(n){if(this.isLoadingServices)return;this.isLoadingServices=!0;const t=this.cephServiceService.list(n.toParams());t.observable.subscribe(o=>{this.services=o,this.count=t.count,this.services=this.services.filter(s=>("mgmt-gateway"===s.service_type&&s.status.running&&(this.isMgmtGateway=!0),!this.hiddenServices.includes(s.service_name))),this.isLoadingServices=!1},()=>{this.isLoadingServices=!1,this.services=[],n.error()}),this.isMgmtGateway&&!this.services.find(o=>"mgmt-gateway"!==o.service_type&&o.status.running>0)&&(this.isMgmtGateway=!1)}updateSelection(n){this.selection=n}deleteAction(){const n=this.selection.first();this.cdsModalService.show(O.D,{itemDescription:$localize`Service`,itemNames:[n.service_name],actionDescription:"delete",submitActionObservable:()=>this.taskWrapperService.wrapTaskAroundCall({task:new q.O(`service/${m.Qp.DELETE}`,{service_name:n.service_name}),call:this.cephServiceService.delete(n.service_name)}).pipe((0,v.delay)(5e3))})}configureServiceUrl(n,t){this.settingsService.ifSettingConfigured(n,o=>{this.serviceUrls[t]=o})}static{this.\u0275fac=function(t){return new(t||_i)(e.\u0275\u0275directiveInject(m.Ss),e.\u0275\u0275directiveInject(c.v),e.\u0275\u0275directiveInject(Yt.B),e.\u0275\u0275directiveInject(tn.K),e.\u0275\u0275directiveInject(si.t),e.\u0275\u0275directiveInject(No.D),e.\u0275\u0275directiveInject(B.a),e.\u0275\u0275directiveInject(u.Router),e.\u0275\u0275directiveInject(Io.h),e.\u0275\u0275directiveInject(He.V))}}static{this.\u0275cmp=e.\u0275\u0275defineComponent({type:_i,selectors:[["cd-services"]],viewQuery:function(t,o){if(1&t&&(e.\u0275\u0275viewQuery(We.O,7),e.\u0275\u0275viewQuery(hf,7),e.\u0275\u0275viewQuery(Tf,7)),2&t){let s;e.\u0275\u0275queryRefresh(s=e.\u0275\u0275loadQuery())&&(o.table=s.first),e.\u0275\u0275queryRefresh(s=e.\u0275\u0275loadQuery())&&(o.runningTpl=s.first),e.\u0275\u0275queryRefresh(s=e.\u0275\u0275loadQuery())&&(o.urlTpl=s.first)}},inputs:{hostname:"hostname",hiddenColumns:"hiddenColumns",hiddenServices:"hiddenServices",hasDetails:"hasDetails",routedModal:"routedModal"},features:[e.\u0275\u0275ProvidersFeature([{provide:z.E,useValue:new z.E(sl)}]),e.\u0275\u0275InheritDefinitionFeature,e.\u0275\u0275NgOnChangesFeature],decls:7,vars:2,consts:[["runningTpl",""],["urlTpl",""],["noUrl",""],["mgmtGateway",""],[4,"ngIf"],["name","modal"],["identifier","service_name","forceIdentifier","true","columnMode","flex","selectionType","single",3,"fetchData","setExpandedRow","updateSelection","data","columns","autoReload","hasDetails","serverSide","count"],[1,"table-actions",3,"permission","selection","tableActions"],[3,"permissions","selection",4,"cdTableDetail"],[3,"permissions","selection"],["ngbTooltip","Service instances running out of the total number of services requested."],["class","cds-warning-color",3,"cdsIcon","size",4,"ngIf"],[1,"cds-warning-color",3,"cdsIcon","size"],[4,"ngIf","ngIfElse"],["target","_blank",3,"href",4,"ngIf","ngIfElse"],["target","_blank",3,"href"],[1,"cds-info-color",3,"cdsIcon","size"]],template:function(t,o){1&t&&(e.\u0275\u0275template(0,Ff,1,0,"cd-orchestrator-doc-panel",4)(1,Mf,4,9,"ng-container",4),e.\u0275\u0275element(2,"router-outlet",5),e.\u0275\u0275template(3,Of,3,3,"ng-template",null,0,e.\u0275\u0275templateRefExtractor)(5,Af,3,2,"ng-template",null,1,e.\u0275\u0275templateRefExtractor)),2&t&&(e.\u0275\u0275property("ngIf",o.showDocPanel),e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf",null==o.orchStatus?null:o.orchStatus.available))},dependencies:[l.NgIf,co,We.O,at.j,Et.N,u.RouterOutlet,G.NgbTooltip,D.IconDirective,rs]})}}var rl;!function(i){i.COST_CAPACITY="cost_capacity",i.THROUGHPUT="throughput_optimized",i.IOPS="iops_optimized"}(rl||(rl={}));class ls{constructor(n,t,o,s,d){this.activeModal=n,this.actionLabels=t,this.formBuilder=o,this.osdService=s,this.taskWrapper=d,this.driveGroups=[],this.submitAction=new e.EventEmitter,this.action=t.CREATE,this.createForm()}createForm(){this.formGroup=this.formBuilder.group({})}onSubmit(){const n=p().join(p().map(this.driveGroups,"service_id"),", ");this.taskWrapper.wrapTaskAroundCall({task:new q.O("osd/"+m.Qp.CREATE,{tracking_id:n}),call:this.osdService.create(this.driveGroups,n)}).subscribe({error:()=>{this.formGroup.setErrors({cdSubmitButton:!0})},complete:()=>{this.submitAction.emit(),this.activeModal.close()}})}static{this.\u0275fac=function(t){return new(t||ls)(e.\u0275\u0275directiveInject(G.NgbActiveModal),e.\u0275\u0275directiveInject(m.Ss),e.\u0275\u0275directiveInject(Dt.$),e.\u0275\u0275directiveInject(Ct),e.\u0275\u0275directiveInject(B.a))}}static{this.\u0275cmp=e.\u0275\u0275defineComponent({type:ls,selectors:[["cd-osd-creation-preview-modal"]],inputs:{driveGroups:"driveGroups"},outputs:{submitAction:"submitAction"},decls:15,vars:9,consts:()=>{let n,t;return n=$localize`:␟4383e9662ea19839c7499b2128d43a195e564317␟6079562771771919783:OSD creation preview`,t=$localize`:␟366225c51e0b00bcb1c55795a0dc5e81c455f84e␟5240877643020092892:DriveGroups`,[["frm","ngForm"],n,t,[3,"modalRef"],[1,"modal-title"],[1,"modal-content"],["novalidate","",3,"formGroup"],[1,"modal-body"],[1,"modal-footer"],[3,"submitActionEvent","form","submitText"]]},template:function(t,o){if(1&t){const s=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"cd-modal",3),e.\u0275\u0275elementContainerStart(1,4),e.\u0275\u0275i18n(2,1),e.\u0275\u0275elementContainerEnd(),e.\u0275\u0275elementContainerStart(3,5),e.\u0275\u0275elementStart(4,"form",6,0)(6,"div",7)(7,"h4"),e.\u0275\u0275i18n(8,2),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(9,"pre"),e.\u0275\u0275text(10),e.\u0275\u0275pipe(11,"json"),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(12,"div",8)(13,"cd-form-button-panel",9),e.\u0275\u0275pipe(14,"titlecase"),e.\u0275\u0275listener("submitActionEvent",function(){return e.\u0275\u0275restoreView(s),e.\u0275\u0275resetView(o.onSubmit())}),e.\u0275\u0275elementEnd()()(),e.\u0275\u0275elementContainerEnd(),e.\u0275\u0275elementEnd()}2&t&&(e.\u0275\u0275property("modalRef",o.activeModal),e.\u0275\u0275advance(4),e.\u0275\u0275property("formGroup",o.formGroup),e.\u0275\u0275advance(6),e.\u0275\u0275textInterpolate(e.\u0275\u0275pipeBind1(11,5,o.driveGroups)),e.\u0275\u0275advance(3),e.\u0275\u0275property("form",o.formGroup)("submitText",e.\u0275\u0275pipeBind1(14,7,o.action)))},dependencies:[Ut.z,oe.e,ze.E,C.\u0275NgNoValidate,C.NgControlStatusGroup,C.FormGroupDirective,l.JsonPipe,l.TitleCasePipe]})}}class Do{constructor(n,t,o,s,d,h){this.authStorageService=n,this.dimlessBinary=t,this.modalService=o,this.notificationService=s,this.orchService=d,this.hostService=h,this.devices=[],this.showAvailDeviceOnly=!1,this.hiddenColumns=[],this.hostname="",this.diskType="",this.filterColumns=["hostname","human_readable_type","available","sys_api.vendor","sys_api.model","sys_api.size"],this.selectionType=void 0,this.filterChange=new e.EventEmitter,this.fetchInventory=new e.EventEmitter,this.icons=g.FI,this.columns=[],this.selection=new N.y,this.orchStatus=void 0,this.actionOrchFeatures={identify:[At.DEVICE_BLINK_LIGHT]}}ngOnInit(){this.permission=this.authStorageService.getPermissions().osd,this.tableActions=[{permission:"update",icon:g.FI.show,click:()=>this.identifyDevice(),name:$localize`Identify`,disable:t=>this.getDisable("identify",t),canBePrimary:t=>!t.hasSingleSelection,visible:()=>p().isString(this.selectionType)}];const n=[{name:$localize`Hostname`,prop:"hostname",flexGrow:1},{name:$localize`Device path`,prop:"path",flexGrow:1},{name:$localize`Type`,prop:"human_readable_type",flexGrow:1,cellTransformation:b.x.badge,customTemplateConfig:{map:{hdd:{value:"HDD",class:"badge-hdd"},ssd:{value:"SSD",class:"badge-ssd"}}}},{name:$localize`Available`,prop:"available",flexGrow:1,cellClass:"text-center",cellTransformation:b.x.checkIcon},{name:$localize`Vendor`,prop:"sys_api.vendor",flexGrow:1},{name:$localize`Model`,prop:"sys_api.model",flexGrow:1},{name:$localize`Size`,prop:"sys_api.size",flexGrow:1,pipe:this.dimlessBinary},{name:$localize`OSDs`,prop:"osd_ids",flexGrow:1,cellTransformation:b.x.badge,customTemplateConfig:{class:"badge-dark",prefix:"osd."}}];this.columns=n.filter(t=>!this.hiddenColumns.includes(t.prop)),p().forEach(this.filterColumns,t=>{const o=p().find(this.columns,{prop:t});o&&(o.filterable=!0),"human_readable_type"===o?.prop&&"ssd"===this.diskType&&(o.filterInitValue=this.diskType),"hostname"===o?.prop&&this.hostname&&(o.filterInitValue=this.hostname)}),this.fetchInventory.observers.length>0&&(this.fetchInventorySub=this.table.fetchData.subscribe(()=>{this.fetchInventory.emit()}))}getDevices(){this.showAvailDeviceOnly?this.hostService.inventoryDeviceList().subscribe(n=>{this.devices=p().filter(n,"available"),this.devices=[...this.devices]},()=>{this.devices=[]}):this.devices=[...this.devices]}ngOnDestroy(){this.fetchInventorySub&&this.fetchInventorySub.unsubscribe()}onColumnFiltersChanged(n){this.filterChange.emit(n)}getDisable(n,t){return!t.hasSingleSelection||this.orchService.getTableActionDisableDesc(this.orchStatus,this.actionOrchFeatures[n])}updateSelection(n){this.selection=n}identifyDevice(){const n=this.selection.first(),t=n.hostname,o=n.path||n.device_id;this.modalService.show(Kt.b,{titleText:$localize`Identify device ${o}`,message:$localize`Please enter the duration how long to blink the LED.`,fields:[{type:"select",name:"duration",value:300,required:!0,typeConfig:{options:[{text:$localize`1 minute`,value:60},{text:$localize`2 minutes`,value:120},{text:$localize`5 minutes`,value:300},{text:$localize`10 minutes`,value:600},{text:$localize`15 minutes`,value:900}]}}],submitButtonText:$localize`Execute`,onSubmit:s=>{this.hostService.identifyDevice(t,o,s.duration).subscribe(()=>{this.notificationService.show(Ae._.success,$localize`Identifying '${o}' started on host '${t}'`)})}})}static{this.\u0275fac=function(t){return new(t||Do)(e.\u0275\u0275directiveInject(c.v),e.\u0275\u0275directiveInject(pt.l),e.\u0275\u0275directiveInject(He.V),e.\u0275\u0275directiveInject(Q.J),e.\u0275\u0275directiveInject(tn.K),e.\u0275\u0275directiveInject(Ht.I))}}static{this.\u0275cmp=e.\u0275\u0275defineComponent({type:Do,selectors:[["cd-inventory-devices"]],viewQuery:function(t,o){if(1&t&&e.\u0275\u0275viewQuery(We.O,7),2&t){let s;e.\u0275\u0275queryRefresh(s=e.\u0275\u0275loadQuery())&&(o.table=s.first)}},inputs:{devices:"devices",showAvailDeviceOnly:"showAvailDeviceOnly",hiddenColumns:"hiddenColumns",hostname:"hostname",diskType:"diskType",filterColumns:"filterColumns",selectionType:"selectionType",orchStatus:"orchStatus"},outputs:{filterChange:"filterChange",fetchInventory:"fetchInventory"},decls:2,vars:8,consts:[["identifier","uid","columnMode","flex",3,"fetchData","updateSelection","columnFiltersChanged","data","columns","forceIdentifier","selectionType","searchField"],[1,"table-actions",3,"permission","selection","tableActions"]],template:function(t,o){1&t&&(e.\u0275\u0275elementStart(0,"cd-table",0),e.\u0275\u0275listener("fetchData",function(){return o.getDevices()})("updateSelection",function(d){return o.updateSelection(d)})("columnFiltersChanged",function(d){return o.onColumnFiltersChanged(d)}),e.\u0275\u0275element(1,"cd-table-actions",1),e.\u0275\u0275elementEnd()),2&t&&(e.\u0275\u0275property("data",o.devices)("columns",o.columns)("forceIdentifier",!0)("selectionType",o.selectionType)("searchField",!1),e.\u0275\u0275advance(),e.\u0275\u0275property("permission",o.permission)("selection",o.selection)("tableActions",o.tableActions))},dependencies:[We.O,at.j],styles:[".filter[_ngcontent-%COMP%]{padding-right:8px}.fa-stack[_ngcontent-%COMP%]{font-size:.79rem}.fa-stack[_ngcontent-%COMP%]   .fa-stack-1x[_ngcontent-%COMP%]{margin-left:8px;margin-top:5px}"]})}}const Df=["inventoryDevices"],yf=()=>["available","osd_ids"];function Lf(i,n){if(1&i&&(e.\u0275\u0275elementStart(0,"span",17),e.\u0275\u0275text(1),e.\u0275\u0275elementEnd()),2&i){const t=n.$implicit;e.\u0275\u0275advance(),e.\u0275\u0275textInterpolate1(" ",t," ")}}function $f(i,n){if(1&i&&(e.\u0275\u0275elementStart(0,"cd-alert-panel",15),e.\u0275\u0275elementContainerStart(1),e.\u0275\u0275i18n(2,3),e.\u0275\u0275elementContainerEnd(),e.\u0275\u0275template(3,Lf,2,1,"span",16),e.\u0275\u0275elementEnd()),2&i){const t=e.\u0275\u0275nextContext();e.\u0275\u0275property("showTitle",!1),e.\u0275\u0275advance(3),e.\u0275\u0275property("ngForOf",t.requiredFilters)}}function xf(i,n){if(1&i&&(e.\u0275\u0275elementStart(0,"div")(1,"p",18)(2,"span"),e.\u0275\u0275i18n(3,4),e.\u0275\u0275pipe(4,"dimlessBinary"),e.\u0275\u0275elementEnd()()()),2&i){const t=e.\u0275\u0275nextContext();e.\u0275\u0275advance(4),e.\u0275\u0275i18nExp(t.filteredDevices.length)(e.\u0275\u0275pipeBind1(4,2,t.capacity)),e.\u0275\u0275i18nApply(3)}}class _s{constructor(n,t,o,s,d){this.formBuilder=n,this.cdRef=t,this.activeModal=o,this.actionLabels=s,this.wizardStepService=d,this.submitAction=new e.EventEmitter,this.icons=g.FI,this.filterColumns=[],this.devices=[],this.filteredDevices=[],this.capacity=0,this.canSubmit=!1,this.requiredFilters=[],this.action=s.ADD,this.createForm()}ngAfterViewInit(){const n=p().filter(this.inventoryDevices.columns,t=>this.filterColumns.includes(t.prop)&&"hostname"!==t.prop);setTimeout(()=>{this.requiredFilters=p().map(n,"name")},0)}createForm(){this.formGroup=this.formBuilder.group({})}onFilterChange(n){if(this.capacity=0,this.canSubmit=!1,p().isEmpty(n.filters))this.filteredDevices=[],this.event=void 0;else{const t=n.filters.filter(o=>"hostname"!==o.prop);this.canSubmit=!p().isEmpty(t),this.filteredDevices=n.data,this.capacity=p().sumBy(this.filteredDevices,"sys_api.size"),this.event=n}this.cdRef.detectChanges()}onSubmit(){this.submitAction.emit(this.event),this.activeModal.close()}static{this.\u0275fac=function(t){return new(t||_s)(e.\u0275\u0275directiveInject(Dt.$),e.\u0275\u0275directiveInject(e.ChangeDetectorRef),e.\u0275\u0275directiveInject(G.NgbActiveModal),e.\u0275\u0275directiveInject(m.Ss),e.\u0275\u0275directiveInject(nl.m))}}static{this.\u0275cmp=e.\u0275\u0275defineComponent({type:_s,selectors:[["cd-osd-devices-selection-modal"]],viewQuery:function(t,o){if(1&t&&e.\u0275\u0275viewQuery(Df,5),2&t){let s;e.\u0275\u0275queryRefresh(s=e.\u0275\u0275loadQuery())&&(o.inventoryDevices=s.first)}},outputs:{submitAction:"submitAction"},decls:14,vars:16,consts:()=>{let n,t,o;return n=$localize`:␟8edc89137d0d8c5667a2f03230beafae45e58429␟6940517647806021958:${"\ufffd0\ufffd"}:INTERPOLATION: devices`,t=$localize`:␟eba28e1805b18f7c8ae2e4bc15dcf063b10b3822␟8660075096431095478:At least one of these filters must be applied in order to proceed:`,o=$localize`:␟93389aa2fe2bea50bf89554ee51b28f87ee2fb50␟7112734180309214773:Number of devices: ${"\ufffd0\ufffd"}:INTERPOLATION:. Raw capacity: ${"\ufffd1\ufffd"}:INTERPOLATION_1:.`,[["frm","ngForm"],["inventoryDevices",""],n,t,o,[3,"modalRef"],[1,"modal-title"],[1,"modal-content"],["novalidate","",3,"formGroup"],[1,"modal-body"],["type","warning","size","slim",3,"showTitle",4,"ngIf"],[3,"filterChange","devices","filterColumns","hostname","diskType","hiddenColumns"],[4,"ngIf"],[1,"modal-footer"],[3,"submitActionEvent","form","disabled","submitText"],["type","warning","size","slim",3,"showTitle"],["class","badge badge-dark ms-2",4,"ngFor","ngForOf"],[1,"badge","badge-dark","ms-2"],[1,"text-center"]]},template:function(t,o){if(1&t){const s=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"cd-modal",5),e.\u0275\u0275elementContainerStart(1,6),e.\u0275\u0275i18n(2,2),e.\u0275\u0275elementContainerEnd(),e.\u0275\u0275elementContainerStart(3,7),e.\u0275\u0275elementStart(4,"form",8,0)(6,"div",9),e.\u0275\u0275template(7,$f,4,2,"cd-alert-panel",10),e.\u0275\u0275elementStart(8,"cd-inventory-devices",11,1),e.\u0275\u0275listener("filterChange",function(h){return e.\u0275\u0275restoreView(s),e.\u0275\u0275resetView(o.onFilterChange(h))}),e.\u0275\u0275elementEnd(),e.\u0275\u0275template(10,xf,5,4,"div",12),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(11,"div",13)(12,"cd-form-button-panel",14),e.\u0275\u0275pipe(13,"titlecase"),e.\u0275\u0275listener("submitActionEvent",function(){return e.\u0275\u0275restoreView(s),e.\u0275\u0275resetView(o.onSubmit())}),e.\u0275\u0275elementEnd()()(),e.\u0275\u0275elementContainerEnd(),e.\u0275\u0275elementEnd()}2&t&&(e.\u0275\u0275property("modalRef",o.activeModal),e.\u0275\u0275advance(2),e.\u0275\u0275i18nExp(o.deviceType),e.\u0275\u0275i18nApply(2),e.\u0275\u0275advance(2),e.\u0275\u0275property("formGroup",o.formGroup),e.\u0275\u0275advance(3),e.\u0275\u0275property("ngIf",!o.canSubmit),e.\u0275\u0275advance(),e.\u0275\u0275property("devices",o.devices)("filterColumns",o.filterColumns)("hostname",o.hostname)("diskType",o.diskType)("hiddenColumns",e.\u0275\u0275pureFunction0(15,yf)),e.\u0275\u0275advance(2),e.\u0275\u0275property("ngIf",o.canSubmit),e.\u0275\u0275advance(2),e.\u0275\u0275property("form",o.formGroup)("disabled",!o.canSubmit||0===o.filteredDevices.length)("submitText",e.\u0275\u0275pipeBind1(13,13,o.action)))},dependencies:[l.NgForOf,l.NgIf,Ut.z,nt.m,oe.e,ze.E,C.\u0275NgNoValidate,C.NgControlStatusGroup,C.FormGroupDirective,Do,l.TitleCasePipe,pt.l]})}}const Uf=()=>["available","osd_ids"],wf=()=>[];function Gf(i,n){1&i&&(e.\u0275\u0275elementStart(0,"span"),e.\u0275\u0275i18n(1,2),e.\u0275\u0275elementEnd())}function Hf(i,n){1&i&&(e.\u0275\u0275elementStart(0,"span"),e.\u0275\u0275i18n(1,3),e.\u0275\u0275elementEnd())}function Vf(i,n){1&i&&(e.\u0275\u0275elementStart(0,"span"),e.\u0275\u0275i18n(1,4),e.\u0275\u0275elementEnd())}function Bf(i,n){if(1&i){const t=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementContainerStart(0),e.\u0275\u0275elementStart(1,"button",13),e.\u0275\u0275listener("click",function(){e.\u0275\u0275restoreView(t);const s=e.\u0275\u0275nextContext();return e.\u0275\u0275resetView(s.showSelectionModal())}),e.\u0275\u0275namespaceSVG(),e.\u0275\u0275element(2,"svg",14),e.\u0275\u0275namespaceHTML(),e.\u0275\u0275elementContainerStart(3),e.\u0275\u0275i18n(4,5),e.\u0275\u0275elementContainerEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementContainerEnd()}if(2&i){const t=e.\u0275\u0275nextContext();e.\u0275\u0275advance(),e.\u0275\u0275property("title",t.addButtonTooltip)("disabled",0===t.availDevices.length||!t.canSelect||t.expansionCanSelect),e.\u0275\u0275advance(),e.\u0275\u0275property("cdsIcon",t.icons.add)("size",t.icons.size16)}}function zf(i,n){if(1&i&&(e.\u0275\u0275elementStart(0,"span")(1,"span",20),e.\u0275\u0275text(2),e.\u0275\u0275elementEnd()()),2&i){const t=n.$implicit;e.\u0275\u0275advance(2),e.\u0275\u0275textInterpolate2("",t.name,": ",t.value.formatted,"")}}function Xf(i,n){if(1&i&&(e.\u0275\u0275elementStart(0,"div",21)(1,"span"),e.\u0275\u0275i18n(2,7),e.\u0275\u0275pipe(3,"dimlessBinary"),e.\u0275\u0275elementEnd()()),2&i){const t=e.\u0275\u0275nextContext(2);e.\u0275\u0275advance(3),e.\u0275\u0275i18nExp(e.\u0275\u0275pipeBind1(3,1,t.capacity)),e.\u0275\u0275i18nApply(2)}}function kf(i,n){if(1&i){const t=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"div",15),e.\u0275\u0275template(1,zf,3,2,"span",16),e.\u0275\u0275elementStart(2,"a",17),e.\u0275\u0275listener("click",function(){return e.\u0275\u0275restoreView(t),e.\u0275\u0275nextContext().clearDevices(),e.\u0275\u0275resetView(!1)}),e.\u0275\u0275namespaceSVG(),e.\u0275\u0275element(3,"svg",14),e.\u0275\u0275namespaceHTML(),e.\u0275\u0275elementContainerStart(4),e.\u0275\u0275i18n(5,6),e.\u0275\u0275elementContainerEnd(),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(6,"div"),e.\u0275\u0275element(7,"cd-inventory-devices",18),e.\u0275\u0275elementEnd(),e.\u0275\u0275template(8,Xf,4,3,"div",19)}if(2&i){const t=e.\u0275\u0275nextContext();e.\u0275\u0275advance(),e.\u0275\u0275property("ngForOf",t.appliedFilters),e.\u0275\u0275advance(2),e.\u0275\u0275property("cdsIcon",t.icons.clearFilters)("size",t.icons.size16),e.\u0275\u0275advance(4),e.\u0275\u0275property("devices",t.devices)("hiddenColumns",e.\u0275\u0275pureFunction0(7,Uf))("filterColumns",e.\u0275\u0275pureFunction0(8,wf)),e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf","data"===t.type)}}class cs{constructor(n,t,o){this.modalService=n,this.osdService=t,this.router=o,this.selected=new e.EventEmitter,this.cleared=new e.EventEmitter,this.icons=g.FI,this.devices=[],this.capacity=0,this.appliedFilters=new Array,this.expansionCanSelect=!1,this.tooltips={noAvailDevices:$localize`No available devices`,addPrimaryFirst:$localize`Please add primary devices first`,addByFilters:$localize`Add devices by using filters`},this.isOsdPage=this.router.url.includes("/osd")}ngOnInit(){this.isOsdPage||(this.osdService?.osdDevices[this.type]?this.devices=this.osdService.osdDevices[this.type]:this.devices=[],this.capacity=p().sumBy(this.devices,"sys_api.size"),this.osdService?.osdDevices?this.expansionCanSelect=this.osdService?.osdDevices.disableSelect:this.expansionCanSelect=!1),this.updateAddButtonTooltip()}ngOnChanges(){this.updateAddButtonTooltip()}showSelectionModal(){const t="Primary"===this.name?"hdd":"ssd",o={hostname:this.hostname,deviceType:this.name,diskType:t,devices:this.availDevices,filterColumns:["hostname","human_readable_type","sys_api.vendor","sys_api.model","sys_api.size"]};this.modalService.show(_s,o,{size:"xl"}).componentInstance.submitAction.subscribe(d=>{this.devices=d.data,this.capacity=p().sumBy(this.devices,"sys_api.size"),this.appliedFilters=d.filters;const h=p().assign({type:this.type},d);this.isOsdPage||(this.osdService.osdDevices[this.type]=this.devices,this.osdService.osdDevices.disableSelect=this.canSelect||this.devices.length===this.availDevices.length,this.osdService.osdDevices[this.type].capacity=this.capacity),this.selected.emit(h)})}updateAddButtonTooltip(){"data"===this.type&&0===this.availDevices.length?this.addButtonTooltip=this.tooltips.noAvailDevices:this.canSelect?0===this.availDevices.length?this.addButtonTooltip=this.tooltips.noAvailDevices:this.addButtonTooltip=this.tooltips.addByFilters:this.addButtonTooltip=this.tooltips.addPrimaryFirst}clearDevices(){this.isOsdPage||(this.expansionCanSelect=!1,this.osdService.osdDevices.disableSelect=!1,this.osdService.osdDevices=[]);const n={type:this.type,clearedDevices:[...this.devices]};this.devices=[],this.cleared.emit(n)}static{this.\u0275fac=function(t){return new(t||cs)(e.\u0275\u0275directiveInject(Yt.B),e.\u0275\u0275directiveInject(Ct),e.\u0275\u0275directiveInject(u.Router))}}static{this.\u0275cmp=e.\u0275\u0275defineComponent({type:cs,selectors:[["cd-osd-devices-selection-groups"]],inputs:{type:"type",name:"name",hostname:"hostname",availDevices:"availDevices",canSelect:"canSelect"},outputs:{selected:"selected",cleared:"cleared"},features:[e.\u0275\u0275NgOnChangesFeature],decls:12,vars:6,consts:()=>{let n,t,o,s,d,h,I;return n=$localize`:␟ccb4f84edc0b4e76415bb3f9b73d725b06683af3␟3255654659214623812:${"\ufffd0\ufffd"}:INTERPOLATION: devices`,t=$localize`:␟60cb3d01e5ddf266ecb4271007a1c3d0f3efdc22␟5163131577317458158:The primary storage devices. These devices contain all OSD data.`,o=$localize`:␟b432e04886d0d1fd84f740477383051f85addcf2␟767820422593095690:Write-Ahead-Log devices. These devices are used for BlueStore’s internal journal. It is only useful to use a WAL device if the device is faster than the primary device (e.g. NVME devices or SSDs). If there is only a small amount of fast storage available (e.g., less than a gigabyte), we recommend using it as a WAL device.`,s=$localize`:␟b87e181ab9e8393aa5ed759dd3d53836e32c8ffe␟4555212462061875010:DB devices can be used for storing BlueStore’s internal metadata. It is only helpful to provision a DB device if it is faster than the primary device (e.g. NVME devices or SSD).`,d=$localize`:␟f6755cff4957d5c3c89bafce5651f1b6fa2b1fd9␟3249513483374643425:Add`,h=$localize`:␟99ee4faa69cd2ea8e3678c1f557c0ff1f05aae46␟8700121026680200191:Clear`,I=$localize`:␟7e0fd3c7af0630f93befa6234a693a32a61084e0␟6923249034352347568:Raw capacity: ${"\ufffd0\ufffd"}:INTERPOLATION:`,[["blockClearDevices",""],n,t,o,s,d,h,I,[1,"form-group","row"],["for","createDeleteButton",1,"cd-col-form-label"],[4,"ngIf"],[1,"cd-col-form-input"],[4,"ngIf","ngIfElse"],["type","button","data-toggle","tooltip",1,"btn","btn-light",3,"click","title","disabled"],[3,"cdsIcon","size"],[1,"pb-2","my-2","border-bottom"],[4,"ngFor","ngForOf"],["href","",1,"tc_clearSelections",3,"click"],[3,"devices","hiddenColumns","filterColumns"],["class","float-end",4,"ngIf"],[1,"badge","badge-dark","me-2"],[1,"float-end"]]},template:function(t,o){if(1&t&&(e.\u0275\u0275elementStart(0,"div",8)(1,"label",9),e.\u0275\u0275elementContainerStart(2),e.\u0275\u0275i18n(3,1),e.\u0275\u0275elementContainerEnd(),e.\u0275\u0275elementStart(4,"cd-helper"),e.\u0275\u0275template(5,Gf,2,0,"span",10)(6,Hf,2,0,"span",10)(7,Vf,2,0,"span",10),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(8,"div",11),e.\u0275\u0275template(9,Bf,5,4,"ng-container",12)(10,kf,9,9,"ng-template",null,0,e.\u0275\u0275templateRefExtractor),e.\u0275\u0275elementEnd()()),2&t){const s=e.\u0275\u0275reference(11);e.\u0275\u0275advance(3),e.\u0275\u0275i18nExp(o.name),e.\u0275\u0275i18nApply(3),e.\u0275\u0275advance(2),e.\u0275\u0275property("ngIf","data"===o.type),e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf","wal"===o.type),e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf","db"===o.type),e.\u0275\u0275advance(2),e.\u0275\u0275property("ngIf",0===o.devices.length)("ngIfElse",s)}},dependencies:[l.NgForOf,l.NgIf,y.m,Ge.S,Ve.C,D.IconDirective,Do,pt.l],styles:[".tc_clearSelections[_ngcontent-%COMP%]{text-decoration:none}"]})}}const jf=["dataDeviceSelectionGroups"],Wf=["walDeviceSelectionGroups"],Kf=["dbDeviceSelectionGroups"],Qf=["previewButtonPanel"],wl=i=>({collapsed:i}),Gl=i=>({show:i});function Yf(i,n){1&i&&e.\u0275\u0275element(0,"cd-orchestrator-doc-panel")}function Jf(i,n){if(1&i&&(e.\u0275\u0275elementStart(0,"div",45),e.\u0275\u0275i18n(1,9),e.\u0275\u0275pipe(2,"titlecase"),e.\u0275\u0275pipe(3,"upperFirst"),e.\u0275\u0275elementEnd()),2&i){const t=e.\u0275\u0275nextContext(2);e.\u0275\u0275advance(3),e.\u0275\u0275i18nExp(e.\u0275\u0275pipeBind1(2,2,t.action))(e.\u0275\u0275pipeBind1(3,4,t.resource)),e.\u0275\u0275i18nApply(1)}}function Zf(i,n){1&i&&(e.\u0275\u0275elementStart(0,"cd-alert-panel",46),e.\u0275\u0275i18n(1,10),e.\u0275\u0275elementEnd())}function qf(i,n){if(1&i){const t=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"div",47)(1,"div",48)(2,"input",49),e.\u0275\u0275listener("change",function(){e.\u0275\u0275restoreView(t);const s=e.\u0275\u0275nextContext(2);return e.\u0275\u0275resetView(s.emitDeploymentSelection())}),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(3,"label",50),e.\u0275\u0275i18nStart(4,11),e.\u0275\u0275elementStart(5,"cd-helper"),e.\u0275\u0275element(6,"span"),e.\u0275\u0275elementEnd(),e.\u0275\u0275i18nEnd(),e.\u0275\u0275elementEnd()()()}if(2&i){const t=n.$implicit,o=e.\u0275\u0275nextContext(2);e.\u0275\u0275advance(2),e.\u0275\u0275property("id",t)("value",t),e.\u0275\u0275attribute("disabled",null==o.deploymentOptions||!o.deploymentOptions.options[t].available||null),e.\u0275\u0275advance(),e.\u0275\u0275property("id","label_"+t)("for",t),e.\u0275\u0275advance(3),e.\u0275\u0275i18nExp(null==o.deploymentOptions?null:o.deploymentOptions.options[t].title)((null==o.deploymentOptions?null:o.deploymentOptions.recommended_option)===t?"(Recommended)":"")(null==o.deploymentOptions?null:o.deploymentOptions.options[t].desc),e.\u0275\u0275i18nApply(4)}}function eE(i,n){1&i&&(e.\u0275\u0275elementStart(0,"span",56),e.\u0275\u0275i18n(1,15),e.\u0275\u0275elementEnd())}function tE(i,n){if(1&i&&(e.\u0275\u0275elementStart(0,"div",51)(1,"label",52),e.\u0275\u0275elementContainerStart(2),e.\u0275\u0275i18n(3,12),e.\u0275\u0275elementContainerEnd(),e.\u0275\u0275elementStart(4,"cd-helper")(5,"span"),e.\u0275\u0275i18n(6,13),e.\u0275\u0275elementEnd(),e.\u0275\u0275element(7,"br"),e.\u0275\u0275elementStart(8,"span"),e.\u0275\u0275i18n(9,14),e.\u0275\u0275elementEnd()()(),e.\u0275\u0275elementStart(10,"div",53),e.\u0275\u0275element(11,"input",54),e.\u0275\u0275template(12,eE,2,0,"span",55),e.\u0275\u0275elementEnd()()),2&i){e.\u0275\u0275nextContext();const t=e.\u0275\u0275reference(4),o=e.\u0275\u0275nextContext();e.\u0275\u0275advance(12),e.\u0275\u0275property("ngIf",o.form.showError("walSlots",t,"min"))}}function nE(i,n){1&i&&(e.\u0275\u0275elementStart(0,"span",56),e.\u0275\u0275i18n(1,19),e.\u0275\u0275elementEnd())}function oE(i,n){if(1&i&&(e.\u0275\u0275elementStart(0,"div",51)(1,"label",57),e.\u0275\u0275elementContainerStart(2),e.\u0275\u0275i18n(3,16),e.\u0275\u0275elementContainerEnd(),e.\u0275\u0275elementStart(4,"cd-helper")(5,"span"),e.\u0275\u0275i18n(6,17),e.\u0275\u0275elementEnd(),e.\u0275\u0275element(7,"br"),e.\u0275\u0275elementStart(8,"span"),e.\u0275\u0275i18n(9,18),e.\u0275\u0275elementEnd()()(),e.\u0275\u0275elementStart(10,"div",53),e.\u0275\u0275element(11,"input",58),e.\u0275\u0275template(12,nE,2,0,"span",55),e.\u0275\u0275elementEnd()()),2&i){e.\u0275\u0275nextContext();const t=e.\u0275\u0275reference(4),o=e.\u0275\u0275nextContext();e.\u0275\u0275advance(12),e.\u0275\u0275property("ngIf",o.form.showError("dbSlots",t,"min"))}}function iE(i,n){if(1&i){const t=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"div",59)(1,"input",60),e.\u0275\u0275listener("change",function(){e.\u0275\u0275restoreView(t);const s=e.\u0275\u0275nextContext(2);return e.\u0275\u0275resetView(s.emitDeploymentSelection())}),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(2,"label",61),e.\u0275\u0275text(3),e.\u0275\u0275elementEnd()()}if(2&i){const t=n.$implicit;e.\u0275\u0275advance(),e.\u0275\u0275propertyInterpolate("id",t.key),e.\u0275\u0275propertyInterpolate("name",t.key),e.\u0275\u0275propertyInterpolate("formControlName",t.key),e.\u0275\u0275advance(),e.\u0275\u0275propertyInterpolate("for",t.key),e.\u0275\u0275advance(),e.\u0275\u0275textInterpolate(t.desc)}}function aE(i,n){if(1&i){const t=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"div",62)(1,"cd-form-button-panel",63,4),e.\u0275\u0275listener("submitActionEvent",function(){e.\u0275\u0275restoreView(t);const s=e.\u0275\u0275nextContext(2);return e.\u0275\u0275resetView(s.submit())}),e.\u0275\u0275elementEnd()()}if(2&i){e.\u0275\u0275nextContext();const t=e.\u0275\u0275reference(23),o=e.\u0275\u0275nextContext();e.\u0275\u0275advance(),e.\u0275\u0275property("form",o.form)("disabled",0===t.devices.length&&!o.simpleDeployment)("submitText",o.simpleDeployment?"Create OSDs":o.actionLabels.PREVIEW)}}function sE(i,n){if(1&i){const t=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"div",22),e.\u0275\u0275template(1,Jf,4,6,"div",23),e.\u0275\u0275elementStart(2,"div",24)(3,"form",25,0),e.\u0275\u0275template(5,Zf,2,0,"cd-alert-panel",26),e.\u0275\u0275elementStart(6,"div",27)(7,"div",28)(8,"h2",29)(9,"button",30),e.\u0275\u0275listener("click",function(){e.\u0275\u0275restoreView(t);const s=e.\u0275\u0275nextContext();return e.\u0275\u0275resetView(s.emitDeploymentMode())}),e.\u0275\u0275i18n(10,5),e.\u0275\u0275elementEnd()()(),e.\u0275\u0275elementStart(11,"div",31)(12,"div",32),e.\u0275\u0275template(13,qf,7,8,"div",33),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(14,"div",28)(15,"h2",29)(16,"button",34),e.\u0275\u0275listener("click",function(){e.\u0275\u0275restoreView(t);const s=e.\u0275\u0275nextContext();return e.\u0275\u0275resetView(s.emitDeploymentMode())}),e.\u0275\u0275i18n(17,6),e.\u0275\u0275elementEnd()()(),e.\u0275\u0275elementStart(18,"div",31)(19,"div",32)(20,"div",35)(21,"fieldset")(22,"cd-osd-devices-selection-groups",36,1),e.\u0275\u0275listener("selected",function(s){e.\u0275\u0275restoreView(t);const d=e.\u0275\u0275nextContext();return e.\u0275\u0275resetView(d.onDevicesSelected(s))})("cleared",function(s){e.\u0275\u0275restoreView(t);const d=e.\u0275\u0275nextContext();return e.\u0275\u0275resetView(d.onDevicesCleared(s))}),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(24,"fieldset")(25,"legend"),e.\u0275\u0275i18n(26,7),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(27,"cd-osd-devices-selection-groups",37,2),e.\u0275\u0275listener("selected",function(s){e.\u0275\u0275restoreView(t);const d=e.\u0275\u0275nextContext();return e.\u0275\u0275resetView(d.onDevicesSelected(s))})("cleared",function(s){e.\u0275\u0275restoreView(t);const d=e.\u0275\u0275nextContext();return e.\u0275\u0275resetView(d.onDevicesCleared(s))}),e.\u0275\u0275elementEnd(),e.\u0275\u0275template(29,tE,13,1,"div",38),e.\u0275\u0275elementStart(30,"cd-osd-devices-selection-groups",39,3),e.\u0275\u0275listener("selected",function(s){e.\u0275\u0275restoreView(t);const d=e.\u0275\u0275nextContext();return e.\u0275\u0275resetView(d.onDevicesSelected(s))})("cleared",function(s){e.\u0275\u0275restoreView(t);const d=e.\u0275\u0275nextContext();return e.\u0275\u0275resetView(d.onDevicesCleared(s))}),e.\u0275\u0275elementEnd(),e.\u0275\u0275template(32,oE,13,1,"div",38),e.\u0275\u0275elementEnd()()()(),e.\u0275\u0275elementStart(33,"div",28)(34,"h2",29)(35,"button",40),e.\u0275\u0275i18n(36,8),e.\u0275\u0275elementEnd()()(),e.\u0275\u0275elementStart(37,"div",41)(38,"div",32)(39,"div",42),e.\u0275\u0275template(40,iE,4,5,"div",43),e.\u0275\u0275elementEnd()()()()()(),e.\u0275\u0275template(41,aE,3,3,"div",44),e.\u0275\u0275elementEnd()}if(2&i){const t=e.\u0275\u0275reference(23),o=e.\u0275\u0275reference(28),s=e.\u0275\u0275reference(31),d=e.\u0275\u0275nextContext();e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf",!d.hideTitle),e.\u0275\u0275advance(2),e.\u0275\u0275property("formGroup",d.form),e.\u0275\u0275advance(2),e.\u0275\u0275property("ngIf",!(null!=d.deploymentOptions&&d.deploymentOptions.recommended_option)),e.\u0275\u0275advance(4),e.\u0275\u0275property("ngClass",e.\u0275\u0275pureFunction1(20,wl,!d.simpleDeployment)),e.\u0275\u0275advance(2),e.\u0275\u0275property("ngClass",e.\u0275\u0275pureFunction1(22,Gl,d.simpleDeployment)),e.\u0275\u0275advance(2),e.\u0275\u0275property("ngForOf",d.optionNames),e.\u0275\u0275advance(3),e.\u0275\u0275property("ngClass",e.\u0275\u0275pureFunction1(24,wl,d.simpleDeployment)),e.\u0275\u0275advance(2),e.\u0275\u0275property("ngClass",e.\u0275\u0275pureFunction1(26,Gl,!d.simpleDeployment)),e.\u0275\u0275advance(4),e.\u0275\u0275property("availDevices",d.availDevices)("canSelect",0!==d.availDevices.length),e.\u0275\u0275advance(5),e.\u0275\u0275property("availDevices",d.availDevices)("canSelect",0!==t.devices.length)("hostname",d.hostname),e.\u0275\u0275advance(2),e.\u0275\u0275property("ngIf",0!==o.devices.length),e.\u0275\u0275advance(),e.\u0275\u0275property("availDevices",d.availDevices)("canSelect",0!==t.devices.length)("hostname",d.hostname),e.\u0275\u0275advance(2),e.\u0275\u0275property("ngIf",0!==s.devices.length),e.\u0275\u0275advance(8),e.\u0275\u0275property("ngForOf",d.featureList),e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf",!d.hideSubmitBtn)}}class ci extends Ce.g{constructor(n,t,o,s,d,h,I,$){super(),this.actionLabels=n,this.authStorageService=t,this.orchService=o,this.hostService=s,this.router=d,this.modalService=h,this.osdService=I,this.taskWrapper=$,this.hideTitle=!1,this.hideSubmitBtn=!1,this.emitDriveGroup=new e.EventEmitter,this.emitDeploymentOption=new e.EventEmitter,this.emitMode=new e.EventEmitter,this.icons=g.FI,this.columns=[],this.allDevices=[],this.availDevices=[],this.dataDeviceFilters=[],this.dbDeviceFilters=[],this.walDeviceFilters=[],this.hostname="",this.driveGroup=new Il,this.featureList=[],this.hasOrchestrator=!0,this.simpleDeployment=!0,this.optionNames=Object.values(rl),this.resource=$localize`OSDs`,this.action=this.actionLabels.CREATE,this.features={encrypted:{key:"encrypted",desc:$localize`Encryption`}},this.featureList=p().map(this.features,(w,X)=>Object.assign(w,{key:X})),this.createForm()}ngOnInit(){this.orchService.status().subscribe(n=>{this.hasOrchestrator=n.available,n.available?this.getDataDevices():this.loadingNone()}),this.osdService.getDeploymentOptions().subscribe(n=>{this.deploymentOptions=n,this.osdService.selectedFormValues||this.form.get("deploymentOption").setValue(this.deploymentOptions?.recommended_option),this.deploymentOptions?.recommended_option&&this.enableFeatures()}),this.osdService.selectedFormValues&&(this.form=p().cloneDeep(this.osdService.selectedFormValues),this.form.get("deploymentOption").setValue(this.osdService.selectedFormValues.value?.deploymentOption)),this.simpleDeployment=this.osdService.isDeployementModeSimple,this.form.get("walSlots").valueChanges.subscribe(n=>this.setSlots("wal",n)),this.form.get("dbSlots").valueChanges.subscribe(n=>this.setSlots("db",n)),p().each(this.features,n=>{this.form.get("features").get(n.key).valueChanges.subscribe(t=>this.featureFormUpdate(n.key,t))})}createForm(){this.form=new Ue.$({walSlots:new C.UntypedFormControl(0),dbSlots:new C.UntypedFormControl(0),features:new Ue.$(this.featureList.reduce((n,t)=>(n[t.key]=new C.UntypedFormControl({value:!1,disabled:!0}),n),{})),deploymentOption:new C.UntypedFormControl(0)})}getDataDevices(){this.hostService.inventoryDeviceList().subscribe(n=>{this.allDevices=p().filter(n,"available"),this.availDevices=[...this.allDevices],this.loadingReady()},()=>{this.allDevices=[],this.availDevices=[],this.loadingError()})}setSlots(n,t){"number"==typeof t&&t>=0&&this.driveGroup.setSlots(n,t)}featureFormUpdate(n,t){this.driveGroup.setFeature(n,t)}enableFeatures(){this.featureList.forEach(n=>{this.form.get(n.key).enable({emitEvent:!1})})}disableFeatures(){this.featureList.forEach(n=>{const t=this.form.get(n.key);t.disable({emitEvent:!1}),t.setValue(!1,{emitEvent:!1})})}onDevicesSelected(n){if(this.availDevices=n.dataOut,"data"===n.type){const t=p().find(n.filters,{prop:"hostname"});t?(this.hostname=t.value.raw,this.availDevices=n.dataOut.filter(o=>o.hostname===this.hostname),this.driveGroup.setHostPattern(this.hostname)):this.driveGroup.setHostPattern("*"),this.enableFeatures()}this.driveGroup.setDeviceSelection(n.type,n.filters),this.emitDriveGroup.emit(this.driveGroup)}onDevicesCleared(n){if("data"===n.type)this.hostname="",this.availDevices=[...this.allDevices],this.walDeviceSelectionGroups.devices=[],this.dbDeviceSelectionGroups.devices=[],this.disableFeatures(),this.driveGroup.reset(),this.form.get("walSlots").setValue(0,{emitEvent:!1}),this.form.get("dbSlots").setValue(0,{emitEvent:!1});else{this.availDevices=[...this.availDevices,...n.clearedDevices],this.driveGroup.clearDeviceSelection(n.type);const t=`${n.type}Slots`;this.form.get(t).setValue(0,{emitEvent:!1})}}emitDeploymentSelection(){const n=this.form.get("deploymentOption").value,t=this.form.get("encrypted").value;this.emitDeploymentOption.emit({option:n,encrypted:t})}emitDeploymentMode(){this.simpleDeployment=!this.simpleDeployment,this.simpleDeployment||0!==this.dataDeviceSelectionGroups.devices.length?this.enableFeatures():this.disableFeatures(),this.emitMode.emit(this.simpleDeployment)}submit(){if(this.simpleDeployment){const o={option:this.form.get("deploymentOption").value,encrypted:this.form.get("encrypted").value},d=`${this.deploymentOptions.options[o.option].title} deployment`;this.taskWrapper.wrapTaskAroundCall({task:new q.O("osd/"+m.Qp.CREATE,{tracking_id:d}),call:this.osdService.create([o],d,"predefined")}).subscribe({complete:()=>{this.router.navigate(["/osd"])}})}else{const n=this.authStorageService.getUsername();this.driveGroup.setName(`dashboard-${n}-${p().now()}`),this.modalService.show(ls,{driveGroups:[this.driveGroup.spec]}).componentInstance.submitAction.subscribe(()=>{this.router.navigate(["/osd"])}),this.previewButtonPanel.submitButton.loading=!1}}ngOnDestroy(){this.osdService.selectedFormValues=p().cloneDeep(this.form),this.osdService.isDeployementModeSimple=0===this.dataDeviceSelectionGroups?.devices?.length}static{this.\u0275fac=function(t){return new(t||ci)(e.\u0275\u0275directiveInject(m.Ss),e.\u0275\u0275directiveInject(c.v),e.\u0275\u0275directiveInject(tn.K),e.\u0275\u0275directiveInject(Ht.I),e.\u0275\u0275directiveInject(u.Router),e.\u0275\u0275directiveInject(Yt.B),e.\u0275\u0275directiveInject(Ct),e.\u0275\u0275directiveInject(B.a))}}static{this.\u0275cmp=e.\u0275\u0275defineComponent({type:ci,selectors:[["cd-osd-form"]],viewQuery:function(t,o){if(1&t&&(e.\u0275\u0275viewQuery(jf,5),e.\u0275\u0275viewQuery(Wf,5),e.\u0275\u0275viewQuery(Kf,5),e.\u0275\u0275viewQuery(Qf,5)),2&t){let s;e.\u0275\u0275queryRefresh(s=e.\u0275\u0275loadQuery())&&(o.dataDeviceSelectionGroups=s.first),e.\u0275\u0275queryRefresh(s=e.\u0275\u0275loadQuery())&&(o.walDeviceSelectionGroups=s.first),e.\u0275\u0275queryRefresh(s=e.\u0275\u0275loadQuery())&&(o.dbDeviceSelectionGroups=s.first),e.\u0275\u0275queryRefresh(s=e.\u0275\u0275loadQuery())&&(o.previewButtonPanel=s.first)}},inputs:{hideTitle:"hideTitle",hideSubmitBtn:"hideSubmitBtn"},outputs:{emitDriveGroup:"emitDriveGroup",emitDeploymentOption:"emitDeploymentOption",emitMode:"emitMode"},features:[e.\u0275\u0275InheritDefinitionFeature],decls:2,vars:2,consts:()=>{let n,t,o,s,d,h,I,$,w,X,J,re,de,Me,ve;return n=$localize`:␟f071e2e2eacdbc0c086f20034b62eab631ac4744␟4851641033405243436:Deployment Options`,t=$localize`:␟52c3f2cd68f059e49dfc3cc4b6ed60d56de618cf␟3119794609322363234:Advanced Mode`,o=$localize`:␟43ecf6bee2aebc07b0aad6dc1fe13e38d14687fa␟3068413638564398802:Shared devices`,s=$localize`:␟6cdb1fea93d77c07950c0c76c6e0ad79ebbef084␟6599364831830861985:Features`,d=$localize`:form title|Example\: Create Pool@@formTitle␟f1553045110d959c485a73c7f40f26fcc28b975b␟6476422032353420938:${"\ufffd0\ufffd"}:INTERPOLATION: ${"\ufffd1\ufffd"}:INTERPOLATION_1:`,h=$localize`:␟134b2900b2e9e070f3ecf56b344f0f5355673a34␟300590679166957139: No devices(HDD, SSD or NVME) were found. Creation of OSDs will remain disabled until devices are added. `,I=$localize`:␟13473b2df7b2156a22d98cae1558d43c4f7d5d9a␟5085286005356674689:${"\ufffd0\ufffd"}:INTERPOLATION: ${"\ufffd1\ufffd"}:INTERPOLATION_1: ${"\ufffd#5\ufffd"}:START_TAG_CD_HELPER:${"\ufffd#6\ufffd"}:START_TAG_SPAN:${"\ufffd2\ufffd"}:INTERPOLATION_2:${"\ufffd/#6\ufffd"}:CLOSE_TAG_SPAN:${"\ufffd/#5\ufffd"}:CLOSE_TAG_CD_HELPER:`,$=$localize`:␟7a1c376f6f1b37de4c318ff2106255ba6c0f5b0b␟3067321700107184111:WAL slots`,w=$localize`:␟73811a6f37b63e6b0e491e221bfa21e9dea8a87a␟5193677607387731461:How many OSDs per WAL device.`,X=$localize`:␟0c67a7ac4762ef1cc855056c6b4daab93e53a0a5␟3373497724718235601:Specify 0 to let Orchestrator backend decide it.`,J=$localize`:␟7bda9362e06e6c67341b4a8425b0d29d6b84464b␟1255369660111528301:Value should be greater than or equal to 0`,re=$localize`:␟324c2b10152b9dd908222bb0b71f61beb60a30c5␟5566222513626093422:DB slots`,de=$localize`:␟c23cf12ef9c76f37fc7a4b7ae3e00fb0f68b6e26␟1350815912323046421:How many OSDs per DB device.`,Me=$localize`:␟0c67a7ac4762ef1cc855056c6b4daab93e53a0a5␟3373497724718235601:Specify 0 to let Orchestrator backend decide it.`,ve=$localize`:␟7bda9362e06e6c67341b4a8425b0d29d6b84464b␟1255369660111528301:Value should be greater than or equal to 0`,[["formDir","ngForm"],["dataDeviceSelectionGroups",""],["walDeviceSelectionGroups",""],["dbDeviceSelectionGroups",""],["previewButtonPanel",""],n,t,o,s,d,h,I,$,w,X,J,re,de,Me,ve,[4,"ngIf"],["class","card",4,"cdFormLoading"],[1,"card"],["class","card-header",4,"ngIf"],[1,"card-body","ms-2"],["name","form","novalidate","",3,"formGroup"],["type","warning","class","mx-3",4,"ngIf"],[1,"accordion"],[1,"accordion-item"],[1,"accordion-header"],["type","button","data-toggle","collapse","aria-label","toggle deployment options",1,"accordion-button",3,"click","ngClass"],[1,"accordion-collapse","collapse",3,"ngClass"],[1,"accordion-body"],["class","pt-3 pb-3",4,"ngFor","ngForOf"],["type","button","aria-label","toggle advanced mode",1,"accordion-button",3,"click","ngClass"],[1,"card-body"],["name","Primary","type","data",3,"selected","cleared","availDevices","canSelect"],["name","WAL","type","wal",3,"selected","cleared","availDevices","canSelect","hostname"],["class","form-group row",4,"ngIf"],["name","DB","type","db",3,"selected","cleared","availDevices","canSelect","hostname"],["type","button","data-toggle","collapse","aria-label","features","aria-expanded","true",1,"accordion-button"],[1,"accordion-collapse","collapse","show"],["formGroupName","features",1,"pt-3","pb-3"],["class","custom-control custom-checkbox",4,"ngFor","ngForOf"],["class","card-footer",4,"ngIf"],[1,"card-header"],["type","warning",1,"mx-3"],[1,"pt-3","pb-3"],[1,"custom-control","form-check","custom-control-inline"],["type","radio","name","deploymentOption","formControlName","deploymentOption",1,"form-check-input",3,"change","id","value"],[1,"form-check-label",3,"id","for"],[1,"form-group","row"],["for","walSlots",1,"cd-col-form-label"],[1,"cd-col-form-input"],["id","walSlots","name","walSlots","type","number","min","0","formControlName","walSlots",1,"form-control"],["class","invalid-feedback",4,"ngIf"],[1,"invalid-feedback"],["for","dbSlots",1,"cd-col-form-label"],["id","dbSlots","name","dbSlots","type","number","min","0","formControlName","dbSlots",1,"form-control"],[1,"custom-control","custom-checkbox"],["type","checkbox",1,"custom-control-input",3,"change","id","name","formControlName"],[1,"custom-control-label",3,"for"],[1,"card-footer"],["wrappingClass","text-right",3,"submitActionEvent","form","disabled","submitText"]]},template:function(t,o){1&t&&e.\u0275\u0275template(0,Yf,1,0,"cd-orchestrator-doc-panel",20)(1,sE,42,28,"div",21),2&t&&(e.\u0275\u0275property("ngIf",!o.hasOrchestrator),e.\u0275\u0275advance(),e.\u0275\u0275property("cdFormLoading",o.loading))},dependencies:[l.NgClass,l.NgForOf,l.NgIf,y.m,nt.m,co,oe.e,tt.G,Ge.S,we.a,Ve.C,ze.E,C.\u0275NgNoValidate,C.DefaultValueAccessor,C.NumberValueAccessor,C.CheckboxControlValueAccessor,C.RadioControlValueAccessor,C.NgControlStatus,C.NgControlStatusGroup,C.MinValidator,C.FormGroupDirective,C.FormControlName,C.FormGroupName,cs,l.TitleCasePipe,Pe.r]})}}var Hl=r(76139),rE=r(54980),lE=r(7563),Vl=r.n(lE),Bl=r(19271);function _E(i,n){1&i&&(e.\u0275\u0275elementStart(0,"span",30),e.\u0275\u0275elementContainerStart(1),e.\u0275\u0275i18n(2,9),e.\u0275\u0275elementContainerEnd(),e.\u0275\u0275elementEnd())}function cE(i,n){1&i&&(e.\u0275\u0275elementStart(0,"span",30),e.\u0275\u0275elementContainerStart(1),e.\u0275\u0275i18n(2,10),e.\u0275\u0275elementContainerEnd(),e.\u0275\u0275elementEnd())}function dE(i,n){if(1&i&&e.\u0275\u0275template(0,_E,3,0,"span",29)(1,cE,3,0,"span",29),2&i){e.\u0275\u0275nextContext();const t=e.\u0275\u0275reference(2),o=e.\u0275\u0275nextContext();e.\u0275\u0275property("ngIf",o.hostForm.showError("hostname",t,"required")),e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf",o.hostForm.showError("hostname",t,"uniqueName"))}}function uE(i,n){1&i&&(e.\u0275\u0275elementStart(0,"span"),e.\u0275\u0275elementContainerStart(1),e.\u0275\u0275i18n(2,12),e.\u0275\u0275elementContainerEnd(),e.\u0275\u0275elementEnd())}function pE(i,n){if(1&i&&e.\u0275\u0275template(0,uE,3,0,"span",27),2&i){e.\u0275\u0275nextContext(2);const t=e.\u0275\u0275reference(2),o=e.\u0275\u0275nextContext();e.\u0275\u0275property("ngIf",o.hostForm.showError("addr",t,"pattern"))}}function mE(i,n){1&i&&(e.\u0275\u0275elementStart(0,"div",20)(1,"cds-text-label",31),e.\u0275\u0275i18nStart(2,11),e.\u0275\u0275element(3,"input",32),e.\u0275\u0275i18nEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275template(4,pE,1,1,"ng-template",null,2,e.\u0275\u0275templateRefExtractor),e.\u0275\u0275elementEnd())}function fE(i,n){1&i&&(e.\u0275\u0275elementStart(0,"div")(1,"cds-checkbox",33),e.\u0275\u0275i18n(2,13),e.\u0275\u0275elementEnd()())}function EE(i,n){if(1&i){const t=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementContainerStart(0),e.\u0275\u0275elementStart(1,"form",18,0)(3,"div",19)(4,"div",20)(5,"cds-text-label",21),e.\u0275\u0275elementContainerStart(6),e.\u0275\u0275i18n(7,4),e.\u0275\u0275elementContainerEnd(),e.\u0275\u0275elementStart(8,"input",22),e.\u0275\u0275listener("keyup",function(){e.\u0275\u0275restoreView(t);const s=e.\u0275\u0275nextContext();return e.\u0275\u0275resetView(s.checkHostNameValue())}),e.\u0275\u0275elementEnd()(),e.\u0275\u0275template(9,dE,2,2,"ng-template",null,1,e.\u0275\u0275templateRefExtractor),e.\u0275\u0275elementStart(11,"cd-help-text"),e.\u0275\u0275text(12," To add multiple hosts at once, you can enter: "),e.\u0275\u0275elementStart(13,"ul",23)(14,"li",24),e.\u0275\u0275i18nStart(15,5),e.\u0275\u0275element(16,"b"),e.\u0275\u0275i18nEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(17,"li",24),e.\u0275\u0275i18nStart(18,6),e.\u0275\u0275element(19,"b"),e.\u0275\u0275i18nEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(20,"li",24),e.\u0275\u0275i18nStart(21,7),e.\u0275\u0275element(22,"b"),e.\u0275\u0275i18nEnd(),e.\u0275\u0275elementEnd()()()(),e.\u0275\u0275template(23,mE,6,0,"div",25),e.\u0275\u0275elementStart(24,"div",20)(25,"cds-combo-box",26),e.\u0275\u0275listener("updatedItems",function(s){e.\u0275\u0275restoreView(t);const d=e.\u0275\u0275nextContext();return e.\u0275\u0275resetView(d.labelsOption=s)}),e.\u0275\u0275i18nStart(26,8),e.\u0275\u0275element(27,"cds-dropdown-list"),e.\u0275\u0275i18nEnd(),e.\u0275\u0275elementEnd()(),e.\u0275\u0275template(28,fE,3,0,"div",27),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(29,"cd-form-button-panel",28),e.\u0275\u0275pipe(30,"titlecase"),e.\u0275\u0275pipe(31,"upperFirst"),e.\u0275\u0275listener("submitActionEvent",function(){e.\u0275\u0275restoreView(t);const s=e.\u0275\u0275nextContext();return e.\u0275\u0275resetView(s.submit())}),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementContainerEnd()}if(2&i){const t=e.\u0275\u0275reference(10),o=e.\u0275\u0275nextContext();e.\u0275\u0275advance(),e.\u0275\u0275property("formGroup",o.hostForm),e.\u0275\u0275advance(4),e.\u0275\u0275property("invalid",!o.hostForm.controls.hostname.valid&&o.hostForm.controls.hostname.dirty)("invalidText",t),e.\u0275\u0275advance(3),e.\u0275\u0275property("invalid",!o.hostForm.controls.hostname.valid&&o.hostForm.controls.hostname.dirty),e.\u0275\u0275advance(15),e.\u0275\u0275property("ngIf",!o.hostPattern),e.\u0275\u0275advance(2),e.\u0275\u0275property("appendInline",!0)("items",o.labelsOption),e.\u0275\u0275advance(3),e.\u0275\u0275property("ngIf",!o.hideMaintenance),e.\u0275\u0275advance(),e.\u0275\u0275property("form",o.hostForm)("submitText",e.\u0275\u0275pipeBind1(30,11,o.action)+" "+e.\u0275\u0275pipeBind1(31,13,o.resource))("modalForm",!0)}}const ds="hosts";class di extends Ce.g{constructor(n,t,o,s,d,h){super(),this.router=n,this.actionLabels=t,this.hostService=o,this.taskWrapper=s,this.route=d,this.hideMaintenance=h,this.open=!1,this.hostnameArray=[],this.hostPattern=!1,this.labelsOption=[],this.messages=new il.z({empty:$localize`There are no labels.`,filter:$localize`Filter or add labels`,add:$localize`Add label`}),this.resource=$localize`host`,this.action=this.actionLabels.ADD}ngOnInit(){this.router.url.includes(ds)&&(this.pageURL=ds),this.open="modal"===this.route.outlet,this.createForm();const n=new ai.n(()=>{});this.hostService.list(n.toParams(),"false").subscribe(t=>{this.hostnames=t.map(o=>o.hostname),this.loadingReady()}),this.hostService.getLabels().subscribe(t=>{const o=new Set(t.concat(this.hostService.predefinedLabels));this.labelsOption=Array.from(o).map(s=>({name:s,content:s}))})}checkHostNameValue(){this.hostForm.get("hostname").value.match(/[()\[\]{},]/g)?this.hostPattern=!0:this.hostPattern=!1}createForm(){this.hostForm=new Ue.$({hostname:new C.UntypedFormControl("",{validators:[C.Validators.required,pe.xQ.custom("uniqueName",n=>this.hostnames&&-1!==this.hostnames.indexOf(n))]}),addr:new C.UntypedFormControl("",{validators:[pe.xQ.ip()]}),labels:new C.UntypedFormControl([]),maintenance:new C.UntypedFormControl})}isCommaSeparatedPattern(n){return n.includes(",")}isRangeTypePattern(n){return n.includes("[")&&n.includes("]")&&!n.match(/(?![^(]*\)),/g)}replaceBraces(n){return n.replace(/(\d)\s*-\s*(\d)/g,"$1..$2").replace(/\(/g,"{").replace(/\)/g,"}").replace(/\[/g,"{").replace(/]/g,"}")}checkHostNamePattern(n){if(this.isRangeTypePattern(n)){const t=this.replaceBraces(n);this.hostnameArray=Vl()(t)}else if(this.isCommaSeparatedPattern(n)){let t=[];t=n.split(","),t.forEach(o=>{if(this.isRangeTypePattern(o)){const s=this.replaceBraces(o);this.hostnameArray=this.hostnameArray.concat(Vl()(s))}else this.hostnameArray.push(o)})}else this.hostnameArray.push(n)}submit(){const n=this.hostForm.get("hostname").value;this.checkHostNamePattern(n),this.addr=this.hostForm.get("addr").value,this.status=this.hostForm.get("maintenance").value?"maintenance":"",this.allLabels=this.hostForm.get("labels").value,this.pageURL!==ds&&!this.allLabels.includes("_no_schedule")&&this.allLabels.push("_no_schedule"),this.hostnameArray.forEach(t=>{this.taskWrapper.wrapTaskAroundCall({task:new q.O("host/"+m.Qp.ADD,{hostname:t}),call:this.hostService.create(t,this.addr,this.allLabels,this.status)}).subscribe({error:()=>{this.hostForm.setErrors({cdSubmitButton:!0})},complete:()=>{this.closeModal()}})})}closeModal(){this.pageURL===ds?this.router.navigate([this.pageURL,{outlets:{modal:null}}]):this.open=!1}static{this.\u0275fac=function(t){return new(t||di)(e.\u0275\u0275directiveInject(u.Router),e.\u0275\u0275directiveInject(m.Ss),e.\u0275\u0275directiveInject(Ht.I),e.\u0275\u0275directiveInject(B.a),e.\u0275\u0275directiveInject(u.ActivatedRoute),e.\u0275\u0275directiveInject("hideMaintenance",8))}}static{this.\u0275cmp=e.\u0275\u0275defineComponent({type:di,selectors:[["cd-host-form"]],features:[e.\u0275\u0275InheritDefinitionFeature],decls:7,vars:9,consts:()=>{let n,t,o,s,d,h,I,$,w,X,J,re;return n=$localize`:␟fb127ea03835b3230f0ed981c7080e2ccb879621␟3346778808274133574:${"\ufffd0\ufffd"}:INTERPOLATION: ${"\ufffd1\ufffd"}:INTERPOLATION_1:`,t=$localize`:␟6b9daf5320db23ad0225feb5e8964fdc6d94d50b␟4341225277764240869:Select Labels...`,o=$localize`:␟e1a688aad6950c764739ca17eb73de43fb7c0dcd␟6582118866508236276:Hostname (required)`,s=$localize`:␟ca7b8a2113f494a3e865a901b507840cf1f3fdd9␟6623159123141970639:a comma-separated list of hostnames ${"\ufffd#16\ufffd"}:START_BOLD_TEXT:(e.g.: example-01,example-02,example-03)${"\ufffd/#16\ufffd"}:CLOSE_BOLD_TEXT:,`,d=$localize`:␟28ea3c4ca072116cf75bae31a2c4b6bfbfb80ce5␟4356971291210753369:a range expression ${"\ufffd#19\ufffd"}:START_BOLD_TEXT:(e.g.: example-[01-03].ceph)${"\ufffd/#19\ufffd"}:CLOSE_BOLD_TEXT:,`,h=$localize`:␟33662848b0cad0ae464345865e7b0bd06698bd89␟8993308271254034834:a comma separated range expression ${"\ufffd#22\ufffd"}:START_BOLD_TEXT:(e.g.: example-[01-05].lab.com,example2-[1-4].lab.com,example3-[001-006].lab.com)${"\ufffd/#22\ufffd"}:CLOSE_BOLD_TEXT:`,I=$localize`:␟12f37de6622cf2e15ac960f3dd14502e8581733a␟2425863206688252134:${"\ufffd#27\ufffd"}:START_TAG_CDS_DROPDOWN_LIST:${"\ufffd/#27\ufffd"}:CLOSE_TAG_CDS_DROPDOWN_LIST:`,$=$localize`:␟9739656bb5643ced5c52a9aa90588cab8c10852a␟6410945776428459192: This field is required. `,w=$localize`:␟678fd938d7b7e0171c438ea28aa4d3b50f88e817␟1375137808282281836: The chosen hostname is already in use. `,X=$localize`:␟0a557dec73c10c78e2d6d85aff6d8acefbc6e752␟2560375339761004895:Network address ${"\ufffd#3\ufffd\ufffd/#3\ufffd"}:TAG_INPUT:`,J=$localize`:␟5fcdddff5d945926d2e5ffc15ca048c8e3d2aac7␟5549714954988391291: The value is not a valid IP address. `,re=$localize`:␟8e653762da6d533b48daa16fe2091ff4528363ff␟6123843242847757855:Maintenance Mode `,[["formDir","ngForm"],["hostnameError",""],["hostaddrError",""],n,o,s,d,h,I,$,w,X,J,re,["size","md",3,"open","hasScrollingContent"],[3,"closeSelect"],["cdsModalHeaderHeading",""],[4,"cdFormLoading"],["name","hostForm","novalidate","",3,"formGroup"],["cdsModalContent",""],[1,"form-item"],["for","hostname",3,"invalid","invalidText"],["cdsText","","type","text","placeholder","mon-123","id","hostname","name","hostname","formControlName","hostname","autofocus","",3,"keyup","invalid"],["cdsList",""],["cdsListItem",""],["class","form-item",4,"ngIf"],["label","Labels","type","multi","selectionFeedback","top-after-reopen","for","labels","name","labels","formControlName","labels","placeholder",t,"itemValueKey","content","id","labels","cdDynamicInputCombobox","",3,"updatedItems","appendInline","items"],[4,"ngIf"],[3,"submitActionEvent","form","submitText","modalForm"],["class","invalid-feedback",4,"ngIf"],[1,"invalid-feedback"],["label","Network address","for","addr"],["cdsText","","type","text","placeholder","192.168.0.1","id","addr","name","addr","formControlName","addr"],["id","maintenance","type","checkbox","formControlName","maintenance"]]},template:function(t,o){1&t&&(e.\u0275\u0275elementStart(0,"cds-modal",14)(1,"cds-modal-header",15),e.\u0275\u0275listener("closeSelect",function(){return o.closeModal()}),e.\u0275\u0275elementStart(2,"h3",16),e.\u0275\u0275i18n(3,3),e.\u0275\u0275pipe(4,"titlecase"),e.\u0275\u0275pipe(5,"upperFirst"),e.\u0275\u0275elementEnd()(),e.\u0275\u0275template(6,EE,32,15,"ng-container",17),e.\u0275\u0275elementEnd()),2&t&&(e.\u0275\u0275property("open",o.open)("hasScrollingContent",!0),e.\u0275\u0275advance(5),e.\u0275\u0275i18nExp(e.\u0275\u0275pipeBind1(4,5,o.action))(e.\u0275\u0275pipeBind1(5,7,o.resource)),e.\u0275\u0275i18nApply(3),e.\u0275\u0275advance(),e.\u0275\u0275property("cdFormLoading",o.loading))},dependencies:[l.NgIf,oe.e,it.O,ct.B,tt.G,Ge.S,ze.E,Bl.k,C.\u0275NgNoValidate,C.DefaultValueAccessor,C.NgControlStatus,C.NgControlStatusGroup,C.FormGroupDirective,C.FormControlName,D.ComboBox,D.DropdownList,D.Checkbox,D.TextInputLabelComponent,D.TextInput,D.Modal,D.ModalHeader,D.ModalContent,D.ModalHeaderHeading,D.ListItemDirective,D.List,l.TitleCasePipe,Pe.r]})}}var gE=r(91653);const CE=["deviceLocation"],SE=["daemonName"],hE=["lifeExpectancy"],TE=["lifeExpectancyTimestamp"],FE=i=>({daemons:i});function vE(i,n){if(1&i&&e.\u0275\u0275element(0,"cd-table",10),2&i){const t=e.\u0275\u0275nextContext();e.\u0275\u0275property("data",t.devices)("columns",t.columns)}}function ME(i,n){1&i&&(e.\u0275\u0275elementStart(0,"cd-alert-panel",11),e.\u0275\u0275i18n(1,6),e.\u0275\u0275elementEnd())}function RE(i,n){if(1&i&&e.\u0275\u0275element(0,"cd-label",14),2&i){const t=e.\u0275\u0275nextContext().$implicit;e.\u0275\u0275property("value",t.dev)}}function OE(i,n){if(1&i&&(e.\u0275\u0275elementContainerStart(0),e.\u0275\u0275template(1,RE,1,1,"cd-label",13),e.\u0275\u0275elementContainerEnd()),2&i){const t=n.$implicit,o=e.\u0275\u0275nextContext(2);e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf",t.host===o.hostname)}}function PE(i,n){if(1&i&&e.\u0275\u0275template(0,OE,2,1,"ng-container",12),2&i){const t=n.data.value;e.\u0275\u0275property("ngForOf",t)}}function bE(i,n){if(1&i&&e.\u0275\u0275elementContainer(0,15),2&i){const t=n.data.value,o=e.\u0275\u0275nextContext(),s=e.\u0275\u0275reference(7),d=e.\u0275\u0275reference(9);e.\u0275\u0275property("ngTemplateOutlet",null!==o.osdId?s:d)("ngTemplateOutletContext",e.\u0275\u0275pureFunction1(2,FE,t))}}function NE(i,n){if(1&i&&e.\u0275\u0275element(0,"cd-label",14),2&i){const t=e.\u0275\u0275nextContext().$implicit;e.\u0275\u0275property("value",t)}}function IE(i,n){if(1&i&&(e.\u0275\u0275elementContainerStart(0),e.\u0275\u0275template(1,NE,1,1,"cd-label",13),e.\u0275\u0275elementContainerEnd()),2&i){const t=n.$implicit,o=e.\u0275\u0275nextContext(2);e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf",t.includes(o.osdId))}}function AE(i,n){if(1&i&&e.\u0275\u0275template(0,IE,2,1,"ng-container",12),2&i){const t=n.daemons;e.\u0275\u0275property("ngForOf",t)}}function DE(i,n){if(1&i&&(e.\u0275\u0275elementContainerStart(0),e.\u0275\u0275element(1,"cd-label",16),e.\u0275\u0275elementContainerEnd()),2&i){const t=n.$implicit;e.\u0275\u0275advance(),e.\u0275\u0275property("value",t)}}function yE(i,n){if(1&i&&e.\u0275\u0275template(0,DE,2,1,"ng-container",12),2&i){const t=n.daemons;e.\u0275\u0275property("ngForOf",t)}}function LE(i,n){1&i&&(e.\u0275\u0275elementStart(0,"span"),e.\u0275\u0275i18n(1,7),e.\u0275\u0275pipe(2,"notAvailable"),e.\u0275\u0275elementEnd()),2&i&&(e.\u0275\u0275advance(2),e.\u0275\u0275i18nExp(e.\u0275\u0275pipeBind1(2,1,"")),e.\u0275\u0275i18nApply(1))}function $E(i,n){if(1&i&&(e.\u0275\u0275elementStart(0,"span"),e.\u0275\u0275text(1),e.\u0275\u0275pipe(2,"i18nPlural"),e.\u0275\u0275elementEnd()),2&i){const t=e.\u0275\u0275nextContext().data.value,o=e.\u0275\u0275nextContext();e.\u0275\u0275advance(),e.\u0275\u0275textInterpolate1("> ",e.\u0275\u0275pipeBind2(2,1,t.min,o.translationMapping),"")}}function xE(i,n){if(1&i&&(e.\u0275\u0275elementStart(0,"span"),e.\u0275\u0275text(1),e.\u0275\u0275pipe(2,"i18nPlural"),e.\u0275\u0275elementEnd()),2&i){const t=e.\u0275\u0275nextContext().data.value,o=e.\u0275\u0275nextContext();e.\u0275\u0275advance(),e.\u0275\u0275textInterpolate1("< ",e.\u0275\u0275pipeBind2(2,1,t.max,o.translationMapping),"")}}function UE(i,n){if(1&i&&(e.\u0275\u0275elementStart(0,"span"),e.\u0275\u0275text(1),e.\u0275\u0275pipe(2,"i18nPlural"),e.\u0275\u0275elementEnd()),2&i){const t=e.\u0275\u0275nextContext().data.value,o=e.\u0275\u0275nextContext();e.\u0275\u0275advance(),e.\u0275\u0275textInterpolate2("",t.min," to ",e.\u0275\u0275pipeBind2(2,2,t.max,o.translationMapping),"")}}function wE(i,n){if(1&i&&e.\u0275\u0275template(0,LE,3,3,"span",17)(1,$E,3,4,"span",17)(2,xE,3,4,"span",17)(3,UE,3,5,"span",17),2&i){const t=n.data.value;e.\u0275\u0275property("ngIf",!(null!=t&&t.life_expectancy_enabled)),e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf",(null==t?null:t.min)&&!(null!=t&&t.max)),e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf",(null==t?null:t.max)&&!(null!=t&&t.min)),e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf",(null==t?null:t.max)&&(null==t?null:t.min))}}function GE(i,n){if(1&i&&e.\u0275\u0275text(0),2&i){const t=n.data.value;e.\u0275\u0275textInterpolate1(" ",t,"\n")}}class ui{constructor(n,t,o){this.hostService=n,this.datePipe=t,this.osdService=o,this.hostname="",this.osdId=null,this.osdList=!1,this.devices=null,this.columns=[],this.translationMapping={"=1":"# week",other:"# weeks"}}ngOnInit(){this.columns=[{prop:"devid",name:$localize`Device ID`,minWidth:200},{prop:"state",name:$localize`State of Health`,flexGrow:1,cellTransformation:b.x.badge,customTemplateConfig:{map:{good:{value:$localize`Good`,class:"badge-success"},warning:{value:$localize`Warning`,class:"badge-warning"},bad:{value:$localize`Bad`,class:"badge-danger"},stale:{value:$localize`Stale`,class:"badge-info"},unknown:{value:$localize`Unknown`,class:"badge-dark"}}}},{prop:"life_expectancy_weeks",name:$localize`Life Expectancy`,cellTemplate:this.lifeExpectancyTemplate},{prop:"life_expectancy_stamp",name:$localize`Prediction Creation Date`,cellTemplate:this.lifeExpectancyTimestampTemplate,pipe:this.datePipe,isHidden:!0},{prop:"location",name:$localize`Device Name`,cellTemplate:this.locationTemplate},{prop:"daemons",name:$localize`Daemons`,cellTemplate:this.daemonNameTemplate}]}ngOnChanges(){const n=t=>this.devices=t;this.osdList&&null!==this.osdId?this.osdService.getDevices(this.osdId).subscribe(n):this.hostname&&this.hostService.getDevices(this.hostname).subscribe(n)}static{this.\u0275fac=function(t){return new(t||ui)(e.\u0275\u0275directiveInject(Ht.I),e.\u0275\u0275directiveInject(l.DatePipe),e.\u0275\u0275directiveInject(Ct))}}static{this.\u0275cmp=e.\u0275\u0275defineComponent({type:ui,selectors:[["cd-device-list"]],viewQuery:function(t,o){if(1&t&&(e.\u0275\u0275viewQuery(CE,7),e.\u0275\u0275viewQuery(SE,7),e.\u0275\u0275viewQuery(hE,7),e.\u0275\u0275viewQuery(TE,7)),2&t){let s;e.\u0275\u0275queryRefresh(s=e.\u0275\u0275loadQuery())&&(o.locationTemplate=s.first),e.\u0275\u0275queryRefresh(s=e.\u0275\u0275loadQuery())&&(o.daemonNameTemplate=s.first),e.\u0275\u0275queryRefresh(s=e.\u0275\u0275loadQuery())&&(o.lifeExpectancyTemplate=s.first),e.\u0275\u0275queryRefresh(s=e.\u0275\u0275loadQuery())&&(o.lifeExpectancyTimestampTemplate=s.first)}},inputs:{hostname:"hostname",osdId:"osdId",osdList:"osdList"},features:[e.\u0275\u0275NgOnChangesFeature],decls:14,vars:2,consts:()=>{let n,t;return n=$localize`:␟ac54c18c1b520e948095c83a3a1025f02ce6dcc6␟4487918765515499493:Neither hostname nor OSD ID given`,t=$localize`:␟1c47dd653a2fbf9206c6e84b2d916df6acc55ab9␟4229228789025320155:${"\ufffd0\ufffd"}:INTERPOLATION:`,[["deviceLocation",""],["daemonName",""],["osdIdDaemon",""],["readableDaemons",""],["lifeExpectancy",""],["lifeExpectancyTimestamp",""],n,t,[3,"data","columns",4,"ngIf"],["type","warning",4,"ngIf"],[3,"data","columns"],["type","warning"],[4,"ngFor","ngForOf"],[3,"value",4,"ngIf"],[3,"value"],[3,"ngTemplateOutlet","ngTemplateOutletContext"],[1,"me-1",3,"value"],[4,"ngIf"]]},template:function(t,o){1&t&&e.\u0275\u0275template(0,vE,1,2,"cd-table",8)(1,ME,2,0,"cd-alert-panel",9)(2,PE,1,1,"ng-template",null,0,e.\u0275\u0275templateRefExtractor)(4,bE,1,4,"ng-template",null,1,e.\u0275\u0275templateRefExtractor)(6,AE,1,1,"ng-template",null,2,e.\u0275\u0275templateRefExtractor)(8,yE,1,1,"ng-template",null,3,e.\u0275\u0275templateRefExtractor)(10,wE,4,4,"ng-template",null,4,e.\u0275\u0275templateRefExtractor)(12,GE,1,1,"ng-template",null,5,e.\u0275\u0275templateRefExtractor),2&t&&(e.\u0275\u0275property("ngIf",o.hostname||null!==o.osdId),e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf",""===o.hostname&&null===o.osdId))},dependencies:[l.NgForOf,l.NgIf,l.NgTemplateOutlet,We.O,nt.m,be,l.I18nPluralPipe,gE.z]})}}const HE=["innerNav"];function VE(i,n){1&i&&(e.\u0275\u0275elementStart(0,"cd-alert-panel",21),e.\u0275\u0275i18n(1,6),e.\u0275\u0275elementEnd())}function BE(i,n){1&i&&(e.\u0275\u0275elementStart(0,"cd-alert-panel",22),e.\u0275\u0275i18n(1,7),e.\u0275\u0275elementEnd())}function zE(i,n){1&i&&(e.\u0275\u0275elementStart(0,"cd-alert-panel",24),e.\u0275\u0275i18n(1,8),e.\u0275\u0275elementEnd())}function XE(i,n){if(1&i&&(e.\u0275\u0275elementContainerStart(0),e.\u0275\u0275elementStart(1,"cd-alert-panel",31),e.\u0275\u0275text(2),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementContainerEnd()),2&i){const t=e.\u0275\u0275nextContext(2).$implicit;e.\u0275\u0275advance(2),e.\u0275\u0275textInterpolate(t.value.userMessage)}}function kE(i,n){1&i&&(e.\u0275\u0275elementStart(0,"cd-alert-panel",33),e.\u0275\u0275i18n(1,9),e.\u0275\u0275elementEnd())}function jE(i,n){1&i&&(e.\u0275\u0275elementContainerStart(0),e.\u0275\u0275elementStart(1,"cd-alert-panel",34),e.\u0275\u0275i18n(2,10),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementContainerEnd())}function WE(i,n){1&i&&(e.\u0275\u0275elementStart(0,"cd-alert-panel",35),e.\u0275\u0275i18n(1,11),e.\u0275\u0275elementEnd())}function KE(i,n){if(1&i&&e.\u0275\u0275template(0,jE,3,0,"ng-container",17)(1,WE,2,0,"ng-template",null,4,e.\u0275\u0275templateRefExtractor),2&i){const t=e.\u0275\u0275reference(2),o=e.\u0275\u0275nextContext(3).$implicit;e.\u0275\u0275property("ngIf",o.value.info.smart_status.passed)("ngIfElse",t)}}function QE(i,n){if(1&i&&(e.\u0275\u0275template(0,kE,2,0,"cd-alert-panel",32),e.\u0275\u0275pipe(1,"pipeFunction"),e.\u0275\u0275template(2,KE,3,2,"ng-template",null,3,e.\u0275\u0275templateRefExtractor)),2&i){const t=e.\u0275\u0275reference(3),o=e.\u0275\u0275nextContext(2).$implicit,s=e.\u0275\u0275nextContext(4);e.\u0275\u0275property("ngIf",e.\u0275\u0275pipeBind2(1,2,null==o.value.info?null:o.value.info.smart_status,s.isEmpty))("ngIfElse",t)}}function YE(i,n){if(1&i&&e.\u0275\u0275element(0,"cd-table-key-value",39),2&i){const t=e.\u0275\u0275nextContext(4).$implicit;e.\u0275\u0275property("renderObjects",!0)("data",t.value.info)}}function JE(i,n){1&i&&(e.\u0275\u0275elementStart(0,"cd-alert-panel",40),e.\u0275\u0275i18n(1,14),e.\u0275\u0275elementEnd())}function ZE(i,n){if(1&i&&(e.\u0275\u0275template(0,YE,1,2,"cd-table-key-value",37),e.\u0275\u0275pipe(1,"pipeFunction"),e.\u0275\u0275template(2,JE,2,0,"cd-alert-panel",38),e.\u0275\u0275pipe(3,"pipeFunction")),2&i){const t=e.\u0275\u0275nextContext(3).$implicit,o=e.\u0275\u0275nextContext(4);e.\u0275\u0275property("ngIf",!e.\u0275\u0275pipeBind2(1,2,t.value.info,o.isEmpty)),e.\u0275\u0275advance(2),e.\u0275\u0275property("ngIf",e.\u0275\u0275pipeBind2(3,5,t.value.info,o.isEmpty))}}function qE(i,n){if(1&i&&e.\u0275\u0275element(0,"cd-table",44),2&i){const t=e.\u0275\u0275nextContext(4).$implicit,o=e.\u0275\u0275nextContext(4);e.\u0275\u0275property("data",t.value.smart.attributes.table)("columns",o.smartDataColumns)}}function eg(i,n){if(1&i&&e.\u0275\u0275element(0,"cd-table-key-value",45),2&i){const t=e.\u0275\u0275nextContext(4).$implicit;e.\u0275\u0275property("renderObjects",!0)("data",t.value.smart)}}function tg(i,n){if(1&i&&e.\u0275\u0275element(0,"cd-table-key-value",45),2&i){const t=e.\u0275\u0275nextContext(4).$implicit;e.\u0275\u0275property("renderObjects",!0)("data",t.value.smart.nvmeData)}}function ng(i,n){1&i&&(e.\u0275\u0275elementStart(0,"cd-alert-panel",46),e.\u0275\u0275i18n(1,15),e.\u0275\u0275elementEnd())}function og(i,n){if(1&i&&e.\u0275\u0275template(0,qE,1,2,"cd-table",41)(1,eg,1,2,"cd-table-key-value",42)(2,tg,1,2,"cd-table-key-value",42)(3,ng,2,0,"cd-alert-panel",43),2&i){const t=e.\u0275\u0275nextContext(3).$implicit;e.\u0275\u0275property("ngIf",null==t.value.smart?null:t.value.smart.attributes),e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf",null==t.value.smart?null:t.value.smart.scsi_error_counter_log),e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf",null==t.value.smart?null:t.value.smart.nvmeData),e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf",!(null!=t.value.smart&&t.value.smart.attributes||null!=t.value.smart&&t.value.smart.nvmeData||null!=t.value.smart&&t.value.smart.scsi_error_counter_log))}}function ig(i,n){if(1&i&&(e.\u0275\u0275elementContainerStart(0),e.\u0275\u0275elementStart(1,"nav",25,5)(3,"li",36)(4,"a",29),e.\u0275\u0275i18n(5,12),e.\u0275\u0275elementEnd(),e.\u0275\u0275template(6,ZE,4,8,"ng-template",30),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(7,"li",36)(8,"a",29),e.\u0275\u0275i18n(9,13),e.\u0275\u0275elementEnd(),e.\u0275\u0275template(10,og,4,4,"ng-template",30),e.\u0275\u0275elementEnd()(),e.\u0275\u0275element(11,"div",27),e.\u0275\u0275elementContainerEnd()),2&i){const t=e.\u0275\u0275reference(2);e.\u0275\u0275advance(3),e.\u0275\u0275property("ngbNavItem",1),e.\u0275\u0275advance(4),e.\u0275\u0275property("ngbNavItem",2),e.\u0275\u0275advance(4),e.\u0275\u0275property("ngbNavOutlet",t)}}function ag(i,n){if(1&i&&(e.\u0275\u0275template(0,XE,3,1,"ng-container",17)(1,QE,4,5,"ng-template",null,2,e.\u0275\u0275templateRefExtractor)(3,ig,12,3,"ng-container",20),e.\u0275\u0275pipe(4,"pipeFunction"),e.\u0275\u0275pipe(5,"pipeFunction")),2&i){const t=e.\u0275\u0275reference(2),o=e.\u0275\u0275nextContext().$implicit,s=e.\u0275\u0275nextContext(4);e.\u0275\u0275property("ngIf",o.value.error)("ngIfElse",t),e.\u0275\u0275advance(3),e.\u0275\u0275property("ngIf",!e.\u0275\u0275pipeBind2(4,3,o.value.info,s.isEmpty)||!e.\u0275\u0275pipeBind2(5,6,o.value.smart,s.isEmpty))}}function sg(i,n){if(1&i&&(e.\u0275\u0275elementContainerStart(0,28),e.\u0275\u0275elementStart(1,"a",29),e.\u0275\u0275text(2),e.\u0275\u0275elementEnd(),e.\u0275\u0275template(3,ag,6,9,"ng-template",30),e.\u0275\u0275elementContainerEnd()),2&i){const t=n.$implicit;e.\u0275\u0275advance(2),e.\u0275\u0275textInterpolate2("",t.value.device," (",t.value.identifier,")")}}function rg(i,n){if(1&i&&(e.\u0275\u0275elementContainerStart(0),e.\u0275\u0275elementStart(1,"nav",25,1),e.\u0275\u0275template(3,sg,4,2,"ng-container",26),e.\u0275\u0275pipe(4,"keyvalue"),e.\u0275\u0275elementEnd(),e.\u0275\u0275element(5,"div",27),e.\u0275\u0275elementContainerEnd()),2&i){const t=e.\u0275\u0275reference(2),o=e.\u0275\u0275nextContext(3);e.\u0275\u0275advance(3),e.\u0275\u0275property("ngForOf",e.\u0275\u0275pipeBind1(4,2,o.data)),e.\u0275\u0275advance(2),e.\u0275\u0275property("ngbNavOutlet",t)}}function lg(i,n){if(1&i&&(e.\u0275\u0275elementContainerStart(0),e.\u0275\u0275template(1,zE,2,0,"cd-alert-panel",23),e.\u0275\u0275pipe(2,"pipeFunction"),e.\u0275\u0275template(3,rg,6,4,"ng-container",20),e.\u0275\u0275pipe(4,"pipeFunction"),e.\u0275\u0275elementContainerEnd()),2&i){const t=e.\u0275\u0275nextContext(2);e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf",e.\u0275\u0275pipeBind2(2,2,t.data,t.isEmpty)),e.\u0275\u0275advance(2),e.\u0275\u0275property("ngIf",!e.\u0275\u0275pipeBind2(4,5,t.data,t.isEmpty))}}function _g(i,n){if(1&i&&(e.\u0275\u0275elementContainerStart(0),e.\u0275\u0275template(1,VE,2,0,"cd-alert-panel",18)(2,BE,2,0,"cd-alert-panel",19)(3,lg,5,8,"ng-container",20),e.\u0275\u0275elementContainerEnd()),2&i){const t=e.\u0275\u0275nextContext();e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf",t.error),e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf",t.incompatible),e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf",!t.error&&!t.incompatible)}}function cg(i,n){1&i&&(e.\u0275\u0275elementStart(0,"cd-loading-panel"),e.\u0275\u0275i18n(1,16),e.\u0275\u0275elementEnd())}class pi{constructor(n,t){this.osdService=n,this.hostService=t,this.osdId=null,this.hostname=null,this.loading=!1,this.incompatible=!1,this.error=!1,this.data={},this.isEmpty=p().isEmpty}isSmartError(n){return void 0!==p().get(n,"error")}isNvmeSmartData(n){return"nvme"===p().get(n,"device.protocol","").toLowerCase()}isAtaSmartData(n){return"ata"===p().get(n,"device.protocol","").toLowerCase()}isIscsiSmartData(n){return"scsi"===p().get(n,"device.protocol","").toLowerCase()}fetchData(n){const t={};p().each(n,(o,s)=>{if(this.isSmartError(o)){let d="";d=-22===o.smartctl_error_code?$localize`Smartctl has received an unknown argument \
(error code ${o.smartctl_error_code}). \
You may be using an incompatible version of smartmontools. Version >= 7.0 of \
smartmontools is required to successfully retrieve data.`:$localize`An error with error code ${o.smartctl_error_code} occurred.`;const h={error:o.error,smartctl_error_code:o.smartctl_error_code,smartctl_output:o.smartctl_output,userMessage:d,device:o.dev,identifier:o.nvme_vendor};t[s]=h}else 1!==o.json_format_version[0]?this.incompatible=!0:this.isAtaSmartData(o)?t[s]=this.extractAtaData(o):this.isIscsiSmartData(o)?t[s]=this.extractIscsiData(o):this.isNvmeSmartData(o)&&(t[s]=this.extractNvmeData(o))}),this.data=t,this.loading=!1}extractNvmeData(n){return{info:p().omitBy(n,(o,s)=>["nvme_smart_health_information_log"].includes(s)),smart:{nvmeData:n.nvme_smart_health_information_log},device:n.device.name,identifier:n.serial_number}}extractIscsiData(n){const t=p().omitBy(n,(o,s)=>["scsi_error_counter_log","scsi_grown_defect_list"].includes(s));return{info:t,smart:{scsi_error_counter_log:n.scsi_error_counter_log,scsi_grown_defect_list:n.scsi_grown_defect_list},device:t.device.name,identifier:t.serial_number}}extractAtaData(n){const t=p().omitBy(n,(o,s)=>["ata_smart_attributes","ata_smart_selective_self_test_log","ata_smart_data"].includes(s));return{info:t,smart:{attributes:n.ata_smart_attributes,data:n.ata_smart_data},device:t.device.name,identifier:t.serial_number}}updateData(){this.loading=!0,null!==this.osdId?this.osdService.getSmartData(this.osdId).subscribe({next:this.fetchData.bind(this),error:n=>{n.preventDefault(),this.error=n,this.loading=!1}}):null!==this.hostname&&this.hostService.getSmartData(this.hostname).subscribe({next:this.fetchData.bind(this),error:n=>{n.preventDefault(),this.error=n,this.loading=!1}})}ngOnInit(){this.smartDataColumns=[{prop:"id",name:$localize`ID`},{prop:"name",name:$localize`Name`},{prop:"raw.value",name:$localize`Raw`},{prop:"thresh",name:$localize`Threshold`},{prop:"value",name:$localize`Value`},{prop:"when_failed",name:$localize`When Failed`},{prop:"worst",name:$localize`Worst`}],this.scsiSmartDataColumns=[{prop:"correction_algorithm_invocations",name:$localize`Correction Algorithm Invocations`},{prop:"errors_corrected_by_eccdelayed",name:$localize`Errors Corrected by ECC (Delayed)`},{prop:"errors_corrected_by_eccfast",name:$localize`Errors Corrected by ECC (Fast)`},{prop:"errors_corrected_by_rereads_rewrites",name:$localize`Errors Corrected by Rereads/Rewrites`},{prop:"gigabytes_processed",name:$localize`Gigabytes Processed`},{prop:"total_errors_corrected",name:$localize`Total Errors Corrected`},{prop:"total_uncorrected_errors",name:$localize`Total Errors Uncorrected`}]}ngOnChanges(n){this.data={},n.osdId?this.osdId=n.osdId.currentValue:n.hostname&&(this.hostname=n.hostname.currentValue),this.updateData()}static{this.\u0275fac=function(t){return new(t||pi)(e.\u0275\u0275directiveInject(Ct),e.\u0275\u0275directiveInject(Ht.I))}}static{this.\u0275cmp=e.\u0275\u0275defineComponent({type:pi,selectors:[["cd-smart-list"]],viewQuery:function(t,o){if(1&t&&e.\u0275\u0275viewQuery(HE,5),2&t){let s;e.\u0275\u0275queryRefresh(s=e.\u0275\u0275loadQuery())&&(o.nav=s.first)}},inputs:{osdId:"osdId",hostname:"hostname"},features:[e.\u0275\u0275NgOnChangesFeature],decls:3,vars:2,consts:()=>{let n,t,o,s,d,h,I,$,w,X,J,re,de,Me;return n=$localize`:␟4f635b3cb0600409a2ad44a5bd1863c699e6a01c␟4420333239786935295:Failed to retrieve SMART data.`,t=$localize`:␟a8a3f354bd640299068edd912f4bb5325264f250␟4251524768433153835:The data received has the JSON format version 2.x and is currently incompatible with the dashboard.`,o=$localize`:␟04f8a3c7e8ac610e6581960162cc15f55a16696a␟8567623508567043877:No SMART data available.`,s=$localize`:␟a185c9b97513b3882604ea9bab60edbfac945c15␟4086816540824573235:SMART overall-health self-assessment test result`,d=$localize`:␟290e4c9ad42dc6e9176656c864a5faed8053f406␟4097761430561209267:unknown`,h=$localize`:␟a185c9b97513b3882604ea9bab60edbfac945c15␟4086816540824573235:SMART overall-health self-assessment test result`,I=$localize`:␟3a03d3c2e459f8f8fa7202c0fce465d6165f9e2b␟2124672565465036433:passed`,$=$localize`:␟a185c9b97513b3882604ea9bab60edbfac945c15␟4086816540824573235:SMART overall-health self-assessment test result`,w=$localize`:␟41435d5a5692c8e412c74deaee95d99dbd3617e1␟4083337005045748464:failed`,X=$localize`:␟ddd5dd6d930030096ea617f62c82b648a0dd9484␟7078108784316509044:Device Information`,J=$localize`:␟20cb12827cbe559a7b1da6fdae96041b3b5c3c55␟5647116476288417812:SMART`,re=$localize`:␟6e149c483d88cfcff11d1c5db85e84af7c3149c4␟7488562694849083032:No device information available for this device.`,de=$localize`:␟380295f37caea93701d071485a38ef0bdba57133␟116944113746873653:No SMART data available for this device.`,Me=$localize`:␟5758c3f16f8749f0f4e2a787f02e8b4da246102f␟6108301014917874675:SMART data is loading.`,[["isLoading",""],["nav","ngbNav"],["noError",""],["hasSmartStatus",""],["selfTestFailed",""],["innerNav","ngbNav"],n,t,o,d,I,w,X,J,re,de,Me,[4,"ngIf","ngIfElse"],["type","error",4,"ngIf"],["type","warning",4,"ngIf"],[4,"ngIf"],["type","error"],["type","warning"],["type","info",4,"ngIf"],["type","info"],["ngbNav","",1,"nav-tabs"],["ngbNavItem","",4,"ngFor","ngForOf"],[3,"ngbNavOutlet"],["ngbNavItem",""],["ngbNavLink",""],["ngbNavContent",""],["id","alert-error","type","warning"],["id","alert-self-test-unknown","size","slim","type","warning","title",s,4,"ngIf","ngIfElse"],["id","alert-self-test-unknown","size","slim","type","warning","title",s],["id","alert-self-test-passed","size","slim","type","info","title",h],["id","alert-self-test-failed","size","slim","type","warning","title",$],[3,"ngbNavItem"],[3,"renderObjects","data",4,"ngIf"],["id","alert-device-info-unavailable","type","info",4,"ngIf"],[3,"renderObjects","data"],["id","alert-device-info-unavailable","type","info"],["updateSelectionOnRefresh","never",3,"data","columns",4,"ngIf"],["updateSelectionOnRefresh","never",3,"renderObjects","data",4,"ngIf"],["id","alert-device-smart-data-unavailable","type","info",4,"ngIf"],["updateSelectionOnRefresh","never",3,"data","columns"],["updateSelectionOnRefresh","never",3,"renderObjects","data"],["id","alert-device-smart-data-unavailable","type","info"]]},template:function(t,o){if(1&t&&e.\u0275\u0275template(0,_g,4,3,"ng-container",17)(1,cg,2,0,"ng-template",null,0,e.\u0275\u0275templateRefExtractor),2&t){const s=e.\u0275\u0275reference(2);e.\u0275\u0275property("ngIf",!o.loading)("ngIfElse",s)}},dependencies:[l.NgForOf,l.NgIf,We.O,Rt.i,Rl.e,nt.m,G.NgbNavContent,G.NgbNav,G.NgbNavItem,G.NgbNavItemRole,G.NgbNavLink,G.NgbNavLinkBase,G.NgbNavOutlet,l.KeyValuePipe,Ul.N]})}}const dg=()=>[],ug=()=>["hostname"];function pg(i,n){1&i&&e.\u0275\u0275element(0,"cd-orchestrator-doc-panel")}function mg(i,n){if(1&i){const t=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementContainerStart(0),e.\u0275\u0275elementStart(1,"legend"),e.\u0275\u0275i18n(2,0),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(3,"div",2)(4,"div",3)(5,"cd-inventory-devices",4),e.\u0275\u0275listener("fetchInventory",function(){e.\u0275\u0275restoreView(t);const s=e.\u0275\u0275nextContext();return e.\u0275\u0275resetView(s.refresh())}),e.\u0275\u0275elementEnd()()(),e.\u0275\u0275elementContainerEnd()}if(2&i){const t=e.\u0275\u0275nextContext();e.\u0275\u0275advance(5),e.\u0275\u0275property("devices",t.devices)("hiddenColumns",void 0===t.hostname?e.\u0275\u0275pureFunction0(3,dg):e.\u0275\u0275pureFunction0(4,ug))("orchStatus",t.orchStatus)}}class mi{constructor(n,t,o){this.orchService=n,this.hostService=t,this.ngZone=o,this.reloadInterval=5e3,this.firstRefresh=!0,this.icons=g.FI,this.showDocPanel=!1,this.devices=[]}ngOnInit(){this.orchService.status().subscribe(n=>{this.orchStatus=n,this.showDocPanel=!n.available,n.available&&this.ngZone.runOutsideAngular(()=>{this.reloadSubscriber=(0,K.timer)(this.reloadInterval,this.reloadInterval).subscribe(()=>{this.ngZone.run(()=>{this.getInventory(!1)})})})})}ngOnDestroy(){this.reloadSubscriber?.unsubscribe()}ngOnChanges(){this.orchStatus?.available&&(this.devices=[],this.getInventory(!1))}getInventory(n){""!==this.hostname&&this.hostService.inventoryDeviceList(this.hostname,n).subscribe(t=>{this.devices=t},()=>{this.devices=[]})}refresh(){this.getInventory(!this.firstRefresh),this.firstRefresh=!1}static{this.\u0275fac=function(t){return new(t||mi)(e.\u0275\u0275directiveInject(tn.K),e.\u0275\u0275directiveInject(Ht.I),e.\u0275\u0275directiveInject(e.NgZone))}}static{this.\u0275cmp=e.\u0275\u0275defineComponent({type:mi,selectors:[["cd-inventory"]],inputs:{hostname:"hostname"},features:[e.\u0275\u0275NgOnChangesFeature],decls:2,vars:2,consts:()=>{let n;return n=$localize`:␟17137bac47e1e020d139256ded0006a671966e73␟2981276866614410645:Physical Disks`,[n,[4,"ngIf"],[1,"row"],[1,"col-md-12"],["selectionType","single",3,"fetchInventory","devices","hiddenColumns","orchStatus"]]},template:function(t,o){1&t&&e.\u0275\u0275template(0,pg,1,0,"cd-orchestrator-doc-panel",1)(1,mg,6,5,"ng-container",1),2&t&&(e.\u0275\u0275property("ngIf",o.showDocPanel),e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf",null==o.orchStatus?null:o.orchStatus.available))},dependencies:[l.NgIf,co,Do]})}}const fg=()=>["hostname"];function Eg(i,n){if(1&i&&e.\u0275\u0275element(0,"cd-device-list",18),2&i){const t=e.\u0275\u0275nextContext(2);e.\u0275\u0275property("hostname",t.selection.hostname)}}function gg(i,n){if(1&i&&e.\u0275\u0275element(0,"cd-inventory",18),2&i){const t=e.\u0275\u0275nextContext(3);e.\u0275\u0275property("hostname",t.selectedHostname)}}function Cg(i,n){1&i&&(e.\u0275\u0275elementContainerStart(0,19),e.\u0275\u0275elementStart(1,"a",11),e.\u0275\u0275i18n(2,4),e.\u0275\u0275elementEnd(),e.\u0275\u0275template(3,gg,1,1,"ng-template",12),e.\u0275\u0275elementContainerEnd())}function Sg(i,n){if(1&i&&e.\u0275\u0275element(0,"cd-service-daemon-list",21),2&i){const t=e.\u0275\u0275nextContext(3);e.\u0275\u0275property("hostname",t.selectedHostname)("hiddenColumns",e.\u0275\u0275pureFunction0(2,fg))}}function hg(i,n){1&i&&(e.\u0275\u0275elementContainerStart(0,20),e.\u0275\u0275elementStart(1,"a",11),e.\u0275\u0275i18n(2,5),e.\u0275\u0275elementEnd(),e.\u0275\u0275template(3,Sg,1,3,"ng-template",12),e.\u0275\u0275elementContainerEnd())}function Tg(i,n){if(1&i&&e.\u0275\u0275element(0,"cd-grafana",23),2&i){const t=e.\u0275\u0275nextContext(3);e.\u0275\u0275property("grafanaPath","host-details?var-ceph_hosts="+t.selectedHostname)("type","metrics")}}function Fg(i,n){1&i&&(e.\u0275\u0275elementContainerStart(0,22),e.\u0275\u0275elementStart(1,"a",11),e.\u0275\u0275i18n(2,6),e.\u0275\u0275elementEnd(),e.\u0275\u0275template(3,Tg,1,2,"ng-template",12),e.\u0275\u0275elementContainerEnd())}function vg(i,n){if(1&i&&e.\u0275\u0275element(0,"cd-smart-list",18),2&i){const t=e.\u0275\u0275nextContext(3);e.\u0275\u0275property("hostname",t.selectedHostname)}}function Mg(i,n){if(1&i&&e.\u0275\u0275template(0,vg,1,1,"cd-smart-list",24),2&i){const t=e.\u0275\u0275nextContext(2),o=e.\u0275\u0275reference(2);e.\u0275\u0275property("ngIf",t.selectedHostname)("ngIfElse",o)}}function Rg(i,n){if(1&i&&(e.\u0275\u0275elementContainerStart(0),e.\u0275\u0275elementStart(1,"nav",9,1),e.\u0275\u0275elementContainerStart(3,10),e.\u0275\u0275elementStart(4,"a",11),e.\u0275\u0275i18n(5,2),e.\u0275\u0275elementEnd(),e.\u0275\u0275template(6,Eg,1,1,"ng-template",12),e.\u0275\u0275elementContainerEnd(),e.\u0275\u0275template(7,Cg,4,0,"ng-container",13)(8,hg,4,0,"ng-container",14)(9,Fg,4,0,"ng-container",15),e.\u0275\u0275elementContainerStart(10,16),e.\u0275\u0275elementStart(11,"a",11),e.\u0275\u0275i18n(12,3),e.\u0275\u0275elementEnd(),e.\u0275\u0275template(13,Mg,1,2,"ng-template",12),e.\u0275\u0275elementContainerEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275element(14,"div",17),e.\u0275\u0275elementContainerEnd()),2&i){const t=e.\u0275\u0275reference(2),o=e.\u0275\u0275nextContext();e.\u0275\u0275advance(7),e.\u0275\u0275property("ngIf",o.permissions.hosts.read),e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf",o.permissions.hosts.read),e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf",o.permissions.grafana.read),e.\u0275\u0275advance(5),e.\u0275\u0275property("ngbNavOutlet",t)}}function Og(i,n){1&i&&(e.\u0275\u0275elementStart(0,"cd-alert-panel",25),e.\u0275\u0275i18n(1,7),e.\u0275\u0275elementEnd())}class us{get selectedHostname(){return void 0!==this.selection?this.selection.hostname:null}static{this.\u0275fac=function(t){return new(t||us)}}static{this.\u0275cmp=e.\u0275\u0275defineComponent({type:us,selectors:[["cd-host-details"]],inputs:{permissions:"permissions",selection:"selection"},decls:3,vars:1,consts:()=>{let n,t,o,s,d,h,I;return n=$localize`:␟3e24569eca61d598c8b01defbbbb1fa8bd5222bc␟3719027099325959755:Devices`,t=$localize`:␟deba10b7279a589d01e919ea11f43c79ca1773e3␟1216614938441503693:Device health`,o=$localize`:␟17137bac47e1e020d139256ded0006a671966e73␟2981276866614410645:Physical Disks`,s=$localize`:␟9e24f9e2d42104ffc01599db4d566d1cc518f9e6␟1419569261746199221:Daemons`,d=$localize`:␟fbbaf5cb02ed419e79a27072478f716a4666a99d␟9041763226911499160:Performance Details`,h=$localize`:␟b23193979284e10491d9a08f9b90ea6e46a66a2d␟5509679498537118466:Host details`,I=$localize`:␟3d87fc20ea8e5f0f0500ba5d5061b345be78ec5e␟3836829849465327960:No hostname found.`,[["noHostname",""],["nav","ngbNav"],n,t,o,s,d,I,[4,"ngIf"],["ngbNav","","cdStatefulTab","host-details",1,"nav-tabs"],["ngbNavItem","devices"],["ngbNavLink",""],["ngbNavContent",""],["ngbNavItem","inventory",4,"ngIf"],["ngbNavItem","daemons",4,"ngIf"],["ngbNavItem","performance-details",4,"ngIf"],["ngbNavItem","device-health"],[3,"ngbNavOutlet"],[3,"hostname"],["ngbNavItem","inventory"],["ngbNavItem","daemons"],["flag","hostDetails",3,"hostname","hiddenColumns"],["ngbNavItem","performance-details"],["title",h,"uid","rtOg0AiWz","grafanaStyle","four",3,"grafanaPath","type"],[3,"hostname",4,"ngIf","ngIfElse"],["type","error"]]},template:function(t,o){1&t&&e.\u0275\u0275template(0,Rg,15,4,"ng-container",8)(1,Og,2,0,"ng-template",null,0,e.\u0275\u0275templateRefExtractor),2&t&&e.\u0275\u0275property("ngIf",o.selection)},dependencies:[l.NgIf,G.NgbNavContent,G.NgbNav,G.NgbNavItem,G.NgbNavLink,G.NgbNavLinkBase,G.NgbNavOutlet,Tt.c,nt.m,$t.B,ui,pi,mi,li]})}}const Pg=["servicesTpl"],bg=["hostMetricTmpl"],Ng=["hostDimlessTmpl"],Ig=["maintenanceConfirmTpl"],Ag=["orchTmpl"],Dg=["flashTmpl"],yg=["hostNameTpl"];function Lg(i,n){if(1&i&&e.\u0275\u0275element(0,"cd-host-details",27),2&i){const t=e.\u0275\u0275nextContext(2);e.\u0275\u0275property("permissions",t.permissions)("selection",t.expandedRow)}}function $g(i,n){if(1&i){const t=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"cd-table",22,8),e.\u0275\u0275listener("fetchData",function(s){e.\u0275\u0275restoreView(t);const d=e.\u0275\u0275nextContext();return e.\u0275\u0275resetView(d.getHosts(s))})("setExpandedRow",function(s){e.\u0275\u0275restoreView(t);const d=e.\u0275\u0275nextContext();return e.\u0275\u0275resetView(d.setExpandedRow(s))})("updateSelection",function(s){e.\u0275\u0275restoreView(t);const d=e.\u0275\u0275nextContext();return e.\u0275\u0275resetView(d.updateSelection(s))}),e.\u0275\u0275elementStart(2,"div",23),e.\u0275\u0275element(3,"cd-table-actions",24)(4,"cd-table-actions",25),e.\u0275\u0275elementEnd(),e.\u0275\u0275template(5,Lg,1,2,"cd-host-details",26),e.\u0275\u0275elementEnd()}if(2&i){const t=e.\u0275\u0275nextContext();e.\u0275\u0275property("data",t.hosts)("columns",t.columns)("searchableObjects",!0)("hasDetails",t.hasTableDetails)("serverSide",!0)("count",t.count)("maxLimit",25)("toolHeader",!t.hideToolHeader),e.\u0275\u0275advance(3),e.\u0275\u0275property("permission",t.permissions.hosts)("selection",t.selection)("tableActions",t.tableActions),e.\u0275\u0275advance(),e.\u0275\u0275property("permission",t.permissions.hosts)("selection",t.selection)("tableActions",t.expandClusterActions)}}function xg(i,n){1&i&&e.\u0275\u0275elementContainer(0,16)}function Ug(i,n){1&i&&e.\u0275\u0275element(0,"cd-grafana",28),2&i&&e.\u0275\u0275property("grafanaPath","host-overview?")("type","metrics")}function wg(i,n){1&i&&(e.\u0275\u0275elementContainerStart(0,16),e.\u0275\u0275elementStart(1,"a",17),e.\u0275\u0275i18n(2,10),e.\u0275\u0275elementEnd(),e.\u0275\u0275template(3,Ug,1,2,"ng-template",18),e.\u0275\u0275elementContainerEnd())}function Gg(i,n){if(1&i&&(e.\u0275\u0275elementStart(0,"span"),e.\u0275\u0275element(1,"cd-label",30),e.\u0275\u0275elementEnd()),2&i){const t=n.$implicit;e.\u0275\u0275advance(),e.\u0275\u0275property("key",t.type)("value",t.count)}}function Hg(i,n){if(1&i&&e.\u0275\u0275template(0,Gg,2,2,"span",29),2&i){const t=n.data.value;e.\u0275\u0275property("ngForOf",t)}}function Vg(i,n){if(1&i&&(e.\u0275\u0275elementStart(0,"span",33),e.\u0275\u0275text(1),e.\u0275\u0275elementEnd()),2&i){const t=e.\u0275\u0275nextContext().data.row;e.\u0275\u0275advance(),e.\u0275\u0275textInterpolate1(" (",t.addr,") ")}}function Bg(i,n){if(1&i&&(e.\u0275\u0275elementStart(0,"span",31),e.\u0275\u0275text(1),e.\u0275\u0275elementEnd(),e.\u0275\u0275element(2,"br"),e.\u0275\u0275template(3,Vg,2,1,"span",32)),2&i){const t=n.data.row;e.\u0275\u0275property("ngClass",t),e.\u0275\u0275advance(),e.\u0275\u0275textInterpolate1(" ",t.hostname," "),e.\u0275\u0275advance(2),e.\u0275\u0275property("ngIf",t.addr)}}function zg(i,n){if(1&i&&(e.\u0275\u0275elementStart(0,"ul")(1,"li"),e.\u0275\u0275i18n(2,11),e.\u0275\u0275elementEnd()()),2&i){const t=e.\u0275\u0275nextContext().$implicit;e.\u0275\u0275advance(2),e.\u0275\u0275i18nExp(t),e.\u0275\u0275i18nApply(2)}}function Xg(i,n){if(1&i&&(e.\u0275\u0275elementStart(0,"div"),e.\u0275\u0275template(1,zg,3,1,"ul",34),e.\u0275\u0275elementEnd()),2&i){const t=n.last,o=e.\u0275\u0275nextContext(2);e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf",!t||"1"===o.errorMessage.length)}}function kg(i,n){1&i&&(e.\u0275\u0275elementContainerStart(0),e.\u0275\u0275i18n(1,12),e.\u0275\u0275elementContainerEnd())}function jg(i,n){if(1&i&&e.\u0275\u0275template(0,Xg,2,1,"div",29)(1,kg,2,0,"ng-container",34),2&i){const t=e.\u0275\u0275nextContext();e.\u0275\u0275property("ngForOf",t.errorMessage),e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf",t.showSubmit)}}function Wg(i,n){if(1&i&&(e.\u0275\u0275elementStart(0,"div")(1,"span"),e.\u0275\u0275text(2),e.\u0275\u0275elementEnd()()),2&i){const t=e.\u0275\u0275nextContext().data.value;e.\u0275\u0275advance(2),e.\u0275\u0275textInterpolate(t)}}function Kg(i,n){1&i&&(e.\u0275\u0275elementStart(0,"div")(1,"span",35),e.\u0275\u0275text(2,"-"),e.\u0275\u0275elementEnd()())}function Qg(i,n){if(1&i&&e.\u0275\u0275template(0,Wg,3,1,"div",34)(1,Kg,3,0,"div",34),2&i){const t=n.data.value,o=e.\u0275\u0275nextContext();e.\u0275\u0275property("ngIf",o.validValue(t)),e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf",!o.validValue(t))}}function Yg(i,n){1&i&&(e.\u0275\u0275elementStart(0,"div")(1,"span",35),e.\u0275\u0275text(2,"-"),e.\u0275\u0275elementEnd()())}function Jg(i,n){if(1&i&&(e.\u0275\u0275elementStart(0,"div")(1,"span"),e.\u0275\u0275text(2),e.\u0275\u0275pipe(3,"dimlessBinary"),e.\u0275\u0275elementEnd()()),2&i){const t=e.\u0275\u0275nextContext().data.value;e.\u0275\u0275advance(2),e.\u0275\u0275textInterpolate(e.\u0275\u0275pipeBind1(3,1,t))}}function Zg(i,n){if(1&i&&e.\u0275\u0275template(0,Yg,3,0,"div",34)(1,Jg,4,3,"div",34),2&i){const t=n.data.value,o=e.\u0275\u0275nextContext();e.\u0275\u0275property("ngIf",!o.validValue(t)),e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf",o.validValue(t))}}function qg(i,n){1&i&&(e.\u0275\u0275elementStart(0,"span",36),e.\u0275\u0275i18n(1,13),e.\u0275\u0275elementEnd())}function eC(i,n){1&i&&(e.\u0275\u0275elementStart(0,"span",37),e.\u0275\u0275i18n(1,14),e.\u0275\u0275elementEnd())}class yo extends M.D{constructor(n,t,o,s,d,h,I,$,w){super(),this.authStorageService=n,this.emptyPipe=t,this.hostService=o,this.actionLabels=s,this.taskWrapper=d,this.router=h,this.notificationService=I,this.orchService=$,this.cdsModalService=w,this.sub=new K.Subscription,this.hiddenColumns=[],this.hideMaintenance=!1,this.hasTableDetails=!0,this.hideToolHeader=!1,this.showGeneralActionsOnly=!1,this.showExpandClusterBtn=!0,this.showInlineActions=!0,this.columns=[],this.hosts=[],this.isLoadingHosts=!1,this.cdParams={fromLink:"/hosts"},this.selection=new N.y,this.isExecuting=!1,this.icons=g.FI,this.tableContext=null,this.count=5,this.messages={nonOrchHost:$localize`The feature is disabled because the selected host is not managed by Orchestrator.`},this.actionOrchFeatures={add:[At.HOST_ADD],edit:[At.HOST_LABEL_ADD,At.HOST_LABEL_REMOVE],remove:[At.HOST_REMOVE],maintenance:[At.HOST_MAINTENANCE_ENTER,At.HOST_MAINTENANCE_EXIT],drain:[At.HOST_DRAIN]},this.permissions=this.authStorageService.getPermissions(),this.expandClusterActions=[{name:this.actionLabels.EXPAND_CLUSTER,permission:"create",buttonKind:"secondary",icon:g.FI.expand,routerLink:"/expand-cluster",disable:X=>this.getDisable("add",X),visible:()=>this.showExpandClusterBtn}],this.tableActions=[{name:this.actionLabels.ADD,permission:"create",icon:g.FI.add,click:()=>this.router.url.includes("/hosts")?this.router.navigate(["hosts",{outlets:{modal:[m.Qp.ADD]}}]):this.bsModalRef=this.cdsModalService.show(di,{hideMaintenance:this.hideMaintenance}),disable:X=>this.getDisable("add",X)},{name:this.actionLabels.EDIT,permission:"update",icon:g.FI.edit,click:()=>this.editAction(),disable:X=>this.getDisable("edit",X)},{name:this.actionLabels.START_DRAIN,permission:"update",icon:g.FI.exit,click:()=>this.hostDrain(),disable:X=>this.getDisable("drain",X)||!this.enableDrainBtn,visible:()=>!this.showGeneralActionsOnly&&this.enableDrainBtn},{name:this.actionLabels.STOP_DRAIN,permission:"update",icon:g.FI.exit,click:()=>this.hostDrain(!0),disable:X=>this.getDisable("drain",X)||this.enableDrainBtn,visible:()=>!this.showGeneralActionsOnly&&!this.enableDrainBtn},{name:this.actionLabels.REMOVE,permission:"delete",icon:g.FI.destroy,click:()=>this.deleteAction(),disable:X=>this.getDisable("remove",X)},{name:this.actionLabels.ENTER_MAINTENANCE,permission:"update",icon:g.FI.enter,click:()=>this.hostMaintenance(),disable:X=>this.getDisable("maintenance",X)||this.isExecuting||this.enableMaintenanceBtn,visible:()=>!this.showGeneralActionsOnly&&!this.enableMaintenanceBtn},{name:this.actionLabels.EXIT_MAINTENANCE,permission:"update",icon:g.FI.exit,click:()=>this.hostMaintenance(),disable:X=>this.getDisable("maintenance",X)||this.isExecuting||!this.enableMaintenanceBtn,visible:()=>!this.showGeneralActionsOnly&&this.enableMaintenanceBtn}]}ngOnInit(){this.columns=[{name:$localize`Hostname`,prop:"hostname",flexGrow:1,cellTemplate:this.hostNameTpl},{name:$localize`Service Instances`,prop:"service_instances",flexGrow:1.5,cellTemplate:this.servicesTpl},{name:$localize`Labels`,prop:"labels",flexGrow:1,cellTransformation:b.x.badge,customTemplateConfig:{class:"badge-dark"}},{name:$localize`Status`,prop:"status",flexGrow:.8,cellTransformation:b.x.badge,customTemplateConfig:{map:{maintenance:{class:"badge-warning"},available:{class:"badge-success"}}}},{name:$localize`Model`,prop:"model",flexGrow:1},{name:$localize`CPUs`,prop:"cpu_count",cellTemplate:this.hostMetricTmpl,flexGrow:.3},{name:$localize`Cores`,prop:"cpu_cores",cellTemplate:this.hostMetricTmpl,flexGrow:.3},{name:$localize`Total Memory`,prop:"memory_total_bytes",cellTemplate:this.hostDimlessTmpl,flexGrow:.4},{name:$localize`Raw Capacity`,prop:"raw_capacity",cellTemplate:this.hostDimlessTmpl,flexGrow:.5},{name:$localize`HDDs`,prop:"hdd_count",cellTemplate:this.hostMetricTmpl,flexGrow:.3},{name:$localize`Flash`,prop:"flash_count",headerTemplate:this.flashTmpl,cellTemplate:this.hostMetricTmpl,flexGrow:.3},{name:$localize`NICs`,prop:"nic_count",cellTemplate:this.hostMetricTmpl,flexGrow:.3}],this.columns=this.columns.filter(n=>!this.hiddenColumns.includes(n.prop))}ngOnDestroy(){this.sub.unsubscribe()}updateSelection(n){this.selection=n,this.enableMaintenanceBtn=!1,this.enableDrainBtn=!1,this.selection.hasSelection&&("maintenance"===this.selection.first().status&&(this.enableMaintenanceBtn=!0),this.selection.first().labels.includes("_no_schedule")||(this.enableDrainBtn=!0))}editAction(){this.hostService.getLabels().subscribe(n=>{const t=this.selection.first(),o=new Set(n.concat(this.hostService.predefinedLabels)),s=Array.from(o).map(d=>({content:d,selected:t.labels.includes(d)}));this.cdsModalService.show(Kt.b,{titleText:$localize`Edit Host: ${t.hostname}`,fields:[{type:"select-badges",name:"labels",value:t.labels,label:$localize`Labels`,typeConfig:{customBadges:!0,options:s,messages:new il.z({empty:$localize`There are no labels.`,filter:$localize`Filter or add labels`,add:$localize`Add label`})}}],submitButtonText:$localize`Edit Host`,onSubmit:d=>{this.hostService.update(t.hostname,!0,d.labels).subscribe(()=>{this.notificationService.show(Ae._.success,$localize`Updated Host "${t.hostname}"`),this.table.refreshBtn()})}})})}hostMaintenance(){this.isExecuting=!0;const n=this.selection.first();"maintenance"!==n.status?this.hostService.update(n.hostname,!1,[],!0).subscribe(()=>{this.isExecuting=!1,this.notificationService.show(Ae._.success,$localize`"${n.hostname}" moved to maintenance`),this.table.refreshBtn()},t=>{if(this.isExecuting=!1,this.errorMessage=t.error.detail.split(/\n/),t.preventDefault(),!t.error.detail.includes("WARNING")||t.error.detail.includes("It is NOT safe to stop")||t.error.detail.includes("ALERT")||t.error.detail.includes("unsafe to stop"))this.notificationService.show(Ae._.error,$localize`"${n.hostname}" cannot be put into maintenance`,$localize`${t.error.detail}`);else{const o={titleText:$localize`Warning`,buttonText:$localize`Continue`,warning:!0,bodyTpl:this.maintenanceConfirmTpl,showSubmit:!0,onSubmit:()=>{this.hostService.update(n.hostname,!1,[],!0,!0).subscribe(()=>this.cdsModalService.dismissAll(),()=>this.cdsModalService.dismissAll())}};this.modalRef=this.cdsModalService.show(mn.M,o)}}):this.hostService.update(n.hostname,!1,[],!0).subscribe(()=>{this.isExecuting=!1,this.notificationService.show(Ae._.success,$localize`"${n.hostname}" has exited maintenance`),this.table.refreshBtn()})}hostDrain(n=!1){const t=this.selection.first();if(n){const o=t.labels.indexOf("_no_schedule",0);t.labels.splice(o,1),this.hostService.update(t.hostname,!0,t.labels).subscribe(()=>{this.notificationService.show(Ae._.info,$localize`"${t.hostname}" stopped draining`),this.table.refreshBtn()})}else this.hostService.update(t.hostname,!1,[],!1,!1,!0).subscribe(()=>{this.notificationService.show(Ae._.info,$localize`"${t.hostname}" started draining`),this.table.refreshBtn()})}getDisable(n,t){if("remove"===n||"edit"===n||"maintenance"===n||"drain"===n){if(!t?.hasSingleSelection)return!0;if(!p().every(t.selected,"sources.orchestrator"))return this.messages.nonOrchHost}return this.orchService.getTableActionDisableDesc(this.orchStatus,this.actionOrchFeatures[n])}deleteAction(){const n=this.selection.first().hostname;this.modalRef=this.cdsModalService.show(O.D,{impact:ft.r.high,itemDescription:"Host",itemNames:[n],actionDescription:"remove",submitActionObservable:()=>this.taskWrapper.wrapTaskAroundCall({task:new q.O("host/remove",{hostname:n}),call:this.hostService.delete(n)})})}checkHostsFactsAvailable(){const n=this.orchStatus.features;return!p().isEmpty(n)&&!!n.get_facts.available}transformHostsData(){if(this.checkHostsFactsAvailable())p().forEach(this.hosts,n=>{n.memory_total_bytes=this.emptyPipe.transform(1024*n.memory_total_kb),n.raw_capacity=this.emptyPipe.transform(n.hdd_capacity_bytes+n.flash_capacity_bytes)});else for(let n=4;n<this.columns.length;n++)this.columns[n].cellTemplate=this.orchTmpl}getHosts(n){null!==n&&(this.tableContext=n),null==this.tableContext&&(this.tableContext=new ai.n(()=>{})),!this.isLoadingHosts&&(this.isLoadingHosts=!0,this.sub=this.orchService.status().pipe((0,v.mergeMap)(t=>{this.orchStatus=t;const o=this.checkHostsFactsAvailable();return this.hostService.list(this.tableContext?.toParams(),o.toString())})).subscribe(t=>{this.hosts=t,this.hosts.forEach(o=>{""===o.status&&(o.status="available")}),this.transformHostsData(),this.isLoadingHosts=!1,this.hosts.length>0?this.count=rE.Z.getCount(t[0]):this.count=0},()=>{this.isLoadingHosts=!1,n.error()}))}validValue(n){return Number(n)==n&&n%1==0&&null!=n&&""!==n}static{this.\u0275fac=function(t){return new(t||yo)(e.\u0275\u0275directiveInject(c.v),e.\u0275\u0275directiveInject(Hl.y),e.\u0275\u0275directiveInject(Ht.I),e.\u0275\u0275directiveInject(m.Ss),e.\u0275\u0275directiveInject(B.a),e.\u0275\u0275directiveInject(u.Router),e.\u0275\u0275directiveInject(Q.J),e.\u0275\u0275directiveInject(tn.K),e.\u0275\u0275directiveInject(He.V))}}static{this.\u0275cmp=e.\u0275\u0275defineComponent({type:yo,selectors:[["cd-hosts"]],viewQuery:function(t,o){if(1&t&&(e.\u0275\u0275viewQuery(We.O,5),e.\u0275\u0275viewQuery(Pg,7),e.\u0275\u0275viewQuery(bg,7),e.\u0275\u0275viewQuery(Ng,7),e.\u0275\u0275viewQuery(Ig,7),e.\u0275\u0275viewQuery(Ag,7),e.\u0275\u0275viewQuery(Dg,7),e.\u0275\u0275viewQuery(yg,7)),2&t){let s;e.\u0275\u0275queryRefresh(s=e.\u0275\u0275loadQuery())&&(o.table=s.first),e.\u0275\u0275queryRefresh(s=e.\u0275\u0275loadQuery())&&(o.servicesTpl=s.first),e.\u0275\u0275queryRefresh(s=e.\u0275\u0275loadQuery())&&(o.hostMetricTmpl=s.first),e.\u0275\u0275queryRefresh(s=e.\u0275\u0275loadQuery())&&(o.hostDimlessTmpl=s.first),e.\u0275\u0275queryRefresh(s=e.\u0275\u0275loadQuery())&&(o.maintenanceConfirmTpl=s.first),e.\u0275\u0275queryRefresh(s=e.\u0275\u0275loadQuery())&&(o.orchTmpl=s.first),e.\u0275\u0275queryRefresh(s=e.\u0275\u0275loadQuery())&&(o.flashTmpl=s.first),e.\u0275\u0275queryRefresh(s=e.\u0275\u0275loadQuery())&&(o.hostNameTpl=s.first)}},inputs:{hiddenColumns:"hiddenColumns",hideMaintenance:"hideMaintenance",hasTableDetails:"hasTableDetails",hideToolHeader:"hideToolHeader",showGeneralActionsOnly:"showGeneralActionsOnly",showExpandClusterBtn:"showExpandClusterBtn",showInlineActions:"showInlineActions"},features:[e.\u0275\u0275ProvidersFeature([{provide:z.E,useValue:new z.E("hosts")}]),e.\u0275\u0275InheritDefinitionFeature],decls:24,vars:3,consts:()=>{let n,t,o,s,d,h,I,$,w;return n=$localize`:␟40661476cb24c89d8b06614998e31d5fbe84eeb6␟5440662980011100752:Hosts List`,t=$localize`:␟5e7f4b1ca49e8d217bd0e12c6f7d6b6a2ade2c18␟4352555506458562289:Overall Performance`,o=$localize`:␟e3638e813c6a583c5e345f61c2d9e3526fe1b2ff␟5619607829369837504:Host overview`,s=$localize`:␟b7a4e1e5a316f8547af1d6d2311a5cec8c5c1d87␟3960101812844258040:${"\ufffd0\ufffd"}:INTERPOLATION:`,d=$localize`:␟7d1dcf2a9146caac0581329acf94806ec69a89a5␟1877522221356492058:Are you sure you want to continue?`,h=$localize`:␟e6e8e8844e9e7a7b626a4699c08b6c0c81297a7b␟2418120038454196116:Data will be available only if Orchestrator is available.`,I=$localize`:␟37a0c0fffef57ba4b1fe7bf2318fc9211267286e␟8590109102084543521:-`,$=$localize`:␟d4baf526199fed59071adf555271791283adc408␟221246938472929738:SSD, NVMEs`,w=$localize`:␟22d5531d79f0d7269a0a752e56a848807dd37095␟1889285841762768492:Flash`,[["nav","ngbNav"],["servicesTpl",""],["hostNameTpl",""],["maintenanceConfirmTpl",""],["hostMetricTmpl",""],["hostDimlessTmpl",""],["orchTmpl",""],["flashTmpl",""],["table",""],n,t,s,d,I,w,["ngbNav","",1,"nav-tabs"],["ngbNavItem",""],["ngbNavLink",""],["ngbNavContent",""],["ngbNavItem","",4,"ngIf"],[3,"ngbNavOutlet"],["name","modal"],["columnMode","flex","selectionType","single",3,"fetchData","setExpandedRow","updateSelection","data","columns","searchableObjects","hasDetails","serverSide","count","maxLimit","toolHeader"],[1,"table-actions"],["id","host-actions",1,"btn-group",3,"permission","selection","tableActions"],["btnColor","light",1,"btn-group",3,"permission","selection","tableActions"],[3,"permissions","selection",4,"cdTableDetail"],[3,"permissions","selection"],["title",o,"uid","y0KGL0iZz","grafanaStyle","two",3,"grafanaPath","type"],[4,"ngFor","ngForOf"],[1,"me-1",3,"key","value"],[3,"ngClass"],["class","text-muted fst-italic",4,"ngIf"],[1,"text-muted","fst-italic"],[4,"ngIf"],["ngbTooltip","Not available. Data could not be fetched from Ceph"],["ngbTooltip",h],["ngbTooltip",$]]},template:function(t,o){if(1&t&&(e.\u0275\u0275elementStart(0,"nav",15,0),e.\u0275\u0275elementContainerStart(2,16),e.\u0275\u0275elementStart(3,"a",17),e.\u0275\u0275i18n(4,9),e.\u0275\u0275elementEnd(),e.\u0275\u0275template(5,$g,6,14,"ng-template",18),e.\u0275\u0275elementContainerEnd(),e.\u0275\u0275template(6,xg,1,0,"ng-container",19)(7,wg,4,0,"ng-container",19),e.\u0275\u0275elementEnd(),e.\u0275\u0275element(8,"div",20),e.\u0275\u0275template(9,Hg,1,1,"ng-template",null,1,e.\u0275\u0275templateRefExtractor)(11,Bg,4,3,"ng-template",null,2,e.\u0275\u0275templateRefExtractor)(13,jg,2,2,"ng-template",null,3,e.\u0275\u0275templateRefExtractor)(15,Qg,2,2,"ng-template",null,4,e.\u0275\u0275templateRefExtractor)(17,Zg,2,2,"ng-template",null,5,e.\u0275\u0275templateRefExtractor)(19,qg,2,0,"ng-template",null,6,e.\u0275\u0275templateRefExtractor)(21,eC,2,0,"ng-template",null,7,e.\u0275\u0275templateRefExtractor),e.\u0275\u0275element(23,"router-outlet",21)),2&t){const s=e.\u0275\u0275reference(1);e.\u0275\u0275advance(6),e.\u0275\u0275property("ngIf",o.permissions.grafana.read),e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf",o.permissions.grafana.read),e.\u0275\u0275advance(),e.\u0275\u0275property("ngbNavOutlet",s)}},dependencies:[l.NgClass,l.NgForOf,l.NgIf,G.NgbNavContent,G.NgbNav,G.NgbNavItem,G.NgbNavLink,G.NgbNavLinkBase,G.NgbNavOutlet,Tt.c,be,We.O,at.j,Et.N,u.RouterOutlet,G.NgbTooltip,us,pt.l]})}}const tC=()=>["service_instances","status"];function nC(i,n){if(1&i&&(e.\u0275\u0275elementStart(0,"tr")(1,"td")(2,"dl")(3,"dt")(4,"p"),e.\u0275\u0275i18n(5,6),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(6,"dd")(7,"p"),e.\u0275\u0275i18n(8,7),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(9,"dd")(10,"p"),e.\u0275\u0275i18n(11,8),e.\u0275\u0275elementEnd()()()(),e.\u0275\u0275elementStart(12,"td",18)(13,"p"),e.\u0275\u0275text(14),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(15,"p"),e.\u0275\u0275text(16),e.\u0275\u0275pipe(17,"dimlessBinary"),e.\u0275\u0275elementEnd()()()),2&i){const t=e.\u0275\u0275nextContext();e.\u0275\u0275advance(14),e.\u0275\u0275textInterpolate(t.totalDevices),e.\u0275\u0275advance(2),e.\u0275\u0275textInterpolate1(" ",e.\u0275\u0275pipeBind1(17,2,t.totalCapacity),"")}}function oC(i,n){if(1&i&&(e.\u0275\u0275elementStart(0,"tr")(1,"td")(2,"dl")(3,"dt")(4,"p"),e.\u0275\u0275i18n(5,9),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(6,"dd")(7,"p"),e.\u0275\u0275i18n(8,10),e.\u0275\u0275elementEnd()()()()()),2&i){const t=e.\u0275\u0275nextContext();e.\u0275\u0275advance(8),e.\u0275\u0275i18nExp(t.deploymentDescText),e.\u0275\u0275i18nApply(8)}}class ps{constructor(n,t,o,s,d){this.wizardStepsService=n,this.cephServiceService=t,this.dimlessBinary=o,this.hostService=s,this.osdService=d,this.hosts=[],this.totalCapacity=0,this.services=[],this.totalCPUs=0,this.totalMemory=0,this.isSimpleDeployment=!0}ngOnInit(){let n=0,t=0,o=0,s=0,d=0,h=0;this.isSimpleDeployment=this.osdService.isDeployementModeSimple;const I=new ai.n(()=>{});this.hostService.list(I.toParams(),"true").subscribe($=>{this.hosts=$,this.hostsCount=this.hosts.length,p().forEach(this.hosts,w=>{this.totalCPUs=this.totalCPUs+w.cpu_count,this.totalMemory=this.totalMemory+1024*w.memory_total_kb}),this.totalMemory=this.dimlessBinary.transform(this.totalMemory)}),this.osdService.osdDevices.data&&(n=this.osdService.osdDevices.data?.length,t=this.osdService.osdDevices.data.capacity),this.osdService.osdDevices.wal&&(o=this.osdService.osdDevices.wal?.length,s=this.osdService.osdDevices.wal.capacity),this.osdService.osdDevices.db&&(d=this.osdService.osdDevices.db?.length,h=this.osdService.osdDevices.db.capacity),this.isSimpleDeployment&&this.osdService.getDeploymentOptions().subscribe($=>{p().isEmpty($)||Object.keys($.options).forEach(w=>{this.osdService.selectedFormValues&&this.osdService.selectedFormValues.get("deploymentOption").value===w&&(this.deploymentDescText=$.options[w].desc)})}),this.totalDevices=n+o+d,this.osdService.osdDevices.totalDevices=this.totalDevices,this.totalCapacity=t+s+h}static{this.\u0275fac=function(t){return new(t||ps)(e.\u0275\u0275directiveInject(nl.m),e.\u0275\u0275directiveInject(si.t),e.\u0275\u0275directiveInject(pt.l),e.\u0275\u0275directiveInject(Ht.I),e.\u0275\u0275directiveInject(Ct))}}static{this.\u0275cmp=e.\u0275\u0275defineComponent({type:ps,selectors:[["cd-create-cluster-review"]],decls:32,vars:16,consts:()=>{let n,t,o,s,d,h,I,$,w,X;return n=$localize`:␟62b266042bac4c3a2eff4834e40fb9dc4767a709␟1672833822498778562:Cluster Resources`,t=$localize`:␟099b441d49333b3c6d30b36dc0a4763e64c78920␟4435206372750903836:Hosts`,o=$localize`:␟fb6f3e2a26f3a6f2bc33f91adcd60502dbe5adac␟4027647877328291519:CPUs`,s=$localize`:␟58d4a9814864741040bc5905b6a368836e683f76␟1548129644093494406:Memory`,d=$localize`:␟dbb81e566a861d4aa0a094366e4083e50863ee92␟4553130505019039520:Host Details`,h=$localize`:␟57e6e608ece53a26f6d509c90ed4f83e467741af␟271534463283595544:Storage Capacity`,I=$localize`:␟19ece2cb2b9097c0f75af8e62b4b3b25d399a006␟2869934204931600128:Number of devices`,$=$localize`:␟b161e3d25fd1b42a781f4e923a58a94925988ddf␟2961293007857933370:Raw capacity`,w=$localize`:␟57e6e608ece53a26f6d509c90ed4f83e467741af␟271534463283595544:Storage Capacity`,X=$localize`:␟d1ef212ae133e173d7773798b16375bf8a39f040␟7995425020012633103:${"\ufffd0\ufffd"}:INTERPOLATION:`,[["simpleDeploymentTextTpl",""],n,t,o,s,d,h,I,$,w,X,["cdsRow",""],["cdsCol",""],[1,"cd-header"],[1,"cds--data-table--sort","cds--data-table--no-border","cds--data-table","cds--data-table--md"],[1,"bold"],[4,"ngIf","ngIfElse"],[3,"hiddenColumns","hideToolHeader","hasTableDetails","showGeneralActionsOnly","showExpandClusterBtn","showInlineActions"],[1,"pt-5"]]},template:function(t,o){if(1&t&&(e.\u0275\u0275elementStart(0,"div",11)(1,"div",12)(2,"fieldset")(3,"legend",13),e.\u0275\u0275i18n(4,1),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(5,"table",14)(6,"tbody")(7,"tr")(8,"td",15),e.\u0275\u0275i18n(9,2),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(10,"td"),e.\u0275\u0275text(11),e.\u0275\u0275elementEnd()(),e.\u0275\u0275template(12,nC,18,4,"tr",16),e.\u0275\u0275elementStart(13,"tr")(14,"td",15),e.\u0275\u0275i18n(15,3),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(16,"td"),e.\u0275\u0275text(17),e.\u0275\u0275pipe(18,"empty"),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(19,"tr")(20,"td",15),e.\u0275\u0275i18n(21,4),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(22,"td"),e.\u0275\u0275text(23),e.\u0275\u0275pipe(24,"empty"),e.\u0275\u0275elementEnd()()()()()()(),e.\u0275\u0275elementStart(25,"div",11)(26,"div",12)(27,"legend",13),e.\u0275\u0275i18n(28,5),e.\u0275\u0275elementEnd(),e.\u0275\u0275element(29,"cd-hosts",17),e.\u0275\u0275elementEnd()(),e.\u0275\u0275template(30,oC,9,1,"ng-template",null,0,e.\u0275\u0275templateRefExtractor)),2&t){const s=e.\u0275\u0275reference(31);e.\u0275\u0275advance(11),e.\u0275\u0275textInterpolate(o.hostsCount),e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf",!o.isSimpleDeployment)("ngIfElse",s),e.\u0275\u0275advance(5),e.\u0275\u0275textInterpolate(e.\u0275\u0275pipeBind1(18,11,o.totalCPUs)),e.\u0275\u0275advance(6),e.\u0275\u0275textInterpolate(e.\u0275\u0275pipeBind1(24,13,o.totalMemory)),e.\u0275\u0275advance(6),e.\u0275\u0275property("hiddenColumns",e.\u0275\u0275pureFunction0(15,tC))("hideToolHeader",!0)("hasTableDetails",!1)("showGeneralActionsOnly",!0)("showExpandClusterBtn",!1)("showInlineActions",!1)}},dependencies:[l.NgIf,D.ColumnDirective,D.RowDirective,yo,pt.l,Hl.y],styles:["cd-hosts[_ngcontent-%COMP%]     .nav{display:none}"]})}}const iC=["skipConfirmTpl"],aC=()=>({lg:2,md:2,sm:2}),sC=()=>({lg:14,md:14,sm:14}),rC=()=>["service_instances"],lC=()=>["mon","mgr","crash","agent"],_C=()=>["status.running","status.size","status.last_refresh"];function cC(i,n){if(1&i){const t=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"div",15)(1,"div",16)(2,"div",17),e.\u0275\u0275element(3,"img",18),e.\u0275\u0275elementStart(4,"h3",19),e.\u0275\u0275i18n(5,1),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(6,"div",20)(7,"h4",21),e.\u0275\u0275i18n(8,2),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(9,"div",21)(10,"button",22),e.\u0275\u0275listener("click",function(){e.\u0275\u0275restoreView(t);const s=e.\u0275\u0275nextContext();return e.\u0275\u0275resetView(s.createCluster())}),e.\u0275\u0275i18n(11,3),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(12,"button",23),e.\u0275\u0275listener("click",function(){e.\u0275\u0275restoreView(t);const s=e.\u0275\u0275nextContext();return e.\u0275\u0275resetView(s.skipClusterCreation())}),e.\u0275\u0275i18n(13,4),e.\u0275\u0275elementEnd()()()()()()}if(2&i){const t=e.\u0275\u0275nextContext();e.\u0275\u0275advance(3),e.\u0275\u0275property("src",t.projectConstants.cephLogo,e.\u0275\u0275sanitizeUrl),e.\u0275\u0275advance(2),e.\u0275\u0275i18nExp(t.projectConstants.projectName),e.\u0275\u0275i18nApply(5)}}function dC(i,n){1&i&&(e.\u0275\u0275elementStart(0,"div",35)(1,"h4",36),e.\u0275\u0275i18n(2,7),e.\u0275\u0275elementEnd(),e.\u0275\u0275element(3,"cd-hosts",37),e.\u0275\u0275elementEnd()),2&i&&(e.\u0275\u0275advance(3),e.\u0275\u0275property("hiddenColumns",e.\u0275\u0275pureFunction0(5,rC))("hideMaintenance",!0)("hasTableDetails",!1)("showGeneralActionsOnly",!0)("showExpandClusterBtn",!1))}function uC(i,n){if(1&i){const t=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"div",35)(1,"h4",36),e.\u0275\u0275i18n(2,8),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(3,"div",38)(4,"cd-osd-form",39),e.\u0275\u0275listener("emitDriveGroup",function(s){e.\u0275\u0275restoreView(t);const d=e.\u0275\u0275nextContext(2);return e.\u0275\u0275resetView(d.setDriveGroup(s))})("emitDeploymentOption",function(s){e.\u0275\u0275restoreView(t);const d=e.\u0275\u0275nextContext(2);return e.\u0275\u0275resetView(d.setDeploymentOptions(s))})("emitMode",function(s){e.\u0275\u0275restoreView(t);const d=e.\u0275\u0275nextContext(2);return e.\u0275\u0275resetView(d.setDeploymentMode(s))}),e.\u0275\u0275elementEnd()()()}2&i&&(e.\u0275\u0275advance(4),e.\u0275\u0275property("hideTitle",!0)("hideSubmitBtn",!0))}function pC(i,n){1&i&&(e.\u0275\u0275elementStart(0,"div",35)(1,"h4",36),e.\u0275\u0275i18n(2,9),e.\u0275\u0275elementEnd(),e.\u0275\u0275element(3,"cd-services",40),e.\u0275\u0275elementEnd()),2&i&&(e.\u0275\u0275advance(3),e.\u0275\u0275property("hasDetails",!1)("hiddenServices",e.\u0275\u0275pureFunction0(4,lC))("hiddenColumns",e.\u0275\u0275pureFunction0(5,_C))("routedModal",!1))}function mC(i,n){1&i&&(e.\u0275\u0275elementStart(0,"div",35),e.\u0275\u0275element(1,"cd-create-cluster-review"),e.\u0275\u0275elementEnd())}function fC(i,n){if(1&i){const t=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"button",41),e.\u0275\u0275listener("click",function(){e.\u0275\u0275restoreView(t);const s=e.\u0275\u0275nextContext(2);return e.\u0275\u0275resetView(s.onSkip())}),e.\u0275\u0275i18n(1,10),e.\u0275\u0275elementEnd()}}function EC(i,n){if(1&i){const t=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"div",24)(1,"div",25)(2,"div",26),e.\u0275\u0275i18n(3,5),e.\u0275\u0275elementEnd(),e.\u0275\u0275element(4,"cd-wizard",27),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(5,"div",28),e.\u0275\u0275elementContainerStart(6,29),e.\u0275\u0275template(7,dC,4,6,"div",30)(8,uC,5,2,"div",30)(9,pC,4,6,"div",30)(10,mC,2,0,"div",30),e.\u0275\u0275elementContainerEnd(),e.\u0275\u0275elementStart(11,"div",31),e.\u0275\u0275template(12,fC,2,0,"button",32),e.\u0275\u0275elementStart(13,"cd-back-button",33),e.\u0275\u0275listener("backAction",function(){e.\u0275\u0275restoreView(t);const s=e.\u0275\u0275nextContext();return e.\u0275\u0275resetView(s.onPreviousStep())}),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(14,"button",34),e.\u0275\u0275listener("click",function(){e.\u0275\u0275restoreView(t);const s=e.\u0275\u0275nextContext();return e.\u0275\u0275resetView(s.onNextStep())}),e.\u0275\u0275i18n(15,6),e.\u0275\u0275elementEnd()()()()}if(2&i){const t=e.\u0275\u0275nextContext();e.\u0275\u0275advance(),e.\u0275\u0275property("columnNumbers",e.\u0275\u0275pureFunction0(11,aC)),e.\u0275\u0275advance(3),e.\u0275\u0275property("stepsTitle",t.stepTitles),e.\u0275\u0275advance(),e.\u0275\u0275property("columnNumbers",e.\u0275\u0275pureFunction0(12,sC)),e.\u0275\u0275advance(),e.\u0275\u0275property("ngSwitch",null==t.currentStep?null:t.currentStep.stepIndex),e.\u0275\u0275advance(),e.\u0275\u0275property("ngSwitchCase",0),e.\u0275\u0275advance(),e.\u0275\u0275property("ngSwitchCase",1),e.\u0275\u0275advance(),e.\u0275\u0275property("ngSwitchCase",2),e.\u0275\u0275advance(),e.\u0275\u0275property("ngSwitchCase",3),e.\u0275\u0275advance(2),e.\u0275\u0275property("ngIf","Create OSDs"===(null==t.stepTitles[null==t.currentStep?null:t.currentStep.stepIndex]?null:t.stepTitles[null==t.currentStep?null:t.currentStep.stepIndex].label)),e.\u0275\u0275advance(),e.\u0275\u0275property("name",t.showCancelButtonLabel()),e.\u0275\u0275advance(2),e.\u0275\u0275i18nExp(t.showSubmitButtonLabel()),e.\u0275\u0275i18nApply(15)}}function gC(i,n){1&i&&(e.\u0275\u0275elementStart(0,"span"),e.\u0275\u0275i18nStart(1,11),e.\u0275\u0275element(2,"strong"),e.\u0275\u0275i18nEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(3,"div",42),e.\u0275\u0275i18n(4,12),e.\u0275\u0275elementEnd())}class ms{constructor(n,t,o,s,d,h,I,$,w,X,J,re,de){this.authStorageService=n,this.wizardStepsService=t,this.router=o,this.hostService=s,this.notificationService=d,this.actionLabels=h,this.clusterService=I,this.modalService=$,this.taskWrapper=w,this.osdService=X,this.route=J,this.location=re,this.changeDetectorRef=de,this.projectConstants=m.D5,this.stepTitles=[{label:"Add Hosts"},{label:"Create OSDs",complete:!1},{label:"Create Services",complete:!1},{label:"Review",complete:!1}],this.startClusterCreation=!1,this.observables=[],this.driveGroup=new Il,this.driveGroups=[],this.selectedOption={},this.simpleDeployment=!0,this.stepsToSkip={},this.submitAction=new e.EventEmitter,this.permissions=this.authStorageService.getPermissions(),this.currentStepSub=this.wizardStepsService.getCurrentStep().subscribe(Me=>{this.currentStep=Me}),this.currentStep.stepIndex=0}ngAfterViewInit(){this.changeDetectorRef.detectChanges()}ngOnInit(){this.stepTitles.forEach((n,t)=>{n.onClick=()=>this.currentStep.stepIndex=t}),this.route.queryParams.subscribe(n=>{const t=n.welcome;t&&(this.startClusterCreation=t)}),this.osdService.getDeploymentOptions().subscribe(n=>{this.deploymentOption=n,this.selectedOption={option:n.recommended_option,encrypted:!1}}),this.stepTitles.forEach(n=>{this.stepsToSkip[n.label]=!1})}onStepClick(n){this.wizardStepsService.setCurrentStep(n)}createCluster(){this.startClusterCreation=!1}skipClusterCreation(){const n={titleText:$localize`Warning`,buttonText:$localize`Continue`,warning:!0,bodyTpl:this.skipConfirmTpl,showSubmit:!0,onSubmit:()=>{this.clusterService.updateStatus("POST_INSTALLED").subscribe({error:()=>this.modalService.dismissAll(),complete:()=>{this.notificationService.show(Ae._.info,$localize`Cluster expansion skipped by user`),this.router.navigate(["/dashboard"]),this.modalService.dismissAll()}})}};this.modalService.show(mn.M,n)}onSubmit(){if(!this.stepsToSkip["Add Hosts"]){const n=new ai.n(()=>{});this.hostService.list(n.toParams(),"false").subscribe(t=>{t.forEach(o=>{const s=o.labels.indexOf("_no_schedule",0);s>-1&&(o.labels.splice(s,1),this.observables.push(this.hostService.update(o.hostname,!0,o.labels)))}),(0,K.forkJoin)(this.observables).pipe((0,v.finalize)(()=>this.clusterService.updateStatus("POST_INSTALLED").subscribe(()=>{this.notificationService.show(Ae._.success,$localize`Cluster expansion was successful`),this.router.navigate(["/dashboard"])}))).subscribe({error:o=>o.preventDefault()})})}if(!this.stepsToSkip["Create OSDs"]){if(this.driveGroup){const n=this.authStorageService.getUsername();this.driveGroup.setName(`dashboard-${n}-${p().now()}`),this.driveGroups.push(this.driveGroup.spec)}if(this.simpleDeployment){const n=this.deploymentOption?.options[this.selectedOption.option].title,t=$localize`${n} deployment`;this.taskWrapper.wrapTaskAroundCall({task:new q.O("osd/"+m.Qp.CREATE,{tracking_id:t}),call:this.osdService.create([this.selectedOption],t,"predefined")}).subscribe({error:o=>o.preventDefault(),complete:()=>{this.submitAction.emit()}})}else if(this.osdService.osdDevices.totalDevices>0){this.driveGroup.setFeature("encrypted",this.selectedOption.encrypted);const n=p().join(p().map(this.driveGroups,"service_id"),", ");this.taskWrapper.wrapTaskAroundCall({task:new q.O("osd/"+m.Qp.CREATE,{tracking_id:n}),call:this.osdService.create(this.driveGroups,n)}).subscribe({error:t=>t.preventDefault(),complete:()=>{this.submitAction.emit(),this.osdService.osdDevices=[]}})}}}setDriveGroup(n){this.driveGroup=n}setDeploymentOptions(n){this.selectedOption=n}setDeploymentMode(n){this.simpleDeployment=n}onNextStep(){this.wizardStepsService.isLastStep()?this.onSubmit():(this.wizardStepsService.getCurrentStep().subscribe(n=>{this.currentStep=n}),this.wizardStepsService.moveToNextStep())}onPreviousStep(){this.wizardStepsService.isFirstStep()?this.location.back():this.wizardStepsService.moveToPreviousStep()}onSkip(){const n=this.stepTitles[this.currentStep.stepIndex];this.stepsToSkip[n.label]=!0,this.onNextStep()}showSubmitButtonLabel(){return this.wizardStepsService.isLastStep()?$localize`Expand Cluster`:this.actionLabels.NEXT}showCancelButtonLabel(){return this.wizardStepsService.isFirstStep()?this.actionLabels.CANCEL:this.actionLabels.BACK}ngOnDestroy(){this.currentStepSub.unsubscribe(),this.osdService.selectedFormValues=null}static{this.\u0275fac=function(t){return new(t||ms)(e.\u0275\u0275directiveInject(c.v),e.\u0275\u0275directiveInject(nl.m),e.\u0275\u0275directiveInject(u.Router),e.\u0275\u0275directiveInject(Ht.I),e.\u0275\u0275directiveInject(Q.J),e.\u0275\u0275directiveInject(m.Ss),e.\u0275\u0275directiveInject(ii),e.\u0275\u0275directiveInject(He.V),e.\u0275\u0275directiveInject(B.a),e.\u0275\u0275directiveInject(Ct),e.\u0275\u0275directiveInject(u.ActivatedRoute),e.\u0275\u0275directiveInject(l.Location),e.\u0275\u0275directiveInject(e.ChangeDetectorRef))}}static{this.\u0275cmp=e.\u0275\u0275defineComponent({type:ms,selectors:[["cd-create-cluster"]],viewQuery:function(t,o){if(1&t&&e.\u0275\u0275viewQuery(iC,7),2&t){let s;e.\u0275\u0275queryRefresh(s=e.\u0275\u0275loadQuery())&&(o.skipConfirmTpl=s.first)}},outputs:{submitAction:"submitAction"},decls:4,vars:2,consts:()=>{let n,t,o,s,d,h,I,$,w,X,J,re;return n=$localize`:␟453dc2810080a744223faac6da2b3ee9ed63a583␟5329259221155114698:Welcome to ${"\ufffd0\ufffd"}:INTERPOLATION:`,t=$localize`:␟d1eec874e1928ca53baa9914781ce203b5f72b0c␟1475639034324532424:Please expand your cluster first`,o=$localize`:␟a2195fd96b0a00f560449b50bd032e6d9b357730␟2176230351113290618:Expand Cluster`,s=$localize`:␟eb075d0450deb6f381616f7da4b9244ced843053␟4563965495368336177:Skip`,d=$localize`:␟a2195fd96b0a00f560449b50bd032e6d9b357730␟2176230351113290618:Expand Cluster`,h=$localize`:␟176873b4533ddeabf95992cbd7b91b9d01c6d557␟5965337929506718932:${"\ufffd0\ufffd"}:INTERPOLATION:`,I=$localize`:␟55b6ce65571b8893440a4fc92776570f8fe7cc97␟1627256310175522287:Add Hosts`,$=$localize`:␟162f763675c24b557a60eba0758558222369e0c7␟7104564575539526708:Create OSDs`,w=$localize`:␟fef7a7b8db05c351c5287db48488abca530bdb54␟8922582554481662245:Create Services`,X=$localize`:␟eb075d0450deb6f381616f7da4b9244ced843053␟4563965495368336177:Skip`,J=$localize`:␟1ed90ec4409b9f6b552982d96f89db27259e763c␟692120749391861296:You are about to skip the cluster expansion process. You’ll need to ${"\ufffd#2\ufffd"}:START_TAG_STRONG:navigate through the menu to add hosts and services.${"\ufffd/#2\ufffd"}:CLOSE_TAG_STRONG:`,re=$localize`:␟7d1dcf2a9146caac0581329acf94806ec69a89a5␟1877522221356492058:Are you sure you want to continue?`,[["skipConfirmTpl",""],n,t,o,s,d,h,I,$,w,X,J,re,["class","container h-75",4,"ngIf"],["cdsRow","","class","form",4,"ngIf"],[1,"container","h-75"],["cdsRow","",1,"h-100","justify-content-center","align-items-center"],[1,"blank-page"],["alt","Ceph",1,"img-fluid","mx-auto","d-block",3,"src"],[1,"text-center","m-2"],[1,"m-4"],[1,"text-center"],["cdsButton","primary","name","expand-cluster","aria-label","Expand Cluster",3,"click"],["cdsButton","secondary","name","skip-cluster-creation","aria-label","Skip",3,"click"],["cdsRow","",1,"form"],["cdsCol","",1,"indicator-wrapper",3,"columnNumbers"],[1,"form-header"],[3,"stepsTitle"],["cdsCol","",3,"columnNumbers"],[3,"ngSwitch"],["class","ms-5",4,"ngSwitchCase"],["cdsRow","",1,"m-5"],["cdsButton","secondary","class","me-3","id","skipStepBtn","aria-label","Skip this step",3,"click",4,"ngIf"],["buttonType","secondary","aria-label","Close",3,"backAction","name"],["cdsButton","primary","aria-label","Next",3,"click"],[1,"ms-5"],[1,"title"],[3,"hiddenColumns","hideMaintenance","hasTableDetails","showGeneralActionsOnly","showExpandClusterBtn"],[1,"alignForm"],[3,"emitDriveGroup","emitDeploymentOption","emitMode","hideTitle","hideSubmitBtn"],[3,"hasDetails","hiddenServices","hiddenColumns","routedModal"],["cdsButton","secondary","id","skipStepBtn","aria-label","Skip this step",1,"me-3",3,"click"],[1,"mt-4"]]},template:function(t,o){1&t&&e.\u0275\u0275template(0,cC,14,2,"div",13)(1,EC,16,13,"div",14)(2,gC,5,0,"ng-template",null,0,e.\u0275\u0275templateRefExtractor),2&t&&(e.\u0275\u0275property("ngIf",o.startClusterCreation),e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf",!o.startClusterCreation))},dependencies:[l.NgIf,l.NgSwitch,l.NgSwitchCase,mp.X,fp.t,Ge.S,D.ColumnDirective,D.RowDirective,D.Button,_i,ci,ps,yo],styles:[".container-fluid[_ngcontent-%COMP%]{align-items:flex-start;display:flex;padding-left:0;width:100%}cd-hosts[_ngcontent-%COMP%]     .nav{display:none}cd-osd-form[_ngcontent-%COMP%]     .card{border:0}cd-osd-form[_ngcontent-%COMP%]     .accordion{margin-left:-1.5rem}"]})}}var CC=r(17612);const SC=["tree"],hC=["badge"],TC=(i,n,t)=>[i,n,t],FC=(i,n)=>({node:i,depth:n}),vC=i=>({"type-osd":i}),MC=()=>["in","up"],RC=()=>["down","out","destroyed"],OC=(i,n)=>({"badge-success":i,"badge-danger":n}),PC=i=>({node:i,depth:0});function bC(i,n){if(1&i&&e.\u0275\u0275element(0,"i",14),2&i){const t=e.\u0275\u0275nextContext();e.\u0275\u0275property("ngClass",e.\u0275\u0275pureFunction3(1,TC,t.icons.large,t.icons.spinner,t.icons.spin))}}function NC(i,n){1&i&&e.\u0275\u0275elementContainer(0)}function IC(i,n){if(1&i&&(e.\u0275\u0275elementContainerStart(0),e.\u0275\u0275template(1,NC,1,0,"ng-container",17),e.\u0275\u0275elementContainerEnd()),2&i){const t=n.$implicit,o=e.\u0275\u0275nextContext(2).depth;e.\u0275\u0275nextContext();const s=e.\u0275\u0275reference(12);e.\u0275\u0275advance(),e.\u0275\u0275property("ngTemplateOutlet",s)("ngTemplateOutletContext",e.\u0275\u0275pureFunction2(2,FC,t,o+1))}}function AC(i,n){if(1&i&&(e.\u0275\u0275elementContainerStart(0),e.\u0275\u0275template(1,IC,2,5,"ng-container",12),e.\u0275\u0275elementContainerEnd()),2&i){const t=e.\u0275\u0275nextContext().node;e.\u0275\u0275advance(),e.\u0275\u0275property("ngForOf",t.children)}}function DC(i,n){if(1&i&&(e.\u0275\u0275elementStart(0,"cds-tree-node",15),e.\u0275\u0275template(1,AC,2,1,"ng-container",16),e.\u0275\u0275elementEnd()),2&i){const t=n.node,o=n.depth;e.\u0275\u0275property("node",t)("depth",o),e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf",(null==t?null:t.children)&&(null==t||null==t.children?null:t.children.length))}}function yC(i,n){if(1&i&&(e.\u0275\u0275elementStart(0,"span",20),e.\u0275\u0275text(1),e.\u0275\u0275elementEnd()),2&i){const t=e.\u0275\u0275nextContext().$implicit;e.\u0275\u0275property("ngClass",e.\u0275\u0275pureFunction2(4,OC,e.\u0275\u0275pureFunction0(2,MC).includes(null==t?null:t.status),e.\u0275\u0275pureFunction0(3,RC).includes(null==t?null:t.status))),e.\u0275\u0275advance(),e.\u0275\u0275textInterpolate1(" ",t.status," ")}}function LC(i,n){if(1&i&&(e.\u0275\u0275template(0,yC,2,7,"span",18),e.\u0275\u0275elementStart(1,"span"),e.\u0275\u0275text(2,"\xa0"),e.\u0275\u0275elementEnd(),e.\u0275\u0275element(3,"span",19)),2&i){const t=n.$implicit;e.\u0275\u0275property("ngIf",null==t?null:t.status),e.\u0275\u0275advance(3),e.\u0275\u0275property("ngClass",e.\u0275\u0275pureFunction1(3,vC,"osd"===(null==t?null:t.type)))("innerHTML",null==t?null:t.name,e.\u0275\u0275sanitizeHtml)}}function $C(i,n){1&i&&e.\u0275\u0275elementContainer(0)}function xC(i,n){if(1&i&&(e.\u0275\u0275elementContainerStart(0),e.\u0275\u0275template(1,$C,1,0,"ng-container",17),e.\u0275\u0275elementContainerEnd()),2&i){const t=n.$implicit;e.\u0275\u0275nextContext();const o=e.\u0275\u0275reference(12);e.\u0275\u0275advance(),e.\u0275\u0275property("ngTemplateOutlet",o)("ngTemplateOutletContext",e.\u0275\u0275pureFunction1(2,PC,t))}}function UC(i,n){if(1&i&&(e.\u0275\u0275elementStart(0,"div",21)(1,"legend"),e.\u0275\u0275text(2),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(3,"div"),e.\u0275\u0275element(4,"cd-table-key-value",22),e.\u0275\u0275elementEnd()()),2&i){const t=e.\u0275\u0275nextContext();e.\u0275\u0275advance(2),e.\u0275\u0275textInterpolate(t.metadataTitle),e.\u0275\u0275advance(2),e.\u0275\u0275property("data",t.metadata)}}class fs{constructor(n,t){this.crushRuleService=n,this.timerService=t,this.sub=new K.Subscription,this.icons=g.FI,this.loadingIndicator=!0,this.nodes=[],this.metadataKeyMap={}}ngOnInit(){this.sub=this.timerService.get(()=>this.crushRuleService.getInfo(),5e3).subscribe(n=>{this.loadingIndicator=!1,this.nodes=this.abstractTreeData(n)})}ngOnDestroy(){this.sub.unsubscribe()}abstractTreeData(n){const t=n.nodes||[],o=n.roots||[],s={};if(0===t.length)return[{label:"No nodes!"}];const d=[];return t.reverse().forEach(I=>{o.includes(I.id)&&d.push(I.id),s[I.id]=this.generateTreeLeaf(I,s)}),d.map(I=>s[I])}generateTreeLeaf(n,t){const o=n.id;this.metadataKeyMap[o]=n;const s=n.name+" ("+n.type+")",d=n.status,h=[],I={label:this.labelTpl,labelContext:{name:s,status:d,type:n?.type},value:s,id:o,expanded:!0,name:s,status:d,cdId:o,type:n.type};return n?.children?.length&&(n.children.sort().forEach($=>{h.push(t[$])}),I.children=h),I}onNodeSelected(n){if(void 0!==n.id){const{name:t,type:o,status:s,...d}=this.metadataKeyMap[Number(n.id)];this.metadata=d,this.metadataTitle=t+" ("+o+")"}else delete this.metadata,delete this.metadataTitle}static{this.\u0275fac=function(t){return new(t||fs)(e.\u0275\u0275directiveInject(CC.j),e.\u0275\u0275directiveInject(al.H))}}static{this.\u0275cmp=e.\u0275\u0275defineComponent({type:fs,selectors:[["cd-crushmap"]],viewQuery:function(t,o){if(1&t&&(e.\u0275\u0275viewQuery(SC,5),e.\u0275\u0275viewQuery(hC,5)),2&t){let s;e.\u0275\u0275queryRefresh(s=e.\u0275\u0275loadQuery())&&(o.tree=s.first),e.\u0275\u0275queryRefresh(s=e.\u0275\u0275loadQuery())&&(o.labelTpl=s.first)}},decls:17,vars:4,consts:()=>{let n;return n=$localize`:␟738de688b22fba5d0dc7a5e549996838dddad0ee␟7959354849604681218:CRUSH map viewer`,[["tree",""],["nodeTemplateRef",""],["badge",""],n,[1,"row"],[1,"col-sm-12","col-lg-12"],[1,"card"],[1,"card-header"],[1,"card-body"],[1,"col-sm-6","col-lg-6","tree-container"],[3,"ngClass",4,"ngIf"],[3,"select","isMultiSelect"],[4,"ngFor","ngForOf"],["class","col-sm-6 col-lg-6 metadata",4,"ngIf"],[3,"ngClass"],[3,"node","depth"],[4,"ngIf"],[4,"ngTemplateOutlet","ngTemplateOutletContext"],["class","badge",3,"ngClass",4,"ngIf"],[1,"node-name",3,"ngClass","innerHTML"],[1,"badge",3,"ngClass"],[1,"col-sm-6","col-lg-6","metadata"],[3,"data"]]},template:function(t,o){if(1&t){const s=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"div",4)(1,"div",5)(2,"div",6)(3,"div",7),e.\u0275\u0275i18n(4,3),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(5,"div",8)(6,"div",4)(7,"div",9),e.\u0275\u0275template(8,bC,1,5,"i",10),e.\u0275\u0275elementStart(9,"cds-tree-view",11,0),e.\u0275\u0275listener("select",function(h){return e.\u0275\u0275restoreView(s),e.\u0275\u0275resetView(o.onNodeSelected(h))}),e.\u0275\u0275template(11,DC,2,3,"ng-template",null,1,e.\u0275\u0275templateRefExtractor)(13,LC,4,5,"ng-template",null,2,e.\u0275\u0275templateRefExtractor)(15,xC,2,4,"ng-container",12),e.\u0275\u0275elementEnd()(),e.\u0275\u0275template(16,UC,5,2,"div",13),e.\u0275\u0275elementEnd()()()()()}2&t&&(e.\u0275\u0275advance(8),e.\u0275\u0275property("ngIf",o.loadingIndicator),e.\u0275\u0275advance(),e.\u0275\u0275property("isMultiSelect",!1),e.\u0275\u0275advance(6),e.\u0275\u0275property("ngForOf",o.nodes),e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf",o.metadata))},dependencies:[l.NgClass,l.NgForOf,l.NgIf,l.NgTemplateOutlet,Rt.i,D.TreeViewComponent,D.TreeNodeComponent],styles:[".tree-container[_ngcontent-%COMP%]{height:calc(100vh - 200px);overflow-y:auto}"]})}}class fi{constructor(n){this.http=n}getLogs(){return this.http.get("api/logs/all")}validateDashboardUrl(n){return this.http.get(`api/grafana/validation/${n}`)}static{this.\u0275fac=function(t){return new(t||fi)(e.\u0275\u0275inject(T.HttpClient))}}static{this.\u0275prov=e.\u0275\u0275defineInjectable({token:fi,factory:fi.\u0275fac,providedIn:"root"})}}var wC=r(30833);class Ei{download(n,t){(0,wC.saveAs)(new Blob([n]),t)}static{this.\u0275fac=function(t){return new(t||Ei)}}static{this.\u0275prov=e.\u0275\u0275defineInjectable({token:Ei,factory:Ei.\u0275fac,providedIn:"root"})}}function GC(i,n){if(1&i){const t=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"button",5),e.\u0275\u0275listener("click",function(){e.\u0275\u0275restoreView(t);const s=e.\u0275\u0275nextContext();return e.\u0275\u0275resetView(s.download("json"))}),e.\u0275\u0275namespaceSVG(),e.\u0275\u0275element(1,"svg",2),e.\u0275\u0275namespaceHTML(),e.\u0275\u0275elementStart(2,"span"),e.\u0275\u0275text(3,"\xa0JSON"),e.\u0275\u0275elementEnd()()}if(2&i){const t=e.\u0275\u0275nextContext();e.\u0275\u0275advance(),e.\u0275\u0275property("cdsIcon",t.icons.code)}}function HC(i,n){if(1&i){const t=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"button",5),e.\u0275\u0275listener("click",function(){e.\u0275\u0275restoreView(t);const s=e.\u0275\u0275nextContext();return e.\u0275\u0275resetView(s.download())}),e.\u0275\u0275namespaceSVG(),e.\u0275\u0275element(1,"svg",2),e.\u0275\u0275namespaceHTML(),e.\u0275\u0275elementStart(2,"span"),e.\u0275\u0275text(3,"\xa0Text"),e.\u0275\u0275elementEnd()()}if(2&i){const t=e.\u0275\u0275nextContext();e.\u0275\u0275advance(),e.\u0275\u0275property("cdsIcon",t.icons.document)}}class gi{constructor(n){this.textToDownloadService=n,this.title=$localize`Download`,this.icons=g.FI}download(n){this.fileName=`${this.fileName}_${(new Date).toLocaleDateString()}`,"json"===n?this.textToDownloadService.download(JSON.stringify(this.objectItem,null,2),`${this.fileName}.json`):this.textToDownloadService.download(this.textItem,`${this.fileName}.txt`)}static{this.\u0275fac=function(t){return new(t||gi)(e.\u0275\u0275directiveInject(Ei))}}static{this.\u0275cmp=e.\u0275\u0275defineComponent({type:gi,selectors:[["cd-download-button"]],inputs:{objectItem:"objectItem",textItem:"textItem",fileName:"fileName",title:"title"},decls:7,vars:4,consts:[["ngbDropdown","","placement","bottom-right"],["type","button","ngbDropdownToggle","",1,"btn","btn-light","dropdown-toggle-split",3,"title"],["size","16",3,"cdsIcon"],["ngbDropdownMenu",""],["ngbDropdownItem","",3,"click",4,"ngIf"],["ngbDropdownItem","",3,"click"]],template:function(t,o){1&t&&(e.\u0275\u0275elementStart(0,"div",0)(1,"button",1),e.\u0275\u0275namespaceSVG(),e.\u0275\u0275element(2,"svg",2),e.\u0275\u0275text(3,"\xa0 "),e.\u0275\u0275elementEnd(),e.\u0275\u0275namespaceHTML(),e.\u0275\u0275elementStart(4,"div",3),e.\u0275\u0275template(5,GC,4,1,"button",4)(6,HC,4,1,"button",4),e.\u0275\u0275elementEnd()()),2&t&&(e.\u0275\u0275advance(),e.\u0275\u0275property("title",o.title),e.\u0275\u0275advance(),e.\u0275\u0275property("cdsIcon",o.icons.download),e.\u0275\u0275advance(3),e.\u0275\u0275property("ngIf",o.objectItem),e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf",o.textItem))},dependencies:[l.NgIf,Ge.S,G.NgbDropdown,G.NgbDropdownToggle,G.NgbDropdownMenu,G.NgbDropdownItem,G.NgbDropdownButtonItem,D.IconDirective]})}}var VC=r(71521);class Es{transform(n,t){if(!t)return n;t=this.escapeRegExp(t);const o=new RegExp(t,"gi");return n.match(o)?n.replace(o,"<mark>$&</mark>"):n}escapeRegExp(n){return n.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}static{this.\u0275fac=function(t){return new(t||Es)}}static{this.\u0275pipe=e.\u0275\u0275definePipe({name:"searchHighlight",type:Es,pure:!0})}}const BC=i=>({"overflow-auto":i});function zC(i,n){1&i&&e.\u0275\u0275elementContainer(0)}function XC(i,n){if(1&i&&e.\u0275\u0275element(0,"cd-download-button",33),2&i){const t=e.\u0275\u0275nextContext(5);e.\u0275\u0275property("objectItem",t.clog)("textItem",t.clogText)}}function kC(i,n){if(1&i&&e.\u0275\u0275element(0,"cd-copy-2-clipboard-button",34),2&i){const t=e.\u0275\u0275nextContext(5);e.\u0275\u0275property("source",t.clogText)("byId",!1)}}function jC(i,n){if(1&i&&(e.\u0275\u0275elementStart(0,"div",30),e.\u0275\u0275template(1,XC,1,2,"cd-download-button",31)(2,kC,1,2,"cd-copy-2-clipboard-button",32),e.\u0275\u0275elementEnd()),2&i){const t=e.\u0275\u0275nextContext(4);e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf",t.showDownloadCopyButton),e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf",t.showDownloadCopyButton)}}function WC(i,n){if(1&i&&(e.\u0275\u0275elementStart(0,"p")(1,"span",35),e.\u0275\u0275text(2),e.\u0275\u0275pipe(3,"cdDate"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(4,"span"),e.\u0275\u0275pipe(5,"logPriority"),e.\u0275\u0275text(6),e.\u0275\u0275elementEnd(),e.\u0275\u0275element(7,"span",36),e.\u0275\u0275pipe(8,"searchHighlight"),e.\u0275\u0275elementEnd()),2&i){const t=n.$implicit,o=e.\u0275\u0275nextContext(4);e.\u0275\u0275advance(2),e.\u0275\u0275textInterpolate(e.\u0275\u0275pipeBind1(3,6,t.stamp)),e.\u0275\u0275advance(2),e.\u0275\u0275classMapInterpolate1("priority ",e.\u0275\u0275pipeBind1(5,8,t.priority),""),e.\u0275\u0275advance(2),e.\u0275\u0275textInterpolate(t.priority),e.\u0275\u0275advance(),e.\u0275\u0275property("innerHTML",e.\u0275\u0275pipeBind2(8,10,t.message,o.search),e.\u0275\u0275sanitizeHtml)}}function KC(i,n){1&i&&e.\u0275\u0275elementContainer(0)}function QC(i,n){if(1&i&&(e.\u0275\u0275elementStart(0,"div",25),e.\u0275\u0275template(1,jC,3,2,"div",26),e.\u0275\u0275elementStart(2,"div",27),e.\u0275\u0275template(3,WC,9,13,"p",28)(4,KC,1,0,"ng-container",29),e.\u0275\u0275elementEnd()()),2&i){const t=e.\u0275\u0275nextContext(3),o=e.\u0275\u0275reference(4);e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf",t.clog.length&&t.showClusterLogs),e.\u0275\u0275advance(),e.\u0275\u0275property("ngClass",e.\u0275\u0275pureFunction1(5,BC,t.scrollable)),e.\u0275\u0275advance(),e.\u0275\u0275property("ngForOf",t.clog),e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf",0!==t.clog.length)("ngIfElse",o)}}function YC(i,n){if(1&i&&e.\u0275\u0275template(0,QC,5,7,"div",24),2&i){const t=e.\u0275\u0275nextContext(2);e.\u0275\u0275property("ngIf",t.clog)}}function JC(i,n){if(1&i&&e.\u0275\u0275element(0,"cd-download-button",39),2&i){const t=e.\u0275\u0275nextContext(5);e.\u0275\u0275property("objectItem",t.audit_log)("textItem",t.auditLogText)}}function ZC(i,n){if(1&i&&e.\u0275\u0275element(0,"cd-copy-2-clipboard-button",34),2&i){const t=e.\u0275\u0275nextContext(5);e.\u0275\u0275property("source",t.auditLogText)("byId",!1)}}function qC(i,n){if(1&i&&(e.\u0275\u0275elementStart(0,"div",30),e.\u0275\u0275template(1,JC,1,2,"cd-download-button",38)(2,ZC,1,2,"cd-copy-2-clipboard-button",32),e.\u0275\u0275elementEnd()),2&i){const t=e.\u0275\u0275nextContext(4);e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf",t.showDownloadCopyButton),e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf",t.showDownloadCopyButton)}}function eS(i,n){if(1&i&&(e.\u0275\u0275elementStart(0,"p")(1,"span",35),e.\u0275\u0275text(2),e.\u0275\u0275pipe(3,"cdDate"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(4,"span"),e.\u0275\u0275pipe(5,"logPriority"),e.\u0275\u0275text(6),e.\u0275\u0275elementEnd(),e.\u0275\u0275element(7,"span",36),e.\u0275\u0275pipe(8,"searchHighlight"),e.\u0275\u0275elementEnd()),2&i){const t=n.$implicit,o=e.\u0275\u0275nextContext(4);e.\u0275\u0275advance(2),e.\u0275\u0275textInterpolate(e.\u0275\u0275pipeBind1(3,6,t.stamp)),e.\u0275\u0275advance(2),e.\u0275\u0275classMapInterpolate1("priority ",e.\u0275\u0275pipeBind1(5,8,t.priority),""),e.\u0275\u0275advance(2),e.\u0275\u0275textInterpolate(t.priority),e.\u0275\u0275advance(),e.\u0275\u0275property("innerHTML",e.\u0275\u0275pipeBind2(8,10,t.message,o.search),e.\u0275\u0275sanitizeHtml)}}function tS(i,n){1&i&&e.\u0275\u0275elementContainer(0)}function nS(i,n){if(1&i&&(e.\u0275\u0275elementStart(0,"div",25),e.\u0275\u0275template(1,qC,3,2,"div",26),e.\u0275\u0275elementStart(2,"div",37),e.\u0275\u0275template(3,eS,9,13,"p",28)(4,tS,1,0,"ng-container",29),e.\u0275\u0275elementEnd()()),2&i){const t=e.\u0275\u0275nextContext(3),o=e.\u0275\u0275reference(4);e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf",t.audit_log.length),e.\u0275\u0275advance(2),e.\u0275\u0275property("ngForOf",t.audit_log),e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf",0!==t.audit_log.length)("ngIfElse",o)}}function oS(i,n){if(1&i&&e.\u0275\u0275template(0,nS,5,4,"div",24),2&i){const t=e.\u0275\u0275nextContext(2);e.\u0275\u0275property("ngIf",t.audit_log&&t.showAuditLogs)}}function iS(i,n){1&i&&(e.\u0275\u0275elementStart(0,"div"),e.\u0275\u0275element(1,"cd-grafana",40),e.\u0275\u0275elementEnd()),2&i&&(e.\u0275\u0275advance(),e.\u0275\u0275property("grafanaPath","explore?")("type","logs"))}function aS(i,n){if(1&i&&(e.\u0275\u0275elementContainerStart(0),e.\u0275\u0275template(1,iS,2,2,"div",29),e.\u0275\u0275pipe(2,"async"),e.\u0275\u0275elementContainerEnd()),2&i){const t=e.\u0275\u0275nextContext(3),o=e.\u0275\u0275reference(6);e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf",e.\u0275\u0275pipeBind1(2,2,t.promtailServiceStatus$))("ngIfElse",o)}}function sS(i,n){if(1&i&&(e.\u0275\u0275template(0,aS,3,4,"ng-container",29),e.\u0275\u0275pipe(1,"async")),2&i){const t=e.\u0275\u0275nextContext(2),o=e.\u0275\u0275reference(6);e.\u0275\u0275property("ngIf",e.\u0275\u0275pipeBind1(1,2,t.showDaemonLogs&&t.lokiServiceStatus$))("ngIfElse",o)}}function rS(i,n){if(1&i&&(e.\u0275\u0275elementStart(0,"div"),e.\u0275\u0275template(1,zC,1,0,"ng-container",16),e.\u0275\u0275elementStart(2,"nav",17,3),e.\u0275\u0275elementContainerStart(4,18),e.\u0275\u0275elementStart(5,"a",19),e.\u0275\u0275i18n(6,5),e.\u0275\u0275elementEnd(),e.\u0275\u0275template(7,YC,1,1,"ng-template",20),e.\u0275\u0275elementContainerEnd(),e.\u0275\u0275elementContainerStart(8,21),e.\u0275\u0275elementStart(9,"a",19),e.\u0275\u0275i18n(10,6),e.\u0275\u0275elementEnd(),e.\u0275\u0275template(11,oS,1,1,"ng-template",20),e.\u0275\u0275elementContainerEnd(),e.\u0275\u0275elementContainerStart(12,22),e.\u0275\u0275elementStart(13,"a",19),e.\u0275\u0275i18n(14,7),e.\u0275\u0275elementEnd(),e.\u0275\u0275template(15,sS,2,4,"ng-template",20),e.\u0275\u0275elementContainerEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275element(16,"div",23),e.\u0275\u0275elementEnd()),2&i){const t=e.\u0275\u0275reference(3),o=e.\u0275\u0275nextContext(),s=e.\u0275\u0275reference(2);e.\u0275\u0275advance(),e.\u0275\u0275property("ngTemplateOutlet",s),e.\u0275\u0275advance(),e.\u0275\u0275property("cdStatefulTabDefault",o.defaultTab)("hidden",!o.showNavLinks),e.\u0275\u0275advance(14),e.\u0275\u0275property("ngbNavOutlet",t)}}function lS(i,n){if(1&i&&(e.\u0275\u0275elementStart(0,"option",62),e.\u0275\u0275text(1),e.\u0275\u0275elementEnd()),2&i){const t=n.$implicit;e.\u0275\u0275property("value",t.value),e.\u0275\u0275advance(),e.\u0275\u0275textInterpolate(t.name)}}function _S(i,n){if(1&i){const t=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"div",42)(1,"div",43)(2,"div",44)(3,"label",45),e.\u0275\u0275i18n(4,8),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(5,"select",46),e.\u0275\u0275twoWayListener("ngModelChange",function(s){e.\u0275\u0275restoreView(t);const d=e.\u0275\u0275nextContext(2);return e.\u0275\u0275twoWayBindingSet(d.priority,s)||(d.priority=s),e.\u0275\u0275resetView(s)}),e.\u0275\u0275listener("ngModelChange",function(){e.\u0275\u0275restoreView(t);const s=e.\u0275\u0275nextContext(2);return e.\u0275\u0275resetView(s.filterLogs())}),e.\u0275\u0275template(6,lS,2,2,"option",47),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(7,"div",48)(8,"label",49),e.\u0275\u0275i18n(9,9),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(10,"div",50)(11,"span",51),e.\u0275\u0275namespaceSVG(),e.\u0275\u0275element(12,"svg",52),e.\u0275\u0275elementEnd(),e.\u0275\u0275namespaceHTML(),e.\u0275\u0275elementStart(13,"input",53),e.\u0275\u0275twoWayListener("ngModelChange",function(s){e.\u0275\u0275restoreView(t);const d=e.\u0275\u0275nextContext(2);return e.\u0275\u0275twoWayBindingSet(d.search,s)||(d.search=s),e.\u0275\u0275resetView(s)}),e.\u0275\u0275listener("keyup",function(){e.\u0275\u0275restoreView(t);const s=e.\u0275\u0275nextContext(2);return e.\u0275\u0275resetView(s.filterLogs())}),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(14,"button",54),e.\u0275\u0275listener("click",function(){e.\u0275\u0275restoreView(t);const s=e.\u0275\u0275nextContext(2);return e.\u0275\u0275resetView(s.clearSearchKey())}),e.\u0275\u0275namespaceSVG(),e.\u0275\u0275element(15,"svg",52),e.\u0275\u0275elementEnd()()(),e.\u0275\u0275namespaceHTML(),e.\u0275\u0275elementStart(16,"div",48)(17,"label",55),e.\u0275\u0275i18n(18,10),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(19,"div",50)(20,"input",56,4),e.\u0275\u0275listener("click",function(){e.\u0275\u0275restoreView(t);const s=e.\u0275\u0275reference(21);return e.\u0275\u0275resetView(s.open())}),e.\u0275\u0275twoWayListener("ngModelChange",function(s){e.\u0275\u0275restoreView(t);const d=e.\u0275\u0275nextContext(2);return e.\u0275\u0275twoWayBindingSet(d.selectedDate,s)||(d.selectedDate=s),e.\u0275\u0275resetView(s)}),e.\u0275\u0275listener("ngModelChange",function(){e.\u0275\u0275restoreView(t);const s=e.\u0275\u0275nextContext(2);return e.\u0275\u0275resetView(s.filterLogs())}),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(22,"button",54),e.\u0275\u0275listener("click",function(){e.\u0275\u0275restoreView(t);const s=e.\u0275\u0275nextContext(2);return e.\u0275\u0275resetView(s.clearDate())}),e.\u0275\u0275namespaceSVG(),e.\u0275\u0275element(23,"svg",52),e.\u0275\u0275elementEnd()()(),e.\u0275\u0275namespaceHTML(),e.\u0275\u0275elementStart(24,"div",57)(25,"label",58),e.\u0275\u0275i18n(26,11),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(27,"div",59)(28,"ngb-timepicker",60),e.\u0275\u0275twoWayListener("ngModelChange",function(s){e.\u0275\u0275restoreView(t);const d=e.\u0275\u0275nextContext(2);return e.\u0275\u0275twoWayBindingSet(d.startTime,s)||(d.startTime=s),e.\u0275\u0275resetView(s)}),e.\u0275\u0275listener("ngModelChange",function(){e.\u0275\u0275restoreView(t);const s=e.\u0275\u0275nextContext(2);return e.\u0275\u0275resetView(s.filterLogs())}),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(29,"span",61),e.\u0275\u0275text(30,"\xa0\u2014\xa0"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(31,"ngb-timepicker",60),e.\u0275\u0275twoWayListener("ngModelChange",function(s){e.\u0275\u0275restoreView(t);const d=e.\u0275\u0275nextContext(2);return e.\u0275\u0275twoWayBindingSet(d.endTime,s)||(d.endTime=s),e.\u0275\u0275resetView(s)}),e.\u0275\u0275listener("ngModelChange",function(){e.\u0275\u0275restoreView(t);const s=e.\u0275\u0275nextContext(2);return e.\u0275\u0275resetView(s.filterLogs())}),e.\u0275\u0275elementEnd()()()()()}if(2&i){const t=e.\u0275\u0275nextContext(2);e.\u0275\u0275advance(5),e.\u0275\u0275twoWayProperty("ngModel",t.priority),e.\u0275\u0275advance(),e.\u0275\u0275property("ngForOf",t.priorities),e.\u0275\u0275advance(6),e.\u0275\u0275property("cdsIcon",t.icons.search)("size",t.icons.size16),e.\u0275\u0275advance(),e.\u0275\u0275twoWayProperty("ngModel",t.search),e.\u0275\u0275advance(2),e.\u0275\u0275property("cdsIcon",t.icons.destroy)("size",t.icons.size16),e.\u0275\u0275advance(5),e.\u0275\u0275property("maxDate",t.maxDate),e.\u0275\u0275twoWayProperty("ngModel",t.selectedDate),e.\u0275\u0275advance(3),e.\u0275\u0275property("cdsIcon",t.icons.destroy)("size",t.icons.size16),e.\u0275\u0275advance(5),e.\u0275\u0275property("spinners",!1),e.\u0275\u0275twoWayProperty("ngModel",t.startTime),e.\u0275\u0275advance(3),e.\u0275\u0275property("spinners",!1),e.\u0275\u0275twoWayProperty("ngModel",t.endTime)}}function cS(i,n){if(1&i&&e.\u0275\u0275template(0,_S,32,15,"div",41),2&i){const t=e.\u0275\u0275nextContext();e.\u0275\u0275property("ngIf",t.showFilterTools)}}function dS(i,n){if(1&i){const t=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"span"),e.\u0275\u0275i18n(1,12),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(2,"span"),e.\u0275\u0275text(3,"\xa0"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(4,"a",63),e.\u0275\u0275listener("click",function(){e.\u0275\u0275restoreView(t);const s=e.\u0275\u0275nextContext();return e.\u0275\u0275resetView(s.resetFilter())}),e.\u0275\u0275i18n(5,13),e.\u0275\u0275elementEnd()}}function uS(i,n){1&i&&(e.\u0275\u0275elementStart(0,"cd-alert-panel",64),e.\u0275\u0275elementContainerStart(1),e.\u0275\u0275i18n(2,14),e.\u0275\u0275elementContainerEnd(),e.\u0275\u0275elementEnd())}class Lo{constructor(n,t,o,s){this.logsService=n,this.cephService=t,this.datePipe=o,this.ngZone=s,this.showClusterLogs=!0,this.showAuditLogs=!0,this.showDaemonLogs=!0,this.showNavLinks=!0,this.showFilterTools=!0,this.showDownloadCopyButton=!0,this.defaultTab="",this.scrollable=!1,this.icons=g.FI,this.priorities=[{name:"Debug",value:"[DBG]"},{name:"Info",value:"[INF]"},{name:"Warning",value:"[WRN]"},{name:"Error",value:"[ERR]"},{name:"All",value:"All"}],this.priority="All",this.search="",this.startTime={hour:0,minute:0},this.endTime={hour:23,minute:59},this.maxDate={year:(new Date).getFullYear(),month:(new Date).getMonth()+1,day:(new Date).getDate()}}ngOnInit(){this.getInfo(),this.ngZone.runOutsideAngular(()=>{this.getDaemonDetails(),this.interval=window.setInterval(()=>{this.ngZone.run(()=>{this.getInfo()})},5e3)})}ngOnDestroy(){clearInterval(this.interval)}getDaemonDetails(){this.lokiServiceStatus$=this.cephService.getDaemons("loki").pipe((0,v.map)(n=>n.length>0&&1===n[0].status)),this.promtailServiceStatus$=this.cephService.getDaemons("promtail").pipe((0,v.map)(n=>n.length>0&&1===n[0].status))}getInfo(){this.logsService.getLogs().subscribe(n=>{this.contentData=n,this.clogText=this.logToText(this.contentData.clog),this.auditLogText=this.logToText(this.contentData.audit_log),this.filterLogs()})}abstractFilters(){const n=this.priority,t=this.search.toLowerCase();let o;if(this.selectedDate){const X=this.selectedDate.month,J=this.selectedDate.day;o=`${this.selectedDate.year}-${X<=9?`0${X}`:`${X}`}-${J<=9?`0${J}`:`${J}`}`}else o="";return{priority:n,key:t,yearMonthDay:o,sTime:60*(this.startTime?.hour??0)+(this.startTime?.minute??0),eTime:60*(this.endTime?.hour??23)+(this.endTime?.minute??59)}}filterExecutor(n,t){return n.filter(o=>{const s=this.datePipe.transform(o.stamp,"mediumTime"),d=parseInt(s.split(":")[0],10),h=parseInt(s.split(":")[1],10);let I,$,w;return I="All"===t.priority?o.priority:t.priority,$=t.yearMonthDay?t.yearMonthDay:o.stamp,w=60*d+h,o.priority===I&&-1!==o.message.toLowerCase().indexOf(t.key)&&-1!==o.stamp.indexOf($)&&w>=t.sTime&&w<=t.eTime})}filterLogs(){const n=this.abstractFilters();this.clog=this.filterExecutor(this.contentData.clog,n),this.audit_log=this.filterExecutor(this.contentData.audit_log,n)}clearSearchKey(){this.search="",this.filterLogs()}clearDate(){this.selectedDate=null,this.filterLogs()}resetFilter(){return this.priority="All",this.search="",this.selectedDate=null,this.startTime={hour:0,minute:0},this.endTime={hour:23,minute:59},this.filterLogs(),!1}logToText(n){let t="";for(const o of Object.keys(n))t=t+this.datePipe.transform(n[o].stamp,"medium")+"\t"+n[o].priority+"\t"+n[o].message+"\n";return t}static{this.\u0275fac=function(t){return new(t||Lo)(e.\u0275\u0275directiveInject(fi),e.\u0275\u0275directiveInject(si.t),e.\u0275\u0275directiveInject(l.DatePipe),e.\u0275\u0275directiveInject(e.NgZone))}}static{this.\u0275cmp=e.\u0275\u0275defineComponent({type:Lo,selectors:[["cd-logs"]],inputs:{showClusterLogs:"showClusterLogs",showAuditLogs:"showAuditLogs",showDaemonLogs:"showDaemonLogs",showNavLinks:"showNavLinks",showFilterTools:"showFilterTools",showDownloadCopyButton:"showDownloadCopyButton",defaultTab:"defaultTab",scrollable:"scrollable"},decls:7,vars:1,consts:()=>{let n,t,o,s,d,h,I,$,w,X,J,re;return n=$localize`:␟d556ab48a65722b400e497f61737f553ee0f89e2␟694218511917002641:Cluster Logs`,t=$localize`:␟5f966baffd188be0e8adc2d7067b86e55fc9b9de␟6537626382528513237:Audit Logs`,o=$localize`:␟64f352a2fd5f00c05d969b4b6b32097b0d77bd4a␟5105719795575360904:Daemon Logs`,s=$localize`:␟508a91443aae9e64535807c941bfb03c558eab53␟6468695765708474503:Daemon logs`,d=$localize`:␟4193c9eb868aeec119b78a14795241e0aa5e8b60␟5025143942124016193:Priority:`,h=$localize`:␟1d78ca51eab260ce3fd917d39190d64df5229b6e␟5292065013807821991:Keyword:`,I=$localize`:␟05fa0bded36de6e73a1fa44838b627349dace044␟6899410641137821757:Date:`,$=$localize`:␟85a400388de1899b1917138cf7e5286376f72847␟1500099262662584579:Time range:`,w=$localize`:␟de0478286b8b5a939db54e9e5282405364ad2d61␟6342747174053289708:No log entries found. Please try to select different filter options.`,X=$localize`:␟1c7479674d91142b785b9547a87e5fb51cb16108␟5075715582456144452:Reset filter.`,J=$localize`:␟bc83a8f0cd0ca46da3f91cb019a0e12cfa829148␟3502868328570384452:Loki/Promtail service not running`,re=$localize`:␟bb02379ceed805703f74c6c7748655b701932409␟8452819103811021600:Please start the loki and promtail service to see these logs.`,[["logFiltersTpl",""],["noEntriesTpl",""],["daemonLogsTpl",""],["nav","ngbNav"],["d","ngbDatepicker"],n,t,o,d,h,I,$,w,X,re,[4,"ngIf"],[4,"ngTemplateOutlet"],["ngbNav","","cdStatefulTab","logs",1,"nav-tabs",3,"cdStatefulTabDefault","hidden"],["ngbNavItem","cluster-logs"],["ngbNavLink",""],["ngbNavContent",""],["ngbNavItem","audit-logs"],["ngbNavItem","daemon-logs"],[3,"ngbNavOutlet"],["class","card bg-light mb-3",4,"ngIf"],[1,"card","bg-light","mb-3"],["class","btn-group","role","group",4,"ngIf"],[1,"card-body",3,"ngClass"],[4,"ngFor","ngForOf"],[4,"ngIf","ngIfElse"],["role","group",1,"btn-group"],["fileName","cluster_log",3,"objectItem","textItem",4,"ngIf"],[3,"source","byId",4,"ngIf"],["fileName","cluster_log",3,"objectItem","textItem"],[3,"source","byId"],[1,"timestamp"],[1,"message",3,"innerHTML"],[1,"card-body"],["fileName","audit_log",3,"objectItem","textItem",4,"ngIf"],["fileName","audit_log",3,"objectItem","textItem"],["title",s,"uid","CrAHE0iZz","grafanaStyle","three",3,"grafanaPath","type"],["class","row mb-3",4,"ngIf"],[1,"row","mb-3"],[1,"col-lg-10","d-flex"],[1,"col-sm-1","me-3"],["for","logs-priority",1,"fw-bold"],["id","logs-priority",1,"form-select",3,"ngModelChange","ngModel"],[3,"value",4,"ngFor","ngForOf"],[1,"col-md-3","me-3"],["for","logs-keyword",1,"fw-bold"],[1,"input-group"],[1,"input-group-text"],[3,"cdsIcon","size"],["id","logs-keyword","type","text",1,"form-control",3,"ngModelChange","keyup","ngModel"],["type","button","title","Clear",1,"btn","btn-light",3,"click"],["for","logs-date",1,"fw-bold"],["id","logs-date","placeholder","YYYY-MM-DD","ngbDatepicker","",1,"form-control",3,"click","ngModelChange","maxDate","ngModel"],[1,"col-md-5"],[1,"fw-bold"],[1,"d-flex"],[3,"ngModelChange","spinners","ngModel"],[1,"mt-2"],[3,"value"],["href","#",3,"click"],["type","info","title",J]]},template:function(t,o){1&t&&e.\u0275\u0275template(0,rS,17,4,"div",15)(1,cS,1,1,"ng-template",null,0,e.\u0275\u0275templateRefExtractor)(3,dS,6,0,"ng-template",null,1,e.\u0275\u0275templateRefExtractor)(5,uS,3,0,"ng-template",null,2,e.\u0275\u0275templateRefExtractor),2&t&&e.\u0275\u0275property("ngIf",o.contentData)},dependencies:[l.NgClass,l.NgForOf,l.NgIf,l.NgTemplateOutlet,G.NgbNavContent,G.NgbNav,G.NgbNavItem,G.NgbNavLink,G.NgbNavLinkBase,G.NgbNavOutlet,Tt.c,nt.m,fe.N,gi,$t.B,Ge.S,we.a,C.NgSelectOption,C.\u0275NgSelectMultipleOption,C.DefaultValueAccessor,C.SelectControlValueAccessor,C.NgControlStatus,C.NgModel,G.NgbTimepicker,G.NgbInputDatepicker,D.IconDirective,l.AsyncPipe,VC.H,Ot.Q,Es],styles:["p[_ngcontent-%COMP%]{font-family:monospace}.card[_ngcontent-%COMP%]   .btn-group[_ngcontent-%COMP%]{margin-top:-57px;position:absolute;right:0}.card[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{display:flex}.card[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]:last-child{margin-bottom:0}.card[_ngcontent-%COMP%]   .timestamp[_ngcontent-%COMP%]{flex-shrink:0;font-weight:700}.card[_ngcontent-%COMP%]   .priority[_ngcontent-%COMP%]{margin-left:.5rem}.card[_ngcontent-%COMP%]   .message[_ngcontent-%COMP%]{margin-left:1rem}.card[_ngcontent-%COMP%]   .err[_ngcontent-%COMP%]{color:#dc3545}.card[_ngcontent-%COMP%]   .warn[_ngcontent-%COMP%]{color:#d48200}.card[_ngcontent-%COMP%]   .info[_ngcontent-%COMP%]{color:#25828e}.card[_ngcontent-%COMP%]   .debug[_ngcontent-%COMP%]{color:#495057}  cd-logs ngb-timepicker input.ngb-tp-input{width:3.5rem!important}.card-body.overflow-auto[_ngcontent-%COMP%]{height:50vh}"]})}}const pS=()=>["addr","str","uuid"],mS=()=>["uint","int","size","secs"];function fS(i,n){if(1&i&&(e.\u0275\u0275elementStart(0,"cd-helper"),e.\u0275\u0275text(1),e.\u0275\u0275pipe(2,"upperFirst"),e.\u0275\u0275elementEnd()),2&i){const t=e.\u0275\u0275nextContext().$implicit;e.\u0275\u0275advance(),e.\u0275\u0275textInterpolate1(" ",e.\u0275\u0275pipeBind1(2,1,t.value.long_desc||t.value.desc)," ")}}function ES(i,n){if(1&i&&(e.\u0275\u0275elementStart(0,"div",23)(1,"div",24),e.\u0275\u0275element(2,"input",25)(3,"label",26),e.\u0275\u0275elementEnd()()),2&i){const t=e.\u0275\u0275nextContext().$implicit;e.\u0275\u0275advance(2),e.\u0275\u0275propertyInterpolate("id",t.value.name),e.\u0275\u0275propertyInterpolate("formControlName",t.value.name),e.\u0275\u0275advance(),e.\u0275\u0275propertyInterpolate("for",t.value.name)}}function gS(i,n){if(1&i&&e.\u0275\u0275element(0,"input",30),2&i){const t=e.\u0275\u0275nextContext(2).$implicit;e.\u0275\u0275propertyInterpolate("id",t.value.name),e.\u0275\u0275propertyInterpolate("formControlName",t.value.name)}}function CS(i,n){if(1&i&&(e.\u0275\u0275elementStart(0,"option",33),e.\u0275\u0275text(1),e.\u0275\u0275elementEnd()),2&i){const t=n.$implicit;e.\u0275\u0275property("ngValue",t),e.\u0275\u0275advance(),e.\u0275\u0275textInterpolate1(" ",t," ")}}function SS(i,n){if(1&i&&(e.\u0275\u0275elementStart(0,"select",31),e.\u0275\u0275template(1,CS,2,2,"option",32),e.\u0275\u0275elementEnd()),2&i){const t=e.\u0275\u0275nextContext(2).$implicit;e.\u0275\u0275propertyInterpolate("id",t.value.name),e.\u0275\u0275propertyInterpolate("formControlName",t.value.name),e.\u0275\u0275advance(),e.\u0275\u0275property("ngForOf",t.value.enum_allowed)}}function hS(i,n){1&i&&(e.\u0275\u0275elementStart(0,"span",34),e.\u0275\u0275i18n(1,2),e.\u0275\u0275elementEnd())}function TS(i,n){1&i&&(e.\u0275\u0275elementStart(0,"span",34),e.\u0275\u0275i18n(1,3),e.\u0275\u0275elementEnd())}function FS(i,n){if(1&i&&(e.\u0275\u0275elementStart(0,"div",23),e.\u0275\u0275template(1,gS,1,2,"input",27)(2,SS,2,3,"select",28)(3,hS,2,0,"span",29)(4,TS,2,0,"span",29),e.\u0275\u0275elementEnd()),2&i){const t=e.\u0275\u0275nextContext().$implicit;e.\u0275\u0275nextContext();const o=e.\u0275\u0275reference(2),s=e.\u0275\u0275nextContext();e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf",0===t.value.enum_allowed.length),e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf",t.value.enum_allowed.length>0),e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf",s.mgrModuleForm.showError(t.value.name,o,"invalidUuid")),e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf",s.mgrModuleForm.showError(t.value.name,o,"pattern"))}}function vS(i,n){1&i&&(e.\u0275\u0275elementStart(0,"span",34),e.\u0275\u0275i18n(1,4),e.\u0275\u0275elementEnd())}function MS(i,n){if(1&i&&(e.\u0275\u0275elementStart(0,"span",34),e.\u0275\u0275i18n(1,5),e.\u0275\u0275elementEnd()),2&i){const t=e.\u0275\u0275nextContext(2).$implicit;e.\u0275\u0275advance(),e.\u0275\u0275i18nExp(t.value.max),e.\u0275\u0275i18nApply(1)}}function RS(i,n){if(1&i&&(e.\u0275\u0275elementStart(0,"span",34),e.\u0275\u0275i18n(1,6),e.\u0275\u0275elementEnd()),2&i){const t=e.\u0275\u0275nextContext(2).$implicit;e.\u0275\u0275advance(),e.\u0275\u0275i18nExp(t.value.min),e.\u0275\u0275i18nApply(1)}}function OS(i,n){1&i&&(e.\u0275\u0275elementStart(0,"span",34),e.\u0275\u0275i18n(1,7),e.\u0275\u0275elementEnd())}function PS(i,n){if(1&i&&(e.\u0275\u0275elementStart(0,"div",23),e.\u0275\u0275element(1,"input",35),e.\u0275\u0275template(2,vS,2,0,"span",29)(3,MS,2,1,"span",29)(4,RS,2,1,"span",29)(5,OS,2,0,"span",29),e.\u0275\u0275elementEnd()),2&i){const t=e.\u0275\u0275nextContext().$implicit;e.\u0275\u0275nextContext();const o=e.\u0275\u0275reference(2),s=e.\u0275\u0275nextContext();e.\u0275\u0275advance(),e.\u0275\u0275propertyInterpolate("id",t.value.name),e.\u0275\u0275propertyInterpolate("formControlName",t.value.name),e.\u0275\u0275propertyInterpolate("min",t.value.min),e.\u0275\u0275propertyInterpolate("max",t.value.max),e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf",s.mgrModuleForm.showError(t.value.name,o,"required")),e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf",s.mgrModuleForm.showError(t.value.name,o,"max")),e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf",s.mgrModuleForm.showError(t.value.name,o,"min")),e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf",s.mgrModuleForm.showError(t.value.name,o,"pattern"))}}function bS(i,n){1&i&&(e.\u0275\u0275elementStart(0,"span",34),e.\u0275\u0275i18n(1,8),e.\u0275\u0275elementEnd())}function NS(i,n){1&i&&(e.\u0275\u0275elementStart(0,"span",34),e.\u0275\u0275i18n(1,9),e.\u0275\u0275elementEnd())}function IS(i,n){if(1&i&&(e.\u0275\u0275elementStart(0,"div",23),e.\u0275\u0275element(1,"input",36),e.\u0275\u0275template(2,bS,2,0,"span",29)(3,NS,2,0,"span",29),e.\u0275\u0275elementEnd()),2&i){const t=e.\u0275\u0275nextContext().$implicit;e.\u0275\u0275nextContext();const o=e.\u0275\u0275reference(2),s=e.\u0275\u0275nextContext();e.\u0275\u0275advance(),e.\u0275\u0275propertyInterpolate("id",t.value.name),e.\u0275\u0275propertyInterpolate("formControlName",t.value.name),e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf",s.mgrModuleForm.showError(t.value.name,o,"required")),e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf",s.mgrModuleForm.showError(t.value.name,o,"pattern"))}}function AS(i,n){if(1&i&&(e.\u0275\u0275elementStart(0,"div",19)(1,"label",20),e.\u0275\u0275text(2),e.\u0275\u0275template(3,fS,3,3,"cd-helper",21),e.\u0275\u0275elementEnd(),e.\u0275\u0275template(4,ES,4,3,"div",22)(5,FS,5,4,"div",22)(6,PS,6,8,"div",22)(7,IS,4,4,"div",22),e.\u0275\u0275elementEnd()),2&i){const t=n.$implicit;e.\u0275\u0275advance(),e.\u0275\u0275propertyInterpolate("for",t.value.name),e.\u0275\u0275advance(),e.\u0275\u0275textInterpolate1(" ",t.value.name," "),e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf",t.value.long_desc||t.value.desc),e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf","bool"===t.value.type),e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf",e.\u0275\u0275pureFunction0(7,pS).includes(t.value.type)),e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf",e.\u0275\u0275pureFunction0(8,mS).includes(t.value.type)),e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf","float"===t.value.type)}}function DS(i,n){if(1&i){const t=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"div",11)(1,"form",12,0)(3,"div",13)(4,"div",14),e.\u0275\u0275i18n(5,1),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(6,"div",15),e.\u0275\u0275template(7,AS,8,9,"div",16),e.\u0275\u0275pipe(8,"keyvalue"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(9,"div",17)(10,"cd-form-button-panel",18),e.\u0275\u0275listener("submitActionEvent",function(){e.\u0275\u0275restoreView(t);const s=e.\u0275\u0275nextContext();return e.\u0275\u0275resetView(s.onSubmit())}),e.\u0275\u0275elementEnd()()()()()}if(2&i){const t=e.\u0275\u0275nextContext();e.\u0275\u0275advance(),e.\u0275\u0275property("formGroup",t.mgrModuleForm),e.\u0275\u0275advance(6),e.\u0275\u0275property("ngForOf",e.\u0275\u0275pipeBind1(8,4,t.moduleOptions)),e.\u0275\u0275advance(3),e.\u0275\u0275property("form",t.mgrModuleForm)("submitText",t.actionLabels.UPDATE)}}class gs extends Ce.g{constructor(n,t,o,s,d,h){super(),this.actionLabels=n,this.route=t,this.router=o,this.formBuilder=s,this.mgrModuleService=d,this.notificationService=h,this.moduleName="",this.moduleOptions=[]}ngOnInit(){this.route.params.subscribe(n=>{this.moduleName=decodeURIComponent(n.name);const t=[this.mgrModuleService.getOptions(this.moduleName),this.mgrModuleService.getConfig(this.moduleName)];(0,K.forkJoin)(t).subscribe(o=>{this.moduleOptions=o[0],this.createForm(),this.mgrModuleForm.setValue(o[1]),this.loadingReady()},o=>{this.loadingError()})})}getValidators(n){const t=[];switch(n.type){case"addr":t.push(pe.xQ.ip());break;case"uint":case"int":case"size":case"secs":t.push(C.Validators.required);break;case"str":p().isNumber(n.min)&&t.push(C.Validators.minLength(n.min)),p().isNumber(n.max)&&t.push(C.Validators.maxLength(n.max));break;case"float":t.push(C.Validators.required),t.push(pe.xQ.decimalNumber());break;case"uuid":t.push(pe.xQ.uuid())}return t}createForm(){const n={};p().forEach(this.moduleOptions,t=>{n[t.name]=[t.default_value,this.getValidators(t)]}),this.mgrModuleForm=this.formBuilder.group(n)}goToListView(){this.router.navigate(["/mgr-modules"])}onSubmit(){if(this.mgrModuleForm.pristine)return void this.goToListView();const n={};p().forEach(this.moduleOptions,t=>{const o=this.mgrModuleForm.get(t.name);o.dirty&&o.valid&&(n[t.name]=o.value)}),this.mgrModuleService.updateConfig(this.moduleName,n).subscribe(()=>{this.notificationService.show(Ae._.success,$localize`Updated options for module '${this.moduleName}'.`),this.goToListView()},()=>{this.mgrModuleForm.setErrors({cdSubmitButton:!0})})}static{this.\u0275fac=function(t){return new(t||gs)(e.\u0275\u0275directiveInject(m.Ss),e.\u0275\u0275directiveInject(u.ActivatedRoute),e.\u0275\u0275directiveInject(u.Router),e.\u0275\u0275directiveInject(Dt.$),e.\u0275\u0275directiveInject(Ln.a),e.\u0275\u0275directiveInject(Q.J))}}static{this.\u0275cmp=e.\u0275\u0275defineComponent({type:gs,selectors:[["cd-mgr-module-form"]],features:[e.\u0275\u0275InheritDefinitionFeature],decls:1,vars:1,consts:()=>{let n,t,o,s,d,h,I,$,w;return n=$localize`:␟31a9c2870a934b594d1390146c489f76440859ea␟1526176299457740995:Edit Manager module`,t=$localize`:␟46e09b8290d3d0afdb6baa2021395b0570606a31␟5426674809015034087:The entered value is not a valid UUID, e.g.: 67dcac9f-2c03-4d6c-b7bd-1210b3a259a8`,o=$localize`:␟7aacd038b39cfd347107d01d1dc27f5cb3e0951c␟723235580272131986:The entered value needs to be a valid IP address.`,s=$localize`:␟7cbdabcece469fab89cfa687ab152bca18b97498␟1417693714872528491:This field is required.`,d=$localize`:␟f19106149f4b07a0d721f9d317afed393cb7bd93␟8655063041944904434:The entered value is too high! It must be lower or equal to ${"\ufffd0\ufffd"}:INTERPOLATION:.`,h=$localize`:␟6d33c40ef9a6c3bf0888df831b25e41e65f9d15b␟8618667851715974888:The entered value is too low! It must be greater or equal to ${"\ufffd0\ufffd"}:INTERPOLATION:.`,I=$localize`:␟eae7086660cf1e38c7194a2c49ff52cc656f90f5␟4304943972618871159:The entered value needs to be a number.`,$=$localize`:␟7cbdabcece469fab89cfa687ab152bca18b97498␟1417693714872528491:This field is required.`,w=$localize`:␟a73376e04b4fb3a20734c8c39743fba32e6676ce␟2627729647763945523:The entered value needs to be a number or decimal.`,[["frm","ngForm"],n,t,o,s,d,h,I,$,w,["class","cd-col-form",4,"cdFormLoading"],[1,"cd-col-form"],["name","mgrModuleForm","novalidate","",3,"formGroup"],[1,"card"],[1,"card-header"],[1,"card-body"],["class","form-group row",4,"ngFor","ngForOf"],[1,"card-footer"],["wrappingClass","text-right",3,"submitActionEvent","form","submitText"],[1,"form-group","row"],[1,"cd-col-form-label",3,"for"],[4,"ngIf"],["class","cd-col-form-input",4,"ngIf"],[1,"cd-col-form-input"],[1,"custom-control","custom-checkbox"],["type","checkbox",1,"custom-control-input",3,"id","formControlName"],[1,"custom-control-label",3,"for"],["class","form-control","type","text",3,"id","formControlName",4,"ngIf"],["class","form-select",3,"id","formControlName",4,"ngIf"],["class","invalid-feedback",4,"ngIf"],["type","text",1,"form-control",3,"id","formControlName"],[1,"form-select",3,"id","formControlName"],[3,"ngValue",4,"ngFor","ngForOf"],[3,"ngValue"],[1,"invalid-feedback"],["type","number",1,"form-control",3,"id","formControlName","min","max"],["type","number",1,"form-control",3,"id","formControlName"]]},template:function(t,o){1&t&&e.\u0275\u0275template(0,DS,11,6,"div",10),2&t&&e.\u0275\u0275property("cdFormLoading",o.loading)},dependencies:[l.NgForOf,l.NgIf,C.\u0275NgNoValidate,C.NgSelectOption,C.\u0275NgSelectMultipleOption,C.DefaultValueAccessor,C.NumberValueAccessor,C.CheckboxControlValueAccessor,C.SelectControlValueAccessor,C.NgControlStatus,C.NgControlStatusGroup,C.MinValidator,C.MaxValidator,C.FormGroupDirective,C.FormControlName,y.m,oe.e,tt.G,Ge.S,we.a,Ve.C,ze.E,l.KeyValuePipe,Pe.r]})}}function yS(i,n){if(1&i&&(e.\u0275\u0275elementContainerStart(0),e.\u0275\u0275element(1,"cd-table-key-value",1),e.\u0275\u0275elementContainerEnd()),2&i){const t=e.\u0275\u0275nextContext();e.\u0275\u0275advance(),e.\u0275\u0275property("data",t.module_config)}}class Cs{constructor(n){this.mgrModuleService=n}ngOnChanges(){this.selection&&this.mgrModuleService.getConfig(this.selection.name).subscribe(n=>{this.module_config=n})}static{this.\u0275fac=function(t){return new(t||Cs)(e.\u0275\u0275directiveInject(Ln.a))}}static{this.\u0275cmp=e.\u0275\u0275defineComponent({type:Cs,selectors:[["cd-mgr-module-details"]],inputs:{selection:"selection"},features:[e.\u0275\u0275NgOnChangesFeature],decls:1,vars:1,consts:[[4,"ngIf"],[3,"data"]],template:function(t,o){1&t&&e.\u0275\u0275template(0,yS,2,1,"ng-container",0),2&t&&e.\u0275\u0275property("ngIf",o.selection)},dependencies:[l.NgIf,Rt.i]})}}function LS(i,n){if(1&i&&e.\u0275\u0275element(0,"cd-mgr-module-details",4),2&i){const t=e.\u0275\u0275nextContext();e.\u0275\u0275property("selection",t.expandedRow)}}class Ss extends M.D{constructor(n,t){super(),this.authStorageService=n,this.mgrModuleService=t,this.columns=[],this.modules=[],this.selection=new N.y,this.permission=this.authStorageService.getPermissions().configOpt,this.columns=[{name:$localize`Name`,prop:"name",flexGrow:1},{name:$localize`Enabled`,prop:"enabled",flexGrow:1,cellClass:"text-center",cellTransformation:b.x.checkIcon},{name:$localize`Always-On`,prop:"always_on",flexGrow:1,cellClass:"text-center",cellTransformation:b.x.checkIcon}];const o=()=>this.selection.first()&&encodeURIComponent(this.selection.first().name);this.tableActions=[{name:$localize`Edit`,permission:"update",disable:()=>!this.selection.hasSelection||0===Object.values(this.selection.first().options).length,routerLink:()=>`/mgr-modules/edit/${o()}`,icon:g.FI.edit},{name:$localize`Enable`,permission:"update",click:()=>this.updateModuleState(),disable:()=>this.isTableActionDisabled("enabled"),icon:g.FI.start},{name:$localize`Disable`,permission:"update",click:()=>this.updateModuleState(),disable:()=>this.getTableActionDisabledDesc(),icon:g.FI.stop}]}getModuleList(n){this.mgrModuleService.list().subscribe(t=>{this.modules=t},()=>{n.error()})}updateSelection(n){this.selection=n}isTableActionDisabled(n){if(!this.selection.hasSelection)return!0;const t=this.selection.first();if("dashboard"===t.name||t.always_on)return!0;switch(n){case"enabled":return t.enabled;case"disabled":return!t.enabled}}getTableActionDisabledDesc(){return this.selection.first()?.always_on?$localize`This Manager module is always on.`:this.isTableActionDisabled("disabled")}updateModuleState(){if(!this.selection.hasSelection)return;const n=this.selection.first();this.mgrModuleService.updateModuleState(n.name,n.enabled,this.table)}static{this.\u0275fac=function(t){return new(t||Ss)(e.\u0275\u0275directiveInject(c.v),e.\u0275\u0275directiveInject(Ln.a))}}static{this.\u0275cmp=e.\u0275\u0275defineComponent({type:Ss,selectors:[["cd-mgr-module-list"]],viewQuery:function(t,o){if(1&t&&e.\u0275\u0275viewQuery(We.O,7),2&t){let s;e.\u0275\u0275queryRefresh(s=e.\u0275\u0275loadQuery())&&(o.table=s.first)}},features:[e.\u0275\u0275InheritDefinitionFeature],decls:4,vars:7,consts:[["table",""],["columnMode","flex","selectionType","single","identifier","module",3,"setExpandedRow","updateSelection","fetchData","autoReload","data","columns","hasDetails"],[1,"table-actions",3,"permission","selection","tableActions"],[3,"selection",4,"cdTableDetail"],[3,"selection"]],template:function(t,o){if(1&t){const s=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"cd-table",1,0),e.\u0275\u0275listener("setExpandedRow",function(h){return e.\u0275\u0275restoreView(s),e.\u0275\u0275resetView(o.setExpandedRow(h))})("updateSelection",function(h){return e.\u0275\u0275restoreView(s),e.\u0275\u0275resetView(o.updateSelection(h))})("fetchData",function(h){return e.\u0275\u0275restoreView(s),e.\u0275\u0275resetView(o.getModuleList(h))}),e.\u0275\u0275element(2,"cd-table-actions",2),e.\u0275\u0275template(3,LS,1,1,"cd-mgr-module-details",3),e.\u0275\u0275elementEnd()}2&t&&(e.\u0275\u0275property("autoReload",!1)("data",o.modules)("columns",o.columns)("hasDetails",!0),e.\u0275\u0275advance(2),e.\u0275\u0275property("permission",o.permission)("selection",o.selection)("tableActions",o.tableActions))},dependencies:[We.O,at.j,Et.N,Cs]})}}class Ci{constructor(n){this.http=n}getMonitor(){return this.http.get("api/monitor")}static{this.\u0275fac=function(t){return new(t||Ci)(e.\u0275\u0275inject(T.HttpClient))}}static{this.\u0275prov=e.\u0275\u0275defineInjectable({token:Ci,factory:Ci.\u0275fac,providedIn:"root"})}}function $S(i,n){if(1&i&&(e.\u0275\u0275elementStart(0,"table",18)(1,"tbody")(2,"tr")(3,"td",19),e.\u0275\u0275i18n(4,3),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(5,"td"),e.\u0275\u0275text(6),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(7,"tr")(8,"td",19),e.\u0275\u0275i18n(9,4),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(10,"td"),e.\u0275\u0275text(11),e.\u0275\u0275pipe(12,"relativeDate"),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(13,"tr")(14,"td",19),e.\u0275\u0275i18n(15,5),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(16,"td"),e.\u0275\u0275text(17),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(18,"tr")(19,"td",19),e.\u0275\u0275i18n(20,6),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(21,"td"),e.\u0275\u0275text(22),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(23,"tr")(24,"td",19),e.\u0275\u0275i18n(25,7),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(26,"td"),e.\u0275\u0275text(27),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(28,"tr")(29,"td",19),e.\u0275\u0275i18n(30,8),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(31,"td"),e.\u0275\u0275text(32),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(33,"tr")(34,"td",19),e.\u0275\u0275i18n(35,9),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(36,"td"),e.\u0275\u0275text(37),e.\u0275\u0275elementEnd()()()()),2&i){const t=e.\u0275\u0275nextContext();e.\u0275\u0275advance(6),e.\u0275\u0275textInterpolate(t.mon_status.monmap.fsid),e.\u0275\u0275advance(5),e.\u0275\u0275textInterpolate(e.\u0275\u0275pipeBind1(12,7,t.mon_status.monmap.modified)),e.\u0275\u0275advance(6),e.\u0275\u0275textInterpolate(t.mon_status.monmap.epoch),e.\u0275\u0275advance(5),e.\u0275\u0275textInterpolate(t.mon_status.features.quorum_con),e.\u0275\u0275advance(5),e.\u0275\u0275textInterpolate(t.mon_status.features.quorum_mon),e.\u0275\u0275advance(5),e.\u0275\u0275textInterpolate(t.mon_status.features.required_con),e.\u0275\u0275advance(5),e.\u0275\u0275textInterpolate(t.mon_status.features.required_mon)}}class hs{constructor(n){this.monitorService=n,this.inQuorum={columns:[{prop:"name",name:$localize`Name`,cellTransformation:b.x.routerLink},{prop:"rank",name:$localize`Rank`},{prop:"public_addr",name:$localize`Public Address`},{prop:"cdOpenSessions",name:$localize`Open Sessions`,cellTransformation:b.x.sparkline,comparator:(t,o)=>{const s=p().last(t),d=p().last(o);return s&&d&&s!==d?s>d?1:-1:0}}]},this.notInQuorum={columns:[{prop:"name",name:$localize`Name`,cellTransformation:b.x.routerLink},{prop:"rank",name:$localize`Rank`},{prop:"public_addr",name:$localize`Public Address`}]}}refresh(){this.monitorService.getMonitor().subscribe(n=>{n.in_quorum.map(t=>(t.cdOpenSessions=t.stats.num_sessions.map(o=>o[1]),t.cdLink="/perf_counters/mon/"+t.name,t.cdParams={fromLink:"/monitor"},t)),n.out_quorum.map(t=>(t.cdLink="/perf_counters/mon/"+t.name,t.cdParams={fromLink:"/monitor"},t)),this.inQuorum.data=[...n.in_quorum],this.notInQuorum.data=[...n.out_quorum],this.mon_status=n.mon_status})}static{this.\u0275fac=function(t){return new(t||hs)(e.\u0275\u0275directiveInject(Ci))}}static{this.\u0275cmp=e.\u0275\u0275defineComponent({type:hs,selectors:[["cd-monitor"]],decls:15,vars:5,consts:()=>{let n,t,o,s,d,h,I,$,w,X;return n=$localize`:␟81b97b8ea996ad1e4f9fca8415021850214884b1␟5611592591303869712:Status`,t=$localize`:␟b3abe9eac5bcd94a54c8da93b312e085ec512e74␟2027256029092857733:In Quorum`,o=$localize`:␟ba4b748a676e1f217ce1e736fb7ec1215e677bae␟8740880580618468199:Not In Quorum`,s=$localize`:␟57ec6032f5618d4a9f16eb950ad23d2ce7c24b54␟8383963176033565854:Cluster ID`,d=$localize`:␟67d7facc3fec5f8a49ab9ba0a245872184264ce5␟468581621900329767:monmap modified`,h=$localize`:␟d4906731aaf2b94b4f547646c9bfe58bb77951b6␟7855517482361234533:monmap epoch`,I=$localize`:␟bd4ee06ffdc46d9dfbd0c0c4f81399021c680056␟6259516567890139825:quorum con`,$=$localize`:␟1176c7db8a8276ccb44cc3d42e2c28d9fa6c6596␟8482413158052149178:quorum mon`,w=$localize`:␟530ef677a09d681b3ab68cb0760494b3ae72a77c␟5804650887321678997:required con`,X=$localize`:␟a91558e0d506c32021c31843f8f168899fc65cbf␟75767560032534755:required mon`,[n,t,o,s,d,h,I,$,w,X,[1,"row"],[1,"col-lg-4"],[1,"cd-header"],["class","cds--data-table--sort cds--data-table--no-border cds--data-table cds--data-table--md",4,"ngIf"],[1,"col-lg-8"],[1,"in-quorum","cd-header"],[3,"data","columns"],[3,"fetchData","data","columns"],[1,"cds--data-table--sort","cds--data-table--no-border","cds--data-table","cds--data-table--md"],[1,"bold"]]},template:function(t,o){1&t&&(e.\u0275\u0275elementStart(0,"div",10)(1,"div",11)(2,"fieldset")(3,"legend",12),e.\u0275\u0275i18n(4,0),e.\u0275\u0275elementEnd(),e.\u0275\u0275template(5,$S,38,9,"table",13),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(6,"div",14)(7,"legend",15),e.\u0275\u0275i18n(8,1),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(9,"div"),e.\u0275\u0275element(10,"cd-table",16),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(11,"legend",15),e.\u0275\u0275i18n(12,2),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(13,"div")(14,"cd-table",17),e.\u0275\u0275listener("fetchData",function(){return o.refresh()}),e.\u0275\u0275elementEnd()()()()),2&t&&(e.\u0275\u0275advance(5),e.\u0275\u0275property("ngIf",o.mon_status),e.\u0275\u0275advance(5),e.\u0275\u0275property("data",o.inQuorum.data)("columns",o.inQuorum.columns),e.\u0275\u0275advance(4),e.\u0275\u0275property("data",o.notInQuorum.data)("columns",o.notInQuorum.columns))},dependencies:[l.NgIf,We.O,No.D]})}}class Xl{}function xS(i,n){if(1&i&&(e.\u0275\u0275elementStart(0,"span",19),e.\u0275\u0275i18n(1,3),e.\u0275\u0275elementEnd()),2&i){const t=e.\u0275\u0275nextContext(2);e.\u0275\u0275property("ngbTooltip",t.clusterWideTooltip)}}function US(i,n){1&i&&e.\u0275\u0275element(0,"hr",20)}function wS(i,n){if(1&i){const t=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"div",13)(1,"input",14),e.\u0275\u0275listener("change",function(){const s=e.\u0275\u0275restoreView(t).$implicit,d=e.\u0275\u0275nextContext();return e.\u0275\u0275resetView(d.changeValue(s))}),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(2,"label",15)(3,"strong"),e.\u0275\u0275text(4),e.\u0275\u0275elementEnd(),e.\u0275\u0275template(5,xS,2,1,"span",16),e.\u0275\u0275element(6,"br"),e.\u0275\u0275elementStart(7,"span",17),e.\u0275\u0275text(8),e.\u0275\u0275elementEnd()(),e.\u0275\u0275template(9,US,1,0,"hr",18),e.\u0275\u0275elementEnd()}if(2&i){const t=n.$implicit,o=n.last;e.\u0275\u0275advance(),e.\u0275\u0275property("checked",t.value)("indeterminate",t.indeterminate)("name",t.code)("id",t.code),e.\u0275\u0275advance(),e.\u0275\u0275property("for",t.code),e.\u0275\u0275advance(2),e.\u0275\u0275textInterpolate(t.name),e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf",t.clusterWide),e.\u0275\u0275advance(3),e.\u0275\u0275textInterpolate(t.description),e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf",!o)}}class Ts{constructor(n,t,o,s,d){this.activeModal=n,this.actionLabels=t,this.authStorageService=o,this.osdService=s,this.notificationService=d,this.initialSelection=[],this.osdFlagsForm=new C.UntypedFormGroup({}),this.flags=[{code:"noup",name:$localize`No Up`,description:$localize`OSDs are not allowed to start`,value:!1,clusterWide:!1,indeterminate:!1},{code:"nodown",name:$localize`No Down`,description:$localize`OSD failure reports are being ignored, such that the monitors will not mark OSDs down`,value:!1,clusterWide:!1,indeterminate:!1},{code:"noin",name:$localize`No In`,description:$localize`OSDs that were previously marked out will not be marked back in when they start`,value:!1,clusterWide:!1,indeterminate:!1},{code:"noout",name:$localize`No Out`,description:$localize`OSDs will not automatically be marked out after the configured interval`,value:!1,clusterWide:!1,indeterminate:!1}],this.clusterWideTooltip=$localize`The flag has been enabled for the entire cluster.`,this.permissions=this.authStorageService.getPermissions()}ngOnInit(){const n=this.selected.length;this.osdService.getFlags().subscribe(t=>{const o=this.getActivatedIndivFlags();this.flags.forEach(s=>{const d=o[s.code];t.includes(s.code)&&(s.clusterWide=!0),d===n?s.value=!0:d>0&&(s.indeterminate=!0)}),this.initialSelection=p().cloneDeep(this.flags)})}getActivatedIndivFlags(){const n={};return this.flags.forEach(t=>{n[t.code]=0}),[].concat(...this.selected.map(t=>t.state)).map(t=>{Object.keys(n).includes(t)&&(n[t]=n[t]+1)}),n}changeValue(n){n.value=!n.value,n.indeterminate=!1}resetSelection(){this.flags=p().cloneDeep(this.initialSelection)}submitAction(){const n={};this.flags.forEach(o=>{o.indeterminate?n[o.code]=null:n[o.code]=o.value});const t=this.selected.map(o=>o.osd);this.osdService.updateIndividualFlags(n,t).subscribe(()=>{this.notificationService.show(Ae._.success,$localize`Updated OSD Flags`),this.activeModal.close()},()=>{this.activeModal.close()})}static{this.\u0275fac=function(t){return new(t||Ts)(e.\u0275\u0275directiveInject(G.NgbActiveModal),e.\u0275\u0275directiveInject(m.Ss),e.\u0275\u0275directiveInject(c.v),e.\u0275\u0275directiveInject(Ct),e.\u0275\u0275directiveInject(Q.J))}}static{this.\u0275cmp=e.\u0275\u0275defineComponent({type:Ts,selectors:[["cd-osd-flags-indiv-modal"]],decls:12,vars:6,consts:()=>{let n,t,o;return n=$localize`:␟b6b27c16ddf33b855412c82069dca8120bd3a68a␟2988036888607431567:Individual OSD Flags`,t=$localize`:␟e2a3f211cea2cbadb29b6df93e544440b6b68d3e␟7629422865403582133:Restore previous selection`,o=$localize`:␟dba0ed9ba355a3bd3296c0bef3bb518744a51a89␟300820688504209818:Cluster-wide`,[["formDir","ngForm"],n,t,o,[3,"modalRef"],[1,"modal-title"],[1,"modal-content"],["name","osdFlagsForm","novalidate","",3,"formGroup"],[1,"modal-body","osd-modal"],["class","custom-control custom-checkbox",4,"ngFor","ngForOf"],[1,"modal-footer"],["type","button",1,"btn","btn-light",3,"click"],[3,"submitActionEvent","form","showSubmit","submitText"],[1,"custom-control","custom-checkbox"],["type","checkbox",1,"custom-control-input",3,"change","checked","indeterminate","name","id"],["ng-class","['tc_' + key]",1,"custom-control-label",3,"for"],["class","badge badge-hdd ms-2",3,"ngbTooltip",4,"ngIf"],[1,"form-text","text-muted"],["class","m-1",4,"ngIf"],[1,"badge","badge-hdd","ms-2",3,"ngbTooltip"],[1,"m-1"]]},template:function(t,o){if(1&t){const s=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"cd-modal",4),e.\u0275\u0275elementContainerStart(1,5),e.\u0275\u0275i18n(2,1),e.\u0275\u0275elementContainerEnd(),e.\u0275\u0275elementContainerStart(3,6),e.\u0275\u0275elementStart(4,"form",7,0)(6,"div",8),e.\u0275\u0275template(7,wS,10,9,"div",9),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(8,"div",10)(9,"button",11),e.\u0275\u0275listener("click",function(){return e.\u0275\u0275restoreView(s),e.\u0275\u0275resetView(o.resetSelection())}),e.\u0275\u0275i18n(10,2),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(11,"cd-form-button-panel",12),e.\u0275\u0275listener("submitActionEvent",function(){return e.\u0275\u0275restoreView(s),e.\u0275\u0275resetView(o.submitAction())}),e.\u0275\u0275elementEnd()()(),e.\u0275\u0275elementContainerEnd(),e.\u0275\u0275elementEnd()}2&t&&(e.\u0275\u0275property("modalRef",o.activeModal),e.\u0275\u0275advance(4),e.\u0275\u0275property("formGroup",o.osdFlagsForm),e.\u0275\u0275advance(3),e.\u0275\u0275property("ngForOf",o.flags),e.\u0275\u0275advance(4),e.\u0275\u0275property("form",o.osdFlagsForm)("showSubmit",o.permissions.osd.update)("submitText",o.actionLabels.UPDATE))},dependencies:[l.NgForOf,l.NgIf,Ut.z,oe.e,Ge.S,we.a,ze.E,C.\u0275NgNoValidate,C.NgControlStatusGroup,C.FormGroupDirective,G.NgbTooltip]})}}var ll=r(24689);function GS(i,n){1&i&&e.\u0275\u0275element(0,"hr",15)}function HS(i,n){if(1&i){const t=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"div",10)(1,"input",11),e.\u0275\u0275listener("change",function(){const s=e.\u0275\u0275restoreView(t).$implicit;return e.\u0275\u0275resetView(s.value=!s.value)}),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(2,"label",12)(3,"strong"),e.\u0275\u0275text(4),e.\u0275\u0275elementEnd(),e.\u0275\u0275element(5,"br"),e.\u0275\u0275elementStart(6,"span",13),e.\u0275\u0275text(7),e.\u0275\u0275elementEnd()(),e.\u0275\u0275template(8,GS,1,0,"hr",14),e.\u0275\u0275elementEnd()}if(2&i){const t=n.$implicit,o=n.last;e.\u0275\u0275advance(),e.\u0275\u0275property("checked",t.value)("name",t.code)("id",t.code)("disabled",t.disabled),e.\u0275\u0275advance(),e.\u0275\u0275property("for",t.code),e.\u0275\u0275advance(2),e.\u0275\u0275textInterpolate(t.name),e.\u0275\u0275advance(3),e.\u0275\u0275textInterpolate(t.description),e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf",!o)}}class Fs{constructor(n,t,o,s,d){this.activeModal=n,this.actionLabels=t,this.authStorageService=o,this.osdService=s,this.notificationService=d,this.osdFlagsForm=new C.UntypedFormGroup({}),this.allFlags={noin:{code:"noin",name:$localize`No In`,value:!1,description:$localize`OSDs that were previously marked out will not be marked back in when they start`},noout:{code:"noout",name:$localize`No Out`,value:!1,description:$localize`OSDs will not automatically be marked out after the configured interval`},noup:{code:"noup",name:$localize`No Up`,value:!1,description:$localize`OSDs are not allowed to start`},nodown:{code:"nodown",name:$localize`No Down`,value:!1,description:$localize`OSD failure reports are being ignored, such that the monitors will not mark OSDs down`},pause:{code:"pause",name:$localize`Pause`,value:!1,description:$localize`Pauses reads and writes`},noscrub:{code:"noscrub",name:$localize`No Scrub`,value:!1,description:$localize`Scrubbing is disabled`},"nodeep-scrub":{code:"nodeep-scrub",name:$localize`No Deep Scrub`,value:!1,description:$localize`Deep Scrubbing is disabled`},nobackfill:{code:"nobackfill",name:$localize`No Backfill`,value:!1,description:$localize`Backfilling of PGs is suspended`},norebalance:{code:"norebalance",name:$localize`No Rebalance`,value:!1,description:$localize`OSD will choose not to backfill unless PG is also degraded`},norecover:{code:"norecover",name:$localize`No Recover`,value:!1,description:$localize`Recovery of PGs is suspended`},sortbitwise:{code:"sortbitwise",name:$localize`Bitwise Sort`,value:!1,description:$localize`Use bitwise sort`,disabled:!0},purged_snapdirs:{code:"purged_snapdirs",name:$localize`Purged Snapdirs`,value:!1,description:$localize`OSDs have converted snapsets`,disabled:!0},recovery_deletes:{code:"recovery_deletes",name:$localize`Recovery Deletes`,value:!1,description:$localize`Deletes performed during recovery instead of peering`,disabled:!0},pglog_hardlimit:{code:"pglog_hardlimit",name:$localize`PG Log Hard Limit`,value:!1,description:$localize`Puts a hard limit on pg log length`,disabled:!0}},this.unknownFlags=[],this.permissions=this.authStorageService.getPermissions()}ngOnInit(){this.osdService.getFlags().subscribe(n=>{n.forEach(t=>{this.allFlags[t]?this.allFlags[t].value=!0:this.unknownFlags.push(t)}),this.flags=p().toArray(this.allFlags)})}submitAction(){const n=this.flags.filter(t=>t.value).map(t=>t.code).concat(this.unknownFlags);this.osdService.updateFlags(n).subscribe(()=>{this.notificationService.show(Ae._.success,$localize`Updated OSD Flags`),this.activeModal.close()},()=>{this.activeModal.close()})}static{this.\u0275fac=function(t){return new(t||Fs)(e.\u0275\u0275directiveInject(G.NgbActiveModal),e.\u0275\u0275directiveInject(m.Ss),e.\u0275\u0275directiveInject(c.v),e.\u0275\u0275directiveInject(Ct),e.\u0275\u0275directiveInject(Q.J))}}static{this.\u0275cmp=e.\u0275\u0275defineComponent({type:Fs,selectors:[["cd-osd-flags-modal"]],decls:10,vars:6,consts:()=>{let n;return n=$localize`:␟5ef50ba2514414f799d4c8fc36067a251904ba81␟9119922393697848507:Cluster-wide OSD Flags`,[["formDir","ngForm"],n,[3,"modalRef"],[1,"modal-title"],[1,"modal-content"],["name","osdFlagsForm","novalidate","","cdFormScope","osd",3,"formGroup"],[1,"modal-body","osd-modal"],["class","custom-control custom-checkbox",4,"ngFor","ngForOf"],[1,"modal-footer"],[3,"submitActionEvent","form","showSubmit","submitText"],[1,"custom-control","custom-checkbox"],["type","checkbox",1,"custom-control-input",3,"change","checked","name","id","disabled"],["ng-class","['tc_' + key]",1,"custom-control-label",3,"for"],[1,"form-text","text-muted"],["class","m-1",4,"ngIf"],[1,"m-1"]]},template:function(t,o){if(1&t){const s=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"cd-modal",2),e.\u0275\u0275elementContainerStart(1,3),e.\u0275\u0275i18n(2,1),e.\u0275\u0275elementContainerEnd(),e.\u0275\u0275elementContainerStart(3,4),e.\u0275\u0275elementStart(4,"form",5,0)(6,"div",6),e.\u0275\u0275template(7,HS,9,8,"div",7),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(8,"div",8)(9,"cd-form-button-panel",9),e.\u0275\u0275listener("submitActionEvent",function(){return e.\u0275\u0275restoreView(s),e.\u0275\u0275resetView(o.submitAction())}),e.\u0275\u0275elementEnd()()(),e.\u0275\u0275elementContainerEnd(),e.\u0275\u0275elementEnd()}2&t&&(e.\u0275\u0275property("modalRef",o.activeModal),e.\u0275\u0275advance(4),e.\u0275\u0275property("formGroup",o.osdFlagsForm),e.\u0275\u0275advance(3),e.\u0275\u0275property("ngForOf",o.flags),e.\u0275\u0275advance(2),e.\u0275\u0275property("form",o.osdFlagsForm)("showSubmit",o.permissions.osd.update)("submitText",o.actionLabels.UPDATE))},dependencies:[l.NgForOf,l.NgIf,Ut.z,oe.e,Ge.S,ll.q,we.a,ze.E,C.\u0275NgNoValidate,C.NgControlStatusGroup,C.FormGroupDirective]})}}const VS=i=>[i];function BS(i,n){if(1&i&&(e.\u0275\u0275elementStart(0,"cd-helper"),e.\u0275\u0275text(1),e.\u0275\u0275elementEnd()),2&i){const t=e.\u0275\u0275nextContext(2).$implicit;e.\u0275\u0275advance(),e.\u0275\u0275textInterpolate1(" ",t.long_desc,"")}}function zS(i,n){if(1&i&&(e.\u0275\u0275elementStart(0,"div",6)(1,"label",7)(2,"b"),e.\u0275\u0275text(3),e.\u0275\u0275elementEnd(),e.\u0275\u0275element(4,"br"),e.\u0275\u0275elementStart(5,"span",8),e.\u0275\u0275text(6),e.\u0275\u0275template(7,BS,2,1,"cd-helper",9),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(8,"div",10)(9,"div",11),e.\u0275\u0275element(10,"input",12)(11,"label",13),e.\u0275\u0275elementEnd()()()),2&i){const t=e.\u0275\u0275nextContext().$implicit;e.\u0275\u0275advance(),e.\u0275\u0275property("for",t.name),e.\u0275\u0275advance(2),e.\u0275\u0275textInterpolate(t.text),e.\u0275\u0275advance(3),e.\u0275\u0275textInterpolate1(" ",t.desc," "),e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf",t.long_desc),e.\u0275\u0275advance(3),e.\u0275\u0275property("id",t.name)("formControlName",t.name),e.\u0275\u0275advance(),e.\u0275\u0275property("for",t.name)}}function XS(i,n){if(1&i&&(e.\u0275\u0275elementStart(0,"cd-helper"),e.\u0275\u0275text(1),e.\u0275\u0275elementEnd()),2&i){const t=e.\u0275\u0275nextContext(2).$implicit;e.\u0275\u0275advance(),e.\u0275\u0275textInterpolate1(" ",t.long_desc,"")}}function kS(i,n){if(1&i){const t=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"button",18),e.\u0275\u0275listener("click",function(){e.\u0275\u0275restoreView(t);const s=e.\u0275\u0275nextContext(2).$implicit,d=e.\u0275\u0275nextContext();return e.\u0275\u0275resetView(d.resetValue(s.name))}),e.\u0275\u0275element(1,"i",19),e.\u0275\u0275elementEnd()}if(2&i){const t=e.\u0275\u0275nextContext(3);e.\u0275\u0275advance(),e.\u0275\u0275property("ngClass",e.\u0275\u0275pureFunction1(1,VS,t.icons.erase))}}function jS(i,n){if(1&i&&(e.\u0275\u0275elementStart(0,"span",20),e.\u0275\u0275text(1),e.\u0275\u0275elementEnd()),2&i){const t=e.\u0275\u0275nextContext(2).$implicit;e.\u0275\u0275advance(),e.\u0275\u0275textInterpolate1(" ",t.additionalTypeInfo.patternHelpText,"")}}function WS(i,n){if(1&i&&(e.\u0275\u0275elementStart(0,"span",20),e.\u0275\u0275text(1),e.\u0275\u0275elementEnd()),2&i){const t=e.\u0275\u0275nextContext(2).$implicit;e.\u0275\u0275advance(),e.\u0275\u0275textInterpolate1(" ",t.additionalTypeInfo.patternHelpText,"")}}function KS(i,n){if(1&i&&(e.\u0275\u0275elementStart(0,"span",20),e.\u0275\u0275i18n(1,0),e.\u0275\u0275elementEnd()),2&i){const t=e.\u0275\u0275nextContext(2).$implicit;e.\u0275\u0275advance(),e.\u0275\u0275i18nExp(t.maxValue),e.\u0275\u0275i18nApply(1)}}function QS(i,n){if(1&i&&(e.\u0275\u0275elementStart(0,"span",20),e.\u0275\u0275i18n(1,1),e.\u0275\u0275elementEnd()),2&i){const t=e.\u0275\u0275nextContext(2).$implicit;e.\u0275\u0275advance(),e.\u0275\u0275i18nExp(t.minValue),e.\u0275\u0275i18nApply(1)}}function YS(i,n){if(1&i&&(e.\u0275\u0275elementStart(0,"div",6)(1,"label",7),e.\u0275\u0275text(2),e.\u0275\u0275element(3,"br"),e.\u0275\u0275elementStart(4,"span",8),e.\u0275\u0275text(5),e.\u0275\u0275template(6,XS,2,1,"cd-helper",9),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(7,"div",10)(8,"div",14),e.\u0275\u0275element(9,"input",15),e.\u0275\u0275template(10,kS,2,3,"button",16),e.\u0275\u0275elementEnd(),e.\u0275\u0275template(11,jS,2,1,"span",17)(12,WS,2,1,"span",17)(13,KS,2,1,"span",17)(14,QS,2,1,"span",17),e.\u0275\u0275elementEnd()()),2&i){const t=e.\u0275\u0275nextContext().$implicit,o=e.\u0275\u0275nextContext();e.\u0275\u0275advance(),e.\u0275\u0275property("for",t.name),e.\u0275\u0275advance(),e.\u0275\u0275textInterpolate1("",t.text," "),e.\u0275\u0275advance(3),e.\u0275\u0275textInterpolate1(" ",t.desc," "),e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf",t.long_desc),e.\u0275\u0275advance(3),e.\u0275\u0275property("type",t.additionalTypeInfo.inputType)("id",t.name)("placeholder",t.additionalTypeInfo.humanReadable)("formControlName",t.name)("step",o.getStep(t.type,o.optionsForm.getValue(t.name))),e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf",o.optionsFormShowReset),e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf",o.optionsForm.showError(t.name,o.optionsFormDir,"pattern")),e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf",o.optionsForm.showError(t.name,o.optionsFormDir,"invalidUuid")),e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf",o.optionsForm.showError(t.name,o.optionsFormDir,"max")),e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf",o.optionsForm.showError(t.name,o.optionsFormDir,"min"))}}function JS(i,n){1&i&&e.\u0275\u0275element(0,"hr",21)}function ZS(i,n){if(1&i&&(e.\u0275\u0275elementStart(0,"div"),e.\u0275\u0275template(1,zS,12,7,"div",4)(2,YS,15,14,"div",4)(3,JS,1,0,"hr",5),e.\u0275\u0275elementEnd()),2&i){const t=n.$implicit,o=n.last;e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf","bool"===t.type),e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf","bool"!==t.type),e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf",!o)}}class Si{constructor(n){this.configService=n,this.optionNames=[],this.optionsForm=new Ue.$({}),this.optionsFormDir=new C.NgForm([],[]),this.optionsFormGroupName="",this.optionsFormShowReset=!0,this.icons=g.FI,this.options=[],this.optionsFormGroup=new Ue.$({})}static optionNameToText(n){const t=["mon","mgr","osd","mds","client"];return n.split("_").filter((o,s)=>0!==s||!t.includes(o)).map(o=>o.charAt(0).toUpperCase()+o.substring(1)).join(" ")}ngOnInit(){this.createForm(),this.loadStoredData()}createForm(){this.optionsForm.addControl(this.optionsFormGroupName,this.optionsFormGroup),this.optionNames.forEach(n=>{this.optionsFormGroup.addControl(n,new C.UntypedFormControl(null))})}getStep(n,t){return On.getTypeStep(n,t)}loadStoredData(){this.configService.filter(this.optionNames).subscribe(n=>{this.options=n.map(t=>{const o=this.optionsForm.get(t.name),s=On.getTypeValidators(t);return t.additionalTypeInfo=On.getType(t.type),t.text=Si.optionNameToText(t.name),t.value=p().find(t.value,d=>"osd"===d.section),t.value&&("bool"===t.additionalTypeInfo.name?o.setValue("true"===t.value.value):o.setValue(t.value.value)),s&&(t.patternHelpText=s.patternHelpText,"max"in s&&""!==s.max&&(t.maxValue=s.max),"min"in s&&""!==s.min&&(t.minValue=s.min),o.setValidators(s.validators)),t})})}saveValues(){const n={};return this.optionNames.forEach(t=>{const o=this.optionsForm.getValue(t);null!==o&&""!==o&&(n[t]={section:"osd",value:o})}),this.configService.bulkCreate({options:n})}resetValue(n){this.configService.delete(n,"osd").subscribe(()=>{this.optionsForm.get(n).reset()})}static{this.\u0275fac=function(t){return new(t||Si)(e.\u0275\u0275directiveInject(P.s))}}static{this.\u0275cmp=e.\u0275\u0275defineComponent({type:Si,selectors:[["cd-config-option"]],inputs:{optionNames:"optionNames",optionsForm:"optionsForm",optionsFormDir:"optionsFormDir",optionsFormGroupName:"optionsFormGroupName",optionsFormShowReset:"optionsFormShowReset"},decls:2,vars:2,consts:()=>{let n,t,o;return n=$localize`:␟6c947210e2d162b6225083d18820ab602f58cd2d␟1423995964683265961:Remove the custom configuration value. The default configuration will be inherited and used instead.`,t=$localize`:␟454ee9cb60b00446a8fb147fd2cc5eb836320586␟6379768697525276989:The entered value is too high! It must not be greater than ${"\ufffd0\ufffd"}:INTERPOLATION:.`,o=$localize`:␟7fc8a22825131e028336f60ef909ccbd96059703␟3754071702087122993:The entered value is too low! It must not be lower than ${"\ufffd0\ufffd"}:INTERPOLATION:.`,[t,o,[3,"formGroup"],[4,"ngFor","ngForOf"],["class","form-group row pt-2",4,"ngIf"],["class","my-2",4,"ngIf"],[1,"form-group","row","pt-2"],[1,"cd-col-form-label",3,"for"],[1,"text-muted"],[4,"ngIf"],[1,"cd-col-form-input"],[1,"custom-control","custom-checkbox"],["type","checkbox",1,"custom-control-input",3,"id","formControlName"],[1,"custom-control-label",3,"for"],[1,"input-group"],[1,"form-control",3,"type","id","placeholder","formControlName","step"],["class","btn btn-light","type","button","data-toggle","button","title",n,3,"click",4,"ngIf"],["class","invalid-feedback",4,"ngIf"],["type","button","data-toggle","button","title",n,1,"btn","btn-light",3,"click"],["aria-hidden","true",3,"ngClass"],[1,"invalid-feedback"],[1,"my-2"]]},template:function(t,o){1&t&&(e.\u0275\u0275elementStart(0,"div",2),e.\u0275\u0275template(1,ZS,4,3,"div",3),e.\u0275\u0275elementEnd()),2&t&&(e.\u0275\u0275property("formGroup",o.optionsFormGroup),e.\u0275\u0275advance(),e.\u0275\u0275property("ngForOf",o.options))},dependencies:[l.NgClass,l.NgForOf,l.NgIf,C.DefaultValueAccessor,C.CheckboxControlValueAccessor,C.NgControlStatus,C.NgControlStatusGroup,C.FormGroupDirective,C.FormControlName,Ge.S,we.a,Ve.C,ze.E,y.m],styles:[".custom-checkbox[_ngcontent-%COMP%]   label[_ngcontent-%COMP%], .custom-checkbox[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{cursor:pointer}.col-form-label[_ngcontent-%COMP%]{text-align:left}"]})}}class kl{static{this.basicOptions=["osd_scrub_during_recovery","osd_scrub_begin_hour","osd_scrub_end_hour","osd_scrub_begin_week_day","osd_scrub_end_week_day","osd_scrub_min_interval","osd_scrub_max_interval","osd_deep_scrub_interval","osd_scrub_auto_repair","osd_max_scrubs","osd_scrub_priority","osd_scrub_sleep"]}static{this.advancedOptions=["osd_scrub_auto_repair_num_errors","osd_debug_deep_scrub_sleep","osd_deep_scrub_keys","osd_deep_scrub_large_omap_object_key_threshold","osd_deep_scrub_large_omap_object_value_sum_threshold","osd_deep_scrub_randomize_ratio","osd_deep_scrub_stride","osd_deep_scrub_update_digest_min_age","osd_requested_scrub_priority","osd_scrub_backoff_ratio","osd_scrub_chunk_max","osd_scrub_chunk_min","osd_scrub_cost","osd_scrub_interval_randomize_ratio","osd_scrub_invalid_stats","osd_scrub_load_threshold","osd_scrub_max_preemptions","osd_shallow_scrub_chunk_max","osd_shallow_scrub_chunk_min"]}}const qS=["basicOptionsValues"],eh=["advancedOptionsValues"];function th(i,n){if(1&i){const t=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"a",18),e.\u0275\u0275listener("click",function(){e.\u0275\u0275restoreView(t);const s=e.\u0275\u0275nextContext();return e.\u0275\u0275resetView(s.advancedEnabled=!0)}),e.\u0275\u0275i18n(1,4),e.\u0275\u0275elementEnd()}}function nh(i,n){if(1&i&&(e.\u0275\u0275elementStart(0,"div")(1,"h3",19),e.\u0275\u0275i18n(2,5),e.\u0275\u0275elementEnd(),e.\u0275\u0275element(3,"cd-config-option",11,2),e.\u0275\u0275elementEnd()),2&i){const t=e.\u0275\u0275nextContext(),o=e.\u0275\u0275reference(7);e.\u0275\u0275advance(3),e.\u0275\u0275property("optionNames",t.advancedOptions)("optionsForm",t.osdPgScrubForm)("optionsFormDir",o)("optionsFormGroupName","advancedFormGroup")}}class vs{constructor(n,t,o,s){this.activeModal=n,this.authStorageService=t,this.notificationService=o,this.actionLabels=s,this.basicOptions=kl.basicOptions,this.advancedOptions=kl.advancedOptions,this.advancedEnabled=!1,this.osdPgScrubForm=new Ue.$({}),this.resource=$localize`PG scrub options`,this.action=this.actionLabels.EDIT,this.permissions=this.authStorageService.getPermissions()}submitAction(){const n=[this.basicOptionsValues.saveValues()];this.advancedOptionsValues&&n.push(this.advancedOptionsValues.saveValues()),(0,K.forkJoin)(n).subscribe(()=>{this.notificationService.show(Ae._.success,$localize`Updated PG scrub options`),this.activeModal.close()},()=>{this.activeModal.close()})}static{this.\u0275fac=function(t){return new(t||vs)(e.\u0275\u0275directiveInject(G.NgbActiveModal),e.\u0275\u0275directiveInject(c.v),e.\u0275\u0275directiveInject(Q.J),e.\u0275\u0275directiveInject(m.Ss))}}static{this.\u0275cmp=e.\u0275\u0275defineComponent({type:vs,selectors:[["cd-osd-pg-scrub-modal"]],viewQuery:function(t,o){if(1&t&&(e.\u0275\u0275viewQuery(qS,7),e.\u0275\u0275viewQuery(eh,5)),2&t){let s;e.\u0275\u0275queryRefresh(s=e.\u0275\u0275loadQuery())&&(o.basicOptionsValues=s.first),e.\u0275\u0275queryRefresh(s=e.\u0275\u0275loadQuery())&&(o.advancedOptionsValues=s.first)}},decls:19,vars:21,consts:()=>{let n,t,o;return n=$localize`:form title␟fb127ea03835b3230f0ed981c7080e2ccb879621␟3346778808274133574:${"\ufffd0\ufffd"}:INTERPOLATION: ${"\ufffd1\ufffd"}:INTERPOLATION_1:`,t=$localize`:␟1cfe07dac5b4ee1c464eb24225ddeb4f1d24076a␟5943692975122361417:Advanced...`,o=$localize`:␟b1ef1c12ddcee305353623919ef02778569f5454␟2731027584190859351:Advanced configuration options`,[["formDir","ngForm"],["basicOptionsValues",""],["advancedOptionsValues",""],n,t,o,[3,"modalRef"],[1,"modal-title"],[1,"modal-content"],["novalidate","","cdFormScope","osd",3,"formGroup"],[1,"modal-body","osd-modal"],[3,"optionNames","optionsForm","optionsFormDir","optionsFormGroupName"],[1,"row"],[1,"col-sm-12"],["class","pull-right margin-right-md",3,"click",4,"ngIf"],[4,"ngIf"],[1,"modal-footer"],[3,"submitActionEvent","form","showSubmit","submitText"],[1,"pull-right","margin-right-md",3,"click"],[1,"page-header"]]},template:function(t,o){if(1&t){const s=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"cd-modal",6),e.\u0275\u0275elementContainerStart(1,7),e.\u0275\u0275i18n(2,3),e.\u0275\u0275pipe(3,"titlecase"),e.\u0275\u0275pipe(4,"upperFirst"),e.\u0275\u0275elementContainerEnd(),e.\u0275\u0275elementContainerStart(5,8),e.\u0275\u0275elementStart(6,"form",9,0)(8,"div",10),e.\u0275\u0275element(9,"cd-config-option",11,1),e.\u0275\u0275elementStart(11,"div",12)(12,"div",13),e.\u0275\u0275template(13,th,2,0,"a",14),e.\u0275\u0275elementEnd()(),e.\u0275\u0275template(14,nh,5,4,"div",15),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(15,"div",16)(16,"cd-form-button-panel",17),e.\u0275\u0275pipe(17,"titlecase"),e.\u0275\u0275pipe(18,"upperFirst"),e.\u0275\u0275listener("submitActionEvent",function(){return e.\u0275\u0275restoreView(s),e.\u0275\u0275resetView(o.submitAction())}),e.\u0275\u0275elementEnd()()(),e.\u0275\u0275elementContainerEnd(),e.\u0275\u0275elementEnd()}if(2&t){const s=e.\u0275\u0275reference(7);e.\u0275\u0275property("modalRef",o.activeModal),e.\u0275\u0275advance(4),e.\u0275\u0275i18nExp(e.\u0275\u0275pipeBind1(3,13,o.action))(e.\u0275\u0275pipeBind1(4,15,o.resource)),e.\u0275\u0275i18nApply(2),e.\u0275\u0275advance(2),e.\u0275\u0275property("formGroup",o.osdPgScrubForm),e.\u0275\u0275advance(3),e.\u0275\u0275property("optionNames",o.basicOptions)("optionsForm",o.osdPgScrubForm)("optionsFormDir",s)("optionsFormGroupName","basicFormGroup"),e.\u0275\u0275advance(4),e.\u0275\u0275property("ngIf",!o.advancedEnabled),e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf",o.advancedEnabled),e.\u0275\u0275advance(2),e.\u0275\u0275property("form",o.osdPgScrubForm)("showSubmit",o.permissions.configOpt.update)("submitText",e.\u0275\u0275pipeBind1(17,17,o.action)+" "+e.\u0275\u0275pipeBind1(18,19,o.resource))}},dependencies:[l.NgIf,Ut.z,Si,oe.e,ll.q,ze.E,C.\u0275NgNoValidate,C.NgControlStatusGroup,C.FormGroupDirective,l.TitleCasePipe,Pe.r]})}}const oh=i=>({required:i});function ih(i,n){if(1&i&&(e.\u0275\u0275elementStart(0,"option",27),e.\u0275\u0275text(1),e.\u0275\u0275elementEnd()),2&i){const t=n.$implicit;e.\u0275\u0275property("value",t.name),e.\u0275\u0275advance(),e.\u0275\u0275textInterpolate1(" ",t.text," ")}}function ah(i,n){1&i&&(e.\u0275\u0275elementStart(0,"span",28),e.\u0275\u0275i18n(1,4),e.\u0275\u0275elementEnd())}function sh(i,n){if(1&i&&(e.\u0275\u0275elementStart(0,"cd-helper"),e.\u0275\u0275text(1),e.\u0275\u0275elementEnd()),2&i){const t=e.\u0275\u0275nextContext().$implicit;e.\u0275\u0275advance(),e.\u0275\u0275textInterpolate(t.value.desc)}}function rh(i,n){1&i&&(e.\u0275\u0275elementStart(0,"span",28),e.\u0275\u0275i18n(1,5),e.\u0275\u0275elementEnd())}function lh(i,n){if(1&i&&(e.\u0275\u0275elementStart(0,"span",28),e.\u0275\u0275i18n(1,6),e.\u0275\u0275elementEnd()),2&i){const t=e.\u0275\u0275nextContext().$implicit;e.\u0275\u0275advance(),e.\u0275\u0275i18nExp(t.value.patternHelpText),e.\u0275\u0275i18nApply(1)}}function _h(i,n){if(1&i&&(e.\u0275\u0275elementStart(0,"span",28),e.\u0275\u0275i18n(1,7),e.\u0275\u0275elementEnd()),2&i){const t=e.\u0275\u0275nextContext().$implicit;e.\u0275\u0275advance(),e.\u0275\u0275i18nExp(t.value.maxValue),e.\u0275\u0275i18nApply(1)}}function ch(i,n){if(1&i&&(e.\u0275\u0275elementStart(0,"span",28),e.\u0275\u0275i18n(1,8),e.\u0275\u0275elementEnd()),2&i){const t=e.\u0275\u0275nextContext().$implicit;e.\u0275\u0275advance(),e.\u0275\u0275i18nExp(t.value.minValue),e.\u0275\u0275i18nApply(1)}}function dh(i,n){if(1&i&&(e.\u0275\u0275elementStart(0,"div",14)(1,"label",29)(2,"span",30),e.\u0275\u0275text(3),e.\u0275\u0275elementEnd(),e.\u0275\u0275template(4,sh,2,1,"cd-helper",31),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(5,"div",16),e.\u0275\u0275element(6,"input",32),e.\u0275\u0275template(7,rh,2,0,"span",19)(8,lh,2,1,"span",19)(9,_h,2,1,"span",19)(10,ch,2,1,"span",19),e.\u0275\u0275elementEnd()()),2&i){const t=n.$implicit,o=e.\u0275\u0275nextContext(),s=e.\u0275\u0275reference(5);e.\u0275\u0275advance(),e.\u0275\u0275property("for",t.key),e.\u0275\u0275advance(),e.\u0275\u0275property("ngClass",e.\u0275\u0275pureFunction1(11,oh,o.osdRecvSpeedForm.getValue("customizePriority"))),e.\u0275\u0275advance(),e.\u0275\u0275textInterpolate1(" ",t.value.text," "),e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf",t.value.desc),e.\u0275\u0275advance(2),e.\u0275\u0275property("id",t.key)("formControlName",t.key)("readonly",!o.osdRecvSpeedForm.getValue("customizePriority")),e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf",o.osdRecvSpeedForm.getValue("customizePriority")&&o.osdRecvSpeedForm.showError(t.key,s,"required")),e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf",o.osdRecvSpeedForm.getValue("customizePriority")&&o.osdRecvSpeedForm.showError(t.key,s,"pattern")),e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf",o.osdRecvSpeedForm.getValue("customizePriority")&&o.osdRecvSpeedForm.showError(t.key,s,"max")),e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf",o.osdRecvSpeedForm.getValue("customizePriority")&&o.osdRecvSpeedForm.showError(t.key,s,"min"))}}class Ms{constructor(n,t,o,s,d,h){this.activeModal=n,this.actionLabels=t,this.authStorageService=o,this.configService=s,this.notificationService=d,this.osdService=h,this.priorities=[],this.priorityAttrs={},this.permissions=this.authStorageService.getPermissions(),this.priorities=this.osdService.osdRecvSpeedModalPriorities.KNOWN_PRIORITIES,this.osdRecvSpeedForm=new Ue.$({priority:new C.UntypedFormControl(null,{validators:[C.Validators.required]}),customizePriority:new C.UntypedFormControl(!1)}),this.priorityAttrs={osd_max_backfills:{text:$localize`Max Backfills`,desc:"",patternHelpText:"",maxValue:void 0,minValue:void 0},osd_recovery_max_active:{text:$localize`Recovery Max Active`,desc:"",patternHelpText:"",maxValue:void 0,minValue:void 0},osd_recovery_max_single_start:{text:$localize`Recovery Max Single Start`,desc:"",patternHelpText:"",maxValue:void 0,minValue:void 0},osd_recovery_sleep:{text:$localize`Recovery Sleep`,desc:"",patternHelpText:"",maxValue:void 0,minValue:void 0}},Object.keys(this.priorityAttrs).forEach(I=>{this.osdRecvSpeedForm.addControl(I,new C.UntypedFormControl(null,{validators:[C.Validators.required]}))})}ngOnInit(){this.configService.filter(Object.keys(this.priorityAttrs)).subscribe(n=>{const t=this.getCurrentValues(n);this.detectPriority(t.values,o=>{this.setPriority(o)}),this.setDescription(t.configOptions),this.setValidators(t.configOptions)})}detectPriority(n,t){const o=p().find(this.priorities,s=>p().isEqual(s.values,n));return this.osdRecvSpeedForm.controls.customizePriority.setValue(!1),o?t(o):4===Object.entries(n).length?(this.osdRecvSpeedForm.controls.customizePriority.setValue(!0),t(Object({name:"custom",text:$localize`Custom`,values:n}))):t(this.priorities[0])}getCurrentValues(n){const t={values:{},configOptions:[]};return n.forEach(o=>{t.configOptions.push(o),"value"in o?o.value.forEach(s=>{"osd"===s.section&&(t.values[o.name]=Number(s.value))}):"default"in o&&null!==o.default&&(t.values[o.name]=Number(o.default))}),t}setDescription(n){n.forEach(t=>{""!==t.desc&&(this.priorityAttrs[t.name].desc=t.desc)})}setPriority(n){const t=p().find(this.priorities,o=>"custom"===o.name);"custom"===n.name?t||this.priorities.push(n):t&&this.priorities.splice(this.priorities.indexOf(t),1),this.osdRecvSpeedForm.controls.priority.setValue(n.name),Object.entries(n.values).forEach(([o,s])=>{this.osdRecvSpeedForm.controls[o].setValue(s)})}setValidators(n){n.forEach(t=>{const o=On.getTypeValidators(t);o?(o.validators.push(C.Validators.required),"max"in o&&""!==o.max&&(this.priorityAttrs[t.name].maxValue=o.max),"min"in o&&""!==o.min&&(this.priorityAttrs[t.name].minValue=o.min),this.priorityAttrs[t.name].patternHelpText=o.patternHelpText,this.osdRecvSpeedForm.controls[t.name].setValidators(o.validators)):this.osdRecvSpeedForm.controls[t.name].setValidators(C.Validators.required)})}onCustomizePriorityChange(){const n={};if(Object.keys(this.priorityAttrs).forEach(t=>{n[t]=this.osdRecvSpeedForm.getValue(t)}),this.osdRecvSpeedForm.getValue("customizePriority")){const t={name:"custom",text:$localize`Custom`,values:n};this.setPriority(t)}else this.detectPriority(n,t=>{this.setPriority(t)})}onPriorityChange(n){const t=p().find(this.priorities,o=>o.name===n)||this.priorities[0];this.osdRecvSpeedForm.get("customizePriority").setValue(!1),this.setPriority(t)}submitAction(){const n={};Object.keys(this.priorityAttrs).forEach(t=>{n[t]={section:"osd",value:this.osdRecvSpeedForm.getValue(t)}}),this.configService.bulkCreate({options:n}).subscribe(()=>{this.notificationService.show(Ae._.success,$localize`Updated OSD recovery speed priority '${this.osdRecvSpeedForm.getValue("priority")}'`),this.activeModal.close()},()=>{this.activeModal.close()})}static{this.\u0275fac=function(t){return new(t||Ms)(e.\u0275\u0275directiveInject(G.NgbActiveModal),e.\u0275\u0275directiveInject(m.Ss),e.\u0275\u0275directiveInject(c.v),e.\u0275\u0275directiveInject(P.s),e.\u0275\u0275directiveInject(Q.J),e.\u0275\u0275directiveInject(Ct))}}static{this.\u0275cmp=e.\u0275\u0275defineComponent({type:Ms,selectors:[["cd-osd-recv-speed-modal"]],decls:24,vars:10,consts:()=>{let n,t,o,s,d,h,I,$;return n=$localize`:␟c35f9c5f268a514b970cc55e9a5dc4bed0988e7f␟3566078749659760261:OSD Recovery Priority`,t=$localize`:␟b74af38005e8a8914e45af2ec412e11ceafef8b6␟2734022681675842051:Priority`,o=$localize`:␟c2f48f04b379bfba133825747adfd238d511412e␟5783945771957026158:Customize priority values`,s=$localize`:␟7cbdabcece469fab89cfa687ab152bca18b97498␟1417693714872528491:This field is required.`,d=$localize`:␟4aa19de2a2b54cbda39e9c62917b23044c087776␟751124305869330542:This field is required!`,h=$localize`:␟b699e94bf376491bd50b70a98531071c737eaf40␟1401779760991943921:${"\ufffd0\ufffd"}:INTERPOLATION:`,I=$localize`:␟98fe13e7ad6c2b80375d204b47858ded83f80e15␟6939928849308865685:The entered value is too high! It must not be greater than ${"\ufffd0\ufffd"}:INTERPOLATION:.`,$=$localize`:␟5423a3c111be47fc5a1bfe46ceb58c81c84db691␟4314201049807256403:The entered value is too low! It must not be lower than ${"\ufffd0\ufffd"}:INTERPOLATION:.`,[["formDir","ngForm"],n,t,o,s,d,h,I,$,[3,"modalRef"],[1,"modal-title"],[1,"modal-content"],["novalidate","","cdFormScope","osd",3,"formGroup"],[1,"modal-body"],[1,"form-group","row"],["for","priority",1,"cd-col-form-label","required"],[1,"cd-col-form-input"],["formControlName","priority","id","priority",1,"form-select",3,"change"],[3,"value",4,"ngFor","ngForOf"],["class","invalid-feedback",4,"ngIf"],[1,"cd-col-form-offset"],[1,"custom-control","custom-checkbox"],["formControlName","customizePriority","id","customizePriority","name","customizePriority","type","checkbox",1,"custom-control-input",3,"change"],["for","customizePriority",1,"custom-control-label"],["class","form-group row",4,"ngFor","ngForOf"],[1,"modal-footer"],[3,"submitActionEvent","form","submitText","showSubmit"],[3,"value"],[1,"invalid-feedback"],[1,"cd-col-form-label",3,"for"],[3,"ngClass"],[4,"ngIf"],["type","number",1,"form-control",3,"id","formControlName","readonly"]]},template:function(t,o){if(1&t){const s=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"cd-modal",9),e.\u0275\u0275elementContainerStart(1,10),e.\u0275\u0275i18n(2,1),e.\u0275\u0275elementContainerEnd(),e.\u0275\u0275elementContainerStart(3,11),e.\u0275\u0275elementStart(4,"form",12,0)(6,"div",13)(7,"div",14)(8,"label",15),e.\u0275\u0275i18n(9,2),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(10,"div",16)(11,"select",17),e.\u0275\u0275listener("change",function(h){return e.\u0275\u0275restoreView(s),e.\u0275\u0275resetView(o.onPriorityChange(h.target.value))}),e.\u0275\u0275template(12,ih,2,2,"option",18),e.\u0275\u0275elementEnd(),e.\u0275\u0275template(13,ah,2,0,"span",19),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(14,"div",14)(15,"div",20)(16,"div",21)(17,"input",22),e.\u0275\u0275listener("change",function(){return e.\u0275\u0275restoreView(s),e.\u0275\u0275resetView(o.onCustomizePriorityChange())}),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(18,"label",23),e.\u0275\u0275i18n(19,3),e.\u0275\u0275elementEnd()()()(),e.\u0275\u0275template(20,dh,11,13,"div",24),e.\u0275\u0275pipe(21,"keyvalue"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(22,"div",25)(23,"cd-form-button-panel",26),e.\u0275\u0275listener("submitActionEvent",function(){return e.\u0275\u0275restoreView(s),e.\u0275\u0275resetView(o.submitAction())}),e.\u0275\u0275elementEnd()()(),e.\u0275\u0275elementContainerEnd(),e.\u0275\u0275elementEnd()}if(2&t){const s=e.\u0275\u0275reference(5);e.\u0275\u0275property("modalRef",o.activeModal),e.\u0275\u0275advance(4),e.\u0275\u0275property("formGroup",o.osdRecvSpeedForm),e.\u0275\u0275advance(8),e.\u0275\u0275property("ngForOf",o.priorities),e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf",o.osdRecvSpeedForm.showError("priority",s,"required")),e.\u0275\u0275advance(7),e.\u0275\u0275property("ngForOf",e.\u0275\u0275pipeBind1(21,8,o.priorityAttrs)),e.\u0275\u0275advance(3),e.\u0275\u0275property("form",o.osdRecvSpeedForm)("submitText",o.actionLabels.UPDATE)("showSubmit",o.permissions.configOpt.update)}},dependencies:[l.NgClass,l.NgForOf,l.NgIf,y.m,Ut.z,oe.e,Ge.S,ll.q,we.a,Ve.C,ze.E,C.\u0275NgNoValidate,C.NgSelectOption,C.\u0275NgSelectMultipleOption,C.DefaultValueAccessor,C.NumberValueAccessor,C.CheckboxControlValueAccessor,C.SelectControlValueAccessor,C.NgControlStatus,C.NgControlStatusGroup,C.FormGroupDirective,C.FormControlName,l.KeyValuePipe]})}}function uh(i,n){1&i&&(e.\u0275\u0275elementStart(0,"span"),e.\u0275\u0275i18n(1,1),e.\u0275\u0275elementEnd())}function ph(i,n){1&i&&(e.\u0275\u0275elementStart(0,"span"),e.\u0275\u0275i18n(1,2),e.\u0275\u0275elementEnd())}function mh(i,n){if(1&i&&(e.\u0275\u0275elementStart(0,"span",15),e.\u0275\u0275template(1,uh,2,0,"span",16)(2,ph,2,0,"span",16),e.\u0275\u0275elementEnd()),2&i){const t=e.\u0275\u0275nextContext();e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf",null==t.weight.errors?null:t.weight.errors.required),e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf",(null==t.weight.errors?null:t.weight.errors.max)||(null==t.weight.errors?null:t.weight.errors.min))}}class Rs{constructor(n,t,o,s){this.actionLabels=n,this.activeModal=t,this.osdService=o,this.fb=s,this.currentWeight=1}get weight(){return this.reweightForm.get("weight")}ngOnInit(){this.reweightForm=this.fb.group({weight:this.fb.control(this.currentWeight,[C.Validators.required])})}reweight(){this.osdService.reweight(this.osdId,this.reweightForm.value.weight).subscribe(()=>this.activeModal.close())}static{this.\u0275fac=function(t){return new(t||Rs)(e.\u0275\u0275directiveInject(m.Ss),e.\u0275\u0275directiveInject(G.NgbActiveModal),e.\u0275\u0275directiveInject(Ct),e.\u0275\u0275directiveInject(Dt.$))}}static{this.\u0275cmp=e.\u0275\u0275defineComponent({type:Rs,selectors:[["cd-osd-reweight-modal"]],decls:14,vars:7,consts:()=>{let n,t,o;return n=$localize`:␟5251a4355cece3075db43f15d69a24a0f8485707␟6324192010317168396:Reweight OSD: ${"\ufffd0\ufffd"}:INTERPOLATION:`,t=$localize`:␟7cbdabcece469fab89cfa687ab152bca18b97498␟1417693714872528491:This field is required.`,o=$localize`:␟67650b2998db48201b2c6176cbfef51e7211ccaa␟3021746341506860835:The value needs to be between 0 and 1.`,[n,t,o,[3,"modalRef"],[1,"modal-title"],[1,"modal-content"],[3,"formGroup"],[1,"modal-body"],[1,"row"],["for","weight",1,"cd-col-form-label"],[1,"cd-col-form-input"],["id","weight","type","number","step","0.1","formControlName","weight","min","0","max","1",1,"form-control",3,"value"],["class","invalid-feedback",4,"ngIf"],[1,"modal-footer"],[3,"submitActionEvent","form","submitText"],[1,"invalid-feedback"],[4,"ngIf"]]},template:function(t,o){1&t&&(e.\u0275\u0275elementStart(0,"cd-modal",3),e.\u0275\u0275elementContainerStart(1,4),e.\u0275\u0275i18n(2,0),e.\u0275\u0275elementContainerEnd(),e.\u0275\u0275elementContainerStart(3,5),e.\u0275\u0275elementStart(4,"form",6)(5,"div",7)(6,"div",8)(7,"label",9),e.\u0275\u0275text(8,"Weight"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(9,"div",10),e.\u0275\u0275element(10,"input",11),e.\u0275\u0275template(11,mh,3,2,"span",12),e.\u0275\u0275elementEnd()()(),e.\u0275\u0275elementStart(12,"div",13)(13,"cd-form-button-panel",14),e.\u0275\u0275listener("submitActionEvent",function(){return o.reweight()}),e.\u0275\u0275elementEnd()()(),e.\u0275\u0275elementContainerEnd(),e.\u0275\u0275elementEnd()),2&t&&(e.\u0275\u0275property("modalRef",o.activeModal),e.\u0275\u0275advance(2),e.\u0275\u0275i18nExp(o.osdId),e.\u0275\u0275i18nApply(2),e.\u0275\u0275advance(2),e.\u0275\u0275property("formGroup",o.reweightForm),e.\u0275\u0275advance(6),e.\u0275\u0275property("value",o.currentWeight),e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf",o.weight.errors),e.\u0275\u0275advance(2),e.\u0275\u0275property("form",o.reweightForm)("submitText",o.actionLabels.REWEIGHT))},dependencies:[l.NgIf,Ut.z,oe.e,Ge.S,we.a,ze.E,C.\u0275NgNoValidate,C.DefaultValueAccessor,C.NumberValueAccessor,C.NgControlStatus,C.NgControlStatusGroup,C.MinValidator,C.MaxValidator,C.FormGroupDirective,C.FormControlName]})}}var _l=r(47782);class Os{constructor(n,t,o,s,d){this.activeModal=n,this.actionLabels=t,this.osdService=o,this.notificationService=s,this.joinPipe=d,this.selected=[]}ngOnInit(){this.scrubForm=new C.UntypedFormGroup({})}scrub(){(0,K.forkJoin)(this.selected.map(n=>this.osdService.scrub(n,this.deep))).subscribe(()=>{const n=this.deep?"Deep scrub":"Scrub";this.notificationService.show(Ae._.success,$localize`${n} was initialized in the following OSD(s): ${this.joinPipe.transform(this.selected)}`),this.activeModal.close()},()=>this.activeModal.close())}static{this.\u0275fac=function(t){return new(t||Os)(e.\u0275\u0275directiveInject(G.NgbActiveModal),e.\u0275\u0275directiveInject(m.Ss),e.\u0275\u0275directiveInject(Ct),e.\u0275\u0275directiveInject(Q.J),e.\u0275\u0275directiveInject(_l.r))}}static{this.\u0275cmp=e.\u0275\u0275defineComponent({type:Os,selectors:[["cd-osd-scrub-modal"]],decls:13,vars:9,consts:()=>{let n,t,o,s;return n=$localize`:␟62b73a34ba65b3073e3560dce828a16d7fd3c0f4␟2979848377804191209:{VAR_SELECT, select, true {Deep } other {}}`,n=e.\u0275\u0275i18nPostprocess(n,{VAR_SELECT:"\ufffd0\ufffd"}),t=$localize`:␟8f077ceb52c967a8fe2de9ef0a9d65d72badf186␟7255171847164332814:OSDs ${n}:ICU:Scrub`,o=$localize`:␟fad3dc421817a16dd6c46c1a0c36de619a8d776e␟7954353552762937351:{VAR_SELECT, select, true {deep } other {}}`,o=e.\u0275\u0275i18nPostprocess(o,{VAR_SELECT:"\ufffd0\ufffd"}),s=$localize`:␟c00119503aad4012b77049eee41293338f67756c␟9150304455653253740:You are about to apply a ${o}:ICU:scrub to the OSD(s): ${"\ufffd#9\ufffd"}:START_TAG_STRONG:${"\ufffd1\ufffd"}:INTERPOLATION:${"\ufffd/#9\ufffd"}:CLOSE_TAG_STRONG:.`,[["formDir","ngForm"],t,s,[3,"modalRef"],[1,"modal-title"],[1,"modal-content"],["name","scrubForm","novalidate","",3,"formGroup"],[1,"modal-body"],[1,"modal-footer"],[3,"submitActionEvent","form","submitText"]]},template:function(t,o){if(1&t){const s=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"cd-modal",3)(1,"span",4),e.\u0275\u0275i18n(2,1),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementContainerStart(3,5),e.\u0275\u0275elementStart(4,"form",6,0)(6,"div",7)(7,"p"),e.\u0275\u0275i18nStart(8,2),e.\u0275\u0275element(9,"strong"),e.\u0275\u0275pipe(10,"join"),e.\u0275\u0275i18nEnd(),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(11,"div",8)(12,"cd-form-button-panel",9),e.\u0275\u0275listener("submitActionEvent",function(){return e.\u0275\u0275restoreView(s),e.\u0275\u0275resetView(o.scrub())}),e.\u0275\u0275elementEnd()()(),e.\u0275\u0275elementContainerEnd(),e.\u0275\u0275elementEnd()}2&t&&(e.\u0275\u0275property("modalRef",o.activeModal),e.\u0275\u0275advance(2),e.\u0275\u0275i18nExp(o.deep),e.\u0275\u0275i18nApply(2),e.\u0275\u0275advance(2),e.\u0275\u0275property("formGroup",o.scrubForm),e.\u0275\u0275advance(6),e.\u0275\u0275i18nExp(o.deep)(e.\u0275\u0275pipeBind1(10,7,o.selected)),e.\u0275\u0275i18nApply(8),e.\u0275\u0275advance(2),e.\u0275\u0275property("form",o.scrubForm)("submitText",o.actionLabels.UPDATE))},dependencies:[Ut.z,oe.e,ze.E,C.\u0275NgNoValidate,C.NgControlStatusGroup,C.FormGroupDirective,_l.r]})}}var jl=r(85770);function fh(i,n){if(1&i&&e.\u0275\u0275element(0,"cd-device-list",20),2&i){const t=e.\u0275\u0275nextContext(2);e.\u0275\u0275property("osdId",null==t.osd?null:t.osd.id)("hostname",null==t.selection?null:t.selection.host.name)("osdList",!0)}}function Eh(i,n){if(1&i&&e.\u0275\u0275element(0,"cd-table-key-value",21),2&i){const t=e.\u0275\u0275nextContext(2);e.\u0275\u0275property("data",null==t.osd||null==t.osd.details?null:t.osd.details.osd_map)}}function gh(i,n){if(1&i){const t=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"cd-table-key-value",23),e.\u0275\u0275listener("fetchData",function(){e.\u0275\u0275restoreView(t);const s=e.\u0275\u0275nextContext(3);return e.\u0275\u0275resetView(s.refresh())}),e.\u0275\u0275elementEnd()}if(2&i){const t=e.\u0275\u0275nextContext(3);e.\u0275\u0275property("data",null==t.osd||null==t.osd.details?null:t.osd.details.osd_metadata)}}function Ch(i,n){1&i&&(e.\u0275\u0275elementStart(0,"cd-alert-panel",24),e.\u0275\u0275i18n(1,7),e.\u0275\u0275elementEnd())}function Sh(i,n){if(1&i&&e.\u0275\u0275template(0,gh,1,1,"cd-table-key-value",22)(1,Ch,2,0,"ng-template",null,1,e.\u0275\u0275templateRefExtractor),2&i){const t=e.\u0275\u0275reference(2),o=e.\u0275\u0275nextContext(2);e.\u0275\u0275property("ngIf",null==o.osd||null==o.osd.details?null:o.osd.details.osd_metadata)("ngIfElse",t)}}function hh(i,n){if(1&i&&e.\u0275\u0275element(0,"cd-smart-list",25),2&i){const t=e.\u0275\u0275nextContext(2);e.\u0275\u0275property("osdId",null==t.osd?null:t.osd.id)}}function Th(i,n){if(1&i&&e.\u0275\u0275element(0,"cd-table-performance-counter",27),2&i){const t=e.\u0275\u0275nextContext(3);e.\u0275\u0275property("serviceId",null==t.osd?null:t.osd.id)}}function Fh(i,n){if(1&i&&e.\u0275\u0275template(0,Th,1,1,"cd-table-performance-counter",26),2&i){const t=e.\u0275\u0275nextContext(2);e.\u0275\u0275property("ngIf",null==t.osd?null:t.osd.details)}}function vh(i,n){if(1&i&&e.\u0275\u0275element(0,"cd-grafana",29),2&i){const t=e.\u0275\u0275nextContext(3);e.\u0275\u0275property("grafanaPath","osd-device-details?var-osd=osd."+t.osd.id)("type","metrics")}}function Mh(i,n){1&i&&(e.\u0275\u0275elementContainerStart(0,28),e.\u0275\u0275elementStart(1,"a",12),e.\u0275\u0275i18n(2,8),e.\u0275\u0275elementEnd(),e.\u0275\u0275template(3,vh,1,2,"ng-template",13),e.\u0275\u0275elementContainerEnd())}function Rh(i,n){if(1&i&&(e.\u0275\u0275elementContainerStart(0),e.\u0275\u0275elementStart(1,"nav",10,0),e.\u0275\u0275elementContainerStart(3,11),e.\u0275\u0275elementStart(4,"a",12),e.\u0275\u0275i18n(5,2),e.\u0275\u0275elementEnd(),e.\u0275\u0275template(6,fh,1,3,"ng-template",13),e.\u0275\u0275elementContainerEnd(),e.\u0275\u0275elementContainerStart(7,14),e.\u0275\u0275elementStart(8,"a",12),e.\u0275\u0275i18n(9,3),e.\u0275\u0275elementEnd(),e.\u0275\u0275template(10,Eh,1,1,"ng-template",13),e.\u0275\u0275elementContainerEnd(),e.\u0275\u0275elementContainerStart(11,15),e.\u0275\u0275elementStart(12,"a",12),e.\u0275\u0275i18n(13,4),e.\u0275\u0275elementEnd(),e.\u0275\u0275template(14,Sh,3,2,"ng-template",13),e.\u0275\u0275elementContainerEnd(),e.\u0275\u0275elementContainerStart(15,16),e.\u0275\u0275elementStart(16,"a",12),e.\u0275\u0275i18n(17,5),e.\u0275\u0275elementEnd(),e.\u0275\u0275template(18,hh,1,1,"ng-template",13),e.\u0275\u0275elementContainerEnd(),e.\u0275\u0275elementContainerStart(19,17),e.\u0275\u0275elementStart(20,"a",12),e.\u0275\u0275i18n(21,6),e.\u0275\u0275elementEnd(),e.\u0275\u0275template(22,Fh,1,1,"ng-template",13),e.\u0275\u0275elementContainerEnd(),e.\u0275\u0275template(23,Mh,4,0,"ng-container",18),e.\u0275\u0275elementEnd(),e.\u0275\u0275element(24,"div",19),e.\u0275\u0275elementContainerEnd()),2&i){const t=e.\u0275\u0275reference(2),o=e.\u0275\u0275nextContext();e.\u0275\u0275advance(23),e.\u0275\u0275property("ngIf",o.grafanaPermission.read),e.\u0275\u0275advance(),e.\u0275\u0275property("ngbNavOutlet",t)}}class Ps{constructor(n,t){this.osdService=n,this.authStorageService=t,this.grafanaPermission=this.authStorageService.getPermissions().grafana}ngOnChanges(){this.osd?.id!==this.selection?.id&&(this.osd=this.selection),p().isNumber(this.osd?.id)&&this.refresh()}refresh(){this.osdService.getDetails(this.osd.id).subscribe(n=>{this.osd.details=n})}static{this.\u0275fac=function(t){return new(t||Ps)(e.\u0275\u0275directiveInject(Ct),e.\u0275\u0275directiveInject(c.v))}}static{this.\u0275cmp=e.\u0275\u0275defineComponent({type:Ps,selectors:[["cd-osd-details"]],inputs:{selection:"selection"},features:[e.\u0275\u0275NgOnChangesFeature],decls:1,vars:1,consts:()=>{let n,t,o,s,d,h,I,$;return n=$localize`:␟3e24569eca61d598c8b01defbbbb1fa8bd5222bc␟3719027099325959755:Devices`,t=$localize`:␟91853167141c37b58868f3b0421383dd72fa8a01␟4068300703604461295:Attributes (OSD map)`,o=$localize`:␟f721a500a68c357e8f2a01e60510f6a01e4ba529␟218403386307979629:Metadata`,s=$localize`:␟deba10b7279a589d01e919ea11f43c79ca1773e3␟1216614938441503693:Device health`,d=$localize`:␟d24e28e19c5703d7c6be44f4eb595a6a43b618ed␟4226660880930907514:Performance counter`,h=$localize`:␟97842f379e1d4157ac3ab0661b90c352e7cb72d5␟4117360728845651462:Metadata not available`,I=$localize`:␟fbbaf5cb02ed419e79a27072478f716a4666a99d␟9041763226911499160:Performance Details`,$=$localize`:␟e131c949f7a39d0a56d3ae07494d097733c1b15a␟529114310049247118:OSD details`,[["nav","ngbNav"],["noMetaData",""],n,t,o,s,d,h,I,[4,"ngIf"],["ngbNav","","id","tabset-osd-details","cdStatefulTab","osd-details",1,"nav-tabs"],["ngbNavItem","devices"],["ngbNavLink",""],["ngbNavContent",""],["ngbNavItem","attributes"],["ngbNavItem","metadata"],["ngbNavItem","device-health"],["ngbNavItem","performance-counter"],["ngbNavItem","performance-details",4,"ngIf"],[3,"ngbNavOutlet"],[3,"osdId","hostname","osdList"],[3,"data"],[3,"data","fetchData",4,"ngIf","ngIfElse"],[3,"fetchData","data"],["type","warning"],[3,"osdId"],["serviceType","osd",3,"serviceId",4,"ngIf"],["serviceType","osd",3,"serviceId"],["ngbNavItem","performance-details"],["title",$,"uid","CrAHE0iZz","grafanaStyle","three",3,"grafanaPath","type"]]},template:function(t,o){1&t&&e.\u0275\u0275template(0,Rh,25,2,"ng-container",9),2&t&&e.\u0275\u0275property("ngIf",o.selection)},dependencies:[l.NgIf,jl.Y,G.NgbNavContent,G.NgbNav,G.NgbNavItem,G.NgbNavLink,G.NgbNavLinkBase,G.NgbNavOutlet,Tt.c,nt.m,Rt.i,$t.B,ui,pi]})}}const Oh=["osdUsageTpl"],Ph=["markOsdConfirmationTpl"],bh=["criticalConfirmationTpl"],Nh=["reweightBodyTpl"],Ih=["safeToDestroyBodyTpl"],Ah=["deleteOsdExtraTpl"],Dh=["flagsTpl"],yh=()=>({read:!0});function Lh(i,n){if(1&i&&e.\u0275\u0275element(0,"cd-osd-details",27),2&i){const t=e.\u0275\u0275nextContext(2);e.\u0275\u0275property("selection",t.expandedRow)}}function $h(i,n){if(1&i){const t=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"cd-table",22),e.\u0275\u0275listener("fetchData",function(s){e.\u0275\u0275restoreView(t);const d=e.\u0275\u0275nextContext();return e.\u0275\u0275resetView(d.getOsdList(s))})("setExpandedRow",function(s){e.\u0275\u0275restoreView(t);const d=e.\u0275\u0275nextContext();return e.\u0275\u0275resetView(d.setExpandedRow(s))})("updateSelection",function(s){e.\u0275\u0275restoreView(t);const d=e.\u0275\u0275nextContext();return e.\u0275\u0275resetView(d.updateSelection(s))}),e.\u0275\u0275elementStart(1,"div",23),e.\u0275\u0275element(2,"cd-table-actions",24)(3,"cd-table-actions",25),e.\u0275\u0275elementEnd(),e.\u0275\u0275template(4,Lh,1,1,"cd-osd-details",26),e.\u0275\u0275elementEnd()}if(2&i){const t=e.\u0275\u0275nextContext();e.\u0275\u0275property("data",t.osds)("columns",t.columns)("hasDetails",!0)("updateSelectionOnRefresh","never")("serverSide",!0)("count",t.count),e.\u0275\u0275advance(2),e.\u0275\u0275property("permission",t.permissions.osd)("selection",t.selection)("tableActions",t.tableActions),e.\u0275\u0275advance(),e.\u0275\u0275property("permission",e.\u0275\u0275pureFunction0(12,yh))("selection",t.selection)("tableActions",t.clusterWideActions)}}function xh(i,n){1&i&&e.\u0275\u0275element(0,"cd-grafana",28),2&i&&e.\u0275\u0275property("grafanaPath","osd-overview?")("type","metrics")}function Uh(i,n){1&i&&(e.\u0275\u0275elementContainerStart(0,17),e.\u0275\u0275elementStart(1,"a",18),e.\u0275\u0275i18n(2,7),e.\u0275\u0275elementEnd(),e.\u0275\u0275template(3,xh,1,2,"ng-template",19),e.\u0275\u0275elementContainerEnd())}function wh(i,n){if(1&i&&(e.\u0275\u0275elementContainerStart(0),e.\u0275\u0275i18nStart(1,8),e.\u0275\u0275element(2,"strong"),e.\u0275\u0275pipe(3,"join"),e.\u0275\u0275element(4,"strong"),e.\u0275\u0275i18nEnd(),e.\u0275\u0275elementContainerEnd()),2&i){const t=n.markActionDescription,o=n.osdIds;e.\u0275\u0275advance(4),e.\u0275\u0275i18nExp(e.\u0275\u0275pipeBind1(3,2,o))(t),e.\u0275\u0275i18nApply(1)}}function Gh(i,n){if(1&i&&(e.\u0275\u0275elementStart(0,"li"),e.\u0275\u0275i18n(1,11),e.\u0275\u0275pipe(2,"join"),e.\u0275\u0275elementEnd()),2&i){const t=e.\u0275\u0275nextContext(2).active,o=e.\u0275\u0275nextContext();e.\u0275\u0275advance(2),e.\u0275\u0275i18nExp(o.selection.hasSingleSelection)(e.\u0275\u0275pipeBind1(2,3,t))(1===t.length),e.\u0275\u0275i18nApply(1)}}function Hh(i,n){if(1&i&&(e.\u0275\u0275elementStart(0,"li"),e.\u0275\u0275i18n(1,12),e.\u0275\u0275pipe(2,"join"),e.\u0275\u0275elementEnd()),2&i){const t=e.\u0275\u0275nextContext(2).missingStats,o=e.\u0275\u0275nextContext();e.\u0275\u0275advance(2),e.\u0275\u0275i18nExp(o.selection.hasSingleSelection)(e.\u0275\u0275pipeBind1(2,2,t)),e.\u0275\u0275i18nApply(1)}}function Vh(i,n){if(1&i&&(e.\u0275\u0275elementStart(0,"li"),e.\u0275\u0275i18n(1,13),e.\u0275\u0275pipe(2,"join"),e.\u0275\u0275elementEnd()),2&i){const t=e.\u0275\u0275nextContext(2).storedPgs,o=e.\u0275\u0275nextContext();e.\u0275\u0275advance(2),e.\u0275\u0275i18nExp(o.selection.hasSingleSelection)(e.\u0275\u0275pipeBind1(2,2,t)),e.\u0275\u0275i18nApply(1)}}function Bh(i,n){if(1&i&&(e.\u0275\u0275elementStart(0,"li"),e.\u0275\u0275text(1),e.\u0275\u0275elementEnd()),2&i){const t=e.\u0275\u0275nextContext(2).message;e.\u0275\u0275advance(),e.\u0275\u0275textInterpolate1(" ",t," ")}}function zh(i,n){if(1&i&&(e.\u0275\u0275elementStart(0,"div",30)(1,"cd-alert-panel",31)(2,"span"),e.\u0275\u0275i18n(3,10),e.\u0275\u0275elementEnd(),e.\u0275\u0275element(4,"br"),e.\u0275\u0275elementStart(5,"ul",32),e.\u0275\u0275template(6,Gh,3,5,"li",33)(7,Hh,3,4,"li",33)(8,Vh,3,4,"li",33)(9,Bh,2,1,"li",33),e.\u0275\u0275elementEnd()()()),2&i){const t=e.\u0275\u0275nextContext(),o=t.message,s=t.active,d=t.missingStats,h=t.storedPgs,I=t.actionDescription,$=e.\u0275\u0275nextContext();e.\u0275\u0275advance(3),e.\u0275\u0275i18nExp($.selection.hasSingleSelection)(I),e.\u0275\u0275i18nApply(3),e.\u0275\u0275advance(3),e.\u0275\u0275property("ngIf",s.length>0),e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf",d.length>0),e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf",h.length>0),e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf",o)}}function Xh(i,n){if(1&i&&(e.\u0275\u0275elementStart(0,"div",30)(1,"cd-alert-panel",34)(2,"span"),e.\u0275\u0275i18n(3,14),e.\u0275\u0275elementEnd()()()),2&i){const t=e.\u0275\u0275nextContext(2);e.\u0275\u0275advance(3),e.\u0275\u0275i18nExp(t.selection.hasSingleSelection),e.\u0275\u0275i18nApply(3)}}function kh(i,n){if(1&i&&(e.\u0275\u0275template(0,zh,10,6,"div",29)(1,Xh,4,1,"div",29),e.\u0275\u0275elementContainerStart(2),e.\u0275\u0275i18nStart(3,9),e.\u0275\u0275element(4,"strong"),e.\u0275\u0275pipe(5,"join"),e.\u0275\u0275element(6,"strong"),e.\u0275\u0275i18nEnd(),e.\u0275\u0275elementContainerEnd()),2&i){const t=n.safeToPerform,o=n.actionDescription,s=n.osdIds;e.\u0275\u0275property("ngIf",!t),e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf",t),e.\u0275\u0275advance(5),e.\u0275\u0275i18nExp(e.\u0275\u0275pipeBind1(5,4,s))(o),e.\u0275\u0275i18nApply(3)}}function jh(i,n){if(1&i&&(e.\u0275\u0275elementStart(0,"span",37),e.\u0275\u0275text(1),e.\u0275\u0275elementEnd()),2&i){const t=n.$implicit;e.\u0275\u0275advance(),e.\u0275\u0275textInterpolate(t)}}function Wh(i,n){if(1&i&&(e.\u0275\u0275elementStart(0,"span",38),e.\u0275\u0275text(1),e.\u0275\u0275elementEnd()),2&i){const t=n.$implicit;e.\u0275\u0275advance(),e.\u0275\u0275textInterpolate(t)}}function Kh(i,n){if(1&i&&e.\u0275\u0275template(0,jh,2,1,"span",35)(1,Wh,2,1,"span",36),2&i){const t=n.data.row;e.\u0275\u0275property("ngForOf",t.cdClusterFlags),e.\u0275\u0275advance(),e.\u0275\u0275property("ngForOf",t.cdIndivFlags)}}function Qh(i,n){if(1&i&&e.\u0275\u0275element(0,"cd-usage-bar",39),2&i){const t=n.data.row,o=e.\u0275\u0275nextContext();e.\u0275\u0275property("title","osd "+t.osd)("total",t.stats.stat_bytes)("used",t.stats.stat_bytes_used)("warningThreshold",o.osdSettings.nearfull_ratio)("errorThreshold",o.osdSettings.full_ratio)}}function Yh(i,n){if(1&i&&(e.\u0275\u0275elementContainerStart(0,40)(1,41),e.\u0275\u0275elementStart(2,"div",42)(3,"div",43),e.\u0275\u0275element(4,"input",44),e.\u0275\u0275elementStart(5,"label",45),e.\u0275\u0275i18n(6,15),e.\u0275\u0275elementEnd()()(),e.\u0275\u0275elementContainerEnd()()),2&i){const t=n.form;e.\u0275\u0275property("formGroup",t)}}class hi extends M.D{static collectStates(n){const t=[n.in?"in":"out"];return n.up?t.push("up"):n.state.includes("destroyed")?t.push("destroyed"):t.push("down"),t}constructor(n,t,o,s,d,h,I,$,w,X,J){super(),this.authStorageService=n,this.osdService=t,this.dimlessBinaryPipe=o,this.modalService=s,this.urlBuilder=d,this.router=h,this.taskWrapper=I,this.actionLabels=$,this.notificationService=w,this.orchService=X,this.cdsModalService=J,this.icons=g.FI,this.osdSettings=new Xl,this.count=0,this.selection=new N.y,this.osds=[],this.disabledFlags=["sortbitwise","purged_snapdirs","recovery_deletes","pglog_hardlimit"],this.indivFlagNames=["noup","nodown","noin","noout"],this.actionOrchFeatures={create:[At.OSD_CREATE],delete:[At.OSD_DELETE]},this.permissions=this.authStorageService.getPermissions(),this.tableActions=[{name:this.actionLabels.CREATE,permission:"create",icon:g.FI.add,click:()=>this.router.navigate([this.urlBuilder.getCreate()]),disable:re=>this.getDisable("create",re),canBePrimary:re=>!re.hasSelection},{name:this.actionLabels.EDIT,permission:"update",icon:g.FI.edit,click:()=>this.editAction()},{name:this.actionLabels.FLAGS,permission:"update",icon:g.FI.flag,click:()=>this.configureFlagsIndivAction(),disable:()=>!this.hasOsdSelected},{name:this.actionLabels.SCRUB,permission:"update",icon:g.FI.analyse,click:()=>this.scrubAction(!1),disable:()=>!this.hasOsdSelected,canBePrimary:re=>re.hasSelection},{name:this.actionLabels.DEEP_SCRUB,permission:"update",icon:g.FI.deepCheck,click:()=>this.scrubAction(!0),disable:()=>!this.hasOsdSelected},{name:this.actionLabels.REWEIGHT,permission:"update",click:()=>this.reweight(),disable:()=>!this.hasOsdSelected||!this.selection.hasSingleSelection,icon:g.FI.reweight},{name:this.actionLabels.MARK_OUT,permission:"update",click:()=>this.showConfirmationModal($localize`out`,this.osdService.markOut),disable:()=>this.isNotSelectedOrInState("out"),icon:g.FI.left},{name:this.actionLabels.MARK_IN,permission:"update",click:()=>this.showConfirmationModal($localize`in`,this.osdService.markIn),disable:()=>this.isNotSelectedOrInState("in"),icon:g.FI.right},{name:this.actionLabels.MARK_DOWN,permission:"update",click:()=>this.showConfirmationModal($localize`down`,this.osdService.markDown),disable:()=>this.isNotSelectedOrInState("down"),icon:g.FI.down},{name:this.actionLabels.MARK_LOST,permission:"delete",click:()=>this.showCriticalConfirmationModal($localize`Mark`,$localize`OSD lost`,$localize`marked lost`,re=>this.osdService.safeToDestroy(JSON.stringify(re)),"is_safe_to_destroy",this.osdService.markLost),disable:()=>this.isNotSelectedOrInState("up"),icon:g.FI.flatten},{name:this.actionLabels.PURGE,permission:"delete",click:()=>this.showCriticalConfirmationModal($localize`Purge`,$localize`OSD`,$localize`purged`,re=>this.osdService.safeToDestroy(JSON.stringify(re)),"is_safe_to_destroy",re=>(this.selection=new N.y,this.osdService.purge(re))),disable:()=>this.isNotSelectedOrInState("up"),icon:g.FI.erase},{name:this.actionLabels.DESTROY,permission:"delete",click:()=>this.showCriticalConfirmationModal($localize`destroy`,$localize`OSD`,$localize`destroyed`,re=>this.osdService.safeToDestroy(JSON.stringify(re)),"is_safe_to_destroy",re=>(this.selection=new N.y,this.osdService.destroy(re))),disable:()=>this.isNotSelectedOrInState("up"),icon:g.FI.clearFilters},{name:this.actionLabels.DELETE,permission:"delete",click:()=>this.delete(),disable:re=>this.getDisable("delete",re),icon:g.FI.destroy}]}ngOnInit(){this.clusterWideActions=[{name:$localize`Flags`,icon:g.FI.flag,click:()=>this.configureFlagsAction(),permission:"read",visible:()=>this.permissions.osd.read},{name:$localize`Recovery Priority`,icon:g.FI.deepCheck,click:()=>this.configureQosParamsAction(),permission:"read",visible:()=>this.permissions.configOpt.read},{name:$localize`PG scrub`,icon:g.FI.analyse,click:()=>this.configurePgScrubAction(),permission:"read",visible:()=>this.permissions.configOpt.read}],this.columns=[{prop:"id",name:$localize`ID`,flexGrow:1,cellTransformation:b.x.executing,customTemplateConfig:{valueClass:"bold"}},{prop:"host.name",name:$localize`Host`},{prop:"collectedStates",name:$localize`Status`,flexGrow:1,cellTransformation:b.x.badge,customTemplateConfig:{map:{in:{class:"badge-success"},up:{class:"badge-success"},down:{class:"badge-danger"},out:{class:"badge-danger"},destroyed:{class:"badge-danger"}}}},{prop:"tree.device_class",name:$localize`Device class`,flexGrow:1.2,cellTransformation:b.x.badge,customTemplateConfig:{map:{hdd:{class:"badge-hdd"},ssd:{class:"badge-ssd"}}}},{prop:"stats.numpg",name:$localize`PGs`,flexGrow:1},{prop:"stats.stat_bytes",name:$localize`Size`,flexGrow:1,pipe:this.dimlessBinaryPipe},{prop:"state",name:$localize`Flags`,cellTemplate:this.flagsTpl},{prop:"stats.usage",name:$localize`Usage`,cellTemplate:this.osdUsageTpl},{prop:"stats_history.out_bytes",name:$localize`Read bytes`,cellTransformation:b.x.sparkline},{prop:"stats_history.in_bytes",name:$localize`Write bytes`,cellTransformation:b.x.sparkline},{prop:"stats.op_r",name:$localize`Read ops`,cellTransformation:b.x.perSecond},{prop:"stats.op_w",name:$localize`Write ops`,cellTransformation:b.x.perSecond}],this.orchService.status().subscribe(n=>this.orchStatus=n),this.osdService.getOsdSettings().pipe((0,v.take)(1)).subscribe(n=>{this.osdSettings=n})}getDisable(n,t){if("delete"===n){if(!t.hasSelection)return!0;if(p().some(this.getSelectedOsds(),s=>{const d=p().get(s,"operational_status");return"deleting"===d||"unmanaged"===d}))return!0}return this.orchService.getTableActionDisableDesc(this.orchStatus,this.actionOrchFeatures[n])}getSelectedOsdIds(){const n=this.osds.map(t=>t.id);return this.selection.selected.map(t=>t.id).filter(t=>n.includes(t)).sort()}getSelectedOsds(){return this.osds.filter(n=>!p().isUndefined(n)&&this.getSelectedOsdIds().includes(n.id))}get hasOsdSelected(){return this.getSelectedOsdIds().length>0}updateSelection(n){this.selection=n}isNotSelectedOrInState(n){const t=this.getSelectedOsds();if(0===t.length)return!0;switch(n){case"in":return t.some(o=>1===o.in);case"out":return t.some(o=>1!==o.in);case"down":return t.some(o=>1!==o.up);case"up":return t.some(o=>1===o.up)}}getOsdList(n){n||(n=new ai.n);const t=this.osdService.getList(n.toParams()),o=[t.observable,this.osdService.getFlags()];(0,K.forkJoin)(o).subscribe(s=>{this.osds=s[0].map(d=>{this.count=t.count,d.collectedStates=hi.collectStates(d),d.stats_history.out_bytes=d.stats_history.op_out_bytes.map(I=>I[1]),d.stats_history.in_bytes=d.stats_history.op_in_bytes.map(I=>I[1]),d.stats.usage=d.stats.stat_bytes_used/d.stats.stat_bytes,d.cdIsBinary=!0,d.cdIndivFlags=d.state.filter(I=>this.indivFlagNames.includes(I)),d.cdClusterFlags=s[1].filter(I=>!this.disabledFlags.includes(I));const h=p().get(d,"operational_status","unmanaged");return"unmanaged"!==h&&"working"!==h&&(d.cdExecuting=h),d})})}editAction(){const n=p().filter(this.osds,["id",this.selection.first().id]).pop();this.cdsModalService.show(Kt.b,{titleText:$localize`Edit OSD: ${n.id}`,fields:[{type:"text",name:"deviceClass",value:n.tree.device_class,label:$localize`Device class`,required:!0}],submitButtonText:$localize`Edit OSD`,onSubmit:t=>{this.osdService.update(n.id,t.deviceClass).subscribe(()=>{this.notificationService.show(Ae._.success,$localize`Updated OSD '${n.id}'`),this.getOsdList()})}})}scrubAction(n){if(!this.hasOsdSelected)return;const t={selected:this.getSelectedOsdIds(),deep:n};this.bsModalRef=this.modalService.show(Os,t)}configureFlagsAction(){this.bsModalRef=this.modalService.show(Fs)}configureFlagsIndivAction(){const n={selected:this.getSelectedOsds()};this.bsModalRef=this.modalService.show(Ts,n)}showConfirmationModal(n,t){const o=this.getSelectedOsdIds();this.bsModalRef=this.cdsModalService.show(mn.M,{titleText:$localize`Mark OSD ${n}`,buttonText:$localize`Mark ${n}`,bodyTpl:this.markOsdConfirmationTpl,bodyContext:{markActionDescription:n,osdIds:o},onSubmit:()=>{(0,K.forkJoin)(this.getSelectedOsdIds().map(s=>t.call(this.osdService,s))).subscribe(()=>this.cdsModalService.dismissAll())}})}reweight(){const n=this.osds.filter(t=>t.id===this.selection.first().id).pop();this.bsModalRef=this.modalService.show(Rs,{currentWeight:n.weight,osdId:n.id})}delete(){const n=new Ue.$({preserve:new C.UntypedFormControl(!1)});this.showCriticalConfirmationModal($localize`delete`,$localize`OSD`,$localize`deleted`,t=>this.osdService.safeToDelete(JSON.stringify(t)),"is_safe_to_delete",t=>(this.selection=new N.y,this.taskWrapper.wrapTaskAroundCall({task:new q.O("osd/"+m.Qp.DELETE,{svc_id:t}),call:this.osdService.delete(t,n.value.preserve,!0)})),!0,n,this.deleteOsdExtraTpl)}showCriticalConfirmationModal(n,t,o,s,d,h,I=!1,$,w){s(this.getSelectedOsdIds()).subscribe(X=>{const J=this.getSelectedOsdIds();this.cdsModalService.show(O.D,{impact:ft.r.high,itemNames:J,actionDescription:n,itemDescription:t,bodyTemplate:this.criticalConfirmationTpl,bodyContext:{safeToPerform:X[d],message:X.message,active:X.active,missingStats:X.missing_stats,storedPgs:X.stored_pgs,actionDescription:o,osdIds:J},childFormGroup:$,childFormGroupTemplate:w,submitAction:()=>{const re=(0,K.forkJoin)(this.getSelectedOsdIds().map(de=>h.call(this.osdService,de)));I?re.subscribe({error:()=>{this.getOsdList(),this.cdsModalService.dismissAll()},complete:()=>this.cdsModalService.dismissAll()}):re.subscribe(()=>{this.getOsdList(),this.cdsModalService.dismissAll()},()=>this.cdsModalService.dismissAll())}})})}configureQosParamsAction(){this.bsModalRef=this.modalService.show(Ms)}configurePgScrubAction(){this.bsModalRef=this.modalService.show(vs,void 0,{size:"lg"})}static{this.\u0275fac=function(t){return new(t||hi)(e.\u0275\u0275directiveInject(c.v),e.\u0275\u0275directiveInject(Ct),e.\u0275\u0275directiveInject(pt.l),e.\u0275\u0275directiveInject(Yt.B),e.\u0275\u0275directiveInject(z.E),e.\u0275\u0275directiveInject(u.Router),e.\u0275\u0275directiveInject(B.a),e.\u0275\u0275directiveInject(m.Ss),e.\u0275\u0275directiveInject(Q.J),e.\u0275\u0275directiveInject(tn.K),e.\u0275\u0275directiveInject(He.V))}}static{this.\u0275cmp=e.\u0275\u0275defineComponent({type:hi,selectors:[["cd-osd-list"]],viewQuery:function(t,o){if(1&t&&(e.\u0275\u0275viewQuery(Oh,7),e.\u0275\u0275viewQuery(Ph,7),e.\u0275\u0275viewQuery(bh,7),e.\u0275\u0275viewQuery(Nh,5),e.\u0275\u0275viewQuery(Ih,5),e.\u0275\u0275viewQuery(Ah,5),e.\u0275\u0275viewQuery(Dh,7)),2&t){let s;e.\u0275\u0275queryRefresh(s=e.\u0275\u0275loadQuery())&&(o.osdUsageTpl=s.first),e.\u0275\u0275queryRefresh(s=e.\u0275\u0275loadQuery())&&(o.markOsdConfirmationTpl=s.first),e.\u0275\u0275queryRefresh(s=e.\u0275\u0275loadQuery())&&(o.criticalConfirmationTpl=s.first),e.\u0275\u0275queryRefresh(s=e.\u0275\u0275loadQuery())&&(o.reweightBodyTpl=s.first),e.\u0275\u0275queryRefresh(s=e.\u0275\u0275loadQuery())&&(o.safeToDestroyBodyTpl=s.first),e.\u0275\u0275queryRefresh(s=e.\u0275\u0275loadQuery())&&(o.deleteOsdExtraTpl=s.first),e.\u0275\u0275queryRefresh(s=e.\u0275\u0275loadQuery())&&(o.flagsTpl=s.first)}},features:[e.\u0275\u0275ProvidersFeature([{provide:z.E,useValue:new z.E("osd")}]),e.\u0275\u0275InheritDefinitionFeature],decls:18,vars:2,consts:()=>{let n,t,o,s,d,h,I,$,w,X,J,re,de,Me,ve,Se,$e;return n=$localize`:␟b49d7877d24112d4bdfce9256edf61a007fae888␟9126395685432055070:OSDs List`,t=$localize`:␟5e7f4b1ca49e8d217bd0e12c6f7d6b6a2ade2c18␟4352555506458562289:Overall Performance`,o=$localize`:␟c28928777637a3fedd51548fe6f992062a8e5c49␟9037065948276788684:OSD list`,s=$localize`:␟172ada0fcf6490b24a897517e9f4299215873ff8␟5366399235782587742:${"[\ufffd#2\ufffd|\ufffd#4\ufffd]"}:START_TAG_STRONG:OSD(s) ${"\ufffd0\ufffd"}:INTERPOLATION:${"[\ufffd/#2\ufffd|\ufffd/#4\ufffd]"}:CLOSE_TAG_STRONG: will be marked ${"[\ufffd#2\ufffd|\ufffd#4\ufffd]"}:START_TAG_STRONG:${"\ufffd1\ufffd"}:INTERPOLATION_1:${"[\ufffd/#2\ufffd|\ufffd/#4\ufffd]"}:CLOSE_TAG_STRONG: if you proceed.`,s=e.\u0275\u0275i18nPostprocess(s),d=$localize`:␟e0e217fd717c5b1f5c17f00c5b174de855acbef0␟394323388873095701:${"[\ufffd#4\ufffd|\ufffd#6\ufffd]"}:START_TAG_STRONG:OSD ${"\ufffd0\ufffd"}:INTERPOLATION:${"[\ufffd/#4\ufffd|\ufffd/#6\ufffd]"}:CLOSE_TAG_STRONG: will be ${"[\ufffd#4\ufffd|\ufffd#6\ufffd]"}:START_TAG_STRONG:${"\ufffd1\ufffd"}:INTERPOLATION_1:${"[\ufffd/#4\ufffd|\ufffd/#6\ufffd]"}:CLOSE_TAG_STRONG: if you proceed.`,d=e.\u0275\u0275i18nPostprocess(d),h=$localize`:␟74bd20d5f558d14cb2fa41ae863cf09c47d02018␟1718318886409002413:{VAR_SELECT, select, true {OSD is} other {OSDs are}}`,h=e.\u0275\u0275i18nPostprocess(h,{VAR_SELECT:"\ufffd0\ufffd"}),I=$localize`:␟63d32d7f76854e1e9ae9bf7dc4a7bc8474d42e81␟2529003778276897064: The ${h}:ICU: not safe to be ${"\ufffd1\ufffd"}:INTERPOLATION:! `,$=$localize`:␟84da651a3572c57f7ff7058a93f3a4ddb207c1e3␟6643339058890129805:{VAR_SELECT, select, true {} other {{INTERPOLATION} : }}`,$=e.\u0275\u0275i18nPostprocess($,{INTERPOLATION:"\ufffd1\ufffd",VAR_SELECT:"\ufffd0\ufffd"}),w=$localize`:␟19a2892320d36f6564eac566181f172a7b5e5095␟8956999485109550420:{VAR_SELECT, select, true {it} other {them}}`,w=e.\u0275\u0275i18nPostprocess(w,{VAR_SELECT:"\ufffd2\ufffd"}),X=$localize`:␟e61bb47a6620ca875fafedd98e27aaf6b9ccc74e␟4377005327341801944: ${$}:ICU: Some PGs are currently mapped to ${w}:ICU_1:. `,J=$localize`:␟99995c77855e9db9b73b753996e89b42559182cf␟6848028529746774204:{VAR_SELECT, select, true {} other {{INTERPOLATION} : }}`,J=e.\u0275\u0275i18nPostprocess(J,{INTERPOLATION:"\ufffd1\ufffd",VAR_SELECT:"\ufffd0\ufffd"}),re=$localize`:␟77d6a8692f206450f53add13b190b7048ad831bd␟3274901826987148156: ${J}:ICU: There are no reported stats and not all PGs are active and clean. `,de=$localize`:␟f6562d13915a4033e6c88865b30a1a5d6f6a2237␟1859179011858344355:{VAR_SELECT, select, true {OSD} other {{INTERPOLATION} : OSDs }}`,de=e.\u0275\u0275i18nPostprocess(de,{INTERPOLATION:"\ufffd1\ufffd",VAR_SELECT:"\ufffd0\ufffd"}),Me=$localize`:␟2212125f66acf6aef016f9c340b1eae7971e22c2␟2728144920561178685: ${de}:ICU: still store some PG data and not all PGs are active and clean. `,ve=$localize`:␟74bd20d5f558d14cb2fa41ae863cf09c47d02018␟1718318886409002413:{VAR_SELECT, select, true {OSD is} other {OSDs are}}`,ve=e.\u0275\u0275i18nPostprocess(ve,{VAR_SELECT:"\ufffd0\ufffd"}),Se=$localize`:␟e4976fa92a4959b6621c7f3967e6799bff68e8d8␟7202137443689242113: The ${ve}:ICU: safe to destroy without reducing data durability. `,$e=$localize`:␟8cf121660bed7098516a1efe85831d6f415a9411␟7139122103035207580:Preserve OSD ID(s) for replacement.`,[["nav","ngbNav"],["markOsdConfirmationTpl",""],["criticalConfirmationTpl",""],["flagsTpl",""],["osdUsageTpl",""],["deleteOsdExtraTpl",""],n,t,s,d,I,X,re,Me,Se,$e,["ngbNav","",1,"nav-tabs"],["ngbNavItem",""],["ngbNavLink",""],["ngbNavContent",""],["ngbNavItem","",4,"ngIf"],[3,"ngbNavOutlet"],["selectionType","multiClick",3,"fetchData","setExpandedRow","updateSelection","data","columns","hasDetails","updateSelectionOnRefresh","serverSide","count"],[1,"table-actions"],["id","osd-actions",1,"btn-group",3,"permission","selection","tableActions"],["dropDownOnly","Cluster-wide configuration","btnColor","light","id","cluster-wide-actions",1,"btn-group",3,"permission","selection","tableActions"],[3,"selection",4,"cdTableDetail"],[3,"selection"],["title",o,"uid","lo02I1Aiz","grafanaStyle","four",3,"grafanaPath","type"],["class","danger mb-3",4,"ngIf"],[1,"danger","mb-3"],["type","warning"],[1,"mb-0","ps-4"],[4,"ngIf"],["type","info"],["class","badge badge-hdd me-1",4,"ngFor","ngForOf"],["class","badge badge-info me-1",4,"ngFor","ngForOf"],[1,"badge","badge-hdd","me-1"],[1,"badge","badge-info","me-1"],[3,"title","total","used","warningThreshold","errorThreshold"],[3,"formGroup"],["formGroupName","child"],[1,"form-group"],[1,"custom-control","custom-checkbox"],["type","checkbox","name","preserve","id","preserve","formControlName","preserve",1,"custom-control-input"],["for","preserve",1,"custom-control-label"]]},template:function(t,o){if(1&t&&(e.\u0275\u0275elementStart(0,"nav",16,0),e.\u0275\u0275elementContainerStart(2,17),e.\u0275\u0275elementStart(3,"a",18),e.\u0275\u0275i18n(4,6),e.\u0275\u0275elementEnd(),e.\u0275\u0275template(5,$h,5,13,"ng-template",19),e.\u0275\u0275elementContainerEnd(),e.\u0275\u0275template(6,Uh,4,0,"ng-container",20),e.\u0275\u0275elementEnd(),e.\u0275\u0275element(7,"div",21),e.\u0275\u0275template(8,wh,5,4,"ng-template",null,1,e.\u0275\u0275templateRefExtractor)(10,kh,7,6,"ng-template",null,2,e.\u0275\u0275templateRefExtractor)(12,Kh,2,2,"ng-template",null,3,e.\u0275\u0275templateRefExtractor)(14,Qh,1,5,"ng-template",null,4,e.\u0275\u0275templateRefExtractor)(16,Yh,7,1,"ng-template",null,5,e.\u0275\u0275templateRefExtractor)),2&t){const s=e.\u0275\u0275reference(1);e.\u0275\u0275advance(6),e.\u0275\u0275property("ngIf",o.permissions.grafana.read),e.\u0275\u0275advance(),e.\u0275\u0275property("ngbNavOutlet",s)}},dependencies:[l.NgForOf,l.NgIf,G.NgbNavContent,G.NgbNav,G.NgbNavItem,G.NgbNavLink,G.NgbNavLinkBase,G.NgbNavOutlet,xt.o,Tt.c,nt.m,We.O,at.j,Et.N,Ge.S,we.a,Ve.C,ze.E,C.CheckboxControlValueAccessor,C.NgControlStatus,C.NgControlStatusGroup,C.FormGroupDirective,C.FormControlName,C.FormGroupName,Ps,_l.r]})}}var Sn=r(32380);class uo extends M.D{constructor(n){super(),this.prometheusService=n,this.isPrometheusConfigured=!1,this.isAlertmanagerConfigured=!1}ngOnInit(){this.prometheusService.ifAlertmanagerConfigured(()=>{this.isAlertmanagerConfigured=!0}),this.prometheusService.ifPrometheusConfigured(()=>{this.isPrometheusConfigured=!0})}static{this.\u0275fac=function(t){return new(t||uo)(e.\u0275\u0275directiveInject(Sn.o))}}static{this.\u0275dir=e.\u0275\u0275defineDirective({type:uo,features:[e.\u0275\u0275InheritDefinitionFeature]})}}var cl=r(84268);class $o{constructor(n){this.notificationService=n}sendNotifications(n){n.forEach(t=>this.notificationService.show(t))}convertToCustomAlerts(n){return p().uniqWith(n.map(t=>({status:p().isObject(t.status)?t.status.state:this.getPrometheusNotificationStatus(t),name:t.labels.alertname,url:t.generatorURL,description:t.annotations.description,fingerprint:p().isObject(t.status)&&t.fingerprint})),p().isEqual)}getPrometheusNotificationStatus(n){const t=n.status;return"firing"===t?"active":t}convertAlertToNotification(n){return new cl.v(this.formatType(n.status),`${n.name} (${n.status})`,this.appendSourceLink(n,n.description),void 0,"Prometheus")}formatType(n){return Ae._[p().findKey({error:["firing","active"],info:["suppressed","unprocessed"],success:["resolved"]},o=>o.includes(n))]}appendSourceLink(n,t){return`${t} <a href="${n.url}" target="_blank"><svg cdsIcon="${g.FI.lineChart}" size="${g.FI.size16}" ></svg></a>`}static{this.\u0275fac=function(t){return new(t||$o)(e.\u0275\u0275inject(Q.J))}}static{this.\u0275prov=e.\u0275\u0275defineInjectable({token:$o,factory:$o.\u0275fac,providedIn:"root"})}}class hn{constructor(n,t){this.alertFormatter=n,this.prometheusService=t,this.canAlertsBeNotified=!1,this.rulesSubject=new K.BehaviorSubject([]),this.rules$=this.rulesSubject.asObservable(),this.alerts=[]}getAlerts(n){this.prometheusService.ifAlertmanagerConfigured(()=>{this.prometheusService.getAlerts(n).subscribe(t=>this.handleAlerts(t),t=>{[404,504].includes(t.status)&&this.prometheusService.disableAlertmanagerConfig()})})}getRules(){this.prometheusService.ifPrometheusConfigured(()=>{this.prometheusService.getRules("alerting").subscribe(n=>{const t=n.groups.reduce((o,s)=>o.concat(s.rules.map(d=>(d.group=s.name,d))),[]);this.rulesSubject.next(t)})})}refresh(n){this.getAlerts(n)}handleAlerts(n){this.canAlertsBeNotified&&this.notifyOnAlertChanges(n,this.alerts),this.activeAlerts=p().reduce(n,(t,o)=>"active"===o.status.state?++t:t,0),this.activeCriticalAlerts=p().reduce(n,(t,o)=>"active"===o.status.state&&"critical"===o.labels.severity?++t:t,0),this.activeWarningAlerts=p().reduce(n,(t,o)=>"active"===o.status.state&&"warning"===o.labels.severity?++t:t,0),this.alerts=n.reverse().sort((t,o)=>t.labels.severity.localeCompare(o.labels.severity)),this.canAlertsBeNotified=!0}notifyOnAlertChanges(n,t){const o=this.getChangedAlerts(this.alertFormatter.convertToCustomAlerts(n),this.alertFormatter.convertToCustomAlerts(t)),d=p().filter(o,h=>"suppressed"!==h.status).map(h=>this.alertFormatter.convertAlertToNotification(h));this.alertFormatter.sendNotifications(d)}getChangedAlerts(n,t){return p().differenceWith(n,t,p().isEqual).concat(this.getVanishedAlerts(n,t))}getVanishedAlerts(n,t){return p().differenceWith(t,n,(o,s)=>o.fingerprint===s.fingerprint).map(o=>(o.status="resolved",o))}static{this.\u0275fac=function(t){return new(t||hn)(e.\u0275\u0275inject($o),e.\u0275\u0275inject(Sn.o))}}static{this.\u0275prov=e.\u0275\u0275defineInjectable({token:hn,factory:hn.\u0275fac,providedIn:"root"})}}const dl=()=>({exact:!0});function Zh(i,n){if(1&i&&(e.\u0275\u0275i18nStart(0,0,1),e.\u0275\u0275element(1,"small",10),e.\u0275\u0275i18nEnd()),2&i){const t=e.\u0275\u0275nextContext();e.\u0275\u0275advance(),e.\u0275\u0275i18nExp(t.prometheusAlertService.activeCriticalAlerts),e.\u0275\u0275i18nApply(0)}}function qh(i,n){if(1&i&&(e.\u0275\u0275i18nStart(0,0,2),e.\u0275\u0275element(1,"small",11),e.\u0275\u0275i18nEnd()),2&i){const t=e.\u0275\u0275nextContext();e.\u0275\u0275advance(),e.\u0275\u0275i18nExp(t.prometheusAlertService.activeWarningAlerts),e.\u0275\u0275i18nApply(0)}}class xo{constructor(n){this.prometheusAlertService=n}static{this.\u0275fac=function(t){return new(t||xo)(e.\u0275\u0275directiveInject(hn))}}static{this.\u0275cmp=e.\u0275\u0275defineComponent({type:xo,selectors:[["cd-prometheus-tabs"]],decls:12,vars:8,consts:()=>{let n,t,o;return n=$localize`:␟ac07bb1f917a39f678f74b7683780ecb7da8a0e0␟4126206677062426675:Active Alerts ${"\ufffd*4:1\ufffd\ufffd#1:1\ufffd"}:START_SMALL_TEXT:${"\ufffd0:1\ufffd"}:INTERPOLATION:${"[\ufffd/#1:1\ufffd\ufffd/*4:1\ufffd|\ufffd/#1:2\ufffd\ufffd/*5:2\ufffd]"}:CLOSE_SMALL_TEXT:${"\ufffd*5:2\ufffd\ufffd#1:2\ufffd"}:START_SMALL_TEXT_1:${"\ufffd0:2\ufffd"}:INTERPOLATION_1:${"[\ufffd/#1:1\ufffd\ufffd/*4:1\ufffd|\ufffd/#1:2\ufffd\ufffd/*5:2\ufffd]"}:CLOSE_SMALL_TEXT:`,n=e.\u0275\u0275i18nPostprocess(n),t=$localize`:␟9fe218829514884cdd0ca2300573a4e0428c324f␟8154453727027523235:Alerts`,o=$localize`:␟aa0c44aa1e5727061baa91e954f77e2f5f9a37c9␟6646103385727562519:Silences`,[n,t,o,[1,"nav","nav-tabs"],[1,"nav-item"],["routerLink","/monitoring/active-alerts","routerLinkActive","active","ariaCurrentWhenActive","page",1,"nav-link",3,"routerLinkActiveOptions"],["class","badge badge-danger ms-1",4,"ngIf"],["class","badge badge-warning ms-1",4,"ngIf"],["routerLink","/monitoring/alerts","routerLinkActive","active","ariaCurrentWhenActive","page",1,"nav-link",3,"routerLinkActiveOptions"],["routerLink","/monitoring/silences","routerLinkActive","active","ariaCurrentWhenActive","page",1,"nav-link",3,"routerLinkActiveOptions"],[1,"badge","badge-danger","ms-1"],[1,"badge","badge-warning","ms-1"]]},template:function(t,o){1&t&&(e.\u0275\u0275elementStart(0,"ul",3)(1,"li",4)(2,"a",5),e.\u0275\u0275i18nStart(3,0),e.\u0275\u0275template(4,Zh,2,1,"small",6)(5,qh,2,1,"small",7),e.\u0275\u0275i18nEnd(),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(6,"li",4)(7,"a",8),e.\u0275\u0275i18n(8,1),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(9,"li",4)(10,"a",9),e.\u0275\u0275i18n(11,2),e.\u0275\u0275elementEnd()()()),2&t&&(e.\u0275\u0275advance(2),e.\u0275\u0275property("routerLinkActiveOptions",e.\u0275\u0275pureFunction0(5,dl)),e.\u0275\u0275advance(2),e.\u0275\u0275property("ngIf",o.prometheusAlertService.activeCriticalAlerts>0),e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf",o.prometheusAlertService.activeWarningAlerts>0),e.\u0275\u0275advance(2),e.\u0275\u0275property("routerLinkActiveOptions",e.\u0275\u0275pureFunction0(6,dl)),e.\u0275\u0275advance(3),e.\u0275\u0275property("routerLinkActiveOptions",e.\u0275\u0275pureFunction0(7,dl)))},dependencies:[l.NgIf,u.RouterLink,u.RouterLinkActive]})}}const eT=["externalLinkTpl"];function tT(i,n){1&i&&(e.\u0275\u0275elementStart(0,"cd-alert-panel",4),e.\u0275\u0275i18nStart(1,1),e.\u0275\u0275element(2,"cd-doc",5),e.\u0275\u0275i18nEnd(),e.\u0275\u0275elementEnd())}function nT(i,n){if(1&i&&e.\u0275\u0275element(0,"cd-table-key-value",10),2&i){const t=e.\u0275\u0275nextContext(3);e.\u0275\u0275property("renderObjects",!0)("hideEmpty",!0)("appendParentKey",!1)("data",t.expandedRow)("customCss",t.customCss)("autoReload",!1)}}function oT(i,n){1&i&&(e.\u0275\u0275elementContainerStart(0),e.\u0275\u0275template(1,nT,1,6,"cd-table-key-value",9),e.\u0275\u0275elementContainerEnd())}function iT(i,n){if(1&i){const t=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"cd-table",6),e.\u0275\u0275listener("setExpandedRow",function(s){e.\u0275\u0275restoreView(t);const d=e.\u0275\u0275nextContext();return e.\u0275\u0275resetView(d.setExpandedRow(s))})("updateSelection",function(s){e.\u0275\u0275restoreView(t);const d=e.\u0275\u0275nextContext();return e.\u0275\u0275resetView(d.updateSelection(s))}),e.\u0275\u0275element(1,"cd-table-actions",7),e.\u0275\u0275template(2,oT,2,0,"ng-container",8),e.\u0275\u0275elementEnd()}if(2&i){const t=e.\u0275\u0275nextContext();e.\u0275\u0275property("data",t.prometheusAlertService.alerts)("columns",t.columns)("forceIdentifier",!0)("customCss",t.customCss)("hasDetails",!0),e.\u0275\u0275advance(),e.\u0275\u0275property("permission",t.permission)("selection",t.selection)("tableActions",t.tableActions),e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf",t.expandedRow)}}function aT(i,n){if(1&i&&(e.\u0275\u0275elementStart(0,"a",11),e.\u0275\u0275namespaceSVG(),e.\u0275\u0275element(1,"svg",12),e.\u0275\u0275text(2," Source "),e.\u0275\u0275elementEnd()),2&i){const t=n.data.value,o=e.\u0275\u0275nextContext();e.\u0275\u0275property("href",t,e.\u0275\u0275sanitizeUrl),e.\u0275\u0275advance(),e.\u0275\u0275property("cdsIcon",o.icons.lineChart)("size",o.icons.size16)}}class bs extends uo{constructor(n,t,o,s){super(s),this.authStorageService=n,this.prometheusAlertService=t,this.urlBuilder=o,this.selection=new N.y,this.icons=g.FI,this.permission=this.authStorageService.getPermissions().prometheus,this.tableActions=[{permission:"create",canBePrimary:d=>d.hasSingleSelection,disable:d=>!d.hasSingleSelection||d.first().cdExecuting,icon:g.FI.add,routerLink:()=>"/monitoring"+this.urlBuilder.getCreateFrom(this.selection.first().fingerprint),name:$localize`Create Silence`}]}ngOnInit(){super.ngOnInit(),this.columns=[{name:$localize`Name`,prop:"labels.alertname",cellClass:"fw-bold",flexGrow:2},{name:$localize`Summary`,prop:"annotations.summary",flexGrow:3},{name:$localize`Severity`,prop:"labels.severity",flexGrow:1,cellTransformation:b.x.badge,customTemplateConfig:{map:{critical:{class:"badge-danger"},warning:{class:"badge-warning"}}}},{name:$localize`State`,prop:"status.state",flexGrow:1,cellTransformation:b.x.badge,customTemplateConfig:{map:{active:{class:"badge-info"},unprocessed:{class:"badge-warning"},suppressed:{class:"badge-dark"}}}},{name:$localize`Started`,prop:"startsAt",cellTransformation:b.x.timeAgo,flexGrow:1},{name:$localize`URL`,prop:"generatorURL",flexGrow:1,sortable:!1,cellTemplate:this.externalLinkTpl}],this.prometheusAlertService.getAlerts(!0)}updateSelection(n){this.selection=n}static{this.\u0275fac=function(t){return new(t||bs)(e.\u0275\u0275directiveInject(c.v),e.\u0275\u0275directiveInject(hn),e.\u0275\u0275directiveInject(z.E),e.\u0275\u0275directiveInject(Sn.o))}}static{this.\u0275cmp=e.\u0275\u0275defineComponent({type:bs,selectors:[["cd-active-alert-list"]],viewQuery:function(t,o){if(1&t&&e.\u0275\u0275viewQuery(eT,7),2&t){let s;e.\u0275\u0275queryRefresh(s=e.\u0275\u0275loadQuery())&&(o.externalLinkTpl=s.first)}},features:[e.\u0275\u0275ProvidersFeature([{provide:z.E,useValue:new z.E("silences")}]),e.\u0275\u0275InheritDefinitionFeature],decls:5,vars:2,consts:()=>{let n;return n=$localize`:␟e5ea46d3b8c087be7516773c0a72d79746f6032d␟6076383047066830528:To see all active Prometheus alerts, please provide the URL to the API of Prometheus' Alertmanager as described in the ${"\ufffd#2\ufffd"}:START_TAG_CD_DOC:${"\ufffd/#2\ufffd"}:CLOSE_TAG_CD_DOC:.`,[["externalLinkTpl",""],n,["type","info",4,"ngIf"],["identifier","fingerprint","selectionType","single",3,"data","columns","forceIdentifier","customCss","hasDetails","setExpandedRow","updateSelection",4,"ngIf"],["type","info"],["section","prometheus"],["identifier","fingerprint","selectionType","single",3,"setExpandedRow","updateSelection","data","columns","forceIdentifier","customCss","hasDetails"],[1,"table-actions",3,"permission","selection","tableActions"],[4,"ngIf"],[3,"renderObjects","hideEmpty","appendParentKey","data","customCss","autoReload",4,"cdTableDetail"],[3,"renderObjects","hideEmpty","appendParentKey","data","customCss","autoReload"],["target","_blank",3,"href"],[3,"cdsIcon","size"]]},template:function(t,o){1&t&&(e.\u0275\u0275element(0,"cd-prometheus-tabs"),e.\u0275\u0275template(1,tT,3,0,"cd-alert-panel",2)(2,iT,3,9,"cd-table",3)(3,aT,3,3,"ng-template",null,0,e.\u0275\u0275templateRefExtractor)),2&t&&(e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf",!o.isAlertmanagerConfigured),e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf",o.isAlertmanagerConfigured))},dependencies:[l.NgIf,nt.m,Ao.C,We.O,Rt.i,at.j,Et.N,D.IconDirective,xo]})}}var ul=r(64346);function rT(i,n){1&i&&(e.\u0275\u0275elementStart(0,"cd-alert-panel",3),e.\u0275\u0275i18nStart(1,0),e.\u0275\u0275element(2,"cd-doc",4),e.\u0275\u0275i18nEnd(),e.\u0275\u0275elementEnd())}function lT(i,n){if(1&i&&e.\u0275\u0275element(0,"cd-table-key-value",8),2&i){const t=e.\u0275\u0275nextContext(3);e.\u0275\u0275property("data",t.expandedRow)("renderObjects",!0)("hideKeys",t.hideKeys)}}function _T(i,n){1&i&&(e.\u0275\u0275elementContainerStart(0),e.\u0275\u0275template(1,lT,1,3,"cd-table-key-value",7),e.\u0275\u0275elementContainerEnd())}function cT(i,n){if(1&i){const t=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"cd-table",5),e.\u0275\u0275listener("setExpandedRow",function(s){e.\u0275\u0275restoreView(t);const d=e.\u0275\u0275nextContext();return e.\u0275\u0275resetView(d.setExpandedRow(s))})("updateSelection",function(s){e.\u0275\u0275restoreView(t);const d=e.\u0275\u0275nextContext();return e.\u0275\u0275resetView(d.updateSelection(s))}),e.\u0275\u0275template(1,_T,2,0,"ng-container",6),e.\u0275\u0275elementEnd()}if(2&i){const t=e.\u0275\u0275nextContext();e.\u0275\u0275property("data",t.rules)("columns",t.columns)("selectionType","single")("hasDetails",!0),e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf",t.expandedRow)}}class Ns extends uo{constructor(n,t){super(t),this.prometheusAlertService=n,this.selection=new N.y,this.rules=[],this.hideKeys=["alerts","type"]}ngOnInit(){super.ngOnInit(),this.prometheusAlertService.getRules(),this.rulesSubscription=this.prometheusAlertService.rules$.subscribe(n=>{this.rules=n}),this.columns=[{prop:"name",name:$localize`Name`,cellClass:"fw-bold",flexGrow:2},{prop:"labels.severity",name:$localize`Severity`,flexGrow:1,cellTransformation:b.x.badge,customTemplateConfig:{map:{critical:{class:"badge-danger"},warning:{class:"badge-warning"}}}},{prop:"group",name:$localize`Group`,flexGrow:1,cellTransformation:b.x.badge},{prop:"duration",name:$localize`Duration`,pipe:new ul.b,flexGrow:1},{prop:"query",name:$localize`Query`,isHidden:!0,flexGrow:1},{prop:"annotations.summary",name:$localize`Summary`,flexGrow:3}]}updateSelection(n){this.selection=n}ngOnDestroy(){this.rulesSubscription.unsubscribe()}static{this.\u0275fac=function(t){return new(t||Ns)(e.\u0275\u0275directiveInject(hn),e.\u0275\u0275directiveInject(Sn.o))}}static{this.\u0275cmp=e.\u0275\u0275defineComponent({type:Ns,selectors:[["cd-rules-list"]],features:[e.\u0275\u0275InheritDefinitionFeature],decls:3,vars:2,consts:()=>{let n;return n=$localize`:␟e51cb11d7c42e86517841db1f6029034c8150156␟3961415353470115523:To see all configured Prometheus alerts, please provide the URL to the API of Prometheus as described in the  ${"\ufffd#2\ufffd"}:START_TAG_CD_DOC:${"\ufffd/#2\ufffd"}:CLOSE_TAG_CD_DOC:.`,[n,["type","info",4,"ngIf"],[3,"data","columns","selectionType","hasDetails","setExpandedRow","updateSelection",4,"ngIf"],["type","info"],["section","prometheus"],[3,"setExpandedRow","updateSelection","data","columns","selectionType","hasDetails"],[4,"ngIf"],[3,"data","renderObjects","hideKeys",4,"cdTableDetail"],[3,"data","renderObjects","hideKeys"]]},template:function(t,o){1&t&&(e.\u0275\u0275element(0,"cd-prometheus-tabs"),e.\u0275\u0275template(1,rT,3,0,"cd-alert-panel",1)(2,cT,2,5,"cd-table",2)),2&t&&(e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf",!o.isPrometheusConfigured),e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf",o.isPrometheusConfigured))},dependencies:[l.NgIf,nt.m,Ao.C,We.O,Rt.i,Et.N,xo]})}}var pl=r(5155);class po{constructor(){this.valueAttributePath={alertname:"name",instance:"alerts.0.labels.instance",job:"alerts.0.labels.job",severity:"labels.severity"}}singleMatch(n,t){return this.multiMatch([n],t)}multiMatch(n,t){if(!n.some(o=>o.isRegex))return n.forEach(o=>{t=this.getMatchedRules(o,t)}),this.describeMatch(t)}getMatchedRules(n,t){const o=this.getAttributePath(n.name);return t.filter(s=>p().get(s,o)===n.value)}describeMatch(n){let t=0;return n.forEach(o=>t+=o.alerts.length),{status:this.getMatchText(n.length,t),cssClass:t?"has-success":"has-warning"}}getAttributePath(n){return this.valueAttributePath[n]}getMatchText(n,t){const o={noRule:$localize`Your matcher seems to match no currently defined rule or active alert.`,noAlerts:$localize`no active alerts`,alert:$localize`1 active alert`,alerts:$localize`${t} active alerts`,rule:$localize`Matches 1 rule`,rules:$localize`Matches ${n} rules`},s=n>1?o.rules:o.rule,d=t?t>1?o.alerts:o.alert:o.noAlerts;return n?$localize`${s} with ${d}.`:o.noRule}static{this.\u0275fac=function(t){return new(t||po)}}static{this.\u0275prov=e.\u0275\u0275defineInjectable({token:po,factory:po.\u0275fac,providedIn:"root"})}}class Ti{calculateDuration(n,t){const o=+n,s=+t,d=this.getDuration(Math.abs(o-s));return o>s?"-"+d:d}getDuration(n){const t=new Date(n),o=t.getUTCHours(),s=t.getUTCMinutes(),h=(I,$)=>I&&I+$;return[h(Math.floor(n/864e5),"d"),h(o,"h"),h(s,"m")].filter(I=>I).join(" ")}calculateDate(n,t,o){const s=+n;if(p().isNaN(s))return;const d=this.getDurationMs(t)*(o?-1:1);return new Date(s+d)}getDurationMs(n){return 6e4*(60*(24*this.getNumbersFromString(n,"d")+this.getNumbersFromString(n,"h"))+this.getNumbersFromString(n,"m"))}getNumbersFromString(n,t){const o=n.match(new RegExp(`[0-9 ]+${t}`,"i"));return o?parseInt(o[0],10):0}static{this.\u0275fac=function(t){return new(t||Ti)}}static{this.\u0275prov=e.\u0275\u0275defineInjectable({token:Ti,factory:Ti.\u0275fac,providedIn:"root"})}}function dT(i,n){if(1&i&&(e.\u0275\u0275elementStart(0,"option",30),e.\u0275\u0275text(1),e.\u0275\u0275elementEnd()),2&i){const t=n.$implicit;e.\u0275\u0275property("value",t),e.\u0275\u0275advance(),e.\u0275\u0275textInterpolate1(" ",t," ")}}function uT(i,n){1&i&&(e.\u0275\u0275elementStart(0,"span",31),e.\u0275\u0275i18n(1,7),e.\u0275\u0275elementEnd())}function pT(i,n){1&i&&(e.\u0275\u0275elementStart(0,"span",31),e.\u0275\u0275i18n(1,8),e.\u0275\u0275elementEnd())}function mT(i,n){if(1&i&&(e.\u0275\u0275elementStart(0,"div",32)(1,"span"),e.\u0275\u0275text(2),e.\u0275\u0275elementEnd()()),2&i){const t=e.\u0275\u0275nextContext();e.\u0275\u0275classMapInterpolate1("cd-col-form-offset ",t.matcherMatch.cssClass,""),e.\u0275\u0275advance(),e.\u0275\u0275classMapInterpolate1("text-muted ",t.matcherMatch.cssClass,""),e.\u0275\u0275advance(),e.\u0275\u0275textInterpolate1(" ",t.matcherMatch.status," ")}}class Is{constructor(n,t,o,s){this.formBuilder=n,this.silenceMatcher=t,this.activeModal=o,this.actionLabels=s,this.submitAction=new e.EventEmitter,this.editMode=!1,this.nameAttributes=["alertname","instance","job","severity"],this.possibleValues=[],this.matcherMatch=void 0,this.valueClick=new K.Subject,this.valueFocus=new K.Subject,this.search=d=>(0,K.merge)(d.pipe((0,v.debounceTime)(200),(0,v.distinctUntilChanged)()),this.valueFocus,this.valueClick.pipe((0,v.filter)(()=>!this.typeahead.isPopupOpen()))).pipe((0,v.map)(h=>(""===h?this.possibleValues:this.possibleValues.filter(I=>I.toLowerCase().indexOf(h.toLowerCase())>-1)).slice(0,10))),this.createForm(),this.subscribeToChanges()}createForm(){this.form=this.formBuilder.group({name:[null,[C.Validators.required]],value:[{value:"",disabled:!0},[C.Validators.required]],isRegex:new C.UntypedFormControl(!1)})}subscribeToChanges(){this.form.get("name").valueChanges.subscribe(n=>{null!==n?(this.setPossibleValues(n),this.form.get("value").enable()):this.form.get("value").disable()}),this.form.get("value").valueChanges.subscribe(n=>{const t=this.form.value;t.value=n,this.matcherMatch=this.silenceMatcher.singleMatch(t,this.rules)})}setPossibleValues(n){this.possibleValues=p().sortedUniq(this.rules.map(t=>p().get(t,this.silenceMatcher.getAttributePath(n))).filter(t=>t))}getMode(){return this.editMode?this.actionLabels.EDIT:this.actionLabels.ADD}preFillControls(n){this.form.setValue(n)}onSubmit(){this.submitAction.emit(this.form.value),this.activeModal.close()}static{this.\u0275fac=function(t){return new(t||Is)(e.\u0275\u0275directiveInject(Dt.$),e.\u0275\u0275directiveInject(po),e.\u0275\u0275directiveInject(G.NgbActiveModal),e.\u0275\u0275directiveInject(m.Ss))}}static{this.\u0275cmp=e.\u0275\u0275defineComponent({type:Is,selectors:[["cd-silence-matcher-modal"]],viewQuery:function(t,o){if(1&t&&e.\u0275\u0275viewQuery(G.NgbTypeahead,7),2&t){let s;e.\u0275\u0275queryRefresh(s=e.\u0275\u0275loadQuery())&&(o.typeahead=s.first)}},outputs:{submitAction:"submitAction"},decls:32,vars:11,consts:()=>{let n,t,o,s,d,h,I,$;return n=$localize`:␟78af6a5e6e4d305557054b64d10f9f9446d8043d␟4490634877766743178:{VAR_SELECT, select, true {Edit} other {Add}}`,n=e.\u0275\u0275i18nPostprocess(n,{VAR_SELECT:"\ufffd0\ufffd"}),t=$localize`:␟b2404fa8e80946d0ce3d0ae369b51cb26ec28d42␟1197304261393808270:${n}:ICU: Matcher`,o=$localize`:␟cff1428d10d59d14e45edec3c735a27b5482db59␟8953033926734869941:Name`,s=$localize`:␟9c25e04f554875dc2625a78ba0fc56c6010cd0d3␟2568530683178009178:-- Select an attribute to match against --`,d=$localize`:␟5049e204c14c648691ac775a64fb504467aeb549␟6555318547274416232:Value`,h=$localize`:␟77fc5c63497fc031ddc97645484e3d94ad27766c␟6019895715758759494:Use regular expression`,I=$localize`:␟4aa19de2a2b54cbda39e9c62917b23044c087776␟751124305869330542:This field is required!`,$=$localize`:␟4aa19de2a2b54cbda39e9c62917b23044c087776␟751124305869330542:This field is required!`,[["formDir","ngForm"],["instance","ngbTypeahead"],t,o,s,d,h,I,$,[3,"modalRef"],[1,"modal-title"],[1,"modal-content"],["novalidate","",1,"form",3,"formGroup"],[1,"modal-body"],[1,"form-group","row"],["for","name",1,"cd-col-form-label","required"],[1,"cd-col-form-input"],["id","name","formControlName","name","name","name",1,"form-select"],[3,"ngValue"],[3,"value",4,"ngFor","ngForOf"],["class","help-block",4,"ngIf"],["for","value",1,"cd-col-form-label","required"],["id","value","type","text","formControlName","value",1,"form-control",3,"focus","click","ngbTypeahead"],["id","match-state",3,"class",4,"ngIf"],[1,"cd-col-form-offset"],[1,"custom-control","custom-checkbox"],["type","checkbox","formControlName","isRegex","name","is-regex","id","is-regex",1,"custom-control-input"],["for","is-regex",1,"custom-control-label"],[1,"modal-footer"],[3,"submitActionEvent","form","submitText"],[3,"value"],[1,"help-block"],["id","match-state"]]},template:function(t,o){if(1&t){const s=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"cd-modal",9)(1,"span",10),e.\u0275\u0275i18n(2,2),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementContainerStart(3,11),e.\u0275\u0275elementStart(4,"form",12,0)(6,"div",13)(7,"div",14)(8,"label",15),e.\u0275\u0275i18n(9,3),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(10,"div",16)(11,"select",17)(12,"option",18),e.\u0275\u0275i18n(13,4),e.\u0275\u0275elementEnd(),e.\u0275\u0275template(14,dT,2,2,"option",19),e.\u0275\u0275elementEnd(),e.\u0275\u0275template(15,uT,2,0,"span",20),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(16,"div",14)(17,"label",21),e.\u0275\u0275i18n(18,5),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(19,"div",16)(20,"input",22,1),e.\u0275\u0275listener("focus",function(h){return e.\u0275\u0275restoreView(s),e.\u0275\u0275resetView(o.valueFocus.next(h.target.value))})("click",function(h){return e.\u0275\u0275restoreView(s),e.\u0275\u0275resetView(o.valueClick.next(h.target.value))}),e.\u0275\u0275elementEnd(),e.\u0275\u0275template(22,pT,2,0,"span",20),e.\u0275\u0275elementEnd(),e.\u0275\u0275template(23,mT,3,7,"div",23),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(24,"div",14)(25,"div",24)(26,"div",25),e.\u0275\u0275element(27,"input",26),e.\u0275\u0275elementStart(28,"label",27),e.\u0275\u0275i18n(29,6),e.\u0275\u0275elementEnd()()()()(),e.\u0275\u0275elementStart(30,"div",28)(31,"cd-form-button-panel",29),e.\u0275\u0275listener("submitActionEvent",function(){return e.\u0275\u0275restoreView(s),e.\u0275\u0275resetView(o.onSubmit())}),e.\u0275\u0275elementEnd()()(),e.\u0275\u0275elementContainerEnd(),e.\u0275\u0275elementEnd()}if(2&t){const s=e.\u0275\u0275reference(5);e.\u0275\u0275property("modalRef",o.activeModal),e.\u0275\u0275advance(2),e.\u0275\u0275i18nExp(o.editMode),e.\u0275\u0275i18nApply(2),e.\u0275\u0275advance(2),e.\u0275\u0275property("formGroup",o.form),e.\u0275\u0275advance(8),e.\u0275\u0275property("ngValue",null),e.\u0275\u0275advance(2),e.\u0275\u0275property("ngForOf",o.nameAttributes),e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf",o.form.showError("name",s,"required")),e.\u0275\u0275advance(5),e.\u0275\u0275property("ngbTypeahead",o.search),e.\u0275\u0275advance(2),e.\u0275\u0275property("ngIf",o.form.showError("value",s,"required")),e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf",o.form.getValue("value")&&!o.form.getValue("isRegex")&&o.matcherMatch),e.\u0275\u0275advance(8),e.\u0275\u0275property("form",o.form)("submitText",o.getMode())}},dependencies:[l.NgForOf,l.NgIf,Ut.z,oe.e,Ge.S,we.a,Ve.C,ze.E,C.\u0275NgNoValidate,C.NgSelectOption,C.\u0275NgSelectMultipleOption,C.DefaultValueAccessor,C.CheckboxControlValueAccessor,C.SelectControlValueAccessor,C.NgControlStatus,C.NgControlStatusGroup,C.FormGroupDirective,C.FormControlName,G.NgbTypeahead]})}}const fT=i=>({"btn-warning":i}),ET=(i,n)=>({"text-warning":i,"text-danger":n}),gT=(i,n)=>({index:i,matcher:n});function CT(i,n){if(1&i&&(e.\u0275\u0275elementStart(0,"i",62),e.\u0275\u0275text(1,"~"),e.\u0275\u0275elementEnd()),2&i){const t=e.\u0275\u0275nextContext(2).$implicit;e.\u0275\u0275property("ngbTooltip",t.tooltip)}}function ST(i,n){1&i&&(e.\u0275\u0275elementStart(0,"i",63),e.\u0275\u0275text(1,"="),e.\u0275\u0275elementEnd())}function hT(i,n){if(1&i&&(e.\u0275\u0275elementStart(0,"span",59),e.\u0275\u0275template(1,CT,2,1,"i",60)(2,ST,2,0,"i",61),e.\u0275\u0275elementEnd()),2&i){const t=e.\u0275\u0275nextContext().$implicit,o=e.\u0275\u0275nextContext().matcher;e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf",o[t.attribute]),e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf",!o[t.attribute])}}function TT(i,n){if(1&i&&(e.\u0275\u0275elementContainerStart(0),e.\u0275\u0275element(1,"input",64),e.\u0275\u0275elementContainerEnd()),2&i){const t=e.\u0275\u0275nextContext().$implicit,o=e.\u0275\u0275nextContext(),s=o.matcher,d=o.index;e.\u0275\u0275advance(),e.\u0275\u0275propertyInterpolate2("id","matcher-",t.attribute,"-",d,""),e.\u0275\u0275property("value",s[t.attribute])}}function FT(i,n){if(1&i&&(e.\u0275\u0275elementContainerStart(0),e.\u0275\u0275template(1,hT,3,2,"span",58)(2,TT,2,4,"ng-container",26),e.\u0275\u0275elementContainerEnd()),2&i){const t=n.$implicit;e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf","isRegex"===t.attribute),e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf","isRegex"!==t.attribute)}}function vT(i,n){if(1&i){const t=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"div",53),e.\u0275\u0275template(1,FT,3,2,"ng-container",44),e.\u0275\u0275elementStart(2,"button",54),e.\u0275\u0275listener("click",function(){const s=e.\u0275\u0275restoreView(t).index,d=e.\u0275\u0275nextContext();return e.\u0275\u0275resetView(d.showMatcherModal(s))}),e.\u0275\u0275namespaceSVG(),e.\u0275\u0275element(3,"svg",55),e.\u0275\u0275elementEnd(),e.\u0275\u0275namespaceHTML(),e.\u0275\u0275elementStart(4,"button",56),e.\u0275\u0275listener("click",function(){const s=e.\u0275\u0275restoreView(t).index,d=e.\u0275\u0275nextContext();return e.\u0275\u0275resetView(d.deleteMatcher(s))}),e.\u0275\u0275namespaceSVG(),e.\u0275\u0275element(5,"svg",55),e.\u0275\u0275elementEnd()(),e.\u0275\u0275namespaceHTML(),e.\u0275\u0275element(6,"span",57)}if(2&i){const t=n.index,o=e.\u0275\u0275nextContext();e.\u0275\u0275advance(),e.\u0275\u0275property("ngForOf",o.matcherConfig),e.\u0275\u0275advance(),e.\u0275\u0275propertyInterpolate1("id","matcher-edit-",t,""),e.\u0275\u0275advance(),e.\u0275\u0275property("cdsIcon",o.icons.edit)("size",o.icons.size16),e.\u0275\u0275advance(),e.\u0275\u0275propertyInterpolate1("id","matcher-delete-",t,""),e.\u0275\u0275advance(),e.\u0275\u0275property("cdsIcon",o.icons.trash)("size",o.icons.size16)}}function MT(i,n){1&i&&(e.\u0275\u0275elementStart(0,"cd-helper"),e.\u0275\u0275i18n(1,15),e.\u0275\u0275elementEnd())}function RT(i,n){1&i&&(e.\u0275\u0275elementStart(0,"span",65),e.\u0275\u0275i18n(1,16),e.\u0275\u0275elementEnd())}function OT(i,n){1&i&&(e.\u0275\u0275elementStart(0,"span",65),e.\u0275\u0275i18n(1,17),e.\u0275\u0275elementEnd())}function PT(i,n){1&i&&(e.\u0275\u0275elementStart(0,"span",65),e.\u0275\u0275i18n(1,18),e.\u0275\u0275elementEnd())}function bT(i,n){1&i&&(e.\u0275\u0275elementStart(0,"span",65),e.\u0275\u0275i18n(1,19),e.\u0275\u0275elementEnd())}function NT(i,n){1&i&&(e.\u0275\u0275elementStart(0,"span",65),e.\u0275\u0275i18n(1,20),e.\u0275\u0275elementEnd())}function IT(i,n){if(1&i&&(e.\u0275\u0275elementStart(0,"h5",66)(1,"strong"),e.\u0275\u0275i18n(2,21),e.\u0275\u0275elementEnd()()),2&i){e.\u0275\u0275nextContext();const t=e.\u0275\u0275reference(4);e.\u0275\u0275property("ngClass",e.\u0275\u0275pureFunction2(1,ET,!t.submitted,t.submitted))}}function AT(i,n){1&i&&e.\u0275\u0275elementContainer(0)}function DT(i,n){if(1&i&&(e.\u0275\u0275elementStart(0,"span"),e.\u0275\u0275template(1,AT,1,0,"ng-container",67),e.\u0275\u0275elementEnd()),2&i){const t=n.$implicit,o=n.index;e.\u0275\u0275nextContext();const s=e.\u0275\u0275reference(1);e.\u0275\u0275advance(),e.\u0275\u0275property("ngTemplateOutlet",s)("ngTemplateOutletContext",e.\u0275\u0275pureFunction2(2,gT,o,t))}}function yT(i,n){if(1&i&&(e.\u0275\u0275elementStart(0,"div",68)(1,"span"),e.\u0275\u0275text(2),e.\u0275\u0275elementEnd()()),2&i){const t=e.\u0275\u0275nextContext();e.\u0275\u0275classMapInterpolate1("cd-col-form-offset ",t.matcherMatch.cssClass,""),e.\u0275\u0275advance(),e.\u0275\u0275classMapInterpolate1("text-muted ",t.matcherMatch.cssClass,""),e.\u0275\u0275advance(),e.\u0275\u0275textInterpolate1(" ",t.matcherMatch.status," ")}}function LT(i,n){if(1&i&&e.\u0275\u0275element(0,"cd-date-time-picker",69),2&i){const t=e.\u0275\u0275nextContext();e.\u0275\u0275property("control",t.form.get("startsAt"))("hasSeconds",!1)}}function $T(i,n){if(1&i&&e.\u0275\u0275element(0,"cd-date-time-picker",69),2&i){const t=e.\u0275\u0275nextContext();e.\u0275\u0275property("control",t.form.get("endsAt"))("hasSeconds",!1)}}class Pn{constructor(n,t,o,s,d,h,I,$,w,X,J){this.router=n,this.authStorageService=t,this.formBuilder=o,this.prometheusService=s,this.notificationService=d,this.route=h,this.timeDiff=I,this.modalService=$,this.silenceMatcher=w,this.actionLabels=X,this.succeededLabels=J,this.icons=g.FI,this.matchName="",this.matchValue="",this.recreate=!1,this.edit=!1,this.resource=$localize`silence`,this.matchers=[],this.matcherMatch=void 0,this.matcherConfig=[{tooltip:$localize`Attribute name`,attribute:"name"},{tooltip:$localize`Regular expression`,attribute:"isRegex"},{tooltip:$localize`Value`,attribute:"value"}],this.datetimeFormat="YYYY-MM-DD HH:mm",this.isNavigate=!0,this.init()}init(){this.chooseMode(),this.authenticate(),this.createForm(),this.setupDates(),this.getData()}chooseMode(){this.edit=this.router.url.startsWith("/monitoring/silences/edit"),this.recreate=this.router.url.startsWith("/monitoring/silences/recreate"),this.edit?this.action=this.actionLabels.EDIT:this.recreate?this.action=this.actionLabels.RECREATE:this.action=this.actionLabels.CREATE}authenticate(){if(this.permission=this.authStorageService.getPermissions().prometheus,!this.permission.read||!(this.edit?this.permission.update:this.permission.create))throw new pl.YW}createForm(){const n=pe.xQ.custom("format",t=>!(""===t||st()(t,this.datetimeFormat).isValid()));this.form=this.formBuilder.group({startsAt:["",[C.Validators.required,n]],duration:["2h",[C.Validators.min(1)]],endsAt:["",[C.Validators.required,n]],createdBy:[this.authStorageService.getUsername(),[C.Validators.required]],comment:[null,[C.Validators.required]]},{validators:pe.xQ.custom("matcherRequired",()=>0===this.matchers.length)})}setupDates(){const n=st()().format(this.datetimeFormat);this.form.silentSet("startsAt",n),this.updateDate(),this.subscribeDateChanges()}updateDate(n){const t=st()(this.form.getValue(n?"endsAt":"startsAt"),this.datetimeFormat).toDate(),o=this.timeDiff.calculateDate(t,this.form.getValue("duration"),n);if(o){const s=st()(o).format(this.datetimeFormat);this.form.silentSet(n?"startsAt":"endsAt",s)}}subscribeDateChanges(){this.form.get("startsAt").valueChanges.subscribe(()=>{this.onDateChange()}),this.form.get("duration").valueChanges.subscribe(()=>{this.updateDate()}),this.form.get("endsAt").valueChanges.subscribe(()=>{this.onDateChange(!0)})}onDateChange(n){const t=st()(this.form.getValue("startsAt"),this.datetimeFormat),o=st()(this.form.getValue("endsAt"),this.datetimeFormat);t.isBefore(o)?this.updateDuration():this.updateDate(n)}updateDuration(){const n=st()(this.form.getValue("startsAt"),this.datetimeFormat).toDate(),t=st()(this.form.getValue("endsAt"),this.datetimeFormat).toDate();this.form.silentSet("duration",this.timeDiff.calculateDuration(n,t))}getData(){this.getRules(),this.getModeSpecificData()}getRules(){return this.prometheusService.ifPrometheusConfigured(()=>this.prometheusService.getRules().subscribe(n=>{this.rules=n.groups.reduce((t,o)=>p().concat(t,o.rules),[])},()=>{this.prometheusService.disablePrometheusConfig(),this.rules=[]}),()=>{this.rules=[],this.notificationService.show(Ae._.info,$localize`Please add your Prometheus host to the dashboard configuration and refresh the page`,void 0,void 0,"Prometheus")}),this.rules}getModeSpecificData(){this.route.params.subscribe(n=>{n.id&&(this.edit||this.recreate?this.prometheusService.getSilences().subscribe(t=>{const o=p().find(t,["id",n.id]);p().isUndefined(o)||this.fillFormWithSilence(o)}):this.prometheusService.getAlerts().subscribe(t=>{const o=p().find(t,["fingerprint",n.id]);p().isUndefined(o)||this.fillFormByAlert(o)}))})}fillFormWithSilence(n){this.id=n.id,this.edit&&(["startsAt","endsAt"].forEach(t=>this.form.silentSet(t,st()(n[t]).format(this.datetimeFormat))),this.updateDuration()),["createdBy","comment"].forEach(t=>this.form.silentSet(t,n[t])),this.matchers=n.matchers,this.validateMatchers()}validateMatchers(){this.rules?(this.matcherMatch=this.silenceMatcher.multiMatch(this.matchers,this.rules),this.form.markAsDirty(),this.form.updateValueAndValidity()):window.setTimeout(()=>this.validateMatchers(),100)}fillFormByAlert(n){const t=n.labels;this.setMatcher({name:"alertname",value:t.alertname,isRegex:!1})}setMatcher(n,t){p().isNumber(t)?this.matchers[t]=n:this.matchers.push(n),this.validateMatchers()}showMatcherModal(n){const o=this.modalService.show(Is).componentInstance;o.rules=this.rules,p().isNumber(n)&&(o.editMode=!0,o.preFillControls(this.matchers[n])),o.submitAction.subscribe(s=>{this.setMatcher(s,n)})}deleteMatcher(n){this.matchers.splice(n,1),this.validateMatchers()}submit(n){this.form.invalid||this.prometheusService.setSilence(this.getSubmitData()).subscribe(t=>{n&&(n.silenceId=t.body.silenceId),this.isNavigate&&this.router.navigate(["/monitoring/silences"]),this.notificationService.show(Ae._.success,this.getNotificationTile(this.matchers),void 0,void 0,"Prometheus"),this.matchers=[]},()=>this.form.setErrors({cdSubmitButton:!0}))}getSubmitData(){const n=this.form.value;return delete n.duration,n.startsAt=st()(n.startsAt,this.datetimeFormat).toISOString(),n.endsAt=st()(n.endsAt,this.datetimeFormat).toISOString(),n.matchers=this.matchers,this.edit&&(n.id=this.id),n}getNotificationTile(n){let t;t=this.edit?this.succeededLabels.EDITED:this.recreate?this.succeededLabels.RECREATED:this.succeededLabels.CREATED;let o="";for(const s of n)o=o.concat(` ${s.name} - ${s.value},`);return`${t} ${this.resource} for ${o.slice(0,-1)}`}static{this.\u0275fac=function(t){return new(t||Pn)(e.\u0275\u0275directiveInject(u.Router),e.\u0275\u0275directiveInject(c.v),e.\u0275\u0275directiveInject(Dt.$),e.\u0275\u0275directiveInject(Sn.o),e.\u0275\u0275directiveInject(Q.J),e.\u0275\u0275directiveInject(u.ActivatedRoute),e.\u0275\u0275directiveInject(Ti),e.\u0275\u0275directiveInject(Yt.B),e.\u0275\u0275directiveInject(po),e.\u0275\u0275directiveInject(m.Ss),e.\u0275\u0275directiveInject(m.Vv))}}static{this.\u0275cmp=e.\u0275\u0275defineComponent({type:Pn,selectors:[["cd-prometheus-form"]],decls:71,vars:29,consts:()=>{let n,t,o,s,d,h,I,$,w,X,J,re,de,Me,ve,Se,$e,Te;return n=$localize`:␟fb127ea03835b3230f0ed981c7080e2ccb879621␟3346778808274133574:${"\ufffd0\ufffd"}:INTERPOLATION: ${"\ufffd1\ufffd"}:INTERPOLATION_1:`,t=$localize`:␟a20424156b8816671f61879f0574a4f27d7b16b9␟1043390381565182083:Creator`,o=$localize`:␟5a5d7ee2acbfa9c91ab7f41d26bda9ff0cafe42f␟2662644497259948010:Comment`,s=$localize`:␟4c11aad490b2d53fdae30b3807beabf79306752c␟3770761673682962465:Start time`,d=$localize`:␟32856b1e8e339b747b21e313e2fe65a51fd450bb␟851901607865498897:If the start time lies in the past the creation time will be used`,h=$localize`:␟a02ea1d4e7424ca989929da5e598f379940fdbf2␟7410432243549869948:Duration`,I=$localize`:␟2f4e35e36f4d3c62e2c17df41730b6dee4afc4b9␟3029887440722063094:End time`,$=$localize`:␟992123459137d45c15df5548bc9682aad835c04b␟133947232251217266:Matchers`,w=$localize`:␟ef765bd80c4806c51c891908c07a24bc76f019eb␟7045831295346420833:Add matcher`,X=$localize`:␟28f86ffd419b869711aa13f5e5ff54be6d70731c␟7585826646011739428:Edit`,J=$localize`:␟826b25211922a1b46436589233cb6f1a163d89b7␟7022070615528435141:Delete`,re=$localize`:␟a3ba06aba047605af8ea1718ec1ba153b7db12a2␟8844130335538491294:Editing a silence will expire the old silence and recreate it as a new silence`,de=$localize`:␟4aa19de2a2b54cbda39e9c62917b23044c087776␟751124305869330542:This field is required!`,Me=$localize`:␟4aa19de2a2b54cbda39e9c62917b23044c087776␟751124305869330542:This field is required!`,ve=$localize`:␟4aa19de2a2b54cbda39e9c62917b23044c087776␟751124305869330542:This field is required!`,Se=$localize`:␟4aa19de2a2b54cbda39e9c62917b23044c087776␟751124305869330542:This field is required!`,$e=$localize`:␟4aa19de2a2b54cbda39e9c62917b23044c087776␟751124305869330542:This field is required!`,Te=$localize`:␟3e023166c55833d5a13f4143e3dbe372befe1b4e␟8198049509360132735:A silence requires at least one matcher`,[["matcherTpl",""],["formDir","ngForm"],["ps","ngbPopover"],["pe","ngbPopover"],["popStart",""],["popEnd",""],n,t,o,s,d,h,I,$,w,re,de,Me,ve,Se,$e,Te,[1,"cd-col-form"],["name","form","novalidate","",1,"form",3,"formGroup"],[1,"card"],[1,"card-header"],[4,"ngIf"],[1,"card-body"],[1,"form-group","row"],["for","created-by",1,"cd-col-form-label","required"],[1,"cd-col-form-input"],["formControlName","createdBy","id","created-by","name","created-by","type","text",1,"form-control"],["class","invalid-feedback",4,"ngIf"],["for","comment",1,"cd-col-form-label","required"],["formControlName","comment","id","comment","name","comment","type","text",1,"form-control"],["for","starts-at",1,"cd-col-form-label"],[1,"required"],["formControlName","startsAt","triggers","manual",1,"form-control",3,"click","keypress","ngbPopover"],["for","duration",1,"cd-col-form-label","required"],["formControlName","duration","id","duration","name","duration","type","text",1,"form-control"],["for","ends-at",1,"cd-col-form-label","required"],["formControlName","endsAt","triggers","manual",1,"form-control",3,"click","keypress","ngbPopover"],[1,"cd-col-form-offset"],[3,"ngClass",4,"ngIf"],[4,"ngFor","ngForOf"],[1,"row"],[1,"col-12"],["type","button","id","add-matcher",1,"btn","btn-light","float-end","my-3",3,"click","ngClass"],[3,"cdsIcon","size"],["id","match-state",3,"class",4,"ngIf"],[1,"card-footer"],[1,"text-right"],[3,"submitActionEvent","form","submitText"],[1,"input-group","my-2"],["type","button","ngbTooltip",X,1,"btn","btn-light",3,"click","id"],[1,"cds-info-color",3,"cdsIcon","size"],["type","button","ngbTooltip",J,1,"btn","btn-light",3,"click","id"],[1,"help-block"],["class","input-group-text",4,"ngIf"],[1,"input-group-text"],[3,"ngbTooltip",4,"ngIf"],["ngbTooltip","Equals",4,"ngIf"],[3,"ngbTooltip"],["ngbTooltip","Equals"],["type","text","disabled","","readonly","",1,"form-control",3,"id","value"],[1,"invalid-feedback"],[3,"ngClass"],[4,"ngTemplateOutlet","ngTemplateOutletContext"],["id","match-state"],[3,"control","hasSeconds"]]},template:function(t,o){if(1&t){const s=e.\u0275\u0275getCurrentView();e.\u0275\u0275template(0,vT,7,9,"ng-template",null,0,e.\u0275\u0275templateRefExtractor),e.\u0275\u0275elementStart(2,"div",22)(3,"form",23,1)(5,"div",24)(6,"div",25)(7,"span"),e.\u0275\u0275i18n(8,6),e.\u0275\u0275pipe(9,"titlecase"),e.\u0275\u0275pipe(10,"upperFirst"),e.\u0275\u0275elementEnd(),e.\u0275\u0275template(11,MT,2,0,"cd-helper",26),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(12,"div",27)(13,"div",28)(14,"label",29),e.\u0275\u0275i18n(15,7),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(16,"div",30),e.\u0275\u0275element(17,"input",31),e.\u0275\u0275template(18,RT,2,0,"span",32),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(19,"div",28)(20,"label",33),e.\u0275\u0275i18n(21,8),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(22,"div",30)(23,"textarea",34),e.\u0275\u0275text(24,"            "),e.\u0275\u0275elementEnd(),e.\u0275\u0275template(25,OT,2,0,"span",32),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(26,"div",28)(27,"label",35)(28,"span",36),e.\u0275\u0275i18n(29,9),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(30,"cd-helper"),e.\u0275\u0275i18n(31,10),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(32,"div",30)(33,"input",37,2),e.\u0275\u0275listener("click",function(){e.\u0275\u0275restoreView(s);const h=e.\u0275\u0275reference(34);return e.\u0275\u0275resetView(h.open())})("keypress",function(){e.\u0275\u0275restoreView(s);const h=e.\u0275\u0275reference(34);return e.\u0275\u0275resetView(h.close())}),e.\u0275\u0275elementEnd(),e.\u0275\u0275template(35,PT,2,0,"span",32),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(36,"div",28)(37,"label",38),e.\u0275\u0275i18n(38,11),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(39,"div",30),e.\u0275\u0275element(40,"input",39),e.\u0275\u0275template(41,bT,2,0,"span",32),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(42,"div",28)(43,"label",40),e.\u0275\u0275i18n(44,12),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(45,"div",30)(46,"input",41,3),e.\u0275\u0275listener("click",function(){e.\u0275\u0275restoreView(s);const h=e.\u0275\u0275reference(47);return e.\u0275\u0275resetView(h.open())})("keypress",function(){e.\u0275\u0275restoreView(s);const h=e.\u0275\u0275reference(47);return e.\u0275\u0275resetView(h.close())}),e.\u0275\u0275elementEnd(),e.\u0275\u0275template(48,NT,2,0,"span",32),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(49,"fieldset")(50,"legend",36),e.\u0275\u0275i18n(51,13),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(52,"div",42),e.\u0275\u0275template(53,IT,3,4,"h5",43)(54,DT,2,5,"span",44),e.\u0275\u0275elementStart(55,"div",45)(56,"div",46)(57,"button",47),e.\u0275\u0275listener("click",function(){return e.\u0275\u0275restoreView(s),e.\u0275\u0275resetView(o.showMatcherModal())}),e.\u0275\u0275namespaceSVG(),e.\u0275\u0275element(58,"svg",48),e.\u0275\u0275namespaceHTML(),e.\u0275\u0275elementContainerStart(59),e.\u0275\u0275i18n(60,14),e.\u0275\u0275elementContainerEnd(),e.\u0275\u0275elementEnd()()()(),e.\u0275\u0275template(61,yT,3,7,"div",49),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(62,"div",50)(63,"div",51)(64,"cd-form-button-panel",52),e.\u0275\u0275pipe(65,"titlecase"),e.\u0275\u0275pipe(66,"upperFirst"),e.\u0275\u0275listener("submitActionEvent",function(){return e.\u0275\u0275restoreView(s),e.\u0275\u0275resetView(o.submit())}),e.\u0275\u0275elementEnd()()()()()(),e.\u0275\u0275template(67,LT,1,2,"ng-template",null,4,e.\u0275\u0275templateRefExtractor)(69,$T,1,2,"ng-template",null,5,e.\u0275\u0275templateRefExtractor)}if(2&t){const s=e.\u0275\u0275reference(4),d=e.\u0275\u0275reference(68),h=e.\u0275\u0275reference(70);e.\u0275\u0275advance(3),e.\u0275\u0275property("formGroup",o.form),e.\u0275\u0275advance(7),e.\u0275\u0275i18nExp(e.\u0275\u0275pipeBind1(9,19,o.action))(e.\u0275\u0275pipeBind1(10,21,o.resource)),e.\u0275\u0275i18nApply(8),e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf",o.edit),e.\u0275\u0275advance(7),e.\u0275\u0275property("ngIf",o.form.showError("createdBy",s,"required")),e.\u0275\u0275advance(7),e.\u0275\u0275property("ngIf",o.form.showError("comment",s,"required")),e.\u0275\u0275advance(8),e.\u0275\u0275property("ngbPopover",d),e.\u0275\u0275advance(2),e.\u0275\u0275property("ngIf",o.form.showError("startsAt",s,"required")),e.\u0275\u0275advance(6),e.\u0275\u0275property("ngIf",o.form.showError("duration",s,"required")),e.\u0275\u0275advance(5),e.\u0275\u0275property("ngbPopover",h),e.\u0275\u0275advance(2),e.\u0275\u0275property("ngIf",o.form.showError("endsAt",s,"required")),e.\u0275\u0275advance(5),e.\u0275\u0275property("ngIf",0===o.matchers.length),e.\u0275\u0275advance(),e.\u0275\u0275property("ngForOf",o.matchers),e.\u0275\u0275advance(3),e.\u0275\u0275property("ngClass",e.\u0275\u0275pureFunction1(27,fT,s.submitted&&0===o.matchers.length)),e.\u0275\u0275advance(),e.\u0275\u0275property("cdsIcon",o.icons.add)("size",o.icons.size16),e.\u0275\u0275advance(3),e.\u0275\u0275property("ngIf",o.matchers.length&&o.matcherMatch),e.\u0275\u0275advance(3),e.\u0275\u0275property("form",o.form)("submitText",e.\u0275\u0275pipeBind1(65,23,o.action)+" "+e.\u0275\u0275pipeBind1(66,25,o.resource))}},dependencies:[l.NgClass,l.NgForOf,l.NgIf,l.NgTemplateOutlet,y.m,Ol.P,oe.e,Ge.S,we.a,Ve.C,ze.E,C.\u0275NgNoValidate,C.DefaultValueAccessor,C.NgControlStatus,C.NgControlStatusGroup,C.FormGroupDirective,C.FormControlName,G.NgbTooltip,G.NgbPopover,D.IconDirective,l.TitleCasePipe,Pe.r],styles:["textarea[_ngcontent-%COMP%]{resize:vertical}"]})}}var xT=r(67120);function UT(i,n){1&i&&(e.\u0275\u0275elementStart(0,"cd-alert-panel",3),e.\u0275\u0275i18nStart(1,0),e.\u0275\u0275element(2,"cd-doc",4),e.\u0275\u0275i18nEnd(),e.\u0275\u0275elementEnd())}function wT(i,n){if(1&i&&e.\u0275\u0275element(0,"cd-table-key-value",9),2&i){const t=e.\u0275\u0275nextContext(3);e.\u0275\u0275property("renderObjects",!0)("hideEmpty",!0)("appendParentKey",!1)("data",t.expandedRow)("customCss",t.customCss)("autoReload",!1)}}function GT(i,n){1&i&&(e.\u0275\u0275elementContainerStart(0),e.\u0275\u0275template(1,wT,1,6,"cd-table-key-value",8),e.\u0275\u0275elementContainerEnd())}function HT(i,n){if(1&i){const t=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"cd-table",5),e.\u0275\u0275listener("setExpandedRow",function(s){e.\u0275\u0275restoreView(t);const d=e.\u0275\u0275nextContext();return e.\u0275\u0275resetView(d.setExpandedRow(s))})("fetchData",function(){e.\u0275\u0275restoreView(t);const s=e.\u0275\u0275nextContext();return e.\u0275\u0275resetView(s.refresh())})("updateSelection",function(s){e.\u0275\u0275restoreView(t);const d=e.\u0275\u0275nextContext();return e.\u0275\u0275resetView(d.updateSelection(s))}),e.\u0275\u0275element(1,"cd-table-actions",6),e.\u0275\u0275template(2,GT,2,0,"ng-container",7),e.\u0275\u0275elementEnd()}if(2&i){const t=e.\u0275\u0275nextContext();e.\u0275\u0275property("data",t.silences)("columns",t.columns)("forceIdentifier",!0)("customCss",t.customCss)("sorts",t.sorts)("hasDetails",!0),e.\u0275\u0275advance(),e.\u0275\u0275property("permission",t.permission)("selection",t.selection)("tableActions",t.tableActions),e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf",t.expandedRow)}}class As extends uo{constructor(n,t,o,s,d,h,I,$,w,X){super(X),this.authStorageService=n,this.cdDatePipe=t,this.modalService=o,this.notificationService=s,this.urlBuilder=d,this.actionLabels=h,this.succeededLabels=I,this.silenceFormComponent=$,this.silenceMatcher=w,this.silences=[],this.selection=new N.y,this.customCss={"badge badge-danger":"active","badge badge-warning":"pending","badge badge-default":"expired"},this.sorts=[{prop:"endsAt",dir:xT.v.desc}],this.permission=this.authStorageService.getPermissions().prometheus;const J=re=>re.first()&&re.first().status&&"expired"===re.first().status.state;this.tableActions=[{permission:"create",icon:g.FI.add,routerLink:()=>this.urlBuilder.getCreate(),canBePrimary:re=>!re.hasSingleSelection,name:this.actionLabels.CREATE},{permission:"create",canBePrimary:re=>re.hasSingleSelection&&J(re),disable:re=>!re.hasSingleSelection||re.first().cdExecuting||re.first().cdExecuting&&J(re)||!J(re),icon:g.FI.copy,routerLink:()=>this.urlBuilder.getRecreate(this.selection.first().id),name:this.actionLabels.RECREATE},{permission:"update",icon:g.FI.edit,canBePrimary:re=>re.hasSingleSelection&&!J(re),disable:re=>!re.hasSingleSelection||re.first().cdExecuting||re.first().cdExecuting&&!J(re)||J(re),routerLink:()=>this.urlBuilder.getEdit(this.selection.first().id),name:this.actionLabels.EDIT},{permission:"delete",icon:g.FI.trash,canBePrimary:re=>re.hasSingleSelection&&!J(re),disable:re=>!re.hasSingleSelection||re.first().cdExecuting||J(re),click:()=>this.expireSilence(),name:this.actionLabels.EXPIRE}],this.columns=[{name:$localize`ID`,prop:"id",flexGrow:3},{name:$localize`Alerts Silenced`,prop:"silencedAlerts",flexGrow:3,cellTransformation:b.x.badge},{name:$localize`Created by`,prop:"createdBy",flexGrow:2},{name:$localize`Started`,prop:"startsAt",pipe:this.cdDatePipe},{name:$localize`Updated`,prop:"updatedAt",pipe:this.cdDatePipe},{name:$localize`Ends`,prop:"endsAt",pipe:this.cdDatePipe},{name:$localize`Status`,prop:"status.state",cellTransformation:b.x.classAdding}]}refresh(){this.prometheusService.ifAlertmanagerConfigured(()=>{this.prometheusService.getSilences().subscribe(n=>{this.silences=n;const t=n.filter(o=>"expired"!==o.status.state);this.getAlerts(t)},()=>{this.prometheusService.disableAlertmanagerConfig()})})}updateSelection(n){this.selection=n}getAlerts(n){const t=this.silenceFormComponent.getRules();n.forEach(o=>{o.matchers.forEach(s=>{this.rules=this.silenceMatcher.getMatchedRules(s,t);const d=[];for(const h of this.rules)d.push(h.name);o.silencedAlerts=d})})}expireSilence(){const n=this.selection.first().id,t=$localize`Silence`,o="Prometheus";this.modalRef=this.modalService.show(O.D,{itemDescription:t,itemNames:[n],actionDescription:this.actionLabels.EXPIRE,submitActionObservable:()=>new K.Observable(s=>{this.prometheusService.expireSilence(n).subscribe(()=>{this.notificationService.show(Ae._.success,`${this.succeededLabels.EXPIRED} ${t} ${n}`,void 0,void 0,o)},d=>{d.application=o,s.error(d)},()=>{s.complete(),this.refresh()})})})}static{this.\u0275fac=function(t){return new(t||As)(e.\u0275\u0275directiveInject(c.v),e.\u0275\u0275directiveInject(Ot.Q),e.\u0275\u0275directiveInject(He.V),e.\u0275\u0275directiveInject(Q.J),e.\u0275\u0275directiveInject(z.E),e.\u0275\u0275directiveInject(m.Ss),e.\u0275\u0275directiveInject(m.Vv),e.\u0275\u0275directiveInject(Pn),e.\u0275\u0275directiveInject(po),e.\u0275\u0275directiveInject(Sn.o))}}static{this.\u0275cmp=e.\u0275\u0275defineComponent({type:As,selectors:[["cd-silences-list"]],features:[e.\u0275\u0275ProvidersFeature([{provide:z.E,useValue:new z.E("monitoring/silences")},Pn]),e.\u0275\u0275InheritDefinitionFeature],decls:3,vars:2,consts:()=>{let n;return n=$localize`:␟bce6b6095fe6984a01acc79ebf18720ab71bfce6␟3285601031315357601:To enable Silences, please provide the URL to the API of the Prometheus' Alertmanager as described in the  ${"\ufffd#2\ufffd"}:START_TAG_CD_DOC:${"\ufffd/#2\ufffd"}:CLOSE_TAG_CD_DOC:.`,[n,["type","info",4,"ngIf"],["selectionType","single",3,"data","columns","forceIdentifier","customCss","sorts","hasDetails","setExpandedRow","fetchData","updateSelection",4,"ngIf"],["type","info"],["section","prometheus"],["selectionType","single",3,"setExpandedRow","fetchData","updateSelection","data","columns","forceIdentifier","customCss","sorts","hasDetails"],[1,"table-actions",3,"permission","selection","tableActions"],[4,"ngIf"],[3,"renderObjects","hideEmpty","appendParentKey","data","customCss","autoReload",4,"cdTableDetail"],[3,"renderObjects","hideEmpty","appendParentKey","data","customCss","autoReload"]]},template:function(t,o){1&t&&(e.\u0275\u0275element(0,"cd-prometheus-tabs"),e.\u0275\u0275template(1,UT,3,0,"cd-alert-panel",1)(2,HT,3,10,"cd-table",2)),2&t&&(e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf",!o.isAlertmanagerConfigured),e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf",o.isAlertmanagerConfigured))},dependencies:[l.NgIf,nt.m,Ao.C,We.O,Rt.i,at.j,Et.N,xo]})}}class Fi{constructor(n){this.http=n,this.url="api/telemetry"}getReport(){return this.http.get(`${this.url}/report`)}enable(n=!0){const t={enable:n};return n&&(t.license_name="sharing-1-0"),this.http.put(`${this.url}`,t)}static{this.\u0275fac=function(t){return new(t||Fi)(e.\u0275\u0275inject(T.HttpClient))}}static{this.\u0275prov=e.\u0275\u0275defineInjectable({token:Fi,factory:Fi.\u0275fac,providedIn:"root"})}}class mo{constructor(){this.visible=!1,this.update=new e.EventEmitter}setVisibility(n){this.visible=n,this.update.emit(n)}static{this.\u0275fac=function(t){return new(t||mo)}}static{this.\u0275prov=e.\u0275\u0275defineInjectable({token:mo,factory:mo.\u0275fac,providedIn:"root"})}}function BT(i,n){if(1&i){const t=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"div"),e.\u0275\u0275text(1," The plugin is already "),e.\u0275\u0275elementStart(2,"b"),e.\u0275\u0275text(3,"enabled"),e.\u0275\u0275elementEnd(),e.\u0275\u0275text(4,". Click "),e.\u0275\u0275elementStart(5,"b"),e.\u0275\u0275text(6,"Deactivate"),e.\u0275\u0275elementEnd(),e.\u0275\u0275text(7," to disable it.\xa0 "),e.\u0275\u0275elementStart(8,"button",78),e.\u0275\u0275listener("click",function(){e.\u0275\u0275restoreView(t);const s=e.\u0275\u0275nextContext(3);return e.\u0275\u0275resetView(s.disableModule("The Telemetry module has been disabled successfully."))}),e.\u0275\u0275i18n(9,31),e.\u0275\u0275elementEnd()()}}function zT(i,n){1&i&&(e.\u0275\u0275elementContainerStart(0),e.\u0275\u0275elementStart(1,"legend"),e.\u0275\u0275elementContainerStart(2),e.\u0275\u0275i18n(3,32),e.\u0275\u0275elementContainerEnd(),e.\u0275\u0275elementStart(4,"cd-helper"),e.\u0275\u0275i18n(5,33),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(6,"div",52)(7,"label",79),e.\u0275\u0275i18n(8,34),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(9,"div",54),e.\u0275\u0275element(10,"input",80),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(11,"div",52)(12,"label",81),e.\u0275\u0275i18n(13,35),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(14,"div",54),e.\u0275\u0275element(15,"input",82),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(16,"div",52)(17,"label",83),e.\u0275\u0275i18n(18,36),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(19,"div",54),e.\u0275\u0275element(20,"input",84),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementContainerEnd())}function XT(i,n){1&i&&(e.\u0275\u0275elementStart(0,"span",85),e.\u0275\u0275i18n(1,37),e.\u0275\u0275elementEnd())}function kT(i,n){if(1&i){const t=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"div")(1,"form",46,0)(3,"div",47)(4,"div",48),e.\u0275\u0275i18n(5,2),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(6,"div",49)(7,"p"),e.\u0275\u0275i18nStart(8,3),e.\u0275\u0275element(9,"br")(10,"a",50)(11,"br")(12,"br")(13,"b"),e.\u0275\u0275i18nEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275template(14,BT,10,0,"div",51),e.\u0275\u0275elementStart(15,"legend"),e.\u0275\u0275i18n(16,4),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(17,"p"),e.\u0275\u0275i18n(18,5),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(19,"div",52)(20,"label",53),e.\u0275\u0275elementContainerStart(21),e.\u0275\u0275i18n(22,6),e.\u0275\u0275elementContainerEnd(),e.\u0275\u0275elementStart(23,"cd-helper"),e.\u0275\u0275elementContainerStart(24),e.\u0275\u0275i18n(25,7),e.\u0275\u0275elementContainerEnd(),e.\u0275\u0275elementStart(26,"ul")(27,"li"),e.\u0275\u0275i18n(28,8),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(29,"li"),e.\u0275\u0275i18n(30,9),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(31,"li"),e.\u0275\u0275i18n(32,10),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(33,"li"),e.\u0275\u0275i18n(34,11),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(35,"li"),e.\u0275\u0275i18n(36,12),e.\u0275\u0275elementEnd()()()(),e.\u0275\u0275elementStart(37,"div",54)(38,"div",55),e.\u0275\u0275element(39,"input",56)(40,"label",57),e.\u0275\u0275elementEnd()()(),e.\u0275\u0275elementStart(41,"div",52)(42,"label",58),e.\u0275\u0275elementContainerStart(43),e.\u0275\u0275i18n(44,13),e.\u0275\u0275elementContainerEnd(),e.\u0275\u0275elementStart(45,"cd-helper"),e.\u0275\u0275elementContainerStart(46),e.\u0275\u0275i18n(47,14),e.\u0275\u0275elementContainerEnd(),e.\u0275\u0275elementStart(48,"ul")(49,"li"),e.\u0275\u0275i18n(50,15),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(51,"li"),e.\u0275\u0275i18n(52,16),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(53,"li"),e.\u0275\u0275i18n(54,17),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(55,"li"),e.\u0275\u0275i18n(56,18),e.\u0275\u0275elementEnd()()()(),e.\u0275\u0275elementStart(57,"div",54)(58,"div",55),e.\u0275\u0275element(59,"input",59)(60,"label",60),e.\u0275\u0275elementEnd()()(),e.\u0275\u0275elementStart(61,"div",52)(62,"label",61),e.\u0275\u0275elementContainerStart(63),e.\u0275\u0275i18n(64,19),e.\u0275\u0275elementContainerEnd(),e.\u0275\u0275element(65,"cd-helper",62),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(66,"div",54)(67,"div",55),e.\u0275\u0275element(68,"input",63)(69,"label",64),e.\u0275\u0275elementEnd()()(),e.\u0275\u0275elementStart(70,"div",52)(71,"label",65),e.\u0275\u0275elementContainerStart(72),e.\u0275\u0275i18n(73,20),e.\u0275\u0275elementContainerEnd(),e.\u0275\u0275elementStart(74,"cd-helper"),e.\u0275\u0275elementContainerStart(75),e.\u0275\u0275i18n(76,21),e.\u0275\u0275elementContainerEnd(),e.\u0275\u0275elementStart(77,"ul")(78,"li"),e.\u0275\u0275text(79,"Cluster description"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(80,"li"),e.\u0275\u0275text(81,"Contact email address"),e.\u0275\u0275elementEnd()()()(),e.\u0275\u0275elementStart(82,"div",54)(83,"div",55)(84,"input",66),e.\u0275\u0275listener("click",function(){e.\u0275\u0275restoreView(t);const s=e.\u0275\u0275nextContext(2);return e.\u0275\u0275resetView(s.toggleIdent())}),e.\u0275\u0275elementEnd(),e.\u0275\u0275element(85,"label",67),e.\u0275\u0275elementEnd()()(),e.\u0275\u0275elementStart(86,"div",52)(87,"label",68),e.\u0275\u0275elementContainerStart(88),e.\u0275\u0275i18n(89,22),e.\u0275\u0275elementContainerEnd(),e.\u0275\u0275elementStart(90,"cd-helper"),e.\u0275\u0275elementContainerStart(91),e.\u0275\u0275i18n(92,23),e.\u0275\u0275elementContainerEnd(),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(93,"div",54)(94,"div",55),e.\u0275\u0275element(95,"input",69)(96,"label",70),e.\u0275\u0275elementEnd()()(),e.\u0275\u0275template(97,zT,21,0,"ng-container",51),e.\u0275\u0275elementStart(98,"legend"),e.\u0275\u0275i18n(99,24),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(100,"div",52)(101,"label",71),e.\u0275\u0275elementContainerStart(102),e.\u0275\u0275i18n(103,25),e.\u0275\u0275elementContainerEnd(),e.\u0275\u0275elementStart(104,"cd-helper"),e.\u0275\u0275i18n(105,26),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(106,"div",54),e.\u0275\u0275element(107,"input",72),e.\u0275\u0275template(108,XT,2,0,"span",73),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(109,"div",52)(110,"label",74),e.\u0275\u0275elementContainerStart(111),e.\u0275\u0275i18n(112,27),e.\u0275\u0275elementContainerEnd(),e.\u0275\u0275elementStart(113,"cd-helper")(114,"p"),e.\u0275\u0275i18n(115,28),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(116,"p"),e.\u0275\u0275i18n(117,29),e.\u0275\u0275elementEnd()()(),e.\u0275\u0275elementStart(118,"div",54),e.\u0275\u0275element(119,"input",75),e.\u0275\u0275elementEnd()(),e.\u0275\u0275element(120,"br"),e.\u0275\u0275elementStart(121,"p"),e.\u0275\u0275i18nStart(122,30),e.\u0275\u0275element(123,"b"),e.\u0275\u0275i18nEnd(),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(124,"div",76)(125,"div",77)(126,"button",78),e.\u0275\u0275listener("click",function(){e.\u0275\u0275restoreView(t);const s=e.\u0275\u0275nextContext(2);return e.\u0275\u0275resetView(s.next())}),e.\u0275\u0275elementContainerStart(127),e.\u0275\u0275text(128),e.\u0275\u0275elementContainerEnd(),e.\u0275\u0275elementEnd()()()()()()}if(2&i){const t=e.\u0275\u0275reference(2),o=e.\u0275\u0275nextContext(2);e.\u0275\u0275advance(),e.\u0275\u0275property("formGroup",o.configForm),e.\u0275\u0275advance(4),e.\u0275\u0275i18nExp(o.step),e.\u0275\u0275i18nApply(5),e.\u0275\u0275advance(8),e.\u0275\u0275i18nExp(o.sendToUrl)(o.sendToDeviceUrl),e.\u0275\u0275i18nApply(8),e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf",o.moduleEnabled),e.\u0275\u0275advance(83),e.\u0275\u0275property("ngIf",o.showContactInfo),e.\u0275\u0275advance(11),e.\u0275\u0275property("ngIf",o.configForm.showError("interval",t,"min")),e.\u0275\u0275advance(20),e.\u0275\u0275textInterpolate(o.actionLabels.NEXT)}}function jT(i,n){if(1&i){const t=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"div")(1,"form",86,1)(3,"div",47)(4,"div",48),e.\u0275\u0275i18n(5,38),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(6,"div",49)(7,"div",52)(8,"label",87),e.\u0275\u0275i18nStart(9,39),e.\u0275\u0275element(10,"cd-helper",88),e.\u0275\u0275i18nEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(11,"div",54),e.\u0275\u0275element(12,"input",89),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(13,"div",52)(14,"label",90),e.\u0275\u0275i18nStart(15,40),e.\u0275\u0275elementStart(16,"cd-helper",91),e.\u0275\u0275element(17,"em"),e.\u0275\u0275elementEnd(),e.\u0275\u0275i18nEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(18,"div",54),e.\u0275\u0275element(19,"textarea",92),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(20,"div",52)(21,"div",93)(22,"div",94),e.\u0275\u0275element(23,"cd-download-button",95)(24,"cd-copy-2-clipboard-button",96),e.\u0275\u0275elementEnd()()(),e.\u0275\u0275elementStart(25,"div",52)(26,"div",93)(27,"div",55),e.\u0275\u0275element(28,"input",97),e.\u0275\u0275elementStart(29,"label",98),e.\u0275\u0275i18nStart(30,41),e.\u0275\u0275element(31,"a",99),e.\u0275\u0275i18nEnd(),e.\u0275\u0275elementEnd()()()()(),e.\u0275\u0275elementStart(32,"div",76)(33,"div",77)(34,"cd-form-button-panel",100),e.\u0275\u0275listener("submitActionEvent",function(){e.\u0275\u0275restoreView(t);const s=e.\u0275\u0275nextContext(2);return e.\u0275\u0275resetView(s.onSubmit())})("backActionEvent",function(){e.\u0275\u0275restoreView(t);const s=e.\u0275\u0275nextContext(2);return e.\u0275\u0275resetView(s.back())}),e.\u0275\u0275elementEnd()()()()()()}if(2&i){const t=e.\u0275\u0275nextContext(2);e.\u0275\u0275advance(),e.\u0275\u0275property("formGroup",t.previewForm),e.\u0275\u0275advance(4),e.\u0275\u0275i18nExp(t.step),e.\u0275\u0275i18nApply(5),e.\u0275\u0275advance(18),e.\u0275\u0275property("objectItem",t.report),e.\u0275\u0275advance(11),e.\u0275\u0275property("form",t.previewForm)("submitText",t.actionLabels.UPDATE)("cancelText",t.actionLabels.BACK)}}function WT(i,n){if(1&i&&(e.\u0275\u0275elementStart(0,"div",43),e.\u0275\u0275elementContainerStart(1,44),e.\u0275\u0275template(2,kT,129,8,"div",45)(3,jT,35,6,"div",45),e.\u0275\u0275elementContainerEnd(),e.\u0275\u0275elementEnd()),2&i){const t=e.\u0275\u0275nextContext();e.\u0275\u0275advance(),e.\u0275\u0275property("ngSwitch",t.step),e.\u0275\u0275advance(),e.\u0275\u0275property("ngSwitchCase",1),e.\u0275\u0275advance(),e.\u0275\u0275property("ngSwitchCase",2)}}class Ds extends Ce.g{constructor(n,t,o,s,d,h,I){super(),this.actionLabels=n,this.formBuilder=t,this.mgrModuleService=o,this.notificationService=s,this.router=d,this.telemetryService=h,this.telemetryNotificationService=I,this.licenseAgrmt=!1,this.options={},this.newConfig={},this.configResp={},this.requiredFields=["channel_basic","channel_crash","channel_device","channel_ident","channel_perf","interval","proxy","contact","description","organization"],this.contactInfofields=["contact","description","organization"],this.report=void 0,this.reportId=void 0,this.sendToUrl="",this.sendToDeviceUrl="",this.step=1}ngOnInit(){const n=[this.mgrModuleService.getOptions("telemetry"),this.mgrModuleService.getConfig("telemetry")];(0,K.forkJoin)(n).subscribe(t=>{const o=t[1];this.moduleEnabled=o.enabled,this.sendToUrl=o.url,this.sendToDeviceUrl=o.device_url,this.showContactInfo=o.channel_ident,this.options=p().pick(t[0],this.requiredFields),this.configResp=p().pick(o,this.requiredFields),this.createConfigForm(),this.configForm.setValue(this.configResp),this.loadingReady()},t=>{this.loadingError()})}createConfigForm(){const n={};p().forEach(Object.values(this.options),t=>{n[t.name]=[t.default_value,this.getValidators(t)]}),this.configForm=this.formBuilder.group(n)}replacer(n,t){if(("ranges"===n||"values"===n)&&Array.isArray(t)){const o=[];for(let s=0;s<t.length;s++)o.push(JSON.stringify(t[s]));return o}return t}replacerTest(n){return JSON.stringify(n,this.replacer,2)}formatReport(){let n={};n=JSON.parse(JSON.stringify(this.report));const t=["perf_counters","stats_per_pool","stats_per_pg","io_rate","osd_perf_histograms","mempool","heap_stats","rocksdb_stats"];for(let o=0;o<t.length;o++){const s=t[o];s in n.report&&delete n.report[s]}return JSON.stringify(n,null,2)}formatReportTest(n){let t={};t=JSON.parse(JSON.stringify(n));const o=["perf_counters","stats_per_pool","stats_per_pg","io_rate","osd_perf_histograms","mempool","heap_stats","rocksdb_stats"];for(let s=0;s<o.length;s++){const d=o[s];d in t&&delete t[d]}return JSON.stringify(t,null,2)}createPreviewForm(){const n={report:this.formatReport(),reportId:this.reportId,licenseAgrmt:[this.licenseAgrmt,C.Validators.requiredTrue]};this.previewForm=this.formBuilder.group(n)}getValidators(n){const t=[];switch(n.type){case"int":t.push(C.Validators.required);break;case"str":p().isNumber(n.min)&&t.push(C.Validators.minLength(n.min)),p().isNumber(n.max)&&t.push(C.Validators.maxLength(n.max))}return t}updateReportFromConfig(n={}){const t=this.report.report.channels_available,o=[];for(const s of t){n[`channel_${s}`]&&o.push(s)}this.report.report.channels=o;for(const s of this.contactInfofields)this.report.report[s]=n[s]}getReport(){this.loadingStart(),this.telemetryService.getReport().subscribe(n=>{this.report=n,this.reportId=n.report.report_id,this.updateReportFromConfig(this.newConfig),this.createPreviewForm(),this.loadingReady(),this.step++},n=>{this.loadingError()})}toggleIdent(){this.showContactInfo=!this.showContactInfo}buildReport(){this.newConfig={};for(const n of Object.values(this.options)){const t=this.configForm.get(n.name);if(!t.valid)return void this.configForm.setErrors({cdSubmitButton:!0});this.newConfig[n.name]=t.value}if(!this.newConfig.channel_ident)for(const n of this.contactInfofields)this.newConfig[n]="";this.getReport()}disableModule(n=null,t=null){this.telemetryService.enable(!1).subscribe(()=>{this.telemetryNotificationService.setVisibility(!0),n&&this.notificationService.show(Ae._.success,n),t?t():this.router.navigate([""])})}next(){this.buildReport()}back(){this.step--}getChangedConfig(){const n={};return p().forEach(this.requiredFields,t=>{p().isEqual(this.configResp[t],this.newConfig[t])||(n[t]=this.newConfig[t])}),n}onSubmit(){const n=this.getChangedConfig(),t=[this.telemetryService.enable(),this.mgrModuleService.updateConfig("telemetry",n)];(0,K.forkJoin)(t).subscribe(()=>{this.telemetryNotificationService.setVisibility(!1),this.notificationService.show(Ae._.success,$localize`The Telemetry module has been configured and activated successfully.`)},()=>{this.telemetryNotificationService.setVisibility(!1),this.notificationService.show(Ae._.error,$localize`An Error occurred while updating the Telemetry module configuration.\
             Please Try again`),this.previewForm.setErrors({cdSubmitButton:!0})},()=>{this.newConfig={},this.router.navigate([""])})}static{this.\u0275fac=function(t){return new(t||Ds)(e.\u0275\u0275directiveInject(m.Ss),e.\u0275\u0275directiveInject(Dt.$),e.\u0275\u0275directiveInject(Ln.a),e.\u0275\u0275directiveInject(Q.J),e.\u0275\u0275directiveInject(u.Router),e.\u0275\u0275directiveInject(Fi),e.\u0275\u0275directiveInject(mo))}}static{this.\u0275cmp=e.\u0275\u0275defineComponent({type:Ds,selectors:[["cd-telemetry"]],features:[e.\u0275\u0275InheritDefinitionFeature],decls:1,vars:1,consts:()=>{let n,t,o,s,d,h,I,$,w,X,J,re,de,Me,ve,Se,$e,Te,ke,rt,mt,xe,Je,vt,Mt,Ye,yt,Ze,sn,rn,ln,Bt,_n,cn,Ke,Un,wn,Gn,Hn,Vn,bn,Bn,zn,Xn,kn;return n=$localize`:␟d4bc37bcbbcea881a269b4063b3d93dec8ee67d5␟6793153369279741287:Includes information about device metrics like anonymized SMART metrics.`,t=$localize`:␟013f48ee777d2e53e2bcba36e1a99fcbb7ef8cb6␟2328356528618262112:Step ${"\ufffd0\ufffd"}:INTERPOLATION: of 2: Telemetry report configuration`,o=$localize`:␟a09b723a928774bff707973c99999dcf3d84a349␟233862545252579563:The telemetry module sends anonymous data about this Ceph cluster back to the Ceph developers to help understand how Ceph is used and what problems users may be experiencing.${"[\ufffd#9\ufffd\ufffd/#9\ufffd|\ufffd#11\ufffd\ufffd/#11\ufffd|\ufffd#12\ufffd\ufffd/#12\ufffd]"}:LINE_BREAK: This data is visualized on ${"\ufffd#10\ufffd"}:START_LINK:public dashboards${"\ufffd/#10\ufffd"}:CLOSE_LINK: that allow the community to quickly see summary statistics on how many clusters are reporting, their total capacity and OSD count, and version distribution trends.${"[\ufffd#9\ufffd\ufffd/#9\ufffd|\ufffd#11\ufffd\ufffd/#11\ufffd|\ufffd#12\ufffd\ufffd/#12\ufffd]"}:LINE_BREAK:${"[\ufffd#9\ufffd\ufffd/#9\ufffd|\ufffd#11\ufffd\ufffd/#11\ufffd|\ufffd#12\ufffd\ufffd/#12\ufffd]"}:LINE_BREAK: The data being reported does ${"\ufffd#13\ufffd"}:START_BOLD_TEXT:not${"\ufffd/#13\ufffd"}:CLOSE_BOLD_TEXT: contain any sensitive data like pool names, object names, object contents, hostnames, or device serial numbers. It contains counters and statistics on how the cluster has been deployed, the version of Ceph, the distribution of the hosts and other parameters which help the project to gain a better understanding of the way Ceph is used. The data is sent secured to ${"\ufffd0\ufffd"}:INTERPOLATION: and ${"\ufffd1\ufffd"}:INTERPOLATION_1: (device report).`,o=e.\u0275\u0275i18nPostprocess(o),s=$localize`:␟807cf11e6ac1cde912496f764c176bdfdd6b7e19␟8181077408762380407:Channels`,d=$localize`:␟e25b17c0b4ef361b6a05aaec2bbd2b7e86680458␟2095911212141385872:The telemetry report is broken down into several "channels", each with a different type of information that can be configured below.`,h=$localize`:␟380ab580741bec31346978e7cab8062d6970408d␟8643289769990675407:Basic`,I=$localize`:␟dd898057f0add35258a5fb5c90d792c5e2147452␟2461334957566205099:Includes basic information about the cluster:`,$=$localize`:␟da213e9ba8a86b453d04f794f58c9803f7b062b1␟1264253237213565088:Capacity of the cluster`,w=$localize`:␟72d5fe31d9e13239bdd223d0bbd289a1b1903e86␟4640478341399959545:Number of monitors, managers, OSDs, MDSs, object gateways, or other daemons`,X=$localize`:␟1a3eb7834b4baf412f8863d14883972897d9acb7␟2379293336766790608:Software version currently being used`,J=$localize`:␟34881ae65482ffa74ccb4043fb2622e48ed146d5␟8373569334930627819:Number and types of RADOS pools and CephFS file systems`,re=$localize`:␟696f8f5ea7a9cf6125b9a3af160981fda363552d␟7599661511944029087:Names of configuration options that have been changed from their default (but not their values)`,de=$localize`:␟34292940316300d09abe5e675d452fae199f626b␟2270204257025474297:Crash`,Me=$localize`:␟7620e332b7dea1e832158e85847255eb4d9e6bbc␟2827413062128067838:Includes information about daemon crashes:`,ve=$localize`:␟c1aa4306a6e840fe35b70c9b07d38ce85f281cfa␟1395984943987054584:Type of daemon`,Se=$localize`:␟f4f2cbedb4b14b68bc9f390e3391445c1b6682da␟2602501653412734093:Version of the daemon`,$e=$localize`:␟2d62603cdc75645ea873fc8f7f69c32b5f4a2aa9␟6844490652554412096:Operating system (OS distribution, kernel version)`,Te=$localize`:␟84facf84a73631d66e9a4e0bc1c40097b9d14742␟8860979684593515849:Stack trace identifying where in the Ceph code the crash occurred`,ke=$localize`:␟ea64d4177bd648e1a20c92669e6857762b811d8c␟7292902857194439444:Device`,rt=$localize`:␟37de70e8ba539187d0171a38dad2a63c323096eb␟318013158029874600:Ident`,mt=$localize`:␟7b126025440f118cd02ce78362d61a5001c27617␟1178238425295883028:Includes user-provided identifying information about the cluster:`,xe=$localize`:␟80db09210a3fc15db703eca80b778e3584e8a388␟3927132423423535672:Perf`,Je=$localize`:␟af795a33889f2404ed9d87e52e7e4a034ba1110d␟5859285416449471463:Includes various performance metrics of a cluster.`,vt=$localize`:␟339878da255ab55447c43afef8d9b2f9753bf5f6␟8360107325291301836:Advanced Settings`,Mt=$localize`:␟7d49310535abb3792d8c9c991dd0d990d73d29af␟3350676806684249188:Interval`,Ye=$localize`:␟91317562c9dfefbdd5973faf11d217f571d073c7␟5162976593582389281:The module compiles and sends a new report every 24 hours by default. You can adjust this interval by setting a different number of hours.`,yt=$localize`:␟a92e437fac14b4010c4515b31c55a311d026a57f␟3719584865242260706:Proxy`,Ze=$localize`:␟6de03357358c7eff62aca486508bb5c2046e0669␟8035895215155992042:If the cluster cannot directly connect to the configured telemetry endpoint (default telemetry.ceph.com), you can configure a HTTP/HTTPS proxy server by e.g. adding https://10.0.0.1:8080`,sn=$localize`:␟5687a733af051bfca97dbffba282e39fbb9b8c8f␟8996428303774913048:You can also include a user:pass if needed e.g. https://ceph:telemetry@10.0.0.1:8080`,rn=$localize`:␟4e6430c68df43ea65e4145972b01186fba40f26a␟1547062305025079259:${"\ufffd#123\ufffd"}:START_BOLD_TEXT:Note:${"\ufffd/#123\ufffd"}:CLOSE_BOLD_TEXT: By clicking 'Next' you will first see a preview of the report content before you can activate the automatic submission of your data.`,ln=$localize`:␟c95505b5a74151a0c235b19b9c41db7983205ba7␟5322473252816589112:Deactivate`,Bt=$localize`:␟632cac1e025b77b2d77fed16ad22a410ddacab9e␟4835857533517480308:My first Ceph cluster`,_n=$localize`:␟e8fda44e2c5bb51860f26cd9c2730f9ae1db9869␟5243233792859835904:Organization name`,cn=$localize`:␟62c6e9aecff7e04ef7d36fdee4ab4fb285a7a2b5␟4090160044021470261:Contact Information`,Ke=$localize`:␟61ba9a84051b3f470122e59cf5a746552b378269␟4455236519027994893:Submitting any contact information is completely optional and disabled by default.`,Un=$localize`:␟34746fb1c7f3d2194d99652bdff89e6e14c9c4f4␟7922989125096435449:Contact`,wn=$localize`:␟eec715de352a6b114713b30b640d319fa78207a0␟4902817035128594900:Description`,Gn=$localize`:␟f3a58c8a81b9ffda26a154eae25a422c9f7de37b␟3076687427621376223:Organization`,Hn=$localize`:␟a12cf4cf71ef3161a024382ab542cf0eba094504␟8651761196575627468:The entered value is too low! It must be greater or equal to 8.`,Vn=$localize`:␟4060e92658964e356a0992a900c8aa811c2cfec0␟7563744243826344144:A randomized UUID to identify a particular cluster over the course of several telemetry reports.`,bn=$localize`:␟3de417f739c336284c42904552e81e8d852daecc␟5142467587507961588:The actual telemetry data that will be submitted.`,Bn=$localize`:␟8d8d878f8d60905e1306c225716305a331b784c8␟2030655936054404301:Step ${"\ufffd0\ufffd"}:INTERPOLATION: of 2: Telemetry report preview`,zn=$localize`:␟e23d0064b6474f309c74e1c928cc0920f479d9a5␟3255415445858439645:Report ID ${"\ufffd#10\ufffd"}:START_TAG_CD_HELPER:${"\ufffd/#10\ufffd"}:CLOSE_TAG_CD_HELPER:`,Xn=$localize`:␟56b6318f2651cafe065d000db84917f7f915baf0␟5613894435191026408:Report preview ${"\ufffd#16\ufffd"}:START_TAG_CD_HELPER:${"\ufffd#17\ufffd"}:START_EMPHASISED_TEXT:Note: Please select 'Download' to view the full report, including metrics from the perf channel.${"\ufffd/#17\ufffd"}:CLOSE_EMPHASISED_TEXT:${"\ufffd/#16\ufffd"}:CLOSE_TAG_CD_HELPER:`,kn=$localize`:␟933a2b6f087670ff42c95876e6ecfb2faa3e3867␟8421869848223160586:I agree to my telemetry data being submitted under the ${"\ufffd#31\ufffd"}:START_LINK:Community Data License Agreement - Sharing - Version 1.0${"\ufffd/#31\ufffd"}:CLOSE_LINK:`,[["formDir","ngForm"],["frm","ngForm"],t,o,s,d,h,I,$,w,X,J,re,de,Me,ve,Se,$e,Te,ke,rt,mt,xe,Je,vt,Mt,Ye,yt,Ze,sn,rn,ln,cn,Ke,Un,wn,Gn,Hn,Bn,zn,Xn,kn,["class","cd-col-form",4,"cdFormLoading"],[1,"cd-col-form"],[3,"ngSwitch"],[4,"ngSwitchCase"],["name","form","novalidate","",3,"formGroup"],[1,"card"],[1,"card-header"],[1,"card-body"],["href","https://telemetry-public.ceph.com/"],[4,"ngIf"],[1,"form-group","row"],["for","channel_basic",1,"cd-col-form-label"],[1,"cd-col-form-input"],[1,"custom-control","custom-checkbox"],["type","checkbox","id","channel_basic","formControlName","channel_basic",1,"custom-control-input"],["for","channel_basic",1,"custom-control-label"],["for","channel_crash",1,"cd-col-form-label"],["type","checkbox","id","channel_crash","formControlName","channel_crash",1,"custom-control-input"],["for","channel_crash",1,"custom-control-label"],["for","channel_device",1,"cd-col-form-label"],["html",n],["type","checkbox","id","channel_device","formControlName","channel_device",1,"custom-control-input"],["for","channel_device",1,"custom-control-label"],["for","channel_ident",1,"cd-col-form-label"],["type","checkbox","id","channel_ident","formControlName","channel_ident",1,"custom-control-input",3,"click"],["for","channel_ident",1,"custom-control-label"],["for","channel_perf",1,"cd-col-form-label"],["type","checkbox","id","channel_perf","formControlName","channel_perf",1,"custom-control-input"],["for","channel_perf",1,"custom-control-label"],["for","interval",1,"cd-col-form-label"],["id","interval","type","number","formControlName","interval","min","8",1,"form-control"],["class","invalid-feedback",4,"ngIf"],["for","proxy",1,"cd-col-form-label"],["id","proxy","type","text","formControlName","proxy","placeholder","https://10.0.0.1:8080",1,"form-control"],[1,"card-footer"],[1,"button-group","text-right"],["type","button",1,"btn","btn-light",3,"click"],["for","contact",1,"cd-col-form-label"],["id","contact","type","text","formControlName","contact","placeholder","Example User <user@example.com>",1,"form-control"],["for","description",1,"cd-col-form-label"],["id","description","type","text","formControlName","description","placeholder",Bt,1,"form-control"],["for","organization",1,"cd-col-form-label"],["id","organization","type","text","formControlName","organization","placeholder",_n,1,"form-control"],[1,"invalid-feedback"],["name","previewForm","novalidate","",3,"formGroup"],["for","reportId",1,"cd-col-form-label"],["html",Vn],["type","text","id","reportId","formControlName","reportId","readonly","",1,"form-control"],["for","report",1,"cd-col-form-label"],["html",bn],["id","report","formControlName","report","rows","15","readonly","",1,"form-control"],[1,"cd-col-form-offset"],["role","group",1,"btn-group"],["fileName","telemetry_report",3,"objectItem"],["source","report"],["type","checkbox","id","licenseAgrmt","name","licenseAgrmt","formControlName","licenseAgrmt",1,"custom-control-input"],["for","licenseAgrmt",1,"custom-control-label"],["href","https://cdla.io/sharing-1-0/"],[3,"submitActionEvent","backActionEvent","form","submitText","cancelText"]]},template:function(t,o){1&t&&e.\u0275\u0275template(0,WT,4,3,"div",42),2&t&&e.\u0275\u0275property("cdFormLoading",o.loading)},dependencies:[l.NgIf,l.NgSwitch,l.NgSwitchCase,y.m,fe.N,gi,oe.e,tt.G,Ge.S,we.a,Ve.C,ze.E,C.\u0275NgNoValidate,C.DefaultValueAccessor,C.NumberValueAccessor,C.CheckboxControlValueAccessor,C.NgControlStatus,C.NgControlStatusGroup,C.MinValidator,C.FormGroupDirective,C.FormControlName]})}}var vi=r(40988),Mi=r(61065);function KT(i,n){if(1&i&&(e.\u0275\u0275elementStart(0,"option",7),e.\u0275\u0275text(1),e.\u0275\u0275elementEnd()),2&i){const t=n.$implicit,o=e.\u0275\u0275nextContext();e.\u0275\u0275property("value",o.intervalList[t]),e.\u0275\u0275advance(),e.\u0275\u0275textInterpolate(t)}}class ys{constructor(n){this.refreshIntervalService=n,this.intervalList={"5 s":5e3,"10 s":1e4,"15 s":15e3,"30 s":3e4,"1 min":6e4,"3 min":18e4,"5 min":3e5},this.intervalKeys=Object.keys(this.intervalList)}ngOnInit(){this.selectedInterval=this.refreshIntervalService.getRefreshInterval()||5e3}changeRefreshInterval(n){this.refreshIntervalService.setRefreshInterval(n)}static{this.\u0275fac=function(t){return new(t||ys)(e.\u0275\u0275directiveInject(Mi.s))}}static{this.\u0275cmp=e.\u0275\u0275defineComponent({type:ys,selectors:[["cd-refresh-selector"]],decls:8,vars:2,consts:()=>{let n;return n=$localize`:␟c8d1785038d461ec66b5799db21864182b35900a␟1102717806459547726:Refresh`,[n,[1,"container-fluid"],[1,"row"],[1,"col-sm-1","d-flex","float-end"],["for","refreshInterval",1,"col-form-label","my-0","mx-2","float-end"],["id","refreshInterval","name","refreshInterval",1,"form-select","float-end",3,"change","ngModelChange","ngModel"],[3,"value",4,"ngFor","ngForOf"],[3,"value"]]},template:function(t,o){1&t&&(e.\u0275\u0275elementStart(0,"div",1)(1,"div",2)(2,"form")(3,"div",3)(4,"label",4),e.\u0275\u0275i18n(5,0),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(6,"select",5),e.\u0275\u0275listener("change",function(d){return o.changeRefreshInterval(d.target.value)}),e.\u0275\u0275twoWayListener("ngModelChange",function(d){return e.\u0275\u0275twoWayBindingSet(o.selectedInterval,d)||(o.selectedInterval=d),d}),e.\u0275\u0275template(7,KT,2,2,"option",6),e.\u0275\u0275elementEnd()()()()()),2&t&&(e.\u0275\u0275advance(6),e.\u0275\u0275twoWayProperty("ngModel",o.selectedInterval),e.\u0275\u0275advance(),e.\u0275\u0275property("ngForOf",o.intervalKeys))},dependencies:[l.NgForOf,C.\u0275NgNoValidate,C.NgSelectOption,C.\u0275NgSelectMultipleOption,C.SelectControlValueAccessor,C.NgControlStatus,C.NgControlStatusGroup,C.NgModel,C.NgForm,Ge.S,D.Option]})}}var Uo,wt=r(67344),on=r(63882),QT=r(62739);class Ri{constructor(n){this.http=n,this.baseURL="api/hardware"}getSummary(n=[]){return this.http.get(`${this.baseURL}/summary`,{params:{categories:n},headers:{Accept:"application/vnd.ceph.api.v0.1+json"}})}static{this.\u0275fac=function(t){return new(t||Ri)(e.\u0275\u0275inject(T.HttpClient))}}static{this.\u0275prov=e.\u0275\u0275defineInjectable({token:Ri,factory:Ri.\u0275fac,providedIn:"root"})}}!function(i){i.HEALTH_ERR="health-color-error",i.HEALTH_WARN="health-color-warning",i.HEALTH_OK="health-color-healthy"}(Uo||(Uo={}));var fo=r(35855);class Eo{constructor(n){this.cssHelper=n}transform(n){return Object.keys(Uo).includes(n)?{color:this.cssHelper.propertyValue(Uo[n])}:null}static{this.\u0275fac=function(t){return new(t||Eo)(e.\u0275\u0275directiveInject(fo._,16))}}static{this.\u0275pipe=e.\u0275\u0275definePipe({name:"healthColor",type:Eo,pure:!0})}}const YT=i=>[i];function JT(i,n){1&i&&e.\u0275\u0275elementContainer(0)}function ZT(i,n){if(1&i&&(e.\u0275\u0275elementStart(0,"div"),e.\u0275\u0275text(1),e.\u0275\u0275elementEnd()),2&i){const t=n.$implicit,o=n.last;e.\u0275\u0275advance(),e.\u0275\u0275textInterpolate2(" ",t," ",o?"":", "," ")}}function qT(i,n){if(1&i&&(e.\u0275\u0275elementStart(0,"div",6)(1,"cd-help-text")(2,"b"),e.\u0275\u0275text(3,"Failed Daemons:"),e.\u0275\u0275elementEnd(),e.\u0275\u0275template(4,ZT,2,2,"div",3),e.\u0275\u0275elementEnd()()),2&i){const t=e.\u0275\u0275nextContext().$implicit,o=e.\u0275\u0275nextContext();e.\u0275\u0275advance(4),e.\u0275\u0275property("ngForOf",o.getFailedDaemons(t.detail))}}function e2(i,n){if(1&i&&(e.\u0275\u0275elementStart(0,"div")(1,"cd-help-text"),e.\u0275\u0275text(2),e.\u0275\u0275elementEnd()()),2&i){const t=n.$implicit;e.\u0275\u0275advance(2),e.\u0275\u0275textInterpolate(null==t?null:t.message)}}function t2(i,n){if(1&i&&(e.\u0275\u0275elementStart(0,"li")(1,"span",4),e.\u0275\u0275pipe(2,"healthColor"),e.\u0275\u0275text(3),e.\u0275\u0275elementEnd(),e.\u0275\u0275text(4),e.\u0275\u0275element(5,"br"),e.\u0275\u0275template(6,qT,5,1,"div",5)(7,e2,3,1,"div",3),e.\u0275\u0275elementEnd()),2&i){const t=n.$implicit;e.\u0275\u0275advance(),e.\u0275\u0275classProp("health-warn-description","HEALTH_WARN"===t.severity),e.\u0275\u0275property("ngStyle",e.\u0275\u0275pipeBind1(2,7,t.severity)),e.\u0275\u0275advance(2),e.\u0275\u0275textInterpolate1(" ",t.type,""),e.\u0275\u0275advance(),e.\u0275\u0275textInterpolate1(": ",t.summary.message," "),e.\u0275\u0275advance(2),e.\u0275\u0275property("ngIf","CEPHADM_FAILED_DAEMON"===t.type),e.\u0275\u0275advance(),e.\u0275\u0275property("ngForOf",null==t?null:t.detail)}}function n2(i,n){if(1&i&&(e.\u0275\u0275elementContainerStart(0),e.\u0275\u0275elementStart(1,"p",8),e.\u0275\u0275i18nStart(2,1),e.\u0275\u0275element(3,"i",9)(4,"a",10),e.\u0275\u0275i18nEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementContainerEnd()),2&i){const t=e.\u0275\u0275nextContext(2);e.\u0275\u0275advance(3),e.\u0275\u0275property("ngClass",e.\u0275\u0275pureFunction1(1,YT,t.icons.infoCircle))}}function o2(i,n){if(1&i&&e.\u0275\u0275template(0,n2,5,3,"ng-container",7),2&i){const t=e.\u0275\u0275nextContext();e.\u0275\u0275property("ngIf",t.permissions.log.read)}}class wo{constructor(n){this.authStorageService=n,this.icons=g.FI,this.permissions=this.authStorageService.getPermissions()}getFailedDaemons(n){return n.map(t=>t.message.split("daemon ")?.[1].split(" on ")[0])}static{this.\u0275fac=function(t){return new(t||wo)(e.\u0275\u0275directiveInject(c.v))}}static{this.\u0275cmp=e.\u0275\u0275defineComponent({type:wo,selectors:[["cd-health-checks"]],inputs:{healthData:"healthData"},decls:5,vars:2,consts:()=>{let n;return n=$localize`:␟44ecac93d67c6a671198091c2270354f80322327␟7900217280460384102:${"\ufffd#3\ufffd"}:START_ITALIC_TEXT:${"\ufffd/#3\ufffd"}:CLOSE_ITALIC_TEXT: See ${"\ufffd#4\ufffd"}:START_LINK:Logs${"\ufffd/#4\ufffd"}:CLOSE_LINK: for more details.`,[["logsLink",""],n,[4,"ngTemplateOutlet"],[4,"ngFor","ngForOf"],[3,"ngStyle"],["class","failed-daemons",4,"ngIf"],[1,"failed-daemons"],[4,"ngIf"],[1,"logs-link"],[3,"ngClass"],["routerLink","/logs"]]},template:function(t,o){if(1&t&&(e.\u0275\u0275template(0,JT,1,0,"ng-container",2),e.\u0275\u0275elementStart(1,"ul"),e.\u0275\u0275template(2,t2,8,9,"li",3),e.\u0275\u0275elementEnd(),e.\u0275\u0275template(3,o2,1,1,"ng-template",null,0,e.\u0275\u0275templateRefExtractor)),2&t){const s=e.\u0275\u0275reference(4);e.\u0275\u0275property("ngTemplateOutlet",s),e.\u0275\u0275advance(2),e.\u0275\u0275property("ngForOf",o.healthData)}},dependencies:[l.NgClass,l.NgForOf,l.NgIf,l.NgTemplateOutlet,l.NgStyle,it.O,Eo]})}}var ml=r(29947),i2=r(78845),a2=r(83133);const s2=["class","component"],r2=i=>({required:i});function l2(i,n){1&i&&(e.\u0275\u0275elementStart(0,"cd-alert-panel",20),e.\u0275\u0275i18n(1,2),e.\u0275\u0275elementEnd())}function _2(i,n){1&i&&(e.\u0275\u0275elementStart(0,"option",29),e.\u0275\u0275i18n(1,4),e.\u0275\u0275elementEnd())}function c2(i,n){1&i&&(e.\u0275\u0275elementStart(0,"option",30),e.\u0275\u0275i18n(1,5),e.\u0275\u0275elementEnd()),2&i&&e.\u0275\u0275property("ngValue",null)}function d2(i,n){1&i&&(e.\u0275\u0275elementStart(0,"option",30),e.\u0275\u0275i18n(1,6),e.\u0275\u0275elementEnd()),2&i&&e.\u0275\u0275property("ngValue",null)}function u2(i,n){if(1&i&&(e.\u0275\u0275elementStart(0,"option",31),e.\u0275\u0275text(1),e.\u0275\u0275elementEnd()),2&i){const t=n.$implicit;e.\u0275\u0275property("value",t),e.\u0275\u0275advance(),e.\u0275\u0275textInterpolate(t)}}function p2(i,n){1&i&&(e.\u0275\u0275elementStart(0,"span",32),e.\u0275\u0275i18n(1,7),e.\u0275\u0275elementEnd())}function m2(i,n){if(1&i&&(e.\u0275\u0275elementStart(0,"div",21)(1,"label",22),e.\u0275\u0275i18n(2,3),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(3,"div",23)(4,"select",24),e.\u0275\u0275template(5,_2,2,0,"option",25)(6,c2,2,1,"option",26)(7,d2,2,1,"option",26)(8,u2,2,2,"option",27),e.\u0275\u0275elementEnd(),e.\u0275\u0275template(9,p2,2,0,"span",28),e.\u0275\u0275elementEnd()()),2&i){const t=e.\u0275\u0275nextContext(),o=e.\u0275\u0275reference(7);e.\u0275\u0275advance(),e.\u0275\u0275property("ngClass",e.\u0275\u0275pureFunction1(6,r2,!t.showImageField)),e.\u0275\u0275advance(4),e.\u0275\u0275property("ngIf",null===t.versions),e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf",null!==t.versions&&0===t.versions.length),e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf",null!==t.versions&&t.versions.length>0),e.\u0275\u0275advance(),e.\u0275\u0275property("ngForOf",t.versions),e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf",t.upgradeForm.showError("availableVersions",o,"required"))}}function f2(i,n){if(1&i){const t=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"div",21)(1,"div",33)(2,"div",34)(3,"input",35),e.\u0275\u0275listener("click",function(){e.\u0275\u0275restoreView(t);const s=e.\u0275\u0275nextContext();return e.\u0275\u0275resetView(s.useImage())}),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(4,"label",36),e.\u0275\u0275i18n(5,8),e.\u0275\u0275elementEnd()()()()}}function E2(i,n){1&i&&(e.\u0275\u0275elementStart(0,"span",32),e.\u0275\u0275i18n(1,10),e.\u0275\u0275elementEnd())}function g2(i,n){if(1&i&&(e.\u0275\u0275elementStart(0,"div",21)(1,"label",37),e.\u0275\u0275i18n(2,9),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(3,"div",23),e.\u0275\u0275element(4,"input",38),e.\u0275\u0275template(5,E2,2,0,"span",28),e.\u0275\u0275elementEnd()()),2&i){const t=e.\u0275\u0275nextContext(),o=e.\u0275\u0275reference(7);e.\u0275\u0275advance(5),e.\u0275\u0275property("ngIf",t.upgradeForm.showError("customImageName",o,"required"))}}class Ls{constructor(n,t,o,s,d){this.actionLabels=n,this.authStorageService=t,this.activeModal=o,this.upgradeService=s,this.notificationService=d,this.icons=g.FI,this.showImageField=!1,this.permission=this.authStorageService.getPermissions().configOpt}ngOnInit(){if(this.upgradeForm=new Ue.$({availableVersions:new C.FormControl(null,[C.Validators.required]),useImage:new C.FormControl(!1),customImageName:new C.FormControl(null)}),void 0===this.versions){this.upgradeForm.get("availableVersions").clearValidators();const t=this.upgradeForm.get("customImageName");t.setValidators(C.Validators.required),t.updateValueAndValidity()}}startUpgrade(){const n=this.upgradeForm.getValue("availableVersions"),t=this.upgradeForm.getValue("customImageName");this.upgradeService.start(n,t).subscribe({next:()=>{this.notificationService.show(Ae._.success,$localize`Started upgrading the cluster`)},error:o=>{this.upgradeForm.setErrors({cdSubmitButton:!0}),this.notificationService.show(Ae._.error,$localize`Failed to start the upgrade`,o)},complete:()=>{this.activeModal.close()}})}useImage(){this.showImageField=!this.showImageField;const n=this.upgradeForm.get("availableVersions"),t=this.upgradeForm.get("customImageName");this.showImageField?(n.disable(),n.clearValidators(),t.setValidators(C.Validators.required),t.updateValueAndValidity()):(n.enable(),n.setValidators(C.Validators.required),n.updateValueAndValidity(),t.clearValidators())}static{this.\u0275fac=function(t){return new(t||Ls)(e.\u0275\u0275directiveInject(m.Ss),e.\u0275\u0275directiveInject(c.v),e.\u0275\u0275directiveInject(G.NgbActiveModal),e.\u0275\u0275directiveInject($n),e.\u0275\u0275directiveInject(Q.J))}}static{this.\u0275cmp=e.\u0275\u0275defineComponent({type:Ls,selectors:[["cd-upgrade-start-modal",8,"component"]],attrs:s2,decls:15,vars:8,consts:()=>{let n,t,o,s,d,h,I,$,w,X;return n=$localize`:␟c4cc929a04d4de2120fecc4ce1e9e25bcc1fa0b6␟9167888988735666462:Upgrade Cluster`,t=$localize`:␟de74da8be0a128f41fa14677f2743aa001858728␟5823760626052237620:Make sure to put the correct image. Passing an incorrect image can lead the cluster into an undesired state.`,o=$localize`:␟a8a224e3261e07898b41b8bd24b3fffe29cde0a9␟1947869876969745692:New Version`,s=$localize`:␟94516fa213706c67ce5a5b5765681d7fb032033a␟3894950702316166331:Loading...`,d=$localize`:␟d60ed43e0dfd611ccb8d778cebcc1d1b37b410a3␟3621788484170235878:-- No version available --`,h=$localize`:␟92273d1f212306c6d676815d973251648b33198f␟7315599446685328804:-- Select a version --`,I=$localize`:␟4aa19de2a2b54cbda39e9c62917b23044c087776␟751124305869330542:This field is required!`,$=$localize`:␟f1aa3724abb31ac9adc778e4808c0fd991a9a098␟982450577009850795:Use image`,w=$localize`:␟a5f9ba9bb9faa8284bcadb1cdbc6aaf969e9c4bb␟3012906865384504293:Image`,X=$localize`:␟4aa19de2a2b54cbda39e9c62917b23044c087776␟751124305869330542:This field is required!`,[["formDir","ngForm"],n,t,o,s,d,h,I,$,w,X,[3,"modalRef"],[1,"modal-title"],[1,"modal-content"],["name","upgradeForm","novalidate","",1,"form",3,"formGroup"],[1,"modal-body"],["type","warning","spacingClass","mb-3",4,"ngIf"],["class","form-group row",4,"ngIf"],[1,"modal-footer"],[3,"submitActionEvent","form","submitText"],["type","warning","spacingClass","mb-3"],[1,"form-group","row"],["for","availableVersions",1,"cd-col-form-label",3,"ngClass"],[1,"cd-col-form-input"],["id","availableVersions","name","availableVersions","formControlName","availableVersions",1,"form-select"],["ngValue","null",4,"ngIf"],[3,"ngValue",4,"ngIf"],[3,"value",4,"ngFor","ngForOf"],["class","invalid-feedback",4,"ngIf"],["ngValue","null"],[3,"ngValue"],[3,"value"],[1,"invalid-feedback"],[1,"cd-col-form-offset"],[1,"custom-control","custom-checkbox"],["type","checkbox","id","useImage","name","useImage","formControlName","useImage",1,"custom-control-input",3,"click"],["for","useImage",1,"custom-control-label"],["for","customImageName",1,"cd-col-form-label","required"],["type","text","id","customImageName","name","customImageName","formControlName","customImageName",1,"form-control"]]},template:function(t,o){if(1&t){const s=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"cd-modal",11),e.\u0275\u0275elementContainerStart(1,12)(2),e.\u0275\u0275i18n(3,1),e.\u0275\u0275elementContainerEnd(),e.\u0275\u0275text(4,"\xa0 "),e.\u0275\u0275elementContainerEnd(),e.\u0275\u0275elementContainerStart(5,13),e.\u0275\u0275elementStart(6,"form",14,0)(8,"div",15),e.\u0275\u0275template(9,l2,2,0,"cd-alert-panel",16)(10,m2,10,8,"div",17)(11,f2,6,0,"div",17)(12,g2,6,1,"div",17),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(13,"div",18)(14,"cd-form-button-panel",19),e.\u0275\u0275listener("submitActionEvent",function(){return e.\u0275\u0275restoreView(s),e.\u0275\u0275resetView(o.startUpgrade())}),e.\u0275\u0275elementEnd()()(),e.\u0275\u0275elementContainerEnd(),e.\u0275\u0275elementEnd()}2&t&&(e.\u0275\u0275property("modalRef",o.activeModal),e.\u0275\u0275advance(6),e.\u0275\u0275property("formGroup",o.upgradeForm),e.\u0275\u0275advance(3),e.\u0275\u0275property("ngIf",o.showImageField),e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf",o.versions),e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf",o.versions),e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf",o.showImageField||!o.versions),e.\u0275\u0275advance(2),e.\u0275\u0275property("form",o.upgradeForm)("submitText",o.actionLabels.START_UPGRADE))},dependencies:[l.NgClass,l.NgForOf,l.NgIf,Ut.z,nt.m,oe.e,Ge.S,we.a,Ve.C,ze.E,C.\u0275NgNoValidate,C.NgSelectOption,C.\u0275NgSelectMultipleOption,C.DefaultValueAccessor,C.CheckboxControlValueAccessor,C.SelectControlValueAccessor,C.NgControlStatus,C.NgControlStatusGroup,C.FormGroupDirective,C.FormControlName]})}}class $n extends a2.O{constructor(n,t,o){super(),this.http=n,this.summaryService=t,this.modalService=o,this.baseURL="api/cluster/upgrade",this.upgradableServiceTypes=["mgr","mon","crash","osd","mds","rgw","rbd-mirror","cephfs-mirror","iscsi","nfs"]}list(){return this.http.get(this.baseURL).pipe((0,v.map)(n=>this.versionAvailableForUpgrades(n)))}versionAvailableForUpgrades(n){let t="";this.summaryService.subscribe(s=>{t=s.version.replace("ceph version ","").split("-")[0]});const o=n.versions.filter(s=>{const d=t.split("."),h=s.split(".");return d[0]===h[0]&&(d[1]<h[1]||d[2]<h[2])});return n.versions=o.sort(),n}start(n,t){return this.http.post(`${this.baseURL}/start`,{image:t,version:n})}pause(){return this.http.put(`${this.baseURL}/pause`,null)}resume(){return this.http.put(`${this.baseURL}/resume`,null)}stop(){return this.http.put(`${this.baseURL}/stop`,null)}status(){return this.http.get(`${this.baseURL}/status`)}listCached(){return this._listData$||(this._listData$=this.list().pipe((0,v.tap)(n=>this._upgradableVersions=n.versions),(0,v.shareReplay)(1))),this._listData$}startUpgradeModal(){return this.modalService.show(Ls,{versions:this._upgradableVersions})}static{this.\u0275fac=function(t){return new(t||$n)(e.\u0275\u0275inject(T.HttpClient),e.\u0275\u0275inject(on.E),e.\u0275\u0275inject(Yt.B))}}static{this.\u0275prov=e.\u0275\u0275defineInjectable({token:$n,factory:$n.\u0275fac,providedIn:"root"})}}const S2=(i,n)=>[i,n];function h2(i,n){1&i&&(e.\u0275\u0275elementStart(0,"h5"),e.\u0275\u0275i18n(1,2),e.\u0275\u0275elementEnd())}function T2(i,n){if(1&i&&(e.\u0275\u0275elementStart(0,"a",6),e.\u0275\u0275i18nStart(1,3),e.\u0275\u0275element(2,"i",7),e.\u0275\u0275i18nEnd(),e.\u0275\u0275elementEnd()),2&i){const t=e.\u0275\u0275nextContext(3);e.\u0275\u0275advance(2),e.\u0275\u0275property("ngClass",e.\u0275\u0275pureFunction2(2,S2,t.icons.spin,t.icons.spinner)),e.\u0275\u0275i18nExp(null==t.executingTask?null:t.executingTask.progress),e.\u0275\u0275i18nApply(1)}}function F2(i,n){if(1&i&&(e.\u0275\u0275elementContainerStart(0),e.\u0275\u0275template(1,h2,2,0,"h5",5)(2,T2,3,5,"ng-template",null,1,e.\u0275\u0275templateRefExtractor),e.\u0275\u0275elementContainerEnd()),2&i){const t=e.\u0275\u0275reference(3),o=e.\u0275\u0275nextContext().ngIf;e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf",o.is_paused)("ngIfElse",t)}}function v2(i,n){if(1&i&&(e.\u0275\u0275elementStart(0,"div"),e.\u0275\u0275template(1,F2,4,2,"ng-container",5),e.\u0275\u0275elementEnd()),2&i){const t=n.ngIf;e.\u0275\u0275nextContext();const o=e.\u0275\u0275reference(3);e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf",t.is_paused||t.in_progress)("ngIfElse",o)}}function M2(i,n){if(1&i){const t=e.\u0275\u0275getCurrentView();e.\u0275\u0275i18nStart(0,4,1),e.\u0275\u0275elementStart(1,"h5",10),e.\u0275\u0275listener("click",function(){e.\u0275\u0275restoreView(t);const s=e.\u0275\u0275nextContext(3);return e.\u0275\u0275resetView(s.upgradeModal())}),e.\u0275\u0275element(2,"i",7),e.\u0275\u0275elementEnd(),e.\u0275\u0275i18nEnd()}if(2&i){const t=e.\u0275\u0275nextContext(3);e.\u0275\u0275advance(2),e.\u0275\u0275property("ngClass",t.icons.up)}}function R2(i,n){if(1&i&&(e.\u0275\u0275elementStart(0,"div"),e.\u0275\u0275i18nStart(1,4),e.\u0275\u0275template(2,M2,3,1,"h5",9),e.\u0275\u0275i18nEnd(),e.\u0275\u0275elementEnd()),2&i){const t=n.ngIf;e.\u0275\u0275advance(2),e.\u0275\u0275property("ngIf",t.versions.length>0)}}function O2(i,n){if(1&i&&(e.\u0275\u0275template(0,R2,3,1,"div",8),e.\u0275\u0275pipe(1,"async")),2&i){const t=e.\u0275\u0275nextContext();e.\u0275\u0275property("ngIf",e.\u0275\u0275pipeBind1(1,1,t.upgradeInfo$))}}class $s{constructor(n,t,o){this.orchestratorService=n,this.summaryService=t,this.upgradeService=o,this.orchAvailable=!1,this.subs=new K.Subscription,this.icons=g.FI}ngOnInit(){this.orchestratorService.status().subscribe(n=>{this.orchAvailable=n.available,this.orchAvailable&&n.upgrade_status?.available&&(this.upgradeInfo$=this.upgradeService.listCached(),this.upgradeStatus$=this.upgradeService.status())}),this.subs.add(this.summaryService.subscribe(n=>{this.executingTask=n.executing_tasks.filter(t=>t.name.includes("progress/Upgrade"))[0]}))}ngOnDestroy(){this.subs?.unsubscribe()}upgradeModal(){this.upgradeModalRef=this.upgradeService.startUpgradeModal()}static{this.\u0275fac=function(t){return new(t||$s)(e.\u0275\u0275directiveInject(tn.K),e.\u0275\u0275directiveInject(on.E),e.\u0275\u0275directiveInject($n))}}static{this.\u0275cmp=e.\u0275\u0275defineComponent({type:$s,selectors:[["cd-upgradable"]],decls:4,vars:4,consts:()=>{let n,t,o;return n=$localize`:␟a9abcc47e24626de26276ac8c2f2391d8df46927␟6235792372980983990: Upgrade is paused `,t=$localize`:␟42300878b5534740d12736430a5dad6ee510eb7d␟1923020101905032993:${"\ufffd#2\ufffd"}:START_ITALIC_TEXT:${"\ufffd/#2\ufffd"}:CLOSE_ITALIC_TEXT: Upgrading ${"\ufffd0\ufffd"}:INTERPOLATION:% `,o=$localize`:␟f40994dc42978115b72215d52d09636247b2c937␟2308409352243989693:${"\ufffd*2:1\ufffd\ufffd#1:1\ufffd"}:START_HEADING_LEVEL5:${"\ufffd#2:1\ufffd"}:START_ITALIC_TEXT:${"\ufffd/#2:1\ufffd"}:CLOSE_ITALIC_TEXT: Upgrade available ${"\ufffd/#1:1\ufffd\ufffd/*2:1\ufffd"}:CLOSE_HEADING_LEVEL5:`,[["isUpgradable",""],["inProgress",""],n,t,o,[4,"ngIf","ngIfElse"],["href","#/upgrade/progress"],[3,"ngClass"],[4,"ngIf"],[3,"click",4,"ngIf"],[3,"click"]]},template:function(t,o){if(1&t&&(e.\u0275\u0275template(0,v2,2,2,"div",5),e.\u0275\u0275pipe(1,"async"),e.\u0275\u0275template(2,O2,2,3,"ng-template",null,0,e.\u0275\u0275templateRefExtractor)),2&t){const s=e.\u0275\u0275reference(3);e.\u0275\u0275property("ngIf",e.\u0275\u0275pipeBind1(1,2,o.upgradeStatus$))("ngIfElse",s)}},dependencies:[l.NgClass,l.NgIf,l.AsyncPipe]})}}var fl=r(487);class Oi{constructor(n,t){this.cssHelper=n,this.dimlessBinary=t,this.highThreshold=0,this.lowThreshold=0,this.doughnutChartPlugins=[{id:"center_text",beforeDraw(o){const s=new fo._,d="Helvetica Neue, Helvetica, Arial, sans-serif";jt.defaults.font.family=d;const h=o.ctx;if(!o.options.plugins.center_text||!o.data.datasets[0].label)return;h.save();const I=o.data.datasets[0].label[0].split("\n"),$=(o.chartArea.left+o.chartArea.right)/2,w=(o.chartArea.top+o.chartArea.bottom)/2;h.textAlign="center",h.textBaseline="middle",h.font=`24px ${d}`,h.fillText(I[0],$,w-10),I.length>1&&(h.font=`14px ${d}`,h.fillStyle=s.propertyValue("chart-color-center-text-description"),h.fillText(I[1],$,w+10)),h.restore()}}],this.chartConfig={chartType:"doughnut",labels:[],dataset:[{label:null,backgroundColor:[this.cssHelper.propertyValue("chart-color-light-gray"),this.cssHelper.propertyValue("chart-color-slight-dark-gray"),this.cssHelper.propertyValue("chart-color-dark-gray")]},{label:null,borderWidth:0,backgroundColor:[this.cssHelper.propertyValue("chart-color-blue"),this.cssHelper.propertyValue("chart-color-white")]}],options:{cutout:"70%",events:["click","mouseout","touchstart"],aspectRatio:2,plugins:{center_text:!0,legend:{display:!0,position:"right",labels:{boxWidth:10,usePointStyle:!1,generateLabels:o=>{let s=o.data.labels.slice(0,this.chartConfig.labels.length);return s[0]={text:$localize`Used: ${o.data.datasets[1].data[2]}`,fillStyle:o.data.datasets[1].backgroundColor[0],strokeStyle:o.data.datasets[1].backgroundColor[0]},o.data.datasets[0].data?.length&&(s[1]={text:$localize`Warning: ${o.data.datasets[0].data[0]}%`,fillStyle:o.data.datasets[0].backgroundColor[1],strokeStyle:o.data.datasets[0].backgroundColor[1]},s[2]={text:$localize`Danger: ${o.data.datasets[0].data[0]+o.data.datasets[0].data[1]}%`,fillStyle:o.data.datasets[0].backgroundColor[2],strokeStyle:o.data.datasets[0].backgroundColor[2]}),s}}},tooltip:{enabled:!0,displayColors:!1,backgroundColor:this.cssHelper.propertyValue("chart-color-tooltip-background"),cornerRadius:0,bodyFontSize:14,bodyFontStyle:"600",position:"nearest",xPadding:12,yPadding:12,filter:o=>1===o.datasetIndex,callbacks:{label:(o,s)=>{let d=s.labels[o.index];return d.includes("%")||(d=`${d} (${s.datasets[o.datasetIndex].data[o.index]}%)`),d}}},title:{display:!1}}}}}ngOnInit(){this.prepareRawUsage(this.chartConfig,this.data)}ngOnChanges(){this.prepareRawUsage(this.chartConfig,this.data)}prepareRawUsage(n,t){const o=100*this.lowThreshold,s=100*this.highThreshold,d="string"==typeof t.max?parseFloat(t.max):t.max,h="string"==typeof t.current?parseFloat(t.current):t.current,I=this.calcPercentage(d-h,d),$=this.calcPercentage(h,d);this.color=s>0&&$>=s?"chart-color-red":o>0&&$>=o?"chart-color-yellow":"chart-color-blue",s>0&&o>0?n.dataset[0].data=[Math.round(o),Math.round(Math.abs(o-s)),Math.round(100-s)]:n.dataset[1].backgroundColor[1]=this.cssHelper.propertyValue("chart-color-light-gray"),n.dataset[1].data=[$,I,this.dimlessBinary.transform(t.current)],n.dataset[1].backgroundColor[0]=this.cssHelper.propertyValue(this.color),n.dataset[0].label=[`${$}%\nof ${this.dimlessBinary.transform(t.max)}`]}calcPercentage(n,t){return p().isNumber(n)&&p().isNumber(t)&&0!==t?Math.ceil(n/t*100*100)/100:0}static{this.\u0275fac=function(t){return new(t||Oi)(e.\u0275\u0275directiveInject(fo._),e.\u0275\u0275directiveInject(pt.l))}}static{this.\u0275cmp=e.\u0275\u0275defineComponent({type:Oi,selectors:[["cd-dashboard-pie"]],inputs:{data:"data",highThreshold:"highThreshold",lowThreshold:"lowThreshold"},features:[e.\u0275\u0275NgOnChangesFeature],decls:6,vars:5,consts:[["chartCanvas",""],["chartTooltip",""],[1,"chart-container","d-flex","align-items-center","justify-content-center"],["baseChart","",1,"chart-canvas",3,"datasets","type","options","labels","plugins"],[1,"chartjs-tooltip"]],template:function(t,o){1&t&&(e.\u0275\u0275elementStart(0,"div",2),e.\u0275\u0275element(1,"canvas",3,0),e.\u0275\u0275elementStart(3,"div",4,1),e.\u0275\u0275element(5,"table"),e.\u0275\u0275elementEnd()()),2&t&&(e.\u0275\u0275advance(),e.\u0275\u0275property("datasets",o.chartConfig.dataset)("type",o.chartConfig.chartType)("options",o.chartConfig.options)("labels",o.chartConfig.labels)("plugins",o.doughnutChartPlugins))},dependencies:[Nt.BaseChartDirective],styles:['.chart-container[_ngcontent-%COMP%]{cursor:pointer;margin:auto;overflow:visible;position:absolute}canvas[_ngcontent-%COMP%]{user-select:none}.chartjs-tooltip[_ngcontent-%COMP%]{background:#000000b3;border-radius:3px;color:#fff;font-family:Helvetica Neue,Helvetica,Arial,sans-serif!important;opacity:0;pointer-events:none;position:absolute;transform:translate(-50%);transition:all .1s ease}.chartjs-tooltip.transform-left[_ngcontent-%COMP%]{transform:translate(-10%)}.chartjs-tooltip.transform-left[_ngcontent-%COMP%]:after{left:10%}.chartjs-tooltip.transform-right[_ngcontent-%COMP%]{transform:translate(-90%)}.chartjs-tooltip.transform-right[_ngcontent-%COMP%]:after{left:90%}.chartjs-tooltip[_ngcontent-%COMP%]:after{border-color:#000 transparent transparent transparent;border-style:solid;border-width:5px;content:" ";left:50%;margin-left:-5px;position:absolute;top:100%}  .chartjs-tooltip-key{display:inline-block;height:10px;margin-right:10px;width:10px}.chart-container[_ngcontent-%COMP%]{height:100%;margin-left:auto;margin-right:auto;position:unset;width:100%}.chart-canvas[_ngcontent-%COMP%]{height:100%;margin-left:auto;margin-right:auto;max-height:100%;max-width:100%;position:unset;width:100%}']})}}var Wl=r(11378),Kl=r(47830),P2=r(57452),Ql=r(32357),b2=r(71721),N2=r(68945),Yl=r(97421);class xs{constructor(n){this.pgCategoryService=n}transform(n){if(!n)return null;const t={};let o=0;return p().forEach(n.statuses,(s,d)=>{const h=this.pgCategoryService.getTypeByStates(d);p().isUndefined(t[h])&&(t[h]=0),t[h]+=s,o+=s}),{categoryPgAmount:t,total:o}}static{this.\u0275fac=function(t){return new(t||xs)(e.\u0275\u0275directiveInject(Yl.v,16))}}static{this.\u0275pipe=e.\u0275\u0275definePipe({name:"pgSummary",type:xs,pure:!0})}}const Jl=()=>["Reads","Writes"],Go=(i,n)=>[i,n],I2=()=>["Apply","Commit"],A2=()=>["Recovery Throughput"],Ho=i=>[i],Zl=i=>({active:i}),D2=(i,n)=>({max:i,current:n}),y2=()=>["Used Capacity"],ql=(i,n,t)=>[i,n,t];function L2(i,n){if(1&i&&(e.\u0275\u0275elementStart(0,"span")(1,"dt"),e.\u0275\u0275text(2,"Managed By"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(3,"dd")(4,"a",20),e.\u0275\u0275text(5),e.\u0275\u0275element(6,"i",18),e.\u0275\u0275elementEnd()()()),2&i){const t=e.\u0275\u0275nextContext().ngIf;e.\u0275\u0275advance(4),e.\u0275\u0275property("href",t.MANAGED_BY_CLUSTERS[0].url,e.\u0275\u0275sanitizeUrl),e.\u0275\u0275advance(),e.\u0275\u0275textInterpolate1(" ",t.MANAGED_BY_CLUSTERS[0].fsid," ")}}function $2(i,n){if(1&i&&(e.\u0275\u0275elementContainerStart(0),e.\u0275\u0275template(1,L2,7,2,"span",21),e.\u0275\u0275elementContainerEnd()),2&i){const t=n.ngIf;e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf",t.MANAGED_BY_CLUSTERS.length>0)}}function x2(i,n){if(1&i&&e.\u0275\u0275element(0,"cd-card-row",61),2&i){const t=e.\u0275\u0275nextContext(2);e.\u0275\u0275property("data",t.rgwCount)}}function U2(i,n){if(1&i&&(e.\u0275\u0275element(0,"cd-card-row",62),e.\u0275\u0275pipe(1,"mdsSummary")),2&i){const t=e.\u0275\u0275nextContext(2);e.\u0275\u0275property("data",e.\u0275\u0275pipeBind1(1,1,t.mdsMap))}}function w2(i,n){if(1&i&&e.\u0275\u0275element(0,"cd-card-row",63),2&i){const t=e.\u0275\u0275nextContext(2);e.\u0275\u0275property("data",t.iscsiMap)}}function G2(i,n){if(1&i&&(e.\u0275\u0275elementContainerStart(0),e.\u0275\u0275element(1,"cd-card-row",52),e.\u0275\u0275pipe(2,"async"),e.\u0275\u0275pipe(3,"async"),e.\u0275\u0275element(4,"cd-card-row",53)(5,"cd-card-row",54),e.\u0275\u0275pipe(6,"mgrSummary"),e.\u0275\u0275element(7,"cd-card-row",55),e.\u0275\u0275pipe(8,"osdSummary"),e.\u0275\u0275element(9,"cd-card-row",56)(10,"cd-card-row",57),e.\u0275\u0275pipe(11,"pgSummary"),e.\u0275\u0275template(12,x2,1,1,"cd-card-row",58)(13,U2,2,3,"cd-card-row",59)(14,w2,1,1,"cd-card-row",60),e.\u0275\u0275elementContainerEnd()),2&i){const t=n.ngIf,o=e.\u0275\u0275nextContext();e.\u0275\u0275advance(),e.\u0275\u0275property("data",o.hostsCount)("dropdownData",e.\u0275\u0275pipeBind1(2,10,o.isHardwareEnabled$)&&e.\u0275\u0275pipeBind1(3,12,o.hardwareSummary$)),e.\u0275\u0275advance(3),e.\u0275\u0275property("data",null==o.monMap?null:o.monMap.monmap.mons.length),e.\u0275\u0275advance(),e.\u0275\u0275property("data",e.\u0275\u0275pipeBind1(6,14,o.mgrMap)),e.\u0275\u0275advance(2),e.\u0275\u0275property("data",e.\u0275\u0275pipeBind1(8,16,o.osdMap)),e.\u0275\u0275advance(2),e.\u0275\u0275property("data",null==o.poolStatus?null:o.poolStatus.length),e.\u0275\u0275advance(),e.\u0275\u0275property("data",e.\u0275\u0275pipeBind1(11,18,o.pgStatus)),e.\u0275\u0275advance(2),e.\u0275\u0275property("ngIf",t.rgw),e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf",t.cephfs),e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf",t.iscsi)}}function H2(i,n){1&i&&(e.\u0275\u0275elementStart(0,"div",64)(1,"a",65),e.\u0275\u0275i18n(2,5),e.\u0275\u0275elementEnd()())}function V2(i,n){if(1&i&&(e.\u0275\u0275element(0,"i",66),e.\u0275\u0275pipe(1,"healthIcon"),e.\u0275\u0275pipe(2,"healthColor")),2&i){const t=e.\u0275\u0275nextContext();e.\u0275\u0275property("ngClass",e.\u0275\u0275pureFunction2(7,Go,e.\u0275\u0275pipeBind1(1,3,t.healthData.status),t.icons.large2x))("ngStyle",e.\u0275\u0275pipeBind1(2,5,t.healthData.status))("title",t.healthData.status)}}function B2(i,n){1&i&&(e.\u0275\u0275elementStart(0,"span",67),e.\u0275\u0275i18n(1,6),e.\u0275\u0275elementEnd())}function z2(i,n){1&i&&(e.\u0275\u0275elementStart(0,"a",68),e.\u0275\u0275i18n(1,7),e.\u0275\u0275elementEnd())}function X2(i,n){if(1&i&&e.\u0275\u0275element(0,"cd-health-checks",69),2&i){const t=e.\u0275\u0275nextContext();e.\u0275\u0275property("healthData",t.healthData.checks)}}function k2(i,n){if(1&i&&(e.\u0275\u0275elementStart(0,"div",70),e.\u0275\u0275element(1,"i",71),e.\u0275\u0275elementStart(2,"span",67),e.\u0275\u0275i18n(3,8),e.\u0275\u0275elementEnd()()),2&i){const t=e.\u0275\u0275nextContext();e.\u0275\u0275advance(),e.\u0275\u0275property("ngClass",e.\u0275\u0275pureFunction2(1,Go,t.icons.danger,t.icons.large2x))}}function j2(i,n){if(1&i){const t=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"button",82),e.\u0275\u0275listener("click",function(){e.\u0275\u0275restoreView(t);const s=e.\u0275\u0275nextContext(2);return e.\u0275\u0275resetView(s.toggleAlertsWindow("critical"))}),e.\u0275\u0275element(1,"i",83),e.\u0275\u0275elementStart(2,"span"),e.\u0275\u0275text(3),e.\u0275\u0275elementEnd()()}if(2&i){const t=e.\u0275\u0275nextContext(2);e.\u0275\u0275property("ngClass",e.\u0275\u0275pureFunction1(3,Zl,"critical"===t.alertType)),e.\u0275\u0275advance(),e.\u0275\u0275property("ngClass",e.\u0275\u0275pureFunction1(5,Ho,t.icons.danger)),e.\u0275\u0275advance(2),e.\u0275\u0275textInterpolate(t.prometheusAlertService.activeCriticalAlerts)}}function W2(i,n){if(1&i){const t=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"button",84),e.\u0275\u0275listener("click",function(){e.\u0275\u0275restoreView(t);const s=e.\u0275\u0275nextContext(2);return e.\u0275\u0275resetView(s.toggleAlertsWindow("warning"))}),e.\u0275\u0275element(1,"i",83),e.\u0275\u0275elementStart(2,"span"),e.\u0275\u0275text(3),e.\u0275\u0275elementEnd()()}if(2&i){const t=e.\u0275\u0275nextContext(2);e.\u0275\u0275property("ngClass",e.\u0275\u0275pureFunction1(3,Zl,"warning"===t.alertType)),e.\u0275\u0275advance(),e.\u0275\u0275property("ngClass",e.\u0275\u0275pureFunction1(5,Ho,t.icons.infoCircle)),e.\u0275\u0275advance(2),e.\u0275\u0275textInterpolate(t.prometheusAlertService.activeWarningAlerts)}}function K2(i,n){1&i&&e.\u0275\u0275elementContainer(0)}function Q2(i,n){if(1&i&&(e.\u0275\u0275elementStart(0,"section",72)(1,"div",73)(2,"span",74),e.\u0275\u0275i18n(3,9),e.\u0275\u0275elementEnd(),e.\u0275\u0275template(4,j2,4,7,"button",75)(5,W2,4,7,"button",76),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(6,"div",77),e.\u0275\u0275element(7,"hr",78),e.\u0275\u0275elementStart(8,"ngx-simplebar",79)(9,"div",80),e.\u0275\u0275template(10,K2,1,0,"ng-container",81),e.\u0275\u0275elementEnd()()()()),2&i){const t=e.\u0275\u0275nextContext(),o=e.\u0275\u0275reference(70);e.\u0275\u0275advance(4),e.\u0275\u0275property("ngIf",null==t.prometheusAlertService?null:t.prometheusAlertService.activeCriticalAlerts),e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf",null==t.prometheusAlertService?null:t.prometheusAlertService.activeWarningAlerts),e.\u0275\u0275advance(3),e.\u0275\u0275property("options",t.simplebar),e.\u0275\u0275advance(2),e.\u0275\u0275property("ngTemplateOutlet",o)}}function Y2(i,n){if(1&i&&(e.\u0275\u0275elementContainerStart(0,16),e.\u0275\u0275element(1,"cd-dashboard-pie",85),e.\u0275\u0275elementContainerEnd()),2&i){const t=e.\u0275\u0275nextContext();e.\u0275\u0275advance(),e.\u0275\u0275property("data",e.\u0275\u0275pureFunction2(3,D2,t.capacity.total_bytes,t.capacity.total_used_raw_bytes))("lowThreshold",t.capacityCardData.osdNearfull)("highThreshold",t.capacityCardData.osdFull)}}function J2(i,n){if(1&i&&(e.\u0275\u0275elementContainerStart(0),e.\u0275\u0275element(1,"cd-dashboard-area-chart",86),e.\u0275\u0275elementContainerEnd()),2&i){const t=e.\u0275\u0275nextContext();e.\u0275\u0275advance(),e.\u0275\u0275property("maxValue",t.capacity.total_bytes)("labelsArray",e.\u0275\u0275pureFunction0(3,y2))("dataArray",e.\u0275\u0275pureFunction1(4,Ho,t.queriesResults.USEDCAPACITY))}}function Z2(i,n){if(1&i&&(e.\u0275\u0275elementStart(0,"div",83)(1,"div",89)(2,"div",90)(3,"div",91)(4,"span",83),e.\u0275\u0275element(5,"i",83)(6,"i",83),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(7,"div",92)(8,"div",93)(9,"h6",94),e.\u0275\u0275text(10),e.\u0275\u0275elementEnd(),e.\u0275\u0275element(11,"p",95),e.\u0275\u0275elementStart(12,"p",96)(13,"small",97),e.\u0275\u0275pipe(14,"cdDate"),e.\u0275\u0275i18n(15,10),e.\u0275\u0275pipe(16,"relativeDate"),e.\u0275\u0275elementEnd()()()()()(),e.\u0275\u0275element(17,"hr",98),e.\u0275\u0275elementEnd()),2&i){const t=e.\u0275\u0275nextContext().$implicit,o=e.\u0275\u0275nextContext(2);e.\u0275\u0275property("ngClass",e.\u0275\u0275pureFunction1(13,Ho,"border-"+o.alertClass[t.labels.severity])),e.\u0275\u0275advance(4),e.\u0275\u0275property("ngClass",e.\u0275\u0275pureFunction3(15,ql,o.icons.stack,o.icons.large,"text-"+o.alertClass[t.labels.severity])),e.\u0275\u0275advance(),e.\u0275\u0275property("ngClass",e.\u0275\u0275pureFunction2(19,Go,o.icons.circle,o.icons.stack2x)),e.\u0275\u0275advance(),e.\u0275\u0275property("ngClass",e.\u0275\u0275pureFunction3(22,ql,o.icons.stack1x,o.icons.inverse,o.icons.warning)),e.\u0275\u0275advance(4),e.\u0275\u0275textInterpolate(t.labels.alertname),e.\u0275\u0275advance(),e.\u0275\u0275property("innerHtml",t.annotations.description,e.\u0275\u0275sanitizeHtml)("ngbTooltip",t.annotations.description),e.\u0275\u0275advance(2),e.\u0275\u0275property("title",e.\u0275\u0275pipeBind1(14,9,t.startsAt)),e.\u0275\u0275advance(3),e.\u0275\u0275i18nExp(e.\u0275\u0275pipeBind1(16,11,t.startsAt)),e.\u0275\u0275i18nApply(15)}}function q2(i,n){if(1&i&&(e.\u0275\u0275elementContainerStart(0),e.\u0275\u0275template(1,Z2,18,26,"div",88),e.\u0275\u0275elementContainerEnd()),2&i){const t=n.$implicit,o=e.\u0275\u0275nextContext(2);e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf","active"===t.status.state&&t.labels.severity===o.alertType||!o.alertType)}}function eF(i,n){if(1&i&&e.\u0275\u0275template(0,q2,2,1,"ng-container",87),2&i){const t=e.\u0275\u0275nextContext();e.\u0275\u0275property("ngForOf",t.prometheusAlertService.alerts)("ngForTrackBy",t.trackByFn)}}function tF(i,n){if(1&i&&(e.\u0275\u0275elementContainerStart(0),e.\u0275\u0275elementStart(1,"p",99),e.\u0275\u0275i18nStart(2,11),e.\u0275\u0275element(3,"i",83)(4,"a",100),e.\u0275\u0275i18nEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementContainerEnd()),2&i){const t=e.\u0275\u0275nextContext(2);e.\u0275\u0275advance(3),e.\u0275\u0275property("ngClass",e.\u0275\u0275pureFunction1(1,Ho,t.icons.infoCircle))}}function nF(i,n){if(1&i&&e.\u0275\u0275template(0,tF,5,3,"ng-container",21),2&i){const t=e.\u0275\u0275nextContext();e.\u0275\u0275property("ngIf",t.permissions.log.read)}}function oF(i,n){1&i&&e.\u0275\u0275element(0,"cds-inline-loading")}class Us extends uo{constructor(n,t,o,s,d,h,I,$,w,X,J){super(I),this.summaryService=n,this.orchestratorService=t,this.authStorageService=o,this.featureToggles=s,this.healthService=d,this.settingsService=h,this.prometheusService=I,this.mgrModuleService=$,this.refreshIntervalService=w,this.prometheusAlertService=X,this.hardwareService=J,this.detailsCardData={},this.capacityCardData={osdNearfull:null,osdFull:null},this.interval=new K.Subscription,this.icons=g.FI,this.flexHeight=!0,this.simplebar={autoHide:!0},this.alertClass=QT.L,this.categoryPgAmount={},this.totalPgs=0,this.queriesResults={USEDCAPACITY:[],IPS:[],OPS:[],READLATENCY:[],WRITELATENCY:[],READCLIENTTHROUGHPUT:[],WRITECLIENTTHROUGHPUT:[],RECOVERYBYTES:[],READIOPS:[],WRITEIOPS:[]},this.telemetryURL="https://telemetry-public.ceph.com/",this.origin=window.location.origin,this.hardwareEnabled=!1,this.hasHardwareError=!1,this.hardwareSubject=new K.BehaviorSubject([]),this.subs=new K.Subscription,this.destroy$=new K.Subject,this.hostsCount=null,this.monMap=null,this.mgrMap=null,this.osdMap=null,this.poolStatus=null,this.pgStatus=null,this.rgwCount=null,this.mdsMap=null,this.iscsiMap=null,this.permissions=this.authStorageService.getPermissions(),this.enabledFeature$=this.featureToggles.get()}ngOnInit(){super.ngOnInit(),this.permissions.configOpt.read&&(this.isHardwareEnabled$=this.getHardwareConfig(),this.hardwareSummary$=this.hardwareSubject.pipe((0,v.switchMap)(()=>this.hardwareService.getSummary().pipe((0,v.switchMap)(n=>(this.hasHardwareError=n.host.flawed,(0,K.of)(n)))))),this.managedByConfig$=this.settingsService.getValues("MANAGED_BY_CLUSTERS")),this.loadInventories(),this.refreshIntervalObs(()=>this.healthService.getClusterCapacity()).subscribe({next:n=>{this.capacity=n}}),this.getPrometheusData(this.prometheusService.lastHourDateObject),this.getDetailsCardData(),this.getTelemetryReport(),this.getCapacityCardData(),this.prometheusAlertService.getAlerts(!0)}getTelemetryText(){return this.telemetryEnabled?"Cluster telemetry is active":"Cluster telemetry is inactive. To Activate the Telemetry,        click settings icon on top navigation bar and select        Telemetry configration."}ngOnDestroy(){this.prometheusService.unsubscribe(),this.subs?.unsubscribe(),this.destroy$.next(),this.destroy$.complete()}toggleAlertsWindow(n){this.alertType===n?this.alertType=null:this.alertType=n}getDetailsCardData(){this.healthService.getClusterFsid().subscribe(n=>{this.detailsCardData.fsid=n}),this.orchestratorService.getName().subscribe(n=>{this.detailsCardData.orchestrator=n}),this.subs.add(this.summaryService.subscribe(n=>{const t=n.version.replace("ceph version ","").split(" ");this.detailsCardData.cephVersion=t[0]+" "+t.slice(2,t.length).join(" ")}))}getPrometheusData(n){this.queriesResults=this.prometheusService.getRangeQueriesData(n,wt.dR,this.queriesResults)}getCapacityQueryValues(n){let t=null,o=null;return n?.[0]?.metric?.__name__===wt.xm.OSD_FULL?(t=n[0]?.value?.[1],o=n[1]?.value?.[1]):(t=n?.[1]?.value?.[1],o=n?.[0]?.value?.[1]),[t,o]}getCapacityCardData(){const n=`{__name__=~"${wt.xm.OSD_FULL}|${wt.xm.OSD_NEARFULL}"}`;this.prometheusService.getGaugeQueryData(n).subscribe(t=>{const[o,s]=this.getCapacityQueryValues(t?.result);this.capacityCardData.osdFull=this.prometheusService.formatGuageMetric(o),this.capacityCardData.osdNearfull=this.prometheusService.formatGuageMetric(s)})}getTelemetryReport(){this.healthService.getTelemetryStatus().subscribe(n=>{this.telemetryEnabled=n})}trackByFn(n){return n}getHardwareConfig(){return this.mgrModuleService.getConfig("cephadm").pipe((0,v.switchMap)(n=>(this.hardwareEnabled=n?.hw_monitoring,(0,K.of)(n?.hw_monitoring))))}refreshIntervalObs(n){return this.refreshIntervalService.intervalData$.pipe((0,v.exhaustMap)(()=>n().pipe((0,v.catchError)(()=>K.EMPTY))),(0,v.takeUntil)(this.destroy$))}loadInventories(){this.refreshIntervalObs(()=>this.healthService.getMinimalHealth()).subscribe({next:n=>{this.hostsCount=n.hosts,this.monMap=n.mon_status,this.mgrMap=n.mgr_map,this.osdMap=n.osd_map,this.poolStatus=n.pools,this.pgStatus=n.pg_info,this.rgwCount=n.rgw,this.mdsMap=n.fs_map,this.iscsiMap=n.iscsi_daemons,this.healthData=n.health,this.enabledFeature$=this.featureToggles.get()}})}static{this.\u0275fac=function(t){return new(t||Us)(e.\u0275\u0275directiveInject(on.E),e.\u0275\u0275directiveInject(tn.K),e.\u0275\u0275directiveInject(c.v),e.\u0275\u0275directiveInject(vi.b),e.\u0275\u0275directiveInject(ue),e.\u0275\u0275directiveInject(Io.h),e.\u0275\u0275directiveInject(Sn.o),e.\u0275\u0275directiveInject(Ln.a),e.\u0275\u0275directiveInject(Mi.s),e.\u0275\u0275directiveInject(hn),e.\u0275\u0275directiveInject(Ri))}}static{this.\u0275cmp=e.\u0275\u0275defineComponent({type:Us,selectors:[["cd-dashboard-v3"]],features:[e.\u0275\u0275InheritDefinitionFeature],decls:75,vars:54,consts:()=>{let n,t,o,s,d,h,I,$,w,X;return n=$localize`:␟cdc7bb7b9053d50044276afe403479b43432af7d␟3924172365439893484:${"\ufffd0\ufffd"}:INTERPOLATION:`,t=$localize`:␟fdb7d2c026db56c39d4820ef3014a22e1dda20dd␟6787839162049105208: View alerts `,o=$localize`:␟f4d1dd59b039ad818d9da7e29a773e10e41d9821␟2944102521023817891:Cluster`,s=$localize`:␟b033ed95dac1ebe10c2c5972eddc8d5164e7b981␟5041009913692950588:Cluster `,d=$localize`:␟62a52ff1f366fe788f2b71aa6432bc5e5ad2e013␟8331204292092693335:Hardware`,h=$localize`:␟b2832b0d3c8c95fdb2dbb18951170568da9e4154␟3425367071066107827:Danger`,I=$localize`:␟a8059e31694578c1b0344a76a345357dd60e8f01␟6759205696902713848:Warning`,$=$localize`:␟9fe218829514884cdd0ca2300573a4e0428c324f␟8154453727027523235:Alerts`,w=$localize`:␟fdb6f37415114ce5ec1cba2afdb33b671ac9a627␟6319864979153601056:Active since: ${"\ufffd0\ufffd"}:INTERPOLATION:`,X=$localize`:␟44ecac93d67c6a671198091c2270354f80322327␟7900217280460384102:${"\ufffd#3\ufffd"}:START_ITALIC_TEXT:${"\ufffd/#3\ufffd"}:CLOSE_ITALIC_TEXT: See ${"\ufffd#4\ufffd"}:START_LINK:Logs${"\ufffd/#4\ufffd"}:CLOSE_LINK: for more details.`,[["healthCheck",""],["alertsCard",""],["logsLink",""],["loadingTpl",""],n,t,o,s,d,$,w,X,[1,"container-fluid","p-4"],[1,"row","d-flex","flex-row","ps-3"],[1,"col-sm-3","d-flex","flex-column","ps-2"],["cardTitle","Details","aria-label","Details card",1,"details"],[1,"ms-4","me-4"],["routerLink","/api-docs","target","_blank"],[1,"fa","fa-external-link"],[1,"badge",3,"ngClass","ngbTooltip"],["target","_blank",3,"href"],[4,"ngIf"],["cardTitle","Inventory","aria-label","Inventory card",1,"pt-4"],[1,"col-sm-9","ps-0"],[1,"row"],[1,"col-sm-8"],["cardTitle","Status","aria-label","Status card",1,"status",3,"alignItemsCenter","cardFooter","fullHeight"],["class","viewAlert",4,"ngIf"],[1,"d-flex","flex-column","ms-4","me-4","mt-4","mb-4"],[1,"d-flex","flex-row","col-md-3","ms-4"],[3,"ngClass","ngStyle","title",4,"ngIf","ngIfElse"],["class","ms-2 mt-n1 lead",4,"ngIf"],[3,"dropShadow","autoAlign"],["cdsToggletipButton",""],["class","ms-2 mt-n1 lead text-primary","popoverClass","info-card-popover-cluster-status",4,"ngIf"],["cdsToggletipContent",""],[1,"cds--popover-scroll-container"],[3,"healthData",4,"ngIf"],[1,"d-flex","flex-column","col-md-3"],["class","d-flex flex-row",4,"ngIf"],["class","footer alerts",4,"ngIf"],[1,"col-sm-4","ps-0"],["cardTitle","Capacity","aria-label","Capacity card",3,"fullHeight"],["class","ms-4 me-4",4,"ngIf"],[1,"col-sm-12","d-flex","flex-column","pt-4"],["cardTitle","Cluster Utilization","aria-label","Cluster utilization card"],[1,"ms-4","me-4","mt-0"],[3,"selectedTime"],["chartTitle","IOPS","dataUnits","","decimals","0",3,"labelsArray","dataArray"],["chartTitle","OSD Latencies","dataUnits","ms","decimals","2",3,"labelsArray","dataArray"],["chartTitle","Client Throughput","dataUnits","B/s","decimals","2",3,"labelsArray","dataArray"],["chartTitle","Recovery Throughput","dataUnits","B/s","decimals","2",3,"labelsArray","dataArray"],["link","/hosts","title","Host","summaryType","simplified",3,"data","dropdownData"],["link","/monitor","title","Monitor","summaryType","simplified",3,"data"],["title","Manager",3,"data"],["link","/osd","title","OSD","summaryType","osd",3,"data"],["link","/pool","title","Pool","summaryType","simplified",3,"data"],["title","PG",3,"data"],["link","/rgw/daemon","title","Object Gateway","summaryType","simplified","id","rgw-item",3,"data",4,"ngIf"],["title","Metadata Server","id","mds-item",3,"data",4,"ngIf"],["link","/iscsi/daemon","title","iSCSI Gateway","summaryType","iscsi","id","iscsi-item",3,"data",4,"ngIf"],["link","/rgw/daemon","title","Object Gateway","summaryType","simplified","id","rgw-item",3,"data"],["title","Metadata Server","id","mds-item",3,"data"],["link","/iscsi/daemon","title","iSCSI Gateway","summaryType","iscsi","id","iscsi-item",3,"data"],[1,"viewAlert"],["href","#/monitoring/active-alerts"],[3,"ngClass","ngStyle","title"],[1,"ms-2","mt-n1","lead"],["popoverClass","info-card-popover-cluster-status",1,"ms-2","mt-n1","lead","text-primary"],[3,"healthData"],[1,"d-flex","flex-row"],[1,"text-danger",3,"ngClass"],[1,"footer","alerts"],[1,"d-flex","flex-wrap","ms-4","me-4","mb-3","mt-3"],[1,"pt-2"],["class","btn btn-outline-danger rounded-pill ms-2","title",h,"id","dangerAlerts",3,"ngClass","click",4,"ngIf"],["class","btn btn-outline-warning rounded-pill ms-2","title",I,"id","warningAlerts",3,"ngClass","click",4,"ngIf"],[1,"alerts-section","pt-0"],[1,"mt-1","mb-0"],[3,"options"],[1,"card-body","p-0"],[4,"ngTemplateOutlet"],["title",h,"id","dangerAlerts",1,"btn","btn-outline-danger","rounded-pill","ms-2",3,"click","ngClass"],[3,"ngClass"],["title",I,"id","warningAlerts",1,"btn","btn-outline-warning","rounded-pill","ms-2",3,"click","ngClass"],[3,"data","lowThreshold","highThreshold"],["chartTitle","Used Capacity (RAW)","dataUnits","B",3,"maxValue","labelsArray","dataArray"],[4,"ngFor","ngForOf","ngForTrackBy"],[3,"ngClass",4,"ngIf"],[1,"card","tc_alerts","border-0","pt-3"],[1,"row","no-gutters","ps-2"],[1,"col-sm-1","text-center"],[1,"col-md-11","ps-0"],[1,"card-body","ps-0","pe-1","pb-1","pt-0"],[1,"card-title","bold"],[1,"card-text","me-3","mb-0","text-truncate",3,"innerHtml","ngbTooltip"],[1,"card-text","text-muted","me-3"],[1,"date",3,"title"],[1,"mt-0","mb-0"],[1,"logs-link"],["routerLink","/logs"]]},template:function(t,o){if(1&t){const s=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"div",12)(1,"div",13)(2,"div",14)(3,"cd-card",15)(4,"dl",16)(5,"dt"),e.\u0275\u0275text(6,"Cluster ID"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(7,"dd"),e.\u0275\u0275text(8),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(9,"dt"),e.\u0275\u0275text(10,"Orchestrator"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(11,"dd"),e.\u0275\u0275i18n(12,4),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(13,"dt"),e.\u0275\u0275text(14,"Ceph version"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(15,"dd"),e.\u0275\u0275text(16),e.\u0275\u0275element(17,"cd-upgradable"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(18,"dt"),e.\u0275\u0275text(19,"Cluster API"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(20,"dd")(21,"a",17),e.\u0275\u0275text(22),e.\u0275\u0275element(23,"i",18),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementContainerStart(24),e.\u0275\u0275elementStart(25,"dt"),e.\u0275\u0275text(26,"Telemetry Dashboard "),e.\u0275\u0275elementStart(27,"span",19),e.\u0275\u0275text(28),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(29,"dd")(30,"a",20),e.\u0275\u0275text(31),e.\u0275\u0275element(32,"i",18),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementContainerEnd(),e.\u0275\u0275template(33,$2,2,1,"ng-container",21),e.\u0275\u0275pipe(34,"async"),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(35,"cd-card",22),e.\u0275\u0275template(36,G2,15,20,"ng-container",21),e.\u0275\u0275pipe(37,"async"),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(38,"div",23)(39,"div",24)(40,"div",25)(41,"cd-card",26),e.\u0275\u0275template(42,H2,3,0,"div",27),e.\u0275\u0275elementStart(43,"div",28)(44,"div",29),e.\u0275\u0275template(45,V2,3,10,"i",30)(46,B2,2,0,"span",31),e.\u0275\u0275elementStart(47,"cds-toggletip",32)(48,"div",33),e.\u0275\u0275template(49,z2,2,0,"a",34),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(50,"div",35,0)(52,"div",36),e.\u0275\u0275template(53,X2,1,1,"cd-health-checks",37),e.\u0275\u0275elementEnd()()()()(),e.\u0275\u0275elementStart(54,"div",38),e.\u0275\u0275template(55,k2,4,4,"div",39),e.\u0275\u0275elementEnd(),e.\u0275\u0275template(56,Q2,11,4,"section",40),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(57,"div",41)(58,"cd-card",42),e.\u0275\u0275template(59,Y2,2,6,"ng-container",43),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(60,"div",44)(61,"cd-card",45)(62,"div",46)(63,"cd-dashboard-time-selector",47),e.\u0275\u0275listener("selectedTime",function(h){return e.\u0275\u0275restoreView(s),e.\u0275\u0275resetView(o.getPrometheusData(h))}),e.\u0275\u0275elementEnd(),e.\u0275\u0275template(64,J2,2,6,"ng-container",21),e.\u0275\u0275element(65,"cd-dashboard-area-chart",48)(66,"cd-dashboard-area-chart",49)(67,"cd-dashboard-area-chart",50)(68,"cd-dashboard-area-chart",51),e.\u0275\u0275elementEnd()()()()()()(),e.\u0275\u0275template(69,eF,1,2,"ng-template",null,1,e.\u0275\u0275templateRefExtractor)(71,nF,1,1,"ng-template",null,2,e.\u0275\u0275templateRefExtractor)(73,oF,1,0,"ng-template",null,3,e.\u0275\u0275templateRefExtractor)}if(2&t){const s=e.\u0275\u0275reference(74);e.\u0275\u0275advance(8),e.\u0275\u0275textInterpolate(o.detailsCardData.fsid),e.\u0275\u0275advance(4),e.\u0275\u0275i18nExp(o.detailsCardData.orchestrator||"Orchestrator is not available"),e.\u0275\u0275i18nApply(12),e.\u0275\u0275advance(4),e.\u0275\u0275textInterpolate1(" ",o.detailsCardData.cephVersion," "),e.\u0275\u0275advance(6),e.\u0275\u0275textInterpolate1(" ",o.origin,"/api-docs "),e.\u0275\u0275advance(5),e.\u0275\u0275property("ngClass",o.telemetryEnabled?"badge-success":"badge-secondary")("ngbTooltip",o.getTelemetryText()),e.\u0275\u0275advance(),e.\u0275\u0275textInterpolate1(" ",o.telemetryEnabled?"Active":"Inactive"," "),e.\u0275\u0275advance(2),e.\u0275\u0275property("href",o.telemetryURL,e.\u0275\u0275sanitizeUrl),e.\u0275\u0275advance(),e.\u0275\u0275textInterpolate1(" ",o.telemetryURL," "),e.\u0275\u0275advance(2),e.\u0275\u0275property("ngIf",e.\u0275\u0275pipeBind1(34,35,o.managedByConfig$)),e.\u0275\u0275advance(3),e.\u0275\u0275property("ngIf",e.\u0275\u0275pipeBind1(37,37,o.enabledFeature$)),e.\u0275\u0275advance(5),e.\u0275\u0275property("alignItemsCenter",!0)("cardFooter",o.isAlertmanagerConfigured&&o.prometheusAlertService.alerts.length)("fullHeight",!0),e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf",o.prometheusAlertService.alerts.length),e.\u0275\u0275advance(3),e.\u0275\u0275property("ngIf",null==o.healthData?null:o.healthData.status)("ngIfElse",s),e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf",!(null!=o.healthData&&null!=o.healthData.checks&&o.healthData.checks.length)),e.\u0275\u0275advance(),e.\u0275\u0275property("dropShadow",!0)("autoAlign",!0),e.\u0275\u0275advance(2),e.\u0275\u0275property("ngIf",null==o.healthData||null==o.healthData.checks?null:o.healthData.checks.length),e.\u0275\u0275advance(4),e.\u0275\u0275property("ngIf",null==o.healthData?null:o.healthData.checks),e.\u0275\u0275advance(2),e.\u0275\u0275property("ngIf",o.hasHardwareError),e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf",o.isAlertmanagerConfigured&&o.prometheusAlertService.alerts.length),e.\u0275\u0275advance(2),e.\u0275\u0275property("fullHeight",!0),e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf",o.capacity),e.\u0275\u0275advance(5),e.\u0275\u0275property("ngIf",o.capacity),e.\u0275\u0275advance(),e.\u0275\u0275property("labelsArray",e.\u0275\u0275pureFunction0(39,Jl))("dataArray",e.\u0275\u0275pureFunction2(40,Go,o.queriesResults.READIOPS,o.queriesResults.WRITEIOPS)),e.\u0275\u0275advance(),e.\u0275\u0275property("labelsArray",e.\u0275\u0275pureFunction0(43,I2))("dataArray",e.\u0275\u0275pureFunction2(44,Go,o.queriesResults.READLATENCY,o.queriesResults.WRITELATENCY)),e.\u0275\u0275advance(),e.\u0275\u0275property("labelsArray",e.\u0275\u0275pureFunction0(47,Jl))("dataArray",e.\u0275\u0275pureFunction2(48,Go,o.queriesResults.READCLIENTTHROUGHPUT,o.queriesResults.WRITECLIENTTHROUGHPUT)),e.\u0275\u0275advance(),e.\u0275\u0275property("labelsArray",e.\u0275\u0275pureFunction0(51,A2))("dataArray",e.\u0275\u0275pureFunction1(52,Ho,o.queriesResults.RECOVERYBYTES))}},dependencies:[wo,l.NgClass,l.NgForOf,l.NgIf,l.NgTemplateOutlet,l.NgStyle,ml.i,i2.C,$s,Ge.S,u.RouterLink,G.NgbTooltip,fl.SimplebarAngularComponent,D.Toggletip,D.ToggletipButton,D.ToggletipContent,D.InlineLoading,Oi,Wl.P,Kl.M,l.AsyncPipe,Eo,No.D,Ot.Q,P2.w,Ql.j,b2.Z,N2.n,xs],styles:[".details[_ngcontent-%COMP%]{font-size:larger}.details[_ngcontent-%COMP%]   dt[_ngcontent-%COMP%]{margin-bottom:.3rem}.details[_ngcontent-%COMP%]   dd[_ngcontent-%COMP%]{margin-bottom:.8rem}.status[_ngcontent-%COMP%]   .viewAlert[_ngcontent-%COMP%]{position:absolute;right:2rem;top:2rem}.alerts[_ngcontent-%COMP%]   ngx-simplebar[_ngcontent-%COMP%]{height:13.5rem;overflow-x:hidden}.alerts[_ngcontent-%COMP%]   .text-truncate[_ngcontent-%COMP%]{-webkit-box-orient:vertical;display:-webkit-box;-webkit-line-clamp:2;white-space:normal}"]})}}const iF=["chartCanvas"],aF=["chartTooltip"];class ws{constructor(n,t,o){this.dimlessBinary=n,this.dimless=t,this.cssHelper=o,this.config={},this.isBytesData=!1,this.showLabelAsTooltip=!1,this.prepareFn=new e.EventEmitter,this.doughnutChartPlugins=[{id:"center_text",beforeDraw(s){const d=new fo._,h="Helvetica Neue, Helvetica, Arial, sans-serif";jt.defaults.font.family=h;const I=s.ctx;if(!s.options.plugins.center_text||!s.data.datasets[0].label)return;I.save();const $=s.data.datasets[0].label.split("\n"),w=(s.chartArea.left+s.chartArea.right)/2,X=(s.chartArea.top+s.chartArea.bottom)/2;I.textAlign="center",I.textBaseline="middle",I.font=`24px ${h}`,I.fillStyle=d.propertyValue("chart-color-center-text"),I.fillText($[0],w,X-10),$.length>1&&(I.font=`14px ${h}`,I.fillStyle=d.propertyValue("chart-color-center-text-description"),I.fillText($[1],w,X+10)),I.restore()}}],this.chartConfig={chartType:"doughnut",dataset:[{label:null,borderWidth:0,backgroundColor:[this.cssHelper.propertyValue("chart-color-green"),this.cssHelper.propertyValue("chart-color-yellow"),this.cssHelper.propertyValue("chart-color-orange"),this.cssHelper.propertyValue("chart-color-red"),this.cssHelper.propertyValue("chart-color-blue")]}],options:{cutout:"90%",events:["click","mouseout","touchstart"],aspectRatio:2,plugins:{center_text:!0,legend:{display:!0,position:"right",labels:{boxWidth:10,usePointStyle:!1}},tooltips:{enabled:!0,displayColors:!1,backgroundColor:this.cssHelper.propertyValue("chart-color-tooltip-background"),cornerRadius:0,bodyFontSize:14,bodyFontStyle:"600",position:"nearest",xPadding:12,yPadding:12,callbacks:{label:(s,d)=>{let h=d.labels[s.index];return h.includes("%")||(h=`${h} (${d.datasets[s.datasetIndex].data[s.index]}%)`),h}}},title:{display:!1}}}}}ngOnInit(){new dn.I(this.chartCanvasRef,this.chartTooltipRef,(s,d)=>d+s.caretX+"px",(s,d)=>d+s.caretY-s.height-10+"px").getBody=s=>this.getChartTooltipBody(s),p().merge(this.chartConfig,this.config),this.prepareFn.emit([this.chartConfig,this.data])}ngOnChanges(){this.prepareFn.emit([this.chartConfig,this.data]),this.setChartSliceBorderWidth()}getChartTooltipBody(n){const t=n[0].split(": ");return this.showLabelAsTooltip?t[0]:(t[1]=this.isBytesData?this.dimlessBinary.transform(t[1]):this.dimless.transform(t[1]),t.join(": "))}setChartSliceBorderWidth(){let n=0;p().forEach(this.chartConfig.dataset[0].data,function(t){t>0&&(n+=1)}),this.chartConfig.dataset[0].borderWidth=n>1?1:0}static{this.\u0275fac=function(t){return new(t||ws)(e.\u0275\u0275directiveInject(pt.l),e.\u0275\u0275directiveInject(Gt.u),e.\u0275\u0275directiveInject(fo._))}}static{this.\u0275cmp=e.\u0275\u0275defineComponent({type:ws,selectors:[["cd-health-pie"]],viewQuery:function(t,o){if(1&t&&(e.\u0275\u0275viewQuery(iF,7),e.\u0275\u0275viewQuery(aF,7)),2&t){let s;e.\u0275\u0275queryRefresh(s=e.\u0275\u0275loadQuery())&&(o.chartCanvasRef=s.first),e.\u0275\u0275queryRefresh(s=e.\u0275\u0275loadQuery())&&(o.chartTooltipRef=s.first)}},inputs:{data:"data",config:"config",isBytesData:"isBytesData",tooltipFn:"tooltipFn",showLabelAsTooltip:"showLabelAsTooltip"},outputs:{prepareFn:"prepareFn"},features:[e.\u0275\u0275NgOnChangesFeature],decls:5,vars:5,consts:[["chartCanvas",""],["chartTooltip",""],[1,"chart-container"],["baseChart","",1,"chart-canvas",3,"datasets","type","options","labels","plugins"],[1,"chartjs-tooltip"]],template:function(t,o){1&t&&(e.\u0275\u0275elementStart(0,"div",2),e.\u0275\u0275element(1,"canvas",3,0)(3,"div",4,1),e.\u0275\u0275elementEnd()),2&t&&(e.\u0275\u0275advance(),e.\u0275\u0275property("datasets",o.chartConfig.dataset)("type",o.chartConfig.chartType)("options",o.chartConfig.options)("labels",o.chartConfig.labels)("plugins",o.doughnutChartPlugins))},dependencies:[Nt.BaseChartDirective],styles:['.chart-container[_ngcontent-%COMP%]{cursor:pointer;margin:auto;overflow:visible;position:absolute}canvas[_ngcontent-%COMP%]{user-select:none}.chartjs-tooltip[_ngcontent-%COMP%]{background:#000000b3;border-radius:3px;color:#fff;font-family:Helvetica Neue,Helvetica,Arial,sans-serif!important;opacity:0;pointer-events:none;position:absolute;transform:translate(-50%);transition:all .1s ease}.chartjs-tooltip.transform-left[_ngcontent-%COMP%]{transform:translate(-10%)}.chartjs-tooltip.transform-left[_ngcontent-%COMP%]:after{left:10%}.chartjs-tooltip.transform-right[_ngcontent-%COMP%]{transform:translate(-90%)}.chartjs-tooltip.transform-right[_ngcontent-%COMP%]:after{left:90%}.chartjs-tooltip[_ngcontent-%COMP%]:after{border-color:#000 transparent transparent transparent;border-style:solid;border-width:5px;content:" ";left:50%;margin-left:-5px;position:absolute;top:100%}  .chartjs-tooltip-key{display:inline-block;height:10px;margin-right:10px;width:10px}.chart-container[_ngcontent-%COMP%]{height:100%;margin-left:auto;margin-right:auto;position:unset;width:100%}.chart-canvas[_ngcontent-%COMP%]{height:100%;margin-left:auto;margin-right:auto;max-height:100%;max-width:100%;position:unset;width:100%}']})}}const sF=["*"];function rF(i,n){if(1&i&&(e.\u0275\u0275elementStart(0,"a",6),e.\u0275\u0275text(1),e.\u0275\u0275elementEnd()),2&i){const t=e.\u0275\u0275nextContext();e.\u0275\u0275property("routerLink",t.link),e.\u0275\u0275advance(),e.\u0275\u0275textInterpolate(t.cardTitle)}}function lF(i,n){if(1&i&&e.\u0275\u0275text(0),2&i){const t=e.\u0275\u0275nextContext();e.\u0275\u0275textInterpolate1(" ",t.cardTitle," ")}}class Gs{constructor(){this.cardClass=""}static{this.\u0275fac=function(t){return new(t||Gs)}}static{this.\u0275cmp=e.\u0275\u0275defineComponent({type:Gs,selectors:[["cd-info-card"]],inputs:{cardTitle:"cardTitle",link:"link",cardClass:"cardClass",contentClass:"contentClass"},ngContentSelectors:sF,decls:8,vars:4,consts:[["noLinkTitle",""],[1,"card","shadow-sm",3,"ngClass"],[1,"card-body","d-flex","align-items-center","justify-content-center"],[1,"card-title","m-4"],[3,"routerLink",4,"ngIf","ngIfElse"],[1,"card-text","text-center",3,"ngClass"],[3,"routerLink"]],template:function(t,o){if(1&t&&(e.\u0275\u0275projectionDef(),e.\u0275\u0275elementStart(0,"div",1)(1,"div",2)(2,"h4",3),e.\u0275\u0275template(3,rF,2,2,"a",4)(4,lF,1,1,"ng-template",null,0,e.\u0275\u0275templateRefExtractor),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(6,"div",5),e.\u0275\u0275projection(7),e.\u0275\u0275elementEnd()()()),2&t){const s=e.\u0275\u0275reference(5);e.\u0275\u0275property("ngClass",o.cardClass),e.\u0275\u0275advance(3),e.\u0275\u0275property("ngIf",o.link)("ngIfElse",s),e.\u0275\u0275advance(3),e.\u0275\u0275property("ngClass",o.contentClass)}},dependencies:[l.NgClass,l.NgIf,u.RouterLink],styles:[".card[_ngcontent-%COMP%]{font-size:12px;border:.5px solid #dee2e6;border-radius:3px;height:100%}@media screen and (min-width: 320px){.card[_ngcontent-%COMP%]{font-size:calc(12px + 9 * (100vw - 320px) / 1728)}}@media screen and (min-width: 2048px){.card[_ngcontent-%COMP%]{font-size:21px}}.card[_ngcontent-%COMP%]   .card-body[_ngcontent-%COMP%]{padding-top:40px!important}.card[_ngcontent-%COMP%]   .card-body[_ngcontent-%COMP%]   .card-title[_ngcontent-%COMP%]{left:-.6rem;position:absolute;top:-.3rem}.card[_ngcontent-%COMP%]   .card-body[_ngcontent-%COMP%]   .card-title[_ngcontent-%COMP%] > a[_ngcontent-%COMP%]{color:#25828e}.no-center[_ngcontent-%COMP%]{left:unset;position:unset;top:unset;transform:unset}.content-highlight[_ngcontent-%COMP%]{font-weight:700}"]})}}const _F=["*"];class Hs{constructor(){this.icons=g.FI}static{this.\u0275fac=function(t){return new(t||Hs)}}static{this.\u0275cmp=e.\u0275\u0275defineComponent({type:Hs,selectors:[["cd-info-group"]],inputs:{groupTitle:"groupTitle"},ngContentSelectors:_F,decls:12,vars:8,consts:()=>{let n,t;return n=$localize`:␟16bd21c1b48036d54c6a595f5cff2540cfba7f60␟858192247408211331:here`,t=$localize`:␟9ae065c4c8cdcd73371c579bcd0b2779f201f143␟5198100637238571041:For an overview of ${"\ufffd0\ufffd"}:INTERPOLATION: widgets click ${"\ufffd#8\ufffd"}:START_TAG_CD_DOC:${"\ufffd/#8\ufffd"}:CLOSE_TAG_CD_DOC:`,[t,[1,"row"],[1,"info-group-title"],["data-testid","group-title"],["iconClass","fa fa-info-circle fa-2xs"],[1,"text-center"],["docText",n,3,"section"]]},template:function(t,o){1&t&&(e.\u0275\u0275projectionDef(),e.\u0275\u0275elementStart(0,"div",1)(1,"div",2)(2,"span",3),e.\u0275\u0275text(3),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(4,"cd-helper",4)(5,"div",5),e.\u0275\u0275i18nStart(6,0),e.\u0275\u0275pipe(7,"lowercase"),e.\u0275\u0275element(8,"cd-doc",6),e.\u0275\u0275pipe(9,"lowercase"),e.\u0275\u0275i18nEnd(),e.\u0275\u0275elementEnd()()()(),e.\u0275\u0275elementStart(10,"div",1),e.\u0275\u0275projection(11),e.\u0275\u0275elementEnd()),2&t&&(e.\u0275\u0275advance(3),e.\u0275\u0275textInterpolate(o.groupTitle),e.\u0275\u0275advance(5),e.\u0275\u0275propertyInterpolate1("section","dashboard-landing-page-",e.\u0275\u0275pipeBind1(9,4,o.groupTitle),""),e.\u0275\u0275advance(),e.\u0275\u0275i18nExp(e.\u0275\u0275pipeBind1(7,6,o.groupTitle)),e.\u0275\u0275i18nApply(6))},dependencies:[y.m,Ao.C,l.LowerCasePipe],styles:[".info-group-title[_ngcontent-%COMP%]{font-size:1.75rem;margin:0 0 .5vw}.popover-icon[_ngcontent-%COMP%]{color:#25828e}.popover-icon[_ngcontent-%COMP%]:focus{box-shadow:none}"]})}}var Vs;!function(i){i.HEALTH_ERR="error",i.HEALTH_WARN="warning",i.HEALTH_OK="ok"}(Vs||(Vs={}));class Pi{transform(n){return Object.keys(Vs).includes(n)?Vs[n]:null}static{this.\u0275fac=function(t){return new(t||Pi)}}static{this.\u0275pipe=e.\u0275\u0275definePipe({name:"healthLabel",type:Pi,pure:!0})}}class Bs{transform(n){return n?$localize`${n.monmap.mons.length.toString()} (quorum \
${n.quorum.join(", ")})`:""}static{this.\u0275fac=function(t){return new(t||Bs)}}static{this.\u0275pipe=e.\u0275\u0275definePipe({name:"monSummary",type:Bs,pure:!0})}}class zs{transform(n){if(!n)return"";let t=0,o=0,s=0,d=0;p().each(n.osds,w=>{w.in&&t++,w.up&&o++,w.state.includes("nearfull")&&s++,w.state.includes("full")&&d++});const h=[{content:`${n.osds.length} ${$localize`total`}`,class:""}];h.push({content:"",class:"card-text-line-break"}),h.push({content:`${o} ${$localize`up`}, ${t} ${$localize`in`}`,class:""});const I=n.osds.length-o,$=n.osds.length-t;if(I>0||$>0){h.push({content:"",class:"card-text-line-break"});const w=I>0?`${I} ${$localize`down`}`:"",X=I>0&&$>0?", ":"",J=$>0?`${$} ${$localize`out`}`:"";h.push({content:`${w}${X}${J}`,class:"card-text-error"})}return s>0&&h.push({content:"",class:"card-text-line-break"},{content:`${s} ${$localize`near full`}`,class:"card-text-error"},{content:"",class:"card-text-line-break"}),d>0&&h.push({content:`${d} ${$localize`full`}`,class:"card-text-error"}),h}static{this.\u0275fac=function(t){return new(t||zs)}}static{this.\u0275pipe=e.\u0275\u0275definePipe({name:"osdDashboardSummary",type:zs,pure:!0})}}class Xs{transform(n){if(!n)return"";let t=$localize`n/a`;const o=p().isUndefined(n.active_name)?"":`${$localize`active daemon`}: ${n.active_name}`;o.length>0&&(t="1");const s=n.standbys.map($=>$.name).join(", "),d=s?`${$localize`standby daemons`}: ${s}`:"",h=n.standbys.length,I=[{content:`${t} ${$localize`active`}`,class:"popover-info",titleText:o}];return I.push({content:"",class:"card-text-line-break",titleText:""}),I.push({content:`${h} ${$localize`standby`}`,class:"popover-info",titleText:d}),I}static{this.\u0275fac=function(t){return new(t||Xs)}}static{this.\u0275pipe=e.\u0275\u0275definePipe({name:"mgrDashboardSummary",type:Xs,pure:!0})}}class ks{transform(n){if(!n)return"";let t="",o="",s=0,d=0,h=0;p().each(n.standbys,()=>{s+=1}),n.standbys&&!n.filesystems?(t=`${s} ${$localize`up`}`,o=$localize`no filesystems`):0===n.filesystems.length?t=$localize`no filesystems`:(p().each(n.filesystems,Me=>{p().each(Me.mdsmap.info,ve=>{"up:standby-replay"===ve.state?h+=1:d+=1})}),t=`${d} ${$localize`active`}`,o=`${s+h} ${$localize`standby`}`);const I=n.standbys.map(Me=>Me.name).join(", "),$=I?`${$localize`standby daemons`}: ${I}`:"",w=n.filesystems?n.filesystems.length:0,X=w>0?n.filesystems[0].mdsmap.info:{},J=Object.values(X).map(Me=>Me.name).join(", ");let re=J?`${$localize`active daemon`}: ${J}`:"";!d&&w>0&&(re=`${h} ${$localize`standbyReplay`}`);const de=[{content:t,class:"popover-info",titleText:re}];return o&&(de.push({content:"",class:"card-text-line-break",titleText:""}),de.push({content:o,class:"popover-info",titleText:$})),de}static{this.\u0275fac=function(t){return new(t||ks)}}static{this.\u0275pipe=e.\u0275\u0275definePipe({name:"mdsDashboardSummary",type:ks,pure:!0})}}const cF=i=>({"card-text-error":i}),dF=i=>[i];function uF(i,n){1&i&&e.\u0275\u0275element(0,"i",25)}function pF(i,n){if(1&i&&(e.\u0275\u0275elementContainerStart(0),e.\u0275\u0275elementStart(1,"cds-toggletip",18)(2,"div",19)(3,"span",20),e.\u0275\u0275pipe(4,"healthColor"),e.\u0275\u0275text(5),e.\u0275\u0275pipe(6,"healthLabel"),e.\u0275\u0275pipe(7,"uppercase"),e.\u0275\u0275template(8,uF,1,0,"i",21),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(9,"div",22)(10,"div",23),e.\u0275\u0275element(11,"cd-health-checks",24),e.\u0275\u0275elementEnd()()(),e.\u0275\u0275elementContainerEnd()),2&i){const t=e.\u0275\u0275nextContext(4);e.\u0275\u0275advance(),e.\u0275\u0275property("dropShadow",!0)("autoAlign",!0),e.\u0275\u0275advance(2),e.\u0275\u0275property("ngStyle",e.\u0275\u0275pipeBind1(4,6,t.healthData.health.status)),e.\u0275\u0275advance(2),e.\u0275\u0275textInterpolate1(" ",e.\u0275\u0275pipeBind1(7,10,e.\u0275\u0275pipeBind1(6,8,t.healthData.health.status))," "),e.\u0275\u0275advance(3),e.\u0275\u0275property("ngIf","HEALTH_OK"!==(null==t.healthData.health?null:t.healthData.health.status)),e.\u0275\u0275advance(3),e.\u0275\u0275property("healthData",t.healthData)}}function mF(i,n){if(1&i&&(e.\u0275\u0275elementContainerStart(0),e.\u0275\u0275elementStart(1,"div",26),e.\u0275\u0275pipe(2,"healthColor"),e.\u0275\u0275text(3),e.\u0275\u0275pipe(4,"healthLabel"),e.\u0275\u0275pipe(5,"uppercase"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementContainerEnd()),2&i){const t=e.\u0275\u0275nextContext(4);e.\u0275\u0275advance(),e.\u0275\u0275property("ngStyle",e.\u0275\u0275pipeBind1(2,2,null==t.healthData?null:t.healthData.health.status)),e.\u0275\u0275advance(2),e.\u0275\u0275textInterpolate1(" ",e.\u0275\u0275pipeBind1(5,6,e.\u0275\u0275pipeBind1(4,4,null==t.healthData?null:t.healthData.health.status))," ")}}function fF(i,n){if(1&i&&(e.\u0275\u0275elementStart(0,"cd-info-card",16),e.\u0275\u0275template(1,pF,12,12,"ng-container",17)(2,mF,6,8,"ng-container",17),e.\u0275\u0275elementEnd()),2&i){const t=e.\u0275\u0275nextContext(3);e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf",(null==t.healthData.health||null==t.healthData.health.checks?null:t.healthData.health.checks.length)>0),e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf",!(null!=t.healthData&&null!=t.healthData.health&&null!=t.healthData.health.checks&&t.healthData.health.checks.length))}}function EF(i,n){if(1&i&&(e.\u0275\u0275elementStart(0,"cd-info-card",27),e.\u0275\u0275text(1),e.\u0275\u0275elementEnd()),2&i){const t=e.\u0275\u0275nextContext(3);e.\u0275\u0275advance(),e.\u0275\u0275textInterpolate1(" ",null==t.healthData?null:t.healthData.hosts," total ")}}function gF(i,n){if(1&i&&(e.\u0275\u0275elementStart(0,"cd-info-card",28),e.\u0275\u0275text(1),e.\u0275\u0275pipe(2,"monSummary"),e.\u0275\u0275elementEnd()),2&i){const t=e.\u0275\u0275nextContext(3);e.\u0275\u0275advance(),e.\u0275\u0275textInterpolate1(" ",e.\u0275\u0275pipeBind1(2,1,null==t.healthData?null:t.healthData.mon_status)," ")}}function CF(i,n){if(1&i&&(e.\u0275\u0275elementStart(0,"span",31),e.\u0275\u0275text(1),e.\u0275\u0275elementEnd()),2&i){const t=n.$implicit;e.\u0275\u0275property("ngClass",t.class),e.\u0275\u0275advance(),e.\u0275\u0275textInterpolate1(" ",t.content," ")}}function SF(i,n){if(1&i&&(e.\u0275\u0275elementStart(0,"cd-info-card",29),e.\u0275\u0275template(1,CF,2,2,"span",30),e.\u0275\u0275elementEnd()),2&i){const t=n.ngIf;e.\u0275\u0275advance(),e.\u0275\u0275property("ngForOf",t)}}function hF(i,n){if(1&i&&(e.\u0275\u0275elementStart(0,"span",34),e.\u0275\u0275text(1),e.\u0275\u0275elementEnd()),2&i){const t=n.$implicit;e.\u0275\u0275property("ngClass",t.class)("title",null!=t.titleText?t.titleText:""),e.\u0275\u0275advance(),e.\u0275\u0275textInterpolate1(" ",t.content," ")}}function TF(i,n){if(1&i&&(e.\u0275\u0275elementStart(0,"cd-info-card",32),e.\u0275\u0275template(1,hF,2,3,"span",33),e.\u0275\u0275pipe(2,"mgrDashboardSummary"),e.\u0275\u0275elementEnd()),2&i){const t=e.\u0275\u0275nextContext(3);e.\u0275\u0275advance(),e.\u0275\u0275property("ngForOf",e.\u0275\u0275pipeBind1(2,1,null==t.healthData?null:t.healthData.mgr_map))}}function FF(i,n){if(1&i&&(e.\u0275\u0275elementStart(0,"cd-info-card",35),e.\u0275\u0275text(1),e.\u0275\u0275elementEnd()),2&i){const t=e.\u0275\u0275nextContext(3);e.\u0275\u0275advance(),e.\u0275\u0275textInterpolate1(" ",null==t.healthData?null:t.healthData.rgw," total ")}}function vF(i,n){if(1&i&&(e.\u0275\u0275elementStart(0,"span",34),e.\u0275\u0275text(1),e.\u0275\u0275elementEnd()),2&i){const t=n.$implicit;e.\u0275\u0275property("ngClass",t.class)("title",null!==t.titleText?t.titleText:""),e.\u0275\u0275advance(),e.\u0275\u0275textInterpolate1(" ",t.content," ")}}function MF(i,n){if(1&i&&(e.\u0275\u0275elementStart(0,"cd-info-card",36),e.\u0275\u0275template(1,vF,2,3,"span",33),e.\u0275\u0275elementEnd()),2&i){const t=n.ngIf;e.\u0275\u0275property("contentClass",(t.length>1?"text-area-size-2":"")+" content-highlight"),e.\u0275\u0275advance(),e.\u0275\u0275property("ngForOf",t)}}function RF(i,n){if(1&i&&(e.\u0275\u0275elementStart(0,"cd-info-card",37),e.\u0275\u0275text(1),e.\u0275\u0275element(2,"span",38),e.\u0275\u0275text(3),e.\u0275\u0275elementStart(4,"span",31),e.\u0275\u0275text(5),e.\u0275\u0275elementEnd()()),2&i){const t=e.\u0275\u0275nextContext(3);e.\u0275\u0275advance(),e.\u0275\u0275textInterpolate1(" ",(null==t.healthData?null:t.healthData.iscsi_daemons.up)+(null==t.healthData?null:t.healthData.iscsi_daemons.down)," total "),e.\u0275\u0275advance(2),e.\u0275\u0275textInterpolate1(" ",null==t.healthData?null:t.healthData.iscsi_daemons.up," up, "),e.\u0275\u0275advance(),e.\u0275\u0275property("ngClass",e.\u0275\u0275pureFunction1(4,cF,(null==t.healthData?null:t.healthData.iscsi_daemons.down)>0)),e.\u0275\u0275advance(),e.\u0275\u0275textInterpolate1("",null==t.healthData?null:t.healthData.iscsi_daemons.down," down")}}function OF(i,n){if(1&i&&(e.\u0275\u0275elementStart(0,"cd-info-group",7),e.\u0275\u0275template(1,fF,3,2,"cd-info-card",8)(2,EF,2,1,"cd-info-card",9)(3,gF,3,3,"cd-info-card",10)(4,SF,2,1,"cd-info-card",11),e.\u0275\u0275pipe(5,"osdDashboardSummary"),e.\u0275\u0275template(6,TF,3,3,"cd-info-card",12)(7,FF,2,1,"cd-info-card",13)(8,MF,2,2,"cd-info-card",14),e.\u0275\u0275pipe(9,"mdsDashboardSummary"),e.\u0275\u0275template(10,RF,6,6,"cd-info-card",15),e.\u0275\u0275elementEnd()),2&i){const t=e.\u0275\u0275nextContext().ngIf,o=e.\u0275\u0275nextContext();e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf",null==o.healthData.health?null:o.healthData.health.status),e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf",null!=(null==o.healthData?null:o.healthData.hosts)),e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf",null==o.healthData?null:o.healthData.mon_status),e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf",e.\u0275\u0275pipeBind1(5,8,null==o.healthData?null:o.healthData.osd_map)),e.\u0275\u0275advance(2),e.\u0275\u0275property("ngIf",null==o.healthData?null:o.healthData.mgr_map),e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf",(null==t?null:t.rgw)&&null!=(null==o.healthData?null:o.healthData.rgw)),e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf",e.\u0275\u0275pipeBind1(9,10,(null==t?null:t.cephfs)&&(null==o.healthData?null:o.healthData.fs_map))),e.\u0275\u0275advance(2),e.\u0275\u0275property("ngIf",(null==t?null:t.iscsi)&&null!=(null==o.healthData?null:o.healthData.iscsi_daemons))}}function PF(i,n){if(1&i){const t=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"cd-info-card",45)(1,"cd-health-pie",46),e.\u0275\u0275listener("prepareFn",function(s){e.\u0275\u0275restoreView(t);const d=e.\u0275\u0275nextContext(3);return e.\u0275\u0275resetView(d.prepareRawUsage(s[0],s[1]))}),e.\u0275\u0275elementEnd()()}if(2&i){const t=e.\u0275\u0275nextContext(3);e.\u0275\u0275advance(),e.\u0275\u0275property("data",t.healthData)("config",t.rawCapacityChartConfig)("isBytesData",!0)}}function bF(i,n){if(1&i){const t=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"cd-info-card",47)(1,"cd-health-pie",48),e.\u0275\u0275listener("prepareFn",function(s){e.\u0275\u0275restoreView(t);const d=e.\u0275\u0275nextContext(3);return e.\u0275\u0275resetView(d.prepareObjects(s[0],s[1]))}),e.\u0275\u0275elementEnd()()}if(2&i){const t=e.\u0275\u0275nextContext(3);e.\u0275\u0275advance(),e.\u0275\u0275property("data",t.healthData)}}function NF(i,n){1&i&&e.\u0275\u0275elementContainer(0)}function IF(i,n){if(1&i&&(e.\u0275\u0275elementStart(0,"li"),e.\u0275\u0275text(1),e.\u0275\u0275elementEnd()),2&i){const t=n.$implicit;e.\u0275\u0275advance(),e.\u0275\u0275textInterpolate2(" ",t.key,": ",t.value," ")}}function AF(i,n){if(1&i){const t=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"cd-info-card",49)(1,"div",50)(2,"div",51)(3,"cd-health-pie",52),e.\u0275\u0275listener("prepareFn",function(s){e.\u0275\u0275restoreView(t);const d=e.\u0275\u0275nextContext(3);return e.\u0275\u0275resetView(d.preparePgStatus(s[0],s[1]))}),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(4,"cds-popover-content")(5,"div",23),e.\u0275\u0275template(6,NF,1,0,"ng-container",53),e.\u0275\u0275elementStart(7,"ul"),e.\u0275\u0275template(8,IF,2,2,"li",54),e.\u0275\u0275pipe(9,"keyvalue"),e.\u0275\u0275elementEnd()()()()()}if(2&i){e.\u0275\u0275nextContext(2);const t=e.\u0275\u0275reference(5),o=e.\u0275\u0275nextContext();e.\u0275\u0275advance(),e.\u0275\u0275property("dropShadow",!0),e.\u0275\u0275advance(2),e.\u0275\u0275property("data",o.healthData)("config",o.pgStatusChartConfig),e.\u0275\u0275advance(3),e.\u0275\u0275property("ngTemplateOutlet",t),e.\u0275\u0275advance(2),e.\u0275\u0275property("ngForOf",e.\u0275\u0275pipeBind1(9,5,o.healthData.pg_info.statuses))}}function DF(i,n){if(1&i&&(e.\u0275\u0275elementStart(0,"cd-info-card",55),e.\u0275\u0275text(1),e.\u0275\u0275elementEnd()),2&i){const t=e.\u0275\u0275nextContext(3);e.\u0275\u0275advance(),e.\u0275\u0275textInterpolate1(" ",null==t.healthData?null:t.healthData.pools.length," ")}}function yF(i,n){if(1&i&&(e.\u0275\u0275elementStart(0,"cd-info-card",56),e.\u0275\u0275text(1),e.\u0275\u0275pipe(2,"dimless"),e.\u0275\u0275elementEnd()),2&i){const t=e.\u0275\u0275nextContext(3);e.\u0275\u0275advance(),e.\u0275\u0275textInterpolate1(" ",e.\u0275\u0275pipeBind1(2,1,null==t.healthData?null:t.healthData.pg_info.pgs_per_osd)," ")}}function LF(i,n){if(1&i&&(e.\u0275\u0275elementStart(0,"cd-info-group",39),e.\u0275\u0275template(1,PF,2,3,"cd-info-card",40)(2,bF,2,1,"cd-info-card",41)(3,AF,10,7,"cd-info-card",42)(4,DF,2,1,"cd-info-card",43)(5,yF,3,3,"cd-info-card",44),e.\u0275\u0275elementEnd()),2&i){const t=e.\u0275\u0275nextContext(2);e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf",null==t.healthData?null:t.healthData.df),e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf",null!=(null==t.healthData||null==t.healthData.pg_info||null==t.healthData.pg_info.object_stats?null:t.healthData.pg_info.object_stats.num_objects)),e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf",t.healthData.pg_info),e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf",null==t.healthData?null:t.healthData.pools),e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf",null==t.healthData?null:t.healthData.pg_info)}}function $F(i,n){if(1&i){const t=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"cd-info-card",62)(1,"cd-health-pie",52),e.\u0275\u0275listener("prepareFn",function(s){e.\u0275\u0275restoreView(t);const d=e.\u0275\u0275nextContext(3);return e.\u0275\u0275resetView(d.prepareReadWriteRatio(s[0],s[1]))}),e.\u0275\u0275elementEnd()()}if(2&i){const t=e.\u0275\u0275nextContext(3);e.\u0275\u0275advance(),e.\u0275\u0275property("data",t.healthData)("config",t.clientStatsConfig)}}function xF(i,n){if(1&i){const t=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"cd-info-card",63)(1,"cd-health-pie",52),e.\u0275\u0275listener("prepareFn",function(s){e.\u0275\u0275restoreView(t);const d=e.\u0275\u0275nextContext(3);return e.\u0275\u0275resetView(d.prepareClientThroughput(s[0],s[1]))}),e.\u0275\u0275elementEnd()()}if(2&i){const t=e.\u0275\u0275nextContext(3);e.\u0275\u0275advance(),e.\u0275\u0275property("data",t.healthData)("config",t.clientStatsConfig)}}function UF(i,n){if(1&i&&(e.\u0275\u0275elementStart(0,"cd-info-card",64),e.\u0275\u0275text(1),e.\u0275\u0275pipe(2,"dimlessBinary"),e.\u0275\u0275elementEnd()),2&i){const t=e.\u0275\u0275nextContext(3);e.\u0275\u0275advance(),e.\u0275\u0275textInterpolate1(" ",e.\u0275\u0275pipeBind1(2,1,null==t.healthData?null:t.healthData.client_perf.recovering_bytes_per_sec)+"/s"," ")}}function wF(i,n){if(1&i&&(e.\u0275\u0275elementStart(0,"cd-info-card",65),e.\u0275\u0275text(1),e.\u0275\u0275elementEnd()),2&i){const t=e.\u0275\u0275nextContext(3);e.\u0275\u0275advance(),e.\u0275\u0275textInterpolate1(" ",null==t.healthData?null:t.healthData.scrub_status," ")}}function GF(i,n){if(1&i&&(e.\u0275\u0275elementStart(0,"cd-info-group",57),e.\u0275\u0275template(1,$F,2,2,"cd-info-card",58)(2,xF,2,2,"cd-info-card",59)(3,UF,3,3,"cd-info-card",60)(4,wF,2,1,"cd-info-card",61),e.\u0275\u0275elementEnd()),2&i){const t=e.\u0275\u0275nextContext(2);e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf",null==t.healthData?null:t.healthData.client_perf),e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf",null==t.healthData?null:t.healthData.client_perf),e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf",null==t.healthData?null:t.healthData.client_perf),e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf",null==t.healthData?null:t.healthData.scrub_status)}}function HF(i,n){if(1&i&&(e.\u0275\u0275elementContainerStart(0),e.\u0275\u0275elementStart(1,"p",66),e.\u0275\u0275i18nStart(2,1),e.\u0275\u0275element(3,"i",31)(4,"a",67),e.\u0275\u0275i18nEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementContainerEnd()),2&i){const t=e.\u0275\u0275nextContext(3);e.\u0275\u0275advance(3),e.\u0275\u0275property("ngClass",e.\u0275\u0275pureFunction1(1,dF,t.icons.infoCircle))}}function VF(i,n){if(1&i&&e.\u0275\u0275template(0,HF,5,3,"ng-container",17),2&i){const t=e.\u0275\u0275nextContext(2);e.\u0275\u0275property("ngIf",null==t.permissions||null==t.permissions.log?null:t.permissions.log.read)}}function BF(i,n){if(1&i&&(e.\u0275\u0275elementStart(0,"div",3),e.\u0275\u0275template(1,OF,11,12,"cd-info-group",4)(2,LF,6,5,"cd-info-group",5)(3,GF,5,4,"cd-info-group",6)(4,VF,1,1,"ng-template",null,0,e.\u0275\u0275templateRefExtractor),e.\u0275\u0275elementEnd()),2&i){const t=e.\u0275\u0275nextContext();e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf",(null==t.healthData||null==t.healthData.health?null:t.healthData.health.status)||(null==t.healthData?null:t.healthData.mon_status)||(null==t.healthData?null:t.healthData.osd_map)||(null==t.healthData?null:t.healthData.mgr_map)||null!=(null==t.healthData?null:t.healthData.hosts)||null!=(null==t.healthData?null:t.healthData.rgw)||(null==t.healthData?null:t.healthData.fs_map)||null!=(null==t.healthData?null:t.healthData.iscsi_daemons)),e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf",(null==t.healthData?null:t.healthData.pools)||(null==t.healthData?null:t.healthData.df)||(null==t.healthData?null:t.healthData.pg_info)),e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf",(null==t.healthData?null:t.healthData.client_perf)||(null==t.healthData?null:t.healthData.scrub_status))}}class js{constructor(n,t,o,s,d,h,I,$,w){this.healthService=n,this.osdService=t,this.authStorageService=o,this.pgCategoryService=s,this.featureToggles=d,this.refreshIntervalService=h,this.dimlessBinary=I,this.dimless=$,this.cssHelper=w,this.osdSettings=new Xl,this.interval=new K.Subscription,this.icons=g.FI,this.clientStatsConfig={},this.rawCapacityChartConfig={},this.pgStatusChartConfig={options:{events:[""]}},this.permissions=this.authStorageService.getPermissions(),this.enabledFeature$=this.featureToggles.get()}ngOnInit(){this.clientStatsConfig={dataset:[{backgroundColor:[this.cssHelper.propertyValue("chart-color-cyan"),this.cssHelper.propertyValue("chart-color-purple")]}]},this.rawCapacityChartConfig={dataset:[{backgroundColor:[this.cssHelper.propertyValue("chart-color-blue"),this.cssHelper.propertyValue("chart-color-gray")]}]},this.interval=this.refreshIntervalService.intervalData$.subscribe(()=>{this.getHealth()}),this.osdService.getOsdSettings().pipe((0,v.take)(1)).subscribe(n=>{this.osdSettings=n})}ngOnDestroy(){this.interval.unsubscribe()}getHealth(){this.healthService.getMinimalHealth().subscribe(n=>{this.healthData=n})}prepareReadWriteRatio(n){const t=[],o=[],s=this.healthData.client_perf.write_op_per_sec+this.healthData.client_perf.read_op_per_sec;t.push(`${$localize`Reads`}: ${this.dimless.transform(this.healthData.client_perf.read_op_per_sec)} ${$localize`/s`}`),o.push(this.calcPercentage(this.healthData.client_perf.read_op_per_sec,s)),t.push(`${$localize`Writes`}: ${this.dimless.transform(this.healthData.client_perf.write_op_per_sec)} ${$localize`/s`}`),o.push(this.calcPercentage(this.healthData.client_perf.write_op_per_sec,s)),n.labels=t,n.dataset[0].data=o,n.dataset[0].label=`${this.dimless.transform(s)}\n${$localize`IOPS`}`}prepareClientThroughput(n){const t=[],o=[],s=this.healthData.client_perf.read_bytes_sec+this.healthData.client_perf.write_bytes_sec;t.push(`${$localize`Reads`}: ${this.dimlessBinary.transform(this.healthData.client_perf.read_bytes_sec)}${$localize`/s`}`),o.push(this.calcPercentage(this.healthData.client_perf.read_bytes_sec,s)),t.push(`${$localize`Writes`}: ${this.dimlessBinary.transform(this.healthData.client_perf.write_bytes_sec)}${$localize`/s`}`),o.push(this.calcPercentage(this.healthData.client_perf.write_bytes_sec,s)),n.labels=t,n.dataset[0].data=o,n.dataset[0].label=`${this.dimlessBinary.transform(s).replace(" ","\n")}${$localize`/s`}`}prepareRawUsage(n,t){const o=this.calcPercentage(t.df.stats.total_bytes-t.df.stats.total_used_raw_bytes,t.df.stats.total_bytes),s=this.calcPercentage(t.df.stats.total_used_raw_bytes,t.df.stats.total_bytes),d=this.osdSettings.nearfull_ratio,h=this.osdSettings.nearfull_ratio;this.color=d>=0&&s/100>=d?"chart-color-red":h>=0&&s/100>=h?"chart-color-yellow":"chart-color-blue",this.rawCapacityChartConfig.dataset[0].backgroundColor[0]=this.cssHelper.propertyValue(this.color),n.dataset[0].data=[s,o],n.labels=[`${$localize`Used`}: ${this.dimlessBinary.transform(t.df.stats.total_used_raw_bytes)}`,`${$localize`Avail.`}: ${this.dimlessBinary.transform(t.df.stats.total_bytes-t.df.stats.total_used_raw_bytes)}`],n.dataset[0].label=`${s}%\nof ${this.dimlessBinary.transform(t.df.stats.total_bytes)}`}preparePgStatus(n,t){const o={};let s=0;p().forEach(t.pg_info.statuses,(d,h)=>{const I=this.pgCategoryService.getTypeByStates(h);p().isUndefined(o[I])&&(o[I]=0),o[I]+=d,s+=d});for(const d of this.pgCategoryService.getAllTypes())p().isUndefined(o[d])&&(o[d]=0);n.dataset[0].data=this.pgCategoryService.getAllTypes().map(d=>this.calcPercentage(o[d],s)),n.labels=[`${$localize`Clean`}: ${this.dimless.transform(o.clean)}`,`${$localize`Working`}: ${this.dimless.transform(o.working)}`,`${$localize`Warning`}: ${this.dimless.transform(o.warning)}`,`${$localize`Unknown`}: ${this.dimless.transform(o.unknown)}`],n.dataset[0].label=`${s}\n${$localize`PGs`}`}prepareObjects(n,t){const o=t.pg_info.object_stats.num_object_copies,s=o-t.pg_info.object_stats.num_objects_misplaced-t.pg_info.object_stats.num_objects_degraded-t.pg_info.object_stats.num_objects_unfound,d=this.calcPercentage(s,o),h=this.calcPercentage(t.pg_info.object_stats.num_objects_misplaced,o),I=this.calcPercentage(t.pg_info.object_stats.num_objects_degraded,o),$=this.calcPercentage(t.pg_info.object_stats.num_objects_unfound,o);n.labels=[`${$localize`Healthy`}: ${d}%`,`${$localize`Misplaced`}: ${h}%`,`${$localize`Degraded`}: ${I}%`,`${$localize`Unfound`}: ${$}%`],n.dataset[0].data=[d,h,I,$],n.dataset[0].label=`${this.dimless.transform(t.pg_info.object_stats.num_objects)}\n${$localize`objects`}`}isClientReadWriteChartShowable(){return(this.healthData.client_perf.read_op_per_sec||0)+(this.healthData.client_perf.write_op_per_sec||0)>0}calcPercentage(n,t){return p().isNumber(n)&&p().isNumber(t)&&0!==t?Math.ceil(n/t*100*100)/100:0}static{this.\u0275fac=function(t){return new(t||js)(e.\u0275\u0275directiveInject(ue),e.\u0275\u0275directiveInject(Ct),e.\u0275\u0275directiveInject(c.v),e.\u0275\u0275directiveInject(Yl.v),e.\u0275\u0275directiveInject(vi.b),e.\u0275\u0275directiveInject(Mi.s),e.\u0275\u0275directiveInject(pt.l),e.\u0275\u0275directiveInject(Gt.u),e.\u0275\u0275directiveInject(fo._))}}static{this.\u0275cmp=e.\u0275\u0275defineComponent({type:js,selectors:[["cd-health"]],decls:2,vars:3,consts:()=>{let n,t,o,s,d,h,I,$,w,X,J,re,de,Me,ve,Se,$e,Te,ke,rt,mt;return n=$localize`:␟81b97b8ea996ad1e4f9fca8415021850214884b1␟5611592591303869712:Status`,t=$localize`:␟ce9dfdc6dccb28dc75a78c704e09dc18fb02dcfa␟7825570888384392250:Capacity`,o=$localize`:␟3cc9c2ae277393b3946b38c088dabff671b1ee1b␟1322586333669103999:Performance`,s=$localize`:␟73caac4265ea7314ff061e5a1d78a6361a6dd3b8␟6920224523921471777:Cluster Status`,d=$localize`:␟099b441d49333b3c6d30b36dc0a4763e64c78920␟4435206372750903836:Hosts`,h=$localize`:␟624f596cc3320f5e0a0d7c7346c364e5af9bdd8c␟5808753866335051996:Monitors`,I=$localize`:␟1a9183778f2c6473d7ccb080f651caa01faaf70c␟6024104799101504292:OSDs`,$=$localize`:␟c34287a0423968dac8a41463b80855a0ff789403␟410466951836488908:Managers`,w=$localize`:␟946ac5dea9921dc09d7b0a63b89535371f283b19␟1903142680384619113:Object Gateways`,X=$localize`:␟ff03fa5bcf37c4da46ad736c1f7d03f959e8ba9a␟7290157164080770321:Metadata Servers`,J=$localize`:␟d817609ba4993eba859409ab71e566168f4d5f5a␟6586588838044688448:iSCSI Gateways`,re=$localize`:␟88f383269db2d32cccee9e936fe549dccb9fdbf4␟1939212557812454069:Raw Capacity`,de=$localize`:␟afdb601c16162f2c798b16a2920955f1cc6a20aa␟7531602241051125940:Objects`,Me=$localize`:␟498a109c6e9e94f1966de01aa0326f7f0ac6fb52␟5232365108332422324:PG Status`,ve=$localize`:␟92899fa68e8ca108912163ff58edc8540e453787␟8231861638104479971:Pools`,Se=$localize`:␟c5f8a813f91a11af99132e4beafc136cfc13d73b␟506046765639867851:PGs per OSD`,$e=$localize`:␟32efd1c3f70e3c5244239de97a2cc95d98534a14␟432995555566140473:Client Read/Write`,Te=$localize`:␟52213660b2454d139ada3079a42ec6caf3c3c01e␟6224391446608458197:Client Throughput`,ke=$localize`:␟275485415092cbae3a9f3cbb786ebe283cacfdd5␟1283020143505912089:Recovery Throughput`,rt=$localize`:␟35416fcdf9cb33d2b299d3f2028c390454b55d02␟5322576343768853305:Scrubbing`,mt=$localize`:␟e10f112a3fbdf8010309035c0b0d556666336c4b␟7539315472519057940:${"\ufffd#3\ufffd"}:START_ITALIC_TEXT:${"\ufffd/#3\ufffd"}:CLOSE_ITALIC_TEXT: See ${"\ufffd#4\ufffd"}:START_LINK:Logs${"\ufffd/#4\ufffd"}:CLOSE_LINK: for more details. `,[["logsLink",""],mt,["class","container-fluid",4,"ngIf"],[1,"container-fluid"],["groupTitle",n,4,"ngIf"],["groupTitle",t,4,"ngIf"],["groupTitle",o,4,"ngIf"],["groupTitle",n],["cardTitle",s,"class","cd-status-card","contentClass","content-highlight",4,"ngIf"],["cardTitle",d,"link","/hosts","class","cd-status-card","contentClass","content-highlight",4,"ngIf"],["cardTitle",h,"link","/monitor","class","cd-status-card","contentClass","content-highlight",4,"ngIf"],["cardTitle",I,"link","/osd","class","cd-status-card","contentClass","content-highlight",4,"ngIf"],["cardTitle",$,"class","cd-status-card","contentClass","content-highlight",4,"ngIf"],["cardTitle",w,"link","/rgw/daemon","class","cd-status-card","contentClass","content-highlight",4,"ngIf"],["cardTitle",X,"class","cd-status-card",3,"contentClass",4,"ngIf"],["cardTitle",J,"link","/block/iscsi","class","cd-status-card","contentClass","content-highlight",4,"ngIf"],["cardTitle",s,"contentClass","content-highlight",1,"cd-status-card"],[4,"ngIf"],[3,"dropShadow","autoAlign"],["cdsToggletipButton",""],[1,"info-card-content-clickable",3,"ngStyle"],["class","fa fa-exclamation-triangle",4,"ngIf"],["cdsToggletipContent",""],[1,"cds--popover-scroll-container"],[3,"healthData"],[1,"fa","fa-exclamation-triangle"],[3,"ngStyle"],["cardTitle",d,"link","/hosts","contentClass","content-highlight",1,"cd-status-card"],["cardTitle",h,"link","/monitor","contentClass","content-highlight",1,"cd-status-card"],["cardTitle",I,"link","/osd","contentClass","content-highlight",1,"cd-status-card"],[3,"ngClass",4,"ngFor","ngForOf"],[3,"ngClass"],["cardTitle",$,"contentClass","content-highlight",1,"cd-status-card"],[3,"ngClass","title",4,"ngFor","ngForOf"],[3,"ngClass","title"],["cardTitle",w,"link","/rgw/daemon","contentClass","content-highlight",1,"cd-status-card"],["cardTitle",X,1,"cd-status-card",3,"contentClass"],["cardTitle",J,"link","/block/iscsi","contentClass","content-highlight",1,"cd-status-card"],[1,"card-text-line-break"],["groupTitle",t],["cardTitle",re,"class","cd-capacity-card cd-chart-card","contentClass","content-chart",4,"ngIf"],["cardTitle",de,"class","cd-capacity-card cd-chart-card","contentClass","content-chart",4,"ngIf"],["cardTitle",Me,"class","cd-capacity-card cd-chart-card","contentClass","content-chart",4,"ngIf"],["cardTitle",ve,"link","/pool","class","cd-capacity-card","contentClass","content-highlight",4,"ngIf"],["cardTitle",Se,"class","cd-capacity-card","contentClass","content-highlight",4,"ngIf"],["cardTitle",re,"contentClass","content-chart",1,"cd-capacity-card","cd-chart-card"],[3,"prepareFn","data","config","isBytesData"],["cardTitle",de,"contentClass","content-chart",1,"cd-capacity-card","cd-chart-card"],[3,"prepareFn","data"],["cardTitle",Me,"contentClass","content-chart",1,"cd-capacity-card","cd-chart-card"],["cdsPopover","","placement","bottom",1,"pg-status-popover-wrapper",3,"dropShadow"],[1,"popover-trigger"],[3,"prepareFn","data","config"],[4,"ngTemplateOutlet"],[4,"ngFor","ngForOf"],["cardTitle",ve,"link","/pool","contentClass","content-highlight",1,"cd-capacity-card"],["cardTitle",Se,"contentClass","content-highlight",1,"cd-capacity-card"],["groupTitle",o],["cardTitle",$e,"class","cd-performance-card cd-chart-card","contentClass","content-chart",4,"ngIf"],["cardTitle",Te,"class","cd-performance-card cd-chart-card","contentClass","content-chart",4,"ngIf"],["cardTitle",ke,"class","cd-performance-card","contentClass","content-highlight",4,"ngIf"],["cardTitle",rt,"class","cd-performance-card","contentClass","content-highlight",4,"ngIf"],["cardTitle",$e,"contentClass","content-chart",1,"cd-performance-card","cd-chart-card"],["cardTitle",Te,"contentClass","content-chart",1,"cd-performance-card","cd-chart-card"],["cardTitle",ke,"contentClass","content-highlight",1,"cd-performance-card"],["cardTitle",rt,"contentClass","content-highlight",1,"cd-performance-card"],[1,"logs-link"],["routerLink","/logs"]]},template:function(t,o){1&t&&(e.\u0275\u0275template(0,BF,6,3,"div",2),e.\u0275\u0275pipe(1,"async")),2&t&&e.\u0275\u0275property("ngIf",e.\u0275\u0275pipeBind1(1,1,o.healthData&&o.enabledFeature$))},dependencies:[wo,l.NgClass,l.NgForOf,l.NgIf,l.NgTemplateOutlet,l.NgStyle,u.RouterLink,D.Toggletip,D.ToggletipButton,D.ToggletipContent,ws,Gs,Hs,l.AsyncPipe,l.UpperCasePipe,l.KeyValuePipe,pt.l,Eo,Pi,Gt.u,Bs,zs,Xs,ks],styles:['cd-info-card[_ngcontent-%COMP%]{padding:0 .5vw}  cd-health .pg-status-popover-wrapper{position:relative}  cd-health .pg-status-popover-wrapper .popover{max-height:20vh;max-width:unset!important;min-width:unset!important;position:absolute;width:116%}  cd-health .pg-status-popover-wrapper .popover .popover-body{font-size:1rem;max-height:19vh;max-width:100%}.logs-link[_ngcontent-%COMP%]{text-align:center}.logs-link[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{color:#25828e}.card-text-error[_ngcontent-%COMP%]{color:#c9190b;display:inline}.card-text-line-break[_ngcontent-%COMP%]:after{content:"\\a";white-space:pre}.popover-info[_ngcontent-%COMP%]:hover{cursor:pointer}']})}}function zF(i,n){1&i&&(e.\u0275\u0275elementContainerStart(0,4),e.\u0275\u0275element(1,"cd-refresh-selector")(2,"cd-health",5),e.\u0275\u0275elementContainerEnd())}function XF(i,n){1&i&&e.\u0275\u0275element(0,"cd-dashboard-v3")}class Ws{constructor(n){this.featureToggles=n,this.enabledFeature$=this.featureToggles.get()}static{this.\u0275fac=function(t){return new(t||Ws)(e.\u0275\u0275directiveInject(vi.b))}}static{this.\u0275cmp=e.\u0275\u0275defineComponent({type:Ws,selectors:[["cd-dashboard"]],decls:7,vars:4,consts:[["dashboardV3",""],["aria-label","Dashboard"],["href","#main",1,"sr-only"],["class","main-padding",4,"ngIf","ngIfElse"],[1,"main-padding"],["id","main"]],template:function(t,o){if(1&t&&(e.\u0275\u0275elementStart(0,"main",1)(1,"a",2),e.\u0275\u0275text(2,"skip to content"),e.\u0275\u0275elementEnd(),e.\u0275\u0275template(3,zF,3,0,"ng-container",3),e.\u0275\u0275pipe(4,"async"),e.\u0275\u0275template(5,XF,1,0,"ng-template",null,0,e.\u0275\u0275templateRefExtractor),e.\u0275\u0275elementEnd()),2&t){let s;const d=e.\u0275\u0275reference(6);e.\u0275\u0275advance(3),e.\u0275\u0275property("ngIf",!1===(null==(s=e.\u0275\u0275pipeBind1(4,2,o.enabledFeature$))?null:s.dashboard))("ngIfElse",d)}},dependencies:[l.NgIf,ys,Us,js,l.AsyncPipe],styles:["main[_ngcontent-%COMP%]:has(cd-health){padding-top:20px}"]})}}var El=r(80299);class bi{static{this.defaultFromLink="/hosts"}constructor(n){this.route=n,this.route.queryParams.subscribe(t=>{this.fromLink=t.fromLink||bi.defaultFromLink}),this.route.params.subscribe(t=>{this.serviceId=decodeURIComponent(t.id),this.serviceType=t.type})}static{this.\u0275fac=function(t){return new(t||bi)(e.\u0275\u0275directiveInject(u.ActivatedRoute))}}static{this.\u0275cmp=e.\u0275\u0275defineComponent({type:bi,selectors:[["cd-performance-counter"]],decls:3,vars:4,consts:[[3,"serviceType","serviceId"]],template:function(t,o){1&t&&(e.\u0275\u0275elementStart(0,"legend"),e.\u0275\u0275text(1),e.\u0275\u0275elementEnd(),e.\u0275\u0275element(2,"cd-table-performance-counter",0)),2&t&&(e.\u0275\u0275advance(),e.\u0275\u0275textInterpolate2("",o.serviceType,".",o.serviceId,""),e.\u0275\u0275advance(),e.\u0275\u0275property("serviceType",o.serviceType)("serviceId",o.serviceId))},dependencies:[jl.Y]})}}var gl=r(42902),Cl=r(36719),e_=r(76857);function kF(i,n){1&i&&(e.\u0275\u0275elementStart(0,"span",35),e.\u0275\u0275i18n(1,5),e.\u0275\u0275elementEnd())}function jF(i,n){1&i&&(e.\u0275\u0275elementStart(0,"span",35),e.\u0275\u0275i18n(1,6),e.\u0275\u0275elementEnd())}function WF(i,n){if(1&i&&e.\u0275\u0275element(0,"cd-helper",36),2&i){const t=e.\u0275\u0275nextContext();e.\u0275\u0275propertyInterpolate("html",t.passwordPolicyHelpText)}}function KF(i,n){1&i&&(e.\u0275\u0275elementStart(0,"span",35),e.\u0275\u0275i18n(1,7),e.\u0275\u0275elementEnd())}function QF(i,n){1&i&&(e.\u0275\u0275elementStart(0,"span",35),e.\u0275\u0275i18n(1,8),e.\u0275\u0275elementEnd())}function YF(i,n){if(1&i&&(e.\u0275\u0275elementStart(0,"span",35),e.\u0275\u0275text(1),e.\u0275\u0275elementEnd()),2&i){const t=e.\u0275\u0275nextContext();e.\u0275\u0275advance(),e.\u0275\u0275textInterpolate1(" ",t.passwordValuation," ")}}function JF(i,n){1&i&&(e.\u0275\u0275elementStart(0,"span",35),e.\u0275\u0275i18n(1,9),e.\u0275\u0275elementEnd())}function ZF(i,n){1&i&&(e.\u0275\u0275elementStart(0,"span",35),e.\u0275\u0275i18n(1,10),e.\u0275\u0275elementEnd())}class Ni{constructor(n,t,o,s,d,h,I){this.actionLabels=n,this.notificationService=t,this.userService=o,this.authStorageService=s,this.formBuilder=d,this.router=h,this.passwordPolicyService=I,this.passwordPolicyHelpText="",this.icons=g.FI,this.action=this.actionLabels.CHANGE,this.resource=$localize`password`,this.createForm()}createForm(){this.passwordPolicyService.getHelpText().subscribe(n=>{this.passwordPolicyHelpText=n}),this.userForm=this.formBuilder.group({oldpassword:[null,[C.Validators.required,pe.xQ.custom("notmatch",()=>this.userForm&&this.userForm.getValue("newpassword")===this.userForm.getValue("oldpassword"))]],newpassword:[null,[C.Validators.required,pe.xQ.custom("notmatch",()=>this.userForm&&this.userForm.getValue("oldpassword")===this.userForm.getValue("newpassword"))],[pe.xQ.passwordPolicy(this.userService,()=>this.authStorageService.getUsername(),(n,t,o)=>{this.passwordStrengthLevelClass=this.passwordPolicyService.mapCreditsToCssClass(t),this.passwordValuation=p().defaultTo(o,"")})]],confirmnewpassword:[null,[C.Validators.required]]},{validators:[pe.xQ.match("newpassword","confirmnewpassword")]})}onSubmit(){if(this.userForm.pristine)return;const n=this.authStorageService.getUsername(),t=this.userForm.getValue("oldpassword"),o=this.userForm.getValue("newpassword");this.userService.changePassword(n,t,o).subscribe(()=>this.onPasswordChange(),()=>{this.userForm.setErrors({cdSubmitButton:!0})})}onPasswordChange(){this.notificationService.show(Ae._.success,$localize`Updated user password"`),this.router.navigate(["/login"])}static{this.\u0275fac=function(t){return new(t||Ni)(e.\u0275\u0275directiveInject(m.Ss),e.\u0275\u0275directiveInject(Q.J),e.\u0275\u0275directiveInject(Cl.D),e.\u0275\u0275directiveInject(c.v),e.\u0275\u0275directiveInject(Dt.$),e.\u0275\u0275directiveInject(u.Router),e.\u0275\u0275directiveInject(e_.$))}}static{this.\u0275cmp=e.\u0275\u0275defineComponent({type:Ni,selectors:[["cd-user-password-form"]],decls:45,vars:25,consts:()=>{let n,t,o,s,d,h,I,$,w,X;return n=$localize`:form title␟fb127ea03835b3230f0ed981c7080e2ccb879621␟3346778808274133574:${"\ufffd0\ufffd"}:INTERPOLATION: ${"\ufffd1\ufffd"}:INTERPOLATION_1:`,t=$localize`:␟0eb15f32b2b92d7f3103ef3ff032621888a8dc32␟1098197662533219874:Old password`,o=$localize`:␟e70e209561583f360b1e9cefd2cbb1fe434b6229␟3588415639242079458:New password`,s=$localize`:␟ede41f01c781b168a783cfcefc6fb67d48780d9b␟8656126574213649581:Confirm new password`,d=$localize`:␟7cbdabcece469fab89cfa687ab152bca18b97498␟1417693714872528491:This field is required.`,h=$localize`:␟1cf42e491adc166a337a960eb84d03c0c3f677c8␟375290007173071549:The old and new passwords must be different.`,I=$localize`:␟7cbdabcece469fab89cfa687ab152bca18b97498␟1417693714872528491:This field is required.`,$=$localize`:␟1cf42e491adc166a337a960eb84d03c0c3f677c8␟375290007173071549:The old and new passwords must be different.`,w=$localize`:␟7cbdabcece469fab89cfa687ab152bca18b97498␟1417693714872528491:This field is required.`,X=$localize`:␟90163a3d3746819aef42e829f4446331232f3b66␟4031281862997212020:Password confirmation doesn't match the new password.`,[["frm","ngForm"],n,t,o,s,d,h,I,$,w,X,[1,"cd-col-form"],["novalidate","",3,"formGroup"],[1,"card"],[1,"card-header"],[1,"card-body"],[1,"form-group","row"],["for","oldpassword",1,"cd-col-form-label","required"],[1,"cd-col-form-input"],[1,"input-group"],["type","password","placeholder","Old password...","id","oldpassword","formControlName","oldpassword","autocomplete","new-password","autofocus","",1,"form-control"],["cdPasswordButton","oldpassword",1,"btn","btn-light"],["class","invalid-feedback",4,"ngIf"],["for","newpassword",1,"cd-col-form-label"],[1,"required"],["class","text-pre-wrap",3,"html",4,"ngIf"],["type","password","placeholder","Password...","id","newpassword","autocomplete","new-password","formControlName","newpassword",1,"form-control"],["type","button","cdPasswordButton","newpassword",1,"btn","btn-light"],[1,"password-strength-level"],["data-toggle","tooltip",3,"title"],["for","confirmnewpassword",1,"cd-col-form-label","required"],["type","password","autocomplete","new-password","placeholder","Confirm new password...","id","confirmnewpassword","formControlName","confirmnewpassword",1,"form-control"],["cdPasswordButton","confirmnewpassword",1,"btn","btn-light"],[1,"card-footer"],["wrappingClass","text-right",3,"submitActionEvent","form","submitText"],[1,"invalid-feedback"],[1,"text-pre-wrap",3,"html"]]},template:function(t,o){if(1&t){const s=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"div",11)(1,"form",12,0)(3,"div",13)(4,"div",14),e.\u0275\u0275i18n(5,1),e.\u0275\u0275pipe(6,"titlecase"),e.\u0275\u0275pipe(7,"upperFirst"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(8,"div",15)(9,"div",16)(10,"label",17),e.\u0275\u0275i18n(11,2),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(12,"div",18)(13,"div",19),e.\u0275\u0275element(14,"input",20)(15,"button",21),e.\u0275\u0275elementEnd(),e.\u0275\u0275template(16,kF,2,0,"span",22)(17,jF,2,0,"span",22),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(18,"div",16)(19,"label",23)(20,"span",24),e.\u0275\u0275i18n(21,3),e.\u0275\u0275elementEnd(),e.\u0275\u0275template(22,WF,1,1,"cd-helper",25),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(23,"div",18)(24,"div",19),e.\u0275\u0275element(25,"input",26)(26,"button",27),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(27,"div",28),e.\u0275\u0275element(28,"div",29),e.\u0275\u0275elementEnd(),e.\u0275\u0275template(29,KF,2,0,"span",22)(30,QF,2,0,"span",22)(31,YF,2,1,"span",22),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(32,"div",16)(33,"label",30),e.\u0275\u0275i18n(34,4),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(35,"div",18)(36,"div",19),e.\u0275\u0275element(37,"input",31)(38,"button",32),e.\u0275\u0275elementEnd(),e.\u0275\u0275template(39,JF,2,0,"span",22)(40,ZF,2,0,"span",22),e.\u0275\u0275elementEnd()()(),e.\u0275\u0275elementStart(41,"div",33)(42,"cd-form-button-panel",34),e.\u0275\u0275pipe(43,"titlecase"),e.\u0275\u0275pipe(44,"upperFirst"),e.\u0275\u0275listener("submitActionEvent",function(){return e.\u0275\u0275restoreView(s),e.\u0275\u0275resetView(o.onSubmit())}),e.\u0275\u0275elementEnd()()()()()}if(2&t){const s=e.\u0275\u0275reference(2);e.\u0275\u0275advance(),e.\u0275\u0275property("formGroup",o.userForm),e.\u0275\u0275advance(6),e.\u0275\u0275i18nExp(e.\u0275\u0275pipeBind1(6,17,o.action))(e.\u0275\u0275pipeBind1(7,19,o.resource)),e.\u0275\u0275i18nApply(5),e.\u0275\u0275advance(9),e.\u0275\u0275property("ngIf",o.userForm.showError("oldpassword",s,"required")),e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf",o.userForm.showError("oldpassword",s,"notmatch")),e.\u0275\u0275advance(5),e.\u0275\u0275property("ngIf",o.passwordPolicyHelpText.length>0),e.\u0275\u0275advance(6),e.\u0275\u0275classMap(o.passwordStrengthLevelClass),e.\u0275\u0275propertyInterpolate("title",o.passwordValuation),e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf",o.userForm.showError("newpassword",s,"required")),e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf",o.userForm.showError("newpassword",s,"notmatch")),e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf",o.userForm.showError("newpassword",s,"passwordPolicy")),e.\u0275\u0275advance(8),e.\u0275\u0275property("ngIf",o.userForm.showError("confirmnewpassword",s,"required")),e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf",o.userForm.showError("confirmnewpassword",s,"match")),e.\u0275\u0275advance(2),e.\u0275\u0275property("form",o.userForm)("submitText",e.\u0275\u0275pipeBind1(43,21,o.action)+" "+e.\u0275\u0275pipeBind1(44,23,o.resource))}},dependencies:[l.NgIf,C.\u0275NgNoValidate,C.DefaultValueAccessor,C.NgControlStatus,C.NgControlStatusGroup,C.FormGroupDirective,C.FormControlName,y.m,oe.e,ct.B,ri.h,Ge.S,we.a,Ve.C,ze.E,l.TitleCasePipe,Pe.r],styles:["#oldpassword.is-valid[_ngcontent-%COMP%]{background-image:unset;border-color:#ced4da}"]})}}function qF(i,n){1&i&&(e.\u0275\u0275elementStart(0,"span",22),e.\u0275\u0275i18n(1,3),e.\u0275\u0275elementEnd())}function e0(i,n){1&i&&(e.\u0275\u0275elementStart(0,"span",22),e.\u0275\u0275i18n(1,4),e.\u0275\u0275elementEnd())}function t0(i,n){1&i&&(e.\u0275\u0275elementStart(0,"span",22),e.\u0275\u0275i18n(1,5),e.\u0275\u0275elementEnd())}function n0(i,n){1&i&&(e.\u0275\u0275elementStart(0,"span",22),e.\u0275\u0275i18n(1,6),e.\u0275\u0275elementEnd())}function o0(i,n){if(1&i&&(e.\u0275\u0275elementStart(0,"span",22),e.\u0275\u0275text(1),e.\u0275\u0275elementEnd()),2&i){const t=e.\u0275\u0275nextContext();e.\u0275\u0275advance(),e.\u0275\u0275textInterpolate1(" ",t.passwordValuation," ")}}function i0(i,n){1&i&&(e.\u0275\u0275elementStart(0,"span",22),e.\u0275\u0275i18n(1,7),e.\u0275\u0275elementEnd())}function a0(i,n){1&i&&(e.\u0275\u0275elementStart(0,"span",22),e.\u0275\u0275i18n(1,8),e.\u0275\u0275elementEnd())}class Ks extends Ni{constructor(n,t,o,s,d,h,I,$){super(n,t,o,s,d,h,I),this.actionLabels=n,this.notificationService=t,this.userService=o,this.authStorageService=s,this.formBuilder=d,this.router=h,this.passwordPolicyService=I,this.authService=$}onPasswordChange(){this.authService.logout()}onCancel(){this.authService.logout()}static{this.\u0275fac=function(t){return new(t||Ks)(e.\u0275\u0275directiveInject(m.Ss),e.\u0275\u0275directiveInject(Q.J),e.\u0275\u0275directiveInject(Cl.D),e.\u0275\u0275directiveInject(c.v),e.\u0275\u0275directiveInject(Dt.$),e.\u0275\u0275directiveInject(u.Router),e.\u0275\u0275directiveInject(e_.$),e.\u0275\u0275directiveInject(gl.u))}}static{this.\u0275cmp=e.\u0275\u0275defineComponent({type:Ks,selectors:[["cd-login-password-form"]],features:[e.\u0275\u0275InheritDefinitionFeature],decls:31,vars:19,consts:()=>{let n,t,o,s,d,h,I,$;return n=$localize`:␟d06ae77f9ec46a4cdd49e7e76c73a411aaf2ee38␟4121268730818319434:Please set a new password.`,t=$localize`:␟8b5b3566e88438f51bd5f6caf6c090ed565ba5ed␟5496405262759480684:You will be redirected to the login page afterwards.`,o=$localize`:␟7cbdabcece469fab89cfa687ab152bca18b97498␟1417693714872528491:This field is required.`,s=$localize`:␟1cf42e491adc166a337a960eb84d03c0c3f677c8␟375290007173071549:The old and new passwords must be different.`,d=$localize`:␟7cbdabcece469fab89cfa687ab152bca18b97498␟1417693714872528491:This field is required.`,h=$localize`:␟1cf42e491adc166a337a960eb84d03c0c3f677c8␟375290007173071549:The old and new passwords must be different.`,I=$localize`:␟7cbdabcece469fab89cfa687ab152bca18b97498␟1417693714872528491:This field is required.`,$=$localize`:␟90163a3d3746819aef42e829f4446331232f3b66␟4031281862997212020:Password confirmation doesn't match the new password.`,[["frm","ngForm"],n,t,o,s,d,h,I,$,["novalidate","",3,"formGroup"],[1,"form-group","has-feedback"],[1,"input-group"],["type","password","placeholder","Old password...","id","oldpassword","formControlName","oldpassword","autocomplete","new-password","autofocus","",1,"form-control"],["cdPasswordButton","oldpassword",1,"btn","btn-outline-light","btn-password"],["class","invalid-feedback",4,"ngIf"],["type","password","placeholder","New password...","id","newpassword","autocomplete","new-password","formControlName","newpassword",1,"form-control"],["type","button","cdPasswordButton","newpassword",1,"btn","btn-outline-light","btn-password"],[1,"password-strength-level"],["data-toggle","tooltip",3,"title"],["type","password","autocomplete","new-password","placeholder","Confirm new password...","id","confirmnewpassword","formControlName","confirmnewpassword",1,"form-control"],["cdPasswordButton","confirmnewpassword",1,"btn","btn-outline-light","btn-password"],["wrappingClass","text-right",3,"submitActionEvent","backActionEvent","form","disabled","submitText"],[1,"invalid-feedback"]]},template:function(t,o){if(1&t){const s=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"div")(1,"h2"),e.\u0275\u0275i18n(2,1),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(3,"h4"),e.\u0275\u0275i18n(4,2),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(5,"form",9,0)(7,"div",10)(8,"div",11),e.\u0275\u0275element(9,"input",12)(10,"button",13),e.\u0275\u0275elementEnd(),e.\u0275\u0275template(11,qF,2,0,"span",14)(12,e0,2,0,"span",14),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(13,"div",10)(14,"div",11),e.\u0275\u0275element(15,"input",15)(16,"button",16),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(17,"div",17),e.\u0275\u0275element(18,"div",18),e.\u0275\u0275elementEnd(),e.\u0275\u0275template(19,t0,2,0,"span",14)(20,n0,2,0,"span",14)(21,o0,2,1,"span",14),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(22,"div",10)(23,"div",11),e.\u0275\u0275element(24,"input",19)(25,"button",20),e.\u0275\u0275elementEnd(),e.\u0275\u0275template(26,i0,2,0,"span",14)(27,a0,2,0,"span",14),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(28,"cd-form-button-panel",21),e.\u0275\u0275pipe(29,"titlecase"),e.\u0275\u0275pipe(30,"upperFirst"),e.\u0275\u0275listener("submitActionEvent",function(){return e.\u0275\u0275restoreView(s),e.\u0275\u0275resetView(o.onSubmit())})("backActionEvent",function(){return e.\u0275\u0275restoreView(s),e.\u0275\u0275resetView(o.onCancel())}),e.\u0275\u0275elementEnd()()()}if(2&t){const s=e.\u0275\u0275reference(6);e.\u0275\u0275advance(5),e.\u0275\u0275property("formGroup",o.userForm),e.\u0275\u0275advance(6),e.\u0275\u0275property("ngIf",o.userForm.showError("oldpassword",s,"required")),e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf",o.userForm.showError("oldpassword",s,"notmatch")),e.\u0275\u0275advance(6),e.\u0275\u0275classMap(o.passwordStrengthLevelClass),e.\u0275\u0275propertyInterpolate("title",o.passwordValuation),e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf",o.userForm.showError("newpassword",s,"required")),e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf",o.userForm.showError("newpassword",s,"notmatch")),e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf",o.userForm.showError("newpassword",s,"passwordPolicy")),e.\u0275\u0275advance(5),e.\u0275\u0275property("ngIf",o.userForm.showError("confirmnewpassword",s,"required")),e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf",o.userForm.showError("confirmnewpassword",s,"match")),e.\u0275\u0275advance(),e.\u0275\u0275property("form",o.userForm)("disabled",o.userForm.invalid)("submitText",e.\u0275\u0275pipeBind1(29,15,o.action)+" "+e.\u0275\u0275pipeBind1(30,17,o.resource))}},dependencies:[l.NgIf,C.\u0275NgNoValidate,C.DefaultValueAccessor,C.NgControlStatus,C.NgControlStatusGroup,C.FormGroupDirective,C.FormControlName,oe.e,ct.B,ri.h,Ge.S,we.a,Ve.C,ze.E,l.TitleCasePipe,Pe.r],styles:["cd-login-password-form h4{margin:0 0 30px}  cd-login-password-form .form-group{background-color:#2e373d;border-left:4px solid #fff}  cd-login-password-form .form-group:focus-within{border-left:4px solid #25828e}  cd-login-password-form .btn-password,   cd-login-password-form .btn-password:focus,   cd-login-password-form .form-control,   cd-login-password-form .form-control:focus{background-color:#2e373d;border:0;box-shadow:none;color:#f8f9fa;filter:none;outline:none}  cd-login-password-form .form-control::placeholder{color:#6c757d}  cd-login-password-form .btn-password:focus{outline-color:#25828e}  cd-login-password-form button.btn:not(:first-child){margin-left:5px}@keyframes _ngcontent-%COMP%_autofill{to{background-color:#2e373d;color:#f8f9fa}}input[_ngcontent-%COMP%]:-webkit-autofill{animation-fill-mode:both;animation-name:_ngcontent-%COMP%_autofill;border-radius:0;box-shadow:0 0 0 1000px #2e373d inset;-webkit-text-fill-color:#f8f9fa;-webkit-transition-property:none;transition-property:none}.invalid-feedback[_ngcontent-%COMP%]{padding-left:9px}.is-invalid.cd-form-control[_ngcontent-%COMP%]{border-color:transparent}#oldpassword.is-valid[_ngcontent-%COMP%]{background-image:unset;border-color:transparent}"]})}}class s0{}function r0(i,n){1&i&&(e.\u0275\u0275elementStart(0,"div",23),e.\u0275\u0275i18n(1,5),e.\u0275\u0275elementEnd())}function l0(i,n){1&i&&(e.\u0275\u0275elementStart(0,"div",23),e.\u0275\u0275i18n(1,6),e.\u0275\u0275elementEnd())}function _0(i,n){if(1&i){const t=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"div",8)(1,"h1",9),e.\u0275\u0275text(2,"Ceph login"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(3,"form",10,0),e.\u0275\u0275listener("ngSubmit",function(){e.\u0275\u0275restoreView(t);const s=e.\u0275\u0275nextContext();return e.\u0275\u0275resetView(s.login())}),e.\u0275\u0275elementStart(5,"div",11)(6,"label",12),e.\u0275\u0275i18n(7,3),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(8,"input",13,1),e.\u0275\u0275twoWayListener("ngModelChange",function(s){e.\u0275\u0275restoreView(t);const d=e.\u0275\u0275nextContext();return e.\u0275\u0275twoWayBindingSet(d.model.username,s)||(d.model.username=s),e.\u0275\u0275resetView(s)}),e.\u0275\u0275elementEnd(),e.\u0275\u0275template(10,r0,2,0,"div",14),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(11,"div",15)(12,"div",16)(13,"div",17)(14,"label",18),e.\u0275\u0275i18n(15,4),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(16,"input",19,2),e.\u0275\u0275twoWayListener("ngModelChange",function(s){e.\u0275\u0275restoreView(t);const d=e.\u0275\u0275nextContext();return e.\u0275\u0275twoWayBindingSet(d.model.password,s)||(d.model.password=s),e.\u0275\u0275resetView(s)}),e.\u0275\u0275elementEnd(),e.\u0275\u0275template(18,l0,2,0,"div",14),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(19,"span",20),e.\u0275\u0275element(20,"button",21),e.\u0275\u0275elementEnd()()(),e.\u0275\u0275element(21,"input",22),e.\u0275\u0275elementEnd()()}if(2&i){const t=e.\u0275\u0275reference(4),o=e.\u0275\u0275reference(9),s=e.\u0275\u0275reference(17),d=e.\u0275\u0275nextContext();e.\u0275\u0275advance(8),e.\u0275\u0275twoWayProperty("ngModel",d.model.username),e.\u0275\u0275attribute("aria-invalid",o.invalid),e.\u0275\u0275advance(2),e.\u0275\u0275property("ngIf",(t.submitted||o.dirty)&&o.invalid),e.\u0275\u0275advance(6),e.\u0275\u0275twoWayProperty("ngModel",d.model.password),e.\u0275\u0275attribute("aria-invalid",s.invalid),e.\u0275\u0275advance(2),e.\u0275\u0275property("ngIf",(t.submitted||s.dirty)&&s.invalid),e.\u0275\u0275advance(3),e.\u0275\u0275property("disabled",t.invalid)}}class Qs{constructor(n,t,o,s,d){this.authService=n,this.authStorageService=t,this.modalService=o,this.route=s,this.router=d,this.model=new s0,this.isLoginActive=!1,this.postInstalled=!1}ngOnInit(){if(this.authStorageService.isLoggedIn())this.router.navigate([""]);else{this.modalService.dismissAll();let n=null;if(-1!==window.location.hash.indexOf("access_token=")){n=window.location.hash.split("access_token=")[1];const t=window.location.toString();window.history.replaceState({},document.title,t.split("?")[0])}this.authService.check(n).subscribe(t=>{t.login_url?(this.postInstalled="POST_INSTALLED"===t.cluster_status,"#/login"===t.login_url?this.isLoginActive=!0:window.location.replace(t.login_url)):(this.authStorageService.set(t.username,t.permissions,t.sso,t.pwdExpirationDate),this.router.navigate([""]))})}}login(){localStorage.setItem("cluster_api_url",window.location.origin),this.authService.login(this.model).subscribe(()=>{const n=this.postInstalled?"/":"/expand-cluster";let t=p().get(this.route.snapshot.queryParams,"returnUrl",n);!this.postInstalled&&"/dashboard"===this.route.snapshot.queryParams.returnUrl&&(t="/expand-cluster"),"/expand-cluster"==t?this.router.navigate([t],{queryParams:{welcome:!0}}):this.router.navigate([t])})}static{this.\u0275fac=function(t){return new(t||Qs)(e.\u0275\u0275directiveInject(gl.u),e.\u0275\u0275directiveInject(c.v),e.\u0275\u0275directiveInject(Yt.B),e.\u0275\u0275directiveInject(u.ActivatedRoute),e.\u0275\u0275directiveInject(u.Router))}}static{this.\u0275cmp=e.\u0275\u0275defineComponent({type:Qs,selectors:[["cd-login"]],decls:1,vars:1,consts:()=>{let n,t,o,s,d;return n=$localize`:␟f093d9574ab746b231504bd2cbb65f04bd7b00db␟2336550011721758066:Log in`,t=$localize`:␟08c74dc9762957593b91f6eb5d65efdfc975bf48␟5248717555542428023:Username`,o=$localize`:␟c32ef07f8803a223a83ed17024b38e8d82292407␟1431416938026210429:Password`,s=$localize`:␟0070e83d11da39d6f4bb95065c2675db1610b419␟3702338872876040900:Username is required`,d=$localize`:␟1e20f8b8a4706526c9024cc2f39d568345d100dc␟205044832662301680:Password is required`,[["loginForm","ngForm"],["username","ngModel"],["password","ngModel"],t,o,s,d,["class","container",4,"ngIf"],[1,"container"],[1,"sr-only"],["name","loginForm","novalidate","",3,"ngSubmit"],[1,"form-group","has-feedback","d-flex","flex-column","py-3"],["for","username",1,"ps-3"],["id","username","name","username","type","text","aria-labelledby","username","required","","autofocus","",1,"form-control","ps-3",3,"ngModelChange","ngModel"],["class","invalid-feedback ps-3",4,"ngIf"],["id","password-div",1,"form-group","has-feedback"],[1,"input-group","d-flex","flex-nowrap"],[1,"d-flex","flex-column","flex-grow-1","py-3"],["for","password",1,"ps-3"],["id","password","name","password","type","password","aria-labelledby","password","required","",1,"form-control","ps-3",3,"ngModelChange","ngModel"],[1,"form-group-append"],["type","button","cdPasswordButton","password","aria-label","toggle-password",1,"btn","btn-outline-light","btn-password","h-100","px-4"],["type","submit","value",n,1,"btn","btn-accent","px-5","py-2",3,"disabled"],[1,"invalid-feedback","ps-3"]]},template:function(t,o){1&t&&e.\u0275\u0275template(0,_0,22,7,"div",7),2&t&&e.\u0275\u0275property("ngIf",o.isLoginActive)},dependencies:[l.NgIf,C.\u0275NgNoValidate,C.DefaultValueAccessor,C.NgControlStatus,C.NgControlStatusGroup,C.RequiredValidator,C.NgModel,C.NgForm,ct.B,ri.h,Ge.S,we.a,Ve.C],styles:["cd-login .form-group{background-color:#2e373d;border-left:4px solid #fff;height:auto;margin-bottom:2rem}  cd-login .form-group:focus-within{border-left:4px solid #25828e}  cd-login .btn-password,   cd-login .btn-password:focus,   cd-login .form-control,   cd-login .form-control:focus{background-color:#2e373d;border:0;box-shadow:none;color:#f8f9fa;filter:none;outline:none}  cd-login label{color:#adb5bd}  cd-login .btn-password:focus{outline-color:#25828e}@keyframes _ngcontent-%COMP%_autofill{to{background-color:#2e373d;color:#f8f9fa}}input[_ngcontent-%COMP%]:-webkit-autofill{animation-fill-mode:both;animation-name:_ngcontent-%COMP%_autofill;border-radius:0;box-shadow:0 0 0 1000px #2e373d inset;-webkit-text-fill-color:#f8f9fa;-webkit-transition-property:none;transition-property:none}"]})}}var t_=r(38996);function c0(i,n){if(1&i&&(e.\u0275\u0275elementStart(0,"h4",23),e.\u0275\u0275text(1),e.\u0275\u0275elementEnd()),2&i){const t=e.\u0275\u0275nextContext(2);e.\u0275\u0275advance(),e.\u0275\u0275textInterpolate(t.message)}}function d0(i,n){if(1&i&&(e.\u0275\u0275elementStart(0,"h4"),e.\u0275\u0275i18nStart(1,4),e.\u0275\u0275element(2,"a",24),e.\u0275\u0275i18nEnd(),e.\u0275\u0275elementEnd()),2&i){const t=e.\u0275\u0275nextContext(2);e.\u0275\u0275advance(2),e.\u0275\u0275propertyInterpolate("href",t.docUrl,e.\u0275\u0275sanitizeUrl),e.\u0275\u0275i18nExp(t.sectionInfo),e.\u0275\u0275i18nApply(1)}}function u0(i,n){if(1&i&&(e.\u0275\u0275elementStart(0,"div"),e.\u0275\u0275namespaceSVG(),e.\u0275\u0275element(1,"svg",19),e.\u0275\u0275namespaceHTML(),e.\u0275\u0275elementStart(2,"div",20)(3,"h3")(4,"b"),e.\u0275\u0275text(5),e.\u0275\u0275elementEnd()(),e.\u0275\u0275template(6,c0,2,1,"h4",21)(7,d0,3,2,"h4",22),e.\u0275\u0275elementEnd()()),2&i){const t=e.\u0275\u0275nextContext();e.\u0275\u0275advance(),e.\u0275\u0275property("cdsIcon",t.icon),e.\u0275\u0275advance(4),e.\u0275\u0275textInterpolate(t.header),e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf",t.header!==t.message),e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf",t.section)}}function p0(i,n){if(1&i&&(e.\u0275\u0275elementStart(0,"button",28),e.\u0275\u0275i18n(1,5),e.\u0275\u0275elementEnd()),2&i){const t=e.\u0275\u0275nextContext(2);e.\u0275\u0275property("routerLink",t.buttonRoute),e.\u0275\u0275advance(),e.\u0275\u0275i18nExp(t.buttonName),e.\u0275\u0275i18nApply(1)}}function m0(i,n){if(1&i&&(e.\u0275\u0275elementStart(0,"button",29),e.\u0275\u0275i18n(1,6),e.\u0275\u0275elementEnd()),2&i){const t=e.\u0275\u0275nextContext(2);e.\u0275\u0275property("routerLink",t.secondaryButtonRoute),e.\u0275\u0275advance(),e.\u0275\u0275i18nExp(t.secondaryButtonName),e.\u0275\u0275i18nApply(1)}}function f0(i,n){if(1&i&&(e.\u0275\u0275elementStart(0,"div",25),e.\u0275\u0275template(1,p0,2,2,"button",26)(2,m0,2,2,"button",27),e.\u0275\u0275elementEnd()),2&i){const t=e.\u0275\u0275nextContext(),o=e.\u0275\u0275reference(11);e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf",!t.uiConfig)("ngIfElse",o),e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf",t.secondaryButtonName&&t.secondaryButtonRoute)}}function E0(i,n){if(1&i){const t=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"button",31),e.\u0275\u0275listener("click",function(){e.\u0275\u0275restoreView(t);const s=e.\u0275\u0275nextContext(2);return e.\u0275\u0275resetView(s.doConfigure())}),e.\u0275\u0275i18n(1,7),e.\u0275\u0275elementEnd()}if(2&i){const t=e.\u0275\u0275nextContext(2);e.\u0275\u0275attribute("title",t.buttonTitle),e.\u0275\u0275advance(),e.\u0275\u0275i18nExp(t.buttonName),e.\u0275\u0275i18nApply(1)}}function g0(i,n){if(1&i&&e.\u0275\u0275template(0,E0,2,2,"button",30),2&i){const t=e.\u0275\u0275nextContext();e.\u0275\u0275property("ngIf",t.uiConfig)}}function C0(i,n){1&i&&(e.\u0275\u0275element(0,"i",32),e.\u0275\u0275elementStart(1,"div",20)(2,"h3"),e.\u0275\u0275i18nStart(3,8),e.\u0275\u0275element(4,"b"),e.\u0275\u0275i18nEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(5,"h4",17),e.\u0275\u0275i18n(6,9),e.\u0275\u0275elementEnd()())}function S0(i,n){1&i&&(e.\u0275\u0275elementStart(0,"div",20)(1,"button",34),e.\u0275\u0275i18n(2,10),e.\u0275\u0275elementEnd()()),2&i&&(e.\u0275\u0275advance(),e.\u0275\u0275property("routerLink","/dashboard"))}function h0(i,n){if(1&i&&e.\u0275\u0275template(0,S0,3,1,"div",33),2&i){const t=e.\u0275\u0275nextContext(),o=e.\u0275\u0275reference(17);e.\u0275\u0275property("ngIf",!t.module_name)("ngIfElse",o)}}function T0(i,n){if(1&i){const t=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"div",20)(1,"button",31),e.\u0275\u0275listener("click",function(){e.\u0275\u0275restoreView(t);const s=e.\u0275\u0275nextContext(2);return e.\u0275\u0275resetView(s.enableModule())}),e.\u0275\u0275i18n(2,11),e.\u0275\u0275pipe(3,"upperFirst"),e.\u0275\u0275elementEnd()()}if(2&i){const t=e.\u0275\u0275nextContext(2);e.\u0275\u0275advance(3),e.\u0275\u0275i18nExp(e.\u0275\u0275pipeBind1(3,1,t.module_name)),e.\u0275\u0275i18nApply(2)}}function F0(i,n){if(1&i&&e.\u0275\u0275template(0,T0,4,3,"div",35),2&i){const t=e.\u0275\u0275nextContext();e.\u0275\u0275property("ngIf",t.module_name&&!(t.buttonName&&t.buttonRoute))}}class Ys{constructor(n,t,o,s,d){this.router=n,this.docService=t,this.http=o,this.notificationService=s,this.mgrModuleService=d,this.icons=g.FI}ngOnInit(){this.fetchData(),this.routerSubscription=this.router.events.pipe((0,v.filter)(n=>n instanceof u.NavigationEnd)).subscribe(()=>{this.fetchData()})}doConfigure(){this.http.post(`ui-api/${this.uiApiPath}/configure`,{}).subscribe({next:()=>{this.notificationService.show(Ae._.info,`Configuring ${this.component}`)},error:n=>{this.notificationService.show(Ae._.error,n)},complete:()=>{setTimeout(()=>{this.router.navigate([this.uiApiPath]),this.notificationService.show(Ae._.success,`Configured ${this.component}`)},3e3)}})}unloadHandler(n){n.returnValue=!1}fetchData(){try{this.router.onSameUrlNavigation="reload",this.message=history.state.message,this.header=history.state.header,this.section=history.state.section,this.sectionInfo=history.state.section_info,this.icon=history.state.icon,this.source=history.state.source,this.uiConfig=history.state.uiConfig,this.uiApiPath=history.state.uiApiPath,this.buttonRoute=history.state.button_route,this.buttonName=history.state.button_name,this.buttonTitle=history.state.button_title,this.secondaryButtonRoute=history.state.secondary_button_route,this.secondaryButtonName=history.state.secondary_button_name,this.secondaryButtonTitle=history.state.secondary_button_title,this.module_name=history.state.module_name,this.navigateTo=history.state.navigate_to,this.component=history.state.component,this.docUrl=this.docService.urlGenerator(this.section)}catch{this.router.navigate(["/error"])}}ngOnDestroy(){this.routerSubscription&&this.routerSubscription.unsubscribe()}enableModule(){this.mgrModuleService.updateModuleState(this.module_name,!1,null,this.navigateTo)}static{this.\u0275fac=function(t){return new(t||Ys)(e.\u0275\u0275directiveInject(u.Router),e.\u0275\u0275directiveInject(t_.s),e.\u0275\u0275directiveInject(T.HttpClient),e.\u0275\u0275directiveInject(Q.J),e.\u0275\u0275directiveInject(Ln.a))}}static{this.\u0275cmp=e.\u0275\u0275defineComponent({type:Ys,selectors:[["cd-error"]],hostBindings:function(t,o){1&t&&e.\u0275\u0275listener("beforeunload",function(d){return o.unloadHandler(d)},!1,e.\u0275\u0275resolveWindow)},decls:18,vars:4,consts:()=>{let n,t,o,s,d,h,I,$;return n=$localize`:␟b15757073939841801fc3c3c839af1882829a9c4␟5570657156373972295:Please consult the ${"\ufffd#2\ufffd"}:START_LINK:documentation${"\ufffd/#2\ufffd"}:CLOSE_LINK: on how to configure and enable the ${"\ufffd0\ufffd"}:INTERPOLATION: management functionality. `,t=$localize`:␟be666bc5a0be8b856c17b898558aa5100d2ccbc2␟4023507003396591575:${"\ufffd0\ufffd"}:INTERPOLATION:`,o=$localize`:␟a774bdd01e5e4d2c5fc10de1e3f5b16b1d82e820␟4770993055380265810:${"\ufffd0\ufffd"}:INTERPOLATION:`,s=$localize`:␟be666bc5a0be8b856c17b898558aa5100d2ccbc2␟4023507003396591575:${"\ufffd0\ufffd"}:INTERPOLATION:`,d=$localize`:␟235c355afdcbf72953a15d7fc8d0d9e7a6619f46␟3677913959983517457:${"\ufffd#4\ufffd"}:START_BOLD_TEXT:Page not Found${"\ufffd/#4\ufffd"}:CLOSE_BOLD_TEXT:`,h=$localize`:␟c94fe6b6bb45c0ed0b0b71b9f5d49da4acb93b9e␟6939657640773799522:Sorry, we couldn’t find what you were looking for. The page you requested may have been changed or moved.`,I=$localize`:␟9d57ca7cab78c6f0d27e0d890cb8cf1515e4e30a␟7796668756144544818:Go To Dashboard`,$=$localize`:␟7b3eaae877071472c0b8fcfeb4e219da84d943eb␟3138693236773700941:Enable ${"\ufffd0\ufffd"}:INTERPOLATION: module`,[["configureButtonTpl",""],["elseBlock",""],["dashboardButton",""],["enableButton",""],n,t,o,s,d,h,I,$,["target","_blank"],[1,"container","h-75"],[1,"row","h-100","justify-content-center","align-items-center"],[1,"blank-page"],[4,"ngIf","ngIfElse"],[1,"mt-4"],["class","text-center",4,"ngIf","ngIfElse"],[1,"cds-info-color","cds-icon--size-10",3,"cdsIcon"],[1,"mt-4","text-center"],["class","mt-3",4,"ngIf"],[4,"ngIf"],[1,"mt-3"],[3,"href"],[1,"text-center"],["class","btn btn-primary ms-1",3,"routerLink",4,"ngIf","ngIfElse"],["class","btn btn-light ms-1",3,"routerLink",4,"ngIf"],[1,"btn","btn-primary","ms-1",3,"routerLink"],[1,"btn","btn-light","ms-1",3,"routerLink"],["class","btn btn-primary",3,"click",4,"ngIf"],[1,"btn","btn-primary",3,"click"],[1,"fa","fa-exclamation-triangle","mx-auto","d-block","text-danger"],["class","mt-4 text-center",4,"ngIf","ngIfElse"],[1,"btn","btn-primary",3,"routerLink"],["class","mt-4 text-center",4,"ngIf"]]},template:function(t,o){if(1&t&&(e.\u0275\u0275elementStart(0,"head")(1,"title"),e.\u0275\u0275text(2,"Error Page"),e.\u0275\u0275elementEnd(),e.\u0275\u0275element(3,"base",12),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(4,"div",13)(5,"div",14)(6,"div",15),e.\u0275\u0275template(7,u0,8,4,"div",16),e.\u0275\u0275elementStart(8,"div",17),e.\u0275\u0275template(9,f0,3,3,"div",18),e.\u0275\u0275elementEnd()()()(),e.\u0275\u0275template(10,g0,1,1,"ng-template",null,0,e.\u0275\u0275templateRefExtractor)(12,C0,7,0,"ng-template",null,1,e.\u0275\u0275templateRefExtractor)(14,h0,1,2,"ng-template",null,2,e.\u0275\u0275templateRefExtractor)(16,F0,1,1,"ng-template",null,3,e.\u0275\u0275templateRefExtractor)),2&t){const s=e.\u0275\u0275reference(13),d=e.\u0275\u0275reference(15);e.\u0275\u0275advance(7),e.\u0275\u0275property("ngIf",o.header&&o.message)("ngIfElse",s),e.\u0275\u0275advance(2),e.\u0275\u0275property("ngIf",o.buttonName&&o.buttonRoute||o.uiConfig)("ngIfElse",d)}},dependencies:[l.NgIf,u.RouterLink,Ge.S,Pe.r],styles:["h4[_ngcontent-%COMP%]{color:#495057}i[_ngcontent-%COMP%]{font-size:6em;margin-top:120px}.fa-lock[_ngcontent-%COMP%]{color:#dc3545}.fa-wrench[_ngcontent-%COMP%]{color:#25828e}"]})}}class Js{static{this.\u0275fac=function(t){return new(t||Js)}}static{this.\u0275cmp=e.\u0275\u0275defineComponent({type:Js,selectors:[["cd-blank-layout"]],decls:1,vars:0,template:function(t,o){1&t&&e.\u0275\u0275element(0,"router-outlet")},dependencies:[u.RouterOutlet]})}}var Zs,n_=r(45312);class Ii{constructor(n,t){this.http=n,this.localeId=t}getLocale(){return this.localeId||n_.c.default_lang}setLocale(n){document.cookie=`cd-lang=${n}`}getLanguages(){return this.http.get("ui-api/langs")}static{this.\u0275fac=function(t){return new(t||Ii)(e.\u0275\u0275inject(T.HttpClient),e.\u0275\u0275inject(e.LOCALE_ID))}}static{this.\u0275prov=e.\u0275\u0275defineInjectable({token:Ii,factory:Ii.\u0275fac,providedIn:"root"})}}function v0(i,n){if(1&i){const t=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementContainerStart(0),e.\u0275\u0275elementStart(1,"cds-header-item",2),e.\u0275\u0275listener("click",function(){const s=e.\u0275\u0275restoreView(t).$implicit,d=e.\u0275\u0275nextContext();return e.\u0275\u0275resetView(d.changeLanguage(s.key))}),e.\u0275\u0275text(2),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementContainerEnd()}if(2&i){const t=n.$implicit;e.\u0275\u0275advance(2),e.\u0275\u0275textInterpolate(t.value)}}!function(i){i.cs="\u010ce\u0161tina",i.de="Deutsch",i["en-US"]="English",i.es="Espa\xf1ol",i.fr="Fran\xe7ais",i.id="Bahasa Indonesia",i.it="Italiano",i.ja="\u65e5\u672c\u8a9e",i.ko="\ud55c\uad6d\uc5b4",i.pl="Polski",i.pt="Portugu\xeas (brasileiro)",i["zh-Hans"]="\u4e2d\u6587 (\u7b80\u4f53)",i["zh-Hant"]="\u4e2d\u6587 (\u7e41\u9ad4\uff09"}(Zs||(Zs={}));class Ai{constructor(n){this.languageService=n,this.allLanguages=Zs,this.supportedLanguages={}}ngOnInit(){this.selectedLanguage=this.languageService.getLocale(),this.languageService.getLanguages().subscribe(n=>{this.supportedLanguages=p().pick(Zs,n)})}reloadWindow(){window.location.reload()}changeLanguage(n){this.languageService.setLocale(n),this.reloadWindow()}static{this.\u0275fac=function(t){return new(t||Ai)(e.\u0275\u0275directiveInject(Ii))}}static{this.\u0275cmp=e.\u0275\u0275defineComponent({type:Ai,selectors:[["cd-language-selector"]],decls:3,vars:4,consts:[[3,"title"],[4,"ngFor","ngForOf"],[3,"click"]],template:function(t,o){1&t&&(e.\u0275\u0275elementStart(0,"cds-header-menu",0),e.\u0275\u0275template(1,v0,3,1,"ng-container",1),e.\u0275\u0275pipe(2,"keyvalue"),e.\u0275\u0275elementEnd()),2&t&&(e.\u0275\u0275property("title",o.allLanguages[o.selectedLanguage]),e.\u0275\u0275advance(),e.\u0275\u0275property("ngForOf",e.\u0275\u0275pipeBind1(2,2,o.supportedLanguages)))},dependencies:[l.NgForOf,D.HeaderItem,D.HeaderMenu,l.KeyValuePipe]})}}class Di{constructor(n){this.http=n,this.baseUiURL="ui-api/login/custom_banner"}getBannerText(){return this.http.get(this.baseUiURL)}static{this.\u0275fac=function(t){return new(t||Di)(e.\u0275\u0275inject(T.HttpClient))}}static{this.\u0275prov=e.\u0275\u0275defineInjectable({token:Di,factory:Di.\u0275fac,providedIn:"root"})}}function M0(i,n){if(1&i&&(e.\u0275\u0275elementStart(0,"p",1),e.\u0275\u0275text(1),e.\u0275\u0275elementEnd()),2&i){const t=n.ngIf;e.\u0275\u0275advance(),e.\u0275\u0275textInterpolate(t)}}class qs{constructor(n){this.customLoginBannerService=n}ngOnInit(){this.bannerText$=this.customLoginBannerService.getBannerText()}static{this.\u0275fac=function(t){return new(t||qs)(e.\u0275\u0275directiveInject(Di))}}static{this.\u0275cmp=e.\u0275\u0275defineComponent({type:qs,selectors:[["cd-custom-login-banner"]],decls:2,vars:3,consts:[["class","login-text",4,"ngIf"],[1,"login-text"]],template:function(t,o){1&t&&(e.\u0275\u0275template(0,M0,2,1,"p",0),e.\u0275\u0275pipe(1,"async")),2&t&&e.\u0275\u0275property("ngIf",e.\u0275\u0275pipeBind1(1,1,o.bannerText$))},dependencies:[l.NgIf,l.AsyncPipe],styles:[".login-text[_ngcontent-%COMP%]{font-weight:700;margin:0;padding:12px 20% 12px 12px}"]})}}function R0(i,n){if(1&i&&(e.\u0275\u0275elementStart(0,"li",12)(1,"cd-doc",13),e.\u0275\u0275i18nAttributes(2,0),e.\u0275\u0275elementEnd()()),2&i){const t=n.$implicit;e.\u0275\u0275advance(),e.\u0275\u0275propertyInterpolate("section",t.section),e.\u0275\u0275i18nExp(t.text),e.\u0275\u0275i18nApply(2)}}class er{constructor(){this.docItems=[{section:"help",text:$localize`Help`},{section:"security",text:$localize`Security`},{section:"trademarks",text:$localize`Trademarks`}]}static{this.\u0275fac=function(t){return new(t||er)}}static{this.\u0275cmp=e.\u0275\u0275defineComponent({type:er,selectors:[["cd-login-layout"]],decls:16,vars:1,consts:()=>{let n;return n=$localize`:␟f286db6ac9482dbf567bc491d49a6eade444895a␟8974677874811784530:${"\ufffd0\ufffd"}:INTERPOLATION:`,[["docText",n],[1,"login","full-height"],[1,"navbar","p-4"],[1,"navbar-brand"],[1,"form-inline"],[1,"container"],[1,"row","full-height"],[1,"col-sm-12","col-md-6","d-sm-block","login-form"],[1,"col-sm-12","col-md-6","d-sm-block","branding-info"],["src","assets/Ceph_Ceph_Logo_with_text_white.svg","alt","Ceph",1,"img-fluid","pb-3"],[1,"list-inline"],["class","list-inline-item p-3",4,"ngFor","ngForOf"],[1,"list-inline-item","p-3"],["noSubscribe","true",3,"section",6,"docText"]]},template:function(t,o){1&t&&(e.\u0275\u0275elementStart(0,"main",1)(1,"header")(2,"nav",2),e.\u0275\u0275element(3,"a",3),e.\u0275\u0275elementStart(4,"div",4),e.\u0275\u0275element(5,"cd-language-selector"),e.\u0275\u0275elementEnd()()(),e.\u0275\u0275elementStart(6,"section")(7,"div",5)(8,"div",6)(9,"div",7),e.\u0275\u0275element(10,"router-outlet"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(11,"div",8),e.\u0275\u0275element(12,"img",9),e.\u0275\u0275elementStart(13,"ul",10),e.\u0275\u0275template(14,R0,3,2,"li",11),e.\u0275\u0275elementEnd(),e.\u0275\u0275element(15,"cd-custom-login-banner"),e.\u0275\u0275elementEnd()()()()()),2&t&&(e.\u0275\u0275advance(14),e.\u0275\u0275property("ngForOf",o.docItems))},dependencies:[l.NgForOf,u.RouterOutlet,Ai,Ao.C,qs],styles:["cd-login-layout .login{background-color:#374249;background-image:url(ceph_background.gif);background-position:right bottom;background-repeat:no-repeat;color:#f8f9fa}  cd-login-layout .login header{position:absolute;width:100vw}  cd-login-layout .login header .navbar .dropdown-menu{margin-top:.2rem}  cd-login-layout .login header .navbar .dropdown-menu li a:hover{background-color:#25828e}  cd-login-layout .login section{display:inline-flex;min-height:100vh;width:100vw}  cd-login-layout .login .list-inline{margin-bottom:0;margin-left:17%}  cd-login-layout .login a{color:#fff}  cd-login-layout .login a:hover{color:#adb5bd}@media screen and (min-width: 576px){  cd-login-layout .login .login-form,   cd-login-layout .login .branding-info{padding-top:30vh}}@media screen and (max-width: 767px){  cd-login-layout .login .login-form{padding-top:10vh}  cd-login-layout .login .branding-info{padding-top:0}}"]})}}var yi=r(42706);class Vo{constructor(n,t,o){this.document=n,this.summaryService=t,this.cssHelper=o}init(){this.url=this.document.getElementById("cdFavicon")?.getAttribute("href"),this.sub=this.summaryService.subscribe(n=>{this.changeIcon(n.health_status)})}changeIcon(n){if(n===this.oldStatus)return;this.oldStatus=n;const t=this.document.getElementById("cdFavicon"),d=this.document.createElement("canvas");d.width=16,d.height=16;const h=d.getContext("2d"),I=this.document.createElement("img");I.src=this.url,I.onload=()=>{h.drawImage(I,0,0,16,16),Object.keys(Uo).includes(n)&&(h.save(),h.globalCompositeOperation="destination-out",h.beginPath(),h.arc(d.width-4,4,6,0,2*Math.PI),h.fill(),h.restore(),h.beginPath(),h.arc(d.width-4,4,4,0,2*Math.PI),h.fillStyle=this.cssHelper.propertyValue(Uo[n]),h.fill()),t.setAttribute("href",d.toDataURL("image/png"))}}ngOnDestroy(){this.changeIcon(),this.sub?.unsubscribe()}static{this.\u0275fac=function(t){return new(t||Vo)(e.\u0275\u0275inject(l.DOCUMENT),e.\u0275\u0275inject(on.E),e.\u0275\u0275inject(fo._))}}static{this.\u0275prov=e.\u0275\u0275defineInjectable({token:Vo,factory:Vo.\u0275fac})}}var O0=r(60977);class Li{constructor(n){this.http=n,this.url="ui-api/motd"}get(){return this.http.get(this.url)}static{this.\u0275fac=function(t){return new(t||Li)(e.\u0275\u0275inject(T.HttpClient))}}static{this.\u0275prov=e.\u0275\u0275defineInjectable({token:Li,factory:Li.\u0275fac,providedIn:"root"})}}var P0=r(72394);class Bo{constructor(n){this.motdService=n,this.motdSource=new K.BehaviorSubject(null),this.localStorageKey="dashboard_motd_hidden",this.motd$=this.motdSource.asObservable(),this.subscription=(0,K.of)(!0).pipe((0,v.mergeMap)(()=>this.motdService.get()),(0,v.catchError)(t=>(F.isFunction(t.preventDefault)&&t.preventDefault(),K.EMPTY)),(0,v.tap)(t=>this.processResponse(t)),(0,v.delay)(6e4),(0,v.repeat)(),(0,P0.g)()).subscribe()}ngOnDestroy(){this.subscription.unsubscribe()}hide(){const n=this.motdSource.getValue();if(n){const t=`${n.severity}:${n.md5}`;switch(n.severity){case"info":localStorage.setItem(this.localStorageKey,t),sessionStorage.removeItem(this.localStorageKey);break;case"warning":sessionStorage.setItem(this.localStorageKey,t),localStorage.removeItem(this.localStorageKey)}}this.motdSource.next(null)}processResponse(n){const t=sessionStorage.getItem(this.localStorageKey)||localStorage.getItem(this.localStorageKey);let o=F.isNull(t);if(!o&&n){const[s,d]=t.split(":");(s!==n.severity||d!==n.md5)&&(o=!0,sessionStorage.removeItem(this.localStorageKey),localStorage.removeItem(this.localStorageKey))}o&&this.motdSource.next(n)}static{this.\u0275fac=function(t){return new(t||Bo)(e.\u0275\u0275inject(Li))}}static{this.\u0275prov=e.\u0275\u0275defineInjectable({token:Bo,factory:Bo.\u0275fac,providedIn:"root"})}}var o_=r(87015),b0=r(17245);class go{constructor(n){this.cookieService=n}setToken(n,t){this.cookieService.set(n,t,null,null,null,!0,"Strict")}getToken(n){return this.cookieService.get(n)}deleteToken(n){this.cookieService.delete(n)}static{this.\u0275fac=function(t){return new(t||go)(e.\u0275\u0275inject(b0.CookieService))}}static{this.\u0275prov=e.\u0275\u0275defineInjectable({token:go,factory:go.\u0275fac,providedIn:"root"})}}var N0=r(36757);class $i{constructor(n,t){this.alertFormatter=n,this.prometheusService=t,this.backendFailure=!1,this.notifications=[]}refresh(){this.backendFailure||this.prometheusService.getNotifications(p().last(this.notifications)).subscribe(n=>this.handleNotifications(n),()=>this.backendFailure=!0)}handleNotifications(n){0!==n.length&&(this.notifications.length>0&&this.alertFormatter.sendNotifications(p().flatten(n.map(t=>this.formatNotification(t)))),this.notifications=this.notifications.concat(n))}formatNotification(n){return this.alertFormatter.convertToCustomAlerts(n.alerts).map(t=>this.alertFormatter.convertAlertToNotification(t))}static{this.\u0275fac=function(t){return new(t||$i)(e.\u0275\u0275inject($o),e.\u0275\u0275inject(Sn.o))}}static{this.\u0275prov=e.\u0275\u0275defineInjectable({token:$i,factory:$i.\u0275fac,providedIn:"root"})}}var I0=r(66527),A0=r(47579);const i_=(i,n,t)=>[i,n,t],D0=(i,n)=>[i,n],y0=i=>[i];function L0(i,n){if(1&i&&(e.\u0275\u0275elementStart(0,"div")(1,"div",14)(2,"div",15)(3,"div",16)(4,"span",17),e.\u0275\u0275namespaceSVG(),e.\u0275\u0275element(5,"svg",18),e.\u0275\u0275elementEnd()(),e.\u0275\u0275namespaceHTML(),e.\u0275\u0275elementStart(6,"div",19)(7,"div",20)(8,"h6",21),e.\u0275\u0275text(9),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(10,"div",22),e.\u0275\u0275element(11,"ngb-progressbar",23),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(12,"p",24)(13,"small",25),e.\u0275\u0275text(14),e.\u0275\u0275pipe(15,"cdDate"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(16,"span",26),e.\u0275\u0275text(17),e.\u0275\u0275elementEnd()()()()()(),e.\u0275\u0275element(18,"hr"),e.\u0275\u0275elementEnd()),2&i){const t=n.$implicit,o=e.\u0275\u0275nextContext(2);e.\u0275\u0275advance(5),e.\u0275\u0275property("cdsIcon",o.icons.circle)("size",o.icons.size16),e.\u0275\u0275advance(4),e.\u0275\u0275textInterpolate(t.description),e.\u0275\u0275advance(2),e.\u0275\u0275property("value",null==t?null:t.progress)("striped",!0)("animated",!0),e.\u0275\u0275advance(3),e.\u0275\u0275textInterpolate1(" ",e.\u0275\u0275pipeBind1(15,8,t.begin_time)," "),e.\u0275\u0275advance(3),e.\u0275\u0275textInterpolate1(" ",t.progress||0," % ")}}function $0(i,n){if(1&i&&e.\u0275\u0275template(0,L0,19,10,"div",13),2&i){const t=e.\u0275\u0275nextContext();e.\u0275\u0275property("ngForOf",t.executingTasks)("ngForTrackBy",t.trackByFn)}}function x0(i,n){if(1&i){const t=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"button",39),e.\u0275\u0275listener("click",function(){e.\u0275\u0275restoreView(t);const s=e.\u0275\u0275nextContext().$implicit,d=e.\u0275\u0275nextContext(3);return e.\u0275\u0275resetView(d.silence(s))}),e.\u0275\u0275namespaceSVG(),e.\u0275\u0275element(1,"svg",18),e.\u0275\u0275elementEnd()}if(2&i){const t=e.\u0275\u0275nextContext(4);e.\u0275\u0275advance(),e.\u0275\u0275property("cdsIcon",t.icons.mute)("size",t.icons.size16)}}function U0(i,n){if(1&i){const t=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"button",40),e.\u0275\u0275listener("click",function(){e.\u0275\u0275restoreView(t);const s=e.\u0275\u0275nextContext().$implicit,d=e.\u0275\u0275nextContext(3);return e.\u0275\u0275resetView(d.expire(s))}),e.\u0275\u0275namespaceSVG(),e.\u0275\u0275element(1,"svg",18),e.\u0275\u0275elementEnd()}if(2&i){const t=e.\u0275\u0275nextContext(4);e.\u0275\u0275advance(),e.\u0275\u0275property("cdsIcon",t.icons.bell)("size",t.icons.size16)}}function w0(i,n){if(1&i&&(e.\u0275\u0275elementContainerStart(0),e.\u0275\u0275elementStart(1,"small"),e.\u0275\u0275elementContainerStart(2),e.\u0275\u0275i18n(3,5),e.\u0275\u0275elementContainerEnd(),e.\u0275\u0275text(4),e.\u0275\u0275pipe(5,"duration"),e.\u0275\u0275elementEnd(),e.\u0275\u0275element(6,"br"),e.\u0275\u0275elementContainerEnd()),2&i){const t=e.\u0275\u0275nextContext().$implicit;e.\u0275\u0275advance(4),e.\u0275\u0275textInterpolate1(" ",e.\u0275\u0275pipeBind1(5,1,t.duration)," ")}}function G0(i,n){if(1&i){const t=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"div",30)(1,"div",31)(2,"div",15)(3,"div",16)(4,"span",30),e.\u0275\u0275element(5,"i",30)(6,"i",30),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(7,"div",32)(8,"div",20)(9,"button",33),e.\u0275\u0275listener("click",function(s){const d=e.\u0275\u0275restoreView(t).index;return e.\u0275\u0275nextContext(3).remove(d),e.\u0275\u0275resetView(s.stopPropagation())}),e.\u0275\u0275namespaceSVG(),e.\u0275\u0275element(10,"svg",18),e.\u0275\u0275elementEnd(),e.\u0275\u0275template(11,x0,2,2,"button",34)(12,U0,2,2,"button",35),e.\u0275\u0275namespaceHTML(),e.\u0275\u0275elementStart(13,"h6",21),e.\u0275\u0275text(14),e.\u0275\u0275elementEnd(),e.\u0275\u0275element(15,"p",36),e.\u0275\u0275elementStart(16,"p",24),e.\u0275\u0275template(17,w0,7,3,"ng-container",27),e.\u0275\u0275elementStart(18,"small",37),e.\u0275\u0275pipe(19,"cdDate"),e.\u0275\u0275text(20),e.\u0275\u0275pipe(21,"relativeDate"),e.\u0275\u0275elementEnd(),e.\u0275\u0275element(22,"i",38),e.\u0275\u0275elementEnd()()()()(),e.\u0275\u0275element(23,"hr"),e.\u0275\u0275elementEnd()}if(2&i){const t=n.$implicit,o=e.\u0275\u0275nextContext(3);e.\u0275\u0275property("ngClass",t.borderClass),e.\u0275\u0275advance(4),e.\u0275\u0275property("ngClass",e.\u0275\u0275pureFunction3(19,i_,o.icons.stack,o.icons.large,t.textClass)),e.\u0275\u0275advance(),e.\u0275\u0275property("ngClass",e.\u0275\u0275pureFunction2(23,D0,o.icons.circle,o.icons.stack2x)),e.\u0275\u0275advance(),e.\u0275\u0275property("ngClass",e.\u0275\u0275pureFunction3(26,i_,o.icons.stack1x,o.icons.inverse,t.iconClass)),e.\u0275\u0275advance(4),e.\u0275\u0275property("cdsIcon",o.icons.trash)("size",o.icons.size16),e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf","Prometheus"===t.application&&2!==t.type&&!t.alertSilenced),e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf","Prometheus"===t.application&&2!==t.type&&t.alertSilenced),e.\u0275\u0275advance(2),e.\u0275\u0275textInterpolate(t.title),e.\u0275\u0275advance(),e.\u0275\u0275property("innerHtml",t.message,e.\u0275\u0275sanitizeHtml),e.\u0275\u0275advance(2),e.\u0275\u0275property("ngIf",t.duration),e.\u0275\u0275advance(),e.\u0275\u0275property("title",e.\u0275\u0275pipeBind1(19,15,t.timestamp)),e.\u0275\u0275advance(2),e.\u0275\u0275textInterpolate(e.\u0275\u0275pipeBind1(21,17,t.timestamp)),e.\u0275\u0275advance(2),e.\u0275\u0275property("ngClass",e.\u0275\u0275pureFunction1(30,y0,t.applicationClass))("title",t.application)}}function H0(i,n){if(1&i){const t=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementContainerStart(0),e.\u0275\u0275elementStart(1,"button",28),e.\u0275\u0275listener("click",function(s){return e.\u0275\u0275restoreView(t),e.\u0275\u0275nextContext(2).removeAll(),e.\u0275\u0275resetView(s.stopPropagation())}),e.\u0275\u0275namespaceSVG(),e.\u0275\u0275element(2,"svg",18),e.\u0275\u0275text(3," \xa0 "),e.\u0275\u0275namespaceHTML(),e.\u0275\u0275elementContainerStart(4),e.\u0275\u0275i18n(5,4),e.\u0275\u0275elementContainerEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275element(6,"hr"),e.\u0275\u0275template(7,G0,24,32,"div",29),e.\u0275\u0275elementContainerEnd()}if(2&i){const t=e.\u0275\u0275nextContext(2);e.\u0275\u0275advance(2),e.\u0275\u0275property("cdsIcon",t.icons.trash)("size",t.icons.size16),e.\u0275\u0275advance(5),e.\u0275\u0275property("ngForOf",t.notifications)}}function V0(i,n){if(1&i&&e.\u0275\u0275template(0,H0,8,3,"ng-container",27),2&i){const t=e.\u0275\u0275nextContext();e.\u0275\u0275property("ngIf",t.notifications.length>0)}}function B0(i,n){1&i&&(e.\u0275\u0275elementStart(0,"div")(1,"div",41),e.\u0275\u0275i18n(2,6),e.\u0275\u0275elementEnd()())}function z0(i,n){if(1&i&&e.\u0275\u0275template(0,B0,3,0,"div",27),2&i){const t=e.\u0275\u0275nextContext();e.\u0275\u0275property("ngIf",0===t.notifications.length&&0===t.executingTasks.length)}}function X0(i,n){1&i&&e.\u0275\u0275elementContainer(0)}function k0(i,n){1&i&&e.\u0275\u0275elementContainer(0)}function j0(i,n){1&i&&e.\u0275\u0275elementContainer(0)}class tr{constructor(n,t,o,s,d,h,I,$,w,X){this.notificationService=n,this.summaryService=t,this.taskMessageService=o,this.prometheusNotificationService=s,this.succeededLabels=d,this.authStorageService=h,this.prometheusAlertService=I,this.prometheusService=$,this.ngZone=w,this.cdRef=X,this.isSidebarOpened=!1,this.executingTasks=[],this.subs=new K.Subscription,this.icons=g.FI,this.last_task="",this.mutex=new N0.Mutex,this.simplebar={autoHide:!1},this.notifications=[]}ngOnDestroy(){window.clearInterval(this.interval),window.clearTimeout(this.timeout),this.subs.unsubscribe()}ngOnInit(){this.last_task=window.localStorage.getItem("last_task");const n=this.authStorageService.getPermissions();n.prometheus.read&&n.configOpt.read&&(this.triggerPrometheusAlerts(),this.ngZone.runOutsideAngular(()=>{this.interval=window.setInterval(()=>{this.ngZone.run(()=>{this.triggerPrometheusAlerts()})},5e3)})),this.subs.add(this.notificationService.data$.subscribe(t=>{this.notifications=p().orderBy(t,["timestamp"],["desc"]),this.cdRef.detectChanges()})),this.subs.add(this.notificationService.sidebarSubject.subscribe(t=>{this.isSidebarOpened=!t&&!this.isSidebarOpened,window.clearTimeout(this.timeout),this.timeout=window.setTimeout(()=>{this.cdRef.detectChanges()},0)})),this.subs.add(this.summaryService.subscribe(t=>{this._handleTasks(t.executing_tasks),this.mutex.acquire().then(o=>{p().filter(t.finished_tasks,s=>!this.last_task||st()(s.end_time).isAfter(this.last_task)).forEach(s=>{const d=this.notificationService.finishedTaskToNotification(s,s.success),h=new cl.p(d);h.timestamp=s.end_time,h.duration=s.duration,(!this.last_task||st()(s.end_time).isAfter(this.last_task))&&(this.last_task=s.end_time,window.localStorage.setItem("last_task",this.last_task)),this.notificationService.save(h)}),this.cdRef.detectChanges(),o()})}))}_handleTasks(n){for(const t of n)t.description=this.taskMessageService.getRunningTitle(t);this.executingTasks=n}triggerPrometheusAlerts(){this.prometheusAlertService.refresh(!0),this.prometheusNotificationService.refresh()}removeAll(){this.notificationService.removeAll()}remove(n){this.notificationService.remove(n)}closeSidebar(){this.isSidebarOpened=!1}trackByFn(n){return n}silence(n){const t="YYYY-MM-DD HH:mm",o=$localize`silence`,s={name:"alertname",value:n.title.split(" ")[0],isRegex:!1},d={matchers:[s],startsAt:st()(st()().format(t)).toISOString(),endsAt:st()(st()().add(2,"hours").format(t)).toISOString(),createdBy:this.authStorageService.getUsername(),comment:"Silence created from the alert notification"};let h="";n.alertSilenced=!0,h=h.concat(` ${s.name} - ${s.value},`);const I=`${this.succeededLabels.CREATED} ${o} for ${h.slice(0,-1)}`;this.prometheusService.setSilence(d).subscribe($=>{n&&(n.silenceId=$.body.silenceId),this.notificationService.show(Ae._.success,I,void 0,void 0,"Prometheus")})}expire(n){n.alertSilenced=!1,this.prometheusService.expireSilence(n.silenceId).subscribe(()=>{this.notificationService.show(Ae._.success,`${this.succeededLabels.EXPIRED} ${n.silenceId}`,void 0,void 0,"Prometheus")},t=>{t.application="Prometheus"})}static{this.\u0275fac=function(t){return new(t||tr)(e.\u0275\u0275directiveInject(Q.J),e.\u0275\u0275directiveInject(on.E),e.\u0275\u0275directiveInject(I0.i),e.\u0275\u0275directiveInject($i),e.\u0275\u0275directiveInject(m.Vv),e.\u0275\u0275directiveInject(c.v),e.\u0275\u0275directiveInject(hn),e.\u0275\u0275directiveInject(Sn.o),e.\u0275\u0275directiveInject(e.NgZone),e.\u0275\u0275directiveInject(e.ChangeDetectorRef))}}static{this.\u0275cmp=e.\u0275\u0275defineComponent({type:tr,selectors:[["cd-notifications-sidebar"]],hostVars:2,hostBindings:function(t,o){2&t&&e.\u0275\u0275classProp("active",o.isSidebarOpened)},decls:16,vars:5,consts:()=>{let n,t,o,s,d,h,I;return n=$localize`:␟0a23e992f6c6e169a38b2b7338b4e5e803b52e0d␟2585429450328251089:Tasks and Notifications`,t=$localize`:␟7e52e9143145e1db5146258de81eae018a407b31␟6219288588962415681:Clear notifications`,o=$localize`:␟b0b07bb6b7ff21ede439dd04eaf8872d1ecb84d8␟5231270867791726531:Remove notification`,s=$localize`:␟149fe519b5889008c9208739c711d6c85d5fe0ab␟29836899177300565:Silence Alert`,d=$localize`:␟f023beceb4b9213a14b0f80a9dd472eb59b87174␟239145694936384171:Expire Silence`,h=$localize`:␟e17a1d75189da843f541f7764f188f2b19a97df2␟4220765745195024064:Duration:`,I=$localize`:␟0d4b37c6675c5b436a54c43d6716eec835e1aa7f␟4164297423243333029:There are no notifications.`,[["tasksTpl",""],["notificationsTpl",""],["emptyTpl",""],n,t,h,I,[1,"card",3,"clickOutside","clickOutsideEnabled"],[1,"card-header"],["tabindex","-1","type","button","title","close",1,"btn-close","float-end",3,"click"],[3,"options"],[1,"card-body"],[4,"ngTemplateOutlet"],[4,"ngFor","ngForOf","ngForTrackBy"],[1,"card","tc_task","border-0"],[1,"row","no-gutters"],[1,"col-md-2","text-center"],[1,"text-info"],[3,"cdsIcon","size"],[1,"col-md-9"],[1,"card-body","p-1"],[1,"card-title","bold"],[1,"mb-1"],["type","info",3,"value","striped","animated"],[1,"card-text","text-muted"],[1,"date","float-start"],[1,"float-end"],[4,"ngIf"],["type","button",1,"btn","btn-light","btn-block",3,"click"],[3,"ngClass",4,"ngFor","ngForOf"],[3,"ngClass"],[1,"card","tc_notification","border-0"],[1,"col-md-10"],["title",o,1,"btn","btn-link","float-end","mt-0","pt-0",3,"click"],["class","btn btn-link float-end text-muted mute m-0 p-0","title",s,3,"click",4,"ngIf"],["class","btn btn-link float-end text-muted mute m-0 p-0","title",d,3,"click",4,"ngIf"],[1,"card-text",3,"innerHtml"],[1,"date",3,"title"],[1,"float-end","custom-icon",3,"ngClass","title"],["title",s,1,"btn","btn-link","float-end","text-muted","mute","m-0","p-0",3,"click"],["title",d,1,"btn","btn-link","float-end","text-muted","mute","m-0","p-0",3,"click"],[1,"message","text-center"]]},template:function(t,o){if(1&t){const s=e.\u0275\u0275getCurrentView();e.\u0275\u0275template(0,$0,1,2,"ng-template",null,0,e.\u0275\u0275templateRefExtractor)(2,V0,1,1,"ng-template",null,1,e.\u0275\u0275templateRefExtractor)(4,z0,1,1,"ng-template",null,2,e.\u0275\u0275templateRefExtractor),e.\u0275\u0275elementStart(6,"div",7),e.\u0275\u0275listener("clickOutside",function(){return e.\u0275\u0275restoreView(s),e.\u0275\u0275resetView(o.closeSidebar())}),e.\u0275\u0275elementStart(7,"div",8),e.\u0275\u0275elementContainerStart(8),e.\u0275\u0275i18n(9,3),e.\u0275\u0275elementContainerEnd(),e.\u0275\u0275elementStart(10,"button",9),e.\u0275\u0275listener("click",function(){return e.\u0275\u0275restoreView(s),e.\u0275\u0275resetView(o.closeSidebar())}),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(11,"ngx-simplebar",10)(12,"div",11),e.\u0275\u0275template(13,X0,1,0,"ng-container",12)(14,k0,1,0,"ng-container",12)(15,j0,1,0,"ng-container",12),e.\u0275\u0275elementEnd()()()}if(2&t){const s=e.\u0275\u0275reference(1),d=e.\u0275\u0275reference(3),h=e.\u0275\u0275reference(5);e.\u0275\u0275advance(6),e.\u0275\u0275property("clickOutsideEnabled",o.isSidebarOpened),e.\u0275\u0275advance(5),e.\u0275\u0275property("options",o.simplebar),e.\u0275\u0275advance(2),e.\u0275\u0275property("ngTemplateOutlet",s),e.\u0275\u0275advance(),e.\u0275\u0275property("ngTemplateOutlet",d),e.\u0275\u0275advance(),e.\u0275\u0275property("ngTemplateOutlet",h)}},dependencies:[l.NgClass,l.NgForOf,l.NgIf,l.NgTemplateOutlet,G.NgbProgressbar,Ge.S,A0.ClickOutsideDirective,fl.SimplebarAngularComponent,D.IconDirective,No.D,Ot.Q,ul.b],styles:["[_nghost-%COMP%]{bottom:10px;max-width:90vw;position:fixed;right:-350px;top:53px;transition:all .6s;width:350px;z-index:9}.active[_nghost-%COMP%]{right:20px}.card[_ngcontent-%COMP%]{height:100%}.card-body[_ngcontent-%COMP%]{padding-left:0;padding-right:5px;padding-top:3px}ngx-simplebar[_ngcontent-%COMP%]{height:calc(100% - 42.2px)}.separator[_ngcontent-%COMP%]{background-color:#e9ecef;color:#6c757d;font-size:1rem;padding:5px 12px}.btn-block[_ngcontent-%COMP%]{width:98%}.btn-link[_ngcontent-%COMP%]   .fa-trash-o[_ngcontent-%COMP%]{color:#000}table[_ngcontent-%COMP%]{width:100%}.row[_ngcontent-%COMP%]{margin-left:0;margin-right:0;padding-bottom:1rem;padding-top:1rem}hr[_ngcontent-%COMP%]{margin-bottom:2px;margin-top:2px}"],changeDetection:0})}}const W0=i=>({running:i});function K0(i,n){1&i&&e.\u0275\u0275element(0,"span",5)}class nr{constructor(n,t){this.notificationService=n,this.summaryService=t,this.icons=g.FI,this.hasRunningTasks=!1,this.hasNotifications=!1,this.subs=new K.Subscription}ngOnInit(){this.subs.add(this.summaryService.subscribe(n=>{this.hasRunningTasks=n.executing_tasks.length>0})),this.subs.add(this.notificationService.data$.subscribe(n=>{this.hasNotifications=n.length>0}))}ngOnDestroy(){this.subs.unsubscribe()}static{this.\u0275fac=function(t){return new(t||nr)(e.\u0275\u0275directiveInject(Q.J),e.\u0275\u0275directiveInject(on.E))}}static{this.\u0275cmp=e.\u0275\u0275defineComponent({type:nr,selectors:[["cd-notifications"]],decls:5,vars:4,consts:()=>{let n,t;return n=$localize`:␟0a23e992f6c6e169a38b2b7338b4e5e803b52e0d␟2585429450328251089:Tasks and Notifications`,t=$localize`:␟0a23e992f6c6e169a38b2b7338b4e5e803b52e0d␟2585429450328251089:Tasks and Notifications`,[t,["title",n,3,"ngClass"],["cdsIcon","notification","size","20","title","notification"],["class","dot",4,"ngIf"],[1,"d-md-none"],[1,"dot"]]},template:function(t,o){1&t&&(e.\u0275\u0275elementStart(0,"a",1),e.\u0275\u0275namespaceSVG(),e.\u0275\u0275element(1,"svg",2),e.\u0275\u0275template(2,K0,1,0,"span",3),e.\u0275\u0275namespaceHTML(),e.\u0275\u0275elementStart(3,"span",4),e.\u0275\u0275i18n(4,0),e.\u0275\u0275elementEnd()()),2&t&&(e.\u0275\u0275property("ngClass",e.\u0275\u0275pureFunction1(2,W0,o.hasRunningTasks)),e.\u0275\u0275advance(2),e.\u0275\u0275property("ngIf",o.hasNotifications))},dependencies:[l.NgClass,l.NgIf,D.IconDirective],styles:[".running[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{color:#25828e}.running[_ngcontent-%COMP%]:hover   i[_ngcontent-%COMP%]{color:#fff}a[_ngcontent-%COMP%]   .dot[_ngcontent-%COMP%]{background-color:#2b99a8;border:2px solid #374249;border-radius:50%;height:11px;position:absolute;right:17px;top:10px;width:10px}a[_ngcontent-%COMP%]:hover   .dot[_ngcontent-%COMP%]{background-color:#fff;border-color:#2b99a8}"]})}}class xi{constructor(n){this.http=n,this.baseUIURL="api/feedback"}isKeyExist(){return this.http.get("ui-api/feedback/api_key/exist")}createIssue(n,t,o,s,d){return this.http.post("api/feedback",{project:n,tracker:t,subject:o,description:s,api_key:d},{headers:{Accept:"application/vnd.ceph.api.v0.1+json"}})}static{this.\u0275fac=function(t){return new(t||xi)(e.\u0275\u0275inject(T.HttpClient))}}static{this.\u0275prov=e.\u0275\u0275defineInjectable({token:xi,factory:xi.\u0275fac,providedIn:"root"})}}function Q0(i,n){if(1&i){const t=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"cd-alert-panel",38),e.\u0275\u0275i18nStart(1,8),e.\u0275\u0275elementStart(2,"a",39),e.\u0275\u0275listener("click",function(){e.\u0275\u0275restoreView(t);const s=e.\u0275\u0275nextContext();return e.\u0275\u0275resetView(s.redirect())}),e.\u0275\u0275elementEnd(),e.\u0275\u0275i18nEnd(),e.\u0275\u0275elementEnd()}}function Y0(i,n){1&i&&(e.\u0275\u0275elementStart(0,"span",43),e.\u0275\u0275i18n(1,10),e.\u0275\u0275elementEnd())}function J0(i,n){1&i&&(e.\u0275\u0275elementStart(0,"span",43),e.\u0275\u0275i18n(1,11),e.\u0275\u0275elementEnd())}function Z0(i,n){if(1&i&&(e.\u0275\u0275elementStart(0,"div",40)(1,"label",41),e.\u0275\u0275i18n(2,9),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(3,"div",25),e.\u0275\u0275element(4,"input",42),e.\u0275\u0275template(5,Y0,2,0,"span",29)(6,J0,2,0,"span",29),e.\u0275\u0275elementEnd()()),2&i){const t=e.\u0275\u0275nextContext(),o=e.\u0275\u0275reference(5);e.\u0275\u0275advance(5),e.\u0275\u0275property("ngIf",t.feedbackForm.showError("api_key",o,"required")),e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf",t.feedbackForm.showError("api_key",o,"invalidApiKey"))}}function q0(i,n){if(1&i&&(e.\u0275\u0275elementStart(0,"option",44),e.\u0275\u0275text(1),e.\u0275\u0275elementEnd()),2&i){const t=n.$implicit;e.\u0275\u0275property("value",t),e.\u0275\u0275advance(),e.\u0275\u0275textInterpolate(t)}}function e8(i,n){1&i&&(e.\u0275\u0275elementStart(0,"span",43),e.\u0275\u0275i18n(1,12),e.\u0275\u0275elementEnd())}function t8(i,n){if(1&i&&(e.\u0275\u0275elementStart(0,"option",44),e.\u0275\u0275text(1),e.\u0275\u0275elementEnd()),2&i){const t=n.$implicit;e.\u0275\u0275property("value",t),e.\u0275\u0275advance(),e.\u0275\u0275textInterpolate(t)}}function n8(i,n){1&i&&(e.\u0275\u0275elementStart(0,"span",43),e.\u0275\u0275i18n(1,13),e.\u0275\u0275elementEnd())}function o8(i,n){1&i&&(e.\u0275\u0275elementStart(0,"span",43),e.\u0275\u0275i18n(1,14),e.\u0275\u0275elementEnd())}function i8(i,n){1&i&&(e.\u0275\u0275elementStart(0,"span",43),e.\u0275\u0275i18n(1,15),e.\u0275\u0275elementEnd())}class or{constructor(n,t,o,s,d,h){this.feedbackService=n,this.activeModal=t,this.actionLabels=o,this.secondaryModal=s,this.notificationService=d,this.router=h,this.title="Feedback",this.project=["dashboard","block","objects","file_system","ceph_manager","orchestrator","ceph_volume","core_ceph"],this.tracker=["bug","feature"],this.isAPIKeySet=!1,this.isFeedbackEnabled=!0}ngOnInit(){this.createForm(),this.keySub=this.feedbackService.isKeyExist().subscribe({next:n=>{this.isAPIKeySet=n,this.isAPIKeySet&&this.feedbackForm.get("api_key").clearValidators()},error:()=>{this.isFeedbackEnabled=!1,this.feedbackForm.disable()}})}createForm(){this.feedbackForm=new Ue.$({project:new C.UntypedFormControl("",C.Validators.required),tracker:new C.UntypedFormControl("",C.Validators.required),subject:new C.UntypedFormControl("",C.Validators.required),description:new C.UntypedFormControl("",C.Validators.required),api_key:new C.UntypedFormControl("",C.Validators.required)})}ngOnDestroy(){this.keySub.unsubscribe()}onSubmit(){this.feedbackService.createIssue(this.feedbackForm.controls.project.value,this.feedbackForm.controls.tracker.value,this.feedbackForm.controls.subject.value,this.feedbackForm.controls.description.value,this.feedbackForm.controls.api_key.value).subscribe({next:n=>{this.notificationService.show(Ae._.success,$localize`Issue successfully created on Ceph Issue tracker`,`Go to the tracker: <a href="https://tracker.ceph.com/issues/${n.message.issue.id}" target="_blank"> ${n.message.issue.id} </a>`)},error:()=>{this.feedbackForm.get("api_key").setErrors({invalidApiKey:!0}),this.feedbackForm.setErrors({cdSubmitButton:!0})},complete:()=>{this.activeModal.close()}})}redirect(){this.activeModal.close(),this.router.navigate(["/mgr-modules"])}static{this.\u0275fac=function(t){return new(t||or)(e.\u0275\u0275directiveInject(xi),e.\u0275\u0275directiveInject(G.NgbActiveModal),e.\u0275\u0275directiveInject(m.Ss),e.\u0275\u0275directiveInject(G.NgbModal),e.\u0275\u0275directiveInject(Q.J),e.\u0275\u0275directiveInject(u.Router))}}static{this.\u0275cmp=e.\u0275\u0275defineComponent({type:or,selectors:[["cd-feedback"]],decls:42,vars:12,consts:()=>{let n,t,o,s,d,h,I,$,w,X,J,re,de,Me,ve;return n=$localize`:␟9df5e237f3fd0322db7b61097eba221e5517b93b␟3889192220307199156:Report an issue`,t=$localize`:␟c660f51d0a809bdffb6939f4c4459858abc2288b␟2651912264744301649:Project name`,o=$localize`:␟348b7b123fb4a6f145a5c485b7c46da55a10e7de␟208900831031752301:-- Select a project --`,s=$localize`:␟b2c47a0b64e43a8d592dd1ddac8b4ae1bf0fad25␟2456511013791497391:Tracker`,d=$localize`:␟ed2068f32cb361d731f70efcb0cec770be75d656␟7156385088155573022:-- Select a tracker --`,h=$localize`:␟4b0ca852bafa5037c4e64c7b18f9cd1e14b799de␟9127604588498960753:Subject`,I=$localize`:␟eec715de352a6b114713b30b640d319fa78207a0␟4902817035128594900:Description`,$=$localize`:␟6d32536a0a1d31ae4a9f5b4c8c80b557de191fe5␟366220122123488147:Feedback module is not enabled. Please enable it from ${"\ufffd#2\ufffd"}:START_LINK:Cluster-> Manager Modules.${"\ufffd/#2\ufffd"}:CLOSE_LINK:`,w=$localize`:␟f9640491e408177fb205a849c01772d8b9ba4e7e␟4885900247611181996:Ceph Tracker API Key`,X=$localize`:␟c09dbf49c81e614e7dcd06bfd2820afcef95fcd5␟728691479868717683:Ceph Tracker API key is required.`,J=$localize`:␟9108897bc069bf143eb817be990ff2362cf90fc1␟2623008326536469596:Ceph Tracker API key is invalid.`,re=$localize`:␟9372de61877f8e545973af01665d96336c2bf354␟734302967336146005:Project name is required.`,de=$localize`:␟65396d2b4d00b78b54ad92fcfbabd7958cfb88f7␟2367373933484256227:Tracker name is required.`,Me=$localize`:␟dd7609d918d98e831ecbbe99879489ce3b6e82e6␟1292968119875230500:Subject is required.`,ve=$localize`:␟8b49c52315ea545a3b62d127fbe3515910bfa5cd␟2512365026527188575:Description is required.`,[["formDir","ngForm"],n,t,o,s,d,h,I,$,w,X,J,re,de,Me,ve,[3,"modalRef"],[1,"modal-title"],[1,"modal-content"],["name","feedbackForm",3,"formGroup"],[1,"modal-body"],["type","error",4,"ngIf"],["class","form-group row mt-3",4,"ngIf"],[1,"form-group","row"],["for","project",1,"cd-col-form-label","required"],[1,"cd-col-form-input"],["id","project","formControlName","project",1,"form-control"],["ngValue",""],[3,"value",4,"ngFor","ngForOf"],["class","invalid-feedback",4,"ngIf"],["for","tracker",1,"cd-col-form-label","required"],["id","tracker","formControlName","tracker",1,"form-control"],["for","subject",1,"cd-col-form-label","required"],["id","subject","type","text","formControlName","subject","placeholder","Add issue title",1,"form-control"],["for","description",1,"cd-col-form-label","required"],["id","description","type","text","formControlName","description","placeholder","Add issue description",1,"form-control"],[1,"modal-footer"],["wrappingClass","text-right",3,"submitActionEvent","form","submitText"],["type","error"],[3,"click"],[1,"form-group","row","mt-3"],["for","api_key",1,"cd-col-form-label","required"],["id","api_key","type","password","formControlName","api_key","placeholder","Add Ceph tracker API key",1,"form-control"],[1,"invalid-feedback"],[3,"value"]]},template:function(t,o){if(1&t){const s=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"cd-modal",16)(1,"div",17),e.\u0275\u0275i18n(2,1),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(3,"div",18)(4,"form",19,0)(6,"div",20),e.\u0275\u0275template(7,Q0,3,0,"cd-alert-panel",21)(8,Z0,7,2,"div",22),e.\u0275\u0275elementStart(9,"div",23)(10,"label",24),e.\u0275\u0275i18n(11,2),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(12,"div",25)(13,"select",26)(14,"option",27),e.\u0275\u0275i18n(15,3),e.\u0275\u0275elementEnd(),e.\u0275\u0275template(16,q0,2,2,"option",28),e.\u0275\u0275elementEnd(),e.\u0275\u0275template(17,e8,2,0,"span",29),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(18,"div",23)(19,"label",30),e.\u0275\u0275i18n(20,4),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(21,"div",25)(22,"select",31)(23,"option",27),e.\u0275\u0275i18n(24,5),e.\u0275\u0275elementEnd(),e.\u0275\u0275template(25,t8,2,2,"option",28),e.\u0275\u0275elementEnd(),e.\u0275\u0275template(26,n8,2,0,"span",29),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(27,"div",23)(28,"label",32),e.\u0275\u0275i18n(29,6),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(30,"div",25),e.\u0275\u0275element(31,"input",33),e.\u0275\u0275template(32,o8,2,0,"span",29),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(33,"div",23)(34,"label",34),e.\u0275\u0275i18n(35,7),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(36,"div",25)(37,"textarea",35),e.\u0275\u0275text(38,"            "),e.\u0275\u0275elementEnd(),e.\u0275\u0275template(39,i8,2,0,"span",29),e.\u0275\u0275elementEnd()()(),e.\u0275\u0275elementStart(40,"div",36)(41,"cd-form-button-panel",37),e.\u0275\u0275listener("submitActionEvent",function(){return e.\u0275\u0275restoreView(s),e.\u0275\u0275resetView(o.onSubmit())}),e.\u0275\u0275elementEnd()()()()()}if(2&t){const s=e.\u0275\u0275reference(5);e.\u0275\u0275property("modalRef",o.activeModal),e.\u0275\u0275advance(4),e.\u0275\u0275property("formGroup",o.feedbackForm),e.\u0275\u0275advance(3),e.\u0275\u0275property("ngIf",!o.isFeedbackEnabled),e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf",!o.isAPIKeySet),e.\u0275\u0275advance(8),e.\u0275\u0275property("ngForOf",o.project),e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf",o.feedbackForm.showError("project",s,"required")),e.\u0275\u0275advance(8),e.\u0275\u0275property("ngForOf",o.tracker),e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf",o.feedbackForm.showError("tracker",s,"required")),e.\u0275\u0275advance(6),e.\u0275\u0275property("ngIf",o.feedbackForm.showError("subject",s,"required")),e.\u0275\u0275advance(7),e.\u0275\u0275property("ngIf",o.feedbackForm.showError("description",s,"required")),e.\u0275\u0275advance(2),e.\u0275\u0275property("form",o.feedbackForm)("submitText",o.actionLabels.SUBMIT)}},dependencies:[l.NgForOf,l.NgIf,Ut.z,nt.m,oe.e,Ge.S,we.a,Ve.C,ze.E,C.\u0275NgNoValidate,C.NgSelectOption,C.\u0275NgSelectMultipleOption,C.DefaultValueAccessor,C.SelectControlValueAccessor,C.NgControlStatus,C.NgControlStatusGroup,C.FormGroupDirective,C.FormControlName]})}}var Sl,a8=r(43809);!function(i){i.DASHBOARD_USRENAME="dashboard_username"}(Sl||(Sl={}));class ir{constructor(n,t,o,s){this.activeModal=n,this.summaryService=t,this.userService=o,this.authStorageService=s,this.userPermission=this.authStorageService.getPermissions().user}ngOnInit(){this.projectConstants=m.D5,this.hostAddr=window.location.hostname,this.modalVariables=this.setVariables(),this.subs=this.summaryService.subscribe(n=>{const t=n.version.replace(`${m.qA} `,"").split(" ");this.hostAddr=n.mgr_host.replace(/(^\w+:|^)\/\//,"").replace(/\/$/,""),this.versionNumber=t[0],this.versionHash=t[1],this.versionName=t.slice(2,t.length).join(" ")})}ngOnDestroy(){this.subs.unsubscribe()}setVariables(){const n=$localize`Not available`,t={};t.user=localStorage.getItem(Sl.DASHBOARD_USRENAME),t.role=m.m3,this.userPermission.read&&this.userService.get(t.user).subscribe(s=>{t.role=s.roles});const o=(0,a8.detect)();return t.browserName=o&&o.name?o.name:n,t.browserVersion=o&&o.version?o.version:n,t.browserOS=o&&o.os?o.os:n,t}static{this.\u0275fac=function(t){return new(t||ir)(e.\u0275\u0275directiveInject(G.NgbActiveModal),e.\u0275\u0275directiveInject(on.E),e.\u0275\u0275directiveInject(Cl.D),e.\u0275\u0275directiveInject(c.v))}}static{this.\u0275cmp=e.\u0275\u0275defineComponent({type:ir,selectors:[["cd-about"]],decls:44,vars:13,consts:()=>{let n,t,o,s,d,h,I,$;return n=$localize`:␟f4e529ae5ffd73001d1ff4bbdeeb0a72e342e5c8␟7819314041543176992:Close`,t=$localize`:␟8fe73a4787b8068b2ba61f54ab7e0f9af2ea1fc9␟2724055831234181057:Version`,o=$localize`:␟9ee8ff9ec37d57698af22c58d6fe3585a50f0348␟3293300766783401194:Ceph Manager`,s=$localize`:␟e08a77594f3d89311cdf6da5090044270909c194␟2392488717875840729:User`,d=$localize`:␟ea23921000c2420f43488e431629943790e3b984␟905150179853267182:User Role`,h=$localize`:␟3711301a1b9e1890b056fd7e47bea62877df9352␟5855712980171403039:Browser`,I=$localize`:␟8319ba35cd46f05a9c090167bce10a49472e54bb␟6469011143009414758:Browser Version`,$=$localize`:␟819a770bf32aa290ba58ad1e7712b21d83559b4a␟8611927475785298767:Browser OS`,[t,o,s,d,h,I,$,[1,"about-container"],[1,"modal-header"],["type","button","aria-label",n,1,"btn-close","float-end",3,"click"],[1,"modal-body"],["src","assets/Ceph_Ceph_Logo_with_text_red_white.svg",1,"ceph-logo",3,"alt"],[1,"product-versions"],[1,"modal-footer"],[1,"text-left"]]},template:function(t,o){1&t&&(e.\u0275\u0275elementStart(0,"div",7)(1,"div",8)(2,"button",9),e.\u0275\u0275listener("click",function(){return o.activeModal.close()}),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(3,"div",10),e.\u0275\u0275element(4,"img",11),e.\u0275\u0275elementStart(5,"h3")(6,"strong"),e.\u0275\u0275text(7),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(8,"div",12)(9,"strong"),e.\u0275\u0275i18n(10,0),e.\u0275\u0275elementEnd(),e.\u0275\u0275element(11,"br"),e.\u0275\u0275text(12),e.\u0275\u0275element(13,"br"),e.\u0275\u0275text(14),e.\u0275\u0275elementEnd(),e.\u0275\u0275element(15,"br"),e.\u0275\u0275elementStart(16,"dl")(17,"dt"),e.\u0275\u0275i18n(18,1),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(19,"dd"),e.\u0275\u0275text(20),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(21,"dt"),e.\u0275\u0275i18n(22,2),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(23,"dd"),e.\u0275\u0275text(24),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(25,"dt"),e.\u0275\u0275i18n(26,3),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(27,"dd"),e.\u0275\u0275text(28),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(29,"dt"),e.\u0275\u0275i18n(30,4),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(31,"dd"),e.\u0275\u0275text(32),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(33,"dt"),e.\u0275\u0275i18n(34,5),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(35,"dd"),e.\u0275\u0275text(36),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(37,"dt"),e.\u0275\u0275i18n(38,6),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(39,"dd"),e.\u0275\u0275text(40),e.\u0275\u0275elementEnd()()(),e.\u0275\u0275elementStart(41,"div",13)(42,"div",14),e.\u0275\u0275text(43),e.\u0275\u0275elementEnd()()()),2&t&&(e.\u0275\u0275advance(4),e.\u0275\u0275propertyInterpolate("alt",o.projectConstants.organization),e.\u0275\u0275advance(3),e.\u0275\u0275textInterpolate(o.projectConstants.projectName),e.\u0275\u0275advance(5),e.\u0275\u0275textInterpolate2(" ",o.versionNumber," ",o.versionHash," "),e.\u0275\u0275advance(2),e.\u0275\u0275textInterpolate1(" ",o.versionName," "),e.\u0275\u0275advance(6),e.\u0275\u0275textInterpolate(o.hostAddr),e.\u0275\u0275advance(4),e.\u0275\u0275textInterpolate(o.modalVariables.user),e.\u0275\u0275advance(4),e.\u0275\u0275textInterpolate(o.modalVariables.role),e.\u0275\u0275advance(4),e.\u0275\u0275textInterpolate(o.modalVariables.browserName),e.\u0275\u0275advance(4),e.\u0275\u0275textInterpolate(o.modalVariables.browserVersion),e.\u0275\u0275advance(4),e.\u0275\u0275textInterpolate(o.modalVariables.browserOS),e.\u0275\u0275advance(3),e.\u0275\u0275textInterpolate2(" ",o.projectConstants.copyright," ",o.projectConstants.license," "))},dependencies:[Ge.S],styles:[".about-container[_ngcontent-%COMP%]{background-color:#374249;background-image:url(ceph_background.gif);background-position:right bottom;background-repeat:no-repeat;color:#fff;text-shadow:1px 1px #374249}.product-versions[_ngcontent-%COMP%]{margin-top:30px}.product-versions[_ngcontent-%COMP%]   strong[_ngcontent-%COMP%]{margin-right:10px}.modal-header[_ngcontent-%COMP%]{border-bottom:0}.modal-header[_ngcontent-%COMP%]   .close[_ngcontent-%COMP%]{color:#fff;font-size:2em}.modal-body[_ngcontent-%COMP%]{padding-left:80px;padding-right:80px}.ceph-logo[_ngcontent-%COMP%]{margin-bottom:30px;width:25%}.modal-footer[_ngcontent-%COMP%]{border-top:0;display:block;padding:15px 80px 35px}"]})}}const s8=i=>({"cds--overflow-menu-options__btn":!0,disabled:i});function r8(i,n){1&i&&(e.\u0275\u0275namespaceSVG(),e.\u0275\u0275element(0,"svg",11),e.\u0275\u0275namespaceHTML(),e.\u0275\u0275elementStart(1,"span",12),e.\u0275\u0275i18n(2,5),e.\u0275\u0275elementEnd())}class ar{constructor(n,t){this.modalService=n,this.docService=t,this.icons=g.FI}ngOnInit(){this.docService.subscribeOnce("dashboard",n=>{this.docsUrl=n})}openAboutModal(){this.modalRef=this.modalService.show(ir,null,{size:"lg"})}openFeedbackModal(){this.bsModalRef=this.modalService.show(or,null,{size:"lg"})}static{this.\u0275fac=function(t){return new(t||ar)(e.\u0275\u0275directiveInject(Yt.B),e.\u0275\u0275directiveInject(t_.s))}}static{this.\u0275cmp=e.\u0275\u0275defineComponent({type:ar,selectors:[["cd-dashboard-help"]],decls:15,vars:6,consts:()=>{let n,t,o,s,d,h;return n=$localize`:␟d12014926d832cd4290d1ec455ee6e7c9abc6a0c␟1358538890185832368:Documentation ${"\ufffd#4\ufffd"}:START_TAG__SVG_SVG:${"\ufffd/#4\ufffd"}:CLOSE_TAG__SVG_SVG:`,t=$localize`:␟40601d802babd92a10b85b1086881f1b6cbd8658␟6256148965555344065:API ${"\ufffd#8\ufffd"}:START_TAG__SVG_SVG:${"\ufffd/#8\ufffd"}:CLOSE_TAG__SVG_SVG:`,o=$localize`:␟004b222ff9ef9dd4771b777950ca1d0e4cd4348a␟1726363342938046830:About`,s=$localize`:␟99d32038c1e53d712f664f91e932073dbe7c6906␟8844725458780481757:Report an issue...`,d=$localize`:␟85b79c9064aed1ead31ace985f31aa1363f6bdaf␟7911416166208830577:Help`,h=$localize`:␟85b79c9064aed1ead31ace985f31aa1363f6bdaf␟7911416166208830577:Help`,[["customTrigger",""],n,t,o,s,h,[3,"customTrigger","flip"],["target","_blank",3,"ngClass","href"],["cdsIcon","launch","size","16",1,"ms-2"],["routerLink","/api-docs","target","_blank",1,"cds--overflow-menu-options__btn"],[3,"click"],["cdsIcon","help","size","20","title",d,"role","button"],[1,"d-md-none"]]},template:function(t,o){if(1&t){const s=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"cds-overflow-menu",6)(1,"li")(2,"a",7),e.\u0275\u0275i18nStart(3,1),e.\u0275\u0275namespaceSVG(),e.\u0275\u0275element(4,"svg",8),e.\u0275\u0275i18nEnd(),e.\u0275\u0275elementEnd()(),e.\u0275\u0275namespaceHTML(),e.\u0275\u0275elementStart(5,"li")(6,"a",9),e.\u0275\u0275i18nStart(7,2),e.\u0275\u0275namespaceSVG(),e.\u0275\u0275element(8,"svg",8),e.\u0275\u0275i18nEnd(),e.\u0275\u0275elementEnd()(),e.\u0275\u0275namespaceHTML(),e.\u0275\u0275elementStart(9,"cds-overflow-menu-option",10),e.\u0275\u0275listener("click",function(){return e.\u0275\u0275restoreView(s),e.\u0275\u0275resetView(o.openAboutModal())}),e.\u0275\u0275i18n(10,3),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(11,"cds-overflow-menu-option",10),e.\u0275\u0275listener("click",function(){return e.\u0275\u0275restoreView(s),e.\u0275\u0275resetView(o.openFeedbackModal())}),e.\u0275\u0275i18n(12,4),e.\u0275\u0275elementEnd()(),e.\u0275\u0275template(13,r8,3,0,"ng-template",null,0,e.\u0275\u0275templateRefExtractor)}if(2&t){const s=e.\u0275\u0275reference(14);e.\u0275\u0275property("customTrigger",s)("flip",!0),e.\u0275\u0275advance(2),e.\u0275\u0275propertyInterpolate("href",o.docsUrl,e.\u0275\u0275sanitizeUrl),e.\u0275\u0275property("ngClass",e.\u0275\u0275pureFunction1(4,s8,!o.docsUrl))}},dependencies:[l.NgClass,u.RouterLink,D.IconDirective,D.OverflowMenu,D.OverflowMenuOption]})}}function l8(i,n){1&i&&(e.\u0275\u0275elementStart(0,"li",5)(1,"button",8),e.\u0275\u0275i18n(2,2),e.\u0275\u0275elementEnd()())}function _8(i,n){1&i&&(e.\u0275\u0275namespaceSVG(),e.\u0275\u0275element(0,"svg",11))}function c8(i,n){if(1&i&&(e.\u0275\u0275template(0,_8,1,0,"svg",9),e.\u0275\u0275elementStart(1,"span",10),e.\u0275\u0275i18n(2,3),e.\u0275\u0275elementEnd()),2&i){const t=e.\u0275\u0275nextContext();e.\u0275\u0275property("ngIf",t.userPermission.read)}}class sr{constructor(n){this.authStorageService=n;const t=this.authStorageService.getPermissions();this.userPermission=t.user,this.configOptPermission=t.configOpt}static{this.\u0275fac=function(t){return new(t||sr)(e.\u0275\u0275directiveInject(c.v))}}static{this.\u0275cmp=e.\u0275\u0275defineComponent({type:sr,selectors:[["cd-administration"]],decls:7,vars:3,consts:()=>{let n,t,o;return n=$localize`:␟a79aab4ef674bf3f6532292107c0054302236e0f␟8065364602296216021:User management`,t=$localize`:␟197e0246502ca64d0de0df0d5c2deec51d41ff45␟1283731802765869123:Telemetry configuration`,o=$localize`:␟1481ecd21e760ac919a24e26cf790acd82e40199␟3218272724598704604:Dashboard Settings`,[["customTrigger",""],n,t,o,[3,"customTrigger","flip"],[1,"cds--overflow-menu-options__option","mb-2"],["routerLink","/user-management",1,"cds--overflow-menu-options__btn"],["class","cds--overflow-menu-options__option mb-2",4,"ngIf"],["routerLink","/telemetry",1,"cds--overflow-menu-options__btn"],["cdsIcon","settings","size","20","title","user",4,"ngIf"],[1,"d-md-none"],["cdsIcon","settings","size","20","title","user"]]},template:function(t,o){if(1&t&&(e.\u0275\u0275elementStart(0,"cds-overflow-menu",4)(1,"li",5)(2,"button",6),e.\u0275\u0275i18n(3,1),e.\u0275\u0275elementEnd()(),e.\u0275\u0275template(4,l8,3,0,"li",7),e.\u0275\u0275elementEnd(),e.\u0275\u0275template(5,c8,3,1,"ng-template",null,0,e.\u0275\u0275templateRefExtractor)),2&t){const s=e.\u0275\u0275reference(6);e.\u0275\u0275property("customTrigger",s)("flip",!0),e.\u0275\u0275advance(4),e.\u0275\u0275property("ngIf",o.configOptPermission.read)}},dependencies:[l.NgIf,u.RouterLink,Ge.S,D.IconDirective,D.OverflowMenu]})}}function d8(i,n){1&i&&(e.\u0275\u0275elementStart(0,"button",13),e.\u0275\u0275i18nStart(1,3),e.\u0275\u0275namespaceSVG(),e.\u0275\u0275element(2,"svg",14),e.\u0275\u0275i18nEnd(),e.\u0275\u0275elementEnd())}function u8(i,n){1&i&&(e.\u0275\u0275namespaceSVG(),e.\u0275\u0275element(0,"svg",15),e.\u0275\u0275namespaceHTML(),e.\u0275\u0275elementStart(1,"span",16),e.\u0275\u0275i18n(2,4),e.\u0275\u0275elementEnd())}class rr{constructor(n,t){this.authStorageService=n,this.authService=t,this.icons=g.FI}ngOnInit(){this.username=this.authStorageService.getUsername(),this.sso=this.authStorageService.isSSO()}logout(){this.authService.logout()}static{this.\u0275fac=function(t){return new(t||rr)(e.\u0275\u0275directiveInject(c.v),e.\u0275\u0275directiveInject(gl.u))}}static{this.\u0275cmp=e.\u0275\u0275defineComponent({type:rr,selectors:[["cd-identity"]],decls:12,vars:4,consts:()=>{let n,t,o,s;return n=$localize`:␟58f541a6bc6e06fed76bcc31fd9694151f468eec␟7665199518770852207:${"\ufffd#3\ufffd"}:START_TAG_DIV:Logged in as ${"\ufffd0\ufffd"}:INTERPOLATION: ${"\ufffd/#3\ufffd"}:CLOSE_TAG_DIV:`,t=$localize`:␟1d2c392c770188744c8663327b22d161bde55b4e␟2070470613128717734:${"\ufffd#9\ufffd"}:START_TAG__SVG_SVG:${"\ufffd/#9\ufffd"}:CLOSE_TAG__SVG_SVG:Log out `,o=$localize`:␟945448988a638180c5429d7737d1dc5f2252db81␟5458077113971333026:${"\ufffd#2\ufffd"}:START_TAG__SVG_SVG:${"\ufffd/#2\ufffd"}:CLOSE_TAG__SVG_SVG:Change password `,s=$localize`:␟049dfd9fe6c78914ad58cf89ac6a631fca28ec74␟4885999659884855287:Logged in user`,[["customTrigger",""],n,t,o,s,[3,"customTrigger","flip"],["disabled","true",1,"show","cds--overflow-menu-options__option","cds--overflow-menu-options__option--disabled","my-2"],[1,"cds--overflow-menu-options__btn"],[1,"cds--overflow-menu-options__option","cds--overflow-menu--divider","mb-2"],["routerLink","/user-profile/edit","class","cds--overflow-menu-options__btn",4,"ngIf"],[1,"cds--overflow-menu-options__option","mb-2"],["data-testid","logout",1,"cds--overflow-menu-options__btn",3,"click"],["cdsIcon","logout","size","16",1,"me-2"],["routerLink","/user-profile/edit",1,"cds--overflow-menu-options__btn"],["cdsIcon","locked","size","16",1,"me-2"],["cdsIcon","user--filled","size","20","title","user"],[1,"d-md-none"]]},template:function(t,o){if(1&t){const s=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"cds-overflow-menu",5)(1,"li",6),e.\u0275\u0275i18nStart(2,1),e.\u0275\u0275element(3,"div",7),e.\u0275\u0275i18nEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(4,"li",8),e.\u0275\u0275template(5,d8,3,0,"button",9),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(6,"li",10)(7,"button",11),e.\u0275\u0275listener("click",function(){return e.\u0275\u0275restoreView(s),e.\u0275\u0275resetView(o.logout())}),e.\u0275\u0275i18nStart(8,2),e.\u0275\u0275namespaceSVG(),e.\u0275\u0275element(9,"svg",12),e.\u0275\u0275i18nEnd(),e.\u0275\u0275elementEnd()()(),e.\u0275\u0275template(10,u8,3,0,"ng-template",null,0,e.\u0275\u0275templateRefExtractor)}if(2&t){const s=e.\u0275\u0275reference(11);e.\u0275\u0275property("customTrigger",s)("flip",!0),e.\u0275\u0275advance(3),e.\u0275\u0275i18nExp(o.username),e.\u0275\u0275i18nApply(2),e.\u0275\u0275advance(2),e.\u0275\u0275property("ngIf",!o.sso)}},dependencies:[l.NgIf,u.RouterLink,Ge.S,D.IconDirective,D.OverflowMenu]})}}const p8=["sidenavContainer"],m8=["*"],f8=i=>({active:i}),E8=i=>({active:i,"content-theme":!0});function g8(i,n){if(1&i){const t=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementContainerStart(0),e.\u0275\u0275elementStart(1,"cds-header-item",50),e.\u0275\u0275listener("click",function(){const s=e.\u0275\u0275restoreView(t).$implicit,d=e.\u0275\u0275nextContext(2);return e.\u0275\u0275resetView(d.onClusterSelection(s.value))}),e.\u0275\u0275text(2),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementContainerEnd()}if(2&i){const t=n.$implicit;e.\u0275\u0275advance(),e.\u0275\u0275classProp("disabled",1===t.value.cluster_connection_status),e.\u0275\u0275advance(),e.\u0275\u0275textInterpolate3(" ",t.value.name," - ",null==t.value?null:t.value.cluster_alias," - ",null==t.value?null:t.value.user," ")}}function C8(i,n){if(1&i&&(e.\u0275\u0275elementStart(0,"cds-header-navigation",47)(1,"cds-header-menu",48),e.\u0275\u0275template(2,g8,3,5,"ng-container",49),e.\u0275\u0275pipe(3,"keyvalue"),e.\u0275\u0275elementEnd()()),2&i){const t=e.\u0275\u0275nextContext();e.\u0275\u0275advance(),e.\u0275\u0275property("title",t.currentClusterName),e.\u0275\u0275advance(),e.\u0275\u0275property("ngForOf",e.\u0275\u0275pipeBind1(3,3,t.clustersMap))("ngForTrackBy",t.trackByFn)}}function S8(i,n){1&i&&(e.\u0275\u0275elementStart(0,"div",41),e.\u0275\u0275element(1,"cd-administration"),e.\u0275\u0275elementEnd())}function h8(i,n){1&i&&(e.\u0275\u0275elementStart(0,"a",51),e.\u0275\u0275element(1,"img",52),e.\u0275\u0275elementEnd())}function T8(i,n){1&i&&e.\u0275\u0275elementContainer(0)}function F8(i,n){1&i&&(e.\u0275\u0275elementStart(0,"cds-sidenav-menu",64),e.\u0275\u0275namespaceSVG(),e.\u0275\u0275element(1,"svg",65),e.\u0275\u0275namespaceHTML(),e.\u0275\u0275elementStart(2,"cds-sidenav-item",66)(3,"span"),e.\u0275\u0275i18n(4,4),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(5,"cds-sidenav-item",67)(6,"span"),e.\u0275\u0275i18n(7,5),e.\u0275\u0275elementEnd()()()),2&i&&(e.\u0275\u0275advance(2),e.\u0275\u0275property("useRouter",!0),e.\u0275\u0275advance(3),e.\u0275\u0275property("useRouter",!0))}function v8(i,n){1&i&&(e.\u0275\u0275elementStart(0,"cds-sidenav-item",76)(1,"span"),e.\u0275\u0275i18n(2,6),e.\u0275\u0275elementEnd()()),2&i&&e.\u0275\u0275property("useRouter",!0)}function M8(i,n){1&i&&(e.\u0275\u0275elementStart(0,"cds-sidenav-item",77)(1,"span"),e.\u0275\u0275i18n(2,7),e.\u0275\u0275elementEnd()()),2&i&&e.\u0275\u0275property("useRouter",!0)}function R8(i,n){1&i&&(e.\u0275\u0275elementStart(0,"cds-sidenav-item",78)(1,"span"),e.\u0275\u0275i18n(2,8),e.\u0275\u0275elementEnd()()),2&i&&e.\u0275\u0275property("useRouter",!0)}function O8(i,n){1&i&&(e.\u0275\u0275elementStart(0,"cds-sidenav-item",79)(1,"span"),e.\u0275\u0275i18n(2,9),e.\u0275\u0275elementEnd()()),2&i&&e.\u0275\u0275property("useRouter",!0)}function P8(i,n){1&i&&(e.\u0275\u0275elementStart(0,"cds-sidenav-item",80)(1,"span"),e.\u0275\u0275i18n(2,10),e.\u0275\u0275elementEnd()()),2&i&&e.\u0275\u0275property("useRouter",!0)}function b8(i,n){1&i&&(e.\u0275\u0275elementStart(0,"cds-sidenav-item",81)(1,"span"),e.\u0275\u0275i18n(2,11),e.\u0275\u0275elementEnd()()),2&i&&e.\u0275\u0275property("useRouter",!0)}function N8(i,n){if(1&i&&(e.\u0275\u0275elementStart(0,"cds-sidenav-menu",68),e.\u0275\u0275namespaceSVG(),e.\u0275\u0275element(1,"svg",69),e.\u0275\u0275template(2,v8,3,1,"cds-sidenav-item",70)(3,M8,3,1,"cds-sidenav-item",71)(4,R8,3,1,"cds-sidenav-item",72)(5,O8,3,1,"cds-sidenav-item",73)(6,P8,3,1,"cds-sidenav-item",74)(7,b8,3,1,"cds-sidenav-item",75),e.\u0275\u0275elementEnd()),2&i){const t=e.\u0275\u0275nextContext(3);e.\u0275\u0275advance(2),e.\u0275\u0275property("ngIf",t.permissions.pool.read),e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf",t.permissions.hosts.read),e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf",t.permissions.osd.read),e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf",t.permissions.hosts.read),e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf",t.permissions.osd.read),e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf",t.permissions.monitor.read)}}function I8(i,n){1&i&&(e.\u0275\u0275elementStart(0,"cds-sidenav-item",88)(1,"span"),e.\u0275\u0275i18n(2,13),e.\u0275\u0275elementEnd()()),2&i&&e.\u0275\u0275property("useRouter",!0)}function A8(i,n){if(1&i&&(e.\u0275\u0275i18nStart(0,14,1),e.\u0275\u0275element(1,"small",92),e.\u0275\u0275i18nEnd()),2&i){const t=e.\u0275\u0275nextContext(5);e.\u0275\u0275advance(),e.\u0275\u0275i18nExp(null==t.summaryData||null==t.summaryData.rbd_mirroring?null:t.summaryData.rbd_mirroring.warnings),e.\u0275\u0275i18nApply(0)}}function D8(i,n){if(1&i&&(e.\u0275\u0275i18nStart(0,14,2),e.\u0275\u0275element(1,"small",93),e.\u0275\u0275i18nEnd()),2&i){const t=e.\u0275\u0275nextContext(5);e.\u0275\u0275advance(),e.\u0275\u0275i18nExp(null==t.summaryData||null==t.summaryData.rbd_mirroring?null:t.summaryData.rbd_mirroring.errors),e.\u0275\u0275i18nApply(0)}}function y8(i,n){if(1&i&&(e.\u0275\u0275elementStart(0,"cds-sidenav-item",89)(1,"span"),e.\u0275\u0275i18nStart(2,14),e.\u0275\u0275template(3,A8,2,1,"small",90)(4,D8,2,1,"small",91),e.\u0275\u0275i18nEnd(),e.\u0275\u0275elementEnd()()),2&i){const t=e.\u0275\u0275nextContext(4);e.\u0275\u0275property("useRouter",!0),e.\u0275\u0275advance(3),e.\u0275\u0275property("ngIf",0!==(null==t.summaryData||null==t.summaryData.rbd_mirroring?null:t.summaryData.rbd_mirroring.warnings)),e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf",0!==(null==t.summaryData||null==t.summaryData.rbd_mirroring?null:t.summaryData.rbd_mirroring.errors))}}function L8(i,n){1&i&&(e.\u0275\u0275elementStart(0,"cds-sidenav-item",94)(1,"span"),e.\u0275\u0275i18n(2,15),e.\u0275\u0275elementEnd()()),2&i&&e.\u0275\u0275property("useRouter",!0)}function $8(i,n){if(1&i&&(e.\u0275\u0275elementStart(0,"cds-sidenav-menu",82),e.\u0275\u0275namespaceSVG(),e.\u0275\u0275element(1,"svg",83),e.\u0275\u0275template(2,I8,3,1,"cds-sidenav-item",84)(3,y8,5,3,"cds-sidenav-item",85)(4,L8,3,1,"cds-sidenav-item",86),e.\u0275\u0275namespaceHTML(),e.\u0275\u0275elementStart(5,"cds-sidenav-item",87)(6,"span"),e.\u0275\u0275i18n(7,12),e.\u0275\u0275elementEnd()()()),2&i){const t=e.\u0275\u0275nextContext().ngIf,o=e.\u0275\u0275nextContext(2);e.\u0275\u0275advance(2),e.\u0275\u0275property("ngIf",o.permissions.rbdImage.read&&t.rbd),e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf",o.permissions.rbdMirroring.read&&t.mirroring),e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf",o.permissions.iscsi.read&&t.iscsi),e.\u0275\u0275advance(),e.\u0275\u0275property("useRouter",!0)}}function x8(i,n){1&i&&(e.\u0275\u0275elementStart(0,"cds-sidenav-item",106)(1,"span"),e.\u0275\u0275i18n(2,24),e.\u0275\u0275elementEnd()()),2&i&&e.\u0275\u0275property("useRouter",!0)}function U8(i,n){if(1&i&&(e.\u0275\u0275elementStart(0,"cds-sidenav-menu",95),e.\u0275\u0275namespaceSVG(),e.\u0275\u0275element(1,"svg",96),e.\u0275\u0275namespaceHTML(),e.\u0275\u0275elementStart(2,"cds-sidenav-item",97)(3,"span"),e.\u0275\u0275i18n(4,16),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(5,"cds-sidenav-item",98)(6,"span"),e.\u0275\u0275i18n(7,17),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(8,"cds-sidenav-item",99)(9,"span"),e.\u0275\u0275i18n(10,18),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(11,"cds-sidenav-item",100)(12,"span"),e.\u0275\u0275i18n(13,19),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(14,"cds-sidenav-item",101)(15,"span"),e.\u0275\u0275i18n(16,20),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(17,"cds-sidenav-item",102)(18,"span"),e.\u0275\u0275i18n(19,21),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(20,"cds-sidenav-item",103)(21,"span"),e.\u0275\u0275i18n(22,22),e.\u0275\u0275elementEnd()(),e.\u0275\u0275template(23,x8,3,1,"cds-sidenav-item",104),e.\u0275\u0275elementStart(24,"cds-sidenav-item",105)(25,"span"),e.\u0275\u0275i18n(26,23),e.\u0275\u0275elementEnd()()()),2&i){const t=e.\u0275\u0275nextContext().ngIf,o=e.\u0275\u0275nextContext(2);e.\u0275\u0275advance(2),e.\u0275\u0275property("useRouter",!0),e.\u0275\u0275advance(3),e.\u0275\u0275property("useRouter",!0),e.\u0275\u0275advance(3),e.\u0275\u0275property("useRouter",!0),e.\u0275\u0275advance(3),e.\u0275\u0275property("useRouter",!0),e.\u0275\u0275advance(3),e.\u0275\u0275property("useRouter",!0),e.\u0275\u0275advance(3),e.\u0275\u0275property("useRouter",!0),e.\u0275\u0275advance(3),e.\u0275\u0275property("useRouter",!0),e.\u0275\u0275advance(3),e.\u0275\u0275property("ngIf",o.permissions.nfs.read&&t.nfs),e.\u0275\u0275advance(),e.\u0275\u0275property("useRouter",!0)}}function w8(i,n){1&i&&(e.\u0275\u0275elementStart(0,"cds-sidenav-item",112)(1,"span"),e.\u0275\u0275i18n(2,25),e.\u0275\u0275elementEnd()()),2&i&&e.\u0275\u0275property("useRouter",!0)}function G8(i,n){1&i&&(e.\u0275\u0275elementStart(0,"cds-sidenav-item",113)(1,"span"),e.\u0275\u0275i18n(2,26),e.\u0275\u0275elementEnd()()),2&i&&e.\u0275\u0275property("useRouter",!0)}function H8(i,n){1&i&&(e.\u0275\u0275elementStart(0,"cds-sidenav-item",114)(1,"span"),e.\u0275\u0275i18n(2,27),e.\u0275\u0275elementEnd()()),2&i&&e.\u0275\u0275property("useRouter",!0)}function V8(i,n){if(1&i&&(e.\u0275\u0275elementStart(0,"cds-sidenav-menu",107),e.\u0275\u0275namespaceSVG(),e.\u0275\u0275element(1,"svg",108),e.\u0275\u0275template(2,w8,3,1,"cds-sidenav-item",109)(3,G8,3,1,"cds-sidenav-item",110)(4,H8,3,1,"cds-sidenav-item",111),e.\u0275\u0275elementEnd()),2&i){const t=e.\u0275\u0275nextContext().ngIf,o=e.\u0275\u0275nextContext(2);e.\u0275\u0275advance(2),e.\u0275\u0275property("ngIf",o.permissions.cephfs.read&&t.cephfs),e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf",o.permissions.nfs.read&&t.nfs),e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf",o.permissions.smb.read)}}function B8(i,n){1&i&&(e.\u0275\u0275elementStart(0,"cds-sidenav-item",119)(1,"span"),e.\u0275\u0275i18n(2,28),e.\u0275\u0275elementEnd()()),2&i&&e.\u0275\u0275property("useRouter",!0)}function z8(i,n){if(1&i&&(e.\u0275\u0275i18nStart(0,29,1),e.\u0275\u0275element(1,"small",123),e.\u0275\u0275i18nEnd()),2&i){const t=e.\u0275\u0275nextContext(5);e.\u0275\u0275advance(),e.\u0275\u0275i18nExp(t.prometheusAlertService.activeCriticalAlerts),e.\u0275\u0275i18nApply(0)}}function X8(i,n){if(1&i&&(e.\u0275\u0275i18nStart(0,29,2),e.\u0275\u0275element(1,"small",124),e.\u0275\u0275i18nEnd()),2&i){const t=e.\u0275\u0275nextContext(5);e.\u0275\u0275advance(),e.\u0275\u0275i18nExp(t.prometheusAlertService.activeWarningAlerts),e.\u0275\u0275i18nApply(0)}}function k8(i,n){if(1&i&&(e.\u0275\u0275elementStart(0,"cds-sidenav-item",120)(1,"span"),e.\u0275\u0275i18nStart(2,29),e.\u0275\u0275elementContainer(3),e.\u0275\u0275template(4,z8,2,1,"small",121)(5,X8,2,1,"small",122),e.\u0275\u0275i18nEnd(),e.\u0275\u0275elementEnd()()),2&i){const t=e.\u0275\u0275nextContext(4);e.\u0275\u0275property("useRouter",!0),e.\u0275\u0275advance(4),e.\u0275\u0275property("ngIf",t.prometheusAlertService.activeCriticalAlerts>0),e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf",t.prometheusAlertService.activeWarningAlerts>0)}}function j8(i,n){if(1&i&&(e.\u0275\u0275elementStart(0,"cds-sidenav-menu",115),e.\u0275\u0275namespaceSVG(),e.\u0275\u0275element(1,"svg",116),e.\u0275\u0275template(2,B8,3,1,"cds-sidenav-item",117)(3,k8,6,3,"cds-sidenav-item",118),e.\u0275\u0275elementEnd()),2&i){const t=e.\u0275\u0275nextContext(3);e.\u0275\u0275advance(2),e.\u0275\u0275property("ngIf",t.permissions.log.read),e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf",t.permissions.prometheus.read)}}function W8(i,n){1&i&&(e.\u0275\u0275elementStart(0,"cds-sidenav-item",132)(1,"span"),e.\u0275\u0275i18n(2,30),e.\u0275\u0275elementEnd()()),2&i&&e.\u0275\u0275property("useRouter",!0)}function K8(i,n){1&i&&(e.\u0275\u0275elementStart(0,"cds-sidenav-item",133)(1,"span"),e.\u0275\u0275i18n(2,31),e.\u0275\u0275elementEnd()()),2&i&&e.\u0275\u0275property("useRouter",!0)}function Q8(i,n){1&i&&(e.\u0275\u0275elementStart(0,"cds-sidenav-item",134)(1,"span"),e.\u0275\u0275i18n(2,32),e.\u0275\u0275elementEnd()()),2&i&&e.\u0275\u0275property("useRouter",!0)}function Y8(i,n){1&i&&(e.\u0275\u0275elementStart(0,"cds-sidenav-item",135)(1,"span"),e.\u0275\u0275i18n(2,33),e.\u0275\u0275elementEnd()()),2&i&&e.\u0275\u0275property("useRouter",!0)}function J8(i,n){1&i&&(e.\u0275\u0275elementStart(0,"cds-sidenav-item",136)(1,"span"),e.\u0275\u0275i18n(2,34),e.\u0275\u0275elementEnd()()),2&i&&e.\u0275\u0275property("useRouter",!0)}function Z8(i,n){if(1&i&&(e.\u0275\u0275elementStart(0,"cds-sidenav-menu",125),e.\u0275\u0275namespaceSVG(),e.\u0275\u0275element(1,"svg",126),e.\u0275\u0275template(2,W8,3,1,"cds-sidenav-item",127)(3,K8,3,1,"cds-sidenav-item",128)(4,Q8,3,1,"cds-sidenav-item",129)(5,Y8,3,1,"cds-sidenav-item",130)(6,J8,3,1,"cds-sidenav-item",131),e.\u0275\u0275elementEnd()),2&i){const t=e.\u0275\u0275nextContext(3);e.\u0275\u0275advance(2),e.\u0275\u0275property("ngIf",t.permissions.hosts.read),e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf",t.permissions.configOpt.read),e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf",t.permissions.configOpt.read),e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf",t.permissions.configOpt.read),e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf",t.permissions.configOpt.read)}}function q8(i,n){if(1&i){const t=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementContainerStart(0),e.\u0275\u0275elementStart(1,"cds-sidenav",54,2),e.\u0275\u0275listener("click",function(s){e.\u0275\u0275restoreView(t);const d=e.\u0275\u0275nextContext(2);return e.\u0275\u0275resetView(d.onMenuClick(s))}),e.\u0275\u0275elementStart(3,"cds-sidenav-item",55),e.\u0275\u0275namespaceSVG(),e.\u0275\u0275element(4,"svg",56),e.\u0275\u0275namespaceHTML(),e.\u0275\u0275elementStart(5,"span"),e.\u0275\u0275i18n(6,3),e.\u0275\u0275elementEnd()(),e.\u0275\u0275template(7,F8,8,2,"cds-sidenav-menu",57)(8,N8,8,6,"cds-sidenav-menu",58)(9,$8,8,4,"cds-sidenav-menu",59)(10,U8,27,9,"cds-sidenav-menu",60)(11,V8,5,3,"cds-sidenav-menu",61)(12,j8,4,2,"cds-sidenav-menu",62)(13,Z8,7,5,"cds-sidenav-menu",63),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementContainerEnd()}if(2&i){const t=n.ngIf,o=e.\u0275\u0275nextContext(2);e.\u0275\u0275advance(),e.\u0275\u0275property("expanded",o.showMenuSidebar),e.\u0275\u0275advance(2),e.\u0275\u0275property("useRouter",!0),e.\u0275\u0275advance(4),e.\u0275\u0275property("ngIf",o.permissions.configOpt.read),e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf",o.permissions.hosts.read||o.permissions.monitor.read||o.permissions.osd.read||o.permissions.pool.read),e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf",(o.permissions.rbdImage.read||o.permissions.rbdMirroring.read||o.permissions.iscsi.read)&&(t.rbd||t.mirroring||t.iscsi)),e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf",o.permissions.rgw.read&&t.rgw),e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf",o.permissions.nfs.read&&t.nfs||o.permissions.cephfs.read&&t.cephfs||o.permissions.smb.read),e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf",o.permissions.log.read||o.permissions.prometheus.read),e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf",o.permissions.configOpt.read||o.permissions.hosts.read)}}function e3(i,n){if(1&i&&(e.\u0275\u0275template(0,q8,14,9,"ng-container",53),e.\u0275\u0275pipe(1,"async")),2&i){const t=e.\u0275\u0275nextContext();e.\u0275\u0275property("ngIf",e.\u0275\u0275pipeBind1(1,1,t.enabledFeature$))}}class lr{constructor(n,t,o,s,d,h,I,$,w){this.notificationService=n,this.authStorageService=t,this.multiClusterService=o,this.router=s,this.summaryService=d,this.featureToggles=h,this.prometheusAlertService=I,this.cookieService=$,this.settingsService=w,this.clusterDetails=[],this.clusterTokenStatus={},this.rightSidebarOpen=!1,this.showMenuSidebar=!0,this.simplebar={autoHide:!1},this.displayedSubMenu={},this.subs=new K.Subscription,this.clustersMap=new Map,this.permissions=this.authStorageService.getPermissions(),this.enabledFeature$=this.featureToggles.get()}ngOnInit(){this.subs.add(this.multiClusterService.subscribe(n=>{const t=n.config;t&&(this.clustersMap.clear(),Object.keys(t).forEach(o=>{t[o].forEach(d=>{const h=d.user,$=`${d.url}-${h}`;this.clustersMap.set($,d),this.checkClusterConnectionStatus()})}),this.selectedCluster=this.clustersMap.get(`${n.current_url}-${n.current_user}`)||{},this.currentClusterName=`${this.selectedCluster?.name} - ${this.selectedCluster?.cluster_alias} - ${this.selectedCluster?.user}`)})),this.subs.add(this.summaryService.subscribe(n=>{this.summaryData=n})),this.subs.add(this.multiClusterService.subscribeClusterTokenStatus(n=>{this.clusterTokenStatus=n,this.checkClusterConnectionStatus()}))}ngOnDestroy(){this.subs.unsubscribe()}checkClusterConnectionStatus(){this.clustersMap.forEach((n,t)=>{const o=this.clusterTokenStatus[n.name],s=o?o.status:0,d=o?o.user:n.user;this.clustersMap.set(t,{...n,cluster_connection_status:s,user:d}),"local-cluster"===n.cluster_alias&&this.clustersMap.set(t,{...n,cluster_connection_status:0,user:d})})}blockHealthColor(){if(this.summaryData&&this.summaryData.rbd_mirroring){if(this.summaryData.rbd_mirroring.errors>0)return{color:"#f4926c"};if(this.summaryData.rbd_mirroring.warnings>0)return{color:"#f0ad4e"}}}onMenuClick(n){const t=n.target;if(!(t instanceof HTMLElement))return;const o=t.closest("cds-sidenav-menu");if(o){const s=o.getBoundingClientRect();(s.top<0||s.bottom>window.innerHeight)&&o.scrollIntoView({behavior:"smooth",block:"nearest"})}}toggleSubMenu(n){this.displayedSubMenu[n]=!this.displayedSubMenu[n]}toggleRightSidebar(){this.rightSidebarOpen=!this.rightSidebarOpen}onClusterSelection(n){this.multiClusterService.setCluster(n).subscribe(t=>{"local-cluster"===n.cluster_alias?localStorage.setItem("cluster_api_url",""):(localStorage.setItem("current_cluster_name",`${n.name}-${n.user}`),localStorage.setItem("cluster_api_url",n.url)),this.selectedCluster=this.clustersMap.get(`${n.url}-${n.user}`)||{};const o=t.config;o&&"object"==typeof o&&Object.keys(o).forEach(s=>{o[s].forEach(h=>{const I=h.name,$=h.token,w=h.user;I===this.selectedCluster.name&&w===this.selectedCluster.user&&"local-cluster"!==h.cluster_alias&&this.cookieService.setToken(`${I}-${w}`,$)})})},()=>{},()=>{this.settingsService.ifSettingConfigured("api/grafana/url",()=>{},()=>{},!0);const t=this.router.url.split("?")[0];this.multiClusterService.refreshMultiCluster(t)})}toggleSidebar(){this.notificationService.toggleSidebar()}trackByFn(n){return n}static{this.\u0275fac=function(t){return new(t||lr)(e.\u0275\u0275directiveInject(Q.J),e.\u0275\u0275directiveInject(c.v),e.\u0275\u0275directiveInject(yi.J),e.\u0275\u0275directiveInject(u.Router),e.\u0275\u0275directiveInject(on.E),e.\u0275\u0275directiveInject(vi.b),e.\u0275\u0275directiveInject(hn),e.\u0275\u0275directiveInject(go),e.\u0275\u0275directiveInject(Io.h))}}static{this.\u0275cmp=e.\u0275\u0275defineComponent({type:lr,selectors:[["cd-navigation"]],viewQuery:function(t,o){if(1&t&&e.\u0275\u0275viewQuery(p8,5),2&t){let s;e.\u0275\u0275queryRefresh(s=e.\u0275\u0275loadQuery())&&(o.sidenavContainer=s.first)}},ngContentSelectors:m8,decls:24,vars:11,consts:()=>{let n,t,o,s,d,h,I,$,w,X,J,re,de,Me,ve,Se,$e,Te,ke,rt,mt,xe,Je,vt,Mt,Ye,yt,Ze,sn,rn,ln,Bt,_n,cn,Ke,Un,wn,Gn,Hn,Vn,bn,Bn,zn,Xn,kn,Xe,ta,na,oa,ia,aa,Ko,Qo,Yo,sa,ra,la,Jo,Zo,_a,Fo,qo,ei,ti,ni,oi,ca,da,ua,pa,ma;return n=$localize`:␟f65253954b66e929a8b4d5ecaf61f9129f8cec64␟6570363013146073520:Dashboard`,t=$localize`:␟a1c7fcb176269a1ee593e35046ac8ba625db4216␟6485831342596637679:Multi-Cluster`,o=$localize`:␟f4d1dd59b039ad818d9da7e29a773e10e41d9821␟2944102521023817891:Cluster`,s=$localize`:␟7f5d0c10614e8a34f0e2dad33a0568277c50cf69␟420763834450076269:Block`,d=$localize`:␟a3c95219829b1b12ce2674f49df3a1a195407cfc␟3381412717703555378:Object`,h=$localize`:␟48139a8f408fb79f24e82673e89e23c2ac314f23␟8455204924704616723:File`,I=$localize`:␟84c5b4fda8b090c113677785818523e1e0761699␟503359249737927668:Observability`,$=$localize`:␟b7648e7aced164498aa843b5c4e8f2f1c36a7919␟7844706011418789951:Administration`,w=$localize`:␟d8f19bddce3ad7ddadacf370d2e25da484b75d45␟232162745328253994: Dashboard`,X=$localize`:␟e95ae009d0bdb45fcc656e8b65248cf7396080d5␟2614607010577950577:Overview`,J=$localize`:␟62efb34e984d84f7428821489b6d287845768dc9␟8805886553284695598:Manage Clusters`,re=$localize`:␟e95ae009d0bdb45fcc656e8b65248cf7396080d5␟2614607010577950577:Overview`,de=$localize`:␟62efb34e984d84f7428821489b6d287845768dc9␟8805886553284695598:Manage Clusters`,Me=$localize`:␟92899fa68e8ca108912163ff58edc8540e453787␟8231861638104479971:Pools`,ve=$localize`:␟099b441d49333b3c6d30b36dc0a4763e64c78920␟4435206372750903836:Hosts`,Se=$localize`:␟1a9183778f2c6473d7ccb080f651caa01faaf70c␟6024104799101504292:OSDs`,$e=$localize`:␟17137bac47e1e020d139256ded0006a671966e73␟2981276866614410645:Physical Disks`,Te=$localize`:␟e9ce932d4a827ce0320d64128251b35bb0623e18␟8815412682602520629:CRUSH Map`,ke=$localize`:␟624f596cc3320f5e0a0d7c7346c364e5af9bdd8c␟5808753866335051996:Monitors`,rt=$localize`:␟92899fa68e8ca108912163ff58edc8540e453787␟8231861638104479971:Pools`,mt=$localize`:␟099b441d49333b3c6d30b36dc0a4763e64c78920␟4435206372750903836:Hosts`,xe=$localize`:␟1a9183778f2c6473d7ccb080f651caa01faaf70c␟6024104799101504292:OSDs`,Je=$localize`:␟17137bac47e1e020d139256ded0006a671966e73␟2981276866614410645:Physical Disks`,vt=$localize`:␟e9ce932d4a827ce0320d64128251b35bb0623e18␟8815412682602520629:CRUSH Map`,Mt=$localize`:␟624f596cc3320f5e0a0d7c7346c364e5af9bdd8c␟5808753866335051996:Monitors`,Ye=$localize`:␟b73f7f5060fb22a1e9ec462b1bb02493fa3ab866␟414887388288176527:Images`,yt=$localize`:␟3c2562ba992127203dcfd014010b03cb7b8113c6␟3154623626913350957:Mirroring`,Ze=$localize`:␟811c241d56601b91ef26735b770e64428089b950␟4207854631702822864:iSCSI`,sn=$localize`:␟1ba9ae4994f6f9b6e6580875a6f8151d60c7c034␟81470534686266676:NVMe/TCP`,rn=$localize`:␟1ba9ae4994f6f9b6e6580875a6f8151d60c7c034␟81470534686266676:NVMe/TCP`,ln=$localize`:␟b73f7f5060fb22a1e9ec462b1bb02493fa3ab866␟414887388288176527:Images`,Bt=$localize`:␟e3b22c8765a5fd03af3c5d6c1e8476d35d6efc04␟7960488158323688099:Mirroring ${"\ufffd*3:1\ufffd\ufffd#1:1\ufffd"}:START_SMALL_TEXT:${"\ufffd0:1\ufffd"}:INTERPOLATION:${"[\ufffd/#1:1\ufffd\ufffd/*3:1\ufffd|\ufffd/#1:2\ufffd\ufffd/*4:2\ufffd]"}:CLOSE_SMALL_TEXT:${"\ufffd*4:2\ufffd\ufffd#1:2\ufffd"}:START_SMALL_TEXT_1:${"\ufffd0:2\ufffd"}:INTERPOLATION_1:${"[\ufffd/#1:1\ufffd\ufffd/*3:1\ufffd|\ufffd/#1:2\ufffd\ufffd/*4:2\ufffd]"}:CLOSE_SMALL_TEXT:`,Bt=e.\u0275\u0275i18nPostprocess(Bt),_n=$localize`:␟811c241d56601b91ef26735b770e64428089b950␟4207854631702822864:iSCSI`,cn=$localize`:␟e95ae009d0bdb45fcc656e8b65248cf7396080d5␟2614607010577950577:Overview`,Ke=$localize`:␟4d13a9cd5ed3dcee0eab22cb25198d43886942be␟4555457172864212828:Users`,Un=$localize`:␟9515520496da83179d8b08132f00f575512a1f40␟4310421644728026112:Buckets`,wn=$localize`:␟e4d9a764b49b6bebf77ac91f40c9fda401052ce8␟7741102765121622071:Topics`,Gn=$localize`:␟bf402445636acc83bf52682343402e7696df851f␟5985785846683222538:Tiering`,Hn=$localize`:␟c146f67148c471f9c8f998a9f9e047fb46780842␟839372701448845895:Multi-site`,Vn=$localize`:␟8a9910cd114c1deb9af74f6f99b4173403965bf2␟5130480165747305341:Gateways`,bn=$localize`:␟a24eabd99ea5af20f5f94c4484649cd30370042b␟8376409679195641689:NFS`,Bn=$localize`:␟4a41f824a35ba01d5bd7be61aa06b3e8145209d0␟3008420115644088420:Configuration`,zn=$localize`:␟e95ae009d0bdb45fcc656e8b65248cf7396080d5␟2614607010577950577:Overview`,Xn=$localize`:␟4d13a9cd5ed3dcee0eab22cb25198d43886942be␟4555457172864212828:Users`,kn=$localize`:␟9515520496da83179d8b08132f00f575512a1f40␟4310421644728026112:Buckets`,Xe=$localize`:␟e4d9a764b49b6bebf77ac91f40c9fda401052ce8␟7741102765121622071:Topics`,ta=$localize`:␟bf402445636acc83bf52682343402e7696df851f␟5985785846683222538:Tiering`,na=$localize`:␟c146f67148c471f9c8f998a9f9e047fb46780842␟839372701448845895:Multi-site`,oa=$localize`:␟8a9910cd114c1deb9af74f6f99b4173403965bf2␟5130480165747305341:Gateways`,ia=$localize`:␟4a41f824a35ba01d5bd7be61aa06b3e8145209d0␟3008420115644088420:Configuration`,aa=$localize`:␟a24eabd99ea5af20f5f94c4484649cd30370042b␟8376409679195641689:NFS`,Ko=$localize`:␟5276fc60d54d667116babb723641b21281d37271␟8522370853206981739:File Systems`,Qo=$localize`:␟a24eabd99ea5af20f5f94c4484649cd30370042b␟8376409679195641689:NFS`,Yo=$localize`:␟b6bcb1accc6a67274dec422093a25dd313ffa21e␟2293401351402345061:SMB`,sa=$localize`:␟5276fc60d54d667116babb723641b21281d37271␟8522370853206981739:File Systems`,ra=$localize`:␟a24eabd99ea5af20f5f94c4484649cd30370042b␟8376409679195641689:NFS`,la=$localize`:␟b6bcb1accc6a67274dec422093a25dd313ffa21e␟2293401351402345061:SMB`,Jo=$localize`:␟eb3d5aefff38a814b76da74371cbf02c0789a1ef␟4804785061014590286:Logs`,Zo=$localize`:␟9fe218829514884cdd0ca2300573a4e0428c324f␟8154453727027523235:Alerts`,_a=$localize`:␟eb3d5aefff38a814b76da74371cbf02c0789a1ef␟4804785061014590286:Logs`,Fo=$localize`:␟f0c6ac59171dee8a5312c7de7fb09cd1e24887ea␟5654772077742514064:${"\ufffd#3\ufffd"}:START_TAG_NG_CONTAINER:Alerts${"\ufffd/#3\ufffd"}:CLOSE_TAG_NG_CONTAINER:${"\ufffd*4:1\ufffd\ufffd#1:1\ufffd"}:START_SMALL_TEXT:${"\ufffd0:1\ufffd"}:INTERPOLATION:${"[\ufffd/#1:1\ufffd\ufffd/*4:1\ufffd|\ufffd/#1:2\ufffd\ufffd/*5:2\ufffd]"}:CLOSE_SMALL_TEXT:${"\ufffd*5:2\ufffd\ufffd#1:2\ufffd"}:START_SMALL_TEXT_1:${"\ufffd0:2\ufffd"}:INTERPOLATION_1:${"[\ufffd/#1:1\ufffd\ufffd/*4:1\ufffd|\ufffd/#1:2\ufffd\ufffd/*5:2\ufffd]"}:CLOSE_SMALL_TEXT:`,Fo=e.\u0275\u0275i18nPostprocess(Fo),qo=$localize`:␟419d940613972cc3fae9c8ea0a4306dbf80616e5␟7143579180750436311:Services`,ei=$localize`:␟f147d0f7f965cccee2e77294cba8e1b88021fa08␟2849750161085431718:Upgrade`,ti=$localize`:␟1fa0812351addefa245f0960fda26dc3da5be5ea␟5076331095618329654:Ceph Users`,ni=$localize`:␟e7b2bc4b86de6e96d353f6bf2b4d793ea3a19ba0␟4180442944663807003:Manager Modules`,oi=$localize`:␟4a41f824a35ba01d5bd7be61aa06b3e8145209d0␟3008420115644088420:Configuration`,ca=$localize`:␟419d940613972cc3fae9c8ea0a4306dbf80616e5␟7143579180750436311:Services`,da=$localize`:␟f147d0f7f965cccee2e77294cba8e1b88021fa08␟2849750161085431718:Upgrade`,ua=$localize`:␟1fa0812351addefa245f0960fda26dc3da5be5ea␟5076331095618329654:Ceph Users`,pa=$localize`:␟e7b2bc4b86de6e96d353f6bf2b4d793ea3a19ba0␟4180442944663807003:Manager Modules`,ma=$localize`:␟4a41f824a35ba01d5bd7be61aa06b3e8145209d0␟3008420115644088420:Configuration`,[["brandTemplate",""],["cd_menu",""],["sidenavContainer",""],w,re,de,rt,mt,xe,Je,vt,Mt,rn,ln,Bt,_n,zn,Xn,kn,Xe,ta,na,oa,ia,aa,sa,ra,la,_a,Fo,ca,da,ua,pa,ma,[1,"cd-navbar-main"],["name","Ceph Dashboard",1,"cd-navbar-top",3,"brand"],["data-testid","main-menu-toggler",3,"selected","active"],["class","cluster-switcher",4,"ngIf"],[1,"d-flex"],[1,"cds--btn","cds--btn--icon-only","cds--header__action",3,"click"],[1,"cds--btn","cds--btn--icon-only","cds--header__action"],["class","cds--btn cds--btn--icon-only cds--header__action",4,"ngIf"],[1,"wrapper"],["id","sidebar",3,"ngClass"],[4,"ngTemplateOutlet"],["id","content",3,"ngClass"],[1,"cluster-switcher"],["data-testid","selected-cluster",3,"title"],[4,"ngFor","ngForOf","ngForTrackBy"],["data-testid","select-a-cluster",3,"click"],["routerLink","/dashboard",1,"cds--header__name","navbar-brand","ms-3"],["src","assets/Ceph_Ceph_Logo_with_text_white.svg","alt","Ceph"],[4,"ngIf"],[1,"mt-5",3,"click","expanded"],["route","/dashboard","title",n,1,"nav-item","tc_menuitem_dashboard",3,"useRouter"],["cdsIcon","template","icon","","size","20"],["title",t,4,"ngIf"],["title",o,"class","tc_menuitem_cluster",4,"ngIf"],["title",s,"class","tc_menuitem_block",4,"ngIf"],["title",d,"class","nav-item tc_menuitem_rgw",4,"ngIf"],["title",h,"class","tc_menuitem_file",4,"ngIf"],["title",I,"class","tc_menuitem_observe",4,"ngIf"],["title",$,"class","tc_menuitem_admin",4,"ngIf"],["title",t],["cdsIcon","edge-cluster","icon","","size","20"],["route","/multi-cluster/overview","title",X,1,"tc_submenuitem","tc_submenuitem_multiCluster_overview",3,"useRouter"],["route","/multi-cluster/manage-clusters","title",J,1,"tc_submenuitem","tc_submenuitem_multiCluster_manage_clusters",3,"useRouter"],["title",o,1,"tc_menuitem_cluster"],["cdsIcon","web-services--cluster","icon","","size","20"],["route","/pool","title",Me,"class","tc_submenuitem tc_submenuitem_cluster_pool",3,"useRouter",4,"ngIf"],["route","/hosts","title",ve,"class","tc_submenuitem tc_submenuitem_cluster_hosts",3,"useRouter",4,"ngIf"],["route","/osd","title",Se,"class","tc_submenuitem tc_submenuitem_cluster_osds",3,"useRouter",4,"ngIf"],["route","/inventory","title",$e,"class","tc_submenuitem tc_submenuitem_cluster_inventory",3,"useRouter",4,"ngIf"],["route","/crush-map","title",Te,"class","tc_submenuitem tc_submenuitem_cluster_crush",3,"useRouter",4,"ngIf"],["route","/monitor","title",ke,"class","tc_submenuitem tc_submenuitem_cluster_monitor",3,"useRouter",4,"ngIf"],["route","/pool","title",Me,1,"tc_submenuitem","tc_submenuitem_cluster_pool",3,"useRouter"],["route","/hosts","title",ve,1,"tc_submenuitem","tc_submenuitem_cluster_hosts",3,"useRouter"],["route","/osd","title",Se,1,"tc_submenuitem","tc_submenuitem_cluster_osds",3,"useRouter"],["route","/inventory","title",$e,1,"tc_submenuitem","tc_submenuitem_cluster_inventory",3,"useRouter"],["route","/crush-map","title",Te,1,"tc_submenuitem","tc_submenuitem_cluster_crush",3,"useRouter"],["route","/monitor","title",ke,1,"tc_submenuitem","tc_submenuitem_cluster_monitor",3,"useRouter"],["title",s,1,"tc_menuitem_block"],["cdsIcon","datastore","icon","","size","20"],["route","/block/rbd","title",Ye,"class","tc_submenuitem tc_submenuitem_block_images",3,"useRouter",4,"ngIf"],["route","/block/mirroring","title",yt,"class","tc_submenuitem tc_submenuitem_block_mirroring",3,"useRouter",4,"ngIf"],["route","/block/iscsi","title",Ze,"class","tc_submenuitem tc_submenuitem_block_iscsi",3,"useRouter",4,"ngIf"],["route","/block/nvmeof","title",sn,1,"tc_submenuitem","tc_submenuitem_block_nvme",3,"useRouter"],["route","/block/rbd","title",Ye,1,"tc_submenuitem","tc_submenuitem_block_images",3,"useRouter"],["route","/block/mirroring","title",yt,1,"tc_submenuitem","tc_submenuitem_block_mirroring",3,"useRouter"],["class","badge badge-warning",4,"ngIf"],["class","badge badge-danger",4,"ngIf"],[1,"badge","badge-warning"],[1,"badge","badge-danger"],["route","/block/iscsi","title",Ze,1,"tc_submenuitem","tc_submenuitem_block_iscsi",3,"useRouter"],["title",d,1,"nav-item","tc_menuitem_rgw"],["cdsIcon","object-storage","icon","","size","20"],["route","/rgw/overview","title",cn,1,"tc_submenuitem","tc_submenuitem_rgw_overview",3,"useRouter"],["route","/rgw/user","title",Ke,1,"tc_submenuitem","tc_submenuitem_rgw_users",3,"useRouter"],["route","/rgw/bucket","title",Un,1,"tc_submenuitem","tc_submenuitem_rgw_buckets",3,"useRouter"],["route","/rgw/topic","title",wn,1,"tc_submenuitem","tc_submenuitem_rgw_topics",3,"useRouter"],["route","/rgw/tiering","title",Gn,1,"tc_submenuitem","tc_submenuitem_rgw_tiering",3,"useRouter"],["route","/rgw/multisite","title",Hn,1,"tc_submenuitem","tc_submenuitem_rgw_multi-site",3,"useRouter"],["route","/rgw/daemon","title",Vn,1,"tc_submenuitem","tc_submenuitem_rgw_daemons",3,"useRouter"],["route","/rgw/nfs","title",bn,"class","tc_submenuitem tc_submenuitem_rgw_nfs",3,"useRouter",4,"ngIf"],["route","/rgw/configuration","title",Bn,1,"tc_submenuitem","tc_submenuitem_rgw_configuration",3,"useRouter"],["route","/rgw/nfs","title",bn,1,"tc_submenuitem","tc_submenuitem_rgw_nfs",3,"useRouter"],["title",h,1,"tc_menuitem_file"],["cdsIcon","file-storage","icon","","size","20"],["route","/cephfs/fs","title",Ko,"class","tc_submenuitem tc_submenuitem_file_cephfs",3,"useRouter",4,"ngIf"],["route","/cephfs/nfs","title",Qo,"class","tc_submenuitem tc_submenuitem_file_nfs",3,"useRouter",4,"ngIf"],["route","/cephfs/smb","title",Yo,"class","tc_submenuitem tc_submenuitem_file_smb",3,"useRouter",4,"ngIf"],["route","/cephfs/fs","title",Ko,1,"tc_submenuitem","tc_submenuitem_file_cephfs",3,"useRouter"],["route","/cephfs/nfs","title",Qo,1,"tc_submenuitem","tc_submenuitem_file_nfs",3,"useRouter"],["route","/cephfs/smb","title",Yo,1,"tc_submenuitem","tc_submenuitem_file_smb",3,"useRouter"],["title",I,1,"tc_menuitem_observe"],["cdsIcon","observed--hail","icon","","size","20"],["route","/logs","title",Jo,"class","tc_submenuitem tc_submenuitem_observe_log",3,"useRouter",4,"ngIf"],["route","/monitoring","title",Zo,"class","tc_submenuitem tc_submenuitem_observe_monitoring",3,"useRouter",4,"ngIf"],["route","/logs","title",Jo,1,"tc_submenuitem","tc_submenuitem_observe_log",3,"useRouter"],["route","/monitoring","title",Zo,1,"tc_submenuitem","tc_submenuitem_observe_monitoring",3,"useRouter"],["class","badge badge-danger ms-1",4,"ngIf"],["class","badge badge-warning ms-1",4,"ngIf"],[1,"badge","badge-danger","ms-1"],[1,"badge","badge-warning","ms-1"],["title",$,1,"tc_menuitem_admin"],["cdsIcon","network--admin-control","icon","","size","20"],["route","/services/","title",qo,"class","tc_submenuitem tc_submenuitem_admin_services",3,"useRouter",4,"ngIf"],["route","/upgrade","title",ei,"class","tc_submenuitem tc_submenuitem_admin_upgrade",3,"useRouter",4,"ngIf"],["route","/ceph-users","title",ti,"class","tc_submenuitem tc_submenuitem_admin_users",3,"useRouter",4,"ngIf"],["route","/mgr-modules","title",ni,"class","tc_submenuitem tc_submenuitem_admin_modules",3,"useRouter",4,"ngIf"],["route","/configuration","title",oi,"class","tc_submenuitem tc_submenuitem_admin_configuration",3,"useRouter",4,"ngIf"],["route","/services/","title",qo,1,"tc_submenuitem","tc_submenuitem_admin_services",3,"useRouter"],["route","/upgrade","title",ei,1,"tc_submenuitem","tc_submenuitem_admin_upgrade",3,"useRouter"],["route","/ceph-users","title",ti,1,"tc_submenuitem","tc_submenuitem_admin_users",3,"useRouter"],["route","/mgr-modules","title",ni,1,"tc_submenuitem","tc_submenuitem_admin_modules",3,"useRouter"],["route","/configuration","title",oi,1,"tc_submenuitem","tc_submenuitem_admin_configuration",3,"useRouter"]]},template:function(t,o){if(1&t){const s=e.\u0275\u0275getCurrentView();e.\u0275\u0275projectionDef(),e.\u0275\u0275elementStart(0,"div",35),e.\u0275\u0275element(1,"cd-notifications-sidebar"),e.\u0275\u0275elementStart(2,"cds-header",36)(3,"cds-hamburger",37),e.\u0275\u0275listener("selected",function(){return e.\u0275\u0275restoreView(s),e.\u0275\u0275resetView(o.showMenuSidebar=!o.showMenuSidebar)}),e.\u0275\u0275elementEnd(),e.\u0275\u0275template(4,C8,4,5,"cds-header-navigation",38),e.\u0275\u0275elementStart(5,"cds-header-global")(6,"cds-header-navigation"),e.\u0275\u0275element(7,"cd-language-selector",39),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(8,"div",40),e.\u0275\u0275listener("click",function(){return e.\u0275\u0275restoreView(s),e.\u0275\u0275resetView(o.toggleSidebar())}),e.\u0275\u0275element(9,"cd-notifications"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(10,"div",41),e.\u0275\u0275element(11,"cd-dashboard-help"),e.\u0275\u0275elementEnd(),e.\u0275\u0275template(12,S8,2,0,"div",42),e.\u0275\u0275elementStart(13,"div",41),e.\u0275\u0275element(14,"cd-identity"),e.\u0275\u0275elementEnd()()(),e.\u0275\u0275template(15,h8,2,0,"ng-template",null,0,e.\u0275\u0275templateRefExtractor),e.\u0275\u0275elementStart(17,"div",43)(18,"nav",44),e.\u0275\u0275template(19,T8,1,0,"ng-container",45),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(20,"div",46),e.\u0275\u0275projection(21),e.\u0275\u0275elementEnd()(),e.\u0275\u0275template(22,e3,2,3,"ng-template",null,1,e.\u0275\u0275templateRefExtractor),e.\u0275\u0275elementEnd()}if(2&t){const s=e.\u0275\u0275reference(16),d=e.\u0275\u0275reference(23);e.\u0275\u0275advance(2),e.\u0275\u0275property("brand",s),e.\u0275\u0275advance(),e.\u0275\u0275property("active",o.showMenuSidebar),e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf",(null==o.clustersMap?null:o.clustersMap.size)>1),e.\u0275\u0275advance(8),e.\u0275\u0275property("ngIf",o.permissions.user.read),e.\u0275\u0275advance(6),e.\u0275\u0275property("ngClass",e.\u0275\u0275pureFunction1(7,f8,!o.showMenuSidebar)),e.\u0275\u0275advance(),e.\u0275\u0275property("ngTemplateOutlet",d),e.\u0275\u0275advance(),e.\u0275\u0275property("ngClass",e.\u0275\u0275pureFunction1(9,E8,!o.showMenuSidebar))}},dependencies:[l.NgClass,l.NgForOf,l.NgIf,l.NgTemplateOutlet,u.RouterLink,tr,Ai,D.Header,D.HeaderItem,D.HeaderMenu,D.HeaderNavigation,D.HeaderGlobal,D.Hamburger,D.SideNav,D.SideNavItem,D.SideNavMenu,D.IconDirective,nr,ar,sr,rr,l.AsyncPipe,l.KeyValuePipe],styles:[".cd-navbar-main[_ngcontent-%COMP%]{height:100%;overflow:hidden}.navbar-brand[_ngcontent-%COMP%], .navbar-brand[_ngcontent-%COMP%]:hover{color:#e9ecef;height:auto;padding:0}.navbar-brand[_ngcontent-%COMP%] > img[_ngcontent-%COMP%]{height:25px}cds-header-item[_ngcontent-%COMP%]{width:500px}.cluster-switcher[_ngcontent-%COMP%]{margin-left:6rem}  .cds--header__menu-title[aria-expanded=true]+.cds--header__menu{max-height:300px;overflow-x:hidden;overflow-y:auto;width:auto}  cd-navigation .cd-navbar-top .cd-navbar-brand{background:#374249;border-top:4px solid #25828e}  cd-navigation .cd-navbar-top .cd-navbar-brand .navbar-brand,   cd-navigation .cd-navbar-top .cd-navbar-brand .navbar-brand:hover{color:#e9ecef;height:auto;padding:0}  cd-navigation .cd-navbar-top .cd-navbar-brand .navbar-brand>img{height:25px}  cd-navigation .cd-navbar-top .cd-navbar-brand .navbar-toggler{border:0}  cd-navigation .cd-navbar-top .cd-navbar-brand .navbar-toggler:focus,   cd-navigation .cd-navbar-top .cd-navbar-brand .navbar-toggler:hover{outline:0}  cd-navigation .cd-navbar-top .cd-navbar-brand .navbar-toggler .fa-navicon{color:#e9ecef}  cd-navigation .cd-navbar-top .cd-navbar-brand .navbar-collapse{padding:0}  cd-navigation .cd-navbar-top .cd-navbar-brand .cd-navbar-utility>.active>a{background-color:#25828e;color:#e9ecef}  cd-navigation .cd-navbar-top .cd-navbar-brand .cd-navbar-utility>li>.open>a,   cd-navigation .cd-navbar-top .cd-navbar-brand .cd-navbar-utility>li>.open>a:focus,   cd-navigation .cd-navbar-top .cd-navbar-brand .cd-navbar-utility>li>.open>a:hover{background-color:transparent;border-color:transparent;color:#e9ecef}  cd-navigation .cd-navbar-top .navbar-nav>li>.cd-navbar>[ngbDropdown]>a,   cd-navigation .cd-navbar-top .navbar-nav>li>.cd-navbar>a,   cd-navigation .cd-navbar-top .navbar-nav>li>a{color:#e9ecef;display:block;line-height:1;padding:13.5px 18px!important;position:relative;text-decoration:none}  cd-navigation .cd-navbar-top .navbar-nav .nav-link,   cd-navigation .cd-navbar-top .navbar-nav .nav-link:hover{color:#e9ecef}  cd-navigation .cd-navbar-top .navbar-nav>li>.cd-navbar>[ngbDropdown]>a:hover,   cd-navigation .cd-navbar-top .navbar-nav>li>.cd-navbar>[ngbDropdown].open>a,   cd-navigation .cd-navbar-top .navbar-nav>li>.cd-navbar>a:hover,   cd-navigation .cd-navbar-top .navbar-nav>li>a:hover,   cd-navigation .cd-navbar-top .navbar-nav>li:hover{background-color:#25828e}  cd-navigation .cd-navbar-top .navbar-nav>.open>.cd-navbar>[ngbDropdown]>a,   cd-navigation .cd-navbar-top .navbar-nav>.open>.cd-navbar>[ngbDropdown]>a:hover,   cd-navigation .cd-navbar-top .navbar-nav>.open>.cd-navbar>a,   cd-navigation .cd-navbar-top .navbar-nav>.open>.cd-navbar>a:focus,   cd-navigation .cd-navbar-top .navbar-nav>.open>.cd-navbar>a:hover,   cd-navigation .cd-navbar-top .navbar-nav>.open>.cd-navbar>li>a:focus,   cd-navigation .cd-navbar-top .navbar-nav>.open>a,   cd-navigation .cd-navbar-top .navbar-nav>.open>a:focus,   cd-navigation .cd-navbar-top .navbar-nav>.open>a:hover{background-color:transparent;border-color:transparent;color:#e9ecef}  cd-navigation .cd-navbar-top .no-hover:hover{background-color:#374249!important}@media (min-width: 768px){  cd-navigation .cd-navbar-top .cd-navbar-utility{border-bottom:0;font-size:1.1rem;position:absolute;right:0;top:0}}@media (max-width: 767px){  cd-navigation .cd-navbar-top .navbar-nav{margin:0}  cd-navigation .cd-navbar-top .navbar-nav .fa{margin-right:.5em}  cd-navigation .cd-navbar-top .navbar-nav .open .dropdown-menu{background-color:#25828e;border:0;padding-bottom:0;padding-top:0}  cd-navigation .cd-navbar-top .navbar-nav .open .dropdown-menu>li>a{color:#e9ecef;padding:5px 15px 5px 35px}  cd-navigation .cd-navbar-top .navbar-nav .open .dropdown-menu>.active>a{background-color:#25828e}  cd-navigation .cd-navbar-top .navbar-nav>li>a:hover{background-color:#25828e}}  cd-navigation .cd-navbar-top .cd-context-bar{background-color:#fff;color:#374249;cursor:pointer}  cd-navigation .cd-navbar-top .dropdown-text{font-size:small;font-weight:600}.wrapper[_ngcontent-%COMP%]{display:flex;height:100%;width:100%}.wrapper[_ngcontent-%COMP%]   #sidebar[_ngcontent-%COMP%]{bottom:0;height:auto;left:0;overflow-y:auto;position:relative;transition:all .3s;width:16rem;z-index:999}.wrapper[_ngcontent-%COMP%]   #sidebar.active[_ngcontent-%COMP%]{margin-left:-16rem}#content[_ngcontent-%COMP%]{bottom:0;position:relative;right:0;transition:all .3s;width:calc(100% - 16rem)}#content.active[_ngcontent-%COMP%]{width:100vw}"]})}}class _r{resolve(n){const t=n.routeConfig.data,o=null===t.path?null:this.getFullPath(n),s=t.disableSplit||!1,h=[{text:"string"==typeof t.breadcrumbs?t.breadcrumbs:t.breadcrumbs.text||t.text||o,path:o,disableSplit:s}];return(0,K.of)(h)}getFullPath(n){return n.pathFromRoot.reduce((d,h)=>d+(s=>s.reduce((d,h)=>d+"/"+h.path,""))(h.url),"")}}function t3(i,n){if(1&i&&(e.\u0275\u0275elementStart(0,"cds-breadcrumb-item",5),e.\u0275\u0275text(1),e.\u0275\u0275elementEnd()),2&i){const t=e.\u0275\u0275nextContext().$implicit;e.\u0275\u0275propertyInterpolate1("href","#/",t.path,""),e.\u0275\u0275advance(),e.\u0275\u0275textInterpolate1(" ",t.text," ")}}function n3(i,n){if(1&i&&(e.\u0275\u0275elementStart(0,"cds-breadcrumb-item",6),e.\u0275\u0275text(1),e.\u0275\u0275elementEnd()),2&i){const t=e.\u0275\u0275nextContext().$implicit;e.\u0275\u0275advance(),e.\u0275\u0275textInterpolate1(" ",t.text," ")}}function o3(i,n){if(1&i&&(e.\u0275\u0275elementContainerStart(0),e.\u0275\u0275template(1,t3,2,3,"cds-breadcrumb-item",3)(2,n3,2,1,"cds-breadcrumb-item",4),e.\u0275\u0275elementContainerEnd()),2&i){const t=n.$implicit,o=n.last;e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf",!o&&null!==t.path),e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf",o||null===t.path)}}function i3(i,n){if(1&i&&(e.\u0275\u0275elementStart(0,"cds-breadcrumb",1),e.\u0275\u0275template(1,o3,3,2,"ng-container",2),e.\u0275\u0275elementEnd()),2&i){const t=e.\u0275\u0275nextContext();e.\u0275\u0275property("noTrailingSlash",!0),e.\u0275\u0275advance(),e.\u0275\u0275property("ngForOf",t.crumbs)}}class cr{constructor(n,t,o){this.router=n,this.injector=t,this.titleService=o,this.crumbs=[],this.finished=!1,this.defaultResolver=new _r,this.subscription=this.router.events.pipe((0,v.filter)(s=>s instanceof u.NavigationStart)).subscribe(()=>{this.finished=!1}),this.subscription=this.router.events.pipe((0,v.filter)(s=>s instanceof u.NavigationEnd)).subscribe(()=>{const s=n.routerState.snapshot.root;this._resolveCrumbs(s).pipe((0,v.mergeMap)(d=>d),(0,v.distinct)(d=>d.text),(0,v.toArray)(),(0,v.mergeMap)(d=>{const h=this.postProcess(d);return this.wrapIntoObservable(h).pipe((0,v.first)())})).subscribe(d=>{this.finished=!0,this.crumbs=d;const h=this.getTitleFromCrumbs(this.crumbs);this.titleService.setTitle(h)})})}ngOnDestroy(){this.subscription.unsubscribe()}_resolveCrumbs(n){let t;const o=n.routeConfig&&n.routeConfig.data;if(o&&o.breadcrumbs){let s;s=o.breadcrumbs.prototype instanceof _r?this.injector.get(o.breadcrumbs):this.defaultResolver;const d=s.resolve(n);t=this.wrapIntoObservable(d).pipe((0,v.first)())}else t=(0,K.of)([]);return n.firstChild&&(t=(0,K.concat)(t,this._resolveCrumbs(n.firstChild))),t}postProcess(n){const t=[];return n.forEach(o=>{const s=o.text.split("/");if(!o.disableSplit&&s.length>1){o.text=s[s.length-1];for(let d=0;d<s.length-1;d++)t.push({text:s[d],path:null})}t.push(o)}),t}isPromise(n){return n&&"function"==typeof n.then}wrapIntoObservable(n){return n instanceof K.Observable?n:this.isPromise(n)?(0,K.from)(Promise.resolve(n)):(0,K.of)(n)}getTitleFromCrumbs(n){const t=n.map(o=>o.text||"").join(" > ");return t.length>0?`${m.D5.projectName}: ${t}`:m.D5.projectName}static{this.\u0275fac=function(t){return new(t||cr)(e.\u0275\u0275directiveInject(u.Router),e.\u0275\u0275directiveInject(e.Injector),e.\u0275\u0275directiveInject(a.Title))}}static{this.\u0275cmp=e.\u0275\u0275defineComponent({type:cr,selectors:[["cd-breadcrumbs"]],decls:1,vars:1,consts:[[3,"noTrailingSlash",4,"ngIf"],[3,"noTrailingSlash"],[4,"ngFor","ngForOf"],[3,"href",4,"ngIf"],["data-testid","active-breadcrumb-item",4,"ngIf"],[3,"href"],["data-testid","active-breadcrumb-item"]],template:function(t,o){1&t&&e.\u0275\u0275template(0,i3,2,2,"cds-breadcrumb",0),2&t&&e.\u0275\u0275property("ngIf",o.crumbs.length)},dependencies:[l.NgForOf,l.NgIf,D.Breadcrumb,D.BreadcrumbItemComponent]})}}var a3=r(65784);function s3(i,n){1&i&&(e.\u0275\u0275elementStart(0,"div"),e.\u0275\u0275i18nStart(1,0),e.\u0275\u0275element(2,"strong")(3,"a",5),e.\u0275\u0275i18nEnd(),e.\u0275\u0275elementEnd())}function r3(i,n){if(1&i&&(e.\u0275\u0275elementStart(0,"div"),e.\u0275\u0275i18nStart(1,1),e.\u0275\u0275element(2,"strong")(3,"a",5),e.\u0275\u0275i18nEnd(),e.\u0275\u0275elementEnd()),2&i){const t=e.\u0275\u0275nextContext(2);e.\u0275\u0275advance(3),e.\u0275\u0275i18nExp(t.expirationDays),e.\u0275\u0275i18nApply(1)}}function l3(i,n){if(1&i){const t=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"cd-alert-panel",3),e.\u0275\u0275listener("dismissed",function(){e.\u0275\u0275restoreView(t);const s=e.\u0275\u0275nextContext();return e.\u0275\u0275resetView(s.onDismissed())}),e.\u0275\u0275template(1,s3,4,0,"div",4)(2,r3,4,1,"div",4),e.\u0275\u0275elementEnd()}if(2&i){const t=e.\u0275\u0275nextContext();e.\u0275\u0275property("type",t.alertType)("showTitle",!1)("dismissible","danger"!==t.alertType),e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf",0===t.expirationDays),e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf",t.expirationDays>0)}}class dr{constructor(n,t){this.settingsService=n,this.authStorageService=t,this.displayNotification=!1}ngOnInit(){this.settingsService.getStandardSettings().subscribe(n=>{this.pwdExpirationSettings=new a3.b(n);const t=this.authStorageService.getPwdExpirationDate();t&&(this.expirationDays=this.getExpirationDays(t),this.expirationDays<=this.pwdExpirationSettings.pwdExpirationWarning2?this.alertType="danger":this.alertType="warning",this.displayNotification=this.expirationDays<=this.pwdExpirationSettings.pwdExpirationWarning1,this.authStorageService.isPwdDisplayedSource.next(this.displayNotification))})}ngOnDestroy(){this.authStorageService.isPwdDisplayedSource.next(!1)}getExpirationDays(n){const t=new Date,o=new Date(1e3*n);return Math.floor((o.valueOf()-t.valueOf())/864e5)}onDismissed(){this.authStorageService.isPwdDisplayedSource.next(!1),this.displayNotification=!1}static{this.\u0275fac=function(t){return new(t||dr)(e.\u0275\u0275directiveInject(Io.h),e.\u0275\u0275directiveInject(c.v))}}static{this.\u0275cmp=e.\u0275\u0275defineComponent({type:dr,selectors:[["cd-pwd-expiration-notification"]],decls:1,vars:1,consts:()=>{let n,t;return n=$localize`:␟20b3d45b0c08a2951a9974fa20505e4de95250c9␟472267744094945158:Your password will expire in ${"\ufffd#2\ufffd"}:START_TAG_STRONG:less than 1${"\ufffd/#2\ufffd"}:CLOSE_TAG_STRONG: day. Click ${"\ufffd#3\ufffd"}:START_LINK:here${"\ufffd/#3\ufffd"}:CLOSE_LINK: to change it now.`,t=$localize`:␟c2f34088c155e40ffb23770a465a65868ce772b2␟8522753988196412773:Your password will expire in ${"\ufffd#2\ufffd"}:START_TAG_STRONG:${"\ufffd0\ufffd"}:INTERPOLATION:${"\ufffd/#2\ufffd"}:CLOSE_TAG_STRONG: day(s). Click ${"\ufffd#3\ufffd"}:START_LINK:here${"\ufffd/#3\ufffd"}:CLOSE_LINK: to change it now.`,[n,t,["class","no-margin-bottom","size","slim",3,"type","showTitle","dismissible","dismissed",4,"ngIf"],["size","slim",1,"no-margin-bottom",3,"dismissed","type","showTitle","dismissible"],[4,"ngIf"],["routerLink","/user-profile/edit",1,"alert-link"]]},template:function(t,o){1&t&&e.\u0275\u0275template(0,l3,3,5,"cd-alert-panel",2),2&t&&e.\u0275\u0275property("ngIf",o.displayNotification)},dependencies:[l.NgIf,u.RouterLink,nt.m],styles:[".no-margin-bottom[_ngcontent-%COMP%]{margin-bottom:0}"]})}}function _3(i,n){if(1&i){const t=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"cd-alert-panel",2),e.\u0275\u0275listener("dismissed",function(){e.\u0275\u0275restoreView(t);const s=e.\u0275\u0275nextContext();return e.\u0275\u0275resetView(s.onDismissed())}),e.\u0275\u0275elementStart(1,"div"),e.\u0275\u0275i18nStart(2,0),e.\u0275\u0275element(3,"a",3)(4,"a",4),e.\u0275\u0275i18nEnd(),e.\u0275\u0275elementEnd()()}if(2&i){const t=e.\u0275\u0275nextContext();e.\u0275\u0275property("showTitle",!1)("type",t.notificationSeverity)("dismissible","danger"!==t.notificationSeverity)}}class ur{constructor(n,t,o,s){this.mgrModuleService=n,this.authStorageService=t,this.notificationService=o,this.telemetryNotificationService=s,this.displayNotification=!1,this.notificationSeverity="warning"}ngOnInit(){if(this.telemetryNotificationService.update.subscribe(n=>{this.displayNotification=n}),!this.isNotificationHidden()){const n=this.authStorageService.getPermissions().configOpt;p().every(Object.values(n))&&this.mgrModuleService.getConfig("telemetry").subscribe(t=>{t.enabled||this.telemetryNotificationService.setVisibility(!0)})}}ngOnDestroy(){this.telemetryNotificationService.setVisibility(!1)}isNotificationHidden(){return"true"===localStorage.getItem("telemetry_notification_hidden")}onDismissed(){this.telemetryNotificationService.setVisibility(!1),localStorage.setItem("telemetry_notification_hidden","true"),this.notificationService.show(Ae._.success,$localize`Telemetry activation reminder muted`,$localize`You can activate the module on the Telemetry configuration \
page (<b>Dashboard Settings</b> -> <b>Telemetry configuration</b>) at any time.`)}static{this.\u0275fac=function(t){return new(t||ur)(e.\u0275\u0275directiveInject(Ln.a),e.\u0275\u0275directiveInject(c.v),e.\u0275\u0275directiveInject(Q.J),e.\u0275\u0275directiveInject(mo))}}static{this.\u0275cmp=e.\u0275\u0275defineComponent({type:ur,selectors:[["cd-telemetry-notification"]],decls:1,vars:1,consts:()=>{let n;return n=$localize`:␟e6702323d3760e3db0e2e785d567469d18beb120␟7766337847372882412:The Ceph community needs your help to continue improving: please ${"\ufffd#3\ufffd"}:START_LINK:Activate${"[\ufffd/#3\ufffd|\ufffd/#4\ufffd]"}:CLOSE_LINK: the ${"\ufffd#4\ufffd"}:START_LINK_1:Telemetry${"[\ufffd/#3\ufffd|\ufffd/#4\ufffd]"}:CLOSE_LINK: module.`,n=e.\u0275\u0275i18nPostprocess(n),[n,["class","no-margin-bottom","size","slim",3,"showTitle","type","dismissible","dismissed",4,"ngIf"],["size","slim",1,"no-margin-bottom",3,"dismissed","showTitle","type","dismissible"],["routerLink","/telemetry",1,"btn","activate-button","alert-link","activate-text"],["href","https://docs.ceph.com/en/latest/mgr/telemetry/"]]},template:function(t,o){1&t&&e.\u0275\u0275template(0,_3,5,3,"cd-alert-panel",1),2&t&&e.\u0275\u0275property("ngIf",o.displayNotification)},dependencies:[l.NgIf,u.RouterLink,nt.m],styles:[".no-margin-bottom[_ngcontent-%COMP%]{font-size:.875rem;margin-bottom:0}.activate-button[_ngcontent-%COMP%]{background-color:#fcecba;border:#495057 solid .5px;border-radius:10%;padding:.1rem .4rem}.activate-text[_ngcontent-%COMP%]{color:#495057;font-weight:700}a[_ngcontent-%COMP%]{color:#1a5d66;font-weight:700}"]})}}var c3=r(56921);function d3(i,n){if(1&i){const t=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"cd-alert-panel",1),e.\u0275\u0275listener("dismissed",function(){e.\u0275\u0275restoreView(t);const s=e.\u0275\u0275nextContext();return e.\u0275\u0275resetView(s.onDismissed())}),e.\u0275\u0275element(1,"span",2),e.\u0275\u0275pipe(2,"sanitizeHtml"),e.\u0275\u0275elementEnd()}if(2&i){const t=e.\u0275\u0275nextContext();e.\u0275\u0275property("showTitle",!1)("type",t.motd.severity)("dismissible","danger"!==t.motd.severity),e.\u0275\u0275advance(),e.\u0275\u0275property("innerHTML",e.\u0275\u0275pipeBind1(2,4,t.motd.message),e.\u0275\u0275sanitizeHtml)}}class pr{constructor(n){this.motdNotificationService=n,this.motd=void 0}ngOnInit(){this.subscription=this.motdNotificationService.motd$.subscribe(n=>{this.motd=n})}ngOnDestroy(){this.subscription.unsubscribe()}onDismissed(){this.motdNotificationService.hide()}static{this.\u0275fac=function(t){return new(t||pr)(e.\u0275\u0275directiveInject(Bo))}}static{this.\u0275cmp=e.\u0275\u0275defineComponent({type:pr,selectors:[["cd-motd"]],decls:1,vars:1,consts:[["size","slim",3,"showTitle","type","dismissible","dismissed",4,"ngIf"],["size","slim",3,"dismissed","showTitle","type","dismissible"],[3,"innerHTML"]],template:function(t,o){1&t&&e.\u0275\u0275template(0,d3,3,6,"cd-alert-panel",0),2&t&&e.\u0275\u0275property("ngIf",o.motd)},dependencies:[l.NgIf,nt.m,c3.b]})}}var u3=r(92919);const p3=(i,n,t)=>({ftMap:i,daemons:n,selectedDaemon:t});function m3(i,n){if(1&i){const t=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementContainerStart(0),e.\u0275\u0275elementStart(1,"button",8),e.\u0275\u0275listener("click",function(){const s=e.\u0275\u0275restoreView(t).$implicit,d=e.\u0275\u0275nextContext(3);return e.\u0275\u0275resetView(d.onDaemonSelection(s))}),e.\u0275\u0275text(2),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementContainerEnd()}if(2&i){const t=n.$implicit;e.\u0275\u0275advance(2),e.\u0275\u0275textInterpolate2(" ",t.id," ( ",t.zonegroup_name," ) ")}}function f3(i,n){if(1&i&&(e.\u0275\u0275elementContainerStart(0),e.\u0275\u0275elementStart(1,"div",2)(2,"span",3),e.\u0275\u0275i18n(3,0),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(4,"div",4)(5,"button",5),e.\u0275\u0275text(6),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(7,"div",6),e.\u0275\u0275template(8,m3,3,2,"ng-container",7),e.\u0275\u0275elementEnd()()(),e.\u0275\u0275elementContainerEnd()),2&i){const t=e.\u0275\u0275nextContext().ngIf;e.\u0275\u0275advance(6),e.\u0275\u0275textInterpolate2(" ",t.selectedDaemon.id," ( ",t.selectedDaemon.zonegroup_name," ) "),e.\u0275\u0275advance(2),e.\u0275\u0275property("ngForOf",t.daemons)}}function E3(i,n){if(1&i&&(e.\u0275\u0275elementContainerStart(0),e.\u0275\u0275template(1,f3,9,3,"ng-container",1),e.\u0275\u0275elementContainerEnd()),2&i){const t=n.ngIf,o=e.\u0275\u0275nextContext();e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf",t.ftMap&&t.ftMap.rgw&&o.permissions.rgw.read&&o.isRgwRoute&&t.daemons.length>1)}}class mr{constructor(n,t,o,s,d){this.authStorageService=n,this.featureToggles=t,this.router=o,this.timerService=s,this.rgwDaemonService=d,this.REFRESH_INTERVAL=5e3,this.subs=new K.Subscription,this.rgwUrlPrefix="/rgw",this.rgwUserUrlPrefix="/rgw/user",this.rgwRoleUrlPrefix="/rgw/roles",this.rgwBuckerUrlPrefix="/rgw/bucket",this.rgwAccountsUrlPrefix="/rgw/accounts",this.isRgwRoute=document.location.href.includes(this.rgwUserUrlPrefix)||document.location.href.includes(this.rgwBuckerUrlPrefix)||document.location.href.includes(this.rgwRoleUrlPrefix)||document.location.href.includes(this.rgwAccountsUrlPrefix)}ngOnInit(){this.permissions=this.authStorageService.getPermissions(),this.featureToggleMap$=this.featureToggles.get(),this.subs.add(this.router.events.pipe((0,v.filter)(n=>n instanceof u.NavigationEnd)).subscribe(()=>this.isRgwRoute=[this.rgwBuckerUrlPrefix,this.rgwUserUrlPrefix,this.rgwRoleUrlPrefix,this.rgwAccountsUrlPrefix].some(n=>this.router.url.startsWith(n)))),this.subs.add(this.timerService.get(()=>this.isRgwRoute?this.rgwDaemonService.list():K.NEVER,this.REFRESH_INTERVAL).subscribe())}ngOnDestroy(){this.subs.unsubscribe()}onDaemonSelection(n){this.rgwDaemonService.selectDaemon(n),this.reloadData()}reloadData(){const n=this.router.url;this.router.navigateByUrl(this.rgwUrlPrefix,{skipLocationChange:!0}).finally(()=>{this.router.navigate([n])})}static{this.\u0275fac=function(t){return new(t||mr)(e.\u0275\u0275directiveInject(c.v),e.\u0275\u0275directiveInject(vi.b),e.\u0275\u0275directiveInject(u.Router),e.\u0275\u0275directiveInject(al.H),e.\u0275\u0275directiveInject(u3.y))}}static{this.\u0275cmp=e.\u0275\u0275defineComponent({type:mr,selectors:[["cd-context"]],decls:4,vars:11,consts:()=>{let n,t;return n=$localize`:␟c53062af97ebda2a03f905698f58e524ecf8b968␟6081879025331158306:Select Object Gateway`,t=$localize`:␟ced3246fa3db31be0f7da06648463f29ba378fbe␟1937058824153361154:Selected Object Gateway:`,[t,[4,"ngIf"],[1,"cd-context-bar","pt-3","pb-3"],[1,"me-1"],["ngbDropdown","","placement","bottom-left",1,"d-inline-block","ms-2"],["ngbDropdownToggle","","title",n,1,"btn","btn-outline-info","ctx-bar-selected-rgw-daemon"],["ngbDropdownMenu",""],[4,"ngFor","ngForOf"],["ngbDropdownItem","",1,"ctx-bar-available-rgw-daemon",3,"click"]]},template:function(t,o){1&t&&(e.\u0275\u0275template(0,E3,2,1,"ng-container",1),e.\u0275\u0275pipe(1,"async"),e.\u0275\u0275pipe(2,"async"),e.\u0275\u0275pipe(3,"async")),2&t&&e.\u0275\u0275property("ngIf",e.\u0275\u0275pureFunction3(7,p3,e.\u0275\u0275pipeBind1(1,1,o.featureToggleMap$),e.\u0275\u0275pipeBind1(2,3,o.rgwDaemonService.daemons$),e.\u0275\u0275pipeBind1(3,5,o.rgwDaemonService.selectedDaemon$)))},dependencies:[l.NgForOf,l.NgIf,G.NgbDropdown,G.NgbDropdownToggle,G.NgbDropdownMenu,G.NgbDropdownItem,G.NgbDropdownButtonItem,Ge.S,l.AsyncPipe],styles:[".cd-context-bar[_ngcontent-%COMP%]{border-bottom:1px solid #dee2e6}"]})}}const g3=(i,n)=>({dashboard:i,"rgw-dashboard":n}),C3=(i,n)=>({"ms-4 me-4":i,"m-3":n});class fr{get class(){return"top-notification-"+this.notifications.length}constructor(n,t,o,s,d,h,I,$){this.router=n,this.summaryService=t,this.taskManagerService=o,this.multiClusterService=s,this.faviconService=d,this.authStorageService=h,this.telemetryNotificationService=I,this.motdNotificationService=$,this.notifications=[],this.subs=new K.Subscription,this.permissions=this.authStorageService.getPermissions()}ngOnInit(){this.permissions.configOpt.read&&(this.subs.add(this.multiClusterService.startPolling()),this.subs.add(this.multiClusterService.startClusterTokenStatusPolling())),this.subs.add(this.summaryService.startPolling()),this.subs.add(this.taskManagerService.init(this.summaryService)),this.subs.add(this.authStorageService.isPwdDisplayed$.subscribe(n=>{this.showTopNotification("isPwdDisplayed",n)})),this.subs.add(this.telemetryNotificationService.update.subscribe(n=>{this.showTopNotification("telemetryNotificationEnabled",n)})),this.subs.add(this.motdNotificationService.motd$.subscribe(n=>{this.showTopNotification("motdNotificationEnabled",p().isPlainObject(n))})),this.faviconService.init()}showTopNotification(n,t){if(t)this.notifications.includes(n)||this.notifications.push(n);else{const o=this.notifications.indexOf(n);o>=0&&this.notifications.splice(o,1)}}ngOnDestroy(){this.subs.unsubscribe()}static{this.\u0275fac=function(t){return new(t||fr)(e.\u0275\u0275directiveInject(u.Router),e.\u0275\u0275directiveInject(on.E),e.\u0275\u0275directiveInject(O0.C),e.\u0275\u0275directiveInject(yi.J),e.\u0275\u0275directiveInject(Vo),e.\u0275\u0275directiveInject(c.v),e.\u0275\u0275directiveInject(mo),e.\u0275\u0275directiveInject(Bo))}}static{this.\u0275cmp=e.\u0275\u0275defineComponent({type:fr,selectors:[["cd-workbench-layout"]],hostVars:2,hostBindings:function(t,o){2&t&&e.\u0275\u0275classMap(o.class)},features:[e.\u0275\u0275ProvidersFeature([Vo])],decls:11,vars:8,consts:[["name","global"],[1,"container-fluid","h-100",3,"ngClass"],[1,"cd-alert-container",3,"ngClass"]],template:function(t,o){1&t&&(e.\u0275\u0275elementStart(0,"block-ui",0)(1,"cd-navigation")(2,"div",1)(3,"div",2),e.\u0275\u0275element(4,"cd-pwd-expiration-notification")(5,"cd-telemetry-notification")(6,"cd-motd"),e.\u0275\u0275elementEnd(),e.\u0275\u0275element(7,"cd-context")(8,"cd-breadcrumbs")(9,"router-outlet")(10,"cds-placeholder"),e.\u0275\u0275elementEnd()()()),2&t&&(e.\u0275\u0275advance(2),e.\u0275\u0275property("ngClass",e.\u0275\u0275pureFunction2(2,g3,"/dashboard"==o.router.url||"/dashboard_3"==o.router.url||"/multi-cluster/overview"==o.router.url,"/rgw/overview"==o.router.url)),e.\u0275\u0275advance(),e.\u0275\u0275property("ngClass",e.\u0275\u0275pureFunction2(5,C3,"/dashboard"==o.router.url||"/dashboard_3"==o.router.url||"/multi-cluster/overview"==o.router.url,"/rgw/overview"==o.router.url)))},dependencies:[o_.BlockUIComponent,l.NgClass,lr,cr,u.RouterOutlet,dr,ur,pr,D.Placeholder,mr],styles:[".dashboard[_ngcontent-%COMP%]{background-color:#e9ecef;margin:0;padding:0 0 48px}.container-fluid[_ngcontent-%COMP%]{overflow:auto;padding-bottom:100px;padding-top:48px}.rgw-dashboard[_ngcontent-%COMP%]{background-color:#e9ecef}.cd-alert-container[_ngcontent-%COMP%]{display:flex;flex-direction:column}"]})}}var S3=r(96143),h3=r.n(S3);class Er{ngOnInit(){h3()({url:window.location.origin+"/docs/openapi.json",dom_id:"#swagger-ui",layout:"BaseLayout"})}static{this.\u0275fac=function(t){return new(t||Er)}}static{this.\u0275cmp=e.\u0275\u0275defineComponent({type:Er,selectors:[["cd-api-docs"]],decls:1,vars:0,consts:[["id","swagger-ui",1,"apiDocs"]],template:function(t,o){1&t&&e.\u0275\u0275element(0,"div",0)},styles:[".apiDocs[_ngcontent-%COMP%]{background:#f8f9fa;font-size:18px!important;margin-top:-48px!important}"]})}}var hl=r(9300),T3=r(19907),a_=r(42676);class zo{constructor(n,t){this.router=n,this.authStorageService=t}canActivate(n,t){return!(this.authStorageService.isLoggedIn()&&!this.authStorageService.isSSO()&&this.authStorageService.getPwdUpdateRequired())||(this.router.navigate(["/login-change-password"],{queryParams:{returnUrl:t.url}}),!1)}canActivateChild(n,t){return this.canActivate(n,t)}static{this.\u0275fac=function(t){return new(t||zo)(e.\u0275\u0275inject(u.Router),e.\u0275\u0275inject(c.v))}}static{this.\u0275prov=e.\u0275\u0275defineInjectable({token:zo,factory:zo.\u0275fac,providedIn:"root"})}}var Tl=r(1811),Co=r(6955);class Xo{constructor(n){this.authStorageService=n}canActivate(){if(!this.authStorageService.isSSO())return!0;throw new pl.DA}canActivateChild(){return this.canActivate()}static{this.\u0275fac=function(t){return new(t||Xo)(e.\u0275\u0275inject(c.v))}}static{this.\u0275prov=e.\u0275\u0275defineInjectable({token:Xo,factory:Xo.\u0275fac,providedIn:"root"})}}var F3=r(71656);const ko=i=>[i],gr=(i,n)=>[i,n];function v3(i,n){if(1&i&&(e.\u0275\u0275elementStart(0,"h5"),e.\u0275\u0275i18nStart(1,13),e.\u0275\u0275element(2,"i",48),e.\u0275\u0275i18nEnd(),e.\u0275\u0275elementEnd()),2&i){const t=e.\u0275\u0275nextContext(5);e.\u0275\u0275advance(2),e.\u0275\u0275property("ngClass",e.\u0275\u0275pureFunction1(2,ko,t.icons.spinner)),e.\u0275\u0275i18nExp(null==t.executingTasks?null:t.executingTasks.progress),e.\u0275\u0275i18nApply(1)}}function M3(i,n){if(1&i&&(e.\u0275\u0275elementStart(0,"h5"),e.\u0275\u0275i18nStart(1,14),e.\u0275\u0275element(2,"i",48),e.\u0275\u0275i18nEnd(),e.\u0275\u0275elementEnd()),2&i){const t=e.\u0275\u0275nextContext(5);e.\u0275\u0275advance(2),e.\u0275\u0275property("ngClass",e.\u0275\u0275pureFunction2(2,gr,t.icons.spin,t.icons.spinner)),e.\u0275\u0275i18nExp(null==t.executingTasks?null:t.executingTasks.progress),e.\u0275\u0275i18nApply(1)}}function R3(i,n){if(1&i&&(e.\u0275\u0275elementContainerStart(0),e.\u0275\u0275elementStart(1,"div",46),e.\u0275\u0275template(2,v3,3,4,"h5",37),e.\u0275\u0275elementStart(3,"a",47),e.\u0275\u0275i18n(4,12),e.\u0275\u0275elementEnd()(),e.\u0275\u0275template(5,M3,3,5,"ng-template",null,9,e.\u0275\u0275templateRefExtractor),e.\u0275\u0275elementContainerEnd()),2&i){const t=e.\u0275\u0275reference(6),o=e.\u0275\u0275nextContext().ngIf;e.\u0275\u0275advance(2),e.\u0275\u0275property("ngIf",o.is_paused)("ngIfElse",t)}}function O3(i,n){if(1&i&&(e.\u0275\u0275elementStart(0,"cd-card",45),e.\u0275\u0275template(1,R3,7,2,"ng-container",37),e.\u0275\u0275elementEnd()),2&i){const t=n.ngIf;e.\u0275\u0275nextContext();const o=e.\u0275\u0275reference(29);e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf",t.in_progress)("ngIfElse",o)}}function P3(i,n){1&i&&e.\u0275\u0275element(0,"i",55)}function b3(i,n){if(1&i&&(e.\u0275\u0275elementStart(0,"cds-toggletip",49),e.\u0275\u0275pipe(1,"healthColor"),e.\u0275\u0275elementStart(2,"div",50),e.\u0275\u0275text(3),e.\u0275\u0275pipe(4,"healthLabel"),e.\u0275\u0275pipe(5,"uppercase"),e.\u0275\u0275template(6,P3,1,0,"i",51),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(7,"div",52)(8,"div",53),e.\u0275\u0275element(9,"cd-health-checks",54),e.\u0275\u0275elementEnd()()()),2&i){const t=e.\u0275\u0275nextContext().ngIf;e.\u0275\u0275property("ngStyle",e.\u0275\u0275pipeBind1(1,6,t.health.status))("dropShadow",!0)("autoAlign",!0),e.\u0275\u0275advance(3),e.\u0275\u0275textInterpolate1(" ",e.\u0275\u0275pipeBind1(5,10,e.\u0275\u0275pipeBind1(4,8,t.health.status))," "),e.\u0275\u0275advance(3),e.\u0275\u0275property("ngIf","HEALTH_OK"!==(null==t.health?null:t.health.status)),e.\u0275\u0275advance(3),e.\u0275\u0275property("healthData",t.health.checks)}}function N3(i,n){if(1&i&&(e.\u0275\u0275elementContainerStart(0),e.\u0275\u0275elementStart(1,"div",56),e.\u0275\u0275pipe(2,"healthColor"),e.\u0275\u0275text(3),e.\u0275\u0275pipe(4,"healthLabel"),e.\u0275\u0275pipe(5,"uppercase"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementContainerEnd()),2&i){const t=e.\u0275\u0275nextContext().ngIf;e.\u0275\u0275advance(),e.\u0275\u0275property("ngStyle",e.\u0275\u0275pipeBind1(2,2,t.health.status)),e.\u0275\u0275advance(2),e.\u0275\u0275textInterpolate1(" ",e.\u0275\u0275pipeBind1(5,6,e.\u0275\u0275pipeBind1(4,4,t.health.status))," ")}}function I3(i,n){if(1&i&&e.\u0275\u0275element(0,"i",57),2&i){const t=e.\u0275\u0275nextContext(3);e.\u0275\u0275property("ngClass",e.\u0275\u0275pureFunction1(1,ko,t.icons.success))}}function A3(i,n){if(1&i&&(e.\u0275\u0275elementContainerStart(0),e.\u0275\u0275elementStart(1,"dt",58),e.\u0275\u0275i18n(2,16),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(3,"dd",59),e.\u0275\u0275text(4),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(5,"dt",58),e.\u0275\u0275i18n(6,17),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(7,"dd",59),e.\u0275\u0275text(8),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementContainerEnd()),2&i){const t=n.ngIf;e.\u0275\u0275advance(4),e.\u0275\u0275textInterpolate(t.image),e.\u0275\u0275advance(4),e.\u0275\u0275textInterpolate(t.registry)}}function D3(i,n){if(1&i&&(e.\u0275\u0275elementStart(0,"dl",42)(1,"dt",58),e.\u0275\u0275i18n(2,15),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(3,"dd",59),e.\u0275\u0275text(4),e.\u0275\u0275elementEnd(),e.\u0275\u0275template(5,A3,9,2,"ng-container",37),e.\u0275\u0275pipe(6,"async"),e.\u0275\u0275elementEnd()),2&i){const t=n.ngIf,o=e.\u0275\u0275nextContext(3),s=e.\u0275\u0275reference(8);e.\u0275\u0275advance(4),e.\u0275\u0275textInterpolate(t),e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf",e.\u0275\u0275pipeBind1(6,3,o.info$))("ngIfElse",s)}}function y3(i,n){if(1&i&&(e.\u0275\u0275elementContainerStart(0),e.\u0275\u0275elementStart(1,"legend",43),e.\u0275\u0275i18n(2,18),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(3,"div"),e.\u0275\u0275element(4,"cd-table",60,10),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementContainerEnd()),2&i){const t=n.ngIf,o=e.\u0275\u0275nextContext(3);e.\u0275\u0275advance(4),e.\u0275\u0275property("data",t)("columns",o.columns)("limit",5)}}function L3(i,n){if(1&i){const t=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementContainerStart(0),e.\u0275\u0275elementStart(1,"div",62),e.\u0275\u0275pipe(2,"mgrSummary"),e.\u0275\u0275elementStart(3,"button",63),e.\u0275\u0275pipe(4,"mgrSummary"),e.\u0275\u0275listener("click",function(){e.\u0275\u0275restoreView(t);const s=e.\u0275\u0275nextContext().ngIf,d=e.\u0275\u0275nextContext(4);return e.\u0275\u0275resetView(d.upgradeNow(s.versions[s.versions.length-1]))}),e.\u0275\u0275i18n(5,19),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(6,"a",64),e.\u0275\u0275listener("click",function(){e.\u0275\u0275restoreView(t);const s=e.\u0275\u0275nextContext(5);return e.\u0275\u0275resetView(s.startUpgradeModal())}),e.\u0275\u0275i18n(7,20),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementContainerEnd()}if(2&i){let t,o;const s=e.\u0275\u0275nextContext().ngIf,d=e.\u0275\u0275nextContext(2).ngIf;e.\u0275\u0275advance(),e.\u0275\u0275property("ngbTooltip",(null==(t=e.\u0275\u0275pipeBind1(2,3,d.mgr_map))?null:t.total)<=1?"To upgrade, you need minimum 2 mgr daemons.":""),e.\u0275\u0275advance(2),e.\u0275\u0275property("disabled",(null==(o=e.\u0275\u0275pipeBind1(4,5,d.mgr_map))?null:o.total)<=1),e.\u0275\u0275advance(2),e.\u0275\u0275i18nExp(s.versions[s.versions.length-1]),e.\u0275\u0275i18nApply(5)}}function $3(i,n){if(1&i&&(e.\u0275\u0275elementStart(0,"div",35),e.\u0275\u0275template(1,L3,8,7,"ng-container",37),e.\u0275\u0275elementEnd()),2&i){const t=n.ngIf;e.\u0275\u0275nextContext(4);const o=e.\u0275\u0275reference(2);e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf",t.versions.length>0)("ngIfElse",o)}}function x3(i,n){if(1&i&&(e.\u0275\u0275template(0,$3,2,2,"div",61),e.\u0275\u0275pipe(1,"async")),2&i){const t=e.\u0275\u0275nextContext(3),o=e.\u0275\u0275reference(6);e.\u0275\u0275property("ngIf",e.\u0275\u0275pipeBind1(1,2,t.info$))("ngIfElse",o)}}function U3(i,n){if(1&i&&(e.\u0275\u0275elementContainerStart(0),e.\u0275\u0275template(1,O3,2,2,"cd-card",33),e.\u0275\u0275pipe(2,"async"),e.\u0275\u0275elementStart(3,"cd-card",34)(4,"div",35)(5,"h5"),e.\u0275\u0275text(6),e.\u0275\u0275elementEnd()()(),e.\u0275\u0275elementStart(7,"cd-card",36)(8,"div",35),e.\u0275\u0275template(9,b3,10,12,"ng-template",null,7,e.\u0275\u0275templateRefExtractor)(11,N3,6,8,"ng-container",37),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(12,"cd-card",38)(13,"div",35)(14,"h5"),e.\u0275\u0275template(15,I3,1,3,"i",39),e.\u0275\u0275pipe(16,"mgrSummary"),e.\u0275\u0275text(17),e.\u0275\u0275pipe(18,"mgrSummary"),e.\u0275\u0275elementEnd()()(),e.\u0275\u0275elementStart(19,"div",40),e.\u0275\u0275template(20,D3,7,5,"dl",41),e.\u0275\u0275pipe(21,"async"),e.\u0275\u0275elementStart(22,"div",42),e.\u0275\u0275template(23,y3,6,3,"ng-container",32),e.\u0275\u0275pipe(24,"async"),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(25,"legend",43),e.\u0275\u0275i18n(26,11),e.\u0275\u0275elementEnd(),e.\u0275\u0275element(27,"cd-logs",44),e.\u0275\u0275template(28,x3,2,4,"ng-template",null,8,e.\u0275\u0275templateRefExtractor),e.\u0275\u0275elementContainerEnd()),2&i){let t,o;const s=n.ngIf,d=e.\u0275\u0275reference(10),h=e.\u0275\u0275nextContext(2),I=e.\u0275\u0275reference(4);e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf",e.\u0275\u0275pipeBind1(2,15,h.upgradeStatus$)),e.\u0275\u0275advance(5),e.\u0275\u0275textInterpolate(h.version),e.\u0275\u0275advance(5),e.\u0275\u0275property("ngIf",!(null!=s.health&&null!=s.health.checks&&s.health.checks.length))("ngIfElse",d),e.\u0275\u0275advance(4),e.\u0275\u0275property("ngIf",(null==(t=e.\u0275\u0275pipeBind1(16,17,s.mgr_map))?null:t.total)>1)("ngIfElse",I),e.\u0275\u0275advance(2),e.\u0275\u0275textInterpolate1(" ",null==(o=e.\u0275\u0275pipeBind1(18,19,s.mgr_map))?null:o.total," "),e.\u0275\u0275advance(3),e.\u0275\u0275property("ngIf",e.\u0275\u0275pipeBind1(21,21,h.fsid$)),e.\u0275\u0275advance(3),e.\u0275\u0275property("ngIf",e.\u0275\u0275pipeBind1(24,23,h.daemons$)),e.\u0275\u0275advance(4),e.\u0275\u0275property("showAuditLogs",!1)("showDaemonLogs",!1)("showNavLinks",!1)("showFilterTools",!1)("showDownloadCopyButton",!1)("scrollable",!0)}}function w3(i,n){if(1&i&&(e.\u0275\u0275elementStart(0,"div",31),e.\u0275\u0275template(1,U3,30,25,"ng-container",32),e.\u0275\u0275pipe(2,"async"),e.\u0275\u0275elementEnd()),2&i){const t=e.\u0275\u0275nextContext();e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf",e.\u0275\u0275pipeBind1(2,1,t.healthData$))}}function G3(i,n){if(1&i){const t=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"span",65),e.\u0275\u0275i18nStart(1,21),e.\u0275\u0275element(2,"i",57),e.\u0275\u0275i18nEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(3,"a",66),e.\u0275\u0275listener("click",function(){e.\u0275\u0275restoreView(t);const s=e.\u0275\u0275nextContext();return e.\u0275\u0275resetView(s.startUpgradeModal())}),e.\u0275\u0275i18n(4,22),e.\u0275\u0275elementEnd()}if(2&i){const t=e.\u0275\u0275nextContext();e.\u0275\u0275advance(2),e.\u0275\u0275property("ngClass",e.\u0275\u0275pureFunction1(1,ko,t.icons.success))}}function H3(i,n){if(1&i&&e.\u0275\u0275element(0,"i",67),2&i){const t=e.\u0275\u0275nextContext();e.\u0275\u0275property("ngClass",e.\u0275\u0275pureFunction1(1,ko,t.icons.warning))}}function V3(i,n){if(1&i&&(e.\u0275\u0275elementStart(0,"div",35)(1,"button",68),e.\u0275\u0275i18nStart(2,23),e.\u0275\u0275element(3,"i",48),e.\u0275\u0275i18nEnd(),e.\u0275\u0275elementEnd()()),2&i){const t=e.\u0275\u0275nextContext(2);e.\u0275\u0275advance(),e.\u0275\u0275property("disabled",!0),e.\u0275\u0275advance(2),e.\u0275\u0275property("ngClass",e.\u0275\u0275pureFunction2(2,gr,t.icons.spin,t.icons.spinner))}}function B3(i,n){if(1&i&&e.\u0275\u0275template(0,V3,4,5,"div",61),2&i){const t=e.\u0275\u0275nextContext(),o=e.\u0275\u0275reference(10);e.\u0275\u0275property("ngIf",!t.errorMessage)("ngIfElse",o)}}function z3(i,n){if(1&i&&(e.\u0275\u0275elementStart(0,"div",42)(1,"span",70),e.\u0275\u0275i18nStart(2,24),e.\u0275\u0275element(3,"i",48),e.\u0275\u0275i18nEnd(),e.\u0275\u0275elementEnd()()),2&i){const t=e.\u0275\u0275nextContext(2);e.\u0275\u0275advance(3),e.\u0275\u0275property("ngClass",e.\u0275\u0275pureFunction2(1,gr,t.icons.spin,t.icons.spinner))}}function X3(i,n){if(1&i&&e.\u0275\u0275template(0,z3,4,4,"div",69),2&i){const t=e.\u0275\u0275nextContext(),o=e.\u0275\u0275reference(12);e.\u0275\u0275property("ngIf",!t.errorMessage)("ngIfElse",o)}}function k3(i,n){if(1&i){const t=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"div",35)(1,"span",71),e.\u0275\u0275i18nStart(2,25),e.\u0275\u0275element(3,"i",48),e.\u0275\u0275i18nEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(4,"a",66),e.\u0275\u0275listener("click",function(){e.\u0275\u0275restoreView(t);const s=e.\u0275\u0275nextContext();return e.\u0275\u0275resetView(s.startUpgradeModal())}),e.\u0275\u0275i18n(5,26),e.\u0275\u0275elementEnd()()}if(2&i){const t=e.\u0275\u0275nextContext();e.\u0275\u0275advance(3),e.\u0275\u0275property("ngClass",e.\u0275\u0275pureFunction1(2,ko,t.icons.danger)),e.\u0275\u0275i18nExp(t.errorMessage),e.\u0275\u0275i18nApply(2)}}function j3(i,n){if(1&i&&(e.\u0275\u0275elementStart(0,"span",72),e.\u0275\u0275i18nStart(1,27),e.\u0275\u0275element(2,"i",48),e.\u0275\u0275i18nEnd(),e.\u0275\u0275elementEnd()),2&i){const t=e.\u0275\u0275nextContext();e.\u0275\u0275advance(2),e.\u0275\u0275property("ngClass",e.\u0275\u0275pureFunction1(1,ko,t.icons.danger))}}function W3(i,n){if(1&i&&(e.\u0275\u0275elementStart(0,"div",46)(1,"h5"),e.\u0275\u0275i18nStart(2,28),e.\u0275\u0275element(3,"i",48),e.\u0275\u0275i18nEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(4,"a",47),e.\u0275\u0275i18n(5,29),e.\u0275\u0275elementEnd()()),2&i){const t=e.\u0275\u0275nextContext();e.\u0275\u0275advance(3),e.\u0275\u0275property("ngClass",e.\u0275\u0275pureFunction2(2,gr,t.icons.spin,t.icons.spinner)),e.\u0275\u0275i18nExp(null==t.executingTasks?null:t.executingTasks.progress),e.\u0275\u0275i18nApply(2)}}class Cr{constructor(n,t,o,s,d,h,I){this.summaryService=n,this.upgradeService=t,this.healthService=o,this.daemonService=s,this.notificationService=d,this.router=h,this.refreshIntervalService=I,this.interval=new K.Subscription,this.columns=[],this.icons=g.FI,this.subject=new K.ReplaySubject,this.subs=new K.Subscription}ngOnInit(){this.upgradeStatus$=this.subject.pipe((0,v.switchMap)(()=>this.upgradeService.status()),(0,v.shareReplay)(1)),this.columns=[{name:$localize`Daemon name`,prop:"daemon_name",flexGrow:1,filterable:!0},{name:$localize`Version`,prop:"version",flexGrow:1,filterable:!0}],this.subs.add(this.summaryService.subscribe(n=>{const t=n.version.replace("ceph version ","").split("-");this.version=t[0],this.executingTasks=n.executing_tasks.filter(o=>o.name.includes("progress/Upgrade"))[0]})),this.interval=this.refreshIntervalService.intervalData$.subscribe(()=>{this.fetchStatus()}),this.info$=this.upgradeService.listCached().pipe((0,v.catchError)(n=>(n.preventDefault(),this.errorMessage=$localize`Not retrieving upgrades`,this.notificationService.show(Ae._.error,this.errorMessage,n.error.detail||n.error.message),(0,K.of)(null)))),this.healthData$=this.healthService.getMinimalHealth(),this.daemons$=this.daemonService.list(this.upgradeService.upgradableServiceTypes),this.fsid$=this.healthService.getClusterFsid()}startUpgradeModal(){this.modalRef=this.upgradeService.startUpgradeModal()}fetchStatus(){this.subject.next()}upgradeNow(n){this.upgradeService.start(n).subscribe({error:t=>{this.notificationService.show(Ae._.error,$localize`Failed to start the upgrade`,t)},complete:()=>{this.notificationService.show(Ae._.success,$localize`Started upgrading the cluster`),this.fetchStatus(),this.router.navigate(["/upgrade/progress"])}})}ngOnDestroy(){this.interval?.unsubscribe(),this.subs?.unsubscribe()}static{this.\u0275fac=function(t){return new(t||Cr)(e.\u0275\u0275directiveInject(on.E),e.\u0275\u0275directiveInject($n),e.\u0275\u0275directiveInject(ue),e.\u0275\u0275directiveInject(ss),e.\u0275\u0275directiveInject(Q.J),e.\u0275\u0275directiveInject(u.Router),e.\u0275\u0275directiveInject(Mi.s))}}static{this.\u0275cmp=e.\u0275\u0275defineComponent({type:Cr,selectors:[["cd-upgrade"]],decls:15,vars:1,consts:()=>{let n,t,o,s,d,h,I,$,w,X,J,re,de,Me,ve,Se,$e,Te,ke,rt,mt,xe,Je,vt,Mt,Ye,yt;return n=$localize`:␟a8a224e3261e07898b41b8bd24b3fffe29cde0a9␟1947869876969745692:New Version`,t=$localize`:␟a8a224e3261e07898b41b8bd24b3fffe29cde0a9␟1947869876969745692:New Version`,o=$localize`:␟9a1bd0840d2c3901d359e4a58a9c73545b7e9598␟3764903568985562955:Current Version`,s=$localize`:␟9a1bd0840d2c3901d359e4a58a9c73545b7e9598␟3764903568985562955:Current Version`,d=$localize`:␟73caac4265ea7314ff061e5a1d78a6361a6dd3b8␟6920224523921471777:Cluster Status`,h=$localize`:␟73caac4265ea7314ff061e5a1d78a6361a6dd3b8␟6920224523921471777:Cluster Status`,I=$localize`:␟c8ae59a07e0b775f3a1af3d8733224e4639d7a5b␟519998761053137675:MGR Count`,$=$localize`:␟c8ae59a07e0b775f3a1af3d8733224e4639d7a5b␟519998761053137675:MGR Count`,w=$localize`:␟4e8589665654cf937f709b9959bf5f2d3877e0be␟7721207555072740710:Cluster logs`,X=$localize`:␟c46808a9d05bef8880a74455a58bb5ffb824e982␟1661958078457595489:View Details...`,J=$localize`:␟1be83694322aaa5956597a488e158584f258d21d␟8359916602638736432:${"\ufffd#2\ufffd"}:START_ITALIC_TEXT:${"\ufffd/#2\ufffd"}:CLOSE_ITALIC_TEXT: Upgrade is paused ${"\ufffd0\ufffd"}:INTERPOLATION:%`,re=$localize`:␟7756b45c6c0ed75fb98318736c99043fd1da97d2␟3958229507981755370:${"\ufffd#2\ufffd"}:START_ITALIC_TEXT:${"\ufffd/#2\ufffd"}:CLOSE_ITALIC_TEXT: Upgrading ${"\ufffd0\ufffd"}:INTERPOLATION:% `,de=$localize`:␟0dc3f50cd3d80ba6b6146adae3a600b4d6d85622␟6537109231492111576:Cluster FSID`,Me=$localize`:␟49b424ae28d4bafe1fed602816e1e6c55ad4286e␟4245661272644988642:Release Image`,ve=$localize`:␟276c8c848441a8f43b585ecde05dce217685a244␟8956629690682741547:Registry`,Se=$localize`:␟ddadd3d34e33ed67b2e1a24428c33e365d61461a␟8558263151156627910:Daemon versions`,$e=$localize`:␟3be94dd51ddf8d3188e31a5d3dcb071314442870␟1844901545725631761:Upgrade to ${"\ufffd0\ufffd"}:INTERPOLATION:`,Te=$localize`:␟9474e2da044f83fe5172c4306684dfbd3afb1778␟5653808017867684650:Select another version...`,ke=$localize`:␟8c37d8080bac58e45834f79f1b71a2a07b1398fc␟1464475165334392760:${"\ufffd#2\ufffd"}:START_ITALIC_TEXT:${"\ufffd/#2\ufffd"}:CLOSE_ITALIC_TEXT: Cluster is up-to-date `,rt=$localize`:␟308ba2922985a9f4bf749056644eeb256ff381e2␟6900962976935725026:Upgrade using custom image...`,mt=$localize`:␟600ed9adbd7c9aa6f5e4584fe40c51c522bca5f2␟5090880615139945144:Checking for upgrades ${"\ufffd#3\ufffd"}:START_ITALIC_TEXT:${"\ufffd/#3\ufffd"}:CLOSE_ITALIC_TEXT:`,xe=$localize`:␟516206233d06e9835536cd886aeb1d0c95694cb6␟2964236440425890837:Fetching registry informations ${"\ufffd#3\ufffd"}:START_ITALIC_TEXT:${"\ufffd/#3\ufffd"}:CLOSE_ITALIC_TEXT:`,Je=$localize`:␟dc75ffeb8c5d60c7c3f4cc3a3f48c2c3da194d22␟790886321230514397:${"\ufffd#3\ufffd"}:START_ITALIC_TEXT:${"\ufffd/#3\ufffd"}:CLOSE_ITALIC_TEXT: ${"\ufffd0\ufffd"}:INTERPOLATION: `,vt=$localize`:␟308ba2922985a9f4bf749056644eeb256ff381e2␟6900962976935725026:Upgrade using custom image...`,Mt=$localize`:␟584342c52d131aaac16203e4b55a697d94fb4da5␟1894079334507469054:${"\ufffd#2\ufffd"}:START_ITALIC_TEXT:${"\ufffd/#2\ufffd"}:CLOSE_ITALIC_TEXT: Failed to fetch registry informations `,Ye=$localize`:␟406b07d19ad78e89312478f4d79188ee8a4863ed␟2371943402242622336:${"\ufffd#3\ufffd"}:START_ITALIC_TEXT:${"\ufffd/#3\ufffd"}:CLOSE_ITALIC_TEXT: Upgrade in progress ${"\ufffd0\ufffd"}:INTERPOLATION:%`,yt=$localize`:␟c46808a9d05bef8880a74455a58bb5ffb824e982␟1661958078457595489:View Details...`,[["noUpgradesAvailable",""],["warningIcon",""],["checkingForUpgradeStatus",""],["loadingDetails",""],["upgradeStatusError",""],["upgradeInfoError",""],["upgradeProgress",""],["healthWarningAndError",""],["upgradeStatusTpl",""],["inProgress",""],["daemonsTable",""],w,X,J,re,de,Me,ve,Se,$e,Te,ke,rt,mt,xe,Je,vt,Mt,Ye,yt,["class","row h-25",4,"cdScope"],[1,"row","h-25"],[4,"ngIf"],["class","col-sm-3 px-3 d-flex","cardTitle",n,"aria-label",t,"id","newVersionAvailable",4,"ngIf"],["cardTitle",o,"aria-label",s,"id","currentVersion",1,"col-sm-3","px-3","d-flex"],[1,"d-flex","flex-column","justify-content-center","align-items-center"],["cardTitle",d,"aria-label",h,"id","clusterStatus",1,"col-sm-3","px-3","d-flex"],[4,"ngIf","ngIfElse"],["cardTitle",I,"aria-label",$,"id","mgrCount",1,"col-sm-3","px-3","d-flex"],["class","text-success",3,"ngClass",4,"ngIf","ngIfElse"],[1,"d-flex","mt-3"],["class","w-50",4,"ngIf"],[1,"w-50"],[1,"cd-header"],["defaultTab","cluster-logs",3,"showAuditLogs","showDaemonLogs","showNavLinks","showFilterTools","showDownloadCopyButton","scrollable"],["cardTitle",n,"aria-label",t,"id","newVersionAvailable",1,"col-sm-3","px-3","d-flex"],[1,"d-flex","flex-column","justify-content-center","align-items-center","mt-2"],["routerLink","/upgrade/progress",1,"mt-2","link-primary","mb-2"],[3,"ngClass"],[1,"info-card-content-clickable","mt-1",3,"ngStyle","dropShadow","autoAlign"],["cdsToggletipButton",""],["class","fa fa-exclamation-triangle",4,"ngIf"],["cdsToggletipContent",""],[1,"cds--popover-scroll-container"],[3,"healthData"],[1,"fa","fa-exclamation-triangle"],[3,"ngStyle"],[1,"text-success",3,"ngClass"],[1,"bold","mt-5"],[1,"mt-2"],["selectionType","single","columnMode","flex",3,"data","columns","limit"],["class","d-flex flex-column justify-content-center align-items-center",4,"ngIf","ngIfElse"],[3,"ngbTooltip"],["id","upgrade","aria-label","Upgrade now",1,"btn","btn-accent","mt-2",3,"click","disabled"],[1,"mt-2","link-primary","mb-2",3,"click"],["id","no-upgrades-available",1,"mt-1"],[1,"link-primary","mb-2",3,"click"],["title","To upgrade, you need minimum 2 mgr daemons.",1,"text-warning",3,"ngClass"],["id","upgrade","aria-label","Upgrade now",1,"btn","btn-accent","mt-2","mb-4",3,"disabled"],["class","w-50",4,"ngIf","ngIfElse"],[1,"text-info","justify-content-center","align-items-center"],["id","upgrade-status-error",1,"text-danger","mt-2","mb-4"],[1,"text-danger","justify-content-center","align-items-center"]]},template:function(t,o){1&t&&e.\u0275\u0275template(0,w3,3,3,"div",30)(1,G3,5,3,"ng-template",null,0,e.\u0275\u0275templateRefExtractor)(3,H3,1,3,"ng-template",null,1,e.\u0275\u0275templateRefExtractor)(5,B3,1,2,"ng-template",null,2,e.\u0275\u0275templateRefExtractor)(7,X3,1,2,"ng-template",null,3,e.\u0275\u0275templateRefExtractor)(9,k3,6,4,"ng-template",null,4,e.\u0275\u0275templateRefExtractor)(11,j3,3,3,"ng-template",null,5,e.\u0275\u0275templateRefExtractor)(13,W3,6,5,"ng-template",null,6,e.\u0275\u0275templateRefExtractor),2&t&&e.\u0275\u0275property("cdScope","configOpt")},dependencies:[l.NgClass,l.NgIf,l.NgStyle,ml.i,We.O,Ge.S,F3.V,u.RouterLink,G.NgbTooltip,wo,D.Toggletip,D.ToggletipButton,D.ToggletipContent,Lo,l.AsyncPipe,l.UpperCasePipe,Eo,Pi,Ql.j]})}}const K3=["crushInfoTabs"],Q3=["crushDeletionBtn"],Y3=["ecpInfoTabs"],J3=["ecpDeletionBtn"],Z3=()=>({md:4}),s_=i=>[i];function q3(i,n){1&i&&(e.\u0275\u0275elementStart(0,"cd-alert-panel",39),e.\u0275\u0275i18n(1,7),e.\u0275\u0275elementEnd())}function ev(i,n){if(1&i&&(e.\u0275\u0275elementContainerStart(0),e.\u0275\u0275template(1,q3,2,0,"cd-alert-panel",34),e.\u0275\u0275elementContainerEnd()),2&i){const t=e.\u0275\u0275nextContext(3);e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf",!t.editing)}}function tv(i,n){if(1&i&&(e.\u0275\u0275elementStart(0,"cd-alert-panel",39),e.\u0275\u0275i18nStart(1,8),e.\u0275\u0275element(2,"p")(3,"cd-code-block",40)(4,"cd-code-block",40),e.\u0275\u0275i18nEnd(),e.\u0275\u0275elementEnd()),2&i){const t=e.\u0275\u0275nextContext(3);e.\u0275\u0275advance(3),e.\u0275\u0275property("codes",e.\u0275\u0275pureFunction1(2,s_,t.fsFailCmd)),e.\u0275\u0275advance(),e.\u0275\u0275property("codes",e.\u0275\u0275pureFunction1(4,s_,t.fsSetCmd))}}function nv(i,n){1&i&&(e.\u0275\u0275elementStart(0,"span",42),e.\u0275\u0275i18n(1,9),e.\u0275\u0275elementEnd())}function ov(i,n){1&i&&(e.\u0275\u0275elementStart(0,"span",42),e.\u0275\u0275i18n(1,10),e.\u0275\u0275elementEnd())}function iv(i,n){if(1&i&&e.\u0275\u0275template(0,nv,2,0,"span",41)(1,ov,2,0,"span",41),2&i){e.\u0275\u0275nextContext();const t=e.\u0275\u0275reference(3),o=e.\u0275\u0275nextContext(2);e.\u0275\u0275property("ngIf",o.form.showError("name",t,"required")),e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf",o.form.showError("name",t,"pattern"))}}function av(i,n){1&i&&(e.\u0275\u0275elementStart(0,"cd-alert-panel",45),e.\u0275\u0275i18n(1,12),e.\u0275\u0275elementEnd())}function sv(i,n){if(1&i&&(e.\u0275\u0275elementStart(0,"div",32)(1,"cds-checkbox",43),e.\u0275\u0275i18nStart(2,11),e.\u0275\u0275element(3,"cd-help-text"),e.\u0275\u0275i18nEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275template(4,av,2,0,"cd-alert-panel",44),e.\u0275\u0275elementEnd()),2&i){const t=e.\u0275\u0275nextContext(3);e.\u0275\u0275advance(4),e.\u0275\u0275property("ngIf",t.pools.length<2)}}function rv(i,n){1&i&&(e.\u0275\u0275elementStart(0,"cds-text-label",48),e.\u0275\u0275i18nStart(1,13),e.\u0275\u0275element(2,"input",49),e.\u0275\u0275i18nEnd(),e.\u0275\u0275elementEnd())}function lv(i,n){1&i&&(e.\u0275\u0275elementStart(0,"option",53),e.\u0275\u0275i18n(1,14),e.\u0275\u0275elementEnd()),2&i&&e.\u0275\u0275property("ngValue",null)}function _v(i,n){1&i&&(e.\u0275\u0275elementStart(0,"option",53),e.\u0275\u0275i18n(1,15),e.\u0275\u0275elementEnd()),2&i&&e.\u0275\u0275property("ngValue",null)}function cv(i,n){1&i&&(e.\u0275\u0275elementStart(0,"option",53),e.\u0275\u0275i18n(1,16),e.\u0275\u0275elementEnd()),2&i&&e.\u0275\u0275property("ngValue",null)}function dv(i,n){if(1&i&&(e.\u0275\u0275elementStart(0,"option",54),e.\u0275\u0275text(1),e.\u0275\u0275elementEnd()),2&i){const t=n.$implicit;e.\u0275\u0275property("value",null==t?null:t.pool_name),e.\u0275\u0275advance(),e.\u0275\u0275textInterpolate(null==t?null:t.pool_name)}}function uv(i,n){if(1&i){const t=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"cds-select",50),e.\u0275\u0275listener("valueChange",function(s){e.\u0275\u0275restoreView(t);const d=e.\u0275\u0275nextContext(4);return e.\u0275\u0275resetView(d.onPoolChange(s))}),e.\u0275\u0275template(1,lv,2,1,"option",51)(2,_v,2,1,"option",51)(3,cv,2,1,"option",51)(4,dv,2,2,"option",52),e.\u0275\u0275elementEnd()}if(2&i){e.\u0275\u0275nextContext();const t=e.\u0275\u0275reference(4),o=e.\u0275\u0275nextContext(3);e.\u0275\u0275property("invalid",!o.form.controls.dataPool.valid&&o.form.controls.dataPool.dirty)("invalidText",t),e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf",null===o.dataPools),e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf",null!==o.dataPools&&0===(null==o.dataPools?null:o.dataPools.length)),e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf",null!==o.dataPools&&(null==o.dataPools?null:o.dataPools.length)>0),e.\u0275\u0275advance(),e.\u0275\u0275property("ngForOf",o.dataPools)}}function pv(i,n){1&i&&(e.\u0275\u0275elementStart(0,"span",42),e.\u0275\u0275i18n(1,17),e.\u0275\u0275elementEnd())}function mv(i,n){if(1&i&&e.\u0275\u0275template(0,pv,2,0,"span",41),2&i){e.\u0275\u0275nextContext(2);const t=e.\u0275\u0275reference(3),o=e.\u0275\u0275nextContext(2);e.\u0275\u0275property("ngIf",o.form.showError("dataPool",t,"required"))}}function fv(i,n){if(1&i&&(e.\u0275\u0275elementStart(0,"div",32),e.\u0275\u0275template(1,rv,3,0,"cds-text-label",46)(2,uv,5,6,"cds-select",47)(3,mv,1,1,"ng-template",null,2,e.\u0275\u0275templateRefExtractor),e.\u0275\u0275elementEnd()),2&i){const t=e.\u0275\u0275nextContext(3);e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf",t.editing),e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf",!t.editing)}}function Ev(i,n){1&i&&(e.\u0275\u0275elementStart(0,"cds-text-label",57),e.\u0275\u0275i18nStart(1,18),e.\u0275\u0275element(2,"input",58),e.\u0275\u0275i18nEnd(),e.\u0275\u0275elementEnd())}function gv(i,n){1&i&&(e.\u0275\u0275elementStart(0,"option",53),e.\u0275\u0275i18n(1,19),e.\u0275\u0275elementEnd()),2&i&&e.\u0275\u0275property("ngValue",null)}function Cv(i,n){1&i&&(e.\u0275\u0275elementStart(0,"option",53),e.\u0275\u0275i18n(1,20),e.\u0275\u0275elementEnd()),2&i&&e.\u0275\u0275property("ngValue",null)}function Sv(i,n){1&i&&(e.\u0275\u0275elementStart(0,"option",53),e.\u0275\u0275i18n(1,21),e.\u0275\u0275elementEnd()),2&i&&e.\u0275\u0275property("ngValue",null)}function hv(i,n){if(1&i&&(e.\u0275\u0275elementStart(0,"option",54),e.\u0275\u0275text(1),e.\u0275\u0275elementEnd()),2&i){const t=n.$implicit;e.\u0275\u0275property("value",null==t?null:t.pool_name),e.\u0275\u0275advance(),e.\u0275\u0275textInterpolate(null==t?null:t.pool_name)}}function Tv(i,n){if(1&i){const t=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"cds-select",59),e.\u0275\u0275listener("valueChange",function(s){e.\u0275\u0275restoreView(t);const d=e.\u0275\u0275nextContext(4);return e.\u0275\u0275resetView(d.onPoolChange(s,!0))}),e.\u0275\u0275template(1,gv,2,1,"option",51)(2,Cv,2,1,"option",51)(3,Sv,2,1,"option",51)(4,hv,2,2,"option",52),e.\u0275\u0275elementEnd()}if(2&i){e.\u0275\u0275nextContext();const t=e.\u0275\u0275reference(4),o=e.\u0275\u0275nextContext(3);e.\u0275\u0275property("invalid",!o.form.controls.metadataPool.valid&&o.form.controls.metadataPool.dirty)("invalidText",t),e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf",null===o.metadatPools),e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf",null!==o.metadatPools&&0===(null==o.metadatPools?null:o.metadatPools.length)),e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf",null!==o.metadatPools&&(null==o.metadatPools?null:o.metadatPools.length)>0),e.\u0275\u0275advance(),e.\u0275\u0275property("ngForOf",o.metadatPools)}}function Fv(i,n){1&i&&(e.\u0275\u0275elementStart(0,"span",42),e.\u0275\u0275i18n(1,22),e.\u0275\u0275elementEnd())}function vv(i,n){if(1&i&&e.\u0275\u0275template(0,Fv,2,0,"span",41),2&i){e.\u0275\u0275nextContext(2);const t=e.\u0275\u0275reference(3),o=e.\u0275\u0275nextContext(2);e.\u0275\u0275property("ngIf",o.form.showError("metadataPool",t,"required"))}}function Mv(i,n){if(1&i&&(e.\u0275\u0275elementStart(0,"div",32),e.\u0275\u0275template(1,Ev,3,0,"cds-text-label",55)(2,Tv,5,6,"cds-select",56)(3,vv,1,1,"ng-template",null,3,e.\u0275\u0275templateRefExtractor),e.\u0275\u0275elementEnd()),2&i){const t=e.\u0275\u0275nextContext(3);e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf",t.editing),e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf",!t.editing)}}function Rv(i,n){1&i&&(e.\u0275\u0275elementStart(0,"div",32)(1,"cds-select",60),e.\u0275\u0275i18nStart(2,23),e.\u0275\u0275element(3,"option",61)(4,"option",62),e.\u0275\u0275i18nEnd(),e.\u0275\u0275elementEnd()())}function Ov(i,n){1&i&&(e.\u0275\u0275elementStart(0,"span",42),e.\u0275\u0275i18n(1,25),e.\u0275\u0275elementEnd())}function Pv(i,n){if(1&i&&e.\u0275\u0275template(0,Ov,2,0,"span",41),2&i){e.\u0275\u0275nextContext(4);const t=e.\u0275\u0275reference(2),o=e.\u0275\u0275nextContext(2);e.\u0275\u0275property("ngIf",o.form.showError("label",t,"required"))}}function bv(i,n){if(1&i){const t=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"div",32)(1,"cds-combo-box",63),e.\u0275\u0275listener("selected",function(s){e.\u0275\u0275restoreView(t);const d=e.\u0275\u0275nextContext(5);return e.\u0275\u0275resetView(d.multiSelector(s,"label"))})("updatedItems",function(s){e.\u0275\u0275restoreView(t);const d=e.\u0275\u0275nextContext().ngIf;return e.\u0275\u0275resetView(d.labels=s)}),e.\u0275\u0275i18nStart(2,24),e.\u0275\u0275element(3,"cds-dropdown-list"),e.\u0275\u0275i18nEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275template(4,Pv,1,1,"ng-template",null,4,e.\u0275\u0275templateRefExtractor),e.\u0275\u0275elementEnd()}if(2&i){const t=e.\u0275\u0275reference(5),o=e.\u0275\u0275nextContext().ngIf,s=e.\u0275\u0275nextContext(4);e.\u0275\u0275advance(),e.\u0275\u0275property("appendInline",!0)("items",o.labels)("invalid",s.form.controls.label.invalid&&s.form.controls.label.dirty)("invalidText",t)}}function Nv(i,n){if(1&i){const t=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"div",32)(1,"cds-combo-box",64),e.\u0275\u0275listener("selected",function(s){e.\u0275\u0275restoreView(t);const d=e.\u0275\u0275nextContext(5);return e.\u0275\u0275resetView(d.multiSelector(s,"hosts"))}),e.\u0275\u0275i18nStart(2,26),e.\u0275\u0275element(3,"cds-dropdown-list"),e.\u0275\u0275i18nEnd(),e.\u0275\u0275elementEnd()()}if(2&i){const t=e.\u0275\u0275nextContext().ngIf;e.\u0275\u0275advance(),e.\u0275\u0275property("appendInline",!0)("items",t.hosts)}}function Iv(i,n){if(1&i&&(e.\u0275\u0275elementContainerStart(0),e.\u0275\u0275template(1,bv,6,4,"div",37)(2,Nv,4,2,"div",37),e.\u0275\u0275elementContainerEnd()),2&i){const t=e.\u0275\u0275nextContext(4);e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf","label"===t.form.controls.placement.value&&!t.editing),e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf","hosts"===t.form.controls.placement.value&&!t.editing)}}function Av(i,n){if(1&i&&(e.\u0275\u0275elementContainerStart(0),e.\u0275\u0275template(1,Rv,5,0,"div",37)(2,Iv,3,2,"ng-container",33),e.\u0275\u0275pipe(3,"async"),e.\u0275\u0275elementContainerEnd()),2&i){const t=e.\u0275\u0275nextContext(3);e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf",!t.editing),e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf",e.\u0275\u0275pipeBind1(3,2,t.hostsAndLabels$))}}function Dv(i,n){if(1&i){const t=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementContainerStart(0),e.\u0275\u0275elementStart(1,"form",30,0)(4,"div",31),e.\u0275\u0275i18n(5,5),e.\u0275\u0275pipe(6,"titlecase"),e.\u0275\u0275pipe(7,"upperFirst"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(8,"div",32),e.\u0275\u0275template(9,ev,2,1,"ng-container",33)(10,tv,5,6,"cd-alert-panel",34),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(11,"div",32)(12,"cds-text-label",35),e.\u0275\u0275i18nStart(13,6),e.\u0275\u0275element(14,"input",36),e.\u0275\u0275i18nEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275template(15,iv,2,2,"ng-template",null,1,e.\u0275\u0275templateRefExtractor),e.\u0275\u0275elementEnd(),e.\u0275\u0275template(17,sv,5,1,"div",37)(18,fv,5,2,"div",37)(19,Mv,5,2,"div",37)(20,Av,4,4,"ng-container",33),e.\u0275\u0275elementStart(21,"cd-form-button-panel",38),e.\u0275\u0275pipe(22,"titlecase"),e.\u0275\u0275pipe(23,"upperFirst"),e.\u0275\u0275listener("submitActionEvent",function(){e.\u0275\u0275restoreView(t);const s=e.\u0275\u0275nextContext(2);return e.\u0275\u0275resetView(s.submit())}),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementContainerEnd()}if(2&i){let t,o;const s=e.\u0275\u0275reference(3),d=e.\u0275\u0275reference(16),h=e.\u0275\u0275nextContext().ngIf,I=e.\u0275\u0275nextContext();e.\u0275\u0275advance(),e.\u0275\u0275property("formGroup",I.form),e.\u0275\u0275advance(6),e.\u0275\u0275i18nExp(e.\u0275\u0275pipeBind1(6,15,I.action))(e.\u0275\u0275pipeBind1(7,17,I.resource)),e.\u0275\u0275i18nApply(5),e.\u0275\u0275advance(2),e.\u0275\u0275property("ngIf",!h.available),e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf",I.editing&&I.disableRename),e.\u0275\u0275advance(2),e.\u0275\u0275property("invalid",!I.form.controls.name.valid&&I.form.controls.name.dirty)("invalidText",d),e.\u0275\u0275advance(2),e.\u0275\u0275property("invalid",!I.form.controls.name.valid&&I.form.controls.name.dirty),e.\u0275\u0275advance(3),e.\u0275\u0275property("ngIf",!I.editing),e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf",(null==(t=I.form.get("customPools"))?null:t.value)||I.editing),e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf",(null==(o=I.form.get("customPools"))?null:o.value)||I.editing),e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf",h.available),e.\u0275\u0275advance(),e.\u0275\u0275property("form",s)("submitText",e.\u0275\u0275pipeBind1(22,19,I.action)+" "+e.\u0275\u0275pipeBind1(23,21,I.resource))("disabled",!!I.editing&&I.disableRename)}}function yv(i,n){if(1&i&&(e.\u0275\u0275elementStart(0,"div",28),e.\u0275\u0275template(1,Dv,24,23,"ng-container",29),e.\u0275\u0275elementEnd()),2&i){const t=e.\u0275\u0275nextContext();e.\u0275\u0275property("columnNumbers",e.\u0275\u0275pureFunction0(2,Z3)),e.\u0275\u0275advance(),e.\u0275\u0275property("cdFormLoading",t.loading)}}class Ui extends Ce.g{constructor(n,t,o,s,d,h,I,$,w){super(),this.router=n,this.taskWrapperService=t,this.orchService=o,this.formBuilder=s,this.actionLabels=d,this.hostService=h,this.cephfsService=I,this.route=$,this.poolService=w,this.labelFocus=new K.Subject,this.labelClick=new K.Subject,this.icons=g.FI,this.disableRename=!0,this.pools=[],this.dataPools=[],this.metadatPools=[],this.selectedLabels=[],this.selectedHosts=[],this.editing=this.router.url.startsWith(`/cephfs/fs/${m.Qp.EDIT}`),this.action=this.editing?this.actionLabels.EDIT:this.actionLabels.CREATE,this.resource=$localize`File System`,this.createForm()}createForm(){this.form=this.formBuilder.group({name:new C.FormControl("",{validators:[C.Validators.pattern(/^(?:[.][A-Za-z0-9_-]+|[A-Za-z][.A-Za-z0-9_-]*)$/),C.Validators.required]}),placement:[""],hosts:[[]],label:[null,[pe.xQ.requiredIf({placement:"label",unmanaged:!1})]],unmanaged:[!1],customPools:[!1],dataPool:[null,pe.xQ.requiredIf({customPools:!0})],metadataPool:[null,pe.xQ.requiredIf({customPools:!0})]}),this.orchService.status().subscribe(n=>{this.hasOrchestrator=n.available,this.form.get("placement").setValue(this.hasOrchestrator?"hosts":"")})}ngOnInit(){this.editing?(this.route.params.subscribe(n=>{this.fsId=Number(n.id)}),this.cephfsService.getCephfs(this.fsId).subscribe(n=>{this.currentVolumeName=n.cephfs.name,this.form.get("name").setValue(this.currentVolumeName);const t=n.cephfs.pools.find(s=>"data"===s.type)?.pool||"",o=n.cephfs.pools.find(s=>"metadata"===s.type)?.pool||"";this.form.get("dataPool").setValue(t),this.form.get("metadataPool").setValue(o),this.form.get("dataPool").disable(),this.form.get("metadataPool").disable(),this.disableRename=!(!n.cephfs.flags.joinable&&n.cephfs.flags.refuse_client_session),this.disableRename&&(this.form.get("name").disable(),this.fsFailCmd=`ceph fs fail ${this.currentVolumeName}`,this.fsSetCmd=`ceph fs set ${this.currentVolumeName} refuse_client_session true`)})):((0,K.forkJoin)({usedPools:this.cephfsService.getUsedPools(),pools:this.poolService.getList()}).subscribe(({usedPools:n,pools:t})=>{const o=Object.values(t).filter(s=>this.cephfsService.isCephFsPool(s)&&!n.includes(s.pool)&&"erasure"!==s.type&&0===s.stats.bytes_used.latest);o.length<2&&this.form.get("customPools").disable(),this.pools=o,this.metadatPools=this.dataPools=this.pools}),this.hostsAndLabels$=(0,K.forkJoin)({hosts:this.hostService.getAllHosts(),labels:this.hostService.getLabels()}).pipe((0,v.map)(({hosts:n,labels:t})=>({hosts:n.map(o=>({content:o.hostname})),labels:t.map(o=>({content:o}))})))),this.orchStatus$=this.orchService.status(),this.loadingReady()}onPoolChange(n,t=!1){t?this.dataPools=this.pools.filter(o=>o.pool_name!==n):this.metadatPools=this.pools.filter(o=>o.pool_name!=n)}multiSelector(n,t){"label"===t?this.selectedLabels=n.map(o=>o.content):this.selectedHosts=n.map(o=>o.content)}submit(){const n=this.form.get("name").value,t="cephfs";if(this.editing)this.taskWrapperService.wrapTaskAroundCall({task:new q.O(`${t}/${m.Qp.EDIT}`,{volumeName:n}),call:this.cephfsService.rename(this.currentVolumeName,n)}).subscribe({error:()=>{this.form.setErrors({cdSubmitButton:!0})},complete:()=>{this.router.navigate([`${t}/fs`])}});else{let o=this.form.getRawValue();const s={placement:{},unmanaged:o.unmanaged};switch(o.placement){case"hosts":o.hosts.length>0&&(s.placement.hosts=this.selectedHosts);break;case"label":s.placement.label=this.selectedLabels}const d=o.dataPool,h=o.metadataPool,I=this;let $=`${t}/${m.Qp.CREATE}`;this.taskWrapperService.wrapTaskAroundCall({task:new q.O($,{volumeName:n}),call:this.cephfsService.create(this.form.get("name").value,s,d,h)}).subscribe({error(){I.form.setErrors({cdSubmitButton:!0})},complete:()=>{this.router.navigate([`${t}/fs`])}})}}static{this.\u0275fac=function(t){return new(t||Ui)(e.\u0275\u0275directiveInject(u.Router),e.\u0275\u0275directiveInject(B.a),e.\u0275\u0275directiveInject(tn.K),e.\u0275\u0275directiveInject(Dt.$),e.\u0275\u0275directiveInject(m.Ss),e.\u0275\u0275directiveInject(Ht.I),e.\u0275\u0275directiveInject(R),e.\u0275\u0275directiveInject(u.ActivatedRoute),e.\u0275\u0275directiveInject(Ll.m))}}static{this.\u0275cmp=e.\u0275\u0275defineComponent({type:Ui,selectors:[["cd-cephfs-form"]],viewQuery:function(t,o){if(1&t&&(e.\u0275\u0275viewQuery(K3,5),e.\u0275\u0275viewQuery(Q3,5),e.\u0275\u0275viewQuery(Y3,5),e.\u0275\u0275viewQuery(J3,5),e.\u0275\u0275viewQuery(G.NgbTypeahead,5)),2&t){let s;e.\u0275\u0275queryRefresh(s=e.\u0275\u0275loadQuery())&&(o.crushInfoTabs=s.first),e.\u0275\u0275queryRefresh(s=e.\u0275\u0275loadQuery())&&(o.crushDeletionBtn=s.first),e.\u0275\u0275queryRefresh(s=e.\u0275\u0275loadQuery())&&(o.ecpInfoTabs=s.first),e.\u0275\u0275queryRefresh(s=e.\u0275\u0275loadQuery())&&(o.ecpDeletionBtn=s.first),e.\u0275\u0275queryRefresh(s=e.\u0275\u0275loadQuery())&&(o.typeahead=s.first)}},features:[e.\u0275\u0275InheritDefinitionFeature],decls:2,vars:3,consts:()=>{let n,t,o,s,d,h,I,$,w,X,J,re,de,Me,ve,Se,$e,Te,ke,rt,mt,xe,Je,vt,Mt;return n=$localize`:␟2fecea01ce1d44114ee45144eff6d47a5016a74f␟5451140586403689891:Name...`,t=$localize`:form title|Example\: Create Volume@@formTitle␟f1553045110d959c485a73c7f40f26fcc28b975b␟6476422032353420938:${"\ufffd0\ufffd"}:INTERPOLATION: ${"\ufffd1\ufffd"}:INTERPOLATION_1:`,o=$localize`:␟da6954d55a46943dd77159d65e5b81f51b0e3acb␟271472573961202879:Name ${"\ufffd#14\ufffd\ufffd/#14\ufffd"}:TAG_INPUT:`,s=$localize`:␟e53642c64b30a139b0100cdaeb916dfa99c5121b␟1064985665190199138:Orchestrator is not configured. Deploy MDS daemons manually after creating the volume.`,d=$localize`:␟fb61f2a15ac0cdecf43e11e2853017610b3537fa␟1785718670960871621:${"\ufffd#2\ufffd"}:START_PARAGRAPH:The File System can only be renamed if it is shutdown and \`refuse_client_session\` is set to true. Follow the steps below in the command line and refresh the page:${"\ufffd/#2\ufffd"}:CLOSE_PARAGRAPH:${"\ufffd#3\ufffd"}:START_TAG_CD_CODE_BLOCK:${"[\ufffd/#3\ufffd|\ufffd/#4\ufffd]"}:CLOSE_TAG_CD_CODE_BLOCK:${"\ufffd#4\ufffd"}:START_TAG_CD_CODE_BLOCK_1:${"[\ufffd/#3\ufffd|\ufffd/#4\ufffd]"}:CLOSE_TAG_CD_CODE_BLOCK:`,d=e.\u0275\u0275i18nPostprocess(d),h=$localize`:␟4aa19de2a2b54cbda39e9c62917b23044c087776␟751124305869330542:This field is required!`,I=$localize`:␟a89b4773ed0b7b46e8d6253688fc169450b689e4␟7748633494745704752:File System name should start with a letter or dot (.) and can only contain letters, numbers, '.', '-' or '_'`,$=$localize`:␟40a5ef8917223147d80b277c2e3b4ef70c0914b8␟8012972623161649488:Use existing pools ${"\ufffd#3\ufffd"}:START_TAG_CD_HELP_TEXT:Allows you to use replicated pools with 'cephfs' application tag that are already created.${"\ufffd/#3\ufffd"}:CLOSE_TAG_CD_HELP_TEXT:`,w=$localize`:␟f07197b7fb00b2ab1ecb96abe2a06da1c9ab39ae␟7510516771678077309: You need to have atleast 2 pools that are empty, applied with cephfs label and not erasure-coded. `,X=$localize`:␟1e46c0cc719c40bc5259bca930727f148baeae6a␟1442960771726995940:Data pool ${"\ufffd#2\ufffd\ufffd/#2\ufffd"}:TAG_INPUT:`,J=$localize`:␟94516fa213706c67ce5a5b5765681d7fb032033a␟3894950702316166331:Loading...`,re=$localize`:␟10a3ac903c294af036af44c4c6c42aa38b67ad9c␟1099705632275022801:-- No cephfs pools available --`,de=$localize`:␟ef83ec9c304a89d45650e580dcdc2978c37b3a83␟7859304693598053124:-- Select a pool --`,Me=$localize`:␟4aa19de2a2b54cbda39e9c62917b23044c087776␟751124305869330542:This field is required!`,ve=$localize`:␟23605a50eb40cbd0acbbfbb0d2a90ef59f83ce68␟1967847259239645404:Metadata pool ${"\ufffd#2\ufffd\ufffd/#2\ufffd"}:TAG_INPUT:`,Se=$localize`:␟94516fa213706c67ce5a5b5765681d7fb032033a␟3894950702316166331:Loading...`,$e=$localize`:␟10a3ac903c294af036af44c4c6c42aa38b67ad9c␟1099705632275022801:-- No cephfs pools available --`,Te=$localize`:␟ef83ec9c304a89d45650e580dcdc2978c37b3a83␟7859304693598053124:-- Select a pool --`,ke=$localize`:␟4aa19de2a2b54cbda39e9c62917b23044c087776␟751124305869330542:This field is required!`,rt=$localize`:␟437a96bebd51cf4113f3ef22cfc37c10ed622a41␟1330247170077883594:${"\ufffd#3\ufffd"}:START_TAG_OPTION:Hosts${"[\ufffd/#3\ufffd|\ufffd/#4\ufffd]"}:CLOSE_TAG_OPTION:${"\ufffd#4\ufffd"}:START_TAG_OPTION_1:Labels${"[\ufffd/#3\ufffd|\ufffd/#4\ufffd]"}:CLOSE_TAG_OPTION:`,rt=e.\u0275\u0275i18nPostprocess(rt),mt=$localize`:␟3d9607d23bb1ab0f64c3fc1135e097f8245b4035␟122880915385959769:Select labels...`,xe=$localize`:␟564b4b8f89f519d273ecfb74464f4d798d939d43␟5443197147973612827:${"\ufffd#3\ufffd"}:START_TAG_CDS_DROPDOWN_LIST:${"\ufffd/#3\ufffd"}:CLOSE_TAG_CDS_DROPDOWN_LIST:`,Je=$localize`:␟7cbdabcece469fab89cfa687ab152bca18b97498␟1417693714872528491:This field is required.`,vt=$localize`:␟4501e9c3311db8dcacc36b5402e666bbb2b6a7ac␟93017366433182313:Select hosts...`,Mt=$localize`:␟564b4b8f89f519d273ecfb74464f4d798d939d43␟5443197147973612827:${"\ufffd#3\ufffd"}:START_TAG_CDS_DROPDOWN_LIST:${"\ufffd/#3\ufffd"}:CLOSE_TAG_CDS_DROPDOWN_LIST:`,[["frm","ngForm","formDir","ngForm"],["nameError",""],["dataPoolError",""],["metadataPoolError",""],["labelError",""],t,o,s,d,h,I,$,w,X,J,re,de,Me,ve,Se,$e,Te,ke,rt,xe,Je,Mt,["cdsCol","",3,"columnNumbers",4,"ngIf"],["cdsCol","",3,"columnNumbers"],[4,"cdFormLoading"],["novalidate","",3,"formGroup"],[1,"form-header"],[1,"form-item"],[4,"ngIf"],["type","info","spacingClass","mb-2",4,"ngIf"],["for","name","cdRequiredField","Name",3,"invalid","invalidText"],["cdsText","","placeholder",n,"id","name","name","name","formControlName","name","autofocus","",3,"invalid"],["class","form-item",4,"ngIf"],["wrappingClass","text-right",3,"submitActionEvent","form","submitText","disabled"],["type","info","spacingClass","mb-2"],[3,"codes"],["class","invalid-feedback",4,"ngIf"],[1,"invalid-feedback"],["id","customPools","name","customPools","formControlName","customPools"],["type","info","spacingClass","mt-1",4,"ngIf"],["type","info","spacingClass","mt-1"],["for","dataPool",4,"ngIf"],["label","Data pool","for","dataPool","name","dataPool","id","dataPool","formControlName","dataPool","cdRequiredField","Data pool",3,"invalid","invalidText","valueChange",4,"ngIf"],["for","dataPool"],["cdsText","","type","text","placeholder","Pool name...","id","dataPool","name","dataPool","formControlName","dataPool"],["label","Data pool","for","dataPool","name","dataPool","id","dataPool","formControlName","dataPool","cdRequiredField","Data pool",3,"valueChange","invalid","invalidText"],[3,"ngValue",4,"ngIf"],[3,"value",4,"ngFor","ngForOf"],[3,"ngValue"],[3,"value"],["for","metadataPool",4,"ngIf"],["label","Metadata pool","for","metadataPool","name","metadataPool","id","metadataPool","formControlName","metadataPool","cdRequiredField","Metadata pool",3,"invalid","invalidText","valueChange",4,"ngIf"],["for","metadataPool"],["cdsText","","type","text","placeholder","Pool name...","id","metadataPool","name","metadataPool","formControlName","metadataPool"],["label","Metadata pool","for","metadataPool","name","metadataPool","id","metadataPool","formControlName","metadataPool","cdRequiredField","Metadata pool",3,"valueChange","invalid","invalidText"],["label","Placement","for","placement","formControlName","placement","name","placement","id","placement"],["value","hosts"],["value","label"],["type","multi","selectionFeedback","top-after-reopen","label","Label","for","label","name","label","formControlName","label","id","label","placeholder",mt,"cdRequiredField","Label","cdDynamicInputCombobox","",3,"selected","updatedItems","appendInline","items","invalid","invalidText"],["type","multi","selectionFeedback","top-after-reopen","label","Hosts","for","hosts","name","hosts","formControlName","hosts","id","hosts","placeholder",vt,3,"selected","appendInline","items"]]},template:function(t,o){1&t&&(e.\u0275\u0275template(0,yv,2,3,"div",27),e.\u0275\u0275pipe(1,"async")),2&t&&e.\u0275\u0275property("ngIf",e.\u0275\u0275pipeBind1(1,1,o.orchStatus$))},dependencies:[l.NgForOf,l.NgIf,nt.m,oe.e,te,it.O,ct.B,tt.G,Ge.S,ze.E,ut.P,Bl.k,C.\u0275NgNoValidate,C.NgSelectOption,C.\u0275NgSelectMultipleOption,C.DefaultValueAccessor,C.NgControlStatus,C.NgControlStatusGroup,C.FormGroupDirective,C.FormControlName,D.ColumnDirective,D.TextInputLabelComponent,D.TextInput,D.Checkbox,D.Select,D.Option,D.DropdownList,D.ComboBox,l.AsyncPipe,l.TitleCasePipe,Pe.r]})}}var Lv=r(55989);function $v(i,n){if(1&i){const t=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"button",14),e.\u0275\u0275listener("click",function(){e.\u0275\u0275restoreView(t);const s=e.\u0275\u0275nextContext(2);return e.\u0275\u0275resetView(s.pauseUpgrade())}),e.\u0275\u0275i18n(1,2),e.\u0275\u0275elementEnd()}}function xv(i,n){if(1&i){const t=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"button",15),e.\u0275\u0275listener("click",function(){e.\u0275\u0275restoreView(t);const s=e.\u0275\u0275nextContext(2);return e.\u0275\u0275resetView(s.resumeUpgrade())}),e.\u0275\u0275i18n(1,3),e.\u0275\u0275elementEnd()}}function Uv(i,n){if(1&i){const t=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"button",16),e.\u0275\u0275listener("click",function(){e.\u0275\u0275restoreView(t);const s=e.\u0275\u0275nextContext(2);return e.\u0275\u0275resetView(s.stopUpgradeModal())}),e.\u0275\u0275i18n(1,4),e.\u0275\u0275elementEnd()}}function wv(i,n){if(1&i&&(e.\u0275\u0275elementStart(0,"div"),e.\u0275\u0275elementContainerStart(1),e.\u0275\u0275element(2,"cd-progress",8),e.\u0275\u0275elementStart(3,"div",9)(4,"button",10),e.\u0275\u0275i18n(5,1),e.\u0275\u0275elementEnd(),e.\u0275\u0275template(6,$v,2,0,"button",11)(7,xv,2,0,"button",12)(8,Uv,2,0,"button",13),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementContainerEnd(),e.\u0275\u0275elementEnd()),2&i){const t=n.ngIf,o=e.\u0275\u0275nextContext();e.\u0275\u0275advance(2),e.\u0275\u0275property("value",null==o.executingTask?null:o.executingTask.progress)("label",null==o.executingTask?null:o.executingTask.description)("status",t.in_progress?"in-progress":"paused")("subLabel",t.which)("completedItems",t.services_complete)("actionName","upgrading")("helperText",t.progress)("footerText",t.message)("isPaused",t.is_paused),e.\u0275\u0275advance(4),e.\u0275\u0275property("ngIf",t.in_progress&&!t.is_paused),e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf",t.in_progress&&t.is_paused),e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf",t.in_progress)}}class Sr{constructor(n,t,o,s,d,h,I){this.authStorageService=n,this.upgradeService=t,this.notificationService=o,this.modalService=s,this.summaryService=d,this.router=h,this.refreshIntervalService=I,this.icons=g.FI,this.interval=new K.Subscription,this.subject=new K.ReplaySubject,this.permission=this.authStorageService.getPermissions().configOpt}ngOnInit(){this.upgradeStatus$=this.subject.pipe((0,v.switchMap)(()=>this.upgradeService.status()),(0,v.tap)(n=>{n.in_progress||this.router.navigate(["/upgrade"])}),(0,v.shareReplay)(1)),this.interval=this.refreshIntervalService.intervalData$.subscribe(()=>{this.fetchStatus()}),this.summaryService.subscribe(n=>{this.executingTask=n.executing_tasks.filter(t=>t.name.includes("progress/Upgrade"))[0]})}pauseUpgrade(){this.upgradeService.pause().subscribe({error:n=>{this.notificationService.show(Ae._.error,$localize`Failed to pause the upgrade`,n)},complete:()=>{this.notificationService.show(Ae._.success,$localize`The upgrade is paused`),this.fetchStatus()}})}fetchStatus(){this.subject.next()}resumeUpgrade(n=!1){this.upgradeService.resume().subscribe({error:t=>{this.notificationService.show(Ae._.error,$localize`Failed to resume the upgrade`,t)},complete:()=>{this.fetchStatus(),this.notificationService.show(Ae._.success,$localize`Upgrade is resumed`),n&&this.modalRef.close()}})}stopUpgradeModal(){this.pauseUpgrade(),this.modalRef=this.modalService.show(O.D,{itemDescription:"Upgrade",actionDescription:"stop",submitAction:()=>this.stopUpgrade(),callBackAtionObservable:()=>this.resumeUpgrade(!0)})}stopUpgrade(){this.modalRef.close(),this.upgradeService.stop().subscribe({error:n=>{this.notificationService.show(Ae._.error,$localize`Failed to stop the upgrade`,n)},complete:()=>{this.notificationService.show(Ae._.success,$localize`The upgrade is stopped`),this.router.navigate(["/upgrade"])}})}ngOnDestroy(){this.interval?.unsubscribe()}static{this.\u0275fac=function(t){return new(t||Sr)(e.\u0275\u0275directiveInject(c.v),e.\u0275\u0275directiveInject($n),e.\u0275\u0275directiveInject(Q.J),e.\u0275\u0275directiveInject(He.V),e.\u0275\u0275directiveInject(on.E),e.\u0275\u0275directiveInject(u.Router),e.\u0275\u0275directiveInject(Mi.s))}}static{this.\u0275cmp=e.\u0275\u0275defineComponent({type:Sr,selectors:[["cd-upgrade-progress"]],decls:5,vars:9,consts:()=>{let n,t,o,s,d;return n=$localize`:␟4e8589665654cf937f709b9959bf5f2d3877e0be␟7721207555072740710:Cluster logs`,t=$localize`:␟cda31dbd724cf5f4fa7a4274d9120651490c8a8c␟8890553633144307762:Back`,o=$localize`:␟b2838c6165a9672a17db188f4dd9676574353dd8␟9042260521669277115:Pause`,s=$localize`:␟4cd979821c89535df23df1c8ac8f260673610d90␟7182974689040833178:Resume`,d=$localize`:␟1d0d5c9a36e72bd9643ff1ede69736ae063d652b␟3133539296286953705:Stop`,[n,t,o,s,d,[4,"ngIf"],[1,"cd-header"],["defaultTab","cluster-logs",3,"showAuditLogs","showDaemonLogs","showNavLinks","showFilterTools","showDownloadCopyButton","scrollable"],[3,"value","label","status","subLabel","completedItems","actionName","helperText","footerText","isPaused"],[1,"text-center","mt-3"],["aria-label","Go back","routerLink","/upgrade",1,"btn","btn-light"],["class","btn btn-light m-2","aria-label","Pause Upgrade",3,"click",4,"ngIf"],["class","btn btn-light m-2","aria-label","Resume Upgrade",3,"click",4,"ngIf"],["class","btn btn-danger","aria-label","Stop Upgrade",3,"click",4,"ngIf"],["aria-label","Pause Upgrade",1,"btn","btn-light","m-2",3,"click"],["aria-label","Resume Upgrade",1,"btn","btn-light","m-2",3,"click"],["aria-label","Stop Upgrade",1,"btn","btn-danger",3,"click"]]},template:function(t,o){1&t&&(e.\u0275\u0275template(0,wv,9,12,"div",5),e.\u0275\u0275pipe(1,"async"),e.\u0275\u0275elementStart(2,"legend",6),e.\u0275\u0275i18n(3,0),e.\u0275\u0275elementEnd(),e.\u0275\u0275element(4,"cd-logs",7)),2&t&&(e.\u0275\u0275property("ngIf",e.\u0275\u0275pipeBind1(1,7,o.upgradeStatus$)),e.\u0275\u0275advance(4),e.\u0275\u0275property("showAuditLogs",!1)("showDaemonLogs",!1)("showNavLinks",!1)("showFilterTools",!1)("showDownloadCopyButton",!1)("scrollable",!0))},dependencies:[l.NgIf,Lv.X,Ge.S,u.RouterLink,Lo,l.AsyncPipe]})}}function Gv(i,n){if(1&i&&(e.\u0275\u0275elementStart(0,"cd-alert-panel",44),e.\u0275\u0275i18n(1,5),e.\u0275\u0275elementEnd()),2&i){const t=e.\u0275\u0275nextContext();e.\u0275\u0275advance(),e.\u0275\u0275i18nExp(t.connectionMessage),e.\u0275\u0275i18nApply(1)}}function Hv(i,n){if(1&i&&(e.\u0275\u0275elementStart(0,"cd-alert-panel",45),e.\u0275\u0275i18n(1,6),e.\u0275\u0275elementEnd()),2&i){const t=e.\u0275\u0275nextContext();e.\u0275\u0275advance(),e.\u0275\u0275i18nExp(t.connectionMessage),e.\u0275\u0275i18nApply(1)}}function Vv(i,n){1&i&&(e.\u0275\u0275elementStart(0,"span",46),e.\u0275\u0275i18n(1,7),e.\u0275\u0275elementEnd())}function Bv(i,n){1&i&&(e.\u0275\u0275elementStart(0,"span",46),e.\u0275\u0275i18n(1,8),e.\u0275\u0275elementEnd())}function zv(i,n){1&i&&(e.\u0275\u0275elementStart(0,"span",46),e.\u0275\u0275i18n(1,9),e.\u0275\u0275elementEnd())}function Xv(i,n){1&i&&(e.\u0275\u0275elementStart(0,"span",46),e.\u0275\u0275i18n(1,10),e.\u0275\u0275elementEnd())}function kv(i,n){1&i&&(e.\u0275\u0275elementStart(0,"span",46),e.\u0275\u0275i18n(1,11),e.\u0275\u0275elementEnd())}function jv(i,n){1&i&&(e.\u0275\u0275elementStart(0,"span",46),e.\u0275\u0275i18n(1,13),e.\u0275\u0275elementEnd())}function Wv(i,n){1&i&&(e.\u0275\u0275elementStart(0,"span",46),e.\u0275\u0275i18n(1,14),e.\u0275\u0275elementEnd())}function Kv(i,n){if(1&i&&(e.\u0275\u0275elementStart(0,"div",29)(1,"label",47),e.\u0275\u0275i18n(2,12),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(3,"div",32),e.\u0275\u0275element(4,"input",48),e.\u0275\u0275template(5,jv,2,0,"span",34)(6,Wv,2,0,"span",34),e.\u0275\u0275elementEnd()()),2&i){const t=e.\u0275\u0275nextContext(),o=e.\u0275\u0275reference(6);e.\u0275\u0275advance(5),e.\u0275\u0275property("ngIf",t.remoteClusterForm.showError("username",o,"required")),e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf",t.remoteClusterForm.showError("username",o,"uniqueUrlandUser"))}}function Qv(i,n){1&i&&(e.\u0275\u0275elementStart(0,"span",46),e.\u0275\u0275i18n(1,16),e.\u0275\u0275elementEnd())}function Yv(i,n){if(1&i&&(e.\u0275\u0275elementStart(0,"div",29)(1,"label",49),e.\u0275\u0275i18n(2,15),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(3,"div",32)(4,"div",50),e.\u0275\u0275element(5,"input",51),e.\u0275\u0275elementStart(6,"span",52),e.\u0275\u0275element(7,"button",53)(8,"cd-copy-2-clipboard-button",54),e.\u0275\u0275elementEnd(),e.\u0275\u0275template(9,Qv,2,0,"span",34),e.\u0275\u0275elementEnd()()()),2&i){const t=e.\u0275\u0275nextContext(),o=e.\u0275\u0275reference(6);e.\u0275\u0275advance(9),e.\u0275\u0275property("ngIf",t.remoteClusterForm.showError("password",o,"requiredNotEdit"))}}function Jv(i,n){1&i&&(e.\u0275\u0275elementStart(0,"div",29)(1,"label",55),e.\u0275\u0275i18n(2,17),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(3,"div",32)(4,"select",56)(5,"option",57),e.\u0275\u0275text(6,"1 day"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(7,"option",58),e.\u0275\u0275text(8,"1 week"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(9,"option",59),e.\u0275\u0275text(10,"15 days"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(11,"option",60),e.\u0275\u0275text(12,"30 days"),e.\u0275\u0275elementEnd()()()()),2&i&&(e.\u0275\u0275advance(9),e.\u0275\u0275property("selected",!0))}function Zv(i,n){1&i&&(e.\u0275\u0275elementStart(0,"span",46),e.\u0275\u0275i18n(1,20),e.\u0275\u0275elementEnd())}function qv(i,n){1&i&&(e.\u0275\u0275elementStart(0,"span",46),e.\u0275\u0275i18n(1,21),e.\u0275\u0275elementEnd())}function eM(i,n){if(1&i){const t=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"div",29)(1,"label",61)(2,"span"),e.\u0275\u0275i18n(3,18),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(4,"cd-helper"),e.\u0275\u0275i18n(5,19),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(6,"div",32)(7,"textarea",62),e.\u0275\u0275text(8,"            "),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(9,"input",63),e.\u0275\u0275listener("change",function(s){e.\u0275\u0275restoreView(t);const d=e.\u0275\u0275nextContext();return e.\u0275\u0275resetView(d.fileUpload(s.target.files,"ssl_cert"))}),e.\u0275\u0275elementEnd(),e.\u0275\u0275template(10,Zv,2,0,"span",34)(11,qv,2,0,"span",34),e.\u0275\u0275elementEnd()()}if(2&i){const t=e.\u0275\u0275nextContext(),o=e.\u0275\u0275reference(6);e.\u0275\u0275advance(10),e.\u0275\u0275property("ngIf",t.remoteClusterForm.showError("ssl_cert",o,"required")),e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf",t.remoteClusterForm.showError("ssl_cert",o,"pattern"))}}class wi{constructor(n,t,o,s){this.activeModal=n,this.actionLabels=t,this.notificationService=o,this.multiClusterService=s,this.submitAction=new e.EventEmitter,this.endpoints=/^((https?:\/\/)|(www.))(?:([a-zA-Z]+)|(\d+\.\d+.\d+.\d+)):\d{2,5}\/?$/,this.ipv4Rgx=/^((25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\.){3}(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)$/i,this.ipv6Rgx=/^(?:[a-f0-9]{1,4}:){7}[a-f0-9]{1,4}$/i,this.clusterApiUrlCmd="ceph mgr services",this.connectionMessage="",this.subs=new K.Subscription,this.subs.add(this.multiClusterService.subscribe(d=>{this.hubUrl=d.hub_url})),this.createForm()}ngOnInit(){"edit"===this.action&&(this.remoteClusterForm.get("remoteClusterUrl").setValue(this.cluster.url),this.remoteClusterForm.get("clusterAlias").setValue(this.cluster.cluster_alias),this.remoteClusterForm.get("ssl").setValue(this.cluster.ssl_verify),this.remoteClusterForm.get("ssl_cert").setValue(this.cluster.ssl_certificate)),"reconnect"===this.action&&(this.remoteClusterForm.get("remoteClusterUrl").setValue(this.cluster.url),this.remoteClusterForm.get("remoteClusterUrl").disable(),this.remoteClusterForm.get("clusterAlias").setValue(this.cluster.cluster_alias),this.remoteClusterForm.get("clusterAlias").disable(),this.remoteClusterForm.get("username").setValue(this.cluster.user),this.remoteClusterForm.get("username").disable(),this.remoteClusterForm.get("ssl").setValue(this.cluster.ssl_verify),this.remoteClusterForm.get("ssl_cert").setValue(this.cluster.ssl_certificate)),[this.clusterAliasNames,this.clusterUrls,this.clusterUsers]=["cluster_alias","url","user"].map(n=>this.clustersData?.map(t=>t[n]))}createForm(){this.remoteClusterForm=new Ue.$({username:new C.FormControl("",[pe.xQ.custom("uniqueUrlandUser",n=>{let t="";return this.remoteClusterForm&&this.remoteClusterForm.getValue("remoteClusterUrl")&&this.remoteClusterForm.getValue("remoteClusterUrl").endsWith("/")?t=this.remoteClusterForm.getValue("remoteClusterUrl").slice(0,-1):this.remoteClusterForm&&(t=this.remoteClusterForm.getValue("remoteClusterUrl")),this.remoteClusterForm&&this.clusterUrls?.includes(t)&&this.clusterUsers?.includes(n)})]),password:new C.FormControl(null,pe.xQ.custom("requiredNotEdit",n=>"edit"!==this.action&&!n)),remoteClusterUrl:new C.FormControl(null,{validators:[pe.xQ.custom("endpoint",n=>!p().isEmpty(n)&&(!this.endpoints.test(n)&&!this.ipv4Rgx.test(n)&&!this.ipv6Rgx.test(n))),pe.xQ.custom("hubUrlCheck",n=>"connect"===this.action&&n?.includes(this.hubUrl)),C.Validators.required]}),clusterAlias:new C.FormControl(null,{validators:[C.Validators.required,pe.xQ.custom("uniqueName",n=>("connect"===this.action||"edit"===this.action)&&this.clusterAliasNames&&-1!==this.clusterAliasNames.indexOf(n)&&this.cluster?.cluster_alias&&this.cluster.cluster_alias!==n)]}),ssl:new C.FormControl(!1),ttl:new C.FormControl(15),ssl_cert:new C.FormControl("",{validators:[pe.xQ.requiredIf({ssl:!0})]})})}ngOnDestroy(){this.subs.unsubscribe()}handleError(n){n.error.code,this.connectionVerified=!1,this.connectionMessage=n.error.detail,this.remoteClusterForm.setErrors({cdSubmitButton:!0}),this.notificationService.show(Ae._.error,$localize`Connection to the cluster failed`)}handleSuccess(n){this.notificationService.show(Ae._.success,n),this.submitAction.emit(),this.activeModal.close()}convertToHours(n){return 24*n}onSubmit(){const n=this.remoteClusterForm.getValue("remoteClusterUrl"),t=n.endsWith("/")?n.slice(0,-1):n,o=this.remoteClusterForm.getValue("clusterAlias"),s=this.remoteClusterForm.getValue("username"),d=this.remoteClusterForm.getValue("password"),h=this.remoteClusterForm.getValue("ssl"),I=this.convertToHours(this.remoteClusterForm.getValue("ttl")),$=this.remoteClusterForm.getValue("ssl_cert")?.trim(),w={error:X=>this.handleError(X),next:X=>{!0===X&&this.handleSuccess($localize`Cluster connected successfully`)}};switch(this.action){case"edit":this.subs.add(this.multiClusterService.editCluster(this.cluster.name,n,o,this.cluster.user,h,$).subscribe({...w,complete:()=>this.handleSuccess($localize`Cluster updated successfully`)}));break;case"reconnect":this.subs.add(this.multiClusterService.reConnectCluster(t,s,d,h,$,I).subscribe(w));break;case"connect":this.subs.add(this.multiClusterService.addCluster(t,o,s,d,window.location.origin,h,$,I).subscribe(w))}}fileUpload(n,t){const o=n[0],s=new FileReader;s.addEventListener("load",d=>{const h=this.remoteClusterForm.get(t);h.setValue(d.target.result),h.markAsDirty(),h.markAsTouched(),h.updateValueAndValidity()}),s.readAsText(o,"utf8")}static{this.\u0275fac=function(t){return new(t||wi)(e.\u0275\u0275directiveInject(G.NgbActiveModal),e.\u0275\u0275directiveInject(m.Ss),e.\u0275\u0275directiveInject(Q.J),e.\u0275\u0275directiveInject(yi.J))}}static{this.\u0275cmp=e.\u0275\u0275defineComponent({type:wi,selectors:[["cd-multi-cluster-form"]],outputs:{submitAction:"submitAction"},decls:43,vars:23,consts:()=>{let n,t,o,s,d,h,I,$,w,X,J,re,de,Me,ve,Se,$e,Te,ke,rt,mt;return n=$localize`:form title␟1ea03cf319d475346ce6bbf491eb03ba9760e996␟8834462133037639969:${"\ufffd0\ufffd"}:INTERPOLATION: Cluster `,t=$localize`:␟dfacd7c0191ed3bbcf5e5cd956673321007978d7␟8588754221957390289:Cluster API URL ${"\ufffd#13\ufffd"}:START_TAG_CD_HELPER:${"\ufffd#14\ufffd"}:START_TAG_SPAN:${"\ufffd#15\ufffd"}:START_PARAGRAPH:Enter the Dashboard API URL. You can retrieve it from the CLI with: ${"\ufffd#16\ufffd"}:START_BOLD_TEXT:${"\ufffd0\ufffd"}:INTERPOLATION: ${"\ufffd/#16\ufffd"}:CLOSE_BOLD_TEXT:${"\ufffd#17\ufffd"}:START_TAG_CD_COPY_2_CLIPBOARD_BUTTON:${"\ufffd/#17\ufffd"}:CLOSE_TAG_CD_COPY_2_CLIPBOARD_BUTTON:${"\ufffd/#15\ufffd"}:CLOSE_PARAGRAPH:${"\ufffd/#14\ufffd"}:CLOSE_TAG_SPAN:${"\ufffd/#13\ufffd"}:CLOSE_TAG_CD_HELPER:`,o=$localize`:␟84b332975fecd6be7563ff7d11e34a05ae1f23b2␟3891232920520327881:Alias Name `,s=$localize`:␟e65610b5d940367f1ff6b57772b96e94e35fe202␟3719080555538542367:SSL`,d=$localize`:␟9836134ed990ad29c0798632cdb350f2d1211d09␟1715938483542441972:${"\ufffd0\ufffd"}:INTERPOLATION: `,h=$localize`:␟9836134ed990ad29c0798632cdb350f2d1211d09␟1715938483542441972:${"\ufffd0\ufffd"}:INTERPOLATION: `,I=$localize`:␟6677a284506dcf6201fed26a6ed02b2915c14c40␟7131096244859777088:This field is required. `,$=$localize`:␟160cb2dcb9904d11743c6d87c9eb72fec656047d␟824879346706243653:Please enter a valid URL. `,w=$localize`:␟97fe5b33080997fa06d317249ac32ec2f58cb97a␟4272439137134621695:The hub cluster cannot be connected. `,X=$localize`:␟6677a284506dcf6201fed26a6ed02b2915c14c40␟7131096244859777088:This field is required. `,J=$localize`:␟3a68502ac202deaffdccb0f88f27c8deac4f5792␟7369837024638725477:The chosen alias name is already in use. `,re=$localize`:␟7bbc67d3539b7da78ed194f3c54bb78630481131␟2159977639883146258:Username `,de=$localize`:␟6677a284506dcf6201fed26a6ed02b2915c14c40␟7131096244859777088:This field is required. `,Me=$localize`:␟a866ec9028a3d4e9a345bced7702cce40294e808␟930416690021658775:A cluster with the chosen user is already connected. `,ve=$localize`:␟225140c22f6ece1fccfad6d72cd06c69ef59ff18␟2419566667443718905:Password `,Se=$localize`:␟d63091c3831d4fa7ed9740ed11c8de71569b4b42␟5519798962638785377:This field is required. `,$e=$localize`:␟648e5d718d53d138d405a05c654235869bca5ada␟4068999398559359504:Login Expiration`,Te=$localize`:␟9e37e0d06148c7708e88b4a1eb412babbe1a4afc␟7164856686778871055:Certificate`,ke=$localize`:␟295ae4f632322098deca8a3ddfbc7aeaabb5423b␟2542310435779389885:The SSL certificate in PEM format.`,rt=$localize`:␟7cbdabcece469fab89cfa687ab152bca18b97498␟1417693714872528491:This field is required.`,mt=$localize`:␟464272c069fe56f6c50f41f426a25b2a42c95ba5␟1254586342390366472:Invalid SSL certificate.`,[["frm","ngForm"],n,t,o,s,d,h,I,$,w,X,J,re,de,Me,ve,Se,$e,Te,ke,rt,mt,[3,"modalRef"],[1,"modal-title"],[1,"modal-content"],["name","remoteClusterForm",3,"formGroup"],[1,"modal-body"],["type","error","spacingClass","mb-3",4,"ngIf"],["type","success","spacingClass","mb-3",4,"ngIf"],[1,"form-group","row"],["for","remoteClusterUrl",1,"cd-col-form-label","required"],[3,"source","byId"],[1,"cd-col-form-input"],["type","text","placeholder","https://localhost:4202","id","remoteClusterUrl","name","remoteClusterUrl","formControlName","remoteClusterUrl",1,"form-control"],["class","invalid-feedback",4,"ngIf"],["for","clusterAlias",1,"cd-col-form-label","required"],["id","clusterAlias","name","clusterAlias","type","text","placeholder","Name/Text to uniquely identify cluster","formControlName","clusterAlias",1,"form-control"],["class","form-group row",4,"ngIf"],[1,"cd-col-form-offset"],[1,"custom-control","custom-checkbox"],["id","ssl","type","checkbox","formControlName","ssl",1,"custom-control-input"],["for","ssl",1,"custom-control-label"],[1,"modal-footer"],[3,"submitActionEvent","submitText","form"],["type","error","spacingClass","mb-3"],["type","success","spacingClass","mb-3"],[1,"invalid-feedback"],["for","username",1,"cd-col-form-label","required"],["id","username","name","username","type","text","formControlName","username",1,"form-control"],["for","password",1,"cd-col-form-label","required"],[1,"input-group"],["id","password","name","password","type","password","formControlName","password",1,"form-control"],[1,"input-group-button"],["type","button","cdPasswordButton","password",1,"btn","btn-light"],["source","password"],["for","ttl",1,"cd-col-form-label"],["id","ttl","formControlName","ttl","name","ttl",1,"form-select"],["value","1"],["value","7"],["value","15",3,"selected"],["value","30"],["for","ssl_cert",1,"cd-col-form-label"],["id","ssl_cert","formControlName","ssl_cert","rows","5",1,"form-control","resize-vertical","text-monospace","text-pre"],["type","file",3,"change"]]},template:function(t,o){if(1&t){const s=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"cd-modal",22),e.\u0275\u0275elementContainerStart(1,23),e.\u0275\u0275i18n(2,1),e.\u0275\u0275pipe(3,"titlecase"),e.\u0275\u0275elementContainerEnd(),e.\u0275\u0275elementContainerStart(4,24),e.\u0275\u0275elementStart(5,"form",25,0)(7,"div",26),e.\u0275\u0275template(8,Gv,2,1,"cd-alert-panel",27)(9,Hv,2,1,"cd-alert-panel",28),e.\u0275\u0275elementStart(10,"div",29)(11,"label",30),e.\u0275\u0275i18nStart(12,2),e.\u0275\u0275elementStart(13,"cd-helper")(14,"span")(15,"p"),e.\u0275\u0275element(16,"b")(17,"cd-copy-2-clipboard-button",31),e.\u0275\u0275elementEnd()()(),e.\u0275\u0275i18nEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(18,"div",32),e.\u0275\u0275element(19,"input",33),e.\u0275\u0275template(20,Vv,2,0,"span",34)(21,Bv,2,0,"span",34)(22,zv,2,0,"span",34),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(23,"div",29)(24,"label",35),e.\u0275\u0275i18n(25,3),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(26,"div",32),e.\u0275\u0275element(27,"input",36),e.\u0275\u0275template(28,Xv,2,0,"span",34)(29,kv,2,0,"span",34),e.\u0275\u0275elementEnd()(),e.\u0275\u0275template(30,Kv,7,2,"div",37)(31,Yv,10,1,"div",37)(32,Jv,13,1,"div",37),e.\u0275\u0275elementStart(33,"div",29)(34,"div",38)(35,"div",39),e.\u0275\u0275element(36,"input",40),e.\u0275\u0275elementStart(37,"label",41),e.\u0275\u0275i18n(38,4),e.\u0275\u0275elementEnd()()()(),e.\u0275\u0275template(39,eM,12,2,"div",37),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(40,"div",42)(41,"cd-form-button-panel",43),e.\u0275\u0275pipe(42,"titlecase"),e.\u0275\u0275listener("submitActionEvent",function(){return e.\u0275\u0275restoreView(s),e.\u0275\u0275resetView(o.onSubmit())}),e.\u0275\u0275elementEnd()()(),e.\u0275\u0275elementContainerEnd(),e.\u0275\u0275elementEnd()}if(2&t){const s=e.\u0275\u0275reference(6);e.\u0275\u0275property("modalRef",o.activeModal),e.\u0275\u0275advance(3),e.\u0275\u0275i18nExp(e.\u0275\u0275pipeBind1(3,19,o.action)),e.\u0275\u0275i18nApply(2),e.\u0275\u0275advance(2),e.\u0275\u0275property("formGroup",o.remoteClusterForm),e.\u0275\u0275advance(3),e.\u0275\u0275property("ngIf",void 0!==o.connectionVerified&&!o.connectionVerified&&"Connection refused"!==o.connectionMessage),e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf",void 0!==o.connectionVerified&&o.connectionVerified),e.\u0275\u0275advance(8),e.\u0275\u0275property("source",o.clusterApiUrlCmd)("byId",!1),e.\u0275\u0275i18nExp(o.clusterApiUrlCmd),e.\u0275\u0275i18nApply(12),e.\u0275\u0275advance(3),e.\u0275\u0275property("ngIf",o.remoteClusterForm.showError("remoteClusterUrl",s,"required")),e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf",o.remoteClusterForm.showError("remoteClusterUrl",s,"endpoint")),e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf",o.remoteClusterForm.showError("remoteClusterUrl",s,"hubUrlCheck")),e.\u0275\u0275advance(6),e.\u0275\u0275property("ngIf",o.remoteClusterForm.showError("clusterAlias",s,"required")),e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf",o.remoteClusterForm.showError("clusterAlias",s,"uniqueName")),e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf","edit"!==o.action),e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf","edit"!==o.action),e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf","edit"!==o.action),e.\u0275\u0275advance(7),e.\u0275\u0275property("ngIf",o.remoteClusterForm.controls.ssl.value),e.\u0275\u0275advance(2),e.\u0275\u0275property("submitText",e.\u0275\u0275pipeBind1(42,21,o.action)+" Cluster")("form",o.remoteClusterForm)}},dependencies:[l.NgIf,y.m,Ut.z,nt.m,fe.N,oe.e,ri.h,Ge.S,we.a,Ve.C,ze.E,C.\u0275NgNoValidate,C.NgSelectOption,C.\u0275NgSelectMultipleOption,C.DefaultValueAccessor,C.CheckboxControlValueAccessor,C.SelectControlValueAccessor,C.NgControlStatus,C.NgControlStatusGroup,C.FormGroupDirective,C.FormControlName,l.TitleCasePipe]})}}const tM=["*"];function nM(i,n){if(1&i&&(e.\u0275\u0275elementStart(0,"div",2)(1,"div",3)(2,"span",4),e.\u0275\u0275i18n(3,0),e.\u0275\u0275elementEnd()()()),2&i){const t=e.\u0275\u0275nextContext();e.\u0275\u0275advance(3),e.\u0275\u0275i18nExp(t.groupTitle),e.\u0275\u0275i18nApply(3)}}class hr{constructor(){this.groupTitle=""}static{this.\u0275fac=function(t){return new(t||hr)}}static{this.\u0275cmp=e.\u0275\u0275defineComponent({type:hr,selectors:[["cd-card-group"]],inputs:{groupTitle:"groupTitle"},ngContentSelectors:tM,decls:3,vars:1,consts:()=>{let n;return n=$localize`:␟3fa8b53814a8ea83f23810880443faab2ec5720a␟4997154650464221557:${"\ufffd0\ufffd"}:INTERPOLATION:`,[n,["class","row",4,"ngIf"],[1,"row"],[1,"info-group-title"],["data-testid","group-title"]]},template:function(t,o){1&t&&(e.\u0275\u0275projectionDef(),e.\u0275\u0275template(0,nM,4,1,"div",1),e.\u0275\u0275elementStart(1,"div",2),e.\u0275\u0275projection(2),e.\u0275\u0275elementEnd()),2&t&&e.\u0275\u0275property("ngIf",o.groupTitle)},dependencies:[l.NgIf],styles:[".info-group-title[_ngcontent-%COMP%]{font-size:1.75rem;margin:0 0 .5vw}"]})}}const oM=["clusterUsageTpl"],iM=["nameTpl"],aM=(i,n)=>[i,n],sM=(i,n,t)=>[i,n,t],rM=i=>({"text-danger":i}),lM=(i,n)=>({max:i,current:n});function _M(i,n){1&i&&(e.\u0275\u0275elementStart(0,"div",15)(1,"h3",16),e.\u0275\u0275text(2,"Connect Cluster"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(3,"h4",17),e.\u0275\u0275text(4,'Upgrade your current cluster to a multi-cluster setup effortlessly. Click on the "Connect Cluster" button to begin the process.'),e.\u0275\u0275elementEnd()())}function cM(i,n){if(1&i&&(e.\u0275\u0275elementStart(0,"div",15)(1,"h4",17),e.\u0275\u0275text(2,"This cluster is already managed by cluster - "),e.\u0275\u0275elementStart(3,"a",18),e.\u0275\u0275text(4),e.\u0275\u0275element(5,"i",19),e.\u0275\u0275elementEnd()()()),2&i){const t=e.\u0275\u0275nextContext().ngIf;e.\u0275\u0275advance(3),e.\u0275\u0275property("href",t.MANAGED_BY_CLUSTERS[0].url,e.\u0275\u0275sanitizeUrl),e.\u0275\u0275advance(),e.\u0275\u0275textInterpolate1(" ",t.MANAGED_BY_CLUSTERS[0].fsid," ")}}function dM(i,n){if(1&i){const t=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"div",20)(1,"div",21)(2,"button",22),e.\u0275\u0275listener("click",function(){e.\u0275\u0275restoreView(t);const s=e.\u0275\u0275nextContext(3);return e.\u0275\u0275resetView(s.openRemoteClusterInfoModal())}),e.\u0275\u0275element(3,"i",23),e.\u0275\u0275text(4," Connect Cluster "),e.\u0275\u0275elementEnd()()()}if(2&i){const t=e.\u0275\u0275nextContext(3);e.\u0275\u0275advance(3),e.\u0275\u0275property("ngClass",t.icons.add)}}function uM(i,n){if(1&i&&(e.\u0275\u0275elementContainerStart(0,9),e.\u0275\u0275elementStart(1,"div",10)(2,"div",11),e.\u0275\u0275element(3,"i",12),e.\u0275\u0275template(4,_M,5,0,"div",13)(5,cM,6,2,"div",13)(6,dM,5,1,"div",14),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementContainerEnd()),2&i){const t=n.ngIf,o=e.\u0275\u0275nextContext(2);e.\u0275\u0275advance(3),e.\u0275\u0275property("ngClass",e.\u0275\u0275pureFunction2(4,aM,o.icons.large,o.icons.wrench)),e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf",0===t.MANAGED_BY_CLUSTERS.length),e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf",t.MANAGED_BY_CLUSTERS.length>0),e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf",0===t.MANAGED_BY_CLUSTERS.length)}}function pM(i,n){if(1&i&&(e.\u0275\u0275template(0,uM,7,7,"ng-container",8),e.\u0275\u0275pipe(1,"async")),2&i){const t=e.\u0275\u0275nextContext();e.\u0275\u0275property("ngIf",e.\u0275\u0275pipeBind1(1,1,t.managedByConfig$))}}function mM(i,n){if(1&i&&(e.\u0275\u0275elementStart(0,"div",24)(1,"span",25)(2,"a",26),e.\u0275\u0275text(3),e.\u0275\u0275elementEnd()()()),2&i){const t=e.\u0275\u0275nextContext();e.\u0275\u0275advance(),e.\u0275\u0275propertyInterpolate("title",t.cluster),e.\u0275\u0275advance(2),e.\u0275\u0275textInterpolate1(" ",t.cluster," ")}}function fM(i,n){if(1&i&&(e.\u0275\u0275elementStart(0,"div",9)(1,"div",10)(2,"div",11),e.\u0275\u0275element(3,"i",12),e.\u0275\u0275elementStart(4,"p",27),e.\u0275\u0275i18n(5,4),e.\u0275\u0275elementEnd()()()()),2&i){const t=e.\u0275\u0275nextContext();e.\u0275\u0275advance(3),e.\u0275\u0275property("ngClass",e.\u0275\u0275pureFunction3(1,sM,t.icons.large3x,t.icons.spinner,t.icons.spin))}}function EM(i,n){if(1&i&&(e.\u0275\u0275i18nStart(0,5,1),e.\u0275\u0275elementStart(1,"div")(2,"p"),e.\u0275\u0275element(3,"strong")(4,"br")(5,"strong")(6,"br")(7,"strong")(8,"br"),e.\u0275\u0275elementEnd()(),e.\u0275\u0275i18nEnd()),2&i){const t=n.$implicit;e.\u0275\u0275advance(8),e.\u0275\u0275i18nExp(t.cluster_alias)(t.cluster_name)(t.reconnectionError?t.reconnectionError:"Security configuration error"),e.\u0275\u0275i18nApply(0)}}function gM(i,n){if(1&i){const t=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"cd-alert-panel",49),e.\u0275\u0275listener("dismissed",function(){e.\u0275\u0275restoreView(t);const s=e.\u0275\u0275nextContext(4);return e.\u0275\u0275resetView(s.onDismissed())}),e.\u0275\u0275i18nStart(1,5),e.\u0275\u0275elementStart(2,"div")(3,"p"),e.\u0275\u0275element(4,"strong"),e.\u0275\u0275elementEnd(),e.\u0275\u0275template(5,EM,9,3,"div",50),e.\u0275\u0275elementEnd(),e.\u0275\u0275i18nEnd(),e.\u0275\u0275elementEnd()}if(2&i){const t=e.\u0275\u0275nextContext(4);e.\u0275\u0275property("showTitle",!1)("dismissible",!0),e.\u0275\u0275advance(5),e.\u0275\u0275property("ngForOf",t.prometheusConnectionErrors)}}function CM(i,n){if(1&i){const t=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"cd-alert-panel",51),e.\u0275\u0275listener("dismissed",function(){e.\u0275\u0275restoreView(t);const s=e.\u0275\u0275nextContext(4);return e.\u0275\u0275resetView(s.onDismissed())}),e.\u0275\u0275i18nStart(1,6),e.\u0275\u0275element(2,"p"),e.\u0275\u0275i18nEnd(),e.\u0275\u0275elementEnd()}2&i&&e.\u0275\u0275property("showTitle",!1)("dismissible",!0)}function SM(i,n){if(1&i&&(e.\u0275\u0275elementStart(0,"h3"),e.\u0275\u0275text(1),e.\u0275\u0275elementEnd()),2&i){const t=e.\u0275\u0275nextContext(5);e.\u0275\u0275advance(),e.\u0275\u0275textInterpolate(t.queriesResults.CLUSTER_COUNT[0][1])}}function hM(i,n){if(1&i&&(e.\u0275\u0275elementStart(0,"h3",56),e.\u0275\u0275element(1,"i",39),e.\u0275\u0275text(2),e.\u0275\u0275elementEnd()),2&i){const t=e.\u0275\u0275nextContext(5);e.\u0275\u0275advance(),e.\u0275\u0275property("ngClass",t.icons.danger),e.\u0275\u0275advance(),e.\u0275\u0275textInterpolate1(" ",t.queriesResults.HEALTH_ERROR_COUNT[0][1]," ")}}function TM(i,n){if(1&i&&(e.\u0275\u0275elementStart(0,"h3",57),e.\u0275\u0275element(1,"i",39),e.\u0275\u0275text(2),e.\u0275\u0275elementEnd()),2&i){const t=e.\u0275\u0275nextContext(5);e.\u0275\u0275advance(),e.\u0275\u0275property("ngClass",t.icons.warning),e.\u0275\u0275advance(),e.\u0275\u0275textInterpolate1(" ",t.queriesResults.HEALTH_WARNING_COUNT[0][1]," ")}}function FM(i,n){if(1&i&&(e.\u0275\u0275elementStart(0,"h3",56),e.\u0275\u0275element(1,"i",39),e.\u0275\u0275text(2),e.\u0275\u0275elementEnd()),2&i){const t=e.\u0275\u0275nextContext(5);e.\u0275\u0275advance(),e.\u0275\u0275property("ngClass",t.icons.danger),e.\u0275\u0275advance(),e.\u0275\u0275textInterpolate1(" ",t.queriesResults.HEALTH_ERROR_COUNT[0][1]," ")}}function vM(i,n){if(1&i&&(e.\u0275\u0275elementStart(0,"h3",58),e.\u0275\u0275element(1,"i",39),e.\u0275\u0275text(2),e.\u0275\u0275elementEnd()),2&i){const t=e.\u0275\u0275nextContext(5);e.\u0275\u0275advance(),e.\u0275\u0275property("ngClass",t.icons.success),e.\u0275\u0275advance(),e.\u0275\u0275textInterpolate1(" ",t.queriesResults.HEALTH_OK_COUNT[0][1]," ")}}function MM(i,n){if(1&i&&(e.\u0275\u0275elementStart(0,"cd-card",52)(1,"span",21),e.\u0275\u0275template(2,SM,2,1,"h3",7)(3,hM,3,2,"h3",53)(4,TM,3,2,"h3",54)(5,FM,3,2,"h3",53)(6,vM,3,2,"h3",55),e.\u0275\u0275elementEnd()()),2&i){const t=e.\u0275\u0275nextContext(4);e.\u0275\u0275property("fullHeight",!0),e.\u0275\u0275advance(2),e.\u0275\u0275property("ngIf","0"===t.queriesResults.HEALTH_ERROR_COUNT[0][1]&&"0"===t.queriesResults.HEALTH_OK_COUNT[0][1]&&"0"===t.queriesResults.HEALTH_WARNING_COUNT[0][1]),e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf","0"!==t.queriesResults.HEALTH_ERROR_COUNT[0][1]),e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf","0"!==t.queriesResults.HEALTH_WARNING_COUNT[0][1]),e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf","0"!==t.queriesResults.HEALTH_ERROR_COUNT[0][1]),e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf","0"!==t.queriesResults.HEALTH_OK_COUNT[0][1])}}function RM(i,n){if(1&i&&(e.\u0275\u0275elementStart(0,"h3"),e.\u0275\u0275text(1),e.\u0275\u0275elementEnd()),2&i){const t=e.\u0275\u0275nextContext(5);e.\u0275\u0275advance(),e.\u0275\u0275textInterpolate1(" ",t.queriesResults.ALERTS_COUNT[0][1]," ")}}function OM(i,n){if(1&i&&(e.\u0275\u0275elementStart(0,"h3",56),e.\u0275\u0275element(1,"i",39),e.\u0275\u0275text(2),e.\u0275\u0275elementEnd()),2&i){const t=e.\u0275\u0275nextContext(5);e.\u0275\u0275advance(),e.\u0275\u0275property("ngClass",t.icons.danger),e.\u0275\u0275advance(),e.\u0275\u0275textInterpolate1(" ",t.queriesResults.CRITICAL_ALERTS_COUNT[0][1]," ")}}function PM(i,n){if(1&i&&(e.\u0275\u0275elementStart(0,"h3",57),e.\u0275\u0275element(1,"i",39),e.\u0275\u0275text(2),e.\u0275\u0275elementEnd()),2&i){const t=e.\u0275\u0275nextContext(5);e.\u0275\u0275advance(),e.\u0275\u0275property("ngClass",t.icons.warning),e.\u0275\u0275advance(),e.\u0275\u0275textInterpolate1(" ",t.queriesResults.WARNING_ALERTS_COUNT[0][1]," ")}}function bM(i,n){if(1&i&&(e.\u0275\u0275elementStart(0,"cd-card",59)(1,"span",21),e.\u0275\u0275template(2,RM,2,1,"h3",7)(3,OM,3,2,"h3",53)(4,PM,3,2,"h3",54),e.\u0275\u0275elementEnd()()),2&i){const t=e.\u0275\u0275nextContext(4);e.\u0275\u0275property("fullHeight",!0),e.\u0275\u0275advance(2),e.\u0275\u0275property("ngIf","0"===t.queriesResults.CRITICAL_ALERTS_COUNT[0][1]&&"0"===t.queriesResults.WARNING_ALERTS_COUNT[0][1]),e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf","0"!==t.queriesResults.CRITICAL_ALERTS_COUNT[0][1]),e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf","0"!==t.queriesResults.WARNING_ALERTS_COUNT[0][1])}}function NM(i,n){if(1&i&&e.\u0275\u0275element(0,"i",39),2&i){const t=e.\u0275\u0275nextContext(4);e.\u0275\u0275property("ngClass",t.icons.danger)}}function IM(i,n){if(1&i&&(e.\u0275\u0275elementStart(0,"cd-card",60)(1,"span",21)(2,"h3"),e.\u0275\u0275text(3),e.\u0275\u0275elementEnd()()()),2&i){const t=e.\u0275\u0275nextContext(4);e.\u0275\u0275advance(3),e.\u0275\u0275textInterpolate(t.queriesResults.TOTAL_HOSTS[0][1])}}function AM(i,n){if(1&i&&(e.\u0275\u0275elementStart(0,"cd-card",61),e.\u0275\u0275elementContainerStart(1,62),e.\u0275\u0275element(2,"cd-dashboard-pie",63),e.\u0275\u0275elementContainerEnd(),e.\u0275\u0275elementEnd()),2&i){const t=e.\u0275\u0275nextContext(4);e.\u0275\u0275advance(2),e.\u0275\u0275property("data",e.\u0275\u0275pureFunction2(1,lM,t.queriesResults.TOTAL_CLUSTERS_CAPACITY[0][1],t.queriesResults.TOTAL_USED_CAPACITY[0][1]))}}function DM(i,n){if(1&i&&e.\u0275\u0275element(0,"cd-dashboard-area-chart",70),2&i){const t=e.\u0275\u0275nextContext(5);e.\u0275\u0275property("labelsArray",t.capacityLabels)("dataArray",t.capacityValues)("truncateLabel",!0)}}function yM(i,n){if(1&i&&e.\u0275\u0275element(0,"cd-dashboard-area-chart",71),2&i){const t=e.\u0275\u0275nextContext(5);e.\u0275\u0275property("labelsArray",t.iopsLabels)("dataArray",t.iopsValues)("truncateLabel",!0)}}function LM(i,n){if(1&i&&e.\u0275\u0275element(0,"cd-dashboard-area-chart",72),2&i){const t=e.\u0275\u0275nextContext(5);e.\u0275\u0275property("labelsArray",t.throughputLabels)("dataArray",t.throughputValues)("truncateLabel",!0)}}function $M(i,n){if(1&i){const t=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"cd-card",64)(1,"div",65)(2,"cd-dashboard-time-selector",66),e.\u0275\u0275listener("selectedTime",function(s){e.\u0275\u0275restoreView(t);const d=e.\u0275\u0275nextContext(4);return e.\u0275\u0275resetView(d.getPrometheusData(s,"clusterUtilization"))}),e.\u0275\u0275elementEnd(),e.\u0275\u0275template(3,DM,1,3,"cd-dashboard-area-chart",67)(4,yM,1,3,"cd-dashboard-area-chart",68)(5,LM,1,3,"cd-dashboard-area-chart",69),e.\u0275\u0275elementEnd()()}if(2&i){const t=e.\u0275\u0275nextContext(4);e.\u0275\u0275property("cardTitle","Top "+t.COUNT_OF_UTILIZATION_CHARTS+" Cluster Utilization")("fullHeight",!0),e.\u0275\u0275advance(3),e.\u0275\u0275property("ngIf",t.capacityLabels&&t.capacityValues),e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf",t.iopsLabels&&t.iopsValues),e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf",t.throughputLabels&&t.throughputLabels)}}function xM(i,n){if(1&i&&e.\u0275\u0275element(0,"cd-table",73),2&i){const t=e.\u0275\u0275nextContext(4);e.\u0275\u0275property("data",t.clusters)("columns",t.columns)("limit",5)}}function UM(i,n){if(1&i&&e.\u0275\u0275element(0,"cd-dashboard-area-chart",78),2&i){const t=e.\u0275\u0275nextContext(5);e.\u0275\u0275property("labelsArray",t.poolCapacityLabels)("dataArray",t.poolCapacityValues)("truncateLabel",!0)}}function wM(i,n){if(1&i&&e.\u0275\u0275element(0,"cd-dashboard-area-chart",79),2&i){const t=e.\u0275\u0275nextContext(5);e.\u0275\u0275property("labelsArray",t.poolIOPSLabels)("dataArray",t.poolIOPSValues)("truncateLabel",!0)}}function GM(i,n){if(1&i&&e.\u0275\u0275element(0,"cd-dashboard-area-chart",80),2&i){const t=e.\u0275\u0275nextContext(5);e.\u0275\u0275property("labelsArray",t.poolThroughputLabels)("dataArray",t.poolThroughputValues)("truncateLabel",!0)}}function HM(i,n){if(1&i){const t=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"cd-card",74)(1,"div",65)(2,"cd-dashboard-time-selector",66),e.\u0275\u0275listener("selectedTime",function(s){e.\u0275\u0275restoreView(t);const d=e.\u0275\u0275nextContext(4);return e.\u0275\u0275resetView(d.getPrometheusData(s,"poolUtilization"))}),e.\u0275\u0275elementEnd(),e.\u0275\u0275template(3,UM,1,3,"cd-dashboard-area-chart",75)(4,wM,1,3,"cd-dashboard-area-chart",76)(5,GM,1,3,"cd-dashboard-area-chart",77),e.\u0275\u0275elementEnd()()}if(2&i){const t=e.\u0275\u0275nextContext(4);e.\u0275\u0275property("cardTitle","Top "+t.COUNT_OF_UTILIZATION_CHARTS+" Pools Utilization"),e.\u0275\u0275advance(3),e.\u0275\u0275property("ngIf",t.poolCapacityLabels&&t.poolCapacityValues),e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf",t.poolIOPSLabels&&t.poolIOPSValues),e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf",t.poolThroughputLabels&&t.poolThroughputValues)}}function VM(i,n){if(1&i&&(e.\u0275\u0275elementContainerStart(0),e.\u0275\u0275template(1,gM,6,3,"cd-alert-panel",31)(2,CM,3,2,"cd-alert-panel",32),e.\u0275\u0275elementStart(3,"cd-card-group")(4,"div",33)(5,"div",34),e.\u0275\u0275template(6,MM,7,6,"cd-card",35)(7,bM,5,4,"cd-card",36),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(8,"div",37)(9,"cd-card",38)(10,"span",21)(11,"h3",39),e.\u0275\u0275template(12,NM,1,1,"i",40),e.\u0275\u0275text(13),e.\u0275\u0275elementEnd()()(),e.\u0275\u0275template(14,IM,4,1,"cd-card",41),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(15,"div",37),e.\u0275\u0275template(16,AM,3,4,"cd-card",42),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(17,"div",43),e.\u0275\u0275template(18,$M,6,5,"cd-card",44),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(19,"cd-card-group")(20,"div",45),e.\u0275\u0275template(21,xM,1,3,"cd-table",46),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(22,"cd-card-group")(23,"div",47)(24,"div",34),e.\u0275\u0275template(25,HM,6,4,"cd-card",48),e.\u0275\u0275elementEnd()()(),e.\u0275\u0275elementContainerEnd()),2&i){const t=e.\u0275\u0275nextContext(3);e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf",t.prometheusConnectionErrors.length>0),e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf",t.showDeletionMessage),e.\u0275\u0275advance(4),e.\u0275\u0275property("ngIf",t.queriesResults.CLUSTER_COUNT&&t.queriesResults.CLUSTER_COUNT[0]),e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf",t.queriesResults.ALERTS_COUNT&&t.queriesResults.ALERTS_COUNT[0]),e.\u0275\u0275advance(4),e.\u0275\u0275property("ngClass",e.\u0275\u0275pureFunction1(12,rM,t.connectionErrorsCount>0)),e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf",t.connectionErrorsCount>0),e.\u0275\u0275advance(),e.\u0275\u0275textInterpolate1(" ",t.connectionErrorsCount," "),e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf",t.queriesResults.TOTAL_HOSTS&&t.queriesResults.TOTAL_HOSTS[0]),e.\u0275\u0275advance(2),e.\u0275\u0275property("ngIf",t.queriesResults.TOTAL_CLUSTERS_CAPACITY&&t.queriesResults.TOTAL_CLUSTERS_CAPACITY[0]&&t.queriesResults.TOTAL_USED_CAPACITY&&t.queriesResults.TOTAL_USED_CAPACITY[0]),e.\u0275\u0275advance(2),e.\u0275\u0275property("ngIf",t.clusters),e.\u0275\u0275advance(3),e.\u0275\u0275property("ngIf",t.clusters),e.\u0275\u0275advance(4),e.\u0275\u0275property("ngIf",t.clusters)}}function BM(i,n){if(1&i&&(e.\u0275\u0275elementStart(0,"div",29),e.\u0275\u0275template(1,VM,26,14,"ng-container",30),e.\u0275\u0275elementEnd()),2&i){const t=e.\u0275\u0275nextContext(2),o=e.\u0275\u0275reference(5);e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf",!t.loading)("ngIfElse",o)}}function zM(i,n){if(1&i&&(e.\u0275\u0275elementContainerStart(0),e.\u0275\u0275template(1,BM,2,2,"div",28),e.\u0275\u0275elementContainerEnd()),2&i){const t=n.ngIf,o=e.\u0275\u0275nextContext(),s=e.\u0275\u0275reference(1);e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf",o.isMultiCluster&&0===t.MANAGED_BY_CLUSTERS.length)("ngIfElse",s)}}function XM(i,n){if(1&i&&e.\u0275\u0275element(0,"cd-usage-bar",81),2&i){const t=n.data.row;e.\u0275\u0275property("total",t.total_capacity)("used",t.used_capacity)}}class Tr{constructor(n,t,o,s,d,h){this.multiClusterService=n,this.settingsService=t,this.modalService=o,this.router=s,this.prometheusService=d,this.notificationService=h,this.COUNT_OF_UTILIZATION_CHARTS=5,this.columns=[],this.queriesResults={ALERTS_COUNT:0,CLUSTER_COUNT:0,HEALTH_OK_COUNT:0,HEALTH_WARNING_COUNT:0,HEALTH_ERROR_COUNT:0,TOTAL_CLUSTERS_CAPACITY:0,TOTAL_USED_CAPACITY:0,CLUSTER_CAPACITY_UTILIZATION:0,CLUSTER_IOPS_UTILIZATION:0,CLUSTER_THROUGHPUT_UTILIZATION:0,POOL_CAPACITY_UTILIZATION:0,POOL_IOPS_UTILIZATION:0,POOL_THROUGHPUT_UTILIZATION:0,TOTAL_CAPACITY:0,USED_CAPACITY:0,HOSTS:0,POOLS:0,OSDS:0,CLUSTER_ALERTS:0,version:"",FEDERATE_UP_METRIC:0},this.subs=new K.Subscription,this.dashboardClustersMap=new Map,this.icons=g.FI,this.loading=!0,this.isMultiCluster=!0,this.clusterTokenStatus={},this.clusters=[],this.connectionErrorsCount=0,this.capacityLabels=[],this.iopsLabels=[],this.throughputLabels=[],this.poolIOPSLabels=[],this.poolCapacityLabels=[],this.poolThroughputLabels=[],this.capacityValues=[],this.iopsValues=[],this.throughputValues=[],this.poolIOPSValues=[],this.poolCapacityValues=[],this.poolThroughputValues=[],this.showDeletionMessage=!1,this.isClusterAdded=!1,this.PROMETHEUS_DELAY=2e4,this.LOAD_DELAY=5e3,this.CLUSTERS_REFRESH_INTERVAL=3e4,this.multiClusterQueries={},this.prometheusConnectionErrors=[],this.multiClusterQueries={cluster:{queries:wt.Ri,selectedTime:this.prometheusService.lastHourDateObject},pool:{queries:wt.td,selectedTime:this.prometheusService.lastHourDateObject},all:{queries:wt.sj,selectedTime:this.prometheusService.lastHourDateObject}}}ngOnInit(){this.columns=[{prop:"cluster",name:$localize`Cluster Name`,flexGrow:2,cellTemplate:this.nameTpl},{prop:"cluster_connection_status",name:$localize`Connection`,flexGrow:2,cellTransformation:b.x.badge,customTemplateConfig:{map:{1:{value:"DISCONNECTED",class:"badge-danger"},0:{value:"CONNECTED",class:"badge-success"},2:{value:"CHECKING..",class:"badge-info"}}}},{prop:"status",name:$localize`Status`,flexGrow:1,cellTransformation:b.x.badge,customTemplateConfig:{map:{1:{value:"WARN",class:"badge-warning"},0:{value:"OK",class:"badge-success"},2:{value:"ERROR",class:"badge-danger"}}}},{prop:"alert",name:$localize`Alerts`,flexGrow:1},{prop:"version",name:$localize`Version`,flexGrow:2},{prop:"usage",name:$localize`Usage`,cellTemplate:this.clusterUsageTpl,flexGrow:1},{prop:"pools",name:$localize`Pools`,flexGrow:1},{prop:"hosts",name:$localize`Hosts`,flexGrow:1},{prop:"osds",name:$localize`OSDs`,flexGrow:1}],this.subs.add(this.multiClusterService.subscribe(n=>{this.isMultiCluster=Object.keys(n.config).length>1,this.clusterDetailsArray=Object.values(n.config).flat();const t=n.hub_url;for(const o in n.config)if(n.config.hasOwnProperty(o)){const s=n.config[o][0];if(t===s.url){this.localClusterName=s.name;break}}})),this.managedByConfig$=this.settingsService.getValues("MANAGED_BY_CLUSTERS"),this.subs.add(this.multiClusterService.subscribeClusterTokenStatus(n=>{this.clusterTokenStatus=n})),this.isClusterAdded=this.multiClusterService.isClusterAdded(),this.isClusterAdded?setTimeout(()=>{this.getPrometheusData(this.prometheusService.lastHourDateObject),this.multiClusterService.isClusterAdded(!1)},this.PROMETHEUS_DELAY):(this.showDeletionMessage=this.multiClusterService.showPrometheusDelayMessage(),this.showDeletionMessage?setTimeout(()=>{this.getPrometheusData(this.prometheusService.lastHourDateObject)},this.LOAD_DELAY):this.getPrometheusData(this.prometheusService.lastHourDateObject))}openRemoteClusterInfoModal(){this.bsModalRef=this.modalService.show(wi,{action:"connect"},{size:"lg"}),this.bsModalRef.componentInstance.submitAction.subscribe(()=>{this.loading=!0,setTimeout(()=>{const t=this.router.url.split("?")[0];this.multiClusterService.refreshMultiCluster(t),this.getPrometheusData(this.prometheusService.lastHourDateObject)},this.PROMETHEUS_DELAY)})}getPrometheusData(n,t){const o=Object.keys(wt.Ri).concat(Object.keys(wt.td)),s=Object.keys(wt.sj).concat(Object.keys(wt.Ri).concat(Object.keys(wt.td)));let h=s;t&&("poolUtilization"===t&&(this.multiClusterQueries.pool.selectedTime=n,h=Object.keys(wt.td)),"clusterUtilization"===t&&(this.multiClusterQueries.cluster.selectedTime=n,h=Object.keys(wt.Ri))),this.prometheusService.getMultiClusterQueriesData(this.queriesResults,["ALERTS","MGR_METADATA","HEALTH_STATUS","TOTAL_CAPACITY","USED_CAPACITY","POOLS","OSDS","CLUSTER_CAPACITY_UTILIZATION","CLUSTER_IOPS_UTILIZATION","CLUSTER_THROUGHPUT_UTILIZATION","POOL_CAPACITY_UTILIZATION","POOL_IOPS_UTILIZATION","POOL_THROUGHPUT_UTILIZATION","HOSTS","CLUSTER_ALERTS","FEDERATE_UP_METRIC"],o,this.multiClusterQueries,h,s).subscribe(I=>{this.queriesResults=I,this.loading=!1,this.alerts=this.queriesResults.ALERTS,this.getAlertsInfo(),this.getClustersInfo(),this.interval=setInterval(()=>{this.getClustersInfo()},this.CLUSTERS_REFRESH_INTERVAL)})}getAlertsInfo(){const n=[];this.alerts?.forEach(t=>{const o=t.metric,s={alertName:o.alertname,cluster:o.cluster,alertState:o.alertstate,severity:o.severity};n.push(s)}),this.alerts=n}getClustersInfo(){const n=[];this.queriesResults.TOTAL_CAPACITY?.forEach((t,o)=>{const s=t.metric.cluster,d=parseInt(t.value[1]),h=this.findCluster(this.queriesResults?.MGR_METADATA,s),I=this.getVersion(h.metric.ceph_version),$=this.findClusterData(this.queriesResults?.USED_CAPACITY,s),w=this.findClusterData(this.queriesResults?.POOLS,s),X=this.findClusterData(this.queriesResults?.HOSTS,s),J=this.findClusterData(this.queriesResults?.CLUSTER_ALERTS,s),re=this.findClusterData(this.queriesResults?.OSDS,s),de=this.findClusterData(this.queriesResults?.HEALTH_STATUS,s),Me=d-$,ve=`federate_${o+1}`,Se=this.queriesResults?.FEDERATE_UP_METRIC.filter($e=>$e.metric.job===ve);this.checkFederateMetricsStatus(Se),n.push({cluster:s.trim(),status:de,alert:J,total_capacity:d,used_capacity:$,available_capacity:Me,pools:w,osds:re,hosts:X,version:I,cluster_connection_status:2})}),this.clusterTokenStatus&&(n.forEach(t=>{t.cluster_connection_status=this.clusterTokenStatus[t.cluster]?.status,t.cluster===this.localClusterName&&(t.cluster_connection_status=0)}),this.connectionErrorsCount=n.filter(t=>1===t.cluster_connection_status).length),this.clusters=n,this.capacityLabels=this.generateQueryLabel(this.queriesResults.CLUSTER_CAPACITY_UTILIZATION),this.iopsLabels=this.generateQueryLabel(this.queriesResults.CLUSTER_IOPS_UTILIZATION),this.throughputLabels=this.generateQueryLabel(this.queriesResults.CLUSTER_THROUGHPUT_UTILIZATION),this.poolCapacityLabels=this.generateQueryLabel(this.queriesResults.POOL_CAPACITY_UTILIZATION,!0),this.poolIOPSLabels=this.generateQueryLabel(this.queriesResults.POOL_IOPS_UTILIZATION,!0),this.poolThroughputLabels=this.generateQueryLabel(this.queriesResults.POOL_THROUGHPUT_UTILIZATION,!0),this.capacityValues=this.getQueryValues(this.queriesResults.CLUSTER_CAPACITY_UTILIZATION),this.iopsValues=this.getQueryValues(this.queriesResults.CLUSTER_IOPS_UTILIZATION),this.throughputValues=this.getQueryValues(this.queriesResults.CLUSTER_THROUGHPUT_UTILIZATION),this.poolCapacityValues=this.getQueryValues(this.queriesResults.POOL_CAPACITY_UTILIZATION),this.poolIOPSValues=this.getQueryValues(this.queriesResults.POOL_IOPS_UTILIZATION),this.poolThroughputValues=this.getQueryValues(this.queriesResults.POOL_THROUGHPUT_UTILIZATION)}checkFederateMetricsStatus(n){!n||0===n.length||(this.prometheusConnectionErrors=[],n.forEach(t=>{const o=t.metric.instance,s=o.split(":")[0],d=o.split(":")[1],h=t.value[1];this.clusterDetailsArray?.forEach(I=>{if(I.name!==this.localClusterName){const $=I.prometheus_url.replace(/^(http:\/\/|https:\/\/)/,""),w=$.split(":")[0],X=$.split(":")[1]?$.split(":")[1]:"443";!this.prometheusConnectionErrors.find(re=>re.url===I.url)&&s===w&&d===X&&"0"===h&&(this.prometheusConnectionErrors.push({cluster_name:I.name,cluster_alias:I.cluster_alias,url:I.url}),this.multiClusterService.reConnectCluster(I.url,I.user,null,I.ssl_verify,I.ssl_certificate,I.ttl,I.token).subscribe({error:re=>{const de=re.error.detail,Me=this.prometheusConnectionErrors.findIndex(ve=>ve.url===I.url);-1!==Me&&(this.prometheusConnectionErrors[Me].reconnectionError=de)},next:re=>{if(!0===re){const de=$localize`Cluster re-connected successfully`;this.notificationService.show(Ae._.success,de),this.prometheusConnectionErrors=this.prometheusConnectionErrors.filter(Me=>Me.url!==I.url)}}}))}})}))}findClusterData(n,t){const o=this.findCluster(n,t);return parseInt(o?.value[1]||0)}findCluster(n,t){return n.find(o=>o?.metric?.cluster===t)}getVersion(n){const t=n.replace("ceph version ","").split(" ");return t[0]+" "+t.slice(2,t.length).join(" ")}generateQueryLabel(n,t=!1,o=this.COUNT_OF_UTILIZATION_CHARTS){let s=[];for(let d=0;d<o;d++){let h="";n[d]&&(h=n[d]?.metric?.cluster,t&&(h=n[d]?.metric?.name+" - "+h)),s.push(h)}return s}getQueryValues(n,t=this.COUNT_OF_UTILIZATION_CHARTS){let o=[];for(let s=0;s<t;s++)n[s]&&o.push(n[s]?.values);return o}onDismissed(){this.showDeletionMessage=!1,this.multiClusterService.showPrometheusDelayMessage(!1)}ngOnDestroy(){this.subs.unsubscribe(),clearInterval(this.interval),this.prometheusService.unsubscribe()}static{this.\u0275fac=function(t){return new(t||Tr)(e.\u0275\u0275directiveInject(yi.J),e.\u0275\u0275directiveInject(Io.h),e.\u0275\u0275directiveInject(Yt.B),e.\u0275\u0275directiveInject(u.Router),e.\u0275\u0275directiveInject(Sn.o),e.\u0275\u0275directiveInject(Q.J))}}static{this.\u0275cmp=e.\u0275\u0275defineComponent({type:Tr,selectors:[["cd-multi-cluster"]],viewQuery:function(t,o){if(1&t&&(e.\u0275\u0275viewQuery(oM,7),e.\u0275\u0275viewQuery(iM,7)),2&t){let s;e.\u0275\u0275queryRefresh(s=e.\u0275\u0275loadQuery())&&(o.clusterUsageTpl=s.first),e.\u0275\u0275queryRefresh(s=e.\u0275\u0275loadQuery())&&(o.nameTpl=s.first)}},decls:10,vars:3,consts:()=>{let n,t,o;return n=$localize`:␟2612b68642ad955fa2e85aaccdd253b4e51884a2␟451381945440864383:Loading data, Please wait...`,t=$localize`:␟35704a33880a4d8852896e0a986cb9d06072d7ff␟6410307000965024485:${"\ufffd#2\ufffd"}:START_TAG_DIV_1:${"[\ufffd#3\ufffd|\ufffd#2:1\ufffd]"}:START_PARAGRAPH:${"[\ufffd#4\ufffd|\ufffd#3:1\ufffd|\ufffd#5:1\ufffd|\ufffd#7:1\ufffd]"}:START_TAG_STRONG:Could not retrieve metrics from the following clusters:${"[\ufffd/#4\ufffd|\ufffd/#3:1\ufffd|\ufffd/#5:1\ufffd|\ufffd/#7:1\ufffd]"}:CLOSE_TAG_STRONG:${"[\ufffd/#3\ufffd|\ufffd/#2:1\ufffd]"}:CLOSE_PARAGRAPH:${"\ufffd*5:1\ufffd\ufffd#1:1\ufffd"}:START_TAG_DIV:${"[\ufffd#3\ufffd|\ufffd#2:1\ufffd]"}:START_PARAGRAPH:${"[\ufffd#4\ufffd|\ufffd#3:1\ufffd|\ufffd#5:1\ufffd|\ufffd#7:1\ufffd]"}:START_TAG_STRONG:Cluster Name:${"[\ufffd/#4\ufffd|\ufffd/#3:1\ufffd|\ufffd/#5:1\ufffd|\ufffd/#7:1\ufffd]"}:CLOSE_TAG_STRONG: ${"\ufffd0:1\ufffd"}:INTERPOLATION:${"[\ufffd#4:1\ufffd\ufffd/#4:1\ufffd|\ufffd#6:1\ufffd\ufffd/#6:1\ufffd|\ufffd#8:1\ufffd\ufffd/#8:1\ufffd]"}:LINE_BREAK:${"[\ufffd#4\ufffd|\ufffd#3:1\ufffd|\ufffd#5:1\ufffd|\ufffd#7:1\ufffd]"}:START_TAG_STRONG:Cluster ID:${"[\ufffd/#4\ufffd|\ufffd/#3:1\ufffd|\ufffd/#5:1\ufffd|\ufffd/#7:1\ufffd]"}:CLOSE_TAG_STRONG: ${"\ufffd1:1\ufffd"}:INTERPOLATION_1:${"[\ufffd#4:1\ufffd\ufffd/#4:1\ufffd|\ufffd#6:1\ufffd\ufffd/#6:1\ufffd|\ufffd#8:1\ufffd\ufffd/#8:1\ufffd]"}:LINE_BREAK:${"[\ufffd#4\ufffd|\ufffd#3:1\ufffd|\ufffd#5:1\ufffd|\ufffd#7:1\ufffd]"}:START_TAG_STRONG:Issue:${"[\ufffd/#4\ufffd|\ufffd/#3:1\ufffd|\ufffd/#5:1\ufffd|\ufffd/#7:1\ufffd]"}:CLOSE_TAG_STRONG: ${"\ufffd2:1\ufffd"}:INTERPOLATION_2:${"[\ufffd#4:1\ufffd\ufffd/#4:1\ufffd|\ufffd#6:1\ufffd\ufffd/#6:1\ufffd|\ufffd#8:1\ufffd\ufffd/#8:1\ufffd]"}:LINE_BREAK:${"[\ufffd/#3\ufffd|\ufffd/#2:1\ufffd]"}:CLOSE_PARAGRAPH:${"[\ufffd/#1:1\ufffd\ufffd/*5:1\ufffd|\ufffd/#2\ufffd]"}:CLOSE_TAG_DIV:${"[\ufffd/#1:1\ufffd\ufffd/*5:1\ufffd|\ufffd/#2\ufffd]"}:CLOSE_TAG_DIV:`,t=e.\u0275\u0275i18nPostprocess(t),o=$localize`:␟af21ed6b33e55db84aa5c6e8641e8a5c970debf6␟4150787490400457983:${"\ufffd#2\ufffd"}:START_PARAGRAPH:Please note that the data for the disconnected cluster will be visible for a duration of ~ 5 minutes. After this period, it will be automatically removed.${"\ufffd/#2\ufffd"}:CLOSE_PARAGRAPH:`,[["emptyCluster",""],["nametpl",""],["loadingTpl",""],["clusterUsageTpl",""],n,t,o,[4,"ngIf"],["class","container h-75",4,"ngIf"],[1,"container","h-75"],[1,"row","h-100","justify-content-center","align-items-center"],[1,"blank-page"],[1,"mx-auto","d-block",3,"ngClass"],["class","mt-4 text-center",4,"ngIf"],["class","mt-4",4,"ngIf"],[1,"mt-4","text-center"],[1,"fw-bold"],[1,"mt-3"],["target","_blank",3,"href"],[1,"fa","fa-external-link"],[1,"mt-4"],[1,"text-center"],[1,"btn","btn-primary",3,"click"],[1,"mx-auto",3,"ngClass"],["cdstabledata",""],[3,"title"],["href","#"],[1,"text-center","mt-3"],["class","container-fluid h-100 p-4",4,"ngIf","ngIfElse"],[1,"container-fluid","h-100","p-4"],[4,"ngIf","ngIfElse"],["type","error","spacingClass","mb-3","size","slim",3,"showTitle","dismissible","dismissed",4,"ngIf"],["type","info","spacingClass","mb-3","size","slim",3,"showTitle","dismissible","dismissed",4,"ngIf"],[1,"col-lg-4"],[1,"row"],["cardTitle","Clusters","class","col-sm-6 m-0 p-0 ps-4 pe-2","aria-label","Clusters",3,"fullHeight",4,"ngIf"],["cardTitle","Alerts","class","col-sm-6 m-0 p-0 ps-2 pe-2","aria-label","Alerts",3,"fullHeight",4,"ngIf"],[1,"row","pt-3"],["cardTitle","Connection Errors","aria-label","Connection Errors",1,"col-sm-6","m-0","p-0","ps-4","pe-2"],[3,"ngClass"],[3,"ngClass",4,"ngIf"],["cardTitle","Hosts","class","col-sm-6 m-0 p-0 ps-2 pe-2","aria-label","Total number of hosts",4,"ngIf"],["cardTitle","Capacity","class","col-sm-12 m-0 p-0 ps-4 pe-2","aria-label","Capacity card",4,"ngIf"],[1,"col-sm-8","ps-2"],["aria-label","Cluster Utilization card",3,"cardTitle","fullHeight",4,"ngIf"],[1,"col-lg-12","mt-3","m-0","p-0","ps-4","pe-4"],[3,"data","columns","limit",4,"ngIf"],[1,"col-lg-12","mb-4","m-0","p-0","ps-4","pe-4"],["aria-label","Pools Utilization card",3,"cardTitle",4,"ngIf"],["type","error","spacingClass","mb-3","size","slim",3,"dismissed","showTitle","dismissible"],[4,"ngFor","ngForOf"],["type","info","spacingClass","mb-3","size","slim",3,"dismissed","showTitle","dismissible"],["cardTitle","Clusters","aria-label","Clusters",1,"col-sm-6","m-0","p-0","ps-4","pe-2",3,"fullHeight"],["class","text-danger",4,"ngIf"],["class","text-warning",4,"ngIf"],["class","text-success",4,"ngIf"],[1,"text-danger"],[1,"text-warning"],[1,"text-success"],["cardTitle","Alerts","aria-label","Alerts",1,"col-sm-6","m-0","p-0","ps-2","pe-2",3,"fullHeight"],["cardTitle","Hosts","aria-label","Total number of hosts",1,"col-sm-6","m-0","p-0","ps-2","pe-2"],["cardTitle","Capacity","aria-label","Capacity card",1,"col-sm-12","m-0","p-0","ps-4","pe-2"],[1,"ms-4","me-4"],["lowThreshold",".95","highThreshold",".99",3,"data"],["aria-label","Cluster Utilization card",3,"cardTitle","fullHeight"],[1,"ms-4","me-4","mt-0"],[3,"selectedTime"],["chartTitle","Capacity","isMultiCluster","true","dataUnits","B",3,"labelsArray","dataArray","truncateLabel",4,"ngIf"],["chartTitle","IOPS","isMultiCluster","true","dataUnits","","decimals","0",3,"labelsArray","dataArray","truncateLabel",4,"ngIf"],["chartTitle","Throughput","isMultiCluster","true","dataUnits","B/s","decimals","2",3,"labelsArray","dataArray","truncateLabel",4,"ngIf"],["chartTitle","Capacity","isMultiCluster","true","dataUnits","B",3,"labelsArray","dataArray","truncateLabel"],["chartTitle","IOPS","isMultiCluster","true","dataUnits","","decimals","0",3,"labelsArray","dataArray","truncateLabel"],["chartTitle","Throughput","isMultiCluster","true","dataUnits","B/s","decimals","2",3,"labelsArray","dataArray","truncateLabel"],[3,"data","columns","limit"],["aria-label","Pools Utilization card",3,"cardTitle"],["chartTitle","Capacity","dataUnits","B","isMultiCluster","true",3,"labelsArray","dataArray","truncateLabel",4,"ngIf"],["chartTitle","IOPS","dataUnits","","decimals","0","isMultiCluster","true",3,"labelsArray","dataArray","truncateLabel",4,"ngIf"],["chartTitle","Client Throughput","dataUnits","B/s","decimals","2","isMultiCluster","true",3,"labelsArray","dataArray","truncateLabel",4,"ngIf"],["chartTitle","Capacity","dataUnits","B","isMultiCluster","true",3,"labelsArray","dataArray","truncateLabel"],["chartTitle","IOPS","dataUnits","","decimals","0","isMultiCluster","true",3,"labelsArray","dataArray","truncateLabel"],["chartTitle","Client Throughput","dataUnits","B/s","decimals","2","isMultiCluster","true",3,"labelsArray","dataArray","truncateLabel"],[3,"total","used"]]},template:function(t,o){1&t&&(e.\u0275\u0275template(0,pM,2,3,"ng-template",null,0,e.\u0275\u0275templateRefExtractor)(2,mM,4,2,"ng-template",null,1,e.\u0275\u0275templateRefExtractor)(4,fM,6,5,"ng-template",null,2,e.\u0275\u0275templateRefExtractor)(6,zM,2,2,"ng-container",7),e.\u0275\u0275pipe(7,"async"),e.\u0275\u0275template(8,XM,1,2,"ng-template",null,3,e.\u0275\u0275templateRefExtractor)),2&t&&(e.\u0275\u0275advance(6),e.\u0275\u0275property("ngIf",e.\u0275\u0275pipeBind1(7,1,o.managedByConfig$)))},dependencies:[l.NgClass,l.NgForOf,l.NgIf,xt.o,nt.m,ml.i,hr,We.O,Ge.S,Wl.P,Kl.M,Oi,l.AsyncPipe],styles:[".fa-wrench[_ngcontent-%COMP%]{color:#25828e;font-size:6em}"]})}}function kM(i,n){if(1&i&&e.\u0275\u0275element(0,"cd-grafana",9),2&i){const t=e.\u0275\u0275nextContext(3);e.\u0275\u0275property("grafanaPath","ceph-cluster?var-cluster="+t.selectedClusterFsid)("type","metrics")}}function jM(i,n){1&i&&(e.\u0275\u0275elementContainerStart(0,6),e.\u0275\u0275elementStart(1,"a",7),e.\u0275\u0275i18n(2,1),e.\u0275\u0275elementEnd(),e.\u0275\u0275template(3,kM,1,2,"ng-template",8),e.\u0275\u0275elementContainerEnd())}function WM(i,n){if(1&i&&(e.\u0275\u0275elementContainerStart(0),e.\u0275\u0275elementStart(1,"nav",3,0),e.\u0275\u0275template(3,jM,4,0,"ng-container",4),e.\u0275\u0275elementEnd(),e.\u0275\u0275element(4,"div",5),e.\u0275\u0275elementContainerEnd()),2&i){const t=e.\u0275\u0275reference(2),o=e.\u0275\u0275nextContext();e.\u0275\u0275advance(3),e.\u0275\u0275property("ngIf",o.permissions.grafana.read),e.\u0275\u0275advance(),e.\u0275\u0275property("ngbNavOutlet",t)}}class Gi{get selectedClusterFsid(){return void 0!==this.selection?this.selection.name:null}static{this.\u0275fac=function(t){return new(t||Gi)}}static{this.\u0275cmp=e.\u0275\u0275defineComponent({type:Gi,selectors:[["cd-multi-cluster-details"]],inputs:{permissions:"permissions",selection:"selection"},decls:1,vars:1,consts:()=>{let n,t;return n=$localize`:␟fbbaf5cb02ed419e79a27072478f716a4666a99d␟9041763226911499160:Performance Details`,t=$localize`:␟b62b6a95e00b7590aa0794c2d328f13d0d186b42␟7408615628195212314:Cluster details`,[["nav","ngbNav"],n,[4,"ngIf"],["ngbNav","","id","tabset-multi-cluster-details","cdStatefulTab","multi-cluster-details",1,"nav-tabs"],["ngbNavItem","performance-details",4,"ngIf"],[3,"ngbNavOutlet"],["ngbNavItem","performance-details"],["ngbNavLink","","routerLink","performance-details"],["ngbNavContent",""],["title",t,"uid","edtb0oxdq","grafanaStyle","four",3,"grafanaPath","type"]]},template:function(t,o){1&t&&e.\u0275\u0275template(0,WM,5,2,"ng-container",2),2&t&&e.\u0275\u0275property("ngIf",o.selection)},dependencies:[l.NgIf,G.NgbNavContent,G.NgbNav,G.NgbNavItem,G.NgbNavLink,G.NgbNavLinkBase,G.NgbNavOutlet,Tt.c,$t.B,u.RouterLink]})}}const KM=["urlTpl"],QM=["durationTpl"],YM=(i,n)=>[i,n];function JM(i,n){if(1&i&&(e.\u0275\u0275elementContainerStart(0,8),e.\u0275\u0275elementStart(1,"div",9)(2,"div",10),e.\u0275\u0275element(3,"i",11),e.\u0275\u0275elementStart(4,"div",12)(5,"h4",13),e.\u0275\u0275text(6,"This cluster is already managed by cluster - "),e.\u0275\u0275elementStart(7,"a",14),e.\u0275\u0275text(8),e.\u0275\u0275element(9,"i",15),e.\u0275\u0275elementEnd()()()()(),e.\u0275\u0275elementContainerEnd()),2&i){const t=n.ngIf,o=e.\u0275\u0275nextContext(2);e.\u0275\u0275advance(3),e.\u0275\u0275property("ngClass",e.\u0275\u0275pureFunction2(3,YM,o.icons.large,o.icons.wrench)),e.\u0275\u0275advance(4),e.\u0275\u0275property("href",t.MANAGED_BY_CLUSTERS[0].url,e.\u0275\u0275sanitizeUrl),e.\u0275\u0275advance(),e.\u0275\u0275textInterpolate1(" ",t.MANAGED_BY_CLUSTERS[0].fsid," ")}}function ZM(i,n){if(1&i&&(e.\u0275\u0275template(0,JM,10,6,"ng-container",7),e.\u0275\u0275pipe(1,"async")),2&i){const t=e.\u0275\u0275nextContext();e.\u0275\u0275property("ngIf",e.\u0275\u0275pipeBind1(1,1,t.managedByConfig$))}}function qM(i,n){if(1&i&&e.\u0275\u0275element(0,"cd-multi-cluster-details",25),2&i){const t=e.\u0275\u0275nextContext(4);e.\u0275\u0275property("permissions",t.permissions)("selection",t.expandedRow)}}function eR(i,n){if(1&i){const t=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"cd-table",22,4),e.\u0275\u0275listener("fetchData",function(){e.\u0275\u0275restoreView(t);const s=e.\u0275\u0275nextContext(3);return e.\u0275\u0275resetView(s.refresh())})("setExpandedRow",function(s){e.\u0275\u0275restoreView(t);const d=e.\u0275\u0275nextContext(3);return e.\u0275\u0275resetView(d.setExpandedRow(s))})("updateSelection",function(s){e.\u0275\u0275restoreView(t);const d=e.\u0275\u0275nextContext(3);return e.\u0275\u0275resetView(d.updateSelection(s))}),e.\u0275\u0275element(2,"cd-table-actions",23),e.\u0275\u0275template(3,qM,1,2,"cd-multi-cluster-details",24),e.\u0275\u0275elementEnd()}if(2&i){const t=e.\u0275\u0275nextContext(3);e.\u0275\u0275property("data",t.data)("columns",t.columns)("hasDetails",!0)("maxLimit",25),e.\u0275\u0275advance(2),e.\u0275\u0275property("permission",t.permissions.user)("selection",t.selection)("tableActions",t.tableActions)}}function tR(i,n){if(1&i&&(e.\u0275\u0275elementStart(0,"div")(1,"nav",17,3),e.\u0275\u0275elementContainerStart(3,18),e.\u0275\u0275elementStart(4,"a",19),e.\u0275\u0275i18n(5,5),e.\u0275\u0275elementEnd(),e.\u0275\u0275template(6,eR,4,7,"ng-template",20),e.\u0275\u0275elementContainerEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275element(7,"div",21),e.\u0275\u0275elementEnd()),2&i){const t=e.\u0275\u0275reference(2);e.\u0275\u0275advance(7),e.\u0275\u0275property("ngbNavOutlet",t)}}function nR(i,n){if(1&i&&(e.\u0275\u0275elementContainerStart(0),e.\u0275\u0275template(1,tR,8,1,"div",16),e.\u0275\u0275elementContainerEnd()),2&i){const t=n.ngIf;e.\u0275\u0275nextContext();const o=e.\u0275\u0275reference(1);e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf",0===t.MANAGED_BY_CLUSTERS.length)("ngIfElse",o)}}function oR(i,n){if(1&i&&(e.\u0275\u0275elementStart(0,"a",14),e.\u0275\u0275text(1),e.\u0275\u0275element(2,"i",15),e.\u0275\u0275elementEnd()),2&i){const t=n.data.row;e.\u0275\u0275property("href",t.url,e.\u0275\u0275sanitizeUrl),e.\u0275\u0275advance(),e.\u0275\u0275textInterpolate1(" ",null!=t&&null!=t.url&&t.url.endsWith("/")?null==t||null==t.url?null:t.url.slice(0,-1):t.url," ")}}function iR(i,n){if(1&i&&e.\u0275\u0275element(0,"i",28),2&i){const t=e.\u0275\u0275nextContext(2).data.row,o=e.\u0275\u0275nextContext();e.\u0275\u0275classMap(o.icons.warning),e.\u0275\u0275classProp("icon-danger-color",t.remainingDays<2)("icon-warning-color",t.remainingDays<8)}}function aR(i,n){if(1&i&&(e.\u0275\u0275elementStart(0,"span"),e.\u0275\u0275template(1,iR,1,7,"i",26),e.\u0275\u0275elementStart(2,"span",27),e.\u0275\u0275text(3),e.\u0275\u0275pipe(4,"duration"),e.\u0275\u0275elementEnd()()),2&i){const t=e.\u0275\u0275nextContext().data.row;e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf",t.remainingDays<8),e.\u0275\u0275advance(),e.\u0275\u0275propertyInterpolate("title",t.expiryDate),e.\u0275\u0275advance(),e.\u0275\u0275textInterpolate(e.\u0275\u0275pipeBind1(4,3,t.remainingTimeWithoutSeconds/1e3))}}function sR(i,n){if(1&i&&(e.\u0275\u0275elementStart(0,"span"),e.\u0275\u0275element(1,"i",29),e.\u0275\u0275elementStart(2,"span",30),e.\u0275\u0275text(3,"Token expired"),e.\u0275\u0275elementEnd()()),2&i){const t=e.\u0275\u0275nextContext(2);e.\u0275\u0275advance(),e.\u0275\u0275classMap(t.icons.danger)}}function rR(i,n){1&i&&(e.\u0275\u0275elementStart(0,"span"),e.\u0275\u0275text(1,"N/A"),e.\u0275\u0275elementEnd())}function lR(i,n){if(1&i&&e.\u0275\u0275template(0,aR,5,5,"span",6)(1,sR,4,3,"span",6)(2,rR,2,0,"span",6),2&i){const t=n.data.row;e.\u0275\u0275property("ngIf",t.remainingTimeWithoutSeconds>0&&"local-cluster"!==t.cluster_alias),e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf",t.remainingTimeWithoutSeconds<=0&&t.remainingDays<=0&&"local-cluster"!==t.cluster_alias),e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf","local-cluster"===t.cluster_alias)}}class Fr extends M.D{constructor(n,t,o,s,d,h,I,$,w,X){super(),this.multiClusterService=n,this.router=t,this.actionLabels=o,this.notificationService=s,this.authStorageService=d,this.modalService=h,this.cookieService=I,this.settingsService=$,this.cdsModalService=w,this.route=X,this.subs=new K.Subscription,this.clusterTokenStatus={},this.columns=[],this.selection=new N.y,this.clustersTokenMap=new Map,this.icons=g.FI,this.prometheusConnectionError=[],this.tableActions=[{permission:"create",icon:g.FI.add,name:this.actionLabels.CONNECT,disable:J=>this.getDisable("connect",J),click:()=>this.openRemoteClusterInfoModal("connect")},{permission:"update",icon:g.FI.edit,name:this.actionLabels.EDIT,disable:J=>this.getDisable("edit",J),click:()=>this.openRemoteClusterInfoModal("edit")},{permission:"update",icon:g.FI.refresh,name:this.actionLabels.RECONNECT,disable:J=>this.getDisable("reconnect",J),click:()=>this.openRemoteClusterInfoModal("reconnect")},{permission:"delete",icon:g.FI.destroy,name:this.actionLabels.DISCONNECT,disable:J=>this.getDisable("disconnect",J),click:()=>this.openDeleteClusterModal()}],this.permissions=this.authStorageService.getPermissions()}ngOnInit(){this.subs.add(this.multiClusterService.subscribe(n=>{if(n&&n.config){this.hubUrl=n.hub_url,this.currentUrl=n.current_url;const t=Object.values(n.config).flat();this.data=t,this.checkClusterConnectionStatus(),this.data.forEach(o=>{o.remainingTimeWithoutSeconds=0,o.ttl&&o.ttl>0&&(o.ttl=1e3*o.ttl,o.remainingTimeWithoutSeconds=this.getRemainingTimeWithoutSeconds(o.ttl),o.remainingDays=this.getRemainingDays(o.ttl),o.expiryDate=new Date(Date.now()+o.ttl).toLocaleString())})}})),this.columns=[{prop:"cluster_alias",name:$localize`Alias`,flexGrow:2},{prop:"cluster_connection_status",name:$localize`Connection`,flexGrow:2,cellTransformation:b.x.badge,customTemplateConfig:{map:{1:{value:"DISCONNECTED",class:"badge-danger"},0:{value:"CONNECTED",class:"badge-success"},2:{value:"CHECKING..",class:"badge-info"}}}},{prop:"name",name:$localize`FSID`,flexGrow:2},{prop:"url",name:$localize`URL`,flexGrow:2,cellTemplate:this.urlTpl},{prop:"user",name:$localize`User`,flexGrow:2},{prop:"ttl",name:$localize`Token expires`,flexGrow:2,cellTemplate:this.durationTpl}],this.subs.add(this.multiClusterService.subscribeClusterTokenStatus(n=>{this.clusterTokenStatus=n,this.checkClusterConnectionStatus()})),this.managedByConfig$=this.settingsService.getValues("MANAGED_BY_CLUSTERS")}ngOnDestroy(){this.subs.unsubscribe()}getRemainingDays(n){if(void 0===n||null==n)return;if(n<0)return 0;return Math.max(0,Math.floor(n/864e5))}getRemainingTimeWithoutSeconds(n){return 60*Math.floor(n/6e4)*1e3}checkClusterConnectionStatus(){this.clusterTokenStatus&&this.data&&this.data.forEach(n=>{const t=this.clusterTokenStatus[n.name];void 0!==t?(n.cluster_connection_status=t.status,n.ttl=t.time_left):n.cluster_connection_status=2,"local-cluster"===n.cluster_alias&&(n.cluster_connection_status=0)})}openRemoteClusterInfoModal(n){const t={clustersData:this.data,action:n,cluster:this.selection.first()};this.bsModalRef=this.modalService.show(wi,t,{size:"xl"}),this.bsModalRef.componentInstance.submitAction.subscribe(()=>{const o=this.router.url.split("?")[0];this.multiClusterService.refreshMultiCluster(o),this.checkClusterConnectionStatus(),this.multiClusterService.isClusterAdded(!0)})}openDeleteClusterModal(){const n=this.selection.first();this.modalRef=this.cdsModalService.show(O.D,{infoMessage:$localize`Please note that the data for the disconnected cluster will be visible for a duration of ~ 5 minutes. After this period, it will be automatically removed.`,actionDescription:$localize`Disconnect`,itemDescription:$localize`Cluster`,itemNames:[n.cluster_alias+" - "+n.user],submitAction:()=>this.multiClusterService.deleteCluster(n.name,n.user).subscribe(()=>{this.cookieService.deleteToken(`${n.name}-${n.user}`),this.multiClusterService.showPrometheusDelayMessage(!0),this.cdsModalService.dismissAll(),this.notificationService.show(Ae._.success,$localize`Disconnected cluster '${n.cluster_alias}'`);const t=this.router.url.split("?")[0];this.multiClusterService.refreshMultiCluster(t)})})}getDisable(n,t){return this.hubUrl!==this.currentUrl?$localize`Please switch to the local-cluster to ${n} a remote cluster`:t.hasSelection||"connect"===n?!(!t.hasSingleSelection||"local-cluster"!==t.first().cluster_alias||"connect"===n)&&$localize`Cannot ${n} local cluster`:$localize`Please select one or more clusters to ${n}`}updateSelection(n){this.selection=n}setExpandedRow(n){super.setExpandedRow(n),this.router.navigate(["performance-details"],{relativeTo:this.route})}refresh(){this.multiClusterService.refresh()}static{this.\u0275fac=function(t){return new(t||Fr)(e.\u0275\u0275directiveInject(yi.J),e.\u0275\u0275directiveInject(u.Router),e.\u0275\u0275directiveInject(m.Ss),e.\u0275\u0275directiveInject(Q.J),e.\u0275\u0275directiveInject(c.v),e.\u0275\u0275directiveInject(Yt.B),e.\u0275\u0275directiveInject(go),e.\u0275\u0275directiveInject(Io.h),e.\u0275\u0275directiveInject(He.V),e.\u0275\u0275directiveInject(u.ActivatedRoute))}}static{this.\u0275cmp=e.\u0275\u0275defineComponent({type:Fr,selectors:[["cd-multi-cluster-list"]],viewQuery:function(t,o){if(1&t&&(e.\u0275\u0275viewQuery(We.O,5),e.\u0275\u0275viewQuery(KM,7),e.\u0275\u0275viewQuery(QM,7)),2&t){let s;e.\u0275\u0275queryRefresh(s=e.\u0275\u0275loadQuery())&&(o.table=s.first),e.\u0275\u0275queryRefresh(s=e.\u0275\u0275loadQuery())&&(o.urlTpl=s.first),e.\u0275\u0275queryRefresh(s=e.\u0275\u0275loadQuery())&&(o.durationTpl=s.first)}},features:[e.\u0275\u0275InheritDefinitionFeature],decls:8,vars:3,consts:()=>{let n,t,o;return n=$localize`:␟ea0b31ae82070b88a2fceb730c510cbb73bff0a8␟5997773833823444252:Clusters List`,t=$localize`:␟873371924258ad0d0083b76911c0733b92ad2bff␟8191974628331929656:Cluster's token is about to expire`,o=$localize`:␟85f909a8b3dbb2932cb2307481dd69581302f4e6␟3381646268065105768:Cluster's token has expired`,[["emptyCluster",""],["urlTpl",""],["durationTpl",""],["nav","ngbNav"],["table",""],n,[4,"ngIf"],["class","container h-75",4,"ngIf"],[1,"container","h-75"],[1,"row","h-100","justify-content-center","align-items-center"],[1,"blank-page"],[1,"mx-auto","d-block",3,"ngClass"],[1,"mt-4","text-center"],[1,"mt-3"],["target","_blank",3,"href"],[1,"fa","fa-external-link"],[4,"ngIf","ngIfElse"],["ngbNav","",1,"nav-tabs"],["ngbNavItem",""],["ngbNavLink",""],["ngbNavContent",""],[3,"ngbNavOutlet"],["columnMode","flex","selectionType","single",3,"fetchData","setExpandedRow","updateSelection","data","columns","hasDetails","maxLimit"],["id","cluster-actions",1,"table-actions",3,"permission","selection","tableActions"],[3,"permissions","selection",4,"cdTableDetail"],[3,"permissions","selection"],["title",t,3,"icon-danger-color","icon-warning-color","class",4,"ngIf"],[3,"title"],["title",t],["title",o],[1,"text-danger"]]},template:function(t,o){1&t&&(e.\u0275\u0275template(0,ZM,2,3,"ng-template",null,0,e.\u0275\u0275templateRefExtractor)(2,nR,2,2,"ng-container",6),e.\u0275\u0275pipe(3,"async"),e.\u0275\u0275template(4,oR,3,2,"ng-template",null,1,e.\u0275\u0275templateRefExtractor)(6,lR,3,3,"ng-template",null,2,e.\u0275\u0275templateRefExtractor)),2&t&&(e.\u0275\u0275advance(2),e.\u0275\u0275property("ngIf",e.\u0275\u0275pipeBind1(3,1,o.managedByConfig$)))},dependencies:[l.NgClass,l.NgIf,G.NgbNavContent,G.NgbNav,G.NgbNavItem,G.NgbNavLink,G.NgbNavLinkBase,G.NgbNavOutlet,We.O,at.j,Et.N,Gi,l.AsyncPipe,ul.b],styles:[".fa-wrench[_ngcontent-%COMP%]{color:#25828e;font-size:6em}"]})}}const Hi={Default:"default",Always:"always",Never:"never"},Fl_Resource="resource",Vi_User="user",Vi_activeDirectory="active-directory",vr_host="hosts",vr_label="label";var mR=r(23301);const r_="application/yaml",l_="application/json";class Vt{constructor(n,t){this.http=n,this.notificationService=t,this.baseURL="api/smb",this.modalDataSubject=new K.Subject,this.modalData$=this.modalDataSubject.asObservable(),this.dataUploader=(0,e.signal)(null)}passData(n){this.modalDataSubject.next(n)}setDataUploaded(n){this.dataUploader.set(n)}uploadData(n){const t=n.values().next().value?.file;if(!t)return;if(t.type!==r_&&t.type!==l_)return void this.notificationService.show(Ae._.error,$localize`Invalid file type: only .json or .yaml accepted`);const o=new FileReader;o.onload=s=>{const d=s.target?.result;let h;try{t.type===r_?h=mR.load(d):t.type===l_&&(h=JSON.parse(d))}catch(I){this.notificationService.show(Ae._.error,$localize`${I.message}`)}this.setDataUploaded(h)},o.readAsText(t)}listClusters(){return this.http.get(`${this.baseURL}/cluster`)}createCluster(n){return this.http.post(`${this.baseURL}/cluster`,n)}removeCluster(n){return this.http.delete(`${this.baseURL}/cluster/${n}`,{observe:"response"})}listShares(n){return this.http.get(`${this.baseURL}/share?cluster_id=${n}`)}listJoinAuths(){return this.http.get(`${this.baseURL}/joinauth`)}listUsersGroups(){return this.http.get(`${this.baseURL}/usersgroups`)}createShare(n){return this.http.post(`${this.baseURL}/share`,n)}getShare(n,t){return this.http.get(`${this.baseURL}/share/${n}/${t}`)}deleteShare(n,t){return this.http.delete(`${this.baseURL}/share/${n}/${t}`,{observe:"response"})}getJoinAuth(n){return this.http.get(`${this.baseURL}/joinauth/${n}`)}getUsersGroups(n){return this.http.get(`${this.baseURL}/usersgroups/${n}`)}createJoinAuth(n){return this.http.post(`${this.baseURL}/joinauth`,{join_auth:n})}createUsersGroups(n){return this.http.post(`${this.baseURL}/usersgroups`,{usersgroups:n})}deleteJoinAuth(n){return this.http.delete(`${this.baseURL}/joinauth/${n}`,{observe:"response"})}deleteUsersgroups(n){return this.http.delete(`${this.baseURL}/usersgroups/${n}`,{observe:"response"})}getCluster(n){return this.http.get(`${this.baseURL}/cluster/${n}`)}static{this.\u0275fac=function(t){return new(t||Vt)(e.\u0275\u0275inject(T.HttpClient),e.\u0275\u0275inject(Q.J))}}static{this.\u0275prov=e.\u0275\u0275defineInjectable({token:Vt,factory:Vt.\u0275fac,providedIn:"root"})}}var jo;!function(i){i.cluster="cluster",i.activeDirectory="active-directory",i.standalone="standalone",i.overview="overview"}(jo||(jo={}));class So{constructor(n){this.router=n,this.activeTab=jo.cluster}ngOnInit(){const n=this.router.url;this.activeTab=Object.values(jo).find(t=>n.includes(t))||jo.cluster}onSelected(n){this.selectedTab=n,this.router.navigate([`cephfs/smb/${n}`])}get Tabs(){return jo}static{this.\u0275fac=function(t){return new(t||So)(e.\u0275\u0275directiveInject(u.Router))}}static{this.\u0275cmp=e.\u0275\u0275defineComponent({type:So,selectors:[["cd-smb-tabs"]],decls:5,vars:5,consts:()=>{let n,t,o,s;return n=$localize`:␟f4d1dd59b039ad818d9da7e29a773e10e41d9821␟2944102521023817891:Cluster`,t=$localize`:␟ba2d34a26d51cc899e2775365dfd02f2754c8a8e␟1993356963818031105:Active Directory`,o=$localize`:␟7b8ea73c8b3fbf1d30d862b7b49933af2a97daf3␟8707550193898847846:Standalone`,s=$localize`:␟e95ae009d0bdb45fcc656e8b65248cf7396080d5␟2614607010577950577:Overview`,[["type","contained","followFocus","true","isNavigation","true",3,"cacheActive"],["heading",n,3,"selected","active"],["heading",t,3,"selected","active"],["heading",o,3,"selected","active"],["heading",s,3,"selected","active"]]},template:function(t,o){1&t&&(e.\u0275\u0275elementStart(0,"cds-tabs",0)(1,"cds-tab",1),e.\u0275\u0275listener("selected",function(){return o.onSelected(o.Tabs.cluster)}),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(2,"cds-tab",2),e.\u0275\u0275listener("selected",function(){return o.onSelected(o.Tabs.activeDirectory)}),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(3,"cds-tab",3),e.\u0275\u0275listener("selected",function(){return o.onSelected(o.Tabs.standalone)}),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(4,"cds-tab",4),e.\u0275\u0275listener("selected",function(){return o.onSelected(o.Tabs.overview)}),e.\u0275\u0275elementEnd()()),2&t&&(e.\u0275\u0275property("cacheActive",!1),e.\u0275\u0275advance(),e.\u0275\u0275property("active",o.activeTab===o.Tabs.cluster),e.\u0275\u0275advance(),e.\u0275\u0275property("active",o.activeTab===o.Tabs.activeDirectory),e.\u0275\u0275advance(),e.\u0275\u0275property("active",o.activeTab===o.Tabs.standalone),e.\u0275\u0275advance(),e.\u0275\u0275property("active",o.activeTab===o.Tabs.overview))},dependencies:[D.Tabs,D.Tab]})}}const Bi="cephfs/smb/active-directory";class Mr{constructor(n,t,o,s,d,h,I){this.router=n,this.urlBuilder=t,this.authStorageService=o,this.actionLabels=s,this.smbService=d,this.modalService=h,this.taskWrapper=I,this.subject$=new K.BehaviorSubject([]),this.selection=new N.y,this.permission=this.authStorageService.getPermissions().smb}ngOnInit(){this.columns=[{name:$localize`Name`,prop:"auth_id",flexGrow:2},{name:$localize`Username`,prop:"auth.username",flexGrow:2},{name:$localize`Linked to cluster`,prop:"linked_to_cluster",flexGrow:2}],this.tableActions=[{name:`${this.actionLabels.CREATE} AD`,permission:"create",icon:g.FI.add,click:()=>this.router.navigate([this.urlBuilder.getCreate()]),canBePrimary:n=>!n.hasSelection},{name:this.actionLabels.EDIT,permission:"update",icon:g.FI.edit,click:()=>this.router.navigate([this.urlBuilder.getEdit(String(this.selection.first().auth_id))])},{name:this.actionLabels.DELETE,permission:"update",icon:g.FI.destroy,click:()=>this.openDeleteModal()}],this.joinAuth$=this.subject$.pipe((0,v.switchMap)(()=>this.smbService.listJoinAuths().pipe((0,v.catchError)(()=>(this.context.error(),(0,K.of)(null))))))}loadJoinAuth(){this.subject$.next([])}openDeleteModal(){const n=this.selection.first().auth_id;this.modalService.show(O.D,{itemDescription:$localize`Active directory access resource`,itemNames:[n],submitActionObservable:()=>this.taskWrapper.wrapTaskAroundCall({task:new q.O(`${Bi}/${m.Qp.DELETE}`,{authId:n}),call:this.smbService.deleteJoinAuth(n)})})}updateSelection(n){this.selection=n}static{this.\u0275fac=function(t){return new(t||Mr)(e.\u0275\u0275directiveInject(u.Router),e.\u0275\u0275directiveInject(z.E),e.\u0275\u0275directiveInject(c.v),e.\u0275\u0275directiveInject(m.Ss),e.\u0275\u0275directiveInject(Vt),e.\u0275\u0275directiveInject(He.V),e.\u0275\u0275directiveInject(B.a))}}static{this.\u0275cmp=e.\u0275\u0275defineComponent({type:Mr,selectors:[["cd-smb-join-auth-list"]],features:[e.\u0275\u0275ProvidersFeature([{provide:z.E,useValue:new z.E(Bi)}])],decls:5,vars:8,consts:[["headerTitle","Active directory access resources","headerDescription","Logical management units for authorization on active directory (AD) servers","columnMode","flex","selectionType","single",3,"fetchData","updateSelection","data","columns","hasDetails"],[1,"table-actions"],[3,"permission","selection","tableActions"]],template:function(t,o){1&t&&(e.\u0275\u0275element(0,"cd-smb-tabs"),e.\u0275\u0275elementStart(1,"cd-table",0),e.\u0275\u0275pipe(2,"async"),e.\u0275\u0275listener("fetchData",function(){return o.loadJoinAuth()})("updateSelection",function(d){return o.updateSelection(d)}),e.\u0275\u0275elementStart(3,"div",1),e.\u0275\u0275element(4,"cd-table-actions",2),e.\u0275\u0275elementEnd()()),2&t&&(e.\u0275\u0275advance(),e.\u0275\u0275property("data",e.\u0275\u0275pipeBind1(2,6,o.joinAuth$))("columns",o.columns)("hasDetails",!1),e.\u0275\u0275advance(3),e.\u0275\u0275property("permission",o.permission)("selection",o.selection)("tableActions",o.tableActions))},dependencies:[We.O,at.j,So,l.AsyncPipe]})}}const ER=()=>({lg:14}),gR=()=>({lg:1});function CR(i,n){1&i&&(e.\u0275\u0275elementStart(0,"span",22),e.\u0275\u0275elementContainerStart(1),e.\u0275\u0275i18n(2,5),e.\u0275\u0275elementContainerEnd(),e.\u0275\u0275elementEnd())}function SR(i,n){if(1&i&&e.\u0275\u0275template(0,CR,3,0,"span",21),2&i){e.\u0275\u0275nextContext();const t=e.\u0275\u0275reference(3),o=e.\u0275\u0275nextContext();e.\u0275\u0275property("ngIf",o.domainSettingsForm.showError("realm",t,"required"))}}function hR(i,n){if(1&i&&(e.\u0275\u0275elementStart(0,"option",32),e.\u0275\u0275text(1),e.\u0275\u0275elementEnd()),2&i){const t=n.$implicit;e.\u0275\u0275property("value",t.auth_id),e.\u0275\u0275advance(),e.\u0275\u0275textInterpolate(t.auth_id)}}function TR(i,n){1&i&&(e.\u0275\u0275elementStart(0,"span",22),e.\u0275\u0275elementContainerStart(1),e.\u0275\u0275i18n(2,9),e.\u0275\u0275elementContainerEnd(),e.\u0275\u0275elementEnd())}function FR(i,n){if(1&i){const t=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"div",35)(1,"cds-icon-button",36),e.\u0275\u0275listener("click",function(){e.\u0275\u0275restoreView(t);const s=e.\u0275\u0275nextContext().index,d=e.\u0275\u0275nextContext(3);return e.\u0275\u0275resetView(d.removeJoinSource(s))}),e.\u0275\u0275namespaceSVG(),e.\u0275\u0275element(2,"svg",37),e.\u0275\u0275elementEnd()()}2&i&&e.\u0275\u0275property("columnNumbers",e.\u0275\u0275pureFunction0(1,gR))}function vR(i,n){if(1&i&&(e.\u0275\u0275elementContainerStart(0,27)(1,28),e.\u0275\u0275elementStart(2,"div",29)(3,"div",30)(4,"cds-select",31)(5,"option",32),e.\u0275\u0275i18n(6,8),e.\u0275\u0275elementEnd(),e.\u0275\u0275template(7,hR,2,2,"option",33),e.\u0275\u0275elementEnd(),e.\u0275\u0275template(8,TR,3,0,"ng-template",null,2,e.\u0275\u0275templateRefExtractor),e.\u0275\u0275elementEnd(),e.\u0275\u0275template(10,FR,3,2,"div",34),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementContainerEnd()()),2&i){const t=n.index,o=e.\u0275\u0275reference(9),s=e.\u0275\u0275nextContext().ngIf,d=e.\u0275\u0275nextContext(2);e.\u0275\u0275advance(),e.\u0275\u0275property("formGroupName",t),e.\u0275\u0275advance(2),e.\u0275\u0275property("columnNumbers",e.\u0275\u0275pureFunction0(7,ER)),e.\u0275\u0275advance(),e.\u0275\u0275property("invalid",(null==d.domainSettingsForm.controls?null:d.domainSettingsForm.controls.join_sources.controls[t].invalid)&&(null==d.domainSettingsForm.controls?null:d.domainSettingsForm.controls.join_sources.controls[t].controls.ref.dirty))("invalidText",o),e.\u0275\u0275advance(),e.\u0275\u0275property("value",null),e.\u0275\u0275advance(2),e.\u0275\u0275property("ngForOf",s),e.\u0275\u0275advance(3),e.\u0275\u0275property("ngIf",t>0)}}function MR(i,n){if(1&i){const t=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"div",16),e.\u0275\u0275template(1,vR,11,8,"ng-container",23),e.\u0275\u0275elementStart(2,"div",16)(3,"button",24),e.\u0275\u0275listener("click",function(){e.\u0275\u0275restoreView(t);const s=e.\u0275\u0275nextContext(2);return e.\u0275\u0275resetView(s.addJoinSource())}),e.\u0275\u0275i18nStart(4,6),e.\u0275\u0275namespaceSVG(),e.\u0275\u0275element(5,"svg",25),e.\u0275\u0275i18nEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275namespaceHTML(),e.\u0275\u0275elementStart(6,"button",24),e.\u0275\u0275listener("click",function(){e.\u0275\u0275restoreView(t);const s=e.\u0275\u0275nextContext(2);return e.\u0275\u0275resetView(s.navigateCreateJoinSource())}),e.\u0275\u0275i18nStart(7,7),e.\u0275\u0275namespaceSVG(),e.\u0275\u0275element(8,"svg",26),e.\u0275\u0275i18nEnd(),e.\u0275\u0275elementEnd()()()}if(2&i){const t=e.\u0275\u0275nextContext(2);e.\u0275\u0275advance(),e.\u0275\u0275property("ngForOf",t.join_sources.controls)}}function RR(i,n){if(1&i){const t=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementContainerStart(0),e.\u0275\u0275elementStart(1,"div",14)(2,"form",15,0)(4,"div",16)(5,"cds-text-label",17),e.\u0275\u0275i18nStart(6,4),e.\u0275\u0275element(7,"input",18),e.\u0275\u0275i18nEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275template(8,SR,1,1,"ng-template",null,1,e.\u0275\u0275templateRefExtractor),e.\u0275\u0275elementEnd(),e.\u0275\u0275template(10,MR,9,1,"div",19),e.\u0275\u0275pipe(11,"async"),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(12,"cd-form-button-panel",20),e.\u0275\u0275pipe(13,"titlecase"),e.\u0275\u0275pipe(14,"upperFirst"),e.\u0275\u0275listener("submitActionEvent",function(){e.\u0275\u0275restoreView(t);const s=e.\u0275\u0275nextContext();return e.\u0275\u0275resetView(s.submit())}),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementContainerEnd()}if(2&i){const t=e.\u0275\u0275reference(9),o=e.\u0275\u0275nextContext();e.\u0275\u0275advance(2),e.\u0275\u0275property("formGroup",o.domainSettingsForm),e.\u0275\u0275advance(3),e.\u0275\u0275property("invalid",!o.domainSettingsForm.controls.realm.valid&&o.domainSettingsForm.controls.realm.dirty)("invalidText",t),e.\u0275\u0275advance(5),e.\u0275\u0275property("ngIf",e.\u0275\u0275pipeBind1(11,7,o.joinAuths$)),e.\u0275\u0275advance(2),e.\u0275\u0275property("form",o.domainSettingsForm)("submitText",e.\u0275\u0275pipeBind1(13,9,o.action)+" "+e.\u0275\u0275pipeBind1(14,11,o.resource))("modalForm",!0)}}class Rr extends Ce.g{constructor(n,t,o,s,d,h,I,$,w,X){super(),this.activeModal=n,this.actionLabels=t,this.rgwRealmService=o,this.notificationService=s,this.smbService=d,this.cd=h,this.router=I,this.action=$,this.resource=w,this.domainSettingsObject=X,this.action=this.actionLabels.UPDATE,this.resource=$localize`Active Directory (AD) parameters`}createForm(){this.domainSettingsForm=new Ue.$({realm:new C.UntypedFormControl("",{validators:[C.Validators.required,pe.xQ.custom("uniqueName",n=>this.realmNames&&-1!==this.realmNames.indexOf(n))]}),join_sources:new C.FormArray([])})}ngOnInit(){this.createForm(),this.loadingReady(),this.joinAuths$=this.smbService.listJoinAuths(),this.domainSettingsForm.get("realm").setValue(this.domainSettingsObject?.realm);const n=this.domainSettingsForm.get("join_sources");this.domainSettingsObject?.join_sources&&this.domainSettingsObject.join_sources.forEach(t=>{n.push(this.newJoinSource(t))}),this.domainSettingsObject?this.action=this.actionLabels.EDIT:this.addJoinSource()}submit(){this.smbService.passData(this.domainSettingsForm.value),this.closeModal()}get join_sources(){return this.domainSettingsForm.get("join_sources")}newJoinSource(n){return new C.FormGroup({ref:new C.FormControl(n?.ref||null,C.Validators.required)})}addJoinSource(){this.join_sources.push(this.newJoinSource()),this.cd.detectChanges()}navigateCreateJoinSource(){this.closeModal(),this.router.navigate([`${Bi}/${m.Qp.CREATE}`])}removeJoinSource(n){const t=this.domainSettingsForm.get("join_sources");n>=0&&n<t.length&&t.removeAt(n),this.cd.detectChanges()}static{this.\u0275fac=function(t){return new(t||Rr)(e.\u0275\u0275directiveInject(G.NgbActiveModal),e.\u0275\u0275directiveInject(m.Ss),e.\u0275\u0275directiveInject(ol.$),e.\u0275\u0275directiveInject(Q.J),e.\u0275\u0275directiveInject(Vt),e.\u0275\u0275directiveInject(e.ChangeDetectorRef),e.\u0275\u0275directiveInject(u.Router),e.\u0275\u0275directiveInject("action",8),e.\u0275\u0275directiveInject("resource",8),e.\u0275\u0275directiveInject("domainSettingsObject",8))}}static{this.\u0275cmp=e.\u0275\u0275defineComponent({type:Rr,selectors:[["cd-smb-domain-setting-modal"]],features:[e.\u0275\u0275InheritDefinitionFeature],decls:7,vars:9,consts:()=>{let n,t,o,s,d,h,I,$;return n=$localize`:␟fb127ea03835b3230f0ed981c7080e2ccb879621␟3346778808274133574:${"\ufffd0\ufffd"}:INTERPOLATION: ${"\ufffd1\ufffd"}:INTERPOLATION_1:`,t=$localize`:␟188b92609243f4018eedb9b7097f6f5c645e7eb1␟4758626824172261727:Realm Name ${"\ufffd#7\ufffd\ufffd/#7\ufffd"}:TAG_INPUT:`,o=$localize`:␟9739656bb5643ced5c52a9aa90588cab8c10852a␟6410945776428459192: This field is required. `,s=$localize`:␟ed100493e5e5fcff8092999cccead033d1f85608␟4713748521192366124: Add AD access resource ${"\ufffd#5\ufffd"}:START_TAG__SVG_SVG:${"\ufffd/#5\ufffd"}:CLOSE_TAG__SVG_SVG:`,d=$localize`:␟d31eb7f1e152d7c689345c96bb8442d7d4fc6fd2␟1866987522512962001: Create AD access resource ${"\ufffd#8\ufffd"}:START_TAG__SVG_SVG:${"\ufffd/#8\ufffd"}:CLOSE_TAG__SVG_SVG:`,h=$localize`:␟38d68c2883d6ef94108a128a13d432af6ad45417␟5112457323180529286:Active Directory access resources`,I=$localize`:␟16b85e32568a3c3c7aade5adb5f22498ad6c8a40␟2995761817734423675:-- List of AD access resources -- `,$=$localize`:␟9739656bb5643ced5c52a9aa90588cab8c10852a␟6410945776428459192: This field is required. `,[["formDir","ngForm"],["realmNameError",""],["joinSourceError",""],n,t,o,s,d,I,$,["size","md",3,"overlaySelected","open","hasScrollingContent"],[3,"closeSelect"],["cdsModalHeaderHeading",""],[4,"cdFormLoading"],["cdsModalContent",""],["name","domainSettingsForm","novalidate","",3,"formGroup"],[1,"form-item"],["label","realm",3,"invalid","invalidText"],["cdsText","","type","text","formControlName","realm","autofocus",""],["class","form-item",4,"ngIf"],[3,"submitActionEvent","form","submitText","modalForm"],["class","invalid-feedback",4,"ngIf"],[1,"invalid-feedback"],["formArrayName","join_sources",4,"ngFor","ngForOf"],["cdsButton","tertiary","type","button",3,"click"],["cdsIcon","add","size","32","icon","",1,"cds--btn__icon"],["cdsIcon","launch","size","16",1,"cds--btn__icon"],["formArrayName","join_sources"],[3,"formGroupName"],["cdsRow","",1,"form-item","form-item-append"],["cdsCol","",3,"columnNumbers"],["label",h,"formControlName","ref",3,"invalid","invalidText"],[3,"value"],[3,"value",4,"ngFor","ngForOf"],["cdsCol","","class","item-action-btn spacing",3,"columnNumbers",4,"ngIf"],["cdsCol","",1,"item-action-btn","spacing",3,"columnNumbers"],["kind","danger","size","sm",3,"click"],["cdsIcon","trash-can","size","32",1,"cds--btn__icon"]]},template:function(t,o){1&t&&(e.\u0275\u0275elementStart(0,"cds-modal",10),e.\u0275\u0275listener("overlaySelected",function(){return o.closeModal()}),e.\u0275\u0275elementStart(1,"cds-modal-header",11),e.\u0275\u0275listener("closeSelect",function(){return o.closeModal()}),e.\u0275\u0275elementStart(2,"h3",12),e.\u0275\u0275i18n(3,3),e.\u0275\u0275pipe(4,"titlecase"),e.\u0275\u0275pipe(5,"upperFirst"),e.\u0275\u0275elementEnd()(),e.\u0275\u0275template(6,RR,15,13,"ng-container",13),e.\u0275\u0275elementEnd()),2&t&&(e.\u0275\u0275property("open",o.open)("hasScrollingContent",!0),e.\u0275\u0275advance(5),e.\u0275\u0275i18nExp(e.\u0275\u0275pipeBind1(4,5,o.action))(e.\u0275\u0275pipeBind1(5,7,o.resource)),e.\u0275\u0275i18nApply(3),e.\u0275\u0275advance(),e.\u0275\u0275property("cdFormLoading",o.loading))},dependencies:[l.NgForOf,l.NgIf,oe.e,ct.B,tt.G,Ge.S,ze.E,C.\u0275NgNoValidate,C.NgSelectOption,C.\u0275NgSelectMultipleOption,C.DefaultValueAccessor,C.NgControlStatus,C.NgControlStatusGroup,C.FormGroupDirective,C.FormControlName,C.FormGroupName,C.FormArrayName,D.ColumnDirective,D.RowDirective,D.Select,D.Option,D.TextInputLabelComponent,D.TextInput,D.Modal,D.ModalHeader,D.ModalContent,D.ModalHeaderHeading,D.Button,D.IconButton,D.IconDirective,l.AsyncPipe,l.TitleCasePipe,Pe.r],styles:[".spacing[_ngcontent-%COMP%]{margin-top:1.5rem}"]})}}const OR=["table"];function PR(i,n){if(1&i){const t=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementContainerStart(0),e.\u0275\u0275elementStart(1,"cd-table",1),e.\u0275\u0275listener("fetchData",function(){e.\u0275\u0275restoreView(t);const s=e.\u0275\u0275nextContext();return e.\u0275\u0275resetView(s.loadSMBShares())})("updateSelection",function(s){e.\u0275\u0275restoreView(t);const d=e.\u0275\u0275nextContext();return e.\u0275\u0275resetView(d.updateSelection(s))}),e.\u0275\u0275elementStart(2,"div",2),e.\u0275\u0275element(3,"cd-table-actions",3),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementContainerEnd()}if(2&i){const t=n.ngIf,o=e.\u0275\u0275nextContext();e.\u0275\u0275advance(),e.\u0275\u0275property("data",t)("columns",o.columns)("hasDetails",!1),e.\u0275\u0275advance(2),e.\u0275\u0275property("permission",o.permission)("selection",o.selection)("tableActions",o.tableActions)}}const zi="cephfs/smb/share";class Or{constructor(n,t,o,s,d){this.authStorageService=n,this.actionLabels=t,this.smbService=o,this.taskWrapper=s,this.modalService=d,this.selection=new N.y,this.subject$=new K.BehaviorSubject([]),this.permission=this.authStorageService.getPermissions().smb}ngOnInit(){this.columns=[{name:$localize`ID`,prop:"share_id",flexGrow:2},{name:$localize`Name`,prop:"name",flexGrow:2},{name:$localize`File System`,prop:"cephfs.volume",flexGrow:2},{name:$localize`Path`,prop:"cephfs.path",cellTransformation:b.x.path,flexGrow:2},{name:$localize`Subvolume group`,prop:"cephfs.subvolumegroup",flexGrow:2},{name:$localize`Subvolume`,prop:"cephfs.subvolume",flexGrow:2},{name:$localize`Provider`,prop:"cephfs.provider",flexGrow:2}],this.tableActions=[{name:`${this.actionLabels.CREATE}`,permission:"create",icon:g.FI.add,routerLink:()=>[`/${zi}/${m.Qp.CREATE}`,this.clusterId],canBePrimary:n=>!n.hasSingleSelection},{name:this.actionLabels.EDIT,permission:"update",icon:g.FI.edit,routerLink:()=>[`/${zi}/${m.Qp.EDIT}`,this.clusterId,this.selection.first().name]},{permission:"delete",icon:g.FI.destroy,click:()=>this.deleteShareModal(),name:this.actionLabels.DELETE}],this.smbShares$=this.subject$.pipe((0,v.switchMap)(()=>this.smbService.listShares(this.clusterId).pipe((0,v.catchError)(()=>(this.context.error(),(0,K.of)(null))))))}loadSMBShares(){this.subject$.next([])}updateSelection(n){this.selection=n}deleteShareModal(){const n=this.selection.first().cluster_id,t=this.selection.first().share_id,o=this.selection.first().name;this.modalRef=this.modalService.show(O.D,{itemDescription:$localize`SMB Share`,itemNames:[`Share: ${t} (${o}) from cluster: ${n}`],submitActionObservable:()=>this.taskWrapper.wrapTaskAroundCall({task:new q.O(`${zi}/${m.Qp.DELETE}`,{share_id:t}),call:this.smbService.deleteShare(n,t)})})}static{this.\u0275fac=function(t){return new(t||Or)(e.\u0275\u0275directiveInject(c.v),e.\u0275\u0275directiveInject(m.Ss),e.\u0275\u0275directiveInject(Vt),e.\u0275\u0275directiveInject(B.a),e.\u0275\u0275directiveInject(He.V))}}static{this.\u0275cmp=e.\u0275\u0275defineComponent({type:Or,selectors:[["cd-smb-share-list"]],viewQuery:function(t,o){if(1&t&&e.\u0275\u0275viewQuery(OR,7),2&t){let s;e.\u0275\u0275queryRefresh(s=e.\u0275\u0275loadQuery())&&(o.table=s.first)}},inputs:{clusterId:"clusterId"},decls:2,vars:3,consts:[[4,"ngIf"],["headerTitle","Shares","headerDescription","Logical unit hosted by the cluster that maps to the given CephFS volume and path","columnMode","flex","selectionType","single",3,"fetchData","updateSelection","data","columns","hasDetails"],[1,"table-actions"],[1,"btn-group",3,"permission","selection","tableActions"]],template:function(t,o){1&t&&(e.\u0275\u0275template(0,PR,4,6,"ng-container",0),e.\u0275\u0275pipe(1,"async")),2&t&&e.\u0275\u0275property("ngIf",e.\u0275\u0275pipeBind1(1,1,o.smbShares$))},dependencies:[l.NgIf,We.O,at.j,l.AsyncPipe]})}}function bR(i,n){if(1&i&&(e.\u0275\u0275elementContainerStart(0),e.\u0275\u0275element(1,"cd-smb-share-list",1),e.\u0275\u0275elementContainerEnd()),2&i){const t=e.\u0275\u0275nextContext();e.\u0275\u0275advance(),e.\u0275\u0275property("clusterId",t.selection.cluster_id)}}class Pr{static{this.\u0275fac=function(t){return new(t||Pr)}}static{this.\u0275cmp=e.\u0275\u0275defineComponent({type:Pr,selectors:[["cd-smb-cluster-tabs"]],inputs:{selection:"selection"},decls:1,vars:1,consts:[[4,"ngIf"],[3,"clusterId"]],template:function(t,o){1&t&&e.\u0275\u0275template(0,bR,2,1,"ng-container",0),2&t&&e.\u0275\u0275property("ngIf",o.selection)},dependencies:[l.NgIf,Or]})}}const NR=["table"];function IR(i,n){if(1&i&&e.\u0275\u0275element(0,"cd-smb-cluster-tabs",5),2&i){const t=e.\u0275\u0275nextContext(2);e.\u0275\u0275property("selection",t.expandedRow)}}function AR(i,n){if(1&i){const t=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementContainerStart(0),e.\u0275\u0275elementStart(1,"cd-table",1),e.\u0275\u0275listener("setExpandedRow",function(s){e.\u0275\u0275restoreView(t);const d=e.\u0275\u0275nextContext();return e.\u0275\u0275resetView(d.setExpandedRow(s))})("fetchData",function(s){e.\u0275\u0275restoreView(t);const d=e.\u0275\u0275nextContext();return e.\u0275\u0275resetView(d.loadSMBCluster(s))})("updateSelection",function(s){e.\u0275\u0275restoreView(t);const d=e.\u0275\u0275nextContext();return e.\u0275\u0275resetView(d.updateSelection(s))}),e.\u0275\u0275elementStart(2,"div",2),e.\u0275\u0275element(3,"cd-table-actions",3),e.\u0275\u0275elementEnd(),e.\u0275\u0275template(4,IR,1,1,"cd-smb-cluster-tabs",4),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementContainerEnd()}if(2&i){const t=n.ngIf,o=e.\u0275\u0275nextContext();e.\u0275\u0275advance(),e.\u0275\u0275property("data",t)("columns",o.columns)("hasDetails",!0),e.\u0275\u0275advance(2),e.\u0275\u0275property("permission",o.permission)("selection",o.selection)("tableActions",o.tableActions)}}const Wo="cephfs/smb/cluster";class Xi extends M.D{constructor(n,t,o,s,d,h){super(),this.authStorageService=n,this.actionLabels=t,this.smbService=o,this.modalService=s,this.taskWrapper=d,this.urlBuilder=h,this.subject$=new K.BehaviorSubject([]),this.selection=new N.y,this.permission=this.authStorageService.getPermissions().smb}ngOnInit(){this.columns=[{name:$localize`Name`,prop:"cluster_id",flexGrow:2},{name:$localize`Authentication Mode`,prop:"auth_mode",flexGrow:2}],this.tableActions=[{name:`${this.actionLabels.CREATE} cluster`,permission:"create",icon:g.FI.add,routerLink:()=>this.urlBuilder.getCreate(),canBePrimary:n=>!n.hasSingleSelection},{name:this.actionLabels.EDIT,permission:"update",icon:g.FI.edit,routerLink:()=>this.selection.first()&&this.urlBuilder.getEdit(this.selection.first().cluster_id)},{permission:"delete",icon:g.FI.destroy,click:()=>this.removeSMBClusterModal(),name:this.actionLabels.DELETE}],this.smbClusters$=this.subject$.pipe((0,v.switchMap)(()=>this.smbService.listClusters()?.pipe((0,v.catchError)(()=>(this.context.error(),(0,K.of)(null))))))}loadSMBCluster(){this.subject$.next([])}updateSelection(n){this.selection=n}removeSMBClusterModal(){const n=this.selection.first().cluster_id;this.modalService.show(O.D,{itemDescription:$localize`Cluster`,itemNames:[n],submitActionObservable:()=>this.taskWrapper.wrapTaskAroundCall({task:new q.O(`${Wo}/${m.Qp.DELETE}`,{cluster_id:n}),call:this.smbService.removeCluster(n)})})}static{this.\u0275fac=function(t){return new(t||Xi)(e.\u0275\u0275directiveInject(c.v),e.\u0275\u0275directiveInject(m.Ss),e.\u0275\u0275directiveInject(Vt),e.\u0275\u0275directiveInject(He.V),e.\u0275\u0275directiveInject(B.a),e.\u0275\u0275directiveInject(z.E))}}static{this.\u0275cmp=e.\u0275\u0275defineComponent({type:Xi,selectors:[["cd-smb-cluster-list"]],viewQuery:function(t,o){if(1&t&&e.\u0275\u0275viewQuery(NR,7),2&t){let s;e.\u0275\u0275queryRefresh(s=e.\u0275\u0275loadQuery())&&(o.table=s.first)}},features:[e.\u0275\u0275ProvidersFeature([{provide:z.E,useValue:new z.E(Wo)}]),e.\u0275\u0275InheritDefinitionFeature],decls:3,vars:3,consts:[[4,"ngIf"],["headerTitle","Clusters","headerDescription","Logical management units that may map to one or more managed Samba service","columnMode","flex","selectionType","single",3,"setExpandedRow","fetchData","updateSelection","data","columns","hasDetails"],[1,"table-actions"],[1,"btn-group",3,"permission","selection","tableActions"],[3,"selection",4,"cdTableDetail"],[3,"selection"]],template:function(t,o){1&t&&(e.\u0275\u0275element(0,"cd-smb-tabs"),e.\u0275\u0275template(1,AR,5,6,"ng-container",0),e.\u0275\u0275pipe(2,"async")),2&t&&(e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf",e.\u0275\u0275pipeBind1(2,1,o.smbClusters$)))},dependencies:[l.NgIf,We.O,at.j,Et.N,Pr,So,l.AsyncPipe]})}}class br{ngOnInit(){this.columns=[{name:$localize`Username`,prop:"name",flexGrow:2}]}static{this.\u0275fac=function(t){return new(t||br)}}static{this.\u0275cmp=e.\u0275\u0275defineComponent({type:br,selectors:[["cd-smb-usersgroups-details"]],inputs:{selection:"selection"},decls:3,vars:4,consts:()=>{let n;return n=$localize`:␟4d13a9cd5ed3dcee0eab22cb25198d43886942be␟4555457172864212828:Users`,[["type","contained","followFocus","true","isNavigation","true",3,"cacheActive"],["heading",n],["columnMode","flex","selectionType","single",3,"data","columns","hasDetails"]]},template:function(t,o){1&t&&(e.\u0275\u0275elementStart(0,"cds-tabs",0)(1,"cds-tab",1),e.\u0275\u0275element(2,"cd-table",2),e.\u0275\u0275elementEnd()()),2&t&&(e.\u0275\u0275property("cacheActive",!1),e.\u0275\u0275advance(2),e.\u0275\u0275property("data",null==o.selection?null:o.selection.values.users)("columns",o.columns)("hasDetails",!1))},dependencies:[We.O,D.Tabs,D.Tab]})}}const DR=["groupsNamesTpl"];function yR(i,n){if(1&i&&e.\u0275\u0275element(0,"cd-smb-usersgroups-details",6),2&i){const t=e.\u0275\u0275nextContext(2);e.\u0275\u0275property("selection",t.expandedRow)}}function LR(i,n){if(1&i){const t=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementContainerStart(0),e.\u0275\u0275elementStart(1,"cd-table",2),e.\u0275\u0275listener("setExpandedRow",function(s){e.\u0275\u0275restoreView(t);const d=e.\u0275\u0275nextContext();return e.\u0275\u0275resetView(d.setExpandedRow(s))})("fetchData",function(){e.\u0275\u0275restoreView(t);const s=e.\u0275\u0275nextContext();return e.\u0275\u0275resetView(s.loadUsersGroups())})("updateSelection",function(s){e.\u0275\u0275restoreView(t);const d=e.\u0275\u0275nextContext();return e.\u0275\u0275resetView(d.updateSelection(s))}),e.\u0275\u0275elementStart(2,"div",3),e.\u0275\u0275element(3,"cd-table-actions",4),e.\u0275\u0275elementEnd(),e.\u0275\u0275template(4,yR,1,1,"cd-smb-usersgroups-details",5),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementContainerEnd()}if(2&i){const t=n.ngIf,o=e.\u0275\u0275nextContext();e.\u0275\u0275advance(),e.\u0275\u0275property("data",t)("columns",o.columns)("hasDetails",!0),e.\u0275\u0275advance(2),e.\u0275\u0275property("permission",o.permission)("selection",o.selection)("tableActions",o.tableActions)}}function $R(i,n){if(1&i&&(e.\u0275\u0275elementStart(0,"cds-tag",8),e.\u0275\u0275text(1),e.\u0275\u0275elementEnd()),2&i){const t=n.$implicit;e.\u0275\u0275advance(),e.\u0275\u0275textInterpolate1(" ",null==t?null:t.name," ")}}function xR(i,n){if(1&i&&e.\u0275\u0275template(0,$R,2,1,"cds-tag",7),2&i){const t=n.data.row;e.\u0275\u0275property("ngForOf",null==t?null:t.values.groups)}}const ki="cephfs/smb/standalone";class Nr extends M.D{constructor(n,t,o,s,d,h,I){super(),this.router=n,this.urlBuilder=t,this.authStorageService=o,this.actionLabels=s,this.smbService=d,this.modalService=h,this.taskWrapper=I,this.subject$=new K.BehaviorSubject([]),this.selection=new N.y,this.permission=this.authStorageService.getPermissions().smb}ngOnInit(){this.columns=[{name:$localize`Name`,prop:"users_groups_id",flexGrow:2},{name:$localize`Number of users`,prop:"values.users.length",flexGrow:2},{name:$localize`Groups`,prop:"values.groups",cellTemplate:this.groupsNamesTpl,flexGrow:2},{name:$localize`Linked to cluster`,prop:"values.linked_to_cluster",flexGrow:2}],this.tableActions=[{name:`${this.actionLabels.CREATE} standalone`,permission:"create",icon:g.FI.add,click:()=>this.router.navigate([this.urlBuilder.getCreate()]),canBePrimary:n=>!n.hasSelection},{name:this.actionLabels.EDIT,permission:"update",icon:g.FI.edit,click:()=>this.router.navigate([this.urlBuilder.getEdit(String(this.selection.first().users_groups_id))])},{name:this.actionLabels.DELETE,permission:"delete",icon:g.FI.destroy,click:()=>this.openDeleteModal()}],this.usersGroups$=this.subject$.pipe((0,v.switchMap)(()=>this.smbService.listUsersGroups().pipe((0,v.catchError)(()=>(this.context.error(),(0,K.of)(null))))))}loadUsersGroups(){this.subject$.next([])}openDeleteModal(){const n=this.selection.first().users_groups_id;this.modalService.show(O.D,{itemDescription:$localize`Users and groups access resource`,itemNames:[n],submitActionObservable:()=>this.taskWrapper.wrapTaskAroundCall({task:new q.O(`${ki}/${m.Qp.DELETE}`,{usersGroupsId:n}),call:this.smbService.deleteUsersgroups(n)})})}updateSelection(n){this.selection=n}static{this.\u0275fac=function(t){return new(t||Nr)(e.\u0275\u0275directiveInject(u.Router),e.\u0275\u0275directiveInject(z.E),e.\u0275\u0275directiveInject(c.v),e.\u0275\u0275directiveInject(m.Ss),e.\u0275\u0275directiveInject(Vt),e.\u0275\u0275directiveInject(He.V),e.\u0275\u0275directiveInject(B.a))}}static{this.\u0275cmp=e.\u0275\u0275defineComponent({type:Nr,selectors:[["cd-smb-users-list"]],viewQuery:function(t,o){if(1&t&&e.\u0275\u0275viewQuery(DR,7),2&t){let s;e.\u0275\u0275queryRefresh(s=e.\u0275\u0275loadQuery())&&(o.groupsNamesTpl=s.first)}},features:[e.\u0275\u0275ProvidersFeature([{provide:z.E,useValue:new z.E(ki)}]),e.\u0275\u0275InheritDefinitionFeature],decls:5,vars:3,consts:[["groupsNamesTpl",""],[4,"ngIf"],["headerTitle","Standalone access resoruces","headerDescription","Logical management units for authorization on Standalone servers","columnMode","flex","selectionType","single",3,"setExpandedRow","fetchData","updateSelection","data","columns","hasDetails"],[1,"table-actions"],[3,"permission","selection","tableActions"],[3,"selection",4,"cdTableDetail"],[3,"selection"],["size","md",4,"ngFor","ngForOf"],["size","md"]],template:function(t,o){1&t&&(e.\u0275\u0275element(0,"cd-smb-tabs"),e.\u0275\u0275template(1,LR,5,6,"ng-container",1),e.\u0275\u0275pipe(2,"async"),e.\u0275\u0275template(3,xR,1,1,"ng-template",null,0,e.\u0275\u0275templateRefExtractor)),2&t&&(e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf",e.\u0275\u0275pipeBind1(2,1,o.usersGroups$)))},dependencies:[l.NgForOf,l.NgIf,We.O,at.j,Et.N,D.Tag,br,So,l.AsyncPipe]})}}var UR=r(95131);const wR=()=>({md:4}),GR=()=>({md:12}),__=()=>({lg:14}),vl=()=>({lg:1}),c_=()=>({lg:7});function HR(i,n){1&i&&(e.\u0275\u0275elementStart(0,"span",56),e.\u0275\u0275i18n(1,12),e.\u0275\u0275elementEnd())}function VR(i,n){if(1&i&&e.\u0275\u0275template(0,HR,2,0,"span",55),2&i){e.\u0275\u0275nextContext();const t=e.\u0275\u0275reference(2),o=e.\u0275\u0275nextContext(2);e.\u0275\u0275property("ngIf",o.smbForm.showError("cluster_id",t,"required"))}}function BR(i,n){1&i&&(e.\u0275\u0275elementStart(0,"span",56),e.\u0275\u0275i18n(1,13),e.\u0275\u0275elementEnd())}function zR(i,n){if(1&i&&e.\u0275\u0275template(0,BR,2,0,"span",55),2&i){e.\u0275\u0275nextContext();const t=e.\u0275\u0275reference(2),o=e.\u0275\u0275nextContext(2);e.\u0275\u0275property("ngIf",o.smbForm.showError("auth_mode",t,"required"))}}function XR(i,n){1&i&&(e.\u0275\u0275elementStart(0,"span",56),e.\u0275\u0275i18n(1,15),e.\u0275\u0275elementEnd())}function kR(i,n){if(1&i){const t=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"div",37)(1,"div",57)(2,"cds-text-label",58),e.\u0275\u0275i18nStart(3,14),e.\u0275\u0275elementStart(4,"div",59)(5,"input",60),e.\u0275\u0275listener("click",function(){e.\u0275\u0275restoreView(t);const s=e.\u0275\u0275nextContext(3);return e.\u0275\u0275resetView(s.editDomainSettingsModal())}),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(6,"cds-icon-button",61),e.\u0275\u0275listener("click",function(){e.\u0275\u0275restoreView(t);const s=e.\u0275\u0275nextContext(3);return e.\u0275\u0275resetView(s.editDomainSettingsModal())}),e.\u0275\u0275namespaceSVG(),e.\u0275\u0275element(7,"svg",62),e.\u0275\u0275elementEnd(),e.\u0275\u0275namespaceHTML(),e.\u0275\u0275elementStart(8,"cds-icon-button",63),e.\u0275\u0275listener("click",function(){e.\u0275\u0275restoreView(t);const s=e.\u0275\u0275nextContext(3);return e.\u0275\u0275resetView(s.deleteDomainSettingsModal())}),e.\u0275\u0275namespaceSVG(),e.\u0275\u0275element(9,"svg",64),e.\u0275\u0275elementEnd()(),e.\u0275\u0275i18nEnd(),e.\u0275\u0275elementEnd()(),e.\u0275\u0275template(10,XR,2,0,"span",55),e.\u0275\u0275namespaceHTML(),e.\u0275\u0275element(11,"div"),e.\u0275\u0275elementEnd()}if(2&i){const t=e.\u0275\u0275nextContext(3);e.\u0275\u0275advance(),e.\u0275\u0275property("columnNumbers",e.\u0275\u0275pureFunction0(4,GR)),e.\u0275\u0275advance(4),e.\u0275\u0275property("value",null==t.domainSettingsObject?null:t.domainSettingsObject.realm)("invalid",!t.smbForm.controls.domain_settings.valid&&t.smbForm.controls.domain_settings.dirty&&t.smbForm.controls.domain_settings.touched),e.\u0275\u0275advance(5),e.\u0275\u0275property("ngIf",t.smbForm.get("domain_settings").hasError("required")&&t.smbForm.controls.domain_settings.touched)}}function jR(i,n){if(1&i&&(e.\u0275\u0275elementStart(0,"option",69),e.\u0275\u0275text(1),e.\u0275\u0275elementEnd()),2&i){const t=n.$implicit;e.\u0275\u0275property("value",t.users_groups_id),e.\u0275\u0275advance(),e.\u0275\u0275textInterpolate(t.users_groups_id)}}function WR(i,n){1&i&&(e.\u0275\u0275elementStart(0,"span",56),e.\u0275\u0275i18n(1,17),e.\u0275\u0275elementEnd())}function KR(i,n){if(1&i){const t=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"cds-icon-button",73),e.\u0275\u0275listener("click",function(){e.\u0275\u0275restoreView(t);const s=e.\u0275\u0275nextContext(2).index,d=e.\u0275\u0275nextContext(3);return e.\u0275\u0275resetView(d.removeUserGroupSetting(s))}),e.\u0275\u0275namespaceSVG(),e.\u0275\u0275element(1,"svg",74),e.\u0275\u0275elementEnd()}}function QR(i,n){if(1&i&&(e.\u0275\u0275elementStart(0,"div",67)(1,"div",33)(2,"cds-select",68)(3,"option",69),e.\u0275\u0275i18n(4,16),e.\u0275\u0275elementEnd(),e.\u0275\u0275template(5,jR,2,2,"option",70),e.\u0275\u0275elementEnd(),e.\u0275\u0275template(6,WR,2,0,"ng-template",null,3,e.\u0275\u0275templateRefExtractor),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(8,"div",71),e.\u0275\u0275template(9,KR,2,0,"cds-icon-button",72),e.\u0275\u0275elementEnd()()),2&i){const t=n.ngIf,o=e.\u0275\u0275reference(7),s=e.\u0275\u0275nextContext().index,d=e.\u0275\u0275nextContext(3);e.\u0275\u0275advance(),e.\u0275\u0275property("columnNumbers",e.\u0275\u0275pureFunction0(8,__)),e.\u0275\u0275advance(),e.\u0275\u0275property("formControlName",s)("invalid",d.smbForm.controls.joinSources.controls[s].invalid&&d.smbForm.controls.joinSources.controls[s].dirty)("invalidText",o),e.\u0275\u0275advance(),e.\u0275\u0275property("value",null),e.\u0275\u0275advance(2),e.\u0275\u0275property("ngForOf",t),e.\u0275\u0275advance(3),e.\u0275\u0275property("columnNumbers",e.\u0275\u0275pureFunction0(9,vl)),e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf",s>0)}}function YR(i,n){if(1&i&&(e.\u0275\u0275elementContainerStart(0,65),e.\u0275\u0275template(1,QR,10,10,"div",66),e.\u0275\u0275pipe(2,"async"),e.\u0275\u0275elementContainerEnd()),2&i){const t=e.\u0275\u0275nextContext(3);e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf",e.\u0275\u0275pipeBind1(2,1,"user"===t.smbForm.get("auth_mode").value&&t.usersGroups$))}}function JR(i,n){if(1&i){const t=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"div",37)(1,"button",49),e.\u0275\u0275listener("click",function(){e.\u0275\u0275restoreView(t);const s=e.\u0275\u0275nextContext(3);return e.\u0275\u0275resetView(s.addUserGroupSetting())}),e.\u0275\u0275i18nStart(2,18),e.\u0275\u0275namespaceSVG(),e.\u0275\u0275element(3,"svg",50),e.\u0275\u0275i18nEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275namespaceHTML(),e.\u0275\u0275elementStart(4,"button",49),e.\u0275\u0275listener("click",function(){e.\u0275\u0275restoreView(t);const s=e.\u0275\u0275nextContext(3);return e.\u0275\u0275resetView(s.navigateCreateUsersGroups())}),e.\u0275\u0275i18nStart(5,19),e.\u0275\u0275namespaceSVG(),e.\u0275\u0275element(6,"svg",75),e.\u0275\u0275i18nEnd(),e.\u0275\u0275elementEnd()()}}function ZR(i,n){1&i&&(e.\u0275\u0275elementStart(0,"span",56),e.\u0275\u0275i18n(1,23),e.\u0275\u0275elementEnd())}function qR(i,n){if(1&i&&e.\u0275\u0275template(0,ZR,2,0,"span",55),2&i){e.\u0275\u0275nextContext(4);const t=e.\u0275\u0275reference(2),o=e.\u0275\u0275nextContext(2);e.\u0275\u0275property("ngIf",o.smbForm.showError("label",t,"required"))}}function eO(i,n){if(1&i){const t=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"div",37)(1,"cds-combo-box",79),e.\u0275\u0275listener("selected",function(s){e.\u0275\u0275restoreView(t);const d=e.\u0275\u0275nextContext(5);return e.\u0275\u0275resetView(d.multiSelector(s,"label"))}),e.\u0275\u0275i18nStart(2,22),e.\u0275\u0275element(3,"cds-dropdown-list"),e.\u0275\u0275i18nEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275template(4,qR,1,1,"ng-template",null,4,e.\u0275\u0275templateRefExtractor),e.\u0275\u0275elementEnd()}if(2&i){const t=e.\u0275\u0275reference(5),o=e.\u0275\u0275nextContext().ngIf,s=e.\u0275\u0275nextContext(4);e.\u0275\u0275advance(),e.\u0275\u0275property("appendInline",!0)("items",o.labels)("invalid",s.smbForm.controls.label.invalid&&s.smbForm.controls.label.dirty)("invalidText",t)}}function tO(i,n){if(1&i){const t=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"div",37)(1,"cds-combo-box",80),e.\u0275\u0275listener("selected",function(s){e.\u0275\u0275restoreView(t);const d=e.\u0275\u0275nextContext(5);return e.\u0275\u0275resetView(d.multiSelector(s,"hosts"))}),e.\u0275\u0275i18nStart(2,24),e.\u0275\u0275element(3,"cds-dropdown-list"),e.\u0275\u0275i18nEnd(),e.\u0275\u0275elementEnd()()}if(2&i){const t=e.\u0275\u0275nextContext().ngIf;e.\u0275\u0275advance(),e.\u0275\u0275property("appendInline",!0)("items",t.hosts)}}function nO(i,n){if(1&i&&(e.\u0275\u0275elementContainerStart(0),e.\u0275\u0275template(1,eO,6,4,"div",43)(2,tO,4,2,"div",43),e.\u0275\u0275elementContainerEnd()),2&i){const t=e.\u0275\u0275nextContext(4);e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf","label"===t.smbForm.controls.placement.value),e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf","hosts"===t.smbForm.controls.placement.value)}}function oO(i,n){if(1&i&&(e.\u0275\u0275elementContainerStart(0),e.\u0275\u0275elementStart(1,"div",37)(2,"cds-select",76)(3,"option",77),e.\u0275\u0275i18n(4,20),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(5,"option",78),e.\u0275\u0275i18n(6,21),e.\u0275\u0275elementEnd()()(),e.\u0275\u0275template(7,nO,3,2,"ng-container",46),e.\u0275\u0275pipe(8,"async"),e.\u0275\u0275elementContainerEnd()),2&i){const t=e.\u0275\u0275nextContext(3);e.\u0275\u0275advance(7),e.\u0275\u0275property("ngIf",e.\u0275\u0275pipeBind1(8,1,t.hostsAndLabels$))}}function iO(i,n){if(1&i){const t=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementContainerStart(0,81),e.\u0275\u0275elementStart(1,"div",67)(2,"div",33)(3,"cds-text-label",82),e.\u0275\u0275i18nStart(4,25),e.\u0275\u0275element(5,"input",83),e.\u0275\u0275i18nEnd(),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(6,"div",71)(7,"cds-icon-button",73),e.\u0275\u0275listener("click",function(){const s=e.\u0275\u0275restoreView(t).index,d=e.\u0275\u0275nextContext(3);return e.\u0275\u0275resetView(d.removeCustomDNS(s))}),e.\u0275\u0275namespaceSVG(),e.\u0275\u0275element(8,"svg",74),e.\u0275\u0275elementEnd()()(),e.\u0275\u0275elementContainerEnd()}if(2&i){const t=n.index;e.\u0275\u0275advance(2),e.\u0275\u0275property("columnNumbers",e.\u0275\u0275pureFunction0(3,__)),e.\u0275\u0275advance(3),e.\u0275\u0275property("formControlName",t),e.\u0275\u0275advance(),e.\u0275\u0275property("columnNumbers",e.\u0275\u0275pureFunction0(4,vl))}}function aO(i,n){if(1&i&&(e.\u0275\u0275elementStart(0,"option"),e.\u0275\u0275i18n(1,26),e.\u0275\u0275pipe(2,"upperFirst"),e.\u0275\u0275elementEnd()),2&i){const t=n.$implicit;e.\u0275\u0275advance(2),e.\u0275\u0275i18nExp(e.\u0275\u0275pipeBind1(2,1,t)),e.\u0275\u0275i18nApply(1)}}function sO(i,n){1&i&&(e.\u0275\u0275elementStart(0,"span",56),e.\u0275\u0275elementContainerStart(1),e.\u0275\u0275i18n(2,29),e.\u0275\u0275elementContainerEnd(),e.\u0275\u0275elementEnd())}function rO(i,n){if(1&i){const t=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementContainerStart(0,84)(1,85),e.\u0275\u0275elementStart(2,"div",67)(3,"div",33)(4,"cds-text-label",86),e.\u0275\u0275i18nStart(5,27),e.\u0275\u0275element(6,"input",87),e.\u0275\u0275i18nEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275template(7,sO,3,0,"ng-template",null,5,e.\u0275\u0275templateRefExtractor),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(9,"div",33)(10,"cds-text-label",88),e.\u0275\u0275i18nStart(11,28),e.\u0275\u0275element(12,"input",89),e.\u0275\u0275i18nEnd(),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(13,"div",71)(14,"cds-icon-button",73),e.\u0275\u0275listener("click",function(){const s=e.\u0275\u0275restoreView(t).index,d=e.\u0275\u0275nextContext(3);return e.\u0275\u0275resetView(d.removePublicAddrs(s))}),e.\u0275\u0275namespaceSVG(),e.\u0275\u0275element(15,"svg",74),e.\u0275\u0275elementEnd()()(),e.\u0275\u0275elementContainerEnd()()}if(2&i){const t=n.index,o=e.\u0275\u0275reference(8),s=e.\u0275\u0275nextContext(3);e.\u0275\u0275advance(),e.\u0275\u0275property("formGroupName",t),e.\u0275\u0275advance(2),e.\u0275\u0275property("columnNumbers",e.\u0275\u0275pureFunction0(7,c_)),e.\u0275\u0275advance(),e.\u0275\u0275property("invalid",(null==s.smbForm||null==s.smbForm.controls.public_addrs?null:s.smbForm.controls.public_addrs.controls[t].controls.address.invalid)&&(null==s.smbForm||null==s.smbForm.controls.public_addrs?null:s.smbForm.controls.public_addrs.controls[t].controls.address.dirty))("invalidText",o),e.\u0275\u0275advance(2),e.\u0275\u0275property("invalid",(null==s.smbForm?null:s.smbForm.controls.public_addrs.controls[t].controls.address.invalid)&&(null==s.smbForm||null==s.smbForm.controls.public_addrs?null:s.smbForm.controls.public_addrs.controls[t].controls.address.dirty)),e.\u0275\u0275advance(3),e.\u0275\u0275property("columnNumbers",e.\u0275\u0275pureFunction0(8,c_)),e.\u0275\u0275advance(4),e.\u0275\u0275property("columnNumbers",e.\u0275\u0275pureFunction0(9,vl))}}function lO(i,n){if(1&i){const t=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"div",37)(1,"button",49),e.\u0275\u0275listener("click",function(){e.\u0275\u0275restoreView(t);const s=e.\u0275\u0275nextContext(3);return e.\u0275\u0275resetView(s.addPublicAddrs())}),e.\u0275\u0275i18nStart(2,30),e.\u0275\u0275namespaceSVG(),e.\u0275\u0275element(3,"svg",50),e.\u0275\u0275i18nEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275namespaceHTML(),e.\u0275\u0275elementStart(4,"cd-helper"),e.\u0275\u0275i18n(5,31),e.\u0275\u0275elementEnd()()}}function _O(i,n){if(1&i){const t=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementContainerStart(0),e.\u0275\u0275elementStart(1,"form",35,0)(3,"div",36),e.\u0275\u0275i18n(4,6),e.\u0275\u0275pipe(5,"titlecase"),e.\u0275\u0275pipe(6,"upperFirst"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(7,"div",37)(8,"cds-text-label",38),e.\u0275\u0275i18nStart(9,7),e.\u0275\u0275element(10,"input",39),e.\u0275\u0275i18nEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275template(11,VR,1,1,"ng-template",null,1,e.\u0275\u0275templateRefExtractor),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(13,"div",37)(14,"cds-select",40),e.\u0275\u0275listener("change",function(){e.\u0275\u0275restoreView(t);const s=e.\u0275\u0275nextContext(2);return e.\u0275\u0275resetView(s.onAuthModeChange())}),e.\u0275\u0275elementStart(15,"option",41),e.\u0275\u0275i18n(16,8),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(17,"option",42),e.\u0275\u0275i18n(18,9),e.\u0275\u0275elementEnd()(),e.\u0275\u0275template(19,zR,1,1,"ng-template",null,2,e.\u0275\u0275templateRefExtractor),e.\u0275\u0275elementEnd(),e.\u0275\u0275template(21,kR,12,5,"div",43)(22,YR,3,3,"ng-container",44)(23,JR,7,0,"div",43),e.\u0275\u0275elementStart(24,"cd-form-advanced-fieldset",45),e.\u0275\u0275template(25,oO,9,3,"ng-container",46),e.\u0275\u0275elementStart(26,"div",37),e.\u0275\u0275element(27,"cds-number",47),e.\u0275\u0275elementEnd(),e.\u0275\u0275template(28,iO,9,5,"ng-container",48),e.\u0275\u0275elementStart(29,"div",37)(30,"button",49),e.\u0275\u0275listener("click",function(){e.\u0275\u0275restoreView(t);const s=e.\u0275\u0275nextContext(2);return e.\u0275\u0275resetView(s.addCustomDns())}),e.\u0275\u0275i18nStart(31,10),e.\u0275\u0275namespaceSVG(),e.\u0275\u0275element(32,"svg",50),e.\u0275\u0275i18nEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275namespaceHTML(),e.\u0275\u0275elementStart(33,"cd-helper"),e.\u0275\u0275i18n(34,11),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(35,"div",37)(36,"cds-select",51),e.\u0275\u0275template(37,aO,3,3,"option",52),e.\u0275\u0275elementEnd()(),e.\u0275\u0275template(38,rO,16,10,"ng-container",53)(39,lO,6,0,"div",43),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(40,"cd-form-button-panel",54),e.\u0275\u0275pipe(41,"titlecase"),e.\u0275\u0275pipe(42,"upperFirst"),e.\u0275\u0275listener("submitActionEvent",function(){e.\u0275\u0275restoreView(t);const s=e.\u0275\u0275nextContext(2);return e.\u0275\u0275resetView(s.submitAction())}),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementContainerEnd()}if(2&i){const t=e.\u0275\u0275reference(12),o=e.\u0275\u0275reference(20),s=e.\u0275\u0275nextContext().ngIf,d=e.\u0275\u0275nextContext();e.\u0275\u0275advance(),e.\u0275\u0275property("formGroup",d.smbForm),e.\u0275\u0275advance(5),e.\u0275\u0275i18nExp(e.\u0275\u0275pipeBind1(5,24,d.action))(e.\u0275\u0275pipeBind1(6,26,d.resource)),e.\u0275\u0275i18nApply(4),e.\u0275\u0275advance(2),e.\u0275\u0275property("disabled",d.isEdit)("invalid",d.smbForm.controls.cluster_id.invalid&&d.smbForm.controls.cluster_id.dirty)("invalidText",t),e.\u0275\u0275advance(2),e.\u0275\u0275property("invalid",d.smbForm.controls.cluster_id.invalid&&d.smbForm.controls.cluster_id.dirty),e.\u0275\u0275advance(4),e.\u0275\u0275property("invalid",d.smbForm.controls.auth_mode.invalid&&d.smbForm.controls.auth_mode.dirty)("invalidText",o)("disabled",d.isEdit),e.\u0275\u0275advance(7),e.\u0275\u0275property("ngIf","active-directory"===d.smbForm.get("auth_mode").value),e.\u0275\u0275advance(),e.\u0275\u0275property("ngForOf",d.joinSources.controls),e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf","user"===d.smbForm.get("auth_mode").value),e.\u0275\u0275advance(2),e.\u0275\u0275property("ngIf",s.available),e.\u0275\u0275advance(2),e.\u0275\u0275property("id","count")("formControlName","count")("label","Count")("min",1),e.\u0275\u0275advance(),e.\u0275\u0275property("ngForOf",d.custom_dns.controls),e.\u0275\u0275advance(9),e.\u0275\u0275property("ngForOf",d.allClustering),e.\u0275\u0275advance(),e.\u0275\u0275property("ngForOf",d.public_addrs.controls),e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf",d.smbForm.get("count").value>1&&d.smbForm.get("clustering").value.toLowerCase()==d.CLUSTERING.Default||d.smbForm.get("clustering").value.toLowerCase()==d.CLUSTERING.Always),e.\u0275\u0275advance(),e.\u0275\u0275property("form",d.smbForm)("submitText",e.\u0275\u0275pipeBind1(41,28,d.action)+" "+e.\u0275\u0275pipeBind1(42,30,d.resource))}}function cO(i,n){if(1&i&&(e.\u0275\u0275elementStart(0,"div",33),e.\u0275\u0275template(1,_O,43,32,"ng-container",34),e.\u0275\u0275elementEnd()),2&i){const t=e.\u0275\u0275nextContext();e.\u0275\u0275property("columnNumbers",e.\u0275\u0275pureFunction0(2,wR)),e.\u0275\u0275advance(),e.\u0275\u0275property("cdFormLoading",t.loading)}}class ji extends Ce.g{constructor(n,t,o,s,d,h,I,$,w,X){super(),this.hostService=n,this.formBuilder=t,this.smbService=o,this.actionLabels=s,this.orchService=d,this.modalService=h,this.taskWrapperService=I,this.router=$,this.cd=w,this.route=X,this.allClustering=[],this.CLUSTERING=Hi,this.selectedLabels=[],this.selectedHosts=[],this.icons=g.FI,this.isEdit=!1,this.resource=$localize`Cluster`,this.modalData$=this.smbService.modalData$}ngOnInit(){this.action=this.actionLabels.CREATE,this.usersGroups$=this.smbService.listUsersGroups(),this.router.url.startsWith(`/${Wo}/${m.Qp.EDIT}`)&&(this.isEdit=!0),this.smbService.modalData$.subscribe(n=>{this.domainSettingsObject=n,this.smbForm.get("domain_settings").setValue(n?.realm)}),this.hostsAndLabels$=(0,K.forkJoin)({hosts:this.hostService.getAllHosts(),labels:this.hostService.getLabels()}).pipe((0,v.map)(({hosts:n,labels:t})=>({hosts:n.map(o=>({content:o.hostname})),labels:t.map(o=>({content:o}))}))),this.createForm(),this.isEdit?(this.action=this.actionLabels.EDIT,this.smbForm.get("cluster_id").disable(),this.smbForm.get("auth_mode").disable(),this.route.params.subscribe(n=>{this.cluster_id=n.cluster_id}),this.smbService.getCluster(this.cluster_id).subscribe(n=>{this.clusterResponse=n;const t=this.clusterResponse.custom_dns,o=this.smbForm.get("custom_dns"),s=this.smbForm.get("joinSources"),d=this.clusterResponse.public_addrs,h=this.smbForm.get("public_addrs");if(this.clusterResponse.clustering){const I=this.clusterResponse.clustering,w=(new Pe.r).transform(I);this.smbForm.get("clustering").setValue(w||"")}if(t?.length&&t.forEach(I=>{o.push(new C.FormControl(I))}),this.clusterResponse.auth_mode==Vi_activeDirectory)this.domainSettingsObject=this.clusterResponse?.domain_settings,this.smbForm.get("domain_settings").setValue(this.domainSettingsObject.realm);else if(this.clusterResponse.user_group_settings&&this.clusterResponse.user_group_settings.length>0){this.clusterResponse.user_group_settings.forEach($=>{s.push(new C.FormControl($.ref))});const I=this.clusterResponse.user_group_settings.map($=>$.ref);s.setValue(I)}this.smbForm.get("cluster_id").setValue(this.clusterResponse.cluster_id),this.smbForm.get("auth_mode").setValue(this.clusterResponse.auth_mode),this.clusterResponse.placement.count&&this.smbForm.get("count").setValue(this.clusterResponse.placement.count),d?.length&&d.forEach(I=>{h.push(this.formBuilder.group({address:[I.address,C.Validators.required],destination:[I.destination||""]}))})})):(this.action=this.actionLabels.CREATE,this.hostsAndLabels$=(0,K.forkJoin)({hosts:this.hostService.getAllHosts(),labels:this.hostService.getLabels()}).pipe((0,v.map)(({hosts:n,labels:t})=>({hosts:n.map(o=>({content:o.hostname})),labels:t.map(o=>({content:o}))})))),this.orchStatus$=this.orchService.status(),this.allClustering=Object.values(Hi),this.loadingReady(),this.isEdit||this.onAuthModeChange()}createForm(){this.smbForm=this.formBuilder.group({cluster_id:new C.FormControl("",{validators:[C.Validators.required]}),auth_mode:[Vi_activeDirectory,{validators:[C.Validators.required]}],domain_settings:[null],placement:[{}],hosts:[[]],label:[null,[pe.xQ.requiredIf({placement:"label"})]],count:[1],custom_dns:new C.FormArray([]),joinSources:new C.FormArray([]),clustering:new C.UntypedFormControl(Hi.Default.charAt(0).toUpperCase()+Hi.Default.slice(1)),public_addrs:new C.FormArray([])}),this.orchService.status().subscribe(n=>{this.hasOrchestrator=n.available,this.smbForm.get("placement").setValue(this.hasOrchestrator?vr_host:"")})}multiSelector(n,t){t===vr_host?this.selectedHosts=n.map(o=>o.content):this.selectedLabels=n.map(o=>o.content)}onAuthModeChange(){const n=this.smbForm.get("auth_mode").value,t=this.smbForm.get("domain_settings"),o=this.smbForm.get("joinSources");if(n===Vi_activeDirectory)o&&o.clear(),t&&(t.setValidators(C.Validators.required),t.updateValueAndValidity()),o&&(o.clearValidators(),o.updateValueAndValidity());else if(n===Vi_User){const s=new C.FormControl(null,C.Validators.required);o.push(s),t&&(t.setValue(""),this.domainSettingsObject={realm:"",join_sources:[]}),t.setErrors(null),o.setValidators(C.Validators.required),t&&(t.clearValidators(),t.updateValueAndValidity())}else o&&(o.clearValidators(),o.clear(),o.updateValueAndValidity())}submitAction(){const n=this.smbForm.get("domain_settings"),t=this.smbForm.get("auth_mode").value,o=this.smbForm.getRawValue(),s={placement:{}};switch(o.placement){case vr_host:o.hosts.length>0&&(s.placement.hosts=this.selectedHosts);break;case vr_label:s.placement.label=this.selectedLabels}if(t===Vi_activeDirectory&&!n.value)return n.setErrors({required:!0}),void this.smbForm.markAllAsTouched();this.isEdit?this.handleTaskRequest(m.Qp.EDIT):this.handleTaskRequest(m.Qp.CREATE)}handleTaskRequest(n){const t=this.buildRequest(),o=this,s=this.smbForm.get("cluster_id").value;this.taskWrapperService.wrapTaskAroundCall({task:new q.O(`${Wo}/${n}`,{cluster_id:s}),call:this.smbService.createCluster(t)}).subscribe({complete:()=>{this.router.navigate([Wo])},error:()=>{o.smbForm.setErrors({cdSubmitButton:!0})}})}buildRequest(){const n=this.smbForm.getRawValue(),t=p().cloneDeep(this.smbForm.value),o=this.smbForm.get("cluster_id")?.value,s=this.smbForm.get("auth_mode")?.value,h=(this.domainSettingsObject?.join_sources||[]).filter(X=>X.ref).map(X=>({ref:X.ref,sourceType:Fl_Resource})).map(X=>({sourceType:Fl_Resource,ref:X.ref})),I={realm:this.domainSettingsObject?.realm,join_sources:h},$={cluster_resource:{resource_type:"ceph.smb.cluster",cluster_id:o,auth_mode:s}};I&&I.join_sources.length>0&&($.cluster_resource.domain_settings=I),t.joinSources?.length>0&&($.cluster_resource.user_group_settings=t.joinSources.map(X=>({source_type:Fl_Resource,ref:X})));const w=this.getPlacementSpec(n);return w&&($.cluster_resource.placement=w),t.custom_dns?.length>0&&($.cluster_resource.custom_dns=t.custom_dns),t.public_addrs?.length>0&&($.cluster_resource.public_addrs=t.public_addrs.map(X=>X.destination?X:{address:X.address})),t.clustering&&t.clustering.toLowerCase()!==Hi.Default&&($.cluster_resource.clustering=t.clustering.toLowerCase()),t.placement.count&&($.cluster_resource.count=t.placement.count),$}getPlacementSpec(n){const t={placement:{}};switch(t.placement.count=n.count,n.placement){case"hosts":n.hosts.length>0&&(t.placement.hosts=this.selectedHosts,t.placement.count=n.count);break;case"label":t.placement.label=this.selectedLabels,t.placement.count=n.count}return t.placement}editDomainSettingsModal(){this.modalService.show(Rr,{domainSettingsObject:this.domainSettingsObject})}deleteDomainSettingsModal(){this.smbForm.get("domain_settings")?.setValue(""),this.domainSettingsObject={realm:"",join_sources:[]}}get joinSources(){return this.smbForm.get("joinSources")}get custom_dns(){return this.smbForm.get("custom_dns")}get public_addrs(){return this.smbForm.get("public_addrs")}addUserGroupSetting(){const n=new C.FormControl(null,C.Validators.required);this.joinSources.push(n)}navigateCreateUsersGroups(){this.router.navigate([`${ki}/${m.Qp.CREATE}`])}addCustomDns(){const n=new C.FormControl("",C.Validators.required);this.custom_dns.push(n)}addPublicAddrs(){const n=this.formBuilder.group({address:["",C.Validators.required],destination:[""]});this.public_addrs.push(n)}removeUserGroupSetting(n){this.joinSources.removeAt(n),this.cd.detectChanges()}removeCustomDNS(n){this.custom_dns.removeAt(n),this.cd.detectChanges()}removePublicAddrs(n){this.public_addrs.removeAt(n),this.cd.detectChanges()}static{this.\u0275fac=function(t){return new(t||ji)(e.\u0275\u0275directiveInject(Ht.I),e.\u0275\u0275directiveInject(Dt.$),e.\u0275\u0275directiveInject(Vt),e.\u0275\u0275directiveInject(m.Ss),e.\u0275\u0275directiveInject(tn.K),e.\u0275\u0275directiveInject(He.V),e.\u0275\u0275directiveInject(B.a),e.\u0275\u0275directiveInject(u.Router),e.\u0275\u0275directiveInject(e.ChangeDetectorRef),e.\u0275\u0275directiveInject(u.ActivatedRoute))}}static{this.\u0275cmp=e.\u0275\u0275defineComponent({type:ji,selectors:[["cd-smb-cluster-form"]],features:[e.\u0275\u0275InheritDefinitionFeature],decls:2,vars:3,consts:()=>{let n,t,o,s,d,h,I,$,w,X,J,re,de,Me,ve,Se,$e,Te,ke,rt,mt,xe,Je,vt,Mt,Ye,yt,Ze,sn,rn,ln,Bt,_n,cn;return n=$localize`:␟82d34d54f1ea7de52b884a999d0a137d37117857␟4428221823397382435:Unique identifier`,t=$localize`:␟50290d7bbbd43f59108f079db0cc3a53e72d88d1␟6382904838281799792:Active-directory authentication for domain member servers and User authentication for
          Stand-alone servers configuration.`,o=$localize`:␟2e9bd82e9e03c501b46e426dc3cf5cdb3330c37d␟1367314238051405550:Default value indicates that clustering should be enabled if the placement count value is any value other than 1. Always value enables clustering regardless of the placement count. Never value disables clustering regardless of the placement count. `,s=$localize`:form title␟1ba7de58697f500e9c007c9fcbfb7941dc7e31bf␟2710086666908884806: ${"\ufffd0\ufffd"}:INTERPOLATION: ${"\ufffd1\ufffd"}:INTERPOLATION_1: `,d=$localize`:␟7ad8b11fa374b19bc974f8045658e3dfc137176a␟6846620205646165880:Cluster Name ${"\ufffd#10\ufffd\ufffd/#10\ufffd"}:TAG_INPUT:`,h=$localize`:␟ba2d34a26d51cc899e2775365dfd02f2754c8a8e␟1993356963818031105:Active Directory`,I=$localize`:␟e08a77594f3d89311cdf6da5090044270909c194␟2392488717875840729:User`,$=$localize`:␟c35c4fd574103aba7399e3bfda6ea67c59600872␟6129046386020784930: Add custom DNS ${"\ufffd#32\ufffd"}:START_TAG__SVG_SVG:${"\ufffd/#32\ufffd"}:CLOSE_TAG__SVG_SVG:`,w=$localize`:␟280bb2849f075c2b8c0cdfa0f99546eb6a19be5b␟7305288618292461635:One or more IP Addresses that will be applied to the Samba containers to override the default DNS resolver(s). This option is intended to be used when the host Ceph node is not configured to resolve DNS entries within AD domain(s). `,X=$localize`:␟7cbdabcece469fab89cfa687ab152bca18b97498␟1417693714872528491:This field is required.`,J=$localize`:␟7cbdabcece469fab89cfa687ab152bca18b97498␟1417693714872528491:This field is required.`,re=$localize`:␟105377b6dad99f02514532f6dae82b8cbfc1e2ea␟4745032032122904475:Active Directory (AD) Settings ${"\ufffd#4\ufffd"}:START_TAG_DIV:${"\ufffd#5\ufffd\ufffd/#5\ufffd"}:TAG_INPUT:${"\ufffd#6\ufffd"}:START_TAG_CDS_ICON_BUTTON:${"\ufffd#7\ufffd"}:START_TAG__SVG_SVG:${"[\ufffd/#7\ufffd|\ufffd/#9\ufffd]"}:CLOSE_TAG__SVG_SVG:${"[\ufffd/#6\ufffd|\ufffd/#8\ufffd]"}:CLOSE_TAG_CDS_ICON_BUTTON:${"\ufffd#8\ufffd"}:START_TAG_CDS_ICON_BUTTON_1:${"\ufffd#9\ufffd"}:START_TAG__SVG_SVG_1:${"[\ufffd/#7\ufffd|\ufffd/#9\ufffd]"}:CLOSE_TAG__SVG_SVG:${"[\ufffd/#6\ufffd|\ufffd/#8\ufffd]"}:CLOSE_TAG_CDS_ICON_BUTTON:${"\ufffd/#4\ufffd"}:CLOSE_TAG_DIV:`,re=e.\u0275\u0275i18nPostprocess(re),de=$localize`:␟7c8a1d646d5a9c13de4ac1a279f19968a5f9a749␟2153425599468942151:Specify the Realm and AD access resources in the Domain Settings field.`,Me=$localize`:␟44b82155dbad877ed8563d892a4bb68c9dabe12c␟1627585007717165508:Standalone user access resources`,ve=$localize`:␟16709653b5e33b45e1acdf1bd7db75c2227ba215␟4458838291106169831:-- List of users and groups access resources -- `,Se=$localize`:␟7cbdabcece469fab89cfa687ab152bca18b97498␟1417693714872528491:This field is required.`,$e=$localize`:␟5c4713293d6ba54cc28f863615917e8619372c9f␟2346206786497212057: Add user group ${"\ufffd#3\ufffd"}:START_TAG__SVG_SVG:${"\ufffd/#3\ufffd"}:CLOSE_TAG__SVG_SVG:`,Te=$localize`:␟463ed250a524bf60dbba043187f276b642ba73dd␟2564415069043733480: Create user group ${"\ufffd#6\ufffd"}:START_TAG__SVG_SVG:${"\ufffd/#6\ufffd"}:CLOSE_TAG__SVG_SVG:`,ke=$localize`:␟099b441d49333b3c6d30b36dc0a4763e64c78920␟4435206372750903836:Hosts`,rt=$localize`:␟2af7efecfae8d7fed3b07f718a623eca1ad8163f␟546766753072101168:Labels`,mt=$localize`:␟3d9607d23bb1ab0f64c3fc1135e097f8245b4035␟122880915385959769:Select labels...`,xe=$localize`:␟703fc967e5ce3acef391de91b1de7e403963bf5a␟7264473783888258492:${"\ufffd#3\ufffd"}:START_TAG_CDS_DROPDOWN_LIST:${"\ufffd/#3\ufffd"}:CLOSE_TAG_CDS_DROPDOWN_LIST:`,Je=$localize`:␟7cbdabcece469fab89cfa687ab152bca18b97498␟1417693714872528491:This field is required.`,vt=$localize`:␟4501e9c3311db8dcacc36b5402e666bbb2b6a7ac␟93017366433182313:Select hosts...`,Mt=$localize`:␟703fc967e5ce3acef391de91b1de7e403963bf5a␟7264473783888258492:${"\ufffd#3\ufffd"}:START_TAG_CDS_DROPDOWN_LIST:${"\ufffd/#3\ufffd"}:CLOSE_TAG_CDS_DROPDOWN_LIST:`,Ye=$localize`:␟5bab0ead2ebc2ca8ac2eec5d5701f74e2dca0ce2␟4113343954412553332:DNS ${"\ufffd#5\ufffd\ufffd/#5\ufffd"}:TAG_INPUT:`,yt=$localize`:␟5e02164017653e560d9cb950f440d2ec8bccb33b␟6220856264180364737:${"\ufffd0\ufffd"}:INTERPOLATION:`,Ze=$localize`:␟0851e64cdd246359a8c937c0803432a364a6bf1b␟5803907980033265831:This address will be assigned to one of the host's network devices and managed automatically.`,sn=$localize`:␟1d7c0e87814804bdc83e7198b0493dab4abe88e4␟1768690392673546919:Defines where the system will assign the managed IPs. Each string value must be a network address.`,rn=$localize`:␟403d8fe6d7ca348b6ad1cc772c3726bb4a0b7eb2␟3138609162743276360:Address ${"\ufffd#6\ufffd\ufffd/#6\ufffd"}:TAG_INPUT:`,ln=$localize`:␟82df6ae3dbb06e5d6be8d590f86774291a8f961c␟7259006207122714212:Destination ${"\ufffd#12\ufffd\ufffd/#12\ufffd"}:TAG_INPUT:`,Bt=$localize`:␟9739656bb5643ced5c52a9aa90588cab8c10852a␟6410945776428459192: This field is required. `,_n=$localize`:␟d7d8f4758f0585115e524dbd23105decd89edc12␟3272703550605329960: Add public address ${"\ufffd#3\ufffd"}:START_TAG__SVG_SVG:${"\ufffd/#3\ufffd"}:CLOSE_TAG__SVG_SVG:`,cn=$localize`:␟d74a4a5716c9ced2179efaf7fdbd5a0e10fe417d␟1588543127313806524:Assign virtual IP addresses that will be managed by the clustering subsystem and may automatically move between nodes running Samba containers.`,[["formDir","ngForm"],["clusterError",""],["authModeError",""],["ugError",""],["labelError",""],["addressError",""],s,d,h,I,$,w,X,J,re,de,ve,Se,$e,Te,ke,rt,xe,Je,Mt,Ye,yt,rn,ln,Bt,_n,cn,["cdsCol","",3,"columnNumbers",4,"ngIf"],["cdsCol","",3,"columnNumbers"],[4,"cdFormLoading"],["name","smbForm","novalidate","",3,"formGroup"],[1,"form-header"],[1,"form-item"],["labelInputID","cluster_id","helperText",n,"cdRequiredField","Cluster Name",3,"disabled","invalid","invalidText"],["cdsText","","type","text","id","cluster_id","formControlName","cluster_id",3,"invalid"],["formControlName","auth_mode","label","Authentication Mode","cdRequiredField","Authentication Mode","id","auth_mode","helperText",t,3,"change","invalid","invalidText","disabled"],["value","active-directory"],["value","user"],["class","form-item",4,"ngIf"],["formArrayName","joinSources",4,"ngFor","ngForOf"],["title","Service specifications"],[4,"ngIf"],[3,"id","formControlName","label","min"],["formArrayName","custom_dns",4,"ngFor","ngForOf"],["cdsButton","tertiary","type","button",3,"click"],["cdsIcon","add","size","32","icon","",1,"cds--btn__icon"],["formControlName","clustering","for","clustering","label","Clustering","id","clustering","helperText",o],[4,"ngFor","ngForOf"],["formArrayName","public_addrs",4,"ngFor","ngForOf"],["wrappingClass","text-right",3,"submitActionEvent","form","submitText"],["class","invalid-feedback",4,"ngIf"],[1,"invalid-feedback"],["cdsCol","",1,"d-flex",3,"columnNumbers"],["labelInputID","domain_settings","cdRequiredField","Domain Settings"],[1,"cds-input-group"],["cdsText","","type","text","id","domain_settings","formControlName","domain_settings",3,"click","value","invalid"],["kind","ghost","size","md",3,"click"],["cdsIcon","edit","size","32","icon","",1,"cds--btn__icon"],["kind","danger","size","md",3,"click"],["cdsIcon","trash-can","size","32","icon","",1,"cds--btn__icon"],["formArrayName","joinSources"],["cdsRow","","class","form-item form-item-append",4,"ngIf"],["cdsRow","",1,"form-item","form-item-append"],["label",Me,3,"formControlName","invalid","invalidText"],[3,"value"],[3,"value",4,"ngFor","ngForOf"],["cdsCol","",1,"item-action-btn","spacing",3,"columnNumbers"],["kind","danger","size","sm",3,"click",4,"ngIf"],["kind","danger","size","sm",3,"click"],["cdsIcon","trash-can","size","32",1,"cds--btn__icon"],["cdsIcon","launch","size","32",1,"cds--btn__icon"],["label","Placement","for","placement","formControlName","placement","id","placement"],["value","hosts"],["value","label"],["type","multi","selectionFeedback","top-after-reopen","label","Label","formControlName","label","id","label","placeholder",mt,"cdRequiredField","Label",3,"selected","appendInline","items","invalid","invalidText"],["type","multi","selectionFeedback","top-after-reopen","label","Hosts","formControlName","hosts","id","hosts","placeholder",vt,3,"selected","appendInline","items"],["formArrayName","custom_dns"],["for","custom_dns"],["cdsText","","placeholder","192.168.76.204",3,"formControlName"],["formArrayName","public_addrs"],[3,"formGroupName"],["for","public_addrs","helperText",Ze,"cdrequiredField","",3,"invalid","invalidText"],["cdsText","","type","text","formControlName","address","placeholder","192.168.4.51/24",3,"invalid"],["for","public_addrs","helperText",sn],["cdsText","","type","text","formControlName","destination","placeholder","192.168.4.0/24"]]},template:function(t,o){1&t&&(e.\u0275\u0275template(0,cO,2,3,"div",32),e.\u0275\u0275pipe(1,"async")),2&t&&e.\u0275\u0275property("ngIf",e.\u0275\u0275pipeBind1(1,1,o.orchStatus$))},dependencies:[l.NgForOf,l.NgIf,y.m,oe.e,UR.e,tt.G,Ge.S,ze.E,ut.P,C.\u0275NgNoValidate,C.NgSelectOption,C.\u0275NgSelectMultipleOption,C.DefaultValueAccessor,C.NgControlStatus,C.NgControlStatusGroup,C.FormGroupDirective,C.FormControlName,C.FormGroupName,C.FormArrayName,D.ColumnDirective,D.RowDirective,D.Select,D.Option,D.TextInputLabelComponent,D.TextInput,D.DropdownList,D.Button,D.IconButton,D.NumberComponent,D.ComboBox,D.IconDirective,l.AsyncPipe,l.TitleCasePipe,Pe.r],styles:[".spacing[_ngcontent-%COMP%]{margin-top:1.5rem}"]})}}var dO=r(22341);const uO=()=>({md:4});function pO(i,n){1&i&&(e.\u0275\u0275elementStart(0,"span",45),e.\u0275\u0275i18n(1,10),e.\u0275\u0275elementEnd())}function mO(i,n){if(1&i&&e.\u0275\u0275template(0,pO,2,0,"span",44),2&i){e.\u0275\u0275nextContext();const t=e.\u0275\u0275reference(2),o=e.\u0275\u0275nextContext();e.\u0275\u0275property("ngIf",o.smbShareForm.showError("share_id",t,"required"))}}function fO(i,n){1&i&&(e.\u0275\u0275elementStart(0,"option",46),e.\u0275\u0275i18n(1,11),e.\u0275\u0275elementEnd())}function EO(i,n){1&i&&(e.\u0275\u0275elementStart(0,"option",46),e.\u0275\u0275i18n(1,12),e.\u0275\u0275elementEnd())}function gO(i,n){if(1&i&&(e.\u0275\u0275elementStart(0,"option",47),e.\u0275\u0275i18n(1,13),e.\u0275\u0275elementEnd()),2&i){const t=n.$implicit;e.\u0275\u0275property("value",t.name),e.\u0275\u0275advance(),e.\u0275\u0275i18nExp(t.name),e.\u0275\u0275i18nApply(1)}}function CO(i,n){1&i&&(e.\u0275\u0275elementStart(0,"span",45),e.\u0275\u0275i18n(1,14),e.\u0275\u0275elementEnd())}function SO(i,n){if(1&i&&e.\u0275\u0275template(0,CO,2,0,"span",44),2&i){e.\u0275\u0275nextContext();const t=e.\u0275\u0275reference(2),o=e.\u0275\u0275nextContext();e.\u0275\u0275property("ngIf",o.smbShareForm.showError("volume",t,"required"))}}function hO(i,n){1&i&&(e.\u0275\u0275elementStart(0,"option",46),e.\u0275\u0275i18n(1,15),e.\u0275\u0275elementEnd())}function TO(i,n){1&i&&(e.\u0275\u0275elementStart(0,"option",46),e.\u0275\u0275i18n(1,16),e.\u0275\u0275elementEnd())}function FO(i,n){if(1&i&&(e.\u0275\u0275elementStart(0,"option",50),e.\u0275\u0275i18n(1,17),e.\u0275\u0275elementEnd()),2&i){const t=n.$implicit,o=e.\u0275\u0275nextContext(3);e.\u0275\u0275property("value",t.name)("selected",t.name===o.smbShareForm.get("subvolume_group").value),e.\u0275\u0275advance(),e.\u0275\u0275i18nExp(t.name),e.\u0275\u0275i18nApply(1)}}function vO(i,n){if(1&i){const t=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"div",27)(1,"cds-select",48),e.\u0275\u0275listener("change",function(){e.\u0275\u0275restoreView(t);const s=e.\u0275\u0275nextContext(2);return e.\u0275\u0275resetView(s.getSubVol())}),e.\u0275\u0275template(2,hO,2,0,"option",31)(3,TO,2,0,"option",31)(4,FO,2,3,"option",49),e.\u0275\u0275elementEnd()()}if(2&i){const t=e.\u0275\u0275nextContext(2);e.\u0275\u0275advance(),e.\u0275\u0275property("skeleton",null===t.allsubvolgrps),e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf",null===t.allsubvolgrps),e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf",null!==t.allsubvolgrps&&t.allsubvolgrps.length>=0),e.\u0275\u0275advance(),e.\u0275\u0275property("ngForOf",t.allsubvolgrps)}}function MO(i,n){1&i&&(e.\u0275\u0275elementStart(0,"option",46),e.\u0275\u0275i18n(1,18),e.\u0275\u0275elementEnd())}function RO(i,n){1&i&&(e.\u0275\u0275elementStart(0,"option",46),e.\u0275\u0275i18n(1,19),e.\u0275\u0275elementEnd())}function OO(i,n){1&i&&(e.\u0275\u0275elementStart(0,"option",46),e.\u0275\u0275i18n(1,20),e.\u0275\u0275elementEnd())}function PO(i,n){if(1&i&&(e.\u0275\u0275elementStart(0,"option",50),e.\u0275\u0275i18n(1,21),e.\u0275\u0275elementEnd()),2&i){const t=n.$implicit,o=e.\u0275\u0275nextContext(3);e.\u0275\u0275property("value",t.name)("selected",t.name===o.smbShareForm.get("subvolume").value),e.\u0275\u0275advance(),e.\u0275\u0275i18nExp(t.name),e.\u0275\u0275i18nApply(1)}}function bO(i,n){if(1&i){const t=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"div",51)(1,"cds-select",52),e.\u0275\u0275listener("change",function(){e.\u0275\u0275restoreView(t);const s=e.\u0275\u0275nextContext(2);return e.\u0275\u0275resetView(s.setSubVolPath())}),e.\u0275\u0275template(2,MO,2,0,"option",31)(3,RO,2,0,"option",31)(4,OO,2,0,"option",31)(5,PO,2,3,"option",49),e.\u0275\u0275elementEnd()()}if(2&i){const t=e.\u0275\u0275nextContext(2);e.\u0275\u0275advance(),e.\u0275\u0275property("skeleton",null===t.allsubvols),e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf",null===t.allsubvols),e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf",null!==t.allsubvols&&0===t.allsubvols.length),e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf",null!==t.allsubvols&&t.allsubvols.length>0),e.\u0275\u0275advance(),e.\u0275\u0275property("ngForOf",t.allsubvols)}}function NO(i,n){1&i&&(e.\u0275\u0275elementStart(0,"span",45),e.\u0275\u0275i18n(1,22),e.\u0275\u0275elementEnd())}function IO(i,n){if(1&i&&e.\u0275\u0275template(0,NO,2,0,"span",44),2&i){e.\u0275\u0275nextContext();const t=e.\u0275\u0275reference(2),o=e.\u0275\u0275nextContext();e.\u0275\u0275property("ngIf",o.smbShareForm.showError("inputPath",t,"required"))}}function AO(i,n){if(1&i){const t=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementContainerStart(0),e.\u0275\u0275elementStart(1,"form",25,0)(3,"div",26),e.\u0275\u0275i18n(4,4),e.\u0275\u0275pipe(5,"titlecase"),e.\u0275\u0275pipe(6,"upperFirst"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(7,"div",27)(8,"cds-text-label",28),e.\u0275\u0275i18nStart(9,5),e.\u0275\u0275element(10,"input",29),e.\u0275\u0275i18nEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275template(11,mO,1,1,"ng-template",null,1,e.\u0275\u0275templateRefExtractor),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(13,"div",27)(14,"cds-select",30),e.\u0275\u0275listener("change",function(){e.\u0275\u0275restoreView(t);const s=e.\u0275\u0275nextContext();return e.\u0275\u0275resetView(s.volumeChangeHandler())}),e.\u0275\u0275template(15,fO,2,0,"option",31)(16,EO,2,0,"option",31)(17,gO,2,2,"option",32),e.\u0275\u0275elementEnd(),e.\u0275\u0275template(18,SO,1,1,"ng-template",null,2,e.\u0275\u0275templateRefExtractor),e.\u0275\u0275elementEnd(),e.\u0275\u0275template(20,vO,5,4,"div",33)(21,bO,6,5,"div",34),e.\u0275\u0275elementStart(22,"div",35)(23,"div",36)(24,"cds-text-label",37),e.\u0275\u0275i18nStart(25,6),e.\u0275\u0275element(26,"input",38),e.\u0275\u0275i18nEnd(),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(27,"div",36)(28,"cds-text-label",39),e.\u0275\u0275i18nStart(29,7),e.\u0275\u0275element(30,"input",40),e.\u0275\u0275i18nEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275template(31,IO,1,1,"ng-template",null,3,e.\u0275\u0275templateRefExtractor),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(33,"div",27)(34,"cds-checkbox",41),e.\u0275\u0275i18nStart(35,8),e.\u0275\u0275element(36,"cd-help-text"),e.\u0275\u0275i18nEnd(),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(37,"div",27)(38,"cds-checkbox",42),e.\u0275\u0275i18nStart(39,9),e.\u0275\u0275element(40,"cd-help-text"),e.\u0275\u0275i18nEnd(),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(41,"cd-form-button-panel",43),e.\u0275\u0275pipe(42,"titlecase"),e.\u0275\u0275pipe(43,"upperFirst"),e.\u0275\u0275listener("submitActionEvent",function(){e.\u0275\u0275restoreView(t);const s=e.\u0275\u0275nextContext();return e.\u0275\u0275resetView(s.submitAction())}),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementContainerEnd()}if(2&i){const t=e.\u0275\u0275reference(12),o=e.\u0275\u0275reference(19),s=e.\u0275\u0275reference(32),d=e.\u0275\u0275nextContext();e.\u0275\u0275advance(),e.\u0275\u0275property("formGroup",d.smbShareForm),e.\u0275\u0275advance(5),e.\u0275\u0275i18nExp(e.\u0275\u0275pipeBind1(5,18,d.action))(e.\u0275\u0275pipeBind1(6,20,d.resource)),e.\u0275\u0275i18nApply(4),e.\u0275\u0275advance(2),e.\u0275\u0275property("invalid",d.smbShareForm.controls.share_id.invalid&&d.smbShareForm.controls.share_id.dirty)("invalidText",t),e.\u0275\u0275advance(2),e.\u0275\u0275property("invalid",d.smbShareForm.controls.share_id.invalid&&d.smbShareForm.controls.share_id.dirty),e.\u0275\u0275advance(4),e.\u0275\u0275property("invalid",d.smbShareForm.controls.volume.invalid&&d.smbShareForm.controls.volume.dirty)("invalidText",o),e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf",0===(null==d.allFsNames?null:d.allFsNames.length)),e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf",null!==d.allFsNames&&(null==d.allFsNames?null:d.allFsNames.length)>0),e.\u0275\u0275advance(),e.\u0275\u0275property("ngForOf",d.allFsNames),e.\u0275\u0275advance(3),e.\u0275\u0275property("ngIf",d.smbShareForm.getValue("volume")),e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf",d.smbShareForm.getValue("volume")),e.\u0275\u0275advance(7),e.\u0275\u0275property("invalid",d.smbShareForm.controls.inputPath.invalid&&d.smbShareForm.controls.inputPath.dirty)("invalidText",s),e.\u0275\u0275advance(2),e.\u0275\u0275property("invalid",d.smbShareForm.controls.inputPath.invalid&&d.smbShareForm.controls.inputPath.dirty),e.\u0275\u0275advance(11),e.\u0275\u0275property("form",d.smbShareForm)("submitText",e.\u0275\u0275pipeBind1(42,22,d.action)+" "+e.\u0275\u0275pipeBind1(43,24,d.resource))}}class Wi extends Ce.g{constructor(n,t,o,s,d,h,I,$,w){super(),this.formBuilder=n,this.smbService=t,this.actionLabels=o,this.nfsService=s,this.subvolgrpService=d,this.subvolService=h,this.taskWrapperService=I,this.router=$,this.route=w,this.allFsNames=[],this.allsubvolgrps=[],this.allsubvols=[],this.isEdit=!1,this.resource=$localize`Share`,this.isEdit=this.router.url.startsWith(`/${zi}/${m.Qp.EDIT}`),this.action=this.isEdit?this.actionLabels.EDIT:this.actionLabels.CREATE}ngOnInit(){this.route.params.subscribe(n=>{this.share_id=n.shareId,this.clusterId=n.clusterId}),this.nfsService.filesystems().subscribe(n=>{this.allFsNames=n}),this.createForm(),this.isEdit&&this.smbService.getShare(this.clusterId,this.share_id).subscribe(n=>{this.shareResponse=n,this.smbShareForm.get("share_id").setValue(this.shareResponse.share_id),this.smbShareForm.get("share_id").disable(),this.smbShareForm.get("volume").setValue(this.shareResponse.cephfs.volume),this.smbShareForm.get("subvolume_group").setValue(this.shareResponse.cephfs.subvolumegroup),this.smbShareForm.get("subvolume").setValue(this.shareResponse.cephfs.subvolume),this.smbShareForm.get("inputPath").setValue(this.shareResponse.cephfs.path),this.shareResponse.readonly&&this.smbShareForm.get("readonly").setValue(this.shareResponse.readonly),this.shareResponse.browseable&&this.smbShareForm.get("browseable").setValue(this.shareResponse.browseable),this.getSubVolGrp(this.shareResponse.cephfs.volume)}),this.loadingReady()}createForm(){this.smbShareForm=this.formBuilder.group({share_id:new C.FormControl("",{validators:[C.Validators.required]}),volume:new C.FormControl("",{validators:[C.Validators.required]}),subvolume_group:new C.FormControl(""),subvolume:new C.FormControl(""),prefixedPath:new C.FormControl({value:"",disabled:!0}),inputPath:new C.FormControl("/",{validators:[C.Validators.required]}),browseable:new C.FormControl(!0),readonly:new C.FormControl(!1)})}volumeChangeHandler(){const n=this.smbShareForm.getValue("volume");this.smbShareForm.patchValue({subvolume_group:"",subvolume:"",prefixedPath:""}),this.allsubvols=[],n&&this.getSubVolGrp(n)}getSubVolGrp(n){this.smbShareForm.patchValue({subvolume_group:"",subvolume:""}),n&&this.subvolgrpService.get(n).subscribe(t=>{if(this.allsubvolgrps=t,this.isEdit){const o=this.shareResponse.cephfs.subvolumegroup;if(o&&n===this.shareResponse.cephfs.volume){const s=this.allsubvolgrps.find(d=>d.name===o);s&&(this.smbShareForm.get("subvolume_group").setValue(s.name),this.getSubVol())}}})}getSubVol(){var n=this;return(0,Mn.A)(function*(){const t=n.smbShareForm.getValue("volume"),o=n.smbShareForm.getValue("subvolume_group");n.smbShareForm.patchValue({subvolume:"",prefixedPath:""}),n.allsubvols=[],t&&o&&(yield n.setSubVolPath(),n.subvolService.get(t,o,!1).subscribe(s=>{if(n.allsubvols=s,n.isEdit){const d=n.shareResponse.cephfs.subvolume;if(d&&n.shareResponse.cephfs.subvolumegroup){const h=n.allsubvols.find(I=>I.name===d);h&&(n.smbShareForm.get("subvolume").setValue(h.name),n.setSubVolPath())}}}))})()}setSubVolPath(){return new Promise((n,t)=>{const o=this.smbShareForm.getValue("volume"),s=this.smbShareForm.getValue("subvolume_group")||"",d=this.smbShareForm.getValue("subvolume");this.subvolService.info(o,d,s).pipe((0,v.map)(h=>h.path)).subscribe(h=>{this.updatePath(h),n()},h=>t(h))})}updatePath(n){this.smbShareForm.patchValue({prefixedPath:n})}buildRequest(){const n=p().cloneDeep(this.smbShareForm.value),t=n.inputPath,o=this.smbShareForm.get("share_id")?.value;return{share_resource:{resource_type:"ceph.smb.share",cluster_id:this.clusterId,share_id:o,cephfs:{volume:n.volume,path:t,subvolumegroup:n.subvolume_group,subvolume:n.subvolume,provider:"samba-vfs"},browseable:n.browseable,readonly:n.readonly}}}submitAction(){this.isEdit?this.handleTaskRequest(m.Qp.EDIT):this.handleTaskRequest(m.Qp.CREATE)}handleTaskRequest(n){const t=this.buildRequest(),o=this,s=this.smbShareForm.get("share_id").value;this.taskWrapperService.wrapTaskAroundCall({task:new q.O(`${zi}/${n}`,{share_id:s}),call:this.smbService.createShare(t)}).subscribe({complete:()=>{this.router.navigate([Wo])},error:()=>{o.smbShareForm.setErrors({cdSubmitButton:!0})}})}static{this.\u0275fac=function(t){return new(t||Wi)(e.\u0275\u0275directiveInject(Dt.$),e.\u0275\u0275directiveInject(Vt),e.\u0275\u0275directiveInject(m.Ss),e.\u0275\u0275directiveInject(dO.Z),e.\u0275\u0275directiveInject(It.W),e.\u0275\u0275directiveInject(Qt.v),e.\u0275\u0275directiveInject(B.a),e.\u0275\u0275directiveInject(u.Router),e.\u0275\u0275directiveInject(u.ActivatedRoute))}}static{this.\u0275cmp=e.\u0275\u0275defineComponent({type:Wi,selectors:[["cd-smb-share-form"]],features:[e.\u0275\u0275InheritDefinitionFeature],decls:2,vars:3,consts:()=>{let n,t,o,s,d,h,I,$,w,X,J,re,de,Me,ve,Se,$e,Te,ke,rt,mt,xe;return n=$localize`:␟b2987c3fe9ec7f1fc15b80e49702b97e0c976826␟5076580982884091652:Unique share identifier`,t=$localize`:␟796e42bec8a6996607cf1f3e80235b86d695804a␟434404492084234684:Volume`,o=$localize`:form title␟1ba7de58697f500e9c007c9fcbfb7941dc7e31bf␟2710086666908884806: ${"\ufffd0\ufffd"}:INTERPOLATION: ${"\ufffd1\ufffd"}:INTERPOLATION_1: `,s=$localize`:␟36cd840c40e22cae38cac3b016f76d3653cb58b1␟3072099684302211378:Share Name ${"\ufffd#10\ufffd\ufffd/#10\ufffd"}:TAG_INPUT:`,d=$localize`:␟f5028fe3044b29de271195f82d6b432e90dcfdbb␟6218961307654229597:Prefixed Path ${"\ufffd#26\ufffd\ufffd/#26\ufffd"}:TAG_INPUT:`,h=$localize`:␟d974edd82bdff3f410dd7945fc74988db425b258␟2660954174169239815:Input Path ${"\ufffd#30\ufffd\ufffd/#30\ufffd"}:TAG_INPUT:`,I=$localize`:␟cae9a59c0d03ebc75927a86566267357f533a1b0␟1893808613013205416:Browseable ${"\ufffd#36\ufffd"}:START_TAG_CD_HELP_TEXT:If selected the share will be included in share listings visible to clients.${"\ufffd/#36\ufffd"}:CLOSE_TAG_CD_HELP_TEXT:`,$=$localize`:␟098141e1f8c43f39fae77380af235f74df4b437d␟4547382881140984593:Readonly ${"\ufffd#40\ufffd"}:START_TAG_CD_HELP_TEXT:If selected no clients are permitted to write to the share.${"\ufffd/#40\ufffd"}:CLOSE_TAG_CD_HELP_TEXT:`,w=$localize`:␟7cbdabcece469fab89cfa687ab152bca18b97498␟1417693714872528491:This field is required.`,X=$localize`:␟ff3ec73af627306363fb3581634bf67c1847b838␟3086112051114251192: -- No filesystem available -- `,J=$localize`:␟0525dba7fa5f04596604921fd9911f068393d0be␟127552433558763760: -- Select the filesystem -- `,re=$localize`:␟f48922c15168cb5c499ce170cd899352fb9fdc2b␟4927005754691217481: ${"\ufffd0\ufffd"}:INTERPOLATION: `,de=$localize`:␟7cbdabcece469fab89cfa687ab152bca18b97498␟1417693714872528491:This field is required.`,Me=$localize`:␟5df1e615defb3b6ae1702413f98abc49b84cd2d0␟7871454229448491365:Subvolume Group`,ve=$localize`:␟94516fa213706c67ce5a5b5765681d7fb032033a␟3894950702316166331:Loading...`,Se=$localize`:␟f622ad2788eb707c23a1bef5cd6e67b39c0531fb␟465534890939031674: -- Select the CephFS subvolume group -- `,$e=$localize`:␟6a80b80c8e9ed38708bd812c0499e0ee71627f98␟6337909307217858513: ${"\ufffd0\ufffd"}:INTERPOLATION: `,Te=$localize`:␟94516fa213706c67ce5a5b5765681d7fb032033a␟3894950702316166331:Loading...`,ke=$localize`:␟0dc1bc118acec4eb474752c6e17cb73824bf9688␟7149832043220069159: -- No SMB subvolume available -- `,rt=$localize`:␟85a76fd0f6f0c8054ec70b056c687a622caf8b3f␟7014057842306829986: -- Select the SMB subvolume -- `,mt=$localize`:␟293a5f6b11f6c938a4f6fc6c8c94dcf18c53fb58␟3244881336408261036: ${"\ufffd0\ufffd"}:INTERPOLATION: `,xe=$localize`:␟7cbdabcece469fab89cfa687ab152bca18b97498␟1417693714872528491:This field is required.`,[["formDir","ngForm"],["shareError",""],["volumeError",""],["pathError",""],o,s,d,h,I,$,w,X,J,re,de,ve,Se,$e,Te,ke,rt,mt,xe,["cdsCol","",3,"columnNumbers"],[4,"cdFormLoading"],["name","smbShareForm","novalidate","",3,"formGroup"],[1,"form-header"],[1,"form-item"],["labelInputID","share_id","helperText",n,"cdRequiredField","Share Name",3,"invalid","invalidText"],["cdsText","","type","text","id","share_id","formControlName","share_id",3,"invalid"],["formControlName","volume","label",t,"cdRequiredField","Volume","id","volume",3,"change","invalid","invalidText"],["value","",4,"ngIf"],[3,"value",4,"ngFor","ngForOf"],["class","form-item",4,"ngIf"],["class","form-group row",4,"ngIf"],["cdsRow","",1,"form-item","form-item-append"],["cdsCol",""],["labelInputID","prefixedPath","helperText","A path is a relative path."],["cdsText","","type","text","id","prefixedPath","formControlName","prefixedPath"],["labelInputID","inputPath","helperText","A relative path in a cephFS file system.","cdRequiredField","Path",3,"invalid","invalidText"],["cdsText","","type","text","id","inputPath","formControlName","inputPath",3,"invalid"],["id","browseable","formControlName","browseable"],["id","readonly","formControlName","readonly"],["wrappingClass","text-right",3,"submitActionEvent","form","submitText"],["class","invalid-feedback",4,"ngIf"],[1,"invalid-feedback"],["value",""],[3,"value"],["formControlName","subvolume_group","label",Me,"id","subvolume_group",3,"change","skeleton"],[3,"value","selected",4,"ngFor","ngForOf"],[3,"value","selected"],[1,"form-group","row"],["formControlName","subvolume","label","Subvolume","id","subvolume",3,"change","skeleton"]]},template:function(t,o){1&t&&(e.\u0275\u0275elementStart(0,"div",23),e.\u0275\u0275template(1,AO,44,26,"ng-container",24),e.\u0275\u0275elementEnd()),2&t&&(e.\u0275\u0275property("columnNumbers",e.\u0275\u0275pureFunction0(2,uO)),e.\u0275\u0275advance(),e.\u0275\u0275property("cdFormLoading",o.loading))},dependencies:[l.NgForOf,l.NgIf,oe.e,it.O,tt.G,Ge.S,Ve.C,ze.E,ut.P,C.\u0275NgNoValidate,C.NgSelectOption,C.\u0275NgSelectMultipleOption,C.DefaultValueAccessor,C.NgControlStatus,C.NgControlStatusGroup,C.FormGroupDirective,C.FormControlName,D.ColumnDirective,D.RowDirective,D.Select,D.Option,D.TextInputLabelComponent,D.TextInput,D.Checkbox,l.TitleCasePipe,Pe.r]})}}var d_=r(2087);const DO=()=>({md:4});function yO(i,n){1&i&&(e.\u0275\u0275elementStart(0,"span",25),e.\u0275\u0275i18n(1,8),e.\u0275\u0275elementEnd())}function LO(i,n){if(1&i&&e.\u0275\u0275template(0,yO,2,0,"span",24),2&i){const t=e.\u0275\u0275nextContext();e.\u0275\u0275property("ngIf",t.form.showError("authId",t.form,"required"))}}function $O(i,n){1&i&&(e.\u0275\u0275elementStart(0,"span",25),e.\u0275\u0275i18n(1,9),e.\u0275\u0275elementEnd())}function xO(i,n){if(1&i&&e.\u0275\u0275template(0,$O,2,0,"span",24),2&i){const t=e.\u0275\u0275nextContext();e.\u0275\u0275property("ngIf",t.form.showError("username",t.form,"required"))}}function UO(i,n){1&i&&(e.\u0275\u0275elementStart(0,"span",25),e.\u0275\u0275i18n(1,10),e.\u0275\u0275elementEnd())}function wO(i,n){if(1&i&&e.\u0275\u0275template(0,UO,2,0,"span",24),2&i){const t=e.\u0275\u0275nextContext();e.\u0275\u0275property("ngIf",t.form.showError("password",t.form,"required"))}}function GO(i,n){if(1&i&&(e.\u0275\u0275elementStart(0,"option",27),e.\u0275\u0275text(1),e.\u0275\u0275elementEnd()),2&i){const t=n.$implicit;e.\u0275\u0275property("value",t.cluster_id),e.\u0275\u0275advance(),e.\u0275\u0275textInterpolate(t.cluster_id)}}function HO(i,n){if(1&i&&(e.\u0275\u0275elementStart(0,"div",15)(1,"cds-select",26)(2,"option",27),e.\u0275\u0275i18n(3,11),e.\u0275\u0275elementEnd(),e.\u0275\u0275template(4,GO,2,2,"option",28),e.\u0275\u0275elementEnd()()),2&i){const t=n.ngIf;e.\u0275\u0275advance(2),e.\u0275\u0275property("value",null),e.\u0275\u0275advance(2),e.\u0275\u0275property("ngForOf",t)}}class Ki extends Ce.g{constructor(n,t,o,s,d,h,I){super(),this.actionLabels=n,this.taskWrapperService=t,this.formBuilder=o,this.smbService=s,this.router=d,this.route=h,this.location=I,this.icons=g.FI,this.editing=this.router.url.startsWith(`/${Bi}/${m.Qp.EDIT}`),this.resource=$localize`Active directory (AD) access resource`}ngOnInit(){if(this.action=this.actionLabels.CREATE,this.smbClusters$=this.smbService.listClusters(),this.createForm(),this.editing){let n;this.action=this.actionLabels.UPDATE,this.form.get("authId").disable(),this.route.params.subscribe(t=>{n=t.authId}),this.smbService.getJoinAuth(n).subscribe(t=>{this.form.get("authId").setValue(t.auth_id),this.form.get("username").setValue(t.auth.username),this.form.get("password").setValue(t.auth.password),this.form.get("linkedToCluster").setValue(t.linked_to_cluster)})}}createForm(){this.form=this.formBuilder.group({authId:new C.FormControl("",{validators:[C.Validators.required]}),username:new C.FormControl("",{validators:[C.Validators.required]}),password:new C.FormControl("",{validators:[C.Validators.required]}),linkedToCluster:new C.FormControl(null)})}submit(){const n=this.form.getValue("authId"),d={resource_type:"ceph.smb.join.auth",auth_id:n,auth:{username:this.form.getValue("username"),password:this.form.getValue("password")},linked_to_cluster:this.form.getValue("linkedToCluster")},h=this;let I=`${Bi}/${this.editing?m.Qp.EDIT:m.Qp.CREATE}`;this.taskWrapperService.wrapTaskAroundCall({task:new q.O(I,{authId:n}),call:this.smbService.createJoinAuth(d)}).subscribe({error(){h.form.setErrors({cdSubmitButton:!0})},complete:()=>{this.location.back()}})}static{this.\u0275fac=function(t){return new(t||Ki)(e.\u0275\u0275directiveInject(m.Ss),e.\u0275\u0275directiveInject(B.a),e.\u0275\u0275directiveInject(Dt.$),e.\u0275\u0275directiveInject(Vt),e.\u0275\u0275directiveInject(u.Router),e.\u0275\u0275directiveInject(u.ActivatedRoute),e.\u0275\u0275directiveInject(l.Location))}}static{this.\u0275cmp=e.\u0275\u0275defineComponent({type:Ki,selectors:[["cd-smb-join-auth-form"]],features:[e.\u0275\u0275InheritDefinitionFeature],decls:30,vars:27,consts:()=>{let n,t,o,s,d,h,I,$,w,X,J;return n=$localize`:␟82d34d54f1ea7de52b884a999d0a137d37117857␟4428221823397382435:Unique identifier`,t=$localize`:form title␟d60e1082e26ae4e941496b9eb5159f11884ebbea␟4121622089917993051: ${"\ufffd0\ufffd"}:INTERPOLATION: ${"\ufffd1\ufffd"}:INTERPOLATION_1: `,o=$localize`:␟4dcacddd1842570a0f95c9045d06c32bc55bdbe5␟6358454702773190484:Active directory access resource name ${"\ufffd#10\ufffd\ufffd/#10\ufffd"}:TAG_INPUT:`,s=$localize`:␟d7f2e99bb2c5518ecffc9eab1d3be0725ab2d8d3␟1406935024394251620:Username ${"\ufffd#16\ufffd\ufffd/#16\ufffd"}:TAG_INPUT:`,d=$localize`:␟df54111cf27035920a5309fb41463bf12d43dd71␟2415263773913506633:Password ${"\ufffd#22\ufffd\ufffd/#22\ufffd"}:TAG_INPUT:`,h=$localize`:␟7cbdabcece469fab89cfa687ab152bca18b97498␟1417693714872528491:This field is required.`,I=$localize`:␟bd48784de86aedc1d532eebf256712fbaad637b9␟6458079475653544585:This field is required. `,$=$localize`:␟bd48784de86aedc1d532eebf256712fbaad637b9␟6458079475653544585:This field is required. `,w=$localize`:␟36c33f15120990ef797f0872d103298465668134␟1244333495777619029:Linked to cluster`,X=$localize`:␟134099720bc6138a8c2926ab35b9e97aedc6129d␟2357065464307851329:This resource may only be used with the linked cluster and will automatically be removed when the linked cluster is removed.`,J=$localize`:␟c3222c9d6f55ef51818000c4e61da930836f17c8␟8816186728382148320:-- List of clusters -- `,[["formDir","ngForm"],["jaError",""],["usernameError",""],["passwordError",""],t,o,s,d,h,I,$,J,["cdsCol","",3,"columnNumbers"],["name","form","novalidate","",3,"formGroup"],[1,"form-header"],[1,"form-item"],["for","authId","helperText",n,3,"invalid","invalidText"],["cdsText","","type","text","id","authId","name","authId","formControlName","authId",3,"invalid"],["for","username",3,"invalid","invalidText"],["cdsText","","type","text","id","username","name","username","formControlName","username",3,"invalid"],["for","password",3,"invalid","invalidText"],["cdsPassword","","type","password","id","password","name","password","formControlName","password",3,"invalid"],["class","form-item",4,"ngIf"],["wrappingClass","text-right",3,"submitActionEvent","form","submitText"],["class","invalid-feedback",4,"ngIf"],[1,"invalid-feedback"],["label",w,"formControlName","linkedToCluster","name","linkedToCluster","cdOptionalField","Linked to cluster","helperText",X],[3,"value"],[3,"value",4,"ngFor","ngForOf"]]},template:function(t,o){if(1&t){const s=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"div",12)(1,"form",13,0)(3,"div",14),e.\u0275\u0275i18n(4,4),e.\u0275\u0275pipe(5,"titlecase"),e.\u0275\u0275pipe(6,"upperFirst"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(7,"div",15)(8,"cds-text-label",16),e.\u0275\u0275i18nStart(9,5),e.\u0275\u0275element(10,"input",17),e.\u0275\u0275i18nEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275template(11,LO,1,1,"ng-template",null,1,e.\u0275\u0275templateRefExtractor),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(13,"div",15)(14,"cds-text-label",18),e.\u0275\u0275i18nStart(15,6),e.\u0275\u0275element(16,"input",19),e.\u0275\u0275i18nEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275template(17,xO,1,1,"ng-template",null,2,e.\u0275\u0275templateRefExtractor),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(19,"div",15)(20,"cds-password-label",20),e.\u0275\u0275i18nStart(21,7),e.\u0275\u0275element(22,"input",21),e.\u0275\u0275i18nEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275template(23,wO,1,1,"ng-template",null,3,e.\u0275\u0275templateRefExtractor),e.\u0275\u0275elementEnd(),e.\u0275\u0275template(25,HO,5,2,"div",22),e.\u0275\u0275pipe(26,"async"),e.\u0275\u0275elementStart(27,"cd-form-button-panel",23),e.\u0275\u0275pipe(28,"titlecase"),e.\u0275\u0275pipe(29,"upperFirst"),e.\u0275\u0275listener("submitActionEvent",function(){return e.\u0275\u0275restoreView(s),e.\u0275\u0275resetView(o.submit())}),e.\u0275\u0275elementEnd()()()}if(2&t){const s=e.\u0275\u0275reference(12),d=e.\u0275\u0275reference(18),h=e.\u0275\u0275reference(24);e.\u0275\u0275property("columnNumbers",e.\u0275\u0275pureFunction0(26,DO)),e.\u0275\u0275advance(),e.\u0275\u0275property("formGroup",o.form),e.\u0275\u0275advance(5),e.\u0275\u0275i18nExp(e.\u0275\u0275pipeBind1(5,16,o.action))(e.\u0275\u0275pipeBind1(6,18,o.resource)),e.\u0275\u0275i18nApply(4),e.\u0275\u0275advance(2),e.\u0275\u0275property("invalid",o.form.controls.authId.invalid&&o.form.controls.authId.dirty)("invalidText",s),e.\u0275\u0275advance(2),e.\u0275\u0275property("invalid",o.form.controls.authId.invalid&&o.form.controls.authId.dirty),e.\u0275\u0275advance(4),e.\u0275\u0275property("invalid",o.form.controls.username.invalid&&o.form.controls.username.dirty)("invalidText",d),e.\u0275\u0275advance(2),e.\u0275\u0275property("invalid",o.form.controls.username.invalid&&o.form.controls.username.dirty),e.\u0275\u0275advance(4),e.\u0275\u0275property("invalid",o.form.controls.password.invalid&&o.form.controls.password.dirty)("invalidText",h),e.\u0275\u0275advance(2),e.\u0275\u0275property("invalid",o.form.controls.password.invalid&&o.form.controls.password.dirty),e.\u0275\u0275advance(3),e.\u0275\u0275property("ngIf",e.\u0275\u0275pipeBind1(26,20,o.smbClusters$)),e.\u0275\u0275advance(2),e.\u0275\u0275property("form",o.form)("submitText",e.\u0275\u0275pipeBind1(28,22,o.action)+" "+e.\u0275\u0275pipeBind1(29,24,o.resource))}},dependencies:[l.NgForOf,l.NgIf,oe.e,Ge.S,ze.E,d_.O,C.\u0275NgNoValidate,C.NgSelectOption,C.\u0275NgSelectMultipleOption,C.DefaultValueAccessor,C.NgControlStatus,C.NgControlStatusGroup,C.FormGroupDirective,C.FormControlName,D.ColumnDirective,D.Select,D.Option,D.TextInputLabelComponent,D.PasswordInputLabelComponent,D.TextInput,D.PasswordInput,l.AsyncPipe,l.TitleCasePipe,Pe.r]})}}const VO=()=>({md:4}),BO=()=>["yaml","json"],u_=()=>({lg:7}),p_=()=>({lg:1}),zO=()=>({lg:14});function XO(i,n){if(1&i){const t=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"cds-file-uploader",28),e.\u0275\u0275listener("filesChange",function(s){e.\u0275\u0275restoreView(t);const d=e.\u0275\u0275nextContext();return e.\u0275\u0275resetView(d.smbService.uploadData(s))}),e.\u0275\u0275elementEnd()}2&i&&e.\u0275\u0275property("accept",e.\u0275\u0275pureFunction0(2,BO))("multiple",!1)}function kO(i,n){1&i&&(e.\u0275\u0275elementStart(0,"span",30),e.\u0275\u0275i18n(1,8),e.\u0275\u0275elementEnd())}function jO(i,n){if(1&i&&e.\u0275\u0275template(0,kO,2,0,"span",29),2&i){const t=e.\u0275\u0275nextContext();e.\u0275\u0275property("ngIf",t.form.showError("usersGroupsId",t.form,"required"))}}function WO(i,n){if(1&i&&(e.\u0275\u0275elementStart(0,"option",32),e.\u0275\u0275text(1),e.\u0275\u0275elementEnd()),2&i){const t=n.$implicit;e.\u0275\u0275property("value",t.cluster_id),e.\u0275\u0275advance(),e.\u0275\u0275textInterpolate1("",t.cluster_id," ")}}function KO(i,n){if(1&i&&(e.\u0275\u0275elementStart(0,"div",19)(1,"cds-select",31)(2,"option",32),e.\u0275\u0275i18n(3,9),e.\u0275\u0275elementEnd(),e.\u0275\u0275template(4,WO,2,2,"option",33),e.\u0275\u0275elementEnd()()),2&i){const t=n.ngIf;e.\u0275\u0275advance(2),e.\u0275\u0275property("value",null),e.\u0275\u0275advance(2),e.\u0275\u0275property("ngForOf",t)}}function QO(i,n){1&i&&(e.\u0275\u0275elementStart(0,"span",30),e.\u0275\u0275i18n(1,12),e.\u0275\u0275elementEnd())}function YO(i,n){1&i&&(e.\u0275\u0275elementStart(0,"span",30),e.\u0275\u0275i18n(1,13),e.\u0275\u0275elementEnd())}function JO(i,n){if(1&i){const t=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"cds-icon-button",43),e.\u0275\u0275listener("click",function(){e.\u0275\u0275restoreView(t);const s=e.\u0275\u0275nextContext().index,d=e.\u0275\u0275nextContext();return e.\u0275\u0275resetView(d.removeUser(s))}),e.\u0275\u0275namespaceSVG(),e.\u0275\u0275element(1,"svg",44),e.\u0275\u0275elementEnd()}}function ZO(i,n){if(1&i&&(e.\u0275\u0275elementContainerStart(0,34)(1,35),e.\u0275\u0275elementStart(2,"div",36)(3,"div",15)(4,"cds-text-label",37),e.\u0275\u0275i18nStart(5,10),e.\u0275\u0275element(6,"input",38),e.\u0275\u0275i18nEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275template(7,QO,2,0,"ng-template",null,2,e.\u0275\u0275templateRefExtractor),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(9,"div",15)(10,"cds-password-label",39),e.\u0275\u0275i18nStart(11,11),e.\u0275\u0275element(12,"input",40),e.\u0275\u0275i18nEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275template(13,YO,2,0,"ng-template",null,3,e.\u0275\u0275templateRefExtractor),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(15,"div",41),e.\u0275\u0275template(16,JO,2,0,"cds-icon-button",42),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementContainerEnd()()),2&i){const t=n.index,o=e.\u0275\u0275reference(8),s=e.\u0275\u0275reference(14),d=e.\u0275\u0275nextContext();e.\u0275\u0275advance(),e.\u0275\u0275property("formGroupName",t),e.\u0275\u0275advance(2),e.\u0275\u0275property("columnNumbers",e.\u0275\u0275pureFunction0(11,u_)),e.\u0275\u0275advance(),e.\u0275\u0275property("invalid",d.form.controls.users.controls[t].controls.name.invalid&&d.form.controls.users.controls[t].controls.name.dirty)("invalidText",o),e.\u0275\u0275advance(2),e.\u0275\u0275property("invalid",d.form.controls.users.controls[t].controls.name.invalid&&d.form.controls.users.controls[t].controls.name.dirty),e.\u0275\u0275advance(3),e.\u0275\u0275property("columnNumbers",e.\u0275\u0275pureFunction0(12,u_)),e.\u0275\u0275advance(),e.\u0275\u0275property("invalid",d.form.controls.users.controls[t].controls.password.invalid&&d.form.controls.users.controls[t].controls.password.dirty)("invalidText",s),e.\u0275\u0275advance(2),e.\u0275\u0275property("invalid",d.form.controls.users.controls[t].controls.password.invalid&&d.form.controls.users.controls[t].controls.password.dirty),e.\u0275\u0275advance(3),e.\u0275\u0275property("columnNumbers",e.\u0275\u0275pureFunction0(13,p_)),e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf",t>0)}}function qO(i,n){if(1&i){const t=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementContainerStart(0,45)(1,35),e.\u0275\u0275elementStart(2,"div",36)(3,"div",15)(4,"cds-text-label",46),e.\u0275\u0275i18nStart(5,14),e.\u0275\u0275element(6,"input",47),e.\u0275\u0275i18nEnd(),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(7,"div",41)(8,"cds-icon-button",43),e.\u0275\u0275listener("click",function(){const s=e.\u0275\u0275restoreView(t).index,d=e.\u0275\u0275nextContext();return e.\u0275\u0275resetView(d.removeGroup(s))}),e.\u0275\u0275namespaceSVG(),e.\u0275\u0275element(9,"svg",44),e.\u0275\u0275elementEnd()()(),e.\u0275\u0275elementContainerEnd()()}if(2&i){const t=n.index;e.\u0275\u0275advance(),e.\u0275\u0275property("formGroupName",t),e.\u0275\u0275advance(2),e.\u0275\u0275property("columnNumbers",e.\u0275\u0275pureFunction0(3,zO)),e.\u0275\u0275advance(4),e.\u0275\u0275property("columnNumbers",e.\u0275\u0275pureFunction0(4,p_))}}class Qi extends Ce.g{constructor(n,t,o,s,d,h,I,$){super(),this.actionLabels=n,this.taskWrapperService=t,this.formBuilder=o,this.smbService=s,this.router=d,this.cd=h,this.route=I,this.location=$,this.icons=g.FI,this.hideUploader=!1,this.uploadedData=(0,e.computed)(()=>this.smbService.dataUploader()),this.editing=this.router.url.startsWith(`/${ki}/${m.Qp.EDIT}`),this.resource=$localize`users and groups access resource`,(0,e.effect)(()=>{const w=this.uploadedData();w&&(this.fillForm(w),this.hideUploader=!0)})}ngOnInit(){if(this.action=this.actionLabels.CREATE,this.smbClusters$=this.smbService.listClusters(),this.createForm(),this.editing){let n;this.action=this.actionLabels.UPDATE,this.form.get("usersGroupsId").disable(),this.route.params.subscribe(t=>{n=t.usersGroupsId}),this.smbService.getUsersGroups(n).subscribe(t=>{this.fillForm(t)})}else this.addUser()}ngOnDestroy(){this.smbService.setDataUploaded(null)}fillForm(n){this.form.get("usersGroupsId").setValue(n.users_groups_id),this.form.get("linkedToCluster").setValue(n.linked_to_cluster),this.users.controls.forEach(t=>{!t.controls.name.value&&t.controls.password&&(t.patchValue({name:n.values.users[0].name,password:n.values.users[0].password}),n.values.users.shift())}),this.groups.controls.forEach(t=>{t.controls.name.value||(t.patchValue({name:n.values.users[0].name}),n.values.groups.shift())}),n.values.users.forEach(t=>{this.addUser(t)}),n.values.groups.forEach(t=>{this.addGroup(t)})}createForm(){this.form=this.formBuilder.group({usersGroupsId:new C.FormControl("",{validators:[C.Validators.required]}),linkedToCluster:new C.FormControl(null),users:new C.FormArray([]),groups:new C.FormArray([])})}submit(){const n=this.form.getValue("usersGroupsId"),t=this.form.getValue("linkedToCluster"),d={resource_type:"ceph.smb.usersgroups",users_groups_id:n,values:{users:this.form.getValue("users"),groups:this.form.getValue("groups")},linked_to_cluster:t},h=this;let I=`${ki}/${this.editing?m.Qp.EDIT:m.Qp.CREATE}`;this.taskWrapperService.wrapTaskAroundCall({task:new q.O(I,{usersGroupsId:n}),call:this.smbService.createUsersGroups(d)}).subscribe({error(){h.form.setErrors({cdSubmitButton:!0})},complete:()=>{this.location.back()}})}get users(){return this.form.get("users")}get groups(){return this.form.get("groups")}newUser(n){return this.formBuilder.group({name:[n?n.name:"",C.Validators.required],password:[n?n.password:"",[C.Validators.required]]})}newGroup(n){return this.formBuilder.group({name:[n?n.name:""]})}addUser(n){this.users.push(this.newUser(n))}addGroup(n){this.groups.push(this.newGroup(n))}removeUser(n){this.users.removeAt(n),this.cd.detectChanges()}removeGroup(n){this.groups.removeAt(n),this.cd.detectChanges()}static{this.\u0275fac=function(t){return new(t||Qi)(e.\u0275\u0275directiveInject(m.Ss),e.\u0275\u0275directiveInject(B.a),e.\u0275\u0275directiveInject(Dt.$),e.\u0275\u0275directiveInject(Vt),e.\u0275\u0275directiveInject(u.Router),e.\u0275\u0275directiveInject(e.ChangeDetectorRef),e.\u0275\u0275directiveInject(u.ActivatedRoute),e.\u0275\u0275directiveInject(l.Location))}}static{this.\u0275cmp=e.\u0275\u0275defineComponent({type:Qi,selectors:[["cd-smb-usersgroups-form"]],features:[e.\u0275\u0275InheritDefinitionFeature],decls:29,vars:23,consts:()=>{let n,t,o,s,d,h,I,$,w,X,J,re,de,Me,ve,Se,$e;return n=$localize`:␟5ad17b1183ea785002dda9b4495fabab47ae814c␟7820947219007649553:Upload Users and Groups`,t=$localize`:␟59e7be21e7c147f7709848c665a2cd1fcb811f34␟8807743287021792989:only .json and .yaml files are supported`,o=$localize`:␟675dab3b559a01440aad8b72638199c3211a9152␟7885408875388628440:Add from file`,s=$localize`:␟82d34d54f1ea7de52b884a999d0a137d37117857␟4428221823397382435:Unique identifier`,d=$localize`:form title␟d60e1082e26ae4e941496b9eb5159f11884ebbea␟4121622089917993051: ${"\ufffd0\ufffd"}:INTERPOLATION: ${"\ufffd1\ufffd"}:INTERPOLATION_1: `,h=$localize`:␟54f93278f38dae5e80271c72bac0321075d9fc7c␟7115311400636669914:Users and groups access resource name ${"\ufffd#11\ufffd\ufffd/#11\ufffd"}:TAG_INPUT:`,I=$localize`:␟0507fe6d2ed358766623b49143991d150adc5491␟3109538967934605984:Add User ${"\ufffd#20\ufffd"}:START_TAG__SVG_SVG:${"\ufffd/#20\ufffd"}:CLOSE_TAG__SVG_SVG:`,$=$localize`:␟edf78a4446f9878a2ea7f90c798fedbe06066996␟5179296423728659644: Add Group ${"\ufffd#25\ufffd"}:START_TAG__SVG_SVG:${"\ufffd/#25\ufffd"}:CLOSE_TAG__SVG_SVG:`,w=$localize`:␟7cbdabcece469fab89cfa687ab152bca18b97498␟1417693714872528491:This field is required.`,X=$localize`:␟36c33f15120990ef797f0872d103298465668134␟1244333495777619029:Linked to cluster`,J=$localize`:␟134099720bc6138a8c2926ab35b9e97aedc6129d␟2357065464307851329:This resource may only be used with the linked cluster and will automatically be removed when the linked cluster is removed.`,re=$localize`:␟c3222c9d6f55ef51818000c4e61da930836f17c8␟8816186728382148320:-- List of clusters -- `,de=$localize`:␟6a4f65c3c6527f3e592b547e401cad892f7d3fa8␟3679069228155622543:Username ${"\ufffd#6\ufffd\ufffd/#6\ufffd"}:TAG_INPUT:`,Me=$localize`:␟a72d1407213409af9f1add0bb096da5980c8953c␟7523990069347670255:Password ${"\ufffd#12\ufffd\ufffd/#12\ufffd"}:TAG_INPUT:`,ve=$localize`:␟7cbdabcece469fab89cfa687ab152bca18b97498␟1417693714872528491:This field is required.`,Se=$localize`:␟7cbdabcece469fab89cfa687ab152bca18b97498␟1417693714872528491:This field is required.`,$e=$localize`:␟aa2640fef0b9a5878c0afb7be533fa2a666cf062␟4115773452539537260:Group ${"\ufffd#6\ufffd\ufffd/#6\ufffd"}:TAG_INPUT:`,[["formDir","ngForm"],["usersgroupsError",""],["usersNameError",""],["usersPasswordError",""],d,h,I,$,w,re,de,Me,ve,Se,$e,["cdsCol","",3,"columnNumbers"],["name","form","novalidate","",3,"formGroup"],[1,"form-header"],["title",n,"description",t,"buttonText",o,"buttonType","primary","size","md",3,"accept","multiple","filesChange",4,"ngIf"],[1,"form-item"],["for","usersGroupsId","helperText",s,3,"invalid","invalidText"],["cdsText","","type","text","id","usersGroupsId","name","usersGroupsId","formControlName","usersGroupsId"],["class","form-item",4,"ngIf"],["formArrayName","users",4,"ngFor","ngForOf"],["cdsButton","tertiary","type","button",3,"click"],["cdsIcon","add","size","32","icon","",1,"cds--btn__icon"],["formArrayName","groups",4,"ngFor","ngForOf"],["wrappingClass","text-right",3,"submitActionEvent","form","submitText"],["title",n,"description",t,"buttonText",o,"buttonType","primary","size","md",3,"filesChange","accept","multiple"],["class","invalid-feedback",4,"ngIf"],[1,"invalid-feedback"],["label",X,"formControlName","linkedToCluster","name","linkedToCluster","helperText",J,"cdOptionalField","Linked to cluster"],[3,"value"],[3,"value",4,"ngFor","ngForOf"],["formArrayName","users"],[3,"formGroupName"],["cdsRow","",1,"form-item","form-item-append"],["for","name",3,"invalid","invalidText"],["cdsText","","type","text","formControlName","name",3,"invalid"],["for","password",3,"invalid","invalidText"],["cdsPassword","","type","password","label","Password","formControlName","password",3,"invalid"],["cdsCol","",1,"item-action-btn","spacing",3,"columnNumbers"],["kind","danger","size","sm",3,"click",4,"ngIf"],["kind","danger","size","sm",3,"click"],["cdsIcon","trash-can","size","32",1,"cds--btn__icon"],["formArrayName","groups"],["for","name"],["cdsText","","type","text","formControlName","name"]]},template:function(t,o){if(1&t){const s=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"div",15)(1,"form",16,0)(3,"div",17),e.\u0275\u0275i18n(4,4),e.\u0275\u0275pipe(5,"titlecase"),e.\u0275\u0275pipe(6,"upperFirst"),e.\u0275\u0275elementEnd(),e.\u0275\u0275template(7,XO,1,3,"cds-file-uploader",18),e.\u0275\u0275elementStart(8,"div",19)(9,"cds-text-label",20),e.\u0275\u0275i18nStart(10,5),e.\u0275\u0275element(11,"input",21),e.\u0275\u0275i18nEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275template(12,jO,1,1,"ng-template",null,1,e.\u0275\u0275templateRefExtractor),e.\u0275\u0275elementEnd(),e.\u0275\u0275template(14,KO,5,2,"div",22),e.\u0275\u0275pipe(15,"async"),e.\u0275\u0275template(16,ZO,17,14,"ng-container",23),e.\u0275\u0275elementStart(17,"div",19)(18,"button",24),e.\u0275\u0275listener("click",function(){return e.\u0275\u0275restoreView(s),e.\u0275\u0275resetView(o.addUser())}),e.\u0275\u0275i18nStart(19,6),e.\u0275\u0275namespaceSVG(),e.\u0275\u0275element(20,"svg",25),e.\u0275\u0275i18nEnd(),e.\u0275\u0275elementEnd()(),e.\u0275\u0275template(21,qO,10,5,"ng-container",26),e.\u0275\u0275namespaceHTML(),e.\u0275\u0275elementStart(22,"div",19)(23,"button",24),e.\u0275\u0275listener("click",function(){return e.\u0275\u0275restoreView(s),e.\u0275\u0275resetView(o.addGroup())}),e.\u0275\u0275i18nStart(24,7),e.\u0275\u0275namespaceSVG(),e.\u0275\u0275element(25,"svg",25),e.\u0275\u0275i18nEnd(),e.\u0275\u0275elementEnd()(),e.\u0275\u0275namespaceHTML(),e.\u0275\u0275elementStart(26,"cd-form-button-panel",27),e.\u0275\u0275pipe(27,"titlecase"),e.\u0275\u0275pipe(28,"upperFirst"),e.\u0275\u0275listener("submitActionEvent",function(){return e.\u0275\u0275restoreView(s),e.\u0275\u0275resetView(o.submit())}),e.\u0275\u0275elementEnd()()()}if(2&t){const s=e.\u0275\u0275reference(13);e.\u0275\u0275property("columnNumbers",e.\u0275\u0275pureFunction0(22,VO)),e.\u0275\u0275advance(),e.\u0275\u0275property("formGroup",o.form),e.\u0275\u0275advance(5),e.\u0275\u0275i18nExp(e.\u0275\u0275pipeBind1(5,12,o.action))(e.\u0275\u0275pipeBind1(6,14,o.resource)),e.\u0275\u0275i18nApply(4),e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf",!o.editing&&!o.hideUploader),e.\u0275\u0275advance(2),e.\u0275\u0275property("invalid",o.form.controls.usersGroupsId.invalid&&o.form.controls.usersGroupsId.dirty)("invalidText",s),e.\u0275\u0275advance(5),e.\u0275\u0275property("ngIf",e.\u0275\u0275pipeBind1(15,16,o.smbClusters$)),e.\u0275\u0275advance(2),e.\u0275\u0275property("ngForOf",o.users.controls),e.\u0275\u0275advance(5),e.\u0275\u0275property("ngForOf",o.groups.controls),e.\u0275\u0275advance(5),e.\u0275\u0275property("form",o.form)("submitText",e.\u0275\u0275pipeBind1(27,18,o.action)+" "+e.\u0275\u0275pipeBind1(28,20,o.resource))}},dependencies:[l.NgForOf,l.NgIf,oe.e,Ge.S,ze.E,d_.O,C.\u0275NgNoValidate,C.NgSelectOption,C.\u0275NgSelectMultipleOption,C.DefaultValueAccessor,C.NgControlStatus,C.NgControlStatusGroup,C.FormGroupDirective,C.FormControlName,C.FormGroupName,C.FormArrayName,D.ColumnDirective,D.RowDirective,D.Select,D.Option,D.FileUploader,D.TextInputLabelComponent,D.PasswordInputLabelComponent,D.TextInput,D.PasswordInput,D.Button,D.IconButton,D.IconDirective,l.AsyncPipe,l.TitleCasePipe,Pe.r],styles:[".spacing[_ngcontent-%COMP%]{margin-top:1.5rem}"]})}}var e4=r(38157);class Ir{static{this.\u0275fac=function(t){return new(t||Ir)}}static{this.\u0275cmp=e.\u0275\u0275defineComponent({type:Ir,selectors:[["cd-smb-overview"]],decls:2,vars:2,consts:()=>{let n;return n=$localize`:␟31adfdaba63e32077f7113d82dcaefc45ad8b805␟1629123255622673390:SMB overview`,[["title",n,"uid","feem6ehrmi2o0b","grafanaStyle","two",3,"grafanaPath","type"]]},template:function(t,o){1&t&&e.\u0275\u0275element(0,"cd-smb-tabs")(1,"cd-grafana",0),2&t&&(e.\u0275\u0275advance(),e.\u0275\u0275property("grafanaPath","smb-overview?")("type","metrics"))},dependencies:[Tt.c,So]})}}class ho extends _r{resolve(n){const t=[],o=n.queryParams.fromLink||null;let s="";switch(o){case"/monitor":s="Monitors";break;case"/hosts":s="Hosts"}return t.push({text:"Cluster",path:null}),t.push({text:s,path:o}),t.push({text:"Performance Counters",path:""}),t}static{this.\u0275fac=(()=>{let n;return function(o){return(n||(n=e.\u0275\u0275getInheritedFactory(ho)))(o||ho)}})()}static{this.\u0275prov=e.\u0275\u0275defineInjectable({token:ho,factory:ho.\u0275fac})}}class To extends _r{resolve(n){const t=n.params.name;return[{text:`${p().startCase(t)}/Edit`,path:t}]}static{this.\u0275fac=(()=>{let n;return function(o){return(n||(n=e.\u0275\u0275getInheritedFactory(To)))(o||To)}})()}static{this.\u0275prov=e.\u0275\u0275defineInjectable({token:To,factory:To.\u0275fac})}}const t4=[{path:"",redirectTo:"dashboard",pathMatch:"full"},{path:"api-docs",component:Er},{path:"",component:fr,canActivate:[a_.r,zo],canActivateChild:[a_.r,zo],children:[{path:"dashboard",component:Ws},{path:"error",component:Ys},{path:"expand-cluster",component:ms,canActivate:[Co.x],data:{moduleStatusGuardConfig:{uiApiPath:"orchestrator",redirectTo:"dashboard",backend:"cephadm"},breadcrumbs:"Cluster/Expand Cluster"}},{path:"hosts",component:yo,data:{breadcrumbs:"Cluster/Hosts"},children:[{path:m.Qp.ADD,component:di,outlet:"modal"}]},{path:"ceph-users",component:T3.M,data:{breadcrumbs:"Administration/Ceph Users",resource:"api.cluster.user@1.0"}},{path:"cluster/user/create",component:hl.u,data:{breadcrumbs:"Administration/Ceph Users/Create",resource:"api.cluster.user@1.0"}},{path:"cluster/user/import",component:hl.u,data:{breadcrumbs:"Administration/Ceph Users/Import",resource:"api.cluster.user@1.0"}},{path:"cluster/user/edit",component:hl.u,data:{breadcrumbs:"Administration/Ceph Users/Edit",resource:"api.cluster.user@1.0"}},{path:"monitor",component:hs,data:{breadcrumbs:"Cluster/Monitors"}},{path:"services",component:_i,canActivate:[Co.x],data:{moduleStatusGuardConfig:{uiApiPath:"orchestrator",redirectTo:"error",section:"orch",section_info:"Orchestrator",header:"Orchestrator is not available"},breadcrumbs:"Administration/Services"},children:[{path:m.Qp.CREATE,component:_o,outlet:"modal"},{path:`${m.Qp.CREATE}/:type`,component:_o,outlet:"modal"},{path:`${m.Qp.EDIT}/:type/:name`,component:_o,outlet:"modal"}]},{path:"multi-cluster",children:[{path:"overview",component:Tr},{path:"manage-clusters",component:Fr,data:{breadcrumbs:"Multi-Cluster/Manage Clusters"},children:[{path:"performance-details",component:Gi}]}]},{path:"inventory",canActivate:[Co.x],component:mi,data:{moduleStatusGuardConfig:{uiApiPath:"orchestrator",redirectTo:"error",section:"orch",section_info:"Orchestrator",header:"Orchestrator is not available"},breadcrumbs:"Cluster/Physical Disks"}},{path:"osd",data:{breadcrumbs:"Cluster/OSDs"},children:[{path:"",component:hi},{path:m.Qp.CREATE,component:ci,data:{breadcrumbs:m.yY.CREATE}}]},{path:"configuration",data:{breadcrumbs:"Administration/Configuration"},children:[{path:"",component:ts},{path:"edit/:name",component:qa,data:{breadcrumbs:m.yY.EDIT}}]},{path:"crush-map",component:fs,data:{breadcrumbs:"Cluster/CRUSH map"}},{path:"logs",component:Lo,data:{breadcrumbs:"Observability/Logs"}},{path:"telemetry",component:Ds,data:{breadcrumbs:"Telemetry configuration"}},{path:"monitoring",data:{breadcrumbs:"Observability/Alerts"},children:[{path:"",redirectTo:"active-alerts",pathMatch:"full"},{path:"active-alerts",data:{breadcrumbs:"Active Alerts"},component:bs},{path:"alerts",data:{breadcrumbs:"Alerts"},component:Ns},{path:"silences",data:{breadcrumbs:"Silences"},children:[{path:"",component:As},{path:m.Qp.CREATE,component:Pn,data:{breadcrumbs:`${m.yY.CREATE} Silence`}},{path:`${m.Qp.CREATE}/:id`,component:Pn,data:{breadcrumbs:m.yY.CREATE}},{path:`${m.Qp.EDIT}/:id`,component:Pn,data:{breadcrumbs:m.yY.EDIT}},{path:`${m.Qp.RECREATE}/:id`,component:Pn,data:{breadcrumbs:m.yY.RECREATE}}]}]},{path:"upgrade",canActivate:[Co.x],data:{moduleStatusGuardConfig:{uiApiPath:"orchestrator",redirectTo:"error",backend:"cephadm",section:"orch",section_info:"Orchestrator",header:"Orchestrator is not available"},breadcrumbs:"Administration/Upgrade"},children:[{path:"",component:Cr},{path:"progress",component:Sr,data:{breadcrumbs:"Progress"}}]},{path:"perf_counters/:type/:id",component:bi,data:{breadcrumbs:ho}},{path:"mgr-modules",data:{breadcrumbs:"Administrator/Manager Modules"},children:[{path:"",component:Ss},{path:"edit/:name",component:gs,data:{breadcrumbs:To}}]},{path:"pool",data:{breadcrumbs:"Cluster/Pools"},loadChildren:()=>Promise.all([r.e("default-src_app_ceph_block_block_module_ts"),r.e("src_app_ceph_pool_pool_module_ts")]).then(r.bind(r,82301)).then(i=>i.RoutedPoolModule)},{path:"block",data:{breadcrumbs:!0,text:"Block",path:null},loadChildren:()=>r.e("default-src_app_ceph_block_block_module_ts").then(r.bind(r,11430)).then(i=>i.RoutedBlockModule)},{path:"cephfs",canActivate:[Tl.k],children:[{path:"fs",component:Za,data:{breadcrumbs:"File/File Systems"}},{path:`fs/${m.Qp.CREATE}`,component:Ui,data:{breadcrumbs:m.yY.CREATE}},{path:`fs/${m.Qp.EDIT}/:id`,component:Ui,data:{breadcrumbs:m.yY.EDIT}},{path:"nfs",canActivateChild:[Tl.k,Co.x],data:{moduleStatusGuardConfig:{uiApiPath:"nfs-ganesha",redirectTo:"error",section:"nfs-ganesha",section_info:"NFS GANESHA",header:"NFS-Ganesha is not configured"},breadcrumbs:"File/NFS"},children:[{path:"",component:e4.$},{path:`${m.Qp.CREATE}/:fs_name/:subvolume_group`,component:El.B,data:{breadcrumbs:m.yY.CREATE}},{path:`${m.Qp.CREATE}`,component:El.B,data:{breadcrumbs:m.yY.CREATE}},{path:`${m.Qp.EDIT}/:cluster_id/:export_id`,component:El.B,data:{breadcrumbs:m.yY.EDIT}}]},{path:"smb",canActivate:[Co.x],data:{moduleStatusGuardConfig:{uiApiPath:"smb",redirectTo:"error",header:"SMB module is not enabled",module_name:"smb",navigate_to:"cephfs/smb"},breadcrumbs:"File/SMB"},children:[{path:"",component:Xi},{path:"cluster",data:{breadcrumbs:"Cluster"},children:[{path:"",component:Xi},{path:`${m.Qp.CREATE}`,component:ji,data:{breadcrumbs:m.yY.CREATE}},{path:`${m.Qp.EDIT}/:cluster_id`,component:ji,data:{breadcrumbs:m.yY.EDIT}}]},{path:"active-directory",data:{breadcrumbs:"Active Directory"},children:[{path:"",component:Mr},{path:`${m.Qp.CREATE}`,component:Ki,data:{breadcrumbs:m.yY.CREATE}},{path:`${m.Qp.EDIT}/:authId`,component:Ki,data:{breadcrumbs:m.yY.EDIT}}]},{path:"standalone",data:{breadcrumbs:"Standalone"},children:[{path:"",component:Nr},{path:`${m.Qp.CREATE}`,component:Qi,data:{breadcrumbs:m.yY.CREATE}},{path:`${m.Qp.EDIT}/:usersGroupsId`,component:Qi}]},{path:"overview",component:Ir,data:{breadcrumbs:"Overview"}},{path:`share/${m.Qp.CREATE}/:clusterId`,component:Wi,data:{breadcrumbs:m.yY.CREATE}},{path:`share/${m.Qp.EDIT}/:clusterId/:shareId`,component:Wi,data:{breadcrumbs:m.yY.EDIT}}]}]},{path:"rgw",canActivate:[Tl.k,Co.x],data:{moduleStatusGuardConfig:{uiApiPath:"rgw",redirectTo:"error",section:"rgw",section_info:"Object Gateway",header:"The Object Gateway Service is not configured"},breadcrumbs:!0,text:"Object",path:null},loadChildren:()=>r.e("src_app_ceph_rgw_rgw_module_ts").then(r.bind(r,73691)).then(i=>i.RoutedRgwModule)},{path:"user-management",data:{breadcrumbs:"User management",path:null},loadChildren:()=>Promise.resolve().then(r.bind(r,3141)).then(i=>i.RoutedAuthModule)},{path:"user-profile",data:{breadcrumbs:"User profile",path:null},children:[{path:m.Qp.EDIT,component:Ni,canActivate:[Xo],data:{breadcrumbs:m.yY.EDIT}}]}]},{path:"",component:er,children:[{path:"login",component:Qs},{path:"login-change-password",component:Ks,canActivate:[Xo]}]},{path:"",component:Js,children:[{path:"**",redirectTo:"/error"}]}];class xn{static{this.\u0275fac=function(t){return new(t||xn)}}static{this.\u0275mod=e.\u0275\u0275defineNgModule({type:xn})}static{this.\u0275inj=e.\u0275\u0275defineInjector({providers:[To,ho],imports:[u.RouterModule.forRoot(t4,{useHash:!0,preloadingStrategy:u.PreloadAllModules}),u.RouterModule]})}}class Ar{constructor(n,t){n.autoClose="outside",n.container="body",n.placement="bottom",t.container="body"}static{this.\u0275fac=function(t){return new(t||Ar)(e.\u0275\u0275directiveInject(G.NgbPopoverConfig),e.\u0275\u0275directiveInject(G.NgbTooltipConfig))}}static{this.\u0275cmp=e.\u0275\u0275defineComponent({type:Ar,selectors:[["cd-root"]],decls:1,vars:0,template:function(t,o){1&t&&e.\u0275\u0275element(0,"router-outlet")},dependencies:[u.RouterOutlet]})}}var an=r(93887),m_=r(27289),n4={elem:"svg",attrs:{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 32",fill:"currentColor",width:32,height:32},content:[{elem:"path",attrs:{d:"M17 15L17 8 15 8 15 15 8 15 8 17 15 17 15 24 17 24 17 17 24 17 24 15z"}}],name:"add",size:32},o4={elem:"svg",attrs:{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 32",fill:"currentColor",width:32,height:32},content:[{elem:"path",attrs:{d:"M26,28H6a2.0027,2.0027,0,0,1-2-2V6A2.0027,2.0027,0,0,1,6,4H16V6H6V26H26V16h2V26A2.0027,2.0027,0,0,1,26,28Z"}},{elem:"path",attrs:{d:"M20 2L20 4 26.586 4 18 12.586 19.414 14 28 5.414 28 12 30 12 30 2 20 2z"}}],name:"launch",size:32},Ml=r(8205),i4={elem:"svg",attrs:{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 32",fill:"currentColor",width:32,height:32},content:[{elem:"path",attrs:{d:"M12 12H14V24H12zM18 12H20V24H18z"}},{elem:"path",attrs:{d:"M4 6V8H6V28a2 2 0 002 2H24a2 2 0 002-2V8h2V6zM8 28V8H24V28zM12 2H20V4H12z"}}],name:"trash-can",size:32};class Dr{constructor(n){this.iconService=n,this.iconService.registerAll([n4,o4,Ml.A,i4])}static{this.\u0275fac=function(t){return new(t||Dr)(e.\u0275\u0275inject(D.IconService))}}static{this.\u0275mod=e.\u0275\u0275defineNgModule({type:Dr})}static{this.\u0275inj=e.\u0275\u0275defineInjector({providers:[(0,Nt.provideCharts)((0,Nt.withDefaultRegisterables)())],imports:[l.CommonModule,an.G,xn,D.TreeviewModule,G.NgbNavModule,C.FormsModule,C.ReactiveFormsModule,G.NgbTypeaheadModule,G.NgbTooltipModule,m_.h,G.NgbDatepickerModule,G.NgbTimepickerModule,G.NgbTypeaheadModule,D.GridModule,D.InputModule,D.CheckboxModule,D.SelectModule,D.DropdownModule,D.ModalModule,D.PlaceholderModule,D.DatePickerModule,D.TimePickerModule,D.ButtonModule,D.NumberModule,D.LayoutModule,D.ComboBoxModule,D.IconModule,D.TabsModule]})}}var a4={elem:"svg",attrs:{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 32",fill:"currentColor",width:16,height:16},content:[{elem:"path",attrs:{d:"M4,2H2V28a2,2,0,0,0,2,2H30V28H4Z"}},{elem:"path",attrs:{d:"M30,9H23v2h3.59L19,18.59l-4.29-4.3a1,1,0,0,0-1.42,0L6,21.59,7.41,23,14,16.41l4.29,4.3a1,1,0,0,0,1.42,0L28,12.41V16h2Z"}}],name:"analytics",size:16},s4={elem:"svg",attrs:{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 16 16",fill:"currentColor",width:16,height:16},content:[{elem:"path",attrs:{d:"M8,1C4.1,1,1,4.1,1,8s3.1,7,7,7s7-3.1,7-7S11.9,1,8,1z M10.7,11.5L8,8.8l-2.7,2.7l-0.8-0.8L7.2,8L4.5,5.3l0.8-0.8L8,7.2\tl2.7-2.7l0.8,0.8L8.8,8l2.7,2.7L10.7,11.5z"}}],name:"close--filled",size:16},r4=r(29376),l4=r(13421),f_=r(44128),E_=r(26481);class yr{static{this.\u0275fac=function(t){return new(t||yr)}}static{this.\u0275mod=e.\u0275\u0275defineNgModule({type:yr})}static{this.\u0275inj=e.\u0275\u0275defineInjector({imports:[xn,l.CommonModule,C.ReactiveFormsModule,an.G,G.NgbNavModule]})}}var g_=r(45518);class Yi{constructor(n){this.iconService=n,this.iconService.registerAll([a4,s4,r4.A])}static{this.\u0275fac=function(t){return new(t||Yi)(e.\u0275\u0275inject(D.IconService))}}static{this.\u0275mod=e.\u0275\u0275defineNgModule({type:Yi})}static{this.\u0275inj=e.\u0275\u0275defineInjector({providers:[G.NgbActiveModal],imports:[l.CommonModule,f_.d,G.NgbNavModule,an.G,u.RouterModule,C.FormsModule,C.ReactiveFormsModule,G.NgbTooltipModule,yr,G.NgbTypeaheadModule,G.NgbTimepickerModule,D.TreeviewModule,E_._,G.NgbDatepickerModule,G.NgbPopoverModule,G.NgbDropdownModule,l4.Y,G.NgbProgressbarModule,g_.W,D.ComboBoxModule,D.DropdownModule,D.CheckboxModule,D.GridModule,D.ProgressIndicatorModule,D.ButtonModule,D.InputModule,D.ModalModule,D.ListModule,D.ToggletipModule,D.IconModule]})}}class Lr{static{this.\u0275fac=function(t){return new(t||Lr)}}static{this.\u0275mod=e.\u0275\u0275defineNgModule({type:Lr})}static{this.\u0275inj=e.\u0275\u0275defineInjector({providers:[(0,Nt.provideCharts)((0,Nt.withDefaultRegisterables)())],imports:[E_._,l.CommonModule,G.NgbNavModule,an.G,u.RouterModule,C.FormsModule,C.ReactiveFormsModule,g_.W,D.ToggletipModule]})}}class $r{constructor(n){this.iconService=n,this.iconService.registerAll([Ml.A])}static{this.\u0275fac=function(t){return new(t||$r)(e.\u0275\u0275inject(D.IconService))}}static{this.\u0275mod=e.\u0275\u0275defineNgModule({type:$r})}static{this.\u0275inj=e.\u0275\u0275defineInjector({imports:[C.ReactiveFormsModule,u.RouterModule,an.G,G.NgbNavModule,l.CommonModule,G.NgbTypeaheadModule,G.NgbTooltipModule,D.GridModule,D.TagModule,D.SelectModule,D.InputModule,D.RadioModule,D.CheckboxModule,D.ButtonModule,D.IconModule,D.TabsModule,Yi]})}}class xr{constructor(n){this.iconService=n,this.iconService.registerAll([Ml.A])}static{this.\u0275fac=function(t){return new(t||xr)(e.\u0275\u0275inject(D.IconService))}}static{this.\u0275mod=e.\u0275\u0275defineNgModule({type:xr})}static{this.\u0275inj=e.\u0275\u0275defineInjector({imports:[u.RouterModule,l.CommonModule,an.G,xn,l.CommonModule,C.FormsModule,C.ReactiveFormsModule,m_.h,D.GridModule,D.SelectModule,D.TabsModule,D.TagModule,D.FileUploaderModule,D.InputModule,D.CheckboxModule,D.SelectModule,D.DropdownModule,D.ModalModule,D.PlaceholderModule,D.ButtonModule,D.NumberModule,D.LayoutModule,D.ComboBoxModule,D.IconModule]})}}class Ur{static{this.\u0275fac=function(t){return new(t||Ur)}}static{this.\u0275mod=e.\u0275\u0275defineNgModule({type:Ur})}static{this.\u0275inj=e.\u0275\u0275defineInjector({imports:[l.CommonModule,Yi,Lr,f_.d,Dr,$r,xr,an.G]})}}var _4=r(3141),c4={elem:"svg",attrs:{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 32",fill:"currentColor",width:20,height:20},content:[{elem:"path",attrs:{d:"M6 30H26V25a7.0082 7.0082 0 00-7-7H13a7.0082 7.0082 0 00-7 7zM9 9a7 7 0 107-7A7 7 0 009 9z"}}],name:"user--filled",size:20},d4={elem:"svg",attrs:{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 32",fill:"currentColor",width:20,height:20},content:[{elem:"path",attrs:{d:"M27,16.76c0-.25,0-.5,0-.76s0-.51,0-.77l1.92-1.68A2,2,0,0,0,29.3,11L26.94,7a2,2,0,0,0-1.73-1,2,2,0,0,0-.64.1l-2.43.82a11.35,11.35,0,0,0-1.31-.75l-.51-2.52a2,2,0,0,0-2-1.61H13.64a2,2,0,0,0-2,1.61l-.51,2.52a11.48,11.48,0,0,0-1.32.75L7.43,6.06A2,2,0,0,0,6.79,6,2,2,0,0,0,5.06,7L2.7,11a2,2,0,0,0,.41,2.51L5,15.24c0,.25,0,.5,0,.76s0,.51,0,.77L3.11,18.45A2,2,0,0,0,2.7,21L5.06,25a2,2,0,0,0,1.73,1,2,2,0,0,0,.64-.1l2.43-.82a11.35,11.35,0,0,0,1.31.75l.51,2.52a2,2,0,0,0,2,1.61h4.72a2,2,0,0,0,2-1.61l.51-2.52a11.48,11.48,0,0,0,1.32-.75l2.42.82a2,2,0,0,0,.64.1,2,2,0,0,0,1.73-1L29.3,21a2,2,0,0,0-.41-2.51ZM25.21,24l-3.43-1.16a8.86,8.86,0,0,1-2.71,1.57L18.36,28H13.64l-.71-3.55a9.36,9.36,0,0,1-2.7-1.57L6.79,24,4.43,20l2.72-2.4a8.9,8.9,0,0,1,0-3.13L4.43,12,6.79,8l3.43,1.16a8.86,8.86,0,0,1,2.71-1.57L13.64,4h4.72l.71,3.55a9.36,9.36,0,0,1,2.7,1.57L25.21,8,27.57,12l-2.72,2.4a8.9,8.9,0,0,1,0,3.13L27.57,20Z"}},{elem:"path",attrs:{d:"M16,22a6,6,0,1,1,6-6A5.94,5.94,0,0,1,16,22Zm0-10a3.91,3.91,0,0,0-4,4,3.91,3.91,0,0,0,4,4,3.91,3.91,0,0,0,4-4A3.91,3.91,0,0,0,16,12Z"}}],name:"settings",size:20},u4={elem:"svg",attrs:{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 32",fill:"currentColor",width:20,height:20},content:[{elem:"path",attrs:{d:"M16,2A14,14,0,1,0,30,16,14,14,0,0,0,16,2Zm0,26A12,12,0,1,1,28,16,12,12,0,0,1,16,28Z"}},{elem:"circle",attrs:{cx:"16",cy:"23.5",r:"1.5"}},{elem:"path",attrs:{d:"M17,8H15.5A4.49,4.49,0,0,0,11,12.5V13h2v-.5A2.5,2.5,0,0,1,15.5,10H17a2.5,2.5,0,0,1,0,5H15v4.5h2V17a4.5,4.5,0,0,0,0-9Z"}}],name:"help",size:20},p4={elem:"svg",attrs:{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 32",fill:"currentColor",width:20,height:20},content:[{elem:"path",attrs:{d:"M28.7071,19.293,26,16.5859V13a10.0136,10.0136,0,0,0-9-9.9492V1H15V3.0508A10.0136,10.0136,0,0,0,6,13v3.5859L3.2929,19.293A1,1,0,0,0,3,20v3a1,1,0,0,0,1,1h7v.7768a5.152,5.152,0,0,0,4.5,5.1987A5.0057,5.0057,0,0,0,21,25V24h7a1,1,0,0,0,1-1V20A1,1,0,0,0,28.7071,19.293ZM19,25a3,3,0,0,1-6,0V24h6Zm8-3H5V20.4141L7.707,17.707A1,1,0,0,0,8,17V13a8,8,0,0,1,16,0v4a1,1,0,0,0,.293.707L27,20.4141Z"}}],name:"notification",size:20},m4={elem:"svg",attrs:{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 16 16",fill:"currentColor",width:16,height:16},content:[{elem:"path",attrs:{d:"M13,14H3c-0.6,0-1-0.4-1-1V3c0-0.6,0.4-1,1-1h5v1H3v10h10V8h1v5C14,13.6,13.6,14,13,14z"}},{elem:"path",attrs:{d:"M10 1L10 2 13.3 2 9 6.3 9.7 7 14 2.7 14 6 15 6 15 1z"}}],name:"launch",size:16},f4={elem:"svg",attrs:{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 32",fill:"currentColor",width:20,height:20},content:[{elem:"path",attrs:{d:"M26 6v4H6V6H26m0-2H6A2 2 0 004 6v4a2 2 0 002 2H26a2 2 0 002-2V6a2 2 0 00-2-2zM10 16V26H6V16h4m0-2H6a2 2 0 00-2 2V26a2 2 0 002 2h4a2 2 0 002-2V16a2 2 0 00-2-2zM26 16V26H16V16H26m0-2H16a2 2 0 00-2 2V26a2 2 0 002 2H26a2 2 0 002-2V16a2 2 0 00-2-2z"}}],name:"template",size:20},E4={elem:"svg",attrs:{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 32",fill:"currentColor",width:20,height:20},content:[{elem:"path",attrs:{d:"M16 26c-.2559 0-.512-.0977-.707-.2928l-3-3c-.1953-.1953-.293-.4512-.293-.7071s.0977-.5118.293-.7072l3-3c.1951-.1952.451-.2928.707-.2928s.512.0977.707.2928l3 3c.1953.1953.293.4512.293.7071s-.0977.5118-.293.7072l-3 3c-.1951.1952-.4512.2928-.707.2928zm-1.5857-4l1.5857 1.5858 1.5857-1.5858-1.5857-1.5858-1.5857 1.5858zM22 20c-.2559 0-.512-.0977-.707-.2928l-3-3c-.1953-.1953-.293-.4512-.293-.7071s.0977-.5118.293-.7072l3-3c.1951-.1952.451-.2928.707-.2928s.512.0977.707.2928l3 3c.1953.1953.293.4512.293.7071s-.0977.5118-.293.7072l-3 3c-.1951.1952-.4512.2928-.707.2928zm-1.5857-4l1.5857 1.5858 1.5857-1.5858-1.5857-1.5858-1.5857 1.5858zM16 14c-.2559 0-.512-.0977-.707-.2928l-3-3c-.1953-.1953-.293-.4512-.293-.7071s.0977-.5118.293-.7072l3-3c.1951-.1952.451-.2928.707-.2928s.512.0977.707.2928l3 3c.1953.1953.293.4512.293.7071s-.0977.5118-.293.7072l-3 3c-.1951.1952-.4512.2928-.707.2928zm-1.5857-4l1.5857 1.5858 1.5857-1.5858-1.5857-1.5858-1.5857 1.5858zM10 20c-.2559 0-.512-.0977-.707-.2928l-3-3c-.1953-.1953-.293-.4512-.293-.7071s.0977-.5118.293-.7072l3-3c.1951-.1952.451-.2928.707-.2928s.512.0977.707.2928l3 3c.1953.1953.293.4512.293.7071s-.0977.5118-.293.7072l-3 3c-.1951.1952-.4512.2928-.707.2928zm-1.5857-4l1.5857 1.5858 1.5857-1.5858-1.5857-1.5858-1.5857 1.5858z"}},{elem:"path",attrs:{d:"m16,1c-.1741,0-.3481.0454-.5039.1362L3.4961,8.1362c-.3071.1792-.4961.5081-.4961.8638v14c0,.3557.189.6846.4961.8638l12,7c.1558.0908.3298.1362.5039.1362s.3481-.0454.5039-.1362l11-6.4166-1.0078-1.7275-10.4961,6.1227-11-6.4166v-12.8513L16,3.1577l11,6.4166v7.4257h2v-8c0-.3557-.189-.6846-.4961-.8638L16.5039,1.1362c-.1558-.0908-.3298-.1362-.5039-.1362Z"}}],name:"web-services--cluster",size:20},g4={elem:"svg",attrs:{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 32",fill:"currentColor",width:20,height:20},content:[{elem:"path",attrs:{d:"M16 7a3 3 0 113-3A3.0033 3.0033 0 0116 7zm0-4a1 1 0 101 1A1.001 1.001 0 0016 3zM11 30a3 3 0 113-3A3.0033 3.0033 0 0111 30zm0-4a1 1 0 101 1A1.001 1.001 0 0011 26zM7 11a3 3 0 113-3A3.0033 3.0033 0 017 11zM7 7A1 1 0 108 8 1.001 1.001 0 007 7zM21 30a3 3 0 113-3A3.0033 3.0033 0 0121 30zm0-4a1 1 0 101 1A1.001 1.001 0 0021 26zM25 11a3 3 0 113-3A3.0033 3.0033 0 0125 11zm0-4a1 1 0 101 1A1.001 1.001 0 0025 7zM4 21a3 3 0 113-3A3.0033 3.0033 0 014 21zm0-4a1 1 0 101 1A1.001 1.001 0 004 17zM28 21a3 3 0 113-3A3.0033 3.0033 0 0128 21zm0-4a1 1 0 101 1A1.001 1.001 0 0028 17zM16 22a6 6 0 116-6A6.0069 6.0069 0 0116 22zm0-10a4 4 0 104 4A4.0045 4.0045 0 0016 12z"}}],name:"edge-cluster",size:20},C4={elem:"svg",attrs:{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 32",fill:"currentColor",width:20,height:20},content:[{elem:"circle",attrs:{cx:"23",cy:"23",r:"1"}},{elem:"path",attrs:{d:"M8 22H20V24H8z"}},{elem:"circle",attrs:{cx:"23",cy:"9",r:"1"}},{elem:"path",attrs:{d:"M8 8H20V10H8z"}},{elem:"path",attrs:{d:"M26,14a2,2,0,0,0,2-2V6a2,2,0,0,0-2-2H6A2,2,0,0,0,4,6v6a2,2,0,0,0,2,2H8v4H6a2,2,0,0,0-2,2v6a2,2,0,0,0,2,2H26a2,2,0,0,0,2-2V20a2,2,0,0,0-2-2H24V14ZM6,6H26v6H6ZM26,26H6V20H26Zm-4-8H10V14H22Z"}}],name:"datastore",size:20},S4={elem:"svg",attrs:{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 32",fill:"currentColor",width:20,height:20},content:[{elem:"path",attrs:{d:"M28,20H26v2h2v6H4V22H14V20H4a2.0023,2.0023,0,0,0-2,2v6a2.0023,2.0023,0,0,0,2,2H28a2.0023,2.0023,0,0,0,2-2V22A2.0023,2.0023,0,0,0,28,20Z"}},{elem:"circle",attrs:{cx:"7",cy:"25",r:"1"}},{elem:"path",attrs:{d:"M30 8H22v6H16v8h8V16h6zM22 20H18V16h4zm6-6H24V10h4zM18 10H10V2h8zM12 8h4V4H12z"}}],name:"object-storage",size:20},h4={elem:"svg",attrs:{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 32",fill:"currentColor",width:20,height:20},content:[{elem:"path",attrs:{d:"M28,20H26v2h2v6H4V22H6V20H4a2.0024,2.0024,0,0,0-2,2v6a2.0024,2.0024,0,0,0,2,2H28a2.0024,2.0024,0,0,0,2-2V22A2.0024,2.0024,0,0,0,28,20Z"}},{elem:"circle",attrs:{cx:"7",cy:"25",r:"1"}},{elem:"path",attrs:{d:"M22.707,7.293l-5-5A1,1,0,0,0,17,2H11A2.0023,2.0023,0,0,0,9,4V20a2.0023,2.0023,0,0,0,2,2H21a2.0023,2.0023,0,0,0,2-2V8A1,1,0,0,0,22.707,7.293ZM20.5857,8H17V4.4141ZM11,20V4h4V8a2.0023,2.0023,0,0,0,2,2h4V20Z"}}],name:"file-storage",size:20},T4={elem:"svg",attrs:{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 32",fill:"currentColor",width:20,height:20},content:[{elem:"path",attrs:{d:"M4,18A12,12,0,1,0,16,6H12V1L6,7l6,6V8h4A10,10,0,1,1,6,18Z"}},{elem:"circle",attrs:{cx:"13.5",cy:"23.5",r:"1.5"}},{elem:"circle",attrs:{cx:"10.5",cy:"19.5",r:"1.5"}},{elem:"circle",attrs:{cx:"16.5",cy:"19.5",r:"1.5"}},{elem:"path",attrs:{d:"M11.964 14.5H17.036V16.499H11.964z",transform:"rotate(-45 14.5 15.5)"}},{elem:"path",attrs:{d:"M17.964 14.5H23.035999999999998V16.499H17.964z",transform:"rotate(-45 20.5 15.5)"}}],name:"observed--hail",size:20},F4={elem:"svg",attrs:{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 32",fill:"currentColor",width:20,height:20},content:[{elem:"path",attrs:{d:"M27 20.415L25.586 19 23 21.587 20.414 19 19 20.415 21.586 23 19 25.586 20.414 27 23 24.414 25.586 27 27 25.586 24.414 23 27 20.415zM24 4a4.0045 4.0045 0 00-4 4 3.951 3.951 0 00.5669 2.019L10.019 20.5669A3.9521 3.9521 0 008 20a4 4 0 104 4 3.951 3.951 0 00-.5669-2.019L21.981 11.4331A3.9521 3.9521 0 0024 12a4 4 0 000-8zM8 26a2 2 0 112-2A2.0023 2.0023 0 018 26zM24 10a2 2 0 112-2A2.0023 2.0023 0 0124 10zM8 11.18L5.41 8.59 4 10 8 14 15 7 13.59 5.59 8 11.18z"}}],name:"network--admin-control",size:20},v4=r(94097),M4={elem:"svg",attrs:{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 32",fill:"currentColor",width:16,height:16},content:[{elem:"path",attrs:{d:"M6,30H18a2.0023,2.0023,0,0,0,2-2V25H18v3H6V4H18V7h2V4a2.0023,2.0023,0,0,0-2-2H6A2.0023,2.0023,0,0,0,4,4V28A2.0023,2.0023,0,0,0,6,30Z"}},{elem:"path",attrs:{d:"M20.586 20.586L24.172 17 10 17 10 15 24.172 15 20.586 11.414 22 10 28 16 22 22 20.586 20.586z"}}],name:"logout",size:16};class Ji{constructor(n){this.iconService=n,this.iconService.registerAll([c4,d4,u4,p4,m4,f4,E4,g4,C4,S4,h4,T4,F4,v4.A,M4])}static{this.\u0275fac=function(t){return new(t||Ji)(e.\u0275\u0275inject(D.IconService))}}static{this.\u0275mod=e.\u0275\u0275defineNgModule({type:Ji})}static{this.\u0275inj=e.\u0275\u0275defineInjector({imports:[l.CommonModule,_4.AuthModule,G.NgbCollapseModule,G.NgbDropdownModule,xn,an.G,fl.SimplebarAngularModule,u.RouterModule,D.UIShellModule,D.IconModule,D.ThemeModule,D.DialogModule,D.GridModule,D.BreadcrumbModule]})}}class wr{static{this.\u0275fac=function(t){return new(t||wr)}}static{this.\u0275mod=e.\u0275\u0275defineNgModule({type:wr})}static{this.\u0275inj=e.\u0275\u0275defineInjector({imports:[o_.BlockUIModule.forRoot(),l.CommonModule,Ji,G.NgbDropdownModule,u.RouterModule,an.G,D.PlaceholderModule,Ji]})}}var R4=r(32609);class Zi{constructor(n,t,o,s){this.router=n,this.notificationService=t,this.authStorageService=o,this.cookieService=s}intercept(n,t){const o=n.headers.get("Accept");let s;const d=window.location.origin;s=o&&o.startsWith("application/vnd.ceph.api.v")?n.clone():n.clone({setHeaders:{Accept:R4.c.cdVersionHeader("1","0")}});let h=localStorage.getItem("cluster_api_url");h&&!h.endsWith("/")&&(h+="/");if(!this.router.url.split("?")[0].includes("login")&&!["api/auth/login","api/auth/logout","api/multi-cluster/set_config","api/multi-cluster/get_config","api/multi-cluster/auth"].includes(n.url)&&h&&!h.includes(d)){const w=this.cookieService.getToken(localStorage.getItem("current_cluster_name"));s=s.clone({url:`${h}${s.url}`,setHeaders:{"Access-Control-Allow-Origin":d,Authorization:`Bearer ${w}`}})}return t.handle(s).pipe((0,v.catchError)(w=>{if(w instanceof T.HttpErrorResponse){let X;switch(w.status){case 400:const J=new q.O,re=w.error.task;p().isPlainObject(re)?(re.metadata.component=re.metadata.component||w.error.component,J.name=re.name,J.metadata=re.metadata):J.metadata=w.error,J.success=!1,J.exception=w.error,X=this.notificationService.notifyTask(J);break;case 401:this.authStorageService.remove(),this.router.navigate(["/login"]);break;case 403:this.router.navigate(["error"],{state:{message:$localize`Sorry, you don’t have permission to view this page or resource.`,header:$localize`Access Denied`,icon:"fa fa-lock",source:"forbidden"}});break;default:X=this.prepareNotification(w)}w.preventDefault=()=>{this.notificationService.cancel(X)},w.ignoreStatusCode=function(J){this.status===J&&this.preventDefault()}}return(0,K.throwError)(w)}))}prepareNotification(n){return this.notificationService.show(()=>{let t="";return p().isPlainObject(n.error)&&p().isString(n.error.detail)?t=n.error.detail:p().isString(n.error)?t=n.error:p().isString(n.message)&&(t=n.message),new cl.v(Ae._.error,`${n.status} - ${n.statusText}`,t,void 0,n.application)})}static{this.\u0275fac=function(t){return new(t||Zi)(e.\u0275\u0275inject(u.Router),e.\u0275\u0275inject(Q.J),e.\u0275\u0275inject(c.v),e.\u0275\u0275inject(go))}}static{this.\u0275prov=e.\u0275\u0275defineInjectable({token:Zi,factory:Zi.\u0275fac,providedIn:"root"})}}class qi{constructor(n){this.http=n}jsError(n,t,o){const s={url:n,message:t,stack:o};return this.http.post("ui-api/logging/js-error",s)}static{this.\u0275fac=function(t){return new(t||qi)(e.\u0275\u0275inject(T.HttpClient))}}static{this.\u0275prov=e.\u0275\u0275defineInjectable({token:qi,factory:qi.\u0275fac,providedIn:"root"})}}class ea{constructor(n,t){this.injector=n,this.router=t}handleError(n){const t=this.injector.get(qi),o=window.location.href,s=n&&n.message,d=n&&n.stack;if(t.jsError(o,s,d).subscribe(),!(n.rejection instanceof pl.jq))throw n;setTimeout(()=>this.router.navigate(["error"],{state:{message:n.rejection.message,header:n.rejection.header,icon:n.rejection.icon}}),50)}static{this.\u0275fac=function(t){return new(t||ea)(e.\u0275\u0275inject(e.Injector),e.\u0275\u0275inject(u.Router))}}static{this.\u0275prov=e.\u0275\u0275defineInjectable({token:ea,factory:ea.\u0275fac})}}class Gr{static{this.\u0275fac=function(t){return new(t||Gr)}}static{this.\u0275mod=e.\u0275\u0275defineNgModule({type:Gr,bootstrap:[Ar]})}static{this.\u0275inj=e.\u0275\u0275defineInjector({providers:[{provide:e.ErrorHandler,useClass:ea},{provide:T.HTTP_INTERCEPTORS,useClass:Zi,multi:!0},{provide:l.APP_BASE_HREF,useValue:"/"+(window.location.pathname.split("/",1)[1]||"")},(0,T.provideHttpClient)((0,T.withInterceptorsFromDi)())],imports:[a.BrowserModule,E.BrowserAnimationsModule,f.ToastrModule.forRoot({positionClass:"toast-top-right",preventDuplicates:!0,enableHtml:!0}),xn,wr,an.G,Ur,an.G]})}}n_.c.production&&(0,e.enableProdMode)(),a.platformBrowser().bootstrapModule(Gr).then(i=>{if((0,e.isDevMode)()){const t=i.injector.get(e.ApplicationRef).components[0];(0,a.enableDebugTools)(t)}}).catch(i=>console.error(i))},45312:(Z,A,r)=>{r.d(A,{c:()=>a});const a={default_lang:"en-US",production:!1,year:"2025"}},56207:(Z,A,r)=>{function a(l,T,E,f,u,F,p){try{var S=l[F](p),_=S.value}catch(v){return void E(v)}S.done?T(_):Promise.resolve(_).then(f,u)}function e(l){return function(){var T=this,E=arguments;return new Promise(function(f,u){var F=l.apply(T,E);function p(_){a(F,f,u,p,S,"next",_)}function S(_){a(F,f,u,p,S,"throw",_)}p(void 0)})}}r.d(A,{A:()=>e})}}]);
//# sourceMappingURL=src_bootstrap_ts.js.map