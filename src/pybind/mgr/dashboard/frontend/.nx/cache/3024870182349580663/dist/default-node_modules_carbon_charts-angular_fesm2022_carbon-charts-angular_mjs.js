(self.webpackChunkceph_dashboard=self.webpackChunkceph_dashboard||[]).push([["default-node_modules_carbon_charts-angular_fesm2022_carbon-charts-angular_mjs"],{39311:(hV,fd,Ei)=>{Ei.r(fd),Ei.d(fd,{Alignments:()=>$e,AlluvialChartComponent:()=>Wo,AreaChartComponent:()=>Vo,AreaEvent:()=>Fs,ArrowDirections:()=>Oi,AxisEvent:()=>ws,AxisFlavor:()=>Dr,AxisPositions:()=>j,AxisTitleOrientations:()=>wi,BarEvent:()=>Bs,BaseChartComponent:()=>xe,BoxplotChartComponent:()=>Po,BoxplotEvent:()=>Rs,BubbleChartComponent:()=>Uo,BulletChartComponent:()=>jo,CalloutDirections:()=>Ar,CanvasZoomEvent:()=>Os,CardNodeColumnComponent:()=>ps,CardNodeComponent:()=>ds,CardNodeLabelComponent:()=>ms,CardNodeModule:()=>Al,CardNodeSubtitleComponent:()=>gs,CardNodeTitleComponent:()=>fs,CartesianOrientations:()=>je,ChartEvent:()=>Ts,ChartTheme:()=>Vs,ChartTypes:()=>pt,ChartsModule:()=>wl,ChoroplethChartComponent:()=>Ko,CirclePackChartComponent:()=>$o,ColorClassNameTypes:()=>oe,ColorLegendType:()=>Rr,ComboChartComponent:()=>Go,DividerStatus:()=>Qn,DominantBaseline:()=>Pt,DonutChartComponent:()=>zo,EdgeComponent:()=>hs,EdgeModule:()=>Ml,ExperimentalChoroplethChartComponent:()=>qo,GaugeChartComponent:()=>Yo,GaugeEvent:()=>ks,GaugeTypes:()=>Vn,GroupedBarChartComponent:()=>Xo,HeatmapChartComponent:()=>Zo,HistogramChartComponent:()=>Qo,LayoutAlignItems:()=>Wn,LayoutDirection:()=>Fe,LayoutGrowth:()=>ce,LegendItemType:()=>ze,LegendOrientations:()=>Zn,LegendPositions:()=>Xn,LineChartComponent:()=>Jo,LineEvent:()=>Hs,LollipopChartComponent:()=>es,MarkerArrowLeftComponent:()=>pi,MarkerArrowRightComponent:()=>mi,MarkerComponent:()=>Jt,MarkerDiamondComponent:()=>fi,MarkerModule:()=>Fl,MarkerShapeNodeComponent:()=>gi,MarkerSquareComponent:()=>_i,MarkerTeeComponent:()=>vi,MeterChartComponent:()=>ts,ModalEvent:()=>xs,ModelEvent:()=>bs,PieChartComponent:()=>ns,PieEvent:()=>As,Projection:()=>Ut,RadarChartComponent:()=>rs,RadarEvent:()=>Ls,RenderTypes:()=>re,ScaleTypes:()=>ne,ScatterChartComponent:()=>is,ScatterEvent:()=>Ds,ShapeNodeComponent:()=>_s,ShapeNodeModule:()=>kl,SimpleBarChartComponent:()=>os,Skeletons:()=>Ge,StackedAreaChartComponent:()=>ss,StackedBarChartComponent:()=>as,Statuses:()=>kr,TextAnchor:()=>Vt,ThresholdEvent:()=>Ws,TickRotations:()=>Br,ToolbarControlTypes:()=>Ce,TooltipEvent:()=>Yn,TreeChartComponent:()=>ls,TreeEvent:()=>Is,TreeTypes:()=>Si,TreemapChartComponent:()=>cs,TreemapEvent:()=>Ns,TruncationTypes:()=>Ct,WordCloudChartComponent:()=>us,WordCloudEvent:()=>Ms,ZoomBarTypes:()=>Mt,ZoomDomainEvent:()=>Ss,ZoombarEvent:()=>Es});var g=Ei(87536),Ts=(t=>(t.RENDER_FINISHED="render-finished",t.RESIZE="chart-resize",t.MOUSEOVER="chart-mouseover",t.MOUSEOUT="chart-mouseout",t))(Ts||{}),xs=(t=>(t.SHOW="show-modal",t.HIDE="hide-modal",t))(xs||{}),bs=(t=>(t.UPDATE="model-update",t))(bs||{}),_d=(t=>(t.SHOW_OVERFLOW_MENU="show-toolbar-overflow-menu",t.HIDE_OVERFLOW_MENU="hide-toolbar-overflow-menu",t.BUTTON_CLICK="toolbar-button-click",t.SHOW_TOOLTIP="toolbar-show-tooltip",t.HIDE_TOOLTIP="toolbar-hide-tooltip",t))(_d||{}),Es=(t=>(t.UPDATE="zoom-bar-update",t.SELECTION_START="zoom-bar-selection-start",t.SELECTION_IN_PROGRESS="zoom-bar-selection-in-progress",t.SELECTION_END="zoom-bar-selection-end",t))(Es||{}),Ss=(t=>(t.CHANGE="zoom-domain-change",t))(Ss||{}),Os=(t=>(t.CANVAS_ZOOM_IN="canvas-zoom-in",t.CANVAS_ZOOM_OUT="canvas-zoom-out",t))(Os||{}),ws=(t=>(t.LABEL_MOUSEOVER="axis-label-mouseover",t.LABEL_MOUSEMOVE="axis-label-mousemove",t.LABEL_CLICK="axis-label-click",t.LABEL_MOUSEOUT="axis-label-mouseout",t.LABEL_FOCUS="axis-label-focus",t.LABEL_BLUR="axis-label-blur",t.RENDER_COMPLETE="axis-render-complete",t))(ws||{}),Fs=(t=>(t.POINT_MOUSEOVER="scatter-mouseover",t.POINT_MOUSEMOVE="scatter-mousemove",t.POINT_CLICK="scatter-click",t.POINT_MOUSEOUT="scatter-mouseout",t))(Fs||{}),Ms=(t=>(t.WORD_MOUSEOVER="wordcloud-word-mouseover",t.WORD_MOUSEMOVE="wordcloud-word-mousemove",t.WORD_CLICK="wordcloud-word-click",t.WORD_MOUSEOUT="wordcloud-word-mouseout",t))(Ms||{}),As=(t=>(t.SLICE_MOUSEOVER="pie-slice-mouseover",t.SLICE_MOUSEMOVE="pie-slice-mousemove",t.SLICE_CLICK="pie-slice-click",t.SLICE_MOUSEOUT="pie-slice-mouseout",t))(As||{}),ks=(t=>(t.ARC_MOUSEOVER="gauge-arc-mouseover",t.ARC_MOUSEMOVE="gauge-arc-mousemove",t.ARC_CLICK="gauge-arc-click",t.ARC_MOUSEOUT="gauge-arc-mouseout",t))(ks||{}),Bs=(t=>(t.BAR_MOUSEOVER="bar-mouseover",t.BAR_MOUSEMOVE="bar-mousemove",t.BAR_CLICK="bar-click",t.BAR_MOUSEOUT="bar-mouseout",t))(Bs||{}),Rs=(t=>(t.BOX_MOUSEOVER="box-mouseover",t.BOX_MOUSEMOVE="box-mousemove",t.BOX_CLICK="box-click",t.BOX_MOUSEOUT="box-mouseout",t.OUTLIER_MOUSEOVER="outlier-mouseover",t.OUTLIER_MOUSEMOVE="outlier-mousemove",t.OUTLIER_CLICK="outlier-click",t.OUTLIER_MOUSEOUT="outlier-mouseout",t))(Rs||{}),Ds=(t=>(t.SCATTER_MOUSEOVER="scatter-mouseover",t.SCATTER_MOUSEMOVE="scatter-mousemove",t.SCATTER_CLICK="scatter-click",t.SCATTER_MOUSEOUT="scatter-mouseout",t))(Ds||{}),Hs=(t=>(t.POINT_MOUSEOVER="scatter-mouseover",t.POINT_MOUSEMOVE="scatter-mousemove",t.POINT_CLICK="scatter-click",t.POINT_MOUSEOUT="scatter-mouseout",t))(Hs||{}),Ls=(t=>(t.X_AXIS_MOUSEOVER="radar-x-axis-mouseover",t.X_AXIS_MOUSEMOVE="radar-x-axis-mousemove",t.X_AXIS_CLICK="radar-x-axis-click",t.X_AXIS_MOUSEOUT="radar-x-axis-mouseout",t))(Ls||{}),Is=(t=>(t.NODE_MOUSEOVER="tree-node-mouseover",t.NODE_CLICK="tree-node-click",t.NODE_MOUSEOUT="tree-node-mouseout",t))(Is||{}),Ns=(t=>(t.LEAF_MOUSEOVER="leaf-mouseover",t.LEAF_MOUSEMOVE="leaf-mousemove",t.LEAF_CLICK="leaf-click",t.LEAF_MOUSEOUT="leaf-mouseout",t))(Ns||{}),Yn=(t=>(t.SHOW="show-tooltip",t.MOVE="move-tooltip",t.HIDE="hide-tooltip",t))(Yn||{}),Ws=(t=>(t.SHOW="show-threshold",t.HIDE="hide-threshold",t))(Ws||{}),vd=(t=>(t.ITEM_HOVER="legend-item-onhover",t.ITEM_CLICK="legend-item-onclick",t.ITEM_MOUSEOUT="legend-item-onmouseout",t.ITEMS_UPDATE="legend-items-update",t))(vd||{}),yd=(t=>(t.CIRCLE_MOUSEOVER="circle-leaf-mouseover",t.CIRCLE_CLICK="circle-leaf-click",t.CIRCLE_MOUSEOUT="circle-leaf-mouseout",t.CIRCLE_MOUSEMOVE="circle-leaf-mousemove",t))(yd||{}),Cd=(t=>(t.NODE_MOUSEOVER="alluvial-node-mouseover",t.NODE_CLICK="alluvial-node-click",t.NODE_MOUSEOUT="alluvial-node-mouseout",t.NODE_MOUSEMOVE="alluvial-node-mousemove",t.LINE_MOUSEOVER="alluvial-line-mouseover",t.LINE_CLICK="alluvial-line-click",t.LINE_MOUSEOUT="alluvial-line-mouseout",t.LINE_MOUSEMOVE="alluvial-line-mousemove",t))(Cd||{}),Td=(t=>(t.METER_MOUSEOVER="meter-mouseover",t.METER_CLICK="meter-click",t.METER_MOUSEOUT="meter-mouseout",t.METER_MOUSEMOVE="meter-mousemove",t))(Td||{}),xd=(t=>(t.HEATMAP_MOUSEOVER="heatmap-mouseover",t.HEATMAP_CLICK="heatmap-click",t.HEATMAP_MOUSEOUT="heatmap-mouseout",t.HEATMAP_MOUSEMOVE="hetmap-mousemove",t))(xd||{}),Mr=(t=>(t.CHOROPLETH_MOUSEOVER="choropleth-mouseover",t.CHOROPLETH_CLICK="choropleth-click",t.CHOROPLETH_MOUSEOUT="choropleth-mouseout",t.CHOROPLETH_MOUSEMOVE="choropleth-mousemove",t))(Mr||{});const bd=Object.freeze(Object.defineProperty({__proto__:null,Alluvial:Cd,Area:Fs,Axis:ws,Bar:Bs,Boxplot:Rs,CanvasZoom:Os,Chart:Ts,Choropleth:Mr,CirclePack:yd,Gauge:ks,Heatmap:xd,Legend:vd,Line:Hs,Meter:Td,Modal:xs,Model:bs,Pie:As,Radar:Ls,Scatter:Ds,Threshold:Ws,Toolbar:_d,Tooltip:Yn,Tree:Is,Treemap:Ns,WordCloud:Ms,ZoomBar:Es,ZoomDomain:Ss},Symbol.toStringTag,{value:"Module"})),O=bd;var re=(t=>(t.HTML="html",t.SVG="svg",t))(re||{}),Vs=(t=>(t.WHITE="white",t.G100="g100",t.G90="g90",t.G10="g10",t))(Vs||{}),oe=(t=>(t.BACKGROUND="background",t.FILL="fill",t.STROKE="stroke",t.TOOLTIP="tooltip",t))(oe||{}),j=(t=>(t.LEFT="left",t.RIGHT="right",t.TOP="top",t.BOTTOM="bottom",t))(j||{}),Mt=(t=>(t.GRAPH_VIEW="graph_view",t.SLIDER_VIEW="slider_view",t))(Mt||{}),Ct=(t=>(t.END_LINE="end_line",t.MID_LINE="mid_line",t.FRONT_LINE="front_line",t.NONE="none",t))(Ct||{}),je=(t=>(t.VERTICAL="vertical",t.HORIZONTAL="horizontal",t))(je||{}),ne=(t=>(t.TIME="time",t.LINEAR="linear",t.LOG="log",t.LABELS="labels",t.LABELS_RATIO="labels-ratio",t))(ne||{}),Xn=(t=>(t.RIGHT="right",t.LEFT="left",t.TOP="top",t.BOTTOM="bottom",t))(Xn||{}),$e=(t=>(t.LEFT="left",t.CENTER="center",t.RIGHT="right",t))($e||{}),Zn=(t=>(t.HORIZONTAL="horizontal",t.VERTICAL="vertical",t))(Zn||{}),Si=(t=>(t.TREE="tree",t.DENDROGRAM="dendrogram",t))(Si||{}),Fe=(t=>(t.ROW="row",t.COLUMN="column",t.ROW_REVERSE="row-reverse",t.COLUMN_REVERSE="column-reverse",t))(Fe||{}),ce=(t=>(t.FIXED="fixed",t.PREFERRED="preferred",t.STRETCH="stretch",t))(ce||{}),Wn=(t=>(t.CENTER="center",t))(Wn||{}),Ar=(t=>(t.LEFT="left",t.RIGHT="right",t))(Ar||{}),Ge=(t=>(t.GRID="grid",t.VERT_OR_HORIZ="vertOrHoriz",t.PIE="pie",t.DONUT="donut",t))(Ge||{}),Vt=(t=>(t.START="start",t.MIDDLE="middle",t.END="end",t))(Vt||{}),Pt=(t=>(t.BASELINE="baseline",t.MIDDLE="middle",t.HANGING="hanging",t))(Pt||{}),Vn=(t=>(t.SEMI="semi",t.FULL="full",t))(Vn||{}),Oi=(t=>(t.UP="up",t.DOWN="down",t))(Oi||{}),kr=(t=>(t.SUCCESS="success",t.WARNING="warning",t.DANGER="danger",t))(kr||{}),Br=(t=>(t.ALWAYS="always",t.AUTO="auto",t.NEVER="never",t))(Br||{}),pt=(t=>(t.SCATTER="scatter",t.LINE="line",t.SIMPLE_BAR="simple-bar",t.STACKED_BAR="stacked-bar",t.GROUPED_BAR="grouped-bar",t.AREA="area",t.STACKED_AREA="stacked-area",t))(pt||{}),Ce=(t=>(t.EXPORT_CSV="Export as CSV",t.EXPORT_PNG="Export as PNG",t.EXPORT_JPG="Export as JPG",t.ZOOM_IN="Zoom in",t.ZOOM_OUT="Zoom out",t.RESET_ZOOM="Reset zoom",t.MAKE_FULLSCREEN="Make fullscreen",t.EXIT_FULLSCREEN="Exit fullscreen",t.SHOW_AS_DATATABLE="Show as data-table",t.CUSTOM="Custom",t))(Ce||{}),wi=(t=>(t.LEFT="left",t.RIGHT="right",t))(wi||{}),ze=(t=>(t.CHECKBOX="checkbox",t.RADIUS="radius",t.AREA="area",t.SIZE="size",t.LINE="line",t.QUARTILE="quartile",t.ZOOM="zoom",t))(ze||{}),Rr=(t=>(t.LINEAR="linear",t.QUANTIZE="quantize",t))(Rr||{}),Qn=(t=>(t.ON="on",t.AUTO="auto",t.OFF="off",t))(Qn||{}),Dr=(t=>(t.DEFAULT="default",t.HOVERABLE="hoverable",t))(Dr||{}),Ut=(t=>(t.geoEqualEarth="geoEqualEarth",t.geoAlbers="geoAlbers",t.geoConicEqualArea="geoConicEqualArea",t.geoConicEquidistant="geoConicEquidistant",t.geoEquirectangular="geoEquirectangular",t.geoMercator="geoMercator",t.geoNaturalEarth1="geoNaturalEarth1",t))(Ut||{}),Il=(t=>(t["15seconds"]="15seconds",t.minute="minute",t["30minutes"]="30minutes",t.hourly="hourly",t.daily="daily",t.weekly="weekly",t.monthly="monthly",t.quarterly="quarterly",t.yearly="yearly",t))(Il||{});function Nl(t){return(e={})=>{const n=e.width?String(e.width):t.defaultWidth;return t.formats[n]||t.formats[t.defaultWidth]}}function Fi(t){return(e,n)=>{let i;if("formatting"===(null!=n&&n.context?String(n.context):"standalone")&&t.formattingValues){const s=t.defaultFormattingWidth||t.defaultWidth,a=null!=n&&n.width?String(n.width):s;i=t.formattingValues[a]||t.formattingValues[s]}else{const s=t.defaultWidth,a=null!=n&&n.width?String(n.width):t.defaultWidth;i=t.values[a]||t.values[s]}return i[t.argumentCallback?t.argumentCallback(e):e]}}function Mi(t){return(e,n={})=>{const r=n.width,i=r&&t.matchPatterns[r]||t.matchPatterns[t.defaultMatchWidth],o=e.match(i);if(!o)return null;const s=o[0],a=r&&t.parsePatterns[r]||t.parsePatterns[t.defaultParseWidth],l=Array.isArray(a)?function k0(t,e){for(let n=0;n<t.length;n++)if(e(t[n]))return n}(a,d=>d.test(s)):function A0(t,e){for(const n in t)if(Object.prototype.hasOwnProperty.call(t,n)&&e(t[n]))return n}(a,d=>d.test(s));let c;c=t.valueCallback?t.valueCallback(l):l,c=n.valueCallback?n.valueCallback(c):c;return{value:c,rest:e.slice(s.length)}}}const Ed=6048e5,R0=864e5,Sd=6e4,Od=36e5,wd=Symbol.for("constructDateFrom");function At(t,e){return"function"==typeof t?t(e):t&&"object"==typeof t&&wd in t?t[wd](e):t instanceof Date?new t.constructor(e):new Date(e)}function Jn(t,...e){const n=At.bind(null,e.find(r=>"object"==typeof r));return e.map(n)}let D0={};function Ps(){return D0}function Ne(t,e){return At(e||t,t)}function Ai(t,e){var n,r,i,o;const s=Ps(),a=e?.weekStartsOn??(null==(r=null==(n=e?.locale)?void 0:n.options)?void 0:r.weekStartsOn)??s.weekStartsOn??(null==(o=null==(i=s.locale)?void 0:i.options)?void 0:o.weekStartsOn)??0,l=Ne(t,e?.in),c=l.getDay(),u=(c<a?7:0)+c-a;return l.setDate(l.getDate()-u),l.setHours(0,0,0,0),l}const H0={lessThanXSeconds:{one:"less than a second",other:"less than {{count}} seconds"},xSeconds:{one:"1 second",other:"{{count}} seconds"},halfAMinute:"half a minute",lessThanXMinutes:{one:"less than a minute",other:"less than {{count}} minutes"},xMinutes:{one:"1 minute",other:"{{count}} minutes"},aboutXHours:{one:"about 1 hour",other:"about {{count}} hours"},xHours:{one:"1 hour",other:"{{count}} hours"},xDays:{one:"1 day",other:"{{count}} days"},aboutXWeeks:{one:"about 1 week",other:"about {{count}} weeks"},xWeeks:{one:"1 week",other:"{{count}} weeks"},aboutXMonths:{one:"about 1 month",other:"about {{count}} months"},xMonths:{one:"1 month",other:"{{count}} months"},aboutXYears:{one:"about 1 year",other:"about {{count}} years"},xYears:{one:"1 year",other:"{{count}} years"},overXYears:{one:"over 1 year",other:"over {{count}} years"},almostXYears:{one:"almost 1 year",other:"almost {{count}} years"}},I0={lastWeek:"'last' eeee 'at' p",yesterday:"'yesterday at' p",today:"'today at' p",tomorrow:"'tomorrow at' p",nextWeek:"eeee 'at' p",other:"P"},z0={ordinalNumber:(t,e)=>{const n=Number(t),r=n%100;if(r>20||r<10)switch(r%10){case 1:return n+"st";case 2:return n+"nd";case 3:return n+"rd"}return n+"th"},era:Fi({values:{narrow:["B","A"],abbreviated:["BC","AD"],wide:["Before Christ","Anno Domini"]},defaultWidth:"wide"}),quarter:Fi({values:{narrow:["1","2","3","4"],abbreviated:["Q1","Q2","Q3","Q4"],wide:["1st quarter","2nd quarter","3rd quarter","4th quarter"]},defaultWidth:"wide",argumentCallback:t=>t-1}),month:Fi({values:{narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],abbreviated:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],wide:["January","February","March","April","May","June","July","August","September","October","November","December"]},defaultWidth:"wide"}),day:Fi({values:{narrow:["S","M","T","W","T","F","S"],short:["Su","Mo","Tu","We","Th","Fr","Sa"],abbreviated:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],wide:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},defaultWidth:"wide"}),dayPeriod:Fi({values:{narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"}},defaultWidth:"wide",formattingValues:{narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"}},defaultFormattingWidth:"wide"})},oy={ordinalNumber:function B0(t){return(e,n={})=>{const r=e.match(t.matchPattern);if(!r)return null;const i=r[0],o=e.match(t.parsePattern);if(!o)return null;let s=t.valueCallback?t.valueCallback(o[0]):o[0];s=n.valueCallback?n.valueCallback(s):s;return{value:s,rest:e.slice(i.length)}}}({matchPattern:/^(\d+)(th|st|nd|rd)?/i,parsePattern:/\d+/i,valueCallback:t=>parseInt(t,10)}),era:Mi({matchPatterns:{narrow:/^(b|a)/i,abbreviated:/^(b\.?\s?c\.?|b\.?\s?c\.?\s?e\.?|a\.?\s?d\.?|c\.?\s?e\.?)/i,wide:/^(before christ|before common era|anno domini|common era)/i},defaultMatchWidth:"wide",parsePatterns:{any:[/^b/i,/^(a|c)/i]},defaultParseWidth:"any"}),quarter:Mi({matchPatterns:{narrow:/^[1234]/i,abbreviated:/^q[1234]/i,wide:/^[1234](th|st|nd|rd)? quarter/i},defaultMatchWidth:"wide",parsePatterns:{any:[/1/i,/2/i,/3/i,/4/i]},defaultParseWidth:"any",valueCallback:t=>t+1}),month:Mi({matchPatterns:{narrow:/^[jfmasond]/i,abbreviated:/^(jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec)/i,wide:/^(january|february|march|april|may|june|july|august|september|october|november|december)/i},defaultMatchWidth:"wide",parsePatterns:{narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ja/i,/^f/i,/^mar/i,/^ap/i,/^may/i,/^jun/i,/^jul/i,/^au/i,/^s/i,/^o/i,/^n/i,/^d/i]},defaultParseWidth:"any"}),day:Mi({matchPatterns:{narrow:/^[smtwf]/i,short:/^(su|mo|tu|we|th|fr|sa)/i,abbreviated:/^(sun|mon|tue|wed|thu|fri|sat)/i,wide:/^(sunday|monday|tuesday|wednesday|thursday|friday|saturday)/i},defaultMatchWidth:"wide",parsePatterns:{narrow:[/^s/i,/^m/i,/^t/i,/^w/i,/^t/i,/^f/i,/^s/i],any:[/^su/i,/^m/i,/^tu/i,/^w/i,/^th/i,/^f/i,/^sa/i]},defaultParseWidth:"any"}),dayPeriod:Mi({matchPatterns:{narrow:/^(a|p|mi|n|(in the|at) (morning|afternoon|evening|night))/i,any:/^([ap]\.?\s?m\.?|midnight|noon|(in the|at) (morning|afternoon|evening|night))/i},defaultMatchWidth:"any",parsePatterns:{any:{am:/^a/i,pm:/^p/i,midnight:/^mi/i,noon:/^no/i,morning:/morning/i,afternoon:/afternoon/i,evening:/evening/i,night:/night/i}},defaultParseWidth:"any"})},Fd={code:"en-US",formatDistance:(t,e,n)=>{let r;const i=H0[t];return r="string"==typeof i?i:1===e?i.one:i.other.replace("{{count}}",e.toString()),null!=n&&n.addSuffix?n.comparison&&n.comparison>0?"in "+r:r+" ago":r},formatLong:{date:Nl({formats:{full:"EEEE, MMMM do, y",long:"MMMM do, y",medium:"MMM d, y",short:"MM/dd/yyyy"},defaultWidth:"full"}),time:Nl({formats:{full:"h:mm:ss a zzzz",long:"h:mm:ss a z",medium:"h:mm:ss a",short:"h:mm a"},defaultWidth:"full"}),dateTime:Nl({formats:{full:"{{date}} 'at' {{time}}",long:"{{date}} 'at' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},defaultWidth:"full"})},formatRelative:(t,e,n,r)=>I0[t],localize:z0,match:oy,options:{weekStartsOn:0,firstWeekContainsDate:1}};var Md="object"==typeof global&&global&&global.Object===Object&&global,uy="object"==typeof self&&self&&self.Object===Object&&self,jt=Md||uy||Function("return this")(),kt=jt.Symbol,Ad=Object.prototype,hy=Ad.hasOwnProperty,dy=Ad.toString,ki=kt?kt.toStringTag:void 0;var gy=Object.prototype.toString;var _y="[object Null]",vy="[object Undefined]",kd=kt?kt.toStringTag:void 0;function er(t){return null==t?void 0===t?vy:_y:kd&&kd in Object(t)?function py(t){var e=hy.call(t,ki),n=t[ki];try{t[ki]=void 0;var r=!0}catch{}var i=dy.call(t);return r&&(e?t[ki]=n:delete t[ki]),i}(t):function fy(t){return gy.call(t)}(t)}function nn(t){return null!=t&&"object"==typeof t}var yy="[object Symbol]";function Us(t){return"symbol"==typeof t||nn(t)&&er(t)==yy}function Wl(t,e){for(var n=-1,r=null==t?0:t.length,i=Array(r);++n<r;)i[n]=e(t[n],n,t);return i}var Qe=Array.isArray,Bd=kt?kt.prototype:void 0,Rd=Bd?Bd.toString:void 0;function Dd(t){if("string"==typeof t)return t;if(Qe(t))return Wl(t,Dd)+"";if(Us(t))return Rd?Rd.call(t):"";var e=t+"";return"0"==e&&1/t==-1/0?"-0":e}function Bt(t){var e=typeof t;return null!=t&&("object"==e||"function"==e)}function Vl(t){return t}var Cy="[object AsyncFunction]",Ty="[object Function]",xy="[object GeneratorFunction]",by="[object Proxy]";function Pl(t){if(!Bt(t))return!1;var e=er(t);return e==Ty||e==xy||e==Cy||e==by}var t,Ul=jt["__core-js_shared__"],Hd=(t=/[^.]+$/.exec(Ul&&Ul.keys&&Ul.keys.IE_PROTO||""))?"Symbol(src)_1."+t:"";var Oy=Function.prototype.toString;function tr(t){if(null!=t){try{return Oy.call(t)}catch{}try{return t+""}catch{}}return""}var Fy=/^\[object .+?Constructor\]$/,My=Function.prototype,Ay=Object.prototype,ky=My.toString,By=Ay.hasOwnProperty,Ry=RegExp("^"+ky.call(By).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function Dy(t){return!(!Bt(t)||function Ey(t){return!!Hd&&Hd in t}(t))&&(Pl(t)?Ry:Fy).test(tr(t))}function nr(t,e){var n=function Hy(t,e){return t?.[e]}(t,e);return Dy(n)?n:void 0}var jl=nr(jt,"WeakMap"),Ld=Object.create,Ly=function(){function t(){}return function(e){if(!Bt(e))return{};if(Ld)return Ld(e);t.prototype=e;var n=new t;return t.prototype=void 0,n}}();function Id(t,e){var n=-1,r=t.length;for(e||(e=Array(r));++n<r;)e[n]=t[n];return e}var Py=Date.now;function jy(t){return function(){return t}}var js=function(){try{var t=nr(Object,"defineProperty");return t({},"",{}),t}catch{}}(),$y=js?function(t,e){return js(t,"toString",{configurable:!0,enumerable:!1,value:jy(e),writable:!0})}:Vl,Nd=function Uy(t){var e=0,n=0;return function(){var r=Py(),i=16-(r-n);if(n=r,i>0){if(++e>=800)return arguments[0]}else e=0;return t.apply(void 0,arguments)}}($y);function Ky(t){return t!=t}function Xy(t,e){return!!(null==t?0:t.length)&&function Yy(t,e,n){return e==e?function qy(t,e,n){for(var r=n-1,i=t.length;++r<i;)if(t[r]===e)return r;return-1}(t,e,n):function zy(t,e,n){for(var i=t.length,o=n+-1;++o<i;)if(e(t[o],o,t))return o;return-1}(t,Ky,n)}(t,e,0)>-1}var Zy=9007199254740991,Qy=/^(?:0|[1-9]\d*)$/;function $l(t,e){var n=typeof t;return!!(e=e??Zy)&&("number"==n||"symbol"!=n&&Qy.test(t))&&t>-1&&t%1==0&&t<e}function $s(t,e,n){"__proto__"==e&&js?js(t,e,{configurable:!0,enumerable:!0,value:n,writable:!0}):t[e]=n}function Bi(t,e){return t===e||t!=t&&e!=e}var e1=Object.prototype.hasOwnProperty;function Wd(t,e,n){var r=t[e];(!e1.call(t,e)||!Bi(r,n)||void 0===n&&!(e in t))&&$s(t,e,n)}function Hr(t,e,n,r){var i=!n;n||(n={});for(var o=-1,s=e.length;++o<s;){var a=e[o],l=void 0;void 0===l&&(l=t[a]),i?$s(n,a,l):Wd(n,a,l)}return n}var Vd=Math.max;function Pd(t,e,n){return e=Vd(void 0===e?t.length-1:e,0),function(){for(var r=arguments,i=-1,o=Vd(r.length-e,0),s=Array(o);++i<o;)s[i]=r[e+i];i=-1;for(var a=Array(e+1);++i<e;)a[i]=r[i];return a[e]=n(s),function Iy(t,e,n){switch(n.length){case 0:return t.call(e);case 1:return t.call(e,n[0]);case 2:return t.call(e,n[0],n[1]);case 3:return t.call(e,n[0],n[1],n[2])}return t.apply(e,n)}(t,this,a)}}function Gl(t,e){return Nd(Pd(t,e,Vl),t+"")}var t1=9007199254740991;function zl(t){return"number"==typeof t&&t>-1&&t%1==0&&t<=t1}function rr(t){return null!=t&&zl(t.length)&&!Pl(t)}var i1=Object.prototype;function Gs(t){var e=t&&t.constructor;return t===("function"==typeof e&&e.prototype||i1)}function Ud(t){return nn(t)&&"[object Arguments]"==er(t)}var jd=Object.prototype,a1=jd.hasOwnProperty,l1=jd.propertyIsEnumerable,Lr=Ud(function(){return arguments}())?Ud:function(t){return nn(t)&&a1.call(t,"callee")&&!l1.call(t,"callee")};var $d="object"==typeof exports&&exports&&!exports.nodeType&&exports,Gd=$d&&"object"==typeof module&&module&&!module.nodeType&&module,zd=Gd&&Gd.exports===$d?jt.Buffer:void 0,Ir=(zd?zd.isBuffer:void 0)||function c1(){return!1},De={};function Kl(t){return function(e){return t(e)}}De["[object Float32Array]"]=De["[object Float64Array]"]=De["[object Int8Array]"]=De["[object Int16Array]"]=De["[object Int32Array]"]=De["[object Uint8Array]"]=De["[object Uint8ClampedArray]"]=De["[object Uint16Array]"]=De["[object Uint32Array]"]=!0,De["[object Arguments]"]=De["[object Array]"]=De["[object ArrayBuffer]"]=De["[object Boolean]"]=De["[object DataView]"]=De["[object Date]"]=De["[object Error]"]=De["[object Function]"]=De["[object Map]"]=De["[object Number]"]=De["[object Object]"]=De["[object RegExp]"]=De["[object Set]"]=De["[object String]"]=De["[object WeakMap]"]=!1;var Kd="object"==typeof exports&&exports&&!exports.nodeType&&exports,Ri=Kd&&"object"==typeof module&&module&&!module.nodeType&&module,ql=Ri&&Ri.exports===Kd&&Md.process,Nr=function(){try{return Ri&&Ri.require&&Ri.require("util").types||ql&&ql.binding&&ql.binding("util")}catch{}}(),qd=Nr&&Nr.isTypedArray,zs=qd?Kl(qd):function L1(t){return nn(t)&&zl(t.length)&&!!De[er(t)]},W1=Object.prototype.hasOwnProperty;function Yd(t,e){var n=Qe(t),r=!n&&Lr(t),i=!n&&!r&&Ir(t),o=!n&&!r&&!i&&zs(t),s=n||r||i||o,a=s?function o1(t,e){for(var n=-1,r=Array(t);++n<t;)r[n]=e(n);return r}(t.length,String):[],l=a.length;for(var c in t)(e||W1.call(t,c))&&(!s||!("length"==c||i&&("offset"==c||"parent"==c)||o&&("buffer"==c||"byteLength"==c||"byteOffset"==c)||$l(c,l)))&&a.push(c);return a}function Xd(t,e){return function(n){return t(e(n))}}var V1=Xd(Object.keys,Object),U1=Object.prototype.hasOwnProperty;function Zd(t){if(!Gs(t))return V1(t);var e=[];for(var n in Object(t))U1.call(t,n)&&"constructor"!=n&&e.push(n);return e}function Di(t){return rr(t)?Yd(t):Zd(t)}var G1=Object.prototype.hasOwnProperty;function z1(t){if(!Bt(t))return function j1(t){var e=[];if(null!=t)for(var n in Object(t))e.push(n);return e}(t);var e=Gs(t),n=[];for(var r in t)"constructor"==r&&(e||!G1.call(t,r))||n.push(r);return n}function Hi(t){return rr(t)?Yd(t,!0):z1(t)}var K1=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,q1=/^\w*$/;function Yl(t,e){if(Qe(t))return!1;var n=typeof t;return!("number"!=n&&"symbol"!=n&&"boolean"!=n&&null!=t&&!Us(t))||(q1.test(t)||!K1.test(t)||null!=e&&t in Object(e))}var Li=nr(Object,"create");var J1=Object.prototype.hasOwnProperty;var nC=Object.prototype.hasOwnProperty;function ir(t){var e=-1,n=null==t?0:t.length;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}function Ks(t,e){for(var n=t.length;n--;)if(Bi(t[n][0],e))return n;return-1}ir.prototype.clear=function Y1(){this.__data__=Li?Li(null):{},this.size=0},ir.prototype.delete=function X1(t){var e=this.has(t)&&delete this.__data__[t];return this.size-=e?1:0,e},ir.prototype.get=function eC(t){var e=this.__data__;if(Li){var n=e[t];return"__lodash_hash_undefined__"===n?void 0:n}return J1.call(e,t)?e[t]:void 0},ir.prototype.has=function rC(t){var e=this.__data__;return Li?void 0!==e[t]:nC.call(e,t)},ir.prototype.set=function oC(t,e){var n=this.__data__;return this.size+=this.has(t)?0:1,n[t]=Li&&void 0===e?"__lodash_hash_undefined__":e,this};var lC=Array.prototype.splice;function gn(t){var e=-1,n=null==t?0:t.length;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}gn.prototype.clear=function sC(){this.__data__=[],this.size=0},gn.prototype.delete=function cC(t){var e=this.__data__,n=Ks(e,t);return!(n<0)&&(n==e.length-1?e.pop():lC.call(e,n,1),--this.size,!0)},gn.prototype.get=function uC(t){var e=this.__data__,n=Ks(e,t);return n<0?void 0:e[n][1]},gn.prototype.has=function hC(t){return Ks(this.__data__,t)>-1},gn.prototype.set=function dC(t,e){var n=this.__data__,r=Ks(n,t);return r<0?(++this.size,n.push([t,e])):n[r][1]=e,this};var Ii=nr(jt,"Map");function qs(t,e){var n=t.__data__;return function mC(t){var e=typeof t;return"string"==e||"number"==e||"symbol"==e||"boolean"==e?"__proto__"!==t:null===t}(e)?n["string"==typeof e?"string":"hash"]:n.map}function fn(t){var e=-1,n=null==t?0:t.length;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}fn.prototype.clear=function pC(){this.size=0,this.__data__={hash:new ir,map:new(Ii||gn),string:new ir}},fn.prototype.delete=function gC(t){var e=qs(this,t).delete(t);return this.size-=e?1:0,e},fn.prototype.get=function fC(t){return qs(this,t).get(t)},fn.prototype.has=function _C(t){return qs(this,t).has(t)},fn.prototype.set=function vC(t,e){var n=qs(this,t),r=n.size;return n.set(t,e),this.size+=n.size==r?0:1,this};var yC="Expected a function";function Xl(t,e){if("function"!=typeof t||null!=e&&"function"!=typeof e)throw new TypeError(yC);var n=function(){var r=arguments,i=e?e.apply(this,r):r[0],o=n.cache;if(o.has(i))return o.get(i);var s=t.apply(this,r);return n.cache=o.set(i,s)||o,s};return n.cache=new(Xl.Cache||fn),n}Xl.Cache=fn;var xC=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,bC=/\\(\\)?/g,EC=function TC(t){var e=Xl(t,function(r){return 500===n.size&&n.clear(),r}),n=e.cache;return e}(function(t){var e=[];return 46===t.charCodeAt(0)&&e.push(""),t.replace(xC,function(n,r,i,o){e.push(i?o.replace(bC,"$1"):r||n)}),e});function Ni(t){return null==t?"":Dd(t)}function Ys(t,e){return Qe(t)?t:Yl(t,e)?[t]:EC(Ni(t))}function Wi(t){if("string"==typeof t||Us(t))return t;var e=t+"";return"0"==e&&1/t==-1/0?"-0":e}function Zl(t,e){for(var n=0,r=(e=Ys(e,t)).length;null!=t&&n<r;)t=t[Wi(e[n++])];return n&&n==r?t:void 0}function ve(t,e,n){var r=null==t?void 0:Zl(t,e);return void 0===r?n:r}function Ql(t,e){for(var n=-1,r=e.length,i=t.length;++n<r;)t[i+n]=e[n];return t}var Qd=kt?kt.isConcatSpreadable:void 0;function SC(t){return Qe(t)||Lr(t)||!!(Qd&&t&&t[Qd])}function Xs(t,e,n,r,i){var o=-1,s=t.length;for(n||(n=SC),i||(i=[]);++o<s;){var a=t[o];e>0&&n(a)?e>1?Xs(a,e-1,n,r,i):Ql(i,a):r||(i[i.length]=a)}return i}var Jl=Xd(Object.getPrototypeOf,Object),OC="[object Object]",wC=Function.prototype,FC=Object.prototype,Jd=wC.toString,MC=FC.hasOwnProperty,AC=Jd.call(Object);function ep(t){if(!nn(t)||er(t)!=OC)return!1;var e=Jl(t);if(null===e)return!0;var n=MC.call(e,"constructor")&&e.constructor;return"function"==typeof n&&n instanceof n&&Jd.call(n)==AC}function $t(t){var e=this.__data__=new gn(t);this.size=e.size}$t.prototype.clear=function kC(){this.__data__=new gn,this.size=0},$t.prototype.delete=function BC(t){var e=this.__data__,n=e.delete(t);return this.size=e.size,n},$t.prototype.get=function RC(t){return this.__data__.get(t)},$t.prototype.has=function DC(t){return this.__data__.has(t)},$t.prototype.set=function LC(t,e){var n=this.__data__;if(n instanceof gn){var r=n.__data__;if(!Ii||r.length<199)return r.push([t,e]),this.size=++n.size,this;n=this.__data__=new fn(r)}return n.set(t,e),this.size=n.size,this};var tp="object"==typeof exports&&exports&&!exports.nodeType&&exports,np=tp&&"object"==typeof module&&module&&!module.nodeType&&module,rp=np&&np.exports===tp?jt.Buffer:void 0,ip=rp?rp.allocUnsafe:void 0;function op(t,e){if(e)return t.slice();var n=t.length,r=ip?ip(n):new t.constructor(n);return t.copy(r),r}function sp(){return[]}var UC=Object.prototype.propertyIsEnumerable,ap=Object.getOwnPropertySymbols,ec=ap?function(t){return null==t?[]:(t=Object(t),function VC(t,e){for(var n=-1,r=null==t?0:t.length,i=0,o=[];++n<r;){var s=t[n];e(s,n,t)&&(o[i++]=s)}return o}(ap(t),function(e){return UC.call(t,e)}))}:sp;var lp=Object.getOwnPropertySymbols?function(t){for(var e=[];t;)Ql(e,ec(t)),t=Jl(t);return e}:sp;function cp(t,e,n){var r=e(t);return Qe(t)?r:Ql(r,n(t))}function tc(t){return cp(t,Di,ec)}function up(t){return cp(t,Hi,lp)}var nc=nr(jt,"DataView"),rc=nr(jt,"Promise"),Wr=nr(jt,"Set"),hp="[object Map]",dp="[object Promise]",pp="[object Set]",mp="[object WeakMap]",gp="[object DataView]",KC=tr(nc),qC=tr(Ii),YC=tr(rc),XC=tr(Wr),ZC=tr(jl),Rt=er;(nc&&Rt(new nc(new ArrayBuffer(1)))!=gp||Ii&&Rt(new Ii)!=hp||rc&&Rt(rc.resolve())!=dp||Wr&&Rt(new Wr)!=pp||jl&&Rt(new jl)!=mp)&&(Rt=function(t){var e=er(t),n="[object Object]"==e?t.constructor:void 0,r=n?tr(n):"";if(r)switch(r){case KC:return gp;case qC:return hp;case YC:return dp;case XC:return pp;case ZC:return mp}return e});var JC=Object.prototype.hasOwnProperty;var Zs=jt.Uint8Array;function ic(t){var e=new t.constructor(t.byteLength);return new Zs(e).set(new Zs(t)),e}var nT=/\w*$/;var fp=kt?kt.prototype:void 0,_p=fp?fp.valueOf:void 0;function vp(t,e){var n=e?ic(t.buffer):t.buffer;return new t.constructor(n,t.byteOffset,t.length)}var oT="[object Boolean]",sT="[object Date]",aT="[object Map]",lT="[object Number]",cT="[object RegExp]",uT="[object Set]",hT="[object String]",dT="[object Symbol]",pT="[object ArrayBuffer]",mT="[object DataView]",gT="[object Float32Array]",fT="[object Float64Array]",_T="[object Int8Array]",vT="[object Int16Array]",yT="[object Int32Array]",CT="[object Uint8Array]",TT="[object Uint8ClampedArray]",xT="[object Uint16Array]",bT="[object Uint32Array]";function ET(t,e,n){var r=t.constructor;switch(e){case pT:return ic(t);case oT:case sT:return new r(+t);case mT:return function tT(t,e){var n=e?ic(t.buffer):t.buffer;return new t.constructor(n,t.byteOffset,t.byteLength)}(t,n);case gT:case fT:case _T:case vT:case yT:case CT:case TT:case xT:case bT:return vp(t,n);case aT:return new r;case lT:case hT:return new r(t);case cT:return function rT(t){var e=new t.constructor(t.source,nT.exec(t));return e.lastIndex=t.lastIndex,e}(t);case uT:return new r;case dT:return function iT(t){return _p?Object(_p.call(t)):{}}(t)}}function yp(t){return"function"!=typeof t.constructor||Gs(t)?{}:Ly(Jl(t))}var Cp=Nr&&Nr.isMap,wT=Cp?Kl(Cp):function OT(t){return nn(t)&&"[object Map]"==Rt(t)};var Tp=Nr&&Nr.isSet,AT=Tp?Kl(Tp):function MT(t){return nn(t)&&"[object Set]"==Rt(t)},kT=1,BT=2,RT=4,xp="[object Arguments]",bp="[object Function]",NT="[object GeneratorFunction]",Ep="[object Object]",Re={};function Vi(t,e,n,r,i,o){var s,a=e&kT,l=e&BT,c=e&RT;if(n&&(s=i?n(t,r,i,o):n(t)),void 0!==s)return s;if(!Bt(t))return t;var u=Qe(t);if(u){if(s=function eT(t){var e=t.length,n=new t.constructor(e);return e&&"string"==typeof t[0]&&JC.call(t,"index")&&(n.index=t.index,n.input=t.input),n}(t),!a)return Id(t,s)}else{var d=Rt(t),h=d==bp||d==NT;if(Ir(t))return op(t,a);if(d==Ep||d==xp||h&&!i){if(s=l||h?{}:yp(t),!a)return l?function GC(t,e){return Hr(t,lp(t),e)}(t,function NC(t,e){return t&&Hr(e,Hi(e),t)}(s,t)):function jC(t,e){return Hr(t,ec(t),e)}(t,function IC(t,e){return t&&Hr(e,Di(e),t)}(s,t))}else{if(!Re[d])return i?t:{};s=ET(t,d,a)}}o||(o=new $t);var p=o.get(t);if(p)return p;o.set(t,s),AT(t)?t.forEach(function(f){s.add(Vi(f,e,n,f,t,o))}):wT(t)&&t.forEach(function(f,v){s.set(v,Vi(f,e,n,v,t,o))});var _=u?void 0:(c?l?up:tc:l?Hi:Di)(t);return function Gy(t,e){for(var n=-1,r=null==t?0:t.length;++n<r&&!1!==e(t[n],n,t););return t}(_||t,function(f,v){_&&(f=t[v=f]),Wd(s,v,Vi(f,e,n,v,t,o))}),s}Re[xp]=Re["[object Array]"]=Re["[object ArrayBuffer]"]=Re["[object DataView]"]=Re["[object Boolean]"]=Re["[object Date]"]=Re["[object Float32Array]"]=Re["[object Float64Array]"]=Re["[object Int8Array]"]=Re["[object Int16Array]"]=Re["[object Int32Array]"]=Re["[object Map]"]=Re["[object Number]"]=Re[Ep]=Re["[object RegExp]"]=Re["[object Set]"]=Re["[object String]"]=Re["[object Symbol]"]=Re["[object Uint8Array]"]=Re["[object Uint8ClampedArray]"]=Re["[object Uint16Array]"]=Re["[object Uint32Array]"]=!0,Re["[object Error]"]=Re[bp]=Re["[object WeakMap]"]=!1;var rx=1,ix=4;function _n(t){return Vi(t,rx|ix)}function Pi(t){var e=-1,n=null==t?0:t.length;for(this.__data__=new fn;++e<n;)this.add(t[e])}function Sp(t,e){for(var n=-1,r=null==t?0:t.length;++n<r;)if(e(t[n],n,t))return!0;return!1}function Op(t,e){return t.has(e)}Pi.prototype.add=Pi.prototype.push=function sx(t){return this.__data__.set(t,"__lodash_hash_undefined__"),this},Pi.prototype.has=function ax(t){return this.__data__.has(t)};var lx=1,cx=2;function wp(t,e,n,r,i,o){var s=n&lx,a=t.length,l=e.length;if(a!=l&&!(s&&l>a))return!1;var c=o.get(t),u=o.get(e);if(c&&u)return c==e&&u==t;var d=-1,h=!0,p=n&cx?new Pi:void 0;for(o.set(t,e),o.set(e,t);++d<a;){var m=t[d],_=e[d];if(r)var f=s?r(_,m,d,e,t,o):r(m,_,d,t,e,o);if(void 0!==f){if(f)continue;h=!1;break}if(p){if(!Sp(e,function(v,C){if(!Op(p,C)&&(m===v||i(m,v,n,r,o)))return p.push(C)})){h=!1;break}}else if(m!==_&&!i(m,_,n,r,o)){h=!1;break}}return o.delete(t),o.delete(e),h}function ux(t){var e=-1,n=Array(t.size);return t.forEach(function(r,i){n[++e]=[i,r]}),n}function oc(t){var e=-1,n=Array(t.size);return t.forEach(function(r){n[++e]=r}),n}var hx=1,dx=2,px="[object Boolean]",mx="[object Date]",gx="[object Error]",fx="[object Map]",_x="[object Number]",vx="[object RegExp]",yx="[object Set]",Cx="[object String]",Tx="[object Symbol]",xx="[object ArrayBuffer]",bx="[object DataView]",Fp=kt?kt.prototype:void 0,sc=Fp?Fp.valueOf:void 0;var Sx=1,wx=Object.prototype.hasOwnProperty;var Mx=1,Mp="[object Arguments]",Ap="[object Array]",Qs="[object Object]",kp=Object.prototype.hasOwnProperty;function kx(t,e,n,r,i,o){var s=Qe(t),a=Qe(e),l=s?Ap:Rt(t),c=a?Ap:Rt(e),u=(l=l==Mp?Qs:l)==Qs,d=(c=c==Mp?Qs:c)==Qs,h=l==c;if(h&&Ir(t)){if(!Ir(e))return!1;s=!0,u=!1}if(h&&!u)return o||(o=new $t),s||zs(t)?wp(t,e,n,r,i,o):function Ex(t,e,n,r,i,o,s){switch(n){case bx:if(t.byteLength!=e.byteLength||t.byteOffset!=e.byteOffset)return!1;t=t.buffer,e=e.buffer;case xx:return!(t.byteLength!=e.byteLength||!o(new Zs(t),new Zs(e)));case px:case mx:case _x:return Bi(+t,+e);case gx:return t.name==e.name&&t.message==e.message;case vx:case Cx:return t==e+"";case fx:var a=ux;case yx:var l=r&hx;if(a||(a=oc),t.size!=e.size&&!l)return!1;var c=s.get(t);if(c)return c==e;r|=dx,s.set(t,e);var u=wp(a(t),a(e),r,i,o,s);return s.delete(t),u;case Tx:if(sc)return sc.call(t)==sc.call(e)}return!1}(t,e,l,n,r,i,o);if(!(n&Mx)){var p=u&&kp.call(t,"__wrapped__"),m=d&&kp.call(e,"__wrapped__");if(p||m){var _=p?t.value():t,f=m?e.value():e;return o||(o=new $t),i(_,f,n,r,o)}}return!!h&&(o||(o=new $t),function Fx(t,e,n,r,i,o){var s=n&Sx,a=tc(t),l=a.length;if(l!=tc(e).length&&!s)return!1;for(var d=l;d--;){var h=a[d];if(!(s?h in e:wx.call(e,h)))return!1}var p=o.get(t),m=o.get(e);if(p&&m)return p==e&&m==t;var _=!0;o.set(t,e),o.set(e,t);for(var f=s;++d<l;){var v=t[h=a[d]],C=e[h];if(r)var x=s?r(C,v,h,e,t,o):r(v,C,h,t,e,o);if(!(void 0===x?v===C||i(v,C,n,r,o):x)){_=!1;break}f||(f="constructor"==h)}if(_&&!f){var b=t.constructor,T=e.constructor;b!=T&&"constructor"in t&&"constructor"in e&&!("function"==typeof b&&b instanceof b&&"function"==typeof T&&T instanceof T)&&(_=!1)}return o.delete(t),o.delete(e),_}(t,e,n,r,i,o))}function Js(t,e,n,r,i){return t===e||(null==t||null==e||!nn(t)&&!nn(e)?t!=t&&e!=e:kx(t,e,n,r,Js,i))}var Bx=1,Rx=2;function Bp(t){return t==t&&!Bt(t)}function Rp(t,e){return function(n){return null!=n&&(n[t]===e&&(void 0!==e||t in Object(n)))}}function Lx(t){var e=function Hx(t){for(var e=Di(t),n=e.length;n--;){var r=e[n],i=t[r];e[n]=[r,i,Bp(i)]}return e}(t);return 1==e.length&&e[0][2]?Rp(e[0][0],e[0][1]):function(n){return n===t||function Dx(t,e,n,r){var i=n.length,o=i;if(null==t)return!o;for(t=Object(t);i--;){var s=n[i];if(s[2]?s[1]!==t[s[0]]:!(s[0]in t))return!1}for(;++i<o;){var a=(s=n[i])[0],l=t[a],c=s[1];if(s[2]){if(void 0===l&&!(a in t))return!1}else{var u=new $t;if(!Js(c,l,Bx|Rx,r,u))return!1}}return!0}(n,0,e)}}function Ix(t,e){return null!=t&&e in Object(t)}function Wx(t,e){return null!=t&&function Nx(t,e,n){for(var r=-1,i=(e=Ys(e,t)).length,o=!1;++r<i;){var s=Wi(e[r]);if(!(o=null!=t&&n(t,s)))break;t=t[s]}return o||++r!=i?o:!!(i=null==t?0:t.length)&&zl(i)&&$l(s,i)&&(Qe(t)||Lr(t))}(t,e,Ix)}var Vx=1,Px=2;function Gx(t){return Yl(t)?function jx(t){return function(e){return e?.[t]}}(Wi(t)):function $x(t){return function(e){return Zl(e,t)}}(t)}function ea(t){return"function"==typeof t?t:null==t?Vl:"object"==typeof t?Qe(t)?function Ux(t,e){return Yl(t)&&Bp(e)?Rp(Wi(t),e):function(n){var r=ve(n,t);return void 0===r&&r===e?Wx(n,t):Js(e,r,Vx|Px)}}(t[0],t[1]):Lx(t):Gx(t)}var Dp=function zx(t){return function(e,n,r){for(var i=-1,o=Object(e),s=r(e),a=s.length;a--;){var l=s[++i];if(!1===n(o[l],l,o))break}return e}}();function ac(t,e,n){(void 0!==n&&!Bi(t[e],n)||void 0===n&&!(e in t))&&$s(t,e,n)}function lc(t){return nn(t)&&rr(t)}function cc(t,e){if(("constructor"!==e||"function"!=typeof t[e])&&"__proto__"!=e)return t[e]}function qx(t,e,n,r,i,o,s){var a=cc(t,n),l=cc(e,n),c=s.get(l);if(c)ac(t,n,c);else{var u=o?o(a,l,n+"",t,e,s):void 0,d=void 0===u;if(d){var h=Qe(l),p=!h&&Ir(l),m=!h&&!p&&zs(l);u=l,h||p||m?Qe(a)?u=a:lc(a)?u=Id(a):p?(d=!1,u=op(l,!0)):m?(d=!1,u=vp(l,!0)):u=[]:ep(l)||Lr(l)?(u=a,Lr(a)?u=function Kx(t){return Hr(t,Hi(t))}(a):(!Bt(a)||Pl(a))&&(u=yp(l))):d=!1}d&&(s.set(l,u),i(u,l,r,o,s),s.delete(l)),ac(t,n,u)}}function Hp(t,e,n,r,i){t!==e&&Dp(e,function(o,s){if(i||(i=new $t),Bt(o))qx(t,e,s,n,Hp,r,i);else{var a=r?r(cc(t,s),o,s+"",t,e,i):void 0;void 0===a&&(a=o),ac(t,s,a)}},Hi)}function Lp(t){var e=null==t?0:t.length;return e?t[e-1]:void 0}var Yx="[object Map]",Xx="[object Set]",Qx=Object.prototype.hasOwnProperty;function Gt(t){if(null==t)return!0;if(rr(t)&&(Qe(t)||"string"==typeof t||"function"==typeof t.splice||Ir(t)||zs(t)||Lr(t)))return!t.length;var e=Rt(t);if(e==Yx||e==Xx)return!t.size;if(Gs(t))return!Zd(t).length;for(var n in t)if(Qx.call(t,n))return!1;return!0}var se=function r1(t){return Gl(function(e,n){var r=-1,i=n.length,o=i>1?n[i-1]:void 0,s=i>2?n[2]:void 0;for(o=t.length>3&&"function"==typeof o?(i--,o):void 0,s&&function n1(t,e,n){if(!Bt(n))return!1;var r=typeof e;return!!("number"==r?rr(n)&&$l(e,n.length):"string"==r&&e in n)&&Bi(n[e],t)}(n[0],n[1],s)&&(o=i<3?void 0:o,i=1),e=Object(e);++r<i;){var a=n[r];a&&t(e,a,r,o)}return e})}(function(t,e,n){Hp(t,e,n)}),eb=Wr&&1/oc(new Wr([,-0]))[1]==1/0?function(t){return new Wr(t)}:function Ny(){},tb=200;function Ip(t,e,n){var r=-1,i=Xy,o=t.length,s=!0,a=[],l=a;if(o>=tb){var c=e?null:eb(t);if(c)return oc(c);s=!1,i=Op,l=new Pi}else l=e?[]:a;e:for(;++r<o;){var u=t[r],d=e?e(u):u;if(u=0!==u?u:0,s&&d==d){for(var h=l.length;h--;)if(l[h]===d)continue e;e&&l.push(d),a.push(u)}else i(l,d,n)||(l!==a&&l.push(d),a.push(u))}return a}var nb=Gl(function(t){var e=Lp(t);return lc(e)&&(e=void 0),Ip(Xs(t,1,lc,!0),ea(e))});function Ui(t){return t&&t.length?Ip(t):[]}function or(t,e){return null==t||null==e?NaN:t<e?-1:t>e?1:t>=e?0:NaN}function rb(t,e){return null==t||null==e?NaN:e<t?-1:e>t?1:e>=t?0:NaN}function uc(t){let e,n,r;function i(a,l,c=0,u=a.length){if(c<u){if(0!==e(l,l))return u;do{const d=c+u>>>1;n(a[d],l)<0?c=d+1:u=d}while(c<u)}return c}return 2!==t.length?(e=or,n=(a,l)=>or(t(a),l),r=(a,l)=>t(a)-l):(e=t===or||t===rb?t:ib,n=t,r=t),{left:i,center:function s(a,l,c=0,u=a.length){const d=i(a,l,c,u-1);return d>c&&r(a[d-1],l)>-r(a[d],l)?d-1:d},right:function o(a,l,c=0,u=a.length){if(c<u){if(0!==e(l,l))return u;do{const d=c+u>>>1;n(a[d],l)<=0?c=d+1:u=d}while(c<u)}return c}}}function ib(){return 0}const hc=uc(or).right;function zt(t,e){let n,r;if(void 0===e)for(const i of t)null!=i&&(void 0===n?i>=i&&(n=r=i):(n>i&&(n=i),r<i&&(r=i)));else{let i=-1;for(let o of t)null!=(o=e(o,++i,t))&&(void 0===n?o>=o&&(n=r=o):(n>o&&(n=o),r<o&&(r=o)))}return[n,r]}uc(function ob(t){return null===t?NaN:+t}).center;class Np extends Map{constructor(e,n=ub){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:n}}),null!=e)for(const[r,i]of e)this.set(r,i)}get(e){return super.get(Wp(this,e))}has(e){return super.has(Wp(this,e))}set(e,n){return super.set(function lb({_intern:t,_key:e},n){const r=e(n);return t.has(r)?t.get(r):(t.set(r,n),n)}(this,e),n)}delete(e){return super.delete(function cb({_intern:t,_key:e},n){const r=e(n);return t.has(r)&&(n=t.get(r),t.delete(r)),n}(this,e))}}function Wp({_intern:t,_key:e},n){const r=e(n);return t.has(r)?t.get(r):n}function ub(t){return null!==t&&"object"==typeof t?t.valueOf():t}const hb=Math.sqrt(50),db=Math.sqrt(10),pb=Math.sqrt(2);function ta(t,e,n){const r=(e-t)/Math.max(0,n),i=Math.floor(Math.log10(r)),o=r/Math.pow(10,i),s=o>=hb?10:o>=db?5:o>=pb?2:1;let a,l,c;return i<0?(c=Math.pow(10,-i)/s,a=Math.round(t*c),l=Math.round(e*c),a/c<t&&++a,l/c>e&&--l,c=-c):(c=Math.pow(10,i)*s,a=Math.round(t/c),l=Math.round(e/c),a*c<t&&++a,l*c>e&&--l),l<a&&.5<=n&&n<2?ta(t,e,2*n):[a,l,c]}function na(t,e,n){if(!((n=+n)>0))return[];if((t=+t)===(e=+e))return[t];const r=e<t,[i,o,s]=r?ta(e,t,n):ta(t,e,n);if(!(o>=i))return[];const a=o-i+1,l=new Array(a);if(r)if(s<0)for(let c=0;c<a;++c)l[c]=(o-c)/-s;else for(let c=0;c<a;++c)l[c]=(o-c)*s;else if(s<0)for(let c=0;c<a;++c)l[c]=(i+c)/-s;else for(let c=0;c<a;++c)l[c]=(i+c)*s;return l}function Vr(t,e,n){return ta(t=+t,e=+e,n=+n)[2]}function dc(t,e,n){n=+n;const r=(e=+e)<(t=+t),i=r?Vr(e,t,n):Vr(t,e,n);return(r?-1:1)*(i<0?1/-i:i)}function sr(t,e){let n;if(void 0===e)for(const r of t)null!=r&&(n<r||void 0===n&&r>=r)&&(n=r);else{let r=-1;for(let i of t)null!=(i=e(i,++r,t))&&(n<i||void 0===n&&i>=i)&&(n=i)}return n}function Pn(t,e){let n;for(const r of t)null!=r&&(n>r||void 0===n&&r>=r)&&(n=r);return n}var mb={value:()=>{}};function pc(){for(var r,t=0,e=arguments.length,n={};t<e;++t){if(!(r=arguments[t]+"")||r in n||/[\s.]/.test(r))throw new Error("illegal type: "+r);n[r]=[]}return new ra(n)}function ra(t){this._=t}function fb(t,e){for(var i,n=0,r=t.length;n<r;++n)if((i=t[n]).name===e)return i.value}function Vp(t,e,n){for(var r=0,i=t.length;r<i;++r)if(t[r].name===e){t[r]=mb,t=t.slice(0,r).concat(t.slice(r+1));break}return null!=n&&t.push({name:e,value:n}),t}ra.prototype=pc.prototype={constructor:ra,on:function(t,e){var i,n=this._,r=function gb(t,e){return t.trim().split(/^|\s+/).map(function(n){var r="",i=n.indexOf(".");if(i>=0&&(r=n.slice(i+1),n=n.slice(0,i)),n&&!e.hasOwnProperty(n))throw new Error("unknown type: "+n);return{type:n,name:r}})}(t+"",n),o=-1,s=r.length;if(!(arguments.length<2)){if(null!=e&&"function"!=typeof e)throw new Error("invalid callback: "+e);for(;++o<s;)if(i=(t=r[o]).type)n[i]=Vp(n[i],t.name,e);else if(null==e)for(i in n)n[i]=Vp(n[i],t.name,null);return this}for(;++o<s;)if((i=(t=r[o]).type)&&(i=fb(n[i],t.name)))return i},copy:function(){var t={},e=this._;for(var n in e)t[n]=e[n].slice();return new ra(t)},call:function(t,e){if((i=arguments.length-2)>0)for(var i,o,n=new Array(i),r=0;r<i;++r)n[r]=arguments[r+2];if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(r=0,i=(o=this._[t]).length;r<i;++r)o[r].value.apply(e,n)},apply:function(t,e,n){if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(var r=this._[t],i=0,o=r.length;i<o;++i)r[i].value.apply(e,n)}};var mc="http://www.w3.org/1999/xhtml";const Pp={svg:"http://www.w3.org/2000/svg",xhtml:mc,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function ia(t){var e=t+="",n=e.indexOf(":");return n>=0&&"xmlns"!==(e=t.slice(0,n))&&(t=t.slice(n+1)),Pp.hasOwnProperty(e)?{space:Pp[e],local:t}:t}function _b(t){return function(){var e=this.ownerDocument,n=this.namespaceURI;return n===mc&&e.documentElement.namespaceURI===mc?e.createElement(t):e.createElementNS(n,t)}}function vb(t){return function(){return this.ownerDocument.createElementNS(t.space,t.local)}}function Up(t){var e=ia(t);return(e.local?vb:_b)(e)}function yb(){}function gc(t){return null==t?yb:function(){return this.querySelector(t)}}function xb(){return[]}function jp(t){return null==t?xb:function(){return this.querySelectorAll(t)}}function bb(t){return function(){return function Tb(t){return null==t?[]:Array.isArray(t)?t:Array.from(t)}(t.apply(this,arguments))}}function $p(t){return function(){return this.matches(t)}}function Gp(t){return function(e){return e.matches(t)}}var Sb=Array.prototype.find;function wb(){return this.firstElementChild}var Mb=Array.prototype.filter;function Ab(){return Array.from(this.children)}function zp(t){return new Array(t.length)}function oa(t,e){this.ownerDocument=t.ownerDocument,this.namespaceURI=t.namespaceURI,this._next=null,this._parent=t,this.__data__=e}function Lb(t,e,n,r,i,o){for(var a,s=0,l=e.length,c=o.length;s<c;++s)(a=e[s])?(a.__data__=o[s],r[s]=a):n[s]=new oa(t,o[s]);for(;s<l;++s)(a=e[s])&&(i[s]=a)}function Ib(t,e,n,r,i,o,s){var a,l,p,c=new Map,u=e.length,d=o.length,h=new Array(u);for(a=0;a<u;++a)(l=e[a])&&(h[a]=p=s.call(l,l.__data__,a,e)+"",c.has(p)?i[a]=l:c.set(p,l));for(a=0;a<d;++a)p=s.call(t,o[a],a,o)+"",(l=c.get(p))?(r[a]=l,l.__data__=o[a],c.delete(p)):n[a]=new oa(t,o[a]);for(a=0;a<u;++a)(l=e[a])&&c.get(h[a])===l&&(i[a]=l)}function Nb(t){return t.__data__}function Vb(t){return"object"==typeof t&&"length"in t?t:Array.from(t)}function zb(t,e){return t<e?-1:t>e?1:t>=e?0:NaN}function Jb(t){return function(){this.removeAttribute(t)}}function eE(t){return function(){this.removeAttributeNS(t.space,t.local)}}function tE(t,e){return function(){this.setAttribute(t,e)}}function nE(t,e){return function(){this.setAttributeNS(t.space,t.local,e)}}function rE(t,e){return function(){var n=e.apply(this,arguments);null==n?this.removeAttribute(t):this.setAttribute(t,n)}}function iE(t,e){return function(){var n=e.apply(this,arguments);null==n?this.removeAttributeNS(t.space,t.local):this.setAttributeNS(t.space,t.local,n)}}function Kp(t){return t.ownerDocument&&t.ownerDocument.defaultView||t.document&&t||t.defaultView}function sE(t){return function(){this.style.removeProperty(t)}}function aE(t,e,n){return function(){this.style.setProperty(t,e,n)}}function lE(t,e,n){return function(){var r=e.apply(this,arguments);null==r?this.style.removeProperty(t):this.style.setProperty(t,r,n)}}function Pr(t,e){return t.style.getPropertyValue(e)||Kp(t).getComputedStyle(t,null).getPropertyValue(e)}function uE(t){return function(){delete this[t]}}function hE(t,e){return function(){this[t]=e}}function dE(t,e){return function(){var n=e.apply(this,arguments);null==n?delete this[t]:this[t]=n}}function qp(t){return t.trim().split(/^|\s+/)}function fc(t){return t.classList||new Yp(t)}function Yp(t){this._node=t,this._names=qp(t.getAttribute("class")||"")}function Xp(t,e){for(var n=fc(t),r=-1,i=e.length;++r<i;)n.add(e[r])}function Zp(t,e){for(var n=fc(t),r=-1,i=e.length;++r<i;)n.remove(e[r])}function mE(t){return function(){Xp(this,t)}}function gE(t){return function(){Zp(this,t)}}function fE(t,e){return function(){(e.apply(this,arguments)?Xp:Zp)(this,t)}}function vE(){this.textContent=""}function yE(t){return function(){this.textContent=t}}function CE(t){return function(){var e=t.apply(this,arguments);this.textContent=e??""}}function xE(){this.innerHTML=""}function bE(t){return function(){this.innerHTML=t}}function EE(t){return function(){var e=t.apply(this,arguments);this.innerHTML=e??""}}function OE(){this.nextSibling&&this.parentNode.appendChild(this)}function FE(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function kE(){return null}function RE(){var t=this.parentNode;t&&t.removeChild(this)}function HE(){var t=this.cloneNode(!1),e=this.parentNode;return e?e.insertBefore(t,this.nextSibling):t}function LE(){var t=this.cloneNode(!0),e=this.parentNode;return e?e.insertBefore(t,this.nextSibling):t}function PE(t){return function(){var e=this.__on;if(e){for(var o,n=0,r=-1,i=e.length;n<i;++n)o=e[n],t.type&&o.type!==t.type||o.name!==t.name?e[++r]=o:this.removeEventListener(o.type,o.listener,o.options);++r?e.length=r:delete this.__on}}}function UE(t,e,n){return function(){var i,r=this.__on,o=function WE(t){return function(e){t.call(this,e,this.__data__)}}(e);if(r)for(var s=0,a=r.length;s<a;++s)if((i=r[s]).type===t.type&&i.name===t.name)return this.removeEventListener(i.type,i.listener,i.options),this.addEventListener(i.type,i.listener=o,i.options=n),void(i.value=e);this.addEventListener(t.type,o,n),i={type:t.type,name:t.name,value:e,listener:o,options:n},r?r.push(i):this.__on=[i]}}function Qp(t,e,n){var r=Kp(t),i=r.CustomEvent;"function"==typeof i?i=new i(e,n):(i=r.document.createEvent("Event"),n?(i.initEvent(e,n.bubbles,n.cancelable),i.detail=n.detail):i.initEvent(e,!1,!1)),t.dispatchEvent(i)}function $E(t,e){return function(){return Qp(this,t,e)}}function GE(t,e){return function(){return Qp(this,t,e.apply(this,arguments))}}oa.prototype={constructor:oa,appendChild:function(t){return this._parent.insertBefore(t,this._next)},insertBefore:function(t,e){return this._parent.insertBefore(t,e)},querySelector:function(t){return this._parent.querySelector(t)},querySelectorAll:function(t){return this._parent.querySelectorAll(t)}},Yp.prototype={add:function(t){this._names.indexOf(t)<0&&(this._names.push(t),this._node.setAttribute("class",this._names.join(" ")))},remove:function(t){var e=this._names.indexOf(t);e>=0&&(this._names.splice(e,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(t){return this._names.indexOf(t)>=0}};var Jp=[null];function Tt(t,e){this._groups=t,this._parents=e}function ji(){return new Tt([[document.documentElement]],Jp)}function ar(t,e){if(t=function YE(t){let e;for(;e=t.sourceEvent;)t=e;return t}(t),void 0===e&&(e=t.currentTarget),e){var n=e.ownerSVGElement||e;if(n.createSVGPoint){var r=n.createSVGPoint();return r.x=t.clientX,r.y=t.clientY,[(r=r.matrixTransform(e.getScreenCTM().inverse())).x,r.y]}if(e.getBoundingClientRect){var i=e.getBoundingClientRect();return[t.clientX-i.left-e.clientLeft,t.clientY-i.top-e.clientTop]}}return[t.pageX,t.pageY]}function _c(t,e,n){t.prototype=e.prototype=n,n.constructor=t}function em(t,e){var n=Object.create(t.prototype);for(var r in e)n[r]=e[r];return n}function $i(){}Tt.prototype=ji.prototype={constructor:Tt,select:function Cb(t){"function"!=typeof t&&(t=gc(t));for(var e=this._groups,n=e.length,r=new Array(n),i=0;i<n;++i)for(var l,c,o=e[i],s=o.length,a=r[i]=new Array(s),u=0;u<s;++u)(l=o[u])&&(c=t.call(l,l.__data__,u,o))&&("__data__"in l&&(c.__data__=l.__data__),a[u]=c);return new Tt(r,this._parents)},selectAll:function Eb(t){t="function"==typeof t?bb(t):jp(t);for(var e=this._groups,n=e.length,r=[],i=[],o=0;o<n;++o)for(var l,s=e[o],a=s.length,c=0;c<a;++c)(l=s[c])&&(r.push(t.call(l,l.__data__,c,s)),i.push(l));return new Tt(r,i)},selectChild:function Fb(t){return this.select(null==t?wb:function Ob(t){return function(){return Sb.call(this.children,t)}}("function"==typeof t?t:Gp(t)))},selectChildren:function Bb(t){return this.selectAll(null==t?Ab:function kb(t){return function(){return Mb.call(this.children,t)}}("function"==typeof t?t:Gp(t)))},filter:function Rb(t){"function"!=typeof t&&(t=$p(t));for(var e=this._groups,n=e.length,r=new Array(n),i=0;i<n;++i)for(var l,o=e[i],s=o.length,a=r[i]=[],c=0;c<s;++c)(l=o[c])&&t.call(l,l.__data__,c,o)&&a.push(l);return new Tt(r,this._parents)},data:function Wb(t,e){if(!arguments.length)return Array.from(this,Nb);var n=e?Ib:Lb,r=this._parents,i=this._groups;"function"!=typeof t&&(t=function Hb(t){return function(){return t}}(t));for(var o=i.length,s=new Array(o),a=new Array(o),l=new Array(o),c=0;c<o;++c){var u=r[c],d=i[c],h=d.length,p=Vb(t.call(u,u&&u.__data__,c,r)),m=p.length,_=a[c]=new Array(m),f=s[c]=new Array(m);n(u,d,_,f,l[c]=new Array(h),p,e);for(var b,T,C=0,x=0;C<m;++C)if(b=_[C]){for(C>=x&&(x=C+1);!(T=f[x])&&++x<m;);b._next=T||null}}return(s=new Tt(s,r))._enter=a,s._exit=l,s},enter:function Db(){return new Tt(this._enter||this._groups.map(zp),this._parents)},exit:function Pb(){return new Tt(this._exit||this._groups.map(zp),this._parents)},join:function Ub(t,e,n){var r=this.enter(),i=this,o=this.exit();return"function"==typeof t?(r=t(r))&&(r=r.selection()):r=r.append(t+""),null!=e&&((i=e(i))&&(i=i.selection())),null==n?o.remove():n(o),r&&i?r.merge(i).order():i},merge:function jb(t){for(var e=t.selection?t.selection():t,n=this._groups,r=e._groups,i=n.length,o=r.length,s=Math.min(i,o),a=new Array(i),l=0;l<s;++l)for(var p,c=n[l],u=r[l],d=c.length,h=a[l]=new Array(d),m=0;m<d;++m)(p=c[m]||u[m])&&(h[m]=p);for(;l<i;++l)a[l]=n[l];return new Tt(a,this._parents)},selection:function qE(){return this},order:function $b(){for(var t=this._groups,e=-1,n=t.length;++e<n;)for(var s,r=t[e],i=r.length-1,o=r[i];--i>=0;)(s=r[i])&&(o&&4^s.compareDocumentPosition(o)&&o.parentNode.insertBefore(s,o),o=s);return this},sort:function Gb(t){function e(d,h){return d&&h?t(d.__data__,h.__data__):!d-!h}t||(t=zb);for(var n=this._groups,r=n.length,i=new Array(r),o=0;o<r;++o){for(var c,s=n[o],a=s.length,l=i[o]=new Array(a),u=0;u<a;++u)(c=s[u])&&(l[u]=c);l.sort(e)}return new Tt(i,this._parents).order()},call:function Kb(){var t=arguments[0];return arguments[0]=this,t.apply(null,arguments),this},nodes:function qb(){return Array.from(this)},node:function Yb(){for(var t=this._groups,e=0,n=t.length;e<n;++e)for(var r=t[e],i=0,o=r.length;i<o;++i){var s=r[i];if(s)return s}return null},size:function Xb(){let t=0;for(const e of this)++t;return t},empty:function Zb(){return!this.node()},each:function Qb(t){for(var e=this._groups,n=0,r=e.length;n<r;++n)for(var a,i=e[n],o=0,s=i.length;o<s;++o)(a=i[o])&&t.call(a,a.__data__,o,i);return this},attr:function oE(t,e){var n=ia(t);if(arguments.length<2){var r=this.node();return n.local?r.getAttributeNS(n.space,n.local):r.getAttribute(n)}return this.each((null==e?n.local?eE:Jb:"function"==typeof e?n.local?iE:rE:n.local?nE:tE)(n,e))},style:function cE(t,e,n){return arguments.length>1?this.each((null==e?sE:"function"==typeof e?lE:aE)(t,e,n??"")):Pr(this.node(),t)},property:function pE(t,e){return arguments.length>1?this.each((null==e?uE:"function"==typeof e?dE:hE)(t,e)):this.node()[t]},classed:function _E(t,e){var n=qp(t+"");if(arguments.length<2){for(var r=fc(this.node()),i=-1,o=n.length;++i<o;)if(!r.contains(n[i]))return!1;return!0}return this.each(("function"==typeof e?fE:e?mE:gE)(n,e))},text:function TE(t){return arguments.length?this.each(null==t?vE:("function"==typeof t?CE:yE)(t)):this.node().textContent},html:function SE(t){return arguments.length?this.each(null==t?xE:("function"==typeof t?EE:bE)(t)):this.node().innerHTML},raise:function wE(){return this.each(OE)},lower:function ME(){return this.each(FE)},append:function AE(t){var e="function"==typeof t?t:Up(t);return this.select(function(){return this.appendChild(e.apply(this,arguments))})},insert:function BE(t,e){var n="function"==typeof t?t:Up(t),r=null==e?kE:"function"==typeof e?e:gc(e);return this.select(function(){return this.insertBefore(n.apply(this,arguments),r.apply(this,arguments)||null)})},remove:function DE(){return this.each(RE)},clone:function IE(t){return this.select(t?LE:HE)},datum:function NE(t){return arguments.length?this.property("__data__",t):this.node().__data__},on:function jE(t,e,n){var i,s,r=function VE(t){return t.trim().split(/^|\s+/).map(function(e){var n="",r=e.indexOf(".");return r>=0&&(n=e.slice(r+1),e=e.slice(0,r)),{type:e,name:n}})}(t+""),o=r.length;if(!(arguments.length<2)){for(a=e?UE:PE,i=0;i<o;++i)this.each(a(r[i],e,n));return this}var a=this.node().__on;if(a)for(var u,l=0,c=a.length;l<c;++l)for(i=0,u=a[l];i<o;++i)if((s=r[i]).type===u.type&&s.name===u.name)return u.value},dispatch:function zE(t,e){return this.each(("function"==typeof e?GE:$E)(t,e))},[Symbol.iterator]:function*KE(){for(var t=this._groups,e=0,n=t.length;e<n;++e)for(var s,r=t[e],i=0,o=r.length;i<o;++i)(s=r[i])&&(yield s)}};var sa=1/.7,Ur="\\s*([+-]?\\d+)\\s*",zi="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",rn="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",XE=/^#([0-9a-f]{3,8})$/,ZE=new RegExp(`^rgb\\(${Ur},${Ur},${Ur}\\)$`),QE=new RegExp(`^rgb\\(${rn},${rn},${rn}\\)$`),JE=new RegExp(`^rgba\\(${Ur},${Ur},${Ur},${zi}\\)$`),eS=new RegExp(`^rgba\\(${rn},${rn},${rn},${zi}\\)$`),tS=new RegExp(`^hsl\\(${zi},${rn},${rn}\\)$`),nS=new RegExp(`^hsla\\(${zi},${rn},${rn},${zi}\\)$`),tm={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};function nm(){return this.rgb().formatHex()}function rm(){return this.rgb().formatRgb()}function vn(t){var e,n;return t=(t+"").trim().toLowerCase(),(e=XE.exec(t))?(n=e[1].length,e=parseInt(e[1],16),6===n?im(e):3===n?new mt(e>>8&15|e>>4&240,e>>4&15|240&e,(15&e)<<4|15&e,1):8===n?aa(e>>24&255,e>>16&255,e>>8&255,(255&e)/255):4===n?aa(e>>12&15|e>>8&240,e>>8&15|e>>4&240,e>>4&15|240&e,((15&e)<<4|15&e)/255):null):(e=ZE.exec(t))?new mt(e[1],e[2],e[3],1):(e=QE.exec(t))?new mt(255*e[1]/100,255*e[2]/100,255*e[3]/100,1):(e=JE.exec(t))?aa(e[1],e[2],e[3],e[4]):(e=eS.exec(t))?aa(255*e[1]/100,255*e[2]/100,255*e[3]/100,e[4]):(e=tS.exec(t))?am(e[1],e[2]/100,e[3]/100,1):(e=nS.exec(t))?am(e[1],e[2]/100,e[3]/100,e[4]):tm.hasOwnProperty(t)?im(tm[t]):"transparent"===t?new mt(NaN,NaN,NaN,0):null}function im(t){return new mt(t>>16&255,t>>8&255,255&t,1)}function aa(t,e,n,r){return r<=0&&(t=e=n=NaN),new mt(t,e,n,r)}function vc(t,e,n,r){return 1===arguments.length?function oS(t){return t instanceof $i||(t=vn(t)),t?new mt((t=t.rgb()).r,t.g,t.b,t.opacity):new mt}(t):new mt(t,e,n,r??1)}function mt(t,e,n,r){this.r=+t,this.g=+e,this.b=+n,this.opacity=+r}function om(){return`#${cr(this.r)}${cr(this.g)}${cr(this.b)}`}function sm(){const t=la(this.opacity);return`${1===t?"rgb(":"rgba("}${lr(this.r)}, ${lr(this.g)}, ${lr(this.b)}${1===t?")":`, ${t})`}`}function la(t){return isNaN(t)?1:Math.max(0,Math.min(1,t))}function lr(t){return Math.max(0,Math.min(255,Math.round(t)||0))}function cr(t){return((t=lr(t))<16?"0":"")+t.toString(16)}function am(t,e,n,r){return r<=0?t=e=n=NaN:n<=0||n>=1?t=e=NaN:e<=0&&(t=NaN),new Kt(t,e,n,r)}function lm(t){if(t instanceof Kt)return new Kt(t.h,t.s,t.l,t.opacity);if(t instanceof $i||(t=vn(t)),!t)return new Kt;if(t instanceof Kt)return t;var e=(t=t.rgb()).r/255,n=t.g/255,r=t.b/255,i=Math.min(e,n,r),o=Math.max(e,n,r),s=NaN,a=o-i,l=(o+i)/2;return a?(s=e===o?(n-r)/a+6*(n<r):n===o?(r-e)/a+2:(e-n)/a+4,a/=l<.5?o+i:2-o-i,s*=60):a=l>0&&l<1?0:s,new Kt(s,a,l,t.opacity)}function cm(t,e,n,r){return 1===arguments.length?lm(t):new Kt(t,e,n,r??1)}function Kt(t,e,n,r){this.h=+t,this.s=+e,this.l=+n,this.opacity=+r}function um(t){return(t=(t||0)%360)<0?t+360:t}function ca(t){return Math.max(0,Math.min(1,t||0))}function yc(t,e,n){return 255*(t<60?e+(n-e)*t/60:t<180?n:t<240?e+(n-e)*(240-t)/60:e)}_c($i,vn,{copy(t){return Object.assign(new this.constructor,this,t)},displayable(){return this.rgb().displayable()},hex:nm,formatHex:nm,formatHex8:function rS(){return this.rgb().formatHex8()},formatHsl:function iS(){return lm(this).formatHsl()},formatRgb:rm,toString:rm}),_c(mt,vc,em($i,{brighter(t){return t=null==t?sa:Math.pow(sa,t),new mt(this.r*t,this.g*t,this.b*t,this.opacity)},darker(t){return t=null==t?.7:Math.pow(.7,t),new mt(this.r*t,this.g*t,this.b*t,this.opacity)},rgb(){return this},clamp(){return new mt(lr(this.r),lr(this.g),lr(this.b),la(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:om,formatHex:om,formatHex8:function sS(){return`#${cr(this.r)}${cr(this.g)}${cr(this.b)}${cr(255*(isNaN(this.opacity)?1:this.opacity))}`},formatRgb:sm,toString:sm})),_c(Kt,cm,em($i,{brighter(t){return t=null==t?sa:Math.pow(sa,t),new Kt(this.h,this.s,this.l*t,this.opacity)},darker(t){return t=null==t?.7:Math.pow(.7,t),new Kt(this.h,this.s,this.l*t,this.opacity)},rgb(){var t=this.h%360+360*(this.h<0),e=isNaN(t)||isNaN(this.s)?0:this.s,n=this.l,r=n+(n<.5?n:1-n)*e,i=2*n-r;return new mt(yc(t>=240?t-240:t+120,i,r),yc(t,i,r),yc(t<120?t+240:t-120,i,r),this.opacity)},clamp(){return new Kt(um(this.h),ca(this.s),ca(this.l),la(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const t=la(this.opacity);return`${1===t?"hsl(":"hsla("}${um(this.h)}, ${100*ca(this.s)}%, ${100*ca(this.l)}%${1===t?")":`, ${t})`}`}}));const Cc=t=>()=>t;function cS(t){return 1==(t=+t)?hm:function(e,n){return n-e?function lS(t,e,n){return t=Math.pow(t,n),e=Math.pow(e,n)-t,n=1/n,function(r){return Math.pow(t+r*e,n)}}(e,n,t):Cc(isNaN(e)?n:e)}}function hm(t,e){var n=e-t;return n?function aS(t,e){return function(n){return t+n*e}}(t,n):Cc(isNaN(t)?e:t)}const ua=function t(e){var n=cS(e);function r(i,o){var s=n((i=vc(i)).r,(o=vc(o)).r),a=n(i.g,o.g),l=n(i.b,o.b),c=hm(i.opacity,o.opacity);return function(u){return i.r=s(u),i.g=a(u),i.b=l(u),i.opacity=c(u),i+""}}return r.gamma=t,r}(1);function uS(t,e){e||(e=[]);var i,n=t?Math.min(e.length,t.length):0,r=e.slice();return function(o){for(i=0;i<n;++i)r[i]=t[i]*(1-o)+e[i]*o;return r}}function dS(t,e){var s,n=e?e.length:0,r=t?Math.min(n,t.length):0,i=new Array(r),o=new Array(n);for(s=0;s<r;++s)i[s]=Ki(t[s],e[s]);for(;s<n;++s)o[s]=e[s];return function(a){for(s=0;s<r;++s)o[s]=i[s](a);return o}}function pS(t,e){var n=new Date;return t=+t,e=+e,function(r){return n.setTime(t*(1-r)+e*r),n}}function xt(t,e){return t=+t,e=+e,function(n){return t*(1-n)+e*n}}function mS(t,e){var i,n={},r={};for(i in(null===t||"object"!=typeof t)&&(t={}),(null===e||"object"!=typeof e)&&(e={}),e)i in t?n[i]=Ki(t[i],e[i]):r[i]=e[i];return function(o){for(i in n)r[i]=n[i](o);return r}}var Tc=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,xc=new RegExp(Tc.source,"g");function dm(t,e){var r,i,o,n=Tc.lastIndex=xc.lastIndex=0,s=-1,a=[],l=[];for(t+="",e+="";(r=Tc.exec(t))&&(i=xc.exec(e));)(o=i.index)>n&&(o=e.slice(n,o),a[s]?a[s]+=o:a[++s]=o),(r=r[0])===(i=i[0])?a[s]?a[s]+=i:a[++s]=i:(a[++s]=null,l.push({i:s,x:xt(r,i)})),n=xc.lastIndex;return n<e.length&&(o=e.slice(n),a[s]?a[s]+=o:a[++s]=o),a.length<2?l[0]?function fS(t){return function(e){return t(e)+""}}(l[0].x):function gS(t){return function(){return t}}(e):(e=l.length,function(c){for(var d,u=0;u<e;++u)a[(d=l[u]).i]=d.x(c);return a.join("")})}function Ki(t,e){var r,n=typeof e;return null==e||"boolean"===n?Cc(e):("number"===n?xt:"string"===n?(r=vn(e))?(e=r,ua):dm:e instanceof vn?ua:e instanceof Date?pS:function hS(t){return ArrayBuffer.isView(t)&&!(t instanceof DataView)}(e)?uS:Array.isArray(e)?dS:"function"!=typeof e.valueOf&&"function"!=typeof e.toString||isNaN(e)?mS:xt)(t,e)}function pm(t,e){return t=+t,e=+e,function(n){return Math.round(t*(1-n)+e*n)}}var ha,mm=180/Math.PI,gm={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function fm(t,e,n,r,i,o){var s,a,l;return(s=Math.sqrt(t*t+e*e))&&(t/=s,e/=s),(l=t*n+e*r)&&(n-=t*l,r-=e*l),(a=Math.sqrt(n*n+r*r))&&(n/=a,r/=a,l/=a),t*r<e*n&&(t=-t,e=-e,l=-l,s=-s),{translateX:i,translateY:o,rotate:Math.atan2(e,t)*mm,skewX:Math.atan(l)*mm,scaleX:s,scaleY:a}}function _m(t,e,n,r){function i(c){return c.length?c.pop()+" ":""}return function(c,u){var d=[],h=[];return c=t(c),u=t(u),function o(c,u,d,h,p,m){if(c!==d||u!==h){var _=p.push("translate(",null,e,null,n);m.push({i:_-4,x:xt(c,d)},{i:_-2,x:xt(u,h)})}else(d||h)&&p.push("translate("+d+e+h+n)}(c.translateX,c.translateY,u.translateX,u.translateY,d,h),function s(c,u,d,h){c!==u?(c-u>180?u+=360:u-c>180&&(c+=360),h.push({i:d.push(i(d)+"rotate(",null,r)-2,x:xt(c,u)})):u&&d.push(i(d)+"rotate("+u+r)}(c.rotate,u.rotate,d,h),function a(c,u,d,h){c!==u?h.push({i:d.push(i(d)+"skewX(",null,r)-2,x:xt(c,u)}):u&&d.push(i(d)+"skewX("+u+r)}(c.skewX,u.skewX,d,h),function l(c,u,d,h,p,m){if(c!==d||u!==h){var _=p.push(i(p)+"scale(",null,",",null,")");m.push({i:_-4,x:xt(c,d)},{i:_-2,x:xt(u,h)})}else(1!==d||1!==h)&&p.push(i(p)+"scale("+d+","+h+")")}(c.scaleX,c.scaleY,u.scaleX,u.scaleY,d,h),c=u=null,function(p){for(var f,m=-1,_=h.length;++m<_;)d[(f=h[m]).i]=f.x(p);return d.join("")}}}var da,Xi,yS=_m(function _S(t){const e=new("function"==typeof DOMMatrix?DOMMatrix:WebKitCSSMatrix)(t+"");return e.isIdentity?gm:fm(e.a,e.b,e.c,e.d,e.e,e.f)},"px, ","px)","deg)"),CS=_m(function vS(t){return null!=t&&(ha||(ha=document.createElementNS("http://www.w3.org/2000/svg","g")),ha.setAttribute("transform",t),t=ha.transform.baseVal.consolidate())?fm((t=t.matrix).a,t.b,t.c,t.d,t.e,t.f):gm},", ",")",")"),jr=0,qi=0,Yi=0,vm=1e3,pa=0,ur=0,ma=0,Zi="object"==typeof performance&&performance.now?performance:Date,ym="object"==typeof window&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(t){setTimeout(t,17)};function bc(){return ur||(ym(TS),ur=Zi.now()+ma)}function TS(){ur=0}function ga(){this._call=this._time=this._next=null}function Cm(t,e,n){var r=new ga;return r.restart(t,e,n),r}function Tm(){ur=(pa=Zi.now())+ma,jr=qi=0;try{!function xS(){bc(),++jr;for(var e,t=da;t;)(e=ur-t._time)>=0&&t._call.call(void 0,e),t=t._next;--jr}()}finally{jr=0,function ES(){for(var t,n,e=da,r=1/0;e;)e._call?(r>e._time&&(r=e._time),t=e,e=e._next):(n=e._next,e._next=null,e=t?t._next=n:da=n);Xi=t,Ec(r)}(),ur=0}}function bS(){var t=Zi.now(),e=t-pa;e>vm&&(ma-=e,pa=t)}function Ec(t){jr||(qi&&(qi=clearTimeout(qi)),t-ur>24?(t<1/0&&(qi=setTimeout(Tm,t-Zi.now()-ma)),Yi&&(Yi=clearInterval(Yi))):(Yi||(pa=Zi.now(),Yi=setInterval(bS,vm)),jr=1,ym(Tm)))}function xm(t,e,n){var r=new ga;return e=null==e?0:+e,r.restart(i=>{r.stop(),t(i+e)},e,n),r}ga.prototype=Cm.prototype={constructor:ga,restart:function(t,e,n){if("function"!=typeof t)throw new TypeError("callback is not a function");n=(null==n?bc():+n)+(null==e?0:+e),!this._next&&Xi!==this&&(Xi?Xi._next=this:da=this,Xi=this),this._call=t,this._time=n,Ec()},stop:function(){this._call&&(this._call=null,this._time=1/0,Ec())}};var SS=pc("start","end","cancel","interrupt"),OS=[],bm=0,Em=1,Sc=2,fa=3,Sm=4,Oc=5,_a=6;function va(t,e,n,r,i,o){var s=t.__transition;if(s){if(n in s)return}else t.__transition={};!function wS(t,e,n){var i,r=t.__transition;function o(c){n.state=Em,n.timer.restart(s,n.delay,n.time),n.delay<=c&&s(c-n.delay)}function s(c){var u,d,h,p;if(n.state!==Em)return l();for(u in r)if((p=r[u]).name===n.name){if(p.state===fa)return xm(s);p.state===Sm?(p.state=_a,p.timer.stop(),p.on.call("interrupt",t,t.__data__,p.index,p.group),delete r[u]):+u<e&&(p.state=_a,p.timer.stop(),p.on.call("cancel",t,t.__data__,p.index,p.group),delete r[u])}if(xm(function(){n.state===fa&&(n.state=Sm,n.timer.restart(a,n.delay,n.time),a(c))}),n.state=Sc,n.on.call("start",t,t.__data__,n.index,n.group),n.state===Sc){for(n.state=fa,i=new Array(h=n.tween.length),u=0,d=-1;u<h;++u)(p=n.tween[u].value.call(t,t.__data__,n.index,n.group))&&(i[++d]=p);i.length=d+1}}function a(c){for(var u=c<n.duration?n.ease.call(null,c/n.duration):(n.timer.restart(l),n.state=Oc,1),d=-1,h=i.length;++d<h;)i[d].call(t,u);n.state===Oc&&(n.on.call("end",t,t.__data__,n.index,n.group),l())}function l(){for(var c in n.state=_a,n.timer.stop(),delete r[e],r)return;delete t.__transition}r[e]=n,n.timer=Cm(o,0,n.time)}(t,n,{name:e,index:r,group:i,on:SS,tween:OS,time:o.time,delay:o.delay,duration:o.duration,ease:o.ease,timer:null,state:bm})}function wc(t,e){var n=qt(t,e);if(n.state>bm)throw new Error("too late; already scheduled");return n}function on(t,e){var n=qt(t,e);if(n.state>fa)throw new Error("too late; already running");return n}function qt(t,e){var n=t.__transition;if(!n||!(n=n[e]))throw new Error("transition not found");return n}function Fc(t,e){var r,i,s,n=t.__transition,o=!0;if(n){for(s in e=null==e?null:e+"",n)(r=n[s]).name===e?(i=r.state>Sc&&r.state<Oc,r.state=_a,r.timer.stop(),r.on.call(i?"interrupt":"cancel",t,t.__data__,r.index,r.group),delete n[s]):o=!1;o&&delete t.__transition}}function MS(t,e){var n,r;return function(){var i=on(this,t),o=i.tween;if(o!==n)for(var s=0,a=(r=n=o).length;s<a;++s)if(r[s].name===e){(r=r.slice()).splice(s,1);break}i.tween=r}}function AS(t,e,n){var r,i;if("function"!=typeof n)throw new Error;return function(){var o=on(this,t),s=o.tween;if(s!==r){i=(r=s).slice();for(var a={name:e,value:n},l=0,c=i.length;l<c;++l)if(i[l].name===e){i[l]=a;break}l===c&&i.push(a)}o.tween=i}}function Mc(t,e,n){var r=t._id;return t.each(function(){var i=on(this,r);(i.value||(i.value={}))[e]=n.apply(this,arguments)}),function(i){return qt(i,r).value[e]}}function Om(t,e){var n;return("number"==typeof e?xt:e instanceof vn?ua:(n=vn(e))?(e=n,ua):dm)(t,e)}function BS(t){return function(){this.removeAttribute(t)}}function RS(t){return function(){this.removeAttributeNS(t.space,t.local)}}function DS(t,e,n){var r,o,i=n+"";return function(){var s=this.getAttribute(t);return s===i?null:s===r?o:o=e(r=s,n)}}function HS(t,e,n){var r,o,i=n+"";return function(){var s=this.getAttributeNS(t.space,t.local);return s===i?null:s===r?o:o=e(r=s,n)}}function LS(t,e,n){var r,i,o;return function(){var s,l,a=n(this);return null==a?void this.removeAttribute(t):(s=this.getAttribute(t))===(l=a+"")?null:s===r&&l===i?o:(i=l,o=e(r=s,a))}}function IS(t,e,n){var r,i,o;return function(){var s,l,a=n(this);return null==a?void this.removeAttributeNS(t.space,t.local):(s=this.getAttributeNS(t.space,t.local))===(l=a+"")?null:s===r&&l===i?o:(i=l,o=e(r=s,a))}}function PS(t,e){var n,r;function i(){var o=e.apply(this,arguments);return o!==r&&(n=(r=o)&&function VS(t,e){return function(n){this.setAttributeNS(t.space,t.local,e.call(this,n))}}(t,o)),n}return i._value=e,i}function US(t,e){var n,r;function i(){var o=e.apply(this,arguments);return o!==r&&(n=(r=o)&&function WS(t,e){return function(n){this.setAttribute(t,e.call(this,n))}}(t,o)),n}return i._value=e,i}function $S(t,e){return function(){wc(this,t).delay=+e.apply(this,arguments)}}function GS(t,e){return e=+e,function(){wc(this,t).delay=e}}function KS(t,e){return function(){on(this,t).duration=+e.apply(this,arguments)}}function qS(t,e){return e=+e,function(){on(this,t).duration=e}}var cO=ji.prototype.constructor;function wm(t){return function(){this.style.removeProperty(t)}}var wO=0;function yn(t,e,n,r){this._groups=t,this._parents=e,this._name=n,this._id=r}function Fm(){return++wO}var Cn=ji.prototype;function Mm(t){return((t*=2)<=1?t*t*t:(t-=2)*t*t+2)/2}yn.prototype={constructor:yn,select:function aO(t){var e=this._name,n=this._id;"function"!=typeof t&&(t=gc(t));for(var r=this._groups,i=r.length,o=new Array(i),s=0;s<i;++s)for(var u,d,a=r[s],l=a.length,c=o[s]=new Array(l),h=0;h<l;++h)(u=a[h])&&(d=t.call(u,u.__data__,h,a))&&("__data__"in u&&(d.__data__=u.__data__),c[h]=d,va(c[h],e,n,h,c,qt(u,n)));return new yn(o,this._parents,e,n)},selectAll:function lO(t){var e=this._name,n=this._id;"function"!=typeof t&&(t=jp(t));for(var r=this._groups,i=r.length,o=[],s=[],a=0;a<i;++a)for(var u,l=r[a],c=l.length,d=0;d<c;++d)if(u=l[d]){for(var p,h=t.call(u,u.__data__,d,l),m=qt(u,n),_=0,f=h.length;_<f;++_)(p=h[_])&&va(p,e,n,_,h,m);o.push(h),s.push(u)}return new yn(o,s,e,n)},selectChild:Cn.selectChild,selectChildren:Cn.selectChildren,filter:function eO(t){"function"!=typeof t&&(t=$p(t));for(var e=this._groups,n=e.length,r=new Array(n),i=0;i<n;++i)for(var l,o=e[i],s=o.length,a=r[i]=[],c=0;c<s;++c)(l=o[c])&&t.call(l,l.__data__,c,o)&&a.push(l);return new yn(r,this._parents,this._name,this._id)},merge:function tO(t){if(t._id!==this._id)throw new Error;for(var e=this._groups,n=t._groups,r=e.length,i=n.length,o=Math.min(r,i),s=new Array(r),a=0;a<o;++a)for(var h,l=e[a],c=n[a],u=l.length,d=s[a]=new Array(u),p=0;p<u;++p)(h=l[p]||c[p])&&(d[p]=h);for(;a<r;++a)s[a]=e[a];return new yn(s,this._parents,this._name,this._id)},selection:function uO(){return new cO(this._groups,this._parents)},transition:function SO(){for(var t=this._name,e=this._id,n=Fm(),r=this._groups,i=r.length,o=0;o<i;++o)for(var l,s=r[o],a=s.length,c=0;c<a;++c)if(l=s[c]){var u=qt(l,e);va(l,t,n,c,s,{time:u.time+u.delay+u.duration,delay:0,duration:u.duration,ease:u.ease})}return new yn(r,this._parents,t,n)},call:Cn.call,nodes:Cn.nodes,node:Cn.node,size:Cn.size,empty:Cn.empty,each:Cn.each,on:function iO(t,e){var n=this._id;return arguments.length<2?qt(this.node(),n).on.on(t):this.each(function rO(t,e,n){var r,i,o=function nO(t){return(t+"").trim().split(/^|\s+/).every(function(e){var n=e.indexOf(".");return n>=0&&(e=e.slice(0,n)),!e||"start"===e})}(e)?wc:on;return function(){var s=o(this,t),a=s.on;a!==r&&(i=(r=a).copy()).on(e,n),s.on=i}}(n,t,e))},attr:function NS(t,e){var n=ia(t),r="transform"===n?CS:Om;return this.attrTween(t,"function"==typeof e?(n.local?IS:LS)(n,r,Mc(this,"attr."+t,e)):null==e?(n.local?RS:BS)(n):(n.local?HS:DS)(n,r,e))},attrTween:function jS(t,e){var n="attr."+t;if(arguments.length<2)return(n=this.tween(n))&&n._value;if(null==e)return this.tween(n,null);if("function"!=typeof e)throw new Error;var r=ia(t);return this.tween(n,(r.local?PS:US)(r,e))},style:function gO(t,e,n){var r="transform"==(t+="")?yS:Om;return null==e?this.styleTween(t,function hO(t,e){var n,r,i;return function(){var o=Pr(this,t),s=(this.style.removeProperty(t),Pr(this,t));return o===s?null:o===n&&s===r?i:i=e(n=o,r=s)}}(t,r)).on("end.style."+t,wm(t)):"function"==typeof e?this.styleTween(t,function pO(t,e,n){var r,i,o;return function(){var s=Pr(this,t),a=n(this),l=a+"";return null==a&&(this.style.removeProperty(t),l=a=Pr(this,t)),s===l?null:s===r&&l===i?o:(i=l,o=e(r=s,a))}}(t,r,Mc(this,"style."+t,e))).each(function mO(t,e){var n,r,i,a,o="style."+e,s="end."+o;return function(){var l=on(this,t),c=l.on,u=null==l.value[o]?a||(a=wm(e)):void 0;(c!==n||i!==u)&&(r=(n=c).copy()).on(s,i=u),l.on=r}}(this._id,t)):this.styleTween(t,function dO(t,e,n){var r,o,i=n+"";return function(){var s=Pr(this,t);return s===i?null:s===r?o:o=e(r=s,n)}}(t,r,e),n).on("end.style."+t,null)},styleTween:function vO(t,e,n){var r="style."+(t+="");if(arguments.length<2)return(r=this.tween(r))&&r._value;if(null==e)return this.tween(r,null);if("function"!=typeof e)throw new Error;return this.tween(r,function _O(t,e,n){var r,i;function o(){var s=e.apply(this,arguments);return s!==i&&(r=(i=s)&&function fO(t,e,n){return function(r){this.style.setProperty(t,e.call(this,r),n)}}(t,s,n)),r}return o._value=e,o}(t,e,n??""))},text:function TO(t){return this.tween("text","function"==typeof t?function CO(t){return function(){var e=t(this);this.textContent=e??""}}(Mc(this,"text",t)):function yO(t){return function(){this.textContent=t}}(null==t?"":t+""))},textTween:function EO(t){var e="text";if(arguments.length<1)return(e=this.tween(e))&&e._value;if(null==t)return this.tween(e,null);if("function"!=typeof t)throw new Error;return this.tween(e,function bO(t){var e,n;function r(){var i=t.apply(this,arguments);return i!==n&&(e=(n=i)&&function xO(t){return function(e){this.textContent=t.call(this,e)}}(i)),e}return r._value=t,r}(t))},remove:function sO(){return this.on("end.remove",function oO(t){return function(){var e=this.parentNode;for(var n in this.__transition)if(+n!==t)return;e&&e.removeChild(this)}}(this._id))},tween:function kS(t,e){var n=this._id;if(t+="",arguments.length<2){for(var s,r=qt(this.node(),n).tween,i=0,o=r.length;i<o;++i)if((s=r[i]).name===t)return s.value;return null}return this.each((null==e?MS:AS)(n,t,e))},delay:function zS(t){var e=this._id;return arguments.length?this.each(("function"==typeof t?$S:GS)(e,t)):qt(this.node(),e).delay},duration:function YS(t){var e=this._id;return arguments.length?this.each(("function"==typeof t?KS:qS)(e,t)):qt(this.node(),e).duration},ease:function ZS(t){var e=this._id;return arguments.length?this.each(function XS(t,e){if("function"!=typeof e)throw new Error;return function(){on(this,t).ease=e}}(e,t)):qt(this.node(),e).ease},easeVarying:function JS(t){if("function"!=typeof t)throw new Error;return this.each(function QS(t,e){return function(){var n=e.apply(this,arguments);if("function"!=typeof n)throw new Error;on(this,t).ease=n}}(this._id,t))},end:function OO(){var t,e,n=this,r=n._id,i=n.size();return new Promise(function(o,s){var a={value:s},l={value:function(){0==--i&&o()}};n.each(function(){var c=on(this,r),u=c.on;u!==t&&((e=(t=u).copy())._.cancel.push(a),e._.interrupt.push(a),e._.end.push(l)),c.on=e}),0===i&&o()})},[Symbol.iterator]:Cn[Symbol.iterator]};var FO={time:null,delay:0,duration:250,ease:Mm};function MO(t,e){for(var n;!(n=t.__transition)||!(n=n[e]);)if(!(t=t.parentNode))throw new Error(`transition ${e} not found`);return n}function ya(t,e){if((n=(t=e?t.toExponential(e-1):t.toExponential()).indexOf("e"))<0)return null;var n,r=t.slice(0,n);return[r.length>1?r[0]+r.slice(2):r,+t.slice(n+1)]}function $r(t){return(t=ya(Math.abs(t)))?t[1]:NaN}ji.prototype.interrupt=function FS(t){return this.each(function(){Fc(this,t)})},ji.prototype.transition=function AO(t){var e,n;t instanceof yn?(e=t._id,t=t._name):(e=Fm(),(n=FO).time=bc(),t=null==t?null:t+"");for(var r=this._groups,i=r.length,o=0;o<i;++o)for(var l,s=r[o],a=s.length,c=0;c<a;++c)(l=s[c])&&va(l,t,e,c,s,n||MO(l,e));return new yn(r,this._parents,t,e)};var Am,DO=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function Qi(t){if(!(e=DO.exec(t)))throw new Error("invalid format: "+t);var e;return new Ac({fill:e[1],align:e[2],sign:e[3],symbol:e[4],zero:e[5],width:e[6],comma:e[7],precision:e[8]&&e[8].slice(1),trim:e[9],type:e[10]})}function Ac(t){this.fill=void 0===t.fill?" ":t.fill+"",this.align=void 0===t.align?">":t.align+"",this.sign=void 0===t.sign?"-":t.sign+"",this.symbol=void 0===t.symbol?"":t.symbol+"",this.zero=!!t.zero,this.width=void 0===t.width?void 0:+t.width,this.comma=!!t.comma,this.precision=void 0===t.precision?void 0:+t.precision,this.trim=!!t.trim,this.type=void 0===t.type?"":t.type+""}function km(t,e){var n=ya(t,e);if(!n)return t+"";var r=n[0],i=n[1];return i<0?"0."+new Array(-i).join("0")+r:r.length>i+1?r.slice(0,i+1)+"."+r.slice(i+1):r+new Array(i-r.length+2).join("0")}Qi.prototype=Ac.prototype,Ac.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(void 0===this.width?"":Math.max(1,0|this.width))+(this.comma?",":"")+(void 0===this.precision?"":"."+Math.max(0,0|this.precision))+(this.trim?"~":"")+this.type};const Bm={"%":(t,e)=>(100*t).toFixed(e),b:t=>Math.round(t).toString(2),c:t=>t+"",d:function kO(t){return Math.abs(t=Math.round(t))>=1e21?t.toLocaleString("en").replace(/,/g,""):t.toString(10)},e:(t,e)=>t.toExponential(e),f:(t,e)=>t.toFixed(e),g:(t,e)=>t.toPrecision(e),o:t=>Math.round(t).toString(8),p:(t,e)=>km(100*t,e),r:km,s:function LO(t,e){var n=ya(t,e);if(!n)return t+"";var r=n[0],i=n[1],o=i-(Am=3*Math.max(-8,Math.min(8,Math.floor(i/3))))+1,s=r.length;return o===s?r:o>s?r+new Array(o-s+1).join("0"):o>0?r.slice(0,o)+"."+r.slice(o):"0."+new Array(1-o).join("0")+ya(t,Math.max(0,e+o-1))[0]},X:t=>Math.round(t).toString(16).toUpperCase(),x:t=>Math.round(t).toString(16)};function Rm(t){return t}var Ca,kc,Lm,Dm=Array.prototype.map,Hm=["y","z","a","f","p","n","\xb5","m","","k","M","G","T","P","E","Z","Y"];function IO(t){var e=void 0===t.grouping||void 0===t.thousands?Rm:function BO(t,e){return function(n,r){for(var i=n.length,o=[],s=0,a=t[0],l=0;i>0&&a>0&&(l+a+1>r&&(a=Math.max(1,r-l)),o.push(n.substring(i-=a,i+a)),!((l+=a+1)>r));)a=t[s=(s+1)%t.length];return o.reverse().join(e)}}(Dm.call(t.grouping,Number),t.thousands+""),n=void 0===t.currency?"":t.currency[0]+"",r=void 0===t.currency?"":t.currency[1]+"",i=void 0===t.decimal?".":t.decimal+"",o=void 0===t.numerals?Rm:function RO(t){return function(e){return e.replace(/[0-9]/g,function(n){return t[+n]})}}(Dm.call(t.numerals,String)),s=void 0===t.percent?"%":t.percent+"",a=void 0===t.minus?"\u2212":t.minus+"",l=void 0===t.nan?"NaN":t.nan+"";function c(d){var h=(d=Qi(d)).fill,p=d.align,m=d.sign,_=d.symbol,f=d.zero,v=d.width,C=d.comma,x=d.precision,b=d.trim,T=d.type;"n"===T?(C=!0,T="g"):Bm[T]||(void 0===x&&(x=12),b=!0,T="g"),(f||"0"===h&&"="===p)&&(f=!0,h="0",p="=");var S="$"===_?n:"#"===_&&/[boxX]/.test(T)?"0"+T.toLowerCase():"",M="$"===_?r:/[%p]/.test(T)?s:"",D=Bm[T],k=/[defgprs%]/.test(T);function H(F){var V,E,w,P=S,N=M;if("c"===T)N=D(F)+N,F="";else{var B=(F=+F)<0||1/F<0;if(F=isNaN(F)?l:D(Math.abs(F),x),b&&(F=function HO(t){e:for(var i,e=t.length,n=1,r=-1;n<e;++n)switch(t[n]){case".":r=i=n;break;case"0":0===r&&(r=n),i=n;break;default:if(!+t[n])break e;r>0&&(r=0)}return r>0?t.slice(0,r)+t.slice(i+1):t}(F)),B&&0==+F&&"+"!==m&&(B=!1),P=(B?"("===m?m:a:"-"===m||"("===m?"":m)+P,N=("s"===T?Hm[8+Am/3]:"")+N+(B&&"("===m?")":""),k)for(V=-1,E=F.length;++V<E;)if(48>(w=F.charCodeAt(V))||w>57){N=(46===w?i+F.slice(V+1):F.slice(V))+N,F=F.slice(0,V);break}}C&&!f&&(F=e(F,1/0));var R=P.length+F.length+N.length,W=R<v?new Array(v-R+1).join(h):"";switch(C&&f&&(F=e(W+F,W.length?v-N.length:1/0),W=""),p){case"<":F=P+F+N+W;break;case"=":F=P+W+F+N;break;case"^":F=W.slice(0,R=W.length>>1)+P+F+N+W.slice(R);break;default:F=W+P+F+N}return o(F)}return x=void 0===x?6:/[gprs]/.test(T)?Math.max(1,Math.min(21,x)):Math.max(0,Math.min(20,x)),H.toString=function(){return d+""},H}return{format:c,formatPrefix:function u(d,h){var p=c(((d=Qi(d)).type="f",d)),m=3*Math.max(-8,Math.min(8,Math.floor($r(h)/3))),_=Math.pow(10,-m),f=Hm[8+m/3];return function(v){return p(_*v)+f}}}}function Gr(t,e){switch(arguments.length){case 0:break;case 1:this.range(t);break;default:this.range(e).domain(t)}return this}!function NO(t){return Ca=IO(t),kc=Ca.format,Lm=Ca.formatPrefix,Ca}({thousands:",",grouping:[3],currency:["$",""]});const Im=Symbol("implicit");function Ta(){var t=new Np,e=[],n=[],r=Im;function i(o){let s=t.get(o);if(void 0===s){if(r!==Im)return r;t.set(o,s=e.push(o)-1)}return n[s%n.length]}return i.domain=function(o){if(!arguments.length)return e.slice();e=[],t=new Np;for(const s of o)t.has(s)||t.set(s,e.push(s)-1);return i},i.range=function(o){return arguments.length?(n=Array.from(o),i):n.slice()},i.unknown=function(o){return arguments.length?(r=o,i):r},i.copy=function(){return Ta(e,n).unknown(r)},Gr.apply(i,arguments),i}function jO(t){return+t}var Nm=[0,1];function zr(t){return t}function Bc(t,e){return(e-=t=+t)?function(n){return(n-t)/e}:function UO(t){return function(){return t}}(isNaN(e)?NaN:.5)}function GO(t,e,n){var r=t[0],i=t[1],o=e[0],s=e[1];return i<r?(r=Bc(i,r),o=n(s,o)):(r=Bc(r,i),o=n(o,s)),function(a){return o(r(a))}}function zO(t,e,n){var r=Math.min(t.length,e.length)-1,i=new Array(r),o=new Array(r),s=-1;for(t[r]<t[0]&&(t=t.slice().reverse(),e=e.slice().reverse());++s<r;)i[s]=Bc(t[s],t[s+1]),o[s]=n(e[s],e[s+1]);return function(a){var l=hc(t,a,1,r)-1;return o[l](i[l](a))}}function Rc(t,e){return e.domain(t.domain()).range(t.range()).interpolate(t.interpolate()).clamp(t.clamp()).unknown(t.unknown())}function Wm(){var r,i,o,a,l,c,t=Nm,e=Nm,n=Ki,s=zr;function u(){var h=Math.min(t.length,e.length);return s!==zr&&(s=function $O(t,e){var n;return t>e&&(n=t,t=e,e=n),function(r){return Math.max(t,Math.min(e,r))}}(t[0],t[h-1])),a=h>2?zO:GO,l=c=null,d}function d(h){return null==h||isNaN(h=+h)?o:(l||(l=a(t.map(r),e,n)))(r(s(h)))}return d.invert=function(h){return s(i((c||(c=a(e,t.map(r),xt)))(h)))},d.domain=function(h){return arguments.length?(t=Array.from(h,jO),u()):t.slice()},d.range=function(h){return arguments.length?(e=Array.from(h),u()):e.slice()},d.rangeRound=function(h){return e=Array.from(h),n=pm,u()},d.clamp=function(h){return arguments.length?(s=!!h||zr,u()):s!==zr},d.interpolate=function(h){return arguments.length?(n=h,u()):n},d.unknown=function(h){return arguments.length?(o=h,d):o},function(h,p){return r=h,i=p,u()}}function Vm(){return Wm()(zr,zr)}function KO(t,e,n,r){var o,i=dc(t,e,n);switch((r=Qi(r??",f")).type){case"s":var s=Math.max(Math.abs(t),Math.abs(e));return null==r.precision&&!isNaN(o=function VO(t,e){return Math.max(0,3*Math.max(-8,Math.min(8,Math.floor($r(e)/3)))-$r(Math.abs(t)))}(i,s))&&(r.precision=o),Lm(r,s);case"":case"e":case"g":case"p":case"r":null==r.precision&&!isNaN(o=function PO(t,e){return t=Math.abs(t),e=Math.abs(e)-t,Math.max(0,$r(e)-$r(t))+1}(i,Math.max(Math.abs(t),Math.abs(e))))&&(r.precision=o-("e"===r.type));break;case"f":case"%":null==r.precision&&!isNaN(o=function WO(t){return Math.max(0,-$r(Math.abs(t)))}(i))&&(r.precision=o-2*("%"===r.type))}return kc(r)}function Pm(t){var e=t.domain;return t.ticks=function(n){var r=e();return na(r[0],r[r.length-1],n??10)},t.tickFormat=function(n,r){var i=e();return KO(i[0],i[i.length-1],n??10,r)},t.nice=function(n){null==n&&(n=10);var l,c,r=e(),i=0,o=r.length-1,s=r[i],a=r[o],u=10;for(a<s&&(c=s,s=a,a=c,c=i,i=o,o=c);u-- >0;){if((c=Vr(s,a,n))===l)return r[i]=s,r[o]=a,e(r);if(c>0)s=Math.floor(s/c)*c,a=Math.ceil(a/c)*c;else{if(!(c<0))break;s=Math.ceil(s*c)/c,a=Math.floor(a*c)/c}l=c}return t},t}function Yt(){var t=Vm();return t.copy=function(){return Rc(t,Yt())},Gr.apply(t,arguments),Pm(t)}function Dc(){var o,t=0,e=1,n=1,r=[.5],i=[0,1];function s(l){return null!=l&&l<=l?i[hc(r,l,0,n)]:o}function a(){var l=-1;for(r=new Array(n);++l<n;)r[l]=((l+1)*e-(l-n)*t)/(n+1);return s}return s.domain=function(l){return arguments.length?([t,e]=l,t=+t,e=+e,a()):[t,e]},s.range=function(l){return arguments.length?(n=(i=Array.from(l)).length-1,a()):i.slice()},s.invertExtent=function(l){var c=i.indexOf(l);return c<0?[NaN,NaN]:c<1?[t,r[0]]:c>=n?[r[n-1],e]:[r[c-1],r[c]]},s.unknown=function(l){return arguments.length&&(o=l),s},s.thresholds=function(){return r.slice()},s.copy=function(){return Dc().domain([t,e]).range(i).unknown(o)},Gr.apply(Pm(s),arguments)}function Ji(t,e,n){this.k=t,this.x=e,this.y=n}Ji.prototype={constructor:Ji,scale:function(t){return 1===t?this:new Ji(this.k*t,this.x,this.y)},translate:function(t,e){return 0===t&0===e?this:new Ji(this.k,this.x+this.k*t,this.y+this.k*e)},apply:function(t){return[t[0]*this.k+this.x,t[1]*this.k+this.y]},applyX:function(t){return t*this.k+this.x},applyY:function(t){return t*this.k+this.y},invert:function(t){return[(t[0]-this.x)/this.k,(t[1]-this.y)/this.k]},invertX:function(t){return(t-this.x)/this.k},invertY:function(t){return(t-this.y)/this.k},rescaleX:function(t){return t.copy().domain(t.range().map(this.invertX,this).map(t.invert,t))},rescaleY:function(t){return t.copy().domain(t.range().map(this.invertY,this).map(t.invert,t))},toString:function(){return"translate("+this.x+","+this.y+") scale("+this.k+")"}},Ji.prototype;const st="cds",sn={opacity:{unselected:.05,selected:.4}},Tn={ticks:{number:7,rotateIfSmallerThan:30,verticalSpaceRatio:2.5,horizontalSpaceRatio:3.5},ratio:{reference:"value",compareTo:"marker"},paddingRatio:.1,hover:{rectanglePadding:4}},hr={duration:1e3,ease:Mm,zoomLevel:3},dr={circles:{fillOpacity:.3,hover:{stroke:"#FFF"}},padding:{mainGroup:4,children:2},depth:2},Hc={pairingOptions:{"1-color":4,"2-color":5,"3-color":5,"4-color":3,"5-color":2,"14-color":1}},bt={circle:{radius:4,opacity:{hovered:1,default:.3}},box:{opacity:{hovered:.5,default:.3}},strokeWidth:{default:1,thicker:2}},Um={defaultBins:10},He={items:{status:{ACTIVE:1,DISABLED:0},horizontalSpace:12,verticalSpace:24,textYOffset:8,spaceAfter:4},checkbox:{radius:6.5},radius:{iconData:[{cx:7,cy:7,r:6.5},{cx:7,cy:10,r:3.5}],fill:null,stroke:"#8c8c8c"},line:{yPosition:6,width:24,strokeWidth:1.4,fill:null,stroke:"#999999"},area:{width:24,height:14,fill:"#6f6f6f",stroke:null},size:{iconData:[{width:23,height:12},{width:13,height:6}],fill:null,stroke:"#8D8D8D"},quartile:{iconData:[{x:0,y:0,width:24,height:13},{x:11,y:4,width:1,height:4}]},zoom:{iconData:[{x:0,y:0,width:12,height:12}],color:"#8D8D8D"},color:{barWidth:300,barHeight:8,axisYTranslation:10}},an={opacity:{unselected:.3,selected:1},weight:{selected:2,unselected:1}},Ye={statusBar:{paddingRight:5},status:{indicatorSize:16,paddingLeft:15},total:{paddingLeft:36,paddingRight:24},height:{default:8,proportional:16},dividerWidth:2},Be={radiusOffset:-15,innerRadius:2,padAngle:.007,hoverArc:{outerRadiusOffset:3},xOffset:30,yOffset:20,yOffsetCallout:10,callout:{minSliceDegree:5,offsetX:15,offsetY:12,horizontalLineLength:8,textMargin:2}},Un={opacity:{unselected:.1,selected:.3},xLabelPadding:10,yLabelPadding:8,yTicksNumber:4,minRange:10,xAxisRectHeight:50,dotsRadius:5},Dt={nodeWidth:4,nodeHoveredWidth:8,minNodePadding:24,opacity:{unfocus:.3,default:.8,selected:1}},Lc={minCellDividerDimension:16,chartPadding:.5},Ic={default:{size:24}},Nc={defaultOffset:4,horizontalOffset:10},Wc={default:{duration:300},pie_slice_mouseover:{duration:100},pie_slice_mouseout:{duration:100},pie_chart_titles:{duration:375},graph_element_mouseover_fill_update:{duration:100},graph_element_mouseout_fill_update:{duration:100}},gt={height:{[Mt.GRAPH_VIEW]:32,[Mt.SLIDER_VIEW]:10},spacerHeight:8,handleWidth:5,handleBarWidth:1,handleBarHeight:12},jm=[{type:ze.RADIUS,name:"Radius"},{type:ze.AREA,name:"Poor area"},{type:ze.AREA,name:"Satisfactory area"},{type:ze.AREA,name:"Great area"},{type:ze.QUARTILE,name:"Quartiles"}],Kr={type:Ct.END_LINE,threshold:16,numCharacter:14},YO={code:typeof navigator<"u"&&navigator?.language||"en-US",number:(t,e=navigator?.language||"en-US")=>{var n;return null==(n=t?.toLocaleString)?void 0:n.call(t,e)},date:(t,e=navigator?.language||"en-US",n={},r=null)=>r||t.toLocaleDateString(e,n),time:(t,e=navigator?.language||"en-US",n={},r=null)=>r||t.toLocaleTimeString(e,n),optionsObject:{"15seconds":{primary:{"MMM d, pp":{month:"short",day:"numeric",hour:"numeric",minute:"2-digit",second:"2-digit",hourCycle:"h12"},"MMM d, h:mm:ss.SSS a":{month:"short",day:"numeric",hour:"numeric",minute:"2-digit",fractionalSecondDigits:3,hourCycle:"h12"}},secondary:{pp:{hour:"numeric",minute:"2-digit",second:"2-digit",hourCycle:"h12"},"h:mm:ss.SSS a":{hour:"numeric",minute:"2-digit",fractionalSecondDigits:3,hourCycle:"h12"}},type:"time"},minute:{primary:{"MMM d, p":{month:"short",day:"numeric",hour:"numeric",minute:"2-digit",hourCycle:"h12"}},secondary:{p:{hour:"numeric",minute:"2-digit",hourCycle:"h12"}},type:"time"},"30minutes":{primary:{"MMM d, p":{month:"short",day:"numeric",hour:"numeric",minute:"2-digit",hourCycle:"h12"}},secondary:{p:{hour:"numeric",minute:"2-digit",hourCycle:"h12"}},type:"time"},hourly:{primary:{"MMM d, hh a":{month:"short",day:"numeric",hour:"2-digit",hourCycle:"h12"}},secondary:{"hh a":{hour:"2-digit",hourCycle:"h12"}},type:"time"},daily:{primary:{"MMM d":{month:"short",day:"numeric"}},secondary:{d:{day:"numeric"}},type:"date"},weekly:{primary:{"eee, MMM d":{weekday:"short",month:"short",day:"numeric"}},secondary:{eee:{weekday:"short"}},type:"date"},monthly:{primary:{"MMM yyyy":{month:"short",year:"numeric"}},secondary:{MMM:{month:"short"}},type:"date"},quarterly:{primary:{},secondary:{},type:"date"},yearly:{primary:{yyyy:{year:"numeric"}},secondary:{yyyy:{year:"numeric"}},type:"date"}},translations:{group:"Group",total:"Total",meter:{title:""},tabularRep:{title:"Tabular representation",downloadAsCSV:"Download as CSV"},toolbar:{exportAsCSV:"Export to CSV",exportAsJPG:"Export to JPG",exportAsPNG:"Export to PNG",zoomIn:"Zoom in",zoomOut:"Zoom out",resetZoom:"Reset zoom",moreOptions:"More options",makeFullScreen:"Make fullscreen",exitFullScreen:"Exit fullscreen",showAsTable:"Show as table"}}},XO={enabled:!0,position:Xn.BOTTOM,clickable:!0,truncation:Kr,alignment:$e.LEFT,order:null,additionalItems:[]},$m={x:{enabled:!0,numberOfTicks:15,alignWithAxisTicks:!1},y:{enabled:!0,numberOfTicks:5,alignWithAxisTicks:!1}},Gm={enabled:!0},Vc={enabled:!0,showTotal:!0,truncation:Kr,groupLabel:"Group"},zm={top:{visible:!0,includeZero:!0,truncation:Kr},bottom:{visible:!0,includeZero:!0,truncation:Kr},left:{visible:!0,includeZero:!0,truncation:Kr},right:{visible:!0,includeZero:!0,truncation:Kr}},eo={addSpaceOnEdges:1,showDayName:!1,localeObject:Fd,timeIntervalFormats:{"15seconds":{primary:"MMM d, pp",secondary:"pp"},minute:{primary:"MMM d, p",secondary:"p"},"30minutes":{primary:"MMM d, p",secondary:"p"},hourly:{primary:"MMM d, hh a",secondary:"hh a"},daily:{primary:"MMM d",secondary:"d"},weekly:{primary:"eee, MMM d",secondary:"eee"},monthly:{primary:"MMM yyyy",secondary:"MMM"},quarterly:{primary:"QQQ ''yy",secondary:"QQQ"},yearly:{primary:"yyyy",secondary:"yyyy"}}};let Km=!1;try{Km=typeof document<"u"&&(document.fullscreenEnabled||document.webkitFullscreenEnabled||document.mozFullScreenEnabled||document.msFullscreenEnabled)}catch(t){console.warn("Fullscreen capabilities check failed: ",t.message)}const et={width:null,height:null,resizable:!0,theme:Vs.WHITE,tooltip:Vc,legend:XO,locale:YO,style:{prefix:"cc"},data:{groupMapsTo:"group",loading:!1,selectedGroups:[]},color:{scale:null,pairing:{numberOfVariants:null,option:1},gradient:{enabled:!1}},toolbar:{enabled:!0,numberOfIcons:3,controls:[{type:Ce.SHOW_AS_DATATABLE},...Km?[{type:Ce.MAKE_FULLSCREEN}]:[],{type:Ce.EXPORT_CSV},{type:Ce.EXPORT_PNG},{type:Ce.EXPORT_JPG}]}},qm=se({},et,{thematic:{projection:Ut.geoNaturalEarth1}}),to=se({},et,{axes:zm,timeScale:eo,grid:$m,ruler:Gm,zoomBar:{zoomRatio:.4,minZoomRatio:.01,top:{enabled:!1,type:Mt.GRAPH_VIEW}}}),pr=se({},to,{bars:{maxWidth:16,spacingFactor:.25},timeScale:se(eo,{addSpaceOnEdges:1})}),ZO=se({},pr,{}),QO=se({},pr,{}),JO=se({},pr,{bars:se({},pr.bars,{dividerSize:1.5})}),ew=se({},pr,{}),Pc=se({},to,{points:{radius:4,fillOpacity:.3,filled:!0,enabled:!0}}),tw=Pc,Ym=se({},Pc,{points:{radius:3,filled:!1,enabled:!0}}),Xm=se({},Ym,{timeScale:se(eo,{addSpaceOnEdges:0})}),nw=Xm,rw=se({},to,{bubble:{radiusMapsTo:"radius",radiusLabel:"Radius",radiusRange:t=>{const e=Math.min(t.width,t.height);return[3*e/400,25*e/400]},fillOpacity:.2,enabled:!0},points:{filled:!0},legend:{additionalItems:[{type:ze.RADIUS,name:"Radius"}]}}),iw=se({},to,{bullet:{performanceAreaTitles:["Poor","Satisfactory","Great"]},grid:{x:{enabled:!1},y:{enabled:!1}},legend:{additionalItems:[{type:ze.AREA,name:"Poor area"},{type:ze.AREA,name:"Satisfactory area"},{type:ze.AREA,name:"Great area"},{type:ze.QUARTILE,name:"Quartiles"}]}}),ow=se({},pr,{bars:{dividerSize:1.5},timeScale:se(eo,{addSpaceOnEdges:0})}),sw=se({},et,{tooltip:se({},Vc,{wordLabel:"Word",valueLabel:"Value"}),wordCloud:{fontSizeMapsTo:"value",fontSizeRange:t=>{const e=Math.min(t.width,t.height);return[20*e/400,75*e/400]},wordMapsTo:"word"}}),Zm=se({},et,{pie:{labels:{formatter:null,enabled:!0},alignment:$e.LEFT,sortFunction:null,valueMapsTo:"value"}}),aw=se({},et,{legend:{enabled:!1},gauge:{type:Vn.SEMI,arcWidth:16,deltaArrow:{size:t=>t/8,enabled:!0},showPercentageSymbol:!0,status:null,numberSpacing:10,deltaFontSize:t=>t/8,valueFontSize:t=>t/2.5,alignment:$e.LEFT}}),lw=se({},Zm,{donut:{center:{numberFontSize:t=>`${Math.min(t/100*24,24)}px`,titleFontSize:t=>`${Math.min(t/100*15,15)}px`,titleYPosition:t=>Math.min(t/80*20,20)},alignment:$e.LEFT}}),Qm=se({},et,{legend:{enabled:!1,clickable:!1},meter:{showLabels:!0,proportional:null,statusBar:{percentageIndicator:{enabled:!0}}}}),cw=se({},Qm,{legend:{enabled:!0}}),uw=se({},et,{radar:{axes:{angle:"key",value:"value"},alignment:$e.LEFT},tooltip:{gridline:{enabled:!0}}}),hw=se({},pr,{comboChartTypes:[]}),dw=se({tree:{type:Si.TREE}},et,{}),pw=se({},et,{data:se(et.data,{groupMapsTo:"name"})}),mw=se({},et,dr,{data:se(et.data,{groupMapsTo:"name"})}),gw=se({},et,{alluvial:{data:se(et.data,{groupMapsTo:"source"}),nodeAlignment:$e.CENTER,nodePadding:24,monochrome:!1,nodes:[]}}),fw=se({},et,{axes:zm,heatmap:{divider:{state:Qn.AUTO},colorLegend:{type:"linear"}}}),Me={alluvialChart:gw,areaChart:Xm,axisChart:to,boxplotChart:ew,bubbleChart:rw,bulletChart:iw,chart:et,circlePackChart:mw,choroplethChart:se({},qm,{choropleth:{colorLegend:{type:"linear"}}}),comboChart:hw,donutChart:lw,gaugeChart:aw,groupedBarChart:QO,heatmapChart:fw,histogramChart:ow,lineChart:Ym,lollipopChart:tw,meterChart:Qm,pieChart:Zm,proportionalMeterChart:cw,radarChart:uw,scatterChart:Pc,simpleBarChart:ZO,stackedAreaChart:nw,stackedBarChart:JO,thematicChart:qm,treeChart:dw,treemapChart:pw,wordCloudChart:sw};Symbol.toStringTag;function Le(t,e){var n;const r=_n(t),i=Object.keys(e.axes||{});null!=(n=e?.toolbar)&&n.controls&&delete r.toolbar.controls,0===i.length&&delete r.axes;for(const o in r.axes)if(i.includes(o)){const s=e.axes[o];if((s.primary||s.secondary)&&console.warn("`primary` & `secondary` are no longer needed for axis configurations. Read more here https://charts.carbondesignsystem.com/"),null==s.mapsTo){const l=s.scaleType;null==l?s.mapsTo="value":l===ne.TIME?s.mapsTo="date":l===ne.LABELS&&(s.mapsTo="key")}}else delete r.axes[o];return jc(r,e),se(r,e)}function xn(t){if(!t)return;const n=t.getAttribute("transform").match(/translate\([0-9]+\.?[0-9]*,[0-9]+\.?[0-9]*\)/);if(!n)return null;if(n[0]){const r=n[0].replace(/translate\(/,"").replace(/\)/,"").split(",");return{tx:r[0],ty:r[1]}}return null}function no(t){const e=/\(([^)]+)\)/.exec(t);if(e&&e.length>1){const n=e[1].split(",");if(n.length>1)return{x:parseFloat(n[0]),y:parseFloat(n[1])}}return{x:0,y:0}}function Uc(t,e,n="value",r=!1){const i=t/e.reduce((o,s)=>o+s[n],0)*100;return r?i:i%1!=0?parseFloat(i.toFixed(1)):i}function ro(t,e,n){return n>t.length?t:e===Ct.MID_LINE?t.substr(0,n/2)+"..."+t.substr(-n/2):e===Ct.FRONT_LINE?"..."+t.substr(-n):e===Ct.END_LINE?t.substr(0,n)+"...":void 0}function jc(t,e){const n=y(t,"legend","additionalItems"),r=y(e,"legend","additionalItems");if(n&&r){const i=r.map(a=>a.type),o=n.map(a=>a.type),s=jm.filter(a=>o.includes(a.type)&&!i.includes(a.type));t.legend.additionalItems=s,e.legend.additionalItems=nb(s,r,"name")}}const y=(t,...e)=>{let n=t;if(n){for(const r of e){if(null===n[r]||void 0===n[r])return null;n=n[r]}return n}return null},Jm=(t,e)=>e===je.HORIZONTAL?{y0:t.x0,y1:t.x1,x0:t.y0,x1:t.y1}:t,at=(t,e)=>{const{x0:n,x1:r,y0:i,y1:o}=Jm(t,e);return`M${n},${i}L${n},${o}L${r},${o}L${r},${i}L${n},${i}`};function bn(t,e,n){return n===je.VERTICAL?[t,e]:[e,t]}function eg(t){const e=Ne(t),n=new Date(Date.UTC(e.getFullYear(),e.getMonth(),e.getDate(),e.getHours(),e.getMinutes(),e.getSeconds(),e.getMilliseconds()));return n.setUTCFullYear(e.getFullYear()),+t-+n}function tg(t,e){const n=Ne(t,e?.in);return n.setHours(0,0,0,0),n}function ng(t,e,n){const[r,i]=Jn(0,t,e),o=tg(r),s=tg(i),a=+o-eg(o),l=+s-eg(s);return Math.round((a-l)/R0)}function Cw(t,e){const n=Ne(t,e?.in);return ng(n,function yw(t,e){const n=Ne(t,e?.in);return n.setFullYear(n.getFullYear(),0,1),n.setHours(0,0,0,0),n}(n))+1}function xa(t,e){return Ai(t,{...e,weekStartsOn:1})}function rg(t,e){const n=Ne(t,e?.in),r=n.getFullYear(),i=At(n,0);i.setFullYear(r+1,0,4),i.setHours(0,0,0,0);const o=xa(i),s=At(n,0);s.setFullYear(r,0,4),s.setHours(0,0,0,0);const a=xa(s);return n.getTime()>=o.getTime()?r+1:n.getTime()>=a.getTime()?r:r-1}function xw(t,e){const n=Ne(t,e?.in),r=+xa(n)-+function Tw(t,e){const n=rg(t,e),r=At(t,0);return r.setFullYear(n,0,4),r.setHours(0,0,0,0),xa(r)}(n);return Math.round(r/Ed)+1}function ig(t,e){var n,r,i,o;const s=Ne(t,e?.in),a=s.getFullYear(),l=Ps(),c=e?.firstWeekContainsDate??(null==(r=null==(n=e?.locale)?void 0:n.options)?void 0:r.firstWeekContainsDate)??l.firstWeekContainsDate??(null==(o=null==(i=l.locale)?void 0:i.options)?void 0:o.firstWeekContainsDate)??1,u=At(e?.in||t,0);u.setFullYear(a+1,0,c),u.setHours(0,0,0,0);const d=Ai(u,e),h=At(e?.in||t,0);h.setFullYear(a,0,c),h.setHours(0,0,0,0);const p=Ai(h,e);return+s>=+d?a+1:+s>=+p?a:a-1}function Ew(t,e){const n=Ne(t,e?.in),r=+Ai(n,e)-+function bw(t,e){var n,r,i,o;const s=Ps(),a=e?.firstWeekContainsDate??(null==(r=null==(n=e?.locale)?void 0:n.options)?void 0:r.firstWeekContainsDate)??s.firstWeekContainsDate??(null==(o=null==(i=s.locale)?void 0:i.options)?void 0:o.firstWeekContainsDate)??1,l=ig(t,e),c=At(e?.in||t,0);return c.setFullYear(l,0,a),c.setHours(0,0,0,0),Ai(c,e)}(n,e);return Math.round(r/Ed)+1}function Ee(t,e){return(t<0?"-":"")+Math.abs(t).toString().padStart(e,"0")}const jn={y(t,e){const n=t.getFullYear(),r=n>0?n:1-n;return Ee("yy"===e?r%100:r,e.length)},M(t,e){const n=t.getMonth();return"M"===e?String(n+1):Ee(n+1,2)},d:(t,e)=>Ee(t.getDate(),e.length),a(t,e){const n=t.getHours()/12>=1?"pm":"am";switch(e){case"a":case"aa":return n.toUpperCase();case"aaa":return n;case"aaaaa":return n[0];default:return"am"===n?"a.m.":"p.m."}},h:(t,e)=>Ee(t.getHours()%12||12,e.length),H:(t,e)=>Ee(t.getHours(),e.length),m:(t,e)=>Ee(t.getMinutes(),e.length),s:(t,e)=>Ee(t.getSeconds(),e.length),S(t,e){const n=e.length,r=t.getMilliseconds();return Ee(Math.trunc(r*Math.pow(10,n-3)),e.length)}},qr_midnight="midnight",qr_noon="noon",qr_morning="morning",qr_afternoon="afternoon",qr_evening="evening",qr_night="night",og={G:function(t,e,n){const r=t.getFullYear()>0?1:0;switch(e){case"G":case"GG":case"GGG":return n.era(r,{width:"abbreviated"});case"GGGGG":return n.era(r,{width:"narrow"});default:return n.era(r,{width:"wide"})}},y:function(t,e,n){if("yo"===e){const r=t.getFullYear(),i=r>0?r:1-r;return n.ordinalNumber(i,{unit:"year"})}return jn.y(t,e)},Y:function(t,e,n,r){const i=ig(t,r),o=i>0?i:1-i;if("YY"===e){return Ee(o%100,2)}return"Yo"===e?n.ordinalNumber(o,{unit:"year"}):Ee(o,e.length)},R:function(t,e){return Ee(rg(t),e.length)},u:function(t,e){return Ee(t.getFullYear(),e.length)},Q:function(t,e,n){const r=Math.ceil((t.getMonth()+1)/3);switch(e){case"Q":return String(r);case"QQ":return Ee(r,2);case"Qo":return n.ordinalNumber(r,{unit:"quarter"});case"QQQ":return n.quarter(r,{width:"abbreviated",context:"formatting"});case"QQQQQ":return n.quarter(r,{width:"narrow",context:"formatting"});default:return n.quarter(r,{width:"wide",context:"formatting"})}},q:function(t,e,n){const r=Math.ceil((t.getMonth()+1)/3);switch(e){case"q":return String(r);case"qq":return Ee(r,2);case"qo":return n.ordinalNumber(r,{unit:"quarter"});case"qqq":return n.quarter(r,{width:"abbreviated",context:"standalone"});case"qqqqq":return n.quarter(r,{width:"narrow",context:"standalone"});default:return n.quarter(r,{width:"wide",context:"standalone"})}},M:function(t,e,n){const r=t.getMonth();switch(e){case"M":case"MM":return jn.M(t,e);case"Mo":return n.ordinalNumber(r+1,{unit:"month"});case"MMM":return n.month(r,{width:"abbreviated",context:"formatting"});case"MMMMM":return n.month(r,{width:"narrow",context:"formatting"});default:return n.month(r,{width:"wide",context:"formatting"})}},L:function(t,e,n){const r=t.getMonth();switch(e){case"L":return String(r+1);case"LL":return Ee(r+1,2);case"Lo":return n.ordinalNumber(r+1,{unit:"month"});case"LLL":return n.month(r,{width:"abbreviated",context:"standalone"});case"LLLLL":return n.month(r,{width:"narrow",context:"standalone"});default:return n.month(r,{width:"wide",context:"standalone"})}},w:function(t,e,n,r){const i=Ew(t,r);return"wo"===e?n.ordinalNumber(i,{unit:"week"}):Ee(i,e.length)},I:function(t,e,n){const r=xw(t);return"Io"===e?n.ordinalNumber(r,{unit:"week"}):Ee(r,e.length)},d:function(t,e,n){return"do"===e?n.ordinalNumber(t.getDate(),{unit:"date"}):jn.d(t,e)},D:function(t,e,n){const r=Cw(t);return"Do"===e?n.ordinalNumber(r,{unit:"dayOfYear"}):Ee(r,e.length)},E:function(t,e,n){const r=t.getDay();switch(e){case"E":case"EE":case"EEE":return n.day(r,{width:"abbreviated",context:"formatting"});case"EEEEE":return n.day(r,{width:"narrow",context:"formatting"});case"EEEEEE":return n.day(r,{width:"short",context:"formatting"});default:return n.day(r,{width:"wide",context:"formatting"})}},e:function(t,e,n,r){const i=t.getDay(),o=(i-r.weekStartsOn+8)%7||7;switch(e){case"e":return String(o);case"ee":return Ee(o,2);case"eo":return n.ordinalNumber(o,{unit:"day"});case"eee":return n.day(i,{width:"abbreviated",context:"formatting"});case"eeeee":return n.day(i,{width:"narrow",context:"formatting"});case"eeeeee":return n.day(i,{width:"short",context:"formatting"});default:return n.day(i,{width:"wide",context:"formatting"})}},c:function(t,e,n,r){const i=t.getDay(),o=(i-r.weekStartsOn+8)%7||7;switch(e){case"c":return String(o);case"cc":return Ee(o,e.length);case"co":return n.ordinalNumber(o,{unit:"day"});case"ccc":return n.day(i,{width:"abbreviated",context:"standalone"});case"ccccc":return n.day(i,{width:"narrow",context:"standalone"});case"cccccc":return n.day(i,{width:"short",context:"standalone"});default:return n.day(i,{width:"wide",context:"standalone"})}},i:function(t,e,n){const r=t.getDay(),i=0===r?7:r;switch(e){case"i":return String(i);case"ii":return Ee(i,e.length);case"io":return n.ordinalNumber(i,{unit:"day"});case"iii":return n.day(r,{width:"abbreviated",context:"formatting"});case"iiiii":return n.day(r,{width:"narrow",context:"formatting"});case"iiiiii":return n.day(r,{width:"short",context:"formatting"});default:return n.day(r,{width:"wide",context:"formatting"})}},a:function(t,e,n){const r=t.getHours()/12>=1?"pm":"am";switch(e){case"a":case"aa":return n.dayPeriod(r,{width:"abbreviated",context:"formatting"});case"aaa":return n.dayPeriod(r,{width:"abbreviated",context:"formatting"}).toLowerCase();case"aaaaa":return n.dayPeriod(r,{width:"narrow",context:"formatting"});default:return n.dayPeriod(r,{width:"wide",context:"formatting"})}},b:function(t,e,n){const r=t.getHours();let i;switch(i=12===r?qr_noon:0===r?qr_midnight:r/12>=1?"pm":"am",e){case"b":case"bb":return n.dayPeriod(i,{width:"abbreviated",context:"formatting"});case"bbb":return n.dayPeriod(i,{width:"abbreviated",context:"formatting"}).toLowerCase();case"bbbbb":return n.dayPeriod(i,{width:"narrow",context:"formatting"});default:return n.dayPeriod(i,{width:"wide",context:"formatting"})}},B:function(t,e,n){const r=t.getHours();let i;switch(i=r>=17?qr_evening:r>=12?qr_afternoon:r>=4?qr_morning:qr_night,e){case"B":case"BB":case"BBB":return n.dayPeriod(i,{width:"abbreviated",context:"formatting"});case"BBBBB":return n.dayPeriod(i,{width:"narrow",context:"formatting"});default:return n.dayPeriod(i,{width:"wide",context:"formatting"})}},h:function(t,e,n){if("ho"===e){let r=t.getHours()%12;return 0===r&&(r=12),n.ordinalNumber(r,{unit:"hour"})}return jn.h(t,e)},H:function(t,e,n){return"Ho"===e?n.ordinalNumber(t.getHours(),{unit:"hour"}):jn.H(t,e)},K:function(t,e,n){const r=t.getHours()%12;return"Ko"===e?n.ordinalNumber(r,{unit:"hour"}):Ee(r,e.length)},k:function(t,e,n){let r=t.getHours();return 0===r&&(r=24),"ko"===e?n.ordinalNumber(r,{unit:"hour"}):Ee(r,e.length)},m:function(t,e,n){return"mo"===e?n.ordinalNumber(t.getMinutes(),{unit:"minute"}):jn.m(t,e)},s:function(t,e,n){return"so"===e?n.ordinalNumber(t.getSeconds(),{unit:"second"}):jn.s(t,e)},S:function(t,e){return jn.S(t,e)},X:function(t,e,n){const r=t.getTimezoneOffset();if(0===r)return"Z";switch(e){case"X":return ag(r);case"XXXX":case"XX":return mr(r);default:return mr(r,":")}},x:function(t,e,n){const r=t.getTimezoneOffset();switch(e){case"x":return ag(r);case"xxxx":case"xx":return mr(r);default:return mr(r,":")}},O:function(t,e,n){const r=t.getTimezoneOffset();switch(e){case"O":case"OO":case"OOO":return"GMT"+sg(r,":");default:return"GMT"+mr(r,":")}},z:function(t,e,n){const r=t.getTimezoneOffset();switch(e){case"z":case"zz":case"zzz":return"GMT"+sg(r,":");default:return"GMT"+mr(r,":")}},t:function(t,e,n){return Ee(Math.trunc(+t/1e3),e.length)},T:function(t,e,n){return Ee(+t,e.length)}};function sg(t,e=""){const n=t>0?"-":"+",r=Math.abs(t),i=Math.trunc(r/60),o=r%60;return 0===o?n+String(i):n+String(i)+e+Ee(o,2)}function ag(t,e){return t%60==0?(t>0?"-":"+")+Ee(Math.abs(t)/60,2):mr(t,e)}function mr(t,e=""){const n=t>0?"-":"+",r=Math.abs(t);return n+Ee(Math.trunc(r/60),2)+e+Ee(r%60,2)}const lg=(t,e)=>{switch(t){case"P":return e.date({width:"short"});case"PP":return e.date({width:"medium"});case"PPP":return e.date({width:"long"});default:return e.date({width:"full"})}},cg=(t,e)=>{switch(t){case"p":return e.time({width:"short"});case"pp":return e.time({width:"medium"});case"ppp":return e.time({width:"long"});default:return e.time({width:"full"})}},Ow={p:cg,P:(t,e)=>{const n=t.match(/(P+)(p+)?/)||[],r=n[1],i=n[2];if(!i)return lg(t,e);let o;switch(r){case"P":o=e.dateTime({width:"short"});break;case"PP":o=e.dateTime({width:"medium"});break;case"PPP":o=e.dateTime({width:"long"});break;default:o=e.dateTime({width:"full"})}return o.replace("{{date}}",lg(r,e)).replace("{{time}}",cg(i,e))}},ww=/^D+$/,Fw=/^Y+$/,Mw=["D","DD","YY","YYYY"];function Hw(t){return!(!function Dw(t){return t instanceof Date||"object"==typeof t&&"[object Date]"===Object.prototype.toString.call(t)}(t)&&"number"!=typeof t||isNaN(+Ne(t)))}const Lw=/[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g,Iw=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g,Nw=/^'([^]*?)'?$/,Ww=/''/g,Vw=/[a-zA-Z]/;function $c(t,e,n){var r,i,o,s,a,l,c,u;const d=Ps(),h=n?.locale??d.locale??Fd,p=n?.firstWeekContainsDate??(null==(i=null==(r=n?.locale)?void 0:r.options)?void 0:i.firstWeekContainsDate)??d.firstWeekContainsDate??(null==(s=null==(o=d.locale)?void 0:o.options)?void 0:s.firstWeekContainsDate)??1,m=n?.weekStartsOn??(null==(l=null==(a=n?.locale)?void 0:a.options)?void 0:l.weekStartsOn)??d.weekStartsOn??(null==(u=null==(c=d.locale)?void 0:c.options)?void 0:u.weekStartsOn)??0,_=Ne(t,n?.in);if(!Hw(_))throw new RangeError("Invalid time value");let f=e.match(Iw).map(C=>{const x=C[0];if("p"===x||"P"===x){return(0,Ow[x])(C,h.formatLong)}return C}).join("").match(Lw).map(C=>{if("''"===C)return{isToken:!1,value:"'"};const x=C[0];if("'"===x)return{isToken:!1,value:Pw(C)};if(og[x])return{isToken:!0,value:C};if(x.match(Vw))throw new RangeError("Format string contains an unescaped latin alphabet character `"+x+"`");return{isToken:!1,value:C}});h.localize.preprocessor&&(f=h.localize.preprocessor(_,f));const v={firstWeekContainsDate:p,weekStartsOn:m,locale:h};return f.map(C=>{if(!C.isToken)return C.value;const x=C.value;((null==n||!n.useAdditionalWeekYearTokens)&&function kw(t){return Fw.test(t)}(x)||(null==n||!n.useAdditionalDayOfYearTokens)&&function Aw(t){return ww.test(t)}(x))&&function Bw(t,e,n){const r=function Rw(t,e,n){const r="Y"===t[0]?"years":"days of the month";return`Use \`${t.toLowerCase()}\` instead of \`${t}\` (in \`${e}\`) for formatting ${r} to the input \`${n}\`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md`}(t,e,n);if(console.warn(r),Mw.includes(t))throw new RangeError(r)}(x,e,String(t));return(0,og[x[0]])(_,x,h.localize,v)}).join("")}function Pw(t){const e=t.match(Nw);return e?e[1].replace(Ww,"'"):t}const Gc=[["15seconds",15e3],["minute",6e4],["30minutes",18e5],["hourly",36e5],["daily",864e5],["monthly",2592e6],["quarterly",7776e6],["yearly",31104e6]];function ug(t,e,n,r,i){const o=0===e,s=2===Number($c(new Date(t),"c")),a=1===Number($c(new Date(t),"q")),l=0!==e?n[e-1]:null;switch(r){case"15seconds":case"minute":case"30minutes":case"hourly":return o||Ea(t)||io(t,l)||$n(t);case"daily":return i?o||s||$n(t):o||io(t,l)||$n(t);case"weekly":return o||s||$n(t);case"monthly":return o||$n(t);case"quarterly":return o||a;case"yearly":return!1;default:throw new Error(`${r} is not a valid time interval.`)}}function zc(t,e,n,r,i,o){const s=i.showDayName,a="daily"===r&&s?"weekly":r,l=new Date(t),c=y(i,"timeIntervalFormats")[a],u=y(c,"primary"),d=y(c,"secondary"),h=ug(t,e,n,r,s);let p=h?u:d;"15seconds"===r&&0!==l.getMilliseconds()&&(p=p.replace("pp","h:mm:ss.SSS a"));const m=i.localeObject,{code:_,optionsObject:f}=o,v=f[r].type,C=f[r][h?"primary":"secondary"][p];if("quarterly"!==r&&C)return o[v](l,_,C);{const x=$c(l,p,{locale:m}).split("").map(b=>{var T;const S=Number(b);return" "===b||Number.isNaN(S)?b:null==(T=S?.toLocaleString)?void 0:T.call(S,_)});return o[v](l,_,{},x.join(""))}}function ba(t){const e=new Date(t);return{M:e.getMonth()+1,d:e.getDate(),H:e.getHours(),m:e.getMinutes(),s:e.getSeconds()}}function Kc(t,e){if(Il[e])return e;if(1===t.length)return"15seconds";const n=function Uw(t){if(t)return t.slice(1).map((e,n)=>e-t[n])}(t);return function jw(t){const e=Gc.reduce((n,[,r],i)=>{const o=Gc[n][1];return Math.abs(o-t)<Math.abs(r-t)?n:i},0);return Gc[e][0]}(Pn(n))}function Ea(t){const{s:e,m:n,H:r}=ba(t);return 0===r&&0===n&&0===e}function io(t,e){return ba(t).M!==ba(e).M}function $n(t){const{M:e,d:n,s:r,m:i,H:o}=ba(t);return 1===e&&1===n&&0===o&&0===i&&0===r}function hg(t){return void 0===t?"":t.toISOString()}function dg(t){const e=zt(t,r=>r.value),n=Yt().domain(e).nice().domain();if(n[0]>0)n[0]=0;else if(0===n[0]&&0===n[1])return[0,1];return n[0]<0&&n[1]>0&&(Math.abs(n[0])>n[1]?n[1]=Math.abs(n[0]):n[0]=-n[1]),n}function pg(t,e){const n=y(e,"gradient","colors"),r=!Gt(n);let i=y(e,"pairing","option");const o=dg(t),s=o[0]<0&&o[1]>0?"diverge":"mono";(i<1&&i>4&&"mono"===s||i<1&&i>2&&"diverge"===s)&&(i=1);const a=r?n:[];if(!r){const l="diverge"===s?17:11;for(let c=1;c<l+1;c++)a.push(`fill-${s}-${i}-${c}`)}return Dc().domain(o).range(a)}var de=(t=>(t.GRAPHICS_DOCUMENT="graphics-document",t.GRAPHICS_OBJECT="graphics-object",t.GRAPHICS_SYMBOL="graphics-symbol",t.GROUP="group",t.DOCUMENT="document",t.CHECKBOX="checkbox",t.BUTTON="button",t.MENU="menu",t.MENU_ITEM="menuitem",t.IMG="img",t))(de||{});Symbol.toStringTag;var qc=function Gw(t,e){return function(n,r){if(null==n)return n;if(!rr(n))return t(n,r);for(var i=n.length,o=-1,s=Object(n);++o<i&&!1!==r(s[o],o,s););return n}}(function $w(t,e){return t&&Dp(t,e,Di)});function me(t){return function(){return t}}var zw=Array.prototype.slice;function Sa(t){return"object"==typeof t&&"length"in t?t:Array.from(t)}function Kw(t,e,n,r){for(var i=-1,o=null==t?0:t.length;++i<o;){var s=t[i];e(r,s,n(s),t)}return r}function qw(t,e,n,r){return qc(t,function(i,o,s){e(r,i,n(i),s)}),r}var Qw=Object.prototype.hasOwnProperty,Jw=function Yw(t,e){return function(n,r){return(Qe(n)?Kw:qw)(n,t,ea(r),{})}}(function(t,e,n){Qw.call(t,n)?t[n].push(e):$s(t,n,[e])});function tF(t){return t}function mg(t,e){return(null==t||!(t>=t))-(null==e||!(e>=e))||(t<e?-1:t>e?1:0)}var iF=Array.prototype.slice;function Yc(t){return()=>t}function sF(t){return Math.max(1,Math.ceil(Math.log(function eF(t,e){let n=0;for(let r of t)null!=r&&(r=+r)>=r&&++n;return n}(t))/Math.LN2)+1)}function aF(){var t=tF,e=zt,n=sF;function r(i){Array.isArray(i)||(i=Array.from(i));var o,a,l,s=i.length,c=new Array(s);for(o=0;o<s;++o)c[o]=t(i[o],o,i);var u=e(c),d=u[0],h=u[1],p=n(c,d,h);if(!Array.isArray(p)){const x=h,b=+p;if(e===zt&&([d,h]=function oF(t,e,n){let r;for(;;){const i=Vr(t,e,n);if(i===r||0===i||!isFinite(i))return[t,e];i>0?(t=Math.floor(t/i)*i,e=Math.ceil(e/i)*i):i<0&&(t=Math.ceil(t*i)/i,e=Math.floor(e*i)/i),r=i}}(d,h,b)),(p=na(d,h,b))[0]<=d&&(l=Vr(d,h,b)),p[p.length-1]>=h)if(x>=h&&e===zt){const T=Vr(d,h,b);isFinite(T)&&(T>0?h=(Math.floor(h/T)+1)*T:T<0&&(h=(Math.ceil(h*-T)+1)/-T))}else p.pop()}for(var m=p.length,_=0,f=m;p[_]<=d;)++_;for(;p[f-1]>h;)--f;(_||f<m)&&(p=p.slice(_,f),m=f-_);var C,v=new Array(m+1);for(o=0;o<=m;++o)(C=v[o]=[]).x0=o>0?p[o-1]:d,C.x1=o<m?p[o]:h;if(isFinite(l)){if(l>0)for(o=0;o<s;++o)null!=(a=c[o])&&d<=a&&a<=h&&v[Math.min(m,Math.floor((a-d)/l))].push(i[o]);else if(l<0)for(o=0;o<s;++o)if(null!=(a=c[o])&&d<=a&&a<=h){const x=Math.floor((d-a)*l);v[Math.min(m,x+(p[x]<=a))].push(i[o])}}else for(o=0;o<s;++o)null!=(a=c[o])&&d<=a&&a<=h&&v[hc(p,a,0,m)].push(i[o]);return v}return r.value=function(i){return arguments.length?(t="function"==typeof i?i:Yc(i),r):t},r.domain=function(i){return arguments.length?(e="function"==typeof i?i:Yc([i[0],i[1]]),r):e},r.thresholds=function(i){return arguments.length?(n="function"==typeof i?i:Yc(Array.isArray(i)?iF.call(i):i),r):n},r}function gg(t,e,n=0,r=1/0,i){if(e=Math.floor(e),n=Math.floor(Math.max(0,n)),r=Math.floor(Math.min(t.length-1,r)),!(n<=e&&e<=r))return t;for(i=void 0===i?mg:function nF(t=or){if(t===or)return mg;if("function"!=typeof t)throw new TypeError("compare is not a function");return(e,n)=>{const r=t(e,n);return r||0===r?r:(0===t(n,n))-(0===t(e,e))}}(i);r>n;){if(r-n>600){const l=r-n+1,c=e-n+1,u=Math.log(l),d=.5*Math.exp(2*u/3),h=.5*Math.sqrt(u*d*(l-d)/l)*(c-l/2<0?-1:1);gg(t,e,Math.max(n,Math.floor(e-c*d/l+h)),Math.min(r,Math.floor(e+(l-c)*d/l+h)),i)}const o=t[e];let s=n,a=r;for(oo(t,n,e),i(t[r],o)>0&&oo(t,n,r);s<a;){for(oo(t,s,a),++s,--a;i(t[s],o)<0;)++s;for(;i(t[a],o)>0;)--a}0===i(t[n],o)?oo(t,n,a):(++a,oo(t,a,r)),a<=e&&(n=a+1),e<=a&&(r=a-1)}return t}function oo(t,e,n){const r=t[e];t[e]=t[n],t[n]=r}function Xc(t,e,n){if(t=Float64Array.from(function*sb(t,e){for(let n of t)null!=n&&(n=+n)>=n&&(yield n)}(t)),(r=t.length)&&!isNaN(e=+e)){if(e<=0||r<2)return Pn(t);if(e>=1)return sr(t);var r,i=(r-1)*e,o=Math.floor(i),s=sr(gg(t,o).subarray(0,o+1));return s+(Pn(t.subarray(o+1))-s)*(i-o)}}function fg(t,e){if((s=t.length)>1)for(var r,i,s,n=1,o=t[e[0]],a=o.length;n<s;++n)for(i=o,o=t[e[n]],r=0;r<a;++r)o[r][1]+=o[r][0]=isNaN(i[r][1])?i[r][0]:i[r][1]}function _g(t){for(var e=t.length,n=new Array(e);--e>=0;)n[e]=e;return n}function lF(t,e){return t[e]}function cF(t){const e=[];return e.key=t,e}function Zc(){var t=me([]),e=_g,n=fg,r=lF;function i(o){var a,u,s=Array.from(t.apply(this,arguments),cF),l=s.length,c=-1;for(const d of o)for(a=0,++c;a<l;++a)(s[a][c]=[0,+r(d,s[a].key,c,o)]).data=d;for(a=0,u=Sa(e(s));a<l;++a)s[u[a]].index=a;return n(s,u),s}return i.keys=function(o){return arguments.length?(t="function"==typeof o?o:me(Array.from(o)),i):t},i.value=function(o){return arguments.length?(r="function"==typeof o?o:me(+o),i):r},i.order=function(o){return arguments.length?(e=null==o?_g:"function"==typeof o?o:me(Array.from(o)),i):e},i.offset=function(o){return arguments.length?(n=o??fg,i):n},i}function uF(t,e){if((l=t.length)>0)for(var n,i,o,s,a,l,r=0,c=t[e[0]].length;r<c;++r)for(s=a=0,n=0;n<l;++n)(o=(i=t[e[n]][r])[1]-i[0])>0?(i[0]=s,i[1]=s+=o):o<0?(i[1]=a,i[0]=a+=o):(i[0]=0,i[1]=o)}class ln{constructor(e){this.state={options:{}},this.colorScale={},this.colorClassNames={},this.services=e}formatTable({headers:e,cells:n}){const r=this.getOptions(),{code:i,date:o,number:s}=y(r,"locale"),a=y(r,"tabularRepModal","tableHeadingFormatter"),l=y(r,"tabularRepModal","tableCellFormatter"),{cartesianScales:c}=this.services,u=c?.getDomainAxisScaleType();let d;return u===ne.TIME&&(d=h=>o(h,i,{month:"short",day:"numeric",year:"numeric"})),["function"==typeof a?a(e):e,..."function"==typeof l?l(n):n.map(h=>{d&&(h[1]=d(h[1]));for(const p in h){const m=h[p];"number"==typeof m&&(h[p]=s(m,i))}return h})]}getAllDataFromDomain(e){if(!this.getData())return null;const n=this.getOptions();let r=this.getData();const i=this.getDataGroups(),{groupMapsTo:o}=y(n,"data"),s=y(n,"axes");return e&&(r=r.filter(a=>e.includes(a[o]))),s&&Object.keys(s).forEach(a=>{const l=s[a].mapsTo,c=s[a].scaleType;if((c===ne.LINEAR||c===ne.LOG)&&(r=r.map(u=>({...u,[l]:null===u[l]?u[l]:Number(u[l])}))),l&&s[a].domain)if(c===ne.LABELS)r=r.filter(u=>s[a].domain.includes(u[l]));else{const[u,d]=s[a].domain;r=r.filter(h=>!(l in h)||h[l]>=u&&h[l]<=d)}}),r.filter(a=>i.find(l=>l.name===a[o]))}getDisplayData(e){if(!this.get("data"))return null;const{ACTIVE:n}=He.items.status,r=this.getDataGroups(e),{groupMapsTo:i}=this.getOptions().data;return this.getAllDataFromDomain(e).filter(o=>r.find(s=>s.name===o[i]&&s.status===n))}getData(){return this.get("data")}isDataEmpty(){return!this.getData().length}setData(e){const n=this.sanitize(_n(e)),r=this.generateDataGroups(n);return this.set({data:n,dataGroups:r}),n}getDataGroups(e){return y(this.getOptions(),"data","loading")?[]:e?this.get("dataGroups").filter(n=>e.includes(n.name)):this.get("dataGroups")}getActiveDataGroups(e){const{ACTIVE:n}=He.items.status;return this.getDataGroups(e).filter(r=>r.status===n)}getDataGroupNames(e){return this.getDataGroups(e).map(n=>n.name)}getActiveDataGroupNames(e){return this.getActiveDataGroups(e).map(n=>n.name)}aggregateBinDataByGroup(e){return Jw(e,"group")}getBinConfigurations(){const e=this.getDisplayData(),n=this.getOptions(),r=this.services.cartesianScales.getMainXAxisPosition(),i=this.services.cartesianScales.getDomainIdentifier(),o=n.axes[r],{groupMapsTo:s}=n.data,{bins:a=Um.defaultBins}=o,l=Array.isArray(a),c=aF().value(p=>p[i]).thresholds(a)(e);if(l)c[c.length-1].x1=a[a.length-1];else{const p=c[0].x1-c[0].x0;c[c.length-1].x1=+c[c.length-1].x0+p}const u=l?[a[0],a[a.length-1]]:[c[0].x0,c[c.length-1].x1],d=Array.from(new Set(e.map(p=>p[s]))),h=[];return c.forEach(p=>{const m=`${p.x0}-${p.x1}`,_=this.aggregateBinDataByGroup(p);d.forEach(f=>{h.push({group:f,key:m,value:_[f]||0,bin:p.x0})})}),{bins:c,binsDomain:u}}getBinnedStackedData(){const e=this.getOptions(),{groupMapsTo:n}=e.data,r=this.getActiveDataGroupNames(),{bins:i}=this.getBinConfigurations(),o=this.getDataValuesGroupedByKeys({bins:i});return Zc().keys(r)(o).map((s,a)=>Object.keys(s).filter(l=>!isNaN(l)).map(l=>{const c=s[l];return c[n]=r[a],c}))}getGroupedData(e){const n=this.getDisplayData(e),r={},{groupMapsTo:i}=this.getOptions().data;return n.map(o=>{const s=o[i];null!==r[s]&&void 0!==r[s]?r[s].push(o):r[s]=[o]}),Object.keys(r).map(o=>({name:o,data:r[o]}))}getStackKeys({bins:e=null,groups:n=null}={bins:null,groups:null}){const r=this.getOptions(),i=this.getDisplayData(n);let o;o=e?e.map(l=>`${l.x0}:${l.x1}`):Ui(i.map(l=>{const c=this.services.cartesianScales.getDomainIdentifier(l);return l[c]instanceof Date?hg(l[c]):l[c]&&"function"==typeof l[c].toString?l[c].toString():l[c]}));const s=this.services.cartesianScales.domainAxisPosition,a=r.axes[s].scaleType;return a===ne.TIME?o.sort((l,c)=>new Date(l)-new Date(c)):(a===ne.LOG||a===ne.LINEAR)&&o.sort((l,c)=>l-c),o}getDataValuesGroupedByKeys({bins:e=null,groups:n=null}){const r=this.getOptions(),{groupMapsTo:i}=r.data,o=this.getDisplayData(n),s=this.getDataGroupNames(),a=this.getStackKeys({bins:e,groups:n});return e?a.map(l=>{const[c,u]=l.split(":"),d={x0:c,x1:u},h=e.find(p=>p.x0.toString()===c.toString());return s.forEach(p=>{d[p]=h.filter(m=>m[i]===p).length}),d}):a.map(l=>{const c={sharedStackKey:l};return s.forEach(u=>{const d=o.find(p=>{const m=this.services.cartesianScales.getDomainIdentifier(p);return p[i]===u&&Object.prototype.hasOwnProperty.call(p,m)&&(p[m]instanceof Date?hg(p[m])===l:p[m].toString()===l)}),h=this.services.cartesianScales.getRangeIdentifier(c);c[u]=d?d[h]:null}),c})}getStackedData({percentage:e=!1,groups:n=null,divergent:r=!1}){const i=this.getOptions(),{groupMapsTo:o}=i.data,s=this.getActiveDataGroupNames(n),a=this.getDataValuesGroupedByKeys({groups:n});if(e){const l=function Xw(t){for(var e=-1,n=null==t?0:t.length,r={};++e<n;){var i=t[e];r[i[0]]=i[1]}return r}(a.map(c=>[c.sharedStackKey,0]));a.forEach(c=>{s.forEach(u=>{l[c.sharedStackKey]+=c[u]})}),a.forEach(c=>{s.forEach(u=>{const d=l[c.sharedStackKey];l[c.sharedStackKey]?c[u]=c[u]/d*100:c[u]=0})})}return(r?Zc().offset(uF):Zc()).keys(s)(a).map((l,c)=>Object.keys(l).filter(u=>!isNaN(u)).map(u=>{const d=l[u];return d[o]=s[c],d}))}getOptions(){return this.state.options}set(e,n){this.state=Object.assign({},this.state,e);const r=Object.assign({skipUpdate:!1,animate:!0},n);r.skipUpdate||this.update(r.animate)}get(e){return e?this.state[e]:this.state}setOptions(e){const n=this.getOptions();jc(n,e),this.set({options:se(n,e)})}update(e=!0){this.getDisplayData()&&(this.updateAllDataGroups(),this.setCustomColorScale(),this.setColorClassNames(),this.services.events.dispatchEvent(O.Model.UPDATE,{animate:e}))}toggleDataLabel(e){const{ACTIVE:n,DISABLED:r}=He.items.status,i=this.getDataGroups(),o=i.some(c=>c.status===r),s=i.filter(c=>c.status===n);if(o)if(1===s.length&&s[0].name===e)i.forEach((c,u)=>{i[u].status=n});else{const c=i.findIndex(u=>u.name===e);i[c].status=i[c].status===r?n:r}else i.forEach((c,u)=>{i[u].status=c.name===e?n:r});const a=i.filter(c=>c.status===n),l=this.getOptions();i.some(c=>c.status===r)?l.data.selectedGroups=a.map(c=>c.name):l.data.selectedGroups=[],this.services.events.dispatchEvent(O.Legend.ITEMS_UPDATE,{dataGroups:i}),this.set({dataGroups:i})}getIsFilled(e,n,r,i){const o=this.getOptions();return o.getIsFilled?o.getIsFilled(e,n,r,i):i}getFillColor(e,n,r){const i=this.getOptions(),o=y(this.colorScale,e);return i.getFillColor?i.getFillColor(e,n,r,o):o}getStrokeColor(e,n,r){const i=this.getOptions(),o=y(this.colorScale,e);return i.getStrokeColor?i.getStrokeColor(e,n,r,o):o}isUserProvidedColorScaleValid(){const e=y(this.getOptions(),"color","scale"),n=this.getDataGroups();return null!=e&&0!=Object.keys(e).length&&n.some(r=>Object.keys(e).includes(r.name))}getColorClassName(e){const n=this.colorClassNames(e.dataGroupName);let r=e.originalClassName;return e.classNameTypes.forEach(i=>r=e.originalClassName?`${r} ${i}-${n}`:`${i}-${n}`),r||""}getStatus(){return null}getAllDataGroupsNames(){return this.allDataGroups}transformToTabularData(e){console.warn("We've updated the charting data format to be tabular by default. The current format you're using is deprecated and will be removed in v1.0, read more here https://charts.carbondesignsystem.com/");const n=[],{datasets:r,labels:i}=e;return r.forEach(o=>{o.data.forEach((s,a)=>{let l;const c=y(o,"label");if(null===c){const d=y(i,a);l=d||"Ungrouped"}else l=c;const u={group:l,key:i[a]};isNaN(s)?(u.value=s.value,u.date=s.date):u.value=s,n.push(u)})}),n}getTabularDataArray(){return[]}exportToCSV(){const e=this.getTabularDataArray().map(o=>o.map(s=>`"${("&ndash;"===s?"\u2013":s).split(/[,;'"`]/).map(a=>function hF(t){const e=t.trim();return["=","+","-","@","\t","\r"].includes(e.charAt(0))?`\xa0${e}`:/[,\"\n]/.test(e)?`"${e}"`:e}(a)).join("")}"`)).map(o=>o.join(",")).join("\n"),n=this.getOptions();let r="myChart";const i=y(n,"fileDownload","fileName");"function"==typeof i?r=i("csv"):"string"==typeof i&&(r=i),this.services.files.downloadCSV(e,`${r}.csv`)}getTabularData(e){return Array.isArray(e)?e:this.transformToTabularData(e)}sanitize(e){return e=this.getTabularData(e)}updateAllDataGroups(){this.allDataGroups?this.getDataGroupNames().forEach(e=>{-1===this.allDataGroups.indexOf(e)&&this.allDataGroups.push(e)}):this.allDataGroups=this.getDataGroupNames()}generateDataGroups(e){const{groupMapsTo:n}=this.getOptions().data,{ACTIVE:r,DISABLED:i}=He.items.status,o=this.getOptions(),s=Ui(e.map(l=>l[n]));o.data.selectedGroups.length&&(o.data.selectedGroups.every(l=>s.includes(l))||(o.data.selectedGroups=[]));const a=l=>!o.data.selectedGroups.length||o.data.selectedGroups.includes(l)?r:i;return s.map(l=>({name:l,status:a(l)}))}setCustomColorScale(){if(!this.isUserProvidedColorScaleValid())return;const e=this.getOptions(),n=y(e,"color","scale");Object.keys(n).forEach(r=>{this.allDataGroups.includes(r)||console.warn(`"${r}" does not exist in data groups.`)}),this.allDataGroups.filter(r=>n[r]).forEach(r=>this.colorScale[r]=n[r])}setColorClassNames(){const e=y(this.getOptions(),"color","pairing");let n=y(e,"numberOfVariants");(!n||n<this.allDataGroups.length)&&(n=this.allDataGroups.length);let r=y(e,"option");const i=Hc.pairingOptions,o=n>5?14:n;r=r<=i[`${o}-color`]?r:1;const a=this.allDataGroups.map((l,c)=>`${o}-${r}-${c%14+1}`);this.colorClassNames=Ta().range(a).domain(this.allDataGroups)}}class gr extends ln{constructor(e){super(e),this.axisFlavor=Dr.DEFAULT}assignRangeAndDomains(){const{cartesianScales:e}=this.services,n=this.getOptions(),r=e.isDualAxes(),i={primaryDomain:e.domainAxisPosition,primaryRange:e.rangeAxisPosition,secondaryDomain:null,secondaryRange:null};return r&&(i.secondaryDomain=e.secondaryDomainAxisPosition,i.secondaryRange=e.secondaryRangeAxisPosition),Object.keys(i).forEach(o=>{const s=i[o];e.scales[s]?i[o]={position:s,label:e.getScaleLabel(s),identifier:y(n,"axes",s,"mapsTo")}:i[o]=null}),i}getTabularDataArray(){const e=this.getDisplayData(),n=this.getOptions(),{groupMapsTo:r}=n.data,{primaryDomain:i,primaryRange:o,secondaryDomain:s,secondaryRange:a}=this.assignRangeAndDomains(),{number:l,code:c}=y(this.getOptions(),"locale"),u=["Group",i.label,o.label,...s?[s.label]:[],...a?[a.label]:[]],d=e.map(h=>[h[r],null===h[i.identifier]?"&ndash;":h[i.identifier],null===h[o.identifier]||isNaN(h[o.identifier])?"&ndash;":l(h[o.identifier],c),...s?[null===h[s.identifier]?"&ndash;":h[s.identifier]]:[],...a?[null===h[a.identifier]||isNaN(h[a.identifier])?"&ndash;":h[a.identifier]]:[]]);return super.formatTable({headers:u,cells:d})}setData(e){let n;if(e&&(n=super.setData(e),y(this.getOptions(),"zoomBar",j.TOP,"enabled"))){const r=y(this.getOptions(),"zoomBar",j.TOP,"data");this.setZoomBarData(r)}return n}setZoomBarData(e){const n=e?this.sanitize(_n(e)):this.getDisplayData();let r=n;const{cartesianScales:i}=this.services;if(n&&i.domainAxisPosition&&i.rangeAxisPosition){const o=i.getDomainIdentifier(),s=i.getRangeIdentifier();let a=n.map(l=>l[o].getTime());a=Ui(a).sort(),r=a.map(l=>{let c=0;const u={};return n.forEach(d=>{d[o].getTime()===l&&(c+=d[s])}),u[o]=new Date(l),u[s]=c,u})}this.set({zoomBarData:r})}getZoomBarData(){return this.get("zoomBarData")}sanitizeDateValues(e){const n=this.getOptions();if(!n.axes)return e;const r=[];return Object.keys(j).forEach(i=>{const o=j[i],s=n.axes[o];if(s&&s.scaleType===ne.TIME){const a=s.mapsTo;(null!==a||void 0!==a)&&r.push(a)}}),r.length>0&&e.forEach(i=>{r.forEach(o=>{null===y(i,o,"getTime")&&(i[o]=new Date(i[o]))})}),e}sanitize(e){return e=super.sanitize(e),e=this.sanitizeDateValues(e)}}class dF extends gr{constructor(e){super(e)}getTabularDataArray(){const e=this.getDisplayData(),{number:n,code:r}=y(this.getOptions(),"locale");e.sort((s,a)=>s.source.localeCompare(a.source));const o=[...e.map(s=>[s.source,s.target,null===s.value?"&ndash;":n(s.value,r)])];return super.formatTable({headers:["Source","Target","Value"],cells:o})}}class pF extends gr{constructor(e){super(e)}getBoxQuartiles(e){return{q_25:Xc(e,.25),q_50:Xc(e,.5),q_75:Xc(e,.75)}}getBoxplotData(){const e=this.getOptions(),{groupMapsTo:n}=e.data,r=this.getGroupedData(),i=[];for(const{name:o,data:s}of r){const a=this.services.cartesianScales.getRangeIdentifier(),l=s.map(x=>x[a]).sort(or),c={[n]:o,counts:l,quartiles:this.getBoxQuartiles(l),outliers:null,whiskers:null},u=c.quartiles.q_25,d=c.quartiles.q_75,h=1.5*(d-u),p=u-h,m=d+h,_=[],f=[];for(const x of l)x<p||x>m?_.push(x):f.push(x);c.outliers=_;const v=Pn(f),C=sr(f);c.whiskers={min:v||Pn([c.quartiles.q_25,c.quartiles.q_50,c.quartiles.q_75]),max:C||sr([c.quartiles.q_25,c.quartiles.q_50,c.quartiles.q_75])},i.push(c)}return i}getTabularDataArray(){const e=this.getOptions(),{groupMapsTo:n}=e.data,r=this.getBoxplotData(),{number:i,code:o}=y(e,"locale"),a=[...r.map(l=>{let c=y(l,"outliers");return(null===c||0===c.length)&&(c=["&ndash;"]),[l[n],null!==y(l,"whiskers","min")?i(y(l,"whiskers","min"),o):"&ndash;",null!==y(l,"quartiles","q_25")?i(y(l,"quartiles","q_25"),o):"&ndash;",null!==y(l,"quartiles","q_50")?i(y(l,"quartiles","q_50"),o):"&ndash;",null!==y(l,"quartiles","q_75")?i(y(l,"quartiles","q_75"),o):"&ndash;",null!==y(l,"whiskers","max")?i(y(l,"whiskers","max"),o):"&ndash;",null!==y(l,"quartiles","q_75")&&null!==y(l,"quartiles","q_25")?(i(y(l,"quartiles","q_75")-y(l,"quartiles","q_25")),o):"&ndash;",c.map(u=>i(u,o)).join(",")]})];return super.formatTable({headers:["Group","Minimum","Q1","Median","Q3","Maximum","IQR","Outlier(s)"],cells:a})}setColorClassNames(){const e=y(this.getOptions(),"color","pairing");let n=y(e,"option");const r=Hc.pairingOptions;n=n<=r["1-color"]?n:1;const i=this.allDataGroups.map(()=>`1-${n}-1`);this.colorClassNames=Ta().range(i).domain(this.allDataGroups)}}class mF extends gr{constructor(e){super(e)}getMatchingRangeIndexForDatapoint(e){let n;for(let r=e.ranges.length-1;r>0;r--){const i=e.ranges[r];if(e.value>=i)return n=r,n}return 0}getTabularDataArray(){const e=this.getDisplayData(),n=this.getOptions(),{groupMapsTo:r}=n.data,i=this.services.cartesianScales.getRangeIdentifier(),{number:o,code:s}=y(n,"locale"),a=y(n,"bullet","performanceAreaTitles"),c=[...e.map(u=>[u.title,u[r],null===u.value?"&ndash;":o(u.value,s),null===y(u,"marker")?"&ndash;":o(u.marker,s),null===y(u,"marker")?"&ndash;":`${o(Math.floor(u[i]/u.marker*100),s)}%`,a[this.getMatchingRangeIndexForDatapoint(u)]])];return super.formatTable({headers:["Title","Group","Value","Target","Percentage","Performance"],cells:c})}}class gF extends ln{constructor(e){super(e),this._colorScale=void 0,this._matrix={}}getFillColor(e){return this._colorScale(e)}getCombinedData(){if(Gt(this._matrix)){const e=this.getOptions(),n=this.getDisplayData();!Gt(n)&&!Gt(e.geoData.objects.countries)&&(e.geoData.objects.countries.geometries.forEach(r=>{this._matrix[r.properties.NAME]=r}),n.forEach(r=>{this._matrix[r.name]?this._matrix[r.name].value=r.value||null:console.warn(`Data point ${r} is missing geographical data.`)}))}return this._matrix}getTabularDataArray(){const e=this.getDisplayData(),{number:n,code:r}=y(this.getOptions(),"locale"),o=[...e.map(s=>[null===s.id?"&ndash;":s.id,s.name,null===s.value?"&ndash;":n(s.value,r)])];return super.formatTable({headers:["Country ID","Country Name","Value"],cells:o})}getColorClassName(e){return`${e.originalClassName||""} ${this._colorScale(e.value)}`}setColorClassNames(){const e=y(this.getOptions(),"color");this._colorScale=pg(this.getDisplayData(),e)}}class fF extends ln{constructor(e){super(e),this.parentNode=!1,this.set({depth:2},{skipUpdate:!0})}setData(e){super.setData(e),this.setDataGroups(),1===e.length&&(this.parentNode=!0),this.setZoom()}setOptions(e){const n=this.getOptions(),r=se({},e,this.getZoomOptions(e));jc(n,r);const i=this.getHierarchyLevel(),o=y(n,"circlePack","depth");this.set({options:se(n,r),depth:o&&o<4?o:i})}getZoomOptions(e){if(!this.getDisplayData())return{};const n=this.getDisplayData(),r=e||this.getOptions(),i=1===n.length&&y(n,0,"children")?y(n,0,"children"):n;let o=this.getHierarchyLevel();return i.some(s=>{if(s.children&&s.children.some(a=>a.children))return o=3,!1}),!0===y(r,"canvasZoom","enabled")&&o>2?{legend:{additionalItems:[{type:ze.ZOOM,name:"Click to zoom"}]}}:null}setZoom(e){this.setOptions(this.getZoomOptions(e))}updateHierarchyLevel(e){this.set({depth:e})}getHierarchyLevel(){return this.get("depth")}hasParentNode(){return this.parentNode}setDataGroups(){const e=this.getData(),n=this.getOptions(),{groupMapsTo:r}=n.data,i=e.map(o=>{const s=o[r];return this.setChildrenDataGroup(o,s)});this.set({data:i},{skipUpdate:!0})}setChildrenDataGroup(e,n){return e.children?{...e,dataGroupName:n,children:e.children.map(r=>this.setChildrenDataGroup(r,n))}:{...e,dataGroupName:n}}getTabularDataArray(){const e=this.getDisplayData(),{number:n,code:r}=y(this.getOptions(),"locale"),o=[];return e.forEach(s=>{let a=s.value?s.value:0;s.children&&(a+=this.getChildrenDatums(s.children,s.name,o,0)),o.push(["&ndash;",s.name,n(a,r)])}),super.formatTable({headers:["Child","Parent","Value"],cells:o})}getChildrenDatums(e,n,r=[],i=0){const o=n,{number:s,code:a}=y(this.getOptions(),"locale");return e.forEach(l=>{const c=l.name;let u=0;if(l.children)l.children.length>0&&("number"==typeof l.value&&(i+=l.value),u+=this.getChildrenDatums(l.children,c,r,u),r.push([c,o,s(u,a)]),i+=u);else{let d=0;"number"==typeof l.value&&(d=l.value,i+=l.value),r.push([l.name,o,s(d,a)])}}),i}}class _F extends ln{constructor(e){super(e)}getTabularData(e){const n=super.getTabularData(e);return e!==n&&n.forEach(r=>{r.key&&r.key!==r.group&&(r.group=r.key)}),n}getTabularDataArray(){const e=this.getDisplayData(),n=this.getOptions(),{groupMapsTo:r}=n.data,{valueMapsTo:i}=n.pie,{number:o,code:s}=y(n,"locale"),l=[...e.map(c=>[c[r],null===c[i]?"&ndash;":o(c[i],s)])];return super.formatTable({headers:["Group","Value"],cells:l})}sanitize(e){return this.getTabularData(e).sort((n,r)=>r.value-n.value)}}class vF extends ln{constructor(e){super(e)}getDataGroups(){return super.getDataGroups().filter(e=>"delta"!==e.name)}getTabularDataArray(){const e=this.getDisplayData(),n=this.getOptions(),{groupMapsTo:r}=n.data,{number:i,code:o}=y(this.getOptions(),"locale"),a=[...e.map(l=>[l[r],null===l.value?"&ndash;":i(l.value,o)])];return super.formatTable({headers:["Group","Value"],cells:a})}}class yF extends gr{constructor(e){super(e),this.axisFlavor=Dr.HOVERABLE,this._colorScale=void 0,this._domains=[],this._ranges=[],this._matrix={};const n=y(this.getOptions(),"axes");if(y(n,"left","scaleType")&&y(n,"left","scaleType")!==ne.LABELS||y(n,"right","scaleType")&&y(n,"right","scaleType")!==ne.LABELS||y(n,"top","scaleType")&&y(n,"top","scaleType")!==ne.LABELS||y(n,"bottom","scaleType")&&y(n,"bottom","scaleType")!==ne.LABELS)throw Error("Heatmap only supports label scaletypes.")}getValueDomain(){const e=zt(this.getDisplayData(),r=>r.value),n=Yt().domain(e).nice().domain();if(n[0]>0)n[0]=0;else if(0===n[0]&&0===n[1])return[0,1];return n[0]<0&&n[1]>0&&(Math.abs(n[0])>n[1]?n[1]=Math.abs(n[0]):n[0]=-n[1]),n}getFillColor(e){return this._colorScale(e)}getUniqueDomain(){if(Gt(this._domains)){const e=this.getDisplayData(),{cartesianScales:n}=this.services,r=n.getDomainIdentifier(),i=n.getMainXAxisPosition(),o=n.getCustomDomainValuesByposition(i);if(o)return o;this._domains=Array.from(new Set(e.map(s=>s[r])))}return this._domains}getUniqueRanges(){if(Gt(this._ranges)){const e=this.getDisplayData(),{cartesianScales:n}=this.services,r=n.getRangeIdentifier(),i=n.getMainYAxisPosition(),o=n.getCustomDomainValuesByposition(i);if(o)return o;this._ranges=Array.from(new Set(e.map(s=>s[r])))}return this._ranges}getMatrix(){if(Gt(this._matrix)){const e=this.getUniqueDomain(),n=this.getUniqueRanges(),r=this.services.cartesianScales.getDomainIdentifier(),i=this.services.cartesianScales.getRangeIdentifier(),o={};n.forEach(s=>{o[s]={value:null,index:-1}}),e.forEach(s=>{this._matrix[s]=_n(o)}),this.getDisplayData().forEach((s,a)=>{this._matrix[s[r]][s[i]]={value:s.value,index:a}})}return this._matrix}setData(e){const n=this.sanitize(_n(e)),r=this.generateDataGroups(n);return this.set({data:n,dataGroups:r}),this._domains=[],this._ranges=[],this._matrix={},n}getMatrixAsArray(){Gt(this._matrix)&&this.getMatrix();const e=this.getUniqueDomain(),n=this.getUniqueRanges(),r=this.services.cartesianScales.getDomainIdentifier(),i=this.services.cartesianScales.getRangeIdentifier(),o=[];return e.forEach(s=>{n.forEach(a=>{const l={value:this._matrix[s][a].value,index:this._matrix[s][a].index};l[r]=s,l[i]=a,o.push(l)})}),o}getTabularDataArray(){const e=this.getDisplayData(),{primaryDomain:n,primaryRange:r}=this.assignRangeAndDomains(),{number:i,code:o}=y(this.getOptions(),"locale"),s=[n.label,r.label,"Value"],a=[...e.map(l=>[null===l[n.identifier]?"&ndash;":l[n.identifier],null===l[r.identifier]?"&ndash;":l[r.identifier],null===l.value?"&ndash;":i(l.value,o)])];return super.formatTable({headers:s,cells:a})}getColorClassName(e){return`${e.originalClassName} ${this._colorScale(e.value)}`}setColorClassNames(){const e=this.getOptions(),n=y(e,"color","gradient","colors"),r=!Gt(n);let i=y(e,"color","pairing","option");const o=this.getValueDomain(),s=o[0]<0&&o[1]>0?"diverge":"mono";(i<1&&i>4&&"mono"===s||i<1&&i>2&&"diverge"===s)&&(i=1);const a=r?n:[];if(!r){const c="diverge"===s?17:11;for(let u=1;u<c+1;u++)a.push(`fill-${s}-${i}-${u}`)}this._colorScale=Dc().domain(o).range(a);const l=y(this.getOptions(),"color");this._colorScale=pg(this.getDisplayData(),l)}}class CF extends gr{getTabularDataArray(){const e=this.getOptions(),{groupMapsTo:n}=e.data,{number:r,code:i}=y(this.getOptions(),"locale"),o=this.getBinnedStackedData(),s=[ve(e,"bins.rangeLabel")||"Range",...o.map(l=>ve(l,`0.${n}`))],a=[...ve(o,0).map((l,c)=>[`${r(Number(ve(l,"data.x0")),i)} \u2013 ${r(Number(ve(l,"data.x1")),i)}`,...o.map(u=>r(ve(u[c],`data.${ve(u[c],n)}`),i))])];return super.formatTable({headers:s,cells:a})}}class TF extends ln{constructor(e){super(e)}getMaximumDomain(e){return e.reduce((n,r)=>n+r.value,0)}getFillColor(e){const n=this.getOptions(),r=y(n,"color","scale"),i=this.getStatus();return r||!i?super.getFillColor(e):null}getStatus(){const e=this.getOptions(),n=y(this.getDisplayData()),r=n?.reduce((s,a)=>s+a.value,0)??0,i=y(e,"meter","proportional")?r:r>100?100:r,o=y(e,"meter","status","ranges");if(o){const s=o.filter(a=>a.range[0]<=i&&i<=a.range[1]);if(s.length>0)return s[0].status}return null}getTabularDataArray(){const e=this.getDisplayData(),n=this.getOptions(),{groupMapsTo:r}=n.data,i=this.getStatus(),o=y(n,"meter","proportional"),{number:s,code:a}=y(this.getOptions(),"locale");let u,l=[],c=[];if(null===o){u=100;const d=e[0];l=["Group","Value",...i?["Status"]:[]],c=[[d[r],null===d.value?"&ndash;":s(d.value,a),...i?[i]:[]]]}else u=y(o,"total")||this.getMaximumDomain(e),l=["Group","Value","Percentage of total"],c=[...e.map(h=>{let p;p=null!==h.value&&void 0!==h.value?Number(h.value):0;const m=Number((h.value/u*100).toFixed(2));return[h[r],null===h.value?"&ndash;":s(p,a),s(m,a)+" %"]})];return super.formatTable({headers:l,cells:c})}}class xF extends gr{constructor(e){super(e)}getTabularDataArray(){const e=this.getOptions(),n=this.getGroupedData(),{angle:r,value:i}=y(e,"radar","axes"),{number:o,code:s}=y(e,"locale"),a=y(n,"0","data").map(u=>u[r]),l=["Group",...a],c=[...n.map(u=>[u.name,...a.map((d,h)=>null!==y(u,"data",h,i)?o(y(u,"data",h,i),s):"&ndash;")])];return super.formatTable({headers:l,cells:c})}}class bF extends ln{constructor(e){super(e)}getTabularDataArray(){const e=this.getDisplayData(),r=[];return e.forEach(i=>{this.getChildrenDatums(i,r),r.push([i.name,"&ndash;"])}),super.formatTable({headers:["Child","Parent"],cells:r})}getChildrenDatums(e,n=[]){e.children&&e.children.length>0&&e.children.forEach(r=>{this.getChildrenDatums(r,n),n.push([r.name,e.name])})}}class EF extends ln{constructor(e){super(e)}getTabularDataArray(){const e=this.getDisplayData(),{number:n,code:r}=y(this.getOptions(),"locale"),o=[];return e.forEach(s=>{Array.isArray(s.children)?s.children.forEach(a=>{o.push([a.name,s.name,null===a.value?"&ndash;":n(a.value,r)])}):null!==y(s.name)&&y(s.value)&&o.push(["\u2013",s.name,n(s.value,r)])}),super.formatTable({headers:["Child","Group","Value"],cells:o})}}class SF extends ln{constructor(e){super(e)}getTabularDataArray(){const e=this.getDisplayData(),n=this.getOptions(),{fontSizeMapsTo:r,wordMapsTo:i}=n.wordCloud,{groupMapsTo:o}=n.data,{code:s,number:a}=y(n,"locale"),l=[n.tooltip.wordLabel,"Group",n.tooltip.valueLabel],c=[...e.map(u=>[u[i],u[o],a(u[r],s)])];return super.formatTable({headers:l,cells:c})}}var Se=Ei(56207),OF=/\s/;var FF=/^\s+/;function MF(t){return t&&t.slice(0,function wF(t){for(var e=t.length;e--&&OF.test(t.charAt(e)););return e}(t)+1).replace(FF,"")}var vg=NaN,AF=/^[-+]0x[0-9a-f]+$/i,kF=/^0b[01]+$/i,BF=/^0o[0-7]+$/i,RF=parseInt;function Yr(t){if("number"==typeof t)return t;if(Us(t))return vg;if(Bt(t)){var e="function"==typeof t.valueOf?t.valueOf():t;t=Bt(e)?e+"":e}if("string"!=typeof t)return 0===t?t:+t;t=MF(t);var n=kF.test(t);return n||BF.test(t)?RF(t.slice(2),n?2:8):AF.test(t)?vg:+t}var Qc=function(){return jt.Date.now()},HF=Math.max,LF=Math.min;function Oa(t,e,n){var r,i,o,s,a,l,c=0,u=!1,d=!1,h=!0;if("function"!=typeof t)throw new TypeError("Expected a function");function p(S){var M=r,D=i;return r=i=void 0,c=S,s=t.apply(D,M)}function f(S){var M=S-l;return void 0===l||M>=e||M<0||d&&S-c>=o}function v(){var S=Qc();if(f(S))return C(S);a=setTimeout(v,function _(S){var k=e-(S-l);return d?LF(k,o-(S-c)):k}(S))}function C(S){return a=void 0,h&&r?p(S):(r=i=void 0,s)}function T(){var S=Qc(),M=f(S);if(r=arguments,i=this,l=S,M){if(void 0===a)return function m(S){return c=S,a=setTimeout(v,e),u?p(S):s}(l);if(d)return clearTimeout(a),a=setTimeout(v,e),p(l)}return void 0===a&&(a=setTimeout(v,e)),s}return e=Yr(e)||0,Bt(n)&&(u=!!n.leading,o=(d="maxWait"in n)?HF(Yr(n.maxWait)||0,e):o,h="trailing"in n?!!n.trailing:h),T.cancel=function x(){void 0!==a&&clearTimeout(a),c=0,r=l=i=a=void 0},T.flush=function b(){return void 0===a?s:C(Qc())},T}function L(t){return"string"==typeof t?new Tt([[document.querySelector(t)]],[document.documentElement]):new Tt([[t]],Jp)}function so(){var o,s,t=Ta().unknown(void 0),e=t.domain,n=t.range,r=0,i=1,a=!1,l=0,c=0,u=.5;function d(){var h=e().length,p=i<r,m=p?i:r,_=p?r:i;o=(_-m)/Math.max(1,h-l+2*c),a&&(o=Math.floor(o)),m+=(_-m-o*(h-l))*u,s=o*(1-l),a&&(m=Math.round(m),s=Math.round(s));var f=function IF(t,e,n){t=+t,e=+e,n=(i=arguments.length)<2?(e=t,t=0,1):i<3?1:+n;for(var r=-1,i=0|Math.max(0,Math.ceil((e-t)/n)),o=new Array(i);++r<i;)o[r]=t+r*n;return o}(h).map(function(v){return m+o*v});return n(p?f.reverse():f)}return delete t.unknown,t.domain=function(h){return arguments.length?(e(h),d()):e()},t.range=function(h){return arguments.length?([r,i]=h,r=+r,i=+i,d()):[r,i]},t.rangeRound=function(h){return[r,i]=h,r=+r,i=+i,a=!0,d()},t.bandwidth=function(){return s},t.step=function(){return o},t.round=function(h){return arguments.length?(a=!!h,d()):a},t.padding=function(h){return arguments.length?(l=Math.min(1,c=+h),d()):l},t.paddingInner=function(h){return arguments.length?(l=Math.min(1,h),d()):l},t.paddingOuter=function(h){return arguments.length?(c=+h,d()):c},t.align=function(h){return arguments.length?(u=Math.max(0,Math.min(1,h)),d()):u},t.copy=function(){return so(e(),[r,i]).round(a).paddingInner(l).paddingOuter(c).align(u)},Gr.apply(d(),arguments)}function yg(t,e){var s,n=0,r=(t=t.slice()).length-1,i=t[n],o=t[r];return o<i&&(s=n,n=r,r=s,s=i,i=o,o=s),t[n]=e.floor(i),t[r]=e.ceil(o),t}const Jc=new Date,eu=new Date;function qe(t,e,n,r){function i(o){return t(o=0===arguments.length?new Date:new Date(+o)),o}return i.floor=o=>(t(o=new Date(+o)),o),i.ceil=o=>(t(o=new Date(o-1)),e(o,1),t(o),o),i.round=o=>{const s=i(o),a=i.ceil(o);return o-s<a-o?s:a},i.offset=(o,s)=>(e(o=new Date(+o),null==s?1:Math.floor(s)),o),i.range=(o,s,a)=>{const l=[];if(o=i.ceil(o),a=null==a?1:Math.floor(a),!(o<s&&a>0))return l;let c;do{l.push(c=new Date(+o)),e(o,a),t(o)}while(c<o&&o<s);return l},i.filter=o=>qe(s=>{if(s>=s)for(;t(s),!o(s);)s.setTime(s-1)},(s,a)=>{if(s>=s)if(a<0)for(;++a<=0;)for(;e(s,-1),!o(s););else for(;--a>=0;)for(;e(s,1),!o(s););}),n&&(i.count=(o,s)=>(Jc.setTime(+o),eu.setTime(+s),t(Jc),t(eu),Math.floor(n(Jc,eu))),i.every=o=>(o=Math.floor(o),isFinite(o)&&o>0?o>1?i.filter(r?s=>r(s)%o==0:s=>i.count(0,s)%o==0):i:null)),i}const wa=qe(()=>{},(t,e)=>{t.setTime(+t+e)},(t,e)=>e-t);wa.every=t=>(t=Math.floor(t),isFinite(t)&&t>0?t>1?qe(e=>{e.setTime(Math.floor(e/t)*t)},(e,n)=>{e.setTime(+e+n*t)},(e,n)=>(n-e)/t):wa:null),wa.range;const En=1e3,Ht=6e4,Sn=60*Ht,On=24*Sn,tu=7*On,Cg=30*On,nu=365*On,Xr=qe(t=>{t.setTime(t-t.getMilliseconds())},(t,e)=>{t.setTime(+t+e*En)},(t,e)=>(e-t)/En,t=>t.getUTCSeconds());Xr.range;const ru=qe(t=>{t.setTime(t-t.getMilliseconds()-t.getSeconds()*En)},(t,e)=>{t.setTime(+t+e*Ht)},(t,e)=>(e-t)/Ht,t=>t.getMinutes());ru.range,qe(t=>{t.setUTCSeconds(0,0)},(t,e)=>{t.setTime(+t+e*Ht)},(t,e)=>(e-t)/Ht,t=>t.getUTCMinutes()).range;const iu=qe(t=>{t.setTime(t-t.getMilliseconds()-t.getSeconds()*En-t.getMinutes()*Ht)},(t,e)=>{t.setTime(+t+e*Sn)},(t,e)=>(e-t)/Sn,t=>t.getHours());iu.range,qe(t=>{t.setUTCMinutes(0,0,0)},(t,e)=>{t.setTime(+t+e*Sn)},(t,e)=>(e-t)/Sn,t=>t.getUTCHours()).range;const ao=qe(t=>t.setHours(0,0,0,0),(t,e)=>t.setDate(t.getDate()+e),(t,e)=>(e-t-(e.getTimezoneOffset()-t.getTimezoneOffset())*Ht)/On,t=>t.getDate()-1);ao.range;const ou=qe(t=>{t.setUTCHours(0,0,0,0)},(t,e)=>{t.setUTCDate(t.getUTCDate()+e)},(t,e)=>(e-t)/On,t=>t.getUTCDate()-1);function fr(t){return qe(e=>{e.setDate(e.getDate()-(e.getDay()+7-t)%7),e.setHours(0,0,0,0)},(e,n)=>{e.setDate(e.getDate()+7*n)},(e,n)=>(n-e-(n.getTimezoneOffset()-e.getTimezoneOffset())*Ht)/tu)}ou.range,qe(t=>{t.setUTCHours(0,0,0,0)},(t,e)=>{t.setUTCDate(t.getUTCDate()+e)},(t,e)=>(e-t)/On,t=>Math.floor(t/On)).range;const Fa=fr(0),Ma=fr(1),NF=fr(2),WF=fr(3),Zr=fr(4),VF=fr(5),PF=fr(6);function _r(t){return qe(e=>{e.setUTCDate(e.getUTCDate()-(e.getUTCDay()+7-t)%7),e.setUTCHours(0,0,0,0)},(e,n)=>{e.setUTCDate(e.getUTCDate()+7*n)},(e,n)=>(n-e)/tu)}Fa.range,Ma.range,NF.range,WF.range,Zr.range,VF.range,PF.range;const Tg=_r(0),Aa=_r(1),UF=_r(2),jF=_r(3),Qr=_r(4),$F=_r(5),GF=_r(6);Tg.range,Aa.range,UF.range,jF.range,Qr.range,$F.range,GF.range;const su=qe(t=>{t.setDate(1),t.setHours(0,0,0,0)},(t,e)=>{t.setMonth(t.getMonth()+e)},(t,e)=>e.getMonth()-t.getMonth()+12*(e.getFullYear()-t.getFullYear()),t=>t.getMonth());su.range,qe(t=>{t.setUTCDate(1),t.setUTCHours(0,0,0,0)},(t,e)=>{t.setUTCMonth(t.getUTCMonth()+e)},(t,e)=>e.getUTCMonth()-t.getUTCMonth()+12*(e.getUTCFullYear()-t.getUTCFullYear()),t=>t.getUTCMonth()).range;const wn=qe(t=>{t.setMonth(0,1),t.setHours(0,0,0,0)},(t,e)=>{t.setFullYear(t.getFullYear()+e)},(t,e)=>e.getFullYear()-t.getFullYear(),t=>t.getFullYear());wn.every=t=>isFinite(t=Math.floor(t))&&t>0?qe(e=>{e.setFullYear(Math.floor(e.getFullYear()/t)*t),e.setMonth(0,1),e.setHours(0,0,0,0)},(e,n)=>{e.setFullYear(e.getFullYear()+n*t)}):null,wn.range;const vr=qe(t=>{t.setUTCMonth(0,1),t.setUTCHours(0,0,0,0)},(t,e)=>{t.setUTCFullYear(t.getUTCFullYear()+e)},(t,e)=>e.getUTCFullYear()-t.getUTCFullYear(),t=>t.getUTCFullYear());vr.every=t=>isFinite(t=Math.floor(t))&&t>0?qe(e=>{e.setUTCFullYear(Math.floor(e.getUTCFullYear()/t)*t),e.setUTCMonth(0,1),e.setUTCHours(0,0,0,0)},(e,n)=>{e.setUTCFullYear(e.getUTCFullYear()+n*t)}):null,vr.range;const[KF,qF]=function zF(t,e,n,r,i,o){const s=[[Xr,1,En],[Xr,5,5e3],[Xr,15,15e3],[Xr,30,3e4],[o,1,Ht],[o,5,5*Ht],[o,15,15*Ht],[o,30,30*Ht],[i,1,Sn],[i,3,3*Sn],[i,6,6*Sn],[i,12,12*Sn],[r,1,On],[r,2,2*On],[n,1,tu],[e,1,Cg],[e,3,3*Cg],[t,1,nu]];function l(c,u,d){const h=Math.abs(u-c)/d,p=uc(([,,f])=>f).right(s,h);if(p===s.length)return t.every(dc(c/nu,u/nu,d));if(0===p)return wa.every(Math.max(dc(c,u,d),1));const[m,_]=s[h/s[p-1][2]<s[p][2]/h?p-1:p];return m.every(_)}return[function a(c,u,d){const h=u<c;h&&([c,u]=[u,c]);const p=d&&"function"==typeof d.range?d:l(c,u,d),m=p?p.range(c,+u+1):[];return h?m.reverse():m},l]}(wn,su,Fa,ao,iu,ru);function au(t){if(0<=t.y&&t.y<100){var e=new Date(-1,t.m,t.d,t.H,t.M,t.S,t.L);return e.setFullYear(t.y),e}return new Date(t.y,t.m,t.d,t.H,t.M,t.S,t.L)}function lu(t){if(0<=t.y&&t.y<100){var e=new Date(Date.UTC(-1,t.m,t.d,t.H,t.M,t.S,t.L));return e.setUTCFullYear(t.y),e}return new Date(Date.UTC(t.y,t.m,t.d,t.H,t.M,t.S,t.L))}function lo(t,e,n){return{y:t,m:e,d:n,H:0,M:0,S:0,L:0}}var Jr,Lg,xg={"-":"",_:" ",0:"0"},Xe=/^\s*\d+/,XF=/^%/,ZF=/[\\^$*+?|[\]().{}]/g;function ye(t,e,n){var r=t<0?"-":"",i=(r?-t:t)+"",o=i.length;return r+(o<n?new Array(n-o+1).join(e)+i:i)}function QF(t){return t.replace(ZF,"\\$&")}function co(t){return new RegExp("^(?:"+t.map(QF).join("|")+")","i")}function uo(t){return new Map(t.map((e,n)=>[e.toLowerCase(),n]))}function JF(t,e,n){var r=Xe.exec(e.slice(n,n+1));return r?(t.w=+r[0],n+r[0].length):-1}function eM(t,e,n){var r=Xe.exec(e.slice(n,n+1));return r?(t.u=+r[0],n+r[0].length):-1}function tM(t,e,n){var r=Xe.exec(e.slice(n,n+2));return r?(t.U=+r[0],n+r[0].length):-1}function nM(t,e,n){var r=Xe.exec(e.slice(n,n+2));return r?(t.V=+r[0],n+r[0].length):-1}function rM(t,e,n){var r=Xe.exec(e.slice(n,n+2));return r?(t.W=+r[0],n+r[0].length):-1}function bg(t,e,n){var r=Xe.exec(e.slice(n,n+4));return r?(t.y=+r[0],n+r[0].length):-1}function Eg(t,e,n){var r=Xe.exec(e.slice(n,n+2));return r?(t.y=+r[0]+(+r[0]>68?1900:2e3),n+r[0].length):-1}function iM(t,e,n){var r=/^(Z)|([+-]\d\d)(?::?(\d\d))?/.exec(e.slice(n,n+6));return r?(t.Z=r[1]?0:-(r[2]+(r[3]||"00")),n+r[0].length):-1}function oM(t,e,n){var r=Xe.exec(e.slice(n,n+1));return r?(t.q=3*r[0]-3,n+r[0].length):-1}function sM(t,e,n){var r=Xe.exec(e.slice(n,n+2));return r?(t.m=r[0]-1,n+r[0].length):-1}function Sg(t,e,n){var r=Xe.exec(e.slice(n,n+2));return r?(t.d=+r[0],n+r[0].length):-1}function aM(t,e,n){var r=Xe.exec(e.slice(n,n+3));return r?(t.m=0,t.d=+r[0],n+r[0].length):-1}function Og(t,e,n){var r=Xe.exec(e.slice(n,n+2));return r?(t.H=+r[0],n+r[0].length):-1}function lM(t,e,n){var r=Xe.exec(e.slice(n,n+2));return r?(t.M=+r[0],n+r[0].length):-1}function cM(t,e,n){var r=Xe.exec(e.slice(n,n+2));return r?(t.S=+r[0],n+r[0].length):-1}function uM(t,e,n){var r=Xe.exec(e.slice(n,n+3));return r?(t.L=+r[0],n+r[0].length):-1}function hM(t,e,n){var r=Xe.exec(e.slice(n,n+6));return r?(t.L=Math.floor(r[0]/1e3),n+r[0].length):-1}function dM(t,e,n){var r=XF.exec(e.slice(n,n+1));return r?n+r[0].length:-1}function pM(t,e,n){var r=Xe.exec(e.slice(n));return r?(t.Q=+r[0],n+r[0].length):-1}function mM(t,e,n){var r=Xe.exec(e.slice(n));return r?(t.s=+r[0],n+r[0].length):-1}function wg(t,e){return ye(t.getDate(),e,2)}function gM(t,e){return ye(t.getHours(),e,2)}function fM(t,e){return ye(t.getHours()%12||12,e,2)}function _M(t,e){return ye(1+ao.count(wn(t),t),e,3)}function Fg(t,e){return ye(t.getMilliseconds(),e,3)}function vM(t,e){return Fg(t,e)+"000"}function yM(t,e){return ye(t.getMonth()+1,e,2)}function CM(t,e){return ye(t.getMinutes(),e,2)}function TM(t,e){return ye(t.getSeconds(),e,2)}function xM(t){var e=t.getDay();return 0===e?7:e}function bM(t,e){return ye(Fa.count(wn(t)-1,t),e,2)}function Mg(t){var e=t.getDay();return e>=4||0===e?Zr(t):Zr.ceil(t)}function EM(t,e){return t=Mg(t),ye(Zr.count(wn(t),t)+(4===wn(t).getDay()),e,2)}function SM(t){return t.getDay()}function OM(t,e){return ye(Ma.count(wn(t)-1,t),e,2)}function wM(t,e){return ye(t.getFullYear()%100,e,2)}function FM(t,e){return ye((t=Mg(t)).getFullYear()%100,e,2)}function MM(t,e){return ye(t.getFullYear()%1e4,e,4)}function AM(t,e){var n=t.getDay();return ye((t=n>=4||0===n?Zr(t):Zr.ceil(t)).getFullYear()%1e4,e,4)}function kM(t){var e=t.getTimezoneOffset();return(e>0?"-":(e*=-1,"+"))+ye(e/60|0,"0",2)+ye(e%60,"0",2)}function Ag(t,e){return ye(t.getUTCDate(),e,2)}function BM(t,e){return ye(t.getUTCHours(),e,2)}function RM(t,e){return ye(t.getUTCHours()%12||12,e,2)}function DM(t,e){return ye(1+ou.count(vr(t),t),e,3)}function kg(t,e){return ye(t.getUTCMilliseconds(),e,3)}function HM(t,e){return kg(t,e)+"000"}function LM(t,e){return ye(t.getUTCMonth()+1,e,2)}function IM(t,e){return ye(t.getUTCMinutes(),e,2)}function NM(t,e){return ye(t.getUTCSeconds(),e,2)}function WM(t){var e=t.getUTCDay();return 0===e?7:e}function VM(t,e){return ye(Tg.count(vr(t)-1,t),e,2)}function Bg(t){var e=t.getUTCDay();return e>=4||0===e?Qr(t):Qr.ceil(t)}function PM(t,e){return t=Bg(t),ye(Qr.count(vr(t),t)+(4===vr(t).getUTCDay()),e,2)}function UM(t){return t.getUTCDay()}function jM(t,e){return ye(Aa.count(vr(t)-1,t),e,2)}function $M(t,e){return ye(t.getUTCFullYear()%100,e,2)}function GM(t,e){return ye((t=Bg(t)).getUTCFullYear()%100,e,2)}function zM(t,e){return ye(t.getUTCFullYear()%1e4,e,4)}function KM(t,e){var n=t.getUTCDay();return ye((t=n>=4||0===n?Qr(t):Qr.ceil(t)).getUTCFullYear()%1e4,e,4)}function qM(){return"+0000"}function Rg(){return"%"}function Dg(t){return+t}function Hg(t){return Math.floor(+t/1e3)}function XM(t){return new Date(t)}function ZM(t){return t instanceof Date?+t:+new Date(+t)}function Ig(t,e,n,r,i,o,s,a,l,c){var u=Vm(),d=u.invert,h=u.domain,p=c(".%L"),m=c(":%S"),_=c("%I:%M"),f=c("%I %p"),v=c("%a %d"),C=c("%b %d"),x=c("%B"),b=c("%Y");function T(S){return(l(S)<S?p:a(S)<S?m:s(S)<S?_:o(S)<S?f:r(S)<S?i(S)<S?v:C:n(S)<S?x:b)(S)}return u.invert=function(S){return new Date(d(S))},u.domain=function(S){return arguments.length?h(Array.from(S,ZM)):h().map(XM)},u.ticks=function(S){var M=h();return t(M[0],M[M.length-1],S??10)},u.tickFormat=function(S,M){return null==M?T:c(M)},u.nice=function(S){var M=h();return(!S||"function"!=typeof S.range)&&(S=e(M[0],M[M.length-1],S??10)),S?h(yg(M,S)):u},u.copy=function(){return Rc(u,Ig(t,e,n,r,i,o,s,a,l,c))},u}function Ng(){return Gr.apply(Ig(KF,qF,wn,su,Fa,ao,iu,ru,Xr,Lg).domain([new Date(2e3,0,1),new Date(2e3,0,2)]),arguments)}!function YM(t){return Jr=function YF(t){var e=t.dateTime,n=t.date,r=t.time,i=t.periods,o=t.days,s=t.shortDays,a=t.months,l=t.shortMonths,c=co(i),u=uo(i),d=co(o),h=uo(o),p=co(s),m=uo(s),_=co(a),f=uo(a),v=co(l),C=uo(l),x={a:function B($){return s[$.getDay()]},A:function R($){return o[$.getDay()]},b:function W($){return l[$.getMonth()]},B:function Z($){return a[$.getMonth()]},c:null,d:wg,e:wg,f:vM,g:FM,G:AM,H:gM,I:fM,j:_M,L:Fg,m:yM,M:CM,p:function z($){return i[+($.getHours()>=12)]},q:function G($){return 1+~~($.getMonth()/3)},Q:Dg,s:Hg,S:TM,u:xM,U:bM,V:EM,w:SM,W:OM,x:null,X:null,y:wM,Y:MM,Z:kM,"%":Rg},b={a:function Y($){return s[$.getUTCDay()]},A:function ue($){return o[$.getUTCDay()]},b:function J($){return l[$.getUTCMonth()]},B:function q($){return a[$.getUTCMonth()]},c:null,d:Ag,e:Ag,f:HM,g:GM,G:KM,H:BM,I:RM,j:DM,L:kg,m:LM,M:IM,p:function te($){return i[+($.getUTCHours()>=12)]},q:function he($){return 1+~~($.getUTCMonth()/3)},Q:Dg,s:Hg,S:NM,u:WM,U:VM,V:PM,w:UM,W:jM,x:null,X:null,y:$M,Y:zM,Z:qM,"%":Rg},T={a:function H($,K,X){var U=p.exec(K.slice(X));return U?($.w=m.get(U[0].toLowerCase()),X+U[0].length):-1},A:function F($,K,X){var U=d.exec(K.slice(X));return U?($.w=h.get(U[0].toLowerCase()),X+U[0].length):-1},b:function P($,K,X){var U=v.exec(K.slice(X));return U?($.m=C.get(U[0].toLowerCase()),X+U[0].length):-1},B:function N($,K,X){var U=_.exec(K.slice(X));return U?($.m=f.get(U[0].toLowerCase()),X+U[0].length):-1},c:function V($,K,X){return D($,e,K,X)},d:Sg,e:Sg,f:hM,g:Eg,G:bg,H:Og,I:Og,j:aM,L:uM,m:sM,M:lM,p:function k($,K,X){var U=c.exec(K.slice(X));return U?($.p=u.get(U[0].toLowerCase()),X+U[0].length):-1},q:oM,Q:pM,s:mM,S:cM,u:eM,U:tM,V:nM,w:JF,W:rM,x:function E($,K,X){return D($,n,K,X)},X:function w($,K,X){return D($,r,K,X)},y:Eg,Y:bg,Z:iM,"%":dM};function S($,K){return function(X){var Pe,ie,be,U=[],pe=-1,ae=0,Ie=$.length;for(X instanceof Date||(X=new Date(+X));++pe<Ie;)37===$.charCodeAt(pe)&&(U.push($.slice(ae,pe)),null!=(ie=xg[Pe=$.charAt(++pe)])?Pe=$.charAt(++pe):ie="e"===Pe?" ":"0",(be=K[Pe])&&(Pe=be(X,ie)),U.push(Pe),ae=pe+1);return U.push($.slice(ae,pe)),U.join("")}}function M($,K){return function(X){var ae,Ie,U=lo(1900,void 0,1);if(D(U,$,X+="",0)!=X.length)return null;if("Q"in U)return new Date(U.Q);if("s"in U)return new Date(1e3*U.s+("L"in U?U.L:0));if(K&&!("Z"in U)&&(U.Z=0),"p"in U&&(U.H=U.H%12+12*U.p),void 0===U.m&&(U.m="q"in U?U.q:0),"V"in U){if(U.V<1||U.V>53)return null;"w"in U||(U.w=1),"Z"in U?(Ie=(ae=lu(lo(U.y,0,1))).getUTCDay(),ae=Ie>4||0===Ie?Aa.ceil(ae):Aa(ae),ae=ou.offset(ae,7*(U.V-1)),U.y=ae.getUTCFullYear(),U.m=ae.getUTCMonth(),U.d=ae.getUTCDate()+(U.w+6)%7):(Ie=(ae=au(lo(U.y,0,1))).getDay(),ae=Ie>4||0===Ie?Ma.ceil(ae):Ma(ae),ae=ao.offset(ae,7*(U.V-1)),U.y=ae.getFullYear(),U.m=ae.getMonth(),U.d=ae.getDate()+(U.w+6)%7)}else("W"in U||"U"in U)&&("w"in U||(U.w="u"in U?U.u%7:"W"in U?1:0),Ie="Z"in U?lu(lo(U.y,0,1)).getUTCDay():au(lo(U.y,0,1)).getDay(),U.m=0,U.d="W"in U?(U.w+6)%7+7*U.W-(Ie+5)%7:U.w+7*U.U-(Ie+6)%7);return"Z"in U?(U.H+=U.Z/100|0,U.M+=U.Z%100,lu(U)):au(U)}}function D($,K,X,U){for(var Pe,ie,pe=0,ae=K.length,Ie=X.length;pe<ae;){if(U>=Ie)return-1;if(37===(Pe=K.charCodeAt(pe++))){if(Pe=K.charAt(pe++),!(ie=T[Pe in xg?K.charAt(pe++):Pe])||(U=ie($,X,U))<0)return-1}else if(Pe!=X.charCodeAt(U++))return-1}return U}return x.x=S(n,x),x.X=S(r,x),x.c=S(e,x),b.x=S(n,b),b.X=S(r,b),b.c=S(e,b),{format:function($){var K=S($+="",x);return K.toString=function(){return $},K},parse:function($){var K=M($+="",!1);return K.toString=function(){return $},K},utcFormat:function($){var K=S($+="",b);return K.toString=function(){return $},K},utcParse:function($){var K=M($+="",!0);return K.toString=function(){return $},K}}}(t),Lg=Jr.format,Jr.parse,Jr.utcFormat,Jr.utcParse,Jr}({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});const Wg=Math.abs,tt=Math.atan2,yr=Math.cos,QM=Math.max,cu=Math.min,cn=Math.sin,ei=Math.sqrt,nt=1e-12,ho=Math.PI,ka=ho/2,Ba=2*ho;function Vg(t){return t>=1?ka:t<=-1?-ka:Math.asin(t)}function Pg(t){this._context=t}function Ra(t){return new Pg(t)}function Gn(){}function Ug(t){this._context=t}function jg(t){return new Ug(t)}Pg.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;default:this._context.lineTo(t,e)}}},Ug.prototype={areaStart:Gn,areaEnd:Gn,lineStart:function(){this._point=0},lineEnd:function(){this._point&&this._context.closePath()},point:function(t,e){t=+t,e=+e,this._point?this._context.lineTo(t,e):(this._point=1,this._context.moveTo(t,e))}};const t2=(()=>{let t=0;return()=>(t+=1,`u${`0000${(Math.random()*36**4|0).toString(36)}`.slice(-4)}${t}`)})();function Fn(t){const e=[];for(let n=0,r=t.length;n<r;n++)e.push(t[n]);return e}function Da(t,e){const n=(t.ownerDocument.defaultView||window).getComputedStyle(t).getPropertyValue(e);return n?parseFloat(n.replace("px","")):0}function $g(t,e={}){const n=e.width||function n2(t){const e=Da(t,"border-left-width"),n=Da(t,"border-right-width");return t.clientWidth+e+n}(t),r=e.height||function r2(t){const e=Da(t,"border-top-width"),n=Da(t,"border-bottom-width");return t.clientHeight+e+n}(t);return{width:n,height:r}}const Et=16384;function Ha(t){return new Promise((e,n)=>{const r=new Image;r.decode=()=>e(r),r.onload=()=>e(r),r.onerror=n,r.crossOrigin="anonymous",r.decoding="async",r.src=t})}function uu(){return uu=(0,Se.A)(function*(t){return Promise.resolve().then(()=>(new XMLSerializer).serializeToString(t)).then(encodeURIComponent).then(e=>`data:image/svg+xml;charset=utf-8,${e}`)}),uu.apply(this,arguments)}function hu(){return hu=(0,Se.A)(function*(t,e,n){const r="http://www.w3.org/2000/svg",i=document.createElementNS(r,"svg"),o=document.createElementNS(r,"foreignObject");return i.setAttribute("width",`${e}`),i.setAttribute("height",`${n}`),i.setAttribute("viewBox",`0 0 ${e} ${n}`),o.setAttribute("width","100%"),o.setAttribute("height","100%"),o.setAttribute("x","0"),o.setAttribute("y","0"),o.setAttribute("externalResourcesRequired","true"),i.appendChild(o),o.appendChild(t),function s2(t){return uu.apply(this,arguments)}(i)}),hu.apply(this,arguments)}const ft=(t,e)=>{if(t instanceof e)return!0;const n=Object.getPrototypeOf(t);return null!==n&&(n.constructor.name===e.name||ft(n,e))};function u2(t,e,n){const r=`.${t}:${e}`,i=n.cssText?function l2(t){const e=t.getPropertyValue("content");return`${t.cssText} content: '${e.replace(/'|"/g,"")}';`}(n):function c2(t){return Fn(t).map(e=>`${e}: ${t.getPropertyValue(e)}${t.getPropertyPriority(e)?" !important":""};`).join(" ")}(n);return document.createTextNode(`${r}{${i}}`)}function Gg(t,e,n){const r=window.getComputedStyle(t,n),i=r.getPropertyValue("content");if(""===i||"none"===i)return;const o=t2();try{e.className=`${e.className} ${o}`}catch{return}const s=document.createElement("style");s.appendChild(u2(o,n,r)),e.appendChild(s)}const zg="application/font-woff",Kg="image/jpeg",d2={woff:zg,woff2:zg,ttf:"application/font-truetype",eot:"application/vnd.ms-fontobject",png:"image/png",jpg:Kg,jpeg:Kg,gif:"image/gif",tiff:"image/tiff",svg:"image/svg+xml",webp:"image/webp"};function du(t){const e=function p2(t){const e=/\.([^./]*?)$/g.exec(t);return e?e[1]:""}(t).toLowerCase();return d2[e]||""}function pu(t){return-1!==t.search(/^(data:)/)}function qg(t,e,n){return mu.apply(this,arguments)}function mu(){return mu=(0,Se.A)(function*(t,e,n){const r=yield fetch(t,e);if(404===r.status)throw new Error(`Resource "${r.url}" not found`);const i=yield r.blob();return new Promise((o,s)=>{const a=new FileReader;a.onerror=s,a.onloadend=()=>{try{o(n({res:r,result:a.result}))}catch(l){s(l)}},a.readAsDataURL(i)})}),mu.apply(this,arguments)}const gu={};function fu(t,e,n){return _u.apply(this,arguments)}function _u(){return _u=(0,Se.A)(function*(t,e,n){const r=function f2(t,e,n){let r=t.replace(/\?.*/,"");return n&&(r=t),/ttf|otf|eot|woff2?/i.test(r)&&(r=r.replace(/.*\//,"")),e?`[${e}]${r}`:r}(t,e,n.includeQueryParams);if(null!=gu[r])return gu[r];let i;n.cacheBust&&(t+=(/\?/.test(t)?"&":"?")+(new Date).getTime());try{const o=yield qg(t,n.fetchRequestInit,({res:s,result:a})=>(e||(e=s.headers.get("Content-Type")||""),function m2(t){return t.split(/,/)[1]}(a)));i=function g2(t,e){return`data:${e};base64,${t}`}(o,e)}catch(o){i=n.imagePlaceholder||"";let s=`Failed to fetch resource: ${t}`;o&&(s="string"==typeof o?o:o.message),s&&console.warn(s)}return gu[r]=i,i}),_u.apply(this,arguments)}function vu(){return vu=(0,Se.A)(function*(t){const e=t.toDataURL();return"data:,"===e?t.cloneNode(!1):Ha(e)}),vu.apply(this,arguments)}function yu(){return yu=(0,Se.A)(function*(t,e){if(t.currentSrc){const o=document.createElement("canvas"),s=o.getContext("2d");o.width=t.clientWidth,o.height=t.clientHeight,s?.drawImage(t,0,0,o.width,o.height);return Ha(o.toDataURL())}const n=t.poster,r=du(n);return Ha(yield fu(n,r,e))}),yu.apply(this,arguments)}function Cu(){return Cu=(0,Se.A)(function*(t){var e;try{if(null!==(e=t?.contentDocument)&&void 0!==e&&e.body)return yield La(t.contentDocument.body,{},!0)}catch{}return t.cloneNode(!1)}),Cu.apply(this,arguments)}function Tu(){return Tu=(0,Se.A)(function*(t,e){return ft(t,HTMLCanvasElement)?function _2(t){return vu.apply(this,arguments)}(t):ft(t,HTMLVideoElement)?function v2(t,e){return yu.apply(this,arguments)}(t,e):ft(t,HTMLIFrameElement)?function y2(t){return Cu.apply(this,arguments)}(t):t.cloneNode(!1)}),Tu.apply(this,arguments)}const T2=t=>null!=t.tagName&&"SLOT"===t.tagName.toUpperCase();function xu(){return xu=(0,Se.A)(function*(t,e,n){var r,i;let o=[];return o=T2(t)&&t.assignedNodes?Fn(t.assignedNodes()):ft(t,HTMLIFrameElement)&&null!==(r=t.contentDocument)&&void 0!==r&&r.body?Fn(t.contentDocument.body.childNodes):Fn((null!==(i=t.shadowRoot)&&void 0!==i?i:t).childNodes),0===o.length||ft(t,HTMLVideoElement)||(yield o.reduce((s,a)=>s.then(()=>La(a,n)).then(l=>{l&&e.appendChild(l)}),Promise.resolve())),e}),xu.apply(this,arguments)}function O2(t,e){return ft(e,Element)&&(function b2(t,e){const n=e.style;if(!n)return;const r=window.getComputedStyle(t);r.cssText?(n.cssText=r.cssText,n.transformOrigin=r.transformOrigin):Fn(r).forEach(i=>{let o=r.getPropertyValue(i);"font-size"===i&&o.endsWith("px")&&(o=Math.floor(parseFloat(o.substring(0,o.length-2)))-.1+"px"),ft(t,HTMLIFrameElement)&&"display"===i&&"inline"===o&&(o="block"),"d"===i&&e.getAttribute("d")&&(o=`path(${e.getAttribute("d")})`),n.setProperty(i,o,r.getPropertyPriority(i))})}(t,e),function h2(t,e){Gg(t,e,":before"),Gg(t,e,":after")}(t,e),function E2(t,e){ft(t,HTMLTextAreaElement)&&(e.innerHTML=t.value),ft(t,HTMLInputElement)&&e.setAttribute("value",t.value)}(t,e),function S2(t,e){if(ft(t,HTMLSelectElement)){const n=e,r=Array.from(n.children).find(i=>t.value===i.getAttribute("value"));r&&r.setAttribute("selected","")}}(t,e)),e}function bu(){return bu=(0,Se.A)(function*(t,e){const n=t.querySelectorAll?t.querySelectorAll("use"):[];if(0===n.length)return t;const r={};for(let o=0;o<n.length;o++){const s=n[o].getAttribute("xlink:href");if(s){const a=t.querySelector(s),l=document.querySelector(s);!a&&l&&!r[s]&&(r[s]=yield La(l,e,!0))}}const i=Object.values(r);if(i.length){const o="http://www.w3.org/1999/xhtml",s=document.createElementNS(o,"svg");s.setAttribute("xmlns",o),s.style.position="absolute",s.style.width="0",s.style.height="0",s.style.overflow="hidden",s.style.display="none";const a=document.createElementNS(o,"defs");s.appendChild(a);for(let l=0;l<i.length;l++)a.appendChild(i[l]);t.appendChild(s)}return t}),bu.apply(this,arguments)}function La(t,e,n){return Eu.apply(this,arguments)}function Eu(){return Eu=(0,Se.A)(function*(t,e,n){return n||!e.filter||e.filter(t)?Promise.resolve(t).then(r=>function C2(t,e){return Tu.apply(this,arguments)}(r,e)).then(r=>function x2(t,e,n){return xu.apply(this,arguments)}(t,r,e)).then(r=>O2(t,r)).then(r=>function w2(t,e){return bu.apply(this,arguments)}(r,e)):null}),Eu.apply(this,arguments)}const Yg=/url\((['"]?)([^'"]+?)\1\)/g,F2=/url\([^)]+\)\s*format\((["']?)([^"']+)\1\)/g,M2=/src:\s*(?:url\([^)]+\)\s*format\([^)]+\)[,;]\s*)+/g;function Su(){return Su=(0,Se.A)(function*(t,e,n,r,i){try{const o=n?function e2(t,e){if(t.match(/^[a-z]+:\/\//i))return t;if(t.match(/^\/\//))return window.location.protocol+t;if(t.match(/^[a-z]+:/i))return t;const n=document.implementation.createHTMLDocument(),r=n.createElement("base"),i=n.createElement("a");return n.head.appendChild(r),n.body.appendChild(i),e&&(r.href=e),i.href=t,i.href}(e,n):e,s=du(e);let a;return i||(a=yield fu(o,s,r)),t.replace(function A2(t){const e=t.replace(/([.*+?^${}()|\[\]\/\\])/g,"\\$1");return new RegExp(`(url\\(['"]?)(${e})(['"]?\\))`,"g")}(e),`$1${a}$3`)}catch{}return t}),Su.apply(this,arguments)}function Xg(t){return-1!==t.search(Yg)}function Zg(t,e,n){return Ou.apply(this,arguments)}function Ou(){return Ou=(0,Se.A)(function*(t,e,n){if(!Xg(t))return t;const r=function R2(t,{preferredFontFormat:e}){return e?t.replace(M2,n=>{for(;;){const[r,,i]=F2.exec(n)||[];if(!i)return"";if(i===e)return`src: ${r};`}}):t}(t,n);return function k2(t){const e=[];return t.replace(Yg,(n,r,i)=>(e.push(i),n)),e.filter(n=>!pu(n))}(r).reduce((i,o)=>i.then(s=>function B2(t,e,n,r,i){return Su.apply(this,arguments)}(s,o,e,n)),Promise.resolve(r))}),Ou.apply(this,arguments)}function Ia(t,e,n){return wu.apply(this,arguments)}function wu(){return wu=(0,Se.A)(function*(t,e,n){var r;const i=null===(r=e.style)||void 0===r?void 0:r.getPropertyValue(t);if(i){const o=yield Zg(i,null,n);return e.style.setProperty(t,o,e.style.getPropertyPriority(t)),!0}return!1}),wu.apply(this,arguments)}function Fu(){return Fu=(0,Se.A)(function*(t,e){(yield Ia("background",t,e))||(yield Ia("background-image",t,e)),(yield Ia("mask",t,e))||(yield Ia("mask-image",t,e))}),Fu.apply(this,arguments)}function Mu(){return Mu=(0,Se.A)(function*(t,e){const n=ft(t,HTMLImageElement);if((!n||pu(t.src))&&(!ft(t,SVGImageElement)||pu(t.href.baseVal)))return;const r=n?t.src:t.href.baseVal,i=yield fu(r,du(r),e);yield new Promise((o,s)=>{t.onload=o,t.onerror=s;const a=t;a.decode&&(a.decode=o),"lazy"===a.loading&&(a.loading="eager"),n?(t.srcset="",t.src=i):t.href.baseVal=i})}),Mu.apply(this,arguments)}function Au(){return Au=(0,Se.A)(function*(t,e){const n=Fn(t.childNodes).map(r=>Qg(r,e));yield Promise.all(n).then(()=>t)}),Au.apply(this,arguments)}function Qg(t,e){return ku.apply(this,arguments)}function ku(){return ku=(0,Se.A)(function*(t,e){ft(t,Element)&&(yield function D2(t,e){return Fu.apply(this,arguments)}(t,e),yield function H2(t,e){return Mu.apply(this,arguments)}(t,e),yield function L2(t,e){return Au.apply(this,arguments)}(t,e))}),ku.apply(this,arguments)}const Jg={};function ef(t){return Bu.apply(this,arguments)}function Bu(){return Bu=(0,Se.A)(function*(t){let e=Jg[t];if(null!=e)return e;return e={url:t,cssText:yield(yield fetch(t)).text()},Jg[t]=e,e}),Bu.apply(this,arguments)}function tf(t,e){return Ru.apply(this,arguments)}function Ru(){return Ru=(0,Se.A)(function*(t,e){let n=t.cssText;const r=/url\(["']?([^"')]+)["']?\)/g,i=(n.match(/url\([^)]+\)/g)||[]).map(function(){var o=(0,Se.A)(function*(s){let a=s.replace(r,"$1");return a.startsWith("https://")||(a=new URL(a,t.url).href),qg(a,e.fetchRequestInit,({result:l})=>(n=n.replace(s,`url(${l})`),[s,l]))});return function(s){return o.apply(this,arguments)}}());return Promise.all(i).then(()=>n)}),Ru.apply(this,arguments)}function nf(t){if(null==t)return[];const e=[];let r=t.replace(/(\/\*[\s\S]*?\*\/)/gi,"");const i=new RegExp("((@.*?keyframes [\\s\\S]*?){([\\s\\S]*?}\\s*?)})","gi");for(;;){const l=i.exec(r);if(null===l)break;e.push(l[0])}r=r.replace(i,"");const o=/@import[\s\S]*?url\([^)]*\)[\s\S]*?;/gi,a=new RegExp("((\\s*?(?:\\/\\*[\\s\\S]*?\\*\\/)?\\s*?@media[\\s\\S]*?){([\\s\\S]*?)}\\s*?})|(([\\s\\S]*?){([\\s\\S]*?)})","gi");for(;;){let l=o.exec(r);if(null===l){if(l=a.exec(r),null===l)break;o.lastIndex=a.lastIndex}else a.lastIndex=o.lastIndex;e.push(l[0])}return e}function Du(){return Du=(0,Se.A)(function*(t,e){const n=[],r=[];return t.forEach(i=>{if("cssRules"in i)try{Fn(i.cssRules||[]).forEach((o,s)=>{if(o.type===CSSRule.IMPORT_RULE){let a=s+1;const c=ef(o.href).then(u=>tf(u,e)).then(u=>nf(u).forEach(d=>{try{i.insertRule(d,d.startsWith("@import")?a+=1:i.cssRules.length)}catch(h){console.error("Error inserting rule from remote css",{rule:d,error:h})}})).catch(u=>{console.error("Error loading remote css",u.toString())});r.push(c)}})}catch(o){const s=t.find(a=>null==a.href)||document.styleSheets[0];null!=i.href&&r.push(ef(i.href).then(a=>tf(a,e)).then(a=>nf(a).forEach(l=>{s.insertRule(l,i.cssRules.length)})).catch(a=>{console.error("Error loading remote stylesheet",a)})),console.error("Error inlining remote css file",o)}}),Promise.all(r).then(()=>(t.forEach(i=>{if("cssRules"in i)try{Fn(i.cssRules||[]).forEach(o=>{n.push(o)})}catch(o){console.error(`Error while reading CSS rules from ${i.href}`,o)}}),n))}),Du.apply(this,arguments)}function Hu(){return Hu=(0,Se.A)(function*(t,e){if(null==t.ownerDocument)throw new Error("Provided element is not within a Document");const n=Fn(t.ownerDocument.styleSheets),r=yield function N2(t,e){return Du.apply(this,arguments)}(n,e);return function W2(t){return t.filter(e=>e.type===CSSRule.FONT_FACE_RULE).filter(e=>Xg(e.style.getPropertyValue("src")))}(r)}),Hu.apply(this,arguments)}function Lu(){return Lu=(0,Se.A)(function*(t,e){const n=yield function V2(t,e){return Hu.apply(this,arguments)}(t,e);return(yield Promise.all(n.map(r=>{const i=r.parentStyleSheet?r.parentStyleSheet.href:null;return Zg(r.cssText,i,e)}))).join("\n")}),Lu.apply(this,arguments)}function Iu(){return Iu=(0,Se.A)(function*(t,e){const n=null!=e.fontEmbedCSS?e.fontEmbedCSS:e.skipFonts?null:yield function P2(t,e){return Lu.apply(this,arguments)}(t,e);if(n){const r=document.createElement("style"),i=document.createTextNode(n);r.appendChild(i),t.firstChild?t.insertBefore(r,t.firstChild):t.appendChild(r)}}),Iu.apply(this,arguments)}function Nu(){return Nu=(0,Se.A)(function*(t,e={}){const{width:n,height:r}=$g(t,e),i=yield La(t,e,!0);return yield function U2(t,e){return Iu.apply(this,arguments)}(i,e),yield Qg(i,e),function I2(t,e){const{style:n}=t;e.backgroundColor&&(n.backgroundColor=e.backgroundColor),e.width&&(n.width=`${e.width}px`),e.height&&(n.height=`${e.height}px`);const r=e.style;return null!=r&&Object.keys(r).forEach(i=>{n[i]=r[i]}),t}(i,e),yield function a2(t,e,n){return hu.apply(this,arguments)}(i,n,r)}),Nu.apply(this,arguments)}function rf(t){return Wu.apply(this,arguments)}function Wu(){return Wu=(0,Se.A)(function*(t,e={}){const{width:n,height:r}=$g(t,e),i=yield function j2(t){return Nu.apply(this,arguments)}(t,e),o=yield Ha(i),s=document.createElement("canvas"),a=s.getContext("2d"),l=e.pixelRatio||function i2(){let t,e;try{e=process}catch{}const n=e&&e.env?e.env.devicePixelRatio:null;return n&&(t=parseInt(n,10),Number.isNaN(t)&&(t=1)),t||window.devicePixelRatio||1}(),c=e.canvasWidth||n,u=e.canvasHeight||r;return s.width=c*l,s.height=u*l,e.skipAutoScale||function o2(t){(t.width>Et||t.height>Et)&&(t.width>Et&&t.height>Et?t.width>t.height?(t.height*=Et/t.width,t.width=Et):(t.width*=Et/t.height,t.height=Et):t.width>Et?(t.height*=Et/t.width,t.width=Et):(t.width*=Et/t.height,t.height=Et))}(s),s.style.width=`${c}`,s.style.height=`${u}`,e.backgroundColor&&(a.fillStyle=e.backgroundColor,a.fillRect(0,0,s.width,s.height)),a.drawImage(o,0,0,s.width,s.height),s}),Wu.apply(this,arguments)}function Vu(){return Vu=(0,Se.A)(function*(t,e={}){return(yield rf(t,e)).toDataURL()}),Vu.apply(this,arguments)}function Pu(){return Pu=(0,Se.A)(function*(t,e={}){return(yield rf(t,e)).toDataURL("image/jpeg",e.quality||1)}),Pu.apply(this,arguments)}class Mn{constructor(e,n){this.model=e,this.services=n,this.init()}init(){}update(){}setModel(e){this.model=e}setServices(e){this.services=e}}class I extends Mn{constructor(e,n){super(e,n)}static getHTMLElementSize(e){return{width:e.clientWidth,height:e.clientHeight}}static getSVGElementSize(e,n={useAttrs:!1,useClientDimensions:!1,useBBox:!1,useBoundingRect:!1}){e.attr||(e=L(e));const r={width:0,height:0},i=h=>{h&&Object.keys(r).forEach(p=>{if(h[p]){const m=h[p],_=parseFloat(m);m&&_>r[p]&&-1===(""+m).indexOf("%")&&(r[p]=_)}})},o={width:e.attr("width"),height:e.attr("height")},s=e.node();let a,l,c,u,d;try{"function"==typeof s.getBBox&&(a=s.getBBox(),l={width:a.width,height:a.height})}catch(h){console.error(h)}try{"function"==typeof s?.getBoundingClientRect&&(c=s.getBoundingClientRect(),u={width:c.width,height:c.height})}catch(h){console.error(h)}if(s instanceof SVGSVGElement&&(d={width:s.clientWidth,height:s.clientHeight}),n){if(n.useAttrs&&(i(o),r.width>0&&r.height>0))return r;if(n.useClientDimensions&&(i(d),r.width>0&&r.height>0))return d;if(n.useBBox&&(i(l),r.width>0&&r.height>0))return l;if(n.useBoundingRect&&(i(u),r.width>0&&r.height>0))return u}try{i({width:y(e.node(),"width","baseVal","value"),height:y(e.node(),"height","baseVal","value")})}catch{i(d),i(l),i(o)}return r}static appendOrSelect(e,n){const r=e.select(`${n}`);if(r.empty()){let o,s,i=n.split("#");return 2===i.length?(o=i[0],i=i[1].split("."),s=i[0]):(i=n.split("."),o=i[0]),e.append(o).attr("id",s).attr("class",i.slice(1).join(" "))}return r}init(){this.initializeID(),this.styleHolderElement(),this.addMainContainer(),this.model.getOptions().resizable&&this.addResizeListener(),this.addHolderListeners(),this.handleFullscreenChange()}getChartID(){return this.chartID}getElementOffset(e,n=!1){const r={left:0,top:0},i=e.getBoundingClientRect(),o=n?{left:0,top:0}:this.getHolder().getBoundingClientRect();try{r.left=i.left-o.left,r.top=i.top-o.top}catch(s){console.error(s)}return r}generateElementIDString(e){return`chart-${this.chartID}-${e}`}initializeID(){this.chartID=Math.floor(281474976710656*(1+Math.random())).toString(16)}addMainContainer(){const e=this.model.getOptions(),n=y(e,"style","prefix"),r=L(this.getHolder()).append("div").classed(`${st}--${n}--chart-wrapper`,!0).attr("id",`chart-${this.getChartID()}`).style("height","100%").style("width","100%");r.append("g").attr("class","DONT_STYLE_ME_css_styles_verifier"),this.mainContainer=r.node()}update(){this.styleHolderElement()}styleHolderElement(){const e=this.getHolder(),{width:n,height:r,theme:i}=this.model.getOptions();n!==this.width&&(e.style.width=n,this.width=n),r!==this.height&&(e.style.height=r,this.height=r),L(this.getHolder()).classed(`${st}--chart-holder`,!0).attr("data-carbon-theme",i)}getHolder(){return this.model.get("holder")}exportToJPG(){const e=this,n=this.model.getOptions(),i=L(this.getHolder());i.classed("filled",!0),function G2(t){return Pu.apply(this,arguments)}(this.getMainContainer(),{quality:1,filter:o=>!(o.classList&&o.classList.contains("cds--cc--toolbar"))}).then(function(o){var s;let a="myChart";const l=y(n,"fileDownload","fileName");"function"==typeof l?a=l("jpg"):"string"==typeof l&&(a=l),null==(s=e.services.files)||s.downloadImage(o,`${a}.jpg`),i.classed("filled",!1)})}exportToPNG(){const e=this,n=this.model.getOptions(),i=L(this.getHolder());i.classed("filled",!0),function $2(t){return Vu.apply(this,arguments)}(this.getMainContainer(),{quality:1,filter:o=>!(o.classList&&o.classList.contains("cds--cc--toolbar"))}).then(function(o){var s;let a="myChart";const l=y(n,"fileDownload","fileName");"function"==typeof l?a=l("png"):"string"==typeof l&&(a=l),null==(s=e.services.files)||s.downloadImage(o,`${a}.png`),i.classed("filled",!1)}).catch(function(o){console.error("oops, something went wrong!",o)})}isFullScreenMode(){return L(this.getHolder()).classed("fullscreen")}toggleFullscreen(){const e=this.getHolder();L(e).classed("fullscreen")&&(document.fullscreenElement||document.webkitFullscreenElement||document.mozFullScreenElement||document.msFullscreenElement)?document.exitFullscreen?document.exitFullscreen():document.webkitExitFullscreen?document.webkitExitFullscreen():document.mozCancelFullScreen?document.mozCancelFullScreen():document.msExitFullscreen&&document.msExitFullscreen():e.requestFullscreen?e.requestFullscreen():e.webkitRequestFullscreen?e.webkitRequestFullscreen():e.mozRequestFullScreen?e.mozRequestFullScreen():e.msRequestFullscreen&&e.msRequestFullscreen()}handleFullscreenChange(){document.addEventListener("fullscreenchange",()=>{const e=L(this.getHolder()),n=e.classed("fullscreen");e.classed("fullscreen",!n)})}setSVGMaxHeight(){if(!this.model.getOptions().height){const{height:e}=I.getSVGElementSize(L(this.mainContainer),{useBBox:!0}),n=L(this.mainContainer).attr("class"),r=L(this.mainContainer).selectAll(`.${n} > svg`);let i=0;r.nodes().forEach(function(o){i+=Number(I.getSVGElementSize(L(o),{useBBox:!0}).height)}),i<=e?L(this.mainContainer).attr("height",i):L(this.mainContainer).attr("height","100%")}}getMainContainer(){return this.mainContainer}addHolderListeners(){const e=this.getHolder();e&&L(e).on("mouseover",()=>{var n;null==(n=this.services.events)||n.dispatchEvent(O.Chart.MOUSEOVER)}).on("mouseout",()=>{var n;null==(n=this.services.events)||n.dispatchEvent(O.Chart.MOUSEOUT)})}addResizeListener(){const e=this.getHolder();if(!e)return;let n=e.clientWidth,r=e.clientHeight;const i=Oa(()=>{var o;e&&(Math.abs(n-e.clientWidth)>1||Math.abs(r-e.clientHeight)>1)&&(n=e.clientWidth,r=e.clientHeight,null==(o=this.services.events)||o.dispatchEvent(O.Chart.RESIZE))},12.5);new ResizeObserver(i).observe(e)}}class po extends Mn{static appendOrUpdateLinearGradient(e){let n=e.svg.select(`defs linearGradient#${e.id}`);n.empty()&&(n=e.svg.append("defs").append("linearGradient").attr("id",e.id).attr("x1",e.x1).attr("x2",e.x2).attr("y1",e.y1).attr("y2",e.y2)),n.selectAll("stop").remove(),n.selectAll("stop").data(e.stops).enter().append("stop").attr("offset",r=>r.offset).style("stop-color",r=>r.color).style("stop-opacity",r=>r.opacity)}static getOffsetRatio(e){return(100*Math.abs(e[1])/Math.abs(e[0]-e[1])).toFixed(2)+"%"}static getStops(e,n){let i=[{offset:"0%",color:n,opacity:"0.6"},{offset:"80%",color:n,opacity:"0"}];return e[0]<0&&e[1]>0&&(i=[{offset:"0%",color:n,opacity:"0.6"},{offset:po.getOffsetRatio(e),color:n,opacity:"0"},{offset:"100%",color:n,opacity:"0.6"}]),i}}function of(t){const e=function K2(t,e){return(t%e+e)%e}(sf(t),360);return zn(e,[0,10])||zn(e,[350,0])?{textAnchor:Vt.START,dominantBaseline:Pt.MIDDLE}:zn(e,[10,80])?{textAnchor:Vt.START,dominantBaseline:Pt.HANGING}:zn(e,[80,100])?{textAnchor:Vt.MIDDLE,dominantBaseline:Pt.HANGING}:zn(e,[100,170])?{textAnchor:Vt.END,dominantBaseline:Pt.HANGING}:zn(e,[170,190])?{textAnchor:Vt.END,dominantBaseline:Pt.MIDDLE}:zn(e,[190,260])?{textAnchor:Vt.END,dominantBaseline:Pt.BASELINE}:zn(e,[260,280])?{textAnchor:Vt.MIDDLE,dominantBaseline:Pt.BASELINE}:{textAnchor:Vt.START,dominantBaseline:Pt.BASELINE}}function zn(t,[e,n]){return t>=e&&t<=n}function sf(t){return t*(180/Math.PI)}function We(t,e,n={x:0,y:0}){const r=e*Math.cos(t)+n.x,i=e*Math.sin(t)+n.y;return{x:isNaN(r)?0:r,y:isNaN(i)?0:i}}var Q2=function X2(t){return function(e){return t?.[e]}}({\u00c0:"A",\u00c1:"A",\u00c2:"A",\u00c3:"A",\u00c4:"A",\u00c5:"A",\u00e0:"a",\u00e1:"a",\u00e2:"a",\u00e3:"a",\u00e4:"a",\u00e5:"a",\u00c7:"C",\u00e7:"c",\u00d0:"D",\u00f0:"d",\u00c8:"E",\u00c9:"E",\u00ca:"E",\u00cb:"E",\u00e8:"e",\u00e9:"e",\u00ea:"e",\u00eb:"e",\u00cc:"I",\u00cd:"I",\u00ce:"I",\u00cf:"I",\u00ec:"i",\u00ed:"i",\u00ee:"i",\u00ef:"i",\u00d1:"N",\u00f1:"n",\u00d2:"O",\u00d3:"O",\u00d4:"O",\u00d5:"O",\u00d6:"O",\u00d8:"O",\u00f2:"o",\u00f3:"o",\u00f4:"o",\u00f5:"o",\u00f6:"o",\u00f8:"o",\u00d9:"U",\u00da:"U",\u00db:"U",\u00dc:"U",\u00f9:"u",\u00fa:"u",\u00fb:"u",\u00fc:"u",\u00dd:"Y",\u00fd:"y",\u00ff:"y",\u00c6:"Ae",\u00e6:"ae",\u00de:"Th",\u00fe:"th",\u00df:"ss",\u0100:"A",\u0102:"A",\u0104:"A",\u0101:"a",\u0103:"a",\u0105:"a",\u0106:"C",\u0108:"C",\u010a:"C",\u010c:"C",\u0107:"c",\u0109:"c",\u010b:"c",\u010d:"c",\u010e:"D",\u0110:"D",\u010f:"d",\u0111:"d",\u0112:"E",\u0114:"E",\u0116:"E",\u0118:"E",\u011a:"E",\u0113:"e",\u0115:"e",\u0117:"e",\u0119:"e",\u011b:"e",\u011c:"G",\u011e:"G",\u0120:"G",\u0122:"G",\u011d:"g",\u011f:"g",\u0121:"g",\u0123:"g",\u0124:"H",\u0126:"H",\u0125:"h",\u0127:"h",\u0128:"I",\u012a:"I",\u012c:"I",\u012e:"I",\u0130:"I",\u0129:"i",\u012b:"i",\u012d:"i",\u012f:"i",\u0131:"i",\u0134:"J",\u0135:"j",\u0136:"K",\u0137:"k",\u0138:"k",\u0139:"L",\u013b:"L",\u013d:"L",\u013f:"L",\u0141:"L",\u013a:"l",\u013c:"l",\u013e:"l",\u0140:"l",\u0142:"l",\u0143:"N",\u0145:"N",\u0147:"N",\u014a:"N",\u0144:"n",\u0146:"n",\u0148:"n",\u014b:"n",\u014c:"O",\u014e:"O",\u0150:"O",\u014d:"o",\u014f:"o",\u0151:"o",\u0154:"R",\u0156:"R",\u0158:"R",\u0155:"r",\u0157:"r",\u0159:"r",\u015a:"S",\u015c:"S",\u015e:"S",\u0160:"S",\u015b:"s",\u015d:"s",\u015f:"s",\u0161:"s",\u0162:"T",\u0164:"T",\u0166:"T",\u0163:"t",\u0165:"t",\u0167:"t",\u0168:"U",\u016a:"U",\u016c:"U",\u016e:"U",\u0170:"U",\u0172:"U",\u0169:"u",\u016b:"u",\u016d:"u",\u016f:"u",\u0171:"u",\u0173:"u",\u0174:"W",\u0175:"w",\u0176:"Y",\u0177:"y",\u0178:"Y",\u0179:"Z",\u017b:"Z",\u017d:"Z",\u017a:"z",\u017c:"z",\u017e:"z",\u0132:"IJ",\u0133:"ij",\u0152:"Oe",\u0153:"oe",\u0149:"'n",\u017f:"s"}),J2=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,oA=RegExp("[\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff]","g");var aA=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g;var cA=/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/;var af="\\ud800-\\udfff",lf="\\u2700-\\u27bf",cf="a-z\\xdf-\\xf6\\xf8-\\xff",uf="A-Z\\xc0-\\xd6\\xd8-\\xde",hf="\\xac\\xb1\\xd7\\xf7\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf\\u2000-\\u206f \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",pf="["+hf+"]",mf="\\d+",TA="["+lf+"]",gf="["+cf+"]",ff="[^"+af+hf+mf+lf+cf+uf+"]",_f="(?:\\ud83c[\\udde6-\\uddff]){2}",vf="[\\ud800-\\udbff][\\udc00-\\udfff]",ti="["+uf+"]",yf="(?:"+gf+"|"+ff+")",OA="(?:"+ti+"|"+ff+")",Cf="(?:['\u2019](?:d|ll|m|re|s|t|ve))?",Tf="(?:['\u2019](?:D|LL|M|RE|S|T|VE))?",xf="(?:[\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff]|\\ud83c[\\udffb-\\udfff])?",bf="[\\ufe0e\\ufe0f]?",AA=bf+xf+("(?:\\u200d(?:"+["[^"+af+"]",_f,vf].join("|")+")"+bf+xf+")*"),kA="(?:"+[TA,_f,vf].join("|")+")"+AA,BA=RegExp([ti+"?"+gf+"+"+Cf+"(?="+[pf,ti,"$"].join("|")+")",OA+"+"+Tf+"(?="+[pf,ti+yf,"$"].join("|")+")",ti+"?"+yf+"+"+Cf,ti+"+"+Tf,"\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])","\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])",mf,kA].join("|"),"g");function DA(t,e,n){return t=Ni(t),void 0===e?function uA(t){return cA.test(t)}(t)?function RA(t){return t.match(BA)||[]}(t):function lA(t){return t.match(aA)||[]}(t):t.match(e)||[]}var LA=RegExp("['\u2019]","g");function Ef(t){return function(e){return function Y2(t,e,n,r){for(var i=-1,o=null==t?0:t.length;++i<o;)n=e(n,t[i],i,t);return n}(DA(function sA(t){return(t=Ni(t))&&t.replace(J2,Q2).replace(oA,"")}(e).replace(LA,"")),t,"")}}function Sf(t,e,n){return void 0===n&&(n=e,e=void 0),void 0!==n&&(n=(n=Yr(n))==n?n:0),void 0!==e&&(e=(e=Yr(e))==e?e:0),function IA(t,e,n){return t==t&&(void 0!==n&&(t=t<=n?t:n),void 0!==e&&(t=t>=e?t:e)),t}(Yr(t),e,n)}var VA=Gl(function(t,e,n){return function WA(t,e,n){if("function"!=typeof t)throw new TypeError("Expected a function");return setTimeout(function(){t.apply(void 0,n)},e)}(t,Yr(e)||0,n)});function PA(t,e){var n=-1,r=rr(t)?Array(t.length):[];return qc(t,function(i,o,s){r[++n]=e(i,o,s)}),r}function $A(t,e){return Xs(function UA(t,e){return(Qe(t)?Wl:PA)(t,ea(e))}(t,e),Infinity)}function Of(t,e){return Js(t,e)}var ni=Ef(function(t,e,n){return t+(n?"-":"")+e.toLowerCase()});function GA(t,e){var n;return qc(t,function(r,i,o){return!(n=e(r,i,o))}),!!n}function zA(t,e,n){return(Qe(t)?Sp:GA)(t,ea(e))}class Cr{constructor(){this._partials=new Float64Array(32),this._n=0}add(e){const n=this._partials;let r=0;for(let i=0;i<this._n&&i<32;i++){const o=n[i],s=e+o,a=Math.abs(e)<Math.abs(o)?e-(s-o):o-(s-e);a&&(n[r++]=a),e=s}return n[r]=e,this._n=r+1,this}valueOf(){const e=this._partials;let r,i,o,n=this._n,s=0;if(n>0){for(s=e[--n];n>0&&(r=s,i=e[--n],s=r+i,o=i-(s-r),!o););n>0&&(o<0&&e[n-1]<0||o>0&&e[n-1]>0)&&(i=2*o,r=s+i,i==r-s&&(s=r))}return s}}function wf(t){return Array.from(function*KA(t){for(const e of t)yield*e}(t))}function qA(t){return t}var Na=1,Wa=2,Uu=3,mo=4,Ff=1e-6;function YA(t){return"translate("+t+",0)"}function XA(t){return"translate(0,"+t+")"}function ZA(t){return e=>+t(e)}function QA(t,e){return e=Math.max(0,t.bandwidth()-2*e)/2,t.round()&&(e=Math.round(e)),n=>+t(n)+e}function JA(){return!this.__axis}function Va(t,e){var n=[],r=null,i=null,o=6,s=6,a=3,l=typeof window<"u"&&window.devicePixelRatio>1?0:.5,c=t===Na||t===mo?-1:1,u=t===mo||t===Wa?"x":"y",d=t===Na||t===Uu?YA:XA;function h(p){var m=r??(e.ticks?e.ticks.apply(e,n):e.domain()),_=i??(e.tickFormat?e.tickFormat.apply(e,n):qA),f=Math.max(o,0)+a,v=e.range(),C=+v[0]+l,x=+v[v.length-1]+l,b=(e.bandwidth?QA:ZA)(e.copy(),l),T=p.selection?p.selection():p,S=T.selectAll(".domain").data([null]),M=T.selectAll(".tick").data(m,e).order(),D=M.exit(),k=M.enter().append("g").attr("class","tick"),H=M.select("line"),F=M.select("text");S=S.merge(S.enter().insert("path",".tick").attr("class","domain").attr("stroke","currentColor")),M=M.merge(k),H=H.merge(k.append("line").attr("stroke","currentColor").attr(u+"2",c*o)),F=F.merge(k.append("text").attr("fill","currentColor").attr(u,c*f).attr("dy",t===Na?"0em":t===Uu?"0.71em":"0.32em")),p!==T&&(S=S.transition(p),M=M.transition(p),H=H.transition(p),F=F.transition(p),D=D.transition(p).attr("opacity",Ff).attr("transform",function(P){return isFinite(P=b(P))?d(P+l):this.getAttribute("transform")}),k.attr("opacity",Ff).attr("transform",function(P){var N=this.parentNode.__axis;return d((N&&isFinite(N=N(P))?N:b(P))+l)})),D.remove(),S.attr("d",t===mo||t===Wa?s?"M"+c*s+","+C+"H"+l+"V"+x+"H"+c*s:"M"+l+","+C+"V"+x:s?"M"+C+","+c*s+"V"+l+"H"+x+"V"+c*s:"M"+C+","+l+"H"+x),M.attr("opacity",1).attr("transform",function(P){return d(b(P)+l)}),H.attr(u+"2",c*o),F.attr(u,c*f).text(_),T.filter(JA).attr("fill","none").attr("font-size",10).attr("font-family","sans-serif").attr("text-anchor",t===Wa?"start":t===mo?"end":"middle"),T.each(function(){this.__axis=b})}return h.scale=function(p){return arguments.length?(e=p,h):e},h.ticks=function(){return n=Array.from(arguments),h},h.tickArguments=function(p){return arguments.length?(n=null==p?[]:Array.from(p),h):n.slice()},h.tickValues=function(p){return arguments.length?(r=null==p?null:Array.from(p),h):r&&r.slice()},h.tickFormat=function(p){return arguments.length?(i=p,h):i},h.tickSize=function(p){return arguments.length?(o=s=+p,h):o},h.tickSizeInner=function(p){return arguments.length?(o=+p,h):o},h.tickSizeOuter=function(p){return arguments.length?(s=+p,h):s},h.tickPadding=function(p){return arguments.length?(a=+p,h):a},h.offset=function(p){return arguments.length?(l=+p,h):l},h}function ek(t){return Va(Na,t)}function tk(t){return Va(Wa,t)}function ju(t){return Va(Uu,t)}function Mf(t){return Va(mo,t)}const $u={capture:!0,passive:!1};function Gu(t){t.preventDefault(),t.stopImmediatePropagation()}const ok=t=>+t,zu=t=>()=>t;function sk(t,{sourceEvent:e,target:n,selection:r,mode:i,dispatch:o}){Object.defineProperties(this,{type:{value:t,enumerable:!0,configurable:!0},sourceEvent:{value:e,enumerable:!0,configurable:!0},target:{value:n,enumerable:!0,configurable:!0},selection:{value:r,enumerable:!0,configurable:!0},mode:{value:i,enumerable:!0,configurable:!0},_:{value:o}})}function Ku(t){t.preventDefault(),t.stopImmediatePropagation()}var Af={name:"drag"},qu={name:"space"},ri={name:"handle"},ii={name:"center"};const{abs:kf,max:rt,min:it}=Math;function Bf(t){return[+t[0],+t[1]]}function Rf(t){return[Bf(t[0]),Bf(t[1])]}var Pa={name:"x",handles:["w","e"].map(Xu),input:function(t,e){return null==t?null:[[+t[0],e[0][1]],[+t[1],e[1][1]]]},output:function(t){return t&&[t[0][0],t[1][0]]}},Yu={},An={overlay:"crosshair",selection:"move",n:"ns-resize",e:"ew-resize",s:"ns-resize",w:"ew-resize",nw:"nwse-resize",ne:"nesw-resize",se:"nwse-resize",sw:"nesw-resize"},Df={e:"w",w:"e",nw:"ne",ne:"nw",se:"sw",sw:"se"},Hf={n:"s",s:"n",nw:"sw",ne:"se",se:"ne",sw:"nw"},lk={overlay:1,selection:1,n:null,e:1,s:null,w:-1,nw:-1,ne:1,se:1,sw:-1},ck={overlay:1,selection:1,n:-1,e:null,s:1,w:null,nw:-1,ne:-1,se:1,sw:1};function Xu(t){return{type:t}}function uk(t){return!t.ctrlKey&&!t.button}function hk(){var t=this.ownerSVGElement||this;return t.hasAttribute("viewBox")?[[(t=t.viewBox.baseVal).x,t.y],[t.x+t.width,t.y+t.height]]:[[0,0],[t.width.baseVal.value,t.height.baseVal.value]]}function dk(){return navigator.maxTouchPoints||"ontouchstart"in this}function Zu(t){for(;!t.__brush;)if(!(t=t.parentNode))return;return t.__brush}function Lf(){return function mk(t){var a,e=hk,n=uk,r=dk,i=!0,o=pc("start","brush","end"),s=6;function l(f){var v=f.property("__brush",_).selectAll(".overlay").data([Xu("overlay")]);v.enter().append("rect").attr("class","overlay").attr("pointer-events","all").attr("cursor",An.overlay).merge(v).each(function(){var x=Zu(this).extent;L(this).attr("x",x[0][0]).attr("y",x[0][1]).attr("width",x[1][0]-x[0][0]).attr("height",x[1][1]-x[0][1])}),f.selectAll(".selection").data([Xu("selection")]).enter().append("rect").attr("class","selection").attr("cursor",An.selection).attr("fill","#777").attr("fill-opacity",.3).attr("stroke","#fff").attr("shape-rendering","crispEdges");var C=f.selectAll(".handle").data(t.handles,function(x){return x.type});C.exit().remove(),C.enter().append("rect").attr("class",function(x){return"handle handle--"+x.type}).attr("cursor",function(x){return An[x.type]}),f.each(c).attr("fill","none").attr("pointer-events","all").on("mousedown.brush",h).filter(r).on("touchstart.brush",h).on("touchmove.brush",p).on("touchend.brush touchcancel.brush",m).style("touch-action","none").style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}function c(){var f=L(this),v=Zu(this).selection;v?(f.selectAll(".selection").style("display",null).attr("x",v[0][0]).attr("y",v[0][1]).attr("width",v[1][0]-v[0][0]).attr("height",v[1][1]-v[0][1]),f.selectAll(".handle").style("display",null).attr("x",function(C){return"e"===C.type[C.type.length-1]?v[1][0]-s/2:v[0][0]-s/2}).attr("y",function(C){return"s"===C.type[0]?v[1][1]-s/2:v[0][1]-s/2}).attr("width",function(C){return"n"===C.type||"s"===C.type?v[1][0]-v[0][0]+s:s}).attr("height",function(C){return"e"===C.type||"w"===C.type?v[1][1]-v[0][1]+s:s})):f.selectAll(".selection,.handle").style("display","none").attr("x",null).attr("y",null).attr("width",null).attr("height",null)}function u(f,v,C){var x=f.__brush.emitter;return!x||C&&x.clean?new d(f,v,C):x}function d(f,v,C){this.that=f,this.args=v,this.state=f.__brush,this.active=0,this.clean=C}function h(f){if((!a||f.touches)&&n.apply(this,arguments)){var H,F,N,V,w,B,W,Z,Y,J,q,v=this,C=f.target.__data__.type,x="selection"===(i&&f.metaKey?C="overlay":C)?Af:i&&f.altKey?ii:ri,b=t===Yu?null:lk[C],T=t===Pa?null:ck[C],S=Zu(v),M=S.extent,D=S.selection,k=M[0][0],P=M[0][1],E=M[1][0],R=M[1][1],z=0,G=0,ue=b&&T&&i&&f.shiftKey,te=Array.from(f.touches||[f],ie=>{const be=ie.identifier;return(ie=ar(ie,v)).point0=ie.slice(),ie.identifier=be,ie});Fc(v);var he=u(v,arguments,!0).beforestart();if("overlay"===C){D&&(Y=!0);const ie=[te[0],te[1]||te[0]];S.selection=D=[[H=t===Yu?k:it(ie[0][0],ie[1][0]),N=t===Pa?P:it(ie[0][1],ie[1][1])],[w=t===Yu?E:rt(ie[0][0],ie[1][0]),W=t===Pa?R:rt(ie[0][1],ie[1][1])]],te.length>1&&pe(f)}else H=D[0][0],N=D[0][1],w=D[1][0],W=D[1][1];F=H,V=N,B=w,Z=W;var $=L(v).attr("pointer-events","none"),K=$.selectAll(".overlay").attr("cursor",An[C]);if(f.touches)he.moved=U,he.ended=ae;else{var X=L(f.view).on("mousemove.brush",U,!0).on("mouseup.brush",ae,!0);i&&X.on("keydown.brush",Ie,!0).on("keyup.brush",Pe,!0),function nk(t){var e=t.document.documentElement,n=L(t).on("dragstart.drag",Gu,$u);"onselectstart"in e?n.on("selectstart.drag",Gu,$u):(e.__noselect=e.style.MozUserSelect,e.style.MozUserSelect="none")}(f.view)}c.call(v),he.start(f,x.name)}function U(ie){for(const be of ie.changedTouches||[ie])for(const Wt of te)Wt.identifier===be.identifier&&(Wt.cur=ar(be,v));if(ue&&!J&&!q&&1===te.length){const be=te[0];kf(be.cur[0]-be[0])>kf(be.cur[1]-be[1])?q=!0:J=!0}for(const be of te)be.cur&&(be[0]=be.cur[0],be[1]=be.cur[1]);Y=!0,Ku(ie),pe(ie)}function pe(ie){const be=te[0],Wt=be.point0;var Ft;switch(z=be[0]-Wt[0],G=be[1]-Wt[1],x){case qu:case Af:b&&(z=rt(k-H,it(E-w,z)),F=H+z,B=w+z),T&&(G=rt(P-N,it(R-W,G)),V=N+G,Z=W+G);break;case ri:te[1]?(b&&(F=rt(k,it(E,te[0][0])),B=rt(k,it(E,te[1][0])),b=1),T&&(V=rt(P,it(R,te[0][1])),Z=rt(P,it(R,te[1][1])),T=1)):(b<0?(z=rt(k-H,it(E-H,z)),F=H+z,B=w):b>0&&(z=rt(k-w,it(E-w,z)),F=H,B=w+z),T<0?(G=rt(P-N,it(R-N,G)),V=N+G,Z=W):T>0&&(G=rt(P-W,it(R-W,G)),V=N,Z=W+G));break;case ii:b&&(F=rt(k,it(E,H-z*b)),B=rt(k,it(E,w+z*b))),T&&(V=rt(P,it(R,N-G*T)),Z=rt(P,it(R,W+G*T)))}B<F&&(b*=-1,Ft=H,H=w,w=Ft,Ft=F,F=B,B=Ft,C in Df&&K.attr("cursor",An[C=Df[C]])),Z<V&&(T*=-1,Ft=N,N=W,W=Ft,Ft=V,V=Z,Z=Ft,C in Hf&&K.attr("cursor",An[C=Hf[C]])),S.selection&&(D=S.selection),J&&(F=D[0][0],B=D[1][0]),q&&(V=D[0][1],Z=D[1][1]),(D[0][0]!==F||D[0][1]!==V||D[1][0]!==B||D[1][1]!==Z)&&(S.selection=[[F,V],[B,Z]],c.call(v),he.brush(ie,x.name))}function ae(ie){if(function ak(t){t.stopImmediatePropagation()}(ie),ie.touches){if(ie.touches.length)return;a&&clearTimeout(a),a=setTimeout(function(){a=null},500)}else(function rk(t,e){var n=t.document.documentElement,r=L(t).on("dragstart.drag",null);e&&(r.on("click.drag",Gu,$u),setTimeout(function(){r.on("click.drag",null)},0)),"onselectstart"in n?r.on("selectstart.drag",null):(n.style.MozUserSelect=n.__noselect,delete n.__noselect)})(ie.view,Y),X.on("keydown.brush keyup.brush mousemove.brush mouseup.brush",null);$.attr("pointer-events","all"),K.attr("cursor",An.overlay),S.selection&&(D=S.selection),function pk(t){return t[0][0]===t[1][0]||t[0][1]===t[1][1]}(D)&&(S.selection=null,c.call(v)),he.end(ie,x.name)}function Ie(ie){switch(ie.keyCode){case 16:ue=b&&T;break;case 18:x===ri&&(b&&(w=B-z*b,H=F+z*b),T&&(W=Z-G*T,N=V+G*T),x=ii,pe(ie));break;case 32:(x===ri||x===ii)&&(b<0?w=B-z:b>0&&(H=F-z),T<0?W=Z-G:T>0&&(N=V-G),x=qu,K.attr("cursor",An.selection),pe(ie));break;default:return}Ku(ie)}function Pe(ie){switch(ie.keyCode){case 16:ue&&(J=q=ue=!1,pe(ie));break;case 18:x===ii&&(b<0?w=B:b>0&&(H=F),T<0?W=Z:T>0&&(N=V),x=ri,pe(ie));break;case 32:x===qu&&(ie.altKey?(b&&(w=B-z*b,H=F+z*b),T&&(W=Z-G*T,N=V+G*T),x=ii):(b<0?w=B:b>0&&(H=F),T<0?W=Z:T>0&&(N=V),x=ri),K.attr("cursor",An[C]),pe(ie));break;default:return}Ku(ie)}}function p(f){u(this,arguments).moved(f)}function m(f){u(this,arguments).ended(f)}function _(){var f=this.__brush||{selection:null};return f.extent=Rf(e.apply(this,arguments)),f.dim=t,f}return l.move=function(f,v,C){f.tween?f.on("start.brush",function(x){u(this,arguments).beforestart().start(x)}).on("interrupt.brush end.brush",function(x){u(this,arguments).end(x)}).tween("brush",function(){var x=this,b=x.__brush,T=u(x,arguments),S=b.selection,M=t.input("function"==typeof v?v.apply(this,arguments):v,b.extent),D=Ki(S,M);function k(H){b.selection=1===H&&null===M?null:D(H),c.call(x),T.brush()}return null!==S&&null!==M?k:k(1)}):f.each(function(){var x=this,b=arguments,T=x.__brush,S=t.input("function"==typeof v?v.apply(x,b):v,T.extent),M=u(x,b).beforestart();Fc(x),T.selection=null===S?null:S,c.call(x),M.start(C).brush(C).end(C)})},l.clear=function(f,v){l.move(f,null,v)},d.prototype={beforestart:function(){return 1==++this.active&&(this.state.emitter=this,this.starting=!0),this},start:function(f,v){return this.starting?(this.starting=!1,this.emit("start",f,v)):this.emit("brush",f),this},brush:function(f,v){return this.emit("brush",f,v),this},end:function(f,v){return 0==--this.active&&(delete this.state.emitter,this.emit("end",f,v)),this},emit:function(f,v,C){var x=L(this.that).datum();o.call(f,this.that,new sk(f,{sourceEvent:v,target:l,selection:t.output(this.state.selection),mode:C,dispatch:o}),x)}},l.extent=function(f){return arguments.length?(e="function"==typeof f?f:zu(Rf(f)),l):e},l.filter=function(f){return arguments.length?(n="function"==typeof f?f:zu(!!f),l):n},l.touchable=function(f){return arguments.length?(r="function"==typeof f?f:zu(!!f),l):r},l.handleSize=function(f){return arguments.length?(s=+f,l):s},l.keyModifiers=function(f){return arguments.length?(i=!!f,l):i},l.on=function(){var f=o.on.apply(o,arguments);return f===o?l:f},l}(Pa)}const Qu=Math.PI,Ju=2*Qu,Tr=1e-6,gk=Ju-Tr;function If(t){this._+=t[0];for(let e=1,n=t.length;e<n;++e)this._+=arguments[e]+t[e]}let eh=class{constructor(t){this._x0=this._y0=this._x1=this._y1=null,this._="",this._append=null==t?If:function fk(t){let e=Math.floor(t);if(!(e>=0))throw new Error(`invalid digits: ${t}`);if(e>15)return If;const n=10**e;return function(r){this._+=r[0];for(let i=1,o=r.length;i<o;++i)this._+=Math.round(arguments[i]*n)/n+r[i]}}(t)}moveTo(t,e){this._append`M${this._x0=this._x1=+t},${this._y0=this._y1=+e}`}closePath(){null!==this._x1&&(this._x1=this._x0,this._y1=this._y0,this._append`Z`)}lineTo(t,e){this._append`L${this._x1=+t},${this._y1=+e}`}quadraticCurveTo(t,e,n,r){this._append`Q${+t},${+e},${this._x1=+n},${this._y1=+r}`}bezierCurveTo(t,e,n,r,i,o){this._append`C${+t},${+e},${+n},${+r},${this._x1=+i},${this._y1=+o}`}arcTo(t,e,n,r,i){if(t=+t,e=+e,n=+n,r=+r,(i=+i)<0)throw new Error(`negative radius: ${i}`);let o=this._x1,s=this._y1,a=n-t,l=r-e,c=o-t,u=s-e,d=c*c+u*u;if(null===this._x1)this._append`M${this._x1=t},${this._y1=e}`;else if(d>Tr)if(Math.abs(u*a-l*c)>Tr&&i){let h=n-o,p=r-s,m=a*a+l*l,_=h*h+p*p,f=Math.sqrt(m),v=Math.sqrt(d),C=i*Math.tan((Qu-Math.acos((m+d-_)/(2*f*v)))/2),x=C/v,b=C/f;Math.abs(x-1)>Tr&&this._append`L${t+x*c},${e+x*u}`,this._append`A${i},${i},0,0,${+(u*h>c*p)},${this._x1=t+b*a},${this._y1=e+b*l}`}else this._append`L${this._x1=t},${this._y1=e}`}arc(t,e,n,r,i,o){if(t=+t,e=+e,o=!!o,(n=+n)<0)throw new Error(`negative radius: ${n}`);let s=n*Math.cos(r),a=n*Math.sin(r),l=t+s,c=e+a,u=1^o,d=o?r-i:i-r;null===this._x1?this._append`M${l},${c}`:(Math.abs(this._x1-l)>Tr||Math.abs(this._y1-c)>Tr)&&this._append`L${l},${c}`,n&&(d<0&&(d=d%Ju+Ju),d>gk?this._append`A${n},${n},0,1,${u},${t-s},${e-a}A${n},${n},0,1,${u},${this._x1=l},${this._y1=c}`:d>Tr&&this._append`A${n},${n},0,${+(d>=Qu)},${u},${this._x1=t+n*Math.cos(i)},${this._y1=e+n*Math.sin(i)}`)}rect(t,e,n,r){this._append`M${this._x0=this._x1=+t},${this._y0=this._y1=+e}h${n=+n}v${+r}h${-n}Z`}toString(){return this._}};function Ua(){return new eh}Ua.prototype=eh.prototype;var Ae=1e-6,ge=Math.PI,_t=ge/2,Nf=ge/4,St=2*ge,lt=180/ge,Ve=ge/180,Oe=Math.abs,Wf=Math.atan,xr=Math.atan2,ke=Math.cos,vk=Math.exp,yk=Math.log,Te=Math.sin,Kn=Math.sign||function(t){return t>0?1:t<0?-1:0},Xt=Math.sqrt,Ck=Math.tan;function kn(t){return t>1?_t:t<-1?-_t:Math.asin(t)}function Lt(){}function ja(t,e){t&&Pf.hasOwnProperty(t.type)&&Pf[t.type](t,e)}var Vf={Feature:function(t,e){ja(t.geometry,e)},FeatureCollection:function(t,e){for(var n=t.features,r=-1,i=n.length;++r<i;)ja(n[r].geometry,e)}},Pf={Sphere:function(t,e){e.sphere()},Point:function(t,e){t=t.coordinates,e.point(t[0],t[1],t[2])},MultiPoint:function(t,e){for(var n=t.coordinates,r=-1,i=n.length;++r<i;)t=n[r],e.point(t[0],t[1],t[2])},LineString:function(t,e){th(t.coordinates,e,0)},MultiLineString:function(t,e){for(var n=t.coordinates,r=-1,i=n.length;++r<i;)th(n[r],e,0)},Polygon:function(t,e){Uf(t.coordinates,e)},MultiPolygon:function(t,e){for(var n=t.coordinates,r=-1,i=n.length;++r<i;)Uf(n[r],e)},GeometryCollection:function(t,e){for(var n=t.geometries,r=-1,i=n.length;++r<i;)ja(n[r],e)}};function th(t,e,n){var o,r=-1,i=t.length-n;for(e.lineStart();++r<i;)o=t[r],e.point(o[0],o[1],o[2]);e.lineEnd()}function Uf(t,e){var n=-1,r=t.length;for(e.polygonStart();++n<r;)th(t[n],e,1);e.polygonEnd()}function oi(t,e){t&&Vf.hasOwnProperty(t.type)?Vf[t.type](t,e):ja(t,e)}function nh(t){return[xr(t[1],t[0]),kn(t[2])]}function si(t){var e=t[0],n=t[1],r=ke(n);return[r*ke(e),r*Te(e),Te(n)]}function $a(t,e){return t[0]*e[0]+t[1]*e[1]+t[2]*e[2]}function Ga(t,e){return[t[1]*e[2]-t[2]*e[1],t[2]*e[0]-t[0]*e[2],t[0]*e[1]-t[1]*e[0]]}function rh(t,e){t[0]+=e[0],t[1]+=e[1],t[2]+=e[2]}function za(t,e){return[t[0]*e,t[1]*e,t[2]*e]}function ih(t){var e=Xt(t[0]*t[0]+t[1]*t[1]+t[2]*t[2]);t[0]/=e,t[1]/=e,t[2]/=e}function oh(t,e){function n(r,i){return r=t(r,i),e(r[0],r[1])}return t.invert&&e.invert&&(n.invert=function(r,i){return(r=e.invert(r,i))&&t.invert(r[0],r[1])}),n}function sh(t,e){return Oe(t)>ge&&(t-=Math.round(t/St)*St),[t,e]}function jf(t,e,n){return(t%=St)?e||n?oh(Gf(t),zf(e,n)):Gf(t):e||n?zf(e,n):sh}function $f(t){return function(e,n){return Oe(e+=t)>ge&&(e-=Math.round(e/St)*St),[e,n]}}function Gf(t){var e=$f(t);return e.invert=$f(-t),e}function zf(t,e){var n=ke(t),r=Te(t),i=ke(e),o=Te(e);function s(a,l){var c=ke(l),u=ke(a)*c,d=Te(a)*c,h=Te(l),p=h*n+u*r;return[xr(d*i-p*o,u*n-h*r),kn(p*i+d*o)]}return s.invert=function(a,l){var c=ke(l),u=ke(a)*c,d=Te(a)*c,h=Te(l),p=h*i-d*o;return[xr(d*i+h*o,u*n+p*r),kn(p*n-u*r)]},s}function Kf(t,e){(e=si(e))[0]-=t,ih(e);var n=function Tk(t){return t>1?0:t<-1?ge:Math.acos(t)}(-e[1]);return((-e[2]<0?-n:n)+St-Ae)%St}function qf(){var e,t=[];return{point:function(n,r,i){e.push([n,r,i])},lineStart:function(){t.push(e=[])},lineEnd:Lt,rejoin:function(){t.length>1&&t.push(t.pop().concat(t.shift()))},result:function(){var n=t;return t=[],e=null,n}}}function Ka(t,e){return Oe(t[0]-e[0])<Ae&&Oe(t[1]-e[1])<Ae}function qa(t,e,n,r){this.x=t,this.z=e,this.o=n,this.e=r,this.v=!1,this.n=this.p=null}function Yf(t,e,n,r,i){var a,l,o=[],s=[];if(t.forEach(function(m){if(!((_=m.length-1)<=0)){var _,C,f=m[0],v=m[_];if(Ka(f,v)){if(!f[2]&&!v[2]){for(i.lineStart(),a=0;a<_;++a)i.point((f=m[a])[0],f[1]);return void i.lineEnd()}v[0]+=2*Ae}o.push(C=new qa(f,m,null,!0)),s.push(C.o=new qa(f,null,C,!1)),o.push(C=new qa(v,m,null,!1)),s.push(C.o=new qa(v,null,C,!0))}}),o.length){for(s.sort(e),Xf(o),Xf(s),a=0,l=s.length;a<l;++a)s[a].e=n=!n;for(var u,d,c=o[0];;){for(var h=c,p=!0;h.v;)if((h=h.n)===c)return;u=h.z,i.lineStart();do{if(h.v=h.o.v=!0,h.e){if(p)for(a=0,l=u.length;a<l;++a)i.point((d=u[a])[0],d[1]);else r(h.x,h.n.x,1,i);h=h.n}else{if(p)for(u=h.p.z,a=u.length-1;a>=0;--a)i.point((d=u[a])[0],d[1]);else r(h.x,h.p.x,-1,i);h=h.p}u=(h=h.o).z,p=!p}while(!h.v);i.lineEnd()}}}function Xf(t){if(e=t.length){for(var e,i,n=0,r=t[0];++n<e;)r.n=i=t[n],i.p=r,r=i;r.n=i=t[0],i.p=r}}function ah(t){return Oe(t[0])<=ge?t[0]:Kn(t[0])*((Oe(t[0])+ge)%St-ge)}function Zf(t,e,n,r){return function(i){var c,u,d,o=e(i),s=qf(),a=e(s),l=!1,h={point:p,lineStart:_,lineEnd:f,polygonStart:function(){h.point=v,h.lineStart=C,h.lineEnd=x,u=[],c=[]},polygonEnd:function(){h.point=p,h.lineStart=_,h.lineEnd=f,u=wf(u);var b=function Ek(t,e){var n=ah(e),r=e[1],i=Te(r),o=[Te(n),-ke(n),0],s=0,a=0,l=new Cr;1===i?r=_t+Ae:-1===i&&(r=-_t-Ae);for(var c=0,u=t.length;c<u;++c)if(h=(d=t[c]).length)for(var d,h,p=d[h-1],m=ah(p),_=p[1]/2+Nf,f=Te(_),v=ke(_),C=0;C<h;++C,m=b,f=S,v=M,p=x){var x=d[C],b=ah(x),T=x[1]/2+Nf,S=Te(T),M=ke(T),D=b-m,k=D>=0?1:-1,H=k*D,F=H>ge,P=f*S;if(l.add(xr(P*k*Te(H),v*M+P*ke(H))),s+=F?D+k*St:D,F^m>=n^b>=n){var N=Ga(si(p),si(x));ih(N);var V=Ga(o,N);ih(V);var E=(F^D>=0?-1:1)*kn(V[2]);(r>E||r===E&&(N[0]||N[1]))&&(a+=F^D>=0?1:-1)}}return(s<-1e-6||s<Ae&&l<-1e-12)^1&a}(c,r);u.length?(l||(i.polygonStart(),l=!0),Yf(u,Ok,b,n,i)):b&&(l||(i.polygonStart(),l=!0),i.lineStart(),n(null,null,1,i),i.lineEnd()),l&&(i.polygonEnd(),l=!1),u=c=null},sphere:function(){i.polygonStart(),i.lineStart(),n(null,null,1,i),i.lineEnd(),i.polygonEnd()}};function p(b,T){t(b,T)&&i.point(b,T)}function m(b,T){o.point(b,T)}function _(){h.point=m,o.lineStart()}function f(){h.point=p,o.lineEnd()}function v(b,T){d.push([b,T]),a.point(b,T)}function C(){a.lineStart(),d=[]}function x(){v(d[0][0],d[0][1]),a.lineEnd();var S,D,k,H,b=a.clean(),T=s.result(),M=T.length;if(d.pop(),c.push(d),d=null,M){if(1&b){if((D=(k=T[0]).length-1)>0){for(l||(i.polygonStart(),l=!0),i.lineStart(),S=0;S<D;++S)i.point((H=k[S])[0],H[1]);i.lineEnd()}return}M>1&&2&b&&T.push(T.pop().concat(T.shift())),u.push(T.filter(Sk))}}return h}}function Sk(t){return t.length>1}function Ok(t,e){return((t=t.x)[0]<0?t[1]-_t-Ae:_t-t[1])-((e=e.x)[0]<0?e[1]-_t-Ae:_t-e[1])}sh.invert=sh;const Qf=Zf(function(){return!0},function wk(t){var i,e=NaN,n=NaN,r=NaN;return{lineStart:function(){t.lineStart(),i=1},point:function(o,s){var a=o>0?ge:-ge,l=Oe(o-e);Oe(l-ge)<Ae?(t.point(e,n=(n+s)/2>0?_t:-_t),t.point(r,n),t.lineEnd(),t.lineStart(),t.point(a,n),t.point(o,n),i=0):r!==a&&l>=ge&&(Oe(e-r)<Ae&&(e-=r*Ae),Oe(o-a)<Ae&&(o-=a*Ae),n=function Fk(t,e,n,r){var i,o,s=Te(t-n);return Oe(s)>Ae?Wf((Te(e)*(o=ke(r))*Te(n)-Te(r)*(i=ke(e))*Te(t))/(i*o*s)):(e+r)/2}(e,n,o,s),t.point(r,n),t.lineEnd(),t.lineStart(),t.point(a,n),i=0),t.point(e=o,n=s),r=a},lineEnd:function(){t.lineEnd(),e=n=NaN},clean:function(){return 2-i}}},function Mk(t,e,n,r){var i;if(null==t)i=n*_t,r.point(-ge,i),r.point(0,i),r.point(ge,i),r.point(ge,0),r.point(ge,-i),r.point(0,-i),r.point(-ge,-i),r.point(-ge,0),r.point(-ge,i);else if(Oe(t[0]-e[0])>Ae){var o=t[0]<e[0]?ge:-ge;i=n*o/2,r.point(-o,i),r.point(0,i),r.point(o,i)}else r.point(e[0],e[1])},[-ge,-_t]);function Ak(t){var e=ke(t),n=2*Ve,r=e>0,i=Oe(e)>Ae;function s(u,d){return ke(u)*ke(d)>e}function l(u,d,h){var _=[1,0,0],f=Ga(si(u),si(d)),v=$a(f,f),C=f[0],x=v-C*C;if(!x)return!h&&u;var b=e*v/x,T=-e*C/x,S=Ga(_,f),M=za(_,b);rh(M,za(f,T));var k=S,H=$a(M,k),F=$a(k,k),P=H*H-F*($a(M,M)-1);if(!(P<0)){var N=Xt(P),V=za(k,(-H-N)/F);if(rh(V,M),V=nh(V),!h)return V;var W,E=u[0],w=d[0],B=u[1],R=d[1];w<E&&(W=E,E=w,w=W);var Z=w-E,z=Oe(Z-ge)<Ae;if(!z&&R<B&&(W=B,B=R,R=W),z||Z<Ae?z?B+R>0^V[1]<(Oe(V[0]-E)<Ae?B:R):B<=V[1]&&V[1]<=R:Z>ge^(E<=V[0]&&V[0]<=w)){var Y=za(k,(-H+N)/F);return rh(Y,M),[V,nh(Y)]}}}function c(u,d){var h=r?t:ge-t,p=0;return u<-h?p|=1:u>h&&(p|=2),d<-h?p|=4:d>h&&(p|=8),p}return Zf(s,function a(u){var d,h,p,m,_;return{lineStart:function(){m=p=!1,_=1},point:function(f,v){var x,C=[f,v],b=s(f,v),T=r?b?0:c(f,v):b?c(f+(f<0?ge:-ge),v):0;if(!d&&(m=p=b)&&u.lineStart(),b!==p&&((!(x=l(d,C))||Ka(d,x)||Ka(C,x))&&(C[2]=1)),b!==p)_=0,b?(u.lineStart(),x=l(C,d),u.point(x[0],x[1])):(x=l(d,C),u.point(x[0],x[1],2),u.lineEnd()),d=x;else if(i&&d&&r^b){var S;!(T&h)&&(S=l(C,d,!0))&&(_=0,r?(u.lineStart(),u.point(S[0][0],S[0][1]),u.point(S[1][0],S[1][1]),u.lineEnd()):(u.point(S[1][0],S[1][1]),u.lineEnd(),u.lineStart(),u.point(S[0][0],S[0][1],3)))}b&&(!d||!Ka(d,C))&&u.point(C[0],C[1]),d=C,p=b,h=T},lineEnd:function(){p&&u.lineEnd(),d=null},clean:function(){return _|(m&&p)<<1}}},function o(u,d,h,p){!function bk(t,e,n,r,i,o){if(n){var s=ke(e),a=Te(e),l=r*n;null==i?(i=e+r*St,o=e-l/2):(i=Kf(s,i),o=Kf(s,o),(r>0?i<o:i>o)&&(i+=r*St));for(var c,u=i;r>0?u>o:u<o;u-=l)c=nh([s,-a*ke(u),-a*Te(u)]),t.point(c[0],c[1])}}(p,t,n,h,u,d)},r?[0,-t]:[-ge,t-ge])}var Ya=1e9,Xa=-1e9;function Bk(t,e,n,r){function i(c,u){return t<=c&&c<=n&&e<=u&&u<=r}function o(c,u,d,h){var p=0,m=0;if(null==c||(p=s(c,d))!==(m=s(u,d))||l(c,u)<0^d>0)do{h.point(0===p||3===p?t:n,p>1?r:e)}while((p=(p+d+4)%4)!==m);else h.point(u[0],u[1])}function s(c,u){return Oe(c[0]-t)<Ae?u>0?0:3:Oe(c[0]-n)<Ae?u>0?2:1:Oe(c[1]-e)<Ae?u>0?1:0:u>0?3:2}function a(c,u){return l(c.x,u.x)}function l(c,u){var d=s(c,1),h=s(u,1);return d!==h?d-h:0===d?u[1]-c[1]:1===d?c[0]-u[0]:2===d?c[1]-u[1]:u[0]-c[0]}return function(c){var h,p,m,_,f,v,C,x,b,T,S,u=c,d=qf(),M={point:D,lineStart:function P(){M.point=V,p&&p.push(m=[]),T=!0,b=!1,C=x=NaN},lineEnd:function N(){h&&(V(_,f),v&&b&&d.rejoin(),h.push(d.result())),M.point=D,b&&u.lineEnd()},polygonStart:function H(){u=d,h=[],p=[],S=!0},polygonEnd:function F(){var E=function k(){for(var E=0,w=0,B=p.length;w<B;++w)for(var G,Y,R=p[w],W=1,Z=R.length,z=R[0],ue=z[0],J=z[1];W<Z;++W)G=ue,Y=J,z=R[W],ue=z[0],J=z[1],Y<=r?J>r&&(ue-G)*(r-Y)>(J-Y)*(t-G)&&++E:J<=r&&(ue-G)*(r-Y)<(J-Y)*(t-G)&&--E;return E}(),w=S&&E,B=(h=wf(h)).length;(w||B)&&(c.polygonStart(),w&&(c.lineStart(),o(null,null,1,c),c.lineEnd()),B&&Yf(h,a,E,o,c),c.polygonEnd()),u=c,h=p=m=null}};function D(E,w){i(E,w)&&u.point(E,w)}function V(E,w){var B=i(E,w);if(p&&m.push([E,w]),T)_=E,f=w,v=B,T=!1,B&&(u.lineStart(),u.point(E,w));else if(B&&b)u.point(E,w);else{var R=[C=Math.max(Xa,Math.min(Ya,C)),x=Math.max(Xa,Math.min(Ya,x))],W=[E=Math.max(Xa,Math.min(Ya,E)),w=Math.max(Xa,Math.min(Ya,w))];!function kk(t,e,n,r,i,o){var m,s=t[0],a=t[1],u=0,d=1,h=e[0]-s,p=e[1]-a;if(m=n-s,h||!(m>0)){if(m/=h,h<0){if(m<u)return;m<d&&(d=m)}else if(h>0){if(m>d)return;m>u&&(u=m)}if(m=i-s,h||!(m<0)){if(m/=h,h<0){if(m>d)return;m>u&&(u=m)}else if(h>0){if(m<u)return;m<d&&(d=m)}if(m=r-a,p||!(m>0)){if(m/=p,p<0){if(m<u)return;m<d&&(d=m)}else if(p>0){if(m>d)return;m>u&&(u=m)}if(m=o-a,p||!(m<0)){if(m/=p,p<0){if(m>d)return;m>u&&(u=m)}else if(p>0){if(m<u)return;m<d&&(d=m)}return u>0&&(t[0]=s+u*h,t[1]=a+u*p),d<1&&(e[0]=s+d*h,e[1]=a+d*p),!0}}}}}(R,W,t,e,n,r)?B&&(u.lineStart(),u.point(E,w),S=!1):(b||(u.lineStart(),u.point(R[0],R[1])),u.point(W[0],W[1]),B||u.lineEnd(),S=!1)}C=E,x=w,b=B}return M}}const lh=t=>t;var Jf,e_,hh,dh,ch=new Cr,uh=new Cr,Bn={point:Lt,lineStart:Lt,lineEnd:Lt,polygonStart:function(){Bn.lineStart=Rk,Bn.lineEnd=Hk},polygonEnd:function(){Bn.lineStart=Bn.lineEnd=Bn.point=Lt,ch.add(Oe(uh)),uh=new Cr},result:function(){var t=ch/2;return ch=new Cr,t}};function Rk(){Bn.point=Dk}function Dk(t,e){Bn.point=t_,Jf=hh=t,e_=dh=e}function t_(t,e){uh.add(dh*t-hh*e),hh=t,dh=e}function Hk(){t_(Jf,e_)}var ai=1/0,Za=ai,go=-ai,Qa=go,Ja={point:function Lk(t,e){t<ai&&(ai=t),t>go&&(go=t),e<Za&&(Za=e),e>Qa&&(Qa=e)},lineStart:Lt,lineEnd:Lt,polygonStart:Lt,polygonEnd:Lt,result:function(){var t=[[ai,Za],[go,Qa]];return go=Qa=-(Za=ai=1/0),t}};var n_,r_,un,hn,ph=0,mh=0,fo=0,el=0,tl=0,li=0,gh=0,fh=0,_o=0,It={point:br,lineStart:i_,lineEnd:o_,polygonStart:function(){It.lineStart=Wk,It.lineEnd=Vk},polygonEnd:function(){It.point=br,It.lineStart=i_,It.lineEnd=o_},result:function(){var t=_o?[gh/_o,fh/_o]:li?[el/li,tl/li]:fo?[ph/fo,mh/fo]:[NaN,NaN];return ph=mh=fo=el=tl=li=gh=fh=_o=0,t}};function br(t,e){ph+=t,mh+=e,++fo}function i_(){It.point=Ik}function Ik(t,e){It.point=Nk,br(un=t,hn=e)}function Nk(t,e){var n=t-un,r=e-hn,i=Xt(n*n+r*r);el+=i*(un+t)/2,tl+=i*(hn+e)/2,li+=i,br(un=t,hn=e)}function o_(){It.point=br}function Wk(){It.point=Pk}function Vk(){s_(n_,r_)}function Pk(t,e){It.point=s_,br(n_=un=t,r_=hn=e)}function s_(t,e){var n=t-un,r=e-hn,i=Xt(n*n+r*r);el+=i*(un+t)/2,tl+=i*(hn+e)/2,li+=i,gh+=(i=hn*t-un*e)*(un+t),fh+=i*(hn+e),_o+=3*i,br(un=t,hn=e)}function a_(t){this._context=t}a_.prototype={_radius:4.5,pointRadius:function(t){return this._radius=t,this},polygonStart:function(){this._line=0},polygonEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){0===this._line&&this._context.closePath(),this._point=NaN},point:function(t,e){switch(this._point){case 0:this._context.moveTo(t,e),this._point=1;break;case 1:this._context.lineTo(t,e);break;default:this._context.moveTo(t+this._radius,e),this._context.arc(t,e,this._radius,0,St)}},result:Lt};var vh,l_,c_,vo,yo,_h=new Cr,Co={point:Lt,lineStart:function(){Co.point=Uk},lineEnd:function(){vh&&u_(l_,c_),Co.point=Lt},polygonStart:function(){vh=!0},polygonEnd:function(){vh=null},result:function(){var t=+_h;return _h=new Cr,t}};function Uk(t,e){Co.point=u_,l_=vo=t,c_=yo=e}function u_(t,e){vo-=t,yo-=e,_h.add(Xt(vo*vo+yo*yo)),vo=t,yo=e}let h_,nl,d_,p_;class m_{constructor(e){this._append=null==e?g_:function jk(t){const e=Math.floor(t);if(!(e>=0))throw new RangeError(`invalid digits: ${t}`);if(e>15)return g_;if(e!==h_){const n=10**e;h_=e,nl=function(r){let i=1;this._+=r[0];for(const o=r.length;i<o;++i)this._+=Math.round(arguments[i]*n)/n+r[i]}}return nl}(e),this._radius=4.5,this._=""}pointRadius(e){return this._radius=+e,this}polygonStart(){this._line=0}polygonEnd(){this._line=NaN}lineStart(){this._point=0}lineEnd(){0===this._line&&(this._+="Z"),this._point=NaN}point(e,n){switch(this._point){case 0:this._append`M${e},${n}`,this._point=1;break;case 1:this._append`L${e},${n}`;break;default:if(this._append`M${e},${n}`,this._radius!==d_||this._append!==nl){const r=this._radius,i=this._;this._="",this._append`m0,${r}a${r},${r} 0 1,1 0,${-2*r}a${r},${r} 0 1,1 0,${2*r}z`,d_=r,nl=this._append,p_=this._,this._=i}this._+=p_}}result(){const e=this._;return this._="",e.length?e:null}}function g_(t){let e=1;this._+=t[0];for(const n=t.length;e<n;++e)this._+=arguments[e]+t[e]}function yh(t){return function(e){var n=new Ch;for(var r in t)n[r]=t[r];return n.stream=e,n}}function Ch(){}function Th(t,e,n){var r=t.clipExtent&&t.clipExtent();return t.scale(150).translate([0,0]),null!=r&&t.clipExtent(null),oi(n,t.stream(Ja)),e(Ja.result()),null!=r&&t.clipExtent(r),t}function f_(t,e,n){return Th(t,function(r){var i=e[1][0]-e[0][0],o=e[1][1]-e[0][1],s=Math.min(i/(r[1][0]-r[0][0]),o/(r[1][1]-r[0][1])),a=+e[0][0]+(i-s*(r[1][0]+r[0][0]))/2,l=+e[0][1]+(o-s*(r[1][1]+r[0][1]))/2;t.scale(150*s).translate([a,l])},n)}Ch.prototype={constructor:Ch,point:function(t,e){this.stream.point(t,e)},sphere:function(){this.stream.sphere()},lineStart:function(){this.stream.lineStart()},lineEnd:function(){this.stream.lineEnd()},polygonStart:function(){this.stream.polygonStart()},polygonEnd:function(){this.stream.polygonEnd()}};var __=16,qk=ke(30*Ve);function v_(t,e){return+e?function Xk(t,e){function n(r,i,o,s,a,l,c,u,d,h,p,m,_,f){var v=c-r,C=u-i,x=v*v+C*C;if(x>4*e&&_--){var b=s+h,T=a+p,S=l+m,M=Xt(b*b+T*T+S*S),D=kn(S/=M),k=Oe(Oe(S)-1)<Ae||Oe(o-d)<Ae?(o+d)/2:xr(T,b),H=t(k,D),F=H[0],P=H[1],N=F-r,V=P-i,E=C*N-v*V;(E*E/x>e||Oe((v*N+C*V)/x-.5)>.3||s*h+a*p+l*m<qk)&&(n(r,i,o,s,a,l,F,P,k,b/=M,T/=M,S,_,f),f.point(F,P),n(F,P,k,b,T,S,c,u,d,h,p,m,_,f))}}return function(r){var i,o,s,a,l,c,u,d,h,p,m,_,f={point:v,lineStart:C,lineEnd:b,polygonStart:function(){r.polygonStart(),f.lineStart=T},polygonEnd:function(){r.polygonEnd(),f.lineStart=C}};function v(D,k){D=t(D,k),r.point(D[0],D[1])}function C(){d=NaN,f.point=x,r.lineStart()}function x(D,k){var H=si([D,k]),F=t(D,k);n(d,h,u,p,m,_,d=F[0],h=F[1],u=D,p=H[0],m=H[1],_=H[2],__,r),r.point(d,h)}function b(){f.point=v,r.lineEnd()}function T(){C(),f.point=S,f.lineEnd=M}function S(D,k){x(i=D,k),o=d,s=h,a=p,l=m,c=_,f.point=x}function M(){n(d,h,u,p,m,_,o,s,i,a,l,c,__,r),f.lineEnd=b,b()}return f}}(t,e):function Yk(t){return yh({point:function(e,n){e=t(e,n),this.stream.point(e[0],e[1])}})}(t)}var Zk=yh({point:function(t,e){this.stream.point(t*Ve,e*Ve)}});function y_(t,e,n,r,i,o){if(!o)return function Jk(t,e,n,r,i){function o(s,a){return[e+t*(s*=r),n-t*(a*=i)]}return o.invert=function(s,a){return[(s-e)/t*r,(n-a)/t*i]},o}(t,e,n,r,i);var s=ke(o),a=Te(o),l=s*t,c=a*t,u=s/t,d=a/t,h=(a*n-s*e)/t,p=(a*e+s*n)/t;function m(_,f){return[l*(_*=r)-c*(f*=i)+e,n-c*_-l*f]}return m.invert=function(_,f){return[r*(u*_-d*f+h),i*(p-d*_-u*f)]},m}function rl(t){return C_(function(){return t})()}function C_(t){var e,u,v,C,x,S,M,D,k,H,n=150,r=480,i=250,o=0,s=0,a=0,l=0,c=0,d=0,h=1,p=1,m=null,_=Qf,f=null,b=lh,T=.5;function F(E){return D(E[0]*Ve,E[1]*Ve)}function P(E){return(E=D.invert(E[0],E[1]))&&[E[0]*lt,E[1]*lt]}function N(){var E=y_(n,0,0,h,p,d).apply(null,e(o,s)),w=y_(n,r-E[0],i-E[1],h,p,d);return u=jf(a,l,c),M=oh(e,w),D=oh(u,M),S=v_(M,T),V()}function V(){return k=H=null,F}return F.stream=function(E){return k&&H===E?k:k=Zk(function Qk(t){return yh({point:function(e,n){var r=t(e,n);return this.stream.point(r[0],r[1])}})}(u)(_(S(b(H=E)))))},F.preclip=function(E){return arguments.length?(_=E,m=void 0,V()):_},F.postclip=function(E){return arguments.length?(b=E,f=v=C=x=null,V()):b},F.clipAngle=function(E){return arguments.length?(_=+E?Ak(m=E*Ve):(m=null,Qf),V()):m*lt},F.clipExtent=function(E){return arguments.length?(b=null==E?(f=v=C=x=null,lh):Bk(f=+E[0][0],v=+E[0][1],C=+E[1][0],x=+E[1][1]),V()):null==f?null:[[f,v],[C,x]]},F.scale=function(E){return arguments.length?(n=+E,N()):n},F.translate=function(E){return arguments.length?(r=+E[0],i=+E[1],N()):[r,i]},F.center=function(E){return arguments.length?(o=E[0]%360*Ve,s=E[1]%360*Ve,N()):[o*lt,s*lt]},F.rotate=function(E){return arguments.length?(a=E[0]%360*Ve,l=E[1]%360*Ve,c=E.length>2?E[2]%360*Ve:0,N()):[a*lt,l*lt,c*lt]},F.angle=function(E){return arguments.length?(d=E%360*Ve,N()):d*lt},F.reflectX=function(E){return arguments.length?(h=E?-1:1,N()):h<0},F.reflectY=function(E){return arguments.length?(p=E?-1:1,N()):p<0},F.precision=function(E){return arguments.length?(S=v_(M,T=E*E),V()):Xt(T)},F.fitExtent=function(E,w){return f_(F,E,w)},F.fitSize=function(E,w){return function Gk(t,e,n){return f_(t,[[0,0],e],n)}(F,E,w)},F.fitWidth=function(E,w){return function zk(t,e,n){return Th(t,function(r){var i=+e,o=i/(r[1][0]-r[0][0]),s=(i-o*(r[1][0]+r[0][0]))/2,a=-o*r[0][1];t.scale(150*o).translate([s,a])},n)}(F,E,w)},F.fitHeight=function(E,w){return function Kk(t,e,n){return Th(t,function(r){var i=+e,o=i/(r[1][1]-r[0][1]),s=-o*r[0][0],a=(i-o*(r[1][1]+r[0][1]))/2;t.scale(150*o).translate([s,a])},n)}(F,E,w)},function(){return e=t.apply(this,arguments),F.invert=e.invert&&P,N()}}function T_(t){var e=0,n=ge/3,r=C_(t),i=r(e,n);return i.parallels=function(o){return arguments.length?r(e=o[0]*Ve,n=o[1]*Ve):[e*lt,n*lt]},i}function tB(t,e){var n=Te(t),r=(n+Te(e))/2;if(Oe(r)<Ae)return function eB(t){var e=ke(t);function n(r,i){return[r*e,Te(i)/e]}return n.invert=function(r,i){return[r/e,kn(i*e)]},n}(t);var i=1+n*(2*r-n),o=Xt(i)/r;function s(a,l){var c=Xt(i-2*r*Te(l))/r;return[c*Te(a*=r),o-c*ke(a)]}return s.invert=function(a,l){var c=o-l,u=xr(a,Oe(c))*Kn(c);return c*r<0&&(u-=ge*Kn(a)*Kn(c)),[u/r,kn((i-(a*a+c*c)*r*r)/(2*r))]},s}function x_(){return T_(tB).scale(155.424).center([0,33.6442])}function xh(t,e){return[t,yk(Ck((_t+e)/2))]}function rB(){return function iB(t){var a,l,c,e=rl(t),n=e.center,r=e.scale,i=e.translate,o=e.clipExtent,s=null;function u(){var d=ge*r(),h=e(function xk(t){function e(n){return(n=t(n[0]*Ve,n[1]*Ve))[0]*=lt,n[1]*=lt,n}return t=jf(t[0]*Ve,t[1]*Ve,t.length>2?t[2]*Ve:0),e.invert=function(n){return(n=t.invert(n[0]*Ve,n[1]*Ve))[0]*=lt,n[1]*=lt,n},e}(e.rotate()).invert([0,0]));return o(null==s?[[h[0]-d,h[1]-d],[h[0]+d,h[1]+d]]:t===xh?[[Math.max(h[0]-d,s),a],[Math.min(h[0]+d,l),c]]:[[s,Math.max(h[1]-d,a)],[l,Math.min(h[1]+d,c)]])}return e.scale=function(d){return arguments.length?(r(d),u()):r()},e.translate=function(d){return arguments.length?(i(d),u()):i()},e.center=function(d){return arguments.length?(n(d),u()):n()},e.clipExtent=function(d){return arguments.length?(null==d?s=a=l=c=null:(s=+d[0][0],a=+d[0][1],l=+d[1][0],c=+d[1][1]),u()):null==s?null:[[s,a],[l,c]]},u()}(xh).scale(961/St)}function il(t,e){return[t,e]}function sB(t,e){var n=ke(t),r=t===e?Te(t):(n-ke(e))/(e-t),i=n/r+t;if(Oe(r)<Ae)return il;function o(s,a){var l=i-a,c=r*s;return[l*Te(c),i-l*ke(c)]}return o.invert=function(s,a){var l=i-a,c=xr(s,Oe(l))*Kn(l);return l*r<0&&(c-=ge*Kn(s)*Kn(l)),[c/r,i-Kn(r)*Xt(s*s+l*l)]},o}xh.invert=function(t,e){return[t,2*Wf(vk(e))-_t]},il.invert=il;var To=1.340264,xo=-.081106,bo=893e-6,Eo=.003796,ol=Xt(3)/2;function b_(t,e){var n=kn(ol*Te(e)),r=n*n,i=r*r*r;return[t*ke(n)/(ol*(To+3*xo*r+i*(7*bo+9*Eo*r))),n*(To+xo*r+i*(bo+Eo*r))]}function E_(t,e){var n=e*e,r=n*n;return[t*(.8707-.131979*n+r*(r*(.003971*n-.001529*r)-.013791)),e*(1.007226+n*(.015085+r*(.028874*n-.044475-.005916*r)))]}function hB(t,e){return t.parent===e.parent?1:2}function pB(t,e){return t+e.x}function gB(t,e){return Math.max(t,e.y)}function vB(){var t=hB,e=1,n=1,r=!1;function i(o){var s,a=0;o.eachAfter(function(h){var p=h.children;p?(h.x=function dB(t){return t.reduce(pB,0)/t.length}(p),h.y=function mB(t){return 1+t.reduce(gB,0)}(p)):(h.x=s?a+=t(h,s):0,h.y=0,s=h)});var l=function fB(t){for(var e;e=t.children;)t=e[0];return t}(o),c=function _B(t){for(var e;e=t.children;)t=e[e.length-1];return t}(o),u=l.x-t(l,c)/2,d=c.x+t(c,l)/2;return o.eachAfter(r?function(h){h.x=(h.x-o.x)*e,h.y=(o.y-h.y)*n}:function(h){h.x=(h.x-u)/(d-u)*e,h.y=(1-(o.y?h.y/o.y:1))*n})}return i.separation=function(o){return arguments.length?(t=o,i):t},i.size=function(o){return arguments.length?(r=!1,e=+o[0],n=+o[1],i):r?null:[e,n]},i.nodeSize=function(o){return arguments.length?(r=!0,e=+o[0],n=+o[1],i):r?[e,n]:null},i}function yB(t){var e=0,n=t.children,r=n&&n.length;if(r)for(;--r>=0;)e+=n[r].value;else e=1;t.value=e}function So(t,e){t instanceof Map?(t=[void 0,t],void 0===e&&(e=LB)):void 0===e&&(e=HB);for(var r,o,s,a,l,n=new Oo(t),i=[n];r=i.pop();)if((s=e(r.data))&&(l=(s=Array.from(s)).length))for(r.children=s,a=l-1;a>=0;--a)i.push(o=s[a]=new Oo(s[a])),o.parent=r,o.depth=r.depth+1;return n.eachBefore(NB)}function HB(t){return t.children}function LB(t){return Array.isArray(t)?t[1]:null}function IB(t){void 0!==t.data.value&&(t.value=t.data.value),t.data=t.data.data}function NB(t){var e=0;do{t.height=e}while((t=t.parent)&&t.height<++e)}function Oo(t){this.data=t,this.depth=this.height=0,this.parent=null}function S_(t){if("function"!=typeof t)throw new Error;return t}function Er(){return 0}function ci(t){return function(){return t}}b_.invert=function(t,e){for(var s,n=e,r=n*n,i=r*r*r,o=0;o<12&&(i=(r=(n-=s=(n*(To+xo*r+i*(bo+Eo*r))-e)/(To+3*xo*r+i*(7*bo+9*Eo*r)))*n)*r*r,!(Oe(s)<1e-12));++o);return[ol*t*(To+3*xo*r+i*(7*bo+9*Eo*r))/ke(n),kn(Te(n)/ol)]},E_.invert=function(t,e){var i,n=e,r=25;do{var o=n*n,s=o*o;n-=i=(n*(1.007226+o*(.015085+s*(.028874*o-.044475-.005916*s)))-e)/(1.007226+o*(.045255+s*(.259866*o-.311325-.005916*11*s)))}while(Oe(i)>Ae&&--r>0);return[t/(.8707+(o=n*n)*(o*(o*o*o*(.003971-.001529*o)-.013791)-.131979)),n]},Oo.prototype=So.prototype={constructor:Oo,count:function CB(){return this.eachAfter(yB)},each:function TB(t,e){let n=-1;for(const r of this)t.call(e,r,++n,this);return this},eachAfter:function bB(t,e){for(var o,s,a,n=this,r=[n],i=[],l=-1;n=r.pop();)if(i.push(n),o=n.children)for(s=0,a=o.length;s<a;++s)r.push(o[s]);for(;n=i.pop();)t.call(e,n,++l,this);return this},eachBefore:function xB(t,e){for(var i,o,n=this,r=[n],s=-1;n=r.pop();)if(t.call(e,n,++s,this),i=n.children)for(o=i.length-1;o>=0;--o)r.push(i[o]);return this},find:function EB(t,e){let n=-1;for(const r of this)if(t.call(e,r,++n,this))return r},sum:function SB(t){return this.eachAfter(function(e){for(var n=+t(e.data)||0,r=e.children,i=r&&r.length;--i>=0;)n+=r[i].value;e.value=n})},sort:function OB(t){return this.eachBefore(function(e){e.children&&e.children.sort(t)})},path:function wB(t){for(var e=this,n=function FB(t,e){if(t===e)return t;var n=t.ancestors(),r=e.ancestors(),i=null;for(t=n.pop(),e=r.pop();t===e;)i=t,t=n.pop(),e=r.pop();return i}(e,t),r=[e];e!==n;)e=e.parent,r.push(e);for(var i=r.length;t!==n;)r.splice(i,0,t),t=t.parent;return r},ancestors:function MB(){for(var t=this,e=[t];t=t.parent;)e.push(t);return e},descendants:function AB(){return Array.from(this)},leaves:function kB(){var t=[];return this.eachBefore(function(e){e.children||t.push(e)}),t},links:function BB(){var t=this,e=[];return t.each(function(n){n!==t&&e.push({source:n.parent,target:n})}),e},copy:function DB(){return So(this).eachBefore(IB)},[Symbol.iterator]:function*RB(){var e,r,i,o,t=this,n=[t];do{for(e=n.reverse(),n=[];t=e.pop();)if(yield t,r=t.children)for(i=0,o=r.length;i<o;++i)n.push(r[i])}while(n.length)}};const VB=1664525,PB=1013904223,O_=4294967296;function zB(t,e){var n,r;if(bh(e,t))return[e];for(n=0;n<t.length;++n)if(sl(e,t[n])&&bh(wo(t[n],e),t))return[t[n],e];for(n=0;n<t.length-1;++n)for(r=n+1;r<t.length;++r)if(sl(wo(t[n],t[r]),e)&&sl(wo(t[n],e),t[r])&&sl(wo(t[r],e),t[n])&&bh(F_(t[n],t[r],e),t))return[t[n],t[r],e];throw new Error}function sl(t,e){var n=t.r-e.r,r=e.x-t.x,i=e.y-t.y;return n<0||n*n<r*r+i*i}function w_(t,e){var n=t.r-e.r+1e-9*Math.max(t.r,e.r,1),r=e.x-t.x,i=e.y-t.y;return n>0&&n*n>r*r+i*i}function bh(t,e){for(var n=0;n<e.length;++n)if(!w_(t,e[n]))return!1;return!0}function KB(t){switch(t.length){case 1:return function qB(t){return{x:t.x,y:t.y,r:t.r}}(t[0]);case 2:return wo(t[0],t[1]);case 3:return F_(t[0],t[1],t[2])}}function wo(t,e){var n=t.x,r=t.y,i=t.r,o=e.x,s=e.y,a=e.r,l=o-n,c=s-r,u=a-i,d=Math.sqrt(l*l+c*c);return{x:(n+o+l/d*u)/2,y:(r+s+c/d*u)/2,r:(d+i+a)/2}}function F_(t,e,n){var r=t.x,i=t.y,o=t.r,s=e.x,a=e.y,l=e.r,c=n.x,u=n.y,d=n.r,h=r-s,p=r-c,m=i-a,_=i-u,f=l-o,v=d-o,C=r*r+i*i-o*o,x=C-s*s-a*a+l*l,b=C-c*c-u*u+d*d,T=p*m-h*_,S=(m*b-_*x)/(2*T)-r,M=(_*f-m*v)/T,D=(p*x-h*b)/(2*T)-i,k=(h*v-p*f)/T,H=M*M+k*k-1,F=2*(o+S*M+D*k),P=S*S+D*D-o*o,N=-(Math.abs(H)>1e-6?(F+Math.sqrt(F*F-4*H*P))/(2*H):P/F);return{x:r+S+M*N,y:i+D+k*N,r:N}}function M_(t,e,n){var i,o,a,l,r=t.x-e.x,s=t.y-e.y,c=r*r+s*s;c?(o=e.r+n.r,o*=o,l=t.r+n.r,o>(l*=l)?(i=(c+l-o)/(2*c),a=Math.sqrt(Math.max(0,l/c-i*i)),n.x=t.x-i*r-a*s,n.y=t.y-i*s+a*r):(i=(c+o-l)/(2*c),a=Math.sqrt(Math.max(0,o/c-i*i)),n.x=e.x+i*r-a*s,n.y=e.y+i*s+a*r)):(n.x=e.x+n.r,n.y=e.y)}function A_(t,e){var n=t.r+e.r-1e-6,r=e.x-t.x,i=e.y-t.y;return n>0&&n*n>r*r+i*i}function k_(t){var e=t._,n=t.next._,r=e.r+n.r,i=(e.x*n.r+n.x*e.r)/r,o=(e.y*n.r+n.y*e.r)/r;return i*i+o*o}function al(t){this._=t,this.next=null,this.previous=null}function YB(t,e){if(!(o=(t=function jB(t){return"object"==typeof t&&"length"in t?t:Array.from(t)}(t)).length))return 0;var n,r,i,o,s,a,l,c,u,d,h;if((n=t[0]).x=0,n.y=0,!(o>1))return n.r;if(r=t[1],n.x=-r.r,r.x=n.r,r.y=0,!(o>2))return n.r+r.r;M_(r,n,i=t[2]),n=new al(n),r=new al(r),i=new al(i),n.next=i.previous=r,r.next=n.previous=i,i.next=r.previous=n;e:for(l=3;l<o;++l){M_(n._,r._,i=t[l]),i=new al(i),c=r.next,u=n.previous,d=r._.r,h=n._.r;do{if(d<=h){if(A_(c._,i._)){r=c,n.next=r,r.previous=n,--l;continue e}d+=c._.r,c=c.next}else{if(A_(u._,i._)){(n=u).next=r,r.previous=n,--l;continue e}h+=u._.r,u=u.previous}}while(c!==u.next);for(i.previous=n,i.next=r,n.next=r.previous=r=i,s=k_(n);(i=i.next)!==r;)(a=k_(i))<s&&(n=i,s=a);r=n.next}for(n=[r._],i=r;(i=i.next)!==r;)n.push(i._);for(i=function GB(t,e){for(var o,s,n=0,r=(t=function $B(t,e){let r,i,n=t.length;for(;n;)i=e()*n--|0,r=t[n],t[n]=t[i],t[i]=r;return t}(Array.from(t),e)).length,i=[];n<r;)o=t[n],s&&w_(s,o)?++n:(s=KB(i=zB(i,o)),n=0);return s}(n,e),l=0;l<o;++l)(n=t[l]).x-=i.x,n.y-=i.y;return i.r}function XB(t){return Math.sqrt(t.value)}function ZB(){var t=null,e=1,n=1,r=Er;function i(o){const s=function UB(){let t=1;return()=>(t=(VB*t+PB)%O_)/O_}();return o.x=e/2,o.y=n/2,t?o.eachBefore(B_(t)).eachAfter(Eh(r,.5,s)).eachBefore(R_(1)):o.eachBefore(B_(XB)).eachAfter(Eh(Er,1,s)).eachAfter(Eh(r,o.r/Math.min(e,n),s)).eachBefore(R_(Math.min(e,n)/(2*o.r))),o}return i.radius=function(o){return arguments.length?(t=function WB(t){return null==t?null:S_(t)}(o),i):t},i.size=function(o){return arguments.length?(e=+o[0],n=+o[1],i):[e,n]},i.padding=function(o){return arguments.length?(r="function"==typeof o?o:ci(+o),i):r},i}function B_(t){return function(e){e.children||(e.r=Math.max(0,+t(e)||0))}}function Eh(t,e,n){return function(r){if(i=r.children){var i,o,l,s=i.length,a=t(r)*e||0;if(a)for(o=0;o<s;++o)i[o].r+=a;if(l=YB(i,n),a)for(o=0;o<s;++o)i[o].r-=a;r.r=l+a}}}function R_(t){return function(e){var n=e.parent;e.r*=t,n&&(e.x=n.x+t*e.x,e.y=n.y+t*e.y)}}function QB(t){t.x0=Math.round(t.x0),t.y0=Math.round(t.y0),t.x1=Math.round(t.x1),t.y1=Math.round(t.y1)}function JB(t,e,n,r,i){for(var s,o=t.children,a=-1,l=o.length,c=t.value&&(r-e)/t.value;++a<l;)(s=o[a]).y0=n,s.y1=i,s.x0=e,s.x1=e+=s.value*c}function eR(t,e){return t.parent===e.parent?1:2}function Sh(t){var e=t.children;return e?e[0]:t.t}function Oh(t){var e=t.children;return e?e[e.length-1]:t.t}function tR(t,e,n){var r=n/(e.i-t.i);e.c-=r,e.s+=n,t.c+=r,e.z+=n,e.m+=n}function rR(t,e,n){return t.a.parent===e.parent?t.a:n}function ll(t,e){this._=t,this.parent=null,this.children=null,this.A=null,this.a=this,this.z=0,this.m=0,this.c=0,this.s=0,this.t=null,this.i=e}function oR(){var t=eR,e=1,n=1,r=null;function i(c){var u=function iR(t){for(var n,i,o,s,a,e=new ll(t,0),r=[e];n=r.pop();)if(o=n._.children)for(n.children=new Array(a=o.length),s=a-1;s>=0;--s)r.push(i=n.children[s]=new ll(o[s],s)),i.parent=n;return(e.parent=new ll(null,0)).children=[e],e}(c);if(u.eachAfter(o),u.parent.m=-u.z,u.eachBefore(s),r)c.eachBefore(l);else{var d=c,h=c,p=c;c.eachBefore(function(C){C.x<d.x&&(d=C),C.x>h.x&&(h=C),C.depth>p.depth&&(p=C)});var m=d===h?1:t(d,h)/2,_=m-d.x,f=e/(h.x+m+_),v=n/(p.depth||1);c.eachBefore(function(C){C.x=(C.x+_)*f,C.y=C.depth*v})}return c}function o(c){var u=c.children,d=c.parent.children,h=c.i?d[c.i-1]:null;if(u){!function nR(t){for(var o,e=0,n=0,r=t.children,i=r.length;--i>=0;)(o=r[i]).z+=e,o.m+=e,e+=o.s+(n+=o.c)}(c);var p=(u[0].z+u[u.length-1].z)/2;h?(c.z=h.z+t(c._,h._),c.m=c.z-p):c.z=p}else h&&(c.z=h.z+t(c._,h._));c.parent.A=function a(c,u,d){if(u){for(var b,h=c,p=c,m=u,_=h.parent.children[0],f=h.m,v=p.m,C=m.m,x=_.m;m=Oh(m),h=Sh(h),m&&h;)_=Sh(_),(p=Oh(p)).a=c,(b=m.z+C-h.z-f+t(m._,h._))>0&&(tR(rR(m,c,d),c,b),f+=b,v+=b),C+=m.m,f+=h.m,x+=_.m,v+=p.m;m&&!Oh(p)&&(p.t=m,p.m+=C-v),h&&!Sh(_)&&(_.t=h,_.m+=f-x,d=c)}return d}(c,h,c.parent.A||d[0])}function s(c){c._.x=c.z+c.parent.m,c.m+=c.parent.m}function l(c){c.x*=e,c.y=c.depth*n}return i.separation=function(c){return arguments.length?(t=c,i):t},i.size=function(c){return arguments.length?(r=!1,e=+c[0],n=+c[1],i):r?null:[e,n]},i.nodeSize=function(c){return arguments.length?(r=!0,e=+c[0],n=+c[1],i):r?[e,n]:null},i}function sR(t,e,n,r,i){for(var s,o=t.children,a=-1,l=o.length,c=t.value&&(i-n)/t.value;++a<l;)(s=o[a]).x0=e,s.x1=r,s.y0=n,s.y1=n+=s.value*c}ll.prototype=Object.create(Oo.prototype);const cR=function t(e){function n(r,i,o,s,a){!function lR(t,e,n,r,i,o){for(var l,c,p,m,f,v,C,x,b,T,S,s=[],a=e.children,u=0,d=0,h=a.length,_=e.value;u<h;){p=i-n,m=o-r;do{f=a[d++].value}while(!f&&d<h);for(v=C=f,S=f*f*(T=Math.max(m/p,p/m)/(_*t)),b=Math.max(C/S,S/v);d<h;++d){if(f+=c=a[d].value,c<v&&(v=c),c>C&&(C=c),S=f*f*T,(x=Math.max(C/S,S/v))>b){f-=c;break}b=x}s.push(l={value:f,dice:p<m,children:a.slice(u,d)}),l.dice?JB(l,n,r,i,_?r+=m*f/_:o):sR(l,n,r,_?n+=p*f/_:i,o),_-=f,u=d}return s}(e,r,i,o,s,a)}return n.ratio=function(r){return t((r=+r)>1?r:1)},n}((1+Math.sqrt(5))/2);function cl(t){let e=3;return t.digits=function(n){if(!arguments.length)return e;if(null==n)e=null;else{const r=Math.floor(n);if(!(r>=0))throw new RangeError(`invalid digits: ${n}`);e=r}return t},()=>new eh(e)}function hR(t){return t.innerRadius}function dR(t){return t.outerRadius}function pR(t){return t.startAngle}function mR(t){return t.endAngle}function gR(t){return t&&t.padAngle}function ul(t,e,n,r,i,o,s){var a=t-n,l=e-r,c=(s?o:-o)/ei(a*a+l*l),u=c*l,d=-c*a,h=t+u,p=e+d,m=n+u,_=r+d,f=(h+m)/2,v=(p+_)/2,C=m-h,x=_-p,b=C*C+x*x,T=i-o,S=h*_-m*p,M=(x<0?-1:1)*ei(QM(0,T*T*b-S*S)),D=(S*x-C*M)/b,k=(-S*C-x*M)/b,H=(S*x+C*M)/b,F=(-S*C+x*M)/b,P=D-f,N=k-v,V=H-f,E=F-v;return P*P+N*N>V*V+E*E&&(D=H,k=F),{cx:D,cy:k,x01:-u,y01:-d,x11:D*(i/T-1),y11:k*(i/T-1)}}function Fo(){var t=hR,e=dR,n=me(0),r=null,i=pR,o=mR,s=gR,a=null,l=cl(c);function c(){var u,d,h=+t.apply(this,arguments),p=+e.apply(this,arguments),m=i.apply(this,arguments)-ka,_=o.apply(this,arguments)-ka,f=Wg(_-m),v=_>m;if(a||(a=u=l()),p<h&&(d=p,p=h,h=d),p>nt)if(f>Ba-nt)a.moveTo(p*yr(m),p*cn(m)),a.arc(0,0,p,m,_,!v),h>nt&&(a.moveTo(h*yr(_),h*cn(_)),a.arc(0,0,h,_,m,v));else{var N,V,C=m,x=_,b=m,T=_,S=f,M=f,D=s.apply(this,arguments)/2,k=D>nt&&(r?+r.apply(this,arguments):ei(h*h+p*p)),H=cu(Wg(p-h)/2,+n.apply(this,arguments)),F=H,P=H;if(k>nt){var E=Vg(k/h*cn(D)),w=Vg(k/p*cn(D));(S-=2*E)>nt?(b+=E*=v?1:-1,T-=E):(S=0,b=T=(m+_)/2),(M-=2*w)>nt?(C+=w*=v?1:-1,x-=w):(M=0,C=x=(m+_)/2)}var B=p*yr(C),R=p*cn(C),W=h*yr(T),Z=h*cn(T);if(H>nt){var J,z=p*yr(x),G=p*cn(x),Y=h*yr(b),ue=h*cn(b);if(f<ho)if(J=function fR(t,e,n,r,i,o,s,a){var l=n-t,c=r-e,u=s-i,d=a-o,h=d*l-u*c;if(!(h*h<nt))return[t+(h=(u*(e-o)-d*(t-i))/h)*l,e+h*c]}(B,R,Y,ue,z,G,W,Z)){var q=B-J[0],te=R-J[1],he=z-J[0],$=G-J[1],K=1/cn(function JM(t){return t>1?0:t<-1?ho:Math.acos(t)}((q*he+te*$)/(ei(q*q+te*te)*ei(he*he+$*$)))/2),X=ei(J[0]*J[0]+J[1]*J[1]);F=cu(H,(h-X)/(K-1)),P=cu(H,(p-X)/(K+1))}else F=P=0}M>nt?P>nt?(N=ul(Y,ue,B,R,p,P,v),V=ul(z,G,W,Z,p,P,v),a.moveTo(N.cx+N.x01,N.cy+N.y01),P<H?a.arc(N.cx,N.cy,P,tt(N.y01,N.x01),tt(V.y01,V.x01),!v):(a.arc(N.cx,N.cy,P,tt(N.y01,N.x01),tt(N.y11,N.x11),!v),a.arc(0,0,p,tt(N.cy+N.y11,N.cx+N.x11),tt(V.cy+V.y11,V.cx+V.x11),!v),a.arc(V.cx,V.cy,P,tt(V.y11,V.x11),tt(V.y01,V.x01),!v))):(a.moveTo(B,R),a.arc(0,0,p,C,x,!v)):a.moveTo(B,R),h>nt&&S>nt?F>nt?(N=ul(W,Z,z,G,h,-F,v),V=ul(B,R,Y,ue,h,-F,v),a.lineTo(N.cx+N.x01,N.cy+N.y01),F<H?a.arc(N.cx,N.cy,F,tt(N.y01,N.x01),tt(V.y01,V.x01),!v):(a.arc(N.cx,N.cy,F,tt(N.y01,N.x01),tt(N.y11,N.x11),!v),a.arc(0,0,h,tt(N.cy+N.y11,N.cx+N.x11),tt(V.cy+V.y11,V.cx+V.x11),v),a.arc(V.cx,V.cy,F,tt(V.y11,V.x11),tt(V.y01,V.x01),!v))):a.arc(0,0,h,T,b,v):a.lineTo(W,Z)}else a.moveTo(0,0);if(a.closePath(),u)return a=null,u+""||null}return c.centroid=function(){var u=(+t.apply(this,arguments)+ +e.apply(this,arguments))/2,d=(+i.apply(this,arguments)+ +o.apply(this,arguments))/2-ho/2;return[yr(d)*u,cn(d)*u]},c.innerRadius=function(u){return arguments.length?(t="function"==typeof u?u:me(+u),c):t},c.outerRadius=function(u){return arguments.length?(e="function"==typeof u?u:me(+u),c):e},c.cornerRadius=function(u){return arguments.length?(n="function"==typeof u?u:me(+u),c):n},c.padRadius=function(u){return arguments.length?(r=null==u?null:"function"==typeof u?u:me(+u),c):r},c.startAngle=function(u){return arguments.length?(i="function"==typeof u?u:me(+u),c):i},c.endAngle=function(u){return arguments.length?(o="function"==typeof u?u:me(+u),c):o},c.padAngle=function(u){return arguments.length?(s="function"==typeof u?u:me(+u),c):s},c.context=function(u){return arguments.length?(a=u??null,c):a},c}function wh(t){return t[0]}function Fh(t){return t[1]}function Mo(t,e){var n=me(!0),r=null,i=Ra,o=null,s=cl(a);function a(l){var c,d,p,u=(l=Sa(l)).length,h=!1;for(null==r&&(o=i(p=s())),c=0;c<=u;++c)!(c<u&&n(d=l[c],c,l))===h&&((h=!h)?o.lineStart():o.lineEnd()),h&&o.point(+t(d,c,l),+e(d,c,l));if(p)return o=null,p+""||null}return t="function"==typeof t?t:void 0===t?wh:me(t),e="function"==typeof e?e:void 0===e?Fh:me(e),a.x=function(l){return arguments.length?(t="function"==typeof l?l:me(+l),a):t},a.y=function(l){return arguments.length?(e="function"==typeof l?l:me(+l),a):e},a.defined=function(l){return arguments.length?(n="function"==typeof l?l:me(!!l),a):n},a.curve=function(l){return arguments.length?(i=l,null!=r&&(o=i(r)),a):i},a.context=function(l){return arguments.length?(null==l?r=o=null:o=i(r=l),a):r},a}function Mh(t,e,n){var r=null,i=me(!0),o=null,s=Ra,a=null,l=cl(c);function c(d){var h,p,m,f,C,_=(d=Sa(d)).length,v=!1,x=new Array(_),b=new Array(_);for(null==o&&(a=s(C=l())),h=0;h<=_;++h){if(!(h<_&&i(f=d[h],h,d))===v)if(v=!v)p=h,a.areaStart(),a.lineStart();else{for(a.lineEnd(),a.lineStart(),m=h-1;m>=p;--m)a.point(x[m],b[m]);a.lineEnd(),a.areaEnd()}v&&(x[h]=+t(f,h,d),b[h]=+e(f,h,d),a.point(r?+r(f,h,d):x[h],n?+n(f,h,d):b[h]))}if(C)return a=null,C+""||null}function u(){return Mo().defined(i).curve(s).context(o)}return t="function"==typeof t?t:void 0===t?wh:me(+t),e="function"==typeof e?e:me(void 0===e?0:+e),n="function"==typeof n?n:void 0===n?Fh:me(+n),c.x=function(d){return arguments.length?(t="function"==typeof d?d:me(+d),r=null,c):t},c.x0=function(d){return arguments.length?(t="function"==typeof d?d:me(+d),c):t},c.x1=function(d){return arguments.length?(r=null==d?null:"function"==typeof d?d:me(+d),c):r},c.y=function(d){return arguments.length?(e="function"==typeof d?d:me(+d),n=null,c):e},c.y0=function(d){return arguments.length?(e="function"==typeof d?d:me(+d),c):e},c.y1=function(d){return arguments.length?(n=null==d?null:"function"==typeof d?d:me(+d),c):n},c.lineX0=c.lineY0=function(){return u().x(t).y(e)},c.lineY1=function(){return u().x(t).y(n)},c.lineX1=function(){return u().x(r).y(e)},c.defined=function(d){return arguments.length?(i="function"==typeof d?d:me(!!d),c):i},c.curve=function(d){return arguments.length?(s=d,null!=o&&(a=s(o)),c):s},c.context=function(d){return arguments.length?(null==d?o=a=null:a=s(o=d),c):o},c}function _R(t,e){return e<t?-1:e>t?1:e>=t?0:NaN}function vR(t){return t}var CR=H_(Ra);function D_(t){this._curve=t}function H_(t){function e(n){return new D_(t(n))}return e._curve=t,e}function xR(){return function TR(t){var e=t.curve;return t.angle=t.x,delete t.x,t.radius=t.y,delete t.y,t.curve=function(n){return arguments.length?e(H_(n)):e()._curve},t}(Mo().curve(CR))}D_.prototype={areaStart:function(){this._curve.areaStart()},areaEnd:function(){this._curve.areaEnd()},lineStart:function(){this._curve.lineStart()},lineEnd:function(){this._curve.lineEnd()},point:function(t,e){this._curve.point(e*Math.sin(t),e*-Math.cos(t))}};class bR{constructor(e,n){this._context=e,this._x=n}areaStart(){this._line=0}areaEnd(){this._line=NaN}lineStart(){this._point=0}lineEnd(){(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line}point(e,n){switch(e=+e,n=+n,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,n):this._context.moveTo(e,n);break;case 1:this._point=2;default:this._x?this._context.bezierCurveTo(this._x0=(this._x0+e)/2,this._y0,this._x0,n,e,n):this._context.bezierCurveTo(this._x0,this._y0=(this._y0+n)/2,e,this._y0,e,n)}this._x0=e,this._y0=n}}function ER(t){return new bR(t,!0)}function SR(t){return t.source}function OR(t){return t.target}function FR(){return function wR(t){let e=SR,n=OR,r=wh,i=Fh,o=null,s=null,a=cl(l);function l(){let c;const u=zw.call(arguments),d=e.apply(this,u),h=n.apply(this,u);if(null==o&&(s=t(c=a())),s.lineStart(),u[0]=d,s.point(+r.apply(this,u),+i.apply(this,u)),u[0]=h,s.point(+r.apply(this,u),+i.apply(this,u)),s.lineEnd(),c)return s=null,c+""||null}return l.source=function(c){return arguments.length?(e=c,l):e},l.target=function(c){return arguments.length?(n=c,l):n},l.x=function(c){return arguments.length?(r="function"==typeof c?c:me(+c),l):r},l.y=function(c){return arguments.length?(i="function"==typeof c?c:me(+c),l):i},l.context=function(c){return arguments.length?(null==c?o=s=null:s=t(o=c),l):o},l}(ER)}class fe{constructor(e,n,r){if(this.type="",this.renderType=re.HTML,this.id="",this.parent=void 0,this.configs={},this.model=e,this.services=n,r&&(this.configs=r,this.configs.id)){const i=y(this.model.getOptions(),"style","prefix");this.id=`${i}--${this.configs.id}`}this.parent||this.setParent(L(this.services.domUtils.getMainContainer()))}init(){}render(e=!0){console.error("Error: Component did not provide the required render function.")}destroy(){}setModel(e){this.model=e}setServices(e){this.services=e}setParent(e){var n;const r=this.parent;if(this.parent=e,(!r||r.node()!==e.node())&&this.type){const i=y(this.model.getOptions(),"style","prefix");null==(n=this.parent)||n.classed(`${st}--${i}--${this.type}`,!0),r&&r.classed(`${st}--${i}--${this.type}`,!1)}}getParent(){return this.parent}getComponentContainer(e={ariaLabel:null,isPresentational:!1,withinChartClip:!1}){if(this.type){const n=y(this.model.getOptions(),"style","prefix"),r=this.id?`#${this.id}`:"",i=I.appendOrSelect(this.parent,`${this.renderType===re.SVG?"svg":"div"}${r}.${st}--${n}--${this.type}`);if(e.ariaLabel&&i.attr("aria-label",e.ariaLabel),e.isPresentational&&i.attr("role","presentation"),e.withinChartClip){const o=this.model.get("chartClipId");if(o){const s=L(`#${o}`).select("rect");0!==s.size()&&parseFloat(s.attr("height"))>0&&i.attr("clip-path",`url(#${o})`)}}return i.attr("width","100%").attr("height","100%")}return this.parent}getOptions(){return this.configs.options?se({},this.model.getOptions(),this.configs.options):this.model.getOptions()}}
/*! @license DOMPurify 3.2.6 | (c) Cure53 and other contributors | Released under the Apache license 2.0 and Mozilla Public License 2.0 | github.com/cure53/DOMPurify/blob/3.2.6/LICENSE */const{entries:L_,setPrototypeOf:I_,isFrozen:MR,getPrototypeOf:AR,getOwnPropertyDescriptor:kR}=Object;let{freeze:ct,seal:Nt,create:N_}=Object,{apply:Ah,construct:kh}=typeof Reflect<"u"&&Reflect;ct||(ct=function(t){return t}),Nt||(Nt=function(t){return t}),Ah||(Ah=function(t,e,n){return t.apply(e,n)}),kh||(kh=function(t,e){return new t(...e)});const hl=ht(Array.prototype.forEach),BR=ht(Array.prototype.lastIndexOf),W_=ht(Array.prototype.pop),Ao=ht(Array.prototype.push),RR=ht(Array.prototype.splice),dl=ht(String.prototype.toLowerCase),Bh=ht(String.prototype.toString),V_=ht(String.prototype.match),ko=ht(String.prototype.replace),DR=ht(String.prototype.indexOf),HR=ht(String.prototype.trim),Zt=ht(Object.prototype.hasOwnProperty),ut=ht(RegExp.prototype.test),Bo=function LR(t){return function(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];return kh(t,n)}}(TypeError);function ht(t){return function(e){e instanceof RegExp&&(e.lastIndex=0);for(var n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];return Ah(t,e,r)}}function _e(t,e){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:dl;I_&&I_(t,null);let r=e.length;for(;r--;){let i=e[r];if("string"==typeof i){const o=n(i);o!==i&&(MR(e)||(e[r]=o),i=o)}t[i]=!0}return t}function IR(t){for(let e=0;e<t.length;e++)Zt(t,e)||(t[e]=null);return t}function Rn(t){const e=N_(null);for(const[n,r]of L_(t))Zt(t,n)&&(Array.isArray(r)?e[n]=IR(r):r&&"object"==typeof r&&r.constructor===Object?e[n]=Rn(r):e[n]=r);return e}function Ro(t,e){for(;null!==t;){const r=kR(t,e);if(r){if(r.get)return ht(r.get);if("function"==typeof r.value)return ht(r.value)}t=AR(t)}return function n(){return null}}const P_=ct(["a","abbr","acronym","address","area","article","aside","audio","b","bdi","bdo","big","blink","blockquote","body","br","button","canvas","caption","center","cite","code","col","colgroup","content","data","datalist","dd","decorator","del","details","dfn","dialog","dir","div","dl","dt","element","em","fieldset","figcaption","figure","font","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","img","input","ins","kbd","label","legend","li","main","map","mark","marquee","menu","menuitem","meter","nav","nobr","ol","optgroup","option","output","p","picture","pre","progress","q","rp","rt","ruby","s","samp","section","select","shadow","small","source","spacer","span","strike","strong","style","sub","summary","sup","table","tbody","td","template","textarea","tfoot","th","thead","time","tr","track","tt","u","ul","var","video","wbr"]),Rh=ct(["svg","a","altglyph","altglyphdef","altglyphitem","animatecolor","animatemotion","animatetransform","circle","clippath","defs","desc","ellipse","filter","font","g","glyph","glyphref","hkern","image","line","lineargradient","marker","mask","metadata","mpath","path","pattern","polygon","polyline","radialgradient","rect","stop","style","switch","symbol","text","textpath","title","tref","tspan","view","vkern"]),Dh=ct(["feBlend","feColorMatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feDropShadow","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence"]),NR=ct(["animate","color-profile","cursor","discard","font-face","font-face-format","font-face-name","font-face-src","font-face-uri","foreignobject","hatch","hatchpath","mesh","meshgradient","meshpatch","meshrow","missing-glyph","script","set","solidcolor","unknown","use"]),Hh=ct(["math","menclose","merror","mfenced","mfrac","mglyph","mi","mlabeledtr","mmultiscripts","mn","mo","mover","mpadded","mphantom","mroot","mrow","ms","mspace","msqrt","mstyle","msub","msup","msubsup","mtable","mtd","mtext","mtr","munder","munderover","mprescripts"]),WR=ct(["maction","maligngroup","malignmark","mlongdiv","mscarries","mscarry","msgroup","mstack","msline","msrow","semantics","annotation","annotation-xml","mprescripts","none"]),U_=ct(["#text"]),j_=ct(["accept","action","align","alt","autocapitalize","autocomplete","autopictureinpicture","autoplay","background","bgcolor","border","capture","cellpadding","cellspacing","checked","cite","class","clear","color","cols","colspan","controls","controlslist","coords","crossorigin","datetime","decoding","default","dir","disabled","disablepictureinpicture","disableremoteplayback","download","draggable","enctype","enterkeyhint","face","for","headers","height","hidden","high","href","hreflang","id","inputmode","integrity","ismap","kind","label","lang","list","loading","loop","low","max","maxlength","media","method","min","minlength","multiple","muted","name","nonce","noshade","novalidate","nowrap","open","optimum","pattern","placeholder","playsinline","popover","popovertarget","popovertargetaction","poster","preload","pubdate","radiogroup","readonly","rel","required","rev","reversed","role","rows","rowspan","spellcheck","scope","selected","shape","size","sizes","span","srclang","start","src","srcset","step","style","summary","tabindex","title","translate","type","usemap","valign","value","width","wrap","xmlns","slot"]),Lh=ct(["accent-height","accumulate","additive","alignment-baseline","amplitude","ascent","attributename","attributetype","azimuth","basefrequency","baseline-shift","begin","bias","by","class","clip","clippathunits","clip-path","clip-rule","color","color-interpolation","color-interpolation-filters","color-profile","color-rendering","cx","cy","d","dx","dy","diffuseconstant","direction","display","divisor","dur","edgemode","elevation","end","exponent","fill","fill-opacity","fill-rule","filter","filterunits","flood-color","flood-opacity","font-family","font-size","font-size-adjust","font-stretch","font-style","font-variant","font-weight","fx","fy","g1","g2","glyph-name","glyphref","gradientunits","gradienttransform","height","href","id","image-rendering","in","in2","intercept","k","k1","k2","k3","k4","kerning","keypoints","keysplines","keytimes","lang","lengthadjust","letter-spacing","kernelmatrix","kernelunitlength","lighting-color","local","marker-end","marker-mid","marker-start","markerheight","markerunits","markerwidth","maskcontentunits","maskunits","max","mask","media","method","mode","min","name","numoctaves","offset","operator","opacity","order","orient","orientation","origin","overflow","paint-order","path","pathlength","patterncontentunits","patterntransform","patternunits","points","preservealpha","preserveaspectratio","primitiveunits","r","rx","ry","radius","refx","refy","repeatcount","repeatdur","restart","result","rotate","scale","seed","shape-rendering","slope","specularconstant","specularexponent","spreadmethod","startoffset","stddeviation","stitchtiles","stop-color","stop-opacity","stroke-dasharray","stroke-dashoffset","stroke-linecap","stroke-linejoin","stroke-miterlimit","stroke-opacity","stroke","stroke-width","style","surfacescale","systemlanguage","tabindex","tablevalues","targetx","targety","transform","transform-origin","text-anchor","text-decoration","text-rendering","textlength","type","u1","u2","unicode","values","viewbox","visibility","version","vert-adv-y","vert-origin-x","vert-origin-y","width","word-spacing","wrap","writing-mode","xchannelselector","ychannelselector","x","x1","x2","xmlns","y","y1","y2","z","zoomandpan"]),$_=ct(["accent","accentunder","align","bevelled","close","columnsalign","columnlines","columnspan","denomalign","depth","dir","display","displaystyle","encoding","fence","frame","height","href","id","largeop","length","linethickness","lspace","lquote","mathbackground","mathcolor","mathsize","mathvariant","maxsize","minsize","movablelimits","notation","numalign","open","rowalign","rowlines","rowspacing","rowspan","rspace","rquote","scriptlevel","scriptminsize","scriptsizemultiplier","selection","separator","separators","stretchy","subscriptshift","supscriptshift","symmetric","voffset","width","xmlns"]),pl=ct(["xlink:href","xml:id","xlink:title","xml:space","xmlns:xlink"]),VR=Nt(/\{\{[\w\W]*|[\w\W]*\}\}/gm),PR=Nt(/<%[\w\W]*|[\w\W]*%>/gm),UR=Nt(/\$\{[\w\W]*/gm),jR=Nt(/^data-[\-\w.\u00B7-\uFFFF]+$/),$R=Nt(/^aria-[\-\w]+$/),G_=Nt(/^(?:(?:(?:f|ht)tps?|mailto|tel|callto|sms|cid|xmpp|matrix):|[^a-z]|[a-z+.\-]+(?:[^a-z+.\-:]|$))/i),GR=Nt(/^(?:\w+script|data):/i),zR=Nt(/[\u0000-\u0020\u00A0\u1680\u180E\u2000-\u2029\u205F\u3000]/g),z_=Nt(/^html$/i),KR=Nt(/^[a-z][.\w]*(-[.\w]+)+$/i);var K_=Object.freeze({__proto__:null,ARIA_ATTR:$R,ATTR_WHITESPACE:zR,CUSTOM_ELEMENT:KR,DATA_ATTR:jR,DOCTYPE_NAME:z_,ERB_EXPR:PR,IS_ALLOWED_URI:G_,IS_SCRIPT_OR_DATA:GR,MUSTACHE_EXPR:VR,TMPLIT_EXPR:UR});const Do_element=1,Do_text=3,Do_progressingInstruction=7,Do_comment=8,Do_document=9;var Ih=function Y_(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:typeof window>"u"?null:window;const e=A=>Y_(A);if(e.version="3.2.6",e.removed=[],!t||!t.document||t.document.nodeType!==Do_document||!t.Element)return e.isSupported=!1,e;let{document:n}=t;const r=n,i=r.currentScript,{DocumentFragment:o,HTMLTemplateElement:s,Node:a,Element:l,NodeFilter:c,NamedNodeMap:u=t.NamedNodeMap||t.MozNamedAttrMap,HTMLFormElement:d,DOMParser:h,trustedTypes:p}=t,m=l.prototype,_=Ro(m,"cloneNode"),f=Ro(m,"remove"),v=Ro(m,"nextSibling"),C=Ro(m,"childNodes"),x=Ro(m,"parentNode");if("function"==typeof s){const A=n.createElement("template");A.content&&A.content.ownerDocument&&(n=A.content.ownerDocument)}let b,T="";const{implementation:S,createNodeIterator:M,createDocumentFragment:D,getElementsByTagName:k}=n,{importNode:H}=r;let F={afterSanitizeAttributes:[],afterSanitizeElements:[],afterSanitizeShadowDOM:[],beforeSanitizeAttributes:[],beforeSanitizeElements:[],beforeSanitizeShadowDOM:[],uponSanitizeAttribute:[],uponSanitizeElement:[],uponSanitizeShadowNode:[]};e.isSupported="function"==typeof L_&&"function"==typeof x&&S&&void 0!==S.createHTMLDocument;const{MUSTACHE_EXPR:P,ERB_EXPR:N,TMPLIT_EXPR:V,DATA_ATTR:E,ARIA_ATTR:w,IS_SCRIPT_OR_DATA:B,ATTR_WHITESPACE:R,CUSTOM_ELEMENT:W}=K_;let{IS_ALLOWED_URI:Z}=K_,z=null;const G=_e({},[...P_,...Rh,...Dh,...Hh,...U_]);let Y=null;const ue=_e({},[...j_,...Lh,...$_,...pl]);let J=Object.seal(N_(null,{tagNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},attributeNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},allowCustomizedBuiltInElements:{writable:!0,configurable:!1,enumerable:!0,value:!1}})),q=null,te=null,he=!0,$=!0,K=!1,X=!0,U=!1,pe=!0,ae=!1,Ie=!1,Pe=!1,ie=!1,be=!1,Wt=!1,Ft=!0,vs=!1,wr=!0,en=!1,yi={},Ci=null;const p0=_e({},["annotation-xml","audio","colgroup","desc","foreignobject","head","iframe","math","mi","mn","mo","ms","mtext","noembed","noframes","noscript","plaintext","script","style","svg","template","thead","title","video","xmp"]);let m0=null;const g0=_e({},["audio","video","img","source","image","track"]);let ud=null;const f0=_e({},["alt","class","for","id","label","name","pattern","placeholder","role","summary","title","value","style","xmlns"]),Bl="http://www.w3.org/1998/Math/MathML",Rl="http://www.w3.org/2000/svg",Ln="http://www.w3.org/1999/xhtml";let Ti=Ln,hd=!1,dd=null;const rV=_e({},[Bl,Rl,Ln],Bh);let Dl=_e({},["mi","mo","mn","ms","mtext"]),Hl=_e({},["annotation-xml"]);const iV=_e({},["title","style","font","a","script"]);let Cs=null;const oV=["application/xhtml+xml","text/html"];let Ze=null,xi=null;const aV=n.createElement("form"),_0=function(A){return A instanceof RegExp||A instanceof Function},pd=function(){let A=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(!xi||xi!==A){if((!A||"object"!=typeof A)&&(A={}),A=Rn(A),Cs=-1===oV.indexOf(A.PARSER_MEDIA_TYPE)?"text/html":A.PARSER_MEDIA_TYPE,Ze="application/xhtml+xml"===Cs?Bh:dl,z=Zt(A,"ALLOWED_TAGS")?_e({},A.ALLOWED_TAGS,Ze):G,Y=Zt(A,"ALLOWED_ATTR")?_e({},A.ALLOWED_ATTR,Ze):ue,dd=Zt(A,"ALLOWED_NAMESPACES")?_e({},A.ALLOWED_NAMESPACES,Bh):rV,ud=Zt(A,"ADD_URI_SAFE_ATTR")?_e(Rn(f0),A.ADD_URI_SAFE_ATTR,Ze):f0,m0=Zt(A,"ADD_DATA_URI_TAGS")?_e(Rn(g0),A.ADD_DATA_URI_TAGS,Ze):g0,Ci=Zt(A,"FORBID_CONTENTS")?_e({},A.FORBID_CONTENTS,Ze):p0,q=Zt(A,"FORBID_TAGS")?_e({},A.FORBID_TAGS,Ze):Rn({}),te=Zt(A,"FORBID_ATTR")?_e({},A.FORBID_ATTR,Ze):Rn({}),yi=!!Zt(A,"USE_PROFILES")&&A.USE_PROFILES,he=!1!==A.ALLOW_ARIA_ATTR,$=!1!==A.ALLOW_DATA_ATTR,K=A.ALLOW_UNKNOWN_PROTOCOLS||!1,X=!1!==A.ALLOW_SELF_CLOSE_IN_ATTR,U=A.SAFE_FOR_TEMPLATES||!1,pe=!1!==A.SAFE_FOR_XML,ae=A.WHOLE_DOCUMENT||!1,ie=A.RETURN_DOM||!1,be=A.RETURN_DOM_FRAGMENT||!1,Wt=A.RETURN_TRUSTED_TYPE||!1,Pe=A.FORCE_BODY||!1,Ft=!1!==A.SANITIZE_DOM,vs=A.SANITIZE_NAMED_PROPS||!1,wr=!1!==A.KEEP_CONTENT,en=A.IN_PLACE||!1,Z=A.ALLOWED_URI_REGEXP||G_,Ti=A.NAMESPACE||Ln,Dl=A.MATHML_TEXT_INTEGRATION_POINTS||Dl,Hl=A.HTML_INTEGRATION_POINTS||Hl,J=A.CUSTOM_ELEMENT_HANDLING||{},A.CUSTOM_ELEMENT_HANDLING&&_0(A.CUSTOM_ELEMENT_HANDLING.tagNameCheck)&&(J.tagNameCheck=A.CUSTOM_ELEMENT_HANDLING.tagNameCheck),A.CUSTOM_ELEMENT_HANDLING&&_0(A.CUSTOM_ELEMENT_HANDLING.attributeNameCheck)&&(J.attributeNameCheck=A.CUSTOM_ELEMENT_HANDLING.attributeNameCheck),A.CUSTOM_ELEMENT_HANDLING&&"boolean"==typeof A.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements&&(J.allowCustomizedBuiltInElements=A.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements),U&&($=!1),be&&(ie=!0),yi&&(z=_e({},U_),Y=[],!0===yi.html&&(_e(z,P_),_e(Y,j_)),!0===yi.svg&&(_e(z,Rh),_e(Y,Lh),_e(Y,pl)),!0===yi.svgFilters&&(_e(z,Dh),_e(Y,Lh),_e(Y,pl)),!0===yi.mathMl&&(_e(z,Hh),_e(Y,$_),_e(Y,pl))),A.ADD_TAGS&&(z===G&&(z=Rn(z)),_e(z,A.ADD_TAGS,Ze)),A.ADD_ATTR&&(Y===ue&&(Y=Rn(Y)),_e(Y,A.ADD_ATTR,Ze)),A.ADD_URI_SAFE_ATTR&&_e(ud,A.ADD_URI_SAFE_ATTR,Ze),A.FORBID_CONTENTS&&(Ci===p0&&(Ci=Rn(Ci)),_e(Ci,A.FORBID_CONTENTS,Ze)),wr&&(z["#text"]=!0),ae&&_e(z,["html","head","body"]),z.table&&(_e(z,["tbody"]),delete q.tbody),A.TRUSTED_TYPES_POLICY){if("function"!=typeof A.TRUSTED_TYPES_POLICY.createHTML)throw Bo('TRUSTED_TYPES_POLICY configuration option must provide a "createHTML" hook.');if("function"!=typeof A.TRUSTED_TYPES_POLICY.createScriptURL)throw Bo('TRUSTED_TYPES_POLICY configuration option must provide a "createScriptURL" hook.');b=A.TRUSTED_TYPES_POLICY,T=b.createHTML("")}else void 0===b&&(b=function(t,e){if("object"!=typeof t||"function"!=typeof t.createPolicy)return null;let n=null;const r="data-tt-policy-suffix";e&&e.hasAttribute(r)&&(n=e.getAttribute(r));const i="dompurify"+(n?"#"+n:"");try{return t.createPolicy(i,{createHTML:o=>o,createScriptURL:o=>o})}catch{return console.warn("TrustedTypes policy "+i+" could not be created."),null}}(p,i)),null!==b&&"string"==typeof T&&(T=b.createHTML(""));ct&&ct(A),xi=A}},v0=_e({},[...Rh,...Dh,...NR]),y0=_e({},[...Hh,...WR]),Fr=function(A){Ao(e.removed,{element:A});try{x(A).removeChild(A)}catch{f(A)}},bi=function(A,ee){try{Ao(e.removed,{attribute:ee.getAttributeNode(A),from:ee})}catch{Ao(e.removed,{attribute:null,from:ee})}if(ee.removeAttribute(A),"is"===A)if(ie||be)try{Fr(ee)}catch{}else try{ee.setAttribute(A,"")}catch{}},C0=function(A){let ee=null,Q=null;if(Pe)A="<remove></remove>"+A;else{const Ue=V_(A,/^[\r\n\t ]+/);Q=Ue&&Ue[0]}"application/xhtml+xml"===Cs&&Ti===Ln&&(A='<html xmlns="http://www.w3.org/1999/xhtml"><head></head><body>'+A+"</body></html>");const we=b?b.createHTML(A):A;if(Ti===Ln)try{ee=(new h).parseFromString(we,Cs)}catch{}if(!ee||!ee.documentElement){ee=S.createDocument(Ti,"template",null);try{ee.documentElement.innerHTML=hd?T:we}catch{}}const Je=ee.body||ee.documentElement;return A&&Q&&Je.insertBefore(n.createTextNode(Q),Je.childNodes[0]||null),Ti===Ln?k.call(ee,ae?"html":"body")[0]:ae?ee.documentElement:Je},T0=function(A){return M.call(A.ownerDocument||A,A,c.SHOW_ELEMENT|c.SHOW_COMMENT|c.SHOW_TEXT|c.SHOW_PROCESSING_INSTRUCTION|c.SHOW_CDATA_SECTION,null)},md=function(A){return A instanceof d&&("string"!=typeof A.nodeName||"string"!=typeof A.textContent||"function"!=typeof A.removeChild||!(A.attributes instanceof u)||"function"!=typeof A.removeAttribute||"function"!=typeof A.setAttribute||"string"!=typeof A.namespaceURI||"function"!=typeof A.insertBefore||"function"!=typeof A.hasChildNodes)},x0=function(A){return"function"==typeof a&&A instanceof a};function In(A,ee,Q){hl(A,we=>{we.call(e,ee,Q,xi)})}const b0=function(A){let ee=null;if(In(F.beforeSanitizeElements,A,null),md(A))return Fr(A),!0;const Q=Ze(A.nodeName);if(In(F.uponSanitizeElement,A,{tagName:Q,allowedTags:z}),pe&&A.hasChildNodes()&&!x0(A.firstElementChild)&&ut(/<[/\w!]/g,A.innerHTML)&&ut(/<[/\w!]/g,A.textContent)||A.nodeType===Do_progressingInstruction||pe&&A.nodeType===Do_comment&&ut(/<[/\w]/g,A.data))return Fr(A),!0;if(!z[Q]||q[Q]){if(!q[Q]&&S0(Q)&&(J.tagNameCheck instanceof RegExp&&ut(J.tagNameCheck,Q)||J.tagNameCheck instanceof Function&&J.tagNameCheck(Q)))return!1;if(wr&&!Ci[Q]){const we=x(A)||A.parentNode,Je=C(A)||A.childNodes;if(Je&&we){for(let Nn=Je.length-1;Nn>=0;--Nn){const tn=_(Je[Nn],!0);tn.__removalCount=(A.__removalCount||0)+1,we.insertBefore(tn,v(A))}}}return Fr(A),!0}return A instanceof l&&!function(A){let ee=x(A);(!ee||!ee.tagName)&&(ee={namespaceURI:Ti,tagName:"template"});const Q=dl(A.tagName),we=dl(ee.tagName);return!!dd[A.namespaceURI]&&(A.namespaceURI===Rl?ee.namespaceURI===Ln?"svg"===Q:ee.namespaceURI===Bl?"svg"===Q&&("annotation-xml"===we||Dl[we]):!!v0[Q]:A.namespaceURI===Bl?ee.namespaceURI===Ln?"math"===Q:ee.namespaceURI===Rl?"math"===Q&&Hl[we]:!!y0[Q]:A.namespaceURI===Ln?!(ee.namespaceURI===Rl&&!Hl[we]||ee.namespaceURI===Bl&&!Dl[we])&&!y0[Q]&&(iV[Q]||!v0[Q]):!("application/xhtml+xml"!==Cs||!dd[A.namespaceURI]))}(A)||("noscript"===Q||"noembed"===Q||"noframes"===Q)&&ut(/<\/no(script|embed|frames)/i,A.innerHTML)?(Fr(A),!0):(U&&A.nodeType===Do_text&&(ee=A.textContent,hl([P,N,V],we=>{ee=ko(ee,we," ")}),A.textContent!==ee&&(Ao(e.removed,{element:A.cloneNode()}),A.textContent=ee)),In(F.afterSanitizeElements,A,null),!1)},E0=function(A,ee,Q){if(Ft&&("id"===ee||"name"===ee)&&(Q in n||Q in aV))return!1;if((!$||te[ee]||!ut(E,ee))&&(!he||!ut(w,ee)))if(!Y[ee]||te[ee]){if(!(S0(A)&&(J.tagNameCheck instanceof RegExp&&ut(J.tagNameCheck,A)||J.tagNameCheck instanceof Function&&J.tagNameCheck(A))&&(J.attributeNameCheck instanceof RegExp&&ut(J.attributeNameCheck,ee)||J.attributeNameCheck instanceof Function&&J.attributeNameCheck(ee))||"is"===ee&&J.allowCustomizedBuiltInElements&&(J.tagNameCheck instanceof RegExp&&ut(J.tagNameCheck,Q)||J.tagNameCheck instanceof Function&&J.tagNameCheck(Q))))return!1}else if(!ud[ee]&&!ut(Z,ko(Q,R,""))&&("src"!==ee&&"xlink:href"!==ee&&"href"!==ee||"script"===A||0!==DR(Q,"data:")||!m0[A])&&(!K||ut(B,ko(Q,R,"")))&&Q)return!1;return!0},S0=function(A){return"annotation-xml"!==A&&V_(A,W)},O0=function(A){In(F.beforeSanitizeAttributes,A,null);const{attributes:ee}=A;if(!ee||md(A))return;const Q={attrName:"",attrValue:"",keepAttr:!0,allowedAttributes:Y,forceKeepAttr:void 0};let we=ee.length;for(;we--;){const Je=ee[we],{name:Ue,namespaceURI:Nn,value:tn}=Je,mn=Ze(Ue),gd=tn;let ot="value"===Ue?gd:HR(gd);if(Q.attrName=mn,Q.attrValue=ot,Q.keepAttr=!0,Q.forceKeepAttr=void 0,In(F.uponSanitizeAttribute,A,Q),ot=Q.attrValue,vs&&("id"===mn||"name"===mn)&&(bi(Ue,A),ot="user-content-"+ot),pe&&ut(/((--!?|])>)|<\/(style|title)/i,ot)){bi(Ue,A);continue}if(Q.forceKeepAttr)continue;if(!Q.keepAttr){bi(Ue,A);continue}if(!X&&ut(/\/>/i,ot)){bi(Ue,A);continue}U&&hl([P,N,V],uV=>{ot=ko(ot,uV," ")});const w0=Ze(A.nodeName);if(E0(w0,mn,ot)){if(b&&"object"==typeof p&&"function"==typeof p.getAttributeType&&!Nn)switch(p.getAttributeType(w0,mn)){case"TrustedHTML":ot=b.createHTML(ot);break;case"TrustedScriptURL":ot=b.createScriptURL(ot)}if(ot!==gd)try{Nn?A.setAttributeNS(Nn,Ue,ot):A.setAttribute(Ue,ot),md(A)?Fr(A):W_(e.removed)}catch{bi(Ue,A)}}else bi(Ue,A)}In(F.afterSanitizeAttributes,A,null)},cV=function A(ee){let Q=null;const we=T0(ee);for(In(F.beforeSanitizeShadowDOM,ee,null);Q=we.nextNode();)In(F.uponSanitizeShadowNode,Q,null),b0(Q),O0(Q),Q.content instanceof o&&A(Q.content);In(F.afterSanitizeShadowDOM,ee,null)};return e.sanitize=function(A){let ee=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},Q=null,we=null,Je=null,Ue=null;if(hd=!A,hd&&(A="\x3c!--\x3e"),"string"!=typeof A&&!x0(A)){if("function"!=typeof A.toString)throw Bo("toString is not a function");if("string"!=typeof(A=A.toString()))throw Bo("dirty is not a string, aborting")}if(!e.isSupported)return A;if(Ie||pd(ee),e.removed=[],"string"==typeof A&&(en=!1),en){if(A.nodeName){const mn=Ze(A.nodeName);if(!z[mn]||q[mn])throw Bo("root node is forbidden and cannot be sanitized in-place")}}else if(A instanceof a)Q=C0("\x3c!----\x3e"),we=Q.ownerDocument.importNode(A,!0),we.nodeType===Do_element&&"BODY"===we.nodeName||"HTML"===we.nodeName?Q=we:Q.appendChild(we);else{if(!ie&&!U&&!ae&&-1===A.indexOf("<"))return b&&Wt?b.createHTML(A):A;if(Q=C0(A),!Q)return ie?null:Wt?T:""}Q&&Pe&&Fr(Q.firstChild);const Nn=T0(en?A:Q);for(;Je=Nn.nextNode();)b0(Je),O0(Je),Je.content instanceof o&&cV(Je.content);if(en)return A;if(ie){if(be)for(Ue=D.call(Q.ownerDocument);Q.firstChild;)Ue.appendChild(Q.firstChild);else Ue=Q;return(Y.shadowroot||Y.shadowrootmode)&&(Ue=H.call(r,Ue,!0)),Ue}let tn=ae?Q.outerHTML:Q.innerHTML;return ae&&z["!doctype"]&&Q.ownerDocument&&Q.ownerDocument.doctype&&Q.ownerDocument.doctype.name&&ut(z_,Q.ownerDocument.doctype.name)&&(tn="<!DOCTYPE "+Q.ownerDocument.doctype.name+">\n"+tn),U&&hl([P,N,V],mn=>{tn=ko(tn,mn," ")}),b&&Wt?b.createHTML(tn):tn},e.setConfig=function(){let A=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};pd(A),Ie=!0},e.clearConfig=function(){xi=null,Ie=!1},e.isValidAttribute=function(A,ee,Q){xi||pd({});const we=Ze(A),Je=Ze(ee);return E0(we,Je,Q)},e.addHook=function(A,ee){"function"==typeof ee&&Ao(F[A],ee)},e.removeHook=function(A,ee){if(void 0!==ee){const Q=BR(F[A],ee);return-1===Q?void 0:RR(F[A],Q,1)[0]}return W_(F[A])},e.removeHooks=function(A){F[A]=[]},e.removeAllHooks=function(){F={afterSanitizeAttributes:[],afterSanitizeElements:[],afterSanitizeShadowDOM:[],beforeSanitizeAttributes:[],beforeSanitizeElements:[],beforeSanitizeShadowDOM:[],uponSanitizeAttribute:[],uponSanitizeElement:[],uponSanitizeShadowNode:[]}},e}();const ml=t=>Ih.sanitize(t,{USE_PROFILES:{html:!0,svg:!0,svgFilters:!0}}),dn=t=>Ih.sanitize(t,{ALLOWED_TAGS:[]}),X_=class F0 extends fe{constructor(){super(...arguments),this.type="toolbar",this.renderType=re.HTML}init(){const e=()=>this.updateOverflowMenu(!1);this.services.events.addEventListener(O.Toolbar.SHOW_OVERFLOW_MENU,()=>{this.renderOverflowMenu(),document.body.addEventListener("click",e)}),this.services.events.addEventListener(O.Toolbar.HIDE_OVERFLOW_MENU,()=>{document.body.removeEventListener("click",e)})}render(e=!0){const n=this.getComponentContainer({ariaLabel:"toolbar"}).attr("role","group");if(y(this.getOptions(),"data","loading"))n.html(""),this.overflowMenu=null;else{this.overflowMenu||(this.overflowMenu=n.append("div").attr("class","cds--overflow-menu-options cds--overflow-menu--flip cds--overflow-menu-options cds--overflow-menu--flip").attr("tabindex",-1).html("<ul role='menu'></ul>"));const{buttonList:r,overflowMenuItemList:i}=this.getControlConfigs();i&&r.push(this.getOverflowButtonConfig());const o=n.selectAll("div.toolbar-control").data(r,l=>l.id);o.exit().remove();const s=o.enter().append("div").attr("class","toolbar-control cds--overflow-menu cds--overflow-menu"),a=this;s.merge(o).classed("disabled",l=>l.shouldBeDisabled()).attr("role","button").attr("aria-disabled",l=>l.shouldBeDisabled()).attr("aria-label",l=>l.title).html(l=>`\n\t\t\t<button\n\t\t\t\tclass="cds--overflow-menu__trigger cds--overflow-menu__trigger"\n\t\t\t\taria-haspopup="true" aria-expanded="false" id="${this.services.domUtils.generateElementIDString(`control-${dn(l.id)}`)}" aria-label="${dn(l.title)}">\n\t\t\t\t<svg focusable="false" preserveAspectRatio="xMidYMid meet" xmlns="http://www.w3.org/2000/svg" class="cds--overflow-menu__icon cds--overflow-menu__icon" viewBox="0 0 32 32" aria-hidden="true">\n\t\t\t\t\t${(t=>Ih.sanitize(t,{NAMESPACE:"http://www.w3.org/2000/svg",USE_PROFILES:{html:!0,svg:!0,svgFilters:!0}}))(l.iconSVG.content)}\n\t\t\t\t</svg>\n\t\t\t</button>`).each(function(l,c){L(this).select("svg").style("pointer-events","none").style("will-change","transform").style("width",void 0!==l.iconSVG.width?l.iconSVG.width:"20px").style("height",void 0!==l.iconSVG.height?l.iconSVG.height:"20px"),L(this).select("button").on("mouseover focus",function(u){const d=L(this);d.classed("hovered",!0),a.services.events.dispatchEvent(O.Toolbar.SHOW_TOOLTIP,{event:u,hoveredElement:d,content:l.title,noWrap:!0,placements:["top","bottom"]})}).on("mouseout blur",function(){a.services.events.dispatchEvent(O.Toolbar.HIDE_TOOLTIP)}).on("click",u=>{l.shouldBeDisabled()||a.triggerFunctionAndEvent(l,u,this)}).on("keydown",u=>{u.key&&"Enter"===u.key||" "===u.key?(u.preventDefault(),a.triggerFunctionAndEvent(l,u,this)):u.key&&"ArrowLeft"===u.key?a.focusOnPreviousEnabledToolbarItem(c):u.key&&"ArrowRight"===u.key&&a.focusOnNextEnabledToolbarItem(c)})}),this.overflowButton=this.getComponentContainer().select(`button.cds--overflow-menu__trigger#${this.services.domUtils.generateElementIDString("control-toolbar-overflow-menu")}`)}}renderOverflowMenu(){const{overflowMenuItemList:e}=this.getControlConfigs(),n=this.overflowMenu.select("ul").selectAll("li.cds--overflow-menu-options__option").data(e,i=>y(i,"id"));n.exit().remove();const r=n.enter().append("li").attr("id",i=>this.services.domUtils.generateElementIDString(`control-${i.id}`)).attr("class","cds--overflow-menu-options__option cds--overflow-menu-options__option").attr("role","menuitem").attr("tabindex",1);r.append("button").attr("class","cds--overflow-menu-options__btn cds--overflow-menu-options__btn"),r.merge(n).classed("cds--overflow-menu-options__option--disabled",i=>i.shouldBeDisabled()).classed("cds--overflow-menu-options__option--disabled",i=>i.shouldBeDisabled()).attr("aria-disabled",i=>i.shouldBeDisabled()).selectAll("button").text(i=>i.title)}isOverflowMenuOpen(){return this.overflowMenu.classed("is-open")}updateOverflowMenu(e){this.overflowMenu&&(this.overflowMenu.classed("is-open",e),this.overflowButton&&(this.overflowButton.attr("aria-expanded",e),L(this.overflowButton.node().parentNode).classed("cds--overflow-menu--open",e).classed("cds--overflow-menu--open",e)),e?this.services.events.dispatchEvent(O.Toolbar.SHOW_OVERFLOW_MENU):this.services.events.dispatchEvent(O.Toolbar.HIDE_OVERFLOW_MENU))}focusOnPreviousEnabledToolbarItem(e){const n=this.getToolbarButtonItems();let r=n.length;for(let i=e-1;i>=0;i--)if(!n[i].shouldBeDisabled()){r=i;break}if(r<n.length){const i=L(`button#${this.services.domUtils.generateElementIDString(`control-${n[r].id}`)}`).node();"focus"in i&&i.focus()}}focusOnNextEnabledToolbarItem(e){const n=this.getToolbarButtonItems();let r=-1;for(let i=e+1;i<n.length;i++)if(!n[i].shouldBeDisabled()){r=i;break}if(r>-1){const i=L(`button#${this.services.domUtils.generateElementIDString(`control-${n[r].id}`)}`).node();"focus"in i&&i.focus()}}focusOnPreviousEnabledMenuItem(e){const n=this.getOverflowMenuItems();let r=n.length;for(let i=e-1;i>=0;i--)if(!n[i].shouldBeDisabled()){r=i;break}if(r<n.length){const i=L(`#${this.services.domUtils.generateElementIDString(`control-${n[r].id}`)} button`).node();"focus"in i&&i.focus()}}focusOnNextEnabledMenuItem(e){const n=this.getOverflowMenuItems();let r=-1;for(let i=e+1;i<n.length;i++)if(!n[i].shouldBeDisabled()){r=i;break}if(r>-1){const i=L(`#${this.services.domUtils.generateElementIDString(`control-${n[r].id}`)} button`).node();"focus"in i&&i.focus()}}toggleOverflowMenu(e){if(this.isOverflowMenuOpen())this.updateOverflowMenu(!1);else{this.updateOverflowMenu(!0);const n=this;this.getOverflowMenuItems().forEach((r,i)=>{const o=L(`#${this.services.domUtils.generateElementIDString(`control-${r.id}`)}`);null!==o&&(o.on("click",()=>{n.triggerFunctionAndEvent(r,e,o.node()),n.updateOverflowMenu(!1)}),o.on("keydown",s=>{s&&"Enter"===s.key?n.triggerFunctionAndEvent(r,e,o.node()):s&&"ArrowUp"===s.key?n.focusOnPreviousEnabledMenuItem(i):s&&"ArrowDown"===s.key?n.focusOnNextEnabledMenuItem(i):s&&"Escape"===s.key&&n.updateOverflowMenu(!1),s.preventDefault()}))}),n.focusOnNextEnabledMenuItem(-1)}e&&e.stopImmediatePropagation()}triggerFunctionAndEvent(e,n,r){"function"==typeof e.shouldBeDisabled&&e.shouldBeDisabled()||("function"==typeof e.clickFunction&&e.clickFunction(n),this.services.events.dispatchEvent(O.Toolbar.BUTTON_CLICK,{control:e,event:n,element:r}))}getControlConfigs(){const e=y(this.getOptions(),"toolbar","numberOfIcons")-1,n=y(this.getOptions(),"toolbar","controls"),r=[],i=[],o=[];return n.forEach(s=>{let a=null;if(s.type===Ce.CUSTOM)null===y(s,"id")&&(s.id="toolbar-button-"+F0.buttonID++),null===y(s,"shouldBeDisabled")&&(s.shouldBeDisabled=()=>!1),a=s;else{const l=this.services.domUtils.isFullScreenMode();s.type===Ce.MAKE_FULLSCREEN&&l?s.type=Ce.EXIT_FULLSCREEN:s.type===Ce.EXIT_FULLSCREEN&&!l&&(s.type=Ce.MAKE_FULLSCREEN),a=this.getControlConfigByType(s.type)}a&&(a.text=s.text?s.text:s.type,-1!==a.id.indexOf("toolbar-export")?r.push(a):i.length<e?null===y(a,"iconSVG","content")?o.push(a):i.push(a):o.push(a))}),o.push(...r),o.length?{buttonList:i,overflowMenuItemList:o}:{buttonList:i}}getToolbarButtonItems(){const{buttonList:e,overflowMenuItemList:n}=this.getControlConfigs();return n&&e.push(this.getOverflowButtonConfig()),e||[]}getOverflowMenuItems(){const{overflowMenuItemList:e}=this.getControlConfigs();return e||[]}getOverflowButtonConfig(){const{moreOptions:e}=y(this.model.getOptions(),"locale","translations","toolbar");return{id:"toolbar-overflow-menu",title:e,shouldBeDisabled:()=>!1,iconSVG:{content:'<circle cx="16" cy="8" r="2"></circle>\n\t\t\t\t<circle cx="16" cy="16" r="2"></circle>\n\t\t\t\t<circle cx="16" cy="24" r="2"></circle>'},clickFunction:n=>this.toggleOverflowMenu(n)}}getControlConfigByType(e){const n=this.services.zoom&&this.services.zoom.isZoomBarEnabled()&&!this.services.zoom.isEmptyState(),r=this.model.getDisplayData(),i=this.model.getOptions(),{exportAsCSV:o,exportAsJPG:s,exportAsPNG:a,zoomIn:l,zoomOut:c,resetZoom:u,makeFullScreen:d,exitFullScreen:h,showAsTable:p}=y(i,"locale","translations","toolbar");let m;switch(e){case Ce.ZOOM_IN:n&&(m={id:"toolbar-zoomIn",title:l,shouldBeDisabled:()=>this.services.zoom.isMinZoomDomain(),iconSVG:{content:this.getControlIconByType(e)},clickFunction:()=>this.services.zoom.zoomIn()});break;case Ce.ZOOM_OUT:n&&(m={id:"toolbar-zoomOut",title:c,shouldBeDisabled:()=>this.services.zoom.isMaxZoomDomain(),iconSVG:{content:this.getControlIconByType(e)},clickFunction:()=>this.services.zoom.zoomOut()});break;case Ce.RESET_ZOOM:n&&(m={id:"toolbar-resetZoom",title:u,shouldBeDisabled:()=>this.services.zoom.isMaxZoomDomain(),iconSVG:{content:this.getControlIconByType(e)},clickFunction:()=>this.services.zoom.resetZoomDomain()});break;case Ce.MAKE_FULLSCREEN:m={id:"toolbar-makefullscreen",iconSVG:{content:this.getControlIconByType(e),width:"15px",height:"15px"},title:d,shouldBeDisabled:()=>!1,clickFunction:()=>{this.services.domUtils.toggleFullscreen()}};break;case Ce.EXIT_FULLSCREEN:m={id:"toolbar-exitfullscreen",iconSVG:{content:this.getControlIconByType(e),width:"15px",height:"15px"},title:h,shouldBeDisabled:()=>!1,clickFunction:()=>{this.services.domUtils.toggleFullscreen()}};break;case Ce.SHOW_AS_DATATABLE:m={id:"toolbar-showasdatatable",iconSVG:{content:this.getControlIconByType(e)},title:p,shouldBeDisabled:()=>0===r.length,clickFunction:()=>this.services.events.dispatchEvent(O.Modal.SHOW)};break;case Ce.EXPORT_CSV:m={id:"toolbar-export-CSV",title:o,shouldBeDisabled:()=>!1,iconSVG:{content:this.getControlIconByType(e)},clickFunction:()=>this.model.exportToCSV()};break;case Ce.EXPORT_PNG:m={id:"toolbar-export-PNG",title:a,shouldBeDisabled:()=>!1,iconSVG:{content:this.getControlIconByType(e)},clickFunction:()=>this.services.domUtils.exportToPNG()};break;case Ce.EXPORT_JPG:m={id:"toolbar-export-JPG",title:s,shouldBeDisabled:()=>!1,iconSVG:{content:this.getControlIconByType(e)},clickFunction:()=>this.services.domUtils.exportToJPG()};break;default:throw Error("Not supported toolbar control type: "+e)}return m}getControlIconByType(e){switch(e){case Ce.ZOOM_IN:return'<polygon points="19 13 15 13 15 9 13 9 13 13 9 13 9 15 13 15 13 19 15 19 15 15 19 15 19 13"/>\n\t\t\t\t\t\t<path d="M22.45,21A10.87,10.87,0,0,0,25,14,11,11,0,1,0,14,25a10.87,10.87,0,0,0,7-2.55L28.59,30,30,28.59ZM14,23a9,9,0,1,1,9-9A9,9,0,0,1,14,23Z"/>';case Ce.ZOOM_OUT:return'<rect x="9" y="13" width="10" height="2"/>\n\t\t\t\t\t\t<path d="M22.45,21A10.87,10.87,0,0,0,25,14,11,11,0,1,0,14,25a10.87,10.87,0,0,0,7-2.55L28.59,30,30,28.59ZM14,23a9,9,0,1,1,9-9A9,9,0,0,1,14,23Z"/>';case Ce.RESET_ZOOM:return'<path d="M22.4478,21A10.855,10.855,0,0,0,25,14,10.99,10.99,0,0,0,6,6.4658V2H4v8h8V8H7.332a8.9768,8.9768,0,1,1-2.1,8H3.1912A11.0118,11.0118,0,0,0,14,25a10.855,10.855,0,0,0,7-2.5522L28.5859,30,30,28.5859Z"/>';case Ce.MAKE_FULLSCREEN:return'<polygon points="21 2 21 4 26.59 4 17 13.58 18.41 15 28 5.41 28 11 30 11 30 2 21 2"/><polygon points="15 18.42 13.59 17 4 26.59 4 21 2 21 2 30 11 30 11 28 5.41 28 15 18.42"/>';case Ce.EXIT_FULLSCREEN:return'<polygon points="4 18 4 20 10.586 20 2 28.582 3.414 30 12 21.414 12 28 14 28 14 18 4 18"/><polygon points="30 3.416 28.592 2 20 10.586 20 4 18 4 18 14 28 14 28 12 21.414 12 30 3.416"/>';case Ce.SHOW_AS_DATATABLE:return'<rect x="4" y="6" width="18" height="2"/><rect x="4" y="12" width="18" height="2"/><rect x="4" y="18" width="18" height="2"/><rect x="4" y="24" width="18" height="2"/><rect x="26" y="6" width="2" height="2"/><rect x="26" y="12" width="2" height="2"/><rect x="26" y="18" width="2" height="2"/><rect x="26" y="24" width="2" height="2"/>';case Ce.EXPORT_CSV:case Ce.EXPORT_JPG:case Ce.EXPORT_PNG:return'<path d="M22.4478,21A10.855,10.855,0,0,0,25,14,10.99,10.99,0,0,0,6,6.4658V2H4v8h8V8H7.332a8.9768,8.9768,0,1,1-2.1,8H3.1912A11.0118,11.0118,0,0,0,14,25a10.855,10.855,0,0,0,7-2.5522L28.5859,30,30,28.5859Z"/>';default:throw Error("Not supported toolbar control type: "+e)}}};X_.buttonID=0;let gl=X_;const Z_=class M0 extends fe{constructor(e,n,r,i){super(e,n,i),this.type="layout",this.configs=i,this.children=r,this._instanceID=M0.instanceID++,this.init()}init(){this.children.forEach(e=>{e.components.forEach(n=>{n.init()})})}getPreferedAndFixedSizeSum(){const e=this.parent;let n=0;return e.selectAll(`div.layout-child-${this._instanceID}`).filter(r=>{const i=y(r,"growth");return i===ce.PREFERRED||i===ce.FIXED}).each(function(r){n+=r.size}),n}getNumOfStretchChildren(){return this.parent.selectAll(`div.layout-child-${this._instanceID}`).filter(e=>y(e,"growth")===ce.STRETCH).size()}render(e=!0){const n=this.model.getOptions(),r=this.parent,{width:i,height:o}=I.getHTMLElementSize(r.node()),s=this.configs.direction===Fe.ROW||this.configs.direction===Fe.ROW_REVERSE,a=y(this.model.getOptions(),"style","prefix"),l=r.classed(`${st}--${a}--layout-row`,this.configs.direction===Fe.ROW).classed(`${st}--${a}--layout-row-reverse`,this.configs.direction===Fe.ROW_REVERSE).classed(`${st}--${a}--layout-column`,this.configs.direction===Fe.COLUMN).classed(`${st}--${a}--layout-column-reverse`,this.configs.direction===Fe.COLUMN_REVERSE).classed(`${st}--${a}--layout-alignitems-center`,this.configs.alignItems===Wn.CENTER).selectAll(`div.layout-child-${this._instanceID}`).data(this.children,u=>u.id);l.enter().append("div").merge(r.selectAll(`div.layout-child-${this._instanceID}`)).attr("class",u=>`layout-child layout-child-${this._instanceID} ${u.id}`).each(function(u){u.components.forEach(d=>{var h;const p=L(this),m=y(u,"renderType")===re.SVG;d.setParent(m?I.appendOrSelect(p,"svg.layout-svg-wrapper").attr("width","100%").attr("height","100%"):p),m&&!p.select("svg.layout-svg-wrapper").attr("aria-label")&&p.select("svg.layout-svg-wrapper").attr("aria-label",(null==(h=n?.accessibility)?void 0:h.svgAriaLabel)||n?.title);const _=y(u,"growth");(_===ce.PREFERRED||_===ce.FIXED)&&d.render(e)})}),r.selectAll(`div.layout-child-${this._instanceID}`).style("height",null).style("width",null).each(function(u){const d=y(u,"growth"),h=y(u,"renderType")===re.SVG?I.getSVGElementSize(L(this).select("svg.layout-svg-wrapper"),{useBBox:!0}):I.getHTMLElementSize(this);if(d===ce.PREFERRED){const p=s?h.width:h.height,m=s?i:o;u.size=p/m*100}}),l.exit().remove(),this.children.filter(u=>y(u,"growth")===ce.STRETCH).forEach(u=>{u.size=(100-+this.getPreferedAndFixedSizeSum())/+this.getNumOfStretchChildren()});const c=r.selectAll(`div.layout-child-${this._instanceID}`).data(this.children,u=>u.id);s?c.style("width",u=>u.size/100*i+"px").style("height","100%"):c.style("height",u=>u.size/100*o+"px").style("width","100%"),c.each(function(u){u.components.forEach(d=>{y(u,"growth")===ce.STRETCH&&d.render(e)})})}setModel(e){super.setModel(e),this.children.forEach(n=>{n.components.forEach(r=>r.setModel(e))})}setServices(e){super.setServices(e),this.children.forEach(n=>{n.components.forEach(r=>r.setServices(e))})}destroy(){this.children.forEach(e=>{e.components.forEach(n=>n.destroy())})}};Z_.instanceID=Math.floor(99999999999*Math.random());let Ot=Z_;class Dn extends fe{constructor(){super(...arguments),this.type="spacer"}render(e=!1){this.getComponentContainer({isPresentational:!0}).style("width",`${this.configs.size||Ic.default.size}px`).style("height",`${this.configs.size||Ic.default.size}px`).attr("opacity",0)}}class fl extends fe{constructor(e,n,r){super(e,n,r),this.type="modal",this.isEventListenerAdded=!1,this.handleShowModal=()=>{const i=this.services.domUtils.getChartID();this.modal.attr("data-modal",!0).attr("class","cds--modal").attr("role","dialog").attr("aria-modal",!0).attr("aria-labelledby",`${i}__modal-title`).attr("aria-describedby",`${i}__modal-description`).attr("tabindex",-1).style("opacity",1).style("visibility","visible"),this.modal.html(this.getModalHTML()),this.modal.select("div.cds--modal-footer button.cds--btn").on("click",()=>this.model.exportToCSV()),this.modal.on("click",this.handleHideModal),this.modal.select(".cds--modal-container").on("click",o=>{o.stopPropagation()}),this.modal.select(".cds--modal-close").on("click",this.handleHideModal),typeof window<"u"&&window.addEventListener("keydown",this.handleEscapeKey)},this.handleEscapeKey=i=>{"Escape"===i.key&&this.handleHideModal()},this.handleHideModal=()=>{this.modal.attr("role",null).attr("aria-modal",null).attr("aria-labelledby",null).attr("aria-describedby",null).attr("tabindex",null).style("opacity",0).style("visibility","hidden"),this.modal.on("click",null),this.modal.select(".cds--modal-container").on("click",null),this.modal.select(".cds--modal-close").on("click",null),typeof window<"u"&&window.removeEventListener("keydown",this.handleEscapeKey)},this.init()}addEventListeners(){this.services.events.addEventListener(O.Modal.SHOW,this.handleShowModal)}removeEventListeners(){this.services.events.removeEventListener(O.Modal.SHOW,this.handleShowModal)}getModalHTML(){const e=this.services.domUtils.getChartID(),n=this.model.getOptions(),{title:r,downloadAsCSV:i}=y(n,"locale","translations","tabularRep"),o=y(n,"style","prefix"),s=this.model.getTabularDataArray();return`\n\t\t<div class="cds--modal-container">\n\t\t\t<div class="cds--modal-header">\n\n\t\t\t\t<p class="cds--modal-header__label cds--type-delta" id="modal-title">${r}</p>\n\n\t\t\t\t<p class="cds--modal-header__heading cds--type-beta" id="${e}__modal-description">${dn(n.title)}</p>\n\n\t\t\t\t<button class="cds--modal-close" type="button" data-modal-close aria-label="close modal"  data-modal-primary-focus>\n\t\t\t\t\t<svg focusable="false" preserveAspectRatio="xMidYMid meet" xmlns="http://www.w3.org/2000/svg" fill="currentColor" aria-label="Close" width="20" height="20" viewBox="0 0 32 32" role="img" class="cds--modal-close__icon">\n\t\t\t\t\t\t<path d="M24 9.4L22.6 8 16 14.6 9.4 8 8 9.4 14.6 16 8 22.6 9.4 24 16 17.4 22.6 24 24 22.6 17.4 16 24 9.4z"></path>\n\t\t\t\t\t</svg>\n\t\t\t\t</button>\n\t\t\t</div>\n\n\t\t\t<div class="cds--modal-content">\n\t\t\t\t<table class="cds--data-table cds--data-table--no-border">\n\t\t\t\t\t<thead>\n\t\t\t\t\t\t<tr>\n\t\t\t\t\t\t\t${ve(s,0).map(a=>`<th scope="col">\n\t\t\t\t\t\t\t\t<div class="cds--table-header-label">${dn(a)}</div>\n\t\t\t\t\t\t\t</th>`).join("")}\n\t\t\t\t\t\t</tr>\n\t\t\t\t\t</thead>\n\n\t\t\t\t\t<tbody>${s.slice(1).map(a=>`\n\t\t\t\t\t\t\t<tr>\n\t\t\t\t\t\t\t\t${a.map(l=>`<td>${dn(l)}</td>`).join("")}\n\t\t\t\t\t\t\t</tr>`).join("")}\n\t\t\t\t\t</tbody>\n\t\t\t\t</table>\n\t\t\t</div>\n\n\t\t\t<div class="cds--modal-footer">\n\t\t\t  <div class="${st}--${o}-modal-footer-spacer"></div>\n\t\t\t  <button class="cds--btn cds--btn--primary" type="button" data-modal-primary-focus>${i}</button>\n\t\t\t</div>\n\t\t</div>`}render(e=!1){const n=this.model.getOptions();if(!this.isEventListenerAdded){const r=L(this.services.domUtils.getHolder()),i=y(n,"style","prefix");this.modal=I.appendOrSelect(r,`div.${st}--${i}--modal`),this.addEventListeners(),this.isEventListenerAdded=!0}}destroy(){this.removeEventListeners(),this.isEventListenerAdded=!1}}class Ho extends fe{constructor(){super(...arguments),this.type="title",this.renderType=re.HTML}render(e=!1){const n=this.getComponentContainer(),r=y(this.getOptions(),"title"),i=n.selectAll("p.title").data([r]);if(i.enter().append("p").classed("title",!0).attr("role","heading").attr("aria-level",2).merge(i).html(o=>dn(o)),i.node()&&i.node().offsetWidth<i.node().scrollWidth){const o=this;i.on("mouseover",function(s){o.services.events.dispatchEvent(O.Tooltip.SHOW,{event:s,hoveredElement:i,content:i.text()})}).on("mousemove",function(s){o.services.events.dispatchEvent(O.Tooltip.MOVE,{event:s})}).on("mouseout",function(){o.services.events.dispatchEvent(O.Tooltip.HIDE)})}i.exit().remove()}truncateTitle(e,n){if(n<=0)return;const r=e.text();if(e.node().getComputedTextLength()>n){e.append("tspan").text("...");const i=I.appendOrSelect(e,"tspan").node().getComputedTextLength(),o=e.text(),s=this.getSubstringIndex(e.node(),0,o.length-1,n-i);e.html(o.substring(0,s-1)).append("tspan").text("...");const a=this;e.on("mouseover",function(l){a.services.events.dispatchEvent(O.Tooltip.SHOW,{event:l,hoveredElement:e,content:r})}).on("mousemove",function(l){a.services.events.dispatchEvent(O.Tooltip.MOVE,{event:l})}).on("mouseout",function(){a.services.events.dispatchEvent(O.Tooltip.HIDE)})}}getMaxTitleWidth(){return I.getSVGElementSize(this.parent.node(),{useAttrs:!0}).width}getSubstringIndex(e,n,r,i){const o=Math.floor((r+n)/2);return e.getSubStringLength(0,o)>i?this.getSubstringIndex(e,n,o,i):e.getSubStringLength(0,o)<i?e.getSubStringLength(0,o+1)>i?o:this.getSubstringIndex(e,o,r,i):o}}class Nh extends fe{constructor(){super(...arguments),this.type="legend",this.renderType=re.HTML}render(e=!1){const n=this.getOptions(),r=y(n,"legend"),i=y(r,"alignment"),o=y(n,"legend","orientation");let s=this.model.getDataGroups();const{DISABLED:a}=He.items.status,l=s.some(C=>C.status===a),c=y(r,"order"),u=this.getComponentContainer().classed("center-aligned",i===$e.CENTER).classed("right-aligned",i===$e.RIGHT).classed(o,!0).classed("has-deactivated-items",l).attr("role",de.GROUP).attr("aria-label","Data groups").attr("data-name","legend-items");c&&(s=this.sortDataGroups(s,c));const d=u.selectAll("div.legend-item").data(s,C=>C.name),h=d.enter().append("div").attr("class","legend-item");h.merge(u.selectAll("div.legend-item")).classed("active",function(C){return C.status===He.items.status.ACTIVE});const p=y(this.getOptions(),"legend","clickable");u.classed("clickable",p&&s.length>1);const m=He.checkbox.radius,_=h.append("div").classed("checkbox",!0),f=_.merge(d.select("div.checkbox")).attr("role",de.CHECKBOX).attr("tabindex",p?0:-1).attr("aria-labelledby",(C,x)=>this.services.domUtils.generateElementIDString(`legend-datagroup-${x}-title`)).attr("aria-checked",({status:C})=>C===He.items.status.ACTIVE).attr("width",2*m).attr("height",2*m).attr("class",C=>this.model.getColorClassName({classNameTypes:[oe.BACKGROUND],dataGroupName:C.name,originalClassName:"checkbox"})).style("background",C=>C.status===He.items.status.ACTIVE?this.model.getFillColor(C.name)||this.model.getStrokeColor(C.name):null).classed("active",function(C){return C.status===He.items.status.ACTIVE});_.append("svg").attr("focusable",!1).attr("preserveAspectRatio","xMidYMid meet").attr("xmlns","http://www.w3.org/2000/svg").attr("width","11").attr("height","11").attr("viewBox","0 0 31 28").attr("aria-hidden",!0).style("will-change","transform").append("path").attr("d","M13 21.2l-7.1-7.1-1.4 1.4 7.1 7.1L13 24 27.1 9.9l-1.4-1.5z"),h.append("p").merge(d.select("p"));const v=y(n,"legend","additionalItems");if(v&&s.length){const C=this,x=u.selectAll("div.additional-item").data(v);x.exit().remove();const b=x.enter().append("div").merge(x).classed("legend-item",!0).classed("additional",!0).attr("aria-labelledby",(M,D)=>this.services.domUtils.generateElementIDString(`legend-datagroup-${f.size()+D}-title`));b.selectAll("*").remove();let T,S=1;b.append("svg").classed("icon",!0).each(function(M){const D=L(this);T&&T==M.type?S++:(T=M.type,S=1),C.addAdditionalItem(D,M,S)}),b.append("p").merge(b.select("p")),this.truncateLegendText()}d.exit().on("mouseover",null).on("click",null).on("mouseout",null).remove(),p&&h.size()>1&&this.addEventListeners()}sortDataGroups(e,n){if(e.sort((r,i)=>n.indexOf(r.name)-n.indexOf(i.name)),n.length<e.length){const r=e.length-n.length;return e.slice(r).concat(e.slice(0,r))}return e}addAdditionalItem(e,n,r){const{width:i,height:o}=He.area;if(n.type===ze.RADIUS?e.style("width",`${o}px`).style("height",`${o}px`):e.style("width",`${i}px`).style("height",`${o}px`),n.type===ze.RADIUS){const{iconData:s,fill:a,stroke:l}=He.radius;e.attr("fill","none").selectAll("circle").data(s).enter().append("circle").classed("radius",!0).attr("role",de.IMG).attr("aria-label","radius").attr("cx",c=>c.cx).attr("cy",c=>c.cy).attr("r",c=>c.r).style("fill",n.fill?n.fill:a).style("stroke",n.stroke?n.stroke:l)}else if(n.type===ze.LINE){const s=He.line;e.select("line.line").empty()&&e.append("line").classed(`line-${r}`,!0).attr("role",de.IMG).attr("aria-label","line").attr("x1",0).attr("y1",s.yPosition).attr("x2",i).attr("y2",s.yPosition).style("stroke",n.stroke?n.stroke:s.stroke).style("stroke-width",s.strokeWidth)}else if(n.type===ze.AREA)e.select("rect.area").empty()&&e.append("rect").classed(`area-${r}`,!0).attr("role",de.IMG).attr("aria-label","area").attr("width",i).attr("height",o).style("fill",r>3&&!n.fill?He.area.fill:n.fill).style("stroke",n.stroke);else if(n.type===ze.SIZE){const{iconData:s,fill:a,stroke:l}=He.size;e.attr("fill","none").attr("role",de.IMG).attr("aria-label","size").selectAll("rect").data(s).enter().append("rect").classed("size",!0).attr("width",c=>c.width).attr("height",c=>c.height).attr("y",()=>0).style("fill",n.fill?n.fill:a).style("stroke",n.stroke?n.stroke:l).style("stroke-width",1)}else if(n.type===ze.QUARTILE){const{iconData:s}=He.quartile;e.selectAll("rect").attr("role",de.IMG).attr("aria-label","quartile").data(s).enter().append("rect").attr("class",(a,l)=>"quartile-"+(0===l?"wrapper":"line")).attr("x",a=>a.x).attr("y",a=>a.y).attr("width",a=>a.width).attr("height",a=>a.height)}else if(n.type===ze.ZOOM){const{iconData:s,color:a}=y(He,"zoom"),l=e.attr("role",de.IMG).attr("aria-label","zoom").selectAll("g.icon").data(s).enter();l.append("g").attr("x",c=>c.x).attr("y",c=>c.y).attr("width",c=>c.width).attr("height",c=>c.height).append("polygon").attr("points","7.7 4.82 5.78 4.82 5.78 2.89 4.82 2.89 4.82 4.82 2.89 4.82 2.89 5.78 4.82 5.78 4.82 7.7 5.78 7.7 5.78 5.78 7.7 5.78 7.7 4.82").attr("fill",()=>n.color?n.color:a),l.append("path").attr("d","M9.36,8.67A5.22,5.22,0,0,0,10.59,5.3,5.3,5.3,0,1,0,5.3,10.59,5.22,5.22,0,0,0,8.67,9.36L12.32,13l.68-.68Zm-4.06,1A4.34,4.34,0,1,1,9.63,5.3,4.33,4.33,0,0,1,5.3,9.63Z").attr("fill",()=>n.color?n.color:a)}}truncateLegendText(){const e=this.getComponentContainer(),n=y(this.getOptions(),"legend","truncation"),r=y(n,"type"),i=y(n,"threshold"),o=y(n,"numCharacter"),s=e.selectAll("div.legend-item p");s.attr("id",function(){return(this.parentNode.querySelector("div.checkbox")||this.parentNode).getAttribute("aria-labelledby")}),r!==Ct.NONE?s.html(function(a){const l=dn(a.name);return l.length>i&&l.length!==o?ro(l,r,o):l}):s.html(a=>dn(a.name))}addEventListeners(){const e=this,n=this.getComponentContainer(),r=this.getOptions(),i=y(r,"legend"),o=y(i,"truncation");n.selectAll("div.legend-item").on("mouseover",function(s){e.services.events.dispatchEvent(O.Legend.ITEM_HOVER,{hoveredElement:L(this)});const a=L(this);a.select("div.checkbox").classed("hovered",!0);const l=a.datum();l.name.length>o.threshold&&o.numCharacter<l.name.length&&o.type!==Ct.NONE&&e.services.events.dispatchEvent(O.Tooltip.SHOW,{event:s,hoveredElement:a,content:l.name})}).on("mousemove",function(s){L(this).datum().name.length>o.threshold&&o.type!==Ct.NONE&&e.services.events.dispatchEvent(O.Tooltip.MOVE,{event:s})}).on("click",function(){e.services.events.dispatchEvent(O.Legend.ITEM_CLICK,{clickedElement:L(this)});const s=L(this).datum();e.model.toggleDataLabel(s.name)}).on("mouseout",function(){const s=L(this);s.select("div.checkbox").classed("hovered",!1),s.datum().name.length>o.threshold&&o.type!==Ct.NONE&&e.services.events.dispatchEvent(O.Tooltip.HIDE),e.services.events.dispatchEvent(O.Legend.ITEM_MOUSEOUT,{hoveredElement:s})}),n.selectAll("div.legend-item div.checkbox").on("keyup",function(s){s.key&&"Tab"===s.key&&e.services.events.dispatchEvent(O.Legend.ITEM_HOVER,{hoveredElement:L(this)})}),n.selectAll("div.legend-item div.checkbox").on("keydown",function(s,a){s.key&&" "===s.key?(s.preventDefault(),e.model.toggleDataLabel(a.name)):s.key&&"Tab"===s.key&&e.services.events.dispatchEvent(O.Legend.ITEM_MOUSEOUT,{hoveredElement:L(this)})}),n.selectAll("g.additional-item").on("mouseover",function(s){const a=L(this),l=a.datum();l.name.length>o.threshold&&e.services.events.dispatchEvent(O.Tooltip.SHOW,{event:s,hoveredElement:a,content:l.name})})}}class Q_ extends fe{constructor(e,n,r){super(e,n,r),this.type="chart-clip",this.renderType=re.SVG,this.chartClipId="chart-clip-id-"+Math.floor(99999999999*Math.random()),this.init()}init(){this.model.set({chartClipId:this.chartClipId},{skipUpdate:!0})}render(e=!0){this.createClipPath()}createClipPath(){const e=this.parent,{cartesianScales:n}=this.services;if(!n)throw new Error("Service cartesianScales was undefined");const r=n.getMainXScale(),i=n.getMainYScale(),[o,s]=r.range(),[a,l]=i.range();if(!e)throw new Error("svg is undefined");this.chartClipPath=I.appendOrSelect(e,`clipPath.${this.type}`).attr("id",this.chartClipId);const c=I.appendOrSelect(this.chartClipPath,`rect.${this.type}`);s-o>0&&c.attr("x",o).attr("y",l).attr("width",s-o).attr("height",a-l),this.chartClipPath.merge(c).lower()}}class ZR extends Q_{constructor(){super(...arguments),this.type="canvas-chart-clip",this.chartClipId="canvas-chart-clip-id-"+Math.floor(99999999999*Math.random())}createClipPath(){const e=this.parent,{width:n,height:r}=I.getSVGElementSize(this.parent,{useAttrs:!0});this.chartClipPath=I.appendOrSelect(e,`clipPath.${this.type}`).attr("id",this.chartClipId);const i=I.appendOrSelect(this.chartClipPath,`rect.${this.type}`);i.attr("x",0).attr("y",0).attr("width",n).attr("height",r),this.chartClipPath.merge(i).lower()}}var ui,Ke;!function(t){t.LEFT="left",t.RIGHT="right",t.TOP="top",t.BOTTOM="bottom"}(Ke||(Ke={}));var J_=((ui={})[Ke.LEFT]=function(t,e,n){return{top:t.top-Math.round(e.offsetHeight/2)+Math.round(n.height/2),left:Math.round(t.left-e.offsetWidth)}},ui[Ke.RIGHT]=function(t,e,n){return{top:t.top-Math.round(e.offsetHeight/2)+Math.round(n.height/2),left:Math.round(t.left+n.width)}},ui[Ke.TOP]=function(t,e,n){return{top:Math.round(t.top-e.offsetHeight),left:t.left-Math.round(e.offsetWidth/2)+Math.round(n.width/2)}},ui[Ke.BOTTOM]=function(t,e,n){return{top:Math.round(t.top+n.height),left:t.left-Math.round(e.offsetWidth/2)+Math.round(n.width/2)}},ui),ev=typeof window<"u"?window:{innerHeight:0,innerWidth:0},_l=function(){function t(e){void 0===e&&(e={}),this.positions=J_,this.positions=Object.assign({},J_,e)}return t.prototype.getRelativeOffset=function(e){for(var n={left:e.offsetLeft,top:e.offsetTop};e.offsetParent&&"static"===getComputedStyle(e.offsetParent).position;)n.left+=e.offsetLeft,n.top+=e.offsetTop,e=e.offsetParent;return n},t.prototype.getAbsoluteOffset=function(e){for(var n=e,r={top:0,left:0};n.offsetParent;){var i=getComputedStyle(n.offsetParent);"static"===i.position&&i.marginLeft&&i.marginTop&&(parseInt(i.marginTop,10)&&(r.top+=parseInt(i.marginTop,10)),parseInt(i.marginLeft,10)&&(r.left+=parseInt(i.marginLeft,10))),n=n.offsetParent}var o=e.getBoundingClientRect(),s=document.body.getBoundingClientRect();return{top:o.top-s.top+r.top,left:o.left-s.left+r.left}},t.prototype.findRelative=function(e,n,r){var i=this.getRelativeOffset(e),o=e.getBoundingClientRect();return this.calculatePosition(i,o,n,r)},t.prototype.findAbsolute=function(e,n,r){var i=this.getAbsoluteOffset(e),o=e.getBoundingClientRect();return this.calculatePosition(i,o,n,r)},t.prototype.findPosition=function(e,n,r,i){void 0===i&&(i=this.getAbsoluteOffset.bind(this));var o=i(e),s=e.getBoundingClientRect();return this.calculatePosition(o,s,n,r)},t.prototype.findPositionAt=function(e,n,r){return this.calculatePosition(e,{top:0,left:0,height:0,width:0},n,r)},t.prototype.getPlacementBox=function(e,n){var r=e.offsetHeight+n.top,i=e.offsetWidth+n.left;return{top:n.top,bottom:r,left:n.left,right:i}},t.prototype.addOffset=function(e,n,r){return void 0===n&&(n=0),void 0===r&&(r=0),Object.assign({},e,{top:e.top+n,left:e.left+r})},t.prototype.setElement=function(e,n){e.style.top=n.top+"px",e.style.left=n.left+"px"},t.prototype.findBestPlacement=function(e,n,r,i,o){var s=this;void 0===i&&(i=this.defaultContainerFunction.bind(this)),void 0===o&&(o=this.findPosition.bind(this));var a=r.map(function(l){var c=o(e,n,l),u=s.getPlacementBox(n,c),d=0,h=0,p=i();u.top<p.top?d=p.top-u.top:u.bottom>p.height&&(d=u.bottom-p.height),u.left<p.left?h=p.left-u.left:u.right>p.width&&(h=u.right-p.width),d&&!h?h=1:h&&!d&&(d=1);var m=n.offsetHeight*n.offsetWidth;return{placement:l,weight:(m-d*h)/m}});return a.sort(function(l,c){return c.weight-l.weight}),a[0].placement},t.prototype.findBestPlacementAt=function(e,n,r,i){var o=this;void 0===i&&(i=this.defaultContainerFunction.bind(this));return this.findBestPlacement(null,n,r,i,function(a,l,c){return o.findPositionAt(e,l,c)})},t.prototype.defaultContainerFunction=function(){return{top:0,left:0,height:ev.innerHeight,width:ev.innerWidth}},t.prototype.calculatePosition=function(e,n,r,i){return this.positions[i]?this.positions[i](e,r,n):(console.error("No function found for placement, defaulting to 0,0"),{left:0,top:0})},t}();new _l;class Wh extends fe{constructor(e,n,r){super(e,n,r),this.type="tooltip",this.renderType=re.HTML,this.isEventListenerAdded=!1,this.lastTriggeredEventType="",this.positionService=new _l,this.handleShowTooltip=i=>{const o=i.detail.data||i.detail.items,s=L(i.detail.event.target).datum();let a;const l=this.formatItems(this.getItems(i));a=i.detail.content?`<div class="title-tooltip"><p>${ml(i.detail.content)}</p></div>`:ml(this.getTooltipHTML(l));const c=I.appendOrSelect(this.tooltip,"div.content-box");if(y(this.getOptions(),"tooltip","customHTML"))if(i.detail.content){const u=`<div class="title-tooltip"><p>${ml(i.detail.content)}</p></div>`;c.html(u)}else c.html(`<div class="title-tooltip"><p>${ml(this.model.getOptions().tooltip.customHTML(o,a,s))}</p></div>`);else c.html(a);c.selectAll(".datapoint-tooltip").each(function(u,d){const h=l[d];l[d]&&l[d].color&&L(this).select(".tooltip-color").attr("class","tooltip-color").style("background-color",h.color)}),this.positionTooltip(i),this.tooltip.classed("hidden",!1).attr("aria-hidden",!1),this.lastTriggeredEventType=i.type},this.handleHideTooltip=()=>{this.tooltip.classed("hidden",!0).attr("aria-hidden",!0)},this.init()}addTooltipEventListener(){this.services.events.addEventListener(O.Tooltip.MOVE,e=>{this.lastTriggeredEventType!==O.Toolbar.SHOW_TOOLTIP&&!1===this.tooltip.classed("hidden")&&this.positionTooltip(e)}),this.services.events.addEventListener(O.Tooltip.SHOW,this.handleShowTooltip),this.services.events.addEventListener(O.Tooltip.HIDE,this.handleHideTooltip),this.services.events.addEventListener(O.Chart.MOUSEOUT,this.handleHideTooltip),this.services.events.addEventListener(O.Toolbar.SHOW_TOOLTIP,this.handleShowTooltip),this.services.events.addEventListener(O.Toolbar.HIDE_TOOLTIP,this.handleHideTooltip)}removeTooltipEventListener(){this.services.events.removeEventListener(O.Tooltip.MOVE,null),this.services.events.removeEventListener(O.Tooltip.SHOW,this.handleShowTooltip),this.services.events.removeEventListener(O.Tooltip.HIDE,this.handleHideTooltip),this.services.events.removeEventListener(O.Chart.MOUSEOUT,this.handleHideTooltip),this.services.events.removeEventListener(O.Toolbar.SHOW_TOOLTIP,this.handleShowTooltip),this.services.events.removeEventListener(O.Toolbar.HIDE_TOOLTIP,this.handleHideTooltip)}getItems(e){return e.detail.items?e.detail.items:[]}formatItems(e){const n=this.getOptions(),r=y(n,"tooltip","truncation","type"),i=y(n,"tooltip","truncation","threshold"),o=y(n,"tooltip","truncation","numCharacter");return r!==Ct.NONE?e.map(s=>{const a=s.labelIcon?12:0;return s.value=this.valueFormatter(s.value,s.label),s.label&&s.label.length+a>i&&(s.label=ro(s.label,r,o)),s.value&&s.value.length>i&&(s.value=ro(s.value,r,o)),s}):e.map(s=>(s.value=this.valueFormatter(s.value,s.label),s))}getTooltipHTML(e){return'<ul class="multi-tooltip">'+e.map(n=>`<li>\n\t\t\t\t\t<div class="datapoint-tooltip${n.bold?" bold":""}">\n\t\t\t\t\t\t${n.class||n.color?`<div class="tooltip-color ${n.class}"></div>`:""}\n\t\t\t\t\t\t<div class="label">\n\t\t\t\t\t\t<p>${n.label||""}</p>\n\t\t\t\t\t\t${n.labelIcon?`<span class="label-icon"/>${n.labelIcon}</span>`:""}\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t${void 0===n.value||null===n.value?"":`<p class="value"/>${n.value}</p>`}\n\t\t\t\t\t</div>\n\t\t\t\t</li>`).join("")+"</ul>"}isDate(e){return e instanceof Date}valueFormatter(e,n){const r=this.getOptions(),i=y(r,"tooltip","valueFormatter"),{code:o,number:s,date:a}=y(r,"locale");if(i)return i(e,n);if(this.isDate(e))return a(e,o,{month:"short",day:"numeric",year:"numeric"});try{if("string"==typeof e&&/\d{4}-\d{2}-\d{2}T\d{2}:\d{2}:\d{2}.\d{3}Z/.test(e)){return a(new Date(e),o,{month:"short",day:"numeric",year:"numeric"})}}catch{}return s(e,o)}render(e=!1){const n=this.getOptions(),r=y(n,"tooltip","enabled");if(r){const i=L(this.services.domUtils.getHolder()),o=y(n,"style","prefix");this.tooltip=I.appendOrSelect(i,`div.${st}--${o}--tooltip`),this.tooltip.style("max-width",null).attr("role","tooltip"),this.isEventListenerAdded||(this.addTooltipEventListener(),this.isEventListenerAdded=!0),this.tooltip.classed("hidden",!0)}else!r&&this.isEventListenerAdded&&(this.removeTooltipEventListener(),this.isEventListenerAdded=!1)}addOffsetByPlacement(e,n,r){const i=Object.assign({},e);return n==Ke.LEFT?i.left-=r:n==Ke.RIGHT?i.left+=r:n==Ke.TOP?i.top-=r:n==Ke.BOTTOM&&(i.top+=r),i}positionTooltip(e){const n=this.services.domUtils.getHolder(),r=n.offsetWidth,i=n.offsetHeight,o=this.tooltip.node(),s=this.getOptions(),a=y(s,"zoomBar","top","enabled"),l=!!y(e,"detail","noWrap"),c=Array.isArray(y(e,"detail","placements")),u=c?y(e,"detail","placements"):[Ke.RIGHT,Ke.LEFT,Ke.TOP,Ke.BOTTOM];let d,{horizontalOffset:h}=Nc;const{defaultOffset:p}=Nc;if(this.tooltip.select("div.title-tooltip").classed("title-tooltip-nowrap",l),c){const f=y(e,"detail","event","target"),v=this.services.domUtils.getElementOffset(f,!0);d=this.positionService.findBestPlacementAt(v,o,u,()=>({top:0,left:0,width:r,height:i}));let C=this.positionService.findPosition(f,o,d,()=>this.services.domUtils.getElementOffset(f));return C=this.addOffsetByPlacement(C,d,p),void this.positionService.setElement(o,C)}let m=y(e,"detail","mousePosition");if(m){const f=y(s,"zoomBar","top","type"),v=gt.height[f];a&&(m[1]+=v+gt.spacerHeight)}else m=ar(y(e,"detail","event"),n);d=m[0]/r>.9?Ke.LEFT:m[0]/r<.1?Ke.RIGHT:this.positionService.findBestPlacementAt({left:m[0],top:m[1]},o,u,()=>({top:void 0,left:void 0,width:r,height:i})),d===Ke.LEFT&&(h*=-1);const _=this.positionService.findPositionAt({left:m[0]+h,top:m[1]},o,d);this.positionService.setElement(o,_)}}const tv=class Ll extends fe{constructor(){super(...arguments),this.type="grid-brush",this.renderType=re.SVG,this.selectionSelector="rect.selection",this.frontSelectionSelector="rect.frontSelection"}render(e=!0){const n=this.parent,r=this.getComponentContainer({isPresentational:!0});if(!n)throw new Error("SVG was not defined");const i=I.appendOrSelect(n,"svg.chart-grid-backdrop"),o=I.appendOrSelect(i,`g.${this.type}`),s=I.appendOrSelect(o,this.selectionSelector),{width:a,height:l}=I.getSVGElementSize(i,{useAttrs:!0}),{cartesianScales:c}=this.services,u=c.getMainXScaleType(),d=c.getMainXScale(),[h]=d.range();r.attr("transform",`translate(${h},0)`);const p=I.appendOrSelect(r,this.frontSelectionSelector);if(d&&u===ne.TIME){let m=this.model.get("zoomDomain");void 0===m&&(m=this.services.zoom.getDefaultZoomBarDomain(),m&&this.model.set({zoomDomain:m},{animate:!1}));const _=T=>{const S=T[1]-T[0];let M="0,"+S.toString();const D=Math.floor(l/Ll.DASH_LENGTH),k=D*Ll.DASH_LENGTH;for(let H=0;H<D;H++)M+=","+Ll.DASH_LENGTH;M+=","+(l-k),D%2==1&&(M+=",0"),M+=","+S.toString(),M+=","+l.toString(),p.attr("stroke-dasharray",M)},f=T=>{const S=T.selection;null===S||S[0]===S[1]||(p.attr("x",parseFloat(s.attr("x"))+parseFloat(i.attr("x"))).attr("y",s.attr("y")).attr("width",s.attr("width")).attr("height",s.attr("height")).style("cursor","pointer").style("display",null),_(S))},v=(T,S)=>{const M=Ng().range([0,a]).domain(m);let D=[M.invert(T),M.invert(S)];D[0].valueOf()===D[1].valueOf()&&(D=this.services.zoom.getDefaultZoomBarDomain()),(m[0].valueOf()!==D[0].valueOf()||m[1].valueOf()!==D[1].valueOf())&&this.services.zoom.handleDomainChange(D)};let C;const x=T=>{const S=T.selection;null!==S&&(v(S[0],S[1]),o.call(C.move,null),p.style("display","none"))};0!=l&&0!=a&&(C=Lf().extent([[0,0],[a-1,l]]).on("start brush end",f).on("end.brushed",x),o.call(C));const b=this.services.zoom.getZoomRatio();i.on("click",function(T){if(T.shiftKey){const S=this.services.domUtils.getHolder(),M=ar(o.node(),S)[0];let D=M-a*b/2;D<0&&(D=0);let k=M+a*b/2;k>a&&(k=a),v(D,k)}})}}};tv.DASH_LENGTH=4;let QR=tv;class JR extends fe{constructor(){super(...arguments),this.type="zoom-bar",this.renderType=re.SVG,this.MIN_SELECTION_DIFF=9e-10,this.brushSelector="g.zoom-bar-brush",this.clipId="zoomBarClip-"+Math.floor(99999999999*Math.random()),this.brush=Lf(),this.highlightStrokeWidth=1}init(){this.services.events.addEventListener(O.ZoomBar.UPDATE,this.render.bind(this));const e=y(this.getOptions(),"zoomBar",j.TOP,"data");this.model.setZoomBarData(e)}render(e=!0){const n=this.getComponentContainer({ariaLabel:"zoom bar"}),r=this.services.zoom.isZoomBarLoading(j.TOP),i=this.services.zoom.isZoomBarLocked(j.TOP),o=y(this.getOptions(),"zoomBar",j.TOP,"type"),s=y(this.getOptions(),"axes",j.BOTTOM,"highlights"),a=gt.height[o],{width:l}=I.getSVGElementSize(this.parent,{useAttrs:!0});if(0===l)return;let c=0;const u=this.model.get("axesMargins");u&&u.left&&(c=u.left);const d=I.appendOrSelect(n,"svg.zoom-container").attr("width","100%").attr("height",a).attr("opacity",1);if(I.appendOrSelect(n,"rect.zoom-spacer").attr("x",0).attr("y",a).attr("width","100%").attr("height",gt.spacerHeight).attr("opacity",1).attr("fill","none"),o===Mt.GRAPH_VIEW?I.appendOrSelect(d,"rect.zoom-bg").attr("x",c).attr("y",0).attr("width",l-c).attr("height","100%").classed("zoom-bg-skeleton",r).style("stroke",r?`url(#${this.services.domUtils.generateElementIDString("shimmer-lines")})`:null):o===Mt.SLIDER_VIEW&&I.appendOrSelect(d,"rect.zoom-slider-bg").attr("x",c).attr("y",a/2-1).attr("width",l-c).attr("height",2).classed("zoom-slider-bg-skeleton",r).style("stroke",r?`url(#${this.services.domUtils.generateElementIDString("shimmer-lines")})`:null),r)return void this.renderSkeleton(d,c,l);const{cartesianScales:h}=this.services,p=h.getMainXScale(),m=h.getMainYScale(),_=h.getMainXScaleType();if(p&&_===ne.TIME){let f=this.services.zoom.getZoomBarData();if(Gt(f)||1===f.length)return;this.xScale=p.copy(),this.yScale=m.copy();const v=this.services.zoom.getDefaultZoomBarDomain(f);f=this.compensateDataForDefaultDomain(f,v);const C=this.model.get("initialZoomDomain"),x=y(this.getOptions(),"zoomBar",j.TOP,"initialZoomDomain");x&&x[0]&&x[1]&&(x[0]=new Date(x[0]),x[1]=new Date(x[1])),!x||C&&C[0].valueOf()===x[0].valueOf()&&C[1].valueOf()===x[1].valueOf()?null===x&&null!==C&&this.model.set({initialZoomDomain:null,zoomDomain:se([],v)},{skipUpdate:!0}):this.model.set({initialZoomDomain:se([],x),zoomDomain:x?se([],x):v},{skipUpdate:!0}),this.xScale.range([c,l]).domain(v),this.maxSelectionRange=this.xScale.range(),this.yScale.range([0,a-6]).domain(zt(f,S=>S.value));const b=this.model.get("zoomDomain");if(o===Mt.GRAPH_VIEW&&(this.renderZoomBarArea(d,"path.zoom-graph-area-unselected",f,null),this.updateClipPath(n,this.clipId,0,0,0,0),this.renderZoomBarArea(d,"path.zoom-graph-area",f,this.clipId),this.renderZoomBarBaseline(d,c,l),s)){const S=s.highlightStartMapsTo,M=s.highlightEndMapsTo,D=s.color,k=s.labelMapsTo;s.data.forEach((H,F)=>{I.appendOrSelect(d,`rect.highlight-${F}`).attr("height",a-2*this.highlightStrokeWidth).attr("y",this.highlightStrokeWidth).attr("x",this.xScale(H[S])).attr("width",this.xScale(H[M])-this.xScale(H[S])).style("fill",D&&D.scale[H[k]]?D.scale[H[k]]:null).style("fill-opacity",.1).style("stroke",D&&D.scale[H[k]]?D.scale[H[k]]:null).style("stroke-dasharray","2, 2").attr("stroke-width","1px")})}this.addBrushEventListener(b,c,l);const T=I.appendOrSelect(n,this.brushSelector).call(this.brush);if(void 0!==b)if(b[0].valueOf()===b[1].valueOf())T.call(this.brush.move,this.xScale.range()),this.updateBrushHandle(this.getComponentContainer(),this.xScale.range());else{const S=b.map(M=>this.xScale(M));S[1]-S[0]<this.MIN_SELECTION_DIFF||(T.call(this.brush.move,S),this.updateBrushHandle(this.getComponentContainer(),S))}i&&(this.brush.filter(()=>!1),T.selectAll("rect").attr("cursor","auto"))}}addBrushEventListener(e,n,r){const o=y(this.getOptions(),"zoomBar",j.TOP,"type"),s=gt.height[o];this.brush.extent([[n,0],[r,s]]).on("start brush end",null).on("start brush end",a=>{const l=a.selection;null===l?this.handleBrushedEvent(a,e,this.xScale,this.xScale.range()):l[0]===l[1]||this.handleBrushedEvent(a,e,this.xScale,l)})}handleBrushedEvent(e,n,r,i){const o=[r.invert(i[0]),r.invert(i[1])];if(this.updateBrushHandle(this.getComponentContainer(),i),null!=e.sourceEvent&&("mousemove"===e.sourceEvent.type||"mouseup"===e.sourceEvent.type||"mousedown"===e.sourceEvent.type||"touchstart"===e.sourceEvent.type||"touchmove"===e.sourceEvent.type||"touchend"===e.sourceEvent.type)){let s;(void 0===n||n[0]!==o[0]||n[1]!==o[1])&&this.services.zoom.handleDomainChange(o,{dispatchEvent:!1}),"start"===e.type?s=O.ZoomBar.SELECTION_START:"brush"===e.type?s=O.ZoomBar.SELECTION_IN_PROGRESS:"end"===e.type&&(s=O.ZoomBar.SELECTION_END,this.services.events.dispatchEvent(O.ZoomDomain.CHANGE,{newDomain:o})),this.services.events.dispatchEvent(s,{selection:i,newDomain:o})}}updateBrushHandle(e,n){const r=this,i=gt.handleWidth,o=y(this.getOptions(),"zoomBar",j.TOP,"type"),s=gt.height[o],a=-i/2,l=gt.handleBarWidth,c=o===Mt.GRAPH_VIEW?gt.handleBarHeight:6,u=-l/2,d=(s-c)/2;e.select(this.brushSelector).selectAll("rect.handle").data([{type:"w"},{type:"e"}]).attr("x",function(p){return"w"===p.type?Math.max(n[0]+a,r.maxSelectionRange[0]):"e"===p.type?Math.min(n[1]+a,r.maxSelectionRange[1]-i):void 0}).attr("y",0).attr("width",i).attr("height",s).attr("cursor","ew-resize").style("display",null);const h=e.select(this.brushSelector).selectAll("rect.handle-bar").data([{type:"w"},{type:"e"}]);h.enter().append("rect").attr("class",function(p){return"handle-bar handle-bar--"+p.type}),h.attr("x",function(p){return"w"===p.type?Math.max(n[0]+u,r.maxSelectionRange[0]-a+u):"e"===p.type?Math.min(n[1]+u,r.maxSelectionRange[1]+a+u):void 0}).attr("y",d).attr("width",l).attr("height",c).attr("cursor","ew-resize"),o===Mt.SLIDER_VIEW&&this.updateSliderSelectedArea(n),this.updateClipPath(e,this.clipId,n[0],0,n[1]-n[0],s)}updateSliderSelectedArea(e){const n=y(this.getOptions(),"zoomBar",j.TOP,"type"),r=gt.height[n],i=this.getComponentContainer().select("svg.zoom-container");I.appendOrSelect(i,"rect.zoom-slider-selected-area").attr("x",e[0]).attr("y",r/2-1).attr("width",e[1]-e[0]).attr("height",2)}renderZoomBarArea(e,n,r,i){const{cartesianScales:o}=this.services,s=o.getMainXAxisPosition(),a=o.getMainYAxisPosition(),l=o.getMainXScaleType(),c=o.getMainYScaleType(),u=(v,C,x)=>b=>o.getValueFromScale(v,C,x,b),d=u(this.xScale,l,s),h=u(this.yScale,c,a),p=y(this.getOptions(),"zoomBar",j.TOP,"type"),m=gt.height[p],_=Mh().x(v=>d(v)).y0(m).y1(v=>m-h(v)),f=I.appendOrSelect(e,n).datum(r).attr("d",_);i&&f.attr("clip-path",`url(#${i})`)}updateClipPath(e,n,r,i,o,s){const a=I.appendOrSelect(e,"clipPath").attr("id",n);I.appendOrSelect(a,"rect").attr("x",r).attr("y",i).attr("width",o).attr("height",s)}compensateDataForDefaultDomain(e,n){if(!e||e.length<2)return;const r=_n(e),i=this.services.cartesianScales.getDomainIdentifier(),o=this.services.cartesianScales.getRangeIdentifier();if(Number(n[0])<Number(r[0][i])){const s={};s[i]=n[0],s[o]=0,r.unshift(s)}if(Number(n[1])>Number(r[r.length-1][i])){const s={};s[i]=n[1],s[o]=0,r.push(s)}return r}renderZoomBarBaseline(e,n,r,i=!1){const o=y(this.model.getOptions(),"zoomBar",j.TOP,"type"),s=gt.height[o],a=Mo()([[n,s],[r,s]]);I.appendOrSelect(e,"path.zoom-bg-baseline").attr("d",a).classed("zoom-bg-baseline-skeleton",i).style("stroke",i?`url(#${this.services.domUtils.generateElementIDString("shimmer-lines")})`:null)}renderSkeleton(e,n,r){this.renderZoomBarArea(e,"path.zoom-graph-area-unselected",[],null),this.renderZoomBarArea(e,"path.zoom-graph-area",[],this.clipId),this.brush.on("start brush end",null),I.appendOrSelect(this.getComponentContainer(),this.brushSelector).html(null),y(this.getOptions(),"zoomBar",j.TOP,"type")===Mt.GRAPH_VIEW&&this.renderZoomBarBaseline(e,n,r,!0)}destroy(){this.brush.on("start brush end",null),this.services.events.removeEventListener(O.ZoomBar.UPDATE,this.render.bind(this))}}class eD extends fe{constructor(e,n){super(e,n),this.type="threshold",this.renderType=re.SVG,this.positionService=new _l}render(e=!1){const n=y(this.getOptions(),"axes"),r=[];Object.keys(n).forEach(c=>{if(Object.values(j).includes(c)){const u=n[c];u.thresholds&&u.thresholds.length>0&&r.push({axisPosition:c,thresholds:u.thresholds,correspondingDatasets:u?.correspondingDatasets,mapsTo:u?.mapsTo})}});const i=this.getComponentContainer({ariaLabel:"threshold lines",withinChartClip:!0}).selectAll("g.axis-thresholds").data(r,c=>c.axisPosition);i.exit().attr("opacity",0).remove();const o=i.enter().append("g").merge(i);o.attr("class",c=>`axis-thresholds ${c.axisPosition}`);const s=o.selectAll("g.threshold-group").data(c=>c.thresholds.map(u=>(u.axisPosition=c.axisPosition,u.datum=this.constructDatumObj(c,u),u)));s.exit().attr("opacity",0).remove();const a=s.enter().append("g");a.append("line").attr("class","threshold-line"),a.append("rect").attr("class","threshold-hoverable-area"),a.merge(s).attr("class","threshold-group");const l=this;o.each(function({axisPosition:c}){const u=l.services.cartesianScales.getScaleByPosition(c),d=l.services.cartesianScales.getScaleTypeByPosition(c);let h=null,p=null;c===j.LEFT||c===j.RIGHT?(p=u,h=l.services.cartesianScales.getMainXScale()):(h=u,p=l.services.cartesianScales.getMainYScale());const m=d===ne.LABELS,[_,f]=h.range(),[v,C]=p.range(),{cartesianScales:x}=l.services,b=x.getOrientation(),[M,D]=bn(H=>x.getDomainValue(H),H=>x.getRangeValue(H),b),k=L(this);c===j.TOP||c===j.BOTTOM?(k.selectAll("line.threshold-line").transition().call(H=>l.services.transitions.setupTransition({transition:H,name:"threshold-line-update",animate:e})).attr("y1",C).attr("y2",v).attr("x1",({datum:H})=>M(H)+(m?u.step()/2:0)).attr("x2",({datum:H})=>M(H)+(m?u.step()/2:0)).style("stroke",({fillColor:H})=>H),k.selectAll("rect.threshold-hoverable-area").attr("x",0).attr("y",({datum:H})=>-M(H)).attr("width",Math.abs(v-C)).classed("rotate",!0)):(k.selectAll("line.threshold-line").transition().call(H=>l.services.transitions.setupTransition({transition:H,name:"threshold-line-update",animate:e})).attr("x1",_).attr("x2",f).attr("y1",({datum:H})=>D(H)+(m?u.step()/2:0)).attr("y2",({datum:H})=>D(H)+(m?u.step()/2:0)).style("stroke",({fillColor:H})=>H),k.selectAll("rect.threshold-hoverable-area").attr("x",_).attr("y",({datum:H})=>D(H)).attr("width",Math.abs(f-_)).classed("rotate",!1))}),this.services.events.addEventListener(O.Threshold.SHOW,c=>{this.setThresholdLabelPosition(c.detail),this.label.classed("hidden",!1)}),this.services.events.addEventListener(O.Threshold.HIDE,()=>{this.label.classed("hidden",!0)}),this.appendThresholdLabel(),this.addEventListeners()}getFormattedValue(e){const{value:n,axisPosition:r}=e,i=this.getOptions(),o=this.services.cartesianScales.getScaleTypeByPosition(r),{code:s,number:a}=y(i,"locale");if(o===ne.TIME){const l=[j.LEFT,j.RIGHT].includes(r),c=this.services.cartesianScales.getMainXScale(),u=this.services.cartesianScales.getMainYScale(),d=l?u:c,h=y(i,"timeScale"),p=Kc(d.ticks(),y(h,"timeInterval"));return zc(n,0,d.ticks(),p,h,i.locale)}return a(n,s)}appendThresholdLabel(){const e=L(this.services.domUtils.getHolder()),n=y(this.getOptions(),"style","prefix");this.label=I.appendOrSelect(e,`div.${st}--${n}--threshold--label`).classed("hidden",!0)}setThresholdLabelPosition({event:e,datum:n}){const r=this.services.domUtils.getHolder(),i=ar(e,r),o=n.valueFormatter?n.valueFormatter(n.value):this.getFormattedValue(n);this.label.html(dn(`${n.label||"Threshold"}: ${o}`)).style("background-color",n.fillColor);const s=this.label.node(),a=this.positionService.findBestPlacementAt({left:i[0],top:i[1]},s,[Ke.RIGHT,Ke.LEFT,Ke.TOP,Ke.BOTTOM],()=>({top:void 0,left:void 0,width:r.offsetWidth,height:r.offsetHeight})),l=this.positionService.findPositionAt({left:i[0],top:i[1]},s,a);this.positionService.setElement(s,l)}constructDatumObj(e,n){const r={};return e.correspondingDatasets&&(r.group=y(e,"correspondingDatasets",0)),r[e.mapsTo]=n.value,r}addEventListeners(){const e=this;this.getComponentContainer({withinChartClip:!0}).selectAll("rect.threshold-hoverable-area").on("mouseover mousemove",function(n){L(this.parentNode).select("line.threshold-line").classed("active",!0),e.services.events.dispatchEvent(O.Threshold.SHOW,{event:n,hoveredElement:L(this),datum:L(this).datum()})}).on("mouseout",function(n){L(this.parentNode).select("line.threshold-line").classed("active",!1),e.services.events.dispatchEvent(O.Threshold.HIDE,{event:n,hoveredElement:L(this),datum:L(this).datum()})})}}class tD extends fe{constructor(e,n){super(e,n),this.type="highlight",this.renderType=re.SVG,this.positionService=new _l,this.highlightStrokeWidth=1}render(e=!1){const n=y(this.getOptions(),"axes"),r=[];Object.keys(n).forEach(c=>{if(Object.values(j).includes(c)){const u=n[c];u.highlights&&u.highlights.data.length>0&&r.push({axisPosition:c,highlightStartMapsTo:u.highlights.highlightStartMapsTo,highlightEndMapsTo:u.highlights.highlightEndMapsTo,labelMapsTo:u.highlights.labelMapsTo,highlight:u.highlights.data,color:u.highlights.color})}});const i=this.getComponentContainer({ariaLabel:"highlight areas",withinChartClip:!0}).selectAll("g.axis-highlight").data(r,c=>c.axisPosition);i.exit().attr("opacity",0).remove();const o=i.enter().append("g").merge(i);o.attr("class",c=>`axis-highlight ${c.axisPosition}`);const s=o.selectAll("g.highlight-group").data(c=>c.highlight.map(u=>(u.axisPosition=c.axisPosition,u.highlightStartMapsTo=c.highlightStartMapsTo,u.labelMapsTo=c.labelMapsTo,u.color=c.color,u.highlightEndMapsTo=c.highlightEndMapsTo,u)));s.exit().attr("opacity",0).remove();const a=s.enter().append("g");a.append("rect").attr("class","highlight-bar"),a.append("line").attr("class","highlight-line"),a.merge(s).attr("class","highlight-group");const l=this;o.each(function({axisPosition:c}){const u=l.services.cartesianScales.getMainXScale(),d=l.services.cartesianScales.getMainYScale(),[h,p]=u.range(),[m,_]=d.range(),{cartesianScales:f}=l.services,v=f.getOrientation(),[b,T]=bn(M=>f.getDomainValue(M),M=>f.getRangeValue(M),v),S=L(this);c===j.TOP||c===j.BOTTOM?S.selectAll("rect.highlight-bar").transition().call(M=>l.services.transitions.setupTransition({transition:M,name:"highlight-bar-update",animate:e})).attr("y",Math.max(_+l.highlightStrokeWidth,0)).attr("height",Math.max(m-2*l.highlightStrokeWidth,0)).attr("x",({highlightStartMapsTo:M,...D})=>b(D[M])).attr("width",({highlightStartMapsTo:M,highlightEndMapsTo:D,...k})=>Math.max(b(k[D])-b(k[M]),0)).style("stroke",({color:M,labelMapsTo:D,...k})=>M&&M.scale[k[D]]?M.scale[k[D]]:null).style("stroke-dasharray","2, 2").attr("stroke-width",l.highlightStrokeWidth+"px").style("fill-opacity",.1).style("fill",({color:M,labelMapsTo:D,...k})=>M&&M.scale[k[D]]?M.scale[k[D]]:null):S.selectAll("rect.highlight-bar").transition().call(M=>l.services.transitions.setupTransition({transition:M,name:"highlight-bar-update",animate:e})).attr("x",h).attr("width",Math.max(p-h,0)).attr("y",({highlightEndMapsTo:M,...D})=>T(D[M])).attr("height",({highlightStartMapsTo:M,highlightEndMapsTo:D,...k})=>Math.max(T(k[M])-T(k[D]),0)).style("stroke",({color:M,labelMapsTo:D,...k})=>M&&M.scale[k[D]]?M.scale[k[D]]:null).style("stroke-dasharray","2, 2").attr("stroke-width",l.highlightStrokeWidth+"px").style("fill-opacity",.1).style("fill",({color:M,labelMapsTo:D,...k})=>M&&M.scale[k[D]]?M.scale[k[D]]:null)})}}class nv extends Wh{getItems(e){if(e.detail.items)return e.detail.items;const{data:n}=e.detail;if(!n||!n.length||!n[0])return[];const r=this.getOptions(),{cartesianScales:i}=this.services,o=i.getDomainIdentifier(),s=i.isDualAxes(),{groupMapsTo:a}=r.data,l=i.getDomainLabel();let c=i.getRangeLabel();const u=n[0][o];let d;if(1===n.length){const h=n[0],p=i.getRangeIdentifier(h);if(s){const _=i.getRangeAxisPosition({datum:h,groups:[h[a]]});c=i.getScaleLabel(_)}const m=h[p];d=[{label:l,value:u},...Array.isArray(m)&&2===m.length?[{label:"Start",value:m[0]},{label:"End",value:m[1]}]:[{label:c,value:h[p]}]],e.detail.additionalItems&&e.detail.additionalItems.forEach(_=>d.push({label:_.label,value:_.value})),d.push({label:ve(r,"locale.translations.group")||ve(r,"tooltip.groupLabel"),value:h[a],color:this.model.getFillColor(h[a]),class:this.model.getColorClassName({classNameTypes:[oe.TOOLTIP],dataGroupName:h[a]})})}else if(n.length>1&&(d=[{label:l,value:u}],d=d.concat(n.map(h=>{const p=h[i.getRangeIdentifier(h)];return{label:h[a],value:Array.isArray(p)&&2===p.length?`${p[0]} - ${p[1]}`:p,color:this.model.getFillColor(h[a]),class:this.model.getColorClassName({classNameTypes:[oe.TOOLTIP],dataGroupName:h[a]})}}).sort((h,p)=>p.value-h.value)),!s&&!0===y(r,"tooltip","showTotal"))){const h=i.getRangeIdentifier();d.push({label:ve(r,"locale.translations.total")||ve(r,"tooltip.totalLabel")||"Total",value:n.reduce((p,m)=>p+m[h],0),bold:!0})}return d}}function rv(t,e){let n;if(void 0===e)for(const r of t)null!=r&&(n<r||void 0===n&&r>=r)&&(n=r);else{let r=-1;for(let i of t)null!=(i=e(i,++r,t))&&(n<i||void 0===n&&i>=i)&&(n=i)}return n}function Vh(t,e){let n=0;if(void 0===e)for(let r of t)(r=+r)&&(n+=r);else{let r=-1;for(let i of t)(i=+e(i,++r,t))&&(n+=i)}return n}function rD(t){return t.depth}function iD(t,e){return e-1-t.height}function iv(t,e){return t.sourceLinks.length?t.depth:e-1}function vl(t){return function(){return t}}function ov(t,e){return yl(t.source,e.source)||t.index-e.index}function sv(t,e){return yl(t.target,e.target)||t.index-e.index}function yl(t,e){return t.y0-e.y0}function Ph(t){return t.value}function oD(t){return t.index}function sD(t){return t.nodes}function aD(t){return t.links}function av(t,e){const n=t.get(e);if(!n)throw new Error("missing: "+e);return n}function lv({nodes:t}){for(const e of t){let n=e.y0,r=n;for(const i of e.sourceLinks)i.y0=n+i.width/2,n+=i.width;for(const i of e.targetLinks)i.y1=r+i.width/2,r+=i.width}}function lD(){let s,c,u,t=0,e=0,n=1,r=1,i=24,o=8,a=oD,l=iv,d=sD,h=aD,p=6;function m(){const E={nodes:d.apply(null,arguments),links:h.apply(null,arguments)};return function _({nodes:E,links:w}){for(const[R,W]of E.entries())W.index=R,W.sourceLinks=[],W.targetLinks=[];const B=new Map(E.map((R,W)=>[a(R,W,E),R]));for(const[R,W]of w.entries()){W.index=R;let{source:Z,target:z}=W;"object"!=typeof Z&&(Z=W.source=av(B,Z)),"object"!=typeof z&&(z=W.target=av(B,z)),Z.sourceLinks.push(W),z.targetLinks.push(W)}if(null!=u)for(const{sourceLinks:R,targetLinks:W}of E)R.sort(u),W.sort(u)}(E),function f({nodes:E}){for(const w of E)w.value=void 0===w.fixedValue?Math.max(Vh(w.sourceLinks,Ph),Vh(w.targetLinks,Ph)):w.fixedValue}(E),function v({nodes:E}){const w=E.length;let B=new Set(E),R=new Set,W=0;for(;B.size;){for(const Z of B){Z.depth=W;for(const{target:z}of Z.sourceLinks)R.add(z)}if(++W>w)throw new Error("circular link");B=R,R=new Set}}(E),function C({nodes:E}){const w=E.length;let B=new Set(E),R=new Set,W=0;for(;B.size;){for(const Z of B){Z.height=W;for(const{source:z}of Z.targetLinks)R.add(z)}if(++W>w)throw new Error("circular link");B=R,R=new Set}}(E),function T(E){const w=function x({nodes:E}){const w=rv(E,W=>W.depth)+1,B=(n-t-i)/(w-1),R=new Array(w);for(const W of E){const Z=Math.max(0,Math.min(w-1,Math.floor(l.call(null,W,w))));W.layer=Z,W.x0=t+Z*B,W.x1=W.x0+i,R[Z]?R[Z].push(W):R[Z]=[W]}if(c)for(const W of R)W.sort(c);return R}(E);s=Math.min(o,(r-e)/(rv(w,B=>B.length)-1)),function b(E){const w=function nD(t,e){let n;if(void 0===e)for(const r of t)null!=r&&(n>r||void 0===n&&r>=r)&&(n=r);else{let r=-1;for(let i of t)null!=(i=e(i,++r,t))&&(n>i||void 0===n&&i>=i)&&(n=i)}return n}(E,B=>(r-e-(B.length-1)*s)/Vh(B,Ph));for(const B of E){let R=e;for(const W of B){W.y0=R,W.y1=R+W.value*w,R=W.y1+s;for(const Z of W.sourceLinks)Z.width=Z.value*w}R=(r-R+s)/(B.length+1);for(let W=0;W<B.length;++W){const Z=B[W];Z.y0+=R*(W+1),Z.y1+=R*(W+1)}P(B)}}(w);for(let B=0;B<p;++B){const R=Math.pow(.99,B),W=Math.max(1-R,(B+1)/p);M(w,R,W),S(w,R,W)}}(E),lv(E),E}function S(E,w,B){for(let R=1,W=E.length;R<W;++R){const Z=E[R];for(const z of Z){let G=0,Y=0;for(const{source:J,value:q}of z.targetLinks){let te=q*(z.layer-J.layer);G+=N(J,z)*te,Y+=te}if(!(Y>0))continue;let ue=(G/Y-z.y0)*w;z.y0+=ue,z.y1+=ue,F(z)}void 0===c&&Z.sort(yl),D(Z,B)}}function M(E,w,B){for(let W=E.length-2;W>=0;--W){const Z=E[W];for(const z of Z){let G=0,Y=0;for(const{target:J,value:q}of z.sourceLinks){let te=q*(J.layer-z.layer);G+=V(z,J)*te,Y+=te}if(!(Y>0))continue;let ue=(G/Y-z.y0)*w;z.y0+=ue,z.y1+=ue,F(z)}void 0===c&&Z.sort(yl),D(Z,B)}}function D(E,w){const B=E.length>>1,R=E[B];H(E,R.y0-s,B-1,w),k(E,R.y1+s,B+1,w),H(E,r,E.length-1,w),k(E,e,0,w)}function k(E,w,B,R){for(;B<E.length;++B){const W=E[B],Z=(w-W.y0)*R;Z>1e-6&&(W.y0+=Z,W.y1+=Z),w=W.y1+s}}function H(E,w,B,R){for(;B>=0;--B){const W=E[B],Z=(W.y1-w)*R;Z>1e-6&&(W.y0-=Z,W.y1-=Z),w=W.y0-s}}function F({sourceLinks:E,targetLinks:w}){if(void 0===u){for(const{source:{sourceLinks:B}}of w)B.sort(sv);for(const{target:{targetLinks:B}}of E)B.sort(ov)}}function P(E){if(void 0===u)for(const{sourceLinks:w,targetLinks:B}of E)w.sort(sv),B.sort(ov)}function N(E,w){let B=E.y0-(E.sourceLinks.length-1)*s/2;for(const{target:R,width:W}of E.sourceLinks){if(R===w)break;B+=W+s}for(const{source:R,width:W}of w.targetLinks){if(R===E)break;B-=W}return B}function V(E,w){let B=w.y0-(w.targetLinks.length-1)*s/2;for(const{source:R,width:W}of w.targetLinks){if(R===E)break;B+=W+s}for(const{target:R,width:W}of E.sourceLinks){if(R===w)break;B-=W}return B}return m.update=function(E){return lv(E),E},m.nodeId=function(E){return arguments.length?(a="function"==typeof E?E:vl(E),m):a},m.nodeAlign=function(E){return arguments.length?(l="function"==typeof E?E:vl(E),m):l},m.nodeSort=function(E){return arguments.length?(c=E,m):c},m.nodeWidth=function(E){return arguments.length?(i=+E,m):i},m.nodePadding=function(E){return arguments.length?(o=s=+E,m):o},m.nodes=function(E){return arguments.length?(d="function"==typeof E?E:vl(E),m):d},m.links=function(E){return arguments.length?(h="function"==typeof E?E:vl(E),m):h},m.linkSort=function(E){return arguments.length?(u=E,m):u},m.size=function(E){return arguments.length?(t=e=0,n=+E[0],r=+E[1],m):[n-t,r-e]},m.extent=function(E){return arguments.length?(t=+E[0][0],n=+E[1][0],e=+E[0][1],r=+E[1][1],m):[[t,e],[n,r]]},m.iterations=function(E){return arguments.length?(p=+E,m):p},m}var Uh=Math.PI,jh=2*Uh,Sr=1e-6,cD=jh-Sr;function $h(){this._x0=this._y0=this._x1=this._y1=null,this._=""}function cv(){return new $h}function uv(t){return function(){return t}}function uD(t){return t[0]}function hD(t){return t[1]}$h.prototype=cv.prototype={constructor:$h,moveTo:function(t,e){this._+="M"+(this._x0=this._x1=+t)+","+(this._y0=this._y1=+e)},closePath:function(){null!==this._x1&&(this._x1=this._x0,this._y1=this._y0,this._+="Z")},lineTo:function(t,e){this._+="L"+(this._x1=+t)+","+(this._y1=+e)},quadraticCurveTo:function(t,e,n,r){this._+="Q"+ +t+","+ +e+","+(this._x1=+n)+","+(this._y1=+r)},bezierCurveTo:function(t,e,n,r,i,o){this._+="C"+ +t+","+ +e+","+ +n+","+ +r+","+(this._x1=+i)+","+(this._y1=+o)},arcTo:function(t,e,n,r,i){t=+t,e=+e,n=+n,r=+r,i=+i;var o=this._x1,s=this._y1,a=n-t,l=r-e,c=o-t,u=s-e,d=c*c+u*u;if(i<0)throw new Error("negative radius: "+i);if(null===this._x1)this._+="M"+(this._x1=t)+","+(this._y1=e);else if(d>Sr)if(Math.abs(u*a-l*c)>Sr&&i){var h=n-o,p=r-s,m=a*a+l*l,_=h*h+p*p,f=Math.sqrt(m),v=Math.sqrt(d),C=i*Math.tan((Uh-Math.acos((m+d-_)/(2*f*v)))/2),x=C/v,b=C/f;Math.abs(x-1)>Sr&&(this._+="L"+(t+x*c)+","+(e+x*u)),this._+="A"+i+","+i+",0,0,"+ +(u*h>c*p)+","+(this._x1=t+b*a)+","+(this._y1=e+b*l)}else this._+="L"+(this._x1=t)+","+(this._y1=e)},arc:function(t,e,n,r,i,o){t=+t,e=+e,o=!!o;var s=(n=+n)*Math.cos(r),a=n*Math.sin(r),l=t+s,c=e+a,u=1^o,d=o?r-i:i-r;if(n<0)throw new Error("negative radius: "+n);null===this._x1?this._+="M"+l+","+c:(Math.abs(this._x1-l)>Sr||Math.abs(this._y1-c)>Sr)&&(this._+="L"+l+","+c),n&&(d<0&&(d=d%jh+jh),d>cD?this._+="A"+n+","+n+",0,1,"+u+","+(t-s)+","+(e-a)+"A"+n+","+n+",0,1,"+u+","+(this._x1=l)+","+(this._y1=c):d>Sr&&(this._+="A"+n+","+n+",0,"+ +(d>=Uh)+","+u+","+(this._x1=t+n*Math.cos(i))+","+(this._y1=e+n*Math.sin(i))))},rect:function(t,e,n,r){this._+="M"+(this._x0=this._x1=+t)+","+(this._y0=this._y1=+e)+"h"+ +n+"v"+ +r+"h"+-n+"Z"},toString:function(){return this._}};var dD=Array.prototype.slice;function pD(t){return t.source}function mD(t){return t.target}function fD(t,e,n,r,i){t.moveTo(e,n),t.bezierCurveTo(e=(e+r)/2,n,e,i,r,i)}function _D(){return function gD(t){var e=pD,n=mD,r=uD,i=hD,o=null;function s(){var a,l=dD.call(arguments),c=e.apply(this,l),u=n.apply(this,l);if(o||(o=a=cv()),t(o,+r.apply(this,(l[0]=c,l)),+i.apply(this,l),+r.apply(this,(l[0]=u,l)),+i.apply(this,l)),a)return o=null,a+""||null}return s.source=function(a){return arguments.length?(e=a,s):e},s.target=function(a){return arguments.length?(n=a,s):n},s.x=function(a){return arguments.length?(r="function"==typeof a?a:uv(+a),s):r},s.y=function(a){return arguments.length?(i="function"==typeof a?a:uv(+a),s):i},s.context=function(a){return arguments.length?(o=a??null,s):o},s}(fD)}function vD(t){return[t.source.x1,t.y0]}function yD(t){return[t.target.x0,t.y1]}class TD extends fe{constructor(){super(...arguments),this.type="alluvial",this.renderType=re.SVG,this.gradient_id="gradient-id-"+Math.floor(99999999999*Math.random())}render(e=!0){const n=this.getComponentContainer({ariaLabel:"alluvial graphs",withinChartClip:!0});n.html("");const{width:r,height:i}=I.getSVGElementSize(n,{useAttrs:!0});if(r<1||i<1)return;const o=this.model.getOptions(),s=this.model.getDisplayData(),a=y(this.getOptions(),"color","gradient","enabled");let l=Dt.minNodePadding;o.alluvial.nodePadding>Dt.minNodePadding&&(l=o.alluvial.nodePadding);const c=y(o,"alluvial","nodeAlignment");let u=iv;c===$e.LEFT?u=rD:c===$e.RIGHT&&(u=iD);const d=lD().nodeId(C=>C.name).nodeWidth(Dt.nodeWidth).nodePadding(l).nodeAlign(u).extent([[2,30],[r-2,i]]);this.graph=d({nodes:o.alluvial.nodes.map(C=>Object.assign({},C)),links:s.map(C=>Object.assign({},C))}),this.graph.nodes=this.graph.nodes.filter(C=>0!==C.value);const h={};this.graph.nodes.forEach(C=>{const x=C.x0;C.category&&(h[x]=C?.category)}),n.append("g").classed("header-arrows",!0).selectAll("g").data(Object.keys(h)).join("g").attr("transform",C=>`translate(${C}, 0)`).append("text").attr("id",(C,x)=>this.services.domUtils.generateElementIDString(`alluvial-category-${x}`)).style("font-size","14px").text(C=>h[C]?h[C]:"").attr("y",20).attr("x",(C,x)=>{const b=this.services.domUtils.generateElementIDString(`alluvial-category-${x}`),{width:T}=I.getSVGElementSize(L(`text#${b}`),{useBBox:!0});let S=0;return C+S>=T&&(S=4-T),S});const p=n.append("g").attr("fill","none").selectAll("g").data(this.graph.links);if(p.exit().remove(),a){const C=y(this.getOptions(),"color","scale");C&&p.enter().append("linearGradient").attr("id",x=>`${this.gradient_id}-link-${x.index}`).attr("gradientUnits","userSpaceOnUse").call(x=>x.append("stop").attr("offset","0%").attr("stop-color",b=>C[b.source.name])).call(x=>x.append("stop").attr("offset","100%").attr("stop-color",b=>C[b.target.name])),p.exit().remove()}p.enter().append("path").classed("link",!0).attr("d",function CD(){return _D().source(vD).target(yD)}()).attr("id",C=>this.services.domUtils.generateElementIDString(`alluvial-line-${C.index}`)).attr("class",C=>o.alluvial.monochrome?this.model.getColorClassName({classNameTypes:[oe.STROKE],dataGroupName:0,originalClassName:"link"}):this.model.getColorClassName({classNameTypes:[oe.STROKE],dataGroupName:C.source.index,originalClassName:"link"})).style("stroke",C=>a?`url(#${this.gradient_id}-link-${C.index})`:this.model.getFillColor(C.source.name,null,{...C,source:C.source.name,target:C.target.name})).attr("stroke-width",C=>Math.max(1,C.width)).style("stroke-opacity",Dt.opacity.default).attr("aria-label",C=>`${C.source.name} \u2192 ${C.target.name} (${C.value}${o.alluvial.units?" "+o.alluvial.units:""})`);const m=n.append("g").selectAll("g").data(this.graph.nodes).enter().append("g").attr("id",C=>this.services.domUtils.generateElementIDString(`alluvial-node-${C.index}`)).classed("node-group",!0).attr("transform",C=>`translate(${C.x0}, ${C.y0})`);m.append("rect").classed("node",!0).attr("height",C=>C.y1-C.y0).attr("width",C=>C.x1-C.x0).attr("fill","black");const _=m.append("g").attr("id",C=>this.services.domUtils.generateElementIDString(`alluvial-node-title-${C.index}`)),{code:f,number:v}=y(o,"locale");_.append("text").attr("id",C=>this.services.domUtils.generateElementIDString(`alluvial-node-text-${C.index}`)).attr("class","node-text").style("font-size","12px").attr("text-anchor","start").attr("fill","white").attr("x",4).attr("dy",13).text(C=>`${C.name} (${v(C.value,f)})`).attr("aria-label",C=>`${C.name} (${C.value})`),_.append("rect").classed("node-text-bg",!0).attr("width",(C,x)=>{const b=this.services.domUtils.generateElementIDString(`alluvial-node-text-${x}`),{width:T}=I.getSVGElementSize(L(`text#${b}`),{useBBox:!0});return T+8}).attr("height",18).attr("stroke-width",2).lower(),_.attr("transform",(C,x)=>{const b=this.services.domUtils.generateElementIDString(`alluvial-node-text-${x}`),{width:T}=I.getSVGElementSize(L(`text#${b}`),{useBBox:!0}),S=(C.y1-C.y0)/2-9;let M=C.x1-C.x0;return C.x1>=T?M-=T+16:M+=4,`translate(${M}, ${S})`}),this.addLineEventListener(),this.addNodeEventListener()}addLineEventListener(){const e=this.getOptions(),n=this,{number:r,code:i}=y(this.getOptions(),"locale"),o=Oa((s,a="mouseover")=>{const l=n.parent.selectAll("path.link").transition().call(c=>n.services.transitions.setupTransition({transition:c,name:"alluvial-links-mouse-highlight"}));"mouseout"===a?(L(s).lower(),l.style("stroke-opacity",Dt.opacity.default)):l.style("stroke-opacity",function(){return s===this?(L(this).raise(),Dt.opacity.selected):Dt.opacity.unfocus})},33);this.parent.selectAll("path.link").on("mouseover",function(s,a){const l=L(this);o(this,"mouseover"),l.classed("link-hovered",!0);const c=getComputedStyle(this).getPropertyValue("stroke");n.services.events.dispatchEvent(O.Alluvial.LINE_MOUSEOVER,{event:s,element:l,datum:a}),n.services.events.dispatchEvent(O.Tooltip.SHOW,{event:s,hoveredElement:l,items:[{label:a.target.name,value:(r(a.value,i)?`${r(a.value,i)}`:"-")+(e.alluvial.units?` ${e.alluvial.units}`:""),color:c,labelIcon:n.getRightArrowIcon()}]})}).on("mousemove",function(s,a){n.services.events.dispatchEvent(O.Alluvial.LINE_MOUSEMOVE,{event:s,element:L(this),datum:a}),n.services.events.dispatchEvent(O.Tooltip.MOVE,{event:s})}).on("click",function(s,a){n.services.events.dispatchEvent(O.Alluvial.LINE_CLICK,{event:s,element:L(this),datum:a})}).on("mouseout",function(s,a){const l=L(this);o(this,"mouseout"),l.classed("link-hovered",!1),n.services.events.dispatchEvent(O.Alluvial.LINE_MOUSEOUT,{event:s,element:l,datum:a}),n.services.events.dispatchEvent(O.Tooltip.HIDE,{event:s,hoveredElement:l})})}addNodeEventListener(){const e=this,n=Oa((r=[],i="mouseover")=>{"mouseout"!==i&&0!==r.length?e.parent.selectAll("path.link").transition().call(o=>this.services.transitions.setupTransition({transition:o,name:"alluvial-link-mouse-highlight"})).style("stroke-opacity",function(o){return r.some(s=>s===o.index)?(L(this).classed("link-hovered",!0).raise(),Dt.opacity.selected):Dt.opacity.unfocus}):e.parent.selectAll("path.link").classed("link-hovered",!1).data(this.graph.links,o=>o.index).order().style("stroke-opacity",Dt.opacity.default)},66);e.parent.selectAll(".node-group").on("mouseover",function(r,i){const o=L(this),s=[];if(e.traverse({link:"sourceLinks",node:"target"},i,s),e.traverse({link:"targetLinks",node:"source"},i,s),s.length){const a=no(o.attr("transform"));if(o.attr("transform",`translate(${a.x-2}, ${a.y})`),o.classed("node-hovered",!0).selectAll("rect.node").attr("width",8),i.x0-2==0){const c=e.services.domUtils.generateElementIDString(`alluvial-node-title-${i.index}`),u=e.parent.select(`g#${c}`),d=no(u.attr("transform"));u.attr("transform",`translate(${d.x+4},${d.y})`)}const l=e.services.domUtils.generateElementIDString(`alluvial-node-text-${i.index}`);e.parent.select(`text#${l}`).style("font-weight","bold"),n(s,"mouseover"),e.services.events.dispatchEvent(O.Alluvial.NODE_MOUSEOVER,{event:r,element:o,datum:i})}}).on("mousemove",function(r,i){e.services.events.dispatchEvent(O.Alluvial.NODE_MOUSEMOVE,{event:r,element:L(this),datum:i}),e.services.events.dispatchEvent(O.Tooltip.MOVE,{event:r})}).on("click",function(r,i){e.services.events.dispatchEvent(O.Alluvial.NODE_CLICK,{event:r,element:L(this),datum:i})}).on("mouseout",function(r,i){const o=L(this),s=no(o.attr("transform"));if(o.classed("node-hovered",!1).attr("transform",`translate(${s.x+2}, ${s.y})`).select("rect.node").attr("width",Dt.nodeWidth),i.x0-2==0){const l=e.services.domUtils.generateElementIDString(`alluvial-node-title-${i.index}`),c=e.parent.select(`g#${l}`),u=no(c.attr("transform"));c.attr("transform",`translate(${u.x-4},${u.y})`)}const a=e.services.domUtils.generateElementIDString(`alluvial-node-text-${i.index}`);e.parent.select(`text#${a}`).style("font-weight","normal"),n([],"mouseout"),e.services.events.dispatchEvent(O.Alluvial.NODE_MOUSEOUT,{event:r,element:o,datum:i}),e.services.events.dispatchEvent(O.Tooltip.HIDE,{hoveredElement:o})})}traverse(e,n,r=[]){n[e.link].map(i=>(r.push(i.index),i[e.node])).forEach(i=>this.traverse(e,i,r))}getRightArrowIcon(){return'\n\t\t<svg xmlns="http://www.w3.org/2000/svg" class="arrow-right" width="32" height="32" viewBox="0 0 32 32">\n\t\t\t<polygon points="18 6 16.57 7.393 24.15 15 4 15 4 17 24.15 17 16.57 24.573 18 26 28 16 18 6"/>\n\t\t\t<rect width="32" height="32"/>\n\t\t</svg>'}destroy(){this.parent.selectAll("path.line,.node-group").on("mouseover",null).on("mousemove",null).on("click",null).on("mouseout",null)}}class wt extends fe{constructor(){super(...arguments),this.type="grid",this.renderType=re.SVG}render(e=!0){const n=y(this.getOptions(),"grid","x","enabled"),r=y(this.getOptions(),"grid","y","enabled");this.drawBackdrop(n,r),(n||r)&&(n&&(I.appendOrSelect(this.backdrop,"g.x.grid"),this.drawXGrid(e)),r&&(I.appendOrSelect(this.backdrop,"g.y.grid"),this.drawYGrid(e)))}drawXGrid(e){const n=this.parent,r=this.backdrop.attr("height"),o=ju(this.services.cartesianScales.getMainXScale()).tickSizeInner(-r).tickSizeOuter(0);if(y(this.getOptions(),"grid","x","alignWithAxisTicks")){const a=this.services.cartesianScales.getDomainAxisPosition(),l=y(this.getOptions(),"axes",a,"ticks","values");l&&o.tickValues(l)}else{const a=y(this.getOptions(),"grid","x","numberOfTicks");o.ticks(a)}const s=n.select(".x.grid").attr("transform",`translate(${-this.backdrop.attr("x")}, ${r})`);e?s.transition().call(a=>this.services.transitions.setupTransition({transition:a,name:"grid-update",animate:e})).call(o):s.call(o),this.cleanGrid(s)}drawYGrid(e){const n=this.parent,r=this.backdrop.attr("width"),o=Mf(this.services.cartesianScales.getMainYScale()).tickSizeInner(-r).tickSizeOuter(0);if(y(this.getOptions(),"grid","y","alignWithAxisTicks")){const a=this.services.cartesianScales.getRangeAxisPosition(),l=y(this.getOptions(),"axes",a,"ticks","values");l&&o.tickValues(l)}else{const a=y(this.getOptions(),"grid","y","numberOfTicks");o.ticks(a)}const s=n.select(".y.grid").attr("transform",`translate(0, ${-this.backdrop.attr("y")})`);e?s.transition().call(a=>this.services.transitions.setupTransition({transition:a,name:"grid-update",animate:e})).call(o):s.call(o),this.cleanGrid(s)}getGridlineThreshold(e){const n=this.parent,r=n.selectAll(".x.grid .tick").nodes().sort((u,d)=>Number(xn(u).tx)-Number(xn(d).tx));let i=-1;if(!r.length)return;r.forEach(u=>{e[0]>=+xn(u).tx&&i++});const o=i+1<r.length?i+1:r.length,s=r[i],a=r[o];let l;if(s)if(a)l=+xn(a).tx-+xn(s).tx;else{const u=n.select("rect.chart-grid-backdrop").node();l=I.getSVGElementSize(u).width-+xn(s).tx}else l=+xn(a).tx;const{threshold:c}=this.getOptions().tooltip.gridline;return l*c}getActiveGridline(e){const r=y(this.getOptions,"tooltip","gridline","threshold")||this.getGridlineThreshold(e);return this.parent.selectAll(".x.grid .tick").filter(function(){const i=xn(this),o_min=Number(i.tx)-r,o_max=Number(i.tx)+r;return o_min<=e[0]&&e[0]<=o_max})}drawBackdrop(e,n){const r=this.parent,i=this.services.cartesianScales.getMainXScale(),o=this.services.cartesianScales.getMainYScale(),[s,a]=i.range(),[l,c]=o.range();this.backdrop=I.appendOrSelect(r,"svg.chart-grid-backdrop").attr("role","presentation");const u=I.appendOrSelect(this.backdrop,e||n?"rect.chart-grid-backdrop.stroked":"rect.chart-grid-backdrop");this.backdrop.merge(u).attr("x",s).attr("y",c).attr("width",Math.abs(a-s)).attr("height",Math.abs(l-c)).lower(),u.attr("width","100%").attr("height","100%")}cleanGrid(e){e.selectAll("text").remove(),e.select(".domain").remove()}}class hv extends fe{constructor(){super(...arguments),this.type="area",this.renderType=re.SVG,this.gradient_id="gradient-id-"+Math.floor(99999999999*Math.random()),this.handleLegendOnHover=e=>{const{hoveredElement:n}=e.detail;this.parent.selectAll("path.area").transition("legend-hover-area").call(r=>this.services.transitions.setupTransition({transition:r,name:"legend-hover-area"})).attr("opacity",r=>r.name!==n.datum().name?sn.opacity.unselected:sn.opacity.selected)},this.handleLegendMouseOut=()=>{this.parent.selectAll("path.area").transition("legend-mouseout-area").call(e=>this.services.transitions.setupTransition({transition:e,name:"legend-mouseout-area"})).attr("opacity",sn.opacity.selected)}}init(){const e=this.services.events;e.addEventListener(O.Legend.ITEM_HOVER,this.handleLegendOnHover),e.addEventListener(O.Legend.ITEM_MOUSEOUT,this.handleLegendMouseOut)}render(e=!0){const n=this.getComponentContainer({ariaLabel:"area graphs",withinChartClip:!0}),r=this.getOptions();let i=[0,0];const{cartesianScales:o}=this.services,s=o.getOrientation(),a=Mh().curve(this.services.curves.getD3Curve()).defined(T=>null!=T[o.getRangeIdentifier()]),l=this.model.getGroupedData(this.configs.groups),c=y(r,"bounds"),u=c&&l&&1===l.length;!u&&c&&console.warn(`Bounds can only be shown when having 1 single datagroup, you've supplied ${l.length}`);let d=0;const h=(T,S)=>{!1===y(r,"axes",T,"includeZero")&&S[0]>0&&S[1]>0&&(d=S[0])},p=T=>u?o.getBoundedScaledValues(T)[0]:o.getRangeValue(d),m=T=>u?o.getBoundedScaledValues(T)[1]:o.getRangeValue(T);s===je.VERTICAL?(i=o.getMainYScale().domain(),h(o.getMainYAxisPosition(),i),a.x(T=>o.getDomainValue(T)).y0(T=>p(T)).y1(T=>m(T))):(i=o.getMainXScale().domain(),h(o.getMainXAxisPosition(),i),a.x0(T=>p(T)).x1(T=>m(T)).y(T=>o.getDomainValue(T)));const _=y(r,"color","gradient","enabled"),f=l&&1===l.length&&_;l.length>1&&_&&console.error("Gradients can only be enabled when having 1 single dataset");const v=n.selectAll("path.area").data(l,T=>T.name),C=L(this.services.domUtils.getMainContainer());if(v.exit().attr("opacity",0).remove(),!l.length)return;if(f){const T=C.select(`path.${this.model.getColorClassName({classNameTypes:[oe.STROKE],dataGroupName:l[0].name})}`).node();let S;if(T)S=getComputedStyle(T,null).getPropertyValue("stroke");else{const M=y(this.model.getOptions(),"color","scale");if(null!==M){S=M[Object.keys(M)[0]]}}po.appendOrUpdateLinearGradient({svg:this.parent,id:this.services.domUtils.generateElementIDString(`${l[0].name.replace(" ","")}_${this.gradient_id}`),x1:"0%",x2:"0%",y1:"0%",y2:"100%",stops:po.getStops(i,S)})}else this.parent.selectAll("defs linearGradient").empty()||this.parent.selectAll("defs linearGradient").each(function(){this.parentNode.remove()});const x=this,b=v.enter().append("path");f?b.merge(v).style("fill",T=>`url(#${this.services.domUtils.generateElementIDString(`${T.name.replace(" ","")}_${this.gradient_id}`)})`).attr("class","area").attr("class",T=>this.model.getColorClassName({classNameTypes:[oe.FILL],dataGroupName:T.name,originalClassName:"area"})).attr("d",T=>{const{data:S}=T;return a(S)}):(b.attr("opacity",0).merge(v).attr("class","area").attr("class",T=>this.model.getColorClassName({classNameTypes:[oe.FILL,oe.STROKE],dataGroupName:T.name,originalClassName:"area"})).style("fill",T=>x.model.getFillColor(T.name,null,T.data)).transition().call(T=>this.services.transitions.setupTransition({transition:T,name:"area-update-enter",animate:e})).attr("opacity",u?1:sn.opacity.selected).attr("d",T=>{const{data:S}=T;return a(S)}),u&&b.attr("fill-opacity",sn.opacity.selected).style("stroke",T=>x.model.getStrokeColor(T.name,null,T.data)).style("stroke-dasharray","2, 2").attr("stroke-width","0.7px"))}destroy(){const e=this.services.events;e.removeEventListener(O.Legend.ITEM_HOVER,this.handleLegendOnHover),e.removeEventListener(O.Legend.ITEM_MOUSEOUT,this.handleLegendMouseOut)}}class hi extends fe{constructor(){super(...arguments),this.type="line",this.renderType=re.SVG,this.handleLegendOnHover=e=>{const{hoveredElement:n}=e.detail;this.parent.selectAll("path.line").transition("legend-hover-line").call(r=>this.services.transitions.setupTransition({transition:r,name:"legend-hover-line"})).attr("opacity",r=>r.name!==n.datum().name?an.opacity.unselected:an.opacity.selected)},this.handleLegendMouseOut=()=>{this.parent.selectAll("path.line").transition("legend-mouseout-line").call(e=>this.services.transitions.setupTransition({transition:e,name:"legend-mouseout-line"})).attr("opacity",an.opacity.selected)}}init(){const{events:e}=this.services;e.addEventListener(O.Legend.ITEM_HOVER,this.handleLegendOnHover),e.addEventListener(O.Legend.ITEM_MOUSEOUT,this.handleLegendMouseOut)}render(e=!0){const n=this.getComponentContainer({ariaLabel:"lines",withinChartClip:!0}),{cartesianScales:r,curves:i}=this.services,[a,l]=bn(p=>r.getDomainValue(p),p=>r.getRangeValue(p),r.getOrientation()),c=this.getOptions(),u=Mo().x(a).y(l).curve(i.getD3Curve()).defined(p=>null!=p[r.getRangeIdentifier(p)]);let d=[];if(this.configs.stacked){const p=Object.keys(c.axes).some(_=>c.axes[_].percentage),{groupMapsTo:m}=c.data;d=this.model.getStackedData({groups:this.configs.groups,percentage:p}).map(_=>{const f=this.services.cartesianScales.getDomainIdentifier(_),v=this.services.cartesianScales.getRangeIdentifier(_);return{name:y(_,0,m),data:_.map(C=>({[f]:C.data.sharedStackKey,[m]:C[m],[v]:C[1]})),hidden:!zA(_,C=>C[0]!==C[1])}})}else d=this.model.getGroupedData(this.configs.groups);const h=n.selectAll("path.line").data(d,p=>p.name);h.exit().attr("opacity",0).remove(),h.enter().append("path").classed("line",!0).attr("opacity",0).merge(h).data(d,p=>p.name).attr("class",p=>this.model.getColorClassName({classNameTypes:[oe.STROKE],dataGroupName:p.name,originalClassName:"line"})).style("stroke",p=>this.model.getStrokeColor(p.name,null,p.data)).attr("role",de.GRAPHICS_SYMBOL).attr("aria-roledescription","line").attr("aria-label",p=>{const{data:m}=p;return m.map(_=>_[this.services.cartesianScales.getRangeIdentifier(_)]).join(",")}).transition().call(p=>this.services.transitions.setupTransition({transition:p,name:"line-update-enter",animate:e})).attr("opacity",p=>p.hidden?0:1).attr("d",p=>{const{data:m}=p;return u(m)})}destroy(){const e=this.services.events;e.removeEventListener(O.Legend.ITEM_HOVER,this.handleLegendOnHover),e.removeEventListener(O.Legend.ITEM_MOUSEOUT,this.handleLegendMouseOut)}}class qn extends fe{constructor(){super(...arguments),this.type="ruler",this.renderType=re.SVG,this.isXGridEnabled=y(this.getOptions(),"grid","x","enabled"),this.isYGridEnabled=y(this.getOptions(),"grid","y","enabled"),this.isEventListenerAdded=!1}render(e=!1){const n=y(this.getOptions(),"ruler","enabled");this.drawBackdrop(),n&&!this.isEventListenerAdded?this.addBackdropEventListeners():!n&&this.isEventListenerAdded&&this.removeBackdropEventListeners()}removeBackdropEventListeners(){this.isEventListenerAdded=!1,this.backdrop.on("mousemove mouseover mouseout",null)}formatTooltipData(e){return e}showRuler(e,[n,r]){const i=this.parent,o=this.services.cartesianScales.getOrientation(),s=this.model.getDisplayData(),a=this.services.cartesianScales.getRangeScale(),[l,c]=a.range(),u=o===je.HORIZONTAL?r:n,d=I.appendOrSelect(i,"g.ruler").attr("aria-label","ruler"),h=I.appendOrSelect(d,"line.ruler-line"),p=i.selectAll("[role=graphics-symbol]"),m=s.map(f=>({domainValue:this.services.cartesianScales.getDomainValue(f),originalData:f})).filter(f=>function xD(t,e){return t>e-5&&t<e+5}(f.domainValue,u));if(this.pointsWithinLine&&m.length===this.pointsWithinLine.length&&m.map(f=>f.domainValue).join()===this.pointsWithinLine.map(f=>f.domainValue).join())return this.pointsWithinLine=m,this.services.events.dispatchEvent(O.Tooltip.MOVE,{mousePosition:[n,r]});this.pointsWithinLine=m;const _=this.pointsWithinLine.reduce((f,v)=>{if(0===f.length)return f.push(v),f;const C=f[0].domainValue,x=Math.abs(u-v.domainValue),b=Math.abs(u-C);return x>b||(x<b?f=[v]:f.push(v)),f},[]);if(_.length>0){const f=_.map(b=>b.originalData).filter(b=>null!=b[this.services.cartesianScales.getRangeIdentifier(b)]),v=_.map(b=>b.domainValue),C=p.filter(b=>{const T=this.services.cartesianScales.getDomainValue(b);return v.includes(T)});this.elementsToHighlight&&this.elementsToHighlight.size()>0&&!Of(this.elementsToHighlight,C)&&this.hideRuler(),C.dispatch("mouseover"),this.elementsToHighlight=C,this.services.events.dispatchEvent(O.Tooltip.SHOW,{event:e,mousePosition:[n,r],hoveredElement:h,data:this.formatTooltipData(f)}),d.attr("opacity",1);const x=_[0];"horizontal"===o?h.attr("x1",c).attr("x2",l).attr("y1",x.domainValue).attr("y2",x.domainValue):h.attr("y1",c).attr("y2",l).attr("x1",x.domainValue).attr("x2",x.domainValue)}else this.hideRuler()}hideRuler(){const e=this.parent,n=I.appendOrSelect(e,"g.ruler");e.selectAll("[role=graphics-symbol]").dispatch("mouseout"),this.services.events.dispatchEvent(O.Tooltip.HIDE),n.attr("opacity",0)}addBackdropEventListeners(){this.isEventListenerAdded=!0;const e=this,n=this.services.domUtils.getHolder(),r=this.model.getDisplayData();let i=function(o){const s=ar(o,e.parent.node());e.showRuler(o,s)};if(r.length>100){i=function vw(t,e,n){let r=null;return function(...i){const o=this;o.mousePosition=ar(i[0],n),clearTimeout(r),r=setTimeout(function(){t.apply(o,i)},e)}}(function(s){const{mousePosition:a}=this;e.showRuler(s,a)},r.length%50*12.5,n)}this.backdrop.on("mousemove mouseover",i).on("mouseout",this.hideRuler.bind(this))}drawBackdrop(){const e=this.parent;this.backdrop=I.appendOrSelect(e,"svg.chart-grid-backdrop")}}class pn extends fe{constructor(){super(...arguments),this.type="scatter",this.renderType=re.SVG,this.handleChartHolderOnHover=()=>{if(!this.parent)throw new Error("Parent not defined");this.parent.selectAll("circle.dot").transition("chart-holder-hover-scatter").call(e=>{var n;return null==(n=this.services.transitions)?void 0:n.setupTransition({transition:e,name:"chart-holder-hover-scatter"})}).attr("opacity",1)},this.handleChartHolderOnMouseOut=()=>{if(!this.parent)throw new Error("Parent not defined");this.parent.selectAll("circle.dot").transition("chart-holder-mouseout-scatter").call(e=>{var n;return null==(n=this.services.transitions)?void 0:n.setupTransition({transition:e,name:"chart-holder-mouseout-scatter"})}).attr("opacity",0)},this.handleLegendOnHover=e=>{const{hoveredElement:n}=e.detail,{groupMapsTo:r}=this.getOptions().data;if(!this.parent)throw new Error("Parent not defined");this.parent.selectAll("circle.dot").transition("legend-hover-scatter").call(i=>{var o;return null==(o=this.services.transitions)?void 0:o.setupTransition({transition:i,name:"legend-hover-scatter"})}).attr("opacity",i=>i[r]!==n.datum().name?.3:1)},this.handleLegendMouseOut=()=>{if(!this.parent)throw new Error("Parent not defined");this.parent.selectAll("circle.dot").transition("legend-mouseout-scatter").call(e=>{var n;return null==(n=this.services.transitions)?void 0:n.setupTransition({transition:e,name:"legend-mouseout-scatter"})}).attr("opacity",1)}}init(){const{events:e}=this.services;if(!e)throw new Error("Services events are undefined.");e.addEventListener(O.Legend.ITEM_HOVER,this.handleLegendOnHover),e.addEventListener(O.Legend.ITEM_MOUSEOUT,this.handleLegendMouseOut);const{fadeInOnChartHolderMouseover:n}=this.configs;n&&(e.addEventListener(O.Chart.MOUSEOVER,this.handleChartHolderOnHover),e.addEventListener(O.Chart.MOUSEOUT,this.handleChartHolderOnMouseOut))}filterBasedOnZoomDomain(e){const{cartesianScales:n}=this.services;if(!n)throw new Error("Services cartesianScales are undefined.");const r=n.getDomainIdentifier(e),i=this.model.get("zoomDomain");return void 0!==i?e.filter(o=>o[r].getTime()>=i[0].getTime()&&o[r].getTime()<=i[1].getTime()):e}getScatterData(){const e=this.getOptions(),{stacked:n}=this.configs;let r;if(n){const i=Object.keys(e.axes).some(o=>e.axes[o].percentage);r=this.model.getStackedData({groups:this.configs.groups,percentage:i})}else{const{cartesianScales:i}=this.services;if(!i)throw new Error("Services cartesianScales are undefined.");r=this.model.getDisplayData(this.configs.groups).filter(o=>{const s=i.getRangeIdentifier(o);return void 0!==o[s]&&null!==o[s]})}return this.filterBasedOnZoomDomain(r)}render(e){if(!y(this.getOptions(),"points","enabled")&&!y(this.getOptions(),"bubble","enabled"))return;const n=this.getComponentContainer({ariaLabel:"scatter points",withinChartClip:!0}),r=this.getOptions(),{groupMapsTo:i}=r.data,{cartesianScales:o}=this.services;if(!o)throw new Error("Services cartesianScales are undefined.");const s=o.getDomainIdentifier(),a=n.selectAll("circle.dot").data(this.getScatterData(),c=>`${c[i]}-${c[s]}`);a.exit().attr("opacity",0).remove();const l=a.enter().append("circle").classed("dot",!0).attr("opacity",0).merge(a);this.styleCircles(l,e),this.addEventListeners()}isDatapointThresholdAnomaly(e){const{handleThresholds:n}=this.configs;if(!n)return!1;const{cartesianScales:r}=this.services;if(!r)throw new Error("Cartesian scales service is undefined");const i=r.getOrientation(),[o,s]=bn(r.getHighestDomainThreshold(),r.getHighestRangeThreshold(),i),[a,l]=bn(d=>r.getDomainValue(d),d=>r.getRangeValue(d),i),c=a(e),u=l(e);return s&&o?u<=s.scaleValue&&c>=o.scaleValue:s?u<=s.scaleValue:!!o&&c>=o.scaleValue}styleCircles(e,n){const r=this.getOptions(),{filled:i,fillOpacity:o}=r.points,{cartesianScales:s}=this.services;if(!s)throw new Error("Cartesian scales service is undefined");const{groupMapsTo:a}=r.data,[u,d]=bn(p=>s.getDomainValue(p),p=>s.getRangeValue(p),s.getOrientation()),{fadeInOnChartHolderMouseover:h}=this.configs;e.raise().classed("dot",!0).attr("class",p=>{const m=s.getDomainIdentifier(p),_=this.model.getIsFilled(p[a],p[m],p,i)?[oe.FILL,oe.STROKE]:[oe.STROKE];return this.model.getColorClassName({classNameTypes:_,dataGroupName:p[a],originalClassName:"dot"})||""}).classed("threshold-anomaly",p=>this.isDatapointThresholdAnomaly(p)).classed("filled",p=>{const m=s.getDomainIdentifier(p);return this.model.getIsFilled(p[a],p[m],p,i)}).classed("unfilled",p=>{const m=s.getDomainIdentifier(p);return!this.model.getIsFilled(p[a],p[m],p,i)}).transition().call(p=>{var m;return null==(m=this.services.transitions)?void 0:m.setupTransition({transition:p,name:"scatter-update-enter",animate:n})}).attr("cx",u).attr("cy",d).attr("r",r.points.radius).style("fill",p=>{const m=s.getDomainIdentifier(p);if(this.model.getIsFilled(p[a],p[m],p,i))return this.model.getFillColor(p[a],p[m],p)}).style("stroke",p=>{const m=s.getDomainIdentifier(p);return this.model.getStrokeColor(p[a],p[m],p)}).attr("fill-opacity",i?o:1).attr("opacity",h?0:1).attr("role",de.GRAPHICS_SYMBOL).attr("aria-roledescription","point").attr("aria-label",p=>p[s.getRangeIdentifier(p)]),this.addEventListeners()}getTooltipAdditionalItems(e){return null}addEventListeners(){const e=this,{groupMapsTo:n}=e.getOptions().data;if(!this.parent)throw new Error("Parent not defined");this.parent.selectAll("circle").on("mouseover",function(r,i){var o,s;const a=L(this);a.classed("hovered",!0).attr("class",l=>e.model.getColorClassName({classNameTypes:[oe.FILL],dataGroupName:l[n],originalClassName:a.attr("class")})).style("fill",l=>{var c;const u=null==(c=e.services.cartesianScales)?void 0:c.getDomainIdentifier(l);return e.model.getFillColor(l[n],l[u],l)}).classed("unfilled",!1),null==(o=e.services.events)||o.dispatchEvent(O.Tooltip.SHOW,{event:r,hoveredElement:a,data:[i],additionalItems:e.getTooltipAdditionalItems(i)}),null==(s=e.services.events)||s.dispatchEvent(O.Scatter.SCATTER_MOUSEOVER,{event:r,element:a,datum:i})}).on("mousemove",function(r,i){var o,s;const a=L(this);null==(o=e.services.events)||o.dispatchEvent(O.Scatter.SCATTER_MOUSEMOVE,{event:r,element:a,datum:i}),null==(s=e.services.events)||s.dispatchEvent(O.Tooltip.MOVE,{event:r})}).on("click",function(r,i){var o;null==(o=e.services.events)||o.dispatchEvent(O.Scatter.SCATTER_CLICK,{event:r,element:L(this),datum:i})}).on("mouseout",function(r,i){var o,s,a;const l=L(this);if(l.classed("hovered",!1),!e.configs.filled){const{filled:c}=e.getOptions().points,u=null==(o=e.services.cartesianScales)?void 0:o.getDomainIdentifier(i),d=e.model.getIsFilled(i[n],i[u],i,c);l.classed("unfilled",!d).style("fill",h=>d||c?e.model.getFillColor(h[n],h[u],h):null)}null==(s=e.services.events)||s.dispatchEvent(O.Scatter.SCATTER_MOUSEOUT,{event:r,element:l,datum:i}),null==(a=e.services.events)||a.dispatchEvent(O.Tooltip.HIDE,{hoveredElement:l})})}destroy(){var e;null==(e=this.parent)||e.selectAll("circle").on("mousemove",null).on("mouseout",null);const{events:n}=this.services;if(!n)throw new Error("Services events undefined");n.removeEventListener(O.Legend.ITEM_HOVER,this.handleLegendOnHover),n.removeEventListener(O.Legend.ITEM_MOUSEOUT,this.handleLegendMouseOut),n.removeEventListener(O.Chart.MOUSEOVER,this.handleChartHolderOnHover),n.removeEventListener(O.Chart.MOUSEOUT,this.handleChartHolderOnMouseOut)}}class pv extends fe{constructor(e,n,r){super(e,n,r),this.type="axes",this.renderType=re.SVG,this.truncation={[j.LEFT]:!1,[j.RIGHT]:!1,[j.TOP]:!1,[j.BOTTOM]:!1},r&&(this.configs=r),this.margins=this.configs.margins}render(e=!0){const{position:n}=this.configs,r=this.getOptions(),i=y(r,"axes",n,"visible"),o=this.getComponentContainer({ariaLabel:"axes"}),{width:s,height:a}=I.getSVGElementSize(o,{useAttrs:!0}),l=I.appendOrSelect(o,`g.axis.${n}`);let c,u;if(n===j.BOTTOM||n===j.TOP?(c=this.configs.axes[j.LEFT]?this.margins.left:0,u=this.configs.axes[j.RIGHT]?s-this.margins.right:s):(c=a-this.margins.bottom,u=this.margins.top),!this.services.cartesianScales)throw new Error("Services cartesianScales undefined");const d=this.services.cartesianScales.getScaleByPosition(n);let h;switch(this.scaleType===ne.LABELS||this.scaleType===ne.LABELS_RATIO?d.rangeRound([c,u]):d.range([c,u]),n){case j.LEFT:h=Mf;break;case j.BOTTOM:h=ju;break;case j.RIGHT:h=tk;break;case j.TOP:h=ek}l.attr("aria-label",`${n} axis`);const p=!l.select("g.ticks").empty();let m=I.appendOrSelect(l,"g.ticks");p||(m.attr("role",`${de.GRAPHICS_OBJECT} ${de.GROUP}`),m.attr("aria-label",`${n} ticks`));const _=I.appendOrSelect(l,"g.ticks.invisible").style("opacity","0").style("pointer-events","none").attr("aria-hidden",!0).attr("aria-label",`invisible ${n} ticks`),f=y(r,"axes",n),v=this.scaleType===ne.TIME||f.scaleType===ne.TIME,C=n===j.LEFT||n===j.RIGHT,x=this.model.get("zoomDomain");if(x&&v&&!C&&d.domain(x),!i)return void m.attr("aria-hidden",!0);const b=y(f,"scaleType"),T=y(r,"data","loading"),S=y(f,"ticks","number"),M=y(f,"ticks","values"),D=y(f,"truncation","type"),k=y(f,"truncation","threshold"),H=y(f,"truncation","numCharacter"),F=null!==S,P=y(r,"timeScale"),N=I.appendOrSelect(_,"g.tick"),V=I.appendOrSelect(N,"text").text("0"),E=I.getSVGElementSize(V.node(),{useBBox:!0}).height;N.remove();const w=this.scaleType||f.scaleType||ne.LINEAR,B=h(d).tickSizeOuter(0);if(d.ticks){let q;if(F?q=S:(q=Tn.ticks.number,C&&(q=this.getNumberOfFittingTicks(a,E,Tn.ticks.verticalSpaceRatio))),1===d.ticks().length&&0===d.ticks()[0]&&(q=0),B.ticks(q),v)if(d.ticks(q).length){const te=y(r,"timeScale","addSpaceOnEdges"),he=y(r,"axes",n,"domain"),$=d.copy();te&&!he&&$.nice(q);const K=$.ticks(q);te&&K.length>2&&!he&&(K.splice(K.length-1,1),K.splice(0,1)),B.tickValues(K)}else B.tickValues([])}let R;const W=y(f,"ticks","formatter"),{code:Z,number:z}=y(r,"locale");if(v){const q=Kc(B.tickValues(),y(r,"timeScale","timeInterval"));R=null===W?(te,he)=>zc(te,he,B.tickValues(),q,P,r.locale):(te,he)=>{const $=zc(te,he,B.tickValues(),q,P,r.locale);return W(te,he,$)}}else null===W?w===ne.LINEAR&&(R=q=>z(q,Z)):R=W;B.tickFormat(R);const[G,Y]=this.services.cartesianScales.getScaleByPosition(n).domain();let ue;if(M){if(v)M.forEach((q,te)=>{void 0===q.getTime&&(M[te]=new Date(q))}),ue=M.filter(q=>{const te=q.getTime();return te>=new Date(G).getTime()&&te<=new Date(Y).getTime()});else if(b===ne.LABELS){const q=this.services.cartesianScales.getScaleByPosition(n).domain();ue=M.filter(te=>q.includes(te))}else ue=M.filter(q=>q>=G&&q<=Y);B.tickValues(ue)}switch(n){case j.LEFT:m.attr("transform",`translate(${this.margins.left}, 0)`);break;case j.BOTTOM:m.attr("transform",`translate(0, ${a-this.margins.bottom})`);break;case j.RIGHT:m.attr("transform",`translate(${s-this.margins.right}, 0)`);break;case j.TOP:m.attr("transform",`translate(0, ${this.margins.top})`)}const J=this.model.isDataEmpty();if(f.title){const q=I.appendOrSelect(l,"text.axis-title").html(J||T?"":dn(f.title)),te=y(f,"titleOrientation");let he;switch(n){case j.LEFT:te===wi.RIGHT?q.attr("transform","rotate(90)").attr("y",0).attr("x",d.range()[0]/2).attr("dy","-0.5em").style("text-anchor","middle"):q.attr("transform","rotate(-90)").attr("y",0).attr("x",-d.range()[0]/2).attr("dy","0.75em").style("text-anchor","middle");break;case j.BOTTOM:q.attr("transform",`translate(${this.margins.left/2+d.range()[1]/2}, ${a+4})`).style("text-anchor","middle");break;case j.RIGHT:te===wi.LEFT?q.attr("transform","rotate(-90)").attr("y",s).attr("x",-d.range()[0]/2).style("text-anchor","middle"):q.attr("transform","rotate(90)").attr("y",-s).attr("x",d.range()[0]/2).attr("dy","0.75em").style("text-anchor","middle");break;case j.TOP:he=I.getSVGElementSize(q,{useBBox:!0}).height,q.attr("transform",`translate(${this.margins.left/2+d.range()[1]/2}, ${he/2})`).style("text-anchor","middle")}}if(v){const q=Kc(B.tickValues(),y(r,"timeScale","timeInterval")),te=P.showDayName,he=m;e&&(m=m.transition().call($=>this.services.transitions.setupTransition({transition:$,name:"axis-update",animate:e}))),m=m.call(B),he.selectAll(".tick").data(B.tickValues(),d).order().select("text").attr("class",($,K)=>ug($,K,B.tickValues(),q,te)?"tick-label--primary":"tick-label")}else m=e&&p?m.transition().call(q=>this.services.transitions.setupTransition({transition:q,name:"axis-update",animate:e})).call(B):m.call(B);if(_.call(B),n===j.BOTTOM||n===j.TOP){let q=!1;const te=y(f,"ticks","rotation");if(te===Br.ALWAYS)q=!0;else if(te===Br.NEVER)q=!1;else if(!te||te===Br.AUTO)if(d.step)q=_.selectAll("g.tick text").nodes().some(he=>I.getSVGElementSize(he,{useBBox:!0}).width>=d.step());else{q=!1;const he=_.append("text").text("A"),$=I.getSVGElementSize(he.node(),{useBBox:!0}).width;let K;_.selectAll("g.tick").each(function(){const X=L(this),U=parseFloat(y(xn(this),"tx"));null!==U&&K+X.text().length*$*.8>=U&&(q=!0),K=U}),he.remove()}q?(F||(B.ticks(this.getNumberOfFittingTicks(s,E,Tn.ticks.horizontalSpaceRatio)),_.call(B),m.call(B)),l.selectAll("g.ticks g.tick text").attr("transform","rotate(-45)").attr("text-anchor",n===j.TOP?"start":"end")):l.selectAll("g.ticks g.tick text").attr("transform",null).attr("text-anchor",null)}if(T?l.attr("opacity",0):l.attr("opacity",1),m.selectAll("g.tick").attr("aria-label",q=>q),_.selectAll("g.tick").attr("aria-label",q=>q),D!==Ct.NONE&&b===ne.LABELS&&!M){const q=this.services.cartesianScales.getScaleDomain(n);if(q.length>0){const te=o.select(`g.axis.${n} g.ticks g.tick`).html();l.selectAll("g.ticks g.tick").html(te);const he=this;l.selectAll("g.tick text").data(q).text(function($){return $.length>k?(he.truncation[n]=!0,ro($,D,H)):$}),this.getInvisibleAxisRef().selectAll("g.tick text").data(q).text(function($){return $.length>k?ro($,D,H):$}),l.selectAll("g.ticks").html(this.getInvisibleAxisRef().html()),l.selectAll("g.tick text").data(q)}}this.addEventListeners()}addEventListeners(){const e=this.getComponentContainer(),{position:n}=this.configs,r=I.appendOrSelect(e,`g.axis.${n}`),i=this.getOptions(),o=y(i,"axes",n),s=y(o,"scaleType"),a=y(o,"truncation","threshold"),l=this;r.selectAll("g.tick text").on("mouseover",function(c,u){l.services.events.dispatchEvent(O.Axis.LABEL_MOUSEOVER,{event:c,element:L(this),datum:u}),s===ne.LABELS&&u.length>a&&l.services.events.dispatchEvent(O.Tooltip.SHOW,{event:c,hoveredElement:L(this),content:u})}).on("mousemove",function(c,u){l.services.events.dispatchEvent(O.Axis.LABEL_MOUSEMOVE,{event:c,element:L(this),datum:u}),s===ne.LABELS&&u.length>a&&l.services.events.dispatchEvent(O.Tooltip.MOVE,{event:c})}).on("click",function(c,u){l.services.events.dispatchEvent(O.Axis.LABEL_CLICK,{event:c,element:L(this),datum:u})}).on("mouseout",function(c,u){l.services.events.dispatchEvent(O.Axis.LABEL_MOUSEOUT,{event:c,element:L(this),datum:u}),s===ne.LABELS&&l.services.events.dispatchEvent(O.Tooltip.HIDE)})}getInvisibleAxisRef(){const{position:e}=this.configs;return this.getComponentContainer().select(`g.axis.${e} g.ticks.invisible`)}getTitleRef(){const{position:e}=this.configs;return this.getComponentContainer().select(`g.axis.${e} text.axis-title`)}getNumberOfFittingTicks(e,n,r){return Sf(Math.floor(e/(n*r)),2,Tn.ticks.number)}destroy(){const e=this.getComponentContainer(),{position:n}=this.configs;I.appendOrSelect(e,`g.axis.${n}`).selectAll("g.tick text").on("mouseover",null).on("mousemove",null).on("mouseout",null)}}class bD extends pv{constructor(e,n,r){super(e,n,r)}render(e=!0){super.render(e),super.destroy();const n=this.configs.position,r=this.getComponentContainer({ariaLabel:"axes"}),i=I.appendOrSelect(r,`g.axis.${n}`),o=this;i.selectAll("g.tick").each(function(s,a){const l=L(this);l.classed("tick-hover",!0).attr("tabindex",0===a?0:-1);const c=l.select("text"),{width:u,height:d}=I.getSVGElementSize(c,{useBBox:!0}),h=I.appendOrSelect(l,"rect.axis-holder");let p=0,m=0;switch(n){case j.LEFT:p=-u+Number(c.attr("x")),m=-d/2;break;case j.RIGHT:p=Math.abs(Number(c.attr("x"))),m=-d/2;break;case j.TOP:p=-u/2,m=-d+Number(c.attr("y"))/2,o.truncation[n]&&(p=0,h.attr("transform","rotate(-45)"));break;case j.BOTTOM:p=-u/2,m=d/2-2,o.truncation[n]&&(p=-u,h.attr("transform","rotate(-45)"))}h.attr("x",p-Tn.hover.rectanglePadding).attr("y",m).attr("width",u+2*Tn.hover.rectanglePadding).attr("height",d).lower()}),this.addEventListeners()}addEventListeners(){const e=this.getComponentContainer(),{position:n}=this.configs,r=I.appendOrSelect(e,`g.axis.${n}`),i=this.getOptions(),o=y(i,"axes",n),s=y(o,"scaleType"),a=y(o,"truncation","threshold"),l=this;r.selectAll("g.tick.tick-hover").on("mouseover",function(c){const u=L(this).select("text"),d=u.datum();l.services.events.dispatchEvent(O.Axis.LABEL_MOUSEOVER,{event:c,element:u,datum:d}),s===ne.LABELS&&d.length>a&&l.services.events.dispatchEvent(O.Tooltip.SHOW,{event:c,element:u,datum:d})}).on("mousemove",function(c){const u=L(this).select("text"),d=u.datum();l.services.events.dispatchEvent(O.Axis.LABEL_MOUSEMOVE,{event:c,element:u,datum:d}),l.services.events.dispatchEvent(O.Tooltip.MOVE,{event:c})}).on("click",function(c){l.services.events.dispatchEvent(O.Axis.LABEL_CLICK,{event:c,element:L(this).select("text"),datum:L(this).select("text").datum()})}).on("mouseout",function(c){l.services.events.dispatchEvent(O.Axis.LABEL_MOUSEOUT,{event:c,element:L(this).select("text"),datum:L(this).select("text").datum()}),s===ne.LABELS&&l.services.events.dispatchEvent(O.Tooltip.HIDE)}).on("focus",function(c){const u={clientX:0,clientY:0};if(c.target){c.target.focus();const d=c.target.getBoundingClientRect();u.clientX=d.x,u.clientY=d.y}l.services.events.dispatchEvent(O.Axis.LABEL_FOCUS,{event:{...c,...u},element:L(this),datum:L(this).select("text").datum()})}).on("blur",function(c){l.services.events.dispatchEvent(O.Axis.LABEL_BLUR,{event:c,element:L(this),datum:L(this).select("text").datum()})}).on("keydown",function(c){c.key&&"Escape"===c.key&&(l.services.events.dispatchEvent(O.Tooltip.HIDE),l.services.events.dispatchEvent(O.Axis.LABEL_BLUR,{event:c,element:L(this),datum:L(this).select("text").datum()})),n===j.LEFT||n===j.RIGHT?c.key&&"ArrowUp"===c.key?l.goNext(this,c):c.key&&"ArrowDown"===c.key&&l.goPrevious(this,c):c.key&&"ArrowLeft"===c.key?l.goPrevious(this,c):c.key&&"ArrowRight"===c.key&&l.goNext(this,c)})}goNext(e,n){e.nextElementSibling&&"path"!==e.nextElementSibling.tagName&&e.nextElementSibling.dispatchEvent(new Event("focus")),n.preventDefault()}goPrevious(e,n){e.previousElementSibling&&"path"!==e.previousElementSibling.tagName&&e.previousElementSibling.dispatchEvent(new Event("focus")),n.preventDefault()}destroy(){const e=this.getComponentContainer(),{position:n}=this.configs;I.appendOrSelect(e,`g.axis.${n}`).selectAll("g.tick.tick-hover").on("mouseover",null).on("mousemove",null).on("mouseout",null).on("focus",null).on("blur",null)}}class vt extends fe{constructor(){super(...arguments),this.type="2D-axes",this.renderType=re.SVG,this.children={},this.thresholds=[],this.margins={top:0,right:0,bottom:0,left:0}}render(e=!1){const n={},r=Object.keys(j),i=y(this.getOptions(),"axes");r.forEach(s=>{i[j[s]]&&(n[j[s]]=!0)}),this.configs.axes=n,r.forEach(s=>{const a=j[s];if(this.configs.axes[a]&&!this.children[a]){const l={position:a,axes:this.configs.axes,margins:this.margins},c=this.model.axisFlavor===Dr.DEFAULT?new pv(this.model,this.services,l):new bD(this.model,this.services,l);c.setModel(this.model),c.setServices(this.services),c.setParent(this.parent),this.children[a]=c}}),Object.keys(this.children).forEach(s=>{this.children[s].render(e)});const o={};Object.keys(this.children).forEach(s=>{const a=this.children[s],l=a.configs.position,c=a.getInvisibleAxisRef(),{width:u,height:d}=I.getSVGElementSize(c,{useBBox:!0});let h;switch(a.getTitleRef().empty()?h=0:(h=I.getSVGElementSize(a.getTitleRef(),{useBBox:!0}).height,(l===j.LEFT||l===j.RIGHT)&&(h+=5)),l){case j.TOP:o.top=d+h;break;case j.BOTTOM:o.bottom=d+h;break;case j.LEFT:o.left=u+h;break;case j.RIGHT:o.right=u+h}}),this.services.events.dispatchEvent(O.Axis.RENDER_COMPLETE),Object.keys(o).some(s=>this.margins[s]!==o[s])&&(this.margins=Object.assign(this.margins,o),this.model.set({axesMargins:this.margins},{skipUpdate:!0}),this.services.events.dispatchEvent(O.ZoomBar.UPDATE),Object.keys(this.children).forEach(s=>{this.children[s].margins=this.margins}),this.render(!0))}}class dt extends fe{constructor(){super(...arguments),this.type="skeleton"}render(e=!0){const n=y(this.getOptions(),"data","loading");n?this.renderSkeleton(n):this.removeSkeleton()}renderSkeleton(e){if(this.configs.skeleton===Ge.GRID)this.renderGridSkeleton(e);else if(this.configs.skeleton===Ge.VERT_OR_HORIZ)this.renderVertOrHorizSkeleton(e);else if(this.configs.skeleton===Ge.PIE)this.renderPieSkeleton(e);else{if(this.configs.skeleton!==Ge.DONUT)throw new Error(`"${this.configs.skeleton}" is not a valid Skeleton type.`);this.renderDonutSkeleton(e)}}renderGridSkeleton(e){this.setScales(),this.drawBackdrop(e),this.drawXGrid(e),this.drawYGrid(e),e&&this.setShimmerEffect("shimmer-lines")}renderVertOrHorizSkeleton(e){const n=this.services.cartesianScales.getOrientation();this.setScales(),this.drawBackdrop(e),n===je.VERTICAL&&this.drawYGrid(e),n===je.HORIZONTAL&&this.drawXGrid(e),this.setShimmerEffect("shimmer-lines")}renderPieSkeleton(e){const n=this.computeOuterRadius();this.drawRing(n,0,e),e&&this.setShimmerEffect("shimmer-areas")}renderDonutSkeleton(e){const n=this.computeOuterRadius(),r=this.computeInnerRadius();this.drawRing(n,r,e),e&&this.setShimmerEffect("shimmer-areas")}setScales(){const e=this.services.cartesianScales.getMainXScale().range(),n=this.services.cartesianScales.getMainYScale().range();this.xScale=Yt().domain([0,1]).range(e),this.yScale=Yt().domain([0,1]).range(n)}drawBackdrop(e){const n=this.parent,{width:r,height:i}=I.getSVGElementSize(n,{useAttrs:!0});this.backdrop=I.appendOrSelect(n,"svg.chart-skeleton.DAII").attr("role","presentation").attr("width",r).attr("height",i);const o=I.appendOrSelect(this.backdrop,"rect.chart-skeleton-backdrop");o.attr("width","100%").attr("height","100%");const[s]=this.xScale.range(),[,a]=this.yScale.range();this.backdrop.merge(o).attr("x",s).attr("y",a),o.classed("shimmer-effect-lines",e).classed("empty-state-lines",!e).style("stroke",e?`url(#${this.services.domUtils.generateElementIDString("shimmer-lines")})`:null)}drawXGrid(e){const n=+this.backdrop.attr("width"),r=y(this.getOptions(),"grid","x","numberOfTicks"),i=this.xScale.ticks(r).map(a=>a*n),o=I.appendOrSelect(this.backdrop,"g.x.skeleton"),s=o.selectAll("line").data(i);s.enter().append("line").merge(s).attr("x1",a=>a).attr("x2",a=>a).attr("y1",0).attr("y2","100%"),o.selectAll("line").classed("shimmer-effect-lines",e).classed("empty-state-lines",!e).style("stroke",e?`url(#${this.services.domUtils.generateElementIDString("shimmer-lines")})`:null)}drawYGrid(e){const n=+this.backdrop.attr("height"),r=this.backdrop.attr("width"),i=y(this.getOptions(),"grid","y","numberOfTicks"),o=this.xScale.ticks(i).map(l=>l*n),s=I.appendOrSelect(this.backdrop,"g.y.skeleton"),a=s.selectAll("line").data(o);a.enter().append("line").merge(a).attr("x1",0).attr("x2",r).attr("y1",l=>l).attr("y2",l=>l),s.selectAll("line").classed("shimmer-effect-lines",e).classed("empty-state-lines",!e).style("stroke",e?`url(#${this.services.domUtils.generateElementIDString("shimmer-lines")})`:null)}drawRing(e,n,r=!0){const i=this.parent,{width:o,height:s}=I.getSVGElementSize(i,{useAttrs:!0}),a=I.appendOrSelect(i,"svg.chart-skeleton").attr("width",o).attr("height",s).attr("role","presentation"),l=0===n?"pie":"donut",c=y(this.getOptions(),l,"alignment");I.appendOrSelect(a,"rect.chart-skeleton-area-container").attr("width",o).attr("height",s).attr("fill","none");const u=Fo().innerRadius(n).outerRadius(e).startAngle(0).endAngle(2*Math.PI),d=e+Math.abs(Be.radiusOffset),h=e+(Math.min(o,s)-2*e)/2,p=I.appendOrSelect(a,"path").attr("class","skeleton-area-shape").attr("transform",`translate(${d}, ${h})`).attr("d",u).classed("shimmer-effect-areas",r).classed("empty-state-areas",!r).style("fill",r?`url(#${this.services.domUtils.generateElementIDString("shimmer-areas")})`:null);let m=e+Be.xOffset;c===$e.CENTER?m=o/2:c===$e.RIGHT&&(m=o-e-Be.xOffset);const _=e+Be.yOffset;p.attr("transform",`translate(${m}, ${_})`)}computeOuterRadius(){const{width:e,height:n}=I.getSVGElementSize(this.parent,{useAttrs:!0});return Math.min(e,n)/2+Be.radiusOffset}computeInnerRadius(){return this.computeOuterRadius()*(3/4)}setShimmerEffect(e){const n="stop-bg-shimmer",i=this.parent.select(".chart-skeleton"),{width:o}=I.getSVGElementSize(this.parent,{useAttrs:!0}),a=o,l=I.appendOrSelect(i,"defs").lower(),c=I.appendOrSelect(l,"linearGradient").attr("id",this.services.domUtils.generateElementIDString(e)).attr("class",e).attr("x1",0-3*.2*o).attr("x2",a).attr("y1",0).attr("y2",0).attr("gradientUnits","userSpaceOnUse").attr("gradientTransform","translate(0, 0)"),u=`\n\t\t\t<stop class="${n}" offset="0"></stop>\n\t\t\t<stop class="stop-shimmer" offset="0.2"></stop>\n\t\t\t<stop class="${n}" offset="0.4"></stop>\n\t\t`;c.html(u),function d(){c.attr("gradientTransform",`translate(${0-3*.2*o}, 0)`).transition().duration(2e3).delay(1e3).ease(ok).attr("gradientTransform",`translate(${a+3*.2*o}, 0)`).on("end",d)}()}removeSkeleton(){this.parent.select(".chart-skeleton").remove()}}class ED extends fe{constructor(){super(...arguments),this.type="boxplot",this.renderType=re.SVG}render(e){const n=this.getComponentContainer({ariaLabel:"box plots",withinChartClip:!0}),r=this.getOptions(),{groupMapsTo:i}=r.data,o=this.model.getDataGroupNames(),s=this.services.cartesianScales.getMainXScale(),a=this.services.cartesianScales.getMainYScale(),[l,c]=s.range(),[u,d]=a.range(),h=c-l,p=u-d;if(0===h)return;const{cartesianScales:m}=this.services,_=m.getOrientation(),f=_===je.VERTICAL,[v,C]=bn(F=>this.services.cartesianScales.getDomainValue(F),F=>this.services.cartesianScales.getRangeValue(F),_),x=Math.floor((f?h:p)/o.length),b=Math.min(x/2,16),T=this.model.getBoxplotData(),S=n.selectAll(".box-group").data(T);S.exit().remove();const M=S.enter().append("g").attr("class","box-group"),D=S.merge(M);M.append("path").merge(S.select("path.vertical-line.start")).attr("class",()=>this.model.getColorClassName({classNameTypes:[oe.STROKE],originalClassName:"vertical-line start"})).attr("stroke-width",bt.strokeWidth.default).attr("fill","none").transition().call(F=>this.services.transitions.setupTransition({transition:F,name:"boxplot-update-verticalstartline",animate:e})).attr("d",F=>{const P=m.getDomainValue(F[i]),N=P,V=m.getRangeValue(F.whiskers.min),E=m.getRangeValue(F.quartiles.q_25);return at({x0:P,x1:N,y0:V,y1:E},_)}),M.append("path").merge(S.select("path.vertical-line.end")).attr("class",()=>this.model.getColorClassName({classNameTypes:[oe.STROKE],originalClassName:"vertical-line end"})).attr("stroke-width",bt.strokeWidth.default).attr("fill","none").transition().call(F=>this.services.transitions.setupTransition({transition:F,name:"boxplot-update-verticalendline",animate:e})).attr("d",F=>{const P=m.getDomainValue(F[i]),N=P,V=m.getRangeValue(F.whiskers.max),E=m.getRangeValue(F.quartiles.q_75);return at({x0:P,x1:N,y0:V,y1:E},_)}),M.append("path").merge(S.select("path.box")).attr("class",()=>this.model.getColorClassName({classNameTypes:[oe.FILL,oe.STROKE],originalClassName:"box"})).attr("fill-opacity",bt.box.opacity.default).attr("stroke-width",bt.strokeWidth.default).attr("role",de.GRAPHICS_SYMBOL).attr("aria-roledescription","box").attr("aria-label",F=>F[i]).transition().call(F=>this.services.transitions.setupTransition({transition:F,name:"boxplot-update-quartiles",animate:e})).attr("d",F=>{const P=m.getDomainValue(F[i])-b/2,N=P+b,V=m.getRangeValue(Math[f?"max":"min"](F.quartiles.q_75,F.quartiles.q_25)),E=V+Math.abs(m.getRangeValue(F.quartiles.q_75)-m.getRangeValue(F.quartiles.q_25));return at({x0:P,x1:N,y0:V,y1:E},_)}),M.append("path").merge(S.select("path.highlight-area")).attr("class","highlight-area").attr("opacity",0).attr("d",F=>{const P=m.getDomainValue(F[i])-b/2,N=P+b,V=m.getRangeValue(F.whiskers.min),E=m.getRangeValue(F.whiskers.max);return at({x0:P,x1:N,y0:V,y1:E},_)}),M.append("path").merge(S.select("path.whisker.start")).attr("class",()=>this.model.getColorClassName({classNameTypes:[oe.STROKE],originalClassName:"whisker start"})).attr("stroke-width",bt.strokeWidth.thicker).attr("fill","none").transition().call(F=>this.services.transitions.setupTransition({transition:F,name:"boxplot-update-startingwhisker",animate:e})).attr("d",F=>{const P=m.getDomainValue(F[i])-b/4,N=P+b/2,V=m.getRangeValue(F.whiskers.min),E=m.getRangeValue(F.whiskers.min);return at({x0:P,x1:N,y0:V,y1:E},_)}),M.append("path").merge(S.select("path.median")).attr("fill","none").attr("class",()=>this.model.getColorClassName({classNameTypes:[oe.STROKE],originalClassName:"median"})).attr("stroke-width",2).transition().call(F=>this.services.transitions.setupTransition({transition:F,name:"boxplot-update-median",animate:e})).attr("d",F=>{const P=m.getDomainValue(F[i])-b/2,N=P+b,V=m.getRangeValue(F.quartiles.q_50);return at({x0:P,x1:N,y0:V,y1:V},_)}),M.append("path").merge(S.select("path.whisker.end")).attr("class",()=>this.model.getColorClassName({classNameTypes:[oe.STROKE],originalClassName:"whisker end"})).attr("stroke-width",bt.strokeWidth.thicker).attr("fill","none").transition().call(F=>this.services.transitions.setupTransition({transition:F,name:"boxplot-update-endingwhisker",animate:e})).attr("d",F=>{const P=m.getDomainValue(F[i])-b/4,N=P+b/2,V=m.getRangeValue(F.whiskers.max),E=m.getRangeValue(F.whiskers.max);return at({x0:P,x1:N,y0:V,y1:E},_)});const k=D.selectAll("circle.outlier").data(F=>F.outliers.map(P=>({min:F.whiskers.min,max:F.whiskers.max,[i]:F[i],value:P})));k.exit().remove();const H=k.enter().append("circle");k.merge(H).attr("r",bt.circle.radius).attr("class",()=>this.model.getColorClassName({classNameTypes:[oe.FILL,oe.STROKE],originalClassName:"outlier"})).attr("fill-opacity",bt.circle.opacity.default).attr("cx",v).transition().call(F=>this.services.transitions.setupTransition({transition:F,name:"boxplot-update-circles",animate:e})).attr("cy",C),this.addBoxEventListeners(),this.addCircleEventListeners()}addBoxEventListeners(){const e=this,n=this.getOptions(),{groupMapsTo:r}=n.data;this.parent.selectAll("path.highlight-area").on("mouseover",function(i,o){const s=L(this);L(this.parentNode).select("path.box").classed("hovered",!0).attr("fill-opacity",bt.box.opacity.hovered),e.services.events.dispatchEvent(O.Tooltip.SHOW,{event:i,hoveredElement:s,items:[{label:y(n,"locale","translations","group")||y(n,"tooltip","groupLabel")||"Group",value:o[r],class:e.model.getColorClassName({classNameTypes:[oe.TOOLTIP]})},{label:"Minimum",value:o.whiskers.min},{label:"Q1",value:o.quartiles.q_25},{label:"Median",value:o.quartiles.q_50},{label:"Q3",value:o.quartiles.q_75},{label:"Maximum",value:o.whiskers.max},{label:"IQR",value:o.quartiles.q_75-o.quartiles.q_25}]}),e.services.events.dispatchEvent(O.Boxplot.BOX_MOUSEOVER,{event:i,element:s,datum:o})}).on("mousemove",function(i,o){const s=L(this);e.services.events.dispatchEvent(O.Boxplot.BOX_MOUSEMOVE,{event:i,element:s,datum:o}),e.services.events.dispatchEvent(O.Tooltip.MOVE,{event:i})}).on("click",function(i,o){e.services.events.dispatchEvent(O.Boxplot.BOX_CLICK,{event:i,element:L(this),datum:o})}).on("mouseout",function(i,o){const s=L(this);L(this.parentNode).select("path.box").classed("hovered",!1).attr("fill-opacity",bt.box.opacity.default),e.services.events.dispatchEvent(O.Boxplot.BOX_MOUSEOUT,{event:i,element:s,datum:o}),e.services.events.dispatchEvent(O.Tooltip.HIDE,{hoveredElement:s})})}addCircleEventListeners(){const e=this,n=this.getOptions(),{groupMapsTo:r}=n.data,i=this.services.cartesianScales.getRangeIdentifier();this.parent.selectAll("circle").on("mouseover",function(o,s){const a=L(this);a.classed("hovered",!0).attr("fill-opacity",bt.circle.opacity.hovered).classed("unfilled",!1),e.services.events.dispatchEvent(O.Tooltip.SHOW,{event:o,hoveredElement:a,items:[{label:y(n,"locale","translations","group")||y(n,"tooltip","groupLabel")||"Group",value:s[r],class:e.model.getColorClassName({classNameTypes:[oe.TOOLTIP]})},{label:"Outlier",value:s[i]}]}),e.services.events.dispatchEvent(O.Boxplot.OUTLIER_MOUSEOVER,{event:o,element:a,datum:s})}).on("mousemove",function(o,s){const a=L(this);e.services.events.dispatchEvent(O.Boxplot.OUTLIER_MOUSEMOVE,{event:o,element:a,datum:s}),e.services.events.dispatchEvent(O.Tooltip.MOVE,{event:o})}).on("click",function(o,s){e.services.events.dispatchEvent(O.Boxplot.OUTLIER_CLICK,{event:o,element:L(this),datum:s})}).on("mouseout",function(o,s){const a=L(this);a.classed("hovered",!1).attr("fill-opacity",bt.circle.opacity.default),e.services.events.dispatchEvent(O.Boxplot.OUTLIER_MOUSEOUT,{event:o,element:a,datum:s}),e.services.events.dispatchEvent(O.Tooltip.HIDE,{hoveredElement:a})})}}class di extends fe{constructor(){super(...arguments),this.type="zero-line",this.renderType=re.SVG}render(e){const n=this.services.cartesianScales.getRangeAxisPosition({groups:this.configs.groups}),r=this.services.cartesianScales.getScaleByPosition(n),[i,o]=r.domain(),s=i>0&&o<0||i<0&&o>0,a=this.getComponentContainer({isPresentational:!0});if(!s)return void a.selectAll("line.domain").remove();const[l,c]=this.services.cartesianScales.getDomainScale().range();let u=+r(0)+.5;u||(u=r.range()[0]);const d=Jm({x0:l,x1:c,y0:u,y1:u},this.services.cartesianScales.getOrientation());I.appendOrSelect(a,"line.domain").transition().call(h=>this.services.transitions.setupTransition({transition:h,name:"zero-line-update",animate:e})).attr("y1",d.y0).attr("y2",d.y1).attr("x1",d.x0).attr("x2",d.x1)}}class SD extends pn{constructor(){super(...arguments),this.type="bubble",this.renderType=re.SVG}getRadiusScale(e){const n=this.getOptions(),{radiusMapsTo:r}=n.bubble,i=e.data(),o=i.map(c=>c[r]).filter(c=>c),s=I.getHTMLElementSize(this.services.domUtils.getMainContainer()),a=o.length>0,l=a?zt(o):[1,1];return Yt().domain(l).range(a?n.bubble.radiusRange(s,i):[4,4])}styleCircles(e,n){const r=this.getOptions(),{radiusMapsTo:i}=r.bubble,o=this.getRadiusScale(e),{groupMapsTo:s}=r.data,{cartesianScales:a}=this.services,[u,d]=bn(h=>a.getDomainValue(h),h=>a.getRangeValue(h),a.getOrientation());e.raise().classed("dot",!0).attr("role",de.GRAPHICS_SYMBOL).attr("aria-label",h=>h[a.getRangeIdentifier(h)]).transition().call(h=>this.services.transitions.setupTransition({transition:h,name:"bubble-update-enter",animate:n})).attr("cx",u).attr("cy",d).attr("r",h=>o(h[i]||1)).attr("class",h=>this.model.getColorClassName({classNameTypes:[oe.FILL,oe.STROKE],dataGroupName:h[s],originalClassName:"dot"})).style("fill",h=>{const p=this.services.cartesianScales.getDomainIdentifier(h);return this.model.getFillColor(h[s],h[p],h)}).style("stroke",h=>{const p=this.services.cartesianScales.getDomainIdentifier(h);return this.model.getStrokeColor(h[s],h[p],h)}).attr("fill-opacity",r.bubble.fillOpacity).attr("opacity",1)}getTooltipAdditionalItems(e){const n=y(this.getOptions(),"bubble");return[{label:y(n,"radiusLabel"),value:e[y(n,"radiusMapsTo")]}]}}class OD extends fe{constructor(){super(...arguments),this.type="bullet",this.renderType=re.SVG,this.handleLegendOnHover=e=>{const{hoveredElement:n}=e.detail,{groupMapsTo:r}=this.getOptions().data;this.parent.selectAll("path.bar").transition("legend-hover-simple-bar").call(i=>this.services.transitions.setupTransition({transition:i,name:"legend-hover-simple-bar"})).attr("opacity",i=>i[r]!==n.datum().name?.3:1)},this.handleLegendMouseOut=()=>{this.parent.selectAll("path.bar").transition("legend-mouseout-simple-bar").call(e=>this.services.transitions.setupTransition({transition:e,name:"legend-mouseout-simple-bar"})).attr("opacity",1)}}init(){const e=this.services.events;e.addEventListener(O.Legend.ITEM_HOVER,this.handleLegendOnHover),e.addEventListener(O.Legend.ITEM_MOUSEOUT,this.handleLegendMouseOut)}render(e){const n=this.getOptions(),{groupMapsTo:r}=n.data,i=this.getComponentContainer({ariaLabel:"bullet graphs",withinChartClip:!0}),o=this.model.getDisplayData(this.configs.groups),s=this.services.cartesianScales.getRangeScale(),a=this.services.cartesianScales.getRangeIdentifier(),[l,c]=s.range(),[,u]=s.domain();(()=>{const _=[];o.forEach(v=>{v.ranges?v.ranges.forEach((C,x)=>{null!=C&&C<u&&_.push({datum:v,value:C,order:x+1})}):_.push({datum:v,order:1})});const f=I.appendOrSelect(i,"g.range-boxes").selectAll("path.range-box").data(_,v=>`${v[r]}-${v.order}`);f.exit().attr("opacity",0).remove(),f.enter().append("path").attr("opacity",0).merge(f).attr("class",v=>`range-box order-${v.order}`).transition().call(v=>this.services.transitions.setupTransition({transition:v,name:"bullet-range-box-update-enter",animate:e})).attr("d",v=>{let C,x,b,T;return 1===v.order?(C=this.services.cartesianScales.getDomainValue(v.datum)-8,x=C+16,b=c-2,T=l+1):(C=this.services.cartesianScales.getDomainValue(v.datum)-8,x=C+16,b=this.services.cartesianScales.getRangeValue(v.value),T=c),at({x0:C,x1:x,y0:b,y1:T},this.services.cartesianScales.getOrientation())}).attr("opacity",1)})(),(()=>{const _=I.appendOrSelect(i,"g.bars").selectAll("path.bar").data(o,f=>f[r]);_.exit().attr("opacity",0).remove(),_.enter().append("path").attr("opacity",0).merge(_).classed("bar",!0).transition().call(f=>this.services.transitions.setupTransition({transition:f,name:"bullet-bar-update-enter",animate:e})).attr("class",f=>this.model.getColorClassName({classNameTypes:[oe.FILL],dataGroupName:f[r],originalClassName:"bar"})).style("fill",f=>{const v=this.services.cartesianScales.getDomainIdentifier(f);return this.model.getFillColor(f[r],f[v],f)}).attr("d",f=>{const v=this.services.cartesianScales.getDomainValue(f)-4,C=v+8,x=this.services.cartesianScales.getRangeValue(0)+1,b=this.services.cartesianScales.getRangeValue(f);return at({x0:v,x1:C,y0:x,y1:b},this.services.cartesianScales.getOrientation())}).attr("opacity",1).attr("role",de.GRAPHICS_SYMBOL).attr("aria-roledescription","bar").attr("aria-label",f=>f.value)})(),(()=>{const _=I.appendOrSelect(i,"g.markers").selectAll("path.marker").data(o.filter(f=>null!==y(f,"marker")),f=>f[r]);_.exit().attr("opacity",0).remove(),_.enter().append("path").attr("opacity",0).merge(_).classed("marker",!0).transition().call(f=>this.services.transitions.setupTransition({transition:f,name:"bullet-marker-update-enter",animate:e})).attr("d",f=>{const v=this.services.cartesianScales.getDomainValue(f)-12,C=v+24,x=this.services.cartesianScales.getRangeValue(f.marker);return at({x0:v,x1:C,y0:x,y1:x},this.services.cartesianScales.getOrientation())}).attr("opacity",1)})(),(()=>{let _=[];o.filter(v=>null!==y(v,"marker")).forEach(v=>{const C=v.marker,x=v[a];_=_.concat([{datum:v,value:.25*C,barValue:x},{datum:v,value:.5*C,barValue:x},{datum:v,value:.75*C,barValue:x}])});const f=I.appendOrSelect(i,"g.quartiles").selectAll("path.quartile").data(_,v=>v[r]);f.exit().attr("opacity",0).remove(),f.enter().append("path").attr("opacity",0).merge(f).attr("class",v=>"quartile "+(v.value<=v.barValue?"over-bar":"")).transition().call(v=>this.services.transitions.setupTransition({transition:v,name:"bullet-quartile-update-enter",animate:e})).attr("d",({datum:v,value:C})=>{let x=4;v.ranges&&-1!==v.ranges.indexOf(C)&&(x=8);const b=this.services.cartesianScales.getDomainValue(v)-x/2,T=b+x,S=this.services.cartesianScales.getRangeValue(C);return at({x0:b,x1:T,y0:S,y1:S},this.services.cartesianScales.getOrientation())}).attr("opacity",1)})(),this.addEventListeners()}addEventListeners(){const e=this,n=this.getOptions(),{groupMapsTo:r}=n.data,i=this.services.cartesianScales.getRangeIdentifier(),{code:o,number:s}=y(n,"locale");this.parent.selectAll("path.bar").on("mouseover",function(a,l){const c=L(this);c.classed("hovered",!0),e.services.events.dispatchEvent(O.Bar.BAR_MOUSEOVER,{event:a,element:c,datum:l});const u=y(n,"bullet","performanceAreaTitles"),d=e.model.getMatchingRangeIndexForDatapoint(l);e.services.events.dispatchEvent(O.Tooltip.SHOW,{event:a,hoveredElement:c,items:[{label:y(n,"locale","translations","group")||y(n,"tooltip","groupLabel")||"Group",value:l[r],class:e.model.getColorClassName({classNameTypes:[oe.TOOLTIP],dataGroupName:l[r]})},{label:"Value",value:l[i]},{label:"Target",value:l.marker},{label:"Percentage",value:`${s(Math.floor(l[i]/l.marker*100),o)}%`},{label:"Performance",value:u[d]}]})}).on("mousemove",function(a,l){e.services.events.dispatchEvent(O.Bar.BAR_MOUSEMOVE,{event:a,element:L(this),datum:l}),e.services.events.dispatchEvent(O.Tooltip.MOVE,{event:a})}).on("click",function(a,l){e.services.events.dispatchEvent(O.Bar.BAR_CLICK,{event:a,element:L(this),datum:l})}).on("mouseout",function(a,l){const c=L(this);c.classed("hovered",!1),e.services.events.dispatchEvent(O.Bar.BAR_MOUSEOUT,{event:a,element:c,datum:l}),e.services.events.dispatchEvent(O.Tooltip.HIDE,{hoveredElement:c})})}destroy(){this.parent.selectAll("path.bar").on("mouseover",null).on("mousemove",null).on("mouseout",null);const e=this.services.events;e.removeEventListener(O.Legend.ITEM_HOVER,this.handleLegendOnHover),e.removeEventListener(O.Legend.ITEM_MOUSEOUT,this.handleLegendMouseOut)}}function wD(t){return t}function mv(t,e){var n=e.id,r=e.bbox,i=null==e.properties?{}:e.properties,o=Gh(t,e);return null==n&&null==r?{type:"Feature",properties:i,geometry:o}:null==r?{type:"Feature",id:n,properties:i,geometry:o}:{type:"Feature",id:n,bbox:r,properties:i,geometry:o}}function Gh(t,e){var n=function FD(t){if(null==t)return wD;var e,n,r=t.scale[0],i=t.scale[1],o=t.translate[0],s=t.translate[1];return function(a,l){l||(e=n=0);var c=2,u=a.length,d=new Array(u);for(d[0]=(e+=a[0])*r+o,d[1]=(n+=a[1])*i+s;c<u;)d[c]=a[c],++c;return d}}(t.transform),r=t.arcs;function i(u,d){d.length&&d.pop();for(var h=r[u<0?~u:u],p=0,m=h.length;p<m;++p)d.push(n(h[p],p));u<0&&function MD(t,e){for(var n,r=t.length,i=r-e;i<--r;)n=t[i],t[i++]=t[r],t[r]=n}(d,m)}function o(u){return n(u)}function s(u){for(var d=[],h=0,p=u.length;h<p;++h)i(u[h],d);return d.length<2&&d.push(d[0]),d}function a(u){for(var d=s(u);d.length<4;)d.push(d[0]);return d}function l(u){return u.map(a)}return function c(u){var h,d=u.type;switch(d){case"GeometryCollection":return{type:d,geometries:u.geometries.map(c)};case"Point":h=o(u.coordinates);break;case"MultiPoint":h=u.coordinates.map(o);break;case"LineString":h=s(u.arcs);break;case"MultiLineString":h=u.arcs.map(s);break;case"Polygon":h=l(u.arcs);break;case"MultiPolygon":h=u.arcs.map(l);break;default:return null}return{type:d,coordinates:h}}(e)}function kD(t,e){var n={},r={},i={},o=[],s=-1;function l(c,u){for(var d in c){var h=c[d];delete u[h.start],delete h.start,delete h.end,h.forEach(function(p){n[p<0?~p:p]=1}),o.push(h)}}return e.forEach(function(c,u){var h,d=t.arcs[c<0?~c:c];d.length<3&&!d[1][0]&&!d[1][1]&&(h=e[++s],e[s]=c,e[u]=h)}),e.forEach(function(c){var p,m,u=function a(c){var h,u=t.arcs[c<0?~c:c],d=u[0];return t.transform?(h=[0,0],u.forEach(function(p){h[0]+=p[0],h[1]+=p[1]})):h=u[u.length-1],c<0?[h,d]:[d,h]}(c),d=u[0],h=u[1];if(p=i[d])if(delete i[p.end],p.push(c),p.end=h,m=r[h]){delete r[m.start];var _=m===p?p:p.concat(m);r[_.start=p.start]=i[_.end=m.end]=_}else r[p.start]=i[p.end]=p;else if(p=r[h])if(delete r[p.start],p.unshift(c),p.start=d,m=i[d]){delete i[m.end];var f=m===p?p:m.concat(p);r[f.start=m.start]=i[f.end=p.end]=f}else r[p.start]=i[p.end]=p;else r[(p=[c]).start=d]=i[p.end=h]=p}),l(i,r),l(r,i),e.forEach(function(c){n[c<0?~c:c]||o.push([c])}),o}function RD(t){return Gh(t,DD.apply(this,arguments))}function DD(t,e){var n={},r=[],i=[];function s(l){l.forEach(function(c){c.forEach(function(u){(n[u=u<0?~u:u]||(n[u]=[])).push(l)})}),r.push(l)}function a(l){return function BD(t){for(var r,e=-1,n=t.length,i=t[n-1],o=0;++e<n;)r=i,i=t[e],o+=r[0]*i[1]-r[1]*i[0];return Math.abs(o)}(Gh(t,{type:"Polygon",arcs:[l]}).coordinates[0])}return e.forEach(function o(l){switch(l.type){case"GeometryCollection":l.geometries.forEach(o);break;case"Polygon":s(l.arcs);break;case"MultiPolygon":l.arcs.forEach(s)}}),r.forEach(function(l){if(!l._){var c=[],u=[l];for(l._=1,i.push(c);l=u.pop();)c.push(l),l.forEach(function(d){d.forEach(function(h){n[h<0?~h:h].forEach(function(p){p._||(p._=1,u.push(p))})})})}}),r.forEach(function(l){delete l._}),{type:"MultiPolygon",arcs:i.map(function(l){var u,c=[];if(l.forEach(function(_){_.forEach(function(f){f.forEach(function(v){n[v<0?~v:v].length<2&&c.push(v)})})}),(u=(c=kD(t,c)).length)>1)for(var p,m,d=1,h=a(c[0]);d<u;++d)(p=a(c[d]))>h&&(m=c[0],c[0]=c[d],c[d]=m,h=p);return c}).filter(function(l){return l.length>0})}}class HD extends qn{constructor(){super(...arguments),this.type="ruler-binned",this.renderType=re.SVG}showRuler(e,[n,r]){const i=this.parent,o=this.model.getOptions(),{cartesianScales:s}=this.services,a=s.getOrientation(),l=s.getRangeScale(),[c,u]=l.range(),d=s.getDomainScale(),h=d.invert(a===je.VERTICAL?n:r),p=I.appendOrSelect(i,"g.ruler").attr("aria-label","ruler"),m=I.appendOrSelect(p,"line.ruler-line"),_=i.selectAll("[role=graphics-symbol]").filter(f=>{if(parseFloat(ve(f,"data.x0"))<=h&&parseFloat(ve(f,"data.x1"))>=h)return!0});if(_.size()>0){this.elementsToHighlight&&this.elementsToHighlight.size()>0&&!Of(this.elementsToHighlight,_)&&this.hideRuler(),_.dispatch("mouseover"),this.elementsToHighlight=_;const f=L(_.nodes()[0]).datum(),v=parseFloat(ve(f,"data.x0")),C=parseFloat(ve(f,"data.x1")),x=this.model.getActiveDataGroupNames(),b=x.reverse().map(T=>({label:T,value:ve(f,`data.${T}`),class:this.model.getColorClassName({classNameTypes:[oe.TOOLTIP],dataGroupName:T})})).filter(T=>0!==T.value);if(b.length>0){this.services.events.dispatchEvent(O.Tooltip.SHOW,{event:e,mousePosition:[n,r],hoveredElement:m,items:[{label:ve(o,"bins.rangeLabel")||"Range",value:`${v} \u2013 ${C}`},...b,...!0===y(o,"tooltip","showTotal")?[{label:ve(o,"locale.translations.total")||ve(o,"tooltip.totalLabel")||"Total",value:x.reduce((S,M)=>S+parseFloat(ve(f,`data.${M}`)),0)}]:[]]}),p.attr("opacity",1);const T=d((v+C)/2);"horizontal"===a?m.attr("x1",u).attr("x2",c).attr("y1",T).attr("y2",T):m.attr("y1",u).attr("y2",c).attr("x1",T).attr("x2",T)}else this.hideRuler()}else this.hideRuler()}}class Cl extends qn{formatTooltipData(e){return e.reverse()}}const LD=(t,e)=>{const n=t.x,r=t.y,i=e.x,o=e.y,s=Ua();return s.moveTo(n,r),s.lineTo(i,o),s.toString()},ID={d:"M7 0v8L0 4z",height:8,width:7.5,id:"arrowLeft"},ND={d:"M0 0v8l7-4z",height:8,width:7.5,id:"arrowRight"},WD={d:"M5.32 9.513a4.75 4.75 0 100-9.5 4.75 4.75 0 000 9.5z",height:10,width:10,id:"circle"},VD={d:"M5.03517654-1e-7l4.99999996 5-4.99999996 5-5-5L2.4517844 2.58339204z",height:10,width:10,id:"diamond"},PD={d:"M0 .44974747h8v8H0v-3.6830331z",height:9,width:8,id:"square"},UD={d:"M0 0h1.5v8H0z",height:8,width:2,id:"tee"};class gv extends Nh{constructor(e,n,r){super(e,n,r),this.type="color-legend",this.renderType=re.SVG,this.gradient_id=`gradient-id-${Math.floor(99999999999*Math.random())}`,this.handleAxisCompleteEvent=()=>{const i=this.getComponentContainer(),{width:o}=I.getSVGElementSize(i,{useAttrs:!0}),s=y(this.getOptions(),"data","loading");if(o>He.color.barWidth&&!s){const a=y(this.getOptions(),"heatmap","colorLegend","title"),{cartesianScales:l}=this.services,c=l.getMainXScale().range();if(c[0]>1&&(i.select("g.legend").attr("transform",`translate(${c[0]}, 0)`),a)){const{width:u}=I.getSVGElementSize(i.select("g.legend-title").select("text"),{useBBox:!0}),d=c[0]-u-9;d>1?i.select("g.legend-title").attr("transform",`translate(${d}, 0)`):(i.select("g.legend").attr("transform",`translate(${c[0]}, 16)`),i.select("g.legend-title").attr("transform",`translate(${c[0]}, 0)`))}}else i.select("g.legend-title").attr("transform","translate(0, 0)")},this.chartType=r.chartType}init(){"heatmap"===this.chartType&&this.services.events.addEventListener(O.Axis.RENDER_COMPLETE,this.handleAxisCompleteEvent)}render(e=!1){const n=this.getOptions(),r=this.getComponentContainer({ariaLabel:"legend"}),{width:i}=I.getSVGElementSize(r,{useAttrs:!0}),o=y(n,"color","gradient","colors"),s=y(n,this.chartType,"colorLegend","type");let a=y(n,"color","pairing","option");const l=y(n,"heatmap","colorLegend","title");if(y(this.getOptions(),"data","loading"))return void r.html("");const c=!Gt(o),u=dg(this.model.getDisplayData()),d=!(i<=He.color.barWidth),h=d?He.color.barWidth:i,p=I.appendOrSelect(r,"g.legend"),m=I.appendOrSelect(p,"g.legend-axis");if(l){const k=I.appendOrSelect(r,"g.legend-title");I.appendOrSelect(k,"text").text(l).attr("dy","0.7em"),p.attr("transform","translate(0, 16)")}const _=u[0]<0&&u[1]>0?"diverge":"mono";(a<1&&a>4&&"mono"===_||a<1&&a>2&&"diverge"===_)&&(a=1);let f=[];const v="diverge"===_?17:11;if(c)f=o;else for(let k=1;k<v+1;k++)f.push(s===Rr.LINEAR?`stop-color-${_}-${a}-${k}`:`fill-${_}-${a}-${k}`);const x=function ik(t,e){for(var n=new Array(e),r=0;r<e;++r)n[r]=t(r/(e-1));return n}(xt(u[0],u[1]),3),b=Yt().domain(u).range([0,h]),T=ju(b).tickSize(0).tickValues(x),{code:S,number:M}=y(n,"locale");let D;switch(T.tickFormat(k=>M(k,S)),s){case Rr.LINEAR:this.drawLinear(f,p,h);break;case Rr.QUANTIZE:D=this.drawQuantize(f,_,c,p,h),b.range([D,h]);break;default:throw Error("Entered color legend type is not supported.")}m.attr("transform",`translate(0,${He.color.axisYTranslation})`).call(T),m.select(".domain").remove(),m.select("g.tick:last-of-type text").style("text-anchor",d?"middle":"end"),m.select("g.tick:first-of-type text").style("text-anchor",d&&"choropleth"!==this.chartType?"middle":"start")}drawLinear(e,n,r){const i=100/(e.length-1);I.appendOrSelect(n,"linearGradient").attr("id",`${this.gradient_id}-legend`).selectAll("stop").data(e).enter().append("stop").attr("offset",(o,s)=>s*i+"%").attr("class",(o,s)=>e[s]).attr("stop-color",o=>o),I.appendOrSelect(n,"rect").attr("width",r).attr("height",He.color.barHeight).style("fill",`url(#${this.gradient_id}-legend)`)}drawQuantize(e,n,r,i,o){!r&&"diverge"===n&&e.splice(e.length/2,1);const s=so().domain(e).range([0,o]);return I.appendOrSelect(i,"g.quantized-rect").selectAll("rect").data(s.domain()).join("rect").attr("x",a=>s(a)).attr("y",0).attr("width",Math.max(0,s.bandwidth()-1)).attr("height",He.color.barHeight).attr("class",a=>a).attr("fill",a=>a),"mono"===(!r&&n)?s.bandwidth()-1:0}destroy(){"heatmap"===this.chartType&&this.services.events.removeEventListener(O.Axis.RENDER_COMPLETE,this.handleAxisCompleteEvent)}}class jD extends Ho{constructor(){super(...arguments),this.type="meter-title",this.renderType=re.SVG}render(e=!1){const n=y(this.model.getDisplayData(),0),r=this.getOptions(),i=this.getComponentContainer({ariaLabel:"meter title"}),{groupMapsTo:o}=r.data,s=r.locale.translations.meter.title;if(y(r,"meter","proportional"))this.displayTotal(),this.displayBreakdownTitle();else{const c=i.selectAll("text.meter-title").data(s?[s]:[n[o]]);c.enter().append("text").classed("meter-title",!0).merge(c).attr("x",0).attr("y","1em").text(u=>u),c.exit().remove(),this.appendPercentage()}this.displayStatus();const a=this.getMaxTitleWidth(),l=I.appendOrSelect(i,"text.meter-title");a>0&&l.node().getComputedTextLength()>a&&this.truncateTitle(l,a)}displayBreakdownTitle(){const e=this.getComponentContainer(),n=this.getOptions(),r=this.model.getMaximumDomain(this.model.getDisplayData()),i=y(n,"meter","proportional","total"),o=y(n,"meter","proportional","unit")?y(n,"meter","proportional","unit"):"";let s;if(r===i)s=null;else{const u=null!==i?i-r:r,d=y(n,"meter","proportional","breakdownFormatter"),{code:h,number:p}=y(n,"locale");s=null!==d?d({datasetsTotal:r,total:i}):`${p(r,h)} ${o} used (${p(u,h)} ${o} available)`}const a=e.selectAll("text.proportional-meter-title").data([s]);a.enter().append("text").classed("proportional-meter-title",!0).merge(a).attr("x",0).attr("y","1em").text(u=>u),a.exit().remove();const l=this.getMaxTitleWidth(),c=I.appendOrSelect(e,"text.proportional-meter-title");l>0&&c.node().getComputedTextLength()>l&&this.truncateTitle(c,l)}displayTotal(){const e=this.getComponentContainer(),n=this.getOptions(),r=y(n,"meter","proportional","total"),i=r?y(n,"meter","proportional","total"):this.model.getMaximumDomain(this.model.getDisplayData()),o=y(n,"meter","proportional","unit")?y(n,"meter","proportional","unit"):"",s=y(n,"meter","proportional","totalFormatter"),{code:a,number:l}=y(n,"locale"),c=null!==s?s(i):`${l(r,a)} ${o} total`,u=I.getHTMLElementSize(this.parent.node()).width,d=e.selectAll("text.proportional-meter-total").data([c]);d.enter().append("text").classed("proportional-meter-total",!0).merge(d).attr("x",this.model.getStatus()&&"string"!=typeof u?u-Ye.total.paddingRight:u).attr("y","1em").attr("text-anchor","end").text(h=>h),d.exit().remove()}displayStatus(){const n=this.getComponentContainer(),r=I.getHTMLElementSize(this.parent.node()).width||0,i=this.model.getStatus(),o=Ye.status.indicatorSize/2,s=I.appendOrSelect(n,"g.status-indicator").attr("class",null!==i?`status-indicator status--${i}`:"").attr("transform",`translate(${r-o}, 0)`),a=i?[i]:[],l=s.selectAll("circle.status").data(a);l.enter().append("circle").merge(l).attr("class","status").attr("r",o).attr("cx",0).attr("cy",8);const c=s.selectAll("path.innerFill").data(a);c.enter().append("path").merge(c).attr("d",this.getStatusIconPathString(i)).attr("transform",`translate(-${o}, 0)`).attr("class","innerFill"),c.exit().remove(),l.exit().remove()}appendPercentage(){const e=y(this.model.getDisplayData(),0,"value"),{code:n,number:r}=y(this.getOptions(),"locale"),i=this.getComponentContainer(),o=I.appendOrSelect(i,"text.meter-title"),s=!0===y(this.getOptions(),"meter","statusBar","percentageIndicator","enabled")?[e]:[],a=i.selectAll("text.percent-value").data(s),l=Ye.statusBar.paddingRight;a.enter().append("text").classed("percent-value",!0).merge(a).text(c=>`${null!=c?r(c,n):0}%`).attr("x",+o.attr("x")+o.node().getComputedTextLength()+l).attr("y",o.attr("y")),a.exit().remove()}truncateTitle(e,n){super.truncateTitle(e,n);const r=I.appendOrSelect(this.parent,"tspan"),i=Ye.statusBar.paddingRight,o=Math.ceil(r.node().getComputedTextLength());I.appendOrSelect(this.parent,"text.percent-value").attr("x",+e.attr("x")+e.node().getComputedTextLength()+o+i)}getMaxTitleWidth(){const e=y(this.getOptions(),"meter","proportional"),n=I.getHTMLElementSize(this.parent.node()).width;if(null!==e){const r=I.appendOrSelect(this.parent,"text.proportional-meter-total").node();return n-I.getSVGElementSize(r,{useBBox:!0}).width-Ye.total.paddingLeft}{const r=I.appendOrSelect(this.parent,"text.percent-value"),i=Ye.statusBar.paddingRight,o=r.node().getComputedTextLength(),s=I.appendOrSelect(this.parent,"g.status-indicator").node();return n-o-i-(I.getSVGElementSize(s,{useBBox:!0}).width+Ye.status.paddingLeft)}}getStatusIconPathString(e){switch(e){case kr.SUCCESS:return"M6.875 11.3125 3.75 8.1875 4.74375 7.25 6.875 9.34375 11.50625 4.75 12.5 5.7375 Z";case kr.DANGER:return"M10.7 11.5 4.5 5.3 5.3 4.5 11.5 10.7 Z";case kr.WARNING:return"M7.9375,11.125 C7.41973305,11.125 7,11.544733 7,12.0625 C7,12.580267 7.41973305,13 7.9375,13 C8.45526695,13 8.875,12.580267 8.875,12.0625 C8.875,11.544733 8.45526695,11.125 7.9375,11.125 M7.3125, 3 8.5625, 3 8.5625, 9.875 7.3125, 9.875, 7.3125, 3 Z"}}}class zh extends fe{getBarWidth(){const e=this.getOptions();if(e.bars.width)return e.bars.width;const n=this.model.getDisplayData().length,r=this.services.cartesianScales.getMainXScale(),i=I.getSVGElementSize(this.parent,{useAttrs:!0}).width;if(!r.step){const o=y(e,"bars","spacingFactor");return Math.min(e.bars.maxWidth,i*o/n)}return Math.min(e.bars.maxWidth,r.step()/2)}isOutsideZoomedDomain(e,n){if(this.model.getDisplayData().length<=1)return!1;const r=this.model.get("zoomDomain");if(void 0!==r){const i=this.services.cartesianScales.getDomainScale();return e<i(r[0])||n>i(r[1])}return!1}}class $D extends fe{constructor(){super(...arguments),this.type="circle-pack",this.renderType=re.SVG,this.handleLegendOnHover=e=>{const{hoveredElement:n}=e.detail;this.parent.selectAll("circle.node").transition("legend-hover-circlepack").call(r=>this.services.transitions.setupTransition({transition:r,name:"legend-hover-circlepack"})).attr("opacity",r=>r.data.dataGroupName===n.datum().name?1:dr.circles.fillOpacity)},this.handleLegendMouseOut=()=>{this.parent.selectAll("circle.node").transition("legend-mouseout-circlepack").call(e=>this.services.transitions.setupTransition({transition:e,name:"legend-mouseout-circlepack"})).attr("opacity",1)}}render(e=!0){const n=this.getComponentContainer({ariaLabel:"circle packs",withinChartClip:!0}),{width:r,height:i}=I.getSVGElementSize(this.parent,{useAttrs:!0});if(r<1||i<1)return;let o=this.model.getDisplayData();const s=this.model.hasParentNode(),a=this.model.getHierarchyLevel(),l=this.getOptions(),c=y(l,"canvasZoom","enabled");s&&y(o,0,"children")&&(o=y(o,0,"children"));const u=So({children:o}).sum(m=>m.value).sort((m,_)=>_.value-m.value),d=ZB().size([r,i]).padding(m=>m.depth>=1?dr.padding.children+3:dr.padding.mainGroup+3)(u).descendants().splice(1).filter(m=>m.depth<=a),h=n.selectAll("circle.node").data(d);h.exit().attr("width",0).attr("height",0).remove();const p=h.enter().append("circle").classed("node",!0);p.merge(h).attr("class",m=>{const _=c&&3===a?this.getZoomClass(m):"";return this.model.getColorClassName({classNameTypes:[oe.FILL,oe.STROKE],dataGroupName:m.data.dataGroupName,originalClassName:m.children?`node ${_}`:`node node-leaf ${_}`})}).style("fill",m=>this.model.getFillColor(m.data.dataGroupName,null,m.data)).style("stroke",m=>this.model.getFillColor(m.data.dataGroupName,null,m.data)).attr("cx",m=>m.x).attr("cy",m=>m.y).transition("circlepack-leaf-update-enter").call(m=>this.services.transitions.setupTransition({transition:m,name:"circlepack-leaf-update-enter"})).attr("r",m=>m.r).attr("opacity",1).attr("fill-opacity",dr.circles.fillOpacity),!0===c&&this.focal&&(this.services.canvasZoom.zoomIn(this.focal,p,hr),this.setBackgroundListeners()),s||this.addLegendListeners(),this.addEventListeners()}unhighlightChildren(e){const n=e.map(r=>r.data);this.parent.selectAll("circle.node").filter(r=>n.some(i=>i===r.data)&&r.depth>1).style("stroke",r=>this.model.getFillColor(r.data.dataGroupName,null,r.data))}highlightChildren(e){const n=e.map(r=>r.data);this.parent.selectAll("circle.node").filter(r=>n.some(i=>i===r.data)&&r.depth>1).style("stroke",dr.circles.hover.stroke)}getZoomClass(e){return 3===this.model.getHierarchyLevel()&&this.focal&&(e.data===this.focal.data||this.focal.children.some(n=>n.data===e.data))?"focal":"non-focal"}addLegendListeners(){const{events:e}=this.services;e.addEventListener(O.Legend.ITEM_HOVER,this.handleLegendOnHover),e.addEventListener(O.Legend.ITEM_MOUSEOUT,this.handleLegendMouseOut)}removeBackgroundListeners(){L(this.services.domUtils.getMainContainer()).on("click",()=>null)}setBackgroundListeners(){const e=L(this.services.domUtils.getMainContainer()),n=this,r=this.parent.selectAll("circle.node");e.on("click",()=>{n.focal=null,n.model.updateHierarchyLevel(2),e.classed("zoomed-in",!1),n.services.canvasZoom.zoomOut(r,hr)})}getZoomIcon(){return'\n\t\t<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 10 10">\n\t\t\t<polygon points="5.93 3.71 4.45 3.71 4.45 2.23 3.71 2.23 3.71 3.71 2.23 3.71 2.23 4.45 3.71 4.45 3.71 5.93 4.45 5.93 4.45 4.45 5.93 4.45 5.93 3.71"/>\n\t\t\t<path d="M7.2,6.67a4,4,0,0,0,1-2.59A4.08,4.08,0,1,0,4.07,8.15h0a4,4,0,0,0,2.59-1L9.48,10,10,9.48Zm-3.12.77A3.34,3.34,0,1,1,7.41,4.08,3.34,3.34,0,0,1,4.08,7.44Z"/>\n\t\t</svg>'}addEventListeners(){const e=this;this.parent.selectAll("circle.node").on("mouseover",function(n,r){const i=L(this);i.classed("hovered",!0);const o=e.model.getHierarchyLevel(),s=o>2&&!i.classed("focal"),a=y(e.model.getOptions(),"canvasZoom","enabled");let l=!1;if(!s){let c=[],u=[],d=null;if(r.children){r.depth>1&&a&&(l=!0,i.classed("clickable",!0)),c=r.children.map(m=>{if(null!==m)return"number"==typeof m.data.value?{label:m.data.name,value:m.data.value}:{label:m.data.name,labelIcon:a&&o<=2?e.getZoomIcon():null,value:m.value}});const p=e.model.getOptions();u=[{label:ve(p,"locale.translations.total")||ve(p,"tooltip.totalLabel")||"Total",value:r.value,bold:!0}],e.highlightChildren(r.children)}else d=r.value;const h=getComputedStyle(this,null).getPropertyValue("fill");e.services.events.dispatchEvent(O.Tooltip.SHOW,{event:n,hoveredElement:i,items:[{color:h,label:r.data.name,labelIcon:l&&a&&o<=2?e.getZoomIcon():null,value:d},...c,...u]})}e.services.events.dispatchEvent(O.CirclePack.CIRCLE_MOUSEOVER,{event:n,element:i,datum:r})}).on("mousemove",function(n,r){const i=L(this);e.services.events.dispatchEvent(O.CirclePack.CIRCLE_MOUSEMOVE,{event:n,element:i,datum:r}),e.services.events.dispatchEvent(O.Tooltip.MOVE,{event:n})}).on("mouseout",function(n,r){const i=L(this);i.classed("hovered",!1),r.children&&e.unhighlightChildren(r.children),e.services.events.dispatchEvent(O.CirclePack.CIRCLE_MOUSEOUT,{event:n,element:i,datum:r}),e.services.events.dispatchEvent(O.Tooltip.HIDE,{hoveredElement:i})}).on("click",function(n,r){const i=L(this),o=i.classed("non-focal"),s=y(e.model.getOptions(),"canvasZoom","enabled");if(s&&e.model.getHierarchyLevel()>2){const a=e.parent.selectAll("circle.node");L(e.services.domUtils.getMainContainer()).classed("zoomed-in",!1),e.focal=null,e.model.updateHierarchyLevel(2),e.services.canvasZoom.zoomOut(a,hr)}else if(2===r.depth&&r.children&&!o&&s){const a=e.parent.selectAll("circle.node");L(e.services.domUtils.getMainContainer()).classed("zoomed-in",!0),e.focal=r,e.model.updateHierarchyLevel(3),e.services.canvasZoom.zoomIn(r,a,hr),n.stopPropagation()}e.services.events.dispatchEvent(O.CirclePack.CIRCLE_CLICK,{event:n,element:i,datum:r})})}destroy(){this.parent.selectAll("circle.node").on("mouseover",null).on("mousemove",null).on("mouseout",null).on("click",null);const e=this.services.events;e.removeEventListener(O.Legend.ITEM_HOVER,this.handleLegendOnHover),e.removeEventListener(O.Legend.ITEM_MOUSEOUT,this.handleLegendMouseOut),this.removeBackgroundListeners()}}function GD(t,e){const n=Ki(this._current,t);return r=>(this._current=n(r),e(this._current))}class fv extends fe{constructor(){super(...arguments),this.type="pie",this.renderType=re.SVG,this.isRendering=!1,this.handleLegendOnHover=e=>{const{hoveredElement:n}=e.detail,{groupMapsTo:r}=this.getOptions().data;this.parent.selectAll("path.slice").transition("legend-hover-bar").call(i=>this.services.transitions.setupTransition({transition:i,name:"legend-hover-bar"})).attr("opacity",i=>i.data[r]!==n.datum().name?.3:1)},this.handleLegendMouseOut=()=>{this.parent.selectAll("path.slice").transition("legend-mouseout-bar").call(e=>this.services.transitions.setupTransition({transition:e,name:"legend-mouseout-bar"})).attr("opacity",1)}}init(){const e=this.services.events;e.addEventListener(O.Legend.ITEM_HOVER,this.handleLegendOnHover),e.addEventListener(O.Legend.ITEM_MOUSEOUT,this.handleLegendMouseOut)}getInnerRadius(){return Be.innerRadius}render(e=!0){const n=this,r=this.getComponentContainer({ariaLabel:"pie graph"}),i=this.getOptions(),{groupMapsTo:o}=i.data,{valueMapsTo:s}=i.pie;this.isRendering=!0;const a=this.model.getDisplayData().filter(k=>k[s]>0),l=this.computeRadius();this.arc=Fo().innerRadius(this.getInnerRadius()).outerRadius(l),this.hoverArc=Fo().innerRadius(this.getInnerRadius()).outerRadius(l+Be.hoverArc.outerRadiusOffset);const c=function yR(){var t=vR,e=_R,n=null,r=me(0),i=me(Ba),o=me(0);function s(a){var l,u,d,v,b,c=(a=Sa(a)).length,h=0,p=new Array(c),m=new Array(c),_=+r.apply(this,arguments),f=Math.min(Ba,Math.max(-Ba,i.apply(this,arguments)-_)),C=Math.min(Math.abs(f)/c,o.apply(this,arguments)),x=C*(f<0?-1:1);for(l=0;l<c;++l)(b=m[p[l]=l]=+t(a[l],l,a))>0&&(h+=b);for(null!=e?p.sort(function(T,S){return e(m[T],m[S])}):null!=n&&p.sort(function(T,S){return n(a[T],a[S])}),l=0,d=h?(f-c*x)/h:0;l<c;++l,_=v)u=p[l],v=_+((b=m[u])>0?b*d:0)+x,m[u]={data:a[u],index:l,value:b,startAngle:_,endAngle:v,padAngle:C};return m}return s.value=function(a){return arguments.length?(t="function"==typeof a?a:me(+a),s):t},s.sortValues=function(a){return arguments.length?(e=a,n=null,s):e},s.sort=function(a){return arguments.length?(n=a,e=null,s):n},s.startAngle=function(a){return arguments.length?(r="function"==typeof a?a:me(+a),s):r},s.endAngle=function(a){return arguments.length?(i="function"==typeof a?a:me(+a),s):i},s.padAngle=function(a){return arguments.length?(o="function"==typeof a?a:me(+a),s):o},s}().value(k=>k[s]).sort(y(i,"pie","sortFunction")).padAngle(Be.padAngle)(a),u=I.appendOrSelect(r,"g.slices").attr("role",de.GROUP).attr("data-name","slices").selectAll("path.slice").data(c,k=>k.data[o]);u.exit().attr("opacity",0).remove(),u.enter().append("path").classed("slice",!0).attr("opacity",0).merge(u).attr("class",k=>this.model.getColorClassName({classNameTypes:[oe.FILL],dataGroupName:k.data[o],originalClassName:"slice"})).style("fill",k=>n.model.getFillColor(k.data[o],null,k.data)).attr("d",this.arc).transition().call(k=>this.services.transitions.setupTransition({transition:k,name:"pie_slice_enter_update",animate:e})).attr("opacity",1).attr("role",de.GRAPHICS_SYMBOL).attr("aria-roledescription","slice").attr("aria-label",k=>`${k[s]}, ${Uc(k.data[s],a,s)+"%"}`).attrTween("d",function(k){return GD.bind(this)(k,n.arc)}).on("end",()=>{n.isRendering=!1});const{code:d,number:h}=y(i,"locale"),p=i.pie.labels.enabled,m=p?c.filter(k=>k.data[s]>0):[],_=I.appendOrSelect(r,"g.labels").attr("role",de.GROUP).attr("data-name","labels").selectAll("text.pie-label").data(m,k=>k.data[o]);_.exit().attr("opacity",0).remove();const f=_.enter().append("text").classed("pie-label",!0),v=[];f.merge(_).style("text-anchor","middle").text(k=>i.pie.labels.formatter?i.pie.labels.formatter({...k,percentageValue:Uc(k.data[s],a,s,!0)}):h(Uc(k.data[s],a,s),d)+"%").datum(function(k){const H=l+7,F=(k.endAngle-k.startAngle)/2+k.startAngle,P=F/Math.PI*180,N=this.getComputedTextLength();return k.textOffsetX=N/2,k.textOffsetY=P>90&&P<270?10:0,k.xPosition=(k.textOffsetX+H)*Math.sin(F),k.yPosition=(k.textOffsetY+H)*-Math.cos(F),k}).attr("transform",function(k,H){const F=m.length,P=(k.endAngle-k.startAngle)*(180/Math.PI);if(H>=F-2&&P<Be.callout.minSliceDegree){let N,V;return k.index===F-1?(N=k.xPosition+Be.callout.offsetX+Be.callout.textMargin+k.textOffsetX,V=k.yPosition-Be.callout.offsetY,k.direction=Ar.RIGHT,v.push(k)):(N=k.xPosition-Be.callout.offsetX-k.textOffsetX-Be.callout.textMargin,V=k.yPosition-Be.callout.offsetY,k.direction=Ar.LEFT,v.push(k)),`translate(${N}, ${V})`}return`translate(${k.xPosition}, ${k.yPosition})`}),this.renderCallouts(v);const C=y(i,"donut")?"donut":"pie",x=y(i,C,"alignment"),{width:b}=I.getSVGElementSize(this.getParent(),{useAttrs:!0}),T=p?Be.xOffset:0,S=p?Be.yOffset:0;let M=l+T;x===$e.CENTER?M=b/2:x===$e.RIGHT&&(M=b-l-Be.xOffset);let D=l+S;v.length>0&&(D+=Be.yOffsetCallout),r.attr("x",M+7).attr("y",D),this.addEventListeners()}renderCallouts(e){const n=I.appendOrSelect(this.getComponentContainer(),"g.callouts").attr("role",de.GROUP).attr("data-name","callouts"),r=n.selectAll("g.callout").data(e);r.exit().remove();const i=r.enter().append("g").classed("callout",!0).attr("role",de.GROUP).attr("aria-roledescription","label callout");i.merge(r).datum(function(o){const{xPosition:s,yPosition:a,direction:l}=o;return l===Ar.RIGHT?(o.startPos={x:s,y:a+o.textOffsetY},o.endPos={x:s+Be.callout.offsetX,y:a-Be.callout.offsetY+o.textOffsetY},o.intersectPointX=o.endPos.x-Be.callout.horizontalLineLength):(o.startPos={x:s,y:a+o.textOffsetY},o.endPos={x:s-Be.callout.offsetX,y:a-Be.callout.offsetY+o.textOffsetY},o.intersectPointX=o.endPos.x+Be.callout.horizontalLineLength),o}),i.append("line").classed("vertical-line",!0).merge(n.selectAll("line.vertical-line")).datum(function(){return L(this.parentNode).datum()}).style("stroke-width","1px").attr("x1",o=>o.startPos.x).attr("y1",o=>o.startPos.y).attr("x2",o=>o.intersectPointX).attr("y2",o=>o.endPos.y),i.append("line").classed("horizontal-line",!0).merge(n.selectAll("line.horizontal-line")).datum(function(){return L(this.parentNode).datum()}).style("stroke-width","1px").attr("x1",o=>o.intersectPointX).attr("y1",o=>o.endPos.y).attr("x2",o=>o.endPos.x).attr("y2",o=>o.endPos.y)}addEventListeners(){const e=this;this.parent.selectAll("path.slice").on("mouseover",function(n,r){const i=L(this);e.isRendering||i.classed("hovered",!0).transition("pie_slice_mouseover").call(a=>e.services.transitions.setupTransition({transition:a,name:"pie_slice_mouseover"})).attr("d",e.hoverArc),e.services.events.dispatchEvent(O.Pie.SLICE_MOUSEOVER,{event:n,element:L(this),datum:r});const{groupMapsTo:o}=e.getOptions().data,{valueMapsTo:s}=e.getOptions().pie;e.services.events.dispatchEvent(O.Tooltip.SHOW,{event:n,hoveredElement:i,items:[{label:r.data[o],value:r.data[s]}]})}).on("mousemove",function(n,r){const i=L(this);e.services.events.dispatchEvent(O.Pie.SLICE_MOUSEMOVE,{event:n,element:i,datum:r}),e.services.events.dispatchEvent(O.Tooltip.MOVE,{event:n})}).on("click",function(n,r){e.services.events.dispatchEvent(O.Pie.SLICE_CLICK,{event:n,element:L(this),datum:r})}).on("mouseout",function(n,r){const i=L(this);VA(()=>{e.isRendering||i.classed("hovered",!1).transition("pie_slice_mouseout").call(o=>e.services.transitions.setupTransition({transition:o,name:"pie_slice_mouseout"})).attr("d",e.arc)},100),e.services.events.dispatchEvent(O.Pie.SLICE_MOUSEOUT,{event:n,element:i,datum:r}),e.services.events.dispatchEvent(O.Tooltip.HIDE,{hoveredElement:i})})}computeRadius(){const{width:e,height:n}=I.getSVGElementSize(this.parent,{useAttrs:!0}),r=this.getOptions(),i=Math.min(e,n)/2;return r.pie.labels.enabled?i+Be.radiusOffset:i}}class zD extends fv{constructor(){super(...arguments),this.type="donut",this.renderType=re.SVG}render(e=!0){super.render(e);const n=this;if(this.model.isDataEmpty())return void this.getComponentContainer({ariaLabel:"donut graph"}).select("g.center").remove();const r=I.appendOrSelect(this.getComponentContainer({ariaLabel:"donut graph"}),"g.center"),i=this.getOptions(),o=this.computeRadius(),s=y(i,"donut","center","label");I.appendOrSelect(r,"text.donut-figure").attr("text-anchor","middle").style("dominant-baseline",()=>null===s||""===s?"central":"initial").style("font-size",()=>i.donut.center.numberFontSize(o)).transition().call(a=>this.services.transitions.setupTransition({transition:a,name:"donut-figure-enter-update",animate:e})).tween("text",function(){return n.centerNumberTween(L(this))}),null!==s&&""!==s&&I.appendOrSelect(r,"text.donut-title").attr("text-anchor","middle").style("font-size",()=>i.donut.center.titleFontSize(o)).attr("y",i.donut.center.titleYPosition(o)).text(s)}getInnerRadius(){return this.computeRadius()*(3/4)}centerNumberTween(e){const n=this.getOptions();let r=y(n,"donut","center","number");null===r&&(r=this.model.getDisplayData().reduce((a,l)=>a+l[n.pie.valueMapsTo],0));const i=parseInt(e.text().replace(/[, ]+/g,""),10)||0;let o;o=i%1==0&&r%1==0?pm:xt;const s=o(i,r);return a=>{const{numberFormatter:l}=n.donut.center;if(l)e.text(l(s(a)));else{const{code:c,number:u}=y(n,"locale");e.text(u(Math.floor(s(a)),c))}}}}const _v="4,10 8,6 12,10",vv="12,6 8,10 4,6";class KD extends fe{constructor(){super(...arguments),this.type="gauge",this.renderType=re.SVG}getValue(){var e;return(null==(e=this.model.getData().find(n=>"value"===n.group))?void 0:e.value)??null}getValueRatio(){return Sf(this.getValue(),0,100)/100}getDelta(){var e;return(null==(e=this.model.getData().find(n=>"delta"===n.group))?void 0:e.value)??null}getArcRatio(){const e=this.getOptions();return y(e,"gauge","type")===Vn.FULL?1:.5}getArcSize(){return this.getArcRatio()*Math.PI*2}getStartAngle(){const e=this.getArcSize();return e===2*Math.PI?0:-e/2}getArrow(e){const n=this.getOptions();switch(y(n,"gauge","deltaArrow","direction")){case Oi.UP:return _v;case Oi.DOWN:return vv;default:return e>0?_v:vv}}render(e=!0){const n=this.getComponentContainer({ariaLabel:"gauge graph"}).attr("width","100%").attr("height","100%"),r=this.getOptions(),i=this.getValue(),o=this.getValueRatio(),s=this.getArcSize(),a=this.getStartAngle(),c=a+o*s,u=a+s,d=this.computeRadius(),h=this.getInnerRadius();this.backgroundArc=Fo().innerRadius(h).outerRadius(d).startAngle(c).endAngle(u),this.arc=Fo().innerRadius(h).outerRadius(d).startAngle(a).endAngle(c),I.appendOrSelect(n,"path.arc-background").attr("d",this.backgroundArc);const p=n.selectAll("path.arc-foreground").data([i]);p.enter().append("path").merge(p).attr("class",this.model.getColorClassName({classNameTypes:[oe.FILL],dataGroupName:"value",originalClassName:"arc-foreground"})).style("fill",()=>y(this.getOptions(),"color","scale","value")).attr("d",this.arc).attr("role",de.GRAPHICS_SYMBOL).attr("aria-roledescription","value").attr("aria-label",v=>v),this.drawValueNumber(),this.drawDelta(),p.exit().remove();const m=y(r,"gauge","alignment"),{width:_}=I.getSVGElementSize(this.getParent(),{useAttrs:!0});let f=d;m===$e.CENTER?f=_/2:m===$e.RIGHT&&(f=_-d),n.attr("x",f).attr("y",d),this.addEventListeners()}drawValueNumber(){const e=this.getComponentContainer(),n=this.getOptions(),r=y(n,"gauge","type"),i=this.getValue(),o=this.getDelta(),s=this.computeRadius(),a=y(n,"gauge","valueFontSize"),l=y(n,"gauge","deltaFontSize"),c=y(n,"gauge","numberSpacing"),u=y(n,"gauge","showPercentageSymbol");let d=0;r!==Vn.FULL||o?r===Vn.SEMI&&o&&(d=-(l(s)+c)):d=l(s);const h=I.appendOrSelect(e,"g.gauge-numbers").attr("transform",`translate(0, ${d})`),p=a(s),m=I.appendOrSelect(h,"g.gauge-value-number"),{code:_,number:f}=y(n,"locale"),v=y(n,"gauge","numberFormatter"),C=m.selectAll("text.gauge-value-number").data([i]);C.enter().append("text").attr("class","gauge-value-number").merge(C).style("font-size",`${p}px`).attr("text-anchor","middle").text(k=>{let H;return H=null!=k?Number(k.toFixed(2))%1!=0?k.toFixed(2):k.toFixed():0,v?v(H):f(Number(H),_)});const{width:x}=I.getSVGElementSize(I.appendOrSelect(e,"text.gauge-value-number"),{useBBox:!0}),b=p/2,T=u?"%":"",S=I.appendOrSelect(m,"text.gauge-value-symbol").style("font-size",`${b}px`).attr("x",x/2).text(T),{width:M,height:D}=I.getSVGElementSize(S,{useBBox:!0});S.attr("y",`-${D/2}px`),m.attr("transform",`translate(-${M/2}, 0)`)}drawDelta(){const e=this,n=this.getComponentContainer(),r=this.getOptions(),i=this.getDelta(),{code:o,number:s}=y(r,"locale");if(i){const a=this.computeRadius(),l=i?y(r,"gauge","deltaFontSize"):()=>0,c=i?y(r,"gauge","numberFormatter"):()=>null,u=y(r,"gauge","deltaArrow","size"),d=y(r,"gauge","numberSpacing"),h=y(r,"gauge","showPercentageSymbol"),p=I.appendOrSelect(n,"g.gauge-numbers"),m=I.appendOrSelect(p,"g.gauge-delta").attr("transform",`translate(0, ${l(a)+d})`),_=I.appendOrSelect(m,"text.gauge-delta-number"),f=h?"%":"";_.data(null===i?[]:[i]),_.enter().append("text").classed("gauge-delta-number",!0).merge(_).attr("text-anchor","middle").style("font-size",`${l(a)}px`).text(b=>{let T;return T=null!=b?Number(b.toFixed(2))%1!=0?b.toFixed(2):b.toFixed():0,c?`${c(T)}${f}`:`${s(Number(T),o)}${f}`});const{width:v}=I.getSVGElementSize(I.appendOrSelect(n,".gauge-delta-number"),{useBBox:!0}),C=y(r,"gauge","deltaArrow","enabled"),x=m.selectAll("svg.gauge-delta-arrow").data(null!==i&&C?[i]:[]);x.enter().append("svg").merge(x).attr("class","gauge-delta-arrow").attr("x",-u(a)-v/2).attr("y",-u(a)/2-.35*l(a)).attr("width",u(a)).attr("height",u(a)).attr("viewBox","0 0 16 16").each(function(){const b=L(this);I.appendOrSelect(b,"rect.gauge-delta-arrow-backdrop").attr("width","16").attr("height","16").attr("fill","none");const T=y(r,"gauge","status");I.appendOrSelect(b,"polygon.gauge-delta-arrow").attr("class",null!==T?`gauge-delta-arrow status--${T}`:"").attr("points",e.getArrow(i))}),x.exit().remove(),_.exit().remove()}else{const a=n.select("g.gauge-delta");a.empty()||a.remove()}}getInnerRadius(){return this.computeRadius()-y(this.getOptions(),"gauge","arcWidth")}addEventListeners(){const e=this;this.parent.selectAll("path.arc-foreground").on("mouseover",function(n,r){e.services.events.dispatchEvent(O.Gauge.ARC_MOUSEOVER,{event:n,element:L(this),datum:r})}).on("mousemove",function(n,r){const i=L(this);e.services.events.dispatchEvent(O.Gauge.ARC_MOUSEMOVE,{event:n,element:i,datum:r})}).on("click",function(n,r){e.services.events.dispatchEvent(O.Gauge.ARC_CLICK,{event:n,element:L(this),datum:r})}).on("mouseout",function(n,r){const i=L(this);e.services.events.dispatchEvent(O.Gauge.ARC_MOUSEOUT,{event:n,element:i,datum:r})})}computeRadius(){const e=this.getOptions(),n=y(e,"gauge","type"),{width:r,height:i}=I.getSVGElementSize(this.parent,{useAttrs:!0});return n===Vn.SEMI?Math.min(r/2,i):Math.min(r/2,i/2)}}class yv extends zh{constructor(){super(...arguments),this.type="grouped-bar",this.renderType=re.SVG,this.padding=5,this.defaultStepFactor=70,this.handleLegendOnHover=e=>{const{hoveredElement:n}=e.detail,{groupMapsTo:r}=this.getOptions().data;this.parent.selectAll("path.bar").transition("legend-hover-bar").call(i=>this.services.transitions.setupTransition({transition:i,name:"legend-hover-bar"})).attr("opacity",i=>i[r]!==n.datum().name?.3:1)},this.handleLegendMouseOut=()=>{this.parent.selectAll("path.bar").transition("legend-mouseout-bar").call(e=>this.services.transitions.setupTransition({transition:e,name:"legend-mouseout-bar"})).attr("opacity",1)}}init(){const e=this.services.events;e.addEventListener(O.Legend.ITEM_HOVER,this.handleLegendOnHover),e.addEventListener(O.Legend.ITEM_MOUSEOUT,this.handleLegendMouseOut)}render(e){const n=this.model.getDisplayData(this.configs.groups),r=this.getOptions(),{groupMapsTo:i}=r.data;this.setGroupScale();const o=this.getComponentContainer({ariaLabel:"grouped bar graphs",withinChartClip:!0}),s=Ui(n.map(u=>{const d=this.services.cartesianScales.getDomainIdentifier(u);return u[d]&&"function"==typeof u[d].toString?u[d].toString():u[d]})),a=o.selectAll("g.bars").data(s,u=>u);a.exit().attr("opacity",0).remove();const l=a.enter().append("g").classed("bars",!0).attr("role",de.GROUP).attr("data-name","bars").merge(a);l.transition().call(u=>this.services.transitions.setupTransition({transition:u,name:"bar-group-update-enter",animate:e})).attr("transform",u=>{const d=this.services.cartesianScales.getDomainValue(u)-this.getGroupWidth()/2;return this.services.cartesianScales.getOrientation()===je.VERTICAL?`translate(${d}, 0)`:`translate(0, ${d})`});const c=l.selectAll("path.bar").data(u=>this.getDataCorrespondingToLabel(u),u=>u[i]);c.exit().attr("opacity",0).remove(),c.enter().append("path").attr("opacity",0).merge(c).classed("bar",!0).transition().call(u=>this.services.transitions.setupTransition({transition:u,name:"bar-update-enter",animate:e})).attr("class",u=>this.model.getColorClassName({classNameTypes:[oe.FILL],dataGroupName:u[i],originalClassName:"bar"})).style("fill",u=>{const d=this.services.cartesianScales.getDomainIdentifier(u);return this.model.getFillColor(u[i],u[d],u)}).attr("d",u=>{const d=this.groupScale(u[i]),h=this.getBarWidth(),p=d,m=d+h,_=this.services.cartesianScales.getRangeAxisPosition({datum:u}),f=this.services.cartesianScales.getDomainLowerBound(_),v=this.services.cartesianScales.getValueThroughAxisPosition(_,f),C=this.services.cartesianScales.getRangeValue(u),x=this.services.cartesianScales.getDomainValue(u)-h/2,b=x+h;if(!this.isOutsideZoomedDomain(x,b))return at({x0:p,x1:m,y0:v,y1:C},this.services.cartesianScales.getOrientation())}).attr("opacity",1).attr("role",de.GRAPHICS_SYMBOL).attr("aria-roledescription","bar").attr("aria-label",u=>u.value),this.addEventListeners()}addEventListeners(){const e=this;this.parent.selectAll("path.bar").on("mouseover",function(n,r){const i=L(this);i.classed("hovered",!0),e.services.events.dispatchEvent(O.Bar.BAR_MOUSEOVER,{event:n,element:i,datum:r}),e.services.events.dispatchEvent(O.Tooltip.SHOW,{event:n,hoveredElement:i,data:[r]})}).on("mousemove",function(n,r){const i=L(this);e.services.events.dispatchEvent(O.Bar.BAR_MOUSEMOVE,{event:n,element:i,datum:r}),e.services.events.dispatchEvent(O.Tooltip.MOVE,{event:n})}).on("click",function(n,r){e.services.events.dispatchEvent(O.Bar.BAR_CLICK,{event:n,element:L(this),datum:r})}).on("mouseout",function(n,r){const i=L(this);i.classed("hovered",!1),e.services.events.dispatchEvent(O.Bar.BAR_MOUSEOUT,{event:n,element:i,datum:r}),e.services.events.dispatchEvent(O.Tooltip.HIDE,{hoveredElement:i})})}destroy(){this.parent.selectAll("path.bar").on("mouseover",null).on("mousemove",null).on("mouseout",null);const e=this.services.events;e.removeEventListener(O.Legend.ITEM_HOVER,this.handleLegendOnHover),e.removeEventListener(O.Legend.ITEM_MOUSEOUT,this.handleLegendMouseOut)}getDataCorrespondingToLabel(e){return this.model.getDisplayData(this.configs.groups).filter(n=>n[this.services.cartesianScales.getDomainIdentifier(n)].toString()===e)}getGroupWidth(){const e=this.model.getGroupedData(this.configs.groups),n=this.getTotalGroupPadding();return this.getBarWidth()*e.length+n}getDomainScaleStep(){const e=this.services.cartesianScales.getDomainScale(),n=this.model.getGroupedData(this.configs.groups);let r=this.defaultStepFactor;if("function"==typeof e.step)r=e.step();else if(n.length>0){const i=n.find(o=>{var s;return(null==(s=o.data)?void 0:s.length)>1});if(i){const o=this.services.cartesianScales.getDomainIdentifier(i.data[0]);r=Math.abs(e(i.data[1][o])-e(i.data[0][o]))}}return r}getTotalGroupPadding(){const e=this.model.getGroupedData(this.configs.groups);return 1===e.length?0:Math.min(5,this.getDomainScaleStep()/this.defaultStepFactor*5)*(e.length-1)}getBarWidth(){const e=this.getOptions(),n=y(e,"bars","width"),r=y(e,"bars","maxWidth");if(null!==n&&(null===r||n<=r))return n;const i=this.model.getGroupedData(this.configs.groups).length,o=this.getTotalGroupPadding();return Math.min(r,(this.getDomainScaleStep()-o)/i)}setGroupScale(){const e=this.model.getActiveDataGroupNames(this.configs.groups);this.groupScale=so().domain(e).rangeRound([0,this.getGroupWidth()])}}class qD extends fe{constructor(){super(...arguments),this.type="heatmap",this.renderType=re.SVG,this.matrix={},this.xBandwidth=0,this.yBandwidth=0,this.translationUnits={x:0,y:0},this.handleAxisOnHover=e=>{const{detail:n}=e,{datum:r}=n,i=this.model.getUniqueRanges(),o=this.model.getUniqueDomain(),s=this.services.cartesianScales.getDomainLabel(),a=this.services.cartesianScales.getRangeLabel(),l=this.services.cartesianScales.getMainXScale(),c=this.services.cartesianScales.getMainYScale();let u="",d=null,h=null,p=null;void 0!==this.matrix[r]?(u=s,i.forEach(m=>{if("number"==typeof this.matrix[r][m].value){const _=this.matrix[r][m].value;if(null===d)return d=_,h=_,void(p=_);d+=_,h=_<h?_:h,p=_>p?_:p}})):(u=a,o.forEach(m=>{if("number"==typeof this.matrix[m][r].value){const _=this.matrix[m][r].value;if(null===d)return d=_,h=_,void(p=_);d+=_,h=_<h?_:h,p=_>p?_:p}})),void 0!==l(r)?this.parent.select("g.multi-cell.column-highlight").classed("highlighter-hidden",!1).attr("transform",`translate(${l(r)}, ${Pn(c.range())})`):void 0!==c(r)&&this.parent.select("g.multi-cell.row-highlight").classed("highlighter-hidden",!1).attr("transform",`translate(${Pn(l.range())},${c(r)})`),this.services.events.dispatchEvent(O.Tooltip.SHOW,{event:n.event,hoveredElement:L(e.detail.element),items:[{label:u,value:r,bold:!0},{label:"Min",value:null!==h?h:"-"},{label:"Max",value:null!==p?p:"-"},{label:"Average",value:null!==d?d/o.length:"-"}]})},this.handleAxisMouseOut=e=>{this.parent.selectAll("g.multi-cell").classed("highlighter-hidden",!0),this.services.events.dispatchEvent(O.Tooltip.HIDE,{event:e})}}init(){const e=this.services.events;e.addEventListener(O.Axis.LABEL_MOUSEOVER,this.handleAxisOnHover),e.addEventListener(O.Axis.LABEL_MOUSEOUT,this.handleAxisMouseOut),e.addEventListener(O.Axis.LABEL_FOCUS,this.handleAxisOnHover),e.addEventListener(O.Axis.LABEL_BLUR,this.handleAxisMouseOut)}render(e=!0){const n=this.getComponentContainer({ariaLabel:"heatmap",withinChartClip:!0});n.lower();const{cartesianScales:r}=this.services;if(this.matrix=this.model.getMatrix(),n.html(""),y(this.getOptions(),"data","loading"))return;const i=r.getMainXScale(),o=r.getMainYScale(),s=r.getDomainIdentifier(),a=r.getRangeIdentifier(),l=this.model.getUniqueDomain(),c=this.model.getUniqueRanges(),u=this.model.getMatrixAsArray(),d=i.range(),h=o.range();this.xBandwidth=Math.abs((d[1]-d[0])/l.length),this.yBandwidth=Math.abs((h[1]-h[0])/c.length);const p=this.services.domUtils.generateElementIDString("heatmap-pattern-stripes");n.append("defs").append("pattern").attr("id",p).attr("width",3).attr("height",3).attr("patternUnits","userSpaceOnUse").attr("patternTransform","rotate(45)").append("rect").classed("pattern-fill",!0).attr("width",.5).attr("height",8);const m=n.selectAll().data(u).enter().append("g").attr("class",_=>`heat-${_.index}`).classed("cell",!0).attr("transform",_=>`translate(${i(_[s])}, ${o(_[a])})`).append("rect").attr("class",_=>this.model.getColorClassName({value:_.value,originalClassName:`heat-${_.index}`})).classed("heat",!0).classed("null-state",_=>-1===_.index||null===_.value).attr("width",this.xBandwidth).attr("height",this.yBandwidth).style("fill",_=>{const f=this.services.cartesianScales.getDomainIdentifier(_);return-1===_.index||null===_.value?`url(#${p})`:this.model.getFillColor(Number(_.value),_[f],_)}).attr("aria-label",_=>_.value);this.createOuterBox("g.cell-highlight",this.xBandwidth,this.yBandwidth),this.createOuterBox("g.multi-cell.column-highlight",this.xBandwidth,Math.abs(h[1]-h[0])),this.createOuterBox("g.multi-cell.row-highlight",Math.abs(d[1]-d[0]),this.yBandwidth),this.determineDividerStatus()&&(m.style("stroke-width","1px"),this.parent.select("g.cell-highlight").classed("cell-2",!0)),this.addEventListener()}createOuterBox(e,n,r){const i=I.appendOrSelect(this.parent,e).classed("shadows",!0).classed("highlighter-hidden",!0);I.appendOrSelect(i,"line.top").attr("x1",-1).attr("x2",n+1),I.appendOrSelect(i,"line.left").attr("x1",0).attr("y1",-1).attr("x2",0).attr("y2",r+1),I.appendOrSelect(i,"line.down").attr("x1",-1).attr("x2",n+1).attr("y1",r).attr("y2",r),I.appendOrSelect(i,"line.right").attr("x1",n).attr("x2",n).attr("y1",-1).attr("y2",r+1)}determineDividerStatus(){const e=y(this.getOptions(),"heatmap","divider","state");return e!==Qn.OFF&&(e===Qn.AUTO&&Lc.minCellDividerDimension<=this.xBandwidth&&Lc.minCellDividerDimension<=this.yBandwidth||e===Qn.ON)}addEventListener(){const e=this,{cartesianScales:n}=this.services,r=this.getOptions(),i=ve(r,"locale.translations.total")||ve(r,"tooltip.totalLabel")||"Total",o=n.getDomainIdentifier(),s=n.getRangeIdentifier(),a=n.getDomainLabel(),l=n.getRangeLabel();this.parent.selectAll("g.cell").on("mouseover",function(c,u){const d=L(this),h=d.select("rect.heat");if(!h.classed("null-state")){const p=no(d.attr("transform"));e.parent.select("g.cell-highlight").attr("transform",`translate(${p.x+e.translationUnits.x}, ${p.y+e.translationUnits.y})`).classed("highlighter-hidden",!1),e.services.events.dispatchEvent(O.Heatmap.HEATMAP_MOUSEOVER,{event:c,element:h,datum:u}),e.services.events.dispatchEvent(O.Tooltip.SHOW,{event:c,items:[{label:a,value:u[o]},{label:l,value:u[s]},{label:i,value:u.value,color:h.style("fill")}]})}}).on("mousemove",function(c,u){e.services.events.dispatchEvent(O.Heatmap.HEATMAP_MOUSEMOVE,{event:c,element:L(this),datum:u}),e.services.events.dispatchEvent(O.Tooltip.MOVE,{event:c})}).on("click",function(c,u){e.services.events.dispatchEvent(O.Heatmap.HEATMAP_CLICK,{event:c,element:L(this),datum:u})}).on("mouseout",function(c,u){const d=L(this).select("rect.heat"),h=d.classed("null-state");e.parent.select("g.cell-highlight").classed("highlighter-hidden",!0),h||(e.services.events.dispatchEvent(O.Heatmap.HEATMAP_MOUSEOUT,{event:c,element:d,datum:u}),e.services.events.dispatchEvent(O.Tooltip.HIDE,{event:c,hoveredElement:d}))})}destroy(){this.parent.selectAll("rect.heat").on("mouseover",null).on("mousemove",null).on("click",null).on("mouseout",null);const e=this.services.events;e.removeEventListener(O.Legend.ITEM_HOVER,this.handleAxisOnHover),e.removeEventListener(O.Legend.ITEM_MOUSEOUT,this.handleAxisMouseOut)}}class YD extends fe{constructor(){super(...arguments),this.type="histogram",this.renderType=re.SVG,this.handleLegendOnHover=e=>{const{hoveredElement:n}=e.detail,r=this.getOptions(),{groupMapsTo:i}=r.data;this.parent.selectAll("path.bar").transition("legend-hover-bar").call(o=>this.services.transitions.setupTransition({transition:o,name:"legend-hover-bar"})).attr("opacity",o=>o[i]!==n.datum().name?.3:1)},this.handleLegendMouseOut=()=>{this.parent.selectAll("path.bar").transition("legend-mouseout-bar").call(e=>this.services.transitions.setupTransition({transition:e,name:"legend-mouseout-bar"})).attr("opacity",1)}}init(){const e=this.services.events;e.addEventListener(O.Legend.ITEM_HOVER,this.handleLegendOnHover),e.addEventListener(O.Legend.ITEM_MOUSEOUT,this.handleLegendMouseOut)}render(e){const n=this.getComponentContainer({ariaLabel:"histogram bars"}),r=this.model.getOptions(),{groupIdentifier:i}=r,{groupMapsTo:o}=r.data,s=this.model.getBinnedStackedData(),a=this.services.cartesianScales.getMainXScale(),l=n.selectAll("g.bars").data(s,u=>ve(u,`0.${o}`));l.exit().attr("opacity",0).remove(),l.enter().append("g").classed("bars",!0).attr("role",de.GROUP);const c=n.selectAll("g.bars").selectAll("path.bar").data(u=>u);c.exit().remove(),c.enter().append("path").merge(c).classed("bar",!0).attr(i,(u,d)=>d).transition().call(u=>this.services.transitions.setupTransition({transition:u,name:"histogram-bar-update-enter",animate:e})).attr("class",u=>this.model.getColorClassName({classNameTypes:[oe.FILL],dataGroupName:u[o],originalClassName:"bar"})).style("fill",u=>this.model.getFillColor(u[o],null,u)).attr("d",u=>{const d=ve(u,"data");if(!d)return;const h=a(d.x1)-a(d.x0)-1,p=this.services.cartesianScales.getDomainValue(d.x0),m=p+h,_=this.services.cartesianScales.getRangeValue(u[0]);let f=this.services.cartesianScales.getRangeValue(u[1]);return Math.abs(f-_)>0&&Math.abs(f-_)>r.bars.dividerSize&&(this.services.cartesianScales.getOrientation()===je.VERTICAL?f+=1:f-=1),at({x0:p,x1:m,y0:_,y1:f},this.services.cartesianScales.getOrientation())}).attr("opacity",1).attr("role",de.GRAPHICS_SYMBOL).attr("aria-roledescription","bar").attr("aria-label",u=>y(u,"data",u[o])),this.addEventListeners()}addEventListeners(){const e=this.model.getOptions(),{groupMapsTo:n}=e.data,{code:r,number:i}=y(e,"locale"),o=this;this.parent.selectAll("path.bar").on("mouseover",function(s,a){const l=L(this);l.classed("hovered",!0);const c=i(parseFloat(ve(a,"data.x0")),r),u=i(parseFloat(ve(a,"data.x1")),r),d=o.services.cartesianScales.getRangeAxisPosition(),h=o.services.cartesianScales.getScaleLabel(d);o.services.events.dispatchEvent(O.Tooltip.SHOW,{event:s,hoveredElement:l,items:[{label:ve(e,"bins.rangeLabel")||"Range",value:`${c} \u2013 ${u}`},{label:e.tooltip.groupLabel||"Group",value:a[n],class:o.model.getColorClassName({classNameTypes:[oe.TOOLTIP],dataGroupName:a[n]})},{label:h,value:ve(a,`data.${a[n]}`)}]})}).on("mousemove",function(s){o.services.events.dispatchEvent(O.Tooltip.MOVE,{event:s})}).on("mouseout",function(){L(this).classed("hovered",!1),o.services.events.dispatchEvent(O.Tooltip.HIDE)})}destroy(){this.parent.selectAll("path.bar").on("mouseover",null).on("mousemove",null).on("mouseout",null);const e=this.services.events;e.removeEventListener(O.Legend.ITEM_HOVER,this.handleLegendOnHover),e.removeEventListener(O.Legend.ITEM_MOUSEOUT,this.handleLegendMouseOut)}}class XD extends pn{constructor(){super(...arguments),this.type="lollipop",this.renderType=re.SVG,this.handleScatterOnHover=e=>{const n=e.detail,r=this.getOptions(),{groupMapsTo:i}=r.data;this.parent.selectAll("line.line").attr("stroke-width",o=>o[i]!==n.datum[i]?an.weight.unselected:an.weight.selected)},this.handleScatterOnMouseOut=()=>{this.parent.selectAll("line.line").attr("stroke-width",an.weight.unselected)},this.handleLegendOnHover=e=>{const{hoveredElement:n}=e.detail,r=this.getOptions(),{groupMapsTo:i}=r.data;this.parent.selectAll("line.line").transition("legend-hover-line").call(o=>this.services.transitions.setupTransition({transition:o,name:"legend-hover-line"})).attr("opacity",o=>o[i]!==n.datum().name?an.opacity.unselected:an.opacity.selected)},this.handleLegendMouseOut=()=>{this.parent.selectAll("line.line").transition("legend-mouseout-line").call(e=>this.services.transitions.setupTransition({transition:e,name:"legend-mouseout-line"})).attr("opacity",an.opacity.selected)}}init(){const{events:e}=this.services;e.addEventListener(O.Legend.ITEM_HOVER,this.handleLegendOnHover),e.addEventListener(O.Legend.ITEM_MOUSEOUT,this.handleLegendMouseOut)}render(e){const n=this.getComponentContainer({ariaLabel:"lines",withinChartClip:!0}),r=this.model.getOptions(),{groupMapsTo:i}=r.data,{cartesianScales:o}=this.services,s=o.getMainXScale(),a=o.getMainYScale(),l=o.getDomainIdentifier(),d=o.getOrientation(),[h,p]=bn(f=>o.getDomainValue(f),f=>o.getRangeValue(f),d),m=n.selectAll("line.line").data(this.getScatterData(),f=>`${f[i]}-${f[l]}`);m.exit().attr("opacity",0).remove();const _=m.enter().append("line").attr("opacity",0).merge(m).classed("line",!0).attr("class",f=>this.model.getColorClassName({classNameTypes:[oe.STROKE],dataGroupName:f[i],originalClassName:"line"})).transition().call(f=>this.services.transitions.setupTransition({transition:f,name:"lollipop-line-update-enter",animate:e})).style("stroke",f=>this.model.getFillColor(f[i],f[l],f)).attr("opacity",1);d===je.HORIZONTAL?_.attr("y1",p).attr("y2",p).attr("x1",s.range()[0]).attr("x2",f=>h(f)-r.points.radius):_.attr("x1",h).attr("x2",h).attr("y1",a.range()[0]).attr("y2",f=>p(f)+r.points.radius),this.addScatterPointEventListeners()}addScatterPointEventListeners(){this.services.events.addEventListener(O.Scatter.SCATTER_MOUSEOVER,this.handleScatterOnHover),this.services.events.addEventListener(O.Scatter.SCATTER_MOUSEOUT,this.handleScatterOnMouseOut)}destroy(){const e=this.services.events;e.removeEventListener(O.Legend.ITEM_HOVER,this.handleLegendOnHover),e.removeEventListener(O.Legend.ITEM_MOUSEOUT,this.handleLegendMouseOut),e.removeEventListener(O.Scatter.SCATTER_MOUSEOVER,this.handleScatterOnHover),e.removeEventListener(O.Scatter.SCATTER_MOUSEOUT,this.handleScatterOnMouseOut)}}class ZD extends fe{constructor(){super(...arguments),this.type="meter",this.renderType=re.SVG}getStackedBounds(e,n){let r=0;return e.map((i,o)=>0!==o?(r+=n(i.value),{...i,width:Math.abs(n(i.value)-Ye.dividerWidth),x:r-n(i.value)}):(r=n(i.value),{...i,width:Math.abs(n(i.value)-Ye.dividerWidth),x:0}))}render(e=!0){const n=this,r=this.getComponentContainer({ariaLabel:"meter lines"}),i=this.getOptions(),o=y(i,"meter","proportional"),s=this.model.getDisplayData(),a=this.model.getStatus(),{width:l}=I.getSVGElementSize(r,{useAttrs:!0}),{groupMapsTo:c}=i.data;let u;u=null===y(i,"meter","proportional")?100:y(i,"meter","proportional","total")||this.model.getMaximumDomain(this.model.getDisplayData());const d=Yt().domain([0,u]).range([0,l]),h=this.getStackedBounds(s,d),p=y(i,"meter","height");I.appendOrSelect(r,"rect.container").attr("x",0).attr("y",0).attr("width",l).attr("height",p||(o?Ye.height.proportional:Ye.height.default)),I.appendOrSelect(r,"line.rangeIndicator").attr("x1",l).attr("x2",l).attr("y1",0).attr("y2",p||(o?Ye.height.proportional:Ye.height.default));const m=r.selectAll("rect.value").data(h),_=null==a||n.model.isUserProvidedColorScaleValid()||o?"value":`value status--${a}`;m.enter().append("rect").classed("value",!0).merge(m).attr("x",x=>x.x).attr("y",0).attr("height",()=>p||(o?Ye.height.proportional:Ye.height.default)).attr("class",x=>this.model.getColorClassName({classNameTypes:[oe.FILL],dataGroupName:x[c],originalClassName:_})).transition().call(x=>this.services.transitions.setupTransition({transition:x,name:"meter-bar-update",animate:e})).attr("width",x=>x.value>u?d(u):Math.max(x.width,2)).style("fill",x=>n.model.getFillColor(x[c],null,x)).attr("role",de.GRAPHICS_SYMBOL).attr("aria-roledescription","value").attr("aria-label",x=>x.value),m.exit().remove();const f=y(i,"meter","peak");let v=f;null!==f&&(f>u?v=u:f<0&&(v=0));const C=r.selectAll("line.peak").data(null==v?[]:[v]);C.enter().append("line").classed("peak",!0).merge(C).attr("y1",0).attr("y2",()=>p||(o?Ye.height.proportional:Ye.height.default)).transition().call(x=>this.services.transitions.setupTransition({transition:x,name:"peak-line-update",animate:e})).attr("x1",x=>d(x)).attr("x2",x=>d(x)).attr("role",de.GRAPHICS_SYMBOL).attr("aria-roledescription","peak").attr("aria-label",x=>x),C.exit().remove(),this.services.domUtils.setSVGMaxHeight(),this.addEventListeners()}addEventListeners(){const e=this.getOptions(),{groupMapsTo:n}=e.data,r=this,i=y(e,"meter","proportional");this.parent.selectAll("rect.value").on("mouseover",function(o,s){const a=L(this);r.services.events.dispatchEvent(O.Meter.METER_MOUSEOVER,{event:o,element:a,datum:s}),i&&(a.classed("hovered",!0),r.services.events.dispatchEvent(O.Tooltip.SHOW,{event:o,hoveredElement:a,items:[{label:s[n],value:s.value}]}))}).on("mousemove",function(o,s){const a=L(this);r.services.events.dispatchEvent(O.Meter.METER_MOUSEMOVE,{event:o,element:a,datum:s}),i&&r.services.events.dispatchEvent(O.Tooltip.MOVE,{event:o})}).on("click",function(o,s){r.services.events.dispatchEvent(O.Meter.METER_CLICK,{event:o,element:L(this),datum:s})}).on("mouseout",function(o,s){const a=L(this);r.services.events.dispatchEvent(O.Meter.METER_MOUSEOUT,{event:o,element:a,datum:s}),i&&(a.classed("hovered",!1),r.services.events.dispatchEvent(O.Tooltip.HIDE,{hoveredElement:a}))})}destroy(){this.parent.selectAll("rect.value").on("mouseover",null).on("mousemove",null).on("mouseout",null).on("click",null)}}class QD extends fe{constructor(){super(...arguments),this.type="radar",this.renderType=re.SVG,this.getLabelDimensions=e=>{const n=I.appendOrSelect(this.getComponentContainer(),"g.tmp-tick"),r=I.appendOrSelect(n,"text").text(e),{width:i,height:o}=I.getSVGElementSize(r.node(),{useBBox:!0});return n.remove(),{width:i,height:o}},this.normalizeFlatData=e=>{const n=this.getOptions(),{angle:r,value:i}=y(n,"radar","axes"),o=y(n,"data","groupMapsTo"),s=$A(this.uniqueKeys.map(a=>this.uniqueGroups.map(l=>({[r]:a,[o]:l,[i]:null}))));return se(s,e)},this.normalizeGroupedData=e=>{const n=this.getOptions(),{angle:r,value:i}=y(n,"radar","axes"),o=y(n,"data","groupMapsTo");return e.map(({name:s,data:a})=>{const l=this.uniqueKeys.map(c=>({[o]:s,[r]:c,[i]:null}));return{name:s,data:se(l,a)}})},this.handleLegendOnHover=e=>{const{hoveredElement:n}=e.detail;this.parent.selectAll("g.blobs path").transition("legend-hover-blob").call(r=>this.services.transitions.setupTransition({transition:r,name:"legend-hover-blob"})).style("fill-opacity",r=>r.name!==n.datum().name?Un.opacity.unselected:Un.opacity.selected).style("stroke-opacity",r=>r.name!==n.datum().name?Un.opacity.unselected:1)},this.handleLegendMouseOut=()=>{this.parent.selectAll("g.blobs path").transition("legend-mouseout-blob").call(e=>this.services.transitions.setupTransition({transition:e,name:"legend-mouseout-blob"})).style("fill-opacity",Un.opacity.selected).style("stroke-opacity",1)}}init(){const{events:e}=this.services;e.addEventListener(O.Legend.ITEM_HOVER,this.handleLegendOnHover),e.addEventListener(O.Legend.ITEM_MOUSEOUT,this.handleLegendMouseOut)}render(e=!0){const n=this.getComponentContainer({ariaLabel:"radar graph"}),{width:r,height:i}=I.getSVGElementSize(n,{useAttrs:!0}),o=this.model.getData(),s=this.model.getGroupedData(),a=this.getOptions(),l=y(a,"data","groupMapsTo"),c=y(a,"radar","axes","value"),{angle:u,value:d}=y(a,"radar","axes"),{xLabelPadding:h,yLabelPadding:p,yTicksNumber:m,minRange:_,xAxisRectHeight:f}=Un;this.uniqueKeys=Array.from(new Set(o.map(E=>E[u]))),this.uniqueGroups=Array.from(new Set(o.map(E=>E[l]))),this.fullDataNormalized=this.normalizeFlatData(o),this.groupedDataNormalized=this.normalizeGroupedData(s);const v=2*(this.getLabelDimensions(this.uniqueKeys[0]).height+p),C=(Math.min(r,i)-v)/2;if(C<=0)return;const x=so().domain(this.fullDataNormalized.map(E=>E[u])).range([0,2*Math.PI].map(E=>E-Math.PI/2)),b=Pn(this.fullDataNormalized.map(E=>E[d])),T=Yt().domain([b>=0?0:b,sr(this.fullDataNormalized.map(E=>E[d]))]).range([_,C]).nice(m),S=T.ticks(m),M=(E,w,B)=>this.model.getFillColor(E,w,B),D=xR().angle(E=>x(E[u])+Math.PI/2).radius(E=>T(E[d])).curve(jg),k=this.uniqueKeys.map(E=>{const w=this.getLabelDimensions(E).width,B=function q2(t,e){return e*Math.sin(t-Math.PI/2)}(x(E),C);return w+B}),H={x:sr(k)+h,y:i/2},F=I.appendOrSelect(n,"g.y-axes").attr("role",de.GROUP).selectAll("path").data(S,E=>E),P=E=>this.uniqueKeys.map(w=>({[u]:w,[d]:E}));F.join(E=>E.append("path").attr("opacity",0).attr("transform",`translate(${H.x}, ${H.y})`).attr("fill","none").call(w=>w.transition().call(B=>this.services.transitions.setupTransition({transition:B,name:"radar_y_axes_enter",animate:e})).attr("opacity",1).attr("d",B=>D(P(B)))),E=>E.call(w=>w.transition().call(B=>this.services.transitions.setupTransition({transition:B,name:"radar_y_axes_update",animate:e})).attr("opacity",1).attr("transform",`translate(${H.x}, ${H.y})`).attr("d",B=>D(P(B)))),E=>E.call(w=>w.transition().call(B=>this.services.transitions.setupTransition({transition:B,name:"radar_y_axes_exit",animate:e})).attr("d",B=>D(P(B))).attr("opacity",0).remove())),I.appendOrSelect(n,"g.x-axes").attr("role",de.GROUP).selectAll("line").data(this.uniqueKeys,E=>E).join(E=>E.append("line").attr("opacity",0).attr("class",w=>`x-axis-${ni(w)}`).attr("stroke-dasharray","0").attr("x1",w=>We(x(w),0,H).x).attr("y1",w=>We(x(w),0,H).y).attr("x2",w=>We(x(w),0,H).x).attr("y2",w=>We(x(w),0,H).y).call(w=>w.transition().call(B=>this.services.transitions.setupTransition({transition:B,name:"radar_x_axes_enter",animate:e})).attr("opacity",1).attr("x1",B=>We(x(B),T.range()[0],H).x).attr("y1",B=>We(x(B),T.range()[0],H).y).attr("x2",B=>We(x(B),T.range()[1],H).x).attr("y2",B=>We(x(B),T.range()[1],H).y)),E=>E.call(w=>w.transition().call(B=>this.services.transitions.setupTransition({transition:B,name:"radar_x_axes_update",animate:e})).attr("opacity",1).attr("x1",B=>We(x(B),T.range()[0],H).x).attr("y1",B=>We(x(B),T.range()[0],H).y).attr("x2",B=>We(x(B),T.range()[1],H).x).attr("y2",B=>We(x(B),T.range()[1],H).y)),E=>E.call(w=>w.transition().call(B=>this.services.transitions.setupTransition({transition:B,name:"radar_x_axes_exit",animate:e})).attr("opacity",0).remove())),I.appendOrSelect(n,"g.x-labels").attr("role",de.GROUP).selectAll("text").data(this.uniqueKeys).join(E=>E.append("text").text(w=>w).attr("opacity",0).attr("x",w=>We(x(w),T.range()[1]+h,H).x).attr("y",w=>We(x(w),T.range()[1]+h,H).y).style("text-anchor",w=>of(x(w)).textAnchor).style("dominant-baseline",w=>of(x(w)).dominantBaseline).call(w=>w.transition().call(B=>this.services.transitions.setupTransition({transition:B,name:"radar_x_labels_enter",animate:e})).attr("opacity",1)),E=>E.call(w=>w.transition().call(B=>this.services.transitions.setupTransition({transition:B,name:"radar_x_labels_update",animate:e})).attr("opacity",1).attr("x",B=>We(x(B),T.range()[1]+h,H).x).attr("y",B=>We(x(B),T.range()[1]+h,H).y).end().finally(()=>{const B=y(a,"radar","alignment"),R=this.getAlignmentXOffset(B,n,this.getParent());n.attr("x",R)})),E=>E.call(w=>w.transition().call(B=>this.services.transitions.setupTransition({transition:B,name:"radar_x_labels_exit",animate:e})).attr("opacity",0).remove())),I.appendOrSelect(n,"g.blobs").attr("role",de.GROUP).selectAll("path").data(this.groupedDataNormalized,E=>E.name).join(E=>E.append("path").attr("class",w=>this.model.getColorClassName({classNameTypes:[oe.FILL,oe.STROKE],dataGroupName:w.name,originalClassName:"blob"})).attr("role",de.GRAPHICS_SYMBOL).attr("aria-label",w=>w.name).attr("opacity",0).attr("transform",e?()=>`translate(${H.x}, ${H.y}) scale(${1+.35*Math.random()})`:`translate(${H.x}, ${H.y})`).style("fill",w=>M(w.name,null,w.data)).style("fill-opacity",Un.opacity.selected).style("stroke",w=>M(w.name,null,w.data)).call(w=>{const B=w.transition().call(R=>this.services.transitions.setupTransition({transition:R,name:"radar_blobs_enter",animate:e}));e&&B.delay(()=>30*Math.random()).attr("transform",`translate(${H.x}, ${H.y})`),B.attr("opacity",1).attr("d",R=>D(R.data))}),E=>(E.attr("class",w=>this.model.getColorClassName({classNameTypes:[oe.FILL,oe.STROKE],dataGroupName:w.name,originalClassName:"blob"})).style("fill",w=>M(w.name,null,w.data)).style("stroke",w=>M(w.name,null,w.data)),E.call(w=>w.transition().call(B=>this.services.transitions.setupTransition({transition:B,name:"radar_blobs_update",animate:e})).attr("opacity",1).attr("transform",`translate(${H.x}, ${H.y})`).attr("d",B=>D(B.data))),E),E=>E.call(w=>{const B=w.transition().call(R=>this.services.transitions.setupTransition({transition:R,name:"radar_blobs_exit",animate:e}));e&&B.delay(()=>30*Math.random()).attr("transform",()=>`translate(${H.x}, ${H.y}) scale(${1+.35*Math.random()})`),B.attr("opacity",0).remove()})),I.appendOrSelect(n,"g.dots").attr("role",de.GROUP).selectAll("circle").data(this.fullDataNormalized.filter(E=>null!==y(E,d))).join(E=>E.append("circle").attr("role",de.GRAPHICS_SYMBOL).attr("aria-label",w=>w[c]),E=>E,E=>E.remove()).attr("class",E=>this.model.getColorClassName({classNameTypes:[oe.FILL],dataGroupName:E[l],originalClassName:ni(E[u])})).attr("cx",E=>We(x(E[u]),T(E[d]),H).x).attr("cy",E=>We(x(E[u]),T(E[d]),H).y).attr("r",0).attr("opacity",0).style("fill",E=>M(E[l])),I.appendOrSelect(n,"g.x-axes-rect").attr("role",de.GROUP).selectAll("rect").data(this.uniqueKeys).join(E=>E.append("rect"),E=>E,E=>E.remove()).attr("x",H.x).attr("y",H.y-f/2).attr("width",T.range()[1]).attr("height",f).style("fill","red").style("fill-opacity",0).attr("transform",E=>`rotate(${sf(x(E))}, ${H.x}, ${H.y})`);const{code:N,number:V}=y(a,"locale");I.appendOrSelect(n,"g.y-labels").attr("role",de.GROUP).selectAll("text").data(zt(S)).join(E=>E.append("text").attr("opacity",0).text(w=>V(w,N)).attr("x",w=>We(-Math.PI/2,T(w),H).x+p).attr("y",w=>We(-Math.PI/2,T(w),H).y).style("text-anchor","start").style("dominant-baseline","middle").call(w=>w.transition().call(B=>this.services.transitions.setupTransition({transition:B,name:"radar_y_labels_enter",animate:e})).attr("opacity",1)),E=>E.call(w=>w.transition().call(B=>this.services.transitions.setupTransition({transition:B,name:"radar_y_labels_update",animate:e})).text(B=>B).attr("opacity",1).attr("x",B=>We(-Math.PI/2,T(B),H).x+p).attr("y",B=>We(-Math.PI/2,T(B),H).y)),E=>E.call(w=>w.transition().call(B=>this.services.transitions.setupTransition({transition:B,name:"radar_y_labels_exit",animate:e})).attr("opacity",0).remove())),this.addEventListeners()}getAlignmentXOffset(e,n,r){const i=I.getSVGElementSize(n,{useBBox:!0}),{width:o}=I.getSVGElementSize(r,{useAttrs:!0});let s=0;return e===$e.CENTER?s=Math.floor((o-i.width)/2):e===$e.RIGHT&&(s=o-i.width),s}destroy(){this.parent.selectAll(".x-axes-rect > rect").on("mouseover",null).on("mousemove",null).on("mouseout",null);const e=this.services.events;e.removeEventListener(O.Legend.ITEM_HOVER,this.handleLegendOnHover),e.removeEventListener(O.Legend.ITEM_MOUSEOUT,this.handleLegendMouseOut)}addEventListeners(){const e=this,{axes:{angle:n}}=y(this.getOptions(),"radar");this.parent.selectAll(".x-axes-rect > rect").on("mouseover",function(r,i){const o=L(this);e.services.events.dispatchEvent(O.Radar.X_AXIS_MOUSEOVER,{event:r,element:o,datum:i});const s=e.parent.select(`.x-axes .x-axis-${ni(i)}`),a=e.parent.selectAll(`.dots circle.${ni(i)}`),l=e.model.getActiveDataGroupNames(),c=e.getOptions(),{groupMapsTo:u}=c.data,d=y(c,"radar","axes","value");s.classed("hovered",!0).attr("stroke-dasharray","4 4"),a.classed("hovered",!0).attr("opacity",p=>-1!==l.indexOf(p[u])?1:0).attr("r",Un.dotsRadius);const h=e.fullDataNormalized.filter(p=>p[n]===i&&-1!==l.indexOf(p[u]));e.services.events.dispatchEvent(O.Tooltip.SHOW,{event:r,hoveredElement:o,items:h.filter(p=>"number"==typeof p[d]).map(p=>({label:p[u],value:p[d],color:e.model.getFillColor(p[u],null,p),class:e.model.getColorClassName({classNameTypes:[oe.TOOLTIP],dataGroupName:p[u]})}))})}).on("mousemove",function(r,i){const o=L(this);e.services.events.dispatchEvent(O.Radar.X_AXIS_MOUSEMOVE,{event:r,element:o,datum:i}),e.services.events.dispatchEvent(O.Tooltip.MOVE,{event:r})}).on("click",function(r,i){e.services.events.dispatchEvent(O.Radar.X_AXIS_CLICK,{event:r,element:L(this),datum:i})}).on("mouseout",function(r,i){const o=L(this),s=e.parent.select(`.x-axes .x-axis-${ni(i)}`),a=e.parent.selectAll(`.dots circle.${ni(i)}`);s.classed("hovered",!1).attr("stroke-dasharray","0"),a.classed("hovered",!1).attr("opacity",0).attr("r",0),e.services.events.dispatchEvent(O.Radar.X_AXIS_MOUSEOUT,{event:r,element:o,datum:i}),e.services.events.dispatchEvent(O.Tooltip.HIDE)})}}class Cv extends zh{constructor(){super(...arguments),this.type="simple-bar",this.renderType=re.SVG,this.handleLegendOnHover=e=>{const{hoveredElement:n}=e.detail,{groupMapsTo:r}=this.getOptions().data;this.parent.selectAll("path.bar").transition("legend-hover-simple-bar").call(i=>this.services.transitions.setupTransition({transition:i,name:"legend-hover-simple-bar"})).attr("opacity",i=>i[r]!==n.datum().name?.3:1)},this.handleLegendMouseOut=()=>{this.parent.selectAll("path.bar").transition("legend-mouseout-simple-bar").call(e=>this.services.transitions.setupTransition({transition:e,name:"legend-mouseout-simple-bar"})).attr("opacity",1)}}init(){const e=this.services.events;e.addEventListener(O.Legend.ITEM_HOVER,this.handleLegendOnHover),e.addEventListener(O.Legend.ITEM_MOUSEOUT,this.handleLegendMouseOut)}render(e){const n=this.getOptions(),{groupMapsTo:r}=n.data,i=this.getComponentContainer({ariaLabel:"bar graphs",withinChartClip:!0}),o=this.model.getDisplayData(this.configs.groups),s=this.services.cartesianScales.getOrientation(),a=i.selectAll("path.bar").data(o,l=>l[r]);a.exit().attr("opacity",0).remove(),a.enter().append("path").attr("opacity",0).merge(a).classed("bar",!0).attr("width",this.getBarWidth.bind(this)).transition().call(l=>this.services.transitions.setupTransition({transition:l,name:"bar-update-enter",animate:e})).attr("class",l=>this.model.getColorClassName({classNameTypes:[oe.FILL],dataGroupName:l[r],originalClassName:"bar"})).style("fill",l=>{const c=this.services.cartesianScales.getDomainIdentifier(l);return this.model.getFillColor(l[r],l[c],l)}).attr("d",l=>{const c=this.services.cartesianScales.getRangeIdentifier(),u=this.getBarWidth(),d=l[c],h=this.services.cartesianScales.getDomainValue(l)-u/2,p=h+u;let m,_;if(Array.isArray(d)&&2===d.length)m=this.services.cartesianScales.getRangeValue(d[0]),_=this.services.cartesianScales.getRangeValue(d[1]);else{const v=this.services.cartesianScales.getRangeScale().domain()[0];m=this.services.cartesianScales.getRangeValue(Math.max(0,v)),_=this.services.cartesianScales.getRangeValue(l)}const f=Math.abs(_-m);if(0!==f&&f<2&&(_=d>0&&s===je.VERTICAL||d<0&&s===je.HORIZONTAL?m-2:m+2),!this.isOutsideZoomedDomain(h,p))return at({x0:h,x1:p,y0:m,y1:_},s)}).attr("opacity",1).attr("role",de.GRAPHICS_SYMBOL).attr("aria-roledescription","bar").attr("aria-label",l=>l.value),this.addEventListeners()}addEventListeners(){const e=this;this.parent.selectAll("path.bar").on("mouseover",function(n,r){const i=L(this);i.classed("hovered",!0),e.services.events.dispatchEvent(O.Bar.BAR_MOUSEOVER,{event:n,element:i,datum:r}),e.services.events.dispatchEvent(O.Tooltip.SHOW,{event:n,hoveredElement:i,data:[r]})}).on("mousemove",function(n,r){e.services.events.dispatchEvent(O.Bar.BAR_MOUSEMOVE,{event:n,element:L(this),datum:r}),e.services.events.dispatchEvent(O.Tooltip.MOVE,{event:n})}).on("click",function(n,r){e.services.events.dispatchEvent(O.Bar.BAR_CLICK,{event:n,element:L(this),datum:r})}).on("mouseout",function(n,r){const i=L(this);i.classed("hovered",!1),e.services.events.dispatchEvent(O.Bar.BAR_MOUSEOUT,{event:n,element:i,datum:r}),e.services.events.dispatchEvent(O.Tooltip.HIDE,{hoveredElement:i})})}destroy(){this.parent.selectAll("path.bar").on("mouseover",null).on("mousemove",null).on("mouseout",null);const e=this.services.events;e.removeEventListener(O.Legend.ITEM_HOVER,this.handleLegendOnHover),e.removeEventListener(O.Legend.ITEM_MOUSEOUT,this.handleLegendMouseOut)}}class JD extends dt{constructor(){super(...arguments),this.type="skeleton-lines"}render(e=!0){const n=y(this.getOptions(),"data","loading"),r=!(y(this.getOptions(),"grid","x","enabled")||y(this.getOptions(),"grid","y","enabled")||y(this.getOptions(),"axes","bottom","visible")||y(this.getOptions(),"axes","left","visible"));n&&!r?super.renderGridSkeleton(n):n&&r?this.renderSparklineSkeleton(n):this.removeSkeleton()}renderSparklineSkeleton(e){this.setScales(),this.drawBackdrop(e),this.drawSparkline(e),this.updateBackdropStyle(),e&&this.setShimmerEffect("shimmer-lines")}drawSparkline(e){const n=this.backdrop.attr("width"),i=I.appendOrSelect(this.backdrop,"g.y.skeleton"),o=i.selectAll("line").data([100]);o.enter().append("line").merge(o).attr("x1",0).attr("x2",n).attr("y1",s=>s).attr("y2",s=>s),i.selectAll("line").classed("shimmer-effect-lines",e).classed("empty-state-lines",!e).style("stroke",e?`url(#${this.services.domUtils.generateElementIDString("shimmer-lines")})`:null)}updateBackdropStyle(){const e=this.parent;this.backdrop=I.appendOrSelect(e,"svg.chart-skeleton.DAII").attr("role","presentation"),I.appendOrSelect(this.backdrop,"rect.chart-skeleton-backdrop").classed("shimmer-effect-lines",!1).classed("shimmer-effect-sparkline",!0).style("stroke",null)}}class Tv extends fe{constructor(){super(...arguments),this.type="area-stacked",this.renderType=re.SVG,this.handleLegendOnHover=e=>{const{hoveredElement:n}=e.detail,r=this.getOptions(),{groupMapsTo:i}=r.data;this.parent.selectAll("path.area").transition("legend-hover-area").call(o=>this.services.transitions.setupTransition({transition:o,name:"legend-hover-area"})).attr("opacity",o=>y(o,0,i)!==n.datum().name?sn.opacity.unselected:sn.opacity.selected)},this.handleLegendMouseOut=()=>{this.parent.selectAll("path.area").transition("legend-mouseout-area").call(e=>this.services.transitions.setupTransition({transition:e,name:"legend-mouseout-area"})).attr("opacity",sn.opacity.selected)}}init(){const e=this.services.events;e.addEventListener(O.Legend.ITEM_HOVER,this.handleLegendOnHover),e.addEventListener(O.Legend.ITEM_MOUSEOUT,this.handleLegendMouseOut)}render(e=!0){const n=this.getComponentContainer({ariaLabel:"stacked area graphs",withinChartClip:!0}),r=this,i=this.getOptions(),{groupMapsTo:o}=i.data,s=Object.keys(i.axes).some(p=>i.axes[p].percentage),a=this.model.getStackedData({percentage:s,groups:this.configs.groups}),l=y(a,0,0),c=this.services.cartesianScales.getDomainAxisPosition({datum:l}),u=this.services.cartesianScales.getRangeAxisPosition({datum:l}),d=this.services.cartesianScales.getScaleByPosition(u),h=n.selectAll("path.area").data(a,p=>y(p,0,o));this.areaGenerator=Mh().x(p=>this.services.cartesianScales.getValueThroughAxisPosition(c,p.data.sharedStackKey)).y0(p=>d(p[0])).y1(p=>d(p[1])).curve(this.services.curves.getD3Curve()),h.exit().attr("opacity",0).remove(),h.enter().append("path").attr("opacity",0).merge(h).data(a,p=>y(p,0,o)).attr("class","area").attr("class",p=>this.model.getColorClassName({classNameTypes:[oe.FILL],dataGroupName:y(p,0,o),originalClassName:"area"})).style("fill",p=>r.model.getFillColor(y(p,0,o),null,p)).attr("role",de.GRAPHICS_SYMBOL).attr("aria-roledescription","area").attr("aria-label",p=>y(p,0,o)).transition().call(p=>this.services.transitions.setupTransition({transition:p,name:"area-update-enter",animate:e})).attr("opacity",sn.opacity.selected).attr("d",this.areaGenerator)}}class xv extends zh{constructor(){super(...arguments),this.type="stacked-bar",this.renderType=re.SVG,this.handleLegendOnHover=e=>{const{hoveredElement:n}=e.detail,{groupMapsTo:r}=this.model.getOptions().data;this.parent.selectAll("path.bar").transition("legend-hover-bar").call(i=>this.services.transitions.setupTransition({transition:i,name:"legend-hover-bar"})).attr("opacity",i=>i[r]!==n.datum().name?.3:1)},this.handleLegendMouseOut=()=>{this.parent.selectAll("path.bar").transition("legend-mouseout-bar").call(e=>this.services.transitions.setupTransition({transition:e,name:"legend-mouseout-bar"})).attr("opacity",1)}}init(){const e=this.services.events;e.addEventListener(O.Legend.ITEM_HOVER,this.handleLegendOnHover),e.addEventListener(O.Legend.ITEM_MOUSEOUT,this.handleLegendMouseOut)}render(e){const n=this.getComponentContainer({ariaLabel:"stacked bar graphs",withinChartClip:!0}),r=this.getOptions(),{groupMapsTo:i}=r.data,o=this.model.getStackedData({groups:this.configs.groups,divergent:!0}),s=this.model.getActiveDataGroupNames(),a=n.selectAll("g.bars").data(o,c=>y(c,0,i));a.exit().attr("opacity",0).remove(),a.enter().append("g").classed("bars",!0).attr("role",de.GROUP).attr("data-name","bars");const l=n.selectAll("g.bars").selectAll("path.bar").data(c=>c,c=>c.data.sharedStackKey);l.exit().remove(),l.enter().append("path").merge(l).classed("bar",!0).transition().call(c=>this.services.transitions.setupTransition({transition:c,name:"bar-update-enter",animate:e})).attr("class",c=>this.model.getColorClassName({classNameTypes:[oe.FILL],dataGroupName:c[i],originalClassName:"bar"})).style("fill",c=>this.model.getFillColor(c[i],c.data.sharedStackKey,c.data)).attr("d",c=>{const u=c.data.sharedStackKey,d=this.getBarWidth(),h=this.services.cartesianScales.getDomainValue(u)-d/2,p=h+d,m=this.services.cartesianScales.getRangeValue(c[0]);let _=this.services.cartesianScales.getRangeValue(c[1]);if(!this.isOutsideZoomedDomain(h,p)){if(Math.abs(_-m)>0&&Math.abs(_-m)>r.bars.dividerSize){const f=c[0]<0&&c[1]<=0;f&&s.length>1?this.services.cartesianScales.getOrientation()===je.VERTICAL?_+=0===c[1]?2:1:_-=1:f||(this.services.cartesianScales.getOrientation()===je.VERTICAL?_+=1:_-=1)}return at({x0:h,x1:p,y0:m,y1:_},this.services.cartesianScales.getOrientation())}}).attr("opacity",1).attr("role",de.GRAPHICS_SYMBOL).attr("aria-roledescription","bar").attr("aria-label",c=>c[1]-c[0]),this.addEventListeners()}addEventListeners(){const e=this.getOptions(),{groupMapsTo:n}=e.data,r=this;this.parent.selectAll("path.bar").on("mouseover",function(i,o){const s=L(this);s.classed("hovered",!0),r.services.events.dispatchEvent(O.Bar.BAR_MOUSEOVER,{event:i,element:s,datum:o});let a=r.model.getDisplayData(r.configs.groups).find(l=>{const c=r.services.cartesianScales.getDomainIdentifier(l);return l[r.services.cartesianScales.getRangeIdentifier(l)]===o.data[o[n]]&&l[c].toString()===o.data.sharedStackKey&&l[n]===o[n]});if(void 0===a){const l=r.services.cartesianScales.getDomainIdentifier(),c=r.services.cartesianScales.getRangeIdentifier();a={[l]:o.data.sharedStackKey,[c]:o.data[o[n]],[n]:o[n]}}r.services.events.dispatchEvent(O.Tooltip.SHOW,{event:i,hoveredElement:s,data:[a]})}).on("mousemove",function(i,o){const s=L(this);r.services.events.dispatchEvent(O.Bar.BAR_MOUSEMOVE,{event:i,element:s,datum:o}),r.services.events.dispatchEvent(O.Tooltip.MOVE,{event:i})}).on("click",function(i,o){r.services.events.dispatchEvent(O.Bar.BAR_CLICK,{event:i,element:L(this),datum:o})}).on("mouseout",function(i,o){const s=L(this);s.classed("hovered",!1),r.services.events.dispatchEvent(O.Bar.BAR_MOUSEOUT,{event:i,element:s,datum:o}),r.services.events.dispatchEvent(O.Tooltip.HIDE,{hoveredElement:s})})}getBarWidth(){const e=this.getOptions();if(y(e,"bars","width"))return e.bars.width;const n=this.services.cartesianScales.getMainXScale(),r=I.getSVGElementSize(this.parent,{useAttrs:!0}).width,i=this.model.getStackKeys().length,o=y(e,"bars","spacingFactor");return n.step?Math.min(e.bars.maxWidth,n.step()/2):Math.min(e.bars.maxWidth,r*o/i)}destroy(){this.parent.selectAll("path.bar").on("mouseover",null).on("mousemove",null).on("mouseout",null);const e=this.services.events;e.removeEventListener(O.Legend.ITEM_HOVER,this.handleLegendOnHover),e.removeEventListener(O.Legend.ITEM_MOUSEOUT,this.handleLegendMouseOut)}}class bv extends pn{constructor(){super(...arguments),this.type="scatter-stacked",this.renderType=re.SVG}render(e){if(!y(this.getOptions(),"points","enabled"))return;const n=this.getComponentContainer({ariaLabel:"scatter points",withinChartClip:!0}),r=this.getOptions(),{groupMapsTo:i}=r.data,o=Object.keys(r.axes).some(u=>r.axes[u].percentage),s=this.model.getStackedData({groups:this.configs.groups,percentage:o}),a=n.selectAll("g.dots").data(s,u=>y(u,0,i));a.exit().attr("opacity",0).remove();const l=a.enter().append("g").classed("dots",!0).attr("role",de.GROUP).merge(a).selectAll("circle.dot").data(u=>u);l.exit().attr("opacity",0).remove();const c=l.enter().append("circle").classed("dot",!0).attr("opacity",0).merge(l).datum(u=>{const d=u[i],h=this.services.cartesianScales.getDomainIdentifier(u),p=this.services.cartesianScales.getRangeIdentifier(u);return{[i]:d,[h]:u.data.sharedStackKey,[p]:u[1]}});this.styleCircles(c,e),this.addEventListeners()}getTooltipData(e,n){const r=this.getOptions(),{groupMapsTo:i}=r.data,o=Object.keys(r.axes).some(l=>r.axes[l].percentage),s=this.model.getStackedData({groups:this.configs.groups,percentage:o}),a=[];return s.forEach((l,c)=>{l.forEach((u,d)=>{const h=u[i],p=u.data.sharedStackKey;let m=u.data[h];const _=u[1],f=this.services.cartesianScales.getDomainIdentifier(u),v=this.services.cartesianScales.getRangeIdentifier(u);null!=m&&e===this.services.cartesianScales.getDomainValue(p)&&n===this.services.cartesianScales.getRangeValue(_)&&(o&&(m=this.model.getStackedData({groups:this.configs.groups})[c][d].data[h]),null!==m&&a.push({[i]:h,[f]:p,[v]:m}))})}),this.model.getDisplayData(this.configs.groups).filter(l=>{const c=this.services.cartesianScales.getDomainIdentifier(l),u=this.services.cartesianScales.getRangeIdentifier(l);return void 0!==a.find(d=>d[i]==l[i]&&d[c]==l[c]&&d[u]==l[u])})}}class eH extends fe{constructor(){super(...arguments),this.type="tree",this.renderType=re.SVG}getLongestLabel(e){let n="";return e.forEach(r=>{const i=r.children?this.getLongestLabel(r.children):"";(i.length>n.length||r.name.length>n.length)&&(n=i.length>r.name.length?i:r.name)}),n}getMockLabelWidth(e,n){const r=e.append("text").attr("dy","0.31em").attr("x",0).attr("text-anchor","end").text(n),{width:i}=I.getSVGElementSize(r.node(),{useBBox:!0});return r.remove(),i}render(e=!0){const n=this.getComponentContainer({ariaLabel:"tree diagram"});n.html("");const{width:r,height:i}=I.getSVGElementSize(this.parent,{useAttrs:!0});if(r<1||i<1)return;const o=this.model.getOptions(),s=this.model.getDisplayData(),a=y(o,"tree","rootTitle")||"Tree",l=this.getMockLabelWidth(n,a),c=this.getLongestLabel(s),u=this.getMockLabelWidth(n,c),d_left=l>0?l+6:24,h=So({name:a,children:s}),m=r/6,_=S=>{const M=h.descendants().reverse(),D=h.links();let k=h,H=h;h.eachBefore(R=>{R.x<k.x&&(k=R),R.x>H.x&&(H=R)});const F=H.x-k.x,P=n.transition().call(R=>this.services.transitions.setupTransition({transition:R,name:"tree-update-viewbox",animate:!0})).attr("viewBox",[-d_left,k.x,r,F].join(" ")),N=T.selectAll("g").data(M,R=>R.id),V=this,E=N.enter().append("g").attr("transform",()=>`translate(${S.y0},${S.x0})`).attr("class",R=>0!==R.depth&&R.children&&R.children.length>0?"clickable":null).on("mouseover",function(R,W){V.services.events.dispatchEvent(O.Tree.NODE_MOUSEOVER,{event:R,element:L(this),datum:W})}).on("click",function(R,W){0!==W.depth&&(W.children=W.children?null:W._children,_(W)),V.services.events.dispatchEvent(O.Tree.NODE_CLICK,{event:R,element:L(this),datum:W})}).on("mouseout",function(R,W){V.services.events.dispatchEvent(O.Tree.NODE_MOUSEOUT,{event:R,element:L(this),datum:W})});E.append("circle").attr("r",2.5).attr("class",R=>R._children?"parent":"child").attr("stroke-width",10),E.append("text").attr("dy","0.31em").attr("x",R=>R._children?-6:6).attr("text-anchor",R=>R._children?"end":"start").text(R=>R.data.name).clone(!0).attr("class","text-stroke").lower(),N.merge(E).transition(P).attr("transform",R=>`translate(${R.y},${R.x})`).attr("fill-opacity",1).attr("stroke-opacity",1),N.exit().transition(P).remove().attr("transform",()=>`translate(${S.y},${S.x})`).attr("fill-opacity",0).attr("stroke-opacity",0);const w=b.selectAll("path").data(D,R=>R.target.id),B=w.enter().append("path").attr("d",()=>{const R={x:S.x0,y:S.y0};return x({source:R,target:R})});w.merge(B).transition(P).attr("d",x),w.exit().transition(P).remove().attr("d",()=>{const R={x:S.x,y:S.y};return x({source:R,target:R})}),h.eachBefore(R=>{R.x0=R.x,R.y0=R.y})},f=h.descendants(),v=f[f.length-1].depth,C=y(o,"tree","type")===Si.DENDROGRAM?vB().size([i,r-u-6*v-l]):oR().nodeSize([10,m]).size([i,r-u-6*v-l]),x=FR().x(S=>S.y).y(S=>S.x);h.x0=m/2,h.y0=0,h.descendants().forEach((S,M)=>{S.id=M,S._children=S.children}),C(h),n.attr("viewBox",[-d_left,-0,r,10]).style("user-select","none");const b=n.append("g").attr("class","links"),T=n.append("g").attr("class","nodes");_(h)}}var Ev={black:{100:"#000000"},blue:{10:"#edf5ff",20:"#d0e2ff",30:"#a6c8ff",40:"#78a9ff",50:"#4589ff",60:"#0f62fe",70:"#0043ce",80:"#002d9c",90:"#001d6c",100:"#001141"},coolGray:{10:"#f2f4f8",20:"#dde1e6",30:"#c1c7cd",40:"#a2a9b0",50:"#878d96",60:"#697077",70:"#4d5358",80:"#343a3f",90:"#21272a",100:"#121619"},cyan:{10:"#e5f6ff",20:"#bae6ff",30:"#82cfff",40:"#33b1ff",50:"#1192e8",60:"#0072c3",70:"#00539a",80:"#003a6d",90:"#012749",100:"#061727"},gray:{10:"#f4f4f4",20:"#e0e0e0",30:"#c6c6c6",40:"#a8a8a8",50:"#8d8d8d",60:"#6f6f6f",70:"#525252",80:"#393939",90:"#262626",100:"#161616"},green:{10:"#defbe6",20:"#a7f0ba",30:"#6fdc8c",40:"#42be65",50:"#24a148",60:"#198038",70:"#0e6027",80:"#044317",90:"#022d0d",100:"#071908"},magenta:{10:"#fff0f7",20:"#ffd6e8",30:"#ffafd2",40:"#ff7eb6",50:"#ee5396",60:"#d02670",70:"#9f1853",80:"#740937",90:"#510224",100:"#2a0a18"},orange:{10:"#fff2e8",20:"#ffd9be",30:"#ffb784",40:"#ff832b",50:"#eb6200",60:"#ba4e00",70:"#8a3800",80:"#5e2900",90:"#3e1a00",100:"#231000"},purple:{10:"#f6f2ff",20:"#e8daff",30:"#d4bbff",40:"#be95ff",50:"#a56eff",60:"#8a3ffc",70:"#6929c4",80:"#491d8b",90:"#31135e",100:"#1c0f30"},red:{10:"#fff1f1",20:"#ffd7d9",30:"#ffb3b8",40:"#ff8389",50:"#fa4d56",60:"#da1e28",70:"#a2191f",80:"#750e13",90:"#520408",100:"#2d0709"},teal:{10:"#d9fbfb",20:"#9ef0f0",30:"#3ddbd9",40:"#08bdba",50:"#009d9a",60:"#007d79",70:"#005d5d",80:"#004144",90:"#022b30",100:"#081a1c"},warmGray:{10:"#f7f3f2",20:"#e5e0df",30:"#cac5c4",40:"#ada8a8",50:"#8f8b8b",60:"#726e6e",70:"#565151",80:"#3c3838",90:"#272525",100:"#171414"},white:{0:"#ffffff"},yellow:{10:"#fcf4d6",20:"#fddc69",30:"#f1c21b",40:"#d2a106",50:"#b28600",60:"#8e6a00",70:"#684e00",80:"#483700",90:"#302400",100:"#1c1500"}};const Sv=function(t){const e=L(this.parentNode).select("rect.leaf"),r=vn(t.backgroundColor??getComputedStyle(e.node(),null).getPropertyValue("fill"));let i;if(r&&(i=(t=>{if(!t)return null;for(const e of Object.keys(Ev)){const n=Ev[e];for(const r of Object.keys(n))if(n[+r]===t)return r}return null})(r?r.hex():null)),null==i){const o=cm(r).l;i=Math.abs(100*o-100)}return i>50?"white":"black"};let FI=0;class MI extends fe{constructor(){super(...arguments),this.type="treemap",this.renderType=re.SVG,this.handleLegendOnHover=e=>{const{hoveredElement:n}=e.detail;this.parent.selectAll("g[data-name='leaf']").transition("legend-hover-treemap").call(r=>this.services.transitions.setupTransition({transition:r,name:"legend-hover-treemap"})).attr("opacity",r=>r.parent.data.name===n.datum().name?1:.3)},this.handleLegendMouseOut=()=>{this.parent.selectAll("g[data-name='leaf']").transition("legend-mouseout-treemap").call(e=>this.services.transitions.setupTransition({transition:e,name:"legend-mouseout-treemap"})).attr("opacity",1)}}init(){const{events:e}=this.services;e.addEventListener(O.Legend.ITEM_HOVER,this.handleLegendOnHover),e.addEventListener(O.Legend.ITEM_MOUSEOUT,this.handleLegendMouseOut)}render(e=!0){const n=this.getComponentContainer({ariaLabel:"treemap"});this.model.getData();const r=this.model.getDisplayData(),i=this.model.getOptions(),o=y(window,"location"),{width:s,height:a}=I.getSVGElementSize(n,{useAttrs:!0}),l=So({name:i.title||"Treemap",children:r}).sum(p=>p.value).sort((p,m)=>m.value-p.value),c=function uR(){var t=cR,e=!1,n=1,r=1,i=[0],o=Er,s=Er,a=Er,l=Er,c=Er;function u(h){return h.x0=h.y0=0,h.x1=n,h.y1=r,h.eachBefore(d),i=[0],e&&h.eachBefore(QB),h}function d(h){var p=i[h.depth],m=h.x0+p,_=h.y0+p,f=h.x1-p,v=h.y1-p;f<m&&(m=f=(m+f)/2),v<_&&(_=v=(_+v)/2),h.x0=m,h.y0=_,h.x1=f,h.y1=v,h.children&&(p=i[h.depth+1]=o(h)/2,m+=c(h)-p,_+=s(h)-p,(f-=a(h)-p)<m&&(m=f=(m+f)/2),(v-=l(h)-p)<_&&(_=v=(_+v)/2),t(h,m,_,f,v))}return u.round=function(h){return arguments.length?(e=!!h,u):e},u.size=function(h){return arguments.length?(n=+h[0],r=+h[1],u):[n,r]},u.tile=function(h){return arguments.length?(t=S_(h),u):t},u.padding=function(h){return arguments.length?u.paddingInner(h).paddingOuter(h):u.paddingInner()},u.paddingInner=function(h){return arguments.length?(o="function"==typeof h?h:ci(+h),u):o},u.paddingOuter=function(h){return arguments.length?u.paddingTop(h).paddingRight(h).paddingBottom(h).paddingLeft(h):u.paddingTop()},u.paddingTop=function(h){return arguments.length?(s="function"==typeof h?h:ci(+h),u):s},u.paddingRight=function(h){return arguments.length?(a="function"==typeof h?h:ci(+h),u):a},u.paddingBottom=function(h){return arguments.length?(l="function"==typeof h?h:ci(+h),u):l},u.paddingLeft=function(h){return arguments.length?(c="function"==typeof h?h:ci(+h),u):c},u}().size([s,a]).paddingInner(1).paddingOuter(0).round(!0)(l),u=n.selectAll("g[data-name='leaf']").data(c.leaves(),p=>p.data.name);u.exit().attr("opacity",0).remove();const d=u.enter().append("g").attr("data-name","leaf").attr("data-uid",()=>FI++).merge(u);d.attr("data-name","leaf").transition().call(p=>this.services.transitions.setupTransition({transition:p,name:"treemap-group-update",animate:e})).attr("transform",p=>`translate(${p.x0},${p.y0})`);const h=d.selectAll("rect.leaf").data(p=>[p]);h.exit().attr("width",0).attr("height",0).remove(),h.enter().append("rect").classed("leaf",!0).merge(h).attr("width",0).attr("height",0).attr("id",function(){const p=L(this.parentNode).attr("data-uid");return`${i.style.prefix}-leaf-${p}`}).attr("class",p=>{for(;p.depth>1;)p=p.parent;return this.model.getColorClassName({classNameTypes:[oe.FILL],dataGroupName:p.data.name,originalClassName:"leaf"})}).transition().call(p=>this.services.transitions.setupTransition({transition:p,name:"treemap-leaf-update-enter",animate:e})).attr("width",p=>p.x1-p.x0).attr("height",p=>p.y1-p.y0).style("fill",p=>{for(;p.depth>1;)p=p.parent;return this.model.getFillColor(p.data.name,null,p.data)}),d.selectAll("clipPath").data(p=>!0!==p.data.showLabel?[]:[1],p=>p).join(p=>p.append("clipPath").attr("id",function(){const m=L(this.parentNode).attr("data-uid");return`${i.style.prefix}-clip-${m}`}).append("use").attr("xlink:href",function(){const m=L(this.parentNode.parentNode).attr("data-uid"),_=`${i.style.prefix}-leaf-${m}`;return new URL(`#${_}`,o)+""}),p=>null,p=>p.remove()),d.selectAll("text").data(p=>{if(!0!==p.data.showLabel)return[];let m=p;for(;m.depth>1;)m=m.parent;return[{text:p.data.name,backgroundColor:this.model.getFillColor(m.data.name)}]},p=>p).join(p=>{const m=p.append("text").text(_=>_.text).style("fill",Sv).attr("x",7).attr("y",18);return o&&m.attr("clip-path",function(){const _=L(this.parentNode).attr("data-uid"),f=`${i.style.prefix}-clip-${_}`;return`url(${new URL(`#${f}`,o)+""})`}),m},p=>p.text(m=>m.text).style("fill",Sv),p=>p.remove()),this.addEventListeners()}addEventListeners(){const e=this;this.parent.selectAll("rect.leaf").on("mouseover",function(n,r){const i=L(this);let o=getComputedStyle(this,null).getPropertyValue("fill"),s=r;for(;s.depth>1;)s=s.parent;i.transition("graph_element_mouseover_fill_update").call(a=>e.services.transitions.setupTransition({transition:a,name:"graph_element_mouseover_fill_update"})).style("fill",a=>{const l=e.model.getFillColor(a.parent.data.name,null,a.data);return l&&(o=l),vn(o).darker(.7).toString()}),e.services.events.dispatchEvent(O.Tooltip.SHOW,{event:n,hoveredElement:i,items:[{color:o,label:s.data.name,bold:!0},{label:r.data.name,value:r.data.value}]}),e.services.events.dispatchEvent(O.Treemap.LEAF_MOUSEOVER,{event:n,element:i,datum:r})}).on("mousemove",function(n,r){const i=L(this);e.services.events.dispatchEvent(O.Treemap.LEAF_MOUSEMOVE,{event:n,element:i,datum:r}),e.services.events.dispatchEvent(O.Tooltip.MOVE,{event:n})}).on("click",function(n,r){e.services.events.dispatchEvent(O.Treemap.LEAF_CLICK,{event:n,element:L(this),datum:r})}).on("mouseout",function(n,r){const i=L(this);i.classed("hovered",!1);let o=r;for(;o.depth>1;)o=o.parent;i.transition().call(s=>e.services.transitions.setupTransition({transition:s,name:"graph_element_mouseout_fill_update"})).style("fill",s=>e.model.getFillColor(s.parent.data.name,null,s.data)),e.services.events.dispatchEvent(O.Treemap.LEAF_MOUSEOUT,{event:n,element:i,datum:r}),e.services.events.dispatchEvent(O.Tooltip.HIDE,{hoveredElement:i})})}}function AI(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}function kI(t){if(Object.prototype.hasOwnProperty.call(t,"__esModule"))return t;var e=t.default;if("function"==typeof e){var n=function r(){return this instanceof r?Reflect.construct(e,arguments,this.constructor):e.apply(this,arguments)};n.prototype=e.prototype}else n={};return Object.defineProperty(n,"__esModule",{value:!0}),Object.keys(t).forEach(function(r){var i=Object.getOwnPropertyDescriptor(t,r);Object.defineProperty(n,r,i.get?i:{enumerable:!0,get:function(){return t[r]}})}),n}var BI={value:function(){}};function Ov(){for(var r,t=0,e=arguments.length,n={};t<e;++t){if(!(r=arguments[t]+"")||r in n||/[\s.]/.test(r))throw new Error("illegal type: "+r);n[r]=[]}return new Tl(n)}function Tl(t){this._=t}function DI(t,e){for(var i,n=0,r=t.length;n<r;++n)if((i=t[n]).name===e)return i.value}function wv(t,e,n){for(var r=0,i=t.length;r<i;++r)if(t[r].name===e){t[r]=BI,t=t.slice(0,r).concat(t.slice(r+1));break}return null!=n&&t.push({name:e,value:n}),t}Tl.prototype=Ov.prototype={constructor:Tl,on:function(t,e){var i,n=this._,r=function RI(t,e){return t.trim().split(/^|\s+/).map(function(n){var r="",i=n.indexOf(".");if(i>=0&&(r=n.slice(i+1),n=n.slice(0,i)),n&&!e.hasOwnProperty(n))throw new Error("unknown type: "+n);return{type:n,name:r}})}(t+"",n),o=-1,s=r.length;if(!(arguments.length<2)){if(null!=e&&"function"!=typeof e)throw new Error("invalid callback: "+e);for(;++o<s;)if(i=(t=r[o]).type)n[i]=wv(n[i],t.name,e);else if(null==e)for(i in n)n[i]=wv(n[i],t.name,null);return this}for(;++o<s;)if((i=(t=r[o]).type)&&(i=DI(n[i],t.name)))return i},copy:function(){var t={},e=this._;for(var n in e)t[n]=e[n].slice();return new Tl(t)},call:function(t,e){if((i=arguments.length-2)>0)for(var i,o,n=new Array(i),r=0;r<i;++r)n[r]=arguments[r+2];if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(r=0,i=(o=this._[t]).length;r<i;++r)o[r].value.apply(e,n)},apply:function(t,e,n){if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(var r=this._[t],i=0,o=r.length;i<o;++i)r[i].value.apply(e,n)}};const LI=kI(Object.freeze(Object.defineProperty({__proto__:null,dispatch:Ov},Symbol.toStringTag,{value:"Module"})));var Kh,Fv;var NI=function II(){if(Fv)return Kh;Fv=1;const t=LI.dispatch,e=Math.PI/180,n={archimedean:_,rectangular:function f(b){var S=4*b[0]/b[1],M=0,D=0;return function(k){var H=k<0?-1:1;switch(Math.sqrt(1+4*H*k)-H&3){case 0:M+=S;break;case 1:D+=4;break;case 2:M-=S;break;default:D-=4}return[M,D]}}},i=2048;function o(b){return b.text}function s(){return"serif"}function a(){return"normal"}function l(b){return Math.sqrt(b.value)}function c(){return 30*(~~(6*random())-3)}function u(){return 1}function d(b,T,S,M){if(!T.sprite){var D=b.context,k=b.ratio;D.clearRect(0,0,2048/k,i/k);var H=0,F=0,P=0,N=S.length;for(--M;++M<N;){T=S[M],D.save(),D.font=T.style+" "+T.weight+" "+~~((T.size+1)/k)+"px "+T.font;const X=D.measureText(T.text),U=-Math.floor(X.width/2);let pe=(X.width+1)*k,ae=T.size<<1;if(T.rotate){var V=Math.sin(T.rotate*e),E=Math.cos(T.rotate*e),w=pe*E,B=pe*V,R=ae*E,W=ae*V;pe=Math.max(Math.abs(w+W),Math.abs(w-W))+31>>5<<5,ae=~~Math.max(Math.abs(B+R),Math.abs(B-R))}else pe=pe+31>>5<<5;if(ae>P&&(P=ae),H+pe>=2048&&(H=0,F+=P,P=0),F+ae>=i)break;D.translate((H+(pe>>1))/k,(F+(ae>>1))/k),T.rotate&&D.rotate(T.rotate*e),D.fillText(T.text,U,0),T.padding&&(D.lineWidth=2*T.padding,D.strokeText(T.text,U,0)),D.restore(),T.width=pe,T.height=ae,T.xoff=H,T.yoff=F,T.x1=pe>>1,T.y1=ae>>1,T.x0=-T.x1,T.y0=-T.y1,T.hasText=!0,H+=pe}for(var Z=D.getImageData(0,0,2048/k,i/k).data,z=[];--M>=0;)if((T=S[M]).hasText){for(var G=T.width,Y=G>>5,ue=T.y1-T.y0,J=0;J<ue*Y;J++)z[J]=0;if(null==(H=T.xoff))return;F=T.yoff;for(var q=0,te=-1,he=0;he<ue;he++){for(J=0;J<G;J++){var $=Y*he+(J>>5),K=Z[2048*(F+he)+(H+J)<<2]?1<<31-J%32:0;z[$]|=K,q|=K}q?te=he:(T.y0++,ue--,he--,F++)}T.y1=T.y0+te,T.sprite=z.slice(0,(T.y1-T.y0)*Y)}}}function h(b,T,S){S>>=5;for(var V,M=b.sprite,D=b.width>>5,k=b.x-(D<<4),H=127&k,F=32-H,P=b.y1-b.y0,N=(b.y+b.y0)*S+(k>>5),E=0;E<P;E++){V=0;for(var w=0;w<=D;w++)if((V<<F|(w<D?(V=M[E*D+w])>>>H:0))&T[N+w])return!0;N+=S}return!1}function p(b,T){var S=b[0],M=b[1];T.x+T.x0<S.x&&(S.x=T.x+T.x0),T.y+T.y0<S.y&&(S.y=T.y+T.y0),T.x+T.x1>M.x&&(M.x=T.x+T.x1),T.y+T.y1>M.y&&(M.y=T.y+T.y1)}function m(b,T){return b.x+b.x1>T[0].x&&b.x+b.x0<T[1].x&&b.y+b.y1>T[0].y&&b.y+b.y0<T[1].y}function _(b){var T=b[0]/b[1];return function(S){return[T*(S*=.1)*Math.cos(S),S*Math.sin(S)]}}function C(){return document.createElement("canvas")}function x(b){return"function"==typeof b?b:function(){return b}}return Kh=function(){var b=[256,256],T=o,S=s,M=l,D=a,k=a,H=c,F=u,P=_,N=[],V=1/0,E=t("word","end"),w=null,B=Math.random,R={},W=C;function z(G,Y,ue){b[0],b[1];for(var X,U,pe,J=Y.x,q=Y.y,te=Math.sqrt(b[0]*b[0]+b[1]*b[1]),he=P(b),$=B()<.5?1:-1,K=-$;(X=he(K+=$))&&(U=~~X[0],pe=~~X[1],!(Math.min(Math.abs(U),Math.abs(pe))>=te));)if(Y.x=J+U,Y.y=q+pe,!(Y.x+Y.x0<0||Y.y+Y.y0<0||Y.x+Y.x1>b[0]||Y.y+Y.y1>b[1])&&(!ue||m(Y,ue))&&!h(Y,G,b[0])){for(var ys,ae=Y.sprite,Ie=Y.width>>5,Pe=b[0]>>5,ie=Y.x-(Ie<<4),be=127&ie,Wt=32-be,Ft=Y.y1-Y.y0,vs=(Y.y+Y.y0)*Pe+(ie>>5),wr=0;wr<Ft;wr++){ys=0;for(var en=0;en<=Ie;en++)G[vs+en]|=ys<<Wt|(en<Ie?(ys=ae[wr*Ie+en])>>>be:0);vs+=Pe}return!0}return!1}return R.canvas=function(G){return arguments.length?(W=x(G),R):W},R.start=function(){var G=function Z(G){const Y=G.getContext("2d",{willReadFrequently:!0});G.width=G.height=1;const ue=Math.sqrt(Y.getImageData(0,0,1,1).data.length>>2);return G.width=2048/ue,G.height=i/ue,Y.fillStyle=Y.strokeStyle="red",{context:Y,ratio:ue}}(W()),Y=function v(b){for(var T=[],S=-1;++S<b;)T[S]=0;return T}((b[0]>>5)*b[1]),ue=null,J=N.length,q=-1,te=[],he=N.map(function(K,X){return K.text=T.call(this,K,X),K.font=S.call(this,K,X),K.style=D.call(this,K,X),K.weight=k.call(this,K,X),K.rotate=H.call(this,K,X),K.size=~~M.call(this,K,X),K.padding=F.call(this,K,X),K}).sort(function(K,X){return X.size-K.size});return w&&clearInterval(w),w=setInterval($,0),$(),R;function $(){for(var K=Date.now();Date.now()-K<V&&++q<J&&w;){var X=he[q];X.x=b[0]*(B()+.5)>>1,X.y=b[1]*(B()+.5)>>1,d(G,X,he,q),X.hasText&&z(Y,X,ue)&&(te.push(X),E.call("word",R,X),ue?p(ue,X):ue=[{x:X.x+X.x0,y:X.y+X.y0},{x:X.x+X.x1,y:X.y+X.y1}],X.x-=b[0]>>1,X.y-=b[1]>>1)}q>=J&&(R.stop(),E.call("end",R,te,ue))}},R.stop=function(){w&&(clearInterval(w),w=null);for(const G of N)delete G.sprite;return R},R.timeInterval=function(G){return arguments.length?(V=G??1/0,R):V},R.words=function(G){return arguments.length?(N=G,R):N},R.size=function(G){return arguments.length?(b=[+G[0],+G[1]],R):b},R.font=function(G){return arguments.length?(S=x(G),R):S},R.fontStyle=function(G){return arguments.length?(D=x(G),R):D},R.fontWeight=function(G){return arguments.length?(k=x(G),R):k},R.rotate=function(G){return arguments.length?(H=x(G),R):H},R.text=function(G){return arguments.length?(T=x(G),R):T},R.spiral=function(G){return arguments.length?(P=n[G]||G,R):P},R.fontSize=function(G){return arguments.length?(M=x(G),R):M},R.padding=function(G){return arguments.length?(F=x(G),R):F},R.random=function(G){return arguments.length?(B=G,R):B},R.on=function(){var G=E.on.apply(E,arguments);return G===E?R:G},R},Kh}();const WI=AI(NI);class VI extends fe{constructor(){super(...arguments),this.type="wordcloud",this.renderType=re.SVG,this.handleLegendOnHover=e=>{const{hoveredElement:n}=e.detail,{groupMapsTo:r}=this.getOptions().data;this.parent.selectAll("text.word").transition("legend-hover-wordcloud").call(i=>this.services.transitions.setupTransition({transition:i,name:"legend-hover-wordcloud"})).attr("opacity",i=>i[r]!==n.datum().name?.3:1)},this.handleLegendMouseOut=()=>{this.parent.selectAll("text.word").transition("legend-mouseout-wordcloud").call(e=>this.services.transitions.setupTransition({transition:e,name:"legend-mouseout-wordcloud"})).attr("opacity",1)}}init(){const e=this.services.events;e.addEventListener(O.Legend.ITEM_HOVER,this.handleLegendOnHover),e.addEventListener(O.Legend.ITEM_MOUSEOUT,this.handleLegendMouseOut)}render(e=!0){const n=this,r=this.getComponentContainer({ariaLabel:"word cloud"}).attr("width","100%").attr("height","100%"),i=this.model.getDisplayData(),o=this.getFontSizeScale(i),s=this.getOptions(),{fontSizeMapsTo:a,wordMapsTo:l}=s.wordCloud,{groupMapsTo:c}=s.data,{width:u,height:d}=I.getSVGElementSize(r,{useAttrs:!0});if(0===u||0===d)return;const h=WI().size([u,d]).words(i.map(function(m){const _=m[a];if("number"!=typeof m[a])throw Error("Badly formatted WordCloud data. `value` should only be an integer or float");return{[c]:m[c],text:m[l],size:_,value:_}})).padding(5).rotate(0).fontSize(m=>o(m.size)).on("end",function p(m){const _=I.appendOrSelect(r,"g.words");_.attr("transform",`translate(${h.size()[0]/2}, ${h.size()[1]/2})`);const f=_.selectAll("text").data(m,v=>`${v[c]}-${v.text}`);f.exit().attr("opacity",0).remove(),f.enter().append("text").attr("opacity",0).merge(f).style("font-size",v=>`${v.size}px`).text(function(v){return v.text}).attr("class",v=>n.model.getColorClassName({classNameTypes:[oe.FILL],dataGroupName:v[c],originalClassName:"word "+(v.size>32?"light":"")})).style("fill",v=>n.model.getFillColor(v[c],v.text,v)).attr("text-anchor","middle").transition().call(v=>n.services.transitions.setupTransition({transition:v,name:"wordcloud-text-update-enter",animate:e})).attr("transform",v=>`translate(${v.x}, ${v.y})`).attr("opacity",1)});h.start(),this.addEventListeners()}getFontSizeScale(e){const n=this.getOptions(),{fontSizeMapsTo:r}=n.wordCloud,i=e.map(l=>l[r]).filter(l=>l),o=I.getHTMLElementSize(this.services.domUtils.getMainContainer()),s=i.length>0,a=s?zt(i):[1,1];return Yt().domain(a).range(s?n.wordCloud.fontSizeRange(o,e):[4,4])}addEventListeners(){const e=this.getOptions(),{groupMapsTo:n}=e.data,r=this,i=Oa(o=>{const s=r.parent.selectAll("text.word").transition("wordcloud-word-mouse-highlight").call(a=>r.services.transitions.setupTransition({transition:a,name:"wordcloud-word-mouse-highlight"}));null===o?s.attr("opacity",1):s.attr("opacity",function(){return o===this?1:.3})},6);this.parent.selectAll("text.word").on("mouseover",function(o,s){i(this),r.services.events.dispatchEvent(O.WordCloud.WORD_MOUSEOVER,{event:o,element:L(this),datum:s}),r.services.events.dispatchEvent(O.Tooltip.SHOW,{event:o,hoveredElement:this,items:[{label:e.tooltip.wordLabel,value:s.text},{label:e.tooltip.valueLabel,value:s.value},{label:ve(e,"locale.translations.group")||ve(e,"tooltip.groupLabel")||"Group",value:s[n],class:r.model.getColorClassName({classNameTypes:[oe.TOOLTIP],dataGroupName:s[n]})}]})}).on("mousemove",function(o,s){const a=L(this);r.services.events.dispatchEvent(O.WordCloud.WORD_MOUSEMOVE,{element:a,datum:s}),r.services.events.dispatchEvent(O.Tooltip.MOVE,{event:o})}).on("click",function(o,s){r.services.events.dispatchEvent(O.WordCloud.WORD_CLICK,{event:o,element:L(this),datum:s})}).on("mouseout",function(o,s){const a=L(this);i(null),r.services.events.dispatchEvent(O.WordCloud.WORD_MOUSEOUT,{event:o,element:a,datum:s}),r.services.events.dispatchEvent(O.Tooltip.HIDE,{hoveredElement:a})})}}class PI extends fe{constructor(){super(...arguments),this.type="geo",this.renderType=re.SVG}render(){const e=this.getComponentContainer({withinChartClip:!0}),{width:n,height:r}=I.getSVGElementSize(e,{useAttrs:!0});if(n<1||r<1)return;const i=this.getProjection(),o=y(this.getOptions(),"geoData"),s=this.model.getCombinedData(),a={},l={};Object.keys(s).forEach(f=>{"number"==typeof s[f].value?a[f]=s[f]:l[f]=s[f]});const c=RD(o,Object.values(l)),u=function AD(t,e){return"string"==typeof e&&(e=t.objects[e]),"GeometryCollection"===e.type?{type:"FeatureCollection",features:e.geometries.map(function(n){return mv(t,n)})}:mv(t,e)}(o,{type:"GeometryCollection",geometries:Object.values(a)}),d=i.fitSize([n,r],u),h=function $k(t,e){let i,o,n=3,r=4.5;function s(a){return a&&("function"==typeof r&&o.pointRadius(+r.apply(this,arguments)),oi(a,i(o))),o.result()}return s.area=function(a){return oi(a,i(Bn)),Bn.result()},s.measure=function(a){return oi(a,i(Co)),Co.result()},s.bounds=function(a){return oi(a,i(Ja)),Ja.result()},s.centroid=function(a){return oi(a,i(It)),It.result()},s.projection=function(a){return arguments.length?(i=null==a?(t=null,lh):(t=a).stream,s):t},s.context=function(a){return arguments.length?(o=null==a?(e=null,new m_(n)):new a_(e=a),"function"!=typeof r&&o.pointRadius(r),s):e},s.pointRadius=function(a){return arguments.length?(r="function"==typeof a?a:(o.pointRadius(+a),+a),s):r},s.digits=function(a){if(!arguments.length)return n;if(null==a)n=null;else{const l=Math.floor(a);if(!(l>=0))throw new RangeError(`invalid digits: ${a}`);n=l}return null===e&&(o=new m_(n)),s},s.projection(t).digits(n).context(e)}().projection(d);I.appendOrSelect(e,"g.geo").selectAll("path").data(u.features).join("path").attr("d",h);const p=this.services.domUtils.generateElementIDString("geo-pattern-stripes"),m=I.appendOrSelect(e,"defs");I.appendOrSelect(m,"pattern").attr("id",p).attr("width",5).attr("height",10).attr("patternUnits","userSpaceOnUse").attr("patternTransform","rotate(45)").append("path").classed("pattern-fill",!0).attr("d",Mo()([[0,0],[0,10]]));const _=I.appendOrSelect(e,"g.missing-data");I.appendOrSelect(_,"path").datum(c).attr("d",h).style("fill",`url(#${p})`)}getProjection(){let e=null;switch(y(this.getOptions(),"thematic","projection")){case Ut.geoEqualEarth:e=function cB(){return rl(b_).scale(177.158)}();break;case Ut.geoAlbers:e=function nB(){return x_().parallels([29.5,45.5]).scale(1070).translate([480,250]).rotate([96,0]).center([-.6,38.7])}();break;case Ut.geoConicEqualArea:e=x_();break;case Ut.geoConicEquidistant:e=function aB(){return T_(sB).scale(131.154).center([0,13.9389])}();break;case Ut.geoEquirectangular:e=function oB(){return rl(il).scale(152.63)}();break;case Ut.geoMercator:e=rB();break;case Ut.geoNaturalEarth1:e=function uB(){return rl(E_).scale(175.295)}();break;default:throw new Error("Projection is not supported.")}return e}}class UI extends PI{constructor(){super(...arguments),this.type="choropleth"}render(e=!0){super.render();const n=this.model.getCombinedData(),r=this.getComponentContainer({ariaLabel:"map",withinChartClip:!0}),i=y(this.getOptions(),"color"),o=y(i,"gradient","colors");r.select("g.geo").selectAll("path").classed("border",!0).attr("class",s=>this.model.getColorClassName({value:n[s.properties.NAME].value,originalClassName:"border"})).attr("style",s=>o?`fill: ${this.model.getColorClassName({value:n[s.properties.NAME].value})}`:null),this.addCountryAreaEventListener()}addCountryAreaEventListener(){const e=this,n=this.model.getCombinedData();this.parent.selectAll("path.border").on("mouseover",function(r,i){const o=L(this);e.services.events.dispatchEvent(Mr.CHOROPLETH_MOUSEOVER,{event:r,element:o,datum:n[i.properties.NAME]}),e.services.events.dispatchEvent(Yn.SHOW,{event:r,hoveredElement:o,items:[{label:i.properties.NAME,value:n[i.properties.NAME].value}]})}).on("mousemove",function(r,i){e.services.events.dispatchEvent(Mr.CHOROPLETH_MOUSEMOVE,{event:r,element:L(this),datum:n[i.properties.NAME]}),e.services.events.dispatchEvent(Yn.MOVE,{event:r})}).on("click",function(r,i){e.services.events.dispatchEvent(Mr.CHOROPLETH_CLICK,{event:r,element:L(this),datum:n[i.properties.NAME]})}).on("mouseout",function(r,i){const o=L(this);e.services.events.dispatchEvent(Mr.CHOROPLETH_MOUSEOUT,{event:r,element:o,datum:n[i.properties.NAME]}),e.services.events.dispatchEvent(Yn.HIDE,{event:r,hoveredElement:o})})}}function qh(t){return(null==t?0:t.length)?Xs(t,1):[]}function Mv(t,e,n){var r=-1,i=t.length;e<0&&(e=-e>i?0:i+e),(n=n>i?i:n)<0&&(n+=i),i=e>n?0:n-e>>>0,e>>>=0;for(var o=Array(i);++r<i;)o[r]=t[r+e];return o}function GI(t,e){return null==(t=function $I(t,e){return e.length<2?t:Zl(t,Mv(e,0,-1))}(t,e=Ys(e,t)))||delete t[Wi(Lp(e))]}function zI(t){return ep(t)?void 0:t}var XI=function jI(t){return Nd(Pd(t,void 0,qh),t+"")}(function(t,e){var n={};if(null==t)return n;var r=!1;e=Wl(e,function(o){return o=Ys(o,t),r||(r=o.length>1),o}),Hr(t,up(t),n),r&&(n=Vi(n,7,zI));for(var i=e.length;i--;)GI(n,e[i]);return n});function Av(t){return Math.log(t)}function kv(t){return Math.exp(t)}function ZI(t){return-Math.log(-t)}function QI(t){return-Math.exp(-t)}function JI(t){return isFinite(t)?+("1e"+t):t<0?0:t}function Bv(t){return(e,n)=>-t(-e,n)}function nN(t){const e=t(Av,kv),n=e.domain;let i,o,r=10;function s(){return i=function tN(t){return t===Math.E?Math.log:10===t&&Math.log10||2===t&&Math.log2||(t=Math.log(t),e=>Math.log(e)/t)}(r),o=function eN(t){return 10===t?JI:t===Math.E?Math.exp:e=>Math.pow(t,e)}(r),n()[0]<0?(i=Bv(i),o=Bv(o),t(ZI,QI)):t(Av,kv),e}return e.base=function(a){return arguments.length?(r=+a,s()):r},e.domain=function(a){return arguments.length?(n(a),s()):n()},e.ticks=a=>{const l=n();let c=l[0],u=l[l.length-1];const d=u<c;d&&([c,u]=[u,c]);let m,_,h=i(c),p=i(u);const f=null==a?10:+a;let v=[];if(!(r%1)&&p-h<f){if(h=Math.floor(h),p=Math.ceil(p),c>0){for(;h<=p;++h)for(m=1;m<r;++m)if(_=h<0?m/o(-h):m*o(h),!(_<c)){if(_>u)break;v.push(_)}}else for(;h<=p;++h)for(m=r-1;m>=1;--m)if(_=h>0?m/o(-h):m*o(h),!(_<c)){if(_>u)break;v.push(_)}2*v.length<f&&(v=na(c,u,f))}else v=na(h,p,Math.min(p-h,f)).map(o);return d?v.reverse():v},e.tickFormat=(a,l)=>{if(null==a&&(a=10),null==l&&(l=10===r?"s":","),"function"!=typeof l&&(!(r%1)&&null==(l=Qi(l)).precision&&(l.trim=!0),l=kc(l)),a===1/0)return l;const c=Math.max(1,r*a/e.ticks().length);return u=>{let d=u/o(Math.round(i(u)));return d*r<r-.5&&(d*=r),d<=c?l(u):""}},e.nice=()=>n(yg(n(),{floor:a=>o(Math.floor(i(a))),ceil:a=>o(Math.ceil(i(a)))})),e}function Rv(){const t=nN(Wm()).domain([1,10]);return t.copy=()=>Rc(t,Rv()).base(t.base()),Gr.apply(t,arguments),t}function xl(t,e,n){t._context.bezierCurveTo((2*t._x0+t._x1)/3,(2*t._y0+t._y1)/3,(t._x0+2*t._x1)/3,(t._y0+2*t._y1)/3,(t._x0+4*t._x1+e)/6,(t._y0+4*t._y1+n)/6)}function bl(t){this._context=t}function rN(t){return new bl(t)}function Dv(t){this._context=t}function iN(t){return new Dv(t)}function Hv(t){this._context=t}function oN(t){return new Hv(t)}function Lv(t,e){this._basis=new bl(t),this._beta=e}bl.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){switch(this._point){case 3:xl(this,this._x1,this._y1);case 2:this._context.lineTo(this._x1,this._y1)}(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;break;case 2:this._point=3,this._context.lineTo((5*this._x0+this._x1)/6,(5*this._y0+this._y1)/6);default:xl(this,t,e)}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e}},Dv.prototype={areaStart:Gn,areaEnd:Gn,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._y0=this._y1=this._y2=this._y3=this._y4=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:this._context.moveTo(this._x2,this._y2),this._context.closePath();break;case 2:this._context.moveTo((this._x2+2*this._x3)/3,(this._y2+2*this._y3)/3),this._context.lineTo((this._x3+2*this._x2)/3,(this._y3+2*this._y2)/3),this._context.closePath();break;case 3:this.point(this._x2,this._y2),this.point(this._x3,this._y3),this.point(this._x4,this._y4)}},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._x2=t,this._y2=e;break;case 1:this._point=2,this._x3=t,this._y3=e;break;case 2:this._point=3,this._x4=t,this._y4=e,this._context.moveTo((this._x0+4*this._x1+t)/6,(this._y0+4*this._y1+e)/6);break;default:xl(this,t,e)}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e}},Hv.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){(this._line||0!==this._line&&3===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3;var n=(this._x0+4*this._x1+t)/6,r=(this._y0+4*this._y1+e)/6;this._line?this._context.lineTo(n,r):this._context.moveTo(n,r);break;case 3:this._point=4;default:xl(this,t,e)}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e}},Lv.prototype={lineStart:function(){this._x=[],this._y=[],this._basis.lineStart()},lineEnd:function(){var t=this._x,e=this._y,n=t.length-1;if(n>0)for(var l,r=t[0],i=e[0],o=t[n]-r,s=e[n]-i,a=-1;++a<=n;)l=a/n,this._basis.point(this._beta*t[a]+(1-this._beta)*(r+l*o),this._beta*e[a]+(1-this._beta)*(i+l*s));this._x=this._y=null,this._basis.lineEnd()},point:function(t,e){this._x.push(+t),this._y.push(+e)}};const sN=function t(e){function n(r){return 1===e?new bl(r):new Lv(r,e)}return n.beta=function(r){return t(+r)},n}(.85);function El(t,e,n){t._context.bezierCurveTo(t._x1+t._k*(t._x2-t._x0),t._y1+t._k*(t._y2-t._y0),t._x2+t._k*(t._x1-e),t._y2+t._k*(t._y1-n),t._x2,t._y2)}function Yh(t,e){this._context=t,this._k=(1-e)/6}Yh.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x2,this._y2);break;case 3:El(this,this._x1,this._y1)}(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2,this._x1=t,this._y1=e;break;case 2:this._point=3;default:El(this,t,e)}this._x0=this._x1,this._x1=this._x2,this._x2=t,this._y0=this._y1,this._y1=this._y2,this._y2=e}};const aN=function t(e){function n(r){return new Yh(r,e)}return n.tension=function(r){return t(+r)},n}(0);function Xh(t,e){this._context=t,this._k=(1-e)/6}Xh.prototype={areaStart:Gn,areaEnd:Gn,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._x5=this._y0=this._y1=this._y2=this._y3=this._y4=this._y5=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:this._context.moveTo(this._x3,this._y3),this._context.closePath();break;case 2:this._context.lineTo(this._x3,this._y3),this._context.closePath();break;case 3:this.point(this._x3,this._y3),this.point(this._x4,this._y4),this.point(this._x5,this._y5)}},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._x3=t,this._y3=e;break;case 1:this._point=2,this._context.moveTo(this._x4=t,this._y4=e);break;case 2:this._point=3,this._x5=t,this._y5=e;break;default:El(this,t,e)}this._x0=this._x1,this._x1=this._x2,this._x2=t,this._y0=this._y1,this._y1=this._y2,this._y2=e}};const lN=function t(e){function n(r){return new Xh(r,e)}return n.tension=function(r){return t(+r)},n}(0);function Zh(t,e){this._context=t,this._k=(1-e)/6}Zh.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._point=0},lineEnd:function(){(this._line||0!==this._line&&3===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3,this._line?this._context.lineTo(this._x2,this._y2):this._context.moveTo(this._x2,this._y2);break;case 3:this._point=4;default:El(this,t,e)}this._x0=this._x1,this._x1=this._x2,this._x2=t,this._y0=this._y1,this._y1=this._y2,this._y2=e}};const cN=function t(e){function n(r){return new Zh(r,e)}return n.tension=function(r){return t(+r)},n}(0);function Qh(t,e,n){var r=t._x1,i=t._y1,o=t._x2,s=t._y2;if(t._l01_a>nt){var a=2*t._l01_2a+3*t._l01_a*t._l12_a+t._l12_2a,l=3*t._l01_a*(t._l01_a+t._l12_a);r=(r*a-t._x0*t._l12_2a+t._x2*t._l01_2a)/l,i=(i*a-t._y0*t._l12_2a+t._y2*t._l01_2a)/l}if(t._l23_a>nt){var c=2*t._l23_2a+3*t._l23_a*t._l12_a+t._l12_2a,u=3*t._l23_a*(t._l23_a+t._l12_a);o=(o*c+t._x1*t._l23_2a-e*t._l12_2a)/u,s=(s*c+t._y1*t._l23_2a-n*t._l12_2a)/u}t._context.bezierCurveTo(r,i,o,s,t._x2,t._y2)}function Iv(t,e){this._context=t,this._alpha=e}Iv.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x2,this._y2);break;case 3:this.point(this._x2,this._y2)}(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){if(t=+t,e=+e,this._point){var n=this._x2-t,r=this._y2-e;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(n*n+r*r,this._alpha))}switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;break;case 2:this._point=3;default:Qh(this,t,e)}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=t,this._y0=this._y1,this._y1=this._y2,this._y2=e}};const uN=function t(e){function n(r){return e?new Iv(r,e):new Yh(r,0)}return n.alpha=function(r){return t(+r)},n}(.5);function Nv(t,e){this._context=t,this._alpha=e}Nv.prototype={areaStart:Gn,areaEnd:Gn,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._x5=this._y0=this._y1=this._y2=this._y3=this._y4=this._y5=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){switch(this._point){case 1:this._context.moveTo(this._x3,this._y3),this._context.closePath();break;case 2:this._context.lineTo(this._x3,this._y3),this._context.closePath();break;case 3:this.point(this._x3,this._y3),this.point(this._x4,this._y4),this.point(this._x5,this._y5)}},point:function(t,e){if(t=+t,e=+e,this._point){var n=this._x2-t,r=this._y2-e;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(n*n+r*r,this._alpha))}switch(this._point){case 0:this._point=1,this._x3=t,this._y3=e;break;case 1:this._point=2,this._context.moveTo(this._x4=t,this._y4=e);break;case 2:this._point=3,this._x5=t,this._y5=e;break;default:Qh(this,t,e)}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=t,this._y0=this._y1,this._y1=this._y2,this._y2=e}};const hN=function t(e){function n(r){return e?new Nv(r,e):new Xh(r,0)}return n.alpha=function(r){return t(+r)},n}(.5);function Wv(t,e){this._context=t,this._alpha=e}Wv.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){(this._line||0!==this._line&&3===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){if(t=+t,e=+e,this._point){var n=this._x2-t,r=this._y2-e;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(n*n+r*r,this._alpha))}switch(this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3,this._line?this._context.lineTo(this._x2,this._y2):this._context.moveTo(this._x2,this._y2);break;case 3:this._point=4;default:Qh(this,t,e)}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=t,this._y0=this._y1,this._y1=this._y2,this._y2=e}};const dN=function t(e){function n(r){return e?new Wv(r,e):new Zh(r,0)}return n.alpha=function(r){return t(+r)},n}(.5);function Vv(t){return t<0?-1:1}function Pv(t,e,n){var r=t._x1-t._x0,i=e-t._x1,o=(t._y1-t._y0)/(r||i<0&&-0),s=(n-t._y1)/(i||r<0&&-0),a=(o*i+s*r)/(r+i);return(Vv(o)+Vv(s))*Math.min(Math.abs(o),Math.abs(s),.5*Math.abs(a))||0}function Uv(t,e){var n=t._x1-t._x0;return n?(3*(t._y1-t._y0)/n-e)/2:e}function Jh(t,e,n){var r=t._x0,i=t._y0,o=t._x1,s=t._y1,a=(o-r)/3;t._context.bezierCurveTo(r+a,i+a*e,o-a,s-a*n,o,s)}function Sl(t){this._context=t}function jv(t){this._context=new $v(t)}function $v(t){this._context=t}function pN(t){return new Sl(t)}function mN(t){return new jv(t)}function Gv(t){this._context=t}function zv(t){var e,r,n=t.length-1,i=new Array(n),o=new Array(n),s=new Array(n);for(i[0]=0,o[0]=2,s[0]=t[0]+2*t[1],e=1;e<n-1;++e)i[e]=1,o[e]=4,s[e]=4*t[e]+2*t[e+1];for(i[n-1]=2,o[n-1]=7,s[n-1]=8*t[n-1]+t[n],e=1;e<n;++e)r=i[e]/o[e-1],o[e]-=r,s[e]-=r*s[e-1];for(i[n-1]=s[n-1]/o[n-1],e=n-2;e>=0;--e)i[e]=(s[e]-i[e+1])/o[e];for(o[n-1]=(t[n]+i[n-1])/2,e=0;e<n-1;++e)o[e]=2*t[e+1]-i[e+1];return[i,o]}function gN(t){return new Gv(t)}function Ol(t,e){this._context=t,this._t=e}function fN(t){return new Ol(t,.5)}function _N(t){return new Ol(t,0)}function vN(t){return new Ol(t,1)}Sl.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=this._t0=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x1,this._y1);break;case 3:Jh(this,this._t0,Uv(this,this._t0))}(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){var n=NaN;if(e=+e,(t=+t)!==this._x1||e!==this._y1){switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;break;case 2:this._point=3,Jh(this,Uv(this,n=Pv(this,t,e)),n);break;default:Jh(this,this._t0,n=Pv(this,t,e))}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e,this._t0=n}}},(jv.prototype=Object.create(Sl.prototype)).point=function(t,e){Sl.prototype.point.call(this,e,t)},$v.prototype={moveTo:function(t,e){this._context.moveTo(e,t)},closePath:function(){this._context.closePath()},lineTo:function(t,e){this._context.lineTo(e,t)},bezierCurveTo:function(t,e,n,r,i,o){this._context.bezierCurveTo(e,t,r,n,o,i)}},Gv.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=[],this._y=[]},lineEnd:function(){var t=this._x,e=this._y,n=t.length;if(n)if(this._line?this._context.lineTo(t[0],e[0]):this._context.moveTo(t[0],e[0]),2===n)this._context.lineTo(t[1],e[1]);else for(var r=zv(t),i=zv(e),o=0,s=1;s<n;++o,++s)this._context.bezierCurveTo(r[0][o],i[0][o],r[1][o],i[1][o],t[s],e[s]);(this._line||0!==this._line&&1===n)&&this._context.closePath(),this._line=1-this._line,this._x=this._y=null},point:function(t,e){this._x.push(+t),this._y.push(+e)}},Ol.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=this._y=NaN,this._point=0},lineEnd:function(){0<this._t&&this._t<1&&2===this._point&&this._context.lineTo(this._x,this._y),(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line>=0&&(this._t=1-this._t,this._line=1-this._line)},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;default:if(this._t<=0)this._context.lineTo(this._x,e),this._context.lineTo(t,e);else{var n=this._x*(1-this._t)+t*this._t;this._context.lineTo(n,this._y),this._context.lineTo(n,e)}}this._x=t,this._y=e}};class yN extends Mn{zoomIn(e,n,r){let i,o,s;const a=r||hr;e&&(i=e.x,o=e.y,s=2);const{width:l,height:c}=I.getSVGElementSize(this.services.domUtils.getHolder(),{useClientDimensions:!0});n.transition().duration(a.duration).ease(a.ease).attr("transform",`translate(${l/2}, ${c/2}) scale(${s}) translate(${-i},${-o})`),this.services.events.dispatchEvent(O.CanvasZoom.CANVAS_ZOOM_IN,{element:L(e)})}zoomOut(e,n){const r=n||hr;e.transition().duration(r.duration).ease(r.ease).attr("transform",""),this.services.events.dispatchEvent(O.CanvasZoom.CANVAS_ZOOM_OUT)}}class CN extends Mn{init(){this.documentFragment=document.createDocumentFragment()}addEventListener(e,n){this.documentFragment.addEventListener(e,n)}removeEventListener(e,n){this.documentFragment.removeEventListener(e,n)}dispatchEvent(e,n){let r;n?r=new CustomEvent(e,{detail:n}):(r=document.createEvent("Event"),r.initEvent(e,!1,!0)),this.documentFragment.dispatchEvent(r)}}class TN extends Mn{constructor(e,n){super(e,n)}downloadCSV(e,n){const r=document.createElement("a"),i="text/csv;encoding:utf-8";if(navigator.msSaveBlob)navigator.msSaveBlob(new Blob([e],{type:i}),n);else if(URL&&"download"in r){const o=URL.createObjectURL(new Blob([e],{type:i}));r.href=o,r.setAttribute("download",n),document.body.appendChild(r),r.click(),document.body.removeChild(r),URL.revokeObjectURL(o)}else location.href=`data:application/octet-stream,${encodeURIComponent(e)}`}downloadImage(e,n){const r=document.createElement("a");r.download=n,r.href=e,document.body.appendChild(r),r.click(),document.body.removeChild(r)}}class xN extends Mn{constructor(){super(...arguments),this.pendingTransitions={}}init(){var e;null==(e=this.services.events)||e.addEventListener(O.Model.UPDATE,()=>{this.pendingTransitions={}})}setupTransition({transition:e,name:n,animate:r}){return this.pendingTransitions[e._id]=e,e.on("end interrupt cancel",()=>{delete this.pendingTransitions[e._id]}),!1===this.model.getOptions().animations||!1===r?e.duration(0):e.duration(y(Wc,n,"duration")||Wc.default.duration)}getPendingTransitions(){return this.pendingTransitions}}function Io(t,e){const n=+Ne(t)-+Ne(e);return n<0?-1:n>0?1:n}function EN(t,e,n){const[r,i]=Jn(0,t,e),o=Io(r,i),s=Math.abs(function bN(t,e,n){const[r,i]=Jn(0,t,e);return r.getFullYear()-i.getFullYear()}(r,i));r.setFullYear(1584),i.setFullYear(1584);const l=o*(s-+(Io(r,i)===-o));return 0===l?0:l}function ed(t,e,n){const r=Ne(t,n?.in);if(isNaN(e))return At(t,NaN);if(!e)return r;const i=r.getDate(),o=At(t,r.getTime());o.setMonth(r.getMonth()+e+1,0);return i>=o.getDate()?o:(r.setFullYear(o.getFullYear(),o.getMonth(),i),r)}function Kv(t,e,n){return ed(t,12*e,n)}function SN(t,e,n){return Kv(t,-e,n)}function MN(t,e){const n=Ne(t,e?.in);return+function wN(t,e){const n=Ne(t,e?.in);return n.setHours(23,59,59,999),n}(n,e)==+function FN(t,e){const n=Ne(t,e?.in),r=n.getMonth();return n.setFullYear(n.getFullYear(),r+1,0),n.setHours(23,59,59,999),n}(n,e)}function AN(t,e,n){const[r,i,o]=Jn(0,t,t,e),s=Io(i,o),a=Math.abs(function ON(t,e,n){const[r,i]=Jn(0,t,e);return 12*(r.getFullYear()-i.getFullYear())+(r.getMonth()-i.getMonth())}(i,o));if(a<1)return 0;1===i.getMonth()&&i.getDate()>27&&i.setDate(30),i.setMonth(i.getMonth()-s*a);let l=Io(i,o)===-s;MN(r)&&1===a&&1===Io(r,o)&&(l=!1);const c=s*(a-+l);return 0===c?0:c}function kN(t,e,n){return ed(t,-e,n)}function qv(t,e){const n=t.getFullYear()-e.getFullYear()||t.getMonth()-e.getMonth()||t.getDate()-e.getDate()||t.getHours()-e.getHours()||t.getMinutes()-e.getMinutes()||t.getSeconds()-e.getSeconds()||t.getMilliseconds()-e.getMilliseconds();return n<0?-1:n>0?1:n}function Yv(t,e,n){const r=Ne(t,n?.in);return isNaN(e)?At(t,NaN):(e&&r.setDate(r.getDate()+e),r)}function RN(t,e,n){return Yv(t,-e,n)}function td(t){return e=>{const n=(t?Math[t]:Math.trunc)(e);return 0===n?0:n}}function Xv(t,e,n){return At(t,+Ne(t)+e)}function Zv(t,e,n){return Xv(t,e*Od)}function HN(t,e,n){return Zv(t,-e)}function Qv(t,e){return+Ne(t)-+Ne(e)}function Jv(t,e,n){const r=Qv(t,e)/Sd;return td(n?.roundingMethod)(r)}function nd(t,e,n){const r=Ne(t,n?.in);return r.setTime(r.getTime()+e*Sd),r}function e0(t,e,n){return nd(t,-e,n)}function t0(t,e,n){const r=Qv(t,e)/1e3;return td(n?.roundingMethod)(r)}function rd(t,e,n){return Xv(t,1e3*e)}function n0(t,e,n){return rd(t,-e)}class LN extends Mn{constructor(){super(...arguments),this.scaleTypes={top:null,right:null,bottom:null,left:null},this.scales={top:null,right:null,bottom:null,left:null}}getDomainAxisPosition({datum:e=null}={}){if(this.dualAxes&&e){const n=this.model.getOptions(),{groupMapsTo:r}=n.data,i=y(n,"axes",this.secondaryDomainAxisPosition),o=e[r];if(null!=i&&i.correspondingDatasets&&i.correspondingDatasets.includes(o))return this.secondaryDomainAxisPosition}return this.domainAxisPosition}getRangeAxisPosition({datum:e=null,groups:n=null}={}){if(this.dualAxes){const r=this.model.getOptions(),{groupMapsTo:i}=r.data,o=y(r,"axes",this.secondaryRangeAxisPosition);let s;if(null!==e?s=e[i]:n&&n.length>0&&(s=n[0]),null!=o&&o.correspondingDatasets&&o.correspondingDatasets.includes(s))return this.secondaryRangeAxisPosition}return this.rangeAxisPosition}getAxisOptions(e){return y(this.model.getOptions(),"axes",e)}getDomainAxisOptions(){const e=this.getDomainAxisPosition();return this.getAxisOptions(e)}getRangeAxisOptions(){const e=this.getRangeAxisPosition();return this.getAxisOptions(e)}getScaleLabel(e){return this.getAxisOptions(e).title||(e===j.BOTTOM||e===j.TOP?"x-value":"y-value")}getDomainLabel(){return this.getScaleLabel(this.getDomainAxisPosition())}getRangeLabel(){return this.getScaleLabel(this.getRangeAxisPosition())}update(){this.determineAxisDuality(),this.findDomainAndRangeAxes(),this.determineOrientation(),Object.keys(j).map(e=>j[e]).forEach(e=>{this.scales[e]=this.createScale(e)})}findDomainAndRangeAxes(){const e=this.findVerticalAxesPositions(),n=this.findHorizontalAxesPositions(),r=this.findDomainAndRangeAxesPositions(e,n);this.domainAxisPosition=r.primaryDomainAxisPosition,this.rangeAxisPosition=r.primaryRangeAxisPosition,this.isDualAxes()&&(this.secondaryDomainAxisPosition=r.secondaryDomainAxisPosition,this.secondaryRangeAxisPosition=r.secondaryRangeAxisPosition)}determineOrientation(){this.rangeAxisPosition!==j.LEFT&&this.rangeAxisPosition!==j.RIGHT||this.domainAxisPosition!==j.BOTTOM&&this.domainAxisPosition!==j.TOP?this.orientation=je.HORIZONTAL:this.orientation=je.VERTICAL}isDualAxes(){return this.dualAxes}determineAxisDuality(){var e,n,r,i;const o=this.model.getOptions(),s=y(o,"axes");(null!=(e=s[j.LEFT])&&e.correspondingDatasets&&s[j.RIGHT]||null!=(n=s[j.RIGHT])&&n.correspondingDatasets&&s[j.LEFT]||null!=(r=s[j.TOP])&&r.correspondingDatasets&&s[j.BOTTOM]||null!=(i=s[j.BOTTOM])&&i.correspondingDatasets&&s[j.TOP])&&(this.dualAxes=!0)}getCustomDomainValuesByposition(e){const n=y(this.model.getOptions(),"axes",e,"domain");if(n&&!Array.isArray(n))throw new Error(`Domain in ${e} axis is not a valid array`);if(Array.isArray(n)&&(this.scaleTypes[e]===ne.LINEAR||this.scaleTypes[e]===ne.TIME)&&2!==n.length)throw new Error(`There can only be 2 elements in domain for scale type: ${this.scaleTypes[e]}`);return n}getOrientation(){return this.orientation}getScaleByPosition(e){return this.scales[e]}getScaleTypeByPosition(e){return this.scaleTypes[e]}getDomainAxisScaleType(){const e=this.getDomainAxisPosition();return this.getScaleTypeByPosition(e)}getRangeAxisScaleType(){const e=this.getRangeAxisPosition();return this.getScaleTypeByPosition(e)}getDomainScale(){return this.scales[this.domainAxisPosition]}getRangeScale(){return this.scales[this.rangeAxisPosition]}getMainXAxisPosition(){const e=[j.BOTTOM,j.TOP];return[this.domainAxisPosition,this.rangeAxisPosition].find(n=>e.indexOf(n)>-1)}getMainYAxisPosition(){const e=[j.LEFT,j.RIGHT];return[this.domainAxisPosition,this.rangeAxisPosition].find(n=>e.indexOf(n)>-1)}getMainXScale(){return this.scales[this.getMainXAxisPosition()]}getMainYScale(){return this.scales[this.getMainYAxisPosition()]}getValueFromScale(e,n,r,i){const o=this.model.getOptions(),s=y(o,"axes")[r],{mapsTo:a}=s,l=null!==y(i,a)?i[a]:i;let c;switch(n){case ne.LABELS:c=e(l)+e.step()/2;break;case ne.TIME:c=e(new Date(l));break;default:c=e(l)}return c}getBoundedScaledValues(e){const{bounds:n}=this.model.getOptions(),r=this.getRangeAxisPosition({datum:e}),i=this.scales[r],o=this.model.getOptions(),s=y(o,"axes")[r],{mapsTo:a}=s,l=void 0!==e[a]?e[a]:e;return[i(null!==y(e,n.upperBoundMapsTo)?e[n.upperBoundMapsTo]:l),i(null!==y(e,n.lowerBoundMapsTo)?e[n.lowerBoundMapsTo]:l)]}getValueThroughAxisPosition(e,n){const r=this.scaleTypes[e],i=this.scales[e];return this.getValueFromScale(i,r,e,n)}getDomainValue(e){const n=this.getDomainAxisPosition({datum:e});return this.getValueThroughAxisPosition(n,e)}getRangeValue(e){const n=this.getRangeAxisPosition({datum:e});return this.getValueThroughAxisPosition(n,e)}getMainXScaleType(){return this.getScaleTypeByPosition(this.getMainXAxisPosition())}getMainYScaleType(){return this.getScaleTypeByPosition(this.getMainYAxisPosition())}getDomainIdentifier(e){const n=this.model.getOptions();return y(n,"axes",this.getDomainAxisPosition({datum:e}),"mapsTo")}getRangeIdentifier(e){const n=this.model.getOptions();return y(n,"axes",this.getRangeAxisPosition({datum:e}),"mapsTo")}extendsDomain(e,n){const r=this.model.getOptions(),i=y(r,"axes",e);if(i.scaleType===ne.TIME){return function IN(t,e){const n=new Date(t[0]),r=new Date(t[1]);return EN(r,n)>1?[SN(n,e),Kv(r,e)]:AN(r,n)>1?[kN(n,e),ed(r,e)]:function BN(t,e,n){const[r,i]=Jn(0,t,e),o=qv(r,i),s=Math.abs(ng(r,i));r.setDate(r.getDate()-o*s);const l=o*(s-+(qv(r,i)===-o));return 0===l?0:l}(r,n)>1?[RN(n,e),Yv(r,e)]:function DN(t,e,n){const[r,i]=Jn(0,t,e),o=(+r-+i)/Od;return td(n?.roundingMethod)(o)}(r,n)>1?[HN(n,e),Zv(r,e)]:Jv(r,n)>30?[e0(n,30*e),nd(r,30*e)]:Jv(r,n)>1?[e0(n,e),nd(r,e)]:t0(r,n)>15?[n0(n,15*e),rd(r,15*e)]:t0(r,n)>1?[n0(n,e),rd(r,e)]:[n,r]}(n,y(r,"timeScale","addSpaceOnEdges"))}return function NN([t,e],n,r){const i=(e-t)*n,o=e<=0&&e+i>0?0:e+i;let s=t>=0&&t-i<0?0:t-i;if(r===ne.LOG&&s<=0){if(t<=0)throw Error("Data must have values greater than 0 if log scale type is used.");s=t}return[s,o]}(n,Tn.paddingRatio,i.scaleType)}findVerticalAxesPositions(){const e=this.model.getOptions(),n=y(e,"axes"),r=this.isDualAxes();return null===y(n,j.LEFT)&&null!==y(n,j.RIGHT)||!0===y(n,j.RIGHT,"main")||r&&y(n,j.LEFT,"correspondingDatasets")?{primary:j.RIGHT,secondary:j.LEFT}:{primary:j.LEFT,secondary:j.RIGHT}}findHorizontalAxesPositions(){const e=this.model.getOptions(),n=y(e,"axes"),r=this.isDualAxes();return null===y(n,j.BOTTOM)&&null!==y(n,j.TOP)||!0===y(n,j.TOP,"main")||r&&y(n,j.BOTTOM,"correspondingDatasets")?{primary:j.TOP,secondary:j.BOTTOM}:{primary:j.BOTTOM,secondary:j.TOP}}findDomainAndRangeAxesPositions(e,n){const r=this.model.getOptions(),i=y(r,"axes",e.primary),o=y(r,"axes",n.primary),s=i.scaleType||ne.LINEAR,a=o.scaleType||ne.LINEAR,l={primaryDomainAxisPosition:null,secondaryDomainAxisPosition:null,primaryRangeAxisPosition:null,secondaryRangeAxisPosition:null};return l.primaryDomainAxisPosition=n.primary,l.primaryRangeAxisPosition=e.primary,l.secondaryDomainAxisPosition=n.secondary,l.secondaryRangeAxisPosition=e.secondary,(!(a===ne.LABELS||a===ne.TIME)&&s===ne.LABELS||s===ne.TIME)&&(l.primaryDomainAxisPosition=e.primary,l.primaryRangeAxisPosition=n.primary,l.secondaryDomainAxisPosition=e.secondary,l.secondaryRangeAxisPosition=n.secondary),l}getScaleDomain(e){const n=this.model.getOptions(),r=y(n,"axes",e),i=y(n,"bounds"),{includeZero:o}=r,s=y(r,"scaleType")||ne.LINEAR;if(this.model.isDataEmpty())return[];if(r.binned){const{bins:v}=this.model.getBinConfigurations();return[0,sr(v,C=>C.length)]}if(r.limitDomainToBins){const{bins:v}=this.model.getBinConfigurations(),C=this.model.getStackKeys({bins:v});return[C[0].split(":")[0],C[C.length-1].split(":")[1]]}const a=this.model.getDisplayData(),{extendLinearDomainBy:l,mapsTo:c,percentage:u,thresholds:d}=r,{reference:h,compareTo:p}=Tn.ratio;if(r.domain)return s===ne.LABELS?r.domain:(s===ne.TIME&&(r.domain=r.domain.map(v=>void 0===v.getTime?new Date(v):v)),this.extendsDomain(e,r.domain));if(u)return[0,100];if(r&&s===ne.LABELS)return Ui(a.map(v=>v[c]));let m,_;const f=this.model.getDataGroupNames();if(s===ne.LABELS_RATIO)return a.map(v=>`${v[h]}/${v[p]}`);if(s===ne.TIME)_=a.map(v=>+new Date(v[c]));else if(i&&n.axes)_=[],a.forEach(v=>{_.push(v[c]),v[i.upperBoundMapsTo]&&_.push(v[i.upperBoundMapsTo]),v[i.lowerBoundMapsTo]&&_.push(v[i.lowerBoundMapsTo])});else if(!0===r.stacked&&f&&e===this.getRangeAxisPosition()){const{groupMapsTo:v}=n.data,C=this.model.getDataValuesGroupedByKeys({groups:f}),x=a.filter(T=>!f.includes(T[v])),b=[];C.forEach(T=>{const{...S}=T;let M=0,D=0;Object.values(XI(S,"sharedStackKey")).forEach(k=>{isNaN(k)||(k<0?D+=k:M+=k)}),b.push([D,M])}),_=[...qh(b),...x.map(T=>T[c])]}else _=[],a.forEach(v=>{const C=v[c];Array.isArray(C)&&2===C.length?(_.push(C[0]),_.push(C[1])):(l&&_.push(Math.max(v[c],v[l])),_.push(C))});return s!==ne.TIME&&s!==ne.LOG&&o&&_.push(0),d&&d.length>0&&d.forEach(v=>{const C=y(v,"value");null!==C&&_.push(C)}),m=zt(_),m=this.extendsDomain(e,m),m}createScale(e){const n=this.model.getOptions(),r=y(n,"axes",e);if(!r)return null;const i=y(r,"scaleType")||ne.LINEAR;let o;return this.scaleTypes[e]=i,o=i===ne.TIME?Ng():i===ne.LOG?Rv().base(r.base||10):i===ne.LABELS||i===ne.LABELS_RATIO?so():Yt(),o.domain(this.getScaleDomain(e)),o}getDomainLowerBound(e){let n,r=0;return n=this.getOrientation()===je.VERTICAL?this.getMainYScale().domain():this.getMainXScale().domain(),!1===y(this.model.getOptions(),"axes",e,"includeZero")&&n[0]>0&&n[1]>0&&(r=n[0]),r}getHighestDomainThreshold(){const e=y(this.model.getOptions(),"axes"),n=this.getDomainAxisPosition(),{thresholds:r}=e[n];if(!Array.isArray(r)||Array.isArray(r)&&!r.length)return null;const i=this.getDomainScale(),o=r.sort((s,a)=>a.value-s.value)[0];return this.getScaleTypeByPosition(n)===ne.TIME&&("string"==typeof o.value||void 0===o.value.getTime)&&(o.value=new Date(o.value)),{threshold:o,scaleValue:i(o.value)}}getHighestRangeThreshold(){const e=y(this.model.getOptions(),"axes"),n=this.getRangeAxisPosition(),{thresholds:r}=e[n];if(!Array.isArray(r)||Array.isArray(r)&&!r.length)return null;const i=this.getRangeScale(),o=r.sort((s,a)=>a.value-s.value)[0];return{threshold:o,scaleValue:i(o.value)}}}class WN extends Mn{constructor(){super(...arguments),this.curveTypes={curveLinear:Ra,curveLinearClosed:jg,curveBasis:rN,curveBasisClosed:iN,curveBasisOpen:oN,curveBundle:sN,curveCardinal:aN,curveCardinalClosed:lN,curveCardinalOpen:cN,curveCatmullRom:uN,curveCatmullRomClosed:hN,curveCatmullRomOpen:dN,curveMonotoneX:pN,curveMonotoneY:mN,curveNatural:gN,curveStep:fN,curveStepAfter:vN,curveStepBefore:_N}}getD3Curve(){let e="curveLinear";const n=this.model.getOptions().curve;if(n&&(e="string"==typeof n?n:n.name),this.curveTypes[e]){let r=this.curveTypes[e];return n&&Object.keys(n).forEach(i=>{r[i]&&(r=r[i](n[i]))}),r}return console.warn(`The curve type '${e}' is invalid, using 'curveLinear' instead`),this.curveTypes.curveLinear}}class VN extends Mn{isZoomBarEnabled(){if(!this.services.cartesianScales||!y(this.model.getOptions(),"zoomBar","top","enabled"))return!1;this.services.cartesianScales.findDomainAndRangeAxes();const e=this.services.cartesianScales.getMainXAxisPosition(),n=y(this.model.getOptions(),"axes",e,"scaleType");return e===j.BOTTOM&&n===ne.TIME}getZoomBarData(){const e=this.model.getZoomBarData();return e&&e.length>1?e:this.model.getDisplayData()}getDefaultZoomBarDomain(e){if(!this.services.zoom)throw new Error("Services zoom not defined");const n=e||this.services.zoom.getZoomBarData(),{cartesianScales:r}=this.services;if(!r)throw new Error("Services cartesianScales undefined");const i=r.getMainXAxisPosition(),o=r.getDomainIdentifier(),s=y(this.model.getOptions(),"axes",i,"domain");if(Array.isArray(s)&&2===s.length)return s;if(!i)throw new Error("Not defined: mainXAxisPosition");return r.extendsDomain(i,zt(n,a=>a[o]))}handleDomainChange(e,n={dispatchEvent:!0}){var r;this.model.set({zoomDomain:e},{animate:!1}),n.dispatchEvent&&(null==(r=this.services.events)||r.dispatchEvent(O.ZoomDomain.CHANGE,{newDomain:e}))}getZoomRatio(){return y(this.model.getOptions(),"zoomBar","zoomRatio")}filterDataForRangeAxis(e,n){var r;const i=this.model.get("zoomDomain"),o=Object.assign({stacked:!1},n),s=y(this.model.getOptions(),"zoomBar","updateRangeAxis");if(this.isZoomBarEnabled()&&s&&i){const a=o.stacked?"sharedStackKey":null==(r=this.services.cartesianScales)?void 0:r.getDomainIdentifier(),l=e.filter(c=>new Date(c[a])>=i[0]&&new Date(c[a])<=i[1]);if(l.length>0)return l}return e}zoomIn(e=this.getZoomRatio()){var n;const r=this.model.get("zoomDomain"),i=gt.handleWidth,o=null==(n=this.services.cartesianScales)?void 0:n.getMainXScale().copy();o.domain(this.getDefaultZoomBarDomain());const s=o(r[0]),a=o(r[1]);if(a-s<i+1)return;const l=o.range(),c=a-s,u=Math.min((l[1]-l[0])/2*(e/2),c/2);let d=s+u,h=a-u;d>=h&&(d=s+c/2-i/2,h=a-c/2+i/2);const p=[o.invert(d),o.invert(h)];(r[0].valueOf()!==p[0].valueOf()||r[1].valueOf()!==p[1].valueOf())&&this.handleDomainChange(p)}zoomOut(e=this.getZoomRatio()){const n=this.model.get("zoomDomain");if(!this.services.cartesianScales)throw new Error("Services cartesianScales undefined");const r=this.services.cartesianScales.getMainXScale().copy();r.domain(this.getDefaultZoomBarDomain());const i=r(n[0]),o=r(n[1]),s=r.range(),a=(s[1]-s[0])/2*(e/2),l=Math.max(i-a,s[0]),c=Math.min(o+a,s[1]),u=[r.invert(l),r.invert(c)];(n[0].valueOf()!==u[0].valueOf()||n[1].valueOf()!==u[1].valueOf())&&this.handleDomainChange(u)}resetZoomDomain(){const e=this.model.get("zoomDomain"),n=this.getDefaultZoomBarDomain();(e[0].valueOf()!==n[0].valueOf()||e[1].valueOf()!==n[1].valueOf())&&this.handleDomainChange(n)}isMinZoomDomain(){const e=this.model.get("zoomDomain"),n=this.getDefaultZoomBarDomain();if(!e||!n)return!1;return(e[1].valueOf()-e[0].valueOf())/(n[1].valueOf()-n[0].valueOf())<y(this.model.getOptions(),"zoomBar","minZoomRatio")}isMaxZoomDomain(){const e=this.model.get("zoomDomain"),n=this.getDefaultZoomBarDomain();return!(!e||!n||e[0].valueOf()!==n[0].valueOf()||e[1].valueOf()!==n[1].valueOf())}isEmptyState(){return 0===this.getZoomBarData().length}isZoomBarLoading(e){return y(this.model.getOptions(),"zoomBar",e,"loading")}isZoomBarLocked(e){return y(this.model.getOptions(),"zoomBar",e,"locked")}}var YN=RegExp("[\\u200d\\ud800-\\udfff\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff\\ufe0e\\ufe0f]");function r0(t){return YN.test(t)}var i0="\\ud800-\\udfff",nW="["+i0+"]",id="[\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff]",od="\\ud83c[\\udffb-\\udfff]",o0="[^"+i0+"]",s0="(?:\\ud83c[\\udde6-\\uddff]){2}",a0="[\\ud800-\\udbff][\\udc00-\\udfff]",l0="(?:"+id+"|"+od+")"+"?",c0="[\\ufe0e\\ufe0f]?",sW=c0+l0+("(?:\\u200d(?:"+[o0,s0,a0].join("|")+")"+c0+l0+")*"),aW="(?:"+[o0+id+"?",id,s0,a0,nW].join("|")+")",lW=RegExp(od+"(?="+od+")|"+aW+sW,"g");function uW(t){return r0(t)?function cW(t){return t.match(lW)||[]}(t):function XN(t){return t.split("")}(t)}var dW=function hW(t){return function(e){var n=r0(e=Ni(e))?uW(e):void 0,r=n?n[0]:e.charAt(0),i=n?function PN(t,e,n){var r=t.length;return Mv(t,e,n=void 0===n?r:n)}(n,1).join(""):e.slice(1);return r[t]()+i}}("toUpperCase");var mW=Ef(function(t,e,n){return e=e.toLowerCase(),t+(n?function pW(t){return dW(Ni(t).toLowerCase())}(e):e)});class Qt{constructor(e,n){this.components=[],this.services={canvasZoom:yN,domUtils:I,events:CN,files:TN,gradientUtils:po,transitions:xN},this.model=new ln(this.services)}init(e,n){this.model.set({holder:e},{skipUpdate:!0}),Object.keys(this.services).forEach(r=>{const i=this.services[r];this.services[r]=new i(this.model,this.services)}),this.services.events.addEventListener(O.Model.UPDATE,r=>{const i=!!y(r,"detail","animate");this.update(i)}),this.model.setData(n.data),this.services.events.addEventListener(O.Chart.RESIZE,()=>{this.update(!1)}),this.components=this.getComponents(),this.update()}getComponents(){return console.error("getComponents() method is not implemented"),[]}update(e=!0){if(!this.components)return;Object.keys(this.services).forEach(i=>{this.services[i].update()}),this.components.forEach(i=>i.render(e));const n=this.services.transitions.getPendingTransitions(),r=Object.keys(n).map(i=>n[i].end().catch(o=>o));Promise.all(r).then(()=>this.services.events.dispatchEvent(O.Chart.RENDER_FINISHED))}destroy(){this.components.forEach(e=>e.destroy()),this.services.domUtils.getHolder().remove(),this.model.set({destroyed:!0},{skipUpdate:!0})}getChartComponents(e,n){const r=this.model.getOptions(),i=y(r,"toolbar","enabled"),o={id:"legend",components:[new Nh(this.model,this.services)],growth:ce.PREFERRED},s=y(r,"canvasZoom","enabled");s&&!0===s&&e.push(new ZR(this.model,this.services));const a=!!this.model.getOptions().title,l={id:"title",components:[new Ho(this.model,this.services)],growth:ce.STRETCH},c={id:"toolbar",components:[new gl(this.model,this.services)],growth:ce.PREFERRED},u={id:"header",components:[new Ot(this.model,this.services,[l,...i?[c]:[]],{direction:Fe.ROW,alignItems:Wn.CENTER})],growth:ce.PREFERRED},d={id:"graph-frame",components:e,growth:ce.STRETCH,renderType:y(n,"graphFrameRenderType")||re.SVG},h=!0!==y(n,"excludeLegend")&&!1!==r.legend.enabled;let p=Fe.COLUMN;if(h){const v=y(r,"legend","position");"left"===v?(p=Fe.ROW,r.legend.orientation||(r.legend.orientation=Zn.VERTICAL)):"right"===v?(p=Fe.ROW_REVERSE,r.legend.orientation||(r.legend.orientation=Zn.VERTICAL)):"bottom"===v&&(p=Fe.COLUMN_REVERSE)}const m={id:"spacer",components:[new Dn(this.model,this.services)],growth:ce.PREFERRED},_={id:"full-frame",components:[new Ot(this.model,this.services,[...h?[o]:[],...h?[m]:[],d],{direction:p})],growth:ce.STRETCH},f=[];if(a||i){f.push(u);const v={id:"spacer",components:[new Dn(this.model,this.services,i?{size:15}:void 0)],growth:ce.PREFERRED};f.push(v)}return f.push(_),[new Wh(this.model,this.services),new fl(this.model,this.services),new Ot(this.model,this.services,f,{direction:Fe.COLUMN})]}}class yt extends Qt{constructor(e,n){super(e,n),this.services=Object.assign(this.services,{cartesianScales:LN,curves:WN,zoom:VN}),this.model=new gr(this.services)}getAxisChartComponents(e,n){const r=this.model.getOptions(),i=y(r,"zoomBar",j.TOP,"enabled"),o=y(r,"toolbar","enabled");this.services.cartesianScales.determineAxisDuality(),this.services.cartesianScales.findDomainAndRangeAxes(),this.services.cartesianScales.determineOrientation();const s=this.services.cartesianScales.getMainXAxisPosition(),a=y(r,"axes",s,"scaleType"),l=i&&s===j.BOTTOM&&a===ne.TIME,c=this.services.zoom.isZoomBarLocked(j.TOP),u=!!this.model.getOptions().title,d={id:"title",components:[new Ho(this.model,this.services)],growth:ce.STRETCH},h={id:"toolbar",components:[new gl(this.model,this.services)],growth:ce.PREFERRED},p={id:"header",components:[new Ot(this.model,this.services,[d,...o?[h]:[]],{direction:Fe.ROW,alignItems:Wn.CENTER})],growth:ce.PREFERRED},m={id:"legend",components:[new Nh(this.model,this.services)],growth:ce.PREFERRED};l&&!c&&e.push(new Q_(this.model,this.services),new QR(this.model,this.services)),e.push(new eD(this.model,this.services)),e.push(new tD(this.model,this.services));const _={id:"graph-frame",components:e,growth:ce.STRETCH,renderType:re.SVG},f=!1!==y(n,"legend","enabled")&&!1!==this.model.getOptions().legend.enabled;let v=Fe.COLUMN;if(f){const S=y(this.model.getOptions(),"legend","position");S===Xn.LEFT?(v=Fe.ROW,this.model.getOptions().legend.orientation||(this.model.getOptions().legend.orientation=Zn.VERTICAL)):S===Xn.RIGHT?(v=Fe.ROW_REVERSE,this.model.getOptions().legend.orientation||(this.model.getOptions().legend.orientation=Zn.VERTICAL)):S===Xn.BOTTOM&&(v=Fe.COLUMN_REVERSE)}const C={id:"spacer",components:[new Dn(this.model,this.services)],growth:ce.PREFERRED},x={id:"full-frame",components:[new Ot(this.model,this.services,[...f?[m]:[],...f?[C]:[],_],{direction:v})],growth:ce.STRETCH},b={id:"zoom-bar",components:[new JR(this.model,this.services)],growth:ce.PREFERRED,renderType:re.SVG},T=[];if(u||o){T.push(p);const S={id:"spacer",components:[new Dn(this.model,this.services,o?{size:15}:void 0)],growth:ce.PREFERRED};T.push(S)}return l&&T.push(b),T.push(x),[new nv(this.model,this.services),new fl(this.model,this.services),new Ot(this.model,this.services,T,{direction:Fe.COLUMN})]}}class gW extends Qt{constructor(e,n){super(e,n),this.model=new dF(this.services),this.model.setOptions(Le(Me.alluvialChart,n.options)),this.init(e,n)}getComponents(){const e=[new TD(this.model,this.services)];return this.getChartComponents(e,{excludeLegend:!0})}}class fW extends yt{constructor(e,n){super(e,n),this.model.setOptions(Le(_n(Me.areaChart),n.options)),this.init(e,n)}getComponents(){const e=[new vt(this.model,this.services),new wt(this.model,this.services),new qn(this.model,this.services),new hi(this.model,this.services),new hv(this.model,this.services),new pn(this.model,this.services,{fadeInOnChartHolderMouseover:!0,handleThresholds:!0}),new dt(this.model,this.services,{skeleton:Ge.GRID})];return this.getAxisChartComponents(e)}}class _W extends yt{constructor(e,n){super(e,n),this.model=new pF(this.services),this.model.setOptions(Le(Me.boxplotChart,n.options)),this.init(e,n)}getComponents(){const e=[new vt(this.model,this.services),new wt(this.model,this.services),new ED(this.model,this.services),new di(this.model,this.services),new dt(this.model,this.services,{skeleton:Ge.VERT_OR_HORIZ})];return this.getAxisChartComponents(e,{legend:{enabled:!1}})}}class vW extends yt{constructor(e,n){super(e,n),this.model.setOptions(Le(Me.bubbleChart,n.options)),this.init(e,n)}getComponents(){const e=[new vt(this.model,this.services),new wt(this.model,this.services),new qn(this.model,this.services),new SD(this.model,this.services),new dt(this.model,this.services,{skeleton:Ge.GRID})];return this.getAxisChartComponents(e)}}class yW extends yt{constructor(e,n){super(e,n),this.model=new mF(this.services),this.model.setOptions(Le(Me.bulletChart,n.options)),this.init(e,n)}getComponents(){const e=[new vt(this.model,this.services),new wt(this.model,this.services),new OD(this.model,this.services),new dt(this.model,this.services,{skeleton:Ge.GRID})];return this.getAxisChartComponents(e)}}class u0 extends Qt{constructor(e,n){super(e,n),this.model=new gF(this.services),this.model.setOptions(Le(Me.choroplethChart,n.options)),this.init(e,n)}getChartComponents(e,n){const r=this.model.getOptions(),i=y(r,"toolbar","enabled"),o=!!this.model.getOptions().title,s={id:"title",components:[new Ho(this.model,this.services)],growth:ce.STRETCH},a={id:"toolbar",components:[new gl(this.model,this.services)],growth:ce.PREFERRED},l={id:"header",components:[new Ot(this.model,this.services,[s,...i?[a]:[]],{direction:Fe.ROW,alignItems:Wn.CENTER})],growth:ce.PREFERRED},c={id:"legend",components:[new gv(this.model,this.services,{chartType:"choropleth"})],growth:ce.PREFERRED,renderType:re.SVG},u={id:"graph-frame",components:e,growth:ce.STRETCH,renderType:re.SVG},d=!1!==y(n,"legend","enabled")&&!1!==this.model.getOptions().legend.enabled&&this.model.getData().length>0,h=Fe.COLUMN_REVERSE,p={id:"spacer",components:[new Dn(this.model,this.services,{size:15})],growth:ce.PREFERRED},m={id:"full-frame",components:[new Ot(this.model,this.services,[...d?[c]:[],...d?[p]:[],u],{direction:h})],growth:ce.STRETCH},_=[];if(o||i){_.push(l);const f={id:"spacer",components:[new Dn(this.model,this.services,i?{size:15}:void 0)],growth:ce.PREFERRED};_.push(f)}return _.push(m),[new Wh(this.model,this.services),new fl(this.model,this.services),new Ot(this.model,this.services,_,{direction:Fe.COLUMN})]}getComponents(){const e=[new UI(this.model,this.services)];return this.getChartComponents(e)}}class CW extends Qt{constructor(e,n){super(e,n),this.model=new fF(this.services),this.model.setOptions(Le(Me.circlePackChart,n.options)),this.init(e,n)}getComponents(){const e=[new $D(this.model,this.services)];return this.getChartComponents(e)}}const h0={[pt.LINE]:[hi,pn],[pt.SCATTER]:[pn],[pt.AREA]:[hv,hi,pn],[pt.STACKED_AREA]:[Tv,hi,bv,Cl],[pt.SIMPLE_BAR]:[Cv],[pt.GROUPED_BAR]:[yv,di],[pt.STACKED_BAR]:[xv,Cl]};class TW extends yt{constructor(e,n){super(e,n);const r=Le(Me.comboChart,n.options);n.options.comboChartTypes||(console.error("No comboChartTypes defined for the Combo Chart!"),r.comboChartTypes=[{type:pt.LINE,correspondingDatasets:[]}]),this.model.setOptions(r),this.init(e,n)}getGraphComponents(){const{comboChartTypes:e}=this.model.getOptions();let n=0;return qh(e.map(i=>{const o=i.type;let s;if("string"==typeof i.type){if(!Object.keys(h0).includes(i.type))return console.error(`Invalid chart type "${i.type}" specified for combo chart. Please refer to the ComboChart tutorial for more guidance.`),null;let a=!1;const l=`${mW(i.type)}Chart`;return s=se({},Me[l],this.model.getOptions(),i.options),i.type===pt.STACKED_AREA&&(a=!0),h0[i.type].map(c=>new c(this.model,this.services,{groups:i.correspondingDatasets,id:n++,options:s,stacked:a}))}return s=se({},this.model.getOptions(),i.options),new o(this.model,this.services,{groups:i.correspondingDatasets,id:n++,options:s})}).filter(i=>null!==i))}getComponents(){const{comboChartTypes:e}=this.model.getOptions(),n=e.some(i=>i.type===pt.STACKED_BAR||i.type===pt.STACKED_AREA),r=[new vt(this.model,this.services),new wt(this.model,this.services),new dt(this.model,this.services,{skeleton:Ge.GRID}),...n?[]:[new qn(this.model,this.services)],...this.getGraphComponents()];return this.getAxisChartComponents(r)}}class d0 extends Qt{constructor(e,n,r=!1){super(e,n),this.model=new _F(this.services),!r&&(this.model.setOptions(Le(Me.pieChart,n.options)),this.init(e,n))}getComponents(){const e=[new fv(this.model,this.services),new dt(this.model,this.services,{skeleton:Ge.PIE})];return this.getChartComponents(e)}}class xW extends d0{constructor(e,n){super(e,n,!0),this.model.setOptions(Le(Me.donutChart,n.options)),this.init(e,n)}getComponents(){const e=[new zD(this.model,this.services),new dt(this.model,this.services,{skeleton:Ge.DONUT})];return this.getChartComponents(e)}}class bW extends Qt{constructor(e,n){super(e,n),this.model=new vF(this.services),this.model.setOptions(Le(Me.gaugeChart,n.options)),this.init(e,n)}getComponents(){const e=[new KD(this.model,this.services)];return this.getChartComponents(e)}}class EW extends yt{constructor(e,n){super(e,n),this.model.setOptions(Le(Me.groupedBarChart,n.options)),this.init(e,n)}getComponents(){const e=[new vt(this.model,this.services),new wt(this.model,this.services),new yv(this.model,this.services),new di(this.model,this.services),new dt(this.model,this.services,{skeleton:Ge.VERT_OR_HORIZ})];return this.getAxisChartComponents(e)}}class SW extends yt{constructor(e,n){super(e,n),this.model=new yF(this.services),this.model.setOptions(Le(Me.heatmapChart,n.options)),this.init(e,n)}getAxisChartComponents(e,n){const r=this.model.getOptions(),i=y(r,"toolbar","enabled");this.services.cartesianScales.determineAxisDuality(),this.services.cartesianScales.findDomainAndRangeAxes(),this.services.cartesianScales.determineOrientation();const o=!!this.model.getOptions().title,s={id:"title",components:[new Ho(this.model,this.services)],growth:ce.STRETCH},a={id:"toolbar",components:[new gl(this.model,this.services)],growth:ce.PREFERRED},l={id:"header",components:[new Ot(this.model,this.services,[s,...i?[a]:[]],{direction:Fe.ROW,alignItems:Wn.CENTER})],growth:ce.PREFERRED},c={id:"legend",components:[new gv(this.model,this.services,{chartType:"heatmap"})],growth:ce.PREFERRED,renderType:re.SVG},u={id:"graph-frame",components:e,growth:ce.STRETCH,renderType:re.SVG},d=!1!==y(n,"legend","enabled")&&!1!==this.model.getOptions().legend.enabled&&this.model.getData().length>0,h=Fe.COLUMN_REVERSE,p={id:"spacer",components:[new Dn(this.model,this.services,{size:15})],growth:ce.PREFERRED},m={id:"full-frame",components:[new Ot(this.model,this.services,[...d?[c]:[],...d?[p]:[],u],{direction:h})],growth:ce.STRETCH},_=[];if(o||i){_.push(l);const f={id:"spacer",components:[new Dn(this.model,this.services,i?{size:15}:void 0)],growth:ce.PREFERRED};_.push(f)}return _.push(m),[new nv(this.model,this.services),new fl(this.model,this.services),new Ot(this.model,this.services,_,{direction:Fe.COLUMN})]}getComponents(){const e=[new vt(this.model,this.services),new qD(this.model,this.services)];return this.getAxisChartComponents(e)}}class OW extends yt{constructor(e,n){super(e,n),this.model=new CF(this.services),this.model.setOptions(Le(Me.histogramChart,n.options)),this.init(e,n),this.update()}getComponents(){const e=[new vt(this.model,this.services),new wt(this.model,this.services),new HD(this.model,this.services),new YD(this.model,this.services)];return this.getAxisChartComponents(e)}}class wW extends yt{constructor(e,n){super(e,n),this.model.setOptions(Le(Me.lineChart,n.options)),this.init(e,n)}getComponents(){const e=[new vt(this.model,this.services),new wt(this.model,this.services),new qn(this.model,this.services),new hi(this.model,this.services),new pn(this.model,this.services,{handleThresholds:!0}),new JD(this.model,this.services),new di(this.model,this.services)];return this.getAxisChartComponents(e)}}class FW extends yt{constructor(e,n){super(e,n),this.model.setOptions(Le(Me.lollipopChart,n.options)),this.init(e,n)}getComponents(){const e=[new vt(this.model,this.services),new wt(this.model,this.services),new qn(this.model,this.services),new XD(this.model,this.services),new pn(this.model,this.services),new dt(this.model,this.services,{skeleton:Ge.GRID})];return this.getAxisChartComponents(e)}}class MW extends Qt{constructor(e,n){var r;super(e,n),this.model=new TF(this.services);const i=null!=(r=n.options.meter)&&r.proportional?se(_n(Me.proportionalMeterChart),n.options):se(_n(Me.meterChart),n.options);this.model.setOptions(i),this.init(e,n)}getComponents(){const e=[...y(this.model.getOptions(),"meter","showLabels")?[{id:"meter-title",components:[new jD(this.model,this.services)],growth:ce.STRETCH,renderType:re.SVG},{id:"spacer",components:[new Dn(this.model,this.services,{size:8})],growth:ce.STRETCH}]:[],{id:"meter-graph",components:[new ZD(this.model,this.services)],growth:ce.STRETCH,renderType:re.SVG}],n=[new Ot(this.model,this.services,e,{direction:Fe.COLUMN})];return this.getChartComponents(n,{graphFrameRenderType:re.HTML})}}class AW extends Qt{constructor(e,n){super(e,n),this.model=new xF(this.services),this.model.setOptions(Le(Me.radarChart,n.options)),this.init(e,n)}getComponents(){const e=[new QD(this.model,this.services)];return this.getChartComponents(e)}}class kW extends yt{constructor(e,n){super(e,n),this.model.setOptions(Le(Me.scatterChart,n.options)),this.init(e,n)}getComponents(){const e=[new vt(this.model,this.services),new wt(this.model,this.services),new qn(this.model,this.services),new pn(this.model,this.services),new dt(this.model,this.services,{skeleton:Ge.GRID})];return this.getAxisChartComponents(e)}}class BW extends Qt{constructor(e,n){super(e,n),this.model=new bF(this.services),this.model.setOptions(Le(Me.treeChart,n.options)),this.init(e,n)}getComponents(){const e=[new eH(this.model,this.services)];return this.getChartComponents(e,{excludeLegend:!0})}}class RW extends Qt{constructor(e,n){super(e,n),this.model=new EF(this.services),this.model.setOptions(Le(Me.treemapChart,n.options)),this.init(e,n)}getComponents(){const e=[new MI(this.model,this.services)];return this.getChartComponents(e)}}class DW extends yt{constructor(e,n){super(e,n),this.model.setOptions(Le(Me.simpleBarChart,n.options)),this.init(e,n)}getComponents(){const e=[new vt(this.model,this.services),new wt(this.model,this.services),new Cv(this.model,this.services),new di(this.model,this.services),new dt(this.model,this.services,{skeleton:Ge.VERT_OR_HORIZ})];return this.getAxisChartComponents(e)}}class HW extends yt{constructor(e,n){super(e,n),this.model.setOptions(Le(Me.stackedAreaChart,n.options)),this.init(e,n)}getComponents(){const e=[new vt(this.model,this.services),new wt(this.model,this.services),new Cl(this.model,this.services),new Tv(this.model,this.services),new hi(this.model,this.services,{stacked:!0}),new bv(this.model,this.services,{fadeInOnChartHolderMouseover:!0,handleThresholds:!0,stacked:!0}),new dt(this.model,this.services,{skeleton:Ge.GRID})];return this.getAxisChartComponents(e)}}class LW extends yt{constructor(e,n){super(e,n),this.model.setOptions(Le(Me.stackedBarChart,n.options)),this.init(e,n)}getComponents(){const e=[new vt(this.model,this.services),new wt(this.model,this.services),new Cl(this.model,this.services),new xv(this.model,this.services),new dt(this.model,this.services,{skeleton:Ge.VERT_OR_HORIZ}),new di(this.model,this.services)];return this.getAxisChartComponents(e)}}class IW extends Qt{constructor(e,n){super(e,n),this.model=new SF(this.services),this.model.setOptions(Le(Me.wordCloudChart,n.options)),this.init(e,n)}getComponents(){const e=[new VI(this.model,this.services),new dt(this.model,this.services,{skeleton:Ge.PIE})];return this.getChartComponents(e)}}var le=Ei(91974);const Or=t=>({fill:t}),NW=(t,e)=>[t,e],WW=t=>({stroke:t}),No=["*"],sd=(t,e,n)=>[t,e,n],ad=(t,e)=>({"border-color":t,position:e});function VW(t,e){1&t&&g.\u0275\u0275elementContainer(0)}function PW(t,e){if(1&t){const n=g.\u0275\u0275getCurrentView();g.\u0275\u0275elementStart(0,"div",4),g.\u0275\u0275listener("mouseenter",function(i){g.\u0275\u0275restoreView(n);const o=g.\u0275\u0275nextContext();return g.\u0275\u0275resetView(o.mouseEnter.emit(i))})("mouseover",function(i){g.\u0275\u0275restoreView(n);const o=g.\u0275\u0275nextContext();return g.\u0275\u0275resetView(o.mouseOver.emit(i))})("mouseout",function(i){g.\u0275\u0275restoreView(n);const o=g.\u0275\u0275nextContext();return g.\u0275\u0275resetView(o.mouseOut.emit(i))})("mouseleave",function(i){g.\u0275\u0275restoreView(n);const o=g.\u0275\u0275nextContext();return g.\u0275\u0275resetView(o.mouseLeave.emit(i))})("mousemove",function(i){g.\u0275\u0275restoreView(n);const o=g.\u0275\u0275nextContext();return g.\u0275\u0275resetView(o.mouseMove.emit(i))}),g.\u0275\u0275template(1,VW,1,0,"ng-container",5),g.\u0275\u0275elementEnd()}if(2&t){const n=g.\u0275\u0275nextContext(),r=g.\u0275\u0275reference(5);g.\u0275\u0275property("ngClass",g.\u0275\u0275pureFunction3(3,sd,n.namespace,n.stacked?n.namespace+"--stacked":"",n.namespace+"--"+n.component))("ngStyle",g.\u0275\u0275pureFunction2(7,ad,n.color,n.position)),g.\u0275\u0275advance(),g.\u0275\u0275property("ngTemplateOutlet",r)}}function UW(t,e){1&t&&g.\u0275\u0275elementContainer(0)}function jW(t,e){if(1&t){const n=g.\u0275\u0275getCurrentView();g.\u0275\u0275elementStart(0,"button",6),g.\u0275\u0275listener("click",function(i){g.\u0275\u0275restoreView(n);const o=g.\u0275\u0275nextContext();return g.\u0275\u0275resetView(o.click.emit(i))})("mouseenter",function(i){g.\u0275\u0275restoreView(n);const o=g.\u0275\u0275nextContext();return g.\u0275\u0275resetView(o.mouseEnter.emit(i))})("mouseover",function(i){g.\u0275\u0275restoreView(n);const o=g.\u0275\u0275nextContext();return g.\u0275\u0275resetView(o.mouseOver.emit(i))})("mouseout",function(i){g.\u0275\u0275restoreView(n);const o=g.\u0275\u0275nextContext();return g.\u0275\u0275resetView(o.mouseOut.emit(i))})("mouseleave",function(i){g.\u0275\u0275restoreView(n);const o=g.\u0275\u0275nextContext();return g.\u0275\u0275resetView(o.mouseLeave.emit(i))})("mousemove",function(i){g.\u0275\u0275restoreView(n);const o=g.\u0275\u0275nextContext();return g.\u0275\u0275resetView(o.mouseMove.emit(i))}),g.\u0275\u0275template(1,UW,1,0,"ng-container",5),g.\u0275\u0275elementEnd()}if(2&t){const n=g.\u0275\u0275nextContext(),r=g.\u0275\u0275reference(5);g.\u0275\u0275property("ngClass",g.\u0275\u0275pureFunction3(3,sd,n.namespace,n.stacked?n.namespace+"--stacked":"",n.namespace+"--"+n.component))("ngStyle",g.\u0275\u0275pureFunction2(7,ad,n.color,n.position)),g.\u0275\u0275advance(),g.\u0275\u0275property("ngTemplateOutlet",r)}}function $W(t,e){1&t&&g.\u0275\u0275elementContainer(0)}function GW(t,e){if(1&t){const n=g.\u0275\u0275getCurrentView();g.\u0275\u0275elementStart(0,"a",4),g.\u0275\u0275listener("mouseenter",function(i){g.\u0275\u0275restoreView(n);const o=g.\u0275\u0275nextContext();return g.\u0275\u0275resetView(o.mouseEnter.emit(i))})("mouseover",function(i){g.\u0275\u0275restoreView(n);const o=g.\u0275\u0275nextContext();return g.\u0275\u0275resetView(o.mouseOver.emit(i))})("mouseout",function(i){g.\u0275\u0275restoreView(n);const o=g.\u0275\u0275nextContext();return g.\u0275\u0275resetView(o.mouseOut.emit(i))})("mouseleave",function(i){g.\u0275\u0275restoreView(n);const o=g.\u0275\u0275nextContext();return g.\u0275\u0275resetView(o.mouseLeave.emit(i))})("mousemove",function(i){g.\u0275\u0275restoreView(n);const o=g.\u0275\u0275nextContext();return g.\u0275\u0275resetView(o.mouseMove.emit(i))}),g.\u0275\u0275template(1,$W,1,0,"ng-container",5),g.\u0275\u0275elementEnd()}if(2&t){const n=g.\u0275\u0275nextContext(),r=g.\u0275\u0275reference(5);g.\u0275\u0275property("ngClass",g.\u0275\u0275pureFunction3(4,sd,n.namespace,n.stacked?n.namespace+"--stacked":"",n.namespace+"--"+n.component))("ngStyle",g.\u0275\u0275pureFunction2(8,ad,n.color,n.position)),g.\u0275\u0275attribute("href",n.href,g.\u0275\u0275sanitizeUrl),g.\u0275\u0275advance(),g.\u0275\u0275property("ngTemplateOutlet",r)}}function zW(t,e){1&t&&g.\u0275\u0275projection(0)}const ld=(t,e,n,r)=>[t,e,n,r],cd=(t,e,n)=>({"height.px":t,"width.px":e,position:n}),KW=t=>({position:t});function qW(t,e){1&t&&g.\u0275\u0275elementContainer(0)}function YW(t,e){if(1&t){const n=g.\u0275\u0275getCurrentView();g.\u0275\u0275elementStart(0,"div",4),g.\u0275\u0275listener("mouseenter",function(i){g.\u0275\u0275restoreView(n);const o=g.\u0275\u0275nextContext();return g.\u0275\u0275resetView(o.mouseEnter.emit(i))})("mouseover",function(i){g.\u0275\u0275restoreView(n);const o=g.\u0275\u0275nextContext();return g.\u0275\u0275resetView(o.mouseOver.emit(i))})("mouseout",function(i){g.\u0275\u0275restoreView(n);const o=g.\u0275\u0275nextContext();return g.\u0275\u0275resetView(o.mouseOut.emit(i))})("mouseleave",function(i){g.\u0275\u0275restoreView(n);const o=g.\u0275\u0275nextContext();return g.\u0275\u0275resetView(o.mouseLeave.emit(i))})("mousemove",function(i){g.\u0275\u0275restoreView(n);const o=g.\u0275\u0275nextContext();return g.\u0275\u0275resetView(o.mouseMove.emit(i))}),g.\u0275\u0275template(1,qW,1,0,"ng-container",5),g.\u0275\u0275elementEnd()}if(2&t){const n=g.\u0275\u0275nextContext(),r=g.\u0275\u0275reference(5);g.\u0275\u0275property("ngClass",g.\u0275\u0275pureFunction4(3,ld,n.namespace,n.stacked?n.namespace+"--stacked":"",n.shape?n.namespace+"--"+n.shape:"",n.namespace+"--"+n.component))("ngStyle",g.\u0275\u0275pureFunction3(8,cd,n.size,n.size,n.position)),g.\u0275\u0275advance(),g.\u0275\u0275property("ngTemplateOutlet",r)}}function XW(t,e){1&t&&g.\u0275\u0275elementContainer(0)}function ZW(t,e){if(1&t){const n=g.\u0275\u0275getCurrentView();g.\u0275\u0275elementStart(0,"button",6),g.\u0275\u0275listener("click",function(i){g.\u0275\u0275restoreView(n);const o=g.\u0275\u0275nextContext();return g.\u0275\u0275resetView(o.click.emit(i))})("mouseenter",function(i){g.\u0275\u0275restoreView(n);const o=g.\u0275\u0275nextContext();return g.\u0275\u0275resetView(o.mouseEnter.emit(i))})("mouseover",function(i){g.\u0275\u0275restoreView(n);const o=g.\u0275\u0275nextContext();return g.\u0275\u0275resetView(o.mouseOver.emit(i))})("mouseout",function(i){g.\u0275\u0275restoreView(n);const o=g.\u0275\u0275nextContext();return g.\u0275\u0275resetView(o.mouseOut.emit(i))})("mouseleave",function(i){g.\u0275\u0275restoreView(n);const o=g.\u0275\u0275nextContext();return g.\u0275\u0275resetView(o.mouseLeave.emit(i))})("mousemove",function(i){g.\u0275\u0275restoreView(n);const o=g.\u0275\u0275nextContext();return g.\u0275\u0275resetView(o.mouseMove.emit(i))}),g.\u0275\u0275template(1,XW,1,0,"ng-container",5),g.\u0275\u0275elementEnd()}if(2&t){const n=g.\u0275\u0275nextContext(),r=g.\u0275\u0275reference(5);g.\u0275\u0275property("ngClass",g.\u0275\u0275pureFunction4(3,ld,n.namespace,n.stacked?n.namespace+"--stacked":"",n.shape?n.namespace+"--"+n.shape:"",n.namespace+"--"+n.component))("ngStyle",g.\u0275\u0275pureFunction3(8,cd,n.size,n.size,n.position)),g.\u0275\u0275advance(),g.\u0275\u0275property("ngTemplateOutlet",r)}}function QW(t,e){1&t&&g.\u0275\u0275elementContainer(0)}function JW(t,e){if(1&t){const n=g.\u0275\u0275getCurrentView();g.\u0275\u0275elementStart(0,"a",4),g.\u0275\u0275listener("mouseenter",function(i){g.\u0275\u0275restoreView(n);const o=g.\u0275\u0275nextContext();return g.\u0275\u0275resetView(o.mouseEnter.emit(i))})("mouseover",function(i){g.\u0275\u0275restoreView(n);const o=g.\u0275\u0275nextContext();return g.\u0275\u0275resetView(o.mouseOver.emit(i))})("mouseout",function(i){g.\u0275\u0275restoreView(n);const o=g.\u0275\u0275nextContext();return g.\u0275\u0275resetView(o.mouseOut.emit(i))})("mouseleave",function(i){g.\u0275\u0275restoreView(n);const o=g.\u0275\u0275nextContext();return g.\u0275\u0275resetView(o.mouseLeave.emit(i))})("mousemove",function(i){g.\u0275\u0275restoreView(n);const o=g.\u0275\u0275nextContext();return g.\u0275\u0275resetView(o.mouseMove.emit(i))}),g.\u0275\u0275template(1,QW,1,0,"ng-container",5),g.\u0275\u0275elementEnd()}if(2&t){const n=g.\u0275\u0275nextContext(),r=g.\u0275\u0275reference(5);g.\u0275\u0275property("ngClass",g.\u0275\u0275pureFunction4(4,ld,n.namespace,n.stacked?n.namespace+"--stacked":"",n.shape?n.namespace+"--"+n.shape:"",n.namespace+"--"+n.component))("ngStyle",g.\u0275\u0275pureFunction3(9,cd,n.size,n.size,n.position)),g.\u0275\u0275attribute("href",n.href,g.\u0275\u0275sanitizeUrl),g.\u0275\u0275advance(),g.\u0275\u0275property("ngTemplateOutlet",r)}}function eV(t,e){1&t&&g.\u0275\u0275elementContainer(0)}function tV(t,e){if(1&t&&(g.\u0275\u0275elementStart(0,"div"),g.\u0275\u0275template(1,eV,1,0,"ng-container",5),g.\u0275\u0275elementEnd()),2&t){const n=g.\u0275\u0275nextContext(2);g.\u0275\u0275attribute("class",n.namespace+"__icon"),g.\u0275\u0275advance(),g.\u0275\u0275property("ngTemplateOutlet",n.renderIcon)}}function nV(t,e){if(1&t&&(g.\u0275\u0275template(0,tV,2,2,"div",7),g.\u0275\u0275elementStart(1,"div",8)(2,"div"),g.\u0275\u0275text(3),g.\u0275\u0275elementEnd(),g.\u0275\u0275elementStart(4,"div"),g.\u0275\u0275text(5),g.\u0275\u0275elementEnd()()),2&t){const n=g.\u0275\u0275nextContext();g.\u0275\u0275property("ngIf",n.renderIcon),g.\u0275\u0275advance(),g.\u0275\u0275property("ngStyle",g.\u0275\u0275pureFunction1(7,KW,n.bodyPosition)),g.\u0275\u0275attribute("class",n.namespace+"__body"),g.\u0275\u0275advance(),g.\u0275\u0275attribute("class",n.namespace+"__title"),g.\u0275\u0275advance(),g.\u0275\u0275textInterpolate(n.title),g.\u0275\u0275advance(),g.\u0275\u0275attribute("class",n.namespace+"__subtitle"),g.\u0275\u0275advance(),g.\u0275\u0275textInterpolate1(" ",n.subtitle," ")}}class xe{set data(e){const n=!!this._data;this._data=e,n&&this.chart?.model.setData(e)}get data(){return this._data}set options(e){const n=!!this._options;this._options=e,n&&this.chart?.model.setOptions(e)}get options(){return this._options}constructor(e){this.elementRef=e}ngOnInit(){this.width&&(this.options.width=this.width),this.height&&(this.options.height=this.height)}ngAfterViewInit(){console.log("Class that extended BaseChartComponent did not implement ngAfterViewInit().")}static{this.\u0275fac=function(n){return new(n||xe)(g.\u0275\u0275directiveInject(g.ElementRef))}}static{this.\u0275cmp=g.\u0275\u0275defineComponent({type:xe,selectors:[["ibm-base-chart"]],inputs:{data:"data",options:"options",width:"width",height:"height"},standalone:!0,features:[g.\u0275\u0275StandaloneFeature],decls:0,vars:0,template:function(n,r){},encapsulation:2})}}class Wo extends xe{ngAfterViewInit(){this.chart=new gW(this.elementRef.nativeElement,{data:this.data,options:this.options}),Object.assign(this,this.chart)}static{this.\u0275fac=(()=>{let e;return function(r){return(e||(e=g.\u0275\u0275getInheritedFactory(Wo)))(r||Wo)}})()}static{this.\u0275cmp=g.\u0275\u0275defineComponent({type:Wo,selectors:[["ibm-alluvial-chart"]],standalone:!0,features:[g.\u0275\u0275InheritDefinitionFeature,g.\u0275\u0275StandaloneFeature],decls:0,vars:0,template:function(n,r){},encapsulation:2})}}class Vo extends xe{ngAfterViewInit(){this.chart=new fW(this.elementRef.nativeElement,{data:this.data,options:this.options}),Object.assign(this,this.chart)}static{this.\u0275fac=(()=>{let e;return function(r){return(e||(e=g.\u0275\u0275getInheritedFactory(Vo)))(r||Vo)}})()}static{this.\u0275cmp=g.\u0275\u0275defineComponent({type:Vo,selectors:[["ibm-area-chart"]],standalone:!0,features:[g.\u0275\u0275InheritDefinitionFeature,g.\u0275\u0275StandaloneFeature],decls:0,vars:0,template:function(n,r){},encapsulation:2})}}class Po extends xe{ngAfterViewInit(){this.chart=new _W(this.elementRef.nativeElement,{data:this.data,options:this.options}),Object.assign(this,this.chart)}static{this.\u0275fac=(()=>{let e;return function(r){return(e||(e=g.\u0275\u0275getInheritedFactory(Po)))(r||Po)}})()}static{this.\u0275cmp=g.\u0275\u0275defineComponent({type:Po,selectors:[["ibm-boxplot-chart"]],standalone:!0,features:[g.\u0275\u0275InheritDefinitionFeature,g.\u0275\u0275StandaloneFeature],decls:0,vars:0,template:function(n,r){},encapsulation:2})}}class Uo extends xe{ngAfterViewInit(){this.chart=new vW(this.elementRef.nativeElement,{data:this.data,options:this.options}),Object.assign(this,this.chart)}static{this.\u0275fac=(()=>{let e;return function(r){return(e||(e=g.\u0275\u0275getInheritedFactory(Uo)))(r||Uo)}})()}static{this.\u0275cmp=g.\u0275\u0275defineComponent({type:Uo,selectors:[["ibm-bubble-chart"]],standalone:!0,features:[g.\u0275\u0275InheritDefinitionFeature,g.\u0275\u0275StandaloneFeature],decls:0,vars:0,template:function(n,r){},encapsulation:2})}}class jo extends xe{ngAfterViewInit(){this.chart=new yW(this.elementRef.nativeElement,{data:this.data,options:this.options}),Object.assign(this,this.chart)}static{this.\u0275fac=(()=>{let e;return function(r){return(e||(e=g.\u0275\u0275getInheritedFactory(jo)))(r||jo)}})()}static{this.\u0275cmp=g.\u0275\u0275defineComponent({type:jo,selectors:[["ibm-bullet-chart"]],standalone:!0,features:[g.\u0275\u0275InheritDefinitionFeature,g.\u0275\u0275StandaloneFeature],decls:0,vars:0,template:function(n,r){},encapsulation:2})}}class $o extends xe{ngAfterViewInit(){this.chart=new CW(this.elementRef.nativeElement,{data:this.data,options:this.options}),Object.assign(this,this.chart)}static{this.\u0275fac=(()=>{let e;return function(r){return(e||(e=g.\u0275\u0275getInheritedFactory($o)))(r||$o)}})()}static{this.\u0275cmp=g.\u0275\u0275defineComponent({type:$o,selectors:[["ibm-circle-pack-chart"]],standalone:!0,features:[g.\u0275\u0275InheritDefinitionFeature,g.\u0275\u0275StandaloneFeature],decls:0,vars:0,template:function(n,r){},encapsulation:2})}}class Go extends xe{ngAfterViewInit(){this.chart=new TW(this.elementRef.nativeElement,{data:this.data,options:this.options}),Object.assign(this,this.chart)}static{this.\u0275fac=(()=>{let e;return function(r){return(e||(e=g.\u0275\u0275getInheritedFactory(Go)))(r||Go)}})()}static{this.\u0275cmp=g.\u0275\u0275defineComponent({type:Go,selectors:[["ibm-combo-chart"]],standalone:!0,features:[g.\u0275\u0275InheritDefinitionFeature,g.\u0275\u0275StandaloneFeature],decls:0,vars:0,template:function(n,r){},encapsulation:2})}}class zo extends xe{ngAfterViewInit(){this.chart=new xW(this.elementRef.nativeElement,{data:this.data,options:this.options}),Object.assign(this,this.chart)}static{this.\u0275fac=(()=>{let e;return function(r){return(e||(e=g.\u0275\u0275getInheritedFactory(zo)))(r||zo)}})()}static{this.\u0275cmp=g.\u0275\u0275defineComponent({type:zo,selectors:[["ibm-donut-chart"]],standalone:!0,features:[g.\u0275\u0275InheritDefinitionFeature,g.\u0275\u0275StandaloneFeature],decls:0,vars:0,template:function(n,r){},encapsulation:2})}}class Ko extends xe{ngAfterViewInit(){this.chart=new u0(this.elementRef.nativeElement,{data:this.data,options:this.options}),Object.assign(this,this.chart)}static{this.\u0275fac=(()=>{let e;return function(r){return(e||(e=g.\u0275\u0275getInheritedFactory(Ko)))(r||Ko)}})()}static{this.\u0275cmp=g.\u0275\u0275defineComponent({type:Ko,selectors:[["ibm-choropleth-chart"]],standalone:!0,features:[g.\u0275\u0275InheritDefinitionFeature,g.\u0275\u0275StandaloneFeature],decls:0,vars:0,template:function(n,r){},encapsulation:2})}}class qo extends xe{ngAfterViewInit(){this.chart=new u0(this.elementRef.nativeElement,{data:this.data,options:this.options}),Object.assign(this,this.chart)}static{this.\u0275fac=(()=>{let e;return function(r){return(e||(e=g.\u0275\u0275getInheritedFactory(qo)))(r||qo)}})()}static{this.\u0275cmp=g.\u0275\u0275defineComponent({type:qo,selectors:[["ibm-experimental-choropleth-chart"]],standalone:!0,features:[g.\u0275\u0275InheritDefinitionFeature,g.\u0275\u0275StandaloneFeature],decls:0,vars:0,template:function(n,r){},encapsulation:2})}}class Yo extends xe{ngAfterViewInit(){this.chart=new bW(this.elementRef.nativeElement,{data:this.data,options:this.options}),Object.assign(this,this.chart)}static{this.\u0275fac=(()=>{let e;return function(r){return(e||(e=g.\u0275\u0275getInheritedFactory(Yo)))(r||Yo)}})()}static{this.\u0275cmp=g.\u0275\u0275defineComponent({type:Yo,selectors:[["ibm-gauge-chart"]],standalone:!0,features:[g.\u0275\u0275InheritDefinitionFeature,g.\u0275\u0275StandaloneFeature],decls:0,vars:0,template:function(n,r){},encapsulation:2})}}class Xo extends xe{ngAfterViewInit(){this.chart=new EW(this.elementRef.nativeElement,{data:this.data,options:this.options}),Object.assign(this,this.chart)}static{this.\u0275fac=(()=>{let e;return function(r){return(e||(e=g.\u0275\u0275getInheritedFactory(Xo)))(r||Xo)}})()}static{this.\u0275cmp=g.\u0275\u0275defineComponent({type:Xo,selectors:[["ibm-grouped-bar-chart"]],standalone:!0,features:[g.\u0275\u0275InheritDefinitionFeature,g.\u0275\u0275StandaloneFeature],decls:0,vars:0,template:function(n,r){},encapsulation:2})}}class Zo extends xe{ngAfterViewInit(){this.chart=new SW(this.elementRef.nativeElement,{data:this.data,options:this.options}),Object.assign(this,this.chart)}static{this.\u0275fac=(()=>{let e;return function(r){return(e||(e=g.\u0275\u0275getInheritedFactory(Zo)))(r||Zo)}})()}static{this.\u0275cmp=g.\u0275\u0275defineComponent({type:Zo,selectors:[["ibm-heatmap-chart"]],standalone:!0,features:[g.\u0275\u0275InheritDefinitionFeature,g.\u0275\u0275StandaloneFeature],decls:0,vars:0,template:function(n,r){},encapsulation:2})}}class Qo extends xe{ngAfterViewInit(){this.chart=new OW(this.elementRef.nativeElement,{data:this.data,options:this.options}),Object.assign(this,this.chart)}static{this.\u0275fac=(()=>{let e;return function(r){return(e||(e=g.\u0275\u0275getInheritedFactory(Qo)))(r||Qo)}})()}static{this.\u0275cmp=g.\u0275\u0275defineComponent({type:Qo,selectors:[["ibm-histogram-chart"]],standalone:!0,features:[g.\u0275\u0275InheritDefinitionFeature,g.\u0275\u0275StandaloneFeature],decls:0,vars:0,template:function(n,r){},encapsulation:2})}}class Jo extends xe{ngAfterViewInit(){this.chart=new wW(this.elementRef.nativeElement,{data:this.data,options:this.options}),Object.assign(this,this.chart)}static{this.\u0275fac=(()=>{let e;return function(r){return(e||(e=g.\u0275\u0275getInheritedFactory(Jo)))(r||Jo)}})()}static{this.\u0275cmp=g.\u0275\u0275defineComponent({type:Jo,selectors:[["ibm-line-chart"]],standalone:!0,features:[g.\u0275\u0275InheritDefinitionFeature,g.\u0275\u0275StandaloneFeature],decls:0,vars:0,template:function(n,r){},encapsulation:2})}}class es extends xe{ngAfterViewInit(){this.chart=new FW(this.elementRef.nativeElement,{data:this.data,options:this.options}),Object.assign(this,this.chart)}static{this.\u0275fac=(()=>{let e;return function(r){return(e||(e=g.\u0275\u0275getInheritedFactory(es)))(r||es)}})()}static{this.\u0275cmp=g.\u0275\u0275defineComponent({type:es,selectors:[["ibm-lollipop-chart"]],standalone:!0,features:[g.\u0275\u0275InheritDefinitionFeature,g.\u0275\u0275StandaloneFeature],decls:0,vars:0,template:function(n,r){},encapsulation:2})}}class ts extends xe{ngAfterViewInit(){this.chart=new MW(this.elementRef.nativeElement,{data:this.data,options:this.options}),Object.assign(this,this.chart)}static{this.\u0275fac=(()=>{let e;return function(r){return(e||(e=g.\u0275\u0275getInheritedFactory(ts)))(r||ts)}})()}static{this.\u0275cmp=g.\u0275\u0275defineComponent({type:ts,selectors:[["ibm-meter-chart"]],standalone:!0,features:[g.\u0275\u0275InheritDefinitionFeature,g.\u0275\u0275StandaloneFeature],decls:0,vars:0,template:function(n,r){},encapsulation:2})}}class ns extends xe{ngAfterViewInit(){this.chart=new d0(this.elementRef.nativeElement,{data:this.data,options:this.options}),Object.assign(this,this.chart)}static{this.\u0275fac=(()=>{let e;return function(r){return(e||(e=g.\u0275\u0275getInheritedFactory(ns)))(r||ns)}})()}static{this.\u0275cmp=g.\u0275\u0275defineComponent({type:ns,selectors:[["ibm-pie-chart"]],standalone:!0,features:[g.\u0275\u0275InheritDefinitionFeature,g.\u0275\u0275StandaloneFeature],decls:0,vars:0,template:function(n,r){},encapsulation:2})}}class rs extends xe{ngAfterViewInit(){this.chart=new AW(this.elementRef.nativeElement,{data:this.data,options:this.options}),Object.assign(this,this.chart)}static{this.\u0275fac=(()=>{let e;return function(r){return(e||(e=g.\u0275\u0275getInheritedFactory(rs)))(r||rs)}})()}static{this.\u0275cmp=g.\u0275\u0275defineComponent({type:rs,selectors:[["ibm-radar-chart"]],standalone:!0,features:[g.\u0275\u0275InheritDefinitionFeature,g.\u0275\u0275StandaloneFeature],decls:0,vars:0,template:function(n,r){},encapsulation:2})}}class is extends xe{ngAfterViewInit(){this.chart=new kW(this.elementRef.nativeElement,{data:this.data,options:this.options}),Object.assign(this,this.chart)}static{this.\u0275fac=(()=>{let e;return function(r){return(e||(e=g.\u0275\u0275getInheritedFactory(is)))(r||is)}})()}static{this.\u0275cmp=g.\u0275\u0275defineComponent({type:is,selectors:[["ibm-scatter-chart"]],standalone:!0,features:[g.\u0275\u0275InheritDefinitionFeature,g.\u0275\u0275StandaloneFeature],decls:0,vars:0,template:function(n,r){},encapsulation:2})}}class os extends xe{ngAfterViewInit(){this.chart=new DW(this.elementRef.nativeElement,{data:this.data,options:this.options}),Object.assign(this,this.chart)}static{this.\u0275fac=(()=>{let e;return function(r){return(e||(e=g.\u0275\u0275getInheritedFactory(os)))(r||os)}})()}static{this.\u0275cmp=g.\u0275\u0275defineComponent({type:os,selectors:[["ibm-simple-bar-chart"]],standalone:!0,features:[g.\u0275\u0275InheritDefinitionFeature,g.\u0275\u0275StandaloneFeature],decls:0,vars:0,template:function(n,r){},encapsulation:2})}}class ss extends xe{ngAfterViewInit(){this.chart=new HW(this.elementRef.nativeElement,{data:this.data,options:this.options}),Object.assign(this,this.chart)}static{this.\u0275fac=(()=>{let e;return function(r){return(e||(e=g.\u0275\u0275getInheritedFactory(ss)))(r||ss)}})()}static{this.\u0275cmp=g.\u0275\u0275defineComponent({type:ss,selectors:[["ibm-stacked-area-chart"]],standalone:!0,features:[g.\u0275\u0275InheritDefinitionFeature,g.\u0275\u0275StandaloneFeature],decls:0,vars:0,template:function(n,r){},encapsulation:2})}}class as extends xe{ngAfterViewInit(){this.chart=new LW(this.elementRef.nativeElement,{data:this.data,options:this.options}),Object.assign(this,this.chart)}static{this.\u0275fac=(()=>{let e;return function(r){return(e||(e=g.\u0275\u0275getInheritedFactory(as)))(r||as)}})()}static{this.\u0275cmp=g.\u0275\u0275defineComponent({type:as,selectors:[["ibm-stacked-bar-chart"]],standalone:!0,features:[g.\u0275\u0275InheritDefinitionFeature,g.\u0275\u0275StandaloneFeature],decls:0,vars:0,template:function(n,r){},encapsulation:2})}}class ls extends xe{ngAfterViewInit(){this.chart=new BW(this.elementRef.nativeElement,{data:this.data,options:this.options}),Object.assign(this,this.chart)}static{this.\u0275fac=(()=>{let e;return function(r){return(e||(e=g.\u0275\u0275getInheritedFactory(ls)))(r||ls)}})()}static{this.\u0275cmp=g.\u0275\u0275defineComponent({type:ls,selectors:[["ibm-tree-chart"]],standalone:!0,features:[g.\u0275\u0275InheritDefinitionFeature,g.\u0275\u0275StandaloneFeature],decls:0,vars:0,template:function(n,r){},encapsulation:2})}}class cs extends xe{ngAfterViewInit(){this.chart=new RW(this.elementRef.nativeElement,{data:this.data,options:this.options}),Object.assign(this,this.chart)}static{this.\u0275fac=(()=>{let e;return function(r){return(e||(e=g.\u0275\u0275getInheritedFactory(cs)))(r||cs)}})()}static{this.\u0275cmp=g.\u0275\u0275defineComponent({type:cs,selectors:[["ibm-treemap-chart"]],standalone:!0,features:[g.\u0275\u0275InheritDefinitionFeature,g.\u0275\u0275StandaloneFeature],decls:0,vars:0,template:function(n,r){},encapsulation:2})}}class us extends xe{ngAfterViewInit(){this.chart=new IW(this.elementRef.nativeElement,{data:this.data,options:this.options}),Object.assign(this,this.chart)}static{this.\u0275fac=(()=>{let e;return function(r){return(e||(e=g.\u0275\u0275getInheritedFactory(us)))(r||us)}})()}static{this.\u0275cmp=g.\u0275\u0275defineComponent({type:us,selectors:[["ibm-wordcloud-chart"]],standalone:!0,features:[g.\u0275\u0275InheritDefinitionFeature,g.\u0275\u0275StandaloneFeature],decls:0,vars:0,template:function(n,r){},encapsulation:2})}}class wl{static{this.\u0275fac=function(n){return new(n||wl)}}static{this.\u0275mod=g.\u0275\u0275defineNgModule({type:wl})}static{this.\u0275inj=g.\u0275\u0275defineInjector({})}}const Hn="cds";class Jt{constructor(){this.d="",this.color="",this.id="",this.orient="auto",this.height="",this.width="",this.refX="",this.refY="",this.position="end",this.namespace=`${Hn}--cc--marker`,this.setAttributes=({d:e,id:n,height:r,width:i})=>{const o="end"===this.position?i/2+.5:.5,s=r/2;this.d=this.d||e,this.id=this.id||n,this.height=this.height||r,this.width=this.width||i,this.refX=this.refX||o,this.refY=this.refY||s}}static{this.\u0275fac=function(n){return new(n||Jt)}}static{this.\u0275cmp=g.\u0275\u0275defineComponent({type:Jt,selectors:[["ibm-graph-marker"],["","ibm-graph-marker",""]],inputs:{d:"d",color:"color",id:"id",orient:"orient",height:"height",width:"width",refX:"refX",refY:"refY",position:"position"},standalone:!0,features:[g.\u0275\u0275StandaloneFeature],decls:2,vars:11,consts:[["markerUnits","userSpaceOnUse",3,"ngClass"],[3,"ngStyle"]],template:function(n,r){1&n&&(g.\u0275\u0275namespaceSVG(),g.\u0275\u0275elementStart(0,"marker",0),g.\u0275\u0275element(1,"path",1),g.\u0275\u0275elementEnd()),2&n&&(g.\u0275\u0275property("ngClass",r.namespace),g.\u0275\u0275attribute("markerHeight",r.height)("markerWidth",r.width)("orient",r.orient)("id",r.id)("refX",r.refX)("refY",r.refY),g.\u0275\u0275advance(),g.\u0275\u0275property("ngStyle",g.\u0275\u0275pureFunction1(9,Or,r.color)),g.\u0275\u0275attribute("d",r.d))},dependencies:[le.CommonModule,le.NgClass,le.NgStyle],encapsulation:2})}}class pi extends Jt{ngOnInit(){this.setAttributes({...ID})}static{this.\u0275fac=(()=>{let e;return function(r){return(e||(e=g.\u0275\u0275getInheritedFactory(pi)))(r||pi)}})()}static{this.\u0275cmp=g.\u0275\u0275defineComponent({type:pi,selectors:[["ibm-graph-marker-arrow-left"],["","ibm-graph-marker-arrow-left",""]],standalone:!0,features:[g.\u0275\u0275InheritDefinitionFeature,g.\u0275\u0275StandaloneFeature],decls:2,vars:11,consts:[["markerUnits","userSpaceOnUse",3,"ngClass"],[3,"ngStyle"]],template:function(n,r){1&n&&(g.\u0275\u0275namespaceSVG(),g.\u0275\u0275elementStart(0,"marker",0),g.\u0275\u0275element(1,"path",1),g.\u0275\u0275elementEnd()),2&n&&(g.\u0275\u0275property("ngClass",r.namespace),g.\u0275\u0275attribute("markerHeight",r.height)("markerWidth",r.width)("orient",r.orient)("id",r.id)("refX",r.refX)("refY",r.refY),g.\u0275\u0275advance(),g.\u0275\u0275property("ngStyle",g.\u0275\u0275pureFunction1(9,Or,r.color)),g.\u0275\u0275attribute("d",r.d))},dependencies:[le.CommonModule,le.NgClass,le.NgStyle],encapsulation:2})}}class mi extends Jt{ngOnInit(){this.setAttributes({...ND})}static{this.\u0275fac=(()=>{let e;return function(r){return(e||(e=g.\u0275\u0275getInheritedFactory(mi)))(r||mi)}})()}static{this.\u0275cmp=g.\u0275\u0275defineComponent({type:mi,selectors:[["ibm-graph-marker-arrow-right"],["","ibm-graph-marker-arrow-right",""]],standalone:!0,features:[g.\u0275\u0275InheritDefinitionFeature,g.\u0275\u0275StandaloneFeature],decls:2,vars:11,consts:[["markerUnits","userSpaceOnUse",3,"ngClass"],[3,"ngStyle"]],template:function(n,r){1&n&&(g.\u0275\u0275namespaceSVG(),g.\u0275\u0275elementStart(0,"marker",0),g.\u0275\u0275element(1,"path",1),g.\u0275\u0275elementEnd()),2&n&&(g.\u0275\u0275property("ngClass",r.namespace),g.\u0275\u0275attribute("markerHeight",r.height)("markerWidth",r.width)("orient",r.orient)("id",r.id)("refX",r.refX)("refY",r.refY),g.\u0275\u0275advance(),g.\u0275\u0275property("ngStyle",g.\u0275\u0275pureFunction1(9,Or,r.color)),g.\u0275\u0275attribute("d",r.d))},dependencies:[le.CommonModule,le.NgClass,le.NgStyle],encapsulation:2})}}class gi extends Jt{ngOnInit(){this.setAttributes({...WD})}static{this.\u0275fac=(()=>{let e;return function(r){return(e||(e=g.\u0275\u0275getInheritedFactory(gi)))(r||gi)}})()}static{this.\u0275cmp=g.\u0275\u0275defineComponent({type:gi,selectors:[["ibm-graph-marker-circle"],["","ibm-graph-marker-circle",""]],standalone:!0,features:[g.\u0275\u0275InheritDefinitionFeature,g.\u0275\u0275StandaloneFeature],decls:2,vars:11,consts:[["markerUnits","userSpaceOnUse",3,"ngClass"],[3,"ngStyle"]],template:function(n,r){1&n&&(g.\u0275\u0275namespaceSVG(),g.\u0275\u0275elementStart(0,"marker",0),g.\u0275\u0275element(1,"path",1),g.\u0275\u0275elementEnd()),2&n&&(g.\u0275\u0275property("ngClass",r.namespace),g.\u0275\u0275attribute("markerHeight",r.height)("markerWidth",r.width)("orient",r.orient)("id",r.id)("refX",r.refX)("refY",r.refY),g.\u0275\u0275advance(),g.\u0275\u0275property("ngStyle",g.\u0275\u0275pureFunction1(9,Or,r.color)),g.\u0275\u0275attribute("d",r.d))},dependencies:[le.CommonModule,le.NgClass,le.NgStyle],encapsulation:2})}}class fi extends Jt{ngOnInit(){this.setAttributes({...VD})}static{this.\u0275fac=(()=>{let e;return function(r){return(e||(e=g.\u0275\u0275getInheritedFactory(fi)))(r||fi)}})()}static{this.\u0275cmp=g.\u0275\u0275defineComponent({type:fi,selectors:[["ibm-graph-marker-diamond"],["","ibm-graph-marker-diamond",""]],standalone:!0,features:[g.\u0275\u0275InheritDefinitionFeature,g.\u0275\u0275StandaloneFeature],decls:2,vars:11,consts:[["markerUnits","userSpaceOnUse",3,"ngClass"],[3,"ngStyle"]],template:function(n,r){1&n&&(g.\u0275\u0275namespaceSVG(),g.\u0275\u0275elementStart(0,"marker",0),g.\u0275\u0275element(1,"path",1),g.\u0275\u0275elementEnd()),2&n&&(g.\u0275\u0275property("ngClass",r.namespace),g.\u0275\u0275attribute("markerHeight",r.height)("markerWidth",r.width)("orient",r.orient)("id",r.id)("refX",r.refX)("refY",r.refY),g.\u0275\u0275advance(),g.\u0275\u0275property("ngStyle",g.\u0275\u0275pureFunction1(9,Or,r.color)),g.\u0275\u0275attribute("d",r.d))},dependencies:[le.CommonModule,le.NgClass,le.NgStyle],encapsulation:2})}}class _i extends Jt{ngOnInit(){this.setAttributes({...PD})}static{this.\u0275fac=(()=>{let e;return function(r){return(e||(e=g.\u0275\u0275getInheritedFactory(_i)))(r||_i)}})()}static{this.\u0275cmp=g.\u0275\u0275defineComponent({type:_i,selectors:[["ibm-graph-marker-square"],["","ibm-graph-marker-square",""]],standalone:!0,features:[g.\u0275\u0275InheritDefinitionFeature,g.\u0275\u0275StandaloneFeature],decls:2,vars:11,consts:[["markerUnits","userSpaceOnUse",3,"ngClass"],[3,"ngStyle"]],template:function(n,r){1&n&&(g.\u0275\u0275namespaceSVG(),g.\u0275\u0275elementStart(0,"marker",0),g.\u0275\u0275element(1,"path",1),g.\u0275\u0275elementEnd()),2&n&&(g.\u0275\u0275property("ngClass",r.namespace),g.\u0275\u0275attribute("markerHeight",r.height)("markerWidth",r.width)("orient",r.orient)("id",r.id)("refX",r.refX)("refY",r.refY),g.\u0275\u0275advance(),g.\u0275\u0275property("ngStyle",g.\u0275\u0275pureFunction1(9,Or,r.color)),g.\u0275\u0275attribute("d",r.d))},dependencies:[le.CommonModule,le.NgClass,le.NgStyle],encapsulation:2})}}class vi extends Jt{ngOnInit(){this.setAttributes({...UD})}static{this.\u0275fac=(()=>{let e;return function(r){return(e||(e=g.\u0275\u0275getInheritedFactory(vi)))(r||vi)}})()}static{this.\u0275cmp=g.\u0275\u0275defineComponent({type:vi,selectors:[["ibm-graph-marker-tee"],["","ibm-graph-marker-tee",""]],standalone:!0,features:[g.\u0275\u0275InheritDefinitionFeature,g.\u0275\u0275StandaloneFeature],decls:2,vars:11,consts:[["markerUnits","userSpaceOnUse",3,"ngClass"],[3,"ngStyle"]],template:function(n,r){1&n&&(g.\u0275\u0275namespaceSVG(),g.\u0275\u0275elementStart(0,"marker",0),g.\u0275\u0275element(1,"path",1),g.\u0275\u0275elementEnd()),2&n&&(g.\u0275\u0275property("ngClass",r.namespace),g.\u0275\u0275attribute("markerHeight",r.height)("markerWidth",r.width)("orient",r.orient)("id",r.id)("refX",r.refX)("refY",r.refY),g.\u0275\u0275advance(),g.\u0275\u0275property("ngStyle",g.\u0275\u0275pureFunction1(9,Or,r.color)),g.\u0275\u0275attribute("d",r.d))},dependencies:[le.CommonModule,le.NgClass,le.NgStyle],encapsulation:2})}}class Fl{static{this.\u0275fac=function(n){return new(n||Fl)}}static{this.\u0275mod=g.\u0275\u0275defineNgModule({type:Fl})}static{this.\u0275inj=g.\u0275\u0275defineInjector({imports:[le.CommonModule,Jt,pi,mi,gi,fi,_i,vi]})}}class hs{constructor(){this.color="",this.markerEnd="",this.markerStart="",this.source={x:0,y:0},this.target={x:0,y:0},this.path="",this.pathClasses="",this.namespace=`${Hn}--cc--edge`,this.straight=LD}static{this.\u0275fac=function(n){return new(n||hs)}}static{this.\u0275cmp=g.\u0275\u0275defineComponent({type:hs,selectors:[["ibm-graph-edge"],["","ibm-graph-edge",""]],inputs:{color:"color",markerEnd:"markerEnd",markerStart:"markerStart",source:"source",target:"target",variant:"variant",path:"path"},standalone:!0,features:[g.\u0275\u0275StandaloneFeature],decls:4,vars:15,consts:[[3,"ngClass"],[3,"ngClass","ngStyle"]],template:function(n,r){1&n&&(g.\u0275\u0275namespaceSVG(),g.\u0275\u0275elementStart(0,"g",0),g.\u0275\u0275element(1,"path",0)(2,"path",0)(3,"path",1),g.\u0275\u0275elementEnd()),2&n&&(g.\u0275\u0275property("ngClass",g.\u0275\u0275pureFunction2(10,NW,r.namespace,r.variant?r.namespace+"--"+r.variant:"")),g.\u0275\u0275advance(),g.\u0275\u0275property("ngClass",r.namespace+"__container"),g.\u0275\u0275attribute("d",r.path?r.path:r.straight(r.source,r.target)),g.\u0275\u0275advance(),g.\u0275\u0275property("ngClass",r.namespace+"__outer"),g.\u0275\u0275attribute("d",r.path?r.path:r.straight(r.source,r.target)),g.\u0275\u0275advance(),g.\u0275\u0275property("ngClass",r.namespace+"__inner")("ngStyle",g.\u0275\u0275pureFunction1(13,WW,r.color)),g.\u0275\u0275attribute("d",r.path?r.path:r.straight(r.source,r.target))("marker-start",r.markerStart?"url(#"+r.markerStart+")":"")("marker-end",r.markerEnd?"url(#"+r.markerEnd+")":""))},dependencies:[le.CommonModule,le.NgClass,le.NgStyle],encapsulation:2})}}class Ml{static{this.\u0275fac=function(n){return new(n||Ml)}}static{this.\u0275mod=g.\u0275\u0275defineNgModule({type:Ml})}static{this.\u0275inj=g.\u0275\u0275defineInjector({imports:[le.CommonModule,hs]})}}class ds{constructor(){this.as="div",this.href="",this.color="",this.stacked=!1,this.position="static",this.click=new g.EventEmitter,this.mouseEnter=new g.EventEmitter,this.mouseOver=new g.EventEmitter,this.mouseOut=new g.EventEmitter,this.mouseLeave=new g.EventEmitter,this.mouseMove=new g.EventEmitter,this.namespace=`${Hn}--cc--card-node`,this.component="div"}ngOnInit(){this.href?this.component="a":this.component=this.as}static{this.\u0275fac=function(n){return new(n||ds)}}static{this.\u0275cmp=g.\u0275\u0275defineComponent({type:ds,selectors:[["ibm-diagram-card-node"]],inputs:{as:"as",href:"href",color:"color",stacked:"stacked",position:"position"},outputs:{click:"click",mouseEnter:"mouseEnter",mouseOver:"mouseOver",mouseOut:"mouseOut",mouseLeave:"mouseLeave",mouseMove:"mouseMove"},standalone:!0,features:[g.\u0275\u0275StandaloneFeature],ngContentSelectors:No,decls:6,vars:4,consts:[["nodeTemplate",""],[3,"ngSwitch"],["tabindex","0",3,"ngClass","ngStyle","mouseenter","mouseover","mouseout","mouseleave","mousemove",4,"ngSwitchCase"],["tabindex","0",3,"ngClass","ngStyle","click","mouseenter","mouseover","mouseout","mouseleave","mousemove",4,"ngSwitchCase"],["tabindex","0",3,"mouseenter","mouseover","mouseout","mouseleave","mousemove","ngClass","ngStyle"],[4,"ngTemplateOutlet"],["tabindex","0",3,"click","mouseenter","mouseover","mouseout","mouseleave","mousemove","ngClass","ngStyle"]],template:function(n,r){1&n&&(g.\u0275\u0275projectionDef(),g.\u0275\u0275elementContainerStart(0,1),g.\u0275\u0275template(1,PW,2,10,"div",2)(2,jW,2,10,"button",3)(3,GW,2,11,"a",2),g.\u0275\u0275elementContainerEnd(),g.\u0275\u0275template(4,zW,1,0,"ng-template",null,0,g.\u0275\u0275templateRefExtractor)),2&n&&(g.\u0275\u0275property("ngSwitch",r.component),g.\u0275\u0275advance(),g.\u0275\u0275property("ngSwitchCase","div"),g.\u0275\u0275advance(),g.\u0275\u0275property("ngSwitchCase","button"),g.\u0275\u0275advance(),g.\u0275\u0275property("ngSwitchCase","a"))},dependencies:[le.CommonModule,le.NgClass,le.NgTemplateOutlet,le.NgStyle,le.NgSwitch,le.NgSwitchCase],encapsulation:2})}}class ps{constructor(){this.farsideColumn=!1}get class(){const e=this.farsideColumn?`${Hn}--cc--card-node__column--farside`:"";return`${Hn}--cc--card-node__column ${e}`}static{this.\u0275fac=function(n){return new(n||ps)}}static{this.\u0275cmp=g.\u0275\u0275defineComponent({type:ps,selectors:[["ibm-diagram-card-node-column"]],hostVars:2,hostBindings:function(n,r){2&n&&g.\u0275\u0275classMap(r.class)},inputs:{farsideColumn:"farsideColumn"},standalone:!0,features:[g.\u0275\u0275StandaloneFeature],ngContentSelectors:No,decls:2,vars:0,template:function(n,r){1&n&&(g.\u0275\u0275projectionDef(),g.\u0275\u0275elementStart(0,"div"),g.\u0275\u0275projection(1),g.\u0275\u0275elementEnd())},dependencies:[le.CommonModule],encapsulation:2})}}class ms{constructor(){this.namespace=`${Hn}--cc--card-node__label`}static{this.\u0275fac=function(n){return new(n||ms)}}static{this.\u0275cmp=g.\u0275\u0275defineComponent({type:ms,selectors:[["ibm-diagram-card-node-label"]],standalone:!0,features:[g.\u0275\u0275StandaloneFeature],ngContentSelectors:No,decls:2,vars:1,consts:[[3,"ngClass"]],template:function(n,r){1&n&&(g.\u0275\u0275projectionDef(),g.\u0275\u0275elementStart(0,"label",0),g.\u0275\u0275projection(1),g.\u0275\u0275elementEnd()),2&n&&g.\u0275\u0275property("ngClass",r.namespace)},dependencies:[le.CommonModule,le.NgClass],encapsulation:2})}}class gs{constructor(){this.namespace=`${Hn}--cc--card-node__subtitle`}static{this.\u0275fac=function(n){return new(n||gs)}}static{this.\u0275cmp=g.\u0275\u0275defineComponent({type:gs,selectors:[["ibm-diagram-card-node-subtitle"]],standalone:!0,features:[g.\u0275\u0275StandaloneFeature],ngContentSelectors:No,decls:2,vars:1,consts:[[3,"ngClass"]],template:function(n,r){1&n&&(g.\u0275\u0275projectionDef(),g.\u0275\u0275elementStart(0,"div",0),g.\u0275\u0275projection(1),g.\u0275\u0275elementEnd()),2&n&&g.\u0275\u0275property("ngClass",r.namespace)},dependencies:[le.CommonModule,le.NgClass],encapsulation:2})}}class fs{constructor(){this.namespace=`${Hn}--cc--card-node__title`}static{this.\u0275fac=function(n){return new(n||fs)}}static{this.\u0275cmp=g.\u0275\u0275defineComponent({type:fs,selectors:[["ibm-diagram-card-node-title"]],standalone:!0,features:[g.\u0275\u0275StandaloneFeature],ngContentSelectors:No,decls:2,vars:1,consts:[[3,"ngClass"]],template:function(n,r){1&n&&(g.\u0275\u0275projectionDef(),g.\u0275\u0275elementStart(0,"div",0),g.\u0275\u0275projection(1),g.\u0275\u0275elementEnd()),2&n&&g.\u0275\u0275property("ngClass",r.namespace)},dependencies:[le.CommonModule,le.NgClass],encapsulation:2})}}class Al{static{this.\u0275fac=function(n){return new(n||Al)}}static{this.\u0275mod=g.\u0275\u0275defineNgModule({type:Al})}static{this.\u0275inj=g.\u0275\u0275defineInjector({imports:[le.CommonModule,ds,ps,ms,gs,fs]})}}class _s{constructor(){this.as="div",this.href="",this.size=48,this.stacked=!1,this.shape="circle",this.subtitle="",this.title="",this.position="fixed",this.bodyPosition="absolute",this.click=new g.EventEmitter,this.mouseEnter=new g.EventEmitter,this.mouseOver=new g.EventEmitter,this.mouseOut=new g.EventEmitter,this.mouseLeave=new g.EventEmitter,this.mouseMove=new g.EventEmitter,this.namespace=`${Hn}--cc--shape-node`,this.component="div"}ngOnInit(){this.href?this.component="a":this.component=this.as}static{this.\u0275fac=function(n){return new(n||_s)}}static{this.\u0275cmp=g.\u0275\u0275defineComponent({type:_s,selectors:[["ibm-diagram-shape-node"]],inputs:{as:"as",href:"href",renderIcon:"renderIcon",size:"size",stacked:"stacked",shape:"shape",subtitle:"subtitle",title:"title",position:"position",bodyPosition:"bodyPosition"},outputs:{click:"click",mouseEnter:"mouseEnter",mouseOver:"mouseOver",mouseOut:"mouseOut",mouseLeave:"mouseLeave",mouseMove:"mouseMove"},standalone:!0,features:[g.\u0275\u0275StandaloneFeature],decls:6,vars:4,consts:[["nodeTemplate",""],[3,"ngSwitch"],["tabindex","0",3,"ngClass","ngStyle","mouseenter","mouseover","mouseout","mouseleave","mousemove",4,"ngSwitchCase"],["tabindex","0",3,"ngClass","ngStyle","click","mouseenter","mouseover","mouseout","mouseleave","mousemove",4,"ngSwitchCase"],["tabindex","0",3,"mouseenter","mouseover","mouseout","mouseleave","mousemove","ngClass","ngStyle"],[4,"ngTemplateOutlet"],["tabindex","0",3,"click","mouseenter","mouseover","mouseout","mouseleave","mousemove","ngClass","ngStyle"],[4,"ngIf"],[3,"ngStyle"]],template:function(n,r){1&n&&(g.\u0275\u0275elementContainerStart(0,1),g.\u0275\u0275template(1,YW,2,12,"div",2)(2,ZW,2,12,"button",3)(3,JW,2,13,"a",2),g.\u0275\u0275elementContainerEnd(),g.\u0275\u0275template(4,nV,6,9,"ng-template",null,0,g.\u0275\u0275templateRefExtractor)),2&n&&(g.\u0275\u0275property("ngSwitch",r.component),g.\u0275\u0275advance(),g.\u0275\u0275property("ngSwitchCase","div"),g.\u0275\u0275advance(),g.\u0275\u0275property("ngSwitchCase","button"),g.\u0275\u0275advance(),g.\u0275\u0275property("ngSwitchCase","a"))},dependencies:[le.CommonModule,le.NgClass,le.NgIf,le.NgTemplateOutlet,le.NgStyle,le.NgSwitch,le.NgSwitchCase],encapsulation:2})}}class kl{static{this.\u0275fac=function(n){return new(n||kl)}}static{this.\u0275mod=g.\u0275\u0275defineNgModule({type:kl})}static{this.\u0275inj=g.\u0275\u0275defineInjector({imports:[le.CommonModule,_s]})}}}}]);
//# sourceMappingURL=default-node_modules_carbon_charts-angular_fesm2022_carbon-charts-angular_mjs.js.map