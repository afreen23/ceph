(self.webpackChunkceph_dashboard=self.webpackChunkceph_dashboard||[]).push([["default-node_modules_ngx-formly_core_fesm2020_ngx-formly-core_mjs"],{83074:(Oe,Z,b)=>{b.r(Z),b.d(Z,{FORMLY_CONFIG:()=>x,FieldArrayType:()=>w,FieldType:()=>O,FieldWrapper:()=>k,FormlyConfig:()=>d,FormlyField:()=>A,FormlyForm:()=>V,FormlyFormBuilder:()=>C,FormlyModule:()=>F,\u0275FormlyAttributes:()=>j,\u0275FormlyGroup:()=>T,\u0275FormlyTemplate:()=>I,\u0275FormlyValidationMessage:()=>W,\u0275clone:()=>m,\u0275defineHiddenProp:()=>h,\u0275getFieldValue:()=>D,\u0275hasKey:()=>u,\u0275observe:()=>_,\u0275reverseDeepMerge:()=>R});var i=b(87536),p=b(53648),g=b(95631),y=b(50619),G=b(91974),se=b(5559);const oe=["container"];function ie(s,e){}function le(s,e){if(1&s&&i.\u0275\u0275element(0,"formly-field",1),2&s){const t=e.$implicit;i.\u0275\u0275property("field",t)}}const J=["fieldComponent"];function pe(s,e,t){if(e.id)return e.id;let r=e.type;return!r&&e.template&&(r="template"),r instanceof i.Type&&(r=r.prototype.constructor.name),[s,r,e.key,t].join("_")}function u(s){return!M(s.key)&&""!==s.key}function v(s){if(!u(s))return[];if(s._keyPath?.key!==s.key){let e=[];if("string"==typeof s.key){const t=-1===s.key.indexOf("[")?s.key:s.key.replace(/\[(\w+)\]/g,".$1");e=-1!==t.indexOf(".")?t.split("."):[t]}else e=Array.isArray(s.key)?s.key.slice(0):[`${s.key}`];h(s,"_keyPath",{key:s.key,path:e})}return s._keyPath.path.slice(0)}const $=["required","pattern","minLength","maxLength","min","max"];function B(s,e){let t=v(s);if(0===t.length)return;let r=s;for(;r.parent;)r=r.parent,t=[...v(r),...t];if(void 0===e&&s.resetOnHide){const n=t.pop();delete t.reduce((a,l)=>a[l]||{},r.model)[n]}else!function ue(s,e,t){for(let r=0;r<e.length-1;r++){const n=e[r];(!s[n]||!E(s[n]))&&(s[n]=/^\d+$/.test(e[r+1])?[]:{}),s=s[n]}s[e[e.length-1]]=m(t)}(r.model,t,e)}function D(s){let e=s.parent?s.parent.model:s.model;for(const t of v(s)){if(!e)return e;e=e[t]}return e}function R(s,...e){return e.forEach(t=>{for(const r in t)M(s[r])||he(s[r])?s[r]=m(t[r]):_e(s[r],t[r])&&R(s[r],t[r])}),s}function M(s){return null==s}function S(s){return void 0===s}function he(s){return""===s}function N(s){return"function"==typeof s}function _e(s,e){return E(s)&&E(e)&&Object.getPrototypeOf(s)===Object.getPrototypeOf(e)&&!(Array.isArray(s)||Array.isArray(e))}function E(s){return null!=s&&"object"==typeof s}function m(s){if(!E(s)||(0,g.isObservable)(s)||s instanceof i.TemplateRef||s.changingThisBreaksApplicationSecurity||-1!==["RegExp","FileList","File","Blob"].indexOf(s.constructor.name))return s;if(s instanceof Set)return new Set(s);if(s instanceof Map)return new Map(s);if(s._isAMomentObject&&N(s.clone))return s.clone();if(s instanceof p.AbstractControl)return null;if(s instanceof Date)return new Date(s.getTime());if(Array.isArray(s))return s.slice(0).map(r=>m(r));const e=Object.getPrototypeOf(s);let t=Object.create(e);return t=Object.setPrototypeOf(t,e),Object.keys(s).reduce((r,n)=>{const o=Object.getOwnPropertyDescriptor(s,n);return o.get?Object.defineProperty(r,n,o):r[n]=m(s[n]),r},t)}function h(s,e,t){Object.defineProperty(s,e,{enumerable:!1,writable:!0,configurable:!0}),s[e]=t}function Q(s,e,t){let r=[];const n=()=>{r.forEach(a=>a()),r=[]},o=_(s,e,({firstChange:a,currentValue:l})=>{!a&&t(),n(),E(l)&&"Object"===l.constructor.name&&Object.keys(l).forEach(c=>{r.push(Q(s,[...e,c],t))})});return()=>{o.unsubscribe(),n()}}function _(s,e,t){s._observers||h(s,"_observers",{});let r=s;for(let l=0;l<e.length-1;l++)(!r[e[l]]||!E(r[e[l]]))&&(r[e[l]]=/^\d+$/.test(e[l+1])?[]:{}),r=r[e[l]];const n=e[e.length-1],o=e.join(".");s._observers[o]||(s._observers[o]={value:r[n],onChange:[]});const a=s._observers[o];if(r[n]!==a.value&&(a.value=r[n]),-1===a.onChange.indexOf(t)&&(a.onChange.push(t),t({currentValue:a.value,firstChange:!0}),a.onChange.length>=1)){const{enumerable:l}=Object.getOwnPropertyDescriptor(r,n)||{enumerable:!0};Object.defineProperty(r,n,{enumerable:l,configurable:!0,get:()=>a.value,set:c=>{if(c!==a.value){const f=a.value;a.value=c,a.onChange.forEach(K=>K({previousValue:f,currentValue:c,firstChange:!1}))}}})}return{setValue(l){a.value=l},unsubscribe(){a.onChange=a.onChange.filter(l=>l!==t),0===a.onChange.length&&delete s._observers[o]}}}function X(s,e){if(e=Array.isArray(e)?e.join("."):e,s.fieldGroup)for(let t=0,r=s.fieldGroup.length;t<r;t++){const n=s.fieldGroup[t],o=Array.isArray(n.key)?n.key.join("."):n.key;if(o===e)return n;if(n.fieldGroup&&(M(o)||0===e.indexOf(`${o}.`))){const a=X(n,M(o)?e:e.slice(o.length+1));if(a)return a}}}function q(s){s._componentRefs?.forEach(e=>{e instanceof i.ComponentRef?e.injector.get(i.ChangeDetectorRef).markForCheck():e.markForCheck()})}const x=new i.InjectionToken("FORMLY_CONFIG");class d{constructor(){this.types={},this.validators={},this.wrappers={},this.messages={},this.extras={checkExpressionOn:"modelChange",lazyRender:!0,resetFieldOnHide:!0,renderFormlyFieldElement:!0,showError:e=>e.formControl?.invalid&&(e.formControl?.touched||e.options.parentForm?.submitted||!!e.field.validation?.show)},this.extensions={},this.presets={},this.extensionsByPriority={}}addConfig(e){e.types&&e.types.forEach(t=>this.setType(t)),e.validators&&e.validators.forEach(t=>this.setValidator(t)),e.wrappers&&e.wrappers.forEach(t=>this.setWrapper(t)),e.validationMessages&&e.validationMessages.forEach(t=>this.addValidatorMessage(t.name,t.message)),e.extensions&&this.setSortedExtensions(e.extensions),e.extras&&(this.extras={...this.extras,...e.extras}),e.presets&&(this.presets={...this.presets,...e.presets.reduce((t,r)=>({...t,[r.name]:r.config}),{})})}setType(e){Array.isArray(e)?e.forEach(t=>this.setType(t)):(this.types[e.name]||(this.types[e.name]={name:e.name}),["component","extends","defaultOptions","wrappers"].forEach(t=>{e.hasOwnProperty(t)&&(this.types[e.name][t]=e[t])}))}getType(e,t=!1){if(e instanceof i.Type)return{component:e,name:e.prototype.constructor.name};if(!this.types[e]){if(t)throw new Error(`[Formly Error] The type "${e}" could not be found. Please make sure that is registered through the FormlyModule declaration.`);return null}return this.mergeExtendedType(e),this.types[e]}getMergedField(e={}){const t=this.getType(e.type);if(!t)return;t.defaultOptions&&R(e,t.defaultOptions);const r=t.extends&&this.getType(t.extends).defaultOptions;r&&R(e,r),e?.optionsTypes&&e.optionsTypes.forEach(o=>{const a=this.getType(o).defaultOptions;a&&R(e,a)});const n=this.resolveFieldTypeRef(e);n?.instance?.defaultOptions&&R(e,n.instance.defaultOptions),!e.wrappers&&t.wrappers&&(e.wrappers=[...t.wrappers])}resolveFieldTypeRef(e={}){const t=this.getType(e.type);if(!t)return null;if(!t.component||t._componentRef)return t._componentRef;const{_viewContainerRef:r,_injector:n}=e.options;if(!r||!n)return null;const o=r.createComponent(t.component,{injector:n});h(t,"_componentRef",o);try{o.destroy()}catch(a){console.error(`An error occurred while destroying the Formly component type "${e.type}"`,a)}return t._componentRef}setWrapper(e){this.wrappers[e.name]=e,e.types&&e.types.forEach(t=>{this.setTypeWrapper(t,e.name)})}getWrapper(e){if(e instanceof i.Type)return{component:e,name:e.prototype.constructor.name};if(!this.wrappers[e])throw new Error(`[Formly Error] The wrapper "${e}" could not be found. Please make sure that is registered through the FormlyModule declaration.`);return this.wrappers[e]}setTypeWrapper(e,t){this.types[e]||(this.types[e]={}),this.types[e].wrappers||(this.types[e].wrappers=[]),-1===this.types[e].wrappers.indexOf(t)&&this.types[e].wrappers.push(t)}setValidator(e){this.validators[e.name]=e}getValidator(e){if(!this.validators[e])throw new Error(`[Formly Error] The validator "${e}" could not be found. Please make sure that is registered through the FormlyModule declaration.`);return this.validators[e]}addValidatorMessage(e,t){this.messages[e]=t}getValidatorMessage(e){return this.messages[e]}setSortedExtensions(e){e.forEach(t=>{const r=t.priority??1;this.extensionsByPriority[r]={...this.extensionsByPriority[r],[t.name]:t.extension}}),this.extensions=Object.keys(this.extensionsByPriority).map(Number).sort((t,r)=>t-r).reduce((t,r)=>({...t,...this.extensionsByPriority[r]}),{})}mergeExtendedType(e){if(!this.types[e].extends)return;const t=this.getType(this.types[e].extends);this.types[e].component||(this.types[e].component=t.component),this.types[e].wrappers||(this.types[e].wrappers=t.wrappers)}}d.\u0275fac=function(e){return new(e||d)},d.\u0275prov=i.\u0275\u0275defineInjectable({token:d,factory:d.\u0275fac,providedIn:"root"});class C{constructor(e,t,r,n){this.config=e,this.injector=t,this.viewContainerRef=r,this.parentForm=n}buildForm(e,t=[],r,n){this.build({fieldGroup:t,model:r,form:e,options:n})}build(e){if(!this.config.extensions.core)throw new Error("NgxFormly: missing `forRoot()` call. use `forRoot()` when registering the `FormlyModule`.");e.parent?this._build(e):(this._setOptions(e),function ce(s,e){const t=s._updateTreeValidity.bind(s);s._updateTreeValidity=()=>{},e(),s._updateTreeValidity=t}(e.form,()=>{this._build(e);const t=e.options;t.checkExpressions?.(e,!0),t.detectChanges?.(e)}))}_build(e){if(!e)return;const t=Object.values(this.config.extensions);t.forEach(r=>r.prePopulate?.(e)),t.forEach(r=>r.onPopulate?.(e)),e.fieldGroup?.forEach(r=>this._build(r)),t.forEach(r=>r.postPopulate?.(e))}_setOptions(e){e.form=e.form||new p.FormGroup({}),e.model=e.model||{},e.options=e.options||{};const t=e.options;t._viewContainerRef||h(t,"_viewContainerRef",this.viewContainerRef),t._injector||h(t,"_injector",this.injector),t.build||(t._buildForm=()=>{console.warn("Formly: 'options._buildForm' is deprecated since v6.0, use 'options.build' instead."),this.build(e)},t.build=(r=e)=>(this.build(r),r)),!t.parentForm&&this.parentForm&&(h(t,"parentForm",this.parentForm),_(t,["parentForm","submitted"],({firstChange:r})=>{r||(t.checkExpressions(e),t.detectChanges(e))}))}}function z(s,e=!1){const t=s.formControl,r=t._fields?t._fields.indexOf(s):-1;-1!==r&&t._fields.splice(r,1);const n=t.parent;if(!n)return;const o={emitEvent:e};if(n instanceof p.FormArray){const a=n.controls.findIndex(l=>l===t);-1!==a&&n.removeAt(a,o)}else if(n instanceof p.FormGroup){const a=v(s),l=a[a.length-1];n.get([l])===t&&n.removeControl(l,o)}t.setParent(null)}function ee(s){return s.formControl?s.formControl:!1===s.shareFormControl?null:s.form?.get(v(s))}function Y(s,e,t=!1){if((e=e||s.formControl)._fields||h(e,"_fields",[]),-1===e._fields.indexOf(s)&&e._fields.push(s),!s.formControl&&e){h(s,"formControl",e),e.setValidators(null),e.setAsyncValidators(null),s.props.disabled=!!s.props.disabled;const l=_(s,["props","disabled"],({firstChange:c,currentValue:f})=>{c||(f?s.formControl.disable():s.formControl.enable())});e instanceof p.FormControl&&e.registerOnDisabledChange(l.setValue)}if(!s.form||!u(s))return;let r=s.form;const n=v(s),o=D(s);(!M(e.value)||!M(o))&&e.value!==o&&e instanceof p.FormControl&&e.patchValue(o);for(let l=0;l<n.length-1;l++){const c=n[l];r.get([c])||r.setControl(c,new p.FormGroup({}),{emitEvent:t}),r=r.get([c])}const a=n[n.length-1];!s._hide&&r.get([a])!==e&&r.setControl(a,e,{emitEvent:t})}function L(s,e=!1){const t=s.status,r=s.value;s.updateValueAndValidity({emitEvent:!1,onlySelf:e}),t!==s.status&&s.statusChanges.emit(s.status),r!==s.value&&s.valueChanges.emit(s.value)}function te(s){delete s?._fields,s.setValidators(null),s.setAsyncValidators(null),(s instanceof p.FormGroup||s instanceof p.FormArray)&&Object.values(s.controls).forEach(e=>te(e))}C.\u0275fac=function(e){return new(e||C)(i.\u0275\u0275inject(d),i.\u0275\u0275inject(i.Injector),i.\u0275\u0275inject(i.ViewContainerRef,8),i.\u0275\u0275inject(p.FormGroupDirective,8))},C.\u0275prov=i.\u0275\u0275defineInjectable({token:C,factory:C.\u0275fac,providedIn:"root"});class I{constructor(e){this.ref=e}ngOnChanges(){this.name=this.name||"formly-group"}}I.\u0275fac=function(e){return new(e||I)(i.\u0275\u0275directiveInject(i.TemplateRef))},I.\u0275dir=i.\u0275\u0275defineDirective({type:I,selectors:[["","formlyTemplate",""]],inputs:{name:[0,"formlyTemplate","name"]},features:[i.\u0275\u0275NgOnChangesFeature]});class P{}P.\u0275fac=function(e){return new(e||P)},P.\u0275prov=i.\u0275\u0275defineInjectable({token:P,factory:P.\u0275fac});class A{constructor(e,t,r,n,o){this.config=e,this.renderer=t,this._elementRef=r,this.hostContainerRef=n,this.form=o,this.hostObservers=[],this.componentRefs=[],this.hooksObservers=[],this.detectFieldBuild=!1,this.valueChangesUnsubscribe=()=>{}}get containerRef(){return this.config.extras.renderFormlyFieldElement?this.viewContainerRef:this.hostContainerRef}get elementRef(){return this.config.extras.renderFormlyFieldElement?this._elementRef:this.componentRefs?.[0]instanceof i.ComponentRef?this.componentRefs[0].location:null}ngAfterContentInit(){this.triggerHook("afterContentInit")}ngAfterViewInit(){this.triggerHook("afterViewInit")}ngDoCheck(){this.detectFieldBuild&&this.field&&this.field.options&&this.render()}ngOnInit(){this.triggerHook("onInit")}ngOnChanges(e){this.triggerHook("onChanges",e)}ngOnDestroy(){this.resetRefs(this.field),this.hostObservers.forEach(e=>e.unsubscribe()),this.hooksObservers.forEach(e=>e()),this.valueChangesUnsubscribe(),this.triggerHook("onDestroy")}renderField(e,t,r=[]){if(this.containerRef===e&&(this.resetRefs(this.field),this.containerRef.clear(),r=this.field?.wrappers),r?.length>0){const[n,...o]=r,{component:a}=this.config.getWrapper(n),l=e.createComponent(a);this.attachComponentRef(l,t),_(l.instance,["fieldComponent"],({currentValue:c,previousValue:f,firstChange:K})=>{if(c){if(f&&f._lContainer===c._lContainer)return;const H=f?f.detach():null;H&&!H.destroyed?c.insert(H):this.renderField(c,t,o),!K&&l.changeDetectorRef.detectChanges()}})}else if(t?.type){const n=this.form?.templates?.find(a=>a.name===t.type);let o;if(n)o=e.createEmbeddedView(n.ref,{$implicit:t});else{const{component:a}=this.config.getType(t.type,!0);o=e.createComponent(a)}this.attachComponentRef(o,t)}}triggerHook(e,t){if(("onInit"===e||"onChanges"===e&&t.field&&!t.field.firstChange)&&(this.valueChangesUnsubscribe=this.fieldChanges(this.field)),this.field?.hooks?.[e]&&(!t||t.field)){const r=this.field.hooks[e](this.field);if((0,g.isObservable)(r)&&-1!==["onInit","afterContentInit","afterViewInit"].indexOf(e)){const n=r.subscribe();this.hooksObservers.push(()=>n.unsubscribe())}}"onChanges"===e&&t.field&&(this.resetRefs(t.field.previousValue),this.render())}attachComponentRef(e,t){this.componentRefs.push(e),t._componentRefs.push(e),e instanceof i.ComponentRef&&Object.assign(e.instance,{field:t})}render(){if(this.field){if(!this.field.options)return void(this.detectFieldBuild=!0);this.detectFieldBuild=!1,this.hostObservers.forEach(e=>e.unsubscribe()),this.hostObservers=[_(this.field,["hide"],({firstChange:e,currentValue:t})=>{const r=this.containerRef;!1===this.config.extras.lazyRender?(e&&this.renderField(r,this.field),(!e||e&&t)&&this.elementRef&&this.renderer.setStyle(this.elementRef.nativeElement,"display",t?"none":"")):t?(r.clear(),this.field.className&&this.renderer.removeAttribute(this.elementRef.nativeElement,"class")):(this.renderField(r,this.field),this.field.className&&this.renderer.setAttribute(this.elementRef.nativeElement,"class",this.field.className)),!e&&this.field.options.detectChanges(this.field)}),_(this.field,["className"],({firstChange:e,currentValue:t})=>{(!e||e&&t)&&(!this.config.extras.lazyRender||!0!==this.field.hide)&&this.elementRef&&this.renderer.setAttribute(this.elementRef.nativeElement,"class",t)}),...["touched","pristine","status"].map(e=>_(this.field,["formControl",e],({firstChange:t})=>!t&&q(this.field)))]}}resetRefs(e){e&&(e._componentRefs?e._componentRefs=e._componentRefs.filter(t=>-1===this.componentRefs.indexOf(t)):h(this.field,"_componentRefs",[])),this.componentRefs=[]}fieldChanges(e){if(this.valueChangesUnsubscribe(),!e)return()=>{};const t=[Q(e,["props"],()=>e.options.detectChanges(e)),Q(e.options,["formState"],()=>e.options.detectChanges(e))];for(const r of Object.keys(e._expressions)){const n=_(e,["_expressions",r],({currentValue:o,previousValue:a})=>{a?.subscription&&(a.subscription.unsubscribe(),a.subscription=null),(0,g.isObservable)(o.value$)&&(o.subscription=o.value$.subscribe())});t.push(()=>{e._expressions[r]?.subscription&&e._expressions[r].subscription.unsubscribe(),n.unsubscribe()})}for(const r of[["template"],["fieldGroupClassName"],["validation","show"]]){const n=_(e,r,({firstChange:o})=>!o&&e.options.detectChanges(e));t.push(()=>n.unsubscribe())}if(e.formControl&&!e.fieldGroup){const r=e.formControl;let n=r.valueChanges.pipe((0,y.distinctUntilChanged)((c,f)=>!(c!==f||Array.isArray(c)||E(c))));r.value!==D(e)&&(n=n.pipe((0,y.startWith)(r.value)));const{updateOn:o,debounce:a}=e.modelOptions;(!o||"change"===o)&&a?.default>0&&(n=r.valueChanges.pipe((0,y.debounceTime)(a.default)));const l=n.subscribe(c=>{r._fields?.length>1&&r instanceof p.FormControl&&r.patchValue(c,{emitEvent:!1,onlySelf:!0}),e.parsers?.forEach(f=>c=f(c)),c===e.formControl.value?(u(e)&&B(e,c),e.options.fieldChanges.next({value:c,field:e,type:"valueChanges"})):e.formControl.setValue(c)});t.push(()=>l.unsubscribe())}return()=>t.forEach(r=>r())}}A.\u0275fac=function(e){return new(e||A)(i.\u0275\u0275directiveInject(d),i.\u0275\u0275directiveInject(i.Renderer2),i.\u0275\u0275directiveInject(i.ElementRef),i.\u0275\u0275directiveInject(i.ViewContainerRef),i.\u0275\u0275directiveInject(P,8))},A.\u0275cmp=i.\u0275\u0275defineComponent({type:A,selectors:[["formly-field"]],viewQuery:function(e,t){if(1&e&&i.\u0275\u0275viewQuery(oe,7,i.ViewContainerRef),2&e){let r;i.\u0275\u0275queryRefresh(r=i.\u0275\u0275loadQuery())&&(t.viewContainerRef=r.first)}},inputs:{field:"field"},features:[i.\u0275\u0275NgOnChangesFeature],decls:2,vars:0,consts:[["container",""]],template:function(e,t){1&e&&i.\u0275\u0275template(0,ie,0,0,"ng-template",null,0,i.\u0275\u0275templateRefExtractor)},styles:["[_nghost-%COMP%]:empty{display:none}"]});class V{constructor(e,t,r,n){this.builder=e,this.config=t,this.ngZone=r,this.fieldTemplates=n,this.modelChange=new i.EventEmitter,this.field={type:"formly-group"},this._modelChangeValue={},this.valueChangesUnsubscribe=()=>{}}set form(e){this.field.form=e}get form(){return this.field.form}set model(e){this.setField({model:e})}get model(){return this.field.model}set fields(e){this.setField({fieldGroup:e})}get fields(){return this.field.fieldGroup}set options(e){this.setField({options:e})}get options(){return this.field.options}set templates(e){this.fieldTemplates.templates=e}ngDoCheck(){"changeDetectionCheck"===this.config.extras.checkExpressionOn&&this.checkExpressionChange()}ngOnChanges(e){e.fields&&this.form&&te(this.form),(e.fields||e.form||e.model&&this._modelChangeValue!==e.model.currentValue)&&(this.valueChangesUnsubscribe(),this.builder.build(this.field),this.valueChangesUnsubscribe=this.valueChanges())}ngOnDestroy(){this.valueChangesUnsubscribe()}checkExpressionChange(){this.field.options.checkExpressions?.(this.field)}valueChanges(){this.valueChangesUnsubscribe();const e=this.field.options.fieldChanges.pipe((0,y.filter)(({field:t,type:r})=>u(t)&&"valueChanges"===r),(0,y.switchMap)(()=>this.ngZone.onStable.asObservable().pipe((0,y.take)(1)))).subscribe(()=>this.ngZone.runGuarded(()=>{this.checkExpressionChange(),this.modelChange.emit(this._modelChangeValue=m(this.model))}));return()=>e.unsubscribe()}setField(e){this.config.extras.immutable?this.field={...this.field,...m(e)}:Object.keys(e).forEach(t=>this.field[t]=e[t])}}V.\u0275fac=function(e){return new(e||V)(i.\u0275\u0275directiveInject(C),i.\u0275\u0275directiveInject(d),i.\u0275\u0275directiveInject(i.NgZone),i.\u0275\u0275directiveInject(P))},V.\u0275cmp=i.\u0275\u0275defineComponent({type:V,selectors:[["formly-form"]],contentQueries:function(e,t,r){if(1&e&&i.\u0275\u0275contentQuery(r,I,4),2&e){let n;i.\u0275\u0275queryRefresh(n=i.\u0275\u0275loadQuery())&&(t.templates=n)}},inputs:{form:"form",model:"model",fields:"fields",options:"options"},outputs:{modelChange:"modelChange"},features:[i.\u0275\u0275ProvidersFeature([C,P]),i.\u0275\u0275NgOnChangesFeature],decls:1,vars:1,consts:[[3,"field"]],template:function(e,t){1&e&&i.\u0275\u0275element(0,"formly-field",0),2&e&&i.\u0275\u0275property("field",t.field)},dependencies:[A],encapsulation:2,changeDetection:0});class j{constructor(e,t,r){this.renderer=e,this.elementRef=t,this.uiAttributesCache={},this.uiEvents={listeners:[],events:["click","keyup","keydown","keypress","focus","blur","change"],callback:(n,o)=>{switch(n){case"focus":return this.onFocus(o);case"blur":return this.onBlur(o);case"change":return this.onChange(o);default:return this.props[n](this.field,o)}}},this.document=r}get props(){return this.field.props||{}}get fieldAttrElements(){return this.field?._elementRefs||[]}ngOnChanges(e){e.field&&(this.field.name&&this.setAttribute("name",this.field.name),this.uiEvents.listeners.forEach(t=>t()),this.uiEvents.events.forEach(t=>{(this.props?.[t]||-1!==["focus","blur","change"].indexOf(t))&&this.uiEvents.listeners.push(this.renderer.listen(this.elementRef.nativeElement,t,r=>this.uiEvents.callback(t,r)))}),this.props?.attributes&&_(this.field,["props","attributes"],({currentValue:t,previousValue:r})=>{r&&Object.keys(r).forEach(n=>this.removeAttribute(n)),t&&Object.keys(t).forEach(n=>{null!=t[n]&&this.setAttribute(n,t[n])})}),this.detachElementRef(e.field.previousValue),this.attachElementRef(e.field.currentValue),1===this.fieldAttrElements.length&&(!this.id&&this.field.id&&this.setAttribute("id",this.field.id),this.focusObserver=_(this.field,["focus"],({currentValue:t})=>{this.toggleFocus(t)}))),e.id&&this.setAttribute("id",this.id)}ngDoCheck(){if(!this.uiAttributes){const e=this.elementRef.nativeElement;this.uiAttributes=[...$,"tabindex","placeholder","readonly","disabled","step"].filter(t=>!e.hasAttribute||!e.hasAttribute(t))}this.uiAttributes.forEach(e=>{const t=this.props[e];this.uiAttributesCache[e]!==t&&(!this.props.attributes||!this.props.attributes.hasOwnProperty(e.toLowerCase()))&&(this.uiAttributesCache[e]=t,t||0===t?this.setAttribute(e,!0===t?e:`${t}`):this.removeAttribute(e))})}ngOnDestroy(){this.uiEvents.listeners.forEach(e=>e()),this.detachElementRef(this.field),this.focusObserver?.unsubscribe()}toggleFocus(e){const t=this.fieldAttrElements?this.fieldAttrElements[0]:null;if(!t||!t.nativeElement.focus)return;const r=!!this.document.activeElement&&this.fieldAttrElements.some(({nativeElement:n})=>this.document.activeElement===n||n.contains(this.document.activeElement));e&&!r?Promise.resolve().then(()=>t.nativeElement.focus()):!e&&r&&Promise.resolve().then(()=>t.nativeElement.blur())}onFocus(e){this.focusObserver?.setValue(!0),this.props.focus?.(this.field,e)}onBlur(e){this.focusObserver?.setValue(!1),this.props.blur?.(this.field,e)}onHostChange(e){e instanceof Event||this.onChange(e)}onChange(e){this.props.change?.(this.field,e),this.field.formControl?.markAsDirty()}attachElementRef(e){e&&(-1===e._elementRefs?.indexOf(this.elementRef)?e._elementRefs.push(this.elementRef):h(e,"_elementRefs",[this.elementRef]))}detachElementRef(e){const t=e?._elementRefs?this.fieldAttrElements.indexOf(this.elementRef):-1;-1!==t&&e._elementRefs.splice(t,1)}setAttribute(e,t){this.renderer.setAttribute(this.elementRef.nativeElement,e,t)}removeAttribute(e){this.renderer.removeAttribute(this.elementRef.nativeElement,e)}}j.\u0275fac=function(e){return new(e||j)(i.\u0275\u0275directiveInject(i.Renderer2),i.\u0275\u0275directiveInject(i.ElementRef),i.\u0275\u0275directiveInject(G.DOCUMENT))},j.\u0275dir=i.\u0275\u0275defineDirective({type:j,selectors:[["","formlyAttributes",""]],hostBindings:function(e,t){1&e&&i.\u0275\u0275listener("change",function(n){return t.onHostChange(n)})},inputs:{field:[0,"formlyAttributes","field"],id:"id"},features:[i.\u0275\u0275NgOnChangesFeature]});class O{get model(){return this.field.model}get form(){return this.field.form}get options(){return this.field.options}get key(){return this.field.key}get formControl(){return this.field.formControl}get props(){return this.field.props||{}}get to(){return this.props}get showError(){return this.options.showError(this)}get id(){return this.field.id}get formState(){return this.options.formState||{}}}O.\u0275fac=function(e){return new(e||O)},O.\u0275dir=i.\u0275\u0275defineDirective({type:O,inputs:{field:"field"}});class T extends O{}T.\u0275fac=(()=>{let s;return function(t){return(s||(s=i.\u0275\u0275getInheritedFactory(T)))(t||T)}})(),T.\u0275cmp=i.\u0275\u0275defineComponent({type:T,selectors:[["formly-group"]],hostVars:2,hostBindings:function(e,t){2&e&&i.\u0275\u0275classMap(t.field.fieldGroupClassName||"")},features:[i.\u0275\u0275InheritDefinitionFeature],ngContentSelectors:["*"],decls:2,vars:1,consts:[[3,"field",4,"ngFor","ngForOf"],[3,"field"]],template:function(e,t){1&e&&(i.\u0275\u0275projectionDef(),i.\u0275\u0275template(0,le,1,1,"formly-field",0),i.\u0275\u0275projection(1)),2&e&&i.\u0275\u0275property("ngForOf",t.field.fieldGroup)},dependencies:[A,G.NgForOf],encapsulation:2,changeDetection:0});class W{constructor(e){this.config=e}ngOnChanges(){const e=$.map(t=>`templateOptions.${t}`);this.errorMessage$=(0,g.merge)(this.field.formControl.statusChanges,this.field.options?this.field.options.fieldChanges.pipe((0,y.filter)(({field:t,type:r,property:n})=>t===this.field&&"expressionChanges"===r&&(-1!==n.indexOf("validation")||-1!==e.indexOf(n)))):(0,g.of)(null)).pipe((0,y.startWith)(null),(0,y.switchMap)(()=>(0,g.isObservable)(this.errorMessage)?this.errorMessage:(0,g.of)(this.errorMessage)))}get errorMessage(){const e=this.field.formControl;for(const t in e.errors)if(e.errors.hasOwnProperty(t)){let r=this.config.getValidatorMessage(t);if(E(e.errors[t])){if(e.errors[t].errorPath)return;e.errors[t].message&&(r=e.errors[t].message)}return this.field.validation?.messages?.[t]&&(r=this.field.validation.messages[t]),this.field.validators?.[t]?.message&&(r=this.field.validators[t].message),this.field.asyncValidators?.[t]?.message&&(r=this.field.asyncValidators[t].message),"function"==typeof r?r(e.errors[t],this.field):r}}}W.\u0275fac=function(e){return new(e||W)(i.\u0275\u0275directiveInject(d))},W.\u0275cmp=i.\u0275\u0275defineComponent({type:W,selectors:[["formly-validation-message"]],inputs:{field:"field"},features:[i.\u0275\u0275NgOnChangesFeature],decls:2,vars:3,template:function(e,t){1&e&&(i.\u0275\u0275text(0),i.\u0275\u0275pipe(1,"async")),2&e&&i.\u0275\u0275textInterpolate(i.\u0275\u0275pipeBind1(1,1,t.errorMessage$))},dependencies:[G.AsyncPipe],encapsulation:2,changeDetection:0});class w extends O{onPopulate(e){if(!e.formControl&&u(e)){Y(e,ee(e)||new p.FormArray([],{updateOn:e.modelOptions.updateOn}))}e.fieldGroup=e.fieldGroup||[];const t=Array.isArray(e.model)?e.model.length:0;if(e.fieldGroup.length>t)for(let r=e.fieldGroup.length-1;r>=t;--r)z(e.fieldGroup[r],!0),e.fieldGroup.splice(r,1);for(let r=e.fieldGroup.length;r<t;r++){const n={...m("function"==typeof e.fieldArray?e.fieldArray(e):e.fieldArray),key:`${r}`};e.fieldGroup.push(n)}}add(e,t,{markAsDirty:r}={markAsDirty:!0}){e=e??this.field.fieldGroup.length,this.model||B(this.field,[]),this.model.splice(e,0,t?m(t):void 0),this._build(),r&&this.formControl.markAsDirty()}remove(e,{markAsDirty:t}={markAsDirty:!0}){this.model.splice(e,1);const r=this.field.fieldGroup[e];this.field.fieldGroup.splice(e,1),this.field.fieldGroup.forEach((n,o)=>n.key=`${o}`),z(r,!0),this._build(),t&&this.formControl.markAsDirty()}_build(){(this.field.formControl._fields??[this.field]).forEach(t=>this.options.build(t)),this.options.fieldChanges.next({field:this.field,value:D(this.field),type:"valueChanges"})}}w.\u0275fac=(()=>{let s;return function(t){return(s||(s=i.\u0275\u0275getInheritedFactory(w)))(t||w)}})(),w.\u0275dir=i.\u0275\u0275defineDirective({type:w,features:[i.\u0275\u0275InheritDefinitionFeature]});class k extends O{set _staticContent(e){this.fieldComponent=e}}k.\u0275fac=(()=>{let s;return function(t){return(s||(s=i.\u0275\u0275getInheritedFactory(k)))(t||k)}})(),k.\u0275dir=i.\u0275\u0275defineDirective({type:k,viewQuery:function(e,t){if(1&e&&(i.\u0275\u0275viewQuery(J,5,i.ViewContainerRef),i.\u0275\u0275viewQuery(J,7,i.ViewContainerRef)),2&e){let r;i.\u0275\u0275queryRefresh(r=i.\u0275\u0275loadQuery())&&(t.fieldComponent=r.first),i.\u0275\u0275queryRefresh(r=i.\u0275\u0275loadQuery())&&(t._staticContent=r.first)}},features:[i.\u0275\u0275InheritDefinitionFeature]});class U extends O{constructor(e){super(),this.sanitizer=e,this.innerHtml={}}get template(){return this.field&&this.field.template!==this.innerHtml.template&&(this.innerHtml={template:this.field.template,content:this.props.safeHtml?this.sanitizer.bypassSecurityTrustHtml(this.field.template):this.field.template}),this.innerHtml.content}}U.\u0275fac=function(e){return new(e||U)(i.\u0275\u0275directiveInject(se.DomSanitizer))},U.\u0275cmp=i.\u0275\u0275defineComponent({type:U,selectors:[["formly-template"]],features:[i.\u0275\u0275InheritDefinitionFeature],decls:1,vars:1,consts:[[3,"innerHtml"]],template:function(e,t){1&e&&i.\u0275\u0275element(0,"div",0),2&e&&i.\u0275\u0275property("innerHtml",t.template,i.\u0275\u0275sanitizeHtml)},encapsulation:2,changeDetection:0});class ge{onPopulate(e){if(e._expressions)return;h(e,"_expressions",{}),_(e,["hide"],({currentValue:r,firstChange:n})=>{h(e,"_hide",!!r),(!n||n&&!0===r)&&(e.props.hidden=r,e.options._hiddenFieldsForCheck.push(e))}),e.hideExpression&&_(e,["hideExpression"],({currentValue:r})=>{e._expressions.hide=this.parseExpressions(e,"hide","boolean"==typeof r?()=>r:r)});const t=(r,n)=>{"string"==typeof n||N(n)?e._expressions[r]=this.parseExpressions(e,r,n):n instanceof g.Observable&&(e._expressions[r]={value$:n.pipe((0,y.tap)(o=>{this.evalExpr(e,r,o),e.options.detectChanges(e)}))})};e.expressions=e.expressions||{};for(const r of Object.keys(e.expressions))_(e,["expressions",r],({currentValue:n})=>{t(r,N(n)?(...o)=>n(e,o[3]):n)});e.expressionProperties=e.expressionProperties||{};for(const r of Object.keys(e.expressionProperties))_(e,["expressionProperties",r],({currentValue:n})=>t(r,n))}postPopulate(e){if(!e.parent&&!e.options.checkExpressions){let t=!1;e.options.checkExpressions=(r,n)=>{if(t)return;t=!0;const o=this.checkExpressions(r,n),a=e.options;a._hiddenFieldsForCheck.sort(l=>l.hide?-1:1).forEach(l=>this.changeHideState(l,l.hide,!n)),a._hiddenFieldsForCheck=[],o&&(this.checkExpressions(e),e.options&&e.options.detectChanges&&e.options.detectChanges(e)),t=!1},e.options._checkField=(r,n)=>{console.warn("Formly: 'options._checkField' is deprecated since v6.0, use 'options.checkExpressions' instead."),e.options.checkExpressions(r,n)}}}parseExpressions(e,t,r){let n,o;if(e.parent&&["hide","props.disabled"].includes(t)){const a=l=>"hide"===t?l.hide:l.props.disabled;n=()=>{let l=e.parent;for(;l.parent&&!a(l);)l=l.parent;return a(l)}}return"string"==typeof(r=r||(()=>!1))&&(r=function de(s,e){try{return Function(...e,`return ${s};`)}catch(t){console.error(t)}}(r,["model","formState","field"])),{callback:a=>{try{const l=function me(s,e,t){return"function"==typeof s?s.apply(e,t):!!s}(n?(...c)=>n(e)||r(...c):r,{field:e},[e.model,e.options.formState,e,a]);return!(!a&&(o===l||E(l)&&!(0,g.isObservable)(l)&&JSON.stringify(l)===JSON.stringify(o)))&&(o=l,this.evalExpr(e,t,l),!0)}catch(l){throw l.message=`[Formly Error] [Expression "${t}"] ${l.message}`,l}}}}checkExpressions(e,t=!1){if(!e)return!1;let r=!1;if(e._expressions)for(const n of Object.keys(e._expressions))e._expressions[n].callback?.(t)&&(r=!0);return e.fieldGroup?.forEach(n=>this.checkExpressions(n,t)&&(r=!0)),r}changeDisabledState(e,t){e.fieldGroup&&e.fieldGroup.filter(r=>!r._expressions.hasOwnProperty("props.disabled")).forEach(r=>this.changeDisabledState(r,t)),u(e)&&e.props.disabled!==t&&(e.props.disabled=t)}changeHideState(e,t,r){if(e.fieldGroup&&e.fieldGroup.filter(n=>!n._expressions.hide).forEach(n=>this.changeHideState(n,t,r)),e.formControl&&u(e)){h(e,"_hide",!(!t&&!e.hide));const n=e.formControl;n._fields?.length>1&&L(n),!0!==t||n._fields&&!n._fields.every(o=>!!o._hide)?!1===t&&(e.resetOnHide&&!S(e.defaultValue)&&S(D(e))&&B(e,e.defaultValue),Y(e,void 0,!0),e.resetOnHide&&e.fieldArray&&e.fieldGroup?.length!==e.model?.length&&e.options.build(e)):(z(e,!0),r&&e.resetOnHide&&(B(e,void 0),e.formControl.reset({value:void 0,disabled:e.formControl.disabled}),e.options.fieldChanges.next({value:void 0,field:e,type:"valueChanges"}),e.fieldGroup&&e.formControl instanceof p.FormArray&&(e.fieldGroup.length=0)))}e.options.fieldChanges&&e.options.fieldChanges.next({field:e,type:"hidden",value:t})}evalExpr(e,t,r){try{let n=e;const o=this._evalExpressionPath(e,t),a=o.length-1;for(let l=0;l<a;l++)n=n[o[l]];n[o[a]]=r}catch(n){throw n.message=`[Formly Error] [Expression "${t}"] ${n.message}`,n}if(["templateOptions.disabled","props.disabled"].includes(t)&&u(e)&&this.changeDisabledState(e,r),0===t.indexOf("model.")){const n=t.replace(/^model\./,""),o=e?.key===n?e.formControl:e.form.get(n);o&&(!M(o.value)||!M(r))&&o.value!==r&&o.patchValue(r)}this.emitExpressionChanges(e,t,r)}emitExpressionChanges(e,t,r){e.options.fieldChanges&&e.options.fieldChanges.next({field:e,type:"expressionChanges",property:t,value:r})}_evalExpressionPath(e,t){if(e._expressions[t]&&e._expressions[t].paths)return e._expressions[t].paths;let r=[];return-1===t.indexOf("[")?r=t.split("."):t.split(/[[\]]{1,2}/).filter(n=>n).forEach(n=>{const o=n.match(/['|"](.*?)['|"]/);o?r.push(o[1]):r.push(...n.split(".").filter(a=>a))}),e._expressions[t]&&(e._expressions[t].paths=r),r}}class ye{constructor(e){this.config=e}onPopulate(e){this.initFieldValidation(e,"validators"),this.initFieldValidation(e,"asyncValidators")}initFieldValidation(e,t){const r=[];if("validators"===t&&!(e.hasOwnProperty("fieldGroup")&&!u(e))&&r.push(this.getPredefinedFieldValidation(e)),e[t])for(const n of Object.keys(e[t]))"validation"===n?r.push(...e[t].validation.map(o=>this.wrapNgValidatorFn(e,o))):r.push(this.wrapNgValidatorFn(e,e[t][n],n));h(e,"_"+t,r)}getPredefinedFieldValidation(e){let t=[];return $.forEach(r=>_(e,["props",r],({currentValue:n,firstChange:o})=>{t=t.filter(a=>a!==r),null!=n&&!1!==n&&t.push(r),!o&&e.formControl&&L(e.formControl)})),r=>0===t.length?null:p.Validators.compose(t.map(n=>()=>{const o=e.props[n];switch(n){case"required":return p.Validators.required(r);case"pattern":return p.Validators.pattern(o)(r);case"minLength":const a=p.Validators.minLength(o)(r),l=this.config.getValidatorMessage("minlength")||e.validation?.messages?.minlength?"minlength":"minLength";return a?{[l]:a.minlength}:null;case"maxLength":const c=p.Validators.maxLength(o)(r),f=this.config.getValidatorMessage("maxlength")||e.validation?.messages?.maxlength?"maxlength":"maxLength";return c?{[f]:c.maxlength}:null;case"min":return p.Validators.min(o)(r);case"max":return p.Validators.max(o)(r);default:return null}}))(r)}wrapNgValidatorFn(e,t,r){let n;if("string"==typeof t&&(n=m(this.config.getValidator(t))),"object"==typeof t&&t.name&&(n=m(this.config.getValidator(t.name)),t.options&&(n.options=t.options)),"object"==typeof t&&t.expression){const{expression:o,...a}=t;n={name:r,validation:o,options:Object.keys(a).length>0?a:null}}return"function"==typeof t&&(n={name:r,validation:t}),o=>{const a=n.validation(o,e,n.options);return function fe(s){return!!s&&"function"==typeof s.then}(a)?a.then(l=>this.handleAsyncResult(e,r?!!l:l,n)):(0,g.isObservable)(a)?a.pipe((0,y.map)(l=>this.handleAsyncResult(e,r?!!l:l,n))):this.handleResult(e,r?!!a:a,n)}}handleAsyncResult(e,t,r){return e.options.detectChanges(e),this.handleResult(e,t,r)}handleResult(e,t,{name:r,options:n}){"boolean"==typeof t&&(t=t?null:{[r]:n||!0});const o=e.formControl;return o?._childrenErrors?.[r]?.(),E(t)&&Object.keys(t).forEach(a=>{const l=t[a].errorPath?t[a].errorPath:n?.errorPath,c=l?e.formControl.get(l):null;if(c){const{errorPath:f,...K}=t[a];c.setErrors({...c.errors||{},[a]:K}),!o._childrenErrors&&h(o,"_childrenErrors",{}),o._childrenErrors[a]=()=>{const{[a]:H,...ne}=c.errors||{};c.setErrors(0===Object.keys(ne).length?null:ne)}}}),t}}class Ee{prePopulate(e){this.root||(this.root=e),e.parent&&Object.defineProperty(e,"form",{get:()=>e.parent.formControl,configurable:!0})}onPopulate(e){e.hasOwnProperty("fieldGroup")&&!u(e)?h(e,"formControl",e.form):this.addFormControl(e)}postPopulate(e){if(this.root===e&&(this.root=null,this.setValidators(e)&&e.parent)){let r=e.parent;for(;r;)(u(r)||!r.parent)&&L(r.formControl,!0),r=r.parent}}addFormControl(e){let t=ee(e);if(!t){const r={updateOn:e.modelOptions.updateOn};if(e.fieldGroup)t=new p.FormGroup({},r);else{const n=u(e)?D(e):e.defaultValue;t=new p.FormControl({value:n,disabled:!1},{...r,initialValueIsDefault:!0})}}Y(e,t)}setValidators(e,t=!1){!1===t&&u(e)&&e.props?.disabled&&(t=!0);let r=!1;if(e.fieldGroup?.forEach(n=>n&&this.setValidators(n,t)&&(r=!0)),u(e)||!e.parent||!u(e)&&!e.fieldGroup){const{formControl:n}=e;if(n&&(u(e)&&n instanceof p.FormControl&&(t&&n.enabled&&(n.disable({emitEvent:!1,onlySelf:!0}),r=!0),!t&&n.disabled&&(n.enable({emitEvent:!1,onlySelf:!0}),r=!0)),(null===n.validator||null===n.asyncValidator)&&(n.setValidators(()=>{const o=p.Validators.compose(this.mergeValidators(e,"_validators"));return o?o(n):null}),n.setAsyncValidators(()=>{const o=p.Validators.composeAsync(this.mergeValidators(e,"_asyncValidators"));return o?o(n):(0,g.of)(null)}),r=!0),r)){L(n,!0);let o=n.parent;for(let a=1;a<v(e).length;a++)o&&(L(o,!0),o=o.parent)}}return r}mergeValidators(e,t){const r=[],n=e.formControl;return n?._fields?.length>1?n._fields.filter(o=>!o._hide).forEach(o=>r.push(...o[t])):e[t]&&r.push(...e[t]),e.fieldGroup&&e.fieldGroup.filter(o=>o?.fieldGroup&&!u(o)).forEach(o=>r.push(...this.mergeValidators(o,t))),r}}class Ce{constructor(e){this.config=e,this.formId=0}prePopulate(e){const t=e.parent;this.initRootOptions(e),this.initFieldProps(e),t&&(Object.defineProperty(e,"options",{get:()=>t.options,configurable:!0}),Object.defineProperty(e,"model",{get:()=>u(e)&&e.fieldGroup?D(e):t.model,configurable:!0})),Object.defineProperty(e,"get",{value:r=>X(e,r),configurable:!0}),this.getFieldComponentInstance(e).prePopulate?.(e)}onPopulate(e){this.initFieldOptions(e),this.getFieldComponentInstance(e).onPopulate?.(e),e.fieldGroup&&e.fieldGroup.forEach((t,r)=>{t&&(Object.defineProperty(t,"parent",{get:()=>e,configurable:!0}),Object.defineProperty(t,"index",{get:()=>r,configurable:!0})),this.formId++})}postPopulate(e){this.getFieldComponentInstance(e).postPopulate?.(e)}initFieldProps(e){e.props??(e.props=e.templateOptions),Object.defineProperty(e,"templateOptions",{get:()=>e.props,set:t=>e.props=t,configurable:!0})}initRootOptions(e){if(e.parent)return;const t=e.options;e.options.formState=e.options.formState||{},t.showError||(t.showError=this.config.extras.showError),t.fieldChanges||h(t,"fieldChanges",new g.Subject),t._hiddenFieldsForCheck||(t._hiddenFieldsForCheck=[]),t._markForCheck=r=>{console.warn("Formly: 'options._markForCheck' is deprecated since v6.0, use 'options.detectChanges' instead."),t.detectChanges(r)},t.detectChanges=r=>{r._componentRefs&&(r.options.checkExpressions(r),q(r)),r.fieldGroup?.forEach(n=>n&&t.detectChanges(n))},t.resetModel=r=>{r=m(r??t._initialModel),e.model&&(Object.keys(e.model).forEach(n=>delete e.model[n]),Object.assign(e.model,r||{})),t.build(e),e.form.reset(e.model),t.parentForm&&t.parentForm.control===e.formControl&&(t.parentForm.submitted=!1)},t.updateInitialValue=r=>t._initialModel=m(r??e.model),e.options.updateInitialValue()}initFieldOptions(e){if(R(e,{id:pe(`formly_${this.formId}`,e,e.index),hooks:{},modelOptions:{},validation:{messages:{}},props:e.type&&u(e)?{label:"",placeholder:"",disabled:!1}:{}}),this.config.extras.resetFieldOnHide&&!1!==e.resetOnHide&&(e.resetOnHide=!0),"formly-template"!==e.type&&(e.template||e.expressions?.template||e.expressionProperties?.template)&&(e.type="formly-template"),!e.type&&e.fieldGroup&&(e.type="formly-group"),e.type&&this.config.getMergedField(e),u(e)&&!S(e.defaultValue)&&S(D(e))){const t=n=>n.hide||n.expressions?.hide||n.hideExpression;let r=!e.resetOnHide||!t(e);if(!t(e)&&e.resetOnHide){let n=e.parent;for(;n&&!t(n);)n=n.parent;r=!n||!t(n)}r&&B(e,e.defaultValue)}e.wrappers=e.wrappers||[]}getFieldComponentInstance(e){const t=()=>{let r=this.config.resolveFieldTypeRef(e);const n=e._componentRefs?.slice(-1)[0];return n instanceof i.ComponentRef&&n?.componentType===r?.componentType&&(r=n),r?.instance};return e._proxyInstance||h(e,"_proxyInstance",new Proxy({},{get:(r,n)=>t()?.[n],set:(r,n,o)=>t()[n]=o})),e._proxyInstance}}function re(s){return{types:[{name:"formly-group",component:T},{name:"formly-template",component:U}],extensions:[{name:"core",extension:new Ce(s),priority:-250},{name:"field-validation",extension:new ye(s),priority:-200},{name:"field-form",extension:new Ee,priority:-150},{name:"field-expression",extension:new ge,priority:-100}]}}class F{constructor(e,t=[]){t&&t.forEach(r=>e.addConfig(r))}static forRoot(e={}){return{ngModule:F,providers:[{provide:x,multi:!0,useFactory:re,deps:[d]},{provide:x,useValue:e,multi:!0},d,C]}}static forChild(e={}){return{ngModule:F,providers:[{provide:x,multi:!0,useFactory:re,deps:[d]},{provide:x,useValue:e,multi:!0},C]}}}F.\u0275fac=function(e){return new(e||F)(i.\u0275\u0275inject(d),i.\u0275\u0275inject(x,8))},F.\u0275mod=i.\u0275\u0275defineNgModule({type:F}),F.\u0275inj=i.\u0275\u0275defineInjector({imports:[[G.CommonModule]]})}}]);
//# sourceMappingURL=default-node_modules_ngx-formly_core_fesm2020_ngx-formly-core_mjs.js.map