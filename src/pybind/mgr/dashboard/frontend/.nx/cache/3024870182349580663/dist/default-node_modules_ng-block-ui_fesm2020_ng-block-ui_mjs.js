(self.webpackChunkceph_dashboard=self.webpackChunkceph_dashboard||[]).push([["default-node_modules_ng-block-ui_fesm2020_ng-block-ui_mjs"],{47144:(R,f,d)=>{d.r(f),d.d(f,{BLOCKUI_DEFAULT:()=>u,BlockUI:()=>T,BlockUIComponent:()=>m,BlockUIContentComponent:()=>p,BlockUIDirective:()=>b,BlockUIModule:()=>c,BlockUIService:()=>r});var t=d(87536),I=d(91974),g=d(95631);const U=["templateOutlet"],C=a=>({active:a});function E(a,e){if(1&a&&(t.\u0275\u0275elementStart(0,"div",7),t.\u0275\u0275text(1),t.\u0275\u0275elementEnd()),2&a){const o=t.\u0275\u0275nextContext(2);t.\u0275\u0275advance(),t.\u0275\u0275textInterpolate1(" ",o.message||o.defaultMessage," ")}}function y(a,e){if(1&a&&(t.\u0275\u0275elementStart(0,"div",4),t.\u0275\u0275element(1,"div",5),t.\u0275\u0275template(2,E,2,1,"div",6),t.\u0275\u0275elementEnd()),2&a){const o=t.\u0275\u0275nextContext();t.\u0275\u0275advance(2),t.\u0275\u0275property("ngIf",o.message||o.defaultMessage)}}function S(a,e){}function D(a,e){1&a&&t.\u0275\u0275template(0,S,0,0,"ng-template",null,0,t.\u0275\u0275templateRefExtractor)}const u="block-ui-main";class s{}s.START="start",s.STOP="stop",s.UPDATE="update",s.RESET="reset",s.RESET_GLOBAL="reset_global",s.UNSUBSCRIBE="unsubscribe";class l{constructor(){this.blockUISettings={},this.blockUIInstances={},this.blockUISubject=new g.ReplaySubject(1),this.blockUIObservable=this.blockUISubject.asObservable(),this.blockUIObservable.subscribe(this.blockUIMiddleware.bind(this))}getSettings(){return this.blockUISettings}updateSettings(e={}){this.blockUISettings={...this.blockUISettings,...e}}decorate(e=u){const o={name:e,isActive:!1,blockCount:0,start:this.dispatch(this.blockUISubject,s.START,e),update:this.dispatch(this.blockUISubject,s.UPDATE,e),stop:this.dispatch(this.blockUISubject,s.STOP,e),reset:this.dispatch(this.blockUISubject,s.RESET,e),resetGlobal:this.dispatch(this.blockUISubject,s.RESET_GLOBAL,e),unsubscribe:this.dispatch(this.blockUISubject,s.UNSUBSCRIBE,e)};return this.blockUIInstances[e]=this.blockUIInstances[e]||o,o}observe(){return this.blockUIObservable}clearInstance(e){this.dispatch(this.blockUISubject,s.RESET,e)}blockUIMiddleware({action:e,name:o}){let n=null;switch(e){case s.START:n=!0;break;case s.STOP:case s.RESET:n=!1}null!==n&&(this.blockUIInstances[o].isActive=n)}dispatch(e,o,n=u){return i=>{e.next({name:n,action:o,message:i})}}}l.\u0275fac=function(e){return new(e||l)},l.\u0275prov=t.\u0275\u0275defineInjectable({token:l,factory:l.\u0275fac});class p{constructor(e,o,n){this.blockUI=e,this.resolver=o,this.changeDetectionRef=n,this.name=u,this.defaultBlockState={startTimeouts:[],stopTimeouts:[],updateTimeouts:[],blockCount:0,startCallCount:0,stopCallCount:0},this.state={...this.defaultBlockState}}ngOnInit(){this.settings=this.blockUI.getSettings(),this.blockUISubscription=this.subscribeToBlockUI(this.blockUI.observe())}ngAfterViewInit(){try{if(!this.templateCmp)return!1;if(this.templateCmp instanceof t.TemplateRef)this.templateOutlet.createEmbeddedView(this.templateCmp);else{const e=this.resolver.resolveComponentFactory(this.templateCmp);this.templateCompRef=this.templateOutlet.createComponent(e),this.updateBlockTemplate(this.message)}}catch(e){console.error("ng-block-ui:",e)}}ngAfterViewChecked(){this.detectChanges()}subscribeToBlockUI(e){return e.subscribe(o=>this.onDispatchedEvent(o))}onDispatchedEvent(e){switch(e.action){case s.START:this.onStart(e);break;case s.STOP:this.onStop(e);break;case s.UPDATE:this.onUpdate(e);break;case s.RESET:this.onReset(e);break;case s.RESET_GLOBAL:this.resetState();break;case s.UNSUBSCRIBE:this.onStop(e),this.onUnsubscribe(e.name)}}onStart({name:e,message:o}){if(e===this.name){const n=this.delayStart??this.settings.delayStart??0;this.state.startCallCount+=1;const i=setTimeout(()=>{this.state.blockCount+=1,this.showBlock(o),this.updateInstanceBlockCount()},n);this.state.startTimeouts.push(i)}}onStop({name:e}){if(e===this.name){const o=this.state.stopCallCount+1;if(this.state.startCallCount-o>=0){const n=this.delayStop??this.settings.delayStop??0;this.state.stopCallCount=o;const i=setTimeout(()=>{this.state.blockCount-=1,this.updateInstanceBlockCount(),this.detectChanges()},n);this.state.stopTimeouts.push(i)}}}onUpdate({name:e,message:o}){if(e===this.name){const n=this.delayStart||this.settings.delayStart||0;clearTimeout(this.state.updateTimeouts[0]);const i=setTimeout(()=>{this.updateMessage(o)},n);this.state.updateTimeouts.push(i)}}onReset({name:e}){e===this.name&&this.resetState()}updateMessage(e){this.showBlock(e)}showBlock(e){this.message=e||this.defaultMessage||this.settings.message,this.updateBlockTemplate(this.message),this.detectChanges()}updateBlockTemplate(e){this.templateCompRef&&this.templateCompRef instanceof t.ComponentRef&&(this.templateCompRef.instance.message=e)}resetState(){[...this.state.startTimeouts,...this.state.stopTimeouts,...this.state.updateTimeouts].forEach(clearTimeout),this.state={...this.defaultBlockState},this.updateInstanceBlockCount(),this.detectChanges()}onUnsubscribe(e){this.blockUISubscription&&e===this.name&&this.blockUISubscription.unsubscribe()}updateInstanceBlockCount(){if(this.blockUI.blockUIInstances[this.name]){const{blockCount:e}=this.state;this.blockUI.blockUIInstances[this.name].blockCount=e}}detectChanges(){this.changeDetectionRef.destroyed||this.changeDetectionRef.detectChanges()}ngOnDestroy(){this.resetState(),this.onUnsubscribe(this.name),this.blockUI.clearInstance(this.name)}}p.\u0275fac=function(e){return new(e||p)(t.\u0275\u0275directiveInject(l),t.\u0275\u0275directiveInject(t.ComponentFactoryResolver),t.\u0275\u0275directiveInject(t.ChangeDetectorRef))},p.\u0275cmp=t.\u0275\u0275defineComponent({type:p,selectors:[["block-ui-content"]],viewQuery:function(e,o){if(1&e&&t.\u0275\u0275viewQuery(U,5,t.ViewContainerRef),2&e){let n;t.\u0275\u0275queryRefresh(n=t.\u0275\u0275loadQuery())&&(o.templateOutlet=n.first)}},inputs:{name:"name",delayStart:"delayStart",delayStop:"delayStop",defaultMessage:[0,"message","defaultMessage"],templateCmp:[0,"template","templateCmp"]},decls:3,vars:9,consts:[["templateOutlet",""],[3,"ngClass"],["class","block-ui-spinner",4,"ngIf"],[4,"ngIf"],[1,"block-ui-spinner"],[1,"loader"],["class","message",4,"ngIf"],[1,"message"]],template:function(e,o){1&e&&(t.\u0275\u0275elementStart(0,"div",1),t.\u0275\u0275template(1,y,3,1,"div",2)(2,D,2,0,null,3),t.\u0275\u0275elementEnd()),2&e&&(t.\u0275\u0275classMapInterpolate2("block-ui-wrapper ",o.name," ",o.className,""),t.\u0275\u0275property("ngClass",t.\u0275\u0275pureFunction1(7,C,o.state.blockCount>0)),t.\u0275\u0275advance(),t.\u0275\u0275property("ngIf",!o.templateCmp),t.\u0275\u0275advance(),t.\u0275\u0275property("ngIf",o.templateCmp))},dependencies:[I.NgClass,I.NgIf],styles:[".block-ui-wrapper{display:none;position:fixed;height:100%;width:100%;top:0;left:0;background:rgba(0,0,0,.7);z-index:30000;cursor:wait}.block-ui-wrapper.block-ui-wrapper--element{position:absolute}.block-ui-wrapper.active{display:block}.block-ui-wrapper.block-ui-main{position:fixed}.block-ui-spinner,.block-ui-template{position:absolute;top:40%;margin:0 auto;left:0;right:0;transform:translateY(-50%)}.block-ui-spinner>.message{font-size:1.3em;text-align:center;color:#fff}.block-ui__element{position:relative}.loader,.loader:after{border-radius:50%;width:10em;height:10em}.loader{margin:7px auto;font-size:5px;position:relative;text-indent:-9999em;border-top:1.1em solid rgba(255,255,255,.2);border-right:1.1em solid rgba(255,255,255,.2);border-bottom:1.1em solid rgba(255,255,255,.2);border-left:1.1em solid #ffffff;transform:translateZ(0);animation:load8 1.1s infinite linear}@keyframes load8{0%{transform:rotate(0)}to{transform:rotate(360deg)}}\n"],encapsulation:2});class m{constructor(e){this.blockUI=e}ngOnInit(){this.name=this.name||u,this.template=this.template||this.blockUI.blockUISettings.template}}m.\u0275fac=function(e){return new(e||m)(t.\u0275\u0275directiveInject(l))},m.\u0275cmp=t.\u0275\u0275defineComponent({type:m,selectors:[["block-ui"]],inputs:{name:"name",message:"message",delayStart:"delayStart",delayStop:"delayStop",template:"template"},ngContentSelectors:["*"],decls:2,vars:5,consts:[[3,"name","message","template","delayStart","delayStop"]],template:function(e,o){1&e&&(t.\u0275\u0275projectionDef(),t.\u0275\u0275projection(0),t.\u0275\u0275element(1,"block-ui-content",0)),2&e&&(t.\u0275\u0275advance(),t.\u0275\u0275property("name",o.name)("message",o.message)("template",o.template)("delayStart",o.delayStart)("delayStop",o.delayStop))},dependencies:[p],encapsulation:2});class r{constructor(e){this.blockUIInstance=e,this.globalDispatch=this.blockUIInstance.decorate()}start(e,o){this.dispatch(e,s.START,o)}stop(e){this.dispatch(e,s.STOP)}reset(e){this.dispatch(e,s.RESET)}resetGlobal(){this.globalDispatch.resetGlobal()}update(e,o){this.dispatch(e,s.UPDATE,o)}unsubscribe(e){this.dispatch(e,s.UNSUBSCRIBE)}isActive(e=null){const o=e?this.toArray(e):null,n=this.blockUIInstance.blockUIInstances;return Object.keys(n).some(i=>o?o.indexOf(n[i].name)>=0&&n[i].isActive:n[i].isActive)}dispatch(e=[],o,n){this.toArray(e).forEach(_=>this.blockUIInstance.decorate(_)[o](n))}toArray(e=[]){return"string"==typeof e?[e]:e}}r.\u0275fac=function(e){return new(e||r)(t.\u0275\u0275inject(l))},r.\u0275prov=t.\u0275\u0275defineInjectable({token:r,factory:r.\u0275fac});class b{constructor(e,o,n,i,_,O){this.blockUIService=e,this.blockUIInstanceService=o,this.viewRef=n,this.templateRef=i,this.renderer=_,this.componentFactoryResolver=O}set blockUI(e){this.blockTarget=e}set blockUIMessage(e){this.message=e}set blockUITemplate(e){this.template=e}set blockUIDelayStart(e){this.delayStart=e?Number(e):null}set blockUIDelayStop(e){this.delayStop=e?Number(e):null}ngOnInit(){try{this.viewRef.createEmbeddedView(this.templateRef);const e=this.getParentElement();if(e&&!this.isComponentInTemplate(e)){this.renderer.addClass(e,"block-ui__element"),this.blockUIComponentRef=this.createComponent();let o=this.findContentNode(this.viewRef.element.nativeElement);if(o){const n=this.blockUIInstanceService.getSettings();e.appendChild(o),this.blockUIComponentRef.instance.className="block-ui-wrapper--element",this.blockUIComponentRef.instance.name=this.blockTarget||u,this.message&&(this.blockUIComponentRef.instance.defaultMessage=this.message),this.delayStart&&(this.blockUIComponentRef.instance.delayStart=this.delayStart),this.delayStop&&(this.blockUIComponentRef.instance.delayStop=this.delayStop),(this.template||n.template)&&(this.blockUIComponentRef.instance.templateCmp=this.template||n.template)}}}catch(e){console.error("ng-block-ui:",e)}}isComponentInTemplate(e){const o=e||{};let{children:n}=o;return n=Array.from(n||[]).reverse(),n.some(i=>i&&"block-ui"===i.localName)}getParentElement(){return this.viewRef.get(0).rootNodes[0]}findContentNode(e){const o=e.nextSibling||{},n=e.previousSibling||{};return[o,o.nextSibling,n,n.previousSibling].find(i=>i&&"block-ui-content"===i.localName)}createComponent(){const e=this.componentFactoryResolver.resolveComponentFactory(p);return this.viewRef.createComponent(e)}ngOnDestroy(){this.blockTarget&&this.blockUIService.reset(this.blockTarget)}}b.\u0275fac=function(e){return new(e||b)(t.\u0275\u0275directiveInject(r),t.\u0275\u0275directiveInject(l),t.\u0275\u0275directiveInject(t.ViewContainerRef),t.\u0275\u0275directiveInject(t.TemplateRef),t.\u0275\u0275directiveInject(t.Renderer2),t.\u0275\u0275directiveInject(t.ComponentFactoryResolver))},b.\u0275dir=t.\u0275\u0275defineDirective({type:b,selectors:[["","blockUI",""]],inputs:{blockUI:"blockUI",blockUIMessage:"blockUIMessage",blockUITemplate:"blockUITemplate",blockUIDelayStart:"blockUIDelayStart",blockUIDelayStop:"blockUIDelayStop"}});const h=new l,k=new t.InjectionToken("BlockUIModuleSettings");function v(a){return h.updateSettings(a),h}class c{static forRoot(e={}){return{ngModule:c,providers:[{provide:k,useValue:e},{provide:l,useFactory:v,deps:[k]},r]}}}c.\u0275fac=function(e){return new(e||c)},c.\u0275mod=t.\u0275\u0275defineNgModule({type:c}),c.\u0275inj=t.\u0275\u0275defineInjector({imports:[I.CommonModule]});let B=1;function T(a,e={}){return e.scopeToInstance?function(o,n){const i=`_${n}-block-ui`;Object.defineProperty(o,n,{get:function(){if(this[i])return this[i];const _=`${a}-${B++}`;return this[i]=h.decorate(_),this[i]},set:function(_){this[i]=_}})}:function(o,n){o[n]=h.decorate(a)}}}}]);
//# sourceMappingURL=default-node_modules_ng-block-ui_fesm2020_ng-block-ui_mjs.js.map